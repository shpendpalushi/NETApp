{"ast":null,"code":"/**\r\n * DevExtreme (exporter/file_saver.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _dom_adapter = require(\"../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _window = require(\"../core/utils/window\");\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _events_engine = require(\"../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _ui = require(\"../ui/widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _type = require(\"../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _console = require(\"../core/utils/console\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar window = _window2.default.getWindow();\n\nvar navigator = _window2.default.getNavigator();\n\nvar FILE_EXTESIONS = {\n  EXCEL: \"xlsx\",\n  CSS: \"css\",\n  PNG: \"png\",\n  JPEG: \"jpeg\",\n  GIF: \"gif\",\n  SVG: \"svg\",\n  PDF: \"pdf\"\n};\nvar MIME_TYPES = exports.MIME_TYPES = {\n  CSS: \"text/css\",\n  EXCEL: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n  PNG: \"image/png\",\n  JPEG: \"image/jpeg\",\n  GIF: \"image/gif\",\n  SVG: \"image/svg+xml\",\n  PDF: \"application/pdf\"\n};\nexports.fileSaver = {\n  _revokeObjectURLTimeout: 3e4,\n  _getDataUri: function _getDataUri(format, data) {\n    return \"data:\" + MIME_TYPES[format] + \";base64,\" + data;\n  },\n  _linkDownloader: function _linkDownloader(fileName, href) {\n    var exportLinkElement = _dom_adapter2.default.createElement(\"a\");\n\n    exportLinkElement.download = fileName;\n    exportLinkElement.href = href;\n    exportLinkElement.target = \"_blank\";\n    return exportLinkElement;\n  },\n  _formDownloader: function _formDownloader(proxyUrl, fileName, contentType, data) {\n    var formAttributes = {\n      method: \"post\",\n      action: proxyUrl,\n      enctype: \"multipart/form-data\"\n    };\n    var exportForm = (0, _renderer2.default)(\"<form>\").css({\n      display: \"none\"\n    }).attr(formAttributes);\n    exportForm.append('<input type=\"hidden\" name=\"fileName\" value=\"' + fileName + '\" />');\n    exportForm.append('<input type=\"hidden\" name=\"contentType\" value=\"' + contentType + '\" />');\n    exportForm.append('<input type=\"hidden\" name=\"data\" value=\"' + data + '\" />');\n    exportForm.appendTo(\"body\");\n\n    _events_engine2.default.trigger(exportForm, \"submit\");\n\n    if (_events_engine2.default.trigger(exportForm, \"submit\")) {\n      exportForm.remove();\n    }\n  },\n  _saveByProxy: function _saveByProxy(proxyUrl, fileName, format, data) {\n    return this._formDownloader(proxyUrl, fileName, MIME_TYPES[format], data);\n  },\n  _winJSBlobSave: function _winJSBlobSave(blob, fileName, format) {\n    var savePicker = new Windows.Storage.Pickers.FileSavePicker();\n    savePicker.suggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.documentsLibrary;\n    savePicker.fileTypeChoices.insert(MIME_TYPES[format], [\".\" + FILE_EXTESIONS[format]]);\n    savePicker.suggestedFileName = fileName;\n    savePicker.pickSaveFileAsync().then(function (file) {\n      if (file) {\n        file.openAsync(Windows.Storage.FileAccessMode.readWrite).then(function (outputStream) {\n          var inputStream = blob.msDetachStream();\n          Windows.Storage.Streams.RandomAccessStream.copyAsync(inputStream, outputStream).then(function () {\n            outputStream.flushAsync().done(function () {\n              inputStream.close();\n              outputStream.close();\n            });\n          });\n        });\n      }\n    });\n  },\n  _click: function _click(link) {\n    try {\n      link.dispatchEvent(new MouseEvent(\"click\", {\n        cancelable: true\n      }));\n    } catch (e) {\n      var event = _dom_adapter2.default.getDocument().createEvent(\"MouseEvents\");\n\n      event.initMouseEvent(\"click\", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\n      link.dispatchEvent(event);\n    }\n  },\n  _saveBlobAs: function _saveBlobAs(fileName, format, data) {\n    var _this = this;\n\n    this._blobSaved = false;\n\n    if (_type2.default.isDefined(navigator.msSaveOrOpenBlob)) {\n      navigator.msSaveOrOpenBlob(data, fileName);\n      this._blobSaved = true;\n    } else {\n      if (_type2.default.isDefined(window.WinJS)) {\n        this._winJSBlobSave(data, fileName, format);\n\n        this._blobSaved = true;\n      } else {\n        var URL = window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL;\n\n        if (_type2.default.isDefined(URL)) {\n          var objectURL = URL.createObjectURL(data);\n\n          var downloadLink = this._linkDownloader(fileName, objectURL);\n\n          setTimeout(function () {\n            URL.revokeObjectURL(objectURL);\n            _this._objectUrlRevoked = true;\n          }, this._revokeObjectURLTimeout);\n\n          this._click(downloadLink);\n        } else {\n          _console.logger.warn(\"window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL is not defined\");\n        }\n      }\n    }\n  },\n  saveAs: function saveAs(fileName, format, data, proxyURL, forceProxy) {\n    fileName += \".\" + FILE_EXTESIONS[format];\n\n    if (_type2.default.isDefined(proxyURL)) {\n      _ui2.default.log(\"W0001\", \"Export\", \"proxyURL\", \"19.2\", \"This option is no longer required\");\n    }\n\n    if (forceProxy) {\n      this._saveByProxy(proxyURL, fileName, format, data);\n    } else {\n      if (_type2.default.isFunction(window.Blob)) {\n        this._saveBlobAs(fileName, format, data);\n      } else {\n        if (_type2.default.isDefined(proxyURL) && !_type2.default.isDefined(navigator.userAgent.match(/iPad/i))) {\n          this._saveByProxy(proxyURL, fileName, format, data);\n        } else {\n          if (!_type2.default.isDefined(navigator.userAgent.match(/iPad/i))) {\n            _ui2.default.log(\"E1034\");\n          }\n\n          var downloadLink = this._linkDownloader(fileName, this._getDataUri(format, data));\n\n          this._click(downloadLink);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/exporter/file_saver.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_dom_adapter","_dom_adapter2","_window","_window2","_events_engine","_events_engine2","_ui","_ui2","_type","_type2","_console","obj","window","navigator","FILE_EXTESIONS","EXCEL","CSS","PNG","JPEG","GIF","SVG","PDF","MIME_TYPES","exports","_revokeObjectURLTimeout","_getDataUri","_linkDownloader","exportLinkElement","_formDownloader","formAttributes","method","action","enctype","exportForm","display","_saveByProxy","_winJSBlobSave","savePicker","Windows","file","inputStream","blob","outputStream","_click","link","cancelable","event","_saveBlobAs","_this","URL","objectURL","downloadLink","setTimeout","saveAs","fileName"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (exporter/file_saver.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _dom_adapter = require(\"../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _window = require(\"../core/utils/window\");\r\nvar _window2 = _interopRequireDefault(_window);\r\nvar _events_engine = require(\"../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _ui = require(\"../ui/widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _type = require(\"../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _console = require(\"../core/utils/console\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar window = _window2.default.getWindow();\r\nvar navigator = _window2.default.getNavigator();\r\nvar FILE_EXTESIONS = {\r\n    EXCEL: \"xlsx\",\r\n    CSS: \"css\",\r\n    PNG: \"png\",\r\n    JPEG: \"jpeg\",\r\n    GIF: \"gif\",\r\n    SVG: \"svg\",\r\n    PDF: \"pdf\"\r\n};\r\nvar MIME_TYPES = exports.MIME_TYPES = {\r\n    CSS: \"text/css\",\r\n    EXCEL: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\r\n    PNG: \"image/png\",\r\n    JPEG: \"image/jpeg\",\r\n    GIF: \"image/gif\",\r\n    SVG: \"image/svg+xml\",\r\n    PDF: \"application/pdf\"\r\n};\r\nexports.fileSaver = {\r\n    _revokeObjectURLTimeout: 3e4,\r\n    _getDataUri: function(format, data) {\r\n        return \"data:\" + MIME_TYPES[format] + \";base64,\" + data\r\n    },\r\n    _linkDownloader: function(fileName, href) {\r\n        var exportLinkElement = _dom_adapter2.default.createElement(\"a\");\r\n        exportLinkElement.download = fileName;\r\n        exportLinkElement.href = href;\r\n        exportLinkElement.target = \"_blank\";\r\n        return exportLinkElement\r\n    },\r\n    _formDownloader: function(proxyUrl, fileName, contentType, data) {\r\n        var formAttributes = {\r\n            method: \"post\",\r\n            action: proxyUrl,\r\n            enctype: \"multipart/form-data\"\r\n        };\r\n        var exportForm = (0, _renderer2.default)(\"<form>\").css({\r\n            display: \"none\"\r\n        }).attr(formAttributes);\r\n        exportForm.append('<input type=\"hidden\" name=\"fileName\" value=\"' + fileName + '\" />');\r\n        exportForm.append('<input type=\"hidden\" name=\"contentType\" value=\"' + contentType + '\" />');\r\n        exportForm.append('<input type=\"hidden\" name=\"data\" value=\"' + data + '\" />');\r\n        exportForm.appendTo(\"body\");\r\n        _events_engine2.default.trigger(exportForm, \"submit\");\r\n        if (_events_engine2.default.trigger(exportForm, \"submit\")) {\r\n            exportForm.remove()\r\n        }\r\n    },\r\n    _saveByProxy: function(proxyUrl, fileName, format, data) {\r\n        return this._formDownloader(proxyUrl, fileName, MIME_TYPES[format], data)\r\n    },\r\n    _winJSBlobSave: function(blob, fileName, format) {\r\n        var savePicker = new Windows.Storage.Pickers.FileSavePicker;\r\n        savePicker.suggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.documentsLibrary;\r\n        savePicker.fileTypeChoices.insert(MIME_TYPES[format], [\".\" + FILE_EXTESIONS[format]]);\r\n        savePicker.suggestedFileName = fileName;\r\n        savePicker.pickSaveFileAsync().then(function(file) {\r\n            if (file) {\r\n                file.openAsync(Windows.Storage.FileAccessMode.readWrite).then(function(outputStream) {\r\n                    var inputStream = blob.msDetachStream();\r\n                    Windows.Storage.Streams.RandomAccessStream.copyAsync(inputStream, outputStream).then(function() {\r\n                        outputStream.flushAsync().done(function() {\r\n                            inputStream.close();\r\n                            outputStream.close()\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _click: function(link) {\r\n        try {\r\n            link.dispatchEvent(new MouseEvent(\"click\", {\r\n                cancelable: true\r\n            }))\r\n        } catch (e) {\r\n            var event = _dom_adapter2.default.getDocument().createEvent(\"MouseEvents\");\r\n            event.initMouseEvent(\"click\", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\r\n            link.dispatchEvent(event)\r\n        }\r\n    },\r\n    _saveBlobAs: function(fileName, format, data) {\r\n        var _this = this;\r\n        this._blobSaved = false;\r\n        if (_type2.default.isDefined(navigator.msSaveOrOpenBlob)) {\r\n            navigator.msSaveOrOpenBlob(data, fileName);\r\n            this._blobSaved = true\r\n        } else {\r\n            if (_type2.default.isDefined(window.WinJS)) {\r\n                this._winJSBlobSave(data, fileName, format);\r\n                this._blobSaved = true\r\n            } else {\r\n                var URL = window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL;\r\n                if (_type2.default.isDefined(URL)) {\r\n                    var objectURL = URL.createObjectURL(data);\r\n                    var downloadLink = this._linkDownloader(fileName, objectURL);\r\n                    setTimeout(function() {\r\n                        URL.revokeObjectURL(objectURL);\r\n                        _this._objectUrlRevoked = true\r\n                    }, this._revokeObjectURLTimeout);\r\n                    this._click(downloadLink)\r\n                } else {\r\n                    _console.logger.warn(\"window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL is not defined\")\r\n                }\r\n            }\r\n        }\r\n    },\r\n    saveAs: function(fileName, format, data, proxyURL, forceProxy) {\r\n        fileName += \".\" + FILE_EXTESIONS[format];\r\n        if (_type2.default.isDefined(proxyURL)) {\r\n            _ui2.default.log(\"W0001\", \"Export\", \"proxyURL\", \"19.2\", \"This option is no longer required\")\r\n        }\r\n        if (forceProxy) {\r\n            this._saveByProxy(proxyURL, fileName, format, data)\r\n        } else {\r\n            if (_type2.default.isFunction(window.Blob)) {\r\n                this._saveBlobAs(fileName, format, data)\r\n            } else {\r\n                if (_type2.default.isDefined(proxyURL) && !_type2.default.isDefined(navigator.userAgent.match(/iPad/i))) {\r\n                    this._saveByProxy(proxyURL, fileName, format, data)\r\n                } else {\r\n                    if (!_type2.default.isDefined(navigator.userAgent.match(/iPad/i))) {\r\n                        _ui2.default.log(\"E1034\")\r\n                    }\r\n                    var downloadLink = this._linkDownloader(fileName, this._getDataUri(format, data));\r\n                    this._click(downloadLink)\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}