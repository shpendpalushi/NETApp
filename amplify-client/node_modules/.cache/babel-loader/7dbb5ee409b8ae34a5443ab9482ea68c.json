{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.column_chooser.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _uiGrid_core3 = require(\"./ui.grid_core.columns_view\");\n\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _button = require(\"../button\");\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _tree_view = require(\"../tree_view\");\n\nvar _tree_view2 = _interopRequireDefault(_tree_view);\n\nvar _devices = require(\"../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _popup = require(\"../popup\");\n\nvar _popup2 = _interopRequireDefault(_popup);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar COLUMN_CHOOSER_CLASS = \"column-chooser\";\nvar COLUMN_CHOOSER_BUTTON_CLASS = \"column-chooser-button\";\nvar NOTOUCH_ACTION_CLASS = \"notouch-action\";\nvar COLUMN_CHOOSER_LIST_CLASS = \"column-chooser-list\";\nvar COLUMN_CHOOSER_PLAIN_CLASS = \"column-chooser-plain\";\nvar COLUMN_CHOOSER_DRAG_CLASS = \"column-chooser-mode-drag\";\nvar COLUMN_CHOOSER_SELECT_CLASS = \"column-chooser-mode-select\";\nvar COLUMN_CHOOSER_ICON_NAME = \"column-chooser\";\nvar COLUMN_CHOOSER_ITEM_CLASS = \"dx-column-chooser-item\";\nvar TREEVIEW_NODE_SELECTOR = \".dx-treeview-node\";\nvar CHECKBOX_SELECTOR = \".dx-checkbox\";\nvar CLICK_TIMEOUT = 300;\n\nvar processItems = function processItems(that, chooserColumns) {\n  var item;\n  var items = [];\n  var isSelectMode = \"select\" === that.option(\"columnChooser.mode\");\n\n  if (chooserColumns.length) {\n    (0, _iterator.each)(chooserColumns, function (index, column) {\n      item = {\n        text: column.caption,\n        cssClass: column.cssClass,\n        allowHiding: column.allowHiding,\n        expanded: true,\n        id: column.index,\n        disabled: false,\n        disableCheckBox: false === column.allowHiding,\n        parentId: (0, _type.isDefined)(column.ownerBand) ? column.ownerBand : null\n      };\n\n      if (isSelectMode) {\n        item.selected = column.visible;\n      }\n\n      items.push(item);\n    });\n  }\n\n  return items;\n};\n\nvar ColumnChooserController = _uiGrid_core2.default.ViewController.inherit({\n  renderShowColumnChooserButton: function renderShowColumnChooserButton($element) {\n    var that = this;\n    var columnChooserButtonClass = that.addWidgetPrefix(COLUMN_CHOOSER_BUTTON_CLASS);\n    var columnChooserEnabled = that.option(\"columnChooser.enabled\");\n    var $showColumnChooserButton = $element.find(\".\" + columnChooserButtonClass);\n    var $columnChooserButton;\n\n    if (columnChooserEnabled) {\n      if (!$showColumnChooserButton.length) {\n        $columnChooserButton = (0, _renderer2.default)(\"<div>\").addClass(columnChooserButtonClass).appendTo($element);\n\n        that._createComponent($columnChooserButton, _button2.default, {\n          icon: COLUMN_CHOOSER_ICON_NAME,\n          onClick: function onClick() {\n            that.getView(\"columnChooserView\").showColumnChooser();\n          },\n          hint: that.option(\"columnChooser.title\"),\n          integrationOptions: {}\n        });\n      } else {\n        $showColumnChooserButton.show();\n      }\n    } else {\n      $showColumnChooserButton.hide();\n    }\n  },\n  getPosition: function getPosition() {\n    var rowsView = this.getView(\"rowsView\");\n    return {\n      my: \"right bottom\",\n      at: \"right bottom\",\n      of: rowsView && rowsView.element(),\n      collision: \"fit\",\n      offset: \"-2 -2\",\n      boundaryOffset: \"2 2\"\n    };\n  }\n});\n\nvar ColumnChooserView = _uiGrid_core4.default.ColumnsView.inherit({\n  _resizeCore: _common.noop,\n  _isWinDevice: function _isWinDevice() {\n    return !!_devices2.default.real().win;\n  },\n  _updateList: function _updateList(change) {\n    var items;\n\n    var $popupContent = this._popupContainer.$content();\n\n    var isSelectMode = \"select\" === this.option(\"columnChooser.mode\");\n    var columnChooserList = this._columnChooserList;\n\n    var chooserColumns = this._columnsController.getChooserColumns(isSelectMode);\n\n    if (isSelectMode && columnChooserList && change && \"selection\" === change.changeType) {\n      items = processItems(this, chooserColumns);\n\n      for (var i = 0; i < items.length; i++) {\n        if (items[i].id === change.columnIndex) {\n          columnChooserList.option(\"items[\" + i + \"].selected\", items[i].selected);\n        }\n      }\n    } else {\n      if (!isSelectMode || !columnChooserList || \"full\" === change) {\n        this._popupContainer._wrapper().toggleClass(this.addWidgetPrefix(COLUMN_CHOOSER_DRAG_CLASS), !isSelectMode).toggleClass(this.addWidgetPrefix(COLUMN_CHOOSER_SELECT_CLASS), isSelectMode);\n\n        items = processItems(this, chooserColumns);\n\n        this._renderTreeView($popupContent, items);\n      }\n    }\n  },\n  _initializePopupContainer: function _initializePopupContainer() {\n    var that = this;\n    var $element = that.element().addClass(that.addWidgetPrefix(COLUMN_CHOOSER_CLASS));\n    var columnChooserOptions = that.option(\"columnChooser\");\n\n    var themeName = _themes2.default.current();\n\n    var isGenericTheme = _themes2.default.isGeneric(themeName);\n\n    var isMaterial = _themes2.default.isMaterial(themeName);\n\n    var dxPopupOptions = {\n      visible: false,\n      shading: false,\n      showCloseButton: false,\n      dragEnabled: true,\n      resizeEnabled: true,\n      toolbarItems: [{\n        text: columnChooserOptions.title,\n        toolbar: \"top\",\n        location: isGenericTheme || isMaterial ? \"before\" : \"center\"\n      }],\n      position: that.getController(\"columnChooser\").getPosition(),\n      width: columnChooserOptions.width,\n      height: columnChooserOptions.height,\n      rtlEnabled: that.option(\"rtlEnabled\"),\n      onHidden: function onHidden() {\n        if (that._isWinDevice()) {\n          (0, _renderer2.default)(\"body\").removeClass(that.addWidgetPrefix(NOTOUCH_ACTION_CLASS));\n        }\n      },\n      container: columnChooserOptions.container\n    };\n\n    if (isGenericTheme || isMaterial) {\n      (0, _extend.extend)(dxPopupOptions, {\n        showCloseButton: true\n      });\n    } else {\n      dxPopupOptions.toolbarItems[dxPopupOptions.toolbarItems.length] = {\n        shortcut: \"cancel\"\n      };\n    }\n\n    if (!(0, _type.isDefined)(this._popupContainer)) {\n      that._popupContainer = that._createComponent($element, _popup2.default, dxPopupOptions);\n\n      that._popupContainer.on(\"optionChanged\", function (args) {\n        if (\"visible\" === args.name) {\n          that.renderCompleted.fire();\n        }\n      });\n    } else {\n      this._popupContainer.option(dxPopupOptions);\n    }\n  },\n  _renderCore: function _renderCore(change) {\n    if (this._popupContainer) {\n      this._updateList(change);\n    }\n  },\n  _renderTreeView: function _renderTreeView($container, items) {\n    var that = this;\n    var scrollTop;\n    var scrollableInstance;\n    var columnChooser = this.option(\"columnChooser\");\n    var isSelectMode = \"select\" === columnChooser.mode;\n    var treeViewConfig = {\n      items: items,\n      dataStructure: \"plain\",\n      activeStateEnabled: true,\n      focusStateEnabled: true,\n      hoverStateEnabled: true,\n      itemTemplate: \"item\",\n      showCheckBoxesMode: \"none\",\n      rootValue: null,\n      searchEnabled: columnChooser.allowSearch,\n      searchTimeout: columnChooser.searchTimeout,\n      onItemRendered: function onItemRendered(e) {\n        if (e.itemData.disableCheckBox) {\n          var $treeViewNode = (0, _renderer2.default)(e.itemElement).closest(TREEVIEW_NODE_SELECTOR);\n          var checkBoxInstance;\n          var $checkBox;\n\n          if ($treeViewNode.length) {\n            $checkBox = $treeViewNode.find(CHECKBOX_SELECTOR);\n\n            if ($checkBox.length) {\n              checkBoxInstance = $checkBox.data(\"dxCheckBox\");\n              checkBoxInstance && checkBoxInstance.option(\"disabled\", true);\n            }\n          }\n        }\n      }\n    };\n    scrollableInstance = $container.find(\".dx-scrollable\").data(\"dxScrollable\");\n    scrollTop = scrollableInstance && scrollableInstance.scrollTop();\n\n    if (isSelectMode && !this._columnsController.isBandColumnsUsed()) {\n      $container.addClass(this.addWidgetPrefix(COLUMN_CHOOSER_PLAIN_CLASS));\n    }\n\n    treeViewConfig.onContentReady = function (e) {\n      (0, _common.deferUpdate)(function () {\n        if (scrollTop) {\n          var scrollable = (0, _renderer2.default)(e.element).find(\".dx-scrollable\").data(\"dxScrollable\");\n          scrollable && scrollable.scrollTo({\n            y: scrollTop\n          });\n        }\n\n        that.renderCompleted.fire();\n      });\n    };\n\n    if (this._isWinDevice()) {\n      treeViewConfig.useNativeScrolling = false;\n    }\n\n    (0, _extend.extend)(treeViewConfig, isSelectMode ? this._prepareSelectModeConfig() : this._prepareDragModeConfig());\n\n    if (this._columnChooserList) {\n      if (!treeViewConfig.searchEnabled) {\n        treeViewConfig.searchValue = \"\";\n      }\n\n      this._columnChooserList.option(treeViewConfig);\n    } else {\n      this._columnChooserList = this._createComponent($container, _tree_view2.default, treeViewConfig);\n      $container.addClass(this.addWidgetPrefix(COLUMN_CHOOSER_LIST_CLASS));\n    }\n  },\n  _prepareDragModeConfig: function _prepareDragModeConfig() {\n    var columnChooserOptions = this.option(\"columnChooser\");\n    return {\n      noDataText: columnChooserOptions.emptyPanelText,\n      activeStateEnabled: false,\n      focusStateEnabled: false,\n      hoverStateEnabled: false,\n      itemTemplate: function itemTemplate(data, index, item) {\n        (0, _renderer2.default)(item).text(data.text).parent().addClass(data.cssClass).addClass(COLUMN_CHOOSER_ITEM_CLASS);\n      }\n    };\n  },\n  _prepareSelectModeConfig: function _prepareSelectModeConfig() {\n    var that = this;\n\n    var selectionChangedHandler = function selectionChangedHandler(e) {\n      var visibleColumns = that._columnsController.getVisibleColumns().filter(function (item) {\n        return !item.command;\n      });\n\n      var isLastColumnUnselected = 1 === visibleColumns.length && !e.itemData.selected;\n\n      if (isLastColumnUnselected) {\n        e.component.selectItem(e.itemElement);\n      } else {\n        setTimeout(function () {\n          that._columnsController.columnOption(e.itemData.id, \"visible\", e.itemData.selected);\n        }, CLICK_TIMEOUT);\n      }\n    };\n\n    return {\n      selectNodesRecursive: false,\n      showCheckBoxesMode: \"normal\",\n      onItemSelectionChanged: selectionChangedHandler\n    };\n  },\n  _columnOptionChanged: function _columnOptionChanged(e) {\n    var changeTypes = e.changeTypes;\n    var optionNames = e.optionNames;\n    var isSelectMode = \"select\" === this.option(\"columnChooser.mode\");\n    this.callBase(e);\n\n    if (isSelectMode) {\n      if (optionNames.visible && 1 === optionNames.length && void 0 !== e.columnIndex) {\n        this.render(null, {\n          changeType: \"selection\",\n          columnIndex: e.columnIndex\n        });\n      } else {\n        if (optionNames.showInColumnChooser || optionNames.visible || changeTypes.columns && optionNames.all) {\n          this.render(null, \"full\");\n        }\n      }\n    }\n  },\n  optionChanged: function optionChanged(args) {\n    switch (args.name) {\n      case \"columnChooser\":\n        this._initializePopupContainer();\n\n        this.render(null, \"full\");\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  getColumnElements: function getColumnElements() {\n    var result = [];\n    var $node;\n    var item;\n    var isSelectMode = \"select\" === this.option(\"columnChooser.mode\");\n\n    var chooserColumns = this._columnsController.getChooserColumns(isSelectMode);\n\n    var $content = this._popupContainer && this._popupContainer.$content();\n\n    var $nodes = $content && $content.find(\".dx-treeview-node\");\n\n    if ($nodes) {\n      chooserColumns.forEach(function (column) {\n        $node = $nodes.filter(\"[data-item-id = '\" + column.index + \"']\");\n        item = $node.length ? $node.children(\".\" + COLUMN_CHOOSER_ITEM_CLASS).get(0) : null;\n        result.push(item);\n      });\n    }\n\n    return (0, _renderer2.default)(result);\n  },\n  getName: function getName() {\n    return \"columnChooser\";\n  },\n  getColumns: function getColumns() {\n    return this._columnsController.getChooserColumns();\n  },\n  allowDragging: function allowDragging(column, sourceLocation) {\n    var columnVisible = column && column.allowHiding && (\"columnChooser\" !== sourceLocation || !column.visible && this._columnsController.isParentColumnVisible(column.index));\n\n    return this.isColumnChooserVisible() && columnVisible;\n  },\n  getBoundingRect: function getBoundingRect() {\n    var that = this;\n\n    var container = that._popupContainer && that._popupContainer._container();\n\n    var offset;\n\n    if (container && container.is(\":visible\")) {\n      offset = container.offset();\n      return {\n        left: offset.left,\n        top: offset.top,\n        right: offset.left + container.outerWidth(),\n        bottom: offset.top + container.outerHeight()\n      };\n    }\n\n    return null;\n  },\n  showColumnChooser: function showColumnChooser() {\n    if (!this._popupContainer) {\n      this._initializePopupContainer();\n\n      this.render();\n    }\n\n    this._popupContainer.show();\n\n    if (this._isWinDevice()) {\n      (0, _renderer2.default)(\"body\").addClass(this.addWidgetPrefix(NOTOUCH_ACTION_CLASS));\n    }\n  },\n  hideColumnChooser: function hideColumnChooser() {\n    if (this._popupContainer) {\n      this._popupContainer.hide();\n    }\n  },\n  isColumnChooserVisible: function isColumnChooserVisible() {\n    var popupContainer = this._popupContainer;\n    return popupContainer && popupContainer.option(\"visible\");\n  },\n  publicMethods: function publicMethods() {\n    return [\"showColumnChooser\", \"hideColumnChooser\"];\n  }\n});\n\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      columnChooser: {\n        enabled: false,\n        allowSearch: false,\n        searchTimeout: 500,\n        mode: \"dragAndDrop\",\n        width: 250,\n        height: 260,\n        title: _message2.default.format(\"dxDataGrid-columnChooserTitle\"),\n        emptyPanelText: _message2.default.format(\"dxDataGrid-columnChooserEmptyText\"),\n        container: void 0\n      }\n    };\n  },\n  controllers: {\n    columnChooser: ColumnChooserController\n  },\n  views: {\n    columnChooserView: ColumnChooserView\n  },\n  extenders: {\n    views: {\n      headerPanel: {\n        _getToolbarItems: function _getToolbarItems() {\n          var items = this.callBase();\n          return this._appendColumnChooserItem(items);\n        },\n        _appendColumnChooserItem: function _appendColumnChooserItem(items) {\n          var that = this;\n          var columnChooserEnabled = that.option(\"columnChooser.enabled\");\n\n          if (columnChooserEnabled) {\n            var onClickHandler = function onClickHandler() {\n              that.component.getView(\"columnChooserView\").showColumnChooser();\n            };\n\n            var onInitialized = function onInitialized(e) {\n              (0, _renderer2.default)(e.element).addClass(that._getToolbarButtonClass(that.addWidgetPrefix(COLUMN_CHOOSER_BUTTON_CLASS)));\n            };\n\n            var hintText = that.option(\"columnChooser.title\");\n            var toolbarItem = {\n              widget: \"dxButton\",\n              options: {\n                icon: COLUMN_CHOOSER_ICON_NAME,\n                onClick: onClickHandler,\n                hint: hintText,\n                text: hintText,\n                onInitialized: onInitialized\n              },\n              showText: \"inMenu\",\n              location: \"after\",\n              name: \"columnChooserButton\",\n              locateInMenu: \"auto\",\n              sortIndex: 40\n            };\n            items.push(toolbarItem);\n          }\n\n          return items;\n        },\n        optionChanged: function optionChanged(args) {\n          switch (args.name) {\n            case \"columnChooser\":\n              this._invalidate();\n\n              args.handled = true;\n              break;\n\n            default:\n              this.callBase(args);\n          }\n        },\n        isVisible: function isVisible() {\n          var that = this;\n          var columnChooserEnabled = that.option(\"columnChooser.enabled\");\n          return that.callBase() || columnChooserEnabled;\n        }\n      }\n    },\n    controllers: {\n      columns: {\n        allowMoveColumn: function allowMoveColumn(fromVisibleIndex, toVisibleIndex, sourceLocation, targetLocation) {\n          var columnChooserMode = this.option(\"columnChooser.mode\");\n          var isMoveColumnDisallowed = \"select\" === columnChooserMode && \"columnChooser\" === targetLocation;\n          return isMoveColumnDisallowed ? false : this.callBase(fromVisibleIndex, toVisibleIndex, sourceLocation, targetLocation);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.column_chooser.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_common","_uiGrid_core","_uiGrid_core2","_uiGrid_core3","_uiGrid_core4","_message","_message2","_themes","_themes2","_button","_button2","_tree_view","_tree_view2","_devices","_devices2","_popup","_popup2","_type","_extend","_iterator","obj","COLUMN_CHOOSER_CLASS","COLUMN_CHOOSER_BUTTON_CLASS","NOTOUCH_ACTION_CLASS","COLUMN_CHOOSER_LIST_CLASS","COLUMN_CHOOSER_PLAIN_CLASS","COLUMN_CHOOSER_DRAG_CLASS","COLUMN_CHOOSER_SELECT_CLASS","COLUMN_CHOOSER_ICON_NAME","COLUMN_CHOOSER_ITEM_CLASS","TREEVIEW_NODE_SELECTOR","CHECKBOX_SELECTOR","CLICK_TIMEOUT","processItems","items","isSelectMode","that","chooserColumns","item","text","column","cssClass","allowHiding","expanded","id","disabled","disableCheckBox","parentId","ColumnChooserController","renderShowColumnChooserButton","columnChooserButtonClass","columnChooserEnabled","$showColumnChooserButton","$element","$columnChooserButton","icon","onClick","hint","integrationOptions","getPosition","rowsView","my","at","of","collision","offset","boundaryOffset","ColumnChooserView","_resizeCore","_isWinDevice","_updateList","$popupContent","columnChooserList","change","i","_initializePopupContainer","columnChooserOptions","themeName","isGenericTheme","isMaterial","dxPopupOptions","visible","shading","showCloseButton","dragEnabled","resizeEnabled","toolbarItems","toolbar","location","position","width","height","rtlEnabled","onHidden","container","shortcut","args","_renderCore","_renderTreeView","columnChooser","treeViewConfig","dataStructure","activeStateEnabled","focusStateEnabled","hoverStateEnabled","itemTemplate","showCheckBoxesMode","rootValue","searchEnabled","searchTimeout","onItemRendered","e","$treeViewNode","$checkBox","checkBoxInstance","scrollableInstance","$container","scrollTop","scrollable","y","_prepareDragModeConfig","noDataText","data","_prepareSelectModeConfig","selectionChangedHandler","visibleColumns","isLastColumnUnselected","setTimeout","selectNodesRecursive","onItemSelectionChanged","_columnOptionChanged","changeTypes","optionNames","changeType","columnIndex","optionChanged","getColumnElements","result","$content","$nodes","$node","getName","getColumns","allowDragging","columnVisible","getBoundingRect","left","top","right","bottom","showColumnChooser","hideColumnChooser","isColumnChooserVisible","popupContainer","publicMethods","module","defaultOptions","enabled","allowSearch","mode","title","emptyPanelText","controllers","views","columnChooserView","extenders","headerPanel","_getToolbarItems","_appendColumnChooserItem","onClickHandler","onInitialized","hintText","toolbarItem","widget","options","showText","name","locateInMenu","sortIndex","isVisible","columns","allowMoveColumn","columnChooserMode","isMoveColumnDisallowed"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.column_chooser.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _uiGrid_core3 = require(\"./ui.grid_core.columns_view\");\r\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nvar _button = require(\"../button\");\r\nvar _button2 = _interopRequireDefault(_button);\r\nvar _tree_view = require(\"../tree_view\");\r\nvar _tree_view2 = _interopRequireDefault(_tree_view);\r\nvar _devices = require(\"../../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _popup = require(\"../popup\");\r\nvar _popup2 = _interopRequireDefault(_popup);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar COLUMN_CHOOSER_CLASS = \"column-chooser\";\r\nvar COLUMN_CHOOSER_BUTTON_CLASS = \"column-chooser-button\";\r\nvar NOTOUCH_ACTION_CLASS = \"notouch-action\";\r\nvar COLUMN_CHOOSER_LIST_CLASS = \"column-chooser-list\";\r\nvar COLUMN_CHOOSER_PLAIN_CLASS = \"column-chooser-plain\";\r\nvar COLUMN_CHOOSER_DRAG_CLASS = \"column-chooser-mode-drag\";\r\nvar COLUMN_CHOOSER_SELECT_CLASS = \"column-chooser-mode-select\";\r\nvar COLUMN_CHOOSER_ICON_NAME = \"column-chooser\";\r\nvar COLUMN_CHOOSER_ITEM_CLASS = \"dx-column-chooser-item\";\r\nvar TREEVIEW_NODE_SELECTOR = \".dx-treeview-node\";\r\nvar CHECKBOX_SELECTOR = \".dx-checkbox\";\r\nvar CLICK_TIMEOUT = 300;\r\nvar processItems = function(that, chooserColumns) {\r\n    var item;\r\n    var items = [];\r\n    var isSelectMode = \"select\" === that.option(\"columnChooser.mode\");\r\n    if (chooserColumns.length) {\r\n        (0, _iterator.each)(chooserColumns, function(index, column) {\r\n            item = {\r\n                text: column.caption,\r\n                cssClass: column.cssClass,\r\n                allowHiding: column.allowHiding,\r\n                expanded: true,\r\n                id: column.index,\r\n                disabled: false,\r\n                disableCheckBox: false === column.allowHiding,\r\n                parentId: (0, _type.isDefined)(column.ownerBand) ? column.ownerBand : null\r\n            };\r\n            if (isSelectMode) {\r\n                item.selected = column.visible\r\n            }\r\n            items.push(item)\r\n        })\r\n    }\r\n    return items\r\n};\r\nvar ColumnChooserController = _uiGrid_core2.default.ViewController.inherit({\r\n    renderShowColumnChooserButton: function($element) {\r\n        var that = this;\r\n        var columnChooserButtonClass = that.addWidgetPrefix(COLUMN_CHOOSER_BUTTON_CLASS);\r\n        var columnChooserEnabled = that.option(\"columnChooser.enabled\");\r\n        var $showColumnChooserButton = $element.find(\".\" + columnChooserButtonClass);\r\n        var $columnChooserButton;\r\n        if (columnChooserEnabled) {\r\n            if (!$showColumnChooserButton.length) {\r\n                $columnChooserButton = (0, _renderer2.default)(\"<div>\").addClass(columnChooserButtonClass).appendTo($element);\r\n                that._createComponent($columnChooserButton, _button2.default, {\r\n                    icon: COLUMN_CHOOSER_ICON_NAME,\r\n                    onClick: function() {\r\n                        that.getView(\"columnChooserView\").showColumnChooser()\r\n                    },\r\n                    hint: that.option(\"columnChooser.title\"),\r\n                    integrationOptions: {}\r\n                })\r\n            } else {\r\n                $showColumnChooserButton.show()\r\n            }\r\n        } else {\r\n            $showColumnChooserButton.hide()\r\n        }\r\n    },\r\n    getPosition: function() {\r\n        var rowsView = this.getView(\"rowsView\");\r\n        return {\r\n            my: \"right bottom\",\r\n            at: \"right bottom\",\r\n            of: rowsView && rowsView.element(),\r\n            collision: \"fit\",\r\n            offset: \"-2 -2\",\r\n            boundaryOffset: \"2 2\"\r\n        }\r\n    }\r\n});\r\nvar ColumnChooserView = _uiGrid_core4.default.ColumnsView.inherit({\r\n    _resizeCore: _common.noop,\r\n    _isWinDevice: function() {\r\n        return !!_devices2.default.real().win\r\n    },\r\n    _updateList: function(change) {\r\n        var items;\r\n        var $popupContent = this._popupContainer.$content();\r\n        var isSelectMode = \"select\" === this.option(\"columnChooser.mode\");\r\n        var columnChooserList = this._columnChooserList;\r\n        var chooserColumns = this._columnsController.getChooserColumns(isSelectMode);\r\n        if (isSelectMode && columnChooserList && change && \"selection\" === change.changeType) {\r\n            items = processItems(this, chooserColumns);\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i].id === change.columnIndex) {\r\n                    columnChooserList.option(\"items[\" + i + \"].selected\", items[i].selected)\r\n                }\r\n            }\r\n        } else {\r\n            if (!isSelectMode || !columnChooserList || \"full\" === change) {\r\n                this._popupContainer._wrapper().toggleClass(this.addWidgetPrefix(COLUMN_CHOOSER_DRAG_CLASS), !isSelectMode).toggleClass(this.addWidgetPrefix(COLUMN_CHOOSER_SELECT_CLASS), isSelectMode);\r\n                items = processItems(this, chooserColumns);\r\n                this._renderTreeView($popupContent, items)\r\n            }\r\n        }\r\n    },\r\n    _initializePopupContainer: function() {\r\n        var that = this;\r\n        var $element = that.element().addClass(that.addWidgetPrefix(COLUMN_CHOOSER_CLASS));\r\n        var columnChooserOptions = that.option(\"columnChooser\");\r\n        var themeName = _themes2.default.current();\r\n        var isGenericTheme = _themes2.default.isGeneric(themeName);\r\n        var isMaterial = _themes2.default.isMaterial(themeName);\r\n        var dxPopupOptions = {\r\n            visible: false,\r\n            shading: false,\r\n            showCloseButton: false,\r\n            dragEnabled: true,\r\n            resizeEnabled: true,\r\n            toolbarItems: [{\r\n                text: columnChooserOptions.title,\r\n                toolbar: \"top\",\r\n                location: isGenericTheme || isMaterial ? \"before\" : \"center\"\r\n            }],\r\n            position: that.getController(\"columnChooser\").getPosition(),\r\n            width: columnChooserOptions.width,\r\n            height: columnChooserOptions.height,\r\n            rtlEnabled: that.option(\"rtlEnabled\"),\r\n            onHidden: function() {\r\n                if (that._isWinDevice()) {\r\n                    (0, _renderer2.default)(\"body\").removeClass(that.addWidgetPrefix(NOTOUCH_ACTION_CLASS))\r\n                }\r\n            },\r\n            container: columnChooserOptions.container\r\n        };\r\n        if (isGenericTheme || isMaterial) {\r\n            (0, _extend.extend)(dxPopupOptions, {\r\n                showCloseButton: true\r\n            })\r\n        } else {\r\n            dxPopupOptions.toolbarItems[dxPopupOptions.toolbarItems.length] = {\r\n                shortcut: \"cancel\"\r\n            }\r\n        }\r\n        if (!(0, _type.isDefined)(this._popupContainer)) {\r\n            that._popupContainer = that._createComponent($element, _popup2.default, dxPopupOptions);\r\n            that._popupContainer.on(\"optionChanged\", function(args) {\r\n                if (\"visible\" === args.name) {\r\n                    that.renderCompleted.fire()\r\n                }\r\n            })\r\n        } else {\r\n            this._popupContainer.option(dxPopupOptions)\r\n        }\r\n    },\r\n    _renderCore: function(change) {\r\n        if (this._popupContainer) {\r\n            this._updateList(change)\r\n        }\r\n    },\r\n    _renderTreeView: function($container, items) {\r\n        var that = this;\r\n        var scrollTop;\r\n        var scrollableInstance;\r\n        var columnChooser = this.option(\"columnChooser\");\r\n        var isSelectMode = \"select\" === columnChooser.mode;\r\n        var treeViewConfig = {\r\n            items: items,\r\n            dataStructure: \"plain\",\r\n            activeStateEnabled: true,\r\n            focusStateEnabled: true,\r\n            hoverStateEnabled: true,\r\n            itemTemplate: \"item\",\r\n            showCheckBoxesMode: \"none\",\r\n            rootValue: null,\r\n            searchEnabled: columnChooser.allowSearch,\r\n            searchTimeout: columnChooser.searchTimeout,\r\n            onItemRendered: function(e) {\r\n                if (e.itemData.disableCheckBox) {\r\n                    var $treeViewNode = (0, _renderer2.default)(e.itemElement).closest(TREEVIEW_NODE_SELECTOR);\r\n                    var checkBoxInstance;\r\n                    var $checkBox;\r\n                    if ($treeViewNode.length) {\r\n                        $checkBox = $treeViewNode.find(CHECKBOX_SELECTOR);\r\n                        if ($checkBox.length) {\r\n                            checkBoxInstance = $checkBox.data(\"dxCheckBox\");\r\n                            checkBoxInstance && checkBoxInstance.option(\"disabled\", true)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        scrollableInstance = $container.find(\".dx-scrollable\").data(\"dxScrollable\");\r\n        scrollTop = scrollableInstance && scrollableInstance.scrollTop();\r\n        if (isSelectMode && !this._columnsController.isBandColumnsUsed()) {\r\n            $container.addClass(this.addWidgetPrefix(COLUMN_CHOOSER_PLAIN_CLASS))\r\n        }\r\n        treeViewConfig.onContentReady = function(e) {\r\n            (0, _common.deferUpdate)(function() {\r\n                if (scrollTop) {\r\n                    var scrollable = (0, _renderer2.default)(e.element).find(\".dx-scrollable\").data(\"dxScrollable\");\r\n                    scrollable && scrollable.scrollTo({\r\n                        y: scrollTop\r\n                    })\r\n                }\r\n                that.renderCompleted.fire()\r\n            })\r\n        };\r\n        if (this._isWinDevice()) {\r\n            treeViewConfig.useNativeScrolling = false\r\n        }(0, _extend.extend)(treeViewConfig, isSelectMode ? this._prepareSelectModeConfig() : this._prepareDragModeConfig());\r\n        if (this._columnChooserList) {\r\n            if (!treeViewConfig.searchEnabled) {\r\n                treeViewConfig.searchValue = \"\"\r\n            }\r\n            this._columnChooserList.option(treeViewConfig)\r\n        } else {\r\n            this._columnChooserList = this._createComponent($container, _tree_view2.default, treeViewConfig);\r\n            $container.addClass(this.addWidgetPrefix(COLUMN_CHOOSER_LIST_CLASS))\r\n        }\r\n    },\r\n    _prepareDragModeConfig: function() {\r\n        var columnChooserOptions = this.option(\"columnChooser\");\r\n        return {\r\n            noDataText: columnChooserOptions.emptyPanelText,\r\n            activeStateEnabled: false,\r\n            focusStateEnabled: false,\r\n            hoverStateEnabled: false,\r\n            itemTemplate: function(data, index, item) {\r\n                (0, _renderer2.default)(item).text(data.text).parent().addClass(data.cssClass).addClass(COLUMN_CHOOSER_ITEM_CLASS)\r\n            }\r\n        }\r\n    },\r\n    _prepareSelectModeConfig: function() {\r\n        var that = this;\r\n        var selectionChangedHandler = function(e) {\r\n            var visibleColumns = that._columnsController.getVisibleColumns().filter(function(item) {\r\n                return !item.command\r\n            });\r\n            var isLastColumnUnselected = 1 === visibleColumns.length && !e.itemData.selected;\r\n            if (isLastColumnUnselected) {\r\n                e.component.selectItem(e.itemElement)\r\n            } else {\r\n                setTimeout(function() {\r\n                    that._columnsController.columnOption(e.itemData.id, \"visible\", e.itemData.selected)\r\n                }, CLICK_TIMEOUT)\r\n            }\r\n        };\r\n        return {\r\n            selectNodesRecursive: false,\r\n            showCheckBoxesMode: \"normal\",\r\n            onItemSelectionChanged: selectionChangedHandler\r\n        }\r\n    },\r\n    _columnOptionChanged: function(e) {\r\n        var changeTypes = e.changeTypes;\r\n        var optionNames = e.optionNames;\r\n        var isSelectMode = \"select\" === this.option(\"columnChooser.mode\");\r\n        this.callBase(e);\r\n        if (isSelectMode) {\r\n            if (optionNames.visible && 1 === optionNames.length && void 0 !== e.columnIndex) {\r\n                this.render(null, {\r\n                    changeType: \"selection\",\r\n                    columnIndex: e.columnIndex\r\n                })\r\n            } else {\r\n                if (optionNames.showInColumnChooser || optionNames.visible || changeTypes.columns && optionNames.all) {\r\n                    this.render(null, \"full\")\r\n                }\r\n            }\r\n        }\r\n    },\r\n    optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"columnChooser\":\r\n                this._initializePopupContainer();\r\n                this.render(null, \"full\");\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    getColumnElements: function() {\r\n        var result = [];\r\n        var $node;\r\n        var item;\r\n        var isSelectMode = \"select\" === this.option(\"columnChooser.mode\");\r\n        var chooserColumns = this._columnsController.getChooserColumns(isSelectMode);\r\n        var $content = this._popupContainer && this._popupContainer.$content();\r\n        var $nodes = $content && $content.find(\".dx-treeview-node\");\r\n        if ($nodes) {\r\n            chooserColumns.forEach(function(column) {\r\n                $node = $nodes.filter(\"[data-item-id = '\" + column.index + \"']\");\r\n                item = $node.length ? $node.children(\".\" + COLUMN_CHOOSER_ITEM_CLASS).get(0) : null;\r\n                result.push(item)\r\n            })\r\n        }\r\n        return (0, _renderer2.default)(result)\r\n    },\r\n    getName: function() {\r\n        return \"columnChooser\"\r\n    },\r\n    getColumns: function() {\r\n        return this._columnsController.getChooserColumns()\r\n    },\r\n    allowDragging: function(column, sourceLocation) {\r\n        var columnVisible = column && column.allowHiding && (\"columnChooser\" !== sourceLocation || !column.visible && this._columnsController.isParentColumnVisible(column.index));\r\n        return this.isColumnChooserVisible() && columnVisible\r\n    },\r\n    getBoundingRect: function() {\r\n        var that = this;\r\n        var container = that._popupContainer && that._popupContainer._container();\r\n        var offset;\r\n        if (container && container.is(\":visible\")) {\r\n            offset = container.offset();\r\n            return {\r\n                left: offset.left,\r\n                top: offset.top,\r\n                right: offset.left + container.outerWidth(),\r\n                bottom: offset.top + container.outerHeight()\r\n            }\r\n        }\r\n        return null\r\n    },\r\n    showColumnChooser: function() {\r\n        if (!this._popupContainer) {\r\n            this._initializePopupContainer();\r\n            this.render()\r\n        }\r\n        this._popupContainer.show();\r\n        if (this._isWinDevice()) {\r\n            (0, _renderer2.default)(\"body\").addClass(this.addWidgetPrefix(NOTOUCH_ACTION_CLASS))\r\n        }\r\n    },\r\n    hideColumnChooser: function() {\r\n        if (this._popupContainer) {\r\n            this._popupContainer.hide()\r\n        }\r\n    },\r\n    isColumnChooserVisible: function() {\r\n        var popupContainer = this._popupContainer;\r\n        return popupContainer && popupContainer.option(\"visible\")\r\n    },\r\n    publicMethods: function() {\r\n        return [\"showColumnChooser\", \"hideColumnChooser\"]\r\n    }\r\n});\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            columnChooser: {\r\n                enabled: false,\r\n                allowSearch: false,\r\n                searchTimeout: 500,\r\n                mode: \"dragAndDrop\",\r\n                width: 250,\r\n                height: 260,\r\n                title: _message2.default.format(\"dxDataGrid-columnChooserTitle\"),\r\n                emptyPanelText: _message2.default.format(\"dxDataGrid-columnChooserEmptyText\"),\r\n                container: void 0\r\n            }\r\n        }\r\n    },\r\n    controllers: {\r\n        columnChooser: ColumnChooserController\r\n    },\r\n    views: {\r\n        columnChooserView: ColumnChooserView\r\n    },\r\n    extenders: {\r\n        views: {\r\n            headerPanel: {\r\n                _getToolbarItems: function() {\r\n                    var items = this.callBase();\r\n                    return this._appendColumnChooserItem(items)\r\n                },\r\n                _appendColumnChooserItem: function(items) {\r\n                    var that = this;\r\n                    var columnChooserEnabled = that.option(\"columnChooser.enabled\");\r\n                    if (columnChooserEnabled) {\r\n                        var onClickHandler = function() {\r\n                            that.component.getView(\"columnChooserView\").showColumnChooser()\r\n                        };\r\n                        var onInitialized = function(e) {\r\n                            (0, _renderer2.default)(e.element).addClass(that._getToolbarButtonClass(that.addWidgetPrefix(COLUMN_CHOOSER_BUTTON_CLASS)))\r\n                        };\r\n                        var hintText = that.option(\"columnChooser.title\");\r\n                        var toolbarItem = {\r\n                            widget: \"dxButton\",\r\n                            options: {\r\n                                icon: COLUMN_CHOOSER_ICON_NAME,\r\n                                onClick: onClickHandler,\r\n                                hint: hintText,\r\n                                text: hintText,\r\n                                onInitialized: onInitialized\r\n                            },\r\n                            showText: \"inMenu\",\r\n                            location: \"after\",\r\n                            name: \"columnChooserButton\",\r\n                            locateInMenu: \"auto\",\r\n                            sortIndex: 40\r\n                        };\r\n                        items.push(toolbarItem)\r\n                    }\r\n                    return items\r\n                },\r\n                optionChanged: function(args) {\r\n                    switch (args.name) {\r\n                        case \"columnChooser\":\r\n                            this._invalidate();\r\n                            args.handled = true;\r\n                            break;\r\n                        default:\r\n                            this.callBase(args)\r\n                    }\r\n                },\r\n                isVisible: function() {\r\n                    var that = this;\r\n                    var columnChooserEnabled = that.option(\"columnChooser.enabled\");\r\n                    return that.callBase() || columnChooserEnabled\r\n                }\r\n            }\r\n        },\r\n        controllers: {\r\n            columns: {\r\n                allowMoveColumn: function(fromVisibleIndex, toVisibleIndex, sourceLocation, targetLocation) {\r\n                    var columnChooserMode = this.option(\"columnChooser.mode\");\r\n                    var isMoveColumnDisallowed = \"select\" === columnChooserMode && \"columnChooser\" === targetLocation;\r\n                    return isMoveColumnDisallowed ? false : this.callBase(fromVisibleIndex, toVisibleIndex, sourceLocation, targetLocation)\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}