{"ast":null,"code":"/**\r\n * DevExtreme (ui/date_box/ui.date_view.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar Editor = require(\"../editor/editor\");\n\nvar DateViewRoller = require(\"./ui.date_view_roller\");\n\nvar dateUtils = require(\"../../core/utils/date\");\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar uiDateUtils = require(\"./ui.date_utils\");\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar dateLocalization = require(\"../../localization/date\");\n\nvar DATEVIEW_CLASS = \"dx-dateview\";\nvar DATEVIEW_COMPACT_CLASS = \"dx-dateview-compact\";\nvar DATEVIEW_WRAPPER_CLASS = \"dx-dateview-wrapper\";\nvar DATEVIEW_ROLLER_CONTAINER_CLASS = \"dx-dateview-rollers\";\nvar DATEVIEW_ROLLER_CLASS = \"dx-dateviewroller\";\nvar TYPE = {\n  date: \"date\",\n  datetime: \"datetime\",\n  time: \"time\"\n};\nvar ROLLER_TYPE = {\n  year: \"year\",\n  month: \"month\",\n  day: \"day\",\n  hours: \"hours\"\n};\nvar DateView = Editor.inherit({\n  _valueOption: function _valueOption() {\n    var value = this.option(\"value\");\n    var date = new Date(value);\n    return !value || isNaN(date) ? this._getDefaultDate() : date;\n  },\n  _getDefaultDate: function _getDefaultDate() {\n    var date = new Date();\n\n    if (this.option(\"type\") === TYPE.date) {\n      return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n    }\n\n    return date;\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      minDate: uiDateUtils.MIN_DATEVIEW_DEFAULT_DATE,\n      maxDate: uiDateUtils.MAX_DATEVIEW_DEFAULT_DATE,\n      type: TYPE.date,\n      value: new Date(),\n      applyCompactClass: false\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device(_device) {\n        return \"desktop\" !== _device.deviceType;\n      },\n      options: {\n        applyCompactClass: true\n      }\n    }]);\n  },\n  _render: function _render() {\n    this.callBase();\n    this.$element().addClass(DATEVIEW_CLASS);\n\n    this._toggleFormatClasses(this.option(\"type\"));\n\n    this._toggleCompactClass();\n  },\n  _toggleFormatClasses: function _toggleFormatClasses(currentFormat, previousFormat) {\n    this.$element().addClass(DATEVIEW_CLASS + \"-\" + currentFormat);\n    previousFormat && this.$element().removeClass(DATEVIEW_CLASS + \"-\" + previousFormat);\n  },\n  _toggleCompactClass: function _toggleCompactClass() {\n    this.$element().toggleClass(DATEVIEW_COMPACT_CLASS, this.option(\"applyCompactClass\"));\n  },\n  _wrapper: function _wrapper() {\n    return this._$wrapper;\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    this._$wrapper = $(\"<div>\").addClass(DATEVIEW_WRAPPER_CLASS);\n\n    this._renderRollers();\n\n    this._$wrapper.appendTo(this.$element());\n  },\n  _renderRollers: function _renderRollers() {\n    if (!this._$rollersContainer) {\n      this._$rollersContainer = $(\"<div>\").addClass(DATEVIEW_ROLLER_CONTAINER_CLASS);\n    }\n\n    this._$rollersContainer.empty();\n\n    this._createRollerConfigs();\n\n    this._rollers = {};\n    var that = this;\n    each(that._rollerConfigs, function (name) {\n      var $roller = $(\"<div>\").appendTo(that._$rollersContainer).addClass(DATEVIEW_ROLLER_CLASS + \"-\" + that._rollerConfigs[name].type);\n      that._rollers[that._rollerConfigs[name].type] = that._createComponent($roller, DateViewRoller, {\n        items: that._rollerConfigs[name].displayItems,\n        selectedIndex: that._rollerConfigs[name].selectedIndex,\n        showScrollbar: false,\n        onStart: function onStart(e) {\n          var roller = e.component;\n\n          roller._toggleActive(true);\n\n          that._setActiveRoller(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\n        },\n        onEnd: function onEnd(e) {\n          var roller = e.component;\n\n          roller._toggleActive(false);\n        },\n        onClick: function onClick(e) {\n          var roller = e.component;\n\n          roller._toggleActive(true);\n\n          that._setActiveRoller(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\n\n          that._setRollerState(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\n\n          roller._toggleActive(false);\n        },\n        onSelectedIndexChanged: function onSelectedIndexChanged(e) {\n          var roller = e.component;\n\n          that._setRollerState(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\n        }\n      });\n    });\n\n    that._$rollersContainer.appendTo(that._wrapper());\n  },\n  _createRollerConfigs: function _createRollerConfigs(type) {\n    var that = this;\n    type = type || that.option(\"type\");\n    that._rollerConfigs = {};\n    dateLocalization.getFormatParts(uiDateUtils.FORMATS_MAP[type]).forEach(function (partName) {\n      that._createRollerConfig(partName);\n    });\n  },\n  _createRollerConfig: function _createRollerConfig(componentName) {\n    var componentInfo = uiDateUtils.DATE_COMPONENTS_INFO[componentName];\n\n    var valueRange = this._calculateRollerConfigValueRange(componentName);\n\n    var startValue = valueRange.startValue;\n    var endValue = valueRange.endValue;\n    var formatter = componentInfo.formatter;\n\n    var curDate = this._getCurrentDate();\n\n    var config = {\n      type: componentName,\n      setValue: componentInfo.setter,\n      valueItems: [],\n      displayItems: [],\n      getIndex: function getIndex(value) {\n        return value[componentInfo.getter]() - startValue;\n      }\n    };\n\n    for (var i = startValue; i <= endValue; i++) {\n      config.valueItems.push(i);\n      config.displayItems.push(formatter(i, curDate));\n    }\n\n    config.selectedIndex = config.getIndex(curDate);\n    this._rollerConfigs[componentName] = config;\n  },\n  _setActiveRoller: function _setActiveRoller(currentRoller) {\n    var activeRoller = currentRoller && this._rollers[currentRoller.type];\n    each(this._rollers, function () {\n      this.toggleActiveState(this === activeRoller);\n    });\n  },\n  _updateRollersPosition: function _updateRollersPosition() {\n    var that = this;\n    each(this._rollers, function (type) {\n      var correctIndex = that._rollerConfigs[type].getIndex(that._getCurrentDate());\n\n      this.option(\"selectedIndex\", correctIndex);\n    });\n  },\n  _setRollerState: function _setRollerState(roller, selectedIndex) {\n    if (selectedIndex !== roller.selectedIndex) {\n      var rollerValue = roller.valueItems[selectedIndex];\n      var setValue = roller.setValue;\n      var currentValue = new Date(this._getCurrentDate());\n      var currentDate = currentValue.getDate();\n      var minDate = this.option(\"minDate\");\n      var maxDate = this.option(\"maxDate\");\n\n      if (roller.type === ROLLER_TYPE.month) {\n        currentDate = Math.min(currentDate, uiDateUtils.getMaxMonthDay(currentValue.getFullYear(), rollerValue));\n      } else {\n        if (roller.type === ROLLER_TYPE.year) {\n          currentDate = Math.min(currentDate, uiDateUtils.getMaxMonthDay(rollerValue, currentValue.getMonth()));\n        }\n      }\n\n      currentValue.setDate(currentDate);\n      currentValue[setValue](rollerValue);\n      var normalizedDate = dateUtils.normalizeDate(currentValue, minDate, maxDate);\n      currentValue = uiDateUtils.mergeDates(normalizedDate, currentValue, \"time\");\n      currentValue = dateUtils.normalizeDate(currentValue, minDate, maxDate);\n      this.option(\"value\", currentValue);\n      roller.selectedIndex = selectedIndex;\n    }\n\n    if (roller.type === ROLLER_TYPE.year) {\n      this._refreshRollers();\n    }\n\n    if (roller.type === ROLLER_TYPE.month) {\n      this._refreshRoller(ROLLER_TYPE.day);\n\n      this._refreshRoller(ROLLER_TYPE.hours);\n    }\n  },\n  _refreshRoller: function _refreshRoller(rollerType) {\n    var roller = this._rollers[rollerType];\n\n    if (roller) {\n      this._createRollerConfig(rollerType);\n\n      var rollerConfig = this._rollerConfigs[rollerType];\n\n      if (rollerType === ROLLER_TYPE.day || rollerConfig.displayItems.toString() !== roller.option(\"items\").toString()) {\n        roller.option({\n          items: rollerConfig.displayItems,\n          selectedIndex: rollerConfig.selectedIndex\n        });\n      }\n    }\n  },\n  _getCurrentDate: function _getCurrentDate() {\n    var curDate = this._valueOption();\n\n    var minDate = this.option(\"minDate\");\n    var maxDate = this.option(\"maxDate\");\n    return dateUtils.normalizeDate(curDate, minDate, maxDate);\n  },\n  _calculateRollerConfigValueRange: function _calculateRollerConfigValueRange(componentName) {\n    var curDate = this._getCurrentDate();\n\n    var minDate = this.option(\"minDate\");\n    var maxDate = this.option(\"maxDate\");\n    var minYear = dateUtils.sameYear(curDate, minDate);\n    var minMonth = minYear && curDate.getMonth() === minDate.getMonth();\n    var maxYear = dateUtils.sameYear(curDate, maxDate);\n    var maxMonth = maxYear && curDate.getMonth() === maxDate.getMonth();\n    var minHour = minMonth && curDate.getDate() === minDate.getDate();\n    var maxHour = maxMonth && curDate.getDate() === maxDate.getDate();\n    var componentInfo = uiDateUtils.DATE_COMPONENTS_INFO[componentName];\n    var startValue = componentInfo.startValue;\n    var endValue = componentInfo.endValue;\n\n    if (componentName === ROLLER_TYPE.year) {\n      startValue = minDate.getFullYear();\n      endValue = maxDate.getFullYear();\n    }\n\n    if (componentName === ROLLER_TYPE.month) {\n      if (minYear) {\n        startValue = minDate.getMonth();\n      }\n\n      if (maxYear) {\n        endValue = maxDate.getMonth();\n      }\n    }\n\n    if (componentName === ROLLER_TYPE.day) {\n      endValue = uiDateUtils.getMaxMonthDay(curDate.getFullYear(), curDate.getMonth());\n\n      if (minYear && minMonth) {\n        startValue = minDate.getDate();\n      }\n\n      if (maxYear && maxMonth) {\n        endValue = maxDate.getDate();\n      }\n    }\n\n    if (componentName === ROLLER_TYPE.hours) {\n      startValue = minHour ? minDate.getHours() : startValue;\n      endValue = maxHour ? maxDate.getHours() : endValue;\n    }\n\n    return {\n      startValue: startValue,\n      endValue: endValue\n    };\n  },\n  _refreshRollers: function _refreshRollers() {\n    this._refreshRoller(ROLLER_TYPE.month);\n\n    this._refreshRoller(ROLLER_TYPE.day);\n\n    this._refreshRoller(ROLLER_TYPE.hours);\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"minDate\":\n      case \"maxDate\":\n      case \"type\":\n        this._renderRollers();\n\n        this._toggleFormatClasses(args.value, args.previousValue);\n\n        break;\n\n      case \"visible\":\n        this.callBase(args);\n\n        if (args.value) {\n          this._renderRollers();\n        }\n\n        break;\n\n      case \"value\":\n        this.option(\"value\", this._valueOption());\n\n        this._refreshRollers();\n\n        this._updateRollersPosition();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _clean: function _clean() {\n    this.callBase();\n    delete this._$rollersContainer;\n  },\n  _dispose: function _dispose() {\n    clearTimeout(this._deferredRenderDayTimeout);\n    clearTimeout(this._deferredRenderMonthTimeout);\n    this.callBase();\n  }\n});\nregisterComponent(\"dxDateView\", DateView);\nmodule.exports = DateView;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/date_box/ui.date_view.js"],"names":["$","require","Editor","DateViewRoller","dateUtils","each","extend","uiDateUtils","registerComponent","dateLocalization","DATEVIEW_CLASS","DATEVIEW_COMPACT_CLASS","DATEVIEW_WRAPPER_CLASS","DATEVIEW_ROLLER_CONTAINER_CLASS","DATEVIEW_ROLLER_CLASS","TYPE","date","datetime","time","ROLLER_TYPE","year","month","day","hours","DateView","_valueOption","value","isNaN","_getDefaultDate","_getDefaultOptions","minDate","maxDate","type","applyCompactClass","_defaultOptionsRules","device","_device","options","_render","_toggleFormatClasses","previousFormat","_toggleCompactClass","_wrapper","_renderContentImpl","_renderRollers","that","$roller","items","selectedIndex","showScrollbar","onStart","roller","e","onEnd","onClick","onSelectedIndexChanged","_createRollerConfigs","_createRollerConfig","componentInfo","valueRange","startValue","endValue","formatter","curDate","config","setValue","valueItems","displayItems","getIndex","i","_setActiveRoller","activeRoller","currentRoller","_updateRollersPosition","correctIndex","_setRollerState","rollerValue","currentValue","currentDate","Math","normalizedDate","_refreshRoller","rollerConfig","rollerType","_getCurrentDate","_calculateRollerConfigValueRange","minYear","minMonth","maxYear","maxMonth","minHour","maxHour","componentName","_refreshRollers","_optionChanged","args","_clean","_dispose","clearTimeout","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/date_box/ui.date_view.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar Editor = require(\"../editor/editor\");\r\nvar DateViewRoller = require(\"./ui.date_view_roller\");\r\nvar dateUtils = require(\"../../core/utils/date\");\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar uiDateUtils = require(\"./ui.date_utils\");\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar dateLocalization = require(\"../../localization/date\");\r\nvar DATEVIEW_CLASS = \"dx-dateview\";\r\nvar DATEVIEW_COMPACT_CLASS = \"dx-dateview-compact\";\r\nvar DATEVIEW_WRAPPER_CLASS = \"dx-dateview-wrapper\";\r\nvar DATEVIEW_ROLLER_CONTAINER_CLASS = \"dx-dateview-rollers\";\r\nvar DATEVIEW_ROLLER_CLASS = \"dx-dateviewroller\";\r\nvar TYPE = {\r\n    date: \"date\",\r\n    datetime: \"datetime\",\r\n    time: \"time\"\r\n};\r\nvar ROLLER_TYPE = {\r\n    year: \"year\",\r\n    month: \"month\",\r\n    day: \"day\",\r\n    hours: \"hours\"\r\n};\r\nvar DateView = Editor.inherit({\r\n    _valueOption: function() {\r\n        var value = this.option(\"value\");\r\n        var date = new Date(value);\r\n        return !value || isNaN(date) ? this._getDefaultDate() : date\r\n    },\r\n    _getDefaultDate: function() {\r\n        var date = new Date;\r\n        if (this.option(\"type\") === TYPE.date) {\r\n            return new Date(date.getFullYear(), date.getMonth(), date.getDate())\r\n        }\r\n        return date\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            minDate: uiDateUtils.MIN_DATEVIEW_DEFAULT_DATE,\r\n            maxDate: uiDateUtils.MAX_DATEVIEW_DEFAULT_DATE,\r\n            type: TYPE.date,\r\n            value: new Date,\r\n            applyCompactClass: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function(_device) {\r\n                return \"desktop\" !== _device.deviceType\r\n            },\r\n            options: {\r\n                applyCompactClass: true\r\n            }\r\n        }])\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this.$element().addClass(DATEVIEW_CLASS);\r\n        this._toggleFormatClasses(this.option(\"type\"));\r\n        this._toggleCompactClass()\r\n    },\r\n    _toggleFormatClasses: function(currentFormat, previousFormat) {\r\n        this.$element().addClass(DATEVIEW_CLASS + \"-\" + currentFormat);\r\n        previousFormat && this.$element().removeClass(DATEVIEW_CLASS + \"-\" + previousFormat)\r\n    },\r\n    _toggleCompactClass: function() {\r\n        this.$element().toggleClass(DATEVIEW_COMPACT_CLASS, this.option(\"applyCompactClass\"))\r\n    },\r\n    _wrapper: function() {\r\n        return this._$wrapper\r\n    },\r\n    _renderContentImpl: function() {\r\n        this._$wrapper = $(\"<div>\").addClass(DATEVIEW_WRAPPER_CLASS);\r\n        this._renderRollers();\r\n        this._$wrapper.appendTo(this.$element())\r\n    },\r\n    _renderRollers: function() {\r\n        if (!this._$rollersContainer) {\r\n            this._$rollersContainer = $(\"<div>\").addClass(DATEVIEW_ROLLER_CONTAINER_CLASS)\r\n        }\r\n        this._$rollersContainer.empty();\r\n        this._createRollerConfigs();\r\n        this._rollers = {};\r\n        var that = this;\r\n        each(that._rollerConfigs, function(name) {\r\n            var $roller = $(\"<div>\").appendTo(that._$rollersContainer).addClass(DATEVIEW_ROLLER_CLASS + \"-\" + that._rollerConfigs[name].type);\r\n            that._rollers[that._rollerConfigs[name].type] = that._createComponent($roller, DateViewRoller, {\r\n                items: that._rollerConfigs[name].displayItems,\r\n                selectedIndex: that._rollerConfigs[name].selectedIndex,\r\n                showScrollbar: false,\r\n                onStart: function(e) {\r\n                    var roller = e.component;\r\n                    roller._toggleActive(true);\r\n                    that._setActiveRoller(that._rollerConfigs[name], roller.option(\"selectedIndex\"))\r\n                },\r\n                onEnd: function(e) {\r\n                    var roller = e.component;\r\n                    roller._toggleActive(false)\r\n                },\r\n                onClick: function(e) {\r\n                    var roller = e.component;\r\n                    roller._toggleActive(true);\r\n                    that._setActiveRoller(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\r\n                    that._setRollerState(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\r\n                    roller._toggleActive(false)\r\n                },\r\n                onSelectedIndexChanged: function(e) {\r\n                    var roller = e.component;\r\n                    that._setRollerState(that._rollerConfigs[name], roller.option(\"selectedIndex\"))\r\n                }\r\n            })\r\n        });\r\n        that._$rollersContainer.appendTo(that._wrapper())\r\n    },\r\n    _createRollerConfigs: function(type) {\r\n        var that = this;\r\n        type = type || that.option(\"type\");\r\n        that._rollerConfigs = {};\r\n        dateLocalization.getFormatParts(uiDateUtils.FORMATS_MAP[type]).forEach(function(partName) {\r\n            that._createRollerConfig(partName)\r\n        })\r\n    },\r\n    _createRollerConfig: function(componentName) {\r\n        var componentInfo = uiDateUtils.DATE_COMPONENTS_INFO[componentName];\r\n        var valueRange = this._calculateRollerConfigValueRange(componentName);\r\n        var startValue = valueRange.startValue;\r\n        var endValue = valueRange.endValue;\r\n        var formatter = componentInfo.formatter;\r\n        var curDate = this._getCurrentDate();\r\n        var config = {\r\n            type: componentName,\r\n            setValue: componentInfo.setter,\r\n            valueItems: [],\r\n            displayItems: [],\r\n            getIndex: function(value) {\r\n                return value[componentInfo.getter]() - startValue\r\n            }\r\n        };\r\n        for (var i = startValue; i <= endValue; i++) {\r\n            config.valueItems.push(i);\r\n            config.displayItems.push(formatter(i, curDate))\r\n        }\r\n        config.selectedIndex = config.getIndex(curDate);\r\n        this._rollerConfigs[componentName] = config\r\n    },\r\n    _setActiveRoller: function(currentRoller) {\r\n        var activeRoller = currentRoller && this._rollers[currentRoller.type];\r\n        each(this._rollers, function() {\r\n            this.toggleActiveState(this === activeRoller)\r\n        })\r\n    },\r\n    _updateRollersPosition: function() {\r\n        var that = this;\r\n        each(this._rollers, function(type) {\r\n            var correctIndex = that._rollerConfigs[type].getIndex(that._getCurrentDate());\r\n            this.option(\"selectedIndex\", correctIndex)\r\n        })\r\n    },\r\n    _setRollerState: function(roller, selectedIndex) {\r\n        if (selectedIndex !== roller.selectedIndex) {\r\n            var rollerValue = roller.valueItems[selectedIndex];\r\n            var setValue = roller.setValue;\r\n            var currentValue = new Date(this._getCurrentDate());\r\n            var currentDate = currentValue.getDate();\r\n            var minDate = this.option(\"minDate\");\r\n            var maxDate = this.option(\"maxDate\");\r\n            if (roller.type === ROLLER_TYPE.month) {\r\n                currentDate = Math.min(currentDate, uiDateUtils.getMaxMonthDay(currentValue.getFullYear(), rollerValue))\r\n            } else {\r\n                if (roller.type === ROLLER_TYPE.year) {\r\n                    currentDate = Math.min(currentDate, uiDateUtils.getMaxMonthDay(rollerValue, currentValue.getMonth()))\r\n                }\r\n            }\r\n            currentValue.setDate(currentDate);\r\n            currentValue[setValue](rollerValue);\r\n            var normalizedDate = dateUtils.normalizeDate(currentValue, minDate, maxDate);\r\n            currentValue = uiDateUtils.mergeDates(normalizedDate, currentValue, \"time\");\r\n            currentValue = dateUtils.normalizeDate(currentValue, minDate, maxDate);\r\n            this.option(\"value\", currentValue);\r\n            roller.selectedIndex = selectedIndex\r\n        }\r\n        if (roller.type === ROLLER_TYPE.year) {\r\n            this._refreshRollers()\r\n        }\r\n        if (roller.type === ROLLER_TYPE.month) {\r\n            this._refreshRoller(ROLLER_TYPE.day);\r\n            this._refreshRoller(ROLLER_TYPE.hours)\r\n        }\r\n    },\r\n    _refreshRoller: function(rollerType) {\r\n        var roller = this._rollers[rollerType];\r\n        if (roller) {\r\n            this._createRollerConfig(rollerType);\r\n            var rollerConfig = this._rollerConfigs[rollerType];\r\n            if (rollerType === ROLLER_TYPE.day || rollerConfig.displayItems.toString() !== roller.option(\"items\").toString()) {\r\n                roller.option({\r\n                    items: rollerConfig.displayItems,\r\n                    selectedIndex: rollerConfig.selectedIndex\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _getCurrentDate: function() {\r\n        var curDate = this._valueOption();\r\n        var minDate = this.option(\"minDate\");\r\n        var maxDate = this.option(\"maxDate\");\r\n        return dateUtils.normalizeDate(curDate, minDate, maxDate)\r\n    },\r\n    _calculateRollerConfigValueRange: function(componentName) {\r\n        var curDate = this._getCurrentDate();\r\n        var minDate = this.option(\"minDate\");\r\n        var maxDate = this.option(\"maxDate\");\r\n        var minYear = dateUtils.sameYear(curDate, minDate);\r\n        var minMonth = minYear && curDate.getMonth() === minDate.getMonth();\r\n        var maxYear = dateUtils.sameYear(curDate, maxDate);\r\n        var maxMonth = maxYear && curDate.getMonth() === maxDate.getMonth();\r\n        var minHour = minMonth && curDate.getDate() === minDate.getDate();\r\n        var maxHour = maxMonth && curDate.getDate() === maxDate.getDate();\r\n        var componentInfo = uiDateUtils.DATE_COMPONENTS_INFO[componentName];\r\n        var startValue = componentInfo.startValue;\r\n        var endValue = componentInfo.endValue;\r\n        if (componentName === ROLLER_TYPE.year) {\r\n            startValue = minDate.getFullYear();\r\n            endValue = maxDate.getFullYear()\r\n        }\r\n        if (componentName === ROLLER_TYPE.month) {\r\n            if (minYear) {\r\n                startValue = minDate.getMonth()\r\n            }\r\n            if (maxYear) {\r\n                endValue = maxDate.getMonth()\r\n            }\r\n        }\r\n        if (componentName === ROLLER_TYPE.day) {\r\n            endValue = uiDateUtils.getMaxMonthDay(curDate.getFullYear(), curDate.getMonth());\r\n            if (minYear && minMonth) {\r\n                startValue = minDate.getDate()\r\n            }\r\n            if (maxYear && maxMonth) {\r\n                endValue = maxDate.getDate()\r\n            }\r\n        }\r\n        if (componentName === ROLLER_TYPE.hours) {\r\n            startValue = minHour ? minDate.getHours() : startValue;\r\n            endValue = maxHour ? maxDate.getHours() : endValue\r\n        }\r\n        return {\r\n            startValue: startValue,\r\n            endValue: endValue\r\n        }\r\n    },\r\n    _refreshRollers: function() {\r\n        this._refreshRoller(ROLLER_TYPE.month);\r\n        this._refreshRoller(ROLLER_TYPE.day);\r\n        this._refreshRoller(ROLLER_TYPE.hours)\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"minDate\":\r\n            case \"maxDate\":\r\n            case \"type\":\r\n                this._renderRollers();\r\n                this._toggleFormatClasses(args.value, args.previousValue);\r\n                break;\r\n            case \"visible\":\r\n                this.callBase(args);\r\n                if (args.value) {\r\n                    this._renderRollers()\r\n                }\r\n                break;\r\n            case \"value\":\r\n                this.option(\"value\", this._valueOption());\r\n                this._refreshRollers();\r\n                this._updateRollersPosition();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        delete this._$rollersContainer\r\n    },\r\n    _dispose: function() {\r\n        clearTimeout(this._deferredRenderDayTimeout);\r\n        clearTimeout(this._deferredRenderMonthTimeout);\r\n        this.callBase()\r\n    }\r\n});\r\nregisterComponent(\"dxDateView\", DateView);\r\nmodule.exports = DateView;\r\n"]},"metadata":{},"sourceType":"module"}