{"ast":null,"code":"/**\r\n * DevExtreme (ui/pivot_grid/ui.pivot_grid.utils.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _ajax = require(\"../../core/utils/ajax\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _date = require(\"../../localization/date\");\n\nvar _format_helper = require(\"../../format_helper\");\n\nvar _data_source = require(\"../../data/data_source/data_source\");\n\nvar _array_store = require(\"../../data/array_store\");\n\nvar _array_store2 = _interopRequireDefault(_array_store);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar setFieldProperty = exports.setFieldProperty = function (field, property, value, isInitialization) {\n  var initProperties = field._initProperties = field._initProperties || {};\n  var initValue = isInitialization ? value : field[property];\n\n  if (!Object.prototype.hasOwnProperty.call(initProperties, property) || isInitialization) {\n    initProperties[property] = initValue;\n  }\n\n  field[property] = value;\n};\n\nexports.sendRequest = function (options) {\n  return (0, _ajax.sendRequest)(options);\n};\n\nvar foreachTreeAsyncDate = new Date();\n\nfunction createForeachTreeFunc(isAsync) {\n  var foreachTreeFunc = function foreachTreeFunc(items, callback, parentAtFirst, members, index, isChildrenProcessing) {\n    members = members || [];\n    items = items || [];\n    var item;\n    var i;\n    var deferred;\n    var childrenDeferred;\n    index = index || 0;\n\n    function createForeachTreeAsyncHandler(deferred, i, isChildrenProcessing) {\n      (0, _deferred.when)(foreachTreeFunc(items, callback, parentAtFirst, members, i, isChildrenProcessing)).done(deferred.resolve);\n    }\n\n    for (i = index; i < items.length; i++) {\n      if (isAsync && i > index && i % 1e4 === 0 && new Date() - foreachTreeAsyncDate >= 300) {\n        foreachTreeAsyncDate = new Date();\n        deferred = new _deferred.Deferred();\n        setTimeout(createForeachTreeAsyncHandler(deferred, i, false), 0);\n        return deferred;\n      }\n\n      item = items[i];\n\n      if (!isChildrenProcessing) {\n        members.unshift(item);\n\n        if (parentAtFirst && false === callback(members, i)) {\n          return;\n        }\n\n        if (item.children) {\n          childrenDeferred = foreachTreeFunc(item.children, callback, parentAtFirst, members);\n\n          if (isAsync && childrenDeferred) {\n            deferred = new _deferred.Deferred();\n            childrenDeferred.done(createForeachTreeAsyncHandler(deferred, i, true));\n            return deferred;\n          }\n        }\n      }\n\n      isChildrenProcessing = false;\n\n      if (!parentAtFirst && false === callback(members, i)) {\n        return;\n      }\n\n      members.shift();\n\n      if (items[i] !== item) {\n        i--;\n      }\n    }\n  };\n\n  return foreachTreeFunc;\n}\n\nexports.foreachTree = createForeachTreeFunc(false);\nexports.foreachTreeAsync = createForeachTreeFunc(true);\n\nexports.findField = function (fields, id) {\n  var i;\n  var field;\n\n  if (fields && (0, _type.isDefined)(id)) {\n    for (i = 0; i < fields.length; i++) {\n      field = fields[i];\n\n      if (field.name === id || field.caption === id || field.dataField === id || field.index === id) {\n        return i;\n      }\n    }\n  }\n\n  return -1;\n};\n\nexports.formatValue = function (value, options) {\n  var formatObject = {\n    value: value,\n    valueText: (0, _format_helper.format)(value, options.format) || \"\"\n  };\n  return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText;\n};\n\nexports.getCompareFunction = function (valueSelector) {\n  return function (a, b) {\n    var result = 0;\n    var valueA = valueSelector(a);\n    var valueB = valueSelector(b);\n    var aIsDefined = (0, _type.isDefined)(valueA);\n    var bIsDefined = (0, _type.isDefined)(valueB);\n\n    if (aIsDefined && bIsDefined) {\n      if (valueA > valueB) {\n        result = 1;\n      } else {\n        if (valueA < valueB) {\n          result = -1;\n        }\n      }\n    }\n\n    if (aIsDefined && !bIsDefined) {\n      result = 1;\n    }\n\n    if (!aIsDefined && bIsDefined) {\n      result = -1;\n    }\n\n    return result;\n  };\n};\n\nexports.createPath = function (items) {\n  var result = [];\n  var i;\n\n  for (i = items.length - 1; i >= 0; i--) {\n    result.push(items[i].key || items[i].value);\n  }\n\n  return result;\n};\n\nexports.foreachDataLevel = function foreachDataLevel(data, callback, index, childrenField) {\n  var item;\n  var i;\n  index = index || 0;\n  childrenField = childrenField || \"children\";\n\n  if (data.length) {\n    callback(data, index);\n  }\n\n  for (i = 0; i < data.length; i++) {\n    item = data[i];\n\n    if (item[childrenField] && item[childrenField].length) {\n      foreachDataLevel(item[childrenField], callback, index + 1, childrenField);\n    }\n  }\n};\n\nexports.mergeArraysByMaxValue = function (values1, values2) {\n  var result = [];\n  var i;\n\n  for (i = 0; i < values1.length; i++) {\n    result.push(Math.max(values1[i] || 0, values2[i] || 0));\n  }\n\n  return result;\n};\n\nexports.getExpandedLevel = function (options, axisName) {\n  var dimensions = options[axisName];\n  var expandLevel = 0;\n  var expandedPaths = (\"columns\" === axisName ? options.columnExpandedPaths : options.rowExpandedPaths) || [];\n\n  if (options.headerName === axisName) {\n    expandLevel = options.path.length;\n  } else {\n    if (options.headerName && options.headerName !== axisName && options.oppositePath) {\n      expandLevel = options.oppositePath.length;\n    } else {\n      (0, _iterator.each)(expandedPaths, function (_, path) {\n        expandLevel = Math.max(expandLevel, path.length);\n      });\n    }\n  }\n\n  while (dimensions[expandLevel + 1] && dimensions[expandLevel].expanded) {\n    expandLevel++;\n  }\n\n  return expandLevel;\n};\n\nfunction createGroupFields(item) {\n  return (0, _iterator.map)([\"year\", \"quarter\", \"month\"], function (value, index) {\n    return (0, _extend.extend)({}, item, {\n      groupInterval: value,\n      groupIndex: index\n    });\n  });\n}\n\nfunction parseFields(dataSource, fieldsList, path, fieldsDataType) {\n  var result = [];\n  (0, _iterator.each)(fieldsList || [], function (field, value) {\n    if (field && 0 === field.indexOf(\"__\")) {\n      return;\n    }\n\n    var dataIndex = 1;\n    var currentPath = path.length ? path + \".\" + field : field;\n    var dataType = fieldsDataType[currentPath];\n    var getter = (0, _data.compileGetter)(currentPath);\n    var items;\n\n    while (!(0, _type.isDefined)(value) && dataSource[dataIndex]) {\n      value = getter(dataSource[dataIndex]);\n      dataIndex++;\n    }\n\n    if (!dataType && (0, _type.isDefined)(value)) {\n      dataType = (0, _type.type)(value);\n    }\n\n    items = [{\n      dataField: currentPath,\n      dataType: dataType,\n      groupName: \"date\" === dataType ? field : void 0,\n      groupInterval: void 0,\n      displayFolder: path\n    }];\n\n    if (\"date\" === dataType) {\n      items = items.concat(createGroupFields(items[0]));\n    } else {\n      if (\"object\" === dataType) {\n        items = parseFields(dataSource, value, currentPath, fieldsDataType);\n      }\n    }\n\n    result.push.apply(result, items);\n  });\n  return result;\n}\n\nexports.discoverObjectFields = function (items, fields) {\n  var fieldsDataType = exports.getFieldsDataType(fields);\n  return parseFields(items, items[0], \"\", fieldsDataType);\n};\n\nexports.getFieldsDataType = function (fields) {\n  var result = {};\n  (0, _iterator.each)(fields, function (_, field) {\n    result[field.dataField] = result[field.dataField] || field.dataType;\n  });\n  return result;\n};\n\nvar DATE_INTERVAL_FORMATS = {\n  month: function month(value) {\n    return (0, _date.getMonthNames)()[value - 1];\n  },\n  quarter: function quarter(value) {\n    return (0, _date.format)(new Date(2e3, 3 * value - 1), \"quarter\");\n  },\n  dayOfWeek: function dayOfWeek(value) {\n    return (0, _date.getDayNames)()[value];\n  }\n};\n\nexports.setDefaultFieldValueFormatting = function (field) {\n  if (\"date\" === field.dataType) {\n    if (!field.format) {\n      setFieldProperty(field, \"format\", DATE_INTERVAL_FORMATS[field.groupInterval]);\n    }\n  } else {\n    if (\"number\" === field.dataType) {\n      var groupInterval = (0, _type.isNumeric)(field.groupInterval) && field.groupInterval > 0 && field.groupInterval;\n\n      if (groupInterval && !field.customizeText) {\n        setFieldProperty(field, \"customizeText\", function (formatObject) {\n          var secondValue = formatObject.value + groupInterval;\n          var secondValueText = (0, _format_helper.format)(secondValue, field.format);\n          return formatObject.valueText && secondValueText ? formatObject.valueText + \" - \" + secondValueText : \"\";\n        });\n      }\n    }\n  }\n};\n\nexports.getFiltersByPath = function (fields, path) {\n  var result = [];\n  path = path || [];\n\n  for (var i = 0; i < path.length; i++) {\n    result.push((0, _extend.extend)({}, fields[i], {\n      groupIndex: null,\n      groupName: null,\n      filterType: \"include\",\n      filterValues: [path[i]]\n    }));\n  }\n\n  return result;\n};\n\nexports.storeDrillDownMixin = {\n  createDrillDownDataSource: function createDrillDownDataSource(descriptions, params) {\n    function createCustomStoreMethod(methodName) {\n      return function (options) {\n        var d;\n\n        if (arrayStore) {\n          d = arrayStore[methodName](options);\n        } else {\n          d = new _deferred.Deferred();\n          (0, _deferred.when)(items).done(function (data) {\n            arrayStore = new _array_store2.default(data);\n            arrayStore[methodName](options).done(d.resolve).fail(d.reject);\n          }).fail(d.reject);\n        }\n\n        return d;\n      };\n    }\n\n    var items = this.getDrillDownItems(descriptions, params);\n    var arrayStore;\n    var dataSource = new _data_source.DataSource({\n      load: createCustomStoreMethod(\"load\"),\n      totalCount: createCustomStoreMethod(\"totalCount\"),\n      key: this.key()\n    });\n    return dataSource;\n  }\n};\n\nexports.capitalizeFirstLetter = function (string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/pivot_grid/ui.pivot_grid.utils.js"],"names":["_type","require","_ajax","_data","_iterator","_extend","_date","_format_helper","_data_source","_array_store","_array_store2","_interopRequireDefault","_deferred","obj","setFieldProperty","exports","initProperties","field","initValue","isInitialization","Object","foreachTreeAsyncDate","foreachTreeFunc","members","items","index","deferred","i","isAsync","setTimeout","createForeachTreeAsyncHandler","item","parentAtFirst","callback","childrenDeferred","isChildrenProcessing","createForeachTreeFunc","fields","formatObject","value","valueText","options","result","valueA","valueSelector","valueB","aIsDefined","bIsDefined","childrenField","data","foreachDataLevel","values1","Math","values2","dimensions","expandLevel","expandedPaths","path","groupInterval","groupIndex","fieldsList","dataIndex","currentPath","dataType","fieldsDataType","getter","dataSource","dataField","groupName","displayFolder","createGroupFields","parseFields","DATE_INTERVAL_FORMATS","month","quarter","dayOfWeek","secondValue","secondValueText","filterType","filterValues","createDrillDownDataSource","d","arrayStore","load","createCustomStoreMethod","totalCount","key","string"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/pivot_grid/ui.pivot_grid.utils.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _ajax = require(\"../../core/utils/ajax\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _date = require(\"../../localization/date\");\r\nvar _format_helper = require(\"../../format_helper\");\r\nvar _data_source = require(\"../../data/data_source/data_source\");\r\nvar _array_store = require(\"../../data/array_store\");\r\nvar _array_store2 = _interopRequireDefault(_array_store);\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar setFieldProperty = exports.setFieldProperty = function(field, property, value, isInitialization) {\r\n    var initProperties = field._initProperties = field._initProperties || {};\r\n    var initValue = isInitialization ? value : field[property];\r\n    if (!Object.prototype.hasOwnProperty.call(initProperties, property) || isInitialization) {\r\n        initProperties[property] = initValue\r\n    }\r\n    field[property] = value\r\n};\r\nexports.sendRequest = function(options) {\r\n    return (0, _ajax.sendRequest)(options)\r\n};\r\nvar foreachTreeAsyncDate = new Date;\r\n\r\nfunction createForeachTreeFunc(isAsync) {\r\n    var foreachTreeFunc = function foreachTreeFunc(items, callback, parentAtFirst, members, index, isChildrenProcessing) {\r\n        members = members || [];\r\n        items = items || [];\r\n        var item;\r\n        var i;\r\n        var deferred;\r\n        var childrenDeferred;\r\n        index = index || 0;\r\n\r\n        function createForeachTreeAsyncHandler(deferred, i, isChildrenProcessing) {\r\n            (0, _deferred.when)(foreachTreeFunc(items, callback, parentAtFirst, members, i, isChildrenProcessing)).done(deferred.resolve)\r\n        }\r\n        for (i = index; i < items.length; i++) {\r\n            if (isAsync && i > index && i % 1e4 === 0 && new Date - foreachTreeAsyncDate >= 300) {\r\n                foreachTreeAsyncDate = new Date;\r\n                deferred = new _deferred.Deferred;\r\n                setTimeout(createForeachTreeAsyncHandler(deferred, i, false), 0);\r\n                return deferred\r\n            }\r\n            item = items[i];\r\n            if (!isChildrenProcessing) {\r\n                members.unshift(item);\r\n                if (parentAtFirst && false === callback(members, i)) {\r\n                    return\r\n                }\r\n                if (item.children) {\r\n                    childrenDeferred = foreachTreeFunc(item.children, callback, parentAtFirst, members);\r\n                    if (isAsync && childrenDeferred) {\r\n                        deferred = new _deferred.Deferred;\r\n                        childrenDeferred.done(createForeachTreeAsyncHandler(deferred, i, true));\r\n                        return deferred\r\n                    }\r\n                }\r\n            }\r\n            isChildrenProcessing = false;\r\n            if (!parentAtFirst && false === callback(members, i)) {\r\n                return\r\n            }\r\n            members.shift();\r\n            if (items[i] !== item) {\r\n                i--\r\n            }\r\n        }\r\n    };\r\n    return foreachTreeFunc\r\n}\r\nexports.foreachTree = createForeachTreeFunc(false);\r\nexports.foreachTreeAsync = createForeachTreeFunc(true);\r\nexports.findField = function(fields, id) {\r\n    var i;\r\n    var field;\r\n    if (fields && (0, _type.isDefined)(id)) {\r\n        for (i = 0; i < fields.length; i++) {\r\n            field = fields[i];\r\n            if (field.name === id || field.caption === id || field.dataField === id || field.index === id) {\r\n                return i\r\n            }\r\n        }\r\n    }\r\n    return -1\r\n};\r\nexports.formatValue = function(value, options) {\r\n    var formatObject = {\r\n        value: value,\r\n        valueText: (0, _format_helper.format)(value, options.format) || \"\"\r\n    };\r\n    return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText\r\n};\r\nexports.getCompareFunction = function(valueSelector) {\r\n    return function(a, b) {\r\n        var result = 0;\r\n        var valueA = valueSelector(a);\r\n        var valueB = valueSelector(b);\r\n        var aIsDefined = (0, _type.isDefined)(valueA);\r\n        var bIsDefined = (0, _type.isDefined)(valueB);\r\n        if (aIsDefined && bIsDefined) {\r\n            if (valueA > valueB) {\r\n                result = 1\r\n            } else {\r\n                if (valueA < valueB) {\r\n                    result = -1\r\n                }\r\n            }\r\n        }\r\n        if (aIsDefined && !bIsDefined) {\r\n            result = 1\r\n        }\r\n        if (!aIsDefined && bIsDefined) {\r\n            result = -1\r\n        }\r\n        return result\r\n    }\r\n};\r\nexports.createPath = function(items) {\r\n    var result = [];\r\n    var i;\r\n    for (i = items.length - 1; i >= 0; i--) {\r\n        result.push(items[i].key || items[i].value)\r\n    }\r\n    return result\r\n};\r\nexports.foreachDataLevel = function foreachDataLevel(data, callback, index, childrenField) {\r\n    var item;\r\n    var i;\r\n    index = index || 0;\r\n    childrenField = childrenField || \"children\";\r\n    if (data.length) {\r\n        callback(data, index)\r\n    }\r\n    for (i = 0; i < data.length; i++) {\r\n        item = data[i];\r\n        if (item[childrenField] && item[childrenField].length) {\r\n            foreachDataLevel(item[childrenField], callback, index + 1, childrenField)\r\n        }\r\n    }\r\n};\r\nexports.mergeArraysByMaxValue = function(values1, values2) {\r\n    var result = [];\r\n    var i;\r\n    for (i = 0; i < values1.length; i++) {\r\n        result.push(Math.max(values1[i] || 0, values2[i] || 0))\r\n    }\r\n    return result\r\n};\r\nexports.getExpandedLevel = function(options, axisName) {\r\n    var dimensions = options[axisName];\r\n    var expandLevel = 0;\r\n    var expandedPaths = (\"columns\" === axisName ? options.columnExpandedPaths : options.rowExpandedPaths) || [];\r\n    if (options.headerName === axisName) {\r\n        expandLevel = options.path.length\r\n    } else {\r\n        if (options.headerName && options.headerName !== axisName && options.oppositePath) {\r\n            expandLevel = options.oppositePath.length\r\n        } else {\r\n            (0, _iterator.each)(expandedPaths, function(_, path) {\r\n                expandLevel = Math.max(expandLevel, path.length)\r\n            })\r\n        }\r\n    }\r\n    while (dimensions[expandLevel + 1] && dimensions[expandLevel].expanded) {\r\n        expandLevel++\r\n    }\r\n    return expandLevel\r\n};\r\n\r\nfunction createGroupFields(item) {\r\n    return (0, _iterator.map)([\"year\", \"quarter\", \"month\"], function(value, index) {\r\n        return (0, _extend.extend)({}, item, {\r\n            groupInterval: value,\r\n            groupIndex: index\r\n        })\r\n    })\r\n}\r\n\r\nfunction parseFields(dataSource, fieldsList, path, fieldsDataType) {\r\n    var result = [];\r\n    (0, _iterator.each)(fieldsList || [], function(field, value) {\r\n        if (field && 0 === field.indexOf(\"__\")) {\r\n            return\r\n        }\r\n        var dataIndex = 1;\r\n        var currentPath = path.length ? path + \".\" + field : field;\r\n        var dataType = fieldsDataType[currentPath];\r\n        var getter = (0, _data.compileGetter)(currentPath);\r\n        var items;\r\n        while (!(0, _type.isDefined)(value) && dataSource[dataIndex]) {\r\n            value = getter(dataSource[dataIndex]);\r\n            dataIndex++\r\n        }\r\n        if (!dataType && (0, _type.isDefined)(value)) {\r\n            dataType = (0, _type.type)(value)\r\n        }\r\n        items = [{\r\n            dataField: currentPath,\r\n            dataType: dataType,\r\n            groupName: \"date\" === dataType ? field : void 0,\r\n            groupInterval: void 0,\r\n            displayFolder: path\r\n        }];\r\n        if (\"date\" === dataType) {\r\n            items = items.concat(createGroupFields(items[0]))\r\n        } else {\r\n            if (\"object\" === dataType) {\r\n                items = parseFields(dataSource, value, currentPath, fieldsDataType)\r\n            }\r\n        }\r\n        result.push.apply(result, items)\r\n    });\r\n    return result\r\n}\r\nexports.discoverObjectFields = function(items, fields) {\r\n    var fieldsDataType = exports.getFieldsDataType(fields);\r\n    return parseFields(items, items[0], \"\", fieldsDataType)\r\n};\r\nexports.getFieldsDataType = function(fields) {\r\n    var result = {};\r\n    (0, _iterator.each)(fields, function(_, field) {\r\n        result[field.dataField] = result[field.dataField] || field.dataType\r\n    });\r\n    return result\r\n};\r\nvar DATE_INTERVAL_FORMATS = {\r\n    month: function(value) {\r\n        return (0, _date.getMonthNames)()[value - 1]\r\n    },\r\n    quarter: function(value) {\r\n        return (0, _date.format)(new Date(2e3, 3 * value - 1), \"quarter\")\r\n    },\r\n    dayOfWeek: function(value) {\r\n        return (0, _date.getDayNames)()[value]\r\n    }\r\n};\r\nexports.setDefaultFieldValueFormatting = function(field) {\r\n    if (\"date\" === field.dataType) {\r\n        if (!field.format) {\r\n            setFieldProperty(field, \"format\", DATE_INTERVAL_FORMATS[field.groupInterval])\r\n        }\r\n    } else {\r\n        if (\"number\" === field.dataType) {\r\n            var groupInterval = (0, _type.isNumeric)(field.groupInterval) && field.groupInterval > 0 && field.groupInterval;\r\n            if (groupInterval && !field.customizeText) {\r\n                setFieldProperty(field, \"customizeText\", function(formatObject) {\r\n                    var secondValue = formatObject.value + groupInterval;\r\n                    var secondValueText = (0, _format_helper.format)(secondValue, field.format);\r\n                    return formatObject.valueText && secondValueText ? formatObject.valueText + \" - \" + secondValueText : \"\"\r\n                })\r\n            }\r\n        }\r\n    }\r\n};\r\nexports.getFiltersByPath = function(fields, path) {\r\n    var result = [];\r\n    path = path || [];\r\n    for (var i = 0; i < path.length; i++) {\r\n        result.push((0, _extend.extend)({}, fields[i], {\r\n            groupIndex: null,\r\n            groupName: null,\r\n            filterType: \"include\",\r\n            filterValues: [path[i]]\r\n        }))\r\n    }\r\n    return result\r\n};\r\nexports.storeDrillDownMixin = {\r\n    createDrillDownDataSource: function(descriptions, params) {\r\n        function createCustomStoreMethod(methodName) {\r\n            return function(options) {\r\n                var d;\r\n                if (arrayStore) {\r\n                    d = arrayStore[methodName](options)\r\n                } else {\r\n                    d = new _deferred.Deferred;\r\n                    (0, _deferred.when)(items).done(function(data) {\r\n                        arrayStore = new _array_store2.default(data);\r\n                        arrayStore[methodName](options).done(d.resolve).fail(d.reject)\r\n                    }).fail(d.reject)\r\n                }\r\n                return d\r\n            }\r\n        }\r\n        var items = this.getDrillDownItems(descriptions, params);\r\n        var arrayStore;\r\n        var dataSource = new _data_source.DataSource({\r\n            load: createCustomStoreMethod(\"load\"),\r\n            totalCount: createCustomStoreMethod(\"totalCount\"),\r\n            key: this.key()\r\n        });\r\n        return dataSource\r\n    }\r\n};\r\nexports.capitalizeFirstLetter = function(string) {\r\n    return string.charAt(0).toUpperCase() + string.slice(1)\r\n};\r\n"]},"metadata":{},"sourceType":"module"}