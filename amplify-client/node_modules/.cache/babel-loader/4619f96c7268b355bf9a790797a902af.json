{"ast":null,"code":"/**\r\n * DevExtreme (viz/series/points/candlestick_point.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _extend = require(\"../../../core/utils/extend\").extend;\n\nvar symbolPoint = require(\"./symbol_point\");\n\nvar barPoint = require(\"./bar_point\");\n\nvar _math = Math;\nvar _abs = _math.abs;\nvar _min = _math.min;\nvar _max = _math.max;\nvar _round = _math.round;\nvar DEFAULT_FINANCIAL_TRACKER_MARGIN = 2;\nmodule.exports = _extend({}, barPoint, {\n  _getContinuousPoints: function _getContinuousPoints(openCoord, closeCoord) {\n    var that = this;\n    var x = that.x;\n    var createPoint = that._options.rotated ? function (x, y) {\n      return [y, x];\n    } : function (x, y) {\n      return [x, y];\n    };\n    var width = that.width;\n    var highCoord = that.highY;\n    var max = _abs(highCoord - openCoord) < _abs(highCoord - closeCoord) ? openCoord : closeCoord;\n    var min = max === closeCoord ? openCoord : closeCoord;\n    var points;\n\n    if (min === max) {\n      points = [].concat(createPoint(x, that.highY)).concat(createPoint(x, that.lowY)).concat(createPoint(x, that.closeY)).concat(createPoint(x - width / 2, that.closeY)).concat(createPoint(x + width / 2, that.closeY)).concat(createPoint(x, that.closeY));\n    } else {\n      points = [].concat(createPoint(x, that.highY)).concat(createPoint(x, max)).concat(createPoint(x + width / 2, max)).concat(createPoint(x + width / 2, min)).concat(createPoint(x, min)).concat(createPoint(x, that.lowY)).concat(createPoint(x, min)).concat(createPoint(x - width / 2, min)).concat(createPoint(x - width / 2, max)).concat(createPoint(x, max));\n    }\n\n    return points;\n  },\n  _getCrockPoints: function _getCrockPoints(y) {\n    var that = this;\n    var x = that.x;\n    var createPoint = that._options.rotated ? function (x, y) {\n      return [y, x];\n    } : function (x, y) {\n      return [x, y];\n    };\n    return [].concat(createPoint(x, that.highY)).concat(createPoint(x, that.lowY)).concat(createPoint(x, y)).concat(createPoint(x - that.width / 2, y)).concat(createPoint(x + that.width / 2, y)).concat(createPoint(x, y));\n  },\n  _getPoints: function _getPoints() {\n    var that = this;\n    var points;\n    var closeCoord = that.closeY;\n    var openCoord = that.openY;\n\n    if (null !== closeCoord && null !== openCoord) {\n      points = that._getContinuousPoints(openCoord, closeCoord);\n    } else {\n      if (openCoord === closeCoord) {\n        points = [that.x, that.highY, that.x, that.lowY];\n      } else {\n        points = that._getCrockPoints(null !== openCoord ? openCoord : closeCoord);\n      }\n    }\n\n    return points;\n  },\n  getColor: function getColor() {\n    var that = this;\n    return that._isReduction ? that._options.reduction.color : that._styles.normal.stroke || that.series.getColor();\n  },\n  _drawMarkerInGroup: function _drawMarkerInGroup(group, attributes, renderer) {\n    var that = this;\n    that.graphic = renderer.path(that._getPoints(), \"area\").attr({\n      \"stroke-linecap\": \"square\"\n    }).attr(attributes).data({\n      \"chart-data-point\": that\n    }).sharp().append(group);\n  },\n  _fillStyle: function _fillStyle() {\n    var that = this;\n    var styles = that._options.styles;\n\n    if (that._isReduction && that._isPositive) {\n      that._styles = styles.reductionPositive;\n    } else {\n      if (that._isReduction) {\n        that._styles = styles.reduction;\n      } else {\n        if (that._isPositive) {\n          that._styles = styles.positive;\n        } else {\n          that._styles = styles;\n        }\n      }\n    }\n  },\n  _getMinTrackerWidth: function _getMinTrackerWidth() {\n    return 2 + 2 * this._styles.normal[\"stroke-width\"];\n  },\n  correctCoordinates: function correctCoordinates(correctOptions) {\n    var minWidth = this._getMinTrackerWidth();\n\n    var maxWidth = 10;\n    var width = correctOptions.width;\n    width = width < minWidth ? minWidth : width > maxWidth ? maxWidth : width;\n    this.width = width + width % 2;\n    this.xCorrection = correctOptions.offset;\n  },\n  _getMarkerGroup: function _getMarkerGroup(group) {\n    var that = this;\n    var markerGroup;\n\n    if (that._isReduction && that._isPositive) {\n      markerGroup = group.reductionPositiveMarkersGroup;\n    } else {\n      if (that._isReduction) {\n        markerGroup = group.reductionMarkersGroup;\n      } else {\n        if (that._isPositive) {\n          markerGroup = group.defaultPositiveMarkersGroup;\n        } else {\n          markerGroup = group.defaultMarkersGroup;\n        }\n      }\n    }\n\n    return markerGroup;\n  },\n  _drawMarker: function _drawMarker(renderer, group) {\n    this._drawMarkerInGroup(this._getMarkerGroup(group), this._getStyle(), renderer);\n  },\n  _getSettingsForTracker: function _getSettingsForTracker() {\n    var that = this;\n    var highY = that.highY;\n    var lowY = that.lowY;\n    var rotated = that._options.rotated;\n    var x;\n    var y;\n    var width;\n    var height;\n\n    if (highY === lowY) {\n      highY = rotated ? highY + DEFAULT_FINANCIAL_TRACKER_MARGIN : highY - DEFAULT_FINANCIAL_TRACKER_MARGIN;\n      lowY = rotated ? lowY - DEFAULT_FINANCIAL_TRACKER_MARGIN : lowY + DEFAULT_FINANCIAL_TRACKER_MARGIN;\n    }\n\n    if (rotated) {\n      x = _min(lowY, highY);\n      y = that.x - that.width / 2;\n      width = _abs(lowY - highY);\n      height = that.width;\n    } else {\n      x = that.x - that.width / 2;\n      y = _min(lowY, highY);\n      width = that.width;\n      height = _abs(lowY - highY);\n    }\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  },\n  _getGraphicBBox: function _getGraphicBBox() {\n    var that = this;\n    var rotated = that._options.rotated;\n    var x = that.x;\n    var width = that.width;\n    var lowY = that.lowY;\n    var highY = that.highY;\n    return {\n      x: !rotated ? x - _round(width / 2) : lowY,\n      y: !rotated ? highY : x - _round(width / 2),\n      width: !rotated ? width : highY - lowY,\n      height: !rotated ? lowY - highY : width\n    };\n  },\n  getTooltipParams: function getTooltipParams(location) {\n    var that = this;\n\n    if (that.graphic) {\n      var minValue = _min(that.lowY, that.highY);\n\n      var maxValue = _max(that.lowY, that.highY);\n\n      var visibleArea = that._getVisibleArea();\n\n      var rotated = that._options.rotated;\n      var minVisible = rotated ? visibleArea.minX : visibleArea.minY;\n      var maxVisible = rotated ? visibleArea.maxX : visibleArea.maxY;\n\n      var min = _max(minVisible, minValue);\n\n      var max = _min(maxVisible, maxValue);\n\n      var centerCoord = that.getCenterCoord();\n\n      if (\"edge\" === location) {\n        centerCoord[rotated ? \"x\" : \"y\"] = rotated ? max : min;\n      }\n\n      centerCoord.offset = 0;\n      return centerCoord;\n    }\n  },\n  getCenterCoord: function getCenterCoord() {\n    if (this.graphic) {\n      var that = this;\n      var x;\n      var y;\n\n      var minValue = _min(that.lowY, that.highY);\n\n      var maxValue = _max(that.lowY, that.highY);\n\n      var visibleArea = that._getVisibleArea();\n\n      var rotated = that._options.rotated;\n      var minVisible = rotated ? visibleArea.minX : visibleArea.minY;\n      var maxVisible = rotated ? visibleArea.maxX : visibleArea.maxY;\n\n      var min = _max(minVisible, minValue);\n\n      var max = _min(maxVisible, maxValue);\n\n      var center = min + (max - min) / 2;\n\n      if (rotated) {\n        y = that.x;\n        x = center;\n      } else {\n        x = that.x;\n        y = center;\n      }\n\n      return {\n        x: x,\n        y: y\n      };\n    }\n  },\n  hasValue: function hasValue() {\n    return null !== this.highValue && null !== this.lowValue;\n  },\n  hasCoords: function hasCoords() {\n    return null !== this.x && null !== this.lowY && null !== this.highY;\n  },\n  _translate: function _translate() {\n    var that = this;\n    var rotated = that._options.rotated;\n\n    var valTranslator = that._getValTranslator();\n\n    var centerValue;\n\n    var x = that._getArgTranslator().translate(that.argument);\n\n    that.vx = that.vy = that.x = null === x ? x : x + (that.xCorrection || 0);\n    that.openY = null !== that.openValue ? valTranslator.translate(that.openValue) : null;\n    that.highY = valTranslator.translate(that.highValue);\n    that.lowY = valTranslator.translate(that.lowValue);\n    that.closeY = null !== that.closeValue ? valTranslator.translate(that.closeValue) : null;\n    centerValue = _min(that.lowY, that.highY) + _abs(that.lowY - that.highY) / 2;\n\n    that._calculateVisibility(!rotated ? that.x : centerValue, !rotated ? centerValue : that.x);\n  },\n  getCrosshairData: function getCrosshairData(x, y) {\n    var that = this;\n    var rotated = that._options.rotated;\n    var origY = rotated ? x : y;\n    var yValue;\n    var argument = that.argument;\n    var coords;\n    var coord = \"low\";\n\n    if (_abs(that.lowY - origY) < _abs(that.closeY - origY)) {\n      yValue = that.lowY;\n    } else {\n      yValue = that.closeY;\n      coord = \"close\";\n    }\n\n    if (_abs(yValue - origY) >= _abs(that.openY - origY)) {\n      yValue = that.openY;\n      coord = \"open\";\n    }\n\n    if (_abs(yValue - origY) >= _abs(that.highY - origY)) {\n      yValue = that.highY;\n      coord = \"high\";\n    }\n\n    if (rotated) {\n      coords = {\n        y: that.vy,\n        x: yValue,\n        xValue: that[coord + \"Value\"],\n        yValue: argument\n      };\n    } else {\n      coords = {\n        x: that.vx,\n        y: yValue,\n        xValue: argument,\n        yValue: that[coord + \"Value\"]\n      };\n    }\n\n    coords.axis = that.series.axis;\n    return coords;\n  },\n  _updateData: function _updateData(data) {\n    var that = this;\n    var label = that._label;\n    var reductionColor = this._options.reduction.color;\n    that.value = that.initialValue = data.reductionValue;\n    that.originalValue = data.value;\n    that.lowValue = that.originalLowValue = data.lowValue;\n    that.highValue = that.originalHighValue = data.highValue;\n    that.openValue = that.originalOpenValue = data.openValue;\n    that.closeValue = that.originalCloseValue = data.closeValue;\n    that._isPositive = data.openValue < data.closeValue;\n    that._isReduction = data.isReduction;\n\n    if (that._isReduction) {\n      label.setColor(reductionColor);\n    }\n  },\n  _updateMarker: function _updateMarker(animationEnabled, style, group) {\n    var that = this;\n    var graphic = that.graphic;\n    graphic.attr({\n      points: that._getPoints()\n    }).smartAttr(style).sharp();\n    group && graphic.append(that._getMarkerGroup(group));\n  },\n  _getLabelFormatObject: function _getLabelFormatObject() {\n    var that = this;\n    return {\n      openValue: that.openValue,\n      highValue: that.highValue,\n      lowValue: that.lowValue,\n      closeValue: that.closeValue,\n      reductionValue: that.initialValue,\n      argument: that.initialArgument,\n      value: that.initialValue,\n      seriesName: that.series.name,\n      originalOpenValue: that.originalOpenValue,\n      originalCloseValue: that.originalCloseValue,\n      originalLowValue: that.originalLowValue,\n      originalHighValue: that.originalHighValue,\n      originalArgument: that.originalArgument,\n      point: that\n    };\n  },\n  _getFormatObject: function _getFormatObject(tooltip) {\n    var that = this;\n    var highValue = tooltip.formatValue(that.highValue);\n    var openValue = tooltip.formatValue(that.openValue);\n    var closeValue = tooltip.formatValue(that.closeValue);\n    var lowValue = tooltip.formatValue(that.lowValue);\n    var symbolMethods = symbolPoint;\n\n    var formatObject = symbolMethods._getFormatObject.call(that, tooltip);\n\n    return _extend({}, formatObject, {\n      valueText: \"h: \" + highValue + (\"\" !== openValue ? \" o: \" + openValue : \"\") + (\"\" !== closeValue ? \" c: \" + closeValue : \"\") + \" l: \" + lowValue,\n      highValueText: highValue,\n      openValueText: openValue,\n      closeValueText: closeValue,\n      lowValueText: lowValue\n    });\n  },\n  getMaxValue: function getMaxValue() {\n    return this.highValue;\n  },\n  getMinValue: function getMinValue() {\n    return this.lowValue;\n  }\n});","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/series/points/candlestick_point.js"],"names":["_extend","require","symbolPoint","barPoint","_math","_abs","_min","_max","_round","DEFAULT_FINANCIAL_TRACKER_MARGIN","module","_getContinuousPoints","that","x","createPoint","width","highCoord","max","min","points","_getCrockPoints","_getPoints","closeCoord","openCoord","getColor","_drawMarkerInGroup","_fillStyle","styles","_getMinTrackerWidth","correctCoordinates","minWidth","maxWidth","correctOptions","_getMarkerGroup","markerGroup","group","_drawMarker","_getSettingsForTracker","highY","lowY","rotated","y","height","_getGraphicBBox","getTooltipParams","minValue","maxValue","visibleArea","minVisible","maxVisible","centerCoord","getCenterCoord","center","hasValue","hasCoords","_translate","valTranslator","centerValue","getCrosshairData","origY","argument","coord","yValue","coords","xValue","_updateData","label","reductionColor","data","_updateMarker","graphic","_getLabelFormatObject","openValue","highValue","lowValue","closeValue","reductionValue","value","seriesName","originalOpenValue","originalCloseValue","originalLowValue","originalHighValue","originalArgument","point","_getFormatObject","tooltip","symbolMethods","formatObject","valueText","highValueText","openValueText","closeValueText","lowValueText","getMaxValue","getMinValue"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/series/points/candlestick_point.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _extend = require(\"../../../core/utils/extend\").extend;\r\nvar symbolPoint = require(\"./symbol_point\");\r\nvar barPoint = require(\"./bar_point\");\r\nvar _math = Math;\r\nvar _abs = _math.abs;\r\nvar _min = _math.min;\r\nvar _max = _math.max;\r\nvar _round = _math.round;\r\nvar DEFAULT_FINANCIAL_TRACKER_MARGIN = 2;\r\nmodule.exports = _extend({}, barPoint, {\r\n    _getContinuousPoints: function(openCoord, closeCoord) {\r\n        var that = this;\r\n        var x = that.x;\r\n        var createPoint = that._options.rotated ? function(x, y) {\r\n            return [y, x]\r\n        } : function(x, y) {\r\n            return [x, y]\r\n        };\r\n        var width = that.width;\r\n        var highCoord = that.highY;\r\n        var max = _abs(highCoord - openCoord) < _abs(highCoord - closeCoord) ? openCoord : closeCoord;\r\n        var min = max === closeCoord ? openCoord : closeCoord;\r\n        var points;\r\n        if (min === max) {\r\n            points = [].concat(createPoint(x, that.highY)).concat(createPoint(x, that.lowY)).concat(createPoint(x, that.closeY)).concat(createPoint(x - width / 2, that.closeY)).concat(createPoint(x + width / 2, that.closeY)).concat(createPoint(x, that.closeY))\r\n        } else {\r\n            points = [].concat(createPoint(x, that.highY)).concat(createPoint(x, max)).concat(createPoint(x + width / 2, max)).concat(createPoint(x + width / 2, min)).concat(createPoint(x, min)).concat(createPoint(x, that.lowY)).concat(createPoint(x, min)).concat(createPoint(x - width / 2, min)).concat(createPoint(x - width / 2, max)).concat(createPoint(x, max))\r\n        }\r\n        return points\r\n    },\r\n    _getCrockPoints: function(y) {\r\n        var that = this;\r\n        var x = that.x;\r\n        var createPoint = that._options.rotated ? function(x, y) {\r\n            return [y, x]\r\n        } : function(x, y) {\r\n            return [x, y]\r\n        };\r\n        return [].concat(createPoint(x, that.highY)).concat(createPoint(x, that.lowY)).concat(createPoint(x, y)).concat(createPoint(x - that.width / 2, y)).concat(createPoint(x + that.width / 2, y)).concat(createPoint(x, y))\r\n    },\r\n    _getPoints: function() {\r\n        var that = this;\r\n        var points;\r\n        var closeCoord = that.closeY;\r\n        var openCoord = that.openY;\r\n        if (null !== closeCoord && null !== openCoord) {\r\n            points = that._getContinuousPoints(openCoord, closeCoord)\r\n        } else {\r\n            if (openCoord === closeCoord) {\r\n                points = [that.x, that.highY, that.x, that.lowY]\r\n            } else {\r\n                points = that._getCrockPoints(null !== openCoord ? openCoord : closeCoord)\r\n            }\r\n        }\r\n        return points\r\n    },\r\n    getColor: function() {\r\n        var that = this;\r\n        return that._isReduction ? that._options.reduction.color : that._styles.normal.stroke || that.series.getColor()\r\n    },\r\n    _drawMarkerInGroup: function(group, attributes, renderer) {\r\n        var that = this;\r\n        that.graphic = renderer.path(that._getPoints(), \"area\").attr({\r\n            \"stroke-linecap\": \"square\"\r\n        }).attr(attributes).data({\r\n            \"chart-data-point\": that\r\n        }).sharp().append(group)\r\n    },\r\n    _fillStyle: function() {\r\n        var that = this;\r\n        var styles = that._options.styles;\r\n        if (that._isReduction && that._isPositive) {\r\n            that._styles = styles.reductionPositive\r\n        } else {\r\n            if (that._isReduction) {\r\n                that._styles = styles.reduction\r\n            } else {\r\n                if (that._isPositive) {\r\n                    that._styles = styles.positive\r\n                } else {\r\n                    that._styles = styles\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _getMinTrackerWidth: function() {\r\n        return 2 + 2 * this._styles.normal[\"stroke-width\"]\r\n    },\r\n    correctCoordinates: function(correctOptions) {\r\n        var minWidth = this._getMinTrackerWidth();\r\n        var maxWidth = 10;\r\n        var width = correctOptions.width;\r\n        width = width < minWidth ? minWidth : width > maxWidth ? maxWidth : width;\r\n        this.width = width + width % 2;\r\n        this.xCorrection = correctOptions.offset\r\n    },\r\n    _getMarkerGroup: function(group) {\r\n        var that = this;\r\n        var markerGroup;\r\n        if (that._isReduction && that._isPositive) {\r\n            markerGroup = group.reductionPositiveMarkersGroup\r\n        } else {\r\n            if (that._isReduction) {\r\n                markerGroup = group.reductionMarkersGroup\r\n            } else {\r\n                if (that._isPositive) {\r\n                    markerGroup = group.defaultPositiveMarkersGroup\r\n                } else {\r\n                    markerGroup = group.defaultMarkersGroup\r\n                }\r\n            }\r\n        }\r\n        return markerGroup\r\n    },\r\n    _drawMarker: function(renderer, group) {\r\n        this._drawMarkerInGroup(this._getMarkerGroup(group), this._getStyle(), renderer)\r\n    },\r\n    _getSettingsForTracker: function() {\r\n        var that = this;\r\n        var highY = that.highY;\r\n        var lowY = that.lowY;\r\n        var rotated = that._options.rotated;\r\n        var x;\r\n        var y;\r\n        var width;\r\n        var height;\r\n        if (highY === lowY) {\r\n            highY = rotated ? highY + DEFAULT_FINANCIAL_TRACKER_MARGIN : highY - DEFAULT_FINANCIAL_TRACKER_MARGIN;\r\n            lowY = rotated ? lowY - DEFAULT_FINANCIAL_TRACKER_MARGIN : lowY + DEFAULT_FINANCIAL_TRACKER_MARGIN\r\n        }\r\n        if (rotated) {\r\n            x = _min(lowY, highY);\r\n            y = that.x - that.width / 2;\r\n            width = _abs(lowY - highY);\r\n            height = that.width\r\n        } else {\r\n            x = that.x - that.width / 2;\r\n            y = _min(lowY, highY);\r\n            width = that.width;\r\n            height = _abs(lowY - highY)\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            width: width,\r\n            height: height\r\n        }\r\n    },\r\n    _getGraphicBBox: function() {\r\n        var that = this;\r\n        var rotated = that._options.rotated;\r\n        var x = that.x;\r\n        var width = that.width;\r\n        var lowY = that.lowY;\r\n        var highY = that.highY;\r\n        return {\r\n            x: !rotated ? x - _round(width / 2) : lowY,\r\n            y: !rotated ? highY : x - _round(width / 2),\r\n            width: !rotated ? width : highY - lowY,\r\n            height: !rotated ? lowY - highY : width\r\n        }\r\n    },\r\n    getTooltipParams: function(location) {\r\n        var that = this;\r\n        if (that.graphic) {\r\n            var minValue = _min(that.lowY, that.highY);\r\n            var maxValue = _max(that.lowY, that.highY);\r\n            var visibleArea = that._getVisibleArea();\r\n            var rotated = that._options.rotated;\r\n            var minVisible = rotated ? visibleArea.minX : visibleArea.minY;\r\n            var maxVisible = rotated ? visibleArea.maxX : visibleArea.maxY;\r\n            var min = _max(minVisible, minValue);\r\n            var max = _min(maxVisible, maxValue);\r\n            var centerCoord = that.getCenterCoord();\r\n            if (\"edge\" === location) {\r\n                centerCoord[rotated ? \"x\" : \"y\"] = rotated ? max : min\r\n            }\r\n            centerCoord.offset = 0;\r\n            return centerCoord\r\n        }\r\n    },\r\n    getCenterCoord: function() {\r\n        if (this.graphic) {\r\n            var that = this;\r\n            var x;\r\n            var y;\r\n            var minValue = _min(that.lowY, that.highY);\r\n            var maxValue = _max(that.lowY, that.highY);\r\n            var visibleArea = that._getVisibleArea();\r\n            var rotated = that._options.rotated;\r\n            var minVisible = rotated ? visibleArea.minX : visibleArea.minY;\r\n            var maxVisible = rotated ? visibleArea.maxX : visibleArea.maxY;\r\n            var min = _max(minVisible, minValue);\r\n            var max = _min(maxVisible, maxValue);\r\n            var center = min + (max - min) / 2;\r\n            if (rotated) {\r\n                y = that.x;\r\n                x = center\r\n            } else {\r\n                x = that.x;\r\n                y = center\r\n            }\r\n            return {\r\n                x: x,\r\n                y: y\r\n            }\r\n        }\r\n    },\r\n    hasValue: function() {\r\n        return null !== this.highValue && null !== this.lowValue\r\n    },\r\n    hasCoords: function() {\r\n        return null !== this.x && null !== this.lowY && null !== this.highY\r\n    },\r\n    _translate: function() {\r\n        var that = this;\r\n        var rotated = that._options.rotated;\r\n        var valTranslator = that._getValTranslator();\r\n        var centerValue;\r\n        var x = that._getArgTranslator().translate(that.argument);\r\n        that.vx = that.vy = that.x = null === x ? x : x + (that.xCorrection || 0);\r\n        that.openY = null !== that.openValue ? valTranslator.translate(that.openValue) : null;\r\n        that.highY = valTranslator.translate(that.highValue);\r\n        that.lowY = valTranslator.translate(that.lowValue);\r\n        that.closeY = null !== that.closeValue ? valTranslator.translate(that.closeValue) : null;\r\n        centerValue = _min(that.lowY, that.highY) + _abs(that.lowY - that.highY) / 2;\r\n        that._calculateVisibility(!rotated ? that.x : centerValue, !rotated ? centerValue : that.x)\r\n    },\r\n    getCrosshairData: function(x, y) {\r\n        var that = this;\r\n        var rotated = that._options.rotated;\r\n        var origY = rotated ? x : y;\r\n        var yValue;\r\n        var argument = that.argument;\r\n        var coords;\r\n        var coord = \"low\";\r\n        if (_abs(that.lowY - origY) < _abs(that.closeY - origY)) {\r\n            yValue = that.lowY\r\n        } else {\r\n            yValue = that.closeY;\r\n            coord = \"close\"\r\n        }\r\n        if (_abs(yValue - origY) >= _abs(that.openY - origY)) {\r\n            yValue = that.openY;\r\n            coord = \"open\"\r\n        }\r\n        if (_abs(yValue - origY) >= _abs(that.highY - origY)) {\r\n            yValue = that.highY;\r\n            coord = \"high\"\r\n        }\r\n        if (rotated) {\r\n            coords = {\r\n                y: that.vy,\r\n                x: yValue,\r\n                xValue: that[coord + \"Value\"],\r\n                yValue: argument\r\n            }\r\n        } else {\r\n            coords = {\r\n                x: that.vx,\r\n                y: yValue,\r\n                xValue: argument,\r\n                yValue: that[coord + \"Value\"]\r\n            }\r\n        }\r\n        coords.axis = that.series.axis;\r\n        return coords\r\n    },\r\n    _updateData: function(data) {\r\n        var that = this;\r\n        var label = that._label;\r\n        var reductionColor = this._options.reduction.color;\r\n        that.value = that.initialValue = data.reductionValue;\r\n        that.originalValue = data.value;\r\n        that.lowValue = that.originalLowValue = data.lowValue;\r\n        that.highValue = that.originalHighValue = data.highValue;\r\n        that.openValue = that.originalOpenValue = data.openValue;\r\n        that.closeValue = that.originalCloseValue = data.closeValue;\r\n        that._isPositive = data.openValue < data.closeValue;\r\n        that._isReduction = data.isReduction;\r\n        if (that._isReduction) {\r\n            label.setColor(reductionColor)\r\n        }\r\n    },\r\n    _updateMarker: function(animationEnabled, style, group) {\r\n        var that = this;\r\n        var graphic = that.graphic;\r\n        graphic.attr({\r\n            points: that._getPoints()\r\n        }).smartAttr(style).sharp();\r\n        group && graphic.append(that._getMarkerGroup(group))\r\n    },\r\n    _getLabelFormatObject: function() {\r\n        var that = this;\r\n        return {\r\n            openValue: that.openValue,\r\n            highValue: that.highValue,\r\n            lowValue: that.lowValue,\r\n            closeValue: that.closeValue,\r\n            reductionValue: that.initialValue,\r\n            argument: that.initialArgument,\r\n            value: that.initialValue,\r\n            seriesName: that.series.name,\r\n            originalOpenValue: that.originalOpenValue,\r\n            originalCloseValue: that.originalCloseValue,\r\n            originalLowValue: that.originalLowValue,\r\n            originalHighValue: that.originalHighValue,\r\n            originalArgument: that.originalArgument,\r\n            point: that\r\n        }\r\n    },\r\n    _getFormatObject: function(tooltip) {\r\n        var that = this;\r\n        var highValue = tooltip.formatValue(that.highValue);\r\n        var openValue = tooltip.formatValue(that.openValue);\r\n        var closeValue = tooltip.formatValue(that.closeValue);\r\n        var lowValue = tooltip.formatValue(that.lowValue);\r\n        var symbolMethods = symbolPoint;\r\n        var formatObject = symbolMethods._getFormatObject.call(that, tooltip);\r\n        return _extend({}, formatObject, {\r\n            valueText: \"h: \" + highValue + (\"\" !== openValue ? \" o: \" + openValue : \"\") + (\"\" !== closeValue ? \" c: \" + closeValue : \"\") + \" l: \" + lowValue,\r\n            highValueText: highValue,\r\n            openValueText: openValue,\r\n            closeValueText: closeValue,\r\n            lowValueText: lowValue\r\n        })\r\n    },\r\n    getMaxValue: function() {\r\n        return this.highValue\r\n    },\r\n    getMinValue: function() {\r\n        return this.lowValue\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}