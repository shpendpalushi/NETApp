{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/rendering_strategies/ui.scheduler.appointments.strategy.agenda.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _date = require(\"../../../core/utils/date\");\n\nvar _date2 = _interopRequireDefault(_date);\n\nvar _iterator = require(\"../../../core/utils/iterator\");\n\nvar _array = require(\"../../../core/utils/array\");\n\nvar _array2 = _interopRequireDefault(_array);\n\nvar _uiSchedulerAppointmentsStrategy = require(\"./ui.scheduler.appointments.strategy.base\");\n\nvar _uiSchedulerAppointmentsStrategy2 = _interopRequireDefault(_uiSchedulerAppointmentsStrategy);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar AgendaRenderingStrategy = function (_BaseAppointmentsStra) {\n  _inherits(AgendaRenderingStrategy, _BaseAppointmentsStra);\n\n  function AgendaRenderingStrategy() {\n    _classCallCheck(this, AgendaRenderingStrategy);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AgendaRenderingStrategy).apply(this, arguments));\n  }\n\n  _createClass(AgendaRenderingStrategy, [{\n    key: \"getAppointmentMinSize\",\n    value: function value() {}\n  }, {\n    key: \"getDeltaTime\",\n    value: function value() {}\n  }, {\n    key: \"keepAppointmentSettings\",\n    value: function value() {\n      return true;\n    }\n  }, {\n    key: \"getAppointmentGeometry\",\n    value: function value(geometry) {\n      return geometry;\n    }\n  }, {\n    key: \"createTaskPositionMap\",\n    value: function value(appointments) {\n      if (appointments.length) {\n        var height = this.instance.fire(\"getAgendaVerticalStepHeight\");\n        var appointmentsByResources = this.instance.fire(\"groupAppointmentsByResources\", appointments);\n        var groupedAppts = [];\n        (0, _iterator.each)(appointmentsByResources, function (i, appts) {\n          var additionalAppointments = [];\n          var recurrentIndexes = [];\n          (0, _iterator.each)(appts, function (index, appointment) {\n            var recurrenceBatch = this.instance.getAppointmentsInstance()._processRecurrenceAppointment(appointment, index);\n\n            var appointmentBatch = null;\n\n            if (!recurrenceBatch.indexes.length) {\n              appointmentBatch = {\n                parts: []\n              };\n              appointmentBatch = this.instance.getAppointmentsInstance()._processLongAppointment(appointment);\n              additionalAppointments = additionalAppointments.concat(appointmentBatch.parts);\n            }\n\n            additionalAppointments = additionalAppointments.concat(recurrenceBatch.parts);\n            recurrentIndexes = recurrentIndexes.concat(recurrenceBatch.indexes);\n          }.bind(this));\n\n          this.instance.getAppointmentsInstance()._reduceRecurrenceAppointments(recurrentIndexes, appts);\n\n          this.instance.getAppointmentsInstance()._combineAppointments(appts, additionalAppointments);\n\n          groupedAppts = groupedAppts.concat(appts);\n        }.bind(this));\n        Array.prototype.splice.apply(appointments, [0, appointments.length].concat(groupedAppts));\n      }\n\n      var result = [];\n      var sortedIndex = 0;\n      appointments.forEach(function (appt, index) {\n        result.push([{\n          height: height,\n          width: \"100%\",\n          sortedIndex: sortedIndex++,\n          groupIndex: this._calculateGroupIndex(index, appointmentsByResources)\n        }]);\n      }.bind(this));\n      return result;\n    }\n  }, {\n    key: \"_calculateGroupIndex\",\n    value: function value(apptIndex, appointmentsByResources) {\n      var resultInd;\n      var counter = 0;\n\n      for (var i in appointmentsByResources) {\n        var countApptInGroup = appointmentsByResources[i].length;\n\n        if (apptIndex >= counter && apptIndex < counter + countApptInGroup) {\n          resultInd = Number(i);\n          break;\n        }\n\n        counter += countApptInGroup;\n      }\n\n      return resultInd;\n    }\n  }, {\n    key: \"_getDeltaWidth\",\n    value: function value() {}\n  }, {\n    key: \"_getAppointmentMaxWidth\",\n    value: function value() {\n      return this.getDefaultCellWidth();\n    }\n  }, {\n    key: \"_needVerifyItemSize\",\n    value: function value() {\n      return false;\n    }\n  }, {\n    key: \"_isRtl\",\n    value: function value() {\n      return this.instance.option(\"rtlEnabled\");\n    }\n  }, {\n    key: \"_getAppointmentParts\",\n    value: function value() {}\n  }, {\n    key: \"_reduceMultiWeekAppointment\",\n    value: function value() {}\n  }, {\n    key: \"calculateAppointmentHeight\",\n    value: function value() {\n      return 0;\n    }\n  }, {\n    key: \"calculateAppointmentWidth\",\n    value: function value() {\n      return 0;\n    }\n  }, {\n    key: \"isAppointmentGreaterThan\",\n    value: function value() {}\n  }, {\n    key: \"isAllDay\",\n    value: function value() {\n      return false;\n    }\n  }, {\n    key: \"_sortCondition\",\n    value: function value() {}\n  }, {\n    key: \"_rowCondition\",\n    value: function value() {}\n  }, {\n    key: \"_columnCondition\",\n    value: function value() {}\n  }, {\n    key: \"_findIndexByKey\",\n    value: function value() {}\n  }, {\n    key: \"_getMaxNeighborAppointmentCount\",\n    value: function value() {}\n  }, {\n    key: \"_markAppointmentAsVirtual\",\n    value: function value() {}\n  }, {\n    key: \"getDropDownAppointmentWidth\",\n    value: function value() {}\n  }, {\n    key: \"getDefaultCellWidth\",\n    value: function value() {\n      return this._defaultWidth;\n    }\n  }, {\n    key: \"getCompactAppointmentDefaultWidth\",\n    value: function value() {}\n  }, {\n    key: \"getCompactAppointmentLeftOffset\",\n    value: function value() {}\n  }, {\n    key: \"getCompactAppointmentTopOffset\",\n    value: function value() {}\n  }, {\n    key: \"calculateRows\",\n    value: function value(appointments, agendaDuration, currentDate, needClearSettings) {\n      this._rows = [];\n      var appts = {\n        indexes: [],\n        parts: []\n      };\n      var groupedAppointments = this.instance.fire(\"groupAppointmentsByResources\", appointments);\n      currentDate = _date2.default.trimTime(new Date(currentDate));\n      (0, _iterator.each)(groupedAppointments, function (groupIndex, currentAppointments) {\n        var groupResult = [];\n\n        if (!currentAppointments.length) {\n          this._rows.push([]);\n\n          return true;\n        }\n\n        (0, _iterator.each)(currentAppointments, function (index, appointment) {\n          var startDate = this.instance.fire(\"getField\", \"startDate\", appointment);\n          var endDate = this.instance.fire(\"getField\", \"endDate\", appointment);\n          this.instance.fire(\"fixWrongEndDate\", appointment, startDate, endDate);\n          needClearSettings && delete appointment.settings;\n\n          var result = this.instance.getAppointmentsInstance()._processRecurrenceAppointment(appointment, index, false);\n\n          appts.parts = appts.parts.concat(result.parts);\n          appts.indexes = appts.indexes.concat(result.indexes);\n        }.bind(this));\n\n        this.instance.getAppointmentsInstance()._reduceRecurrenceAppointments(appts.indexes, currentAppointments);\n\n        _array2.default.merge(currentAppointments, appts.parts);\n\n        var appointmentCount = currentAppointments.length;\n\n        for (var i = 0; i < agendaDuration; i++) {\n          var day = new Date(currentDate);\n          day.setMilliseconds(day.getMilliseconds() + 864e5 * i);\n\n          if (void 0 === groupResult[i]) {\n            groupResult[i] = 0;\n          }\n\n          for (var j = 0; j < appointmentCount; j++) {\n            var appointmentData = currentAppointments[j].settings || currentAppointments[j];\n            var appointmentIsLong = this.instance.fire(\"appointmentTakesSeveralDays\", currentAppointments[j]);\n            var appointmentIsRecurrence = this.instance.fire(\"getField\", \"recurrenceRule\", currentAppointments[j]);\n\n            if (this.instance.fire(\"dayHasAppointment\", day, appointmentData, true) || !appointmentIsRecurrence && appointmentIsLong && this.instance.fire(\"dayHasAppointment\", day, currentAppointments[j], true)) {\n              groupResult[i] += 1;\n            }\n          }\n        }\n\n        this._rows.push(groupResult);\n      }.bind(this));\n      return this._rows;\n    }\n  }, {\n    key: \"_iterateRow\",\n    value: function value(row, obj, index) {\n      for (var i = 0; i < row.length; i++) {\n        obj.counter = obj.counter + row[i];\n\n        if (obj.counter >= index) {\n          obj.indexInRow = i;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"getDateByIndex\",\n    value: function value(index, rows, startViewDate) {\n      var obj = {\n        counter: 0,\n        indexInRow: 0\n      };\n      index++;\n\n      for (var i = 0; i < rows.length; i++) {\n        this._iterateRow(rows[i], obj, index);\n\n        if (obj.indexInRow) {\n          break;\n        }\n      }\n\n      return new Date(new Date(startViewDate).setDate(startViewDate.getDate() + obj.indexInRow));\n    }\n  }, {\n    key: \"getAppointmentDataCalculator\",\n    value: function value() {\n      return function ($appointment, originalStartDate) {\n        var apptIndex = $appointment.index();\n        var startViewDate = this.instance.getStartViewDate();\n        var calculatedStartDate = this.getDateByIndex(apptIndex, this._rows, startViewDate);\n        var wrappedOriginalStartDate = new Date(originalStartDate);\n        return {\n          startDate: new Date(calculatedStartDate.setHours(wrappedOriginalStartDate.getHours(), wrappedOriginalStartDate.getMinutes(), wrappedOriginalStartDate.getSeconds(), wrappedOriginalStartDate.getMilliseconds()))\n        };\n      }.bind(this);\n    }\n  }]);\n\n  return AgendaRenderingStrategy;\n}(_uiSchedulerAppointmentsStrategy2.default);\n\nmodule.exports = AgendaRenderingStrategy;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/scheduler/rendering_strategies/ui.scheduler.appointments.strategy.agenda.js"],"names":["_date","require","_date2","_interopRequireDefault","_iterator","_array","_array2","_uiSchedulerAppointmentsStrategy","_uiSchedulerAppointmentsStrategy2","obj","Symbol","_typeof","instance","i","props","descriptor","Object","_defineProperties","Constructor","call","_assertThisInitialized","_getPrototypeOf","o","subClass","superClass","constructor","value","writable","configurable","_setPrototypeOf","AgendaRenderingStrategy","_inherits","_classCallCheck","_possibleConstructorReturn","_createClass","key","appointments","height","appointmentsByResources","groupedAppts","additionalAppointments","recurrentIndexes","recurrenceBatch","appointmentBatch","parts","Array","result","sortedIndex","width","groupIndex","counter","countApptInGroup","apptIndex","resultInd","Number","appts","indexes","groupedAppointments","currentDate","groupResult","currentAppointments","startDate","endDate","needClearSettings","appointment","appointmentCount","day","j","appointmentData","appointmentIsLong","appointmentIsRecurrence","row","indexInRow","index","rows","startViewDate","$appointment","calculatedStartDate","wrappedOriginalStartDate","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/rendering_strategies/ui.scheduler.appointments.strategy.agenda.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _date = require(\"../../../core/utils/date\");\r\nvar _date2 = _interopRequireDefault(_date);\r\nvar _iterator = require(\"../../../core/utils/iterator\");\r\nvar _array = require(\"../../../core/utils/array\");\r\nvar _array2 = _interopRequireDefault(_array);\r\nvar _uiSchedulerAppointmentsStrategy = require(\"./ui.scheduler.appointments.strategy.base\");\r\nvar _uiSchedulerAppointmentsStrategy2 = _interopRequireDefault(_uiSchedulerAppointmentsStrategy);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar AgendaRenderingStrategy = function(_BaseAppointmentsStra) {\r\n    _inherits(AgendaRenderingStrategy, _BaseAppointmentsStra);\r\n\r\n    function AgendaRenderingStrategy() {\r\n        _classCallCheck(this, AgendaRenderingStrategy);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(AgendaRenderingStrategy).apply(this, arguments))\r\n    }\r\n    _createClass(AgendaRenderingStrategy, [{\r\n        key: \"getAppointmentMinSize\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"getDeltaTime\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"keepAppointmentSettings\",\r\n        value: function() {\r\n            return true\r\n        }\r\n    }, {\r\n        key: \"getAppointmentGeometry\",\r\n        value: function(geometry) {\r\n            return geometry\r\n        }\r\n    }, {\r\n        key: \"createTaskPositionMap\",\r\n        value: function(appointments) {\r\n            if (appointments.length) {\r\n                var height = this.instance.fire(\"getAgendaVerticalStepHeight\");\r\n                var appointmentsByResources = this.instance.fire(\"groupAppointmentsByResources\", appointments);\r\n                var groupedAppts = [];\r\n                (0, _iterator.each)(appointmentsByResources, function(i, appts) {\r\n                    var additionalAppointments = [];\r\n                    var recurrentIndexes = [];\r\n                    (0, _iterator.each)(appts, function(index, appointment) {\r\n                        var recurrenceBatch = this.instance.getAppointmentsInstance()._processRecurrenceAppointment(appointment, index);\r\n                        var appointmentBatch = null;\r\n                        if (!recurrenceBatch.indexes.length) {\r\n                            appointmentBatch = {\r\n                                parts: []\r\n                            };\r\n                            appointmentBatch = this.instance.getAppointmentsInstance()._processLongAppointment(appointment);\r\n                            additionalAppointments = additionalAppointments.concat(appointmentBatch.parts)\r\n                        }\r\n                        additionalAppointments = additionalAppointments.concat(recurrenceBatch.parts);\r\n                        recurrentIndexes = recurrentIndexes.concat(recurrenceBatch.indexes)\r\n                    }.bind(this));\r\n                    this.instance.getAppointmentsInstance()._reduceRecurrenceAppointments(recurrentIndexes, appts);\r\n                    this.instance.getAppointmentsInstance()._combineAppointments(appts, additionalAppointments);\r\n                    groupedAppts = groupedAppts.concat(appts)\r\n                }.bind(this));\r\n                Array.prototype.splice.apply(appointments, [0, appointments.length].concat(groupedAppts))\r\n            }\r\n            var result = [];\r\n            var sortedIndex = 0;\r\n            appointments.forEach(function(appt, index) {\r\n                result.push([{\r\n                    height: height,\r\n                    width: \"100%\",\r\n                    sortedIndex: sortedIndex++,\r\n                    groupIndex: this._calculateGroupIndex(index, appointmentsByResources)\r\n                }])\r\n            }.bind(this));\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_calculateGroupIndex\",\r\n        value: function(apptIndex, appointmentsByResources) {\r\n            var resultInd;\r\n            var counter = 0;\r\n            for (var i in appointmentsByResources) {\r\n                var countApptInGroup = appointmentsByResources[i].length;\r\n                if (apptIndex >= counter && apptIndex < counter + countApptInGroup) {\r\n                    resultInd = Number(i);\r\n                    break\r\n                }\r\n                counter += countApptInGroup\r\n            }\r\n            return resultInd\r\n        }\r\n    }, {\r\n        key: \"_getDeltaWidth\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_getAppointmentMaxWidth\",\r\n        value: function() {\r\n            return this.getDefaultCellWidth()\r\n        }\r\n    }, {\r\n        key: \"_needVerifyItemSize\",\r\n        value: function() {\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_isRtl\",\r\n        value: function() {\r\n            return this.instance.option(\"rtlEnabled\")\r\n        }\r\n    }, {\r\n        key: \"_getAppointmentParts\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_reduceMultiWeekAppointment\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"calculateAppointmentHeight\",\r\n        value: function() {\r\n            return 0\r\n        }\r\n    }, {\r\n        key: \"calculateAppointmentWidth\",\r\n        value: function() {\r\n            return 0\r\n        }\r\n    }, {\r\n        key: \"isAppointmentGreaterThan\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"isAllDay\",\r\n        value: function() {\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_sortCondition\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_rowCondition\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_columnCondition\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_findIndexByKey\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_getMaxNeighborAppointmentCount\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_markAppointmentAsVirtual\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"getDropDownAppointmentWidth\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"getDefaultCellWidth\",\r\n        value: function() {\r\n            return this._defaultWidth\r\n        }\r\n    }, {\r\n        key: \"getCompactAppointmentDefaultWidth\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"getCompactAppointmentLeftOffset\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"getCompactAppointmentTopOffset\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"calculateRows\",\r\n        value: function(appointments, agendaDuration, currentDate, needClearSettings) {\r\n            this._rows = [];\r\n            var appts = {\r\n                indexes: [],\r\n                parts: []\r\n            };\r\n            var groupedAppointments = this.instance.fire(\"groupAppointmentsByResources\", appointments);\r\n            currentDate = _date2.default.trimTime(new Date(currentDate));\r\n            (0, _iterator.each)(groupedAppointments, function(groupIndex, currentAppointments) {\r\n                var groupResult = [];\r\n                if (!currentAppointments.length) {\r\n                    this._rows.push([]);\r\n                    return true\r\n                }(0, _iterator.each)(currentAppointments, function(index, appointment) {\r\n                    var startDate = this.instance.fire(\"getField\", \"startDate\", appointment);\r\n                    var endDate = this.instance.fire(\"getField\", \"endDate\", appointment);\r\n                    this.instance.fire(\"fixWrongEndDate\", appointment, startDate, endDate);\r\n                    needClearSettings && delete appointment.settings;\r\n                    var result = this.instance.getAppointmentsInstance()._processRecurrenceAppointment(appointment, index, false);\r\n                    appts.parts = appts.parts.concat(result.parts);\r\n                    appts.indexes = appts.indexes.concat(result.indexes)\r\n                }.bind(this));\r\n                this.instance.getAppointmentsInstance()._reduceRecurrenceAppointments(appts.indexes, currentAppointments);\r\n                _array2.default.merge(currentAppointments, appts.parts);\r\n                var appointmentCount = currentAppointments.length;\r\n                for (var i = 0; i < agendaDuration; i++) {\r\n                    var day = new Date(currentDate);\r\n                    day.setMilliseconds(day.getMilliseconds() + 864e5 * i);\r\n                    if (void 0 === groupResult[i]) {\r\n                        groupResult[i] = 0\r\n                    }\r\n                    for (var j = 0; j < appointmentCount; j++) {\r\n                        var appointmentData = currentAppointments[j].settings || currentAppointments[j];\r\n                        var appointmentIsLong = this.instance.fire(\"appointmentTakesSeveralDays\", currentAppointments[j]);\r\n                        var appointmentIsRecurrence = this.instance.fire(\"getField\", \"recurrenceRule\", currentAppointments[j]);\r\n                        if (this.instance.fire(\"dayHasAppointment\", day, appointmentData, true) || !appointmentIsRecurrence && appointmentIsLong && this.instance.fire(\"dayHasAppointment\", day, currentAppointments[j], true)) {\r\n                            groupResult[i] += 1\r\n                        }\r\n                    }\r\n                }\r\n                this._rows.push(groupResult)\r\n            }.bind(this));\r\n            return this._rows\r\n        }\r\n    }, {\r\n        key: \"_iterateRow\",\r\n        value: function(row, obj, index) {\r\n            for (var i = 0; i < row.length; i++) {\r\n                obj.counter = obj.counter + row[i];\r\n                if (obj.counter >= index) {\r\n                    obj.indexInRow = i;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"getDateByIndex\",\r\n        value: function(index, rows, startViewDate) {\r\n            var obj = {\r\n                counter: 0,\r\n                indexInRow: 0\r\n            };\r\n            index++;\r\n            for (var i = 0; i < rows.length; i++) {\r\n                this._iterateRow(rows[i], obj, index);\r\n                if (obj.indexInRow) {\r\n                    break\r\n                }\r\n            }\r\n            return new Date(new Date(startViewDate).setDate(startViewDate.getDate() + obj.indexInRow))\r\n        }\r\n    }, {\r\n        key: \"getAppointmentDataCalculator\",\r\n        value: function() {\r\n            return function($appointment, originalStartDate) {\r\n                var apptIndex = $appointment.index();\r\n                var startViewDate = this.instance.getStartViewDate();\r\n                var calculatedStartDate = this.getDateByIndex(apptIndex, this._rows, startViewDate);\r\n                var wrappedOriginalStartDate = new Date(originalStartDate);\r\n                return {\r\n                    startDate: new Date(calculatedStartDate.setHours(wrappedOriginalStartDate.getHours(), wrappedOriginalStartDate.getMinutes(), wrappedOriginalStartDate.getSeconds(), wrappedOriginalStartDate.getMilliseconds()))\r\n                }\r\n            }.bind(this)\r\n        }\r\n    }]);\r\n    return AgendaRenderingStrategy\r\n}(_uiSchedulerAppointmentsStrategy2.default);\r\nmodule.exports = AgendaRenderingStrategy;\r\n"]},"metadata":{},"sourceType":"module"}