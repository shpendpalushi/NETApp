{"ast":null,"code":"/**\r\n * DevExtreme (viz/vector_map/control_bar.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _math = Math;\nvar _min = _math.min;\nvar _max = _math.max;\nvar _round = _math.round;\nvar _floor = _math.floor;\nvar _sqrt = _math.sqrt;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar _parseScalar = vizUtils.parseScalar;\nvar parseHorizontalAlignment = vizUtils.enumParser([\"left\", \"center\", \"right\"]);\nvar parseVerticalAlignment = vizUtils.enumParser([\"top\", \"bottom\"]);\nvar COMMAND_RESET = \"command-reset\";\nvar COMMAND_MOVE_UP = \"command-move-up\";\nvar COMMAND_MOVE_RIGHT = \"command-move-right\";\nvar COMMAND_MOVE_DOWN = \"command-move-down\";\nvar COMMAND_MOVE_LEFT = \"command-move-left\";\nvar COMMAND_ZOOM_IN = \"command-zoom-in\";\nvar COMMAND_ZOOM_OUT = \"command-zoom-out\";\nvar COMMAND_ZOOM_DRAG_LINE = \"command-zoom-drag-line\";\nvar COMMAND_ZOOM_DRAG = \"command-zoom-drag\";\nvar EVENT_TARGET_TYPE = \"control-bar\";\nvar FLAG_CENTERING = 1;\nvar FLAG_ZOOMING = 2;\nvar SIZE_OPTIONS = {\n  bigCircleSize: 58,\n  smallCircleSize: 28,\n  buttonSize: 10,\n  arrowButtonOffset: 20,\n  incDecButtonSize: 11,\n  incButtonOffset: 66,\n  decButtonOffset: 227,\n  sliderLineStartOffset: 88.5,\n  sliderLineEndOffset: 205.5,\n  sliderLength: 20,\n  sliderWidth: 8,\n  trackerGap: 4\n};\nvar OFFSET_X = 30.5;\nvar OFFSET_Y = 30.5;\nvar TOTAL_WIDTH = 61;\nvar TOTAL_HEIGHT = 274;\nvar COMMAND_TO_TYPE_MAP = {};\nCOMMAND_TO_TYPE_MAP[COMMAND_RESET] = ResetCommand;\nCOMMAND_TO_TYPE_MAP[COMMAND_MOVE_UP] = COMMAND_TO_TYPE_MAP[COMMAND_MOVE_RIGHT] = COMMAND_TO_TYPE_MAP[COMMAND_MOVE_DOWN] = COMMAND_TO_TYPE_MAP[COMMAND_MOVE_LEFT] = MoveCommand;\nCOMMAND_TO_TYPE_MAP[COMMAND_ZOOM_IN] = COMMAND_TO_TYPE_MAP[COMMAND_ZOOM_OUT] = ZoomCommand;\nCOMMAND_TO_TYPE_MAP[COMMAND_ZOOM_DRAG] = ZoomDragCommand;\n\nfunction ControlBar(parameters) {\n  var that = this;\n  that._params = parameters;\n\n  that._createElements(parameters.renderer, parameters.container, parameters.dataKey);\n\n  parameters.layoutControl.addItem(that);\n\n  that._subscribeToProjection(parameters.projection);\n\n  that._subscribeToTracker(parameters.tracker);\n\n  that._createCallbacks(parameters.projection);\n}\n\nControlBar.prototype = {\n  constructor: ControlBar,\n  _flags: 0,\n  dispose: function dispose() {\n    var that = this;\n\n    that._params.layoutControl.removeItem(that);\n\n    that._root.linkRemove().linkOff();\n\n    that._offProjection();\n\n    that._offTracker();\n\n    that._params = that._root = that._offProjection = that._offTracker = that._callbacks = null;\n  },\n  _subscribeToProjection: function _subscribeToProjection(projection) {\n    var that = this;\n    that._offProjection = projection.on({\n      engine: function engine() {\n        that._update();\n      },\n      zoom: updateZoom,\n      \"max-zoom\": function maxZoom() {\n        that._zoomPartition = projection.getZoomScalePartition();\n        that._sliderUnitLength = that._sliderLineLength / that._zoomPartition;\n        updateZoom();\n      }\n    });\n\n    function updateZoom() {\n      that._adjustZoom(projection.getScaledZoom());\n    }\n  },\n  _subscribeToTracker: function _subscribeToTracker(tracker) {\n    var that = this;\n    var isActive = false;\n    that._offTracker = tracker.on({\n      start: function start(arg) {\n        isActive = arg.data.name === EVENT_TARGET_TYPE;\n\n        if (isActive) {\n          that._processStart(arg.data.index, arg);\n        }\n      },\n      move: function move(arg) {\n        if (isActive) {\n          that._processMove(arg.data.index, arg);\n        }\n      },\n      end: function end() {\n        if (isActive) {\n          that._processEnd();\n\n          isActive = false;\n        }\n      }\n    });\n  },\n  _createCallbacks: function _createCallbacks(projection) {\n    var that = this;\n    that._callbacks = {\n      reset: function reset(isCenter, isZoom) {\n        if (isCenter) {\n          projection.setCenter(null);\n        }\n\n        if (isZoom) {\n          projection.setZoom(null);\n        }\n      },\n      beginMove: function beginMove() {\n        projection.beginMoveCenter();\n      },\n      endMove: function endMove() {\n        projection.endMoveCenter();\n      },\n      move: function move(shift) {\n        projection.moveCenter(shift);\n      },\n      zoom: function zoom(_zoom) {\n        projection.setScaledZoom(_zoom);\n      }\n    };\n  },\n  _createElements: function _createElements(renderer, container, dataKey) {\n    var that = this;\n    var buttonsGroups;\n    var trackersGroup;\n    that._root = renderer.g().attr({\n      \"class\": \"dxm-control-bar\"\n    }).linkOn(container, \"control-bar\");\n    buttonsGroups = that._buttonsGroup = renderer.g().attr({\n      \"class\": \"dxm-control-buttons\"\n    }).append(that._root);\n    trackersGroup = renderer.g().attr({\n      stroke: \"none\",\n      \"stroke-width\": 0,\n      fill: \"#000000\",\n      opacity: 1e-4\n    }).css({\n      cursor: \"pointer\"\n    }).append(that._root);\n\n    that._createButtons(renderer, dataKey, buttonsGroups);\n\n    that._createTrackers(renderer, dataKey, trackersGroup);\n  },\n  _createButtons: function _createButtons(renderer, dataKey, group) {\n    var that = this;\n    var options = SIZE_OPTIONS;\n    var size = options.buttonSize / 2;\n    var offset1 = options.arrowButtonOffset - size;\n    var offset2 = options.arrowButtonOffset;\n    var incDecButtonSize = options.incDecButtonSize / 2;\n    var directionOptions = {\n      \"stroke-linecap\": \"square\",\n      fill: \"none\"\n    };\n    var line = \"line\";\n    renderer.circle(0, 0, options.bigCircleSize / 2).append(group);\n    renderer.circle(0, 0, size).attr({\n      fill: \"none\"\n    }).append(group);\n    renderer.path([-size, -offset1, 0, -offset2, size, -offset1], line).attr(directionOptions).append(group);\n    renderer.path([offset1, -size, offset2, 0, offset1, size], line).attr(directionOptions).append(group);\n    renderer.path([size, offset1, 0, offset2, -size, offset1], line).attr(directionOptions).append(group);\n    renderer.path([-offset1, size, -offset2, 0, -offset1, -size], line).attr(directionOptions).append(group);\n    renderer.circle(0, options.incButtonOffset, options.smallCircleSize / 2).append(group);\n    renderer.path([[-incDecButtonSize, options.incButtonOffset, incDecButtonSize, options.incButtonOffset], [0, options.incButtonOffset - incDecButtonSize, 0, options.incButtonOffset + incDecButtonSize]], \"area\").append(group);\n    renderer.circle(0, options.decButtonOffset, options.smallCircleSize / 2).append(group);\n    renderer.path([-incDecButtonSize, options.decButtonOffset, incDecButtonSize, options.decButtonOffset], \"area\").append(group);\n    that._zoomLine = renderer.path([], \"line\").append(group);\n    that._zoomDrag = renderer.rect(_floor(-options.sliderLength / 2), _floor(options.sliderLineEndOffset - options.sliderWidth / 2), options.sliderLength, options.sliderWidth).append(group);\n    that._sliderLineLength = options.sliderLineEndOffset - options.sliderLineStartOffset;\n  },\n  _createTrackers: function _createTrackers(renderer, dataKey, group) {\n    var options = SIZE_OPTIONS;\n\n    var size = _round((options.arrowButtonOffset - options.trackerGap) / 2);\n\n    var offset1 = options.arrowButtonOffset - size;\n\n    var offset2 = _round(_sqrt(options.bigCircleSize * options.bigCircleSize / 4 - size * size));\n\n    var size2 = offset2 - offset1;\n    renderer.rect(-size, -size, 2 * size, 2 * size).data(dataKey, {\n      index: COMMAND_RESET,\n      name: EVENT_TARGET_TYPE\n    }).append(group);\n    renderer.rect(-size, -offset2, 2 * size, size2).data(dataKey, {\n      index: COMMAND_MOVE_UP,\n      name: EVENT_TARGET_TYPE\n    }).append(group);\n    renderer.rect(offset1, -size, size2, 2 * size).data(dataKey, {\n      index: COMMAND_MOVE_RIGHT,\n      name: EVENT_TARGET_TYPE\n    }).append(group);\n    renderer.rect(-size, offset1, 2 * size, size2).data(dataKey, {\n      index: COMMAND_MOVE_DOWN,\n      name: EVENT_TARGET_TYPE\n    }).append(group);\n    renderer.rect(-offset2, -size, size2, 2 * size).data(dataKey, {\n      index: COMMAND_MOVE_LEFT,\n      name: EVENT_TARGET_TYPE\n    }).append(group);\n    renderer.circle(0, options.incButtonOffset, options.smallCircleSize / 2).data(dataKey, {\n      index: COMMAND_ZOOM_IN,\n      name: EVENT_TARGET_TYPE\n    }).append(group);\n    renderer.circle(0, options.decButtonOffset, options.smallCircleSize / 2).data(dataKey, {\n      index: COMMAND_ZOOM_OUT,\n      name: EVENT_TARGET_TYPE\n    }).append(group);\n    renderer.rect(-2, options.sliderLineStartOffset - 2, 4, options.sliderLineEndOffset - options.sliderLineStartOffset + 4).css({\n      cursor: \"default\"\n    }).data(dataKey, {\n      index: COMMAND_ZOOM_DRAG_LINE,\n      name: EVENT_TARGET_TYPE\n    }).append(group);\n    this._zoomDragTracker = renderer.rect(-options.sliderLength / 2, options.sliderLineEndOffset - options.sliderWidth / 2, options.sliderLength, options.sliderWidth).data(dataKey, {\n      index: COMMAND_ZOOM_DRAG,\n      name: EVENT_TARGET_TYPE\n    }).append(group);\n  },\n  resize: function resize(size) {\n    if (this._isActive) {\n      this._root.attr({\n        visibility: null !== size ? null : \"hidden\"\n      });\n    }\n  },\n  getLayoutOptions: function getLayoutOptions() {\n    return this._isActive ? this._layoutOptions : null;\n  },\n  locate: function locate(x, y) {\n    this._root.attr({\n      translateX: x + this._margin + OFFSET_X,\n      translateY: y + this._margin + OFFSET_Y\n    });\n  },\n  _update: function _update() {\n    var that = this;\n    that._isActive = that._isEnabled && that._flags && that._params.projection.isInvertible();\n\n    if (that._isActive) {\n      that._root.linkAppend();\n    } else {\n      that._root.linkRemove();\n    }\n\n    that._processEnd();\n\n    that.updateLayout();\n  },\n  setInteraction: function setInteraction(interaction) {\n    var that = this;\n\n    if (_parseScalar(interaction.centeringEnabled, true)) {\n      that._flags |= FLAG_CENTERING;\n    } else {\n      that._flags &= ~FLAG_CENTERING;\n    }\n\n    if (_parseScalar(interaction.zoomingEnabled, true)) {\n      that._flags |= FLAG_ZOOMING;\n    } else {\n      that._flags &= ~FLAG_ZOOMING;\n    }\n\n    that._update();\n  },\n  setOptions: function setOptions(options) {\n    var that = this;\n    that._isEnabled = !!_parseScalar(options.enabled, true);\n    that._margin = options.margin || 0;\n    that._layoutOptions = {\n      width: 2 * that._margin + TOTAL_WIDTH,\n      height: 2 * that._margin + TOTAL_HEIGHT,\n      horizontalAlignment: parseHorizontalAlignment(options.horizontalAlignment, \"left\"),\n      verticalAlignment: parseVerticalAlignment(options.verticalAlignment, \"top\")\n    };\n\n    that._buttonsGroup.attr({\n      \"stroke-width\": options.borderWidth,\n      stroke: options.borderColor,\n      fill: options.color,\n      \"fill-opacity\": options.opacity\n    });\n\n    that._update();\n  },\n  _adjustZoom: function _adjustZoom(zoom) {\n    var that = this;\n    var transform;\n    var y;\n    var start = SIZE_OPTIONS.sliderLineStartOffset;\n    var end = SIZE_OPTIONS.sliderLineEndOffset;\n    var h = SIZE_OPTIONS.sliderWidth;\n    that._zoomFactor = _max(_min(_round(zoom), that._zoomPartition), 0);\n    transform = {\n      translateY: -_round(that._zoomFactor * that._sliderUnitLength)\n    };\n    y = end - h / 2 + transform.translateY;\n\n    that._zoomLine.attr({\n      points: [[0, start, 0, _max(start, y)], [0, _min(end, y + h), 0, end]]\n    });\n\n    that._zoomDrag.attr(transform);\n\n    that._zoomDragTracker.attr(transform);\n  },\n  _applyZoom: function _applyZoom() {\n    this._callbacks.zoom(this._zoomFactor);\n  },\n  _processStart: function _processStart(command, arg) {\n    var commandType;\n\n    if (this._isActive) {\n      commandType = COMMAND_TO_TYPE_MAP[command];\n      this._command = commandType && commandType.flags & this._flags ? new commandType(this, command, arg) : null;\n    }\n  },\n  _processMove: function _processMove(command, arg) {\n    this._command && this._command.update(command, arg);\n  },\n  _processEnd: function _processEnd() {\n    this._command && this._command.finish();\n    this._command = null;\n  }\n};\n\nfunction disposeCommand(command) {\n  delete command._owner;\n\n  command.update = function () {};\n\n  command.finish = function () {};\n}\n\nfunction ResetCommand(owner, command) {\n  this._owner = owner;\n  this._command = command;\n}\n\nResetCommand.flags = FLAG_CENTERING | FLAG_ZOOMING;\n\nResetCommand.prototype.update = function (command) {\n  command !== this._command && disposeCommand(this);\n};\n\nResetCommand.prototype.finish = function () {\n  var flags = this._owner._flags;\n\n  this._owner._callbacks.reset(!!(flags & FLAG_CENTERING), !!(flags & FLAG_ZOOMING));\n\n  disposeCommand(this);\n};\n\nfunction MoveCommand(owner, command, arg) {\n  this._command = command;\n  var timeout = null;\n  var interval = 100;\n  var dx = 0;\n  var dy = 0;\n\n  switch (this._command) {\n    case COMMAND_MOVE_UP:\n      dy = -10;\n      break;\n\n    case COMMAND_MOVE_RIGHT:\n      dx = 10;\n      break;\n\n    case COMMAND_MOVE_DOWN:\n      dy = 10;\n      break;\n\n    case COMMAND_MOVE_LEFT:\n      dx = -10;\n  }\n\n  function callback() {\n    owner._callbacks.move([dx, dy]);\n\n    timeout = setTimeout(callback, interval);\n  }\n\n  this._stop = function () {\n    clearTimeout(timeout);\n\n    owner._callbacks.endMove();\n\n    this._stop = owner = null;\n    return this;\n  };\n\n  arg = null;\n\n  owner._callbacks.beginMove();\n\n  callback();\n}\n\nMoveCommand.flags = FLAG_CENTERING;\n\nMoveCommand.prototype.update = function (command) {\n  this._command !== command && this.finish();\n};\n\nMoveCommand.prototype.finish = function () {\n  disposeCommand(this._stop());\n};\n\nfunction ZoomCommand(owner, command) {\n  this._owner = owner;\n  this._command = command;\n  var timeout = null;\n  var interval = 150;\n  var dZoom = this._command === COMMAND_ZOOM_IN ? 1 : -1;\n\n  function callback() {\n    owner._adjustZoom(owner._zoomFactor + dZoom);\n\n    timeout = setTimeout(callback, interval);\n  }\n\n  this._stop = function () {\n    clearTimeout(timeout);\n    this._stop = owner = null;\n    return this;\n  };\n\n  callback();\n}\n\nZoomCommand.flags = FLAG_ZOOMING;\n\nZoomCommand.prototype.update = function (command) {\n  this._command !== command && this.finish();\n};\n\nZoomCommand.prototype.finish = function () {\n  this._owner._applyZoom();\n\n  disposeCommand(this._stop());\n};\n\nfunction ZoomDragCommand(owner, command, arg) {\n  this._owner = owner;\n  this._zoomFactor = owner._zoomFactor;\n  this._pos = arg.y;\n}\n\nZoomDragCommand.flags = FLAG_ZOOMING;\n\nZoomDragCommand.prototype.update = function (command, arg) {\n  var owner = this._owner;\n\n  owner._adjustZoom(this._zoomFactor + owner._zoomPartition * (this._pos - arg.y) / owner._sliderLineLength);\n};\n\nZoomDragCommand.prototype.finish = function () {\n  this._owner._applyZoom();\n\n  disposeCommand(this);\n};\n\nexports.ControlBar = ControlBar;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/vector_map/control_bar.js"],"names":["_math","_min","_max","_round","_floor","_sqrt","vizUtils","require","_parseScalar","parseHorizontalAlignment","parseVerticalAlignment","COMMAND_RESET","COMMAND_MOVE_UP","COMMAND_MOVE_RIGHT","COMMAND_MOVE_DOWN","COMMAND_MOVE_LEFT","COMMAND_ZOOM_IN","COMMAND_ZOOM_OUT","COMMAND_ZOOM_DRAG_LINE","COMMAND_ZOOM_DRAG","EVENT_TARGET_TYPE","FLAG_CENTERING","FLAG_ZOOMING","SIZE_OPTIONS","bigCircleSize","smallCircleSize","buttonSize","arrowButtonOffset","incDecButtonSize","incButtonOffset","decButtonOffset","sliderLineStartOffset","sliderLineEndOffset","sliderLength","sliderWidth","trackerGap","OFFSET_X","OFFSET_Y","TOTAL_WIDTH","TOTAL_HEIGHT","COMMAND_TO_TYPE_MAP","that","parameters","ControlBar","constructor","_flags","dispose","_subscribeToProjection","engine","zoom","projection","updateZoom","_subscribeToTracker","isActive","start","arg","move","end","_createCallbacks","reset","beginMove","endMove","_createElements","buttonsGroups","trackersGroup","stroke","fill","opacity","cursor","_createButtons","options","size","offset1","offset2","directionOptions","line","renderer","_createTrackers","size2","index","name","resize","visibility","getLayoutOptions","locate","translateX","x","translateY","y","_update","setInteraction","interaction","setOptions","width","height","horizontalAlignment","verticalAlignment","_adjustZoom","h","transform","points","_applyZoom","_processStart","commandType","_processMove","_processEnd","command","ResetCommand","disposeCommand","flags","timeout","interval","dx","dy","owner","setTimeout","clearTimeout","callback","MoveCommand","dZoom","ZoomCommand","ZoomDragCommand","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/vector_map/control_bar.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _math = Math;\r\nvar _min = _math.min;\r\nvar _max = _math.max;\r\nvar _round = _math.round;\r\nvar _floor = _math.floor;\r\nvar _sqrt = _math.sqrt;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar _parseScalar = vizUtils.parseScalar;\r\nvar parseHorizontalAlignment = vizUtils.enumParser([\"left\", \"center\", \"right\"]);\r\nvar parseVerticalAlignment = vizUtils.enumParser([\"top\", \"bottom\"]);\r\nvar COMMAND_RESET = \"command-reset\";\r\nvar COMMAND_MOVE_UP = \"command-move-up\";\r\nvar COMMAND_MOVE_RIGHT = \"command-move-right\";\r\nvar COMMAND_MOVE_DOWN = \"command-move-down\";\r\nvar COMMAND_MOVE_LEFT = \"command-move-left\";\r\nvar COMMAND_ZOOM_IN = \"command-zoom-in\";\r\nvar COMMAND_ZOOM_OUT = \"command-zoom-out\";\r\nvar COMMAND_ZOOM_DRAG_LINE = \"command-zoom-drag-line\";\r\nvar COMMAND_ZOOM_DRAG = \"command-zoom-drag\";\r\nvar EVENT_TARGET_TYPE = \"control-bar\";\r\nvar FLAG_CENTERING = 1;\r\nvar FLAG_ZOOMING = 2;\r\nvar SIZE_OPTIONS = {\r\n    bigCircleSize: 58,\r\n    smallCircleSize: 28,\r\n    buttonSize: 10,\r\n    arrowButtonOffset: 20,\r\n    incDecButtonSize: 11,\r\n    incButtonOffset: 66,\r\n    decButtonOffset: 227,\r\n    sliderLineStartOffset: 88.5,\r\n    sliderLineEndOffset: 205.5,\r\n    sliderLength: 20,\r\n    sliderWidth: 8,\r\n    trackerGap: 4\r\n};\r\nvar OFFSET_X = 30.5;\r\nvar OFFSET_Y = 30.5;\r\nvar TOTAL_WIDTH = 61;\r\nvar TOTAL_HEIGHT = 274;\r\nvar COMMAND_TO_TYPE_MAP = {};\r\nCOMMAND_TO_TYPE_MAP[COMMAND_RESET] = ResetCommand;\r\nCOMMAND_TO_TYPE_MAP[COMMAND_MOVE_UP] = COMMAND_TO_TYPE_MAP[COMMAND_MOVE_RIGHT] = COMMAND_TO_TYPE_MAP[COMMAND_MOVE_DOWN] = COMMAND_TO_TYPE_MAP[COMMAND_MOVE_LEFT] = MoveCommand;\r\nCOMMAND_TO_TYPE_MAP[COMMAND_ZOOM_IN] = COMMAND_TO_TYPE_MAP[COMMAND_ZOOM_OUT] = ZoomCommand;\r\nCOMMAND_TO_TYPE_MAP[COMMAND_ZOOM_DRAG] = ZoomDragCommand;\r\n\r\nfunction ControlBar(parameters) {\r\n    var that = this;\r\n    that._params = parameters;\r\n    that._createElements(parameters.renderer, parameters.container, parameters.dataKey);\r\n    parameters.layoutControl.addItem(that);\r\n    that._subscribeToProjection(parameters.projection);\r\n    that._subscribeToTracker(parameters.tracker);\r\n    that._createCallbacks(parameters.projection)\r\n}\r\nControlBar.prototype = {\r\n    constructor: ControlBar,\r\n    _flags: 0,\r\n    dispose: function() {\r\n        var that = this;\r\n        that._params.layoutControl.removeItem(that);\r\n        that._root.linkRemove().linkOff();\r\n        that._offProjection();\r\n        that._offTracker();\r\n        that._params = that._root = that._offProjection = that._offTracker = that._callbacks = null\r\n    },\r\n    _subscribeToProjection: function(projection) {\r\n        var that = this;\r\n        that._offProjection = projection.on({\r\n            engine: function() {\r\n                that._update()\r\n            },\r\n            zoom: updateZoom,\r\n            \"max-zoom\": function() {\r\n                that._zoomPartition = projection.getZoomScalePartition();\r\n                that._sliderUnitLength = that._sliderLineLength / that._zoomPartition;\r\n                updateZoom()\r\n            }\r\n        });\r\n\r\n        function updateZoom() {\r\n            that._adjustZoom(projection.getScaledZoom())\r\n        }\r\n    },\r\n    _subscribeToTracker: function(tracker) {\r\n        var that = this;\r\n        var isActive = false;\r\n        that._offTracker = tracker.on({\r\n            start: function(arg) {\r\n                isActive = arg.data.name === EVENT_TARGET_TYPE;\r\n                if (isActive) {\r\n                    that._processStart(arg.data.index, arg)\r\n                }\r\n            },\r\n            move: function(arg) {\r\n                if (isActive) {\r\n                    that._processMove(arg.data.index, arg)\r\n                }\r\n            },\r\n            end: function() {\r\n                if (isActive) {\r\n                    that._processEnd();\r\n                    isActive = false\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _createCallbacks: function(projection) {\r\n        var that = this;\r\n        that._callbacks = {\r\n            reset: function(isCenter, isZoom) {\r\n                if (isCenter) {\r\n                    projection.setCenter(null)\r\n                }\r\n                if (isZoom) {\r\n                    projection.setZoom(null)\r\n                }\r\n            },\r\n            beginMove: function() {\r\n                projection.beginMoveCenter()\r\n            },\r\n            endMove: function() {\r\n                projection.endMoveCenter()\r\n            },\r\n            move: function(shift) {\r\n                projection.moveCenter(shift)\r\n            },\r\n            zoom: function(_zoom) {\r\n                projection.setScaledZoom(_zoom)\r\n            }\r\n        }\r\n    },\r\n    _createElements: function(renderer, container, dataKey) {\r\n        var that = this;\r\n        var buttonsGroups;\r\n        var trackersGroup;\r\n        that._root = renderer.g().attr({\r\n            \"class\": \"dxm-control-bar\"\r\n        }).linkOn(container, \"control-bar\");\r\n        buttonsGroups = that._buttonsGroup = renderer.g().attr({\r\n            \"class\": \"dxm-control-buttons\"\r\n        }).append(that._root);\r\n        trackersGroup = renderer.g().attr({\r\n            stroke: \"none\",\r\n            \"stroke-width\": 0,\r\n            fill: \"#000000\",\r\n            opacity: 1e-4\r\n        }).css({\r\n            cursor: \"pointer\"\r\n        }).append(that._root);\r\n        that._createButtons(renderer, dataKey, buttonsGroups);\r\n        that._createTrackers(renderer, dataKey, trackersGroup)\r\n    },\r\n    _createButtons: function(renderer, dataKey, group) {\r\n        var that = this;\r\n        var options = SIZE_OPTIONS;\r\n        var size = options.buttonSize / 2;\r\n        var offset1 = options.arrowButtonOffset - size;\r\n        var offset2 = options.arrowButtonOffset;\r\n        var incDecButtonSize = options.incDecButtonSize / 2;\r\n        var directionOptions = {\r\n            \"stroke-linecap\": \"square\",\r\n            fill: \"none\"\r\n        };\r\n        var line = \"line\";\r\n        renderer.circle(0, 0, options.bigCircleSize / 2).append(group);\r\n        renderer.circle(0, 0, size).attr({\r\n            fill: \"none\"\r\n        }).append(group);\r\n        renderer.path([-size, -offset1, 0, -offset2, size, -offset1], line).attr(directionOptions).append(group);\r\n        renderer.path([offset1, -size, offset2, 0, offset1, size], line).attr(directionOptions).append(group);\r\n        renderer.path([size, offset1, 0, offset2, -size, offset1], line).attr(directionOptions).append(group);\r\n        renderer.path([-offset1, size, -offset2, 0, -offset1, -size], line).attr(directionOptions).append(group);\r\n        renderer.circle(0, options.incButtonOffset, options.smallCircleSize / 2).append(group);\r\n        renderer.path([\r\n            [-incDecButtonSize, options.incButtonOffset, incDecButtonSize, options.incButtonOffset],\r\n            [0, options.incButtonOffset - incDecButtonSize, 0, options.incButtonOffset + incDecButtonSize]\r\n        ], \"area\").append(group);\r\n        renderer.circle(0, options.decButtonOffset, options.smallCircleSize / 2).append(group);\r\n        renderer.path([-incDecButtonSize, options.decButtonOffset, incDecButtonSize, options.decButtonOffset], \"area\").append(group);\r\n        that._zoomLine = renderer.path([], \"line\").append(group);\r\n        that._zoomDrag = renderer.rect(_floor(-options.sliderLength / 2), _floor(options.sliderLineEndOffset - options.sliderWidth / 2), options.sliderLength, options.sliderWidth).append(group);\r\n        that._sliderLineLength = options.sliderLineEndOffset - options.sliderLineStartOffset\r\n    },\r\n    _createTrackers: function(renderer, dataKey, group) {\r\n        var options = SIZE_OPTIONS;\r\n        var size = _round((options.arrowButtonOffset - options.trackerGap) / 2);\r\n        var offset1 = options.arrowButtonOffset - size;\r\n        var offset2 = _round(_sqrt(options.bigCircleSize * options.bigCircleSize / 4 - size * size));\r\n        var size2 = offset2 - offset1;\r\n        renderer.rect(-size, -size, 2 * size, 2 * size).data(dataKey, {\r\n            index: COMMAND_RESET,\r\n            name: EVENT_TARGET_TYPE\r\n        }).append(group);\r\n        renderer.rect(-size, -offset2, 2 * size, size2).data(dataKey, {\r\n            index: COMMAND_MOVE_UP,\r\n            name: EVENT_TARGET_TYPE\r\n        }).append(group);\r\n        renderer.rect(offset1, -size, size2, 2 * size).data(dataKey, {\r\n            index: COMMAND_MOVE_RIGHT,\r\n            name: EVENT_TARGET_TYPE\r\n        }).append(group);\r\n        renderer.rect(-size, offset1, 2 * size, size2).data(dataKey, {\r\n            index: COMMAND_MOVE_DOWN,\r\n            name: EVENT_TARGET_TYPE\r\n        }).append(group);\r\n        renderer.rect(-offset2, -size, size2, 2 * size).data(dataKey, {\r\n            index: COMMAND_MOVE_LEFT,\r\n            name: EVENT_TARGET_TYPE\r\n        }).append(group);\r\n        renderer.circle(0, options.incButtonOffset, options.smallCircleSize / 2).data(dataKey, {\r\n            index: COMMAND_ZOOM_IN,\r\n            name: EVENT_TARGET_TYPE\r\n        }).append(group);\r\n        renderer.circle(0, options.decButtonOffset, options.smallCircleSize / 2).data(dataKey, {\r\n            index: COMMAND_ZOOM_OUT,\r\n            name: EVENT_TARGET_TYPE\r\n        }).append(group);\r\n        renderer.rect(-2, options.sliderLineStartOffset - 2, 4, options.sliderLineEndOffset - options.sliderLineStartOffset + 4).css({\r\n            cursor: \"default\"\r\n        }).data(dataKey, {\r\n            index: COMMAND_ZOOM_DRAG_LINE,\r\n            name: EVENT_TARGET_TYPE\r\n        }).append(group);\r\n        this._zoomDragTracker = renderer.rect(-options.sliderLength / 2, options.sliderLineEndOffset - options.sliderWidth / 2, options.sliderLength, options.sliderWidth).data(dataKey, {\r\n            index: COMMAND_ZOOM_DRAG,\r\n            name: EVENT_TARGET_TYPE\r\n        }).append(group)\r\n    },\r\n    resize: function(size) {\r\n        if (this._isActive) {\r\n            this._root.attr({\r\n                visibility: null !== size ? null : \"hidden\"\r\n            })\r\n        }\r\n    },\r\n    getLayoutOptions: function() {\r\n        return this._isActive ? this._layoutOptions : null\r\n    },\r\n    locate: function(x, y) {\r\n        this._root.attr({\r\n            translateX: x + this._margin + OFFSET_X,\r\n            translateY: y + this._margin + OFFSET_Y\r\n        })\r\n    },\r\n    _update: function() {\r\n        var that = this;\r\n        that._isActive = that._isEnabled && that._flags && that._params.projection.isInvertible();\r\n        if (that._isActive) {\r\n            that._root.linkAppend()\r\n        } else {\r\n            that._root.linkRemove()\r\n        }\r\n        that._processEnd();\r\n        that.updateLayout()\r\n    },\r\n    setInteraction: function(interaction) {\r\n        var that = this;\r\n        if (_parseScalar(interaction.centeringEnabled, true)) {\r\n            that._flags |= FLAG_CENTERING\r\n        } else {\r\n            that._flags &= ~FLAG_CENTERING\r\n        }\r\n        if (_parseScalar(interaction.zoomingEnabled, true)) {\r\n            that._flags |= FLAG_ZOOMING\r\n        } else {\r\n            that._flags &= ~FLAG_ZOOMING\r\n        }\r\n        that._update()\r\n    },\r\n    setOptions: function(options) {\r\n        var that = this;\r\n        that._isEnabled = !!_parseScalar(options.enabled, true);\r\n        that._margin = options.margin || 0;\r\n        that._layoutOptions = {\r\n            width: 2 * that._margin + TOTAL_WIDTH,\r\n            height: 2 * that._margin + TOTAL_HEIGHT,\r\n            horizontalAlignment: parseHorizontalAlignment(options.horizontalAlignment, \"left\"),\r\n            verticalAlignment: parseVerticalAlignment(options.verticalAlignment, \"top\")\r\n        };\r\n        that._buttonsGroup.attr({\r\n            \"stroke-width\": options.borderWidth,\r\n            stroke: options.borderColor,\r\n            fill: options.color,\r\n            \"fill-opacity\": options.opacity\r\n        });\r\n        that._update()\r\n    },\r\n    _adjustZoom: function(zoom) {\r\n        var that = this;\r\n        var transform;\r\n        var y;\r\n        var start = SIZE_OPTIONS.sliderLineStartOffset;\r\n        var end = SIZE_OPTIONS.sliderLineEndOffset;\r\n        var h = SIZE_OPTIONS.sliderWidth;\r\n        that._zoomFactor = _max(_min(_round(zoom), that._zoomPartition), 0);\r\n        transform = {\r\n            translateY: -_round(that._zoomFactor * that._sliderUnitLength)\r\n        };\r\n        y = end - h / 2 + transform.translateY;\r\n        that._zoomLine.attr({\r\n            points: [\r\n                [0, start, 0, _max(start, y)],\r\n                [0, _min(end, y + h), 0, end]\r\n            ]\r\n        });\r\n        that._zoomDrag.attr(transform);\r\n        that._zoomDragTracker.attr(transform)\r\n    },\r\n    _applyZoom: function() {\r\n        this._callbacks.zoom(this._zoomFactor)\r\n    },\r\n    _processStart: function(command, arg) {\r\n        var commandType;\r\n        if (this._isActive) {\r\n            commandType = COMMAND_TO_TYPE_MAP[command];\r\n            this._command = commandType && commandType.flags & this._flags ? new commandType(this, command, arg) : null\r\n        }\r\n    },\r\n    _processMove: function(command, arg) {\r\n        this._command && this._command.update(command, arg)\r\n    },\r\n    _processEnd: function() {\r\n        this._command && this._command.finish();\r\n        this._command = null\r\n    }\r\n};\r\n\r\nfunction disposeCommand(command) {\r\n    delete command._owner;\r\n    command.update = function() {};\r\n    command.finish = function() {}\r\n}\r\n\r\nfunction ResetCommand(owner, command) {\r\n    this._owner = owner;\r\n    this._command = command\r\n}\r\nResetCommand.flags = FLAG_CENTERING | FLAG_ZOOMING;\r\nResetCommand.prototype.update = function(command) {\r\n    command !== this._command && disposeCommand(this)\r\n};\r\nResetCommand.prototype.finish = function() {\r\n    var flags = this._owner._flags;\r\n    this._owner._callbacks.reset(!!(flags & FLAG_CENTERING), !!(flags & FLAG_ZOOMING));\r\n    disposeCommand(this)\r\n};\r\n\r\nfunction MoveCommand(owner, command, arg) {\r\n    this._command = command;\r\n    var timeout = null;\r\n    var interval = 100;\r\n    var dx = 0;\r\n    var dy = 0;\r\n    switch (this._command) {\r\n        case COMMAND_MOVE_UP:\r\n            dy = -10;\r\n            break;\r\n        case COMMAND_MOVE_RIGHT:\r\n            dx = 10;\r\n            break;\r\n        case COMMAND_MOVE_DOWN:\r\n            dy = 10;\r\n            break;\r\n        case COMMAND_MOVE_LEFT:\r\n            dx = -10\r\n    }\r\n\r\n    function callback() {\r\n        owner._callbacks.move([dx, dy]);\r\n        timeout = setTimeout(callback, interval)\r\n    }\r\n    this._stop = function() {\r\n        clearTimeout(timeout);\r\n        owner._callbacks.endMove();\r\n        this._stop = owner = null;\r\n        return this\r\n    };\r\n    arg = null;\r\n    owner._callbacks.beginMove();\r\n    callback()\r\n}\r\nMoveCommand.flags = FLAG_CENTERING;\r\nMoveCommand.prototype.update = function(command) {\r\n    this._command !== command && this.finish()\r\n};\r\nMoveCommand.prototype.finish = function() {\r\n    disposeCommand(this._stop())\r\n};\r\n\r\nfunction ZoomCommand(owner, command) {\r\n    this._owner = owner;\r\n    this._command = command;\r\n    var timeout = null;\r\n    var interval = 150;\r\n    var dZoom = this._command === COMMAND_ZOOM_IN ? 1 : -1;\r\n\r\n    function callback() {\r\n        owner._adjustZoom(owner._zoomFactor + dZoom);\r\n        timeout = setTimeout(callback, interval)\r\n    }\r\n    this._stop = function() {\r\n        clearTimeout(timeout);\r\n        this._stop = owner = null;\r\n        return this\r\n    };\r\n    callback()\r\n}\r\nZoomCommand.flags = FLAG_ZOOMING;\r\nZoomCommand.prototype.update = function(command) {\r\n    this._command !== command && this.finish()\r\n};\r\nZoomCommand.prototype.finish = function() {\r\n    this._owner._applyZoom();\r\n    disposeCommand(this._stop())\r\n};\r\n\r\nfunction ZoomDragCommand(owner, command, arg) {\r\n    this._owner = owner;\r\n    this._zoomFactor = owner._zoomFactor;\r\n    this._pos = arg.y\r\n}\r\nZoomDragCommand.flags = FLAG_ZOOMING;\r\nZoomDragCommand.prototype.update = function(command, arg) {\r\n    var owner = this._owner;\r\n    owner._adjustZoom(this._zoomFactor + owner._zoomPartition * (this._pos - arg.y) / owner._sliderLineLength)\r\n};\r\nZoomDragCommand.prototype.finish = function() {\r\n    this._owner._applyZoom();\r\n    disposeCommand(this)\r\n};\r\nexports.ControlBar = ControlBar;\r\n"]},"metadata":{},"sourceType":"module"}