{"ast":null,"code":"'use strict';\n/* global WorkerGlobalScope self */\n\nvar _require = require('./log'),\n    log = _require.log;\n\nfunction reloadApp(_ref, _ref2) {\n  var hotReload = _ref.hotReload,\n      hot = _ref.hot,\n      liveReload = _ref.liveReload;\n  var isUnloading = _ref2.isUnloading,\n      currentHash = _ref2.currentHash;\n\n  if (isUnloading || !hotReload) {\n    return;\n  }\n\n  if (hot) {\n    log.info('[WDS] App hot update...');\n\n    var hotEmitter = require('webpack/hot/emitter');\n\n    hotEmitter.emit('webpackHotUpdate', currentHash);\n\n    if (typeof self !== 'undefined' && self.window) {\n      // broadcast update to window\n      self.postMessage(\"webpackHotUpdate\".concat(currentHash), '*');\n    }\n  } // allow refreshing the page only if liveReload isn't disabled\n  else if (liveReload) {\n      var rootWindow = self; // use parent window for reload (in case we're in an iframe with no valid src)\n\n      var intervalId = self.setInterval(function () {\n        if (rootWindow.location.protocol !== 'about:') {\n          // reload immediately if protocol is valid\n          applyReload(rootWindow, intervalId);\n        } else {\n          rootWindow = rootWindow.parent;\n\n          if (rootWindow.parent === rootWindow) {\n            // if parent equals current window we've reached the root which would continue forever, so trigger a reload anyways\n            applyReload(rootWindow, intervalId);\n          }\n        }\n      });\n    }\n\n  function applyReload(rootWindow, intervalId) {\n    clearInterval(intervalId);\n    log.info('[WDS] App updated. Reloading...');\n    rootWindow.location.reload();\n  }\n}\n\nmodule.exports = reloadApp;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/webpack-dev-server/client/utils/reloadApp.js"],"names":["_require","require","log","hotReload","_ref","hot","liveReload","isUnloading","_ref2","currentHash","hotEmitter","self","rootWindow","intervalId","applyReload","clearInterval","module"],"mappings":"AAAA;AACA;;AAEA,IAAIA,QAAQ,GAAGC,OAAO,CAAtB,OAAsB,CAAtB;AAAA,IACIC,GAAG,GAAGF,QAAQ,CADlB,GAAA;;AAGA,SAAA,SAAA,CAAA,IAAA,EAAA,KAAA,EAAgC;AAC9B,MAAIG,SAAS,GAAGC,IAAI,CAApB,SAAA;AAAA,MACIC,GAAG,GAAGD,IAAI,CADd,GAAA;AAAA,MAEIE,UAAU,GAAGF,IAAI,CAFrB,UAAA;AAGA,MAAIG,WAAW,GAAGC,KAAK,CAAvB,WAAA;AAAA,MACIC,WAAW,GAAGD,KAAK,CADvB,WAAA;;AAGA,MAAID,WAAW,IAAI,CAAnB,SAAA,EAA+B;AAC7B;AACD;;AAED,MAAA,GAAA,EAAS;AACPL,IAAAA,GAAG,CAAHA,IAAAA,CAAAA,yBAAAA;;AAEA,QAAIQ,UAAU,GAAGT,OAAO,CAAxB,qBAAwB,CAAxB;;AAEAS,IAAAA,UAAU,CAAVA,IAAAA,CAAAA,kBAAAA,EAAAA,WAAAA;;AAEA,QAAI,OAAA,IAAA,KAAA,WAAA,IAA+BC,IAAI,CAAvC,MAAA,EAAgD;AAC9C;AACAA,MAAAA,IAAI,CAAJA,WAAAA,CAAiB,mBAAA,MAAA,CAAjBA,WAAiB,CAAjBA,EAAAA,GAAAA;AACD;AAVH,GAAA,CAWE;AAXF,OAYK,IAAA,UAAA,EAAgB;AACjB,UAAIC,UAAU,GADG,IACjB,CADiB,CACM;;AAEvB,UAAIC,UAAU,GAAG,IAAI,CAAJ,WAAA,CAAiB,YAAY;AAC5C,YAAID,UAAU,CAAVA,QAAAA,CAAAA,QAAAA,KAAJ,QAAA,EAA+C;AAC7C;AACAE,UAAAA,WAAW,CAAA,UAAA,EAAXA,UAAW,CAAXA;AAFF,SAAA,MAGO;AACLF,UAAAA,UAAU,GAAGA,UAAU,CAAvBA,MAAAA;;AAEA,cAAIA,UAAU,CAAVA,MAAAA,KAAJ,UAAA,EAAsC;AACpC;AACAE,YAAAA,WAAW,CAAA,UAAA,EAAXA,UAAW,CAAXA;AACD;AACF;AAXH,OAAiB,CAAjB;AAaD;;AAEH,WAAA,WAAA,CAAA,UAAA,EAAA,UAAA,EAA6C;AAC3CC,IAAAA,aAAa,CAAbA,UAAa,CAAbA;AACAb,IAAAA,GAAG,CAAHA,IAAAA,CAAAA,iCAAAA;AACAU,IAAAA,UAAU,CAAVA,QAAAA,CAAAA,MAAAA;AACD;AACF;;AAEDI,MAAM,CAANA,OAAAA,GAAAA,SAAAA","sourcesContent":["'use strict';\r\n/* global WorkerGlobalScope self */\r\n\r\nvar _require = require('./log'),\r\n    log = _require.log;\r\n\r\nfunction reloadApp(_ref, _ref2) {\r\n  var hotReload = _ref.hotReload,\r\n      hot = _ref.hot,\r\n      liveReload = _ref.liveReload;\r\n  var isUnloading = _ref2.isUnloading,\r\n      currentHash = _ref2.currentHash;\r\n\r\n  if (isUnloading || !hotReload) {\r\n    return;\r\n  }\r\n\r\n  if (hot) {\r\n    log.info('[WDS] App hot update...');\r\n\r\n    var hotEmitter = require('webpack/hot/emitter');\r\n\r\n    hotEmitter.emit('webpackHotUpdate', currentHash);\r\n\r\n    if (typeof self !== 'undefined' && self.window) {\r\n      // broadcast update to window\r\n      self.postMessage(\"webpackHotUpdate\".concat(currentHash), '*');\r\n    }\r\n  } // allow refreshing the page only if liveReload isn't disabled\r\n  else if (liveReload) {\r\n      var rootWindow = self; // use parent window for reload (in case we're in an iframe with no valid src)\r\n\r\n      var intervalId = self.setInterval(function () {\r\n        if (rootWindow.location.protocol !== 'about:') {\r\n          // reload immediately if protocol is valid\r\n          applyReload(rootWindow, intervalId);\r\n        } else {\r\n          rootWindow = rootWindow.parent;\r\n\r\n          if (rootWindow.parent === rootWindow) {\r\n            // if parent equals current window we've reached the root which would continue forever, so trigger a reload anyways\r\n            applyReload(rootWindow, intervalId);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n  function applyReload(rootWindow, intervalId) {\r\n    clearInterval(intervalId);\r\n    log.info('[WDS] App updated. Reloading...');\r\n    rootWindow.location.reload();\r\n  }\r\n}\r\n\r\nmodule.exports = reloadApp;"]},"metadata":{},"sourceType":"module"}