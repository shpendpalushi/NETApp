{"ast":null,"code":"/**\r\n * DevExtreme (ui/form/ui.form.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _guid = require(\"../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _string = require(\"../../core/utils/string\");\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _ui = require(\"../widget/ui.widget\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _editor = require(\"../editor/editor\");\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _validation_engine = require(\"../validation_engine\");\n\nvar _validation_engine2 = _interopRequireDefault(_validation_engine);\n\nvar _uiForm = require(\"./ui.form.layout_manager\");\n\nvar _uiForm2 = _interopRequireDefault(_uiForm);\n\nvar _uiForm3 = require(\"./ui.form.items_runtime_info\");\n\nvar _uiForm4 = _interopRequireDefault(_uiForm3);\n\nvar _tab_panel = require(\"../tab_panel\");\n\nvar _tab_panel2 = _interopRequireDefault(_tab_panel);\n\nvar _ui3 = require(\"../scroll_view/ui.scrollable\");\n\nvar _ui4 = _interopRequireDefault(_ui3);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _uiForm5 = require(\"./ui.form.item_options_actions\");\n\nvar _uiForm6 = _interopRequireDefault(_uiForm5);\n\nvar _uiForm7 = require(\"./ui.form.utils\");\n\nrequire(\"../validation_summary\");\n\nrequire(\"../validation_group\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || \"[object Arguments]\" === Object.prototype.toString.call(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar FORM_CLASS = \"dx-form\";\nvar FIELD_ITEM_CLASS = \"dx-field-item\";\nvar FIELD_ITEM_LABEL_TEXT_CLASS = \"dx-field-item-label-text\";\nvar FORM_GROUP_CLASS = \"dx-form-group\";\nvar FORM_GROUP_CONTENT_CLASS = \"dx-form-group-content\";\nvar FORM_GROUP_WITH_CAPTION_CLASS = \"dx-form-group-with-caption\";\nvar FORM_GROUP_CAPTION_CLASS = \"dx-form-group-caption\";\nvar HIDDEN_LABEL_CLASS = \"dx-layout-manager-hidden-label\";\nvar FIELD_ITEM_LABEL_CLASS = \"dx-field-item-label\";\nvar FIELD_ITEM_LABEL_CONTENT_CLASS = \"dx-field-item-label-content\";\nvar FIELD_ITEM_TAB_CLASS = \"dx-field-item-tab\";\nvar FORM_FIELD_ITEM_COL_CLASS = \"dx-col-\";\nvar GROUP_COL_COUNT_CLASS = \"dx-group-colcount-\";\nvar FIELD_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\nvar FORM_VALIDATION_SUMMARY = \"dx-form-validation-summary\";\nvar WIDGET_CLASS = \"dx-widget\";\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\nvar ITEM_OPTIONS_FOR_VALIDATION_UPDATING = [\"items\", \"isRequired\", \"validationRules\", \"visible\"];\n\nvar Form = _ui2.default.inherit({\n  _init: function _init() {\n    this.callBase();\n    this._cachedColCountOptions = [];\n    this._itemsRunTimeInfo = new _uiForm4.default();\n    this._groupsColCount = [];\n\n    this._attachSyncSubscriptions();\n  },\n  _initOptions: function _initOptions(options) {\n    if (!(\"screenByWidth\" in options)) {\n      options.screenByWidth = _window.defaultScreenFactorFunc;\n    }\n\n    this.callBase(options);\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      formID: \"dx-\" + new _guid2.default(),\n      formData: {},\n      colCount: 1,\n      screenByWidth: null,\n      colCountByScreen: void 0,\n      labelLocation: \"left\",\n      readOnly: false,\n      onFieldDataChanged: null,\n      customizeItem: null,\n      onEditorEnterKey: null,\n      minColWidth: 200,\n      alignItemLabels: true,\n      alignItemLabelsInAllGroups: true,\n      showColonAfterLabel: true,\n      showRequiredMark: true,\n      showOptionalMark: false,\n      requiredMark: \"*\",\n      optionalMark: _message2.default.format(\"dxForm-optionalMark\"),\n      requiredMessage: _message2.default.getFormatter(\"dxForm-requiredMessage\"),\n      showValidationSummary: false,\n      items: void 0,\n      scrollingEnabled: false,\n      validationGroup: void 0,\n      stylingMode: void 0\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return _themes2.default.isMaterial();\n      },\n      options: {\n        showColonAfterLabel: false,\n        labelLocation: \"top\"\n      }\n    }]);\n  },\n  _setOptionsByReference: function _setOptionsByReference() {\n    this.callBase();\n    (0, _extend.extend)(this._optionsByReference, {\n      formData: true,\n      validationGroup: true\n    });\n  },\n  _getColCount: function _getColCount($element) {\n    var index = 0;\n    var isColsExist = true;\n    var $cols;\n\n    while (isColsExist) {\n      $cols = $element.find(\".\" + FORM_FIELD_ITEM_COL_CLASS + index);\n\n      if (!$cols.length) {\n        isColsExist = false;\n      } else {\n        index++;\n      }\n    }\n\n    return index;\n  },\n  _createHiddenElement: function _createHiddenElement(rootLayoutManager) {\n    this._$hiddenElement = (0, _renderer2.default)(\"<div>\").addClass(WIDGET_CLASS).addClass(HIDDEN_LABEL_CLASS).appendTo(\"body\");\n\n    var $hiddenLabel = rootLayoutManager._renderLabel({\n      text: \" \",\n      location: this._labelLocation()\n    }).appendTo(this._$hiddenElement);\n\n    this._hiddenLabelText = $hiddenLabel.find(\".\" + FIELD_ITEM_LABEL_TEXT_CLASS)[0];\n  },\n  _removeHiddenElement: function _removeHiddenElement() {\n    this._$hiddenElement.remove();\n\n    this._hiddenLabelText = null;\n  },\n  _getLabelWidthByText: function _getLabelWidthByText(text) {\n    this._hiddenLabelText.innerHTML = text;\n    return this._hiddenLabelText.offsetWidth;\n  },\n  _getLabelsSelectorByCol: function _getLabelsSelectorByCol(index, options) {\n    options = options || {};\n    var fieldItemClass = options.inOneColumn ? FIELD_ITEM_CLASS : FORM_FIELD_ITEM_COL_CLASS + index;\n    var cssExcludeTabbedSelector = options.excludeTabbed ? \":not(.\" + FIELD_ITEM_TAB_CLASS + \")\" : \"\";\n    var childLabelContentSelector = \"> .\" + FIELD_ITEM_LABEL_CLASS + \" > .\" + FIELD_ITEM_LABEL_CONTENT_CLASS;\n    return \".\" + fieldItemClass + cssExcludeTabbedSelector + childLabelContentSelector;\n  },\n  _getLabelText: function _getLabelText(labelText) {\n    var length = labelText.children.length;\n    var child;\n    var result = \"\";\n    var i;\n\n    for (i = 0; i < length; i++) {\n      child = labelText.children[i];\n      result += !(0, _string.isEmpty)(child.innerText) ? child.innerText : child.innerHTML;\n    }\n\n    return result;\n  },\n  _applyLabelsWidthByCol: function _applyLabelsWidthByCol($container, index, options) {\n    var $labelTexts = $container.find(this._getLabelsSelectorByCol(index, options));\n    var $labelTextsLength = $labelTexts.length;\n    var labelWidth;\n    var i;\n    var maxWidth = 0;\n\n    for (i = 0; i < $labelTextsLength; i++) {\n      labelWidth = this._getLabelWidthByText(this._getLabelText($labelTexts[i]));\n\n      if (labelWidth > maxWidth) {\n        maxWidth = labelWidth;\n      }\n    }\n\n    for (i = 0; i < $labelTextsLength; i++) {\n      $labelTexts[i].style.width = maxWidth + \"px\";\n    }\n  },\n  _applyLabelsWidth: function _applyLabelsWidth($container, excludeTabbed, inOneColumn, colCount) {\n    colCount = inOneColumn ? 1 : colCount || this._getColCount($container);\n    var applyLabelsOptions = {\n      excludeTabbed: excludeTabbed,\n      inOneColumn: inOneColumn\n    };\n    var i;\n\n    for (i = 0; i < colCount; i++) {\n      this._applyLabelsWidthByCol($container, i, applyLabelsOptions);\n    }\n  },\n  _getGroupElementsInColumn: function _getGroupElementsInColumn($container, columnIndex, colCount) {\n    var cssColCountSelector = (0, _type.isDefined)(colCount) ? \".\" + GROUP_COL_COUNT_CLASS + colCount : \"\";\n    var groupSelector = \".\" + FORM_FIELD_ITEM_COL_CLASS + columnIndex + \" > .\" + FIELD_ITEM_CONTENT_CLASS + \" > .\" + FORM_GROUP_CLASS + cssColCountSelector;\n    return $container.find(groupSelector);\n  },\n  _applyLabelsWidthWithGroups: function _applyLabelsWidthWithGroups($container, colCount, excludeTabbed) {\n    var alignItemLabelsInAllGroups = this.option(\"alignItemLabelsInAllGroups\");\n\n    if (alignItemLabelsInAllGroups) {\n      this._applyLabelsWidthWithNestedGroups($container, colCount, excludeTabbed);\n    } else {\n      var $groups = this.$element().find(\".\" + FORM_GROUP_CLASS);\n      var i;\n\n      for (i = 0; i < $groups.length; i++) {\n        this._applyLabelsWidth($groups.eq(i), excludeTabbed);\n      }\n    }\n  },\n  _applyLabelsWidthWithNestedGroups: function _applyLabelsWidthWithNestedGroups($container, colCount, excludeTabbed) {\n    var applyLabelsOptions = {\n      excludeTabbed: excludeTabbed\n    };\n    var colIndex;\n    var groupsColIndex;\n    var groupColIndex;\n    var $groupsByCol;\n\n    for (colIndex = 0; colIndex < colCount; colIndex++) {\n      $groupsByCol = this._getGroupElementsInColumn($container, colIndex);\n\n      this._applyLabelsWidthByCol($groupsByCol, 0, applyLabelsOptions);\n\n      for (groupsColIndex = 0; groupsColIndex < this._groupsColCount.length; groupsColIndex++) {\n        $groupsByCol = this._getGroupElementsInColumn($container, colIndex, this._groupsColCount[groupsColIndex]);\n\n        var groupColCount = this._getColCount($groupsByCol);\n\n        for (groupColIndex = 1; groupColIndex < groupColCount; groupColIndex++) {\n          this._applyLabelsWidthByCol($groupsByCol, groupColIndex, applyLabelsOptions);\n        }\n      }\n    }\n  },\n  _labelLocation: function _labelLocation() {\n    return this.option(\"labelLocation\");\n  },\n  _alignLabelsInColumn: function _alignLabelsInColumn(_ref) {\n    var layoutManager = _ref.layoutManager,\n        inOneColumn = _ref.inOneColumn,\n        $container = _ref.$container,\n        excludeTabbed = _ref.excludeTabbed,\n        items = _ref.items;\n\n    if (!(0, _window.hasWindow)() || \"top\" === this._labelLocation()) {\n      return;\n    }\n\n    this._createHiddenElement(layoutManager);\n\n    if (inOneColumn) {\n      this._applyLabelsWidth($container, excludeTabbed, true);\n    } else {\n      if (this._checkGrouping(items)) {\n        this._applyLabelsWidthWithGroups($container, layoutManager._getColCount(), excludeTabbed);\n      } else {\n        this._applyLabelsWidth($container, excludeTabbed, false, layoutManager._getColCount());\n      }\n    }\n\n    this._removeHiddenElement();\n  },\n  _prepareFormData: function _prepareFormData() {\n    if (!(0, _type.isDefined)(this.option(\"formData\"))) {\n      this.option(\"formData\", {});\n    }\n  },\n  _initMarkup: function _initMarkup() {\n    _validation_engine2.default.addGroup(this._getValidationGroup());\n\n    this._clearCachedInstances();\n\n    this._prepareFormData();\n\n    this.$element().addClass(FORM_CLASS);\n    this.callBase();\n    this.setAria(\"role\", \"form\", this.$element());\n\n    if (this.option(\"scrollingEnabled\")) {\n      this._renderScrollable();\n    }\n\n    this._renderLayout();\n\n    this._renderValidationSummary();\n\n    this._lastMarkupScreenFactor = this._targetScreenFactor || this._getCurrentScreenFactor();\n  },\n  _getCurrentScreenFactor: function _getCurrentScreenFactor() {\n    return (0, _window.hasWindow)() ? (0, _window.getCurrentScreenFactor)(this.option(\"screenByWidth\")) : \"lg\";\n  },\n  _clearCachedInstances: function _clearCachedInstances() {\n    this._itemsRunTimeInfo.clear();\n\n    this._cachedLayoutManagers = [];\n  },\n  _alignLabels: function _alignLabels(layoutManager, inOneColumn) {\n    this._alignLabelsInColumn({\n      $container: this.$element(),\n      layoutManager: layoutManager,\n      excludeTabbed: true,\n      items: this.option(\"items\"),\n      inOneColumn: inOneColumn\n    });\n  },\n  _clean: function _clean() {\n    this.callBase();\n    this._groupsColCount = [];\n    this._cachedColCountOptions = [];\n    this._lastMarkupScreenFactor = void 0;\n  },\n  _renderScrollable: function _renderScrollable() {\n    var useNativeScrolling = this.option(\"useNativeScrolling\");\n    this._scrollable = new _ui4.default(this.$element(), {\n      useNative: !!useNativeScrolling,\n      useSimulatedScrollbar: !useNativeScrolling,\n      useKeyboard: false,\n      direction: \"both\",\n      bounceEnabled: false\n    });\n  },\n  _getContent: function _getContent() {\n    return this.option(\"scrollingEnabled\") ? this._scrollable.$content() : this.$element();\n  },\n  _renderValidationSummary: function _renderValidationSummary() {\n    var $validationSummary = this.$element().find(\".\" + FORM_VALIDATION_SUMMARY);\n\n    if ($validationSummary.length > 0) {\n      $validationSummary.remove();\n    }\n\n    if (this.option(\"showValidationSummary\")) {\n      var _$validationSummary = (0, _renderer2.default)(\"<div>\").addClass(FORM_VALIDATION_SUMMARY).appendTo(this._getContent());\n\n      this._validationSummary = _$validationSummary.dxValidationSummary({\n        validationGroup: this._getValidationGroup()\n      }).dxValidationSummary(\"instance\");\n    }\n  },\n  _prepareItems: function _prepareItems(items, parentIsTabbedItem, currentPath, isTabs) {\n    if (items) {\n      var result = [];\n\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        var path = (0, _uiForm7.concatPaths)(currentPath, (0, _uiForm7.createItemPathByIndex)(i, isTabs));\n\n        var guid = this._itemsRunTimeInfo.add({\n          item: item,\n          itemIndex: i,\n          path: path\n        });\n\n        if ((0, _type.isString)(item)) {\n          item = {\n            dataField: item\n          };\n        }\n\n        if ((0, _type.isObject)(item)) {\n          var itemCopy = (0, _extend.extend)({}, item);\n          itemCopy.guid = guid;\n\n          this._tryPrepareGroupItem(itemCopy);\n\n          this._tryPrepareTabbedItem(itemCopy, path);\n\n          this._tryPrepareItemTemplate(itemCopy);\n\n          if (parentIsTabbedItem) {\n            itemCopy.cssItemClass = FIELD_ITEM_TAB_CLASS;\n          }\n\n          if (itemCopy.items) {\n            itemCopy.items = this._prepareItems(itemCopy.items, parentIsTabbedItem, path);\n          }\n\n          result.push(itemCopy);\n        } else {\n          result.push(item);\n        }\n      }\n\n      return result;\n    }\n  },\n  _tryPrepareGroupItem: function _tryPrepareGroupItem(item) {\n    if (\"group\" === item.itemType) {\n      item.alignItemLabels = (0, _common.ensureDefined)(item.alignItemLabels, true);\n\n      if (item.template) {\n        item.groupContentTemplate = this._getTemplate(item.template);\n      }\n\n      item.template = this._itemGroupTemplate.bind(this, item);\n    }\n  },\n  _tryPrepareTabbedItem: function _tryPrepareTabbedItem(item, path) {\n    if (\"tabbed\" === item.itemType) {\n      item.template = this._itemTabbedTemplate.bind(this, item);\n      item.tabs = this._prepareItems(item.tabs, true, path, true);\n    }\n  },\n  _tryPrepareItemTemplate: function _tryPrepareItemTemplate(item) {\n    if (item.template) {\n      item.template = this._getTemplate(item.template);\n    }\n  },\n  _checkGrouping: function _checkGrouping(items) {\n    if (items) {\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n\n        if (\"group\" === item.itemType) {\n          return true;\n        }\n      }\n    }\n  },\n  _renderLayout: function _renderLayout() {\n    var that = this;\n    var items = that.option(\"items\");\n\n    var $content = that._getContent();\n\n    items = that._prepareItems(items);\n    that._rootLayoutManager = that._renderLayoutManager(items, $content, {\n      colCount: that.option(\"colCount\"),\n      alignItemLabels: that.option(\"alignItemLabels\"),\n      screenByWidth: this.option(\"screenByWidth\"),\n      colCountByScreen: this.option(\"colCountByScreen\"),\n      onLayoutChanged: function onLayoutChanged(inOneColumn) {\n        that._alignLabels.bind(that)(that._rootLayoutManager, inOneColumn);\n      },\n      onContentReady: function onContentReady(e) {\n        that._alignLabels(e.component, e.component.isSingleColumnMode());\n      }\n    });\n  },\n  _tryGetItemsForTemplate: function _tryGetItemsForTemplate(item) {\n    return item.items || [];\n  },\n  _itemTabbedTemplate: function _itemTabbedTemplate(item, e, $container) {\n    var _this = this;\n\n    var $tabPanel = (0, _renderer2.default)(\"<div>\").appendTo($container);\n    var tabPanelOptions = (0, _extend.extend)({}, item.tabPanelOptions, {\n      dataSource: item.tabs,\n      onItemRendered: function onItemRendered(args) {\n        return (0, _dom.triggerShownEvent)(args.itemElement);\n      },\n      itemTemplate: function itemTemplate(itemData, e, container) {\n        var $container = (0, _renderer2.default)(container);\n        var alignItemLabels = (0, _common.ensureDefined)(itemData.alignItemLabels, true);\n\n        var layoutManager = _this._renderLayoutManager(_this._tryGetItemsForTemplate(itemData), $container, {\n          colCount: itemData.colCount,\n          alignItemLabels: alignItemLabels,\n          screenByWidth: _this.option(\"screenByWidth\"),\n          colCountByScreen: itemData.colCountByScreen,\n          cssItemClass: itemData.cssItemClass,\n          onLayoutChanged: function onLayoutChanged(inOneColumn) {\n            _this._alignLabelsInColumn({\n              $container: $container,\n              layoutManager: layoutManager,\n              items: itemData.items,\n              inOneColumn: inOneColumn\n            });\n          }\n        });\n\n        if (_this._itemsRunTimeInfo) {\n          _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(itemData.guid, {\n            layoutManager: layoutManager\n          });\n        }\n\n        if (alignItemLabels) {\n          _this._alignLabelsInColumn({\n            $container: $container,\n            layoutManager: layoutManager,\n            items: itemData.items,\n            inOneColumn: layoutManager.isSingleColumnMode()\n          });\n        }\n      }\n    });\n\n    var tryUpdateTabPanelInstance = function tryUpdateTabPanelInstance(items, instance) {\n      if (Array.isArray(items)) {\n        items.forEach(function (item) {\n          return _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\n            widgetInstance: instance\n          });\n        });\n      }\n    };\n\n    var tabPanel = this._createComponent($tabPanel, _tab_panel2.default, tabPanelOptions);\n\n    tabPanel.on(\"optionChanged\", function (e) {\n      if (\"dataSource\" === e.fullName) {\n        tryUpdateTabPanelInstance(e.value, e.component);\n      }\n    });\n    tryUpdateTabPanelInstance([{\n      guid: item.guid\n    }].concat(_toConsumableArray(item.tabs)), tabPanel);\n  },\n  _itemGroupTemplate: function _itemGroupTemplate(item, e, $container) {\n    var $group = (0, _renderer2.default)(\"<div>\").toggleClass(FORM_GROUP_WITH_CAPTION_CLASS, (0, _type.isDefined)(item.caption) && item.caption.length).addClass(FORM_GROUP_CLASS).appendTo($container);\n    var $groupContent;\n    var colCount;\n    var layoutManager;\n\n    if (item.caption) {\n      (0, _renderer2.default)(\"<span>\").addClass(FORM_GROUP_CAPTION_CLASS).text(item.caption).appendTo($group);\n    }\n\n    $groupContent = (0, _renderer2.default)(\"<div>\").addClass(FORM_GROUP_CONTENT_CLASS).appendTo($group);\n\n    if (item.groupContentTemplate) {\n      var data = {\n        formData: this.option(\"formData\"),\n        component: this\n      };\n      item.groupContentTemplate.render({\n        model: data,\n        container: (0, _dom.getPublicElement)($groupContent)\n      });\n    } else {\n      layoutManager = this._renderLayoutManager(this._tryGetItemsForTemplate(item), $groupContent, {\n        colCount: item.colCount,\n        colCountByScreen: item.colCountByScreen,\n        alignItemLabels: item.alignItemLabels,\n        cssItemClass: item.cssItemClass\n      });\n      this._itemsRunTimeInfo && this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\n        layoutManager: layoutManager\n      });\n      colCount = layoutManager._getColCount();\n\n      if ((0, _array.inArray)(colCount, this._groupsColCount) === -1) {\n        this._groupsColCount.push(colCount);\n      }\n\n      $group.addClass(GROUP_COL_COUNT_CLASS + colCount);\n    }\n  },\n  _renderLayoutManager: function _renderLayoutManager(items, $rootElement, options) {\n    var $element = (0, _renderer2.default)(\"<div>\");\n    var that = this;\n    var instance;\n\n    var config = that._getLayoutManagerConfig(items, options);\n\n    var baseColCountByScreen = {\n      lg: options.colCount,\n      md: options.colCount,\n      sm: options.colCount,\n      xs: 1\n    };\n\n    that._cachedColCountOptions.push({\n      colCountByScreen: (0, _extend.extend)(baseColCountByScreen, options.colCountByScreen)\n    });\n\n    $element.appendTo($rootElement);\n    instance = that._createComponent($element, \"dxLayoutManager\", config);\n    instance.on(\"autoColCountChanged\", function () {\n      that._refresh();\n    });\n\n    that._cachedLayoutManagers.push(instance);\n\n    return instance;\n  },\n  _getValidationGroup: function _getValidationGroup() {\n    return this.option(\"validationGroup\") || this;\n  },\n  _getLayoutManagerConfig: function _getLayoutManagerConfig(items, options) {\n    var _this2 = this;\n\n    var baseConfig = {\n      form: this,\n      validationGroup: this._getValidationGroup(),\n      showRequiredMark: this.option(\"showRequiredMark\"),\n      showOptionalMark: this.option(\"showOptionalMark\"),\n      requiredMark: this.option(\"requiredMark\"),\n      optionalMark: this.option(\"optionalMark\"),\n      requiredMessage: this.option(\"requiredMessage\"),\n      screenByWidth: this.option(\"screenByWidth\"),\n      layoutData: this.option(\"formData\"),\n      labelLocation: this.option(\"labelLocation\"),\n      customizeItem: this.option(\"customizeItem\"),\n      minColWidth: this.option(\"minColWidth\"),\n      showColonAfterLabel: this.option(\"showColonAfterLabel\"),\n      onEditorEnterKey: this.option(\"onEditorEnterKey\"),\n      onFieldDataChanged: function onFieldDataChanged(args) {\n        if (!_this2._isDataUpdating) {\n          _this2._triggerOnFieldDataChanged(args);\n        }\n      },\n      validationBoundary: this.option(\"scrollingEnabled\") ? this.$element() : void 0\n    };\n    return (0, _extend.extend)(baseConfig, {\n      items: items,\n      onContentReady: function onContentReady(args) {\n        _this2._itemsRunTimeInfo.addItemsOrExtendFrom(args.component._itemsRunTimeInfo);\n\n        options.onContentReady && options.onContentReady(args);\n      },\n      onDisposing: function onDisposing(_ref2) {\n        var component = _ref2.component;\n        var nestedItemsRunTimeInfo = component.getItemsRunTimeInfo();\n\n        _this2._itemsRunTimeInfo.removeItemsByItems(nestedItemsRunTimeInfo);\n      },\n      colCount: options.colCount,\n      alignItemLabels: options.alignItemLabels,\n      cssItemClass: options.cssItemClass,\n      colCountByScreen: options.colCountByScreen,\n      onLayoutChanged: options.onLayoutChanged,\n      width: options.width\n    });\n  },\n  _createComponent: function _createComponent($element, type, config) {\n    var that = this;\n    config = config || {};\n\n    that._extendConfig(config, {\n      readOnly: that.option(\"readOnly\")\n    });\n\n    return that.callBase($element, type, config);\n  },\n  _attachSyncSubscriptions: function _attachSyncSubscriptions() {\n    var that = this;\n    that.on(\"optionChanged\", function (args) {\n      var optionFullName = args.fullName;\n\n      if (\"formData\" === optionFullName) {\n        if (!(0, _type.isDefined)(args.value)) {\n          that._options.formData = args.value = {};\n        }\n\n        that._triggerOnFieldDataChangedByDataSet(args.value);\n      }\n\n      if (that._cachedLayoutManagers.length) {\n        (0, _iterator.each)(that._cachedLayoutManagers, function (index, layoutManager) {\n          if (\"formData\" === optionFullName) {\n            that._isDataUpdating = true;\n            layoutManager.option(\"layoutData\", args.value);\n            that._isDataUpdating = false;\n          }\n\n          if (\"readOnly\" === args.name || \"disabled\" === args.name) {\n            layoutManager.option(optionFullName, args.value);\n          }\n        });\n      }\n    });\n  },\n  _optionChanged: function _optionChanged(args) {\n    var rootNameOfComplexOption = this._getRootLevelOfExpectedComplexOption(args.fullName, [\"formData\", \"items\"]);\n\n    if (rootNameOfComplexOption) {\n      this._customHandlerOfComplexOption(args, rootNameOfComplexOption);\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"formData\":\n        if (!this.option(\"items\")) {\n          this._invalidate();\n        } else {\n          if ((0, _type.isEmptyObject)(args.value)) {\n            this._resetValues();\n          }\n        }\n\n        break;\n\n      case \"items\":\n      case \"colCount\":\n      case \"onFieldDataChanged\":\n      case \"onEditorEnterKey\":\n      case \"labelLocation\":\n      case \"alignItemLabels\":\n      case \"showColonAfterLabel\":\n      case \"customizeItem\":\n      case \"alignItemLabelsInAllGroups\":\n      case \"showRequiredMark\":\n      case \"showOptionalMark\":\n      case \"requiredMark\":\n      case \"optionalMark\":\n      case \"requiredMessage\":\n      case \"scrollingEnabled\":\n      case \"formID\":\n      case \"colCountByScreen\":\n      case \"screenByWidth\":\n      case \"stylingMode\":\n        this._invalidate();\n\n        break;\n\n      case \"showValidationSummary\":\n        this._renderValidationSummary();\n\n        break;\n\n      case \"minColWidth\":\n        if (\"auto\" === this.option(\"colCount\")) {\n          this._invalidate();\n        }\n\n        break;\n\n      case \"readOnly\":\n        break;\n\n      case \"width\":\n        this.callBase(args);\n\n        this._rootLayoutManager.option(args.name, args.value);\n\n        this._alignLabels(this._rootLayoutManager, this._rootLayoutManager.isSingleColumnMode());\n\n        break;\n\n      case \"visible\":\n        this.callBase(args);\n\n        if (args.value) {\n          (0, _dom.triggerShownEvent)(this.$element());\n        }\n\n        break;\n\n      case \"validationGroup\":\n        _validation_engine2.default.removeGroup(args.previousValue || this);\n\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _getRootLevelOfExpectedComplexOption: function _getRootLevelOfExpectedComplexOption(fullOptionName, expectedRootNames) {\n    var splitFullName = fullOptionName.split(\".\");\n    var result;\n\n    if (splitFullName.length > 1) {\n      var i;\n      var rootOptionName = splitFullName[0];\n\n      for (i = 0; i < expectedRootNames.length; i++) {\n        if (rootOptionName.search(expectedRootNames[i]) !== -1) {\n          result = expectedRootNames[i];\n        }\n      }\n    }\n\n    return result;\n  },\n  _tryCreateItemOptionAction: function _tryCreateItemOptionAction(optionName, item, value, previousValue, itemPath) {\n    if (\"tabs\" === optionName) {\n      this._itemsRunTimeInfo.removeItemsByPathStartWith(\"\".concat(itemPath, \".tabs\"));\n\n      value = this._prepareItems(value, true, itemPath, true);\n    }\n\n    return (0, _uiForm6.default)(optionName, {\n      item: item,\n      value: value,\n      previousValue: previousValue,\n      itemsRunTimeInfo: this._itemsRunTimeInfo\n    });\n  },\n  _tryExecuteItemOptionAction: function _tryExecuteItemOptionAction(action) {\n    return action && action.tryExecute();\n  },\n  _updateValidationGroupAndSummaryIfNeeded: function _updateValidationGroupAndSummaryIfNeeded(fullName) {\n    var optionName = (0, _uiForm7.getOptionNameFromFullName)(fullName);\n\n    if (ITEM_OPTIONS_FOR_VALIDATION_UPDATING.indexOf(optionName) > -1) {\n      _validation_engine2.default.addGroup(this._getValidationGroup());\n\n      if (this.option(\"showValidationSummary\")) {\n        this._validationSummary && this._validationSummary._initGroupRegistration();\n      }\n    }\n  },\n  _setLayoutManagerItemOption: function _setLayoutManagerItemOption(layoutManager, optionName, value, path) {\n    var _this3 = this;\n\n    if (this._updateLockCount > 0) {\n      !layoutManager._updateLockCount && layoutManager.beginUpdate();\n\n      var key = this._itemsRunTimeInfo.getKeyByPath(path);\n\n      this.postponedOperations.add(key, function () {\n        layoutManager.endUpdate();\n        return new _deferred.Deferred().resolve();\n      });\n    }\n\n    var contentReadyHandler = function contentReadyHandler(e) {\n      e.component.off(\"contentReady\", contentReadyHandler);\n\n      if ((0, _uiForm7.isFullPathContainsTabs)(path)) {\n        var tabPath = (0, _uiForm7.tryGetTabPath)(path);\n\n        var tabLayoutManager = _this3._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(tabPath);\n\n        _this3._alignLabelsInColumn({\n          items: tabLayoutManager.option(\"items\"),\n          layoutManager: tabLayoutManager,\n          $container: tabLayoutManager.$element(),\n          inOneColumn: tabLayoutManager.isSingleColumnMode()\n        });\n      } else {\n        _this3._alignLabels(_this3._rootLayoutManager, _this3._rootLayoutManager.isSingleColumnMode());\n      }\n    };\n\n    layoutManager.on(\"contentReady\", contentReadyHandler);\n    layoutManager.option(optionName, value);\n\n    this._updateValidationGroupAndSummaryIfNeeded(optionName);\n  },\n  _tryChangeLayoutManagerItemOption: function _tryChangeLayoutManagerItemOption(fullName, value) {\n    var nameParts = fullName.split(\".\");\n    var optionName = (0, _uiForm7.getOptionNameFromFullName)(fullName);\n\n    if (\"items\" === optionName && nameParts.length > 1) {\n      var itemPath = this._getItemPath(nameParts);\n\n      var layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(itemPath);\n\n      if (layoutManager) {\n        this._itemsRunTimeInfo.removeItemsByItems(layoutManager.getItemsRunTimeInfo());\n\n        var items = this._prepareItems(value, false, itemPath);\n\n        this._setLayoutManagerItemOption(layoutManager, optionName, items, itemPath);\n\n        return true;\n      }\n    } else {\n      if (nameParts.length > 2) {\n        var endPartIndex = nameParts.length - 2;\n\n        var _itemPath = this._getItemPath(nameParts.slice(0, endPartIndex));\n\n        var _layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(_itemPath);\n\n        if (_layoutManager) {\n          var fullOptionName = (0, _uiForm7.getFullOptionName)(nameParts[endPartIndex], optionName);\n\n          this._setLayoutManagerItemOption(_layoutManager, fullOptionName, value, _itemPath);\n\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n  _tryChangeLayoutManagerItemOptions: function _tryChangeLayoutManagerItemOptions(itemPath, options) {\n    var _this4 = this;\n\n    var result;\n    this.beginUpdate();\n    (0, _iterator.each)(options, function (optionName, optionValue) {\n      result = _this4._tryChangeLayoutManagerItemOption((0, _uiForm7.getFullOptionName)(itemPath, optionName), optionValue);\n\n      if (!result) {\n        return false;\n      }\n    });\n    this.endUpdate();\n    return result;\n  },\n  _customHandlerOfComplexOption: function _customHandlerOfComplexOption(args, rootOptionName) {\n    var nameParts = args.fullName.split(\".\");\n    var value = args.value;\n\n    if (\"items\" === rootOptionName) {\n      var itemPath = this._getItemPath(nameParts);\n\n      var item = this.option(itemPath);\n      var optionNameWithoutPath = args.fullName.replace(itemPath + \".\", \"\");\n      var simpleOptionName = optionNameWithoutPath.split(\".\")[0].replace(/\\[\\d+]/, \"\");\n\n      var itemAction = this._tryCreateItemOptionAction(simpleOptionName, item, item[simpleOptionName], args.previousValue, itemPath);\n\n      if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(args.fullName, value)) {\n        if (item) {\n          this._changeItemOption(item, optionNameWithoutPath, value);\n\n          var items = this._generateItemsFromData(this.option(\"items\"));\n\n          this.option(\"items\", items);\n        }\n      }\n    }\n\n    if (\"formData\" === rootOptionName) {\n      var dataField = nameParts.slice(1).join(\".\");\n      var editor = this.getEditor(dataField);\n\n      if (editor) {\n        editor.option(\"value\", value);\n      } else {\n        this._triggerOnFieldDataChanged({\n          dataField: dataField,\n          value: value\n        });\n      }\n    }\n  },\n  _getItemPath: function _getItemPath(nameParts) {\n    var itemPath = nameParts[0];\n    var i;\n\n    for (i = 1; i < nameParts.length; i++) {\n      if (nameParts[i].search(/items\\[\\d+]|tabs\\[\\d+]/) !== -1) {\n        itemPath += \".\" + nameParts[i];\n      } else {\n        break;\n      }\n    }\n\n    return itemPath;\n  },\n  _triggerOnFieldDataChanged: function _triggerOnFieldDataChanged(args) {\n    this._createActionByOption(\"onFieldDataChanged\")(args);\n  },\n  _triggerOnFieldDataChangedByDataSet: function _triggerOnFieldDataChangedByDataSet(data) {\n    var that = this;\n\n    if (data && (0, _type.isObject)(data)) {\n      (0, _iterator.each)(data, function (dataField, value) {\n        that._triggerOnFieldDataChanged({\n          dataField: dataField,\n          value: value\n        });\n      });\n    }\n  },\n  _updateFieldValue: function _updateFieldValue(dataField, value) {\n    if ((0, _type.isDefined)(this.option(\"formData\"))) {\n      var editor = this.getEditor(dataField);\n      this.option(\"formData.\" + dataField, value);\n\n      if (editor) {\n        var editorValue = editor.option(\"value\");\n\n        if (editorValue !== value) {\n          editor.option(\"value\", value);\n        }\n      }\n    }\n  },\n  _generateItemsFromData: function _generateItemsFromData(items) {\n    var formData = this.option(\"formData\");\n    var result = [];\n\n    if (!items && (0, _type.isDefined)(formData)) {\n      (0, _iterator.each)(formData, function (dataField) {\n        result.push({\n          dataField: dataField\n        });\n      });\n    }\n\n    if (items) {\n      (0, _iterator.each)(items, function (index, item) {\n        if ((0, _type.isObject)(item)) {\n          result.push(item);\n        } else {\n          result.push({\n            dataField: item\n          });\n        }\n      });\n    }\n\n    return result;\n  },\n  _getItemByField: function _getItemByField(field, items) {\n    var that = this;\n    var fieldParts = (0, _type.isObject)(field) ? field : that._getFieldParts(field);\n    var fieldName = fieldParts.fieldName;\n    var fieldPath = fieldParts.fieldPath;\n    var resultItem;\n\n    if (items.length) {\n      (0, _iterator.each)(items, function (index, item) {\n        var itemType = item.itemType;\n\n        if (fieldPath.length) {\n          var path = fieldPath.slice();\n          item = that._getItemByFieldPath(path, fieldName, item);\n        } else {\n          if (\"group\" === itemType && !(item.caption || item.name) || \"tabbed\" === itemType && !item.name) {\n            var subItemsField = that._getSubItemField(itemType);\n\n            item.items = that._generateItemsFromData(item.items);\n            item = that._getItemByField({\n              fieldName: fieldName,\n              fieldPath: fieldPath\n            }, item[subItemsField]);\n          }\n        }\n\n        if ((0, _uiForm7.isExpectedItem)(item, fieldName)) {\n          resultItem = item;\n          return false;\n        }\n      });\n    }\n\n    return resultItem;\n  },\n  _getFieldParts: function _getFieldParts(field) {\n    var fieldSeparator = \".\";\n    var fieldName = field;\n    var separatorIndex = fieldName.indexOf(fieldSeparator);\n    var resultPath = [];\n\n    while (separatorIndex !== -1) {\n      resultPath.push(fieldName.substr(0, separatorIndex));\n      fieldName = fieldName.substr(separatorIndex + 1);\n      separatorIndex = fieldName.indexOf(fieldSeparator);\n    }\n\n    return {\n      fieldName: fieldName,\n      fieldPath: resultPath.reverse()\n    };\n  },\n  _getItemByFieldPath: function _getItemByFieldPath(path, fieldName, item) {\n    var that = this;\n    var itemType = item.itemType;\n\n    var subItemsField = that._getSubItemField(itemType);\n\n    var isItemWithSubItems = \"group\" === itemType || \"tabbed\" === itemType || item.title;\n    var result;\n\n    do {\n      if (isItemWithSubItems) {\n        var name = item.name || item.caption || item.title;\n        var isGroupWithName = (0, _type.isDefined)(name);\n        var nameWithoutSpaces = (0, _uiForm7.getTextWithoutSpaces)(name);\n        var pathNode;\n        item[subItemsField] = that._generateItemsFromData(item[subItemsField]);\n\n        if (isGroupWithName) {\n          pathNode = path.pop();\n        }\n\n        if (!path.length) {\n          result = that._getItemByField(fieldName, item[subItemsField]);\n\n          if (result) {\n            break;\n          }\n        }\n\n        if (!isGroupWithName || isGroupWithName && nameWithoutSpaces === pathNode) {\n          if (path.length) {\n            result = that._searchItemInEverySubItem(path, fieldName, item[subItemsField]);\n          }\n        }\n      } else {\n        break;\n      }\n    } while (path.length && !(0, _type.isDefined)(result));\n\n    return result;\n  },\n  _getSubItemField: function _getSubItemField(itemType) {\n    return \"tabbed\" === itemType ? \"tabs\" : \"items\";\n  },\n  _searchItemInEverySubItem: function _searchItemInEverySubItem(path, fieldName, items) {\n    var that = this;\n    var result;\n    (0, _iterator.each)(items, function (index, groupItem) {\n      result = that._getItemByFieldPath(path.slice(), fieldName, groupItem);\n\n      if (result) {\n        return false;\n      }\n    });\n\n    if (!result) {\n      result = false;\n    }\n\n    return result;\n  },\n  _changeItemOption: function _changeItemOption(item, option, value) {\n    if ((0, _type.isObject)(item)) {\n      item[option] = value;\n    }\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    var currentScreenFactor = this._getCurrentScreenFactor();\n\n    if (this._lastMarkupScreenFactor !== currentScreenFactor) {\n      if (this._isColCountChanged(this._lastMarkupScreenFactor, currentScreenFactor)) {\n        this._targetScreenFactor = currentScreenFactor;\n\n        this._refresh();\n\n        this._targetScreenFactor = void 0;\n      }\n\n      this._lastMarkupScreenFactor = currentScreenFactor;\n    }\n  },\n  _isColCountChanged: function _isColCountChanged(oldScreenSize, newScreenSize) {\n    var isChanged = false;\n    (0, _iterator.each)(this._cachedColCountOptions, function (index, item) {\n      if (item.colCountByScreen[oldScreenSize] !== item.colCountByScreen[newScreenSize]) {\n        isChanged = true;\n        return false;\n      }\n    });\n    return isChanged;\n  },\n  _refresh: function _refresh() {\n    var editorSelector = \".\" + FOCUSED_STATE_CLASS + \" input, .\" + FOCUSED_STATE_CLASS + \" textarea\";\n\n    _events_engine2.default.trigger(this.$element().find(editorSelector), \"change\");\n\n    this.callBase();\n  },\n  _resetValues: function _resetValues() {\n    this._itemsRunTimeInfo.each(function (_, itemRunTimeInfo) {\n      if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance) && itemRunTimeInfo.widgetInstance instanceof _editor2.default) {\n        itemRunTimeInfo.widgetInstance.reset();\n        itemRunTimeInfo.widgetInstance.option(\"isValid\", true);\n      }\n    });\n\n    _validation_engine2.default.resetGroup(this._getValidationGroup());\n  },\n  _updateData: function _updateData(data, value, isComplexData) {\n    var that = this;\n\n    var _data = isComplexData ? value : data;\n\n    if ((0, _type.isObject)(_data)) {\n      (0, _iterator.each)(_data, function (dataField, fieldValue) {\n        that._updateData(isComplexData ? data + \".\" + dataField : dataField, fieldValue, (0, _type.isObject)(fieldValue));\n      });\n    } else {\n      if ((0, _type.isString)(data)) {\n        that._updateFieldValue(data, value);\n      }\n    }\n  },\n  registerKeyHandler: function registerKeyHandler(key, handler) {\n    this.callBase(key, handler);\n\n    this._itemsRunTimeInfo.each(function (_, itemRunTimeInfo) {\n      if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance)) {\n        itemRunTimeInfo.widgetInstance.registerKeyHandler(key, handler);\n      }\n    });\n  },\n  _focusTarget: function _focusTarget() {\n    return this.$element().find(\".\" + FIELD_ITEM_CONTENT_CLASS + \" [tabindex]\").first();\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible && _browser2.default.msie) {\n      this._refresh();\n    }\n  },\n  _dispose: function _dispose() {\n    _validation_engine2.default.removeGroup(this._getValidationGroup());\n\n    this.callBase();\n  },\n  resetValues: function resetValues() {\n    this._resetValues();\n  },\n  updateData: function updateData(data, value) {\n    this._updateData(data, value);\n  },\n  getEditor: function getEditor(dataField) {\n    return this._itemsRunTimeInfo.findWidgetInstanceByDataField(dataField) || this._itemsRunTimeInfo.findWidgetInstanceByName(dataField);\n  },\n  getButton: function getButton(name) {\n    return this._itemsRunTimeInfo.findWidgetInstanceByName(name);\n  },\n  updateDimensions: function updateDimensions() {\n    var that = this;\n    var deferred = new _deferred.Deferred();\n\n    if (that._scrollable) {\n      that._scrollable.update().done(function () {\n        deferred.resolveWith(that);\n      });\n    } else {\n      deferred.resolveWith(that);\n    }\n\n    return deferred.promise();\n  },\n  itemOption: function itemOption(id, option, value) {\n    var _this5 = this;\n\n    var items = this._generateItemsFromData(this.option(\"items\"));\n\n    var item = this._getItemByField(id, items);\n\n    var path = this._itemsRunTimeInfo.getPathFromItem(item);\n\n    if (!item) {\n      return;\n    }\n\n    switch (arguments.length) {\n      case 1:\n        return item;\n\n      case 3:\n        var itemAction = this._tryCreateItemOptionAction(option, item, value, item[option], path);\n\n        this._changeItemOption(item, option, value);\n\n        var fullName = (0, _uiForm7.getFullOptionName)(path, option);\n\n        if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(fullName, value)) {\n          this.option(\"items\", items);\n        }\n\n        break;\n\n      default:\n        if ((0, _type.isObject)(option)) {\n          if (!this._tryChangeLayoutManagerItemOptions(path, option)) {\n            var allowUpdateItems;\n            (0, _iterator.each)(option, function (optionName, optionValue) {\n              var itemAction = _this5._tryCreateItemOptionAction(optionName, item, optionValue, item[optionName], path);\n\n              _this5._changeItemOption(item, optionName, optionValue);\n\n              if (!allowUpdateItems && !_this5._tryExecuteItemOptionAction(itemAction)) {\n                allowUpdateItems = true;\n              }\n            });\n            allowUpdateItems && this.option(\"items\", items);\n          }\n        }\n\n    }\n  },\n  validate: function validate() {\n    return _validation_engine2.default.validateGroup(this._getValidationGroup());\n  },\n  getItemID: function getItemID(name) {\n    return \"dx_\" + this.option(\"formID\") + \"_\" + (name || new _guid2.default());\n  },\n  getTargetScreenFactor: function getTargetScreenFactor() {\n    return this._targetScreenFactor;\n  }\n});\n\n(0, _component_registrator2.default)(\"dxForm\", Form);\nmodule.exports = Form;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/form/ui.form.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_component_registrator","_component_registrator2","_guid","_guid2","_common","_type","_iterator","_array","_extend","_string","_browser","_browser2","_dom","_message","_message2","_ui","_ui2","_editor","_editor2","_window","_validation_engine","_validation_engine2","_uiForm","_uiForm2","_uiForm3","_uiForm4","_tab_panel","_tab_panel2","_ui3","_ui4","_deferred","_themes","_themes2","_uiForm5","_uiForm6","_uiForm7","obj","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Symbol","Object","Array","i","arr2","arr","FORM_CLASS","FIELD_ITEM_CLASS","FIELD_ITEM_LABEL_TEXT_CLASS","FORM_GROUP_CLASS","FORM_GROUP_CONTENT_CLASS","FORM_GROUP_WITH_CAPTION_CLASS","FORM_GROUP_CAPTION_CLASS","HIDDEN_LABEL_CLASS","FIELD_ITEM_LABEL_CLASS","FIELD_ITEM_LABEL_CONTENT_CLASS","FIELD_ITEM_TAB_CLASS","FORM_FIELD_ITEM_COL_CLASS","GROUP_COL_COUNT_CLASS","FIELD_ITEM_CONTENT_CLASS","FORM_VALIDATION_SUMMARY","WIDGET_CLASS","FOCUSED_STATE_CLASS","ITEM_OPTIONS_FOR_VALIDATION_UPDATING","Form","_init","_initOptions","options","_getDefaultOptions","formID","formData","colCount","screenByWidth","colCountByScreen","labelLocation","readOnly","onFieldDataChanged","customizeItem","onEditorEnterKey","minColWidth","alignItemLabels","alignItemLabelsInAllGroups","showColonAfterLabel","showRequiredMark","showOptionalMark","requiredMark","optionalMark","requiredMessage","showValidationSummary","items","scrollingEnabled","validationGroup","stylingMode","_defaultOptionsRules","device","_setOptionsByReference","_getColCount","index","isColsExist","$cols","$element","_createHiddenElement","$hiddenLabel","text","location","_removeHiddenElement","_getLabelWidthByText","_getLabelsSelectorByCol","fieldItemClass","cssExcludeTabbedSelector","childLabelContentSelector","_getLabelText","length","labelText","result","child","_applyLabelsWidthByCol","$labelTexts","$container","$labelTextsLength","maxWidth","labelWidth","_applyLabelsWidth","inOneColumn","applyLabelsOptions","excludeTabbed","_getGroupElementsInColumn","cssColCountSelector","groupSelector","_applyLabelsWidthWithGroups","$groups","_applyLabelsWidthWithNestedGroups","colIndex","$groupsByCol","groupsColIndex","groupColCount","groupColIndex","_labelLocation","_alignLabelsInColumn","layoutManager","_ref","_prepareFormData","_initMarkup","_getCurrentScreenFactor","_clearCachedInstances","_alignLabels","_clean","_renderScrollable","useNativeScrolling","useNative","useSimulatedScrollbar","useKeyboard","direction","bounceEnabled","_getContent","_renderValidationSummary","$validationSummary","_$validationSummary","_prepareItems","item","path","guid","itemIndex","dataField","itemCopy","_tryPrepareGroupItem","_tryPrepareTabbedItem","_tryPrepareItemTemplate","_checkGrouping","_renderLayout","that","$content","onLayoutChanged","onContentReady","e","_tryGetItemsForTemplate","_itemTabbedTemplate","_this","$tabPanel","tabPanelOptions","dataSource","onItemRendered","args","itemTemplate","itemData","cssItemClass","tryUpdateTabPanelInstance","widgetInstance","instance","tabPanel","_toConsumableArray","_itemGroupTemplate","$group","$groupContent","data","component","model","container","_renderLayoutManager","config","baseColCountByScreen","lg","md","sm","xs","_getValidationGroup","_getLayoutManagerConfig","_this2","baseConfig","form","layoutData","validationBoundary","onDisposing","_ref2","nestedItemsRunTimeInfo","width","_createComponent","_attachSyncSubscriptions","optionFullName","_optionChanged","rootNameOfComplexOption","_getRootLevelOfExpectedComplexOption","splitFullName","fullOptionName","rootOptionName","expectedRootNames","_tryCreateItemOptionAction","value","previousValue","itemsRunTimeInfo","_itemsRunTimeInfo","_tryExecuteItemOptionAction","action","_updateValidationGroupAndSummaryIfNeeded","optionName","_setLayoutManagerItemOption","_this3","key","contentReadyHandler","tabPath","tabLayoutManager","_tryChangeLayoutManagerItemOption","nameParts","fullName","itemPath","endPartIndex","_itemPath","_layoutManager","_tryChangeLayoutManagerItemOptions","_this4","_customHandlerOfComplexOption","optionNameWithoutPath","simpleOptionName","itemAction","editor","_getItemPath","_triggerOnFieldDataChanged","_triggerOnFieldDataChangedByDataSet","_updateFieldValue","editorValue","_generateItemsFromData","_getItemByField","fieldParts","fieldName","fieldPath","itemType","subItemsField","resultItem","_getFieldParts","fieldSeparator","separatorIndex","resultPath","_getItemByFieldPath","isItemWithSubItems","name","isGroupWithName","nameWithoutSpaces","pathNode","_getSubItemField","_searchItemInEverySubItem","_changeItemOption","_dimensionChanged","currentScreenFactor","_isColCountChanged","isChanged","_refresh","editorSelector","_resetValues","itemRunTimeInfo","_updateData","_data","isComplexData","registerKeyHandler","_focusTarget","_visibilityChanged","visible","_dispose","resetValues","updateData","getEditor","getButton","updateDimensions","deferred","itemOption","_this5","arguments","allowUpdateItems","validate","getItemID","getTargetScreenFactor","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/form/ui.form.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _guid = require(\"../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _string = require(\"../../core/utils/string\");\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _ui = require(\"../widget/ui.widget\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _editor = require(\"../editor/editor\");\r\nvar _editor2 = _interopRequireDefault(_editor);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _validation_engine = require(\"../validation_engine\");\r\nvar _validation_engine2 = _interopRequireDefault(_validation_engine);\r\nvar _uiForm = require(\"./ui.form.layout_manager\");\r\nvar _uiForm2 = _interopRequireDefault(_uiForm);\r\nvar _uiForm3 = require(\"./ui.form.items_runtime_info\");\r\nvar _uiForm4 = _interopRequireDefault(_uiForm3);\r\nvar _tab_panel = require(\"../tab_panel\");\r\nvar _tab_panel2 = _interopRequireDefault(_tab_panel);\r\nvar _ui3 = require(\"../scroll_view/ui.scrollable\");\r\nvar _ui4 = _interopRequireDefault(_ui3);\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nvar _uiForm5 = require(\"./ui.form.item_options_actions\");\r\nvar _uiForm6 = _interopRequireDefault(_uiForm5);\r\nvar _uiForm7 = require(\"./ui.form.utils\");\r\nrequire(\"../validation_summary\");\r\nrequire(\"../validation_group\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\")\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (Symbol.iterator in Object(iter) || \"[object Arguments]\" === Object.prototype.toString.call(iter)) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\r\n            arr2[i] = arr[i]\r\n        }\r\n        return arr2\r\n    }\r\n}\r\nvar FORM_CLASS = \"dx-form\";\r\nvar FIELD_ITEM_CLASS = \"dx-field-item\";\r\nvar FIELD_ITEM_LABEL_TEXT_CLASS = \"dx-field-item-label-text\";\r\nvar FORM_GROUP_CLASS = \"dx-form-group\";\r\nvar FORM_GROUP_CONTENT_CLASS = \"dx-form-group-content\";\r\nvar FORM_GROUP_WITH_CAPTION_CLASS = \"dx-form-group-with-caption\";\r\nvar FORM_GROUP_CAPTION_CLASS = \"dx-form-group-caption\";\r\nvar HIDDEN_LABEL_CLASS = \"dx-layout-manager-hidden-label\";\r\nvar FIELD_ITEM_LABEL_CLASS = \"dx-field-item-label\";\r\nvar FIELD_ITEM_LABEL_CONTENT_CLASS = \"dx-field-item-label-content\";\r\nvar FIELD_ITEM_TAB_CLASS = \"dx-field-item-tab\";\r\nvar FORM_FIELD_ITEM_COL_CLASS = \"dx-col-\";\r\nvar GROUP_COL_COUNT_CLASS = \"dx-group-colcount-\";\r\nvar FIELD_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\r\nvar FORM_VALIDATION_SUMMARY = \"dx-form-validation-summary\";\r\nvar WIDGET_CLASS = \"dx-widget\";\r\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\r\nvar ITEM_OPTIONS_FOR_VALIDATION_UPDATING = [\"items\", \"isRequired\", \"validationRules\", \"visible\"];\r\nvar Form = _ui2.default.inherit({\r\n    _init: function() {\r\n        this.callBase();\r\n        this._cachedColCountOptions = [];\r\n        this._itemsRunTimeInfo = new _uiForm4.default;\r\n        this._groupsColCount = [];\r\n        this._attachSyncSubscriptions()\r\n    },\r\n    _initOptions: function(options) {\r\n        if (!(\"screenByWidth\" in options)) {\r\n            options.screenByWidth = _window.defaultScreenFactorFunc\r\n        }\r\n        this.callBase(options)\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            formID: \"dx-\" + new _guid2.default,\r\n            formData: {},\r\n            colCount: 1,\r\n            screenByWidth: null,\r\n            colCountByScreen: void 0,\r\n            labelLocation: \"left\",\r\n            readOnly: false,\r\n            onFieldDataChanged: null,\r\n            customizeItem: null,\r\n            onEditorEnterKey: null,\r\n            minColWidth: 200,\r\n            alignItemLabels: true,\r\n            alignItemLabelsInAllGroups: true,\r\n            showColonAfterLabel: true,\r\n            showRequiredMark: true,\r\n            showOptionalMark: false,\r\n            requiredMark: \"*\",\r\n            optionalMark: _message2.default.format(\"dxForm-optionalMark\"),\r\n            requiredMessage: _message2.default.getFormatter(\"dxForm-requiredMessage\"),\r\n            showValidationSummary: false,\r\n            items: void 0,\r\n            scrollingEnabled: false,\r\n            validationGroup: void 0,\r\n            stylingMode: void 0\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return _themes2.default.isMaterial()\r\n            },\r\n            options: {\r\n                showColonAfterLabel: false,\r\n                labelLocation: \"top\"\r\n            }\r\n        }])\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._optionsByReference, {\r\n            formData: true,\r\n            validationGroup: true\r\n        })\r\n    },\r\n    _getColCount: function($element) {\r\n        var index = 0;\r\n        var isColsExist = true;\r\n        var $cols;\r\n        while (isColsExist) {\r\n            $cols = $element.find(\".\" + FORM_FIELD_ITEM_COL_CLASS + index);\r\n            if (!$cols.length) {\r\n                isColsExist = false\r\n            } else {\r\n                index++\r\n            }\r\n        }\r\n        return index\r\n    },\r\n    _createHiddenElement: function(rootLayoutManager) {\r\n        this._$hiddenElement = (0, _renderer2.default)(\"<div>\").addClass(WIDGET_CLASS).addClass(HIDDEN_LABEL_CLASS).appendTo(\"body\");\r\n        var $hiddenLabel = rootLayoutManager._renderLabel({\r\n            text: \" \",\r\n            location: this._labelLocation()\r\n        }).appendTo(this._$hiddenElement);\r\n        this._hiddenLabelText = $hiddenLabel.find(\".\" + FIELD_ITEM_LABEL_TEXT_CLASS)[0]\r\n    },\r\n    _removeHiddenElement: function() {\r\n        this._$hiddenElement.remove();\r\n        this._hiddenLabelText = null\r\n    },\r\n    _getLabelWidthByText: function(text) {\r\n        this._hiddenLabelText.innerHTML = text;\r\n        return this._hiddenLabelText.offsetWidth\r\n    },\r\n    _getLabelsSelectorByCol: function(index, options) {\r\n        options = options || {};\r\n        var fieldItemClass = options.inOneColumn ? FIELD_ITEM_CLASS : FORM_FIELD_ITEM_COL_CLASS + index;\r\n        var cssExcludeTabbedSelector = options.excludeTabbed ? \":not(.\" + FIELD_ITEM_TAB_CLASS + \")\" : \"\";\r\n        var childLabelContentSelector = \"> .\" + FIELD_ITEM_LABEL_CLASS + \" > .\" + FIELD_ITEM_LABEL_CONTENT_CLASS;\r\n        return \".\" + fieldItemClass + cssExcludeTabbedSelector + childLabelContentSelector\r\n    },\r\n    _getLabelText: function(labelText) {\r\n        var length = labelText.children.length;\r\n        var child;\r\n        var result = \"\";\r\n        var i;\r\n        for (i = 0; i < length; i++) {\r\n            child = labelText.children[i];\r\n            result += !(0, _string.isEmpty)(child.innerText) ? child.innerText : child.innerHTML\r\n        }\r\n        return result\r\n    },\r\n    _applyLabelsWidthByCol: function($container, index, options) {\r\n        var $labelTexts = $container.find(this._getLabelsSelectorByCol(index, options));\r\n        var $labelTextsLength = $labelTexts.length;\r\n        var labelWidth;\r\n        var i;\r\n        var maxWidth = 0;\r\n        for (i = 0; i < $labelTextsLength; i++) {\r\n            labelWidth = this._getLabelWidthByText(this._getLabelText($labelTexts[i]));\r\n            if (labelWidth > maxWidth) {\r\n                maxWidth = labelWidth\r\n            }\r\n        }\r\n        for (i = 0; i < $labelTextsLength; i++) {\r\n            $labelTexts[i].style.width = maxWidth + \"px\"\r\n        }\r\n    },\r\n    _applyLabelsWidth: function($container, excludeTabbed, inOneColumn, colCount) {\r\n        colCount = inOneColumn ? 1 : colCount || this._getColCount($container);\r\n        var applyLabelsOptions = {\r\n            excludeTabbed: excludeTabbed,\r\n            inOneColumn: inOneColumn\r\n        };\r\n        var i;\r\n        for (i = 0; i < colCount; i++) {\r\n            this._applyLabelsWidthByCol($container, i, applyLabelsOptions)\r\n        }\r\n    },\r\n    _getGroupElementsInColumn: function($container, columnIndex, colCount) {\r\n        var cssColCountSelector = (0, _type.isDefined)(colCount) ? \".\" + GROUP_COL_COUNT_CLASS + colCount : \"\";\r\n        var groupSelector = \".\" + FORM_FIELD_ITEM_COL_CLASS + columnIndex + \" > .\" + FIELD_ITEM_CONTENT_CLASS + \" > .\" + FORM_GROUP_CLASS + cssColCountSelector;\r\n        return $container.find(groupSelector)\r\n    },\r\n    _applyLabelsWidthWithGroups: function($container, colCount, excludeTabbed) {\r\n        var alignItemLabelsInAllGroups = this.option(\"alignItemLabelsInAllGroups\");\r\n        if (alignItemLabelsInAllGroups) {\r\n            this._applyLabelsWidthWithNestedGroups($container, colCount, excludeTabbed)\r\n        } else {\r\n            var $groups = this.$element().find(\".\" + FORM_GROUP_CLASS);\r\n            var i;\r\n            for (i = 0; i < $groups.length; i++) {\r\n                this._applyLabelsWidth($groups.eq(i), excludeTabbed)\r\n            }\r\n        }\r\n    },\r\n    _applyLabelsWidthWithNestedGroups: function($container, colCount, excludeTabbed) {\r\n        var applyLabelsOptions = {\r\n            excludeTabbed: excludeTabbed\r\n        };\r\n        var colIndex;\r\n        var groupsColIndex;\r\n        var groupColIndex;\r\n        var $groupsByCol;\r\n        for (colIndex = 0; colIndex < colCount; colIndex++) {\r\n            $groupsByCol = this._getGroupElementsInColumn($container, colIndex);\r\n            this._applyLabelsWidthByCol($groupsByCol, 0, applyLabelsOptions);\r\n            for (groupsColIndex = 0; groupsColIndex < this._groupsColCount.length; groupsColIndex++) {\r\n                $groupsByCol = this._getGroupElementsInColumn($container, colIndex, this._groupsColCount[groupsColIndex]);\r\n                var groupColCount = this._getColCount($groupsByCol);\r\n                for (groupColIndex = 1; groupColIndex < groupColCount; groupColIndex++) {\r\n                    this._applyLabelsWidthByCol($groupsByCol, groupColIndex, applyLabelsOptions)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _labelLocation: function() {\r\n        return this.option(\"labelLocation\")\r\n    },\r\n    _alignLabelsInColumn: function(_ref) {\r\n        var layoutManager = _ref.layoutManager,\r\n            inOneColumn = _ref.inOneColumn,\r\n            $container = _ref.$container,\r\n            excludeTabbed = _ref.excludeTabbed,\r\n            items = _ref.items;\r\n        if (!(0, _window.hasWindow)() || \"top\" === this._labelLocation()) {\r\n            return\r\n        }\r\n        this._createHiddenElement(layoutManager);\r\n        if (inOneColumn) {\r\n            this._applyLabelsWidth($container, excludeTabbed, true)\r\n        } else {\r\n            if (this._checkGrouping(items)) {\r\n                this._applyLabelsWidthWithGroups($container, layoutManager._getColCount(), excludeTabbed)\r\n            } else {\r\n                this._applyLabelsWidth($container, excludeTabbed, false, layoutManager._getColCount())\r\n            }\r\n        }\r\n        this._removeHiddenElement()\r\n    },\r\n    _prepareFormData: function() {\r\n        if (!(0, _type.isDefined)(this.option(\"formData\"))) {\r\n            this.option(\"formData\", {})\r\n        }\r\n    },\r\n    _initMarkup: function() {\r\n        _validation_engine2.default.addGroup(this._getValidationGroup());\r\n        this._clearCachedInstances();\r\n        this._prepareFormData();\r\n        this.$element().addClass(FORM_CLASS);\r\n        this.callBase();\r\n        this.setAria(\"role\", \"form\", this.$element());\r\n        if (this.option(\"scrollingEnabled\")) {\r\n            this._renderScrollable()\r\n        }\r\n        this._renderLayout();\r\n        this._renderValidationSummary();\r\n        this._lastMarkupScreenFactor = this._targetScreenFactor || this._getCurrentScreenFactor()\r\n    },\r\n    _getCurrentScreenFactor: function() {\r\n        return (0, _window.hasWindow)() ? (0, _window.getCurrentScreenFactor)(this.option(\"screenByWidth\")) : \"lg\"\r\n    },\r\n    _clearCachedInstances: function() {\r\n        this._itemsRunTimeInfo.clear();\r\n        this._cachedLayoutManagers = []\r\n    },\r\n    _alignLabels: function(layoutManager, inOneColumn) {\r\n        this._alignLabelsInColumn({\r\n            $container: this.$element(),\r\n            layoutManager: layoutManager,\r\n            excludeTabbed: true,\r\n            items: this.option(\"items\"),\r\n            inOneColumn: inOneColumn\r\n        })\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._groupsColCount = [];\r\n        this._cachedColCountOptions = [];\r\n        this._lastMarkupScreenFactor = void 0\r\n    },\r\n    _renderScrollable: function() {\r\n        var useNativeScrolling = this.option(\"useNativeScrolling\");\r\n        this._scrollable = new _ui4.default(this.$element(), {\r\n            useNative: !!useNativeScrolling,\r\n            useSimulatedScrollbar: !useNativeScrolling,\r\n            useKeyboard: false,\r\n            direction: \"both\",\r\n            bounceEnabled: false\r\n        })\r\n    },\r\n    _getContent: function() {\r\n        return this.option(\"scrollingEnabled\") ? this._scrollable.$content() : this.$element()\r\n    },\r\n    _renderValidationSummary: function() {\r\n        var $validationSummary = this.$element().find(\".\" + FORM_VALIDATION_SUMMARY);\r\n        if ($validationSummary.length > 0) {\r\n            $validationSummary.remove()\r\n        }\r\n        if (this.option(\"showValidationSummary\")) {\r\n            var _$validationSummary = (0, _renderer2.default)(\"<div>\").addClass(FORM_VALIDATION_SUMMARY).appendTo(this._getContent());\r\n            this._validationSummary = _$validationSummary.dxValidationSummary({\r\n                validationGroup: this._getValidationGroup()\r\n            }).dxValidationSummary(\"instance\")\r\n        }\r\n    },\r\n    _prepareItems: function(items, parentIsTabbedItem, currentPath, isTabs) {\r\n        if (items) {\r\n            var result = [];\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = items[i];\r\n                var path = (0, _uiForm7.concatPaths)(currentPath, (0, _uiForm7.createItemPathByIndex)(i, isTabs));\r\n                var guid = this._itemsRunTimeInfo.add({\r\n                    item: item,\r\n                    itemIndex: i,\r\n                    path: path\r\n                });\r\n                if ((0, _type.isString)(item)) {\r\n                    item = {\r\n                        dataField: item\r\n                    }\r\n                }\r\n                if ((0, _type.isObject)(item)) {\r\n                    var itemCopy = (0, _extend.extend)({}, item);\r\n                    itemCopy.guid = guid;\r\n                    this._tryPrepareGroupItem(itemCopy);\r\n                    this._tryPrepareTabbedItem(itemCopy, path);\r\n                    this._tryPrepareItemTemplate(itemCopy);\r\n                    if (parentIsTabbedItem) {\r\n                        itemCopy.cssItemClass = FIELD_ITEM_TAB_CLASS\r\n                    }\r\n                    if (itemCopy.items) {\r\n                        itemCopy.items = this._prepareItems(itemCopy.items, parentIsTabbedItem, path)\r\n                    }\r\n                    result.push(itemCopy)\r\n                } else {\r\n                    result.push(item)\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    },\r\n    _tryPrepareGroupItem: function(item) {\r\n        if (\"group\" === item.itemType) {\r\n            item.alignItemLabels = (0, _common.ensureDefined)(item.alignItemLabels, true);\r\n            if (item.template) {\r\n                item.groupContentTemplate = this._getTemplate(item.template)\r\n            }\r\n            item.template = this._itemGroupTemplate.bind(this, item)\r\n        }\r\n    },\r\n    _tryPrepareTabbedItem: function(item, path) {\r\n        if (\"tabbed\" === item.itemType) {\r\n            item.template = this._itemTabbedTemplate.bind(this, item);\r\n            item.tabs = this._prepareItems(item.tabs, true, path, true)\r\n        }\r\n    },\r\n    _tryPrepareItemTemplate: function(item) {\r\n        if (item.template) {\r\n            item.template = this._getTemplate(item.template)\r\n        }\r\n    },\r\n    _checkGrouping: function(items) {\r\n        if (items) {\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = items[i];\r\n                if (\"group\" === item.itemType) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _renderLayout: function() {\r\n        var that = this;\r\n        var items = that.option(\"items\");\r\n        var $content = that._getContent();\r\n        items = that._prepareItems(items);\r\n        that._rootLayoutManager = that._renderLayoutManager(items, $content, {\r\n            colCount: that.option(\"colCount\"),\r\n            alignItemLabels: that.option(\"alignItemLabels\"),\r\n            screenByWidth: this.option(\"screenByWidth\"),\r\n            colCountByScreen: this.option(\"colCountByScreen\"),\r\n            onLayoutChanged: function(inOneColumn) {\r\n                that._alignLabels.bind(that)(that._rootLayoutManager, inOneColumn)\r\n            },\r\n            onContentReady: function(e) {\r\n                that._alignLabels(e.component, e.component.isSingleColumnMode())\r\n            }\r\n        })\r\n    },\r\n    _tryGetItemsForTemplate: function(item) {\r\n        return item.items || []\r\n    },\r\n    _itemTabbedTemplate: function(item, e, $container) {\r\n        var _this = this;\r\n        var $tabPanel = (0, _renderer2.default)(\"<div>\").appendTo($container);\r\n        var tabPanelOptions = (0, _extend.extend)({}, item.tabPanelOptions, {\r\n            dataSource: item.tabs,\r\n            onItemRendered: function(args) {\r\n                return (0, _dom.triggerShownEvent)(args.itemElement)\r\n            },\r\n            itemTemplate: function(itemData, e, container) {\r\n                var $container = (0, _renderer2.default)(container);\r\n                var alignItemLabels = (0, _common.ensureDefined)(itemData.alignItemLabels, true);\r\n                var layoutManager = _this._renderLayoutManager(_this._tryGetItemsForTemplate(itemData), $container, {\r\n                    colCount: itemData.colCount,\r\n                    alignItemLabels: alignItemLabels,\r\n                    screenByWidth: _this.option(\"screenByWidth\"),\r\n                    colCountByScreen: itemData.colCountByScreen,\r\n                    cssItemClass: itemData.cssItemClass,\r\n                    onLayoutChanged: function(inOneColumn) {\r\n                        _this._alignLabelsInColumn({\r\n                            $container: $container,\r\n                            layoutManager: layoutManager,\r\n                            items: itemData.items,\r\n                            inOneColumn: inOneColumn\r\n                        })\r\n                    }\r\n                });\r\n                if (_this._itemsRunTimeInfo) {\r\n                    _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(itemData.guid, {\r\n                        layoutManager: layoutManager\r\n                    })\r\n                }\r\n                if (alignItemLabels) {\r\n                    _this._alignLabelsInColumn({\r\n                        $container: $container,\r\n                        layoutManager: layoutManager,\r\n                        items: itemData.items,\r\n                        inOneColumn: layoutManager.isSingleColumnMode()\r\n                    })\r\n                }\r\n            }\r\n        });\r\n        var tryUpdateTabPanelInstance = function(items, instance) {\r\n            if (Array.isArray(items)) {\r\n                items.forEach(function(item) {\r\n                    return _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\r\n                        widgetInstance: instance\r\n                    })\r\n                })\r\n            }\r\n        };\r\n        var tabPanel = this._createComponent($tabPanel, _tab_panel2.default, tabPanelOptions);\r\n        tabPanel.on(\"optionChanged\", function(e) {\r\n            if (\"dataSource\" === e.fullName) {\r\n                tryUpdateTabPanelInstance(e.value, e.component)\r\n            }\r\n        });\r\n        tryUpdateTabPanelInstance([{\r\n            guid: item.guid\r\n        }].concat(_toConsumableArray(item.tabs)), tabPanel)\r\n    },\r\n    _itemGroupTemplate: function(item, e, $container) {\r\n        var $group = (0, _renderer2.default)(\"<div>\").toggleClass(FORM_GROUP_WITH_CAPTION_CLASS, (0, _type.isDefined)(item.caption) && item.caption.length).addClass(FORM_GROUP_CLASS).appendTo($container);\r\n        var $groupContent;\r\n        var colCount;\r\n        var layoutManager;\r\n        if (item.caption) {\r\n            (0, _renderer2.default)(\"<span>\").addClass(FORM_GROUP_CAPTION_CLASS).text(item.caption).appendTo($group)\r\n        }\r\n        $groupContent = (0, _renderer2.default)(\"<div>\").addClass(FORM_GROUP_CONTENT_CLASS).appendTo($group);\r\n        if (item.groupContentTemplate) {\r\n            var data = {\r\n                formData: this.option(\"formData\"),\r\n                component: this\r\n            };\r\n            item.groupContentTemplate.render({\r\n                model: data,\r\n                container: (0, _dom.getPublicElement)($groupContent)\r\n            })\r\n        } else {\r\n            layoutManager = this._renderLayoutManager(this._tryGetItemsForTemplate(item), $groupContent, {\r\n                colCount: item.colCount,\r\n                colCountByScreen: item.colCountByScreen,\r\n                alignItemLabels: item.alignItemLabels,\r\n                cssItemClass: item.cssItemClass\r\n            });\r\n            this._itemsRunTimeInfo && this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\r\n                layoutManager: layoutManager\r\n            });\r\n            colCount = layoutManager._getColCount();\r\n            if ((0, _array.inArray)(colCount, this._groupsColCount) === -1) {\r\n                this._groupsColCount.push(colCount)\r\n            }\r\n            $group.addClass(GROUP_COL_COUNT_CLASS + colCount)\r\n        }\r\n    },\r\n    _renderLayoutManager: function(items, $rootElement, options) {\r\n        var $element = (0, _renderer2.default)(\"<div>\");\r\n        var that = this;\r\n        var instance;\r\n        var config = that._getLayoutManagerConfig(items, options);\r\n        var baseColCountByScreen = {\r\n            lg: options.colCount,\r\n            md: options.colCount,\r\n            sm: options.colCount,\r\n            xs: 1\r\n        };\r\n        that._cachedColCountOptions.push({\r\n            colCountByScreen: (0, _extend.extend)(baseColCountByScreen, options.colCountByScreen)\r\n        });\r\n        $element.appendTo($rootElement);\r\n        instance = that._createComponent($element, \"dxLayoutManager\", config);\r\n        instance.on(\"autoColCountChanged\", function() {\r\n            that._refresh()\r\n        });\r\n        that._cachedLayoutManagers.push(instance);\r\n        return instance\r\n    },\r\n    _getValidationGroup: function() {\r\n        return this.option(\"validationGroup\") || this\r\n    },\r\n    _getLayoutManagerConfig: function(items, options) {\r\n        var _this2 = this;\r\n        var baseConfig = {\r\n            form: this,\r\n            validationGroup: this._getValidationGroup(),\r\n            showRequiredMark: this.option(\"showRequiredMark\"),\r\n            showOptionalMark: this.option(\"showOptionalMark\"),\r\n            requiredMark: this.option(\"requiredMark\"),\r\n            optionalMark: this.option(\"optionalMark\"),\r\n            requiredMessage: this.option(\"requiredMessage\"),\r\n            screenByWidth: this.option(\"screenByWidth\"),\r\n            layoutData: this.option(\"formData\"),\r\n            labelLocation: this.option(\"labelLocation\"),\r\n            customizeItem: this.option(\"customizeItem\"),\r\n            minColWidth: this.option(\"minColWidth\"),\r\n            showColonAfterLabel: this.option(\"showColonAfterLabel\"),\r\n            onEditorEnterKey: this.option(\"onEditorEnterKey\"),\r\n            onFieldDataChanged: function(args) {\r\n                if (!_this2._isDataUpdating) {\r\n                    _this2._triggerOnFieldDataChanged(args)\r\n                }\r\n            },\r\n            validationBoundary: this.option(\"scrollingEnabled\") ? this.$element() : void 0\r\n        };\r\n        return (0, _extend.extend)(baseConfig, {\r\n            items: items,\r\n            onContentReady: function(args) {\r\n                _this2._itemsRunTimeInfo.addItemsOrExtendFrom(args.component._itemsRunTimeInfo);\r\n                options.onContentReady && options.onContentReady(args)\r\n            },\r\n            onDisposing: function(_ref2) {\r\n                var component = _ref2.component;\r\n                var nestedItemsRunTimeInfo = component.getItemsRunTimeInfo();\r\n                _this2._itemsRunTimeInfo.removeItemsByItems(nestedItemsRunTimeInfo)\r\n            },\r\n            colCount: options.colCount,\r\n            alignItemLabels: options.alignItemLabels,\r\n            cssItemClass: options.cssItemClass,\r\n            colCountByScreen: options.colCountByScreen,\r\n            onLayoutChanged: options.onLayoutChanged,\r\n            width: options.width\r\n        })\r\n    },\r\n    _createComponent: function($element, type, config) {\r\n        var that = this;\r\n        config = config || {};\r\n        that._extendConfig(config, {\r\n            readOnly: that.option(\"readOnly\")\r\n        });\r\n        return that.callBase($element, type, config)\r\n    },\r\n    _attachSyncSubscriptions: function() {\r\n        var that = this;\r\n        that.on(\"optionChanged\", function(args) {\r\n            var optionFullName = args.fullName;\r\n            if (\"formData\" === optionFullName) {\r\n                if (!(0, _type.isDefined)(args.value)) {\r\n                    that._options.formData = args.value = {}\r\n                }\r\n                that._triggerOnFieldDataChangedByDataSet(args.value)\r\n            }\r\n            if (that._cachedLayoutManagers.length) {\r\n                (0, _iterator.each)(that._cachedLayoutManagers, function(index, layoutManager) {\r\n                    if (\"formData\" === optionFullName) {\r\n                        that._isDataUpdating = true;\r\n                        layoutManager.option(\"layoutData\", args.value);\r\n                        that._isDataUpdating = false\r\n                    }\r\n                    if (\"readOnly\" === args.name || \"disabled\" === args.name) {\r\n                        layoutManager.option(optionFullName, args.value)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        var rootNameOfComplexOption = this._getRootLevelOfExpectedComplexOption(args.fullName, [\"formData\", \"items\"]);\r\n        if (rootNameOfComplexOption) {\r\n            this._customHandlerOfComplexOption(args, rootNameOfComplexOption);\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"formData\":\r\n                if (!this.option(\"items\")) {\r\n                    this._invalidate()\r\n                } else {\r\n                    if ((0, _type.isEmptyObject)(args.value)) {\r\n                        this._resetValues()\r\n                    }\r\n                }\r\n                break;\r\n            case \"items\":\r\n            case \"colCount\":\r\n            case \"onFieldDataChanged\":\r\n            case \"onEditorEnterKey\":\r\n            case \"labelLocation\":\r\n            case \"alignItemLabels\":\r\n            case \"showColonAfterLabel\":\r\n            case \"customizeItem\":\r\n            case \"alignItemLabelsInAllGroups\":\r\n            case \"showRequiredMark\":\r\n            case \"showOptionalMark\":\r\n            case \"requiredMark\":\r\n            case \"optionalMark\":\r\n            case \"requiredMessage\":\r\n            case \"scrollingEnabled\":\r\n            case \"formID\":\r\n            case \"colCountByScreen\":\r\n            case \"screenByWidth\":\r\n            case \"stylingMode\":\r\n                this._invalidate();\r\n                break;\r\n            case \"showValidationSummary\":\r\n                this._renderValidationSummary();\r\n                break;\r\n            case \"minColWidth\":\r\n                if (\"auto\" === this.option(\"colCount\")) {\r\n                    this._invalidate()\r\n                }\r\n                break;\r\n            case \"readOnly\":\r\n                break;\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._rootLayoutManager.option(args.name, args.value);\r\n                this._alignLabels(this._rootLayoutManager, this._rootLayoutManager.isSingleColumnMode());\r\n                break;\r\n            case \"visible\":\r\n                this.callBase(args);\r\n                if (args.value) {\r\n                    (0, _dom.triggerShownEvent)(this.$element())\r\n                }\r\n                break;\r\n            case \"validationGroup\":\r\n                _validation_engine2.default.removeGroup(args.previousValue || this);\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _getRootLevelOfExpectedComplexOption: function(fullOptionName, expectedRootNames) {\r\n        var splitFullName = fullOptionName.split(\".\");\r\n        var result;\r\n        if (splitFullName.length > 1) {\r\n            var i;\r\n            var rootOptionName = splitFullName[0];\r\n            for (i = 0; i < expectedRootNames.length; i++) {\r\n                if (rootOptionName.search(expectedRootNames[i]) !== -1) {\r\n                    result = expectedRootNames[i]\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _tryCreateItemOptionAction: function(optionName, item, value, previousValue, itemPath) {\r\n        if (\"tabs\" === optionName) {\r\n            this._itemsRunTimeInfo.removeItemsByPathStartWith(\"\".concat(itemPath, \".tabs\"));\r\n            value = this._prepareItems(value, true, itemPath, true)\r\n        }\r\n        return (0, _uiForm6.default)(optionName, {\r\n            item: item,\r\n            value: value,\r\n            previousValue: previousValue,\r\n            itemsRunTimeInfo: this._itemsRunTimeInfo\r\n        })\r\n    },\r\n    _tryExecuteItemOptionAction: function(action) {\r\n        return action && action.tryExecute()\r\n    },\r\n    _updateValidationGroupAndSummaryIfNeeded: function(fullName) {\r\n        var optionName = (0, _uiForm7.getOptionNameFromFullName)(fullName);\r\n        if (ITEM_OPTIONS_FOR_VALIDATION_UPDATING.indexOf(optionName) > -1) {\r\n            _validation_engine2.default.addGroup(this._getValidationGroup());\r\n            if (this.option(\"showValidationSummary\")) {\r\n                this._validationSummary && this._validationSummary._initGroupRegistration()\r\n            }\r\n        }\r\n    },\r\n    _setLayoutManagerItemOption: function(layoutManager, optionName, value, path) {\r\n        var _this3 = this;\r\n        if (this._updateLockCount > 0) {\r\n            !layoutManager._updateLockCount && layoutManager.beginUpdate();\r\n            var key = this._itemsRunTimeInfo.getKeyByPath(path);\r\n            this.postponedOperations.add(key, function() {\r\n                layoutManager.endUpdate();\r\n                return (new _deferred.Deferred).resolve()\r\n            })\r\n        }\r\n        var contentReadyHandler = function contentReadyHandler(e) {\r\n            e.component.off(\"contentReady\", contentReadyHandler);\r\n            if ((0, _uiForm7.isFullPathContainsTabs)(path)) {\r\n                var tabPath = (0, _uiForm7.tryGetTabPath)(path);\r\n                var tabLayoutManager = _this3._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(tabPath);\r\n                _this3._alignLabelsInColumn({\r\n                    items: tabLayoutManager.option(\"items\"),\r\n                    layoutManager: tabLayoutManager,\r\n                    $container: tabLayoutManager.$element(),\r\n                    inOneColumn: tabLayoutManager.isSingleColumnMode()\r\n                })\r\n            } else {\r\n                _this3._alignLabels(_this3._rootLayoutManager, _this3._rootLayoutManager.isSingleColumnMode())\r\n            }\r\n        };\r\n        layoutManager.on(\"contentReady\", contentReadyHandler);\r\n        layoutManager.option(optionName, value);\r\n        this._updateValidationGroupAndSummaryIfNeeded(optionName)\r\n    },\r\n    _tryChangeLayoutManagerItemOption: function(fullName, value) {\r\n        var nameParts = fullName.split(\".\");\r\n        var optionName = (0, _uiForm7.getOptionNameFromFullName)(fullName);\r\n        if (\"items\" === optionName && nameParts.length > 1) {\r\n            var itemPath = this._getItemPath(nameParts);\r\n            var layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(itemPath);\r\n            if (layoutManager) {\r\n                this._itemsRunTimeInfo.removeItemsByItems(layoutManager.getItemsRunTimeInfo());\r\n                var items = this._prepareItems(value, false, itemPath);\r\n                this._setLayoutManagerItemOption(layoutManager, optionName, items, itemPath);\r\n                return true\r\n            }\r\n        } else {\r\n            if (nameParts.length > 2) {\r\n                var endPartIndex = nameParts.length - 2;\r\n                var _itemPath = this._getItemPath(nameParts.slice(0, endPartIndex));\r\n                var _layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(_itemPath);\r\n                if (_layoutManager) {\r\n                    var fullOptionName = (0, _uiForm7.getFullOptionName)(nameParts[endPartIndex], optionName);\r\n                    this._setLayoutManagerItemOption(_layoutManager, fullOptionName, value, _itemPath);\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _tryChangeLayoutManagerItemOptions: function(itemPath, options) {\r\n        var _this4 = this;\r\n        var result;\r\n        this.beginUpdate();\r\n        (0, _iterator.each)(options, function(optionName, optionValue) {\r\n            result = _this4._tryChangeLayoutManagerItemOption((0, _uiForm7.getFullOptionName)(itemPath, optionName), optionValue);\r\n            if (!result) {\r\n                return false\r\n            }\r\n        });\r\n        this.endUpdate();\r\n        return result\r\n    },\r\n    _customHandlerOfComplexOption: function(args, rootOptionName) {\r\n        var nameParts = args.fullName.split(\".\");\r\n        var value = args.value;\r\n        if (\"items\" === rootOptionName) {\r\n            var itemPath = this._getItemPath(nameParts);\r\n            var item = this.option(itemPath);\r\n            var optionNameWithoutPath = args.fullName.replace(itemPath + \".\", \"\");\r\n            var simpleOptionName = optionNameWithoutPath.split(\".\")[0].replace(/\\[\\d+]/, \"\");\r\n            var itemAction = this._tryCreateItemOptionAction(simpleOptionName, item, item[simpleOptionName], args.previousValue, itemPath);\r\n            if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(args.fullName, value)) {\r\n                if (item) {\r\n                    this._changeItemOption(item, optionNameWithoutPath, value);\r\n                    var items = this._generateItemsFromData(this.option(\"items\"));\r\n                    this.option(\"items\", items)\r\n                }\r\n            }\r\n        }\r\n        if (\"formData\" === rootOptionName) {\r\n            var dataField = nameParts.slice(1).join(\".\");\r\n            var editor = this.getEditor(dataField);\r\n            if (editor) {\r\n                editor.option(\"value\", value)\r\n            } else {\r\n                this._triggerOnFieldDataChanged({\r\n                    dataField: dataField,\r\n                    value: value\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _getItemPath: function(nameParts) {\r\n        var itemPath = nameParts[0];\r\n        var i;\r\n        for (i = 1; i < nameParts.length; i++) {\r\n            if (nameParts[i].search(/items\\[\\d+]|tabs\\[\\d+]/) !== -1) {\r\n                itemPath += \".\" + nameParts[i]\r\n            } else {\r\n                break\r\n            }\r\n        }\r\n        return itemPath\r\n    },\r\n    _triggerOnFieldDataChanged: function(args) {\r\n        this._createActionByOption(\"onFieldDataChanged\")(args)\r\n    },\r\n    _triggerOnFieldDataChangedByDataSet: function(data) {\r\n        var that = this;\r\n        if (data && (0, _type.isObject)(data)) {\r\n            (0, _iterator.each)(data, function(dataField, value) {\r\n                that._triggerOnFieldDataChanged({\r\n                    dataField: dataField,\r\n                    value: value\r\n                })\r\n            })\r\n        }\r\n    },\r\n    _updateFieldValue: function(dataField, value) {\r\n        if ((0, _type.isDefined)(this.option(\"formData\"))) {\r\n            var editor = this.getEditor(dataField);\r\n            this.option(\"formData.\" + dataField, value);\r\n            if (editor) {\r\n                var editorValue = editor.option(\"value\");\r\n                if (editorValue !== value) {\r\n                    editor.option(\"value\", value)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _generateItemsFromData: function(items) {\r\n        var formData = this.option(\"formData\");\r\n        var result = [];\r\n        if (!items && (0, _type.isDefined)(formData)) {\r\n            (0, _iterator.each)(formData, function(dataField) {\r\n                result.push({\r\n                    dataField: dataField\r\n                })\r\n            })\r\n        }\r\n        if (items) {\r\n            (0, _iterator.each)(items, function(index, item) {\r\n                if ((0, _type.isObject)(item)) {\r\n                    result.push(item)\r\n                } else {\r\n                    result.push({\r\n                        dataField: item\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    _getItemByField: function(field, items) {\r\n        var that = this;\r\n        var fieldParts = (0, _type.isObject)(field) ? field : that._getFieldParts(field);\r\n        var fieldName = fieldParts.fieldName;\r\n        var fieldPath = fieldParts.fieldPath;\r\n        var resultItem;\r\n        if (items.length) {\r\n            (0, _iterator.each)(items, function(index, item) {\r\n                var itemType = item.itemType;\r\n                if (fieldPath.length) {\r\n                    var path = fieldPath.slice();\r\n                    item = that._getItemByFieldPath(path, fieldName, item)\r\n                } else {\r\n                    if (\"group\" === itemType && !(item.caption || item.name) || \"tabbed\" === itemType && !item.name) {\r\n                        var subItemsField = that._getSubItemField(itemType);\r\n                        item.items = that._generateItemsFromData(item.items);\r\n                        item = that._getItemByField({\r\n                            fieldName: fieldName,\r\n                            fieldPath: fieldPath\r\n                        }, item[subItemsField])\r\n                    }\r\n                }\r\n                if ((0, _uiForm7.isExpectedItem)(item, fieldName)) {\r\n                    resultItem = item;\r\n                    return false\r\n                }\r\n            })\r\n        }\r\n        return resultItem\r\n    },\r\n    _getFieldParts: function(field) {\r\n        var fieldSeparator = \".\";\r\n        var fieldName = field;\r\n        var separatorIndex = fieldName.indexOf(fieldSeparator);\r\n        var resultPath = [];\r\n        while (separatorIndex !== -1) {\r\n            resultPath.push(fieldName.substr(0, separatorIndex));\r\n            fieldName = fieldName.substr(separatorIndex + 1);\r\n            separatorIndex = fieldName.indexOf(fieldSeparator)\r\n        }\r\n        return {\r\n            fieldName: fieldName,\r\n            fieldPath: resultPath.reverse()\r\n        }\r\n    },\r\n    _getItemByFieldPath: function(path, fieldName, item) {\r\n        var that = this;\r\n        var itemType = item.itemType;\r\n        var subItemsField = that._getSubItemField(itemType);\r\n        var isItemWithSubItems = \"group\" === itemType || \"tabbed\" === itemType || item.title;\r\n        var result;\r\n        do {\r\n            if (isItemWithSubItems) {\r\n                var name = item.name || item.caption || item.title;\r\n                var isGroupWithName = (0, _type.isDefined)(name);\r\n                var nameWithoutSpaces = (0, _uiForm7.getTextWithoutSpaces)(name);\r\n                var pathNode;\r\n                item[subItemsField] = that._generateItemsFromData(item[subItemsField]);\r\n                if (isGroupWithName) {\r\n                    pathNode = path.pop()\r\n                }\r\n                if (!path.length) {\r\n                    result = that._getItemByField(fieldName, item[subItemsField]);\r\n                    if (result) {\r\n                        break\r\n                    }\r\n                }\r\n                if (!isGroupWithName || isGroupWithName && nameWithoutSpaces === pathNode) {\r\n                    if (path.length) {\r\n                        result = that._searchItemInEverySubItem(path, fieldName, item[subItemsField])\r\n                    }\r\n                }\r\n            } else {\r\n                break\r\n            }\r\n        } while (path.length && !(0, _type.isDefined)(result));\r\n        return result\r\n    },\r\n    _getSubItemField: function(itemType) {\r\n        return \"tabbed\" === itemType ? \"tabs\" : \"items\"\r\n    },\r\n    _searchItemInEverySubItem: function(path, fieldName, items) {\r\n        var that = this;\r\n        var result;\r\n        (0, _iterator.each)(items, function(index, groupItem) {\r\n            result = that._getItemByFieldPath(path.slice(), fieldName, groupItem);\r\n            if (result) {\r\n                return false\r\n            }\r\n        });\r\n        if (!result) {\r\n            result = false\r\n        }\r\n        return result\r\n    },\r\n    _changeItemOption: function(item, option, value) {\r\n        if ((0, _type.isObject)(item)) {\r\n            item[option] = value\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        var currentScreenFactor = this._getCurrentScreenFactor();\r\n        if (this._lastMarkupScreenFactor !== currentScreenFactor) {\r\n            if (this._isColCountChanged(this._lastMarkupScreenFactor, currentScreenFactor)) {\r\n                this._targetScreenFactor = currentScreenFactor;\r\n                this._refresh();\r\n                this._targetScreenFactor = void 0\r\n            }\r\n            this._lastMarkupScreenFactor = currentScreenFactor\r\n        }\r\n    },\r\n    _isColCountChanged: function(oldScreenSize, newScreenSize) {\r\n        var isChanged = false;\r\n        (0, _iterator.each)(this._cachedColCountOptions, function(index, item) {\r\n            if (item.colCountByScreen[oldScreenSize] !== item.colCountByScreen[newScreenSize]) {\r\n                isChanged = true;\r\n                return false\r\n            }\r\n        });\r\n        return isChanged\r\n    },\r\n    _refresh: function() {\r\n        var editorSelector = \".\" + FOCUSED_STATE_CLASS + \" input, .\" + FOCUSED_STATE_CLASS + \" textarea\";\r\n        _events_engine2.default.trigger(this.$element().find(editorSelector), \"change\");\r\n        this.callBase()\r\n    },\r\n    _resetValues: function() {\r\n        this._itemsRunTimeInfo.each(function(_, itemRunTimeInfo) {\r\n            if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance) && itemRunTimeInfo.widgetInstance instanceof _editor2.default) {\r\n                itemRunTimeInfo.widgetInstance.reset();\r\n                itemRunTimeInfo.widgetInstance.option(\"isValid\", true)\r\n            }\r\n        });\r\n        _validation_engine2.default.resetGroup(this._getValidationGroup())\r\n    },\r\n    _updateData: function(data, value, isComplexData) {\r\n        var that = this;\r\n        var _data = isComplexData ? value : data;\r\n        if ((0, _type.isObject)(_data)) {\r\n            (0, _iterator.each)(_data, function(dataField, fieldValue) {\r\n                that._updateData(isComplexData ? data + \".\" + dataField : dataField, fieldValue, (0, _type.isObject)(fieldValue))\r\n            })\r\n        } else {\r\n            if ((0, _type.isString)(data)) {\r\n                that._updateFieldValue(data, value)\r\n            }\r\n        }\r\n    },\r\n    registerKeyHandler: function(key, handler) {\r\n        this.callBase(key, handler);\r\n        this._itemsRunTimeInfo.each(function(_, itemRunTimeInfo) {\r\n            if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance)) {\r\n                itemRunTimeInfo.widgetInstance.registerKeyHandler(key, handler)\r\n            }\r\n        })\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element().find(\".\" + FIELD_ITEM_CONTENT_CLASS + \" [tabindex]\").first()\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible && _browser2.default.msie) {\r\n            this._refresh()\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        _validation_engine2.default.removeGroup(this._getValidationGroup());\r\n        this.callBase()\r\n    },\r\n    resetValues: function() {\r\n        this._resetValues()\r\n    },\r\n    updateData: function(data, value) {\r\n        this._updateData(data, value)\r\n    },\r\n    getEditor: function(dataField) {\r\n        return this._itemsRunTimeInfo.findWidgetInstanceByDataField(dataField) || this._itemsRunTimeInfo.findWidgetInstanceByName(dataField)\r\n    },\r\n    getButton: function(name) {\r\n        return this._itemsRunTimeInfo.findWidgetInstanceByName(name)\r\n    },\r\n    updateDimensions: function() {\r\n        var that = this;\r\n        var deferred = new _deferred.Deferred;\r\n        if (that._scrollable) {\r\n            that._scrollable.update().done(function() {\r\n                deferred.resolveWith(that)\r\n            })\r\n        } else {\r\n            deferred.resolveWith(that)\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    itemOption: function(id, option, value) {\r\n        var _this5 = this;\r\n        var items = this._generateItemsFromData(this.option(\"items\"));\r\n        var item = this._getItemByField(id, items);\r\n        var path = this._itemsRunTimeInfo.getPathFromItem(item);\r\n        if (!item) {\r\n            return\r\n        }\r\n        switch (arguments.length) {\r\n            case 1:\r\n                return item;\r\n            case 3:\r\n                var itemAction = this._tryCreateItemOptionAction(option, item, value, item[option], path);\r\n                this._changeItemOption(item, option, value);\r\n                var fullName = (0, _uiForm7.getFullOptionName)(path, option);\r\n                if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(fullName, value)) {\r\n                    this.option(\"items\", items)\r\n                }\r\n                break;\r\n            default:\r\n                if ((0, _type.isObject)(option)) {\r\n                    if (!this._tryChangeLayoutManagerItemOptions(path, option)) {\r\n                        var allowUpdateItems;\r\n                        (0, _iterator.each)(option, function(optionName, optionValue) {\r\n                            var itemAction = _this5._tryCreateItemOptionAction(optionName, item, optionValue, item[optionName], path);\r\n                            _this5._changeItemOption(item, optionName, optionValue);\r\n                            if (!allowUpdateItems && !_this5._tryExecuteItemOptionAction(itemAction)) {\r\n                                allowUpdateItems = true\r\n                            }\r\n                        });\r\n                        allowUpdateItems && this.option(\"items\", items)\r\n                    }\r\n                }\r\n        }\r\n    },\r\n    validate: function() {\r\n        return _validation_engine2.default.validateGroup(this._getValidationGroup())\r\n    },\r\n    getItemID: function(name) {\r\n        return \"dx_\" + this.option(\"formID\") + \"_\" + (name || new _guid2.default)\r\n    },\r\n    getTargetScreenFactor: function() {\r\n        return this._targetScreenFactor\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxForm\", Form);\r\nmodule.exports = Form;\r\n"]},"metadata":{},"sourceType":"module"}