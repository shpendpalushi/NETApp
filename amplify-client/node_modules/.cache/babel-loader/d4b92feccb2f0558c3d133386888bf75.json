{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/file_provider/array.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _array = require(\"../../../core/utils/array\");\n\nvar _common = require(\"../../../core/utils/common\");\n\nvar _data = require(\"../../../core/utils/data\");\n\nvar _guid = require(\"../../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _type = require(\"../../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _errors = require(\"../../../data/errors\");\n\nvar _file_provider = require(\"./file_provider\");\n\nvar _uiFile_manager = require(\"../ui.file_manager.common\");\n\nvar _uiFile_manager2 = require(\"../ui.file_manager.utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar ArrayFileProvider = function (_FileProvider) {\n  _inherits(ArrayFileProvider, _FileProvider);\n\n  function ArrayFileProvider(options) {\n    var _this;\n\n    _classCallCheck(this, ArrayFileProvider);\n\n    options = (0, _common.ensureDefined)(options, {});\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ArrayFileProvider).call(this, options));\n    var initialArray = options.data;\n\n    if (initialArray && !Array.isArray(initialArray)) {\n      throw _errors.errors.Error(\"E4006\");\n    }\n\n    var itemsExpr = options.itemsExpr || \"items\";\n    _this._subFileItemsGetter = (0, _data.compileGetter)(itemsExpr);\n    _this._subFileItemsSetter = _this._getSetter(itemsExpr);\n\n    var nameExpr = _this._getNameExpr(options);\n\n    _this._nameSetter = _this._getSetter(nameExpr);\n\n    var isDirExpr = _this._getIsDirExpr(options);\n\n    _this._getIsDirSetter = _this._getSetter(isDirExpr);\n\n    var keyExpr = _this._getKeyExpr(options);\n\n    _this._keySetter = _this._getSetter(keyExpr);\n    _this._data = initialArray || [];\n    return _this;\n  }\n\n  _createClass(ArrayFileProvider, [{\n    key: \"getItems\",\n    value: function value(pathInfo) {\n      return this._getItems(pathInfo);\n    }\n  }, {\n    key: \"renameItem\",\n    value: function value(item, name) {\n      if (!item) {\n        return;\n      }\n\n      this._nameSetter(item.dataItem, name);\n\n      item.name = name;\n      item.key = this._ensureDataObjectKey(item.dataItem);\n    }\n  }, {\n    key: \"createFolder\",\n    value: function value(parentDir, name) {\n      if (!this._isFileItemExists(parentDir) || this._isDirGetter(parentDir.fileItem)) {\n        throw {\n          errorId: _uiFile_manager.ErrorCode.DirectoryNotFound,\n          fileItem: parentDir\n        };\n      }\n\n      var newDir = {};\n\n      this._nameSetter(newDir, name);\n\n      this._getIsDirSetter(newDir, true);\n\n      this._keySetter(newDir, String(new _guid2.default()));\n\n      var array = this._getDirectoryDataItems(parentDir.dataItem);\n\n      array.push(newDir);\n\n      this._updateHasSubDirs(parentDir);\n    }\n  }, {\n    key: \"deleteItems\",\n    value: function value(items) {\n      var _this2 = this;\n\n      items.forEach(function (item) {\n        return _this2._deleteItem(item);\n      });\n    }\n  }, {\n    key: \"moveItems\",\n    value: function value(items, destinationDir) {\n      var _this3 = this;\n\n      var array = this._getDirectoryDataItems(destinationDir.dataItem);\n\n      items.forEach(function (item) {\n        _this3._checkAbilityToMoveOrCopyItem(item, destinationDir);\n\n        _this3._deleteItem(item);\n\n        array.push(item.dataItem);\n      });\n\n      this._updateHasSubDirs(destinationDir);\n    }\n  }, {\n    key: \"copyItems\",\n    value: function value(items, destinationDir) {\n      var _this4 = this;\n\n      var array = this._getDirectoryDataItems(destinationDir.dataItem);\n\n      items.forEach(function (item) {\n        _this4._checkAbilityToMoveOrCopyItem(item, destinationDir);\n\n        var copiedItem = _this4._createCopy(item.dataItem);\n\n        array.push(copiedItem);\n      });\n\n      this._updateHasSubDirs(destinationDir);\n    }\n  }, {\n    key: \"_checkAbilityToMoveOrCopyItem\",\n    value: function value(item, destinationDir) {\n      var _this5 = this;\n\n      var itemKey = this._getKeyFromDataObject(item.dataItem, item.parentPath);\n\n      var pathInfo = destinationDir.getFullPathInfo();\n      var currentPath = \"\";\n      pathInfo.forEach(function (info) {\n        currentPath = (0, _uiFile_manager2.pathCombine)(currentPath, info.name);\n\n        var pathKey = _this5._getDataObjectKey(info.key, currentPath);\n\n        if (pathKey === itemKey) {\n          throw {\n            errorId: _uiFile_manager.ErrorCode.Other,\n            fileItem: item\n          };\n        }\n      });\n    }\n  }, {\n    key: \"_createCopy\",\n    value: function value(dataObj) {\n      var _this6 = this;\n\n      var copyObj = {};\n\n      this._nameSetter(copyObj, this._nameGetter(dataObj));\n\n      this._getIsDirSetter(copyObj, this._isDirGetter(dataObj));\n\n      var items = this._subFileItemsGetter(dataObj);\n\n      if (Array.isArray(items)) {\n        var itemsCopy = [];\n        items.forEach(function (childItem) {\n          var childCopy = _this6._createCopy(childItem);\n\n          itemsCopy.push(childCopy);\n        });\n\n        this._subFileItemsSetter(copyObj, itemsCopy);\n      }\n\n      return copyObj;\n    }\n  }, {\n    key: \"_deleteItem\",\n    value: function value(fileItem) {\n      var fileItemObj = this._findFileItemObj(fileItem.getFullPathInfo());\n\n      if (!fileItemObj) {\n        throw {\n          errorId: fileItem.isDirectory ? _uiFile_manager.ErrorCode.DirectoryNotFound : _uiFile_manager.ErrorCode.FileNotFound,\n          fileItem: fileItem\n        };\n      }\n\n      var parentDirDataObj = this._findFileItemObj(fileItem.pathInfo);\n\n      var array = this._getDirectoryDataItems(parentDirDataObj);\n\n      var index = array.indexOf(fileItemObj);\n      array.splice(index, 1);\n    }\n  }, {\n    key: \"_getDirectoryDataItems\",\n    value: function value(directoryDataObj) {\n      if (!directoryDataObj) {\n        return this._data;\n      }\n\n      var dataItems = this._subFileItemsGetter(directoryDataObj);\n\n      if (!Array.isArray(dataItems)) {\n        dataItems = [];\n\n        this._subFileItemsSetter(directoryDataObj, dataItems);\n      }\n\n      return dataItems;\n    }\n  }, {\n    key: \"_getItems\",\n    value: function value(pathInfo) {\n      var parentDirKey = pathInfo && pathInfo.length > 0 ? pathInfo[pathInfo.length - 1].key : null;\n      var dirFileObjects = this._data;\n\n      if (parentDirKey) {\n        var directoryEntry = this._findFileItemObj(pathInfo);\n\n        dirFileObjects = directoryEntry && this._subFileItemsGetter(directoryEntry) || [];\n      }\n\n      this._ensureKeysForDuplicateNameItems(dirFileObjects);\n\n      return this._convertDataObjectsToFileItems(dirFileObjects, pathInfo);\n    }\n  }, {\n    key: \"_ensureKeysForDuplicateNameItems\",\n    value: function value(dataObjects) {\n      var _this7 = this;\n\n      var names = {};\n      dataObjects.forEach(function (obj) {\n        var name = _this7._nameGetter(obj);\n\n        if (names[name]) {\n          _this7._ensureDataObjectKey(obj);\n        } else {\n          names[name] = true;\n        }\n      });\n    }\n  }, {\n    key: \"_findFileItemObj\",\n    value: function value(pathInfo) {\n      var _this8 = this;\n\n      if (!Array.isArray(pathInfo)) {\n        pathInfo = [];\n      }\n\n      var currentPath = \"\";\n      var fileItemObj = null;\n      var fileItemObjects = this._data;\n\n      var _loop = function _loop(i) {\n        fileItemObj = (0, _array.find)(fileItemObjects, function (item) {\n          var hasCorrectFileItemType = _this8._isDirGetter(item) || i === pathInfo.length - 1;\n          return _this8._getKeyFromDataObject(item, currentPath) === pathInfo[i].key && _this8._nameGetter(item) === pathInfo[i].name && hasCorrectFileItemType;\n        });\n\n        if (fileItemObj) {\n          currentPath = (0, _uiFile_manager2.pathCombine)(currentPath, _this8._nameGetter(fileItemObj));\n          fileItemObjects = _this8._subFileItemsGetter(fileItemObj);\n        }\n      };\n\n      for (var i = 0; i < pathInfo.length && (0 === i || fileItemObj); i++) {\n        _loop(i);\n      }\n\n      return fileItemObj;\n    }\n  }, {\n    key: \"_getKeyFromDataObject\",\n    value: function value(dataObj, defaultKeyPrefix) {\n      var key = this._keyGetter(dataObj);\n\n      var relativeName = (0, _uiFile_manager2.pathCombine)(defaultKeyPrefix, this._nameGetter(dataObj));\n      return this._getDataObjectKey(key, relativeName);\n    }\n  }, {\n    key: \"_getDataObjectKey\",\n    value: function value(key, relativeName) {\n      return key ? key : relativeName;\n    }\n  }, {\n    key: \"_ensureDataObjectKey\",\n    value: function value(dataObj) {\n      var key = this._keyGetter(dataObj);\n\n      if (!key) {\n        key = String(new _guid2.default());\n\n        this._keySetter(dataObj, key);\n      }\n\n      return key;\n    }\n  }, {\n    key: \"_updateHasSubDirs\",\n    value: function value(dir) {\n      if (dir && !dir.isRoot) {\n        dir.hasSubDirs = this._hasSubDirs(dir.dataItem);\n      }\n    }\n  }, {\n    key: \"_hasSubDirs\",\n    value: function value(dataObj) {\n      var subItems = (0, _common.ensureDefined)(this._subFileItemsGetter(dataObj), []);\n\n      if (!Array.isArray(subItems)) {\n        return true;\n      }\n\n      for (var i = 0; i < subItems.length; i++) {\n        if (true === this._isDirGetter(subItems[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_getSetter\",\n    value: function value(expr) {\n      return _type2.default.isFunction(expr) ? expr : (0, _data.compileSetter)(expr);\n    }\n  }, {\n    key: \"_isFileItemExists\",\n    value: function value(fileItem) {\n      return fileItem.isDirectory && fileItem.isRoot || !!this._findFileItemObj(fileItem.getFullPathInfo());\n    }\n  }]);\n\n  return ArrayFileProvider;\n}(_file_provider.FileProvider);\n\nmodule.exports = ArrayFileProvider;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/file_manager/file_provider/array.js"],"names":["_array","require","_common","_data","_guid","_guid2","_interopRequireDefault","_type","_type2","_errors","_file_provider","_uiFile_manager","_uiFile_manager2","obj","Symbol","_typeof","instance","i","props","descriptor","Object","_defineProperties","Constructor","call","_assertThisInitialized","_getPrototypeOf","o","subClass","superClass","constructor","value","writable","configurable","_setPrototypeOf","ArrayFileProvider","_inherits","_classCallCheck","options","_this","_possibleConstructorReturn","initialArray","Array","itemsExpr","nameExpr","isDirExpr","keyExpr","_createClass","key","item","parentDir","errorId","fileItem","newDir","String","array","_this2","items","_this3","destinationDir","_this4","copiedItem","_this5","itemKey","pathInfo","currentPath","info","pathKey","_this6","copyObj","itemsCopy","childCopy","fileItemObj","parentDirDataObj","index","dataItems","parentDirKey","dirFileObjects","directoryEntry","_this7","names","dataObjects","name","_this8","fileItemObjects","_loop","hasCorrectFileItemType","relativeName","dir","subItems","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_manager/file_provider/array.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _array = require(\"../../../core/utils/array\");\r\nvar _common = require(\"../../../core/utils/common\");\r\nvar _data = require(\"../../../core/utils/data\");\r\nvar _guid = require(\"../../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _type = require(\"../../../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _errors = require(\"../../../data/errors\");\r\nvar _file_provider = require(\"./file_provider\");\r\nvar _uiFile_manager = require(\"../ui.file_manager.common\");\r\nvar _uiFile_manager2 = require(\"../ui.file_manager.utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar ArrayFileProvider = function(_FileProvider) {\r\n    _inherits(ArrayFileProvider, _FileProvider);\r\n\r\n    function ArrayFileProvider(options) {\r\n        var _this;\r\n        _classCallCheck(this, ArrayFileProvider);\r\n        options = (0, _common.ensureDefined)(options, {});\r\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(ArrayFileProvider).call(this, options));\r\n        var initialArray = options.data;\r\n        if (initialArray && !Array.isArray(initialArray)) {\r\n            throw _errors.errors.Error(\"E4006\")\r\n        }\r\n        var itemsExpr = options.itemsExpr || \"items\";\r\n        _this._subFileItemsGetter = (0, _data.compileGetter)(itemsExpr);\r\n        _this._subFileItemsSetter = _this._getSetter(itemsExpr);\r\n        var nameExpr = _this._getNameExpr(options);\r\n        _this._nameSetter = _this._getSetter(nameExpr);\r\n        var isDirExpr = _this._getIsDirExpr(options);\r\n        _this._getIsDirSetter = _this._getSetter(isDirExpr);\r\n        var keyExpr = _this._getKeyExpr(options);\r\n        _this._keySetter = _this._getSetter(keyExpr);\r\n        _this._data = initialArray || [];\r\n        return _this\r\n    }\r\n    _createClass(ArrayFileProvider, [{\r\n        key: \"getItems\",\r\n        value: function(pathInfo) {\r\n            return this._getItems(pathInfo)\r\n        }\r\n    }, {\r\n        key: \"renameItem\",\r\n        value: function(item, name) {\r\n            if (!item) {\r\n                return\r\n            }\r\n            this._nameSetter(item.dataItem, name);\r\n            item.name = name;\r\n            item.key = this._ensureDataObjectKey(item.dataItem)\r\n        }\r\n    }, {\r\n        key: \"createFolder\",\r\n        value: function(parentDir, name) {\r\n            if (!this._isFileItemExists(parentDir) || this._isDirGetter(parentDir.fileItem)) {\r\n                throw {\r\n                    errorId: _uiFile_manager.ErrorCode.DirectoryNotFound,\r\n                    fileItem: parentDir\r\n                }\r\n            }\r\n            var newDir = {};\r\n            this._nameSetter(newDir, name);\r\n            this._getIsDirSetter(newDir, true);\r\n            this._keySetter(newDir, String(new _guid2.default));\r\n            var array = this._getDirectoryDataItems(parentDir.dataItem);\r\n            array.push(newDir);\r\n            this._updateHasSubDirs(parentDir)\r\n        }\r\n    }, {\r\n        key: \"deleteItems\",\r\n        value: function(items) {\r\n            var _this2 = this;\r\n            items.forEach(function(item) {\r\n                return _this2._deleteItem(item)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"moveItems\",\r\n        value: function(items, destinationDir) {\r\n            var _this3 = this;\r\n            var array = this._getDirectoryDataItems(destinationDir.dataItem);\r\n            items.forEach(function(item) {\r\n                _this3._checkAbilityToMoveOrCopyItem(item, destinationDir);\r\n                _this3._deleteItem(item);\r\n                array.push(item.dataItem)\r\n            });\r\n            this._updateHasSubDirs(destinationDir)\r\n        }\r\n    }, {\r\n        key: \"copyItems\",\r\n        value: function(items, destinationDir) {\r\n            var _this4 = this;\r\n            var array = this._getDirectoryDataItems(destinationDir.dataItem);\r\n            items.forEach(function(item) {\r\n                _this4._checkAbilityToMoveOrCopyItem(item, destinationDir);\r\n                var copiedItem = _this4._createCopy(item.dataItem);\r\n                array.push(copiedItem)\r\n            });\r\n            this._updateHasSubDirs(destinationDir)\r\n        }\r\n    }, {\r\n        key: \"_checkAbilityToMoveOrCopyItem\",\r\n        value: function(item, destinationDir) {\r\n            var _this5 = this;\r\n            var itemKey = this._getKeyFromDataObject(item.dataItem, item.parentPath);\r\n            var pathInfo = destinationDir.getFullPathInfo();\r\n            var currentPath = \"\";\r\n            pathInfo.forEach(function(info) {\r\n                currentPath = (0, _uiFile_manager2.pathCombine)(currentPath, info.name);\r\n                var pathKey = _this5._getDataObjectKey(info.key, currentPath);\r\n                if (pathKey === itemKey) {\r\n                    throw {\r\n                        errorId: _uiFile_manager.ErrorCode.Other,\r\n                        fileItem: item\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createCopy\",\r\n        value: function(dataObj) {\r\n            var _this6 = this;\r\n            var copyObj = {};\r\n            this._nameSetter(copyObj, this._nameGetter(dataObj));\r\n            this._getIsDirSetter(copyObj, this._isDirGetter(dataObj));\r\n            var items = this._subFileItemsGetter(dataObj);\r\n            if (Array.isArray(items)) {\r\n                var itemsCopy = [];\r\n                items.forEach(function(childItem) {\r\n                    var childCopy = _this6._createCopy(childItem);\r\n                    itemsCopy.push(childCopy)\r\n                });\r\n                this._subFileItemsSetter(copyObj, itemsCopy)\r\n            }\r\n            return copyObj\r\n        }\r\n    }, {\r\n        key: \"_deleteItem\",\r\n        value: function(fileItem) {\r\n            var fileItemObj = this._findFileItemObj(fileItem.getFullPathInfo());\r\n            if (!fileItemObj) {\r\n                throw {\r\n                    errorId: fileItem.isDirectory ? _uiFile_manager.ErrorCode.DirectoryNotFound : _uiFile_manager.ErrorCode.FileNotFound,\r\n                    fileItem: fileItem\r\n                }\r\n            }\r\n            var parentDirDataObj = this._findFileItemObj(fileItem.pathInfo);\r\n            var array = this._getDirectoryDataItems(parentDirDataObj);\r\n            var index = array.indexOf(fileItemObj);\r\n            array.splice(index, 1)\r\n        }\r\n    }, {\r\n        key: \"_getDirectoryDataItems\",\r\n        value: function(directoryDataObj) {\r\n            if (!directoryDataObj) {\r\n                return this._data\r\n            }\r\n            var dataItems = this._subFileItemsGetter(directoryDataObj);\r\n            if (!Array.isArray(dataItems)) {\r\n                dataItems = [];\r\n                this._subFileItemsSetter(directoryDataObj, dataItems)\r\n            }\r\n            return dataItems\r\n        }\r\n    }, {\r\n        key: \"_getItems\",\r\n        value: function(pathInfo) {\r\n            var parentDirKey = pathInfo && pathInfo.length > 0 ? pathInfo[pathInfo.length - 1].key : null;\r\n            var dirFileObjects = this._data;\r\n            if (parentDirKey) {\r\n                var directoryEntry = this._findFileItemObj(pathInfo);\r\n                dirFileObjects = directoryEntry && this._subFileItemsGetter(directoryEntry) || []\r\n            }\r\n            this._ensureKeysForDuplicateNameItems(dirFileObjects);\r\n            return this._convertDataObjectsToFileItems(dirFileObjects, pathInfo)\r\n        }\r\n    }, {\r\n        key: \"_ensureKeysForDuplicateNameItems\",\r\n        value: function(dataObjects) {\r\n            var _this7 = this;\r\n            var names = {};\r\n            dataObjects.forEach(function(obj) {\r\n                var name = _this7._nameGetter(obj);\r\n                if (names[name]) {\r\n                    _this7._ensureDataObjectKey(obj)\r\n                } else {\r\n                    names[name] = true\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_findFileItemObj\",\r\n        value: function(pathInfo) {\r\n            var _this8 = this;\r\n            if (!Array.isArray(pathInfo)) {\r\n                pathInfo = []\r\n            }\r\n            var currentPath = \"\";\r\n            var fileItemObj = null;\r\n            var fileItemObjects = this._data;\r\n            var _loop = function(i) {\r\n                fileItemObj = (0, _array.find)(fileItemObjects, function(item) {\r\n                    var hasCorrectFileItemType = _this8._isDirGetter(item) || i === pathInfo.length - 1;\r\n                    return _this8._getKeyFromDataObject(item, currentPath) === pathInfo[i].key && _this8._nameGetter(item) === pathInfo[i].name && hasCorrectFileItemType\r\n                });\r\n                if (fileItemObj) {\r\n                    currentPath = (0, _uiFile_manager2.pathCombine)(currentPath, _this8._nameGetter(fileItemObj));\r\n                    fileItemObjects = _this8._subFileItemsGetter(fileItemObj)\r\n                }\r\n            };\r\n            for (var i = 0; i < pathInfo.length && (0 === i || fileItemObj); i++) {\r\n                _loop(i)\r\n            }\r\n            return fileItemObj\r\n        }\r\n    }, {\r\n        key: \"_getKeyFromDataObject\",\r\n        value: function(dataObj, defaultKeyPrefix) {\r\n            var key = this._keyGetter(dataObj);\r\n            var relativeName = (0, _uiFile_manager2.pathCombine)(defaultKeyPrefix, this._nameGetter(dataObj));\r\n            return this._getDataObjectKey(key, relativeName)\r\n        }\r\n    }, {\r\n        key: \"_getDataObjectKey\",\r\n        value: function(key, relativeName) {\r\n            return key ? key : relativeName\r\n        }\r\n    }, {\r\n        key: \"_ensureDataObjectKey\",\r\n        value: function(dataObj) {\r\n            var key = this._keyGetter(dataObj);\r\n            if (!key) {\r\n                key = String(new _guid2.default);\r\n                this._keySetter(dataObj, key)\r\n            }\r\n            return key\r\n        }\r\n    }, {\r\n        key: \"_updateHasSubDirs\",\r\n        value: function(dir) {\r\n            if (dir && !dir.isRoot) {\r\n                dir.hasSubDirs = this._hasSubDirs(dir.dataItem)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hasSubDirs\",\r\n        value: function(dataObj) {\r\n            var subItems = (0, _common.ensureDefined)(this._subFileItemsGetter(dataObj), []);\r\n            if (!Array.isArray(subItems)) {\r\n                return true\r\n            }\r\n            for (var i = 0; i < subItems.length; i++) {\r\n                if (true === this._isDirGetter(subItems[i])) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_getSetter\",\r\n        value: function(expr) {\r\n            return _type2.default.isFunction(expr) ? expr : (0, _data.compileSetter)(expr)\r\n        }\r\n    }, {\r\n        key: \"_isFileItemExists\",\r\n        value: function(fileItem) {\r\n            return fileItem.isDirectory && fileItem.isRoot || !!this._findFileItemObj(fileItem.getFullPathInfo())\r\n        }\r\n    }]);\r\n    return ArrayFileProvider\r\n}(_file_provider.FileProvider);\r\nmodule.exports = ArrayFileProvider;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}