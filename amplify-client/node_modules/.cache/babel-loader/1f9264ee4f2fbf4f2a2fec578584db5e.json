{"ast":null,"code":"/**\r\n * DevExtreme (viz/series/base_series.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar seriesNS = {};\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\").extend;\n\nvar _each = require(\"../../core/utils/iterator\").each;\n\nvar pointModule = require(\"./points/base_point\");\n\nvar _isDefined = typeUtils.isDefined;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar _isEmptyObject = typeUtils.isEmptyObject;\nvar _normalizeEnum = vizUtils.normalizeEnum;\n\nvar _noop = require(\"../../core/utils/common\").noop;\n\nvar states = require(\"../components/consts\").states;\n\nvar rangeCalculator = require(\"./helpers/range_data_calculator\");\n\nvar scatterSeries = require(\"./scatter_series\");\n\nvar lineSeries = require(\"./line_series\");\n\nvar areaSeries = require(\"./area_series\");\n\nvar barSeries = require(\"./bar_series\");\n\nvar rangeSeries = require(\"./range_series\");\n\nvar bubbleSeries = require(\"./bubble_series\");\n\nvar pieSeries = require(\"./pie_series\");\n\nvar financialSeries = require(\"./financial_series\");\n\nvar stackedSeries = require(\"./stacked_series\");\n\nvar DISCRETE = \"discrete\";\nvar SELECTED_STATE = states.selectedMark;\nvar HOVER_STATE = states.hoverMark;\nvar HOVER = states.hover;\nvar NORMAL = states.normal;\nvar SELECTION = states.selection;\nvar APPLY_SELECTED = states.applySelected;\nvar APPLY_HOVER = states.applyHover;\nvar RESET_ITEM = states.resetItem;\nvar NONE_MODE = \"none\";\nvar INCLUDE_POINTS = \"includepoints\";\nvar NEAREST_POINT = \"nearestpoint\";\nvar SERIES_SELECTION_CHANGED = \"seriesSelectionChanged\";\nvar POINT_SELECTION_CHANGED = \"pointSelectionChanged\";\nvar SERIES_HOVER_CHANGED = \"seriesHoverChanged\";\nvar POINT_HOVER_CHANGED = \"pointHoverChanged\";\nvar ALL_SERIES_POINTS = \"allseriespoints\";\nvar ALL_ARGUMENT_POINTS = \"allargumentpoints\";\nvar POINT_HOVER = \"pointHover\";\nvar CLEAR_POINT_HOVER = \"clearPointHover\";\nvar SERIES_SELECT = \"seriesSelect\";\nvar POINT_SELECT = \"pointSelect\";\nvar POINT_DESELECT = \"pointDeselect\";\n\nvar getEmptyBusinessRange = function getEmptyBusinessRange() {\n  return {\n    arg: {},\n    val: {}\n  };\n};\n\nfunction triggerEvent(element, event, point) {\n  element && element.trigger(event, point);\n}\n\nseriesNS.mixins = {\n  chart: {},\n  pie: {},\n  polar: {}\n};\nseriesNS.mixins.chart.scatter = scatterSeries.chart;\nseriesNS.mixins.polar.scatter = scatterSeries.polar;\n\n_extend(seriesNS.mixins.pie, pieSeries);\n\n_extend(seriesNS.mixins.chart, lineSeries.chart, areaSeries.chart, barSeries.chart, rangeSeries.chart, bubbleSeries.chart, financialSeries, stackedSeries.chart);\n\n_extend(seriesNS.mixins.polar, lineSeries.polar, areaSeries.polar, barSeries.polar, rangeSeries.polar, bubbleSeries.polar, stackedSeries.polar);\n\nfunction includePointsMode(mode) {\n  mode = _normalizeEnum(mode);\n  return mode === INCLUDE_POINTS || mode === ALL_SERIES_POINTS;\n}\n\nfunction getLabelOptions(labelOptions, defaultColor) {\n  var opt = labelOptions || {};\n  var labelFont = _extend({}, opt.font) || {};\n  var labelBorder = opt.border || {};\n  var labelConnector = opt.connector || {};\n  var backgroundAttr = {\n    fill: opt.backgroundColor || defaultColor,\n    \"stroke-width\": labelBorder.visible ? labelBorder.width || 0 : 0,\n    stroke: labelBorder.visible && labelBorder.width ? labelBorder.color : \"none\",\n    dashStyle: labelBorder.dashStyle\n  };\n  var connectorAttr = {\n    stroke: labelConnector.visible && labelConnector.width ? labelConnector.color || defaultColor : \"none\",\n    \"stroke-width\": labelConnector.visible ? labelConnector.width || 0 : 0\n  };\n  labelFont.color = \"none\" === opt.backgroundColor && \"#ffffff\" === _normalizeEnum(labelFont.color) && \"inside\" !== opt.position ? defaultColor : labelFont.color;\n  return {\n    alignment: opt.alignment,\n    format: opt.format,\n    argumentFormat: opt.argumentFormat,\n    customizeText: typeUtils.isFunction(opt.customizeText) ? opt.customizeText : void 0,\n    attributes: {\n      font: labelFont\n    },\n    visible: 0 !== labelFont.size ? opt.visible : false,\n    showForZeroValues: opt.showForZeroValues,\n    horizontalOffset: opt.horizontalOffset,\n    verticalOffset: opt.verticalOffset,\n    radialOffset: opt.radialOffset,\n    background: backgroundAttr,\n    position: opt.position,\n    connector: connectorAttr,\n    rotationAngle: opt.rotationAngle,\n    wordWrap: opt.wordWrap,\n    textOverflow: opt.textOverflow,\n    cssClass: opt.cssClass\n  };\n}\n\nfunction setPointHoverState(point, legendCallback) {\n  point.fullState |= HOVER_STATE;\n  point.applyView(legendCallback);\n}\n\nfunction releasePointHoverState(point, legendCallback) {\n  point.fullState &= ~HOVER_STATE;\n  point.applyView(legendCallback);\n  point.releaseHoverState();\n}\n\nfunction setPointSelectedState(point, legendCallback) {\n  point.fullState |= SELECTED_STATE;\n  point.applyView(legendCallback);\n}\n\nfunction releasePointSelectedState(point, legendCallback) {\n  point.fullState &= ~SELECTED_STATE;\n  point.applyView(legendCallback);\n}\n\nfunction mergePointOptionsCore(base, extra) {\n  var options = _extend({}, base, extra);\n\n  options.border = _extend({}, base && base.border, extra && extra.border);\n  return options;\n}\n\nfunction mergePointOptions(base, extra) {\n  var options = mergePointOptionsCore(base, extra);\n  options.image = _extend(true, {}, base.image, extra.image);\n  options.selectionStyle = mergePointOptionsCore(base.selectionStyle, extra.selectionStyle);\n  options.hoverStyle = mergePointOptionsCore(base.hoverStyle, extra.hoverStyle);\n  return options;\n}\n\nfunction Series(settings, options) {\n  var that = this;\n  that.fullState = 0;\n  that._extGroups = settings;\n  that._renderer = settings.renderer;\n  that._group = settings.renderer.g().attr({\n    \"class\": \"dxc-series\"\n  });\n  that._eventTrigger = settings.eventTrigger;\n  that._eventPipe = settings.eventPipe;\n  that._incidentOccurred = settings.incidentOccurred;\n  that._legendCallback = _noop;\n  that.updateOptions(options, settings);\n}\n\nfunction getData(pointData) {\n  return pointData.data;\n}\n\nexports.Series = Series;\nexports.mixins = seriesNS.mixins;\n\nfunction getValueChecker(axisType, axis) {\n  if (!axis || \"logarithmic\" !== axisType || false !== axis.getOptions().allowNegatives) {\n    return function () {\n      return true;\n    };\n  } else {\n    return function (value) {\n      return value > 0;\n    };\n  }\n}\n\nSeries.prototype = {\n  constructor: Series,\n  _createLegendState: _noop,\n  getLegendStyles: function getLegendStyles() {\n    return this._styles.legendStyles;\n  },\n  _createStyles: function _createStyles(options) {\n    var that = this;\n    var mainSeriesColor = options.mainSeriesColor;\n    that._styles = {\n      normal: that._parseStyle(options, mainSeriesColor, mainSeriesColor),\n      hover: that._parseStyle(options.hoverStyle || {}, mainSeriesColor, mainSeriesColor),\n      selection: that._parseStyle(options.selectionStyle || {}, mainSeriesColor, mainSeriesColor),\n      legendStyles: {\n        normal: that._createLegendState(options, mainSeriesColor),\n        hover: that._createLegendState(options.hoverStyle || {}, mainSeriesColor),\n        selection: that._createLegendState(options.selectionStyle || {}, mainSeriesColor)\n      }\n    };\n  },\n  setClippingParams: function setClippingParams(baseId, wideId, forceClipping) {\n    var clipLabels = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : true;\n    this._paneClipRectID = baseId;\n    this._widePaneClipRectID = wideId;\n    this._forceClipping = forceClipping;\n    this._clipLabels = clipLabels;\n  },\n  applyClip: function applyClip() {\n    this._group.attr({\n      \"clip-path\": this._paneClipRectID\n    });\n  },\n  resetClip: function resetClip() {\n    this._group.attr({\n      \"clip-path\": null\n    });\n  },\n  getTagField: function getTagField() {\n    return this._options.tagField || \"tag\";\n  },\n  getValueFields: _noop,\n  getSizeField: _noop,\n  getArgumentField: _noop,\n  getPoints: function getPoints() {\n    return this._points;\n  },\n  getPointsInViewPort: function getPointsInViewPort() {\n    return rangeCalculator.getPointsInViewPort(this);\n  },\n  _createPoint: function _createPoint(data, index, oldPoint) {\n    data.index = index;\n    var that = this;\n    var pointsByArgument = that.pointsByArgument;\n\n    var options = that._getCreatingPointOptions(data);\n\n    var arg = data.argument.valueOf();\n    var point = oldPoint;\n    var pointByArgument;\n\n    if (point) {\n      point.update(data, options);\n    } else {\n      point = new pointModule.Point(that, data, options);\n\n      if (that.isSelected() && includePointsMode(that.lastSelectionMode)) {\n        point.setView(SELECTION);\n      }\n    }\n\n    pointByArgument = pointsByArgument[arg];\n\n    if (pointByArgument) {\n      pointByArgument.push(point);\n    } else {\n      pointsByArgument[arg] = [point];\n    }\n\n    if (point.hasValue()) {\n      that.customizePoint(point, data);\n    }\n\n    return point;\n  },\n  getRangeData: function getRangeData() {\n    return this._visible ? this._getRangeData() : getEmptyBusinessRange();\n  },\n  getArgumentRange: function getArgumentRange() {\n    return this._visible ? rangeCalculator.getArgumentRange(this) : getEmptyBusinessRange();\n  },\n  getViewport: function getViewport() {\n    return rangeCalculator.getViewport(this);\n  },\n  _deleteGroup: function _deleteGroup(groupName) {\n    var group = this[groupName];\n\n    if (group) {\n      group.dispose();\n      this[groupName] = null;\n    }\n  },\n  updateOptions: function updateOptions(newOptions, settings) {\n    var that = this;\n    var widgetType = newOptions.widgetType;\n    var oldType = that.type;\n    var newType = newOptions.type;\n    that.type = newType && _normalizeEnum(newType.toString());\n\n    if (!that._checkType(widgetType) || that._checkPolarBarType(widgetType, newOptions)) {\n      that.dispose();\n      that.isUpdated = false;\n      return;\n    }\n\n    if (oldType !== that.type) {\n      that._firstDrawing = true;\n\n      that._resetType(oldType, widgetType);\n\n      that._setType(that.type, widgetType);\n    } else {\n      that._defineDrawingState();\n    }\n\n    that._options = newOptions;\n    that._pointOptions = null;\n    that.name = newOptions.name;\n    that.pane = newOptions.pane;\n    that.tag = newOptions.tag;\n\n    if (settings) {\n      that._seriesModes = settings.commonSeriesModes || that._seriesModes;\n      that._valueAxis = settings.valueAxis || that._valueAxis;\n      that.axis = that._valueAxis && that._valueAxis.name;\n      that._argumentAxis = settings.argumentAxis || that._argumentAxis;\n    }\n\n    that._createStyles(newOptions);\n\n    that._stackName = null;\n\n    that._updateOptions(newOptions);\n\n    that._visible = newOptions.visible;\n    that.isUpdated = true;\n    that.stack = newOptions.stack;\n    that.barOverlapGroup = newOptions.barOverlapGroup;\n\n    that._createGroups();\n\n    that._processEmptyValue = newOptions.ignoreEmptyPoints ? function (x) {\n      return null === x ? void 0 : x;\n    } : function (x) {\n      return x;\n    };\n  },\n  _defineDrawingState: function _defineDrawingState() {\n    this._firstDrawing = true;\n  },\n  _disposePoints: function _disposePoints(points) {\n    _each(points || [], function (_, p) {\n      p.dispose();\n    });\n  },\n  updateDataType: function updateDataType(settings) {\n    var that = this;\n    that.argumentType = settings.argumentType;\n    that.valueType = settings.valueType;\n    that.argumentAxisType = settings.argumentAxisType;\n    that.valueAxisType = settings.valueAxisType;\n    that.showZero = settings.showZero;\n    this._argumentChecker = getValueChecker(settings.argumentAxisType, that.getArgumentAxis());\n    this._valueChecker = getValueChecker(settings.valueAxisType, that.getValueAxis());\n    return that;\n  },\n  _argumentChecker: function _argumentChecker() {\n    return true;\n  },\n  _valueChecker: function _valueChecker() {\n    return true;\n  },\n  getOptions: function getOptions() {\n    return this._options;\n  },\n  _getOldPoint: function _getOldPoint(data, oldPointsByArgument, index) {\n    var arg = data.argument && data.argument.valueOf();\n    var point = (oldPointsByArgument[arg] || [])[0];\n\n    if (point) {\n      oldPointsByArgument[arg].splice(0, 1);\n    }\n\n    return point;\n  },\n  updateData: function updateData(data) {\n    var that = this;\n    var options = that._options;\n    var nameField = options.nameField;\n    data = data || [];\n\n    if (data.length) {\n      that._canRenderCompleteHandle = true;\n    }\n\n    var dataSelector = this._getPointDataSelector();\n\n    var itemsWithoutArgument = 0;\n    that._data = data.reduce(function (data, dataItem, index) {\n      var pointDataItem = dataSelector(dataItem);\n\n      if (_isDefined(pointDataItem.argument)) {\n        if (!nameField || dataItem[nameField] === options.nameFieldValue) {\n          pointDataItem.index = index;\n          data.push(pointDataItem);\n        }\n      } else {\n        itemsWithoutArgument++;\n      }\n\n      return data;\n    }, []);\n\n    if (itemsWithoutArgument && itemsWithoutArgument === data.length) {\n      that._incidentOccurred(\"W2002\", [that.name, that.getArgumentField()]);\n    }\n\n    that._endUpdateData();\n  },\n  _getData: function _getData() {\n    var data = this._data || [];\n\n    if (this.useAggregation()) {\n      data = this._resample(this.getArgumentAxis().getAggregationInfo(this._useAllAggregatedPoints, this.argumentAxisType !== DISCRETE ? this.getArgumentRange() : {}), data);\n    }\n\n    return data;\n  },\n  useAggregation: function useAggregation() {\n    var aggregation = this.getOptions().aggregation;\n    return aggregation && aggregation.enabled;\n  },\n  autoHidePointMarkersEnabled: _noop,\n  usePointsToDefineAutoHiding: _noop,\n  createPoints: function createPoints(useAllAggregatedPoints) {\n    this._normalizeUsingAllAggregatedPoints(useAllAggregatedPoints);\n\n    this._createPoints();\n  },\n  _normalizeUsingAllAggregatedPoints: function _normalizeUsingAllAggregatedPoints(useAllAggregatedPoints) {\n    this._useAllAggregatedPoints = this.useAggregation() && (this.argumentAxisType === DISCRETE || (this._data || []).length > 1 && !!useAllAggregatedPoints);\n  },\n  _createPoints: function _createPoints() {\n    var that = this;\n    var oldPointsByArgument = that.pointsByArgument || {};\n\n    var data = that._getData();\n\n    var points;\n    that.pointsByArgument = {};\n\n    that._calculateErrorBars(data);\n\n    var skippedFields = {};\n    points = data.reduce(function (points, pointDataItem) {\n      if (that._checkData(pointDataItem, skippedFields)) {\n        var pointIndex = points.length;\n\n        var oldPoint = that._getOldPoint(pointDataItem, oldPointsByArgument, pointIndex);\n\n        var point = that._createPoint(pointDataItem, pointIndex, oldPoint);\n\n        points.push(point);\n      }\n\n      return points;\n    }, []);\n\n    for (var field in skippedFields) {\n      if (skippedFields[field] === data.length) {\n        that._incidentOccurred(\"W2002\", [that.name, field]);\n      }\n    }\n\n    Object.keys(oldPointsByArgument).forEach(function (key) {\n      return that._disposePoints(oldPointsByArgument[key]);\n    });\n    that._points = points;\n  },\n  _removeOldSegments: function _removeOldSegments() {\n    var that = this;\n    var startIndex = that._segments.length;\n\n    _each(that._graphics.splice(startIndex, that._graphics.length) || [], function (_, elem) {\n      that._removeElement(elem);\n    });\n\n    if (that._trackers) {\n      _each(that._trackers.splice(startIndex, that._trackers.length) || [], function (_, elem) {\n        elem.remove();\n      });\n    }\n  },\n  _drawElements: function _drawElements(animationEnabled, firstDrawing, translateAllPoints) {\n    var that = this;\n    var points = that._points || [];\n\n    var closeSegment = points[0] && points[0].hasValue() && that._options.closed;\n\n    var groupForPoint = {\n      markers: that._markersGroup,\n      errorBars: that._errorBarGroup\n    };\n    var segments;\n    that._drawnPoints = [];\n    that._graphics = that._graphics || [];\n    that._segments = [];\n    segments = points.reduce(function (segments, p) {\n      var segment = segments[segments.length - 1];\n\n      if (!p.translated || translateAllPoints) {\n        p.translate();\n        !translateAllPoints && p.setDefaultCoords();\n      }\n\n      if (p.hasValue() && p.hasCoords()) {\n        translateAllPoints && that._drawPoint({\n          point: p,\n          groups: groupForPoint,\n          hasAnimation: animationEnabled,\n          firstDrawing: firstDrawing\n        });\n        segment.push(p);\n      } else {\n        if (!p.hasValue()) {\n          segment.length && segments.push([]);\n        } else {\n          p.setInvisibility();\n        }\n      }\n\n      return segments;\n    }, [[]]);\n    segments.forEach(function (segment, index) {\n      if (segment.length) {\n        that._drawSegment(segment, animationEnabled, index, closeSegment && index === this.length - 1);\n      }\n    }, segments);\n    that._firstDrawing = points.length ? false : true;\n\n    that._removeOldSegments();\n\n    animationEnabled && that._animate(firstDrawing);\n  },\n  draw: function draw(animationEnabled, hideLayoutLabels, legendCallback) {\n    var that = this;\n    var firstDrawing = that._firstDrawing;\n    that._legendCallback = legendCallback || that._legendCallback;\n\n    if (!that._visible) {\n      animationEnabled = false;\n\n      that._group.remove();\n\n      return;\n    }\n\n    that._appendInGroup();\n\n    that._applyVisibleArea();\n\n    that._setGroupsSettings(animationEnabled, firstDrawing);\n\n    !firstDrawing && that._drawElements(false, firstDrawing, false);\n\n    that._drawElements(animationEnabled, firstDrawing, true);\n\n    hideLayoutLabels && that.hideLabels();\n\n    if (that.isSelected()) {\n      that._changeStyle(that.lastSelectionMode, void 0, true);\n    } else {\n      if (that.isHovered()) {\n        that._changeStyle(that.lastHoverMode, void 0, true);\n      }\n    }\n  },\n  _setLabelGroupSettings: function _setLabelGroupSettings(animationEnabled) {\n    var settings = {\n      \"class\": \"dxc-labels\",\n      \"pointer-events\": \"none\"\n    };\n    this._clipLabels && this._applyElementsClipRect(settings);\n\n    this._applyClearingSettings(settings);\n\n    animationEnabled && (settings.opacity = .001);\n\n    this._labelsGroup.attr(settings).append(this._extGroups.labelsGroup);\n  },\n  _checkType: function _checkType(widgetType) {\n    return !!seriesNS.mixins[widgetType][this.type];\n  },\n  _checkPolarBarType: function _checkPolarBarType(widgetType, options) {\n    return \"polar\" === widgetType && options.spiderWidget && this.type.indexOf(\"bar\") !== -1;\n  },\n  _resetType: function _resetType(seriesType, widgetType) {\n    var methodName;\n    var methods;\n\n    if (seriesType) {\n      methods = seriesNS.mixins[widgetType][seriesType];\n\n      for (methodName in methods) {\n        delete this[methodName];\n      }\n    }\n  },\n  _setType: function _setType(seriesType, widgetType) {\n    var methodName;\n    var methods = seriesNS.mixins[widgetType][seriesType];\n\n    for (methodName in methods) {\n      this[methodName] = methods[methodName];\n    }\n  },\n  _setPointsView: function _setPointsView(view, target) {\n    this.getPoints().forEach(function (point) {\n      if (target !== point) {\n        point.setView(view);\n      }\n    });\n  },\n  _resetPointsView: function _resetPointsView(view, target) {\n    this.getPoints().forEach(function (point) {\n      if (target !== point) {\n        point.resetView(view);\n      }\n    });\n  },\n  _resetNearestPoint: function _resetNearestPoint() {\n    var that = this;\n    that._nearestPoint && null !== that._nearestPoint.series && that._nearestPoint.resetView(HOVER);\n    that._nearestPoint = null;\n  },\n  _setSelectedState: function _setSelectedState(mode) {\n    var that = this;\n    that.lastSelectionMode = _normalizeEnum(mode || that._options.selectionMode);\n    that.fullState = that.fullState | SELECTED_STATE;\n\n    that._resetNearestPoint();\n\n    that._changeStyle(that.lastSelectionMode);\n\n    if (that.lastSelectionMode !== NONE_MODE && that.isHovered() && includePointsMode(that.lastHoverMode)) {\n      that._resetPointsView(HOVER);\n    }\n  },\n  _releaseSelectedState: function _releaseSelectedState() {\n    var that = this;\n    that.fullState = that.fullState & ~SELECTED_STATE;\n\n    that._changeStyle(that.lastSelectionMode, SELECTION);\n\n    if (that.lastSelectionMode !== NONE_MODE && that.isHovered() && includePointsMode(that.lastHoverMode)) {\n      that._setPointsView(HOVER);\n    }\n  },\n  isFullStackedSeries: function isFullStackedSeries() {\n    return 0 === this.type.indexOf(\"fullstacked\");\n  },\n  isStackedSeries: function isStackedSeries() {\n    return 0 === this.type.indexOf(\"stacked\");\n  },\n  isFinancialSeries: function isFinancialSeries() {\n    return \"stock\" === this.type || \"candlestick\" === this.type;\n  },\n  _canChangeView: function _canChangeView() {\n    return !this.isSelected() && _normalizeEnum(this._options.hoverMode) !== NONE_MODE;\n  },\n  _changeStyle: function _changeStyle(mode, resetView, skipPoints) {\n    var that = this;\n    var state = that.fullState;\n    var styles = [NORMAL, HOVER, SELECTION, SELECTION];\n\n    if (\"none\" === that.lastHoverMode) {\n      state &= ~HOVER_STATE;\n    }\n\n    if (\"none\" === that.lastSelectionMode) {\n      state &= ~SELECTED_STATE;\n    }\n\n    if (includePointsMode(mode) && !skipPoints) {\n      if (!resetView) {\n        that._setPointsView(styles[state]);\n      } else {\n        that._resetPointsView(resetView);\n      }\n    }\n\n    that._legendCallback([RESET_ITEM, APPLY_HOVER, APPLY_SELECTED, APPLY_SELECTED][state]);\n\n    that._applyStyle(that._styles[styles[state]]);\n  },\n  updateHover: function updateHover(x, y) {\n    var that = this;\n    var currentNearestPoint = that._nearestPoint;\n    var point = that.isHovered() && that.lastHoverMode === NEAREST_POINT && that.getNeighborPoint(x, y);\n\n    if (point !== currentNearestPoint && !(that.isSelected() && that.lastSelectionMode !== NONE_MODE)) {\n      that._resetNearestPoint();\n\n      if (point) {\n        point.setView(HOVER);\n        that._nearestPoint = point;\n      }\n    }\n  },\n  _getMainAxisName: function _getMainAxisName() {\n    return this._options.rotated ? \"X\" : \"Y\";\n  },\n  areLabelsVisible: function areLabelsVisible() {\n    return !_isDefined(this._options.maxLabelCount) || this._points.length <= this._options.maxLabelCount;\n  },\n  getLabelVisibility: function getLabelVisibility() {\n    return this.areLabelsVisible() && this._options.label && this._options.label.visible;\n  },\n  customizePoint: function customizePoint(point, pointData) {\n    var that = this;\n    var options = that._options;\n    var customizePoint = options.customizePoint;\n    var customizeObject;\n    var pointOptions;\n    var customLabelOptions;\n    var customOptions;\n    var customizeLabel = options.customizeLabel;\n    var useLabelCustomOptions;\n    var usePointCustomOptions;\n\n    if (customizeLabel && customizeLabel.call) {\n      customizeObject = _extend({\n        seriesName: that.name\n      }, pointData);\n      customizeObject.series = that;\n      customLabelOptions = customizeLabel.call(customizeObject, customizeObject);\n      useLabelCustomOptions = customLabelOptions && !_isEmptyObject(customLabelOptions);\n      customLabelOptions = useLabelCustomOptions ? _extend(true, {}, options.label, customLabelOptions) : null;\n    }\n\n    if (customizePoint && customizePoint.call) {\n      customizeObject = customizeObject || _extend({\n        seriesName: that.name\n      }, pointData);\n      customizeObject.series = that;\n      customOptions = customizePoint.call(customizeObject, customizeObject);\n      usePointCustomOptions = customOptions && !_isEmptyObject(customOptions);\n    }\n\n    if (useLabelCustomOptions || usePointCustomOptions) {\n      pointOptions = that._parsePointOptions(that._preparePointOptions(customOptions), customLabelOptions || options.label, pointData, point);\n      pointOptions.styles.useLabelCustomOptions = useLabelCustomOptions;\n      pointOptions.styles.usePointCustomOptions = usePointCustomOptions;\n      point.updateOptions(pointOptions);\n    }\n  },\n  show: function show() {\n    if (!this._visible) {\n      this._changeVisibility(true);\n    }\n  },\n  hide: function hide() {\n    if (this._visible) {\n      this._changeVisibility(false);\n    }\n  },\n  _changeVisibility: function _changeVisibility(visibility) {\n    var that = this;\n    that._visible = that._options.visible = visibility;\n\n    that._updatePointsVisibility();\n\n    that.hidePointTooltip();\n\n    that._options.visibilityChanged(that);\n  },\n  _updatePointsVisibility: _noop,\n  hideLabels: function hideLabels() {\n    _each(this._points, function (_, point) {\n      point._label.draw(false);\n    });\n  },\n  _parsePointOptions: function _parsePointOptions(pointOptions, labelOptions, data, point) {\n    var that = this;\n    var options = that._options;\n\n    var styles = that._createPointStyles(pointOptions, data, point);\n\n    var parsedOptions = _extend({}, pointOptions, {\n      type: options.type,\n      rotated: options.rotated,\n      styles: styles,\n      widgetType: options.widgetType,\n      visibilityChanged: options.visibilityChanged\n    });\n\n    parsedOptions.label = getLabelOptions(labelOptions, styles.normal.fill);\n\n    if (that.areErrorBarsVisible()) {\n      parsedOptions.errorBars = options.valueErrorBar;\n    }\n\n    return parsedOptions;\n  },\n  _preparePointOptions: function _preparePointOptions(customOptions) {\n    var pointOptions = this._getOptionsForPoint();\n\n    return customOptions ? mergePointOptions(pointOptions, customOptions) : pointOptions;\n  },\n  _getMarkerGroupOptions: function _getMarkerGroupOptions() {\n    return _extend(false, {}, this._getOptionsForPoint(), {\n      hoverStyle: {},\n      selectionStyle: {}\n    });\n  },\n  _getAggregationMethod: function _getAggregationMethod(isDiscrete, aggregateByCategory) {\n    var options = this.getOptions().aggregation;\n\n    var method = _normalizeEnum(options.method);\n\n    var customAggregator = \"custom\" === method && options.calculate;\n    var aggregator;\n\n    if (isDiscrete && !aggregateByCategory) {\n      aggregator = function aggregator(_ref) {\n        var data = _ref.data;\n        return data[0];\n      };\n    } else {\n      aggregator = this._aggregators[method] || this._aggregators[this._defaultAggregator];\n    }\n\n    return customAggregator || aggregator;\n  },\n  _resample: function _resample(_ref2, data) {\n    var interval = _ref2.interval,\n        ticks = _ref2.ticks,\n        aggregateByCategory = _ref2.aggregateByCategory;\n    var that = this;\n    var isDiscrete = that.argumentAxisType === DISCRETE || that.valueAxisType === DISCRETE;\n    var dataIndex = 0;\n\n    var dataSelector = this._getPointDataSelector();\n\n    var options = that.getOptions();\n\n    var addAggregatedData = function addAggregatedData(target, data, aggregationInfo) {\n      if (!data) {\n        return;\n      }\n\n      var processData = function processData(d) {\n        var pointData = d && dataSelector(d, options);\n\n        if (pointData && that._checkData(pointData)) {\n          pointData.aggregationInfo = aggregationInfo;\n          target.push(pointData);\n        }\n      };\n\n      if (data.length) {\n        data.forEach(processData);\n      } else {\n        processData(data);\n      }\n    };\n\n    var aggregationMethod = this._getAggregationMethod(isDiscrete, aggregateByCategory);\n\n    if (isDiscrete) {\n      if (aggregateByCategory) {\n        var categories = this.getArgumentAxis().getTranslator().getBusinessRange().categories;\n        var groups = categories.reduce(function (g, category) {\n          g[category.valueOf()] = [];\n          return g;\n        }, {});\n        data.forEach(function (dataItem) {\n          groups[dataItem.argument].push(dataItem);\n        });\n        return categories.reduce(function (result, c) {\n          addAggregatedData(result, aggregationMethod({\n            aggregationInterval: null,\n            intervalStart: c,\n            intervalEnd: c,\n            data: groups[c].map(getData)\n          }, that));\n          return result;\n        }, []);\n      } else {\n        return data.reduce(function (result, dataItem, index, data) {\n          result[1].push(dataItem);\n\n          if (index === data.length - 1 || (index + 1) % interval === 0) {\n            var dataInInterval = result[1];\n            var aggregationInfo = {\n              aggregationInterval: interval,\n              data: dataInInterval.map(getData)\n            };\n            addAggregatedData(result[0], aggregationMethod(aggregationInfo, that));\n            result[1] = [];\n          }\n\n          return result;\n        }, [[], []])[0];\n      }\n    }\n\n    var aggregatedData = [];\n\n    for (var i = 1; i < ticks.length; i++) {\n      var intervalEnd = ticks[i];\n      var intervalStart = ticks[i - 1];\n      var dataInInterval = [];\n\n      while (data[dataIndex] && data[dataIndex].argument < intervalEnd) {\n        if (data[dataIndex].argument >= intervalStart) {\n          dataInInterval.push(data[dataIndex]);\n        }\n\n        dataIndex++;\n      }\n\n      var aggregationInfo = {\n        intervalStart: intervalStart,\n        intervalEnd: intervalEnd,\n        aggregationInterval: interval,\n        data: dataInInterval.map(getData)\n      };\n      addAggregatedData(aggregatedData, aggregationMethod(aggregationInfo, that), aggregationInfo);\n    }\n\n    that._endUpdateData();\n\n    return aggregatedData;\n  },\n  canRenderCompleteHandle: function canRenderCompleteHandle() {\n    var result = this._canRenderCompleteHandle;\n    delete this._canRenderCompleteHandle;\n    return !!result;\n  },\n  isHovered: function isHovered() {\n    return !!(1 & this.fullState);\n  },\n  isSelected: function isSelected() {\n    return !!(2 & this.fullState);\n  },\n  isVisible: function isVisible() {\n    return this._visible;\n  },\n  getAllPoints: function getAllPoints() {\n    this._createAllAggregatedPoints();\n\n    return (this._points || []).slice();\n  },\n  getPointByPos: function getPointByPos(pos) {\n    this._createAllAggregatedPoints();\n\n    return (this._points || [])[pos];\n  },\n  getVisiblePoints: function getVisiblePoints() {\n    return (this._drawnPoints || []).slice();\n  },\n  selectPoint: function selectPoint(point) {\n    if (!point.isSelected()) {\n      setPointSelectedState(point, this._legendCallback);\n\n      this._eventPipe({\n        action: POINT_SELECT,\n        target: point\n      });\n\n      this._eventTrigger(POINT_SELECTION_CHANGED, {\n        target: point\n      });\n    }\n  },\n  deselectPoint: function deselectPoint(point) {\n    if (point.isSelected()) {\n      releasePointSelectedState(point, this._legendCallback);\n\n      this._eventPipe({\n        action: POINT_DESELECT,\n        target: point\n      });\n\n      this._eventTrigger(POINT_SELECTION_CHANGED, {\n        target: point\n      });\n    }\n  },\n  hover: function hover(mode) {\n    var that = this;\n    var eventTrigger = that._eventTrigger;\n\n    if (that.isHovered()) {\n      return;\n    }\n\n    that.lastHoverMode = _normalizeEnum(mode || that._options.hoverMode);\n    that.fullState = that.fullState | HOVER_STATE;\n\n    that._changeStyle(that.lastHoverMode, void 0, that.isSelected() && that.lastSelectionMode !== NONE_MODE);\n\n    eventTrigger(SERIES_HOVER_CHANGED, {\n      target: that\n    });\n  },\n  clearHover: function clearHover() {\n    var that = this;\n    var eventTrigger = that._eventTrigger;\n\n    if (!that.isHovered()) {\n      return;\n    }\n\n    that._resetNearestPoint();\n\n    that.fullState = that.fullState & ~HOVER_STATE;\n\n    that._changeStyle(that.lastHoverMode, HOVER, that.isSelected() && that.lastSelectionMode !== NONE_MODE);\n\n    eventTrigger(SERIES_HOVER_CHANGED, {\n      target: that\n    });\n  },\n  hoverPoint: function hoverPoint(point) {\n    var that = this;\n\n    if (!point.isHovered()) {\n      point.clearHover();\n      setPointHoverState(point, that._legendCallback);\n      that._canChangeView() && that._applyStyle(that._styles.hover);\n\n      that._eventPipe({\n        action: POINT_HOVER,\n        target: point\n      });\n\n      that._eventTrigger(POINT_HOVER_CHANGED, {\n        target: point\n      });\n    }\n  },\n  clearPointHover: function clearPointHover() {\n    var that = this;\n    that.getPoints().some(function (currentPoint) {\n      if (currentPoint.isHovered()) {\n        releasePointHoverState(currentPoint, that._legendCallback);\n        that._canChangeView() && that._applyStyle(that._styles.normal);\n\n        that._eventPipe({\n          action: CLEAR_POINT_HOVER,\n          target: currentPoint\n        });\n\n        that._eventTrigger(POINT_HOVER_CHANGED, {\n          target: currentPoint\n        });\n\n        return true;\n      }\n\n      return false;\n    });\n  },\n  showPointTooltip: function showPointTooltip(point) {\n    triggerEvent(this._extGroups.seriesGroup, \"showpointtooltip\", point);\n  },\n  hidePointTooltip: function hidePointTooltip(point) {\n    triggerEvent(this._extGroups.seriesGroup, \"hidepointtooltip\", point);\n  },\n  select: function select() {\n    var that = this;\n\n    if (!that.isSelected()) {\n      that._setSelectedState(that._options.selectionMode);\n\n      that._eventPipe({\n        action: SERIES_SELECT,\n        target: that\n      });\n\n      that._group.toForeground();\n\n      that._eventTrigger(SERIES_SELECTION_CHANGED, {\n        target: that\n      });\n    }\n  },\n  clearSelection: function clearSelection() {\n    var that = this;\n\n    if (that.isSelected()) {\n      that._releaseSelectedState();\n\n      that._eventTrigger(SERIES_SELECTION_CHANGED, {\n        target: that\n      });\n    }\n  },\n  getPointsByArg: function getPointsByArg(arg, skipPointsCreation) {\n    var that = this;\n    var argValue = arg.valueOf();\n    var points = that.pointsByArgument[argValue];\n\n    if (!points && !skipPointsCreation && that._createAllAggregatedPoints()) {\n      points = that.pointsByArgument[argValue];\n    }\n\n    return points || [];\n  },\n  _createAllAggregatedPoints: function _createAllAggregatedPoints() {\n    if (this.useAggregation() && !this._useAllAggregatedPoints) {\n      this.createPoints(true);\n      return true;\n    }\n\n    return false;\n  },\n  getPointsByKeys: function getPointsByKeys(arg) {\n    return this.getPointsByArg(arg);\n  },\n  notify: function notify(data) {\n    var that = this;\n    var action = data.action;\n    var seriesModes = that._seriesModes;\n    var target = data.target;\n    var targetOptions = target.getOptions();\n\n    var pointHoverMode = _normalizeEnum(targetOptions.hoverMode);\n\n    var selectionModeOfPoint = _normalizeEnum(targetOptions.selectionMode);\n\n    if (action === POINT_HOVER) {\n      that._hoverPointHandler(target, pointHoverMode, data.notifyLegend);\n    } else {\n      if (action === CLEAR_POINT_HOVER) {\n        that._clearPointHoverHandler(target, pointHoverMode, data.notifyLegend);\n      } else {\n        if (action === SERIES_SELECT) {\n          target !== that && \"single\" === seriesModes.seriesSelectionMode && that.clearSelection();\n        } else {\n          if (action === POINT_SELECT) {\n            if (\"single\" === seriesModes.pointSelectionMode) {\n              that.getPoints().some(function (currentPoint) {\n                if (currentPoint !== target && currentPoint.isSelected()) {\n                  that.deselectPoint(currentPoint);\n                  return true;\n                }\n\n                return false;\n              });\n            }\n\n            that._selectPointHandler(target, selectionModeOfPoint);\n          } else {\n            if (action === POINT_DESELECT) {\n              that._deselectPointHandler(target, selectionModeOfPoint);\n            }\n          }\n        }\n      }\n    }\n  },\n  _selectPointHandler: function _selectPointHandler(target, mode) {\n    var that = this;\n\n    if (mode === ALL_SERIES_POINTS) {\n      target.series === that && that._setPointsView(SELECTION, target);\n    } else {\n      if (mode === ALL_ARGUMENT_POINTS) {\n        that.getPointsByKeys(target.argument, target.argumentIndex).forEach(function (currentPoint) {\n          currentPoint !== target && currentPoint.setView(SELECTION);\n        });\n      }\n    }\n  },\n  _deselectPointHandler: function _deselectPointHandler(target, mode) {\n    if (mode === ALL_SERIES_POINTS) {\n      target.series === this && this._resetPointsView(SELECTION, target);\n    } else {\n      if (mode === ALL_ARGUMENT_POINTS) {\n        this.getPointsByKeys(target.argument, target.argumentIndex).forEach(function (currentPoint) {\n          currentPoint !== target && currentPoint.resetView(SELECTION);\n        });\n      }\n    }\n  },\n  _hoverPointHandler: function _hoverPointHandler(target, mode, notifyLegend) {\n    var that = this;\n\n    if (target.series !== that && mode === ALL_ARGUMENT_POINTS) {\n      that.getPointsByKeys(target.argument, target.argumentIndex).forEach(function (currentPoint) {\n        currentPoint.setView(HOVER);\n      });\n      notifyLegend && that._legendCallback(target);\n    } else {\n      if (mode === ALL_SERIES_POINTS && target.series === that) {\n        that._setPointsView(HOVER, target);\n      }\n    }\n  },\n  _clearPointHoverHandler: function _clearPointHoverHandler(target, mode, notifyLegend) {\n    var that = this;\n\n    if (mode === ALL_ARGUMENT_POINTS) {\n      target.series !== that && that.getPointsByKeys(target.argument, target.argumentIndex).forEach(function (currentPoint) {\n        currentPoint.resetView(HOVER);\n      });\n      notifyLegend && that._legendCallback(target);\n    } else {\n      if (mode === ALL_SERIES_POINTS && target.series === that) {\n        that._resetPointsView(HOVER, target);\n      }\n    }\n  },\n  _deletePoints: function _deletePoints() {\n    var that = this;\n\n    that._disposePoints(that._points);\n\n    that._points = that._drawnPoints = null;\n  },\n  _deleteTrackers: function _deleteTrackers() {\n    var that = this;\n\n    _each(that._trackers || [], function (_, tracker) {\n      tracker.remove();\n    });\n\n    that._trackersGroup && that._trackersGroup.dispose();\n    that._trackers = that._trackersGroup = null;\n  },\n  dispose: function dispose() {\n    var that = this;\n\n    that._deletePoints();\n\n    that._group.dispose();\n\n    that._labelsGroup && that._labelsGroup.dispose();\n    that._errorBarGroup && that._errorBarGroup.dispose();\n\n    that._deleteTrackers();\n\n    that._group = that._extGroups = that._markersGroup = that._elementsGroup = that._bordersGroup = that._labelsGroup = that._errorBarGroup = that._graphics = that._rangeData = that._renderer = that._styles = that._options = that._pointOptions = that._drawnPoints = that.pointsByArgument = that._segments = that._prevSeries = null;\n  },\n  correctPosition: _noop,\n  drawTrackers: _noop,\n  getNeighborPoint: _noop,\n  areErrorBarsVisible: _noop,\n  getMarginOptions: function getMarginOptions() {\n    return this._patchMarginOptions({\n      percentStick: this.isFullStackedSeries()\n    });\n  },\n  getColor: function getColor() {\n    return this.getLegendStyles().normal.fill;\n  },\n  getOpacity: function getOpacity() {\n    return this._options.opacity;\n  },\n  getStackName: function getStackName() {\n    return this._stackName;\n  },\n  getBarOverlapGroup: function getBarOverlapGroup() {\n    return this._options.barOverlapGroup;\n  },\n  getPointByCoord: function getPointByCoord(x, y) {\n    var point = this.getNeighborPoint(x, y);\n    return point && point.coordsIn(x, y) ? point : null;\n  },\n  getValueAxis: function getValueAxis() {\n    return this._valueAxis;\n  },\n  getArgumentAxis: function getArgumentAxis() {\n    return this._argumentAxis;\n  },\n  getMarkersGroup: function getMarkersGroup() {\n    return this._markersGroup;\n  },\n  getRenderer: function getRenderer() {\n    return this._renderer;\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/series/base_series.js"],"names":["seriesNS","typeUtils","require","_extend","_each","pointModule","_isDefined","vizUtils","_isEmptyObject","_normalizeEnum","_noop","states","rangeCalculator","scatterSeries","lineSeries","areaSeries","barSeries","rangeSeries","bubbleSeries","pieSeries","financialSeries","stackedSeries","DISCRETE","SELECTED_STATE","HOVER_STATE","HOVER","NORMAL","SELECTION","APPLY_SELECTED","APPLY_HOVER","RESET_ITEM","NONE_MODE","INCLUDE_POINTS","NEAREST_POINT","SERIES_SELECTION_CHANGED","POINT_SELECTION_CHANGED","SERIES_HOVER_CHANGED","POINT_HOVER_CHANGED","ALL_SERIES_POINTS","ALL_ARGUMENT_POINTS","POINT_HOVER","CLEAR_POINT_HOVER","SERIES_SELECT","POINT_SELECT","POINT_DESELECT","getEmptyBusinessRange","arg","val","element","chart","pie","polar","mode","opt","labelOptions","labelFont","labelBorder","labelConnector","backgroundAttr","fill","stroke","dashStyle","connectorAttr","alignment","format","argumentFormat","customizeText","attributes","font","visible","showForZeroValues","horizontalOffset","verticalOffset","radialOffset","background","position","connector","rotationAngle","wordWrap","textOverflow","cssClass","point","options","base","extra","mergePointOptionsCore","that","settings","pointData","exports","axis","value","Series","constructor","_createLegendState","getLegendStyles","_createStyles","mainSeriesColor","normal","hover","selection","legendStyles","setClippingParams","clipLabels","arguments","applyClip","_paneClipRectID","resetClip","getTagField","getValueFields","getSizeField","getArgumentField","getPoints","getPointsInViewPort","_createPoint","data","pointsByArgument","includePointsMode","pointByArgument","getRangeData","getArgumentRange","getViewport","_deleteGroup","group","updateOptions","widgetType","newOptions","oldType","newType","_defineDrawingState","_disposePoints","points","p","updateDataType","getValueChecker","_argumentChecker","_valueChecker","getOptions","_getOldPoint","oldPointsByArgument","updateData","nameField","dataSelector","itemsWithoutArgument","pointDataItem","dataItem","_getData","useAggregation","aggregation","autoHidePointMarkersEnabled","usePointsToDefineAutoHiding","createPoints","_normalizeUsingAllAggregatedPoints","_createPoints","skippedFields","pointIndex","oldPoint","Object","_removeOldSegments","startIndex","elem","_drawElements","closeSegment","groupForPoint","markers","errorBars","_errorBarGroup","segments","segment","translateAllPoints","groups","hasAnimation","firstDrawing","index","animationEnabled","draw","legendCallback","hideLayoutLabels","_setLabelGroupSettings","_checkType","_checkPolarBarType","_resetType","methods","_setType","_setPointsView","target","_resetPointsView","_resetNearestPoint","_setSelectedState","_releaseSelectedState","isFullStackedSeries","isStackedSeries","isFinancialSeries","_canChangeView","_changeStyle","state","styles","updateHover","currentNearestPoint","_getMainAxisName","areLabelsVisible","getLabelVisibility","customizePoint","customizeLabel","customizeObject","seriesName","name","customLabelOptions","useLabelCustomOptions","customOptions","usePointCustomOptions","pointOptions","show","hide","_changeVisibility","_updatePointsVisibility","hideLabels","_parsePointOptions","parsedOptions","type","rotated","visibilityChanged","getLabelOptions","_preparePointOptions","mergePointOptions","_getMarkerGroupOptions","hoverStyle","selectionStyle","_getAggregationMethod","method","customAggregator","isDiscrete","aggregator","_ref","_resample","interval","_ref2","ticks","aggregateByCategory","dataIndex","addAggregatedData","processData","d","aggregationMethod","categories","g","category","aggregationInterval","intervalStart","intervalEnd","result","dataInInterval","aggregationInfo","aggregatedData","i","canRenderCompleteHandle","isHovered","isSelected","isVisible","getAllPoints","getPointByPos","getVisiblePoints","selectPoint","setPointSelectedState","action","deselectPoint","releasePointSelectedState","eventTrigger","clearHover","hoverPoint","setPointHoverState","clearPointHover","currentPoint","releasePointHoverState","showPointTooltip","triggerEvent","hidePointTooltip","select","clearSelection","getPointsByArg","argValue","_createAllAggregatedPoints","getPointsByKeys","notify","seriesModes","targetOptions","pointHoverMode","selectionModeOfPoint","_selectPointHandler","_deselectPointHandler","_hoverPointHandler","notifyLegend","_clearPointHoverHandler","_deletePoints","_deleteTrackers","tracker","dispose","correctPosition","drawTrackers","getNeighborPoint","areErrorBarsVisible","getMarginOptions","percentStick","getColor","getOpacity","getStackName","getBarOverlapGroup","getPointByCoord","getValueAxis","getArgumentAxis","getMarkersGroup","getRenderer"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/series/base_series.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar seriesNS = {};\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\").extend;\r\nvar _each = require(\"../../core/utils/iterator\").each;\r\nvar pointModule = require(\"./points/base_point\");\r\nvar _isDefined = typeUtils.isDefined;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar _isEmptyObject = typeUtils.isEmptyObject;\r\nvar _normalizeEnum = vizUtils.normalizeEnum;\r\nvar _noop = require(\"../../core/utils/common\").noop;\r\nvar states = require(\"../components/consts\").states;\r\nvar rangeCalculator = require(\"./helpers/range_data_calculator\");\r\nvar scatterSeries = require(\"./scatter_series\");\r\nvar lineSeries = require(\"./line_series\");\r\nvar areaSeries = require(\"./area_series\");\r\nvar barSeries = require(\"./bar_series\");\r\nvar rangeSeries = require(\"./range_series\");\r\nvar bubbleSeries = require(\"./bubble_series\");\r\nvar pieSeries = require(\"./pie_series\");\r\nvar financialSeries = require(\"./financial_series\");\r\nvar stackedSeries = require(\"./stacked_series\");\r\nvar DISCRETE = \"discrete\";\r\nvar SELECTED_STATE = states.selectedMark;\r\nvar HOVER_STATE = states.hoverMark;\r\nvar HOVER = states.hover;\r\nvar NORMAL = states.normal;\r\nvar SELECTION = states.selection;\r\nvar APPLY_SELECTED = states.applySelected;\r\nvar APPLY_HOVER = states.applyHover;\r\nvar RESET_ITEM = states.resetItem;\r\nvar NONE_MODE = \"none\";\r\nvar INCLUDE_POINTS = \"includepoints\";\r\nvar NEAREST_POINT = \"nearestpoint\";\r\nvar SERIES_SELECTION_CHANGED = \"seriesSelectionChanged\";\r\nvar POINT_SELECTION_CHANGED = \"pointSelectionChanged\";\r\nvar SERIES_HOVER_CHANGED = \"seriesHoverChanged\";\r\nvar POINT_HOVER_CHANGED = \"pointHoverChanged\";\r\nvar ALL_SERIES_POINTS = \"allseriespoints\";\r\nvar ALL_ARGUMENT_POINTS = \"allargumentpoints\";\r\nvar POINT_HOVER = \"pointHover\";\r\nvar CLEAR_POINT_HOVER = \"clearPointHover\";\r\nvar SERIES_SELECT = \"seriesSelect\";\r\nvar POINT_SELECT = \"pointSelect\";\r\nvar POINT_DESELECT = \"pointDeselect\";\r\nvar getEmptyBusinessRange = function() {\r\n    return {\r\n        arg: {},\r\n        val: {}\r\n    }\r\n};\r\n\r\nfunction triggerEvent(element, event, point) {\r\n    element && element.trigger(event, point)\r\n}\r\nseriesNS.mixins = {\r\n    chart: {},\r\n    pie: {},\r\n    polar: {}\r\n};\r\nseriesNS.mixins.chart.scatter = scatterSeries.chart;\r\nseriesNS.mixins.polar.scatter = scatterSeries.polar;\r\n_extend(seriesNS.mixins.pie, pieSeries);\r\n_extend(seriesNS.mixins.chart, lineSeries.chart, areaSeries.chart, barSeries.chart, rangeSeries.chart, bubbleSeries.chart, financialSeries, stackedSeries.chart);\r\n_extend(seriesNS.mixins.polar, lineSeries.polar, areaSeries.polar, barSeries.polar, rangeSeries.polar, bubbleSeries.polar, stackedSeries.polar);\r\n\r\nfunction includePointsMode(mode) {\r\n    mode = _normalizeEnum(mode);\r\n    return mode === INCLUDE_POINTS || mode === ALL_SERIES_POINTS\r\n}\r\n\r\nfunction getLabelOptions(labelOptions, defaultColor) {\r\n    var opt = labelOptions || {};\r\n    var labelFont = _extend({}, opt.font) || {};\r\n    var labelBorder = opt.border || {};\r\n    var labelConnector = opt.connector || {};\r\n    var backgroundAttr = {\r\n        fill: opt.backgroundColor || defaultColor,\r\n        \"stroke-width\": labelBorder.visible ? labelBorder.width || 0 : 0,\r\n        stroke: labelBorder.visible && labelBorder.width ? labelBorder.color : \"none\",\r\n        dashStyle: labelBorder.dashStyle\r\n    };\r\n    var connectorAttr = {\r\n        stroke: labelConnector.visible && labelConnector.width ? labelConnector.color || defaultColor : \"none\",\r\n        \"stroke-width\": labelConnector.visible ? labelConnector.width || 0 : 0\r\n    };\r\n    labelFont.color = \"none\" === opt.backgroundColor && \"#ffffff\" === _normalizeEnum(labelFont.color) && \"inside\" !== opt.position ? defaultColor : labelFont.color;\r\n    return {\r\n        alignment: opt.alignment,\r\n        format: opt.format,\r\n        argumentFormat: opt.argumentFormat,\r\n        customizeText: typeUtils.isFunction(opt.customizeText) ? opt.customizeText : void 0,\r\n        attributes: {\r\n            font: labelFont\r\n        },\r\n        visible: 0 !== labelFont.size ? opt.visible : false,\r\n        showForZeroValues: opt.showForZeroValues,\r\n        horizontalOffset: opt.horizontalOffset,\r\n        verticalOffset: opt.verticalOffset,\r\n        radialOffset: opt.radialOffset,\r\n        background: backgroundAttr,\r\n        position: opt.position,\r\n        connector: connectorAttr,\r\n        rotationAngle: opt.rotationAngle,\r\n        wordWrap: opt.wordWrap,\r\n        textOverflow: opt.textOverflow,\r\n        cssClass: opt.cssClass\r\n    }\r\n}\r\n\r\nfunction setPointHoverState(point, legendCallback) {\r\n    point.fullState |= HOVER_STATE;\r\n    point.applyView(legendCallback)\r\n}\r\n\r\nfunction releasePointHoverState(point, legendCallback) {\r\n    point.fullState &= ~HOVER_STATE;\r\n    point.applyView(legendCallback);\r\n    point.releaseHoverState()\r\n}\r\n\r\nfunction setPointSelectedState(point, legendCallback) {\r\n    point.fullState |= SELECTED_STATE;\r\n    point.applyView(legendCallback)\r\n}\r\n\r\nfunction releasePointSelectedState(point, legendCallback) {\r\n    point.fullState &= ~SELECTED_STATE;\r\n    point.applyView(legendCallback)\r\n}\r\n\r\nfunction mergePointOptionsCore(base, extra) {\r\n    var options = _extend({}, base, extra);\r\n    options.border = _extend({}, base && base.border, extra && extra.border);\r\n    return options\r\n}\r\n\r\nfunction mergePointOptions(base, extra) {\r\n    var options = mergePointOptionsCore(base, extra);\r\n    options.image = _extend(true, {}, base.image, extra.image);\r\n    options.selectionStyle = mergePointOptionsCore(base.selectionStyle, extra.selectionStyle);\r\n    options.hoverStyle = mergePointOptionsCore(base.hoverStyle, extra.hoverStyle);\r\n    return options\r\n}\r\n\r\nfunction Series(settings, options) {\r\n    var that = this;\r\n    that.fullState = 0;\r\n    that._extGroups = settings;\r\n    that._renderer = settings.renderer;\r\n    that._group = settings.renderer.g().attr({\r\n        \"class\": \"dxc-series\"\r\n    });\r\n    that._eventTrigger = settings.eventTrigger;\r\n    that._eventPipe = settings.eventPipe;\r\n    that._incidentOccurred = settings.incidentOccurred;\r\n    that._legendCallback = _noop;\r\n    that.updateOptions(options, settings)\r\n}\r\n\r\nfunction getData(pointData) {\r\n    return pointData.data\r\n}\r\nexports.Series = Series;\r\nexports.mixins = seriesNS.mixins;\r\n\r\nfunction getValueChecker(axisType, axis) {\r\n    if (!axis || \"logarithmic\" !== axisType || false !== axis.getOptions().allowNegatives) {\r\n        return function() {\r\n            return true\r\n        }\r\n    } else {\r\n        return function(value) {\r\n            return value > 0\r\n        }\r\n    }\r\n}\r\nSeries.prototype = {\r\n    constructor: Series,\r\n    _createLegendState: _noop,\r\n    getLegendStyles: function() {\r\n        return this._styles.legendStyles\r\n    },\r\n    _createStyles: function(options) {\r\n        var that = this;\r\n        var mainSeriesColor = options.mainSeriesColor;\r\n        that._styles = {\r\n            normal: that._parseStyle(options, mainSeriesColor, mainSeriesColor),\r\n            hover: that._parseStyle(options.hoverStyle || {}, mainSeriesColor, mainSeriesColor),\r\n            selection: that._parseStyle(options.selectionStyle || {}, mainSeriesColor, mainSeriesColor),\r\n            legendStyles: {\r\n                normal: that._createLegendState(options, mainSeriesColor),\r\n                hover: that._createLegendState(options.hoverStyle || {}, mainSeriesColor),\r\n                selection: that._createLegendState(options.selectionStyle || {}, mainSeriesColor)\r\n            }\r\n        }\r\n    },\r\n    setClippingParams: function(baseId, wideId, forceClipping) {\r\n        var clipLabels = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : true;\r\n        this._paneClipRectID = baseId;\r\n        this._widePaneClipRectID = wideId;\r\n        this._forceClipping = forceClipping;\r\n        this._clipLabels = clipLabels\r\n    },\r\n    applyClip: function() {\r\n        this._group.attr({\r\n            \"clip-path\": this._paneClipRectID\r\n        })\r\n    },\r\n    resetClip: function() {\r\n        this._group.attr({\r\n            \"clip-path\": null\r\n        })\r\n    },\r\n    getTagField: function() {\r\n        return this._options.tagField || \"tag\"\r\n    },\r\n    getValueFields: _noop,\r\n    getSizeField: _noop,\r\n    getArgumentField: _noop,\r\n    getPoints: function() {\r\n        return this._points\r\n    },\r\n    getPointsInViewPort: function() {\r\n        return rangeCalculator.getPointsInViewPort(this)\r\n    },\r\n    _createPoint: function(data, index, oldPoint) {\r\n        data.index = index;\r\n        var that = this;\r\n        var pointsByArgument = that.pointsByArgument;\r\n        var options = that._getCreatingPointOptions(data);\r\n        var arg = data.argument.valueOf();\r\n        var point = oldPoint;\r\n        var pointByArgument;\r\n        if (point) {\r\n            point.update(data, options)\r\n        } else {\r\n            point = new pointModule.Point(that, data, options);\r\n            if (that.isSelected() && includePointsMode(that.lastSelectionMode)) {\r\n                point.setView(SELECTION)\r\n            }\r\n        }\r\n        pointByArgument = pointsByArgument[arg];\r\n        if (pointByArgument) {\r\n            pointByArgument.push(point)\r\n        } else {\r\n            pointsByArgument[arg] = [point]\r\n        }\r\n        if (point.hasValue()) {\r\n            that.customizePoint(point, data)\r\n        }\r\n        return point\r\n    },\r\n    getRangeData: function() {\r\n        return this._visible ? this._getRangeData() : getEmptyBusinessRange()\r\n    },\r\n    getArgumentRange: function() {\r\n        return this._visible ? rangeCalculator.getArgumentRange(this) : getEmptyBusinessRange()\r\n    },\r\n    getViewport: function() {\r\n        return rangeCalculator.getViewport(this)\r\n    },\r\n    _deleteGroup: function(groupName) {\r\n        var group = this[groupName];\r\n        if (group) {\r\n            group.dispose();\r\n            this[groupName] = null\r\n        }\r\n    },\r\n    updateOptions: function(newOptions, settings) {\r\n        var that = this;\r\n        var widgetType = newOptions.widgetType;\r\n        var oldType = that.type;\r\n        var newType = newOptions.type;\r\n        that.type = newType && _normalizeEnum(newType.toString());\r\n        if (!that._checkType(widgetType) || that._checkPolarBarType(widgetType, newOptions)) {\r\n            that.dispose();\r\n            that.isUpdated = false;\r\n            return\r\n        }\r\n        if (oldType !== that.type) {\r\n            that._firstDrawing = true;\r\n            that._resetType(oldType, widgetType);\r\n            that._setType(that.type, widgetType)\r\n        } else {\r\n            that._defineDrawingState()\r\n        }\r\n        that._options = newOptions;\r\n        that._pointOptions = null;\r\n        that.name = newOptions.name;\r\n        that.pane = newOptions.pane;\r\n        that.tag = newOptions.tag;\r\n        if (settings) {\r\n            that._seriesModes = settings.commonSeriesModes || that._seriesModes;\r\n            that._valueAxis = settings.valueAxis || that._valueAxis;\r\n            that.axis = that._valueAxis && that._valueAxis.name;\r\n            that._argumentAxis = settings.argumentAxis || that._argumentAxis\r\n        }\r\n        that._createStyles(newOptions);\r\n        that._stackName = null;\r\n        that._updateOptions(newOptions);\r\n        that._visible = newOptions.visible;\r\n        that.isUpdated = true;\r\n        that.stack = newOptions.stack;\r\n        that.barOverlapGroup = newOptions.barOverlapGroup;\r\n        that._createGroups();\r\n        that._processEmptyValue = newOptions.ignoreEmptyPoints ? function(x) {\r\n            return null === x ? void 0 : x\r\n        } : function(x) {\r\n            return x\r\n        }\r\n    },\r\n    _defineDrawingState: function() {\r\n        this._firstDrawing = true\r\n    },\r\n    _disposePoints: function(points) {\r\n        _each(points || [], function(_, p) {\r\n            p.dispose()\r\n        })\r\n    },\r\n    updateDataType: function(settings) {\r\n        var that = this;\r\n        that.argumentType = settings.argumentType;\r\n        that.valueType = settings.valueType;\r\n        that.argumentAxisType = settings.argumentAxisType;\r\n        that.valueAxisType = settings.valueAxisType;\r\n        that.showZero = settings.showZero;\r\n        this._argumentChecker = getValueChecker(settings.argumentAxisType, that.getArgumentAxis());\r\n        this._valueChecker = getValueChecker(settings.valueAxisType, that.getValueAxis());\r\n        return that\r\n    },\r\n    _argumentChecker: function() {\r\n        return true\r\n    },\r\n    _valueChecker: function() {\r\n        return true\r\n    },\r\n    getOptions: function() {\r\n        return this._options\r\n    },\r\n    _getOldPoint: function(data, oldPointsByArgument, index) {\r\n        var arg = data.argument && data.argument.valueOf();\r\n        var point = (oldPointsByArgument[arg] || [])[0];\r\n        if (point) {\r\n            oldPointsByArgument[arg].splice(0, 1)\r\n        }\r\n        return point\r\n    },\r\n    updateData: function(data) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var nameField = options.nameField;\r\n        data = data || [];\r\n        if (data.length) {\r\n            that._canRenderCompleteHandle = true\r\n        }\r\n        var dataSelector = this._getPointDataSelector();\r\n        var itemsWithoutArgument = 0;\r\n        that._data = data.reduce(function(data, dataItem, index) {\r\n            var pointDataItem = dataSelector(dataItem);\r\n            if (_isDefined(pointDataItem.argument)) {\r\n                if (!nameField || dataItem[nameField] === options.nameFieldValue) {\r\n                    pointDataItem.index = index;\r\n                    data.push(pointDataItem)\r\n                }\r\n            } else {\r\n                itemsWithoutArgument++\r\n            }\r\n            return data\r\n        }, []);\r\n        if (itemsWithoutArgument && itemsWithoutArgument === data.length) {\r\n            that._incidentOccurred(\"W2002\", [that.name, that.getArgumentField()])\r\n        }\r\n        that._endUpdateData()\r\n    },\r\n    _getData: function() {\r\n        var data = this._data || [];\r\n        if (this.useAggregation()) {\r\n            data = this._resample(this.getArgumentAxis().getAggregationInfo(this._useAllAggregatedPoints, this.argumentAxisType !== DISCRETE ? this.getArgumentRange() : {}), data)\r\n        }\r\n        return data\r\n    },\r\n    useAggregation: function() {\r\n        var aggregation = this.getOptions().aggregation;\r\n        return aggregation && aggregation.enabled\r\n    },\r\n    autoHidePointMarkersEnabled: _noop,\r\n    usePointsToDefineAutoHiding: _noop,\r\n    createPoints: function(useAllAggregatedPoints) {\r\n        this._normalizeUsingAllAggregatedPoints(useAllAggregatedPoints);\r\n        this._createPoints()\r\n    },\r\n    _normalizeUsingAllAggregatedPoints: function(useAllAggregatedPoints) {\r\n        this._useAllAggregatedPoints = this.useAggregation() && (this.argumentAxisType === DISCRETE || (this._data || []).length > 1 && !!useAllAggregatedPoints)\r\n    },\r\n    _createPoints: function() {\r\n        var that = this;\r\n        var oldPointsByArgument = that.pointsByArgument || {};\r\n        var data = that._getData();\r\n        var points;\r\n        that.pointsByArgument = {};\r\n        that._calculateErrorBars(data);\r\n        var skippedFields = {};\r\n        points = data.reduce(function(points, pointDataItem) {\r\n            if (that._checkData(pointDataItem, skippedFields)) {\r\n                var pointIndex = points.length;\r\n                var oldPoint = that._getOldPoint(pointDataItem, oldPointsByArgument, pointIndex);\r\n                var point = that._createPoint(pointDataItem, pointIndex, oldPoint);\r\n                points.push(point)\r\n            }\r\n            return points\r\n        }, []);\r\n        for (var field in skippedFields) {\r\n            if (skippedFields[field] === data.length) {\r\n                that._incidentOccurred(\"W2002\", [that.name, field])\r\n            }\r\n        }\r\n        Object.keys(oldPointsByArgument).forEach(function(key) {\r\n            return that._disposePoints(oldPointsByArgument[key])\r\n        });\r\n        that._points = points\r\n    },\r\n    _removeOldSegments: function() {\r\n        var that = this;\r\n        var startIndex = that._segments.length;\r\n        _each(that._graphics.splice(startIndex, that._graphics.length) || [], function(_, elem) {\r\n            that._removeElement(elem)\r\n        });\r\n        if (that._trackers) {\r\n            _each(that._trackers.splice(startIndex, that._trackers.length) || [], function(_, elem) {\r\n                elem.remove()\r\n            })\r\n        }\r\n    },\r\n    _drawElements: function(animationEnabled, firstDrawing, translateAllPoints) {\r\n        var that = this;\r\n        var points = that._points || [];\r\n        var closeSegment = points[0] && points[0].hasValue() && that._options.closed;\r\n        var groupForPoint = {\r\n            markers: that._markersGroup,\r\n            errorBars: that._errorBarGroup\r\n        };\r\n        var segments;\r\n        that._drawnPoints = [];\r\n        that._graphics = that._graphics || [];\r\n        that._segments = [];\r\n        segments = points.reduce(function(segments, p) {\r\n            var segment = segments[segments.length - 1];\r\n            if (!p.translated || translateAllPoints) {\r\n                p.translate();\r\n                !translateAllPoints && p.setDefaultCoords()\r\n            }\r\n            if (p.hasValue() && p.hasCoords()) {\r\n                translateAllPoints && that._drawPoint({\r\n                    point: p,\r\n                    groups: groupForPoint,\r\n                    hasAnimation: animationEnabled,\r\n                    firstDrawing: firstDrawing\r\n                });\r\n                segment.push(p)\r\n            } else {\r\n                if (!p.hasValue()) {\r\n                    segment.length && segments.push([])\r\n                } else {\r\n                    p.setInvisibility()\r\n                }\r\n            }\r\n            return segments\r\n        }, [\r\n            []\r\n        ]);\r\n        segments.forEach(function(segment, index) {\r\n            if (segment.length) {\r\n                that._drawSegment(segment, animationEnabled, index, closeSegment && index === this.length - 1)\r\n            }\r\n        }, segments);\r\n        that._firstDrawing = points.length ? false : true;\r\n        that._removeOldSegments();\r\n        animationEnabled && that._animate(firstDrawing)\r\n    },\r\n    draw: function(animationEnabled, hideLayoutLabels, legendCallback) {\r\n        var that = this;\r\n        var firstDrawing = that._firstDrawing;\r\n        that._legendCallback = legendCallback || that._legendCallback;\r\n        if (!that._visible) {\r\n            animationEnabled = false;\r\n            that._group.remove();\r\n            return\r\n        }\r\n        that._appendInGroup();\r\n        that._applyVisibleArea();\r\n        that._setGroupsSettings(animationEnabled, firstDrawing);\r\n        !firstDrawing && that._drawElements(false, firstDrawing, false);\r\n        that._drawElements(animationEnabled, firstDrawing, true);\r\n        hideLayoutLabels && that.hideLabels();\r\n        if (that.isSelected()) {\r\n            that._changeStyle(that.lastSelectionMode, void 0, true)\r\n        } else {\r\n            if (that.isHovered()) {\r\n                that._changeStyle(that.lastHoverMode, void 0, true)\r\n            }\r\n        }\r\n    },\r\n    _setLabelGroupSettings: function(animationEnabled) {\r\n        var settings = {\r\n            \"class\": \"dxc-labels\",\r\n            \"pointer-events\": \"none\"\r\n        };\r\n        this._clipLabels && this._applyElementsClipRect(settings);\r\n        this._applyClearingSettings(settings);\r\n        animationEnabled && (settings.opacity = .001);\r\n        this._labelsGroup.attr(settings).append(this._extGroups.labelsGroup)\r\n    },\r\n    _checkType: function(widgetType) {\r\n        return !!seriesNS.mixins[widgetType][this.type]\r\n    },\r\n    _checkPolarBarType: function(widgetType, options) {\r\n        return \"polar\" === widgetType && options.spiderWidget && this.type.indexOf(\"bar\") !== -1\r\n    },\r\n    _resetType: function(seriesType, widgetType) {\r\n        var methodName;\r\n        var methods;\r\n        if (seriesType) {\r\n            methods = seriesNS.mixins[widgetType][seriesType];\r\n            for (methodName in methods) {\r\n                delete this[methodName]\r\n            }\r\n        }\r\n    },\r\n    _setType: function(seriesType, widgetType) {\r\n        var methodName;\r\n        var methods = seriesNS.mixins[widgetType][seriesType];\r\n        for (methodName in methods) {\r\n            this[methodName] = methods[methodName]\r\n        }\r\n    },\r\n    _setPointsView: function(view, target) {\r\n        this.getPoints().forEach(function(point) {\r\n            if (target !== point) {\r\n                point.setView(view)\r\n            }\r\n        })\r\n    },\r\n    _resetPointsView: function(view, target) {\r\n        this.getPoints().forEach(function(point) {\r\n            if (target !== point) {\r\n                point.resetView(view)\r\n            }\r\n        })\r\n    },\r\n    _resetNearestPoint: function() {\r\n        var that = this;\r\n        that._nearestPoint && null !== that._nearestPoint.series && that._nearestPoint.resetView(HOVER);\r\n        that._nearestPoint = null\r\n    },\r\n    _setSelectedState: function(mode) {\r\n        var that = this;\r\n        that.lastSelectionMode = _normalizeEnum(mode || that._options.selectionMode);\r\n        that.fullState = that.fullState | SELECTED_STATE;\r\n        that._resetNearestPoint();\r\n        that._changeStyle(that.lastSelectionMode);\r\n        if (that.lastSelectionMode !== NONE_MODE && that.isHovered() && includePointsMode(that.lastHoverMode)) {\r\n            that._resetPointsView(HOVER)\r\n        }\r\n    },\r\n    _releaseSelectedState: function() {\r\n        var that = this;\r\n        that.fullState = that.fullState & ~SELECTED_STATE;\r\n        that._changeStyle(that.lastSelectionMode, SELECTION);\r\n        if (that.lastSelectionMode !== NONE_MODE && that.isHovered() && includePointsMode(that.lastHoverMode)) {\r\n            that._setPointsView(HOVER)\r\n        }\r\n    },\r\n    isFullStackedSeries: function() {\r\n        return 0 === this.type.indexOf(\"fullstacked\")\r\n    },\r\n    isStackedSeries: function() {\r\n        return 0 === this.type.indexOf(\"stacked\")\r\n    },\r\n    isFinancialSeries: function() {\r\n        return \"stock\" === this.type || \"candlestick\" === this.type\r\n    },\r\n    _canChangeView: function() {\r\n        return !this.isSelected() && _normalizeEnum(this._options.hoverMode) !== NONE_MODE\r\n    },\r\n    _changeStyle: function(mode, resetView, skipPoints) {\r\n        var that = this;\r\n        var state = that.fullState;\r\n        var styles = [NORMAL, HOVER, SELECTION, SELECTION];\r\n        if (\"none\" === that.lastHoverMode) {\r\n            state &= ~HOVER_STATE\r\n        }\r\n        if (\"none\" === that.lastSelectionMode) {\r\n            state &= ~SELECTED_STATE\r\n        }\r\n        if (includePointsMode(mode) && !skipPoints) {\r\n            if (!resetView) {\r\n                that._setPointsView(styles[state])\r\n            } else {\r\n                that._resetPointsView(resetView)\r\n            }\r\n        }\r\n        that._legendCallback([RESET_ITEM, APPLY_HOVER, APPLY_SELECTED, APPLY_SELECTED][state]);\r\n        that._applyStyle(that._styles[styles[state]])\r\n    },\r\n    updateHover: function(x, y) {\r\n        var that = this;\r\n        var currentNearestPoint = that._nearestPoint;\r\n        var point = that.isHovered() && that.lastHoverMode === NEAREST_POINT && that.getNeighborPoint(x, y);\r\n        if (point !== currentNearestPoint && !(that.isSelected() && that.lastSelectionMode !== NONE_MODE)) {\r\n            that._resetNearestPoint();\r\n            if (point) {\r\n                point.setView(HOVER);\r\n                that._nearestPoint = point\r\n            }\r\n        }\r\n    },\r\n    _getMainAxisName: function() {\r\n        return this._options.rotated ? \"X\" : \"Y\"\r\n    },\r\n    areLabelsVisible: function() {\r\n        return !_isDefined(this._options.maxLabelCount) || this._points.length <= this._options.maxLabelCount\r\n    },\r\n    getLabelVisibility: function() {\r\n        return this.areLabelsVisible() && this._options.label && this._options.label.visible\r\n    },\r\n    customizePoint: function customizePoint(point, pointData) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var customizePoint = options.customizePoint;\r\n        var customizeObject;\r\n        var pointOptions;\r\n        var customLabelOptions;\r\n        var customOptions;\r\n        var customizeLabel = options.customizeLabel;\r\n        var useLabelCustomOptions;\r\n        var usePointCustomOptions;\r\n        if (customizeLabel && customizeLabel.call) {\r\n            customizeObject = _extend({\r\n                seriesName: that.name\r\n            }, pointData);\r\n            customizeObject.series = that;\r\n            customLabelOptions = customizeLabel.call(customizeObject, customizeObject);\r\n            useLabelCustomOptions = customLabelOptions && !_isEmptyObject(customLabelOptions);\r\n            customLabelOptions = useLabelCustomOptions ? _extend(true, {}, options.label, customLabelOptions) : null\r\n        }\r\n        if (customizePoint && customizePoint.call) {\r\n            customizeObject = customizeObject || _extend({\r\n                seriesName: that.name\r\n            }, pointData);\r\n            customizeObject.series = that;\r\n            customOptions = customizePoint.call(customizeObject, customizeObject);\r\n            usePointCustomOptions = customOptions && !_isEmptyObject(customOptions)\r\n        }\r\n        if (useLabelCustomOptions || usePointCustomOptions) {\r\n            pointOptions = that._parsePointOptions(that._preparePointOptions(customOptions), customLabelOptions || options.label, pointData, point);\r\n            pointOptions.styles.useLabelCustomOptions = useLabelCustomOptions;\r\n            pointOptions.styles.usePointCustomOptions = usePointCustomOptions;\r\n            point.updateOptions(pointOptions)\r\n        }\r\n    },\r\n    show: function() {\r\n        if (!this._visible) {\r\n            this._changeVisibility(true)\r\n        }\r\n    },\r\n    hide: function() {\r\n        if (this._visible) {\r\n            this._changeVisibility(false)\r\n        }\r\n    },\r\n    _changeVisibility: function(visibility) {\r\n        var that = this;\r\n        that._visible = that._options.visible = visibility;\r\n        that._updatePointsVisibility();\r\n        that.hidePointTooltip();\r\n        that._options.visibilityChanged(that)\r\n    },\r\n    _updatePointsVisibility: _noop,\r\n    hideLabels: function() {\r\n        _each(this._points, function(_, point) {\r\n            point._label.draw(false)\r\n        })\r\n    },\r\n    _parsePointOptions: function(pointOptions, labelOptions, data, point) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var styles = that._createPointStyles(pointOptions, data, point);\r\n        var parsedOptions = _extend({}, pointOptions, {\r\n            type: options.type,\r\n            rotated: options.rotated,\r\n            styles: styles,\r\n            widgetType: options.widgetType,\r\n            visibilityChanged: options.visibilityChanged\r\n        });\r\n        parsedOptions.label = getLabelOptions(labelOptions, styles.normal.fill);\r\n        if (that.areErrorBarsVisible()) {\r\n            parsedOptions.errorBars = options.valueErrorBar\r\n        }\r\n        return parsedOptions\r\n    },\r\n    _preparePointOptions: function(customOptions) {\r\n        var pointOptions = this._getOptionsForPoint();\r\n        return customOptions ? mergePointOptions(pointOptions, customOptions) : pointOptions\r\n    },\r\n    _getMarkerGroupOptions: function() {\r\n        return _extend(false, {}, this._getOptionsForPoint(), {\r\n            hoverStyle: {},\r\n            selectionStyle: {}\r\n        })\r\n    },\r\n    _getAggregationMethod: function(isDiscrete, aggregateByCategory) {\r\n        var options = this.getOptions().aggregation;\r\n        var method = _normalizeEnum(options.method);\r\n        var customAggregator = \"custom\" === method && options.calculate;\r\n        var aggregator;\r\n        if (isDiscrete && !aggregateByCategory) {\r\n            aggregator = function(_ref) {\r\n                var data = _ref.data;\r\n                return data[0]\r\n            }\r\n        } else {\r\n            aggregator = this._aggregators[method] || this._aggregators[this._defaultAggregator]\r\n        }\r\n        return customAggregator || aggregator\r\n    },\r\n    _resample: function(_ref2, data) {\r\n        var interval = _ref2.interval,\r\n            ticks = _ref2.ticks,\r\n            aggregateByCategory = _ref2.aggregateByCategory;\r\n        var that = this;\r\n        var isDiscrete = that.argumentAxisType === DISCRETE || that.valueAxisType === DISCRETE;\r\n        var dataIndex = 0;\r\n        var dataSelector = this._getPointDataSelector();\r\n        var options = that.getOptions();\r\n        var addAggregatedData = function(target, data, aggregationInfo) {\r\n            if (!data) {\r\n                return\r\n            }\r\n            var processData = function(d) {\r\n                var pointData = d && dataSelector(d, options);\r\n                if (pointData && that._checkData(pointData)) {\r\n                    pointData.aggregationInfo = aggregationInfo;\r\n                    target.push(pointData)\r\n                }\r\n            };\r\n            if (data.length) {\r\n                data.forEach(processData)\r\n            } else {\r\n                processData(data)\r\n            }\r\n        };\r\n        var aggregationMethod = this._getAggregationMethod(isDiscrete, aggregateByCategory);\r\n        if (isDiscrete) {\r\n            if (aggregateByCategory) {\r\n                var categories = this.getArgumentAxis().getTranslator().getBusinessRange().categories;\r\n                var groups = categories.reduce(function(g, category) {\r\n                    g[category.valueOf()] = [];\r\n                    return g\r\n                }, {});\r\n                data.forEach(function(dataItem) {\r\n                    groups[dataItem.argument].push(dataItem)\r\n                });\r\n                return categories.reduce(function(result, c) {\r\n                    addAggregatedData(result, aggregationMethod({\r\n                        aggregationInterval: null,\r\n                        intervalStart: c,\r\n                        intervalEnd: c,\r\n                        data: groups[c].map(getData)\r\n                    }, that));\r\n                    return result\r\n                }, [])\r\n            } else {\r\n                return data.reduce(function(result, dataItem, index, data) {\r\n                    result[1].push(dataItem);\r\n                    if (index === data.length - 1 || (index + 1) % interval === 0) {\r\n                        var dataInInterval = result[1];\r\n                        var aggregationInfo = {\r\n                            aggregationInterval: interval,\r\n                            data: dataInInterval.map(getData)\r\n                        };\r\n                        addAggregatedData(result[0], aggregationMethod(aggregationInfo, that));\r\n                        result[1] = []\r\n                    }\r\n                    return result\r\n                }, [\r\n                    [],\r\n                    []\r\n                ])[0]\r\n            }\r\n        }\r\n        var aggregatedData = [];\r\n        for (var i = 1; i < ticks.length; i++) {\r\n            var intervalEnd = ticks[i];\r\n            var intervalStart = ticks[i - 1];\r\n            var dataInInterval = [];\r\n            while (data[dataIndex] && data[dataIndex].argument < intervalEnd) {\r\n                if (data[dataIndex].argument >= intervalStart) {\r\n                    dataInInterval.push(data[dataIndex])\r\n                }\r\n                dataIndex++\r\n            }\r\n            var aggregationInfo = {\r\n                intervalStart: intervalStart,\r\n                intervalEnd: intervalEnd,\r\n                aggregationInterval: interval,\r\n                data: dataInInterval.map(getData)\r\n            };\r\n            addAggregatedData(aggregatedData, aggregationMethod(aggregationInfo, that), aggregationInfo)\r\n        }\r\n        that._endUpdateData();\r\n        return aggregatedData\r\n    },\r\n    canRenderCompleteHandle: function() {\r\n        var result = this._canRenderCompleteHandle;\r\n        delete this._canRenderCompleteHandle;\r\n        return !!result\r\n    },\r\n    isHovered: function() {\r\n        return !!(1 & this.fullState)\r\n    },\r\n    isSelected: function() {\r\n        return !!(2 & this.fullState)\r\n    },\r\n    isVisible: function() {\r\n        return this._visible\r\n    },\r\n    getAllPoints: function() {\r\n        this._createAllAggregatedPoints();\r\n        return (this._points || []).slice()\r\n    },\r\n    getPointByPos: function(pos) {\r\n        this._createAllAggregatedPoints();\r\n        return (this._points || [])[pos]\r\n    },\r\n    getVisiblePoints: function() {\r\n        return (this._drawnPoints || []).slice()\r\n    },\r\n    selectPoint: function(point) {\r\n        if (!point.isSelected()) {\r\n            setPointSelectedState(point, this._legendCallback);\r\n            this._eventPipe({\r\n                action: POINT_SELECT,\r\n                target: point\r\n            });\r\n            this._eventTrigger(POINT_SELECTION_CHANGED, {\r\n                target: point\r\n            })\r\n        }\r\n    },\r\n    deselectPoint: function(point) {\r\n        if (point.isSelected()) {\r\n            releasePointSelectedState(point, this._legendCallback);\r\n            this._eventPipe({\r\n                action: POINT_DESELECT,\r\n                target: point\r\n            });\r\n            this._eventTrigger(POINT_SELECTION_CHANGED, {\r\n                target: point\r\n            })\r\n        }\r\n    },\r\n    hover: function(mode) {\r\n        var that = this;\r\n        var eventTrigger = that._eventTrigger;\r\n        if (that.isHovered()) {\r\n            return\r\n        }\r\n        that.lastHoverMode = _normalizeEnum(mode || that._options.hoverMode);\r\n        that.fullState = that.fullState | HOVER_STATE;\r\n        that._changeStyle(that.lastHoverMode, void 0, that.isSelected() && that.lastSelectionMode !== NONE_MODE);\r\n        eventTrigger(SERIES_HOVER_CHANGED, {\r\n            target: that\r\n        })\r\n    },\r\n    clearHover: function() {\r\n        var that = this;\r\n        var eventTrigger = that._eventTrigger;\r\n        if (!that.isHovered()) {\r\n            return\r\n        }\r\n        that._resetNearestPoint();\r\n        that.fullState = that.fullState & ~HOVER_STATE;\r\n        that._changeStyle(that.lastHoverMode, HOVER, that.isSelected() && that.lastSelectionMode !== NONE_MODE);\r\n        eventTrigger(SERIES_HOVER_CHANGED, {\r\n            target: that\r\n        })\r\n    },\r\n    hoverPoint: function(point) {\r\n        var that = this;\r\n        if (!point.isHovered()) {\r\n            point.clearHover();\r\n            setPointHoverState(point, that._legendCallback);\r\n            that._canChangeView() && that._applyStyle(that._styles.hover);\r\n            that._eventPipe({\r\n                action: POINT_HOVER,\r\n                target: point\r\n            });\r\n            that._eventTrigger(POINT_HOVER_CHANGED, {\r\n                target: point\r\n            })\r\n        }\r\n    },\r\n    clearPointHover: function() {\r\n        var that = this;\r\n        that.getPoints().some(function(currentPoint) {\r\n            if (currentPoint.isHovered()) {\r\n                releasePointHoverState(currentPoint, that._legendCallback);\r\n                that._canChangeView() && that._applyStyle(that._styles.normal);\r\n                that._eventPipe({\r\n                    action: CLEAR_POINT_HOVER,\r\n                    target: currentPoint\r\n                });\r\n                that._eventTrigger(POINT_HOVER_CHANGED, {\r\n                    target: currentPoint\r\n                });\r\n                return true\r\n            }\r\n            return false\r\n        })\r\n    },\r\n    showPointTooltip: function(point) {\r\n        triggerEvent(this._extGroups.seriesGroup, \"showpointtooltip\", point)\r\n    },\r\n    hidePointTooltip: function(point) {\r\n        triggerEvent(this._extGroups.seriesGroup, \"hidepointtooltip\", point)\r\n    },\r\n    select: function() {\r\n        var that = this;\r\n        if (!that.isSelected()) {\r\n            that._setSelectedState(that._options.selectionMode);\r\n            that._eventPipe({\r\n                action: SERIES_SELECT,\r\n                target: that\r\n            });\r\n            that._group.toForeground();\r\n            that._eventTrigger(SERIES_SELECTION_CHANGED, {\r\n                target: that\r\n            })\r\n        }\r\n    },\r\n    clearSelection: function() {\r\n        var that = this;\r\n        if (that.isSelected()) {\r\n            that._releaseSelectedState();\r\n            that._eventTrigger(SERIES_SELECTION_CHANGED, {\r\n                target: that\r\n            })\r\n        }\r\n    },\r\n    getPointsByArg: function(arg, skipPointsCreation) {\r\n        var that = this;\r\n        var argValue = arg.valueOf();\r\n        var points = that.pointsByArgument[argValue];\r\n        if (!points && !skipPointsCreation && that._createAllAggregatedPoints()) {\r\n            points = that.pointsByArgument[argValue]\r\n        }\r\n        return points || []\r\n    },\r\n    _createAllAggregatedPoints: function() {\r\n        if (this.useAggregation() && !this._useAllAggregatedPoints) {\r\n            this.createPoints(true);\r\n            return true\r\n        }\r\n        return false\r\n    },\r\n    getPointsByKeys: function(arg) {\r\n        return this.getPointsByArg(arg)\r\n    },\r\n    notify: function(data) {\r\n        var that = this;\r\n        var action = data.action;\r\n        var seriesModes = that._seriesModes;\r\n        var target = data.target;\r\n        var targetOptions = target.getOptions();\r\n        var pointHoverMode = _normalizeEnum(targetOptions.hoverMode);\r\n        var selectionModeOfPoint = _normalizeEnum(targetOptions.selectionMode);\r\n        if (action === POINT_HOVER) {\r\n            that._hoverPointHandler(target, pointHoverMode, data.notifyLegend)\r\n        } else {\r\n            if (action === CLEAR_POINT_HOVER) {\r\n                that._clearPointHoverHandler(target, pointHoverMode, data.notifyLegend)\r\n            } else {\r\n                if (action === SERIES_SELECT) {\r\n                    target !== that && \"single\" === seriesModes.seriesSelectionMode && that.clearSelection()\r\n                } else {\r\n                    if (action === POINT_SELECT) {\r\n                        if (\"single\" === seriesModes.pointSelectionMode) {\r\n                            that.getPoints().some(function(currentPoint) {\r\n                                if (currentPoint !== target && currentPoint.isSelected()) {\r\n                                    that.deselectPoint(currentPoint);\r\n                                    return true\r\n                                }\r\n                                return false\r\n                            })\r\n                        }\r\n                        that._selectPointHandler(target, selectionModeOfPoint)\r\n                    } else {\r\n                        if (action === POINT_DESELECT) {\r\n                            that._deselectPointHandler(target, selectionModeOfPoint)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _selectPointHandler: function(target, mode) {\r\n        var that = this;\r\n        if (mode === ALL_SERIES_POINTS) {\r\n            target.series === that && that._setPointsView(SELECTION, target)\r\n        } else {\r\n            if (mode === ALL_ARGUMENT_POINTS) {\r\n                that.getPointsByKeys(target.argument, target.argumentIndex).forEach(function(currentPoint) {\r\n                    currentPoint !== target && currentPoint.setView(SELECTION)\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _deselectPointHandler: function(target, mode) {\r\n        if (mode === ALL_SERIES_POINTS) {\r\n            target.series === this && this._resetPointsView(SELECTION, target)\r\n        } else {\r\n            if (mode === ALL_ARGUMENT_POINTS) {\r\n                this.getPointsByKeys(target.argument, target.argumentIndex).forEach(function(currentPoint) {\r\n                    currentPoint !== target && currentPoint.resetView(SELECTION)\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _hoverPointHandler: function(target, mode, notifyLegend) {\r\n        var that = this;\r\n        if (target.series !== that && mode === ALL_ARGUMENT_POINTS) {\r\n            that.getPointsByKeys(target.argument, target.argumentIndex).forEach(function(currentPoint) {\r\n                currentPoint.setView(HOVER)\r\n            });\r\n            notifyLegend && that._legendCallback(target)\r\n        } else {\r\n            if (mode === ALL_SERIES_POINTS && target.series === that) {\r\n                that._setPointsView(HOVER, target)\r\n            }\r\n        }\r\n    },\r\n    _clearPointHoverHandler: function(target, mode, notifyLegend) {\r\n        var that = this;\r\n        if (mode === ALL_ARGUMENT_POINTS) {\r\n            target.series !== that && that.getPointsByKeys(target.argument, target.argumentIndex).forEach(function(currentPoint) {\r\n                currentPoint.resetView(HOVER)\r\n            });\r\n            notifyLegend && that._legendCallback(target)\r\n        } else {\r\n            if (mode === ALL_SERIES_POINTS && target.series === that) {\r\n                that._resetPointsView(HOVER, target)\r\n            }\r\n        }\r\n    },\r\n    _deletePoints: function() {\r\n        var that = this;\r\n        that._disposePoints(that._points);\r\n        that._points = that._drawnPoints = null\r\n    },\r\n    _deleteTrackers: function() {\r\n        var that = this;\r\n        _each(that._trackers || [], function(_, tracker) {\r\n            tracker.remove()\r\n        });\r\n        that._trackersGroup && that._trackersGroup.dispose();\r\n        that._trackers = that._trackersGroup = null\r\n    },\r\n    dispose: function() {\r\n        var that = this;\r\n        that._deletePoints();\r\n        that._group.dispose();\r\n        that._labelsGroup && that._labelsGroup.dispose();\r\n        that._errorBarGroup && that._errorBarGroup.dispose();\r\n        that._deleteTrackers();\r\n        that._group = that._extGroups = that._markersGroup = that._elementsGroup = that._bordersGroup = that._labelsGroup = that._errorBarGroup = that._graphics = that._rangeData = that._renderer = that._styles = that._options = that._pointOptions = that._drawnPoints = that.pointsByArgument = that._segments = that._prevSeries = null\r\n    },\r\n    correctPosition: _noop,\r\n    drawTrackers: _noop,\r\n    getNeighborPoint: _noop,\r\n    areErrorBarsVisible: _noop,\r\n    getMarginOptions: function() {\r\n        return this._patchMarginOptions({\r\n            percentStick: this.isFullStackedSeries()\r\n        })\r\n    },\r\n    getColor: function() {\r\n        return this.getLegendStyles().normal.fill\r\n    },\r\n    getOpacity: function() {\r\n        return this._options.opacity\r\n    },\r\n    getStackName: function() {\r\n        return this._stackName\r\n    },\r\n    getBarOverlapGroup: function() {\r\n        return this._options.barOverlapGroup\r\n    },\r\n    getPointByCoord: function(x, y) {\r\n        var point = this.getNeighborPoint(x, y);\r\n        return point && point.coordsIn(x, y) ? point : null\r\n    },\r\n    getValueAxis: function() {\r\n        return this._valueAxis\r\n    },\r\n    getArgumentAxis: function() {\r\n        return this._argumentAxis\r\n    },\r\n    getMarkersGroup: function() {\r\n        return this._markersGroup\r\n    },\r\n    getRenderer: function() {\r\n        return this._renderer\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}