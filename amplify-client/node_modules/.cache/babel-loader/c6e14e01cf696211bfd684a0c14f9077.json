{"ast":null,"code":"import _classCallCheck from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var Subscriber = /*#__PURE__*/function (_Subscription) {\n  _inherits(Subscriber, _Subscription);\n\n  var _super = _createSuper(Subscriber);\n\n  function Subscriber(destinationOrNext, error, complete) {\n    var _this;\n\n    _classCallCheck(this, Subscriber);\n\n    _this = _super.call(this);\n    _this.syncErrorValue = null;\n    _this.syncErrorThrown = false;\n    _this.syncErrorThrowable = false;\n    _this.isStopped = false;\n\n    switch (arguments.length) {\n      case 0:\n        _this.destination = emptyObserver;\n        break;\n\n      case 1:\n        if (!destinationOrNext) {\n          _this.destination = emptyObserver;\n          break;\n        }\n\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            _this.destination = destinationOrNext;\n            destinationOrNext.add(_assertThisInitialized(_this));\n          } else {\n            _this.syncErrorThrowable = true;\n            _this.destination = new SafeSubscriber(_assertThisInitialized(_this), destinationOrNext);\n          }\n\n          break;\n        }\n\n      default:\n        _this.syncErrorThrowable = true;\n        _this.destination = new SafeSubscriber(_assertThisInitialized(_this), destinationOrNext, error, complete);\n        break;\n    }\n\n    return _this;\n  }\n\n  _createClass(Subscriber, [{\n    key: rxSubscriberSymbol,\n    value: function value() {\n      return this;\n    }\n  }, {\n    key: \"next\",\n    value: function next(value) {\n      if (!this.isStopped) {\n        this._next(value);\n      }\n    }\n  }, {\n    key: \"error\",\n    value: function error(err) {\n      if (!this.isStopped) {\n        this.isStopped = true;\n\n        this._error(err);\n      }\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      if (!this.isStopped) {\n        this.isStopped = true;\n\n        this._complete();\n      }\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      if (this.closed) {\n        return;\n      }\n\n      this.isStopped = true;\n\n      _get(_getPrototypeOf(Subscriber.prototype), \"unsubscribe\", this).call(this);\n    }\n  }, {\n    key: \"_next\",\n    value: function _next(value) {\n      this.destination.next(value);\n    }\n  }, {\n    key: \"_error\",\n    value: function _error(err) {\n      this.destination.error(err);\n      this.unsubscribe();\n    }\n  }, {\n    key: \"_complete\",\n    value: function _complete() {\n      this.destination.complete();\n      this.unsubscribe();\n    }\n  }, {\n    key: \"_unsubscribeAndRecycle\",\n    value: function _unsubscribeAndRecycle() {\n      var _parentOrParents = this._parentOrParents;\n      this._parentOrParents = null;\n      this.unsubscribe();\n      this.closed = false;\n      this.isStopped = false;\n      this._parentOrParents = _parentOrParents;\n      return this;\n    }\n  }], [{\n    key: \"create\",\n    value: function create(next, error, complete) {\n      var subscriber = new Subscriber(next, error, complete);\n      subscriber.syncErrorThrowable = false;\n      return subscriber;\n    }\n  }]);\n\n  return Subscriber;\n}(Subscription);\nexport var SafeSubscriber = /*#__PURE__*/function (_Subscriber) {\n  _inherits(SafeSubscriber, _Subscriber);\n\n  var _super2 = _createSuper(SafeSubscriber);\n\n  function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n    var _this2;\n\n    _classCallCheck(this, SafeSubscriber);\n\n    _this2 = _super2.call(this);\n    _this2._parentSubscriber = _parentSubscriber;\n    var next;\n\n    var context = _assertThisInitialized(_this2);\n\n    if (isFunction(observerOrNext)) {\n      next = observerOrNext;\n    } else if (observerOrNext) {\n      next = observerOrNext.next;\n      error = observerOrNext.error;\n      complete = observerOrNext.complete;\n\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n\n        if (isFunction(context.unsubscribe)) {\n          _this2.add(context.unsubscribe.bind(context));\n        }\n\n        context.unsubscribe = _this2.unsubscribe.bind(_assertThisInitialized(_this2));\n      }\n    }\n\n    _this2._context = context;\n    _this2._next = next;\n    _this2._error = error;\n    _this2._complete = complete;\n    return _this2;\n  }\n\n  _createClass(SafeSubscriber, [{\n    key: \"next\",\n    value: function next(value) {\n      if (!this.isStopped && this._next) {\n        var _parentSubscriber = this._parentSubscriber;\n\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._next, value);\n        } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n          this.unsubscribe();\n        }\n      }\n    }\n  }, {\n    key: \"error\",\n    value: function error(err) {\n      if (!this.isStopped) {\n        var _parentSubscriber = this._parentSubscriber;\n        var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n\n        if (this._error) {\n          if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n            this.__tryOrUnsub(this._error, err);\n\n            this.unsubscribe();\n          } else {\n            this.__tryOrSetError(_parentSubscriber, this._error, err);\n\n            this.unsubscribe();\n          }\n        } else if (!_parentSubscriber.syncErrorThrowable) {\n          this.unsubscribe();\n\n          if (useDeprecatedSynchronousErrorHandling) {\n            throw err;\n          }\n\n          hostReportError(err);\n        } else {\n          if (useDeprecatedSynchronousErrorHandling) {\n            _parentSubscriber.syncErrorValue = err;\n            _parentSubscriber.syncErrorThrown = true;\n          } else {\n            hostReportError(err);\n          }\n\n          this.unsubscribe();\n        }\n      }\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      var _this3 = this;\n\n      if (!this.isStopped) {\n        var _parentSubscriber = this._parentSubscriber;\n\n        if (this._complete) {\n          var wrappedComplete = function wrappedComplete() {\n            return _this3._complete.call(_this3._context);\n          };\n\n          if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n            this.__tryOrUnsub(wrappedComplete);\n\n            this.unsubscribe();\n          } else {\n            this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n\n            this.unsubscribe();\n          }\n        } else {\n          this.unsubscribe();\n        }\n      }\n    }\n  }, {\n    key: \"__tryOrUnsub\",\n    value: function __tryOrUnsub(fn, value) {\n      try {\n        fn.call(this._context, value);\n      } catch (err) {\n        this.unsubscribe();\n\n        if (config.useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        } else {\n          hostReportError(err);\n        }\n      }\n    }\n  }, {\n    key: \"__tryOrSetError\",\n    value: function __tryOrSetError(parent, fn, value) {\n      if (!config.useDeprecatedSynchronousErrorHandling) {\n        throw new Error('bad call');\n      }\n\n      try {\n        fn.call(this._context, value);\n      } catch (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n          parent.syncErrorValue = err;\n          parent.syncErrorThrown = true;\n          return true;\n        } else {\n          hostReportError(err);\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_unsubscribe\",\n    value: function _unsubscribe() {\n      var _parentSubscriber = this._parentSubscriber;\n      this._context = null;\n      this._parentSubscriber = null;\n\n      _parentSubscriber.unsubscribe();\n    }\n  }]);\n\n  return SafeSubscriber;\n}(Subscriber);","map":{"version":3,"sources":["../../src/internal/Subscriber.ts"],"names":[],"mappings":"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","sourcesContent":["import { isFunction } from './util/isFunction';\r\nimport { empty as emptyObserver } from './Observer';\r\nimport { Subscription } from './Subscription';\r\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\r\nimport { config } from './config';\r\nimport { hostReportError } from './util/hostReportError';\r\nexport class Subscriber extends Subscription {\r\n    constructor(destinationOrNext, error, complete) {\r\n        super();\r\n        this.syncErrorValue = null;\r\n        this.syncErrorThrown = false;\r\n        this.syncErrorThrowable = false;\r\n        this.isStopped = false;\r\n        switch (arguments.length) {\r\n            case 0:\r\n                this.destination = emptyObserver;\r\n                break;\r\n            case 1:\r\n                if (!destinationOrNext) {\r\n                    this.destination = emptyObserver;\r\n                    break;\r\n                }\r\n                if (typeof destinationOrNext === 'object') {\r\n                    if (destinationOrNext instanceof Subscriber) {\r\n                        this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\r\n                        this.destination = destinationOrNext;\r\n                        destinationOrNext.add(this);\r\n                    }\r\n                    else {\r\n                        this.syncErrorThrowable = true;\r\n                        this.destination = new SafeSubscriber(this, destinationOrNext);\r\n                    }\r\n                    break;\r\n                }\r\n            default:\r\n                this.syncErrorThrowable = true;\r\n                this.destination = new SafeSubscriber(this, destinationOrNext, error, complete);\r\n                break;\r\n        }\r\n    }\r\n    [rxSubscriberSymbol]() { return this; }\r\n    static create(next, error, complete) {\r\n        const subscriber = new Subscriber(next, error, complete);\r\n        subscriber.syncErrorThrowable = false;\r\n        return subscriber;\r\n    }\r\n    next(value) {\r\n        if (!this.isStopped) {\r\n            this._next(value);\r\n        }\r\n    }\r\n    error(err) {\r\n        if (!this.isStopped) {\r\n            this.isStopped = true;\r\n            this._error(err);\r\n        }\r\n    }\r\n    complete() {\r\n        if (!this.isStopped) {\r\n            this.isStopped = true;\r\n            this._complete();\r\n        }\r\n    }\r\n    unsubscribe() {\r\n        if (this.closed) {\r\n            return;\r\n        }\r\n        this.isStopped = true;\r\n        super.unsubscribe();\r\n    }\r\n    _next(value) {\r\n        this.destination.next(value);\r\n    }\r\n    _error(err) {\r\n        this.destination.error(err);\r\n        this.unsubscribe();\r\n    }\r\n    _complete() {\r\n        this.destination.complete();\r\n        this.unsubscribe();\r\n    }\r\n    _unsubscribeAndRecycle() {\r\n        const { _parentOrParents } = this;\r\n        this._parentOrParents = null;\r\n        this.unsubscribe();\r\n        this.closed = false;\r\n        this.isStopped = false;\r\n        this._parentOrParents = _parentOrParents;\r\n        return this;\r\n    }\r\n}\r\nexport class SafeSubscriber extends Subscriber {\r\n    constructor(_parentSubscriber, observerOrNext, error, complete) {\r\n        super();\r\n        this._parentSubscriber = _parentSubscriber;\r\n        let next;\r\n        let context = this;\r\n        if (isFunction(observerOrNext)) {\r\n            next = observerOrNext;\r\n        }\r\n        else if (observerOrNext) {\r\n            next = observerOrNext.next;\r\n            error = observerOrNext.error;\r\n            complete = observerOrNext.complete;\r\n            if (observerOrNext !== emptyObserver) {\r\n                context = Object.create(observerOrNext);\r\n                if (isFunction(context.unsubscribe)) {\r\n                    this.add(context.unsubscribe.bind(context));\r\n                }\r\n                context.unsubscribe = this.unsubscribe.bind(this);\r\n            }\r\n        }\r\n        this._context = context;\r\n        this._next = next;\r\n        this._error = error;\r\n        this._complete = complete;\r\n    }\r\n    next(value) {\r\n        if (!this.isStopped && this._next) {\r\n            const { _parentSubscriber } = this;\r\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\r\n                this.__tryOrUnsub(this._next, value);\r\n            }\r\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\r\n                this.unsubscribe();\r\n            }\r\n        }\r\n    }\r\n    error(err) {\r\n        if (!this.isStopped) {\r\n            const { _parentSubscriber } = this;\r\n            const { useDeprecatedSynchronousErrorHandling } = config;\r\n            if (this._error) {\r\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\r\n                    this.__tryOrUnsub(this._error, err);\r\n                    this.unsubscribe();\r\n                }\r\n                else {\r\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\r\n                    this.unsubscribe();\r\n                }\r\n            }\r\n            else if (!_parentSubscriber.syncErrorThrowable) {\r\n                this.unsubscribe();\r\n                if (useDeprecatedSynchronousErrorHandling) {\r\n                    throw err;\r\n                }\r\n                hostReportError(err);\r\n            }\r\n            else {\r\n                if (useDeprecatedSynchronousErrorHandling) {\r\n                    _parentSubscriber.syncErrorValue = err;\r\n                    _parentSubscriber.syncErrorThrown = true;\r\n                }\r\n                else {\r\n                    hostReportError(err);\r\n                }\r\n                this.unsubscribe();\r\n            }\r\n        }\r\n    }\r\n    complete() {\r\n        if (!this.isStopped) {\r\n            const { _parentSubscriber } = this;\r\n            if (this._complete) {\r\n                const wrappedComplete = () => this._complete.call(this._context);\r\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\r\n                    this.__tryOrUnsub(wrappedComplete);\r\n                    this.unsubscribe();\r\n                }\r\n                else {\r\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\r\n                    this.unsubscribe();\r\n                }\r\n            }\r\n            else {\r\n                this.unsubscribe();\r\n            }\r\n        }\r\n    }\r\n    __tryOrUnsub(fn, value) {\r\n        try {\r\n            fn.call(this._context, value);\r\n        }\r\n        catch (err) {\r\n            this.unsubscribe();\r\n            if (config.useDeprecatedSynchronousErrorHandling) {\r\n                throw err;\r\n            }\r\n            else {\r\n                hostReportError(err);\r\n            }\r\n        }\r\n    }\r\n    __tryOrSetError(parent, fn, value) {\r\n        if (!config.useDeprecatedSynchronousErrorHandling) {\r\n            throw new Error('bad call');\r\n        }\r\n        try {\r\n            fn.call(this._context, value);\r\n        }\r\n        catch (err) {\r\n            if (config.useDeprecatedSynchronousErrorHandling) {\r\n                parent.syncErrorValue = err;\r\n                parent.syncErrorThrown = true;\r\n                return true;\r\n            }\r\n            else {\r\n                hostReportError(err);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    _unsubscribe() {\r\n        const { _parentSubscriber } = this;\r\n        this._context = null;\r\n        this._parentSubscriber = null;\r\n        _parentSubscriber.unsubscribe();\r\n    }\r\n}\r\n//# sourceMappingURL=Subscriber.js.map"]},"metadata":{},"sourceType":"module"}