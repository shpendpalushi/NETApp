{"ast":null,"code":"/**\r\n * DevExtreme (ui/tile_view.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar devices = require(\"../core/devices\");\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar inflector = require(\"../core/utils/inflector\");\n\nvar iteratorUtils = require(\"../core/utils/iterator\");\n\nvar isDefined = require(\"../core/utils/type\").isDefined;\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar windowUtils = require(\"../core/utils/window\");\n\nvar getPublicElement = require(\"../core/utils/dom\").getPublicElement;\n\nvar deferRender = require(\"../core/utils/common\").deferRender;\n\nvar ScrollView = require(\"./scroll_view\");\n\nvar CollectionWidget = require(\"./collection/ui.collection_widget.edit\");\n\nvar TILEVIEW_CLASS = \"dx-tileview\";\nvar TILEVIEW_CONTAINER_CLASS = \"dx-tileview-wrapper\";\nvar TILEVIEW_ITEM_CLASS = \"dx-tile\";\nvar TILEVIEW_ITEM_SELECTOR = \".\" + TILEVIEW_ITEM_CLASS;\nvar TILEVIEW_ITEM_DATA_KEY = \"dxTileData\";\nvar CONFIGS = {\n  horizontal: {\n    itemMainRatio: \"widthRatio\",\n    itemCrossRatio: \"heightRatio\",\n    baseItemMainDimension: \"baseItemWidth\",\n    baseItemCrossDimension: \"baseItemHeight\",\n    mainDimension: \"width\",\n    crossDimension: \"height\",\n    mainPosition: \"left\",\n    crossPosition: \"top\"\n  },\n  vertical: {\n    itemMainRatio: \"heightRatio\",\n    itemCrossRatio: \"widthRatio\",\n    baseItemMainDimension: \"baseItemHeight\",\n    baseItemCrossDimension: \"baseItemWidth\",\n    mainDimension: \"height\",\n    crossDimension: \"width\",\n    mainPosition: \"top\",\n    crossPosition: \"left\"\n  }\n};\nvar TileView = CollectionWidget.inherit({\n  _activeStateUnit: TILEVIEW_ITEM_SELECTOR,\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      items: null,\n      direction: \"horizontal\",\n      hoverStateEnabled: true,\n      showScrollbar: false,\n      height: 500,\n      baseItemWidth: 100,\n      baseItemHeight: 100,\n      itemMargin: 20,\n      activeStateEnabled: true,\n      indicateLoading: true\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _itemClass: function _itemClass() {\n    return TILEVIEW_ITEM_CLASS;\n  },\n  _itemDataKey: function _itemDataKey() {\n    return TILEVIEW_ITEM_DATA_KEY;\n  },\n  _itemContainer: function _itemContainer() {\n    return this._$container;\n  },\n  _init: function _init() {\n    this.callBase();\n    this.$element().addClass(TILEVIEW_CLASS);\n\n    this._initScrollView();\n  },\n  _dataSourceLoadingChangedHandler: function _dataSourceLoadingChangedHandler(isLoading) {\n    var scrollView = this._scrollView;\n\n    if (!scrollView || !scrollView.startLoading) {\n      return;\n    }\n\n    if (isLoading && this.option(\"indicateLoading\")) {\n      scrollView.startLoading();\n    } else {\n      scrollView.finishLoading();\n    }\n  },\n  _hideLoadingIfLoadIndicationOff: function _hideLoadingIfLoadIndicationOff() {\n    if (!this.option(\"indicateLoading\")) {\n      this._dataSourceLoadingChangedHandler(false);\n    }\n  },\n  _initScrollView: function _initScrollView() {\n    this._scrollView = this._createComponent(this.$element(), ScrollView, {\n      direction: this.option(\"direction\"),\n      scrollByContent: true,\n      useKeyboard: false,\n      showScrollbar: this.option(\"showScrollbar\")\n    });\n    this._$container = $(this._scrollView.content());\n\n    this._$container.addClass(TILEVIEW_CONTAINER_CLASS);\n\n    this._scrollView.option(\"onUpdated\", this._renderGeometry.bind(this));\n  },\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n    deferRender(function () {\n      this._cellsPerDimension = 1;\n\n      this._renderGeometry();\n\n      this._updateScrollView();\n\n      this._fireContentReadyAction();\n    }.bind(this));\n  },\n  _updateScrollView: function _updateScrollView() {\n    this._scrollView.option(\"direction\", this.option(\"direction\"));\n\n    this._scrollView.update();\n\n    this._indicateLoadingIfAlreadyStarted();\n  },\n  _indicateLoadingIfAlreadyStarted: function _indicateLoadingIfAlreadyStarted() {\n    if (this._isDataSourceLoading()) {\n      this._dataSourceLoadingChangedHandler(true);\n    }\n  },\n  _renderGeometry: function _renderGeometry() {\n    this._config = CONFIGS[this.option(\"direction\")];\n    var items = this.option(\"items\") || [];\n    var config = this._config;\n    var itemMargin = this.option(\"itemMargin\");\n    var maxItemCrossRatio = Math.max.apply(Math, iteratorUtils.map(items || [], function (item) {\n      return Math.round(item[config.itemCrossRatio] || 1);\n    }));\n    var crossDimensionValue = windowUtils.hasWindow() ? this.$element()[config.crossDimension]() : parseInt(this.$element().get(0).style[config.crossDimension]);\n    this._cellsPerDimension = Math.floor(crossDimensionValue / (this.option(config.baseItemCrossDimension) + itemMargin));\n    this._cellsPerDimension = Math.max(this._cellsPerDimension, maxItemCrossRatio);\n    this._cells = [];\n\n    this._cells.push(new Array(this._cellsPerDimension));\n\n    this._arrangeItems(items);\n\n    if (windowUtils.hasWindow()) {\n      this._$container[config.mainDimension](this._cells.length * this.option(config.baseItemMainDimension) + (this._cells.length + 1) * itemMargin);\n    }\n  },\n  _arrangeItems: function _arrangeItems(items) {\n    var config = this._config;\n    var itemMainRatio = config.itemMainRatio;\n    var itemCrossRatio = config.itemCrossRatio;\n    var mainPosition = config.mainPosition;\n    this._itemsPositions = [];\n    iteratorUtils.each(items, function (index, item) {\n      var currentItem = {};\n      currentItem[itemMainRatio] = item[itemMainRatio] || 1;\n      currentItem[itemCrossRatio] = item[itemCrossRatio] || 1;\n      currentItem.index = index;\n      currentItem[itemMainRatio] = currentItem[itemMainRatio] <= 0 ? 0 : Math.round(currentItem[config.itemMainRatio]);\n      currentItem[itemCrossRatio] = currentItem[itemCrossRatio] <= 0 ? 0 : Math.round(currentItem[config.itemCrossRatio]);\n\n      var itemPosition = this._getItemPosition(currentItem);\n\n      if (itemPosition[mainPosition] === -1) {\n        itemPosition[mainPosition] = this._cells.push(new Array(this._cellsPerDimension)) - 1;\n      }\n\n      this._occupyCells(currentItem, itemPosition);\n\n      this._arrangeItem(currentItem, itemPosition);\n\n      this._itemsPositions.push(itemPosition);\n    }.bind(this));\n  },\n  _getItemPosition: function _getItemPosition(item) {\n    var config = this._config;\n    var mainPosition = config.mainPosition;\n    var crossPosition = config.crossPosition;\n    var position = {};\n    position[mainPosition] = -1;\n    position[crossPosition] = 0;\n\n    for (var main = 0; main < this._cells.length; main++) {\n      for (var cross = 0; cross < this._cellsPerDimension; cross++) {\n        if (this._itemFit(main, cross, item)) {\n          position[mainPosition] = main;\n          position[crossPosition] = cross;\n          break;\n        }\n      }\n\n      if (position[mainPosition] > -1) {\n        break;\n      }\n    }\n\n    return position;\n  },\n  _itemFit: function _itemFit(mainPosition, crossPosition, item) {\n    var result = true;\n    var config = this._config;\n    var itemRatioMain = item[config.itemMainRatio];\n    var itemRatioCross = item[config.itemCrossRatio];\n\n    if (crossPosition + itemRatioCross > this._cellsPerDimension) {\n      return false;\n    }\n\n    for (var main = mainPosition; main < mainPosition + itemRatioMain; main++) {\n      for (var cross = crossPosition; cross < crossPosition + itemRatioCross; cross++) {\n        if (this._cells.length - 1 < main) {\n          this._cells.push(new Array(this._cellsPerDimension));\n        } else {\n          if (void 0 !== this._cells[main][cross]) {\n            result = false;\n            break;\n          }\n        }\n      }\n    }\n\n    return result;\n  },\n  _occupyCells: function _occupyCells(item, itemPosition) {\n    var config = this._config;\n    var itemPositionMain = itemPosition[config.mainPosition];\n    var itemPositionCross = itemPosition[config.crossPosition];\n    var itemRatioMain = item[config.itemMainRatio];\n    var itemRatioCross = item[config.itemCrossRatio];\n\n    for (var main = itemPositionMain; main < itemPositionMain + itemRatioMain; main++) {\n      for (var cross = itemPositionCross; cross < itemPositionCross + itemRatioCross; cross++) {\n        this._cells[main][cross] = item.index;\n      }\n    }\n  },\n  _arrangeItem: function _arrangeItem(item, itemPosition) {\n    var config = this._config;\n    var itemPositionMain = itemPosition[config.mainPosition];\n    var itemPositionCross = itemPosition[config.crossPosition];\n    var itemRatioMain = item[config.itemMainRatio];\n    var itemRatioCross = item[config.itemCrossRatio];\n    var baseItemCross = this.option(config.baseItemCrossDimension);\n    var baseItemMain = this.option(config.baseItemMainDimension);\n    var itemMargin = this.option(\"itemMargin\");\n    var cssProps = {\n      display: itemRatioMain <= 0 || itemRatioCross <= 0 ? \"none\" : \"\"\n    };\n    var mainDimension = itemRatioMain * baseItemMain + (itemRatioMain - 1) * itemMargin;\n    var crossDimension = itemRatioCross * baseItemCross + (itemRatioCross - 1) * itemMargin;\n    cssProps[config.mainDimension] = mainDimension < 0 ? 0 : mainDimension;\n    cssProps[config.crossDimension] = crossDimension < 0 ? 0 : crossDimension;\n    cssProps[config.mainPosition] = itemPositionMain * baseItemMain + (itemPositionMain + 1) * itemMargin;\n    cssProps[config.crossPosition] = itemPositionCross * baseItemCross + (itemPositionCross + 1) * itemMargin;\n\n    if (this.option(\"rtlEnabled\")) {\n      var offsetCorrection = this._$container.width();\n\n      var baseItemWidth = this.option(\"baseItemWidth\");\n      var itemPositionX = itemPosition.left;\n      var offsetPosition = itemPositionX * baseItemWidth;\n      var itemBaseOffset = baseItemWidth + itemMargin;\n      var itemWidth = itemBaseOffset * item.widthRatio;\n      var subItemMargins = itemPositionX * itemMargin;\n      cssProps.left = offsetCorrection - (offsetPosition + itemWidth + subItemMargins);\n    }\n\n    this._itemElements().eq(item.index).css(cssProps);\n  },\n  _moveFocus: function _moveFocus(location) {\n    var FOCUS_UP = \"up\";\n    var FOCUS_DOWN = \"down\";\n    var FOCUS_LEFT = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\n    var FOCUS_RIGHT = this.option(\"rtlEnabled\") ? \"left\" : \"right\";\n    var FOCUS_PAGE_UP = \"pageup\";\n    var FOCUS_PAGE_DOWN = \"pagedown\";\n    var horizontalDirection = \"horizontal\" === this.option(\"direction\");\n    var cells = this._cells;\n    var index = $(this.option(\"focusedElement\")).index();\n    var targetCol = this._itemsPositions[index].left;\n    var targetRow = this._itemsPositions[index].top;\n    var colCount = (horizontalDirection ? cells : cells[0]).length;\n    var rowCount = (horizontalDirection ? cells[0] : cells).length;\n\n    var getCell = function getCell(col, row) {\n      if (horizontalDirection) {\n        return cells[col][row];\n      }\n\n      return cells[row][col];\n    };\n\n    switch (location) {\n      case FOCUS_PAGE_UP:\n      case FOCUS_UP:\n        while (targetRow > 0 && index === getCell(targetCol, targetRow)) {\n          targetRow--;\n        }\n\n        if (targetRow < 0) {\n          targetRow = 0;\n        }\n\n        break;\n\n      case FOCUS_PAGE_DOWN:\n      case FOCUS_DOWN:\n        while (targetRow < rowCount && index === getCell(targetCol, targetRow)) {\n          targetRow++;\n        }\n\n        if (targetRow === rowCount) {\n          targetRow = rowCount - 1;\n        }\n\n        break;\n\n      case FOCUS_RIGHT:\n        while (targetCol < colCount && index === getCell(targetCol, targetRow)) {\n          targetCol++;\n        }\n\n        if (targetCol === colCount) {\n          targetCol = colCount - 1;\n        }\n\n        break;\n\n      case FOCUS_LEFT:\n        while (targetCol >= 0 && index === getCell(targetCol, targetRow)) {\n          targetCol--;\n        }\n\n        if (targetCol < 0) {\n          targetCol = 0;\n        }\n\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n        return;\n    }\n\n    var newTargetIndex = getCell(targetCol, targetRow);\n\n    if (!isDefined(newTargetIndex)) {\n      return;\n    }\n\n    var $newTarget = this._itemElements().eq(newTargetIndex);\n\n    this.option(\"focusedElement\", getPublicElement($newTarget));\n\n    this._scrollToItem($newTarget);\n  },\n  _scrollToItem: function _scrollToItem($itemElement) {\n    if (!$itemElement.length) {\n      return;\n    }\n\n    var config = this._config;\n    var outerMainProp = \"outer\" + inflector.captionize(config.mainDimension);\n    var itemMargin = this.option(\"itemMargin\");\n    var itemPosition = $itemElement.position()[config.mainPosition];\n    var itemDimension = $itemElement[outerMainProp]();\n    var itemTail = itemPosition + itemDimension;\n    var scrollPosition = this.scrollPosition();\n    var clientWidth = this.$element()[outerMainProp]();\n\n    if (scrollPosition <= itemPosition && itemTail <= scrollPosition + clientWidth) {\n      return;\n    }\n\n    if (scrollPosition > itemPosition) {\n      this._scrollView.scrollTo(itemPosition - itemMargin);\n    } else {\n      this._scrollView.scrollTo(itemPosition + itemDimension - clientWidth + itemMargin);\n    }\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"items\":\n        this.callBase(args);\n\n        this._renderGeometry();\n\n        this._updateScrollView();\n\n        break;\n\n      case \"showScrollbar\":\n        this._initScrollView();\n\n        break;\n\n      case \"disabled\":\n        this._scrollView.option(\"disabled\", args.value);\n\n        this.callBase(args);\n        break;\n\n      case \"baseItemWidth\":\n      case \"baseItemHeight\":\n      case \"itemMargin\":\n        this._renderGeometry();\n\n        break;\n\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n\n        this._renderGeometry();\n\n        this._updateScrollView();\n\n        break;\n\n      case \"direction\":\n        this._renderGeometry();\n\n        this._updateScrollView();\n\n        break;\n\n      case \"indicateLoading\":\n        this._hideLoadingIfLoadIndicationOff();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  scrollPosition: function scrollPosition() {\n    return this._scrollView.scrollOffset()[this._config.mainPosition];\n  }\n});\nregisterComponent(\"dxTileView\", TileView);\nmodule.exports = TileView;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/tile_view.js"],"names":["$","require","devices","registerComponent","inflector","iteratorUtils","isDefined","extend","windowUtils","getPublicElement","deferRender","ScrollView","CollectionWidget","TILEVIEW_CLASS","TILEVIEW_CONTAINER_CLASS","TILEVIEW_ITEM_CLASS","TILEVIEW_ITEM_SELECTOR","TILEVIEW_ITEM_DATA_KEY","CONFIGS","horizontal","itemMainRatio","itemCrossRatio","baseItemMainDimension","baseItemCrossDimension","mainDimension","crossDimension","mainPosition","crossPosition","vertical","TileView","_activeStateUnit","_getDefaultOptions","items","direction","hoverStateEnabled","showScrollbar","height","baseItemWidth","baseItemHeight","itemMargin","activeStateEnabled","indicateLoading","_defaultOptionsRules","device","options","focusStateEnabled","_itemClass","_itemDataKey","_itemContainer","_init","_dataSourceLoadingChangedHandler","scrollView","isLoading","_hideLoadingIfLoadIndicationOff","_initScrollView","scrollByContent","useKeyboard","_initMarkup","_updateScrollView","_indicateLoadingIfAlreadyStarted","_renderGeometry","config","maxItemCrossRatio","Math","item","crossDimensionValue","parseInt","_arrangeItems","currentItem","itemPosition","_getItemPosition","position","main","cross","_itemFit","result","itemRatioMain","itemRatioCross","_occupyCells","itemPositionMain","itemPositionCross","_arrangeItem","baseItemCross","baseItemMain","cssProps","display","offsetCorrection","itemPositionX","offsetPosition","itemBaseOffset","itemWidth","subItemMargins","_moveFocus","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_PAGE_UP","FOCUS_PAGE_DOWN","horizontalDirection","cells","index","targetCol","targetRow","colCount","rowCount","getCell","newTargetIndex","$newTarget","_scrollToItem","$itemElement","outerMainProp","itemDimension","itemTail","scrollPosition","clientWidth","_optionChanged","args","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,CAAC,GAAGC,OAAO,CAAf,kBAAe,CAAf;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAArB,iBAAqB,CAArB;;AACA,IAAIE,iBAAiB,GAAGF,OAAO,CAA/B,+BAA+B,CAA/B;;AACA,IAAIG,SAAS,GAAGH,OAAO,CAAvB,yBAAuB,CAAvB;;AACA,IAAII,aAAa,GAAGJ,OAAO,CAA3B,wBAA2B,CAA3B;;AACA,IAAIK,SAAS,GAAGL,OAAO,CAAPA,oBAAO,CAAPA,CAAhB,SAAA;;AACA,IAAIM,MAAM,GAAGN,OAAO,CAAPA,sBAAO,CAAPA,CAAb,MAAA;;AACA,IAAIO,WAAW,GAAGP,OAAO,CAAzB,sBAAyB,CAAzB;;AACA,IAAIQ,gBAAgB,GAAGR,OAAO,CAAPA,mBAAO,CAAPA,CAAvB,gBAAA;;AACA,IAAIS,WAAW,GAAGT,OAAO,CAAPA,sBAAO,CAAPA,CAAlB,WAAA;;AACA,IAAIU,UAAU,GAAGV,OAAO,CAAxB,eAAwB,CAAxB;;AACA,IAAIW,gBAAgB,GAAGX,OAAO,CAA9B,wCAA8B,CAA9B;;AACA,IAAIY,cAAc,GAAlB,aAAA;AACA,IAAIC,wBAAwB,GAA5B,qBAAA;AACA,IAAIC,mBAAmB,GAAvB,SAAA;AACA,IAAIC,sBAAsB,GAAG,MAA7B,mBAAA;AACA,IAAIC,sBAAsB,GAA1B,YAAA;AACA,IAAIC,OAAO,GAAG;AACVC,EAAAA,UAAU,EAAE;AACRC,IAAAA,aAAa,EADL,YAAA;AAERC,IAAAA,cAAc,EAFN,aAAA;AAGRC,IAAAA,qBAAqB,EAHb,eAAA;AAIRC,IAAAA,sBAAsB,EAJd,gBAAA;AAKRC,IAAAA,aAAa,EALL,OAAA;AAMRC,IAAAA,cAAc,EANN,QAAA;AAORC,IAAAA,YAAY,EAPJ,MAAA;AAQRC,IAAAA,aAAa,EAAE;AARP,GADF;AAWVC,EAAAA,QAAQ,EAAE;AACNR,IAAAA,aAAa,EADP,aAAA;AAENC,IAAAA,cAAc,EAFR,YAAA;AAGNC,IAAAA,qBAAqB,EAHf,gBAAA;AAINC,IAAAA,sBAAsB,EAJhB,eAAA;AAKNC,IAAAA,aAAa,EALP,QAAA;AAMNC,IAAAA,cAAc,EANR,OAAA;AAONC,IAAAA,YAAY,EAPN,KAAA;AAQNC,IAAAA,aAAa,EAAE;AART;AAXA,CAAd;AAsBA,IAAIE,QAAQ,GAAG,gBAAgB,CAAhB,OAAA,CAAyB;AACpCC,EAAAA,gBAAgB,EADoB,sBAAA;AAEpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,WAAOxB,MAAM,CAAC,KAAD,QAAC,EAAD,EAAkB;AAC3ByB,MAAAA,KAAK,EADsB,IAAA;AAE3BC,MAAAA,SAAS,EAFkB,YAAA;AAG3BC,MAAAA,iBAAiB,EAHU,IAAA;AAI3BC,MAAAA,aAAa,EAJc,KAAA;AAK3BC,MAAAA,MAAM,EALqB,GAAA;AAM3BC,MAAAA,aAAa,EANc,GAAA;AAO3BC,MAAAA,cAAc,EAPa,GAAA;AAQ3BC,MAAAA,UAAU,EARiB,EAAA;AAS3BC,MAAAA,kBAAkB,EATS,IAAA;AAU3BC,MAAAA,eAAe,EAAE;AAVU,KAAlB,CAAb;AAHgC,GAAA;AAgBpCC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,WAAO,KAAA,QAAA,GAAA,MAAA,CAAuB,CAAC;AAC3BC,MAAAA,MAAM,EAAE,SAAA,MAAA,GAAW;AACf,eAAO,cAAczC,OAAO,CAAPA,IAAAA,GAAd,UAAA,IAA2C,CAACA,OAAO,CAA1D,WAAmDA,EAAnD;AAFuB,OAAA;AAI3B0C,MAAAA,OAAO,EAAE;AACLC,QAAAA,iBAAiB,EAAE;AADd;AAJkB,KAAD,CAAvB,CAAP;AAjBgC,GAAA;AA0BpCC,EAAAA,UAAU,EAAE,SAAA,UAAA,GAAW;AACnB,WAAA,mBAAA;AA3BgC,GAAA;AA6BpCC,EAAAA,YAAY,EAAE,SAAA,YAAA,GAAW;AACrB,WAAA,sBAAA;AA9BgC,GAAA;AAgCpCC,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,WAAO,KAAP,WAAA;AAjCgC,GAAA;AAmCpCC,EAAAA,KAAK,EAAE,SAAA,KAAA,GAAW;AACd,SAAA,QAAA;AACA,SAAA,QAAA,GAAA,QAAA,CAAA,cAAA;;AACA,SAAA,eAAA;AAtCgC,GAAA;AAwCpCC,EAAAA,gCAAgC,EAAE,SAAA,gCAAA,CAAA,SAAA,EAAoB;AAClD,QAAIC,UAAU,GAAG,KAAjB,WAAA;;AACA,QAAI,CAAA,UAAA,IAAe,CAACA,UAAU,CAA9B,YAAA,EAA6C;AACzC;AACH;;AACD,QAAIC,SAAS,IAAI,KAAA,MAAA,CAAjB,iBAAiB,CAAjB,EAAiD;AAC7CD,MAAAA,UAAU,CAAVA,YAAAA;AADJ,KAAA,MAEO;AACHA,MAAAA,UAAU,CAAVA,aAAAA;AACH;AAjD+B,GAAA;AAmDpCE,EAAAA,+BAA+B,EAAE,SAAA,+BAAA,GAAW;AACxC,QAAI,CAAC,KAAA,MAAA,CAAL,iBAAK,CAAL,EAAqC;AACjC,WAAA,gCAAA,CAAA,KAAA;AACH;AAtD+B,GAAA;AAwDpCC,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,SAAA,WAAA,GAAmB,KAAA,gBAAA,CAAsB,KAAtB,QAAsB,EAAtB,EAAA,UAAA,EAAmD;AAClErB,MAAAA,SAAS,EAAE,KAAA,MAAA,CADuD,WACvD,CADuD;AAElEsB,MAAAA,eAAe,EAFmD,IAAA;AAGlEC,MAAAA,WAAW,EAHuD,KAAA;AAIlErB,MAAAA,aAAa,EAAE,KAAA,MAAA,CAAA,eAAA;AAJmD,KAAnD,CAAnB;AAMA,SAAA,WAAA,GAAmBnC,CAAC,CAAC,KAAA,WAAA,CAArB,OAAqB,EAAD,CAApB;;AACA,SAAA,WAAA,CAAA,QAAA,CAAA,wBAAA;;AACA,SAAA,WAAA,CAAA,MAAA,CAAA,WAAA,EAAqC,KAAA,eAAA,CAAA,IAAA,CAArC,IAAqC,CAArC;AAjEgC,GAAA;AAmEpCyD,EAAAA,WAAW,EAAE,SAAA,WAAA,GAAW;AACpB,SAAA,QAAA;AACA/C,IAAAA,WAAW,CAAC,YAAW;AACnB,WAAA,kBAAA,GAAA,CAAA;;AACA,WAAA,eAAA;;AACA,WAAA,iBAAA;;AACA,WAAA,uBAAA;AAJQ,KAAA,CAAA,IAAA,CAAZA,IAAY,CAAD,CAAXA;AArEgC,GAAA;AA4EpCgD,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,SAAA,WAAA,CAAA,MAAA,CAAA,WAAA,EAAqC,KAAA,MAAA,CAArC,WAAqC,CAArC;;AACA,SAAA,WAAA,CAAA,MAAA;;AACA,SAAA,gCAAA;AA/EgC,GAAA;AAiFpCC,EAAAA,gCAAgC,EAAE,SAAA,gCAAA,GAAW;AACzC,QAAI,KAAJ,oBAAI,EAAJ,EAAiC;AAC7B,WAAA,gCAAA,CAAA,IAAA;AACH;AApF+B,GAAA;AAsFpCC,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,SAAA,OAAA,GAAe1C,OAAO,CAAC,KAAA,MAAA,CAAvB,WAAuB,CAAD,CAAtB;AACA,QAAIc,KAAK,GAAG,KAAA,MAAA,CAAA,OAAA,KAAZ,EAAA;AACA,QAAI6B,MAAM,GAAG,KAAb,OAAA;AACA,QAAItB,UAAU,GAAG,KAAA,MAAA,CAAjB,YAAiB,CAAjB;AACA,QAAIuB,iBAAiB,GAAG,IAAI,CAAJ,GAAA,CAAA,KAAA,CAAA,IAAA,EAAqB,aAAa,CAAb,GAAA,CAAkB9B,KAAK,IAAvB,EAAA,EAA+B,UAAA,IAAA,EAAe;AACvF,aAAO+B,IAAI,CAAJA,KAAAA,CAAWC,IAAI,CAACH,MAAM,CAAXG,cAAI,CAAJA,IAAlB,CAAOD,CAAP;AADJ,KAA6C,CAArB,CAAxB;AAGA,QAAIE,mBAAmB,GAAGzD,WAAW,CAAXA,SAAAA,KAA0B,KAAA,QAAA,GAAgBqD,MAAM,CAAhDrD,cAA0B,GAA1BA,GAAqE0D,QAAQ,CAAC,KAAA,QAAA,GAAA,GAAA,CAAA,CAAA,EAAA,KAAA,CAA6BL,MAAM,CAA3I,cAAwG,CAAD,CAAvG;AACA,SAAA,kBAAA,GAA0BE,IAAI,CAAJA,KAAAA,CAAWE,mBAAmB,IAAI,KAAA,MAAA,CAAYJ,MAAM,CAAlB,sBAAA,IAA5D,UAAwD,CAA9BE,CAA1B;AACA,SAAA,kBAAA,GAA0BA,IAAI,CAAJA,GAAAA,CAAS,KAATA,kBAAAA,EAA1B,iBAA0BA,CAA1B;AACA,SAAA,MAAA,GAAA,EAAA;;AACA,SAAA,MAAA,CAAA,IAAA,CAAiB,IAAA,KAAA,CAAU,KAA3B,kBAAiB,CAAjB;;AACA,SAAA,aAAA,CAAA,KAAA;;AACA,QAAIvD,WAAW,CAAf,SAAIA,EAAJ,EAA6B;AACzB,WAAA,WAAA,CAAiBqD,MAAM,CAAvB,aAAA,EAAuC,KAAA,MAAA,CAAA,MAAA,GAAqB,KAAA,MAAA,CAAYA,MAAM,CAAvC,qBAAqB,CAArB,GAAiE,CAAC,KAAA,MAAA,CAAA,MAAA,GAAD,CAAA,IAAxG,UAAA;AACH;AAtG+B,GAAA;AAwGpCM,EAAAA,aAAa,EAAE,SAAA,aAAA,CAAA,KAAA,EAAgB;AAC3B,QAAIN,MAAM,GAAG,KAAb,OAAA;AACA,QAAIzC,aAAa,GAAGyC,MAAM,CAA1B,aAAA;AACA,QAAIxC,cAAc,GAAGwC,MAAM,CAA3B,cAAA;AACA,QAAInC,YAAY,GAAGmC,MAAM,CAAzB,YAAA;AACA,SAAA,eAAA,GAAA,EAAA;AACAxD,IAAAA,aAAa,CAAbA,IAAAA,CAAAA,KAAAA,EAA0B,UAAA,KAAA,EAAA,IAAA,EAAsB;AAC5C,UAAI+D,WAAW,GAAf,EAAA;AACAA,MAAAA,WAAW,CAAXA,aAAW,CAAXA,GAA6BJ,IAAI,CAAJA,aAAI,CAAJA,IAA7BI,CAAAA;AACAA,MAAAA,WAAW,CAAXA,cAAW,CAAXA,GAA8BJ,IAAI,CAAJA,cAAI,CAAJA,IAA9BI,CAAAA;AACAA,MAAAA,WAAW,CAAXA,KAAAA,GAAAA,KAAAA;AACAA,MAAAA,WAAW,CAAXA,aAAW,CAAXA,GAA6BA,WAAW,CAAXA,aAAW,CAAXA,IAAAA,CAAAA,GAAAA,CAAAA,GAAsCL,IAAI,CAAJA,KAAAA,CAAWK,WAAW,CAACP,MAAM,CAAhGO,aAAyF,CAAtBL,CAAnEK;AACAA,MAAAA,WAAW,CAAXA,cAAW,CAAXA,GAA8BA,WAAW,CAAXA,cAAW,CAAXA,IAAAA,CAAAA,GAAAA,CAAAA,GAAuCL,IAAI,CAAJA,KAAAA,CAAWK,WAAW,CAACP,MAAM,CAAlGO,cAA2F,CAAtBL,CAArEK;;AACA,UAAIC,YAAY,GAAG,KAAA,gBAAA,CAAnB,WAAmB,CAAnB;;AACA,UAAIA,YAAY,CAAZA,YAAY,CAAZA,KAA+B,CAAnC,CAAA,EAAuC;AACnCA,QAAAA,YAAY,CAAZA,YAAY,CAAZA,GAA6B,KAAA,MAAA,CAAA,IAAA,CAAiB,IAAA,KAAA,CAAU,KAA3B,kBAAiB,CAAjB,IAA7BA,CAAAA;AACH;;AACD,WAAA,YAAA,CAAA,WAAA,EAAA,YAAA;;AACA,WAAA,YAAA,CAAA,WAAA,EAAA,YAAA;;AACA,WAAA,eAAA,CAAA,IAAA,CAAA,YAAA;AAbsB,KAAA,CAAA,IAAA,CAA1BhE,IAA0B,CAA1BA;AA9GgC,GAAA;AA8HpCiE,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,IAAA,EAAe;AAC7B,QAAIT,MAAM,GAAG,KAAb,OAAA;AACA,QAAInC,YAAY,GAAGmC,MAAM,CAAzB,YAAA;AACA,QAAIlC,aAAa,GAAGkC,MAAM,CAA1B,aAAA;AACA,QAAIU,QAAQ,GAAZ,EAAA;AACAA,IAAAA,QAAQ,CAARA,YAAQ,CAARA,GAAyB,CAAzBA,CAAAA;AACAA,IAAAA,QAAQ,CAARA,aAAQ,CAARA,GAAAA,CAAAA;;AACA,SAAK,IAAIC,IAAI,GAAb,CAAA,EAAmBA,IAAI,GAAG,KAAA,MAAA,CAA1B,MAAA,EAA8CA,IAA9C,EAAA,EAAsD;AAClD,WAAK,IAAIC,KAAK,GAAd,CAAA,EAAoBA,KAAK,GAAG,KAA5B,kBAAA,EAAqDA,KAArD,EAAA,EAA8D;AAC1D,YAAI,KAAA,QAAA,CAAA,IAAA,EAAA,KAAA,EAAJ,IAAI,CAAJ,EAAsC;AAClCF,UAAAA,QAAQ,CAARA,YAAQ,CAARA,GAAAA,IAAAA;AACAA,UAAAA,QAAQ,CAARA,aAAQ,CAARA,GAAAA,KAAAA;AACA;AACH;AACJ;;AACD,UAAIA,QAAQ,CAARA,YAAQ,CAARA,GAAyB,CAA7B,CAAA,EAAiC;AAC7B;AACH;AACJ;;AACD,WAAA,QAAA;AAjJgC,GAAA;AAmJpCG,EAAAA,QAAQ,EAAE,SAAA,QAAA,CAAA,YAAA,EAAA,aAAA,EAAA,IAAA,EAA4C;AAClD,QAAIC,MAAM,GAAV,IAAA;AACA,QAAId,MAAM,GAAG,KAAb,OAAA;AACA,QAAIe,aAAa,GAAGZ,IAAI,CAACH,MAAM,CAA/B,aAAwB,CAAxB;AACA,QAAIgB,cAAc,GAAGb,IAAI,CAACH,MAAM,CAAhC,cAAyB,CAAzB;;AACA,QAAIlC,aAAa,GAAbA,cAAAA,GAAiC,KAArC,kBAAA,EAA8D;AAC1D,aAAA,KAAA;AACH;;AACD,SAAK,IAAI6C,IAAI,GAAb,YAAA,EAA8BA,IAAI,GAAG9C,YAAY,GAAjD,aAAA,EAAmE8C,IAAnE,EAAA,EAA2E;AACvE,WAAK,IAAIC,KAAK,GAAd,aAAA,EAAgCA,KAAK,GAAG9C,aAAa,GAArD,cAAA,EAAwE8C,KAAxE,EAAA,EAAiF;AAC7E,YAAI,KAAA,MAAA,CAAA,MAAA,GAAA,CAAA,GAAJ,IAAA,EAAmC;AAC/B,eAAA,MAAA,CAAA,IAAA,CAAiB,IAAA,KAAA,CAAU,KAA3B,kBAAiB,CAAjB;AADJ,SAAA,MAEO;AACH,cAAI,KAAA,CAAA,KAAW,KAAA,MAAA,CAAA,IAAA,EAAf,KAAe,CAAf,EAAyC;AACrCE,YAAAA,MAAM,GAANA,KAAAA;AACA;AACH;AACJ;AACJ;AACJ;;AACD,WAAA,MAAA;AAvKgC,GAAA;AAyKpCG,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,IAAA,EAAA,YAAA,EAA6B;AACvC,QAAIjB,MAAM,GAAG,KAAb,OAAA;AACA,QAAIkB,gBAAgB,GAAGV,YAAY,CAACR,MAAM,CAA1C,YAAmC,CAAnC;AACA,QAAImB,iBAAiB,GAAGX,YAAY,CAACR,MAAM,CAA3C,aAAoC,CAApC;AACA,QAAIe,aAAa,GAAGZ,IAAI,CAACH,MAAM,CAA/B,aAAwB,CAAxB;AACA,QAAIgB,cAAc,GAAGb,IAAI,CAACH,MAAM,CAAhC,cAAyB,CAAzB;;AACA,SAAK,IAAIW,IAAI,GAAb,gBAAA,EAAkCA,IAAI,GAAGO,gBAAgB,GAAzD,aAAA,EAA2EP,IAA3E,EAAA,EAAmF;AAC/E,WAAK,IAAIC,KAAK,GAAd,iBAAA,EAAoCA,KAAK,GAAGO,iBAAiB,GAA7D,cAAA,EAAgFP,KAAhF,EAAA,EAAyF;AACrF,aAAA,MAAA,CAAA,IAAA,EAAA,KAAA,IAA2BT,IAAI,CAA/B,KAAA;AACH;AACJ;AAnL+B,GAAA;AAqLpCiB,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,IAAA,EAAA,YAAA,EAA6B;AACvC,QAAIpB,MAAM,GAAG,KAAb,OAAA;AACA,QAAIkB,gBAAgB,GAAGV,YAAY,CAACR,MAAM,CAA1C,YAAmC,CAAnC;AACA,QAAImB,iBAAiB,GAAGX,YAAY,CAACR,MAAM,CAA3C,aAAoC,CAApC;AACA,QAAIe,aAAa,GAAGZ,IAAI,CAACH,MAAM,CAA/B,aAAwB,CAAxB;AACA,QAAIgB,cAAc,GAAGb,IAAI,CAACH,MAAM,CAAhC,cAAyB,CAAzB;AACA,QAAIqB,aAAa,GAAG,KAAA,MAAA,CAAYrB,MAAM,CAAtC,sBAAoB,CAApB;AACA,QAAIsB,YAAY,GAAG,KAAA,MAAA,CAAYtB,MAAM,CAArC,qBAAmB,CAAnB;AACA,QAAItB,UAAU,GAAG,KAAA,MAAA,CAAjB,YAAiB,CAAjB;AACA,QAAI6C,QAAQ,GAAG;AACXC,MAAAA,OAAO,EAAET,aAAa,IAAbA,CAAAA,IAAsBC,cAAc,IAApCD,CAAAA,GAAAA,MAAAA,GAAqD;AADnD,KAAf;AAGA,QAAIpD,aAAa,GAAGoD,aAAa,GAAbA,YAAAA,GAA+B,CAACA,aAAa,GAAd,CAAA,IAAnD,UAAA;AACA,QAAInD,cAAc,GAAGoD,cAAc,GAAdA,aAAAA,GAAiC,CAACA,cAAc,GAAf,CAAA,IAAtD,UAAA;AACAO,IAAAA,QAAQ,CAACvB,MAAM,CAAfuB,aAAQ,CAARA,GAAiC5D,aAAa,GAAbA,CAAAA,GAAAA,CAAAA,GAAjC4D,aAAAA;AACAA,IAAAA,QAAQ,CAACvB,MAAM,CAAfuB,cAAQ,CAARA,GAAkC3D,cAAc,GAAdA,CAAAA,GAAAA,CAAAA,GAAlC2D,cAAAA;AACAA,IAAAA,QAAQ,CAACvB,MAAM,CAAfuB,YAAQ,CAARA,GAAgCL,gBAAgB,GAAhBA,YAAAA,GAAkC,CAACA,gBAAgB,GAAjB,CAAA,IAAlEK,UAAAA;AACAA,IAAAA,QAAQ,CAACvB,MAAM,CAAfuB,aAAQ,CAARA,GAAiCJ,iBAAiB,GAAjBA,aAAAA,GAAoC,CAACA,iBAAiB,GAAlB,CAAA,IAArEI,UAAAA;;AACA,QAAI,KAAA,MAAA,CAAJ,YAAI,CAAJ,EAA+B;AAC3B,UAAIE,gBAAgB,GAAG,KAAA,WAAA,CAAvB,KAAuB,EAAvB;;AACA,UAAIjD,aAAa,GAAG,KAAA,MAAA,CAApB,eAAoB,CAApB;AACA,UAAIkD,aAAa,GAAGlB,YAAY,CAAhC,IAAA;AACA,UAAImB,cAAc,GAAGD,aAAa,GAAlC,aAAA;AACA,UAAIE,cAAc,GAAGpD,aAAa,GAAlC,UAAA;AACA,UAAIqD,SAAS,GAAGD,cAAc,GAAGzB,IAAI,CAArC,UAAA;AACA,UAAI2B,cAAc,GAAGJ,aAAa,GAAlC,UAAA;AACAH,MAAAA,QAAQ,CAARA,IAAAA,GAAgBE,gBAAgB,IAAIE,cAAc,GAAdA,SAAAA,GAApCJ,cAAgC,CAAhCA;AACH;;AACD,SAAA,aAAA,GAAA,EAAA,CAAwBpB,IAAI,CAA5B,KAAA,EAAA,GAAA,CAAA,QAAA;AAjNgC,GAAA;AAmNpC4B,EAAAA,UAAU,EAAE,SAAA,UAAA,CAAA,QAAA,EAAmB;AAC3B,QAAIC,QAAQ,GAAZ,IAAA;AACA,QAAIC,UAAU,GAAd,MAAA;AACA,QAAIC,UAAU,GAAG,KAAA,MAAA,CAAA,YAAA,IAAA,OAAA,GAAjB,MAAA;AACA,QAAIC,WAAW,GAAG,KAAA,MAAA,CAAA,YAAA,IAAA,MAAA,GAAlB,OAAA;AACA,QAAIC,aAAa,GAAjB,QAAA;AACA,QAAIC,eAAe,GAAnB,UAAA;AACA,QAAIC,mBAAmB,GAAG,iBAAiB,KAAA,MAAA,CAA3C,WAA2C,CAA3C;AACA,QAAIC,KAAK,GAAG,KAAZ,MAAA;AACA,QAAIC,KAAK,GAAGrG,CAAC,CAAC,KAAA,MAAA,CAAFA,gBAAE,CAAD,CAADA,CAAZ,KAAYA,EAAZ;AACA,QAAIsG,SAAS,GAAG,KAAA,eAAA,CAAA,KAAA,EAAhB,IAAA;AACA,QAAIC,SAAS,GAAG,KAAA,eAAA,CAAA,KAAA,EAAhB,GAAA;AACA,QAAIC,QAAQ,GAAG,CAACL,mBAAmB,GAAA,KAAA,GAAWC,KAAK,CAApC,CAAoC,CAApC,EAAf,MAAA;AACA,QAAIK,QAAQ,GAAG,CAACN,mBAAmB,GAAGC,KAAK,CAAR,CAAQ,CAAR,GAApB,KAAA,EAAf,MAAA;;AACA,QAAIM,OAAO,GAAG,SAAVA,OAAU,CAAA,GAAA,EAAA,GAAA,EAAmB;AAC7B,UAAA,mBAAA,EAAyB;AACrB,eAAON,KAAK,CAALA,GAAK,CAALA,CAAP,GAAOA,CAAP;AACH;;AACD,aAAOA,KAAK,CAALA,GAAK,CAALA,CAAP,GAAOA,CAAP;AAJJ,KAAA;;AAMA,YAAA,QAAA;AACI,WAAA,aAAA;AACA,WAAA,QAAA;AACI,eAAOG,SAAS,GAATA,CAAAA,IAAiBF,KAAK,KAAKK,OAAO,CAAA,SAAA,EAAzC,SAAyC,CAAzC,EAAiE;AAC7DH,UAAAA,SAAS;AACZ;;AACD,YAAIA,SAAS,GAAb,CAAA,EAAmB;AACfA,UAAAA,SAAS,GAATA,CAAAA;AACH;;AACD;;AACJ,WAAA,eAAA;AACA,WAAA,UAAA;AACI,eAAOA,SAAS,GAATA,QAAAA,IAAwBF,KAAK,KAAKK,OAAO,CAAA,SAAA,EAAhD,SAAgD,CAAhD,EAAwE;AACpEH,UAAAA,SAAS;AACZ;;AACD,YAAIA,SAAS,KAAb,QAAA,EAA4B;AACxBA,UAAAA,SAAS,GAAGE,QAAQ,GAApBF,CAAAA;AACH;;AACD;;AACJ,WAAA,WAAA;AACI,eAAOD,SAAS,GAATA,QAAAA,IAAwBD,KAAK,KAAKK,OAAO,CAAA,SAAA,EAAhD,SAAgD,CAAhD,EAAwE;AACpEJ,UAAAA,SAAS;AACZ;;AACD,YAAIA,SAAS,KAAb,QAAA,EAA4B;AACxBA,UAAAA,SAAS,GAAGE,QAAQ,GAApBF,CAAAA;AACH;;AACD;;AACJ,WAAA,UAAA;AACI,eAAOA,SAAS,IAATA,CAAAA,IAAkBD,KAAK,KAAKK,OAAO,CAAA,SAAA,EAA1C,SAA0C,CAA1C,EAAkE;AAC9DJ,UAAAA,SAAS;AACZ;;AACD,YAAIA,SAAS,GAAb,CAAA,EAAmB;AACfA,UAAAA,SAAS,GAATA,CAAAA;AACH;;AACD;;AACJ;AACI,aAAA,QAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA;AACA;AArCR;;AAuCA,QAAIK,cAAc,GAAGD,OAAO,CAAA,SAAA,EAA5B,SAA4B,CAA5B;;AACA,QAAI,CAACpG,SAAS,CAAd,cAAc,CAAd,EAAgC;AAC5B;AACH;;AACD,QAAIsG,UAAU,GAAG,KAAA,aAAA,GAAA,EAAA,CAAjB,cAAiB,CAAjB;;AACA,SAAA,MAAA,CAAA,gBAAA,EAA8BnG,gBAAgB,CAA9C,UAA8C,CAA9C;;AACA,SAAA,aAAA,CAAA,UAAA;AApRgC,GAAA;AAsRpCoG,EAAAA,aAAa,EAAE,SAAA,aAAA,CAAA,YAAA,EAAuB;AAClC,QAAI,CAACC,YAAY,CAAjB,MAAA,EAA0B;AACtB;AACH;;AACD,QAAIjD,MAAM,GAAG,KAAb,OAAA;AACA,QAAIkD,aAAa,GAAG,UAAU3G,SAAS,CAATA,UAAAA,CAAqByD,MAAM,CAAzD,aAA8BzD,CAA9B;AACA,QAAImC,UAAU,GAAG,KAAA,MAAA,CAAjB,YAAiB,CAAjB;AACA,QAAI8B,YAAY,GAAGyC,YAAY,CAAZA,QAAAA,GAAwBjD,MAAM,CAAjD,YAAmBiD,CAAnB;AACA,QAAIE,aAAa,GAAGF,YAAY,CAAhC,aAAgC,CAAZA,EAApB;AACA,QAAIG,QAAQ,GAAG5C,YAAY,GAA3B,aAAA;AACA,QAAI6C,cAAc,GAAG,KAArB,cAAqB,EAArB;AACA,QAAIC,WAAW,GAAG,KAAA,QAAA,GAAlB,aAAkB,GAAlB;;AACA,QAAID,cAAc,IAAdA,YAAAA,IAAkCD,QAAQ,IAAIC,cAAc,GAAhE,WAAA,EAAgF;AAC5E;AACH;;AACD,QAAIA,cAAc,GAAlB,YAAA,EAAmC;AAC/B,WAAA,WAAA,CAAA,QAAA,CAA0B7C,YAAY,GAAtC,UAAA;AADJ,KAAA,MAEO;AACH,WAAA,WAAA,CAAA,QAAA,CAA0BA,YAAY,GAAZA,aAAAA,GAAAA,WAAAA,GAA1B,UAAA;AACH;AAzS+B,GAAA;AA2SpC+C,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,IAAA,EAAe;AAC3B,YAAQC,IAAI,CAAZ,IAAA;AACI,WAAA,OAAA;AACI,aAAA,QAAA,CAAA,IAAA;;AACA,aAAA,eAAA;;AACA,aAAA,iBAAA;;AACA;;AACJ,WAAA,eAAA;AACI,aAAA,eAAA;;AACA;;AACJ,WAAA,UAAA;AACI,aAAA,WAAA,CAAA,MAAA,CAAA,UAAA,EAAoCA,IAAI,CAAxC,KAAA;;AACA,aAAA,QAAA,CAAA,IAAA;AACA;;AACJ,WAAA,eAAA;AACA,WAAA,gBAAA;AACA,WAAA,YAAA;AACI,aAAA,eAAA;;AACA;;AACJ,WAAA,OAAA;AACA,WAAA,QAAA;AACI,aAAA,QAAA,CAAA,IAAA;;AACA,aAAA,eAAA;;AACA,aAAA,iBAAA;;AACA;;AACJ,WAAA,WAAA;AACI,aAAA,eAAA;;AACA,aAAA,iBAAA;;AACA;;AACJ,WAAA,iBAAA;AACI,aAAA,+BAAA;;AACA;;AACJ;AACI,aAAA,QAAA,CAAA,IAAA;AAhCR;AA5SgC,GAAA;AA+UpCH,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,WAAO,KAAA,WAAA,CAAA,YAAA,GAAgC,KAAA,OAAA,CAAvC,YAAO,CAAP;AACH;AAjVmC,CAAzB,CAAf;AAmVA/G,iBAAiB,CAAA,YAAA,EAAjBA,QAAiB,CAAjBA;AACAmH,MAAM,CAANA,OAAAA,GAAAA,QAAAA;AACAA,MAAM,CAANA,OAAAA,CAAAA,OAAAA,GAAyBA,MAAM,CAA/BA,OAAAA","sourcesContent":["/**\r\n * DevExtreme (ui/tile_view.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../core/renderer\");\r\nvar devices = require(\"../core/devices\");\r\nvar registerComponent = require(\"../core/component_registrator\");\r\nvar inflector = require(\"../core/utils/inflector\");\r\nvar iteratorUtils = require(\"../core/utils/iterator\");\r\nvar isDefined = require(\"../core/utils/type\").isDefined;\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar windowUtils = require(\"../core/utils/window\");\r\nvar getPublicElement = require(\"../core/utils/dom\").getPublicElement;\r\nvar deferRender = require(\"../core/utils/common\").deferRender;\r\nvar ScrollView = require(\"./scroll_view\");\r\nvar CollectionWidget = require(\"./collection/ui.collection_widget.edit\");\r\nvar TILEVIEW_CLASS = \"dx-tileview\";\r\nvar TILEVIEW_CONTAINER_CLASS = \"dx-tileview-wrapper\";\r\nvar TILEVIEW_ITEM_CLASS = \"dx-tile\";\r\nvar TILEVIEW_ITEM_SELECTOR = \".\" + TILEVIEW_ITEM_CLASS;\r\nvar TILEVIEW_ITEM_DATA_KEY = \"dxTileData\";\r\nvar CONFIGS = {\r\n    horizontal: {\r\n        itemMainRatio: \"widthRatio\",\r\n        itemCrossRatio: \"heightRatio\",\r\n        baseItemMainDimension: \"baseItemWidth\",\r\n        baseItemCrossDimension: \"baseItemHeight\",\r\n        mainDimension: \"width\",\r\n        crossDimension: \"height\",\r\n        mainPosition: \"left\",\r\n        crossPosition: \"top\"\r\n    },\r\n    vertical: {\r\n        itemMainRatio: \"heightRatio\",\r\n        itemCrossRatio: \"widthRatio\",\r\n        baseItemMainDimension: \"baseItemHeight\",\r\n        baseItemCrossDimension: \"baseItemWidth\",\r\n        mainDimension: \"height\",\r\n        crossDimension: \"width\",\r\n        mainPosition: \"top\",\r\n        crossPosition: \"left\"\r\n    }\r\n};\r\nvar TileView = CollectionWidget.inherit({\r\n    _activeStateUnit: TILEVIEW_ITEM_SELECTOR,\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            items: null,\r\n            direction: \"horizontal\",\r\n            hoverStateEnabled: true,\r\n            showScrollbar: false,\r\n            height: 500,\r\n            baseItemWidth: 100,\r\n            baseItemHeight: 100,\r\n            itemMargin: 20,\r\n            activeStateEnabled: true,\r\n            indicateLoading: true\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _itemClass: function() {\r\n        return TILEVIEW_ITEM_CLASS\r\n    },\r\n    _itemDataKey: function() {\r\n        return TILEVIEW_ITEM_DATA_KEY\r\n    },\r\n    _itemContainer: function() {\r\n        return this._$container\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.$element().addClass(TILEVIEW_CLASS);\r\n        this._initScrollView()\r\n    },\r\n    _dataSourceLoadingChangedHandler: function(isLoading) {\r\n        var scrollView = this._scrollView;\r\n        if (!scrollView || !scrollView.startLoading) {\r\n            return\r\n        }\r\n        if (isLoading && this.option(\"indicateLoading\")) {\r\n            scrollView.startLoading()\r\n        } else {\r\n            scrollView.finishLoading()\r\n        }\r\n    },\r\n    _hideLoadingIfLoadIndicationOff: function() {\r\n        if (!this.option(\"indicateLoading\")) {\r\n            this._dataSourceLoadingChangedHandler(false)\r\n        }\r\n    },\r\n    _initScrollView: function() {\r\n        this._scrollView = this._createComponent(this.$element(), ScrollView, {\r\n            direction: this.option(\"direction\"),\r\n            scrollByContent: true,\r\n            useKeyboard: false,\r\n            showScrollbar: this.option(\"showScrollbar\")\r\n        });\r\n        this._$container = $(this._scrollView.content());\r\n        this._$container.addClass(TILEVIEW_CONTAINER_CLASS);\r\n        this._scrollView.option(\"onUpdated\", this._renderGeometry.bind(this))\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        deferRender(function() {\r\n            this._cellsPerDimension = 1;\r\n            this._renderGeometry();\r\n            this._updateScrollView();\r\n            this._fireContentReadyAction()\r\n        }.bind(this))\r\n    },\r\n    _updateScrollView: function() {\r\n        this._scrollView.option(\"direction\", this.option(\"direction\"));\r\n        this._scrollView.update();\r\n        this._indicateLoadingIfAlreadyStarted()\r\n    },\r\n    _indicateLoadingIfAlreadyStarted: function() {\r\n        if (this._isDataSourceLoading()) {\r\n            this._dataSourceLoadingChangedHandler(true)\r\n        }\r\n    },\r\n    _renderGeometry: function() {\r\n        this._config = CONFIGS[this.option(\"direction\")];\r\n        var items = this.option(\"items\") || [];\r\n        var config = this._config;\r\n        var itemMargin = this.option(\"itemMargin\");\r\n        var maxItemCrossRatio = Math.max.apply(Math, iteratorUtils.map(items || [], function(item) {\r\n            return Math.round(item[config.itemCrossRatio] || 1)\r\n        }));\r\n        var crossDimensionValue = windowUtils.hasWindow() ? this.$element()[config.crossDimension]() : parseInt(this.$element().get(0).style[config.crossDimension]);\r\n        this._cellsPerDimension = Math.floor(crossDimensionValue / (this.option(config.baseItemCrossDimension) + itemMargin));\r\n        this._cellsPerDimension = Math.max(this._cellsPerDimension, maxItemCrossRatio);\r\n        this._cells = [];\r\n        this._cells.push(new Array(this._cellsPerDimension));\r\n        this._arrangeItems(items);\r\n        if (windowUtils.hasWindow()) {\r\n            this._$container[config.mainDimension](this._cells.length * this.option(config.baseItemMainDimension) + (this._cells.length + 1) * itemMargin)\r\n        }\r\n    },\r\n    _arrangeItems: function(items) {\r\n        var config = this._config;\r\n        var itemMainRatio = config.itemMainRatio;\r\n        var itemCrossRatio = config.itemCrossRatio;\r\n        var mainPosition = config.mainPosition;\r\n        this._itemsPositions = [];\r\n        iteratorUtils.each(items, function(index, item) {\r\n            var currentItem = {};\r\n            currentItem[itemMainRatio] = item[itemMainRatio] || 1;\r\n            currentItem[itemCrossRatio] = item[itemCrossRatio] || 1;\r\n            currentItem.index = index;\r\n            currentItem[itemMainRatio] = currentItem[itemMainRatio] <= 0 ? 0 : Math.round(currentItem[config.itemMainRatio]);\r\n            currentItem[itemCrossRatio] = currentItem[itemCrossRatio] <= 0 ? 0 : Math.round(currentItem[config.itemCrossRatio]);\r\n            var itemPosition = this._getItemPosition(currentItem);\r\n            if (itemPosition[mainPosition] === -1) {\r\n                itemPosition[mainPosition] = this._cells.push(new Array(this._cellsPerDimension)) - 1\r\n            }\r\n            this._occupyCells(currentItem, itemPosition);\r\n            this._arrangeItem(currentItem, itemPosition);\r\n            this._itemsPositions.push(itemPosition)\r\n        }.bind(this))\r\n    },\r\n    _getItemPosition: function(item) {\r\n        var config = this._config;\r\n        var mainPosition = config.mainPosition;\r\n        var crossPosition = config.crossPosition;\r\n        var position = {};\r\n        position[mainPosition] = -1;\r\n        position[crossPosition] = 0;\r\n        for (var main = 0; main < this._cells.length; main++) {\r\n            for (var cross = 0; cross < this._cellsPerDimension; cross++) {\r\n                if (this._itemFit(main, cross, item)) {\r\n                    position[mainPosition] = main;\r\n                    position[crossPosition] = cross;\r\n                    break\r\n                }\r\n            }\r\n            if (position[mainPosition] > -1) {\r\n                break\r\n            }\r\n        }\r\n        return position\r\n    },\r\n    _itemFit: function(mainPosition, crossPosition, item) {\r\n        var result = true;\r\n        var config = this._config;\r\n        var itemRatioMain = item[config.itemMainRatio];\r\n        var itemRatioCross = item[config.itemCrossRatio];\r\n        if (crossPosition + itemRatioCross > this._cellsPerDimension) {\r\n            return false\r\n        }\r\n        for (var main = mainPosition; main < mainPosition + itemRatioMain; main++) {\r\n            for (var cross = crossPosition; cross < crossPosition + itemRatioCross; cross++) {\r\n                if (this._cells.length - 1 < main) {\r\n                    this._cells.push(new Array(this._cellsPerDimension))\r\n                } else {\r\n                    if (void 0 !== this._cells[main][cross]) {\r\n                        result = false;\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _occupyCells: function(item, itemPosition) {\r\n        var config = this._config;\r\n        var itemPositionMain = itemPosition[config.mainPosition];\r\n        var itemPositionCross = itemPosition[config.crossPosition];\r\n        var itemRatioMain = item[config.itemMainRatio];\r\n        var itemRatioCross = item[config.itemCrossRatio];\r\n        for (var main = itemPositionMain; main < itemPositionMain + itemRatioMain; main++) {\r\n            for (var cross = itemPositionCross; cross < itemPositionCross + itemRatioCross; cross++) {\r\n                this._cells[main][cross] = item.index\r\n            }\r\n        }\r\n    },\r\n    _arrangeItem: function(item, itemPosition) {\r\n        var config = this._config;\r\n        var itemPositionMain = itemPosition[config.mainPosition];\r\n        var itemPositionCross = itemPosition[config.crossPosition];\r\n        var itemRatioMain = item[config.itemMainRatio];\r\n        var itemRatioCross = item[config.itemCrossRatio];\r\n        var baseItemCross = this.option(config.baseItemCrossDimension);\r\n        var baseItemMain = this.option(config.baseItemMainDimension);\r\n        var itemMargin = this.option(\"itemMargin\");\r\n        var cssProps = {\r\n            display: itemRatioMain <= 0 || itemRatioCross <= 0 ? \"none\" : \"\"\r\n        };\r\n        var mainDimension = itemRatioMain * baseItemMain + (itemRatioMain - 1) * itemMargin;\r\n        var crossDimension = itemRatioCross * baseItemCross + (itemRatioCross - 1) * itemMargin;\r\n        cssProps[config.mainDimension] = mainDimension < 0 ? 0 : mainDimension;\r\n        cssProps[config.crossDimension] = crossDimension < 0 ? 0 : crossDimension;\r\n        cssProps[config.mainPosition] = itemPositionMain * baseItemMain + (itemPositionMain + 1) * itemMargin;\r\n        cssProps[config.crossPosition] = itemPositionCross * baseItemCross + (itemPositionCross + 1) * itemMargin;\r\n        if (this.option(\"rtlEnabled\")) {\r\n            var offsetCorrection = this._$container.width();\r\n            var baseItemWidth = this.option(\"baseItemWidth\");\r\n            var itemPositionX = itemPosition.left;\r\n            var offsetPosition = itemPositionX * baseItemWidth;\r\n            var itemBaseOffset = baseItemWidth + itemMargin;\r\n            var itemWidth = itemBaseOffset * item.widthRatio;\r\n            var subItemMargins = itemPositionX * itemMargin;\r\n            cssProps.left = offsetCorrection - (offsetPosition + itemWidth + subItemMargins)\r\n        }\r\n        this._itemElements().eq(item.index).css(cssProps)\r\n    },\r\n    _moveFocus: function(location) {\r\n        var FOCUS_UP = \"up\";\r\n        var FOCUS_DOWN = \"down\";\r\n        var FOCUS_LEFT = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\r\n        var FOCUS_RIGHT = this.option(\"rtlEnabled\") ? \"left\" : \"right\";\r\n        var FOCUS_PAGE_UP = \"pageup\";\r\n        var FOCUS_PAGE_DOWN = \"pagedown\";\r\n        var horizontalDirection = \"horizontal\" === this.option(\"direction\");\r\n        var cells = this._cells;\r\n        var index = $(this.option(\"focusedElement\")).index();\r\n        var targetCol = this._itemsPositions[index].left;\r\n        var targetRow = this._itemsPositions[index].top;\r\n        var colCount = (horizontalDirection ? cells : cells[0]).length;\r\n        var rowCount = (horizontalDirection ? cells[0] : cells).length;\r\n        var getCell = function(col, row) {\r\n            if (horizontalDirection) {\r\n                return cells[col][row]\r\n            }\r\n            return cells[row][col]\r\n        };\r\n        switch (location) {\r\n            case FOCUS_PAGE_UP:\r\n            case FOCUS_UP:\r\n                while (targetRow > 0 && index === getCell(targetCol, targetRow)) {\r\n                    targetRow--\r\n                }\r\n                if (targetRow < 0) {\r\n                    targetRow = 0\r\n                }\r\n                break;\r\n            case FOCUS_PAGE_DOWN:\r\n            case FOCUS_DOWN:\r\n                while (targetRow < rowCount && index === getCell(targetCol, targetRow)) {\r\n                    targetRow++\r\n                }\r\n                if (targetRow === rowCount) {\r\n                    targetRow = rowCount - 1\r\n                }\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                while (targetCol < colCount && index === getCell(targetCol, targetRow)) {\r\n                    targetCol++\r\n                }\r\n                if (targetCol === colCount) {\r\n                    targetCol = colCount - 1\r\n                }\r\n                break;\r\n            case FOCUS_LEFT:\r\n                while (targetCol >= 0 && index === getCell(targetCol, targetRow)) {\r\n                    targetCol--\r\n                }\r\n                if (targetCol < 0) {\r\n                    targetCol = 0\r\n                }\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments);\r\n                return\r\n        }\r\n        var newTargetIndex = getCell(targetCol, targetRow);\r\n        if (!isDefined(newTargetIndex)) {\r\n            return\r\n        }\r\n        var $newTarget = this._itemElements().eq(newTargetIndex);\r\n        this.option(\"focusedElement\", getPublicElement($newTarget));\r\n        this._scrollToItem($newTarget)\r\n    },\r\n    _scrollToItem: function($itemElement) {\r\n        if (!$itemElement.length) {\r\n            return\r\n        }\r\n        var config = this._config;\r\n        var outerMainProp = \"outer\" + inflector.captionize(config.mainDimension);\r\n        var itemMargin = this.option(\"itemMargin\");\r\n        var itemPosition = $itemElement.position()[config.mainPosition];\r\n        var itemDimension = $itemElement[outerMainProp]();\r\n        var itemTail = itemPosition + itemDimension;\r\n        var scrollPosition = this.scrollPosition();\r\n        var clientWidth = this.$element()[outerMainProp]();\r\n        if (scrollPosition <= itemPosition && itemTail <= scrollPosition + clientWidth) {\r\n            return\r\n        }\r\n        if (scrollPosition > itemPosition) {\r\n            this._scrollView.scrollTo(itemPosition - itemMargin)\r\n        } else {\r\n            this._scrollView.scrollTo(itemPosition + itemDimension - clientWidth + itemMargin)\r\n        }\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"items\":\r\n                this.callBase(args);\r\n                this._renderGeometry();\r\n                this._updateScrollView();\r\n                break;\r\n            case \"showScrollbar\":\r\n                this._initScrollView();\r\n                break;\r\n            case \"disabled\":\r\n                this._scrollView.option(\"disabled\", args.value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"baseItemWidth\":\r\n            case \"baseItemHeight\":\r\n            case \"itemMargin\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                this._renderGeometry();\r\n                this._updateScrollView();\r\n                break;\r\n            case \"direction\":\r\n                this._renderGeometry();\r\n                this._updateScrollView();\r\n                break;\r\n            case \"indicateLoading\":\r\n                this._hideLoadingIfLoadIndicationOff();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    scrollPosition: function() {\r\n        return this._scrollView.scrollOffset()[this._config.mainPosition]\r\n    }\r\n});\r\nregisterComponent(\"dxTileView\", TileView);\r\nmodule.exports = TileView;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}