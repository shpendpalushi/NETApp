{"ast":null,"code":"/**\r\n * DevExtreme (events/core/events_engine.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar registerEventCallbacks = require(\"./event_registrator_callbacks\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar domAdapter = require(\"../../core/dom_adapter\");\n\nvar windowUtils = require(\"../../core/utils/window\");\n\nvar window = windowUtils.getWindow();\n\nvar injector = require(\"../../core/utils/dependency_injector\");\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar Callbacks = require(\"../../core/utils/callbacks\");\n\nvar isWindow = typeUtils.isWindow;\nvar isFunction = typeUtils.isFunction;\nvar isString = typeUtils.isString;\n\nvar errors = require(\"../../core/errors\");\n\nvar WeakMap = require(\"../../core/polyfills/weak_map\");\n\nvar hookTouchProps = require(\"../../events/core/hook_touch_props\");\n\nvar callOnce = require(\"../../core/utils/call_once\");\n\nvar EMPTY_EVENT_NAME = \"dxEmptyEventType\";\nvar NATIVE_EVENTS_TO_SUBSCRIBE = {\n  mouseenter: \"mouseover\",\n  mouseleave: \"mouseout\",\n  pointerenter: \"pointerover\",\n  pointerleave: \"pointerout\"\n};\nvar NATIVE_EVENTS_TO_TRIGGER = {\n  focusin: \"focus\",\n  focusout: \"blur\"\n};\nvar NO_BUBBLE_EVENTS = [\"blur\", \"focus\", \"load\"];\nvar forcePassiveFalseEventNames = [\"touchmove\", \"wheel\", \"mousewheel\", \"touchstart\"];\n\nvar matchesSafe = function matchesSafe(target, selector) {\n  return !isWindow(target) && \"#document\" !== target.nodeName && domAdapter.elementMatches(target, selector);\n};\n\nvar elementDataMap = new WeakMap();\nvar guid = 0;\nvar skipEvent;\n\nvar special = function () {\n  var specialData = {};\n  registerEventCallbacks.add(function (eventName, eventObject) {\n    specialData[eventName] = eventObject;\n  });\n  return {\n    getField: function getField(eventName, field) {\n      return specialData[eventName] && specialData[eventName][field];\n    },\n    callMethod: function callMethod(eventName, methodName, context, args) {\n      return specialData[eventName] && specialData[eventName][methodName] && specialData[eventName][methodName].apply(context, args);\n    }\n  };\n}();\n\nvar applyForEach = function applyForEach(args, method) {\n  var element = args[0];\n\n  if (!element) {\n    return;\n  }\n\n  if (domAdapter.isNode(element) || isWindow(element)) {\n    method.apply(eventsEngine, args);\n  } else {\n    if (!isString(element) && \"length\" in element) {\n      var itemArgs = Array.prototype.slice.call(args, 0);\n      Array.prototype.forEach.call(element, function (itemElement) {\n        itemArgs[0] = itemElement;\n        applyForEach(itemArgs, method);\n      });\n    } else {\n      throw errors.Error(\"E0025\");\n    }\n  }\n};\n\nvar getHandler = function getHandler(method) {\n  return function () {\n    applyForEach(arguments, method);\n  };\n};\n\nvar detectPassiveEventHandlersSupport = function detectPassiveEventHandlersSupport() {\n  var isSupported = false;\n\n  try {\n    var options = Object.defineProperty({}, \"passive\", {\n      get: function get() {\n        isSupported = true;\n        return true;\n      }\n    });\n    window.addEventListener(\"test\", null, options);\n  } catch (e) {}\n\n  return isSupported;\n};\n\nvar passiveEventHandlersSupported = callOnce(detectPassiveEventHandlersSupport);\n\nvar getHandlersController = function getHandlersController(element, eventName) {\n  var elementData = elementDataMap.get(element);\n  eventName = eventName || \"\";\n  var eventNameParts = eventName.split(\".\");\n  var namespaces = eventNameParts.slice(1);\n  var eventNameIsDefined = !!eventNameParts[0];\n  eventName = eventNameParts[0] || EMPTY_EVENT_NAME;\n\n  if (!elementData) {\n    elementData = {};\n    elementDataMap.set(element, elementData);\n  }\n\n  if (!elementData[eventName]) {\n    elementData[eventName] = {\n      handleObjects: [],\n      nativeHandler: null\n    };\n  }\n\n  var eventData = elementData[eventName];\n  return {\n    addHandler: function addHandler(handler, selector, data) {\n      var callHandler = function callHandler(e, extraParameters) {\n        var handlerArgs = [e];\n        var target = e.currentTarget;\n        var relatedTarget = e.relatedTarget;\n        var secondaryTargetIsInside;\n        var result;\n\n        if (eventName in NATIVE_EVENTS_TO_SUBSCRIBE) {\n          secondaryTargetIsInside = relatedTarget && target && (relatedTarget === target || target.contains(relatedTarget));\n        }\n\n        if (void 0 !== extraParameters) {\n          handlerArgs.push(extraParameters);\n        }\n\n        special.callMethod(eventName, \"handle\", element, [e, data]);\n\n        if (!secondaryTargetIsInside) {\n          result = handler.apply(target, handlerArgs);\n        }\n\n        if (false === result) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      };\n\n      var wrappedHandler = function wrappedHandler(e, extraParameters) {\n        if (skipEvent && e.type === skipEvent) {\n          return;\n        }\n\n        e.data = data;\n        e.delegateTarget = element;\n\n        if (selector) {\n          var currentTarget = e.target;\n\n          while (currentTarget && currentTarget !== element) {\n            if (matchesSafe(currentTarget, selector)) {\n              e.currentTarget = currentTarget;\n              callHandler(e, extraParameters);\n            }\n\n            currentTarget = currentTarget.parentNode;\n          }\n        } else {\n          e.currentTarget = e.delegateTarget || e.target;\n          callHandler(e, extraParameters);\n        }\n      };\n\n      var handleObject = {\n        handler: handler,\n        wrappedHandler: wrappedHandler,\n        selector: selector,\n        type: eventName,\n        data: data,\n        namespace: namespaces.join(\".\"),\n        namespaces: namespaces,\n        guid: ++guid\n      };\n      eventData.handleObjects.push(handleObject);\n      var firstHandlerForTheType = 1 === eventData.handleObjects.length;\n      var shouldAddNativeListener = firstHandlerForTheType && eventNameIsDefined;\n      var nativeListenerOptions;\n\n      if (shouldAddNativeListener) {\n        shouldAddNativeListener = !special.callMethod(eventName, \"setup\", element, [data, namespaces, handler]);\n      }\n\n      if (shouldAddNativeListener) {\n        eventData.nativeHandler = getNativeHandler(eventName);\n\n        if (passiveEventHandlersSupported() && forcePassiveFalseEventNames.indexOf(eventName) > -1) {\n          nativeListenerOptions = {\n            passive: false\n          };\n        }\n\n        eventData.removeListener = domAdapter.listen(element, NATIVE_EVENTS_TO_SUBSCRIBE[eventName] || eventName, eventData.nativeHandler, nativeListenerOptions);\n      }\n\n      special.callMethod(eventName, \"add\", element, [handleObject]);\n    },\n    removeHandler: function removeHandler(handler, selector) {\n      var removeByEventName = function removeByEventName(eventName) {\n        var eventData = elementData[eventName];\n\n        if (!eventData.handleObjects.length) {\n          delete elementData[eventName];\n          return;\n        }\n\n        var removedHandler;\n        eventData.handleObjects = eventData.handleObjects.filter(function (handleObject) {\n          var skip = namespaces.length && !isSubset(handleObject.namespaces, namespaces) || handler && handleObject.handler !== handler || selector && handleObject.selector !== selector;\n\n          if (!skip) {\n            removedHandler = handleObject.handler;\n            special.callMethod(eventName, \"remove\", element, [handleObject]);\n          }\n\n          return skip;\n        });\n        var lastHandlerForTheType = !eventData.handleObjects.length;\n        var shouldRemoveNativeListener = lastHandlerForTheType && eventName !== EMPTY_EVENT_NAME;\n\n        if (shouldRemoveNativeListener) {\n          special.callMethod(eventName, \"teardown\", element, [namespaces, removedHandler]);\n\n          if (eventData.nativeHandler) {\n            eventData.removeListener();\n          }\n\n          delete elementData[eventName];\n        }\n      };\n\n      if (eventNameIsDefined) {\n        removeByEventName(eventName);\n      } else {\n        for (var name in elementData) {\n          removeByEventName(name);\n        }\n      }\n\n      var elementDataIsEmpty = 0 === Object.keys(elementData).length;\n\n      if (elementDataIsEmpty) {\n        elementDataMap.delete(element);\n      }\n    },\n    callHandlers: function callHandlers(event, extraParameters) {\n      var forceStop = false;\n\n      var handleCallback = function handleCallback(handleObject) {\n        if (forceStop) {\n          return;\n        }\n\n        if (!namespaces.length || isSubset(handleObject.namespaces, namespaces)) {\n          handleObject.wrappedHandler(event, extraParameters);\n          forceStop = event.isImmediatePropagationStopped();\n        }\n      };\n\n      eventData.handleObjects.forEach(handleCallback);\n\n      if (namespaces.length && elementData[EMPTY_EVENT_NAME]) {\n        elementData[EMPTY_EVENT_NAME].handleObjects.forEach(handleCallback);\n      }\n    }\n  };\n};\n\nvar getNativeHandler = function getNativeHandler(subscribeName) {\n  return function (event, extraParameters) {\n    var handlersController = getHandlersController(this, subscribeName);\n    event = eventsEngine.Event(event);\n    handlersController.callHandlers(event, extraParameters);\n  };\n};\n\nvar isSubset = function isSubset(original, checked) {\n  for (var i = 0; i < checked.length; i++) {\n    if (original.indexOf(checked[i]) < 0) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nvar normalizeOnArguments = function normalizeOnArguments(callback) {\n  return function (element, eventName, selector, data, handler) {\n    if (!handler) {\n      handler = data;\n      data = void 0;\n    }\n\n    if (\"string\" !== typeof selector) {\n      data = selector;\n      selector = void 0;\n    }\n\n    if (!handler && \"string\" === typeof eventName) {\n      handler = data || selector;\n      selector = void 0;\n      data = void 0;\n    }\n\n    callback(element, eventName, selector, data, handler);\n  };\n};\n\nvar normalizeOffArguments = function normalizeOffArguments(callback) {\n  return function (element, eventName, selector, handler) {\n    if (\"function\" === typeof selector) {\n      handler = selector;\n      selector = void 0;\n    }\n\n    callback(element, eventName, selector, handler);\n  };\n};\n\nvar normalizeTriggerArguments = function normalizeTriggerArguments(callback) {\n  return function (element, src, extraParameters) {\n    if (\"string\" === typeof src) {\n      src = {\n        type: src\n      };\n    }\n\n    if (!src.target) {\n      src.target = element;\n    }\n\n    src.currentTarget = element;\n\n    if (!src.delegateTarget) {\n      src.delegateTarget = element;\n    }\n\n    if (!src.type && src.originalEvent) {\n      src.type = src.originalEvent.type;\n    }\n\n    callback(element, src instanceof eventsEngine.Event ? src : eventsEngine.Event(src), extraParameters);\n  };\n};\n\nvar normalizeEventArguments = function normalizeEventArguments(callback) {\n  return function (src, config) {\n    if (!(this instanceof eventsEngine.Event)) {\n      return new eventsEngine.Event(src, config);\n    }\n\n    if (!src) {\n      src = {};\n    }\n\n    if (\"string\" === typeof src) {\n      src = {\n        type: src\n      };\n    }\n\n    if (!config) {\n      config = {};\n    }\n\n    callback.call(this, src, config);\n  };\n};\n\nvar iterate = function iterate(callback) {\n  var iterateEventNames = function iterateEventNames(element, eventName) {\n    if (eventName && eventName.indexOf(\" \") > -1) {\n      var args = Array.prototype.slice.call(arguments, 0);\n      eventName.split(\" \").forEach(function (eventName) {\n        args[1] = eventName;\n        callback.apply(this, args);\n      });\n    } else {\n      callback.apply(this, arguments);\n    }\n  };\n\n  return function (element, eventName) {\n    if (\"object\" === _typeof(eventName)) {\n      var args = Array.prototype.slice.call(arguments, 0);\n\n      for (var name in eventName) {\n        args[1] = name;\n        args[args.length - 1] = eventName[name];\n        iterateEventNames.apply(this, args);\n      }\n    } else {\n      iterateEventNames.apply(this, arguments);\n    }\n  };\n};\n\nvar callNativeMethod = function callNativeMethod(eventName, element) {\n  var nativeMethodName = NATIVE_EVENTS_TO_TRIGGER[eventName] || eventName;\n\n  var isLinkClickEvent = function isLinkClickEvent(eventName, element) {\n    return \"click\" === eventName && \"a\" === element.localName;\n  };\n\n  if (isLinkClickEvent(eventName, element)) {\n    return;\n  }\n\n  if (isFunction(element[nativeMethodName])) {\n    skipEvent = eventName;\n    element[nativeMethodName]();\n    skipEvent = void 0;\n  }\n};\n\nvar calculateWhich = function calculateWhich(event) {\n  var setForMouseEvent = function setForMouseEvent(event) {\n    var mouseEventRegex = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\n    return !event.which && void 0 !== event.button && mouseEventRegex.test(event.type);\n  };\n\n  var setForKeyEvent = function setForKeyEvent(event) {\n    return null == event.which && 0 === event.type.indexOf(\"key\");\n  };\n\n  if (setForKeyEvent(event)) {\n    return null != event.charCode ? event.charCode : event.keyCode;\n  }\n\n  if (setForMouseEvent(event)) {\n    var whichByButton = {\n      1: 1,\n      2: 3,\n      3: 1,\n      4: 2\n    };\n    return whichByButton[event.button];\n  }\n\n  return event.which;\n};\n\nvar eventsEngine = injector({\n  on: getHandler(normalizeOnArguments(iterate(function (element, eventName, selector, data, handler) {\n    var handlersController = getHandlersController(element, eventName);\n    handlersController.addHandler(handler, selector, data);\n  }))),\n  one: getHandler(normalizeOnArguments(function (element, eventName, selector, data, handler) {\n    var oneTimeHandler = function oneTimeHandler() {\n      eventsEngine.off(element, eventName, selector, oneTimeHandler);\n      handler.apply(this, arguments);\n    };\n\n    eventsEngine.on(element, eventName, selector, data, oneTimeHandler);\n  })),\n  off: getHandler(normalizeOffArguments(iterate(function (element, eventName, selector, handler) {\n    var handlersController = getHandlersController(element, eventName);\n    handlersController.removeHandler(handler, selector);\n  }))),\n  trigger: getHandler(normalizeTriggerArguments(function (element, event, extraParameters) {\n    var eventName = event.type;\n    var handlersController = getHandlersController(element, event.type);\n    special.callMethod(eventName, \"trigger\", element, [event, extraParameters]);\n    handlersController.callHandlers(event, extraParameters);\n    var noBubble = special.getField(eventName, \"noBubble\") || event.isPropagationStopped() || NO_BUBBLE_EVENTS.indexOf(eventName) !== -1;\n\n    if (!noBubble) {\n      var parents = [];\n\n      var getParents = function getParents(element) {\n        var parent = element.parentNode;\n\n        if (parent) {\n          parents.push(parent);\n          getParents(parent);\n        }\n      };\n\n      getParents(element);\n      parents.push(window);\n      var i = 0;\n\n      while (parents[i] && !event.isPropagationStopped()) {\n        var parentDataByEvent = getHandlersController(parents[i], event.type);\n        parentDataByEvent.callHandlers(extend(event, {\n          currentTarget: parents[i]\n        }), extraParameters);\n        i++;\n      }\n    }\n\n    if (element.nodeType || isWindow(element)) {\n      special.callMethod(eventName, \"_default\", element, [event, extraParameters]);\n      callNativeMethod(eventName, element);\n    }\n  })),\n  triggerHandler: getHandler(normalizeTriggerArguments(function (element, event, extraParameters) {\n    var handlersController = getHandlersController(element, event.type);\n    handlersController.callHandlers(event, extraParameters);\n  }))\n});\n\nvar initEvent = function initEvent(EventClass) {\n  if (EventClass) {\n    eventsEngine.Event = EventClass;\n    eventsEngine.Event.prototype = EventClass.prototype;\n  }\n};\n\ninitEvent(normalizeEventArguments(function (src, config) {\n  var that = this;\n  var propagationStopped = false;\n  var immediatePropagationStopped = false;\n  var defaultPrevented = false;\n  extend(that, src);\n\n  if (src instanceof eventsEngine.Event || windowUtils.hasWindow() && src instanceof window.Event) {\n    that.originalEvent = src;\n    that.currentTarget = void 0;\n  }\n\n  if (!(src instanceof eventsEngine.Event)) {\n    extend(that, {\n      isPropagationStopped: function isPropagationStopped() {\n        return !!(propagationStopped || that.originalEvent && that.originalEvent.propagationStopped);\n      },\n      stopPropagation: function stopPropagation() {\n        propagationStopped = true;\n        that.originalEvent && that.originalEvent.stopPropagation();\n      },\n      isImmediatePropagationStopped: function isImmediatePropagationStopped() {\n        return immediatePropagationStopped;\n      },\n      stopImmediatePropagation: function stopImmediatePropagation() {\n        this.stopPropagation();\n        immediatePropagationStopped = true;\n        that.originalEvent && that.originalEvent.stopImmediatePropagation();\n      },\n      isDefaultPrevented: function isDefaultPrevented() {\n        return !!(defaultPrevented || that.originalEvent && that.originalEvent.defaultPrevented);\n      },\n      preventDefault: function preventDefault() {\n        defaultPrevented = true;\n        that.originalEvent && that.originalEvent.preventDefault();\n      }\n    });\n  }\n\n  addProperty(\"which\", calculateWhich, that);\n\n  if (0 === src.type.indexOf(\"touch\")) {\n    delete config.pageX;\n    delete config.pageY;\n  }\n\n  extend(that, config);\n  that.guid = ++guid;\n}));\n\nvar addProperty = function addProperty(propName, hook, eventInstance) {\n  Object.defineProperty(eventInstance || eventsEngine.Event.prototype, propName, {\n    enumerable: true,\n    configurable: true,\n    get: function get() {\n      return this.originalEvent && hook(this.originalEvent);\n    },\n    set: function set(value) {\n      Object.defineProperty(this, propName, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: value\n      });\n    }\n  });\n};\n\nhookTouchProps(addProperty);\nvar beforeSetStrategy = Callbacks();\nvar afterSetStrategy = Callbacks();\n\neventsEngine.set = function (engine) {\n  beforeSetStrategy.fire();\n  eventsEngine.inject(engine);\n  initEvent(engine.Event);\n  afterSetStrategy.fire();\n};\n\neventsEngine.subscribeGlobal = function () {\n  applyForEach(arguments, normalizeOnArguments(function () {\n    var args = arguments;\n    eventsEngine.on.apply(this, args);\n    beforeSetStrategy.add(function () {\n      var offArgs = Array.prototype.slice.call(args, 0);\n      offArgs.splice(3, 1);\n      eventsEngine.off.apply(this, offArgs);\n    });\n    afterSetStrategy.add(function () {\n      eventsEngine.on.apply(this, args);\n    });\n  }));\n};\n\neventsEngine.forcePassiveFalseEventNames = forcePassiveFalseEventNames;\neventsEngine.passiveEventHandlersSupported = passiveEventHandlersSupported;\nmodule.exports = eventsEngine;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/events/core/events_engine.js"],"names":["Symbol","_typeof","obj","registerEventCallbacks","require","extend","domAdapter","windowUtils","window","injector","typeUtils","Callbacks","isWindow","isFunction","isString","errors","WeakMap","hookTouchProps","callOnce","EMPTY_EVENT_NAME","NATIVE_EVENTS_TO_SUBSCRIBE","mouseenter","mouseleave","pointerenter","pointerleave","NATIVE_EVENTS_TO_TRIGGER","focusin","focusout","NO_BUBBLE_EVENTS","forcePassiveFalseEventNames","matchesSafe","target","elementDataMap","guid","special","specialData","getField","callMethod","applyForEach","element","args","method","itemArgs","Array","getHandler","detectPassiveEventHandlersSupport","isSupported","options","get","passiveEventHandlersSupported","getHandlersController","elementData","eventName","eventNameParts","namespaces","eventNameIsDefined","handleObjects","nativeHandler","eventData","addHandler","callHandler","handlerArgs","e","relatedTarget","secondaryTargetIsInside","result","handler","wrappedHandler","skipEvent","currentTarget","handleObject","selector","type","data","namespace","firstHandlerForTheType","shouldAddNativeListener","getNativeHandler","nativeListenerOptions","passive","removeHandler","removeByEventName","skip","isSubset","removedHandler","lastHandlerForTheType","shouldRemoveNativeListener","elementDataIsEmpty","Object","callHandlers","forceStop","handleCallback","event","handlersController","eventsEngine","i","checked","original","normalizeOnArguments","callback","normalizeOffArguments","normalizeTriggerArguments","src","normalizeEventArguments","config","iterate","iterateEventNames","callNativeMethod","nativeMethodName","isLinkClickEvent","calculateWhich","setForMouseEvent","mouseEventRegex","setForKeyEvent","whichByButton","on","one","oneTimeHandler","off","trigger","noBubble","parents","getParents","parent","parentDataByEvent","triggerHandler","initEvent","EventClass","that","propagationStopped","immediatePropagationStopped","defaultPrevented","isPropagationStopped","stopPropagation","isImmediatePropagationStopped","stopImmediatePropagation","isDefaultPrevented","preventDefault","addProperty","eventInstance","enumerable","configurable","hook","set","writable","value","beforeSetStrategy","afterSetStrategy","engine","offArgs","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAA,OAAA,CAAA,GAAA,EAAsB;AAClB,MAAI,eAAe,OAAf,MAAA,IAAgC,aAAa,OAAOA,MAAM,CAA9D,QAAA,EAAyE;AACrEC,IAAAA,OAAO,GAAG,SAAA,OAAA,CAAA,GAAA,EAAc;AACpB,aAAO,OAAP,GAAA;AADJA,KAAAA;AADJ,GAAA,MAIO;AACHA,IAAAA,OAAO,GAAG,SAAA,OAAA,CAAA,GAAA,EAAc;AACpB,aAAOC,GAAG,IAAI,eAAe,OAAtBA,MAAAA,IAAuCA,GAAG,CAAHA,WAAAA,KAAvCA,MAAAA,IAAqEA,GAAG,KAAKF,MAAM,CAAnFE,SAAAA,GAAAA,QAAAA,GAA2G,OAAlH,GAAA;AADJD,KAAAA;AAGH;;AACD,SAAOA,OAAO,CAAd,GAAc,CAAd;AACH;;AACD,IAAIE,sBAAsB,GAAGC,OAAO,CAApC,+BAAoC,CAApC;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAPA,yBAAO,CAAPA,CAAb,MAAA;;AACA,IAAIE,UAAU,GAAGF,OAAO,CAAxB,wBAAwB,CAAxB;;AACA,IAAIG,WAAW,GAAGH,OAAO,CAAzB,yBAAyB,CAAzB;;AACA,IAAII,MAAM,GAAGD,WAAW,CAAxB,SAAaA,EAAb;;AACA,IAAIE,QAAQ,GAAGL,OAAO,CAAtB,sCAAsB,CAAtB;;AACA,IAAIM,SAAS,GAAGN,OAAO,CAAvB,uBAAuB,CAAvB;;AACA,IAAIO,SAAS,GAAGP,OAAO,CAAvB,4BAAuB,CAAvB;;AACA,IAAIQ,QAAQ,GAAGF,SAAS,CAAxB,QAAA;AACA,IAAIG,UAAU,GAAGH,SAAS,CAA1B,UAAA;AACA,IAAII,QAAQ,GAAGJ,SAAS,CAAxB,QAAA;;AACA,IAAIK,MAAM,GAAGX,OAAO,CAApB,mBAAoB,CAApB;;AACA,IAAIY,OAAO,GAAGZ,OAAO,CAArB,+BAAqB,CAArB;;AACA,IAAIa,cAAc,GAAGb,OAAO,CAA5B,oCAA4B,CAA5B;;AACA,IAAIc,QAAQ,GAAGd,OAAO,CAAtB,4BAAsB,CAAtB;;AACA,IAAIe,gBAAgB,GAApB,kBAAA;AACA,IAAIC,0BAA0B,GAAG;AAC7BC,EAAAA,UAAU,EADmB,WAAA;AAE7BC,EAAAA,UAAU,EAFmB,UAAA;AAG7BC,EAAAA,YAAY,EAHiB,aAAA;AAI7BC,EAAAA,YAAY,EAAE;AAJe,CAAjC;AAMA,IAAIC,wBAAwB,GAAG;AAC3BC,EAAAA,OAAO,EADoB,OAAA;AAE3BC,EAAAA,QAAQ,EAAE;AAFiB,CAA/B;AAIA,IAAIC,gBAAgB,GAAG,CAAA,MAAA,EAAA,OAAA,EAAvB,MAAuB,CAAvB;AACA,IAAIC,2BAA2B,GAAG,CAAA,WAAA,EAAA,OAAA,EAAA,YAAA,EAAlC,YAAkC,CAAlC;;AACA,IAAIC,WAAW,GAAG,SAAdA,WAAc,CAAA,MAAA,EAAA,QAAA,EAA2B;AACzC,SAAO,CAAClB,QAAQ,CAAT,MAAS,CAAT,IAAqB,gBAAgBmB,MAAM,CAA3C,QAAA,IAAwDzB,UAAU,CAAVA,cAAAA,CAAAA,MAAAA,EAA/D,QAA+DA,CAA/D;AADJ,CAAA;;AAGA,IAAI0B,cAAc,GAAG,IAArB,OAAqB,EAArB;AACA,IAAIC,IAAI,GAAR,CAAA;AACA,IAAA,SAAA;;AACA,IAAIC,OAAO,GAAG,YAAW;AACrB,MAAIC,WAAW,GAAf,EAAA;AACAhC,EAAAA,sBAAsB,CAAtBA,GAAAA,CAA2B,UAAA,SAAA,EAAA,WAAA,EAAiC;AACxDgC,IAAAA,WAAW,CAAXA,SAAW,CAAXA,GAAAA,WAAAA;AADJhC,GAAAA;AAGA,SAAO;AACHiC,IAAAA,QAAQ,EAAE,SAAA,QAAA,CAAA,SAAA,EAAA,KAAA,EAA2B;AACjC,aAAOD,WAAW,CAAXA,SAAW,CAAXA,IAA0BA,WAAW,CAAXA,SAAW,CAAXA,CAAjC,KAAiCA,CAAjC;AAFD,KAAA;AAIHE,IAAAA,UAAU,EAAE,SAAA,UAAA,CAAA,SAAA,EAAA,UAAA,EAAA,OAAA,EAAA,IAAA,EAA+C;AACvD,aAAOF,WAAW,CAAXA,SAAW,CAAXA,IAA0BA,WAAW,CAAXA,SAAW,CAAXA,CAA1BA,UAA0BA,CAA1BA,IAAgEA,WAAW,CAAXA,SAAW,CAAXA,CAAAA,UAAAA,EAAAA,KAAAA,CAAAA,OAAAA,EAAvE,IAAuEA,CAAvE;AACH;AANE,GAAP;AALJ,CAAc,EAAd;;AAcA,IAAIG,YAAY,GAAG,SAAA,YAAA,CAAA,IAAA,EAAA,MAAA,EAAoC;AACnD,MAAIC,OAAO,GAAGC,IAAI,CAAlB,CAAkB,CAAlB;;AACA,MAAI,CAAJ,OAAA,EAAc;AACV;AACH;;AACD,MAAIlC,UAAU,CAAVA,MAAAA,CAAAA,OAAAA,KAA8BM,QAAQ,CAA1C,OAA0C,CAA1C,EAAqD;AACjD6B,IAAAA,MAAM,CAANA,KAAAA,CAAAA,YAAAA,EAAAA,IAAAA;AADJ,GAAA,MAEO;AACH,QAAI,CAAC3B,QAAQ,CAAT,OAAS,CAAT,IAAsB,YAA1B,OAAA,EAA+C;AAC3C,UAAI4B,QAAQ,GAAGC,KAAK,CAALA,SAAAA,CAAAA,KAAAA,CAAAA,IAAAA,CAAAA,IAAAA,EAAf,CAAeA,CAAf;AACAA,MAAAA,KAAK,CAALA,SAAAA,CAAAA,OAAAA,CAAAA,IAAAA,CAAAA,OAAAA,EAAsC,UAAA,WAAA,EAAsB;AACxDD,QAAAA,QAAQ,CAARA,CAAQ,CAARA,GAAAA,WAAAA;AACAJ,QAAAA,YAAY,CAAA,QAAA,EAAZA,MAAY,CAAZA;AAFJK,OAAAA;AAFJ,KAAA,MAMO;AACH,YAAM5B,MAAM,CAANA,KAAAA,CAAN,OAAMA,CAAN;AACH;AACJ;AAjBL,CAAA;;AAmBA,IAAI6B,UAAU,GAAG,SAAbA,UAAa,CAAA,MAAA,EAAiB;AAC9B,SAAO,YAAW;AACdN,IAAAA,YAAY,CAAA,SAAA,EAAZA,MAAY,CAAZA;AADJ,GAAA;AADJ,CAAA;;AAKA,IAAIO,iCAAiC,GAAG,SAApCA,iCAAoC,GAAW;AAC/C,MAAIC,WAAW,GAAf,KAAA;;AACA,MAAI;AACA,QAAIC,OAAO,GAAG,MAAM,CAAN,cAAA,CAAA,EAAA,EAAA,SAAA,EAAqC;AAC/CC,MAAAA,GAAG,EAAE,SAAA,GAAA,GAAW;AACZF,QAAAA,WAAW,GAAXA,IAAAA;AACA,eAAA,IAAA;AACH;AAJ8C,KAArC,CAAd;AAMAtC,IAAAA,MAAM,CAANA,gBAAAA,CAAAA,MAAAA,EAAAA,IAAAA,EAAAA,OAAAA;AAPJ,GAAA,CAQE,OAAA,CAAA,EAAU,CAAE;;AACd,SAAA,WAAA;AAXJ,CAAA;;AAaA,IAAIyC,6BAA6B,GAAG/B,QAAQ,CAA5C,iCAA4C,CAA5C;;AACA,IAAIgC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA,OAAA,EAAA,SAAA,EAA6B;AACrD,MAAIC,WAAW,GAAGnB,cAAc,CAAdA,GAAAA,CAAlB,OAAkBA,CAAlB;AACAoB,EAAAA,SAAS,GAAGA,SAAS,IAArBA,EAAAA;AACA,MAAIC,cAAc,GAAGD,SAAS,CAATA,KAAAA,CAArB,GAAqBA,CAArB;AACA,MAAIE,UAAU,GAAGD,cAAc,CAAdA,KAAAA,CAAjB,CAAiBA,CAAjB;AACA,MAAIE,kBAAkB,GAAG,CAAC,CAACF,cAAc,CAAzC,CAAyC,CAAzC;AACAD,EAAAA,SAAS,GAAGC,cAAc,CAAdA,CAAc,CAAdA,IAAZD,gBAAAA;;AACA,MAAI,CAAJ,WAAA,EAAkB;AACdD,IAAAA,WAAW,GAAXA,EAAAA;AACAnB,IAAAA,cAAc,CAAdA,GAAAA,CAAAA,OAAAA,EAAAA,WAAAA;AACH;;AACD,MAAI,CAACmB,WAAW,CAAhB,SAAgB,CAAhB,EAA6B;AACzBA,IAAAA,WAAW,CAAXA,SAAW,CAAXA,GAAyB;AACrBK,MAAAA,aAAa,EADQ,EAAA;AAErBC,MAAAA,aAAa,EAAE;AAFM,KAAzBN;AAIH;;AACD,MAAIO,SAAS,GAAGP,WAAW,CAA3B,SAA2B,CAA3B;AACA,SAAO;AACHQ,IAAAA,UAAU,EAAE,SAAA,UAAA,CAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAkC;AAC1C,UAAIC,WAAW,GAAG,SAAdA,WAAc,CAAA,CAAA,EAAA,eAAA,EAA6B;AAC3C,YAAIC,WAAW,GAAG,CAAlB,CAAkB,CAAlB;AACA,YAAI9B,MAAM,GAAG+B,CAAC,CAAd,aAAA;AACA,YAAIC,aAAa,GAAGD,CAAC,CAArB,aAAA;AACA,YAAA,uBAAA;AACA,YAAA,MAAA;;AACA,YAAIV,SAAS,IAAb,0BAAA,EAA6C;AACzCY,UAAAA,uBAAuB,GAAGD,aAAa,IAAbA,MAAAA,KAA4BA,aAAa,KAAbA,MAAAA,IAA4BhC,MAAM,CAANA,QAAAA,CAAlFiC,aAAkFjC,CAAxDgC,CAA1BC;AACH;;AACD,YAAI,KAAA,CAAA,KAAJ,eAAA,EAAgC;AAC5BH,UAAAA,WAAW,CAAXA,IAAAA,CAAAA,eAAAA;AACH;;AACD3B,QAAAA,OAAO,CAAPA,UAAAA,CAAAA,SAAAA,EAAAA,QAAAA,EAAAA,OAAAA,EAAiD,CAAA,CAAA,EAAjDA,IAAiD,CAAjDA;;AACA,YAAI,CAAJ,uBAAA,EAA8B;AAC1B+B,UAAAA,MAAM,GAAGC,OAAO,CAAPA,KAAAA,CAAAA,MAAAA,EAATD,WAASC,CAATD;AACH;;AACD,YAAI,UAAJ,MAAA,EAAsB;AAClBH,UAAAA,CAAC,CAADA,cAAAA;AACAA,UAAAA,CAAC,CAADA,eAAAA;AACH;AAnBL,OAAA;;AAqBA,UAAIK,cAAc,GAAG,SAAjBA,cAAiB,CAAA,CAAA,EAAA,eAAA,EAA6B;AAC9C,YAAIC,SAAS,IAAIN,CAAC,CAADA,IAAAA,KAAjB,SAAA,EAAuC;AACnC;AACH;;AACDA,QAAAA,CAAC,CAADA,IAAAA,GAAAA,IAAAA;AACAA,QAAAA,CAAC,CAADA,cAAAA,GAAAA,OAAAA;;AACA,YAAA,QAAA,EAAc;AACV,cAAIO,aAAa,GAAGP,CAAC,CAArB,MAAA;;AACA,iBAAOO,aAAa,IAAIA,aAAa,KAArC,OAAA,EAAmD;AAC/C,gBAAIvC,WAAW,CAAA,aAAA,EAAf,QAAe,CAAf,EAA0C;AACtCgC,cAAAA,CAAC,CAADA,aAAAA,GAAAA,aAAAA;AACAF,cAAAA,WAAW,CAAA,CAAA,EAAXA,eAAW,CAAXA;AACH;;AACDS,YAAAA,aAAa,GAAGA,aAAa,CAA7BA,UAAAA;AACH;AARL,SAAA,MASO;AACHP,UAAAA,CAAC,CAADA,aAAAA,GAAkBA,CAAC,CAADA,cAAAA,IAAoBA,CAAC,CAAvCA,MAAAA;AACAF,UAAAA,WAAW,CAAA,CAAA,EAAXA,eAAW,CAAXA;AACH;AAlBL,OAAA;;AAoBA,UAAIU,YAAY,GAAG;AACfJ,QAAAA,OAAO,EADQ,OAAA;AAEfC,QAAAA,cAAc,EAFC,cAAA;AAGfI,QAAAA,QAAQ,EAHO,QAAA;AAIfC,QAAAA,IAAI,EAJW,SAAA;AAKfC,QAAAA,IAAI,EALW,IAAA;AAMfC,QAAAA,SAAS,EAAEpB,UAAU,CAAVA,IAAAA,CANI,GAMJA,CANI;AAOfA,QAAAA,UAAU,EAPK,UAAA;AAQfrB,QAAAA,IAAI,EAAE,EAAEA;AARO,OAAnB;AAUAyB,MAAAA,SAAS,CAATA,aAAAA,CAAAA,IAAAA,CAAAA,YAAAA;AACA,UAAIiB,sBAAsB,GAAG,MAAMjB,SAAS,CAATA,aAAAA,CAAnC,MAAA;AACA,UAAIkB,uBAAuB,GAAGD,sBAAsB,IAApD,kBAAA;AACA,UAAA,qBAAA;;AACA,UAAA,uBAAA,EAA6B;AACzBC,QAAAA,uBAAuB,GAAG,CAAC1C,OAAO,CAAPA,UAAAA,CAAAA,SAAAA,EAAAA,OAAAA,EAAAA,OAAAA,EAAgD,CAAA,IAAA,EAAA,UAAA,EAA3E0C,OAA2E,CAAhD1C,CAA3B0C;AACH;;AACD,UAAA,uBAAA,EAA6B;AACzBlB,QAAAA,SAAS,CAATA,aAAAA,GAA0BmB,gBAAgB,CAA1CnB,SAA0C,CAA1CA;;AACA,YAAIT,6BAA6B,MAAMpB,2BAA2B,CAA3BA,OAAAA,CAAAA,SAAAA,IAAiD,CAAxF,CAAA,EAA4F;AACxFiD,UAAAA,qBAAqB,GAAG;AACpBC,YAAAA,OAAO,EAAE;AADW,WAAxBD;AAGH;;AACDpB,QAAAA,SAAS,CAATA,cAAAA,GAA2BpD,UAAU,CAAVA,MAAAA,CAAAA,OAAAA,EAA2Bc,0BAA0B,CAA1BA,SAA0B,CAA1BA,IAA3Bd,SAAAA,EAA+EoD,SAAS,CAAxFpD,aAAAA,EAA3BoD,qBAA2BpD,CAA3BoD;AACH;;AACDxB,MAAAA,OAAO,CAAPA,UAAAA,CAAAA,SAAAA,EAAAA,KAAAA,EAAAA,OAAAA,EAA8C,CAA9CA,YAA8C,CAA9CA;AArED,KAAA;AAuEH8C,IAAAA,aAAa,EAAE,SAAA,aAAA,CAAA,OAAA,EAAA,QAAA,EAA4B;AACvC,UAAIC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,SAAA,EAAoB;AACxC,YAAIvB,SAAS,GAAGP,WAAW,CAA3B,SAA2B,CAA3B;;AACA,YAAI,CAACO,SAAS,CAATA,aAAAA,CAAL,MAAA,EAAqC;AACjC,iBAAOP,WAAW,CAAlB,SAAkB,CAAlB;AACA;AACH;;AACD,YAAA,cAAA;AACAO,QAAAA,SAAS,CAATA,aAAAA,GAA0B,SAAS,CAAT,aAAA,CAAA,MAAA,CAA+B,UAAA,YAAA,EAAuB;AAC5E,cAAIwB,IAAI,GAAG5B,UAAU,CAAVA,MAAAA,IAAqB,CAAC6B,QAAQ,CAACb,YAAY,CAAb,UAAA,EAA9BhB,UAA8B,CAA9BA,IAAuEY,OAAO,IAAII,YAAY,CAAZA,OAAAA,KAAlFhB,OAAAA,IAAsHiB,QAAQ,IAAID,YAAY,CAAZA,QAAAA,KAA7I,QAAA;;AACA,cAAI,CAAJ,IAAA,EAAW;AACPc,YAAAA,cAAc,GAAGd,YAAY,CAA7Bc,OAAAA;AACAlD,YAAAA,OAAO,CAAPA,UAAAA,CAAAA,SAAAA,EAAAA,QAAAA,EAAAA,OAAAA,EAAiD,CAAjDA,YAAiD,CAAjDA;AACH;;AACD,iBAAA,IAAA;AANJwB,SAA0B,CAA1BA;AAQA,YAAI2B,qBAAqB,GAAG,CAAC3B,SAAS,CAATA,aAAAA,CAA7B,MAAA;AACA,YAAI4B,0BAA0B,GAAGD,qBAAqB,IAAIjC,SAAS,KAAnE,gBAAA;;AACA,YAAA,0BAAA,EAAgC;AAC5BlB,UAAAA,OAAO,CAAPA,UAAAA,CAAAA,SAAAA,EAAAA,UAAAA,EAAAA,OAAAA,EAAmD,CAAA,UAAA,EAAnDA,cAAmD,CAAnDA;;AACA,cAAIwB,SAAS,CAAb,aAAA,EAA6B;AACzBA,YAAAA,SAAS,CAATA,cAAAA;AACH;;AACD,iBAAOP,WAAW,CAAlB,SAAkB,CAAlB;AACH;AAvBL,OAAA;;AAyBA,UAAA,kBAAA,EAAwB;AACpB8B,QAAAA,iBAAiB,CAAjBA,SAAiB,CAAjBA;AADJ,OAAA,MAEO;AACH,aAAK,IAAL,IAAA,IAAA,WAAA,EAA8B;AAC1BA,UAAAA,iBAAiB,CAAjBA,IAAiB,CAAjBA;AACH;AACJ;;AACD,UAAIM,kBAAkB,GAAG,MAAMC,MAAM,CAANA,IAAAA,CAAAA,WAAAA,EAA/B,MAAA;;AACA,UAAA,kBAAA,EAAwB;AACpBxD,QAAAA,cAAc,CAAdA,MAAAA,CAAAA,OAAAA;AACH;AA3GF,KAAA;AA6GHyD,IAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,KAAA,EAAA,eAAA,EAAiC;AAC3C,UAAIC,SAAS,GAAb,KAAA;;AACA,UAAIC,cAAc,GAAG,SAAjBA,cAAiB,CAAA,YAAA,EAAuB;AACxC,YAAA,SAAA,EAAe;AACX;AACH;;AACD,YAAI,CAACrC,UAAU,CAAX,MAAA,IAAsB6B,QAAQ,CAACb,YAAY,CAAb,UAAA,EAAlC,UAAkC,CAAlC,EAAyE;AACrEA,UAAAA,YAAY,CAAZA,cAAAA,CAAAA,KAAAA,EAAAA,eAAAA;AACAoB,UAAAA,SAAS,GAAGE,KAAK,CAAjBF,6BAAYE,EAAZF;AACH;AAPL,OAAA;;AASAhC,MAAAA,SAAS,CAATA,aAAAA,CAAAA,OAAAA,CAAAA,cAAAA;;AACA,UAAIJ,UAAU,CAAVA,MAAAA,IAAqBH,WAAW,CAApC,gBAAoC,CAApC,EAAwD;AACpDA,QAAAA,WAAW,CAAXA,gBAAW,CAAXA,CAAAA,aAAAA,CAAAA,OAAAA,CAAAA,cAAAA;AACH;AACJ;AA5HE,GAAP;AAlBJ,CAAA;;AAiJA,IAAI0B,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,aAAA,EAAwB;AAC3C,SAAO,UAAA,KAAA,EAAA,eAAA,EAAiC;AACpC,QAAIgB,kBAAkB,GAAG3C,qBAAqB,CAAA,IAAA,EAA9C,aAA8C,CAA9C;AACA0C,IAAAA,KAAK,GAAGE,YAAY,CAAZA,KAAAA,CAARF,KAAQE,CAARF;AACAC,IAAAA,kBAAkB,CAAlBA,YAAAA,CAAAA,KAAAA,EAAAA,eAAAA;AAHJ,GAAA;AADJ,CAAA;;AAOA,IAAIV,QAAQ,GAAG,SAAXA,QAAW,CAAA,QAAA,EAAA,OAAA,EAA4B;AACvC,OAAK,IAAIY,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAGC,OAAO,CAA3B,MAAA,EAAoCD,CAApC,EAAA,EAAyC;AACrC,QAAIE,QAAQ,CAARA,OAAAA,CAAiBD,OAAO,CAAxBC,CAAwB,CAAxBA,IAAJ,CAAA,EAAsC;AAClC,aAAA,KAAA;AACH;AACJ;;AACD,SAAA,IAAA;AANJ,CAAA;;AAQA,IAAIC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAA,QAAA,EAAmB;AAC1C,SAAO,UAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,IAAA,EAAA,OAAA,EAAsD;AACzD,QAAI,CAAJ,OAAA,EAAc;AACVhC,MAAAA,OAAO,GAAPA,IAAAA;AACAO,MAAAA,IAAI,GAAG,KAAPA,CAAAA;AACH;;AACD,QAAI,aAAa,OAAjB,QAAA,EAAkC;AAC9BA,MAAAA,IAAI,GAAJA,QAAAA;AACAF,MAAAA,QAAQ,GAAG,KAAXA,CAAAA;AACH;;AACD,QAAI,CAAA,OAAA,IAAY,aAAa,OAA7B,SAAA,EAA+C;AAC3CL,MAAAA,OAAO,GAAGO,IAAI,IAAdP,QAAAA;AACAK,MAAAA,QAAQ,GAAG,KAAXA,CAAAA;AACAE,MAAAA,IAAI,GAAG,KAAPA,CAAAA;AACH;;AACD0B,IAAAA,QAAQ,CAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,IAAA,EAARA,OAAQ,CAARA;AAdJ,GAAA;AADJ,CAAA;;AAkBA,IAAIC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA,QAAA,EAAmB;AAC3C,SAAO,UAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,OAAA,EAAgD;AACnD,QAAI,eAAe,OAAnB,QAAA,EAAoC;AAChClC,MAAAA,OAAO,GAAPA,QAAAA;AACAK,MAAAA,QAAQ,GAAG,KAAXA,CAAAA;AACH;;AACD4B,IAAAA,QAAQ,CAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAARA,OAAQ,CAARA;AALJ,GAAA;AADJ,CAAA;;AASA,IAAIE,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAA,QAAA,EAAmB;AAC/C,SAAO,UAAA,OAAA,EAAA,GAAA,EAAA,eAAA,EAAwC;AAC3C,QAAI,aAAa,OAAjB,GAAA,EAA6B;AACzBC,MAAAA,GAAG,GAAG;AACF9B,QAAAA,IAAI,EAAE8B;AADJ,OAANA;AAGH;;AACD,QAAI,CAACA,GAAG,CAAR,MAAA,EAAiB;AACbA,MAAAA,GAAG,CAAHA,MAAAA,GAAAA,OAAAA;AACH;;AACDA,IAAAA,GAAG,CAAHA,aAAAA,GAAAA,OAAAA;;AACA,QAAI,CAACA,GAAG,CAAR,cAAA,EAAyB;AACrBA,MAAAA,GAAG,CAAHA,cAAAA,GAAAA,OAAAA;AACH;;AACD,QAAI,CAACA,GAAG,CAAJ,IAAA,IAAaA,GAAG,CAApB,aAAA,EAAoC;AAChCA,MAAAA,GAAG,CAAHA,IAAAA,GAAWA,GAAG,CAAHA,aAAAA,CAAXA,IAAAA;AACH;;AACDH,IAAAA,QAAQ,CAAA,OAAA,EAAUG,GAAG,YAAYR,YAAY,CAA3BQ,KAAAA,GAAAA,GAAAA,GAA0CR,YAAY,CAAZA,KAAAA,CAApD,GAAoDA,CAApD,EAARK,eAAQ,CAARA;AAhBJ,GAAA;AADJ,CAAA;;AAoBA,IAAII,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAA,QAAA,EAAmB;AAC7C,SAAO,UAAA,GAAA,EAAA,MAAA,EAAsB;AACzB,QAAI,EAAE,gBAAgBT,YAAY,CAAlC,KAAI,CAAJ,EAA2C;AACvC,aAAO,IAAIA,YAAY,CAAhB,KAAA,CAAA,GAAA,EAAP,MAAO,CAAP;AACH;;AACD,QAAI,CAAJ,GAAA,EAAU;AACNQ,MAAAA,GAAG,GAAHA,EAAAA;AACH;;AACD,QAAI,aAAa,OAAjB,GAAA,EAA6B;AACzBA,MAAAA,GAAG,GAAG;AACF9B,QAAAA,IAAI,EAAE8B;AADJ,OAANA;AAGH;;AACD,QAAI,CAAJ,MAAA,EAAa;AACTE,MAAAA,MAAM,GAANA,EAAAA;AACH;;AACDL,IAAAA,QAAQ,CAARA,IAAAA,CAAAA,IAAAA,EAAAA,GAAAA,EAAAA,MAAAA;AAfJ,GAAA;AADJ,CAAA;;AAmBA,IAAIM,OAAO,GAAG,SAAVA,OAAU,CAAA,QAAA,EAAmB;AAC7B,MAAIC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,OAAA,EAAA,SAAA,EAA6B;AACjD,QAAItD,SAAS,IAAIA,SAAS,CAATA,OAAAA,CAAAA,GAAAA,IAAyB,CAA1C,CAAA,EAA8C;AAC1C,UAAIZ,IAAI,GAAGG,KAAK,CAALA,SAAAA,CAAAA,KAAAA,CAAAA,IAAAA,CAAAA,SAAAA,EAAX,CAAWA,CAAX;AACAS,MAAAA,SAAS,CAATA,KAAAA,CAAAA,GAAAA,EAAAA,OAAAA,CAA6B,UAAA,SAAA,EAAoB;AAC7CZ,QAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAAA,SAAAA;AACA2D,QAAAA,QAAQ,CAARA,KAAAA,CAAAA,IAAAA,EAAAA,IAAAA;AAFJ/C,OAAAA;AAFJ,KAAA,MAMO;AACH+C,MAAAA,QAAQ,CAARA,KAAAA,CAAAA,IAAAA,EAAAA,SAAAA;AACH;AATL,GAAA;;AAWA,SAAO,UAAA,OAAA,EAAA,SAAA,EAA6B;AAChC,QAAI,aAAalG,OAAO,CAAxB,SAAwB,CAAxB,EAAqC;AACjC,UAAIuC,IAAI,GAAGG,KAAK,CAALA,SAAAA,CAAAA,KAAAA,CAAAA,IAAAA,CAAAA,SAAAA,EAAX,CAAWA,CAAX;;AACA,WAAK,IAAL,IAAA,IAAA,SAAA,EAA4B;AACxBH,QAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAAA,IAAAA;AACAA,QAAAA,IAAI,CAACA,IAAI,CAAJA,MAAAA,GAALA,CAAI,CAAJA,GAAwBY,SAAS,CAAjCZ,IAAiC,CAAjCA;AACAkE,QAAAA,iBAAiB,CAAjBA,KAAAA,CAAAA,IAAAA,EAAAA,IAAAA;AACH;AANL,KAAA,MAOO;AACHA,MAAAA,iBAAiB,CAAjBA,KAAAA,CAAAA,IAAAA,EAAAA,SAAAA;AACH;AAVL,GAAA;AAZJ,CAAA;;AAyBA,IAAIC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,SAAA,EAAA,OAAA,EAA6B;AAChD,MAAIC,gBAAgB,GAAGnF,wBAAwB,CAAxBA,SAAwB,CAAxBA,IAAvB,SAAA;;AACA,MAAIoF,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,SAAA,EAAA,OAAA,EAA6B;AAChD,WAAO,YAAA,SAAA,IAAyB,QAAQtE,OAAO,CAA/C,SAAA;AADJ,GAAA;;AAGA,MAAIsE,gBAAgB,CAAA,SAAA,EAApB,OAAoB,CAApB,EAA0C;AACtC;AACH;;AACD,MAAIhG,UAAU,CAAC0B,OAAO,CAAtB,gBAAsB,CAAR,CAAd,EAA2C;AACvC6B,IAAAA,SAAS,GAATA,SAAAA;AACA7B,IAAAA,OAAO,CAAPA,gBAAO,CAAPA;AACA6B,IAAAA,SAAS,GAAG,KAAZA,CAAAA;AACH;AAZL,CAAA;;AAcA,IAAI0C,cAAc,GAAG,SAAjBA,cAAiB,CAAA,KAAA,EAAgB;AACjC,MAAIC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,KAAA,EAAgB;AACnC,QAAIC,eAAe,GAAnB,gDAAA;AACA,WAAO,CAACpB,KAAK,CAAN,KAAA,IAAgB,KAAA,CAAA,KAAWA,KAAK,CAAhC,MAAA,IAA2CoB,eAAe,CAAfA,IAAAA,CAAqBpB,KAAK,CAA5E,IAAkDoB,CAAlD;AAFJ,GAAA;;AAIA,MAAIC,cAAc,GAAG,SAAjBA,cAAiB,CAAA,KAAA,EAAgB;AACjC,WAAO,QAAQrB,KAAK,CAAb,KAAA,IAAuB,MAAMA,KAAK,CAALA,IAAAA,CAAAA,OAAAA,CAApC,KAAoCA,CAApC;AADJ,GAAA;;AAGA,MAAIqB,cAAc,CAAlB,KAAkB,CAAlB,EAA2B;AACvB,WAAO,QAAQrB,KAAK,CAAb,QAAA,GAAyBA,KAAK,CAA9B,QAAA,GAA0CA,KAAK,CAAtD,OAAA;AACH;;AACD,MAAImB,gBAAgB,CAApB,KAAoB,CAApB,EAA6B;AACzB,QAAIG,aAAa,GAAG;AAChB,SADgB,CAAA;AAEhB,SAFgB,CAAA;AAGhB,SAHgB,CAAA;AAIhB,SAAG;AAJa,KAApB;AAMA,WAAOA,aAAa,CAACtB,KAAK,CAA1B,MAAoB,CAApB;AACH;;AACD,SAAOA,KAAK,CAAZ,KAAA;AApBJ,CAAA;;AAsBA,IAAIE,YAAY,GAAGrF,QAAQ,CAAC;AACxB0G,EAAAA,EAAE,EAAEvE,UAAU,CAACsD,oBAAoB,CAACO,OAAO,CAAC,UAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,IAAA,EAAA,OAAA,EAAsD;AAC9F,QAAIZ,kBAAkB,GAAG3C,qBAAqB,CAAA,OAAA,EAA9C,SAA8C,CAA9C;AACA2C,IAAAA,kBAAkB,CAAlBA,UAAAA,CAAAA,OAAAA,EAAAA,QAAAA,EAAAA,IAAAA;AAHoB,GACmB,CAAR,CAArB,CADU;AAKxBuB,EAAAA,GAAG,EAAExE,UAAU,CAACsD,oBAAoB,CAAC,UAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,IAAA,EAAA,OAAA,EAAsD;AACvF,QAAImB,cAAc,GAAG,SAAA,cAAA,GAA0B;AAC3CvB,MAAAA,YAAY,CAAZA,GAAAA,CAAAA,OAAAA,EAAAA,SAAAA,EAAAA,QAAAA,EAAAA,cAAAA;AACA5B,MAAAA,OAAO,CAAPA,KAAAA,CAAAA,IAAAA,EAAAA,SAAAA;AAFJ,KAAA;;AAIA4B,IAAAA,YAAY,CAAZA,EAAAA,CAAAA,OAAAA,EAAAA,SAAAA,EAAAA,QAAAA,EAAAA,IAAAA,EAAAA,cAAAA;AAVoB,GAKY,CAArB,CALS;AAYxBwB,EAAAA,GAAG,EAAE1E,UAAU,CAACwD,qBAAqB,CAACK,OAAO,CAAC,UAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,OAAA,EAAgD;AAC1F,QAAIZ,kBAAkB,GAAG3C,qBAAqB,CAAA,OAAA,EAA9C,SAA8C,CAA9C;AACA2C,IAAAA,kBAAkB,CAAlBA,aAAAA,CAAAA,OAAAA,EAAAA,QAAAA;AAdoB,GAYqB,CAAR,CAAtB,CAZS;AAgBxB0B,EAAAA,OAAO,EAAE3E,UAAU,CAACyD,yBAAyB,CAAC,UAAA,OAAA,EAAA,KAAA,EAAA,eAAA,EAA0C;AACpF,QAAIjD,SAAS,GAAGwC,KAAK,CAArB,IAAA;AACA,QAAIC,kBAAkB,GAAG3C,qBAAqB,CAAA,OAAA,EAAU0C,KAAK,CAA7D,IAA8C,CAA9C;AACA1D,IAAAA,OAAO,CAAPA,UAAAA,CAAAA,SAAAA,EAAAA,SAAAA,EAAAA,OAAAA,EAAkD,CAAA,KAAA,EAAlDA,eAAkD,CAAlDA;AACA2D,IAAAA,kBAAkB,CAAlBA,YAAAA,CAAAA,KAAAA,EAAAA,eAAAA;AACA,QAAI2B,QAAQ,GAAGtF,OAAO,CAAPA,QAAAA,CAAAA,SAAAA,EAAAA,UAAAA,KAA2C0D,KAAK,CAAhD1D,oBAA2C0D,EAA3C1D,IAA2EN,gBAAgB,CAAhBA,OAAAA,CAAAA,SAAAA,MAAwC,CAAlI,CAAA;;AACA,QAAI,CAAJ,QAAA,EAAe;AACX,UAAI6F,OAAO,GAAX,EAAA;;AACA,UAAIC,UAAU,GAAG,SAAA,UAAA,CAAA,OAAA,EAA6B;AAC1C,YAAIC,MAAM,GAAGpF,OAAO,CAApB,UAAA;;AACA,YAAA,MAAA,EAAY;AACRkF,UAAAA,OAAO,CAAPA,IAAAA,CAAAA,MAAAA;AACAC,UAAAA,UAAU,CAAVA,MAAU,CAAVA;AACH;AALL,OAAA;;AAOAA,MAAAA,UAAU,CAAVA,OAAU,CAAVA;AACAD,MAAAA,OAAO,CAAPA,IAAAA,CAAAA,MAAAA;AACA,UAAI1B,CAAC,GAAL,CAAA;;AACA,aAAO0B,OAAO,CAAPA,CAAO,CAAPA,IAAc,CAAC7B,KAAK,CAA3B,oBAAsBA,EAAtB,EAAoD;AAChD,YAAIgC,iBAAiB,GAAG1E,qBAAqB,CAACuE,OAAO,CAAR,CAAQ,CAAR,EAAa7B,KAAK,CAA/D,IAA6C,CAA7C;AACAgC,QAAAA,iBAAiB,CAAjBA,YAAAA,CAA+BvH,MAAM,CAAA,KAAA,EAAQ;AACzCgE,UAAAA,aAAa,EAAEoD,OAAO,CAAA,CAAA;AADmB,SAAR,CAArCG,EAAAA,eAAAA;AAGA7B,QAAAA,CAAC;AACJ;AACJ;;AACD,QAAIxD,OAAO,CAAPA,QAAAA,IAAoB3B,QAAQ,CAAhC,OAAgC,CAAhC,EAA2C;AACvCsB,MAAAA,OAAO,CAAPA,UAAAA,CAAAA,SAAAA,EAAAA,UAAAA,EAAAA,OAAAA,EAAmD,CAAA,KAAA,EAAnDA,eAAmD,CAAnDA;AACAyE,MAAAA,gBAAgB,CAAA,SAAA,EAAhBA,OAAgB,CAAhBA;AACH;AA7CmB,GAgBqB,CAA1B,CAhBK;AA+CxBkB,EAAAA,cAAc,EAAEjF,UAAU,CAACyD,yBAAyB,CAAC,UAAA,OAAA,EAAA,KAAA,EAAA,eAAA,EAA0C;AAC3F,QAAIR,kBAAkB,GAAG3C,qBAAqB,CAAA,OAAA,EAAU0C,KAAK,CAA7D,IAA8C,CAA9C;AACAC,IAAAA,kBAAkB,CAAlBA,YAAAA,CAAAA,KAAAA,EAAAA,eAAAA;AAFsB,GAA0B,CAA1B;AA/CF,CAAD,CAA3B;;AAoDA,IAAIiC,SAAS,GAAG,SAAZA,SAAY,CAAA,UAAA,EAAqB;AACjC,MAAA,UAAA,EAAgB;AACZhC,IAAAA,YAAY,CAAZA,KAAAA,GAAAA,UAAAA;AACAA,IAAAA,YAAY,CAAZA,KAAAA,CAAAA,SAAAA,GAA+BiC,UAAU,CAAzCjC,SAAAA;AACH;AAJL,CAAA;;AAMAgC,SAAS,CAACvB,uBAAuB,CAAC,UAAA,GAAA,EAAA,MAAA,EAAsB;AACpD,MAAIyB,IAAI,GAAR,IAAA;AACA,MAAIC,kBAAkB,GAAtB,KAAA;AACA,MAAIC,2BAA2B,GAA/B,KAAA;AACA,MAAIC,gBAAgB,GAApB,KAAA;AACA9H,EAAAA,MAAM,CAAA,IAAA,EAANA,GAAM,CAANA;;AACA,MAAIiG,GAAG,YAAYR,YAAY,CAA3BQ,KAAAA,IAAqC/F,WAAW,CAAXA,SAAAA,MAA2B+F,GAAG,YAAY9F,MAAM,CAAzF,KAAA,EAAiG;AAC7FwH,IAAAA,IAAI,CAAJA,aAAAA,GAAAA,GAAAA;AACAA,IAAAA,IAAI,CAAJA,aAAAA,GAAqB,KAArBA,CAAAA;AACH;;AACD,MAAI,EAAE1B,GAAG,YAAYR,YAAY,CAAjC,KAAI,CAAJ,EAA0C;AACtCzF,IAAAA,MAAM,CAAA,IAAA,EAAO;AACT+H,MAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,eAAO,CAAC,EAAEH,kBAAkB,IAAID,IAAI,CAAJA,aAAAA,IAAsBA,IAAI,CAAJA,aAAAA,CAAtD,kBAAQ,CAAR;AAFK,OAAA;AAITK,MAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxBJ,QAAAA,kBAAkB,GAAlBA,IAAAA;AACAD,QAAAA,IAAI,CAAJA,aAAAA,IAAsBA,IAAI,CAAJA,aAAAA,CAAtBA,eAAsBA,EAAtBA;AANK,OAAA;AAQTM,MAAAA,6BAA6B,EAAE,SAAA,6BAAA,GAAW;AACtC,eAAA,2BAAA;AATK,OAAA;AAWTC,MAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,aAAA,eAAA;AACAL,QAAAA,2BAA2B,GAA3BA,IAAAA;AACAF,QAAAA,IAAI,CAAJA,aAAAA,IAAsBA,IAAI,CAAJA,aAAAA,CAAtBA,wBAAsBA,EAAtBA;AAdK,OAAA;AAgBTQ,MAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,eAAO,CAAC,EAAEL,gBAAgB,IAAIH,IAAI,CAAJA,aAAAA,IAAsBA,IAAI,CAAJA,aAAAA,CAApD,gBAAQ,CAAR;AAjBK,OAAA;AAmBTS,MAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvBN,QAAAA,gBAAgB,GAAhBA,IAAAA;AACAH,QAAAA,IAAI,CAAJA,aAAAA,IAAsBA,IAAI,CAAJA,aAAAA,CAAtBA,cAAsBA,EAAtBA;AACH;AAtBQ,KAAP,CAAN3H;AAwBH;;AACDqI,EAAAA,WAAW,CAAA,OAAA,EAAA,cAAA,EAAXA,IAAW,CAAXA;;AACA,MAAI,MAAMpC,GAAG,CAAHA,IAAAA,CAAAA,OAAAA,CAAV,OAAUA,CAAV,EAAqC;AACjC,WAAOE,MAAM,CAAb,KAAA;AACA,WAAOA,MAAM,CAAb,KAAA;AACH;;AACDnG,EAAAA,MAAM,CAAA,IAAA,EAANA,MAAM,CAANA;AACA2H,EAAAA,IAAI,CAAJA,IAAAA,GAAY,EAAZA,IAAAA;AA1CJF,CAAiC,CAAxB,CAATA;;AA4CA,IAAIY,WAAW,GAAG,SAAdA,WAAc,CAAA,QAAA,EAAA,IAAA,EAAA,aAAA,EAAwC;AACtDlD,EAAAA,MAAM,CAANA,cAAAA,CAAsBmD,aAAa,IAAI7C,YAAY,CAAZA,KAAAA,CAAvCN,SAAAA,EAAAA,QAAAA,EAA+E;AAC3EoD,IAAAA,UAAU,EADiE,IAAA;AAE3EC,IAAAA,YAAY,EAF+D,IAAA;AAG3E7F,IAAAA,GAAG,EAAE,SAAA,GAAA,GAAW;AACZ,aAAO,KAAA,aAAA,IAAsB8F,IAAI,CAAC,KAAlC,aAAiC,CAAjC;AAJuE,KAAA;AAM3EC,IAAAA,GAAG,EAAE,SAAA,GAAA,CAAA,KAAA,EAAgB;AACjBvD,MAAAA,MAAM,CAANA,cAAAA,CAAAA,IAAAA,EAAAA,QAAAA,EAAsC;AAClCoD,QAAAA,UAAU,EADwB,IAAA;AAElCC,QAAAA,YAAY,EAFsB,IAAA;AAGlCG,QAAAA,QAAQ,EAH0B,IAAA;AAIlCC,QAAAA,KAAK,EAAEA;AAJ2B,OAAtCzD;AAMH;AAb0E,GAA/EA;AADJ,CAAA;;AAiBAvE,cAAc,CAAdA,WAAc,CAAdA;AACA,IAAIiI,iBAAiB,GAAGvI,SAAxB,EAAA;AACA,IAAIwI,gBAAgB,GAAGxI,SAAvB,EAAA;;AACAmF,YAAY,CAAZA,GAAAA,GAAmB,UAAA,MAAA,EAAiB;AAChCoD,EAAAA,iBAAiB,CAAjBA,IAAAA;AACApD,EAAAA,YAAY,CAAZA,MAAAA,CAAAA,MAAAA;AACAgC,EAAAA,SAAS,CAACsB,MAAM,CAAhBtB,KAAS,CAATA;AACAqB,EAAAA,gBAAgB,CAAhBA,IAAAA;AAJJrD,CAAAA;;AAMAA,YAAY,CAAZA,eAAAA,GAA+B,YAAW;AACtCxD,EAAAA,YAAY,CAAA,SAAA,EAAY4D,oBAAoB,CAAC,YAAW;AACpD,QAAI1D,IAAI,GAAR,SAAA;AACAsD,IAAAA,YAAY,CAAZA,EAAAA,CAAAA,KAAAA,CAAAA,IAAAA,EAAAA,IAAAA;AACAoD,IAAAA,iBAAiB,CAAjBA,GAAAA,CAAsB,YAAW;AAC7B,UAAIG,OAAO,GAAG1G,KAAK,CAALA,SAAAA,CAAAA,KAAAA,CAAAA,IAAAA,CAAAA,IAAAA,EAAd,CAAcA,CAAd;AACA0G,MAAAA,OAAO,CAAPA,MAAAA,CAAAA,CAAAA,EAAAA,CAAAA;AACAvD,MAAAA,YAAY,CAAZA,GAAAA,CAAAA,KAAAA,CAAAA,IAAAA,EAAAA,OAAAA;AAHJoD,KAAAA;AAKAC,IAAAA,gBAAgB,CAAhBA,GAAAA,CAAqB,YAAW;AAC5BrD,MAAAA,YAAY,CAAZA,EAAAA,CAAAA,KAAAA,CAAAA,IAAAA,EAAAA,IAAAA;AADJqD,KAAAA;AARJ7G,GAA4C,CAAhC,CAAZA;AADJwD,CAAAA;;AAcAA,YAAY,CAAZA,2BAAAA,GAAAA,2BAAAA;AACAA,YAAY,CAAZA,6BAAAA,GAAAA,6BAAAA;AACAwD,MAAM,CAANA,OAAAA,GAAAA,YAAAA","sourcesContent":["/**\r\n * DevExtreme (events/core/events_engine.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nvar registerEventCallbacks = require(\"./event_registrator_callbacks\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar domAdapter = require(\"../../core/dom_adapter\");\r\nvar windowUtils = require(\"../../core/utils/window\");\r\nvar window = windowUtils.getWindow();\r\nvar injector = require(\"../../core/utils/dependency_injector\");\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar Callbacks = require(\"../../core/utils/callbacks\");\r\nvar isWindow = typeUtils.isWindow;\r\nvar isFunction = typeUtils.isFunction;\r\nvar isString = typeUtils.isString;\r\nvar errors = require(\"../../core/errors\");\r\nvar WeakMap = require(\"../../core/polyfills/weak_map\");\r\nvar hookTouchProps = require(\"../../events/core/hook_touch_props\");\r\nvar callOnce = require(\"../../core/utils/call_once\");\r\nvar EMPTY_EVENT_NAME = \"dxEmptyEventType\";\r\nvar NATIVE_EVENTS_TO_SUBSCRIBE = {\r\n    mouseenter: \"mouseover\",\r\n    mouseleave: \"mouseout\",\r\n    pointerenter: \"pointerover\",\r\n    pointerleave: \"pointerout\"\r\n};\r\nvar NATIVE_EVENTS_TO_TRIGGER = {\r\n    focusin: \"focus\",\r\n    focusout: \"blur\"\r\n};\r\nvar NO_BUBBLE_EVENTS = [\"blur\", \"focus\", \"load\"];\r\nvar forcePassiveFalseEventNames = [\"touchmove\", \"wheel\", \"mousewheel\", \"touchstart\"];\r\nvar matchesSafe = function(target, selector) {\r\n    return !isWindow(target) && \"#document\" !== target.nodeName && domAdapter.elementMatches(target, selector)\r\n};\r\nvar elementDataMap = new WeakMap;\r\nvar guid = 0;\r\nvar skipEvent;\r\nvar special = function() {\r\n    var specialData = {};\r\n    registerEventCallbacks.add(function(eventName, eventObject) {\r\n        specialData[eventName] = eventObject\r\n    });\r\n    return {\r\n        getField: function(eventName, field) {\r\n            return specialData[eventName] && specialData[eventName][field]\r\n        },\r\n        callMethod: function(eventName, methodName, context, args) {\r\n            return specialData[eventName] && specialData[eventName][methodName] && specialData[eventName][methodName].apply(context, args)\r\n        }\r\n    }\r\n}();\r\nvar applyForEach = function applyForEach(args, method) {\r\n    var element = args[0];\r\n    if (!element) {\r\n        return\r\n    }\r\n    if (domAdapter.isNode(element) || isWindow(element)) {\r\n        method.apply(eventsEngine, args)\r\n    } else {\r\n        if (!isString(element) && \"length\" in element) {\r\n            var itemArgs = Array.prototype.slice.call(args, 0);\r\n            Array.prototype.forEach.call(element, function(itemElement) {\r\n                itemArgs[0] = itemElement;\r\n                applyForEach(itemArgs, method)\r\n            })\r\n        } else {\r\n            throw errors.Error(\"E0025\")\r\n        }\r\n    }\r\n};\r\nvar getHandler = function(method) {\r\n    return function() {\r\n        applyForEach(arguments, method)\r\n    }\r\n};\r\nvar detectPassiveEventHandlersSupport = function() {\r\n    var isSupported = false;\r\n    try {\r\n        var options = Object.defineProperty({}, \"passive\", {\r\n            get: function() {\r\n                isSupported = true;\r\n                return true\r\n            }\r\n        });\r\n        window.addEventListener(\"test\", null, options)\r\n    } catch (e) {}\r\n    return isSupported\r\n};\r\nvar passiveEventHandlersSupported = callOnce(detectPassiveEventHandlersSupport);\r\nvar getHandlersController = function(element, eventName) {\r\n    var elementData = elementDataMap.get(element);\r\n    eventName = eventName || \"\";\r\n    var eventNameParts = eventName.split(\".\");\r\n    var namespaces = eventNameParts.slice(1);\r\n    var eventNameIsDefined = !!eventNameParts[0];\r\n    eventName = eventNameParts[0] || EMPTY_EVENT_NAME;\r\n    if (!elementData) {\r\n        elementData = {};\r\n        elementDataMap.set(element, elementData)\r\n    }\r\n    if (!elementData[eventName]) {\r\n        elementData[eventName] = {\r\n            handleObjects: [],\r\n            nativeHandler: null\r\n        }\r\n    }\r\n    var eventData = elementData[eventName];\r\n    return {\r\n        addHandler: function(handler, selector, data) {\r\n            var callHandler = function(e, extraParameters) {\r\n                var handlerArgs = [e];\r\n                var target = e.currentTarget;\r\n                var relatedTarget = e.relatedTarget;\r\n                var secondaryTargetIsInside;\r\n                var result;\r\n                if (eventName in NATIVE_EVENTS_TO_SUBSCRIBE) {\r\n                    secondaryTargetIsInside = relatedTarget && target && (relatedTarget === target || target.contains(relatedTarget))\r\n                }\r\n                if (void 0 !== extraParameters) {\r\n                    handlerArgs.push(extraParameters)\r\n                }\r\n                special.callMethod(eventName, \"handle\", element, [e, data]);\r\n                if (!secondaryTargetIsInside) {\r\n                    result = handler.apply(target, handlerArgs)\r\n                }\r\n                if (false === result) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation()\r\n                }\r\n            };\r\n            var wrappedHandler = function(e, extraParameters) {\r\n                if (skipEvent && e.type === skipEvent) {\r\n                    return\r\n                }\r\n                e.data = data;\r\n                e.delegateTarget = element;\r\n                if (selector) {\r\n                    var currentTarget = e.target;\r\n                    while (currentTarget && currentTarget !== element) {\r\n                        if (matchesSafe(currentTarget, selector)) {\r\n                            e.currentTarget = currentTarget;\r\n                            callHandler(e, extraParameters)\r\n                        }\r\n                        currentTarget = currentTarget.parentNode\r\n                    }\r\n                } else {\r\n                    e.currentTarget = e.delegateTarget || e.target;\r\n                    callHandler(e, extraParameters)\r\n                }\r\n            };\r\n            var handleObject = {\r\n                handler: handler,\r\n                wrappedHandler: wrappedHandler,\r\n                selector: selector,\r\n                type: eventName,\r\n                data: data,\r\n                namespace: namespaces.join(\".\"),\r\n                namespaces: namespaces,\r\n                guid: ++guid\r\n            };\r\n            eventData.handleObjects.push(handleObject);\r\n            var firstHandlerForTheType = 1 === eventData.handleObjects.length;\r\n            var shouldAddNativeListener = firstHandlerForTheType && eventNameIsDefined;\r\n            var nativeListenerOptions;\r\n            if (shouldAddNativeListener) {\r\n                shouldAddNativeListener = !special.callMethod(eventName, \"setup\", element, [data, namespaces, handler])\r\n            }\r\n            if (shouldAddNativeListener) {\r\n                eventData.nativeHandler = getNativeHandler(eventName);\r\n                if (passiveEventHandlersSupported() && forcePassiveFalseEventNames.indexOf(eventName) > -1) {\r\n                    nativeListenerOptions = {\r\n                        passive: false\r\n                    }\r\n                }\r\n                eventData.removeListener = domAdapter.listen(element, NATIVE_EVENTS_TO_SUBSCRIBE[eventName] || eventName, eventData.nativeHandler, nativeListenerOptions)\r\n            }\r\n            special.callMethod(eventName, \"add\", element, [handleObject])\r\n        },\r\n        removeHandler: function(handler, selector) {\r\n            var removeByEventName = function(eventName) {\r\n                var eventData = elementData[eventName];\r\n                if (!eventData.handleObjects.length) {\r\n                    delete elementData[eventName];\r\n                    return\r\n                }\r\n                var removedHandler;\r\n                eventData.handleObjects = eventData.handleObjects.filter(function(handleObject) {\r\n                    var skip = namespaces.length && !isSubset(handleObject.namespaces, namespaces) || handler && handleObject.handler !== handler || selector && handleObject.selector !== selector;\r\n                    if (!skip) {\r\n                        removedHandler = handleObject.handler;\r\n                        special.callMethod(eventName, \"remove\", element, [handleObject])\r\n                    }\r\n                    return skip\r\n                });\r\n                var lastHandlerForTheType = !eventData.handleObjects.length;\r\n                var shouldRemoveNativeListener = lastHandlerForTheType && eventName !== EMPTY_EVENT_NAME;\r\n                if (shouldRemoveNativeListener) {\r\n                    special.callMethod(eventName, \"teardown\", element, [namespaces, removedHandler]);\r\n                    if (eventData.nativeHandler) {\r\n                        eventData.removeListener()\r\n                    }\r\n                    delete elementData[eventName]\r\n                }\r\n            };\r\n            if (eventNameIsDefined) {\r\n                removeByEventName(eventName)\r\n            } else {\r\n                for (var name in elementData) {\r\n                    removeByEventName(name)\r\n                }\r\n            }\r\n            var elementDataIsEmpty = 0 === Object.keys(elementData).length;\r\n            if (elementDataIsEmpty) {\r\n                elementDataMap.delete(element)\r\n            }\r\n        },\r\n        callHandlers: function(event, extraParameters) {\r\n            var forceStop = false;\r\n            var handleCallback = function(handleObject) {\r\n                if (forceStop) {\r\n                    return\r\n                }\r\n                if (!namespaces.length || isSubset(handleObject.namespaces, namespaces)) {\r\n                    handleObject.wrappedHandler(event, extraParameters);\r\n                    forceStop = event.isImmediatePropagationStopped()\r\n                }\r\n            };\r\n            eventData.handleObjects.forEach(handleCallback);\r\n            if (namespaces.length && elementData[EMPTY_EVENT_NAME]) {\r\n                elementData[EMPTY_EVENT_NAME].handleObjects.forEach(handleCallback)\r\n            }\r\n        }\r\n    }\r\n};\r\nvar getNativeHandler = function(subscribeName) {\r\n    return function(event, extraParameters) {\r\n        var handlersController = getHandlersController(this, subscribeName);\r\n        event = eventsEngine.Event(event);\r\n        handlersController.callHandlers(event, extraParameters)\r\n    }\r\n};\r\nvar isSubset = function(original, checked) {\r\n    for (var i = 0; i < checked.length; i++) {\r\n        if (original.indexOf(checked[i]) < 0) {\r\n            return false\r\n        }\r\n    }\r\n    return true\r\n};\r\nvar normalizeOnArguments = function(callback) {\r\n    return function(element, eventName, selector, data, handler) {\r\n        if (!handler) {\r\n            handler = data;\r\n            data = void 0\r\n        }\r\n        if (\"string\" !== typeof selector) {\r\n            data = selector;\r\n            selector = void 0\r\n        }\r\n        if (!handler && \"string\" === typeof eventName) {\r\n            handler = data || selector;\r\n            selector = void 0;\r\n            data = void 0\r\n        }\r\n        callback(element, eventName, selector, data, handler)\r\n    }\r\n};\r\nvar normalizeOffArguments = function(callback) {\r\n    return function(element, eventName, selector, handler) {\r\n        if (\"function\" === typeof selector) {\r\n            handler = selector;\r\n            selector = void 0\r\n        }\r\n        callback(element, eventName, selector, handler)\r\n    }\r\n};\r\nvar normalizeTriggerArguments = function(callback) {\r\n    return function(element, src, extraParameters) {\r\n        if (\"string\" === typeof src) {\r\n            src = {\r\n                type: src\r\n            }\r\n        }\r\n        if (!src.target) {\r\n            src.target = element\r\n        }\r\n        src.currentTarget = element;\r\n        if (!src.delegateTarget) {\r\n            src.delegateTarget = element\r\n        }\r\n        if (!src.type && src.originalEvent) {\r\n            src.type = src.originalEvent.type\r\n        }\r\n        callback(element, src instanceof eventsEngine.Event ? src : eventsEngine.Event(src), extraParameters)\r\n    }\r\n};\r\nvar normalizeEventArguments = function(callback) {\r\n    return function(src, config) {\r\n        if (!(this instanceof eventsEngine.Event)) {\r\n            return new eventsEngine.Event(src, config)\r\n        }\r\n        if (!src) {\r\n            src = {}\r\n        }\r\n        if (\"string\" === typeof src) {\r\n            src = {\r\n                type: src\r\n            }\r\n        }\r\n        if (!config) {\r\n            config = {}\r\n        }\r\n        callback.call(this, src, config)\r\n    }\r\n};\r\nvar iterate = function(callback) {\r\n    var iterateEventNames = function(element, eventName) {\r\n        if (eventName && eventName.indexOf(\" \") > -1) {\r\n            var args = Array.prototype.slice.call(arguments, 0);\r\n            eventName.split(\" \").forEach(function(eventName) {\r\n                args[1] = eventName;\r\n                callback.apply(this, args)\r\n            })\r\n        } else {\r\n            callback.apply(this, arguments)\r\n        }\r\n    };\r\n    return function(element, eventName) {\r\n        if (\"object\" === _typeof(eventName)) {\r\n            var args = Array.prototype.slice.call(arguments, 0);\r\n            for (var name in eventName) {\r\n                args[1] = name;\r\n                args[args.length - 1] = eventName[name];\r\n                iterateEventNames.apply(this, args)\r\n            }\r\n        } else {\r\n            iterateEventNames.apply(this, arguments)\r\n        }\r\n    }\r\n};\r\nvar callNativeMethod = function(eventName, element) {\r\n    var nativeMethodName = NATIVE_EVENTS_TO_TRIGGER[eventName] || eventName;\r\n    var isLinkClickEvent = function(eventName, element) {\r\n        return \"click\" === eventName && \"a\" === element.localName\r\n    };\r\n    if (isLinkClickEvent(eventName, element)) {\r\n        return\r\n    }\r\n    if (isFunction(element[nativeMethodName])) {\r\n        skipEvent = eventName;\r\n        element[nativeMethodName]();\r\n        skipEvent = void 0\r\n    }\r\n};\r\nvar calculateWhich = function(event) {\r\n    var setForMouseEvent = function(event) {\r\n        var mouseEventRegex = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\r\n        return !event.which && void 0 !== event.button && mouseEventRegex.test(event.type)\r\n    };\r\n    var setForKeyEvent = function(event) {\r\n        return null == event.which && 0 === event.type.indexOf(\"key\")\r\n    };\r\n    if (setForKeyEvent(event)) {\r\n        return null != event.charCode ? event.charCode : event.keyCode\r\n    }\r\n    if (setForMouseEvent(event)) {\r\n        var whichByButton = {\r\n            1: 1,\r\n            2: 3,\r\n            3: 1,\r\n            4: 2\r\n        };\r\n        return whichByButton[event.button]\r\n    }\r\n    return event.which\r\n};\r\nvar eventsEngine = injector({\r\n    on: getHandler(normalizeOnArguments(iterate(function(element, eventName, selector, data, handler) {\r\n        var handlersController = getHandlersController(element, eventName);\r\n        handlersController.addHandler(handler, selector, data)\r\n    }))),\r\n    one: getHandler(normalizeOnArguments(function(element, eventName, selector, data, handler) {\r\n        var oneTimeHandler = function oneTimeHandler() {\r\n            eventsEngine.off(element, eventName, selector, oneTimeHandler);\r\n            handler.apply(this, arguments)\r\n        };\r\n        eventsEngine.on(element, eventName, selector, data, oneTimeHandler)\r\n    })),\r\n    off: getHandler(normalizeOffArguments(iterate(function(element, eventName, selector, handler) {\r\n        var handlersController = getHandlersController(element, eventName);\r\n        handlersController.removeHandler(handler, selector)\r\n    }))),\r\n    trigger: getHandler(normalizeTriggerArguments(function(element, event, extraParameters) {\r\n        var eventName = event.type;\r\n        var handlersController = getHandlersController(element, event.type);\r\n        special.callMethod(eventName, \"trigger\", element, [event, extraParameters]);\r\n        handlersController.callHandlers(event, extraParameters);\r\n        var noBubble = special.getField(eventName, \"noBubble\") || event.isPropagationStopped() || NO_BUBBLE_EVENTS.indexOf(eventName) !== -1;\r\n        if (!noBubble) {\r\n            var parents = [];\r\n            var getParents = function getParents(element) {\r\n                var parent = element.parentNode;\r\n                if (parent) {\r\n                    parents.push(parent);\r\n                    getParents(parent)\r\n                }\r\n            };\r\n            getParents(element);\r\n            parents.push(window);\r\n            var i = 0;\r\n            while (parents[i] && !event.isPropagationStopped()) {\r\n                var parentDataByEvent = getHandlersController(parents[i], event.type);\r\n                parentDataByEvent.callHandlers(extend(event, {\r\n                    currentTarget: parents[i]\r\n                }), extraParameters);\r\n                i++\r\n            }\r\n        }\r\n        if (element.nodeType || isWindow(element)) {\r\n            special.callMethod(eventName, \"_default\", element, [event, extraParameters]);\r\n            callNativeMethod(eventName, element)\r\n        }\r\n    })),\r\n    triggerHandler: getHandler(normalizeTriggerArguments(function(element, event, extraParameters) {\r\n        var handlersController = getHandlersController(element, event.type);\r\n        handlersController.callHandlers(event, extraParameters)\r\n    }))\r\n});\r\nvar initEvent = function(EventClass) {\r\n    if (EventClass) {\r\n        eventsEngine.Event = EventClass;\r\n        eventsEngine.Event.prototype = EventClass.prototype\r\n    }\r\n};\r\ninitEvent(normalizeEventArguments(function(src, config) {\r\n    var that = this;\r\n    var propagationStopped = false;\r\n    var immediatePropagationStopped = false;\r\n    var defaultPrevented = false;\r\n    extend(that, src);\r\n    if (src instanceof eventsEngine.Event || windowUtils.hasWindow() && src instanceof window.Event) {\r\n        that.originalEvent = src;\r\n        that.currentTarget = void 0\r\n    }\r\n    if (!(src instanceof eventsEngine.Event)) {\r\n        extend(that, {\r\n            isPropagationStopped: function() {\r\n                return !!(propagationStopped || that.originalEvent && that.originalEvent.propagationStopped)\r\n            },\r\n            stopPropagation: function() {\r\n                propagationStopped = true;\r\n                that.originalEvent && that.originalEvent.stopPropagation()\r\n            },\r\n            isImmediatePropagationStopped: function() {\r\n                return immediatePropagationStopped\r\n            },\r\n            stopImmediatePropagation: function() {\r\n                this.stopPropagation();\r\n                immediatePropagationStopped = true;\r\n                that.originalEvent && that.originalEvent.stopImmediatePropagation()\r\n            },\r\n            isDefaultPrevented: function() {\r\n                return !!(defaultPrevented || that.originalEvent && that.originalEvent.defaultPrevented)\r\n            },\r\n            preventDefault: function() {\r\n                defaultPrevented = true;\r\n                that.originalEvent && that.originalEvent.preventDefault()\r\n            }\r\n        })\r\n    }\r\n    addProperty(\"which\", calculateWhich, that);\r\n    if (0 === src.type.indexOf(\"touch\")) {\r\n        delete config.pageX;\r\n        delete config.pageY\r\n    }\r\n    extend(that, config);\r\n    that.guid = ++guid\r\n}));\r\nvar addProperty = function(propName, hook, eventInstance) {\r\n    Object.defineProperty(eventInstance || eventsEngine.Event.prototype, propName, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get: function() {\r\n            return this.originalEvent && hook(this.originalEvent)\r\n        },\r\n        set: function(value) {\r\n            Object.defineProperty(this, propName, {\r\n                enumerable: true,\r\n                configurable: true,\r\n                writable: true,\r\n                value: value\r\n            })\r\n        }\r\n    })\r\n};\r\nhookTouchProps(addProperty);\r\nvar beforeSetStrategy = Callbacks();\r\nvar afterSetStrategy = Callbacks();\r\neventsEngine.set = function(engine) {\r\n    beforeSetStrategy.fire();\r\n    eventsEngine.inject(engine);\r\n    initEvent(engine.Event);\r\n    afterSetStrategy.fire()\r\n};\r\neventsEngine.subscribeGlobal = function() {\r\n    applyForEach(arguments, normalizeOnArguments(function() {\r\n        var args = arguments;\r\n        eventsEngine.on.apply(this, args);\r\n        beforeSetStrategy.add(function() {\r\n            var offArgs = Array.prototype.slice.call(args, 0);\r\n            offArgs.splice(3, 1);\r\n            eventsEngine.off.apply(this, offArgs)\r\n        });\r\n        afterSetStrategy.add(function() {\r\n            eventsEngine.on.apply(this, args)\r\n        })\r\n    }))\r\n};\r\neventsEngine.forcePassiveFalseEventNames = forcePassiveFalseEventNames;\r\neventsEngine.passiveEventHandlersSupported = passiveEventHandlersSupported;\r\nmodule.exports = eventsEngine;\r\n"]},"metadata":{},"sourceType":"module"}