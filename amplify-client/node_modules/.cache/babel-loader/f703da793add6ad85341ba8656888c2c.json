{"ast":null,"code":"/**\r\n * DevExtreme (ui/number_box/number_box.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar domAdapter = require(\"../../core/dom_adapter\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar commonUtils = require(\"../../core/utils/common\");\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar mathUtils = require(\"../../core/utils/math\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar inArray = require(\"../../core/utils/array\").inArray;\n\nvar devices = require(\"../../core/devices\");\n\nvar browser = require(\"../../core/utils/browser\");\n\nvar TextEditor = require(\"../text_box/ui.text_editor\");\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar SpinButtons = require(\"./number_box.spins\").default;\n\nvar messageLocalization = require(\"../../localization/message\");\n\nvar Deferred = require(\"../../core/utils/deferred\").Deferred;\n\nvar math = Math;\nvar WIDGET_CLASS = \"dx-numberbox\";\nvar FIREFOX_CONTROL_KEYS = [\"tab\", \"del\", \"backspace\", \"leftArrow\", \"rightArrow\", \"home\", \"end\", \"enter\"];\nvar FORCE_VALUECHANGE_EVENT_NAMESPACE = \"NumberBoxForceValueChange\";\nvar NumberBoxBase = TextEditor.inherit({\n  _supportedKeys: function _supportedKeys() {\n    return extend(this.callBase(), {\n      upArrow: function upArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._spinUpChangeHandler(e);\n      },\n      downArrow: function downArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._spinDownChangeHandler(e);\n      },\n      enter: function enter() {}\n    });\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      value: 0,\n      min: void 0,\n      max: void 0,\n      step: 1,\n      showSpinButtons: false,\n      useLargeSpinButtons: true,\n      mode: \"text\",\n      invalidValueMessage: messageLocalization.format(\"dxNumberBox-invalidValueMessage\"),\n      buttons: void 0\n    });\n  },\n  _getDefaultButtons: function _getDefaultButtons() {\n    return this.callBase().concat([{\n      name: \"spins\",\n      Ctor: SpinButtons\n    }]);\n  },\n  _isSupportInputMode: function _isSupportInputMode() {\n    var version = parseFloat(browser.version);\n    return browser.chrome && version >= 66 || browser.safari && version >= 12 || browser.msie && version >= 75;\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return devices.real().generic && !devices.isSimulator();\n      },\n      options: {\n        useLargeSpinButtons: false\n      }\n    }, {\n      device: function () {\n        return \"desktop\" !== devices.real().deviceType && !this._isSupportInputMode();\n      }.bind(this),\n      options: {\n        mode: \"number\"\n      }\n    }]);\n  },\n  _initMarkup: function _initMarkup() {\n    this._renderSubmitElement();\n\n    this.$element().addClass(WIDGET_CLASS);\n    this.callBase();\n  },\n  _applyInputAttributes: function _applyInputAttributes($input, customAttributes) {\n    $input.attr(\"inputmode\", \"decimal\");\n    this.callBase($input, customAttributes);\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    this.option(\"isValid\") && this._validateValue(this.option(\"value\"));\n    this.setAria(\"role\", \"spinbutton\");\n  },\n  _renderSubmitElement: function _renderSubmitElement() {\n    this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\n\n    this._setSubmitValue(this.option(\"value\"));\n  },\n  _setSubmitValue: function _setSubmitValue(value) {\n    this._getSubmitElement().val(commonUtils.applyServerDecimalSeparator(value));\n  },\n  _getSubmitElement: function _getSubmitElement() {\n    return this._$submitElement;\n  },\n  _keyPressHandler: function _keyPressHandler(e) {\n    this.callBase(e);\n    var char = eventUtils.getChar(e);\n    var validCharRegExp = /[\\d.,eE\\-+]|Subtract/;\n    var isInputCharValid = validCharRegExp.test(char);\n\n    if (!isInputCharValid) {\n      var keyName = eventUtils.normalizeKeyName(e);\n\n      if (e.metaKey || e.ctrlKey || keyName && inArray(keyName, FIREFOX_CONTROL_KEYS) >= 0) {\n        return;\n      }\n\n      e.preventDefault();\n      return false;\n    }\n\n    this._keyPressed = true;\n  },\n  _onMouseWheel: function _onMouseWheel(dxEvent) {\n    dxEvent.delta > 0 ? this._spinValueChange(1, dxEvent) : this._spinValueChange(-1, dxEvent);\n  },\n  _renderValue: function _renderValue() {\n    var inputValue = this._input().val();\n\n    var value = this.option(\"value\");\n\n    if (!inputValue.length || Number(inputValue) !== value) {\n      this._forceValueRender();\n\n      this._toggleEmptinessEventHandler();\n    }\n\n    var valueText = typeUtils.isDefined(value) ? null : messageLocalization.format(\"dxNumberBox-noDataText\");\n    this.setAria({\n      valuenow: commonUtils.ensureDefined(value, \"\"),\n      valuetext: valueText\n    });\n    this.option(\"text\", this._input().val());\n\n    this._updateButtons();\n\n    return new Deferred().resolve();\n  },\n  _forceValueRender: function _forceValueRender() {\n    var value = this.option(\"value\");\n    var number = Number(value);\n    var formattedValue = isNaN(number) ? \"\" : this._applyDisplayValueFormatter(value);\n\n    this._renderDisplayText(formattedValue);\n  },\n  _applyDisplayValueFormatter: function _applyDisplayValueFormatter(value) {\n    return this.option(\"displayValueFormatter\")(value);\n  },\n  _renderProps: function _renderProps() {\n    this.callBase();\n\n    this._input().prop({\n      min: this.option(\"min\"),\n      max: this.option(\"max\"),\n      step: this.option(\"step\")\n    });\n\n    this.setAria({\n      valuemin: commonUtils.ensureDefined(this.option(\"min\"), \"\"),\n      valuemax: commonUtils.ensureDefined(this.option(\"max\"), \"\")\n    });\n  },\n  _spinButtonsPointerDownHandler: function _spinButtonsPointerDownHandler() {\n    var $input = this._input();\n\n    if (!this.option(\"useLargeSpinButtons\") && domAdapter.getActiveElement() !== $input[0]) {\n      eventsEngine.trigger($input, \"focus\");\n    }\n  },\n  _spinUpChangeHandler: function _spinUpChangeHandler(e) {\n    if (!this.option(\"readOnly\")) {\n      this._spinValueChange(1, e.event || e);\n    }\n  },\n  _spinDownChangeHandler: function _spinDownChangeHandler(e) {\n    if (!this.option(\"readOnly\")) {\n      this._spinValueChange(-1, e.event || e);\n    }\n  },\n  _spinValueChange: function _spinValueChange(sign, dxEvent) {\n    var step = parseFloat(this.option(\"step\"));\n\n    if (0 === step) {\n      return;\n    }\n\n    var value = parseFloat(this._normalizeInputValue()) || 0;\n    value = this._correctRounding(value, step * sign);\n    var min = this.option(\"min\");\n    var max = this.option(\"max\");\n\n    if (void 0 !== min) {\n      value = Math.max(min, value);\n    }\n\n    if (void 0 !== max) {\n      value = Math.min(max, value);\n    }\n\n    this._saveValueChangeEvent(dxEvent);\n\n    this.option(\"value\", value);\n  },\n  _correctRounding: function _correctRounding(value, step) {\n    var regex = /[,.](.*)/;\n    var isFloatValue = regex.test(value);\n    var isFloatStep = regex.test(step);\n\n    if (isFloatValue || isFloatStep) {\n      var valueAccuracy = isFloatValue ? regex.exec(value)[0].length : 0;\n      var stepAccuracy = isFloatStep ? regex.exec(step)[0].length : 0;\n      var accuracy = math.max(valueAccuracy, stepAccuracy);\n      value = this._round(value + step, accuracy);\n      return value;\n    }\n\n    return value + step;\n  },\n  _round: function _round(value, precision) {\n    precision = precision || 0;\n    var multiplier = Math.pow(10, precision);\n    value *= multiplier;\n    value = Math.round(value) / multiplier;\n    return value;\n  },\n  _renderValueChangeEvent: function _renderValueChangeEvent() {\n    this.callBase();\n    var forceValueChangeEvent = eventUtils.addNamespace(\"focusout\", FORCE_VALUECHANGE_EVENT_NAMESPACE);\n    eventsEngine.off(this.element(), forceValueChangeEvent);\n    eventsEngine.on(this.element(), forceValueChangeEvent, this._forceRefreshInputValue.bind(this));\n  },\n  _forceRefreshInputValue: function _forceRefreshInputValue() {\n    if (\"number\" === this.option(\"mode\")) {\n      return;\n    }\n\n    var $input = this._input();\n\n    var formattedValue = this._applyDisplayValueFormatter(this.option(\"value\"));\n\n    $input.val(null);\n    $input.val(formattedValue);\n  },\n  _valueChangeEventHandler: function _valueChangeEventHandler(e) {\n    var $input = this._input();\n\n    var inputValue = this._normalizeText();\n\n    var value = this._parseValue(inputValue);\n\n    var valueHasDigits = \".\" !== inputValue && \"-\" !== inputValue;\n\n    if (this._isValueValid() && !this._validateValue(value)) {\n      $input.val(this._applyDisplayValueFormatter(value));\n      return;\n    }\n\n    if (valueHasDigits) {\n      this.callBase(e, isNaN(value) ? null : value);\n    }\n\n    this._applyValueBoundaries(inputValue, value);\n\n    this.validationRequest.fire({\n      value: value,\n      editor: this\n    });\n  },\n  _applyValueBoundaries: function _applyValueBoundaries(inputValue, parsedValue) {\n    var isValueIncomplete = this._isValueIncomplete(inputValue);\n\n    var isValueCorrect = this._isValueInRange(inputValue);\n\n    if (!isValueIncomplete && !isValueCorrect && null !== parsedValue) {\n      if (Number(inputValue) !== parsedValue) {\n        this._input().val(this._applyDisplayValueFormatter(parsedValue));\n      }\n    }\n  },\n  _replaceCommaWithPoint: function _replaceCommaWithPoint(value) {\n    return value.replace(\",\", \".\");\n  },\n  _inputIsInvalid: function _inputIsInvalid() {\n    var isNumberMode = \"number\" === this.option(\"mode\");\n\n    var validityState = this._input().get(0).validity;\n\n    return isNumberMode && validityState && validityState.badInput;\n  },\n  _renderDisplayText: function _renderDisplayText(text) {\n    if (this._inputIsInvalid()) {\n      return;\n    }\n\n    this.callBase(text);\n  },\n  _isValueIncomplete: function _isValueIncomplete(value) {\n    var incompleteRegex = /(^-$)|(^-?\\d*\\.$)|(\\d+e-?$)/i;\n    return incompleteRegex.test(value);\n  },\n  _isValueInRange: function _isValueInRange(value) {\n    return mathUtils.inRange(value, this.option(\"min\"), this.option(\"max\"));\n  },\n  _isNumber: function _isNumber(value) {\n    return null !== this._parseValue(value);\n  },\n  _validateValue: function _validateValue(value) {\n    var inputValue = this._normalizeText();\n\n    var isValueValid = this._isValueValid();\n\n    var isValid = true;\n\n    var isNumber = this._isNumber(inputValue);\n\n    if (isNaN(Number(value))) {\n      isValid = false;\n    }\n\n    if (!value && isValueValid) {\n      isValid = true;\n    } else {\n      if (!isNumber && !isValueValid) {\n        isValid = false;\n      }\n    }\n\n    this.option({\n      isValid: isValid,\n      validationError: isValid ? null : {\n        editorSpecific: true,\n        message: this.option(\"invalidValueMessage\")\n      }\n    });\n    return isValid;\n  },\n  _normalizeInputValue: function _normalizeInputValue() {\n    return this._parseValue(this._normalizeText());\n  },\n  _normalizeText: function _normalizeText() {\n    var value = this._input().val().trim();\n\n    return this._replaceCommaWithPoint(value);\n  },\n  _parseValue: function _parseValue(value) {\n    var number = parseFloat(value);\n\n    if (isNaN(number)) {\n      return null;\n    }\n\n    return mathUtils.fitIntoRange(number, this.option(\"min\"), this.option(\"max\"));\n  },\n  _clearValue: function _clearValue() {\n    if (this._inputIsInvalid()) {\n      this._input().val(\"\");\n\n      this._validateValue();\n    }\n\n    this.callBase();\n  },\n  reset: function reset() {\n    if (null === this.option(\"value\")) {\n      this.option(\"text\", \"\");\n\n      this._renderValue();\n    } else {\n      this.option(\"value\", null);\n    }\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"value\":\n        this._validateValue(args.value);\n\n        this._setSubmitValue(args.value);\n\n        this.callBase(args);\n\n        this._resumeValueChangeAction();\n\n        break;\n\n      case \"step\":\n        this._renderProps();\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        this._renderProps();\n\n        this.option(\"value\", this._parseValue(this.option(\"value\")));\n        break;\n\n      case \"showSpinButtons\":\n      case \"useLargeSpinButtons\":\n        this._updateButtons([\"spins\"]);\n\n        break;\n\n      case \"invalidValueMessage\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\nmodule.exports = NumberBoxBase;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/number_box/number_box.base.js"],"names":["$","require","domAdapter","eventsEngine","commonUtils","typeUtils","mathUtils","extend","inArray","devices","browser","TextEditor","eventUtils","SpinButtons","messageLocalization","Deferred","math","WIDGET_CLASS","FIREFOX_CONTROL_KEYS","FORCE_VALUECHANGE_EVENT_NAMESPACE","NumberBoxBase","_supportedKeys","upArrow","e","downArrow","enter","_getDefaultOptions","value","min","max","step","showSpinButtons","useLargeSpinButtons","mode","invalidValueMessage","buttons","_getDefaultButtons","name","Ctor","_isSupportInputMode","version","parseFloat","_defaultOptionsRules","device","options","_initMarkup","_applyInputAttributes","$input","_renderContentImpl","_renderSubmitElement","_setSubmitValue","_getSubmitElement","_keyPressHandler","char","validCharRegExp","isInputCharValid","keyName","_onMouseWheel","dxEvent","_renderValue","inputValue","Number","valueText","valuenow","valuetext","_forceValueRender","number","formattedValue","isNaN","_applyDisplayValueFormatter","_renderProps","valuemin","valuemax","_spinButtonsPointerDownHandler","_spinUpChangeHandler","_spinDownChangeHandler","_spinValueChange","Math","_correctRounding","regex","isFloatValue","isFloatStep","valueAccuracy","stepAccuracy","accuracy","_round","precision","multiplier","_renderValueChangeEvent","forceValueChangeEvent","_forceRefreshInputValue","_valueChangeEventHandler","valueHasDigits","editor","_applyValueBoundaries","isValueIncomplete","isValueCorrect","_replaceCommaWithPoint","_inputIsInvalid","isNumberMode","validityState","_renderDisplayText","_isValueIncomplete","incompleteRegex","_isValueInRange","_isNumber","_validateValue","isValueValid","isValid","isNumber","validationError","editorSpecific","message","_normalizeInputValue","_normalizeText","_parseValue","_clearValue","reset","_optionChanged","args","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/number_box/number_box.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar domAdapter = require(\"../../core/dom_adapter\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar commonUtils = require(\"../../core/utils/common\");\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar mathUtils = require(\"../../core/utils/math\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar inArray = require(\"../../core/utils/array\").inArray;\r\nvar devices = require(\"../../core/devices\");\r\nvar browser = require(\"../../core/utils/browser\");\r\nvar TextEditor = require(\"../text_box/ui.text_editor\");\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar SpinButtons = require(\"./number_box.spins\").default;\r\nvar messageLocalization = require(\"../../localization/message\");\r\nvar Deferred = require(\"../../core/utils/deferred\").Deferred;\r\nvar math = Math;\r\nvar WIDGET_CLASS = \"dx-numberbox\";\r\nvar FIREFOX_CONTROL_KEYS = [\"tab\", \"del\", \"backspace\", \"leftArrow\", \"rightArrow\", \"home\", \"end\", \"enter\"];\r\nvar FORCE_VALUECHANGE_EVENT_NAMESPACE = \"NumberBoxForceValueChange\";\r\nvar NumberBoxBase = TextEditor.inherit({\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), {\r\n            upArrow: function(e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this._spinUpChangeHandler(e)\r\n            },\r\n            downArrow: function(e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this._spinDownChangeHandler(e)\r\n            },\r\n            enter: function() {}\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            value: 0,\r\n            min: void 0,\r\n            max: void 0,\r\n            step: 1,\r\n            showSpinButtons: false,\r\n            useLargeSpinButtons: true,\r\n            mode: \"text\",\r\n            invalidValueMessage: messageLocalization.format(\"dxNumberBox-invalidValueMessage\"),\r\n            buttons: void 0\r\n        })\r\n    },\r\n    _getDefaultButtons: function() {\r\n        return this.callBase().concat([{\r\n            name: \"spins\",\r\n            Ctor: SpinButtons\r\n        }])\r\n    },\r\n    _isSupportInputMode: function() {\r\n        var version = parseFloat(browser.version);\r\n        return browser.chrome && version >= 66 || browser.safari && version >= 12 || browser.msie && version >= 75\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return devices.real().generic && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                useLargeSpinButtons: false\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return \"desktop\" !== devices.real().deviceType && !this._isSupportInputMode()\r\n            }.bind(this),\r\n            options: {\r\n                mode: \"number\"\r\n            }\r\n        }])\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderSubmitElement();\r\n        this.$element().addClass(WIDGET_CLASS);\r\n        this.callBase()\r\n    },\r\n    _applyInputAttributes: function($input, customAttributes) {\r\n        $input.attr(\"inputmode\", \"decimal\");\r\n        this.callBase($input, customAttributes)\r\n    },\r\n    _renderContentImpl: function() {\r\n        this.option(\"isValid\") && this._validateValue(this.option(\"value\"));\r\n        this.setAria(\"role\", \"spinbutton\")\r\n    },\r\n    _renderSubmitElement: function() {\r\n        this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\r\n        this._setSubmitValue(this.option(\"value\"))\r\n    },\r\n    _setSubmitValue: function(value) {\r\n        this._getSubmitElement().val(commonUtils.applyServerDecimalSeparator(value))\r\n    },\r\n    _getSubmitElement: function() {\r\n        return this._$submitElement\r\n    },\r\n    _keyPressHandler: function(e) {\r\n        this.callBase(e);\r\n        var char = eventUtils.getChar(e);\r\n        var validCharRegExp = /[\\d.,eE\\-+]|Subtract/;\r\n        var isInputCharValid = validCharRegExp.test(char);\r\n        if (!isInputCharValid) {\r\n            var keyName = eventUtils.normalizeKeyName(e);\r\n            if (e.metaKey || e.ctrlKey || keyName && inArray(keyName, FIREFOX_CONTROL_KEYS) >= 0) {\r\n                return\r\n            }\r\n            e.preventDefault();\r\n            return false\r\n        }\r\n        this._keyPressed = true\r\n    },\r\n    _onMouseWheel: function(dxEvent) {\r\n        dxEvent.delta > 0 ? this._spinValueChange(1, dxEvent) : this._spinValueChange(-1, dxEvent)\r\n    },\r\n    _renderValue: function() {\r\n        var inputValue = this._input().val();\r\n        var value = this.option(\"value\");\r\n        if (!inputValue.length || Number(inputValue) !== value) {\r\n            this._forceValueRender();\r\n            this._toggleEmptinessEventHandler()\r\n        }\r\n        var valueText = typeUtils.isDefined(value) ? null : messageLocalization.format(\"dxNumberBox-noDataText\");\r\n        this.setAria({\r\n            valuenow: commonUtils.ensureDefined(value, \"\"),\r\n            valuetext: valueText\r\n        });\r\n        this.option(\"text\", this._input().val());\r\n        this._updateButtons();\r\n        return (new Deferred).resolve()\r\n    },\r\n    _forceValueRender: function() {\r\n        var value = this.option(\"value\");\r\n        var number = Number(value);\r\n        var formattedValue = isNaN(number) ? \"\" : this._applyDisplayValueFormatter(value);\r\n        this._renderDisplayText(formattedValue)\r\n    },\r\n    _applyDisplayValueFormatter: function(value) {\r\n        return this.option(\"displayValueFormatter\")(value)\r\n    },\r\n    _renderProps: function() {\r\n        this.callBase();\r\n        this._input().prop({\r\n            min: this.option(\"min\"),\r\n            max: this.option(\"max\"),\r\n            step: this.option(\"step\")\r\n        });\r\n        this.setAria({\r\n            valuemin: commonUtils.ensureDefined(this.option(\"min\"), \"\"),\r\n            valuemax: commonUtils.ensureDefined(this.option(\"max\"), \"\")\r\n        })\r\n    },\r\n    _spinButtonsPointerDownHandler: function() {\r\n        var $input = this._input();\r\n        if (!this.option(\"useLargeSpinButtons\") && domAdapter.getActiveElement() !== $input[0]) {\r\n            eventsEngine.trigger($input, \"focus\")\r\n        }\r\n    },\r\n    _spinUpChangeHandler: function(e) {\r\n        if (!this.option(\"readOnly\")) {\r\n            this._spinValueChange(1, e.event || e)\r\n        }\r\n    },\r\n    _spinDownChangeHandler: function(e) {\r\n        if (!this.option(\"readOnly\")) {\r\n            this._spinValueChange(-1, e.event || e)\r\n        }\r\n    },\r\n    _spinValueChange: function(sign, dxEvent) {\r\n        var step = parseFloat(this.option(\"step\"));\r\n        if (0 === step) {\r\n            return\r\n        }\r\n        var value = parseFloat(this._normalizeInputValue()) || 0;\r\n        value = this._correctRounding(value, step * sign);\r\n        var min = this.option(\"min\");\r\n        var max = this.option(\"max\");\r\n        if (void 0 !== min) {\r\n            value = Math.max(min, value)\r\n        }\r\n        if (void 0 !== max) {\r\n            value = Math.min(max, value)\r\n        }\r\n        this._saveValueChangeEvent(dxEvent);\r\n        this.option(\"value\", value)\r\n    },\r\n    _correctRounding: function(value, step) {\r\n        var regex = /[,.](.*)/;\r\n        var isFloatValue = regex.test(value);\r\n        var isFloatStep = regex.test(step);\r\n        if (isFloatValue || isFloatStep) {\r\n            var valueAccuracy = isFloatValue ? regex.exec(value)[0].length : 0;\r\n            var stepAccuracy = isFloatStep ? regex.exec(step)[0].length : 0;\r\n            var accuracy = math.max(valueAccuracy, stepAccuracy);\r\n            value = this._round(value + step, accuracy);\r\n            return value\r\n        }\r\n        return value + step\r\n    },\r\n    _round: function(value, precision) {\r\n        precision = precision || 0;\r\n        var multiplier = Math.pow(10, precision);\r\n        value *= multiplier;\r\n        value = Math.round(value) / multiplier;\r\n        return value\r\n    },\r\n    _renderValueChangeEvent: function() {\r\n        this.callBase();\r\n        var forceValueChangeEvent = eventUtils.addNamespace(\"focusout\", FORCE_VALUECHANGE_EVENT_NAMESPACE);\r\n        eventsEngine.off(this.element(), forceValueChangeEvent);\r\n        eventsEngine.on(this.element(), forceValueChangeEvent, this._forceRefreshInputValue.bind(this))\r\n    },\r\n    _forceRefreshInputValue: function() {\r\n        if (\"number\" === this.option(\"mode\")) {\r\n            return\r\n        }\r\n        var $input = this._input();\r\n        var formattedValue = this._applyDisplayValueFormatter(this.option(\"value\"));\r\n        $input.val(null);\r\n        $input.val(formattedValue)\r\n    },\r\n    _valueChangeEventHandler: function(e) {\r\n        var $input = this._input();\r\n        var inputValue = this._normalizeText();\r\n        var value = this._parseValue(inputValue);\r\n        var valueHasDigits = \".\" !== inputValue && \"-\" !== inputValue;\r\n        if (this._isValueValid() && !this._validateValue(value)) {\r\n            $input.val(this._applyDisplayValueFormatter(value));\r\n            return\r\n        }\r\n        if (valueHasDigits) {\r\n            this.callBase(e, isNaN(value) ? null : value)\r\n        }\r\n        this._applyValueBoundaries(inputValue, value);\r\n        this.validationRequest.fire({\r\n            value: value,\r\n            editor: this\r\n        })\r\n    },\r\n    _applyValueBoundaries: function(inputValue, parsedValue) {\r\n        var isValueIncomplete = this._isValueIncomplete(inputValue);\r\n        var isValueCorrect = this._isValueInRange(inputValue);\r\n        if (!isValueIncomplete && !isValueCorrect && null !== parsedValue) {\r\n            if (Number(inputValue) !== parsedValue) {\r\n                this._input().val(this._applyDisplayValueFormatter(parsedValue))\r\n            }\r\n        }\r\n    },\r\n    _replaceCommaWithPoint: function(value) {\r\n        return value.replace(\",\", \".\")\r\n    },\r\n    _inputIsInvalid: function() {\r\n        var isNumberMode = \"number\" === this.option(\"mode\");\r\n        var validityState = this._input().get(0).validity;\r\n        return isNumberMode && validityState && validityState.badInput\r\n    },\r\n    _renderDisplayText: function(text) {\r\n        if (this._inputIsInvalid()) {\r\n            return\r\n        }\r\n        this.callBase(text)\r\n    },\r\n    _isValueIncomplete: function(value) {\r\n        var incompleteRegex = /(^-$)|(^-?\\d*\\.$)|(\\d+e-?$)/i;\r\n        return incompleteRegex.test(value)\r\n    },\r\n    _isValueInRange: function(value) {\r\n        return mathUtils.inRange(value, this.option(\"min\"), this.option(\"max\"))\r\n    },\r\n    _isNumber: function(value) {\r\n        return null !== this._parseValue(value)\r\n    },\r\n    _validateValue: function(value) {\r\n        var inputValue = this._normalizeText();\r\n        var isValueValid = this._isValueValid();\r\n        var isValid = true;\r\n        var isNumber = this._isNumber(inputValue);\r\n        if (isNaN(Number(value))) {\r\n            isValid = false\r\n        }\r\n        if (!value && isValueValid) {\r\n            isValid = true\r\n        } else {\r\n            if (!isNumber && !isValueValid) {\r\n                isValid = false\r\n            }\r\n        }\r\n        this.option({\r\n            isValid: isValid,\r\n            validationError: isValid ? null : {\r\n                editorSpecific: true,\r\n                message: this.option(\"invalidValueMessage\")\r\n            }\r\n        });\r\n        return isValid\r\n    },\r\n    _normalizeInputValue: function() {\r\n        return this._parseValue(this._normalizeText())\r\n    },\r\n    _normalizeText: function() {\r\n        var value = this._input().val().trim();\r\n        return this._replaceCommaWithPoint(value)\r\n    },\r\n    _parseValue: function(value) {\r\n        var number = parseFloat(value);\r\n        if (isNaN(number)) {\r\n            return null\r\n        }\r\n        return mathUtils.fitIntoRange(number, this.option(\"min\"), this.option(\"max\"))\r\n    },\r\n    _clearValue: function() {\r\n        if (this._inputIsInvalid()) {\r\n            this._input().val(\"\");\r\n            this._validateValue()\r\n        }\r\n        this.callBase()\r\n    },\r\n    reset: function() {\r\n        if (null === this.option(\"value\")) {\r\n            this.option(\"text\", \"\");\r\n            this._renderValue()\r\n        } else {\r\n            this.option(\"value\", null)\r\n        }\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"value\":\r\n                this._validateValue(args.value);\r\n                this._setSubmitValue(args.value);\r\n                this.callBase(args);\r\n                this._resumeValueChangeAction();\r\n                break;\r\n            case \"step\":\r\n                this._renderProps();\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                this._renderProps();\r\n                this.option(\"value\", this._parseValue(this.option(\"value\")));\r\n                break;\r\n            case \"showSpinButtons\":\r\n            case \"useLargeSpinButtons\":\r\n                this._updateButtons([\"spins\"]);\r\n                break;\r\n            case \"invalidValueMessage\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nmodule.exports = NumberBoxBase;\r\n"]},"metadata":{},"sourceType":"module"}