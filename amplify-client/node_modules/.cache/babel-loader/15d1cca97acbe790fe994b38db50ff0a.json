{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.adaptivity.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _click = require(\"../../events/click\");\n\nvar _click2 = _interopRequireDefault(_click);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _guid = require(\"../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _form = require(\"../form\");\n\nvar _form2 = _interopRequireDefault(_form);\n\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\n\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar COLUMN_HEADERS_VIEW = \"columnHeadersView\";\nvar ROWS_VIEW = \"rowsView\";\nvar FOOTER_VIEW = \"footerView\";\nvar COLUMN_VIEWS = [COLUMN_HEADERS_VIEW, ROWS_VIEW, FOOTER_VIEW];\nvar ADAPTIVE_NAMESPACE = \"dxDataGridAdaptivity\";\nvar HIDDEN_COLUMNS_WIDTH = \"adaptiveHidden\";\nvar ADAPTIVE_ROW_TYPE = \"detailAdaptive\";\nvar FORM_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\nvar FORM_ITEM_MODIFIED = \"dx-item-modified\";\nvar HIDDEN_COLUMN_CLASS = \"hidden-column\";\nvar ADAPTIVE_COLUMN_BUTTON_CLASS = \"adaptive-more\";\nvar ADAPTIVE_COLUMN_NAME_CLASS = \"dx-command-adaptive\";\nvar COMMAND_ADAPTIVE_HIDDEN_CLASS = \"dx-command-adaptive-hidden\";\nvar ADAPTIVE_DETAIL_ROW_CLASS = \"dx-adaptive-detail-row\";\nvar ADAPTIVE_ITEM_TEXT_CLASS = \"dx-adaptive-item-text\";\nvar MASTER_DETAIL_CELL_CLASS = \"dx-master-detail-cell\";\nvar LAST_DATA_CELL_CLASS = \"dx-last-data-cell\";\nvar ADAPTIVE_COLUMN_NAME = \"adaptive\";\nvar EDIT_MODE_BATCH = \"batch\";\nvar EDIT_MODE_ROW = \"row\";\nvar EDIT_MODE_FORM = \"form\";\nvar EDIT_MODE_POPUP = \"popup\";\nvar REVERT_TOOLTIP_CLASS = \"revert-tooltip\";\n\nfunction getColumnId(that, column) {\n  return that._columnsController.getColumnId(column);\n}\n\nfunction getDataCellElements($row) {\n  return $row.find(\"td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])\");\n}\n\nfunction adaptiveCellTemplate(container, options) {\n  var $adaptiveColumnButton;\n  var $container = (0, _renderer2.default)(container);\n  var adaptiveColumnsController = options.component.getController(\"adaptiveColumns\");\n\n  if (\"data\" === options.rowType) {\n    $adaptiveColumnButton = (0, _renderer2.default)(\"<span>\").addClass(adaptiveColumnsController.addWidgetPrefix(ADAPTIVE_COLUMN_BUTTON_CLASS));\n\n    _events_engine2.default.on($adaptiveColumnButton, _utils2.default.addNamespace(_click2.default.name, ADAPTIVE_NAMESPACE), adaptiveColumnsController.createAction(function () {\n      adaptiveColumnsController.toggleExpandAdaptiveDetailRow(options.key);\n    }));\n\n    $adaptiveColumnButton.appendTo($container);\n  } else {\n    _uiGrid_core4.default.setEmptyText($container);\n  }\n}\n\nvar AdaptiveColumnsController = _uiGrid_core2.default.ViewController.inherit({\n  _isRowEditMode: function _isRowEditMode() {\n    var editMode = this._getEditMode();\n\n    return editMode === EDIT_MODE_ROW;\n  },\n  _isItemModified: function _isItemModified(item, cellOptions) {\n    var columnIndex = this._columnsController.getVisibleIndex(item.column.index);\n\n    var rowIndex = this._dataController.getRowIndexByKey(cellOptions.key);\n\n    var row = this._dataController.items()[rowIndex + 1];\n\n    return row && row.modifiedValues && _type2.default.isDefined(row.modifiedValues[columnIndex]);\n  },\n  _renderFormViewTemplate: function _renderFormViewTemplate(item, cellOptions, $container) {\n    var that = this;\n    var column = item.column;\n    var focusAction = that.createAction(function () {\n      _events_engine2.default.trigger($container, _click2.default.name);\n    });\n    var container;\n    var value = column.calculateCellValue(cellOptions.data);\n\n    var displayValue = _uiGrid_core4.default.getDisplayValue(column, value, cellOptions.data, cellOptions.rowType);\n\n    var text = _uiGrid_core4.default.formatValue(displayValue, column);\n\n    var isCellOrBatchEditMode = this._editingController.isCellOrBatchEditMode();\n\n    if (column.allowEditing && that.getController(\"keyboardNavigation\").isKeyboardEnabled()) {\n      $container.attr(\"tabIndex\", that.option(\"tabIndex\"));\n\n      if (isCellOrBatchEditMode) {\n        _events_engine2.default.off($container, \"focus\", focusAction);\n\n        _events_engine2.default.on($container, \"focus\", focusAction);\n      }\n    }\n\n    if (column.cellTemplate) {\n      var templateOptions = (0, _extend.extend)({}, cellOptions, {\n        value: value,\n        displayValue: displayValue,\n        text: text,\n        column: column\n      });\n\n      that._rowsView.renderTemplate($container, column.cellTemplate, templateOptions, !!$container.closest((0, _window.getWindow)().document).length);\n    } else {\n      container = $container.get(0);\n\n      if (column.encodeHtml) {\n        container.textContent = text;\n      } else {\n        container.innerHTML = text;\n      }\n\n      $container.addClass(ADAPTIVE_ITEM_TEXT_CLASS);\n\n      if (!_type2.default.isDefined(text) || \"\" === text) {\n        $container.html(\"&nbsp;\");\n      }\n\n      if (!that._isRowEditMode()) {\n        if (that._isItemModified(item, cellOptions)) {\n          $container.addClass(FORM_ITEM_MODIFIED);\n        }\n      }\n    }\n\n    that.getView(\"rowsView\")._cellPrepared($container, cellOptions);\n  },\n  _getTemplate: function _getTemplate(item, cellOptions) {\n    var that = this;\n    var column = item.column;\n    var editingController = this.getController(\"editing\");\n    return function (options, container) {\n      var $container = (0, _renderer2.default)(container);\n\n      var columnIndex = that._columnsController.getVisibleIndex(column.visibleIndex);\n\n      var templateOptions = (0, _extend.extend)({}, cellOptions);\n\n      var renderFormTemplate = function renderFormTemplate() {\n        var isItemEdited = that._isItemEdited(item);\n\n        templateOptions.value = cellOptions.row.values[columnIndex];\n\n        if (isItemEdited || column.showEditorAlways) {\n          editingController.renderFormEditTemplate(templateOptions, item, options.component, $container, !isItemEdited);\n        } else {\n          templateOptions.column = column;\n          templateOptions.columnIndex = columnIndex;\n\n          that._renderFormViewTemplate(item, templateOptions, $container);\n        }\n      };\n\n      renderFormTemplate();\n      templateOptions.watch && templateOptions.watch(function () {\n        return {\n          isItemEdited: that._isItemEdited(item),\n          value: cellOptions.row.values[columnIndex]\n        };\n      }, function () {\n        $container.contents().remove();\n        $container.removeClass(ADAPTIVE_ITEM_TEXT_CLASS);\n        renderFormTemplate();\n      });\n    };\n  },\n  _isVisibleColumnsValid: function _isVisibleColumnsValid(visibleColumns) {\n    var getCommandColumnsCount = function getCommandColumnsCount() {\n      var result = 0;\n      var j;\n      var visibleColumn;\n\n      for (j = 0; j < visibleColumns.length; j++) {\n        visibleColumn = visibleColumns[j];\n\n        if (visibleColumn.command) {\n          result++;\n        }\n      }\n\n      return result;\n    };\n\n    if (visibleColumns < 2) {\n      return false;\n    }\n\n    if (visibleColumns.length - getCommandColumnsCount() <= 1) {\n      return false;\n    }\n\n    return true;\n  },\n  _calculatePercentWidths: function _calculatePercentWidths(widths, visibleColumns) {\n    var that = this;\n    var percentWidths = 0;\n    visibleColumns.forEach(function (item, index) {\n      if (widths[index] !== HIDDEN_COLUMNS_WIDTH) {\n        percentWidths += that._getItemPercentWidth(item);\n      }\n    });\n    return percentWidths;\n  },\n  _isPercentWidth: function _isPercentWidth(width) {\n    return _type2.default.isString(width) && \"%\" === width.slice(-1);\n  },\n  _isColumnHidden: function _isColumnHidden(column) {\n    return this._hiddenColumns.filter(function (hiddenColumn) {\n      return hiddenColumn.index === column.index;\n    }).length > 0;\n  },\n  _getAverageColumnsWidth: function _getAverageColumnsWidth(containerWidth, columns, columnsCanFit) {\n    var that = this;\n    var fixedColumnsWidth = 0;\n    var columnsWithoutFixedWidthCount = 0;\n    columns.forEach(function (column) {\n      if (!that._isColumnHidden(column)) {\n        var width = column.width;\n\n        if (_type2.default.isDefined(width) && !isNaN(parseFloat(width))) {\n          fixedColumnsWidth += that._isPercentWidth(width) ? that._calculatePercentWidth({\n            visibleIndex: column.visibleIndex,\n            columnsCount: columns.length,\n            columnsCanFit: columnsCanFit,\n            bestFitWidth: column.bestFitWidth,\n            columnWidth: width,\n            containerWidth: containerWidth\n          }) : parseFloat(width);\n        } else {\n          columnsWithoutFixedWidthCount++;\n        }\n      }\n    });\n    return (containerWidth - fixedColumnsWidth) / columnsWithoutFixedWidthCount;\n  },\n  _calculateColumnWidth: function _calculateColumnWidth(column, containerWidth, contentColumns, columnsCanFit) {\n    var columnId = getColumnId(this, column);\n\n    var widthOption = this._columnsController.columnOption(columnId, \"width\");\n\n    var bestFitWidth = this._columnsController.columnOption(columnId, \"bestFitWidth\");\n\n    var columnsCount = contentColumns.length;\n    var colWidth;\n\n    if (widthOption && \"auto\" !== widthOption) {\n      if (this._isPercentWidth(widthOption)) {\n        colWidth = this._calculatePercentWidth({\n          visibleIndex: column.visibleIndex,\n          columnsCount: columnsCount,\n          columnsCanFit: columnsCanFit,\n          bestFitWidth: bestFitWidth,\n          columnWidth: widthOption,\n          containerWidth: containerWidth\n        });\n      } else {\n        return widthOption;\n      }\n    } else {\n      var columnAutoWidth = this.option(\"columnAutoWidth\");\n      colWidth = columnAutoWidth || !!column.command ? bestFitWidth : this._getAverageColumnsWidth(containerWidth, contentColumns, columnsCanFit);\n    }\n\n    return colWidth;\n  },\n  _calculatePercentWidth: function _calculatePercentWidth(options) {\n    var columnFitted = options.visibleIndex < options.columnsCount - 1 && options.columnsCanFit;\n    var partialWidth = options.containerWidth * parseFloat(options.columnWidth) / 100;\n    var resultWidth = options.columnsCanFit && partialWidth < options.bestFitWidth ? options.bestFitWidth : partialWidth;\n    return columnFitted ? options.containerWidth * parseFloat(options.columnWidth) / 100 : resultWidth;\n  },\n  _getNotTruncatedColumnWidth: function _getNotTruncatedColumnWidth(column, containerWidth, contentColumns, columnsCanFit) {\n    var columnId = getColumnId(this, column);\n\n    var widthOption = this._columnsController.columnOption(columnId, \"width\");\n\n    var bestFitWidth = this._columnsController.columnOption(columnId, \"bestFitWidth\");\n\n    var colWidth;\n\n    if (widthOption && \"auto\" !== widthOption && !this._isPercentWidth(widthOption)) {\n      return parseFloat(widthOption);\n    }\n\n    colWidth = this._calculateColumnWidth(column, containerWidth, contentColumns, columnsCanFit);\n    return colWidth < bestFitWidth ? null : colWidth;\n  },\n  _getItemPercentWidth: function _getItemPercentWidth(item) {\n    var result = 0;\n\n    if (item.width && this._isPercentWidth(item.width)) {\n      result = parseFloat(item.width);\n    }\n\n    return result;\n  },\n  _getCommandColumnsWidth: function _getCommandColumnsWidth() {\n    var that = this;\n\n    var columns = that._columnsController.getVisibleColumns();\n\n    var colWidth = 0;\n    (0, _iterator.each)(columns, function (index, column) {\n      if (column.index < 0 || column.command) {\n        colWidth += that._columnsController.columnOption(getColumnId(that, column), \"bestFitWidth\") || 0;\n      }\n    });\n    return colWidth;\n  },\n  _isItemEdited: function _isItemEdited(item) {\n    if (this.isFormEditMode()) {\n      return false;\n    }\n\n    if (this._isRowEditMode()) {\n      var editRowKey = this._editingController.getEditRowKey();\n\n      if ((0, _common.equalByValue)(editRowKey, this._dataController.adaptiveExpandedKey())) {\n        return true;\n      }\n    } else {\n      var rowIndex = this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey()) + 1;\n\n      var columnIndex = this._columnsController.getVisibleIndex(item.column.index);\n\n      return this._editingController.isEditCell(rowIndex, columnIndex);\n    }\n  },\n  _getFormItemsByHiddenColumns: function _getFormItemsByHiddenColumns(hiddenColumns) {\n    var items = [];\n    (0, _iterator.each)(hiddenColumns, function (_, column) {\n      items.push({\n        column: column,\n        name: column.name,\n        dataField: column.dataField,\n        visibleIndex: column.visibleIndex\n      });\n    });\n    return items;\n  },\n  _getAdaptiveColumnVisibleIndex: function _getAdaptiveColumnVisibleIndex(visibleColumns) {\n    var i;\n    var column;\n\n    for (i = 0; i < visibleColumns.length; i++) {\n      column = visibleColumns[i];\n\n      if (column.command === ADAPTIVE_COLUMN_NAME) {\n        return i;\n      }\n    }\n  },\n  _hideAdaptiveColumn: function _hideAdaptiveColumn(resultWidths, visibleColumns) {\n    var visibleIndex = this._getAdaptiveColumnVisibleIndex(visibleColumns);\n\n    if (_type2.default.isDefined(visibleIndex)) {\n      resultWidths[visibleIndex] = HIDDEN_COLUMNS_WIDTH;\n\n      this._addCssClassToColumn(COMMAND_ADAPTIVE_HIDDEN_CLASS, visibleIndex);\n    }\n  },\n  _removeCssClassFromColumn: function _removeCssClassFromColumn(cssClassName) {\n    var i;\n    var view;\n    var $cells;\n\n    for (i = 0; i < COLUMN_VIEWS.length; i++) {\n      view = this.getView(COLUMN_VIEWS[i]);\n\n      if (view && view.isVisible() && view.element()) {\n        $cells = view.element().find(\".\" + cssClassName);\n        $cells.removeClass(cssClassName);\n      }\n    }\n  },\n  _removeCssClassesFromColumns: function _removeCssClassesFromColumns() {\n    this._removeCssClassFromColumn(COMMAND_ADAPTIVE_HIDDEN_CLASS);\n\n    this._removeCssClassFromColumn(this.addWidgetPrefix(HIDDEN_COLUMN_CLASS));\n  },\n  _isCellValid: function _isCellValid($cell) {\n    return $cell && $cell.length && !$cell.hasClass(MASTER_DETAIL_CELL_CLASS);\n  },\n  _addCssClassToColumn: function _addCssClassToColumn(cssClassName, visibleIndex) {\n    var that = this;\n    COLUMN_VIEWS.forEach(function (viewName) {\n      var view = that.getView(viewName);\n      view && that._addCssClassToViewColumn(view, cssClassName, visibleIndex);\n    });\n  },\n  _addCssClassToViewColumn: function _addCssClassToViewColumn(view, cssClassName, visibleIndex) {\n    var viewName = view.name;\n    var rowsCount;\n    var rowIndex;\n    var $cellElement;\n    var currentVisibleIndex;\n\n    var column = this._columnsController.getVisibleColumns()[visibleIndex];\n\n    var editFormRowIndex = this._editingController && this._editingController.getEditFormRowIndex();\n\n    if (view && view.isVisible() && column) {\n      rowsCount = view.getRowsCount();\n\n      var $rowElements = view._getRowElements();\n\n      for (rowIndex = 0; rowIndex < rowsCount; rowIndex++) {\n        if (rowIndex !== editFormRowIndex || viewName !== ROWS_VIEW) {\n          currentVisibleIndex = viewName === COLUMN_HEADERS_VIEW ? this._columnsController.getVisibleIndex(column.index, rowIndex) : visibleIndex;\n\n          if (currentVisibleIndex >= 0) {\n            $cellElement = $rowElements.eq(rowIndex).children().eq(currentVisibleIndex);\n            this._isCellValid($cellElement) && $cellElement.addClass(cssClassName);\n          }\n        }\n      }\n    }\n  },\n  _getEditMode: function _getEditMode() {\n    return this._editingController.getEditMode();\n  },\n  isFormEditMode: function isFormEditMode() {\n    var editMode = this._getEditMode();\n\n    return editMode === EDIT_MODE_FORM || editMode === EDIT_MODE_POPUP;\n  },\n  hideRedundantColumns: function hideRedundantColumns(resultWidths, visibleColumns, hiddenQueue) {\n    var that = this;\n    var visibleColumn;\n    this._hiddenColumns = [];\n\n    if (that._isVisibleColumnsValid(visibleColumns) && hiddenQueue.length) {\n      var totalWidth = 0;\n      var percentWidths;\n      var $rootElement = that.component.$element();\n\n      var rootElementWidth = $rootElement.width() - that._getCommandColumnsWidth();\n\n      var getVisibleContentColumns = function () {\n        var _this = this;\n\n        return visibleColumns.filter(function (item) {\n          return !item.command && 0 === _this._hiddenColumns.filter(function (i) {\n            return i.dataField === item.dataField;\n          }).length;\n        });\n      }.bind(this);\n\n      var visibleContentColumns = getVisibleContentColumns();\n      var contentColumnsCount = visibleContentColumns.length;\n      var columnsCanFit;\n      var i;\n      var hasHiddenColumns;\n      var needHideColumn;\n\n      do {\n        needHideColumn = false;\n        totalWidth = 0;\n        percentWidths = that._calculatePercentWidths(resultWidths, visibleColumns);\n        columnsCanFit = percentWidths < 100 && 0 !== percentWidths;\n\n        for (i = 0; i < visibleColumns.length; i++) {\n          visibleColumn = visibleColumns[i];\n\n          var columnWidth = that._getNotTruncatedColumnWidth(visibleColumn, rootElementWidth, visibleContentColumns, columnsCanFit);\n\n          var columnId = getColumnId(that, visibleColumn);\n\n          var widthOption = that._columnsController.columnOption(columnId, \"width\");\n\n          var minWidth = that._columnsController.columnOption(columnId, \"minWidth\");\n\n          var columnBestFitWidth = that._columnsController.columnOption(columnId, \"bestFitWidth\");\n\n          if (resultWidths[i] === HIDDEN_COLUMNS_WIDTH) {\n            hasHiddenColumns = true;\n            continue;\n          }\n\n          if (!columnWidth && !visibleColumn.command && !visibleColumn.fixed) {\n            needHideColumn = true;\n            break;\n          }\n\n          if (!widthOption || \"auto\" === widthOption) {\n            columnWidth = Math.max(columnBestFitWidth || 0, minWidth || 0);\n          }\n\n          if (visibleColumn.command !== ADAPTIVE_COLUMN_NAME || hasHiddenColumns) {\n            totalWidth += columnWidth;\n          }\n        }\n\n        needHideColumn = needHideColumn || totalWidth > $rootElement.width();\n\n        if (needHideColumn) {\n          var column = hiddenQueue.pop();\n\n          var visibleIndex = that._columnsController.getVisibleIndex(column.index);\n\n          rootElementWidth += that._calculateColumnWidth(column, rootElementWidth, visibleContentColumns, columnsCanFit);\n\n          that._addCssClassToColumn(that.addWidgetPrefix(HIDDEN_COLUMN_CLASS), visibleIndex);\n\n          resultWidths[visibleIndex] = HIDDEN_COLUMNS_WIDTH;\n\n          this._hiddenColumns.push(column);\n\n          visibleContentColumns = getVisibleContentColumns();\n        }\n      } while (needHideColumn && visibleContentColumns.length > 1 && hiddenQueue.length);\n\n      if (contentColumnsCount === visibleContentColumns.length) {\n        that._hideAdaptiveColumn(resultWidths, visibleColumns);\n      }\n    } else {\n      that._hideAdaptiveColumn(resultWidths, visibleColumns);\n    }\n  },\n  getItemContentByColumnIndex: function getItemContentByColumnIndex(visibleColumnIndex) {\n    var $itemContent;\n    var i;\n    var item;\n\n    for (i = 0; i < this._$itemContents.length; i++) {\n      $itemContent = this._$itemContents.eq(i);\n      item = $itemContent.data(\"dx-form-item\");\n\n      if (item && item.column && this._columnsController.getVisibleIndex(item.column.index) === visibleColumnIndex) {\n        return $itemContent;\n      }\n    }\n  },\n  toggleExpandAdaptiveDetailRow: function toggleExpandAdaptiveDetailRow(key, alwaysExpanded) {\n    if (!(this.isFormEditMode() && this._editingController.isEditing())) {\n      this.getController(\"data\").toggleExpandAdaptiveDetailRow(key, alwaysExpanded);\n    }\n  },\n  createFormByHiddenColumns: function createFormByHiddenColumns(container, options) {\n    var that = this;\n    var $container = (0, _renderer2.default)(container);\n    var userFormOptions = {\n      items: that._getFormItemsByHiddenColumns(that._hiddenColumns),\n      formID: \"dx-\" + new _guid2.default()\n    };\n    var defaultFormOptions = _themes2.default.isMaterial() ? {\n      colCount: 2\n    } : {};\n    this.executeAction(\"onAdaptiveDetailRowPreparing\", {\n      formOptions: userFormOptions\n    });\n    that._$itemContents = null;\n    that._form = that._createComponent((0, _renderer2.default)(\"<div>\").appendTo($container), _form2.default, (0, _extend.extend)(defaultFormOptions, userFormOptions, {\n      customizeItem: function customizeItem(item) {\n        var column = item.column || that._columnsController.columnOption(item.name || item.dataField);\n\n        if (column) {\n          item.label = item.label || {};\n          item.label.text = item.label.text || column.caption;\n          item.column = column;\n          item.template = that._getTemplate(item, options, that.updateForm.bind(that));\n        }\n\n        userFormOptions.customizeItem && userFormOptions.customizeItem.call(this, item);\n      },\n      onContentReady: function onContentReady(e) {\n        userFormOptions.onContentReady && userFormOptions.onContentReady.call(this, e);\n        that._$itemContents = $container.find(\".\" + FORM_ITEM_CONTENT_CLASS);\n      }\n    }));\n  },\n  hasAdaptiveDetailRowExpanded: function hasAdaptiveDetailRowExpanded() {\n    return _type2.default.isDefined(this._dataController.adaptiveExpandedKey());\n  },\n  updateForm: function updateForm(hiddenColumns) {\n    if (this.hasAdaptiveDetailRowExpanded()) {\n      if (this._form && _type2.default.isDefined(this._form._contentReadyAction)) {\n        if (hiddenColumns && hiddenColumns.length) {\n          this._form.option(\"items\", this._getFormItemsByHiddenColumns(hiddenColumns));\n        } else {\n          this._form.repaint();\n        }\n      }\n    }\n  },\n  updateHidingQueue: function updateHidingQueue(columns) {\n    var that = this;\n    var hideableColumns = columns.filter(function (column) {\n      return column.visible && !column.type && !column.fixed && !(_type2.default.isDefined(column.groupIndex) && column.groupIndex >= 0);\n    });\n    var columnsHasHidingPriority;\n    var i;\n    that._hidingColumnsQueue = [];\n\n    if (that.option(\"allowColumnResizing\") && \"widget\" === that.option(\"columnResizingMode\")) {\n      return that._hidingColumnsQueue;\n    }\n\n    for (i = 0; i < hideableColumns.length; i++) {\n      if (_type2.default.isDefined(hideableColumns[i].hidingPriority) && hideableColumns[i].hidingPriority >= 0) {\n        columnsHasHidingPriority = true;\n        that._hidingColumnsQueue[hideableColumns[i].hidingPriority] = hideableColumns[i];\n      }\n    }\n\n    if (columnsHasHidingPriority) {\n      that._hidingColumnsQueue.reverse();\n    } else {\n      if (that.option(\"columnHidingEnabled\")) {\n        for (i = 0; i < hideableColumns.length; i++) {\n          var visibleIndex = that._columnsController.getVisibleIndex(hideableColumns[i].index);\n\n          that._hidingColumnsQueue[visibleIndex] = hideableColumns[i];\n        }\n      }\n    }\n\n    that._hidingColumnsQueue = that._hidingColumnsQueue.filter(Object);\n    return that._hidingColumnsQueue;\n  },\n  getHiddenColumns: function getHiddenColumns() {\n    return this._hiddenColumns;\n  },\n  hasHiddenColumns: function hasHiddenColumns() {\n    return this._hiddenColumns.length > 0;\n  },\n  getHidingColumnsQueue: function getHidingColumnsQueue() {\n    return this._hidingColumnsQueue;\n  },\n  init: function init() {\n    var that = this;\n    that._columnsController = that.getController(\"columns\");\n    that._dataController = that.getController(\"data\");\n    that._rowsView = that.getView(\"rowsView\");\n\n    that._columnsController.addCommandColumn({\n      type: ADAPTIVE_COLUMN_NAME,\n      command: ADAPTIVE_COLUMN_NAME,\n      visible: true,\n      adaptiveHidden: true,\n      cssClass: ADAPTIVE_COLUMN_NAME_CLASS,\n      alignment: \"center\",\n      width: \"auto\",\n      cellTemplate: adaptiveCellTemplate,\n      fixedPosition: \"right\"\n    });\n\n    that._columnsController.columnsChanged.add(function () {\n      var isAdaptiveVisible = !!that.updateHidingQueue(that._columnsController.getColumns()).length;\n\n      that._columnsController.columnOption(\"command:adaptive\", \"adaptiveHidden\", !isAdaptiveVisible, true);\n    });\n\n    that._editingController = that.getController(\"editing\");\n    that._hidingColumnsQueue = [];\n    that._hiddenColumns = [];\n    that.createAction(\"onAdaptiveDetailRowPreparing\");\n    that.callBase();\n  },\n  optionChanged: function optionChanged(args) {\n    if (\"columnHidingEnabled\" === args.name) {\n      this._columnsController.columnOption(\"command:adaptive\", \"adaptiveHidden\", !args.value);\n    }\n\n    this.callBase(args);\n  },\n  publicMethods: function publicMethods() {\n    return [\"isAdaptiveDetailRowExpanded\", \"expandAdaptiveDetailRow\", \"collapseAdaptiveDetailRow\"];\n  },\n  isAdaptiveDetailRowExpanded: function isAdaptiveDetailRowExpanded(key) {\n    return this._dataController.adaptiveExpandedKey() && (0, _common.equalByValue)(this._dataController.adaptiveExpandedKey(), key);\n  },\n  expandAdaptiveDetailRow: function expandAdaptiveDetailRow(key) {\n    if (!this.hasAdaptiveDetailRowExpanded()) {\n      this.toggleExpandAdaptiveDetailRow(key);\n    }\n  },\n  collapseAdaptiveDetailRow: function collapseAdaptiveDetailRow() {\n    if (this.hasAdaptiveDetailRowExpanded()) {\n      this.toggleExpandAdaptiveDetailRow();\n    }\n  }\n});\n\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      columnHidingEnabled: false,\n      onAdaptiveDetailRowPreparing: null\n    };\n  },\n  controllers: {\n    adaptiveColumns: AdaptiveColumnsController\n  },\n  extenders: {\n    views: {\n      rowsView: {\n        _getCellTemplate: function _getCellTemplate(options) {\n          var that = this;\n          var column = options.column;\n\n          if (options.rowType === ADAPTIVE_ROW_TYPE && \"detail\" === column.command) {\n            return function (container, options) {\n              that._adaptiveColumnsController.createFormByHiddenColumns((0, _renderer2.default)(container), options);\n            };\n          }\n\n          return that.callBase(options);\n        },\n        _createRow: function _createRow(row) {\n          var $row = this.callBase(row);\n\n          if (row && row.rowType === ADAPTIVE_ROW_TYPE && row.key === this._dataController.adaptiveExpandedKey()) {\n            $row.addClass(ADAPTIVE_DETAIL_ROW_CLASS);\n          }\n\n          return $row;\n        },\n        _renderCells: function _renderCells($row, options) {\n          this.callBase($row, options);\n\n          var hidingColumnsQueueLength = this._adaptiveColumnsController.getHidingColumnsQueue().length;\n\n          var hiddenColumnsLength = this._adaptiveColumnsController.getHiddenColumns().length;\n\n          if (hidingColumnsQueueLength && !hiddenColumnsLength) {\n            getDataCellElements($row).last().addClass(LAST_DATA_CELL_CLASS);\n          }\n        },\n        _getColumnIndexByElementCore: function _getColumnIndexByElementCore($element) {\n          var $itemContent = $element.closest(\".\" + FORM_ITEM_CONTENT_CLASS);\n\n          if ($itemContent.length && $itemContent.closest(this.component.$element()).length) {\n            var formItem = $itemContent.length ? $itemContent.first().data(\"dx-form-item\") : null;\n            return formItem && formItem.column && this._columnsController.getVisibleIndex(formItem.column.index);\n          } else {\n            return this.callBase($element);\n          }\n        },\n        _cellPrepared: function _cellPrepared($cell, options) {\n          this.callBase.apply(this, arguments);\n\n          if (options.row.rowType !== ADAPTIVE_ROW_TYPE && options.column.visibleWidth === HIDDEN_COLUMNS_WIDTH) {\n            $cell.addClass(this.addWidgetPrefix(HIDDEN_COLUMN_CLASS));\n          }\n        },\n        _getCellElement: function _getCellElement(rowIndex, columnIdentifier) {\n          var item = this._dataController.items()[rowIndex];\n\n          if (item && item.rowType === ADAPTIVE_ROW_TYPE) {\n            return this._adaptiveColumnsController.getItemContentByColumnIndex(columnIdentifier);\n          } else {\n            return this.callBase(rowIndex, columnIdentifier);\n          }\n        },\n        getContextMenuItems: function getContextMenuItems(options) {\n          if (options.row && \"detailAdaptive\" === options.row.rowType) {\n            var view = this.component.getView(\"columnHeadersView\");\n            var formItem = (0, _renderer2.default)(options.targetElement).closest(\".dx-field-item-label\").next().data(\"dx-form-item\");\n            options.column = formItem ? formItem.column : options.column;\n            return view.getContextMenuItems && view.getContextMenuItems(options);\n          }\n\n          return this.callBase && this.callBase(options);\n        },\n        isClickableElement: function isClickableElement($target) {\n          var isClickable = this.callBase ? this.callBase($target) : false;\n          return isClickable || !!$target.closest(\".\" + ADAPTIVE_COLUMN_NAME_CLASS).length;\n        },\n        init: function init() {\n          this.callBase();\n          this._adaptiveColumnsController = this.getController(\"adaptiveColumns\");\n        }\n      }\n    },\n    controllers: {\n      \"export\": {\n        _updateColumnWidth: function _updateColumnWidth(column, width) {\n          this.callBase(column, column.visibleWidth === HIDDEN_COLUMNS_WIDTH ? column.bestFitWidth : width);\n        }\n      },\n      columnsResizer: {\n        _pointCreated: function _pointCreated(point, cellsLength, columns) {\n          var result = this.callBase(point, cellsLength, columns);\n          var currentColumn = columns[point.columnIndex] || {};\n\n          var nextColumnIndex = this._getNextColumnIndex(point.columnIndex);\n\n          var nextColumn = columns[nextColumnIndex] || {};\n          var hasHiddenColumnsOnly = nextColumnIndex !== point.columnIndex + 1 && nextColumn.command;\n          var hasAdaptiveHiddenWidth = currentColumn.visibleWidth === HIDDEN_COLUMNS_WIDTH || hasHiddenColumnsOnly;\n          return result || hasAdaptiveHiddenWidth;\n        },\n        _getNextColumnIndex: function _getNextColumnIndex(currentColumnIndex) {\n          var visibleColumns = this._columnsController.getVisibleColumns();\n\n          var index = this.callBase(currentColumnIndex);\n\n          while (visibleColumns[index] && visibleColumns[index].visibleWidth === HIDDEN_COLUMNS_WIDTH) {\n            index++;\n          }\n\n          return index;\n        }\n      },\n      draggingHeader: {\n        _pointCreated: function _pointCreated(point, columns, location, sourceColumn) {\n          var result = this.callBase(point, columns, location, sourceColumn);\n          var column = columns[point.columnIndex - 1] || {};\n          var hasAdaptiveHiddenWidth = column.visibleWidth === HIDDEN_COLUMNS_WIDTH;\n          return result || hasAdaptiveHiddenWidth;\n        }\n      },\n      editing: {\n        _isRowEditMode: function _isRowEditMode() {\n          return this.getEditMode() === EDIT_MODE_ROW;\n        },\n        _getFormEditItemTemplate: function _getFormEditItemTemplate(cellOptions, column) {\n          if (this.getEditMode() !== EDIT_MODE_ROW && \"detailAdaptive\" === cellOptions.rowType) {\n            cellOptions.columnIndex = this._columnsController.getVisibleIndex(column.index);\n            return this.getColumnTemplate(cellOptions);\n          }\n\n          return this.callBase(cellOptions, column);\n        },\n        _closeEditItem: function _closeEditItem($targetElement) {\n          var $itemContents = $targetElement.closest(\".\" + FORM_ITEM_CONTENT_CLASS);\n          var rowIndex = this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey()) + 1;\n          var formItem = $itemContents.length ? $itemContents.first().data(\"dx-form-item\") : null;\n\n          var columnIndex = formItem && formItem.column && this._columnsController.getVisibleIndex(formItem.column.index);\n\n          if (!this.isEditCell(rowIndex, columnIndex)) {\n            this.callBase($targetElement);\n          }\n        },\n        _beforeUpdateItems: function _beforeUpdateItems(rowIndices, rowIndex) {\n          if (!this._adaptiveController.isFormEditMode() && this._adaptiveController.hasHiddenColumns()) {\n            var items = this._dataController.items();\n\n            var item = items[rowIndex];\n\n            var oldExpandRowIndex = _uiGrid_core4.default.getIndexByKey(this._dataController.adaptiveExpandedKey(), items);\n\n            this._isForceRowAdaptiveExpand = !this._adaptiveController.hasAdaptiveDetailRowExpanded();\n\n            if (oldExpandRowIndex >= 0 && rowIndex > oldExpandRowIndex) {\n              this._editRowIndex--;\n            }\n\n            if (oldExpandRowIndex >= 0) {\n              rowIndices.push(oldExpandRowIndex + 1);\n            }\n\n            rowIndices.push(rowIndex + 1);\n\n            this._dataController.adaptiveExpandedKey(item.key);\n          }\n        },\n        _afterInsertRow: function _afterInsertRow(options) {\n          this.callBase(options);\n\n          if (this._adaptiveController.hasHiddenColumns()) {\n            this._adaptiveController.toggleExpandAdaptiveDetailRow(options.key, this.isRowEditMode());\n\n            this._isForceRowAdaptiveExpand = true;\n          }\n        },\n        _collapseAdaptiveDetailRow: function _collapseAdaptiveDetailRow() {\n          if (this._isRowEditMode() && this._isForceRowAdaptiveExpand) {\n            this._adaptiveController.collapseAdaptiveDetailRow();\n\n            this._isForceRowAdaptiveExpand = false;\n          }\n        },\n        _cancelEditAdaptiveDetailRow: function _cancelEditAdaptiveDetailRow() {\n          if (this._adaptiveController.hasHiddenColumns()) {\n            this._collapseAdaptiveDetailRow();\n          }\n        },\n        _afterSaveEditData: function _afterSaveEditData() {\n          var _this2 = this;\n\n          this.callBase();\n          var deferred = new _deferred.Deferred();\n\n          if (this._isRowEditMode() && this._adaptiveController.hasHiddenColumns()) {\n            (0, _deferred.when)(this.getController(\"validating\").validate(true)).done(function (isValid) {\n              if (isValid) {\n                _this2._cancelEditAdaptiveDetailRow();\n              }\n\n              deferred.resolve();\n            });\n          } else {\n            deferred.resolve();\n          }\n\n          return deferred.promise();\n        },\n        _beforeCancelEditData: function _beforeCancelEditData() {\n          this.callBase();\n\n          this._cancelEditAdaptiveDetailRow();\n        },\n        _getRowIndicesForCascadeUpdating: function _getRowIndicesForCascadeUpdating(row) {\n          var rowIndices = this.callBase.apply(this, arguments);\n\n          if (this._adaptiveController.isAdaptiveDetailRowExpanded(row.key)) {\n            rowIndices.push(row.rowType === ADAPTIVE_ROW_TYPE ? row.rowIndex - 1 : row.rowIndex + 1);\n          }\n\n          return rowIndices;\n        },\n        _beforeCloseEditCellInBatchMode: function _beforeCloseEditCellInBatchMode(rowIndices) {\n          var expandedKey = this._dataController._adaptiveExpandedKey;\n          var rowIndex;\n\n          if (expandedKey) {\n            rowIndex = _uiGrid_core4.default.getIndexByKey(expandedKey, this._dataController.items());\n\n            if (rowIndex > -1) {\n              rowIndices.unshift(rowIndex);\n            }\n          }\n        },\n        editRow: function editRow(rowIndex) {\n          if (this._adaptiveController.isFormEditMode()) {\n            this._adaptiveController.collapseAdaptiveDetailRow();\n          }\n\n          this.callBase(rowIndex);\n        },\n        deleteRow: function deleteRow(rowIndex) {\n          var rowKey = this._dataController.getKeyByRowIndex(rowIndex);\n\n          if (this.getEditMode() === EDIT_MODE_BATCH && this._adaptiveController.isAdaptiveDetailRowExpanded(rowKey)) {\n            this._adaptiveController.collapseAdaptiveDetailRow();\n          }\n\n          this.callBase(rowIndex);\n        },\n        init: function init() {\n          this.callBase();\n          this._adaptiveController = this.getController(\"adaptiveColumns\");\n        }\n      },\n      resizing: {\n        _needBestFit: function _needBestFit() {\n          return this.callBase() || !!this._adaptiveColumnsController.getHidingColumnsQueue().length;\n        },\n        _updateScrollableForIE: function _updateScrollableForIE() {\n          var that = this;\n\n          if (_browser2.default.msie && parseInt(_browser2.default.version) <= 11) {\n            this._updateScrollableTimeoutID = setTimeout(function () {\n              that.getView(\"rowsView\")._updateScrollable();\n            });\n          }\n        },\n        _correctColumnWidths: function _correctColumnWidths(resultWidths, visibleColumns) {\n          var adaptiveController = this._adaptiveColumnsController;\n          var columnAutoWidth = this.option(\"columnAutoWidth\");\n          var oldHiddenColumns = adaptiveController.getHiddenColumns();\n          var hiddenColumns;\n          var hidingColumnsQueue = adaptiveController.updateHidingQueue(this._columnsController.getColumns());\n          adaptiveController.hideRedundantColumns(resultWidths, visibleColumns, hidingColumnsQueue);\n          hiddenColumns = adaptiveController.getHiddenColumns();\n\n          if (adaptiveController.hasAdaptiveDetailRowExpanded()) {\n            if (oldHiddenColumns.length !== hiddenColumns.length) {\n              adaptiveController.updateForm(hiddenColumns);\n            }\n          }\n\n          !hiddenColumns.length && adaptiveController.collapseAdaptiveDetailRow();\n\n          if (columnAutoWidth && hidingColumnsQueue.length && !hiddenColumns.length) {\n            this._updateScrollableForIE();\n          }\n\n          return this.callBase.apply(this, arguments);\n        },\n        _toggleBestFitMode: function _toggleBestFitMode(isBestFit) {\n          isBestFit && this._adaptiveColumnsController._removeCssClassesFromColumns();\n          this.callBase(isBestFit);\n        },\n        _needStretch: function _needStretch() {\n          var adaptiveColumnsController = this._adaptiveColumnsController;\n          return this.callBase.apply(this, arguments) || adaptiveColumnsController.getHidingColumnsQueue().length || adaptiveColumnsController.hasHiddenColumns();\n        },\n        init: function init() {\n          this._adaptiveColumnsController = this.getController(\"adaptiveColumns\");\n          this.callBase();\n        },\n        dispose: function dispose() {\n          this.callBase.apply(this, arguments);\n          clearTimeout(this._updateScrollableTimeoutID);\n        }\n      },\n      data: {\n        _processItems: function _processItems(items, change) {\n          var that = this;\n          var item;\n          var expandRowIndex;\n          var changeType = change.changeType;\n          items = that.callBase.apply(that, arguments);\n\n          if (\"loadingAll\" === changeType || !_type2.default.isDefined(that._adaptiveExpandedKey)) {\n            return items;\n          }\n\n          expandRowIndex = _uiGrid_core4.default.getIndexByKey(that._adaptiveExpandedKey, items);\n\n          if (expandRowIndex >= 0) {\n            item = items[expandRowIndex];\n            items.splice(expandRowIndex + 1, 0, {\n              visible: true,\n              rowType: ADAPTIVE_ROW_TYPE,\n              key: item.key,\n              data: item.data,\n              modifiedValues: item.modifiedValues,\n              isNewRow: item.isNewRow,\n              values: item.values\n            });\n          } else {\n            if (\"refresh\" === changeType) {\n              that._adaptiveExpandedKey = void 0;\n            }\n          }\n\n          return items;\n        },\n        _getRowIndicesForExpand: function _getRowIndicesForExpand(key) {\n          var rowIndices = this.callBase.apply(this, arguments);\n          var lastRowIndex;\n\n          if (this.getController(\"adaptiveColumns\").isAdaptiveDetailRowExpanded(key)) {\n            lastRowIndex = rowIndices[rowIndices.length - 1];\n            rowIndices.push(lastRowIndex + 1);\n          }\n\n          return rowIndices;\n        },\n        adaptiveExpandedKey: function adaptiveExpandedKey(value) {\n          if (_type2.default.isDefined(value)) {\n            this._adaptiveExpandedKey = value;\n          } else {\n            return this._adaptiveExpandedKey;\n          }\n        },\n        toggleExpandAdaptiveDetailRow: function toggleExpandAdaptiveDetailRow(key, alwaysExpanded) {\n          var that = this;\n\n          var oldExpandLoadedRowIndex = _uiGrid_core4.default.getIndexByKey(that._adaptiveExpandedKey, that._items);\n\n          var newExpandLoadedRowIndex = _uiGrid_core4.default.getIndexByKey(key, that._items);\n\n          if (oldExpandLoadedRowIndex >= 0 && oldExpandLoadedRowIndex === newExpandLoadedRowIndex && !alwaysExpanded) {\n            key = void 0;\n            newExpandLoadedRowIndex = -1;\n          }\n\n          that._adaptiveExpandedKey = key;\n\n          if (oldExpandLoadedRowIndex >= 0) {\n            oldExpandLoadedRowIndex++;\n          }\n\n          if (newExpandLoadedRowIndex >= 0) {\n            newExpandLoadedRowIndex++;\n          }\n\n          var rowIndexDelta = that.getRowIndexDelta();\n          that.updateItems({\n            allowInvisibleRowIndices: true,\n            changeType: \"update\",\n            rowIndices: [oldExpandLoadedRowIndex - rowIndexDelta, newExpandLoadedRowIndex - rowIndexDelta]\n          });\n        },\n        init: function init() {\n          this.callBase();\n          this._adaptiveExpandedKey = void 0;\n        }\n      },\n      editorFactory: {\n        _getFocusCellSelector: function _getFocusCellSelector() {\n          return this.callBase() + \", .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content\";\n        },\n        _getTooltipsSelector: function _getTooltipsSelector() {\n          return this.callBase() + \", .dx-field-item-content .\" + this.addWidgetPrefix(REVERT_TOOLTIP_CLASS);\n        }\n      },\n      columns: {\n        _isColumnVisible: function _isColumnVisible(column) {\n          return this.callBase(column) && !column.adaptiveHidden;\n        }\n      },\n      keyboardNavigation: {\n        _isCellValid: function _isCellValid($cell) {\n          return this.callBase.apply(this, arguments) && !$cell.hasClass(this.addWidgetPrefix(HIDDEN_COLUMN_CLASS));\n        },\n        _processNextCellInMasterDetail: function _processNextCellInMasterDetail($nextCell) {\n          this.callBase($nextCell);\n\n          var isCellOrBatchMode = this._editingController.isCellOrBatchEditMode();\n\n          if (!this._isInsideEditForm($nextCell) && $nextCell && isCellOrBatchMode) {\n            var focusHandler = function focusHandler() {\n              _events_engine2.default.off($nextCell, \"focus\", focusHandler);\n\n              _events_engine2.default.trigger($nextCell, \"dxclick\");\n            };\n\n            _events_engine2.default.on($nextCell, \"focus\", focusHandler);\n          }\n        },\n        _handleTabKeyOnMasterDetailCell: function _handleTabKeyOnMasterDetailCell(eventTarget, direction) {\n          var result = this.callBase(eventTarget, direction);\n\n          var $currentCell = this._getFocusedCell();\n\n          var $row = $currentCell && $currentCell.parent();\n\n          if (!result && $row && $row.length) {\n            var $dataCells = getDataCellElements($row);\n            var $targetCell = \"next\" === direction ? $dataCells.last() : $dataCells.first();\n            var rowIndex = $row.get(0).rowIndex;\n            var adaptiveController = this._adaptiveController;\n\n            var key = this._dataController.getKeyByRowIndex(\"next\" === direction ? rowIndex : rowIndex - 1);\n\n            var isCellElementsEquals = $currentCell && $targetCell && $currentCell.get(0) === $targetCell.get(0);\n            return adaptiveController.isAdaptiveDetailRowExpanded(key) && isCellElementsEquals;\n          }\n\n          return result;\n        },\n        init: function init() {\n          this.callBase();\n          this._adaptiveController = this.getController(\"adaptiveColumns\");\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.adaptivity.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_utils","_utils2","_click","_click2","_type","_type2","_browser","_browser2","_guid","_guid2","_uiGrid_core","_uiGrid_core2","_form","_form2","_uiGrid_core3","_uiGrid_core4","_themes","_themes2","_window","_common","_iterator","_extend","_deferred","obj","COLUMN_HEADERS_VIEW","ROWS_VIEW","FOOTER_VIEW","COLUMN_VIEWS","ADAPTIVE_NAMESPACE","HIDDEN_COLUMNS_WIDTH","ADAPTIVE_ROW_TYPE","FORM_ITEM_CONTENT_CLASS","FORM_ITEM_MODIFIED","HIDDEN_COLUMN_CLASS","ADAPTIVE_COLUMN_BUTTON_CLASS","ADAPTIVE_COLUMN_NAME_CLASS","COMMAND_ADAPTIVE_HIDDEN_CLASS","ADAPTIVE_DETAIL_ROW_CLASS","ADAPTIVE_ITEM_TEXT_CLASS","MASTER_DETAIL_CELL_CLASS","LAST_DATA_CELL_CLASS","ADAPTIVE_COLUMN_NAME","EDIT_MODE_BATCH","EDIT_MODE_ROW","EDIT_MODE_FORM","EDIT_MODE_POPUP","REVERT_TOOLTIP_CLASS","that","$row","$container","adaptiveColumnsController","options","$adaptiveColumnButton","AdaptiveColumnsController","_isRowEditMode","editMode","_isItemModified","columnIndex","item","rowIndex","cellOptions","row","_renderFormViewTemplate","column","focusAction","value","displayValue","text","isCellOrBatchEditMode","templateOptions","container","_getTemplate","editingController","renderFormTemplate","isItemEdited","_isVisibleColumnsValid","getCommandColumnsCount","result","j","visibleColumns","visibleColumn","_calculatePercentWidths","percentWidths","widths","_isPercentWidth","width","_isColumnHidden","hiddenColumn","_getAverageColumnsWidth","fixedColumnsWidth","columnsWithoutFixedWidthCount","columns","isNaN","parseFloat","visibleIndex","columnsCount","columnsCanFit","bestFitWidth","columnWidth","containerWidth","_calculateColumnWidth","columnId","getColumnId","widthOption","contentColumns","colWidth","columnAutoWidth","_calculatePercentWidth","columnFitted","partialWidth","resultWidth","_getNotTruncatedColumnWidth","_getItemPercentWidth","_getCommandColumnsWidth","_isItemEdited","editRowKey","_getFormItemsByHiddenColumns","items","name","dataField","_getAdaptiveColumnVisibleIndex","i","_hideAdaptiveColumn","resultWidths","_removeCssClassFromColumn","view","$cells","_removeCssClassesFromColumns","_isCellValid","$cell","_addCssClassToColumn","_addCssClassToViewColumn","viewName","editFormRowIndex","rowsCount","$rowElements","currentVisibleIndex","$cellElement","_getEditMode","isFormEditMode","hideRedundantColumns","hiddenQueue","totalWidth","$rootElement","rootElementWidth","getVisibleContentColumns","_this","visibleContentColumns","contentColumnsCount","needHideColumn","minWidth","columnBestFitWidth","hasHiddenColumns","Math","getItemContentByColumnIndex","$itemContent","toggleExpandAdaptiveDetailRow","createFormByHiddenColumns","userFormOptions","formID","defaultFormOptions","colCount","formOptions","customizeItem","onContentReady","hasAdaptiveDetailRowExpanded","updateForm","hiddenColumns","updateHidingQueue","hideableColumns","columnsHasHidingPriority","getHiddenColumns","getHidingColumnsQueue","init","type","command","visible","adaptiveHidden","cssClass","alignment","cellTemplate","fixedPosition","isAdaptiveVisible","optionChanged","args","publicMethods","isAdaptiveDetailRowExpanded","expandAdaptiveDetailRow","collapseAdaptiveDetailRow","module","defaultOptions","columnHidingEnabled","onAdaptiveDetailRowPreparing","controllers","adaptiveColumns","extenders","views","rowsView","_getCellTemplate","_createRow","_renderCells","hidingColumnsQueueLength","hiddenColumnsLength","getDataCellElements","_getColumnIndexByElementCore","$element","formItem","_cellPrepared","_getCellElement","getContextMenuItems","isClickableElement","isClickable","$target","_updateColumnWidth","columnsResizer","_pointCreated","currentColumn","point","nextColumnIndex","nextColumn","hasHiddenColumnsOnly","hasAdaptiveHiddenWidth","_getNextColumnIndex","index","draggingHeader","editing","_getFormEditItemTemplate","_closeEditItem","$itemContents","$targetElement","_beforeUpdateItems","oldExpandRowIndex","rowIndices","_afterInsertRow","_collapseAdaptiveDetailRow","_cancelEditAdaptiveDetailRow","_afterSaveEditData","_this2","deferred","_beforeCancelEditData","_getRowIndicesForCascadeUpdating","_beforeCloseEditCellInBatchMode","expandedKey","editRow","deleteRow","rowKey","resizing","_needBestFit","_updateScrollableForIE","parseInt","setTimeout","_correctColumnWidths","adaptiveController","oldHiddenColumns","hidingColumnsQueue","_toggleBestFitMode","isBestFit","_needStretch","dispose","clearTimeout","data","_processItems","changeType","change","expandRowIndex","rowType","key","modifiedValues","isNewRow","values","_getRowIndicesForExpand","lastRowIndex","adaptiveExpandedKey","oldExpandLoadedRowIndex","newExpandLoadedRowIndex","rowIndexDelta","allowInvisibleRowIndices","editorFactory","_getFocusCellSelector","_getTooltipsSelector","_isColumnVisible","keyboardNavigation","_processNextCellInMasterDetail","isCellOrBatchMode","focusHandler","_handleTabKeyOnMasterDetailCell","$currentCell","$dataCells","$targetCell","isCellElementsEquals"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.adaptivity.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _click = require(\"../../events/click\");\r\nvar _click2 = _interopRequireDefault(_click);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _guid = require(\"../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _form = require(\"../form\");\r\nvar _form2 = _interopRequireDefault(_form);\r\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\r\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar COLUMN_HEADERS_VIEW = \"columnHeadersView\";\r\nvar ROWS_VIEW = \"rowsView\";\r\nvar FOOTER_VIEW = \"footerView\";\r\nvar COLUMN_VIEWS = [COLUMN_HEADERS_VIEW, ROWS_VIEW, FOOTER_VIEW];\r\nvar ADAPTIVE_NAMESPACE = \"dxDataGridAdaptivity\";\r\nvar HIDDEN_COLUMNS_WIDTH = \"adaptiveHidden\";\r\nvar ADAPTIVE_ROW_TYPE = \"detailAdaptive\";\r\nvar FORM_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\r\nvar FORM_ITEM_MODIFIED = \"dx-item-modified\";\r\nvar HIDDEN_COLUMN_CLASS = \"hidden-column\";\r\nvar ADAPTIVE_COLUMN_BUTTON_CLASS = \"adaptive-more\";\r\nvar ADAPTIVE_COLUMN_NAME_CLASS = \"dx-command-adaptive\";\r\nvar COMMAND_ADAPTIVE_HIDDEN_CLASS = \"dx-command-adaptive-hidden\";\r\nvar ADAPTIVE_DETAIL_ROW_CLASS = \"dx-adaptive-detail-row\";\r\nvar ADAPTIVE_ITEM_TEXT_CLASS = \"dx-adaptive-item-text\";\r\nvar MASTER_DETAIL_CELL_CLASS = \"dx-master-detail-cell\";\r\nvar LAST_DATA_CELL_CLASS = \"dx-last-data-cell\";\r\nvar ADAPTIVE_COLUMN_NAME = \"adaptive\";\r\nvar EDIT_MODE_BATCH = \"batch\";\r\nvar EDIT_MODE_ROW = \"row\";\r\nvar EDIT_MODE_FORM = \"form\";\r\nvar EDIT_MODE_POPUP = \"popup\";\r\nvar REVERT_TOOLTIP_CLASS = \"revert-tooltip\";\r\n\r\nfunction getColumnId(that, column) {\r\n    return that._columnsController.getColumnId(column)\r\n}\r\n\r\nfunction getDataCellElements($row) {\r\n    return $row.find(\"td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])\")\r\n}\r\n\r\nfunction adaptiveCellTemplate(container, options) {\r\n    var $adaptiveColumnButton;\r\n    var $container = (0, _renderer2.default)(container);\r\n    var adaptiveColumnsController = options.component.getController(\"adaptiveColumns\");\r\n    if (\"data\" === options.rowType) {\r\n        $adaptiveColumnButton = (0, _renderer2.default)(\"<span>\").addClass(adaptiveColumnsController.addWidgetPrefix(ADAPTIVE_COLUMN_BUTTON_CLASS));\r\n        _events_engine2.default.on($adaptiveColumnButton, _utils2.default.addNamespace(_click2.default.name, ADAPTIVE_NAMESPACE), adaptiveColumnsController.createAction(function() {\r\n            adaptiveColumnsController.toggleExpandAdaptiveDetailRow(options.key)\r\n        }));\r\n        $adaptiveColumnButton.appendTo($container)\r\n    } else {\r\n        _uiGrid_core4.default.setEmptyText($container)\r\n    }\r\n}\r\nvar AdaptiveColumnsController = _uiGrid_core2.default.ViewController.inherit({\r\n    _isRowEditMode: function() {\r\n        var editMode = this._getEditMode();\r\n        return editMode === EDIT_MODE_ROW\r\n    },\r\n    _isItemModified: function(item, cellOptions) {\r\n        var columnIndex = this._columnsController.getVisibleIndex(item.column.index);\r\n        var rowIndex = this._dataController.getRowIndexByKey(cellOptions.key);\r\n        var row = this._dataController.items()[rowIndex + 1];\r\n        return row && row.modifiedValues && _type2.default.isDefined(row.modifiedValues[columnIndex])\r\n    },\r\n    _renderFormViewTemplate: function(item, cellOptions, $container) {\r\n        var that = this;\r\n        var column = item.column;\r\n        var focusAction = that.createAction(function() {\r\n            _events_engine2.default.trigger($container, _click2.default.name)\r\n        });\r\n        var container;\r\n        var value = column.calculateCellValue(cellOptions.data);\r\n        var displayValue = _uiGrid_core4.default.getDisplayValue(column, value, cellOptions.data, cellOptions.rowType);\r\n        var text = _uiGrid_core4.default.formatValue(displayValue, column);\r\n        var isCellOrBatchEditMode = this._editingController.isCellOrBatchEditMode();\r\n        if (column.allowEditing && that.getController(\"keyboardNavigation\").isKeyboardEnabled()) {\r\n            $container.attr(\"tabIndex\", that.option(\"tabIndex\"));\r\n            if (isCellOrBatchEditMode) {\r\n                _events_engine2.default.off($container, \"focus\", focusAction);\r\n                _events_engine2.default.on($container, \"focus\", focusAction)\r\n            }\r\n        }\r\n        if (column.cellTemplate) {\r\n            var templateOptions = (0, _extend.extend)({}, cellOptions, {\r\n                value: value,\r\n                displayValue: displayValue,\r\n                text: text,\r\n                column: column\r\n            });\r\n            that._rowsView.renderTemplate($container, column.cellTemplate, templateOptions, !!$container.closest((0, _window.getWindow)().document).length)\r\n        } else {\r\n            container = $container.get(0);\r\n            if (column.encodeHtml) {\r\n                container.textContent = text\r\n            } else {\r\n                container.innerHTML = text\r\n            }\r\n            $container.addClass(ADAPTIVE_ITEM_TEXT_CLASS);\r\n            if (!_type2.default.isDefined(text) || \"\" === text) {\r\n                $container.html(\"&nbsp;\")\r\n            }\r\n            if (!that._isRowEditMode()) {\r\n                if (that._isItemModified(item, cellOptions)) {\r\n                    $container.addClass(FORM_ITEM_MODIFIED)\r\n                }\r\n            }\r\n        }\r\n        that.getView(\"rowsView\")._cellPrepared($container, cellOptions)\r\n    },\r\n    _getTemplate: function(item, cellOptions) {\r\n        var that = this;\r\n        var column = item.column;\r\n        var editingController = this.getController(\"editing\");\r\n        return function(options, container) {\r\n            var $container = (0, _renderer2.default)(container);\r\n            var columnIndex = that._columnsController.getVisibleIndex(column.visibleIndex);\r\n            var templateOptions = (0, _extend.extend)({}, cellOptions);\r\n            var renderFormTemplate = function() {\r\n                var isItemEdited = that._isItemEdited(item);\r\n                templateOptions.value = cellOptions.row.values[columnIndex];\r\n                if (isItemEdited || column.showEditorAlways) {\r\n                    editingController.renderFormEditTemplate(templateOptions, item, options.component, $container, !isItemEdited)\r\n                } else {\r\n                    templateOptions.column = column;\r\n                    templateOptions.columnIndex = columnIndex;\r\n                    that._renderFormViewTemplate(item, templateOptions, $container)\r\n                }\r\n            };\r\n            renderFormTemplate();\r\n            templateOptions.watch && templateOptions.watch(function() {\r\n                return {\r\n                    isItemEdited: that._isItemEdited(item),\r\n                    value: cellOptions.row.values[columnIndex]\r\n                }\r\n            }, function() {\r\n                $container.contents().remove();\r\n                $container.removeClass(ADAPTIVE_ITEM_TEXT_CLASS);\r\n                renderFormTemplate()\r\n            })\r\n        }\r\n    },\r\n    _isVisibleColumnsValid: function(visibleColumns) {\r\n        var getCommandColumnsCount = function() {\r\n            var result = 0;\r\n            var j;\r\n            var visibleColumn;\r\n            for (j = 0; j < visibleColumns.length; j++) {\r\n                visibleColumn = visibleColumns[j];\r\n                if (visibleColumn.command) {\r\n                    result++\r\n                }\r\n            }\r\n            return result\r\n        };\r\n        if (visibleColumns < 2) {\r\n            return false\r\n        }\r\n        if (visibleColumns.length - getCommandColumnsCount() <= 1) {\r\n            return false\r\n        }\r\n        return true\r\n    },\r\n    _calculatePercentWidths: function(widths, visibleColumns) {\r\n        var that = this;\r\n        var percentWidths = 0;\r\n        visibleColumns.forEach(function(item, index) {\r\n            if (widths[index] !== HIDDEN_COLUMNS_WIDTH) {\r\n                percentWidths += that._getItemPercentWidth(item)\r\n            }\r\n        });\r\n        return percentWidths\r\n    },\r\n    _isPercentWidth: function(width) {\r\n        return _type2.default.isString(width) && \"%\" === width.slice(-1)\r\n    },\r\n    _isColumnHidden: function(column) {\r\n        return this._hiddenColumns.filter(function(hiddenColumn) {\r\n            return hiddenColumn.index === column.index\r\n        }).length > 0\r\n    },\r\n    _getAverageColumnsWidth: function(containerWidth, columns, columnsCanFit) {\r\n        var that = this;\r\n        var fixedColumnsWidth = 0;\r\n        var columnsWithoutFixedWidthCount = 0;\r\n        columns.forEach(function(column) {\r\n            if (!that._isColumnHidden(column)) {\r\n                var width = column.width;\r\n                if (_type2.default.isDefined(width) && !isNaN(parseFloat(width))) {\r\n                    fixedColumnsWidth += that._isPercentWidth(width) ? that._calculatePercentWidth({\r\n                        visibleIndex: column.visibleIndex,\r\n                        columnsCount: columns.length,\r\n                        columnsCanFit: columnsCanFit,\r\n                        bestFitWidth: column.bestFitWidth,\r\n                        columnWidth: width,\r\n                        containerWidth: containerWidth\r\n                    }) : parseFloat(width)\r\n                } else {\r\n                    columnsWithoutFixedWidthCount++\r\n                }\r\n            }\r\n        });\r\n        return (containerWidth - fixedColumnsWidth) / columnsWithoutFixedWidthCount\r\n    },\r\n    _calculateColumnWidth: function(column, containerWidth, contentColumns, columnsCanFit) {\r\n        var columnId = getColumnId(this, column);\r\n        var widthOption = this._columnsController.columnOption(columnId, \"width\");\r\n        var bestFitWidth = this._columnsController.columnOption(columnId, \"bestFitWidth\");\r\n        var columnsCount = contentColumns.length;\r\n        var colWidth;\r\n        if (widthOption && \"auto\" !== widthOption) {\r\n            if (this._isPercentWidth(widthOption)) {\r\n                colWidth = this._calculatePercentWidth({\r\n                    visibleIndex: column.visibleIndex,\r\n                    columnsCount: columnsCount,\r\n                    columnsCanFit: columnsCanFit,\r\n                    bestFitWidth: bestFitWidth,\r\n                    columnWidth: widthOption,\r\n                    containerWidth: containerWidth\r\n                })\r\n            } else {\r\n                return widthOption\r\n            }\r\n        } else {\r\n            var columnAutoWidth = this.option(\"columnAutoWidth\");\r\n            colWidth = columnAutoWidth || !!column.command ? bestFitWidth : this._getAverageColumnsWidth(containerWidth, contentColumns, columnsCanFit)\r\n        }\r\n        return colWidth\r\n    },\r\n    _calculatePercentWidth: function(options) {\r\n        var columnFitted = options.visibleIndex < options.columnsCount - 1 && options.columnsCanFit;\r\n        var partialWidth = options.containerWidth * parseFloat(options.columnWidth) / 100;\r\n        var resultWidth = options.columnsCanFit && partialWidth < options.bestFitWidth ? options.bestFitWidth : partialWidth;\r\n        return columnFitted ? options.containerWidth * parseFloat(options.columnWidth) / 100 : resultWidth\r\n    },\r\n    _getNotTruncatedColumnWidth: function(column, containerWidth, contentColumns, columnsCanFit) {\r\n        var columnId = getColumnId(this, column);\r\n        var widthOption = this._columnsController.columnOption(columnId, \"width\");\r\n        var bestFitWidth = this._columnsController.columnOption(columnId, \"bestFitWidth\");\r\n        var colWidth;\r\n        if (widthOption && \"auto\" !== widthOption && !this._isPercentWidth(widthOption)) {\r\n            return parseFloat(widthOption)\r\n        }\r\n        colWidth = this._calculateColumnWidth(column, containerWidth, contentColumns, columnsCanFit);\r\n        return colWidth < bestFitWidth ? null : colWidth\r\n    },\r\n    _getItemPercentWidth: function(item) {\r\n        var result = 0;\r\n        if (item.width && this._isPercentWidth(item.width)) {\r\n            result = parseFloat(item.width)\r\n        }\r\n        return result\r\n    },\r\n    _getCommandColumnsWidth: function() {\r\n        var that = this;\r\n        var columns = that._columnsController.getVisibleColumns();\r\n        var colWidth = 0;\r\n        (0, _iterator.each)(columns, function(index, column) {\r\n            if (column.index < 0 || column.command) {\r\n                colWidth += that._columnsController.columnOption(getColumnId(that, column), \"bestFitWidth\") || 0\r\n            }\r\n        });\r\n        return colWidth\r\n    },\r\n    _isItemEdited: function(item) {\r\n        if (this.isFormEditMode()) {\r\n            return false\r\n        }\r\n        if (this._isRowEditMode()) {\r\n            var editRowKey = this._editingController.getEditRowKey();\r\n            if ((0, _common.equalByValue)(editRowKey, this._dataController.adaptiveExpandedKey())) {\r\n                return true\r\n            }\r\n        } else {\r\n            var rowIndex = this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey()) + 1;\r\n            var columnIndex = this._columnsController.getVisibleIndex(item.column.index);\r\n            return this._editingController.isEditCell(rowIndex, columnIndex)\r\n        }\r\n    },\r\n    _getFormItemsByHiddenColumns: function(hiddenColumns) {\r\n        var items = [];\r\n        (0, _iterator.each)(hiddenColumns, function(_, column) {\r\n            items.push({\r\n                column: column,\r\n                name: column.name,\r\n                dataField: column.dataField,\r\n                visibleIndex: column.visibleIndex\r\n            })\r\n        });\r\n        return items\r\n    },\r\n    _getAdaptiveColumnVisibleIndex: function(visibleColumns) {\r\n        var i;\r\n        var column;\r\n        for (i = 0; i < visibleColumns.length; i++) {\r\n            column = visibleColumns[i];\r\n            if (column.command === ADAPTIVE_COLUMN_NAME) {\r\n                return i\r\n            }\r\n        }\r\n    },\r\n    _hideAdaptiveColumn: function(resultWidths, visibleColumns) {\r\n        var visibleIndex = this._getAdaptiveColumnVisibleIndex(visibleColumns);\r\n        if (_type2.default.isDefined(visibleIndex)) {\r\n            resultWidths[visibleIndex] = HIDDEN_COLUMNS_WIDTH;\r\n            this._addCssClassToColumn(COMMAND_ADAPTIVE_HIDDEN_CLASS, visibleIndex)\r\n        }\r\n    },\r\n    _removeCssClassFromColumn: function(cssClassName) {\r\n        var i;\r\n        var view;\r\n        var $cells;\r\n        for (i = 0; i < COLUMN_VIEWS.length; i++) {\r\n            view = this.getView(COLUMN_VIEWS[i]);\r\n            if (view && view.isVisible() && view.element()) {\r\n                $cells = view.element().find(\".\" + cssClassName);\r\n                $cells.removeClass(cssClassName)\r\n            }\r\n        }\r\n    },\r\n    _removeCssClassesFromColumns: function() {\r\n        this._removeCssClassFromColumn(COMMAND_ADAPTIVE_HIDDEN_CLASS);\r\n        this._removeCssClassFromColumn(this.addWidgetPrefix(HIDDEN_COLUMN_CLASS))\r\n    },\r\n    _isCellValid: function($cell) {\r\n        return $cell && $cell.length && !$cell.hasClass(MASTER_DETAIL_CELL_CLASS)\r\n    },\r\n    _addCssClassToColumn: function(cssClassName, visibleIndex) {\r\n        var that = this;\r\n        COLUMN_VIEWS.forEach(function(viewName) {\r\n            var view = that.getView(viewName);\r\n            view && that._addCssClassToViewColumn(view, cssClassName, visibleIndex)\r\n        })\r\n    },\r\n    _addCssClassToViewColumn: function(view, cssClassName, visibleIndex) {\r\n        var viewName = view.name;\r\n        var rowsCount;\r\n        var rowIndex;\r\n        var $cellElement;\r\n        var currentVisibleIndex;\r\n        var column = this._columnsController.getVisibleColumns()[visibleIndex];\r\n        var editFormRowIndex = this._editingController && this._editingController.getEditFormRowIndex();\r\n        if (view && view.isVisible() && column) {\r\n            rowsCount = view.getRowsCount();\r\n            var $rowElements = view._getRowElements();\r\n            for (rowIndex = 0; rowIndex < rowsCount; rowIndex++) {\r\n                if (rowIndex !== editFormRowIndex || viewName !== ROWS_VIEW) {\r\n                    currentVisibleIndex = viewName === COLUMN_HEADERS_VIEW ? this._columnsController.getVisibleIndex(column.index, rowIndex) : visibleIndex;\r\n                    if (currentVisibleIndex >= 0) {\r\n                        $cellElement = $rowElements.eq(rowIndex).children().eq(currentVisibleIndex);\r\n                        this._isCellValid($cellElement) && $cellElement.addClass(cssClassName)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _getEditMode: function() {\r\n        return this._editingController.getEditMode()\r\n    },\r\n    isFormEditMode: function() {\r\n        var editMode = this._getEditMode();\r\n        return editMode === EDIT_MODE_FORM || editMode === EDIT_MODE_POPUP\r\n    },\r\n    hideRedundantColumns: function(resultWidths, visibleColumns, hiddenQueue) {\r\n        var that = this;\r\n        var visibleColumn;\r\n        this._hiddenColumns = [];\r\n        if (that._isVisibleColumnsValid(visibleColumns) && hiddenQueue.length) {\r\n            var totalWidth = 0;\r\n            var percentWidths;\r\n            var $rootElement = that.component.$element();\r\n            var rootElementWidth = $rootElement.width() - that._getCommandColumnsWidth();\r\n            var getVisibleContentColumns = function() {\r\n                var _this = this;\r\n                return visibleColumns.filter(function(item) {\r\n                    return !item.command && 0 === _this._hiddenColumns.filter(function(i) {\r\n                        return i.dataField === item.dataField\r\n                    }).length\r\n                })\r\n            }.bind(this);\r\n            var visibleContentColumns = getVisibleContentColumns();\r\n            var contentColumnsCount = visibleContentColumns.length;\r\n            var columnsCanFit;\r\n            var i;\r\n            var hasHiddenColumns;\r\n            var needHideColumn;\r\n            do {\r\n                needHideColumn = false;\r\n                totalWidth = 0;\r\n                percentWidths = that._calculatePercentWidths(resultWidths, visibleColumns);\r\n                columnsCanFit = percentWidths < 100 && 0 !== percentWidths;\r\n                for (i = 0; i < visibleColumns.length; i++) {\r\n                    visibleColumn = visibleColumns[i];\r\n                    var columnWidth = that._getNotTruncatedColumnWidth(visibleColumn, rootElementWidth, visibleContentColumns, columnsCanFit);\r\n                    var columnId = getColumnId(that, visibleColumn);\r\n                    var widthOption = that._columnsController.columnOption(columnId, \"width\");\r\n                    var minWidth = that._columnsController.columnOption(columnId, \"minWidth\");\r\n                    var columnBestFitWidth = that._columnsController.columnOption(columnId, \"bestFitWidth\");\r\n                    if (resultWidths[i] === HIDDEN_COLUMNS_WIDTH) {\r\n                        hasHiddenColumns = true;\r\n                        continue\r\n                    }\r\n                    if (!columnWidth && !visibleColumn.command && !visibleColumn.fixed) {\r\n                        needHideColumn = true;\r\n                        break\r\n                    }\r\n                    if (!widthOption || \"auto\" === widthOption) {\r\n                        columnWidth = Math.max(columnBestFitWidth || 0, minWidth || 0)\r\n                    }\r\n                    if (visibleColumn.command !== ADAPTIVE_COLUMN_NAME || hasHiddenColumns) {\r\n                        totalWidth += columnWidth\r\n                    }\r\n                }\r\n                needHideColumn = needHideColumn || totalWidth > $rootElement.width();\r\n                if (needHideColumn) {\r\n                    var column = hiddenQueue.pop();\r\n                    var visibleIndex = that._columnsController.getVisibleIndex(column.index);\r\n                    rootElementWidth += that._calculateColumnWidth(column, rootElementWidth, visibleContentColumns, columnsCanFit);\r\n                    that._addCssClassToColumn(that.addWidgetPrefix(HIDDEN_COLUMN_CLASS), visibleIndex);\r\n                    resultWidths[visibleIndex] = HIDDEN_COLUMNS_WIDTH;\r\n                    this._hiddenColumns.push(column);\r\n                    visibleContentColumns = getVisibleContentColumns()\r\n                }\r\n            } while (needHideColumn && visibleContentColumns.length > 1 && hiddenQueue.length);\r\n            if (contentColumnsCount === visibleContentColumns.length) {\r\n                that._hideAdaptiveColumn(resultWidths, visibleColumns)\r\n            }\r\n        } else {\r\n            that._hideAdaptiveColumn(resultWidths, visibleColumns)\r\n        }\r\n    },\r\n    getItemContentByColumnIndex: function(visibleColumnIndex) {\r\n        var $itemContent;\r\n        var i;\r\n        var item;\r\n        for (i = 0; i < this._$itemContents.length; i++) {\r\n            $itemContent = this._$itemContents.eq(i);\r\n            item = $itemContent.data(\"dx-form-item\");\r\n            if (item && item.column && this._columnsController.getVisibleIndex(item.column.index) === visibleColumnIndex) {\r\n                return $itemContent\r\n            }\r\n        }\r\n    },\r\n    toggleExpandAdaptiveDetailRow: function(key, alwaysExpanded) {\r\n        if (!(this.isFormEditMode() && this._editingController.isEditing())) {\r\n            this.getController(\"data\").toggleExpandAdaptiveDetailRow(key, alwaysExpanded)\r\n        }\r\n    },\r\n    createFormByHiddenColumns: function(container, options) {\r\n        var that = this;\r\n        var $container = (0, _renderer2.default)(container);\r\n        var userFormOptions = {\r\n            items: that._getFormItemsByHiddenColumns(that._hiddenColumns),\r\n            formID: \"dx-\" + new _guid2.default\r\n        };\r\n        var defaultFormOptions = _themes2.default.isMaterial() ? {\r\n            colCount: 2\r\n        } : {};\r\n        this.executeAction(\"onAdaptiveDetailRowPreparing\", {\r\n            formOptions: userFormOptions\r\n        });\r\n        that._$itemContents = null;\r\n        that._form = that._createComponent((0, _renderer2.default)(\"<div>\").appendTo($container), _form2.default, (0, _extend.extend)(defaultFormOptions, userFormOptions, {\r\n            customizeItem: function(item) {\r\n                var column = item.column || that._columnsController.columnOption(item.name || item.dataField);\r\n                if (column) {\r\n                    item.label = item.label || {};\r\n                    item.label.text = item.label.text || column.caption;\r\n                    item.column = column;\r\n                    item.template = that._getTemplate(item, options, that.updateForm.bind(that))\r\n                }\r\n                userFormOptions.customizeItem && userFormOptions.customizeItem.call(this, item)\r\n            },\r\n            onContentReady: function(e) {\r\n                userFormOptions.onContentReady && userFormOptions.onContentReady.call(this, e);\r\n                that._$itemContents = $container.find(\".\" + FORM_ITEM_CONTENT_CLASS)\r\n            }\r\n        }))\r\n    },\r\n    hasAdaptiveDetailRowExpanded: function() {\r\n        return _type2.default.isDefined(this._dataController.adaptiveExpandedKey())\r\n    },\r\n    updateForm: function(hiddenColumns) {\r\n        if (this.hasAdaptiveDetailRowExpanded()) {\r\n            if (this._form && _type2.default.isDefined(this._form._contentReadyAction)) {\r\n                if (hiddenColumns && hiddenColumns.length) {\r\n                    this._form.option(\"items\", this._getFormItemsByHiddenColumns(hiddenColumns))\r\n                } else {\r\n                    this._form.repaint()\r\n                }\r\n            }\r\n        }\r\n    },\r\n    updateHidingQueue: function(columns) {\r\n        var that = this;\r\n        var hideableColumns = columns.filter(function(column) {\r\n            return column.visible && !column.type && !column.fixed && !(_type2.default.isDefined(column.groupIndex) && column.groupIndex >= 0)\r\n        });\r\n        var columnsHasHidingPriority;\r\n        var i;\r\n        that._hidingColumnsQueue = [];\r\n        if (that.option(\"allowColumnResizing\") && \"widget\" === that.option(\"columnResizingMode\")) {\r\n            return that._hidingColumnsQueue\r\n        }\r\n        for (i = 0; i < hideableColumns.length; i++) {\r\n            if (_type2.default.isDefined(hideableColumns[i].hidingPriority) && hideableColumns[i].hidingPriority >= 0) {\r\n                columnsHasHidingPriority = true;\r\n                that._hidingColumnsQueue[hideableColumns[i].hidingPriority] = hideableColumns[i]\r\n            }\r\n        }\r\n        if (columnsHasHidingPriority) {\r\n            that._hidingColumnsQueue.reverse()\r\n        } else {\r\n            if (that.option(\"columnHidingEnabled\")) {\r\n                for (i = 0; i < hideableColumns.length; i++) {\r\n                    var visibleIndex = that._columnsController.getVisibleIndex(hideableColumns[i].index);\r\n                    that._hidingColumnsQueue[visibleIndex] = hideableColumns[i]\r\n                }\r\n            }\r\n        }\r\n        that._hidingColumnsQueue = that._hidingColumnsQueue.filter(Object);\r\n        return that._hidingColumnsQueue\r\n    },\r\n    getHiddenColumns: function() {\r\n        return this._hiddenColumns\r\n    },\r\n    hasHiddenColumns: function() {\r\n        return this._hiddenColumns.length > 0\r\n    },\r\n    getHidingColumnsQueue: function() {\r\n        return this._hidingColumnsQueue\r\n    },\r\n    init: function() {\r\n        var that = this;\r\n        that._columnsController = that.getController(\"columns\");\r\n        that._dataController = that.getController(\"data\");\r\n        that._rowsView = that.getView(\"rowsView\");\r\n        that._columnsController.addCommandColumn({\r\n            type: ADAPTIVE_COLUMN_NAME,\r\n            command: ADAPTIVE_COLUMN_NAME,\r\n            visible: true,\r\n            adaptiveHidden: true,\r\n            cssClass: ADAPTIVE_COLUMN_NAME_CLASS,\r\n            alignment: \"center\",\r\n            width: \"auto\",\r\n            cellTemplate: adaptiveCellTemplate,\r\n            fixedPosition: \"right\"\r\n        });\r\n        that._columnsController.columnsChanged.add(function() {\r\n            var isAdaptiveVisible = !!that.updateHidingQueue(that._columnsController.getColumns()).length;\r\n            that._columnsController.columnOption(\"command:adaptive\", \"adaptiveHidden\", !isAdaptiveVisible, true)\r\n        });\r\n        that._editingController = that.getController(\"editing\");\r\n        that._hidingColumnsQueue = [];\r\n        that._hiddenColumns = [];\r\n        that.createAction(\"onAdaptiveDetailRowPreparing\");\r\n        that.callBase()\r\n    },\r\n    optionChanged: function(args) {\r\n        if (\"columnHidingEnabled\" === args.name) {\r\n            this._columnsController.columnOption(\"command:adaptive\", \"adaptiveHidden\", !args.value)\r\n        }\r\n        this.callBase(args)\r\n    },\r\n    publicMethods: function() {\r\n        return [\"isAdaptiveDetailRowExpanded\", \"expandAdaptiveDetailRow\", \"collapseAdaptiveDetailRow\"]\r\n    },\r\n    isAdaptiveDetailRowExpanded: function(key) {\r\n        return this._dataController.adaptiveExpandedKey() && (0, _common.equalByValue)(this._dataController.adaptiveExpandedKey(), key)\r\n    },\r\n    expandAdaptiveDetailRow: function(key) {\r\n        if (!this.hasAdaptiveDetailRowExpanded()) {\r\n            this.toggleExpandAdaptiveDetailRow(key)\r\n        }\r\n    },\r\n    collapseAdaptiveDetailRow: function() {\r\n        if (this.hasAdaptiveDetailRowExpanded()) {\r\n            this.toggleExpandAdaptiveDetailRow()\r\n        }\r\n    }\r\n});\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            columnHidingEnabled: false,\r\n            onAdaptiveDetailRowPreparing: null\r\n        }\r\n    },\r\n    controllers: {\r\n        adaptiveColumns: AdaptiveColumnsController\r\n    },\r\n    extenders: {\r\n        views: {\r\n            rowsView: {\r\n                _getCellTemplate: function(options) {\r\n                    var that = this;\r\n                    var column = options.column;\r\n                    if (options.rowType === ADAPTIVE_ROW_TYPE && \"detail\" === column.command) {\r\n                        return function(container, options) {\r\n                            that._adaptiveColumnsController.createFormByHiddenColumns((0, _renderer2.default)(container), options)\r\n                        }\r\n                    }\r\n                    return that.callBase(options)\r\n                },\r\n                _createRow: function(row) {\r\n                    var $row = this.callBase(row);\r\n                    if (row && row.rowType === ADAPTIVE_ROW_TYPE && row.key === this._dataController.adaptiveExpandedKey()) {\r\n                        $row.addClass(ADAPTIVE_DETAIL_ROW_CLASS)\r\n                    }\r\n                    return $row\r\n                },\r\n                _renderCells: function($row, options) {\r\n                    this.callBase($row, options);\r\n                    var hidingColumnsQueueLength = this._adaptiveColumnsController.getHidingColumnsQueue().length;\r\n                    var hiddenColumnsLength = this._adaptiveColumnsController.getHiddenColumns().length;\r\n                    if (hidingColumnsQueueLength && !hiddenColumnsLength) {\r\n                        getDataCellElements($row).last().addClass(LAST_DATA_CELL_CLASS)\r\n                    }\r\n                },\r\n                _getColumnIndexByElementCore: function($element) {\r\n                    var $itemContent = $element.closest(\".\" + FORM_ITEM_CONTENT_CLASS);\r\n                    if ($itemContent.length && $itemContent.closest(this.component.$element()).length) {\r\n                        var formItem = $itemContent.length ? $itemContent.first().data(\"dx-form-item\") : null;\r\n                        return formItem && formItem.column && this._columnsController.getVisibleIndex(formItem.column.index)\r\n                    } else {\r\n                        return this.callBase($element)\r\n                    }\r\n                },\r\n                _cellPrepared: function($cell, options) {\r\n                    this.callBase.apply(this, arguments);\r\n                    if (options.row.rowType !== ADAPTIVE_ROW_TYPE && options.column.visibleWidth === HIDDEN_COLUMNS_WIDTH) {\r\n                        $cell.addClass(this.addWidgetPrefix(HIDDEN_COLUMN_CLASS))\r\n                    }\r\n                },\r\n                _getCellElement: function(rowIndex, columnIdentifier) {\r\n                    var item = this._dataController.items()[rowIndex];\r\n                    if (item && item.rowType === ADAPTIVE_ROW_TYPE) {\r\n                        return this._adaptiveColumnsController.getItemContentByColumnIndex(columnIdentifier)\r\n                    } else {\r\n                        return this.callBase(rowIndex, columnIdentifier)\r\n                    }\r\n                },\r\n                getContextMenuItems: function(options) {\r\n                    if (options.row && \"detailAdaptive\" === options.row.rowType) {\r\n                        var view = this.component.getView(\"columnHeadersView\");\r\n                        var formItem = (0, _renderer2.default)(options.targetElement).closest(\".dx-field-item-label\").next().data(\"dx-form-item\");\r\n                        options.column = formItem ? formItem.column : options.column;\r\n                        return view.getContextMenuItems && view.getContextMenuItems(options)\r\n                    }\r\n                    return this.callBase && this.callBase(options)\r\n                },\r\n                isClickableElement: function($target) {\r\n                    var isClickable = this.callBase ? this.callBase($target) : false;\r\n                    return isClickable || !!$target.closest(\".\" + ADAPTIVE_COLUMN_NAME_CLASS).length\r\n                },\r\n                init: function() {\r\n                    this.callBase();\r\n                    this._adaptiveColumnsController = this.getController(\"adaptiveColumns\")\r\n                }\r\n            }\r\n        },\r\n        controllers: {\r\n            \"export\": {\r\n                _updateColumnWidth: function(column, width) {\r\n                    this.callBase(column, column.visibleWidth === HIDDEN_COLUMNS_WIDTH ? column.bestFitWidth : width)\r\n                }\r\n            },\r\n            columnsResizer: {\r\n                _pointCreated: function(point, cellsLength, columns) {\r\n                    var result = this.callBase(point, cellsLength, columns);\r\n                    var currentColumn = columns[point.columnIndex] || {};\r\n                    var nextColumnIndex = this._getNextColumnIndex(point.columnIndex);\r\n                    var nextColumn = columns[nextColumnIndex] || {};\r\n                    var hasHiddenColumnsOnly = nextColumnIndex !== point.columnIndex + 1 && nextColumn.command;\r\n                    var hasAdaptiveHiddenWidth = currentColumn.visibleWidth === HIDDEN_COLUMNS_WIDTH || hasHiddenColumnsOnly;\r\n                    return result || hasAdaptiveHiddenWidth\r\n                },\r\n                _getNextColumnIndex: function(currentColumnIndex) {\r\n                    var visibleColumns = this._columnsController.getVisibleColumns();\r\n                    var index = this.callBase(currentColumnIndex);\r\n                    while (visibleColumns[index] && visibleColumns[index].visibleWidth === HIDDEN_COLUMNS_WIDTH) {\r\n                        index++\r\n                    }\r\n                    return index\r\n                }\r\n            },\r\n            draggingHeader: {\r\n                _pointCreated: function(point, columns, location, sourceColumn) {\r\n                    var result = this.callBase(point, columns, location, sourceColumn);\r\n                    var column = columns[point.columnIndex - 1] || {};\r\n                    var hasAdaptiveHiddenWidth = column.visibleWidth === HIDDEN_COLUMNS_WIDTH;\r\n                    return result || hasAdaptiveHiddenWidth\r\n                }\r\n            },\r\n            editing: {\r\n                _isRowEditMode: function() {\r\n                    return this.getEditMode() === EDIT_MODE_ROW\r\n                },\r\n                _getFormEditItemTemplate: function(cellOptions, column) {\r\n                    if (this.getEditMode() !== EDIT_MODE_ROW && \"detailAdaptive\" === cellOptions.rowType) {\r\n                        cellOptions.columnIndex = this._columnsController.getVisibleIndex(column.index);\r\n                        return this.getColumnTemplate(cellOptions)\r\n                    }\r\n                    return this.callBase(cellOptions, column)\r\n                },\r\n                _closeEditItem: function($targetElement) {\r\n                    var $itemContents = $targetElement.closest(\".\" + FORM_ITEM_CONTENT_CLASS);\r\n                    var rowIndex = this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey()) + 1;\r\n                    var formItem = $itemContents.length ? $itemContents.first().data(\"dx-form-item\") : null;\r\n                    var columnIndex = formItem && formItem.column && this._columnsController.getVisibleIndex(formItem.column.index);\r\n                    if (!this.isEditCell(rowIndex, columnIndex)) {\r\n                        this.callBase($targetElement)\r\n                    }\r\n                },\r\n                _beforeUpdateItems: function(rowIndices, rowIndex) {\r\n                    if (!this._adaptiveController.isFormEditMode() && this._adaptiveController.hasHiddenColumns()) {\r\n                        var items = this._dataController.items();\r\n                        var item = items[rowIndex];\r\n                        var oldExpandRowIndex = _uiGrid_core4.default.getIndexByKey(this._dataController.adaptiveExpandedKey(), items);\r\n                        this._isForceRowAdaptiveExpand = !this._adaptiveController.hasAdaptiveDetailRowExpanded();\r\n                        if (oldExpandRowIndex >= 0 && rowIndex > oldExpandRowIndex) {\r\n                            this._editRowIndex--\r\n                        }\r\n                        if (oldExpandRowIndex >= 0) {\r\n                            rowIndices.push(oldExpandRowIndex + 1)\r\n                        }\r\n                        rowIndices.push(rowIndex + 1);\r\n                        this._dataController.adaptiveExpandedKey(item.key)\r\n                    }\r\n                },\r\n                _afterInsertRow: function(options) {\r\n                    this.callBase(options);\r\n                    if (this._adaptiveController.hasHiddenColumns()) {\r\n                        this._adaptiveController.toggleExpandAdaptiveDetailRow(options.key, this.isRowEditMode());\r\n                        this._isForceRowAdaptiveExpand = true\r\n                    }\r\n                },\r\n                _collapseAdaptiveDetailRow: function() {\r\n                    if (this._isRowEditMode() && this._isForceRowAdaptiveExpand) {\r\n                        this._adaptiveController.collapseAdaptiveDetailRow();\r\n                        this._isForceRowAdaptiveExpand = false\r\n                    }\r\n                },\r\n                _cancelEditAdaptiveDetailRow: function() {\r\n                    if (this._adaptiveController.hasHiddenColumns()) {\r\n                        this._collapseAdaptiveDetailRow()\r\n                    }\r\n                },\r\n                _afterSaveEditData: function() {\r\n                    var _this2 = this;\r\n                    this.callBase();\r\n                    var deferred = new _deferred.Deferred;\r\n                    if (this._isRowEditMode() && this._adaptiveController.hasHiddenColumns()) {\r\n                        (0, _deferred.when)(this.getController(\"validating\").validate(true)).done(function(isValid) {\r\n                            if (isValid) {\r\n                                _this2._cancelEditAdaptiveDetailRow()\r\n                            }\r\n                            deferred.resolve()\r\n                        })\r\n                    } else {\r\n                        deferred.resolve()\r\n                    }\r\n                    return deferred.promise()\r\n                },\r\n                _beforeCancelEditData: function() {\r\n                    this.callBase();\r\n                    this._cancelEditAdaptiveDetailRow()\r\n                },\r\n                _getRowIndicesForCascadeUpdating: function(row) {\r\n                    var rowIndices = this.callBase.apply(this, arguments);\r\n                    if (this._adaptiveController.isAdaptiveDetailRowExpanded(row.key)) {\r\n                        rowIndices.push(row.rowType === ADAPTIVE_ROW_TYPE ? row.rowIndex - 1 : row.rowIndex + 1)\r\n                    }\r\n                    return rowIndices\r\n                },\r\n                _beforeCloseEditCellInBatchMode: function(rowIndices) {\r\n                    var expandedKey = this._dataController._adaptiveExpandedKey;\r\n                    var rowIndex;\r\n                    if (expandedKey) {\r\n                        rowIndex = _uiGrid_core4.default.getIndexByKey(expandedKey, this._dataController.items());\r\n                        if (rowIndex > -1) {\r\n                            rowIndices.unshift(rowIndex)\r\n                        }\r\n                    }\r\n                },\r\n                editRow: function(rowIndex) {\r\n                    if (this._adaptiveController.isFormEditMode()) {\r\n                        this._adaptiveController.collapseAdaptiveDetailRow()\r\n                    }\r\n                    this.callBase(rowIndex)\r\n                },\r\n                deleteRow: function(rowIndex) {\r\n                    var rowKey = this._dataController.getKeyByRowIndex(rowIndex);\r\n                    if (this.getEditMode() === EDIT_MODE_BATCH && this._adaptiveController.isAdaptiveDetailRowExpanded(rowKey)) {\r\n                        this._adaptiveController.collapseAdaptiveDetailRow()\r\n                    }\r\n                    this.callBase(rowIndex)\r\n                },\r\n                init: function() {\r\n                    this.callBase();\r\n                    this._adaptiveController = this.getController(\"adaptiveColumns\")\r\n                }\r\n            },\r\n            resizing: {\r\n                _needBestFit: function() {\r\n                    return this.callBase() || !!this._adaptiveColumnsController.getHidingColumnsQueue().length\r\n                },\r\n                _updateScrollableForIE: function() {\r\n                    var that = this;\r\n                    if (_browser2.default.msie && parseInt(_browser2.default.version) <= 11) {\r\n                        this._updateScrollableTimeoutID = setTimeout(function() {\r\n                            that.getView(\"rowsView\")._updateScrollable()\r\n                        })\r\n                    }\r\n                },\r\n                _correctColumnWidths: function(resultWidths, visibleColumns) {\r\n                    var adaptiveController = this._adaptiveColumnsController;\r\n                    var columnAutoWidth = this.option(\"columnAutoWidth\");\r\n                    var oldHiddenColumns = adaptiveController.getHiddenColumns();\r\n                    var hiddenColumns;\r\n                    var hidingColumnsQueue = adaptiveController.updateHidingQueue(this._columnsController.getColumns());\r\n                    adaptiveController.hideRedundantColumns(resultWidths, visibleColumns, hidingColumnsQueue);\r\n                    hiddenColumns = adaptiveController.getHiddenColumns();\r\n                    if (adaptiveController.hasAdaptiveDetailRowExpanded()) {\r\n                        if (oldHiddenColumns.length !== hiddenColumns.length) {\r\n                            adaptiveController.updateForm(hiddenColumns)\r\n                        }\r\n                    }!hiddenColumns.length && adaptiveController.collapseAdaptiveDetailRow();\r\n                    if (columnAutoWidth && hidingColumnsQueue.length && !hiddenColumns.length) {\r\n                        this._updateScrollableForIE()\r\n                    }\r\n                    return this.callBase.apply(this, arguments)\r\n                },\r\n                _toggleBestFitMode: function(isBestFit) {\r\n                    isBestFit && this._adaptiveColumnsController._removeCssClassesFromColumns();\r\n                    this.callBase(isBestFit)\r\n                },\r\n                _needStretch: function() {\r\n                    var adaptiveColumnsController = this._adaptiveColumnsController;\r\n                    return this.callBase.apply(this, arguments) || adaptiveColumnsController.getHidingColumnsQueue().length || adaptiveColumnsController.hasHiddenColumns()\r\n                },\r\n                init: function() {\r\n                    this._adaptiveColumnsController = this.getController(\"adaptiveColumns\");\r\n                    this.callBase()\r\n                },\r\n                dispose: function() {\r\n                    this.callBase.apply(this, arguments);\r\n                    clearTimeout(this._updateScrollableTimeoutID)\r\n                }\r\n            },\r\n            data: {\r\n                _processItems: function(items, change) {\r\n                    var that = this;\r\n                    var item;\r\n                    var expandRowIndex;\r\n                    var changeType = change.changeType;\r\n                    items = that.callBase.apply(that, arguments);\r\n                    if (\"loadingAll\" === changeType || !_type2.default.isDefined(that._adaptiveExpandedKey)) {\r\n                        return items\r\n                    }\r\n                    expandRowIndex = _uiGrid_core4.default.getIndexByKey(that._adaptiveExpandedKey, items);\r\n                    if (expandRowIndex >= 0) {\r\n                        item = items[expandRowIndex];\r\n                        items.splice(expandRowIndex + 1, 0, {\r\n                            visible: true,\r\n                            rowType: ADAPTIVE_ROW_TYPE,\r\n                            key: item.key,\r\n                            data: item.data,\r\n                            modifiedValues: item.modifiedValues,\r\n                            isNewRow: item.isNewRow,\r\n                            values: item.values\r\n                        })\r\n                    } else {\r\n                        if (\"refresh\" === changeType) {\r\n                            that._adaptiveExpandedKey = void 0\r\n                        }\r\n                    }\r\n                    return items\r\n                },\r\n                _getRowIndicesForExpand: function(key) {\r\n                    var rowIndices = this.callBase.apply(this, arguments);\r\n                    var lastRowIndex;\r\n                    if (this.getController(\"adaptiveColumns\").isAdaptiveDetailRowExpanded(key)) {\r\n                        lastRowIndex = rowIndices[rowIndices.length - 1];\r\n                        rowIndices.push(lastRowIndex + 1)\r\n                    }\r\n                    return rowIndices\r\n                },\r\n                adaptiveExpandedKey: function(value) {\r\n                    if (_type2.default.isDefined(value)) {\r\n                        this._adaptiveExpandedKey = value\r\n                    } else {\r\n                        return this._adaptiveExpandedKey\r\n                    }\r\n                },\r\n                toggleExpandAdaptiveDetailRow: function(key, alwaysExpanded) {\r\n                    var that = this;\r\n                    var oldExpandLoadedRowIndex = _uiGrid_core4.default.getIndexByKey(that._adaptiveExpandedKey, that._items);\r\n                    var newExpandLoadedRowIndex = _uiGrid_core4.default.getIndexByKey(key, that._items);\r\n                    if (oldExpandLoadedRowIndex >= 0 && oldExpandLoadedRowIndex === newExpandLoadedRowIndex && !alwaysExpanded) {\r\n                        key = void 0;\r\n                        newExpandLoadedRowIndex = -1\r\n                    }\r\n                    that._adaptiveExpandedKey = key;\r\n                    if (oldExpandLoadedRowIndex >= 0) {\r\n                        oldExpandLoadedRowIndex++\r\n                    }\r\n                    if (newExpandLoadedRowIndex >= 0) {\r\n                        newExpandLoadedRowIndex++\r\n                    }\r\n                    var rowIndexDelta = that.getRowIndexDelta();\r\n                    that.updateItems({\r\n                        allowInvisibleRowIndices: true,\r\n                        changeType: \"update\",\r\n                        rowIndices: [oldExpandLoadedRowIndex - rowIndexDelta, newExpandLoadedRowIndex - rowIndexDelta]\r\n                    })\r\n                },\r\n                init: function() {\r\n                    this.callBase();\r\n                    this._adaptiveExpandedKey = void 0\r\n                }\r\n            },\r\n            editorFactory: {\r\n                _getFocusCellSelector: function() {\r\n                    return this.callBase() + \", .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content\"\r\n                },\r\n                _getTooltipsSelector: function() {\r\n                    return this.callBase() + \", .dx-field-item-content .\" + this.addWidgetPrefix(REVERT_TOOLTIP_CLASS)\r\n                }\r\n            },\r\n            columns: {\r\n                _isColumnVisible: function(column) {\r\n                    return this.callBase(column) && !column.adaptiveHidden\r\n                }\r\n            },\r\n            keyboardNavigation: {\r\n                _isCellValid: function($cell) {\r\n                    return this.callBase.apply(this, arguments) && !$cell.hasClass(this.addWidgetPrefix(HIDDEN_COLUMN_CLASS))\r\n                },\r\n                _processNextCellInMasterDetail: function($nextCell) {\r\n                    this.callBase($nextCell);\r\n                    var isCellOrBatchMode = this._editingController.isCellOrBatchEditMode();\r\n                    if (!this._isInsideEditForm($nextCell) && $nextCell && isCellOrBatchMode) {\r\n                        var focusHandler = function focusHandler() {\r\n                            _events_engine2.default.off($nextCell, \"focus\", focusHandler);\r\n                            _events_engine2.default.trigger($nextCell, \"dxclick\")\r\n                        };\r\n                        _events_engine2.default.on($nextCell, \"focus\", focusHandler)\r\n                    }\r\n                },\r\n                _handleTabKeyOnMasterDetailCell: function(eventTarget, direction) {\r\n                    var result = this.callBase(eventTarget, direction);\r\n                    var $currentCell = this._getFocusedCell();\r\n                    var $row = $currentCell && $currentCell.parent();\r\n                    if (!result && $row && $row.length) {\r\n                        var $dataCells = getDataCellElements($row);\r\n                        var $targetCell = \"next\" === direction ? $dataCells.last() : $dataCells.first();\r\n                        var rowIndex = $row.get(0).rowIndex;\r\n                        var adaptiveController = this._adaptiveController;\r\n                        var key = this._dataController.getKeyByRowIndex(\"next\" === direction ? rowIndex : rowIndex - 1);\r\n                        var isCellElementsEquals = $currentCell && $targetCell && $currentCell.get(0) === $targetCell.get(0);\r\n                        return adaptiveController.isAdaptiveDetailRowExpanded(key) && isCellElementsEquals\r\n                    }\r\n                    return result\r\n                },\r\n                init: function() {\r\n                    this.callBase();\r\n                    this._adaptiveController = this.getController(\"adaptiveColumns\")\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}