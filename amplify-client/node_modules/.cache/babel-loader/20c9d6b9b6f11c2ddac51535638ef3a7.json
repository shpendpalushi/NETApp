{"ast":null,"code":"/**\r\n * DevExtreme (viz/gauges/base_range_container.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar iterateUtils = require(\"../../core/utils/iterator\");\n\nvar BaseElement = require(\"./base_indicators\").BaseElement;\n\nvar _Number = Number;\nvar _abs = Math.abs;\n\nvar _isString = require(\"../../core/utils/type\").isString;\n\nvar _isArray = Array.isArray;\nvar _isFinite = isFinite;\nvar _each = iterateUtils.each;\nvar BaseRangeContainer = BaseElement.inherit({\n  _init: function _init() {\n    this._root = this._renderer.g().attr({\n      \"class\": \"dxg-range-container\"\n    }).linkOn(this._container, \"range-container\");\n  },\n  _dispose: function _dispose() {\n    this._root.linkOff();\n  },\n  clean: function clean() {\n    this._root.linkRemove().clear();\n\n    this._options = this.enabled = null;\n    return this;\n  },\n  _getRanges: function _getRanges() {\n    var that = this;\n    var options = that._options;\n    var translator = that._translator;\n    var totalStart = translator.getDomain()[0];\n    var totalEnd = translator.getDomain()[1];\n    var totalDelta = totalEnd - totalStart;\n    var isNotEmptySegment = totalDelta >= 0 ? isNotEmptySegmentAsc : isNotEmptySegmentDesc;\n    var subtractSegment = totalDelta >= 0 ? subtractSegmentAsc : subtractSegmentDesc;\n    var list = [];\n    var ranges = [];\n    var backgroundRanges = [{\n      start: totalStart,\n      end: totalEnd\n    }];\n    var threshold = _abs(totalDelta) / 1e4;\n    var palette;\n    var backgroundColor = _isString(options.backgroundColor) ? options.backgroundColor : \"none\";\n    var width = options.width || {};\n\n    var startWidth = _Number(width > 0 ? width : width.start);\n\n    var endWidth = _Number(width > 0 ? width : width.end);\n\n    var deltaWidth = endWidth - startWidth;\n\n    if (void 0 !== options.ranges && !_isArray(options.ranges)) {\n      return null;\n    }\n\n    if (!(startWidth >= 0 && endWidth >= 0 && startWidth + endWidth > 0)) {\n      return null;\n    }\n\n    list = (_isArray(options.ranges) ? options.ranges : []).reduce(function (result, rangeOptions, i) {\n      rangeOptions = rangeOptions || {};\n      var start = translator.adjust(rangeOptions.startValue);\n      var end = translator.adjust(rangeOptions.endValue);\n\n      if (_isFinite(start) && _isFinite(end) && isNotEmptySegment(start, end, threshold)) {\n        result.push({\n          start: start,\n          end: end,\n          color: rangeOptions.color,\n          classIndex: i\n        });\n      }\n\n      return result;\n    }, []);\n    palette = that._themeManager.createPalette(options.palette, {\n      type: \"indicatingSet\",\n      extensionMode: options.paletteExtensionMode,\n      keepLastColorInEnd: true,\n      count: list.length\n    });\n\n    _each(list, function (_, item) {\n      var paletteColor = palette.getNextColor();\n      item.color = _isString(item.color) && item.color || paletteColor || \"none\";\n      item.className = \"dxg-range dxg-range-\" + item.classIndex;\n      delete item.classIndex;\n    });\n\n    _each(list, function (_, item) {\n      var i;\n      var ii;\n      var sub;\n      var subs;\n      var range;\n      var newRanges = [];\n      var newBackgroundRanges = [];\n\n      for (i = 0, ii = ranges.length; i < ii; ++i) {\n        range = ranges[i];\n        subs = subtractSegment(range.start, range.end, item.start, item.end);\n        (sub = subs[0]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\n        (sub = subs[1]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\n      }\n\n      newRanges.push(item);\n      ranges = newRanges;\n\n      for (i = 0, ii = backgroundRanges.length; i < ii; ++i) {\n        range = backgroundRanges[i];\n        subs = subtractSegment(range.start, range.end, item.start, item.end);\n        (sub = subs[0]) && newBackgroundRanges.push(sub);\n        (sub = subs[1]) && newBackgroundRanges.push(sub);\n      }\n\n      backgroundRanges = newBackgroundRanges;\n    });\n\n    _each(backgroundRanges, function (_, range) {\n      range.color = backgroundColor;\n      range.className = \"dxg-range dxg-background-range\";\n      ranges.push(range);\n    });\n\n    _each(ranges, function (_, range) {\n      range.startWidth = (range.start - totalStart) / totalDelta * deltaWidth + startWidth;\n      range.endWidth = (range.end - totalStart) / totalDelta * deltaWidth + startWidth;\n    });\n\n    return ranges;\n  },\n  render: function render(options) {\n    var that = this;\n    that._options = options;\n\n    that._processOptions();\n\n    that._ranges = that._getRanges();\n\n    if (that._ranges) {\n      that.enabled = true;\n\n      that._root.linkAppend();\n    }\n\n    return that;\n  },\n  resize: function resize(layout) {\n    var that = this;\n\n    that._root.clear();\n\n    if (that._isVisible(layout)) {\n      _each(that._ranges, function (_, range) {\n        that._createRange(range, layout).attr({\n          fill: range.color,\n          \"class\": range.className\n        }).append(that._root);\n      });\n    }\n\n    return that;\n  },\n  _processOptions: null,\n  _isVisible: null,\n  _createRange: null,\n  getColorForValue: function getColorForValue(value) {\n    var color = null;\n\n    _each(this._ranges, function (_, range) {\n      if (range.start <= value && value <= range.end || range.start >= value && value >= range.end) {\n        color = range.color;\n        return false;\n      }\n    });\n\n    return color;\n  }\n});\n\nfunction subtractSegmentAsc(segmentStart, segmentEnd, otherStart, otherEnd) {\n  var result;\n\n  if (otherStart > segmentStart && otherEnd < segmentEnd) {\n    result = [{\n      start: segmentStart,\n      end: otherStart\n    }, {\n      start: otherEnd,\n      end: segmentEnd\n    }];\n  } else {\n    if (otherStart >= segmentEnd || otherEnd <= segmentStart) {\n      result = [{\n        start: segmentStart,\n        end: segmentEnd\n      }];\n    } else {\n      if (otherStart <= segmentStart && otherEnd >= segmentEnd) {\n        result = [];\n      } else {\n        if (otherStart > segmentStart) {\n          result = [{\n            start: segmentStart,\n            end: otherStart\n          }];\n        } else {\n          if (otherEnd < segmentEnd) {\n            result = [{\n              start: otherEnd,\n              end: segmentEnd\n            }];\n          }\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction subtractSegmentDesc(segmentStart, segmentEnd, otherStart, otherEnd) {\n  var result;\n\n  if (otherStart < segmentStart && otherEnd > segmentEnd) {\n    result = [{\n      start: segmentStart,\n      end: otherStart\n    }, {\n      start: otherEnd,\n      end: segmentEnd\n    }];\n  } else {\n    if (otherStart <= segmentEnd || otherEnd >= segmentStart) {\n      result = [{\n        start: segmentStart,\n        end: segmentEnd\n      }];\n    } else {\n      if (otherStart >= segmentStart && otherEnd <= segmentEnd) {\n        result = [];\n      } else {\n        if (otherStart < segmentStart) {\n          result = [{\n            start: segmentStart,\n            end: otherStart\n          }];\n        } else {\n          if (otherEnd > segmentEnd) {\n            result = [{\n              start: otherEnd,\n              end: segmentEnd\n            }];\n          }\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction isNotEmptySegmentAsc(start, end, threshold) {\n  return end - start >= threshold;\n}\n\nfunction isNotEmptySegmentDesc(start, end, threshold) {\n  return start - end >= threshold;\n}\n\nmodule.exports = BaseRangeContainer;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/gauges/base_range_container.js"],"names":["iterateUtils","require","BaseElement","_Number","_abs","Math","_isString","_isArray","Array","_isFinite","_each","BaseRangeContainer","_init","_dispose","clean","_getRanges","that","options","translator","totalStart","totalEnd","totalDelta","isNotEmptySegment","subtractSegment","list","ranges","backgroundRanges","start","end","threshold","backgroundColor","width","startWidth","endWidth","deltaWidth","rangeOptions","result","color","classIndex","i","palette","type","extensionMode","keepLastColorInEnd","count","length","paletteColor","item","newRanges","newBackgroundRanges","ii","range","subs","sub","render","resize","fill","className","_processOptions","_isVisible","_createRange","getColorForValue","value","otherStart","otherEnd","segmentEnd","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/gauges/base_range_container.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar iterateUtils = require(\"../../core/utils/iterator\");\r\nvar BaseElement = require(\"./base_indicators\").BaseElement;\r\nvar _Number = Number;\r\nvar _abs = Math.abs;\r\nvar _isString = require(\"../../core/utils/type\").isString;\r\nvar _isArray = Array.isArray;\r\nvar _isFinite = isFinite;\r\nvar _each = iterateUtils.each;\r\nvar BaseRangeContainer = BaseElement.inherit({\r\n    _init: function() {\r\n        this._root = this._renderer.g().attr({\r\n            \"class\": \"dxg-range-container\"\r\n        }).linkOn(this._container, \"range-container\")\r\n    },\r\n    _dispose: function() {\r\n        this._root.linkOff()\r\n    },\r\n    clean: function() {\r\n        this._root.linkRemove().clear();\r\n        this._options = this.enabled = null;\r\n        return this\r\n    },\r\n    _getRanges: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var translator = that._translator;\r\n        var totalStart = translator.getDomain()[0];\r\n        var totalEnd = translator.getDomain()[1];\r\n        var totalDelta = totalEnd - totalStart;\r\n        var isNotEmptySegment = totalDelta >= 0 ? isNotEmptySegmentAsc : isNotEmptySegmentDesc;\r\n        var subtractSegment = totalDelta >= 0 ? subtractSegmentAsc : subtractSegmentDesc;\r\n        var list = [];\r\n        var ranges = [];\r\n        var backgroundRanges = [{\r\n            start: totalStart,\r\n            end: totalEnd\r\n        }];\r\n        var threshold = _abs(totalDelta) / 1e4;\r\n        var palette;\r\n        var backgroundColor = _isString(options.backgroundColor) ? options.backgroundColor : \"none\";\r\n        var width = options.width || {};\r\n        var startWidth = _Number(width > 0 ? width : width.start);\r\n        var endWidth = _Number(width > 0 ? width : width.end);\r\n        var deltaWidth = endWidth - startWidth;\r\n        if (void 0 !== options.ranges && !_isArray(options.ranges)) {\r\n            return null\r\n        }\r\n        if (!(startWidth >= 0 && endWidth >= 0 && startWidth + endWidth > 0)) {\r\n            return null\r\n        }\r\n        list = (_isArray(options.ranges) ? options.ranges : []).reduce(function(result, rangeOptions, i) {\r\n            rangeOptions = rangeOptions || {};\r\n            var start = translator.adjust(rangeOptions.startValue);\r\n            var end = translator.adjust(rangeOptions.endValue);\r\n            if (_isFinite(start) && _isFinite(end) && isNotEmptySegment(start, end, threshold)) {\r\n                result.push({\r\n                    start: start,\r\n                    end: end,\r\n                    color: rangeOptions.color,\r\n                    classIndex: i\r\n                })\r\n            }\r\n            return result\r\n        }, []);\r\n        palette = that._themeManager.createPalette(options.palette, {\r\n            type: \"indicatingSet\",\r\n            extensionMode: options.paletteExtensionMode,\r\n            keepLastColorInEnd: true,\r\n            count: list.length\r\n        });\r\n        _each(list, function(_, item) {\r\n            var paletteColor = palette.getNextColor();\r\n            item.color = _isString(item.color) && item.color || paletteColor || \"none\";\r\n            item.className = \"dxg-range dxg-range-\" + item.classIndex;\r\n            delete item.classIndex\r\n        });\r\n        _each(list, function(_, item) {\r\n            var i;\r\n            var ii;\r\n            var sub;\r\n            var subs;\r\n            var range;\r\n            var newRanges = [];\r\n            var newBackgroundRanges = [];\r\n            for (i = 0, ii = ranges.length; i < ii; ++i) {\r\n                range = ranges[i];\r\n                subs = subtractSegment(range.start, range.end, item.start, item.end);\r\n                (sub = subs[0]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\r\n                (sub = subs[1]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub)\r\n            }\r\n            newRanges.push(item);\r\n            ranges = newRanges;\r\n            for (i = 0, ii = backgroundRanges.length; i < ii; ++i) {\r\n                range = backgroundRanges[i];\r\n                subs = subtractSegment(range.start, range.end, item.start, item.end);\r\n                (sub = subs[0]) && newBackgroundRanges.push(sub);\r\n                (sub = subs[1]) && newBackgroundRanges.push(sub)\r\n            }\r\n            backgroundRanges = newBackgroundRanges\r\n        });\r\n        _each(backgroundRanges, function(_, range) {\r\n            range.color = backgroundColor;\r\n            range.className = \"dxg-range dxg-background-range\";\r\n            ranges.push(range)\r\n        });\r\n        _each(ranges, function(_, range) {\r\n            range.startWidth = (range.start - totalStart) / totalDelta * deltaWidth + startWidth;\r\n            range.endWidth = (range.end - totalStart) / totalDelta * deltaWidth + startWidth\r\n        });\r\n        return ranges\r\n    },\r\n    render: function(options) {\r\n        var that = this;\r\n        that._options = options;\r\n        that._processOptions();\r\n        that._ranges = that._getRanges();\r\n        if (that._ranges) {\r\n            that.enabled = true;\r\n            that._root.linkAppend()\r\n        }\r\n        return that\r\n    },\r\n    resize: function(layout) {\r\n        var that = this;\r\n        that._root.clear();\r\n        if (that._isVisible(layout)) {\r\n            _each(that._ranges, function(_, range) {\r\n                that._createRange(range, layout).attr({\r\n                    fill: range.color,\r\n                    \"class\": range.className\r\n                }).append(that._root)\r\n            })\r\n        }\r\n        return that\r\n    },\r\n    _processOptions: null,\r\n    _isVisible: null,\r\n    _createRange: null,\r\n    getColorForValue: function(value) {\r\n        var color = null;\r\n        _each(this._ranges, function(_, range) {\r\n            if (range.start <= value && value <= range.end || range.start >= value && value >= range.end) {\r\n                color = range.color;\r\n                return false\r\n            }\r\n        });\r\n        return color\r\n    }\r\n});\r\n\r\nfunction subtractSegmentAsc(segmentStart, segmentEnd, otherStart, otherEnd) {\r\n    var result;\r\n    if (otherStart > segmentStart && otherEnd < segmentEnd) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: otherStart\r\n        }, {\r\n            start: otherEnd,\r\n            end: segmentEnd\r\n        }]\r\n    } else {\r\n        if (otherStart >= segmentEnd || otherEnd <= segmentStart) {\r\n            result = [{\r\n                start: segmentStart,\r\n                end: segmentEnd\r\n            }]\r\n        } else {\r\n            if (otherStart <= segmentStart && otherEnd >= segmentEnd) {\r\n                result = []\r\n            } else {\r\n                if (otherStart > segmentStart) {\r\n                    result = [{\r\n                        start: segmentStart,\r\n                        end: otherStart\r\n                    }]\r\n                } else {\r\n                    if (otherEnd < segmentEnd) {\r\n                        result = [{\r\n                            start: otherEnd,\r\n                            end: segmentEnd\r\n                        }]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction subtractSegmentDesc(segmentStart, segmentEnd, otherStart, otherEnd) {\r\n    var result;\r\n    if (otherStart < segmentStart && otherEnd > segmentEnd) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: otherStart\r\n        }, {\r\n            start: otherEnd,\r\n            end: segmentEnd\r\n        }]\r\n    } else {\r\n        if (otherStart <= segmentEnd || otherEnd >= segmentStart) {\r\n            result = [{\r\n                start: segmentStart,\r\n                end: segmentEnd\r\n            }]\r\n        } else {\r\n            if (otherStart >= segmentStart && otherEnd <= segmentEnd) {\r\n                result = []\r\n            } else {\r\n                if (otherStart < segmentStart) {\r\n                    result = [{\r\n                        start: segmentStart,\r\n                        end: otherStart\r\n                    }]\r\n                } else {\r\n                    if (otherEnd > segmentEnd) {\r\n                        result = [{\r\n                            start: otherEnd,\r\n                            end: segmentEnd\r\n                        }]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction isNotEmptySegmentAsc(start, end, threshold) {\r\n    return end - start >= threshold\r\n}\r\n\r\nfunction isNotEmptySegmentDesc(start, end, threshold) {\r\n    return start - end >= threshold\r\n}\r\nmodule.exports = BaseRangeContainer;\r\n"]},"metadata":{},"sourceType":"module"}