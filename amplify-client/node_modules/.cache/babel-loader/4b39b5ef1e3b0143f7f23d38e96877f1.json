{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.state_storing_core.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _storage = require(\"../../core/utils/storage\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DATE_REGEX = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/;\n\nvar parseDates = function parseDates(state) {\n  if (!state) {\n    return;\n  }\n\n  (0, _iterator.each)(state, function (key, value) {\n    var date;\n\n    if ((0, _type.isPlainObject)(value) || Array.isArray(value)) {\n      parseDates(value);\n    } else {\n      if (\"string\" === typeof value) {\n        date = DATE_REGEX.exec(value);\n\n        if (date) {\n          state[key] = new Date(Date.UTC(+date[1], +date[2] - 1, +date[3], +date[4], +date[5], +date[6]));\n        }\n      }\n    }\n  });\n};\n\nexports.StateStoringController = _uiGrid_core2.default.ViewController.inherit(function () {\n  var getStorage = function getStorage(options) {\n    var storage = \"sessionStorage\" === options.type ? (0, _storage.sessionStorage)() : (0, _window.getWindow)().localStorage;\n\n    if (!storage) {\n      if (\"file:\" === (0, _window.getWindow)().location.protocol && _browser2.default.msie) {\n        throw new Error(\"E1038\");\n      } else {\n        throw new Error(\"E1007\");\n      }\n    }\n\n    return storage;\n  };\n\n  var getUniqueStorageKey = function getUniqueStorageKey(options) {\n    return (0, _type.isDefined)(options.storageKey) ? options.storageKey : \"storage\";\n  };\n\n  return {\n    _loadState: function _loadState() {\n      var options = this.option(\"stateStoring\");\n\n      if (\"custom\" === options.type) {\n        return options.customLoad && options.customLoad();\n      }\n\n      try {\n        return JSON.parse(getStorage(options).getItem(getUniqueStorageKey(options)));\n      } catch (e) {\n        _ui2.default.log(e.message);\n      }\n    },\n    _saveState: function _saveState(state) {\n      var options = this.option(\"stateStoring\");\n\n      if (\"custom\" === options.type) {\n        options.customSave && options.customSave(state);\n        return;\n      }\n\n      try {\n        getStorage(options).setItem(getUniqueStorageKey(options), JSON.stringify(state));\n      } catch (e) {}\n    },\n    publicMethods: function publicMethods() {\n      return [\"state\"];\n    },\n    isEnabled: function isEnabled() {\n      return this.option(\"stateStoring.enabled\");\n    },\n    init: function init() {\n      var that = this;\n      that._state = {};\n      that._isLoaded = false;\n      that._isLoading = false;\n\n      that._windowUnloadHandler = function () {\n        if (void 0 !== that._savingTimeoutID) {\n          that._saveState(that.state());\n        }\n      };\n\n      _events_engine2.default.on((0, _window.getWindow)(), \"unload\", that._windowUnloadHandler);\n\n      return that;\n    },\n    isLoaded: function isLoaded() {\n      return this._isLoaded;\n    },\n    isLoading: function isLoading() {\n      return this._isLoading;\n    },\n    load: function load() {\n      var that = this;\n      var loadResult;\n      that._isLoading = true;\n      loadResult = (0, _deferred.fromPromise)(that._loadState());\n      loadResult.done(function (state) {\n        that._isLoaded = true;\n        that._isLoading = false;\n        that.state(state);\n      });\n      return loadResult;\n    },\n    state: function state(_state) {\n      var that = this;\n\n      if (!arguments.length) {\n        return (0, _extend.extend)(true, {}, that._state);\n      } else {\n        that._state = (0, _extend.extend)({}, _state);\n        parseDates(that._state);\n      }\n    },\n    save: function save() {\n      var that = this;\n      clearTimeout(that._savingTimeoutID);\n      that._savingTimeoutID = setTimeout(function () {\n        that._saveState(that.state());\n\n        that._savingTimeoutID = void 0;\n      }, that.option(\"stateStoring.savingTimeout\"));\n    },\n    optionChanged: function optionChanged(args) {\n      var that = this;\n\n      switch (args.name) {\n        case \"stateStoring\":\n          if (that.isEnabled() && !that.isLoading()) {\n            that.load();\n          }\n\n          args.handled = true;\n          break;\n\n        default:\n          that.callBase(args);\n      }\n    },\n    dispose: function dispose() {\n      clearTimeout(this._savingTimeoutID);\n\n      _events_engine2.default.off((0, _window.getWindow)(), \"unload\", this._windowUnloadHandler);\n    }\n  };\n}());","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.state_storing_core.js"],"names":["_events_engine","require","_events_engine2","_interopRequireDefault","_window","_uiGrid_core","_uiGrid_core2","_ui","_ui2","_browser","_browser2","_storage","_extend","_iterator","_type","_deferred","obj","DATE_REGEX","parseDates","Array","date","state","Date","exports","getStorage","storage","options","getUniqueStorageKey","_loadState","JSON","e","_saveState","publicMethods","isEnabled","init","that","isLoaded","isLoading","load","loadResult","arguments","save","clearTimeout","setTimeout","optionChanged","args","dispose"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.state_storing_core.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _ui = require(\"../widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _storage = require(\"../../core/utils/storage\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DATE_REGEX = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/;\r\nvar parseDates = function parseDates(state) {\r\n    if (!state) {\r\n        return\r\n    }(0, _iterator.each)(state, function(key, value) {\r\n        var date;\r\n        if ((0, _type.isPlainObject)(value) || Array.isArray(value)) {\r\n            parseDates(value)\r\n        } else {\r\n            if (\"string\" === typeof value) {\r\n                date = DATE_REGEX.exec(value);\r\n                if (date) {\r\n                    state[key] = new Date(Date.UTC(+date[1], +date[2] - 1, +date[3], +date[4], +date[5], +date[6]))\r\n                }\r\n            }\r\n        }\r\n    })\r\n};\r\nexports.StateStoringController = _uiGrid_core2.default.ViewController.inherit(function() {\r\n    var getStorage = function(options) {\r\n        var storage = \"sessionStorage\" === options.type ? (0, _storage.sessionStorage)() : (0, _window.getWindow)().localStorage;\r\n        if (!storage) {\r\n            if (\"file:\" === (0, _window.getWindow)().location.protocol && _browser2.default.msie) {\r\n                throw new Error(\"E1038\")\r\n            } else {\r\n                throw new Error(\"E1007\")\r\n            }\r\n        }\r\n        return storage\r\n    };\r\n    var getUniqueStorageKey = function(options) {\r\n        return (0, _type.isDefined)(options.storageKey) ? options.storageKey : \"storage\"\r\n    };\r\n    return {\r\n        _loadState: function() {\r\n            var options = this.option(\"stateStoring\");\r\n            if (\"custom\" === options.type) {\r\n                return options.customLoad && options.customLoad()\r\n            }\r\n            try {\r\n                return JSON.parse(getStorage(options).getItem(getUniqueStorageKey(options)))\r\n            } catch (e) {\r\n                _ui2.default.log(e.message)\r\n            }\r\n        },\r\n        _saveState: function(state) {\r\n            var options = this.option(\"stateStoring\");\r\n            if (\"custom\" === options.type) {\r\n                options.customSave && options.customSave(state);\r\n                return\r\n            }\r\n            try {\r\n                getStorage(options).setItem(getUniqueStorageKey(options), JSON.stringify(state))\r\n            } catch (e) {}\r\n        },\r\n        publicMethods: function() {\r\n            return [\"state\"]\r\n        },\r\n        isEnabled: function() {\r\n            return this.option(\"stateStoring.enabled\")\r\n        },\r\n        init: function() {\r\n            var that = this;\r\n            that._state = {};\r\n            that._isLoaded = false;\r\n            that._isLoading = false;\r\n            that._windowUnloadHandler = function() {\r\n                if (void 0 !== that._savingTimeoutID) {\r\n                    that._saveState(that.state())\r\n                }\r\n            };\r\n            _events_engine2.default.on((0, _window.getWindow)(), \"unload\", that._windowUnloadHandler);\r\n            return that\r\n        },\r\n        isLoaded: function() {\r\n            return this._isLoaded\r\n        },\r\n        isLoading: function() {\r\n            return this._isLoading\r\n        },\r\n        load: function() {\r\n            var that = this;\r\n            var loadResult;\r\n            that._isLoading = true;\r\n            loadResult = (0, _deferred.fromPromise)(that._loadState());\r\n            loadResult.done(function(state) {\r\n                that._isLoaded = true;\r\n                that._isLoading = false;\r\n                that.state(state)\r\n            });\r\n            return loadResult\r\n        },\r\n        state: function(_state) {\r\n            var that = this;\r\n            if (!arguments.length) {\r\n                return (0, _extend.extend)(true, {}, that._state)\r\n            } else {\r\n                that._state = (0, _extend.extend)({}, _state);\r\n                parseDates(that._state)\r\n            }\r\n        },\r\n        save: function() {\r\n            var that = this;\r\n            clearTimeout(that._savingTimeoutID);\r\n            that._savingTimeoutID = setTimeout(function() {\r\n                that._saveState(that.state());\r\n                that._savingTimeoutID = void 0\r\n            }, that.option(\"stateStoring.savingTimeout\"))\r\n        },\r\n        optionChanged: function(args) {\r\n            var that = this;\r\n            switch (args.name) {\r\n                case \"stateStoring\":\r\n                    if (that.isEnabled() && !that.isLoading()) {\r\n                        that.load()\r\n                    }\r\n                    args.handled = true;\r\n                    break;\r\n                default:\r\n                    that.callBase(args)\r\n            }\r\n        },\r\n        dispose: function() {\r\n            clearTimeout(this._savingTimeoutID);\r\n            _events_engine2.default.off((0, _window.getWindow)(), \"unload\", this._windowUnloadHandler)\r\n        }\r\n    }\r\n}());\r\n"]},"metadata":{},"sourceType":"module"}