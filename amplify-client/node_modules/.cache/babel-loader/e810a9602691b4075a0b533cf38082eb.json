{"ast":null,"code":"import _inherits from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _classCallCheck from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport var defaultThrottleConfig = {\n  leading: true,\n  trailing: false\n};\nexport function throttle(durationSelector) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultThrottleConfig;\n  return function (source) {\n    return source.lift(new ThrottleOperator(durationSelector, config.leading, config.trailing));\n  };\n}\n\nvar ThrottleOperator = /*#__PURE__*/function () {\n  function ThrottleOperator(durationSelector, leading, trailing) {\n    _classCallCheck(this, ThrottleOperator);\n\n    this.durationSelector = durationSelector;\n    this.leading = leading;\n    this.trailing = trailing;\n  }\n\n  _createClass(ThrottleOperator, [{\n    key: \"call\",\n    value: function call(subscriber, source) {\n      return source.subscribe(new ThrottleSubscriber(subscriber, this.durationSelector, this.leading, this.trailing));\n    }\n  }]);\n\n  return ThrottleOperator;\n}();\n\nvar ThrottleSubscriber = /*#__PURE__*/function (_OuterSubscriber) {\n  _inherits(ThrottleSubscriber, _OuterSubscriber);\n\n  var _super = _createSuper(ThrottleSubscriber);\n\n  function ThrottleSubscriber(destination, durationSelector, _leading, _trailing) {\n    var _this;\n\n    _classCallCheck(this, ThrottleSubscriber);\n\n    _this = _super.call(this, destination);\n    _this.destination = destination;\n    _this.durationSelector = durationSelector;\n    _this._leading = _leading;\n    _this._trailing = _trailing;\n    _this._hasValue = false;\n    return _this;\n  }\n\n  _createClass(ThrottleSubscriber, [{\n    key: \"_next\",\n    value: function _next(value) {\n      this._hasValue = true;\n      this._sendValue = value;\n\n      if (!this._throttled) {\n        if (this._leading) {\n          this.send();\n        } else {\n          this.throttle(value);\n        }\n      }\n    }\n  }, {\n    key: \"send\",\n    value: function send() {\n      var _hasValue = this._hasValue,\n          _sendValue = this._sendValue;\n\n      if (_hasValue) {\n        this.destination.next(_sendValue);\n        this.throttle(_sendValue);\n      }\n\n      this._hasValue = false;\n      this._sendValue = null;\n    }\n  }, {\n    key: \"throttle\",\n    value: function throttle(value) {\n      var duration = this.tryDurationSelector(value);\n\n      if (!!duration) {\n        this.add(this._throttled = subscribeToResult(this, duration));\n      }\n    }\n  }, {\n    key: \"tryDurationSelector\",\n    value: function tryDurationSelector(value) {\n      try {\n        return this.durationSelector(value);\n      } catch (err) {\n        this.destination.error(err);\n        return null;\n      }\n    }\n  }, {\n    key: \"throttlingDone\",\n    value: function throttlingDone() {\n      var _throttled = this._throttled,\n          _trailing = this._trailing;\n\n      if (_throttled) {\n        _throttled.unsubscribe();\n      }\n\n      this._throttled = null;\n\n      if (_trailing) {\n        this.send();\n      }\n    }\n  }, {\n    key: \"notifyNext\",\n    value: function notifyNext(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n      this.throttlingDone();\n    }\n  }, {\n    key: \"notifyComplete\",\n    value: function notifyComplete() {\n      this.throttlingDone();\n    }\n  }]);\n\n  return ThrottleSubscriber;\n}(OuterSubscriber);","map":{"version":3,"sources":["../../../src/internal/operators/throttle.ts"],"names":[],"mappings":"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","sourcesContent":["import { OuterSubscriber } from '../OuterSubscriber';\r\nimport { subscribeToResult } from '../util/subscribeToResult';\r\nexport const defaultThrottleConfig = {\r\n    leading: true,\r\n    trailing: false\r\n};\r\nexport function throttle(durationSelector, config = defaultThrottleConfig) {\r\n    return (source) => source.lift(new ThrottleOperator(durationSelector, config.leading, config.trailing));\r\n}\r\nclass ThrottleOperator {\r\n    constructor(durationSelector, leading, trailing) {\r\n        this.durationSelector = durationSelector;\r\n        this.leading = leading;\r\n        this.trailing = trailing;\r\n    }\r\n    call(subscriber, source) {\r\n        return source.subscribe(new ThrottleSubscriber(subscriber, this.durationSelector, this.leading, this.trailing));\r\n    }\r\n}\r\nclass ThrottleSubscriber extends OuterSubscriber {\r\n    constructor(destination, durationSelector, _leading, _trailing) {\r\n        super(destination);\r\n        this.destination = destination;\r\n        this.durationSelector = durationSelector;\r\n        this._leading = _leading;\r\n        this._trailing = _trailing;\r\n        this._hasValue = false;\r\n    }\r\n    _next(value) {\r\n        this._hasValue = true;\r\n        this._sendValue = value;\r\n        if (!this._throttled) {\r\n            if (this._leading) {\r\n                this.send();\r\n            }\r\n            else {\r\n                this.throttle(value);\r\n            }\r\n        }\r\n    }\r\n    send() {\r\n        const { _hasValue, _sendValue } = this;\r\n        if (_hasValue) {\r\n            this.destination.next(_sendValue);\r\n            this.throttle(_sendValue);\r\n        }\r\n        this._hasValue = false;\r\n        this._sendValue = null;\r\n    }\r\n    throttle(value) {\r\n        const duration = this.tryDurationSelector(value);\r\n        if (!!duration) {\r\n            this.add(this._throttled = subscribeToResult(this, duration));\r\n        }\r\n    }\r\n    tryDurationSelector(value) {\r\n        try {\r\n            return this.durationSelector(value);\r\n        }\r\n        catch (err) {\r\n            this.destination.error(err);\r\n            return null;\r\n        }\r\n    }\r\n    throttlingDone() {\r\n        const { _throttled, _trailing } = this;\r\n        if (_throttled) {\r\n            _throttled.unsubscribe();\r\n        }\r\n        this._throttled = null;\r\n        if (_trailing) {\r\n            this.send();\r\n        }\r\n    }\r\n    notifyNext(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\r\n        this.throttlingDone();\r\n    }\r\n    notifyComplete() {\r\n        this.throttlingDone();\r\n    }\r\n}\r\n//# sourceMappingURL=throttle.js.map"]},"metadata":{},"sourceType":"module"}