{"ast":null,"code":"/**\r\n * DevExtreme (ui/data_grid/aggregate_calculator.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _class = require(\"../../core/class\");\n\nvar _class2 = _interopRequireDefault(_class);\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _errors = require(\"../../data/errors\");\n\nvar _utils = require(\"../../data/utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction depthFirstSearch(i, depth, root, callback) {\n  var j = 0;\n\n  if (i < depth) {\n    for (; j < root.items.length; j++) {\n      depthFirstSearch(i + 1, depth, root.items[j], callback);\n    }\n  }\n\n  if (i === depth) {\n    callback(root);\n  }\n}\n\nfunction map(array, callback) {\n  var i;\n  var result;\n\n  if (\"map\" in array) {\n    return array.map(callback);\n  }\n\n  result = new Array(array.length);\n\n  for (i in array) {\n    result[i] = callback(array[i], i);\n  }\n\n  return result;\n}\n\nfunction isEmpty(x) {\n  return x !== x || \"\" === x || null === x || void 0 === x;\n}\n\nfunction isCount(aggregator) {\n  return aggregator === _utils.aggregators.count;\n}\n\nfunction normalizeAggregate(aggregate) {\n  var selector = (0, _data.compileGetter)(aggregate.selector);\n  var skipEmptyValues = \"skipEmptyValues\" in aggregate ? aggregate.skipEmptyValues : true;\n  var aggregator = aggregate.aggregator;\n\n  if (\"string\" === typeof aggregator) {\n    aggregator = _utils.aggregators[aggregator];\n\n    if (!aggregator) {\n      throw _errors.errors.Error(\"E4001\", aggregate.aggregator);\n    }\n  }\n\n  return {\n    selector: selector,\n    aggregator: aggregator,\n    skipEmptyValues: skipEmptyValues\n  };\n}\n\nmodule.exports = _class2.default.inherit({\n  ctor: function ctor(options) {\n    this._data = options.data;\n    this._groupLevel = options.groupLevel || 0;\n    this._totalAggregates = map(options.totalAggregates || [], normalizeAggregate);\n    this._groupAggregates = map(options.groupAggregates || [], normalizeAggregate);\n    this._totals = [];\n  },\n  calculate: function calculate() {\n    if (this._totalAggregates.length) {\n      this._calculateTotals(0, {\n        items: this._data\n      });\n    }\n\n    if (this._groupAggregates.length && this._groupLevel > 0) {\n      this._calculateGroups({\n        items: this._data\n      });\n    }\n  },\n  totalAggregates: function totalAggregates() {\n    return this._totals;\n  },\n  _aggregate: function _aggregate(aggregates, data, container) {\n    var i;\n    var j;\n    var length = data.items ? data.items.length : 0;\n\n    for (i = 0; i < aggregates.length; i++) {\n      if (isCount(aggregates[i].aggregator)) {\n        container[i] = (container[i] || 0) + length;\n        continue;\n      }\n\n      for (j = 0; j < length; j++) {\n        this._accumulate(i, aggregates[i], container, data.items[j]);\n      }\n    }\n  },\n  _calculateTotals: function _calculateTotals(level, data) {\n    var i;\n\n    if (0 === level) {\n      this._totals = this._seed(this._totalAggregates);\n    }\n\n    if (level === this._groupLevel) {\n      this._aggregate(this._totalAggregates, data, this._totals);\n    } else {\n      for (i = 0; i < data.items.length; i++) {\n        this._calculateTotals(level + 1, data.items[i]);\n      }\n    }\n\n    if (0 === level) {\n      this._totals = this._finalize(this._totalAggregates, this._totals);\n    }\n  },\n  _calculateGroups: function _calculateGroups(root) {\n    var maxLevel = this._groupLevel;\n    var currentLevel = maxLevel + 1;\n\n    var seedFn = this._seed.bind(this, this._groupAggregates);\n\n    var stepFn = this._aggregate.bind(this, this._groupAggregates);\n\n    var finalizeFn = this._finalize.bind(this, this._groupAggregates);\n\n    function aggregator(node) {\n      node.aggregates = seedFn(currentLevel - 1);\n\n      if (currentLevel === maxLevel) {\n        stepFn(node, node.aggregates);\n      } else {\n        depthFirstSearch(currentLevel, maxLevel, node, function (innerNode) {\n          stepFn(innerNode, node.aggregates);\n        });\n      }\n\n      node.aggregates = finalizeFn(node.aggregates);\n    }\n\n    while (--currentLevel > 0) {\n      depthFirstSearch(0, currentLevel, root, aggregator);\n    }\n  },\n  _seed: function _seed(aggregates, groupIndex) {\n    return map(aggregates, function (aggregate) {\n      var aggregator = aggregate.aggregator;\n      var seed = \"seed\" in aggregator ? (0, _type.isFunction)(aggregator.seed) ? aggregator.seed(groupIndex) : aggregator.seed : NaN;\n      return seed;\n    });\n  },\n  _accumulate: function _accumulate(aggregateIndex, aggregate, results, item) {\n    var value = aggregate.selector(item);\n    var aggregator = aggregate.aggregator;\n    var skipEmptyValues = aggregate.skipEmptyValues;\n\n    if (skipEmptyValues && isEmpty(value)) {\n      return;\n    }\n\n    if (results[aggregateIndex] !== results[aggregateIndex]) {\n      results[aggregateIndex] = value;\n    } else {\n      results[aggregateIndex] = aggregator.step(results[aggregateIndex], value);\n    }\n  },\n  _finalize: function _finalize(aggregates, results) {\n    return map(aggregates, function (aggregate, index) {\n      var fin = aggregate.aggregator.finalize;\n      return fin ? fin(results[index]) : results[index];\n    });\n  }\n});","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/data_grid/aggregate_calculator.js"],"names":["_class","require","_class2","_interopRequireDefault","_data","_type","_errors","_utils","obj","j","i","root","depthFirstSearch","callback","array","result","x","aggregator","selector","aggregate","skipEmptyValues","module","ctor","options","map","calculate","items","totalAggregates","_aggregate","length","data","aggregates","isCount","container","_calculateTotals","level","_calculateGroups","maxLevel","currentLevel","seedFn","stepFn","finalizeFn","node","_seed","seed","_accumulate","value","isEmpty","results","_finalize","fin"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/data_grid/aggregate_calculator.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _class = require(\"../../core/class\");\r\nvar _class2 = _interopRequireDefault(_class);\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _errors = require(\"../../data/errors\");\r\nvar _utils = require(\"../../data/utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction depthFirstSearch(i, depth, root, callback) {\r\n    var j = 0;\r\n    if (i < depth) {\r\n        for (; j < root.items.length; j++) {\r\n            depthFirstSearch(i + 1, depth, root.items[j], callback)\r\n        }\r\n    }\r\n    if (i === depth) {\r\n        callback(root)\r\n    }\r\n}\r\n\r\nfunction map(array, callback) {\r\n    var i;\r\n    var result;\r\n    if (\"map\" in array) {\r\n        return array.map(callback)\r\n    }\r\n    result = new Array(array.length);\r\n    for (i in array) {\r\n        result[i] = callback(array[i], i)\r\n    }\r\n    return result\r\n}\r\n\r\nfunction isEmpty(x) {\r\n    return x !== x || \"\" === x || null === x || void 0 === x\r\n}\r\n\r\nfunction isCount(aggregator) {\r\n    return aggregator === _utils.aggregators.count\r\n}\r\n\r\nfunction normalizeAggregate(aggregate) {\r\n    var selector = (0, _data.compileGetter)(aggregate.selector);\r\n    var skipEmptyValues = \"skipEmptyValues\" in aggregate ? aggregate.skipEmptyValues : true;\r\n    var aggregator = aggregate.aggregator;\r\n    if (\"string\" === typeof aggregator) {\r\n        aggregator = _utils.aggregators[aggregator];\r\n        if (!aggregator) {\r\n            throw _errors.errors.Error(\"E4001\", aggregate.aggregator)\r\n        }\r\n    }\r\n    return {\r\n        selector: selector,\r\n        aggregator: aggregator,\r\n        skipEmptyValues: skipEmptyValues\r\n    }\r\n}\r\nmodule.exports = _class2.default.inherit({\r\n    ctor: function(options) {\r\n        this._data = options.data;\r\n        this._groupLevel = options.groupLevel || 0;\r\n        this._totalAggregates = map(options.totalAggregates || [], normalizeAggregate);\r\n        this._groupAggregates = map(options.groupAggregates || [], normalizeAggregate);\r\n        this._totals = []\r\n    },\r\n    calculate: function() {\r\n        if (this._totalAggregates.length) {\r\n            this._calculateTotals(0, {\r\n                items: this._data\r\n            })\r\n        }\r\n        if (this._groupAggregates.length && this._groupLevel > 0) {\r\n            this._calculateGroups({\r\n                items: this._data\r\n            })\r\n        }\r\n    },\r\n    totalAggregates: function() {\r\n        return this._totals\r\n    },\r\n    _aggregate: function(aggregates, data, container) {\r\n        var i;\r\n        var j;\r\n        var length = data.items ? data.items.length : 0;\r\n        for (i = 0; i < aggregates.length; i++) {\r\n            if (isCount(aggregates[i].aggregator)) {\r\n                container[i] = (container[i] || 0) + length;\r\n                continue\r\n            }\r\n            for (j = 0; j < length; j++) {\r\n                this._accumulate(i, aggregates[i], container, data.items[j])\r\n            }\r\n        }\r\n    },\r\n    _calculateTotals: function(level, data) {\r\n        var i;\r\n        if (0 === level) {\r\n            this._totals = this._seed(this._totalAggregates)\r\n        }\r\n        if (level === this._groupLevel) {\r\n            this._aggregate(this._totalAggregates, data, this._totals)\r\n        } else {\r\n            for (i = 0; i < data.items.length; i++) {\r\n                this._calculateTotals(level + 1, data.items[i])\r\n            }\r\n        }\r\n        if (0 === level) {\r\n            this._totals = this._finalize(this._totalAggregates, this._totals)\r\n        }\r\n    },\r\n    _calculateGroups: function(root) {\r\n        var maxLevel = this._groupLevel;\r\n        var currentLevel = maxLevel + 1;\r\n        var seedFn = this._seed.bind(this, this._groupAggregates);\r\n        var stepFn = this._aggregate.bind(this, this._groupAggregates);\r\n        var finalizeFn = this._finalize.bind(this, this._groupAggregates);\r\n\r\n        function aggregator(node) {\r\n            node.aggregates = seedFn(currentLevel - 1);\r\n            if (currentLevel === maxLevel) {\r\n                stepFn(node, node.aggregates)\r\n            } else {\r\n                depthFirstSearch(currentLevel, maxLevel, node, function(innerNode) {\r\n                    stepFn(innerNode, node.aggregates)\r\n                })\r\n            }\r\n            node.aggregates = finalizeFn(node.aggregates)\r\n        }\r\n        while (--currentLevel > 0) {\r\n            depthFirstSearch(0, currentLevel, root, aggregator)\r\n        }\r\n    },\r\n    _seed: function(aggregates, groupIndex) {\r\n        return map(aggregates, function(aggregate) {\r\n            var aggregator = aggregate.aggregator;\r\n            var seed = \"seed\" in aggregator ? (0, _type.isFunction)(aggregator.seed) ? aggregator.seed(groupIndex) : aggregator.seed : NaN;\r\n            return seed\r\n        })\r\n    },\r\n    _accumulate: function(aggregateIndex, aggregate, results, item) {\r\n        var value = aggregate.selector(item);\r\n        var aggregator = aggregate.aggregator;\r\n        var skipEmptyValues = aggregate.skipEmptyValues;\r\n        if (skipEmptyValues && isEmpty(value)) {\r\n            return\r\n        }\r\n        if (results[aggregateIndex] !== results[aggregateIndex]) {\r\n            results[aggregateIndex] = value\r\n        } else {\r\n            results[aggregateIndex] = aggregator.step(results[aggregateIndex], value)\r\n        }\r\n    },\r\n    _finalize: function(aggregates, results) {\r\n        return map(aggregates, function(aggregate, index) {\r\n            var fin = aggregate.aggregator.finalize;\r\n            return fin ? fin(results[index]) : results[index]\r\n        })\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}