{"ast":null,"code":"/**\r\n * DevExtreme (ui/themes.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar domAdapter = require(\"../core/dom_adapter\");\n\nvar windowUtils = require(\"../core/utils/window\");\n\nvar window = windowUtils.getWindow();\n\nvar Deferred = require(\"../core/utils/deferred\").Deferred;\n\nvar errors = require(\"./widget/ui.errors\");\n\nvar domUtils = require(\"../core/utils/dom\");\n\nvar readyCallbacks = require(\"../core/utils/ready_callbacks\");\n\nvar ready = readyCallbacks.add;\n\nvar each = require(\"../core/utils/iterator\").each;\n\nvar devices = require(\"../core/devices\");\n\nvar viewPortUtils = require(\"../core/utils/view_port\");\n\nvar themeReadyCallback = require(\"./themes_callback\");\n\nvar viewPort = viewPortUtils.value;\n\nvar Promise = require(\"../core/polyfills/promise\");\n\nvar viewPortChanged = viewPortUtils.changeCallback;\nvar DX_LINK_SELECTOR = \"link[rel=dx-theme]\";\nvar THEME_ATTR = \"data-theme\";\nvar ACTIVE_ATTR = \"data-active\";\nvar DX_HAIRLINES_CLASS = \"dx-hairlines\";\nvar context;\nvar $activeThemeLink;\nvar knownThemes;\nvar currentThemeName;\nvar pendingThemeName;\nvar timerId;\nvar THEME_MARKER_PREFIX = \"dx.\";\n\nfunction readThemeMarker() {\n  if (!windowUtils.hasWindow()) {\n    return null;\n  }\n\n  var element = $(\"<div>\", context).addClass(\"dx-theme-marker\").appendTo(context.documentElement);\n  var result;\n\n  try {\n    result = element.css(\"fontFamily\");\n\n    if (!result) {\n      return null;\n    }\n\n    result = result.replace(/[\"']/g, \"\");\n\n    if (result.substr(0, THEME_MARKER_PREFIX.length) !== THEME_MARKER_PREFIX) {\n      return null;\n    }\n\n    return result.substr(THEME_MARKER_PREFIX.length);\n  } finally {\n    element.remove();\n  }\n}\n\nfunction waitForThemeLoad(themeName) {\n  var waitStartTime;\n  pendingThemeName = themeName;\n\n  function handleLoaded() {\n    pendingThemeName = null;\n    themeReadyCallback.fire();\n    themeReadyCallback.empty();\n  }\n\n  if (isPendingThemeLoaded()) {\n    handleLoaded();\n  } else {\n    waitStartTime = Date.now();\n    timerId = setInterval(function () {\n      var isLoaded = isPendingThemeLoaded();\n      var isTimeout = !isLoaded && Date.now() - waitStartTime > 15e3;\n\n      if (isTimeout) {\n        errors.log(\"W0004\", pendingThemeName);\n      }\n\n      if (isLoaded || isTimeout) {\n        clearInterval(timerId);\n        timerId = void 0;\n        handleLoaded();\n      }\n    }, 10);\n  }\n}\n\nfunction isPendingThemeLoaded() {\n  return !pendingThemeName || readThemeMarker() === pendingThemeName;\n}\n\nfunction processMarkup() {\n  var $allThemeLinks = $(DX_LINK_SELECTOR, context);\n\n  if (!$allThemeLinks.length) {\n    return;\n  }\n\n  knownThemes = {};\n  $activeThemeLink = $(domUtils.createMarkupFromString(\"<link rel=stylesheet>\"), context);\n  $allThemeLinks.each(function () {\n    var link = $(this, context);\n    var fullThemeName = link.attr(THEME_ATTR);\n    var url = link.attr(\"href\");\n    var isActive = \"true\" === link.attr(ACTIVE_ATTR);\n    knownThemes[fullThemeName] = {\n      url: url,\n      isActive: isActive\n    };\n  });\n  $allThemeLinks.last().after($activeThemeLink);\n  $allThemeLinks.remove();\n}\n\nfunction resolveFullThemeName(desiredThemeName) {\n  var desiredThemeParts = desiredThemeName ? desiredThemeName.split(\".\") : [];\n  var result = null;\n\n  if (knownThemes) {\n    if (desiredThemeName in knownThemes) {\n      return desiredThemeName;\n    }\n\n    each(knownThemes, function (knownThemeName, themeData) {\n      var knownThemeParts = knownThemeName.split(\".\");\n\n      if (desiredThemeParts[0] && knownThemeParts[0] !== desiredThemeParts[0]) {\n        return;\n      }\n\n      if (desiredThemeParts[1] && desiredThemeParts[1] !== knownThemeParts[1]) {\n        return;\n      }\n\n      if (desiredThemeParts[2] && desiredThemeParts[2] !== knownThemeParts[2]) {\n        return;\n      }\n\n      if (!result || themeData.isActive) {\n        result = knownThemeName;\n      }\n\n      if (themeData.isActive) {\n        return false;\n      }\n    });\n  }\n\n  return result;\n}\n\nfunction initContext(newContext) {\n  try {\n    if (newContext !== context) {\n      knownThemes = null;\n    }\n  } catch (x) {\n    knownThemes = null;\n  }\n\n  context = newContext;\n}\n\nfunction init(options) {\n  options = options || {};\n  initContext(options.context || domAdapter.getDocument());\n\n  if (!context) {\n    return;\n  }\n\n  processMarkup();\n  currentThemeName = void 0;\n  current(options);\n}\n\nfunction current(options) {\n  if (!arguments.length) {\n    currentThemeName = currentThemeName || readThemeMarker();\n    return currentThemeName;\n  }\n\n  detachCssClasses(viewPort());\n  options = options || {};\n\n  if (\"string\" === typeof options) {\n    options = {\n      theme: options\n    };\n  }\n\n  var isAutoInit = options._autoInit;\n  var loadCallback = options.loadCallback;\n  var currentThemeData;\n  currentThemeName = resolveFullThemeName(options.theme || currentThemeName);\n\n  if (currentThemeName) {\n    currentThemeData = knownThemes[currentThemeName];\n  }\n\n  if (loadCallback) {\n    themeReadyCallback.add(loadCallback);\n  }\n\n  if (currentThemeData) {\n    $activeThemeLink.attr(\"href\", knownThemes[currentThemeName].url);\n\n    if ((themeReadyCallback.has() || options._forceTimeout) && !timerId) {\n      waitForThemeLoad(currentThemeName);\n    } else {\n      if (pendingThemeName) {\n        pendingThemeName = currentThemeName;\n      }\n    }\n  } else {\n    if (isAutoInit) {\n      themeReadyCallback.fire();\n      themeReadyCallback.empty();\n    } else {\n      throw errors.Error(\"E0021\", currentThemeName);\n    }\n  }\n\n  checkThemeDeprecation();\n  attachCssClasses(viewPortUtils.originalViewPort(), currentThemeName);\n}\n\nfunction getCssClasses(themeName) {\n  themeName = themeName || current();\n  var result = [];\n  var themeNameParts = themeName && themeName.split(\".\");\n\n  if (themeNameParts) {\n    result.push(\"dx-theme-\" + themeNameParts[0], \"dx-theme-\" + themeNameParts[0] + \"-typography\");\n\n    if (themeNameParts.length > 1) {\n      result.push(\"dx-color-scheme-\" + themeNameParts[1] + (isMaterial(themeName) ? \"-\" + themeNameParts[2] : \"\"));\n    }\n  }\n\n  return result;\n}\n\nvar themeClasses;\n\nfunction attachCssClasses(element, themeName) {\n  themeClasses = getCssClasses(themeName).join(\" \");\n  $(element).addClass(themeClasses);\n\n  var activateHairlines = function activateHairlines() {\n    var pixelRatio = windowUtils.hasWindow() && window.devicePixelRatio;\n\n    if (!pixelRatio || pixelRatio < 2) {\n      return;\n    }\n\n    var $tester = $(\"<div>\");\n    $tester.css(\"border\", \".5px solid transparent\");\n    $(\"body\").append($tester);\n\n    if (1 === $tester.outerHeight()) {\n      $(element).addClass(DX_HAIRLINES_CLASS);\n      themeClasses += \" \" + DX_HAIRLINES_CLASS;\n    }\n\n    $tester.remove();\n  };\n\n  activateHairlines();\n}\n\nfunction detachCssClasses(element) {\n  $(element).removeClass(themeClasses);\n}\n\nfunction themeReady(callback) {\n  themeReadyCallback.add(callback);\n}\n\nfunction isTheme(themeRegExp, themeName) {\n  if (!themeName) {\n    themeName = currentThemeName || readThemeMarker();\n  }\n\n  return new RegExp(themeRegExp).test(themeName);\n}\n\nfunction isMaterial(themeName) {\n  return isTheme(\"material\", themeName);\n}\n\nfunction isIos7(themeName) {\n  return isTheme(\"ios7\", themeName);\n}\n\nfunction isGeneric(themeName) {\n  return isTheme(\"generic\", themeName);\n}\n\nfunction isDark(themeName) {\n  return isTheme(\"dark\", themeName);\n}\n\nfunction checkThemeDeprecation() {\n  if (isIos7()) {\n    errors.log(\"W0010\", \"The 'ios7' theme\", \"19.1\", \"Use the 'generic' theme instead.\");\n  }\n}\n\nfunction isWebFontLoaded(text, fontWeight) {\n  var testedFont = \"Roboto, RobotoFallback, Arial\";\n  var etalonFont = \"Arial\";\n  var document = domAdapter.getDocument();\n  var testElement = document.createElement(\"span\");\n  testElement.style.position = \"absolute\";\n  testElement.style.top = \"-9999px\";\n  testElement.style.left = \"-9999px\";\n  testElement.style.visibility = \"hidden\";\n  testElement.style.fontFamily = etalonFont;\n  testElement.style.fontSize = \"250px\";\n  testElement.style.fontWeight = fontWeight;\n  testElement.innerHTML = text;\n  document.body.appendChild(testElement);\n  var etalonFontWidth = testElement.offsetWidth;\n  testElement.style.fontFamily = testedFont;\n  var testedFontWidth = testElement.offsetWidth;\n  testElement.parentNode.removeChild(testElement);\n  return etalonFontWidth !== testedFontWidth;\n}\n\nfunction waitWebFont(text, fontWeight) {\n  var interval = 15;\n  var timeout = 2e3;\n  return new Promise(function (resolve) {\n    var check = function check() {\n      if (isWebFontLoaded(text, fontWeight)) {\n        clear();\n      }\n    };\n\n    var clear = function clear() {\n      clearInterval(intervalId);\n      clearTimeout(timeoutId);\n      resolve();\n    };\n\n    var intervalId = setInterval(check, interval);\n    var timeoutId = setTimeout(clear, timeout);\n  });\n}\n\nvar initDeferred = new Deferred();\n\nfunction autoInit() {\n  init({\n    _autoInit: true,\n    _forceTimeout: true\n  });\n\n  if ($(DX_LINK_SELECTOR, context).length) {\n    throw errors.Error(\"E0022\");\n  }\n\n  initDeferred.resolve();\n}\n\nif (windowUtils.hasWindow()) {\n  autoInit();\n} else {\n  ready(autoInit);\n}\n\nviewPortChanged.add(function (viewPort, prevViewPort) {\n  initDeferred.done(function () {\n    detachCssClasses(prevViewPort);\n    attachCssClasses(viewPort);\n  });\n});\ndevices.changed.add(function () {\n  init({\n    _autoInit: true\n  });\n});\nexports.current = current;\nexports.ready = themeReady;\nexports.init = init;\nexports.attachCssClasses = attachCssClasses;\nexports.detachCssClasses = detachCssClasses;\nexports.waitForThemeLoad = waitForThemeLoad;\nexports.isMaterial = isMaterial;\nexports.isIos7 = isIos7;\nexports.isGeneric = isGeneric;\nexports.isDark = isDark;\nexports.isWebFontLoaded = isWebFontLoaded;\nexports.waitWebFont = waitWebFont;\n\nexports.resetTheme = function () {\n  $activeThemeLink && $activeThemeLink.attr(\"href\", \"about:blank\");\n  currentThemeName = null;\n  pendingThemeName = null;\n};\n\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/themes.js"],"names":["$","require","domAdapter","windowUtils","window","Deferred","errors","domUtils","readyCallbacks","ready","each","devices","viewPortUtils","themeReadyCallback","viewPort","Promise","viewPortChanged","DX_LINK_SELECTOR","THEME_ATTR","ACTIVE_ATTR","DX_HAIRLINES_CLASS","THEME_MARKER_PREFIX","element","context","result","pendingThemeName","isPendingThemeLoaded","handleLoaded","waitStartTime","Date","timerId","setInterval","isLoaded","isTimeout","clearInterval","readThemeMarker","$allThemeLinks","knownThemes","$activeThemeLink","link","fullThemeName","url","isActive","desiredThemeParts","desiredThemeName","knownThemeParts","knownThemeName","themeData","newContext","options","initContext","processMarkup","currentThemeName","current","arguments","detachCssClasses","theme","isAutoInit","loadCallback","resolveFullThemeName","currentThemeData","waitForThemeLoad","checkThemeDeprecation","attachCssClasses","themeName","themeNameParts","isMaterial","themeClasses","getCssClasses","activateHairlines","pixelRatio","$tester","isTheme","isIos7","testedFont","etalonFont","document","testElement","etalonFontWidth","testedFontWidth","interval","timeout","check","isWebFontLoaded","clear","clearTimeout","resolve","intervalId","timeoutId","setTimeout","initDeferred","init","_autoInit","_forceTimeout","autoInit","exports","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/themes.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../core/renderer\");\r\nvar domAdapter = require(\"../core/dom_adapter\");\r\nvar windowUtils = require(\"../core/utils/window\");\r\nvar window = windowUtils.getWindow();\r\nvar Deferred = require(\"../core/utils/deferred\").Deferred;\r\nvar errors = require(\"./widget/ui.errors\");\r\nvar domUtils = require(\"../core/utils/dom\");\r\nvar readyCallbacks = require(\"../core/utils/ready_callbacks\");\r\nvar ready = readyCallbacks.add;\r\nvar each = require(\"../core/utils/iterator\").each;\r\nvar devices = require(\"../core/devices\");\r\nvar viewPortUtils = require(\"../core/utils/view_port\");\r\nvar themeReadyCallback = require(\"./themes_callback\");\r\nvar viewPort = viewPortUtils.value;\r\nvar Promise = require(\"../core/polyfills/promise\");\r\nvar viewPortChanged = viewPortUtils.changeCallback;\r\nvar DX_LINK_SELECTOR = \"link[rel=dx-theme]\";\r\nvar THEME_ATTR = \"data-theme\";\r\nvar ACTIVE_ATTR = \"data-active\";\r\nvar DX_HAIRLINES_CLASS = \"dx-hairlines\";\r\nvar context;\r\nvar $activeThemeLink;\r\nvar knownThemes;\r\nvar currentThemeName;\r\nvar pendingThemeName;\r\nvar timerId;\r\nvar THEME_MARKER_PREFIX = \"dx.\";\r\n\r\nfunction readThemeMarker() {\r\n    if (!windowUtils.hasWindow()) {\r\n        return null\r\n    }\r\n    var element = $(\"<div>\", context).addClass(\"dx-theme-marker\").appendTo(context.documentElement);\r\n    var result;\r\n    try {\r\n        result = element.css(\"fontFamily\");\r\n        if (!result) {\r\n            return null\r\n        }\r\n        result = result.replace(/[\"']/g, \"\");\r\n        if (result.substr(0, THEME_MARKER_PREFIX.length) !== THEME_MARKER_PREFIX) {\r\n            return null\r\n        }\r\n        return result.substr(THEME_MARKER_PREFIX.length)\r\n    } finally {\r\n        element.remove()\r\n    }\r\n}\r\n\r\nfunction waitForThemeLoad(themeName) {\r\n    var waitStartTime;\r\n    pendingThemeName = themeName;\r\n\r\n    function handleLoaded() {\r\n        pendingThemeName = null;\r\n        themeReadyCallback.fire();\r\n        themeReadyCallback.empty()\r\n    }\r\n    if (isPendingThemeLoaded()) {\r\n        handleLoaded()\r\n    } else {\r\n        waitStartTime = Date.now();\r\n        timerId = setInterval(function() {\r\n            var isLoaded = isPendingThemeLoaded();\r\n            var isTimeout = !isLoaded && Date.now() - waitStartTime > 15e3;\r\n            if (isTimeout) {\r\n                errors.log(\"W0004\", pendingThemeName)\r\n            }\r\n            if (isLoaded || isTimeout) {\r\n                clearInterval(timerId);\r\n                timerId = void 0;\r\n                handleLoaded()\r\n            }\r\n        }, 10)\r\n    }\r\n}\r\n\r\nfunction isPendingThemeLoaded() {\r\n    return !pendingThemeName || readThemeMarker() === pendingThemeName\r\n}\r\n\r\nfunction processMarkup() {\r\n    var $allThemeLinks = $(DX_LINK_SELECTOR, context);\r\n    if (!$allThemeLinks.length) {\r\n        return\r\n    }\r\n    knownThemes = {};\r\n    $activeThemeLink = $(domUtils.createMarkupFromString(\"<link rel=stylesheet>\"), context);\r\n    $allThemeLinks.each(function() {\r\n        var link = $(this, context);\r\n        var fullThemeName = link.attr(THEME_ATTR);\r\n        var url = link.attr(\"href\");\r\n        var isActive = \"true\" === link.attr(ACTIVE_ATTR);\r\n        knownThemes[fullThemeName] = {\r\n            url: url,\r\n            isActive: isActive\r\n        }\r\n    });\r\n    $allThemeLinks.last().after($activeThemeLink);\r\n    $allThemeLinks.remove()\r\n}\r\n\r\nfunction resolveFullThemeName(desiredThemeName) {\r\n    var desiredThemeParts = desiredThemeName ? desiredThemeName.split(\".\") : [];\r\n    var result = null;\r\n    if (knownThemes) {\r\n        if (desiredThemeName in knownThemes) {\r\n            return desiredThemeName\r\n        }\r\n        each(knownThemes, function(knownThemeName, themeData) {\r\n            var knownThemeParts = knownThemeName.split(\".\");\r\n            if (desiredThemeParts[0] && knownThemeParts[0] !== desiredThemeParts[0]) {\r\n                return\r\n            }\r\n            if (desiredThemeParts[1] && desiredThemeParts[1] !== knownThemeParts[1]) {\r\n                return\r\n            }\r\n            if (desiredThemeParts[2] && desiredThemeParts[2] !== knownThemeParts[2]) {\r\n                return\r\n            }\r\n            if (!result || themeData.isActive) {\r\n                result = knownThemeName\r\n            }\r\n            if (themeData.isActive) {\r\n                return false\r\n            }\r\n        })\r\n    }\r\n    return result\r\n}\r\n\r\nfunction initContext(newContext) {\r\n    try {\r\n        if (newContext !== context) {\r\n            knownThemes = null\r\n        }\r\n    } catch (x) {\r\n        knownThemes = null\r\n    }\r\n    context = newContext\r\n}\r\n\r\nfunction init(options) {\r\n    options = options || {};\r\n    initContext(options.context || domAdapter.getDocument());\r\n    if (!context) {\r\n        return\r\n    }\r\n    processMarkup();\r\n    currentThemeName = void 0;\r\n    current(options)\r\n}\r\n\r\nfunction current(options) {\r\n    if (!arguments.length) {\r\n        currentThemeName = currentThemeName || readThemeMarker();\r\n        return currentThemeName\r\n    }\r\n    detachCssClasses(viewPort());\r\n    options = options || {};\r\n    if (\"string\" === typeof options) {\r\n        options = {\r\n            theme: options\r\n        }\r\n    }\r\n    var isAutoInit = options._autoInit;\r\n    var loadCallback = options.loadCallback;\r\n    var currentThemeData;\r\n    currentThemeName = resolveFullThemeName(options.theme || currentThemeName);\r\n    if (currentThemeName) {\r\n        currentThemeData = knownThemes[currentThemeName]\r\n    }\r\n    if (loadCallback) {\r\n        themeReadyCallback.add(loadCallback)\r\n    }\r\n    if (currentThemeData) {\r\n        $activeThemeLink.attr(\"href\", knownThemes[currentThemeName].url);\r\n        if ((themeReadyCallback.has() || options._forceTimeout) && !timerId) {\r\n            waitForThemeLoad(currentThemeName)\r\n        } else {\r\n            if (pendingThemeName) {\r\n                pendingThemeName = currentThemeName\r\n            }\r\n        }\r\n    } else {\r\n        if (isAutoInit) {\r\n            themeReadyCallback.fire();\r\n            themeReadyCallback.empty()\r\n        } else {\r\n            throw errors.Error(\"E0021\", currentThemeName)\r\n        }\r\n    }\r\n    checkThemeDeprecation();\r\n    attachCssClasses(viewPortUtils.originalViewPort(), currentThemeName)\r\n}\r\n\r\nfunction getCssClasses(themeName) {\r\n    themeName = themeName || current();\r\n    var result = [];\r\n    var themeNameParts = themeName && themeName.split(\".\");\r\n    if (themeNameParts) {\r\n        result.push(\"dx-theme-\" + themeNameParts[0], \"dx-theme-\" + themeNameParts[0] + \"-typography\");\r\n        if (themeNameParts.length > 1) {\r\n            result.push(\"dx-color-scheme-\" + themeNameParts[1] + (isMaterial(themeName) ? \"-\" + themeNameParts[2] : \"\"))\r\n        }\r\n    }\r\n    return result\r\n}\r\nvar themeClasses;\r\n\r\nfunction attachCssClasses(element, themeName) {\r\n    themeClasses = getCssClasses(themeName).join(\" \");\r\n    $(element).addClass(themeClasses);\r\n    var activateHairlines = function() {\r\n        var pixelRatio = windowUtils.hasWindow() && window.devicePixelRatio;\r\n        if (!pixelRatio || pixelRatio < 2) {\r\n            return\r\n        }\r\n        var $tester = $(\"<div>\");\r\n        $tester.css(\"border\", \".5px solid transparent\");\r\n        $(\"body\").append($tester);\r\n        if (1 === $tester.outerHeight()) {\r\n            $(element).addClass(DX_HAIRLINES_CLASS);\r\n            themeClasses += \" \" + DX_HAIRLINES_CLASS\r\n        }\r\n        $tester.remove()\r\n    };\r\n    activateHairlines()\r\n}\r\n\r\nfunction detachCssClasses(element) {\r\n    $(element).removeClass(themeClasses)\r\n}\r\n\r\nfunction themeReady(callback) {\r\n    themeReadyCallback.add(callback)\r\n}\r\n\r\nfunction isTheme(themeRegExp, themeName) {\r\n    if (!themeName) {\r\n        themeName = currentThemeName || readThemeMarker()\r\n    }\r\n    return new RegExp(themeRegExp).test(themeName)\r\n}\r\n\r\nfunction isMaterial(themeName) {\r\n    return isTheme(\"material\", themeName)\r\n}\r\n\r\nfunction isIos7(themeName) {\r\n    return isTheme(\"ios7\", themeName)\r\n}\r\n\r\nfunction isGeneric(themeName) {\r\n    return isTheme(\"generic\", themeName)\r\n}\r\n\r\nfunction isDark(themeName) {\r\n    return isTheme(\"dark\", themeName)\r\n}\r\n\r\nfunction checkThemeDeprecation() {\r\n    if (isIos7()) {\r\n        errors.log(\"W0010\", \"The 'ios7' theme\", \"19.1\", \"Use the 'generic' theme instead.\")\r\n    }\r\n}\r\n\r\nfunction isWebFontLoaded(text, fontWeight) {\r\n    var testedFont = \"Roboto, RobotoFallback, Arial\";\r\n    var etalonFont = \"Arial\";\r\n    var document = domAdapter.getDocument();\r\n    var testElement = document.createElement(\"span\");\r\n    testElement.style.position = \"absolute\";\r\n    testElement.style.top = \"-9999px\";\r\n    testElement.style.left = \"-9999px\";\r\n    testElement.style.visibility = \"hidden\";\r\n    testElement.style.fontFamily = etalonFont;\r\n    testElement.style.fontSize = \"250px\";\r\n    testElement.style.fontWeight = fontWeight;\r\n    testElement.innerHTML = text;\r\n    document.body.appendChild(testElement);\r\n    var etalonFontWidth = testElement.offsetWidth;\r\n    testElement.style.fontFamily = testedFont;\r\n    var testedFontWidth = testElement.offsetWidth;\r\n    testElement.parentNode.removeChild(testElement);\r\n    return etalonFontWidth !== testedFontWidth\r\n}\r\n\r\nfunction waitWebFont(text, fontWeight) {\r\n    var interval = 15;\r\n    var timeout = 2e3;\r\n    return new Promise(function(resolve) {\r\n        var check = function() {\r\n            if (isWebFontLoaded(text, fontWeight)) {\r\n                clear()\r\n            }\r\n        };\r\n        var clear = function() {\r\n            clearInterval(intervalId);\r\n            clearTimeout(timeoutId);\r\n            resolve()\r\n        };\r\n        var intervalId = setInterval(check, interval);\r\n        var timeoutId = setTimeout(clear, timeout)\r\n    })\r\n}\r\nvar initDeferred = new Deferred;\r\n\r\nfunction autoInit() {\r\n    init({\r\n        _autoInit: true,\r\n        _forceTimeout: true\r\n    });\r\n    if ($(DX_LINK_SELECTOR, context).length) {\r\n        throw errors.Error(\"E0022\")\r\n    }\r\n    initDeferred.resolve()\r\n}\r\nif (windowUtils.hasWindow()) {\r\n    autoInit()\r\n} else {\r\n    ready(autoInit)\r\n}\r\nviewPortChanged.add(function(viewPort, prevViewPort) {\r\n    initDeferred.done(function() {\r\n        detachCssClasses(prevViewPort);\r\n        attachCssClasses(viewPort)\r\n    })\r\n});\r\ndevices.changed.add(function() {\r\n    init({\r\n        _autoInit: true\r\n    })\r\n});\r\nexports.current = current;\r\nexports.ready = themeReady;\r\nexports.init = init;\r\nexports.attachCssClasses = attachCssClasses;\r\nexports.detachCssClasses = detachCssClasses;\r\nexports.waitForThemeLoad = waitForThemeLoad;\r\nexports.isMaterial = isMaterial;\r\nexports.isIos7 = isIos7;\r\nexports.isGeneric = isGeneric;\r\nexports.isDark = isDark;\r\nexports.isWebFontLoaded = isWebFontLoaded;\r\nexports.waitWebFont = waitWebFont;\r\nexports.resetTheme = function() {\r\n    $activeThemeLink && $activeThemeLink.attr(\"href\", \"about:blank\");\r\n    currentThemeName = null;\r\n    pendingThemeName = null\r\n};\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}