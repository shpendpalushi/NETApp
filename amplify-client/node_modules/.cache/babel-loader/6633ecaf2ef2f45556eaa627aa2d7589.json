{"ast":null,"code":"/**\r\n * DevExtreme (core/dom_component_with_template.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"./renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _type = require(\"./utils/type\");\n\nvar _common = require(\"./utils/common\");\n\nvar _extend = require(\"./utils/extend\");\n\nvar _errors = require(\"./errors\");\n\nvar _dom = require(\"./utils/dom\");\n\nvar _devices = require(\"./devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _dom_component = require(\"./dom_component\");\n\nvar _dom_component2 = _interopRequireDefault(_dom_component);\n\nvar _template = require(\"./templates/template\");\n\nvar _template_base = require(\"./templates/template_base\");\n\nvar _function_template = require(\"./templates/function_template\");\n\nvar _empty_template = require(\"./templates/empty_template\");\n\nvar _child_default_template = require(\"./templates/child_default_template\");\n\nvar _inflector = require(\"./utils/inflector\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar TEXT_NODE = 3;\nvar ANONYMOUS_TEMPLATE_NAME = \"template\";\nvar TEMPLATE_SELECTOR = \"[data-options*='dxTemplate']\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar DX_POLYMORPH_WIDGET_TEMPLATE = new _function_template.FunctionTemplate(function (options) {\n  var widgetName = options.model.widget;\n\n  if (widgetName) {\n    var widgetElement = (0, _renderer2.default)(\"<div>\");\n    var widgetOptions = options.model.options || {};\n\n    if (\"button\" === widgetName || \"tabs\" === widgetName || \"dropDownMenu\" === widgetName) {\n      var deprecatedName = widgetName;\n      widgetName = (0, _inflector.camelize)(\"dx-\" + widgetName);\n      (0, _errors.log)(\"W0001\", \"dxToolbar - 'widget' item field\", deprecatedName, \"16.1\", \"Use: '\" + widgetName + \"' instead\");\n    }\n\n    if (options.parent) {\n      options.parent._createComponent(widgetElement, widgetName, widgetOptions);\n    } else {\n      widgetElement[widgetName](widgetOptions);\n    }\n\n    return widgetElement;\n  }\n\n  return (0, _renderer2.default)();\n});\n\nvar DOMComponentWithTemplate = _dom_component2.default.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      integrationOptions: {\n        watchMethod: function watchMethod(fn, callback, options) {\n          options = options || {};\n\n          if (!options.skipImmediate) {\n            callback(fn());\n          }\n\n          return _common.noop;\n        },\n        templates: {\n          \"dx-polymorph-widget\": DX_POLYMORPH_WIDGET_TEMPLATE\n        },\n        createTemplate: function createTemplate(element) {\n          return new _template.Template(element);\n        }\n      }\n    });\n  },\n  _init: function _init() {\n    this.callBase();\n    this._tempTemplates = [];\n    this._defaultTemplates = {};\n\n    this._initTemplates();\n  },\n  _dispose: function _dispose() {\n    this._cleanTemplates();\n\n    this.callBase();\n  },\n  _cleanTemplates: function _cleanTemplates() {\n    this._tempTemplates.forEach(function (t) {\n      t.template.dispose && t.template.dispose();\n    });\n\n    this._tempTemplates = [];\n  },\n  _initTemplates: function _initTemplates() {\n    this._extractTemplates();\n\n    this._extractAnonymousTemplate();\n  },\n  _extractTemplates: function _extractTemplates() {\n    var templateElements = this.$element().contents().filter(TEMPLATE_SELECTOR);\n    var templatesMap = {};\n    templateElements.each(function (_, template) {\n      var templateOptions = (0, _dom.getElementOptions)(template).dxTemplate;\n\n      if (!templateOptions) {\n        return;\n      }\n\n      if (!templateOptions.name) {\n        throw (0, _errors.Error)(\"E0023\");\n      }\n\n      (0, _renderer2.default)(template).addClass(TEMPLATE_WRAPPER_CLASS).detach();\n      templatesMap[templateOptions.name] = templatesMap[templateOptions.name] || [];\n      templatesMap[templateOptions.name].push(template);\n    });\n\n    for (var templateName in templatesMap) {\n      var deviceTemplate = this._findTemplateByDevice(templatesMap[templateName]);\n\n      if (deviceTemplate) {\n        this._saveTemplate(templateName, deviceTemplate);\n      }\n    }\n  },\n  _saveTemplate: function _saveTemplate(name, template) {\n    var templates = this.option(\"integrationOptions.templates\");\n    templates[name] = this._createTemplate(template);\n  },\n  _findTemplateByDevice: function _findTemplateByDevice(templates) {\n    var suitableTemplate = (0, _common.findBestMatches)(_devices2.default.current(), templates, function (template) {\n      return (0, _dom.getElementOptions)(template).dxTemplate;\n    })[0];\n    templates.forEach(function (template) {\n      if (template !== suitableTemplate) {\n        (0, _renderer2.default)(template).remove();\n      }\n    });\n    return suitableTemplate;\n  },\n  _extractAnonymousTemplate: function _extractAnonymousTemplate() {\n    var templates = this.option(\"integrationOptions.templates\");\n\n    var anonymousTemplateName = this._getAnonymousTemplateName();\n\n    var $anonymousTemplate = this.$element().contents().detach();\n    var $notJunkTemplateContent = $anonymousTemplate.filter(function (_, element) {\n      var isTextNode = element.nodeType === TEXT_NODE;\n      var isEmptyText = (0, _renderer2.default)(element).text().trim().length < 1;\n      return !(isTextNode && isEmptyText);\n    });\n    var onlyJunkTemplateContent = $notJunkTemplateContent.length < 1;\n\n    if (!templates[anonymousTemplateName] && !onlyJunkTemplateContent) {\n      templates[anonymousTemplateName] = this._createTemplate($anonymousTemplate);\n    }\n  },\n  _getAnonymousTemplateName: function _getAnonymousTemplateName() {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _createTemplateIfNeeded: function _createTemplateIfNeeded(templateSource) {\n    var templateKey = function templateKey(templateSource) {\n      return (0, _type.isRenderer)(templateSource) && templateSource[0] || templateSource;\n    };\n\n    var cachedTemplate = this._tempTemplates.filter(function (t) {\n      templateSource = templateKey(templateSource);\n      return t.source === templateSource;\n    })[0];\n\n    if (cachedTemplate) {\n      return cachedTemplate.template;\n    }\n\n    var template = this._createTemplate(templateSource);\n\n    this._tempTemplates.push({\n      template: template,\n      source: templateKey(templateSource)\n    });\n\n    return template;\n  },\n  _createTemplate: function _createTemplate(templateSource) {\n    templateSource = \"string\" === typeof templateSource ? (0, _dom.normalizeTemplateElement)(templateSource) : templateSource;\n    return this.option(\"integrationOptions.createTemplate\")(templateSource);\n  },\n  _getTemplateByOption: function _getTemplateByOption(optionName) {\n    return this._getTemplate(this.option(optionName));\n  },\n  _getTemplate: function _getTemplate(templateSource) {\n    if ((0, _type.isFunction)(templateSource)) {\n      return new _function_template.FunctionTemplate(function (options) {\n        var templateSourceResult = templateSource.apply(this, this._getNormalizedTemplateArgs(options));\n\n        if (!(0, _type.isDefined)(templateSourceResult)) {\n          return new _empty_template.EmptyTemplate();\n        }\n\n        var dispose = false;\n\n        var template = this._acquireTemplate(templateSourceResult, function (templateSource) {\n          if (templateSource.nodeType || (0, _type.isRenderer)(templateSource) && !(0, _renderer2.default)(templateSource).is(\"script\")) {\n            return new _function_template.FunctionTemplate(function () {\n              return templateSource;\n            });\n          }\n\n          dispose = true;\n          return this._createTemplate(templateSource);\n        }.bind(this));\n\n        var result = template.render(options);\n        dispose && template.dispose && template.dispose();\n        return result;\n      }.bind(this));\n    }\n\n    return this._acquireTemplate(templateSource, this._createTemplateIfNeeded.bind(this));\n  },\n  _acquireTemplate: function _acquireTemplate(templateSource, createTemplate) {\n    if (null == templateSource) {\n      return new _empty_template.EmptyTemplate();\n    }\n\n    if (templateSource instanceof _child_default_template.ChildDefaultTemplate) {\n      return this._defaultTemplates[templateSource.name];\n    }\n\n    if (templateSource instanceof _template_base.TemplateBase) {\n      return templateSource;\n    }\n\n    if ((0, _type.isFunction)(templateSource.render) && !(0, _type.isRenderer)(templateSource)) {\n      return this._addOneRenderedCall(templateSource);\n    }\n\n    if (templateSource.nodeType || (0, _type.isRenderer)(templateSource)) {\n      return createTemplate((0, _renderer2.default)(templateSource));\n    }\n\n    if (\"string\" === typeof templateSource) {\n      var nonIntegrationTemplates = this.option(\"integrationOptions.skipTemplates\") || [];\n      var integrationTemplate = null;\n\n      if (nonIntegrationTemplates.indexOf(templateSource) === -1) {\n        integrationTemplate = this._renderIntegrationTemplate(templateSource);\n      }\n\n      return integrationTemplate || this._defaultTemplates[templateSource] || createTemplate(templateSource);\n    }\n\n    return this._acquireTemplate(templateSource.toString(), createTemplate);\n  },\n  _getNormalizedTemplateArgs: function _getNormalizedTemplateArgs(options) {\n    var args = [];\n\n    if (\"model\" in options) {\n      args.push(options.model);\n    }\n\n    if (\"index\" in options) {\n      args.push(options.index);\n    }\n\n    args.push(options.container);\n    return args;\n  },\n  _addOneRenderedCall: function _addOneRenderedCall(template) {\n    var _render = template.render.bind(template);\n\n    return (0, _extend.extend)({}, template, {\n      render: function render(options) {\n        var templateResult = _render(options);\n\n        options && options.onRendered && options.onRendered();\n        return templateResult;\n      }\n    });\n  },\n  _renderIntegrationTemplate: function _renderIntegrationTemplate(templateSource) {\n    var integrationTemplate = this.option(\"integrationOptions.templates\")[templateSource];\n\n    if (integrationTemplate && !(integrationTemplate instanceof _template_base.TemplateBase)) {\n      var isAsyncTemplate = this.option(\"templatesRenderAsynchronously\");\n\n      if (!isAsyncTemplate) {\n        return this._addOneRenderedCall(integrationTemplate);\n      }\n    }\n\n    return integrationTemplate;\n  }\n});\n\nmodule.exports = DOMComponentWithTemplate;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/core/dom_component_with_template.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_type","_common","_extend","_errors","_dom","_devices","_devices2","_dom_component","_dom_component2","_template","_template_base","_function_template","_empty_template","_child_default_template","_inflector","obj","TEXT_NODE","ANONYMOUS_TEMPLATE_NAME","TEMPLATE_SELECTOR","TEMPLATE_WRAPPER_CLASS","DX_POLYMORPH_WIDGET_TEMPLATE","widgetName","options","widgetElement","widgetOptions","deprecatedName","DOMComponentWithTemplate","_getDefaultOptions","integrationOptions","watchMethod","callback","fn","templates","createTemplate","_init","_dispose","_cleanTemplates","t","_initTemplates","_extractTemplates","templateElements","templatesMap","templateOptions","deviceTemplate","_saveTemplate","_findTemplateByDevice","suitableTemplate","template","_extractAnonymousTemplate","anonymousTemplateName","$anonymousTemplate","$notJunkTemplateContent","isTextNode","element","isEmptyText","onlyJunkTemplateContent","_getAnonymousTemplateName","_createTemplateIfNeeded","templateKey","templateSource","cachedTemplate","source","_createTemplate","_getTemplateByOption","_getTemplate","templateSourceResult","dispose","result","_acquireTemplate","nonIntegrationTemplates","integrationTemplate","_getNormalizedTemplateArgs","args","_addOneRenderedCall","_render","render","templateResult","_renderIntegrationTemplate","isAsyncTemplate","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (core/dom_component_with_template.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"./renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _type = require(\"./utils/type\");\r\nvar _common = require(\"./utils/common\");\r\nvar _extend = require(\"./utils/extend\");\r\nvar _errors = require(\"./errors\");\r\nvar _dom = require(\"./utils/dom\");\r\nvar _devices = require(\"./devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _dom_component = require(\"./dom_component\");\r\nvar _dom_component2 = _interopRequireDefault(_dom_component);\r\nvar _template = require(\"./templates/template\");\r\nvar _template_base = require(\"./templates/template_base\");\r\nvar _function_template = require(\"./templates/function_template\");\r\nvar _empty_template = require(\"./templates/empty_template\");\r\nvar _child_default_template = require(\"./templates/child_default_template\");\r\nvar _inflector = require(\"./utils/inflector\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar TEXT_NODE = 3;\r\nvar ANONYMOUS_TEMPLATE_NAME = \"template\";\r\nvar TEMPLATE_SELECTOR = \"[data-options*='dxTemplate']\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar DX_POLYMORPH_WIDGET_TEMPLATE = new _function_template.FunctionTemplate(function(options) {\r\n    var widgetName = options.model.widget;\r\n    if (widgetName) {\r\n        var widgetElement = (0, _renderer2.default)(\"<div>\");\r\n        var widgetOptions = options.model.options || {};\r\n        if (\"button\" === widgetName || \"tabs\" === widgetName || \"dropDownMenu\" === widgetName) {\r\n            var deprecatedName = widgetName;\r\n            widgetName = (0, _inflector.camelize)(\"dx-\" + widgetName);\r\n            (0, _errors.log)(\"W0001\", \"dxToolbar - 'widget' item field\", deprecatedName, \"16.1\", \"Use: '\" + widgetName + \"' instead\")\r\n        }\r\n        if (options.parent) {\r\n            options.parent._createComponent(widgetElement, widgetName, widgetOptions)\r\n        } else {\r\n            widgetElement[widgetName](widgetOptions)\r\n        }\r\n        return widgetElement\r\n    }\r\n    return (0, _renderer2.default)()\r\n});\r\nvar DOMComponentWithTemplate = _dom_component2.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            integrationOptions: {\r\n                watchMethod: function(fn, callback, options) {\r\n                    options = options || {};\r\n                    if (!options.skipImmediate) {\r\n                        callback(fn())\r\n                    }\r\n                    return _common.noop\r\n                },\r\n                templates: {\r\n                    \"dx-polymorph-widget\": DX_POLYMORPH_WIDGET_TEMPLATE\r\n                },\r\n                createTemplate: function(element) {\r\n                    return new _template.Template(element)\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._tempTemplates = [];\r\n        this._defaultTemplates = {};\r\n        this._initTemplates()\r\n    },\r\n    _dispose: function() {\r\n        this._cleanTemplates();\r\n        this.callBase()\r\n    },\r\n    _cleanTemplates: function() {\r\n        this._tempTemplates.forEach(function(t) {\r\n            t.template.dispose && t.template.dispose()\r\n        });\r\n        this._tempTemplates = []\r\n    },\r\n    _initTemplates: function() {\r\n        this._extractTemplates();\r\n        this._extractAnonymousTemplate()\r\n    },\r\n    _extractTemplates: function() {\r\n        var templateElements = this.$element().contents().filter(TEMPLATE_SELECTOR);\r\n        var templatesMap = {};\r\n        templateElements.each(function(_, template) {\r\n            var templateOptions = (0, _dom.getElementOptions)(template).dxTemplate;\r\n            if (!templateOptions) {\r\n                return\r\n            }\r\n            if (!templateOptions.name) {\r\n                throw (0, _errors.Error)(\"E0023\")\r\n            }(0, _renderer2.default)(template).addClass(TEMPLATE_WRAPPER_CLASS).detach();\r\n            templatesMap[templateOptions.name] = templatesMap[templateOptions.name] || [];\r\n            templatesMap[templateOptions.name].push(template)\r\n        });\r\n        for (var templateName in templatesMap) {\r\n            var deviceTemplate = this._findTemplateByDevice(templatesMap[templateName]);\r\n            if (deviceTemplate) {\r\n                this._saveTemplate(templateName, deviceTemplate)\r\n            }\r\n        }\r\n    },\r\n    _saveTemplate: function(name, template) {\r\n        var templates = this.option(\"integrationOptions.templates\");\r\n        templates[name] = this._createTemplate(template)\r\n    },\r\n    _findTemplateByDevice: function(templates) {\r\n        var suitableTemplate = (0, _common.findBestMatches)(_devices2.default.current(), templates, function(template) {\r\n            return (0, _dom.getElementOptions)(template).dxTemplate\r\n        })[0];\r\n        templates.forEach(function(template) {\r\n            if (template !== suitableTemplate) {\r\n                (0, _renderer2.default)(template).remove()\r\n            }\r\n        });\r\n        return suitableTemplate\r\n    },\r\n    _extractAnonymousTemplate: function() {\r\n        var templates = this.option(\"integrationOptions.templates\");\r\n        var anonymousTemplateName = this._getAnonymousTemplateName();\r\n        var $anonymousTemplate = this.$element().contents().detach();\r\n        var $notJunkTemplateContent = $anonymousTemplate.filter(function(_, element) {\r\n            var isTextNode = element.nodeType === TEXT_NODE;\r\n            var isEmptyText = (0, _renderer2.default)(element).text().trim().length < 1;\r\n            return !(isTextNode && isEmptyText)\r\n        });\r\n        var onlyJunkTemplateContent = $notJunkTemplateContent.length < 1;\r\n        if (!templates[anonymousTemplateName] && !onlyJunkTemplateContent) {\r\n            templates[anonymousTemplateName] = this._createTemplate($anonymousTemplate)\r\n        }\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _createTemplateIfNeeded: function(templateSource) {\r\n        var templateKey = function(templateSource) {\r\n            return (0, _type.isRenderer)(templateSource) && templateSource[0] || templateSource\r\n        };\r\n        var cachedTemplate = this._tempTemplates.filter(function(t) {\r\n            templateSource = templateKey(templateSource);\r\n            return t.source === templateSource\r\n        })[0];\r\n        if (cachedTemplate) {\r\n            return cachedTemplate.template\r\n        }\r\n        var template = this._createTemplate(templateSource);\r\n        this._tempTemplates.push({\r\n            template: template,\r\n            source: templateKey(templateSource)\r\n        });\r\n        return template\r\n    },\r\n    _createTemplate: function(templateSource) {\r\n        templateSource = \"string\" === typeof templateSource ? (0, _dom.normalizeTemplateElement)(templateSource) : templateSource;\r\n        return this.option(\"integrationOptions.createTemplate\")(templateSource)\r\n    },\r\n    _getTemplateByOption: function(optionName) {\r\n        return this._getTemplate(this.option(optionName))\r\n    },\r\n    _getTemplate: function(templateSource) {\r\n        if ((0, _type.isFunction)(templateSource)) {\r\n            return new _function_template.FunctionTemplate(function(options) {\r\n                var templateSourceResult = templateSource.apply(this, this._getNormalizedTemplateArgs(options));\r\n                if (!(0, _type.isDefined)(templateSourceResult)) {\r\n                    return new _empty_template.EmptyTemplate\r\n                }\r\n                var dispose = false;\r\n                var template = this._acquireTemplate(templateSourceResult, function(templateSource) {\r\n                    if (templateSource.nodeType || (0, _type.isRenderer)(templateSource) && !(0, _renderer2.default)(templateSource).is(\"script\")) {\r\n                        return new _function_template.FunctionTemplate(function() {\r\n                            return templateSource\r\n                        })\r\n                    }\r\n                    dispose = true;\r\n                    return this._createTemplate(templateSource)\r\n                }.bind(this));\r\n                var result = template.render(options);\r\n                dispose && template.dispose && template.dispose();\r\n                return result\r\n            }.bind(this))\r\n        }\r\n        return this._acquireTemplate(templateSource, this._createTemplateIfNeeded.bind(this))\r\n    },\r\n    _acquireTemplate: function(templateSource, createTemplate) {\r\n        if (null == templateSource) {\r\n            return new _empty_template.EmptyTemplate\r\n        }\r\n        if (templateSource instanceof _child_default_template.ChildDefaultTemplate) {\r\n            return this._defaultTemplates[templateSource.name]\r\n        }\r\n        if (templateSource instanceof _template_base.TemplateBase) {\r\n            return templateSource\r\n        }\r\n        if ((0, _type.isFunction)(templateSource.render) && !(0, _type.isRenderer)(templateSource)) {\r\n            return this._addOneRenderedCall(templateSource)\r\n        }\r\n        if (templateSource.nodeType || (0, _type.isRenderer)(templateSource)) {\r\n            return createTemplate((0, _renderer2.default)(templateSource))\r\n        }\r\n        if (\"string\" === typeof templateSource) {\r\n            var nonIntegrationTemplates = this.option(\"integrationOptions.skipTemplates\") || [];\r\n            var integrationTemplate = null;\r\n            if (nonIntegrationTemplates.indexOf(templateSource) === -1) {\r\n                integrationTemplate = this._renderIntegrationTemplate(templateSource)\r\n            }\r\n            return integrationTemplate || this._defaultTemplates[templateSource] || createTemplate(templateSource)\r\n        }\r\n        return this._acquireTemplate(templateSource.toString(), createTemplate)\r\n    },\r\n    _getNormalizedTemplateArgs: function(options) {\r\n        var args = [];\r\n        if (\"model\" in options) {\r\n            args.push(options.model)\r\n        }\r\n        if (\"index\" in options) {\r\n            args.push(options.index)\r\n        }\r\n        args.push(options.container);\r\n        return args\r\n    },\r\n    _addOneRenderedCall: function(template) {\r\n        var _render = template.render.bind(template);\r\n        return (0, _extend.extend)({}, template, {\r\n            render: function(options) {\r\n                var templateResult = _render(options);\r\n                options && options.onRendered && options.onRendered();\r\n                return templateResult\r\n            }\r\n        })\r\n    },\r\n    _renderIntegrationTemplate: function(templateSource) {\r\n        var integrationTemplate = this.option(\"integrationOptions.templates\")[templateSource];\r\n        if (integrationTemplate && !(integrationTemplate instanceof _template_base.TemplateBase)) {\r\n            var isAsyncTemplate = this.option(\"templatesRenderAsynchronously\");\r\n            if (!isAsyncTemplate) {\r\n                return this._addOneRenderedCall(integrationTemplate)\r\n            }\r\n        }\r\n        return integrationTemplate\r\n    }\r\n});\r\nmodule.exports = DOMComponentWithTemplate;\r\n"]},"metadata":{},"sourceType":"module"}