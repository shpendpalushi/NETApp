{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.work_space_month.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../../core/renderer\");\n\nvar noop = require(\"../../../core/utils/common\").noop;\n\nvar registerComponent = require(\"../../../core/component_registrator\");\n\nvar SchedulerWorkSpace = require(\"./ui.scheduler.work_space.indicator\");\n\nvar dateUtils = require(\"../../../core/utils/date\");\n\nvar dateLocalization = require(\"../../../localization/date\");\n\nvar MONTH_CLASS = \"dx-scheduler-work-space-month\";\nvar DATE_TABLE_CURRENT_DATE_CLASS = \"dx-scheduler-date-table-current-date\";\nvar DATE_TABLE_FIRST_OF_MONTH_CLASS = \"dx-scheduler-date-table-first-of-month\";\nvar DATE_TABLE_OTHER_MONTH_DATE_CLASS = \"dx-scheduler-date-table-other-month\";\nvar DATE_TABLE_SCROLLABLE_FIXED_CLASS = \"dx-scheduler-scrollable-fixed-content\";\nvar DAYS_IN_WEEK = 7;\nvar DAY_IN_MILLISECONDS = 864e5;\nvar toMs = dateUtils.dateToMilliseconds;\nvar SchedulerWorkSpaceMonth = SchedulerWorkSpace.inherit({\n  _toggleFixedScrollableClass: function _toggleFixedScrollableClass() {\n    this._dateTableScrollable.$content().toggleClass(DATE_TABLE_SCROLLABLE_FIXED_CLASS, !this._isWorkSpaceWithCount() && !this._isVerticalGroupedWorkSpace());\n  },\n  _getElementClass: function _getElementClass() {\n    return MONTH_CLASS;\n  },\n  _getRowCount: function _getRowCount() {\n    return this._isWorkSpaceWithCount() ? 4 * this.option(\"intervalCount\") + 2 : 6;\n  },\n  _getCellCount: function _getCellCount() {\n    return DAYS_IN_WEEK;\n  },\n  _getDateByIndex: function _getDateByIndex(headerIndex) {\n    var resultDate = new Date(this._firstViewDate);\n    resultDate.setDate(this._firstViewDate.getDate() + headerIndex);\n    return resultDate;\n  },\n  _getFormat: function _getFormat() {\n    return this._formatWeekday;\n  },\n  _calculateCellIndex: function _calculateCellIndex(rowIndex, cellIndex) {\n    if (this._isVerticalGroupedWorkSpace()) {\n      rowIndex %= this._getRowCount();\n    } else {\n      cellIndex %= this._getCellCount();\n    }\n\n    return rowIndex * this._getCellCount() + cellIndex;\n  },\n  _getInterval: function _getInterval() {\n    return DAY_IN_MILLISECONDS;\n  },\n  _getIntervalBetween: function _getIntervalBetween(currentDate) {\n    var firstViewDate = this.getStartViewDate();\n    var timeZoneOffset = dateUtils.getTimezonesDifference(firstViewDate, currentDate);\n    return currentDate.getTime() - (firstViewDate.getTime() - 36e5 * this.option(\"startDayHour\")) - timeZoneOffset;\n  },\n  _getDateByCellIndexes: function _getDateByCellIndexes(rowIndex, cellIndex) {\n    var date = this.callBase(rowIndex, cellIndex);\n\n    this._setStartDayHour(date);\n\n    return date;\n  },\n  getCellWidth: function getCellWidth() {\n    var DAYS_IN_WEEK = 7;\n    var averageWidth = 0;\n\n    this._getCells().slice(0, DAYS_IN_WEEK).each(function (index, element) {\n      return averageWidth += element.getBoundingClientRect().width;\n    });\n\n    return averageWidth / DAYS_IN_WEEK;\n  },\n  _calculateHiddenInterval: function _calculateHiddenInterval() {\n    return 0;\n  },\n  _insertAllDayRowsIntoDateTable: function _insertAllDayRowsIntoDateTable() {\n    return false;\n  },\n  _getCellCoordinatesByIndex: function _getCellCoordinatesByIndex(index) {\n    var rowIndex = Math.floor(index / this._getCellCount());\n    var cellIndex = index - this._getCellCount() * rowIndex;\n    return {\n      rowIndex: rowIndex,\n      cellIndex: cellIndex\n    };\n  },\n  _createWorkSpaceElements: function _createWorkSpaceElements() {\n    if (this._isVerticalGroupedWorkSpace()) {\n      this._createWorkSpaceScrollableElements();\n    } else {\n      this.callBase();\n    }\n  },\n  _needCreateCrossScrolling: function _needCreateCrossScrolling() {\n    return this.option(\"crossScrollingEnabled\") || this._isVerticalGroupedWorkSpace();\n  },\n  _renderTimePanel: noop,\n  _renderAllDayPanel: noop,\n  _getTableAllDay: noop,\n  _toggleAllDayVisibility: noop,\n  _changeAllDayVisibility: noop,\n  _setFirstViewDate: function _setFirstViewDate() {\n    var firstMonthDate = dateUtils.getFirstMonthDate(this._getViewStartByOptions());\n    this._firstViewDate = dateUtils.getFirstWeekDate(firstMonthDate, this.option(\"firstDayOfWeek\") || dateLocalization.firstDayOfWeekIndex());\n\n    this._setStartDayHour(this._firstViewDate);\n\n    var date = this._getViewStartByOptions();\n\n    this._minVisibleDate = new Date(date.setDate(1));\n    this._maxVisibleDate = new Date(new Date(date.setMonth(date.getMonth() + this.option(\"intervalCount\"))).setDate(0));\n  },\n  _getViewStartByOptions: function _getViewStartByOptions() {\n    if (!this.option(\"startDate\")) {\n      return new Date(this.option(\"currentDate\").getTime());\n    } else {\n      var startDate = this._getStartViewDate();\n\n      var currentDate = this.option(\"currentDate\");\n      var diff = startDate.getTime() <= currentDate.getTime() ? 1 : -1;\n      var endDate = new Date(new Date(this._getStartViewDate().setMonth(this._getStartViewDate().getMonth() + diff * this.option(\"intervalCount\"))));\n\n      while (!this._dateInRange(currentDate, startDate, endDate, diff)) {\n        startDate = new Date(endDate);\n\n        if (diff > 0) {\n          startDate.setDate(1);\n        }\n\n        endDate = new Date(new Date(endDate.setMonth(endDate.getMonth() + diff * this.option(\"intervalCount\"))));\n      }\n\n      return diff > 0 ? startDate : endDate;\n    }\n  },\n  _getStartViewDate: function _getStartViewDate() {\n    var firstMonthDate = dateUtils.getFirstMonthDate(this.option(\"startDate\"));\n    return firstMonthDate;\n  },\n  _renderTableBody: function _renderTableBody(options) {\n    options.getCellText = this._getCellText.bind(this);\n    this.callBase(options);\n  },\n  _getCellText: function _getCellText(rowIndex, cellIndex) {\n    if (this.option(\"groupByDate\") && this._getGroupCount()) {\n      cellIndex = Math.floor(cellIndex / this._getGroupCount());\n    } else {\n      cellIndex %= this._getCellCount();\n    }\n\n    var date = this._getDate(rowIndex, cellIndex);\n\n    if (this._isWorkSpaceWithCount() && this._isFirstDayOfMonth(date)) {\n      return this._formatMonthAndDay(date);\n    }\n\n    return dateLocalization.format(date, \"dd\");\n  },\n  _formatMonthAndDay: function _formatMonthAndDay(date) {\n    var monthName = dateLocalization.getMonthNames(\"abbreviated\")[date.getMonth()];\n    return [monthName, dateLocalization.format(date, \"day\")].join(\" \");\n  },\n  _getDate: function _getDate(week, day) {\n    var result = new Date(this._firstViewDate);\n\n    var lastRowInDay = this._getRowCount();\n\n    result.setDate(result.getDate() + week % lastRowInDay * DAYS_IN_WEEK + day);\n    return result;\n  },\n  _updateIndex: function _updateIndex(index) {\n    return index;\n  },\n  _prepareCellData: function _prepareCellData(rowIndex, cellIndex, cell) {\n    var data = this.callBase(rowIndex, cellIndex, cell);\n    var $cell = $(cell);\n    $cell.toggleClass(DATE_TABLE_CURRENT_DATE_CLASS, this._isCurrentDate(data.startDate)).toggleClass(DATE_TABLE_FIRST_OF_MONTH_CLASS, this._isFirstDayOfMonth(data.startDate)).toggleClass(DATE_TABLE_OTHER_MONTH_DATE_CLASS, this._isOtherMonth(data.startDate));\n    return data;\n  },\n  _isCurrentDate: function _isCurrentDate(cellDate) {\n    var today = new Date();\n    return dateUtils.sameDate(cellDate, today);\n  },\n  _isFirstDayOfMonth: function _isFirstDayOfMonth(cellDate) {\n    return this._isWorkSpaceWithCount() && 1 === cellDate.getDate();\n  },\n  _isOtherMonth: function _isOtherMonth(cellDate) {\n    return !dateUtils.dateInRange(cellDate, this._minVisibleDate, this._maxVisibleDate, \"date\");\n  },\n  needRenderDateTimeIndication: function needRenderDateTimeIndication() {\n    return false;\n  },\n  getCellDuration: function getCellDuration() {\n    return 36e5 * this._calculateDayDuration();\n  },\n  getIntervalDuration: function getIntervalDuration() {\n    return toMs(\"day\");\n  },\n  getTimePanelWidth: function getTimePanelWidth() {\n    return 0;\n  },\n  getPositionShift: function getPositionShift(timeShift) {\n    return {\n      cellPosition: timeShift * this.getCellWidth(),\n      top: 0,\n      left: 0\n    };\n  },\n  getCellCountToLastViewDate: function getCellCountToLastViewDate(date) {\n    var firstDateTime = date.getTime();\n    var lastDateTime = this.getEndViewDate().getTime();\n    var dayDurationInMs = this.getCellDuration();\n    return Math.ceil((lastDateTime - firstDateTime) / dayDurationInMs);\n  },\n  supportAllDayRow: function supportAllDayRow() {\n    return false;\n  },\n  keepOriginalHours: function keepOriginalHours() {\n    return true;\n  },\n  calculateEndDate: function calculateEndDate(startDate) {\n    var startDateCopy = new Date(startDate);\n    return new Date(startDateCopy.setHours(this.option(\"endDayHour\")));\n  },\n  getWorkSpaceLeftOffset: function getWorkSpaceLeftOffset() {\n    return 0;\n  },\n  needApplyCollectorOffset: function needApplyCollectorOffset() {\n    return true;\n  },\n  _getDateTableBorderOffset: function _getDateTableBorderOffset() {\n    return this._getDateTableBorder();\n  },\n  _getCellPositionByIndex: function _getCellPositionByIndex(index, groupIndex) {\n    var position = this.callBase(index, groupIndex);\n\n    var rowIndex = this._getCellCoordinatesByIndex(index).rowIndex;\n\n    var calculatedTopOffset;\n\n    if (!this._isVerticalGroupedWorkSpace()) {\n      calculatedTopOffset = this.getCellHeight() * rowIndex;\n    } else {\n      calculatedTopOffset = this.getCellHeight() * (rowIndex + groupIndex * this._getRowCount());\n    }\n\n    if (calculatedTopOffset) {\n      position.top = calculatedTopOffset;\n    }\n\n    return position;\n  },\n  _getHeaderDate: function _getHeaderDate() {\n    return this._getViewStartByOptions();\n  },\n  _supportCompactDropDownAppointments: function _supportCompactDropDownAppointments() {\n    return false;\n  },\n  scrollToTime: noop\n});\nregisterComponent(\"dxSchedulerWorkSpaceMonth\", SchedulerWorkSpaceMonth);\nmodule.exports = SchedulerWorkSpaceMonth;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/scheduler/workspaces/ui.scheduler.work_space_month.js"],"names":["$","require","noop","registerComponent","SchedulerWorkSpace","dateUtils","dateLocalization","MONTH_CLASS","DATE_TABLE_CURRENT_DATE_CLASS","DATE_TABLE_FIRST_OF_MONTH_CLASS","DATE_TABLE_OTHER_MONTH_DATE_CLASS","DATE_TABLE_SCROLLABLE_FIXED_CLASS","DAYS_IN_WEEK","DAY_IN_MILLISECONDS","toMs","SchedulerWorkSpaceMonth","_toggleFixedScrollableClass","_getElementClass","_getRowCount","_getCellCount","_getDateByIndex","resultDate","_getFormat","_calculateCellIndex","rowIndex","cellIndex","_getInterval","_getIntervalBetween","firstViewDate","timeZoneOffset","currentDate","_getDateByCellIndexes","date","getCellWidth","averageWidth","element","_calculateHiddenInterval","_insertAllDayRowsIntoDateTable","_getCellCoordinatesByIndex","Math","index","_createWorkSpaceElements","_needCreateCrossScrolling","_renderTimePanel","_renderAllDayPanel","_getTableAllDay","_toggleAllDayVisibility","_changeAllDayVisibility","_setFirstViewDate","firstMonthDate","_getViewStartByOptions","startDate","diff","endDate","_getStartViewDate","_renderTableBody","options","_getCellText","_formatMonthAndDay","monthName","_getDate","result","lastRowInDay","week","_updateIndex","_prepareCellData","data","$cell","_isCurrentDate","today","_isFirstDayOfMonth","cellDate","_isOtherMonth","needRenderDateTimeIndication","getCellDuration","getIntervalDuration","getTimePanelWidth","getPositionShift","cellPosition","timeShift","top","left","getCellCountToLastViewDate","firstDateTime","lastDateTime","dayDurationInMs","supportAllDayRow","keepOriginalHours","calculateEndDate","startDateCopy","getWorkSpaceLeftOffset","needApplyCollectorOffset","_getDateTableBorderOffset","_getCellPositionByIndex","position","calculatedTopOffset","groupIndex","_getHeaderDate","_supportCompactDropDownAppointments","scrollToTime","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.work_space_month.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../../core/renderer\");\r\nvar noop = require(\"../../../core/utils/common\").noop;\r\nvar registerComponent = require(\"../../../core/component_registrator\");\r\nvar SchedulerWorkSpace = require(\"./ui.scheduler.work_space.indicator\");\r\nvar dateUtils = require(\"../../../core/utils/date\");\r\nvar dateLocalization = require(\"../../../localization/date\");\r\nvar MONTH_CLASS = \"dx-scheduler-work-space-month\";\r\nvar DATE_TABLE_CURRENT_DATE_CLASS = \"dx-scheduler-date-table-current-date\";\r\nvar DATE_TABLE_FIRST_OF_MONTH_CLASS = \"dx-scheduler-date-table-first-of-month\";\r\nvar DATE_TABLE_OTHER_MONTH_DATE_CLASS = \"dx-scheduler-date-table-other-month\";\r\nvar DATE_TABLE_SCROLLABLE_FIXED_CLASS = \"dx-scheduler-scrollable-fixed-content\";\r\nvar DAYS_IN_WEEK = 7;\r\nvar DAY_IN_MILLISECONDS = 864e5;\r\nvar toMs = dateUtils.dateToMilliseconds;\r\nvar SchedulerWorkSpaceMonth = SchedulerWorkSpace.inherit({\r\n    _toggleFixedScrollableClass: function() {\r\n        this._dateTableScrollable.$content().toggleClass(DATE_TABLE_SCROLLABLE_FIXED_CLASS, !this._isWorkSpaceWithCount() && !this._isVerticalGroupedWorkSpace())\r\n    },\r\n    _getElementClass: function() {\r\n        return MONTH_CLASS\r\n    },\r\n    _getRowCount: function() {\r\n        return this._isWorkSpaceWithCount() ? 4 * this.option(\"intervalCount\") + 2 : 6\r\n    },\r\n    _getCellCount: function() {\r\n        return DAYS_IN_WEEK\r\n    },\r\n    _getDateByIndex: function(headerIndex) {\r\n        var resultDate = new Date(this._firstViewDate);\r\n        resultDate.setDate(this._firstViewDate.getDate() + headerIndex);\r\n        return resultDate\r\n    },\r\n    _getFormat: function() {\r\n        return this._formatWeekday\r\n    },\r\n    _calculateCellIndex: function(rowIndex, cellIndex) {\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            rowIndex %= this._getRowCount()\r\n        } else {\r\n            cellIndex %= this._getCellCount()\r\n        }\r\n        return rowIndex * this._getCellCount() + cellIndex\r\n    },\r\n    _getInterval: function() {\r\n        return DAY_IN_MILLISECONDS\r\n    },\r\n    _getIntervalBetween: function(currentDate) {\r\n        var firstViewDate = this.getStartViewDate();\r\n        var timeZoneOffset = dateUtils.getTimezonesDifference(firstViewDate, currentDate);\r\n        return currentDate.getTime() - (firstViewDate.getTime() - 36e5 * this.option(\"startDayHour\")) - timeZoneOffset\r\n    },\r\n    _getDateByCellIndexes: function(rowIndex, cellIndex) {\r\n        var date = this.callBase(rowIndex, cellIndex);\r\n        this._setStartDayHour(date);\r\n        return date\r\n    },\r\n    getCellWidth: function() {\r\n        var DAYS_IN_WEEK = 7;\r\n        var averageWidth = 0;\r\n        this._getCells().slice(0, DAYS_IN_WEEK).each(function(index, element) {\r\n            return averageWidth += element.getBoundingClientRect().width\r\n        });\r\n        return averageWidth / DAYS_IN_WEEK\r\n    },\r\n    _calculateHiddenInterval: function() {\r\n        return 0\r\n    },\r\n    _insertAllDayRowsIntoDateTable: function() {\r\n        return false\r\n    },\r\n    _getCellCoordinatesByIndex: function(index) {\r\n        var rowIndex = Math.floor(index / this._getCellCount());\r\n        var cellIndex = index - this._getCellCount() * rowIndex;\r\n        return {\r\n            rowIndex: rowIndex,\r\n            cellIndex: cellIndex\r\n        }\r\n    },\r\n    _createWorkSpaceElements: function() {\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            this._createWorkSpaceScrollableElements()\r\n        } else {\r\n            this.callBase()\r\n        }\r\n    },\r\n    _needCreateCrossScrolling: function() {\r\n        return this.option(\"crossScrollingEnabled\") || this._isVerticalGroupedWorkSpace()\r\n    },\r\n    _renderTimePanel: noop,\r\n    _renderAllDayPanel: noop,\r\n    _getTableAllDay: noop,\r\n    _toggleAllDayVisibility: noop,\r\n    _changeAllDayVisibility: noop,\r\n    _setFirstViewDate: function() {\r\n        var firstMonthDate = dateUtils.getFirstMonthDate(this._getViewStartByOptions());\r\n        this._firstViewDate = dateUtils.getFirstWeekDate(firstMonthDate, this.option(\"firstDayOfWeek\") || dateLocalization.firstDayOfWeekIndex());\r\n        this._setStartDayHour(this._firstViewDate);\r\n        var date = this._getViewStartByOptions();\r\n        this._minVisibleDate = new Date(date.setDate(1));\r\n        this._maxVisibleDate = new Date(new Date(date.setMonth(date.getMonth() + this.option(\"intervalCount\"))).setDate(0))\r\n    },\r\n    _getViewStartByOptions: function() {\r\n        if (!this.option(\"startDate\")) {\r\n            return new Date(this.option(\"currentDate\").getTime())\r\n        } else {\r\n            var startDate = this._getStartViewDate();\r\n            var currentDate = this.option(\"currentDate\");\r\n            var diff = startDate.getTime() <= currentDate.getTime() ? 1 : -1;\r\n            var endDate = new Date(new Date(this._getStartViewDate().setMonth(this._getStartViewDate().getMonth() + diff * this.option(\"intervalCount\"))));\r\n            while (!this._dateInRange(currentDate, startDate, endDate, diff)) {\r\n                startDate = new Date(endDate);\r\n                if (diff > 0) {\r\n                    startDate.setDate(1)\r\n                }\r\n                endDate = new Date(new Date(endDate.setMonth(endDate.getMonth() + diff * this.option(\"intervalCount\"))))\r\n            }\r\n            return diff > 0 ? startDate : endDate\r\n        }\r\n    },\r\n    _getStartViewDate: function() {\r\n        var firstMonthDate = dateUtils.getFirstMonthDate(this.option(\"startDate\"));\r\n        return firstMonthDate\r\n    },\r\n    _renderTableBody: function(options) {\r\n        options.getCellText = this._getCellText.bind(this);\r\n        this.callBase(options)\r\n    },\r\n    _getCellText: function(rowIndex, cellIndex) {\r\n        if (this.option(\"groupByDate\") && this._getGroupCount()) {\r\n            cellIndex = Math.floor(cellIndex / this._getGroupCount())\r\n        } else {\r\n            cellIndex %= this._getCellCount()\r\n        }\r\n        var date = this._getDate(rowIndex, cellIndex);\r\n        if (this._isWorkSpaceWithCount() && this._isFirstDayOfMonth(date)) {\r\n            return this._formatMonthAndDay(date)\r\n        }\r\n        return dateLocalization.format(date, \"dd\")\r\n    },\r\n    _formatMonthAndDay: function(date) {\r\n        var monthName = dateLocalization.getMonthNames(\"abbreviated\")[date.getMonth()];\r\n        return [monthName, dateLocalization.format(date, \"day\")].join(\" \")\r\n    },\r\n    _getDate: function(week, day) {\r\n        var result = new Date(this._firstViewDate);\r\n        var lastRowInDay = this._getRowCount();\r\n        result.setDate(result.getDate() + week % lastRowInDay * DAYS_IN_WEEK + day);\r\n        return result\r\n    },\r\n    _updateIndex: function(index) {\r\n        return index\r\n    },\r\n    _prepareCellData: function(rowIndex, cellIndex, cell) {\r\n        var data = this.callBase(rowIndex, cellIndex, cell);\r\n        var $cell = $(cell);\r\n        $cell.toggleClass(DATE_TABLE_CURRENT_DATE_CLASS, this._isCurrentDate(data.startDate)).toggleClass(DATE_TABLE_FIRST_OF_MONTH_CLASS, this._isFirstDayOfMonth(data.startDate)).toggleClass(DATE_TABLE_OTHER_MONTH_DATE_CLASS, this._isOtherMonth(data.startDate));\r\n        return data\r\n    },\r\n    _isCurrentDate: function(cellDate) {\r\n        var today = new Date;\r\n        return dateUtils.sameDate(cellDate, today)\r\n    },\r\n    _isFirstDayOfMonth: function(cellDate) {\r\n        return this._isWorkSpaceWithCount() && 1 === cellDate.getDate()\r\n    },\r\n    _isOtherMonth: function(cellDate) {\r\n        return !dateUtils.dateInRange(cellDate, this._minVisibleDate, this._maxVisibleDate, \"date\")\r\n    },\r\n    needRenderDateTimeIndication: function() {\r\n        return false\r\n    },\r\n    getCellDuration: function() {\r\n        return 36e5 * this._calculateDayDuration()\r\n    },\r\n    getIntervalDuration: function() {\r\n        return toMs(\"day\")\r\n    },\r\n    getTimePanelWidth: function() {\r\n        return 0\r\n    },\r\n    getPositionShift: function(timeShift) {\r\n        return {\r\n            cellPosition: timeShift * this.getCellWidth(),\r\n            top: 0,\r\n            left: 0\r\n        }\r\n    },\r\n    getCellCountToLastViewDate: function(date) {\r\n        var firstDateTime = date.getTime();\r\n        var lastDateTime = this.getEndViewDate().getTime();\r\n        var dayDurationInMs = this.getCellDuration();\r\n        return Math.ceil((lastDateTime - firstDateTime) / dayDurationInMs)\r\n    },\r\n    supportAllDayRow: function() {\r\n        return false\r\n    },\r\n    keepOriginalHours: function() {\r\n        return true\r\n    },\r\n    calculateEndDate: function(startDate) {\r\n        var startDateCopy = new Date(startDate);\r\n        return new Date(startDateCopy.setHours(this.option(\"endDayHour\")))\r\n    },\r\n    getWorkSpaceLeftOffset: function() {\r\n        return 0\r\n    },\r\n    needApplyCollectorOffset: function() {\r\n        return true\r\n    },\r\n    _getDateTableBorderOffset: function() {\r\n        return this._getDateTableBorder()\r\n    },\r\n    _getCellPositionByIndex: function(index, groupIndex) {\r\n        var position = this.callBase(index, groupIndex);\r\n        var rowIndex = this._getCellCoordinatesByIndex(index).rowIndex;\r\n        var calculatedTopOffset;\r\n        if (!this._isVerticalGroupedWorkSpace()) {\r\n            calculatedTopOffset = this.getCellHeight() * rowIndex\r\n        } else {\r\n            calculatedTopOffset = this.getCellHeight() * (rowIndex + groupIndex * this._getRowCount())\r\n        }\r\n        if (calculatedTopOffset) {\r\n            position.top = calculatedTopOffset\r\n        }\r\n        return position\r\n    },\r\n    _getHeaderDate: function() {\r\n        return this._getViewStartByOptions()\r\n    },\r\n    _supportCompactDropDownAppointments: function() {\r\n        return false\r\n    },\r\n    scrollToTime: noop\r\n});\r\nregisterComponent(\"dxSchedulerWorkSpaceMonth\", SchedulerWorkSpaceMonth);\r\nmodule.exports = SchedulerWorkSpaceMonth;\r\n"]},"metadata":{},"sourceType":"module"}