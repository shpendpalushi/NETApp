{"ast":null,"code":"import _get from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _classCallCheck from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function timeoutWith(due, withObservable) {\n  var scheduler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : async;\n  return function (source) {\n    var absoluteTimeout = isDate(due);\n    var waitFor = absoluteTimeout ? +due - scheduler.now() : Math.abs(due);\n    return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n  };\n}\n\nvar TimeoutWithOperator = /*#__PURE__*/function () {\n  function TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler) {\n    _classCallCheck(this, TimeoutWithOperator);\n\n    this.waitFor = waitFor;\n    this.absoluteTimeout = absoluteTimeout;\n    this.withObservable = withObservable;\n    this.scheduler = scheduler;\n  }\n\n  _createClass(TimeoutWithOperator, [{\n    key: \"call\",\n    value: function call(subscriber, source) {\n      return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\n    }\n  }]);\n\n  return TimeoutWithOperator;\n}();\n\nvar TimeoutWithSubscriber = /*#__PURE__*/function (_OuterSubscriber) {\n  _inherits(TimeoutWithSubscriber, _OuterSubscriber);\n\n  var _super = _createSuper(TimeoutWithSubscriber);\n\n  function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n    var _this;\n\n    _classCallCheck(this, TimeoutWithSubscriber);\n\n    _this = _super.call(this, destination);\n    _this.absoluteTimeout = absoluteTimeout;\n    _this.waitFor = waitFor;\n    _this.withObservable = withObservable;\n    _this.scheduler = scheduler;\n    _this.action = null;\n\n    _this.scheduleTimeout();\n\n    return _this;\n  }\n\n  _createClass(TimeoutWithSubscriber, [{\n    key: \"scheduleTimeout\",\n    value: function scheduleTimeout() {\n      var action = this.action;\n\n      if (action) {\n        this.action = action.schedule(this, this.waitFor);\n      } else {\n        this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n      }\n    }\n  }, {\n    key: \"_next\",\n    value: function _next(value) {\n      if (!this.absoluteTimeout) {\n        this.scheduleTimeout();\n      }\n\n      _get(_getPrototypeOf(TimeoutWithSubscriber.prototype), \"_next\", this).call(this, value);\n    }\n  }, {\n    key: \"_unsubscribe\",\n    value: function _unsubscribe() {\n      this.action = null;\n      this.scheduler = null;\n      this.withObservable = null;\n    }\n  }], [{\n    key: \"dispatchTimeout\",\n    value: function dispatchTimeout(subscriber) {\n      var withObservable = subscriber.withObservable;\n\n      subscriber._unsubscribeAndRecycle();\n\n      subscriber.add(subscribeToResult(subscriber, withObservable));\n    }\n  }]);\n\n  return TimeoutWithSubscriber;\n}(OuterSubscriber);","map":{"version":3,"sources":["../../../src/internal/operators/timeoutWith.ts"],"names":[],"mappings":"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","sourcesContent":["import { async } from '../scheduler/async';\r\nimport { isDate } from '../util/isDate';\r\nimport { OuterSubscriber } from '../OuterSubscriber';\r\nimport { subscribeToResult } from '../util/subscribeToResult';\r\nexport function timeoutWith(due, withObservable, scheduler = async) {\r\n    return (source) => {\r\n        let absoluteTimeout = isDate(due);\r\n        let waitFor = absoluteTimeout ? (+due - scheduler.now()) : Math.abs(due);\r\n        return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\r\n    };\r\n}\r\nclass TimeoutWithOperator {\r\n    constructor(waitFor, absoluteTimeout, withObservable, scheduler) {\r\n        this.waitFor = waitFor;\r\n        this.absoluteTimeout = absoluteTimeout;\r\n        this.withObservable = withObservable;\r\n        this.scheduler = scheduler;\r\n    }\r\n    call(subscriber, source) {\r\n        return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\r\n    }\r\n}\r\nclass TimeoutWithSubscriber extends OuterSubscriber {\r\n    constructor(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\r\n        super(destination);\r\n        this.absoluteTimeout = absoluteTimeout;\r\n        this.waitFor = waitFor;\r\n        this.withObservable = withObservable;\r\n        this.scheduler = scheduler;\r\n        this.action = null;\r\n        this.scheduleTimeout();\r\n    }\r\n    static dispatchTimeout(subscriber) {\r\n        const { withObservable } = subscriber;\r\n        subscriber._unsubscribeAndRecycle();\r\n        subscriber.add(subscribeToResult(subscriber, withObservable));\r\n    }\r\n    scheduleTimeout() {\r\n        const { action } = this;\r\n        if (action) {\r\n            this.action = action.schedule(this, this.waitFor);\r\n        }\r\n        else {\r\n            this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\r\n        }\r\n    }\r\n    _next(value) {\r\n        if (!this.absoluteTimeout) {\r\n            this.scheduleTimeout();\r\n        }\r\n        super._next(value);\r\n    }\r\n    _unsubscribe() {\r\n        this.action = null;\r\n        this.scheduler = null;\r\n        this.withObservable = null;\r\n    }\r\n}\r\n//# sourceMappingURL=timeoutWith.js.map"]},"metadata":{},"sourceType":"module"}