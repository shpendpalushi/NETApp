{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.column_fixing.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _wheel = require(\"../../events/core/wheel\");\n\nvar _wheel2 = _interopRequireDefault(_wheel);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _uiGrid_core = require(\"../grid_core/ui.grid_core.utils\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _translator2 = _interopRequireDefault(_translator);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar CONTENT_CLASS = \"content\";\nvar CONTENT_FIXED_CLASS = \"content-fixed\";\nvar MASTER_DETAIL_CELL_CLASS = \"dx-master-detail-cell\";\nvar FIRST_CELL_CLASS = \"dx-first-cell\";\nvar LAST_CELL_CLASS = \"dx-last-cell\";\nvar HOVER_STATE_CLASS = \"dx-state-hover\";\nvar FIXED_COL_CLASS = \"dx-col-fixed\";\nvar FIXED_COLUMNS_CLASS = \"dx-fixed-columns\";\nvar POINTER_EVENTS_TARGET_CLASS = \"dx-pointer-events-target\";\nvar POINTER_EVENTS_NONE_CLASS = \"dx-pointer-events-none\";\nvar COMMAND_TRANSPARENT = \"transparent\";\nvar GROUP_ROW_CLASS = \"dx-group-row\";\n\nvar getTransparentColumnIndex = function getTransparentColumnIndex(fixedColumns) {\n  var transparentColumnIndex = -1;\n  (0, _iterator.each)(fixedColumns, function (index, column) {\n    if (column.command === COMMAND_TRANSPARENT) {\n      transparentColumnIndex = index;\n      return false;\n    }\n  });\n  return transparentColumnIndex;\n};\n\nvar normalizeColumnWidths = function normalizeColumnWidths(fixedColumns, widths, fixedWidths) {\n  var i;\n  var fixedColumnIndex = 0;\n\n  if (fixedColumns && widths && fixedWidths) {\n    for (i = 0; i < fixedColumns.length; i++) {\n      if (fixedColumns[i].command === COMMAND_TRANSPARENT) {\n        fixedColumnIndex += fixedColumns[i].colspan;\n      } else {\n        if (widths[fixedColumnIndex] < fixedWidths[i]) {\n          widths[fixedColumnIndex] = fixedWidths[i];\n        }\n\n        fixedColumnIndex++;\n      }\n    }\n  }\n\n  return widths;\n};\n\nvar baseFixedColumns = {\n  init: function init() {\n    this.callBase();\n    this._isFixedTableRendering = false;\n    this._isFixedColumns = false;\n  },\n  _createCol: function _createCol(column) {\n    return this.callBase(column).toggleClass(FIXED_COL_CLASS, !!(this._isFixedTableRendering && (column.fixed || column.command && column.command !== COMMAND_TRANSPARENT)));\n  },\n  _correctColumnIndicesForFixedColumns: function _correctColumnIndicesForFixedColumns(fixedColumns, change) {\n    var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\n    var transparentColspan = fixedColumns[transparentColumnIndex].colspan;\n    var columnIndices = change && change.columnIndices;\n\n    if (columnIndices) {\n      change.columnIndices = columnIndices.map(function (columnIndices) {\n        if (columnIndices) {\n          return columnIndices.map(function (columnIndex) {\n            if (columnIndex < transparentColumnIndex) {\n              return columnIndex;\n            } else {\n              if (columnIndex >= transparentColumnIndex + transparentColspan) {\n                return columnIndex - transparentColspan + 1;\n              }\n            }\n\n            return -1;\n          }).filter(function (columnIndex) {\n            return columnIndex >= 0;\n          });\n        }\n      });\n    }\n  },\n  _renderTable: function _renderTable(options) {\n    var that = this;\n    var $fixedTable;\n    var $table;\n    var fixedColumns = that.getFixedColumns();\n    that._isFixedColumns = !!fixedColumns.length;\n    $table = that.callBase(options);\n\n    if (that._isFixedColumns) {\n      that._isFixedTableRendering = true;\n      var change = options && options.change;\n      var columnIndices = change && change.columnIndices;\n\n      that._correctColumnIndicesForFixedColumns(fixedColumns, change);\n\n      $fixedTable = that._createTable(fixedColumns);\n\n      that._renderRows($fixedTable, (0, _extend.extend)({}, options, {\n        columns: fixedColumns\n      }));\n\n      that._updateContent($fixedTable, change);\n\n      if (columnIndices) {\n        change.columnIndices = columnIndices;\n      }\n\n      that._isFixedTableRendering = false;\n    } else {\n      that._fixedTableElement && that._fixedTableElement.parent().remove();\n      that._fixedTableElement = null;\n    }\n\n    return $table;\n  },\n  _renderRow: function _renderRow($table, options) {\n    var fixedCells;\n    var fixedCorrection;\n    var cells = options.row.cells;\n    this.callBase.apply(this, arguments);\n\n    if (this._isFixedTableRendering && cells && cells.length) {\n      fixedCorrection = 0;\n      fixedCells = options.row.cells || [];\n      cells = cells.slice();\n      options.row.cells = cells;\n\n      for (var i = 0; i < fixedCells.length; i++) {\n        if (fixedCells[i].column && fixedCells[i].column.command === COMMAND_TRANSPARENT) {\n          fixedCorrection = (fixedCells[i].column.colspan || 1) - 1;\n          continue;\n        }\n\n        cells[i + fixedCorrection] = fixedCells[i];\n      }\n    }\n  },\n  _createCell: function _createCell(options) {\n    var that = this;\n    var column = options.column;\n    var columnCommand = column && column.command;\n    var rowType = options.rowType;\n    var $cell = that.callBase.apply(that, arguments);\n    var fixedColumns;\n    var prevFixedColumn;\n    var transparentColumnIndex;\n\n    if (that._isFixedTableRendering || \"filter\" === rowType) {\n      fixedColumns = that.getFixedColumns();\n      transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\n      prevFixedColumn = fixedColumns[transparentColumnIndex - 1];\n    }\n\n    if (that._isFixedTableRendering) {\n      if (columnCommand === COMMAND_TRANSPARENT) {\n        $cell.addClass(POINTER_EVENTS_NONE_CLASS).toggleClass(FIRST_CELL_CLASS, 0 === transparentColumnIndex || prevFixedColumn && \"expand\" === prevFixedColumn.command).toggleClass(LAST_CELL_CLASS, fixedColumns.length && transparentColumnIndex === fixedColumns.length - 1);\n\n        if (\"freeSpace\" !== rowType) {\n          _uiGrid_core2.default.setEmptyText($cell);\n        }\n      }\n    } else {\n      if (\"filter\" === rowType) {\n        $cell.toggleClass(FIRST_CELL_CLASS, options.columnIndex === transparentColumnIndex);\n      }\n    }\n\n    return $cell;\n  },\n  _wrapTableInScrollContainer: function _wrapTableInScrollContainer() {\n    var $scrollContainer = this.callBase.apply(this, arguments);\n\n    if (this._isFixedTableRendering) {\n      $scrollContainer.addClass(this.addWidgetPrefix(CONTENT_FIXED_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS);\n    }\n\n    return $scrollContainer;\n  },\n  _renderCellContent: function _renderCellContent($cell, options) {\n    var that = this;\n    var columns;\n    var isEmptyCell;\n    var transparentColumnIndex;\n    var alignByFixedColumnCellCount;\n    var column = options.column;\n    var isFixedTableRendering = that._isFixedTableRendering;\n    var isGroupCell = \"group\" === options.rowType && (0, _type.isDefined)(column.groupIndex);\n\n    if (isFixedTableRendering && isGroupCell && !column.command && !column.groupCellTemplate) {\n      $cell.css(\"pointerEvents\", \"none\");\n    }\n\n    if (!isFixedTableRendering && that._isFixedColumns) {\n      isEmptyCell = column.fixed || column.command && false !== column.fixed;\n\n      if (isGroupCell) {\n        isEmptyCell = false;\n\n        if (options.row.summaryCells && options.row.summaryCells.length) {\n          columns = that._columnsController.getVisibleColumns();\n          alignByFixedColumnCellCount = that._getAlignByColumnCellCount ? that._getAlignByColumnCellCount(column.colspan, {\n            columns: columns,\n            row: options.row,\n            isFixed: true\n          }) : 0;\n\n          if (alignByFixedColumnCellCount > 0) {\n            transparentColumnIndex = getTransparentColumnIndex(that._columnsController.getFixedColumns());\n            isEmptyCell = columns.length - alignByFixedColumnCellCount < transparentColumnIndex;\n          }\n        }\n      }\n\n      if (isEmptyCell) {\n        if (that.option(\"legacyRendering\") || column.command && \"buttons\" !== column.type || \"group\" === options.rowType) {\n          $cell.html(\"&nbsp;\").addClass(column.cssClass);\n          return;\n        } else {\n          $cell.addClass(\"dx-hidden-cell\");\n        }\n      }\n    }\n\n    if (column.command !== COMMAND_TRANSPARENT) {\n      that.callBase($cell, options);\n    }\n  },\n  _getCellElementsCore: function _getCellElementsCore(rowIndex) {\n    var that = this;\n    var fixedColumn;\n    var fixedColumns;\n    var fixedColumnIndex;\n    var fixedCellElements;\n    var cellElements = that.callBase(rowIndex);\n    var isGroupRow = cellElements.parent().hasClass(GROUP_ROW_CLASS);\n    var index = \"columnHeadersView\" === that.name ? rowIndex : void 0;\n\n    if (that._fixedTableElement && cellElements) {\n      fixedColumns = that.getFixedColumns(index);\n      fixedCellElements = that._getRowElements(that._fixedTableElement).eq(rowIndex).children(\"td\");\n      (0, _iterator.each)(fixedCellElements, function (columnIndex, cell) {\n        if (isGroupRow) {\n          if (cellElements[columnIndex] && \"hidden\" !== cell.style.visibility) {\n            cellElements[columnIndex] = cell;\n          }\n        } else {\n          fixedColumn = fixedColumns[columnIndex];\n\n          if (fixedColumn) {\n            if (fixedColumn.command === COMMAND_TRANSPARENT) {\n              if (fixedCellElements.eq(columnIndex).hasClass(MASTER_DETAIL_CELL_CLASS)) {\n                cellElements[columnIndex] = cell || cellElements[columnIndex];\n              }\n            } else {\n              fixedColumnIndex = that._columnsController.getVisibleIndex(fixedColumn.index, index);\n              cellElements[fixedColumnIndex] = cell || cellElements[fixedColumnIndex];\n            }\n          }\n        }\n      });\n    }\n\n    return cellElements;\n  },\n  getColumnWidths: function getColumnWidths() {\n    var that = this;\n    var fixedWidths;\n    var result = that.callBase();\n    var fixedColumns = that.getFixedColumns();\n\n    if (that._fixedTableElement && result.length) {\n      fixedWidths = that.callBase(that._fixedTableElement);\n    }\n\n    return normalizeColumnWidths(fixedColumns, result, fixedWidths);\n  },\n  _getTableElement: function _getTableElement() {\n    var tableElement = this._isFixedTableRendering ? this._fixedTableElement : this.callBase();\n    return tableElement;\n  },\n  _setTableElement: function _setTableElement(tableElement) {\n    if (this._isFixedTableRendering) {\n      this._fixedTableElement = tableElement.addClass(POINTER_EVENTS_NONE_CLASS);\n    } else {\n      this.callBase(tableElement);\n    }\n  },\n  getColumns: function getColumns(rowIndex, $tableElement) {\n    $tableElement = $tableElement || this._getTableElement();\n\n    if (this._isFixedTableRendering || $tableElement && $tableElement.closest(\"table\").parent(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS)).length) {\n      return this.getFixedColumns(rowIndex);\n    }\n\n    return this.callBase(rowIndex, $tableElement);\n  },\n  getRowIndex: function getRowIndex($row) {\n    var $fixedTable = this._fixedTableElement;\n\n    if ($fixedTable && $fixedTable.find($row).length) {\n      return this._getRowElements($fixedTable).index($row);\n    }\n\n    return this.callBase($row);\n  },\n  getTableElements: function getTableElements() {\n    var result = this.callBase.apply(this, arguments);\n\n    if (this._fixedTableElement) {\n      result = (0, _renderer2.default)([result.get(0), this._fixedTableElement.get(0)]);\n    }\n\n    return result;\n  },\n  getFixedColumns: function getFixedColumns(rowIndex) {\n    return this._columnsController.getFixedColumns(rowIndex);\n  },\n  getFixedColumnsOffset: function getFixedColumnsOffset() {\n    var offset = {\n      left: 0,\n      right: 0\n    };\n    var $transparentColumn;\n    var positionTransparentColumn;\n\n    if (this._fixedTableElement) {\n      $transparentColumn = this.getTransparentColumnElement();\n      positionTransparentColumn = $transparentColumn.position();\n      offset = {\n        left: positionTransparentColumn.left,\n        right: this.element().outerWidth(true) - ($transparentColumn.outerWidth(true) + positionTransparentColumn.left)\n      };\n    }\n\n    return offset;\n  },\n  getTransparentColumnElement: function getTransparentColumnElement() {\n    return this._fixedTableElement && this._fixedTableElement.find(\".\" + POINTER_EVENTS_NONE_CLASS).first();\n  },\n  getFixedTableElement: function getFixedTableElement() {\n    return this._fixedTableElement;\n  },\n  isFixedColumns: function isFixedColumns() {\n    return this._isFixedColumns;\n  },\n  _resizeCore: function _resizeCore() {\n    this.callBase();\n    this.synchronizeRows();\n  },\n  setColumnWidths: function setColumnWidths(options) {\n    var columns;\n\n    var visibleColumns = this._columnsController.getVisibleColumns();\n\n    var widths = options.widths;\n    var isWidthsSynchronized = widths && widths.length && (0, _type.isDefined)(visibleColumns[0].visibleWidth);\n    var optionNames = options.optionNames;\n    var isColumnWidthChanged = optionNames && optionNames.width;\n    var useVisibleColumns = false;\n    this.callBase.apply(this, arguments);\n\n    if (this._fixedTableElement) {\n      if (this.option(\"legacyRendering\")) {\n        useVisibleColumns = widths && widths.length && !this.isScrollbarVisible(true);\n      } else {\n        var hasAutoWidth = widths && widths.some(function (width) {\n          return \"auto\" === width;\n        });\n        useVisibleColumns = hasAutoWidth && (!isWidthsSynchronized || !this.isScrollbarVisible(true));\n      }\n\n      if (useVisibleColumns) {\n        columns = visibleColumns;\n      }\n\n      this.callBase((0, _extend.extend)({}, options, {\n        $tableElement: this._fixedTableElement,\n        columns: columns,\n        fixed: true\n      }));\n    }\n\n    if (isWidthsSynchronized || isColumnWidthChanged && this.option(\"wordWrapEnabled\")) {\n      this.synchronizeRows();\n    }\n  },\n  _createColGroup: function _createColGroup(columns) {\n    if (!this.option(\"legacyRendering\") && this._isFixedTableRendering && !this.option(\"columnAutoWidth\")) {\n      var visibleColumns = this._columnsController.getVisibleColumns();\n\n      var useVisibleColumns = visibleColumns.filter(function (column) {\n        return !column.width;\n      }).length;\n\n      if (useVisibleColumns) {\n        columns = visibleColumns;\n      }\n    }\n\n    return this.callBase(columns);\n  },\n  _getClientHeight: function _getClientHeight(element) {\n    var boundingClientRectElement = element.getBoundingClientRect && element.getBoundingClientRect();\n    return boundingClientRectElement && boundingClientRectElement.height ? boundingClientRectElement.height : element.clientHeight;\n  },\n  synchronizeRows: function synchronizeRows() {\n    var that = this;\n    var rowHeight;\n    var fixedRowHeight;\n    var rowHeights = [];\n    var fixedRowHeights = [];\n    var rowIndex;\n    var heightTable;\n    var heightFixedTable;\n    var $rowElements;\n    var $fixedRowElements;\n    var $contentElement;\n\n    if (that._isFixedColumns && that._tableElement && that._fixedTableElement) {\n      heightTable = that._getClientHeight(that._tableElement.get(0));\n      heightFixedTable = that._getClientHeight(that._fixedTableElement.get(0));\n      $rowElements = that._getRowElements(that._tableElement);\n      $fixedRowElements = that._getRowElements(that._fixedTableElement);\n      $contentElement = that._findContentElement();\n\n      if (heightTable !== heightFixedTable) {\n        $contentElement && $contentElement.css(\"height\", heightTable);\n        $rowElements.css(\"height\", \"\");\n        $fixedRowElements.css(\"height\", \"\");\n\n        for (rowIndex = 0; rowIndex < $rowElements.length; rowIndex++) {\n          rowHeights.push(that._getClientHeight($rowElements.get(rowIndex)));\n          fixedRowHeights.push(that._getClientHeight($fixedRowElements.get(rowIndex)));\n        }\n\n        for (rowIndex = 0; rowIndex < $rowElements.length; rowIndex++) {\n          rowHeight = rowHeights[rowIndex];\n          fixedRowHeight = fixedRowHeights[rowIndex];\n\n          if (rowHeight > fixedRowHeight) {\n            $fixedRowElements.eq(rowIndex).css(\"height\", rowHeight);\n          } else {\n            if (rowHeight < fixedRowHeight) {\n              $rowElements.eq(rowIndex).css(\"height\", fixedRowHeight);\n            }\n          }\n        }\n\n        $contentElement && $contentElement.css(\"height\", \"\");\n      }\n    }\n  },\n  setScrollerSpacing: function setScrollerSpacing(width) {\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    this.callBase(width);\n    this.element().children(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS)).css({\n      paddingLeft: rtlEnabled ? width : \"\",\n      paddingRight: !rtlEnabled ? width : \"\"\n    });\n  }\n};\nvar ColumnHeadersViewFixedColumnsExtender = (0, _extend.extend)({}, baseFixedColumns, {\n  _getRowVisibleColumns: function _getRowVisibleColumns(rowIndex) {\n    if (this._isFixedTableRendering) {\n      return this.getFixedColumns(rowIndex);\n    }\n\n    return this.callBase(rowIndex);\n  },\n  getContextMenuItems: function getContextMenuItems(options) {\n    var that = this;\n    var column = options.column;\n    var onItemClick;\n    var columnFixingOptions = that.option(\"columnFixing\");\n    var items = that.callBase(options);\n\n    if (options.row && \"header\" === options.row.rowType) {\n      if (column && column.allowFixing) {\n        onItemClick = function onItemClick(params) {\n          switch (params.itemData.value) {\n            case \"none\":\n              that._columnsController.columnOption(column.index, \"fixed\", false);\n\n              break;\n\n            case \"left\":\n              that._columnsController.columnOption(column.index, {\n                fixed: true,\n                fixedPosition: \"left\"\n              });\n\n              break;\n\n            case \"right\":\n              that._columnsController.columnOption(column.index, {\n                fixed: true,\n                fixedPosition: \"right\"\n              });\n\n          }\n        };\n\n        items = items || [];\n        items.push({\n          text: columnFixingOptions.texts.fix,\n          beginGroup: true,\n          items: [{\n            text: columnFixingOptions.texts.leftPosition,\n            value: \"left\",\n            disabled: column.fixed && (!column.fixedPosition || \"left\" === column.fixedPosition),\n            onItemClick: onItemClick\n          }, {\n            text: columnFixingOptions.texts.rightPosition,\n            value: \"right\",\n            disabled: column.fixed && \"right\" === column.fixedPosition,\n            onItemClick: onItemClick\n          }]\n        }, {\n          text: columnFixingOptions.texts.unfix,\n          value: \"none\",\n          disabled: !column.fixed,\n          onItemClick: onItemClick\n        });\n      }\n    }\n\n    return items;\n  },\n  getFixedColumnElements: function getFixedColumnElements(rowIndex) {\n    var that = this;\n    var columnElements;\n    var transparentColumnIndex;\n    var $transparentColumnElement;\n\n    if ((0, _type.isDefined)(rowIndex)) {\n      return this._fixedTableElement && this._getRowElements(this._fixedTableElement).eq(rowIndex).children();\n    }\n\n    columnElements = that.getColumnElements();\n    $transparentColumnElement = that.getTransparentColumnElement();\n\n    if (columnElements && $transparentColumnElement && $transparentColumnElement.length) {\n      transparentColumnIndex = getTransparentColumnIndex(that.getFixedColumns());\n      columnElements.splice(transparentColumnIndex, $transparentColumnElement.get(0).colSpan, $transparentColumnElement.get(0));\n    }\n\n    return columnElements;\n  },\n  getColumnWidths: function getColumnWidths() {\n    var that = this;\n    var fixedWidths;\n    var result = that.callBase();\n    var $fixedColumnElements = that.getFixedColumnElements();\n    var fixedColumns = that.getFixedColumns();\n\n    if (that._fixedTableElement) {\n      if ($fixedColumnElements && $fixedColumnElements.length) {\n        fixedWidths = that._getWidths($fixedColumnElements);\n      } else {\n        fixedWidths = that.callBase(that._fixedTableElement);\n      }\n    }\n\n    return normalizeColumnWidths(fixedColumns, result, fixedWidths);\n  }\n});\nvar RowsViewFixedColumnsExtender = (0, _extend.extend)({}, baseFixedColumns, {\n  _detachHoverEvents: function _detachHoverEvents() {\n    this._fixedTableElement && _events_engine2.default.off(this._fixedTableElement, \"mouseover mouseout\", \".dx-data-row\");\n    this._tableElement && _events_engine2.default.off(this._tableElement, \"mouseover mouseout\", \".dx-data-row\");\n  },\n  _attachHoverEvents: function _attachHoverEvents() {\n    var that = this;\n\n    var attachHoverEvent = function attachHoverEvent($table) {\n      _events_engine2.default.on($table, \"mouseover mouseout\", \".dx-data-row\", that.createAction(function (args) {\n        var event = args.event;\n        var rowIndex = that.getRowIndex((0, _renderer2.default)(event.target).closest(\".dx-row\"));\n        var isHover = \"mouseover\" === event.type;\n\n        if (rowIndex >= 0) {\n          that._tableElement && that._getRowElements(that._tableElement).eq(rowIndex).toggleClass(HOVER_STATE_CLASS, isHover);\n          that._fixedTableElement && that._getRowElements(that._fixedTableElement).eq(rowIndex).toggleClass(HOVER_STATE_CLASS, isHover);\n        }\n      }));\n    };\n\n    if (that._fixedTableElement && that._tableElement) {\n      attachHoverEvent(that._fixedTableElement);\n      attachHoverEvent(that._tableElement);\n    }\n  },\n  _findContentElement: function _findContentElement() {\n    var that = this;\n    var $content;\n    var scrollable;\n    var scrollTop;\n    var contentClass = that.addWidgetPrefix(CONTENT_CLASS);\n    var element = that.element();\n    var scrollDelay = _browser2.default.mozilla ? 60 : 0;\n\n    if (element && that._isFixedTableRendering) {\n      $content = element.children(\".\" + contentClass);\n      scrollable = that.getScrollable();\n\n      if (!$content.length && scrollable) {\n        $content = (0, _renderer2.default)(\"<div>\").addClass(contentClass);\n\n        _events_engine2.default.on($content, \"scroll\", function (e) {\n          clearTimeout(that._fixedScrollTimeout);\n          that._fixedScrollTimeout = setTimeout(function () {\n            scrollTop = (0, _renderer2.default)(e.target).scrollTop();\n            scrollable.scrollTo({\n              y: scrollTop\n            });\n          }, scrollDelay);\n        });\n\n        _events_engine2.default.on($content, _wheel2.default.name, function (e) {\n          if (scrollable) {\n            scrollTop = scrollable.scrollTop();\n            scrollable.scrollTo({\n              y: scrollTop - e.delta\n            });\n\n            if (scrollable.scrollTop() > 0 && scrollable.scrollTop() + scrollable.clientHeight() < scrollable.scrollHeight() + that.getScrollbarWidth()) {\n              return false;\n            }\n          }\n        });\n\n        $content.appendTo(element);\n      }\n\n      return $content;\n    }\n\n    return that.callBase();\n  },\n  _updateScrollable: function _updateScrollable() {\n    this.callBase();\n    var scrollable = this.getScrollable();\n    var scrollTop = scrollable && scrollable.scrollOffset().top;\n\n    this._updateFixedTablePosition(scrollTop);\n  },\n  _renderContent: function _renderContent(contentElement, tableElement) {\n    if (this._isFixedTableRendering) {\n      return contentElement.empty().addClass(this.addWidgetPrefix(CONTENT_CLASS) + \" \" + this.addWidgetPrefix(CONTENT_FIXED_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS).append(tableElement);\n    }\n\n    return this.callBase(contentElement, tableElement);\n  },\n  _getGroupCellOptions: function _getGroupCellOptions(options) {\n    if (this._isFixedTableRendering) {\n      return this.callBase((0, _extend.extend)({}, options, {\n        columns: this._columnsController.getVisibleColumns()\n      }));\n    }\n\n    return this.callBase(options);\n  },\n  _renderGroupedCells: function _renderGroupedCells($row, options) {\n    return this.callBase($row, (0, _extend.extend)({}, options, {\n      columns: this._columnsController.getVisibleColumns()\n    }));\n  },\n  _renderGroupSummaryCells: function _renderGroupSummaryCells($row, options) {\n    if (this._isFixedTableRendering) {\n      this.callBase($row, (0, _extend.extend)({}, options, {\n        columns: this._columnsController.getVisibleColumns()\n      }));\n    } else {\n      this.callBase($row, options);\n    }\n  },\n  _hasAlignByColumnSummaryItems: function _hasAlignByColumnSummaryItems(columnIndex, options) {\n    var result = this.callBase.apply(this, arguments);\n    var column = options.columns[columnIndex];\n\n    if (options.isFixed) {\n      return column.fixed && (result || \"right\" === column.fixedPosition);\n    }\n\n    return result && !column.fixed;\n  },\n  _renderGroupSummaryCellsCore: function _renderGroupSummaryCellsCore($groupCell, options, groupCellColSpan, alignByColumnCellCount) {\n    var startColumnIndex;\n    var transparentColumnIndex;\n    var alignByFixedColumnCellCount;\n\n    if (this._isFixedTableRendering) {\n      options.isFixed = true;\n      alignByFixedColumnCellCount = this._getAlignByColumnCellCount(groupCellColSpan, options);\n      options.isFixed = false;\n      startColumnIndex = options.columns.length - alignByFixedColumnCellCount;\n      options = (0, _extend.extend)({}, options, {\n        columns: this.getFixedColumns()\n      });\n      transparentColumnIndex = getTransparentColumnIndex(options.columns);\n\n      if (startColumnIndex < transparentColumnIndex) {\n        alignByFixedColumnCellCount -= options.columns[transparentColumnIndex].colspan - 1 || 0;\n        groupCellColSpan -= options.columns[transparentColumnIndex].colspan - 1 || 0;\n      } else {\n        if (alignByColumnCellCount > 0) {\n          $groupCell.css(\"visibility\", \"hidden\");\n        }\n      }\n\n      alignByColumnCellCount = alignByFixedColumnCellCount;\n    }\n\n    this.callBase($groupCell, options, groupCellColSpan, alignByColumnCellCount);\n  },\n  _getSummaryCellIndex: function _getSummaryCellIndex(columnIndex, columns) {\n    var transparentColumnIndex;\n\n    if (this._isFixedTableRendering) {\n      transparentColumnIndex = getTransparentColumnIndex(columns);\n\n      if (columnIndex > transparentColumnIndex) {\n        columnIndex += columns[transparentColumnIndex].colspan - 1;\n      }\n\n      return columnIndex;\n    }\n\n    return this.callBase.apply(this, arguments);\n  },\n  _renderCore: function _renderCore(change) {\n    this._detachHoverEvents();\n\n    this.callBase(change);\n    var isFixedColumns = this._isFixedColumns;\n    this.element().toggleClass(FIXED_COLUMNS_CLASS, isFixedColumns);\n\n    if (this.option(\"hoverStateEnabled\") && isFixedColumns) {\n      this._attachHoverEvents();\n    }\n  },\n  setRowsOpacity: function setRowsOpacity(columnIndex, value) {\n    this.callBase(columnIndex, value);\n\n    var $rows = this._getRowElements(this._fixedTableElement);\n\n    this._setRowsOpacityCore($rows, this.getFixedColumns(), columnIndex, value);\n  },\n  optionChanged: function optionChanged(args) {\n    var that = this;\n    that.callBase(args);\n\n    if (\"hoverStateEnabled\" === args.name && that._isFixedColumns) {\n      args.value ? this._attachHoverEvents() : this._detachHoverEvents();\n    }\n  },\n  getCellIndex: function getCellIndex($cell) {\n    var $fixedTable = this._fixedTableElement;\n    var columns;\n    var cellIndex = 0;\n\n    if ($fixedTable && $cell.is(\"td\") && $cell.closest($fixedTable).length) {\n      columns = this.getFixedColumns();\n      (0, _iterator.each)(columns, function (index, column) {\n        if (index === $cell[0].cellIndex) {\n          return false;\n        }\n\n        if (column.colspan) {\n          cellIndex += column.colspan;\n          return;\n        }\n\n        cellIndex++;\n      });\n      return cellIndex;\n    }\n\n    return this.callBase.apply(this, arguments);\n  },\n  _updateFixedTablePosition: function _updateFixedTablePosition(scrollTop, needFocus) {\n    if (this._fixedTableElement && this._tableElement) {\n      var $focusedElement;\n      var editorFactory = this.getController(\"editorFactory\");\n\n      this._fixedTableElement.parent().scrollTop(scrollTop);\n\n      if (needFocus) {\n        $focusedElement = editorFactory.focus();\n        $focusedElement && editorFactory.focus($focusedElement);\n      }\n    }\n  },\n  setScrollerSpacing: function setScrollerSpacing(vWidth, hWidth) {\n    var that = this;\n    var useNativeScrolling;\n    var styles = {\n      marginBottom: 0\n    };\n    var $fixedContent = that.element().children(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS));\n\n    if ($fixedContent.length && that._fixedTableElement) {\n      $fixedContent.css(styles);\n\n      that._fixedTableElement.css(styles);\n\n      styles[that.option(\"rtlEnabled\") ? \"marginLeft\" : \"marginRight\"] = vWidth;\n      styles.marginBottom = hWidth;\n      useNativeScrolling = that._scrollable && that._scrollable.option(\"useNative\");\n      (useNativeScrolling ? $fixedContent : that._fixedTableElement).css(styles);\n    }\n  },\n  _getElasticScrollTop: function _getElasticScrollTop(e) {\n    var maxScrollTop;\n    var scrollableContent;\n    var scrollableContainer;\n    var elasticScrollTop = 0;\n    var scrollbarWidth = this.getScrollbarWidth(true);\n\n    if (e.scrollOffset.top < 0) {\n      elasticScrollTop = -e.scrollOffset.top;\n    } else {\n      if (e.reachedBottom) {\n        scrollableContent = this._findContentElement();\n        scrollableContainer = e.component._container();\n        maxScrollTop = Math.max(scrollableContent.height() + scrollbarWidth - scrollableContainer.height(), 0);\n        elasticScrollTop = maxScrollTop - e.scrollOffset.top;\n      }\n    }\n\n    return elasticScrollTop;\n  },\n  _applyElasticScrolling: function _applyElasticScrolling(e) {\n    if (this._fixedTableElement) {\n      var elasticScrollTop = this._getElasticScrollTop(e);\n\n      if (0 !== Math.ceil(elasticScrollTop)) {\n        _translator2.default.move(this._fixedTableElement, {\n          top: elasticScrollTop\n        });\n      } else {\n        this._fixedTableElement.css(\"transform\", \"\");\n      }\n    }\n  },\n  _handleScroll: function _handleScroll(e) {\n    this._updateFixedTablePosition(e.scrollOffset.top, true);\n\n    this._applyElasticScrolling(e);\n\n    this.callBase(e);\n  },\n  _updateContentPosition: function _updateContentPosition(isRender) {\n    this.callBase.apply(this, arguments);\n\n    if (!isRender) {\n      this._updateFixedTablePosition(this._scrollTop);\n    }\n  },\n  _afterRowPrepared: function _afterRowPrepared(e) {\n    if (this._isFixedTableRendering) {\n      return;\n    }\n\n    this.callBase(e);\n  },\n  _scrollToElement: function _scrollToElement($element) {\n    this.callBase($element, this.getFixedColumnsOffset());\n  },\n  dispose: function dispose() {\n    this.callBase.apply(this, arguments);\n    clearTimeout(this._fixedScrollTimeout);\n  }\n});\nvar FooterViewFixedColumnsExtender = baseFixedColumns;\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      columnFixing: {\n        enabled: false,\n        texts: {\n          fix: _message2.default.format(\"dxDataGrid-columnFixingFix\"),\n          unfix: _message2.default.format(\"dxDataGrid-columnFixingUnfix\"),\n          leftPosition: _message2.default.format(\"dxDataGrid-columnFixingLeftPosition\"),\n          rightPosition: _message2.default.format(\"dxDataGrid-columnFixingRightPosition\")\n        }\n      }\n    };\n  },\n  extenders: {\n    views: {\n      columnHeadersView: ColumnHeadersViewFixedColumnsExtender,\n      rowsView: RowsViewFixedColumnsExtender,\n      footerView: FooterViewFixedColumnsExtender\n    },\n    controllers: function () {\n      var normalizeColumnIndicesByPoints = function normalizeColumnIndicesByPoints(columns, fixedColumns, pointsByColumns) {\n        var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\n        var correctIndex = columns.length - fixedColumns.length;\n        (0, _iterator.each)(pointsByColumns, function (_, point) {\n          if (point.index > transparentColumnIndex) {\n            point.columnIndex += correctIndex;\n            point.index += correctIndex;\n          }\n        });\n        return pointsByColumns;\n      };\n\n      return {\n        draggingHeader: {\n          _generatePointsByColumns: function _generatePointsByColumns(options) {\n            var pointsByColumns;\n            var visibleColumns = options.columns;\n            var targetDraggingPanel = options.targetDraggingPanel;\n\n            if (targetDraggingPanel && \"headers\" === targetDraggingPanel.getName() && targetDraggingPanel.isFixedColumns()) {\n              if (options.sourceColumn.fixed) {\n                if (!options.rowIndex) {\n                  options.columnElements = targetDraggingPanel.getFixedColumnElements(0);\n                }\n\n                options.columns = targetDraggingPanel.getFixedColumns(options.rowIndex);\n                pointsByColumns = this.callBase(options);\n                normalizeColumnIndicesByPoints(visibleColumns, options.columns, pointsByColumns);\n                return pointsByColumns;\n              }\n            }\n\n            return this.callBase(options);\n          },\n          _pointCreated: function _pointCreated(point, columns, location, sourceColumn) {\n            var result = this.callBase.apply(this, arguments);\n\n            var $transparentColumn = this._columnHeadersView.getTransparentColumnElement();\n\n            var boundingRect;\n\n            if (!result && \"headers\" === location && $transparentColumn && $transparentColumn.length) {\n              boundingRect = $transparentColumn.get(0).getBoundingClientRect();\n\n              if (sourceColumn && sourceColumn.fixed) {\n                return \"right\" === sourceColumn.fixedPosition ? point.x < boundingRect.right : point.x > boundingRect.left;\n              } else {\n                return point.x < boundingRect.left || point.x > boundingRect.right;\n              }\n            }\n\n            return result;\n          }\n        },\n        columnsResizer: {\n          _generatePointsByColumns: function _generatePointsByColumns() {\n            var that = this;\n            var columnsController = that._columnsController;\n\n            var columns = columnsController && that._columnsController.getVisibleColumns();\n\n            var fixedColumns = columnsController && that._columnsController.getFixedColumns();\n\n            var cells = that._columnHeadersView.getFixedColumnElements();\n\n            var pointsByFixedColumns = [];\n            that.callBase();\n\n            if (cells && cells.length > 0) {\n              pointsByFixedColumns = _uiGrid_core2.default.getPointsByColumns(cells, function (point) {\n                return that._pointCreated(point, cells.length, fixedColumns);\n              });\n              that._pointsByFixedColumns = normalizeColumnIndicesByPoints(columns, fixedColumns, pointsByFixedColumns);\n            }\n          },\n          _pointCreated: function _pointCreated(point, cellsLength, columns) {\n            var currentColumn;\n            var nextColumn;\n            var isWidgetResizingMode = \"widget\" === this.option(\"columnResizingMode\");\n\n            if (point.index > 0 && point.index < cellsLength) {\n              currentColumn = columns[point.columnIndex - 1] || {};\n              nextColumn = columns[point.columnIndex] || {};\n\n              if (currentColumn.fixed || nextColumn.fixed) {\n                point.columnIndex -= 1;\n                return !((currentColumn.allowResizing || currentColumn.command === COMMAND_TRANSPARENT) && (isWidgetResizingMode || nextColumn.allowResizing || nextColumn.command === COMMAND_TRANSPARENT));\n              }\n            }\n\n            return this.callBase.apply(this, arguments);\n          },\n          _getTargetPoint: function _getTargetPoint(pointsByColumns, currentX, deltaX) {\n            var $transparentColumn = this._columnHeadersView.getTransparentColumnElement();\n\n            var boundingRect;\n\n            if ($transparentColumn && $transparentColumn.length) {\n              boundingRect = $transparentColumn.get(0).getBoundingClientRect();\n\n              if (currentX <= boundingRect.left || currentX >= boundingRect.right) {\n                return this.callBase(this._pointsByFixedColumns, currentX, deltaX);\n              }\n            }\n\n            return this.callBase(pointsByColumns, currentX, deltaX);\n          }\n        }\n      };\n    }()\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.column_fixing.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_wheel","_wheel2","_message","_message2","_uiGrid_core","_uiGrid_core2","_type","_extend","_iterator","_browser","_browser2","_translator","_translator2","obj","CONTENT_CLASS","CONTENT_FIXED_CLASS","MASTER_DETAIL_CELL_CLASS","FIRST_CELL_CLASS","LAST_CELL_CLASS","HOVER_STATE_CLASS","FIXED_COL_CLASS","FIXED_COLUMNS_CLASS","POINTER_EVENTS_TARGET_CLASS","POINTER_EVENTS_NONE_CLASS","COMMAND_TRANSPARENT","GROUP_ROW_CLASS","getTransparentColumnIndex","transparentColumnIndex","column","normalizeColumnWidths","fixedColumnIndex","fixedColumns","i","widths","fixedWidths","baseFixedColumns","init","_createCol","_correctColumnIndicesForFixedColumns","transparentColspan","columnIndices","change","columnIndex","_renderTable","that","$table","options","$fixedTable","columns","_renderRow","cells","fixedCorrection","fixedCells","_createCell","columnCommand","rowType","$cell","prevFixedColumn","_wrapTableInScrollContainer","$scrollContainer","_renderCellContent","isFixedTableRendering","isGroupCell","isEmptyCell","alignByFixedColumnCellCount","row","isFixed","_getCellElementsCore","cellElements","isGroupRow","index","fixedCellElements","cell","fixedColumn","getColumnWidths","result","_getTableElement","tableElement","_setTableElement","getColumns","$tableElement","getRowIndex","getTableElements","getFixedColumns","getFixedColumnsOffset","offset","left","right","$transparentColumn","positionTransparentColumn","getTransparentColumnElement","getFixedTableElement","isFixedColumns","_resizeCore","setColumnWidths","visibleColumns","isWidthsSynchronized","optionNames","isColumnWidthChanged","useVisibleColumns","hasAutoWidth","fixed","_createColGroup","_getClientHeight","boundingClientRectElement","element","synchronizeRows","rowHeights","fixedRowHeights","heightTable","heightFixedTable","$rowElements","$fixedRowElements","$contentElement","rowIndex","rowHeight","fixedRowHeight","setScrollerSpacing","rtlEnabled","paddingLeft","paddingRight","ColumnHeadersViewFixedColumnsExtender","_getRowVisibleColumns","getContextMenuItems","columnFixingOptions","items","onItemClick","params","fixedPosition","text","beginGroup","value","disabled","getFixedColumnElements","columnElements","$transparentColumnElement","$fixedColumnElements","RowsViewFixedColumnsExtender","_detachHoverEvents","_attachHoverEvents","attachHoverEvent","event","args","isHover","_findContentElement","contentClass","scrollDelay","$content","scrollable","clearTimeout","setTimeout","scrollTop","e","y","delta","_updateScrollable","_renderContent","contentElement","_getGroupCellOptions","_renderGroupedCells","_renderGroupSummaryCells","_hasAlignByColumnSummaryItems","_renderGroupSummaryCellsCore","startColumnIndex","groupCellColSpan","alignByColumnCellCount","$groupCell","_getSummaryCellIndex","_renderCore","setRowsOpacity","$rows","optionChanged","getCellIndex","cellIndex","_updateFixedTablePosition","editorFactory","$focusedElement","styles","marginBottom","$fixedContent","useNativeScrolling","_getElasticScrollTop","elasticScrollTop","scrollbarWidth","scrollableContent","scrollableContainer","maxScrollTop","Math","_applyElasticScrolling","top","_handleScroll","_updateContentPosition","_afterRowPrepared","_scrollToElement","dispose","FooterViewFixedColumnsExtender","module","defaultOptions","columnFixing","enabled","texts","fix","unfix","leftPosition","rightPosition","extenders","views","columnHeadersView","rowsView","footerView","controllers","normalizeColumnIndicesByPoints","correctIndex","point","draggingHeader","_generatePointsByColumns","targetDraggingPanel","pointsByColumns","_pointCreated","boundingRect","sourceColumn","columnsResizer","columnsController","pointsByFixedColumns","isWidgetResizingMode","currentColumn","nextColumn","_getTargetPoint","currentX"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.column_fixing.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _wheel = require(\"../../events/core/wheel\");\r\nvar _wheel2 = _interopRequireDefault(_wheel);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _uiGrid_core = require(\"../grid_core/ui.grid_core.utils\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _translator2 = _interopRequireDefault(_translator);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar CONTENT_CLASS = \"content\";\r\nvar CONTENT_FIXED_CLASS = \"content-fixed\";\r\nvar MASTER_DETAIL_CELL_CLASS = \"dx-master-detail-cell\";\r\nvar FIRST_CELL_CLASS = \"dx-first-cell\";\r\nvar LAST_CELL_CLASS = \"dx-last-cell\";\r\nvar HOVER_STATE_CLASS = \"dx-state-hover\";\r\nvar FIXED_COL_CLASS = \"dx-col-fixed\";\r\nvar FIXED_COLUMNS_CLASS = \"dx-fixed-columns\";\r\nvar POINTER_EVENTS_TARGET_CLASS = \"dx-pointer-events-target\";\r\nvar POINTER_EVENTS_NONE_CLASS = \"dx-pointer-events-none\";\r\nvar COMMAND_TRANSPARENT = \"transparent\";\r\nvar GROUP_ROW_CLASS = \"dx-group-row\";\r\nvar getTransparentColumnIndex = function(fixedColumns) {\r\n    var transparentColumnIndex = -1;\r\n    (0, _iterator.each)(fixedColumns, function(index, column) {\r\n        if (column.command === COMMAND_TRANSPARENT) {\r\n            transparentColumnIndex = index;\r\n            return false\r\n        }\r\n    });\r\n    return transparentColumnIndex\r\n};\r\nvar normalizeColumnWidths = function(fixedColumns, widths, fixedWidths) {\r\n    var i;\r\n    var fixedColumnIndex = 0;\r\n    if (fixedColumns && widths && fixedWidths) {\r\n        for (i = 0; i < fixedColumns.length; i++) {\r\n            if (fixedColumns[i].command === COMMAND_TRANSPARENT) {\r\n                fixedColumnIndex += fixedColumns[i].colspan\r\n            } else {\r\n                if (widths[fixedColumnIndex] < fixedWidths[i]) {\r\n                    widths[fixedColumnIndex] = fixedWidths[i]\r\n                }\r\n                fixedColumnIndex++\r\n            }\r\n        }\r\n    }\r\n    return widths\r\n};\r\nvar baseFixedColumns = {\r\n    init: function() {\r\n        this.callBase();\r\n        this._isFixedTableRendering = false;\r\n        this._isFixedColumns = false\r\n    },\r\n    _createCol: function(column) {\r\n        return this.callBase(column).toggleClass(FIXED_COL_CLASS, !!(this._isFixedTableRendering && (column.fixed || column.command && column.command !== COMMAND_TRANSPARENT)))\r\n    },\r\n    _correctColumnIndicesForFixedColumns: function(fixedColumns, change) {\r\n        var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\r\n        var transparentColspan = fixedColumns[transparentColumnIndex].colspan;\r\n        var columnIndices = change && change.columnIndices;\r\n        if (columnIndices) {\r\n            change.columnIndices = columnIndices.map(function(columnIndices) {\r\n                if (columnIndices) {\r\n                    return columnIndices.map(function(columnIndex) {\r\n                        if (columnIndex < transparentColumnIndex) {\r\n                            return columnIndex\r\n                        } else {\r\n                            if (columnIndex >= transparentColumnIndex + transparentColspan) {\r\n                                return columnIndex - transparentColspan + 1\r\n                            }\r\n                        }\r\n                        return -1\r\n                    }).filter(function(columnIndex) {\r\n                        return columnIndex >= 0\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _renderTable: function(options) {\r\n        var that = this;\r\n        var $fixedTable;\r\n        var $table;\r\n        var fixedColumns = that.getFixedColumns();\r\n        that._isFixedColumns = !!fixedColumns.length;\r\n        $table = that.callBase(options);\r\n        if (that._isFixedColumns) {\r\n            that._isFixedTableRendering = true;\r\n            var change = options && options.change;\r\n            var columnIndices = change && change.columnIndices;\r\n            that._correctColumnIndicesForFixedColumns(fixedColumns, change);\r\n            $fixedTable = that._createTable(fixedColumns);\r\n            that._renderRows($fixedTable, (0, _extend.extend)({}, options, {\r\n                columns: fixedColumns\r\n            }));\r\n            that._updateContent($fixedTable, change);\r\n            if (columnIndices) {\r\n                change.columnIndices = columnIndices\r\n            }\r\n            that._isFixedTableRendering = false\r\n        } else {\r\n            that._fixedTableElement && that._fixedTableElement.parent().remove();\r\n            that._fixedTableElement = null\r\n        }\r\n        return $table\r\n    },\r\n    _renderRow: function($table, options) {\r\n        var fixedCells;\r\n        var fixedCorrection;\r\n        var cells = options.row.cells;\r\n        this.callBase.apply(this, arguments);\r\n        if (this._isFixedTableRendering && cells && cells.length) {\r\n            fixedCorrection = 0;\r\n            fixedCells = options.row.cells || [];\r\n            cells = cells.slice();\r\n            options.row.cells = cells;\r\n            for (var i = 0; i < fixedCells.length; i++) {\r\n                if (fixedCells[i].column && fixedCells[i].column.command === COMMAND_TRANSPARENT) {\r\n                    fixedCorrection = (fixedCells[i].column.colspan || 1) - 1;\r\n                    continue\r\n                }\r\n                cells[i + fixedCorrection] = fixedCells[i]\r\n            }\r\n        }\r\n    },\r\n    _createCell: function(options) {\r\n        var that = this;\r\n        var column = options.column;\r\n        var columnCommand = column && column.command;\r\n        var rowType = options.rowType;\r\n        var $cell = that.callBase.apply(that, arguments);\r\n        var fixedColumns;\r\n        var prevFixedColumn;\r\n        var transparentColumnIndex;\r\n        if (that._isFixedTableRendering || \"filter\" === rowType) {\r\n            fixedColumns = that.getFixedColumns();\r\n            transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\r\n            prevFixedColumn = fixedColumns[transparentColumnIndex - 1]\r\n        }\r\n        if (that._isFixedTableRendering) {\r\n            if (columnCommand === COMMAND_TRANSPARENT) {\r\n                $cell.addClass(POINTER_EVENTS_NONE_CLASS).toggleClass(FIRST_CELL_CLASS, 0 === transparentColumnIndex || prevFixedColumn && \"expand\" === prevFixedColumn.command).toggleClass(LAST_CELL_CLASS, fixedColumns.length && transparentColumnIndex === fixedColumns.length - 1);\r\n                if (\"freeSpace\" !== rowType) {\r\n                    _uiGrid_core2.default.setEmptyText($cell)\r\n                }\r\n            }\r\n        } else {\r\n            if (\"filter\" === rowType) {\r\n                $cell.toggleClass(FIRST_CELL_CLASS, options.columnIndex === transparentColumnIndex)\r\n            }\r\n        }\r\n        return $cell\r\n    },\r\n    _wrapTableInScrollContainer: function() {\r\n        var $scrollContainer = this.callBase.apply(this, arguments);\r\n        if (this._isFixedTableRendering) {\r\n            $scrollContainer.addClass(this.addWidgetPrefix(CONTENT_FIXED_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS)\r\n        }\r\n        return $scrollContainer\r\n    },\r\n    _renderCellContent: function($cell, options) {\r\n        var that = this;\r\n        var columns;\r\n        var isEmptyCell;\r\n        var transparentColumnIndex;\r\n        var alignByFixedColumnCellCount;\r\n        var column = options.column;\r\n        var isFixedTableRendering = that._isFixedTableRendering;\r\n        var isGroupCell = \"group\" === options.rowType && (0, _type.isDefined)(column.groupIndex);\r\n        if (isFixedTableRendering && isGroupCell && !column.command && !column.groupCellTemplate) {\r\n            $cell.css(\"pointerEvents\", \"none\")\r\n        }\r\n        if (!isFixedTableRendering && that._isFixedColumns) {\r\n            isEmptyCell = column.fixed || column.command && false !== column.fixed;\r\n            if (isGroupCell) {\r\n                isEmptyCell = false;\r\n                if (options.row.summaryCells && options.row.summaryCells.length) {\r\n                    columns = that._columnsController.getVisibleColumns();\r\n                    alignByFixedColumnCellCount = that._getAlignByColumnCellCount ? that._getAlignByColumnCellCount(column.colspan, {\r\n                        columns: columns,\r\n                        row: options.row,\r\n                        isFixed: true\r\n                    }) : 0;\r\n                    if (alignByFixedColumnCellCount > 0) {\r\n                        transparentColumnIndex = getTransparentColumnIndex(that._columnsController.getFixedColumns());\r\n                        isEmptyCell = columns.length - alignByFixedColumnCellCount < transparentColumnIndex\r\n                    }\r\n                }\r\n            }\r\n            if (isEmptyCell) {\r\n                if (that.option(\"legacyRendering\") || column.command && \"buttons\" !== column.type || \"group\" === options.rowType) {\r\n                    $cell.html(\"&nbsp;\").addClass(column.cssClass);\r\n                    return\r\n                } else {\r\n                    $cell.addClass(\"dx-hidden-cell\")\r\n                }\r\n            }\r\n        }\r\n        if (column.command !== COMMAND_TRANSPARENT) {\r\n            that.callBase($cell, options)\r\n        }\r\n    },\r\n    _getCellElementsCore: function(rowIndex) {\r\n        var that = this;\r\n        var fixedColumn;\r\n        var fixedColumns;\r\n        var fixedColumnIndex;\r\n        var fixedCellElements;\r\n        var cellElements = that.callBase(rowIndex);\r\n        var isGroupRow = cellElements.parent().hasClass(GROUP_ROW_CLASS);\r\n        var index = \"columnHeadersView\" === that.name ? rowIndex : void 0;\r\n        if (that._fixedTableElement && cellElements) {\r\n            fixedColumns = that.getFixedColumns(index);\r\n            fixedCellElements = that._getRowElements(that._fixedTableElement).eq(rowIndex).children(\"td\");\r\n            (0, _iterator.each)(fixedCellElements, function(columnIndex, cell) {\r\n                if (isGroupRow) {\r\n                    if (cellElements[columnIndex] && \"hidden\" !== cell.style.visibility) {\r\n                        cellElements[columnIndex] = cell\r\n                    }\r\n                } else {\r\n                    fixedColumn = fixedColumns[columnIndex];\r\n                    if (fixedColumn) {\r\n                        if (fixedColumn.command === COMMAND_TRANSPARENT) {\r\n                            if (fixedCellElements.eq(columnIndex).hasClass(MASTER_DETAIL_CELL_CLASS)) {\r\n                                cellElements[columnIndex] = cell || cellElements[columnIndex]\r\n                            }\r\n                        } else {\r\n                            fixedColumnIndex = that._columnsController.getVisibleIndex(fixedColumn.index, index);\r\n                            cellElements[fixedColumnIndex] = cell || cellElements[fixedColumnIndex]\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        return cellElements\r\n    },\r\n    getColumnWidths: function() {\r\n        var that = this;\r\n        var fixedWidths;\r\n        var result = that.callBase();\r\n        var fixedColumns = that.getFixedColumns();\r\n        if (that._fixedTableElement && result.length) {\r\n            fixedWidths = that.callBase(that._fixedTableElement)\r\n        }\r\n        return normalizeColumnWidths(fixedColumns, result, fixedWidths)\r\n    },\r\n    _getTableElement: function() {\r\n        var tableElement = this._isFixedTableRendering ? this._fixedTableElement : this.callBase();\r\n        return tableElement\r\n    },\r\n    _setTableElement: function(tableElement) {\r\n        if (this._isFixedTableRendering) {\r\n            this._fixedTableElement = tableElement.addClass(POINTER_EVENTS_NONE_CLASS)\r\n        } else {\r\n            this.callBase(tableElement)\r\n        }\r\n    },\r\n    getColumns: function(rowIndex, $tableElement) {\r\n        $tableElement = $tableElement || this._getTableElement();\r\n        if (this._isFixedTableRendering || $tableElement && $tableElement.closest(\"table\").parent(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS)).length) {\r\n            return this.getFixedColumns(rowIndex)\r\n        }\r\n        return this.callBase(rowIndex, $tableElement)\r\n    },\r\n    getRowIndex: function($row) {\r\n        var $fixedTable = this._fixedTableElement;\r\n        if ($fixedTable && $fixedTable.find($row).length) {\r\n            return this._getRowElements($fixedTable).index($row)\r\n        }\r\n        return this.callBase($row)\r\n    },\r\n    getTableElements: function() {\r\n        var result = this.callBase.apply(this, arguments);\r\n        if (this._fixedTableElement) {\r\n            result = (0, _renderer2.default)([result.get(0), this._fixedTableElement.get(0)])\r\n        }\r\n        return result\r\n    },\r\n    getFixedColumns: function(rowIndex) {\r\n        return this._columnsController.getFixedColumns(rowIndex)\r\n    },\r\n    getFixedColumnsOffset: function() {\r\n        var offset = {\r\n            left: 0,\r\n            right: 0\r\n        };\r\n        var $transparentColumn;\r\n        var positionTransparentColumn;\r\n        if (this._fixedTableElement) {\r\n            $transparentColumn = this.getTransparentColumnElement();\r\n            positionTransparentColumn = $transparentColumn.position();\r\n            offset = {\r\n                left: positionTransparentColumn.left,\r\n                right: this.element().outerWidth(true) - ($transparentColumn.outerWidth(true) + positionTransparentColumn.left)\r\n            }\r\n        }\r\n        return offset\r\n    },\r\n    getTransparentColumnElement: function() {\r\n        return this._fixedTableElement && this._fixedTableElement.find(\".\" + POINTER_EVENTS_NONE_CLASS).first()\r\n    },\r\n    getFixedTableElement: function() {\r\n        return this._fixedTableElement\r\n    },\r\n    isFixedColumns: function() {\r\n        return this._isFixedColumns\r\n    },\r\n    _resizeCore: function() {\r\n        this.callBase();\r\n        this.synchronizeRows()\r\n    },\r\n    setColumnWidths: function(options) {\r\n        var columns;\r\n        var visibleColumns = this._columnsController.getVisibleColumns();\r\n        var widths = options.widths;\r\n        var isWidthsSynchronized = widths && widths.length && (0, _type.isDefined)(visibleColumns[0].visibleWidth);\r\n        var optionNames = options.optionNames;\r\n        var isColumnWidthChanged = optionNames && optionNames.width;\r\n        var useVisibleColumns = false;\r\n        this.callBase.apply(this, arguments);\r\n        if (this._fixedTableElement) {\r\n            if (this.option(\"legacyRendering\")) {\r\n                useVisibleColumns = widths && widths.length && !this.isScrollbarVisible(true)\r\n            } else {\r\n                var hasAutoWidth = widths && widths.some(function(width) {\r\n                    return \"auto\" === width\r\n                });\r\n                useVisibleColumns = hasAutoWidth && (!isWidthsSynchronized || !this.isScrollbarVisible(true))\r\n            }\r\n            if (useVisibleColumns) {\r\n                columns = visibleColumns\r\n            }\r\n            this.callBase((0, _extend.extend)({}, options, {\r\n                $tableElement: this._fixedTableElement,\r\n                columns: columns,\r\n                fixed: true\r\n            }))\r\n        }\r\n        if (isWidthsSynchronized || isColumnWidthChanged && this.option(\"wordWrapEnabled\")) {\r\n            this.synchronizeRows()\r\n        }\r\n    },\r\n    _createColGroup: function(columns) {\r\n        if (!this.option(\"legacyRendering\") && this._isFixedTableRendering && !this.option(\"columnAutoWidth\")) {\r\n            var visibleColumns = this._columnsController.getVisibleColumns();\r\n            var useVisibleColumns = visibleColumns.filter(function(column) {\r\n                return !column.width\r\n            }).length;\r\n            if (useVisibleColumns) {\r\n                columns = visibleColumns\r\n            }\r\n        }\r\n        return this.callBase(columns)\r\n    },\r\n    _getClientHeight: function(element) {\r\n        var boundingClientRectElement = element.getBoundingClientRect && element.getBoundingClientRect();\r\n        return boundingClientRectElement && boundingClientRectElement.height ? boundingClientRectElement.height : element.clientHeight\r\n    },\r\n    synchronizeRows: function() {\r\n        var that = this;\r\n        var rowHeight;\r\n        var fixedRowHeight;\r\n        var rowHeights = [];\r\n        var fixedRowHeights = [];\r\n        var rowIndex;\r\n        var heightTable;\r\n        var heightFixedTable;\r\n        var $rowElements;\r\n        var $fixedRowElements;\r\n        var $contentElement;\r\n        if (that._isFixedColumns && that._tableElement && that._fixedTableElement) {\r\n            heightTable = that._getClientHeight(that._tableElement.get(0));\r\n            heightFixedTable = that._getClientHeight(that._fixedTableElement.get(0));\r\n            $rowElements = that._getRowElements(that._tableElement);\r\n            $fixedRowElements = that._getRowElements(that._fixedTableElement);\r\n            $contentElement = that._findContentElement();\r\n            if (heightTable !== heightFixedTable) {\r\n                $contentElement && $contentElement.css(\"height\", heightTable);\r\n                $rowElements.css(\"height\", \"\");\r\n                $fixedRowElements.css(\"height\", \"\");\r\n                for (rowIndex = 0; rowIndex < $rowElements.length; rowIndex++) {\r\n                    rowHeights.push(that._getClientHeight($rowElements.get(rowIndex)));\r\n                    fixedRowHeights.push(that._getClientHeight($fixedRowElements.get(rowIndex)))\r\n                }\r\n                for (rowIndex = 0; rowIndex < $rowElements.length; rowIndex++) {\r\n                    rowHeight = rowHeights[rowIndex];\r\n                    fixedRowHeight = fixedRowHeights[rowIndex];\r\n                    if (rowHeight > fixedRowHeight) {\r\n                        $fixedRowElements.eq(rowIndex).css(\"height\", rowHeight)\r\n                    } else {\r\n                        if (rowHeight < fixedRowHeight) {\r\n                            $rowElements.eq(rowIndex).css(\"height\", fixedRowHeight)\r\n                        }\r\n                    }\r\n                }\r\n                $contentElement && $contentElement.css(\"height\", \"\")\r\n            }\r\n        }\r\n    },\r\n    setScrollerSpacing: function(width) {\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        this.callBase(width);\r\n        this.element().children(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS)).css({\r\n            paddingLeft: rtlEnabled ? width : \"\",\r\n            paddingRight: !rtlEnabled ? width : \"\"\r\n        })\r\n    }\r\n};\r\nvar ColumnHeadersViewFixedColumnsExtender = (0, _extend.extend)({}, baseFixedColumns, {\r\n    _getRowVisibleColumns: function(rowIndex) {\r\n        if (this._isFixedTableRendering) {\r\n            return this.getFixedColumns(rowIndex)\r\n        }\r\n        return this.callBase(rowIndex)\r\n    },\r\n    getContextMenuItems: function(options) {\r\n        var that = this;\r\n        var column = options.column;\r\n        var onItemClick;\r\n        var columnFixingOptions = that.option(\"columnFixing\");\r\n        var items = that.callBase(options);\r\n        if (options.row && \"header\" === options.row.rowType) {\r\n            if (column && column.allowFixing) {\r\n                onItemClick = function(params) {\r\n                    switch (params.itemData.value) {\r\n                        case \"none\":\r\n                            that._columnsController.columnOption(column.index, \"fixed\", false);\r\n                            break;\r\n                        case \"left\":\r\n                            that._columnsController.columnOption(column.index, {\r\n                                fixed: true,\r\n                                fixedPosition: \"left\"\r\n                            });\r\n                            break;\r\n                        case \"right\":\r\n                            that._columnsController.columnOption(column.index, {\r\n                                fixed: true,\r\n                                fixedPosition: \"right\"\r\n                            })\r\n                    }\r\n                };\r\n                items = items || [];\r\n                items.push({\r\n                    text: columnFixingOptions.texts.fix,\r\n                    beginGroup: true,\r\n                    items: [{\r\n                        text: columnFixingOptions.texts.leftPosition,\r\n                        value: \"left\",\r\n                        disabled: column.fixed && (!column.fixedPosition || \"left\" === column.fixedPosition),\r\n                        onItemClick: onItemClick\r\n                    }, {\r\n                        text: columnFixingOptions.texts.rightPosition,\r\n                        value: \"right\",\r\n                        disabled: column.fixed && \"right\" === column.fixedPosition,\r\n                        onItemClick: onItemClick\r\n                    }]\r\n                }, {\r\n                    text: columnFixingOptions.texts.unfix,\r\n                    value: \"none\",\r\n                    disabled: !column.fixed,\r\n                    onItemClick: onItemClick\r\n                })\r\n            }\r\n        }\r\n        return items\r\n    },\r\n    getFixedColumnElements: function(rowIndex) {\r\n        var that = this;\r\n        var columnElements;\r\n        var transparentColumnIndex;\r\n        var $transparentColumnElement;\r\n        if ((0, _type.isDefined)(rowIndex)) {\r\n            return this._fixedTableElement && this._getRowElements(this._fixedTableElement).eq(rowIndex).children()\r\n        }\r\n        columnElements = that.getColumnElements();\r\n        $transparentColumnElement = that.getTransparentColumnElement();\r\n        if (columnElements && $transparentColumnElement && $transparentColumnElement.length) {\r\n            transparentColumnIndex = getTransparentColumnIndex(that.getFixedColumns());\r\n            columnElements.splice(transparentColumnIndex, $transparentColumnElement.get(0).colSpan, $transparentColumnElement.get(0))\r\n        }\r\n        return columnElements\r\n    },\r\n    getColumnWidths: function() {\r\n        var that = this;\r\n        var fixedWidths;\r\n        var result = that.callBase();\r\n        var $fixedColumnElements = that.getFixedColumnElements();\r\n        var fixedColumns = that.getFixedColumns();\r\n        if (that._fixedTableElement) {\r\n            if ($fixedColumnElements && $fixedColumnElements.length) {\r\n                fixedWidths = that._getWidths($fixedColumnElements)\r\n            } else {\r\n                fixedWidths = that.callBase(that._fixedTableElement)\r\n            }\r\n        }\r\n        return normalizeColumnWidths(fixedColumns, result, fixedWidths)\r\n    }\r\n});\r\nvar RowsViewFixedColumnsExtender = (0, _extend.extend)({}, baseFixedColumns, {\r\n    _detachHoverEvents: function() {\r\n        this._fixedTableElement && _events_engine2.default.off(this._fixedTableElement, \"mouseover mouseout\", \".dx-data-row\");\r\n        this._tableElement && _events_engine2.default.off(this._tableElement, \"mouseover mouseout\", \".dx-data-row\")\r\n    },\r\n    _attachHoverEvents: function() {\r\n        var that = this;\r\n        var attachHoverEvent = function($table) {\r\n            _events_engine2.default.on($table, \"mouseover mouseout\", \".dx-data-row\", that.createAction(function(args) {\r\n                var event = args.event;\r\n                var rowIndex = that.getRowIndex((0, _renderer2.default)(event.target).closest(\".dx-row\"));\r\n                var isHover = \"mouseover\" === event.type;\r\n                if (rowIndex >= 0) {\r\n                    that._tableElement && that._getRowElements(that._tableElement).eq(rowIndex).toggleClass(HOVER_STATE_CLASS, isHover);\r\n                    that._fixedTableElement && that._getRowElements(that._fixedTableElement).eq(rowIndex).toggleClass(HOVER_STATE_CLASS, isHover)\r\n                }\r\n            }))\r\n        };\r\n        if (that._fixedTableElement && that._tableElement) {\r\n            attachHoverEvent(that._fixedTableElement);\r\n            attachHoverEvent(that._tableElement)\r\n        }\r\n    },\r\n    _findContentElement: function() {\r\n        var that = this;\r\n        var $content;\r\n        var scrollable;\r\n        var scrollTop;\r\n        var contentClass = that.addWidgetPrefix(CONTENT_CLASS);\r\n        var element = that.element();\r\n        var scrollDelay = _browser2.default.mozilla ? 60 : 0;\r\n        if (element && that._isFixedTableRendering) {\r\n            $content = element.children(\".\" + contentClass);\r\n            scrollable = that.getScrollable();\r\n            if (!$content.length && scrollable) {\r\n                $content = (0, _renderer2.default)(\"<div>\").addClass(contentClass);\r\n                _events_engine2.default.on($content, \"scroll\", function(e) {\r\n                    clearTimeout(that._fixedScrollTimeout);\r\n                    that._fixedScrollTimeout = setTimeout(function() {\r\n                        scrollTop = (0, _renderer2.default)(e.target).scrollTop();\r\n                        scrollable.scrollTo({\r\n                            y: scrollTop\r\n                        })\r\n                    }, scrollDelay)\r\n                });\r\n                _events_engine2.default.on($content, _wheel2.default.name, function(e) {\r\n                    if (scrollable) {\r\n                        scrollTop = scrollable.scrollTop();\r\n                        scrollable.scrollTo({\r\n                            y: scrollTop - e.delta\r\n                        });\r\n                        if (scrollable.scrollTop() > 0 && scrollable.scrollTop() + scrollable.clientHeight() < scrollable.scrollHeight() + that.getScrollbarWidth()) {\r\n                            return false\r\n                        }\r\n                    }\r\n                });\r\n                $content.appendTo(element)\r\n            }\r\n            return $content\r\n        }\r\n        return that.callBase()\r\n    },\r\n    _updateScrollable: function() {\r\n        this.callBase();\r\n        var scrollable = this.getScrollable();\r\n        var scrollTop = scrollable && scrollable.scrollOffset().top;\r\n        this._updateFixedTablePosition(scrollTop)\r\n    },\r\n    _renderContent: function(contentElement, tableElement) {\r\n        if (this._isFixedTableRendering) {\r\n            return contentElement.empty().addClass(this.addWidgetPrefix(CONTENT_CLASS) + \" \" + this.addWidgetPrefix(CONTENT_FIXED_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS).append(tableElement)\r\n        }\r\n        return this.callBase(contentElement, tableElement)\r\n    },\r\n    _getGroupCellOptions: function(options) {\r\n        if (this._isFixedTableRendering) {\r\n            return this.callBase((0, _extend.extend)({}, options, {\r\n                columns: this._columnsController.getVisibleColumns()\r\n            }))\r\n        }\r\n        return this.callBase(options)\r\n    },\r\n    _renderGroupedCells: function($row, options) {\r\n        return this.callBase($row, (0, _extend.extend)({}, options, {\r\n            columns: this._columnsController.getVisibleColumns()\r\n        }))\r\n    },\r\n    _renderGroupSummaryCells: function($row, options) {\r\n        if (this._isFixedTableRendering) {\r\n            this.callBase($row, (0, _extend.extend)({}, options, {\r\n                columns: this._columnsController.getVisibleColumns()\r\n            }))\r\n        } else {\r\n            this.callBase($row, options)\r\n        }\r\n    },\r\n    _hasAlignByColumnSummaryItems: function(columnIndex, options) {\r\n        var result = this.callBase.apply(this, arguments);\r\n        var column = options.columns[columnIndex];\r\n        if (options.isFixed) {\r\n            return column.fixed && (result || \"right\" === column.fixedPosition)\r\n        }\r\n        return result && !column.fixed\r\n    },\r\n    _renderGroupSummaryCellsCore: function($groupCell, options, groupCellColSpan, alignByColumnCellCount) {\r\n        var startColumnIndex;\r\n        var transparentColumnIndex;\r\n        var alignByFixedColumnCellCount;\r\n        if (this._isFixedTableRendering) {\r\n            options.isFixed = true;\r\n            alignByFixedColumnCellCount = this._getAlignByColumnCellCount(groupCellColSpan, options);\r\n            options.isFixed = false;\r\n            startColumnIndex = options.columns.length - alignByFixedColumnCellCount;\r\n            options = (0, _extend.extend)({}, options, {\r\n                columns: this.getFixedColumns()\r\n            });\r\n            transparentColumnIndex = getTransparentColumnIndex(options.columns);\r\n            if (startColumnIndex < transparentColumnIndex) {\r\n                alignByFixedColumnCellCount -= options.columns[transparentColumnIndex].colspan - 1 || 0;\r\n                groupCellColSpan -= options.columns[transparentColumnIndex].colspan - 1 || 0\r\n            } else {\r\n                if (alignByColumnCellCount > 0) {\r\n                    $groupCell.css(\"visibility\", \"hidden\")\r\n                }\r\n            }\r\n            alignByColumnCellCount = alignByFixedColumnCellCount\r\n        }\r\n        this.callBase($groupCell, options, groupCellColSpan, alignByColumnCellCount)\r\n    },\r\n    _getSummaryCellIndex: function(columnIndex, columns) {\r\n        var transparentColumnIndex;\r\n        if (this._isFixedTableRendering) {\r\n            transparentColumnIndex = getTransparentColumnIndex(columns);\r\n            if (columnIndex > transparentColumnIndex) {\r\n                columnIndex += columns[transparentColumnIndex].colspan - 1\r\n            }\r\n            return columnIndex\r\n        }\r\n        return this.callBase.apply(this, arguments)\r\n    },\r\n    _renderCore: function(change) {\r\n        this._detachHoverEvents();\r\n        this.callBase(change);\r\n        var isFixedColumns = this._isFixedColumns;\r\n        this.element().toggleClass(FIXED_COLUMNS_CLASS, isFixedColumns);\r\n        if (this.option(\"hoverStateEnabled\") && isFixedColumns) {\r\n            this._attachHoverEvents()\r\n        }\r\n    },\r\n    setRowsOpacity: function(columnIndex, value) {\r\n        this.callBase(columnIndex, value);\r\n        var $rows = this._getRowElements(this._fixedTableElement);\r\n        this._setRowsOpacityCore($rows, this.getFixedColumns(), columnIndex, value)\r\n    },\r\n    optionChanged: function(args) {\r\n        var that = this;\r\n        that.callBase(args);\r\n        if (\"hoverStateEnabled\" === args.name && that._isFixedColumns) {\r\n            args.value ? this._attachHoverEvents() : this._detachHoverEvents()\r\n        }\r\n    },\r\n    getCellIndex: function($cell) {\r\n        var $fixedTable = this._fixedTableElement;\r\n        var columns;\r\n        var cellIndex = 0;\r\n        if ($fixedTable && $cell.is(\"td\") && $cell.closest($fixedTable).length) {\r\n            columns = this.getFixedColumns();\r\n            (0, _iterator.each)(columns, function(index, column) {\r\n                if (index === $cell[0].cellIndex) {\r\n                    return false\r\n                }\r\n                if (column.colspan) {\r\n                    cellIndex += column.colspan;\r\n                    return\r\n                }\r\n                cellIndex++\r\n            });\r\n            return cellIndex\r\n        }\r\n        return this.callBase.apply(this, arguments)\r\n    },\r\n    _updateFixedTablePosition: function(scrollTop, needFocus) {\r\n        if (this._fixedTableElement && this._tableElement) {\r\n            var $focusedElement;\r\n            var editorFactory = this.getController(\"editorFactory\");\r\n            this._fixedTableElement.parent().scrollTop(scrollTop);\r\n            if (needFocus) {\r\n                $focusedElement = editorFactory.focus();\r\n                $focusedElement && editorFactory.focus($focusedElement)\r\n            }\r\n        }\r\n    },\r\n    setScrollerSpacing: function(vWidth, hWidth) {\r\n        var that = this;\r\n        var useNativeScrolling;\r\n        var styles = {\r\n            marginBottom: 0\r\n        };\r\n        var $fixedContent = that.element().children(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS));\r\n        if ($fixedContent.length && that._fixedTableElement) {\r\n            $fixedContent.css(styles);\r\n            that._fixedTableElement.css(styles);\r\n            styles[that.option(\"rtlEnabled\") ? \"marginLeft\" : \"marginRight\"] = vWidth;\r\n            styles.marginBottom = hWidth;\r\n            useNativeScrolling = that._scrollable && that._scrollable.option(\"useNative\");\r\n            (useNativeScrolling ? $fixedContent : that._fixedTableElement).css(styles)\r\n        }\r\n    },\r\n    _getElasticScrollTop: function(e) {\r\n        var maxScrollTop;\r\n        var scrollableContent;\r\n        var scrollableContainer;\r\n        var elasticScrollTop = 0;\r\n        var scrollbarWidth = this.getScrollbarWidth(true);\r\n        if (e.scrollOffset.top < 0) {\r\n            elasticScrollTop = -e.scrollOffset.top\r\n        } else {\r\n            if (e.reachedBottom) {\r\n                scrollableContent = this._findContentElement();\r\n                scrollableContainer = e.component._container();\r\n                maxScrollTop = Math.max(scrollableContent.height() + scrollbarWidth - scrollableContainer.height(), 0);\r\n                elasticScrollTop = maxScrollTop - e.scrollOffset.top\r\n            }\r\n        }\r\n        return elasticScrollTop\r\n    },\r\n    _applyElasticScrolling: function(e) {\r\n        if (this._fixedTableElement) {\r\n            var elasticScrollTop = this._getElasticScrollTop(e);\r\n            if (0 !== Math.ceil(elasticScrollTop)) {\r\n                _translator2.default.move(this._fixedTableElement, {\r\n                    top: elasticScrollTop\r\n                })\r\n            } else {\r\n                this._fixedTableElement.css(\"transform\", \"\")\r\n            }\r\n        }\r\n    },\r\n    _handleScroll: function(e) {\r\n        this._updateFixedTablePosition(e.scrollOffset.top, true);\r\n        this._applyElasticScrolling(e);\r\n        this.callBase(e)\r\n    },\r\n    _updateContentPosition: function(isRender) {\r\n        this.callBase.apply(this, arguments);\r\n        if (!isRender) {\r\n            this._updateFixedTablePosition(this._scrollTop)\r\n        }\r\n    },\r\n    _afterRowPrepared: function(e) {\r\n        if (this._isFixedTableRendering) {\r\n            return\r\n        }\r\n        this.callBase(e)\r\n    },\r\n    _scrollToElement: function($element) {\r\n        this.callBase($element, this.getFixedColumnsOffset())\r\n    },\r\n    dispose: function() {\r\n        this.callBase.apply(this, arguments);\r\n        clearTimeout(this._fixedScrollTimeout)\r\n    }\r\n});\r\nvar FooterViewFixedColumnsExtender = baseFixedColumns;\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            columnFixing: {\r\n                enabled: false,\r\n                texts: {\r\n                    fix: _message2.default.format(\"dxDataGrid-columnFixingFix\"),\r\n                    unfix: _message2.default.format(\"dxDataGrid-columnFixingUnfix\"),\r\n                    leftPosition: _message2.default.format(\"dxDataGrid-columnFixingLeftPosition\"),\r\n                    rightPosition: _message2.default.format(\"dxDataGrid-columnFixingRightPosition\")\r\n                }\r\n            }\r\n        }\r\n    },\r\n    extenders: {\r\n        views: {\r\n            columnHeadersView: ColumnHeadersViewFixedColumnsExtender,\r\n            rowsView: RowsViewFixedColumnsExtender,\r\n            footerView: FooterViewFixedColumnsExtender\r\n        },\r\n        controllers: function() {\r\n            var normalizeColumnIndicesByPoints = function(columns, fixedColumns, pointsByColumns) {\r\n                var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\r\n                var correctIndex = columns.length - fixedColumns.length;\r\n                (0, _iterator.each)(pointsByColumns, function(_, point) {\r\n                    if (point.index > transparentColumnIndex) {\r\n                        point.columnIndex += correctIndex;\r\n                        point.index += correctIndex\r\n                    }\r\n                });\r\n                return pointsByColumns\r\n            };\r\n            return {\r\n                draggingHeader: {\r\n                    _generatePointsByColumns: function(options) {\r\n                        var pointsByColumns;\r\n                        var visibleColumns = options.columns;\r\n                        var targetDraggingPanel = options.targetDraggingPanel;\r\n                        if (targetDraggingPanel && \"headers\" === targetDraggingPanel.getName() && targetDraggingPanel.isFixedColumns()) {\r\n                            if (options.sourceColumn.fixed) {\r\n                                if (!options.rowIndex) {\r\n                                    options.columnElements = targetDraggingPanel.getFixedColumnElements(0)\r\n                                }\r\n                                options.columns = targetDraggingPanel.getFixedColumns(options.rowIndex);\r\n                                pointsByColumns = this.callBase(options);\r\n                                normalizeColumnIndicesByPoints(visibleColumns, options.columns, pointsByColumns);\r\n                                return pointsByColumns\r\n                            }\r\n                        }\r\n                        return this.callBase(options)\r\n                    },\r\n                    _pointCreated: function(point, columns, location, sourceColumn) {\r\n                        var result = this.callBase.apply(this, arguments);\r\n                        var $transparentColumn = this._columnHeadersView.getTransparentColumnElement();\r\n                        var boundingRect;\r\n                        if (!result && \"headers\" === location && $transparentColumn && $transparentColumn.length) {\r\n                            boundingRect = $transparentColumn.get(0).getBoundingClientRect();\r\n                            if (sourceColumn && sourceColumn.fixed) {\r\n                                return \"right\" === sourceColumn.fixedPosition ? point.x < boundingRect.right : point.x > boundingRect.left\r\n                            } else {\r\n                                return point.x < boundingRect.left || point.x > boundingRect.right\r\n                            }\r\n                        }\r\n                        return result\r\n                    }\r\n                },\r\n                columnsResizer: {\r\n                    _generatePointsByColumns: function() {\r\n                        var that = this;\r\n                        var columnsController = that._columnsController;\r\n                        var columns = columnsController && that._columnsController.getVisibleColumns();\r\n                        var fixedColumns = columnsController && that._columnsController.getFixedColumns();\r\n                        var cells = that._columnHeadersView.getFixedColumnElements();\r\n                        var pointsByFixedColumns = [];\r\n                        that.callBase();\r\n                        if (cells && cells.length > 0) {\r\n                            pointsByFixedColumns = _uiGrid_core2.default.getPointsByColumns(cells, function(point) {\r\n                                return that._pointCreated(point, cells.length, fixedColumns)\r\n                            });\r\n                            that._pointsByFixedColumns = normalizeColumnIndicesByPoints(columns, fixedColumns, pointsByFixedColumns)\r\n                        }\r\n                    },\r\n                    _pointCreated: function(point, cellsLength, columns) {\r\n                        var currentColumn;\r\n                        var nextColumn;\r\n                        var isWidgetResizingMode = \"widget\" === this.option(\"columnResizingMode\");\r\n                        if (point.index > 0 && point.index < cellsLength) {\r\n                            currentColumn = columns[point.columnIndex - 1] || {};\r\n                            nextColumn = columns[point.columnIndex] || {};\r\n                            if (currentColumn.fixed || nextColumn.fixed) {\r\n                                point.columnIndex -= 1;\r\n                                return !((currentColumn.allowResizing || currentColumn.command === COMMAND_TRANSPARENT) && (isWidgetResizingMode || nextColumn.allowResizing || nextColumn.command === COMMAND_TRANSPARENT))\r\n                            }\r\n                        }\r\n                        return this.callBase.apply(this, arguments)\r\n                    },\r\n                    _getTargetPoint: function(pointsByColumns, currentX, deltaX) {\r\n                        var $transparentColumn = this._columnHeadersView.getTransparentColumnElement();\r\n                        var boundingRect;\r\n                        if ($transparentColumn && $transparentColumn.length) {\r\n                            boundingRect = $transparentColumn.get(0).getBoundingClientRect();\r\n                            if (currentX <= boundingRect.left || currentX >= boundingRect.right) {\r\n                                return this.callBase(this._pointsByFixedColumns, currentX, deltaX)\r\n                            }\r\n                        }\r\n                        return this.callBase(pointsByColumns, currentX, deltaX)\r\n                    }\r\n                }\r\n            }\r\n        }()\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}