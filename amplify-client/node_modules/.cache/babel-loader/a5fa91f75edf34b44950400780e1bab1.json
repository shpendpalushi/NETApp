{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.utils.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _filtering = require(\"../shared/filtering\");\n\nvar _string = require(\"../../core/utils/string\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _load_panel = require(\"../load_panel\");\n\nvar _load_panel2 = _interopRequireDefault(_load_panel);\n\nvar _utils = require(\"../../data/utils\");\n\nvar _format_helper = require(\"../../format_helper\");\n\nvar _format_helper2 = _interopRequireDefault(_format_helper);\n\nvar _object = require(\"../../core/utils/object\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DATAGRID_SELECTION_DISABLED_CLASS = \"dx-selection-disabled\";\nvar DATAGRID_GROUP_OPENED_CLASS = \"dx-datagrid-group-opened\";\nvar DATAGRID_GROUP_CLOSED_CLASS = \"dx-datagrid-group-closed\";\nvar DATAGRID_EXPAND_CLASS = \"dx-datagrid-expand\";\nvar NO_DATA_CLASS = \"nodata\";\nvar DATE_INTERVAL_SELECTORS = {\n  year: function year(value) {\n    return value && value.getFullYear();\n  },\n  month: function month(value) {\n    return value && value.getMonth() + 1;\n  },\n  day: function day(value) {\n    return value && value.getDate();\n  },\n  quarter: function quarter(value) {\n    return value && Math.floor(value.getMonth() / 3) + 1;\n  },\n  hour: function hour(value) {\n    return value && value.getHours();\n  },\n  minute: function minute(value) {\n    return value && value.getMinutes();\n  },\n  second: function second(value) {\n    return value && value.getSeconds();\n  }\n};\n\nmodule.exports = function () {\n  var getIntervalSelector = function getIntervalSelector() {\n    var groupInterval;\n    var data = arguments[1];\n    var nameIntervalSelector;\n    var value = this.calculateCellValue(data);\n\n    if (!(0, _type.isDefined)(value)) {\n      return null;\n    } else {\n      if (isDateType(this.dataType)) {\n        nameIntervalSelector = arguments[0];\n        return DATE_INTERVAL_SELECTORS[nameIntervalSelector](value);\n      } else {\n        if (\"number\" === this.dataType) {\n          groupInterval = arguments[0];\n          return Math.floor(Number(value) / groupInterval) * groupInterval;\n        }\n      }\n    }\n  };\n\n  var equalSelectors = function equalSelectors(selector1, selector2) {\n    if ((0, _type.isFunction)(selector1) && (0, _type.isFunction)(selector2)) {\n      if (selector1.originalCallback && selector2.originalCallback) {\n        return selector1.originalCallback === selector2.originalCallback && selector1.columnIndex === selector2.columnIndex;\n      }\n    }\n\n    return selector1 === selector2;\n  };\n\n  var isDateType = function isDateType(dataType) {\n    return \"date\" === dataType || \"datetime\" === dataType;\n  };\n\n  var setEmptyText = function setEmptyText($container) {\n    $container.get(0).textContent = \"\\xa0\";\n  };\n\n  var getWidgetInstance = function getWidgetInstance($element) {\n    var editorData = $element.data && $element.data();\n    var dxComponents = editorData && editorData.dxComponents;\n    var widgetName = dxComponents && dxComponents[0];\n    return widgetName && editorData[widgetName];\n  };\n\n  return {\n    renderNoDataText: function renderNoDataText($element) {\n      var that = this;\n      $element = $element || this.element();\n\n      if (!$element) {\n        return;\n      }\n\n      var noDataClass = that.addWidgetPrefix(NO_DATA_CLASS);\n      var noDataElement = $element.find(\".\" + noDataClass).last();\n\n      var isVisible = this._dataController.isEmpty();\n\n      var isLoading = this._dataController.isLoading();\n\n      if (!noDataElement.length) {\n        noDataElement = (0, _renderer2.default)(\"<span>\").addClass(noDataClass).appendTo($element);\n      }\n\n      if (isVisible && !isLoading) {\n        noDataElement.removeClass(\"dx-hidden\").text(that._getNoDataText());\n      } else {\n        noDataElement.addClass(\"dx-hidden\");\n      }\n    },\n    renderLoadPanel: function renderLoadPanel($element, $container, isLocalStore) {\n      var that = this;\n      var loadPanelOptions;\n      that._loadPanel && that._loadPanel.$element().remove();\n      loadPanelOptions = that.option(\"loadPanel\");\n\n      if (loadPanelOptions && (\"auto\" === loadPanelOptions.enabled ? !isLocalStore : loadPanelOptions.enabled)) {\n        loadPanelOptions = (0, _extend.extend)({\n          shading: false,\n          message: loadPanelOptions.text,\n          position: function position() {\n            var $window = (0, _renderer2.default)((0, _window.getWindow)());\n\n            if ($element.height() > $window.height()) {\n              return {\n                of: $window,\n                boundary: $element,\n                collision: \"fit\"\n              };\n            }\n\n            return {\n              of: $element\n            };\n          },\n          container: $container\n        }, loadPanelOptions);\n        that._loadPanel = that._createComponent((0, _renderer2.default)(\"<div>\").appendTo($container), _load_panel2.default, loadPanelOptions);\n      } else {\n        that._loadPanel = null;\n      }\n    },\n    getIndexByKey: function getIndexByKey(key, items, keyName) {\n      var index = -1;\n      var item;\n\n      if (void 0 !== key && Array.isArray(items)) {\n        keyName = arguments.length <= 2 ? \"key\" : keyName;\n\n        for (var i = 0; i < items.length; i++) {\n          item = (0, _type.isDefined)(keyName) ? items[i][keyName] : items[i];\n\n          if ((0, _common.equalByValue)(key, item)) {\n            index = i;\n            break;\n          }\n        }\n      }\n\n      return index;\n    },\n    combineFilters: function combineFilters(filters, operation) {\n      var resultFilter = [];\n      var i;\n      operation = operation || \"and\";\n\n      for (i = 0; i < filters.length; i++) {\n        if (!filters[i]) {\n          continue;\n        }\n\n        if (resultFilter.length) {\n          resultFilter.push(operation);\n        }\n\n        resultFilter.push(filters[i]);\n      }\n\n      if (1 === resultFilter.length) {\n        resultFilter = resultFilter[0];\n      }\n\n      if (resultFilter.length) {\n        return resultFilter;\n      }\n    },\n    checkChanges: function checkChanges(changes, changeNames) {\n      var changesWithChangeNamesCount = 0;\n      var i;\n\n      for (i = 0; i < changeNames.length; i++) {\n        if (changes[changeNames[i]]) {\n          changesWithChangeNamesCount++;\n        }\n      }\n\n      return changes.length && changes.length === changesWithChangeNamesCount;\n    },\n    equalFilterParameters: function equalFilterParameters(filter1, filter2) {\n      var i;\n\n      if (Array.isArray(filter1) && Array.isArray(filter2)) {\n        if (filter1.length !== filter2.length) {\n          return false;\n        } else {\n          for (i = 0; i < filter1.length; i++) {\n            if (!module.exports.equalFilterParameters(filter1[i], filter2[i])) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      } else {\n        if ((0, _type.isFunction)(filter1) && filter1.columnIndex >= 0 && (0, _type.isFunction)(filter2) && filter2.columnIndex >= 0) {\n          return filter1.columnIndex === filter2.columnIndex && (0, _data.toComparable)(filter1.filterValue) === (0, _data.toComparable)(filter2.filterValue);\n        } else {\n          return (0, _data.toComparable)(filter1) == (0, _data.toComparable)(filter2);\n        }\n      }\n    },\n    proxyMethod: function proxyMethod(instance, methodName, defaultResult) {\n      if (!instance[methodName]) {\n        instance[methodName] = function () {\n          var dataSource = this._dataSource;\n          return dataSource ? dataSource[methodName].apply(dataSource, arguments) : defaultResult;\n        };\n      }\n    },\n    formatValue: function formatValue(value, options) {\n      var valueText = _format_helper2.default.format(value, options.format) || value && value.toString() || \"\";\n      var formatObject = {\n        value: value,\n        valueText: options.getDisplayFormat ? options.getDisplayFormat(valueText) : valueText,\n        target: options.target || \"row\",\n        groupInterval: options.groupInterval\n      };\n      return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText;\n    },\n    getFormatOptionsByColumn: function getFormatOptionsByColumn(column, target) {\n      return {\n        format: column.format,\n        getDisplayFormat: column.getDisplayFormat,\n        customizeText: column.customizeText,\n        target: target,\n        trueText: column.trueText,\n        falseText: column.falseText\n      };\n    },\n    getDisplayValue: function getDisplayValue(column, value, data, rowType) {\n      if (column.displayValueMap && void 0 !== column.displayValueMap[value]) {\n        return column.displayValueMap[value];\n      } else {\n        if (column.calculateDisplayValue && data && \"group\" !== rowType) {\n          return column.calculateDisplayValue(data);\n        } else {\n          if (column.lookup && !(\"group\" === rowType && (column.calculateGroupValue || column.calculateDisplayValue))) {\n            return column.lookup.calculateCellValue(value);\n          }\n        }\n      }\n\n      return value;\n    },\n    getGroupRowSummaryText: function getGroupRowSummaryText(summaryItems, summaryTexts) {\n      var result = \"(\";\n      var i;\n      var summaryItem;\n\n      for (i = 0; i < summaryItems.length; i++) {\n        summaryItem = summaryItems[i];\n        result += (i > 0 ? \", \" : \"\") + module.exports.getSummaryText(summaryItem, summaryTexts);\n      }\n\n      return result += \")\";\n    },\n    getSummaryText: function getSummaryText(summaryItem, summaryTexts) {\n      var displayFormat = summaryItem.displayFormat || summaryItem.columnCaption && summaryTexts[summaryItem.summaryType + \"OtherColumn\"] || summaryTexts[summaryItem.summaryType];\n      return this.formatValue(summaryItem.value, {\n        format: summaryItem.valueFormat,\n        getDisplayFormat: function getDisplayFormat(valueText) {\n          return displayFormat ? (0, _string.format)(displayFormat, valueText, summaryItem.columnCaption) : valueText;\n        },\n        customizeText: summaryItem.customizeText\n      });\n    },\n    normalizeSortingInfo: function normalizeSortingInfo(sort) {\n      sort = sort || [];\n      var result;\n      var i;\n      result = (0, _utils.normalizeSortingInfo)(sort);\n\n      for (i = 0; i < sort.length; i++) {\n        if (sort && sort[i] && void 0 !== sort[i].isExpanded) {\n          result[i].isExpanded = sort[i].isExpanded;\n        }\n\n        if (sort && sort[i] && void 0 !== sort[i].groupInterval) {\n          result[i].groupInterval = sort[i].groupInterval;\n        }\n      }\n\n      return result;\n    },\n    getFormatByDataType: function getFormatByDataType(dataType) {\n      switch (dataType) {\n        case \"date\":\n          return \"shortDate\";\n\n        case \"datetime\":\n          return \"shortDateShortTime\";\n      }\n    },\n    getHeaderFilterGroupParameters: function getHeaderFilterGroupParameters(column, remoteGrouping) {\n      var result = [];\n      var dataField = column.dataField || column.name;\n      var groupInterval = (0, _filtering.getGroupInterval)(column);\n\n      if (groupInterval) {\n        (0, _iterator.each)(groupInterval, function (index, interval) {\n          result.push(remoteGrouping ? {\n            selector: dataField,\n            groupInterval: interval,\n            isExpanded: index < groupInterval.length - 1\n          } : getIntervalSelector.bind(column, interval));\n        });\n        return result;\n      }\n\n      if (remoteGrouping) {\n        result = [{\n          selector: dataField,\n          isExpanded: false\n        }];\n      } else {\n        result = function result(data) {\n          var result = column.calculateCellValue(data);\n\n          if (void 0 === result || \"\" === result) {\n            result = null;\n          }\n\n          return result;\n        };\n\n        if (column.sortingMethod) {\n          result = [{\n            selector: result,\n            compare: column.sortingMethod.bind(column)\n          }];\n        }\n      }\n\n      return result;\n    },\n    equalSortParameters: function equalSortParameters(sortParameters1, sortParameters2, ignoreIsExpanded) {\n      var i;\n      sortParameters1 = module.exports.normalizeSortingInfo(sortParameters1);\n      sortParameters2 = module.exports.normalizeSortingInfo(sortParameters2);\n\n      if (Array.isArray(sortParameters1) && Array.isArray(sortParameters2)) {\n        if (sortParameters1.length !== sortParameters2.length) {\n          return false;\n        } else {\n          for (i = 0; i < sortParameters1.length; i++) {\n            if (!equalSelectors(sortParameters1[i].selector, sortParameters2[i].selector) || sortParameters1[i].desc !== sortParameters2[i].desc || sortParameters1[i].groupInterval !== sortParameters2[i].groupInterval || !ignoreIsExpanded && Boolean(sortParameters1[i].isExpanded) !== Boolean(sortParameters2[i].isExpanded)) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      } else {\n        return (!sortParameters1 || !sortParameters1.length) === (!sortParameters2 || !sortParameters2.length);\n      }\n    },\n    getPointsByColumns: function getPointsByColumns(items, pointCreated, isVertical, startColumnIndex) {\n      var cellsLength = items.length;\n      var notCreatePoint = false;\n      var point;\n      var i;\n      var item;\n      var offset;\n      var columnIndex = startColumnIndex || 0;\n      var prevItemOffset;\n      var result = [];\n      var rtlEnabled;\n\n      for (i = 0; i <= cellsLength; i++) {\n        if (i < cellsLength) {\n          item = items.eq(i);\n          offset = item.offset();\n          rtlEnabled = \"rtl\" === item.css(\"direction\");\n        }\n\n        point = {\n          index: columnIndex,\n          x: offset ? offset.left + (!isVertical && rtlEnabled ^ i === cellsLength ? item[0].getBoundingClientRect().width : 0) : 0,\n          y: offset ? offset.top + (isVertical && i === cellsLength ? item[0].getBoundingClientRect().height : 0) : 0,\n          columnIndex: columnIndex\n        };\n\n        if (!isVertical && i > 0) {\n          prevItemOffset = items.eq(i - 1).offset();\n\n          if (prevItemOffset.top < point.y) {\n            point.y = prevItemOffset.top;\n          }\n        }\n\n        if (pointCreated) {\n          notCreatePoint = pointCreated(point);\n        }\n\n        if (!notCreatePoint) {\n          result.push(point);\n        }\n\n        columnIndex++;\n      }\n\n      return result;\n    },\n    createObjectWithChanges: function createObjectWithChanges(target, changes) {\n      var result = target ? Object.create(Object.getPrototypeOf(target)) : {};\n      var targetWithoutPrototype = (0, _extend.extendFromObject)({}, target);\n      (0, _object.deepExtendArraySafe)(result, targetWithoutPrototype, true, true);\n      return (0, _object.deepExtendArraySafe)(result, changes, true, true);\n    },\n    getExpandCellTemplate: function getExpandCellTemplate() {\n      return {\n        allowRenderToDetachedContainer: true,\n        render: function render(container, options) {\n          var rowsView;\n          var $container = (0, _renderer2.default)(container);\n\n          if ((0, _type.isDefined)(options.value) && !(options.data && options.data.isContinuation) && !options.row.isNewRow) {\n            rowsView = options.component.getView(\"rowsView\");\n            $container.addClass(DATAGRID_EXPAND_CLASS).addClass(DATAGRID_SELECTION_DISABLED_CLASS);\n            (0, _renderer2.default)(\"<div>\").addClass(options.value ? DATAGRID_GROUP_OPENED_CLASS : DATAGRID_GROUP_CLOSED_CLASS).appendTo($container);\n            rowsView.setAria(\"label\", options.value ? rowsView.localize(\"dxDataGrid-ariaCollapse\") : rowsView.localize(\"dxDataGrid-ariaExpand\"), $container);\n          } else {\n            setEmptyText($container);\n          }\n        }\n      };\n    },\n    setEmptyText: setEmptyText,\n    isDateType: isDateType,\n    getSelectionRange: function getSelectionRange(focusedElement) {\n      try {\n        if (focusedElement) {\n          return {\n            selectionStart: focusedElement.selectionStart,\n            selectionEnd: focusedElement.selectionEnd\n          };\n        }\n      } catch (e) {}\n\n      return {};\n    },\n    setSelectionRange: function setSelectionRange(focusedElement, selectionRange) {\n      try {\n        if (focusedElement && focusedElement.setSelectionRange) {\n          focusedElement.setSelectionRange(selectionRange.selectionStart, selectionRange.selectionEnd);\n        }\n      } catch (e) {}\n    },\n    focusAndSelectElement: function focusAndSelectElement(component, $element) {\n      _events_engine2.default.trigger($element, \"focus\");\n\n      var isSelectTextOnEditingStart = component.option(\"editing.selectTextOnEditStart\");\n      var keyboardController = component.getController(\"keyboardNavigation\");\n\n      var isEditingNavigationMode = keyboardController && keyboardController._isFastEditingStarted();\n\n      if (isSelectTextOnEditingStart && !isEditingNavigationMode && $element.is(\".dx-texteditor-input\")) {\n        var editor = getWidgetInstance($element.closest(\".dx-texteditor\"));\n        (0, _deferred.when)(editor && editor._loadItemDeferred).done(function () {\n          $element.get(0).select();\n        });\n      }\n    },\n    getWidgetInstance: getWidgetInstance,\n    getLastResizableColumnIndex: function getLastResizableColumnIndex(columns, resultWidths) {\n      var hasResizableColumns = columns.some(function (column) {\n        return column && !column.command && !column.fixed && false !== column.allowResizing;\n      });\n\n      for (var lastColumnIndex = columns.length - 1; columns[lastColumnIndex]; lastColumnIndex--) {\n        var column = columns[lastColumnIndex];\n        var width = resultWidths && resultWidths[lastColumnIndex];\n        var allowResizing = !hasResizableColumns || false !== column.allowResizing;\n\n        if (!column.command && !column.fixed && \"adaptiveHidden\" !== width && allowResizing) {\n          break;\n        }\n      }\n\n      return lastColumnIndex;\n    },\n    isElementInCurrentGrid: function isElementInCurrentGrid(controller, $element) {\n      if ($element && $element.length) {\n        var $grid = $element.closest(\".\" + controller.getWidgetContainerClass()).parent();\n        return $grid.is(controller.component.$element());\n      }\n\n      return false;\n    }\n  };\n}();","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.utils.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_type","_deferred","_filtering","_string","_iterator","_extend","_data","_common","_load_panel","_load_panel2","_utils","_format_helper","_format_helper2","_object","_window","_events_engine","_events_engine2","obj","DATAGRID_SELECTION_DISABLED_CLASS","DATAGRID_GROUP_OPENED_CLASS","DATAGRID_GROUP_CLOSED_CLASS","DATAGRID_EXPAND_CLASS","NO_DATA_CLASS","DATE_INTERVAL_SELECTORS","year","value","month","day","quarter","Math","hour","minute","second","module","getIntervalSelector","data","arguments","isDateType","nameIntervalSelector","groupInterval","Number","equalSelectors","selector1","selector2","setEmptyText","$container","getWidgetInstance","editorData","$element","dxComponents","widgetName","renderNoDataText","that","noDataClass","noDataElement","isVisible","isLoading","renderLoadPanel","loadPanelOptions","shading","message","position","$window","of","boundary","collision","container","getIndexByKey","index","Array","keyName","i","items","item","combineFilters","resultFilter","operation","filters","checkChanges","changesWithChangeNamesCount","changeNames","changes","equalFilterParameters","filter1","filter2","proxyMethod","instance","dataSource","formatValue","valueText","options","formatObject","target","getFormatOptionsByColumn","format","column","getDisplayFormat","customizeText","trueText","falseText","getDisplayValue","getGroupRowSummaryText","result","summaryItems","summaryItem","getSummaryText","displayFormat","summaryTexts","normalizeSortingInfo","sort","getFormatByDataType","getHeaderFilterGroupParameters","dataField","remoteGrouping","selector","isExpanded","compare","equalSortParameters","sortParameters1","sortParameters2","Boolean","getPointsByColumns","cellsLength","notCreatePoint","columnIndex","startColumnIndex","offset","rtlEnabled","point","x","y","isVertical","prevItemOffset","pointCreated","createObjectWithChanges","Object","targetWithoutPrototype","getExpandCellTemplate","allowRenderToDetachedContainer","render","rowsView","getSelectionRange","selectionStart","focusedElement","selectionEnd","setSelectionRange","selectionRange","focusAndSelectElement","isSelectTextOnEditingStart","component","keyboardController","isEditingNavigationMode","editor","getLastResizableColumnIndex","hasResizableColumns","lastColumnIndex","columns","width","resultWidths","allowResizing","isElementInCurrentGrid","$grid","controller"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,SAAS,GAAGC,OAAO,CAAvB,qBAAuB,CAAvB;;AACA,IAAIC,UAAU,GAAGC,sBAAsB,CAAvC,SAAuC,CAAvC;;AACA,IAAIC,KAAK,GAAGH,OAAO,CAAnB,uBAAmB,CAAnB;;AACA,IAAII,SAAS,GAAGJ,OAAO,CAAvB,2BAAuB,CAAvB;;AACA,IAAIK,UAAU,GAAGL,OAAO,CAAxB,qBAAwB,CAAxB;;AACA,IAAIM,OAAO,GAAGN,OAAO,CAArB,yBAAqB,CAArB;;AACA,IAAIO,SAAS,GAAGP,OAAO,CAAvB,2BAAuB,CAAvB;;AACA,IAAIQ,OAAO,GAAGR,OAAO,CAArB,yBAAqB,CAArB;;AACA,IAAIS,KAAK,GAAGT,OAAO,CAAnB,uBAAmB,CAAnB;;AACA,IAAIU,OAAO,GAAGV,OAAO,CAArB,yBAAqB,CAArB;;AACA,IAAIW,WAAW,GAAGX,OAAO,CAAzB,eAAyB,CAAzB;;AACA,IAAIY,YAAY,GAAGV,sBAAsB,CAAzC,WAAyC,CAAzC;;AACA,IAAIW,MAAM,GAAGb,OAAO,CAApB,kBAAoB,CAApB;;AACA,IAAIc,cAAc,GAAGd,OAAO,CAA5B,qBAA4B,CAA5B;;AACA,IAAIe,eAAe,GAAGb,sBAAsB,CAA5C,cAA4C,CAA5C;;AACA,IAAIc,OAAO,GAAGhB,OAAO,CAArB,yBAAqB,CAArB;;AACA,IAAIiB,OAAO,GAAGjB,OAAO,CAArB,yBAAqB,CAArB;;AACA,IAAIkB,cAAc,GAAGlB,OAAO,CAA5B,iCAA4B,CAA5B;;AACA,IAAImB,eAAe,GAAGjB,sBAAsB,CAA5C,cAA4C,CAA5C;;AAEA,SAAA,sBAAA,CAAA,GAAA,EAAqC;AACjC,SAAOkB,GAAG,IAAIA,GAAG,CAAVA,UAAAA,GAAAA,GAAAA,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AACD,IAAIC,iCAAiC,GAArC,uBAAA;AACA,IAAIC,2BAA2B,GAA/B,0BAAA;AACA,IAAIC,2BAA2B,GAA/B,0BAAA;AACA,IAAIC,qBAAqB,GAAzB,oBAAA;AACA,IAAIC,aAAa,GAAjB,QAAA;AACA,IAAIC,uBAAuB,GAAG;AAC1BC,EAAAA,IAAI,EAAE,SAAA,IAAA,CAAA,KAAA,EAAgB;AAClB,WAAOC,KAAK,IAAIA,KAAK,CAArB,WAAgBA,EAAhB;AAFsB,GAAA;AAI1BC,EAAAA,KAAK,EAAE,SAAA,KAAA,CAAA,KAAA,EAAgB;AACnB,WAAOD,KAAK,IAAIA,KAAK,CAALA,QAAAA,KAAhB,CAAA;AALsB,GAAA;AAO1BE,EAAAA,GAAG,EAAE,SAAA,GAAA,CAAA,KAAA,EAAgB;AACjB,WAAOF,KAAK,IAAIA,KAAK,CAArB,OAAgBA,EAAhB;AARsB,GAAA;AAU1BG,EAAAA,OAAO,EAAE,SAAA,OAAA,CAAA,KAAA,EAAgB;AACrB,WAAOH,KAAK,IAAII,IAAI,CAAJA,KAAAA,CAAWJ,KAAK,CAALA,QAAAA,KAAXI,CAAAA,IAAhB,CAAA;AAXsB,GAAA;AAa1BC,EAAAA,IAAI,EAAE,SAAA,IAAA,CAAA,KAAA,EAAgB;AAClB,WAAOL,KAAK,IAAIA,KAAK,CAArB,QAAgBA,EAAhB;AAdsB,GAAA;AAgB1BM,EAAAA,MAAM,EAAE,SAAA,MAAA,CAAA,KAAA,EAAgB;AACpB,WAAON,KAAK,IAAIA,KAAK,CAArB,UAAgBA,EAAhB;AAjBsB,GAAA;AAmB1BO,EAAAA,MAAM,EAAE,SAAA,MAAA,CAAA,KAAA,EAAgB;AACpB,WAAOP,KAAK,IAAIA,KAAK,CAArB,UAAgBA,EAAhB;AACH;AArByB,CAA9B;;AAuBAQ,MAAM,CAANA,OAAAA,GAAiB,YAAW;AACxB,MAAIC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAW;AACjC,QAAA,aAAA;AACA,QAAIC,IAAI,GAAGC,SAAS,CAApB,CAAoB,CAApB;AACA,QAAA,oBAAA;AACA,QAAIX,KAAK,GAAG,KAAA,kBAAA,CAAZ,IAAY,CAAZ;;AACA,QAAI,CAAC,CAAC,GAAGzB,KAAK,CAAT,SAAA,EAAL,KAAK,CAAL,EAAkC;AAC9B,aAAA,IAAA;AADJ,KAAA,MAEO;AACH,UAAIqC,UAAU,CAAC,KAAf,QAAc,CAAd,EAA+B;AAC3BC,QAAAA,oBAAoB,GAAGF,SAAS,CAAhCE,CAAgC,CAAhCA;AACA,eAAOf,uBAAuB,CAAvBA,oBAAuB,CAAvBA,CAAP,KAAOA,CAAP;AAFJ,OAAA,MAGO;AACH,YAAI,aAAa,KAAjB,QAAA,EAAgC;AAC5BgB,UAAAA,aAAa,GAAGH,SAAS,CAAzBG,CAAyB,CAAzBA;AACA,iBAAOV,IAAI,CAAJA,KAAAA,CAAWW,MAAM,CAANA,KAAM,CAANA,GAAXX,aAAAA,IAAP,aAAA;AACH;AACJ;AACJ;AAjBL,GAAA;;AAmBA,MAAIY,cAAc,GAAG,SAAjBA,cAAiB,CAAA,SAAA,EAAA,SAAA,EAA+B;AAChD,QAAI,CAAC,GAAGzC,KAAK,CAAT,UAAA,EAAA,SAAA,KAAoC,CAAC,GAAGA,KAAK,CAAT,UAAA,EAAxC,SAAwC,CAAxC,EAA0E;AACtE,UAAI0C,SAAS,CAATA,gBAAAA,IAA8BC,SAAS,CAA3C,gBAAA,EAA8D;AAC1D,eAAOD,SAAS,CAATA,gBAAAA,KAA+BC,SAAS,CAAxCD,gBAAAA,IAA6DA,SAAS,CAATA,WAAAA,KAA0BC,SAAS,CAAvG,WAAA;AACH;AACJ;;AACD,WAAOD,SAAS,KAAhB,SAAA;AANJ,GAAA;;AAQA,MAAIL,UAAU,GAAG,SAAbA,UAAa,CAAA,QAAA,EAAmB;AAChC,WAAO,WAAA,QAAA,IAAuB,eAA9B,QAAA;AADJ,GAAA;;AAGA,MAAIO,YAAY,GAAG,SAAfA,YAAe,CAAA,UAAA,EAAqB;AACpCC,IAAAA,UAAU,CAAVA,GAAAA,CAAAA,CAAAA,EAAAA,WAAAA,GAAAA,MAAAA;AADJ,GAAA;;AAGA,MAAIC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,QAAA,EAAmB;AACvC,QAAIC,UAAU,GAAGC,QAAQ,CAARA,IAAAA,IAAiBA,QAAQ,CAA1C,IAAkCA,EAAlC;AACA,QAAIC,YAAY,GAAGF,UAAU,IAAIA,UAAU,CAA3C,YAAA;AACA,QAAIG,UAAU,GAAGD,YAAY,IAAIA,YAAY,CAA7C,CAA6C,CAA7C;AACA,WAAOC,UAAU,IAAIH,UAAU,CAA/B,UAA+B,CAA/B;AAJJ,GAAA;;AAMA,SAAO;AACHI,IAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,QAAA,EAAmB;AACjC,UAAIC,IAAI,GAAR,IAAA;AACAJ,MAAAA,QAAQ,GAAGA,QAAQ,IAAI,KAAvBA,OAAuB,EAAvBA;;AACA,UAAI,CAAJ,QAAA,EAAe;AACX;AACH;;AACD,UAAIK,WAAW,GAAGD,IAAI,CAAJA,eAAAA,CAAlB,aAAkBA,CAAlB;AACA,UAAIE,aAAa,GAAGN,QAAQ,CAARA,IAAAA,CAAc,MAAdA,WAAAA,EAApB,IAAoBA,EAApB;;AACA,UAAIO,SAAS,GAAG,KAAA,eAAA,CAAhB,OAAgB,EAAhB;;AACA,UAAIC,SAAS,GAAG,KAAA,eAAA,CAAhB,SAAgB,EAAhB;;AACA,UAAI,CAACF,aAAa,CAAlB,MAAA,EAA2B;AACvBA,QAAAA,aAAa,GAAG,CAAC,GAAGxD,UAAU,CAAd,OAAA,EAAA,QAAA,EAAA,QAAA,CAAA,WAAA,EAAA,QAAA,CAAhBwD,QAAgB,CAAhBA;AACH;;AACD,UAAIC,SAAS,IAAI,CAAjB,SAAA,EAA6B;AACzBD,QAAAA,aAAa,CAAbA,WAAAA,CAAAA,WAAAA,EAAAA,IAAAA,CAA4CF,IAAI,CAAhDE,cAA4CF,EAA5CE;AADJ,OAAA,MAEO;AACHA,QAAAA,aAAa,CAAbA,QAAAA,CAAAA,WAAAA;AACH;AAlBF,KAAA;AAoBHG,IAAAA,eAAe,EAAE,SAAA,eAAA,CAAA,QAAA,EAAA,UAAA,EAAA,YAAA,EAA6C;AAC1D,UAAIL,IAAI,GAAR,IAAA;AACA,UAAA,gBAAA;AACAA,MAAAA,IAAI,CAAJA,UAAAA,IAAmBA,IAAI,CAAJA,UAAAA,CAAAA,QAAAA,GAAnBA,MAAmBA,EAAnBA;AACAM,MAAAA,gBAAgB,GAAGN,IAAI,CAAJA,MAAAA,CAAnBM,WAAmBN,CAAnBM;;AACA,UAAIA,gBAAgB,KAAK,WAAWA,gBAAgB,CAA3B,OAAA,GAAsC,CAAtC,YAAA,GAAsDA,gBAAgB,CAA/F,OAAoB,CAApB,EAA0G;AACtGA,QAAAA,gBAAgB,GAAG,CAAC,GAAGrD,OAAO,CAAX,MAAA,EAAoB;AACnCsD,UAAAA,OAAO,EAD4B,KAAA;AAEnCC,UAAAA,OAAO,EAAEF,gBAAgB,CAFU,IAAA;AAGnCG,UAAAA,QAAQ,EAAE,SAAA,QAAA,GAAW;AACjB,gBAAIC,OAAO,GAAG,CAAC,GAAGhE,UAAU,CAAd,OAAA,EAAwB,CAAC,GAAGgB,OAAO,CAAjD,SAAsC,GAAxB,CAAd;;AACA,gBAAIkC,QAAQ,CAARA,MAAAA,KAAoBc,OAAO,CAA/B,MAAwBA,EAAxB,EAA0C;AACtC,qBAAO;AACHC,gBAAAA,EAAE,EADC,OAAA;AAEHC,gBAAAA,QAAQ,EAFL,QAAA;AAGHC,gBAAAA,SAAS,EAAE;AAHR,eAAP;AAKH;;AACD,mBAAO;AACHF,cAAAA,EAAE,EAAEf;AADD,aAAP;AAZ+B,WAAA;AAgBnCkB,UAAAA,SAAS,EAAErB;AAhBwB,SAApB,EAAnBa,gBAAmB,CAAnBA;AAkBAN,QAAAA,IAAI,CAAJA,UAAAA,GAAkBA,IAAI,CAAJA,gBAAAA,CAAsB,CAAC,GAAGtD,UAAU,CAAd,OAAA,EAAA,OAAA,EAAA,QAAA,CAAtBsD,UAAsB,CAAtBA,EAA6E3C,YAAY,CAAzF2C,OAAAA,EAAlBA,gBAAkBA,CAAlBA;AAnBJ,OAAA,MAoBO;AACHA,QAAAA,IAAI,CAAJA,UAAAA,GAAAA,IAAAA;AACH;AA/CF,KAAA;AAiDHe,IAAAA,aAAa,EAAE,SAAA,aAAA,CAAA,GAAA,EAAA,KAAA,EAAA,OAAA,EAA8B;AACzC,UAAIC,KAAK,GAAG,CAAZ,CAAA;AACA,UAAA,IAAA;;AACA,UAAI,KAAA,CAAA,KAAA,GAAA,IAAkBC,KAAK,CAALA,OAAAA,CAAtB,KAAsBA,CAAtB,EAA4C;AACxCC,QAAAA,OAAO,GAAGlC,SAAS,CAATA,MAAAA,IAAAA,CAAAA,GAAAA,KAAAA,GAAVkC,OAAAA;;AACA,aAAK,IAAIC,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAGC,KAAK,CAAzB,MAAA,EAAkCD,CAAlC,EAAA,EAAuC;AACnCE,UAAAA,IAAI,GAAG,CAAC,GAAGzE,KAAK,CAAT,SAAA,EAAA,OAAA,IAAgCwE,KAAK,CAALA,CAAK,CAALA,CAAhC,OAAgCA,CAAhC,GAAoDA,KAAK,CAAhEC,CAAgE,CAAhEA;;AACA,cAAI,CAAC,GAAGlE,OAAO,CAAX,YAAA,EAAA,GAAA,EAAJ,IAAI,CAAJ,EAA0C;AACtC6D,YAAAA,KAAK,GAALA,CAAAA;AACA;AACH;AACJ;AACJ;;AACD,aAAA,KAAA;AA9DD,KAAA;AAgEHM,IAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,OAAA,EAAA,SAAA,EAA6B;AACzC,UAAIC,YAAY,GAAhB,EAAA;AACA,UAAA,CAAA;AACAC,MAAAA,SAAS,GAAGA,SAAS,IAArBA,KAAAA;;AACA,WAAKL,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAGM,OAAO,CAAvB,MAAA,EAAgCN,CAAhC,EAAA,EAAqC;AACjC,YAAI,CAACM,OAAO,CAAZ,CAAY,CAAZ,EAAiB;AACb;AACH;;AACD,YAAIF,YAAY,CAAhB,MAAA,EAAyB;AACrBA,UAAAA,YAAY,CAAZA,IAAAA,CAAAA,SAAAA;AACH;;AACDA,QAAAA,YAAY,CAAZA,IAAAA,CAAkBE,OAAO,CAAzBF,CAAyB,CAAzBA;AACH;;AACD,UAAI,MAAMA,YAAY,CAAtB,MAAA,EAA+B;AAC3BA,QAAAA,YAAY,GAAGA,YAAY,CAA3BA,CAA2B,CAA3BA;AACH;;AACD,UAAIA,YAAY,CAAhB,MAAA,EAAyB;AACrB,eAAA,YAAA;AACH;AAlFF,KAAA;AAoFHG,IAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,OAAA,EAAA,WAAA,EAA+B;AACzC,UAAIC,2BAA2B,GAA/B,CAAA;AACA,UAAA,CAAA;;AACA,WAAKR,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAGS,WAAW,CAA3B,MAAA,EAAoCT,CAApC,EAAA,EAAyC;AACrC,YAAIU,OAAO,CAACD,WAAW,CAAvB,CAAuB,CAAZ,CAAX,EAA6B;AACzBD,UAAAA,2BAA2B;AAC9B;AACJ;;AACD,aAAOE,OAAO,CAAPA,MAAAA,IAAkBA,OAAO,CAAPA,MAAAA,KAAzB,2BAAA;AA5FD,KAAA;AA8FHC,IAAAA,qBAAqB,EAAE,SAAA,qBAAA,CAAA,OAAA,EAAA,OAAA,EAA2B;AAC9C,UAAA,CAAA;;AACA,UAAIb,KAAK,CAALA,OAAAA,CAAAA,OAAAA,KAA0BA,KAAK,CAALA,OAAAA,CAA9B,OAA8BA,CAA9B,EAAsD;AAClD,YAAIc,OAAO,CAAPA,MAAAA,KAAmBC,OAAO,CAA9B,MAAA,EAAuC;AACnC,iBAAA,KAAA;AADJ,SAAA,MAEO;AACH,eAAKb,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAGY,OAAO,CAAvB,MAAA,EAAgCZ,CAAhC,EAAA,EAAqC;AACjC,gBAAI,CAACtC,MAAM,CAANA,OAAAA,CAAAA,qBAAAA,CAAqCkD,OAAO,CAA5ClD,CAA4C,CAA5CA,EAAiDmD,OAAO,CAA7D,CAA6D,CAAxDnD,CAAL,EAAmE;AAC/D,qBAAA,KAAA;AACH;AACJ;AACJ;;AACD,eAAA,IAAA;AAVJ,OAAA,MAWO;AACH,YAAI,CAAC,GAAGjC,KAAK,CAAT,UAAA,EAAA,OAAA,KAAkCmF,OAAO,CAAPA,WAAAA,IAAlC,CAAA,IAA8D,CAAC,GAAGnF,KAAK,CAAT,UAAA,EAA9D,OAA8D,CAA9D,IAAgGoF,OAAO,CAAPA,WAAAA,IAApG,CAAA,EAA8H;AAC1H,iBAAOD,OAAO,CAAPA,WAAAA,KAAwBC,OAAO,CAA/BD,WAAAA,IAA+C,CAAC,GAAG7E,KAAK,CAAT,YAAA,EAAwB6E,OAAO,CAA/B,WAAA,MAAiD,CAAC,GAAG7E,KAAK,CAAT,YAAA,EAAwB8E,OAAO,CAAtI,WAAuG,CAAvG;AADJ,SAAA,MAEO;AACH,iBAAO,CAAC,GAAG9E,KAAK,CAAT,YAAA,EAAA,OAAA,KAAoC,CAAC,GAAGA,KAAK,CAAT,YAAA,EAA3C,OAA2C,CAA3C;AACH;AACJ;AAjHF,KAAA;AAmHH+E,IAAAA,WAAW,EAAE,SAAA,WAAA,CAAA,QAAA,EAAA,UAAA,EAAA,aAAA,EAA8C;AACvD,UAAI,CAACC,QAAQ,CAAb,UAAa,CAAb,EAA2B;AACvBA,QAAAA,QAAQ,CAARA,UAAQ,CAARA,GAAuB,YAAW;AAC9B,cAAIC,UAAU,GAAG,KAAjB,WAAA;AACA,iBAAOA,UAAU,GAAGA,UAAU,CAAVA,UAAU,CAAVA,CAAAA,KAAAA,CAAAA,UAAAA,EAAH,SAAGA,CAAH,GAAjB,aAAA;AAFJD,SAAAA;AAIH;AAzHF,KAAA;AA2HHE,IAAAA,WAAW,EAAE,SAAA,WAAA,CAAA,KAAA,EAAA,OAAA,EAAyB;AAClC,UAAIC,SAAS,GAAG7E,eAAe,CAAfA,OAAAA,CAAAA,MAAAA,CAAAA,KAAAA,EAAsC8E,OAAO,CAA7C9E,MAAAA,KAAyDa,KAAK,IAAIA,KAAK,CAAvEb,QAAkEa,EAAlEb,IAAhB,EAAA;AACA,UAAI+E,YAAY,GAAG;AACflE,QAAAA,KAAK,EADU,KAAA;AAEfgE,QAAAA,SAAS,EAAEC,OAAO,CAAPA,gBAAAA,GAA2BA,OAAO,CAAPA,gBAAAA,CAA3BA,SAA2BA,CAA3BA,GAFI,SAAA;AAGfE,QAAAA,MAAM,EAAEF,OAAO,CAAPA,MAAAA,IAHO,KAAA;AAIfnD,QAAAA,aAAa,EAAEmD,OAAO,CAACnD;AAJR,OAAnB;AAMA,aAAOmD,OAAO,CAAPA,aAAAA,GAAwBA,OAAO,CAAPA,aAAAA,CAAAA,IAAAA,CAAAA,OAAAA,EAAxBA,YAAwBA,CAAxBA,GAA4EC,YAAY,CAA/F,SAAA;AAnID,KAAA;AAqIHE,IAAAA,wBAAwB,EAAE,SAAA,wBAAA,CAAA,MAAA,EAAA,MAAA,EAAyB;AAC/C,aAAO;AACHC,QAAAA,MAAM,EAAEC,MAAM,CADX,MAAA;AAEHC,QAAAA,gBAAgB,EAAED,MAAM,CAFrB,gBAAA;AAGHE,QAAAA,aAAa,EAAEF,MAAM,CAHlB,aAAA;AAIHH,QAAAA,MAAM,EAJH,MAAA;AAKHM,QAAAA,QAAQ,EAAEH,MAAM,CALb,QAAA;AAMHI,QAAAA,SAAS,EAAEJ,MAAM,CAACI;AANf,OAAP;AAtID,KAAA;AA+IHC,IAAAA,eAAe,EAAE,SAAA,eAAA,CAAA,MAAA,EAAA,KAAA,EAAA,IAAA,EAAA,OAAA,EAAuC;AACpD,UAAIL,MAAM,CAANA,eAAAA,IAA0B,KAAA,CAAA,KAAWA,MAAM,CAANA,eAAAA,CAAzC,KAAyCA,CAAzC,EAAwE;AACpE,eAAOA,MAAM,CAANA,eAAAA,CAAP,KAAOA,CAAP;AADJ,OAAA,MAEO;AACH,YAAIA,MAAM,CAANA,qBAAAA,IAAAA,IAAAA,IAAwC,YAA5C,OAAA,EAAiE;AAC7D,iBAAOA,MAAM,CAANA,qBAAAA,CAAP,IAAOA,CAAP;AADJ,SAAA,MAEO;AACH,cAAIA,MAAM,CAANA,MAAAA,IAAiB,EAAE,YAAA,OAAA,KAAwBA,MAAM,CAANA,mBAAAA,IAA8BA,MAAM,CAAnF,qBAAuB,CAAF,CAArB,EAA6G;AACzG,mBAAOA,MAAM,CAANA,MAAAA,CAAAA,kBAAAA,CAAP,KAAOA,CAAP;AACH;AACJ;AACJ;;AACD,aAAA,KAAA;AA3JD,KAAA;AA6JHM,IAAAA,sBAAsB,EAAE,SAAA,sBAAA,CAAA,YAAA,EAAA,YAAA,EAAqC;AACzD,UAAIC,MAAM,GAAV,GAAA;AACA,UAAA,CAAA;AACA,UAAA,WAAA;;AACA,WAAK/B,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAGgC,YAAY,CAA5B,MAAA,EAAqChC,CAArC,EAAA,EAA0C;AACtCiC,QAAAA,WAAW,GAAGD,YAAY,CAA1BC,CAA0B,CAA1BA;AACAF,QAAAA,MAAM,IAAI,CAAC/B,CAAC,GAADA,CAAAA,GAAAA,IAAAA,GAAD,EAAA,IAAsBtC,MAAM,CAANA,OAAAA,CAAAA,cAAAA,CAAAA,WAAAA,EAAhCqE,YAAgCrE,CAAhCqE;AACH;;AACD,aAAOA,MAAM,IAAb,GAAA;AArKD,KAAA;AAuKHG,IAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,WAAA,EAAA,YAAA,EAAoC;AAChD,UAAIC,aAAa,GAAGF,WAAW,CAAXA,aAAAA,IAA6BA,WAAW,CAAXA,aAAAA,IAA6BG,YAAY,CAACH,WAAW,CAAXA,WAAAA,GAAvEA,aAAsE,CAAtEA,IAAmHG,YAAY,CAACH,WAAW,CAA/J,WAAmJ,CAAnJ;AACA,aAAO,KAAA,WAAA,CAAiBA,WAAW,CAA5B,KAAA,EAAoC;AACvCV,QAAAA,MAAM,EAAEU,WAAW,CADoB,WAAA;AAEvCR,QAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,SAAA,EAAoB;AAClC,iBAAOU,aAAa,GAAG,CAAC,GAAGvG,OAAO,CAAX,MAAA,EAAA,aAAA,EAAA,SAAA,EAA8CqG,WAAW,CAA5D,aAAG,CAAH,GAApB,SAAA;AAHmC,SAAA;AAKvCP,QAAAA,aAAa,EAAEO,WAAW,CAACP;AALY,OAApC,CAAP;AAzKD,KAAA;AAiLHW,IAAAA,oBAAoB,EAAE,SAAA,oBAAA,CAAA,IAAA,EAAe;AACjCC,MAAAA,IAAI,GAAGA,IAAI,IAAXA,EAAAA;AACA,UAAA,MAAA;AACA,UAAA,CAAA;AACAP,MAAAA,MAAM,GAAG,CAAC,GAAG5F,MAAM,CAAV,oBAAA,EAAT4F,IAAS,CAATA;;AACA,WAAK/B,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAGsC,IAAI,CAApB,MAAA,EAA6BtC,CAA7B,EAAA,EAAkC;AAC9B,YAAIsC,IAAI,IAAIA,IAAI,CAAZA,CAAY,CAAZA,IAAmB,KAAA,CAAA,KAAWA,IAAI,CAAJA,CAAI,CAAJA,CAAlC,UAAA,EAAsD;AAClDP,UAAAA,MAAM,CAANA,CAAM,CAANA,CAAAA,UAAAA,GAAuBO,IAAI,CAAJA,CAAI,CAAJA,CAAvBP,UAAAA;AACH;;AACD,YAAIO,IAAI,IAAIA,IAAI,CAAZA,CAAY,CAAZA,IAAmB,KAAA,CAAA,KAAWA,IAAI,CAAJA,CAAI,CAAJA,CAAlC,aAAA,EAAyD;AACrDP,UAAAA,MAAM,CAANA,CAAM,CAANA,CAAAA,aAAAA,GAA0BO,IAAI,CAAJA,CAAI,CAAJA,CAA1BP,aAAAA;AACH;AACJ;;AACD,aAAA,MAAA;AA9LD,KAAA;AAgMHQ,IAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,QAAA,EAAmB;AACpC,cAAA,QAAA;AACI,aAAA,MAAA;AACI,iBAAA,WAAA;;AACJ,aAAA,UAAA;AACI,iBAAA,oBAAA;AAJR;AAjMD,KAAA;AAwMHC,IAAAA,8BAA8B,EAAE,SAAA,8BAAA,CAAA,MAAA,EAAA,cAAA,EAAiC;AAC7D,UAAIT,MAAM,GAAV,EAAA;AACA,UAAIU,SAAS,GAAGjB,MAAM,CAANA,SAAAA,IAAoBA,MAAM,CAA1C,IAAA;AACA,UAAIxD,aAAa,GAAG,CAAC,GAAGrC,UAAU,CAAd,gBAAA,EAApB,MAAoB,CAApB;;AACA,UAAA,aAAA,EAAmB;AACf,SAAC,GAAGE,SAAS,CAAb,IAAA,EAAA,aAAA,EAAmC,UAAA,KAAA,EAAA,QAAA,EAA0B;AACzDkG,UAAAA,MAAM,CAANA,IAAAA,CAAYW,cAAc,GAAG;AACzBC,YAAAA,QAAQ,EADiB,SAAA;AAEzB3E,YAAAA,aAAa,EAFY,QAAA;AAGzB4E,YAAAA,UAAU,EAAE/C,KAAK,GAAG7B,aAAa,CAAbA,MAAAA,GAAuB;AAHlB,WAAH,GAItBL,mBAAmB,CAAnBA,IAAAA,CAAAA,MAAAA,EAJJoE,QAIIpE,CAJJoE;AADJ,SAAA;AAOA,eAAA,MAAA;AACH;;AACD,UAAA,cAAA,EAAoB;AAChBA,QAAAA,MAAM,GAAG,CAAC;AACNY,UAAAA,QAAQ,EADF,SAAA;AAENC,UAAAA,UAAU,EAAE;AAFN,SAAD,CAATb;AADJ,OAAA,MAKO;AACHA,QAAAA,MAAM,GAAG,SAAA,MAAA,CAAA,IAAA,EAAsB;AAC3B,cAAIA,MAAM,GAAGP,MAAM,CAANA,kBAAAA,CAAb,IAAaA,CAAb;;AACA,cAAI,KAAA,CAAA,KAAA,MAAA,IAAqB,OAAzB,MAAA,EAAwC;AACpCO,YAAAA,MAAM,GAANA,IAAAA;AACH;;AACD,iBAAA,MAAA;AALJA,SAAAA;;AAOA,YAAIP,MAAM,CAAV,aAAA,EAA0B;AACtBO,UAAAA,MAAM,GAAG,CAAC;AACNY,YAAAA,QAAQ,EADF,MAAA;AAENE,YAAAA,OAAO,EAAErB,MAAM,CAANA,aAAAA,CAAAA,IAAAA,CAAAA,MAAAA;AAFH,WAAD,CAATO;AAIH;AACJ;;AACD,aAAA,MAAA;AA1OD,KAAA;AA4OHe,IAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,eAAA,EAAA,eAAA,EAAA,gBAAA,EAA6D;AAC9E,UAAA,CAAA;AACAC,MAAAA,eAAe,GAAGrF,MAAM,CAANA,OAAAA,CAAAA,oBAAAA,CAAlBqF,eAAkBrF,CAAlBqF;AACAC,MAAAA,eAAe,GAAGtF,MAAM,CAANA,OAAAA,CAAAA,oBAAAA,CAAlBsF,eAAkBtF,CAAlBsF;;AACA,UAAIlD,KAAK,CAALA,OAAAA,CAAAA,eAAAA,KAAkCA,KAAK,CAALA,OAAAA,CAAtC,eAAsCA,CAAtC,EAAsE;AAClE,YAAIiD,eAAe,CAAfA,MAAAA,KAA2BC,eAAe,CAA9C,MAAA,EAAuD;AACnD,iBAAA,KAAA;AADJ,SAAA,MAEO;AACH,eAAKhD,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAG+C,eAAe,CAA/B,MAAA,EAAwC/C,CAAxC,EAAA,EAA6C;AACzC,gBAAI,CAAC9B,cAAc,CAAC6E,eAAe,CAAfA,CAAe,CAAfA,CAAD,QAAA,EAA8BC,eAAe,CAAfA,CAAe,CAAfA,CAA7C,QAAe,CAAf,IAA6ED,eAAe,CAAfA,CAAe,CAAfA,CAAAA,IAAAA,KAA4BC,eAAe,CAAfA,CAAe,CAAfA,CAAzG,IAAA,IAAoID,eAAe,CAAfA,CAAe,CAAfA,CAAAA,aAAAA,KAAqCC,eAAe,CAAfA,CAAe,CAAfA,CAAzK,aAAA,IAA6M,CAAA,gBAAA,IAAqBC,OAAO,CAACF,eAAe,CAAfA,CAAe,CAAfA,CAARE,UAAO,CAAPA,KAA2CA,OAAO,CAACD,eAAe,CAAfA,CAAe,CAAfA,CAAzR,UAAwR,CAAxR,EAAyT;AACrT,qBAAA,KAAA;AACH;AACJ;AACJ;;AACD,eAAA,IAAA;AAVJ,OAAA,MAWO;AACH,eAAO,CAAC,CAAA,eAAA,IAAoB,CAACD,eAAe,CAArC,MAAA,OAAmD,CAAA,eAAA,IAAoB,CAACC,eAAe,CAA9F,MAAO,CAAP;AACH;AA7PF,KAAA;AA+PHE,IAAAA,kBAAkB,EAAE,SAAA,kBAAA,CAAA,KAAA,EAAA,YAAA,EAAA,UAAA,EAAA,gBAAA,EAA4D;AAC5E,UAAIC,WAAW,GAAGlD,KAAK,CAAvB,MAAA;AACA,UAAImD,cAAc,GAAlB,KAAA;AACA,UAAA,KAAA;AACA,UAAA,CAAA;AACA,UAAA,IAAA;AACA,UAAA,MAAA;AACA,UAAIC,WAAW,GAAGC,gBAAgB,IAAlC,CAAA;AACA,UAAA,cAAA;AACA,UAAIvB,MAAM,GAAV,EAAA;AACA,UAAA,UAAA;;AACA,WAAK/B,CAAC,GAAN,CAAA,EAAYA,CAAC,IAAb,WAAA,EAA8BA,CAA9B,EAAA,EAAmC;AAC/B,YAAIA,CAAC,GAAL,WAAA,EAAqB;AACjBE,UAAAA,IAAI,GAAGD,KAAK,CAALA,EAAAA,CAAPC,CAAOD,CAAPC;AACAqD,UAAAA,MAAM,GAAGrD,IAAI,CAAbqD,MAASrD,EAATqD;AACAC,UAAAA,UAAU,GAAG,UAAUtD,IAAI,CAAJA,GAAAA,CAAvBsD,WAAuBtD,CAAvBsD;AACH;;AACDC,QAAAA,KAAK,GAAG;AACJ5D,UAAAA,KAAK,EADD,WAAA;AAEJ6D,UAAAA,CAAC,EAAEH,MAAM,GAAGA,MAAM,CAANA,IAAAA,IAAe,CAAA,UAAA,IAAeC,UAAU,GAAGxD,CAAC,KAA7B,WAAA,GAAgDE,IAAI,CAAJA,CAAI,CAAJA,CAAAA,qBAAAA,GAAhD,KAAA,GAAlB,CAAGqD,CAAH,GAFL,CAAA;AAGJI,UAAAA,CAAC,EAAEJ,MAAM,GAAGA,MAAM,CAANA,GAAAA,IAAcK,UAAU,IAAI5D,CAAC,KAAf4D,WAAAA,GAAkC1D,IAAI,CAAJA,CAAI,CAAJA,CAAAA,qBAAAA,GAAlC0D,MAAAA,GAAjB,CAAGL,CAAH,GAHL,CAAA;AAIJF,UAAAA,WAAW,EAAEA;AAJT,SAARI;;AAMA,YAAI,CAAA,UAAA,IAAezD,CAAC,GAApB,CAAA,EAA0B;AACtB6D,UAAAA,cAAc,GAAG5D,KAAK,CAALA,EAAAA,CAASD,CAAC,GAAVC,CAAAA,EAAjB4D,MAAiB5D,EAAjB4D;;AACA,cAAIA,cAAc,CAAdA,GAAAA,GAAqBJ,KAAK,CAA9B,CAAA,EAAkC;AAC9BA,YAAAA,KAAK,CAALA,CAAAA,GAAUI,cAAc,CAAxBJ,GAAAA;AACH;AACJ;;AACD,YAAA,YAAA,EAAkB;AACdL,UAAAA,cAAc,GAAGU,YAAY,CAA7BV,KAA6B,CAA7BA;AACH;;AACD,YAAI,CAAJ,cAAA,EAAqB;AACjBrB,UAAAA,MAAM,CAANA,IAAAA,CAAAA,KAAAA;AACH;;AACDsB,QAAAA,WAAW;AACd;;AACD,aAAA,MAAA;AApSD,KAAA;AAsSHU,IAAAA,uBAAuB,EAAE,SAAA,uBAAA,CAAA,MAAA,EAAA,OAAA,EAA0B;AAC/C,UAAIhC,MAAM,GAAGV,MAAM,GAAG2C,MAAM,CAANA,MAAAA,CAAcA,MAAM,CAANA,cAAAA,CAAjB,MAAiBA,CAAdA,CAAH,GAAnB,EAAA;AACA,UAAIC,sBAAsB,GAAG,CAAC,GAAGnI,OAAO,CAAX,gBAAA,EAAA,EAAA,EAA7B,MAA6B,CAA7B;AACA,OAAC,GAAGQ,OAAO,CAAX,mBAAA,EAAA,MAAA,EAAA,sBAAA,EAAA,IAAA,EAAA,IAAA;AACA,aAAO,CAAC,GAAGA,OAAO,CAAX,mBAAA,EAAA,MAAA,EAAA,OAAA,EAAA,IAAA,EAAP,IAAO,CAAP;AA1SD,KAAA;AA4SH4H,IAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,aAAO;AACHC,QAAAA,8BAA8B,EAD3B,IAAA;AAEHC,QAAAA,MAAM,EAAE,SAAA,MAAA,CAAA,SAAA,EAAA,OAAA,EAA6B;AACjC,cAAA,QAAA;AACA,cAAI9F,UAAU,GAAG,CAAC,GAAG/C,UAAU,CAAd,OAAA,EAAjB,SAAiB,CAAjB;;AACA,cAAI,CAAC,GAAGE,KAAK,CAAT,SAAA,EAAqB0F,OAAO,CAA5B,KAAA,KAAuC,EAAEA,OAAO,CAAPA,IAAAA,IAAgBA,OAAO,CAAPA,IAAAA,CAAzD,cAAuC,CAAvC,IAAyF,CAACA,OAAO,CAAPA,GAAAA,CAA9F,QAAA,EAAoH;AAChHkD,YAAAA,QAAQ,GAAGlD,OAAO,CAAPA,SAAAA,CAAAA,OAAAA,CAAXkD,UAAWlD,CAAXkD;AACA/F,YAAAA,UAAU,CAAVA,QAAAA,CAAAA,qBAAAA,EAAAA,QAAAA,CAAAA,iCAAAA;AACA,aAAC,GAAG/C,UAAU,CAAd,OAAA,EAAA,OAAA,EAAA,QAAA,CAA0C4F,OAAO,CAAPA,KAAAA,GAAAA,2BAAAA,GAA1C,2BAAA,EAAA,QAAA,CAAA,UAAA;AACAkD,YAAAA,QAAQ,CAARA,OAAAA,CAAAA,OAAAA,EAA0BlD,OAAO,CAAPA,KAAAA,GAAgBkD,QAAQ,CAARA,QAAAA,CAAhBlD,yBAAgBkD,CAAhBlD,GAA+DkD,QAAQ,CAARA,QAAAA,CAAzFA,uBAAyFA,CAAzFA,EAAAA,UAAAA;AAJJ,WAAA,MAKO;AACHhG,YAAAA,YAAY,CAAZA,UAAY,CAAZA;AACH;AACJ;AAbE,OAAP;AA7SD,KAAA;AA6THA,IAAAA,YAAY,EA7TT,YAAA;AA8THP,IAAAA,UAAU,EA9TP,UAAA;AA+THwG,IAAAA,iBAAiB,EAAE,SAAA,iBAAA,CAAA,cAAA,EAAyB;AACxC,UAAI;AACA,YAAA,cAAA,EAAoB;AAChB,iBAAO;AACHC,YAAAA,cAAc,EAAEC,cAAc,CAD3B,cAAA;AAEHC,YAAAA,YAAY,EAAED,cAAc,CAACC;AAF1B,WAAP;AAIH;AANL,OAAA,CAOE,OAAA,CAAA,EAAU,CAAE;;AACd,aAAA,EAAA;AAxUD,KAAA;AA0UHC,IAAAA,iBAAiB,EAAE,SAAA,iBAAA,CAAA,cAAA,EAAA,cAAA,EAAyC;AACxD,UAAI;AACA,YAAIF,cAAc,IAAIA,cAAc,CAApC,iBAAA,EAAwD;AACpDA,UAAAA,cAAc,CAAdA,iBAAAA,CAAiCG,cAAc,CAA/CH,cAAAA,EAAgEG,cAAc,CAA9EH,YAAAA;AACH;AAHL,OAAA,CAIE,OAAA,CAAA,EAAU,CAAE;AA/Uf,KAAA;AAiVHI,IAAAA,qBAAqB,EAAE,SAAA,qBAAA,CAAA,SAAA,EAAA,QAAA,EAA8B;AACjDnI,MAAAA,eAAe,CAAfA,OAAAA,CAAAA,OAAAA,CAAAA,QAAAA,EAAAA,OAAAA;;AACA,UAAIoI,0BAA0B,GAAGC,SAAS,CAATA,MAAAA,CAAjC,+BAAiCA,CAAjC;AACA,UAAIC,kBAAkB,GAAGD,SAAS,CAATA,aAAAA,CAAzB,oBAAyBA,CAAzB;;AACA,UAAIE,uBAAuB,GAAGD,kBAAkB,IAAIA,kBAAkB,CAAtE,qBAAoDA,EAApD;;AACA,UAAIF,0BAA0B,IAAI,CAA9BA,uBAAAA,IAA0DpG,QAAQ,CAARA,EAAAA,CAA9D,sBAA8DA,CAA9D,EAAmG;AAC/F,YAAIwG,MAAM,GAAG1G,iBAAiB,CAACE,QAAQ,CAARA,OAAAA,CAA/B,gBAA+BA,CAAD,CAA9B;AACA,SAAC,GAAG/C,SAAS,CAAb,IAAA,EAAoBuJ,MAAM,IAAIA,MAAM,CAApC,iBAAA,EAAA,IAAA,CAA6D,YAAW;AACpExG,UAAAA,QAAQ,CAARA,GAAAA,CAAAA,CAAAA,EAAAA,MAAAA;AADJ,SAAA;AAGH;AA3VF,KAAA;AA6VHF,IAAAA,iBAAiB,EA7Vd,iBAAA;AA8VH2G,IAAAA,2BAA2B,EAAE,SAAA,2BAAA,CAAA,OAAA,EAAA,YAAA,EAAgC;AACzD,UAAIC,mBAAmB,GAAG,OAAO,CAAP,IAAA,CAAa,UAAA,MAAA,EAAiB;AACpD,eAAO3D,MAAM,IAAI,CAACA,MAAM,CAAjBA,OAAAA,IAA6B,CAACA,MAAM,CAApCA,KAAAA,IAA8C,UAAUA,MAAM,CAArE,aAAA;AADJ,OAA0B,CAA1B;;AAGA,WAAK,IAAI4D,eAAe,GAAGC,OAAO,CAAPA,MAAAA,GAA3B,CAAA,EAA+CA,OAAO,CAAtD,eAAsD,CAAtD,EAAyED,eAAzE,EAAA,EAA4F;AACxF,YAAI5D,MAAM,GAAG6D,OAAO,CAApB,eAAoB,CAApB;AACA,YAAIC,KAAK,GAAGC,YAAY,IAAIA,YAAY,CAAxC,eAAwC,CAAxC;AACA,YAAIC,aAAa,GAAG,CAAA,mBAAA,IAAwB,UAAUhE,MAAM,CAA5D,aAAA;;AACA,YAAI,CAACA,MAAM,CAAP,OAAA,IAAmB,CAACA,MAAM,CAA1B,KAAA,IAAoC,qBAApC,KAAA,IAAJ,aAAA,EAAqF;AACjF;AACH;AACJ;;AACD,aAAA,eAAA;AA1WD,KAAA;AA4WHiE,IAAAA,sBAAsB,EAAE,SAAA,sBAAA,CAAA,UAAA,EAAA,QAAA,EAA+B;AACnD,UAAIhH,QAAQ,IAAIA,QAAQ,CAAxB,MAAA,EAAiC;AAC7B,YAAIiH,KAAK,GAAGjH,QAAQ,CAARA,OAAAA,CAAiB,MAAMkH,UAAU,CAAjClH,uBAAuBkH,EAAvBlH,EAAZ,MAAYA,EAAZ;AACA,eAAOiH,KAAK,CAALA,EAAAA,CAASC,UAAU,CAAVA,SAAAA,CAAhB,QAAgBA,EAATD,CAAP;AACH;;AACD,aAAA,KAAA;AACH;AAlXE,GAAP;AAxCJhI,CAAiB,EAAjBA","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.utils.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _filtering = require(\"../shared/filtering\");\r\nvar _string = require(\"../../core/utils/string\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _load_panel = require(\"../load_panel\");\r\nvar _load_panel2 = _interopRequireDefault(_load_panel);\r\nvar _utils = require(\"../../data/utils\");\r\nvar _format_helper = require(\"../../format_helper\");\r\nvar _format_helper2 = _interopRequireDefault(_format_helper);\r\nvar _object = require(\"../../core/utils/object\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DATAGRID_SELECTION_DISABLED_CLASS = \"dx-selection-disabled\";\r\nvar DATAGRID_GROUP_OPENED_CLASS = \"dx-datagrid-group-opened\";\r\nvar DATAGRID_GROUP_CLOSED_CLASS = \"dx-datagrid-group-closed\";\r\nvar DATAGRID_EXPAND_CLASS = \"dx-datagrid-expand\";\r\nvar NO_DATA_CLASS = \"nodata\";\r\nvar DATE_INTERVAL_SELECTORS = {\r\n    year: function(value) {\r\n        return value && value.getFullYear()\r\n    },\r\n    month: function(value) {\r\n        return value && value.getMonth() + 1\r\n    },\r\n    day: function(value) {\r\n        return value && value.getDate()\r\n    },\r\n    quarter: function(value) {\r\n        return value && Math.floor(value.getMonth() / 3) + 1\r\n    },\r\n    hour: function(value) {\r\n        return value && value.getHours()\r\n    },\r\n    minute: function(value) {\r\n        return value && value.getMinutes()\r\n    },\r\n    second: function(value) {\r\n        return value && value.getSeconds()\r\n    }\r\n};\r\nmodule.exports = function() {\r\n    var getIntervalSelector = function() {\r\n        var groupInterval;\r\n        var data = arguments[1];\r\n        var nameIntervalSelector;\r\n        var value = this.calculateCellValue(data);\r\n        if (!(0, _type.isDefined)(value)) {\r\n            return null\r\n        } else {\r\n            if (isDateType(this.dataType)) {\r\n                nameIntervalSelector = arguments[0];\r\n                return DATE_INTERVAL_SELECTORS[nameIntervalSelector](value)\r\n            } else {\r\n                if (\"number\" === this.dataType) {\r\n                    groupInterval = arguments[0];\r\n                    return Math.floor(Number(value) / groupInterval) * groupInterval\r\n                }\r\n            }\r\n        }\r\n    };\r\n    var equalSelectors = function(selector1, selector2) {\r\n        if ((0, _type.isFunction)(selector1) && (0, _type.isFunction)(selector2)) {\r\n            if (selector1.originalCallback && selector2.originalCallback) {\r\n                return selector1.originalCallback === selector2.originalCallback && selector1.columnIndex === selector2.columnIndex\r\n            }\r\n        }\r\n        return selector1 === selector2\r\n    };\r\n    var isDateType = function(dataType) {\r\n        return \"date\" === dataType || \"datetime\" === dataType\r\n    };\r\n    var setEmptyText = function($container) {\r\n        $container.get(0).textContent = \"\\xa0\"\r\n    };\r\n    var getWidgetInstance = function($element) {\r\n        var editorData = $element.data && $element.data();\r\n        var dxComponents = editorData && editorData.dxComponents;\r\n        var widgetName = dxComponents && dxComponents[0];\r\n        return widgetName && editorData[widgetName]\r\n    };\r\n    return {\r\n        renderNoDataText: function($element) {\r\n            var that = this;\r\n            $element = $element || this.element();\r\n            if (!$element) {\r\n                return\r\n            }\r\n            var noDataClass = that.addWidgetPrefix(NO_DATA_CLASS);\r\n            var noDataElement = $element.find(\".\" + noDataClass).last();\r\n            var isVisible = this._dataController.isEmpty();\r\n            var isLoading = this._dataController.isLoading();\r\n            if (!noDataElement.length) {\r\n                noDataElement = (0, _renderer2.default)(\"<span>\").addClass(noDataClass).appendTo($element)\r\n            }\r\n            if (isVisible && !isLoading) {\r\n                noDataElement.removeClass(\"dx-hidden\").text(that._getNoDataText())\r\n            } else {\r\n                noDataElement.addClass(\"dx-hidden\")\r\n            }\r\n        },\r\n        renderLoadPanel: function($element, $container, isLocalStore) {\r\n            var that = this;\r\n            var loadPanelOptions;\r\n            that._loadPanel && that._loadPanel.$element().remove();\r\n            loadPanelOptions = that.option(\"loadPanel\");\r\n            if (loadPanelOptions && (\"auto\" === loadPanelOptions.enabled ? !isLocalStore : loadPanelOptions.enabled)) {\r\n                loadPanelOptions = (0, _extend.extend)({\r\n                    shading: false,\r\n                    message: loadPanelOptions.text,\r\n                    position: function() {\r\n                        var $window = (0, _renderer2.default)((0, _window.getWindow)());\r\n                        if ($element.height() > $window.height()) {\r\n                            return {\r\n                                of: $window,\r\n                                boundary: $element,\r\n                                collision: \"fit\"\r\n                            }\r\n                        }\r\n                        return {\r\n                            of: $element\r\n                        }\r\n                    },\r\n                    container: $container\r\n                }, loadPanelOptions);\r\n                that._loadPanel = that._createComponent((0, _renderer2.default)(\"<div>\").appendTo($container), _load_panel2.default, loadPanelOptions)\r\n            } else {\r\n                that._loadPanel = null\r\n            }\r\n        },\r\n        getIndexByKey: function(key, items, keyName) {\r\n            var index = -1;\r\n            var item;\r\n            if (void 0 !== key && Array.isArray(items)) {\r\n                keyName = arguments.length <= 2 ? \"key\" : keyName;\r\n                for (var i = 0; i < items.length; i++) {\r\n                    item = (0, _type.isDefined)(keyName) ? items[i][keyName] : items[i];\r\n                    if ((0, _common.equalByValue)(key, item)) {\r\n                        index = i;\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n            return index\r\n        },\r\n        combineFilters: function(filters, operation) {\r\n            var resultFilter = [];\r\n            var i;\r\n            operation = operation || \"and\";\r\n            for (i = 0; i < filters.length; i++) {\r\n                if (!filters[i]) {\r\n                    continue\r\n                }\r\n                if (resultFilter.length) {\r\n                    resultFilter.push(operation)\r\n                }\r\n                resultFilter.push(filters[i])\r\n            }\r\n            if (1 === resultFilter.length) {\r\n                resultFilter = resultFilter[0]\r\n            }\r\n            if (resultFilter.length) {\r\n                return resultFilter\r\n            }\r\n        },\r\n        checkChanges: function(changes, changeNames) {\r\n            var changesWithChangeNamesCount = 0;\r\n            var i;\r\n            for (i = 0; i < changeNames.length; i++) {\r\n                if (changes[changeNames[i]]) {\r\n                    changesWithChangeNamesCount++\r\n                }\r\n            }\r\n            return changes.length && changes.length === changesWithChangeNamesCount\r\n        },\r\n        equalFilterParameters: function(filter1, filter2) {\r\n            var i;\r\n            if (Array.isArray(filter1) && Array.isArray(filter2)) {\r\n                if (filter1.length !== filter2.length) {\r\n                    return false\r\n                } else {\r\n                    for (i = 0; i < filter1.length; i++) {\r\n                        if (!module.exports.equalFilterParameters(filter1[i], filter2[i])) {\r\n                            return false\r\n                        }\r\n                    }\r\n                }\r\n                return true\r\n            } else {\r\n                if ((0, _type.isFunction)(filter1) && filter1.columnIndex >= 0 && (0, _type.isFunction)(filter2) && filter2.columnIndex >= 0) {\r\n                    return filter1.columnIndex === filter2.columnIndex && (0, _data.toComparable)(filter1.filterValue) === (0, _data.toComparable)(filter2.filterValue)\r\n                } else {\r\n                    return (0, _data.toComparable)(filter1) == (0, _data.toComparable)(filter2)\r\n                }\r\n            }\r\n        },\r\n        proxyMethod: function(instance, methodName, defaultResult) {\r\n            if (!instance[methodName]) {\r\n                instance[methodName] = function() {\r\n                    var dataSource = this._dataSource;\r\n                    return dataSource ? dataSource[methodName].apply(dataSource, arguments) : defaultResult\r\n                }\r\n            }\r\n        },\r\n        formatValue: function(value, options) {\r\n            var valueText = _format_helper2.default.format(value, options.format) || value && value.toString() || \"\";\r\n            var formatObject = {\r\n                value: value,\r\n                valueText: options.getDisplayFormat ? options.getDisplayFormat(valueText) : valueText,\r\n                target: options.target || \"row\",\r\n                groupInterval: options.groupInterval\r\n            };\r\n            return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText\r\n        },\r\n        getFormatOptionsByColumn: function(column, target) {\r\n            return {\r\n                format: column.format,\r\n                getDisplayFormat: column.getDisplayFormat,\r\n                customizeText: column.customizeText,\r\n                target: target,\r\n                trueText: column.trueText,\r\n                falseText: column.falseText\r\n            }\r\n        },\r\n        getDisplayValue: function(column, value, data, rowType) {\r\n            if (column.displayValueMap && void 0 !== column.displayValueMap[value]) {\r\n                return column.displayValueMap[value]\r\n            } else {\r\n                if (column.calculateDisplayValue && data && \"group\" !== rowType) {\r\n                    return column.calculateDisplayValue(data)\r\n                } else {\r\n                    if (column.lookup && !(\"group\" === rowType && (column.calculateGroupValue || column.calculateDisplayValue))) {\r\n                        return column.lookup.calculateCellValue(value)\r\n                    }\r\n                }\r\n            }\r\n            return value\r\n        },\r\n        getGroupRowSummaryText: function(summaryItems, summaryTexts) {\r\n            var result = \"(\";\r\n            var i;\r\n            var summaryItem;\r\n            for (i = 0; i < summaryItems.length; i++) {\r\n                summaryItem = summaryItems[i];\r\n                result += (i > 0 ? \", \" : \"\") + module.exports.getSummaryText(summaryItem, summaryTexts)\r\n            }\r\n            return result += \")\"\r\n        },\r\n        getSummaryText: function(summaryItem, summaryTexts) {\r\n            var displayFormat = summaryItem.displayFormat || summaryItem.columnCaption && summaryTexts[summaryItem.summaryType + \"OtherColumn\"] || summaryTexts[summaryItem.summaryType];\r\n            return this.formatValue(summaryItem.value, {\r\n                format: summaryItem.valueFormat,\r\n                getDisplayFormat: function(valueText) {\r\n                    return displayFormat ? (0, _string.format)(displayFormat, valueText, summaryItem.columnCaption) : valueText\r\n                },\r\n                customizeText: summaryItem.customizeText\r\n            })\r\n        },\r\n        normalizeSortingInfo: function(sort) {\r\n            sort = sort || [];\r\n            var result;\r\n            var i;\r\n            result = (0, _utils.normalizeSortingInfo)(sort);\r\n            for (i = 0; i < sort.length; i++) {\r\n                if (sort && sort[i] && void 0 !== sort[i].isExpanded) {\r\n                    result[i].isExpanded = sort[i].isExpanded\r\n                }\r\n                if (sort && sort[i] && void 0 !== sort[i].groupInterval) {\r\n                    result[i].groupInterval = sort[i].groupInterval\r\n                }\r\n            }\r\n            return result\r\n        },\r\n        getFormatByDataType: function(dataType) {\r\n            switch (dataType) {\r\n                case \"date\":\r\n                    return \"shortDate\";\r\n                case \"datetime\":\r\n                    return \"shortDateShortTime\"\r\n            }\r\n        },\r\n        getHeaderFilterGroupParameters: function(column, remoteGrouping) {\r\n            var result = [];\r\n            var dataField = column.dataField || column.name;\r\n            var groupInterval = (0, _filtering.getGroupInterval)(column);\r\n            if (groupInterval) {\r\n                (0, _iterator.each)(groupInterval, function(index, interval) {\r\n                    result.push(remoteGrouping ? {\r\n                        selector: dataField,\r\n                        groupInterval: interval,\r\n                        isExpanded: index < groupInterval.length - 1\r\n                    } : getIntervalSelector.bind(column, interval))\r\n                });\r\n                return result\r\n            }\r\n            if (remoteGrouping) {\r\n                result = [{\r\n                    selector: dataField,\r\n                    isExpanded: false\r\n                }]\r\n            } else {\r\n                result = function result(data) {\r\n                    var result = column.calculateCellValue(data);\r\n                    if (void 0 === result || \"\" === result) {\r\n                        result = null\r\n                    }\r\n                    return result\r\n                };\r\n                if (column.sortingMethod) {\r\n                    result = [{\r\n                        selector: result,\r\n                        compare: column.sortingMethod.bind(column)\r\n                    }]\r\n                }\r\n            }\r\n            return result\r\n        },\r\n        equalSortParameters: function(sortParameters1, sortParameters2, ignoreIsExpanded) {\r\n            var i;\r\n            sortParameters1 = module.exports.normalizeSortingInfo(sortParameters1);\r\n            sortParameters2 = module.exports.normalizeSortingInfo(sortParameters2);\r\n            if (Array.isArray(sortParameters1) && Array.isArray(sortParameters2)) {\r\n                if (sortParameters1.length !== sortParameters2.length) {\r\n                    return false\r\n                } else {\r\n                    for (i = 0; i < sortParameters1.length; i++) {\r\n                        if (!equalSelectors(sortParameters1[i].selector, sortParameters2[i].selector) || sortParameters1[i].desc !== sortParameters2[i].desc || sortParameters1[i].groupInterval !== sortParameters2[i].groupInterval || !ignoreIsExpanded && Boolean(sortParameters1[i].isExpanded) !== Boolean(sortParameters2[i].isExpanded)) {\r\n                            return false\r\n                        }\r\n                    }\r\n                }\r\n                return true\r\n            } else {\r\n                return (!sortParameters1 || !sortParameters1.length) === (!sortParameters2 || !sortParameters2.length)\r\n            }\r\n        },\r\n        getPointsByColumns: function(items, pointCreated, isVertical, startColumnIndex) {\r\n            var cellsLength = items.length;\r\n            var notCreatePoint = false;\r\n            var point;\r\n            var i;\r\n            var item;\r\n            var offset;\r\n            var columnIndex = startColumnIndex || 0;\r\n            var prevItemOffset;\r\n            var result = [];\r\n            var rtlEnabled;\r\n            for (i = 0; i <= cellsLength; i++) {\r\n                if (i < cellsLength) {\r\n                    item = items.eq(i);\r\n                    offset = item.offset();\r\n                    rtlEnabled = \"rtl\" === item.css(\"direction\")\r\n                }\r\n                point = {\r\n                    index: columnIndex,\r\n                    x: offset ? offset.left + (!isVertical && rtlEnabled ^ i === cellsLength ? item[0].getBoundingClientRect().width : 0) : 0,\r\n                    y: offset ? offset.top + (isVertical && i === cellsLength ? item[0].getBoundingClientRect().height : 0) : 0,\r\n                    columnIndex: columnIndex\r\n                };\r\n                if (!isVertical && i > 0) {\r\n                    prevItemOffset = items.eq(i - 1).offset();\r\n                    if (prevItemOffset.top < point.y) {\r\n                        point.y = prevItemOffset.top\r\n                    }\r\n                }\r\n                if (pointCreated) {\r\n                    notCreatePoint = pointCreated(point)\r\n                }\r\n                if (!notCreatePoint) {\r\n                    result.push(point)\r\n                }\r\n                columnIndex++\r\n            }\r\n            return result\r\n        },\r\n        createObjectWithChanges: function(target, changes) {\r\n            var result = target ? Object.create(Object.getPrototypeOf(target)) : {};\r\n            var targetWithoutPrototype = (0, _extend.extendFromObject)({}, target);\r\n            (0, _object.deepExtendArraySafe)(result, targetWithoutPrototype, true, true);\r\n            return (0, _object.deepExtendArraySafe)(result, changes, true, true)\r\n        },\r\n        getExpandCellTemplate: function() {\r\n            return {\r\n                allowRenderToDetachedContainer: true,\r\n                render: function(container, options) {\r\n                    var rowsView;\r\n                    var $container = (0, _renderer2.default)(container);\r\n                    if ((0, _type.isDefined)(options.value) && !(options.data && options.data.isContinuation) && !options.row.isNewRow) {\r\n                        rowsView = options.component.getView(\"rowsView\");\r\n                        $container.addClass(DATAGRID_EXPAND_CLASS).addClass(DATAGRID_SELECTION_DISABLED_CLASS);\r\n                        (0, _renderer2.default)(\"<div>\").addClass(options.value ? DATAGRID_GROUP_OPENED_CLASS : DATAGRID_GROUP_CLOSED_CLASS).appendTo($container);\r\n                        rowsView.setAria(\"label\", options.value ? rowsView.localize(\"dxDataGrid-ariaCollapse\") : rowsView.localize(\"dxDataGrid-ariaExpand\"), $container)\r\n                    } else {\r\n                        setEmptyText($container)\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setEmptyText: setEmptyText,\r\n        isDateType: isDateType,\r\n        getSelectionRange: function(focusedElement) {\r\n            try {\r\n                if (focusedElement) {\r\n                    return {\r\n                        selectionStart: focusedElement.selectionStart,\r\n                        selectionEnd: focusedElement.selectionEnd\r\n                    }\r\n                }\r\n            } catch (e) {}\r\n            return {}\r\n        },\r\n        setSelectionRange: function(focusedElement, selectionRange) {\r\n            try {\r\n                if (focusedElement && focusedElement.setSelectionRange) {\r\n                    focusedElement.setSelectionRange(selectionRange.selectionStart, selectionRange.selectionEnd)\r\n                }\r\n            } catch (e) {}\r\n        },\r\n        focusAndSelectElement: function(component, $element) {\r\n            _events_engine2.default.trigger($element, \"focus\");\r\n            var isSelectTextOnEditingStart = component.option(\"editing.selectTextOnEditStart\");\r\n            var keyboardController = component.getController(\"keyboardNavigation\");\r\n            var isEditingNavigationMode = keyboardController && keyboardController._isFastEditingStarted();\r\n            if (isSelectTextOnEditingStart && !isEditingNavigationMode && $element.is(\".dx-texteditor-input\")) {\r\n                var editor = getWidgetInstance($element.closest(\".dx-texteditor\"));\r\n                (0, _deferred.when)(editor && editor._loadItemDeferred).done(function() {\r\n                    $element.get(0).select()\r\n                })\r\n            }\r\n        },\r\n        getWidgetInstance: getWidgetInstance,\r\n        getLastResizableColumnIndex: function(columns, resultWidths) {\r\n            var hasResizableColumns = columns.some(function(column) {\r\n                return column && !column.command && !column.fixed && false !== column.allowResizing\r\n            });\r\n            for (var lastColumnIndex = columns.length - 1; columns[lastColumnIndex]; lastColumnIndex--) {\r\n                var column = columns[lastColumnIndex];\r\n                var width = resultWidths && resultWidths[lastColumnIndex];\r\n                var allowResizing = !hasResizableColumns || false !== column.allowResizing;\r\n                if (!column.command && !column.fixed && \"adaptiveHidden\" !== width && allowResizing) {\r\n                    break\r\n                }\r\n            }\r\n            return lastColumnIndex\r\n        },\r\n        isElementInCurrentGrid: function(controller, $element) {\r\n            if ($element && $element.length) {\r\n                var $grid = $element.closest(\".\" + controller.getWidgetContainerClass()).parent();\r\n                return $grid.is(controller.component.$element())\r\n            }\r\n            return false\r\n        }\r\n    }\r\n}();\r\n"]},"metadata":{},"sourceType":"module"}