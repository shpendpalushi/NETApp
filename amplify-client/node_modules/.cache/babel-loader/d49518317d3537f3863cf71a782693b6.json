{"ast":null,"code":"/**\r\n * DevExtreme (ui/data_grid/ui.data_grid.focus.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _uiData_grid = require(\"./ui.data_grid.core\");\n\nvar _uiData_grid2 = _interopRequireDefault(_uiData_grid);\n\nvar _uiGrid_core = require(\"../grid_core/ui.grid_core.focus\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _uiData_grid3 = require(\"./ui.data_grid.utils\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\n\n_uiData_grid2.default.registerModule(\"focus\", (0, _extend.extend)(true, {}, _uiGrid_core2.default, {\n  extenders: {\n    controllers: {\n      data: {\n        changeRowExpand: function changeRowExpand(path) {\n          if (this.option(\"focusedRowEnabled\") && Array.isArray(path) && this.isRowExpanded(path)) {\n            if (this._isFocusedRowInsideGroup(path)) {\n              this.option(\"focusedRowKey\", path);\n            }\n          }\n\n          return this.callBase.apply(this, arguments);\n        },\n        _isFocusedRowInsideGroup: function _isFocusedRowInsideGroup(path) {\n          var columnsController = this.getController(\"columns\");\n          var focusedRowKey = this.option(\"focusedRowKey\");\n          var rowIndex = this.getRowIndexByKey(focusedRowKey);\n          var focusedRow = rowIndex >= 0 && this.getVisibleRows()[rowIndex];\n          var groups = columnsController.getGroupDataSourceParameters(true);\n          var getter;\n\n          if (focusedRow) {\n            for (var i = 0; i < path.length; ++i) {\n              getter = (0, _data.compileGetter)(groups[i] && groups[i].selector);\n\n              if (getter(focusedRow.data) !== path[i]) {\n                return false;\n              }\n            }\n          }\n\n          return true;\n        },\n        _getGroupPath: function _getGroupPath(group) {\n          var groupPath = [group.key];\n          var items = group.items;\n\n          while (items && items[0]) {\n            var item = items[0];\n\n            if (void 0 !== item.key) {\n              groupPath.push(item.key);\n            }\n\n            items = item.items;\n          }\n\n          return groupPath;\n        },\n        _expandGroupByPath: function _expandGroupByPath(that, groupPath, level) {\n          var d = new _deferred.Deferred();\n          level++;\n          that.expandRow(groupPath.slice(0, level)).done(function () {\n            if (level === groupPath.length) {\n              d.resolve();\n            } else {\n              that._expandGroupByPath(that, groupPath, level).done(d.resolve).fail(d.reject);\n            }\n          }).fail(d.reject);\n          return d.promise();\n        },\n        _calculateGlobalRowIndexByGroupedData: function _calculateGlobalRowIndexByGroupedData(key) {\n          var that = this;\n          var dataSource = that._dataSource;\n\n          var filter = that._generateFilterByKey(key);\n\n          var deferred = new _deferred.Deferred();\n          var groupPath;\n          var isGroupKey = Array.isArray(key);\n          var group = dataSource.group();\n\n          if (isGroupKey) {\n            return deferred.resolve(-1).promise();\n          }\n\n          if (!dataSource._grouping._updatePagingOptions) {\n            that._calculateGlobalRowIndexByFlatData(key, null, true).done(deferred.resolve).fail(deferred.reject);\n\n            return deferred;\n          }\n\n          dataSource.load({\n            filter: that._concatWithCombinedFilter(filter),\n            group: group\n          }).done(function (data) {\n            if (!data || 0 === data.length || !(0, _type.isDefined)(data[0].key) || data[0].key === -1) {\n              return deferred.resolve(-1).promise();\n            }\n\n            groupPath = that._getGroupPath(data[0]);\n\n            that._expandGroupByPath(that, groupPath, 0).done(function () {\n              that._calculateExpandedRowGlobalIndex(deferred, key, groupPath, group);\n            }).fail(deferred.reject);\n          }).fail(deferred.reject);\n          return deferred.promise();\n        },\n        _calculateExpandedRowGlobalIndex: function _calculateExpandedRowGlobalIndex(deferred, key, groupPath, group) {\n          var groupFilter = (0, _uiData_grid3.createGroupFilter)(groupPath, {\n            group: group\n          });\n          var dataSource = this._dataSource;\n          var scrollingMode = this.option(\"scrolling.mode\");\n          var isVirtualScrolling = \"virtual\" === scrollingMode || \"infinite\" === scrollingMode;\n          var pageSize = dataSource.pageSize();\n          var groupOffset;\n\n          dataSource._grouping._updatePagingOptions({\n            skip: 0,\n            take: MAX_SAFE_INTEGER\n          }, function (groupInfo, totalOffset) {\n            if ((0, _common.equalByValue)(groupInfo.path, groupPath)) {\n              groupOffset = totalOffset;\n            }\n          });\n\n          this._calculateGlobalRowIndexByFlatData(key, groupFilter).done(function (dataOffset) {\n            var count;\n            var currentPageOffset;\n            var groupContinuationCount;\n\n            if (dataOffset < 0) {\n              deferred.resolve(-1);\n              return;\n            }\n\n            currentPageOffset = groupOffset % pageSize || pageSize;\n            count = currentPageOffset + dataOffset - groupPath.length;\n\n            if (isVirtualScrolling) {\n              groupContinuationCount = 0;\n            } else {\n              groupContinuationCount = Math.floor(count / (pageSize - groupPath.length)) * groupPath.length;\n            }\n\n            count = groupOffset + dataOffset + groupContinuationCount;\n            deferred.resolve(count);\n          }).fail(deferred.reject);\n        }\n      }\n    }\n  }\n}));","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/data_grid/ui.data_grid.focus.js"],"names":["_uiData_grid","require","_uiData_grid2","_interopRequireDefault","_uiGrid_core","_uiGrid_core2","_deferred","_type","_common","_uiData_grid3","_data","_extend","obj","MAX_SAFE_INTEGER","Number","extenders","controllers","data","changeRowExpand","Array","_isFocusedRowInsideGroup","columnsController","focusedRowKey","rowIndex","focusedRow","groups","i","path","getter","_getGroupPath","groupPath","group","items","item","_expandGroupByPath","d","level","that","_calculateGlobalRowIndexByGroupedData","dataSource","filter","deferred","isGroupKey","_calculateExpandedRowGlobalIndex","groupFilter","scrollingMode","isVirtualScrolling","pageSize","skip","take","groupInfo","groupOffset","dataOffset","currentPageOffset","count","groupContinuationCount","Math"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/data_grid/ui.data_grid.focus.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _uiData_grid = require(\"./ui.data_grid.core\");\r\nvar _uiData_grid2 = _interopRequireDefault(_uiData_grid);\r\nvar _uiGrid_core = require(\"../grid_core/ui.grid_core.focus\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _uiData_grid3 = require(\"./ui.data_grid.utils\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\r\n_uiData_grid2.default.registerModule(\"focus\", (0, _extend.extend)(true, {}, _uiGrid_core2.default, {\r\n    extenders: {\r\n        controllers: {\r\n            data: {\r\n                changeRowExpand: function(path) {\r\n                    if (this.option(\"focusedRowEnabled\") && Array.isArray(path) && this.isRowExpanded(path)) {\r\n                        if (this._isFocusedRowInsideGroup(path)) {\r\n                            this.option(\"focusedRowKey\", path)\r\n                        }\r\n                    }\r\n                    return this.callBase.apply(this, arguments)\r\n                },\r\n                _isFocusedRowInsideGroup: function(path) {\r\n                    var columnsController = this.getController(\"columns\");\r\n                    var focusedRowKey = this.option(\"focusedRowKey\");\r\n                    var rowIndex = this.getRowIndexByKey(focusedRowKey);\r\n                    var focusedRow = rowIndex >= 0 && this.getVisibleRows()[rowIndex];\r\n                    var groups = columnsController.getGroupDataSourceParameters(true);\r\n                    var getter;\r\n                    if (focusedRow) {\r\n                        for (var i = 0; i < path.length; ++i) {\r\n                            getter = (0, _data.compileGetter)(groups[i] && groups[i].selector);\r\n                            if (getter(focusedRow.data) !== path[i]) {\r\n                                return false\r\n                            }\r\n                        }\r\n                    }\r\n                    return true\r\n                },\r\n                _getGroupPath: function(group) {\r\n                    var groupPath = [group.key];\r\n                    var items = group.items;\r\n                    while (items && items[0]) {\r\n                        var item = items[0];\r\n                        if (void 0 !== item.key) {\r\n                            groupPath.push(item.key)\r\n                        }\r\n                        items = item.items\r\n                    }\r\n                    return groupPath\r\n                },\r\n                _expandGroupByPath: function(that, groupPath, level) {\r\n                    var d = new _deferred.Deferred;\r\n                    level++;\r\n                    that.expandRow(groupPath.slice(0, level)).done(function() {\r\n                        if (level === groupPath.length) {\r\n                            d.resolve()\r\n                        } else {\r\n                            that._expandGroupByPath(that, groupPath, level).done(d.resolve).fail(d.reject)\r\n                        }\r\n                    }).fail(d.reject);\r\n                    return d.promise()\r\n                },\r\n                _calculateGlobalRowIndexByGroupedData: function(key) {\r\n                    var that = this;\r\n                    var dataSource = that._dataSource;\r\n                    var filter = that._generateFilterByKey(key);\r\n                    var deferred = new _deferred.Deferred;\r\n                    var groupPath;\r\n                    var isGroupKey = Array.isArray(key);\r\n                    var group = dataSource.group();\r\n                    if (isGroupKey) {\r\n                        return deferred.resolve(-1).promise()\r\n                    }\r\n                    if (!dataSource._grouping._updatePagingOptions) {\r\n                        that._calculateGlobalRowIndexByFlatData(key, null, true).done(deferred.resolve).fail(deferred.reject);\r\n                        return deferred\r\n                    }\r\n                    dataSource.load({\r\n                        filter: that._concatWithCombinedFilter(filter),\r\n                        group: group\r\n                    }).done(function(data) {\r\n                        if (!data || 0 === data.length || !(0, _type.isDefined)(data[0].key) || data[0].key === -1) {\r\n                            return deferred.resolve(-1).promise()\r\n                        }\r\n                        groupPath = that._getGroupPath(data[0]);\r\n                        that._expandGroupByPath(that, groupPath, 0).done(function() {\r\n                            that._calculateExpandedRowGlobalIndex(deferred, key, groupPath, group)\r\n                        }).fail(deferred.reject)\r\n                    }).fail(deferred.reject);\r\n                    return deferred.promise()\r\n                },\r\n                _calculateExpandedRowGlobalIndex: function(deferred, key, groupPath, group) {\r\n                    var groupFilter = (0, _uiData_grid3.createGroupFilter)(groupPath, {\r\n                        group: group\r\n                    });\r\n                    var dataSource = this._dataSource;\r\n                    var scrollingMode = this.option(\"scrolling.mode\");\r\n                    var isVirtualScrolling = \"virtual\" === scrollingMode || \"infinite\" === scrollingMode;\r\n                    var pageSize = dataSource.pageSize();\r\n                    var groupOffset;\r\n                    dataSource._grouping._updatePagingOptions({\r\n                        skip: 0,\r\n                        take: MAX_SAFE_INTEGER\r\n                    }, function(groupInfo, totalOffset) {\r\n                        if ((0, _common.equalByValue)(groupInfo.path, groupPath)) {\r\n                            groupOffset = totalOffset\r\n                        }\r\n                    });\r\n                    this._calculateGlobalRowIndexByFlatData(key, groupFilter).done(function(dataOffset) {\r\n                        var count;\r\n                        var currentPageOffset;\r\n                        var groupContinuationCount;\r\n                        if (dataOffset < 0) {\r\n                            deferred.resolve(-1);\r\n                            return\r\n                        }\r\n                        currentPageOffset = groupOffset % pageSize || pageSize;\r\n                        count = currentPageOffset + dataOffset - groupPath.length;\r\n                        if (isVirtualScrolling) {\r\n                            groupContinuationCount = 0\r\n                        } else {\r\n                            groupContinuationCount = Math.floor(count / (pageSize - groupPath.length)) * groupPath.length\r\n                        }\r\n                        count = groupOffset + dataOffset + groupContinuationCount;\r\n                        deferred.resolve(count)\r\n                    }).fail(deferred.reject)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}));\r\n"]},"metadata":{},"sourceType":"module"}