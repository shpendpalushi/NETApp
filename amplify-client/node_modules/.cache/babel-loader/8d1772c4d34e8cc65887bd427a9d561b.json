{"ast":null,"code":"/**\r\n * DevExtreme (viz/range_selector/range_selector.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _type2 = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _utils = require(\"../core/utils\");\n\nvar _date = require(\"../../core/utils/date\");\n\nvar _math = require(\"../../core/utils/math\");\n\nvar _range = require(\"../translators/range\");\n\nvar _range2 = _interopRequireDefault(_range);\n\nvar _base_axis = require(\"../axes/base_axis\");\n\nvar _base_axis2 = _interopRequireDefault(_base_axis);\n\nvar _parse_utils = require(\"../components/parse_utils\");\n\nvar _parse_utils2 = _interopRequireDefault(_parse_utils);\n\nvar _format_helper = require(\"../../format_helper\");\n\nvar _format_helper2 = _interopRequireDefault(_format_helper);\n\nvar _common = require(\"./common\");\n\nvar _common2 = _interopRequireDefault(_common);\n\nvar _sliders_controller = require(\"./sliders_controller\");\n\nvar _sliders_controller2 = _interopRequireDefault(_sliders_controller);\n\nvar _tracker = require(\"./tracker\");\n\nvar _range_view = require(\"./range_view\");\n\nvar _range_view2 = _interopRequireDefault(_range_view);\n\nvar _series_data_source = require(\"./series_data_source\");\n\nvar _series_data_source2 = _interopRequireDefault(_series_data_source);\n\nvar _tick_generator = require(\"../axes/tick_generator\");\n\nvar _tick_generator2 = _interopRequireDefault(_tick_generator);\n\nvar _base_widget = require(\"../core/base_widget\");\n\nvar _base_widget2 = _interopRequireDefault(_base_widget);\n\nvar _export = require(\"../core/export\");\n\nvar _title = require(\"../core/title\");\n\nvar _loading_indicator = require(\"../core/loading_indicator\");\n\nvar _data_source = require(\"../core/data_source\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar _max = Math.max;\nvar _ceil = Math.ceil;\nvar _floor = Math.floor;\nvar START_VALUE = \"startValue\";\nvar END_VALUE = \"endValue\";\nvar DATETIME = \"datetime\";\nvar VALUE = \"value\";\nvar DISCRETE = \"discrete\";\nvar SEMIDISCRETE = \"semidiscrete\";\nvar STRING = \"string\";\nvar VALUE_CHANGED = VALUE + \"Changed\";\nvar CONTAINER_BACKGROUND_COLOR = \"containerBackgroundColor\";\nvar SLIDER_MARKER = \"sliderMarker\";\nvar OPTION_BACKGROUND = \"background\";\nvar LOGARITHMIC = \"logarithmic\";\nvar KEEP = \"keep\";\nvar SHIFT = \"shift\";\nvar RESET = \"reset\";\nvar INVISIBLE_POS = -1e3;\nvar SEMIDISCRETE_GRID_SPACING_FACTOR = 50;\nvar DEFAULT_AXIS_DIVISION_FACTOR = 30;\nvar DEFAULT_MINOR_AXIS_DIVISION_FACTOR = 15;\nvar logarithmBase = 10;\n\nfunction calculateMarkerHeight(renderer, value, sliderMarkerOptions) {\n  var formattedText = void 0 === value ? _common2.default.consts.emptySliderMarkerText : _common2.default.formatValue(value, sliderMarkerOptions);\n  var textBBox = getTextBBox(renderer, formattedText, sliderMarkerOptions.font);\n  return _ceil(textBBox.height) + 2 * sliderMarkerOptions.paddingTopBottom + _common2.default.consts.pointerSize;\n}\n\nfunction calculateScaleLabelHalfWidth(renderer, value, scaleOptions, tickIntervalsInfo) {\n  var formattedText = _common2.default.formatValue(value, scaleOptions.label, tickIntervalsInfo, scaleOptions.valueType, scaleOptions.type, scaleOptions.logarithmBase);\n\n  var textBBox = getTextBBox(renderer, formattedText, scaleOptions.label.font);\n  return _ceil(textBBox.width / 2);\n}\n\nfunction calculateIndents(renderer, scale, sliderMarkerOptions, indentOptions, tickIntervalsInfo) {\n  var leftMarkerHeight;\n  var leftScaleLabelWidth = 0;\n  var rightScaleLabelWidth = 0;\n  var rightMarkerHeight;\n  var placeholderWidthLeft;\n  var placeholderWidthRight;\n  var placeholderHeight;\n  var ticks = \"semidiscrete\" === scale.type ? scale.customTicks : tickIntervalsInfo.ticks;\n  var startTickValue;\n  var endTickValue;\n  indentOptions = indentOptions || {};\n  placeholderWidthLeft = indentOptions.left;\n  placeholderWidthRight = indentOptions.right;\n  placeholderHeight = sliderMarkerOptions.placeholderHeight;\n\n  if (sliderMarkerOptions.visible) {\n    leftMarkerHeight = calculateMarkerHeight(renderer, scale.startValue, sliderMarkerOptions);\n    rightMarkerHeight = calculateMarkerHeight(renderer, scale.endValue, sliderMarkerOptions);\n\n    if (void 0 === placeholderHeight) {\n      placeholderHeight = _max(leftMarkerHeight, rightMarkerHeight);\n    }\n  }\n\n  if (scale.label.visible) {\n    startTickValue = (0, _type2.isDefined)(scale.startValue) ? ticks[0] : void 0;\n    endTickValue = (0, _type2.isDefined)(scale.endValue) ? ticks[ticks.length - 1] : void 0;\n    leftScaleLabelWidth = calculateScaleLabelHalfWidth(renderer, startTickValue, scale, tickIntervalsInfo);\n    rightScaleLabelWidth = calculateScaleLabelHalfWidth(renderer, endTickValue, scale, tickIntervalsInfo);\n  }\n\n  placeholderWidthLeft = void 0 !== placeholderWidthLeft ? placeholderWidthLeft : leftScaleLabelWidth;\n  placeholderWidthRight = (void 0 !== placeholderWidthRight ? placeholderWidthRight : rightScaleLabelWidth) || 1;\n  return {\n    left: placeholderWidthLeft,\n    right: placeholderWidthRight,\n    top: placeholderHeight || 0,\n    bottom: 0\n  };\n}\n\nfunction calculateValueType(firstValue, secondValue) {\n  var typeFirstValue = (0, _type2.type)(firstValue);\n  var typeSecondValue = (0, _type2.type)(secondValue);\n\n  var validType = function validType(type) {\n    return typeFirstValue === type || typeSecondValue === type;\n  };\n\n  return validType(\"date\") ? DATETIME : validType(\"number\") ? \"numeric\" : validType(STRING) ? STRING : \"\";\n}\n\nfunction showScaleMarkers(scaleOptions) {\n  return scaleOptions.valueType === DATETIME && scaleOptions.marker.visible;\n}\n\nfunction updateTranslatorRangeInterval(translatorRange, scaleOptions) {\n  var intervalX = scaleOptions.minorTickInterval || scaleOptions.tickInterval;\n\n  if (\"datetime\" === scaleOptions.valueType) {\n    intervalX = (0, _date.dateToMilliseconds)(intervalX);\n  }\n\n  translatorRange.addRange({\n    interval: intervalX\n  });\n}\n\nfunction checkLogarithmicOptions(options, defaultLogarithmBase, incidentOccurred) {\n  var logarithmBase;\n\n  if (!options) {\n    return;\n  }\n\n  logarithmBase = options.logarithmBase;\n\n  if (options.type === LOGARITHMIC && logarithmBase <= 0 || logarithmBase && !(0, _type2.isNumeric)(logarithmBase)) {\n    options.logarithmBase = defaultLogarithmBase;\n    incidentOccurred(\"E2104\");\n  } else {\n    if (options.type !== LOGARITHMIC) {\n      options.logarithmBase = void 0;\n    }\n  }\n}\n\nfunction calculateScaleAreaHeight(renderer, scaleOptions, visibleMarkers, tickIntervalsInfo) {\n  var labelScaleOptions = scaleOptions.label;\n  var markerScaleOptions = scaleOptions.marker;\n  var placeholderHeight = scaleOptions.placeholderHeight;\n  var ticks = \"semidiscrete\" === scaleOptions.type ? scaleOptions.customTicks : tickIntervalsInfo.ticks;\n\n  var text = _common2.default.formatValue(ticks[0], labelScaleOptions);\n\n  if (placeholderHeight) {\n    return placeholderHeight;\n  } else {\n    return (labelScaleOptions.visible ? labelScaleOptions.topIndent + getTextBBox(renderer, text, labelScaleOptions.font).height : 0) + (visibleMarkers ? markerScaleOptions.topIndent + markerScaleOptions.separatorHeight : 0);\n  }\n}\n\nfunction getMinorTickIntervalUnit(tickInterval, minorTickInterval, withCorrection) {\n  var interval = (0, _date.getDateUnitInterval)(minorTickInterval);\n  var majorUnit = (0, _date.getDateUnitInterval)(tickInterval);\n\n  var idx = _date.dateUnitIntervals.indexOf(interval);\n\n  if (withCorrection && interval === majorUnit && idx > 0) {\n    interval = _date.dateUnitIntervals[idx - 1];\n  }\n\n  return interval;\n}\n\nfunction getNextTickInterval(tickInterval, minorTickInterval, isDateType) {\n  if (!tickInterval) {\n    tickInterval = minorTickInterval;\n  } else {\n    if (isDateType) {\n      tickInterval = (0, _date.getNextDateUnit)(tickInterval);\n    } else {\n      tickInterval += minorTickInterval;\n    }\n  }\n\n  return tickInterval;\n}\n\nfunction calculateTickIntervalsForSemidiscreteScale(scaleOptions, min, max, screenDelta) {\n  var minorTickInterval = scaleOptions.minorTickInterval;\n  var tickInterval = scaleOptions.tickInterval;\n  var interval;\n  var isDateType = \"datetime\" === scaleOptions.valueType;\n  var gridSpacingFactor = scaleOptions.axisDivisionFactor || {};\n  var tickCountByInterval;\n  var tickCountByScreen;\n\n  if (!tickInterval) {\n    do {\n      interval = getNextTickInterval(tickInterval, minorTickInterval, isDateType);\n\n      if (tickInterval !== interval) {\n        tickInterval = interval;\n      } else {\n        break;\n      }\n\n      if (isDateType) {\n        interval = (0, _date.dateToMilliseconds)(tickInterval);\n      }\n\n      tickCountByInterval = _ceil((max - min) / interval);\n      tickCountByScreen = _floor(screenDelta / (gridSpacingFactor[tickInterval] || SEMIDISCRETE_GRID_SPACING_FACTOR)) || 1;\n    } while (interval && tickCountByInterval > tickCountByScreen);\n  }\n\n  return {\n    tickInterval: tickInterval,\n    minorTickInterval: minorTickInterval,\n    bounds: {\n      minVisible: min,\n      maxVisible: max\n    },\n    ticks: []\n  };\n}\n\nfunction updateTickIntervals(scaleOptions, screenDelta, incidentOccurred, range) {\n  var result;\n  var min = (0, _type2.isDefined)(range.minVisible) ? range.minVisible : range.min;\n  var max = (0, _type2.isDefined)(range.maxVisible) ? range.maxVisible : range.max;\n  var categoriesInfo = scaleOptions._categoriesInfo;\n  var ticksInfo;\n  var length;\n  var bounds = {};\n\n  if (scaleOptions.type === SEMIDISCRETE) {\n    result = calculateTickIntervalsForSemidiscreteScale(scaleOptions, min, max, screenDelta);\n  } else {\n    ticksInfo = _tick_generator2.default.tickGenerator({\n      axisType: scaleOptions.type,\n      dataType: scaleOptions.valueType,\n      logBase: scaleOptions.logarithmBase,\n      allowNegatives: true,\n      linearThreshold: Math.abs(scaleOptions.linearThreshold || 0),\n      axisDivisionFactor: scaleOptions.axisDivisionFactor,\n      minorAxisDivisionFactor: scaleOptions.minorAxisDivisionFactor,\n      calculateMinors: true,\n      allowDecimals: scaleOptions.allowDecimals,\n      endOnTick: scaleOptions.endOnTick,\n      incidentOccurred: incidentOccurred,\n      rangeIsEmpty: range.isEmpty()\n    })({\n      min: min,\n      max: max,\n      categories: (0, _type2.isDefined)(categoriesInfo) ? categoriesInfo.categories : []\n    }, screenDelta, scaleOptions.tickInterval, scaleOptions.forceUserTickInterval, void 0, scaleOptions.minorTickInterval, scaleOptions.minorTickCount);\n    length = ticksInfo.ticks.length;\n    bounds.minVisible = ticksInfo.ticks[0] < min ? ticksInfo.ticks[0] : min;\n    bounds.maxVisible = ticksInfo.ticks[length - 1] > max ? ticksInfo.ticks[length - 1] : max;\n    result = {\n      tickInterval: ticksInfo.tickInterval,\n      minorTickInterval: 0 === scaleOptions.minorTickInterval ? 0 : ticksInfo.minorTickInterval,\n      bounds: bounds,\n      ticks: ticksInfo.ticks\n    };\n  }\n\n  return result;\n}\n\nfunction calculateTranslatorRange(seriesDataSource, scaleOptions) {\n  var minValue;\n  var maxValue;\n  var inverted = false;\n  var startValue = scaleOptions.startValue;\n  var endValue = scaleOptions.endValue;\n  var categories;\n  var categoriesInfo;\n  var translatorRange = seriesDataSource ? seriesDataSource.getBoundRange().arg : new _range2.default.Range();\n  var rangeForCategories;\n  var isDate = \"datetime\" === scaleOptions.valueType;\n  var minRange = scaleOptions.minRange;\n\n  if (scaleOptions.type === DISCRETE) {\n    rangeForCategories = new _range2.default.Range({\n      minVisible: startValue,\n      maxVisible: endValue\n    });\n    rangeForCategories.addRange(translatorRange);\n    translatorRange = rangeForCategories;\n    categories = seriesDataSource ? seriesDataSource.argCategories : scaleOptions.categories || !seriesDataSource && startValue && endValue && [startValue, endValue];\n    categories = categories || [];\n    scaleOptions._categoriesInfo = categoriesInfo = (0, _utils.getCategoriesInfo)(categories, startValue, endValue);\n  }\n\n  if (scaleOptions.type === SEMIDISCRETE) {\n    startValue = scaleOptions.startValue = correctValueByInterval(scaleOptions.startValue, isDate, minRange);\n    endValue = scaleOptions.endValue = correctValueByInterval(scaleOptions.endValue, isDate, minRange);\n    translatorRange.minVisible = correctValueByInterval(translatorRange.minVisible, isDate, minRange);\n    translatorRange.maxVisible = correctValueByInterval(translatorRange.maxVisible, isDate, minRange);\n    translatorRange.min = correctValueByInterval(translatorRange.min, isDate, minRange);\n    translatorRange.max = correctValueByInterval(translatorRange.max, isDate, minRange);\n  }\n\n  if ((0, _type2.isDefined)(startValue) && (0, _type2.isDefined)(endValue)) {\n    inverted = categoriesInfo ? categoriesInfo.inverted : startValue > endValue;\n    minValue = categoriesInfo ? categoriesInfo.start : inverted ? endValue : startValue;\n    maxValue = categoriesInfo ? categoriesInfo.end : inverted ? startValue : endValue;\n  } else {\n    if ((0, _type2.isDefined)(startValue) || (0, _type2.isDefined)(endValue)) {\n      minValue = startValue;\n      maxValue = endValue;\n    } else {\n      if (categoriesInfo) {\n        minValue = categoriesInfo.start;\n        maxValue = categoriesInfo.end;\n      }\n    }\n  }\n\n  translatorRange.addRange({\n    invert: inverted,\n    min: minValue,\n    max: maxValue,\n    minVisible: minValue,\n    maxVisible: maxValue,\n    dataType: scaleOptions.valueType\n  });\n  translatorRange.addRange({\n    categories: !seriesDataSource ? categories : void 0,\n    base: scaleOptions.logarithmBase,\n    axisType: scaleOptions.type,\n    dataType: scaleOptions.valueType\n  });\n  seriesDataSource && translatorRange.sortCategories(categories);\n  return translatorRange;\n}\n\nfunction startEndNotDefined(start, end) {\n  return !(0, _type2.isDefined)(start) || !(0, _type2.isDefined)(end);\n}\n\nfunction getTextBBox(renderer, text, fontOptions) {\n  var textElement = renderer.text(text, INVISIBLE_POS, INVISIBLE_POS).css((0, _utils.patchFontOptions)(fontOptions)).append(renderer.root);\n  var textBBox = textElement.getBBox();\n  textElement.remove();\n  return textBBox;\n}\n\nfunction getDateMarkerVisibilityChecker(screenDelta) {\n  return function (isDateScale, isMarkerVisible, min, max, tickInterval) {\n    if (isMarkerVisible && isDateScale) {\n      if (!(0, _type2.isDefined)(tickInterval) || tickInterval.years || tickInterval.months >= 6 || screenDelta / SEMIDISCRETE_GRID_SPACING_FACTOR < _ceil((max - min) / (0, _date.dateToMilliseconds)(\"year\")) + 1) {\n        isMarkerVisible = false;\n      }\n    }\n\n    return isMarkerVisible;\n  };\n}\n\nfunction updateScaleOptions(scaleOptions, seriesDataSource, translatorRange, tickIntervalsInfo, checkDateMarkerVisibility) {\n  var bounds;\n  var isEmptyInterval;\n  var categoriesInfo = scaleOptions._categoriesInfo;\n  var intervals;\n  var isDateTime = scaleOptions.valueType === DATETIME;\n\n  if (seriesDataSource && !seriesDataSource.isEmpty() && !translatorRange.isEmpty()) {\n    bounds = tickIntervalsInfo.bounds;\n    translatorRange.addRange(bounds);\n    scaleOptions.startValue = translatorRange.invert ? bounds.maxVisible : bounds.minVisible;\n    scaleOptions.endValue = translatorRange.invert ? bounds.minVisible : bounds.maxVisible;\n  }\n\n  scaleOptions.marker.visible = checkDateMarkerVisibility(isDateTime && scaleOptions.type.indexOf(DISCRETE) === -1, scaleOptions.marker.visible, scaleOptions.startValue, scaleOptions.endValue, tickIntervalsInfo.tickInterval);\n\n  if (categoriesInfo) {\n    scaleOptions.startValue = categoriesInfo.start;\n    scaleOptions.endValue = categoriesInfo.end;\n  }\n\n  if (scaleOptions.type.indexOf(DISCRETE) === -1) {\n    isEmptyInterval = (0, _type2.isDate)(scaleOptions.startValue) && (0, _type2.isDate)(scaleOptions.endValue) && scaleOptions.startValue.getTime() === scaleOptions.endValue.getTime() || scaleOptions.startValue === scaleOptions.endValue;\n  }\n\n  scaleOptions.isEmpty = startEndNotDefined(scaleOptions.startValue, scaleOptions.endValue) || isEmptyInterval;\n\n  if (scaleOptions.isEmpty) {\n    scaleOptions.startValue = scaleOptions.endValue = void 0;\n  } else {\n    scaleOptions.minorTickInterval = tickIntervalsInfo.minorTickInterval;\n    scaleOptions.tickInterval = tickIntervalsInfo.tickInterval;\n\n    if (isDateTime && (!(0, _type2.isDefined)(scaleOptions.label.format) || scaleOptions.type === SEMIDISCRETE && scaleOptions.minorTickInterval !== scaleOptions.tickInterval)) {\n      if (scaleOptions.type === DISCRETE) {\n        scaleOptions.label.format = _format_helper2.default.getDateFormatByTicks(tickIntervalsInfo.ticks);\n      } else {\n        if (!scaleOptions.marker.visible) {\n          scaleOptions.label.format = _format_helper2.default.getDateFormatByTickInterval(scaleOptions.startValue, scaleOptions.endValue, scaleOptions.tickInterval);\n        } else {\n          scaleOptions.label.format = (0, _date.getDateFormatByTickInterval)(scaleOptions.tickInterval);\n        }\n      }\n    }\n  }\n\n  if (scaleOptions.type === SEMIDISCRETE) {\n    intervals = getIntervalCustomTicks(scaleOptions);\n    scaleOptions.customMinorTicks = intervals.altIntervals;\n    scaleOptions.customTicks = intervals.intervals;\n    scaleOptions.customBoundTicks = [scaleOptions.customTicks[0]];\n  }\n}\n\nfunction prepareScaleOptions(scaleOption, calculatedValueType, incidentOccurred, containerColor) {\n  var parsedValue = 0;\n\n  var valueType = _parse_utils2.default.correctValueType((0, _utils.normalizeEnum)(scaleOption.valueType));\n\n  var parser;\n\n  var validateStartEndValues = function validateStartEndValues(field, parser) {\n    var messageToIncidentOccurred = field === START_VALUE ? \"start\" : \"end\";\n\n    if ((0, _type2.isDefined)(scaleOption[field])) {\n      parsedValue = parser(scaleOption[field]);\n\n      if ((0, _type2.isDefined)(parsedValue)) {\n        scaleOption[field] = parsedValue;\n      } else {\n        scaleOption[field] = void 0;\n        incidentOccurred(\"E2202\", [messageToIncidentOccurred]);\n      }\n    }\n  };\n\n  valueType = calculatedValueType || valueType;\n\n  if (!valueType) {\n    valueType = calculateValueType(scaleOption.startValue, scaleOption.endValue) || \"numeric\";\n  }\n\n  if (valueType === STRING || scaleOption.categories) {\n    scaleOption.type = DISCRETE;\n    valueType = STRING;\n  }\n\n  scaleOption.containerColor = containerColor;\n  scaleOption.valueType = valueType;\n  scaleOption.dataType = valueType;\n  parser = _parse_utils2.default.getParser(valueType);\n  validateStartEndValues(START_VALUE, parser);\n  validateStartEndValues(END_VALUE, parser);\n  checkLogarithmicOptions(scaleOption, logarithmBase, incidentOccurred);\n\n  if (!scaleOption.type) {\n    scaleOption.type = \"continuous\";\n  }\n\n  scaleOption.parser = parser;\n\n  if (scaleOption.type === SEMIDISCRETE) {\n    scaleOption.minorTick.visible = false;\n    scaleOption.minorTickInterval = scaleOption.minRange;\n    scaleOption.marker.visible = false;\n    scaleOption.maxRange = void 0;\n  }\n\n  scaleOption.forceUserTickInterval |= (0, _type2.isDefined)(scaleOption.tickInterval) && !(0, _type2.isDefined)(scaleOption.axisDivisionFactor);\n  scaleOption.axisDivisionFactor = (0, _type2.isDefined)(scaleOption.axisDivisionFactor) ? scaleOption.axisDivisionFactor : DEFAULT_AXIS_DIVISION_FACTOR;\n  scaleOption.minorAxisDivisionFactor = (0, _type2.isDefined)(scaleOption.minorAxisDivisionFactor) ? scaleOption.minorAxisDivisionFactor : DEFAULT_MINOR_AXIS_DIVISION_FACTOR;\n  return scaleOption;\n}\n\nfunction correctValueByInterval(value, isDate, interval) {\n  if ((0, _type2.isDefined)(value)) {\n    value = isDate ? (0, _date.correctDateWithUnitBeginning)(new Date(value), interval) : (0, _math.adjust)(_floor((0, _math.adjust)(value / interval)) * interval);\n  }\n\n  return value;\n}\n\nfunction getIntervalCustomTicks(options) {\n  var min = options.startValue;\n  var max = options.endValue;\n  var isDate = \"datetime\" === options.valueType;\n  var tickInterval = options.tickInterval;\n  var res = {\n    intervals: []\n  };\n\n  if (!(0, _type2.isDefined)(min) || !(0, _type2.isDefined)(max)) {\n    return res;\n  }\n\n  res.intervals = (0, _date.getSequenceByInterval)(min, max, options.minorTickInterval);\n\n  if (tickInterval !== options.minorTickInterval) {\n    res.altIntervals = res.intervals;\n    min = correctValueByInterval(min, isDate, tickInterval);\n    max = correctValueByInterval(max, isDate, tickInterval);\n    res.intervals = (0, _date.getSequenceByInterval)(min, max, tickInterval);\n    res.intervals[0] = res.altIntervals[0];\n  }\n\n  return res;\n}\n\nfunction getPrecisionForSlider(startValue, endValue, screenDelta) {\n  var d = Math.abs(endValue - startValue) / screenDelta;\n\n  var tail = d - _floor(d);\n\n  return tail > 0 ? _ceil(Math.abs((0, _math.adjust)((0, _utils.getLog)(tail, 10)))) : 0;\n}\n\nvar dxRangeSelector = _base_widget2.default.inherit({\n  _toggleParentsScrollSubscription: function _toggleParentsScrollSubscription() {},\n  _eventsMap: {\n    onValueChanged: {\n      name: VALUE_CHANGED\n    }\n  },\n  _setDeprecatedOptions: function _setDeprecatedOptions() {\n    this.callBase.apply(this, arguments);\n    (0, _extend.extend)(this._deprecatedOptions, {\n      \"chart.barWidth\": {\n        since: \"18.1\",\n        message: \"Use the 'chart.commonSeriesSettings.barPadding' or 'chart.series.barPadding' option instead\"\n      },\n      \"chart.equalBarWidth\": {\n        since: \"18.1\",\n        message: \"Use the 'chart.commonSeriesSettings.ignoreEmptyPoints' or 'chart.series.ignoreEmptyPoints' option instead\"\n      },\n      \"chart.useAggregation\": {\n        since: \"18.1\",\n        message: \"Use the 'chart.commonSeriesSettings.aggregation.enabled' or 'chart.series.aggregation.enabled' option instead\"\n      }\n    });\n  },\n  _rootClassPrefix: \"dxrs\",\n  _rootClass: \"dxrs-range-selector\",\n  _dataIsReady: function _dataIsReady() {\n    return this._dataIsLoaded();\n  },\n  _initialChanges: [\"DATA_SOURCE\", \"VALUE\"],\n  _themeDependentChanges: [\"MOSTLY_TOTAL\"],\n  _themeSection: \"rangeSelector\",\n  _fontFields: [\"scale.label.font\", \"sliderMarker.font\"],\n  _initCore: function _initCore() {\n    var that = this;\n    var renderer = that._renderer;\n    var root = renderer.root;\n    var rangeViewGroup;\n    var slidersGroup;\n    var scaleGroup;\n    var scaleBreaksGroup;\n    var trackersGroup;\n    root.css({\n      \"touch-action\": \"pan-y\"\n    });\n    that._clipRect = renderer.clipRect();\n    rangeViewGroup = renderer.g().attr({\n      \"class\": \"dxrs-view\"\n    }).append(root);\n    slidersGroup = renderer.g().attr({\n      \"class\": \"dxrs-slidersContainer\",\n      \"clip-path\": that._clipRect.id\n    }).append(root);\n    scaleGroup = renderer.g().attr({\n      \"class\": \"dxrs-scale\",\n      \"clip-path\": that._clipRect.id\n    }).append(root);\n    scaleBreaksGroup = renderer.g().attr({\n      \"class\": \"dxrs-scale-breaks\"\n    }).append(root);\n    trackersGroup = renderer.g().attr({\n      \"class\": \"dxrs-trackers\"\n    }).append(root);\n    that._axis = new AxisWrapper({\n      renderer: renderer,\n      root: scaleGroup,\n      scaleBreaksGroup: scaleBreaksGroup,\n      updateSelectedRange: function updateSelectedRange(range, e) {\n        that.setValue((0, _utils.convertVisualRangeObject)(range), e);\n      },\n      incidentOccurred: that._incidentOccurred\n    });\n    that._rangeView = new _range_view2.default.RangeView({\n      renderer: renderer,\n      root: rangeViewGroup,\n      translator: that._axis.getTranslator()\n    });\n    that._slidersController = new _sliders_controller2.default.SlidersController({\n      renderer: renderer,\n      root: slidersGroup,\n      trackersGroup: trackersGroup,\n      updateSelectedRange: function updateSelectedRange(range, lastSelectedRange, e) {\n        if (!that._rangeOption) {\n          that.option(VALUE, (0, _utils.convertVisualRangeObject)(range, (0, _type2.isPlainObject)(that._options[VALUE])));\n        }\n\n        that._eventTrigger(VALUE_CHANGED, {\n          value: (0, _utils.convertVisualRangeObject)(range),\n          previousValue: (0, _utils.convertVisualRangeObject)(lastSelectedRange),\n          event: e\n        });\n      },\n      axis: that._axis,\n      translator: that._axis.getTranslator()\n    });\n    that._tracker = new _tracker.Tracker({\n      renderer: renderer,\n      controller: that._slidersController\n    });\n  },\n  _getDefaultSize: function _getDefaultSize() {\n    return {\n      width: 400,\n      height: 160\n    };\n  },\n  _disposeCore: function _disposeCore() {\n    this._axis.dispose();\n\n    this._slidersController.dispose();\n\n    this._tracker.dispose();\n  },\n  _applySize: function _applySize(rect) {\n    this._clientRect = rect.slice();\n\n    this._change([\"MOSTLY_TOTAL\"]);\n  },\n  _optionChangesMap: {\n    scale: \"SCALE\",\n    value: \"VALUE\",\n    dataSource: \"DATA_SOURCE\"\n  },\n  _optionChangesOrder: [\"SCALE\", \"DATA_SOURCE\"],\n  _change_SCALE: function _change_SCALE() {\n    this._change([\"MOSTLY_TOTAL\"]);\n  },\n  _setValueByDataSource: function _setValueByDataSource() {\n    var that = this;\n    var options = that._options;\n    var axis = that._axis;\n\n    if (options.dataSource) {\n      var selectedRangeUpdateMode = that.option(\"selectedRangeUpdateMode\");\n      var value = that.getValue();\n      var valueIsReady = (0, _type2.isDefined)(value[0]) && (0, _type2.isDefined)(value[1]);\n\n      if ((0, _type2.isDefined)(selectedRangeUpdateMode)) {\n        selectedRangeUpdateMode = (0, _utils.normalizeEnum)(selectedRangeUpdateMode);\n        that.__skipAnimation = true;\n      } else {\n        if (valueIsReady) {\n          selectedRangeUpdateMode = RESET;\n        }\n      }\n\n      if (\"auto\" === selectedRangeUpdateMode && valueIsReady) {\n        var rangesInfo = axis.allScaleSelected(value);\n\n        if (rangesInfo.startValue && rangesInfo.endValue) {\n          selectedRangeUpdateMode = RESET;\n        } else {\n          if (rangesInfo.endValue) {\n            selectedRangeUpdateMode = SHIFT;\n          } else {\n            selectedRangeUpdateMode = KEEP;\n          }\n        }\n      }\n\n      if (selectedRangeUpdateMode === RESET) {\n        options[VALUE] = null;\n      } else {\n        if (selectedRangeUpdateMode === SHIFT && valueIsReady) {\n          var _value = that.getValue();\n\n          that.__skipAnimation = true;\n          options[VALUE] = {\n            length: axis.getVisualRangeLength({\n              minVisible: _value[0],\n              maxVisible: _value[1]\n            })\n          };\n        } else {\n          if (selectedRangeUpdateMode === KEEP) {\n            that.__skipAnimation = true;\n          }\n        }\n      }\n    }\n  },\n  _change_DATA_SOURCE: function _change_DATA_SOURCE() {\n    if (this._options.dataSource) {\n      this._updateDataSource();\n    }\n  },\n  _customChangesOrder: [\"MOSTLY_TOTAL\", \"VALUE\", \"SLIDER_SELECTION\"],\n  _change_MOSTLY_TOTAL: function _change_MOSTLY_TOTAL() {\n    this._applyMostlyTotalChange();\n  },\n  _change_SLIDER_SELECTION: function _change_SLIDER_SELECTION() {\n    var that = this;\n    var value = that._options[VALUE];\n\n    that._slidersController.setSelectedRange(value && (0, _utils.getVizRangeObject)(value));\n  },\n  _change_VALUE: function _change_VALUE() {\n    var that = this;\n    var option = that._rangeOption;\n\n    if (option) {\n      that._options[VALUE] = option;\n      that.setValue(option);\n    }\n  },\n  _validateRange: function _validateRange(start, end) {\n    var that = this;\n\n    var translator = that._axis.getTranslator();\n\n    if ((0, _type2.isDefined)(start) && !translator.isValid(start) || (0, _type2.isDefined)(end) && !translator.isValid(end)) {\n      that._incidentOccurred(\"E2203\");\n    }\n  },\n  _applyChanges: function _applyChanges() {\n    var that = this;\n    var value = that._options[VALUE];\n\n    if (that._changes.has(\"VALUE\") && value) {\n      that._rangeOption = value;\n    }\n\n    that.callBase.apply(that, arguments);\n    that._rangeOption = null;\n    that.__isResizing = that.__skipAnimation = false;\n  },\n  _applyMostlyTotalChange: function _applyMostlyTotalChange() {\n    var that = this;\n    var renderer = that._renderer;\n    var rect = that._clientRect;\n    var currentAnimationEnabled;\n    var canvas = {\n      left: rect[0],\n      top: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1]\n    };\n\n    if (that.__isResizing || that.__skipAnimation) {\n      currentAnimationEnabled = renderer.animationEnabled();\n      renderer.updateAnimationOptions({\n        enabled: false\n      });\n    }\n\n    that._clipRect.attr({\n      x: rect[0],\n      y: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1]\n    });\n\n    that._axis.getTranslator().update(new _range2.default.Range(), canvas, {\n      isHorizontal: true\n    });\n\n    that._updateContent({\n      left: rect[0],\n      top: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1]\n    });\n\n    if (that.__isResizing || that.__skipAnimation) {\n      renderer.updateAnimationOptions({\n        enabled: currentAnimationEnabled\n      });\n    }\n\n    that._drawn();\n  },\n  _dataSourceChangedHandler: function _dataSourceChangedHandler() {\n    this._setValueByDataSource();\n\n    this._requestChange([\"MOSTLY_TOTAL\"]);\n  },\n  _completeSeriesDataSourceCreation: function _completeSeriesDataSourceCreation(scaleOptions, seriesDataSource) {\n    var rect = this._clientRect;\n    var canvas = {\n      left: rect[0],\n      top: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1]\n    };\n\n    this._axis.updateOptions((0, _extend.extend)({}, scaleOptions, {\n      isHorizontal: true,\n      label: {}\n    }));\n\n    seriesDataSource.isShowChart() && this._axis.setMarginOptions(seriesDataSource.getMarginOptions(canvas));\n\n    this._axis.updateCanvas(canvas);\n\n    seriesDataSource.createPoints();\n  },\n  _updateContent: function _updateContent(canvas) {\n    var that = this;\n    var chartOptions = that.option(\"chart\");\n\n    var seriesDataSource = that._createSeriesDataSource(chartOptions);\n\n    var isCompactMode = !(seriesDataSource && seriesDataSource.isShowChart() || that.option(\"background.image.url\"));\n    var scaleOptions = prepareScaleOptions(that._getOption(\"scale\"), seriesDataSource && seriesDataSource.getCalculatedValueType(), that._incidentOccurred, this._getOption(\"containerBackgroundColor\", true));\n    seriesDataSource && that._completeSeriesDataSourceCreation(scaleOptions, seriesDataSource);\n    var argTranslatorRange = calculateTranslatorRange(seriesDataSource, scaleOptions);\n    var tickIntervalsInfo = updateTickIntervals(scaleOptions, canvas.width, that._incidentOccurred, argTranslatorRange);\n    var sliderMarkerOptions;\n    var indents;\n    var rangeContainerCanvas;\n    var chartThemeManager = seriesDataSource && seriesDataSource.isShowChart() && seriesDataSource.getThemeManager();\n\n    if (chartThemeManager) {\n      checkLogarithmicOptions(chartOptions && chartOptions.valueAxis, chartThemeManager.getOptions(\"valueAxis\").logarithmBase, that._incidentOccurred);\n    }\n\n    updateScaleOptions(scaleOptions, seriesDataSource, argTranslatorRange, tickIntervalsInfo, getDateMarkerVisibilityChecker(canvas.width));\n    updateTranslatorRangeInterval(argTranslatorRange, scaleOptions);\n    sliderMarkerOptions = that._prepareSliderMarkersOptions(scaleOptions, canvas.width, tickIntervalsInfo, argTranslatorRange);\n    indents = calculateIndents(that._renderer, scaleOptions, sliderMarkerOptions, that.option(\"indent\"), tickIntervalsInfo);\n    rangeContainerCanvas = {\n      left: canvas.left + indents.left,\n      top: canvas.top + indents.top,\n      width: canvas.left + indents.left + _max(canvas.width - indents.left - indents.right, 1),\n      height: _max(!isCompactMode ? canvas.height - indents.top - indents.bottom - calculateScaleAreaHeight(that._renderer, scaleOptions, showScaleMarkers(scaleOptions), tickIntervalsInfo) : _common2.default.HEIGHT_COMPACT_MODE, 0),\n      right: 0,\n      bottom: 0\n    };\n\n    that._axis.update(scaleOptions, isCompactMode, rangeContainerCanvas, argTranslatorRange, seriesDataSource);\n\n    scaleOptions.minorTickInterval = scaleOptions.isEmpty ? 0 : scaleOptions.minorTickInterval;\n\n    that._updateElements(scaleOptions, sliderMarkerOptions, isCompactMode, rangeContainerCanvas, seriesDataSource);\n\n    if (chartThemeManager) {\n      chartThemeManager.dispose();\n    }\n  },\n  _updateElements: function _updateElements(scaleOptions, sliderMarkerOptions, isCompactMode, canvas, seriesDataSource) {\n    var that = this;\n\n    var behavior = that._getOption(\"behavior\");\n\n    var shutterOptions = that._getOption(\"shutter\");\n\n    var isNotSemiDiscrete = scaleOptions.type !== SEMIDISCRETE;\n    shutterOptions.color = shutterOptions.color || that._getOption(CONTAINER_BACKGROUND_COLOR, true);\n\n    that._rangeView.update(that.option(\"background\"), that._themeManager.theme(\"background\"), canvas, isCompactMode, behavior.animationEnabled && that._renderer.animationEnabled(), seriesDataSource);\n\n    that._isUpdating = true;\n\n    that._slidersController.update([canvas.top, canvas.top + canvas.height], behavior, isCompactMode, that._getOption(\"sliderHandle\"), sliderMarkerOptions, shutterOptions, {\n      minRange: isNotSemiDiscrete ? that.option(\"scale.minRange\") : void 0,\n      maxRange: isNotSemiDiscrete ? that.option(\"scale.maxRange\") : void 0\n    }, that._axis.getFullTicks(), that._getOption(\"selectedRangeColor\", true));\n\n    that._requestChange([\"SLIDER_SELECTION\"]);\n\n    that._isUpdating = false;\n\n    that._tracker.update(!that._axis.getTranslator().getBusinessRange().isEmpty(), behavior);\n  },\n  _createSeriesDataSource: function _createSeriesDataSource(chartOptions) {\n    var that = this;\n    var seriesDataSource;\n\n    var dataSource = that._dataSourceItems();\n\n    var scaleOptions = that._getOption(\"scale\");\n\n    var valueType = scaleOptions.valueType || calculateValueType(scaleOptions.startValue, scaleOptions.endValue);\n    var valueAxis = new _base_axis2.default.Axis({\n      renderer: that._renderer,\n      axisType: \"xyAxes\",\n      drawingType: \"linear\"\n    });\n    valueAxis.updateOptions({\n      isHorizontal: false,\n      label: {},\n      categoriesSortingMethod: that._getOption(\"chart\").valueAxis.categoriesSortingMethod\n    });\n\n    if (dataSource || chartOptions && chartOptions.series) {\n      chartOptions = (0, _extend.extend)({}, chartOptions, {\n        theme: that.option(\"theme\")\n      });\n      seriesDataSource = new _series_data_source2.default.SeriesDataSource({\n        renderer: that._renderer,\n        dataSource: dataSource,\n        valueType: (0, _utils.normalizeEnum)(valueType),\n        axisType: scaleOptions.type,\n        chart: chartOptions,\n        dataSourceField: that.option(\"dataSourceField\"),\n        incidentOccurred: that._incidentOccurred,\n        categories: scaleOptions.categories,\n        argumentAxis: that._axis,\n        valueAxis: valueAxis\n      });\n    }\n\n    return seriesDataSource;\n  },\n  _prepareSliderMarkersOptions: function _prepareSliderMarkersOptions(scaleOptions, screenDelta, tickIntervalsInfo, argRange) {\n    var that = this;\n    var minorTickInterval = tickIntervalsInfo.minorTickInterval;\n    var tickInterval = tickIntervalsInfo.tickInterval;\n    var interval = tickInterval;\n    var endValue = scaleOptions.endValue;\n    var startValue = scaleOptions.startValue;\n\n    var sliderMarkerOptions = that._getOption(SLIDER_MARKER);\n\n    var doNotSnap = !that._getOption(\"behavior\").snapToTicks;\n    var isTypeDiscrete = scaleOptions.type === DISCRETE;\n    var isValueTypeDatetime = scaleOptions.valueType === DATETIME;\n    sliderMarkerOptions.borderColor = that._getOption(CONTAINER_BACKGROUND_COLOR, true);\n\n    if (!sliderMarkerOptions.format && !argRange.isEmpty()) {\n      if (doNotSnap && (0, _type2.isNumeric)(scaleOptions.startValue)) {\n        sliderMarkerOptions.format = {\n          type: \"fixedPoint\",\n          precision: getPrecisionForSlider(startValue, endValue, screenDelta)\n        };\n      }\n\n      if (isValueTypeDatetime && !isTypeDiscrete) {\n        if ((0, _type2.isDefined)(minorTickInterval) && 0 !== minorTickInterval) {\n          interval = getMinorTickIntervalUnit(tickInterval, minorTickInterval, doNotSnap);\n        }\n\n        if (!scaleOptions.marker.visible) {\n          if ((0, _type2.isDefined)(startValue) && (0, _type2.isDefined)(endValue)) {\n            sliderMarkerOptions.format = _format_helper2.default.getDateFormatByTickInterval(startValue, endValue, interval);\n          }\n        } else {\n          sliderMarkerOptions.format = (0, _date.getDateFormatByTickInterval)(interval);\n        }\n      }\n\n      if (isValueTypeDatetime && isTypeDiscrete && tickIntervalsInfo.ticks.length) {\n        sliderMarkerOptions.format = _format_helper2.default.getDateFormatByTicks(tickIntervalsInfo.ticks);\n      }\n    }\n\n    return sliderMarkerOptions;\n  },\n  getValue: function getValue() {\n    return (0, _utils.convertVisualRangeObject)(this._slidersController.getSelectedRange());\n  },\n  setValue: function setValue(value, e) {\n    var current;\n    var visualRange = (0, _utils.getVizRangeObject)(value);\n\n    if (!this._isUpdating && value) {\n      this._validateRange(visualRange.startValue, visualRange.endValue);\n\n      current = this._slidersController.getSelectedRange();\n\n      if (!current || current.startValue !== visualRange.startValue || current.endValue !== visualRange.endValue) {\n        this._slidersController.setSelectedRange((0, _utils.getVizRangeObject)(value), e);\n      }\n    }\n  },\n  _setContentSize: function _setContentSize() {\n    this.__isResizing = 2 === this._changes.count();\n    this.callBase.apply(this, arguments);\n  }\n});\n\n(0, _iterator.each)([\"selectedRangeColor\", \"containerBackgroundColor\", \"sliderMarker\", \"sliderHandle\", \"shutter\", OPTION_BACKGROUND, \"behavior\", \"chart\", \"indent\"], function (_, name) {\n  dxRangeSelector.prototype._optionChangesMap[name] = \"MOSTLY_TOTAL\";\n});\n\nfunction prepareAxisOptions(scaleOptions, isCompactMode, height, axisPosition) {\n  scaleOptions.marker.label.font = scaleOptions.label.font;\n  scaleOptions.color = scaleOptions.marker.color = scaleOptions.tick.color;\n  scaleOptions.opacity = scaleOptions.marker.opacity = scaleOptions.tick.opacity;\n  scaleOptions.width = scaleOptions.marker.width = scaleOptions.tick.width;\n  scaleOptions.placeholderSize = (scaleOptions.placeholderHeight || 0) + axisPosition;\n  scaleOptions.argumentType = scaleOptions.valueType;\n  scaleOptions.visible = isCompactMode;\n  scaleOptions.isHorizontal = true;\n  scaleOptions.calculateMinors = true;\n  scaleOptions.semiDiscreteInterval = scaleOptions.minRange;\n\n  if (!isCompactMode) {\n    scaleOptions.minorTick.length = scaleOptions.tick.length = height;\n  }\n\n  scaleOptions.label.indentFromAxis = scaleOptions.label.topIndent + axisPosition;\n  return scaleOptions;\n}\n\nfunction createDateMarkersEvent(scaleOptions, markerTrackers, setSelectedRange) {\n  (0, _iterator.each)(markerTrackers, function (_, value) {\n    value.on(\"dxpointerdown\", onPointerDown);\n  });\n\n  function onPointerDown(e) {\n    var range = e.target.range;\n    var minRange = scaleOptions.minRange ? (0, _date.addInterval)(range.startValue, scaleOptions.minRange) : void 0;\n    var maxRange = scaleOptions.maxRange ? (0, _date.addInterval)(range.startValue, scaleOptions.maxRange) : void 0;\n\n    if (!(minRange && minRange > range.endValue || maxRange && maxRange < range.endValue)) {\n      setSelectedRange(range, e);\n    }\n  }\n}\n\nfunction getShiftDirection() {\n  return 1;\n}\n\nfunction getTickStartPositionShift(length) {\n  return length % 2 === 1 ? -_floor(length / 2) : -length / 2;\n}\n\nfunction AxisWrapper(params) {\n  var that = this;\n  that._axis = new _base_axis2.default.Axis({\n    renderer: params.renderer,\n    axesContainerGroup: params.root,\n    scaleBreaksGroup: params.scaleBreaksGroup,\n    incidentOccurred: params.incidentOccurred,\n    axisType: \"xyAxes\",\n    drawingType: \"linear\",\n    widgetClass: \"dxrs\",\n    axisClass: \"range-selector\",\n    isArgumentAxis: true\n  });\n  that._updateSelectedRangeCallback = params.updateSelectedRange;\n  that._axis.getAxisSharpDirection = that._axis.getSharpDirectionByCoords = getShiftDirection;\n  that._axis.getTickStartPositionShift = getTickStartPositionShift;\n}\n\nAxisWrapper.prototype = {\n  constructor: AxisWrapper,\n  dispose: function dispose() {\n    this._axis.dispose();\n  },\n  calculateInterval: function calculateInterval(value, prevValue) {\n    return this._axis.calculateInterval(value, prevValue);\n  },\n  update: function update(options, isCompactMode, canvas, businessRange, seriesDataSource) {\n    var axis = this._axis;\n    axis.updateOptions(prepareAxisOptions(options, isCompactMode, canvas.height, canvas.height / 2 - _ceil(options.width / 2)));\n    axis.validate();\n    axis.setBusinessRange(businessRange, true);\n\n    if (void 0 !== seriesDataSource && seriesDataSource.isShowChart()) {\n      axis.setMarginOptions(seriesDataSource.getMarginOptions(canvas));\n    }\n\n    axis.draw(canvas);\n    axis.shift({\n      left: 0,\n      bottom: -canvas.height / 2 + canvas.top\n    });\n\n    if (axis.getMarkerTrackers()) {\n      createDateMarkersEvent(options, axis.getMarkerTrackers(), this._updateSelectedRangeCallback);\n    }\n\n    axis.drawScaleBreaks({\n      start: canvas.top,\n      end: canvas.top + canvas.height\n    });\n  },\n  visualRange: function visualRange() {},\n  getViewport: function getViewport() {\n    return {};\n  },\n  allScaleSelected: function allScaleSelected(value) {\n    var _this$_axis$visualRan = this._axis.visualRange(),\n        startValue = _this$_axis$visualRan.startValue,\n        endValue = _this$_axis$visualRan.endValue;\n\n    return {\n      startValue: value[0].valueOf() === startValue.valueOf(),\n      endValue: value[1].valueOf() === endValue.valueOf()\n    };\n  },\n  getOptions: function getOptions() {\n    return this._axis.getOptions() || {};\n  }\n};\n[\"setMarginOptions\", \"getFullTicks\", \"updateCanvas\", \"updateOptions\", \"getAggregationInfo\", \"getTranslator\", \"getVisualRangeLength\", \"getVisibleArea\", \"getMarginOptions\"].forEach(function (methodName) {\n  AxisWrapper.prototype[methodName] = function () {\n    var axis = this._axis;\n    return axis[methodName].apply(axis, arguments);\n  };\n});\n(0, _component_registrator2.default)(\"dxRangeSelector\", dxRangeSelector);\nmodule.exports = dxRangeSelector;\ndxRangeSelector.addPlugin(_export.plugin);\ndxRangeSelector.addPlugin(_title.plugin);\ndxRangeSelector.addPlugin(_loading_indicator.plugin);\ndxRangeSelector.addPlugin(_data_source.plugin);","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/range_selector/range_selector.js"],"names":["_component_registrator","require","_component_registrator2","_interopRequireDefault","_type2","_extend","_iterator","_utils","_date","_math","_range","_range2","_base_axis","_base_axis2","_parse_utils","_parse_utils2","_format_helper","_format_helper2","_common","_common2","_sliders_controller","_sliders_controller2","_tracker","_range_view","_range_view2","_series_data_source","_series_data_source2","_tick_generator","_tick_generator2","_base_widget","_base_widget2","_export","_title","_loading_indicator","_data_source","obj","_max","Math","_ceil","_floor","START_VALUE","END_VALUE","DATETIME","VALUE","DISCRETE","SEMIDISCRETE","STRING","VALUE_CHANGED","CONTAINER_BACKGROUND_COLOR","SLIDER_MARKER","OPTION_BACKGROUND","LOGARITHMIC","KEEP","SHIFT","RESET","INVISIBLE_POS","SEMIDISCRETE_GRID_SPACING_FACTOR","DEFAULT_AXIS_DIVISION_FACTOR","DEFAULT_MINOR_AXIS_DIVISION_FACTOR","logarithmBase","formattedText","textBBox","getTextBBox","sliderMarkerOptions","scaleOptions","leftScaleLabelWidth","rightScaleLabelWidth","ticks","scale","tickIntervalsInfo","indentOptions","placeholderWidthLeft","placeholderWidthRight","placeholderHeight","leftMarkerHeight","calculateMarkerHeight","rightMarkerHeight","startTickValue","endTickValue","calculateScaleLabelHalfWidth","left","right","top","bottom","typeFirstValue","typeSecondValue","validType","intervalX","translatorRange","interval","options","incidentOccurred","labelScaleOptions","markerScaleOptions","text","visibleMarkers","majorUnit","idx","withCorrection","tickInterval","minorTickInterval","isDateType","gridSpacingFactor","getNextTickInterval","tickCountByInterval","max","tickCountByScreen","screenDelta","bounds","minVisible","maxVisible","min","range","categoriesInfo","result","calculateTickIntervalsForSemidiscreteScale","ticksInfo","axisType","dataType","logBase","allowNegatives","linearThreshold","axisDivisionFactor","minorAxisDivisionFactor","calculateMinors","allowDecimals","endOnTick","rangeIsEmpty","categories","length","inverted","startValue","endValue","seriesDataSource","isDate","minRange","rangeForCategories","correctValueByInterval","minValue","maxValue","invert","valueType","base","textElement","renderer","isMarkerVisible","isDateTime","checkDateMarkerVisibility","isEmptyInterval","startEndNotDefined","intervals","getIntervalCustomTicks","parsedValue","scaleOption","validateStartEndValues","messageToIncidentOccurred","field","parser","calculatedValueType","calculateValueType","checkLogarithmicOptions","value","res","d","tail","dxRangeSelector","_toggleParentsScrollSubscription","_eventsMap","onValueChanged","name","_setDeprecatedOptions","since","message","_rootClassPrefix","_rootClass","_dataIsReady","_initialChanges","_themeDependentChanges","_themeSection","_fontFields","_initCore","that","root","rangeViewGroup","slidersGroup","id","scaleGroup","scaleBreaksGroup","trackersGroup","updateSelectedRange","_incidentOccurred","translator","previousValue","event","e","axis","controller","_slidersController","_getDefaultSize","width","height","_disposeCore","_applySize","rect","_optionChangesMap","dataSource","_optionChangesOrder","_change_SCALE","_setValueByDataSource","selectedRangeUpdateMode","valueIsReady","rangesInfo","_value","_change_DATA_SOURCE","_customChangesOrder","_change_MOSTLY_TOTAL","_change_SLIDER_SELECTION","_change_VALUE","option","_validateRange","_applyChanges","_applyMostlyTotalChange","canvas","currentAnimationEnabled","enabled","x","y","isHorizontal","_dataSourceChangedHandler","_completeSeriesDataSourceCreation","label","_updateContent","chartOptions","isCompactMode","prepareScaleOptions","argTranslatorRange","calculateTranslatorRange","updateTickIntervals","chartThemeManager","updateScaleOptions","getDateMarkerVisibilityChecker","updateTranslatorRangeInterval","indents","calculateIndents","rangeContainerCanvas","calculateScaleAreaHeight","showScaleMarkers","_updateElements","behavior","shutterOptions","isNotSemiDiscrete","maxRange","_createSeriesDataSource","valueAxis","drawingType","categoriesSortingMethod","theme","chart","dataSourceField","argumentAxis","_prepareSliderMarkersOptions","doNotSnap","isTypeDiscrete","isValueTypeDatetime","argRange","type","precision","getPrecisionForSlider","getMinorTickIntervalUnit","getValue","setValue","visualRange","current","_setContentSize","setSelectedRange","params","axesContainerGroup","widgetClass","axisClass","isArgumentAxis","AxisWrapper","constructor","dispose","calculateInterval","update","prepareAxisOptions","createDateMarkersEvent","start","end","getViewport","allScaleSelected","_this$_axis$visualRan","getOptions","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/range_selector/range_selector.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _type2 = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _utils = require(\"../core/utils\");\r\nvar _date = require(\"../../core/utils/date\");\r\nvar _math = require(\"../../core/utils/math\");\r\nvar _range = require(\"../translators/range\");\r\nvar _range2 = _interopRequireDefault(_range);\r\nvar _base_axis = require(\"../axes/base_axis\");\r\nvar _base_axis2 = _interopRequireDefault(_base_axis);\r\nvar _parse_utils = require(\"../components/parse_utils\");\r\nvar _parse_utils2 = _interopRequireDefault(_parse_utils);\r\nvar _format_helper = require(\"../../format_helper\");\r\nvar _format_helper2 = _interopRequireDefault(_format_helper);\r\nvar _common = require(\"./common\");\r\nvar _common2 = _interopRequireDefault(_common);\r\nvar _sliders_controller = require(\"./sliders_controller\");\r\nvar _sliders_controller2 = _interopRequireDefault(_sliders_controller);\r\nvar _tracker = require(\"./tracker\");\r\nvar _range_view = require(\"./range_view\");\r\nvar _range_view2 = _interopRequireDefault(_range_view);\r\nvar _series_data_source = require(\"./series_data_source\");\r\nvar _series_data_source2 = _interopRequireDefault(_series_data_source);\r\nvar _tick_generator = require(\"../axes/tick_generator\");\r\nvar _tick_generator2 = _interopRequireDefault(_tick_generator);\r\nvar _base_widget = require(\"../core/base_widget\");\r\nvar _base_widget2 = _interopRequireDefault(_base_widget);\r\nvar _export = require(\"../core/export\");\r\nvar _title = require(\"../core/title\");\r\nvar _loading_indicator = require(\"../core/loading_indicator\");\r\nvar _data_source = require(\"../core/data_source\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar _max = Math.max;\r\nvar _ceil = Math.ceil;\r\nvar _floor = Math.floor;\r\nvar START_VALUE = \"startValue\";\r\nvar END_VALUE = \"endValue\";\r\nvar DATETIME = \"datetime\";\r\nvar VALUE = \"value\";\r\nvar DISCRETE = \"discrete\";\r\nvar SEMIDISCRETE = \"semidiscrete\";\r\nvar STRING = \"string\";\r\nvar VALUE_CHANGED = VALUE + \"Changed\";\r\nvar CONTAINER_BACKGROUND_COLOR = \"containerBackgroundColor\";\r\nvar SLIDER_MARKER = \"sliderMarker\";\r\nvar OPTION_BACKGROUND = \"background\";\r\nvar LOGARITHMIC = \"logarithmic\";\r\nvar KEEP = \"keep\";\r\nvar SHIFT = \"shift\";\r\nvar RESET = \"reset\";\r\nvar INVISIBLE_POS = -1e3;\r\nvar SEMIDISCRETE_GRID_SPACING_FACTOR = 50;\r\nvar DEFAULT_AXIS_DIVISION_FACTOR = 30;\r\nvar DEFAULT_MINOR_AXIS_DIVISION_FACTOR = 15;\r\nvar logarithmBase = 10;\r\n\r\nfunction calculateMarkerHeight(renderer, value, sliderMarkerOptions) {\r\n    var formattedText = void 0 === value ? _common2.default.consts.emptySliderMarkerText : _common2.default.formatValue(value, sliderMarkerOptions);\r\n    var textBBox = getTextBBox(renderer, formattedText, sliderMarkerOptions.font);\r\n    return _ceil(textBBox.height) + 2 * sliderMarkerOptions.paddingTopBottom + _common2.default.consts.pointerSize\r\n}\r\n\r\nfunction calculateScaleLabelHalfWidth(renderer, value, scaleOptions, tickIntervalsInfo) {\r\n    var formattedText = _common2.default.formatValue(value, scaleOptions.label, tickIntervalsInfo, scaleOptions.valueType, scaleOptions.type, scaleOptions.logarithmBase);\r\n    var textBBox = getTextBBox(renderer, formattedText, scaleOptions.label.font);\r\n    return _ceil(textBBox.width / 2)\r\n}\r\n\r\nfunction calculateIndents(renderer, scale, sliderMarkerOptions, indentOptions, tickIntervalsInfo) {\r\n    var leftMarkerHeight;\r\n    var leftScaleLabelWidth = 0;\r\n    var rightScaleLabelWidth = 0;\r\n    var rightMarkerHeight;\r\n    var placeholderWidthLeft;\r\n    var placeholderWidthRight;\r\n    var placeholderHeight;\r\n    var ticks = \"semidiscrete\" === scale.type ? scale.customTicks : tickIntervalsInfo.ticks;\r\n    var startTickValue;\r\n    var endTickValue;\r\n    indentOptions = indentOptions || {};\r\n    placeholderWidthLeft = indentOptions.left;\r\n    placeholderWidthRight = indentOptions.right;\r\n    placeholderHeight = sliderMarkerOptions.placeholderHeight;\r\n    if (sliderMarkerOptions.visible) {\r\n        leftMarkerHeight = calculateMarkerHeight(renderer, scale.startValue, sliderMarkerOptions);\r\n        rightMarkerHeight = calculateMarkerHeight(renderer, scale.endValue, sliderMarkerOptions);\r\n        if (void 0 === placeholderHeight) {\r\n            placeholderHeight = _max(leftMarkerHeight, rightMarkerHeight)\r\n        }\r\n    }\r\n    if (scale.label.visible) {\r\n        startTickValue = (0, _type2.isDefined)(scale.startValue) ? ticks[0] : void 0;\r\n        endTickValue = (0, _type2.isDefined)(scale.endValue) ? ticks[ticks.length - 1] : void 0;\r\n        leftScaleLabelWidth = calculateScaleLabelHalfWidth(renderer, startTickValue, scale, tickIntervalsInfo);\r\n        rightScaleLabelWidth = calculateScaleLabelHalfWidth(renderer, endTickValue, scale, tickIntervalsInfo)\r\n    }\r\n    placeholderWidthLeft = void 0 !== placeholderWidthLeft ? placeholderWidthLeft : leftScaleLabelWidth;\r\n    placeholderWidthRight = (void 0 !== placeholderWidthRight ? placeholderWidthRight : rightScaleLabelWidth) || 1;\r\n    return {\r\n        left: placeholderWidthLeft,\r\n        right: placeholderWidthRight,\r\n        top: placeholderHeight || 0,\r\n        bottom: 0\r\n    }\r\n}\r\n\r\nfunction calculateValueType(firstValue, secondValue) {\r\n    var typeFirstValue = (0, _type2.type)(firstValue);\r\n    var typeSecondValue = (0, _type2.type)(secondValue);\r\n    var validType = function(type) {\r\n        return typeFirstValue === type || typeSecondValue === type\r\n    };\r\n    return validType(\"date\") ? DATETIME : validType(\"number\") ? \"numeric\" : validType(STRING) ? STRING : \"\"\r\n}\r\n\r\nfunction showScaleMarkers(scaleOptions) {\r\n    return scaleOptions.valueType === DATETIME && scaleOptions.marker.visible\r\n}\r\n\r\nfunction updateTranslatorRangeInterval(translatorRange, scaleOptions) {\r\n    var intervalX = scaleOptions.minorTickInterval || scaleOptions.tickInterval;\r\n    if (\"datetime\" === scaleOptions.valueType) {\r\n        intervalX = (0, _date.dateToMilliseconds)(intervalX)\r\n    }\r\n    translatorRange.addRange({\r\n        interval: intervalX\r\n    })\r\n}\r\n\r\nfunction checkLogarithmicOptions(options, defaultLogarithmBase, incidentOccurred) {\r\n    var logarithmBase;\r\n    if (!options) {\r\n        return\r\n    }\r\n    logarithmBase = options.logarithmBase;\r\n    if (options.type === LOGARITHMIC && logarithmBase <= 0 || logarithmBase && !(0, _type2.isNumeric)(logarithmBase)) {\r\n        options.logarithmBase = defaultLogarithmBase;\r\n        incidentOccurred(\"E2104\")\r\n    } else {\r\n        if (options.type !== LOGARITHMIC) {\r\n            options.logarithmBase = void 0\r\n        }\r\n    }\r\n}\r\n\r\nfunction calculateScaleAreaHeight(renderer, scaleOptions, visibleMarkers, tickIntervalsInfo) {\r\n    var labelScaleOptions = scaleOptions.label;\r\n    var markerScaleOptions = scaleOptions.marker;\r\n    var placeholderHeight = scaleOptions.placeholderHeight;\r\n    var ticks = \"semidiscrete\" === scaleOptions.type ? scaleOptions.customTicks : tickIntervalsInfo.ticks;\r\n    var text = _common2.default.formatValue(ticks[0], labelScaleOptions);\r\n    if (placeholderHeight) {\r\n        return placeholderHeight\r\n    } else {\r\n        return (labelScaleOptions.visible ? labelScaleOptions.topIndent + getTextBBox(renderer, text, labelScaleOptions.font).height : 0) + (visibleMarkers ? markerScaleOptions.topIndent + markerScaleOptions.separatorHeight : 0)\r\n    }\r\n}\r\n\r\nfunction getMinorTickIntervalUnit(tickInterval, minorTickInterval, withCorrection) {\r\n    var interval = (0, _date.getDateUnitInterval)(minorTickInterval);\r\n    var majorUnit = (0, _date.getDateUnitInterval)(tickInterval);\r\n    var idx = _date.dateUnitIntervals.indexOf(interval);\r\n    if (withCorrection && interval === majorUnit && idx > 0) {\r\n        interval = _date.dateUnitIntervals[idx - 1]\r\n    }\r\n    return interval\r\n}\r\n\r\nfunction getNextTickInterval(tickInterval, minorTickInterval, isDateType) {\r\n    if (!tickInterval) {\r\n        tickInterval = minorTickInterval\r\n    } else {\r\n        if (isDateType) {\r\n            tickInterval = (0, _date.getNextDateUnit)(tickInterval)\r\n        } else {\r\n            tickInterval += minorTickInterval\r\n        }\r\n    }\r\n    return tickInterval\r\n}\r\n\r\nfunction calculateTickIntervalsForSemidiscreteScale(scaleOptions, min, max, screenDelta) {\r\n    var minorTickInterval = scaleOptions.minorTickInterval;\r\n    var tickInterval = scaleOptions.tickInterval;\r\n    var interval;\r\n    var isDateType = \"datetime\" === scaleOptions.valueType;\r\n    var gridSpacingFactor = scaleOptions.axisDivisionFactor || {};\r\n    var tickCountByInterval;\r\n    var tickCountByScreen;\r\n    if (!tickInterval) {\r\n        do {\r\n            interval = getNextTickInterval(tickInterval, minorTickInterval, isDateType);\r\n            if (tickInterval !== interval) {\r\n                tickInterval = interval\r\n            } else {\r\n                break\r\n            }\r\n            if (isDateType) {\r\n                interval = (0, _date.dateToMilliseconds)(tickInterval)\r\n            }\r\n            tickCountByInterval = _ceil((max - min) / interval);\r\n            tickCountByScreen = _floor(screenDelta / (gridSpacingFactor[tickInterval] || SEMIDISCRETE_GRID_SPACING_FACTOR)) || 1\r\n        } while (interval && tickCountByInterval > tickCountByScreen)\r\n    }\r\n    return {\r\n        tickInterval: tickInterval,\r\n        minorTickInterval: minorTickInterval,\r\n        bounds: {\r\n            minVisible: min,\r\n            maxVisible: max\r\n        },\r\n        ticks: []\r\n    }\r\n}\r\n\r\nfunction updateTickIntervals(scaleOptions, screenDelta, incidentOccurred, range) {\r\n    var result;\r\n    var min = (0, _type2.isDefined)(range.minVisible) ? range.minVisible : range.min;\r\n    var max = (0, _type2.isDefined)(range.maxVisible) ? range.maxVisible : range.max;\r\n    var categoriesInfo = scaleOptions._categoriesInfo;\r\n    var ticksInfo;\r\n    var length;\r\n    var bounds = {};\r\n    if (scaleOptions.type === SEMIDISCRETE) {\r\n        result = calculateTickIntervalsForSemidiscreteScale(scaleOptions, min, max, screenDelta)\r\n    } else {\r\n        ticksInfo = _tick_generator2.default.tickGenerator({\r\n            axisType: scaleOptions.type,\r\n            dataType: scaleOptions.valueType,\r\n            logBase: scaleOptions.logarithmBase,\r\n            allowNegatives: true,\r\n            linearThreshold: Math.abs(scaleOptions.linearThreshold || 0),\r\n            axisDivisionFactor: scaleOptions.axisDivisionFactor,\r\n            minorAxisDivisionFactor: scaleOptions.minorAxisDivisionFactor,\r\n            calculateMinors: true,\r\n            allowDecimals: scaleOptions.allowDecimals,\r\n            endOnTick: scaleOptions.endOnTick,\r\n            incidentOccurred: incidentOccurred,\r\n            rangeIsEmpty: range.isEmpty()\r\n        })({\r\n            min: min,\r\n            max: max,\r\n            categories: (0, _type2.isDefined)(categoriesInfo) ? categoriesInfo.categories : []\r\n        }, screenDelta, scaleOptions.tickInterval, scaleOptions.forceUserTickInterval, void 0, scaleOptions.minorTickInterval, scaleOptions.minorTickCount);\r\n        length = ticksInfo.ticks.length;\r\n        bounds.minVisible = ticksInfo.ticks[0] < min ? ticksInfo.ticks[0] : min;\r\n        bounds.maxVisible = ticksInfo.ticks[length - 1] > max ? ticksInfo.ticks[length - 1] : max;\r\n        result = {\r\n            tickInterval: ticksInfo.tickInterval,\r\n            minorTickInterval: 0 === scaleOptions.minorTickInterval ? 0 : ticksInfo.minorTickInterval,\r\n            bounds: bounds,\r\n            ticks: ticksInfo.ticks\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction calculateTranslatorRange(seriesDataSource, scaleOptions) {\r\n    var minValue;\r\n    var maxValue;\r\n    var inverted = false;\r\n    var startValue = scaleOptions.startValue;\r\n    var endValue = scaleOptions.endValue;\r\n    var categories;\r\n    var categoriesInfo;\r\n    var translatorRange = seriesDataSource ? seriesDataSource.getBoundRange().arg : new _range2.default.Range;\r\n    var rangeForCategories;\r\n    var isDate = \"datetime\" === scaleOptions.valueType;\r\n    var minRange = scaleOptions.minRange;\r\n    if (scaleOptions.type === DISCRETE) {\r\n        rangeForCategories = new _range2.default.Range({\r\n            minVisible: startValue,\r\n            maxVisible: endValue\r\n        });\r\n        rangeForCategories.addRange(translatorRange);\r\n        translatorRange = rangeForCategories;\r\n        categories = seriesDataSource ? seriesDataSource.argCategories : scaleOptions.categories || !seriesDataSource && startValue && endValue && [startValue, endValue];\r\n        categories = categories || [];\r\n        scaleOptions._categoriesInfo = categoriesInfo = (0, _utils.getCategoriesInfo)(categories, startValue, endValue)\r\n    }\r\n    if (scaleOptions.type === SEMIDISCRETE) {\r\n        startValue = scaleOptions.startValue = correctValueByInterval(scaleOptions.startValue, isDate, minRange);\r\n        endValue = scaleOptions.endValue = correctValueByInterval(scaleOptions.endValue, isDate, minRange);\r\n        translatorRange.minVisible = correctValueByInterval(translatorRange.minVisible, isDate, minRange);\r\n        translatorRange.maxVisible = correctValueByInterval(translatorRange.maxVisible, isDate, minRange);\r\n        translatorRange.min = correctValueByInterval(translatorRange.min, isDate, minRange);\r\n        translatorRange.max = correctValueByInterval(translatorRange.max, isDate, minRange)\r\n    }\r\n    if ((0, _type2.isDefined)(startValue) && (0, _type2.isDefined)(endValue)) {\r\n        inverted = categoriesInfo ? categoriesInfo.inverted : startValue > endValue;\r\n        minValue = categoriesInfo ? categoriesInfo.start : inverted ? endValue : startValue;\r\n        maxValue = categoriesInfo ? categoriesInfo.end : inverted ? startValue : endValue\r\n    } else {\r\n        if ((0, _type2.isDefined)(startValue) || (0, _type2.isDefined)(endValue)) {\r\n            minValue = startValue;\r\n            maxValue = endValue\r\n        } else {\r\n            if (categoriesInfo) {\r\n                minValue = categoriesInfo.start;\r\n                maxValue = categoriesInfo.end\r\n            }\r\n        }\r\n    }\r\n    translatorRange.addRange({\r\n        invert: inverted,\r\n        min: minValue,\r\n        max: maxValue,\r\n        minVisible: minValue,\r\n        maxVisible: maxValue,\r\n        dataType: scaleOptions.valueType\r\n    });\r\n    translatorRange.addRange({\r\n        categories: !seriesDataSource ? categories : void 0,\r\n        base: scaleOptions.logarithmBase,\r\n        axisType: scaleOptions.type,\r\n        dataType: scaleOptions.valueType\r\n    });\r\n    seriesDataSource && translatorRange.sortCategories(categories);\r\n    return translatorRange\r\n}\r\n\r\nfunction startEndNotDefined(start, end) {\r\n    return !(0, _type2.isDefined)(start) || !(0, _type2.isDefined)(end)\r\n}\r\n\r\nfunction getTextBBox(renderer, text, fontOptions) {\r\n    var textElement = renderer.text(text, INVISIBLE_POS, INVISIBLE_POS).css((0, _utils.patchFontOptions)(fontOptions)).append(renderer.root);\r\n    var textBBox = textElement.getBBox();\r\n    textElement.remove();\r\n    return textBBox\r\n}\r\n\r\nfunction getDateMarkerVisibilityChecker(screenDelta) {\r\n    return function(isDateScale, isMarkerVisible, min, max, tickInterval) {\r\n        if (isMarkerVisible && isDateScale) {\r\n            if (!(0, _type2.isDefined)(tickInterval) || tickInterval.years || tickInterval.months >= 6 || screenDelta / SEMIDISCRETE_GRID_SPACING_FACTOR < _ceil((max - min) / (0, _date.dateToMilliseconds)(\"year\")) + 1) {\r\n                isMarkerVisible = false\r\n            }\r\n        }\r\n        return isMarkerVisible\r\n    }\r\n}\r\n\r\nfunction updateScaleOptions(scaleOptions, seriesDataSource, translatorRange, tickIntervalsInfo, checkDateMarkerVisibility) {\r\n    var bounds;\r\n    var isEmptyInterval;\r\n    var categoriesInfo = scaleOptions._categoriesInfo;\r\n    var intervals;\r\n    var isDateTime = scaleOptions.valueType === DATETIME;\r\n    if (seriesDataSource && !seriesDataSource.isEmpty() && !translatorRange.isEmpty()) {\r\n        bounds = tickIntervalsInfo.bounds;\r\n        translatorRange.addRange(bounds);\r\n        scaleOptions.startValue = translatorRange.invert ? bounds.maxVisible : bounds.minVisible;\r\n        scaleOptions.endValue = translatorRange.invert ? bounds.minVisible : bounds.maxVisible\r\n    }\r\n    scaleOptions.marker.visible = checkDateMarkerVisibility(isDateTime && scaleOptions.type.indexOf(DISCRETE) === -1, scaleOptions.marker.visible, scaleOptions.startValue, scaleOptions.endValue, tickIntervalsInfo.tickInterval);\r\n    if (categoriesInfo) {\r\n        scaleOptions.startValue = categoriesInfo.start;\r\n        scaleOptions.endValue = categoriesInfo.end\r\n    }\r\n    if (scaleOptions.type.indexOf(DISCRETE) === -1) {\r\n        isEmptyInterval = (0, _type2.isDate)(scaleOptions.startValue) && (0, _type2.isDate)(scaleOptions.endValue) && scaleOptions.startValue.getTime() === scaleOptions.endValue.getTime() || scaleOptions.startValue === scaleOptions.endValue\r\n    }\r\n    scaleOptions.isEmpty = startEndNotDefined(scaleOptions.startValue, scaleOptions.endValue) || isEmptyInterval;\r\n    if (scaleOptions.isEmpty) {\r\n        scaleOptions.startValue = scaleOptions.endValue = void 0\r\n    } else {\r\n        scaleOptions.minorTickInterval = tickIntervalsInfo.minorTickInterval;\r\n        scaleOptions.tickInterval = tickIntervalsInfo.tickInterval;\r\n        if (isDateTime && (!(0, _type2.isDefined)(scaleOptions.label.format) || scaleOptions.type === SEMIDISCRETE && scaleOptions.minorTickInterval !== scaleOptions.tickInterval)) {\r\n            if (scaleOptions.type === DISCRETE) {\r\n                scaleOptions.label.format = _format_helper2.default.getDateFormatByTicks(tickIntervalsInfo.ticks)\r\n            } else {\r\n                if (!scaleOptions.marker.visible) {\r\n                    scaleOptions.label.format = _format_helper2.default.getDateFormatByTickInterval(scaleOptions.startValue, scaleOptions.endValue, scaleOptions.tickInterval)\r\n                } else {\r\n                    scaleOptions.label.format = (0, _date.getDateFormatByTickInterval)(scaleOptions.tickInterval)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (scaleOptions.type === SEMIDISCRETE) {\r\n        intervals = getIntervalCustomTicks(scaleOptions);\r\n        scaleOptions.customMinorTicks = intervals.altIntervals;\r\n        scaleOptions.customTicks = intervals.intervals;\r\n        scaleOptions.customBoundTicks = [scaleOptions.customTicks[0]]\r\n    }\r\n}\r\n\r\nfunction prepareScaleOptions(scaleOption, calculatedValueType, incidentOccurred, containerColor) {\r\n    var parsedValue = 0;\r\n    var valueType = _parse_utils2.default.correctValueType((0, _utils.normalizeEnum)(scaleOption.valueType));\r\n    var parser;\r\n    var validateStartEndValues = function(field, parser) {\r\n        var messageToIncidentOccurred = field === START_VALUE ? \"start\" : \"end\";\r\n        if ((0, _type2.isDefined)(scaleOption[field])) {\r\n            parsedValue = parser(scaleOption[field]);\r\n            if ((0, _type2.isDefined)(parsedValue)) {\r\n                scaleOption[field] = parsedValue\r\n            } else {\r\n                scaleOption[field] = void 0;\r\n                incidentOccurred(\"E2202\", [messageToIncidentOccurred])\r\n            }\r\n        }\r\n    };\r\n    valueType = calculatedValueType || valueType;\r\n    if (!valueType) {\r\n        valueType = calculateValueType(scaleOption.startValue, scaleOption.endValue) || \"numeric\"\r\n    }\r\n    if (valueType === STRING || scaleOption.categories) {\r\n        scaleOption.type = DISCRETE;\r\n        valueType = STRING\r\n    }\r\n    scaleOption.containerColor = containerColor;\r\n    scaleOption.valueType = valueType;\r\n    scaleOption.dataType = valueType;\r\n    parser = _parse_utils2.default.getParser(valueType);\r\n    validateStartEndValues(START_VALUE, parser);\r\n    validateStartEndValues(END_VALUE, parser);\r\n    checkLogarithmicOptions(scaleOption, logarithmBase, incidentOccurred);\r\n    if (!scaleOption.type) {\r\n        scaleOption.type = \"continuous\"\r\n    }\r\n    scaleOption.parser = parser;\r\n    if (scaleOption.type === SEMIDISCRETE) {\r\n        scaleOption.minorTick.visible = false;\r\n        scaleOption.minorTickInterval = scaleOption.minRange;\r\n        scaleOption.marker.visible = false;\r\n        scaleOption.maxRange = void 0\r\n    }\r\n    scaleOption.forceUserTickInterval |= (0, _type2.isDefined)(scaleOption.tickInterval) && !(0, _type2.isDefined)(scaleOption.axisDivisionFactor);\r\n    scaleOption.axisDivisionFactor = (0, _type2.isDefined)(scaleOption.axisDivisionFactor) ? scaleOption.axisDivisionFactor : DEFAULT_AXIS_DIVISION_FACTOR;\r\n    scaleOption.minorAxisDivisionFactor = (0, _type2.isDefined)(scaleOption.minorAxisDivisionFactor) ? scaleOption.minorAxisDivisionFactor : DEFAULT_MINOR_AXIS_DIVISION_FACTOR;\r\n    return scaleOption\r\n}\r\n\r\nfunction correctValueByInterval(value, isDate, interval) {\r\n    if ((0, _type2.isDefined)(value)) {\r\n        value = isDate ? (0, _date.correctDateWithUnitBeginning)(new Date(value), interval) : (0, _math.adjust)(_floor((0, _math.adjust)(value / interval)) * interval)\r\n    }\r\n    return value\r\n}\r\n\r\nfunction getIntervalCustomTicks(options) {\r\n    var min = options.startValue;\r\n    var max = options.endValue;\r\n    var isDate = \"datetime\" === options.valueType;\r\n    var tickInterval = options.tickInterval;\r\n    var res = {\r\n        intervals: []\r\n    };\r\n    if (!(0, _type2.isDefined)(min) || !(0, _type2.isDefined)(max)) {\r\n        return res\r\n    }\r\n    res.intervals = (0, _date.getSequenceByInterval)(min, max, options.minorTickInterval);\r\n    if (tickInterval !== options.minorTickInterval) {\r\n        res.altIntervals = res.intervals;\r\n        min = correctValueByInterval(min, isDate, tickInterval);\r\n        max = correctValueByInterval(max, isDate, tickInterval);\r\n        res.intervals = (0, _date.getSequenceByInterval)(min, max, tickInterval);\r\n        res.intervals[0] = res.altIntervals[0]\r\n    }\r\n    return res\r\n}\r\n\r\nfunction getPrecisionForSlider(startValue, endValue, screenDelta) {\r\n    var d = Math.abs(endValue - startValue) / screenDelta;\r\n    var tail = d - _floor(d);\r\n    return tail > 0 ? _ceil(Math.abs((0, _math.adjust)((0, _utils.getLog)(tail, 10)))) : 0\r\n}\r\nvar dxRangeSelector = _base_widget2.default.inherit({\r\n    _toggleParentsScrollSubscription: function() {},\r\n    _eventsMap: {\r\n        onValueChanged: {\r\n            name: VALUE_CHANGED\r\n        }\r\n    },\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase.apply(this, arguments);\r\n        (0, _extend.extend)(this._deprecatedOptions, {\r\n            \"chart.barWidth\": {\r\n                since: \"18.1\",\r\n                message: \"Use the 'chart.commonSeriesSettings.barPadding' or 'chart.series.barPadding' option instead\"\r\n            },\r\n            \"chart.equalBarWidth\": {\r\n                since: \"18.1\",\r\n                message: \"Use the 'chart.commonSeriesSettings.ignoreEmptyPoints' or 'chart.series.ignoreEmptyPoints' option instead\"\r\n            },\r\n            \"chart.useAggregation\": {\r\n                since: \"18.1\",\r\n                message: \"Use the 'chart.commonSeriesSettings.aggregation.enabled' or 'chart.series.aggregation.enabled' option instead\"\r\n            }\r\n        })\r\n    },\r\n    _rootClassPrefix: \"dxrs\",\r\n    _rootClass: \"dxrs-range-selector\",\r\n    _dataIsReady: function() {\r\n        return this._dataIsLoaded()\r\n    },\r\n    _initialChanges: [\"DATA_SOURCE\", \"VALUE\"],\r\n    _themeDependentChanges: [\"MOSTLY_TOTAL\"],\r\n    _themeSection: \"rangeSelector\",\r\n    _fontFields: [\"scale.label.font\", \"sliderMarker.font\"],\r\n    _initCore: function() {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var root = renderer.root;\r\n        var rangeViewGroup;\r\n        var slidersGroup;\r\n        var scaleGroup;\r\n        var scaleBreaksGroup;\r\n        var trackersGroup;\r\n        root.css({\r\n            \"touch-action\": \"pan-y\"\r\n        });\r\n        that._clipRect = renderer.clipRect();\r\n        rangeViewGroup = renderer.g().attr({\r\n            \"class\": \"dxrs-view\"\r\n        }).append(root);\r\n        slidersGroup = renderer.g().attr({\r\n            \"class\": \"dxrs-slidersContainer\",\r\n            \"clip-path\": that._clipRect.id\r\n        }).append(root);\r\n        scaleGroup = renderer.g().attr({\r\n            \"class\": \"dxrs-scale\",\r\n            \"clip-path\": that._clipRect.id\r\n        }).append(root);\r\n        scaleBreaksGroup = renderer.g().attr({\r\n            \"class\": \"dxrs-scale-breaks\"\r\n        }).append(root);\r\n        trackersGroup = renderer.g().attr({\r\n            \"class\": \"dxrs-trackers\"\r\n        }).append(root);\r\n        that._axis = new AxisWrapper({\r\n            renderer: renderer,\r\n            root: scaleGroup,\r\n            scaleBreaksGroup: scaleBreaksGroup,\r\n            updateSelectedRange: function(range, e) {\r\n                that.setValue((0, _utils.convertVisualRangeObject)(range), e)\r\n            },\r\n            incidentOccurred: that._incidentOccurred\r\n        });\r\n        that._rangeView = new _range_view2.default.RangeView({\r\n            renderer: renderer,\r\n            root: rangeViewGroup,\r\n            translator: that._axis.getTranslator()\r\n        });\r\n        that._slidersController = new _sliders_controller2.default.SlidersController({\r\n            renderer: renderer,\r\n            root: slidersGroup,\r\n            trackersGroup: trackersGroup,\r\n            updateSelectedRange: function(range, lastSelectedRange, e) {\r\n                if (!that._rangeOption) {\r\n                    that.option(VALUE, (0, _utils.convertVisualRangeObject)(range, (0, _type2.isPlainObject)(that._options[VALUE])))\r\n                }\r\n                that._eventTrigger(VALUE_CHANGED, {\r\n                    value: (0, _utils.convertVisualRangeObject)(range),\r\n                    previousValue: (0, _utils.convertVisualRangeObject)(lastSelectedRange),\r\n                    event: e\r\n                })\r\n            },\r\n            axis: that._axis,\r\n            translator: that._axis.getTranslator()\r\n        });\r\n        that._tracker = new _tracker.Tracker({\r\n            renderer: renderer,\r\n            controller: that._slidersController\r\n        })\r\n    },\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: 400,\r\n            height: 160\r\n        }\r\n    },\r\n    _disposeCore: function() {\r\n        this._axis.dispose();\r\n        this._slidersController.dispose();\r\n        this._tracker.dispose()\r\n    },\r\n    _applySize: function(rect) {\r\n        this._clientRect = rect.slice();\r\n        this._change([\"MOSTLY_TOTAL\"])\r\n    },\r\n    _optionChangesMap: {\r\n        scale: \"SCALE\",\r\n        value: \"VALUE\",\r\n        dataSource: \"DATA_SOURCE\"\r\n    },\r\n    _optionChangesOrder: [\"SCALE\", \"DATA_SOURCE\"],\r\n    _change_SCALE: function() {\r\n        this._change([\"MOSTLY_TOTAL\"])\r\n    },\r\n    _setValueByDataSource: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var axis = that._axis;\r\n        if (options.dataSource) {\r\n            var selectedRangeUpdateMode = that.option(\"selectedRangeUpdateMode\");\r\n            var value = that.getValue();\r\n            var valueIsReady = (0, _type2.isDefined)(value[0]) && (0, _type2.isDefined)(value[1]);\r\n            if ((0, _type2.isDefined)(selectedRangeUpdateMode)) {\r\n                selectedRangeUpdateMode = (0, _utils.normalizeEnum)(selectedRangeUpdateMode);\r\n                that.__skipAnimation = true\r\n            } else {\r\n                if (valueIsReady) {\r\n                    selectedRangeUpdateMode = RESET\r\n                }\r\n            }\r\n            if (\"auto\" === selectedRangeUpdateMode && valueIsReady) {\r\n                var rangesInfo = axis.allScaleSelected(value);\r\n                if (rangesInfo.startValue && rangesInfo.endValue) {\r\n                    selectedRangeUpdateMode = RESET\r\n                } else {\r\n                    if (rangesInfo.endValue) {\r\n                        selectedRangeUpdateMode = SHIFT\r\n                    } else {\r\n                        selectedRangeUpdateMode = KEEP\r\n                    }\r\n                }\r\n            }\r\n            if (selectedRangeUpdateMode === RESET) {\r\n                options[VALUE] = null\r\n            } else {\r\n                if (selectedRangeUpdateMode === SHIFT && valueIsReady) {\r\n                    var _value = that.getValue();\r\n                    that.__skipAnimation = true;\r\n                    options[VALUE] = {\r\n                        length: axis.getVisualRangeLength({\r\n                            minVisible: _value[0],\r\n                            maxVisible: _value[1]\r\n                        })\r\n                    }\r\n                } else {\r\n                    if (selectedRangeUpdateMode === KEEP) {\r\n                        that.__skipAnimation = true\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _change_DATA_SOURCE: function() {\r\n        if (this._options.dataSource) {\r\n            this._updateDataSource()\r\n        }\r\n    },\r\n    _customChangesOrder: [\"MOSTLY_TOTAL\", \"VALUE\", \"SLIDER_SELECTION\"],\r\n    _change_MOSTLY_TOTAL: function() {\r\n        this._applyMostlyTotalChange()\r\n    },\r\n    _change_SLIDER_SELECTION: function() {\r\n        var that = this;\r\n        var value = that._options[VALUE];\r\n        that._slidersController.setSelectedRange(value && (0, _utils.getVizRangeObject)(value))\r\n    },\r\n    _change_VALUE: function() {\r\n        var that = this;\r\n        var option = that._rangeOption;\r\n        if (option) {\r\n            that._options[VALUE] = option;\r\n            that.setValue(option)\r\n        }\r\n    },\r\n    _validateRange: function(start, end) {\r\n        var that = this;\r\n        var translator = that._axis.getTranslator();\r\n        if ((0, _type2.isDefined)(start) && !translator.isValid(start) || (0, _type2.isDefined)(end) && !translator.isValid(end)) {\r\n            that._incidentOccurred(\"E2203\")\r\n        }\r\n    },\r\n    _applyChanges: function() {\r\n        var that = this;\r\n        var value = that._options[VALUE];\r\n        if (that._changes.has(\"VALUE\") && value) {\r\n            that._rangeOption = value\r\n        }\r\n        that.callBase.apply(that, arguments);\r\n        that._rangeOption = null;\r\n        that.__isResizing = that.__skipAnimation = false\r\n    },\r\n    _applyMostlyTotalChange: function() {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var rect = that._clientRect;\r\n        var currentAnimationEnabled;\r\n        var canvas = {\r\n            left: rect[0],\r\n            top: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1]\r\n        };\r\n        if (that.__isResizing || that.__skipAnimation) {\r\n            currentAnimationEnabled = renderer.animationEnabled();\r\n            renderer.updateAnimationOptions({\r\n                enabled: false\r\n            })\r\n        }\r\n        that._clipRect.attr({\r\n            x: rect[0],\r\n            y: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1]\r\n        });\r\n        that._axis.getTranslator().update(new _range2.default.Range, canvas, {\r\n            isHorizontal: true\r\n        });\r\n        that._updateContent({\r\n            left: rect[0],\r\n            top: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1]\r\n        });\r\n        if (that.__isResizing || that.__skipAnimation) {\r\n            renderer.updateAnimationOptions({\r\n                enabled: currentAnimationEnabled\r\n            })\r\n        }\r\n        that._drawn()\r\n    },\r\n    _dataSourceChangedHandler: function() {\r\n        this._setValueByDataSource();\r\n        this._requestChange([\"MOSTLY_TOTAL\"])\r\n    },\r\n    _completeSeriesDataSourceCreation: function(scaleOptions, seriesDataSource) {\r\n        var rect = this._clientRect;\r\n        var canvas = {\r\n            left: rect[0],\r\n            top: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1]\r\n        };\r\n        this._axis.updateOptions((0, _extend.extend)({}, scaleOptions, {\r\n            isHorizontal: true,\r\n            label: {}\r\n        }));\r\n        seriesDataSource.isShowChart() && this._axis.setMarginOptions(seriesDataSource.getMarginOptions(canvas));\r\n        this._axis.updateCanvas(canvas);\r\n        seriesDataSource.createPoints()\r\n    },\r\n    _updateContent: function(canvas) {\r\n        var that = this;\r\n        var chartOptions = that.option(\"chart\");\r\n        var seriesDataSource = that._createSeriesDataSource(chartOptions);\r\n        var isCompactMode = !(seriesDataSource && seriesDataSource.isShowChart() || that.option(\"background.image.url\"));\r\n        var scaleOptions = prepareScaleOptions(that._getOption(\"scale\"), seriesDataSource && seriesDataSource.getCalculatedValueType(), that._incidentOccurred, this._getOption(\"containerBackgroundColor\", true));\r\n        seriesDataSource && that._completeSeriesDataSourceCreation(scaleOptions, seriesDataSource);\r\n        var argTranslatorRange = calculateTranslatorRange(seriesDataSource, scaleOptions);\r\n        var tickIntervalsInfo = updateTickIntervals(scaleOptions, canvas.width, that._incidentOccurred, argTranslatorRange);\r\n        var sliderMarkerOptions;\r\n        var indents;\r\n        var rangeContainerCanvas;\r\n        var chartThemeManager = seriesDataSource && seriesDataSource.isShowChart() && seriesDataSource.getThemeManager();\r\n        if (chartThemeManager) {\r\n            checkLogarithmicOptions(chartOptions && chartOptions.valueAxis, chartThemeManager.getOptions(\"valueAxis\").logarithmBase, that._incidentOccurred)\r\n        }\r\n        updateScaleOptions(scaleOptions, seriesDataSource, argTranslatorRange, tickIntervalsInfo, getDateMarkerVisibilityChecker(canvas.width));\r\n        updateTranslatorRangeInterval(argTranslatorRange, scaleOptions);\r\n        sliderMarkerOptions = that._prepareSliderMarkersOptions(scaleOptions, canvas.width, tickIntervalsInfo, argTranslatorRange);\r\n        indents = calculateIndents(that._renderer, scaleOptions, sliderMarkerOptions, that.option(\"indent\"), tickIntervalsInfo);\r\n        rangeContainerCanvas = {\r\n            left: canvas.left + indents.left,\r\n            top: canvas.top + indents.top,\r\n            width: canvas.left + indents.left + _max(canvas.width - indents.left - indents.right, 1),\r\n            height: _max(!isCompactMode ? canvas.height - indents.top - indents.bottom - calculateScaleAreaHeight(that._renderer, scaleOptions, showScaleMarkers(scaleOptions), tickIntervalsInfo) : _common2.default.HEIGHT_COMPACT_MODE, 0),\r\n            right: 0,\r\n            bottom: 0\r\n        };\r\n        that._axis.update(scaleOptions, isCompactMode, rangeContainerCanvas, argTranslatorRange, seriesDataSource);\r\n        scaleOptions.minorTickInterval = scaleOptions.isEmpty ? 0 : scaleOptions.minorTickInterval;\r\n        that._updateElements(scaleOptions, sliderMarkerOptions, isCompactMode, rangeContainerCanvas, seriesDataSource);\r\n        if (chartThemeManager) {\r\n            chartThemeManager.dispose()\r\n        }\r\n    },\r\n    _updateElements: function(scaleOptions, sliderMarkerOptions, isCompactMode, canvas, seriesDataSource) {\r\n        var that = this;\r\n        var behavior = that._getOption(\"behavior\");\r\n        var shutterOptions = that._getOption(\"shutter\");\r\n        var isNotSemiDiscrete = scaleOptions.type !== SEMIDISCRETE;\r\n        shutterOptions.color = shutterOptions.color || that._getOption(CONTAINER_BACKGROUND_COLOR, true);\r\n        that._rangeView.update(that.option(\"background\"), that._themeManager.theme(\"background\"), canvas, isCompactMode, behavior.animationEnabled && that._renderer.animationEnabled(), seriesDataSource);\r\n        that._isUpdating = true;\r\n        that._slidersController.update([canvas.top, canvas.top + canvas.height], behavior, isCompactMode, that._getOption(\"sliderHandle\"), sliderMarkerOptions, shutterOptions, {\r\n            minRange: isNotSemiDiscrete ? that.option(\"scale.minRange\") : void 0,\r\n            maxRange: isNotSemiDiscrete ? that.option(\"scale.maxRange\") : void 0\r\n        }, that._axis.getFullTicks(), that._getOption(\"selectedRangeColor\", true));\r\n        that._requestChange([\"SLIDER_SELECTION\"]);\r\n        that._isUpdating = false;\r\n        that._tracker.update(!that._axis.getTranslator().getBusinessRange().isEmpty(), behavior)\r\n    },\r\n    _createSeriesDataSource: function(chartOptions) {\r\n        var that = this;\r\n        var seriesDataSource;\r\n        var dataSource = that._dataSourceItems();\r\n        var scaleOptions = that._getOption(\"scale\");\r\n        var valueType = scaleOptions.valueType || calculateValueType(scaleOptions.startValue, scaleOptions.endValue);\r\n        var valueAxis = new _base_axis2.default.Axis({\r\n            renderer: that._renderer,\r\n            axisType: \"xyAxes\",\r\n            drawingType: \"linear\"\r\n        });\r\n        valueAxis.updateOptions({\r\n            isHorizontal: false,\r\n            label: {},\r\n            categoriesSortingMethod: that._getOption(\"chart\").valueAxis.categoriesSortingMethod\r\n        });\r\n        if (dataSource || chartOptions && chartOptions.series) {\r\n            chartOptions = (0, _extend.extend)({}, chartOptions, {\r\n                theme: that.option(\"theme\")\r\n            });\r\n            seriesDataSource = new _series_data_source2.default.SeriesDataSource({\r\n                renderer: that._renderer,\r\n                dataSource: dataSource,\r\n                valueType: (0, _utils.normalizeEnum)(valueType),\r\n                axisType: scaleOptions.type,\r\n                chart: chartOptions,\r\n                dataSourceField: that.option(\"dataSourceField\"),\r\n                incidentOccurred: that._incidentOccurred,\r\n                categories: scaleOptions.categories,\r\n                argumentAxis: that._axis,\r\n                valueAxis: valueAxis\r\n            })\r\n        }\r\n        return seriesDataSource\r\n    },\r\n    _prepareSliderMarkersOptions: function(scaleOptions, screenDelta, tickIntervalsInfo, argRange) {\r\n        var that = this;\r\n        var minorTickInterval = tickIntervalsInfo.minorTickInterval;\r\n        var tickInterval = tickIntervalsInfo.tickInterval;\r\n        var interval = tickInterval;\r\n        var endValue = scaleOptions.endValue;\r\n        var startValue = scaleOptions.startValue;\r\n        var sliderMarkerOptions = that._getOption(SLIDER_MARKER);\r\n        var doNotSnap = !that._getOption(\"behavior\").snapToTicks;\r\n        var isTypeDiscrete = scaleOptions.type === DISCRETE;\r\n        var isValueTypeDatetime = scaleOptions.valueType === DATETIME;\r\n        sliderMarkerOptions.borderColor = that._getOption(CONTAINER_BACKGROUND_COLOR, true);\r\n        if (!sliderMarkerOptions.format && !argRange.isEmpty()) {\r\n            if (doNotSnap && (0, _type2.isNumeric)(scaleOptions.startValue)) {\r\n                sliderMarkerOptions.format = {\r\n                    type: \"fixedPoint\",\r\n                    precision: getPrecisionForSlider(startValue, endValue, screenDelta)\r\n                }\r\n            }\r\n            if (isValueTypeDatetime && !isTypeDiscrete) {\r\n                if ((0, _type2.isDefined)(minorTickInterval) && 0 !== minorTickInterval) {\r\n                    interval = getMinorTickIntervalUnit(tickInterval, minorTickInterval, doNotSnap)\r\n                }\r\n                if (!scaleOptions.marker.visible) {\r\n                    if ((0, _type2.isDefined)(startValue) && (0, _type2.isDefined)(endValue)) {\r\n                        sliderMarkerOptions.format = _format_helper2.default.getDateFormatByTickInterval(startValue, endValue, interval)\r\n                    }\r\n                } else {\r\n                    sliderMarkerOptions.format = (0, _date.getDateFormatByTickInterval)(interval)\r\n                }\r\n            }\r\n            if (isValueTypeDatetime && isTypeDiscrete && tickIntervalsInfo.ticks.length) {\r\n                sliderMarkerOptions.format = _format_helper2.default.getDateFormatByTicks(tickIntervalsInfo.ticks)\r\n            }\r\n        }\r\n        return sliderMarkerOptions\r\n    },\r\n    getValue: function() {\r\n        return (0, _utils.convertVisualRangeObject)(this._slidersController.getSelectedRange())\r\n    },\r\n    setValue: function(value, e) {\r\n        var current;\r\n        var visualRange = (0, _utils.getVizRangeObject)(value);\r\n        if (!this._isUpdating && value) {\r\n            this._validateRange(visualRange.startValue, visualRange.endValue);\r\n            current = this._slidersController.getSelectedRange();\r\n            if (!current || current.startValue !== visualRange.startValue || current.endValue !== visualRange.endValue) {\r\n                this._slidersController.setSelectedRange((0, _utils.getVizRangeObject)(value), e)\r\n            }\r\n        }\r\n    },\r\n    _setContentSize: function() {\r\n        this.__isResizing = 2 === this._changes.count();\r\n        this.callBase.apply(this, arguments)\r\n    }\r\n});\r\n(0, _iterator.each)([\"selectedRangeColor\", \"containerBackgroundColor\", \"sliderMarker\", \"sliderHandle\", \"shutter\", OPTION_BACKGROUND, \"behavior\", \"chart\", \"indent\"], function(_, name) {\r\n    dxRangeSelector.prototype._optionChangesMap[name] = \"MOSTLY_TOTAL\"\r\n});\r\n\r\nfunction prepareAxisOptions(scaleOptions, isCompactMode, height, axisPosition) {\r\n    scaleOptions.marker.label.font = scaleOptions.label.font;\r\n    scaleOptions.color = scaleOptions.marker.color = scaleOptions.tick.color;\r\n    scaleOptions.opacity = scaleOptions.marker.opacity = scaleOptions.tick.opacity;\r\n    scaleOptions.width = scaleOptions.marker.width = scaleOptions.tick.width;\r\n    scaleOptions.placeholderSize = (scaleOptions.placeholderHeight || 0) + axisPosition;\r\n    scaleOptions.argumentType = scaleOptions.valueType;\r\n    scaleOptions.visible = isCompactMode;\r\n    scaleOptions.isHorizontal = true;\r\n    scaleOptions.calculateMinors = true;\r\n    scaleOptions.semiDiscreteInterval = scaleOptions.minRange;\r\n    if (!isCompactMode) {\r\n        scaleOptions.minorTick.length = scaleOptions.tick.length = height\r\n    }\r\n    scaleOptions.label.indentFromAxis = scaleOptions.label.topIndent + axisPosition;\r\n    return scaleOptions\r\n}\r\n\r\nfunction createDateMarkersEvent(scaleOptions, markerTrackers, setSelectedRange) {\r\n    (0, _iterator.each)(markerTrackers, function(_, value) {\r\n        value.on(\"dxpointerdown\", onPointerDown)\r\n    });\r\n\r\n    function onPointerDown(e) {\r\n        var range = e.target.range;\r\n        var minRange = scaleOptions.minRange ? (0, _date.addInterval)(range.startValue, scaleOptions.minRange) : void 0;\r\n        var maxRange = scaleOptions.maxRange ? (0, _date.addInterval)(range.startValue, scaleOptions.maxRange) : void 0;\r\n        if (!(minRange && minRange > range.endValue || maxRange && maxRange < range.endValue)) {\r\n            setSelectedRange(range, e)\r\n        }\r\n    }\r\n}\r\n\r\nfunction getShiftDirection() {\r\n    return 1\r\n}\r\n\r\nfunction getTickStartPositionShift(length) {\r\n    return length % 2 === 1 ? -_floor(length / 2) : -length / 2\r\n}\r\n\r\nfunction AxisWrapper(params) {\r\n    var that = this;\r\n    that._axis = new _base_axis2.default.Axis({\r\n        renderer: params.renderer,\r\n        axesContainerGroup: params.root,\r\n        scaleBreaksGroup: params.scaleBreaksGroup,\r\n        incidentOccurred: params.incidentOccurred,\r\n        axisType: \"xyAxes\",\r\n        drawingType: \"linear\",\r\n        widgetClass: \"dxrs\",\r\n        axisClass: \"range-selector\",\r\n        isArgumentAxis: true\r\n    });\r\n    that._updateSelectedRangeCallback = params.updateSelectedRange;\r\n    that._axis.getAxisSharpDirection = that._axis.getSharpDirectionByCoords = getShiftDirection;\r\n    that._axis.getTickStartPositionShift = getTickStartPositionShift\r\n}\r\nAxisWrapper.prototype = {\r\n    constructor: AxisWrapper,\r\n    dispose: function() {\r\n        this._axis.dispose()\r\n    },\r\n    calculateInterval: function(value, prevValue) {\r\n        return this._axis.calculateInterval(value, prevValue)\r\n    },\r\n    update: function(options, isCompactMode, canvas, businessRange, seriesDataSource) {\r\n        var axis = this._axis;\r\n        axis.updateOptions(prepareAxisOptions(options, isCompactMode, canvas.height, canvas.height / 2 - _ceil(options.width / 2)));\r\n        axis.validate();\r\n        axis.setBusinessRange(businessRange, true);\r\n        if (void 0 !== seriesDataSource && seriesDataSource.isShowChart()) {\r\n            axis.setMarginOptions(seriesDataSource.getMarginOptions(canvas))\r\n        }\r\n        axis.draw(canvas);\r\n        axis.shift({\r\n            left: 0,\r\n            bottom: -canvas.height / 2 + canvas.top\r\n        });\r\n        if (axis.getMarkerTrackers()) {\r\n            createDateMarkersEvent(options, axis.getMarkerTrackers(), this._updateSelectedRangeCallback)\r\n        }\r\n        axis.drawScaleBreaks({\r\n            start: canvas.top,\r\n            end: canvas.top + canvas.height\r\n        })\r\n    },\r\n    visualRange: function() {},\r\n    getViewport: function() {\r\n        return {}\r\n    },\r\n    allScaleSelected: function(value) {\r\n        var _this$_axis$visualRan = this._axis.visualRange(),\r\n            startValue = _this$_axis$visualRan.startValue,\r\n            endValue = _this$_axis$visualRan.endValue;\r\n        return {\r\n            startValue: value[0].valueOf() === startValue.valueOf(),\r\n            endValue: value[1].valueOf() === endValue.valueOf()\r\n        }\r\n    },\r\n    getOptions: function() {\r\n        return this._axis.getOptions() || {}\r\n    }\r\n};\r\n[\"setMarginOptions\", \"getFullTicks\", \"updateCanvas\", \"updateOptions\", \"getAggregationInfo\", \"getTranslator\", \"getVisualRangeLength\", \"getVisibleArea\", \"getMarginOptions\"].forEach(function(methodName) {\r\n    AxisWrapper.prototype[methodName] = function() {\r\n        var axis = this._axis;\r\n        return axis[methodName].apply(axis, arguments)\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxRangeSelector\", dxRangeSelector);\r\nmodule.exports = dxRangeSelector;\r\ndxRangeSelector.addPlugin(_export.plugin);\r\ndxRangeSelector.addPlugin(_title.plugin);\r\ndxRangeSelector.addPlugin(_loading_indicator.plugin);\r\ndxRangeSelector.addPlugin(_data_source.plugin);\r\n"]},"metadata":{},"sourceType":"module"}