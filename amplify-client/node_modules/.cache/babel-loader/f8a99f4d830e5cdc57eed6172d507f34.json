{"ast":null,"code":"/**\r\n * DevExtreme (ui/shared/filtering.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar inArray = require(\"../../core/utils/array\").inArray;\n\nvar iteratorUtils = require(\"../../core/utils/iterator\");\n\nvar DEFAULT_DATE_INTERVAL = [\"year\", \"month\", \"day\"];\nvar DEFAULT_DATETIME_INTERVAL = [\"year\", \"month\", \"day\", \"hour\", \"minute\"];\n\nmodule.exports = function () {\n  var getFilterSelector = function getFilterSelector(column, target) {\n    var selector = column.dataField || column.selector;\n\n    if (\"search\" === target) {\n      selector = column.displayField || column.calculateDisplayValue || selector;\n    }\n\n    return selector;\n  };\n\n  var isZeroTime = function isZeroTime(date) {\n    return date.getHours() + date.getMinutes() + date.getSeconds() + date.getMilliseconds() < 1;\n  };\n\n  var isDateType = function isDateType(dataType) {\n    return \"date\" === dataType || \"datetime\" === dataType;\n  };\n\n  var getDateValues = function getDateValues(dateValue) {\n    if (typeUtils.isDate(dateValue)) {\n      return [dateValue.getFullYear(), dateValue.getMonth(), dateValue.getDate(), dateValue.getHours(), dateValue.getMinutes(), dateValue.getSeconds()];\n    }\n\n    return iteratorUtils.map((\"\" + dateValue).split(\"/\"), function (value, index) {\n      return 1 === index ? Number(value) - 1 : Number(value);\n    });\n  };\n\n  var getFilterExpressionByRange = function getFilterExpressionByRange(filterValue, target) {\n    var column = this;\n    var endFilterValue;\n    var startFilterExpression;\n    var endFilterExpression;\n    var selector = getFilterSelector(column, target);\n\n    if (Array.isArray(filterValue) && typeUtils.isDefined(filterValue[0]) && typeUtils.isDefined(filterValue[1])) {\n      startFilterExpression = [selector, \">=\", filterValue[0]];\n      endFilterExpression = [selector, \"<=\", filterValue[1]];\n\n      if (isDateType(column.dataType) && isZeroTime(filterValue[1])) {\n        endFilterValue = new Date(filterValue[1].getTime());\n\n        if (\"date\" === column.dataType) {\n          endFilterValue.setDate(filterValue[1].getDate() + 1);\n        }\n\n        endFilterExpression = [selector, \"<\", endFilterValue];\n      }\n\n      return [startFilterExpression, \"and\", endFilterExpression];\n    }\n  };\n\n  var getFilterExpressionForDate = function getFilterExpressionForDate(filterValue, selectedFilterOperation, target) {\n    var column = this;\n    var dateStart;\n    var dateEnd;\n    var dateInterval;\n    var values = getDateValues(filterValue);\n    var selector = getFilterSelector(column, target);\n\n    if (\"headerFilter\" === target) {\n      dateInterval = module.exports.getGroupInterval(column)[values.length - 1];\n    } else {\n      if (\"datetime\" === column.dataType) {\n        dateInterval = \"minute\";\n      }\n    }\n\n    switch (dateInterval) {\n      case \"year\":\n        dateStart = new Date(values[0], 0, 1);\n        dateEnd = new Date(values[0] + 1, 0, 1);\n        break;\n\n      case \"month\":\n        dateStart = new Date(values[0], values[1], 1);\n        dateEnd = new Date(values[0], values[1] + 1, 1);\n        break;\n\n      case \"quarter\":\n        dateStart = new Date(values[0], 3 * values[1], 1);\n        dateEnd = new Date(values[0], 3 * values[1] + 3, 1);\n        break;\n\n      case \"hour\":\n        dateStart = new Date(values[0], values[1], values[2], values[3]);\n        dateEnd = new Date(values[0], values[1], values[2], values[3] + 1);\n        break;\n\n      case \"minute\":\n        dateStart = new Date(values[0], values[1], values[2], values[3], values[4]);\n        dateEnd = new Date(values[0], values[1], values[2], values[3], values[4] + 1);\n        break;\n\n      case \"second\":\n        dateStart = new Date(values[0], values[1], values[2], values[3], values[4], values[5]);\n        dateEnd = new Date(values[0], values[1], values[2], values[3], values[4], values[5] + 1);\n        break;\n\n      default:\n        dateStart = new Date(values[0], values[1], values[2]);\n        dateEnd = new Date(values[0], values[1], values[2] + 1);\n    }\n\n    switch (selectedFilterOperation) {\n      case \"<\":\n        return [selector, \"<\", dateStart];\n\n      case \"<=\":\n        return [selector, \"<\", dateEnd];\n\n      case \">\":\n        return [selector, \">=\", dateEnd];\n\n      case \">=\":\n        return [selector, \">=\", dateStart];\n\n      case \"<>\":\n        return [[selector, \"<\", dateStart], \"or\", [selector, \">=\", dateEnd]];\n\n      default:\n        return [[selector, \">=\", dateStart], \"and\", [selector, \"<\", dateEnd]];\n    }\n  };\n\n  var getFilterExpressionForNumber = function getFilterExpressionForNumber(filterValue, selectedFilterOperation, target) {\n    var column = this;\n    var selector = getFilterSelector(column, target);\n    var groupInterval = module.exports.getGroupInterval(column);\n\n    if (\"headerFilter\" === target && groupInterval && typeUtils.isDefined(filterValue)) {\n      var values = (\"\" + filterValue).split(\"/\");\n      var value = Number(values[values.length - 1]);\n      var interval;\n      var startFilterValue;\n      var endFilterValue;\n      interval = groupInterval[values.length - 1];\n      startFilterValue = [selector, \">=\", value];\n      endFilterValue = [selector, \"<\", value + interval];\n      var condition = [startFilterValue, \"and\", endFilterValue];\n      return condition;\n    }\n\n    return [selector, selectedFilterOperation || \"=\", filterValue];\n  };\n\n  return {\n    defaultCalculateFilterExpression: function defaultCalculateFilterExpression(filterValue, selectedFilterOperation, target) {\n      var column = this;\n      var selector = getFilterSelector(column, target);\n      var isSearchByDisplayValue = column.calculateDisplayValue && \"search\" === target;\n      var dataType = isSearchByDisplayValue && column.lookup && column.lookup.dataType || column.dataType;\n      var filter = null;\n\n      if ((\"headerFilter\" === target || \"filterBuilder\" === target) && null === filterValue) {\n        filter = [selector, selectedFilterOperation || \"=\", null];\n\n        if (\"string\" === dataType) {\n          filter = [filter, \"=\" === selectedFilterOperation ? \"or\" : \"and\", [selector, selectedFilterOperation || \"=\", \"\"]];\n        }\n      } else {\n        if (\"string\" === dataType && (!column.lookup || isSearchByDisplayValue)) {\n          filter = [selector, selectedFilterOperation || \"contains\", filterValue];\n        } else {\n          if (\"between\" === selectedFilterOperation) {\n            return getFilterExpressionByRange.apply(column, [filterValue, target]);\n          } else {\n            if (isDateType(dataType) && typeUtils.isDefined(filterValue)) {\n              return getFilterExpressionForDate.apply(column, arguments);\n            } else {\n              if (\"number\" === dataType) {\n                return getFilterExpressionForNumber.apply(column, arguments);\n              } else {\n                if (\"object\" !== dataType) {\n                  filter = [selector, selectedFilterOperation || \"=\", filterValue];\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return filter;\n    },\n    getGroupInterval: function getGroupInterval(column) {\n      var index;\n      var result = [];\n      var dateIntervals = [\"year\", \"month\", \"day\", \"hour\", \"minute\", \"second\"];\n      var groupInterval = column.headerFilter && column.headerFilter.groupInterval;\n      var interval = \"quarter\" === groupInterval ? \"month\" : groupInterval;\n\n      if (isDateType(column.dataType) && null !== groupInterval) {\n        result = \"datetime\" === column.dataType ? DEFAULT_DATETIME_INTERVAL : DEFAULT_DATE_INTERVAL;\n        index = inArray(interval, dateIntervals);\n\n        if (index >= 0) {\n          result = dateIntervals.slice(0, index);\n          result.push(groupInterval);\n          return result;\n        }\n\n        return result;\n      } else {\n        if (typeUtils.isDefined(groupInterval)) {\n          return Array.isArray(groupInterval) ? groupInterval : [groupInterval];\n        }\n      }\n    }\n  };\n}();","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/shared/filtering.js"],"names":["typeUtils","require","inArray","iteratorUtils","DEFAULT_DATE_INTERVAL","DEFAULT_DATETIME_INTERVAL","module","getFilterSelector","selector","column","isZeroTime","date","isDateType","getDateValues","dateValue","Number","getFilterExpressionByRange","Array","filterValue","startFilterExpression","endFilterExpression","endFilterValue","getFilterExpressionForDate","values","dateInterval","dateStart","dateEnd","getFilterExpressionForNumber","groupInterval","value","interval","startFilterValue","condition","selectedFilterOperation","defaultCalculateFilterExpression","isSearchByDisplayValue","dataType","filter","getGroupInterval","result","dateIntervals","index"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/shared/filtering.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar inArray = require(\"../../core/utils/array\").inArray;\r\nvar iteratorUtils = require(\"../../core/utils/iterator\");\r\nvar DEFAULT_DATE_INTERVAL = [\"year\", \"month\", \"day\"];\r\nvar DEFAULT_DATETIME_INTERVAL = [\"year\", \"month\", \"day\", \"hour\", \"minute\"];\r\nmodule.exports = function() {\r\n    var getFilterSelector = function(column, target) {\r\n        var selector = column.dataField || column.selector;\r\n        if (\"search\" === target) {\r\n            selector = column.displayField || column.calculateDisplayValue || selector\r\n        }\r\n        return selector\r\n    };\r\n    var isZeroTime = function(date) {\r\n        return date.getHours() + date.getMinutes() + date.getSeconds() + date.getMilliseconds() < 1\r\n    };\r\n    var isDateType = function(dataType) {\r\n        return \"date\" === dataType || \"datetime\" === dataType\r\n    };\r\n    var getDateValues = function(dateValue) {\r\n        if (typeUtils.isDate(dateValue)) {\r\n            return [dateValue.getFullYear(), dateValue.getMonth(), dateValue.getDate(), dateValue.getHours(), dateValue.getMinutes(), dateValue.getSeconds()]\r\n        }\r\n        return iteratorUtils.map((\"\" + dateValue).split(\"/\"), function(value, index) {\r\n            return 1 === index ? Number(value) - 1 : Number(value)\r\n        })\r\n    };\r\n    var getFilterExpressionByRange = function(filterValue, target) {\r\n        var column = this;\r\n        var endFilterValue;\r\n        var startFilterExpression;\r\n        var endFilterExpression;\r\n        var selector = getFilterSelector(column, target);\r\n        if (Array.isArray(filterValue) && typeUtils.isDefined(filterValue[0]) && typeUtils.isDefined(filterValue[1])) {\r\n            startFilterExpression = [selector, \">=\", filterValue[0]];\r\n            endFilterExpression = [selector, \"<=\", filterValue[1]];\r\n            if (isDateType(column.dataType) && isZeroTime(filterValue[1])) {\r\n                endFilterValue = new Date(filterValue[1].getTime());\r\n                if (\"date\" === column.dataType) {\r\n                    endFilterValue.setDate(filterValue[1].getDate() + 1)\r\n                }\r\n                endFilterExpression = [selector, \"<\", endFilterValue]\r\n            }\r\n            return [startFilterExpression, \"and\", endFilterExpression]\r\n        }\r\n    };\r\n    var getFilterExpressionForDate = function(filterValue, selectedFilterOperation, target) {\r\n        var column = this;\r\n        var dateStart;\r\n        var dateEnd;\r\n        var dateInterval;\r\n        var values = getDateValues(filterValue);\r\n        var selector = getFilterSelector(column, target);\r\n        if (\"headerFilter\" === target) {\r\n            dateInterval = module.exports.getGroupInterval(column)[values.length - 1]\r\n        } else {\r\n            if (\"datetime\" === column.dataType) {\r\n                dateInterval = \"minute\"\r\n            }\r\n        }\r\n        switch (dateInterval) {\r\n            case \"year\":\r\n                dateStart = new Date(values[0], 0, 1);\r\n                dateEnd = new Date(values[0] + 1, 0, 1);\r\n                break;\r\n            case \"month\":\r\n                dateStart = new Date(values[0], values[1], 1);\r\n                dateEnd = new Date(values[0], values[1] + 1, 1);\r\n                break;\r\n            case \"quarter\":\r\n                dateStart = new Date(values[0], 3 * values[1], 1);\r\n                dateEnd = new Date(values[0], 3 * values[1] + 3, 1);\r\n                break;\r\n            case \"hour\":\r\n                dateStart = new Date(values[0], values[1], values[2], values[3]);\r\n                dateEnd = new Date(values[0], values[1], values[2], values[3] + 1);\r\n                break;\r\n            case \"minute\":\r\n                dateStart = new Date(values[0], values[1], values[2], values[3], values[4]);\r\n                dateEnd = new Date(values[0], values[1], values[2], values[3], values[4] + 1);\r\n                break;\r\n            case \"second\":\r\n                dateStart = new Date(values[0], values[1], values[2], values[3], values[4], values[5]);\r\n                dateEnd = new Date(values[0], values[1], values[2], values[3], values[4], values[5] + 1);\r\n                break;\r\n            default:\r\n                dateStart = new Date(values[0], values[1], values[2]);\r\n                dateEnd = new Date(values[0], values[1], values[2] + 1)\r\n        }\r\n        switch (selectedFilterOperation) {\r\n            case \"<\":\r\n                return [selector, \"<\", dateStart];\r\n            case \"<=\":\r\n                return [selector, \"<\", dateEnd];\r\n            case \">\":\r\n                return [selector, \">=\", dateEnd];\r\n            case \">=\":\r\n                return [selector, \">=\", dateStart];\r\n            case \"<>\":\r\n                return [\r\n                    [selector, \"<\", dateStart], \"or\", [selector, \">=\", dateEnd]\r\n                ];\r\n            default:\r\n                return [\r\n                    [selector, \">=\", dateStart], \"and\", [selector, \"<\", dateEnd]\r\n                ]\r\n        }\r\n    };\r\n    var getFilterExpressionForNumber = function(filterValue, selectedFilterOperation, target) {\r\n        var column = this;\r\n        var selector = getFilterSelector(column, target);\r\n        var groupInterval = module.exports.getGroupInterval(column);\r\n        if (\"headerFilter\" === target && groupInterval && typeUtils.isDefined(filterValue)) {\r\n            var values = (\"\" + filterValue).split(\"/\");\r\n            var value = Number(values[values.length - 1]);\r\n            var interval;\r\n            var startFilterValue;\r\n            var endFilterValue;\r\n            interval = groupInterval[values.length - 1];\r\n            startFilterValue = [selector, \">=\", value];\r\n            endFilterValue = [selector, \"<\", value + interval];\r\n            var condition = [startFilterValue, \"and\", endFilterValue];\r\n            return condition\r\n        }\r\n        return [selector, selectedFilterOperation || \"=\", filterValue]\r\n    };\r\n    return {\r\n        defaultCalculateFilterExpression: function(filterValue, selectedFilterOperation, target) {\r\n            var column = this;\r\n            var selector = getFilterSelector(column, target);\r\n            var isSearchByDisplayValue = column.calculateDisplayValue && \"search\" === target;\r\n            var dataType = isSearchByDisplayValue && column.lookup && column.lookup.dataType || column.dataType;\r\n            var filter = null;\r\n            if ((\"headerFilter\" === target || \"filterBuilder\" === target) && null === filterValue) {\r\n                filter = [selector, selectedFilterOperation || \"=\", null];\r\n                if (\"string\" === dataType) {\r\n                    filter = [filter, \"=\" === selectedFilterOperation ? \"or\" : \"and\", [selector, selectedFilterOperation || \"=\", \"\"]]\r\n                }\r\n            } else {\r\n                if (\"string\" === dataType && (!column.lookup || isSearchByDisplayValue)) {\r\n                    filter = [selector, selectedFilterOperation || \"contains\", filterValue]\r\n                } else {\r\n                    if (\"between\" === selectedFilterOperation) {\r\n                        return getFilterExpressionByRange.apply(column, [filterValue, target])\r\n                    } else {\r\n                        if (isDateType(dataType) && typeUtils.isDefined(filterValue)) {\r\n                            return getFilterExpressionForDate.apply(column, arguments)\r\n                        } else {\r\n                            if (\"number\" === dataType) {\r\n                                return getFilterExpressionForNumber.apply(column, arguments)\r\n                            } else {\r\n                                if (\"object\" !== dataType) {\r\n                                    filter = [selector, selectedFilterOperation || \"=\", filterValue]\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return filter\r\n        },\r\n        getGroupInterval: function(column) {\r\n            var index;\r\n            var result = [];\r\n            var dateIntervals = [\"year\", \"month\", \"day\", \"hour\", \"minute\", \"second\"];\r\n            var groupInterval = column.headerFilter && column.headerFilter.groupInterval;\r\n            var interval = \"quarter\" === groupInterval ? \"month\" : groupInterval;\r\n            if (isDateType(column.dataType) && null !== groupInterval) {\r\n                result = \"datetime\" === column.dataType ? DEFAULT_DATETIME_INTERVAL : DEFAULT_DATE_INTERVAL;\r\n                index = inArray(interval, dateIntervals);\r\n                if (index >= 0) {\r\n                    result = dateIntervals.slice(0, index);\r\n                    result.push(groupInterval);\r\n                    return result\r\n                }\r\n                return result\r\n            } else {\r\n                if (typeUtils.isDefined(groupInterval)) {\r\n                    return Array.isArray(groupInterval) ? groupInterval : [groupInterval]\r\n                }\r\n            }\r\n        }\r\n    }\r\n}();\r\n"]},"metadata":{},"sourceType":"module"}