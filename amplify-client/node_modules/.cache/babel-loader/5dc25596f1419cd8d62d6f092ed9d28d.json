{"ast":null,"code":"/**\r\n * DevExtreme (viz/chart_components/base_chart.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar commonUtils = require(\"../../core/utils/common\");\n\nvar noop = commonUtils.noop;\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar iteratorModule = require(\"../../core/utils/iterator\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar inArray = require(\"../../core/utils/array\").inArray;\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar BaseWidget = require(\"../core/base_widget\");\n\nvar coreDataUtils = require(\"../../core/utils/data\");\n\nvar legendModule = require(\"../components/legend\");\n\nvar dataValidatorModule = require(\"../components/data_validator\");\n\nvar seriesModule = require(\"../series/base_series\");\n\nvar chartThemeManagerModule = require(\"../components/chart_theme_manager\");\n\nvar LayoutManagerModule = require(\"./layout_manager\");\n\nvar trackerModule = require(\"./tracker\");\n\nvar REINIT_REFRESH_ACTION = \"_reinit\";\nvar REINIT_DATA_SOURCE_REFRESH_ACTION = \"_updateDataSource\";\nvar DATA_INIT_REFRESH_ACTION = \"_dataInit\";\nvar FORCE_RENDER_REFRESH_ACTION = \"_forceRender\";\nvar RESIZE_REFRESH_ACTION = \"_resize\";\nvar ACTIONS_BY_PRIORITY = [REINIT_REFRESH_ACTION, REINIT_DATA_SOURCE_REFRESH_ACTION, DATA_INIT_REFRESH_ACTION, FORCE_RENDER_REFRESH_ACTION, RESIZE_REFRESH_ACTION];\n\nvar vizUtils = require(\"../core/utils\");\n\nvar _map = vizUtils.map;\nvar _each = iteratorModule.each;\nvar _reverseEach = iteratorModule.reverseEach;\nvar _isArray = Array.isArray;\nvar _isDefined = typeUtils.isDefined;\nvar _setCanvasValues = vizUtils.setCanvasValues;\nvar DEFAULT_OPACITY = .3;\nvar REFRESH_SERIES_DATA_INIT_ACTION_OPTIONS = [\"series\", \"commonSeriesSettings\", \"dataPrepareSettings\", \"seriesSelectionMode\", \"pointSelectionMode\", \"synchronizeMultiAxes\", \"resolveLabelsOverlapping\"];\nvar REFRESH_SERIES_FAMILIES_ACTION_OPTIONS = [\"equalBarWidth\", \"minBubbleSize\", \"maxBubbleSize\", \"barWidth\", \"barGroupPadding\", \"barGroupWidth\", \"negativesAsZeroes\", \"negativesAsZeros\"];\nvar FORCE_RENDER_REFRESH_ACTION_OPTIONS = [\"adaptiveLayout\", \"crosshair\", \"resolveLabelOverlapping\", \"adjustOnZoom\", \"zoomingMode\", \"scrollingMode\", \"stickyHovering\"];\nvar FONT = \"font\";\n\nfunction checkHeightRollingStock(rollingStocks, stubCanvas) {\n  var canvasSize = stubCanvas.end - stubCanvas.start;\n  var size = 0;\n  rollingStocks.forEach(function (rollingStock) {\n    size += rollingStock.getBoundingRect().width;\n  });\n\n  while (canvasSize < size) {\n    size -= findAndKillSmallValue(rollingStocks);\n  }\n}\n\nfunction findAndKillSmallValue(rollingStocks) {\n  var smallestObject;\n  var width;\n  smallestObject = rollingStocks.reduce(function (prev, rollingStock, index) {\n    if (!rollingStock) {\n      return prev;\n    }\n\n    var value = rollingStock.value();\n    return value < prev.value ? {\n      value: value,\n      rollingStock: rollingStock,\n      index: index\n    } : prev;\n  }, {\n    rollingStock: void 0,\n    value: 1 / 0,\n    index: void 0\n  });\n  smallestObject.rollingStock.getLabels()[0].draw(false);\n  width = smallestObject.rollingStock.getBoundingRect().width;\n  rollingStocks[smallestObject.index] = null;\n  return width;\n}\n\nfunction checkStackOverlap(rollingStocks) {\n  var i;\n  var j;\n  var iLength;\n  var jLength;\n  var overlap = false;\n\n  for (i = 0, iLength = rollingStocks.length - 1; i < iLength; i++) {\n    for (j = i + 1, jLength = rollingStocks.length; j < jLength; j++) {\n      if (i !== j && checkStacksOverlapping(rollingStocks[i], rollingStocks[j], true)) {\n        overlap = true;\n        break;\n      }\n    }\n\n    if (overlap) {\n      break;\n    }\n  }\n\n  return overlap;\n}\n\nfunction resolveLabelOverlappingInOneDirection(points, canvas, isRotated, shiftFunction) {\n  var customSorting = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : function () {\n    return 0;\n  };\n  var rollingStocks = [];\n  var stubCanvas = {\n    start: isRotated ? canvas.left : canvas.top,\n    end: isRotated ? canvas.width - canvas.right : canvas.height - canvas.bottom\n  };\n  var hasStackedSeries = false;\n  points.forEach(function (p) {\n    if (!p) {\n      return;\n    }\n\n    hasStackedSeries = hasStackedSeries || p.series.isStackedSeries() || p.series.isFullStackedSeries();\n    p.getLabels().forEach(function (l) {\n      l.isVisible() && rollingStocks.push(new RollingStock(l, isRotated, shiftFunction));\n    });\n  });\n\n  if (hasStackedSeries) {\n    !isRotated && rollingStocks.reverse();\n  } else {\n    var rollingStocksTmp = rollingStocks.slice();\n    rollingStocks.sort(function (a, b) {\n      return customSorting(a, b) || a.getInitialPosition() - b.getInitialPosition() || rollingStocksTmp.indexOf(a) - rollingStocksTmp.indexOf(b);\n    });\n  }\n\n  if (!checkStackOverlap(rollingStocks)) {\n    return false;\n  }\n\n  checkHeightRollingStock(rollingStocks, stubCanvas);\n  prepareOverlapStacks(rollingStocks);\n  rollingStocks.reverse();\n  moveRollingStock(rollingStocks, stubCanvas);\n  return true;\n}\n\nfunction checkStacksOverlapping(firstRolling, secondRolling, inTwoSides) {\n  if (!firstRolling || !secondRolling) {\n    return;\n  }\n\n  var firstRect = firstRolling.getBoundingRect();\n  var secondRect = secondRolling.getBoundingRect();\n  var oppositeOverlapping = inTwoSides ? firstRect.oppositeStart <= secondRect.oppositeStart && firstRect.oppositeEnd > secondRect.oppositeStart || secondRect.oppositeStart <= firstRect.oppositeStart && secondRect.oppositeEnd > firstRect.oppositeStart : true;\n  return firstRect.end > secondRect.start && oppositeOverlapping;\n}\n\nfunction prepareOverlapStacks(rollingStocks) {\n  var i;\n  var currentRollingStock;\n  var root;\n\n  for (i = 0; i < rollingStocks.length - 1; i++) {\n    currentRollingStock = root || rollingStocks[i];\n\n    if (checkStacksOverlapping(currentRollingStock, rollingStocks[i + 1])) {\n      currentRollingStock.toChain(rollingStocks[i + 1]);\n      rollingStocks[i + 1] = null;\n      root = currentRollingStock;\n    } else {\n      root = rollingStocks[i + 1] || currentRollingStock;\n    }\n  }\n}\n\nfunction moveRollingStock(rollingStocks, canvas) {\n  var i;\n  var j;\n  var currentRollingStock;\n  var nextRollingStock;\n  var currentBBox;\n  var nextBBox;\n\n  for (i = 0; i < rollingStocks.length; i++) {\n    currentRollingStock = rollingStocks[i];\n\n    if (rollingStocksIsOut(currentRollingStock, canvas)) {\n      currentBBox = currentRollingStock.getBoundingRect();\n\n      for (j = i + 1; j < rollingStocks.length; j++) {\n        nextRollingStock = rollingStocks[j];\n\n        if (!nextRollingStock) {\n          continue;\n        }\n\n        nextBBox = nextRollingStock.getBoundingRect();\n\n        if (nextBBox.end > currentBBox.start - (currentBBox.end - canvas.end)) {\n          nextRollingStock.toChain(currentRollingStock);\n          rollingStocks[i] = currentRollingStock = null;\n          break;\n        }\n      }\n    }\n\n    currentRollingStock && currentRollingStock.setRollingStockInCanvas(canvas);\n  }\n}\n\nfunction rollingStocksIsOut(rollingStock, canvas) {\n  return rollingStock && rollingStock.getBoundingRect().end > canvas.end;\n}\n\nfunction RollingStock(label, isRotated, shiftFunction) {\n  var bBox = label.getBoundingRect();\n  var x = bBox.x;\n  var y = bBox.y;\n  var endX = bBox.x + bBox.width;\n  var endY = bBox.y + bBox.height;\n  this.labels = [label];\n  this.shiftFunction = shiftFunction;\n  this._bBox = {\n    start: isRotated ? x : y,\n    width: isRotated ? bBox.width : bBox.height,\n    end: isRotated ? endX : endY,\n    oppositeStart: isRotated ? y : x,\n    oppositeEnd: isRotated ? endY : endX\n  };\n  this._initialPosition = isRotated ? bBox.x : bBox.y;\n  return this;\n}\n\nRollingStock.prototype = {\n  toChain: function toChain(nextRollingStock) {\n    var nextRollingStockBBox = nextRollingStock.getBoundingRect();\n    nextRollingStock.shift(nextRollingStockBBox.start - this._bBox.end);\n\n    this._changeBoxWidth(nextRollingStockBBox.width);\n\n    this.labels = this.labels.concat(nextRollingStock.labels);\n  },\n  getBoundingRect: function getBoundingRect() {\n    return this._bBox;\n  },\n  shift: function shift(shiftLength) {\n    var shiftFunction = this.shiftFunction;\n\n    _each(this.labels, function (index, label) {\n      var bBox = label.getBoundingRect();\n      var coords = shiftFunction(bBox, shiftLength);\n\n      if (!label.hideInsideLabel(coords)) {\n        label.shift(coords.x, coords.y);\n      }\n    });\n\n    this._bBox.end -= shiftLength;\n    this._bBox.start -= shiftLength;\n  },\n  setRollingStockInCanvas: function setRollingStockInCanvas(canvas) {\n    if (this._bBox.end > canvas.end) {\n      this.shift(this._bBox.end - canvas.end);\n    }\n  },\n  getLabels: function getLabels() {\n    return this.labels;\n  },\n  value: function value() {\n    return this.labels[0].getData().value;\n  },\n  getInitialPosition: function getInitialPosition() {\n    return this._initialPosition;\n  },\n  _changeBoxWidth: function _changeBoxWidth(width) {\n    this._bBox.end += width;\n    this._bBox.width += width;\n  }\n};\n\nfunction getLegendFields(name) {\n  return {\n    nameField: name + \"Name\",\n    colorField: name + \"Color\",\n    indexField: name + \"Index\"\n  };\n}\n\nfunction getLegendSettings(legendDataField) {\n  var formatObjectFields = getLegendFields(legendDataField);\n  return {\n    getFormatObject: function getFormatObject(data) {\n      var res = {};\n      res[formatObjectFields.indexField] = data.id;\n      res[formatObjectFields.colorField] = data.states.normal.fill;\n      res[formatObjectFields.nameField] = data.text;\n      return res;\n    },\n    textField: formatObjectFields.nameField\n  };\n}\n\nfunction checkOverlapping(firstRect, secondRect) {\n  return (firstRect.x <= secondRect.x && secondRect.x <= firstRect.x + firstRect.width || firstRect.x >= secondRect.x && firstRect.x <= secondRect.x + secondRect.width) && (firstRect.y <= secondRect.y && secondRect.y <= firstRect.y + firstRect.height || firstRect.y >= secondRect.y && firstRect.y <= secondRect.y + secondRect.height);\n}\n\nvar overlapping = {\n  resolveLabelOverlappingInOneDirection: resolveLabelOverlappingInOneDirection\n};\nvar BaseChart = BaseWidget.inherit({\n  _eventsMap: {\n    onSeriesClick: {\n      name: \"seriesClick\"\n    },\n    onPointClick: {\n      name: \"pointClick\"\n    },\n    onArgumentAxisClick: {\n      name: \"argumentAxisClick\"\n    },\n    onLegendClick: {\n      name: \"legendClick\"\n    },\n    onSeriesSelectionChanged: {\n      name: \"seriesSelectionChanged\"\n    },\n    onPointSelectionChanged: {\n      name: \"pointSelectionChanged\"\n    },\n    onSeriesHoverChanged: {\n      name: \"seriesHoverChanged\"\n    },\n    onPointHoverChanged: {\n      name: \"pointHoverChanged\"\n    },\n    onDone: {\n      name: \"done\"\n    },\n    onZoomStart: {\n      name: \"zoomStart\"\n    },\n    onZoomEnd: {\n      name: \"zoomEnd\"\n    }\n  },\n  _fontFields: [\"legend.\" + FONT, \"legend.title.\" + FONT, \"legend.title.subtitle.\" + FONT, \"commonSeriesSettings.label.\" + FONT],\n  _rootClassPrefix: \"dxc\",\n  _rootClass: \"dxc-chart\",\n  _initialChanges: [\"INIT\"],\n  _themeDependentChanges: [\"REFRESH_SERIES_REINIT\"],\n  _getThemeManagerOptions: function _getThemeManagerOptions() {\n    var themeOptions = this.callBase.apply(this, arguments);\n    themeOptions.options = this.option();\n    return themeOptions;\n  },\n  _createThemeManager: function _createThemeManager() {\n    var chartOption = this.option();\n    var themeManager = new chartThemeManagerModule.ThemeManager(this._getThemeManagerOptions());\n    themeManager.setTheme(chartOption.theme, chartOption.rtlEnabled);\n    return themeManager;\n  },\n  _initCore: function _initCore() {\n    var that = this;\n    that._canvasClipRect = that._renderer.clipRect();\n\n    that._createHtmlStructure();\n\n    that._createLegend();\n\n    that._createTracker();\n\n    that._needHandleRenderComplete = true;\n    that.layoutManager = new LayoutManagerModule.LayoutManager();\n\n    that._createScrollBar();\n\n    eventsEngine.on(that._$element, \"contextmenu\", function (event) {\n      if (eventUtils.isTouchEvent(event) || eventUtils.isPointerEvent(event)) {\n        event.preventDefault();\n      }\n    });\n    eventsEngine.on(that._$element, \"MSHoldVisual\", function (event) {\n      event.preventDefault();\n    });\n  },\n  _getLayoutItems: noop,\n  _layoutManagerOptions: function _layoutManagerOptions() {\n    return this._themeManager.getOptions(\"adaptiveLayout\");\n  },\n  _reinit: function _reinit() {\n    var that = this;\n\n    _setCanvasValues(that._canvas);\n\n    that._reinitAxes();\n\n    that._requestChange([\"DATA_SOURCE\", \"DATA_INIT\", \"CORRECT_AXIS\", \"FULL_RENDER\"]);\n  },\n  _correctAxes: noop,\n  _createHtmlStructure: function _createHtmlStructure() {\n    var that = this;\n    var renderer = that._renderer;\n    var root = renderer.root;\n\n    var createConstantLinesGroup = function createConstantLinesGroup() {\n      return renderer.g().attr({\n        \"class\": \"dxc-constant-lines-group\"\n      }).linkOn(root, \"constant-lines\");\n    };\n\n    that._constantLinesGroup = {\n      dispose: function dispose() {\n        this.under.dispose();\n        this.above.dispose();\n      },\n      linkOff: function linkOff() {\n        this.under.linkOff();\n        this.above.linkOff();\n      },\n      clear: function clear() {\n        this.under.linkRemove().clear();\n        this.above.linkRemove().clear();\n      },\n      linkAppend: function linkAppend() {\n        this.under.linkAppend();\n        this.above.linkAppend();\n      }\n    };\n    that._backgroundRect = renderer.rect().attr({\n      fill: \"gray\",\n      opacity: 1e-4\n    }).append(root);\n    that._panesBackgroundGroup = renderer.g().attr({\n      \"class\": \"dxc-background\"\n    }).append(root);\n    that._stripsGroup = renderer.g().attr({\n      \"class\": \"dxc-strips-group\"\n    }).linkOn(root, \"strips\");\n    that._gridGroup = renderer.g().attr({\n      \"class\": \"dxc-grids-group\"\n    }).linkOn(root, \"grids\");\n    that._panesBorderGroup = renderer.g().attr({\n      \"class\": \"dxc-border\"\n    }).linkOn(root, \"border\");\n    that._axesGroup = renderer.g().attr({\n      \"class\": \"dxc-axes-group\"\n    }).linkOn(root, \"axes\");\n    that._labelAxesGroup = renderer.g().attr({\n      \"class\": \"dxc-strips-labels-group\"\n    }).linkOn(root, \"strips-labels\");\n    that._constantLinesGroup.under = createConstantLinesGroup();\n    that._seriesGroup = renderer.g().attr({\n      \"class\": \"dxc-series-group\"\n    }).linkOn(root, \"series\");\n    that._constantLinesGroup.above = createConstantLinesGroup();\n    that._scaleBreaksGroup = renderer.g().attr({\n      \"class\": \"dxc-scale-breaks\"\n    }).linkOn(root, \"scale-breaks\");\n    that._labelsGroup = renderer.g().attr({\n      \"class\": \"dxc-labels-group\"\n    }).linkOn(root, \"labels\");\n    that._crosshairCursorGroup = renderer.g().attr({\n      \"class\": \"dxc-crosshair-cursor\"\n    }).linkOn(root, \"crosshair\");\n    that._legendGroup = renderer.g().attr({\n      \"class\": \"dxc-legend\",\n      \"clip-path\": that._getCanvasClipRectID()\n    }).linkOn(root, \"legend\").linkAppend(root).enableLinks();\n    that._scrollBarGroup = renderer.g().attr({\n      \"class\": \"dxc-scroll-bar\"\n    }).linkOn(root, \"scroll-bar\");\n  },\n  _disposeObjectsInArray: function _disposeObjectsInArray(propName, fieldNames) {\n    _each(this[propName] || [], function (_, item) {\n      if (fieldNames && item) {\n        _each(fieldNames, function (_, field) {\n          item[field] && item[field].dispose();\n        });\n      } else {\n        item && item.dispose();\n      }\n    });\n\n    this[propName] = null;\n  },\n  _disposeCore: function _disposeCore() {\n    var that = this;\n\n    var disposeObject = function disposeObject(propName) {\n      if (that[propName]) {\n        that[propName].dispose();\n        that[propName] = null;\n      }\n    };\n\n    var unlinkGroup = function unlinkGroup(name) {\n      that[name].linkOff();\n    };\n\n    var disposeObjectsInArray = this._disposeObjectsInArray;\n\n    that._renderer.stopAllAnimations();\n\n    disposeObjectsInArray.call(that, \"series\");\n    disposeObject(\"_tracker\");\n    disposeObject(\"_crosshair\");\n    that.layoutManager = that._userOptions = that._canvas = that._groupsData = null;\n    unlinkGroup(\"_stripsGroup\");\n    unlinkGroup(\"_gridGroup\");\n    unlinkGroup(\"_axesGroup\");\n    unlinkGroup(\"_constantLinesGroup\");\n    unlinkGroup(\"_labelAxesGroup\");\n    unlinkGroup(\"_panesBorderGroup\");\n    unlinkGroup(\"_seriesGroup\");\n    unlinkGroup(\"_labelsGroup\");\n    unlinkGroup(\"_crosshairCursorGroup\");\n    unlinkGroup(\"_legendGroup\");\n    unlinkGroup(\"_scrollBarGroup\");\n    unlinkGroup(\"_scaleBreaksGroup\");\n    disposeObject(\"_canvasClipRect\");\n    disposeObject(\"_panesBackgroundGroup\");\n    disposeObject(\"_backgroundRect\");\n    disposeObject(\"_stripsGroup\");\n    disposeObject(\"_gridGroup\");\n    disposeObject(\"_axesGroup\");\n    disposeObject(\"_constantLinesGroup\");\n    disposeObject(\"_labelAxesGroup\");\n    disposeObject(\"_panesBorderGroup\");\n    disposeObject(\"_seriesGroup\");\n    disposeObject(\"_labelsGroup\");\n    disposeObject(\"_crosshairCursorGroup\");\n    disposeObject(\"_legendGroup\");\n    disposeObject(\"_scrollBarGroup\");\n    disposeObject(\"_scaleBreaksGroup\");\n  },\n  _getAnimationOptions: function _getAnimationOptions() {\n    return this._themeManager.getOptions(\"animation\");\n  },\n  _getDefaultSize: function _getDefaultSize() {\n    return {\n      width: 400,\n      height: 400\n    };\n  },\n  _getOption: function _getOption(name) {\n    return this._themeManager.getOptions(name);\n  },\n  _applySize: function _applySize(rect) {\n    this._rect = rect.slice();\n\n    if (!this._changes.has(\"FULL_RENDER\")) {\n      this._processRefreshData(RESIZE_REFRESH_ACTION);\n    }\n  },\n  _resize: function _resize() {\n    this._doRender(this.__renderOptions || {\n      animate: false,\n      isResize: true\n    });\n  },\n  _trackerType: \"ChartTracker\",\n  _createTracker: function _createTracker() {\n    var that = this;\n    that._tracker = new trackerModule[that._trackerType]({\n      seriesGroup: that._seriesGroup,\n      renderer: that._renderer,\n      tooltip: that._tooltip,\n      legend: that._legend,\n      eventTrigger: that._eventTrigger\n    });\n  },\n  _getTrackerSettings: function _getTrackerSettings() {\n    return extend({\n      chart: this\n    }, this._getSelectionModes());\n  },\n  _getSelectionModes: function _getSelectionModes() {\n    var themeManager = this._themeManager;\n    return {\n      seriesSelectionMode: themeManager.getOptions(\"seriesSelectionMode\"),\n      pointSelectionMode: themeManager.getOptions(\"pointSelectionMode\")\n    };\n  },\n  _updateTracker: function _updateTracker(trackerCanvases) {\n    var that = this;\n\n    that._tracker.update(that._getTrackerSettings());\n\n    that._tracker.setCanvases({\n      left: 0,\n      right: that._canvas.width,\n      top: 0,\n      bottom: that._canvas.height\n    }, trackerCanvases);\n  },\n  _createCanvasFromRect: function _createCanvasFromRect(rect) {\n    var currentCanvas = this._canvas;\n    return _setCanvasValues({\n      left: rect[0],\n      top: rect[1],\n      right: currentCanvas.width - rect[2],\n      bottom: currentCanvas.height - rect[3],\n      width: currentCanvas.width,\n      height: currentCanvas.height\n    });\n  },\n  _doRender: function _doRender(_options) {\n    var that = this;\n    var drawOptions;\n    var recreateCanvas;\n\n    if (0 === that._canvas.width && 0 === that._canvas.height) {\n      return;\n    }\n\n    that._resetIsReady();\n\n    drawOptions = that._prepareDrawOptions(_options);\n    recreateCanvas = drawOptions.recreateCanvas;\n\n    that._preserveOriginalCanvas();\n\n    if (recreateCanvas) {\n      that.__currentCanvas = that._canvas;\n    } else {\n      that._canvas = that.__currentCanvas;\n    }\n\n    recreateCanvas && that._updateCanvasClipRect(that._canvas);\n    this._canvas = this._createCanvasFromRect(this._rect);\n\n    that._renderer.stopAllAnimations(true);\n\n    that._cleanGroups();\n\n    var startTime = new Date();\n\n    that._renderElements(drawOptions);\n\n    that._lastRenderingTime = new Date() - startTime;\n  },\n  _preserveOriginalCanvas: function _preserveOriginalCanvas() {\n    this.__originalCanvas = this._canvas;\n    this._canvas = extend({}, this._canvas);\n  },\n  _layoutAxes: noop,\n  _renderElements: function _renderElements(drawOptions) {\n    var that = this;\n\n    var preparedOptions = that._prepareToRender(drawOptions);\n\n    var isRotated = that._isRotated();\n\n    var isLegendInside = that._isLegendInside();\n\n    var trackerCanvases = [];\n    extend({}, that._canvas);\n    var argBusinessRange;\n    var zoomMinArg;\n    var zoomMaxArg;\n\n    that._renderer.lock();\n\n    if (drawOptions.drawLegend && that._legend) {\n      that._legendGroup.linkAppend();\n    }\n\n    that.layoutManager.setOptions(that._layoutManagerOptions());\n\n    var layoutTargets = that._getLayoutTargets();\n\n    this._layoutAxes(function (needSpace) {\n      var axisDrawOptions = needSpace ? extend({}, drawOptions, {\n        animate: false\n      }) : drawOptions;\n\n      var canvas = that._renderAxes(axisDrawOptions, preparedOptions);\n\n      that._shrinkAxes(needSpace, canvas);\n    });\n\n    that._applyClipRects(preparedOptions);\n\n    that._appendSeriesGroups();\n\n    that._createCrosshairCursor();\n\n    layoutTargets.forEach(function (_ref) {\n      var canvas = _ref.canvas;\n      trackerCanvases.push({\n        left: canvas.left,\n        right: canvas.width - canvas.right,\n        top: canvas.top,\n        bottom: canvas.height - canvas.bottom\n      });\n    });\n\n    if (that._scrollBar) {\n      argBusinessRange = that._argumentAxes[0].getTranslator().getBusinessRange();\n\n      if (\"discrete\" === argBusinessRange.axisType && argBusinessRange.categories && argBusinessRange.categories.length <= 1 || \"discrete\" !== argBusinessRange.axisType && argBusinessRange.min === argBusinessRange.max) {\n        zoomMinArg = zoomMaxArg = void 0;\n      } else {\n        zoomMinArg = argBusinessRange.minVisible;\n        zoomMaxArg = argBusinessRange.maxVisible;\n      }\n\n      that._scrollBar.init(argBusinessRange, !that._argumentAxes[0].getOptions().valueMarginsEnabled).setPosition(zoomMinArg, zoomMaxArg);\n    }\n\n    that._updateTracker(trackerCanvases);\n\n    that._updateLegendPosition(drawOptions, isLegendInside);\n\n    that._applyPointMarkersAutoHiding();\n\n    that._renderSeries(drawOptions, isRotated, isLegendInside);\n\n    that._renderer.unlock();\n  },\n  _createCrosshairCursor: noop,\n  _appendSeriesGroups: function _appendSeriesGroups() {\n    this._seriesGroup.linkAppend();\n\n    this._labelsGroup.linkAppend();\n\n    this._appendAdditionalSeriesGroups();\n  },\n  _renderSeries: function _renderSeries(drawOptions, isRotated, isLegendInside) {\n    this._calculateSeriesLayout(drawOptions, isRotated);\n\n    this._renderSeriesElements(drawOptions, isRotated, isLegendInside);\n  },\n  _calculateSeriesLayout: function _calculateSeriesLayout(drawOptions, isRotated) {\n    drawOptions.hideLayoutLabels = this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(), isRotated) && !this._themeManager.getOptions(\"adaptiveLayout\").keepLabels;\n\n    this._updateSeriesDimensions(drawOptions);\n  },\n  _renderSeriesElements: function _renderSeriesElements(drawOptions, isRotated, isLegendInside) {\n    var that = this;\n    var i;\n    var series = that.series;\n    var singleSeries;\n    var seriesLength = series.length;\n\n    var resolveLabelOverlapping = that._themeManager.getOptions(\"resolveLabelOverlapping\");\n\n    for (i = 0; i < seriesLength; i++) {\n      singleSeries = series[i];\n\n      that._applyExtraSettings(singleSeries, drawOptions);\n\n      singleSeries.draw(drawOptions.animate && singleSeries.getPoints().length <= drawOptions.animationPointsLimit && that._renderer.animationEnabled(), drawOptions.hideLayoutLabels, that._getLegendCallBack(singleSeries));\n    }\n\n    if (\"none\" === resolveLabelOverlapping) {\n      that._adjustSeriesLabels(false);\n    } else {\n      that._locateLabels(resolveLabelOverlapping);\n    }\n\n    that._renderTrackers(isLegendInside);\n\n    that._tracker.repairTooltip();\n\n    that._clearCanvas();\n\n    that._renderExtraElements();\n\n    that._drawn();\n\n    that._renderCompleteHandler();\n  },\n  _locateLabels: function _locateLabels(resolveLabelOverlapping) {\n    this._resolveLabelOverlapping(resolveLabelOverlapping);\n  },\n  _renderExtraElements: function _renderExtraElements() {},\n  _clearCanvas: function _clearCanvas() {\n    this._canvas = this.__originalCanvas;\n  },\n  _resolveLabelOverlapping: function _resolveLabelOverlapping(resolveLabelOverlapping) {\n    var func;\n\n    switch (resolveLabelOverlapping) {\n      case \"stack\":\n        func = this._resolveLabelOverlappingStack;\n        break;\n\n      case \"hide\":\n        func = this._resolveLabelOverlappingHide;\n        break;\n\n      case \"shift\":\n        func = this._resolveLabelOverlappingShift;\n    }\n\n    return typeUtils.isFunction(func) && func.call(this);\n  },\n  _getVisibleSeries: function _getVisibleSeries() {\n    return commonUtils.grep(this.getAllSeries(), function (series) {\n      return series.isVisible();\n    });\n  },\n  _resolveLabelOverlappingHide: function _resolveLabelOverlappingHide() {\n    var labels = [];\n    var currentLabel;\n    var nextLabel;\n    var currentLabelRect;\n    var nextLabelRect;\n    var i;\n    var j;\n    var points;\n\n    var series = this._getVisibleSeries();\n\n    for (i = 0; i < series.length; i++) {\n      points = series[i].getVisiblePoints();\n\n      for (j = 0; j < points.length; j++) {\n        labels.push.apply(labels, points[j].getLabels());\n      }\n    }\n\n    for (i = 0; i < labels.length; i++) {\n      currentLabel = labels[i];\n\n      if (!currentLabel.isVisible()) {\n        continue;\n      }\n\n      currentLabelRect = currentLabel.getBoundingRect();\n\n      for (j = i + 1; j < labels.length; j++) {\n        nextLabel = labels[j];\n        nextLabelRect = nextLabel.getBoundingRect();\n\n        if (checkOverlapping(currentLabelRect, nextLabelRect)) {\n          nextLabel.draw(false);\n        }\n      }\n    }\n  },\n  _cleanGroups: function _cleanGroups() {\n    var that = this;\n\n    that._stripsGroup.linkRemove().clear();\n\n    that._gridGroup.linkRemove().clear();\n\n    that._axesGroup.linkRemove().clear();\n\n    that._constantLinesGroup.above.clear();\n\n    that._labelAxesGroup.linkRemove().clear();\n\n    that._labelsGroup.linkRemove().clear();\n\n    that._crosshairCursorGroup.linkRemove().clear();\n\n    that._scaleBreaksGroup.linkRemove().clear();\n  },\n  _allowLegendInsidePosition: function _allowLegendInsidePosition() {\n    return false;\n  },\n  _updateLegendPosition: noop,\n  _createLegend: function _createLegend() {\n    var that = this;\n    var legendSettings = getLegendSettings(that._legendDataField);\n    that._legend = new legendModule.Legend({\n      renderer: that._renderer,\n      widget: that,\n      group: that._legendGroup,\n      backgroundClass: \"dxc-border\",\n      itemGroupClass: \"dxc-item\",\n      titleGroupClass: \"dxc-title\",\n      textField: legendSettings.textField,\n      getFormatObject: legendSettings.getFormatObject,\n      allowInsidePosition: that._allowLegendInsidePosition()\n    });\n\n    that._updateLegend();\n\n    that._layout.add(that._legend);\n  },\n  _updateLegend: function _updateLegend() {\n    var that = this;\n    var themeManager = that._themeManager;\n    var legendOptions = themeManager.getOptions(\"legend\");\n\n    var legendData = that._getLegendData();\n\n    legendOptions.containerBackgroundColor = themeManager.getOptions(\"containerBackgroundColor\");\n    legendOptions._incidentOccurred = that._incidentOccurred;\n\n    that._legend.update(legendData, legendOptions, themeManager.theme(\"legend\").title);\n\n    this._change([\"LAYOUT\"]);\n  },\n  _prepareDrawOptions: function _prepareDrawOptions(drawOptions) {\n    var animationOptions = this._getAnimationOptions();\n\n    var options;\n    options = extend({}, {\n      force: false,\n      adjustAxes: true,\n      drawLegend: true,\n      drawTitle: true,\n      animate: animationOptions.enabled,\n      animationPointsLimit: animationOptions.maxPointCountSupported\n    }, drawOptions, this.__renderOptions);\n\n    if (!_isDefined(options.recreateCanvas)) {\n      options.recreateCanvas = options.adjustAxes && options.drawLegend && options.drawTitle;\n    }\n\n    return options;\n  },\n  _processRefreshData: function _processRefreshData(newRefreshAction) {\n    var currentRefreshActionPosition = inArray(this._currentRefreshData, ACTIONS_BY_PRIORITY);\n    var newRefreshActionPosition = inArray(newRefreshAction, ACTIONS_BY_PRIORITY);\n\n    if (!this._currentRefreshData || currentRefreshActionPosition >= 0 && newRefreshActionPosition < currentRefreshActionPosition) {\n      this._currentRefreshData = newRefreshAction;\n    }\n\n    this._requestChange([\"REFRESH\"]);\n  },\n  _getLegendData: function _getLegendData() {\n    return _map(this._getLegendTargets(), function (item) {\n      var legendData = item.legendData;\n      var style = item.getLegendStyles;\n      var opacity = style.normal.opacity;\n\n      if (!item.visible) {\n        if (!_isDefined(opacity) || opacity > DEFAULT_OPACITY) {\n          opacity = DEFAULT_OPACITY;\n        }\n\n        legendData.textOpacity = DEFAULT_OPACITY;\n      }\n\n      var opacityStyle = {\n        opacity: opacity\n      };\n      legendData.states = {\n        hover: extend({}, style.hover, opacityStyle),\n        selection: extend({}, style.selection, opacityStyle),\n        normal: extend({}, style.normal, opacityStyle)\n      };\n      return legendData;\n    });\n  },\n  _getLegendOptions: function _getLegendOptions(item) {\n    return {\n      legendData: {\n        text: item[this._legendItemTextField],\n        id: item.index,\n        visible: true\n      },\n      getLegendStyles: item.getLegendStyles(),\n      visible: item.isVisible()\n    };\n  },\n  _disposeSeries: function _disposeSeries(seriesIndex) {\n    var that = this;\n\n    if (that.series) {\n      if (_isDefined(seriesIndex)) {\n        that.series[seriesIndex].dispose();\n        that.series.splice(seriesIndex, 1);\n      } else {\n        _each(that.series, function (_, s) {\n          return s.dispose();\n        });\n\n        that.series.length = 0;\n      }\n    }\n\n    if (!that.series || !that.series.length) {\n      that.series = [];\n    }\n  },\n  _disposeSeriesFamilies: function _disposeSeriesFamilies() {\n    var that = this;\n\n    _each(that.seriesFamilies || [], function (_, family) {\n      family.dispose();\n    });\n\n    that.seriesFamilies = null;\n    that._needHandleRenderComplete = true;\n  },\n  _simulateOptionChange: function _simulateOptionChange(fullName, value, previousValue) {\n    var that = this;\n    var optionSetter = coreDataUtils.compileSetter(fullName);\n    optionSetter(that._options, value, {\n      functionsAsIs: true,\n      merge: !that._getOptionsByReference()[fullName]\n    });\n\n    that._notifyOptionChanged(fullName, value, previousValue);\n\n    that._changes.reset();\n  },\n  _optionChanged: function _optionChanged(arg) {\n    this._themeManager.resetOptions(arg.name);\n\n    this.callBase.apply(this, arguments);\n  },\n  _applyChanges: function _applyChanges() {\n    var that = this;\n\n    that._themeManager.update(that._options);\n\n    that.callBase.apply(that, arguments);\n  },\n  _optionChangesMap: {\n    animation: \"ANIMATION\",\n    dataSource: \"DATA_SOURCE\",\n    palette: \"PALETTE\",\n    paletteExtensionMode: \"PALETTE\",\n    legend: \"FORCE_DATA_INIT\",\n    seriesTemplate: \"FORCE_DATA_INIT\",\n    \"export\": \"FORCE_RENDER\",\n    valueAxis: \"AXES_AND_PANES\",\n    argumentAxis: \"AXES_AND_PANES\",\n    commonAxisSettings: \"AXES_AND_PANES\",\n    panes: \"AXES_AND_PANES\",\n    defaultPane: \"AXES_AND_PANES\",\n    useAggregation: \"AXES_AND_PANES\",\n    containerBackgroundColor: \"AXES_AND_PANES\",\n    rotated: \"ROTATED\",\n    autoHidePointMarkers: \"REFRESH_SERIES_REINIT\",\n    customizePoint: \"REFRESH_SERIES_REINIT\",\n    customizeLabel: \"REFRESH_SERIES_REINIT\",\n    scrollBar: \"SCROLL_BAR\"\n  },\n  _optionChangesOrder: [\"ROTATED\", \"PALETTE\", \"REFRESH_SERIES_REINIT\", \"AXES_AND_PANES\", \"INIT\", \"REINIT\", \"DATA_SOURCE\", \"REFRESH_SERIES_DATA_INIT\", \"DATA_INIT\", \"FORCE_DATA_INIT\", \"REFRESH_AXES\", \"CORRECT_AXIS\"],\n  _customChangesOrder: [\"ANIMATION\", \"REFRESH_SERIES_FAMILIES\", \"FORCE_RENDER\", \"VISUAL_RANGE\", \"SCROLL_BAR\", \"REINIT\", \"REFRESH\", \"FULL_RENDER\"],\n  _change_ANIMATION: function _change_ANIMATION() {\n    this._renderer.updateAnimationOptions(this._getAnimationOptions());\n  },\n  _change_DATA_SOURCE: function _change_DATA_SOURCE() {\n    this._needHandleRenderComplete = true;\n\n    this._updateDataSource();\n  },\n  _change_PALETTE: function _change_PALETTE() {\n    this._themeManager.updatePalette();\n\n    this._refreshSeries(\"DATA_INIT\");\n  },\n  _change_REFRESH_SERIES_DATA_INIT: function _change_REFRESH_SERIES_DATA_INIT() {\n    this._refreshSeries(\"DATA_INIT\");\n  },\n  _change_DATA_INIT: function _change_DATA_INIT() {\n    if ((!this.series || this.needToPopulateSeries) && !this._changes.has(\"FORCE_DATA_INIT\")) {\n      this._dataInit();\n    }\n  },\n  _change_FORCE_DATA_INIT: function _change_FORCE_DATA_INIT() {\n    this._dataInit();\n  },\n  _change_REFRESH_SERIES_FAMILIES: function _change_REFRESH_SERIES_FAMILIES() {\n    this._processSeriesFamilies();\n\n    this._populateBusinessRange();\n\n    this._processRefreshData(FORCE_RENDER_REFRESH_ACTION);\n  },\n  _change_FORCE_RENDER: function _change_FORCE_RENDER() {\n    this._processRefreshData(FORCE_RENDER_REFRESH_ACTION);\n  },\n  _change_AXES_AND_PANES: function _change_AXES_AND_PANES() {\n    this._refreshSeries(\"INIT\");\n  },\n  _change_ROTATED: function _change_ROTATED() {\n    this._createScrollBar();\n\n    this._refreshSeries(\"INIT\");\n  },\n  _change_REFRESH_SERIES_REINIT: function _change_REFRESH_SERIES_REINIT() {\n    this._refreshSeries(\"INIT\");\n  },\n  _change_REFRESH_AXES: function _change_REFRESH_AXES() {\n    var that = this;\n\n    _setCanvasValues(that._canvas);\n\n    that._reinitAxes();\n\n    that._requestChange([\"CORRECT_AXIS\", \"FULL_RENDER\"]);\n  },\n  _change_SCROLL_BAR: function _change_SCROLL_BAR() {\n    this._createScrollBar();\n\n    this._processRefreshData(FORCE_RENDER_REFRESH_ACTION);\n  },\n  _change_REINIT: function _change_REINIT() {\n    this._processRefreshData(REINIT_REFRESH_ACTION);\n  },\n  _refreshSeries: function _refreshSeries(actionName) {\n    this.needToPopulateSeries = true;\n\n    this._requestChange([actionName]);\n  },\n  _change_CORRECT_AXIS: function _change_CORRECT_AXIS() {\n    this._correctAxes();\n  },\n  _doRefresh: function _doRefresh() {\n    var methodName = this._currentRefreshData;\n\n    if (methodName) {\n      this._currentRefreshData = null;\n\n      this._renderer.stopAllAnimations(true);\n\n      this[methodName]();\n    }\n  },\n  _updateCanvasClipRect: function _updateCanvasClipRect(canvas) {\n    var that = this;\n    var width;\n    var height;\n    width = Math.max(canvas.width - canvas.left - canvas.right, 0);\n    height = Math.max(canvas.height - canvas.top - canvas.bottom, 0);\n\n    that._canvasClipRect.attr({\n      x: canvas.left,\n      y: canvas.top,\n      width: width,\n      height: height\n    });\n\n    that._backgroundRect.attr({\n      x: canvas.left,\n      y: canvas.top,\n      width: width,\n      height: height\n    });\n  },\n  _getCanvasClipRectID: function _getCanvasClipRectID() {\n    return this._canvasClipRect.id;\n  },\n  _dataSourceChangedHandler: function _dataSourceChangedHandler() {\n    if (this._changes.has(\"INIT\")) {\n      this._requestChange([\"DATA_INIT\"]);\n    } else {\n      this._requestChange([\"FORCE_DATA_INIT\"]);\n    }\n  },\n  _dataInit: function _dataInit() {\n    this._dataSpecificInit(true);\n  },\n  _processSingleSeries: function _processSingleSeries(singleSeries) {\n    singleSeries.createPoints(false);\n  },\n  _handleSeriesDataUpdated: function _handleSeriesDataUpdated() {\n    var _this = this;\n\n    if (this._getVisibleSeries().some(function (s) {\n      return s.useAggregation();\n    })) {\n      this._populateMarginOptions();\n    }\n\n    this.series.forEach(function (s) {\n      return _this._processSingleSeries(s);\n    }, this);\n  },\n  _dataSpecificInit: function _dataSpecificInit(needRedraw) {\n    var that = this;\n\n    if (!that.series || that.needToPopulateSeries) {\n      that.series = that._populateSeries();\n    }\n\n    that._repopulateSeries();\n\n    that._seriesPopulatedHandlerCore();\n\n    that._populateBusinessRange();\n\n    that._tracker.updateSeries(that.series, this._changes.has(\"INIT\"));\n\n    that._updateLegend();\n\n    if (needRedraw) {\n      this._requestChange([\"FULL_RENDER\"]);\n    }\n  },\n  _forceRender: function _forceRender() {\n    this._doRender({\n      force: true\n    });\n  },\n  _repopulateSeries: function _repopulateSeries() {\n    var that = this;\n    var parsedData;\n    var themeManager = that._themeManager;\n\n    var data = that._dataSourceItems();\n\n    var dataValidatorOptions = themeManager.getOptions(\"dataPrepareSettings\");\n    var seriesTemplate = themeManager.getOptions(\"seriesTemplate\");\n\n    if (seriesTemplate) {\n      that._populateSeries(data);\n    }\n\n    that._groupSeries();\n\n    parsedData = dataValidatorModule.validateData(data, that._groupsData, that._incidentOccurred, dataValidatorOptions);\n    themeManager.resetPalette();\n    that.series.forEach(function (singleSeries) {\n      singleSeries.updateData(parsedData[singleSeries.getArgumentField()]);\n    });\n\n    that._handleSeriesDataUpdated();\n  },\n  _renderCompleteHandler: function _renderCompleteHandler() {\n    var that = this;\n    var allSeriesInited = true;\n\n    if (that._needHandleRenderComplete) {\n      _each(that.series, function (_, s) {\n        allSeriesInited = allSeriesInited && s.canRenderCompleteHandle();\n      });\n\n      if (allSeriesInited) {\n        that._needHandleRenderComplete = false;\n\n        that._eventTrigger(\"done\", {\n          target: that\n        });\n      }\n    }\n  },\n  _dataIsReady: function _dataIsReady() {\n    return _isDefined(this.option(\"dataSource\")) && this._dataIsLoaded();\n  },\n  _populateSeriesOptions: function _populateSeriesOptions(data) {\n    var that = this;\n    var themeManager = that._themeManager;\n    var seriesTemplate = themeManager.getOptions(\"seriesTemplate\");\n    var seriesOptions = seriesTemplate ? vizUtils.processSeriesTemplate(seriesTemplate, data || []) : that.option(\"series\");\n    var allSeriesOptions = _isArray(seriesOptions) ? seriesOptions : seriesOptions ? [seriesOptions] : [];\n\n    var extraOptions = that._getExtraOptions();\n\n    var particularSeriesOptions;\n    var seriesTheme;\n    var seriesThemes = [];\n\n    var seriesVisibilityChanged = function seriesVisibilityChanged(target) {\n      that._specialProcessSeries();\n\n      that._populateBusinessRange(target && target.getValueAxis(), true);\n\n      that._renderer.stopAllAnimations(true);\n\n      that._updateLegend();\n\n      that._requestChange([\"FULL_RENDER\"]);\n    };\n\n    for (var i = 0; i < allSeriesOptions.length; i++) {\n      particularSeriesOptions = extend(true, {}, allSeriesOptions[i], extraOptions);\n\n      if (!particularSeriesOptions.name) {\n        particularSeriesOptions.name = \"Series \" + (i + 1).toString();\n      }\n\n      particularSeriesOptions.rotated = that._isRotated();\n      particularSeriesOptions.customizePoint = themeManager.getOptions(\"customizePoint\");\n      particularSeriesOptions.customizeLabel = themeManager.getOptions(\"customizeLabel\");\n      particularSeriesOptions.visibilityChanged = seriesVisibilityChanged;\n      particularSeriesOptions.incidentOccurred = that._incidentOccurred;\n      seriesTheme = themeManager.getOptions(\"series\", particularSeriesOptions, allSeriesOptions.length);\n\n      if (that._checkPaneName(seriesTheme)) {\n        seriesThemes.push(seriesTheme);\n      }\n    }\n\n    return seriesThemes;\n  },\n  _populateSeries: function _populateSeries(data) {\n    var that = this;\n    var seriesBasis = [];\n    var incidentOccurred = that._incidentOccurred;\n\n    var seriesThemes = that._populateSeriesOptions(data);\n\n    var particularSeries;\n    var disposeSeriesFamilies = false;\n    that.needToPopulateSeries = false;\n\n    _each(seriesThemes, function (_, theme) {\n      var curSeries = that.series && that.series.filter(function (s) {\n        return s.name === theme.name && seriesBasis.map(function (sb) {\n          return sb.series;\n        }).indexOf(s) === -1;\n      })[0];\n\n      if (curSeries && curSeries.type === theme.type) {\n        seriesBasis.push({\n          series: curSeries,\n          options: theme\n        });\n      } else {\n        seriesBasis.push({\n          options: theme\n        });\n        disposeSeriesFamilies = true;\n      }\n    });\n\n    that._tracker.clearHover();\n\n    _reverseEach(that.series, function (index, series) {\n      if (!seriesBasis.some(function (s) {\n        return series === s.series;\n      })) {\n        that._disposeSeries(index);\n\n        disposeSeriesFamilies = true;\n      }\n    });\n\n    !disposeSeriesFamilies && (disposeSeriesFamilies = seriesBasis.some(function (sb) {\n      return sb.series.name !== seriesThemes[sb.series.index].name;\n    }));\n    that.series = [];\n    disposeSeriesFamilies && that._disposeSeriesFamilies();\n\n    that._themeManager.resetPalette();\n\n    var eventPipe = function eventPipe(data) {\n      that.series.forEach(function (currentSeries) {\n        currentSeries.notify(data);\n      });\n    };\n\n    _each(seriesBasis, function (_, basis) {\n      var seriesTheme = basis.options;\n      var renderSettings = {\n        commonSeriesModes: that._getSelectionModes(),\n        argumentAxis: that.getArgumentAxis(),\n        valueAxis: that._getValueAxis(seriesTheme.pane, seriesTheme.axis)\n      };\n\n      if (basis.series) {\n        particularSeries = basis.series;\n        particularSeries.updateOptions(seriesTheme, renderSettings);\n      } else {\n        particularSeries = new seriesModule.Series(extend({\n          renderer: that._renderer,\n          seriesGroup: that._seriesGroup,\n          labelsGroup: that._labelsGroup,\n          eventTrigger: that._eventTrigger,\n          eventPipe: eventPipe,\n          incidentOccurred: incidentOccurred\n        }, renderSettings), seriesTheme);\n      }\n\n      if (!particularSeries.isUpdated) {\n        incidentOccurred(\"E2101\", [seriesTheme.type]);\n      } else {\n        particularSeries.index = that.series.length;\n        that.series.push(particularSeries);\n      }\n    });\n\n    return that.series;\n  },\n  getStackedPoints: function getStackedPoints(point) {\n    var stackName = point.series.getStackName();\n    return this._getVisibleSeries().reduce(function (stackPoints, series) {\n      if (!_isDefined(series.getStackName()) && !_isDefined(stackName) || stackName === series.getStackName()) {\n        stackPoints = stackPoints.concat(series.getPointsByArg(point.argument));\n      }\n\n      return stackPoints;\n    }, []);\n  },\n  getAllSeries: function getAllSeries() {\n    return (this.series || []).slice();\n  },\n  getSeriesByName: function getSeriesByName(name) {\n    var found = null;\n\n    _each(this.series, function (i, singleSeries) {\n      if (singleSeries.name === name) {\n        found = singleSeries;\n        return false;\n      }\n    });\n\n    return found;\n  },\n  getSeriesByPos: function getSeriesByPos(pos) {\n    return (this.series || [])[pos];\n  },\n  clearSelection: function clearSelection() {\n    this._tracker.clearSelection();\n  },\n  hideTooltip: function hideTooltip() {\n    this._tracker._hideTooltip();\n  },\n  clearHover: function clearHover() {\n    this._tracker.clearHover();\n  },\n  render: function render(renderOptions) {\n    var that = this;\n    that.__renderOptions = renderOptions;\n    that.__forceRender = renderOptions && renderOptions.force;\n    that.callBase.apply(that, arguments);\n    that.__renderOptions = that.__forceRender = null;\n    return that;\n  },\n  refresh: function refresh() {\n    this._disposeSeries();\n\n    this._disposeSeriesFamilies();\n\n    this._requestChange([\"CONTAINER_SIZE\", \"REFRESH_SERIES_REINIT\"]);\n  },\n  _getMinSize: function _getMinSize() {\n    var adaptiveLayout = this._layoutManagerOptions();\n\n    return [adaptiveLayout.width, adaptiveLayout.height];\n  },\n  _change_REFRESH: function _change_REFRESH() {\n    if (!this._changes.has(\"INIT\")) {\n      this._doRefresh();\n    } else {\n      this._currentRefreshData = null;\n    }\n  },\n  _change_FULL_RENDER: function _change_FULL_RENDER() {\n    this._forceRender();\n  },\n  _change_INIT: function _change_INIT() {\n    this._reinit();\n  },\n  _stopCurrentHandling: function _stopCurrentHandling() {\n    this._tracker.stopCurrentHandling();\n  }\n});\nREFRESH_SERIES_DATA_INIT_ACTION_OPTIONS.forEach(function (name) {\n  BaseChart.prototype._optionChangesMap[name] = \"REFRESH_SERIES_DATA_INIT\";\n});\nFORCE_RENDER_REFRESH_ACTION_OPTIONS.forEach(function (name) {\n  BaseChart.prototype._optionChangesMap[name] = \"FORCE_RENDER\";\n});\nREFRESH_SERIES_FAMILIES_ACTION_OPTIONS.forEach(function (name) {\n  BaseChart.prototype._optionChangesMap[name] = \"REFRESH_SERIES_FAMILIES\";\n});\nexports.overlapping = overlapping;\nexports.BaseChart = BaseChart;\nBaseChart.addPlugin(require(\"../core/export\").plugin);\nBaseChart.addPlugin(require(\"../core/title\").plugin);\nBaseChart.addPlugin(require(\"../core/tooltip\").plugin);\nBaseChart.addPlugin(require(\"../core/loading_indicator\").plugin);\nBaseChart.addPlugin(require(\"../core/data_source\").plugin);\nvar _change_TITLE = BaseChart.prototype._change_TITLE;\n\nBaseChart.prototype._change_TITLE = function () {\n  _change_TITLE.apply(this, arguments);\n\n  this._change([\"FORCE_RENDER\"]);\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/chart_components/base_chart.js"],"names":["commonUtils","require","noop","eventsEngine","typeUtils","iteratorModule","extend","inArray","eventUtils","BaseWidget","coreDataUtils","legendModule","dataValidatorModule","seriesModule","chartThemeManagerModule","LayoutManagerModule","trackerModule","REINIT_REFRESH_ACTION","REINIT_DATA_SOURCE_REFRESH_ACTION","DATA_INIT_REFRESH_ACTION","FORCE_RENDER_REFRESH_ACTION","RESIZE_REFRESH_ACTION","ACTIONS_BY_PRIORITY","vizUtils","_map","_each","_reverseEach","_isArray","Array","_isDefined","_setCanvasValues","DEFAULT_OPACITY","REFRESH_SERIES_DATA_INIT_ACTION_OPTIONS","REFRESH_SERIES_FAMILIES_ACTION_OPTIONS","FORCE_RENDER_REFRESH_ACTION_OPTIONS","FONT","canvasSize","stubCanvas","size","rollingStocks","rollingStock","findAndKillSmallValue","smallestObject","value","prev","index","width","overlap","i","iLength","j","jLength","checkStacksOverlapping","customSorting","arguments","start","isRotated","canvas","end","bottom","hasStackedSeries","points","p","l","rollingStocksTmp","a","b","checkStackOverlap","checkHeightRollingStock","prepareOverlapStacks","moveRollingStock","firstRect","firstRolling","secondRect","secondRolling","oppositeOverlapping","inTwoSides","currentRollingStock","root","rollingStocksIsOut","currentBBox","nextRollingStock","nextBBox","bBox","label","x","y","endX","endY","oppositeStart","oppositeEnd","RollingStock","toChain","nextRollingStockBBox","getBoundingRect","shift","shiftFunction","coords","setRollingStockInCanvas","getLabels","getInitialPosition","_changeBoxWidth","nameField","name","colorField","indexField","formatObjectFields","getLegendFields","getFormatObject","res","data","textField","overlapping","resolveLabelOverlappingInOneDirection","BaseChart","_eventsMap","onSeriesClick","onPointClick","onArgumentAxisClick","onLegendClick","onSeriesSelectionChanged","onPointSelectionChanged","onSeriesHoverChanged","onPointHoverChanged","onDone","onZoomStart","onZoomEnd","_fontFields","_rootClassPrefix","_rootClass","_initialChanges","_themeDependentChanges","_getThemeManagerOptions","themeOptions","_createThemeManager","chartOption","themeManager","_initCore","that","event","_getLayoutItems","_layoutManagerOptions","_reinit","_correctAxes","_createHtmlStructure","renderer","createConstantLinesGroup","dispose","linkOff","clear","linkAppend","fill","opacity","_disposeObjectsInArray","fieldNames","item","_disposeCore","disposeObject","unlinkGroup","disposeObjectsInArray","_getAnimationOptions","_getDefaultSize","height","_getOption","_applySize","rect","_resize","animate","isResize","_trackerType","_createTracker","seriesGroup","tooltip","legend","eventTrigger","_eventTrigger","_getTrackerSettings","chart","_getSelectionModes","seriesSelectionMode","pointSelectionMode","_updateTracker","left","right","top","_createCanvasFromRect","currentCanvas","_doRender","drawOptions","recreateCanvas","startTime","_preserveOriginalCanvas","_layoutAxes","_renderElements","preparedOptions","isLegendInside","trackerCanvases","layoutTargets","axisDrawOptions","needSpace","_ref","argBusinessRange","zoomMinArg","zoomMaxArg","_createCrosshairCursor","_appendSeriesGroups","_renderSeries","_calculateSeriesLayout","_renderSeriesElements","series","seriesLength","resolveLabelOverlapping","singleSeries","_locateLabels","_renderExtraElements","_clearCanvas","_resolveLabelOverlapping","func","_getVisibleSeries","_resolveLabelOverlappingHide","labels","currentLabel","currentLabelRect","nextLabel","nextLabelRect","checkOverlapping","_cleanGroups","_allowLegendInsidePosition","_updateLegendPosition","_createLegend","legendSettings","getLegendSettings","widget","group","backgroundClass","itemGroupClass","titleGroupClass","allowInsidePosition","_updateLegend","legendOptions","legendData","_prepareDrawOptions","animationOptions","options","force","adjustAxes","drawLegend","drawTitle","animationPointsLimit","maxPointCountSupported","_processRefreshData","currentRefreshActionPosition","newRefreshActionPosition","_getLegendData","style","opacityStyle","hover","selection","normal","_getLegendOptions","text","id","visible","getLegendStyles","_disposeSeries","s","_disposeSeriesFamilies","family","_simulateOptionChange","optionSetter","functionsAsIs","merge","_optionChanged","arg","_applyChanges","_optionChangesMap","animation","dataSource","palette","paletteExtensionMode","seriesTemplate","valueAxis","argumentAxis","commonAxisSettings","panes","defaultPane","useAggregation","containerBackgroundColor","rotated","autoHidePointMarkers","customizePoint","customizeLabel","scrollBar","_optionChangesOrder","_customChangesOrder","_change_ANIMATION","_change_DATA_SOURCE","_change_PALETTE","_change_REFRESH_SERIES_DATA_INIT","_change_DATA_INIT","_change_FORCE_DATA_INIT","_change_REFRESH_SERIES_FAMILIES","_change_FORCE_RENDER","_change_AXES_AND_PANES","_change_ROTATED","_change_REFRESH_SERIES_REINIT","_change_REFRESH_AXES","_change_SCROLL_BAR","_change_REINIT","_refreshSeries","_change_CORRECT_AXIS","_doRefresh","methodName","_updateCanvasClipRect","Math","_getCanvasClipRectID","_dataSourceChangedHandler","_dataInit","_processSingleSeries","_handleSeriesDataUpdated","_this","_dataSpecificInit","_forceRender","_repopulateSeries","dataValidatorOptions","parsedData","_renderCompleteHandler","allSeriesInited","target","_dataIsReady","_populateSeriesOptions","seriesOptions","allSeriesOptions","extraOptions","seriesThemes","seriesVisibilityChanged","particularSeriesOptions","seriesTheme","_populateSeries","seriesBasis","incidentOccurred","disposeSeriesFamilies","curSeries","theme","sb","eventPipe","currentSeries","basis","renderSettings","commonSeriesModes","particularSeries","labelsGroup","getStackedPoints","stackName","point","stackPoints","getAllSeries","getSeriesByName","found","getSeriesByPos","clearSelection","hideTooltip","clearHover","render","renderOptions","refresh","_getMinSize","adaptiveLayout","_change_REFRESH","_change_FULL_RENDER","_change_INIT","_stopCurrentHandling","exports","_change_TITLE"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/chart_components/base_chart.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar commonUtils = require(\"../../core/utils/common\");\r\nvar noop = commonUtils.noop;\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar iteratorModule = require(\"../../core/utils/iterator\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar inArray = require(\"../../core/utils/array\").inArray;\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar BaseWidget = require(\"../core/base_widget\");\r\nvar coreDataUtils = require(\"../../core/utils/data\");\r\nvar legendModule = require(\"../components/legend\");\r\nvar dataValidatorModule = require(\"../components/data_validator\");\r\nvar seriesModule = require(\"../series/base_series\");\r\nvar chartThemeManagerModule = require(\"../components/chart_theme_manager\");\r\nvar LayoutManagerModule = require(\"./layout_manager\");\r\nvar trackerModule = require(\"./tracker\");\r\nvar REINIT_REFRESH_ACTION = \"_reinit\";\r\nvar REINIT_DATA_SOURCE_REFRESH_ACTION = \"_updateDataSource\";\r\nvar DATA_INIT_REFRESH_ACTION = \"_dataInit\";\r\nvar FORCE_RENDER_REFRESH_ACTION = \"_forceRender\";\r\nvar RESIZE_REFRESH_ACTION = \"_resize\";\r\nvar ACTIONS_BY_PRIORITY = [REINIT_REFRESH_ACTION, REINIT_DATA_SOURCE_REFRESH_ACTION, DATA_INIT_REFRESH_ACTION, FORCE_RENDER_REFRESH_ACTION, RESIZE_REFRESH_ACTION];\r\nvar vizUtils = require(\"../core/utils\");\r\nvar _map = vizUtils.map;\r\nvar _each = iteratorModule.each;\r\nvar _reverseEach = iteratorModule.reverseEach;\r\nvar _isArray = Array.isArray;\r\nvar _isDefined = typeUtils.isDefined;\r\nvar _setCanvasValues = vizUtils.setCanvasValues;\r\nvar DEFAULT_OPACITY = .3;\r\nvar REFRESH_SERIES_DATA_INIT_ACTION_OPTIONS = [\"series\", \"commonSeriesSettings\", \"dataPrepareSettings\", \"seriesSelectionMode\", \"pointSelectionMode\", \"synchronizeMultiAxes\", \"resolveLabelsOverlapping\"];\r\nvar REFRESH_SERIES_FAMILIES_ACTION_OPTIONS = [\"equalBarWidth\", \"minBubbleSize\", \"maxBubbleSize\", \"barWidth\", \"barGroupPadding\", \"barGroupWidth\", \"negativesAsZeroes\", \"negativesAsZeros\"];\r\nvar FORCE_RENDER_REFRESH_ACTION_OPTIONS = [\"adaptiveLayout\", \"crosshair\", \"resolveLabelOverlapping\", \"adjustOnZoom\", \"zoomingMode\", \"scrollingMode\", \"stickyHovering\"];\r\nvar FONT = \"font\";\r\n\r\nfunction checkHeightRollingStock(rollingStocks, stubCanvas) {\r\n    var canvasSize = stubCanvas.end - stubCanvas.start;\r\n    var size = 0;\r\n    rollingStocks.forEach(function(rollingStock) {\r\n        size += rollingStock.getBoundingRect().width\r\n    });\r\n    while (canvasSize < size) {\r\n        size -= findAndKillSmallValue(rollingStocks)\r\n    }\r\n}\r\n\r\nfunction findAndKillSmallValue(rollingStocks) {\r\n    var smallestObject;\r\n    var width;\r\n    smallestObject = rollingStocks.reduce(function(prev, rollingStock, index) {\r\n        if (!rollingStock) {\r\n            return prev\r\n        }\r\n        var value = rollingStock.value();\r\n        return value < prev.value ? {\r\n            value: value,\r\n            rollingStock: rollingStock,\r\n            index: index\r\n        } : prev\r\n    }, {\r\n        rollingStock: void 0,\r\n        value: 1 / 0,\r\n        index: void 0\r\n    });\r\n    smallestObject.rollingStock.getLabels()[0].draw(false);\r\n    width = smallestObject.rollingStock.getBoundingRect().width;\r\n    rollingStocks[smallestObject.index] = null;\r\n    return width\r\n}\r\n\r\nfunction checkStackOverlap(rollingStocks) {\r\n    var i;\r\n    var j;\r\n    var iLength;\r\n    var jLength;\r\n    var overlap = false;\r\n    for (i = 0, iLength = rollingStocks.length - 1; i < iLength; i++) {\r\n        for (j = i + 1, jLength = rollingStocks.length; j < jLength; j++) {\r\n            if (i !== j && checkStacksOverlapping(rollingStocks[i], rollingStocks[j], true)) {\r\n                overlap = true;\r\n                break\r\n            }\r\n        }\r\n        if (overlap) {\r\n            break\r\n        }\r\n    }\r\n    return overlap\r\n}\r\n\r\nfunction resolveLabelOverlappingInOneDirection(points, canvas, isRotated, shiftFunction) {\r\n    var customSorting = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : function() {\r\n        return 0\r\n    };\r\n    var rollingStocks = [];\r\n    var stubCanvas = {\r\n        start: isRotated ? canvas.left : canvas.top,\r\n        end: isRotated ? canvas.width - canvas.right : canvas.height - canvas.bottom\r\n    };\r\n    var hasStackedSeries = false;\r\n    points.forEach(function(p) {\r\n        if (!p) {\r\n            return\r\n        }\r\n        hasStackedSeries = hasStackedSeries || p.series.isStackedSeries() || p.series.isFullStackedSeries();\r\n        p.getLabels().forEach(function(l) {\r\n            l.isVisible() && rollingStocks.push(new RollingStock(l, isRotated, shiftFunction))\r\n        })\r\n    });\r\n    if (hasStackedSeries) {\r\n        !isRotated && rollingStocks.reverse()\r\n    } else {\r\n        var rollingStocksTmp = rollingStocks.slice();\r\n        rollingStocks.sort(function(a, b) {\r\n            return customSorting(a, b) || a.getInitialPosition() - b.getInitialPosition() || rollingStocksTmp.indexOf(a) - rollingStocksTmp.indexOf(b)\r\n        })\r\n    }\r\n    if (!checkStackOverlap(rollingStocks)) {\r\n        return false\r\n    }\r\n    checkHeightRollingStock(rollingStocks, stubCanvas);\r\n    prepareOverlapStacks(rollingStocks);\r\n    rollingStocks.reverse();\r\n    moveRollingStock(rollingStocks, stubCanvas);\r\n    return true\r\n}\r\n\r\nfunction checkStacksOverlapping(firstRolling, secondRolling, inTwoSides) {\r\n    if (!firstRolling || !secondRolling) {\r\n        return\r\n    }\r\n    var firstRect = firstRolling.getBoundingRect();\r\n    var secondRect = secondRolling.getBoundingRect();\r\n    var oppositeOverlapping = inTwoSides ? firstRect.oppositeStart <= secondRect.oppositeStart && firstRect.oppositeEnd > secondRect.oppositeStart || secondRect.oppositeStart <= firstRect.oppositeStart && secondRect.oppositeEnd > firstRect.oppositeStart : true;\r\n    return firstRect.end > secondRect.start && oppositeOverlapping\r\n}\r\n\r\nfunction prepareOverlapStacks(rollingStocks) {\r\n    var i;\r\n    var currentRollingStock;\r\n    var root;\r\n    for (i = 0; i < rollingStocks.length - 1; i++) {\r\n        currentRollingStock = root || rollingStocks[i];\r\n        if (checkStacksOverlapping(currentRollingStock, rollingStocks[i + 1])) {\r\n            currentRollingStock.toChain(rollingStocks[i + 1]);\r\n            rollingStocks[i + 1] = null;\r\n            root = currentRollingStock\r\n        } else {\r\n            root = rollingStocks[i + 1] || currentRollingStock\r\n        }\r\n    }\r\n}\r\n\r\nfunction moveRollingStock(rollingStocks, canvas) {\r\n    var i;\r\n    var j;\r\n    var currentRollingStock;\r\n    var nextRollingStock;\r\n    var currentBBox;\r\n    var nextBBox;\r\n    for (i = 0; i < rollingStocks.length; i++) {\r\n        currentRollingStock = rollingStocks[i];\r\n        if (rollingStocksIsOut(currentRollingStock, canvas)) {\r\n            currentBBox = currentRollingStock.getBoundingRect();\r\n            for (j = i + 1; j < rollingStocks.length; j++) {\r\n                nextRollingStock = rollingStocks[j];\r\n                if (!nextRollingStock) {\r\n                    continue\r\n                }\r\n                nextBBox = nextRollingStock.getBoundingRect();\r\n                if (nextBBox.end > currentBBox.start - (currentBBox.end - canvas.end)) {\r\n                    nextRollingStock.toChain(currentRollingStock);\r\n                    rollingStocks[i] = currentRollingStock = null;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        currentRollingStock && currentRollingStock.setRollingStockInCanvas(canvas)\r\n    }\r\n}\r\n\r\nfunction rollingStocksIsOut(rollingStock, canvas) {\r\n    return rollingStock && rollingStock.getBoundingRect().end > canvas.end\r\n}\r\n\r\nfunction RollingStock(label, isRotated, shiftFunction) {\r\n    var bBox = label.getBoundingRect();\r\n    var x = bBox.x;\r\n    var y = bBox.y;\r\n    var endX = bBox.x + bBox.width;\r\n    var endY = bBox.y + bBox.height;\r\n    this.labels = [label];\r\n    this.shiftFunction = shiftFunction;\r\n    this._bBox = {\r\n        start: isRotated ? x : y,\r\n        width: isRotated ? bBox.width : bBox.height,\r\n        end: isRotated ? endX : endY,\r\n        oppositeStart: isRotated ? y : x,\r\n        oppositeEnd: isRotated ? endY : endX\r\n    };\r\n    this._initialPosition = isRotated ? bBox.x : bBox.y;\r\n    return this\r\n}\r\nRollingStock.prototype = {\r\n    toChain: function(nextRollingStock) {\r\n        var nextRollingStockBBox = nextRollingStock.getBoundingRect();\r\n        nextRollingStock.shift(nextRollingStockBBox.start - this._bBox.end);\r\n        this._changeBoxWidth(nextRollingStockBBox.width);\r\n        this.labels = this.labels.concat(nextRollingStock.labels)\r\n    },\r\n    getBoundingRect: function() {\r\n        return this._bBox\r\n    },\r\n    shift: function(shiftLength) {\r\n        var shiftFunction = this.shiftFunction;\r\n        _each(this.labels, function(index, label) {\r\n            var bBox = label.getBoundingRect();\r\n            var coords = shiftFunction(bBox, shiftLength);\r\n            if (!label.hideInsideLabel(coords)) {\r\n                label.shift(coords.x, coords.y)\r\n            }\r\n        });\r\n        this._bBox.end -= shiftLength;\r\n        this._bBox.start -= shiftLength\r\n    },\r\n    setRollingStockInCanvas: function(canvas) {\r\n        if (this._bBox.end > canvas.end) {\r\n            this.shift(this._bBox.end - canvas.end)\r\n        }\r\n    },\r\n    getLabels: function() {\r\n        return this.labels\r\n    },\r\n    value: function() {\r\n        return this.labels[0].getData().value\r\n    },\r\n    getInitialPosition: function() {\r\n        return this._initialPosition\r\n    },\r\n    _changeBoxWidth: function(width) {\r\n        this._bBox.end += width;\r\n        this._bBox.width += width\r\n    }\r\n};\r\n\r\nfunction getLegendFields(name) {\r\n    return {\r\n        nameField: name + \"Name\",\r\n        colorField: name + \"Color\",\r\n        indexField: name + \"Index\"\r\n    }\r\n}\r\n\r\nfunction getLegendSettings(legendDataField) {\r\n    var formatObjectFields = getLegendFields(legendDataField);\r\n    return {\r\n        getFormatObject: function(data) {\r\n            var res = {};\r\n            res[formatObjectFields.indexField] = data.id;\r\n            res[formatObjectFields.colorField] = data.states.normal.fill;\r\n            res[formatObjectFields.nameField] = data.text;\r\n            return res\r\n        },\r\n        textField: formatObjectFields.nameField\r\n    }\r\n}\r\n\r\nfunction checkOverlapping(firstRect, secondRect) {\r\n    return (firstRect.x <= secondRect.x && secondRect.x <= firstRect.x + firstRect.width || firstRect.x >= secondRect.x && firstRect.x <= secondRect.x + secondRect.width) && (firstRect.y <= secondRect.y && secondRect.y <= firstRect.y + firstRect.height || firstRect.y >= secondRect.y && firstRect.y <= secondRect.y + secondRect.height)\r\n}\r\nvar overlapping = {\r\n    resolveLabelOverlappingInOneDirection: resolveLabelOverlappingInOneDirection\r\n};\r\nvar BaseChart = BaseWidget.inherit({\r\n    _eventsMap: {\r\n        onSeriesClick: {\r\n            name: \"seriesClick\"\r\n        },\r\n        onPointClick: {\r\n            name: \"pointClick\"\r\n        },\r\n        onArgumentAxisClick: {\r\n            name: \"argumentAxisClick\"\r\n        },\r\n        onLegendClick: {\r\n            name: \"legendClick\"\r\n        },\r\n        onSeriesSelectionChanged: {\r\n            name: \"seriesSelectionChanged\"\r\n        },\r\n        onPointSelectionChanged: {\r\n            name: \"pointSelectionChanged\"\r\n        },\r\n        onSeriesHoverChanged: {\r\n            name: \"seriesHoverChanged\"\r\n        },\r\n        onPointHoverChanged: {\r\n            name: \"pointHoverChanged\"\r\n        },\r\n        onDone: {\r\n            name: \"done\"\r\n        },\r\n        onZoomStart: {\r\n            name: \"zoomStart\"\r\n        },\r\n        onZoomEnd: {\r\n            name: \"zoomEnd\"\r\n        }\r\n    },\r\n    _fontFields: [\"legend.\" + FONT, \"legend.title.\" + FONT, \"legend.title.subtitle.\" + FONT, \"commonSeriesSettings.label.\" + FONT],\r\n    _rootClassPrefix: \"dxc\",\r\n    _rootClass: \"dxc-chart\",\r\n    _initialChanges: [\"INIT\"],\r\n    _themeDependentChanges: [\"REFRESH_SERIES_REINIT\"],\r\n    _getThemeManagerOptions: function() {\r\n        var themeOptions = this.callBase.apply(this, arguments);\r\n        themeOptions.options = this.option();\r\n        return themeOptions\r\n    },\r\n    _createThemeManager: function() {\r\n        var chartOption = this.option();\r\n        var themeManager = new chartThemeManagerModule.ThemeManager(this._getThemeManagerOptions());\r\n        themeManager.setTheme(chartOption.theme, chartOption.rtlEnabled);\r\n        return themeManager\r\n    },\r\n    _initCore: function() {\r\n        var that = this;\r\n        that._canvasClipRect = that._renderer.clipRect();\r\n        that._createHtmlStructure();\r\n        that._createLegend();\r\n        that._createTracker();\r\n        that._needHandleRenderComplete = true;\r\n        that.layoutManager = new LayoutManagerModule.LayoutManager;\r\n        that._createScrollBar();\r\n        eventsEngine.on(that._$element, \"contextmenu\", function(event) {\r\n            if (eventUtils.isTouchEvent(event) || eventUtils.isPointerEvent(event)) {\r\n                event.preventDefault()\r\n            }\r\n        });\r\n        eventsEngine.on(that._$element, \"MSHoldVisual\", function(event) {\r\n            event.preventDefault()\r\n        })\r\n    },\r\n    _getLayoutItems: noop,\r\n    _layoutManagerOptions: function() {\r\n        return this._themeManager.getOptions(\"adaptiveLayout\")\r\n    },\r\n    _reinit: function() {\r\n        var that = this;\r\n        _setCanvasValues(that._canvas);\r\n        that._reinitAxes();\r\n        that._requestChange([\"DATA_SOURCE\", \"DATA_INIT\", \"CORRECT_AXIS\", \"FULL_RENDER\"])\r\n    },\r\n    _correctAxes: noop,\r\n    _createHtmlStructure: function() {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var root = renderer.root;\r\n        var createConstantLinesGroup = function() {\r\n            return renderer.g().attr({\r\n                \"class\": \"dxc-constant-lines-group\"\r\n            }).linkOn(root, \"constant-lines\")\r\n        };\r\n        that._constantLinesGroup = {\r\n            dispose: function() {\r\n                this.under.dispose();\r\n                this.above.dispose()\r\n            },\r\n            linkOff: function() {\r\n                this.under.linkOff();\r\n                this.above.linkOff()\r\n            },\r\n            clear: function() {\r\n                this.under.linkRemove().clear();\r\n                this.above.linkRemove().clear()\r\n            },\r\n            linkAppend: function() {\r\n                this.under.linkAppend();\r\n                this.above.linkAppend()\r\n            }\r\n        };\r\n        that._backgroundRect = renderer.rect().attr({\r\n            fill: \"gray\",\r\n            opacity: 1e-4\r\n        }).append(root);\r\n        that._panesBackgroundGroup = renderer.g().attr({\r\n            \"class\": \"dxc-background\"\r\n        }).append(root);\r\n        that._stripsGroup = renderer.g().attr({\r\n            \"class\": \"dxc-strips-group\"\r\n        }).linkOn(root, \"strips\");\r\n        that._gridGroup = renderer.g().attr({\r\n            \"class\": \"dxc-grids-group\"\r\n        }).linkOn(root, \"grids\");\r\n        that._panesBorderGroup = renderer.g().attr({\r\n            \"class\": \"dxc-border\"\r\n        }).linkOn(root, \"border\");\r\n        that._axesGroup = renderer.g().attr({\r\n            \"class\": \"dxc-axes-group\"\r\n        }).linkOn(root, \"axes\");\r\n        that._labelAxesGroup = renderer.g().attr({\r\n            \"class\": \"dxc-strips-labels-group\"\r\n        }).linkOn(root, \"strips-labels\");\r\n        that._constantLinesGroup.under = createConstantLinesGroup();\r\n        that._seriesGroup = renderer.g().attr({\r\n            \"class\": \"dxc-series-group\"\r\n        }).linkOn(root, \"series\");\r\n        that._constantLinesGroup.above = createConstantLinesGroup();\r\n        that._scaleBreaksGroup = renderer.g().attr({\r\n            \"class\": \"dxc-scale-breaks\"\r\n        }).linkOn(root, \"scale-breaks\");\r\n        that._labelsGroup = renderer.g().attr({\r\n            \"class\": \"dxc-labels-group\"\r\n        }).linkOn(root, \"labels\");\r\n        that._crosshairCursorGroup = renderer.g().attr({\r\n            \"class\": \"dxc-crosshair-cursor\"\r\n        }).linkOn(root, \"crosshair\");\r\n        that._legendGroup = renderer.g().attr({\r\n            \"class\": \"dxc-legend\",\r\n            \"clip-path\": that._getCanvasClipRectID()\r\n        }).linkOn(root, \"legend\").linkAppend(root).enableLinks();\r\n        that._scrollBarGroup = renderer.g().attr({\r\n            \"class\": \"dxc-scroll-bar\"\r\n        }).linkOn(root, \"scroll-bar\")\r\n    },\r\n    _disposeObjectsInArray: function(propName, fieldNames) {\r\n        _each(this[propName] || [], function(_, item) {\r\n            if (fieldNames && item) {\r\n                _each(fieldNames, function(_, field) {\r\n                    item[field] && item[field].dispose()\r\n                })\r\n            } else {\r\n                item && item.dispose()\r\n            }\r\n        });\r\n        this[propName] = null\r\n    },\r\n    _disposeCore: function() {\r\n        var that = this;\r\n        var disposeObject = function(propName) {\r\n            if (that[propName]) {\r\n                that[propName].dispose();\r\n                that[propName] = null\r\n            }\r\n        };\r\n        var unlinkGroup = function(name) {\r\n            that[name].linkOff()\r\n        };\r\n        var disposeObjectsInArray = this._disposeObjectsInArray;\r\n        that._renderer.stopAllAnimations();\r\n        disposeObjectsInArray.call(that, \"series\");\r\n        disposeObject(\"_tracker\");\r\n        disposeObject(\"_crosshair\");\r\n        that.layoutManager = that._userOptions = that._canvas = that._groupsData = null;\r\n        unlinkGroup(\"_stripsGroup\");\r\n        unlinkGroup(\"_gridGroup\");\r\n        unlinkGroup(\"_axesGroup\");\r\n        unlinkGroup(\"_constantLinesGroup\");\r\n        unlinkGroup(\"_labelAxesGroup\");\r\n        unlinkGroup(\"_panesBorderGroup\");\r\n        unlinkGroup(\"_seriesGroup\");\r\n        unlinkGroup(\"_labelsGroup\");\r\n        unlinkGroup(\"_crosshairCursorGroup\");\r\n        unlinkGroup(\"_legendGroup\");\r\n        unlinkGroup(\"_scrollBarGroup\");\r\n        unlinkGroup(\"_scaleBreaksGroup\");\r\n        disposeObject(\"_canvasClipRect\");\r\n        disposeObject(\"_panesBackgroundGroup\");\r\n        disposeObject(\"_backgroundRect\");\r\n        disposeObject(\"_stripsGroup\");\r\n        disposeObject(\"_gridGroup\");\r\n        disposeObject(\"_axesGroup\");\r\n        disposeObject(\"_constantLinesGroup\");\r\n        disposeObject(\"_labelAxesGroup\");\r\n        disposeObject(\"_panesBorderGroup\");\r\n        disposeObject(\"_seriesGroup\");\r\n        disposeObject(\"_labelsGroup\");\r\n        disposeObject(\"_crosshairCursorGroup\");\r\n        disposeObject(\"_legendGroup\");\r\n        disposeObject(\"_scrollBarGroup\");\r\n        disposeObject(\"_scaleBreaksGroup\")\r\n    },\r\n    _getAnimationOptions: function() {\r\n        return this._themeManager.getOptions(\"animation\")\r\n    },\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: 400,\r\n            height: 400\r\n        }\r\n    },\r\n    _getOption: function(name) {\r\n        return this._themeManager.getOptions(name)\r\n    },\r\n    _applySize: function(rect) {\r\n        this._rect = rect.slice();\r\n        if (!this._changes.has(\"FULL_RENDER\")) {\r\n            this._processRefreshData(RESIZE_REFRESH_ACTION)\r\n        }\r\n    },\r\n    _resize: function() {\r\n        this._doRender(this.__renderOptions || {\r\n            animate: false,\r\n            isResize: true\r\n        })\r\n    },\r\n    _trackerType: \"ChartTracker\",\r\n    _createTracker: function() {\r\n        var that = this;\r\n        that._tracker = new trackerModule[that._trackerType]({\r\n            seriesGroup: that._seriesGroup,\r\n            renderer: that._renderer,\r\n            tooltip: that._tooltip,\r\n            legend: that._legend,\r\n            eventTrigger: that._eventTrigger\r\n        })\r\n    },\r\n    _getTrackerSettings: function() {\r\n        return extend({\r\n            chart: this\r\n        }, this._getSelectionModes())\r\n    },\r\n    _getSelectionModes: function() {\r\n        var themeManager = this._themeManager;\r\n        return {\r\n            seriesSelectionMode: themeManager.getOptions(\"seriesSelectionMode\"),\r\n            pointSelectionMode: themeManager.getOptions(\"pointSelectionMode\")\r\n        }\r\n    },\r\n    _updateTracker: function(trackerCanvases) {\r\n        var that = this;\r\n        that._tracker.update(that._getTrackerSettings());\r\n        that._tracker.setCanvases({\r\n            left: 0,\r\n            right: that._canvas.width,\r\n            top: 0,\r\n            bottom: that._canvas.height\r\n        }, trackerCanvases)\r\n    },\r\n    _createCanvasFromRect: function(rect) {\r\n        var currentCanvas = this._canvas;\r\n        return _setCanvasValues({\r\n            left: rect[0],\r\n            top: rect[1],\r\n            right: currentCanvas.width - rect[2],\r\n            bottom: currentCanvas.height - rect[3],\r\n            width: currentCanvas.width,\r\n            height: currentCanvas.height\r\n        })\r\n    },\r\n    _doRender: function(_options) {\r\n        var that = this;\r\n        var drawOptions;\r\n        var recreateCanvas;\r\n        if (0 === that._canvas.width && 0 === that._canvas.height) {\r\n            return\r\n        }\r\n        that._resetIsReady();\r\n        drawOptions = that._prepareDrawOptions(_options);\r\n        recreateCanvas = drawOptions.recreateCanvas;\r\n        that._preserveOriginalCanvas();\r\n        if (recreateCanvas) {\r\n            that.__currentCanvas = that._canvas\r\n        } else {\r\n            that._canvas = that.__currentCanvas\r\n        }\r\n        recreateCanvas && that._updateCanvasClipRect(that._canvas);\r\n        this._canvas = this._createCanvasFromRect(this._rect);\r\n        that._renderer.stopAllAnimations(true);\r\n        that._cleanGroups();\r\n        var startTime = new Date;\r\n        that._renderElements(drawOptions);\r\n        that._lastRenderingTime = new Date - startTime\r\n    },\r\n    _preserveOriginalCanvas: function() {\r\n        this.__originalCanvas = this._canvas;\r\n        this._canvas = extend({}, this._canvas)\r\n    },\r\n    _layoutAxes: noop,\r\n    _renderElements: function(drawOptions) {\r\n        var that = this;\r\n        var preparedOptions = that._prepareToRender(drawOptions);\r\n        var isRotated = that._isRotated();\r\n        var isLegendInside = that._isLegendInside();\r\n        var trackerCanvases = [];\r\n        extend({}, that._canvas);\r\n        var argBusinessRange;\r\n        var zoomMinArg;\r\n        var zoomMaxArg;\r\n        that._renderer.lock();\r\n        if (drawOptions.drawLegend && that._legend) {\r\n            that._legendGroup.linkAppend()\r\n        }\r\n        that.layoutManager.setOptions(that._layoutManagerOptions());\r\n        var layoutTargets = that._getLayoutTargets();\r\n        this._layoutAxes(function(needSpace) {\r\n            var axisDrawOptions = needSpace ? extend({}, drawOptions, {\r\n                animate: false\r\n            }) : drawOptions;\r\n            var canvas = that._renderAxes(axisDrawOptions, preparedOptions);\r\n            that._shrinkAxes(needSpace, canvas)\r\n        });\r\n        that._applyClipRects(preparedOptions);\r\n        that._appendSeriesGroups();\r\n        that._createCrosshairCursor();\r\n        layoutTargets.forEach(function(_ref) {\r\n            var canvas = _ref.canvas;\r\n            trackerCanvases.push({\r\n                left: canvas.left,\r\n                right: canvas.width - canvas.right,\r\n                top: canvas.top,\r\n                bottom: canvas.height - canvas.bottom\r\n            })\r\n        });\r\n        if (that._scrollBar) {\r\n            argBusinessRange = that._argumentAxes[0].getTranslator().getBusinessRange();\r\n            if (\"discrete\" === argBusinessRange.axisType && argBusinessRange.categories && argBusinessRange.categories.length <= 1 || \"discrete\" !== argBusinessRange.axisType && argBusinessRange.min === argBusinessRange.max) {\r\n                zoomMinArg = zoomMaxArg = void 0\r\n            } else {\r\n                zoomMinArg = argBusinessRange.minVisible;\r\n                zoomMaxArg = argBusinessRange.maxVisible\r\n            }\r\n            that._scrollBar.init(argBusinessRange, !that._argumentAxes[0].getOptions().valueMarginsEnabled).setPosition(zoomMinArg, zoomMaxArg)\r\n        }\r\n        that._updateTracker(trackerCanvases);\r\n        that._updateLegendPosition(drawOptions, isLegendInside);\r\n        that._applyPointMarkersAutoHiding();\r\n        that._renderSeries(drawOptions, isRotated, isLegendInside);\r\n        that._renderer.unlock()\r\n    },\r\n    _createCrosshairCursor: noop,\r\n    _appendSeriesGroups: function() {\r\n        this._seriesGroup.linkAppend();\r\n        this._labelsGroup.linkAppend();\r\n        this._appendAdditionalSeriesGroups()\r\n    },\r\n    _renderSeries: function(drawOptions, isRotated, isLegendInside) {\r\n        this._calculateSeriesLayout(drawOptions, isRotated);\r\n        this._renderSeriesElements(drawOptions, isRotated, isLegendInside)\r\n    },\r\n    _calculateSeriesLayout: function(drawOptions, isRotated) {\r\n        drawOptions.hideLayoutLabels = this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(), isRotated) && !this._themeManager.getOptions(\"adaptiveLayout\").keepLabels;\r\n        this._updateSeriesDimensions(drawOptions)\r\n    },\r\n    _renderSeriesElements: function(drawOptions, isRotated, isLegendInside) {\r\n        var that = this;\r\n        var i;\r\n        var series = that.series;\r\n        var singleSeries;\r\n        var seriesLength = series.length;\r\n        var resolveLabelOverlapping = that._themeManager.getOptions(\"resolveLabelOverlapping\");\r\n        for (i = 0; i < seriesLength; i++) {\r\n            singleSeries = series[i];\r\n            that._applyExtraSettings(singleSeries, drawOptions);\r\n            singleSeries.draw(drawOptions.animate && singleSeries.getPoints().length <= drawOptions.animationPointsLimit && that._renderer.animationEnabled(), drawOptions.hideLayoutLabels, that._getLegendCallBack(singleSeries))\r\n        }\r\n        if (\"none\" === resolveLabelOverlapping) {\r\n            that._adjustSeriesLabels(false)\r\n        } else {\r\n            that._locateLabels(resolveLabelOverlapping)\r\n        }\r\n        that._renderTrackers(isLegendInside);\r\n        that._tracker.repairTooltip();\r\n        that._clearCanvas();\r\n        that._renderExtraElements();\r\n        that._drawn();\r\n        that._renderCompleteHandler()\r\n    },\r\n    _locateLabels: function(resolveLabelOverlapping) {\r\n        this._resolveLabelOverlapping(resolveLabelOverlapping)\r\n    },\r\n    _renderExtraElements: function() {},\r\n    _clearCanvas: function() {\r\n        this._canvas = this.__originalCanvas\r\n    },\r\n    _resolveLabelOverlapping: function(resolveLabelOverlapping) {\r\n        var func;\r\n        switch (resolveLabelOverlapping) {\r\n            case \"stack\":\r\n                func = this._resolveLabelOverlappingStack;\r\n                break;\r\n            case \"hide\":\r\n                func = this._resolveLabelOverlappingHide;\r\n                break;\r\n            case \"shift\":\r\n                func = this._resolveLabelOverlappingShift\r\n        }\r\n        return typeUtils.isFunction(func) && func.call(this)\r\n    },\r\n    _getVisibleSeries: function() {\r\n        return commonUtils.grep(this.getAllSeries(), function(series) {\r\n            return series.isVisible()\r\n        })\r\n    },\r\n    _resolveLabelOverlappingHide: function() {\r\n        var labels = [];\r\n        var currentLabel;\r\n        var nextLabel;\r\n        var currentLabelRect;\r\n        var nextLabelRect;\r\n        var i;\r\n        var j;\r\n        var points;\r\n        var series = this._getVisibleSeries();\r\n        for (i = 0; i < series.length; i++) {\r\n            points = series[i].getVisiblePoints();\r\n            for (j = 0; j < points.length; j++) {\r\n                labels.push.apply(labels, points[j].getLabels())\r\n            }\r\n        }\r\n        for (i = 0; i < labels.length; i++) {\r\n            currentLabel = labels[i];\r\n            if (!currentLabel.isVisible()) {\r\n                continue\r\n            }\r\n            currentLabelRect = currentLabel.getBoundingRect();\r\n            for (j = i + 1; j < labels.length; j++) {\r\n                nextLabel = labels[j];\r\n                nextLabelRect = nextLabel.getBoundingRect();\r\n                if (checkOverlapping(currentLabelRect, nextLabelRect)) {\r\n                    nextLabel.draw(false)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _cleanGroups: function() {\r\n        var that = this;\r\n        that._stripsGroup.linkRemove().clear();\r\n        that._gridGroup.linkRemove().clear();\r\n        that._axesGroup.linkRemove().clear();\r\n        that._constantLinesGroup.above.clear();\r\n        that._labelAxesGroup.linkRemove().clear();\r\n        that._labelsGroup.linkRemove().clear();\r\n        that._crosshairCursorGroup.linkRemove().clear();\r\n        that._scaleBreaksGroup.linkRemove().clear()\r\n    },\r\n    _allowLegendInsidePosition: function() {\r\n        return false\r\n    },\r\n    _updateLegendPosition: noop,\r\n    _createLegend: function() {\r\n        var that = this;\r\n        var legendSettings = getLegendSettings(that._legendDataField);\r\n        that._legend = new legendModule.Legend({\r\n            renderer: that._renderer,\r\n            widget: that,\r\n            group: that._legendGroup,\r\n            backgroundClass: \"dxc-border\",\r\n            itemGroupClass: \"dxc-item\",\r\n            titleGroupClass: \"dxc-title\",\r\n            textField: legendSettings.textField,\r\n            getFormatObject: legendSettings.getFormatObject,\r\n            allowInsidePosition: that._allowLegendInsidePosition()\r\n        });\r\n        that._updateLegend();\r\n        that._layout.add(that._legend)\r\n    },\r\n    _updateLegend: function() {\r\n        var that = this;\r\n        var themeManager = that._themeManager;\r\n        var legendOptions = themeManager.getOptions(\"legend\");\r\n        var legendData = that._getLegendData();\r\n        legendOptions.containerBackgroundColor = themeManager.getOptions(\"containerBackgroundColor\");\r\n        legendOptions._incidentOccurred = that._incidentOccurred;\r\n        that._legend.update(legendData, legendOptions, themeManager.theme(\"legend\").title);\r\n        this._change([\"LAYOUT\"])\r\n    },\r\n    _prepareDrawOptions: function(drawOptions) {\r\n        var animationOptions = this._getAnimationOptions();\r\n        var options;\r\n        options = extend({}, {\r\n            force: false,\r\n            adjustAxes: true,\r\n            drawLegend: true,\r\n            drawTitle: true,\r\n            animate: animationOptions.enabled,\r\n            animationPointsLimit: animationOptions.maxPointCountSupported\r\n        }, drawOptions, this.__renderOptions);\r\n        if (!_isDefined(options.recreateCanvas)) {\r\n            options.recreateCanvas = options.adjustAxes && options.drawLegend && options.drawTitle\r\n        }\r\n        return options\r\n    },\r\n    _processRefreshData: function(newRefreshAction) {\r\n        var currentRefreshActionPosition = inArray(this._currentRefreshData, ACTIONS_BY_PRIORITY);\r\n        var newRefreshActionPosition = inArray(newRefreshAction, ACTIONS_BY_PRIORITY);\r\n        if (!this._currentRefreshData || currentRefreshActionPosition >= 0 && newRefreshActionPosition < currentRefreshActionPosition) {\r\n            this._currentRefreshData = newRefreshAction\r\n        }\r\n        this._requestChange([\"REFRESH\"])\r\n    },\r\n    _getLegendData: function() {\r\n        return _map(this._getLegendTargets(), function(item) {\r\n            var legendData = item.legendData;\r\n            var style = item.getLegendStyles;\r\n            var opacity = style.normal.opacity;\r\n            if (!item.visible) {\r\n                if (!_isDefined(opacity) || opacity > DEFAULT_OPACITY) {\r\n                    opacity = DEFAULT_OPACITY\r\n                }\r\n                legendData.textOpacity = DEFAULT_OPACITY\r\n            }\r\n            var opacityStyle = {\r\n                opacity: opacity\r\n            };\r\n            legendData.states = {\r\n                hover: extend({}, style.hover, opacityStyle),\r\n                selection: extend({}, style.selection, opacityStyle),\r\n                normal: extend({}, style.normal, opacityStyle)\r\n            };\r\n            return legendData\r\n        })\r\n    },\r\n    _getLegendOptions: function(item) {\r\n        return {\r\n            legendData: {\r\n                text: item[this._legendItemTextField],\r\n                id: item.index,\r\n                visible: true\r\n            },\r\n            getLegendStyles: item.getLegendStyles(),\r\n            visible: item.isVisible()\r\n        }\r\n    },\r\n    _disposeSeries: function(seriesIndex) {\r\n        var that = this;\r\n        if (that.series) {\r\n            if (_isDefined(seriesIndex)) {\r\n                that.series[seriesIndex].dispose();\r\n                that.series.splice(seriesIndex, 1)\r\n            } else {\r\n                _each(that.series, function(_, s) {\r\n                    return s.dispose()\r\n                });\r\n                that.series.length = 0\r\n            }\r\n        }\r\n        if (!that.series || !that.series.length) {\r\n            that.series = []\r\n        }\r\n    },\r\n    _disposeSeriesFamilies: function() {\r\n        var that = this;\r\n        _each(that.seriesFamilies || [], function(_, family) {\r\n            family.dispose()\r\n        });\r\n        that.seriesFamilies = null;\r\n        that._needHandleRenderComplete = true\r\n    },\r\n    _simulateOptionChange: function(fullName, value, previousValue) {\r\n        var that = this;\r\n        var optionSetter = coreDataUtils.compileSetter(fullName);\r\n        optionSetter(that._options, value, {\r\n            functionsAsIs: true,\r\n            merge: !that._getOptionsByReference()[fullName]\r\n        });\r\n        that._notifyOptionChanged(fullName, value, previousValue);\r\n        that._changes.reset()\r\n    },\r\n    _optionChanged: function(arg) {\r\n        this._themeManager.resetOptions(arg.name);\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _applyChanges: function() {\r\n        var that = this;\r\n        that._themeManager.update(that._options);\r\n        that.callBase.apply(that, arguments)\r\n    },\r\n    _optionChangesMap: {\r\n        animation: \"ANIMATION\",\r\n        dataSource: \"DATA_SOURCE\",\r\n        palette: \"PALETTE\",\r\n        paletteExtensionMode: \"PALETTE\",\r\n        legend: \"FORCE_DATA_INIT\",\r\n        seriesTemplate: \"FORCE_DATA_INIT\",\r\n        \"export\": \"FORCE_RENDER\",\r\n        valueAxis: \"AXES_AND_PANES\",\r\n        argumentAxis: \"AXES_AND_PANES\",\r\n        commonAxisSettings: \"AXES_AND_PANES\",\r\n        panes: \"AXES_AND_PANES\",\r\n        defaultPane: \"AXES_AND_PANES\",\r\n        useAggregation: \"AXES_AND_PANES\",\r\n        containerBackgroundColor: \"AXES_AND_PANES\",\r\n        rotated: \"ROTATED\",\r\n        autoHidePointMarkers: \"REFRESH_SERIES_REINIT\",\r\n        customizePoint: \"REFRESH_SERIES_REINIT\",\r\n        customizeLabel: \"REFRESH_SERIES_REINIT\",\r\n        scrollBar: \"SCROLL_BAR\"\r\n    },\r\n    _optionChangesOrder: [\"ROTATED\", \"PALETTE\", \"REFRESH_SERIES_REINIT\", \"AXES_AND_PANES\", \"INIT\", \"REINIT\", \"DATA_SOURCE\", \"REFRESH_SERIES_DATA_INIT\", \"DATA_INIT\", \"FORCE_DATA_INIT\", \"REFRESH_AXES\", \"CORRECT_AXIS\"],\r\n    _customChangesOrder: [\"ANIMATION\", \"REFRESH_SERIES_FAMILIES\", \"FORCE_RENDER\", \"VISUAL_RANGE\", \"SCROLL_BAR\", \"REINIT\", \"REFRESH\", \"FULL_RENDER\"],\r\n    _change_ANIMATION: function() {\r\n        this._renderer.updateAnimationOptions(this._getAnimationOptions())\r\n    },\r\n    _change_DATA_SOURCE: function() {\r\n        this._needHandleRenderComplete = true;\r\n        this._updateDataSource()\r\n    },\r\n    _change_PALETTE: function() {\r\n        this._themeManager.updatePalette();\r\n        this._refreshSeries(\"DATA_INIT\")\r\n    },\r\n    _change_REFRESH_SERIES_DATA_INIT: function() {\r\n        this._refreshSeries(\"DATA_INIT\")\r\n    },\r\n    _change_DATA_INIT: function() {\r\n        if ((!this.series || this.needToPopulateSeries) && !this._changes.has(\"FORCE_DATA_INIT\")) {\r\n            this._dataInit()\r\n        }\r\n    },\r\n    _change_FORCE_DATA_INIT: function() {\r\n        this._dataInit()\r\n    },\r\n    _change_REFRESH_SERIES_FAMILIES: function() {\r\n        this._processSeriesFamilies();\r\n        this._populateBusinessRange();\r\n        this._processRefreshData(FORCE_RENDER_REFRESH_ACTION)\r\n    },\r\n    _change_FORCE_RENDER: function() {\r\n        this._processRefreshData(FORCE_RENDER_REFRESH_ACTION)\r\n    },\r\n    _change_AXES_AND_PANES: function() {\r\n        this._refreshSeries(\"INIT\")\r\n    },\r\n    _change_ROTATED: function() {\r\n        this._createScrollBar();\r\n        this._refreshSeries(\"INIT\")\r\n    },\r\n    _change_REFRESH_SERIES_REINIT: function() {\r\n        this._refreshSeries(\"INIT\")\r\n    },\r\n    _change_REFRESH_AXES: function() {\r\n        var that = this;\r\n        _setCanvasValues(that._canvas);\r\n        that._reinitAxes();\r\n        that._requestChange([\"CORRECT_AXIS\", \"FULL_RENDER\"])\r\n    },\r\n    _change_SCROLL_BAR: function() {\r\n        this._createScrollBar();\r\n        this._processRefreshData(FORCE_RENDER_REFRESH_ACTION)\r\n    },\r\n    _change_REINIT: function() {\r\n        this._processRefreshData(REINIT_REFRESH_ACTION)\r\n    },\r\n    _refreshSeries: function(actionName) {\r\n        this.needToPopulateSeries = true;\r\n        this._requestChange([actionName])\r\n    },\r\n    _change_CORRECT_AXIS: function() {\r\n        this._correctAxes()\r\n    },\r\n    _doRefresh: function() {\r\n        var methodName = this._currentRefreshData;\r\n        if (methodName) {\r\n            this._currentRefreshData = null;\r\n            this._renderer.stopAllAnimations(true);\r\n            this[methodName]()\r\n        }\r\n    },\r\n    _updateCanvasClipRect: function(canvas) {\r\n        var that = this;\r\n        var width;\r\n        var height;\r\n        width = Math.max(canvas.width - canvas.left - canvas.right, 0);\r\n        height = Math.max(canvas.height - canvas.top - canvas.bottom, 0);\r\n        that._canvasClipRect.attr({\r\n            x: canvas.left,\r\n            y: canvas.top,\r\n            width: width,\r\n            height: height\r\n        });\r\n        that._backgroundRect.attr({\r\n            x: canvas.left,\r\n            y: canvas.top,\r\n            width: width,\r\n            height: height\r\n        })\r\n    },\r\n    _getCanvasClipRectID: function() {\r\n        return this._canvasClipRect.id\r\n    },\r\n    _dataSourceChangedHandler: function() {\r\n        if (this._changes.has(\"INIT\")) {\r\n            this._requestChange([\"DATA_INIT\"])\r\n        } else {\r\n            this._requestChange([\"FORCE_DATA_INIT\"])\r\n        }\r\n    },\r\n    _dataInit: function() {\r\n        this._dataSpecificInit(true)\r\n    },\r\n    _processSingleSeries: function(singleSeries) {\r\n        singleSeries.createPoints(false)\r\n    },\r\n    _handleSeriesDataUpdated: function() {\r\n        var _this = this;\r\n        if (this._getVisibleSeries().some(function(s) {\r\n                return s.useAggregation()\r\n            })) {\r\n            this._populateMarginOptions()\r\n        }\r\n        this.series.forEach(function(s) {\r\n            return _this._processSingleSeries(s)\r\n        }, this)\r\n    },\r\n    _dataSpecificInit: function(needRedraw) {\r\n        var that = this;\r\n        if (!that.series || that.needToPopulateSeries) {\r\n            that.series = that._populateSeries()\r\n        }\r\n        that._repopulateSeries();\r\n        that._seriesPopulatedHandlerCore();\r\n        that._populateBusinessRange();\r\n        that._tracker.updateSeries(that.series, this._changes.has(\"INIT\"));\r\n        that._updateLegend();\r\n        if (needRedraw) {\r\n            this._requestChange([\"FULL_RENDER\"])\r\n        }\r\n    },\r\n    _forceRender: function() {\r\n        this._doRender({\r\n            force: true\r\n        })\r\n    },\r\n    _repopulateSeries: function() {\r\n        var that = this;\r\n        var parsedData;\r\n        var themeManager = that._themeManager;\r\n        var data = that._dataSourceItems();\r\n        var dataValidatorOptions = themeManager.getOptions(\"dataPrepareSettings\");\r\n        var seriesTemplate = themeManager.getOptions(\"seriesTemplate\");\r\n        if (seriesTemplate) {\r\n            that._populateSeries(data)\r\n        }\r\n        that._groupSeries();\r\n        parsedData = dataValidatorModule.validateData(data, that._groupsData, that._incidentOccurred, dataValidatorOptions);\r\n        themeManager.resetPalette();\r\n        that.series.forEach(function(singleSeries) {\r\n            singleSeries.updateData(parsedData[singleSeries.getArgumentField()])\r\n        });\r\n        that._handleSeriesDataUpdated()\r\n    },\r\n    _renderCompleteHandler: function() {\r\n        var that = this;\r\n        var allSeriesInited = true;\r\n        if (that._needHandleRenderComplete) {\r\n            _each(that.series, function(_, s) {\r\n                allSeriesInited = allSeriesInited && s.canRenderCompleteHandle()\r\n            });\r\n            if (allSeriesInited) {\r\n                that._needHandleRenderComplete = false;\r\n                that._eventTrigger(\"done\", {\r\n                    target: that\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _dataIsReady: function() {\r\n        return _isDefined(this.option(\"dataSource\")) && this._dataIsLoaded()\r\n    },\r\n    _populateSeriesOptions: function(data) {\r\n        var that = this;\r\n        var themeManager = that._themeManager;\r\n        var seriesTemplate = themeManager.getOptions(\"seriesTemplate\");\r\n        var seriesOptions = seriesTemplate ? vizUtils.processSeriesTemplate(seriesTemplate, data || []) : that.option(\"series\");\r\n        var allSeriesOptions = _isArray(seriesOptions) ? seriesOptions : seriesOptions ? [seriesOptions] : [];\r\n        var extraOptions = that._getExtraOptions();\r\n        var particularSeriesOptions;\r\n        var seriesTheme;\r\n        var seriesThemes = [];\r\n        var seriesVisibilityChanged = function(target) {\r\n            that._specialProcessSeries();\r\n            that._populateBusinessRange(target && target.getValueAxis(), true);\r\n            that._renderer.stopAllAnimations(true);\r\n            that._updateLegend();\r\n            that._requestChange([\"FULL_RENDER\"])\r\n        };\r\n        for (var i = 0; i < allSeriesOptions.length; i++) {\r\n            particularSeriesOptions = extend(true, {}, allSeriesOptions[i], extraOptions);\r\n            if (!particularSeriesOptions.name) {\r\n                particularSeriesOptions.name = \"Series \" + (i + 1).toString()\r\n            }\r\n            particularSeriesOptions.rotated = that._isRotated();\r\n            particularSeriesOptions.customizePoint = themeManager.getOptions(\"customizePoint\");\r\n            particularSeriesOptions.customizeLabel = themeManager.getOptions(\"customizeLabel\");\r\n            particularSeriesOptions.visibilityChanged = seriesVisibilityChanged;\r\n            particularSeriesOptions.incidentOccurred = that._incidentOccurred;\r\n            seriesTheme = themeManager.getOptions(\"series\", particularSeriesOptions, allSeriesOptions.length);\r\n            if (that._checkPaneName(seriesTheme)) {\r\n                seriesThemes.push(seriesTheme)\r\n            }\r\n        }\r\n        return seriesThemes\r\n    },\r\n    _populateSeries: function(data) {\r\n        var that = this;\r\n        var seriesBasis = [];\r\n        var incidentOccurred = that._incidentOccurred;\r\n        var seriesThemes = that._populateSeriesOptions(data);\r\n        var particularSeries;\r\n        var disposeSeriesFamilies = false;\r\n        that.needToPopulateSeries = false;\r\n        _each(seriesThemes, function(_, theme) {\r\n            var curSeries = that.series && that.series.filter(function(s) {\r\n                return s.name === theme.name && seriesBasis.map(function(sb) {\r\n                    return sb.series\r\n                }).indexOf(s) === -1\r\n            })[0];\r\n            if (curSeries && curSeries.type === theme.type) {\r\n                seriesBasis.push({\r\n                    series: curSeries,\r\n                    options: theme\r\n                })\r\n            } else {\r\n                seriesBasis.push({\r\n                    options: theme\r\n                });\r\n                disposeSeriesFamilies = true\r\n            }\r\n        });\r\n        that._tracker.clearHover();\r\n        _reverseEach(that.series, function(index, series) {\r\n            if (!seriesBasis.some(function(s) {\r\n                    return series === s.series\r\n                })) {\r\n                that._disposeSeries(index);\r\n                disposeSeriesFamilies = true\r\n            }\r\n        });\r\n        !disposeSeriesFamilies && (disposeSeriesFamilies = seriesBasis.some(function(sb) {\r\n            return sb.series.name !== seriesThemes[sb.series.index].name\r\n        }));\r\n        that.series = [];\r\n        disposeSeriesFamilies && that._disposeSeriesFamilies();\r\n        that._themeManager.resetPalette();\r\n        var eventPipe = function(data) {\r\n            that.series.forEach(function(currentSeries) {\r\n                currentSeries.notify(data)\r\n            })\r\n        };\r\n        _each(seriesBasis, function(_, basis) {\r\n            var seriesTheme = basis.options;\r\n            var renderSettings = {\r\n                commonSeriesModes: that._getSelectionModes(),\r\n                argumentAxis: that.getArgumentAxis(),\r\n                valueAxis: that._getValueAxis(seriesTheme.pane, seriesTheme.axis)\r\n            };\r\n            if (basis.series) {\r\n                particularSeries = basis.series;\r\n                particularSeries.updateOptions(seriesTheme, renderSettings)\r\n            } else {\r\n                particularSeries = new seriesModule.Series(extend({\r\n                    renderer: that._renderer,\r\n                    seriesGroup: that._seriesGroup,\r\n                    labelsGroup: that._labelsGroup,\r\n                    eventTrigger: that._eventTrigger,\r\n                    eventPipe: eventPipe,\r\n                    incidentOccurred: incidentOccurred\r\n                }, renderSettings), seriesTheme)\r\n            }\r\n            if (!particularSeries.isUpdated) {\r\n                incidentOccurred(\"E2101\", [seriesTheme.type])\r\n            } else {\r\n                particularSeries.index = that.series.length;\r\n                that.series.push(particularSeries)\r\n            }\r\n        });\r\n        return that.series\r\n    },\r\n    getStackedPoints: function(point) {\r\n        var stackName = point.series.getStackName();\r\n        return this._getVisibleSeries().reduce(function(stackPoints, series) {\r\n            if (!_isDefined(series.getStackName()) && !_isDefined(stackName) || stackName === series.getStackName()) {\r\n                stackPoints = stackPoints.concat(series.getPointsByArg(point.argument))\r\n            }\r\n            return stackPoints\r\n        }, [])\r\n    },\r\n    getAllSeries: function() {\r\n        return (this.series || []).slice()\r\n    },\r\n    getSeriesByName: function(name) {\r\n        var found = null;\r\n        _each(this.series, function(i, singleSeries) {\r\n            if (singleSeries.name === name) {\r\n                found = singleSeries;\r\n                return false\r\n            }\r\n        });\r\n        return found\r\n    },\r\n    getSeriesByPos: function(pos) {\r\n        return (this.series || [])[pos]\r\n    },\r\n    clearSelection: function() {\r\n        this._tracker.clearSelection()\r\n    },\r\n    hideTooltip: function() {\r\n        this._tracker._hideTooltip()\r\n    },\r\n    clearHover: function() {\r\n        this._tracker.clearHover()\r\n    },\r\n    render: function(renderOptions) {\r\n        var that = this;\r\n        that.__renderOptions = renderOptions;\r\n        that.__forceRender = renderOptions && renderOptions.force;\r\n        that.callBase.apply(that, arguments);\r\n        that.__renderOptions = that.__forceRender = null;\r\n        return that\r\n    },\r\n    refresh: function() {\r\n        this._disposeSeries();\r\n        this._disposeSeriesFamilies();\r\n        this._requestChange([\"CONTAINER_SIZE\", \"REFRESH_SERIES_REINIT\"])\r\n    },\r\n    _getMinSize: function() {\r\n        var adaptiveLayout = this._layoutManagerOptions();\r\n        return [adaptiveLayout.width, adaptiveLayout.height]\r\n    },\r\n    _change_REFRESH: function() {\r\n        if (!this._changes.has(\"INIT\")) {\r\n            this._doRefresh()\r\n        } else {\r\n            this._currentRefreshData = null\r\n        }\r\n    },\r\n    _change_FULL_RENDER: function() {\r\n        this._forceRender()\r\n    },\r\n    _change_INIT: function() {\r\n        this._reinit()\r\n    },\r\n    _stopCurrentHandling: function() {\r\n        this._tracker.stopCurrentHandling()\r\n    }\r\n});\r\nREFRESH_SERIES_DATA_INIT_ACTION_OPTIONS.forEach(function(name) {\r\n    BaseChart.prototype._optionChangesMap[name] = \"REFRESH_SERIES_DATA_INIT\"\r\n});\r\nFORCE_RENDER_REFRESH_ACTION_OPTIONS.forEach(function(name) {\r\n    BaseChart.prototype._optionChangesMap[name] = \"FORCE_RENDER\"\r\n});\r\nREFRESH_SERIES_FAMILIES_ACTION_OPTIONS.forEach(function(name) {\r\n    BaseChart.prototype._optionChangesMap[name] = \"REFRESH_SERIES_FAMILIES\"\r\n});\r\nexports.overlapping = overlapping;\r\nexports.BaseChart = BaseChart;\r\nBaseChart.addPlugin(require(\"../core/export\").plugin);\r\nBaseChart.addPlugin(require(\"../core/title\").plugin);\r\nBaseChart.addPlugin(require(\"../core/tooltip\").plugin);\r\nBaseChart.addPlugin(require(\"../core/loading_indicator\").plugin);\r\nBaseChart.addPlugin(require(\"../core/data_source\").plugin);\r\nvar _change_TITLE = BaseChart.prototype._change_TITLE;\r\nBaseChart.prototype._change_TITLE = function() {\r\n    _change_TITLE.apply(this, arguments);\r\n    this._change([\"FORCE_RENDER\"])\r\n};\r\n"]},"metadata":{},"sourceType":"module"}