{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.filter_sync.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _utils = require(\"../filter_builder/utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\n\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\n\nvar _filtering = require(\"../shared/filtering\");\n\nvar _filtering2 = _interopRequireDefault(_filtering);\n\nvar _uiGrid_core5 = require(\"./ui.grid_core.filter_custom_operations\");\n\nvar _uiGrid_core6 = _interopRequireDefault(_uiGrid_core5);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar FILTER_ROW_OPERATIONS = [\"=\", \"<>\", \"<\", \"<=\", \">\", \">=\", \"notcontains\", \"contains\", \"startswith\", \"endswith\", \"between\"];\nvar FILTER_TYPES_INCLUDE = \"include\";\nvar FILTER_TYPES_EXCLUDE = \"exclude\";\n\nfunction getColumnIdentifier(column) {\n  return column.dataField || column.name;\n}\n\nfunction checkForErrors(columns) {\n  columns.forEach(function (column) {\n    var identifier = getColumnIdentifier(column);\n\n    if (!(0, _type.isDefined)(identifier) && column.allowFiltering) {\n      throw new _ui2.default.Error(\"E1049\", column.caption);\n    }\n  });\n}\n\nvar FilterSyncController = _uiGrid_core2.default.Controller.inherit(function () {\n  var getEmptyFilterValues = function getEmptyFilterValues() {\n    return {\n      filterType: FILTER_TYPES_INCLUDE,\n      filterValues: void 0\n    };\n  };\n\n  var canSyncHeaderFilterWithFilterRow = function canSyncHeaderFilterWithFilterRow(column) {\n    return !_filtering2.default.getGroupInterval(column) && !(column.headerFilter && column.headerFilter.dataSource);\n  };\n\n  var getHeaderFilterFromCondition = function getHeaderFilterFromCondition(headerFilterCondition, column) {\n    if (!headerFilterCondition) {\n      return getEmptyFilterValues();\n    }\n\n    var filterType;\n    var selectedFilterOperation = headerFilterCondition[1];\n    var value = headerFilterCondition[2];\n    var hasArrayValue = Array.isArray(value);\n\n    if (!hasArrayValue) {\n      if (!canSyncHeaderFilterWithFilterRow(column)) {\n        return getEmptyFilterValues();\n      }\n    }\n\n    switch (selectedFilterOperation) {\n      case \"anyof\":\n      case \"=\":\n        filterType = FILTER_TYPES_INCLUDE;\n        break;\n\n      case \"noneof\":\n      case \"<>\":\n        filterType = FILTER_TYPES_EXCLUDE;\n        break;\n\n      default:\n        return getEmptyFilterValues();\n    }\n\n    return {\n      filterType: filterType,\n      filterValues: hasArrayValue ? value : [value]\n    };\n  };\n\n  var getConditionFromFilterRow = function getConditionFromFilterRow(column) {\n    var value = column.filterValue;\n\n    if ((0, _type.isDefined)(value)) {\n      var operation = column.selectedFilterOperation || column.defaultFilterOperation || _utils2.default.getDefaultOperation(column);\n\n      var filter = [getColumnIdentifier(column), operation, column.filterValue];\n      return filter;\n    } else {\n      return null;\n    }\n  };\n\n  var getConditionFromHeaderFilter = function getConditionFromHeaderFilter(column) {\n    var selectedOperation;\n    var value;\n    var filterValues = column.filterValues;\n\n    if (!filterValues) {\n      return null;\n    }\n\n    if (canSyncHeaderFilterWithFilterRow(column) && 1 === column.filterValues.length && !Array.isArray(filterValues[0])) {\n      column.filterType === FILTER_TYPES_EXCLUDE ? selectedOperation = \"<>\" : selectedOperation = \"=\";\n      value = filterValues[0];\n    } else {\n      column.filterType === FILTER_TYPES_EXCLUDE ? selectedOperation = \"noneof\" : selectedOperation = \"anyof\";\n      value = filterValues;\n    }\n\n    return [getColumnIdentifier(column), selectedOperation, value];\n  };\n\n  var updateHeaderFilterCondition = function updateHeaderFilterCondition(columnsController, column, headerFilterCondition) {\n    var headerFilter = getHeaderFilterFromCondition(headerFilterCondition, column);\n    columnsController.columnOption(getColumnIdentifier(column), headerFilter);\n  };\n\n  var updateFilterRowCondition = function updateFilterRowCondition(columnsController, column, condition) {\n    var filterRowOptions;\n    var selectedFilterOperation = condition && condition[1];\n    var filterOperations = column.filterOperations || column.defaultFilterOperations;\n\n    if ((!filterOperations || filterOperations.indexOf(selectedFilterOperation) >= 0 || selectedFilterOperation === column.defaultFilterOperation) && FILTER_ROW_OPERATIONS.indexOf(selectedFilterOperation) >= 0) {\n      if (selectedFilterOperation === column.defaultFilterOperation && !(0, _type.isDefined)(column.selectedFilterOperation)) {\n        selectedFilterOperation = column.selectedFilterOperation;\n      }\n\n      filterRowOptions = {\n        filterValue: condition[2],\n        selectedFilterOperation: selectedFilterOperation\n      };\n    } else {\n      filterRowOptions = {\n        filterValue: void 0,\n        selectedFilterOperation: void 0\n      };\n    }\n\n    columnsController.columnOption(getColumnIdentifier(column), filterRowOptions);\n  };\n\n  return {\n    syncFilterValue: function syncFilterValue() {\n      var that = this;\n      var columnsController = that.getController(\"columns\");\n      var columns = columnsController.getFilteringColumns();\n      this._skipSyncColumnOptions = true;\n      columns.forEach(function (column) {\n        var filterConditions = _utils2.default.getMatchedConditions(that.option(\"filterValue\"), getColumnIdentifier(column));\n\n        if (1 === filterConditions.length) {\n          var filterCondition = filterConditions[0];\n          updateHeaderFilterCondition(columnsController, column, filterCondition);\n          updateFilterRowCondition(columnsController, column, filterCondition);\n        } else {\n          (0, _type.isDefined)(column.filterValues) && updateHeaderFilterCondition(columnsController, column);\n          (0, _type.isDefined)(column.filterValue) && updateFilterRowCondition(columnsController, column);\n        }\n      });\n      this._skipSyncColumnOptions = false;\n    },\n    _initSync: function _initSync() {\n      var columns = this.getController(\"columns\").getColumns();\n      var dataController = this.getController(\"data\");\n      var pageIndex = dataController.pageIndex();\n      checkForErrors(columns);\n\n      if (!this.option(\"filterValue\")) {\n        var filteringColumns = this.getController(\"columns\").getFilteringColumns();\n        var filterValue = this.getFilterValueFromColumns(filteringColumns);\n        this.option(\"filterValue\", filterValue);\n      }\n\n      this.syncFilterValue();\n      dataController.pageIndex(pageIndex);\n    },\n    init: function init() {\n      var _this = this;\n\n      var dataController = this.getController(\"data\");\n\n      if (dataController.isFilterSyncActive()) {\n        if (this.getController(\"columns\").isAllDataTypesDefined()) {\n          this._initSync();\n        } else {\n          dataController.dataSourceChanged.add(function () {\n            return _this._initSync();\n          });\n        }\n      }\n    },\n    _getSyncFilterRow: function _getSyncFilterRow(filterValue, column) {\n      var filter = getConditionFromFilterRow(column);\n\n      if ((0, _type.isDefined)(filter)) {\n        return _utils2.default.syncFilters(filterValue, filter);\n      } else {\n        return _utils2.default.removeFieldConditionsFromFilter(filterValue, getColumnIdentifier(column));\n      }\n    },\n    _getSyncHeaderFilter: function _getSyncHeaderFilter(filterValue, column) {\n      var filter = getConditionFromHeaderFilter(column);\n\n      if (filter) {\n        return _utils2.default.syncFilters(filterValue, filter);\n      } else {\n        return _utils2.default.removeFieldConditionsFromFilter(filterValue, getColumnIdentifier(column));\n      }\n    },\n    getFilterValueFromColumns: function getFilterValueFromColumns(columns) {\n      if (!this.getController(\"data\").isFilterSyncActive()) {\n        return null;\n      }\n\n      var filterValue = [\"and\"];\n      columns && columns.forEach(function (column) {\n        var headerFilter = getConditionFromHeaderFilter(column);\n        var filterRow = getConditionFromFilterRow(column);\n        headerFilter && _utils2.default.addItem(headerFilter, filterValue);\n        filterRow && _utils2.default.addItem(filterRow, filterValue);\n      });\n      return _utils2.default.getNormalizedFilter(filterValue);\n    },\n    syncFilterRow: function syncFilterRow(column, value) {\n      this.option(\"filterValue\", this._getSyncFilterRow(this.option(\"filterValue\"), column));\n    },\n    syncHeaderFilter: function syncHeaderFilter(column) {\n      this.option(\"filterValue\", this._getSyncHeaderFilter(this.option(\"filterValue\"), column));\n    },\n    getCustomFilterOperations: function getCustomFilterOperations() {\n      var filterBuilderCustomOperations = this.option(\"filterBuilder.customOperations\") || [];\n      return [_uiGrid_core6.default.anyOf(this.component), _uiGrid_core6.default.noneOf(this.component)].concat(filterBuilderCustomOperations);\n    },\n    publicMethods: function publicMethods() {\n      return [\"getCustomFilterOperations\"];\n    }\n  };\n}());\n\nvar DataControllerFilterSyncExtender = {\n  isFilterSyncActive: function isFilterSyncActive() {\n    var filterSyncEnabledValue = this.option(\"filterSyncEnabled\");\n    return \"auto\" === filterSyncEnabledValue ? this.option(\"filterPanel.visible\") : filterSyncEnabledValue;\n  },\n  skipCalculateColumnFilters: function skipCalculateColumnFilters() {\n    return (0, _type.isDefined)(this.option(\"filterValue\")) && this.isFilterSyncActive();\n  },\n  _calculateAdditionalFilter: function _calculateAdditionalFilter() {\n    var that = this;\n\n    if (false === that.option(\"filterPanel.filterEnabled\")) {\n      return that.callBase();\n    }\n\n    var filters = [that.callBase()];\n    var columns = that.getController(\"columns\").getFilteringColumns();\n    var filterValue = that.option(\"filterValue\");\n\n    if (that.isFilterSyncActive()) {\n      var currentColumn = that.getController(\"headerFilter\").getCurrentColumn();\n\n      if (currentColumn && filterValue) {\n        filterValue = _utils2.default.removeFieldConditionsFromFilter(filterValue, getColumnIdentifier(currentColumn));\n      }\n    }\n\n    var customOperations = that.getController(\"filterSync\").getCustomFilterOperations();\n\n    var calculatedFilterValue = _utils2.default.getFilterExpression(filterValue, columns, customOperations, \"filterBuilder\");\n\n    if (calculatedFilterValue) {\n      filters.push(calculatedFilterValue);\n    }\n\n    return _uiGrid_core4.default.combineFilters(filters);\n  },\n  _parseColumnPropertyName: function _parseColumnPropertyName(fullName) {\n    var matched = fullName.match(/.*\\.(.*)/);\n    return matched[1];\n  },\n  clearFilter: function clearFilter(filterName) {\n    this.component.beginUpdate();\n\n    if (arguments.length > 0) {\n      if (\"filterValue\" === filterName) {\n        this.option(\"filterValue\", null);\n      }\n\n      this.callBase(filterName);\n    } else {\n      this.option(\"filterValue\", null);\n      this.callBase();\n    }\n\n    this.component.endUpdate();\n  },\n  optionChanged: function optionChanged(args) {\n    switch (args.name) {\n      case \"filterValue\":\n        this._applyFilter();\n\n        this.isFilterSyncActive() && this.getController(\"filterSync\").syncFilterValue();\n        args.handled = true;\n        break;\n\n      case \"filterSyncEnabled\":\n        args.handled = true;\n        break;\n\n      case \"columns\":\n        if (this.isFilterSyncActive()) {\n          var column = this.getController(\"columns\").getColumnByPath(args.fullName);\n          var filterSyncController = this.getController(\"filterSync\");\n\n          if (column && !filterSyncController._skipSyncColumnOptions) {\n            var propertyName = this._parseColumnPropertyName(args.fullName);\n\n            filterSyncController._skipSyncColumnOptions = true;\n\n            if (\"filterType\" === propertyName) {\n              if (FILTER_TYPES_EXCLUDE === args.value || FILTER_TYPES_EXCLUDE === args.previousValue) {\n                filterSyncController.syncHeaderFilter(column);\n              }\n            } else {\n              if (\"filterValues\" === propertyName) {\n                filterSyncController.syncHeaderFilter(column);\n              } else {\n                if ([\"filterValue\", \"selectedFilterOperation\"].indexOf(propertyName) > -1) {\n                  filterSyncController.syncFilterRow(column, column.filterValue);\n                }\n              }\n            }\n\n            filterSyncController._skipSyncColumnOptions = false;\n          }\n        }\n\n        this.callBase(args);\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n};\nvar ColumnHeadersViewFilterSyncExtender = {\n  _isHeaderFilterEmpty: function _isHeaderFilterEmpty(column) {\n    if (this.getController(\"data\").isFilterSyncActive()) {\n      return !_utils2.default.filterHasField(this.option(\"filterValue\"), getColumnIdentifier(column));\n    }\n\n    return this.callBase(column);\n  },\n  _needUpdateFilterIndicators: function _needUpdateFilterIndicators() {\n    return !this.getController(\"data\").isFilterSyncActive();\n  },\n  optionChanged: function optionChanged(args) {\n    if (\"filterValue\" === args.name) {\n      this._updateHeaderFilterIndicators();\n    } else {\n      this.callBase(args);\n    }\n  }\n};\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      filterValue: null,\n      filterSyncEnabled: \"auto\"\n    };\n  },\n  controllers: {\n    filterSync: FilterSyncController\n  },\n  extenders: {\n    controllers: {\n      data: DataControllerFilterSyncExtender\n    },\n    views: {\n      columnHeadersView: ColumnHeadersViewFilterSyncExtender\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.filter_sync.js"],"names":["_type","require","_uiGrid_core","_uiGrid_core2","_interopRequireDefault","_utils","_utils2","_ui","_ui2","_uiGrid_core3","_uiGrid_core4","_filtering","_filtering2","_uiGrid_core5","_uiGrid_core6","obj","FILTER_ROW_OPERATIONS","FILTER_TYPES_INCLUDE","FILTER_TYPES_EXCLUDE","column","columns","identifier","getColumnIdentifier","FilterSyncController","getEmptyFilterValues","filterType","filterValues","canSyncHeaderFilterWithFilterRow","getHeaderFilterFromCondition","selectedFilterOperation","headerFilterCondition","value","hasArrayValue","Array","getConditionFromFilterRow","operation","filter","getConditionFromHeaderFilter","selectedOperation","updateHeaderFilterCondition","headerFilter","columnsController","updateFilterRowCondition","condition","filterOperations","filterRowOptions","filterValue","syncFilterValue","that","filterConditions","filterCondition","_initSync","dataController","pageIndex","checkForErrors","filteringColumns","init","_this","_getSyncFilterRow","_getSyncHeaderFilter","getFilterValueFromColumns","filterRow","syncFilterRow","syncHeaderFilter","getCustomFilterOperations","filterBuilderCustomOperations","publicMethods","DataControllerFilterSyncExtender","isFilterSyncActive","filterSyncEnabledValue","skipCalculateColumnFilters","_calculateAdditionalFilter","filters","currentColumn","customOperations","calculatedFilterValue","_parseColumnPropertyName","matched","fullName","clearFilter","arguments","optionChanged","args","filterSyncController","propertyName","ColumnHeadersViewFilterSyncExtender","_isHeaderFilterEmpty","_needUpdateFilterIndicators","module","defaultOptions","filterSyncEnabled","controllers","filterSync","extenders","data","views","columnHeadersView"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.filter_sync.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _utils = require(\"../filter_builder/utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _ui = require(\"../widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\r\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\r\nvar _filtering = require(\"../shared/filtering\");\r\nvar _filtering2 = _interopRequireDefault(_filtering);\r\nvar _uiGrid_core5 = require(\"./ui.grid_core.filter_custom_operations\");\r\nvar _uiGrid_core6 = _interopRequireDefault(_uiGrid_core5);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar FILTER_ROW_OPERATIONS = [\"=\", \"<>\", \"<\", \"<=\", \">\", \">=\", \"notcontains\", \"contains\", \"startswith\", \"endswith\", \"between\"];\r\nvar FILTER_TYPES_INCLUDE = \"include\";\r\nvar FILTER_TYPES_EXCLUDE = \"exclude\";\r\n\r\nfunction getColumnIdentifier(column) {\r\n    return column.dataField || column.name\r\n}\r\n\r\nfunction checkForErrors(columns) {\r\n    columns.forEach(function(column) {\r\n        var identifier = getColumnIdentifier(column);\r\n        if (!(0, _type.isDefined)(identifier) && column.allowFiltering) {\r\n            throw new _ui2.default.Error(\"E1049\", column.caption)\r\n        }\r\n    })\r\n}\r\nvar FilterSyncController = _uiGrid_core2.default.Controller.inherit(function() {\r\n    var getEmptyFilterValues = function() {\r\n        return {\r\n            filterType: FILTER_TYPES_INCLUDE,\r\n            filterValues: void 0\r\n        }\r\n    };\r\n    var canSyncHeaderFilterWithFilterRow = function(column) {\r\n        return !_filtering2.default.getGroupInterval(column) && !(column.headerFilter && column.headerFilter.dataSource)\r\n    };\r\n    var getHeaderFilterFromCondition = function(headerFilterCondition, column) {\r\n        if (!headerFilterCondition) {\r\n            return getEmptyFilterValues()\r\n        }\r\n        var filterType;\r\n        var selectedFilterOperation = headerFilterCondition[1];\r\n        var value = headerFilterCondition[2];\r\n        var hasArrayValue = Array.isArray(value);\r\n        if (!hasArrayValue) {\r\n            if (!canSyncHeaderFilterWithFilterRow(column)) {\r\n                return getEmptyFilterValues()\r\n            }\r\n        }\r\n        switch (selectedFilterOperation) {\r\n            case \"anyof\":\r\n            case \"=\":\r\n                filterType = FILTER_TYPES_INCLUDE;\r\n                break;\r\n            case \"noneof\":\r\n            case \"<>\":\r\n                filterType = FILTER_TYPES_EXCLUDE;\r\n                break;\r\n            default:\r\n                return getEmptyFilterValues()\r\n        }\r\n        return {\r\n            filterType: filterType,\r\n            filterValues: hasArrayValue ? value : [value]\r\n        }\r\n    };\r\n    var getConditionFromFilterRow = function(column) {\r\n        var value = column.filterValue;\r\n        if ((0, _type.isDefined)(value)) {\r\n            var operation = column.selectedFilterOperation || column.defaultFilterOperation || _utils2.default.getDefaultOperation(column);\r\n            var filter = [getColumnIdentifier(column), operation, column.filterValue];\r\n            return filter\r\n        } else {\r\n            return null\r\n        }\r\n    };\r\n    var getConditionFromHeaderFilter = function(column) {\r\n        var selectedOperation;\r\n        var value;\r\n        var filterValues = column.filterValues;\r\n        if (!filterValues) {\r\n            return null\r\n        }\r\n        if (canSyncHeaderFilterWithFilterRow(column) && 1 === column.filterValues.length && !Array.isArray(filterValues[0])) {\r\n            column.filterType === FILTER_TYPES_EXCLUDE ? selectedOperation = \"<>\" : selectedOperation = \"=\";\r\n            value = filterValues[0]\r\n        } else {\r\n            column.filterType === FILTER_TYPES_EXCLUDE ? selectedOperation = \"noneof\" : selectedOperation = \"anyof\";\r\n            value = filterValues\r\n        }\r\n        return [getColumnIdentifier(column), selectedOperation, value]\r\n    };\r\n    var updateHeaderFilterCondition = function(columnsController, column, headerFilterCondition) {\r\n        var headerFilter = getHeaderFilterFromCondition(headerFilterCondition, column);\r\n        columnsController.columnOption(getColumnIdentifier(column), headerFilter)\r\n    };\r\n    var updateFilterRowCondition = function(columnsController, column, condition) {\r\n        var filterRowOptions;\r\n        var selectedFilterOperation = condition && condition[1];\r\n        var filterOperations = column.filterOperations || column.defaultFilterOperations;\r\n        if ((!filterOperations || filterOperations.indexOf(selectedFilterOperation) >= 0 || selectedFilterOperation === column.defaultFilterOperation) && FILTER_ROW_OPERATIONS.indexOf(selectedFilterOperation) >= 0) {\r\n            if (selectedFilterOperation === column.defaultFilterOperation && !(0, _type.isDefined)(column.selectedFilterOperation)) {\r\n                selectedFilterOperation = column.selectedFilterOperation\r\n            }\r\n            filterRowOptions = {\r\n                filterValue: condition[2],\r\n                selectedFilterOperation: selectedFilterOperation\r\n            }\r\n        } else {\r\n            filterRowOptions = {\r\n                filterValue: void 0,\r\n                selectedFilterOperation: void 0\r\n            }\r\n        }\r\n        columnsController.columnOption(getColumnIdentifier(column), filterRowOptions)\r\n    };\r\n    return {\r\n        syncFilterValue: function() {\r\n            var that = this;\r\n            var columnsController = that.getController(\"columns\");\r\n            var columns = columnsController.getFilteringColumns();\r\n            this._skipSyncColumnOptions = true;\r\n            columns.forEach(function(column) {\r\n                var filterConditions = _utils2.default.getMatchedConditions(that.option(\"filterValue\"), getColumnIdentifier(column));\r\n                if (1 === filterConditions.length) {\r\n                    var filterCondition = filterConditions[0];\r\n                    updateHeaderFilterCondition(columnsController, column, filterCondition);\r\n                    updateFilterRowCondition(columnsController, column, filterCondition)\r\n                } else {\r\n                    (0, _type.isDefined)(column.filterValues) && updateHeaderFilterCondition(columnsController, column);\r\n                    (0, _type.isDefined)(column.filterValue) && updateFilterRowCondition(columnsController, column)\r\n                }\r\n            });\r\n            this._skipSyncColumnOptions = false\r\n        },\r\n        _initSync: function() {\r\n            var columns = this.getController(\"columns\").getColumns();\r\n            var dataController = this.getController(\"data\");\r\n            var pageIndex = dataController.pageIndex();\r\n            checkForErrors(columns);\r\n            if (!this.option(\"filterValue\")) {\r\n                var filteringColumns = this.getController(\"columns\").getFilteringColumns();\r\n                var filterValue = this.getFilterValueFromColumns(filteringColumns);\r\n                this.option(\"filterValue\", filterValue)\r\n            }\r\n            this.syncFilterValue();\r\n            dataController.pageIndex(pageIndex)\r\n        },\r\n        init: function() {\r\n            var _this = this;\r\n            var dataController = this.getController(\"data\");\r\n            if (dataController.isFilterSyncActive()) {\r\n                if (this.getController(\"columns\").isAllDataTypesDefined()) {\r\n                    this._initSync()\r\n                } else {\r\n                    dataController.dataSourceChanged.add(function() {\r\n                        return _this._initSync()\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        _getSyncFilterRow: function(filterValue, column) {\r\n            var filter = getConditionFromFilterRow(column);\r\n            if ((0, _type.isDefined)(filter)) {\r\n                return _utils2.default.syncFilters(filterValue, filter)\r\n            } else {\r\n                return _utils2.default.removeFieldConditionsFromFilter(filterValue, getColumnIdentifier(column))\r\n            }\r\n        },\r\n        _getSyncHeaderFilter: function(filterValue, column) {\r\n            var filter = getConditionFromHeaderFilter(column);\r\n            if (filter) {\r\n                return _utils2.default.syncFilters(filterValue, filter)\r\n            } else {\r\n                return _utils2.default.removeFieldConditionsFromFilter(filterValue, getColumnIdentifier(column))\r\n            }\r\n        },\r\n        getFilterValueFromColumns: function(columns) {\r\n            if (!this.getController(\"data\").isFilterSyncActive()) {\r\n                return null\r\n            }\r\n            var filterValue = [\"and\"];\r\n            columns && columns.forEach(function(column) {\r\n                var headerFilter = getConditionFromHeaderFilter(column);\r\n                var filterRow = getConditionFromFilterRow(column);\r\n                headerFilter && _utils2.default.addItem(headerFilter, filterValue);\r\n                filterRow && _utils2.default.addItem(filterRow, filterValue)\r\n            });\r\n            return _utils2.default.getNormalizedFilter(filterValue)\r\n        },\r\n        syncFilterRow: function(column, value) {\r\n            this.option(\"filterValue\", this._getSyncFilterRow(this.option(\"filterValue\"), column))\r\n        },\r\n        syncHeaderFilter: function(column) {\r\n            this.option(\"filterValue\", this._getSyncHeaderFilter(this.option(\"filterValue\"), column))\r\n        },\r\n        getCustomFilterOperations: function() {\r\n            var filterBuilderCustomOperations = this.option(\"filterBuilder.customOperations\") || [];\r\n            return [_uiGrid_core6.default.anyOf(this.component), _uiGrid_core6.default.noneOf(this.component)].concat(filterBuilderCustomOperations)\r\n        },\r\n        publicMethods: function() {\r\n            return [\"getCustomFilterOperations\"]\r\n        }\r\n    }\r\n}());\r\nvar DataControllerFilterSyncExtender = {\r\n    isFilterSyncActive: function() {\r\n        var filterSyncEnabledValue = this.option(\"filterSyncEnabled\");\r\n        return \"auto\" === filterSyncEnabledValue ? this.option(\"filterPanel.visible\") : filterSyncEnabledValue\r\n    },\r\n    skipCalculateColumnFilters: function() {\r\n        return (0, _type.isDefined)(this.option(\"filterValue\")) && this.isFilterSyncActive()\r\n    },\r\n    _calculateAdditionalFilter: function() {\r\n        var that = this;\r\n        if (false === that.option(\"filterPanel.filterEnabled\")) {\r\n            return that.callBase()\r\n        }\r\n        var filters = [that.callBase()];\r\n        var columns = that.getController(\"columns\").getFilteringColumns();\r\n        var filterValue = that.option(\"filterValue\");\r\n        if (that.isFilterSyncActive()) {\r\n            var currentColumn = that.getController(\"headerFilter\").getCurrentColumn();\r\n            if (currentColumn && filterValue) {\r\n                filterValue = _utils2.default.removeFieldConditionsFromFilter(filterValue, getColumnIdentifier(currentColumn))\r\n            }\r\n        }\r\n        var customOperations = that.getController(\"filterSync\").getCustomFilterOperations();\r\n        var calculatedFilterValue = _utils2.default.getFilterExpression(filterValue, columns, customOperations, \"filterBuilder\");\r\n        if (calculatedFilterValue) {\r\n            filters.push(calculatedFilterValue)\r\n        }\r\n        return _uiGrid_core4.default.combineFilters(filters)\r\n    },\r\n    _parseColumnPropertyName: function(fullName) {\r\n        var matched = fullName.match(/.*\\.(.*)/);\r\n        return matched[1]\r\n    },\r\n    clearFilter: function(filterName) {\r\n        this.component.beginUpdate();\r\n        if (arguments.length > 0) {\r\n            if (\"filterValue\" === filterName) {\r\n                this.option(\"filterValue\", null)\r\n            }\r\n            this.callBase(filterName)\r\n        } else {\r\n            this.option(\"filterValue\", null);\r\n            this.callBase()\r\n        }\r\n        this.component.endUpdate()\r\n    },\r\n    optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"filterValue\":\r\n                this._applyFilter();\r\n                this.isFilterSyncActive() && this.getController(\"filterSync\").syncFilterValue();\r\n                args.handled = true;\r\n                break;\r\n            case \"filterSyncEnabled\":\r\n                args.handled = true;\r\n                break;\r\n            case \"columns\":\r\n                if (this.isFilterSyncActive()) {\r\n                    var column = this.getController(\"columns\").getColumnByPath(args.fullName);\r\n                    var filterSyncController = this.getController(\"filterSync\");\r\n                    if (column && !filterSyncController._skipSyncColumnOptions) {\r\n                        var propertyName = this._parseColumnPropertyName(args.fullName);\r\n                        filterSyncController._skipSyncColumnOptions = true;\r\n                        if (\"filterType\" === propertyName) {\r\n                            if (FILTER_TYPES_EXCLUDE === args.value || FILTER_TYPES_EXCLUDE === args.previousValue) {\r\n                                filterSyncController.syncHeaderFilter(column)\r\n                            }\r\n                        } else {\r\n                            if (\"filterValues\" === propertyName) {\r\n                                filterSyncController.syncHeaderFilter(column)\r\n                            } else {\r\n                                if ([\"filterValue\", \"selectedFilterOperation\"].indexOf(propertyName) > -1) {\r\n                                    filterSyncController.syncFilterRow(column, column.filterValue)\r\n                                }\r\n                            }\r\n                        }\r\n                        filterSyncController._skipSyncColumnOptions = false\r\n                    }\r\n                }\r\n                this.callBase(args);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n};\r\nvar ColumnHeadersViewFilterSyncExtender = {\r\n    _isHeaderFilterEmpty: function(column) {\r\n        if (this.getController(\"data\").isFilterSyncActive()) {\r\n            return !_utils2.default.filterHasField(this.option(\"filterValue\"), getColumnIdentifier(column))\r\n        }\r\n        return this.callBase(column)\r\n    },\r\n    _needUpdateFilterIndicators: function() {\r\n        return !this.getController(\"data\").isFilterSyncActive()\r\n    },\r\n    optionChanged: function(args) {\r\n        if (\"filterValue\" === args.name) {\r\n            this._updateHeaderFilterIndicators()\r\n        } else {\r\n            this.callBase(args)\r\n        }\r\n    }\r\n};\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            filterValue: null,\r\n            filterSyncEnabled: \"auto\"\r\n        }\r\n    },\r\n    controllers: {\r\n        filterSync: FilterSyncController\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            data: DataControllerFilterSyncExtender\r\n        },\r\n        views: {\r\n            columnHeadersView: ColumnHeadersViewFilterSyncExtender\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}