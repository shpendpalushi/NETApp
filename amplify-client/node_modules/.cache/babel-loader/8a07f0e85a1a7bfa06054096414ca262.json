{"ast":null,"code":"/**\r\n * DevExtreme (viz/range_selector/slider_marker.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar patchFontOptions = require(\"../core/utils\").patchFontOptions;\n\nvar SLIDER_MARKER_UPDATE_DELAY = 75;\n\nvar POINTER_SIZE = require(\"./common\").consts.pointerSize;\n\nfunction SliderMarker(renderer, root, isLeftPointer) {\n  var that = this;\n  that._isLeftPointer = isLeftPointer;\n  that._isOverlapped = false;\n  that._group = renderer.g().attr({\n    \"class\": \"slider-marker\"\n  }).append(root);\n  that._area = renderer.path(null, \"area\").append(that._group);\n  that._label = renderer.text().attr({\n    align: \"left\"\n  }).append(that._group);\n  that._tracker = renderer.rect().attr({\n    \"class\": \"slider-marker-tracker\",\n    fill: \"#000000\",\n    opacity: 1e-4\n  }).css({\n    cursor: \"pointer\"\n  }).append(that._group);\n  that._border = renderer.rect(0, 0, 1, 0);\n}\n\nSliderMarker.prototype = {\n  constructor: SliderMarker,\n  _getRectSize: function _getRectSize(textSize) {\n    return {\n      width: Math.round(2 * this._paddingLeftRight + textSize.width),\n      height: Math.round(2 * this._paddingTopBottom + textSize.height)\n    };\n  },\n  _getTextSize: function _getTextSize() {\n    var textSize = this._label.getBBox();\n\n    if (!this._textHeight && isFinite(textSize.height)) {\n      this._textHeight = textSize.height;\n    }\n\n    return {\n      width: textSize.width,\n      height: this._textHeight,\n      y: textSize.y\n    };\n  },\n  _getAreaPointsInfo: function _getAreaPointsInfo(textSize) {\n    var that = this;\n\n    var rectSize = that._getRectSize(textSize);\n\n    var rectWidth = rectSize.width;\n    var rectHeight = rectSize.height;\n    var rectLeftBorder = -rectWidth;\n    var rectRightBorder = 0;\n    var pointerRightPoint = POINTER_SIZE;\n    var pointerCenterPoint = 0;\n    var pointerLeftPoint = -POINTER_SIZE;\n    var position = that._position;\n    var isLeft = that._isLeftPointer;\n\n    var correctCloudBorders = function correctCloudBorders() {\n      rectLeftBorder++;\n      rectRightBorder++;\n      pointerRightPoint++;\n      pointerCenterPoint++;\n      pointerLeftPoint++;\n    };\n\n    var checkPointerBorders = function checkPointerBorders() {\n      if (pointerRightPoint > rectRightBorder) {\n        pointerRightPoint = rectRightBorder;\n      } else {\n        if (pointerLeftPoint < rectLeftBorder) {\n          pointerLeftPoint = rectLeftBorder;\n        }\n      }\n\n      isLeft && correctCloudBorders();\n    };\n\n    var borderPosition = position;\n\n    if (isLeft) {\n      if (position > that._range[1] - rectWidth) {\n        rectRightBorder = -position + that._range[1];\n        rectLeftBorder = rectRightBorder - rectWidth;\n        checkPointerBorders();\n        borderPosition += rectLeftBorder;\n      } else {\n        rectLeftBorder = pointerLeftPoint = 0;\n        rectRightBorder = rectWidth;\n      }\n    } else {\n      if (position - that._range[0] < rectWidth) {\n        rectLeftBorder = -(position - that._range[0]);\n        rectRightBorder = rectLeftBorder + rectWidth;\n        checkPointerBorders();\n        borderPosition += rectRightBorder;\n      } else {\n        pointerRightPoint = 0;\n        correctCloudBorders();\n      }\n    }\n\n    that._borderPosition = borderPosition;\n    return {\n      offset: rectLeftBorder,\n      isCut: (!isLeft || pointerCenterPoint !== pointerLeftPoint) && (isLeft || pointerCenterPoint !== pointerRightPoint),\n      points: [rectLeftBorder, 0, rectRightBorder, 0, rectRightBorder, rectHeight, pointerRightPoint, rectHeight, pointerCenterPoint, rectHeight + POINTER_SIZE, pointerLeftPoint, rectHeight, rectLeftBorder, rectHeight]\n    };\n  },\n  _update: function _update() {\n    var that = this;\n    var textSize;\n    var currentTextSize;\n    var rectSize;\n    clearTimeout(that._timeout);\n\n    that._label.attr({\n      text: that._text || \"\"\n    });\n\n    currentTextSize = that._getTextSize();\n    rectSize = that._getRectSize(currentTextSize);\n    textSize = that._textSize || currentTextSize;\n    textSize = that._textSize = currentTextSize.width > textSize.width || currentTextSize.height > textSize.height ? currentTextSize : textSize;\n    that._timeout = setTimeout(function () {\n      updateSliderMarker(currentTextSize, rectSize);\n      that._textSize = currentTextSize;\n    }, SLIDER_MARKER_UPDATE_DELAY);\n\n    function updateSliderMarker(size, rectSize) {\n      var points;\n      var pointsData;\n      var offset;\n      rectSize = rectSize || that._getRectSize(size);\n\n      that._group.attr({\n        translateY: -(rectSize.height + POINTER_SIZE)\n      });\n\n      pointsData = that._getAreaPointsInfo(size);\n      points = pointsData.points;\n      offset = pointsData.offset;\n\n      that._area.attr({\n        points: points\n      });\n\n      that._border.attr({\n        x: that._isLeftPointer ? points[0] - 1 : points[2],\n        height: pointsData.isCut ? rectSize.height : rectSize.height + POINTER_SIZE\n      });\n\n      that._tracker.attr({\n        translateX: offset,\n        width: rectSize.width,\n        height: rectSize.height + POINTER_SIZE\n      });\n\n      that._label.attr({\n        translateX: that._paddingLeftRight + offset,\n        translateY: rectSize.height / 2 - (size.y + size.height / 2)\n      });\n    }\n\n    updateSliderMarker(textSize);\n  },\n  setText: function setText(value) {\n    this._text = value;\n  },\n  setPosition: function setPosition(position) {\n    this._position = position;\n\n    this._update();\n  },\n  applyOptions: function applyOptions(options, screenRange) {\n    var that = this;\n    that._range = screenRange;\n    that._paddingLeftRight = options.paddingLeftRight;\n    that._paddingTopBottom = options.paddingTopBottom;\n    that._textHeight = null;\n    that._colors = [options.invalidRangeColor, options.color];\n\n    that._area.attr({\n      fill: options.color\n    });\n\n    that._border.attr({\n      fill: options.borderColor\n    });\n\n    that._label.css(patchFontOptions(options.font));\n\n    that._update();\n  },\n  getTracker: function getTracker() {\n    return this._tracker;\n  },\n  setValid: function setValid(isValid) {\n    this._area.attr({\n      fill: this._colors[Number(isValid)]\n    });\n  },\n  setColor: function setColor(color) {\n    this._area.attr({\n      fill: color\n    });\n  },\n  dispose: function dispose() {\n    clearTimeout(this._timeout);\n  },\n  setOverlapped: function setOverlapped(isOverlapped) {\n    var that = this;\n\n    if (that._isOverlapped !== isOverlapped) {\n      if (isOverlapped) {\n        that._border.append(that._group);\n      } else {\n        that._isOverlapped && that._border.remove();\n      }\n\n      that._isOverlapped = isOverlapped;\n    }\n  },\n  getBorderPosition: function getBorderPosition() {\n    return this._borderPosition;\n  }\n};\nmodule.exports = SliderMarker;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/range_selector/slider_marker.js"],"names":["patchFontOptions","require","SLIDER_MARKER_UPDATE_DELAY","POINTER_SIZE","that","renderer","align","fill","opacity","cursor","SliderMarker","constructor","_getRectSize","width","Math","textSize","height","_getTextSize","isFinite","y","_getAreaPointsInfo","rectSize","rectWidth","rectHeight","rectLeftBorder","rectRightBorder","pointerRightPoint","pointerCenterPoint","pointerLeftPoint","position","isLeft","correctCloudBorders","checkPointerBorders","borderPosition","offset","isCut","points","_update","clearTimeout","text","currentTextSize","setTimeout","updateSliderMarker","translateY","pointsData","x","translateX","size","setText","setPosition","applyOptions","options","color","borderColor","getTracker","setValid","Number","setColor","dispose","setOverlapped","getBorderPosition","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/range_selector/slider_marker.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar patchFontOptions = require(\"../core/utils\").patchFontOptions;\r\nvar SLIDER_MARKER_UPDATE_DELAY = 75;\r\nvar POINTER_SIZE = require(\"./common\").consts.pointerSize;\r\n\r\nfunction SliderMarker(renderer, root, isLeftPointer) {\r\n    var that = this;\r\n    that._isLeftPointer = isLeftPointer;\r\n    that._isOverlapped = false;\r\n    that._group = renderer.g().attr({\r\n        \"class\": \"slider-marker\"\r\n    }).append(root);\r\n    that._area = renderer.path(null, \"area\").append(that._group);\r\n    that._label = renderer.text().attr({\r\n        align: \"left\"\r\n    }).append(that._group);\r\n    that._tracker = renderer.rect().attr({\r\n        \"class\": \"slider-marker-tracker\",\r\n        fill: \"#000000\",\r\n        opacity: 1e-4\r\n    }).css({\r\n        cursor: \"pointer\"\r\n    }).append(that._group);\r\n    that._border = renderer.rect(0, 0, 1, 0)\r\n}\r\nSliderMarker.prototype = {\r\n    constructor: SliderMarker,\r\n    _getRectSize: function(textSize) {\r\n        return {\r\n            width: Math.round(2 * this._paddingLeftRight + textSize.width),\r\n            height: Math.round(2 * this._paddingTopBottom + textSize.height)\r\n        }\r\n    },\r\n    _getTextSize: function() {\r\n        var textSize = this._label.getBBox();\r\n        if (!this._textHeight && isFinite(textSize.height)) {\r\n            this._textHeight = textSize.height\r\n        }\r\n        return {\r\n            width: textSize.width,\r\n            height: this._textHeight,\r\n            y: textSize.y\r\n        }\r\n    },\r\n    _getAreaPointsInfo: function(textSize) {\r\n        var that = this;\r\n        var rectSize = that._getRectSize(textSize);\r\n        var rectWidth = rectSize.width;\r\n        var rectHeight = rectSize.height;\r\n        var rectLeftBorder = -rectWidth;\r\n        var rectRightBorder = 0;\r\n        var pointerRightPoint = POINTER_SIZE;\r\n        var pointerCenterPoint = 0;\r\n        var pointerLeftPoint = -POINTER_SIZE;\r\n        var position = that._position;\r\n        var isLeft = that._isLeftPointer;\r\n        var correctCloudBorders = function() {\r\n            rectLeftBorder++;\r\n            rectRightBorder++;\r\n            pointerRightPoint++;\r\n            pointerCenterPoint++;\r\n            pointerLeftPoint++\r\n        };\r\n        var checkPointerBorders = function() {\r\n            if (pointerRightPoint > rectRightBorder) {\r\n                pointerRightPoint = rectRightBorder\r\n            } else {\r\n                if (pointerLeftPoint < rectLeftBorder) {\r\n                    pointerLeftPoint = rectLeftBorder\r\n                }\r\n            }\r\n            isLeft && correctCloudBorders()\r\n        };\r\n        var borderPosition = position;\r\n        if (isLeft) {\r\n            if (position > that._range[1] - rectWidth) {\r\n                rectRightBorder = -position + that._range[1];\r\n                rectLeftBorder = rectRightBorder - rectWidth;\r\n                checkPointerBorders();\r\n                borderPosition += rectLeftBorder\r\n            } else {\r\n                rectLeftBorder = pointerLeftPoint = 0;\r\n                rectRightBorder = rectWidth\r\n            }\r\n        } else {\r\n            if (position - that._range[0] < rectWidth) {\r\n                rectLeftBorder = -(position - that._range[0]);\r\n                rectRightBorder = rectLeftBorder + rectWidth;\r\n                checkPointerBorders();\r\n                borderPosition += rectRightBorder\r\n            } else {\r\n                pointerRightPoint = 0;\r\n                correctCloudBorders()\r\n            }\r\n        }\r\n        that._borderPosition = borderPosition;\r\n        return {\r\n            offset: rectLeftBorder,\r\n            isCut: (!isLeft || pointerCenterPoint !== pointerLeftPoint) && (isLeft || pointerCenterPoint !== pointerRightPoint),\r\n            points: [rectLeftBorder, 0, rectRightBorder, 0, rectRightBorder, rectHeight, pointerRightPoint, rectHeight, pointerCenterPoint, rectHeight + POINTER_SIZE, pointerLeftPoint, rectHeight, rectLeftBorder, rectHeight]\r\n        }\r\n    },\r\n    _update: function() {\r\n        var that = this;\r\n        var textSize;\r\n        var currentTextSize;\r\n        var rectSize;\r\n        clearTimeout(that._timeout);\r\n        that._label.attr({\r\n            text: that._text || \"\"\r\n        });\r\n        currentTextSize = that._getTextSize();\r\n        rectSize = that._getRectSize(currentTextSize);\r\n        textSize = that._textSize || currentTextSize;\r\n        textSize = that._textSize = currentTextSize.width > textSize.width || currentTextSize.height > textSize.height ? currentTextSize : textSize;\r\n        that._timeout = setTimeout(function() {\r\n            updateSliderMarker(currentTextSize, rectSize);\r\n            that._textSize = currentTextSize\r\n        }, SLIDER_MARKER_UPDATE_DELAY);\r\n\r\n        function updateSliderMarker(size, rectSize) {\r\n            var points;\r\n            var pointsData;\r\n            var offset;\r\n            rectSize = rectSize || that._getRectSize(size);\r\n            that._group.attr({\r\n                translateY: -(rectSize.height + POINTER_SIZE)\r\n            });\r\n            pointsData = that._getAreaPointsInfo(size);\r\n            points = pointsData.points;\r\n            offset = pointsData.offset;\r\n            that._area.attr({\r\n                points: points\r\n            });\r\n            that._border.attr({\r\n                x: that._isLeftPointer ? points[0] - 1 : points[2],\r\n                height: pointsData.isCut ? rectSize.height : rectSize.height + POINTER_SIZE\r\n            });\r\n            that._tracker.attr({\r\n                translateX: offset,\r\n                width: rectSize.width,\r\n                height: rectSize.height + POINTER_SIZE\r\n            });\r\n            that._label.attr({\r\n                translateX: that._paddingLeftRight + offset,\r\n                translateY: rectSize.height / 2 - (size.y + size.height / 2)\r\n            })\r\n        }\r\n        updateSliderMarker(textSize)\r\n    },\r\n    setText: function(value) {\r\n        this._text = value\r\n    },\r\n    setPosition: function(position) {\r\n        this._position = position;\r\n        this._update()\r\n    },\r\n    applyOptions: function(options, screenRange) {\r\n        var that = this;\r\n        that._range = screenRange;\r\n        that._paddingLeftRight = options.paddingLeftRight;\r\n        that._paddingTopBottom = options.paddingTopBottom;\r\n        that._textHeight = null;\r\n        that._colors = [options.invalidRangeColor, options.color];\r\n        that._area.attr({\r\n            fill: options.color\r\n        });\r\n        that._border.attr({\r\n            fill: options.borderColor\r\n        });\r\n        that._label.css(patchFontOptions(options.font));\r\n        that._update()\r\n    },\r\n    getTracker: function() {\r\n        return this._tracker\r\n    },\r\n    setValid: function(isValid) {\r\n        this._area.attr({\r\n            fill: this._colors[Number(isValid)]\r\n        })\r\n    },\r\n    setColor: function(color) {\r\n        this._area.attr({\r\n            fill: color\r\n        })\r\n    },\r\n    dispose: function() {\r\n        clearTimeout(this._timeout)\r\n    },\r\n    setOverlapped: function(isOverlapped) {\r\n        var that = this;\r\n        if (that._isOverlapped !== isOverlapped) {\r\n            if (isOverlapped) {\r\n                that._border.append(that._group)\r\n            } else {\r\n                that._isOverlapped && that._border.remove()\r\n            }\r\n            that._isOverlapped = isOverlapped\r\n        }\r\n    },\r\n    getBorderPosition: function() {\r\n        return this._borderPosition\r\n    }\r\n};\r\nmodule.exports = SliderMarker;\r\n"]},"metadata":{},"sourceType":"module"}