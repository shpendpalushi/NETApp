{"ast":null,"code":"/**\r\n * DevExtreme (ui/lookup.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar window = require(\"../core/utils/window\").getWindow();\n\nvar support = require(\"../core/utils/support\");\n\nvar commonUtils = require(\"../core/utils/common\");\n\nvar domUtils = require(\"../core/utils/dom\");\n\nvar each = require(\"../core/utils/iterator\").each;\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar inkRipple = require(\"./widget/utils.ink_ripple\");\n\nvar messageLocalization = require(\"../localization/message\");\n\nvar devices = require(\"../core/devices\");\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar eventUtils = require(\"../events/utils\");\n\nvar DropDownList = require(\"./drop_down_editor/ui.drop_down_list\");\n\nvar themes = require(\"./themes\");\n\nvar clickEvent = require(\"../events/click\");\n\nvar Popover = require(\"./popover\");\n\nvar TextBox = require(\"./text_box\");\n\nvar ChildDefaultTemplate = require(\"../core/templates/child_default_template\").ChildDefaultTemplate;\n\nvar translator = require(\"../animation/translator\");\n\nvar LOOKUP_CLASS = \"dx-lookup\";\nvar LOOKUP_SEARCH_CLASS = \"dx-lookup-search\";\nvar LOOKUP_SEARCH_WRAPPER_CLASS = \"dx-lookup-search-wrapper\";\nvar LOOKUP_FIELD_CLASS = \"dx-lookup-field\";\nvar LOOKUP_ARROW_CLASS = \"dx-lookup-arrow\";\nvar LOOKUP_FIELD_WRAPPER_CLASS = \"dx-lookup-field-wrapper\";\nvar LOOKUP_POPUP_CLASS = \"dx-lookup-popup\";\nvar LOOKUP_POPUP_WRAPPER_CLASS = \"dx-lookup-popup-wrapper\";\nvar LOOKUP_POPUP_SEARCH_CLASS = \"dx-lookup-popup-search\";\nvar LOOKUP_POPOVER_MODE = \"dx-lookup-popover-mode\";\nvar LOOKUP_EMPTY_CLASS = \"dx-lookup-empty\";\nvar LOOKUP_POPOVER_FLIP_VERTICAL_CLASS = \"dx-popover-flipped-vertical\";\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\nvar POPUP_OPTION_MAP = {\n  popupWidth: \"width\",\n  popupHeight: \"height\"\n};\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\nvar MATERIAL_LOOKUP_LIST_ITEMS_COUNT = 4;\nvar MATERIAL_LOOKUP_LIST_PADDING = 8;\nvar Lookup = DropDownList.inherit({\n  _supportedKeys: function _supportedKeys() {\n    return extend(this.callBase(), {\n      space: function space(e) {\n        e.preventDefault();\n\n        this._validatedOpening();\n      },\n      enter: function enter() {\n        this._validatedOpening();\n      }\n    });\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      title: \"\",\n      titleTemplate: \"title\",\n      onTitleRendered: null,\n      placeholder: messageLocalization.format(\"Select\"),\n      searchPlaceholder: messageLocalization.format(\"Search\"),\n      searchEnabled: true,\n      cleanSearchOnOpening: true,\n      fullScreen: false,\n      showCancelButton: true,\n      showClearButton: false,\n      clearButtonText: messageLocalization.format(\"Clear\"),\n      applyButtonText: messageLocalization.format(\"OK\"),\n      popupWidth: function popupWidth() {\n        return .8 * $(window).width();\n      },\n      popupHeight: function popupHeight() {\n        return .8 * $(window).height();\n      },\n      shading: true,\n      closeOnOutsideClick: false,\n      position: void 0,\n      animation: {},\n      pullRefreshEnabled: false,\n      useNativeScrolling: true,\n      pullingDownText: messageLocalization.format(\"dxList-pullingDownText\"),\n      pulledDownText: messageLocalization.format(\"dxList-pulledDownText\"),\n      refreshingText: messageLocalization.format(\"dxList-refreshingText\"),\n      pageLoadingText: messageLocalization.format(\"dxList-pageLoadingText\"),\n      onScroll: null,\n      onPullRefresh: null,\n      onPageLoading: null,\n      pageLoadMode: \"scrollBottom\",\n      nextButtonText: messageLocalization.format(\"dxList-nextButtonText\"),\n      grouped: false,\n      groupTemplate: \"group\",\n      usePopover: false,\n      showDropDownButton: false,\n      showPopupTitle: true,\n      focusStateEnabled: false,\n      _scrollToSelectedItemEnabled: false,\n      useHiddenSubmitElement: true\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    var themeName = themes.current();\n    return this.callBase().concat([{\n      device: function device() {\n        return !support.nativeScrolling;\n      },\n      options: {\n        useNativeScrolling: false\n      }\n    }, {\n      device: function device(_device) {\n        return !devices.isSimulator() && \"desktop\" === devices.real().deviceType && \"generic\" === _device.platform;\n      },\n      options: {\n        usePopover: true,\n        popupHeight: \"auto\"\n      }\n    }, {\n      device: {\n        platform: \"ios\",\n        phone: true\n      },\n      options: {\n        fullScreen: true\n      }\n    }, {\n      device: {\n        platform: \"ios\",\n        tablet: true\n      },\n      options: {\n        popupWidth: function popupWidth() {\n          return .4 * Math.min($(window).width(), $(window).height());\n        },\n        popupHeight: \"auto\",\n        usePopover: true,\n        useInkRipple: false\n      }\n    }, {\n      device: function device() {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }, {\n      device: function device() {\n        return themes.isMaterial(themeName);\n      },\n      options: {\n        usePopover: false,\n        closeOnOutsideClick: true,\n        popupWidth: function () {\n          return $(this.element()).outerWidth();\n        }.bind(this),\n        popupHeight: function () {\n          return this._getPopupHeight(MATERIAL_LOOKUP_LIST_ITEMS_COUNT);\n        }.bind(this),\n        searchEnabled: false,\n        showCancelButton: false,\n        showPopupTitle: false,\n        position: {\n          my: \"left top\",\n          at: \"left top\",\n          of: this.element()\n        },\n        _scrollToSelectedItemEnabled: true\n      }\n    }]);\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates.group = new ChildDefaultTemplate(\"group\");\n    this._defaultTemplates.title = new ChildDefaultTemplate(\"title\");\n  },\n  _initMarkup: function _initMarkup() {\n    this.$element().addClass(LOOKUP_CLASS).toggleClass(LOOKUP_POPOVER_MODE, this.option(\"usePopover\"));\n    this.callBase();\n  },\n  _inputWrapper: function _inputWrapper() {\n    return this.$element().find(\".\" + LOOKUP_FIELD_WRAPPER_CLASS);\n  },\n  _dataSourceOptions: function _dataSourceOptions() {\n    return extend(this.callBase(), {\n      paginate: true\n    });\n  },\n  _fireContentReadyAction: commonUtils.noop,\n  _popupWrapperClass: function _popupWrapperClass() {\n    return \"\";\n  },\n  _renderInput: function _renderInput() {\n    var fieldClickAction = this._createAction(function () {\n      this._toggleOpenState();\n    }.bind(this));\n\n    this._$field = $(\"<div>\").addClass(LOOKUP_FIELD_CLASS);\n    eventsEngine.on(this._$field, eventUtils.addNamespace(clickEvent.name, this.NAME), function (e) {\n      fieldClickAction({\n        event: e\n      });\n    });\n    var $arrow = $(\"<div>\").addClass(LOOKUP_ARROW_CLASS);\n    this._$fieldWrapper = $(\"<div>\").addClass(LOOKUP_FIELD_WRAPPER_CLASS).append(this._$field).append($arrow).appendTo(this.$element());\n    this.option(\"useInkRipple\") && this._renderInkRipple();\n  },\n  _getInputContainer: function _getInputContainer() {\n    return this._$fieldWrapper;\n  },\n  _renderInkRipple: function _renderInkRipple() {\n    this._inkRipple = inkRipple.render();\n  },\n  _toggleOpenState: function _toggleOpenState() {\n    this.callBase();\n\n    if (!this.option(\"fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\n      this._setPopupPosition();\n    }\n  },\n  _toggleActiveState: function _toggleActiveState($element, value, e) {\n    this.callBase.apply(this, arguments);\n\n    if (!this._inkRipple) {\n      return;\n    }\n\n    var config = {\n      element: this._inputWrapper(),\n      event: e\n    };\n\n    if (value) {\n      this._inkRipple.showWave(config);\n    } else {\n      this._inkRipple.hideWave(config);\n    }\n  },\n  _renderField: function _renderField() {\n    var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\n\n    if (fieldTemplate && this.option(\"fieldTemplate\")) {\n      this._renderFieldTemplate(fieldTemplate);\n\n      return;\n    }\n\n    this._updateField(this.option(\"displayValue\") || this.option(\"placeholder\"));\n\n    this.$element().toggleClass(LOOKUP_EMPTY_CLASS, !this.option(\"selectedItem\"));\n  },\n  _renderDisplayText: function _renderDisplayText(text) {\n    if (this._input().length) {\n      this.callBase(text);\n    } else {\n      this._updateField(text);\n    }\n  },\n  _updateField: function _updateField(text) {\n    this._$field.text(text);\n  },\n  _renderFieldTemplate: function _renderFieldTemplate(template) {\n    this._$field.empty();\n\n    var data = this._fieldRenderData();\n\n    template.render({\n      model: data,\n      container: domUtils.getPublicElement(this._$field)\n    });\n  },\n  _fieldRenderData: function _fieldRenderData() {\n    return this.option(\"selectedItem\");\n  },\n  _popupShowingHandler: function _popupShowingHandler() {\n    this.callBase.apply(this, arguments);\n\n    if (this.option(\"cleanSearchOnOpening\")) {\n      if (this.option(\"searchEnabled\") && this._searchBox.option(\"value\")) {\n        this._searchBox.option(\"value\", \"\");\n\n        this._searchCanceled();\n      }\n\n      this._list && this._list.option(\"focusedElement\", null);\n    }\n\n    if (this.option(\"fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\n      this._popup.option(\"position\").of = $(window);\n    }\n  },\n  _scrollToSelectedItem: function _scrollToSelectedItem() {\n    var selectedIndex = this._list.option(\"selectedIndex\");\n\n    var listItems = this._list.option(\"items\");\n\n    var itemsCount = listItems.length;\n\n    if (0 !== itemsCount) {\n      if (this._list.option(\"grouped\")) {\n        this._list.scrollToItem({\n          group: itemsCount - 1,\n          item: listItems[itemsCount - 1].items.length - 1\n        });\n      } else {\n        this._list.scrollToItem(itemsCount - 1);\n      }\n\n      this._list.scrollToItem(selectedIndex);\n    }\n  },\n  _setPopupPosition: function _setPopupPosition() {\n    var selectedIndex = this._list.option(\"selectedIndex\");\n\n    var flipped = this._popup._$wrapper.hasClass(LOOKUP_POPOVER_FLIP_VERTICAL_CLASS);\n\n    if (selectedIndex === -1 || flipped) {\n      return;\n    }\n\n    var selectedListItem = $(this._list.element()).find(\".\" + LIST_ITEM_SELECTED_CLASS);\n\n    if (selectedListItem.offset().top < 0 || this._list.scrollTop() !== selectedListItem.position().top) {\n      this._scrollToSelectedItem();\n    }\n\n    var differenceOfHeights = (selectedListItem.height() - $(this.element()).height()) / 2;\n    var popupContentParent = $(this._popup.content()).parent();\n    var differenceOfOffsets = selectedListItem.offset().top - popupContentParent.offset().top;\n    var lookupTop = $(this.element()).offset().top;\n    var popupOffsetY = differenceOfHeights;\n\n    if (lookupTop > differenceOfOffsets) {\n      popupOffsetY += differenceOfOffsets;\n    } else {\n      this._scrollToSelectedItem();\n    }\n\n    var position = translator.locate(popupContentParent);\n    translator.move(popupContentParent, {\n      top: position.top - popupOffsetY\n    });\n  },\n  _getPopupHeight: function _getPopupHeight(listItemsCount) {\n    return this._list && this._list.itemElements() ? this._list.itemElements().height() * listItemsCount + 2 * MATERIAL_LOOKUP_LIST_PADDING + (this._$searchWrapper ? this._$searchWrapper.outerHeight() : 0) + (this._popup._$bottom ? this._popup._$bottom.outerHeight() : 0) + (this._popup._$title ? this._popup._$title.outerHeight() : 0) : \"auto\";\n  },\n  _renderPopup: function _renderPopup() {\n    if (this.option(\"usePopover\") && !this.option(\"fullScreen\")) {\n      this._renderPopover();\n    } else {\n      this.callBase();\n    }\n\n    this._$popup.addClass(LOOKUP_POPUP_CLASS);\n\n    this._popup._wrapper().addClass(LOOKUP_POPUP_WRAPPER_CLASS);\n  },\n  _popupOptionMap: function _popupOptionMap(optionName) {\n    return POPUP_OPTION_MAP[optionName] || optionName;\n  },\n  _renderPopover: function _renderPopover() {\n    this._popup = this._createComponent(this._$popup, Popover, extend(this._popupConfig(), {\n      showEvent: null,\n      hideEvent: null,\n      target: this.$element(),\n      fullScreen: false,\n      shading: false,\n      closeOnTargetScroll: true,\n      width: this._isInitialOptionValue(\"popupWidth\") ? function () {\n        return this.$element().outerWidth();\n      }.bind(this) : this._popupConfig().width\n    }));\n\n    this._popup.on({\n      showing: this._popupShowingHandler.bind(this),\n      shown: this._popupShownHandler.bind(this),\n      hiding: this._popupHidingHandler.bind(this),\n      hidden: this._popupHiddenHandler.bind(this)\n    });\n\n    this._setPopupContentId(this._popup.$content());\n\n    this._popup.option(\"onContentReady\", this._contentReadyHandler.bind(this));\n\n    this._contentReadyHandler();\n  },\n  _popupHidingHandler: function _popupHidingHandler() {\n    this.callBase();\n    this.option(\"focusStateEnabled\") && this.focus();\n  },\n  _popupHiddenHandler: function _popupHiddenHandler() {\n    this.callBase();\n\n    if (this.option(\"_scrollToSelectedItemEnabled\")) {\n      translator.resetPosition($(this._popup.content()).parent());\n    }\n  },\n  _preventFocusOnPopup: commonUtils.noop,\n  _popupConfig: function _popupConfig() {\n    var result = extend(this.callBase(), {\n      showTitle: this.option(\"showPopupTitle\"),\n      title: this.option(\"title\"),\n      titleTemplate: this._getTemplateByOption(\"titleTemplate\"),\n      onTitleRendered: this.option(\"onTitleRendered\"),\n      toolbarItems: this._getPopupToolbarItems(),\n      fullScreen: this.option(\"fullScreen\"),\n      shading: this.option(\"shading\"),\n      closeOnTargetScroll: false,\n      closeOnOutsideClick: this.option(\"closeOnOutsideClick\"),\n      onPositioned: null\n    });\n    delete result.animation;\n    delete result.position;\n\n    result.maxHeight = function () {\n      return $(window).height();\n    };\n\n    each([\"position\", \"animation\", \"popupWidth\", \"popupHeight\"], function (_, optionName) {\n      if (void 0 !== this.option(optionName)) {\n        result[this._popupOptionMap(optionName)] = this.option(optionName);\n      }\n    }.bind(this));\n    return result;\n  },\n  _getPopupToolbarItems: function _getPopupToolbarItems() {\n    var buttonsConfig = \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : [];\n\n    var cancelButton = this._getCancelButtonConfig();\n\n    if (cancelButton) {\n      buttonsConfig.push(cancelButton);\n    }\n\n    var clearButton = this._getClearButtonConfig();\n\n    if (clearButton) {\n      buttonsConfig.push(clearButton);\n    }\n\n    return this._applyButtonsLocation(buttonsConfig);\n  },\n  _popupToolbarItemsConfig: function _popupToolbarItemsConfig() {\n    return [{\n      shortcut: \"done\",\n      options: {\n        onClick: this._applyButtonHandler.bind(this),\n        text: this.option(\"applyButtonText\")\n      }\n    }];\n  },\n  _getCancelButtonConfig: function _getCancelButtonConfig() {\n    return this.option(\"showCancelButton\") ? {\n      shortcut: \"cancel\",\n      onClick: this._cancelButtonHandler.bind(this),\n      options: {\n        onInitialized: function (e) {\n          e.component.registerKeyHandler(\"escape\", this.close.bind(this));\n        }.bind(this),\n        text: this.option(\"cancelButtonText\")\n      }\n    } : null;\n  },\n  _getClearButtonConfig: function _getClearButtonConfig() {\n    return this.option(\"showClearButton\") ? {\n      shortcut: \"clear\",\n      onClick: this._resetValue.bind(this),\n      options: {\n        text: this.option(\"clearButtonText\")\n      }\n    } : null;\n  },\n  _applyButtonHandler: function _applyButtonHandler() {\n    this.option(\"value\", this._valueGetter(this._currentSelectedItem()));\n    this.callBase();\n  },\n  _cancelButtonHandler: function _cancelButtonHandler() {\n    this._refreshSelected();\n\n    this.callBase();\n  },\n  _refreshPopupVisibility: function _refreshPopupVisibility() {\n    if (this.option(\"opened\")) {\n      this._updatePopupHeight();\n    }\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    if (this.option(\"usePopover\") && !this.option(\"popupWidth\")) {\n      this.option(\"popupWidth\", this.$element().width());\n    }\n\n    this.callBase();\n  },\n  _updatePopupDimensions: function _updatePopupDimensions() {\n    this._updatePopupHeight();\n  },\n  _input: function _input() {\n    return this._$searchBox || this.callBase();\n  },\n  _renderPopupContent: function _renderPopupContent() {\n    this.callBase();\n\n    this._renderSearch();\n  },\n  _attachSearchChildProcessor: function _attachSearchChildProcessor(searchComponent) {\n    this._listKeyboardProcessor = this._listKeyboardProcessor || searchComponent._keyboardProcessor.attachChildProcessor();\n\n    this._setListOption(\"_keyboardProcessor\", this._listKeyboardProcessor);\n  },\n  _detachSearchChildProcessor: function _detachSearchChildProcessor() {\n    this._setListOption(\"_keyboardProcessor\", null);\n  },\n  _renderSearch: function _renderSearch() {\n    var isSearchEnabled = this.option(\"searchEnabled\");\n\n    this._toggleSearchClass(isSearchEnabled);\n\n    if (isSearchEnabled) {\n      var $searchWrapper = this._$searchWrapper = $(\"<div>\").addClass(LOOKUP_SEARCH_WRAPPER_CLASS);\n      var $searchBox = this._$searchBox = $(\"<div>\").addClass(LOOKUP_SEARCH_CLASS).appendTo($searchWrapper);\n      var currentDevice = devices.current();\n      var searchMode = currentDevice.android && currentDevice.version[0] >= 5 ? \"text\" : \"search\";\n      this._searchBox = this._createComponent($searchBox, TextBox, {\n        onDisposing: function () {\n          this._detachSearchChildProcessor();\n        }.bind(this),\n        onFocusIn: this._searchFocusHandler.bind(this),\n        onFocusOut: this._searchBlurHandler.bind(this),\n        mode: searchMode,\n        showClearButton: true,\n        valueChangeEvent: this.option(\"valueChangeEvent\"),\n        onValueChanged: this._searchHandler.bind(this)\n      });\n\n      this._registerSearchKeyHandlers();\n\n      $searchWrapper.insertBefore(this._$list);\n\n      this._setSearchPlaceholder();\n    }\n  },\n  _searchFocusHandler: function _searchFocusHandler(e) {\n    this._attachSearchChildProcessor(e.component);\n  },\n  _searchBlurHandler: function _searchBlurHandler() {\n    this._detachSearchChildProcessor();\n  },\n  _removeSearch: function _removeSearch() {\n    this._$searchWrapper && this._$searchWrapper.remove();\n    delete this._$searchWrapper;\n    this._$searchBox && this._$searchBox.remove();\n    delete this._$searchBox;\n    delete this._searchBox;\n  },\n  _selectListItemHandler: function _selectListItemHandler(e) {\n    var $itemElement = $(this._list.option(\"focusedElement\"));\n\n    if (!$itemElement.length) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this._selectListItem(e.itemData, $itemElement);\n  },\n  _registerSearchKeyHandlers: function _registerSearchKeyHandlers() {\n    this._searchBox.registerKeyHandler(\"escape\", this.close.bind(this));\n\n    this._searchBox.registerKeyHandler(\"enter\", this._selectListItemHandler.bind(this));\n\n    this._searchBox.registerKeyHandler(\"space\", this._selectListItemHandler.bind(this));\n\n    this._searchBox.registerKeyHandler(\"end\", commonUtils.noop);\n\n    this._searchBox.registerKeyHandler(\"home\", commonUtils.noop);\n  },\n  _toggleSearchClass: function _toggleSearchClass(isSearchEnabled) {\n    if (this._popup) {\n      this._popup._wrapper().toggleClass(LOOKUP_POPUP_SEARCH_CLASS, isSearchEnabled);\n    }\n  },\n  _setSearchPlaceholder: function _setSearchPlaceholder() {\n    if (!this._$searchBox) {\n      return;\n    }\n\n    var minSearchLength = this.option(\"minSearchLength\");\n    var placeholder = this.option(\"searchPlaceholder\");\n\n    if (minSearchLength && placeholder === messageLocalization.format(\"Search\")) {\n      placeholder = messageLocalization.getFormatter(\"dxLookup-searchPlaceholder\")(minSearchLength);\n    }\n\n    this._searchBox.option(\"placeholder\", placeholder);\n  },\n  _setAriaTargetForList: commonUtils.noop,\n  _renderList: function _renderList() {\n    this.callBase();\n\n    this._list.registerKeyHandler(\"escape\", function () {\n      this.close();\n    }.bind(this));\n  },\n  _listConfig: function _listConfig() {\n    return extend(this.callBase(), {\n      tabIndex: 0,\n      grouped: this.option(\"grouped\"),\n      groupTemplate: this._getTemplateByOption(\"groupTemplate\"),\n      pullRefreshEnabled: this.option(\"pullRefreshEnabled\"),\n      useNativeScrolling: this.option(\"useNativeScrolling\"),\n      pullingDownText: this.option(\"pullingDownText\"),\n      pulledDownText: this.option(\"pulledDownText\"),\n      refreshingText: this.option(\"refreshingText\"),\n      pageLoadingText: this.option(\"pageLoadingText\"),\n      onScroll: this.option(\"onScroll\"),\n      onPullRefresh: this.option(\"onPullRefresh\"),\n      onPageLoading: this.option(\"onPageLoading\"),\n      pageLoadMode: this.option(\"pageLoadMode\"),\n      nextButtonText: this.option(\"nextButtonText\"),\n      _keyboardProcessor: this._listKeyboardProcessor,\n      indicateLoading: this.option(\"searchEnabled\"),\n      onSelectionChanged: this._getSelectionChangedHandler()\n    });\n  },\n  _getSelectionChangedHandler: function _getSelectionChangedHandler() {\n    return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : commonUtils.noop;\n  },\n  _listContentReadyHandler: function _listContentReadyHandler() {\n    this.callBase.apply(this, arguments);\n\n    this._refreshSelected();\n  },\n  _setFocusPolicy: function _setFocusPolicy() {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n\n    if (this.option(\"searchEnabled\")) {\n      this._searchBox.focus();\n    } else {\n      eventsEngine.trigger(this._$list, \"focus\");\n    }\n  },\n  _attachChildKeyboardEvents: commonUtils.noop,\n  _focusTarget: function _focusTarget() {\n    return this._$field;\n  },\n  _keyboardEventBindingTarget: function _keyboardEventBindingTarget() {\n    return this._$field;\n  },\n  _listItemClickHandler: function _listItemClickHandler(e) {\n    this._saveValueChangeEvent(e.event);\n\n    this._selectListItem(e.itemData, e.event.currentTarget);\n  },\n  _selectListItem: function _selectListItem(itemData, target) {\n    this._list.selectItem(target);\n\n    if (\"instantly\" === this.option(\"applyValueMode\")) {\n      this._applyButtonHandler();\n    }\n  },\n  _currentSelectedItem: function _currentSelectedItem() {\n    return this.option(\"grouped\") ? this._list.option(\"selectedItems[0]\").items[0] : this._list.option(\"selectedItems[0]\");\n  },\n  _resetValue: function _resetValue(e) {\n    this._saveValueChangeEvent(e.event);\n\n    this.option(\"value\", null);\n    this.option(\"opened\", false);\n  },\n  _searchValue: function _searchValue() {\n    return this.option(\"searchEnabled\") && this._searchBox ? this._searchBox.option(\"value\") : \"\";\n  },\n  _renderInputValue: function _renderInputValue() {\n    return this.callBase().always(function () {\n      this._refreshSelected();\n    }.bind(this));\n  },\n  _renderPlaceholder: function _renderPlaceholder() {\n    if (0 === this.$element().find(\".\" + TEXTEDITOR_INPUT_CLASS).length) {\n      return;\n    }\n\n    this.callBase();\n  },\n  _clean: function _clean() {\n    this._$fieldWrapper.remove();\n\n    this._$searchBox = null;\n    delete this._inkRipple;\n    this.callBase();\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name;\n    var value = args.value;\n\n    switch (name) {\n      case \"dataSource\":\n        this.callBase.apply(this, arguments);\n\n        this._renderField();\n\n        break;\n\n      case \"searchEnabled\":\n        if (this._popup) {\n          this._removeSearch();\n\n          this._renderSearch();\n        }\n\n        break;\n\n      case \"searchPlaceholder\":\n        this._setSearchPlaceholder();\n\n        break;\n\n      case \"minSearchLength\":\n        this._setSearchPlaceholder();\n\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"title\":\n      case \"titleTemplate\":\n      case \"onTitleRendered\":\n      case \"shading\":\n      case \"animation\":\n      case \"position\":\n      case \"closeOnOutsideClick\":\n        this._setPopupOption(name);\n\n        break;\n\n      case \"fullScreen\":\n      case \"usePopover\":\n      case \"placeholder\":\n        this._invalidate();\n\n        break;\n\n      case \"clearButtonText\":\n      case \"showClearButton\":\n      case \"showCancelButton\":\n        this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\n\n        break;\n\n      case \"applyValueMode\":\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"popupWidth\":\n        this._setPopupOption(\"popupWidth\", \"auto\" === value ? this.initialOption(\"popupWidth\") : value);\n\n        break;\n\n      case \"popupHeight\":\n        this._setPopupOption(\"popupHeight\", \"auto\" === value ? this.initialOption(\"popupHeight\") : value);\n\n        break;\n\n      case \"pullRefreshEnabled\":\n      case \"useNativeScrolling\":\n      case \"pullingDownText\":\n      case \"pulledDownText\":\n      case \"refreshingText\":\n      case \"pageLoadingText\":\n      case \"onScroll\":\n      case \"onPullRefresh\":\n      case \"onPageLoading\":\n      case \"nextButtonText\":\n      case \"grouped\":\n      case \"groupTemplate\":\n        this._setListOption(name);\n\n        break;\n\n      case \"pageLoadMode\":\n        this._setListOption(\"pageLoadMode\", this.option(\"pageLoadMode\"));\n\n        break;\n\n      case \"cleanSearchOnOpening\":\n      case \"_scrollToSelectedItemEnabled\":\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  focus: function focus() {\n    this.option(\"opened\") ? this._setFocusPolicy() : eventsEngine.trigger(this._focusTarget(), \"focus\");\n  },\n  field: function field() {\n    return this._$field;\n  }\n});\nregisterComponent(\"dxLookup\", Lookup);\nmodule.exports = Lookup;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/lookup.js"],"names":["$","require","eventsEngine","window","support","commonUtils","domUtils","each","extend","inkRipple","messageLocalization","devices","registerComponent","eventUtils","DropDownList","themes","clickEvent","Popover","TextBox","ChildDefaultTemplate","translator","LOOKUP_CLASS","LOOKUP_SEARCH_CLASS","LOOKUP_SEARCH_WRAPPER_CLASS","LOOKUP_FIELD_CLASS","LOOKUP_ARROW_CLASS","LOOKUP_FIELD_WRAPPER_CLASS","LOOKUP_POPUP_CLASS","LOOKUP_POPUP_WRAPPER_CLASS","LOOKUP_POPUP_SEARCH_CLASS","LOOKUP_POPOVER_MODE","LOOKUP_EMPTY_CLASS","LOOKUP_POPOVER_FLIP_VERTICAL_CLASS","TEXTEDITOR_INPUT_CLASS","POPUP_OPTION_MAP","popupWidth","popupHeight","LIST_ITEM_SELECTED_CLASS","MATERIAL_LOOKUP_LIST_ITEMS_COUNT","MATERIAL_LOOKUP_LIST_PADDING","Lookup","_supportedKeys","space","e","enter","_getDefaultOptions","title","titleTemplate","onTitleRendered","placeholder","searchPlaceholder","searchEnabled","cleanSearchOnOpening","fullScreen","showCancelButton","showClearButton","clearButtonText","applyButtonText","shading","closeOnOutsideClick","position","animation","pullRefreshEnabled","useNativeScrolling","pullingDownText","pulledDownText","refreshingText","pageLoadingText","onScroll","onPullRefresh","onPageLoading","pageLoadMode","nextButtonText","grouped","groupTemplate","usePopover","showDropDownButton","showPopupTitle","focusStateEnabled","_scrollToSelectedItemEnabled","useHiddenSubmitElement","_defaultOptionsRules","themeName","device","options","_device","platform","phone","tablet","Math","useInkRipple","my","at","of","_initTemplates","_initMarkup","_inputWrapper","_dataSourceOptions","paginate","_fireContentReadyAction","_popupWrapperClass","_renderInput","fieldClickAction","event","$arrow","_getInputContainer","_renderInkRipple","_toggleOpenState","_toggleActiveState","config","element","_renderField","fieldTemplate","_renderDisplayText","_updateField","_renderFieldTemplate","data","template","model","container","_fieldRenderData","_popupShowingHandler","_scrollToSelectedItem","selectedIndex","listItems","itemsCount","group","item","_setPopupPosition","flipped","selectedListItem","differenceOfHeights","popupContentParent","differenceOfOffsets","lookupTop","popupOffsetY","top","_getPopupHeight","_renderPopup","_popupOptionMap","_renderPopover","showEvent","hideEvent","target","closeOnTargetScroll","width","showing","shown","hiding","hidden","_popupHidingHandler","_popupHiddenHandler","_preventFocusOnPopup","_popupConfig","result","showTitle","toolbarItems","onPositioned","_getPopupToolbarItems","buttonsConfig","cancelButton","clearButton","_popupToolbarItemsConfig","shortcut","onClick","text","_getCancelButtonConfig","onInitialized","_getClearButtonConfig","_applyButtonHandler","_cancelButtonHandler","_refreshPopupVisibility","_dimensionChanged","_updatePopupDimensions","_input","_renderPopupContent","_attachSearchChildProcessor","searchComponent","_detachSearchChildProcessor","_renderSearch","isSearchEnabled","$searchWrapper","$searchBox","currentDevice","searchMode","onDisposing","onFocusIn","onFocusOut","mode","valueChangeEvent","onValueChanged","_searchFocusHandler","_searchBlurHandler","_removeSearch","_selectListItemHandler","$itemElement","_registerSearchKeyHandlers","_toggleSearchClass","_setSearchPlaceholder","minSearchLength","_setAriaTargetForList","_renderList","_listConfig","tabIndex","_keyboardProcessor","indicateLoading","onSelectionChanged","_getSelectionChangedHandler","_listContentReadyHandler","_setFocusPolicy","_attachChildKeyboardEvents","_focusTarget","_keyboardEventBindingTarget","_listItemClickHandler","_selectListItem","_currentSelectedItem","_resetValue","_searchValue","_renderInputValue","_renderPlaceholder","_clean","_optionChanged","name","args","value","focus","field","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/lookup.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../core/renderer\");\r\nvar eventsEngine = require(\"../events/core/events_engine\");\r\nvar window = require(\"../core/utils/window\").getWindow();\r\nvar support = require(\"../core/utils/support\");\r\nvar commonUtils = require(\"../core/utils/common\");\r\nvar domUtils = require(\"../core/utils/dom\");\r\nvar each = require(\"../core/utils/iterator\").each;\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar inkRipple = require(\"./widget/utils.ink_ripple\");\r\nvar messageLocalization = require(\"../localization/message\");\r\nvar devices = require(\"../core/devices\");\r\nvar registerComponent = require(\"../core/component_registrator\");\r\nvar eventUtils = require(\"../events/utils\");\r\nvar DropDownList = require(\"./drop_down_editor/ui.drop_down_list\");\r\nvar themes = require(\"./themes\");\r\nvar clickEvent = require(\"../events/click\");\r\nvar Popover = require(\"./popover\");\r\nvar TextBox = require(\"./text_box\");\r\nvar ChildDefaultTemplate = require(\"../core/templates/child_default_template\").ChildDefaultTemplate;\r\nvar translator = require(\"../animation/translator\");\r\nvar LOOKUP_CLASS = \"dx-lookup\";\r\nvar LOOKUP_SEARCH_CLASS = \"dx-lookup-search\";\r\nvar LOOKUP_SEARCH_WRAPPER_CLASS = \"dx-lookup-search-wrapper\";\r\nvar LOOKUP_FIELD_CLASS = \"dx-lookup-field\";\r\nvar LOOKUP_ARROW_CLASS = \"dx-lookup-arrow\";\r\nvar LOOKUP_FIELD_WRAPPER_CLASS = \"dx-lookup-field-wrapper\";\r\nvar LOOKUP_POPUP_CLASS = \"dx-lookup-popup\";\r\nvar LOOKUP_POPUP_WRAPPER_CLASS = \"dx-lookup-popup-wrapper\";\r\nvar LOOKUP_POPUP_SEARCH_CLASS = \"dx-lookup-popup-search\";\r\nvar LOOKUP_POPOVER_MODE = \"dx-lookup-popover-mode\";\r\nvar LOOKUP_EMPTY_CLASS = \"dx-lookup-empty\";\r\nvar LOOKUP_POPOVER_FLIP_VERTICAL_CLASS = \"dx-popover-flipped-vertical\";\r\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\r\nvar POPUP_OPTION_MAP = {\r\n    popupWidth: \"width\",\r\n    popupHeight: \"height\"\r\n};\r\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\r\nvar MATERIAL_LOOKUP_LIST_ITEMS_COUNT = 4;\r\nvar MATERIAL_LOOKUP_LIST_PADDING = 8;\r\nvar Lookup = DropDownList.inherit({\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), {\r\n            space: function(e) {\r\n                e.preventDefault();\r\n                this._validatedOpening()\r\n            },\r\n            enter: function() {\r\n                this._validatedOpening()\r\n            }\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            title: \"\",\r\n            titleTemplate: \"title\",\r\n            onTitleRendered: null,\r\n            placeholder: messageLocalization.format(\"Select\"),\r\n            searchPlaceholder: messageLocalization.format(\"Search\"),\r\n            searchEnabled: true,\r\n            cleanSearchOnOpening: true,\r\n            fullScreen: false,\r\n            showCancelButton: true,\r\n            showClearButton: false,\r\n            clearButtonText: messageLocalization.format(\"Clear\"),\r\n            applyButtonText: messageLocalization.format(\"OK\"),\r\n            popupWidth: function() {\r\n                return .8 * $(window).width()\r\n            },\r\n            popupHeight: function() {\r\n                return .8 * $(window).height()\r\n            },\r\n            shading: true,\r\n            closeOnOutsideClick: false,\r\n            position: void 0,\r\n            animation: {},\r\n            pullRefreshEnabled: false,\r\n            useNativeScrolling: true,\r\n            pullingDownText: messageLocalization.format(\"dxList-pullingDownText\"),\r\n            pulledDownText: messageLocalization.format(\"dxList-pulledDownText\"),\r\n            refreshingText: messageLocalization.format(\"dxList-refreshingText\"),\r\n            pageLoadingText: messageLocalization.format(\"dxList-pageLoadingText\"),\r\n            onScroll: null,\r\n            onPullRefresh: null,\r\n            onPageLoading: null,\r\n            pageLoadMode: \"scrollBottom\",\r\n            nextButtonText: messageLocalization.format(\"dxList-nextButtonText\"),\r\n            grouped: false,\r\n            groupTemplate: \"group\",\r\n            usePopover: false,\r\n            showDropDownButton: false,\r\n            showPopupTitle: true,\r\n            focusStateEnabled: false,\r\n            _scrollToSelectedItemEnabled: false,\r\n            useHiddenSubmitElement: true\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        var themeName = themes.current();\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !support.nativeScrolling\r\n            },\r\n            options: {\r\n                useNativeScrolling: false\r\n            }\r\n        }, {\r\n            device: function(_device) {\r\n                return !devices.isSimulator() && \"desktop\" === devices.real().deviceType && \"generic\" === _device.platform\r\n            },\r\n            options: {\r\n                usePopover: true,\r\n                popupHeight: \"auto\"\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"ios\",\r\n                phone: true\r\n            },\r\n            options: {\r\n                fullScreen: true\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"ios\",\r\n                tablet: true\r\n            },\r\n            options: {\r\n                popupWidth: function() {\r\n                    return .4 * Math.min($(window).width(), $(window).height())\r\n                },\r\n                popupHeight: \"auto\",\r\n                usePopover: true,\r\n                useInkRipple: false\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return themes.isMaterial(themeName)\r\n            },\r\n            options: {\r\n                usePopover: false,\r\n                closeOnOutsideClick: true,\r\n                popupWidth: function() {\r\n                    return $(this.element()).outerWidth()\r\n                }.bind(this),\r\n                popupHeight: function() {\r\n                    return this._getPopupHeight(MATERIAL_LOOKUP_LIST_ITEMS_COUNT)\r\n                }.bind(this),\r\n                searchEnabled: false,\r\n                showCancelButton: false,\r\n                showPopupTitle: false,\r\n                position: {\r\n                    my: \"left top\",\r\n                    at: \"left top\",\r\n                    of: this.element()\r\n                },\r\n                _scrollToSelectedItemEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._defaultTemplates.group = new ChildDefaultTemplate(\"group\");\r\n        this._defaultTemplates.title = new ChildDefaultTemplate(\"title\")\r\n    },\r\n    _initMarkup: function() {\r\n        this.$element().addClass(LOOKUP_CLASS).toggleClass(LOOKUP_POPOVER_MODE, this.option(\"usePopover\"));\r\n        this.callBase()\r\n    },\r\n    _inputWrapper: function() {\r\n        return this.$element().find(\".\" + LOOKUP_FIELD_WRAPPER_CLASS)\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return extend(this.callBase(), {\r\n            paginate: true\r\n        })\r\n    },\r\n    _fireContentReadyAction: commonUtils.noop,\r\n    _popupWrapperClass: function() {\r\n        return \"\"\r\n    },\r\n    _renderInput: function() {\r\n        var fieldClickAction = this._createAction(function() {\r\n            this._toggleOpenState()\r\n        }.bind(this));\r\n        this._$field = $(\"<div>\").addClass(LOOKUP_FIELD_CLASS);\r\n        eventsEngine.on(this._$field, eventUtils.addNamespace(clickEvent.name, this.NAME), function(e) {\r\n            fieldClickAction({\r\n                event: e\r\n            })\r\n        });\r\n        var $arrow = $(\"<div>\").addClass(LOOKUP_ARROW_CLASS);\r\n        this._$fieldWrapper = $(\"<div>\").addClass(LOOKUP_FIELD_WRAPPER_CLASS).append(this._$field).append($arrow).appendTo(this.$element());\r\n        this.option(\"useInkRipple\") && this._renderInkRipple()\r\n    },\r\n    _getInputContainer: function() {\r\n        return this._$fieldWrapper\r\n    },\r\n    _renderInkRipple: function() {\r\n        this._inkRipple = inkRipple.render()\r\n    },\r\n    _toggleOpenState: function() {\r\n        this.callBase();\r\n        if (!this.option(\"fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            this._setPopupPosition()\r\n        }\r\n    },\r\n    _toggleActiveState: function($element, value, e) {\r\n        this.callBase.apply(this, arguments);\r\n        if (!this._inkRipple) {\r\n            return\r\n        }\r\n        var config = {\r\n            element: this._inputWrapper(),\r\n            event: e\r\n        };\r\n        if (value) {\r\n            this._inkRipple.showWave(config)\r\n        } else {\r\n            this._inkRipple.hideWave(config)\r\n        }\r\n    },\r\n    _renderField: function() {\r\n        var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\r\n        if (fieldTemplate && this.option(\"fieldTemplate\")) {\r\n            this._renderFieldTemplate(fieldTemplate);\r\n            return\r\n        }\r\n        this._updateField(this.option(\"displayValue\") || this.option(\"placeholder\"));\r\n        this.$element().toggleClass(LOOKUP_EMPTY_CLASS, !this.option(\"selectedItem\"))\r\n    },\r\n    _renderDisplayText: function(text) {\r\n        if (this._input().length) {\r\n            this.callBase(text)\r\n        } else {\r\n            this._updateField(text)\r\n        }\r\n    },\r\n    _updateField: function(text) {\r\n        this._$field.text(text)\r\n    },\r\n    _renderFieldTemplate: function(template) {\r\n        this._$field.empty();\r\n        var data = this._fieldRenderData();\r\n        template.render({\r\n            model: data,\r\n            container: domUtils.getPublicElement(this._$field)\r\n        })\r\n    },\r\n    _fieldRenderData: function() {\r\n        return this.option(\"selectedItem\")\r\n    },\r\n    _popupShowingHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        if (this.option(\"cleanSearchOnOpening\")) {\r\n            if (this.option(\"searchEnabled\") && this._searchBox.option(\"value\")) {\r\n                this._searchBox.option(\"value\", \"\");\r\n                this._searchCanceled()\r\n            }\r\n            this._list && this._list.option(\"focusedElement\", null)\r\n        }\r\n        if (this.option(\"fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            this._popup.option(\"position\").of = $(window)\r\n        }\r\n    },\r\n    _scrollToSelectedItem: function() {\r\n        var selectedIndex = this._list.option(\"selectedIndex\");\r\n        var listItems = this._list.option(\"items\");\r\n        var itemsCount = listItems.length;\r\n        if (0 !== itemsCount) {\r\n            if (this._list.option(\"grouped\")) {\r\n                this._list.scrollToItem({\r\n                    group: itemsCount - 1,\r\n                    item: listItems[itemsCount - 1].items.length - 1\r\n                })\r\n            } else {\r\n                this._list.scrollToItem(itemsCount - 1)\r\n            }\r\n            this._list.scrollToItem(selectedIndex)\r\n        }\r\n    },\r\n    _setPopupPosition: function() {\r\n        var selectedIndex = this._list.option(\"selectedIndex\");\r\n        var flipped = this._popup._$wrapper.hasClass(LOOKUP_POPOVER_FLIP_VERTICAL_CLASS);\r\n        if (selectedIndex === -1 || flipped) {\r\n            return\r\n        }\r\n        var selectedListItem = $(this._list.element()).find(\".\" + LIST_ITEM_SELECTED_CLASS);\r\n        if (selectedListItem.offset().top < 0 || this._list.scrollTop() !== selectedListItem.position().top) {\r\n            this._scrollToSelectedItem()\r\n        }\r\n        var differenceOfHeights = (selectedListItem.height() - $(this.element()).height()) / 2;\r\n        var popupContentParent = $(this._popup.content()).parent();\r\n        var differenceOfOffsets = selectedListItem.offset().top - popupContentParent.offset().top;\r\n        var lookupTop = $(this.element()).offset().top;\r\n        var popupOffsetY = differenceOfHeights;\r\n        if (lookupTop > differenceOfOffsets) {\r\n            popupOffsetY += differenceOfOffsets\r\n        } else {\r\n            this._scrollToSelectedItem()\r\n        }\r\n        var position = translator.locate(popupContentParent);\r\n        translator.move(popupContentParent, {\r\n            top: position.top - popupOffsetY\r\n        })\r\n    },\r\n    _getPopupHeight: function(listItemsCount) {\r\n        return this._list && this._list.itemElements() ? this._list.itemElements().height() * listItemsCount + 2 * MATERIAL_LOOKUP_LIST_PADDING + (this._$searchWrapper ? this._$searchWrapper.outerHeight() : 0) + (this._popup._$bottom ? this._popup._$bottom.outerHeight() : 0) + (this._popup._$title ? this._popup._$title.outerHeight() : 0) : \"auto\"\r\n    },\r\n    _renderPopup: function() {\r\n        if (this.option(\"usePopover\") && !this.option(\"fullScreen\")) {\r\n            this._renderPopover()\r\n        } else {\r\n            this.callBase()\r\n        }\r\n        this._$popup.addClass(LOOKUP_POPUP_CLASS);\r\n        this._popup._wrapper().addClass(LOOKUP_POPUP_WRAPPER_CLASS)\r\n    },\r\n    _popupOptionMap: function(optionName) {\r\n        return POPUP_OPTION_MAP[optionName] || optionName\r\n    },\r\n    _renderPopover: function() {\r\n        this._popup = this._createComponent(this._$popup, Popover, extend(this._popupConfig(), {\r\n            showEvent: null,\r\n            hideEvent: null,\r\n            target: this.$element(),\r\n            fullScreen: false,\r\n            shading: false,\r\n            closeOnTargetScroll: true,\r\n            width: this._isInitialOptionValue(\"popupWidth\") ? function() {\r\n                return this.$element().outerWidth()\r\n            }.bind(this) : this._popupConfig().width\r\n        }));\r\n        this._popup.on({\r\n            showing: this._popupShowingHandler.bind(this),\r\n            shown: this._popupShownHandler.bind(this),\r\n            hiding: this._popupHidingHandler.bind(this),\r\n            hidden: this._popupHiddenHandler.bind(this)\r\n        });\r\n        this._setPopupContentId(this._popup.$content());\r\n        this._popup.option(\"onContentReady\", this._contentReadyHandler.bind(this));\r\n        this._contentReadyHandler()\r\n    },\r\n    _popupHidingHandler: function() {\r\n        this.callBase();\r\n        this.option(\"focusStateEnabled\") && this.focus()\r\n    },\r\n    _popupHiddenHandler: function() {\r\n        this.callBase();\r\n        if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            translator.resetPosition($(this._popup.content()).parent())\r\n        }\r\n    },\r\n    _preventFocusOnPopup: commonUtils.noop,\r\n    _popupConfig: function() {\r\n        var result = extend(this.callBase(), {\r\n            showTitle: this.option(\"showPopupTitle\"),\r\n            title: this.option(\"title\"),\r\n            titleTemplate: this._getTemplateByOption(\"titleTemplate\"),\r\n            onTitleRendered: this.option(\"onTitleRendered\"),\r\n            toolbarItems: this._getPopupToolbarItems(),\r\n            fullScreen: this.option(\"fullScreen\"),\r\n            shading: this.option(\"shading\"),\r\n            closeOnTargetScroll: false,\r\n            closeOnOutsideClick: this.option(\"closeOnOutsideClick\"),\r\n            onPositioned: null\r\n        });\r\n        delete result.animation;\r\n        delete result.position;\r\n        result.maxHeight = function() {\r\n            return $(window).height()\r\n        };\r\n        each([\"position\", \"animation\", \"popupWidth\", \"popupHeight\"], function(_, optionName) {\r\n            if (void 0 !== this.option(optionName)) {\r\n                result[this._popupOptionMap(optionName)] = this.option(optionName)\r\n            }\r\n        }.bind(this));\r\n        return result\r\n    },\r\n    _getPopupToolbarItems: function() {\r\n        var buttonsConfig = \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : [];\r\n        var cancelButton = this._getCancelButtonConfig();\r\n        if (cancelButton) {\r\n            buttonsConfig.push(cancelButton)\r\n        }\r\n        var clearButton = this._getClearButtonConfig();\r\n        if (clearButton) {\r\n            buttonsConfig.push(clearButton)\r\n        }\r\n        return this._applyButtonsLocation(buttonsConfig)\r\n    },\r\n    _popupToolbarItemsConfig: function() {\r\n        return [{\r\n            shortcut: \"done\",\r\n            options: {\r\n                onClick: this._applyButtonHandler.bind(this),\r\n                text: this.option(\"applyButtonText\")\r\n            }\r\n        }]\r\n    },\r\n    _getCancelButtonConfig: function() {\r\n        return this.option(\"showCancelButton\") ? {\r\n            shortcut: \"cancel\",\r\n            onClick: this._cancelButtonHandler.bind(this),\r\n            options: {\r\n                onInitialized: function(e) {\r\n                    e.component.registerKeyHandler(\"escape\", this.close.bind(this))\r\n                }.bind(this),\r\n                text: this.option(\"cancelButtonText\")\r\n            }\r\n        } : null\r\n    },\r\n    _getClearButtonConfig: function() {\r\n        return this.option(\"showClearButton\") ? {\r\n            shortcut: \"clear\",\r\n            onClick: this._resetValue.bind(this),\r\n            options: {\r\n                text: this.option(\"clearButtonText\")\r\n            }\r\n        } : null\r\n    },\r\n    _applyButtonHandler: function() {\r\n        this.option(\"value\", this._valueGetter(this._currentSelectedItem()));\r\n        this.callBase()\r\n    },\r\n    _cancelButtonHandler: function() {\r\n        this._refreshSelected();\r\n        this.callBase()\r\n    },\r\n    _refreshPopupVisibility: function() {\r\n        if (this.option(\"opened\")) {\r\n            this._updatePopupHeight()\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        if (this.option(\"usePopover\") && !this.option(\"popupWidth\")) {\r\n            this.option(\"popupWidth\", this.$element().width())\r\n        }\r\n        this.callBase()\r\n    },\r\n    _updatePopupDimensions: function() {\r\n        this._updatePopupHeight()\r\n    },\r\n    _input: function() {\r\n        return this._$searchBox || this.callBase()\r\n    },\r\n    _renderPopupContent: function() {\r\n        this.callBase();\r\n        this._renderSearch()\r\n    },\r\n    _attachSearchChildProcessor: function(searchComponent) {\r\n        this._listKeyboardProcessor = this._listKeyboardProcessor || searchComponent._keyboardProcessor.attachChildProcessor();\r\n        this._setListOption(\"_keyboardProcessor\", this._listKeyboardProcessor)\r\n    },\r\n    _detachSearchChildProcessor: function() {\r\n        this._setListOption(\"_keyboardProcessor\", null)\r\n    },\r\n    _renderSearch: function() {\r\n        var isSearchEnabled = this.option(\"searchEnabled\");\r\n        this._toggleSearchClass(isSearchEnabled);\r\n        if (isSearchEnabled) {\r\n            var $searchWrapper = this._$searchWrapper = $(\"<div>\").addClass(LOOKUP_SEARCH_WRAPPER_CLASS);\r\n            var $searchBox = this._$searchBox = $(\"<div>\").addClass(LOOKUP_SEARCH_CLASS).appendTo($searchWrapper);\r\n            var currentDevice = devices.current();\r\n            var searchMode = currentDevice.android && currentDevice.version[0] >= 5 ? \"text\" : \"search\";\r\n            this._searchBox = this._createComponent($searchBox, TextBox, {\r\n                onDisposing: function() {\r\n                    this._detachSearchChildProcessor()\r\n                }.bind(this),\r\n                onFocusIn: this._searchFocusHandler.bind(this),\r\n                onFocusOut: this._searchBlurHandler.bind(this),\r\n                mode: searchMode,\r\n                showClearButton: true,\r\n                valueChangeEvent: this.option(\"valueChangeEvent\"),\r\n                onValueChanged: this._searchHandler.bind(this)\r\n            });\r\n            this._registerSearchKeyHandlers();\r\n            $searchWrapper.insertBefore(this._$list);\r\n            this._setSearchPlaceholder()\r\n        }\r\n    },\r\n    _searchFocusHandler: function(e) {\r\n        this._attachSearchChildProcessor(e.component)\r\n    },\r\n    _searchBlurHandler: function() {\r\n        this._detachSearchChildProcessor()\r\n    },\r\n    _removeSearch: function() {\r\n        this._$searchWrapper && this._$searchWrapper.remove();\r\n        delete this._$searchWrapper;\r\n        this._$searchBox && this._$searchBox.remove();\r\n        delete this._$searchBox;\r\n        delete this._searchBox\r\n    },\r\n    _selectListItemHandler: function(e) {\r\n        var $itemElement = $(this._list.option(\"focusedElement\"));\r\n        if (!$itemElement.length) {\r\n            return\r\n        }\r\n        e.preventDefault();\r\n        this._selectListItem(e.itemData, $itemElement)\r\n    },\r\n    _registerSearchKeyHandlers: function() {\r\n        this._searchBox.registerKeyHandler(\"escape\", this.close.bind(this));\r\n        this._searchBox.registerKeyHandler(\"enter\", this._selectListItemHandler.bind(this));\r\n        this._searchBox.registerKeyHandler(\"space\", this._selectListItemHandler.bind(this));\r\n        this._searchBox.registerKeyHandler(\"end\", commonUtils.noop);\r\n        this._searchBox.registerKeyHandler(\"home\", commonUtils.noop)\r\n    },\r\n    _toggleSearchClass: function(isSearchEnabled) {\r\n        if (this._popup) {\r\n            this._popup._wrapper().toggleClass(LOOKUP_POPUP_SEARCH_CLASS, isSearchEnabled)\r\n        }\r\n    },\r\n    _setSearchPlaceholder: function() {\r\n        if (!this._$searchBox) {\r\n            return\r\n        }\r\n        var minSearchLength = this.option(\"minSearchLength\");\r\n        var placeholder = this.option(\"searchPlaceholder\");\r\n        if (minSearchLength && placeholder === messageLocalization.format(\"Search\")) {\r\n            placeholder = messageLocalization.getFormatter(\"dxLookup-searchPlaceholder\")(minSearchLength)\r\n        }\r\n        this._searchBox.option(\"placeholder\", placeholder)\r\n    },\r\n    _setAriaTargetForList: commonUtils.noop,\r\n    _renderList: function() {\r\n        this.callBase();\r\n        this._list.registerKeyHandler(\"escape\", function() {\r\n            this.close()\r\n        }.bind(this))\r\n    },\r\n    _listConfig: function() {\r\n        return extend(this.callBase(), {\r\n            tabIndex: 0,\r\n            grouped: this.option(\"grouped\"),\r\n            groupTemplate: this._getTemplateByOption(\"groupTemplate\"),\r\n            pullRefreshEnabled: this.option(\"pullRefreshEnabled\"),\r\n            useNativeScrolling: this.option(\"useNativeScrolling\"),\r\n            pullingDownText: this.option(\"pullingDownText\"),\r\n            pulledDownText: this.option(\"pulledDownText\"),\r\n            refreshingText: this.option(\"refreshingText\"),\r\n            pageLoadingText: this.option(\"pageLoadingText\"),\r\n            onScroll: this.option(\"onScroll\"),\r\n            onPullRefresh: this.option(\"onPullRefresh\"),\r\n            onPageLoading: this.option(\"onPageLoading\"),\r\n            pageLoadMode: this.option(\"pageLoadMode\"),\r\n            nextButtonText: this.option(\"nextButtonText\"),\r\n            _keyboardProcessor: this._listKeyboardProcessor,\r\n            indicateLoading: this.option(\"searchEnabled\"),\r\n            onSelectionChanged: this._getSelectionChangedHandler()\r\n        })\r\n    },\r\n    _getSelectionChangedHandler: function() {\r\n        return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : commonUtils.noop\r\n    },\r\n    _listContentReadyHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._refreshSelected()\r\n    },\r\n    _setFocusPolicy: function() {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        if (this.option(\"searchEnabled\")) {\r\n            this._searchBox.focus()\r\n        } else {\r\n            eventsEngine.trigger(this._$list, \"focus\")\r\n        }\r\n    },\r\n    _attachChildKeyboardEvents: commonUtils.noop,\r\n    _focusTarget: function() {\r\n        return this._$field\r\n    },\r\n    _keyboardEventBindingTarget: function() {\r\n        return this._$field\r\n    },\r\n    _listItemClickHandler: function(e) {\r\n        this._saveValueChangeEvent(e.event);\r\n        this._selectListItem(e.itemData, e.event.currentTarget)\r\n    },\r\n    _selectListItem: function(itemData, target) {\r\n        this._list.selectItem(target);\r\n        if (\"instantly\" === this.option(\"applyValueMode\")) {\r\n            this._applyButtonHandler()\r\n        }\r\n    },\r\n    _currentSelectedItem: function() {\r\n        return this.option(\"grouped\") ? this._list.option(\"selectedItems[0]\").items[0] : this._list.option(\"selectedItems[0]\")\r\n    },\r\n    _resetValue: function(e) {\r\n        this._saveValueChangeEvent(e.event);\r\n        this.option(\"value\", null);\r\n        this.option(\"opened\", false)\r\n    },\r\n    _searchValue: function() {\r\n        return this.option(\"searchEnabled\") && this._searchBox ? this._searchBox.option(\"value\") : \"\"\r\n    },\r\n    _renderInputValue: function() {\r\n        return this.callBase().always(function() {\r\n            this._refreshSelected()\r\n        }.bind(this))\r\n    },\r\n    _renderPlaceholder: function() {\r\n        if (0 === this.$element().find(\".\" + TEXTEDITOR_INPUT_CLASS).length) {\r\n            return\r\n        }\r\n        this.callBase()\r\n    },\r\n    _clean: function() {\r\n        this._$fieldWrapper.remove();\r\n        this._$searchBox = null;\r\n        delete this._inkRipple;\r\n        this.callBase()\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        var value = args.value;\r\n        switch (name) {\r\n            case \"dataSource\":\r\n                this.callBase.apply(this, arguments);\r\n                this._renderField();\r\n                break;\r\n            case \"searchEnabled\":\r\n                if (this._popup) {\r\n                    this._removeSearch();\r\n                    this._renderSearch()\r\n                }\r\n                break;\r\n            case \"searchPlaceholder\":\r\n                this._setSearchPlaceholder();\r\n                break;\r\n            case \"minSearchLength\":\r\n                this._setSearchPlaceholder();\r\n                this.callBase.apply(this, arguments);\r\n                break;\r\n            case \"title\":\r\n            case \"titleTemplate\":\r\n            case \"onTitleRendered\":\r\n            case \"shading\":\r\n            case \"animation\":\r\n            case \"position\":\r\n            case \"closeOnOutsideClick\":\r\n                this._setPopupOption(name);\r\n                break;\r\n            case \"fullScreen\":\r\n            case \"usePopover\":\r\n            case \"placeholder\":\r\n                this._invalidate();\r\n                break;\r\n            case \"clearButtonText\":\r\n            case \"showClearButton\":\r\n            case \"showCancelButton\":\r\n                this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\r\n                break;\r\n            case \"applyValueMode\":\r\n                this.callBase.apply(this, arguments);\r\n                break;\r\n            case \"popupWidth\":\r\n                this._setPopupOption(\"popupWidth\", \"auto\" === value ? this.initialOption(\"popupWidth\") : value);\r\n                break;\r\n            case \"popupHeight\":\r\n                this._setPopupOption(\"popupHeight\", \"auto\" === value ? this.initialOption(\"popupHeight\") : value);\r\n                break;\r\n            case \"pullRefreshEnabled\":\r\n            case \"useNativeScrolling\":\r\n            case \"pullingDownText\":\r\n            case \"pulledDownText\":\r\n            case \"refreshingText\":\r\n            case \"pageLoadingText\":\r\n            case \"onScroll\":\r\n            case \"onPullRefresh\":\r\n            case \"onPageLoading\":\r\n            case \"nextButtonText\":\r\n            case \"grouped\":\r\n            case \"groupTemplate\":\r\n                this._setListOption(name);\r\n                break;\r\n            case \"pageLoadMode\":\r\n                this._setListOption(\"pageLoadMode\", this.option(\"pageLoadMode\"));\r\n                break;\r\n            case \"cleanSearchOnOpening\":\r\n            case \"_scrollToSelectedItemEnabled\":\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    focus: function() {\r\n        this.option(\"opened\") ? this._setFocusPolicy() : eventsEngine.trigger(this._focusTarget(), \"focus\")\r\n    },\r\n    field: function() {\r\n        return this._$field\r\n    }\r\n});\r\nregisterComponent(\"dxLookup\", Lookup);\r\nmodule.exports = Lookup;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}