{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.item_list.thumbnails.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _contextmenu = require(\"../../events/contextmenu\");\n\nvar _uiFile_managerUtils = require(\"./ui.file_manager.utils.js\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _uiFile_manager = require(\"./ui.file_manager.item_list\");\n\nvar _uiFile_manager2 = _interopRequireDefault(_uiFile_manager);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS = \"dx-filemanager-thumbnails\";\nvar FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS = \"dx-filemanager-thumbnails-view-port\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS = \"dx-filemanager-thumbnails-container\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_CLASS = \"dx-filemanager-thumbnails-item\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS = \"dx-filemanager-thumbnails-item-content\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS = \"dx-filemanager-thumbnails-item-thumbnail\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS = \"dx-filemanager-thumbnails-item-spacer\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS = \"dx-filemanager-thumbnails-item-name\";\nvar FILE_MANAGER_ITEM_SELECTED_CLASS = \"dx-filemanager-item-selected\";\nvar FILE_MANAGER_ITEM_FOCUSED_CLASS = \"dx-filemanager-item-focused\";\nvar FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE = \"dxFileManager_thumbnails\";\n\nvar FileManagerThumbnailsItemList = function (_FileManagerItemListB) {\n  _inherits(FileManagerThumbnailsItemList, _FileManagerItemListB);\n\n  function FileManagerThumbnailsItemList() {\n    _classCallCheck(this, FileManagerThumbnailsItemList);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FileManagerThumbnailsItemList).apply(this, arguments));\n  }\n\n  _createClass(FileManagerThumbnailsItemList, [{\n    key: \"_init\",\n    value: function value() {\n      this._items = [];\n      this._currentLoadOperationId = 0;\n\n      _get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_init\", this).call(this);\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function value() {\n      _get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_initMarkup\", this).call(this);\n\n      var multipleSelection = \"multiple\" === this.option(\"selectionMode\");\n      var controllerOptions = {\n        onSelectionChanged: this._raiseSelectionChanged.bind(this)\n      };\n      var controllerClass = multipleSelection ? MultipleSelectionController : SingleSelectionController;\n      this._selectionController = new controllerClass(controllerOptions);\n      this._$itemViewContainer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS);\n      this._$viewPort = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS);\n\n      this._$viewPort.append(this._$itemViewContainer);\n\n      this.$element().addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS);\n      this.$element().append(this._$viewPort);\n      var contextMenuEvent = (0, _utils.addNamespace)(_contextmenu.name, FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\n      var clickEvent = (0, _utils.addNamespace)(\"click\", FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\n\n      _events_engine2.default.on(this.$element(), contextMenuEvent, this._onContextMenu.bind(this));\n\n      _events_engine2.default.on(this.$element(), clickEvent, this._onClick.bind(this));\n\n      this._loadItems();\n    }\n  }, {\n    key: \"_supportedKeys\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_supportedKeys\", this).call(this), {\n        rightArrow: function rightArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(1, true, e);\n        },\n        leftArrow: function leftArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(-1, true, e);\n        },\n        upArrow: function upArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(-1, false, e);\n        },\n        downArrow: function downArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(1, false, e);\n        },\n        home: function home(e) {\n          this._beforeKeyProcessing(e);\n\n          this._selectItemByIndex(0, true, e);\n        },\n        end: function end(e) {\n          this._beforeKeyProcessing(e);\n\n          this._selectItemByIndex(this._items.length - 1, true, e);\n        },\n        pageUp: function pageUp(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processPageChange(true, e);\n        },\n        pageDown: function pageDown(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processPageChange(false, e);\n        },\n        space: function space(e) {\n          this._beforeKeyProcessing(e);\n\n          this._selectionController.invertFocusedItemSelection();\n        },\n        enter: function enter(e) {\n          this._beforeKeyProcessing(e);\n\n          this.tryOpen();\n        },\n        A: function A(e) {\n          this._beforeKeyProcessing(e);\n\n          if (e.ctrlKey) {\n            this._selectAll();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_beforeKeyProcessing\",\n    value: function value(e) {\n      e.preventDefault();\n\n      this._resetLayoutModel();\n    }\n  }, {\n    key: \"_processMoveArrow\",\n    value: function value(offset, horizontal, eventArgs) {\n      var item = this._getFocusedItem();\n\n      if (item) {\n        if (!horizontal) {\n          var layout = this._getLayoutModel();\n\n          if (!layout) {\n            return;\n          }\n\n          offset *= layout.itemPerRowCount;\n        }\n\n        var newItemIndex = item._state.index + offset;\n\n        this._selectItemByIndex(newItemIndex, true, eventArgs);\n      }\n    }\n  }, {\n    key: \"_processPageChange\",\n    value: function value(pageUp, eventArgs) {\n      var item = this._getFocusedItem();\n\n      if (!item) {\n        return;\n      }\n\n      var layout = this._getLayoutModel();\n\n      if (!layout) {\n        return;\n      }\n\n      var itemLayout = this._createItemLayoutModel(item._state.index);\n\n      var rowOffset = pageUp ? layout.rowPerPageRate : -layout.rowPerPageRate;\n      var newRowRate = itemLayout.itemRowIndex - rowOffset;\n      var roundFunc = pageUp ? Math.ceil : Math.floor;\n      var newRowIndex = roundFunc(newRowRate);\n      var newItemIndex = newRowIndex * layout.itemPerRowCount + itemLayout.itemColumnIndex;\n\n      if (newItemIndex < 0) {\n        newItemIndex = 0;\n      } else {\n        if (newItemIndex >= this._items.length) {\n          newItemIndex = this._items.length - 1;\n        }\n      }\n\n      this._selectItemByIndex(newItemIndex, true, eventArgs);\n    }\n  }, {\n    key: \"_onClick\",\n    value: function value(e) {\n      var $item = (0, _renderer2.default)(e.target).closest(this._getItemSelector());\n\n      if ($item.length > 0) {\n        this._selectItemByItemElement($item, e);\n      } else {\n        this.clearSelection();\n      }\n    }\n  }, {\n    key: \"_onContextMenu\",\n    value: function value(e) {\n      e.preventDefault();\n\n      this._onClick(e);\n\n      var items = this.getSelectedItems();\n\n      this._showContextMenu(items, e.target, e);\n    }\n  }, {\n    key: \"_selectItemByItemElement\",\n    value: function value($item, e) {\n      var index = $item.data(\"index\");\n\n      this._selectItemByIndex(index, false, e);\n    }\n  }, {\n    key: \"_getItemThumbnailCssClass\",\n    value: function value() {\n      return FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS;\n    }\n  }, {\n    key: \"_getItemSelector\",\n    value: function value() {\n      return \".\".concat(FILE_MANAGER_THUMBNAILS_ITEM_CLASS);\n    }\n  }, {\n    key: \"_onItemDblClick\",\n    value: function value(e) {\n      var $item = (0, _renderer2.default)(e.currentTarget);\n      var index = $item.data(\"index\");\n      var item = this._items[index];\n\n      this._raiseSelectedItemOpened(item);\n    }\n  }, {\n    key: \"_scrollToItem\",\n    value: function value(item) {\n      var layout = this._getLayoutModel();\n\n      if (!layout) {\n        return;\n      }\n\n      var itemRowIndex = Math.floor(item._state.index / layout.itemPerRowCount);\n      var itemTop = itemRowIndex * layout.itemHeight;\n      var itemBottom = itemTop + layout.itemHeight;\n      var newScrollTop = layout.viewPortScrollTop;\n\n      if (itemTop < layout.viewPortScrollTop) {\n        newScrollTop = itemTop;\n      } else {\n        if (itemBottom > layout.viewPortScrollBottom) {\n          newScrollTop = itemBottom - layout.viewPortHeight;\n        }\n      }\n\n      this._$viewPort.scrollTop(newScrollTop);\n    }\n  }, {\n    key: \"_resetLayoutModel\",\n    value: function value() {\n      this._layoutModel = null;\n    }\n  }, {\n    key: \"_getLayoutModel\",\n    value: function value() {\n      if (!this._layoutModel) {\n        this._layoutModel = this._createLayoutModel();\n      }\n\n      return this._layoutModel;\n    }\n  }, {\n    key: \"_createLayoutModel\",\n    value: function value() {\n      if (0 === this._items.length) {\n        return null;\n      }\n\n      var item = this._items[0];\n      var $item = item._state.$element;\n      var itemWidth = $item.outerWidth(true);\n\n      if (0 === itemWidth) {\n        return null;\n      }\n\n      var itemHeight = $item.outerHeight(true);\n\n      var viewPortWidth = this._$itemViewContainer.innerWidth();\n\n      var viewPortHeight = this._$viewPort.innerHeight();\n\n      var viewPortScrollTop = this._$viewPort.scrollTop();\n\n      var viewPortScrollBottom = viewPortScrollTop + viewPortHeight;\n      var itemPerRowCount = Math.floor(viewPortWidth / itemWidth);\n      var rowPerPageRate = viewPortHeight / itemHeight;\n      return {\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        viewPortWidth: viewPortWidth,\n        viewPortHeight: viewPortHeight,\n        viewPortScrollTop: viewPortScrollTop,\n        viewPortScrollBottom: viewPortScrollBottom,\n        itemPerRowCount: itemPerRowCount,\n        rowPerPageRate: rowPerPageRate\n      };\n    }\n  }, {\n    key: \"_createItemLayoutModel\",\n    value: function value(index) {\n      var layout = this._getLayoutModel();\n\n      if (!layout) {\n        return null;\n      }\n\n      var itemRowIndex = Math.floor(index / layout.itemPerRowCount);\n      var itemColumnIndex = index % layout.itemPerRowCount;\n      var itemTop = itemRowIndex * layout.itemHeight;\n      var itemBottom = itemTop + layout.itemHeight;\n      return {\n        itemRowIndex: itemRowIndex,\n        itemColumnIndex: itemColumnIndex,\n        itemTop: itemTop,\n        itemBottom: itemBottom\n      };\n    }\n  }, {\n    key: \"_selectAll\",\n    value: function value() {\n      this._selectionController.selectAll();\n    }\n  }, {\n    key: \"_selectItem\",\n    value: function value(item, scrollToItem, eventArgs) {\n      this._selectionController.selectItem(item, eventArgs);\n\n      if (scrollToItem) {\n        this._scrollToItem(item);\n      }\n    }\n  }, {\n    key: \"_selectItemByIndex\",\n    value: function value(index, scrollToItem, eventArgs) {\n      if (index >= 0 && index < this._items.length) {\n        var item = this._items[index];\n\n        this._selectItem(item, scrollToItem, eventArgs);\n      }\n    }\n  }, {\n    key: \"_getFocusedItem\",\n    value: function value() {\n      return this._selectionController.getFocusedItem();\n    }\n  }, {\n    key: \"_loadItems\",\n    value: function value() {\n      var _this = this;\n\n      var loadOperationId = this._getUniqueId();\n\n      this._currentLoadOperationId = loadOperationId;\n      (0, _deferred.when)(this._getItems()).then(function (items) {\n        if (_this._currentLoadOperationId === loadOperationId) {\n          _this._applyItems(items || []);\n        }\n      }, function (error) {\n        if (_this._currentLoadOperationId === loadOperationId) {\n          _this._raiseOnError(error);\n        }\n      });\n    }\n  }, {\n    key: \"_applyItems\",\n    value: function value(items) {\n      this._items = items;\n\n      this._selectionController.setItems(items);\n\n      this._renderItems(items);\n    }\n  }, {\n    key: \"_renderItems\",\n    value: function value(items) {\n      this._$itemViewContainer.empty();\n\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        item._state = {\n          index: i,\n          selected: false,\n          $element: null\n        };\n\n        this._renderItem(item);\n      }\n    }\n  }, {\n    key: \"_renderItem\",\n    value: function value(fileItemInfo) {\n      var $item = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_CLASS).attr(\"title\", this._getTooltipText(fileItemInfo)).data(\"index\", fileItemInfo._state.index);\n      var $itemContent = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS);\n\n      var $itemThumbnail = this._getItemThumbnailContainer(fileItemInfo);\n\n      _events_engine2.default.on($itemThumbnail, \"dragstart\", this._disableDragging);\n\n      var $itemSpacer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS);\n      var $itemName = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS).text(fileItemInfo.fileItem.name);\n      $item.append($itemContent);\n      $itemContent.append($itemThumbnail, $itemSpacer, $itemName);\n\n      this._$itemViewContainer.append($item);\n\n      fileItemInfo._state.$element = $item;\n    }\n  }, {\n    key: \"_getTooltipText\",\n    value: function value(fileItemInfo) {\n      var item = fileItemInfo.fileItem;\n\n      if (item.tooltipText) {\n        return item.tooltipText;\n      }\n\n      var text = \"\".concat(item.name, \"\\r\\n\");\n\n      if (!item.isDirectory) {\n        text += \"\".concat(_message2.default.format(\"dxFileManager-listThumbnailsTooltipTextSize\"), \": \").concat((0, _uiFile_managerUtils.getDisplayFileSize)(item.size), \"\\r\\n\");\n      }\n\n      text += \"\".concat(_message2.default.format(\"dxFileManager-listThumbnailsTooltipTextDateModified\"), \": \").concat(item.dateModified);\n      return text;\n    }\n  }, {\n    key: \"_getUniqueId\",\n    value: function value() {\n      return \"\".concat(Date.now(), \"_\").concat(Math.round(1e5 * Math.random()));\n    }\n  }, {\n    key: \"_disableDragging\",\n    value: function value() {\n      return false;\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_getDefaultOptions\", this).call(this), {\n        focusStateEnabled: true\n      });\n    }\n  }, {\n    key: \"refresh\",\n    value: function value() {\n      this.clearSelection();\n\n      this._loadItems();\n    }\n  }, {\n    key: \"tryOpen\",\n    value: function value() {\n      var item = this._getFocusedItem();\n\n      if (item) {\n        this._raiseSelectedItemOpened(item);\n      }\n    }\n  }, {\n    key: \"clearSelection\",\n    value: function value() {\n      this._selectionController.clearSelection();\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function value() {\n      return this._selectionController.getSelectedItems();\n    }\n  }]);\n\n  return FileManagerThumbnailsItemList;\n}(_uiFile_manager2.default);\n\nvar SingleSelectionController = function () {\n  function SingleSelectionController(options) {\n    _classCallCheck(this, SingleSelectionController);\n\n    this._items = [];\n    this._selectionChangedHandler = options.onSelectionChanged;\n    this._selectionChanged = false;\n  }\n\n  _createClass(SingleSelectionController, [{\n    key: \"selectAll\",\n    value: function value() {}\n  }, {\n    key: \"clearSelection\",\n    value: function value() {\n      this._beginUpdate();\n\n      this._setAllItemsSelectedState(false);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"selectItem\",\n    value: function value(item, eventArgs) {\n      this._beginUpdate();\n\n      this._setAllItemsSelectedState(false, [item]);\n\n      this._setItemSelectedState(item, true);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"invertFocusedItemSelection\",\n    value: function value(item) {}\n  }, {\n    key: \"getFocusedItem\",\n    value: function value() {\n      var selectedItems = this.getSelectedItems();\n      return selectedItems.length > 0 ? selectedItems[0] : null;\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function value() {\n      return this._items.filter(function (item) {\n        return item._state.selected;\n      });\n    }\n  }, {\n    key: \"setItems\",\n    value: function value(items) {\n      this._items = items;\n    }\n  }, {\n    key: \"_setItemSelectedState\",\n    value: function value(item, selected) {\n      if (item._state.selected === selected) {\n        return;\n      }\n\n      item._state.selected = selected;\n\n      item._state.$element.toggleClass(FILE_MANAGER_ITEM_SELECTED_CLASS, selected);\n\n      this._selectionChanged = true;\n    }\n  }, {\n    key: \"_setAllItemsSelectedState\",\n    value: function value(selected, exceptedItems) {\n      for (var i = 0; i < this._items.length; i++) {\n        var item = this._items[i];\n\n        if (exceptedItems && exceptedItems.indexOf(item) !== -1) {\n          continue;\n        }\n\n        this._setItemSelectedState(item, selected);\n      }\n    }\n  }, {\n    key: \"_beginUpdate\",\n    value: function value() {\n      this._selectionChanged = false;\n    }\n  }, {\n    key: \"_endUpdate\",\n    value: function value() {\n      if (this._selectionChanged) {\n        this._selectionChangedHandler();\n\n        this._selectionChanged = false;\n      }\n    }\n  }]);\n\n  return SingleSelectionController;\n}();\n\nvar MultipleSelectionController = function (_SingleSelectionContr) {\n  _inherits(MultipleSelectionController, _SingleSelectionContr);\n\n  function MultipleSelectionController(options) {\n    var _this2;\n\n    _classCallCheck(this, MultipleSelectionController);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(MultipleSelectionController).call(this, options));\n    _this2._focusedItem = null;\n    return _this2;\n  }\n\n  _createClass(MultipleSelectionController, [{\n    key: \"selectAll\",\n    value: function value() {\n      this._beginUpdate();\n\n      this._setAllItemsSelectedState(true);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"selectItem\",\n    value: function value(item, eventArgs) {\n      this._beginUpdate();\n\n      if (eventArgs.shiftKey) {\n        this._setItemsRangeSelectedState(this._focusedItem._state.index, item._state.index, eventArgs.ctrlKey, true);\n      } else {\n        if (eventArgs.ctrlKey) {\n          var needSelect = 1 === this._items.length && this._focusedItem === item || !item._state.selected;\n\n          this._setItemSelectedState(item, needSelect);\n        } else {\n          this._setAllItemsSelectedState(false, [item]);\n\n          this._setItemSelectedState(item, true);\n        }\n      }\n\n      this._setFocusedItem(item);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"_setItemsRangeSelectedState\",\n    value: function value(startIndex, endIndex, invert, selected) {\n      if (startIndex > endIndex) {\n        var temp = endIndex;\n        endIndex = startIndex;\n        startIndex = temp;\n      }\n\n      for (var i = startIndex; i <= endIndex; i++) {\n        var item = this._items[i];\n        var actualSelected = invert ? !item._state.selected : selected;\n\n        this._setItemSelectedState(item, actualSelected);\n      }\n    }\n  }, {\n    key: \"_setFocusedItem\",\n    value: function value(item) {\n      if (this._focusedItem === item) {\n        return;\n      }\n\n      if (this._focusedItem) {\n        this._focusedItem._state.$element.removeClass(FILE_MANAGER_ITEM_FOCUSED_CLASS);\n      }\n\n      item._state.$element.addClass(FILE_MANAGER_ITEM_FOCUSED_CLASS);\n\n      this._focusedItem = item;\n    }\n  }, {\n    key: \"invertFocusedItemSelection\",\n    value: function value() {\n      if (!this._focusedItem) {\n        return;\n      }\n\n      this._beginUpdate();\n\n      this._setItemSelectedState(this._focusedItem, !this._focusedItem._state.selected);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"getFocusedItem\",\n    value: function value() {\n      return this._focusedItem;\n    }\n  }, {\n    key: \"setItems\",\n    value: function value(items) {\n      _get(_getPrototypeOf(MultipleSelectionController.prototype), \"setItems\", this).call(this, items);\n\n      this._focusedItem = items.length > 0 ? items[0] : null;\n    }\n  }]);\n\n  return MultipleSelectionController;\n}(SingleSelectionController);\n\nmodule.exports = FileManagerThumbnailsItemList;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/file_manager/ui.file_manager.item_list.thumbnails.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_extend","_deferred","_events_engine","_events_engine2","_utils","_contextmenu","_uiFile_managerUtils","_message","_message2","_uiFile_manager","_uiFile_manager2","obj","Symbol","_typeof","instance","i","props","descriptor","Object","_defineProperties","Constructor","call","_assertThisInitialized","Reflect","_get","base","_superPropBase","desc","receiver","object","_getPrototypeOf","o","subClass","superClass","constructor","value","writable","configurable","_setPrototypeOf","FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS","FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS","FILE_MANAGER_ITEM_SELECTED_CLASS","FILE_MANAGER_ITEM_FOCUSED_CLASS","FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE","FileManagerThumbnailsItemList","_inherits","_classCallCheck","_possibleConstructorReturn","_createClass","key","multipleSelection","controllerOptions","onSelectionChanged","controllerClass","contextMenuEvent","clickEvent","rightArrow","leftArrow","upArrow","downArrow","home","end","pageUp","pageDown","space","enter","A","e","item","layout","offset","newItemIndex","itemLayout","rowOffset","newRowRate","roundFunc","Math","newRowIndex","$item","items","index","itemRowIndex","itemTop","itemBottom","newScrollTop","itemWidth","itemHeight","viewPortWidth","viewPortHeight","viewPortScrollTop","viewPortScrollBottom","itemPerRowCount","rowPerPageRate","itemColumnIndex","_this","loadOperationId","selected","$element","fileItemInfo","$itemContent","$itemThumbnail","$itemSpacer","$itemName","text","Date","focusStateEnabled","SingleSelectionController","options","selectedItems","exceptedItems","MultipleSelectionController","_this2","eventArgs","needSelect","startIndex","temp","endIndex","actualSelected","invert","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.item_list.thumbnails.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _contextmenu = require(\"../../events/contextmenu\");\r\nvar _uiFile_managerUtils = require(\"./ui.file_manager.utils.js\");\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _uiFile_manager = require(\"./ui.file_manager.item_list\");\r\nvar _uiFile_manager2 = _interopRequireDefault(_uiFile_manager);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS = \"dx-filemanager-thumbnails\";\r\nvar FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS = \"dx-filemanager-thumbnails-view-port\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS = \"dx-filemanager-thumbnails-container\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_CLASS = \"dx-filemanager-thumbnails-item\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS = \"dx-filemanager-thumbnails-item-content\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS = \"dx-filemanager-thumbnails-item-thumbnail\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS = \"dx-filemanager-thumbnails-item-spacer\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS = \"dx-filemanager-thumbnails-item-name\";\r\nvar FILE_MANAGER_ITEM_SELECTED_CLASS = \"dx-filemanager-item-selected\";\r\nvar FILE_MANAGER_ITEM_FOCUSED_CLASS = \"dx-filemanager-item-focused\";\r\nvar FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE = \"dxFileManager_thumbnails\";\r\nvar FileManagerThumbnailsItemList = function(_FileManagerItemListB) {\r\n    _inherits(FileManagerThumbnailsItemList, _FileManagerItemListB);\r\n\r\n    function FileManagerThumbnailsItemList() {\r\n        _classCallCheck(this, FileManagerThumbnailsItemList);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(FileManagerThumbnailsItemList).apply(this, arguments))\r\n    }\r\n    _createClass(FileManagerThumbnailsItemList, [{\r\n        key: \"_init\",\r\n        value: function() {\r\n            this._items = [];\r\n            this._currentLoadOperationId = 0;\r\n            _get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_init\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_initMarkup\", this).call(this);\r\n            var multipleSelection = \"multiple\" === this.option(\"selectionMode\");\r\n            var controllerOptions = {\r\n                onSelectionChanged: this._raiseSelectionChanged.bind(this)\r\n            };\r\n            var controllerClass = multipleSelection ? MultipleSelectionController : SingleSelectionController;\r\n            this._selectionController = new controllerClass(controllerOptions);\r\n            this._$itemViewContainer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS);\r\n            this._$viewPort = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS);\r\n            this._$viewPort.append(this._$itemViewContainer);\r\n            this.$element().addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS);\r\n            this.$element().append(this._$viewPort);\r\n            var contextMenuEvent = (0, _utils.addNamespace)(_contextmenu.name, FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\r\n            var clickEvent = (0, _utils.addNamespace)(\"click\", FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\r\n            _events_engine2.default.on(this.$element(), contextMenuEvent, this._onContextMenu.bind(this));\r\n            _events_engine2.default.on(this.$element(), clickEvent, this._onClick.bind(this));\r\n            this._loadItems()\r\n        }\r\n    }, {\r\n        key: \"_supportedKeys\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_supportedKeys\", this).call(this), {\r\n                rightArrow: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processMoveArrow(1, true, e)\r\n                },\r\n                leftArrow: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processMoveArrow(-1, true, e)\r\n                },\r\n                upArrow: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processMoveArrow(-1, false, e)\r\n                },\r\n                downArrow: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processMoveArrow(1, false, e)\r\n                },\r\n                home: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._selectItemByIndex(0, true, e)\r\n                },\r\n                end: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._selectItemByIndex(this._items.length - 1, true, e)\r\n                },\r\n                pageUp: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processPageChange(true, e)\r\n                },\r\n                pageDown: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processPageChange(false, e)\r\n                },\r\n                space: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._selectionController.invertFocusedItemSelection()\r\n                },\r\n                enter: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this.tryOpen()\r\n                },\r\n                A: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    if (e.ctrlKey) {\r\n                        this._selectAll()\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_beforeKeyProcessing\",\r\n        value: function(e) {\r\n            e.preventDefault();\r\n            this._resetLayoutModel()\r\n        }\r\n    }, {\r\n        key: \"_processMoveArrow\",\r\n        value: function(offset, horizontal, eventArgs) {\r\n            var item = this._getFocusedItem();\r\n            if (item) {\r\n                if (!horizontal) {\r\n                    var layout = this._getLayoutModel();\r\n                    if (!layout) {\r\n                        return\r\n                    }\r\n                    offset *= layout.itemPerRowCount\r\n                }\r\n                var newItemIndex = item._state.index + offset;\r\n                this._selectItemByIndex(newItemIndex, true, eventArgs)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_processPageChange\",\r\n        value: function(pageUp, eventArgs) {\r\n            var item = this._getFocusedItem();\r\n            if (!item) {\r\n                return\r\n            }\r\n            var layout = this._getLayoutModel();\r\n            if (!layout) {\r\n                return\r\n            }\r\n            var itemLayout = this._createItemLayoutModel(item._state.index);\r\n            var rowOffset = pageUp ? layout.rowPerPageRate : -layout.rowPerPageRate;\r\n            var newRowRate = itemLayout.itemRowIndex - rowOffset;\r\n            var roundFunc = pageUp ? Math.ceil : Math.floor;\r\n            var newRowIndex = roundFunc(newRowRate);\r\n            var newItemIndex = newRowIndex * layout.itemPerRowCount + itemLayout.itemColumnIndex;\r\n            if (newItemIndex < 0) {\r\n                newItemIndex = 0\r\n            } else {\r\n                if (newItemIndex >= this._items.length) {\r\n                    newItemIndex = this._items.length - 1\r\n                }\r\n            }\r\n            this._selectItemByIndex(newItemIndex, true, eventArgs)\r\n        }\r\n    }, {\r\n        key: \"_onClick\",\r\n        value: function(e) {\r\n            var $item = (0, _renderer2.default)(e.target).closest(this._getItemSelector());\r\n            if ($item.length > 0) {\r\n                this._selectItemByItemElement($item, e)\r\n            } else {\r\n                this.clearSelection()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onContextMenu\",\r\n        value: function(e) {\r\n            e.preventDefault();\r\n            this._onClick(e);\r\n            var items = this.getSelectedItems();\r\n            this._showContextMenu(items, e.target, e)\r\n        }\r\n    }, {\r\n        key: \"_selectItemByItemElement\",\r\n        value: function($item, e) {\r\n            var index = $item.data(\"index\");\r\n            this._selectItemByIndex(index, false, e)\r\n        }\r\n    }, {\r\n        key: \"_getItemThumbnailCssClass\",\r\n        value: function() {\r\n            return FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS\r\n        }\r\n    }, {\r\n        key: \"_getItemSelector\",\r\n        value: function() {\r\n            return \".\".concat(FILE_MANAGER_THUMBNAILS_ITEM_CLASS)\r\n        }\r\n    }, {\r\n        key: \"_onItemDblClick\",\r\n        value: function(e) {\r\n            var $item = (0, _renderer2.default)(e.currentTarget);\r\n            var index = $item.data(\"index\");\r\n            var item = this._items[index];\r\n            this._raiseSelectedItemOpened(item)\r\n        }\r\n    }, {\r\n        key: \"_scrollToItem\",\r\n        value: function(item) {\r\n            var layout = this._getLayoutModel();\r\n            if (!layout) {\r\n                return\r\n            }\r\n            var itemRowIndex = Math.floor(item._state.index / layout.itemPerRowCount);\r\n            var itemTop = itemRowIndex * layout.itemHeight;\r\n            var itemBottom = itemTop + layout.itemHeight;\r\n            var newScrollTop = layout.viewPortScrollTop;\r\n            if (itemTop < layout.viewPortScrollTop) {\r\n                newScrollTop = itemTop\r\n            } else {\r\n                if (itemBottom > layout.viewPortScrollBottom) {\r\n                    newScrollTop = itemBottom - layout.viewPortHeight\r\n                }\r\n            }\r\n            this._$viewPort.scrollTop(newScrollTop)\r\n        }\r\n    }, {\r\n        key: \"_resetLayoutModel\",\r\n        value: function() {\r\n            this._layoutModel = null\r\n        }\r\n    }, {\r\n        key: \"_getLayoutModel\",\r\n        value: function() {\r\n            if (!this._layoutModel) {\r\n                this._layoutModel = this._createLayoutModel()\r\n            }\r\n            return this._layoutModel\r\n        }\r\n    }, {\r\n        key: \"_createLayoutModel\",\r\n        value: function() {\r\n            if (0 === this._items.length) {\r\n                return null\r\n            }\r\n            var item = this._items[0];\r\n            var $item = item._state.$element;\r\n            var itemWidth = $item.outerWidth(true);\r\n            if (0 === itemWidth) {\r\n                return null\r\n            }\r\n            var itemHeight = $item.outerHeight(true);\r\n            var viewPortWidth = this._$itemViewContainer.innerWidth();\r\n            var viewPortHeight = this._$viewPort.innerHeight();\r\n            var viewPortScrollTop = this._$viewPort.scrollTop();\r\n            var viewPortScrollBottom = viewPortScrollTop + viewPortHeight;\r\n            var itemPerRowCount = Math.floor(viewPortWidth / itemWidth);\r\n            var rowPerPageRate = viewPortHeight / itemHeight;\r\n            return {\r\n                itemWidth: itemWidth,\r\n                itemHeight: itemHeight,\r\n                viewPortWidth: viewPortWidth,\r\n                viewPortHeight: viewPortHeight,\r\n                viewPortScrollTop: viewPortScrollTop,\r\n                viewPortScrollBottom: viewPortScrollBottom,\r\n                itemPerRowCount: itemPerRowCount,\r\n                rowPerPageRate: rowPerPageRate\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createItemLayoutModel\",\r\n        value: function(index) {\r\n            var layout = this._getLayoutModel();\r\n            if (!layout) {\r\n                return null\r\n            }\r\n            var itemRowIndex = Math.floor(index / layout.itemPerRowCount);\r\n            var itemColumnIndex = index % layout.itemPerRowCount;\r\n            var itemTop = itemRowIndex * layout.itemHeight;\r\n            var itemBottom = itemTop + layout.itemHeight;\r\n            return {\r\n                itemRowIndex: itemRowIndex,\r\n                itemColumnIndex: itemColumnIndex,\r\n                itemTop: itemTop,\r\n                itemBottom: itemBottom\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_selectAll\",\r\n        value: function() {\r\n            this._selectionController.selectAll()\r\n        }\r\n    }, {\r\n        key: \"_selectItem\",\r\n        value: function(item, scrollToItem, eventArgs) {\r\n            this._selectionController.selectItem(item, eventArgs);\r\n            if (scrollToItem) {\r\n                this._scrollToItem(item)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_selectItemByIndex\",\r\n        value: function(index, scrollToItem, eventArgs) {\r\n            if (index >= 0 && index < this._items.length) {\r\n                var item = this._items[index];\r\n                this._selectItem(item, scrollToItem, eventArgs)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getFocusedItem\",\r\n        value: function() {\r\n            return this._selectionController.getFocusedItem()\r\n        }\r\n    }, {\r\n        key: \"_loadItems\",\r\n        value: function() {\r\n            var _this = this;\r\n            var loadOperationId = this._getUniqueId();\r\n            this._currentLoadOperationId = loadOperationId;\r\n            (0, _deferred.when)(this._getItems()).then(function(items) {\r\n                if (_this._currentLoadOperationId === loadOperationId) {\r\n                    _this._applyItems(items || [])\r\n                }\r\n            }, function(error) {\r\n                if (_this._currentLoadOperationId === loadOperationId) {\r\n                    _this._raiseOnError(error)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_applyItems\",\r\n        value: function(items) {\r\n            this._items = items;\r\n            this._selectionController.setItems(items);\r\n            this._renderItems(items)\r\n        }\r\n    }, {\r\n        key: \"_renderItems\",\r\n        value: function(items) {\r\n            this._$itemViewContainer.empty();\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = items[i];\r\n                item._state = {\r\n                    index: i,\r\n                    selected: false,\r\n                    $element: null\r\n                };\r\n                this._renderItem(item)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderItem\",\r\n        value: function(fileItemInfo) {\r\n            var $item = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_CLASS).attr(\"title\", this._getTooltipText(fileItemInfo)).data(\"index\", fileItemInfo._state.index);\r\n            var $itemContent = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS);\r\n            var $itemThumbnail = this._getItemThumbnailContainer(fileItemInfo);\r\n            _events_engine2.default.on($itemThumbnail, \"dragstart\", this._disableDragging);\r\n            var $itemSpacer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS);\r\n            var $itemName = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS).text(fileItemInfo.fileItem.name);\r\n            $item.append($itemContent);\r\n            $itemContent.append($itemThumbnail, $itemSpacer, $itemName);\r\n            this._$itemViewContainer.append($item);\r\n            fileItemInfo._state.$element = $item\r\n        }\r\n    }, {\r\n        key: \"_getTooltipText\",\r\n        value: function(fileItemInfo) {\r\n            var item = fileItemInfo.fileItem;\r\n            if (item.tooltipText) {\r\n                return item.tooltipText\r\n            }\r\n            var text = \"\".concat(item.name, \"\\r\\n\");\r\n            if (!item.isDirectory) {\r\n                text += \"\".concat(_message2.default.format(\"dxFileManager-listThumbnailsTooltipTextSize\"), \": \").concat((0, _uiFile_managerUtils.getDisplayFileSize)(item.size), \"\\r\\n\")\r\n            }\r\n            text += \"\".concat(_message2.default.format(\"dxFileManager-listThumbnailsTooltipTextDateModified\"), \": \").concat(item.dateModified);\r\n            return text\r\n        }\r\n    }, {\r\n        key: \"_getUniqueId\",\r\n        value: function() {\r\n            return \"\".concat(Date.now(), \"_\").concat(Math.round(1e5 * Math.random()))\r\n        }\r\n    }, {\r\n        key: \"_disableDragging\",\r\n        value: function() {\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                focusStateEnabled: true\r\n            })\r\n        }\r\n    }, {\r\n        key: \"refresh\",\r\n        value: function() {\r\n            this.clearSelection();\r\n            this._loadItems()\r\n        }\r\n    }, {\r\n        key: \"tryOpen\",\r\n        value: function() {\r\n            var item = this._getFocusedItem();\r\n            if (item) {\r\n                this._raiseSelectedItemOpened(item)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"clearSelection\",\r\n        value: function() {\r\n            this._selectionController.clearSelection()\r\n        }\r\n    }, {\r\n        key: \"getSelectedItems\",\r\n        value: function() {\r\n            return this._selectionController.getSelectedItems()\r\n        }\r\n    }]);\r\n    return FileManagerThumbnailsItemList\r\n}(_uiFile_manager2.default);\r\nvar SingleSelectionController = function() {\r\n    function SingleSelectionController(options) {\r\n        _classCallCheck(this, SingleSelectionController);\r\n        this._items = [];\r\n        this._selectionChangedHandler = options.onSelectionChanged;\r\n        this._selectionChanged = false\r\n    }\r\n    _createClass(SingleSelectionController, [{\r\n        key: \"selectAll\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"clearSelection\",\r\n        value: function() {\r\n            this._beginUpdate();\r\n            this._setAllItemsSelectedState(false);\r\n            this._endUpdate()\r\n        }\r\n    }, {\r\n        key: \"selectItem\",\r\n        value: function(item, eventArgs) {\r\n            this._beginUpdate();\r\n            this._setAllItemsSelectedState(false, [item]);\r\n            this._setItemSelectedState(item, true);\r\n            this._endUpdate()\r\n        }\r\n    }, {\r\n        key: \"invertFocusedItemSelection\",\r\n        value: function(item) {}\r\n    }, {\r\n        key: \"getFocusedItem\",\r\n        value: function() {\r\n            var selectedItems = this.getSelectedItems();\r\n            return selectedItems.length > 0 ? selectedItems[0] : null\r\n        }\r\n    }, {\r\n        key: \"getSelectedItems\",\r\n        value: function() {\r\n            return this._items.filter(function(item) {\r\n                return item._state.selected\r\n            })\r\n        }\r\n    }, {\r\n        key: \"setItems\",\r\n        value: function(items) {\r\n            this._items = items\r\n        }\r\n    }, {\r\n        key: \"_setItemSelectedState\",\r\n        value: function(item, selected) {\r\n            if (item._state.selected === selected) {\r\n                return\r\n            }\r\n            item._state.selected = selected;\r\n            item._state.$element.toggleClass(FILE_MANAGER_ITEM_SELECTED_CLASS, selected);\r\n            this._selectionChanged = true\r\n        }\r\n    }, {\r\n        key: \"_setAllItemsSelectedState\",\r\n        value: function(selected, exceptedItems) {\r\n            for (var i = 0; i < this._items.length; i++) {\r\n                var item = this._items[i];\r\n                if (exceptedItems && exceptedItems.indexOf(item) !== -1) {\r\n                    continue\r\n                }\r\n                this._setItemSelectedState(item, selected)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_beginUpdate\",\r\n        value: function() {\r\n            this._selectionChanged = false\r\n        }\r\n    }, {\r\n        key: \"_endUpdate\",\r\n        value: function() {\r\n            if (this._selectionChanged) {\r\n                this._selectionChangedHandler();\r\n                this._selectionChanged = false\r\n            }\r\n        }\r\n    }]);\r\n    return SingleSelectionController\r\n}();\r\nvar MultipleSelectionController = function(_SingleSelectionContr) {\r\n    _inherits(MultipleSelectionController, _SingleSelectionContr);\r\n\r\n    function MultipleSelectionController(options) {\r\n        var _this2;\r\n        _classCallCheck(this, MultipleSelectionController);\r\n        _this2 = _possibleConstructorReturn(this, _getPrototypeOf(MultipleSelectionController).call(this, options));\r\n        _this2._focusedItem = null;\r\n        return _this2\r\n    }\r\n    _createClass(MultipleSelectionController, [{\r\n        key: \"selectAll\",\r\n        value: function() {\r\n            this._beginUpdate();\r\n            this._setAllItemsSelectedState(true);\r\n            this._endUpdate()\r\n        }\r\n    }, {\r\n        key: \"selectItem\",\r\n        value: function(item, eventArgs) {\r\n            this._beginUpdate();\r\n            if (eventArgs.shiftKey) {\r\n                this._setItemsRangeSelectedState(this._focusedItem._state.index, item._state.index, eventArgs.ctrlKey, true)\r\n            } else {\r\n                if (eventArgs.ctrlKey) {\r\n                    var needSelect = 1 === this._items.length && this._focusedItem === item || !item._state.selected;\r\n                    this._setItemSelectedState(item, needSelect)\r\n                } else {\r\n                    this._setAllItemsSelectedState(false, [item]);\r\n                    this._setItemSelectedState(item, true)\r\n                }\r\n            }\r\n            this._setFocusedItem(item);\r\n            this._endUpdate()\r\n        }\r\n    }, {\r\n        key: \"_setItemsRangeSelectedState\",\r\n        value: function(startIndex, endIndex, invert, selected) {\r\n            if (startIndex > endIndex) {\r\n                var temp = endIndex;\r\n                endIndex = startIndex;\r\n                startIndex = temp\r\n            }\r\n            for (var i = startIndex; i <= endIndex; i++) {\r\n                var item = this._items[i];\r\n                var actualSelected = invert ? !item._state.selected : selected;\r\n                this._setItemSelectedState(item, actualSelected)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setFocusedItem\",\r\n        value: function(item) {\r\n            if (this._focusedItem === item) {\r\n                return\r\n            }\r\n            if (this._focusedItem) {\r\n                this._focusedItem._state.$element.removeClass(FILE_MANAGER_ITEM_FOCUSED_CLASS)\r\n            }\r\n            item._state.$element.addClass(FILE_MANAGER_ITEM_FOCUSED_CLASS);\r\n            this._focusedItem = item\r\n        }\r\n    }, {\r\n        key: \"invertFocusedItemSelection\",\r\n        value: function() {\r\n            if (!this._focusedItem) {\r\n                return\r\n            }\r\n            this._beginUpdate();\r\n            this._setItemSelectedState(this._focusedItem, !this._focusedItem._state.selected);\r\n            this._endUpdate()\r\n        }\r\n    }, {\r\n        key: \"getFocusedItem\",\r\n        value: function() {\r\n            return this._focusedItem\r\n        }\r\n    }, {\r\n        key: \"setItems\",\r\n        value: function(items) {\r\n            _get(_getPrototypeOf(MultipleSelectionController.prototype), \"setItems\", this).call(this, items);\r\n            this._focusedItem = items.length > 0 ? items[0] : null\r\n        }\r\n    }]);\r\n    return MultipleSelectionController\r\n}(SingleSelectionController);\r\nmodule.exports = FileManagerThumbnailsItemList;\r\n"]},"metadata":{},"sourceType":"module"}