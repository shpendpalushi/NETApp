{"ast":null,"code":"/**\r\n * DevExtreme (viz/translators/translator2d.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar Range = require(\"./range\").Range;\n\nvar categoryTranslator = require(\"./category_translator\");\n\nvar intervalTranslator = require(\"./interval_translator\");\n\nvar datetimeTranslator = require(\"./datetime_translator\");\n\nvar logarithmicTranslator = require(\"./logarithmic_translator\");\n\nvar vizUtils = require(\"../core/utils\");\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar getLog = vizUtils.getLogExt;\nvar getPower = vizUtils.getPower;\nvar raiseToExt = vizUtils.raiseToExt;\nvar isDefined = typeUtils.isDefined;\n\nvar adjust = require(\"../../core/utils/math\").adjust;\n\nvar _abs = Math.abs;\nvar CANVAS_PROP = [\"width\", \"height\", \"left\", \"top\", \"bottom\", \"right\"];\n\nvar _Translator2d;\n\nvar addInterval = require(\"../../core/utils/date\").addInterval;\n\nvar dummyTranslator = {\n  to: function to(value) {\n    var coord = this._canvasOptions.startPoint + (this._options.conversionValue ? value : Math.round(value));\n    return coord > this._canvasOptions.endPoint ? this._canvasOptions.endPoint : coord;\n  },\n  from: function from(value) {\n    return value - this._canvasOptions.startPoint;\n  }\n};\n\nvar validateCanvas = function validateCanvas(canvas) {\n  each(CANVAS_PROP, function (_, prop) {\n    canvas[prop] = parseInt(canvas[prop]) || 0;\n  });\n  return canvas;\n};\n\nvar makeCategoriesToPoints = function makeCategoriesToPoints(categories) {\n  var categoriesToPoints = {};\n  categories.forEach(function (item, i) {\n    categoriesToPoints[item.valueOf()] = i;\n  });\n  return categoriesToPoints;\n};\n\nvar validateBusinessRange = function validateBusinessRange(businessRange) {\n  if (!(businessRange instanceof Range)) {\n    businessRange = new Range(businessRange);\n  }\n\n  function validate(valueSelector, baseValueSelector) {\n    if (!isDefined(businessRange[valueSelector]) && isDefined(businessRange[baseValueSelector])) {\n      businessRange[valueSelector] = businessRange[baseValueSelector];\n    }\n  }\n\n  validate(\"minVisible\", \"min\");\n  validate(\"maxVisible\", \"max\");\n  return businessRange;\n};\n\nfunction prepareBreaks(breaks, range) {\n  var transform = \"logarithmic\" === range.axisType ? function (value) {\n    return getLog(value, range.base);\n  } : function (value) {\n    return value;\n  };\n  var array = [];\n  var br;\n  var transformFrom;\n  var transformTo;\n  var i;\n  var length = breaks.length;\n  var sum = 0;\n\n  for (i = 0; i < length; i++) {\n    br = breaks[i];\n    transformFrom = transform(br.from);\n    transformTo = transform(br.to);\n    sum += transformTo - transformFrom;\n    array.push({\n      trFrom: transformFrom,\n      trTo: transformTo,\n      from: br.from,\n      to: br.to,\n      length: sum,\n      cumulativeWidth: br.cumulativeWidth\n    });\n  }\n\n  return array;\n}\n\nfunction getCanvasBounds(range) {\n  var min = range.min;\n  var max = range.max;\n  var minVisible = range.minVisible;\n  var maxVisible = range.maxVisible;\n  var isLogarithmic = \"logarithmic\" === range.axisType;\n\n  if (isLogarithmic) {\n    maxVisible = getLog(maxVisible, range.base, range.allowNegatives, range.linearThreshold);\n    minVisible = getLog(minVisible, range.base, range.allowNegatives, range.linearThreshold);\n    min = getLog(min, range.base, range.allowNegatives, range.linearThreshold);\n    max = getLog(max, range.base, range.allowNegatives, range.linearThreshold);\n  }\n\n  return {\n    base: range.base,\n    rangeMin: min,\n    rangeMax: max,\n    rangeMinVisible: minVisible,\n    rangeMaxVisible: maxVisible\n  };\n}\n\nfunction getCheckingMethodsAboutBreaks(inverted) {\n  return {\n    isStartSide: !inverted ? function (pos, breaks, start, end) {\n      return pos < breaks[0][start];\n    } : function (pos, breaks, start, end) {\n      return pos <= breaks[breaks.length - 1][end];\n    },\n    isEndSide: !inverted ? function (pos, breaks, start, end) {\n      return pos >= breaks[breaks.length - 1][end];\n    } : function (pos, breaks, start, end) {\n      return pos > breaks[0][start];\n    },\n    isInBreak: !inverted ? function (pos, br, start, end) {\n      return pos >= br[start] && pos < br[end];\n    } : function (pos, br, start, end) {\n      return pos > br[end] && pos <= br[start];\n    },\n    isBetweenBreaks: !inverted ? function (pos, br, prevBreak, start, end) {\n      return pos < br[start] && pos >= prevBreak[end];\n    } : function (pos, br, prevBreak, start, end) {\n      return pos >= br[end] && pos < prevBreak[start];\n    },\n    getLength: !inverted ? function (br) {\n      return br.length;\n    } : function (br, lastBreak) {\n      return lastBreak.length - br.length;\n    },\n    getBreaksSize: !inverted ? function (br) {\n      return br.cumulativeWidth;\n    } : function (br, lastBreak) {\n      return lastBreak.cumulativeWidth - br.cumulativeWidth;\n    }\n  };\n}\n\nexports.Translator2D = _Translator2d = function _Translator2d(businessRange, canvas, options) {\n  this.update(businessRange, canvas, options);\n};\n\n_Translator2d.prototype = {\n  constructor: _Translator2d,\n  reinit: function reinit() {\n    var that = this;\n    var options = that._options;\n    var range = that._businessRange;\n    var categories = range.categories || [];\n    var script = {};\n\n    var canvasOptions = that._prepareCanvasOptions();\n\n    var visibleCategories = vizUtils.getCategoriesInfo(categories, range.minVisible, range.maxVisible).categories;\n    var categoriesLength = visibleCategories.length;\n\n    if (range.isEmpty()) {\n      script = dummyTranslator;\n    } else {\n      switch (range.axisType) {\n        case \"logarithmic\":\n          script = logarithmicTranslator;\n          break;\n\n        case \"semidiscrete\":\n          script = intervalTranslator;\n          canvasOptions.ratioOfCanvasRange = canvasOptions.canvasLength / (addInterval(canvasOptions.rangeMaxVisible, options.interval) - canvasOptions.rangeMinVisible);\n          break;\n\n        case \"discrete\":\n          script = categoryTranslator;\n          that._categories = categories;\n          canvasOptions.interval = that._getDiscreteInterval(options.addSpiderCategory ? categoriesLength + 1 : categoriesLength, canvasOptions);\n          that._categoriesToPoints = makeCategoriesToPoints(categories, canvasOptions.invert);\n\n          if (categoriesLength) {\n            canvasOptions.startPointIndex = that._categoriesToPoints[visibleCategories[0].valueOf()];\n            that.visibleCategories = visibleCategories;\n          }\n\n          break;\n\n        default:\n          if (\"datetime\" === range.dataType) {\n            script = datetimeTranslator;\n          }\n\n      }\n    }\n\n    (that._oldMethods || []).forEach(function (methodName) {\n      delete that[methodName];\n    });\n    that._oldMethods = Object.keys(script);\n    extend(that, script);\n    that._conversionValue = options.conversionValue ? function (value) {\n      return value;\n    } : function (value) {\n      return Math.round(value);\n    };\n    that.sc = {};\n    that._checkingMethodsAboutBreaks = [getCheckingMethodsAboutBreaks(false), getCheckingMethodsAboutBreaks(that.isInverted())];\n\n    that._translateBreaks();\n\n    that._calculateSpecialValues();\n  },\n  _translateBreaks: function _translateBreaks() {\n    var breaks = this._breaks;\n    var size = this._options.breaksSize;\n    var i;\n    var b;\n    var end;\n    var length;\n\n    if (void 0 === breaks) {\n      return;\n    }\n\n    for (i = 0, length = breaks.length; i < length; i++) {\n      b = breaks[i];\n      end = this.translate(b.to);\n      b.end = end;\n      b.start = !b.gapSize ? !this.isInverted() ? end - size : end + size : end;\n    }\n  },\n  _checkValueAboutBreaks: function _checkValueAboutBreaks(breaks, pos, start, end, methods) {\n    var i;\n    var length;\n    var prop = {\n      length: 0,\n      breaksSize: void 0,\n      inBreak: false\n    };\n    var br;\n    var prevBreak;\n    var lastBreak = breaks[breaks.length - 1];\n\n    if (methods.isStartSide(pos, breaks, start, end)) {\n      return prop;\n    } else {\n      if (methods.isEndSide(pos, breaks, start, end)) {\n        return {\n          length: lastBreak.length,\n          breaksSize: lastBreak.cumulativeWidth,\n          inBreak: false\n        };\n      }\n    }\n\n    for (i = 0, length = breaks.length; i < length; i++) {\n      br = breaks[i];\n      prevBreak = breaks[i - 1];\n\n      if (methods.isInBreak(pos, br, start, end)) {\n        prop.inBreak = true;\n        prop.break = br;\n        break;\n      }\n\n      if (prevBreak && methods.isBetweenBreaks(pos, br, prevBreak, start, end)) {\n        prop = {\n          length: methods.getLength(prevBreak, lastBreak),\n          breaksSize: methods.getBreaksSize(prevBreak, lastBreak),\n          inBreak: false\n        };\n        break;\n      }\n    }\n\n    return prop;\n  },\n  isInverted: function isInverted() {\n    return !(this._options.isHorizontal ^ this._businessRange.invert);\n  },\n  _getDiscreteInterval: function _getDiscreteInterval(categoriesLength, canvasOptions) {\n    var correctedCategoriesCount = categoriesLength - (this._options.stick ? 1 : 0);\n    return correctedCategoriesCount > 0 ? canvasOptions.canvasLength / correctedCategoriesCount : canvasOptions.canvasLength;\n  },\n  _prepareCanvasOptions: function _prepareCanvasOptions() {\n    var that = this;\n    var businessRange = that._businessRange;\n    var canvasOptions = that._canvasOptions = getCanvasBounds(businessRange);\n    var canvas = that._canvas;\n    var breaks = that._breaks;\n    var length;\n    canvasOptions.startPadding = canvas.startPadding || 0;\n    canvasOptions.endPadding = canvas.endPadding || 0;\n\n    if (that._options.isHorizontal) {\n      canvasOptions.startPoint = canvas.left + canvasOptions.startPadding;\n      length = canvas.width;\n      canvasOptions.endPoint = canvas.width - canvas.right - canvasOptions.endPadding;\n      canvasOptions.invert = businessRange.invert;\n    } else {\n      canvasOptions.startPoint = canvas.top + canvasOptions.startPadding;\n      length = canvas.height;\n      canvasOptions.endPoint = canvas.height - canvas.bottom - canvasOptions.endPadding;\n      canvasOptions.invert = !businessRange.invert;\n    }\n\n    that.canvasLength = canvasOptions.canvasLength = canvasOptions.endPoint - canvasOptions.startPoint;\n    canvasOptions.rangeDoubleError = Math.pow(10, getPower(canvasOptions.rangeMax - canvasOptions.rangeMin) - getPower(length) - 2);\n    canvasOptions.ratioOfCanvasRange = canvasOptions.canvasLength / (canvasOptions.rangeMaxVisible - canvasOptions.rangeMinVisible);\n\n    if (void 0 !== breaks) {\n      canvasOptions.ratioOfCanvasRange = (canvasOptions.canvasLength - breaks[breaks.length - 1].cumulativeWidth) / (canvasOptions.rangeMaxVisible - canvasOptions.rangeMinVisible - breaks[breaks.length - 1].length);\n    }\n\n    return canvasOptions;\n  },\n  updateCanvas: function updateCanvas(canvas) {\n    this._canvas = validateCanvas(canvas);\n    this.reinit();\n  },\n  updateBusinessRange: function updateBusinessRange(businessRange) {\n    var that = this;\n    var breaks = businessRange.breaks || [];\n    that._businessRange = validateBusinessRange(businessRange);\n    that._breaks = breaks.length ? prepareBreaks(breaks, that._businessRange) : void 0;\n    that.reinit();\n  },\n  update: function update(businessRange, canvas, options) {\n    var that = this;\n    that._options = extend(that._options || {}, options);\n    that._canvas = validateCanvas(canvas);\n    that.updateBusinessRange(businessRange);\n  },\n  getBusinessRange: function getBusinessRange() {\n    return this._businessRange;\n  },\n  getEventScale: function getEventScale(zoomEvent) {\n    return zoomEvent.deltaScale || 1;\n  },\n  getCanvasVisibleArea: function getCanvasVisibleArea() {\n    return {\n      min: this._canvasOptions.startPoint,\n      max: this._canvasOptions.endPoint\n    };\n  },\n  _calculateSpecialValues: function _calculateSpecialValues() {\n    var that = this;\n    var canvasOptions = that._canvasOptions;\n    var startPoint = canvasOptions.startPoint - canvasOptions.startPadding;\n    var endPoint = canvasOptions.endPoint + canvasOptions.endPadding;\n    var range = that._businessRange;\n    var minVisible = range.minVisible;\n    var maxVisible = range.maxVisible;\n    var canvas_position_center_middle = startPoint + canvasOptions.canvasLength / 2;\n    var canvas_position_default;\n\n    if (minVisible < 0 && maxVisible > 0 && minVisible !== maxVisible) {\n      canvas_position_default = that.translate(0, 1);\n    }\n\n    if (!isDefined(canvas_position_default)) {\n      var invert = range.invert ^ (minVisible < 0 && maxVisible <= 0);\n\n      if (that._options.isHorizontal) {\n        canvas_position_default = invert ? endPoint : startPoint;\n      } else {\n        canvas_position_default = invert ? startPoint : endPoint;\n      }\n    }\n\n    that.sc = {\n      canvas_position_default: canvas_position_default,\n      canvas_position_left: startPoint,\n      canvas_position_top: startPoint,\n      canvas_position_center: canvas_position_center_middle,\n      canvas_position_middle: canvas_position_center_middle,\n      canvas_position_right: endPoint,\n      canvas_position_bottom: endPoint,\n      canvas_position_start: canvasOptions.invert ? endPoint : startPoint,\n      canvas_position_end: canvasOptions.invert ? startPoint : endPoint\n    };\n  },\n  translateSpecialCase: function translateSpecialCase(value) {\n    return this.sc[value];\n  },\n  _calculateProjection: function _calculateProjection(distance) {\n    var canvasOptions = this._canvasOptions;\n    return canvasOptions.invert ? canvasOptions.endPoint - distance : canvasOptions.startPoint + distance;\n  },\n  _calculateUnProjection: function _calculateUnProjection(distance) {\n    var canvasOptions = this._canvasOptions;\n    return canvasOptions.invert ? canvasOptions.rangeMaxVisible.valueOf() - distance : canvasOptions.rangeMinVisible.valueOf() + distance;\n  },\n  getMinBarSize: function getMinBarSize(minBarSize) {\n    var visibleArea = this.getCanvasVisibleArea();\n    var minValue = this.from(visibleArea.min + minBarSize);\n    return _abs(this.from(visibleArea.min) - (!isDefined(minValue) ? this.from(visibleArea.max) : minValue));\n  },\n  checkMinBarSize: function checkMinBarSize(value, minShownValue, stackValue) {\n    return _abs(value) < minShownValue ? value >= 0 ? minShownValue : -minShownValue : value;\n  },\n  translate: function translate(bp, direction) {\n    var specialValue = this.translateSpecialCase(bp);\n\n    if (isDefined(specialValue)) {\n      return Math.round(specialValue);\n    }\n\n    if (isNaN(bp)) {\n      return null;\n    }\n\n    return this.to(bp, direction);\n  },\n  getInterval: function getInterval(interval) {\n    var canvasOptions = this._canvasOptions;\n    interval = isDefined(interval) ? interval : this._businessRange.interval;\n\n    if (interval) {\n      return Math.round(canvasOptions.ratioOfCanvasRange * interval);\n    }\n\n    return Math.round(canvasOptions.endPoint - canvasOptions.startPoint);\n  },\n  zoom: function zoom(translate, scale, wholeRange) {\n    var canvasOptions = this._canvasOptions;\n\n    if (canvasOptions.rangeMinVisible.valueOf() === canvasOptions.rangeMaxVisible.valueOf() && 0 !== translate) {\n      return this.zoomZeroLengthRange(translate, scale);\n    }\n\n    var startPoint = canvasOptions.startPoint;\n    var endPoint = canvasOptions.endPoint;\n    var isInverted = this.isInverted();\n    var newStart = (startPoint + translate) / scale;\n    var newEnd = (endPoint + translate) / scale;\n    wholeRange = wholeRange || {};\n    var minPoint = this.to(isInverted ? wholeRange.endValue : wholeRange.startValue);\n    var maxPoint = this.to(isInverted ? wholeRange.startValue : wholeRange.endValue);\n    var min;\n    var max;\n\n    if (minPoint > newStart) {\n      newEnd -= newStart - minPoint;\n      newStart = minPoint;\n      min = isInverted ? wholeRange.endValue : wholeRange.startValue;\n    }\n\n    if (maxPoint < newEnd) {\n      newStart -= newEnd - maxPoint;\n      newEnd = maxPoint;\n      max = isInverted ? wholeRange.startValue : wholeRange.endValue;\n    }\n\n    if (maxPoint - minPoint < newEnd - newStart) {\n      newStart = minPoint;\n      newEnd = maxPoint;\n    }\n\n    translate = (endPoint - startPoint) * newStart / (newEnd - newStart) - startPoint;\n    scale = (startPoint + translate) / newStart || 1;\n    min = isDefined(min) ? min : adjust(this.from(newStart, 1));\n    max = isDefined(max) ? max : adjust(this.from(newEnd, -1));\n\n    if (min > max) {\n      min = min > wholeRange.endValue ? wholeRange.endValue : min;\n      max = max < wholeRange.startValue ? wholeRange.startValue : max;\n    } else {\n      min = min < wholeRange.startValue ? wholeRange.startValue : min;\n      max = max > wholeRange.endValue ? wholeRange.endValue : max;\n    }\n\n    return {\n      min: min,\n      max: max,\n      translate: adjust(translate),\n      scale: adjust(scale)\n    };\n  },\n  zoomZeroLengthRange: function zoomZeroLengthRange(translate, scale) {\n    var canvasOptions = this._canvasOptions;\n    var min = canvasOptions.rangeMin;\n    var max = canvasOptions.rangeMax;\n    var correction = (max.valueOf() !== min.valueOf() ? max.valueOf() - min.valueOf() : _abs(canvasOptions.rangeMinVisible.valueOf() - min.valueOf())) / canvasOptions.canvasLength;\n    var isDateTime = typeUtils.isDate(max) || typeUtils.isDate(min);\n    var isLogarithmic = \"logarithmic\" === this._businessRange.axisType;\n    var newMin = canvasOptions.rangeMinVisible.valueOf() - correction;\n    var newMax = canvasOptions.rangeMaxVisible.valueOf() + correction;\n    newMin = isLogarithmic ? adjust(raiseToExt(newMin, canvasOptions.base)) : isDateTime ? new Date(newMin) : newMin;\n    newMax = isLogarithmic ? adjust(raiseToExt(newMax, canvasOptions.base)) : isDateTime ? new Date(newMax) : newMax;\n    return {\n      min: newMin,\n      max: newMax,\n      translate: translate,\n      scale: scale\n    };\n  },\n  getMinScale: function getMinScale(zoom) {\n    return zoom ? 1.1 : .9;\n  },\n  getScale: function getScale(val1, val2) {\n    var canvasOptions = this._canvasOptions;\n\n    if (canvasOptions.rangeMax === canvasOptions.rangeMin) {\n      return 1;\n    }\n\n    val1 = isDefined(val1) ? this._fromValue(val1) : canvasOptions.rangeMin;\n    val2 = isDefined(val2) ? this._fromValue(val2) : canvasOptions.rangeMax;\n    return (canvasOptions.rangeMax - canvasOptions.rangeMin) / Math.abs(val1 - val2);\n  },\n  isValid: function isValid(value) {\n    var co = this._canvasOptions;\n    value = this._fromValue(value);\n    return null !== value && !isNaN(value) && value.valueOf() + co.rangeDoubleError >= co.rangeMin && value.valueOf() - co.rangeDoubleError <= co.rangeMax;\n  },\n  getCorrectValue: function getCorrectValue(value, direction) {\n    var that = this;\n    var breaks = that._breaks;\n    var prop;\n    value = that._fromValue(value);\n\n    if (that._breaks) {\n      prop = that._checkValueAboutBreaks(breaks, value, \"trFrom\", \"trTo\", that._checkingMethodsAboutBreaks[0]);\n\n      if (true === prop.inBreak) {\n        return that._toValue(direction > 0 ? prop.break.trTo : prop.break.trFrom);\n      }\n    }\n\n    return that._toValue(value);\n  },\n  to: function to(bp, direction) {\n    var range = this.getBusinessRange();\n\n    if (isDefined(range.maxVisible) && isDefined(range.minVisible) && range.maxVisible.valueOf() === range.minVisible.valueOf()) {\n      if (!isDefined(bp) || range.maxVisible.valueOf() !== bp.valueOf()) {\n        return null;\n      }\n\n      return this.translateSpecialCase(0 === bp && this._options.shiftZeroValue ? \"canvas_position_default\" : \"canvas_position_middle\");\n    }\n\n    bp = this._fromValue(bp);\n    var that = this;\n    var canvasOptions = that._canvasOptions;\n    var breaks = that._breaks;\n    var prop = {\n      length: 0\n    };\n    var commonBreakSize = 0;\n\n    if (void 0 !== breaks) {\n      prop = that._checkValueAboutBreaks(breaks, bp, \"trFrom\", \"trTo\", that._checkingMethodsAboutBreaks[0]);\n      commonBreakSize = isDefined(prop.breaksSize) ? prop.breaksSize : 0;\n    }\n\n    if (true === prop.inBreak) {\n      if (direction > 0) {\n        return prop.break.start;\n      } else {\n        if (direction < 0) {\n          return prop.break.end;\n        } else {\n          return null;\n        }\n      }\n    }\n\n    return that._conversionValue(that._calculateProjection((bp - canvasOptions.rangeMinVisible - prop.length) * canvasOptions.ratioOfCanvasRange + commonBreakSize));\n  },\n  from: function from(pos, direction) {\n    var that = this;\n    var breaks = that._breaks;\n    var prop = {\n      length: 0\n    };\n    var canvasOptions = that._canvasOptions;\n    var startPoint = canvasOptions.startPoint;\n    var commonBreakSize = 0;\n\n    if (void 0 !== breaks) {\n      prop = that._checkValueAboutBreaks(breaks, pos, \"start\", \"end\", that._checkingMethodsAboutBreaks[1]);\n      commonBreakSize = isDefined(prop.breaksSize) ? prop.breaksSize : 0;\n    }\n\n    if (true === prop.inBreak) {\n      if (direction > 0) {\n        return that._toValue(prop.break.trTo);\n      } else {\n        if (direction < 0) {\n          return that._toValue(prop.break.trFrom);\n        } else {\n          return null;\n        }\n      }\n    }\n\n    return that._toValue(that._calculateUnProjection((pos - startPoint - commonBreakSize) / canvasOptions.ratioOfCanvasRange + prop.length));\n  },\n  isValueProlonged: false,\n  getRange: function getRange() {\n    return [this._toValue(this._canvasOptions.rangeMin), this._toValue(this._canvasOptions.rangeMax)];\n  },\n  getScreenRange: function getScreenRange() {\n    return [this._canvasOptions.startPoint, this._canvasOptions.endPoint];\n  },\n  add: function add(value, diff, dir) {\n    return this._add(value, diff, (this._businessRange.invert ? -1 : 1) * dir);\n  },\n  _add: function _add(value, diff, coeff) {\n    return this._toValue(this._fromValue(value) + diff * coeff);\n  },\n  _fromValue: function _fromValue(value) {\n    return null !== value ? Number(value) : null;\n  },\n  _toValue: function _toValue(value) {\n    return null !== value ? Number(value) : null;\n  },\n  ratioOfCanvasRange: function ratioOfCanvasRange() {\n    return this._canvasOptions.ratioOfCanvasRange;\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/translators/translator2d.js"],"names":["extend","require","each","Range","categoryTranslator","intervalTranslator","datetimeTranslator","logarithmicTranslator","vizUtils","typeUtils","getLog","getPower","raiseToExt","isDefined","adjust","_abs","Math","CANVAS_PROP","addInterval","dummyTranslator","to","coord","from","value","validateCanvas","canvas","parseInt","makeCategoriesToPoints","categoriesToPoints","categories","item","validateBusinessRange","businessRange","validate","transform","range","array","length","breaks","sum","i","br","transformFrom","transformTo","trFrom","trTo","cumulativeWidth","min","max","minVisible","maxVisible","isLogarithmic","base","rangeMin","rangeMax","rangeMinVisible","rangeMaxVisible","isStartSide","pos","isEndSide","isInBreak","isBetweenBreaks","prevBreak","getLength","lastBreak","getBreaksSize","exports","_Translator2d","constructor","reinit","that","options","script","canvasOptions","visibleCategories","categoriesLength","Object","getCheckingMethodsAboutBreaks","_translateBreaks","size","b","end","_checkValueAboutBreaks","prop","breaksSize","inBreak","methods","isInverted","_getDiscreteInterval","correctedCategoriesCount","_prepareCanvasOptions","getCanvasBounds","updateCanvas","updateBusinessRange","prepareBreaks","update","getBusinessRange","getEventScale","zoomEvent","getCanvasVisibleArea","endPoint","_calculateSpecialValues","startPoint","canvas_position_center_middle","canvas_position_default","invert","canvas_position_left","canvas_position_top","canvas_position_center","canvas_position_middle","canvas_position_right","canvas_position_bottom","canvas_position_start","canvas_position_end","translateSpecialCase","_calculateProjection","_calculateUnProjection","getMinBarSize","visibleArea","minValue","checkMinBarSize","translate","specialValue","isNaN","getInterval","interval","zoom","newStart","newEnd","wholeRange","minPoint","maxPoint","scale","zoomZeroLengthRange","correction","isDateTime","newMin","newMax","getMinScale","getScale","val1","val2","isValid","co","getCorrectValue","direction","bp","commonBreakSize","isValueProlonged","getRange","getScreenRange","add","_add","diff","_fromValue","Number","_toValue","ratioOfCanvasRange"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/translators/translator2d.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar Range = require(\"./range\").Range;\r\nvar categoryTranslator = require(\"./category_translator\");\r\nvar intervalTranslator = require(\"./interval_translator\");\r\nvar datetimeTranslator = require(\"./datetime_translator\");\r\nvar logarithmicTranslator = require(\"./logarithmic_translator\");\r\nvar vizUtils = require(\"../core/utils\");\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar getLog = vizUtils.getLogExt;\r\nvar getPower = vizUtils.getPower;\r\nvar raiseToExt = vizUtils.raiseToExt;\r\nvar isDefined = typeUtils.isDefined;\r\nvar adjust = require(\"../../core/utils/math\").adjust;\r\nvar _abs = Math.abs;\r\nvar CANVAS_PROP = [\"width\", \"height\", \"left\", \"top\", \"bottom\", \"right\"];\r\nvar _Translator2d;\r\nvar addInterval = require(\"../../core/utils/date\").addInterval;\r\nvar dummyTranslator = {\r\n    to: function(value) {\r\n        var coord = this._canvasOptions.startPoint + (this._options.conversionValue ? value : Math.round(value));\r\n        return coord > this._canvasOptions.endPoint ? this._canvasOptions.endPoint : coord\r\n    },\r\n    from: function(value) {\r\n        return value - this._canvasOptions.startPoint\r\n    }\r\n};\r\nvar validateCanvas = function(canvas) {\r\n    each(CANVAS_PROP, function(_, prop) {\r\n        canvas[prop] = parseInt(canvas[prop]) || 0\r\n    });\r\n    return canvas\r\n};\r\nvar makeCategoriesToPoints = function(categories) {\r\n    var categoriesToPoints = {};\r\n    categories.forEach(function(item, i) {\r\n        categoriesToPoints[item.valueOf()] = i\r\n    });\r\n    return categoriesToPoints\r\n};\r\nvar validateBusinessRange = function(businessRange) {\r\n    if (!(businessRange instanceof Range)) {\r\n        businessRange = new Range(businessRange)\r\n    }\r\n\r\n    function validate(valueSelector, baseValueSelector) {\r\n        if (!isDefined(businessRange[valueSelector]) && isDefined(businessRange[baseValueSelector])) {\r\n            businessRange[valueSelector] = businessRange[baseValueSelector]\r\n        }\r\n    }\r\n    validate(\"minVisible\", \"min\");\r\n    validate(\"maxVisible\", \"max\");\r\n    return businessRange\r\n};\r\n\r\nfunction prepareBreaks(breaks, range) {\r\n    var transform = \"logarithmic\" === range.axisType ? function(value) {\r\n        return getLog(value, range.base)\r\n    } : function(value) {\r\n        return value\r\n    };\r\n    var array = [];\r\n    var br;\r\n    var transformFrom;\r\n    var transformTo;\r\n    var i;\r\n    var length = breaks.length;\r\n    var sum = 0;\r\n    for (i = 0; i < length; i++) {\r\n        br = breaks[i];\r\n        transformFrom = transform(br.from);\r\n        transformTo = transform(br.to);\r\n        sum += transformTo - transformFrom;\r\n        array.push({\r\n            trFrom: transformFrom,\r\n            trTo: transformTo,\r\n            from: br.from,\r\n            to: br.to,\r\n            length: sum,\r\n            cumulativeWidth: br.cumulativeWidth\r\n        })\r\n    }\r\n    return array\r\n}\r\n\r\nfunction getCanvasBounds(range) {\r\n    var min = range.min;\r\n    var max = range.max;\r\n    var minVisible = range.minVisible;\r\n    var maxVisible = range.maxVisible;\r\n    var isLogarithmic = \"logarithmic\" === range.axisType;\r\n    if (isLogarithmic) {\r\n        maxVisible = getLog(maxVisible, range.base, range.allowNegatives, range.linearThreshold);\r\n        minVisible = getLog(minVisible, range.base, range.allowNegatives, range.linearThreshold);\r\n        min = getLog(min, range.base, range.allowNegatives, range.linearThreshold);\r\n        max = getLog(max, range.base, range.allowNegatives, range.linearThreshold)\r\n    }\r\n    return {\r\n        base: range.base,\r\n        rangeMin: min,\r\n        rangeMax: max,\r\n        rangeMinVisible: minVisible,\r\n        rangeMaxVisible: maxVisible\r\n    }\r\n}\r\n\r\nfunction getCheckingMethodsAboutBreaks(inverted) {\r\n    return {\r\n        isStartSide: !inverted ? function(pos, breaks, start, end) {\r\n            return pos < breaks[0][start]\r\n        } : function(pos, breaks, start, end) {\r\n            return pos <= breaks[breaks.length - 1][end]\r\n        },\r\n        isEndSide: !inverted ? function(pos, breaks, start, end) {\r\n            return pos >= breaks[breaks.length - 1][end]\r\n        } : function(pos, breaks, start, end) {\r\n            return pos > breaks[0][start]\r\n        },\r\n        isInBreak: !inverted ? function(pos, br, start, end) {\r\n            return pos >= br[start] && pos < br[end]\r\n        } : function(pos, br, start, end) {\r\n            return pos > br[end] && pos <= br[start]\r\n        },\r\n        isBetweenBreaks: !inverted ? function(pos, br, prevBreak, start, end) {\r\n            return pos < br[start] && pos >= prevBreak[end]\r\n        } : function(pos, br, prevBreak, start, end) {\r\n            return pos >= br[end] && pos < prevBreak[start]\r\n        },\r\n        getLength: !inverted ? function(br) {\r\n            return br.length\r\n        } : function(br, lastBreak) {\r\n            return lastBreak.length - br.length\r\n        },\r\n        getBreaksSize: !inverted ? function(br) {\r\n            return br.cumulativeWidth\r\n        } : function(br, lastBreak) {\r\n            return lastBreak.cumulativeWidth - br.cumulativeWidth\r\n        }\r\n    }\r\n}\r\nexports.Translator2D = _Translator2d = function(businessRange, canvas, options) {\r\n    this.update(businessRange, canvas, options)\r\n};\r\n_Translator2d.prototype = {\r\n    constructor: _Translator2d,\r\n    reinit: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var range = that._businessRange;\r\n        var categories = range.categories || [];\r\n        var script = {};\r\n        var canvasOptions = that._prepareCanvasOptions();\r\n        var visibleCategories = vizUtils.getCategoriesInfo(categories, range.minVisible, range.maxVisible).categories;\r\n        var categoriesLength = visibleCategories.length;\r\n        if (range.isEmpty()) {\r\n            script = dummyTranslator\r\n        } else {\r\n            switch (range.axisType) {\r\n                case \"logarithmic\":\r\n                    script = logarithmicTranslator;\r\n                    break;\r\n                case \"semidiscrete\":\r\n                    script = intervalTranslator;\r\n                    canvasOptions.ratioOfCanvasRange = canvasOptions.canvasLength / (addInterval(canvasOptions.rangeMaxVisible, options.interval) - canvasOptions.rangeMinVisible);\r\n                    break;\r\n                case \"discrete\":\r\n                    script = categoryTranslator;\r\n                    that._categories = categories;\r\n                    canvasOptions.interval = that._getDiscreteInterval(options.addSpiderCategory ? categoriesLength + 1 : categoriesLength, canvasOptions);\r\n                    that._categoriesToPoints = makeCategoriesToPoints(categories, canvasOptions.invert);\r\n                    if (categoriesLength) {\r\n                        canvasOptions.startPointIndex = that._categoriesToPoints[visibleCategories[0].valueOf()];\r\n                        that.visibleCategories = visibleCategories\r\n                    }\r\n                    break;\r\n                default:\r\n                    if (\"datetime\" === range.dataType) {\r\n                        script = datetimeTranslator\r\n                    }\r\n            }\r\n        }(that._oldMethods || []).forEach(function(methodName) {\r\n            delete that[methodName]\r\n        });\r\n        that._oldMethods = Object.keys(script);\r\n        extend(that, script);\r\n        that._conversionValue = options.conversionValue ? function(value) {\r\n            return value\r\n        } : function(value) {\r\n            return Math.round(value)\r\n        };\r\n        that.sc = {};\r\n        that._checkingMethodsAboutBreaks = [getCheckingMethodsAboutBreaks(false), getCheckingMethodsAboutBreaks(that.isInverted())];\r\n        that._translateBreaks();\r\n        that._calculateSpecialValues()\r\n    },\r\n    _translateBreaks: function() {\r\n        var breaks = this._breaks;\r\n        var size = this._options.breaksSize;\r\n        var i;\r\n        var b;\r\n        var end;\r\n        var length;\r\n        if (void 0 === breaks) {\r\n            return\r\n        }\r\n        for (i = 0, length = breaks.length; i < length; i++) {\r\n            b = breaks[i];\r\n            end = this.translate(b.to);\r\n            b.end = end;\r\n            b.start = !b.gapSize ? !this.isInverted() ? end - size : end + size : end\r\n        }\r\n    },\r\n    _checkValueAboutBreaks: function(breaks, pos, start, end, methods) {\r\n        var i;\r\n        var length;\r\n        var prop = {\r\n            length: 0,\r\n            breaksSize: void 0,\r\n            inBreak: false\r\n        };\r\n        var br;\r\n        var prevBreak;\r\n        var lastBreak = breaks[breaks.length - 1];\r\n        if (methods.isStartSide(pos, breaks, start, end)) {\r\n            return prop\r\n        } else {\r\n            if (methods.isEndSide(pos, breaks, start, end)) {\r\n                return {\r\n                    length: lastBreak.length,\r\n                    breaksSize: lastBreak.cumulativeWidth,\r\n                    inBreak: false\r\n                }\r\n            }\r\n        }\r\n        for (i = 0, length = breaks.length; i < length; i++) {\r\n            br = breaks[i];\r\n            prevBreak = breaks[i - 1];\r\n            if (methods.isInBreak(pos, br, start, end)) {\r\n                prop.inBreak = true;\r\n                prop.break = br;\r\n                break\r\n            }\r\n            if (prevBreak && methods.isBetweenBreaks(pos, br, prevBreak, start, end)) {\r\n                prop = {\r\n                    length: methods.getLength(prevBreak, lastBreak),\r\n                    breaksSize: methods.getBreaksSize(prevBreak, lastBreak),\r\n                    inBreak: false\r\n                };\r\n                break\r\n            }\r\n        }\r\n        return prop\r\n    },\r\n    isInverted: function() {\r\n        return !(this._options.isHorizontal ^ this._businessRange.invert)\r\n    },\r\n    _getDiscreteInterval: function(categoriesLength, canvasOptions) {\r\n        var correctedCategoriesCount = categoriesLength - (this._options.stick ? 1 : 0);\r\n        return correctedCategoriesCount > 0 ? canvasOptions.canvasLength / correctedCategoriesCount : canvasOptions.canvasLength\r\n    },\r\n    _prepareCanvasOptions: function() {\r\n        var that = this;\r\n        var businessRange = that._businessRange;\r\n        var canvasOptions = that._canvasOptions = getCanvasBounds(businessRange);\r\n        var canvas = that._canvas;\r\n        var breaks = that._breaks;\r\n        var length;\r\n        canvasOptions.startPadding = canvas.startPadding || 0;\r\n        canvasOptions.endPadding = canvas.endPadding || 0;\r\n        if (that._options.isHorizontal) {\r\n            canvasOptions.startPoint = canvas.left + canvasOptions.startPadding;\r\n            length = canvas.width;\r\n            canvasOptions.endPoint = canvas.width - canvas.right - canvasOptions.endPadding;\r\n            canvasOptions.invert = businessRange.invert\r\n        } else {\r\n            canvasOptions.startPoint = canvas.top + canvasOptions.startPadding;\r\n            length = canvas.height;\r\n            canvasOptions.endPoint = canvas.height - canvas.bottom - canvasOptions.endPadding;\r\n            canvasOptions.invert = !businessRange.invert\r\n        }\r\n        that.canvasLength = canvasOptions.canvasLength = canvasOptions.endPoint - canvasOptions.startPoint;\r\n        canvasOptions.rangeDoubleError = Math.pow(10, getPower(canvasOptions.rangeMax - canvasOptions.rangeMin) - getPower(length) - 2);\r\n        canvasOptions.ratioOfCanvasRange = canvasOptions.canvasLength / (canvasOptions.rangeMaxVisible - canvasOptions.rangeMinVisible);\r\n        if (void 0 !== breaks) {\r\n            canvasOptions.ratioOfCanvasRange = (canvasOptions.canvasLength - breaks[breaks.length - 1].cumulativeWidth) / (canvasOptions.rangeMaxVisible - canvasOptions.rangeMinVisible - breaks[breaks.length - 1].length)\r\n        }\r\n        return canvasOptions\r\n    },\r\n    updateCanvas: function(canvas) {\r\n        this._canvas = validateCanvas(canvas);\r\n        this.reinit()\r\n    },\r\n    updateBusinessRange: function(businessRange) {\r\n        var that = this;\r\n        var breaks = businessRange.breaks || [];\r\n        that._businessRange = validateBusinessRange(businessRange);\r\n        that._breaks = breaks.length ? prepareBreaks(breaks, that._businessRange) : void 0;\r\n        that.reinit()\r\n    },\r\n    update: function(businessRange, canvas, options) {\r\n        var that = this;\r\n        that._options = extend(that._options || {}, options);\r\n        that._canvas = validateCanvas(canvas);\r\n        that.updateBusinessRange(businessRange)\r\n    },\r\n    getBusinessRange: function() {\r\n        return this._businessRange\r\n    },\r\n    getEventScale: function(zoomEvent) {\r\n        return zoomEvent.deltaScale || 1\r\n    },\r\n    getCanvasVisibleArea: function() {\r\n        return {\r\n            min: this._canvasOptions.startPoint,\r\n            max: this._canvasOptions.endPoint\r\n        }\r\n    },\r\n    _calculateSpecialValues: function() {\r\n        var that = this;\r\n        var canvasOptions = that._canvasOptions;\r\n        var startPoint = canvasOptions.startPoint - canvasOptions.startPadding;\r\n        var endPoint = canvasOptions.endPoint + canvasOptions.endPadding;\r\n        var range = that._businessRange;\r\n        var minVisible = range.minVisible;\r\n        var maxVisible = range.maxVisible;\r\n        var canvas_position_center_middle = startPoint + canvasOptions.canvasLength / 2;\r\n        var canvas_position_default;\r\n        if (minVisible < 0 && maxVisible > 0 && minVisible !== maxVisible) {\r\n            canvas_position_default = that.translate(0, 1)\r\n        }\r\n        if (!isDefined(canvas_position_default)) {\r\n            var invert = range.invert ^ (minVisible < 0 && maxVisible <= 0);\r\n            if (that._options.isHorizontal) {\r\n                canvas_position_default = invert ? endPoint : startPoint\r\n            } else {\r\n                canvas_position_default = invert ? startPoint : endPoint\r\n            }\r\n        }\r\n        that.sc = {\r\n            canvas_position_default: canvas_position_default,\r\n            canvas_position_left: startPoint,\r\n            canvas_position_top: startPoint,\r\n            canvas_position_center: canvas_position_center_middle,\r\n            canvas_position_middle: canvas_position_center_middle,\r\n            canvas_position_right: endPoint,\r\n            canvas_position_bottom: endPoint,\r\n            canvas_position_start: canvasOptions.invert ? endPoint : startPoint,\r\n            canvas_position_end: canvasOptions.invert ? startPoint : endPoint\r\n        }\r\n    },\r\n    translateSpecialCase: function(value) {\r\n        return this.sc[value]\r\n    },\r\n    _calculateProjection: function(distance) {\r\n        var canvasOptions = this._canvasOptions;\r\n        return canvasOptions.invert ? canvasOptions.endPoint - distance : canvasOptions.startPoint + distance\r\n    },\r\n    _calculateUnProjection: function(distance) {\r\n        var canvasOptions = this._canvasOptions;\r\n        return canvasOptions.invert ? canvasOptions.rangeMaxVisible.valueOf() - distance : canvasOptions.rangeMinVisible.valueOf() + distance\r\n    },\r\n    getMinBarSize: function(minBarSize) {\r\n        var visibleArea = this.getCanvasVisibleArea();\r\n        var minValue = this.from(visibleArea.min + minBarSize);\r\n        return _abs(this.from(visibleArea.min) - (!isDefined(minValue) ? this.from(visibleArea.max) : minValue))\r\n    },\r\n    checkMinBarSize: function(value, minShownValue, stackValue) {\r\n        return _abs(value) < minShownValue ? value >= 0 ? minShownValue : -minShownValue : value\r\n    },\r\n    translate: function(bp, direction) {\r\n        var specialValue = this.translateSpecialCase(bp);\r\n        if (isDefined(specialValue)) {\r\n            return Math.round(specialValue)\r\n        }\r\n        if (isNaN(bp)) {\r\n            return null\r\n        }\r\n        return this.to(bp, direction)\r\n    },\r\n    getInterval: function(interval) {\r\n        var canvasOptions = this._canvasOptions;\r\n        interval = isDefined(interval) ? interval : this._businessRange.interval;\r\n        if (interval) {\r\n            return Math.round(canvasOptions.ratioOfCanvasRange * interval)\r\n        }\r\n        return Math.round(canvasOptions.endPoint - canvasOptions.startPoint)\r\n    },\r\n    zoom: function(translate, scale, wholeRange) {\r\n        var canvasOptions = this._canvasOptions;\r\n        if (canvasOptions.rangeMinVisible.valueOf() === canvasOptions.rangeMaxVisible.valueOf() && 0 !== translate) {\r\n            return this.zoomZeroLengthRange(translate, scale)\r\n        }\r\n        var startPoint = canvasOptions.startPoint;\r\n        var endPoint = canvasOptions.endPoint;\r\n        var isInverted = this.isInverted();\r\n        var newStart = (startPoint + translate) / scale;\r\n        var newEnd = (endPoint + translate) / scale;\r\n        wholeRange = wholeRange || {};\r\n        var minPoint = this.to(isInverted ? wholeRange.endValue : wholeRange.startValue);\r\n        var maxPoint = this.to(isInverted ? wholeRange.startValue : wholeRange.endValue);\r\n        var min;\r\n        var max;\r\n        if (minPoint > newStart) {\r\n            newEnd -= newStart - minPoint;\r\n            newStart = minPoint;\r\n            min = isInverted ? wholeRange.endValue : wholeRange.startValue\r\n        }\r\n        if (maxPoint < newEnd) {\r\n            newStart -= newEnd - maxPoint;\r\n            newEnd = maxPoint;\r\n            max = isInverted ? wholeRange.startValue : wholeRange.endValue\r\n        }\r\n        if (maxPoint - minPoint < newEnd - newStart) {\r\n            newStart = minPoint;\r\n            newEnd = maxPoint\r\n        }\r\n        translate = (endPoint - startPoint) * newStart / (newEnd - newStart) - startPoint;\r\n        scale = (startPoint + translate) / newStart || 1;\r\n        min = isDefined(min) ? min : adjust(this.from(newStart, 1));\r\n        max = isDefined(max) ? max : adjust(this.from(newEnd, -1));\r\n        if (min > max) {\r\n            min = min > wholeRange.endValue ? wholeRange.endValue : min;\r\n            max = max < wholeRange.startValue ? wholeRange.startValue : max\r\n        } else {\r\n            min = min < wholeRange.startValue ? wholeRange.startValue : min;\r\n            max = max > wholeRange.endValue ? wholeRange.endValue : max\r\n        }\r\n        return {\r\n            min: min,\r\n            max: max,\r\n            translate: adjust(translate),\r\n            scale: adjust(scale)\r\n        }\r\n    },\r\n    zoomZeroLengthRange: function(translate, scale) {\r\n        var canvasOptions = this._canvasOptions;\r\n        var min = canvasOptions.rangeMin;\r\n        var max = canvasOptions.rangeMax;\r\n        var correction = (max.valueOf() !== min.valueOf() ? max.valueOf() - min.valueOf() : _abs(canvasOptions.rangeMinVisible.valueOf() - min.valueOf())) / canvasOptions.canvasLength;\r\n        var isDateTime = typeUtils.isDate(max) || typeUtils.isDate(min);\r\n        var isLogarithmic = \"logarithmic\" === this._businessRange.axisType;\r\n        var newMin = canvasOptions.rangeMinVisible.valueOf() - correction;\r\n        var newMax = canvasOptions.rangeMaxVisible.valueOf() + correction;\r\n        newMin = isLogarithmic ? adjust(raiseToExt(newMin, canvasOptions.base)) : isDateTime ? new Date(newMin) : newMin;\r\n        newMax = isLogarithmic ? adjust(raiseToExt(newMax, canvasOptions.base)) : isDateTime ? new Date(newMax) : newMax;\r\n        return {\r\n            min: newMin,\r\n            max: newMax,\r\n            translate: translate,\r\n            scale: scale\r\n        }\r\n    },\r\n    getMinScale: function(zoom) {\r\n        return zoom ? 1.1 : .9\r\n    },\r\n    getScale: function(val1, val2) {\r\n        var canvasOptions = this._canvasOptions;\r\n        if (canvasOptions.rangeMax === canvasOptions.rangeMin) {\r\n            return 1\r\n        }\r\n        val1 = isDefined(val1) ? this._fromValue(val1) : canvasOptions.rangeMin;\r\n        val2 = isDefined(val2) ? this._fromValue(val2) : canvasOptions.rangeMax;\r\n        return (canvasOptions.rangeMax - canvasOptions.rangeMin) / Math.abs(val1 - val2)\r\n    },\r\n    isValid: function(value) {\r\n        var co = this._canvasOptions;\r\n        value = this._fromValue(value);\r\n        return null !== value && !isNaN(value) && value.valueOf() + co.rangeDoubleError >= co.rangeMin && value.valueOf() - co.rangeDoubleError <= co.rangeMax\r\n    },\r\n    getCorrectValue: function(value, direction) {\r\n        var that = this;\r\n        var breaks = that._breaks;\r\n        var prop;\r\n        value = that._fromValue(value);\r\n        if (that._breaks) {\r\n            prop = that._checkValueAboutBreaks(breaks, value, \"trFrom\", \"trTo\", that._checkingMethodsAboutBreaks[0]);\r\n            if (true === prop.inBreak) {\r\n                return that._toValue(direction > 0 ? prop.break.trTo : prop.break.trFrom)\r\n            }\r\n        }\r\n        return that._toValue(value)\r\n    },\r\n    to: function(bp, direction) {\r\n        var range = this.getBusinessRange();\r\n        if (isDefined(range.maxVisible) && isDefined(range.minVisible) && range.maxVisible.valueOf() === range.minVisible.valueOf()) {\r\n            if (!isDefined(bp) || range.maxVisible.valueOf() !== bp.valueOf()) {\r\n                return null\r\n            }\r\n            return this.translateSpecialCase(0 === bp && this._options.shiftZeroValue ? \"canvas_position_default\" : \"canvas_position_middle\")\r\n        }\r\n        bp = this._fromValue(bp);\r\n        var that = this;\r\n        var canvasOptions = that._canvasOptions;\r\n        var breaks = that._breaks;\r\n        var prop = {\r\n            length: 0\r\n        };\r\n        var commonBreakSize = 0;\r\n        if (void 0 !== breaks) {\r\n            prop = that._checkValueAboutBreaks(breaks, bp, \"trFrom\", \"trTo\", that._checkingMethodsAboutBreaks[0]);\r\n            commonBreakSize = isDefined(prop.breaksSize) ? prop.breaksSize : 0\r\n        }\r\n        if (true === prop.inBreak) {\r\n            if (direction > 0) {\r\n                return prop.break.start\r\n            } else {\r\n                if (direction < 0) {\r\n                    return prop.break.end\r\n                } else {\r\n                    return null\r\n                }\r\n            }\r\n        }\r\n        return that._conversionValue(that._calculateProjection((bp - canvasOptions.rangeMinVisible - prop.length) * canvasOptions.ratioOfCanvasRange + commonBreakSize))\r\n    },\r\n    from: function(pos, direction) {\r\n        var that = this;\r\n        var breaks = that._breaks;\r\n        var prop = {\r\n            length: 0\r\n        };\r\n        var canvasOptions = that._canvasOptions;\r\n        var startPoint = canvasOptions.startPoint;\r\n        var commonBreakSize = 0;\r\n        if (void 0 !== breaks) {\r\n            prop = that._checkValueAboutBreaks(breaks, pos, \"start\", \"end\", that._checkingMethodsAboutBreaks[1]);\r\n            commonBreakSize = isDefined(prop.breaksSize) ? prop.breaksSize : 0\r\n        }\r\n        if (true === prop.inBreak) {\r\n            if (direction > 0) {\r\n                return that._toValue(prop.break.trTo)\r\n            } else {\r\n                if (direction < 0) {\r\n                    return that._toValue(prop.break.trFrom)\r\n                } else {\r\n                    return null\r\n                }\r\n            }\r\n        }\r\n        return that._toValue(that._calculateUnProjection((pos - startPoint - commonBreakSize) / canvasOptions.ratioOfCanvasRange + prop.length))\r\n    },\r\n    isValueProlonged: false,\r\n    getRange: function() {\r\n        return [this._toValue(this._canvasOptions.rangeMin), this._toValue(this._canvasOptions.rangeMax)]\r\n    },\r\n    getScreenRange: function() {\r\n        return [this._canvasOptions.startPoint, this._canvasOptions.endPoint]\r\n    },\r\n    add: function(value, diff, dir) {\r\n        return this._add(value, diff, (this._businessRange.invert ? -1 : 1) * dir)\r\n    },\r\n    _add: function(value, diff, coeff) {\r\n        return this._toValue(this._fromValue(value) + diff * coeff)\r\n    },\r\n    _fromValue: function(value) {\r\n        return null !== value ? Number(value) : null\r\n    },\r\n    _toValue: function(value) {\r\n        return null !== value ? Number(value) : null\r\n    },\r\n    ratioOfCanvasRange: function() {\r\n        return this._canvasOptions.ratioOfCanvasRange\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}