{"ast":null,"code":"/**\r\n * DevExtreme (ui/list/ui.list.edit.decorator.switchable.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar EditDecorator = require(\"./ui.list.edit.decorator\");\n\nvar abstract = EditDecorator.abstract;\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar pointerEvents = require(\"../../events/pointer\");\n\nvar feedbackEvents = require(\"../../events/core/emitter.feedback\");\n\nvar LIST_EDIT_DECORATOR = \"dxListEditDecorator\";\nvar POINTER_DOWN_EVENT_NAME = eventUtils.addNamespace(pointerEvents.down, LIST_EDIT_DECORATOR);\nvar ACTIVE_EVENT_NAME = eventUtils.addNamespace(feedbackEvents.active, LIST_EDIT_DECORATOR);\nvar LIST_ITEM_CONTENT_CLASS = \"dx-list-item-content\";\nvar SWITCHABLE_DELETE_READY_CLASS = \"dx-list-switchable-delete-ready\";\nvar SWITCHABLE_MENU_SHIELD_POSITIONING_CLASS = \"dx-list-switchable-menu-shield-positioning\";\nvar SWITCHABLE_DELETE_TOP_SHIELD_CLASS = \"dx-list-switchable-delete-top-shield\";\nvar SWITCHABLE_DELETE_BOTTOM_SHIELD_CLASS = \"dx-list-switchable-delete-bottom-shield\";\nvar SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS = \"dx-list-switchable-menu-item-shield-positioning\";\nvar SWITCHABLE_DELETE_ITEM_CONTENT_SHIELD_CLASS = \"dx-list-switchable-delete-item-content-shield\";\nvar SWITCHABLE_DELETE_BUTTON_CONTAINER_CLASS = \"dx-list-switchable-delete-button-container\";\nvar SwitchableEditDecorator = EditDecorator.inherit({\n  _init: function _init() {\n    this._$topShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_TOP_SHIELD_CLASS);\n    this._$bottomShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_BOTTOM_SHIELD_CLASS);\n    this._$itemContentShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_ITEM_CONTENT_SHIELD_CLASS);\n    eventsEngine.on(this._$topShield, POINTER_DOWN_EVENT_NAME, this._cancelDeleteReadyItem.bind(this));\n    eventsEngine.on(this._$bottomShield, POINTER_DOWN_EVENT_NAME, this._cancelDeleteReadyItem.bind(this));\n\n    this._list.$element().append(this._$topShield.toggle(false)).append(this._$bottomShield.toggle(false));\n  },\n  handleClick: function handleClick() {\n    return this._cancelDeleteReadyItem();\n  },\n  _cancelDeleteReadyItem: function _cancelDeleteReadyItem() {\n    if (!this._$readyToDeleteItem) {\n      return false;\n    }\n\n    this._cancelDelete(this._$readyToDeleteItem);\n\n    return true;\n  },\n  _cancelDelete: function _cancelDelete($itemElement) {\n    this._toggleDeleteReady($itemElement, false);\n  },\n  _toggleDeleteReady: function _toggleDeleteReady($itemElement, readyToDelete) {\n    if (void 0 === readyToDelete) {\n      readyToDelete = !this._isReadyToDelete($itemElement);\n    }\n\n    this._toggleShields($itemElement, readyToDelete);\n\n    this._toggleScrolling(readyToDelete);\n\n    this._cacheReadyToDeleteItem($itemElement, readyToDelete);\n\n    this._animateToggleDelete($itemElement, readyToDelete);\n  },\n  _isReadyToDelete: function _isReadyToDelete($itemElement) {\n    return $itemElement.hasClass(SWITCHABLE_DELETE_READY_CLASS);\n  },\n  _toggleShields: function _toggleShields($itemElement, enabled) {\n    this._list.$element().toggleClass(SWITCHABLE_MENU_SHIELD_POSITIONING_CLASS, enabled);\n\n    this._$topShield.toggle(enabled);\n\n    this._$bottomShield.toggle(enabled);\n\n    if (enabled) {\n      this._updateShieldsHeight($itemElement);\n    }\n\n    this._toggleContentShield($itemElement, enabled);\n  },\n  _updateShieldsHeight: function _updateShieldsHeight($itemElement) {\n    var $list = this._list.$element();\n\n    var listTopOffset = $list.offset().top;\n    var listHeight = $list.outerHeight();\n    var itemTopOffset = $itemElement.offset().top;\n    var itemHeight = $itemElement.outerHeight();\n    var dirtyTopShieldHeight = itemTopOffset - listTopOffset;\n    var dirtyBottomShieldHeight = listHeight - itemHeight - dirtyTopShieldHeight;\n\n    this._$topShield.height(Math.max(dirtyTopShieldHeight, 0));\n\n    this._$bottomShield.height(Math.max(dirtyBottomShieldHeight, 0));\n  },\n  _toggleContentShield: function _toggleContentShield($itemElement, enabled) {\n    if (enabled) {\n      $itemElement.find(\".\" + LIST_ITEM_CONTENT_CLASS).first().append(this._$itemContentShield);\n    } else {\n      this._$itemContentShield.detach();\n    }\n  },\n  _toggleScrolling: function _toggleScrolling(readyToDelete) {\n    var scrollView = this._list.$element().dxScrollView(\"instance\");\n\n    if (readyToDelete) {\n      scrollView.on(\"start\", this._cancelScrolling);\n    } else {\n      scrollView.off(\"start\", this._cancelScrolling);\n    }\n  },\n  _cancelScrolling: function _cancelScrolling(args) {\n    args.event.cancel = true;\n  },\n  _cacheReadyToDeleteItem: function _cacheReadyToDeleteItem($itemElement, cache) {\n    if (cache) {\n      this._$readyToDeleteItem = $itemElement;\n    } else {\n      delete this._$readyToDeleteItem;\n    }\n  },\n  _animateToggleDelete: function _animateToggleDelete($itemElement, readyToDelete) {\n    if (readyToDelete) {\n      this._enablePositioning($itemElement);\n\n      this._prepareDeleteReady($itemElement);\n\n      this._animatePrepareDeleteReady($itemElement);\n\n      eventsEngine.off($itemElement, pointerEvents.up);\n    } else {\n      this._forgetDeleteReady($itemElement);\n\n      this._animateForgetDeleteReady($itemElement).done(this._disablePositioning.bind(this, $itemElement));\n    }\n  },\n  _enablePositioning: function _enablePositioning($itemElement) {\n    $itemElement.addClass(SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS);\n    eventsEngine.on($itemElement, ACTIVE_EVENT_NAME, noop);\n    eventsEngine.one($itemElement, pointerEvents.up, this._disablePositioning.bind(this, $itemElement));\n  },\n  _disablePositioning: function _disablePositioning($itemElement) {\n    $itemElement.removeClass(SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS);\n    eventsEngine.off($itemElement, ACTIVE_EVENT_NAME);\n  },\n  _prepareDeleteReady: function _prepareDeleteReady($itemElement) {\n    $itemElement.addClass(SWITCHABLE_DELETE_READY_CLASS);\n  },\n  _forgetDeleteReady: function _forgetDeleteReady($itemElement) {\n    $itemElement.removeClass(SWITCHABLE_DELETE_READY_CLASS);\n  },\n  _animatePrepareDeleteReady: abstract,\n  _animateForgetDeleteReady: abstract,\n  _getDeleteButtonContainer: function _getDeleteButtonContainer($itemElement) {\n    $itemElement = $itemElement || this._$readyToDeleteItem;\n    return $itemElement.children(\".\" + SWITCHABLE_DELETE_BUTTON_CONTAINER_CLASS);\n  },\n  _deleteItem: function _deleteItem($itemElement) {\n    $itemElement = $itemElement || this._$readyToDeleteItem;\n\n    this._getDeleteButtonContainer($itemElement).detach();\n\n    if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\n      return;\n    }\n\n    this._list.deleteItem($itemElement).always(this._cancelDelete.bind(this, $itemElement));\n  },\n  _isRtlEnabled: function _isRtlEnabled() {\n    return this._list.option(\"rtlEnabled\");\n  },\n  dispose: function dispose() {\n    if (this._$topShield) {\n      this._$topShield.remove();\n    }\n\n    if (this._$bottomShield) {\n      this._$bottomShield.remove();\n    }\n\n    this.callBase.apply(this, arguments);\n  }\n});\nmodule.exports = SwitchableEditDecorator;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/list/ui.list.edit.decorator.switchable.js"],"names":["$","require","eventsEngine","noop","EditDecorator","abstract","eventUtils","pointerEvents","feedbackEvents","LIST_EDIT_DECORATOR","POINTER_DOWN_EVENT_NAME","ACTIVE_EVENT_NAME","LIST_ITEM_CONTENT_CLASS","SWITCHABLE_DELETE_READY_CLASS","SWITCHABLE_MENU_SHIELD_POSITIONING_CLASS","SWITCHABLE_DELETE_TOP_SHIELD_CLASS","SWITCHABLE_DELETE_BOTTOM_SHIELD_CLASS","SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS","SWITCHABLE_DELETE_ITEM_CONTENT_SHIELD_CLASS","SWITCHABLE_DELETE_BUTTON_CONTAINER_CLASS","SwitchableEditDecorator","_init","handleClick","_cancelDeleteReadyItem","_cancelDelete","_toggleDeleteReady","readyToDelete","_isReadyToDelete","$itemElement","_toggleShields","_updateShieldsHeight","$list","listTopOffset","listHeight","itemTopOffset","itemHeight","dirtyTopShieldHeight","dirtyBottomShieldHeight","Math","_toggleContentShield","_toggleScrolling","scrollView","_cancelScrolling","args","_cacheReadyToDeleteItem","_animateToggleDelete","_enablePositioning","_disablePositioning","_prepareDeleteReady","_forgetDeleteReady","_animatePrepareDeleteReady","_animateForgetDeleteReady","_getDeleteButtonContainer","_deleteItem","_isRtlEnabled","dispose","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/list/ui.list.edit.decorator.switchable.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar EditDecorator = require(\"./ui.list.edit.decorator\");\r\nvar abstract = EditDecorator.abstract;\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar pointerEvents = require(\"../../events/pointer\");\r\nvar feedbackEvents = require(\"../../events/core/emitter.feedback\");\r\nvar LIST_EDIT_DECORATOR = \"dxListEditDecorator\";\r\nvar POINTER_DOWN_EVENT_NAME = eventUtils.addNamespace(pointerEvents.down, LIST_EDIT_DECORATOR);\r\nvar ACTIVE_EVENT_NAME = eventUtils.addNamespace(feedbackEvents.active, LIST_EDIT_DECORATOR);\r\nvar LIST_ITEM_CONTENT_CLASS = \"dx-list-item-content\";\r\nvar SWITCHABLE_DELETE_READY_CLASS = \"dx-list-switchable-delete-ready\";\r\nvar SWITCHABLE_MENU_SHIELD_POSITIONING_CLASS = \"dx-list-switchable-menu-shield-positioning\";\r\nvar SWITCHABLE_DELETE_TOP_SHIELD_CLASS = \"dx-list-switchable-delete-top-shield\";\r\nvar SWITCHABLE_DELETE_BOTTOM_SHIELD_CLASS = \"dx-list-switchable-delete-bottom-shield\";\r\nvar SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS = \"dx-list-switchable-menu-item-shield-positioning\";\r\nvar SWITCHABLE_DELETE_ITEM_CONTENT_SHIELD_CLASS = \"dx-list-switchable-delete-item-content-shield\";\r\nvar SWITCHABLE_DELETE_BUTTON_CONTAINER_CLASS = \"dx-list-switchable-delete-button-container\";\r\nvar SwitchableEditDecorator = EditDecorator.inherit({\r\n    _init: function() {\r\n        this._$topShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_TOP_SHIELD_CLASS);\r\n        this._$bottomShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_BOTTOM_SHIELD_CLASS);\r\n        this._$itemContentShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_ITEM_CONTENT_SHIELD_CLASS);\r\n        eventsEngine.on(this._$topShield, POINTER_DOWN_EVENT_NAME, this._cancelDeleteReadyItem.bind(this));\r\n        eventsEngine.on(this._$bottomShield, POINTER_DOWN_EVENT_NAME, this._cancelDeleteReadyItem.bind(this));\r\n        this._list.$element().append(this._$topShield.toggle(false)).append(this._$bottomShield.toggle(false))\r\n    },\r\n    handleClick: function() {\r\n        return this._cancelDeleteReadyItem()\r\n    },\r\n    _cancelDeleteReadyItem: function() {\r\n        if (!this._$readyToDeleteItem) {\r\n            return false\r\n        }\r\n        this._cancelDelete(this._$readyToDeleteItem);\r\n        return true\r\n    },\r\n    _cancelDelete: function($itemElement) {\r\n        this._toggleDeleteReady($itemElement, false)\r\n    },\r\n    _toggleDeleteReady: function($itemElement, readyToDelete) {\r\n        if (void 0 === readyToDelete) {\r\n            readyToDelete = !this._isReadyToDelete($itemElement)\r\n        }\r\n        this._toggleShields($itemElement, readyToDelete);\r\n        this._toggleScrolling(readyToDelete);\r\n        this._cacheReadyToDeleteItem($itemElement, readyToDelete);\r\n        this._animateToggleDelete($itemElement, readyToDelete)\r\n    },\r\n    _isReadyToDelete: function($itemElement) {\r\n        return $itemElement.hasClass(SWITCHABLE_DELETE_READY_CLASS)\r\n    },\r\n    _toggleShields: function($itemElement, enabled) {\r\n        this._list.$element().toggleClass(SWITCHABLE_MENU_SHIELD_POSITIONING_CLASS, enabled);\r\n        this._$topShield.toggle(enabled);\r\n        this._$bottomShield.toggle(enabled);\r\n        if (enabled) {\r\n            this._updateShieldsHeight($itemElement)\r\n        }\r\n        this._toggleContentShield($itemElement, enabled)\r\n    },\r\n    _updateShieldsHeight: function($itemElement) {\r\n        var $list = this._list.$element();\r\n        var listTopOffset = $list.offset().top;\r\n        var listHeight = $list.outerHeight();\r\n        var itemTopOffset = $itemElement.offset().top;\r\n        var itemHeight = $itemElement.outerHeight();\r\n        var dirtyTopShieldHeight = itemTopOffset - listTopOffset;\r\n        var dirtyBottomShieldHeight = listHeight - itemHeight - dirtyTopShieldHeight;\r\n        this._$topShield.height(Math.max(dirtyTopShieldHeight, 0));\r\n        this._$bottomShield.height(Math.max(dirtyBottomShieldHeight, 0))\r\n    },\r\n    _toggleContentShield: function($itemElement, enabled) {\r\n        if (enabled) {\r\n            $itemElement.find(\".\" + LIST_ITEM_CONTENT_CLASS).first().append(this._$itemContentShield)\r\n        } else {\r\n            this._$itemContentShield.detach()\r\n        }\r\n    },\r\n    _toggleScrolling: function(readyToDelete) {\r\n        var scrollView = this._list.$element().dxScrollView(\"instance\");\r\n        if (readyToDelete) {\r\n            scrollView.on(\"start\", this._cancelScrolling)\r\n        } else {\r\n            scrollView.off(\"start\", this._cancelScrolling)\r\n        }\r\n    },\r\n    _cancelScrolling: function(args) {\r\n        args.event.cancel = true\r\n    },\r\n    _cacheReadyToDeleteItem: function($itemElement, cache) {\r\n        if (cache) {\r\n            this._$readyToDeleteItem = $itemElement\r\n        } else {\r\n            delete this._$readyToDeleteItem\r\n        }\r\n    },\r\n    _animateToggleDelete: function($itemElement, readyToDelete) {\r\n        if (readyToDelete) {\r\n            this._enablePositioning($itemElement);\r\n            this._prepareDeleteReady($itemElement);\r\n            this._animatePrepareDeleteReady($itemElement);\r\n            eventsEngine.off($itemElement, pointerEvents.up)\r\n        } else {\r\n            this._forgetDeleteReady($itemElement);\r\n            this._animateForgetDeleteReady($itemElement).done(this._disablePositioning.bind(this, $itemElement))\r\n        }\r\n    },\r\n    _enablePositioning: function($itemElement) {\r\n        $itemElement.addClass(SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS);\r\n        eventsEngine.on($itemElement, ACTIVE_EVENT_NAME, noop);\r\n        eventsEngine.one($itemElement, pointerEvents.up, this._disablePositioning.bind(this, $itemElement))\r\n    },\r\n    _disablePositioning: function($itemElement) {\r\n        $itemElement.removeClass(SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS);\r\n        eventsEngine.off($itemElement, ACTIVE_EVENT_NAME)\r\n    },\r\n    _prepareDeleteReady: function($itemElement) {\r\n        $itemElement.addClass(SWITCHABLE_DELETE_READY_CLASS)\r\n    },\r\n    _forgetDeleteReady: function($itemElement) {\r\n        $itemElement.removeClass(SWITCHABLE_DELETE_READY_CLASS)\r\n    },\r\n    _animatePrepareDeleteReady: abstract,\r\n    _animateForgetDeleteReady: abstract,\r\n    _getDeleteButtonContainer: function($itemElement) {\r\n        $itemElement = $itemElement || this._$readyToDeleteItem;\r\n        return $itemElement.children(\".\" + SWITCHABLE_DELETE_BUTTON_CONTAINER_CLASS)\r\n    },\r\n    _deleteItem: function($itemElement) {\r\n        $itemElement = $itemElement || this._$readyToDeleteItem;\r\n        this._getDeleteButtonContainer($itemElement).detach();\r\n        if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\r\n            return\r\n        }\r\n        this._list.deleteItem($itemElement).always(this._cancelDelete.bind(this, $itemElement))\r\n    },\r\n    _isRtlEnabled: function() {\r\n        return this._list.option(\"rtlEnabled\")\r\n    },\r\n    dispose: function() {\r\n        if (this._$topShield) {\r\n            this._$topShield.remove()\r\n        }\r\n        if (this._$bottomShield) {\r\n            this._$bottomShield.remove()\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    }\r\n});\r\nmodule.exports = SwitchableEditDecorator;\r\n"]},"metadata":{},"sourceType":"module"}