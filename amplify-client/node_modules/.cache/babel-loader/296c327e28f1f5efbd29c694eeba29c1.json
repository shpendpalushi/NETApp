{"ast":null,"code":"/**\r\n * DevExtreme (data/remote_query.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar queryAdapters = require(\"./query_adapters\");\n\nvar errorsModule = require(\"./errors\");\n\nvar each = require(\"../core/utils/iterator\").each;\n\nvar isFunction = require(\"../core/utils/type\").isFunction;\n\nvar Deferred = require(\"../core/utils/deferred\").Deferred;\n\nvar arrayQueryImpl = require(\"./array_query\");\n\nvar remoteQueryImpl = function remoteQueryImpl(url, queryOptions, tasks) {\n  tasks = tasks || [];\n  queryOptions = queryOptions || {};\n\n  var createTask = function createTask(name, args) {\n    return {\n      name: name,\n      args: args\n    };\n  };\n\n  var exec = function exec(executorTask) {\n    var d = new Deferred();\n\n    var _adapterFactory;\n\n    var _adapter;\n\n    var _taskQueue;\n\n    var _currentTask;\n\n    var _mergedSortArgs;\n\n    var rejectWithNotify = function rejectWithNotify(error) {\n      var handler = queryOptions.errorHandler;\n\n      if (handler) {\n        handler(error);\n      }\n\n      errorsModule._errorHandler(error);\n\n      d.reject(error);\n    };\n\n    function mergeSortTask(task) {\n      switch (task.name) {\n        case \"sortBy\":\n          _mergedSortArgs = [task.args];\n          return true;\n\n        case \"thenBy\":\n          if (!_mergedSortArgs) {\n            throw errorsModule.errors.Error(\"E4004\");\n          }\n\n          _mergedSortArgs.push(task.args);\n\n          return true;\n      }\n\n      return false;\n    }\n\n    function unmergeSortTasks() {\n      var head = _taskQueue[0];\n      var unmergedTasks = [];\n\n      if (head && \"multiSort\" === head.name) {\n        _taskQueue.shift();\n\n        each(head.args[0], function () {\n          unmergedTasks.push(createTask(unmergedTasks.length ? \"thenBy\" : \"sortBy\", this));\n        });\n      }\n\n      _taskQueue = unmergedTasks.concat(_taskQueue);\n    }\n\n    try {\n      _adapterFactory = queryOptions.adapter;\n\n      if (!isFunction(_adapterFactory)) {\n        _adapterFactory = queryAdapters[_adapterFactory];\n      }\n\n      _adapter = _adapterFactory(queryOptions);\n      _taskQueue = [].concat(tasks).concat(executorTask);\n      var optimize = _adapter.optimize;\n\n      if (optimize) {\n        optimize(_taskQueue);\n      }\n\n      while (_taskQueue.length) {\n        _currentTask = _taskQueue[0];\n\n        if (!mergeSortTask(_currentTask)) {\n          if (_mergedSortArgs) {\n            _taskQueue.unshift(createTask(\"multiSort\", [_mergedSortArgs]));\n\n            _mergedSortArgs = null;\n            continue;\n          }\n\n          if (\"enumerate\" !== String(_currentTask.name)) {\n            if (!_adapter[_currentTask.name] || false === _adapter[_currentTask.name].apply(_adapter, _currentTask.args)) {\n              break;\n            }\n          }\n        }\n\n        _taskQueue.shift();\n      }\n\n      unmergeSortTasks();\n\n      _adapter.exec(url).done(function (result, extra) {\n        if (!_taskQueue.length) {\n          d.resolve(result, extra);\n        } else {\n          var clientChain = arrayQueryImpl(result, {\n            errorHandler: queryOptions.errorHandler\n          });\n          each(_taskQueue, function () {\n            clientChain = clientChain[this.name].apply(clientChain, this.args);\n          });\n          clientChain.done(d.resolve).fail(d.reject);\n        }\n      }).fail(rejectWithNotify);\n    } catch (x) {\n      rejectWithNotify(x);\n    }\n\n    return d.promise();\n  };\n\n  var query = {};\n  each([\"sortBy\", \"thenBy\", \"filter\", \"slice\", \"select\", \"groupBy\"], function () {\n    var name = String(this);\n\n    query[name] = function () {\n      return remoteQueryImpl(url, queryOptions, tasks.concat(createTask(name, arguments)));\n    };\n  });\n  each([\"count\", \"min\", \"max\", \"sum\", \"avg\", \"aggregate\", \"enumerate\"], function () {\n    var name = String(this);\n\n    query[name] = function () {\n      return exec.call(this, createTask(name, arguments));\n    };\n  });\n  return query;\n};\n\nmodule.exports = remoteQueryImpl;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/data/remote_query.js"],"names":["queryAdapters","require","errorsModule","each","isFunction","Deferred","arrayQueryImpl","remoteQueryImpl","tasks","queryOptions","createTask","name","args","exec","d","rejectWithNotify","handler","task","_mergedSortArgs","head","_taskQueue","unmergedTasks","_adapterFactory","_adapter","optimize","_currentTask","mergeSortTask","String","unmergeSortTasks","clientChain","errorHandler","query","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (data/remote_query.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar queryAdapters = require(\"./query_adapters\");\r\nvar errorsModule = require(\"./errors\");\r\nvar each = require(\"../core/utils/iterator\").each;\r\nvar isFunction = require(\"../core/utils/type\").isFunction;\r\nvar Deferred = require(\"../core/utils/deferred\").Deferred;\r\nvar arrayQueryImpl = require(\"./array_query\");\r\nvar remoteQueryImpl = function remoteQueryImpl(url, queryOptions, tasks) {\r\n    tasks = tasks || [];\r\n    queryOptions = queryOptions || {};\r\n    var createTask = function(name, args) {\r\n        return {\r\n            name: name,\r\n            args: args\r\n        }\r\n    };\r\n    var exec = function(executorTask) {\r\n        var d = new Deferred;\r\n        var _adapterFactory;\r\n        var _adapter;\r\n        var _taskQueue;\r\n        var _currentTask;\r\n        var _mergedSortArgs;\r\n        var rejectWithNotify = function(error) {\r\n            var handler = queryOptions.errorHandler;\r\n            if (handler) {\r\n                handler(error)\r\n            }\r\n            errorsModule._errorHandler(error);\r\n            d.reject(error)\r\n        };\r\n\r\n        function mergeSortTask(task) {\r\n            switch (task.name) {\r\n                case \"sortBy\":\r\n                    _mergedSortArgs = [task.args];\r\n                    return true;\r\n                case \"thenBy\":\r\n                    if (!_mergedSortArgs) {\r\n                        throw errorsModule.errors.Error(\"E4004\")\r\n                    }\r\n                    _mergedSortArgs.push(task.args);\r\n                    return true\r\n            }\r\n            return false\r\n        }\r\n\r\n        function unmergeSortTasks() {\r\n            var head = _taskQueue[0];\r\n            var unmergedTasks = [];\r\n            if (head && \"multiSort\" === head.name) {\r\n                _taskQueue.shift();\r\n                each(head.args[0], function() {\r\n                    unmergedTasks.push(createTask(unmergedTasks.length ? \"thenBy\" : \"sortBy\", this))\r\n                })\r\n            }\r\n            _taskQueue = unmergedTasks.concat(_taskQueue)\r\n        }\r\n        try {\r\n            _adapterFactory = queryOptions.adapter;\r\n            if (!isFunction(_adapterFactory)) {\r\n                _adapterFactory = queryAdapters[_adapterFactory]\r\n            }\r\n            _adapter = _adapterFactory(queryOptions);\r\n            _taskQueue = [].concat(tasks).concat(executorTask);\r\n            var optimize = _adapter.optimize;\r\n            if (optimize) {\r\n                optimize(_taskQueue)\r\n            }\r\n            while (_taskQueue.length) {\r\n                _currentTask = _taskQueue[0];\r\n                if (!mergeSortTask(_currentTask)) {\r\n                    if (_mergedSortArgs) {\r\n                        _taskQueue.unshift(createTask(\"multiSort\", [_mergedSortArgs]));\r\n                        _mergedSortArgs = null;\r\n                        continue\r\n                    }\r\n                    if (\"enumerate\" !== String(_currentTask.name)) {\r\n                        if (!_adapter[_currentTask.name] || false === _adapter[_currentTask.name].apply(_adapter, _currentTask.args)) {\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n                _taskQueue.shift()\r\n            }\r\n            unmergeSortTasks();\r\n            _adapter.exec(url).done(function(result, extra) {\r\n                if (!_taskQueue.length) {\r\n                    d.resolve(result, extra)\r\n                } else {\r\n                    var clientChain = arrayQueryImpl(result, {\r\n                        errorHandler: queryOptions.errorHandler\r\n                    });\r\n                    each(_taskQueue, function() {\r\n                        clientChain = clientChain[this.name].apply(clientChain, this.args)\r\n                    });\r\n                    clientChain.done(d.resolve).fail(d.reject)\r\n                }\r\n            }).fail(rejectWithNotify)\r\n        } catch (x) {\r\n            rejectWithNotify(x)\r\n        }\r\n        return d.promise()\r\n    };\r\n    var query = {};\r\n    each([\"sortBy\", \"thenBy\", \"filter\", \"slice\", \"select\", \"groupBy\"], function() {\r\n        var name = String(this);\r\n        query[name] = function() {\r\n            return remoteQueryImpl(url, queryOptions, tasks.concat(createTask(name, arguments)))\r\n        }\r\n    });\r\n    each([\"count\", \"min\", \"max\", \"sum\", \"avg\", \"aggregate\", \"enumerate\"], function() {\r\n        var name = String(this);\r\n        query[name] = function() {\r\n            return exec.call(this, createTask(name, arguments))\r\n        }\r\n    });\r\n    return query\r\n};\r\nmodule.exports = remoteQueryImpl;\r\n"]},"metadata":{},"sourceType":"module"}