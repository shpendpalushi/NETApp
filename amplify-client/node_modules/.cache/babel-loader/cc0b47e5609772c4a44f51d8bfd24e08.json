{"ast":null,"code":"/**\r\n * DevExtreme (viz/gauges/bar_gauge.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar PI_DIV_180 = Math.PI / 180;\nvar _abs = Math.abs;\nvar _round = Math.round;\nvar _floor = Math.floor;\nvar _min = Math.min;\nvar _max = Math.max;\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar objectUtils = require(\"../../core/utils/object\");\n\nvar commonUtils = require(\"../../core/utils/common\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar _normalizeEnum = require(\"../core/utils\").normalizeEnum;\n\nvar baseGaugeModule = require(\"./base_gauge\");\n\nvar dxBaseGauge = baseGaugeModule.dxBaseGauge;\nvar _getSampleText = baseGaugeModule.getSampleText;\nvar _formatValue = baseGaugeModule.formatValue;\nvar _compareArrays = baseGaugeModule.compareArrays;\n\nvar dxCircularGauge = require(\"./circular_gauge\");\n\nvar _isArray = Array.isArray;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar _convertAngleToRendererSpace = vizUtils.convertAngleToRendererSpace;\nvar _getCosAndSin = vizUtils.getCosAndSin;\nvar _patchFontOptions = vizUtils.patchFontOptions;\nvar _Number = Number;\nvar _isFinite = isFinite;\nvar _noop = commonUtils.noop;\nvar _extend = extend;\nvar OPTION_VALUES = \"values\";\nvar dxBarGauge = dxBaseGauge.inherit({\n  _rootClass: \"dxbg-bar-gauge\",\n  _themeSection: \"barGauge\",\n  _fontFields: [\"label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\n  _initCore: function _initCore() {\n    var that = this;\n    that.callBase.apply(that, arguments);\n    that._barsGroup = that._renderer.g().attr({\n      \"class\": \"dxbg-bars\"\n    }).linkOn(that._renderer.root, \"bars\");\n    that._values = [];\n    that._context = {\n      renderer: that._renderer,\n      translator: that._translator,\n      tracker: that._tracker,\n      group: that._barsGroup\n    };\n\n    that._animateStep = function (pos) {\n      var bars = that._bars;\n      var i;\n      var ii;\n\n      for (i = 0, ii = bars.length; i < ii; ++i) {\n        bars[i].animate(pos);\n      }\n    };\n\n    that._animateComplete = function () {\n      that._bars.forEach(function (bar) {\n        return bar.endAnimation();\n      });\n\n      that._checkOverlap();\n    };\n  },\n  _disposeCore: function _disposeCore() {\n    var that = this;\n\n    that._barsGroup.linkOff();\n\n    that._barsGroup = that._values = that._context = that._animateStep = that._animateComplete = null;\n    that.callBase.apply(that, arguments);\n  },\n  _setupDomainCore: function _setupDomainCore() {\n    var that = this;\n    var startValue = that.option(\"startValue\");\n    var endValue = that.option(\"endValue\");\n    _isFinite(startValue) || (startValue = 0);\n    _isFinite(endValue) || (endValue = 100);\n\n    that._translator.setDomain(startValue, endValue);\n\n    that._baseValue = that._translator.adjust(that.option(\"baseValue\"));\n    _isFinite(that._baseValue) || (that._baseValue = startValue < endValue ? startValue : endValue);\n  },\n  _getDefaultSize: function _getDefaultSize() {\n    return {\n      width: 300,\n      height: 300\n    };\n  },\n  _setupCodomain: dxCircularGauge.prototype._setupCodomain,\n  _getApproximateScreenRange: function _getApproximateScreenRange() {\n    var that = this;\n    var sides = that._area.sides;\n    var width = that._canvas.width / (sides.right - sides.left);\n    var height = that._canvas.height / (sides.down - sides.up);\n    var r = width < height ? width : height;\n    return -that._translator.getCodomainRange() * r * PI_DIV_180;\n  },\n  _setupAnimationSettings: function _setupAnimationSettings() {\n    var that = this;\n    that.callBase.apply(that, arguments);\n\n    if (that._animationSettings) {\n      that._animationSettings.step = that._animateStep;\n      that._animationSettings.complete = that._animateComplete;\n    }\n  },\n  _cleanContent: function _cleanContent() {\n    var that = this;\n\n    that._barsGroup.linkRemove();\n\n    that._animationSettings && that._barsGroup.stopAnimation();\n\n    that._barsGroup.clear();\n  },\n  _renderContent: function _renderContent() {\n    var that = this;\n    var labelOptions = that.option(\"label\");\n    var text;\n    var bBox;\n    var context = that._context;\n\n    that._barsGroup.linkAppend();\n\n    context.textEnabled = void 0 === labelOptions || labelOptions && (!(\"visible\" in labelOptions) || labelOptions.visible);\n\n    if (context.textEnabled) {\n      context.textColor = labelOptions && labelOptions.font && labelOptions.font.color || null;\n      labelOptions = _extend(true, {}, that._themeManager.theme().label, labelOptions);\n      context.formatOptions = {\n        format: void 0 !== labelOptions.format ? labelOptions.format : that._defaultFormatOptions,\n        customizeText: labelOptions.customizeText\n      };\n      context.textOptions = {\n        align: \"center\"\n      };\n      context.fontStyles = _patchFontOptions(_extend({}, that._themeManager.theme().label.font, labelOptions.font, {\n        color: null\n      }));\n      that._textIndent = labelOptions.indent > 0 ? _Number(labelOptions.indent) : 0;\n      context.lineWidth = labelOptions.connectorWidth > 0 ? _Number(labelOptions.connectorWidth) : 0;\n      context.lineColor = labelOptions.connectorColor || null;\n      text = that._renderer.text(_getSampleText(that._translator, context.formatOptions), 0, 0).attr(context.textOptions).css(context.fontStyles).append(that._barsGroup);\n      bBox = text.getBBox();\n      text.remove();\n      context.textY = bBox.y;\n      context.textWidth = bBox.width;\n      context.textHeight = bBox.height;\n    }\n\n    dxCircularGauge.prototype._applyMainLayout.call(that);\n\n    that._renderBars();\n  },\n  _measureMainElements: function _measureMainElements() {\n    var result = {\n      maxRadius: this._area.radius\n    };\n\n    if (this._context.textEnabled) {\n      result.horizontalMargin = this._context.textWidth;\n      result.verticalMargin = this._context.textHeight;\n      result.inverseHorizontalMargin = this._context.textWidth / 2;\n      result.inverseVerticalMargin = this._context.textHeight / 2;\n    }\n\n    return result;\n  },\n  _renderBars: function _renderBars() {\n    var that = this;\n\n    var options = _extend({}, that._themeManager.theme(), that.option());\n\n    var relativeInnerRadius;\n    var radius;\n    var area = that._area;\n    relativeInnerRadius = options.relativeInnerRadius > 0 && options.relativeInnerRadius < 1 ? _Number(options.relativeInnerRadius) : .1;\n    radius = area.radius;\n\n    if (that._context.textEnabled) {\n      that._textIndent = _round(_min(that._textIndent, radius / 2));\n      radius -= that._textIndent;\n    }\n\n    that._outerRadius = _floor(radius);\n    that._innerRadius = _floor(radius * relativeInnerRadius);\n    that._barSpacing = options.barSpacing > 0 ? _Number(options.barSpacing) : 0;\n\n    _extend(that._context, {\n      backgroundColor: options.backgroundColor,\n      x: area.x,\n      y: area.y,\n      startAngle: area.startCoord,\n      endAngle: area.endCoord,\n      baseAngle: that._translator.translate(that._baseValue)\n    });\n\n    that._arrangeBars();\n  },\n  _arrangeBars: function _arrangeBars() {\n    var that = this;\n    var radius = that._outerRadius - that._innerRadius;\n    var context = that._context;\n    var spacing;\n    var colors;\n    var unitOffset;\n    var i;\n    var count = that._bars.length;\n\n    that._beginValueChanging();\n\n    context.barSize = count > 0 ? _max((radius - (count - 1) * that._barSpacing) / count, 1) : 0;\n    spacing = count > 1 ? _max(_min((radius - count * context.barSize) / (count - 1), that._barSpacing), 0) : 0;\n\n    var _count = _min(_floor((radius + spacing) / context.barSize), count);\n\n    that._setBarsCount(count);\n\n    radius = that._outerRadius;\n    context.textRadius = radius;\n    context.textIndent = that._textIndent;\n\n    that._palette.reset();\n\n    unitOffset = context.barSize + spacing;\n    colors = that._palette.generateColors(_count);\n\n    for (i = 0; i < _count; ++i, radius -= unitOffset) {\n      that._bars[i].arrange({\n        radius: radius,\n        color: colors[i]\n      });\n    }\n\n    for (var _i = _count; _i < count; _i++) {\n      that._bars[_i].hide();\n    }\n\n    if (that._animationSettings && !that._noAnimation) {\n      that._animateBars();\n    } else {\n      that._updateBars();\n    }\n\n    that._endValueChanging();\n  },\n  _setBarsCount: function _setBarsCount() {\n    var that = this;\n\n    if (that._bars.length > 0) {\n      if (that._dummyBackground) {\n        that._dummyBackground.dispose();\n\n        that._dummyBackground = null;\n      }\n    } else {\n      if (!that._dummyBackground) {\n        that._dummyBackground = that._renderer.arc().attr({\n          \"stroke-linejoin\": \"round\"\n        });\n      }\n\n      that._dummyBackground.attr({\n        x: that._context.x,\n        y: that._context.y,\n        outerRadius: that._outerRadius,\n        innerRadius: that._innerRadius,\n        startAngle: that._context.endAngle,\n        endAngle: that._context.startAngle,\n        fill: that._context.backgroundColor\n      }).append(that._barsGroup);\n    }\n  },\n  _updateBars: function _updateBars() {\n    this._bars.forEach(function (bar) {\n      return bar.applyValue();\n    });\n\n    this._checkOverlap();\n  },\n  _checkOverlap: function _checkOverlap() {\n    var that = this;\n    var bars = that._bars;\n\n    var overlapStrategy = _normalizeEnum(that._getOption(\"resolveLabelOverlapping\", true));\n\n    if (\"none\" === overlapStrategy) {\n      return;\n    }\n\n    var sortedBars = bars.concat().sort(function (a, b) {\n      return a.getValue() - b.getValue();\n    });\n    var currentIndex = 0;\n    var nextIndex = 1;\n\n    while (currentIndex < sortedBars.length && nextIndex < sortedBars.length) {\n      var current = sortedBars[currentIndex];\n      var next = sortedBars[nextIndex];\n\n      if (current.checkIntersect(next)) {\n        next.hideLabel();\n        nextIndex++;\n      } else {\n        currentIndex = nextIndex;\n        nextIndex = currentIndex + 1;\n      }\n    }\n  },\n  _animateBars: function _animateBars() {\n    var that = this;\n    var i;\n    var ii = that._bars.length;\n\n    if (ii > 0) {\n      for (i = 0; i < ii; ++i) {\n        that._bars[i].beginAnimation();\n      }\n\n      that._barsGroup.animate({\n        _: 0\n      }, that._animationSettings);\n    }\n  },\n  _buildNodes: function _buildNodes() {\n    var that = this;\n    var options = that._options;\n    that._palette = that._themeManager.createPalette(options.palette, {\n      useHighlight: true,\n      extensionMode: options.paletteExtensionMode\n    });\n\n    that._palette.reset();\n\n    that._bars = that._bars || [];\n    that._animationSettings && that._barsGroup.stopAnimation();\n\n    var barValues = that._values.filter(_isFinite);\n\n    var count = barValues.length;\n\n    if (that._bars.length > count) {\n      var ii = that._bars.length;\n\n      for (var i = count; i < ii; ++i) {\n        that._bars[i].dispose();\n      }\n\n      that._bars.splice(count, ii - count);\n    } else {\n      if (that._bars.length < count) {\n        for (var _i2 = that._bars.length; _i2 < count; ++_i2) {\n          that._bars.push(new BarWrapper(_i2, that._context));\n        }\n      }\n    }\n\n    that._bars.forEach(function (bar, index) {\n      bar.update({\n        color: that._palette.getNextColor(count),\n        value: barValues[index]\n      });\n    });\n  },\n  _updateValues: function _updateValues(values) {\n    var that = this;\n    var list = _isArray(values) && values || _isFinite(values) && [values] || [];\n    var i;\n    var ii = list.length;\n    var value;\n    that._values.length = ii;\n\n    for (i = 0; i < ii; ++i) {\n      value = list[i];\n      that._values[i] = value = _Number(_isFinite(value) ? value : that._values[i]);\n    }\n\n    if (!that._resizing) {\n      if (!_compareArrays(that._values, that.option(OPTION_VALUES))) {\n        that.option(OPTION_VALUES, that._values.slice());\n      }\n    }\n\n    this._change([\"NODES\"]);\n  },\n  values: function values(arg) {\n    if (void 0 !== arg) {\n      this._updateValues(arg);\n\n      return this;\n    } else {\n      return this._values.slice(0);\n    }\n  },\n  _optionChangesMap: {\n    backgroundColor: \"MOSTLY_TOTAL\",\n    relativeInnerRadius: \"MOSTLY_TOTAL\",\n    barSpacing: \"MOSTLY_TOTAL\",\n    label: \"MOSTLY_TOTAL\",\n    resolveLabelOverlapping: \"MOSTLY_TOTAL\",\n    palette: \"MOSTLY_TOTAL\",\n    paletteExtensionMode: \"MOSTLY_TOTAL\",\n    values: \"VALUES\"\n  },\n  _change_VALUES: function _change_VALUES() {\n    this._updateValues(this.option(OPTION_VALUES));\n  },\n  _factory: objectUtils.clone(dxBaseGauge.prototype._factory),\n  _optionChangesOrder: [\"VALUES\", \"NODES\"],\n  _initialChanges: [\"VALUES\"],\n  _change_NODES: function _change_NODES() {\n    this._buildNodes();\n  },\n  _change_MOSTLY_TOTAL: function _change_MOSTLY_TOTAL() {\n    this._change([\"NODES\"]);\n\n    this.callBase();\n  },\n  _proxyData: [],\n  _getLegendData: function _getLegendData() {\n    var that = this;\n    var formatOptions = {};\n    var options = that._options;\n    var labelFormatOptions = (options.label || {}).format;\n    var legendFormatOptions = (options.legend || {}).itemTextFormat;\n\n    if (legendFormatOptions) {\n      formatOptions.format = legendFormatOptions;\n    } else {\n      formatOptions.format = labelFormatOptions || that._defaultFormatOptions;\n    }\n\n    return (this._bars || []).map(function (b) {\n      return {\n        id: b.index,\n        item: {\n          value: b.getValue(),\n          color: b.getColor(),\n          index: b.index\n        },\n        text: _formatValue(b.getValue(), formatOptions),\n        visible: true,\n        states: {\n          normal: {\n            fill: b.getColor()\n          }\n        }\n      };\n    });\n  }\n});\n\nvar BarWrapper = function BarWrapper(index, context) {\n  var that = this;\n  that._context = context;\n  that._tracker = context.renderer.arc().attr({\n    \"stroke-linejoin\": \"round\"\n  });\n  that.index = index;\n};\n\n_extend(BarWrapper.prototype, {\n  dispose: function dispose() {\n    var that = this;\n\n    that._background.dispose();\n\n    that._bar.dispose();\n\n    if (that._context.textEnabled) {\n      that._line.dispose();\n\n      that._text.dispose();\n    }\n\n    that._context.tracker.detach(that._tracker);\n\n    that._context = that._settings = that._background = that._bar = that._line = that._text = that._tracker = null;\n    return that;\n  },\n  arrange: function arrange(options) {\n    var that = this;\n    var context = that._context;\n    this._visible = true;\n    context.tracker.attach(that._tracker, that, {\n      index: that.index\n    });\n    that._background = context.renderer.arc().attr({\n      \"stroke-linejoin\": \"round\",\n      fill: context.backgroundColor\n    }).append(context.group);\n    that._settings = that._settings || {\n      x: context.x,\n      y: context.y,\n      startAngle: context.baseAngle,\n      endAngle: context.baseAngle\n    };\n    that._bar = context.renderer.arc().attr(_extend({\n      \"stroke-linejoin\": \"round\"\n    }, that._settings)).append(context.group);\n\n    if (context.textEnabled) {\n      that._line = context.renderer.path([], \"line\").attr({\n        \"stroke-width\": context.lineWidth\n      }).append(context.group);\n      that._text = context.renderer.text().css(context.fontStyles).attr(context.textOptions).append(context.group);\n    }\n\n    that._angle = isFinite(that._angle) ? that._angle : context.baseAngle;\n    that._settings.outerRadius = options.radius;\n    that._settings.innerRadius = options.radius - context.barSize;\n    that._settings.x = context.x;\n    that._settings.y = context.y;\n\n    that._background.attr(_extend({}, that._settings, {\n      startAngle: context.endAngle,\n      endAngle: context.startAngle,\n      fill: that._context.backgroundColor\n    }));\n\n    that._bar.attr({\n      x: context.x,\n      y: context.y,\n      outerRadius: that._settings.outerRadius,\n      innerRadius: that._settings.innerRadius,\n      fill: that._color\n    });\n\n    that._tracker.attr(that._settings);\n\n    if (context.textEnabled) {\n      that._line.attr({\n        points: [context.x, context.y - that._settings.innerRadius, context.x, context.y - context.textRadius - context.textIndent],\n        stroke: context.lineColor || that._color\n      }).sharp();\n\n      that._text.css({\n        fill: context.textColor || that._color\n      });\n    }\n\n    return that;\n  },\n  getTooltipParameters: function getTooltipParameters() {\n    var that = this;\n\n    var cosSin = _getCosAndSin((that._angle + that._context.baseAngle) / 2);\n\n    return {\n      x: _round(that._context.x + (that._settings.outerRadius + that._settings.innerRadius) / 2 * cosSin.cos),\n      y: _round(that._context.y - (that._settings.outerRadius + that._settings.innerRadius) / 2 * cosSin.sin),\n      offset: 0,\n      color: that._color,\n      value: that._value\n    };\n  },\n  setAngle: function setAngle(angle) {\n    var that = this;\n    var context = that._context;\n    var settings = that._settings;\n    var cosSin;\n    that._angle = angle;\n    setAngles(settings, context.baseAngle, angle);\n\n    that._bar.attr(settings);\n\n    that._tracker.attr(settings);\n\n    if (context.textEnabled) {\n      cosSin = _getCosAndSin(angle);\n      var indent = context.textIndent;\n      var radius = context.textRadius + indent;\n      var x = context.x + radius * cosSin.cos;\n      var y = context.y - radius * cosSin.sin;\n      var halfWidth = .5 * context.textWidth;\n      var textHeight = context.textHeight;\n      var textY = context.textY;\n\n      if (_abs(x - context.x) > indent) {\n        x += x < context.x ? -halfWidth : halfWidth;\n      }\n\n      if (_abs(y - context.y) <= indent) {\n        y -= textY + .5 * textHeight;\n      } else {\n        y -= y < context.y ? textY + textHeight : textY;\n      }\n\n      var text = _formatValue(that._value, context.formatOptions, {\n        index: that.index\n      });\n\n      var visibility = \"\" === text ? \"hidden\" : null;\n\n      that._text.attr({\n        text: text,\n        x: x,\n        y: y,\n        visibility: visibility\n      });\n\n      that._line.attr({\n        visibility: visibility\n      });\n\n      that._line.rotate(_convertAngleToRendererSpace(angle), context.x, context.y);\n    }\n\n    return that;\n  },\n  hideLabel: function hideLabel() {\n    this._text.attr({\n      visibility: \"hidden\"\n    });\n\n    this._line.attr({\n      visibility: \"hidden\"\n    });\n  },\n  checkIntersect: function checkIntersect(anotherBar) {\n    var coords = this.calculateLabelCoords();\n    var anotherCoords = anotherBar.calculateLabelCoords();\n\n    if (!coords || !anotherCoords) {\n      return false;\n    }\n\n    var width = Math.max(0, Math.min(coords.bottomRight.x, anotherCoords.bottomRight.x) - Math.max(coords.topLeft.x, anotherCoords.topLeft.x));\n    var height = Math.max(0, Math.min(coords.bottomRight.y, anotherCoords.bottomRight.y) - Math.max(coords.topLeft.y, anotherCoords.topLeft.y));\n    return width * height !== 0;\n  },\n  calculateLabelCoords: function calculateLabelCoords() {\n    if (!this._text) {\n      return;\n    }\n\n    var box = this._text.getBBox();\n\n    return {\n      topLeft: {\n        x: box.x,\n        y: box.y\n      },\n      bottomRight: {\n        x: box.x + box.width,\n        y: box.y + box.height\n      }\n    };\n  },\n  _processValue: function _processValue(value) {\n    return this._context.translator.translate(this._context.translator.adjust(value));\n  },\n  applyValue: function applyValue() {\n    if (!this._visible) {\n      return this;\n    }\n\n    return this.setAngle(this._processValue(this.getValue()));\n  },\n  update: function update(_ref) {\n    var color = _ref.color,\n        value = _ref.value;\n    this._color = color;\n    this._value = value;\n  },\n  hide: function hide() {\n    this._visible = false;\n  },\n  getColor: function getColor() {\n    return this._color;\n  },\n  getValue: function getValue() {\n    return this._value;\n  },\n  beginAnimation: function beginAnimation() {\n    if (!this._visible) {\n      return this;\n    }\n\n    var that = this;\n\n    var angle = this._processValue(this.getValue());\n\n    if (!compareFloats(that._angle, angle)) {\n      that._start = that._angle;\n      that._delta = angle - that._angle;\n\n      that._tracker.attr({\n        visibility: \"hidden\"\n      });\n\n      if (that._context.textEnabled) {\n        that._line.attr({\n          visibility: \"hidden\"\n        });\n\n        that._text.attr({\n          visibility: \"hidden\"\n        });\n      }\n    } else {\n      that.animate = _noop;\n      that.setAngle(that._angle);\n    }\n  },\n  animate: function animate(pos) {\n    if (!this._visible) {\n      return this;\n    }\n\n    var that = this;\n    that._angle = that._start + that._delta * pos;\n    setAngles(that._settings, that._context.baseAngle, that._angle);\n\n    that._bar.attr(that._settings);\n  },\n  endAnimation: function endAnimation() {\n    var that = this;\n\n    if (void 0 !== that._delta) {\n      if (compareFloats(that._angle, that._start + that._delta)) {\n        that._tracker.attr({\n          visibility: null\n        });\n\n        that.setAngle(that._angle);\n      }\n    } else {\n      delete that.animate;\n    }\n\n    delete that._start;\n    delete that._delta;\n  }\n});\n\nfunction setAngles(target, angle1, angle2) {\n  target.startAngle = angle1 < angle2 ? angle1 : angle2;\n  target.endAngle = angle1 < angle2 ? angle2 : angle1;\n}\n\nfunction compareFloats(value1, value2) {\n  return _abs(value1 - value2) < 1e-4;\n}\n\nregisterComponent(\"dxBarGauge\", dxBarGauge);\nexports.dxBarGauge = dxBarGauge;\ndxBarGauge.addPlugin(require(\"../components/legend\").plugin);","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/gauges/bar_gauge.js"],"names":["PI_DIV_180","Math","_abs","_round","_floor","_min","_max","registerComponent","require","objectUtils","commonUtils","extend","_normalizeEnum","baseGaugeModule","dxBaseGauge","_getSampleText","_formatValue","_compareArrays","dxCircularGauge","_isArray","Array","vizUtils","_convertAngleToRendererSpace","_getCosAndSin","_patchFontOptions","_Number","_isFinite","_noop","_extend","OPTION_VALUES","dxBarGauge","_rootClass","_themeSection","_fontFields","_initCore","that","renderer","translator","tracker","group","_barsGroup","bars","i","ii","bar","_disposeCore","_setupDomainCore","startValue","endValue","_getDefaultSize","width","height","_setupCodomain","_getApproximateScreenRange","sides","r","_setupAnimationSettings","_cleanContent","_renderContent","labelOptions","context","format","customizeText","align","color","text","bBox","_measureMainElements","result","maxRadius","radius","_renderBars","options","area","relativeInnerRadius","backgroundColor","x","y","startAngle","endAngle","baseAngle","_arrangeBars","count","spacing","_count","unitOffset","colors","_i","_setBarsCount","outerRadius","innerRadius","fill","_updateBars","_checkOverlap","overlapStrategy","sortedBars","a","b","currentIndex","nextIndex","current","next","_animateBars","_","_buildNodes","useHighlight","extensionMode","paletteExtensionMode","barValues","_i2","value","_updateValues","list","values","_optionChangesMap","barSpacing","label","resolveLabelOverlapping","palette","_change_VALUES","_factory","_optionChangesOrder","_initialChanges","_change_NODES","_change_MOSTLY_TOTAL","_proxyData","_getLegendData","formatOptions","labelFormatOptions","legendFormatOptions","id","item","index","visible","states","normal","BarWrapper","dispose","arrange","lineWidth","isFinite","_color","points","stroke","getTooltipParameters","cosSin","offset","_value","setAngle","settings","setAngles","indent","halfWidth","textHeight","textY","visibility","hideLabel","checkIntersect","coords","anotherCoords","anotherBar","calculateLabelCoords","box","topLeft","bottomRight","_processValue","applyValue","update","_ref","hide","getColor","getValue","beginAnimation","angle","compareFloats","animate","endAnimation","target","angle1","value1","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/gauges/bar_gauge.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar PI_DIV_180 = Math.PI / 180;\r\nvar _abs = Math.abs;\r\nvar _round = Math.round;\r\nvar _floor = Math.floor;\r\nvar _min = Math.min;\r\nvar _max = Math.max;\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar objectUtils = require(\"../../core/utils/object\");\r\nvar commonUtils = require(\"../../core/utils/common\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar _normalizeEnum = require(\"../core/utils\").normalizeEnum;\r\nvar baseGaugeModule = require(\"./base_gauge\");\r\nvar dxBaseGauge = baseGaugeModule.dxBaseGauge;\r\nvar _getSampleText = baseGaugeModule.getSampleText;\r\nvar _formatValue = baseGaugeModule.formatValue;\r\nvar _compareArrays = baseGaugeModule.compareArrays;\r\nvar dxCircularGauge = require(\"./circular_gauge\");\r\nvar _isArray = Array.isArray;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar _convertAngleToRendererSpace = vizUtils.convertAngleToRendererSpace;\r\nvar _getCosAndSin = vizUtils.getCosAndSin;\r\nvar _patchFontOptions = vizUtils.patchFontOptions;\r\nvar _Number = Number;\r\nvar _isFinite = isFinite;\r\nvar _noop = commonUtils.noop;\r\nvar _extend = extend;\r\nvar OPTION_VALUES = \"values\";\r\nvar dxBarGauge = dxBaseGauge.inherit({\r\n    _rootClass: \"dxbg-bar-gauge\",\r\n    _themeSection: \"barGauge\",\r\n    _fontFields: [\"label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\r\n    _initCore: function() {\r\n        var that = this;\r\n        that.callBase.apply(that, arguments);\r\n        that._barsGroup = that._renderer.g().attr({\r\n            \"class\": \"dxbg-bars\"\r\n        }).linkOn(that._renderer.root, \"bars\");\r\n        that._values = [];\r\n        that._context = {\r\n            renderer: that._renderer,\r\n            translator: that._translator,\r\n            tracker: that._tracker,\r\n            group: that._barsGroup\r\n        };\r\n        that._animateStep = function(pos) {\r\n            var bars = that._bars;\r\n            var i;\r\n            var ii;\r\n            for (i = 0, ii = bars.length; i < ii; ++i) {\r\n                bars[i].animate(pos)\r\n            }\r\n        };\r\n        that._animateComplete = function() {\r\n            that._bars.forEach(function(bar) {\r\n                return bar.endAnimation()\r\n            });\r\n            that._checkOverlap()\r\n        }\r\n    },\r\n    _disposeCore: function() {\r\n        var that = this;\r\n        that._barsGroup.linkOff();\r\n        that._barsGroup = that._values = that._context = that._animateStep = that._animateComplete = null;\r\n        that.callBase.apply(that, arguments)\r\n    },\r\n    _setupDomainCore: function() {\r\n        var that = this;\r\n        var startValue = that.option(\"startValue\");\r\n        var endValue = that.option(\"endValue\");\r\n        _isFinite(startValue) || (startValue = 0);\r\n        _isFinite(endValue) || (endValue = 100);\r\n        that._translator.setDomain(startValue, endValue);\r\n        that._baseValue = that._translator.adjust(that.option(\"baseValue\"));\r\n        _isFinite(that._baseValue) || (that._baseValue = startValue < endValue ? startValue : endValue)\r\n    },\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: 300,\r\n            height: 300\r\n        }\r\n    },\r\n    _setupCodomain: dxCircularGauge.prototype._setupCodomain,\r\n    _getApproximateScreenRange: function() {\r\n        var that = this;\r\n        var sides = that._area.sides;\r\n        var width = that._canvas.width / (sides.right - sides.left);\r\n        var height = that._canvas.height / (sides.down - sides.up);\r\n        var r = width < height ? width : height;\r\n        return -that._translator.getCodomainRange() * r * PI_DIV_180\r\n    },\r\n    _setupAnimationSettings: function() {\r\n        var that = this;\r\n        that.callBase.apply(that, arguments);\r\n        if (that._animationSettings) {\r\n            that._animationSettings.step = that._animateStep;\r\n            that._animationSettings.complete = that._animateComplete\r\n        }\r\n    },\r\n    _cleanContent: function() {\r\n        var that = this;\r\n        that._barsGroup.linkRemove();\r\n        that._animationSettings && that._barsGroup.stopAnimation();\r\n        that._barsGroup.clear()\r\n    },\r\n    _renderContent: function() {\r\n        var that = this;\r\n        var labelOptions = that.option(\"label\");\r\n        var text;\r\n        var bBox;\r\n        var context = that._context;\r\n        that._barsGroup.linkAppend();\r\n        context.textEnabled = void 0 === labelOptions || labelOptions && (!(\"visible\" in labelOptions) || labelOptions.visible);\r\n        if (context.textEnabled) {\r\n            context.textColor = labelOptions && labelOptions.font && labelOptions.font.color || null;\r\n            labelOptions = _extend(true, {}, that._themeManager.theme().label, labelOptions);\r\n            context.formatOptions = {\r\n                format: void 0 !== labelOptions.format ? labelOptions.format : that._defaultFormatOptions,\r\n                customizeText: labelOptions.customizeText\r\n            };\r\n            context.textOptions = {\r\n                align: \"center\"\r\n            };\r\n            context.fontStyles = _patchFontOptions(_extend({}, that._themeManager.theme().label.font, labelOptions.font, {\r\n                color: null\r\n            }));\r\n            that._textIndent = labelOptions.indent > 0 ? _Number(labelOptions.indent) : 0;\r\n            context.lineWidth = labelOptions.connectorWidth > 0 ? _Number(labelOptions.connectorWidth) : 0;\r\n            context.lineColor = labelOptions.connectorColor || null;\r\n            text = that._renderer.text(_getSampleText(that._translator, context.formatOptions), 0, 0).attr(context.textOptions).css(context.fontStyles).append(that._barsGroup);\r\n            bBox = text.getBBox();\r\n            text.remove();\r\n            context.textY = bBox.y;\r\n            context.textWidth = bBox.width;\r\n            context.textHeight = bBox.height\r\n        }\r\n        dxCircularGauge.prototype._applyMainLayout.call(that);\r\n        that._renderBars()\r\n    },\r\n    _measureMainElements: function() {\r\n        var result = {\r\n            maxRadius: this._area.radius\r\n        };\r\n        if (this._context.textEnabled) {\r\n            result.horizontalMargin = this._context.textWidth;\r\n            result.verticalMargin = this._context.textHeight;\r\n            result.inverseHorizontalMargin = this._context.textWidth / 2;\r\n            result.inverseVerticalMargin = this._context.textHeight / 2\r\n        }\r\n        return result\r\n    },\r\n    _renderBars: function() {\r\n        var that = this;\r\n        var options = _extend({}, that._themeManager.theme(), that.option());\r\n        var relativeInnerRadius;\r\n        var radius;\r\n        var area = that._area;\r\n        relativeInnerRadius = options.relativeInnerRadius > 0 && options.relativeInnerRadius < 1 ? _Number(options.relativeInnerRadius) : .1;\r\n        radius = area.radius;\r\n        if (that._context.textEnabled) {\r\n            that._textIndent = _round(_min(that._textIndent, radius / 2));\r\n            radius -= that._textIndent\r\n        }\r\n        that._outerRadius = _floor(radius);\r\n        that._innerRadius = _floor(radius * relativeInnerRadius);\r\n        that._barSpacing = options.barSpacing > 0 ? _Number(options.barSpacing) : 0;\r\n        _extend(that._context, {\r\n            backgroundColor: options.backgroundColor,\r\n            x: area.x,\r\n            y: area.y,\r\n            startAngle: area.startCoord,\r\n            endAngle: area.endCoord,\r\n            baseAngle: that._translator.translate(that._baseValue)\r\n        });\r\n        that._arrangeBars()\r\n    },\r\n    _arrangeBars: function() {\r\n        var that = this;\r\n        var radius = that._outerRadius - that._innerRadius;\r\n        var context = that._context;\r\n        var spacing;\r\n        var colors;\r\n        var unitOffset;\r\n        var i;\r\n        var count = that._bars.length;\r\n        that._beginValueChanging();\r\n        context.barSize = count > 0 ? _max((radius - (count - 1) * that._barSpacing) / count, 1) : 0;\r\n        spacing = count > 1 ? _max(_min((radius - count * context.barSize) / (count - 1), that._barSpacing), 0) : 0;\r\n        var _count = _min(_floor((radius + spacing) / context.barSize), count);\r\n        that._setBarsCount(count);\r\n        radius = that._outerRadius;\r\n        context.textRadius = radius;\r\n        context.textIndent = that._textIndent;\r\n        that._palette.reset();\r\n        unitOffset = context.barSize + spacing;\r\n        colors = that._palette.generateColors(_count);\r\n        for (i = 0; i < _count; ++i, radius -= unitOffset) {\r\n            that._bars[i].arrange({\r\n                radius: radius,\r\n                color: colors[i]\r\n            })\r\n        }\r\n        for (var _i = _count; _i < count; _i++) {\r\n            that._bars[_i].hide()\r\n        }\r\n        if (that._animationSettings && !that._noAnimation) {\r\n            that._animateBars()\r\n        } else {\r\n            that._updateBars()\r\n        }\r\n        that._endValueChanging()\r\n    },\r\n    _setBarsCount: function() {\r\n        var that = this;\r\n        if (that._bars.length > 0) {\r\n            if (that._dummyBackground) {\r\n                that._dummyBackground.dispose();\r\n                that._dummyBackground = null\r\n            }\r\n        } else {\r\n            if (!that._dummyBackground) {\r\n                that._dummyBackground = that._renderer.arc().attr({\r\n                    \"stroke-linejoin\": \"round\"\r\n                })\r\n            }\r\n            that._dummyBackground.attr({\r\n                x: that._context.x,\r\n                y: that._context.y,\r\n                outerRadius: that._outerRadius,\r\n                innerRadius: that._innerRadius,\r\n                startAngle: that._context.endAngle,\r\n                endAngle: that._context.startAngle,\r\n                fill: that._context.backgroundColor\r\n            }).append(that._barsGroup)\r\n        }\r\n    },\r\n    _updateBars: function() {\r\n        this._bars.forEach(function(bar) {\r\n            return bar.applyValue()\r\n        });\r\n        this._checkOverlap()\r\n    },\r\n    _checkOverlap: function() {\r\n        var that = this;\r\n        var bars = that._bars;\r\n        var overlapStrategy = _normalizeEnum(that._getOption(\"resolveLabelOverlapping\", true));\r\n        if (\"none\" === overlapStrategy) {\r\n            return\r\n        }\r\n        var sortedBars = bars.concat().sort(function(a, b) {\r\n            return a.getValue() - b.getValue()\r\n        });\r\n        var currentIndex = 0;\r\n        var nextIndex = 1;\r\n        while (currentIndex < sortedBars.length && nextIndex < sortedBars.length) {\r\n            var current = sortedBars[currentIndex];\r\n            var next = sortedBars[nextIndex];\r\n            if (current.checkIntersect(next)) {\r\n                next.hideLabel();\r\n                nextIndex++\r\n            } else {\r\n                currentIndex = nextIndex;\r\n                nextIndex = currentIndex + 1\r\n            }\r\n        }\r\n    },\r\n    _animateBars: function() {\r\n        var that = this;\r\n        var i;\r\n        var ii = that._bars.length;\r\n        if (ii > 0) {\r\n            for (i = 0; i < ii; ++i) {\r\n                that._bars[i].beginAnimation()\r\n            }\r\n            that._barsGroup.animate({\r\n                _: 0\r\n            }, that._animationSettings)\r\n        }\r\n    },\r\n    _buildNodes: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        that._palette = that._themeManager.createPalette(options.palette, {\r\n            useHighlight: true,\r\n            extensionMode: options.paletteExtensionMode\r\n        });\r\n        that._palette.reset();\r\n        that._bars = that._bars || [];\r\n        that._animationSettings && that._barsGroup.stopAnimation();\r\n        var barValues = that._values.filter(_isFinite);\r\n        var count = barValues.length;\r\n        if (that._bars.length > count) {\r\n            var ii = that._bars.length;\r\n            for (var i = count; i < ii; ++i) {\r\n                that._bars[i].dispose()\r\n            }\r\n            that._bars.splice(count, ii - count)\r\n        } else {\r\n            if (that._bars.length < count) {\r\n                for (var _i2 = that._bars.length; _i2 < count; ++_i2) {\r\n                    that._bars.push(new BarWrapper(_i2, that._context))\r\n                }\r\n            }\r\n        }\r\n        that._bars.forEach(function(bar, index) {\r\n            bar.update({\r\n                color: that._palette.getNextColor(count),\r\n                value: barValues[index]\r\n            })\r\n        })\r\n    },\r\n    _updateValues: function(values) {\r\n        var that = this;\r\n        var list = _isArray(values) && values || _isFinite(values) && [values] || [];\r\n        var i;\r\n        var ii = list.length;\r\n        var value;\r\n        that._values.length = ii;\r\n        for (i = 0; i < ii; ++i) {\r\n            value = list[i];\r\n            that._values[i] = value = _Number(_isFinite(value) ? value : that._values[i])\r\n        }\r\n        if (!that._resizing) {\r\n            if (!_compareArrays(that._values, that.option(OPTION_VALUES))) {\r\n                that.option(OPTION_VALUES, that._values.slice())\r\n            }\r\n        }\r\n        this._change([\"NODES\"])\r\n    },\r\n    values: function(arg) {\r\n        if (void 0 !== arg) {\r\n            this._updateValues(arg);\r\n            return this\r\n        } else {\r\n            return this._values.slice(0)\r\n        }\r\n    },\r\n    _optionChangesMap: {\r\n        backgroundColor: \"MOSTLY_TOTAL\",\r\n        relativeInnerRadius: \"MOSTLY_TOTAL\",\r\n        barSpacing: \"MOSTLY_TOTAL\",\r\n        label: \"MOSTLY_TOTAL\",\r\n        resolveLabelOverlapping: \"MOSTLY_TOTAL\",\r\n        palette: \"MOSTLY_TOTAL\",\r\n        paletteExtensionMode: \"MOSTLY_TOTAL\",\r\n        values: \"VALUES\"\r\n    },\r\n    _change_VALUES: function() {\r\n        this._updateValues(this.option(OPTION_VALUES))\r\n    },\r\n    _factory: objectUtils.clone(dxBaseGauge.prototype._factory),\r\n    _optionChangesOrder: [\"VALUES\", \"NODES\"],\r\n    _initialChanges: [\"VALUES\"],\r\n    _change_NODES: function() {\r\n        this._buildNodes()\r\n    },\r\n    _change_MOSTLY_TOTAL: function() {\r\n        this._change([\"NODES\"]);\r\n        this.callBase()\r\n    },\r\n    _proxyData: [],\r\n    _getLegendData: function() {\r\n        var that = this;\r\n        var formatOptions = {};\r\n        var options = that._options;\r\n        var labelFormatOptions = (options.label || {}).format;\r\n        var legendFormatOptions = (options.legend || {}).itemTextFormat;\r\n        if (legendFormatOptions) {\r\n            formatOptions.format = legendFormatOptions\r\n        } else {\r\n            formatOptions.format = labelFormatOptions || that._defaultFormatOptions\r\n        }\r\n        return (this._bars || []).map(function(b) {\r\n            return {\r\n                id: b.index,\r\n                item: {\r\n                    value: b.getValue(),\r\n                    color: b.getColor(),\r\n                    index: b.index\r\n                },\r\n                text: _formatValue(b.getValue(), formatOptions),\r\n                visible: true,\r\n                states: {\r\n                    normal: {\r\n                        fill: b.getColor()\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n});\r\nvar BarWrapper = function(index, context) {\r\n    var that = this;\r\n    that._context = context;\r\n    that._tracker = context.renderer.arc().attr({\r\n        \"stroke-linejoin\": \"round\"\r\n    });\r\n    that.index = index\r\n};\r\n_extend(BarWrapper.prototype, {\r\n    dispose: function() {\r\n        var that = this;\r\n        that._background.dispose();\r\n        that._bar.dispose();\r\n        if (that._context.textEnabled) {\r\n            that._line.dispose();\r\n            that._text.dispose()\r\n        }\r\n        that._context.tracker.detach(that._tracker);\r\n        that._context = that._settings = that._background = that._bar = that._line = that._text = that._tracker = null;\r\n        return that\r\n    },\r\n    arrange: function(options) {\r\n        var that = this;\r\n        var context = that._context;\r\n        this._visible = true;\r\n        context.tracker.attach(that._tracker, that, {\r\n            index: that.index\r\n        });\r\n        that._background = context.renderer.arc().attr({\r\n            \"stroke-linejoin\": \"round\",\r\n            fill: context.backgroundColor\r\n        }).append(context.group);\r\n        that._settings = that._settings || {\r\n            x: context.x,\r\n            y: context.y,\r\n            startAngle: context.baseAngle,\r\n            endAngle: context.baseAngle\r\n        };\r\n        that._bar = context.renderer.arc().attr(_extend({\r\n            \"stroke-linejoin\": \"round\"\r\n        }, that._settings)).append(context.group);\r\n        if (context.textEnabled) {\r\n            that._line = context.renderer.path([], \"line\").attr({\r\n                \"stroke-width\": context.lineWidth\r\n            }).append(context.group);\r\n            that._text = context.renderer.text().css(context.fontStyles).attr(context.textOptions).append(context.group)\r\n        }\r\n        that._angle = isFinite(that._angle) ? that._angle : context.baseAngle;\r\n        that._settings.outerRadius = options.radius;\r\n        that._settings.innerRadius = options.radius - context.barSize;\r\n        that._settings.x = context.x;\r\n        that._settings.y = context.y;\r\n        that._background.attr(_extend({}, that._settings, {\r\n            startAngle: context.endAngle,\r\n            endAngle: context.startAngle,\r\n            fill: that._context.backgroundColor\r\n        }));\r\n        that._bar.attr({\r\n            x: context.x,\r\n            y: context.y,\r\n            outerRadius: that._settings.outerRadius,\r\n            innerRadius: that._settings.innerRadius,\r\n            fill: that._color\r\n        });\r\n        that._tracker.attr(that._settings);\r\n        if (context.textEnabled) {\r\n            that._line.attr({\r\n                points: [context.x, context.y - that._settings.innerRadius, context.x, context.y - context.textRadius - context.textIndent],\r\n                stroke: context.lineColor || that._color\r\n            }).sharp();\r\n            that._text.css({\r\n                fill: context.textColor || that._color\r\n            })\r\n        }\r\n        return that\r\n    },\r\n    getTooltipParameters: function() {\r\n        var that = this;\r\n        var cosSin = _getCosAndSin((that._angle + that._context.baseAngle) / 2);\r\n        return {\r\n            x: _round(that._context.x + (that._settings.outerRadius + that._settings.innerRadius) / 2 * cosSin.cos),\r\n            y: _round(that._context.y - (that._settings.outerRadius + that._settings.innerRadius) / 2 * cosSin.sin),\r\n            offset: 0,\r\n            color: that._color,\r\n            value: that._value\r\n        }\r\n    },\r\n    setAngle: function(angle) {\r\n        var that = this;\r\n        var context = that._context;\r\n        var settings = that._settings;\r\n        var cosSin;\r\n        that._angle = angle;\r\n        setAngles(settings, context.baseAngle, angle);\r\n        that._bar.attr(settings);\r\n        that._tracker.attr(settings);\r\n        if (context.textEnabled) {\r\n            cosSin = _getCosAndSin(angle);\r\n            var indent = context.textIndent;\r\n            var radius = context.textRadius + indent;\r\n            var x = context.x + radius * cosSin.cos;\r\n            var y = context.y - radius * cosSin.sin;\r\n            var halfWidth = .5 * context.textWidth;\r\n            var textHeight = context.textHeight;\r\n            var textY = context.textY;\r\n            if (_abs(x - context.x) > indent) {\r\n                x += x < context.x ? -halfWidth : halfWidth\r\n            }\r\n            if (_abs(y - context.y) <= indent) {\r\n                y -= textY + .5 * textHeight\r\n            } else {\r\n                y -= y < context.y ? textY + textHeight : textY\r\n            }\r\n            var text = _formatValue(that._value, context.formatOptions, {\r\n                index: that.index\r\n            });\r\n            var visibility = \"\" === text ? \"hidden\" : null;\r\n            that._text.attr({\r\n                text: text,\r\n                x: x,\r\n                y: y,\r\n                visibility: visibility\r\n            });\r\n            that._line.attr({\r\n                visibility: visibility\r\n            });\r\n            that._line.rotate(_convertAngleToRendererSpace(angle), context.x, context.y)\r\n        }\r\n        return that\r\n    },\r\n    hideLabel: function() {\r\n        this._text.attr({\r\n            visibility: \"hidden\"\r\n        });\r\n        this._line.attr({\r\n            visibility: \"hidden\"\r\n        })\r\n    },\r\n    checkIntersect: function(anotherBar) {\r\n        var coords = this.calculateLabelCoords();\r\n        var anotherCoords = anotherBar.calculateLabelCoords();\r\n        if (!coords || !anotherCoords) {\r\n            return false\r\n        }\r\n        var width = Math.max(0, Math.min(coords.bottomRight.x, anotherCoords.bottomRight.x) - Math.max(coords.topLeft.x, anotherCoords.topLeft.x));\r\n        var height = Math.max(0, Math.min(coords.bottomRight.y, anotherCoords.bottomRight.y) - Math.max(coords.topLeft.y, anotherCoords.topLeft.y));\r\n        return width * height !== 0\r\n    },\r\n    calculateLabelCoords: function() {\r\n        if (!this._text) {\r\n            return\r\n        }\r\n        var box = this._text.getBBox();\r\n        return {\r\n            topLeft: {\r\n                x: box.x,\r\n                y: box.y\r\n            },\r\n            bottomRight: {\r\n                x: box.x + box.width,\r\n                y: box.y + box.height\r\n            }\r\n        }\r\n    },\r\n    _processValue: function(value) {\r\n        return this._context.translator.translate(this._context.translator.adjust(value))\r\n    },\r\n    applyValue: function() {\r\n        if (!this._visible) {\r\n            return this\r\n        }\r\n        return this.setAngle(this._processValue(this.getValue()))\r\n    },\r\n    update: function(_ref) {\r\n        var color = _ref.color,\r\n            value = _ref.value;\r\n        this._color = color;\r\n        this._value = value\r\n    },\r\n    hide: function() {\r\n        this._visible = false\r\n    },\r\n    getColor: function() {\r\n        return this._color\r\n    },\r\n    getValue: function() {\r\n        return this._value\r\n    },\r\n    beginAnimation: function() {\r\n        if (!this._visible) {\r\n            return this\r\n        }\r\n        var that = this;\r\n        var angle = this._processValue(this.getValue());\r\n        if (!compareFloats(that._angle, angle)) {\r\n            that._start = that._angle;\r\n            that._delta = angle - that._angle;\r\n            that._tracker.attr({\r\n                visibility: \"hidden\"\r\n            });\r\n            if (that._context.textEnabled) {\r\n                that._line.attr({\r\n                    visibility: \"hidden\"\r\n                });\r\n                that._text.attr({\r\n                    visibility: \"hidden\"\r\n                })\r\n            }\r\n        } else {\r\n            that.animate = _noop;\r\n            that.setAngle(that._angle)\r\n        }\r\n    },\r\n    animate: function(pos) {\r\n        if (!this._visible) {\r\n            return this\r\n        }\r\n        var that = this;\r\n        that._angle = that._start + that._delta * pos;\r\n        setAngles(that._settings, that._context.baseAngle, that._angle);\r\n        that._bar.attr(that._settings)\r\n    },\r\n    endAnimation: function() {\r\n        var that = this;\r\n        if (void 0 !== that._delta) {\r\n            if (compareFloats(that._angle, that._start + that._delta)) {\r\n                that._tracker.attr({\r\n                    visibility: null\r\n                });\r\n                that.setAngle(that._angle)\r\n            }\r\n        } else {\r\n            delete that.animate\r\n        }\r\n        delete that._start;\r\n        delete that._delta\r\n    }\r\n});\r\n\r\nfunction setAngles(target, angle1, angle2) {\r\n    target.startAngle = angle1 < angle2 ? angle1 : angle2;\r\n    target.endAngle = angle1 < angle2 ? angle2 : angle1\r\n}\r\n\r\nfunction compareFloats(value1, value2) {\r\n    return _abs(value1 - value2) < 1e-4\r\n}\r\nregisterComponent(\"dxBarGauge\", dxBarGauge);\r\nexports.dxBarGauge = dxBarGauge;\r\ndxBarGauge.addPlugin(require(\"../components/legend\").plugin);\r\n"]},"metadata":{},"sourceType":"module"}