{"ast":null,"code":"/**\r\n * DevExtreme (ui/date_box/ui.date_view_roller.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar clickEvent = require(\"../../events/click\");\n\nvar Scrollable = require(\"../scroll_view/ui.scrollable\");\n\nvar fx = require(\"../../animation/fx\");\n\nvar translator = require(\"../../animation/translator\");\n\nvar DATEVIEW_ROLLER_CLASS = \"dx-dateviewroller\";\nvar DATEVIEW_ROLLER_ACTIVE_CLASS = \"dx-state-active\";\nvar DATEVIEW_ROLLER_CURRENT_CLASS = \"dx-dateviewroller-current\";\nvar DATEVIEW_ROLLER_ITEM_CLASS = \"dx-dateview-item\";\nvar DATEVIEW_ROLLER_ITEM_SELECTED_CLASS = \"dx-dateview-item-selected\";\nvar DATEVIEW_ROLLER_ITEM_SELECTED_FRAME_CLASS = \"dx-dateview-item-selected-frame\";\nvar DATEVIEW_ROLLER_ITEM_SELECTED_BORDER_CLASS = \"dx-dateview-item-selected-border\";\nvar DateViewRoller = Scrollable.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      showScrollbar: false,\n      useNative: false,\n      selectedIndex: 0,\n      bounceEnabled: false,\n      items: [],\n      showOnClick: false,\n      onClick: null,\n      onSelectedIndexChanged: null\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: {\n        platform: \"generic\"\n      },\n      options: {\n        scrollByContent: true\n      }\n    }]);\n  },\n  _init: function _init() {\n    this.callBase();\n\n    this._renderSelectedItemFrame();\n  },\n  _render: function _render() {\n    this.callBase();\n    this.$element().addClass(DATEVIEW_ROLLER_CLASS);\n\n    this._renderContainerClick();\n\n    this._renderItems();\n\n    this._renderSelectedValue();\n\n    this._renderItemsClick();\n\n    this._wrapAction(\"_endAction\", this._endActionHandler.bind(this));\n\n    this._renderSelectedIndexChanged();\n  },\n  _renderSelectedIndexChanged: function _renderSelectedIndexChanged() {\n    this._selectedIndexChanged = this._createActionByOption(\"onSelectedIndexChanged\");\n  },\n  _renderContainerClick: function _renderContainerClick() {\n    if (!this.option(\"showOnClick\")) {\n      return;\n    }\n\n    var eventName = eventUtils.addNamespace(clickEvent.name, this.NAME);\n\n    var clickAction = this._createActionByOption(\"onClick\");\n\n    eventsEngine.off(this._$container, eventName);\n    eventsEngine.on(this._$container, eventName, function (e) {\n      clickAction({\n        event: e\n      });\n    });\n  },\n  _wrapAction: function _wrapAction(actionName, callback) {\n    var strategy = this._strategy;\n    var originalAction = strategy[actionName];\n\n    strategy[actionName] = function () {\n      callback.apply(this, arguments);\n      return originalAction.apply(this, arguments);\n    };\n  },\n  _renderItems: function _renderItems() {\n    var items = this.option(\"items\") || [];\n    var $items = $();\n\n    this._$content.empty();\n\n    items.forEach(function (item) {\n      $items = $items.add($(\"<div>\").addClass(DATEVIEW_ROLLER_ITEM_CLASS).append(item));\n    });\n\n    this._$content.append($items);\n\n    this._$items = $items;\n    this.update();\n  },\n  _renderSelectedItemFrame: function _renderSelectedItemFrame() {\n    $(\"<div>\").addClass(DATEVIEW_ROLLER_ITEM_SELECTED_FRAME_CLASS).append($(\"<div>\").addClass(DATEVIEW_ROLLER_ITEM_SELECTED_BORDER_CLASS)).appendTo(this._$container);\n  },\n  _renderSelectedValue: function _renderSelectedValue(selectedIndex) {\n    var index = this._fitIndex(selectedIndex || this.option(\"selectedIndex\"));\n\n    this._moveTo({\n      top: this._getItemPosition(index)\n    });\n\n    this._renderActiveStateItem();\n  },\n  _fitIndex: function _fitIndex(index) {\n    var items = this.option(\"items\") || [];\n    var itemCount = items.length;\n\n    if (index >= itemCount) {\n      return itemCount - 1;\n    }\n\n    if (index < 0) {\n      return 0;\n    }\n\n    return index;\n  },\n  _getItemPosition: function _getItemPosition(index) {\n    return Math.round(this._itemHeight() * index);\n  },\n  _renderItemsClick: function _renderItemsClick() {\n    var itemSelector = this._getItemSelector();\n\n    var eventName = eventUtils.addNamespace(clickEvent.name, this.NAME);\n    eventsEngine.off(this.$element(), eventName, itemSelector);\n    eventsEngine.on(this.$element(), eventName, itemSelector, this._itemClickHandler.bind(this));\n  },\n  _getItemSelector: function _getItemSelector() {\n    return \".\" + DATEVIEW_ROLLER_ITEM_CLASS;\n  },\n  _itemClickHandler: function _itemClickHandler(e) {\n    this.option(\"selectedIndex\", this._itemElementIndex(e.currentTarget));\n  },\n  _itemElementIndex: function _itemElementIndex(itemElement) {\n    return this._itemElements().index(itemElement);\n  },\n  _itemElements: function _itemElements() {\n    return this.$element().find(this._getItemSelector());\n  },\n  _renderActiveStateItem: function _renderActiveStateItem() {\n    var selectedIndex = this.option(\"selectedIndex\");\n    each(this._$items, function (index) {\n      $(this).toggleClass(DATEVIEW_ROLLER_ITEM_SELECTED_CLASS, selectedIndex === index);\n    });\n  },\n  _moveTo: function _moveTo(targetLocation) {\n    targetLocation = this._normalizeLocation(targetLocation);\n\n    var location = this._location();\n\n    var delta = {\n      x: -(location.left - targetLocation.left),\n      y: -(location.top - targetLocation.top)\n    };\n\n    if (this._isVisible() && (delta.x || delta.y)) {\n      this._strategy._prepareDirections(true);\n\n      if (this._animation) {\n        var that = this;\n        fx.stop(this._$content);\n        fx.animate(this._$content, {\n          duration: 200,\n          type: \"slide\",\n          to: {\n            top: Math.floor(delta.y)\n          },\n          complete: function complete() {\n            translator.resetPosition(that._$content);\n\n            that._strategy.handleMove({\n              delta: delta\n            });\n          }\n        });\n        delete this._animation;\n      } else {\n        this._strategy.handleMove({\n          delta: delta\n        });\n      }\n    }\n  },\n  _validate: function _validate(e) {\n    return this._strategy.validate(e);\n  },\n  _endActionHandler: function _endActionHandler() {\n    var currentSelectedIndex = this.option(\"selectedIndex\");\n\n    var ratio = -this._location().top / this._itemHeight();\n\n    var newSelectedIndex = Math.round(ratio);\n    this._animation = true;\n\n    if (newSelectedIndex === currentSelectedIndex) {\n      this._renderSelectedValue(newSelectedIndex);\n    } else {\n      this.option(\"selectedIndex\", newSelectedIndex);\n    }\n  },\n  _itemHeight: function _itemHeight() {\n    var $item = this._$items.first();\n\n    return $item.get(0) && $item.get(0).getBoundingClientRect().height || 0;\n  },\n  _toggleActive: function _toggleActive(state) {\n    this.$element().toggleClass(DATEVIEW_ROLLER_ACTIVE_CLASS, state);\n  },\n  _isVisible: function _isVisible() {\n    return this._$container.is(\":visible\");\n  },\n  _fireSelectedIndexChanged: function _fireSelectedIndexChanged(value, previousValue) {\n    this._selectedIndexChanged({\n      value: value,\n      previousValue: previousValue,\n      event: void 0\n    });\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    this.callBase(visible);\n\n    if (visible) {\n      this._renderSelectedValue(this.option(\"selectedIndex\"));\n    }\n\n    this.toggleActiveState(false);\n  },\n  toggleActiveState: function toggleActiveState(state) {\n    this.$element().toggleClass(DATEVIEW_ROLLER_CURRENT_CLASS, state);\n  },\n  _refreshSelectedIndex: function _refreshSelectedIndex() {\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    var fitIndex = this._fitIndex(selectedIndex);\n\n    fitIndex === selectedIndex ? this._renderActiveStateItem() : this.option(\"selectedIndex\", fitIndex);\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"selectedIndex\":\n        this._fireSelectedIndexChanged(args.value, args.previousValue);\n\n        this._renderSelectedValue(args.value);\n\n        break;\n\n      case \"items\":\n        this._renderItems();\n\n        this._refreshSelectedIndex();\n\n        break;\n\n      case \"onClick\":\n      case \"showOnClick\":\n        this._renderContainerClick();\n\n        break;\n\n      case \"onSelectedIndexChanged\":\n        this._renderSelectedIndexChanged();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\nregisterComponent(\"dxDateViewRoller\", DateViewRoller);\nmodule.exports = DateViewRoller;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/date_box/ui.date_view_roller.js"],"names":["$","require","eventsEngine","registerComponent","extend","each","eventUtils","clickEvent","Scrollable","fx","translator","DATEVIEW_ROLLER_CLASS","DATEVIEW_ROLLER_ACTIVE_CLASS","DATEVIEW_ROLLER_CURRENT_CLASS","DATEVIEW_ROLLER_ITEM_CLASS","DATEVIEW_ROLLER_ITEM_SELECTED_CLASS","DATEVIEW_ROLLER_ITEM_SELECTED_FRAME_CLASS","DATEVIEW_ROLLER_ITEM_SELECTED_BORDER_CLASS","DateViewRoller","_getDefaultOptions","showScrollbar","useNative","selectedIndex","bounceEnabled","items","showOnClick","onClick","onSelectedIndexChanged","_defaultOptionsRules","device","platform","options","scrollByContent","_init","_render","_renderSelectedIndexChanged","_renderContainerClick","eventName","clickAction","event","e","_wrapAction","strategy","originalAction","callback","_renderItems","$items","_renderSelectedItemFrame","_renderSelectedValue","index","top","_fitIndex","itemCount","_getItemPosition","Math","_renderItemsClick","itemSelector","_getItemSelector","_itemClickHandler","_itemElementIndex","_itemElements","_renderActiveStateItem","_moveTo","targetLocation","location","delta","x","y","that","duration","type","to","complete","_validate","_endActionHandler","currentSelectedIndex","ratio","newSelectedIndex","_itemHeight","$item","_toggleActive","_isVisible","_fireSelectedIndexChanged","value","previousValue","_visibilityChanged","toggleActiveState","_refreshSelectedIndex","fitIndex","_optionChanged","args","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/date_box/ui.date_view_roller.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar clickEvent = require(\"../../events/click\");\r\nvar Scrollable = require(\"../scroll_view/ui.scrollable\");\r\nvar fx = require(\"../../animation/fx\");\r\nvar translator = require(\"../../animation/translator\");\r\nvar DATEVIEW_ROLLER_CLASS = \"dx-dateviewroller\";\r\nvar DATEVIEW_ROLLER_ACTIVE_CLASS = \"dx-state-active\";\r\nvar DATEVIEW_ROLLER_CURRENT_CLASS = \"dx-dateviewroller-current\";\r\nvar DATEVIEW_ROLLER_ITEM_CLASS = \"dx-dateview-item\";\r\nvar DATEVIEW_ROLLER_ITEM_SELECTED_CLASS = \"dx-dateview-item-selected\";\r\nvar DATEVIEW_ROLLER_ITEM_SELECTED_FRAME_CLASS = \"dx-dateview-item-selected-frame\";\r\nvar DATEVIEW_ROLLER_ITEM_SELECTED_BORDER_CLASS = \"dx-dateview-item-selected-border\";\r\nvar DateViewRoller = Scrollable.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            showScrollbar: false,\r\n            useNative: false,\r\n            selectedIndex: 0,\r\n            bounceEnabled: false,\r\n            items: [],\r\n            showOnClick: false,\r\n            onClick: null,\r\n            onSelectedIndexChanged: null\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: {\r\n                platform: \"generic\"\r\n            },\r\n            options: {\r\n                scrollByContent: true\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._renderSelectedItemFrame()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this.$element().addClass(DATEVIEW_ROLLER_CLASS);\r\n        this._renderContainerClick();\r\n        this._renderItems();\r\n        this._renderSelectedValue();\r\n        this._renderItemsClick();\r\n        this._wrapAction(\"_endAction\", this._endActionHandler.bind(this));\r\n        this._renderSelectedIndexChanged()\r\n    },\r\n    _renderSelectedIndexChanged: function() {\r\n        this._selectedIndexChanged = this._createActionByOption(\"onSelectedIndexChanged\")\r\n    },\r\n    _renderContainerClick: function() {\r\n        if (!this.option(\"showOnClick\")) {\r\n            return\r\n        }\r\n        var eventName = eventUtils.addNamespace(clickEvent.name, this.NAME);\r\n        var clickAction = this._createActionByOption(\"onClick\");\r\n        eventsEngine.off(this._$container, eventName);\r\n        eventsEngine.on(this._$container, eventName, function(e) {\r\n            clickAction({\r\n                event: e\r\n            })\r\n        })\r\n    },\r\n    _wrapAction: function(actionName, callback) {\r\n        var strategy = this._strategy;\r\n        var originalAction = strategy[actionName];\r\n        strategy[actionName] = function() {\r\n            callback.apply(this, arguments);\r\n            return originalAction.apply(this, arguments)\r\n        }\r\n    },\r\n    _renderItems: function() {\r\n        var items = this.option(\"items\") || [];\r\n        var $items = $();\r\n        this._$content.empty();\r\n        items.forEach(function(item) {\r\n            $items = $items.add($(\"<div>\").addClass(DATEVIEW_ROLLER_ITEM_CLASS).append(item))\r\n        });\r\n        this._$content.append($items);\r\n        this._$items = $items;\r\n        this.update()\r\n    },\r\n    _renderSelectedItemFrame: function() {\r\n        $(\"<div>\").addClass(DATEVIEW_ROLLER_ITEM_SELECTED_FRAME_CLASS).append($(\"<div>\").addClass(DATEVIEW_ROLLER_ITEM_SELECTED_BORDER_CLASS)).appendTo(this._$container)\r\n    },\r\n    _renderSelectedValue: function(selectedIndex) {\r\n        var index = this._fitIndex(selectedIndex || this.option(\"selectedIndex\"));\r\n        this._moveTo({\r\n            top: this._getItemPosition(index)\r\n        });\r\n        this._renderActiveStateItem()\r\n    },\r\n    _fitIndex: function(index) {\r\n        var items = this.option(\"items\") || [];\r\n        var itemCount = items.length;\r\n        if (index >= itemCount) {\r\n            return itemCount - 1\r\n        }\r\n        if (index < 0) {\r\n            return 0\r\n        }\r\n        return index\r\n    },\r\n    _getItemPosition: function(index) {\r\n        return Math.round(this._itemHeight() * index)\r\n    },\r\n    _renderItemsClick: function() {\r\n        var itemSelector = this._getItemSelector();\r\n        var eventName = eventUtils.addNamespace(clickEvent.name, this.NAME);\r\n        eventsEngine.off(this.$element(), eventName, itemSelector);\r\n        eventsEngine.on(this.$element(), eventName, itemSelector, this._itemClickHandler.bind(this))\r\n    },\r\n    _getItemSelector: function() {\r\n        return \".\" + DATEVIEW_ROLLER_ITEM_CLASS\r\n    },\r\n    _itemClickHandler: function(e) {\r\n        this.option(\"selectedIndex\", this._itemElementIndex(e.currentTarget))\r\n    },\r\n    _itemElementIndex: function(itemElement) {\r\n        return this._itemElements().index(itemElement)\r\n    },\r\n    _itemElements: function() {\r\n        return this.$element().find(this._getItemSelector())\r\n    },\r\n    _renderActiveStateItem: function() {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        each(this._$items, function(index) {\r\n            $(this).toggleClass(DATEVIEW_ROLLER_ITEM_SELECTED_CLASS, selectedIndex === index)\r\n        })\r\n    },\r\n    _moveTo: function(targetLocation) {\r\n        targetLocation = this._normalizeLocation(targetLocation);\r\n        var location = this._location();\r\n        var delta = {\r\n            x: -(location.left - targetLocation.left),\r\n            y: -(location.top - targetLocation.top)\r\n        };\r\n        if (this._isVisible() && (delta.x || delta.y)) {\r\n            this._strategy._prepareDirections(true);\r\n            if (this._animation) {\r\n                var that = this;\r\n                fx.stop(this._$content);\r\n                fx.animate(this._$content, {\r\n                    duration: 200,\r\n                    type: \"slide\",\r\n                    to: {\r\n                        top: Math.floor(delta.y)\r\n                    },\r\n                    complete: function() {\r\n                        translator.resetPosition(that._$content);\r\n                        that._strategy.handleMove({\r\n                            delta: delta\r\n                        })\r\n                    }\r\n                });\r\n                delete this._animation\r\n            } else {\r\n                this._strategy.handleMove({\r\n                    delta: delta\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _validate: function(e) {\r\n        return this._strategy.validate(e)\r\n    },\r\n    _endActionHandler: function() {\r\n        var currentSelectedIndex = this.option(\"selectedIndex\");\r\n        var ratio = -this._location().top / this._itemHeight();\r\n        var newSelectedIndex = Math.round(ratio);\r\n        this._animation = true;\r\n        if (newSelectedIndex === currentSelectedIndex) {\r\n            this._renderSelectedValue(newSelectedIndex)\r\n        } else {\r\n            this.option(\"selectedIndex\", newSelectedIndex)\r\n        }\r\n    },\r\n    _itemHeight: function() {\r\n        var $item = this._$items.first();\r\n        return $item.get(0) && $item.get(0).getBoundingClientRect().height || 0\r\n    },\r\n    _toggleActive: function(state) {\r\n        this.$element().toggleClass(DATEVIEW_ROLLER_ACTIVE_CLASS, state)\r\n    },\r\n    _isVisible: function() {\r\n        return this._$container.is(\":visible\")\r\n    },\r\n    _fireSelectedIndexChanged: function(value, previousValue) {\r\n        this._selectedIndexChanged({\r\n            value: value,\r\n            previousValue: previousValue,\r\n            event: void 0\r\n        })\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        this.callBase(visible);\r\n        if (visible) {\r\n            this._renderSelectedValue(this.option(\"selectedIndex\"))\r\n        }\r\n        this.toggleActiveState(false)\r\n    },\r\n    toggleActiveState: function(state) {\r\n        this.$element().toggleClass(DATEVIEW_ROLLER_CURRENT_CLASS, state)\r\n    },\r\n    _refreshSelectedIndex: function() {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var fitIndex = this._fitIndex(selectedIndex);\r\n        fitIndex === selectedIndex ? this._renderActiveStateItem() : this.option(\"selectedIndex\", fitIndex)\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"selectedIndex\":\r\n                this._fireSelectedIndexChanged(args.value, args.previousValue);\r\n                this._renderSelectedValue(args.value);\r\n                break;\r\n            case \"items\":\r\n                this._renderItems();\r\n                this._refreshSelectedIndex();\r\n                break;\r\n            case \"onClick\":\r\n            case \"showOnClick\":\r\n                this._renderContainerClick();\r\n                break;\r\n            case \"onSelectedIndexChanged\":\r\n                this._renderSelectedIndexChanged();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nregisterComponent(\"dxDateViewRoller\", DateViewRoller);\r\nmodule.exports = DateViewRoller;\r\n"]},"metadata":{},"sourceType":"module"}