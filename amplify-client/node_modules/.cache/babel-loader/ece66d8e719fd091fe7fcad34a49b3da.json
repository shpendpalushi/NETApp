{"ast":null,"code":"/**\r\n * DevExtreme (ui/collection/ui.collection_widget.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _common2 = _interopRequireDefault(_common);\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _action = require(\"../../core/action\");\n\nvar _action2 = _interopRequireDefault(_action);\n\nvar _guid = require(\"../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _ui = require(\"../widget/ui.widget\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _data_helper = require(\"../../data_helper\");\n\nvar _data_helper2 = _interopRequireDefault(_data_helper);\n\nvar _item = require(\"./item\");\n\nvar _item2 = _interopRequireDefault(_item);\n\nvar _selectors = require(\"../widget/selectors\");\n\nvar _selectors2 = _interopRequireDefault(_selectors);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _hold = require(\"../../events/hold\");\n\nvar _hold2 = _interopRequireDefault(_hold);\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _click = require(\"../../events/click\");\n\nvar _click2 = _interopRequireDefault(_click);\n\nvar _contextmenu = require(\"../../events/contextmenu\");\n\nvar _contextmenu2 = _interopRequireDefault(_contextmenu);\n\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar COLLECTION_CLASS = \"dx-collection\";\nvar ITEM_CLASS = \"dx-item\";\nvar CONTENT_CLASS_POSTFIX = \"-content\";\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\nvar ITEM_DATA_KEY = \"dxItemData\";\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\nvar ITEMS_SELECTOR = \"[data-options*='dxItem']\";\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar FOCUS_PAGE_UP = \"pageup\";\nvar FOCUS_PAGE_DOWN = \"pagedown\";\nvar FOCUS_LAST = \"last\";\nvar FOCUS_FIRST = \"first\";\n\nvar CollectionWidget = _ui2.default.inherit({\n  _activeStateUnit: \".\" + ITEM_CLASS,\n  _supportedKeys: function _supportedKeys() {\n    var enter = function enter(e) {\n      var $itemElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\n\n      if (!$itemElement.length) {\n        return;\n      }\n\n      this._itemClickHandler((0, _extend.extend)({}, e, {\n        target: $itemElement,\n        currentTarget: $itemElement\n      }));\n    };\n\n    var space = function space(e) {\n      e.preventDefault();\n      enter.call(this, e);\n    };\n\n    var move = function move(location, e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      this._moveFocus(location, e);\n    };\n\n    return (0, _extend.extend)(this.callBase(), {\n      space: space,\n      enter: enter,\n      leftArrow: move.bind(this, FOCUS_LEFT),\n      rightArrow: move.bind(this, FOCUS_RIGHT),\n      upArrow: move.bind(this, FOCUS_UP),\n      downArrow: move.bind(this, FOCUS_DOWN),\n      pageUp: move.bind(this, FOCUS_UP),\n      pageDown: move.bind(this, FOCUS_DOWN),\n      home: move.bind(this, FOCUS_FIRST),\n      end: move.bind(this, FOCUS_LAST)\n    });\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      selectOnFocus: false,\n      loopItemFocus: true,\n      items: [],\n      itemTemplate: \"item\",\n      onItemRendered: null,\n      onItemClick: null,\n      onItemHold: null,\n      itemHoldTimeout: 750,\n      onItemContextMenu: null,\n      onFocusedItemChanged: null,\n      noDataText: _message2.default.format(\"dxCollectionWidget-noDataText\"),\n      dataSource: null,\n      _itemAttributes: {},\n      itemTemplateProperty: \"template\",\n      focusOnSelectedItem: true,\n      focusedElement: null,\n      displayExpr: void 0,\n      disabledExpr: function disabledExpr(data) {\n        return data ? data.disabled : void 0;\n      },\n      visibleExpr: function visibleExpr(data) {\n        return data ? data.visible : void 0;\n      }\n    });\n  },\n  _getAnonymousTemplateName: function _getAnonymousTemplateName() {\n    return \"item\";\n  },\n  _init: function _init() {\n    this._compileDisplayGetter();\n\n    this.callBase();\n\n    this._cleanRenderedItems();\n\n    this._refreshDataSource();\n  },\n  _compileDisplayGetter: function _compileDisplayGetter() {\n    var displayExpr = this.option(\"displayExpr\");\n    this._displayGetter = displayExpr ? (0, _data.compileGetter)(this.option(\"displayExpr\")) : void 0;\n  },\n  _initTemplates: function _initTemplates() {\n    this._initItemsFromMarkup();\n\n    this.callBase();\n\n    this._initDefaultItemTemplate();\n  },\n  _initDefaultItemTemplate: function _initDefaultItemTemplate() {\n    var fieldsMap = this._getFieldsMap();\n\n    this._defaultTemplates.item = new _bindable_template.BindableTemplate(function ($container, data) {\n      if ((0, _type.isPlainObject)(data)) {\n        this._prepareDefaultItemTemplate(data, $container);\n      } else {\n        if (fieldsMap && (0, _type.isFunction)(fieldsMap.text)) {\n          data = fieldsMap.text(data);\n        }\n\n        $container.text(String(_common2.default.ensureDefined(data, \"\")));\n      }\n    }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap);\n  },\n  _getBindableFields: function _getBindableFields() {\n    return [\"text\", \"html\"];\n  },\n  _getFieldsMap: function _getFieldsMap() {\n    if (this._displayGetter) {\n      return {\n        text: this._displayGetter\n      };\n    }\n  },\n  _prepareDefaultItemTemplate: function _prepareDefaultItemTemplate(data, $container) {\n    if ((0, _type.isDefined)(data.text)) {\n      $container.text(data.text);\n    }\n\n    if ((0, _type.isDefined)(data.html)) {\n      $container.html(data.html);\n    }\n  },\n  _initItemsFromMarkup: function _initItemsFromMarkup() {\n    var _this = this;\n\n    var $items = this.$element().contents().filter(ITEMS_SELECTOR);\n\n    if (!$items.length || this.option(\"items\").length) {\n      return;\n    }\n\n    var items = [].slice.call($items).map(function (item) {\n      var $item = (0, _renderer2.default)(item);\n      var result = (0, _dom.getElementOptions)(item).dxItem;\n      var isTemplateRequired = $item.html().trim() && !result.template;\n\n      if (isTemplateRequired) {\n        result.template = _this._prepareItemTemplate($item);\n      } else {\n        $item.remove();\n      }\n\n      return result;\n    });\n    this.option(\"items\", items);\n  },\n  _prepareItemTemplate: function _prepareItemTemplate($item) {\n    var templateId = ITEM_TEMPLATE_ID_PREFIX + new _guid2.default();\n    var $template = $item.detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\n\n    this._saveTemplate(templateId, $template);\n\n    return templateId;\n  },\n  _dataSourceOptions: function _dataSourceOptions() {\n    return {\n      paginate: false\n    };\n  },\n  _cleanRenderedItems: function _cleanRenderedItems() {\n    this._renderedItemsCount = 0;\n  },\n  _focusTarget: function _focusTarget() {\n    return this.$element();\n  },\n  _focusInHandler: function _focusInHandler(e) {\n    this.callBase.apply(this, arguments);\n\n    if ((0, _array.inArray)(e.target, this._focusTarget()) === -1) {\n      return;\n    }\n\n    var $focusedElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\n\n    if ($focusedElement.length) {\n      this._setFocusedItem($focusedElement);\n    } else {\n      var $activeItem = this._getActiveItem();\n\n      if ($activeItem.length) {\n        this.option(\"focusedElement\", (0, _dom.getPublicElement)($activeItem));\n      }\n    }\n  },\n  _focusOutHandler: function _focusOutHandler() {\n    this.callBase.apply(this, arguments);\n    var $target = (0, _renderer2.default)(this.option(\"focusedElement\"));\n\n    this._updateFocusedItemState($target, false);\n  },\n  _getActiveItem: function _getActiveItem(last) {\n    var $focusedElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\n\n    if ($focusedElement.length) {\n      return $focusedElement;\n    }\n\n    var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\n\n    var activeElements = this._getActiveElement();\n\n    var lastIndex = activeElements.length - 1;\n\n    if (index < 0) {\n      index = last ? lastIndex : 0;\n    }\n\n    return activeElements.eq(index);\n  },\n  _moveFocus: function _moveFocus(location) {\n    var $items = this._getAvailableItems();\n\n    var $newTarget;\n\n    switch (location) {\n      case FOCUS_PAGE_UP:\n      case FOCUS_UP:\n        $newTarget = this._prevItem($items);\n        break;\n\n      case FOCUS_PAGE_DOWN:\n      case FOCUS_DOWN:\n        $newTarget = this._nextItem($items);\n        break;\n\n      case FOCUS_RIGHT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\n        break;\n\n      case FOCUS_LEFT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\n        break;\n\n      case FOCUS_FIRST:\n        $newTarget = $items.first();\n        break;\n\n      case FOCUS_LAST:\n        $newTarget = $items.last();\n        break;\n\n      default:\n        return false;\n    }\n\n    if (0 !== $newTarget.length) {\n      this.option(\"focusedElement\", (0, _dom.getPublicElement)($newTarget));\n    }\n  },\n  _getVisibleItems: function _getVisibleItems($itemElements) {\n    $itemElements = $itemElements || this._itemElements();\n    return $itemElements.filter(\":visible\");\n  },\n  _getAvailableItems: function _getAvailableItems($itemElements) {\n    return this._getVisibleItems($itemElements).not(\".dx-state-disabled\");\n  },\n  _prevItem: function _prevItem($items) {\n    var $target = this._getActiveItem();\n\n    var targetIndex = $items.index($target);\n    var $last = $items.last();\n    var $item = (0, _renderer2.default)($items[targetIndex - 1]);\n    var loop = this.option(\"loopItemFocus\");\n\n    if (0 === $item.length && loop) {\n      $item = $last;\n    }\n\n    return $item;\n  },\n  _nextItem: function _nextItem($items) {\n    var $target = this._getActiveItem(true);\n\n    var targetIndex = $items.index($target);\n    var $first = $items.first();\n    var $item = (0, _renderer2.default)($items[targetIndex + 1]);\n    var loop = this.option(\"loopItemFocus\");\n\n    if (0 === $item.length && loop) {\n      $item = $first;\n    }\n\n    return $item;\n  },\n  _selectFocusedItem: function _selectFocusedItem($target) {\n    this.selectItem($target);\n  },\n  _updateFocusedItemState: function _updateFocusedItemState(target, isFocused, needCleanItemId) {\n    var $target = (0, _renderer2.default)(target);\n\n    if ($target.length) {\n      this._refreshActiveDescendant();\n\n      this._refreshItemId($target, needCleanItemId);\n\n      this._toggleFocusClass(isFocused, $target);\n    }\n  },\n  _refreshActiveDescendant: function _refreshActiveDescendant($target) {\n    this.setAria(\"activedescendant\", (0, _type.isDefined)(this.option(\"focusedElement\")) ? this.getFocusedItemId() : null, $target);\n  },\n  _refreshItemId: function _refreshItemId($target, needCleanItemId) {\n    if (!needCleanItemId && this.option(\"focusedElement\")) {\n      this.setAria(\"id\", this.getFocusedItemId(), $target);\n    } else {\n      this.setAria(\"id\", null, $target);\n    }\n  },\n  _setFocusedItem: function _setFocusedItem($target) {\n    if (!$target || !$target.length) {\n      return;\n    }\n\n    this._updateFocusedItemState($target, true);\n\n    this.onFocusedItemChanged(this.getFocusedItemId());\n\n    if (this.option(\"selectOnFocus\")) {\n      this._selectFocusedItem($target);\n    }\n  },\n  _findItemElementByItem: function _findItemElementByItem(item) {\n    var result = (0, _renderer2.default)();\n    var that = this;\n    this.itemElements().each(function () {\n      var $item = (0, _renderer2.default)(this);\n\n      if ($item.data(that._itemDataKey()) === item) {\n        result = $item;\n        return false;\n      }\n    });\n    return result;\n  },\n  _getIndexByItem: function _getIndexByItem(item) {\n    return this.option(\"items\").indexOf(item);\n  },\n  _itemOptionChanged: function _itemOptionChanged(item, property, value, oldValue) {\n    var $item = this._findItemElementByItem(item);\n\n    if (!$item.length) {\n      return;\n    }\n\n    if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\n      this._refreshItem($item, item);\n    }\n\n    var isDisabling = \"disabled\" === property && value;\n\n    if (isDisabling) {\n      this._resetItemFocus($item);\n    }\n  },\n  _resetItemFocus: function _resetItemFocus($item) {\n    if ($item.is(this.option(\"focusedElement\"))) {\n      this.option(\"focusedElement\", null);\n    }\n  },\n  _refreshItem: function _refreshItem($item) {\n    var itemData = this._getItemData($item);\n\n    var index = $item.data(this._itemIndexKey());\n\n    this._renderItem(this._renderedItemsCount + index, itemData, null, $item);\n  },\n  _optionChanged: function _optionChanged(args) {\n    if (\"items\" === args.name) {\n      var matches = args.fullName.match(ITEM_PATH_REGEX);\n\n      if (matches && matches.length) {\n        var property = matches[matches.length - 1];\n        var itemPath = args.fullName.replace(\".\" + property, \"\");\n        var item = this.option(itemPath);\n\n        this._itemOptionChanged(item, property, args.value, args.previousValue);\n\n        return;\n      }\n    }\n\n    switch (args.name) {\n      case \"items\":\n      case \"_itemAttributes\":\n      case \"itemTemplateProperty\":\n      case \"showItemDataTitle\":\n        this._cleanRenderedItems();\n\n        this._invalidate();\n\n        break;\n\n      case \"dataSource\":\n        this._refreshDataSource();\n\n        this._renderEmptyMessage();\n\n        break;\n\n      case \"noDataText\":\n        this._renderEmptyMessage();\n\n        break;\n\n      case \"itemTemplate\":\n        this._invalidate();\n\n        break;\n\n      case \"onItemRendered\":\n        this._createItemRenderAction();\n\n        break;\n\n      case \"onItemClick\":\n        break;\n\n      case \"onItemHold\":\n      case \"itemHoldTimeout\":\n        this._attachHoldEvent();\n\n        break;\n\n      case \"onItemContextMenu\":\n        this._attachContextMenuEvent();\n\n        break;\n\n      case \"onFocusedItemChanged\":\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n        break;\n\n      case \"selectOnFocus\":\n      case \"loopItemFocus\":\n      case \"focusOnSelectedItem\":\n        break;\n\n      case \"focusedElement\":\n        this._updateFocusedItemState(args.previousValue, false, true);\n\n        this._setFocusedItem((0, _renderer2.default)(args.value));\n\n        break;\n\n      case \"displayExpr\":\n        this._compileDisplayGetter();\n\n        this._initDefaultItemTemplate();\n\n        this._invalidate();\n\n        break;\n\n      case \"visibleExpr\":\n      case \"disabledExpr\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _invalidate: function _invalidate() {\n    this.option(\"focusedElement\", null);\n    return this.callBase.apply(this, arguments);\n  },\n  _loadNextPage: function _loadNextPage() {\n    var dataSource = this._dataSource;\n\n    this._expectNextPageLoading();\n\n    dataSource.pageIndex(1 + dataSource.pageIndex());\n    return dataSource.load();\n  },\n  _expectNextPageLoading: function _expectNextPageLoading() {\n    this._startIndexForAppendedItems = 0;\n  },\n  _expectLastItemLoading: function _expectLastItemLoading() {\n    this._startIndexForAppendedItems = -1;\n  },\n  _forgetNextPageLoading: function _forgetNextPageLoading() {\n    this._startIndexForAppendedItems = null;\n  },\n  _dataSourceChangedHandler: function _dataSourceChangedHandler(newItems) {\n    var items = this.option(\"items\");\n\n    if (this._initialized && items && this._shouldAppendItems()) {\n      this._renderedItemsCount = items.length;\n\n      if (!this._isLastPage() || this._startIndexForAppendedItems !== -1) {\n        this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems));\n      }\n\n      this._forgetNextPageLoading();\n\n      this._refreshContent();\n    } else {\n      this.option(\"items\", newItems.slice());\n    }\n  },\n  _refreshContent: function _refreshContent() {\n    this._prepareContent();\n\n    this._renderContent();\n  },\n  _dataSourceLoadErrorHandler: function _dataSourceLoadErrorHandler() {\n    this._forgetNextPageLoading();\n\n    this.option(\"items\", this.option(\"items\"));\n  },\n  _shouldAppendItems: function _shouldAppendItems() {\n    return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend();\n  },\n  _allowDynamicItemsAppend: function _allowDynamicItemsAppend() {\n    return false;\n  },\n  _clean: function _clean() {\n    this._cleanFocusState();\n\n    this._cleanItemContainer();\n  },\n  _cleanItemContainer: function _cleanItemContainer() {\n    (0, _renderer2.default)(this._itemContainer()).empty();\n  },\n  _dispose: function _dispose() {\n    this.callBase();\n    clearTimeout(this._itemFocusTimeout);\n  },\n  _refresh: function _refresh() {\n    this._cleanRenderedItems();\n\n    this.callBase.apply(this, arguments);\n  },\n  _itemContainer: function _itemContainer() {\n    return this.$element();\n  },\n  _itemClass: function _itemClass() {\n    return ITEM_CLASS;\n  },\n  _itemContentClass: function _itemContentClass() {\n    return this._itemClass() + CONTENT_CLASS_POSTFIX;\n  },\n  _selectedItemClass: function _selectedItemClass() {\n    return SELECTED_ITEM_CLASS;\n  },\n  _itemResponseWaitClass: function _itemResponseWaitClass() {\n    return ITEM_RESPONSE_WAIT_CLASS;\n  },\n  _itemSelector: function _itemSelector() {\n    return \".\" + this._itemClass();\n  },\n  _itemDataKey: function _itemDataKey() {\n    return ITEM_DATA_KEY;\n  },\n  _itemIndexKey: function _itemIndexKey() {\n    return ITEM_INDEX_KEY;\n  },\n  _itemElements: function _itemElements() {\n    return this._itemContainer().find(this._itemSelector());\n  },\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n    this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n    this.$element().addClass(COLLECTION_CLASS);\n\n    this._prepareContent();\n  },\n  _prepareContent: _common2.default.deferRenderer(function () {\n    this._renderContentImpl();\n  }),\n  _renderContent: function _renderContent() {\n    this._fireContentReadyAction();\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._attachClickEvent();\n\n    this._attachHoldEvent();\n\n    this._attachContextMenuEvent();\n  },\n  _attachClickEvent: function _attachClickEvent() {\n    var itemSelector = this._itemSelector();\n\n    var clickEventNamespace = _utils2.default.addNamespace(_click2.default.name, this.NAME);\n\n    var pointerDownEventNamespace = _utils2.default.addNamespace(_pointer2.default.down, this.NAME);\n\n    var that = this;\n    var pointerDownAction = new _action2.default(function (args) {\n      var event = args.event;\n\n      that._itemPointerDownHandler(event);\n    });\n\n    _events_engine2.default.off(this._itemContainer(), clickEventNamespace, itemSelector);\n\n    _events_engine2.default.off(this._itemContainer(), pointerDownEventNamespace, itemSelector);\n\n    _events_engine2.default.on(this._itemContainer(), clickEventNamespace, itemSelector, function (e) {\n      this._itemClickHandler(e);\n    }.bind(this));\n\n    _events_engine2.default.on(this._itemContainer(), pointerDownEventNamespace, itemSelector, function (e) {\n      pointerDownAction.execute({\n        element: (0, _renderer2.default)(e.target),\n        event: e\n      });\n    });\n  },\n  _itemClickHandler: function _itemClickHandler(e, args, config) {\n    this._itemDXEventHandler(e, \"onItemClick\", args, config);\n  },\n  _itemPointerDownHandler: function _itemPointerDownHandler(e) {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n\n    this._itemFocusHandler = function () {\n      clearTimeout(this._itemFocusTimeout);\n      this._itemFocusHandler = null;\n\n      if (e.isDefaultPrevented()) {\n        return;\n      }\n\n      var $target = (0, _renderer2.default)(e.target);\n      var $closestItem = $target.closest(this._itemElements());\n\n      var $closestFocusable = this._closestFocusable($target);\n\n      if ($closestItem.length && $closestFocusable && (0, _array.inArray)($closestFocusable.get(0), this._focusTarget()) !== -1) {\n        this.option(\"focusedElement\", (0, _dom.getPublicElement)($closestItem));\n      }\n    }.bind(this);\n\n    this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this));\n  },\n  _closestFocusable: function _closestFocusable($target) {\n    if ($target.is(_selectors2.default.focusable)) {\n      return $target;\n    } else {\n      $target = $target.parent();\n\n      while ($target.length && !_dom_adapter2.default.isDocument($target.get(0))) {\n        if ($target.is(_selectors2.default.focusable)) {\n          return $target;\n        }\n\n        $target = $target.parent();\n      }\n    }\n  },\n  _forcePointerDownFocus: function _forcePointerDownFocus() {\n    this._itemFocusHandler && this._itemFocusHandler();\n  },\n  _updateFocusState: function _updateFocusState() {\n    this.callBase.apply(this, arguments);\n\n    this._forcePointerDownFocus();\n  },\n  _attachHoldEvent: function _attachHoldEvent() {\n    var $itemContainer = this._itemContainer();\n\n    var itemSelector = this._itemSelector();\n\n    var eventName = _utils2.default.addNamespace(_hold2.default.name, this.NAME);\n\n    _events_engine2.default.off($itemContainer, eventName, itemSelector);\n\n    _events_engine2.default.on($itemContainer, eventName, itemSelector, {\n      timeout: this._getHoldTimeout()\n    }, this._itemHoldHandler.bind(this));\n  },\n  _getHoldTimeout: function _getHoldTimeout() {\n    return this.option(\"itemHoldTimeout\");\n  },\n  _shouldFireHoldEvent: function _shouldFireHoldEvent() {\n    return this.hasActionSubscription(\"onItemHold\");\n  },\n  _itemHoldHandler: function _itemHoldHandler(e) {\n    if (this._shouldFireHoldEvent()) {\n      this._itemDXEventHandler(e, \"onItemHold\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _attachContextMenuEvent: function _attachContextMenuEvent() {\n    var $itemContainer = this._itemContainer();\n\n    var itemSelector = this._itemSelector();\n\n    var eventName = _utils2.default.addNamespace(_contextmenu2.default.name, this.NAME);\n\n    _events_engine2.default.off($itemContainer, eventName, itemSelector);\n\n    _events_engine2.default.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this));\n  },\n  _shouldFireContextMenuEvent: function _shouldFireContextMenuEvent() {\n    return this.hasActionSubscription(\"onItemContextMenu\");\n  },\n  _itemContextMenuHandler: function _itemContextMenuHandler(e) {\n    if (this._shouldFireContextMenuEvent()) {\n      this._itemDXEventHandler(e, \"onItemContextMenu\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    var items = this.option(\"items\") || [];\n\n    if (this._renderedItemsCount) {\n      this._renderItems(items.slice(this._renderedItemsCount));\n    } else {\n      this._renderItems(items);\n    }\n  },\n  _renderItems: function _renderItems(items) {\n    if (items.length) {\n      _iterator2.default.each(items, function (index, itemData) {\n        this._renderItem(this._renderedItemsCount + index, itemData);\n      }.bind(this));\n    }\n\n    this._renderEmptyMessage();\n  },\n  _renderItem: function _renderItem(index, itemData, $container, $itemToReplace) {\n    $container = $container || this._itemContainer();\n\n    var $itemFrame = this._renderItemFrame(index, itemData, $container, $itemToReplace);\n\n    this._setElementData($itemFrame, itemData, index);\n\n    $itemFrame.attr(this.option(\"_itemAttributes\"));\n\n    this._attachItemClickEvent(itemData, $itemFrame);\n\n    var $itemContent = this._getItemContent($itemFrame);\n\n    var renderContentPromise = this._renderItemContent({\n      index: index,\n      itemData: itemData,\n      container: (0, _dom.getPublicElement)($itemContent),\n      contentClass: this._itemContentClass(),\n      defaultTemplateName: this.option(\"itemTemplate\")\n    });\n\n    var that = this;\n    (0, _deferred.when)(renderContentPromise).done(function ($itemContent) {\n      that._postprocessRenderItem({\n        itemElement: $itemFrame,\n        itemContent: $itemContent,\n        itemData: itemData,\n        itemIndex: index\n      });\n\n      that._executeItemRenderAction(index, itemData, (0, _dom.getPublicElement)($itemFrame));\n    });\n    return $itemFrame;\n  },\n  _getItemContent: function _getItemContent($itemFrame) {\n    var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\n    $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\n    return $itemContent;\n  },\n  _attachItemClickEvent: function _attachItemClickEvent(itemData, $itemElement) {\n    if (!itemData || !itemData.onClick) {\n      return;\n    }\n\n    _events_engine2.default.on($itemElement, _click2.default.name, function (e) {\n      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\n        event: e\n      });\n    }.bind(this));\n  },\n  _renderItemContent: function _renderItemContent(args) {\n    var itemTemplateName = this._getItemTemplateName(args);\n\n    var itemTemplate = this._getTemplate(itemTemplateName);\n\n    this._addItemContentClasses(args);\n\n    var $templateResult = (0, _renderer2.default)(this._createItemByTemplate(itemTemplate, args));\n\n    if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\n      return args.container;\n    }\n\n    return this._renderItemContentByNode(args, $templateResult);\n  },\n  _renderItemContentByNode: function _renderItemContentByNode(args, $node) {\n    (0, _renderer2.default)(args.container).replaceWith($node);\n    args.container = (0, _dom.getPublicElement)($node);\n\n    this._addItemContentClasses(args);\n\n    return $node;\n  },\n  _addItemContentClasses: function _addItemContentClasses(args) {\n    var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\n    (0, _renderer2.default)(args.container).addClass(classes.join(\" \"));\n  },\n  _appendItemToContainer: function _appendItemToContainer($container, $itemFrame, index) {\n    $itemFrame.appendTo($container);\n  },\n  _renderItemFrame: function _renderItemFrame(index, itemData, $container, $itemToReplace) {\n    var $itemFrame = (0, _renderer2.default)(\"<div>\");\n    new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\n\n    if ($itemToReplace && $itemToReplace.length) {\n      $itemToReplace.replaceWith($itemFrame);\n    } else {\n      this._appendItemToContainer.call(this, $container, $itemFrame, index);\n    }\n\n    if (this.option(\"showItemDataTitle\")) {\n      var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\n      $itemFrame.attr(\"title\", displayValue);\n    }\n\n    return $itemFrame;\n  },\n  _itemOptions: function _itemOptions() {\n    var that = this;\n    return {\n      watchMethod: function watchMethod() {\n        return that.option(\"integrationOptions.watchMethod\");\n      },\n      owner: that,\n      fieldGetter: function fieldGetter(field) {\n        var expr = that.option(field + \"Expr\");\n        var getter = (0, _data.compileGetter)(expr);\n        return getter;\n      }\n    };\n  },\n  _postprocessRenderItem: _common2.default.noop,\n  _executeItemRenderAction: function _executeItemRenderAction(index, itemData, itemElement) {\n    this._getItemRenderAction()({\n      itemElement: itemElement,\n      itemIndex: index,\n      itemData: itemData\n    });\n  },\n  _setElementData: function _setElementData(element, data, index) {\n    element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index);\n  },\n  _createItemRenderAction: function _createItemRenderAction() {\n    return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\n      element: this.element(),\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n  },\n  _getItemRenderAction: function _getItemRenderAction() {\n    return this._itemRenderAction || this._createItemRenderAction();\n  },\n  _getItemTemplateName: function _getItemTemplateName(args) {\n    var data = args.itemData;\n    var templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\n    var template = data && data[templateProperty];\n    return template || args.defaultTemplateName;\n  },\n  _createItemByTemplate: function _createItemByTemplate(itemTemplate, renderArgs) {\n    return itemTemplate.render({\n      model: renderArgs.itemData,\n      container: renderArgs.container,\n      index: renderArgs.index\n    });\n  },\n  _emptyMessageContainer: function _emptyMessageContainer() {\n    return this._itemContainer();\n  },\n  _renderEmptyMessage: function _renderEmptyMessage(items) {\n    items = items || this.option(\"items\");\n    var noDataText = this.option(\"noDataText\");\n\n    var hideNoData = !noDataText || items && items.length || this._isDataSourceLoading();\n\n    if (hideNoData && this._$noData) {\n      this._$noData.remove();\n\n      this._$noData = null;\n      this.setAria(\"label\", void 0);\n    }\n\n    if (!hideNoData) {\n      this._$noData = this._$noData || (0, _renderer2.default)(\"<div>\").addClass(\"dx-empty-message\");\n\n      this._$noData.appendTo(this._emptyMessageContainer()).html(noDataText);\n\n      this.setAria(\"label\", noDataText);\n    }\n\n    this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData);\n  },\n  _itemDXEventHandler: function _itemDXEventHandler(dxEvent, handlerOptionName, actionArgs, actionConfig) {\n    this._itemEventHandler(dxEvent.target, handlerOptionName, (0, _extend.extend)(actionArgs, {\n      event: dxEvent\n    }), actionConfig);\n  },\n  _itemEventHandler: function _itemEventHandler(initiator, handlerOptionName, actionArgs, actionConfig) {\n    var action = this._createActionByOption(handlerOptionName, (0, _extend.extend)({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerByHandler: function _itemEventHandlerByHandler(initiator, handler, actionArgs, actionConfig) {\n    var action = this._createAction(handler, (0, _extend.extend)({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerImpl: function _itemEventHandlerImpl(initiator, action, actionArgs) {\n    var $itemElement = this._closestItemElement((0, _renderer2.default)(initiator));\n\n    var args = (0, _extend.extend)({}, actionArgs);\n    return action((0, _extend.extend)(actionArgs, this._extendActionArgs($itemElement), args));\n  },\n  _extendActionArgs: function _extendActionArgs($itemElement) {\n    return {\n      itemElement: (0, _dom.getPublicElement)($itemElement),\n      itemIndex: this._itemElements().index($itemElement),\n      itemData: this._getItemData($itemElement)\n    };\n  },\n  _closestItemElement: function _closestItemElement($element) {\n    return (0, _renderer2.default)($element).closest(this._itemSelector());\n  },\n  _getItemData: function _getItemData(itemElement) {\n    return (0, _renderer2.default)(itemElement).data(this._itemDataKey());\n  },\n  _getSummaryItemsWidth: function _getSummaryItemsWidth(items, includeMargin) {\n    var result = 0;\n\n    if (items) {\n      _iterator2.default.each(items, function (_, item) {\n        result += (0, _renderer2.default)(item).outerWidth(includeMargin || false);\n      });\n    }\n\n    return result;\n  },\n  getFocusedItemId: function getFocusedItemId() {\n    if (!this._focusedItemId) {\n      this._focusedItemId = \"dx-\" + new _guid2.default();\n    }\n\n    return this._focusedItemId;\n  },\n  itemElements: function itemElements() {\n    return this._itemElements();\n  },\n  itemsContainer: function itemsContainer() {\n    return this._itemContainer();\n  }\n}).include(_data_helper2.default);\n\nCollectionWidget.ItemClass = _item2.default;\nmodule.exports = CollectionWidget;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/collection/ui.collection_widget.base.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_common","_common2","_dom","_dom_adapter","_dom_adapter2","_type","_deferred","_extend","_array","_iterator","_iterator2","_action","_action2","_guid","_guid2","_ui","_ui2","_utils","_utils2","_pointer","_pointer2","_data_helper","_data_helper2","_item","_item2","_selectors","_selectors2","_message","_message2","_hold","_hold2","_data","_click","_click2","_contextmenu","_contextmenu2","_bindable_template","obj","COLLECTION_CLASS","ITEM_CLASS","CONTENT_CLASS_POSTFIX","ITEM_CONTENT_PLACEHOLDER_CLASS","ITEM_DATA_KEY","ITEM_INDEX_KEY","ITEM_TEMPLATE_ID_PREFIX","ITEMS_SELECTOR","SELECTED_ITEM_CLASS","ITEM_RESPONSE_WAIT_CLASS","EMPTY_COLLECTION","TEMPLATE_WRAPPER_CLASS","ITEM_PATH_REGEX","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_PAGE_UP","FOCUS_PAGE_DOWN","FOCUS_LAST","FOCUS_FIRST","CollectionWidget","_activeStateUnit","_supportedKeys","enter","$itemElement","target","currentTarget","space","e","move","leftArrow","rightArrow","upArrow","downArrow","pageUp","pageDown","home","end","_getDefaultOptions","selectOnFocus","loopItemFocus","items","itemTemplate","onItemRendered","onItemClick","onItemHold","itemHoldTimeout","onItemContextMenu","onFocusedItemChanged","noDataText","dataSource","_itemAttributes","itemTemplateProperty","focusOnSelectedItem","focusedElement","displayExpr","disabledExpr","data","visibleExpr","_getAnonymousTemplateName","_init","_compileDisplayGetter","_initTemplates","_initDefaultItemTemplate","fieldsMap","$container","String","_getBindableFields","_getFieldsMap","text","_displayGetter","_prepareDefaultItemTemplate","_initItemsFromMarkup","_this","$items","$item","result","isTemplateRequired","_prepareItemTemplate","templateId","$template","_dataSourceOptions","paginate","_cleanRenderedItems","_focusTarget","_focusInHandler","$focusedElement","$activeItem","_focusOutHandler","$target","_getActiveItem","index","activeElements","lastIndex","last","_moveFocus","$newTarget","_getVisibleItems","$itemElements","_getAvailableItems","_prevItem","targetIndex","$last","loop","_nextItem","$first","_selectFocusedItem","_updateFocusedItemState","_refreshActiveDescendant","_refreshItemId","_setFocusedItem","_findItemElementByItem","that","_getIndexByItem","_itemOptionChanged","isDisabling","_resetItemFocus","_refreshItem","itemData","_optionChanged","args","matches","property","itemPath","item","_invalidate","_loadNextPage","_expectNextPageLoading","_expectLastItemLoading","_forgetNextPageLoading","_dataSourceChangedHandler","newItems","_refreshContent","_dataSourceLoadErrorHandler","_shouldAppendItems","_allowDynamicItemsAppend","_clean","_cleanItemContainer","_dispose","clearTimeout","_refresh","_itemContainer","_itemClass","_itemContentClass","_selectedItemClass","_itemResponseWaitClass","_itemSelector","_itemDataKey","_itemIndexKey","_itemElements","_initMarkup","_prepareContent","_renderContent","_render","_attachClickEvent","itemSelector","clickEventNamespace","pointerDownEventNamespace","pointerDownAction","event","element","_itemClickHandler","_itemPointerDownHandler","$closestItem","$closestFocusable","setTimeout","_closestFocusable","_forcePointerDownFocus","_updateFocusState","_attachHoldEvent","$itemContainer","eventName","timeout","_getHoldTimeout","_shouldFireHoldEvent","_itemHoldHandler","_attachContextMenuEvent","_shouldFireContextMenuEvent","_itemContextMenuHandler","_renderContentImpl","_renderItems","_renderItem","$itemFrame","$itemContent","renderContentPromise","container","contentClass","defaultTemplateName","itemElement","itemContent","itemIndex","_getItemContent","_attachItemClickEvent","_renderItemContent","itemTemplateName","$templateResult","_renderItemContentByNode","_addItemContentClasses","classes","_appendItemToContainer","_renderItemFrame","$itemToReplace","displayValue","_itemOptions","watchMethod","owner","fieldGetter","expr","field","getter","_postprocessRenderItem","_executeItemRenderAction","_setElementData","_createItemRenderAction","excludeValidators","category","_getItemRenderAction","_getItemTemplateName","templateProperty","template","_createItemByTemplate","model","renderArgs","_emptyMessageContainer","_renderEmptyMessage","hideNoData","_itemDXEventHandler","dxEvent","_itemEventHandler","action","validatingTargetName","_itemEventHandlerByHandler","_itemEventHandlerImpl","_extendActionArgs","_closestItemElement","_getItemData","_getSummaryItemsWidth","includeMargin","getFocusedItemId","itemElements","itemsContainer","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/collection/ui.collection_widget.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _common2 = _interopRequireDefault(_common);\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _iterator2 = _interopRequireDefault(_iterator);\r\nvar _action = require(\"../../core/action\");\r\nvar _action2 = _interopRequireDefault(_action);\r\nvar _guid = require(\"../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _ui = require(\"../widget/ui.widget\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _data_helper = require(\"../../data_helper\");\r\nvar _data_helper2 = _interopRequireDefault(_data_helper);\r\nvar _item = require(\"./item\");\r\nvar _item2 = _interopRequireDefault(_item);\r\nvar _selectors = require(\"../widget/selectors\");\r\nvar _selectors2 = _interopRequireDefault(_selectors);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _hold = require(\"../../events/hold\");\r\nvar _hold2 = _interopRequireDefault(_hold);\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _click = require(\"../../events/click\");\r\nvar _click2 = _interopRequireDefault(_click);\r\nvar _contextmenu = require(\"../../events/contextmenu\");\r\nvar _contextmenu2 = _interopRequireDefault(_contextmenu);\r\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar COLLECTION_CLASS = \"dx-collection\";\r\nvar ITEM_CLASS = \"dx-item\";\r\nvar CONTENT_CLASS_POSTFIX = \"-content\";\r\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\r\nvar ITEM_DATA_KEY = \"dxItemData\";\r\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\r\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\r\nvar ITEMS_SELECTOR = \"[data-options*='dxItem']\";\r\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\r\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\r\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar FOCUS_PAGE_UP = \"pageup\";\r\nvar FOCUS_PAGE_DOWN = \"pagedown\";\r\nvar FOCUS_LAST = \"last\";\r\nvar FOCUS_FIRST = \"first\";\r\nvar CollectionWidget = _ui2.default.inherit({\r\n    _activeStateUnit: \".\" + ITEM_CLASS,\r\n    _supportedKeys: function() {\r\n        var enter = function(e) {\r\n            var $itemElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\r\n            if (!$itemElement.length) {\r\n                return\r\n            }\r\n            this._itemClickHandler((0, _extend.extend)({}, e, {\r\n                target: $itemElement,\r\n                currentTarget: $itemElement\r\n            }))\r\n        };\r\n        var space = function(e) {\r\n            e.preventDefault();\r\n            enter.call(this, e)\r\n        };\r\n        var move = function(location, e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            this._moveFocus(location, e)\r\n        };\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            space: space,\r\n            enter: enter,\r\n            leftArrow: move.bind(this, FOCUS_LEFT),\r\n            rightArrow: move.bind(this, FOCUS_RIGHT),\r\n            upArrow: move.bind(this, FOCUS_UP),\r\n            downArrow: move.bind(this, FOCUS_DOWN),\r\n            pageUp: move.bind(this, FOCUS_UP),\r\n            pageDown: move.bind(this, FOCUS_DOWN),\r\n            home: move.bind(this, FOCUS_FIRST),\r\n            end: move.bind(this, FOCUS_LAST)\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            selectOnFocus: false,\r\n            loopItemFocus: true,\r\n            items: [],\r\n            itemTemplate: \"item\",\r\n            onItemRendered: null,\r\n            onItemClick: null,\r\n            onItemHold: null,\r\n            itemHoldTimeout: 750,\r\n            onItemContextMenu: null,\r\n            onFocusedItemChanged: null,\r\n            noDataText: _message2.default.format(\"dxCollectionWidget-noDataText\"),\r\n            dataSource: null,\r\n            _itemAttributes: {},\r\n            itemTemplateProperty: \"template\",\r\n            focusOnSelectedItem: true,\r\n            focusedElement: null,\r\n            displayExpr: void 0,\r\n            disabledExpr: function(data) {\r\n                return data ? data.disabled : void 0\r\n            },\r\n            visibleExpr: function(data) {\r\n                return data ? data.visible : void 0\r\n            }\r\n        })\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return \"item\"\r\n    },\r\n    _init: function() {\r\n        this._compileDisplayGetter();\r\n        this.callBase();\r\n        this._cleanRenderedItems();\r\n        this._refreshDataSource()\r\n    },\r\n    _compileDisplayGetter: function() {\r\n        var displayExpr = this.option(\"displayExpr\");\r\n        this._displayGetter = displayExpr ? (0, _data.compileGetter)(this.option(\"displayExpr\")) : void 0\r\n    },\r\n    _initTemplates: function() {\r\n        this._initItemsFromMarkup();\r\n        this.callBase();\r\n        this._initDefaultItemTemplate()\r\n    },\r\n    _initDefaultItemTemplate: function() {\r\n        var fieldsMap = this._getFieldsMap();\r\n        this._defaultTemplates.item = new _bindable_template.BindableTemplate(function($container, data) {\r\n            if ((0, _type.isPlainObject)(data)) {\r\n                this._prepareDefaultItemTemplate(data, $container)\r\n            } else {\r\n                if (fieldsMap && (0, _type.isFunction)(fieldsMap.text)) {\r\n                    data = fieldsMap.text(data)\r\n                }\r\n                $container.text(String(_common2.default.ensureDefined(data, \"\")))\r\n            }\r\n        }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\r\n    },\r\n    _getBindableFields: function() {\r\n        return [\"text\", \"html\"]\r\n    },\r\n    _getFieldsMap: function() {\r\n        if (this._displayGetter) {\r\n            return {\r\n                text: this._displayGetter\r\n            }\r\n        }\r\n    },\r\n    _prepareDefaultItemTemplate: function(data, $container) {\r\n        if ((0, _type.isDefined)(data.text)) {\r\n            $container.text(data.text)\r\n        }\r\n        if ((0, _type.isDefined)(data.html)) {\r\n            $container.html(data.html)\r\n        }\r\n    },\r\n    _initItemsFromMarkup: function() {\r\n        var _this = this;\r\n        var $items = this.$element().contents().filter(ITEMS_SELECTOR);\r\n        if (!$items.length || this.option(\"items\").length) {\r\n            return\r\n        }\r\n        var items = [].slice.call($items).map(function(item) {\r\n            var $item = (0, _renderer2.default)(item);\r\n            var result = (0, _dom.getElementOptions)(item).dxItem;\r\n            var isTemplateRequired = $item.html().trim() && !result.template;\r\n            if (isTemplateRequired) {\r\n                result.template = _this._prepareItemTemplate($item)\r\n            } else {\r\n                $item.remove()\r\n            }\r\n            return result\r\n        });\r\n        this.option(\"items\", items)\r\n    },\r\n    _prepareItemTemplate: function($item) {\r\n        var templateId = ITEM_TEMPLATE_ID_PREFIX + new _guid2.default;\r\n        var $template = $item.detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\r\n        this._saveTemplate(templateId, $template);\r\n        return templateId\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _cleanRenderedItems: function() {\r\n        this._renderedItemsCount = 0\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _focusInHandler: function(e) {\r\n        this.callBase.apply(this, arguments);\r\n        if ((0, _array.inArray)(e.target, this._focusTarget()) === -1) {\r\n            return\r\n        }\r\n        var $focusedElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            this._setFocusedItem($focusedElement)\r\n        } else {\r\n            var $activeItem = this._getActiveItem();\r\n            if ($activeItem.length) {\r\n                this.option(\"focusedElement\", (0, _dom.getPublicElement)($activeItem))\r\n            }\r\n        }\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        var $target = (0, _renderer2.default)(this.option(\"focusedElement\"));\r\n        this._updateFocusedItemState($target, false)\r\n    },\r\n    _getActiveItem: function(last) {\r\n        var $focusedElement = (0, _renderer2.default)(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            return $focusedElement\r\n        }\r\n        var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\r\n        var activeElements = this._getActiveElement();\r\n        var lastIndex = activeElements.length - 1;\r\n        if (index < 0) {\r\n            index = last ? lastIndex : 0\r\n        }\r\n        return activeElements.eq(index)\r\n    },\r\n    _moveFocus: function(location) {\r\n        var $items = this._getAvailableItems();\r\n        var $newTarget;\r\n        switch (location) {\r\n            case FOCUS_PAGE_UP:\r\n            case FOCUS_UP:\r\n                $newTarget = this._prevItem($items);\r\n                break;\r\n            case FOCUS_PAGE_DOWN:\r\n            case FOCUS_DOWN:\r\n                $newTarget = this._nextItem($items);\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\r\n                break;\r\n            case FOCUS_LEFT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\r\n                break;\r\n            case FOCUS_FIRST:\r\n                $newTarget = $items.first();\r\n                break;\r\n            case FOCUS_LAST:\r\n                $newTarget = $items.last();\r\n                break;\r\n            default:\r\n                return false\r\n        }\r\n        if (0 !== $newTarget.length) {\r\n            this.option(\"focusedElement\", (0, _dom.getPublicElement)($newTarget))\r\n        }\r\n    },\r\n    _getVisibleItems: function($itemElements) {\r\n        $itemElements = $itemElements || this._itemElements();\r\n        return $itemElements.filter(\":visible\")\r\n    },\r\n    _getAvailableItems: function($itemElements) {\r\n        return this._getVisibleItems($itemElements).not(\".dx-state-disabled\")\r\n    },\r\n    _prevItem: function($items) {\r\n        var $target = this._getActiveItem();\r\n        var targetIndex = $items.index($target);\r\n        var $last = $items.last();\r\n        var $item = (0, _renderer2.default)($items[targetIndex - 1]);\r\n        var loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $last\r\n        }\r\n        return $item\r\n    },\r\n    _nextItem: function($items) {\r\n        var $target = this._getActiveItem(true);\r\n        var targetIndex = $items.index($target);\r\n        var $first = $items.first();\r\n        var $item = (0, _renderer2.default)($items[targetIndex + 1]);\r\n        var loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $first\r\n        }\r\n        return $item\r\n    },\r\n    _selectFocusedItem: function($target) {\r\n        this.selectItem($target)\r\n    },\r\n    _updateFocusedItemState: function(target, isFocused, needCleanItemId) {\r\n        var $target = (0, _renderer2.default)(target);\r\n        if ($target.length) {\r\n            this._refreshActiveDescendant();\r\n            this._refreshItemId($target, needCleanItemId);\r\n            this._toggleFocusClass(isFocused, $target)\r\n        }\r\n    },\r\n    _refreshActiveDescendant: function($target) {\r\n        this.setAria(\"activedescendant\", (0, _type.isDefined)(this.option(\"focusedElement\")) ? this.getFocusedItemId() : null, $target)\r\n    },\r\n    _refreshItemId: function($target, needCleanItemId) {\r\n        if (!needCleanItemId && this.option(\"focusedElement\")) {\r\n            this.setAria(\"id\", this.getFocusedItemId(), $target)\r\n        } else {\r\n            this.setAria(\"id\", null, $target)\r\n        }\r\n    },\r\n    _setFocusedItem: function($target) {\r\n        if (!$target || !$target.length) {\r\n            return\r\n        }\r\n        this._updateFocusedItemState($target, true);\r\n        this.onFocusedItemChanged(this.getFocusedItemId());\r\n        if (this.option(\"selectOnFocus\")) {\r\n            this._selectFocusedItem($target)\r\n        }\r\n    },\r\n    _findItemElementByItem: function(item) {\r\n        var result = (0, _renderer2.default)();\r\n        var that = this;\r\n        this.itemElements().each(function() {\r\n            var $item = (0, _renderer2.default)(this);\r\n            if ($item.data(that._itemDataKey()) === item) {\r\n                result = $item;\r\n                return false\r\n            }\r\n        });\r\n        return result\r\n    },\r\n    _getIndexByItem: function(item) {\r\n        return this.option(\"items\").indexOf(item)\r\n    },\r\n    _itemOptionChanged: function(item, property, value, oldValue) {\r\n        var $item = this._findItemElementByItem(item);\r\n        if (!$item.length) {\r\n            return\r\n        }\r\n        if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\r\n            this._refreshItem($item, item)\r\n        }\r\n        var isDisabling = \"disabled\" === property && value;\r\n        if (isDisabling) {\r\n            this._resetItemFocus($item)\r\n        }\r\n    },\r\n    _resetItemFocus: function($item) {\r\n        if ($item.is(this.option(\"focusedElement\"))) {\r\n            this.option(\"focusedElement\", null)\r\n        }\r\n    },\r\n    _refreshItem: function($item) {\r\n        var itemData = this._getItemData($item);\r\n        var index = $item.data(this._itemIndexKey());\r\n        this._renderItem(this._renderedItemsCount + index, itemData, null, $item)\r\n    },\r\n    _optionChanged: function(args) {\r\n        if (\"items\" === args.name) {\r\n            var matches = args.fullName.match(ITEM_PATH_REGEX);\r\n            if (matches && matches.length) {\r\n                var property = matches[matches.length - 1];\r\n                var itemPath = args.fullName.replace(\".\" + property, \"\");\r\n                var item = this.option(itemPath);\r\n                this._itemOptionChanged(item, property, args.value, args.previousValue);\r\n                return\r\n            }\r\n        }\r\n        switch (args.name) {\r\n            case \"items\":\r\n            case \"_itemAttributes\":\r\n            case \"itemTemplateProperty\":\r\n            case \"showItemDataTitle\":\r\n                this._cleanRenderedItems();\r\n                this._invalidate();\r\n                break;\r\n            case \"dataSource\":\r\n                this._refreshDataSource();\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"noDataText\":\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"itemTemplate\":\r\n                this._invalidate();\r\n                break;\r\n            case \"onItemRendered\":\r\n                this._createItemRenderAction();\r\n                break;\r\n            case \"onItemClick\":\r\n                break;\r\n            case \"onItemHold\":\r\n            case \"itemHoldTimeout\":\r\n                this._attachHoldEvent();\r\n                break;\r\n            case \"onItemContextMenu\":\r\n                this._attachContextMenuEvent();\r\n                break;\r\n            case \"onFocusedItemChanged\":\r\n                this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n                break;\r\n            case \"selectOnFocus\":\r\n            case \"loopItemFocus\":\r\n            case \"focusOnSelectedItem\":\r\n                break;\r\n            case \"focusedElement\":\r\n                this._updateFocusedItemState(args.previousValue, false, true);\r\n                this._setFocusedItem((0, _renderer2.default)(args.value));\r\n                break;\r\n            case \"displayExpr\":\r\n                this._compileDisplayGetter();\r\n                this._initDefaultItemTemplate();\r\n                this._invalidate();\r\n                break;\r\n            case \"visibleExpr\":\r\n            case \"disabledExpr\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _invalidate: function() {\r\n        this.option(\"focusedElement\", null);\r\n        return this.callBase.apply(this, arguments)\r\n    },\r\n    _loadNextPage: function() {\r\n        var dataSource = this._dataSource;\r\n        this._expectNextPageLoading();\r\n        dataSource.pageIndex(1 + dataSource.pageIndex());\r\n        return dataSource.load()\r\n    },\r\n    _expectNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = 0\r\n    },\r\n    _expectLastItemLoading: function() {\r\n        this._startIndexForAppendedItems = -1\r\n    },\r\n    _forgetNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = null\r\n    },\r\n    _dataSourceChangedHandler: function(newItems) {\r\n        var items = this.option(\"items\");\r\n        if (this._initialized && items && this._shouldAppendItems()) {\r\n            this._renderedItemsCount = items.length;\r\n            if (!this._isLastPage() || this._startIndexForAppendedItems !== -1) {\r\n                this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems))\r\n            }\r\n            this._forgetNextPageLoading();\r\n            this._refreshContent()\r\n        } else {\r\n            this.option(\"items\", newItems.slice())\r\n        }\r\n    },\r\n    _refreshContent: function() {\r\n        this._prepareContent();\r\n        this._renderContent()\r\n    },\r\n    _dataSourceLoadErrorHandler: function() {\r\n        this._forgetNextPageLoading();\r\n        this.option(\"items\", this.option(\"items\"))\r\n    },\r\n    _shouldAppendItems: function() {\r\n        return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend()\r\n    },\r\n    _allowDynamicItemsAppend: function() {\r\n        return false\r\n    },\r\n    _clean: function() {\r\n        this._cleanFocusState();\r\n        this._cleanItemContainer()\r\n    },\r\n    _cleanItemContainer: function() {\r\n        (0, _renderer2.default)(this._itemContainer()).empty()\r\n    },\r\n    _dispose: function() {\r\n        this.callBase();\r\n        clearTimeout(this._itemFocusTimeout)\r\n    },\r\n    _refresh: function() {\r\n        this._cleanRenderedItems();\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _itemContainer: function() {\r\n        return this.$element()\r\n    },\r\n    _itemClass: function() {\r\n        return ITEM_CLASS\r\n    },\r\n    _itemContentClass: function() {\r\n        return this._itemClass() + CONTENT_CLASS_POSTFIX\r\n    },\r\n    _selectedItemClass: function() {\r\n        return SELECTED_ITEM_CLASS\r\n    },\r\n    _itemResponseWaitClass: function() {\r\n        return ITEM_RESPONSE_WAIT_CLASS\r\n    },\r\n    _itemSelector: function() {\r\n        return \".\" + this._itemClass()\r\n    },\r\n    _itemDataKey: function() {\r\n        return ITEM_DATA_KEY\r\n    },\r\n    _itemIndexKey: function() {\r\n        return ITEM_INDEX_KEY\r\n    },\r\n    _itemElements: function() {\r\n        return this._itemContainer().find(this._itemSelector())\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n        this.$element().addClass(COLLECTION_CLASS);\r\n        this._prepareContent()\r\n    },\r\n    _prepareContent: _common2.default.deferRenderer(function() {\r\n        this._renderContentImpl()\r\n    }),\r\n    _renderContent: function() {\r\n        this._fireContentReadyAction()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._attachClickEvent();\r\n        this._attachHoldEvent();\r\n        this._attachContextMenuEvent()\r\n    },\r\n    _attachClickEvent: function() {\r\n        var itemSelector = this._itemSelector();\r\n        var clickEventNamespace = _utils2.default.addNamespace(_click2.default.name, this.NAME);\r\n        var pointerDownEventNamespace = _utils2.default.addNamespace(_pointer2.default.down, this.NAME);\r\n        var that = this;\r\n        var pointerDownAction = new _action2.default(function(args) {\r\n            var event = args.event;\r\n            that._itemPointerDownHandler(event)\r\n        });\r\n        _events_engine2.default.off(this._itemContainer(), clickEventNamespace, itemSelector);\r\n        _events_engine2.default.off(this._itemContainer(), pointerDownEventNamespace, itemSelector);\r\n        _events_engine2.default.on(this._itemContainer(), clickEventNamespace, itemSelector, function(e) {\r\n            this._itemClickHandler(e)\r\n        }.bind(this));\r\n        _events_engine2.default.on(this._itemContainer(), pointerDownEventNamespace, itemSelector, function(e) {\r\n            pointerDownAction.execute({\r\n                element: (0, _renderer2.default)(e.target),\r\n                event: e\r\n            })\r\n        })\r\n    },\r\n    _itemClickHandler: function(e, args, config) {\r\n        this._itemDXEventHandler(e, \"onItemClick\", args, config)\r\n    },\r\n    _itemPointerDownHandler: function(e) {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        this._itemFocusHandler = function() {\r\n            clearTimeout(this._itemFocusTimeout);\r\n            this._itemFocusHandler = null;\r\n            if (e.isDefaultPrevented()) {\r\n                return\r\n            }\r\n            var $target = (0, _renderer2.default)(e.target);\r\n            var $closestItem = $target.closest(this._itemElements());\r\n            var $closestFocusable = this._closestFocusable($target);\r\n            if ($closestItem.length && $closestFocusable && (0, _array.inArray)($closestFocusable.get(0), this._focusTarget()) !== -1) {\r\n                this.option(\"focusedElement\", (0, _dom.getPublicElement)($closestItem))\r\n            }\r\n        }.bind(this);\r\n        this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this))\r\n    },\r\n    _closestFocusable: function($target) {\r\n        if ($target.is(_selectors2.default.focusable)) {\r\n            return $target\r\n        } else {\r\n            $target = $target.parent();\r\n            while ($target.length && !_dom_adapter2.default.isDocument($target.get(0))) {\r\n                if ($target.is(_selectors2.default.focusable)) {\r\n                    return $target\r\n                }\r\n                $target = $target.parent()\r\n            }\r\n        }\r\n    },\r\n    _forcePointerDownFocus: function() {\r\n        this._itemFocusHandler && this._itemFocusHandler()\r\n    },\r\n    _updateFocusState: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._forcePointerDownFocus()\r\n    },\r\n    _attachHoldEvent: function() {\r\n        var $itemContainer = this._itemContainer();\r\n        var itemSelector = this._itemSelector();\r\n        var eventName = _utils2.default.addNamespace(_hold2.default.name, this.NAME);\r\n        _events_engine2.default.off($itemContainer, eventName, itemSelector);\r\n        _events_engine2.default.on($itemContainer, eventName, itemSelector, {\r\n            timeout: this._getHoldTimeout()\r\n        }, this._itemHoldHandler.bind(this))\r\n    },\r\n    _getHoldTimeout: function() {\r\n        return this.option(\"itemHoldTimeout\")\r\n    },\r\n    _shouldFireHoldEvent: function() {\r\n        return this.hasActionSubscription(\"onItemHold\")\r\n    },\r\n    _itemHoldHandler: function(e) {\r\n        if (this._shouldFireHoldEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemHold\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _attachContextMenuEvent: function() {\r\n        var $itemContainer = this._itemContainer();\r\n        var itemSelector = this._itemSelector();\r\n        var eventName = _utils2.default.addNamespace(_contextmenu2.default.name, this.NAME);\r\n        _events_engine2.default.off($itemContainer, eventName, itemSelector);\r\n        _events_engine2.default.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this))\r\n    },\r\n    _shouldFireContextMenuEvent: function() {\r\n        return this.hasActionSubscription(\"onItemContextMenu\")\r\n    },\r\n    _itemContextMenuHandler: function(e) {\r\n        if (this._shouldFireContextMenuEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemContextMenu\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _renderContentImpl: function() {\r\n        var items = this.option(\"items\") || [];\r\n        if (this._renderedItemsCount) {\r\n            this._renderItems(items.slice(this._renderedItemsCount))\r\n        } else {\r\n            this._renderItems(items)\r\n        }\r\n    },\r\n    _renderItems: function(items) {\r\n        if (items.length) {\r\n            _iterator2.default.each(items, function(index, itemData) {\r\n                this._renderItem(this._renderedItemsCount + index, itemData)\r\n            }.bind(this))\r\n        }\r\n        this._renderEmptyMessage()\r\n    },\r\n    _renderItem: function(index, itemData, $container, $itemToReplace) {\r\n        $container = $container || this._itemContainer();\r\n        var $itemFrame = this._renderItemFrame(index, itemData, $container, $itemToReplace);\r\n        this._setElementData($itemFrame, itemData, index);\r\n        $itemFrame.attr(this.option(\"_itemAttributes\"));\r\n        this._attachItemClickEvent(itemData, $itemFrame);\r\n        var $itemContent = this._getItemContent($itemFrame);\r\n        var renderContentPromise = this._renderItemContent({\r\n            index: index,\r\n            itemData: itemData,\r\n            container: (0, _dom.getPublicElement)($itemContent),\r\n            contentClass: this._itemContentClass(),\r\n            defaultTemplateName: this.option(\"itemTemplate\")\r\n        });\r\n        var that = this;\r\n        (0, _deferred.when)(renderContentPromise).done(function($itemContent) {\r\n            that._postprocessRenderItem({\r\n                itemElement: $itemFrame,\r\n                itemContent: $itemContent,\r\n                itemData: itemData,\r\n                itemIndex: index\r\n            });\r\n            that._executeItemRenderAction(index, itemData, (0, _dom.getPublicElement)($itemFrame))\r\n        });\r\n        return $itemFrame\r\n    },\r\n    _getItemContent: function($itemFrame) {\r\n        var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        return $itemContent\r\n    },\r\n    _attachItemClickEvent: function(itemData, $itemElement) {\r\n        if (!itemData || !itemData.onClick) {\r\n            return\r\n        }\r\n        _events_engine2.default.on($itemElement, _click2.default.name, function(e) {\r\n            this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\r\n                event: e\r\n            })\r\n        }.bind(this))\r\n    },\r\n    _renderItemContent: function(args) {\r\n        var itemTemplateName = this._getItemTemplateName(args);\r\n        var itemTemplate = this._getTemplate(itemTemplateName);\r\n        this._addItemContentClasses(args);\r\n        var $templateResult = (0, _renderer2.default)(this._createItemByTemplate(itemTemplate, args));\r\n        if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\r\n            return args.container\r\n        }\r\n        return this._renderItemContentByNode(args, $templateResult)\r\n    },\r\n    _renderItemContentByNode: function(args, $node) {\r\n        (0, _renderer2.default)(args.container).replaceWith($node);\r\n        args.container = (0, _dom.getPublicElement)($node);\r\n        this._addItemContentClasses(args);\r\n        return $node\r\n    },\r\n    _addItemContentClasses: function(args) {\r\n        var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\r\n        (0, _renderer2.default)(args.container).addClass(classes.join(\" \"))\r\n    },\r\n    _appendItemToContainer: function($container, $itemFrame, index) {\r\n        $itemFrame.appendTo($container)\r\n    },\r\n    _renderItemFrame: function(index, itemData, $container, $itemToReplace) {\r\n        var $itemFrame = (0, _renderer2.default)(\"<div>\");\r\n        new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\r\n        if ($itemToReplace && $itemToReplace.length) {\r\n            $itemToReplace.replaceWith($itemFrame)\r\n        } else {\r\n            this._appendItemToContainer.call(this, $container, $itemFrame, index)\r\n        }\r\n        if (this.option(\"showItemDataTitle\")) {\r\n            var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\r\n            $itemFrame.attr(\"title\", displayValue)\r\n        }\r\n        return $itemFrame\r\n    },\r\n    _itemOptions: function() {\r\n        var that = this;\r\n        return {\r\n            watchMethod: function() {\r\n                return that.option(\"integrationOptions.watchMethod\")\r\n            },\r\n            owner: that,\r\n            fieldGetter: function(field) {\r\n                var expr = that.option(field + \"Expr\");\r\n                var getter = (0, _data.compileGetter)(expr);\r\n                return getter\r\n            }\r\n        }\r\n    },\r\n    _postprocessRenderItem: _common2.default.noop,\r\n    _executeItemRenderAction: function(index, itemData, itemElement) {\r\n        this._getItemRenderAction()({\r\n            itemElement: itemElement,\r\n            itemIndex: index,\r\n            itemData: itemData\r\n        })\r\n    },\r\n    _setElementData: function(element, data, index) {\r\n        element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index)\r\n    },\r\n    _createItemRenderAction: function() {\r\n        return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\r\n            element: this.element(),\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        })\r\n    },\r\n    _getItemRenderAction: function() {\r\n        return this._itemRenderAction || this._createItemRenderAction()\r\n    },\r\n    _getItemTemplateName: function(args) {\r\n        var data = args.itemData;\r\n        var templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\r\n        var template = data && data[templateProperty];\r\n        return template || args.defaultTemplateName\r\n    },\r\n    _createItemByTemplate: function(itemTemplate, renderArgs) {\r\n        return itemTemplate.render({\r\n            model: renderArgs.itemData,\r\n            container: renderArgs.container,\r\n            index: renderArgs.index\r\n        })\r\n    },\r\n    _emptyMessageContainer: function() {\r\n        return this._itemContainer()\r\n    },\r\n    _renderEmptyMessage: function(items) {\r\n        items = items || this.option(\"items\");\r\n        var noDataText = this.option(\"noDataText\");\r\n        var hideNoData = !noDataText || items && items.length || this._isDataSourceLoading();\r\n        if (hideNoData && this._$noData) {\r\n            this._$noData.remove();\r\n            this._$noData = null;\r\n            this.setAria(\"label\", void 0)\r\n        }\r\n        if (!hideNoData) {\r\n            this._$noData = this._$noData || (0, _renderer2.default)(\"<div>\").addClass(\"dx-empty-message\");\r\n            this._$noData.appendTo(this._emptyMessageContainer()).html(noDataText);\r\n            this.setAria(\"label\", noDataText)\r\n        }\r\n        this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData)\r\n    },\r\n    _itemDXEventHandler: function(dxEvent, handlerOptionName, actionArgs, actionConfig) {\r\n        this._itemEventHandler(dxEvent.target, handlerOptionName, (0, _extend.extend)(actionArgs, {\r\n            event: dxEvent\r\n        }), actionConfig)\r\n    },\r\n    _itemEventHandler: function(initiator, handlerOptionName, actionArgs, actionConfig) {\r\n        var action = this._createActionByOption(handlerOptionName, (0, _extend.extend)({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerByHandler: function(initiator, handler, actionArgs, actionConfig) {\r\n        var action = this._createAction(handler, (0, _extend.extend)({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerImpl: function(initiator, action, actionArgs) {\r\n        var $itemElement = this._closestItemElement((0, _renderer2.default)(initiator));\r\n        var args = (0, _extend.extend)({}, actionArgs);\r\n        return action((0, _extend.extend)(actionArgs, this._extendActionArgs($itemElement), args))\r\n    },\r\n    _extendActionArgs: function($itemElement) {\r\n        return {\r\n            itemElement: (0, _dom.getPublicElement)($itemElement),\r\n            itemIndex: this._itemElements().index($itemElement),\r\n            itemData: this._getItemData($itemElement)\r\n        }\r\n    },\r\n    _closestItemElement: function($element) {\r\n        return (0, _renderer2.default)($element).closest(this._itemSelector())\r\n    },\r\n    _getItemData: function(itemElement) {\r\n        return (0, _renderer2.default)(itemElement).data(this._itemDataKey())\r\n    },\r\n    _getSummaryItemsWidth: function(items, includeMargin) {\r\n        var result = 0;\r\n        if (items) {\r\n            _iterator2.default.each(items, function(_, item) {\r\n                result += (0, _renderer2.default)(item).outerWidth(includeMargin || false)\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    getFocusedItemId: function() {\r\n        if (!this._focusedItemId) {\r\n            this._focusedItemId = \"dx-\" + new _guid2.default\r\n        }\r\n        return this._focusedItemId\r\n    },\r\n    itemElements: function() {\r\n        return this._itemElements()\r\n    },\r\n    itemsContainer: function() {\r\n        return this._itemContainer()\r\n    }\r\n}).include(_data_helper2.default);\r\nCollectionWidget.ItemClass = _item2.default;\r\nmodule.exports = CollectionWidget;\r\n"]},"metadata":{},"sourceType":"module"}