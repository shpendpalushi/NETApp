{"ast":null,"code":"/**\r\n * DevExtreme (ui/context_menu/ui.context_menu.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _guid = require(\"../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _fx = require(\"../../animation/fx\");\n\nvar _fx2 = _interopRequireDefault(_fx);\n\nvar _position = require(\"../../animation/position\");\n\nvar _devices = require(\"../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _overlay = require(\"../overlay\");\n\nvar _overlay2 = _interopRequireDefault(_overlay);\n\nvar _ui = require(\"./ui.menu_base\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar DX_MENU_CLASS = \"dx-menu\";\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\nvar DX_MENU_PHONE_CLASS = \"dx-menu-phone-overlay\";\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\nvar DX_MENU_ITEM_WRAPPER_CLASS = DX_MENU_ITEM_CLASS + \"-wrapper\";\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\nvar DX_HAS_CONTEXT_MENU_CLASS = \"dx-has-context-menu\";\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\nvar DX_STATE_FOCUSED_CLASS = \"dx-state-focused\";\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar FOCUS_FIRST = \"first\";\nvar FOCUS_LAST = \"last\";\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onSubmenuCreated\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onLeftFirstItem\", \"onLeftLastItem\", \"onCloseRootSubmenu\", \"onExpandLastSubmenu\"];\nvar LOCAL_SUBMENU_DIRECTIONS = [FOCUS_UP, FOCUS_DOWN, FOCUS_FIRST, FOCUS_LAST];\nvar DEFAULT_SHOW_EVENT = \"dxcontextmenu\";\n\nvar ContextMenu = function (_MenuBase) {\n  _inherits(ContextMenu, _MenuBase);\n\n  function ContextMenu() {\n    _classCallCheck(this, ContextMenu);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ContextMenu).apply(this, arguments));\n  }\n\n  _createClass(ContextMenu, [{\n    key: \"getShowEvent\",\n    value: function value(showEventOption) {\n      var result = null;\n\n      if ((0, _type.isObject)(showEventOption)) {\n        if (null !== showEventOption.name) {\n          result = showEventOption.name || DEFAULT_SHOW_EVENT;\n        }\n      } else {\n        result = showEventOption;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"getShowDelay\",\n    value: function value(showEventOption) {\n      return (0, _type.isObject)(showEventOption) && showEventOption.delay;\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(ContextMenu.prototype), \"_getDefaultOptions\", this).call(this), {\n        showEvent: DEFAULT_SHOW_EVENT,\n        closeOnOutsideClick: true,\n        position: {\n          at: \"top left\",\n          my: \"top left\"\n        },\n        onShowing: null,\n        onShown: null,\n        onSubmenuCreated: null,\n        onHiding: null,\n        onHidden: null,\n        onPositioning: null,\n        submenuDirection: \"auto\",\n        visible: false,\n        target: void 0,\n        onLeftFirstItem: null,\n        onLeftLastItem: null,\n        onCloseRootSubmenu: null,\n        onExpandLastSubmenu: null\n      });\n    }\n  }, {\n    key: \"_defaultOptionsRules\",\n    value: function value() {\n      return _get(_getPrototypeOf(ContextMenu.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\n        device: function device() {\n          return !(0, _window.hasWindow)();\n        },\n        options: {\n          animation: null\n        }\n      }]);\n    }\n  }, {\n    key: \"_initActions\",\n    value: function value() {\n      var _this = this;\n\n      this._actions = {};\n      (0, _iterator.each)(ACTIONS, function (index, action) {\n        _this._actions[action] = _this._createActionByOption(action) || _common.noop;\n      });\n    }\n  }, {\n    key: \"_setOptionsByReference\",\n    value: function value() {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_setOptionsByReference\", this).call(this);\n\n      (0, _extend.extend)(this._optionsByReference, {\n        animation: true,\n        selectedItem: true\n      });\n    }\n  }, {\n    key: \"_focusInHandler\",\n    value: function value() {}\n  }, {\n    key: \"_itemContainer\",\n    value: function value() {\n      return this._overlay ? this._overlay.$content() : (0, _renderer2.default)();\n    }\n  }, {\n    key: \"_eventBindingTarget\",\n    value: function value() {\n      return this._itemContainer();\n    }\n  }, {\n    key: \"itemsContainer\",\n    value: function value() {\n      return this._overlay ? this._overlay.$content() : void 0;\n    }\n  }, {\n    key: \"_supportedKeys\",\n    value: function value() {\n      var _this2 = this;\n\n      var selectItem = function selectItem() {\n        var $item = (0, _renderer2.default)(_this2.option(\"focusedElement\"));\n\n        _this2.hide();\n\n        if (!$item.length || !_this2._isSelectionEnabled()) {\n          return;\n        }\n\n        _this2.selectItem($item[0]);\n      };\n\n      return (0, _extend.extend)(_get(_getPrototypeOf(ContextMenu.prototype), \"_supportedKeys\", this).call(this), {\n        space: selectItem,\n        esc: this.hide\n      });\n    }\n  }, {\n    key: \"_getActiveItem\",\n    value: function value() {\n      var $availableItems = this._getAvailableItems();\n\n      var $focusedItem = $availableItems.filter(\".\".concat(DX_STATE_FOCUSED_CLASS));\n      var $hoveredItem = $availableItems.filter(\".\".concat(DX_STATE_HOVER_CLASS));\n      var $hoveredItemContainer = $hoveredItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n\n      if ($hoveredItemContainer.find(\".\".concat(DX_MENU_ITEM_CLASS)).index($focusedItem) >= 0) {\n        return $focusedItem;\n      }\n\n      if ($hoveredItem.length) {\n        return $hoveredItem;\n      }\n\n      return _get(_getPrototypeOf(ContextMenu.prototype), \"_getActiveItem\", this).call(this);\n    }\n  }, {\n    key: \"_moveFocus\",\n    value: function value(location) {\n      var $items = this._getItemsByLocation(location);\n\n      var $oldTarget = this._getActiveItem(true);\n\n      var $hoveredItem = this.itemsContainer().find(\".\".concat(DX_STATE_HOVER_CLASS));\n      var $focusedItem = (0, _renderer2.default)(this.option(\"focusedElement\"));\n      var $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);\n      var $newTarget;\n\n      switch (location) {\n        case FOCUS_UP:\n          $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;\n\n          if ($oldTarget.is($items.first())) {\n            this._actions.onLeftFirstItem($oldTarget);\n          }\n\n          break;\n\n        case FOCUS_DOWN:\n          $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;\n\n          if ($oldTarget.is($items.last())) {\n            this._actions.onLeftLastItem($oldTarget);\n          }\n\n          break;\n\n        case FOCUS_RIGHT:\n          $newTarget = this.option(\"rtlEnabled\") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);\n          break;\n\n        case FOCUS_LEFT:\n          $newTarget = this.option(\"rtlEnabled\") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();\n          break;\n\n        case FOCUS_FIRST:\n          $newTarget = $items.first();\n          break;\n\n        case FOCUS_LAST:\n          $newTarget = $items.last();\n          break;\n\n        default:\n          return _get(_getPrototypeOf(ContextMenu.prototype), \"_moveFocus\", this).call(this, location);\n      }\n\n      if (0 !== $newTarget.length) {\n        this.option(\"focusedElement\", (0, _dom.getPublicElement)($newTarget));\n      }\n    }\n  }, {\n    key: \"_getItemsByLocation\",\n    value: function value(location) {\n      var $activeItem = this._getActiveItem(true);\n\n      var $items;\n\n      if ((0, _array.inArray)(location, LOCAL_SUBMENU_DIRECTIONS) >= 0) {\n        $items = $activeItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).children().children();\n      }\n\n      $items = this._getAvailableItems($items);\n      return $items;\n    }\n  }, {\n    key: \"_getAriaTarget\",\n    value: function value() {\n      return this.$element();\n    }\n  }, {\n    key: \"_refreshActiveDescendant\",\n    value: function value() {\n      if ((0, _type.isDefined)(this._overlay)) {\n        var $target = this._overlay.$content();\n\n        _get(_getPrototypeOf(ContextMenu.prototype), \"_refreshActiveDescendant\", this).call(this, $target);\n      }\n    }\n  }, {\n    key: \"_hideSubmenuHandler\",\n    value: function value() {\n      var $curItem = this._getActiveItem(true);\n\n      var $parentItem = $curItem.parents(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).first();\n\n      if ($parentItem.length) {\n        this._hideSubmenusOnSameLevel($parentItem);\n\n        this._hideSubmenu($curItem.closest(\".\".concat(DX_SUBMENU_CLASS)));\n\n        return $parentItem;\n      }\n\n      this._actions.onCloseRootSubmenu($curItem);\n\n      return $curItem;\n    }\n  }, {\n    key: \"_expandSubmenuHandler\",\n    value: function value($items, location) {\n      var $curItem = this._getActiveItem(true);\n\n      var itemData = this._getItemData($curItem);\n\n      var node = this._dataAdapter.getNodeByItem(itemData);\n\n      var isItemHasSubmenu = this._hasSubmenu(node);\n\n      var $submenu = $curItem.children(\".\".concat(DX_SUBMENU_CLASS));\n\n      if (isItemHasSubmenu && !$curItem.hasClass(DX_STATE_DISABLED_CLASS)) {\n        if (!$submenu.length || \"hidden\" === $submenu.css(\"visibility\")) {\n          this._showSubmenu($curItem);\n        }\n\n        return this._nextItem(this._getItemsByLocation(location));\n      }\n\n      this._actions.onExpandLastSubmenu($curItem);\n\n      return $curItem;\n    }\n  }, {\n    key: \"_clean\",\n    value: function value() {\n      if (this._overlay) {\n        this._overlay.$element().remove();\n\n        this._overlay = null;\n      }\n\n      this._detachShowContextMenuEvents(this._getTarget());\n\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_clean\", this).call(this);\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function value() {\n      this.$element().addClass(DX_HAS_CONTEXT_MENU_CLASS);\n\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_initMarkup\", this).call(this);\n    }\n  }, {\n    key: \"_render\",\n    value: function value() {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_render\", this).call(this);\n\n      this._renderVisibility(this.option(\"visible\"));\n\n      this._addWidgetClass();\n    }\n  }, {\n    key: \"_renderContentImpl\",\n    value: function value() {\n      this._detachShowContextMenuEvents(this._getTarget());\n\n      this._attachShowContextMenuEvents();\n    }\n  }, {\n    key: \"_attachKeyboardEvents\",\n    value: function value() {\n      !this._keyboardProcessor && this._focusTarget().length && _get(_getPrototypeOf(ContextMenu.prototype), \"_attachKeyboardEvents\", this).call(this);\n    }\n  }, {\n    key: \"_renderContextMenuOverlay\",\n    value: function value() {\n      if (this._overlay) {\n        return;\n      }\n\n      var overlayOptions = this._getOverlayOptions();\n\n      this._overlay = this._createComponent((0, _renderer2.default)(\"<div>\").appendTo(this._$element), _overlay2.default, overlayOptions);\n\n      var $overlayContent = this._overlay.$content();\n\n      $overlayContent.addClass(DX_CONTEXT_MENU_CLASS);\n\n      this._addCustomCssClass($overlayContent);\n\n      this._addPlatformDependentClass($overlayContent);\n\n      this._attachContextMenuEvent();\n    }\n  }, {\n    key: \"_itemContextMenuHandler\",\n    value: function value(e) {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_itemContextMenuHandler\", this).call(this, e);\n\n      e.stopPropagation();\n    }\n  }, {\n    key: \"_addPlatformDependentClass\",\n    value: function value($element) {\n      if (_devices2.default.current().phone) {\n        $element.addClass(DX_MENU_PHONE_CLASS);\n      }\n    }\n  }, {\n    key: \"_detachShowContextMenuEvents\",\n    value: function value(target) {\n      var showEvent = this.getShowEvent(this.option(\"showEvent\"));\n\n      if (!showEvent) {\n        return;\n      }\n\n      var eventName = (0, _utils.addNamespace)(showEvent, this.NAME);\n\n      if (this._showContextMenuEventHandler) {\n        _events_engine2.default.off(_dom_adapter2.default.getDocument(), eventName, target, this._showContextMenuEventHandler);\n      } else {\n        _events_engine2.default.off((0, _renderer2.default)(target), eventName);\n      }\n    }\n  }, {\n    key: \"_attachShowContextMenuEvents\",\n    value: function value() {\n      var _this3 = this;\n\n      var target = this._getTarget();\n\n      var showEvent = this.getShowEvent(this.option(\"showEvent\"));\n\n      if (!showEvent) {\n        return;\n      }\n\n      var eventName = (0, _utils.addNamespace)(showEvent, this.NAME);\n\n      var contextMenuAction = this._createAction(function (e) {\n        var delay = _this3.getShowDelay(_this3.option(\"showEvent\"));\n\n        if (delay) {\n          setTimeout(function () {\n            return _this3._show(e.event);\n          }, delay);\n        } else {\n          _this3._show(e.event);\n        }\n      }, {\n        validatingTargetName: \"target\"\n      });\n\n      var handler = function handler(e) {\n        return contextMenuAction({\n          event: e,\n          target: (0, _renderer2.default)(e.currentTarget)\n        });\n      };\n\n      contextMenuAction = this._createAction(contextMenuAction);\n\n      if ((0, _type.isRenderer)(target) || target.nodeType || (0, _type.isWindow)(target)) {\n        this._showContextMenuEventHandler = void 0;\n\n        _events_engine2.default.on(target, eventName, handler);\n      } else {\n        this._showContextMenuEventHandler = handler;\n\n        _events_engine2.default.on(_dom_adapter2.default.getDocument(), eventName, target, this._showContextMenuEventHandler);\n      }\n    }\n  }, {\n    key: \"_hoverEndHandler\",\n    value: function value(e) {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_hoverEndHandler\", this).call(this, e);\n\n      e.stopPropagation();\n    }\n  }, {\n    key: \"_renderDimensions\",\n    value: function value() {}\n  }, {\n    key: \"_renderContainer\",\n    value: function value($wrapper, submenuContainer) {\n      var $holder = submenuContainer || this._itemContainer();\n\n      $wrapper = (0, _renderer2.default)(\"<div>\");\n      $wrapper.appendTo($holder).addClass(DX_SUBMENU_CLASS).css(\"visibility\", submenuContainer ? \"hidden\" : \"visible\");\n\n      var $itemsContainer = _get(_getPrototypeOf(ContextMenu.prototype), \"_renderContainer\", this).call(this, $wrapper);\n\n      if (submenuContainer) {\n        return $itemsContainer;\n      }\n\n      if (this.option(\"width\")) {\n        return $itemsContainer.css(\"minWidth\", this.option(\"width\"));\n      }\n\n      if (this.option(\"height\")) {\n        return $itemsContainer.css(\"minHeight\", this.option(\"height\"));\n      }\n\n      return $itemsContainer;\n    }\n  }, {\n    key: \"_renderSubmenuItems\",\n    value: function value(node, $itemFrame) {\n      this._renderItems(this._getChildNodes(node), $itemFrame);\n\n      this._actions.onSubmenuCreated({\n        itemElement: (0, _dom.getPublicElement)($itemFrame),\n        itemData: node.internalFields.item,\n        submenuElement: (0, _dom.getPublicElement)($itemFrame.children(\".\".concat(DX_SUBMENU_CLASS)))\n      });\n    }\n  }, {\n    key: \"_getOverlayOptions\",\n    value: function value() {\n      var position = this.option(\"position\");\n      var overlayOptions = {\n        focusStateEnabled: this.option(\"focusStateEnabled\"),\n        animation: this.option(\"animation\"),\n        innerOverlay: true,\n        closeOnOutsideClick: this._closeOnOutsideClickHandler.bind(this),\n        propagateOutsideClick: true,\n        closeOnTargetScroll: true,\n        deferRendering: false,\n        position: {\n          at: position.at,\n          my: position.my,\n          of: this._getTarget(),\n          collision: \"flipfit\"\n        },\n        shading: false,\n        showTitle: false,\n        height: \"auto\",\n        width: \"auto\",\n        onShown: this._overlayShownActionHandler.bind(this),\n        onHiding: this._overlayHidingActionHandler.bind(this),\n        onHidden: this._overlayHiddenActionHandler.bind(this)\n      };\n      return overlayOptions;\n    }\n  }, {\n    key: \"_overlayShownActionHandler\",\n    value: function value(arg) {\n      this._actions.onShown(arg);\n    }\n  }, {\n    key: \"_overlayHidingActionHandler\",\n    value: function value(arg) {\n      this._actions.onHiding(arg);\n\n      if (!arg.cancel) {\n        this._hideAllShownSubmenus();\n\n        this._setOptionSilent(\"visible\", false);\n      }\n    }\n  }, {\n    key: \"_overlayHiddenActionHandler\",\n    value: function value(arg) {\n      this._actions.onHidden(arg);\n    }\n  }, {\n    key: \"_closeOnOutsideClickHandler\",\n    value: function value(e) {\n      var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\n\n      if ((0, _type.isFunction)(closeOnOutsideClick)) {\n        return closeOnOutsideClick(e);\n      }\n\n      if (!closeOnOutsideClick) {\n        return false;\n      }\n\n      if (_dom_adapter2.default.isDocument(e.target)) {\n        return true;\n      }\n\n      var $activeItemContainer = this._getActiveItemsContainer(e.target);\n\n      var $itemContainers = this._getItemsContainers();\n\n      var $clickedItem = this._searchActiveItem(e.target);\n\n      var $rootItem = this.$element().parents(\".\".concat(DX_MENU_ITEM_CLASS));\n      var isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;\n      var isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;\n\n      if (isInnerOverlayClicked || isRootItemClicked) {\n        if (\"onClick\" === this._getShowSubmenuMode()) {\n          this._hideAllShownChildSubmenus($clickedItem);\n        }\n\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_getActiveItemsContainer\",\n    value: function value(target) {\n      return (0, _renderer2.default)(target).closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n    }\n  }, {\n    key: \"_getItemsContainers\",\n    value: function value() {\n      return this._overlay._$content.find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n    }\n  }, {\n    key: \"_searchActiveItem\",\n    value: function value(target) {\n      return (0, _renderer2.default)(target).closest(\".\".concat(DX_MENU_ITEM_CLASS)).eq(0);\n    }\n  }, {\n    key: \"_isIncludeOverlay\",\n    value: function value($activeOverlay, $allOverlays) {\n      var isSame = false;\n      (0, _iterator.each)($allOverlays, function (index, $overlay) {\n        if ($activeOverlay.is($overlay) && !isSame) {\n          isSame = true;\n        }\n      });\n      return isSame;\n    }\n  }, {\n    key: \"_hideAllShownChildSubmenus\",\n    value: function value($clickedItem) {\n      var _this4 = this;\n\n      var $submenuElements = $clickedItem.find(\".\".concat(DX_SUBMENU_CLASS));\n      var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\n\n      if ($submenuElements.length > 0) {\n        (0, _iterator.each)(shownSubmenus, function (index, $submenu) {\n          var $context = _this4._searchActiveItem($submenu.context).parent();\n\n          if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {\n            _this4._hideSubmenu($submenu);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_showSubmenu\",\n    value: function value($item) {\n      var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\n\n      this._hideSubmenusOnSameLevel($item);\n\n      if (!this._hasSubmenu(node)) {\n        return;\n      }\n\n      var $submenu = $item.children(\".\".concat(DX_SUBMENU_CLASS));\n      var isSubmenuRendered = $submenu.length;\n\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_showSubmenu\", this).call(this, $item);\n\n      if (!isSubmenuRendered) {\n        this._renderSubmenuItems(node, $item);\n      }\n\n      if (!this._isSubmenuVisible($submenu)) {\n        this._drawSubmenu($item);\n      }\n    }\n  }, {\n    key: \"_hideSubmenusOnSameLevel\",\n    value: function value($item) {\n      var $expandedItems = $item.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS)).siblings().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\n\n      if ($expandedItems.length) {\n        $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n\n        this._hideSubmenu($expandedItems.find(\".\".concat(DX_SUBMENU_CLASS)));\n      }\n    }\n  }, {\n    key: \"_hideSubmenuGroup\",\n    value: function value($submenu) {\n      if (this._isSubmenuVisible($submenu)) {\n        this._hideSubmenuCore($submenu);\n      }\n    }\n  }, {\n    key: \"_isSubmenuVisible\",\n    value: function value($submenu) {\n      return \"visible\" === $submenu.css(\"visibility\");\n    }\n  }, {\n    key: \"_drawSubmenu\",\n    value: function value($itemElement) {\n      var animation = this.option(\"animation\") ? this.option(\"animation\").show : {};\n      var $submenu = $itemElement.children(\".\".concat(DX_SUBMENU_CLASS));\n\n      var submenuPosition = this._getSubmenuPosition($itemElement);\n\n      if (this._overlay && this._overlay.option(\"visible\")) {\n        if (!(0, _type.isDefined)(this._shownSubmenus)) {\n          this._shownSubmenus = [];\n        }\n\n        if ((0, _array.inArray)($submenu, this._shownSubmenus)) {\n          this._shownSubmenus.push($submenu);\n        }\n\n        if (animation) {\n          _fx2.default.stop($submenu);\n        }\n\n        (0, _position.setup)($submenu, submenuPosition);\n\n        if (animation) {\n          if ((0, _type.isPlainObject)(animation.to)) {\n            animation.to.position = submenuPosition;\n          }\n\n          this._animate($submenu, animation);\n        }\n\n        $submenu.css(\"visibility\", \"visible\");\n      }\n    }\n  }, {\n    key: \"_animate\",\n    value: function value($container, options) {\n      _fx2.default.animate($container, options);\n    }\n  }, {\n    key: \"_getSubmenuPosition\",\n    value: function value($rootItem) {\n      var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\n      var $rootItemWrapper = $rootItem.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS));\n      var position = {\n        collision: \"flip\",\n        of: $rootItemWrapper,\n        offset: {\n          h: 0,\n          v: -1\n        }\n      };\n\n      switch (submenuDirection) {\n        case \"left\":\n          position.at = \"left top\";\n          position.my = \"right top\";\n          break;\n\n        case \"right\":\n          position.at = \"right top\";\n          position.my = \"left top\";\n          break;\n\n        default:\n          if (this.option(\"rtlEnabled\")) {\n            position.at = \"left top\";\n            position.my = \"right top\";\n          } else {\n            position.at = \"right top\";\n            position.my = \"left top\";\n          }\n\n      }\n\n      return position;\n    }\n  }, {\n    key: \"_updateSubmenuVisibilityOnClick\",\n    value: function value(actionArgs) {\n      if (!actionArgs.args.length) {\n        return;\n      }\n\n      var itemData = actionArgs.args[0].itemData;\n\n      var node = this._dataAdapter.getNodeByItem(itemData);\n\n      if (!node) {\n        return;\n      }\n\n      var $itemElement = (0, _renderer2.default)(actionArgs.args[0].itemElement);\n      var $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\n      var shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;\n\n      if (shouldRenderSubmenu) {\n        this._renderSubmenuItems(node, $itemElement);\n\n        $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\n      }\n\n      if ($itemElement.context === $submenu.context && \"visible\" === $submenu.css(\"visibility\")) {\n        return;\n      }\n\n      var notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;\n\n      if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {\n        return;\n      }\n\n      this._updateSelectedItemOnClick(actionArgs);\n\n      if (0 === $submenu.length) {\n        var $prevSubmenu = (0, _renderer2.default)($itemElement.parents(\".\".concat(DX_SUBMENU_CLASS))[0]);\n\n        this._hideSubmenu($prevSubmenu);\n\n        if (!actionArgs.canceled && this._overlay && this._overlay.option(\"visible\")) {\n          this.option(\"visible\", false);\n        }\n      } else {\n        if (this._shownSubmenus && this._shownSubmenus.length > 0) {\n          if (this._shownSubmenus[0].is($submenu)) {\n            this._hideSubmenu($submenu);\n          }\n        }\n\n        this._showSubmenu($itemElement);\n      }\n    }\n  }, {\n    key: \"_hideSubmenu\",\n    value: function value($curSubmenu) {\n      var _this5 = this;\n\n      var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\n      (0, _iterator.each)(shownSubmenus, function (index, $submenu) {\n        if ($curSubmenu.is($submenu) || (0, _dom.contains)($curSubmenu[0], $submenu[0])) {\n          $submenu.parent().removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n\n          _this5._hideSubmenuCore($submenu);\n        }\n      });\n    }\n  }, {\n    key: \"_hideSubmenuCore\",\n    value: function value($submenu) {\n      var index = (0, _array.inArray)($submenu, this._shownSubmenus);\n      var animation = this.option(\"animation\") ? this.option(\"animation\").hide : null;\n\n      if (index >= 0) {\n        this._shownSubmenus.splice(index, 1);\n      }\n\n      this._stopAnimate($submenu);\n\n      animation && this._animate($submenu, animation);\n      $submenu.css(\"visibility\", \"hidden\");\n    }\n  }, {\n    key: \"_stopAnimate\",\n    value: function value($container) {\n      _fx2.default.stop($container, true);\n    }\n  }, {\n    key: \"_hideAllShownSubmenus\",\n    value: function value() {\n      var _this6 = this;\n\n      var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\n\n      var $expandedItems = this._overlay.$content().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\n\n      $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n      (0, _iterator.each)(shownSubmenus, function (_, $submenu) {\n        _this6._hideSubmenu($submenu);\n      });\n    }\n  }, {\n    key: \"_visibilityChanged\",\n    value: function value(visible) {\n      if (visible) {\n        this._renderContentImpl();\n      }\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function value(args) {\n      if ((0, _array.inArray)(args.name, ACTIONS) > -1) {\n        this._initActions();\n\n        return;\n      }\n\n      switch (args.name) {\n        case \"visible\":\n          this._renderVisibility(args.value);\n\n          break;\n\n        case \"showEvent\":\n        case \"position\":\n        case \"submenuDirection\":\n          this._invalidate();\n\n          break;\n\n        case \"target\":\n          args.previousValue && this._detachShowContextMenuEvents(args.previousValue);\n\n          this._invalidate();\n\n          break;\n\n        case \"closeOnOutsideClick\":\n          break;\n\n        default:\n          _get(_getPrototypeOf(ContextMenu.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_renderVisibility\",\n    value: function value(showing) {\n      return showing ? this._show() : this._hide();\n    }\n  }, {\n    key: \"_toggleVisibility\",\n    value: function value() {}\n  }, {\n    key: \"_show\",\n    value: function value(event) {\n      var args = {\n        jQEvent: event\n      };\n      var promise = new _deferred.Deferred().reject().promise();\n\n      this._actions.onShowing(args);\n\n      if (args.cancel) {\n        return promise;\n      }\n\n      var position = this._positionContextMenu(event);\n\n      if (position) {\n        if (!this._overlay) {\n          this._renderContextMenuOverlay();\n\n          this._overlay.$content().addClass(this._widgetClass());\n\n          this._renderFocusState();\n\n          this._attachHoverEvents();\n\n          this._attachClickEvent();\n\n          this._renderItems(this._dataAdapter.getRootNodes());\n        }\n\n        this._setOptionSilent(\"visible\", true);\n\n        this._overlay.option(\"position\", position);\n\n        promise = this._overlay.show();\n        event && event.stopPropagation();\n\n        this._setAriaAttributes();\n      }\n\n      return promise;\n    }\n  }, {\n    key: \"_setAriaAttributes\",\n    value: function value() {\n      this._overlayContentId = \"dx-\".concat(new _guid2.default());\n      this.setAria(\"owns\", this._overlayContentId);\n      this.setAria({\n        id: this._overlayContentId,\n        role: \"menu\"\n      }, this._overlay.$content());\n    }\n  }, {\n    key: \"_cleanAriaAttributes\",\n    value: function value() {\n      this._overlay && this.setAria(\"id\", null, this._overlay.$content());\n      this.setAria(\"owns\", void 0);\n    }\n  }, {\n    key: \"_getTarget\",\n    value: function value() {\n      return this.option(\"target\") || this.option(\"position\").of || (0, _renderer2.default)(_dom_adapter2.default.getDocument());\n    }\n  }, {\n    key: \"_getContextMenuPosition\",\n    value: function value() {\n      return (0, _extend.extend)({}, this.option(\"position\"), {\n        of: this._getTarget()\n      });\n    }\n  }, {\n    key: \"_positionContextMenu\",\n    value: function value(jQEvent) {\n      var position = this._getContextMenuPosition();\n\n      var isInitialPosition = this._isInitialOptionValue(\"position\");\n\n      var positioningAction = this._createActionByOption(\"onPositioning\", actionArgs);\n\n      if (jQEvent && jQEvent.preventDefault && isInitialPosition) {\n        position.of = jQEvent;\n      }\n\n      var actionArgs = {\n        position: position,\n        event: jQEvent\n      };\n      positioningAction(actionArgs);\n\n      if (actionArgs.cancel) {\n        position = null;\n      } else {\n        if (actionArgs.event) {\n          actionArgs.event.cancel = true;\n          jQEvent.preventDefault();\n        }\n      }\n\n      return position;\n    }\n  }, {\n    key: \"_refresh\",\n    value: function value() {\n      if (!(0, _window.hasWindow)()) {\n        _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\n      } else {\n        if (this._overlay) {\n          var lastPosition = this._overlay.option(\"position\");\n\n          _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\n\n          this._overlay && this._overlay.option(\"position\", lastPosition);\n        } else {\n          _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\n        }\n      }\n    }\n  }, {\n    key: \"_hide\",\n    value: function value() {\n      var promise;\n\n      if (this._overlay) {\n        promise = this._overlay.hide();\n\n        this._setOptionSilent(\"visible\", false);\n      }\n\n      this._cleanAriaAttributes();\n\n      this.option(\"focusedElement\", null);\n      return promise || new _deferred.Deferred().reject().promise();\n    }\n  }, {\n    key: \"toggle\",\n    value: function value(showing) {\n      var visible = this.option(\"visible\");\n      showing = void 0 === showing ? !visible : showing;\n      return this._renderVisibility(showing);\n    }\n  }, {\n    key: \"show\",\n    value: function value() {\n      return this.toggle(true);\n    }\n  }, {\n    key: \"hide\",\n    value: function value() {\n      return this.toggle(false);\n    }\n  }]);\n\n  return ContextMenu;\n}(_ui2.default);\n\n(0, _component_registrator2.default)(\"dxContextMenu\", ContextMenu);\nmodule.exports = ContextMenu;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/context_menu/ui.context_menu.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_dom_adapter","_dom_adapter2","_events_engine","_events_engine2","_guid","_guid2","_component_registrator","_component_registrator2","_common","_type","_dom","_iterator","_array","_extend","_window","_fx","_fx2","_position","_devices","_devices2","_utils","_overlay","_overlay2","_ui","_ui2","_deferred","obj","Symbol","_typeof","instance","i","props","descriptor","Object","_defineProperties","Constructor","call","_assertThisInitialized","Reflect","_get","base","_superPropBase","desc","receiver","object","_getPrototypeOf","o","subClass","superClass","constructor","value","writable","configurable","_setPrototypeOf","DX_MENU_CLASS","DX_MENU_ITEM_CLASS","DX_MENU_ITEM_EXPANDED_CLASS","DX_MENU_PHONE_CLASS","DX_MENU_ITEMS_CONTAINER_CLASS","DX_MENU_ITEM_WRAPPER_CLASS","DX_SUBMENU_CLASS","DX_CONTEXT_MENU_CLASS","DX_HAS_CONTEXT_MENU_CLASS","DX_STATE_DISABLED_CLASS","DX_STATE_FOCUSED_CLASS","DX_STATE_HOVER_CLASS","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_FIRST","FOCUS_LAST","ACTIONS","LOCAL_SUBMENU_DIRECTIONS","DEFAULT_SHOW_EVENT","ContextMenu","_inherits","_classCallCheck","_possibleConstructorReturn","_createClass","key","result","showEventOption","showEvent","closeOnOutsideClick","position","at","my","onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","submenuDirection","visible","target","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu","device","options","animation","_this","selectedItem","_this2","selectItem","$item","space","esc","hide","$availableItems","$focusedItem","$hoveredItem","$hoveredItemContainer","$items","$oldTarget","$activeItemHighlighted","$newTarget","$activeItem","$target","$curItem","$parentItem","itemData","node","isItemHasSubmenu","$submenu","overlayOptions","$overlayContent","e","$element","eventName","_this3","contextMenuAction","delay","setTimeout","validatingTargetName","handler","event","$holder","submenuContainer","$wrapper","$itemsContainer","itemElement","submenuElement","$itemFrame","focusStateEnabled","innerOverlay","propagateOutsideClick","closeOnTargetScroll","deferRendering","of","collision","shading","showTitle","height","width","arg","$activeItemContainer","$itemContainers","$clickedItem","$rootItem","isRootItemClicked","isInnerOverlayClicked","isSame","$activeOverlay","_this4","$submenuElements","shownSubmenus","$context","isSubmenuRendered","$expandedItems","$itemElement","submenuPosition","$rootItemWrapper","offset","h","v","actionArgs","shouldRenderSubmenu","notCloseMenuOnItemClick","$prevSubmenu","_this5","$curSubmenu","index","_this6","args","showing","jQEvent","promise","id","role","isInitialPosition","positioningAction","lastPosition","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/context_menu/ui.context_menu.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _guid = require(\"../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _fx = require(\"../../animation/fx\");\r\nvar _fx2 = _interopRequireDefault(_fx);\r\nvar _position = require(\"../../animation/position\");\r\nvar _devices = require(\"../../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _overlay = require(\"../overlay\");\r\nvar _overlay2 = _interopRequireDefault(_overlay);\r\nvar _ui = require(\"./ui.menu_base\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar DX_MENU_CLASS = \"dx-menu\";\r\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\r\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\r\nvar DX_MENU_PHONE_CLASS = \"dx-menu-phone-overlay\";\r\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\r\nvar DX_MENU_ITEM_WRAPPER_CLASS = DX_MENU_ITEM_CLASS + \"-wrapper\";\r\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\r\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\r\nvar DX_HAS_CONTEXT_MENU_CLASS = \"dx-has-context-menu\";\r\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\r\nvar DX_STATE_FOCUSED_CLASS = \"dx-state-focused\";\r\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar FOCUS_FIRST = \"first\";\r\nvar FOCUS_LAST = \"last\";\r\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onSubmenuCreated\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onLeftFirstItem\", \"onLeftLastItem\", \"onCloseRootSubmenu\", \"onExpandLastSubmenu\"];\r\nvar LOCAL_SUBMENU_DIRECTIONS = [FOCUS_UP, FOCUS_DOWN, FOCUS_FIRST, FOCUS_LAST];\r\nvar DEFAULT_SHOW_EVENT = \"dxcontextmenu\";\r\nvar ContextMenu = function(_MenuBase) {\r\n    _inherits(ContextMenu, _MenuBase);\r\n\r\n    function ContextMenu() {\r\n        _classCallCheck(this, ContextMenu);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(ContextMenu).apply(this, arguments))\r\n    }\r\n    _createClass(ContextMenu, [{\r\n        key: \"getShowEvent\",\r\n        value: function(showEventOption) {\r\n            var result = null;\r\n            if ((0, _type.isObject)(showEventOption)) {\r\n                if (null !== showEventOption.name) {\r\n                    result = showEventOption.name || DEFAULT_SHOW_EVENT\r\n                }\r\n            } else {\r\n                result = showEventOption\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"getShowDelay\",\r\n        value: function(showEventOption) {\r\n            return (0, _type.isObject)(showEventOption) && showEventOption.delay\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(ContextMenu.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                showEvent: DEFAULT_SHOW_EVENT,\r\n                closeOnOutsideClick: true,\r\n                position: {\r\n                    at: \"top left\",\r\n                    my: \"top left\"\r\n                },\r\n                onShowing: null,\r\n                onShown: null,\r\n                onSubmenuCreated: null,\r\n                onHiding: null,\r\n                onHidden: null,\r\n                onPositioning: null,\r\n                submenuDirection: \"auto\",\r\n                visible: false,\r\n                target: void 0,\r\n                onLeftFirstItem: null,\r\n                onLeftLastItem: null,\r\n                onCloseRootSubmenu: null,\r\n                onExpandLastSubmenu: null\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_defaultOptionsRules\",\r\n        value: function() {\r\n            return _get(_getPrototypeOf(ContextMenu.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\r\n                device: function() {\r\n                    return !(0, _window.hasWindow)()\r\n                },\r\n                options: {\r\n                    animation: null\r\n                }\r\n            }])\r\n        }\r\n    }, {\r\n        key: \"_initActions\",\r\n        value: function() {\r\n            var _this = this;\r\n            this._actions = {};\r\n            (0, _iterator.each)(ACTIONS, function(index, action) {\r\n                _this._actions[action] = _this._createActionByOption(action) || _common.noop\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_setOptionsByReference\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_setOptionsByReference\", this).call(this);\r\n            (0, _extend.extend)(this._optionsByReference, {\r\n                animation: true,\r\n                selectedItem: true\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_focusInHandler\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_itemContainer\",\r\n        value: function() {\r\n            return this._overlay ? this._overlay.$content() : (0, _renderer2.default)()\r\n        }\r\n    }, {\r\n        key: \"_eventBindingTarget\",\r\n        value: function() {\r\n            return this._itemContainer()\r\n        }\r\n    }, {\r\n        key: \"itemsContainer\",\r\n        value: function() {\r\n            return this._overlay ? this._overlay.$content() : void 0\r\n        }\r\n    }, {\r\n        key: \"_supportedKeys\",\r\n        value: function() {\r\n            var _this2 = this;\r\n            var selectItem = function() {\r\n                var $item = (0, _renderer2.default)(_this2.option(\"focusedElement\"));\r\n                _this2.hide();\r\n                if (!$item.length || !_this2._isSelectionEnabled()) {\r\n                    return\r\n                }\r\n                _this2.selectItem($item[0])\r\n            };\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(ContextMenu.prototype), \"_supportedKeys\", this).call(this), {\r\n                space: selectItem,\r\n                esc: this.hide\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getActiveItem\",\r\n        value: function() {\r\n            var $availableItems = this._getAvailableItems();\r\n            var $focusedItem = $availableItems.filter(\".\".concat(DX_STATE_FOCUSED_CLASS));\r\n            var $hoveredItem = $availableItems.filter(\".\".concat(DX_STATE_HOVER_CLASS));\r\n            var $hoveredItemContainer = $hoveredItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\r\n            if ($hoveredItemContainer.find(\".\".concat(DX_MENU_ITEM_CLASS)).index($focusedItem) >= 0) {\r\n                return $focusedItem\r\n            }\r\n            if ($hoveredItem.length) {\r\n                return $hoveredItem\r\n            }\r\n            return _get(_getPrototypeOf(ContextMenu.prototype), \"_getActiveItem\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_moveFocus\",\r\n        value: function(location) {\r\n            var $items = this._getItemsByLocation(location);\r\n            var $oldTarget = this._getActiveItem(true);\r\n            var $hoveredItem = this.itemsContainer().find(\".\".concat(DX_STATE_HOVER_CLASS));\r\n            var $focusedItem = (0, _renderer2.default)(this.option(\"focusedElement\"));\r\n            var $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);\r\n            var $newTarget;\r\n            switch (location) {\r\n                case FOCUS_UP:\r\n                    $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;\r\n                    if ($oldTarget.is($items.first())) {\r\n                        this._actions.onLeftFirstItem($oldTarget)\r\n                    }\r\n                    break;\r\n                case FOCUS_DOWN:\r\n                    $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;\r\n                    if ($oldTarget.is($items.last())) {\r\n                        this._actions.onLeftLastItem($oldTarget)\r\n                    }\r\n                    break;\r\n                case FOCUS_RIGHT:\r\n                    $newTarget = this.option(\"rtlEnabled\") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);\r\n                    break;\r\n                case FOCUS_LEFT:\r\n                    $newTarget = this.option(\"rtlEnabled\") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();\r\n                    break;\r\n                case FOCUS_FIRST:\r\n                    $newTarget = $items.first();\r\n                    break;\r\n                case FOCUS_LAST:\r\n                    $newTarget = $items.last();\r\n                    break;\r\n                default:\r\n                    return _get(_getPrototypeOf(ContextMenu.prototype), \"_moveFocus\", this).call(this, location)\r\n            }\r\n            if (0 !== $newTarget.length) {\r\n                this.option(\"focusedElement\", (0, _dom.getPublicElement)($newTarget))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getItemsByLocation\",\r\n        value: function(location) {\r\n            var $activeItem = this._getActiveItem(true);\r\n            var $items;\r\n            if ((0, _array.inArray)(location, LOCAL_SUBMENU_DIRECTIONS) >= 0) {\r\n                $items = $activeItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).children().children()\r\n            }\r\n            $items = this._getAvailableItems($items);\r\n            return $items\r\n        }\r\n    }, {\r\n        key: \"_getAriaTarget\",\r\n        value: function() {\r\n            return this.$element()\r\n        }\r\n    }, {\r\n        key: \"_refreshActiveDescendant\",\r\n        value: function() {\r\n            if ((0, _type.isDefined)(this._overlay)) {\r\n                var $target = this._overlay.$content();\r\n                _get(_getPrototypeOf(ContextMenu.prototype), \"_refreshActiveDescendant\", this).call(this, $target)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hideSubmenuHandler\",\r\n        value: function() {\r\n            var $curItem = this._getActiveItem(true);\r\n            var $parentItem = $curItem.parents(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).first();\r\n            if ($parentItem.length) {\r\n                this._hideSubmenusOnSameLevel($parentItem);\r\n                this._hideSubmenu($curItem.closest(\".\".concat(DX_SUBMENU_CLASS)));\r\n                return $parentItem\r\n            }\r\n            this._actions.onCloseRootSubmenu($curItem);\r\n            return $curItem\r\n        }\r\n    }, {\r\n        key: \"_expandSubmenuHandler\",\r\n        value: function($items, location) {\r\n            var $curItem = this._getActiveItem(true);\r\n            var itemData = this._getItemData($curItem);\r\n            var node = this._dataAdapter.getNodeByItem(itemData);\r\n            var isItemHasSubmenu = this._hasSubmenu(node);\r\n            var $submenu = $curItem.children(\".\".concat(DX_SUBMENU_CLASS));\r\n            if (isItemHasSubmenu && !$curItem.hasClass(DX_STATE_DISABLED_CLASS)) {\r\n                if (!$submenu.length || \"hidden\" === $submenu.css(\"visibility\")) {\r\n                    this._showSubmenu($curItem)\r\n                }\r\n                return this._nextItem(this._getItemsByLocation(location))\r\n            }\r\n            this._actions.onExpandLastSubmenu($curItem);\r\n            return $curItem\r\n        }\r\n    }, {\r\n        key: \"_clean\",\r\n        value: function() {\r\n            if (this._overlay) {\r\n                this._overlay.$element().remove();\r\n                this._overlay = null\r\n            }\r\n            this._detachShowContextMenuEvents(this._getTarget());\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_clean\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            this.$element().addClass(DX_HAS_CONTEXT_MENU_CLASS);\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_initMarkup\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_render\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_render\", this).call(this);\r\n            this._renderVisibility(this.option(\"visible\"));\r\n            this._addWidgetClass()\r\n        }\r\n    }, {\r\n        key: \"_renderContentImpl\",\r\n        value: function() {\r\n            this._detachShowContextMenuEvents(this._getTarget());\r\n            this._attachShowContextMenuEvents()\r\n        }\r\n    }, {\r\n        key: \"_attachKeyboardEvents\",\r\n        value: function() {\r\n            !this._keyboardProcessor && this._focusTarget().length && _get(_getPrototypeOf(ContextMenu.prototype), \"_attachKeyboardEvents\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_renderContextMenuOverlay\",\r\n        value: function() {\r\n            if (this._overlay) {\r\n                return\r\n            }\r\n            var overlayOptions = this._getOverlayOptions();\r\n            this._overlay = this._createComponent((0, _renderer2.default)(\"<div>\").appendTo(this._$element), _overlay2.default, overlayOptions);\r\n            var $overlayContent = this._overlay.$content();\r\n            $overlayContent.addClass(DX_CONTEXT_MENU_CLASS);\r\n            this._addCustomCssClass($overlayContent);\r\n            this._addPlatformDependentClass($overlayContent);\r\n            this._attachContextMenuEvent()\r\n        }\r\n    }, {\r\n        key: \"_itemContextMenuHandler\",\r\n        value: function(e) {\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_itemContextMenuHandler\", this).call(this, e);\r\n            e.stopPropagation()\r\n        }\r\n    }, {\r\n        key: \"_addPlatformDependentClass\",\r\n        value: function($element) {\r\n            if (_devices2.default.current().phone) {\r\n                $element.addClass(DX_MENU_PHONE_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_detachShowContextMenuEvents\",\r\n        value: function(target) {\r\n            var showEvent = this.getShowEvent(this.option(\"showEvent\"));\r\n            if (!showEvent) {\r\n                return\r\n            }\r\n            var eventName = (0, _utils.addNamespace)(showEvent, this.NAME);\r\n            if (this._showContextMenuEventHandler) {\r\n                _events_engine2.default.off(_dom_adapter2.default.getDocument(), eventName, target, this._showContextMenuEventHandler)\r\n            } else {\r\n                _events_engine2.default.off((0, _renderer2.default)(target), eventName)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_attachShowContextMenuEvents\",\r\n        value: function() {\r\n            var _this3 = this;\r\n            var target = this._getTarget();\r\n            var showEvent = this.getShowEvent(this.option(\"showEvent\"));\r\n            if (!showEvent) {\r\n                return\r\n            }\r\n            var eventName = (0, _utils.addNamespace)(showEvent, this.NAME);\r\n            var contextMenuAction = this._createAction(function(e) {\r\n                var delay = _this3.getShowDelay(_this3.option(\"showEvent\"));\r\n                if (delay) {\r\n                    setTimeout(function() {\r\n                        return _this3._show(e.event)\r\n                    }, delay)\r\n                } else {\r\n                    _this3._show(e.event)\r\n                }\r\n            }, {\r\n                validatingTargetName: \"target\"\r\n            });\r\n            var handler = function(e) {\r\n                return contextMenuAction({\r\n                    event: e,\r\n                    target: (0, _renderer2.default)(e.currentTarget)\r\n                })\r\n            };\r\n            contextMenuAction = this._createAction(contextMenuAction);\r\n            if ((0, _type.isRenderer)(target) || target.nodeType || (0, _type.isWindow)(target)) {\r\n                this._showContextMenuEventHandler = void 0;\r\n                _events_engine2.default.on(target, eventName, handler)\r\n            } else {\r\n                this._showContextMenuEventHandler = handler;\r\n                _events_engine2.default.on(_dom_adapter2.default.getDocument(), eventName, target, this._showContextMenuEventHandler)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hoverEndHandler\",\r\n        value: function(e) {\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_hoverEndHandler\", this).call(this, e);\r\n            e.stopPropagation()\r\n        }\r\n    }, {\r\n        key: \"_renderDimensions\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_renderContainer\",\r\n        value: function($wrapper, submenuContainer) {\r\n            var $holder = submenuContainer || this._itemContainer();\r\n            $wrapper = (0, _renderer2.default)(\"<div>\");\r\n            $wrapper.appendTo($holder).addClass(DX_SUBMENU_CLASS).css(\"visibility\", submenuContainer ? \"hidden\" : \"visible\");\r\n            var $itemsContainer = _get(_getPrototypeOf(ContextMenu.prototype), \"_renderContainer\", this).call(this, $wrapper);\r\n            if (submenuContainer) {\r\n                return $itemsContainer\r\n            }\r\n            if (this.option(\"width\")) {\r\n                return $itemsContainer.css(\"minWidth\", this.option(\"width\"))\r\n            }\r\n            if (this.option(\"height\")) {\r\n                return $itemsContainer.css(\"minHeight\", this.option(\"height\"))\r\n            }\r\n            return $itemsContainer\r\n        }\r\n    }, {\r\n        key: \"_renderSubmenuItems\",\r\n        value: function(node, $itemFrame) {\r\n            this._renderItems(this._getChildNodes(node), $itemFrame);\r\n            this._actions.onSubmenuCreated({\r\n                itemElement: (0, _dom.getPublicElement)($itemFrame),\r\n                itemData: node.internalFields.item,\r\n                submenuElement: (0, _dom.getPublicElement)($itemFrame.children(\".\".concat(DX_SUBMENU_CLASS)))\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getOverlayOptions\",\r\n        value: function() {\r\n            var position = this.option(\"position\");\r\n            var overlayOptions = {\r\n                focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n                animation: this.option(\"animation\"),\r\n                innerOverlay: true,\r\n                closeOnOutsideClick: this._closeOnOutsideClickHandler.bind(this),\r\n                propagateOutsideClick: true,\r\n                closeOnTargetScroll: true,\r\n                deferRendering: false,\r\n                position: {\r\n                    at: position.at,\r\n                    my: position.my,\r\n                    of: this._getTarget(),\r\n                    collision: \"flipfit\"\r\n                },\r\n                shading: false,\r\n                showTitle: false,\r\n                height: \"auto\",\r\n                width: \"auto\",\r\n                onShown: this._overlayShownActionHandler.bind(this),\r\n                onHiding: this._overlayHidingActionHandler.bind(this),\r\n                onHidden: this._overlayHiddenActionHandler.bind(this)\r\n            };\r\n            return overlayOptions\r\n        }\r\n    }, {\r\n        key: \"_overlayShownActionHandler\",\r\n        value: function(arg) {\r\n            this._actions.onShown(arg)\r\n        }\r\n    }, {\r\n        key: \"_overlayHidingActionHandler\",\r\n        value: function(arg) {\r\n            this._actions.onHiding(arg);\r\n            if (!arg.cancel) {\r\n                this._hideAllShownSubmenus();\r\n                this._setOptionSilent(\"visible\", false)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_overlayHiddenActionHandler\",\r\n        value: function(arg) {\r\n            this._actions.onHidden(arg)\r\n        }\r\n    }, {\r\n        key: \"_closeOnOutsideClickHandler\",\r\n        value: function(e) {\r\n            var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\r\n            if ((0, _type.isFunction)(closeOnOutsideClick)) {\r\n                return closeOnOutsideClick(e)\r\n            }\r\n            if (!closeOnOutsideClick) {\r\n                return false\r\n            }\r\n            if (_dom_adapter2.default.isDocument(e.target)) {\r\n                return true\r\n            }\r\n            var $activeItemContainer = this._getActiveItemsContainer(e.target);\r\n            var $itemContainers = this._getItemsContainers();\r\n            var $clickedItem = this._searchActiveItem(e.target);\r\n            var $rootItem = this.$element().parents(\".\".concat(DX_MENU_ITEM_CLASS));\r\n            var isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;\r\n            var isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;\r\n            if (isInnerOverlayClicked || isRootItemClicked) {\r\n                if (\"onClick\" === this._getShowSubmenuMode()) {\r\n                    this._hideAllShownChildSubmenus($clickedItem)\r\n                }\r\n                return false\r\n            }\r\n            return true\r\n        }\r\n    }, {\r\n        key: \"_getActiveItemsContainer\",\r\n        value: function(target) {\r\n            return (0, _renderer2.default)(target).closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS))\r\n        }\r\n    }, {\r\n        key: \"_getItemsContainers\",\r\n        value: function() {\r\n            return this._overlay._$content.find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS))\r\n        }\r\n    }, {\r\n        key: \"_searchActiveItem\",\r\n        value: function(target) {\r\n            return (0, _renderer2.default)(target).closest(\".\".concat(DX_MENU_ITEM_CLASS)).eq(0)\r\n        }\r\n    }, {\r\n        key: \"_isIncludeOverlay\",\r\n        value: function($activeOverlay, $allOverlays) {\r\n            var isSame = false;\r\n            (0, _iterator.each)($allOverlays, function(index, $overlay) {\r\n                if ($activeOverlay.is($overlay) && !isSame) {\r\n                    isSame = true\r\n                }\r\n            });\r\n            return isSame\r\n        }\r\n    }, {\r\n        key: \"_hideAllShownChildSubmenus\",\r\n        value: function($clickedItem) {\r\n            var _this4 = this;\r\n            var $submenuElements = $clickedItem.find(\".\".concat(DX_SUBMENU_CLASS));\r\n            var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\r\n            if ($submenuElements.length > 0) {\r\n                (0, _iterator.each)(shownSubmenus, function(index, $submenu) {\r\n                    var $context = _this4._searchActiveItem($submenu.context).parent();\r\n                    if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {\r\n                        _this4._hideSubmenu($submenu)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_showSubmenu\",\r\n        value: function($item) {\r\n            var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\r\n            this._hideSubmenusOnSameLevel($item);\r\n            if (!this._hasSubmenu(node)) {\r\n                return\r\n            }\r\n            var $submenu = $item.children(\".\".concat(DX_SUBMENU_CLASS));\r\n            var isSubmenuRendered = $submenu.length;\r\n            _get(_getPrototypeOf(ContextMenu.prototype), \"_showSubmenu\", this).call(this, $item);\r\n            if (!isSubmenuRendered) {\r\n                this._renderSubmenuItems(node, $item)\r\n            }\r\n            if (!this._isSubmenuVisible($submenu)) {\r\n                this._drawSubmenu($item)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hideSubmenusOnSameLevel\",\r\n        value: function($item) {\r\n            var $expandedItems = $item.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS)).siblings().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\r\n            if ($expandedItems.length) {\r\n                $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n                this._hideSubmenu($expandedItems.find(\".\".concat(DX_SUBMENU_CLASS)))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hideSubmenuGroup\",\r\n        value: function($submenu) {\r\n            if (this._isSubmenuVisible($submenu)) {\r\n                this._hideSubmenuCore($submenu)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isSubmenuVisible\",\r\n        value: function($submenu) {\r\n            return \"visible\" === $submenu.css(\"visibility\")\r\n        }\r\n    }, {\r\n        key: \"_drawSubmenu\",\r\n        value: function($itemElement) {\r\n            var animation = this.option(\"animation\") ? this.option(\"animation\").show : {};\r\n            var $submenu = $itemElement.children(\".\".concat(DX_SUBMENU_CLASS));\r\n            var submenuPosition = this._getSubmenuPosition($itemElement);\r\n            if (this._overlay && this._overlay.option(\"visible\")) {\r\n                if (!(0, _type.isDefined)(this._shownSubmenus)) {\r\n                    this._shownSubmenus = []\r\n                }\r\n                if ((0, _array.inArray)($submenu, this._shownSubmenus)) {\r\n                    this._shownSubmenus.push($submenu)\r\n                }\r\n                if (animation) {\r\n                    _fx2.default.stop($submenu)\r\n                }(0, _position.setup)($submenu, submenuPosition);\r\n                if (animation) {\r\n                    if ((0, _type.isPlainObject)(animation.to)) {\r\n                        animation.to.position = submenuPosition\r\n                    }\r\n                    this._animate($submenu, animation)\r\n                }\r\n                $submenu.css(\"visibility\", \"visible\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_animate\",\r\n        value: function($container, options) {\r\n            _fx2.default.animate($container, options)\r\n        }\r\n    }, {\r\n        key: \"_getSubmenuPosition\",\r\n        value: function($rootItem) {\r\n            var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\r\n            var $rootItemWrapper = $rootItem.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS));\r\n            var position = {\r\n                collision: \"flip\",\r\n                of: $rootItemWrapper,\r\n                offset: {\r\n                    h: 0,\r\n                    v: -1\r\n                }\r\n            };\r\n            switch (submenuDirection) {\r\n                case \"left\":\r\n                    position.at = \"left top\";\r\n                    position.my = \"right top\";\r\n                    break;\r\n                case \"right\":\r\n                    position.at = \"right top\";\r\n                    position.my = \"left top\";\r\n                    break;\r\n                default:\r\n                    if (this.option(\"rtlEnabled\")) {\r\n                        position.at = \"left top\";\r\n                        position.my = \"right top\"\r\n                    } else {\r\n                        position.at = \"right top\";\r\n                        position.my = \"left top\"\r\n                    }\r\n            }\r\n            return position\r\n        }\r\n    }, {\r\n        key: \"_updateSubmenuVisibilityOnClick\",\r\n        value: function(actionArgs) {\r\n            if (!actionArgs.args.length) {\r\n                return\r\n            }\r\n            var itemData = actionArgs.args[0].itemData;\r\n            var node = this._dataAdapter.getNodeByItem(itemData);\r\n            if (!node) {\r\n                return\r\n            }\r\n            var $itemElement = (0, _renderer2.default)(actionArgs.args[0].itemElement);\r\n            var $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\r\n            var shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;\r\n            if (shouldRenderSubmenu) {\r\n                this._renderSubmenuItems(node, $itemElement);\r\n                $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS))\r\n            }\r\n            if ($itemElement.context === $submenu.context && \"visible\" === $submenu.css(\"visibility\")) {\r\n                return\r\n            }\r\n            var notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;\r\n            if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {\r\n                return\r\n            }\r\n            this._updateSelectedItemOnClick(actionArgs);\r\n            if (0 === $submenu.length) {\r\n                var $prevSubmenu = (0, _renderer2.default)($itemElement.parents(\".\".concat(DX_SUBMENU_CLASS))[0]);\r\n                this._hideSubmenu($prevSubmenu);\r\n                if (!actionArgs.canceled && this._overlay && this._overlay.option(\"visible\")) {\r\n                    this.option(\"visible\", false)\r\n                }\r\n            } else {\r\n                if (this._shownSubmenus && this._shownSubmenus.length > 0) {\r\n                    if (this._shownSubmenus[0].is($submenu)) {\r\n                        this._hideSubmenu($submenu)\r\n                    }\r\n                }\r\n                this._showSubmenu($itemElement)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hideSubmenu\",\r\n        value: function($curSubmenu) {\r\n            var _this5 = this;\r\n            var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\r\n            (0, _iterator.each)(shownSubmenus, function(index, $submenu) {\r\n                if ($curSubmenu.is($submenu) || (0, _dom.contains)($curSubmenu[0], $submenu[0])) {\r\n                    $submenu.parent().removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n                    _this5._hideSubmenuCore($submenu)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_hideSubmenuCore\",\r\n        value: function($submenu) {\r\n            var index = (0, _array.inArray)($submenu, this._shownSubmenus);\r\n            var animation = this.option(\"animation\") ? this.option(\"animation\").hide : null;\r\n            if (index >= 0) {\r\n                this._shownSubmenus.splice(index, 1)\r\n            }\r\n            this._stopAnimate($submenu);\r\n            animation && this._animate($submenu, animation);\r\n            $submenu.css(\"visibility\", \"hidden\")\r\n        }\r\n    }, {\r\n        key: \"_stopAnimate\",\r\n        value: function($container) {\r\n            _fx2.default.stop($container, true)\r\n        }\r\n    }, {\r\n        key: \"_hideAllShownSubmenus\",\r\n        value: function() {\r\n            var _this6 = this;\r\n            var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\r\n            var $expandedItems = this._overlay.$content().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\r\n            $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n            (0, _iterator.each)(shownSubmenus, function(_, $submenu) {\r\n                _this6._hideSubmenu($submenu)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_visibilityChanged\",\r\n        value: function(visible) {\r\n            if (visible) {\r\n                this._renderContentImpl()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            if ((0, _array.inArray)(args.name, ACTIONS) > -1) {\r\n                this._initActions();\r\n                return\r\n            }\r\n            switch (args.name) {\r\n                case \"visible\":\r\n                    this._renderVisibility(args.value);\r\n                    break;\r\n                case \"showEvent\":\r\n                case \"position\":\r\n                case \"submenuDirection\":\r\n                    this._invalidate();\r\n                    break;\r\n                case \"target\":\r\n                    args.previousValue && this._detachShowContextMenuEvents(args.previousValue);\r\n                    this._invalidate();\r\n                    break;\r\n                case \"closeOnOutsideClick\":\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(ContextMenu.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderVisibility\",\r\n        value: function(showing) {\r\n            return showing ? this._show() : this._hide()\r\n        }\r\n    }, {\r\n        key: \"_toggleVisibility\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_show\",\r\n        value: function(event) {\r\n            var args = {\r\n                jQEvent: event\r\n            };\r\n            var promise = (new _deferred.Deferred).reject().promise();\r\n            this._actions.onShowing(args);\r\n            if (args.cancel) {\r\n                return promise\r\n            }\r\n            var position = this._positionContextMenu(event);\r\n            if (position) {\r\n                if (!this._overlay) {\r\n                    this._renderContextMenuOverlay();\r\n                    this._overlay.$content().addClass(this._widgetClass());\r\n                    this._renderFocusState();\r\n                    this._attachHoverEvents();\r\n                    this._attachClickEvent();\r\n                    this._renderItems(this._dataAdapter.getRootNodes())\r\n                }\r\n                this._setOptionSilent(\"visible\", true);\r\n                this._overlay.option(\"position\", position);\r\n                promise = this._overlay.show();\r\n                event && event.stopPropagation();\r\n                this._setAriaAttributes()\r\n            }\r\n            return promise\r\n        }\r\n    }, {\r\n        key: \"_setAriaAttributes\",\r\n        value: function() {\r\n            this._overlayContentId = \"dx-\".concat(new _guid2.default);\r\n            this.setAria(\"owns\", this._overlayContentId);\r\n            this.setAria({\r\n                id: this._overlayContentId,\r\n                role: \"menu\"\r\n            }, this._overlay.$content())\r\n        }\r\n    }, {\r\n        key: \"_cleanAriaAttributes\",\r\n        value: function() {\r\n            this._overlay && this.setAria(\"id\", null, this._overlay.$content());\r\n            this.setAria(\"owns\", void 0)\r\n        }\r\n    }, {\r\n        key: \"_getTarget\",\r\n        value: function() {\r\n            return this.option(\"target\") || this.option(\"position\").of || (0, _renderer2.default)(_dom_adapter2.default.getDocument())\r\n        }\r\n    }, {\r\n        key: \"_getContextMenuPosition\",\r\n        value: function() {\r\n            return (0, _extend.extend)({}, this.option(\"position\"), {\r\n                of: this._getTarget()\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_positionContextMenu\",\r\n        value: function(jQEvent) {\r\n            var position = this._getContextMenuPosition();\r\n            var isInitialPosition = this._isInitialOptionValue(\"position\");\r\n            var positioningAction = this._createActionByOption(\"onPositioning\", actionArgs);\r\n            if (jQEvent && jQEvent.preventDefault && isInitialPosition) {\r\n                position.of = jQEvent\r\n            }\r\n            var actionArgs = {\r\n                position: position,\r\n                event: jQEvent\r\n            };\r\n            positioningAction(actionArgs);\r\n            if (actionArgs.cancel) {\r\n                position = null\r\n            } else {\r\n                if (actionArgs.event) {\r\n                    actionArgs.event.cancel = true;\r\n                    jQEvent.preventDefault()\r\n                }\r\n            }\r\n            return position\r\n        }\r\n    }, {\r\n        key: \"_refresh\",\r\n        value: function() {\r\n            if (!(0, _window.hasWindow)()) {\r\n                _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this)\r\n            } else {\r\n                if (this._overlay) {\r\n                    var lastPosition = this._overlay.option(\"position\");\r\n                    _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\r\n                    this._overlay && this._overlay.option(\"position\", lastPosition)\r\n                } else {\r\n                    _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hide\",\r\n        value: function() {\r\n            var promise;\r\n            if (this._overlay) {\r\n                promise = this._overlay.hide();\r\n                this._setOptionSilent(\"visible\", false)\r\n            }\r\n            this._cleanAriaAttributes();\r\n            this.option(\"focusedElement\", null);\r\n            return promise || (new _deferred.Deferred).reject().promise()\r\n        }\r\n    }, {\r\n        key: \"toggle\",\r\n        value: function(showing) {\r\n            var visible = this.option(\"visible\");\r\n            showing = void 0 === showing ? !visible : showing;\r\n            return this._renderVisibility(showing)\r\n        }\r\n    }, {\r\n        key: \"show\",\r\n        value: function() {\r\n            return this.toggle(true)\r\n        }\r\n    }, {\r\n        key: \"hide\",\r\n        value: function() {\r\n            return this.toggle(false)\r\n        }\r\n    }]);\r\n    return ContextMenu\r\n}(_ui2.default);\r\n(0, _component_registrator2.default)(\"dxContextMenu\", ContextMenu);\r\nmodule.exports = ContextMenu;\r\n"]},"metadata":{},"sourceType":"module"}