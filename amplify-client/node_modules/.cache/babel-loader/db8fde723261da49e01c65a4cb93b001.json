{"ast":null,"code":"/**\r\n * DevExtreme (viz/chart_components/tracker.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar domAdapter = require(\"../../core/dom_adapter\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar clickEvent = require(\"../../events/click\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar consts = require(\"../components/consts\");\n\nvar eventsConsts = consts.events;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar pointerEvents = require(\"../../events/pointer\");\n\nvar holdEvent = require(\"../../events/hold\");\n\nvar addNamespace = require(\"../../events/utils\").addNamespace;\n\nvar isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar _normalizeEnum = require(\"../core/utils\").normalizeEnum;\n\nvar _floor = Math.floor;\nvar _each = each;\n\nvar _noop = require(\"../../core/utils/common\").noop;\n\nvar HOVER_STATE = consts.states.hoverMark;\nvar NORMAL_STATE = consts.states.normalMark;\nvar EVENT_NS = \"dxChartTracker\";\nvar DOT_EVENT_NS = \".\" + EVENT_NS;\nvar POINTER_ACTION = addNamespace([pointerEvents.down, pointerEvents.move], EVENT_NS);\nvar LEGEND_CLICK = \"legendClick\";\nvar SERIES_CLICK = \"seriesClick\";\nvar POINT_CLICK = \"pointClick\";\nvar POINT_DATA = \"chart-data-point\";\nvar SERIES_DATA = \"chart-data-series\";\nvar ARG_DATA = \"chart-data-argument\";\nvar DELAY = 100;\nvar NONE_MODE = \"none\";\nvar ALL_ARGUMENT_POINTS_MODE = \"allargumentpoints\";\nvar INCLUDE_POINTS_MODE = \"includepoints\";\nvar EXLUDE_POINTS_MODE = \"excludepoints\";\nvar LEGEND_HOVER_MODES = [INCLUDE_POINTS_MODE, EXLUDE_POINTS_MODE, NONE_MODE];\n\nfunction getData(event, dataKey) {\n  var target = event.target;\n  return (\"tspan\" === target.tagName ? target.parentNode : target)[dataKey];\n}\n\nfunction eventCanceled(event, target) {\n  return event.cancel || !target.getOptions();\n}\n\nfunction inCanvas(canvas, x, y) {\n  return x >= canvas.left && x <= canvas.right && y >= canvas.top && y <= canvas.bottom;\n}\n\nfunction correctLegendHoverMode(mode) {\n  if (LEGEND_HOVER_MODES.indexOf(mode) > -1) {\n    return mode;\n  } else {\n    return INCLUDE_POINTS_MODE;\n  }\n}\n\nfunction correctHoverMode(target) {\n  var mode = target.getOptions().hoverMode;\n  return mode === NONE_MODE ? mode : ALL_ARGUMENT_POINTS_MODE;\n}\n\nvar baseTrackerPrototype = {\n  ctor: function ctor(options) {\n    var that = this;\n    var data = {\n      tracker: that\n    };\n    that._renderer = options.renderer;\n    that._legend = options.legend;\n    that._tooltip = options.tooltip;\n    that._eventTrigger = options.eventTrigger;\n    that._seriesGroup = options.seriesGroup;\n    options.seriesGroup.off(DOT_EVENT_NS).on(addNamespace(eventsConsts.showPointTooltip, EVENT_NS), data, that._showPointTooltip).on(addNamespace(eventsConsts.hidePointTooltip, EVENT_NS), data, that._hidePointTooltip);\n\n    that._renderer.root.off(DOT_EVENT_NS).on(POINTER_ACTION, data, that._pointerHandler).on(addNamespace(clickEvent.name, EVENT_NS), data, that._clickHandler).on(addNamespace(holdEvent.name, EVENT_NS), {\n      timeout: 300\n    }, _noop);\n  },\n  update: function update(options) {\n    this._chart = options.chart;\n  },\n  updateSeries: function updateSeries(series, resetDecorations) {\n    var that = this;\n    var noHoveredSeries = !(series && series.some(function (s) {\n      return s === that.hoveredSeries;\n    }) || that._hoveredPoint && that._hoveredPoint.series);\n\n    if (that._storedSeries !== series) {\n      that._storedSeries = series || [];\n    }\n\n    if (noHoveredSeries) {\n      that._clean();\n\n      that._renderer.initHatching();\n    }\n\n    if (resetDecorations) {\n      that.clearSelection();\n\n      if (!noHoveredSeries) {\n        that._hideTooltip(that.pointAtShownTooltip);\n\n        that.clearHover();\n      }\n    }\n  },\n  setCanvases: function setCanvases(mainCanvas, paneCanvases) {\n    this._mainCanvas = mainCanvas;\n    this._canvases = paneCanvases;\n  },\n  repairTooltip: function repairTooltip() {\n    var point = this.pointAtShownTooltip;\n\n    if (!point || !point.series || !point.isVisible()) {\n      this._hideTooltip(point, true);\n    } else {\n      this._showTooltip(point);\n    }\n  },\n  _setHoveredPoint: function _setHoveredPoint(point) {\n    if (point === this._hoveredPoint) {\n      return;\n    }\n\n    this._releaseHoveredPoint();\n\n    point.hover();\n    this._hoveredPoint = point;\n  },\n  _releaseHoveredPoint: function _releaseHoveredPoint() {\n    if (this._hoveredPoint && this._hoveredPoint.getOptions()) {\n      this._hoveredPoint.clearHover();\n\n      this._hoveredPoint = null;\n\n      if (this._tooltip.isEnabled()) {\n        this._hideTooltip(this._hoveredPoint);\n      }\n    }\n  },\n  _setHoveredSeries: function _setHoveredSeries(series, mode) {\n    this._releaseHoveredSeries();\n\n    this._releaseHoveredPoint();\n\n    series.hover(mode);\n    this.hoveredSeries = series;\n  },\n  _releaseHoveredSeries: function _releaseHoveredSeries(needSetHoverView, hoveredPoint) {\n    if (this.hoveredSeries) {\n      this.hoveredSeries.clearHover();\n      this.hoveredSeries = null;\n    }\n  },\n  clearSelection: function clearSelection() {\n    this._storedSeries.forEach(function (series) {\n      if (series) {\n        series.clearSelection();\n        series.getPoints().forEach(function (point) {\n          point.clearSelection();\n        });\n      }\n    });\n  },\n  _clean: function _clean() {\n    var that = this;\n    that.hoveredPoint = that.hoveredSeries = that._hoveredArgumentPoints = null;\n\n    that._hideTooltip(that.pointAtShownTooltip);\n  },\n  clearHover: function clearHover() {\n    this._resetHoveredArgument();\n\n    this._releaseHoveredSeries();\n\n    this._releaseHoveredPoint();\n  },\n  _hideTooltip: function _hideTooltip(point, silent) {\n    var that = this;\n\n    if (!that._tooltip || point && that.pointAtShownTooltip !== point) {\n      return;\n    }\n\n    if (!silent && that.pointAtShownTooltip) {\n      that.pointAtShownTooltip = null;\n    }\n\n    that._tooltip.hide();\n  },\n  _showTooltip: function _showTooltip(point) {\n    var that = this;\n    var tooltipFormatObject;\n    var eventData;\n\n    if (point && point.getOptions()) {\n      tooltipFormatObject = point.getTooltipFormatObject(that._tooltip, that._tooltip.isShared() && that._chart.getStackedPoints(point));\n\n      if (!isDefined(tooltipFormatObject.valueText) && !tooltipFormatObject.points || !point.isVisible()) {\n        return;\n      }\n\n      if (!that.pointAtShownTooltip || that.pointAtShownTooltip !== point) {\n        eventData = {\n          target: point\n        };\n      }\n\n      var coords = point.getTooltipParams(that._tooltip.getLocation());\n\n      var rootOffset = that._renderer.getRootOffset();\n\n      coords.x += rootOffset.left;\n      coords.y += rootOffset.top;\n\n      if (!that._tooltip.show(tooltipFormatObject, coords, eventData)) {\n        return;\n      }\n\n      that.pointAtShownTooltip = point;\n    }\n  },\n  _showPointTooltip: function _showPointTooltip(event, point) {\n    var that = event.data.tracker;\n    var pointWithTooltip = that.pointAtShownTooltip;\n\n    if (pointWithTooltip && pointWithTooltip !== point) {\n      that._hideTooltip(pointWithTooltip);\n    }\n\n    that._showTooltip(point);\n  },\n  _hidePointTooltip: function _hidePointTooltip(event, point) {\n    event.data.tracker._hideTooltip(point);\n  },\n  _enableOutHandler: function _enableOutHandler() {\n    if (this._outHandler) {\n      return;\n    }\n\n    var that = this;\n\n    var handler = function handler(e) {\n      var rootOffset = that._renderer.getRootOffset();\n\n      var x = _floor(e.pageX - rootOffset.left);\n\n      var y = _floor(e.pageY - rootOffset.top);\n\n      if (!inCanvas(that._mainCanvas, x, y)) {\n        that._pointerOut();\n\n        that._disableOutHandler();\n      }\n    };\n\n    eventsEngine.on(domAdapter.getDocument(), POINTER_ACTION, handler);\n    this._outHandler = handler;\n  },\n  _disableOutHandler: function _disableOutHandler() {\n    this._outHandler && eventsEngine.off(domAdapter.getDocument(), POINTER_ACTION, this._outHandler);\n    this._outHandler = null;\n  },\n  stopCurrentHandling: function stopCurrentHandling() {\n    this._pointerOut(true);\n  },\n  _pointerOut: function _pointerOut(force) {\n    this.clearHover();\n    (force || this._tooltip.isEnabled()) && this._hideTooltip(this.pointAtShownTooltip);\n  },\n  _triggerLegendClick: function _triggerLegendClick(eventArgs, elementClick) {\n    var eventTrigger = this._eventTrigger;\n    eventTrigger(LEGEND_CLICK, eventArgs, function () {\n      !eventCanceled(eventArgs.event, eventArgs.target) && eventTrigger(elementClick, eventArgs);\n    });\n  },\n  _hoverLegendItem: function _hoverLegendItem(x, y) {\n    var that = this;\n\n    var item = that._legend.getItemByCoord(x, y);\n\n    var series;\n    var legendHoverMode = correctLegendHoverMode(that._legend.getOptions().hoverMode);\n\n    if (item) {\n      series = that._storedSeries[item.id];\n\n      if (!series.isHovered() || series.lastHoverMode !== legendHoverMode) {\n        that._setHoveredSeries(series, legendHoverMode);\n      }\n\n      that._tooltip.isEnabled() && that._hideTooltip(that.pointAtShownTooltip);\n    } else {\n      that.clearHover();\n    }\n  },\n  _hoverArgument: function _hoverArgument(argument, argumentIndex) {\n    var that = this;\n\n    var hoverMode = that._getArgumentHoverMode();\n\n    if (isDefined(argument)) {\n      that._releaseHoveredPoint();\n\n      that._hoveredArgument = argument;\n      that._argumentIndex = argumentIndex;\n\n      that._notifySeries({\n        action: \"pointHover\",\n        notifyLegend: that._notifyLegendOnHoverArgument,\n        target: {\n          argument: argument,\n          fullState: HOVER_STATE,\n          argumentIndex: argumentIndex,\n          getOptions: function getOptions() {\n            return {\n              hoverMode: hoverMode\n            };\n          }\n        }\n      });\n    }\n  },\n  _resetHoveredArgument: function _resetHoveredArgument() {\n    var that = this;\n    var hoverMode;\n\n    if (isDefined(that._hoveredArgument)) {\n      hoverMode = that._getArgumentHoverMode();\n\n      that._notifySeries({\n        action: \"clearPointHover\",\n        notifyLegend: that._notifyLegendOnHoverArgument,\n        target: {\n          fullState: NORMAL_STATE,\n          argumentIndex: that._argumentIndex,\n          argument: that._hoveredArgument,\n          getOptions: function getOptions() {\n            return {\n              hoverMode: hoverMode\n            };\n          }\n        }\n      });\n\n      that._hoveredArgument = null;\n    }\n  },\n  _notifySeries: function _notifySeries(data) {\n    this._storedSeries.forEach(function (series) {\n      series.notify(data);\n    });\n  },\n  _pointerHandler: function _pointerHandler(e) {\n    var that = e.data.tracker;\n\n    var rootOffset = that._renderer.getRootOffset();\n\n    var x = _floor(e.pageX - rootOffset.left);\n\n    var y = _floor(e.pageY - rootOffset.top);\n\n    var canvas = that._getCanvas(x, y);\n\n    var series = getData(e, SERIES_DATA);\n    var point = getData(e, POINT_DATA) || series && series.getPointByCoord(x, y);\n\n    if (point && !point.getMarkerVisibility()) {\n      point = void 0;\n    }\n\n    that._enableOutHandler();\n\n    if (that._legend.coordsIn(x, y)) {\n      that._hoverLegendItem(x, y);\n\n      return;\n    }\n\n    if (that.hoveredSeries && that.hoveredSeries !== that._stuckSeries) {\n      that._releaseHoveredSeries();\n    }\n\n    if (that._hoverArgumentAxis(x, y, e)) {\n      return;\n    }\n\n    if (that._isPointerOut(canvas, point)) {\n      that._pointerOut();\n    }\n\n    if (!canvas && !point) {\n      return;\n    }\n\n    if (series && !point) {\n      point = series.getNeighborPoint(x, y);\n\n      if (!that._stickyHovering && point && !point.coordsIn(x, y)) {\n        point = null;\n      }\n\n      if (series !== that.hoveredSeries) {\n        that._setTimeout(function () {\n          that._setHoveredSeries(series);\n\n          that._setStuckSeries(e, series, x, y);\n\n          that._pointerComplete(point, x, y);\n        }, series);\n\n        return;\n      }\n    } else {\n      if (point) {\n        if (e.type !== pointerEvents.move && \"touch\" !== e.pointerType) {\n          return;\n        }\n\n        if (that.hoveredSeries) {\n          that._setTimeout(function () {\n            that._pointerOnPoint(point, x, y, e);\n          }, point);\n        } else {\n          that._pointerOnPoint(point, x, y, e);\n        }\n\n        return;\n      } else {\n        if (that._setStuckSeries(e, void 0, x, y) && that._stickyHovering) {\n          series = that._stuckSeries;\n          point = series.getNeighborPoint(x, y);\n\n          that._releaseHoveredSeries();\n\n          point && point.getMarkerVisibility() && that._setHoveredPoint(point);\n        } else {\n          if (!that._stickyHovering) {\n            that._pointerOut();\n          }\n        }\n      }\n    }\n\n    that._pointerComplete(point, x, y);\n  },\n  _pointerOnPoint: function _pointerOnPoint(point, x, y) {\n    this._resetHoveredArgument();\n\n    this._setHoveredPoint(point);\n\n    this._pointerComplete(point, x, y);\n  },\n  _pointerComplete: function _pointerComplete(point) {\n    this.pointAtShownTooltip !== point && this._tooltip.isEnabled() && this._showTooltip(point);\n  },\n  _clickHandler: function _clickHandler(e) {\n    var that = e.data.tracker;\n\n    var rootOffset = that._renderer.getRootOffset();\n\n    var x = _floor(e.pageX - rootOffset.left);\n\n    var y = _floor(e.pageY - rootOffset.top);\n\n    var point = getData(e, POINT_DATA);\n    var series = that._stuckSeries || getData(e, SERIES_DATA) || point && point.series;\n    var axis = that._argumentAxis;\n\n    if (that._legend.coordsIn(x, y)) {\n      var item = that._legend.getItemByCoord(x, y);\n\n      if (item) {\n        that._legendClick(item, e);\n      }\n    } else {\n      if (axis && axis.coordsIn(x, y)) {\n        var argument = getData(e, ARG_DATA);\n\n        if (isDefined(argument)) {\n          that._eventTrigger(\"argumentAxisClick\", {\n            argument: argument,\n            event: e\n          });\n        }\n      } else {\n        if (series) {\n          point = point || series.getPointByCoord(x, y);\n\n          if (point && point.getMarkerVisibility()) {\n            that._pointClick(point, e);\n          } else {\n            getData(e, SERIES_DATA) && that._eventTrigger(SERIES_CLICK, {\n              target: series,\n              event: e\n            });\n          }\n        }\n      }\n    }\n  },\n  dispose: function dispose() {\n    var that = this;\n\n    that._disableOutHandler();\n\n    that._renderer.root.off(DOT_EVENT_NS);\n\n    that._seriesGroup.off(DOT_EVENT_NS);\n  }\n};\n\nvar ChartTracker = function ChartTracker(options) {\n  this.ctor(options);\n};\n\nextend(ChartTracker.prototype, baseTrackerPrototype, {\n  _pointClick: function _pointClick(point, event) {\n    var that = this;\n    var eventTrigger = that._eventTrigger;\n    var series = point.series;\n    eventTrigger(POINT_CLICK, {\n      target: point,\n      event: event\n    }, function () {\n      !eventCanceled(event, series) && eventTrigger(SERIES_CLICK, {\n        target: series,\n        event: event\n      });\n    });\n  },\n  update: function update(options) {\n    var that = this;\n    baseTrackerPrototype.update.call(this, options);\n    that._argumentAxis = options.argumentAxis || {};\n    that._axisHoverEnabled = that._argumentAxis && _normalizeEnum(that._argumentAxis.getOptions().hoverMode) === ALL_ARGUMENT_POINTS_MODE;\n    that._rotated = options.rotated;\n    that._crosshair = options.crosshair;\n    that._stickyHovering = options.stickyHovering;\n  },\n  _getCanvas: function _getCanvas(x, y) {\n    var that = this;\n    var canvases = that._canvases || [];\n\n    for (var i = 0; i < canvases.length; i++) {\n      var c = canvases[i];\n\n      if (inCanvas(c, x, y)) {\n        return c;\n      }\n    }\n\n    return null;\n  },\n  _isPointerOut: function _isPointerOut(canvas) {\n    return !canvas && this._stuckSeries;\n  },\n  _hideCrosshair: function _hideCrosshair() {\n    this._crosshair && this._crosshair.hide();\n  },\n  _moveCrosshair: function _moveCrosshair(point, x, y) {\n    if (point && this._crosshair && point.isVisible()) {\n      this._crosshair.show({\n        point: point,\n        x: x,\n        y: y\n      });\n    }\n  },\n  _clean: function _clean() {\n    var that = this;\n\n    baseTrackerPrototype._clean.call(that);\n\n    that._resetTimer();\n\n    that._stuckSeries = null;\n  },\n  _getSeriesForShared: function _getSeriesForShared(x, y) {\n    var that = this;\n    var points = [];\n    var point = null;\n    var distance = 1 / 0;\n\n    if (that._tooltip.isShared() && !that.hoveredSeries) {\n      _each(that._storedSeries, function (_, series) {\n        var point = series.getNeighborPoint(x, y);\n        point && points.push(point);\n      });\n\n      _each(points, function (_, p) {\n        var coords = p.getCrosshairData(x, y);\n        var d = vizUtils.getDistance(x, y, coords.x, coords.y);\n\n        if (d < distance) {\n          point = p;\n          distance = d;\n        }\n      });\n    }\n\n    return point && point.series;\n  },\n  _setTimeout: function _setTimeout(callback, keeper) {\n    var that = this;\n\n    if (that._timeoutKeeper !== keeper) {\n      that._resetTimer();\n\n      that._hoverTimeout = setTimeout(function () {\n        callback();\n        that._timeoutKeeper = null;\n      }, DELAY);\n      that._timeoutKeeper = keeper;\n    }\n  },\n  _resetTimer: function _resetTimer() {\n    clearTimeout(this._hoverTimeout);\n    this._timeoutKeeper = this._hoverTimeout = null;\n  },\n  _stopEvent: function _stopEvent(e) {\n    if (!isDefined(e.cancelable) || e.cancelable) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  },\n  _setStuckSeries: function _setStuckSeries(e, series, x, y) {\n    if (\"mouse\" !== e.pointerType) {\n      this._stuckSeries = null;\n    } else {\n      this._stuckSeries = series || this._stuckSeries || this._getSeriesForShared(x, y);\n    }\n\n    return !!this._stuckSeries;\n  },\n  _pointerOut: function _pointerOut() {\n    var that = this;\n    that._stuckSeries = null;\n\n    that._hideCrosshair();\n\n    that._resetTimer();\n\n    baseTrackerPrototype._pointerOut.apply(that, arguments);\n  },\n  _hoverArgumentAxis: function _hoverArgumentAxis(x, y, e) {\n    var that = this;\n\n    that._resetHoveredArgument();\n\n    if (that._axisHoverEnabled && that._argumentAxis.coordsIn(x, y)) {\n      that._hoverArgument(getData(e, ARG_DATA));\n\n      return true;\n    }\n  },\n  _pointerComplete: function _pointerComplete(point, x, y) {\n    var that = this;\n    that.hoveredSeries && that.hoveredSeries.updateHover(x, y);\n\n    that._resetTimer();\n\n    that._moveCrosshair(point, x, y);\n\n    baseTrackerPrototype._pointerComplete.call(that, point);\n  },\n  _legendClick: function _legendClick(item, e) {\n    var series = this._storedSeries[item.id];\n\n    this._triggerLegendClick({\n      target: series,\n      event: e\n    }, SERIES_CLICK);\n  },\n  _hoverLegendItem: function _hoverLegendItem(x, y) {\n    this._stuckSeries = null;\n\n    this._hideCrosshair();\n\n    baseTrackerPrototype._hoverLegendItem.call(this, x, y);\n  },\n  _pointerOnPoint: function _pointerOnPoint(point, x, y, e) {\n    this._setStuckSeries(e, point.series, x, y);\n\n    this._releaseHoveredSeries();\n\n    baseTrackerPrototype._pointerOnPoint.call(this, point, x, y, e);\n  },\n  _notifyLegendOnHoverArgument: false,\n  _getArgumentHoverMode: function _getArgumentHoverMode() {\n    return correctHoverMode(this._argumentAxis);\n  },\n  dispose: function dispose() {\n    this._resetTimer();\n\n    baseTrackerPrototype.dispose.call(this);\n  }\n});\n\nvar PieTracker = function PieTracker(options) {\n  this.ctor(options);\n};\n\nextend(PieTracker.prototype, baseTrackerPrototype, {\n  _isPointerOut: function _isPointerOut(_, point) {\n    return !point;\n  },\n  _legendClick: function _legendClick(item, e) {\n    var that = this;\n    var points = [];\n\n    that._storedSeries.forEach(function (s) {\n      return points.push.apply(points, s.getPointsByKeys(item.argument, item.argumentIndex));\n    });\n\n    that._eventTrigger(LEGEND_CLICK, {\n      target: item.argument,\n      points: points,\n      event: e\n    });\n  },\n  _pointClick: function _pointClick(point, e) {\n    this._eventTrigger(POINT_CLICK, {\n      target: point,\n      event: e\n    });\n  },\n  _hoverLegendItem: function _hoverLegendItem(x, y) {\n    var that = this;\n\n    var item = that._legend.getItemByCoord(x, y);\n\n    that._resetHoveredArgument();\n\n    if (item) {\n      that._hoverArgument(item.argument, item.argumentIndex);\n    } else {\n      that.clearHover();\n    }\n  },\n  _getArgumentHoverMode: function _getArgumentHoverMode() {\n    return correctHoverMode(this._legend);\n  },\n  _hoverArgumentAxis: _noop,\n  _setStuckSeries: _noop,\n  _getCanvas: _noop,\n  _notifyLegendOnHoverArgument: true\n});\nexports.ChartTracker = ChartTracker;\nexports.PieTracker = PieTracker;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/chart_components/tracker.js"],"names":["domAdapter","require","eventsEngine","clickEvent","extend","each","consts","eventsConsts","vizUtils","pointerEvents","holdEvent","addNamespace","isDefined","_normalizeEnum","_floor","Math","_each","_noop","HOVER_STATE","NORMAL_STATE","EVENT_NS","DOT_EVENT_NS","POINTER_ACTION","LEGEND_CLICK","SERIES_CLICK","POINT_CLICK","POINT_DATA","SERIES_DATA","ARG_DATA","DELAY","NONE_MODE","ALL_ARGUMENT_POINTS_MODE","INCLUDE_POINTS_MODE","EXLUDE_POINTS_MODE","LEGEND_HOVER_MODES","target","event","x","canvas","y","mode","baseTrackerPrototype","ctor","that","data","tracker","options","timeout","update","updateSeries","noHoveredSeries","s","series","setCanvases","repairTooltip","point","_setHoveredPoint","_releaseHoveredPoint","_setHoveredSeries","_releaseHoveredSeries","clearSelection","_clean","clearHover","_hideTooltip","_showTooltip","tooltipFormatObject","eventData","coords","rootOffset","_showPointTooltip","pointWithTooltip","_hidePointTooltip","_enableOutHandler","handler","e","inCanvas","_disableOutHandler","stopCurrentHandling","_pointerOut","force","_triggerLegendClick","eventTrigger","eventCanceled","eventArgs","_hoverLegendItem","item","legendHoverMode","correctLegendHoverMode","_hoverArgument","hoverMode","action","notifyLegend","argument","fullState","argumentIndex","getOptions","_resetHoveredArgument","_notifySeries","_pointerHandler","getData","_pointerOnPoint","_pointerComplete","_clickHandler","axis","dispose","ChartTracker","_pointClick","_getCanvas","canvases","i","c","_isPointerOut","_hideCrosshair","_moveCrosshair","_getSeriesForShared","points","distance","p","d","_setTimeout","setTimeout","callback","_resetTimer","clearTimeout","_stopEvent","_setStuckSeries","_hoverArgumentAxis","_legendClick","_notifyLegendOnHoverArgument","_getArgumentHoverMode","correctHoverMode","PieTracker","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/chart_components/tracker.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar domAdapter = require(\"../../core/dom_adapter\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar clickEvent = require(\"../../events/click\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar consts = require(\"../components/consts\");\r\nvar eventsConsts = consts.events;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar pointerEvents = require(\"../../events/pointer\");\r\nvar holdEvent = require(\"../../events/hold\");\r\nvar addNamespace = require(\"../../events/utils\").addNamespace;\r\nvar isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar _normalizeEnum = require(\"../core/utils\").normalizeEnum;\r\nvar _floor = Math.floor;\r\nvar _each = each;\r\nvar _noop = require(\"../../core/utils/common\").noop;\r\nvar HOVER_STATE = consts.states.hoverMark;\r\nvar NORMAL_STATE = consts.states.normalMark;\r\nvar EVENT_NS = \"dxChartTracker\";\r\nvar DOT_EVENT_NS = \".\" + EVENT_NS;\r\nvar POINTER_ACTION = addNamespace([pointerEvents.down, pointerEvents.move], EVENT_NS);\r\nvar LEGEND_CLICK = \"legendClick\";\r\nvar SERIES_CLICK = \"seriesClick\";\r\nvar POINT_CLICK = \"pointClick\";\r\nvar POINT_DATA = \"chart-data-point\";\r\nvar SERIES_DATA = \"chart-data-series\";\r\nvar ARG_DATA = \"chart-data-argument\";\r\nvar DELAY = 100;\r\nvar NONE_MODE = \"none\";\r\nvar ALL_ARGUMENT_POINTS_MODE = \"allargumentpoints\";\r\nvar INCLUDE_POINTS_MODE = \"includepoints\";\r\nvar EXLUDE_POINTS_MODE = \"excludepoints\";\r\nvar LEGEND_HOVER_MODES = [INCLUDE_POINTS_MODE, EXLUDE_POINTS_MODE, NONE_MODE];\r\n\r\nfunction getData(event, dataKey) {\r\n    var target = event.target;\r\n    return (\"tspan\" === target.tagName ? target.parentNode : target)[dataKey]\r\n}\r\n\r\nfunction eventCanceled(event, target) {\r\n    return event.cancel || !target.getOptions()\r\n}\r\n\r\nfunction inCanvas(canvas, x, y) {\r\n    return x >= canvas.left && x <= canvas.right && y >= canvas.top && y <= canvas.bottom\r\n}\r\n\r\nfunction correctLegendHoverMode(mode) {\r\n    if (LEGEND_HOVER_MODES.indexOf(mode) > -1) {\r\n        return mode\r\n    } else {\r\n        return INCLUDE_POINTS_MODE\r\n    }\r\n}\r\n\r\nfunction correctHoverMode(target) {\r\n    var mode = target.getOptions().hoverMode;\r\n    return mode === NONE_MODE ? mode : ALL_ARGUMENT_POINTS_MODE\r\n}\r\nvar baseTrackerPrototype = {\r\n    ctor: function(options) {\r\n        var that = this;\r\n        var data = {\r\n            tracker: that\r\n        };\r\n        that._renderer = options.renderer;\r\n        that._legend = options.legend;\r\n        that._tooltip = options.tooltip;\r\n        that._eventTrigger = options.eventTrigger;\r\n        that._seriesGroup = options.seriesGroup;\r\n        options.seriesGroup.off(DOT_EVENT_NS).on(addNamespace(eventsConsts.showPointTooltip, EVENT_NS), data, that._showPointTooltip).on(addNamespace(eventsConsts.hidePointTooltip, EVENT_NS), data, that._hidePointTooltip);\r\n        that._renderer.root.off(DOT_EVENT_NS).on(POINTER_ACTION, data, that._pointerHandler).on(addNamespace(clickEvent.name, EVENT_NS), data, that._clickHandler).on(addNamespace(holdEvent.name, EVENT_NS), {\r\n            timeout: 300\r\n        }, _noop)\r\n    },\r\n    update: function(options) {\r\n        this._chart = options.chart\r\n    },\r\n    updateSeries: function(series, resetDecorations) {\r\n        var that = this;\r\n        var noHoveredSeries = !(series && series.some(function(s) {\r\n            return s === that.hoveredSeries\r\n        }) || that._hoveredPoint && that._hoveredPoint.series);\r\n        if (that._storedSeries !== series) {\r\n            that._storedSeries = series || []\r\n        }\r\n        if (noHoveredSeries) {\r\n            that._clean();\r\n            that._renderer.initHatching()\r\n        }\r\n        if (resetDecorations) {\r\n            that.clearSelection();\r\n            if (!noHoveredSeries) {\r\n                that._hideTooltip(that.pointAtShownTooltip);\r\n                that.clearHover()\r\n            }\r\n        }\r\n    },\r\n    setCanvases: function(mainCanvas, paneCanvases) {\r\n        this._mainCanvas = mainCanvas;\r\n        this._canvases = paneCanvases\r\n    },\r\n    repairTooltip: function() {\r\n        var point = this.pointAtShownTooltip;\r\n        if (!point || !point.series || !point.isVisible()) {\r\n            this._hideTooltip(point, true)\r\n        } else {\r\n            this._showTooltip(point)\r\n        }\r\n    },\r\n    _setHoveredPoint: function(point) {\r\n        if (point === this._hoveredPoint) {\r\n            return\r\n        }\r\n        this._releaseHoveredPoint();\r\n        point.hover();\r\n        this._hoveredPoint = point\r\n    },\r\n    _releaseHoveredPoint: function() {\r\n        if (this._hoveredPoint && this._hoveredPoint.getOptions()) {\r\n            this._hoveredPoint.clearHover();\r\n            this._hoveredPoint = null;\r\n            if (this._tooltip.isEnabled()) {\r\n                this._hideTooltip(this._hoveredPoint)\r\n            }\r\n        }\r\n    },\r\n    _setHoveredSeries: function(series, mode) {\r\n        this._releaseHoveredSeries();\r\n        this._releaseHoveredPoint();\r\n        series.hover(mode);\r\n        this.hoveredSeries = series\r\n    },\r\n    _releaseHoveredSeries: function(needSetHoverView, hoveredPoint) {\r\n        if (this.hoveredSeries) {\r\n            this.hoveredSeries.clearHover();\r\n            this.hoveredSeries = null\r\n        }\r\n    },\r\n    clearSelection: function() {\r\n        this._storedSeries.forEach(function(series) {\r\n            if (series) {\r\n                series.clearSelection();\r\n                series.getPoints().forEach(function(point) {\r\n                    point.clearSelection()\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _clean: function() {\r\n        var that = this;\r\n        that.hoveredPoint = that.hoveredSeries = that._hoveredArgumentPoints = null;\r\n        that._hideTooltip(that.pointAtShownTooltip)\r\n    },\r\n    clearHover: function() {\r\n        this._resetHoveredArgument();\r\n        this._releaseHoveredSeries();\r\n        this._releaseHoveredPoint()\r\n    },\r\n    _hideTooltip: function(point, silent) {\r\n        var that = this;\r\n        if (!that._tooltip || point && that.pointAtShownTooltip !== point) {\r\n            return\r\n        }\r\n        if (!silent && that.pointAtShownTooltip) {\r\n            that.pointAtShownTooltip = null\r\n        }\r\n        that._tooltip.hide()\r\n    },\r\n    _showTooltip: function(point) {\r\n        var that = this;\r\n        var tooltipFormatObject;\r\n        var eventData;\r\n        if (point && point.getOptions()) {\r\n            tooltipFormatObject = point.getTooltipFormatObject(that._tooltip, that._tooltip.isShared() && that._chart.getStackedPoints(point));\r\n            if (!isDefined(tooltipFormatObject.valueText) && !tooltipFormatObject.points || !point.isVisible()) {\r\n                return\r\n            }\r\n            if (!that.pointAtShownTooltip || that.pointAtShownTooltip !== point) {\r\n                eventData = {\r\n                    target: point\r\n                }\r\n            }\r\n            var coords = point.getTooltipParams(that._tooltip.getLocation());\r\n            var rootOffset = that._renderer.getRootOffset();\r\n            coords.x += rootOffset.left;\r\n            coords.y += rootOffset.top;\r\n            if (!that._tooltip.show(tooltipFormatObject, coords, eventData)) {\r\n                return\r\n            }\r\n            that.pointAtShownTooltip = point\r\n        }\r\n    },\r\n    _showPointTooltip: function(event, point) {\r\n        var that = event.data.tracker;\r\n        var pointWithTooltip = that.pointAtShownTooltip;\r\n        if (pointWithTooltip && pointWithTooltip !== point) {\r\n            that._hideTooltip(pointWithTooltip)\r\n        }\r\n        that._showTooltip(point)\r\n    },\r\n    _hidePointTooltip: function(event, point) {\r\n        event.data.tracker._hideTooltip(point)\r\n    },\r\n    _enableOutHandler: function() {\r\n        if (this._outHandler) {\r\n            return\r\n        }\r\n        var that = this;\r\n        var handler = function(e) {\r\n            var rootOffset = that._renderer.getRootOffset();\r\n            var x = _floor(e.pageX - rootOffset.left);\r\n            var y = _floor(e.pageY - rootOffset.top);\r\n            if (!inCanvas(that._mainCanvas, x, y)) {\r\n                that._pointerOut();\r\n                that._disableOutHandler()\r\n            }\r\n        };\r\n        eventsEngine.on(domAdapter.getDocument(), POINTER_ACTION, handler);\r\n        this._outHandler = handler\r\n    },\r\n    _disableOutHandler: function() {\r\n        this._outHandler && eventsEngine.off(domAdapter.getDocument(), POINTER_ACTION, this._outHandler);\r\n        this._outHandler = null\r\n    },\r\n    stopCurrentHandling: function() {\r\n        this._pointerOut(true)\r\n    },\r\n    _pointerOut: function(force) {\r\n        this.clearHover();\r\n        (force || this._tooltip.isEnabled()) && this._hideTooltip(this.pointAtShownTooltip)\r\n    },\r\n    _triggerLegendClick: function(eventArgs, elementClick) {\r\n        var eventTrigger = this._eventTrigger;\r\n        eventTrigger(LEGEND_CLICK, eventArgs, function() {\r\n            !eventCanceled(eventArgs.event, eventArgs.target) && eventTrigger(elementClick, eventArgs)\r\n        })\r\n    },\r\n    _hoverLegendItem: function(x, y) {\r\n        var that = this;\r\n        var item = that._legend.getItemByCoord(x, y);\r\n        var series;\r\n        var legendHoverMode = correctLegendHoverMode(that._legend.getOptions().hoverMode);\r\n        if (item) {\r\n            series = that._storedSeries[item.id];\r\n            if (!series.isHovered() || series.lastHoverMode !== legendHoverMode) {\r\n                that._setHoveredSeries(series, legendHoverMode)\r\n            }\r\n            that._tooltip.isEnabled() && that._hideTooltip(that.pointAtShownTooltip)\r\n        } else {\r\n            that.clearHover()\r\n        }\r\n    },\r\n    _hoverArgument: function(argument, argumentIndex) {\r\n        var that = this;\r\n        var hoverMode = that._getArgumentHoverMode();\r\n        if (isDefined(argument)) {\r\n            that._releaseHoveredPoint();\r\n            that._hoveredArgument = argument;\r\n            that._argumentIndex = argumentIndex;\r\n            that._notifySeries({\r\n                action: \"pointHover\",\r\n                notifyLegend: that._notifyLegendOnHoverArgument,\r\n                target: {\r\n                    argument: argument,\r\n                    fullState: HOVER_STATE,\r\n                    argumentIndex: argumentIndex,\r\n                    getOptions: function() {\r\n                        return {\r\n                            hoverMode: hoverMode\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _resetHoveredArgument: function() {\r\n        var that = this;\r\n        var hoverMode;\r\n        if (isDefined(that._hoveredArgument)) {\r\n            hoverMode = that._getArgumentHoverMode();\r\n            that._notifySeries({\r\n                action: \"clearPointHover\",\r\n                notifyLegend: that._notifyLegendOnHoverArgument,\r\n                target: {\r\n                    fullState: NORMAL_STATE,\r\n                    argumentIndex: that._argumentIndex,\r\n                    argument: that._hoveredArgument,\r\n                    getOptions: function() {\r\n                        return {\r\n                            hoverMode: hoverMode\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            that._hoveredArgument = null\r\n        }\r\n    },\r\n    _notifySeries: function(data) {\r\n        this._storedSeries.forEach(function(series) {\r\n            series.notify(data)\r\n        })\r\n    },\r\n    _pointerHandler: function(e) {\r\n        var that = e.data.tracker;\r\n        var rootOffset = that._renderer.getRootOffset();\r\n        var x = _floor(e.pageX - rootOffset.left);\r\n        var y = _floor(e.pageY - rootOffset.top);\r\n        var canvas = that._getCanvas(x, y);\r\n        var series = getData(e, SERIES_DATA);\r\n        var point = getData(e, POINT_DATA) || series && series.getPointByCoord(x, y);\r\n        if (point && !point.getMarkerVisibility()) {\r\n            point = void 0\r\n        }\r\n        that._enableOutHandler();\r\n        if (that._legend.coordsIn(x, y)) {\r\n            that._hoverLegendItem(x, y);\r\n            return\r\n        }\r\n        if (that.hoveredSeries && that.hoveredSeries !== that._stuckSeries) {\r\n            that._releaseHoveredSeries()\r\n        }\r\n        if (that._hoverArgumentAxis(x, y, e)) {\r\n            return\r\n        }\r\n        if (that._isPointerOut(canvas, point)) {\r\n            that._pointerOut()\r\n        }\r\n        if (!canvas && !point) {\r\n            return\r\n        }\r\n        if (series && !point) {\r\n            point = series.getNeighborPoint(x, y);\r\n            if (!that._stickyHovering && point && !point.coordsIn(x, y)) {\r\n                point = null\r\n            }\r\n            if (series !== that.hoveredSeries) {\r\n                that._setTimeout(function() {\r\n                    that._setHoveredSeries(series);\r\n                    that._setStuckSeries(e, series, x, y);\r\n                    that._pointerComplete(point, x, y)\r\n                }, series);\r\n                return\r\n            }\r\n        } else {\r\n            if (point) {\r\n                if (e.type !== pointerEvents.move && \"touch\" !== e.pointerType) {\r\n                    return\r\n                }\r\n                if (that.hoveredSeries) {\r\n                    that._setTimeout(function() {\r\n                        that._pointerOnPoint(point, x, y, e)\r\n                    }, point)\r\n                } else {\r\n                    that._pointerOnPoint(point, x, y, e)\r\n                }\r\n                return\r\n            } else {\r\n                if (that._setStuckSeries(e, void 0, x, y) && that._stickyHovering) {\r\n                    series = that._stuckSeries;\r\n                    point = series.getNeighborPoint(x, y);\r\n                    that._releaseHoveredSeries();\r\n                    point && point.getMarkerVisibility() && that._setHoveredPoint(point)\r\n                } else {\r\n                    if (!that._stickyHovering) {\r\n                        that._pointerOut()\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        that._pointerComplete(point, x, y)\r\n    },\r\n    _pointerOnPoint: function(point, x, y) {\r\n        this._resetHoveredArgument();\r\n        this._setHoveredPoint(point);\r\n        this._pointerComplete(point, x, y)\r\n    },\r\n    _pointerComplete: function(point) {\r\n        this.pointAtShownTooltip !== point && this._tooltip.isEnabled() && this._showTooltip(point)\r\n    },\r\n    _clickHandler: function(e) {\r\n        var that = e.data.tracker;\r\n        var rootOffset = that._renderer.getRootOffset();\r\n        var x = _floor(e.pageX - rootOffset.left);\r\n        var y = _floor(e.pageY - rootOffset.top);\r\n        var point = getData(e, POINT_DATA);\r\n        var series = that._stuckSeries || getData(e, SERIES_DATA) || point && point.series;\r\n        var axis = that._argumentAxis;\r\n        if (that._legend.coordsIn(x, y)) {\r\n            var item = that._legend.getItemByCoord(x, y);\r\n            if (item) {\r\n                that._legendClick(item, e)\r\n            }\r\n        } else {\r\n            if (axis && axis.coordsIn(x, y)) {\r\n                var argument = getData(e, ARG_DATA);\r\n                if (isDefined(argument)) {\r\n                    that._eventTrigger(\"argumentAxisClick\", {\r\n                        argument: argument,\r\n                        event: e\r\n                    })\r\n                }\r\n            } else {\r\n                if (series) {\r\n                    point = point || series.getPointByCoord(x, y);\r\n                    if (point && point.getMarkerVisibility()) {\r\n                        that._pointClick(point, e)\r\n                    } else {\r\n                        getData(e, SERIES_DATA) && that._eventTrigger(SERIES_CLICK, {\r\n                            target: series,\r\n                            event: e\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    dispose: function() {\r\n        var that = this;\r\n        that._disableOutHandler();\r\n        that._renderer.root.off(DOT_EVENT_NS);\r\n        that._seriesGroup.off(DOT_EVENT_NS)\r\n    }\r\n};\r\nvar ChartTracker = function(options) {\r\n    this.ctor(options)\r\n};\r\nextend(ChartTracker.prototype, baseTrackerPrototype, {\r\n    _pointClick: function(point, event) {\r\n        var that = this;\r\n        var eventTrigger = that._eventTrigger;\r\n        var series = point.series;\r\n        eventTrigger(POINT_CLICK, {\r\n            target: point,\r\n            event: event\r\n        }, function() {\r\n            !eventCanceled(event, series) && eventTrigger(SERIES_CLICK, {\r\n                target: series,\r\n                event: event\r\n            })\r\n        })\r\n    },\r\n    update: function(options) {\r\n        var that = this;\r\n        baseTrackerPrototype.update.call(this, options);\r\n        that._argumentAxis = options.argumentAxis || {};\r\n        that._axisHoverEnabled = that._argumentAxis && _normalizeEnum(that._argumentAxis.getOptions().hoverMode) === ALL_ARGUMENT_POINTS_MODE;\r\n        that._rotated = options.rotated;\r\n        that._crosshair = options.crosshair;\r\n        that._stickyHovering = options.stickyHovering\r\n    },\r\n    _getCanvas: function(x, y) {\r\n        var that = this;\r\n        var canvases = that._canvases || [];\r\n        for (var i = 0; i < canvases.length; i++) {\r\n            var c = canvases[i];\r\n            if (inCanvas(c, x, y)) {\r\n                return c\r\n            }\r\n        }\r\n        return null\r\n    },\r\n    _isPointerOut: function(canvas) {\r\n        return !canvas && this._stuckSeries\r\n    },\r\n    _hideCrosshair: function() {\r\n        this._crosshair && this._crosshair.hide()\r\n    },\r\n    _moveCrosshair: function(point, x, y) {\r\n        if (point && this._crosshair && point.isVisible()) {\r\n            this._crosshair.show({\r\n                point: point,\r\n                x: x,\r\n                y: y\r\n            })\r\n        }\r\n    },\r\n    _clean: function() {\r\n        var that = this;\r\n        baseTrackerPrototype._clean.call(that);\r\n        that._resetTimer();\r\n        that._stuckSeries = null\r\n    },\r\n    _getSeriesForShared: function(x, y) {\r\n        var that = this;\r\n        var points = [];\r\n        var point = null;\r\n        var distance = 1 / 0;\r\n        if (that._tooltip.isShared() && !that.hoveredSeries) {\r\n            _each(that._storedSeries, function(_, series) {\r\n                var point = series.getNeighborPoint(x, y);\r\n                point && points.push(point)\r\n            });\r\n            _each(points, function(_, p) {\r\n                var coords = p.getCrosshairData(x, y);\r\n                var d = vizUtils.getDistance(x, y, coords.x, coords.y);\r\n                if (d < distance) {\r\n                    point = p;\r\n                    distance = d\r\n                }\r\n            })\r\n        }\r\n        return point && point.series\r\n    },\r\n    _setTimeout: function(callback, keeper) {\r\n        var that = this;\r\n        if (that._timeoutKeeper !== keeper) {\r\n            that._resetTimer();\r\n            that._hoverTimeout = setTimeout(function() {\r\n                callback();\r\n                that._timeoutKeeper = null\r\n            }, DELAY);\r\n            that._timeoutKeeper = keeper\r\n        }\r\n    },\r\n    _resetTimer: function() {\r\n        clearTimeout(this._hoverTimeout);\r\n        this._timeoutKeeper = this._hoverTimeout = null\r\n    },\r\n    _stopEvent: function(e) {\r\n        if (!isDefined(e.cancelable) || e.cancelable) {\r\n            e.preventDefault();\r\n            e.stopPropagation()\r\n        }\r\n    },\r\n    _setStuckSeries: function(e, series, x, y) {\r\n        if (\"mouse\" !== e.pointerType) {\r\n            this._stuckSeries = null\r\n        } else {\r\n            this._stuckSeries = series || this._stuckSeries || this._getSeriesForShared(x, y)\r\n        }\r\n        return !!this._stuckSeries\r\n    },\r\n    _pointerOut: function() {\r\n        var that = this;\r\n        that._stuckSeries = null;\r\n        that._hideCrosshair();\r\n        that._resetTimer();\r\n        baseTrackerPrototype._pointerOut.apply(that, arguments)\r\n    },\r\n    _hoverArgumentAxis: function(x, y, e) {\r\n        var that = this;\r\n        that._resetHoveredArgument();\r\n        if (that._axisHoverEnabled && that._argumentAxis.coordsIn(x, y)) {\r\n            that._hoverArgument(getData(e, ARG_DATA));\r\n            return true\r\n        }\r\n    },\r\n    _pointerComplete: function(point, x, y) {\r\n        var that = this;\r\n        that.hoveredSeries && that.hoveredSeries.updateHover(x, y);\r\n        that._resetTimer();\r\n        that._moveCrosshair(point, x, y);\r\n        baseTrackerPrototype._pointerComplete.call(that, point)\r\n    },\r\n    _legendClick: function(item, e) {\r\n        var series = this._storedSeries[item.id];\r\n        this._triggerLegendClick({\r\n            target: series,\r\n            event: e\r\n        }, SERIES_CLICK)\r\n    },\r\n    _hoverLegendItem: function(x, y) {\r\n        this._stuckSeries = null;\r\n        this._hideCrosshair();\r\n        baseTrackerPrototype._hoverLegendItem.call(this, x, y)\r\n    },\r\n    _pointerOnPoint: function(point, x, y, e) {\r\n        this._setStuckSeries(e, point.series, x, y);\r\n        this._releaseHoveredSeries();\r\n        baseTrackerPrototype._pointerOnPoint.call(this, point, x, y, e)\r\n    },\r\n    _notifyLegendOnHoverArgument: false,\r\n    _getArgumentHoverMode: function() {\r\n        return correctHoverMode(this._argumentAxis)\r\n    },\r\n    dispose: function() {\r\n        this._resetTimer();\r\n        baseTrackerPrototype.dispose.call(this)\r\n    }\r\n});\r\nvar PieTracker = function(options) {\r\n    this.ctor(options)\r\n};\r\nextend(PieTracker.prototype, baseTrackerPrototype, {\r\n    _isPointerOut: function(_, point) {\r\n        return !point\r\n    },\r\n    _legendClick: function(item, e) {\r\n        var that = this;\r\n        var points = [];\r\n        that._storedSeries.forEach(function(s) {\r\n            return points.push.apply(points, s.getPointsByKeys(item.argument, item.argumentIndex))\r\n        });\r\n        that._eventTrigger(LEGEND_CLICK, {\r\n            target: item.argument,\r\n            points: points,\r\n            event: e\r\n        })\r\n    },\r\n    _pointClick: function(point, e) {\r\n        this._eventTrigger(POINT_CLICK, {\r\n            target: point,\r\n            event: e\r\n        })\r\n    },\r\n    _hoverLegendItem: function(x, y) {\r\n        var that = this;\r\n        var item = that._legend.getItemByCoord(x, y);\r\n        that._resetHoveredArgument();\r\n        if (item) {\r\n            that._hoverArgument(item.argument, item.argumentIndex)\r\n        } else {\r\n            that.clearHover()\r\n        }\r\n    },\r\n    _getArgumentHoverMode: function() {\r\n        return correctHoverMode(this._legend)\r\n    },\r\n    _hoverArgumentAxis: _noop,\r\n    _setStuckSeries: _noop,\r\n    _getCanvas: _noop,\r\n    _notifyLegendOnHoverArgument: true\r\n});\r\nexports.ChartTracker = ChartTracker;\r\nexports.PieTracker = PieTracker;\r\n"]},"metadata":{},"sourceType":"module"}