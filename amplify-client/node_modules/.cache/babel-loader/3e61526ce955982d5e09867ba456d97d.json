{"ast":null,"code":"/**\r\n * DevExtreme (ui/selection/selection.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar Class = require(\"../../core/class\");\n\nvar deferredStrategy = require(\"./selection.strategy.deferred\");\n\nvar standardStrategy = require(\"./selection.strategy.standard\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar Deferred = require(\"../../core/utils/deferred\").Deferred;\n\nmodule.exports = Class.inherit({\n  ctor: function ctor(options) {\n    this.options = extend(this._getDefaultOptions(), options, {\n      selectedItemKeys: options.selectedKeys || []\n    });\n    this._selectionStrategy = this.options.deferred ? new deferredStrategy(this.options) : new standardStrategy(this.options);\n    this._focusedItemIndex = -1;\n\n    if (!this.options.equalByReference) {\n      this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys);\n    }\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return {\n      allowNullValue: false,\n      deferred: false,\n      equalByReference: false,\n      mode: \"multiple\",\n      selectedItems: [],\n      selectionFilter: [],\n      maxFilterLengthInRequest: 0,\n      onSelectionChanged: noop,\n      key: noop,\n      keyOf: function keyOf(item) {\n        return item;\n      },\n      load: function load() {\n        return new Deferred().resolve([]);\n      },\n      totalCount: function totalCount() {\n        return -1;\n      },\n      isSelectableItem: function isSelectableItem() {\n        return true;\n      },\n      isItemSelected: function isItemSelected() {\n        return false;\n      },\n      getItemData: function getItemData(item) {\n        return item;\n      },\n      dataFields: noop,\n      filter: noop\n    };\n  },\n  validate: function validate() {\n    this._selectionStrategy.validate();\n  },\n  getSelectedItemKeys: function getSelectedItemKeys() {\n    return this._selectionStrategy.getSelectedItemKeys();\n  },\n  getSelectedItems: function getSelectedItems() {\n    return this._selectionStrategy.getSelectedItems();\n  },\n  selectionFilter: function selectionFilter(value) {\n    if (void 0 === value) {\n      return this.options.selectionFilter;\n    }\n\n    var filterIsChanged = this.options.selectionFilter !== value && JSON.stringify(this.options.selectionFilter) !== JSON.stringify(value);\n    this.options.selectionFilter = value;\n    filterIsChanged && this.onSelectionChanged();\n  },\n  setSelection: function setSelection(keys) {\n    return this.selectedItemKeys(keys);\n  },\n  select: function select(keys) {\n    return this.selectedItemKeys(keys, true);\n  },\n  deselect: function deselect(keys) {\n    return this.selectedItemKeys(keys, true, true);\n  },\n  selectedItemKeys: function selectedItemKeys(keys, preserve, isDeselect, isSelectAll) {\n    var that = this;\n    keys = keys || [];\n    keys = Array.isArray(keys) ? keys : [keys];\n    that.validate();\n    return this._selectionStrategy.selectedItemKeys(keys, preserve, isDeselect, isSelectAll);\n  },\n  clearSelection: function clearSelection() {\n    return this.selectedItemKeys([]);\n  },\n  _addSelectedItem: function _addSelectedItem(itemData, key) {\n    this._selectionStrategy.addSelectedItem(key, itemData);\n  },\n  _removeSelectedItem: function _removeSelectedItem(key) {\n    this._selectionStrategy.removeSelectedItem(key);\n  },\n  _setSelectedItems: function _setSelectedItems(keys, items) {\n    this._selectionStrategy.setSelectedItems(keys, items);\n  },\n  onSelectionChanged: function onSelectionChanged() {\n    this._selectionStrategy.onSelectionChanged();\n  },\n  changeItemSelection: function changeItemSelection(itemIndex, keys) {\n    var isSelectedItemsChanged;\n    var items = this.options.plainItems();\n    var item = items[itemIndex];\n\n    if (!this.isSelectable() || !this.isDataItem(item)) {\n      return false;\n    }\n\n    var itemData = this.options.getItemData(item);\n    var itemKey = this.options.keyOf(itemData);\n    keys = keys || {};\n\n    if (keys.shift && \"multiple\" === this.options.mode && this._focusedItemIndex >= 0) {\n      isSelectedItemsChanged = this.changeItemSelectionWhenShiftKeyPressed(itemIndex, items);\n    } else {\n      if (keys.control) {\n        this._resetItemSelectionWhenShiftKeyPressed();\n\n        var isSelected = this._selectionStrategy.isItemDataSelected(itemData);\n\n        if (\"single\" === this.options.mode) {\n          this.clearSelectedItems();\n        }\n\n        if (isSelected) {\n          this._removeSelectedItem(itemKey);\n        } else {\n          this._addSelectedItem(itemData, itemKey);\n        }\n\n        isSelectedItemsChanged = true;\n      } else {\n        this._resetItemSelectionWhenShiftKeyPressed();\n\n        var isKeysEqual = this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0], itemKey);\n\n        if (1 !== this.options.selectedItemKeys.length || !isKeysEqual) {\n          this._setSelectedItems([itemKey], [itemData]);\n\n          isSelectedItemsChanged = true;\n        }\n      }\n    }\n\n    if (isSelectedItemsChanged) {\n      this._focusedItemIndex = itemIndex;\n      this.onSelectionChanged();\n      return true;\n    }\n  },\n  isDataItem: function isDataItem(item) {\n    return this.options.isSelectableItem(item);\n  },\n  isSelectable: function isSelectable() {\n    return \"single\" === this.options.mode || \"multiple\" === this.options.mode;\n  },\n  isItemDataSelected: function isItemDataSelected(data) {\n    return this._selectionStrategy.isItemDataSelected(data);\n  },\n  isItemSelected: function isItemSelected(arg) {\n    return this._selectionStrategy.isItemKeySelected(arg);\n  },\n  _resetItemSelectionWhenShiftKeyPressed: function _resetItemSelectionWhenShiftKeyPressed() {\n    delete this._shiftFocusedItemIndex;\n  },\n  _resetFocusedItemIndex: function _resetFocusedItemIndex() {\n    this._focusedItemIndex = -1;\n  },\n  changeItemSelectionWhenShiftKeyPressed: function changeItemSelectionWhenShiftKeyPressed(itemIndex, items) {\n    var isSelectedItemsChanged = false;\n    var itemIndexStep;\n    var index;\n    var keyOf = this.options.keyOf;\n    var focusedItem = items[this._focusedItemIndex];\n    var focusedData = this.options.getItemData(focusedItem);\n    var focusedKey = keyOf(focusedData);\n    var isFocusedItemSelected = focusedItem && this.isItemDataSelected(focusedData);\n\n    if (!isDefined(this._shiftFocusedItemIndex)) {\n      this._shiftFocusedItemIndex = this._focusedItemIndex;\n    }\n\n    var data;\n    var itemKey;\n\n    if (this._shiftFocusedItemIndex !== this._focusedItemIndex) {\n      itemIndexStep = this._focusedItemIndex < this._shiftFocusedItemIndex ? 1 : -1;\n\n      for (index = this._focusedItemIndex; index !== this._shiftFocusedItemIndex; index += itemIndexStep) {\n        if (this.isDataItem(items[index])) {\n          itemKey = keyOf(this.options.getItemData(items[index]));\n\n          this._removeSelectedItem(itemKey);\n\n          isSelectedItemsChanged = true;\n        }\n      }\n    }\n\n    if (itemIndex !== this._shiftFocusedItemIndex) {\n      itemIndexStep = itemIndex < this._shiftFocusedItemIndex ? 1 : -1;\n\n      for (index = itemIndex; index !== this._shiftFocusedItemIndex; index += itemIndexStep) {\n        if (this.isDataItem(items[index])) {\n          data = this.options.getItemData(items[index]);\n          itemKey = keyOf(data);\n\n          this._addSelectedItem(data, itemKey);\n\n          isSelectedItemsChanged = true;\n        }\n      }\n    }\n\n    if (this.isDataItem(focusedItem) && !isFocusedItemSelected) {\n      this._addSelectedItem(focusedData, focusedKey);\n\n      isSelectedItemsChanged = true;\n    }\n\n    return isSelectedItemsChanged;\n  },\n  clearSelectedItems: function clearSelectedItems() {\n    this._setSelectedItems([], []);\n  },\n  selectAll: function selectAll(isOnePage) {\n    this._resetFocusedItemIndex();\n\n    if (isOnePage) {\n      return this._onePageSelectAll(false);\n    } else {\n      return this.selectedItemKeys([], true, false, true);\n    }\n  },\n  deselectAll: function deselectAll(isOnePage) {\n    this._resetFocusedItemIndex();\n\n    if (isOnePage) {\n      return this._onePageSelectAll(true);\n    } else {\n      return this.selectedItemKeys([], true, true, true);\n    }\n  },\n  _onePageSelectAll: function _onePageSelectAll(isDeselect) {\n    var items = this._selectionStrategy.getSelectableItems(this.options.plainItems());\n\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n\n      if (this.isDataItem(item)) {\n        var itemData = this.options.getItemData(item);\n        var itemKey = this.options.keyOf(itemData);\n        var isSelected = this.isItemSelected(itemKey);\n\n        if (!isSelected && !isDeselect) {\n          this._addSelectedItem(itemData, itemKey);\n        }\n\n        if (isSelected && isDeselect) {\n          this._removeSelectedItem(itemKey);\n        }\n      }\n    }\n\n    this.onSelectionChanged();\n    return new Deferred().resolve();\n  },\n  getSelectAllState: function getSelectAllState(visibleOnly) {\n    return this._selectionStrategy.getSelectAllState(visibleOnly);\n  }\n});","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/selection/selection.js"],"names":["Class","require","deferredStrategy","standardStrategy","extend","noop","isDefined","Deferred","module","ctor","selectedItemKeys","options","_getDefaultOptions","allowNullValue","deferred","equalByReference","mode","selectedItems","selectionFilter","maxFilterLengthInRequest","onSelectionChanged","key","keyOf","load","totalCount","isSelectableItem","isItemSelected","getItemData","dataFields","filter","validate","getSelectedItemKeys","getSelectedItems","filterIsChanged","JSON","setSelection","select","deselect","that","keys","Array","clearSelection","_addSelectedItem","_removeSelectedItem","_setSelectedItems","changeItemSelection","items","item","itemData","itemKey","isSelectedItemsChanged","isSelected","isKeysEqual","isDataItem","isSelectable","isItemDataSelected","_resetItemSelectionWhenShiftKeyPressed","_resetFocusedItemIndex","changeItemSelectionWhenShiftKeyPressed","focusedItem","focusedData","focusedKey","isFocusedItemSelected","itemIndexStep","index","itemIndex","data","clearSelectedItems","selectAll","deselectAll","_onePageSelectAll","i","getSelectAllState"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/selection/selection.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar Class = require(\"../../core/class\");\r\nvar deferredStrategy = require(\"./selection.strategy.deferred\");\r\nvar standardStrategy = require(\"./selection.strategy.standard\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar Deferred = require(\"../../core/utils/deferred\").Deferred;\r\nmodule.exports = Class.inherit({\r\n    ctor: function(options) {\r\n        this.options = extend(this._getDefaultOptions(), options, {\r\n            selectedItemKeys: options.selectedKeys || []\r\n        });\r\n        this._selectionStrategy = this.options.deferred ? new deferredStrategy(this.options) : new standardStrategy(this.options);\r\n        this._focusedItemIndex = -1;\r\n        if (!this.options.equalByReference) {\r\n            this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)\r\n        }\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return {\r\n            allowNullValue: false,\r\n            deferred: false,\r\n            equalByReference: false,\r\n            mode: \"multiple\",\r\n            selectedItems: [],\r\n            selectionFilter: [],\r\n            maxFilterLengthInRequest: 0,\r\n            onSelectionChanged: noop,\r\n            key: noop,\r\n            keyOf: function(item) {\r\n                return item\r\n            },\r\n            load: function() {\r\n                return (new Deferred).resolve([])\r\n            },\r\n            totalCount: function() {\r\n                return -1\r\n            },\r\n            isSelectableItem: function() {\r\n                return true\r\n            },\r\n            isItemSelected: function() {\r\n                return false\r\n            },\r\n            getItemData: function(item) {\r\n                return item\r\n            },\r\n            dataFields: noop,\r\n            filter: noop\r\n        }\r\n    },\r\n    validate: function() {\r\n        this._selectionStrategy.validate()\r\n    },\r\n    getSelectedItemKeys: function() {\r\n        return this._selectionStrategy.getSelectedItemKeys()\r\n    },\r\n    getSelectedItems: function() {\r\n        return this._selectionStrategy.getSelectedItems()\r\n    },\r\n    selectionFilter: function(value) {\r\n        if (void 0 === value) {\r\n            return this.options.selectionFilter\r\n        }\r\n        var filterIsChanged = this.options.selectionFilter !== value && JSON.stringify(this.options.selectionFilter) !== JSON.stringify(value);\r\n        this.options.selectionFilter = value;\r\n        filterIsChanged && this.onSelectionChanged()\r\n    },\r\n    setSelection: function(keys) {\r\n        return this.selectedItemKeys(keys)\r\n    },\r\n    select: function(keys) {\r\n        return this.selectedItemKeys(keys, true)\r\n    },\r\n    deselect: function(keys) {\r\n        return this.selectedItemKeys(keys, true, true)\r\n    },\r\n    selectedItemKeys: function(keys, preserve, isDeselect, isSelectAll) {\r\n        var that = this;\r\n        keys = keys || [];\r\n        keys = Array.isArray(keys) ? keys : [keys];\r\n        that.validate();\r\n        return this._selectionStrategy.selectedItemKeys(keys, preserve, isDeselect, isSelectAll)\r\n    },\r\n    clearSelection: function() {\r\n        return this.selectedItemKeys([])\r\n    },\r\n    _addSelectedItem: function(itemData, key) {\r\n        this._selectionStrategy.addSelectedItem(key, itemData)\r\n    },\r\n    _removeSelectedItem: function(key) {\r\n        this._selectionStrategy.removeSelectedItem(key)\r\n    },\r\n    _setSelectedItems: function(keys, items) {\r\n        this._selectionStrategy.setSelectedItems(keys, items)\r\n    },\r\n    onSelectionChanged: function() {\r\n        this._selectionStrategy.onSelectionChanged()\r\n    },\r\n    changeItemSelection: function(itemIndex, keys) {\r\n        var isSelectedItemsChanged;\r\n        var items = this.options.plainItems();\r\n        var item = items[itemIndex];\r\n        if (!this.isSelectable() || !this.isDataItem(item)) {\r\n            return false\r\n        }\r\n        var itemData = this.options.getItemData(item);\r\n        var itemKey = this.options.keyOf(itemData);\r\n        keys = keys || {};\r\n        if (keys.shift && \"multiple\" === this.options.mode && this._focusedItemIndex >= 0) {\r\n            isSelectedItemsChanged = this.changeItemSelectionWhenShiftKeyPressed(itemIndex, items)\r\n        } else {\r\n            if (keys.control) {\r\n                this._resetItemSelectionWhenShiftKeyPressed();\r\n                var isSelected = this._selectionStrategy.isItemDataSelected(itemData);\r\n                if (\"single\" === this.options.mode) {\r\n                    this.clearSelectedItems()\r\n                }\r\n                if (isSelected) {\r\n                    this._removeSelectedItem(itemKey)\r\n                } else {\r\n                    this._addSelectedItem(itemData, itemKey)\r\n                }\r\n                isSelectedItemsChanged = true\r\n            } else {\r\n                this._resetItemSelectionWhenShiftKeyPressed();\r\n                var isKeysEqual = this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0], itemKey);\r\n                if (1 !== this.options.selectedItemKeys.length || !isKeysEqual) {\r\n                    this._setSelectedItems([itemKey], [itemData]);\r\n                    isSelectedItemsChanged = true\r\n                }\r\n            }\r\n        }\r\n        if (isSelectedItemsChanged) {\r\n            this._focusedItemIndex = itemIndex;\r\n            this.onSelectionChanged();\r\n            return true\r\n        }\r\n    },\r\n    isDataItem: function(item) {\r\n        return this.options.isSelectableItem(item)\r\n    },\r\n    isSelectable: function() {\r\n        return \"single\" === this.options.mode || \"multiple\" === this.options.mode\r\n    },\r\n    isItemDataSelected: function(data) {\r\n        return this._selectionStrategy.isItemDataSelected(data)\r\n    },\r\n    isItemSelected: function(arg) {\r\n        return this._selectionStrategy.isItemKeySelected(arg)\r\n    },\r\n    _resetItemSelectionWhenShiftKeyPressed: function() {\r\n        delete this._shiftFocusedItemIndex\r\n    },\r\n    _resetFocusedItemIndex: function() {\r\n        this._focusedItemIndex = -1\r\n    },\r\n    changeItemSelectionWhenShiftKeyPressed: function(itemIndex, items) {\r\n        var isSelectedItemsChanged = false;\r\n        var itemIndexStep;\r\n        var index;\r\n        var keyOf = this.options.keyOf;\r\n        var focusedItem = items[this._focusedItemIndex];\r\n        var focusedData = this.options.getItemData(focusedItem);\r\n        var focusedKey = keyOf(focusedData);\r\n        var isFocusedItemSelected = focusedItem && this.isItemDataSelected(focusedData);\r\n        if (!isDefined(this._shiftFocusedItemIndex)) {\r\n            this._shiftFocusedItemIndex = this._focusedItemIndex\r\n        }\r\n        var data;\r\n        var itemKey;\r\n        if (this._shiftFocusedItemIndex !== this._focusedItemIndex) {\r\n            itemIndexStep = this._focusedItemIndex < this._shiftFocusedItemIndex ? 1 : -1;\r\n            for (index = this._focusedItemIndex; index !== this._shiftFocusedItemIndex; index += itemIndexStep) {\r\n                if (this.isDataItem(items[index])) {\r\n                    itemKey = keyOf(this.options.getItemData(items[index]));\r\n                    this._removeSelectedItem(itemKey);\r\n                    isSelectedItemsChanged = true\r\n                }\r\n            }\r\n        }\r\n        if (itemIndex !== this._shiftFocusedItemIndex) {\r\n            itemIndexStep = itemIndex < this._shiftFocusedItemIndex ? 1 : -1;\r\n            for (index = itemIndex; index !== this._shiftFocusedItemIndex; index += itemIndexStep) {\r\n                if (this.isDataItem(items[index])) {\r\n                    data = this.options.getItemData(items[index]);\r\n                    itemKey = keyOf(data);\r\n                    this._addSelectedItem(data, itemKey);\r\n                    isSelectedItemsChanged = true\r\n                }\r\n            }\r\n        }\r\n        if (this.isDataItem(focusedItem) && !isFocusedItemSelected) {\r\n            this._addSelectedItem(focusedData, focusedKey);\r\n            isSelectedItemsChanged = true\r\n        }\r\n        return isSelectedItemsChanged\r\n    },\r\n    clearSelectedItems: function() {\r\n        this._setSelectedItems([], [])\r\n    },\r\n    selectAll: function(isOnePage) {\r\n        this._resetFocusedItemIndex();\r\n        if (isOnePage) {\r\n            return this._onePageSelectAll(false)\r\n        } else {\r\n            return this.selectedItemKeys([], true, false, true)\r\n        }\r\n    },\r\n    deselectAll: function(isOnePage) {\r\n        this._resetFocusedItemIndex();\r\n        if (isOnePage) {\r\n            return this._onePageSelectAll(true)\r\n        } else {\r\n            return this.selectedItemKeys([], true, true, true)\r\n        }\r\n    },\r\n    _onePageSelectAll: function(isDeselect) {\r\n        var items = this._selectionStrategy.getSelectableItems(this.options.plainItems());\r\n        for (var i = 0; i < items.length; i++) {\r\n            var item = items[i];\r\n            if (this.isDataItem(item)) {\r\n                var itemData = this.options.getItemData(item);\r\n                var itemKey = this.options.keyOf(itemData);\r\n                var isSelected = this.isItemSelected(itemKey);\r\n                if (!isSelected && !isDeselect) {\r\n                    this._addSelectedItem(itemData, itemKey)\r\n                }\r\n                if (isSelected && isDeselect) {\r\n                    this._removeSelectedItem(itemKey)\r\n                }\r\n            }\r\n        }\r\n        this.onSelectionChanged();\r\n        return (new Deferred).resolve()\r\n    },\r\n    getSelectAllState: function(visibleOnly) {\r\n        return this._selectionStrategy.getSelectAllState(visibleOnly)\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}