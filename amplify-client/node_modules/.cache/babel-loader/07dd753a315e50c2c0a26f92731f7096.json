{"ast":null,"code":"/**\r\n * DevExtreme (viz/series/points/pie_point.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar extend = require(\"../../../core/utils/extend\").extend;\n\nvar symbolPoint = require(\"./symbol_point\");\n\nvar _extend = extend;\nvar _round = Math.round;\nvar _sqrt = Math.sqrt;\nvar _acos = Math.acos;\nvar DEG = 180 / Math.PI;\nvar _abs = Math.abs;\n\nvar vizUtils = require(\"../../core/utils\");\n\nvar _normalizeAngle = vizUtils.normalizeAngle;\nvar _getCosAndSin = vizUtils.getCosAndSin;\n\nvar _isDefined = require(\"../../../core/utils/type\").isDefined;\n\nvar getVerticallyShiftedAngularCoords = vizUtils.getVerticallyShiftedAngularCoords;\n\nvar RADIAL_LABEL_INDENT = require(\"../../components/consts\").radialLabelIndent;\n\nmodule.exports = _extend({}, symbolPoint, {\n  _updateData: function _updateData(data, argumentChanged) {\n    var that = this;\n\n    symbolPoint._updateData.call(this, data);\n\n    if (argumentChanged || !_isDefined(that._visible)) {\n      that._visible = true;\n    }\n\n    that.minValue = that.initialMinValue = that.originalMinValue = _isDefined(data.minValue) ? data.minValue : 0;\n  },\n  animate: function animate(complete, duration, delay) {\n    var that = this;\n    that.graphic.animate({\n      x: that.centerX,\n      y: that.centerY,\n      outerRadius: that.radiusOuter,\n      innerRadius: that.radiusInner,\n      startAngle: that.toAngle,\n      endAngle: that.fromAngle\n    }, {\n      delay: delay,\n      partitionDuration: duration\n    }, complete);\n  },\n  correctPosition: function correctPosition(correction) {\n    var that = this;\n    that.correctRadius(correction);\n    that.correctLabelRadius(correction.radiusOuter + RADIAL_LABEL_INDENT);\n    that.centerX = correction.centerX;\n    that.centerY = correction.centerY;\n  },\n  correctRadius: function correctRadius(correction) {\n    this.radiusInner = correction.radiusInner;\n    this.radiusOuter = correction.radiusOuter;\n  },\n  correctLabelRadius: function correctLabelRadius(radiusLabels) {\n    this.radiusLabels = radiusLabels;\n  },\n  correctValue: function correctValue(correction, percent, base) {\n    var that = this;\n    that.value = (base || that.normalInitialValue) + correction;\n    that.minValue = correction;\n    that.percent = percent;\n\n    that._label.setDataField(\"percent\", percent);\n  },\n  _updateLabelData: function _updateLabelData() {\n    this._label.setData(this._getLabelFormatObject());\n  },\n  _getShiftLabelCoords: function _getShiftLabelCoords() {\n    var that = this;\n\n    var bBox = that._label.getBoundingRect();\n\n    var coord = that._getLabelCoords(that._label);\n\n    var visibleArea = that._getVisibleArea();\n\n    if (that._isLabelDrawingWithoutPoints) {\n      return that._checkLabelPosition(coord, bBox, visibleArea);\n    } else {\n      return that._getLabelExtraCoord(coord, that._checkVerticalLabelPosition(coord, bBox, visibleArea), bBox);\n    }\n  },\n  _getLabelPosition: function _getLabelPosition(options) {\n    return options.position;\n  },\n  _getLabelCoords: function _getLabelCoords(label) {\n    var that = this;\n    var bBox = label.getBoundingRect();\n    var options = label.getLayoutOptions();\n\n    var angleFunctions = _getCosAndSin(that.middleAngle);\n\n    var position = that._getLabelPosition(options);\n\n    var radiusInner = that.radiusInner;\n    var radiusOuter = that.radiusOuter;\n    var radiusLabels = that.radiusLabels;\n    var columnsPosition = \"columns\" === position;\n    var rad;\n    var x;\n\n    if (\"inside\" === position) {\n      rad = radiusInner + (radiusOuter - radiusInner) / 2 + options.radialOffset;\n      x = that.centerX + rad * angleFunctions.cos - bBox.width / 2;\n    } else {\n      rad = radiusLabels + options.radialOffset;\n\n      if (angleFunctions.cos > .1 || columnsPosition && angleFunctions.cos >= 0) {\n        x = that.centerX + rad * angleFunctions.cos;\n      } else {\n        if (angleFunctions.cos < -.1 || columnsPosition && angleFunctions.cos < 0) {\n          x = that.centerX + rad * angleFunctions.cos - bBox.width;\n        } else {\n          x = that.centerX + rad * angleFunctions.cos - bBox.width / 2;\n        }\n      }\n    }\n\n    return {\n      x: x,\n      y: _round(that.centerY - rad * angleFunctions.sin - bBox.height / 2)\n    };\n  },\n  _correctLabelCoord: function _correctLabelCoord(coord, moveLabelsFromCenter) {\n    var that = this;\n    var label = that._label;\n    var bBox = label.getBoundingRect();\n    var labelWidth = bBox.width;\n    var options = label.getLayoutOptions();\n\n    var visibleArea = that._getVisibleArea();\n\n    var rightBorderX = visibleArea.maxX - labelWidth;\n    var leftBorderX = visibleArea.minX;\n\n    var angleOfPoint = _normalizeAngle(that.middleAngle);\n\n    var centerX = that.centerX;\n    var connectorOffset = options.connectorOffset;\n    var x = coord.x;\n\n    if (\"columns\" === options.position) {\n      if (angleOfPoint <= 90 || angleOfPoint >= 270) {\n        x = rightBorderX;\n      } else {\n        x = leftBorderX;\n      }\n\n      coord.x = x;\n    } else {\n      if (\"inside\" !== options.position && moveLabelsFromCenter) {\n        if (angleOfPoint <= 90 || angleOfPoint >= 270) {\n          if (x - connectorOffset < centerX) {\n            x = centerX + connectorOffset;\n          }\n        } else {\n          if (x + labelWidth + connectorOffset > centerX) {\n            x = centerX - labelWidth - connectorOffset;\n          }\n        }\n\n        coord.x = x;\n      }\n    }\n\n    return coord;\n  },\n  drawLabel: function drawLabel() {\n    this.translate();\n    this._isLabelDrawingWithoutPoints = true;\n\n    this._drawLabel();\n\n    this._isLabelDrawingWithoutPoints = false;\n  },\n  updateLabelCoord: function updateLabelCoord(moveLabelsFromCenter) {\n    var that = this;\n\n    var bBox = that._label.getBoundingRect();\n\n    var coord = that._correctLabelCoord(bBox, moveLabelsFromCenter);\n\n    coord = that._checkHorizontalLabelPosition(coord, bBox, that._getVisibleArea());\n\n    that._label.shift(_round(coord.x), _round(bBox.y));\n  },\n  _checkVerticalLabelPosition: function _checkVerticalLabelPosition(coord, box, visibleArea) {\n    var x = coord.x;\n    var y = coord.y;\n\n    if (coord.y + box.height > visibleArea.maxY) {\n      y = visibleArea.maxY - box.height;\n    } else {\n      if (coord.y < visibleArea.minY) {\n        y = visibleArea.minY;\n      }\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  },\n  _getLabelExtraCoord: function _getLabelExtraCoord(coord, shiftCoord, box) {\n    return coord.y !== shiftCoord.y ? getVerticallyShiftedAngularCoords({\n      x: coord.x,\n      y: coord.y,\n      width: box.width,\n      height: box.height\n    }, shiftCoord.y - coord.y, {\n      x: this.centerX,\n      y: this.centerY\n    }) : coord;\n  },\n  _checkHorizontalLabelPosition: function _checkHorizontalLabelPosition(coord, box, visibleArea) {\n    var x = coord.x;\n    var y = coord.y;\n\n    if (coord.x + box.width > visibleArea.maxX) {\n      x = visibleArea.maxX - box.width;\n    } else {\n      if (coord.x < visibleArea.minX) {\n        x = visibleArea.minX;\n      }\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  },\n  applyWordWrap: function applyWordWrap(moveLabelsFromCenter) {\n    var that = this;\n    var label = that._label;\n    var box = label.getBoundingRect();\n\n    var visibleArea = that._getVisibleArea();\n\n    var position = label.getLayoutOptions().position;\n    var width = box.width;\n    var rowCountChanged = false;\n\n    if (\"columns\" === position && that.series.index > 0) {\n      width = visibleArea.maxX - that.centerX - that.radiusLabels;\n    } else {\n      if (\"inside\" === position) {\n        if (width > visibleArea.maxX - visibleArea.minX) {\n          width = visibleArea.maxX - visibleArea.minX;\n        }\n      } else {\n        if (moveLabelsFromCenter && box.x < that.centerX && box.width + box.x > that.centerX) {\n          width = Math.floor((visibleArea.maxX - visibleArea.minX) / 2);\n        } else {\n          if (box.x + width > visibleArea.maxX) {\n            width = visibleArea.maxX - box.x;\n          } else {\n            if (box.x < visibleArea.minX) {\n              width = box.x + width - visibleArea.minX;\n            }\n          }\n        }\n      }\n    }\n\n    if (width < box.width) {\n      rowCountChanged = label.fit(width);\n    }\n\n    return rowCountChanged;\n  },\n  setLabelTrackerData: function setLabelTrackerData() {\n    this._label.setTrackerData(this);\n  },\n  _checkLabelPosition: function _checkLabelPosition(coord, bBox, visibleArea) {\n    coord = this._checkHorizontalLabelPosition(coord, bBox, visibleArea);\n    return this._checkVerticalLabelPosition(coord, bBox, visibleArea);\n  },\n  _getLabelConnector: function _getLabelConnector() {\n    var that = this;\n    var rad = that.radiusOuter;\n    var seriesStyle = that._options.styles.normal;\n    var strokeWidthBy2 = seriesStyle[\"stroke-width\"] / 2;\n    var borderWidth = that.series.getOptions().containerBackgroundColor === seriesStyle.stroke ? _round(strokeWidthBy2) : _round(-strokeWidthBy2);\n\n    var angleFunctions = _getCosAndSin(_round(that.middleAngle));\n\n    return {\n      x: _round(that.centerX + (rad - borderWidth) * angleFunctions.cos),\n      y: _round(that.centerY - (rad - borderWidth) * angleFunctions.sin),\n      angle: that.middleAngle\n    };\n  },\n  _drawMarker: function _drawMarker(renderer, group, animationEnabled, firstDrawing) {\n    var that = this;\n    var radiusOuter = that.radiusOuter;\n    var radiusInner = that.radiusInner;\n    var fromAngle = that.fromAngle;\n    var toAngle = that.toAngle;\n\n    if (animationEnabled) {\n      radiusInner = radiusOuter = 0;\n\n      if (!firstDrawing) {\n        fromAngle = toAngle = that.shiftedAngle;\n      }\n    }\n\n    that.graphic = renderer.arc(that.centerX, that.centerY, radiusInner, radiusOuter, toAngle, fromAngle).attr({\n      \"stroke-linejoin\": \"round\"\n    }).smartAttr(that._getStyle()).data({\n      \"chart-data-point\": that\n    }).sharp().append(group);\n  },\n  getTooltipParams: function getTooltipParams() {\n    var that = this;\n\n    var angleFunctions = _getCosAndSin(that.middleAngle);\n\n    var radiusInner = that.radiusInner;\n    var radiusOuter = that.radiusOuter;\n    return {\n      x: that.centerX + (radiusInner + (radiusOuter - radiusInner) / 2) * angleFunctions.cos,\n      y: that.centerY - (radiusInner + (radiusOuter - radiusInner) / 2) * angleFunctions.sin,\n      offset: 0\n    };\n  },\n  _translate: function _translate() {\n    var that = this;\n    var angle = that.shiftedAngle || 0;\n    var value = that.value;\n    var minValue = that.minValue;\n\n    var translator = that._getValTranslator();\n\n    that.fromAngle = translator.translate(minValue) + angle;\n    that.toAngle = translator.translate(value) + angle;\n    that.middleAngle = translator.translate((value - minValue) / 2 + minValue) + angle;\n\n    if (!that.isVisible()) {\n      that.middleAngle = that.toAngle = that.fromAngle = that.fromAngle || angle;\n    }\n  },\n  getMarkerVisibility: function getMarkerVisibility() {\n    return true;\n  },\n  _updateMarker: function _updateMarker(animationEnabled, style, _, callback) {\n    var that = this;\n\n    if (!animationEnabled) {\n      style = _extend({\n        x: that.centerX,\n        y: that.centerY,\n        outerRadius: that.radiusOuter,\n        innerRadius: that.radiusInner,\n        startAngle: that.toAngle,\n        endAngle: that.fromAngle\n      }, style);\n    }\n\n    that.graphic.smartAttr(style).sharp();\n    callback && callback();\n  },\n  getLegendStyles: function getLegendStyles() {\n    return this._styles.legendStyles;\n  },\n  isInVisibleArea: function isInVisibleArea() {\n    return true;\n  },\n  hide: function hide() {\n    var that = this;\n\n    if (that._visible) {\n      that._visible = false;\n      that.hideTooltip();\n\n      that._options.visibilityChanged();\n    }\n  },\n  show: function show() {\n    var that = this;\n\n    if (!that._visible) {\n      that._visible = true;\n\n      that._options.visibilityChanged();\n    }\n  },\n  setInvisibility: function setInvisibility() {\n    this._label.draw(false);\n  },\n  isVisible: function isVisible() {\n    return this._visible;\n  },\n  _getFormatObject: function _getFormatObject(tooltip) {\n    var formatObject = symbolPoint._getFormatObject.call(this, tooltip);\n\n    var percent = this.percent;\n    formatObject.percent = percent;\n    formatObject.percentText = tooltip.formatValue(percent, \"percent\");\n    return formatObject;\n  },\n  getColor: function getColor() {\n    return this._styles.normal.fill;\n  },\n  coordsIn: function coordsIn(x, y) {\n    var that = this;\n    var lx = x - that.centerX;\n    var ly = y - that.centerY;\n\n    var r = _sqrt(lx * lx + ly * ly);\n\n    var fromAngle = that.fromAngle % 360;\n    var toAngle = that.toAngle % 360;\n    var angle;\n\n    if (r < that.radiusInner || r > that.radiusOuter || 0 === r) {\n      return false;\n    }\n\n    angle = _acos(lx / r) * DEG * (ly > 0 ? -1 : 1);\n\n    if (angle < 0) {\n      angle += 360;\n    }\n\n    if (fromAngle === toAngle && _abs(that.toAngle - that.fromAngle) > 1e-4) {\n      return true;\n    } else {\n      return fromAngle >= toAngle ? angle <= fromAngle && angle >= toAngle : !(angle >= fromAngle && angle <= toAngle);\n    }\n  }\n});","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/series/points/pie_point.js"],"names":["extend","require","symbolPoint","_extend","_round","Math","_sqrt","_acos","DEG","_abs","vizUtils","_normalizeAngle","_getCosAndSin","_isDefined","getVerticallyShiftedAngularCoords","RADIAL_LABEL_INDENT","module","_updateData","that","argumentChanged","data","animate","x","y","outerRadius","innerRadius","startAngle","endAngle","fromAngle","delay","partitionDuration","duration","correctPosition","correction","correctRadius","correctLabelRadius","correctValue","base","_updateLabelData","_getShiftLabelCoords","bBox","coord","visibleArea","_getLabelPosition","options","_getLabelCoords","label","angleFunctions","position","radiusInner","radiusOuter","radiusLabels","columnsPosition","rad","_correctLabelCoord","labelWidth","rightBorderX","leftBorderX","angleOfPoint","centerX","connectorOffset","drawLabel","updateLabelCoord","_checkVerticalLabelPosition","box","_getLabelExtraCoord","shiftCoord","width","height","centerY","_checkHorizontalLabelPosition","applyWordWrap","rowCountChanged","moveLabelsFromCenter","setLabelTrackerData","_checkLabelPosition","_getLabelConnector","seriesStyle","strokeWidthBy2","borderWidth","angle","middleAngle","_drawMarker","toAngle","getTooltipParams","offset","_translate","value","minValue","translator","getMarkerVisibility","_updateMarker","style","callback","getLegendStyles","isInVisibleArea","hide","show","setInvisibility","isVisible","_getFormatObject","formatObject","percent","tooltip","getColor","coordsIn","lx","ly","r"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/series/points/pie_point.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar extend = require(\"../../../core/utils/extend\").extend;\r\nvar symbolPoint = require(\"./symbol_point\");\r\nvar _extend = extend;\r\nvar _round = Math.round;\r\nvar _sqrt = Math.sqrt;\r\nvar _acos = Math.acos;\r\nvar DEG = 180 / Math.PI;\r\nvar _abs = Math.abs;\r\nvar vizUtils = require(\"../../core/utils\");\r\nvar _normalizeAngle = vizUtils.normalizeAngle;\r\nvar _getCosAndSin = vizUtils.getCosAndSin;\r\nvar _isDefined = require(\"../../../core/utils/type\").isDefined;\r\nvar getVerticallyShiftedAngularCoords = vizUtils.getVerticallyShiftedAngularCoords;\r\nvar RADIAL_LABEL_INDENT = require(\"../../components/consts\").radialLabelIndent;\r\nmodule.exports = _extend({}, symbolPoint, {\r\n    _updateData: function(data, argumentChanged) {\r\n        var that = this;\r\n        symbolPoint._updateData.call(this, data);\r\n        if (argumentChanged || !_isDefined(that._visible)) {\r\n            that._visible = true\r\n        }\r\n        that.minValue = that.initialMinValue = that.originalMinValue = _isDefined(data.minValue) ? data.minValue : 0\r\n    },\r\n    animate: function(complete, duration, delay) {\r\n        var that = this;\r\n        that.graphic.animate({\r\n            x: that.centerX,\r\n            y: that.centerY,\r\n            outerRadius: that.radiusOuter,\r\n            innerRadius: that.radiusInner,\r\n            startAngle: that.toAngle,\r\n            endAngle: that.fromAngle\r\n        }, {\r\n            delay: delay,\r\n            partitionDuration: duration\r\n        }, complete)\r\n    },\r\n    correctPosition: function(correction) {\r\n        var that = this;\r\n        that.correctRadius(correction);\r\n        that.correctLabelRadius(correction.radiusOuter + RADIAL_LABEL_INDENT);\r\n        that.centerX = correction.centerX;\r\n        that.centerY = correction.centerY\r\n    },\r\n    correctRadius: function(correction) {\r\n        this.radiusInner = correction.radiusInner;\r\n        this.radiusOuter = correction.radiusOuter\r\n    },\r\n    correctLabelRadius: function(radiusLabels) {\r\n        this.radiusLabels = radiusLabels\r\n    },\r\n    correctValue: function(correction, percent, base) {\r\n        var that = this;\r\n        that.value = (base || that.normalInitialValue) + correction;\r\n        that.minValue = correction;\r\n        that.percent = percent;\r\n        that._label.setDataField(\"percent\", percent)\r\n    },\r\n    _updateLabelData: function() {\r\n        this._label.setData(this._getLabelFormatObject())\r\n    },\r\n    _getShiftLabelCoords: function() {\r\n        var that = this;\r\n        var bBox = that._label.getBoundingRect();\r\n        var coord = that._getLabelCoords(that._label);\r\n        var visibleArea = that._getVisibleArea();\r\n        if (that._isLabelDrawingWithoutPoints) {\r\n            return that._checkLabelPosition(coord, bBox, visibleArea)\r\n        } else {\r\n            return that._getLabelExtraCoord(coord, that._checkVerticalLabelPosition(coord, bBox, visibleArea), bBox)\r\n        }\r\n    },\r\n    _getLabelPosition: function(options) {\r\n        return options.position\r\n    },\r\n    _getLabelCoords: function(label) {\r\n        var that = this;\r\n        var bBox = label.getBoundingRect();\r\n        var options = label.getLayoutOptions();\r\n        var angleFunctions = _getCosAndSin(that.middleAngle);\r\n        var position = that._getLabelPosition(options);\r\n        var radiusInner = that.radiusInner;\r\n        var radiusOuter = that.radiusOuter;\r\n        var radiusLabels = that.radiusLabels;\r\n        var columnsPosition = \"columns\" === position;\r\n        var rad;\r\n        var x;\r\n        if (\"inside\" === position) {\r\n            rad = radiusInner + (radiusOuter - radiusInner) / 2 + options.radialOffset;\r\n            x = that.centerX + rad * angleFunctions.cos - bBox.width / 2\r\n        } else {\r\n            rad = radiusLabels + options.radialOffset;\r\n            if (angleFunctions.cos > .1 || columnsPosition && angleFunctions.cos >= 0) {\r\n                x = that.centerX + rad * angleFunctions.cos\r\n            } else {\r\n                if (angleFunctions.cos < -.1 || columnsPosition && angleFunctions.cos < 0) {\r\n                    x = that.centerX + rad * angleFunctions.cos - bBox.width\r\n                } else {\r\n                    x = that.centerX + rad * angleFunctions.cos - bBox.width / 2\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            x: x,\r\n            y: _round(that.centerY - rad * angleFunctions.sin - bBox.height / 2)\r\n        }\r\n    },\r\n    _correctLabelCoord: function(coord, moveLabelsFromCenter) {\r\n        var that = this;\r\n        var label = that._label;\r\n        var bBox = label.getBoundingRect();\r\n        var labelWidth = bBox.width;\r\n        var options = label.getLayoutOptions();\r\n        var visibleArea = that._getVisibleArea();\r\n        var rightBorderX = visibleArea.maxX - labelWidth;\r\n        var leftBorderX = visibleArea.minX;\r\n        var angleOfPoint = _normalizeAngle(that.middleAngle);\r\n        var centerX = that.centerX;\r\n        var connectorOffset = options.connectorOffset;\r\n        var x = coord.x;\r\n        if (\"columns\" === options.position) {\r\n            if (angleOfPoint <= 90 || angleOfPoint >= 270) {\r\n                x = rightBorderX\r\n            } else {\r\n                x = leftBorderX\r\n            }\r\n            coord.x = x\r\n        } else {\r\n            if (\"inside\" !== options.position && moveLabelsFromCenter) {\r\n                if (angleOfPoint <= 90 || angleOfPoint >= 270) {\r\n                    if (x - connectorOffset < centerX) {\r\n                        x = centerX + connectorOffset\r\n                    }\r\n                } else {\r\n                    if (x + labelWidth + connectorOffset > centerX) {\r\n                        x = centerX - labelWidth - connectorOffset\r\n                    }\r\n                }\r\n                coord.x = x\r\n            }\r\n        }\r\n        return coord\r\n    },\r\n    drawLabel: function() {\r\n        this.translate();\r\n        this._isLabelDrawingWithoutPoints = true;\r\n        this._drawLabel();\r\n        this._isLabelDrawingWithoutPoints = false\r\n    },\r\n    updateLabelCoord: function(moveLabelsFromCenter) {\r\n        var that = this;\r\n        var bBox = that._label.getBoundingRect();\r\n        var coord = that._correctLabelCoord(bBox, moveLabelsFromCenter);\r\n        coord = that._checkHorizontalLabelPosition(coord, bBox, that._getVisibleArea());\r\n        that._label.shift(_round(coord.x), _round(bBox.y))\r\n    },\r\n    _checkVerticalLabelPosition: function(coord, box, visibleArea) {\r\n        var x = coord.x;\r\n        var y = coord.y;\r\n        if (coord.y + box.height > visibleArea.maxY) {\r\n            y = visibleArea.maxY - box.height\r\n        } else {\r\n            if (coord.y < visibleArea.minY) {\r\n                y = visibleArea.minY\r\n            }\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    },\r\n    _getLabelExtraCoord: function(coord, shiftCoord, box) {\r\n        return coord.y !== shiftCoord.y ? getVerticallyShiftedAngularCoords({\r\n            x: coord.x,\r\n            y: coord.y,\r\n            width: box.width,\r\n            height: box.height\r\n        }, shiftCoord.y - coord.y, {\r\n            x: this.centerX,\r\n            y: this.centerY\r\n        }) : coord\r\n    },\r\n    _checkHorizontalLabelPosition: function(coord, box, visibleArea) {\r\n        var x = coord.x;\r\n        var y = coord.y;\r\n        if (coord.x + box.width > visibleArea.maxX) {\r\n            x = visibleArea.maxX - box.width\r\n        } else {\r\n            if (coord.x < visibleArea.minX) {\r\n                x = visibleArea.minX\r\n            }\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    },\r\n    applyWordWrap: function(moveLabelsFromCenter) {\r\n        var that = this;\r\n        var label = that._label;\r\n        var box = label.getBoundingRect();\r\n        var visibleArea = that._getVisibleArea();\r\n        var position = label.getLayoutOptions().position;\r\n        var width = box.width;\r\n        var rowCountChanged = false;\r\n        if (\"columns\" === position && that.series.index > 0) {\r\n            width = visibleArea.maxX - that.centerX - that.radiusLabels\r\n        } else {\r\n            if (\"inside\" === position) {\r\n                if (width > visibleArea.maxX - visibleArea.minX) {\r\n                    width = visibleArea.maxX - visibleArea.minX\r\n                }\r\n            } else {\r\n                if (moveLabelsFromCenter && box.x < that.centerX && box.width + box.x > that.centerX) {\r\n                    width = Math.floor((visibleArea.maxX - visibleArea.minX) / 2)\r\n                } else {\r\n                    if (box.x + width > visibleArea.maxX) {\r\n                        width = visibleArea.maxX - box.x\r\n                    } else {\r\n                        if (box.x < visibleArea.minX) {\r\n                            width = box.x + width - visibleArea.minX\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (width < box.width) {\r\n            rowCountChanged = label.fit(width)\r\n        }\r\n        return rowCountChanged\r\n    },\r\n    setLabelTrackerData: function() {\r\n        this._label.setTrackerData(this)\r\n    },\r\n    _checkLabelPosition: function(coord, bBox, visibleArea) {\r\n        coord = this._checkHorizontalLabelPosition(coord, bBox, visibleArea);\r\n        return this._checkVerticalLabelPosition(coord, bBox, visibleArea)\r\n    },\r\n    _getLabelConnector: function() {\r\n        var that = this;\r\n        var rad = that.radiusOuter;\r\n        var seriesStyle = that._options.styles.normal;\r\n        var strokeWidthBy2 = seriesStyle[\"stroke-width\"] / 2;\r\n        var borderWidth = that.series.getOptions().containerBackgroundColor === seriesStyle.stroke ? _round(strokeWidthBy2) : _round(-strokeWidthBy2);\r\n        var angleFunctions = _getCosAndSin(_round(that.middleAngle));\r\n        return {\r\n            x: _round(that.centerX + (rad - borderWidth) * angleFunctions.cos),\r\n            y: _round(that.centerY - (rad - borderWidth) * angleFunctions.sin),\r\n            angle: that.middleAngle\r\n        }\r\n    },\r\n    _drawMarker: function(renderer, group, animationEnabled, firstDrawing) {\r\n        var that = this;\r\n        var radiusOuter = that.radiusOuter;\r\n        var radiusInner = that.radiusInner;\r\n        var fromAngle = that.fromAngle;\r\n        var toAngle = that.toAngle;\r\n        if (animationEnabled) {\r\n            radiusInner = radiusOuter = 0;\r\n            if (!firstDrawing) {\r\n                fromAngle = toAngle = that.shiftedAngle\r\n            }\r\n        }\r\n        that.graphic = renderer.arc(that.centerX, that.centerY, radiusInner, radiusOuter, toAngle, fromAngle).attr({\r\n            \"stroke-linejoin\": \"round\"\r\n        }).smartAttr(that._getStyle()).data({\r\n            \"chart-data-point\": that\r\n        }).sharp().append(group)\r\n    },\r\n    getTooltipParams: function() {\r\n        var that = this;\r\n        var angleFunctions = _getCosAndSin(that.middleAngle);\r\n        var radiusInner = that.radiusInner;\r\n        var radiusOuter = that.radiusOuter;\r\n        return {\r\n            x: that.centerX + (radiusInner + (radiusOuter - radiusInner) / 2) * angleFunctions.cos,\r\n            y: that.centerY - (radiusInner + (radiusOuter - radiusInner) / 2) * angleFunctions.sin,\r\n            offset: 0\r\n        }\r\n    },\r\n    _translate: function() {\r\n        var that = this;\r\n        var angle = that.shiftedAngle || 0;\r\n        var value = that.value;\r\n        var minValue = that.minValue;\r\n        var translator = that._getValTranslator();\r\n        that.fromAngle = translator.translate(minValue) + angle;\r\n        that.toAngle = translator.translate(value) + angle;\r\n        that.middleAngle = translator.translate((value - minValue) / 2 + minValue) + angle;\r\n        if (!that.isVisible()) {\r\n            that.middleAngle = that.toAngle = that.fromAngle = that.fromAngle || angle\r\n        }\r\n    },\r\n    getMarkerVisibility: function() {\r\n        return true\r\n    },\r\n    _updateMarker: function(animationEnabled, style, _, callback) {\r\n        var that = this;\r\n        if (!animationEnabled) {\r\n            style = _extend({\r\n                x: that.centerX,\r\n                y: that.centerY,\r\n                outerRadius: that.radiusOuter,\r\n                innerRadius: that.radiusInner,\r\n                startAngle: that.toAngle,\r\n                endAngle: that.fromAngle\r\n            }, style)\r\n        }\r\n        that.graphic.smartAttr(style).sharp();\r\n        callback && callback()\r\n    },\r\n    getLegendStyles: function() {\r\n        return this._styles.legendStyles\r\n    },\r\n    isInVisibleArea: function() {\r\n        return true\r\n    },\r\n    hide: function() {\r\n        var that = this;\r\n        if (that._visible) {\r\n            that._visible = false;\r\n            that.hideTooltip();\r\n            that._options.visibilityChanged()\r\n        }\r\n    },\r\n    show: function() {\r\n        var that = this;\r\n        if (!that._visible) {\r\n            that._visible = true;\r\n            that._options.visibilityChanged()\r\n        }\r\n    },\r\n    setInvisibility: function() {\r\n        this._label.draw(false)\r\n    },\r\n    isVisible: function() {\r\n        return this._visible\r\n    },\r\n    _getFormatObject: function(tooltip) {\r\n        var formatObject = symbolPoint._getFormatObject.call(this, tooltip);\r\n        var percent = this.percent;\r\n        formatObject.percent = percent;\r\n        formatObject.percentText = tooltip.formatValue(percent, \"percent\");\r\n        return formatObject\r\n    },\r\n    getColor: function() {\r\n        return this._styles.normal.fill\r\n    },\r\n    coordsIn: function(x, y) {\r\n        var that = this;\r\n        var lx = x - that.centerX;\r\n        var ly = y - that.centerY;\r\n        var r = _sqrt(lx * lx + ly * ly);\r\n        var fromAngle = that.fromAngle % 360;\r\n        var toAngle = that.toAngle % 360;\r\n        var angle;\r\n        if (r < that.radiusInner || r > that.radiusOuter || 0 === r) {\r\n            return false\r\n        }\r\n        angle = _acos(lx / r) * DEG * (ly > 0 ? -1 : 1);\r\n        if (angle < 0) {\r\n            angle += 360\r\n        }\r\n        if (fromAngle === toAngle && _abs(that.toAngle - that.fromAngle) > 1e-4) {\r\n            return true\r\n        } else {\r\n            return fromAngle >= toAngle ? angle <= fromAngle && angle >= toAngle : !(angle >= fromAngle && angle <= toAngle)\r\n        }\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}