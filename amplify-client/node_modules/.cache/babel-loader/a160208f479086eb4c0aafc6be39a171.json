{"ast":null,"code":"/**\r\n * DevExtreme (ui/draggable.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar $ = require(\"../core/renderer\");\n\nvar window = require(\"../core/utils/window\").getWindow();\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar stringUtils = require(\"../core/utils/string\");\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar translator = require(\"../animation/translator\");\n\nvar Animator = require(\"./scroll_view/animator\");\n\nvar browser = require(\"../core/utils/browser\");\n\nvar dasherize = require(\"../core/utils/inflector\").dasherize;\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar DOMComponentWithTemplate = require(\"../core/dom_component_with_template\");\n\nvar getPublicElement = require(\"../core/utils/dom\").getPublicElement;\n\nvar eventUtils = require(\"../events/utils\");\n\nvar pointerEvents = require(\"../events/pointer\");\n\nvar dragEvents = require(\"../events/drag\");\n\nvar positionUtils = require(\"../animation/position\");\n\nvar typeUtils = require(\"../core/utils/type\");\n\nvar noop = require(\"../core/utils/common\").noop;\n\nvar viewPortUtils = require(\"../core/utils/view_port\");\n\nvar commonUtils = require(\"../core/utils/common\");\n\nvar EmptyTemplate = require(\"../core/templates/empty_template\").EmptyTemplate;\n\nvar deferredUtils = require(\"../core/utils/deferred\");\n\nvar when = deferredUtils.when;\nvar fromPromise = deferredUtils.fromPromise;\nvar DRAGGABLE = \"dxDraggable\";\nvar DRAGSTART_EVENT_NAME = eventUtils.addNamespace(dragEvents.start, DRAGGABLE);\nvar DRAG_EVENT_NAME = eventUtils.addNamespace(dragEvents.move, DRAGGABLE);\nvar DRAGEND_EVENT_NAME = eventUtils.addNamespace(dragEvents.end, DRAGGABLE);\nvar DRAG_ENTER_EVENT_NAME = eventUtils.addNamespace(dragEvents.enter, DRAGGABLE);\nvar DRAGEND_LEAVE_EVENT_NAME = eventUtils.addNamespace(dragEvents.leave, DRAGGABLE);\nvar POINTERDOWN_EVENT_NAME = eventUtils.addNamespace(pointerEvents.down, DRAGGABLE);\nvar CLONE_CLASS = \"clone\";\nvar targetDraggable;\nvar sourceDraggable;\n\nvar ScrollHelper = function () {\n  function ScrollHelper(orientation, component) {\n    _classCallCheck(this, ScrollHelper);\n\n    this._preventScroll = true;\n    this._component = component;\n\n    if (\"vertical\" === orientation) {\n      this._scrollValue = \"scrollTop\";\n      this._overFlowAttr = \"overflowY\";\n      this._sizeAttr = \"height\";\n      this._scrollSizeProp = \"scrollHeight\";\n      this._limitProps = {\n        start: \"top\",\n        end: \"bottom\"\n      };\n    } else {\n      this._scrollValue = \"scrollLeft\";\n      this._overFlowAttr = \"overflowX\";\n      this._sizeAttr = \"width\";\n      this._scrollSizeProp = \"scrollWidth\";\n      this._limitProps = {\n        start: \"left\",\n        end: \"right\"\n      };\n    }\n  }\n\n  _createClass(ScrollHelper, [{\n    key: \"updateScrollable\",\n    value: function value(elements, mousePosition) {\n      var that = this;\n\n      if (!elements.some(function (element) {\n        return that._trySetScrollable(element, mousePosition);\n      })) {\n        that._$scrollable = null;\n        that._scrollSpeed = 0;\n      }\n    }\n  }, {\n    key: \"isScrolling\",\n    value: function value() {\n      return !!this._scrollSpeed;\n    }\n  }, {\n    key: \"isScrollable\",\n    value: function value($element) {\n      var that = this;\n      return (\"auto\" === $element.css(that._overFlowAttr) || $element.hasClass(\"dx-scrollable-container\")) && $element.prop(that._scrollSizeProp) > $element[that._sizeAttr]();\n    }\n  }, {\n    key: \"_trySetScrollable\",\n    value: function value(element, mousePosition) {\n      var that = this;\n      var $element = $(element);\n      var distanceToBorders;\n\n      var sensitivity = that._component.option(\"scrollSensitivity\");\n\n      var isScrollable = that.isScrollable($element);\n\n      if (isScrollable) {\n        distanceToBorders = that._calculateDistanceToBorders($element, mousePosition);\n\n        if (sensitivity > distanceToBorders[that._limitProps.start]) {\n          if (!that._preventScroll) {\n            that._scrollSpeed = -that._calculateScrollSpeed(distanceToBorders[that._limitProps.start]);\n            that._$scrollable = $element;\n          }\n        } else {\n          if (sensitivity > distanceToBorders[that._limitProps.end]) {\n            if (!that._preventScroll) {\n              that._scrollSpeed = that._calculateScrollSpeed(distanceToBorders[that._limitProps.end]);\n              that._$scrollable = $element;\n            }\n          } else {\n            isScrollable = false;\n            that._preventScroll = false;\n          }\n        }\n      }\n\n      return isScrollable;\n    }\n  }, {\n    key: \"_calculateDistanceToBorders\",\n    value: function value($area, mousePosition) {\n      var area = $area.get(0);\n      var areaBoundingRect;\n\n      if (area) {\n        areaBoundingRect = area.getBoundingClientRect();\n        return {\n          left: mousePosition.x - areaBoundingRect.left,\n          top: mousePosition.y - areaBoundingRect.top,\n          right: areaBoundingRect.right - mousePosition.x,\n          bottom: areaBoundingRect.bottom - mousePosition.y\n        };\n      } else {\n        return {};\n      }\n    }\n  }, {\n    key: \"_calculateScrollSpeed\",\n    value: function value(distance) {\n      var component = this._component;\n      var sensitivity = component.option(\"scrollSensitivity\");\n      var maxSpeed = component.option(\"scrollSpeed\");\n      return Math.ceil(Math.pow((sensitivity - distance) / sensitivity, 2) * maxSpeed);\n    }\n  }, {\n    key: \"scrollByStep\",\n    value: function value() {\n      var that = this;\n      var nextScrollPosition;\n\n      if (that._$scrollable && that._scrollSpeed) {\n        if (that._$scrollable.hasClass(\"dx-scrollable-container\")) {\n          var $scrollable = that._$scrollable.closest(\".dx-scrollable\");\n\n          var scrollableInstance = $scrollable.data(\"dxScrollable\") || $scrollable.data(\"dxScrollView\");\n\n          if (scrollableInstance) {\n            nextScrollPosition = scrollableInstance.scrollOffset();\n            nextScrollPosition[that._limitProps.start] += that._scrollSpeed;\n            scrollableInstance.scrollTo(nextScrollPosition);\n          }\n        } else {\n          nextScrollPosition = that._$scrollable[that._scrollValue]() + that._scrollSpeed;\n\n          that._$scrollable[that._scrollValue](nextScrollPosition);\n        }\n\n        var dragMoveArgs = that._component._dragMoveArgs;\n\n        if (dragMoveArgs) {\n          that._component._dragMoveHandler(dragMoveArgs);\n        }\n      }\n    }\n  }, {\n    key: \"reset\",\n    value: function value() {\n      this._$scrollable = null;\n      this._scrollSpeed = 0;\n      this._preventScroll = true;\n    }\n  }, {\n    key: \"isOutsideScrollable\",\n    value: function value(target, event) {\n      var component = this._component;\n\n      if (!component._$scrollable || !target.closest(component._$scrollable).length) {\n        return false;\n      }\n\n      var scrollableSize = component._$scrollable.get(0).getBoundingClientRect();\n\n      var start = scrollableSize[this._limitProps.start];\n      var size = scrollableSize[this._sizeAttr];\n      var location = \"width\" === this._sizeAttr ? event.pageX : event.pageY;\n      return location < start || location > start + size;\n    }\n  }]);\n\n  return ScrollHelper;\n}();\n\nvar ScrollAnimator = Animator.inherit({\n  ctor: function ctor(strategy) {\n    this.callBase();\n    this._strategy = strategy;\n  },\n  _step: function _step() {\n    var horizontalScrollHelper = this._strategy._horizontalScrollHelper;\n    var verticalScrollHelper = this._strategy._verticalScrollHelper;\n    horizontalScrollHelper && horizontalScrollHelper.scrollByStep();\n    verticalScrollHelper && verticalScrollHelper.scrollByStep();\n  }\n});\nvar Draggable = DOMComponentWithTemplate.inherit({\n  reset: noop,\n  dragMove: noop,\n  dragEnter: noop,\n  dragLeave: noop,\n  dragEnd: function dragEnd(sourceEvent) {\n    var sourceDraggable = this._getSourceDraggable();\n\n    sourceDraggable._fireRemoveEvent(sourceEvent);\n  },\n  _fireRemoveEvent: noop,\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      onDragStart: null,\n      onDragMove: null,\n      onDragEnd: null,\n      onDrop: null,\n      immediate: true,\n      dragDirection: \"both\",\n      boundary: void 0,\n      boundOffset: 0,\n      allowMoveByClick: false,\n      itemData: null,\n      container: void 0,\n      dragTemplate: void 0,\n      contentTemplate: \"content\",\n      handle: \"\",\n      filter: \"\",\n      clone: false,\n      autoScroll: true,\n      scrollSpeed: 30,\n      scrollSensitivity: 60,\n      group: void 0,\n      data: void 0\n    });\n  },\n  _setOptionsByReference: function _setOptionsByReference() {\n    this.callBase.apply(this, arguments);\n    extend(this._optionsByReference, {\n      component: true,\n      group: true,\n      itemData: true,\n      data: true\n    });\n  },\n  _init: function _init() {\n    this.callBase();\n\n    this._attachEventHandlers();\n\n    this._scrollAnimator = new ScrollAnimator(this);\n    this._horizontalScrollHelper = new ScrollHelper(\"horizontal\", this);\n    this._verticalScrollHelper = new ScrollHelper(\"vertical\", this);\n  },\n  _normalizeCursorOffset: function _normalizeCursorOffset(offset) {\n    if (typeUtils.isObject(offset)) {\n      offset = {\n        h: offset.x,\n        v: offset.y\n      };\n    }\n\n    offset = commonUtils.splitPair(offset).map(function (value) {\n      return parseFloat(value);\n    });\n    return {\n      left: offset[0],\n      top: 1 === offset.length ? offset[0] : offset[1]\n    };\n  },\n  _getNormalizedCursorOffset: function _getNormalizedCursorOffset(offset, options) {\n    if (typeUtils.isFunction(offset)) {\n      offset = offset.call(this, options);\n    }\n\n    return this._normalizeCursorOffset(offset);\n  },\n  _calculateElementOffset: function _calculateElementOffset(options) {\n    var elementOffset;\n    var dragElementOffset;\n    var event = options.event;\n    var $element = $(options.itemElement);\n    var $dragElement = $(options.dragElement);\n\n    var isCloned = this._dragElementIsCloned();\n\n    var cursorOffset = this.option(\"cursorOffset\");\n    var normalizedCursorOffset = {\n      left: 0,\n      top: 0\n    };\n    var currentLocate = this._initialLocate = translator.locate($dragElement);\n\n    if (isCloned || options.initialOffset || cursorOffset) {\n      elementOffset = options.initialOffset || $element.offset();\n\n      if (cursorOffset) {\n        normalizedCursorOffset = this._getNormalizedCursorOffset(cursorOffset, options);\n\n        if (isFinite(normalizedCursorOffset.left)) {\n          elementOffset.left = event.pageX;\n        }\n\n        if (isFinite(normalizedCursorOffset.top)) {\n          elementOffset.top = event.pageY;\n        }\n      }\n\n      dragElementOffset = $dragElement.offset();\n      elementOffset.top -= dragElementOffset.top + (normalizedCursorOffset.top || 0) - currentLocate.top;\n      elementOffset.left -= dragElementOffset.left + (normalizedCursorOffset.left || 0) - currentLocate.left;\n    }\n\n    return elementOffset;\n  },\n  _initPosition: function _initPosition(options) {\n    var $dragElement = $(options.dragElement);\n\n    var elementOffset = this._calculateElementOffset(options);\n\n    if (elementOffset) {\n      this._move(elementOffset, $dragElement);\n    }\n\n    this._startPosition = translator.locate($dragElement);\n  },\n  _startAnimator: function _startAnimator() {\n    if (!this._scrollAnimator.inProgress()) {\n      this._scrollAnimator.start();\n    }\n  },\n  _stopAnimator: function _stopAnimator() {\n    this._scrollAnimator.stop();\n  },\n  _addWidgetPrefix: function _addWidgetPrefix(className) {\n    var componentName = this.NAME;\n    return dasherize(componentName) + (className ? \"-\" + className : \"\");\n  },\n  _getItemsSelector: function _getItemsSelector() {\n    return this.option(\"filter\") || \"\";\n  },\n  _$content: function _$content() {\n    var $element = this.$element();\n    var $wrapper = $element.children(\".dx-template-wrapper\");\n    return $wrapper.length ? $wrapper : $element;\n  },\n  _attachEventHandlers: function _attachEventHandlers() {\n    var _this = this;\n\n    if (this.option(\"disabled\")) {\n      return;\n    }\n\n    var $element = this._$content();\n\n    var itemsSelector = this._getItemsSelector();\n\n    var allowMoveByClick = this.option(\"allowMoveByClick\");\n    var data = {\n      direction: this.option(\"dragDirection\"),\n      immediate: this.option(\"immediate\"),\n      checkDropTarget: function checkDropTarget(target, event) {\n        var targetGroup = _this.option(\"group\");\n\n        var sourceGroup = _this._getSourceDraggable().option(\"group\");\n\n        if (_this._verticalScrollHelper.isOutsideScrollable(target, event) || _this._horizontalScrollHelper.isOutsideScrollable(target, event)) {\n          return false;\n        }\n\n        return sourceGroup && sourceGroup === targetGroup;\n      }\n    };\n\n    if (allowMoveByClick) {\n      $element = this._getArea();\n      eventsEngine.on($element, POINTERDOWN_EVENT_NAME, data, this._pointerDownHandler.bind(this));\n    }\n\n    if (\">\" === itemsSelector[0]) {\n      itemsSelector = itemsSelector.slice(1);\n    }\n\n    eventsEngine.on($element, DRAGSTART_EVENT_NAME, itemsSelector, data, this._dragStartHandler.bind(this));\n    eventsEngine.on($element, DRAG_EVENT_NAME, data, this._dragMoveHandler.bind(this));\n    eventsEngine.on($element, DRAGEND_EVENT_NAME, data, this._dragEndHandler.bind(this));\n    eventsEngine.on($element, DRAG_ENTER_EVENT_NAME, data, this._dragEnterHandler.bind(this));\n    eventsEngine.on($element, DRAGEND_LEAVE_EVENT_NAME, data, this._dragLeaveHandler.bind(this));\n  },\n  _dragElementIsCloned: function _dragElementIsCloned() {\n    return this._$dragElement && this._$dragElement.hasClass(this._addWidgetPrefix(CLONE_CLASS));\n  },\n  _getDragTemplateArgs: function _getDragTemplateArgs($element, $container) {\n    return {\n      container: getPublicElement($container),\n      model: {\n        itemData: this.option(\"itemData\"),\n        itemElement: getPublicElement($element)\n      }\n    };\n  },\n  _createDragElement: function _createDragElement($element) {\n    var result = $element;\n    var clone = this.option(\"clone\");\n\n    var $container = this._getContainer();\n\n    var template = this.option(\"dragTemplate\");\n\n    if (template) {\n      template = this._getTemplate(template);\n      result = $(\"<div>\").appendTo($container);\n      template.render(this._getDragTemplateArgs($element, result));\n    } else {\n      if (clone) {\n        result = $(\"<div>\").appendTo($container);\n        $element.clone().css({\n          width: $element.css(\"width\"),\n          height: $element.css(\"height\")\n        }).appendTo(result);\n      }\n    }\n\n    return result.toggleClass(this._addWidgetPrefix(CLONE_CLASS), result.get(0) !== $element.get(0));\n  },\n  _resetDragElement: function _resetDragElement() {\n    if (this._dragElementIsCloned()) {\n      this._$dragElement.remove();\n    } else {\n      this._toggleDraggingClass(false);\n    }\n\n    this._$dragElement = null;\n  },\n  _resetSourceElement: function _resetSourceElement() {\n    this._toggleDragSourceClass(false);\n\n    this._$sourceElement = null;\n  },\n  _detachEventHandlers: function _detachEventHandlers() {\n    eventsEngine.off(this._$content(), \".\" + DRAGGABLE);\n    eventsEngine.off(this._getArea(), \".\" + DRAGGABLE);\n  },\n  _move: function _move(position, $element) {\n    translator.move($element || this._$dragElement, position);\n  },\n  _getDraggableElement: function _getDraggableElement(e) {\n    var $sourceElement = this._getSourceElement();\n\n    if ($sourceElement) {\n      return $sourceElement;\n    }\n\n    var allowMoveByClick = this.option(\"allowMoveByClick\");\n\n    if (allowMoveByClick) {\n      return this.$element();\n    }\n\n    var $target = $(e && e.target);\n\n    var itemsSelector = this._getItemsSelector();\n\n    if (\">\" === itemsSelector[0]) {\n      var $items = this._$content().find(itemsSelector);\n\n      if (!$items.is($target)) {\n        $target = $target.closest($items);\n      }\n    }\n\n    return $target;\n  },\n  _getSourceElement: function _getSourceElement() {\n    var draggable = this._getSourceDraggable();\n\n    return draggable._$sourceElement;\n  },\n  _pointerDownHandler: function _pointerDownHandler(e) {\n    if (eventUtils.needSkipEvent(e)) {\n      return;\n    }\n\n    var position = {};\n    var $element = this.$element();\n    var dragDirection = this.option(\"dragDirection\");\n\n    if (\"horizontal\" === dragDirection || \"both\" === dragDirection) {\n      position.left = e.pageX - $element.offset().left + translator.locate($element).left - $element.width() / 2;\n    }\n\n    if (\"vertical\" === dragDirection || \"both\" === dragDirection) {\n      position.top = e.pageY - $element.offset().top + translator.locate($element).top - $element.height() / 2;\n    }\n\n    this._move(position, $element);\n\n    this._getAction(\"onDragMove\")(this._getEventArgs(e));\n  },\n  _isValidElement: function _isValidElement(event, $element) {\n    var handle = this.option(\"handle\");\n    var $target = $(event.originalEvent && event.originalEvent.target);\n\n    if (handle && !$target.closest(handle).length) {\n      return false;\n    }\n\n    if (!$element.length) {\n      return false;\n    }\n\n    return !$element.is(\".dx-state-disabled, .dx-state-disabled *\");\n  },\n  _dragStartHandler: function _dragStartHandler(e) {\n    var $dragElement;\n    var initialOffset;\n    var isFixedPosition;\n\n    var $element = this._getDraggableElement(e);\n\n    if (this._$sourceElement) {\n      return;\n    }\n\n    if (!this._isValidElement(e, $element)) {\n      e.cancel = true;\n      return;\n    }\n\n    var dragStartArgs = this._getDragStartArgs(e, $element);\n\n    this._getAction(\"onDragStart\")(dragStartArgs);\n\n    if (dragStartArgs.cancel) {\n      e.cancel = true;\n      return;\n    }\n\n    this.option(\"itemData\", dragStartArgs.itemData);\n\n    this._setSourceDraggable();\n\n    this._$sourceElement = $element;\n    initialOffset = $element.offset();\n    $dragElement = this._$dragElement = this._createDragElement($element);\n\n    this._toggleDraggingClass(true);\n\n    this._toggleDragSourceClass(true);\n\n    isFixedPosition = \"fixed\" === $dragElement.css(\"position\");\n\n    this._initPosition(extend({}, dragStartArgs, {\n      dragElement: $dragElement.get(0),\n      initialOffset: isFixedPosition && initialOffset\n    }));\n\n    var $area = this._getArea();\n\n    var areaOffset = this._getAreaOffset($area);\n\n    var boundOffset = this._getBoundOffset();\n\n    var areaWidth = $area.outerWidth();\n    var areaHeight = $area.outerHeight();\n    var elementWidth = $dragElement.width();\n    var elementHeight = $dragElement.height();\n    var startOffset = {\n      left: $dragElement.offset().left - areaOffset.left,\n      top: $dragElement.offset().top - areaOffset.top\n    };\n\n    if ($area.length) {\n      e.maxLeftOffset = startOffset.left - boundOffset.left;\n      e.maxRightOffset = areaWidth - startOffset.left - elementWidth - boundOffset.right;\n      e.maxTopOffset = startOffset.top - boundOffset.top;\n      e.maxBottomOffset = areaHeight - startOffset.top - elementHeight - boundOffset.bottom;\n    }\n\n    if (this.option(\"autoScroll\")) {\n      this._startAnimator();\n    }\n  },\n  _getAreaOffset: function _getAreaOffset($area) {\n    var offset = $area && positionUtils.offset($area);\n    return offset ? offset : {\n      left: 0,\n      top: 0\n    };\n  },\n  _toggleDraggingClass: function _toggleDraggingClass(value) {\n    this._$dragElement && this._$dragElement.toggleClass(this._addWidgetPrefix(\"dragging\"), value);\n  },\n  _toggleDragSourceClass: function _toggleDragSourceClass(value, $element) {\n    var $sourceElement = $element || this._$sourceElement;\n    $sourceElement && $sourceElement.toggleClass(this._addWidgetPrefix(\"source\"), value);\n  },\n  _getBoundOffset: function _getBoundOffset() {\n    var boundOffset = this.option(\"boundOffset\");\n\n    if (typeUtils.isFunction(boundOffset)) {\n      boundOffset = boundOffset.call(this);\n    }\n\n    return stringUtils.quadToObject(boundOffset);\n  },\n  _getArea: function _getArea() {\n    var area = this.option(\"boundary\");\n\n    if (typeUtils.isFunction(area)) {\n      area = area.call(this);\n    }\n\n    return $(area);\n  },\n  _getContainer: function _getContainer() {\n    var container = this.option(\"container\");\n\n    if (void 0 === container) {\n      container = viewPortUtils.value();\n    }\n\n    return $(container);\n  },\n  _dragMoveHandler: function _dragMoveHandler(e) {\n    this._dragMoveArgs = e;\n\n    if (!this._$dragElement) {\n      e.cancel = true;\n      return;\n    }\n\n    var offset = e.offset;\n    var startPosition = this._startPosition;\n\n    this._move({\n      left: startPosition.left + offset.x,\n      top: startPosition.top + offset.y\n    });\n\n    this._updateScrollable(e);\n\n    var eventArgs = this._getEventArgs(e);\n\n    this._getAction(\"onDragMove\")(eventArgs);\n\n    if (true === eventArgs.cancel) {\n      return;\n    }\n\n    var targetDraggable = this._getTargetDraggable();\n\n    targetDraggable.dragMove(e);\n  },\n  _updateScrollable: function _updateScrollable(e) {\n    var that = this;\n\n    var $sourceElement = that._getSourceElement();\n\n    that._$scrollable = null;\n    $sourceElement.parents().toArray().some(function (element) {\n      var $element = $(element);\n\n      if (that._horizontalScrollHelper.isScrollable($element) || that._verticalScrollHelper.isScrollable($element)) {\n        that._$scrollable = $element;\n        return true;\n      }\n    });\n\n    if (that.option(\"autoScroll\")) {\n      var $window = $(window);\n      var mousePosition = {\n        x: e.pageX - $window.scrollLeft(),\n        y: e.pageY - $window.scrollTop()\n      };\n      var allObjects = that.getElementsFromPoint(mousePosition);\n\n      that._verticalScrollHelper.updateScrollable(allObjects, mousePosition);\n\n      that._horizontalScrollHelper.updateScrollable(allObjects, mousePosition);\n    }\n  },\n  getElementsFromPoint: function getElementsFromPoint(position) {\n    var ownerDocument = this._$dragElement.get(0).ownerDocument;\n\n    if (browser.msie) {\n      var msElements = ownerDocument.msElementsFromPoint(position.x, position.y);\n\n      if (msElements) {\n        return Array.prototype.slice.call(msElements);\n      }\n\n      return [];\n    }\n\n    return ownerDocument.elementsFromPoint(position.x, position.y);\n  },\n  _defaultActionArgs: function _defaultActionArgs() {\n    var args = this.callBase.apply(this, arguments);\n    var component = this.option(\"component\");\n\n    if (component) {\n      args.component = component;\n      args.element = component.element();\n    }\n\n    return args;\n  },\n  _getEventArgs: function _getEventArgs(e) {\n    var sourceDraggable = this._getSourceDraggable();\n\n    var targetDraggable = this._getTargetDraggable();\n\n    return {\n      event: e,\n      itemData: sourceDraggable.option(\"itemData\"),\n      itemElement: getPublicElement(sourceDraggable._$sourceElement),\n      fromComponent: sourceDraggable.option(\"component\") || sourceDraggable,\n      toComponent: targetDraggable.option(\"component\") || targetDraggable,\n      fromData: sourceDraggable.option(\"data\"),\n      toData: targetDraggable.option(\"data\")\n    };\n  },\n  _getDragStartArgs: function _getDragStartArgs(e, $itemElement) {\n    var args = this._getEventArgs(e);\n\n    return {\n      event: args.event,\n      itemData: args.itemData,\n      itemElement: $itemElement,\n      fromData: args.fromData\n    };\n  },\n  _revertItemToInitialPosition: function _revertItemToInitialPosition() {\n    !this._dragElementIsCloned() && this._move(this._initialLocate, this._$sourceElement);\n  },\n  _dragEndHandler: function _dragEndHandler(e) {\n    var _this2 = this;\n\n    var dragEndEventArgs = this._getEventArgs(e);\n\n    var dropEventArgs = this._getEventArgs(e);\n\n    var targetDraggable = this._getTargetDraggable();\n\n    var needRevertPosition = true;\n\n    try {\n      this._getAction(\"onDragEnd\")(dragEndEventArgs);\n    } finally {\n      when(fromPromise(dragEndEventArgs.cancel)).done(function (cancel) {\n        if (!cancel) {\n          if (targetDraggable !== _this2) {\n            targetDraggable._getAction(\"onDrop\")(dropEventArgs);\n          }\n\n          if (!dropEventArgs.cancel) {\n            targetDraggable.dragEnd(dragEndEventArgs);\n            needRevertPosition = false;\n          }\n        }\n      }).always(function () {\n        if (needRevertPosition) {\n          _this2._revertItemToInitialPosition();\n        }\n\n        _this2.reset();\n\n        targetDraggable.reset();\n\n        _this2._stopAnimator();\n\n        _this2._horizontalScrollHelper.reset();\n\n        _this2._verticalScrollHelper.reset();\n\n        _this2._resetDragElement();\n\n        _this2._resetSourceElement();\n\n        _this2._resetTargetDraggable();\n\n        _this2._resetSourceDraggable();\n      });\n    }\n  },\n  _dragEnterHandler: function _dragEnterHandler(e) {\n    this._setTargetDraggable();\n\n    var sourceDraggable = this._getSourceDraggable();\n\n    sourceDraggable.dragEnter(e);\n  },\n  _dragLeaveHandler: function _dragLeaveHandler(e) {\n    this._resetTargetDraggable();\n\n    if (this !== this._getSourceDraggable()) {\n      this.reset();\n    }\n\n    var sourceDraggable = this._getSourceDraggable();\n\n    sourceDraggable.dragLeave(e);\n  },\n  _getAction: function _getAction(name) {\n    return this[\"_\" + name + \"Action\"] || this._createActionByOption(name);\n  },\n  _getAnonymousTemplateName: function _getAnonymousTemplateName() {\n    return \"content\";\n  },\n  _initTemplates: function _initTemplates() {\n    if (!this.option(\"contentTemplate\")) {\n      return;\n    }\n\n    this.callBase.apply(this, arguments);\n    this._defaultTemplates.content = new EmptyTemplate();\n  },\n  _render: function _render() {\n    this.callBase();\n    this.$element().addClass(this._addWidgetPrefix());\n    var transclude = this._getAnonymousTemplateName() === this.option(\"contentTemplate\");\n\n    var template = this._getTemplateByOption(\"contentTemplate\");\n\n    if (template) {\n      $(template.render({\n        container: this.element(),\n        transclude: transclude\n      }));\n    }\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name;\n\n    switch (name) {\n      case \"onDragStart\":\n      case \"onDragMove\":\n      case \"onDragEnd\":\n      case \"onDrop\":\n        this[\"_\" + name + \"Action\"] = this._createActionByOption(name);\n        break;\n\n      case \"dragTemplate\":\n      case \"contentTemplate\":\n      case \"container\":\n      case \"clone\":\n        this._resetDragElement();\n\n        break;\n\n      case \"allowMoveByClick\":\n      case \"dragDirection\":\n      case \"disabled\":\n      case \"boundary\":\n      case \"filter\":\n      case \"immediate\":\n        this._resetDragElement();\n\n        this._detachEventHandlers();\n\n        this._attachEventHandlers();\n\n        break;\n\n      case \"autoScroll\":\n        this._verticalScrollHelper.reset();\n\n        this._horizontalScrollHelper.reset();\n\n        break;\n\n      case \"scrollSensitivity\":\n      case \"scrollSpeed\":\n      case \"boundOffset\":\n      case \"handle\":\n      case \"group\":\n      case \"data\":\n      case \"itemData\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _getTargetDraggable: function _getTargetDraggable() {\n    return targetDraggable || this;\n  },\n  _getSourceDraggable: function _getSourceDraggable() {\n    return sourceDraggable || this;\n  },\n  _setTargetDraggable: function _setTargetDraggable() {\n    var currentGroup = this.option(\"group\");\n\n    var sourceDraggable = this._getSourceDraggable();\n\n    if (currentGroup && currentGroup === sourceDraggable.option(\"group\")) {\n      targetDraggable = this;\n    }\n  },\n  _setSourceDraggable: function _setSourceDraggable() {\n    sourceDraggable = this;\n  },\n  _resetSourceDraggable: function _resetSourceDraggable() {\n    sourceDraggable = null;\n  },\n  _resetTargetDraggable: function _resetTargetDraggable() {\n    targetDraggable = null;\n  },\n  _dispose: function _dispose() {\n    this.callBase();\n\n    this._detachEventHandlers();\n\n    this._resetDragElement();\n\n    this._resetTargetDraggable();\n\n    this._resetSourceDraggable();\n\n    this._$sourceElement = null;\n\n    this._stopAnimator();\n  }\n});\nregisterComponent(DRAGGABLE, Draggable);\nmodule.exports = Draggable;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/draggable.js"],"names":["instance","i","props","descriptor","Object","_defineProperties","Constructor","$","require","window","eventsEngine","stringUtils","registerComponent","translator","Animator","browser","dasherize","extend","DOMComponentWithTemplate","getPublicElement","eventUtils","pointerEvents","dragEvents","positionUtils","typeUtils","noop","viewPortUtils","commonUtils","EmptyTemplate","deferredUtils","when","fromPromise","DRAGGABLE","DRAGSTART_EVENT_NAME","DRAG_EVENT_NAME","DRAGEND_EVENT_NAME","DRAG_ENTER_EVENT_NAME","DRAGEND_LEAVE_EVENT_NAME","POINTERDOWN_EVENT_NAME","CLONE_CLASS","ScrollHelper","_classCallCheck","start","end","_createClass","key","value","that","$element","sensitivity","isScrollable","distanceToBorders","area","$area","areaBoundingRect","left","mousePosition","top","right","bottom","y","component","maxSpeed","Math","$scrollable","scrollableInstance","nextScrollPosition","dragMoveArgs","target","scrollableSize","size","location","event","ScrollAnimator","ctor","_step","horizontalScrollHelper","verticalScrollHelper","Draggable","reset","dragMove","dragEnter","dragLeave","dragEnd","sourceDraggable","_fireRemoveEvent","_getDefaultOptions","onDragStart","onDragMove","onDragEnd","onDrop","immediate","dragDirection","boundary","boundOffset","allowMoveByClick","itemData","container","dragTemplate","contentTemplate","handle","filter","clone","autoScroll","scrollSpeed","scrollSensitivity","group","data","_setOptionsByReference","_init","_normalizeCursorOffset","offset","h","v","parseFloat","_getNormalizedCursorOffset","_calculateElementOffset","options","$dragElement","isCloned","cursorOffset","normalizedCursorOffset","currentLocate","elementOffset","isFinite","dragElementOffset","_initPosition","_startAnimator","_stopAnimator","_addWidgetPrefix","componentName","className","_getItemsSelector","_$content","$wrapper","_attachEventHandlers","_this","itemsSelector","direction","checkDropTarget","targetGroup","sourceGroup","_dragElementIsCloned","_getDragTemplateArgs","model","itemElement","_createDragElement","result","$container","template","width","height","_resetDragElement","_resetSourceElement","_detachEventHandlers","_move","_getDraggableElement","$sourceElement","$target","e","$items","_getSourceElement","draggable","_pointerDownHandler","position","_isValidElement","_dragStartHandler","dragStartArgs","initialOffset","isFixedPosition","dragElement","areaOffset","areaWidth","areaHeight","elementWidth","elementHeight","startOffset","_getAreaOffset","_toggleDraggingClass","_toggleDragSourceClass","_getBoundOffset","_getArea","_getContainer","_dragMoveHandler","startPosition","eventArgs","targetDraggable","_updateScrollable","$window","x","allObjects","getElementsFromPoint","ownerDocument","msElements","Array","_defaultActionArgs","args","_getEventArgs","fromComponent","toComponent","fromData","toData","_getDragStartArgs","_revertItemToInitialPosition","_dragEndHandler","_this2","dragEndEventArgs","dropEventArgs","needRevertPosition","_dragEnterHandler","_dragLeaveHandler","_getAction","_getAnonymousTemplateName","_initTemplates","_render","transclude","_optionChanged","name","_getTargetDraggable","_getSourceDraggable","_setTargetDraggable","currentGroup","_setSourceDraggable","_resetSourceDraggable","_resetTargetDraggable","_dispose","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/draggable.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar $ = require(\"../core/renderer\");\r\nvar window = require(\"../core/utils/window\").getWindow();\r\nvar eventsEngine = require(\"../events/core/events_engine\");\r\nvar stringUtils = require(\"../core/utils/string\");\r\nvar registerComponent = require(\"../core/component_registrator\");\r\nvar translator = require(\"../animation/translator\");\r\nvar Animator = require(\"./scroll_view/animator\");\r\nvar browser = require(\"../core/utils/browser\");\r\nvar dasherize = require(\"../core/utils/inflector\").dasherize;\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar DOMComponentWithTemplate = require(\"../core/dom_component_with_template\");\r\nvar getPublicElement = require(\"../core/utils/dom\").getPublicElement;\r\nvar eventUtils = require(\"../events/utils\");\r\nvar pointerEvents = require(\"../events/pointer\");\r\nvar dragEvents = require(\"../events/drag\");\r\nvar positionUtils = require(\"../animation/position\");\r\nvar typeUtils = require(\"../core/utils/type\");\r\nvar noop = require(\"../core/utils/common\").noop;\r\nvar viewPortUtils = require(\"../core/utils/view_port\");\r\nvar commonUtils = require(\"../core/utils/common\");\r\nvar EmptyTemplate = require(\"../core/templates/empty_template\").EmptyTemplate;\r\nvar deferredUtils = require(\"../core/utils/deferred\");\r\nvar when = deferredUtils.when;\r\nvar fromPromise = deferredUtils.fromPromise;\r\nvar DRAGGABLE = \"dxDraggable\";\r\nvar DRAGSTART_EVENT_NAME = eventUtils.addNamespace(dragEvents.start, DRAGGABLE);\r\nvar DRAG_EVENT_NAME = eventUtils.addNamespace(dragEvents.move, DRAGGABLE);\r\nvar DRAGEND_EVENT_NAME = eventUtils.addNamespace(dragEvents.end, DRAGGABLE);\r\nvar DRAG_ENTER_EVENT_NAME = eventUtils.addNamespace(dragEvents.enter, DRAGGABLE);\r\nvar DRAGEND_LEAVE_EVENT_NAME = eventUtils.addNamespace(dragEvents.leave, DRAGGABLE);\r\nvar POINTERDOWN_EVENT_NAME = eventUtils.addNamespace(pointerEvents.down, DRAGGABLE);\r\nvar CLONE_CLASS = \"clone\";\r\nvar targetDraggable;\r\nvar sourceDraggable;\r\nvar ScrollHelper = function() {\r\n    function ScrollHelper(orientation, component) {\r\n        _classCallCheck(this, ScrollHelper);\r\n        this._preventScroll = true;\r\n        this._component = component;\r\n        if (\"vertical\" === orientation) {\r\n            this._scrollValue = \"scrollTop\";\r\n            this._overFlowAttr = \"overflowY\";\r\n            this._sizeAttr = \"height\";\r\n            this._scrollSizeProp = \"scrollHeight\";\r\n            this._limitProps = {\r\n                start: \"top\",\r\n                end: \"bottom\"\r\n            }\r\n        } else {\r\n            this._scrollValue = \"scrollLeft\";\r\n            this._overFlowAttr = \"overflowX\";\r\n            this._sizeAttr = \"width\";\r\n            this._scrollSizeProp = \"scrollWidth\";\r\n            this._limitProps = {\r\n                start: \"left\",\r\n                end: \"right\"\r\n            }\r\n        }\r\n    }\r\n    _createClass(ScrollHelper, [{\r\n        key: \"updateScrollable\",\r\n        value: function(elements, mousePosition) {\r\n            var that = this;\r\n            if (!elements.some(function(element) {\r\n                    return that._trySetScrollable(element, mousePosition)\r\n                })) {\r\n                that._$scrollable = null;\r\n                that._scrollSpeed = 0\r\n            }\r\n        }\r\n    }, {\r\n        key: \"isScrolling\",\r\n        value: function() {\r\n            return !!this._scrollSpeed\r\n        }\r\n    }, {\r\n        key: \"isScrollable\",\r\n        value: function($element) {\r\n            var that = this;\r\n            return (\"auto\" === $element.css(that._overFlowAttr) || $element.hasClass(\"dx-scrollable-container\")) && $element.prop(that._scrollSizeProp) > $element[that._sizeAttr]()\r\n        }\r\n    }, {\r\n        key: \"_trySetScrollable\",\r\n        value: function(element, mousePosition) {\r\n            var that = this;\r\n            var $element = $(element);\r\n            var distanceToBorders;\r\n            var sensitivity = that._component.option(\"scrollSensitivity\");\r\n            var isScrollable = that.isScrollable($element);\r\n            if (isScrollable) {\r\n                distanceToBorders = that._calculateDistanceToBorders($element, mousePosition);\r\n                if (sensitivity > distanceToBorders[that._limitProps.start]) {\r\n                    if (!that._preventScroll) {\r\n                        that._scrollSpeed = -that._calculateScrollSpeed(distanceToBorders[that._limitProps.start]);\r\n                        that._$scrollable = $element\r\n                    }\r\n                } else {\r\n                    if (sensitivity > distanceToBorders[that._limitProps.end]) {\r\n                        if (!that._preventScroll) {\r\n                            that._scrollSpeed = that._calculateScrollSpeed(distanceToBorders[that._limitProps.end]);\r\n                            that._$scrollable = $element\r\n                        }\r\n                    } else {\r\n                        isScrollable = false;\r\n                        that._preventScroll = false\r\n                    }\r\n                }\r\n            }\r\n            return isScrollable\r\n        }\r\n    }, {\r\n        key: \"_calculateDistanceToBorders\",\r\n        value: function($area, mousePosition) {\r\n            var area = $area.get(0);\r\n            var areaBoundingRect;\r\n            if (area) {\r\n                areaBoundingRect = area.getBoundingClientRect();\r\n                return {\r\n                    left: mousePosition.x - areaBoundingRect.left,\r\n                    top: mousePosition.y - areaBoundingRect.top,\r\n                    right: areaBoundingRect.right - mousePosition.x,\r\n                    bottom: areaBoundingRect.bottom - mousePosition.y\r\n                }\r\n            } else {\r\n                return {}\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_calculateScrollSpeed\",\r\n        value: function(distance) {\r\n            var component = this._component;\r\n            var sensitivity = component.option(\"scrollSensitivity\");\r\n            var maxSpeed = component.option(\"scrollSpeed\");\r\n            return Math.ceil(Math.pow((sensitivity - distance) / sensitivity, 2) * maxSpeed)\r\n        }\r\n    }, {\r\n        key: \"scrollByStep\",\r\n        value: function() {\r\n            var that = this;\r\n            var nextScrollPosition;\r\n            if (that._$scrollable && that._scrollSpeed) {\r\n                if (that._$scrollable.hasClass(\"dx-scrollable-container\")) {\r\n                    var $scrollable = that._$scrollable.closest(\".dx-scrollable\");\r\n                    var scrollableInstance = $scrollable.data(\"dxScrollable\") || $scrollable.data(\"dxScrollView\");\r\n                    if (scrollableInstance) {\r\n                        nextScrollPosition = scrollableInstance.scrollOffset();\r\n                        nextScrollPosition[that._limitProps.start] += that._scrollSpeed;\r\n                        scrollableInstance.scrollTo(nextScrollPosition)\r\n                    }\r\n                } else {\r\n                    nextScrollPosition = that._$scrollable[that._scrollValue]() + that._scrollSpeed;\r\n                    that._$scrollable[that._scrollValue](nextScrollPosition)\r\n                }\r\n                var dragMoveArgs = that._component._dragMoveArgs;\r\n                if (dragMoveArgs) {\r\n                    that._component._dragMoveHandler(dragMoveArgs)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"reset\",\r\n        value: function() {\r\n            this._$scrollable = null;\r\n            this._scrollSpeed = 0;\r\n            this._preventScroll = true\r\n        }\r\n    }, {\r\n        key: \"isOutsideScrollable\",\r\n        value: function(target, event) {\r\n            var component = this._component;\r\n            if (!component._$scrollable || !target.closest(component._$scrollable).length) {\r\n                return false\r\n            }\r\n            var scrollableSize = component._$scrollable.get(0).getBoundingClientRect();\r\n            var start = scrollableSize[this._limitProps.start];\r\n            var size = scrollableSize[this._sizeAttr];\r\n            var location = \"width\" === this._sizeAttr ? event.pageX : event.pageY;\r\n            return location < start || location > start + size\r\n        }\r\n    }]);\r\n    return ScrollHelper\r\n}();\r\nvar ScrollAnimator = Animator.inherit({\r\n    ctor: function(strategy) {\r\n        this.callBase();\r\n        this._strategy = strategy\r\n    },\r\n    _step: function() {\r\n        var horizontalScrollHelper = this._strategy._horizontalScrollHelper;\r\n        var verticalScrollHelper = this._strategy._verticalScrollHelper;\r\n        horizontalScrollHelper && horizontalScrollHelper.scrollByStep();\r\n        verticalScrollHelper && verticalScrollHelper.scrollByStep()\r\n    }\r\n});\r\nvar Draggable = DOMComponentWithTemplate.inherit({\r\n    reset: noop,\r\n    dragMove: noop,\r\n    dragEnter: noop,\r\n    dragLeave: noop,\r\n    dragEnd: function(sourceEvent) {\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        sourceDraggable._fireRemoveEvent(sourceEvent)\r\n    },\r\n    _fireRemoveEvent: noop,\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            onDragStart: null,\r\n            onDragMove: null,\r\n            onDragEnd: null,\r\n            onDrop: null,\r\n            immediate: true,\r\n            dragDirection: \"both\",\r\n            boundary: void 0,\r\n            boundOffset: 0,\r\n            allowMoveByClick: false,\r\n            itemData: null,\r\n            container: void 0,\r\n            dragTemplate: void 0,\r\n            contentTemplate: \"content\",\r\n            handle: \"\",\r\n            filter: \"\",\r\n            clone: false,\r\n            autoScroll: true,\r\n            scrollSpeed: 30,\r\n            scrollSensitivity: 60,\r\n            group: void 0,\r\n            data: void 0\r\n        })\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase.apply(this, arguments);\r\n        extend(this._optionsByReference, {\r\n            component: true,\r\n            group: true,\r\n            itemData: true,\r\n            data: true\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._attachEventHandlers();\r\n        this._scrollAnimator = new ScrollAnimator(this);\r\n        this._horizontalScrollHelper = new ScrollHelper(\"horizontal\", this);\r\n        this._verticalScrollHelper = new ScrollHelper(\"vertical\", this)\r\n    },\r\n    _normalizeCursorOffset: function(offset) {\r\n        if (typeUtils.isObject(offset)) {\r\n            offset = {\r\n                h: offset.x,\r\n                v: offset.y\r\n            }\r\n        }\r\n        offset = commonUtils.splitPair(offset).map(function(value) {\r\n            return parseFloat(value)\r\n        });\r\n        return {\r\n            left: offset[0],\r\n            top: 1 === offset.length ? offset[0] : offset[1]\r\n        }\r\n    },\r\n    _getNormalizedCursorOffset: function(offset, options) {\r\n        if (typeUtils.isFunction(offset)) {\r\n            offset = offset.call(this, options)\r\n        }\r\n        return this._normalizeCursorOffset(offset)\r\n    },\r\n    _calculateElementOffset: function(options) {\r\n        var elementOffset;\r\n        var dragElementOffset;\r\n        var event = options.event;\r\n        var $element = $(options.itemElement);\r\n        var $dragElement = $(options.dragElement);\r\n        var isCloned = this._dragElementIsCloned();\r\n        var cursorOffset = this.option(\"cursorOffset\");\r\n        var normalizedCursorOffset = {\r\n            left: 0,\r\n            top: 0\r\n        };\r\n        var currentLocate = this._initialLocate = translator.locate($dragElement);\r\n        if (isCloned || options.initialOffset || cursorOffset) {\r\n            elementOffset = options.initialOffset || $element.offset();\r\n            if (cursorOffset) {\r\n                normalizedCursorOffset = this._getNormalizedCursorOffset(cursorOffset, options);\r\n                if (isFinite(normalizedCursorOffset.left)) {\r\n                    elementOffset.left = event.pageX\r\n                }\r\n                if (isFinite(normalizedCursorOffset.top)) {\r\n                    elementOffset.top = event.pageY\r\n                }\r\n            }\r\n            dragElementOffset = $dragElement.offset();\r\n            elementOffset.top -= dragElementOffset.top + (normalizedCursorOffset.top || 0) - currentLocate.top;\r\n            elementOffset.left -= dragElementOffset.left + (normalizedCursorOffset.left || 0) - currentLocate.left\r\n        }\r\n        return elementOffset\r\n    },\r\n    _initPosition: function(options) {\r\n        var $dragElement = $(options.dragElement);\r\n        var elementOffset = this._calculateElementOffset(options);\r\n        if (elementOffset) {\r\n            this._move(elementOffset, $dragElement)\r\n        }\r\n        this._startPosition = translator.locate($dragElement)\r\n    },\r\n    _startAnimator: function() {\r\n        if (!this._scrollAnimator.inProgress()) {\r\n            this._scrollAnimator.start()\r\n        }\r\n    },\r\n    _stopAnimator: function() {\r\n        this._scrollAnimator.stop()\r\n    },\r\n    _addWidgetPrefix: function(className) {\r\n        var componentName = this.NAME;\r\n        return dasherize(componentName) + (className ? \"-\" + className : \"\")\r\n    },\r\n    _getItemsSelector: function() {\r\n        return this.option(\"filter\") || \"\"\r\n    },\r\n    _$content: function() {\r\n        var $element = this.$element();\r\n        var $wrapper = $element.children(\".dx-template-wrapper\");\r\n        return $wrapper.length ? $wrapper : $element\r\n    },\r\n    _attachEventHandlers: function() {\r\n        var _this = this;\r\n        if (this.option(\"disabled\")) {\r\n            return\r\n        }\r\n        var $element = this._$content();\r\n        var itemsSelector = this._getItemsSelector();\r\n        var allowMoveByClick = this.option(\"allowMoveByClick\");\r\n        var data = {\r\n            direction: this.option(\"dragDirection\"),\r\n            immediate: this.option(\"immediate\"),\r\n            checkDropTarget: function(target, event) {\r\n                var targetGroup = _this.option(\"group\");\r\n                var sourceGroup = _this._getSourceDraggable().option(\"group\");\r\n                if (_this._verticalScrollHelper.isOutsideScrollable(target, event) || _this._horizontalScrollHelper.isOutsideScrollable(target, event)) {\r\n                    return false\r\n                }\r\n                return sourceGroup && sourceGroup === targetGroup\r\n            }\r\n        };\r\n        if (allowMoveByClick) {\r\n            $element = this._getArea();\r\n            eventsEngine.on($element, POINTERDOWN_EVENT_NAME, data, this._pointerDownHandler.bind(this))\r\n        }\r\n        if (\">\" === itemsSelector[0]) {\r\n            itemsSelector = itemsSelector.slice(1)\r\n        }\r\n        eventsEngine.on($element, DRAGSTART_EVENT_NAME, itemsSelector, data, this._dragStartHandler.bind(this));\r\n        eventsEngine.on($element, DRAG_EVENT_NAME, data, this._dragMoveHandler.bind(this));\r\n        eventsEngine.on($element, DRAGEND_EVENT_NAME, data, this._dragEndHandler.bind(this));\r\n        eventsEngine.on($element, DRAG_ENTER_EVENT_NAME, data, this._dragEnterHandler.bind(this));\r\n        eventsEngine.on($element, DRAGEND_LEAVE_EVENT_NAME, data, this._dragLeaveHandler.bind(this))\r\n    },\r\n    _dragElementIsCloned: function() {\r\n        return this._$dragElement && this._$dragElement.hasClass(this._addWidgetPrefix(CLONE_CLASS))\r\n    },\r\n    _getDragTemplateArgs: function($element, $container) {\r\n        return {\r\n            container: getPublicElement($container),\r\n            model: {\r\n                itemData: this.option(\"itemData\"),\r\n                itemElement: getPublicElement($element)\r\n            }\r\n        }\r\n    },\r\n    _createDragElement: function($element) {\r\n        var result = $element;\r\n        var clone = this.option(\"clone\");\r\n        var $container = this._getContainer();\r\n        var template = this.option(\"dragTemplate\");\r\n        if (template) {\r\n            template = this._getTemplate(template);\r\n            result = $(\"<div>\").appendTo($container);\r\n            template.render(this._getDragTemplateArgs($element, result))\r\n        } else {\r\n            if (clone) {\r\n                result = $(\"<div>\").appendTo($container);\r\n                $element.clone().css({\r\n                    width: $element.css(\"width\"),\r\n                    height: $element.css(\"height\")\r\n                }).appendTo(result)\r\n            }\r\n        }\r\n        return result.toggleClass(this._addWidgetPrefix(CLONE_CLASS), result.get(0) !== $element.get(0))\r\n    },\r\n    _resetDragElement: function() {\r\n        if (this._dragElementIsCloned()) {\r\n            this._$dragElement.remove()\r\n        } else {\r\n            this._toggleDraggingClass(false)\r\n        }\r\n        this._$dragElement = null\r\n    },\r\n    _resetSourceElement: function() {\r\n        this._toggleDragSourceClass(false);\r\n        this._$sourceElement = null\r\n    },\r\n    _detachEventHandlers: function() {\r\n        eventsEngine.off(this._$content(), \".\" + DRAGGABLE);\r\n        eventsEngine.off(this._getArea(), \".\" + DRAGGABLE)\r\n    },\r\n    _move: function(position, $element) {\r\n        translator.move($element || this._$dragElement, position)\r\n    },\r\n    _getDraggableElement: function(e) {\r\n        var $sourceElement = this._getSourceElement();\r\n        if ($sourceElement) {\r\n            return $sourceElement\r\n        }\r\n        var allowMoveByClick = this.option(\"allowMoveByClick\");\r\n        if (allowMoveByClick) {\r\n            return this.$element()\r\n        }\r\n        var $target = $(e && e.target);\r\n        var itemsSelector = this._getItemsSelector();\r\n        if (\">\" === itemsSelector[0]) {\r\n            var $items = this._$content().find(itemsSelector);\r\n            if (!$items.is($target)) {\r\n                $target = $target.closest($items)\r\n            }\r\n        }\r\n        return $target\r\n    },\r\n    _getSourceElement: function() {\r\n        var draggable = this._getSourceDraggable();\r\n        return draggable._$sourceElement\r\n    },\r\n    _pointerDownHandler: function(e) {\r\n        if (eventUtils.needSkipEvent(e)) {\r\n            return\r\n        }\r\n        var position = {};\r\n        var $element = this.$element();\r\n        var dragDirection = this.option(\"dragDirection\");\r\n        if (\"horizontal\" === dragDirection || \"both\" === dragDirection) {\r\n            position.left = e.pageX - $element.offset().left + translator.locate($element).left - $element.width() / 2\r\n        }\r\n        if (\"vertical\" === dragDirection || \"both\" === dragDirection) {\r\n            position.top = e.pageY - $element.offset().top + translator.locate($element).top - $element.height() / 2\r\n        }\r\n        this._move(position, $element);\r\n        this._getAction(\"onDragMove\")(this._getEventArgs(e))\r\n    },\r\n    _isValidElement: function(event, $element) {\r\n        var handle = this.option(\"handle\");\r\n        var $target = $(event.originalEvent && event.originalEvent.target);\r\n        if (handle && !$target.closest(handle).length) {\r\n            return false\r\n        }\r\n        if (!$element.length) {\r\n            return false\r\n        }\r\n        return !$element.is(\".dx-state-disabled, .dx-state-disabled *\")\r\n    },\r\n    _dragStartHandler: function(e) {\r\n        var $dragElement;\r\n        var initialOffset;\r\n        var isFixedPosition;\r\n        var $element = this._getDraggableElement(e);\r\n        if (this._$sourceElement) {\r\n            return\r\n        }\r\n        if (!this._isValidElement(e, $element)) {\r\n            e.cancel = true;\r\n            return\r\n        }\r\n        var dragStartArgs = this._getDragStartArgs(e, $element);\r\n        this._getAction(\"onDragStart\")(dragStartArgs);\r\n        if (dragStartArgs.cancel) {\r\n            e.cancel = true;\r\n            return\r\n        }\r\n        this.option(\"itemData\", dragStartArgs.itemData);\r\n        this._setSourceDraggable();\r\n        this._$sourceElement = $element;\r\n        initialOffset = $element.offset();\r\n        $dragElement = this._$dragElement = this._createDragElement($element);\r\n        this._toggleDraggingClass(true);\r\n        this._toggleDragSourceClass(true);\r\n        isFixedPosition = \"fixed\" === $dragElement.css(\"position\");\r\n        this._initPosition(extend({}, dragStartArgs, {\r\n            dragElement: $dragElement.get(0),\r\n            initialOffset: isFixedPosition && initialOffset\r\n        }));\r\n        var $area = this._getArea();\r\n        var areaOffset = this._getAreaOffset($area);\r\n        var boundOffset = this._getBoundOffset();\r\n        var areaWidth = $area.outerWidth();\r\n        var areaHeight = $area.outerHeight();\r\n        var elementWidth = $dragElement.width();\r\n        var elementHeight = $dragElement.height();\r\n        var startOffset = {\r\n            left: $dragElement.offset().left - areaOffset.left,\r\n            top: $dragElement.offset().top - areaOffset.top\r\n        };\r\n        if ($area.length) {\r\n            e.maxLeftOffset = startOffset.left - boundOffset.left;\r\n            e.maxRightOffset = areaWidth - startOffset.left - elementWidth - boundOffset.right;\r\n            e.maxTopOffset = startOffset.top - boundOffset.top;\r\n            e.maxBottomOffset = areaHeight - startOffset.top - elementHeight - boundOffset.bottom\r\n        }\r\n        if (this.option(\"autoScroll\")) {\r\n            this._startAnimator()\r\n        }\r\n    },\r\n    _getAreaOffset: function($area) {\r\n        var offset = $area && positionUtils.offset($area);\r\n        return offset ? offset : {\r\n            left: 0,\r\n            top: 0\r\n        }\r\n    },\r\n    _toggleDraggingClass: function(value) {\r\n        this._$dragElement && this._$dragElement.toggleClass(this._addWidgetPrefix(\"dragging\"), value)\r\n    },\r\n    _toggleDragSourceClass: function(value, $element) {\r\n        var $sourceElement = $element || this._$sourceElement;\r\n        $sourceElement && $sourceElement.toggleClass(this._addWidgetPrefix(\"source\"), value)\r\n    },\r\n    _getBoundOffset: function() {\r\n        var boundOffset = this.option(\"boundOffset\");\r\n        if (typeUtils.isFunction(boundOffset)) {\r\n            boundOffset = boundOffset.call(this)\r\n        }\r\n        return stringUtils.quadToObject(boundOffset)\r\n    },\r\n    _getArea: function() {\r\n        var area = this.option(\"boundary\");\r\n        if (typeUtils.isFunction(area)) {\r\n            area = area.call(this)\r\n        }\r\n        return $(area)\r\n    },\r\n    _getContainer: function() {\r\n        var container = this.option(\"container\");\r\n        if (void 0 === container) {\r\n            container = viewPortUtils.value()\r\n        }\r\n        return $(container)\r\n    },\r\n    _dragMoveHandler: function(e) {\r\n        this._dragMoveArgs = e;\r\n        if (!this._$dragElement) {\r\n            e.cancel = true;\r\n            return\r\n        }\r\n        var offset = e.offset;\r\n        var startPosition = this._startPosition;\r\n        this._move({\r\n            left: startPosition.left + offset.x,\r\n            top: startPosition.top + offset.y\r\n        });\r\n        this._updateScrollable(e);\r\n        var eventArgs = this._getEventArgs(e);\r\n        this._getAction(\"onDragMove\")(eventArgs);\r\n        if (true === eventArgs.cancel) {\r\n            return\r\n        }\r\n        var targetDraggable = this._getTargetDraggable();\r\n        targetDraggable.dragMove(e)\r\n    },\r\n    _updateScrollable: function(e) {\r\n        var that = this;\r\n        var $sourceElement = that._getSourceElement();\r\n        that._$scrollable = null;\r\n        $sourceElement.parents().toArray().some(function(element) {\r\n            var $element = $(element);\r\n            if (that._horizontalScrollHelper.isScrollable($element) || that._verticalScrollHelper.isScrollable($element)) {\r\n                that._$scrollable = $element;\r\n                return true\r\n            }\r\n        });\r\n        if (that.option(\"autoScroll\")) {\r\n            var $window = $(window);\r\n            var mousePosition = {\r\n                x: e.pageX - $window.scrollLeft(),\r\n                y: e.pageY - $window.scrollTop()\r\n            };\r\n            var allObjects = that.getElementsFromPoint(mousePosition);\r\n            that._verticalScrollHelper.updateScrollable(allObjects, mousePosition);\r\n            that._horizontalScrollHelper.updateScrollable(allObjects, mousePosition)\r\n        }\r\n    },\r\n    getElementsFromPoint: function(position) {\r\n        var ownerDocument = this._$dragElement.get(0).ownerDocument;\r\n        if (browser.msie) {\r\n            var msElements = ownerDocument.msElementsFromPoint(position.x, position.y);\r\n            if (msElements) {\r\n                return Array.prototype.slice.call(msElements)\r\n            }\r\n            return []\r\n        }\r\n        return ownerDocument.elementsFromPoint(position.x, position.y)\r\n    },\r\n    _defaultActionArgs: function() {\r\n        var args = this.callBase.apply(this, arguments);\r\n        var component = this.option(\"component\");\r\n        if (component) {\r\n            args.component = component;\r\n            args.element = component.element()\r\n        }\r\n        return args\r\n    },\r\n    _getEventArgs: function(e) {\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        var targetDraggable = this._getTargetDraggable();\r\n        return {\r\n            event: e,\r\n            itemData: sourceDraggable.option(\"itemData\"),\r\n            itemElement: getPublicElement(sourceDraggable._$sourceElement),\r\n            fromComponent: sourceDraggable.option(\"component\") || sourceDraggable,\r\n            toComponent: targetDraggable.option(\"component\") || targetDraggable,\r\n            fromData: sourceDraggable.option(\"data\"),\r\n            toData: targetDraggable.option(\"data\")\r\n        }\r\n    },\r\n    _getDragStartArgs: function(e, $itemElement) {\r\n        var args = this._getEventArgs(e);\r\n        return {\r\n            event: args.event,\r\n            itemData: args.itemData,\r\n            itemElement: $itemElement,\r\n            fromData: args.fromData\r\n        }\r\n    },\r\n    _revertItemToInitialPosition: function() {\r\n        !this._dragElementIsCloned() && this._move(this._initialLocate, this._$sourceElement)\r\n    },\r\n    _dragEndHandler: function(e) {\r\n        var _this2 = this;\r\n        var dragEndEventArgs = this._getEventArgs(e);\r\n        var dropEventArgs = this._getEventArgs(e);\r\n        var targetDraggable = this._getTargetDraggable();\r\n        var needRevertPosition = true;\r\n        try {\r\n            this._getAction(\"onDragEnd\")(dragEndEventArgs)\r\n        } finally {\r\n            when(fromPromise(dragEndEventArgs.cancel)).done(function(cancel) {\r\n                if (!cancel) {\r\n                    if (targetDraggable !== _this2) {\r\n                        targetDraggable._getAction(\"onDrop\")(dropEventArgs)\r\n                    }\r\n                    if (!dropEventArgs.cancel) {\r\n                        targetDraggable.dragEnd(dragEndEventArgs);\r\n                        needRevertPosition = false\r\n                    }\r\n                }\r\n            }).always(function() {\r\n                if (needRevertPosition) {\r\n                    _this2._revertItemToInitialPosition()\r\n                }\r\n                _this2.reset();\r\n                targetDraggable.reset();\r\n                _this2._stopAnimator();\r\n                _this2._horizontalScrollHelper.reset();\r\n                _this2._verticalScrollHelper.reset();\r\n                _this2._resetDragElement();\r\n                _this2._resetSourceElement();\r\n                _this2._resetTargetDraggable();\r\n                _this2._resetSourceDraggable()\r\n            })\r\n        }\r\n    },\r\n    _dragEnterHandler: function(e) {\r\n        this._setTargetDraggable();\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        sourceDraggable.dragEnter(e)\r\n    },\r\n    _dragLeaveHandler: function(e) {\r\n        this._resetTargetDraggable();\r\n        if (this !== this._getSourceDraggable()) {\r\n            this.reset()\r\n        }\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        sourceDraggable.dragLeave(e)\r\n    },\r\n    _getAction: function(name) {\r\n        return this[\"_\" + name + \"Action\"] || this._createActionByOption(name)\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return \"content\"\r\n    },\r\n    _initTemplates: function() {\r\n        if (!this.option(\"contentTemplate\")) {\r\n            return\r\n        }\r\n        this.callBase.apply(this, arguments);\r\n        this._defaultTemplates.content = new EmptyTemplate\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this.$element().addClass(this._addWidgetPrefix());\r\n        var transclude = this._getAnonymousTemplateName() === this.option(\"contentTemplate\");\r\n        var template = this._getTemplateByOption(\"contentTemplate\");\r\n        if (template) {\r\n            $(template.render({\r\n                container: this.element(),\r\n                transclude: transclude\r\n            }))\r\n        }\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        switch (name) {\r\n            case \"onDragStart\":\r\n            case \"onDragMove\":\r\n            case \"onDragEnd\":\r\n            case \"onDrop\":\r\n                this[\"_\" + name + \"Action\"] = this._createActionByOption(name);\r\n                break;\r\n            case \"dragTemplate\":\r\n            case \"contentTemplate\":\r\n            case \"container\":\r\n            case \"clone\":\r\n                this._resetDragElement();\r\n                break;\r\n            case \"allowMoveByClick\":\r\n            case \"dragDirection\":\r\n            case \"disabled\":\r\n            case \"boundary\":\r\n            case \"filter\":\r\n            case \"immediate\":\r\n                this._resetDragElement();\r\n                this._detachEventHandlers();\r\n                this._attachEventHandlers();\r\n                break;\r\n            case \"autoScroll\":\r\n                this._verticalScrollHelper.reset();\r\n                this._horizontalScrollHelper.reset();\r\n                break;\r\n            case \"scrollSensitivity\":\r\n            case \"scrollSpeed\":\r\n            case \"boundOffset\":\r\n            case \"handle\":\r\n            case \"group\":\r\n            case \"data\":\r\n            case \"itemData\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _getTargetDraggable: function() {\r\n        return targetDraggable || this\r\n    },\r\n    _getSourceDraggable: function() {\r\n        return sourceDraggable || this\r\n    },\r\n    _setTargetDraggable: function() {\r\n        var currentGroup = this.option(\"group\");\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        if (currentGroup && currentGroup === sourceDraggable.option(\"group\")) {\r\n            targetDraggable = this\r\n        }\r\n    },\r\n    _setSourceDraggable: function() {\r\n        sourceDraggable = this\r\n    },\r\n    _resetSourceDraggable: function() {\r\n        sourceDraggable = null\r\n    },\r\n    _resetTargetDraggable: function() {\r\n        targetDraggable = null\r\n    },\r\n    _dispose: function() {\r\n        this.callBase();\r\n        this._detachEventHandlers();\r\n        this._resetDragElement();\r\n        this._resetTargetDraggable();\r\n        this._resetSourceDraggable();\r\n        this._$sourceElement = null;\r\n        this._stopAnimator()\r\n    }\r\n});\r\nregisterComponent(DRAGGABLE, Draggable);\r\nmodule.exports = Draggable;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}