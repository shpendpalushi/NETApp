{"ast":null,"code":"/**\r\n * DevExtreme (ui/date_box/ui.date_box.strategy.calendar_with_time.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar window = require(\"../../core/utils/window\").getWindow();\n\nvar CalendarStrategy = require(\"./ui.date_box.strategy.calendar\");\n\nvar TimeView = require(\"./ui.time_view\");\n\nvar dateLocalization = require(\"../../localization/date\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar Box = require(\"../box\");\n\nvar uiDateUtils = require(\"./ui.date_utils\");\n\nvar SHRINK_VIEW_SCREEN_WIDTH = 573;\nvar DATEBOX_ADAPTIVITY_MODE_CLASS = \"dx-datebox-adaptivity-mode\";\nvar CalendarWithTimeStrategy = CalendarStrategy.inherit({\n  NAME: \"CalendarWithTime\",\n  getDefaultOptions: function getDefaultOptions() {\n    return extend(this.callBase(), {\n      applyValueMode: \"useButtons\",\n      buttonsLocation: \"bottom after\",\n      showPopupTitle: false\n    });\n  },\n  getDisplayFormat: function getDisplayFormat(displayFormat) {\n    return displayFormat || \"shortdateshorttime\";\n  },\n  _is24HourFormat: function _is24HourFormat() {\n    return dateLocalization.is24HourFormat(this.getDisplayFormat(this.dateBox.option(\"displayFormat\")));\n  },\n  _renderWidget: function _renderWidget() {\n    this.callBase();\n    this._timeView = this.dateBox._createComponent($(\"<div>\"), TimeView, {\n      value: this.dateBoxValue(),\n      _showClock: !this._isShrinkView(),\n      use24HourFormat: this._is24HourFormat(),\n      onValueChanged: this._valueChangedHandler.bind(this),\n      stylingMode: this.dateBox.option(\"stylingMode\")\n    });\n\n    this._timeView.registerKeyHandler(\"escape\", this._escapeHandler.bind(this));\n  },\n  renderOpenedState: function renderOpenedState() {\n    this.callBase();\n\n    var popup = this._getPopup();\n\n    if (popup) {\n      popup._wrapper().toggleClass(DATEBOX_ADAPTIVITY_MODE_CLASS, this._isSmallScreen());\n    }\n\n    clearTimeout(this._repaintTimer);\n    this._repaintTimer = setTimeout(function () {\n      this._getPopup() && this._getPopup().repaint();\n    }.bind(this), 0);\n  },\n  isAdaptivityChanged: function isAdaptivityChanged() {\n    var isAdaptiveMode = this._isShrinkView();\n\n    var currentAdaptiveMode = this._currentAdaptiveMode;\n\n    if (isAdaptiveMode !== currentAdaptiveMode) {\n      this._currentAdaptiveMode = isAdaptiveMode;\n      return void 0 !== currentAdaptiveMode;\n    }\n\n    return this.callBase();\n  },\n  _updateValue: function _updateValue(preventDefaultValue) {\n    var date = this.dateBoxValue();\n\n    if (!date && !preventDefaultValue) {\n      date = new Date();\n      uiDateUtils.normalizeTime(date);\n    }\n\n    this.callBase();\n\n    if (this._timeView) {\n      date && this._timeView.option(\"value\", date);\n\n      this._timeView.option(\"use24HourFormat\", this._is24HourFormat());\n    }\n  },\n  _isSmallScreen: function _isSmallScreen() {\n    return $(window).width() <= SHRINK_VIEW_SCREEN_WIDTH;\n  },\n  _isShrinkView: function _isShrinkView() {\n    return !this.dateBox.option(\"showAnalogClock\") || this.dateBox.option(\"adaptivityEnabled\") && this._isSmallScreen();\n  },\n  _getBoxItems: function _getBoxItems() {\n    var items = [{\n      ratio: 0,\n      shrink: 0,\n      baseSize: \"auto\",\n      name: \"calendar\"\n    }];\n\n    if (!this._isShrinkView()) {\n      items.push({\n        ratio: 0,\n        shrink: 0,\n        baseSize: \"auto\",\n        name: \"time\"\n      });\n    }\n\n    return items;\n  },\n  renderPopupContent: function renderPopupContent() {\n    this.callBase();\n    this._currentAdaptiveMode = this._isShrinkView();\n\n    var $popupContent = this._getPopup().$content();\n\n    this._box = this.dateBox._createComponent($(\"<div>\").appendTo($popupContent), Box, {\n      direction: \"row\",\n      crossAlign: \"start\",\n      items: this._getBoxItems(),\n      itemTemplate: function (data) {\n        var $container = $(\"<div>\");\n\n        switch (data.name) {\n          case \"calendar\":\n            $container.append(this._widget.$element());\n\n            if (this._isShrinkView()) {\n              $container.append(this._timeView.$element());\n            }\n\n            break;\n\n          case \"time\":\n            $container.append(this._timeView.$element());\n        }\n\n        return $container;\n      }.bind(this)\n    });\n\n    this._attachTabHandler();\n  },\n  popupConfig: function popupConfig(_popupConfig) {\n    var calendarPopupConfig = this.callBase(_popupConfig);\n    var result = extend(calendarPopupConfig, {\n      onShowing: function () {\n        if (\"fallback\" === this._box.option(\"_layoutStrategy\")) {\n          var clockMinWidth = this._getPopup().$content().find(\".dx-timeview-clock\").css(\"minWidth\");\n\n          this._timeView.$element().css(\"maxWidth\", clockMinWidth);\n        }\n      }.bind(this)\n    });\n    return result;\n  },\n  getFirstPopupElement: function getFirstPopupElement() {\n    return this._timeView._hourBox.$element().find(\"input\");\n  },\n  _attachTabHandler: function _attachTabHandler() {\n    var dateBox = this.dateBox;\n\n    var handler = function handler(e) {\n      if (e.shiftKey) {\n        e.preventDefault();\n        dateBox.focus();\n      }\n    };\n\n    this._timeView._hourBox.registerKeyHandler(\"tab\", handler);\n  },\n  _preventFocusOnPopup: function _preventFocusOnPopup(e) {\n    if (!$(e.target).hasClass(\"dx-texteditor-input\")) {\n      this.callBase.apply(this, arguments);\n\n      if (!this.dateBox._hasFocusClass()) {\n        this.dateBox.focus();\n      }\n    }\n  },\n  getValue: function getValue() {\n    var date = this._widget.option(\"value\");\n\n    var time = this._timeView.option(\"value\");\n\n    date = date ? new Date(date) : new Date();\n    date.setHours(time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds());\n    return date;\n  },\n  dispose: function dispose() {\n    clearTimeout(this._removeMinWidthTimer);\n    clearTimeout(this._repaintTimer);\n    this.callBase();\n  }\n});\nmodule.exports = CalendarWithTimeStrategy;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/date_box/ui.date_box.strategy.calendar_with_time.js"],"names":["$","require","window","CalendarStrategy","TimeView","dateLocalization","extend","Box","uiDateUtils","SHRINK_VIEW_SCREEN_WIDTH","DATEBOX_ADAPTIVITY_MODE_CLASS","CalendarWithTimeStrategy","NAME","getDefaultOptions","applyValueMode","buttonsLocation","showPopupTitle","getDisplayFormat","displayFormat","_is24HourFormat","_renderWidget","value","_showClock","use24HourFormat","onValueChanged","stylingMode","renderOpenedState","popup","clearTimeout","setTimeout","isAdaptivityChanged","isAdaptiveMode","currentAdaptiveMode","_updateValue","date","_isSmallScreen","_isShrinkView","_getBoxItems","items","ratio","shrink","baseSize","name","renderPopupContent","$popupContent","direction","crossAlign","itemTemplate","$container","data","popupConfig","calendarPopupConfig","result","onShowing","clockMinWidth","getFirstPopupElement","_attachTabHandler","dateBox","handler","e","_preventFocusOnPopup","getValue","time","dispose","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,CAAC,GAAGC,OAAO,CAAf,qBAAe,CAAf;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAPA,yBAAO,CAAPA,CAAb,SAAaA,EAAb;;AACA,IAAIE,gBAAgB,GAAGF,OAAO,CAA9B,iCAA8B,CAA9B;;AACA,IAAIG,QAAQ,GAAGH,OAAO,CAAtB,gBAAsB,CAAtB;;AACA,IAAII,gBAAgB,GAAGJ,OAAO,CAA9B,yBAA8B,CAA9B;;AACA,IAAIK,MAAM,GAAGL,OAAO,CAAPA,yBAAO,CAAPA,CAAb,MAAA;;AACA,IAAIM,GAAG,GAAGN,OAAO,CAAjB,QAAiB,CAAjB;;AACA,IAAIO,WAAW,GAAGP,OAAO,CAAzB,iBAAyB,CAAzB;;AACA,IAAIQ,wBAAwB,GAA5B,GAAA;AACA,IAAIC,6BAA6B,GAAjC,4BAAA;AACA,IAAIC,wBAAwB,GAAG,gBAAgB,CAAhB,OAAA,CAAyB;AACpDC,EAAAA,IAAI,EADgD,kBAAA;AAEpDC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAOP,MAAM,CAAC,KAAD,QAAC,EAAD,EAAkB;AAC3BQ,MAAAA,cAAc,EADa,YAAA;AAE3BC,MAAAA,eAAe,EAFY,cAAA;AAG3BC,MAAAA,cAAc,EAAE;AAHW,KAAlB,CAAb;AAHgD,GAAA;AASpDC,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,aAAA,EAAwB;AACtC,WAAOC,aAAa,IAApB,oBAAA;AAVgD,GAAA;AAYpDC,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,WAAOd,gBAAgB,CAAhBA,cAAAA,CAAgC,KAAA,gBAAA,CAAsB,KAAA,OAAA,CAAA,MAAA,CAA7D,eAA6D,CAAtB,CAAhCA,CAAP;AAbgD,GAAA;AAepDe,EAAAA,aAAa,EAAE,SAAA,aAAA,GAAW;AACtB,SAAA,QAAA;AACA,SAAA,SAAA,GAAiB,KAAA,OAAA,CAAA,gBAAA,CAA8BpB,CAAC,CAA/B,OAA+B,CAA/B,EAAA,QAAA,EAAoD;AACjEqB,MAAAA,KAAK,EAAE,KAD0D,YAC1D,EAD0D;AAEjEC,MAAAA,UAAU,EAAE,CAAC,KAFoD,aAEpD,EAFoD;AAGjEC,MAAAA,eAAe,EAAE,KAHgD,eAGhD,EAHgD;AAIjEC,MAAAA,cAAc,EAAE,KAAA,oBAAA,CAAA,IAAA,CAJiD,IAIjD,CAJiD;AAKjEC,MAAAA,WAAW,EAAE,KAAA,OAAA,CAAA,MAAA,CAAA,aAAA;AALoD,KAApD,CAAjB;;AAOA,SAAA,SAAA,CAAA,kBAAA,CAAA,QAAA,EAA4C,KAAA,cAAA,CAAA,IAAA,CAA5C,IAA4C,CAA5C;AAxBgD,GAAA;AA0BpDC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,SAAA,QAAA;;AACA,QAAIC,KAAK,GAAG,KAAZ,SAAY,EAAZ;;AACA,QAAA,KAAA,EAAW;AACPA,MAAAA,KAAK,CAALA,QAAAA,GAAAA,WAAAA,CAAAA,6BAAAA,EAA4D,KAA5DA,cAA4D,EAA5DA;AACH;;AACDC,IAAAA,YAAY,CAAC,KAAbA,aAAY,CAAZA;AACA,SAAA,aAAA,GAAqBC,UAAU,CAAC,YAAW;AACvC,WAAA,SAAA,MAAoB,KAAA,SAAA,GAApB,OAAoB,EAApB;AAD4B,KAAA,CAAA,IAAA,CAAD,IAAC,CAAD,EAA/B,CAA+B,CAA/B;AAjCgD,GAAA;AAqCpDC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,QAAIC,cAAc,GAAG,KAArB,aAAqB,EAArB;;AACA,QAAIC,mBAAmB,GAAG,KAA1B,oBAAA;;AACA,QAAID,cAAc,KAAlB,mBAAA,EAA4C;AACxC,WAAA,oBAAA,GAAA,cAAA;AACA,aAAO,KAAA,CAAA,KAAP,mBAAA;AACH;;AACD,WAAO,KAAP,QAAO,EAAP;AA5CgD,GAAA;AA8CpDE,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,mBAAA,EAA8B;AACxC,QAAIC,IAAI,GAAG,KAAX,YAAW,EAAX;;AACA,QAAI,CAAA,IAAA,IAAS,CAAb,mBAAA,EAAmC;AAC/BA,MAAAA,IAAI,GAAG,IAAPA,IAAO,EAAPA;AACA1B,MAAAA,WAAW,CAAXA,aAAAA,CAAAA,IAAAA;AACH;;AACD,SAAA,QAAA;;AACA,QAAI,KAAJ,SAAA,EAAoB;AAChB0B,MAAAA,IAAI,IAAI,KAAA,SAAA,CAAA,MAAA,CAAA,OAAA,EAARA,IAAQ,CAARA;;AACA,WAAA,SAAA,CAAA,MAAA,CAAA,iBAAA,EAAyC,KAAzC,eAAyC,EAAzC;AACH;AAxD+C,GAAA;AA0DpDC,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,WAAOnC,CAAC,CAADA,MAAC,CAADA,CAAAA,KAAAA,MAAP,wBAAA;AA3DgD,GAAA;AA6DpDoC,EAAAA,aAAa,EAAE,SAAA,aAAA,GAAW;AACtB,WAAO,CAAC,KAAA,OAAA,CAAA,MAAA,CAAD,iBAAC,CAAD,IAA2C,KAAA,OAAA,CAAA,MAAA,CAAA,mBAAA,KAA4C,KAA9F,cAA8F,EAA9F;AA9DgD,GAAA;AAgEpDC,EAAAA,YAAY,EAAE,SAAA,YAAA,GAAW;AACrB,QAAIC,KAAK,GAAG,CAAC;AACTC,MAAAA,KAAK,EADI,CAAA;AAETC,MAAAA,MAAM,EAFG,CAAA;AAGTC,MAAAA,QAAQ,EAHC,MAAA;AAITC,MAAAA,IAAI,EAAE;AAJG,KAAD,CAAZ;;AAMA,QAAI,CAAC,KAAL,aAAK,EAAL,EAA2B;AACvBJ,MAAAA,KAAK,CAALA,IAAAA,CAAW;AACPC,QAAAA,KAAK,EADE,CAAA;AAEPC,QAAAA,MAAM,EAFC,CAAA;AAGPC,QAAAA,QAAQ,EAHD,MAAA;AAIPC,QAAAA,IAAI,EAAE;AAJC,OAAXJ;AAMH;;AACD,WAAA,KAAA;AA/EgD,GAAA;AAiFpDK,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,SAAA,QAAA;AACA,SAAA,oBAAA,GAA4B,KAA5B,aAA4B,EAA5B;;AACA,QAAIC,aAAa,GAAG,KAAA,SAAA,GAApB,QAAoB,EAApB;;AACA,SAAA,IAAA,GAAY,KAAA,OAAA,CAAA,gBAAA,CAA8B5C,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAA9B,aAA8BA,CAA9B,EAAA,GAAA,EAAuE;AAC/E6C,MAAAA,SAAS,EADsE,KAAA;AAE/EC,MAAAA,UAAU,EAFqE,OAAA;AAG/ER,MAAAA,KAAK,EAAE,KAHwE,YAGxE,EAHwE;AAI/ES,MAAAA,YAAY,EAAE,UAAA,IAAA,EAAe;AACzB,YAAIC,UAAU,GAAGhD,CAAC,CAAlB,OAAkB,CAAlB;;AACA,gBAAQiD,IAAI,CAAZ,IAAA;AACI,eAAA,UAAA;AACID,YAAAA,UAAU,CAAVA,MAAAA,CAAkB,KAAA,OAAA,CAAlBA,QAAkB,EAAlBA;;AACA,gBAAI,KAAJ,aAAI,EAAJ,EAA0B;AACtBA,cAAAA,UAAU,CAAVA,MAAAA,CAAkB,KAAA,SAAA,CAAlBA,QAAkB,EAAlBA;AACH;;AACD;;AACJ,eAAA,MAAA;AACIA,YAAAA,UAAU,CAAVA,MAAAA,CAAkB,KAAA,SAAA,CAAlBA,QAAkB,EAAlBA;AARR;;AAUA,eAAA,UAAA;AAZU,OAAA,CAAA,IAAA,CAAA,IAAA;AAJiE,KAAvE,CAAZ;;AAmBA,SAAA,iBAAA;AAxGgD,GAAA;AA0GpDE,EAAAA,WAAW,EAAE,SAAA,WAAA,CAAA,YAAA,EAAuB;AAChC,QAAIC,mBAAmB,GAAG,KAAA,QAAA,CAA1B,YAA0B,CAA1B;AACA,QAAIC,MAAM,GAAG9C,MAAM,CAAA,mBAAA,EAAsB;AACrC+C,MAAAA,SAAS,EAAE,YAAW;AAClB,YAAI,eAAe,KAAA,IAAA,CAAA,MAAA,CAAnB,iBAAmB,CAAnB,EAAwD;AACpD,cAAIC,aAAa,GAAG,KAAA,SAAA,GAAA,QAAA,GAAA,IAAA,CAAA,oBAAA,EAAA,GAAA,CAApB,UAAoB,CAApB;;AACA,eAAA,SAAA,CAAA,QAAA,GAAA,GAAA,CAAA,UAAA,EAAA,aAAA;AACH;AAJM,OAAA,CAAA,IAAA,CAAA,IAAA;AAD0B,KAAtB,CAAnB;AAQA,WAAA,MAAA;AApHgD,GAAA;AAsHpDC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,WAAO,KAAA,SAAA,CAAA,QAAA,CAAA,QAAA,GAAA,IAAA,CAAP,OAAO,CAAP;AAvHgD,GAAA;AAyHpDC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,QAAIC,OAAO,GAAG,KAAd,OAAA;;AACA,QAAIC,OAAO,GAAG,SAAVA,OAAU,CAAA,CAAA,EAAY;AACtB,UAAIC,CAAC,CAAL,QAAA,EAAgB;AACZA,QAAAA,CAAC,CAADA,cAAAA;AACAF,QAAAA,OAAO,CAAPA,KAAAA;AACH;AAJL,KAAA;;AAMA,SAAA,SAAA,CAAA,QAAA,CAAA,kBAAA,CAAA,KAAA,EAAA,OAAA;AAjIgD,GAAA;AAmIpDG,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,CAAA,CAAA,EAAY;AAC9B,QAAI,CAAC5D,CAAC,CAAC2D,CAAC,CAAH3D,MAAC,CAADA,CAAAA,QAAAA,CAAL,qBAAKA,CAAL,EAAkD;AAC9C,WAAA,QAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA;;AACA,UAAI,CAAC,KAAA,OAAA,CAAL,cAAK,EAAL,EAAoC;AAChC,aAAA,OAAA,CAAA,KAAA;AACH;AACJ;AAzI+C,GAAA;AA2IpD6D,EAAAA,QAAQ,EAAE,SAAA,QAAA,GAAW;AACjB,QAAI3B,IAAI,GAAG,KAAA,OAAA,CAAA,MAAA,CAAX,OAAW,CAAX;;AACA,QAAI4B,IAAI,GAAG,KAAA,SAAA,CAAA,MAAA,CAAX,OAAW,CAAX;;AACA5B,IAAAA,IAAI,GAAGA,IAAI,GAAG,IAAA,IAAA,CAAH,IAAG,CAAH,GAAoB,IAA/BA,IAA+B,EAA/BA;AACAA,IAAAA,IAAI,CAAJA,QAAAA,CAAc4B,IAAI,CAAlB5B,QAAc4B,EAAd5B,EAA+B4B,IAAI,CAAnC5B,UAA+B4B,EAA/B5B,EAAkD4B,IAAI,CAAtD5B,UAAkD4B,EAAlD5B,EAAqE4B,IAAI,CAAzE5B,eAAqE4B,EAArE5B;AACA,WAAA,IAAA;AAhJgD,GAAA;AAkJpD6B,EAAAA,OAAO,EAAE,SAAA,OAAA,GAAW;AAChBnC,IAAAA,YAAY,CAAC,KAAbA,oBAAY,CAAZA;AACAA,IAAAA,YAAY,CAAC,KAAbA,aAAY,CAAZA;AACA,SAAA,QAAA;AACH;AAtJmD,CAAzB,CAA/B;AAwJAoC,MAAM,CAANA,OAAAA,GAAAA,wBAAAA","sourcesContent":["/**\r\n * DevExtreme (ui/date_box/ui.date_box.strategy.calendar_with_time.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar window = require(\"../../core/utils/window\").getWindow();\r\nvar CalendarStrategy = require(\"./ui.date_box.strategy.calendar\");\r\nvar TimeView = require(\"./ui.time_view\");\r\nvar dateLocalization = require(\"../../localization/date\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar Box = require(\"../box\");\r\nvar uiDateUtils = require(\"./ui.date_utils\");\r\nvar SHRINK_VIEW_SCREEN_WIDTH = 573;\r\nvar DATEBOX_ADAPTIVITY_MODE_CLASS = \"dx-datebox-adaptivity-mode\";\r\nvar CalendarWithTimeStrategy = CalendarStrategy.inherit({\r\n    NAME: \"CalendarWithTime\",\r\n    getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            applyValueMode: \"useButtons\",\r\n            buttonsLocation: \"bottom after\",\r\n            showPopupTitle: false\r\n        })\r\n    },\r\n    getDisplayFormat: function(displayFormat) {\r\n        return displayFormat || \"shortdateshorttime\"\r\n    },\r\n    _is24HourFormat: function() {\r\n        return dateLocalization.is24HourFormat(this.getDisplayFormat(this.dateBox.option(\"displayFormat\")))\r\n    },\r\n    _renderWidget: function() {\r\n        this.callBase();\r\n        this._timeView = this.dateBox._createComponent($(\"<div>\"), TimeView, {\r\n            value: this.dateBoxValue(),\r\n            _showClock: !this._isShrinkView(),\r\n            use24HourFormat: this._is24HourFormat(),\r\n            onValueChanged: this._valueChangedHandler.bind(this),\r\n            stylingMode: this.dateBox.option(\"stylingMode\")\r\n        });\r\n        this._timeView.registerKeyHandler(\"escape\", this._escapeHandler.bind(this))\r\n    },\r\n    renderOpenedState: function() {\r\n        this.callBase();\r\n        var popup = this._getPopup();\r\n        if (popup) {\r\n            popup._wrapper().toggleClass(DATEBOX_ADAPTIVITY_MODE_CLASS, this._isSmallScreen())\r\n        }\r\n        clearTimeout(this._repaintTimer);\r\n        this._repaintTimer = setTimeout(function() {\r\n            this._getPopup() && this._getPopup().repaint()\r\n        }.bind(this), 0)\r\n    },\r\n    isAdaptivityChanged: function() {\r\n        var isAdaptiveMode = this._isShrinkView();\r\n        var currentAdaptiveMode = this._currentAdaptiveMode;\r\n        if (isAdaptiveMode !== currentAdaptiveMode) {\r\n            this._currentAdaptiveMode = isAdaptiveMode;\r\n            return void 0 !== currentAdaptiveMode\r\n        }\r\n        return this.callBase()\r\n    },\r\n    _updateValue: function(preventDefaultValue) {\r\n        var date = this.dateBoxValue();\r\n        if (!date && !preventDefaultValue) {\r\n            date = new Date;\r\n            uiDateUtils.normalizeTime(date)\r\n        }\r\n        this.callBase();\r\n        if (this._timeView) {\r\n            date && this._timeView.option(\"value\", date);\r\n            this._timeView.option(\"use24HourFormat\", this._is24HourFormat())\r\n        }\r\n    },\r\n    _isSmallScreen: function() {\r\n        return $(window).width() <= SHRINK_VIEW_SCREEN_WIDTH\r\n    },\r\n    _isShrinkView: function() {\r\n        return !this.dateBox.option(\"showAnalogClock\") || this.dateBox.option(\"adaptivityEnabled\") && this._isSmallScreen()\r\n    },\r\n    _getBoxItems: function() {\r\n        var items = [{\r\n            ratio: 0,\r\n            shrink: 0,\r\n            baseSize: \"auto\",\r\n            name: \"calendar\"\r\n        }];\r\n        if (!this._isShrinkView()) {\r\n            items.push({\r\n                ratio: 0,\r\n                shrink: 0,\r\n                baseSize: \"auto\",\r\n                name: \"time\"\r\n            })\r\n        }\r\n        return items\r\n    },\r\n    renderPopupContent: function() {\r\n        this.callBase();\r\n        this._currentAdaptiveMode = this._isShrinkView();\r\n        var $popupContent = this._getPopup().$content();\r\n        this._box = this.dateBox._createComponent($(\"<div>\").appendTo($popupContent), Box, {\r\n            direction: \"row\",\r\n            crossAlign: \"start\",\r\n            items: this._getBoxItems(),\r\n            itemTemplate: function(data) {\r\n                var $container = $(\"<div>\");\r\n                switch (data.name) {\r\n                    case \"calendar\":\r\n                        $container.append(this._widget.$element());\r\n                        if (this._isShrinkView()) {\r\n                            $container.append(this._timeView.$element())\r\n                        }\r\n                        break;\r\n                    case \"time\":\r\n                        $container.append(this._timeView.$element())\r\n                }\r\n                return $container\r\n            }.bind(this)\r\n        });\r\n        this._attachTabHandler()\r\n    },\r\n    popupConfig: function(_popupConfig) {\r\n        var calendarPopupConfig = this.callBase(_popupConfig);\r\n        var result = extend(calendarPopupConfig, {\r\n            onShowing: function() {\r\n                if (\"fallback\" === this._box.option(\"_layoutStrategy\")) {\r\n                    var clockMinWidth = this._getPopup().$content().find(\".dx-timeview-clock\").css(\"minWidth\");\r\n                    this._timeView.$element().css(\"maxWidth\", clockMinWidth)\r\n                }\r\n            }.bind(this)\r\n        });\r\n        return result\r\n    },\r\n    getFirstPopupElement: function() {\r\n        return this._timeView._hourBox.$element().find(\"input\")\r\n    },\r\n    _attachTabHandler: function() {\r\n        var dateBox = this.dateBox;\r\n        var handler = function(e) {\r\n            if (e.shiftKey) {\r\n                e.preventDefault();\r\n                dateBox.focus()\r\n            }\r\n        };\r\n        this._timeView._hourBox.registerKeyHandler(\"tab\", handler)\r\n    },\r\n    _preventFocusOnPopup: function(e) {\r\n        if (!$(e.target).hasClass(\"dx-texteditor-input\")) {\r\n            this.callBase.apply(this, arguments);\r\n            if (!this.dateBox._hasFocusClass()) {\r\n                this.dateBox.focus()\r\n            }\r\n        }\r\n    },\r\n    getValue: function() {\r\n        var date = this._widget.option(\"value\");\r\n        var time = this._timeView.option(\"value\");\r\n        date = date ? new Date(date) : new Date;\r\n        date.setHours(time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds());\r\n        return date\r\n    },\r\n    dispose: function() {\r\n        clearTimeout(this._removeMinWidthTimer);\r\n        clearTimeout(this._repaintTimer);\r\n        this.callBase()\r\n    }\r\n});\r\nmodule.exports = CalendarWithTimeStrategy;\r\n"]},"metadata":{},"sourceType":"module"}