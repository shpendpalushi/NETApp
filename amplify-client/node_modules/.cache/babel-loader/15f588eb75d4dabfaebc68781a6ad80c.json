{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.agenda.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../../core/renderer\");\n\nvar domAdapter = require(\"../../../core/dom_adapter\");\n\nvar noop = require(\"../../../core/utils/common\").noop;\n\nvar each = require(\"../../../core/utils/iterator\").each;\n\nvar getPublicElement = require(\"../../../core/utils/dom\").getPublicElement;\n\nvar registerComponent = require(\"../../../core/component_registrator\");\n\nvar SchedulerWorkSpace = require(\"./ui.scheduler.work_space\");\n\nvar extend = require(\"../../../core/utils/extend\").extend;\n\nvar dateLocalization = require(\"../../../localization/date\");\n\nvar tableCreator = require(\"../ui.scheduler.table_creator\");\n\nvar AGENDA_CLASS = \"dx-scheduler-agenda\";\nvar AGENDA_DATE_CLASS = \"dx-scheduler-agenda-date\";\nvar GROUP_TABLE_CLASS = \"dx-scheduler-group-table\";\nvar AGENDA_GROUPED_ATTR = \"dx-group-column-count\";\nvar TIME_PANEL_ROW_CLASS = \"dx-scheduler-time-panel-row\";\nvar TIME_PANEL_CELL_CLASS = \"dx-scheduler-time-panel-cell\";\nvar NODATA_CONTAINER_CLASS = \"dx-scheduler-agenda-nodata\";\nvar LAST_ROW_CLASS = \"dx-scheduler-date-table-last-row\";\nvar INNER_CELL_MARGIN = 5;\nvar OUTER_CELL_MARGIN = 20;\nvar SchedulerAgenda = SchedulerWorkSpace.inherit({\n  _activeStateUnit: void 0,\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      agendaDuration: 7,\n      rowHeight: 60,\n      noDataText: \"\"\n    });\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name;\n    var value = args.value;\n\n    switch (name) {\n      case \"agendaDuration\":\n        break;\n\n      case \"noDataText\":\n      case \"rowHeight\":\n        this._recalculateAgenda(this._rows);\n\n        break;\n\n      case \"groups\":\n        if (!value || !value.length) {\n          if (this._$groupTable) {\n            this._$groupTable.remove();\n\n            this._$groupTable = null;\n\n            this._detachGroupCountAttr();\n          }\n        } else {\n          if (!this._$groupTable) {\n            this._initGroupTable();\n\n            this._dateTableScrollable.$content().prepend(this._$groupTable);\n          }\n        }\n\n        this.callBase(args);\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _renderFocusState: noop,\n  _renderFocusTarget: noop,\n  _cleanFocusState: noop,\n  supportAllDayRow: function supportAllDayRow() {\n    return false;\n  },\n  _isVerticalGroupedWorkSpace: function _isVerticalGroupedWorkSpace() {\n    return false;\n  },\n  _getElementClass: function _getElementClass() {\n    return AGENDA_CLASS;\n  },\n  _setFirstViewDate: function _setFirstViewDate() {\n    this._firstViewDate = new Date(this.option(\"currentDate\"));\n\n    this._setStartDayHour(this._firstViewDate);\n  },\n  _getRowCount: function _getRowCount() {\n    return this.option(\"agendaDuration\");\n  },\n  _getCellCount: function _getCellCount() {\n    return 1;\n  },\n  _getTimePanelRowCount: function _getTimePanelRowCount() {\n    return this.option(\"agendaDuration\");\n  },\n  _getDateByIndex: noop,\n  _getFormat: function _getFormat() {\n    return \"d ddd\";\n  },\n  _renderAllDayPanel: noop,\n  _toggleAllDayVisibility: noop,\n  _initWorkSpaceUnits: function _initWorkSpaceUnits() {\n    this._initGroupTable();\n\n    this._$timePanel = $(\"<table>\").addClass(this._getTimePanelClass());\n    this._$dateTable = $(\"<table>\").addClass(this._getDateTableClass());\n  },\n  _initGroupTable: function _initGroupTable() {\n    var groups = this.option(\"groups\");\n\n    if (groups && groups.length) {\n      this._$groupTable = $(\"<table>\").addClass(GROUP_TABLE_CLASS);\n    }\n  },\n  _renderView: function _renderView() {\n    this._setFirstViewDate();\n\n    this._rows = [];\n    this.invoke(\"getAgendaRows\", {\n      agendaDuration: this.option(\"agendaDuration\"),\n      currentDate: new Date(this.option(\"currentDate\"))\n    }).done(function (rows) {\n      this._recalculateAgenda(rows);\n    }.bind(this));\n  },\n  _recalculateAgenda: function _recalculateAgenda(rows) {\n    var cellTemplates = [];\n\n    this._cleanView();\n\n    if (this._rowsIsEmpty(rows)) {\n      this._renderNoData();\n\n      return;\n    }\n\n    this._rows = rows;\n\n    if (this._$groupTable) {\n      cellTemplates = this._renderGroupHeader();\n\n      this._setGroupHeaderCellsHeight();\n    }\n\n    this._renderTimePanel();\n\n    this._renderDateTable();\n\n    this.invoke(\"agendaIsReady\", rows, INNER_CELL_MARGIN, OUTER_CELL_MARGIN);\n\n    this._applyCellTemplates(cellTemplates);\n\n    this._dateTableScrollable.update();\n  },\n  _renderNoData: function _renderNoData() {\n    this._$noDataContainer = $(\"<div>\").addClass(NODATA_CONTAINER_CLASS).html(this.option(\"noDataText\"));\n\n    this._dateTableScrollable.$content().append(this._$noDataContainer);\n  },\n  _setTableSizes: noop,\n  _toggleHorizontalScrollClass: noop,\n  _createCrossScrollingConfig: noop,\n  _setGroupHeaderCellsHeight: function _setGroupHeaderCellsHeight() {\n    var $cells = this._getGroupHeaderCells().filter(function (_, element) {\n      return !element.getAttribute(\"rowSpan\");\n    });\n\n    var rows = this._removeEmptyRows(this._rows);\n\n    if (!rows.length) {\n      return;\n    }\n\n    for (var i = 0; i < $cells.length; i++) {\n      var $cellContent = $cells.eq(i).find(\".dx-scheduler-group-header-content\");\n      $cellContent.outerHeight(this._getGroupRowHeight(rows[i]));\n    }\n  },\n  _rowsIsEmpty: function _rowsIsEmpty(rows) {\n    var result = true;\n\n    for (var i = 0; i < rows.length; i++) {\n      var groupRow = rows[i];\n\n      for (var j = 0; j < groupRow.length; j++) {\n        if (groupRow[j]) {\n          result = false;\n          break;\n        }\n      }\n    }\n\n    return result;\n  },\n  _detachGroupCountAttr: function _detachGroupCountAttr() {\n    this.$element().removeAttr(AGENDA_GROUPED_ATTR);\n  },\n  _attachGroupCountAttr: function _attachGroupCountAttr() {\n    this.$element().attr(AGENDA_GROUPED_ATTR, this.option(\"groups\").length);\n  },\n  _removeEmptyRows: function _removeEmptyRows(rows) {\n    var result = [];\n\n    var isEmpty = function isEmpty(data) {\n      return !data.some(function (value) {\n        return value > 0;\n      });\n    };\n\n    for (var i = 0; i < rows.length; i++) {\n      if (rows[i].length && !isEmpty(rows[i])) {\n        result.push(rows[i]);\n      }\n    }\n\n    return result;\n  },\n  _getGroupHeaderContainer: function _getGroupHeaderContainer() {\n    return this._$groupTable;\n  },\n  _makeGroupRows: function _makeGroupRows() {\n    var tree = this.invoke(\"createReducedResourcesTree\");\n    var cellTemplate = this.option(\"resourceCellTemplate\");\n\n    var getGroupHeaderContentClass = this._getGroupHeaderContentClass();\n\n    var cellTemplates = [];\n    var table = tableCreator.makeGroupedTableFromJSON(tableCreator.VERTICAL, tree, {\n      cellTag: \"th\",\n      groupTableClass: GROUP_TABLE_CLASS,\n      groupRowClass: this._getGroupRowClass(),\n      groupCellClass: this._getGroupHeaderClass(),\n      groupCellCustomContent: function groupCellCustomContent(cell, cellText, index, data) {\n        var container = domAdapter.createElement(\"div\");\n        var contentWrapper = domAdapter.createElement(\"div\");\n        container.className = getGroupHeaderContentClass;\n        contentWrapper.appendChild(cellText);\n        container.appendChild(contentWrapper);\n        container.className = getGroupHeaderContentClass;\n\n        if (cellTemplate && cellTemplate.render) {\n          cellTemplates.push(cellTemplate.render.bind(cellTemplate, {\n            model: {\n              data: data.data,\n              id: data.value,\n              color: data.color,\n              text: cellText.textContent\n            },\n            container: getPublicElement($(container)),\n            index: index\n          }));\n        } else {\n          contentWrapper.appendChild(cellText);\n          container.appendChild(contentWrapper);\n        }\n\n        cell.appendChild(container);\n      },\n      cellTemplate: cellTemplate\n    });\n    return {\n      elements: $(table).find(\".\" + this._getGroupRowClass()),\n      cellTemplates: cellTemplates\n    };\n  },\n  _cleanView: function _cleanView() {\n    this._$dateTable.empty();\n\n    this._$timePanel.empty();\n\n    if (this._$groupTable) {\n      this._$groupTable.empty();\n    }\n\n    if (this._$noDataContainer) {\n      this._$noDataContainer.empty();\n\n      this._$noDataContainer.remove();\n\n      delete this._$noDataContainer;\n    }\n  },\n  _createWorkSpaceElements: function _createWorkSpaceElements() {\n    this._createWorkSpaceStaticElements();\n  },\n  _createWorkSpaceStaticElements: function _createWorkSpaceStaticElements() {\n    if (this._$groupTable) {\n      this._dateTableScrollable.$content().prepend(this._$groupTable);\n    }\n\n    this._dateTableScrollable.$content().append(this._$timePanel, this._$dateTable);\n\n    this.$element().append(this._dateTableScrollable.$element());\n  },\n  _renderDateTable: function _renderDateTable() {\n    this._renderTableBody({\n      container: getPublicElement(this._$dateTable),\n      rowClass: this._getDateTableRowClass(),\n      cellClass: this._getDateTableCellClass()\n    });\n  },\n  _attachTablesEvents: noop,\n  _attachEvents: noop,\n  _cleanCellDataCache: noop,\n  needRenderDateTimeIndication: function needRenderDateTimeIndication() {\n    return false;\n  },\n  _prepareCellTemplateOptions: function _prepareCellTemplateOptions(text, date, rowIndex, $cell) {\n    var groupsOpt = this.option(\"groups\");\n    var groups = {};\n    var path = groupsOpt.length && this._getPathToLeaf(rowIndex) || [];\n    path.forEach(function (resourceValue, resourceIndex) {\n      var resourceName = groupsOpt[resourceIndex].name;\n      groups[resourceName] = resourceValue;\n    });\n    return {\n      model: {\n        text: text,\n        date: date,\n        groups: groups\n      },\n      container: getPublicElement($cell),\n      index: rowIndex\n    };\n  },\n  _renderTableBody: function _renderTableBody(options) {\n    var cellTemplates = [];\n    var cellTemplateOpt = options.cellTemplate;\n    this._$rows = [];\n\n    var fillTableBody = function (rowIndex, rowSize) {\n      if (rowSize) {\n        var date;\n        var cellDateNumber;\n        var cellDayName;\n        var $row = $(\"<tr>\");\n        var $td = $(\"<td>\").height(this._getRowHeight(rowSize));\n\n        if (options.getStartDate) {\n          date = options.getStartDate && options.getStartDate(rowIndex);\n          cellDateNumber = dateLocalization.format(date, \"d\");\n          cellDayName = dateLocalization.format(date, this._formatWeekday);\n        }\n\n        if (cellTemplateOpt && cellTemplateOpt.render) {\n          var templateOptions = this._prepareCellTemplateOptions(cellDateNumber + \" \" + cellDayName, date, i, $td);\n\n          cellTemplates.push(cellTemplateOpt.render.bind(cellTemplateOpt, templateOptions));\n        } else {\n          if (cellDateNumber && cellDayName) {\n            $td.addClass(AGENDA_DATE_CLASS).text(cellDateNumber + \" \" + cellDayName);\n          }\n        }\n\n        if (options.rowClass) {\n          $row.addClass(options.rowClass);\n        }\n\n        if (options.cellClass) {\n          $td.addClass(options.cellClass);\n        }\n\n        $row.append($td);\n\n        this._$rows.push($row);\n      }\n    }.bind(this);\n\n    for (var i = 0; i < this._rows.length; i++) {\n      each(this._rows[i], fillTableBody);\n\n      this._setLastRowClass();\n    }\n\n    $(options.container).append($(\"<tbody>\").append(this._$rows));\n\n    this._applyCellTemplates(cellTemplates);\n  },\n  _setLastRowClass: function _setLastRowClass() {\n    if (this._rows.length > 1 && this._$rows.length) {\n      var $lastRow = this._$rows[this._$rows.length - 1];\n      $lastRow.addClass(LAST_ROW_CLASS);\n    }\n  },\n  _renderTimePanel: function _renderTimePanel() {\n    this._renderTableBody({\n      container: getPublicElement(this._$timePanel),\n      rowCount: this._getTimePanelRowCount(),\n      cellCount: 1,\n      rowClass: TIME_PANEL_ROW_CLASS,\n      cellClass: TIME_PANEL_CELL_CLASS,\n      cellTemplate: this.option(\"dateCellTemplate\"),\n      getStartDate: this._getTimePanelStartDate.bind(this)\n    });\n  },\n  _getTimePanelStartDate: function _getTimePanelStartDate(rowIndex) {\n    var current = new Date(this.option(\"currentDate\"));\n    var cellDate = new Date(current.setDate(current.getDate() + rowIndex));\n    return cellDate;\n  },\n  _getRowHeight: function _getRowHeight(rowSize) {\n    var baseHeight = this.option(\"rowHeight\");\n    var innerOffset = (rowSize - 1) * INNER_CELL_MARGIN;\n    return rowSize ? baseHeight * rowSize + innerOffset + OUTER_CELL_MARGIN : 0;\n  },\n  _getGroupRowHeight: function _getGroupRowHeight(groupRows) {\n    if (!groupRows) {\n      return;\n    }\n\n    var result = 0;\n\n    for (var i = 0; i < groupRows.length; i++) {\n      result += this._getRowHeight(groupRows[i]);\n    }\n\n    return result;\n  },\n  getAgendaVerticalStepHeight: function getAgendaVerticalStepHeight() {\n    return this.option(\"rowHeight\");\n  },\n  getEndViewDate: function getEndViewDate() {\n    var currentDate = new Date(this.option(\"currentDate\"));\n    var agendaDuration = this.option(\"agendaDuration\");\n    currentDate.setHours(this.option(\"endDayHour\"));\n    var result = currentDate.setDate(currentDate.getDate() + agendaDuration - 1) - 6e4;\n    return new Date(result);\n  },\n  getCoordinatesByDate: function getCoordinatesByDate() {\n    return {\n      top: 0,\n      left: 0,\n      max: 0,\n      groupIndex: 0\n    };\n  },\n  getCellDataByCoordinates: function getCellDataByCoordinates() {\n    return {\n      startDate: null,\n      endDate: null\n    };\n  }\n});\nregisterComponent(\"dxSchedulerAgenda\", SchedulerAgenda);\nmodule.exports = SchedulerAgenda;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/scheduler/workspaces/ui.scheduler.agenda.js"],"names":["$","require","domAdapter","noop","each","getPublicElement","registerComponent","SchedulerWorkSpace","extend","dateLocalization","tableCreator","AGENDA_CLASS","AGENDA_DATE_CLASS","GROUP_TABLE_CLASS","AGENDA_GROUPED_ATTR","TIME_PANEL_ROW_CLASS","TIME_PANEL_CELL_CLASS","NODATA_CONTAINER_CLASS","LAST_ROW_CLASS","INNER_CELL_MARGIN","OUTER_CELL_MARGIN","SchedulerAgenda","_activeStateUnit","_getDefaultOptions","agendaDuration","rowHeight","noDataText","_optionChanged","name","args","value","_renderFocusState","_renderFocusTarget","_cleanFocusState","supportAllDayRow","_isVerticalGroupedWorkSpace","_getElementClass","_setFirstViewDate","_getRowCount","_getCellCount","_getTimePanelRowCount","_getDateByIndex","_getFormat","_renderAllDayPanel","_toggleAllDayVisibility","_initWorkSpaceUnits","_initGroupTable","groups","_renderView","currentDate","_recalculateAgenda","cellTemplates","_renderNoData","_setTableSizes","_toggleHorizontalScrollClass","_createCrossScrollingConfig","_setGroupHeaderCellsHeight","$cells","element","rows","i","$cellContent","_rowsIsEmpty","result","groupRow","j","_detachGroupCountAttr","_attachGroupCountAttr","_removeEmptyRows","isEmpty","_getGroupHeaderContainer","_makeGroupRows","tree","cellTemplate","getGroupHeaderContentClass","table","cellTag","groupTableClass","groupRowClass","groupCellClass","groupCellCustomContent","container","contentWrapper","model","data","id","color","text","cellText","textContent","index","cell","elements","_cleanView","_createWorkSpaceElements","_createWorkSpaceStaticElements","_renderDateTable","rowClass","cellClass","_attachTablesEvents","_attachEvents","_cleanCellDataCache","needRenderDateTimeIndication","_prepareCellTemplateOptions","groupsOpt","path","resourceName","date","rowIndex","_renderTableBody","cellTemplateOpt","options","fillTableBody","$row","$td","cellDateNumber","cellDayName","templateOptions","_setLastRowClass","$lastRow","_renderTimePanel","rowCount","cellCount","getStartDate","_getTimePanelStartDate","current","cellDate","_getRowHeight","baseHeight","innerOffset","rowSize","_getGroupRowHeight","groupRows","getAgendaVerticalStepHeight","getEndViewDate","getCoordinatesByDate","top","left","max","groupIndex","getCellDataByCoordinates","startDate","endDate","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.agenda.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../../core/renderer\");\r\nvar domAdapter = require(\"../../../core/dom_adapter\");\r\nvar noop = require(\"../../../core/utils/common\").noop;\r\nvar each = require(\"../../../core/utils/iterator\").each;\r\nvar getPublicElement = require(\"../../../core/utils/dom\").getPublicElement;\r\nvar registerComponent = require(\"../../../core/component_registrator\");\r\nvar SchedulerWorkSpace = require(\"./ui.scheduler.work_space\");\r\nvar extend = require(\"../../../core/utils/extend\").extend;\r\nvar dateLocalization = require(\"../../../localization/date\");\r\nvar tableCreator = require(\"../ui.scheduler.table_creator\");\r\nvar AGENDA_CLASS = \"dx-scheduler-agenda\";\r\nvar AGENDA_DATE_CLASS = \"dx-scheduler-agenda-date\";\r\nvar GROUP_TABLE_CLASS = \"dx-scheduler-group-table\";\r\nvar AGENDA_GROUPED_ATTR = \"dx-group-column-count\";\r\nvar TIME_PANEL_ROW_CLASS = \"dx-scheduler-time-panel-row\";\r\nvar TIME_PANEL_CELL_CLASS = \"dx-scheduler-time-panel-cell\";\r\nvar NODATA_CONTAINER_CLASS = \"dx-scheduler-agenda-nodata\";\r\nvar LAST_ROW_CLASS = \"dx-scheduler-date-table-last-row\";\r\nvar INNER_CELL_MARGIN = 5;\r\nvar OUTER_CELL_MARGIN = 20;\r\nvar SchedulerAgenda = SchedulerWorkSpace.inherit({\r\n    _activeStateUnit: void 0,\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            agendaDuration: 7,\r\n            rowHeight: 60,\r\n            noDataText: \"\"\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        var value = args.value;\r\n        switch (name) {\r\n            case \"agendaDuration\":\r\n                break;\r\n            case \"noDataText\":\r\n            case \"rowHeight\":\r\n                this._recalculateAgenda(this._rows);\r\n                break;\r\n            case \"groups\":\r\n                if (!value || !value.length) {\r\n                    if (this._$groupTable) {\r\n                        this._$groupTable.remove();\r\n                        this._$groupTable = null;\r\n                        this._detachGroupCountAttr()\r\n                    }\r\n                } else {\r\n                    if (!this._$groupTable) {\r\n                        this._initGroupTable();\r\n                        this._dateTableScrollable.$content().prepend(this._$groupTable)\r\n                    }\r\n                }\r\n                this.callBase(args);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _renderFocusState: noop,\r\n    _renderFocusTarget: noop,\r\n    _cleanFocusState: noop,\r\n    supportAllDayRow: function() {\r\n        return false\r\n    },\r\n    _isVerticalGroupedWorkSpace: function() {\r\n        return false\r\n    },\r\n    _getElementClass: function() {\r\n        return AGENDA_CLASS\r\n    },\r\n    _setFirstViewDate: function() {\r\n        this._firstViewDate = new Date(this.option(\"currentDate\"));\r\n        this._setStartDayHour(this._firstViewDate)\r\n    },\r\n    _getRowCount: function() {\r\n        return this.option(\"agendaDuration\")\r\n    },\r\n    _getCellCount: function() {\r\n        return 1\r\n    },\r\n    _getTimePanelRowCount: function() {\r\n        return this.option(\"agendaDuration\")\r\n    },\r\n    _getDateByIndex: noop,\r\n    _getFormat: function() {\r\n        return \"d ddd\"\r\n    },\r\n    _renderAllDayPanel: noop,\r\n    _toggleAllDayVisibility: noop,\r\n    _initWorkSpaceUnits: function() {\r\n        this._initGroupTable();\r\n        this._$timePanel = $(\"<table>\").addClass(this._getTimePanelClass());\r\n        this._$dateTable = $(\"<table>\").addClass(this._getDateTableClass())\r\n    },\r\n    _initGroupTable: function() {\r\n        var groups = this.option(\"groups\");\r\n        if (groups && groups.length) {\r\n            this._$groupTable = $(\"<table>\").addClass(GROUP_TABLE_CLASS)\r\n        }\r\n    },\r\n    _renderView: function() {\r\n        this._setFirstViewDate();\r\n        this._rows = [];\r\n        this.invoke(\"getAgendaRows\", {\r\n            agendaDuration: this.option(\"agendaDuration\"),\r\n            currentDate: new Date(this.option(\"currentDate\"))\r\n        }).done(function(rows) {\r\n            this._recalculateAgenda(rows)\r\n        }.bind(this))\r\n    },\r\n    _recalculateAgenda: function(rows) {\r\n        var cellTemplates = [];\r\n        this._cleanView();\r\n        if (this._rowsIsEmpty(rows)) {\r\n            this._renderNoData();\r\n            return\r\n        }\r\n        this._rows = rows;\r\n        if (this._$groupTable) {\r\n            cellTemplates = this._renderGroupHeader();\r\n            this._setGroupHeaderCellsHeight()\r\n        }\r\n        this._renderTimePanel();\r\n        this._renderDateTable();\r\n        this.invoke(\"agendaIsReady\", rows, INNER_CELL_MARGIN, OUTER_CELL_MARGIN);\r\n        this._applyCellTemplates(cellTemplates);\r\n        this._dateTableScrollable.update()\r\n    },\r\n    _renderNoData: function() {\r\n        this._$noDataContainer = $(\"<div>\").addClass(NODATA_CONTAINER_CLASS).html(this.option(\"noDataText\"));\r\n        this._dateTableScrollable.$content().append(this._$noDataContainer)\r\n    },\r\n    _setTableSizes: noop,\r\n    _toggleHorizontalScrollClass: noop,\r\n    _createCrossScrollingConfig: noop,\r\n    _setGroupHeaderCellsHeight: function() {\r\n        var $cells = this._getGroupHeaderCells().filter(function(_, element) {\r\n            return !element.getAttribute(\"rowSpan\")\r\n        });\r\n        var rows = this._removeEmptyRows(this._rows);\r\n        if (!rows.length) {\r\n            return\r\n        }\r\n        for (var i = 0; i < $cells.length; i++) {\r\n            var $cellContent = $cells.eq(i).find(\".dx-scheduler-group-header-content\");\r\n            $cellContent.outerHeight(this._getGroupRowHeight(rows[i]))\r\n        }\r\n    },\r\n    _rowsIsEmpty: function(rows) {\r\n        var result = true;\r\n        for (var i = 0; i < rows.length; i++) {\r\n            var groupRow = rows[i];\r\n            for (var j = 0; j < groupRow.length; j++) {\r\n                if (groupRow[j]) {\r\n                    result = false;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _detachGroupCountAttr: function() {\r\n        this.$element().removeAttr(AGENDA_GROUPED_ATTR)\r\n    },\r\n    _attachGroupCountAttr: function() {\r\n        this.$element().attr(AGENDA_GROUPED_ATTR, this.option(\"groups\").length)\r\n    },\r\n    _removeEmptyRows: function(rows) {\r\n        var result = [];\r\n        var isEmpty = function(data) {\r\n            return !data.some(function(value) {\r\n                return value > 0\r\n            })\r\n        };\r\n        for (var i = 0; i < rows.length; i++) {\r\n            if (rows[i].length && !isEmpty(rows[i])) {\r\n                result.push(rows[i])\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _getGroupHeaderContainer: function() {\r\n        return this._$groupTable\r\n    },\r\n    _makeGroupRows: function() {\r\n        var tree = this.invoke(\"createReducedResourcesTree\");\r\n        var cellTemplate = this.option(\"resourceCellTemplate\");\r\n        var getGroupHeaderContentClass = this._getGroupHeaderContentClass();\r\n        var cellTemplates = [];\r\n        var table = tableCreator.makeGroupedTableFromJSON(tableCreator.VERTICAL, tree, {\r\n            cellTag: \"th\",\r\n            groupTableClass: GROUP_TABLE_CLASS,\r\n            groupRowClass: this._getGroupRowClass(),\r\n            groupCellClass: this._getGroupHeaderClass(),\r\n            groupCellCustomContent: function(cell, cellText, index, data) {\r\n                var container = domAdapter.createElement(\"div\");\r\n                var contentWrapper = domAdapter.createElement(\"div\");\r\n                container.className = getGroupHeaderContentClass;\r\n                contentWrapper.appendChild(cellText);\r\n                container.appendChild(contentWrapper);\r\n                container.className = getGroupHeaderContentClass;\r\n                if (cellTemplate && cellTemplate.render) {\r\n                    cellTemplates.push(cellTemplate.render.bind(cellTemplate, {\r\n                        model: {\r\n                            data: data.data,\r\n                            id: data.value,\r\n                            color: data.color,\r\n                            text: cellText.textContent\r\n                        },\r\n                        container: getPublicElement($(container)),\r\n                        index: index\r\n                    }))\r\n                } else {\r\n                    contentWrapper.appendChild(cellText);\r\n                    container.appendChild(contentWrapper)\r\n                }\r\n                cell.appendChild(container)\r\n            },\r\n            cellTemplate: cellTemplate\r\n        });\r\n        return {\r\n            elements: $(table).find(\".\" + this._getGroupRowClass()),\r\n            cellTemplates: cellTemplates\r\n        }\r\n    },\r\n    _cleanView: function() {\r\n        this._$dateTable.empty();\r\n        this._$timePanel.empty();\r\n        if (this._$groupTable) {\r\n            this._$groupTable.empty()\r\n        }\r\n        if (this._$noDataContainer) {\r\n            this._$noDataContainer.empty();\r\n            this._$noDataContainer.remove();\r\n            delete this._$noDataContainer\r\n        }\r\n    },\r\n    _createWorkSpaceElements: function() {\r\n        this._createWorkSpaceStaticElements()\r\n    },\r\n    _createWorkSpaceStaticElements: function() {\r\n        if (this._$groupTable) {\r\n            this._dateTableScrollable.$content().prepend(this._$groupTable)\r\n        }\r\n        this._dateTableScrollable.$content().append(this._$timePanel, this._$dateTable);\r\n        this.$element().append(this._dateTableScrollable.$element())\r\n    },\r\n    _renderDateTable: function() {\r\n        this._renderTableBody({\r\n            container: getPublicElement(this._$dateTable),\r\n            rowClass: this._getDateTableRowClass(),\r\n            cellClass: this._getDateTableCellClass()\r\n        })\r\n    },\r\n    _attachTablesEvents: noop,\r\n    _attachEvents: noop,\r\n    _cleanCellDataCache: noop,\r\n    needRenderDateTimeIndication: function() {\r\n        return false\r\n    },\r\n    _prepareCellTemplateOptions: function(text, date, rowIndex, $cell) {\r\n        var groupsOpt = this.option(\"groups\");\r\n        var groups = {};\r\n        var path = groupsOpt.length && this._getPathToLeaf(rowIndex) || [];\r\n        path.forEach(function(resourceValue, resourceIndex) {\r\n            var resourceName = groupsOpt[resourceIndex].name;\r\n            groups[resourceName] = resourceValue\r\n        });\r\n        return {\r\n            model: {\r\n                text: text,\r\n                date: date,\r\n                groups: groups\r\n            },\r\n            container: getPublicElement($cell),\r\n            index: rowIndex\r\n        }\r\n    },\r\n    _renderTableBody: function(options) {\r\n        var cellTemplates = [];\r\n        var cellTemplateOpt = options.cellTemplate;\r\n        this._$rows = [];\r\n        var fillTableBody = function(rowIndex, rowSize) {\r\n            if (rowSize) {\r\n                var date;\r\n                var cellDateNumber;\r\n                var cellDayName;\r\n                var $row = $(\"<tr>\");\r\n                var $td = $(\"<td>\").height(this._getRowHeight(rowSize));\r\n                if (options.getStartDate) {\r\n                    date = options.getStartDate && options.getStartDate(rowIndex);\r\n                    cellDateNumber = dateLocalization.format(date, \"d\");\r\n                    cellDayName = dateLocalization.format(date, this._formatWeekday)\r\n                }\r\n                if (cellTemplateOpt && cellTemplateOpt.render) {\r\n                    var templateOptions = this._prepareCellTemplateOptions(cellDateNumber + \" \" + cellDayName, date, i, $td);\r\n                    cellTemplates.push(cellTemplateOpt.render.bind(cellTemplateOpt, templateOptions))\r\n                } else {\r\n                    if (cellDateNumber && cellDayName) {\r\n                        $td.addClass(AGENDA_DATE_CLASS).text(cellDateNumber + \" \" + cellDayName)\r\n                    }\r\n                }\r\n                if (options.rowClass) {\r\n                    $row.addClass(options.rowClass)\r\n                }\r\n                if (options.cellClass) {\r\n                    $td.addClass(options.cellClass)\r\n                }\r\n                $row.append($td);\r\n                this._$rows.push($row)\r\n            }\r\n        }.bind(this);\r\n        for (var i = 0; i < this._rows.length; i++) {\r\n            each(this._rows[i], fillTableBody);\r\n            this._setLastRowClass()\r\n        }\r\n        $(options.container).append($(\"<tbody>\").append(this._$rows));\r\n        this._applyCellTemplates(cellTemplates)\r\n    },\r\n    _setLastRowClass: function() {\r\n        if (this._rows.length > 1 && this._$rows.length) {\r\n            var $lastRow = this._$rows[this._$rows.length - 1];\r\n            $lastRow.addClass(LAST_ROW_CLASS)\r\n        }\r\n    },\r\n    _renderTimePanel: function() {\r\n        this._renderTableBody({\r\n            container: getPublicElement(this._$timePanel),\r\n            rowCount: this._getTimePanelRowCount(),\r\n            cellCount: 1,\r\n            rowClass: TIME_PANEL_ROW_CLASS,\r\n            cellClass: TIME_PANEL_CELL_CLASS,\r\n            cellTemplate: this.option(\"dateCellTemplate\"),\r\n            getStartDate: this._getTimePanelStartDate.bind(this)\r\n        })\r\n    },\r\n    _getTimePanelStartDate: function(rowIndex) {\r\n        var current = new Date(this.option(\"currentDate\"));\r\n        var cellDate = new Date(current.setDate(current.getDate() + rowIndex));\r\n        return cellDate\r\n    },\r\n    _getRowHeight: function(rowSize) {\r\n        var baseHeight = this.option(\"rowHeight\");\r\n        var innerOffset = (rowSize - 1) * INNER_CELL_MARGIN;\r\n        return rowSize ? baseHeight * rowSize + innerOffset + OUTER_CELL_MARGIN : 0\r\n    },\r\n    _getGroupRowHeight: function(groupRows) {\r\n        if (!groupRows) {\r\n            return\r\n        }\r\n        var result = 0;\r\n        for (var i = 0; i < groupRows.length; i++) {\r\n            result += this._getRowHeight(groupRows[i])\r\n        }\r\n        return result\r\n    },\r\n    getAgendaVerticalStepHeight: function() {\r\n        return this.option(\"rowHeight\")\r\n    },\r\n    getEndViewDate: function() {\r\n        var currentDate = new Date(this.option(\"currentDate\"));\r\n        var agendaDuration = this.option(\"agendaDuration\");\r\n        currentDate.setHours(this.option(\"endDayHour\"));\r\n        var result = currentDate.setDate(currentDate.getDate() + agendaDuration - 1) - 6e4;\r\n        return new Date(result)\r\n    },\r\n    getCoordinatesByDate: function() {\r\n        return {\r\n            top: 0,\r\n            left: 0,\r\n            max: 0,\r\n            groupIndex: 0\r\n        }\r\n    },\r\n    getCellDataByCoordinates: function() {\r\n        return {\r\n            startDate: null,\r\n            endDate: null\r\n        }\r\n    }\r\n});\r\nregisterComponent(\"dxSchedulerAgenda\", SchedulerAgenda);\r\nmodule.exports = SchedulerAgenda;\r\n"]},"metadata":{},"sourceType":"module"}