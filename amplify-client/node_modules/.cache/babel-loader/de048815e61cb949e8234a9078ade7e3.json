{"ast":null,"code":"/**\r\n * DevExtreme (events/gesture/emitter.gesture.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar devices = require(\"../../core/devices\");\n\nvar styleUtils = require(\"../../core/utils/style\");\n\nvar callOnce = require(\"../../core/utils/call_once\");\n\nvar domUtils = require(\"../../core/utils/dom\");\n\nvar readyCallbacks = require(\"../../core/utils/ready_callbacks\");\n\nvar ready = readyCallbacks.add;\n\nvar mathUtils = require(\"../../core/utils/math\");\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar eventUtils = require(\"../utils\");\n\nvar Emitter = require(\"../core/emitter\");\n\nvar sign = mathUtils.sign;\nvar abs = Math.abs;\nvar SLEEP = 0;\nvar INITED = 1;\nvar STARTED = 2;\nvar TOUCH_BOUNDARY = 10;\nvar IMMEDIATE_TOUCH_BOUNDARY = 0;\nvar IMMEDIATE_TIMEOUT = 180;\n\nvar supportPointerEvents = function supportPointerEvents() {\n  return styleUtils.styleProp(\"pointer-events\");\n};\n\nvar setGestureCover = callOnce(function () {\n  var GESTURE_COVER_CLASS = \"dx-gesture-cover\";\n  var isDesktop = \"desktop\" === devices.real().deviceType;\n\n  if (!supportPointerEvents() || !isDesktop) {\n    return noop;\n  }\n\n  var $cover = $(\"<div>\").addClass(GESTURE_COVER_CLASS).css(\"pointerEvents\", \"none\");\n  eventsEngine.subscribeGlobal($cover, \"dxmousewheel\", function (e) {\n    e.preventDefault();\n  });\n  ready(function () {\n    $cover.appendTo(\"body\");\n  });\n  return function (toggle, cursor) {\n    $cover.css(\"pointerEvents\", toggle ? \"all\" : \"none\");\n    toggle && $cover.css(\"cursor\", cursor);\n  };\n});\n\nvar gestureCover = function gestureCover(toggle, cursor) {\n  var gestureCoverStrategy = setGestureCover();\n  gestureCoverStrategy(toggle, cursor);\n};\n\nvar GestureEmitter = Emitter.inherit({\n  gesture: true,\n  configure: function configure(data) {\n    this.getElement().css(\"msTouchAction\", data.immediate ? \"pinch-zoom\" : \"\");\n    this.callBase(data);\n  },\n  allowInterruptionByMouseWheel: function allowInterruptionByMouseWheel() {\n    return this._stage !== STARTED;\n  },\n  getDirection: function getDirection() {\n    return this.direction;\n  },\n  _cancel: function _cancel() {\n    this.callBase.apply(this, arguments);\n\n    this._toggleGestureCover(false);\n\n    this._stage = SLEEP;\n  },\n  start: function start(e) {\n    if (e._needSkipEvent || eventUtils.needSkipEvent(e)) {\n      this._cancel(e);\n\n      return;\n    }\n\n    this._startEvent = eventUtils.createEvent(e);\n    this._startEventData = eventUtils.eventData(e);\n    this._stage = INITED;\n\n    this._init(e);\n\n    this._setupImmediateTimer();\n  },\n  _setupImmediateTimer: function _setupImmediateTimer() {\n    clearTimeout(this._immediateTimer);\n    this._immediateAccepted = false;\n\n    if (!this.immediate) {\n      return;\n    }\n\n    this._immediateTimer = setTimeout(function () {\n      this._immediateAccepted = true;\n    }.bind(this), IMMEDIATE_TIMEOUT);\n  },\n  move: function move(e) {\n    if (this._stage === INITED && this._directionConfirmed(e)) {\n      this._stage = STARTED;\n\n      this._resetActiveElement();\n\n      this._toggleGestureCover(true);\n\n      this._clearSelection(e);\n\n      this._adjustStartEvent(e);\n\n      this._start(this._startEvent);\n\n      if (this._stage === SLEEP) {\n        return;\n      }\n\n      this._requestAccept(e);\n\n      this._move(e);\n\n      this._forgetAccept();\n    } else {\n      if (this._stage === STARTED) {\n        this._clearSelection(e);\n\n        this._move(e);\n      }\n    }\n  },\n  _directionConfirmed: function _directionConfirmed(e) {\n    var touchBoundary = this._getTouchBoundary(e);\n\n    var delta = eventUtils.eventDelta(this._startEventData, eventUtils.eventData(e));\n    var deltaX = abs(delta.x);\n    var deltaY = abs(delta.y);\n\n    var horizontalMove = this._validateMove(touchBoundary, deltaX, deltaY);\n\n    var verticalMove = this._validateMove(touchBoundary, deltaY, deltaX);\n\n    var direction = this.getDirection(e);\n    var bothAccepted = \"both\" === direction && (horizontalMove || verticalMove);\n    var horizontalAccepted = \"horizontal\" === direction && horizontalMove;\n    var verticalAccepted = \"vertical\" === direction && verticalMove;\n    return bothAccepted || horizontalAccepted || verticalAccepted || this._immediateAccepted;\n  },\n  _validateMove: function _validateMove(touchBoundary, mainAxis, crossAxis) {\n    return mainAxis && mainAxis >= touchBoundary && (this.immediate ? mainAxis >= crossAxis : true);\n  },\n  _getTouchBoundary: function _getTouchBoundary(e) {\n    return this.immediate || eventUtils.isDxMouseWheelEvent(e) ? IMMEDIATE_TOUCH_BOUNDARY : TOUCH_BOUNDARY;\n  },\n  _adjustStartEvent: function _adjustStartEvent(e) {\n    var touchBoundary = this._getTouchBoundary(e);\n\n    var delta = eventUtils.eventDelta(this._startEventData, eventUtils.eventData(e));\n    this._startEvent.pageX += sign(delta.x) * touchBoundary;\n    this._startEvent.pageY += sign(delta.y) * touchBoundary;\n  },\n  _resetActiveElement: function _resetActiveElement() {\n    if (\"ios\" === devices.real().platform && this.getElement().find(\":focus\").length) {\n      domUtils.resetActiveElement();\n    }\n  },\n  _toggleGestureCover: function _toggleGestureCover(toggle) {\n    this._toggleGestureCoverImpl(toggle);\n  },\n  _toggleGestureCoverImpl: function _toggleGestureCoverImpl(toggle) {\n    var isStarted = this._stage === STARTED;\n\n    if (isStarted) {\n      gestureCover(toggle, this.getElement().css(\"cursor\"));\n    }\n  },\n  _clearSelection: function _clearSelection(e) {\n    if (eventUtils.isDxMouseWheelEvent(e) || eventUtils.isTouchEvent(e)) {\n      return;\n    }\n\n    domUtils.clearSelection();\n  },\n  end: function end(e) {\n    this._toggleGestureCover(false);\n\n    if (this._stage === STARTED) {\n      this._end(e);\n    } else {\n      if (this._stage === INITED) {\n        this._stop(e);\n      }\n    }\n\n    this._stage = SLEEP;\n  },\n  dispose: function dispose() {\n    clearTimeout(this._immediateTimer);\n    this.callBase.apply(this, arguments);\n\n    this._toggleGestureCover(false);\n  },\n  _init: noop,\n  _start: noop,\n  _move: noop,\n  _stop: noop,\n  _end: noop\n});\nGestureEmitter.initialTouchBoundary = TOUCH_BOUNDARY;\n\nGestureEmitter.touchBoundary = function (newBoundary) {\n  if (isDefined(newBoundary)) {\n    TOUCH_BOUNDARY = newBoundary;\n    return;\n  }\n\n  return TOUCH_BOUNDARY;\n};\n\nmodule.exports = GestureEmitter;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/events/gesture/emitter.gesture.js"],"names":["$","require","eventsEngine","devices","styleUtils","callOnce","domUtils","readyCallbacks","ready","mathUtils","noop","isDefined","eventUtils","Emitter","sign","abs","Math","SLEEP","INITED","STARTED","TOUCH_BOUNDARY","IMMEDIATE_TOUCH_BOUNDARY","IMMEDIATE_TIMEOUT","supportPointerEvents","setGestureCover","GESTURE_COVER_CLASS","isDesktop","$cover","e","toggle","gestureCover","gestureCoverStrategy","GestureEmitter","gesture","configure","data","allowInterruptionByMouseWheel","getDirection","_cancel","start","_setupImmediateTimer","clearTimeout","setTimeout","move","_directionConfirmed","touchBoundary","delta","deltaX","deltaY","horizontalMove","verticalMove","direction","bothAccepted","horizontalAccepted","verticalAccepted","_validateMove","mainAxis","_getTouchBoundary","_adjustStartEvent","_resetActiveElement","_toggleGestureCover","_toggleGestureCoverImpl","isStarted","_clearSelection","end","dispose","_init","_start","_move","_stop","_end","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (events/gesture/emitter.gesture.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar devices = require(\"../../core/devices\");\r\nvar styleUtils = require(\"../../core/utils/style\");\r\nvar callOnce = require(\"../../core/utils/call_once\");\r\nvar domUtils = require(\"../../core/utils/dom\");\r\nvar readyCallbacks = require(\"../../core/utils/ready_callbacks\");\r\nvar ready = readyCallbacks.add;\r\nvar mathUtils = require(\"../../core/utils/math\");\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar eventUtils = require(\"../utils\");\r\nvar Emitter = require(\"../core/emitter\");\r\nvar sign = mathUtils.sign;\r\nvar abs = Math.abs;\r\nvar SLEEP = 0;\r\nvar INITED = 1;\r\nvar STARTED = 2;\r\nvar TOUCH_BOUNDARY = 10;\r\nvar IMMEDIATE_TOUCH_BOUNDARY = 0;\r\nvar IMMEDIATE_TIMEOUT = 180;\r\nvar supportPointerEvents = function() {\r\n    return styleUtils.styleProp(\"pointer-events\")\r\n};\r\nvar setGestureCover = callOnce(function() {\r\n    var GESTURE_COVER_CLASS = \"dx-gesture-cover\";\r\n    var isDesktop = \"desktop\" === devices.real().deviceType;\r\n    if (!supportPointerEvents() || !isDesktop) {\r\n        return noop\r\n    }\r\n    var $cover = $(\"<div>\").addClass(GESTURE_COVER_CLASS).css(\"pointerEvents\", \"none\");\r\n    eventsEngine.subscribeGlobal($cover, \"dxmousewheel\", function(e) {\r\n        e.preventDefault()\r\n    });\r\n    ready(function() {\r\n        $cover.appendTo(\"body\")\r\n    });\r\n    return function(toggle, cursor) {\r\n        $cover.css(\"pointerEvents\", toggle ? \"all\" : \"none\");\r\n        toggle && $cover.css(\"cursor\", cursor)\r\n    }\r\n});\r\nvar gestureCover = function(toggle, cursor) {\r\n    var gestureCoverStrategy = setGestureCover();\r\n    gestureCoverStrategy(toggle, cursor)\r\n};\r\nvar GestureEmitter = Emitter.inherit({\r\n    gesture: true,\r\n    configure: function(data) {\r\n        this.getElement().css(\"msTouchAction\", data.immediate ? \"pinch-zoom\" : \"\");\r\n        this.callBase(data)\r\n    },\r\n    allowInterruptionByMouseWheel: function() {\r\n        return this._stage !== STARTED\r\n    },\r\n    getDirection: function() {\r\n        return this.direction\r\n    },\r\n    _cancel: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._toggleGestureCover(false);\r\n        this._stage = SLEEP\r\n    },\r\n    start: function(e) {\r\n        if (e._needSkipEvent || eventUtils.needSkipEvent(e)) {\r\n            this._cancel(e);\r\n            return\r\n        }\r\n        this._startEvent = eventUtils.createEvent(e);\r\n        this._startEventData = eventUtils.eventData(e);\r\n        this._stage = INITED;\r\n        this._init(e);\r\n        this._setupImmediateTimer()\r\n    },\r\n    _setupImmediateTimer: function() {\r\n        clearTimeout(this._immediateTimer);\r\n        this._immediateAccepted = false;\r\n        if (!this.immediate) {\r\n            return\r\n        }\r\n        this._immediateTimer = setTimeout(function() {\r\n            this._immediateAccepted = true\r\n        }.bind(this), IMMEDIATE_TIMEOUT)\r\n    },\r\n    move: function(e) {\r\n        if (this._stage === INITED && this._directionConfirmed(e)) {\r\n            this._stage = STARTED;\r\n            this._resetActiveElement();\r\n            this._toggleGestureCover(true);\r\n            this._clearSelection(e);\r\n            this._adjustStartEvent(e);\r\n            this._start(this._startEvent);\r\n            if (this._stage === SLEEP) {\r\n                return\r\n            }\r\n            this._requestAccept(e);\r\n            this._move(e);\r\n            this._forgetAccept()\r\n        } else {\r\n            if (this._stage === STARTED) {\r\n                this._clearSelection(e);\r\n                this._move(e)\r\n            }\r\n        }\r\n    },\r\n    _directionConfirmed: function(e) {\r\n        var touchBoundary = this._getTouchBoundary(e);\r\n        var delta = eventUtils.eventDelta(this._startEventData, eventUtils.eventData(e));\r\n        var deltaX = abs(delta.x);\r\n        var deltaY = abs(delta.y);\r\n        var horizontalMove = this._validateMove(touchBoundary, deltaX, deltaY);\r\n        var verticalMove = this._validateMove(touchBoundary, deltaY, deltaX);\r\n        var direction = this.getDirection(e);\r\n        var bothAccepted = \"both\" === direction && (horizontalMove || verticalMove);\r\n        var horizontalAccepted = \"horizontal\" === direction && horizontalMove;\r\n        var verticalAccepted = \"vertical\" === direction && verticalMove;\r\n        return bothAccepted || horizontalAccepted || verticalAccepted || this._immediateAccepted\r\n    },\r\n    _validateMove: function(touchBoundary, mainAxis, crossAxis) {\r\n        return mainAxis && mainAxis >= touchBoundary && (this.immediate ? mainAxis >= crossAxis : true)\r\n    },\r\n    _getTouchBoundary: function(e) {\r\n        return this.immediate || eventUtils.isDxMouseWheelEvent(e) ? IMMEDIATE_TOUCH_BOUNDARY : TOUCH_BOUNDARY\r\n    },\r\n    _adjustStartEvent: function(e) {\r\n        var touchBoundary = this._getTouchBoundary(e);\r\n        var delta = eventUtils.eventDelta(this._startEventData, eventUtils.eventData(e));\r\n        this._startEvent.pageX += sign(delta.x) * touchBoundary;\r\n        this._startEvent.pageY += sign(delta.y) * touchBoundary\r\n    },\r\n    _resetActiveElement: function() {\r\n        if (\"ios\" === devices.real().platform && this.getElement().find(\":focus\").length) {\r\n            domUtils.resetActiveElement()\r\n        }\r\n    },\r\n    _toggleGestureCover: function(toggle) {\r\n        this._toggleGestureCoverImpl(toggle)\r\n    },\r\n    _toggleGestureCoverImpl: function(toggle) {\r\n        var isStarted = this._stage === STARTED;\r\n        if (isStarted) {\r\n            gestureCover(toggle, this.getElement().css(\"cursor\"))\r\n        }\r\n    },\r\n    _clearSelection: function(e) {\r\n        if (eventUtils.isDxMouseWheelEvent(e) || eventUtils.isTouchEvent(e)) {\r\n            return\r\n        }\r\n        domUtils.clearSelection()\r\n    },\r\n    end: function(e) {\r\n        this._toggleGestureCover(false);\r\n        if (this._stage === STARTED) {\r\n            this._end(e)\r\n        } else {\r\n            if (this._stage === INITED) {\r\n                this._stop(e)\r\n            }\r\n        }\r\n        this._stage = SLEEP\r\n    },\r\n    dispose: function() {\r\n        clearTimeout(this._immediateTimer);\r\n        this.callBase.apply(this, arguments);\r\n        this._toggleGestureCover(false)\r\n    },\r\n    _init: noop,\r\n    _start: noop,\r\n    _move: noop,\r\n    _stop: noop,\r\n    _end: noop\r\n});\r\nGestureEmitter.initialTouchBoundary = TOUCH_BOUNDARY;\r\nGestureEmitter.touchBoundary = function(newBoundary) {\r\n    if (isDefined(newBoundary)) {\r\n        TOUCH_BOUNDARY = newBoundary;\r\n        return\r\n    }\r\n    return TOUCH_BOUNDARY\r\n};\r\nmodule.exports = GestureEmitter;\r\n"]},"metadata":{},"sourceType":"module"}