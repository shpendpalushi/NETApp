{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.navigator.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar isNumeric = require(\"../../core/utils/type\").isNumeric;\n\nvar errors = require(\"../widget/ui.errors\");\n\nvar dateUtils = require(\"../../core/utils/date\");\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar devices = require(\"../../core/devices\");\n\nvar Widget = require(\"../widget/ui.widget\");\n\nvar Button = require(\"../button\");\n\nvar Calendar = require(\"../calendar\");\n\nvar Popover = require(\"../popover\");\n\nvar Popup = require(\"../popup\");\n\nvar publisherMixin = require(\"./ui.scheduler.publisher_mixin\");\n\nvar dateLocalization = require(\"../../localization/date\");\n\nvar isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar ELEMENT_CLASS = \"dx-scheduler-navigator\";\nvar CALENDAR_CLASS = \"dx-scheduler-navigator-calendar\";\nvar NEXT_BUTTON_CLASS = \"dx-scheduler-navigator-next\";\nvar CAPTION_BUTTON_CLASS = \"dx-scheduler-navigator-caption\";\nvar PREVIOUS_BUTTON_CLASS = \"dx-scheduler-navigator-previous\";\nvar CALENDAR_POPOVER_CLASS = \"dx-scheduler-navigator-calendar-popover\";\nvar MONDAY_INDEX = 1;\n\nvar getDefaultFirstDayOfWeekIndex = function getDefaultFirstDayOfWeekIndex(shift) {\n  return shift ? MONDAY_INDEX : dateLocalization.firstDayOfWeekIndex();\n};\n\nvar getDateMonthFormat = function getDateMonthFormat(short) {\n  return function (date) {\n    var monthName = dateLocalization.getMonthNames(short ? \"abbreviated\" : \"wide\")[date.getMonth()];\n    return [dateLocalization.format(date, \"day\"), monthName].join(\" \");\n  };\n};\n\nvar getMonthYearFormat = function getMonthYearFormat(date) {\n  return dateLocalization.getMonthNames(\"abbreviated\")[date.getMonth()] + \" \" + dateLocalization.format(date, \"year\");\n};\n\nvar getCaptionFormat = function getCaptionFormat(short, intervalCount, duration) {\n  var dateMonthFormat = getDateMonthFormat(short);\n  return function (date) {\n    if (intervalCount > 1) {\n      var lastIntervalDate = new Date(date);\n      var defaultViewDuration = duration;\n      lastIntervalDate.setDate(date.getDate() + defaultViewDuration - 1);\n      var isDifferentMonthDates = date.getMonth() !== lastIntervalDate.getMonth();\n      var useShortFormat = isDifferentMonthDates || short;\n      var firstWeekDateText = dateLocalization.format(date, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\n      var lastWeekDateText = dateLocalization.format(lastIntervalDate, getCaptionFormat(useShortFormat));\n      return firstWeekDateText + \"-\" + lastWeekDateText;\n    }\n\n    return [dateMonthFormat(date), dateLocalization.format(date, \"year\")].join(\" \");\n  };\n};\n\nvar getWeekCaption = function getWeekCaption(date, shift, rejectWeekend) {\n  var firstDayOfWeek = this.option(\"firstDayOfWeek\");\n  var firstDayOfWeekIndex = isDefined(firstDayOfWeek) ? firstDayOfWeek : getDefaultFirstDayOfWeekIndex(shift);\n\n  if (0 === firstDayOfWeekIndex && rejectWeekend) {\n    firstDayOfWeekIndex = MONDAY_INDEX;\n  }\n\n  var firstWeekDate = dateUtils.getFirstWeekDate(date, firstDayOfWeekIndex);\n  var weekendDuration = 2;\n\n  if (rejectWeekend) {\n    firstWeekDate = dateUtils.normalizeDateByWeek(firstWeekDate, date);\n  }\n\n  if (firstDayOfWeek >= 6 && rejectWeekend) {\n    firstWeekDate.setDate(firstWeekDate.getDate() + (7 - firstDayOfWeek + 1));\n  }\n\n  var lastWeekDate = new Date(firstWeekDate);\n  var intervalCount = this.option(\"intervalCount\");\n  shift = shift || 6;\n  lastWeekDate = new Date(lastWeekDate.setDate(lastWeekDate.getDate() + (intervalCount > 1 ? 7 * (intervalCount - 1) + shift : shift)));\n\n  if (lastWeekDate.getDay() % 6 === 0 && rejectWeekend) {\n    lastWeekDate.setDate(lastWeekDate.getDate() + weekendDuration);\n  }\n\n  return {\n    text: formatCaptionByMonths.call(this, lastWeekDate, firstWeekDate),\n    startDate: firstWeekDate,\n    endDate: lastWeekDate\n  };\n};\n\nvar formatCaptionByMonths = function formatCaptionByMonths(lastDate, firstDate) {\n  var isDifferentMonthDates = firstDate.getMonth() !== lastDate.getMonth();\n  var isDifferentYears = firstDate.getFullYear() !== lastDate.getFullYear();\n  var useShortFormat = isDifferentMonthDates || this.option(\"_useShortDateFormat\");\n  var lastDateText;\n  var firstDateText;\n\n  if (isDifferentYears) {\n    firstDateText = dateLocalization.format(firstDate, getCaptionFormat(true));\n    lastDateText = dateLocalization.format(lastDate, getCaptionFormat(true));\n  } else {\n    firstDateText = dateLocalization.format(firstDate, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\n    lastDateText = dateLocalization.format(lastDate, getCaptionFormat(useShortFormat));\n  }\n\n  return firstDateText + \"-\" + lastDateText;\n};\n\nvar getMonthCaption = function getMonthCaption(date) {\n  var firstDate = new Date(dateUtils.getFirstMonthDate(date));\n  var lastDate = new Date(dateUtils.getLastMonthDate(firstDate));\n  var text;\n\n  if (this.option(\"intervalCount\") > 1) {\n    lastDate = new Date(firstDate);\n    lastDate.setMonth(firstDate.getMonth() + this.option(\"intervalCount\") - 1);\n    lastDate = new Date(dateUtils.getLastMonthDate(lastDate));\n    var isSameYear = firstDate.getYear() === lastDate.getYear();\n    var lastDateText = getMonthYearFormat(lastDate);\n    var firstDateText = isSameYear ? dateLocalization.getMonthNames(\"abbreviated\")[firstDate.getMonth()] : getMonthYearFormat(firstDate);\n    text = firstDateText + \"-\" + lastDateText;\n  } else {\n    text = dateLocalization.format(date, \"monthandyear\");\n  }\n\n  return {\n    text: text,\n    startDate: firstDate,\n    endDate: lastDate\n  };\n};\n\nvar dateGetter = function dateGetter(date, offset) {\n  return new Date(date[this.setter](date[this.getter]() + offset));\n};\n\nvar getConfig = function getConfig(step) {\n  var agendaDuration;\n\n  switch (step) {\n    case \"day\":\n      return {\n        duration: 1 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function getCaption(date) {\n          var format = getCaptionFormat(false, this.option(\"intervalCount\"), this._getConfig().duration);\n          return {\n            text: dateLocalization.format(date, format),\n            startDate: date,\n            endDate: date\n          };\n        }\n      };\n\n    case \"week\":\n      return {\n        duration: 7 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: getWeekCaption\n      };\n\n    case \"workWeek\":\n      return {\n        duration: 7 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function getCaption(date) {\n          return getWeekCaption.call(this, date, 4, true);\n        }\n      };\n\n    case \"month\":\n      return {\n        duration: 1 * this.option(\"intervalCount\"),\n        setter: \"setMonth\",\n        getter: \"getMonth\",\n        getDate: function getDate(date, offset) {\n          var currentDate = date.getDate();\n          date.setDate(1);\n          date = dateGetter.call(this, date, offset);\n          var lastDate = dateUtils.getLastMonthDay(date);\n          date.setDate(currentDate < lastDate ? currentDate : lastDate);\n          return date;\n        },\n        getCaption: getMonthCaption\n      };\n\n    case \"agenda\":\n      agendaDuration = this.invoke(\"getAgendaDuration\");\n      agendaDuration = isNumeric(agendaDuration) && agendaDuration > 0 ? agendaDuration : 7;\n      return {\n        duration: agendaDuration,\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function getCaption(date) {\n          var format = getCaptionFormat(this.option(\"_useShortDateFormat\"));\n          var firstDate = new Date(date);\n          var lastDate = new Date(date);\n          var text;\n\n          if (agendaDuration > 1) {\n            lastDate.setDate(lastDate.getDate() + agendaDuration - 1);\n            text = formatCaptionByMonths.call(this, lastDate, date);\n          } else {\n            text = dateLocalization.format(date, format);\n          }\n\n          return {\n            text: text,\n            startDate: firstDate,\n            endDate: lastDate\n          };\n        }\n      };\n  }\n};\n\nvar SchedulerNavigator = Widget.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      date: new Date(),\n      displayedDate: void 0,\n      step: \"day\",\n      intervalCount: 1,\n      min: void 0,\n      max: void 0,\n      firstDayOfWeek: void 0,\n      _useShortDateFormat: false\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return !devices.real().generic || devices.isSimulator();\n      },\n      options: {\n        _useShortDateFormat: true\n      }\n    }]);\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"step\":\n      case \"date\":\n      case \"intervalCount\":\n      case \"displayedDate\":\n        this._updateButtonsState();\n\n        this._renderCaption();\n\n        this._setCalendarOption(\"value\", this.option(\"date\"));\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        this._updateButtonsState();\n\n        this._setCalendarOption(args.name, args.value);\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._setCalendarOption(args.name, args.value);\n\n        break;\n\n      case \"customizeDateNavigatorText\":\n        this._renderCaption();\n\n        break;\n\n      case \"tabIndex\":\n      case \"focusStateEnabled\":\n        this._next.option(args.name, args.value);\n\n        this._caption.option(args.name, args.value);\n\n        this._prev.option(args.name, args.value);\n\n        this._setCalendarOption(args.name, args.value);\n\n        this.callBase(args);\n        break;\n\n      case \"_useShortDateFormat\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _init: function _init() {\n    this.callBase();\n    this.$element().addClass(ELEMENT_CLASS);\n\n    this._initButtons();\n  },\n  _initButtons: function _initButtons() {\n    var $next = $(\"<div>\").addClass(NEXT_BUTTON_CLASS);\n    this._next = this._createComponent($next, Button, {\n      icon: \"chevronnext\",\n      onClick: this._updateCurrentDate.bind(this, 1),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    var $caption = $(\"<div>\").addClass(CAPTION_BUTTON_CLASS);\n    this._caption = this._createComponent($caption, Button, {\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    var $prev = $(\"<div>\").addClass(PREVIOUS_BUTTON_CLASS);\n    this._prev = this._createComponent($prev, Button, {\n      icon: \"chevronprev\",\n      onClick: this._updateCurrentDate.bind(this, -1),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    this.setAria(\"label\", \"Next period\", $next);\n    this.setAria(\"label\", \"Previous period\", $prev);\n\n    this._updateButtonsState();\n\n    this.$element().append($prev, $caption, $next);\n  },\n  _updateButtonsState: function _updateButtonsState() {\n    var min = this.option(\"min\");\n    var max = this.option(\"max\");\n\n    var caption = this._getConfig().getCaption.call(this, this.option(\"displayedDate\") || this.option(\"date\"));\n\n    min = min ? dateUtils.trimTime(min) : min;\n    max = max ? dateUtils.trimTime(max) : max;\n    max && max.setHours(23, 59, 59);\n\n    this._prev.option(\"disabled\", min && !isNaN(min.getTime()) && this._getNextDate(-1, caption.endDate) < min);\n\n    this._next.option(\"disabled\", max && !isNaN(max.getTime()) && this._getNextDate(1, caption.startDate) > max);\n  },\n  _updateCurrentDate: function _updateCurrentDate(direction) {\n    var date = this._getNextDate(direction);\n\n    dateUtils.normalizeDate(date, this.option(\"min\"), this.option(\"max\"));\n    this.notifyObserver(\"currentDateUpdated\", date);\n  },\n  _getNextDate: function _getNextDate(direction) {\n    var initialDate = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\n\n    var stepConfig = this._getConfig();\n\n    var offset = stepConfig.duration * direction;\n    var date = stepConfig.getDate(new Date(initialDate || this.option(\"date\")), offset);\n    return date;\n  },\n  _renderFocusTarget: noop,\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n\n    this._renderCaption();\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._renderPopover();\n\n    this._renderCaptionKeys();\n  },\n  _renderPopover: function _renderPopover() {\n    var overlayType = !devices.current().generic ? Popup : Popover;\n    var popoverContainer = $(\"<div>\").addClass(CALENDAR_POPOVER_CLASS);\n    this._popover = this._createComponent(popoverContainer, overlayType, {\n      onContentReady: this._popoverContentReadyHandler.bind(this),\n      defaultOptionsRules: [{\n        device: function device() {\n          return !devices.current().generic;\n        },\n        options: {\n          fullScreen: true,\n          showCloseButton: false,\n          toolbarItems: [{\n            shortcut: \"cancel\"\n          }]\n        }\n      }, {\n        device: function device() {\n          return devices.current().generic;\n        },\n        options: {\n          target: this._caption.$element()\n        }\n      }]\n    });\n\n    this._popover.$element().appendTo(this.$element());\n  },\n  _popoverContentReadyHandler: function _popoverContentReadyHandler() {\n    this._calendar = this._createComponent($(\"<div>\"), Calendar, this._calendarOptions());\n\n    this._calendar.$element().addClass(CALENDAR_CLASS);\n\n    this._popover.$content().append(this._calendar.$element());\n  },\n  _calendarOptions: function _calendarOptions() {\n    return {\n      min: this.option(\"min\"),\n      max: this.option(\"max\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      value: this.option(\"date\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      onValueChanged: function (e) {\n        if (!this.option(\"visible\")) {\n          return;\n        }\n\n        this.notifyObserver(\"currentDateUpdated\", e.value);\n\n        this._popover.hide();\n      }.bind(this),\n      hasFocus: function hasFocus() {\n        return true;\n      },\n      tabIndex: null,\n      _keyboardProcessor: this._calendarKeyboardProcessor\n    };\n  },\n  _renderCaption: function _renderCaption() {\n    var date = this.option(\"displayedDate\") || this.option(\"date\");\n\n    var captionConfig = this._getConfig().getCaption.call(this, date);\n\n    var customizationFunction = this.option(\"customizeDateNavigatorText\");\n    var caption = typeUtils.isFunction(customizationFunction) ? customizationFunction(captionConfig) : captionConfig.text;\n\n    this._caption.option({\n      text: caption,\n      onClick: function () {\n        this._popover.toggle();\n      }.bind(this)\n    });\n  },\n  _renderCaptionKeys: function _renderCaptionKeys() {\n    if (!this.option(\"focusStateEnabled\") || this.option(\"disabled\")) {\n      return;\n    }\n\n    this._calendarKeyboardProcessor = this._caption._keyboardProcessor.attachChildProcessor();\n\n    this._setCalendarOption(\"_keyboardProcessor\", this._calendarKeyboardProcessor);\n\n    var that = this;\n\n    var executeHandler = function executeHandler() {\n      if (that._popover.$content().is(\":hidden\")) {\n        that._popover.show();\n      } else {\n        return true;\n      }\n    };\n\n    var tabHandler = function tabHandler() {\n      that._popover.hide();\n    };\n\n    this._caption.registerKeyHandler(\"enter\", executeHandler);\n\n    this._caption.registerKeyHandler(\"space\", executeHandler);\n\n    this._caption.registerKeyHandler(\"tab\", tabHandler);\n  },\n  _setCalendarOption: function _setCalendarOption(name, value) {\n    if (this._calendar) {\n      this._calendar.option(name, value);\n    }\n  },\n  _getConfig: function _getConfig() {\n    var step = this.option(\"step\");\n    var config = getConfig.call(this, step);\n\n    if (!config) {\n      throw errors.Error(\"E1033\", step);\n    }\n\n    return config;\n  }\n}).include(publisherMixin);\nregisterComponent(\"dxSchedulerNavigator\", SchedulerNavigator);\nmodule.exports = SchedulerNavigator;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/scheduler/ui.scheduler.navigator.js"],"names":["$","require","noop","isNumeric","errors","dateUtils","typeUtils","extend","registerComponent","devices","Widget","Button","Calendar","Popover","Popup","publisherMixin","dateLocalization","isDefined","ELEMENT_CLASS","CALENDAR_CLASS","NEXT_BUTTON_CLASS","CAPTION_BUTTON_CLASS","PREVIOUS_BUTTON_CLASS","CALENDAR_POPOVER_CLASS","MONDAY_INDEX","getDefaultFirstDayOfWeekIndex","shift","getDateMonthFormat","monthName","short","date","getMonthYearFormat","getCaptionFormat","dateMonthFormat","intervalCount","lastIntervalDate","defaultViewDuration","isDifferentMonthDates","useShortFormat","firstWeekDateText","lastWeekDateText","getWeekCaption","firstDayOfWeek","firstDayOfWeekIndex","firstWeekDate","weekendDuration","lastWeekDate","text","formatCaptionByMonths","startDate","endDate","firstDate","lastDate","isDifferentYears","firstDateText","lastDateText","getMonthCaption","isSameYear","dateGetter","getConfig","duration","setter","getter","getDate","getCaption","format","currentDate","agendaDuration","SchedulerNavigator","_getDefaultOptions","displayedDate","step","min","max","_useShortDateFormat","_defaultOptionsRules","device","options","_optionChanged","args","_init","_initButtons","$next","icon","onClick","focusStateEnabled","tabIndex","integrationOptions","$caption","$prev","_updateButtonsState","caption","isNaN","_updateCurrentDate","_getNextDate","initialDate","arguments","stepConfig","offset","_renderFocusTarget","_initMarkup","_render","_renderPopover","overlayType","popoverContainer","onContentReady","defaultOptionsRules","fullScreen","showCloseButton","toolbarItems","shortcut","target","_popoverContentReadyHandler","_calendarOptions","value","onValueChanged","e","hasFocus","_keyboardProcessor","_calendarKeyboardProcessor","_renderCaption","captionConfig","customizationFunction","_renderCaptionKeys","that","executeHandler","tabHandler","_setCalendarOption","_getConfig","config","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.navigator.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar isNumeric = require(\"../../core/utils/type\").isNumeric;\r\nvar errors = require(\"../widget/ui.errors\");\r\nvar dateUtils = require(\"../../core/utils/date\");\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar devices = require(\"../../core/devices\");\r\nvar Widget = require(\"../widget/ui.widget\");\r\nvar Button = require(\"../button\");\r\nvar Calendar = require(\"../calendar\");\r\nvar Popover = require(\"../popover\");\r\nvar Popup = require(\"../popup\");\r\nvar publisherMixin = require(\"./ui.scheduler.publisher_mixin\");\r\nvar dateLocalization = require(\"../../localization/date\");\r\nvar isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar ELEMENT_CLASS = \"dx-scheduler-navigator\";\r\nvar CALENDAR_CLASS = \"dx-scheduler-navigator-calendar\";\r\nvar NEXT_BUTTON_CLASS = \"dx-scheduler-navigator-next\";\r\nvar CAPTION_BUTTON_CLASS = \"dx-scheduler-navigator-caption\";\r\nvar PREVIOUS_BUTTON_CLASS = \"dx-scheduler-navigator-previous\";\r\nvar CALENDAR_POPOVER_CLASS = \"dx-scheduler-navigator-calendar-popover\";\r\nvar MONDAY_INDEX = 1;\r\nvar getDefaultFirstDayOfWeekIndex = function(shift) {\r\n    return shift ? MONDAY_INDEX : dateLocalization.firstDayOfWeekIndex()\r\n};\r\nvar getDateMonthFormat = function(short) {\r\n    return function(date) {\r\n        var monthName = dateLocalization.getMonthNames(short ? \"abbreviated\" : \"wide\")[date.getMonth()];\r\n        return [dateLocalization.format(date, \"day\"), monthName].join(\" \")\r\n    }\r\n};\r\nvar getMonthYearFormat = function(date) {\r\n    return dateLocalization.getMonthNames(\"abbreviated\")[date.getMonth()] + \" \" + dateLocalization.format(date, \"year\")\r\n};\r\nvar getCaptionFormat = function getCaptionFormat(short, intervalCount, duration) {\r\n    var dateMonthFormat = getDateMonthFormat(short);\r\n    return function(date) {\r\n        if (intervalCount > 1) {\r\n            var lastIntervalDate = new Date(date);\r\n            var defaultViewDuration = duration;\r\n            lastIntervalDate.setDate(date.getDate() + defaultViewDuration - 1);\r\n            var isDifferentMonthDates = date.getMonth() !== lastIntervalDate.getMonth();\r\n            var useShortFormat = isDifferentMonthDates || short;\r\n            var firstWeekDateText = dateLocalization.format(date, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\r\n            var lastWeekDateText = dateLocalization.format(lastIntervalDate, getCaptionFormat(useShortFormat));\r\n            return firstWeekDateText + \"-\" + lastWeekDateText\r\n        }\r\n        return [dateMonthFormat(date), dateLocalization.format(date, \"year\")].join(\" \")\r\n    }\r\n};\r\nvar getWeekCaption = function(date, shift, rejectWeekend) {\r\n    var firstDayOfWeek = this.option(\"firstDayOfWeek\");\r\n    var firstDayOfWeekIndex = isDefined(firstDayOfWeek) ? firstDayOfWeek : getDefaultFirstDayOfWeekIndex(shift);\r\n    if (0 === firstDayOfWeekIndex && rejectWeekend) {\r\n        firstDayOfWeekIndex = MONDAY_INDEX\r\n    }\r\n    var firstWeekDate = dateUtils.getFirstWeekDate(date, firstDayOfWeekIndex);\r\n    var weekendDuration = 2;\r\n    if (rejectWeekend) {\r\n        firstWeekDate = dateUtils.normalizeDateByWeek(firstWeekDate, date)\r\n    }\r\n    if (firstDayOfWeek >= 6 && rejectWeekend) {\r\n        firstWeekDate.setDate(firstWeekDate.getDate() + (7 - firstDayOfWeek + 1))\r\n    }\r\n    var lastWeekDate = new Date(firstWeekDate);\r\n    var intervalCount = this.option(\"intervalCount\");\r\n    shift = shift || 6;\r\n    lastWeekDate = new Date(lastWeekDate.setDate(lastWeekDate.getDate() + (intervalCount > 1 ? 7 * (intervalCount - 1) + shift : shift)));\r\n    if (lastWeekDate.getDay() % 6 === 0 && rejectWeekend) {\r\n        lastWeekDate.setDate(lastWeekDate.getDate() + weekendDuration)\r\n    }\r\n    return {\r\n        text: formatCaptionByMonths.call(this, lastWeekDate, firstWeekDate),\r\n        startDate: firstWeekDate,\r\n        endDate: lastWeekDate\r\n    }\r\n};\r\nvar formatCaptionByMonths = function(lastDate, firstDate) {\r\n    var isDifferentMonthDates = firstDate.getMonth() !== lastDate.getMonth();\r\n    var isDifferentYears = firstDate.getFullYear() !== lastDate.getFullYear();\r\n    var useShortFormat = isDifferentMonthDates || this.option(\"_useShortDateFormat\");\r\n    var lastDateText;\r\n    var firstDateText;\r\n    if (isDifferentYears) {\r\n        firstDateText = dateLocalization.format(firstDate, getCaptionFormat(true));\r\n        lastDateText = dateLocalization.format(lastDate, getCaptionFormat(true))\r\n    } else {\r\n        firstDateText = dateLocalization.format(firstDate, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\r\n        lastDateText = dateLocalization.format(lastDate, getCaptionFormat(useShortFormat))\r\n    }\r\n    return firstDateText + \"-\" + lastDateText\r\n};\r\nvar getMonthCaption = function(date) {\r\n    var firstDate = new Date(dateUtils.getFirstMonthDate(date));\r\n    var lastDate = new Date(dateUtils.getLastMonthDate(firstDate));\r\n    var text;\r\n    if (this.option(\"intervalCount\") > 1) {\r\n        lastDate = new Date(firstDate);\r\n        lastDate.setMonth(firstDate.getMonth() + this.option(\"intervalCount\") - 1);\r\n        lastDate = new Date(dateUtils.getLastMonthDate(lastDate));\r\n        var isSameYear = firstDate.getYear() === lastDate.getYear();\r\n        var lastDateText = getMonthYearFormat(lastDate);\r\n        var firstDateText = isSameYear ? dateLocalization.getMonthNames(\"abbreviated\")[firstDate.getMonth()] : getMonthYearFormat(firstDate);\r\n        text = firstDateText + \"-\" + lastDateText\r\n    } else {\r\n        text = dateLocalization.format(date, \"monthandyear\")\r\n    }\r\n    return {\r\n        text: text,\r\n        startDate: firstDate,\r\n        endDate: lastDate\r\n    }\r\n};\r\nvar dateGetter = function(date, offset) {\r\n    return new Date(date[this.setter](date[this.getter]() + offset))\r\n};\r\nvar getConfig = function(step) {\r\n    var agendaDuration;\r\n    switch (step) {\r\n        case \"day\":\r\n            return {\r\n                duration: 1 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    var format = getCaptionFormat(false, this.option(\"intervalCount\"), this._getConfig().duration);\r\n                    return {\r\n                        text: dateLocalization.format(date, format),\r\n                        startDate: date,\r\n                        endDate: date\r\n                    }\r\n                }\r\n            };\r\n        case \"week\":\r\n            return {\r\n                duration: 7 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: getWeekCaption\r\n            };\r\n        case \"workWeek\":\r\n            return {\r\n                duration: 7 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    return getWeekCaption.call(this, date, 4, true)\r\n                }\r\n            };\r\n        case \"month\":\r\n            return {\r\n                duration: 1 * this.option(\"intervalCount\"), setter: \"setMonth\", getter: \"getMonth\", getDate: function(date, offset) {\r\n                    var currentDate = date.getDate();\r\n                    date.setDate(1);\r\n                    date = dateGetter.call(this, date, offset);\r\n                    var lastDate = dateUtils.getLastMonthDay(date);\r\n                    date.setDate(currentDate < lastDate ? currentDate : lastDate);\r\n                    return date\r\n                }, getCaption: getMonthCaption\r\n            };\r\n        case \"agenda\":\r\n            agendaDuration = this.invoke(\"getAgendaDuration\");\r\n            agendaDuration = isNumeric(agendaDuration) && agendaDuration > 0 ? agendaDuration : 7;\r\n            return {\r\n                duration: agendaDuration, setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    var format = getCaptionFormat(this.option(\"_useShortDateFormat\"));\r\n                    var firstDate = new Date(date);\r\n                    var lastDate = new Date(date);\r\n                    var text;\r\n                    if (agendaDuration > 1) {\r\n                        lastDate.setDate(lastDate.getDate() + agendaDuration - 1);\r\n                        text = formatCaptionByMonths.call(this, lastDate, date)\r\n                    } else {\r\n                        text = dateLocalization.format(date, format)\r\n                    }\r\n                    return {\r\n                        text: text,\r\n                        startDate: firstDate,\r\n                        endDate: lastDate\r\n                    }\r\n                }\r\n            }\r\n    }\r\n};\r\nvar SchedulerNavigator = Widget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            date: new Date,\r\n            displayedDate: void 0,\r\n            step: \"day\",\r\n            intervalCount: 1,\r\n            min: void 0,\r\n            max: void 0,\r\n            firstDayOfWeek: void 0,\r\n            _useShortDateFormat: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !devices.real().generic || devices.isSimulator()\r\n            },\r\n            options: {\r\n                _useShortDateFormat: true\r\n            }\r\n        }])\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"step\":\r\n            case \"date\":\r\n            case \"intervalCount\":\r\n            case \"displayedDate\":\r\n                this._updateButtonsState();\r\n                this._renderCaption();\r\n                this._setCalendarOption(\"value\", this.option(\"date\"));\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                this._updateButtonsState();\r\n                this._setCalendarOption(args.name, args.value);\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._setCalendarOption(args.name, args.value);\r\n                break;\r\n            case \"customizeDateNavigatorText\":\r\n                this._renderCaption();\r\n                break;\r\n            case \"tabIndex\":\r\n            case \"focusStateEnabled\":\r\n                this._next.option(args.name, args.value);\r\n                this._caption.option(args.name, args.value);\r\n                this._prev.option(args.name, args.value);\r\n                this._setCalendarOption(args.name, args.value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"_useShortDateFormat\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.$element().addClass(ELEMENT_CLASS);\r\n        this._initButtons()\r\n    },\r\n    _initButtons: function() {\r\n        var $next = $(\"<div>\").addClass(NEXT_BUTTON_CLASS);\r\n        this._next = this._createComponent($next, Button, {\r\n            icon: \"chevronnext\",\r\n            onClick: this._updateCurrentDate.bind(this, 1),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        var $caption = $(\"<div>\").addClass(CAPTION_BUTTON_CLASS);\r\n        this._caption = this._createComponent($caption, Button, {\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        var $prev = $(\"<div>\").addClass(PREVIOUS_BUTTON_CLASS);\r\n        this._prev = this._createComponent($prev, Button, {\r\n            icon: \"chevronprev\",\r\n            onClick: this._updateCurrentDate.bind(this, -1),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        this.setAria(\"label\", \"Next period\", $next);\r\n        this.setAria(\"label\", \"Previous period\", $prev);\r\n        this._updateButtonsState();\r\n        this.$element().append($prev, $caption, $next)\r\n    },\r\n    _updateButtonsState: function() {\r\n        var min = this.option(\"min\");\r\n        var max = this.option(\"max\");\r\n        var caption = this._getConfig().getCaption.call(this, this.option(\"displayedDate\") || this.option(\"date\"));\r\n        min = min ? dateUtils.trimTime(min) : min;\r\n        max = max ? dateUtils.trimTime(max) : max;\r\n        max && max.setHours(23, 59, 59);\r\n        this._prev.option(\"disabled\", min && !isNaN(min.getTime()) && this._getNextDate(-1, caption.endDate) < min);\r\n        this._next.option(\"disabled\", max && !isNaN(max.getTime()) && this._getNextDate(1, caption.startDate) > max)\r\n    },\r\n    _updateCurrentDate: function(direction) {\r\n        var date = this._getNextDate(direction);\r\n        dateUtils.normalizeDate(date, this.option(\"min\"), this.option(\"max\"));\r\n        this.notifyObserver(\"currentDateUpdated\", date)\r\n    },\r\n    _getNextDate: function(direction) {\r\n        var initialDate = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\r\n        var stepConfig = this._getConfig();\r\n        var offset = stepConfig.duration * direction;\r\n        var date = stepConfig.getDate(new Date(initialDate || this.option(\"date\")), offset);\r\n        return date\r\n    },\r\n    _renderFocusTarget: noop,\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._renderCaption()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderPopover();\r\n        this._renderCaptionKeys()\r\n    },\r\n    _renderPopover: function() {\r\n        var overlayType = !devices.current().generic ? Popup : Popover;\r\n        var popoverContainer = $(\"<div>\").addClass(CALENDAR_POPOVER_CLASS);\r\n        this._popover = this._createComponent(popoverContainer, overlayType, {\r\n            onContentReady: this._popoverContentReadyHandler.bind(this),\r\n            defaultOptionsRules: [{\r\n                device: function() {\r\n                    return !devices.current().generic\r\n                },\r\n                options: {\r\n                    fullScreen: true,\r\n                    showCloseButton: false,\r\n                    toolbarItems: [{\r\n                        shortcut: \"cancel\"\r\n                    }]\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return devices.current().generic\r\n                },\r\n                options: {\r\n                    target: this._caption.$element()\r\n                }\r\n            }]\r\n        });\r\n        this._popover.$element().appendTo(this.$element())\r\n    },\r\n    _popoverContentReadyHandler: function() {\r\n        this._calendar = this._createComponent($(\"<div>\"), Calendar, this._calendarOptions());\r\n        this._calendar.$element().addClass(CALENDAR_CLASS);\r\n        this._popover.$content().append(this._calendar.$element())\r\n    },\r\n    _calendarOptions: function() {\r\n        return {\r\n            min: this.option(\"min\"),\r\n            max: this.option(\"max\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            value: this.option(\"date\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            onValueChanged: function(e) {\r\n                if (!this.option(\"visible\")) {\r\n                    return\r\n                }\r\n                this.notifyObserver(\"currentDateUpdated\", e.value);\r\n                this._popover.hide()\r\n            }.bind(this),\r\n            hasFocus: function() {\r\n                return true\r\n            },\r\n            tabIndex: null,\r\n            _keyboardProcessor: this._calendarKeyboardProcessor\r\n        }\r\n    },\r\n    _renderCaption: function() {\r\n        var date = this.option(\"displayedDate\") || this.option(\"date\");\r\n        var captionConfig = this._getConfig().getCaption.call(this, date);\r\n        var customizationFunction = this.option(\"customizeDateNavigatorText\");\r\n        var caption = typeUtils.isFunction(customizationFunction) ? customizationFunction(captionConfig) : captionConfig.text;\r\n        this._caption.option({\r\n            text: caption,\r\n            onClick: function() {\r\n                this._popover.toggle()\r\n            }.bind(this)\r\n        })\r\n    },\r\n    _renderCaptionKeys: function() {\r\n        if (!this.option(\"focusStateEnabled\") || this.option(\"disabled\")) {\r\n            return\r\n        }\r\n        this._calendarKeyboardProcessor = this._caption._keyboardProcessor.attachChildProcessor();\r\n        this._setCalendarOption(\"_keyboardProcessor\", this._calendarKeyboardProcessor);\r\n        var that = this;\r\n        var executeHandler = function() {\r\n            if (that._popover.$content().is(\":hidden\")) {\r\n                that._popover.show()\r\n            } else {\r\n                return true\r\n            }\r\n        };\r\n        var tabHandler = function() {\r\n            that._popover.hide()\r\n        };\r\n        this._caption.registerKeyHandler(\"enter\", executeHandler);\r\n        this._caption.registerKeyHandler(\"space\", executeHandler);\r\n        this._caption.registerKeyHandler(\"tab\", tabHandler)\r\n    },\r\n    _setCalendarOption: function(name, value) {\r\n        if (this._calendar) {\r\n            this._calendar.option(name, value)\r\n        }\r\n    },\r\n    _getConfig: function() {\r\n        var step = this.option(\"step\");\r\n        var config = getConfig.call(this, step);\r\n        if (!config) {\r\n            throw errors.Error(\"E1033\", step)\r\n        }\r\n        return config\r\n    }\r\n}).include(publisherMixin);\r\nregisterComponent(\"dxSchedulerNavigator\", SchedulerNavigator);\r\nmodule.exports = SchedulerNavigator;\r\n"]},"metadata":{},"sourceType":"module"}