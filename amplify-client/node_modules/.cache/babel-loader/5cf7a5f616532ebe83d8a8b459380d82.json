{"ast":null,"code":"/**\r\n * DevExtreme (viz/series/points/range_symbol_point.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar each = require(\"../../../core/utils/iterator\").each;\n\nvar extend = require(\"../../../core/utils/extend\").extend;\n\nvar noop = require(\"../../../core/utils/common\").noop;\n\nvar labelModule = require(\"./label\");\n\nvar symbolPoint = require(\"./symbol_point\");\n\nvar _extend = extend;\n\nvar _isDefined = require(\"../../../core/utils/type\").isDefined;\n\nvar _math = Math;\nvar _abs = _math.abs;\nvar _min = _math.min;\nvar _max = _math.max;\nvar _round = _math.round;\nvar DEFAULT_IMAGE_WIDTH = 20;\nvar DEFAULT_IMAGE_HEIGHT = 20;\nmodule.exports = _extend({}, symbolPoint, {\n  deleteLabel: function deleteLabel() {\n    var that = this;\n\n    that._topLabel.dispose();\n\n    that._topLabel = null;\n\n    that._bottomLabel.dispose();\n\n    that._bottomLabel = null;\n  },\n  hideMarker: function hideMarker(type) {\n    var graphic = this.graphic;\n    var marker = graphic && graphic[type + \"Marker\"];\n    var label = this[\"_\" + type + \"Label\"];\n\n    if (marker && \"hidden\" !== marker.attr(\"visibility\")) {\n      marker.attr({\n        visibility: \"hidden\"\n      });\n    }\n\n    label.draw(false);\n  },\n  setInvisibility: function setInvisibility() {\n    this.hideMarker(\"top\");\n    this.hideMarker(\"bottom\");\n  },\n  clearVisibility: function clearVisibility() {\n    var that = this;\n    var graphic = that.graphic;\n    var topMarker = graphic && graphic.topMarker;\n    var bottomMarker = graphic && graphic.bottomMarker;\n\n    if (topMarker && topMarker.attr(\"visibility\")) {\n      topMarker.attr({\n        visibility: null\n      });\n    }\n\n    if (bottomMarker && bottomMarker.attr(\"visibility\")) {\n      bottomMarker.attr({\n        visibility: null\n      });\n    }\n  },\n  clearMarker: function clearMarker() {\n    var that = this;\n    var graphic = that.graphic;\n    var topMarker = graphic && graphic.topMarker;\n    var bottomMarker = graphic && graphic.bottomMarker;\n    var emptySettings = that._emptySettings;\n    topMarker && topMarker.attr(emptySettings);\n    bottomMarker && bottomMarker.attr(emptySettings);\n  },\n  _getLabelPosition: function _getLabelPosition(markerType) {\n    var position;\n    var labelsInside = \"inside\" === this._options.label.position;\n\n    if (!this._options.rotated) {\n      position = \"top\" === markerType ^ labelsInside ? \"top\" : \"bottom\";\n    } else {\n      position = \"top\" === markerType ^ labelsInside ? \"right\" : \"left\";\n    }\n\n    return position;\n  },\n  _getLabelMinFormatObject: function _getLabelMinFormatObject() {\n    var that = this;\n    return {\n      index: 0,\n      argument: that.initialArgument,\n      value: that.initialMinValue,\n      seriesName: that.series.name,\n      originalValue: that.originalMinValue,\n      originalArgument: that.originalArgument,\n      point: that\n    };\n  },\n  _updateLabelData: function _updateLabelData() {\n    var maxFormatObject = this._getLabelFormatObject();\n\n    maxFormatObject.index = 1;\n\n    this._topLabel.setData(maxFormatObject);\n\n    this._bottomLabel.setData(this._getLabelMinFormatObject());\n  },\n  _updateLabelOptions: function _updateLabelOptions() {\n    var that = this;\n    var options = this._options.label;\n    (!that._topLabel || !that._bottomLabel) && that._createLabel();\n\n    that._topLabel.setOptions(options);\n\n    that._bottomLabel.setOptions(options);\n  },\n  _createLabel: function _createLabel() {\n    var options = {\n      renderer: this.series._renderer,\n      labelsGroup: this.series._labelsGroup,\n      point: this\n    };\n    this._topLabel = new labelModule.Label(options);\n    this._bottomLabel = new labelModule.Label(options);\n  },\n  _getGraphicBBox: function _getGraphicBBox(location) {\n    var options = this._options;\n\n    var images = this._getImage(options.image);\n\n    var image = \"top\" === location ? this._checkImage(images.top) : this._checkImage(images.bottom);\n    var bBox;\n\n    var coord = this._getPositionFromLocation(location);\n\n    if (options.visible) {\n      bBox = image ? this._getImageBBox(coord.x, coord.y) : this._getSymbolBBox(coord.x, coord.y, options.styles.normal.r);\n    } else {\n      bBox = {\n        x: coord.x,\n        y: coord.y,\n        width: 0,\n        height: 0\n      };\n    }\n\n    return bBox;\n  },\n  _getPositionFromLocation: function _getPositionFromLocation(location) {\n    var x;\n    var y;\n    var isTop = \"top\" === location;\n\n    if (!this._options.rotated) {\n      x = this.x;\n      y = isTop ? _min(this.y, this.minY) : _max(this.y, this.minY);\n    } else {\n      x = isTop ? _max(this.x, this.minX) : _min(this.x, this.minX);\n      y = this.y;\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  },\n  _checkOverlay: function _checkOverlay(bottomCoord, topCoord, topValue) {\n    return bottomCoord < topCoord + topValue;\n  },\n  _getOverlayCorrections: function _getOverlayCorrections(topCoords, bottomCoords) {\n    var rotated = this._options.rotated;\n    var coordSelector = !rotated ? \"y\" : \"x\";\n    var valueSelector = !rotated ? \"height\" : \"width\";\n    var visibleArea = this.series.getValueAxis().getVisibleArea();\n    var minBound = visibleArea[0];\n    var maxBound = visibleArea[1];\n\n    var delta = _round((topCoords[coordSelector] + topCoords[valueSelector] - bottomCoords[coordSelector]) / 2);\n\n    var coord1 = topCoords[coordSelector] - delta;\n    var coord2 = bottomCoords[coordSelector] + delta;\n\n    if (coord1 < minBound) {\n      delta = minBound - topCoords[coordSelector];\n      coord1 += delta;\n      coord2 += delta;\n    } else {\n      if (coord2 + bottomCoords[valueSelector] > maxBound) {\n        delta = -(bottomCoords[coordSelector] + bottomCoords[valueSelector] - maxBound);\n        coord1 += delta;\n        coord2 += delta;\n      }\n    }\n\n    return {\n      coord1: coord1,\n      coord2: coord2\n    };\n  },\n  _checkLabelsOverlay: function _checkLabelsOverlay(topLocation) {\n    var that = this;\n\n    var topCoords = that._topLabel.getBoundingRect();\n\n    var bottomCoords = that._bottomLabel.getBoundingRect();\n\n    var corrections = {};\n\n    if (!that._options.rotated) {\n      if (\"top\" === topLocation) {\n        if (this._checkOverlay(bottomCoords.y, topCoords.y, topCoords.height)) {\n          corrections = this._getOverlayCorrections(topCoords, bottomCoords);\n\n          that._topLabel.shift(topCoords.x, corrections.coord1);\n\n          that._bottomLabel.shift(bottomCoords.x, corrections.coord2);\n        }\n      } else {\n        if (this._checkOverlay(topCoords.y, bottomCoords.y, bottomCoords.height)) {\n          corrections = this._getOverlayCorrections(bottomCoords, topCoords);\n\n          that._topLabel.shift(topCoords.x, corrections.coord2);\n\n          that._bottomLabel.shift(bottomCoords.x, corrections.coord1);\n        }\n      }\n    } else {\n      if (\"top\" === topLocation) {\n        if (this._checkOverlay(topCoords.x, bottomCoords.x, bottomCoords.width)) {\n          corrections = this._getOverlayCorrections(bottomCoords, topCoords);\n\n          that._topLabel.shift(corrections.coord2, topCoords.y);\n\n          that._bottomLabel.shift(corrections.coord1, bottomCoords.y);\n        }\n      } else {\n        if (this._checkOverlay(bottomCoords.x, topCoords.x, topCoords.width)) {\n          corrections = this._getOverlayCorrections(topCoords, bottomCoords);\n\n          that._topLabel.shift(corrections.coord1, topCoords.y);\n\n          that._bottomLabel.shift(corrections.coord2, bottomCoords.y);\n        }\n      }\n    }\n  },\n  _drawLabel: function _drawLabel() {\n    var that = this;\n    var labels = [];\n    var notInverted = that._options.rotated ? that.x >= that.minX : that.y < that.minY;\n\n    var customVisibility = that._getCustomLabelVisibility();\n\n    var topLabel = that._topLabel;\n    var bottomLabel = that._bottomLabel;\n    topLabel.pointPosition = notInverted ? \"top\" : \"bottom\";\n    bottomLabel.pointPosition = notInverted ? \"bottom\" : \"top\";\n\n    if ((that.series.getLabelVisibility() || customVisibility) && that.hasValue() && false !== customVisibility) {\n      false !== that.visibleTopMarker && labels.push(topLabel);\n      false !== that.visibleBottomMarker && labels.push(bottomLabel);\n      each(labels, function (_, label) {\n        label.draw(true);\n      });\n\n      that._checkLabelsOverlay(that._topLabel.pointPosition);\n    } else {\n      topLabel.draw(false);\n      bottomLabel.draw(false);\n    }\n  },\n  _getImage: function _getImage(imageOption) {\n    var image = {};\n\n    if (_isDefined(imageOption)) {\n      if (\"string\" === typeof imageOption) {\n        image.top = image.bottom = imageOption;\n      } else {\n        image.top = {\n          url: \"string\" === typeof imageOption.url ? imageOption.url : imageOption.url && imageOption.url.rangeMaxPoint,\n          width: \"number\" === typeof imageOption.width ? imageOption.width : imageOption.width && imageOption.width.rangeMaxPoint,\n          height: \"number\" === typeof imageOption.height ? imageOption.height : imageOption.height && imageOption.height.rangeMaxPoint\n        };\n        image.bottom = {\n          url: \"string\" === typeof imageOption.url ? imageOption.url : imageOption.url && imageOption.url.rangeMinPoint,\n          width: \"number\" === typeof imageOption.width ? imageOption.width : imageOption.width && imageOption.width.rangeMinPoint,\n          height: \"number\" === typeof imageOption.height ? imageOption.height : imageOption.height && imageOption.height.rangeMinPoint\n        };\n      }\n    }\n\n    return image;\n  },\n  _checkSymbol: function _checkSymbol(oldOptions, newOptions) {\n    var that = this;\n    var oldSymbol = oldOptions.symbol;\n    var newSymbol = newOptions.symbol;\n    var symbolChanged = \"circle\" === oldSymbol && \"circle\" !== newSymbol || \"circle\" !== oldSymbol && \"circle\" === newSymbol;\n\n    var oldImages = that._getImage(oldOptions.image);\n\n    var newImages = that._getImage(newOptions.image);\n\n    var topImageChanged = that._checkImage(oldImages.top) !== that._checkImage(newImages.top);\n\n    var bottomImageChanged = that._checkImage(oldImages.bottom) !== that._checkImage(newImages.bottom);\n\n    return symbolChanged || topImageChanged || bottomImageChanged;\n  },\n  _getSettingsForTwoMarkers: function _getSettingsForTwoMarkers(style) {\n    var that = this;\n    var options = that._options;\n    var settings = {};\n    var x = options.rotated ? _min(that.x, that.minX) : that.x;\n    var y = options.rotated ? that.y : _min(that.y, that.minY);\n    var radius = style.r;\n\n    var points = that._populatePointShape(options.symbol, radius);\n\n    settings.top = _extend({\n      translateX: x + that.width,\n      translateY: y,\n      r: radius\n    }, style);\n    settings.bottom = _extend({\n      translateX: x,\n      translateY: y + that.height,\n      r: radius\n    }, style);\n\n    if (points) {\n      settings.top.points = settings.bottom.points = points;\n    }\n\n    return settings;\n  },\n  _hasGraphic: function _hasGraphic() {\n    return this.graphic && this.graphic.topMarker && this.graphic.bottomMarker;\n  },\n  _drawOneMarker: function _drawOneMarker(renderer, markerType, imageSettings, settings) {\n    var that = this;\n    var graphic = that.graphic;\n\n    if (graphic[markerType]) {\n      that._updateOneMarker(markerType, settings);\n    } else {\n      graphic[markerType] = that._createMarker(renderer, graphic, imageSettings, settings);\n    }\n  },\n  _drawMarker: function _drawMarker(renderer, group, animationEnabled, firstDrawing, style) {\n    var that = this;\n\n    var settings = that._getSettingsForTwoMarkers(style || that._getStyle());\n\n    var image = that._getImage(that._options.image);\n\n    if (that._checkImage(image.top)) {\n      settings.top = that._getImageSettings(settings.top, image.top);\n    }\n\n    if (that._checkImage(image.bottom)) {\n      settings.bottom = that._getImageSettings(settings.bottom, image.bottom);\n    }\n\n    that.graphic = that.graphic || renderer.g().append(group);\n    that.visibleTopMarker && that._drawOneMarker(renderer, \"topMarker\", image.top, settings.top);\n    that.visibleBottomMarker && that._drawOneMarker(renderer, \"bottomMarker\", image.bottom, settings.bottom);\n  },\n  _getSettingsForTracker: function _getSettingsForTracker(radius) {\n    var that = this;\n    var rotated = that._options.rotated;\n    return {\n      translateX: rotated ? _min(that.x, that.minX) - radius : that.x - radius,\n      translateY: rotated ? that.y - radius : _min(that.y, that.minY) - radius,\n      width: that.width + 2 * radius,\n      height: that.height + 2 * radius\n    };\n  },\n  isInVisibleArea: function isInVisibleArea() {\n    var that = this;\n    var rotated = that._options.rotated;\n    var argument = !rotated ? that.x : that.y;\n    var maxValue = !rotated ? _max(that.minY, that.y) : _max(that.minX, that.x);\n    var minValue = !rotated ? _min(that.minY, that.y) : _min(that.minX, that.x);\n    var notVisibleByArg;\n    var notVisibleByVal;\n    var tmp;\n    var visibleTopMarker = true;\n    var visibleBottomMarker = true;\n    var visibleRangeArea = true;\n    var visibleArgArea;\n    var visibleValArea;\n    visibleArgArea = that.series.getArgumentAxis().getVisibleArea();\n    visibleValArea = that.series.getValueAxis().getVisibleArea();\n    notVisibleByArg = visibleArgArea[1] < argument || visibleArgArea[0] > argument;\n    notVisibleByVal = visibleValArea[0] > minValue && visibleValArea[0] > maxValue || visibleValArea[1] < minValue && visibleValArea[1] < maxValue;\n\n    if (notVisibleByArg || notVisibleByVal) {\n      visibleTopMarker = visibleBottomMarker = visibleRangeArea = false;\n    } else {\n      visibleTopMarker = visibleValArea[0] <= minValue && visibleValArea[1] > minValue;\n      visibleBottomMarker = visibleValArea[0] < maxValue && visibleValArea[1] >= maxValue;\n\n      if (rotated) {\n        tmp = visibleTopMarker;\n        visibleTopMarker = visibleBottomMarker;\n        visibleBottomMarker = tmp;\n      }\n    }\n\n    that.visibleTopMarker = visibleTopMarker;\n    that.visibleBottomMarker = visibleBottomMarker;\n    return visibleRangeArea;\n  },\n  getTooltipParams: function getTooltipParams() {\n    var that = this;\n    var x;\n    var y;\n    var rotated = that._options.rotated;\n    var minValue = !rotated ? _min(that.y, that.minY) : _min(that.x, that.minX);\n    var side = !rotated ? \"height\" : \"width\";\n\n    var visibleArea = that._getVisibleArea();\n\n    var minVisible = rotated ? visibleArea.minX : visibleArea.minY;\n    var maxVisible = rotated ? visibleArea.maxX : visibleArea.maxY;\n\n    var min = _max(minVisible, minValue);\n\n    var max = _min(maxVisible, minValue + that[side]);\n\n    if (!rotated) {\n      x = that.x;\n      y = min + (max - min) / 2;\n    } else {\n      y = that.y;\n      x = min + (max - min) / 2;\n    }\n\n    return {\n      x: x,\n      y: y,\n      offset: 0\n    };\n  },\n  _translate: function _translate() {\n    var that = this;\n    var rotated = that._options.rotated;\n\n    symbolPoint._translate.call(that);\n\n    that.height = rotated ? 0 : _abs(that.minY - that.y);\n    that.width = rotated ? _abs(that.x - that.minX) : 0;\n  },\n  hasCoords: function hasCoords() {\n    return symbolPoint.hasCoords.call(this) && !(null === this.minX || null === this.minY);\n  },\n  _updateData: function _updateData(data) {\n    var that = this;\n\n    symbolPoint._updateData.call(that, data);\n\n    that.minValue = that.initialMinValue = that.originalMinValue = data.minValue;\n  },\n  _getImageSettings: function _getImageSettings(settings, image) {\n    return {\n      href: image.url || image.toString(),\n      width: image.width || DEFAULT_IMAGE_WIDTH,\n      height: image.height || DEFAULT_IMAGE_HEIGHT,\n      translateX: settings.translateX,\n      translateY: settings.translateY\n    };\n  },\n  getCrosshairData: function getCrosshairData(x, y) {\n    var that = this;\n    var rotated = that._options.rotated;\n    var minX = that.minX;\n    var minY = that.minY;\n    var vx = that.vx;\n    var vy = that.vy;\n    var value = that.value;\n    var minValue = that.minValue;\n    var argument = that.argument;\n    var coords = {\n      axis: that.series.axis,\n      x: vx,\n      y: vy,\n      yValue: value,\n      xValue: argument\n    };\n\n    if (rotated) {\n      coords.yValue = argument;\n\n      if (_abs(vx - x) < _abs(minX - x)) {\n        coords.xValue = value;\n      } else {\n        coords.x = minX;\n        coords.xValue = minValue;\n      }\n    } else {\n      if (_abs(vy - y) >= _abs(minY - y)) {\n        coords.y = minY;\n        coords.yValue = minValue;\n      }\n    }\n\n    return coords;\n  },\n  _updateOneMarker: function _updateOneMarker(markerType, settings) {\n    this.graphic && this.graphic[markerType] && this.graphic[markerType].attr(settings);\n  },\n  _updateMarker: function _updateMarker(animationEnabled, style) {\n    this._drawMarker(void 0, void 0, false, false, style);\n  },\n  _getFormatObject: function _getFormatObject(tooltip) {\n    var that = this;\n    var initialMinValue = that.initialMinValue;\n    var initialValue = that.initialValue;\n    var initialArgument = that.initialArgument;\n    var minValue = tooltip.formatValue(initialMinValue);\n    var value = tooltip.formatValue(initialValue);\n    return {\n      argument: initialArgument,\n      argumentText: tooltip.formatValue(initialArgument, \"argument\"),\n      valueText: minValue + \" - \" + value,\n      rangeValue1Text: minValue,\n      rangeValue2Text: value,\n      rangeValue1: initialMinValue,\n      rangeValue2: initialValue,\n      seriesName: that.series.name,\n      point: that,\n      originalMinValue: that.originalMinValue,\n      originalValue: that.originalValue,\n      originalArgument: that.originalArgument\n    };\n  },\n  getLabel: function getLabel() {\n    return [this._topLabel, this._bottomLabel];\n  },\n  getLabels: function getLabels() {\n    return [this._topLabel, this._bottomLabel];\n  },\n  getBoundingRect: noop,\n  coordsIn: function coordsIn(x, y) {\n    var trackerRadius = this._storeTrackerR();\n\n    var xCond = x >= this.x - trackerRadius && x <= this.x + trackerRadius;\n    var yCond = y >= this.y - trackerRadius && y <= this.y + trackerRadius;\n\n    if (this._options.rotated) {\n      return yCond && (xCond || x >= this.minX - trackerRadius && x <= this.minX + trackerRadius);\n    } else {\n      return xCond && (yCond || y >= this.minY - trackerRadius && y <= this.minY + trackerRadius);\n    }\n  },\n  getMaxValue: function getMaxValue() {\n    if (\"discrete\" !== this.series.valueAxisType) {\n      return this.minValue > this.value ? this.minValue : this.value;\n    }\n\n    return this.value;\n  },\n  getMinValue: function getMinValue() {\n    if (\"discrete\" !== this.series.valueAxisType) {\n      return this.minValue < this.value ? this.minValue : this.value;\n    }\n\n    return this.minValue;\n  }\n});","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/series/points/range_symbol_point.js"],"names":["each","require","extend","noop","labelModule","symbolPoint","_extend","_isDefined","_math","_abs","_min","_max","_round","DEFAULT_IMAGE_WIDTH","DEFAULT_IMAGE_HEIGHT","module","deleteLabel","that","hideMarker","graphic","marker","type","label","visibility","setInvisibility","clearVisibility","topMarker","bottomMarker","clearMarker","emptySettings","_getLabelPosition","labelsInside","position","_getLabelMinFormatObject","index","argument","value","seriesName","originalValue","originalArgument","point","_updateLabelData","maxFormatObject","_updateLabelOptions","options","_createLabel","renderer","labelsGroup","_getGraphicBBox","images","image","coord","bBox","x","y","width","height","_getPositionFromLocation","isTop","_checkOverlay","bottomCoord","topCoord","_getOverlayCorrections","rotated","coordSelector","valueSelector","visibleArea","minBound","maxBound","delta","topCoords","bottomCoords","coord1","coord2","_checkLabelsOverlay","corrections","_drawLabel","labels","notInverted","customVisibility","topLabel","bottomLabel","_getImage","url","imageOption","rangeMaxPoint","rangeMinPoint","_checkSymbol","oldSymbol","oldOptions","newSymbol","newOptions","symbolChanged","oldImages","newImages","topImageChanged","bottomImageChanged","_getSettingsForTwoMarkers","settings","radius","style","points","translateX","translateY","r","_hasGraphic","_drawOneMarker","_drawMarker","_getSettingsForTracker","isInVisibleArea","maxValue","minValue","visibleTopMarker","visibleBottomMarker","visibleRangeArea","visibleArgArea","visibleValArea","notVisibleByArg","notVisibleByVal","tmp","getTooltipParams","side","minVisible","maxVisible","min","max","offset","_translate","hasCoords","_updateData","data","_getImageSettings","href","getCrosshairData","minX","minY","vx","vy","coords","axis","yValue","xValue","_updateOneMarker","_updateMarker","_getFormatObject","initialMinValue","initialValue","initialArgument","tooltip","argumentText","valueText","rangeValue1Text","rangeValue2Text","rangeValue1","rangeValue2","originalMinValue","getLabel","getLabels","getBoundingRect","coordsIn","trackerRadius","xCond","yCond","getMaxValue","getMinValue"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/series/points/range_symbol_point.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar each = require(\"../../../core/utils/iterator\").each;\r\nvar extend = require(\"../../../core/utils/extend\").extend;\r\nvar noop = require(\"../../../core/utils/common\").noop;\r\nvar labelModule = require(\"./label\");\r\nvar symbolPoint = require(\"./symbol_point\");\r\nvar _extend = extend;\r\nvar _isDefined = require(\"../../../core/utils/type\").isDefined;\r\nvar _math = Math;\r\nvar _abs = _math.abs;\r\nvar _min = _math.min;\r\nvar _max = _math.max;\r\nvar _round = _math.round;\r\nvar DEFAULT_IMAGE_WIDTH = 20;\r\nvar DEFAULT_IMAGE_HEIGHT = 20;\r\nmodule.exports = _extend({}, symbolPoint, {\r\n    deleteLabel: function() {\r\n        var that = this;\r\n        that._topLabel.dispose();\r\n        that._topLabel = null;\r\n        that._bottomLabel.dispose();\r\n        that._bottomLabel = null\r\n    },\r\n    hideMarker: function(type) {\r\n        var graphic = this.graphic;\r\n        var marker = graphic && graphic[type + \"Marker\"];\r\n        var label = this[\"_\" + type + \"Label\"];\r\n        if (marker && \"hidden\" !== marker.attr(\"visibility\")) {\r\n            marker.attr({\r\n                visibility: \"hidden\"\r\n            })\r\n        }\r\n        label.draw(false)\r\n    },\r\n    setInvisibility: function() {\r\n        this.hideMarker(\"top\");\r\n        this.hideMarker(\"bottom\")\r\n    },\r\n    clearVisibility: function() {\r\n        var that = this;\r\n        var graphic = that.graphic;\r\n        var topMarker = graphic && graphic.topMarker;\r\n        var bottomMarker = graphic && graphic.bottomMarker;\r\n        if (topMarker && topMarker.attr(\"visibility\")) {\r\n            topMarker.attr({\r\n                visibility: null\r\n            })\r\n        }\r\n        if (bottomMarker && bottomMarker.attr(\"visibility\")) {\r\n            bottomMarker.attr({\r\n                visibility: null\r\n            })\r\n        }\r\n    },\r\n    clearMarker: function() {\r\n        var that = this;\r\n        var graphic = that.graphic;\r\n        var topMarker = graphic && graphic.topMarker;\r\n        var bottomMarker = graphic && graphic.bottomMarker;\r\n        var emptySettings = that._emptySettings;\r\n        topMarker && topMarker.attr(emptySettings);\r\n        bottomMarker && bottomMarker.attr(emptySettings)\r\n    },\r\n    _getLabelPosition: function(markerType) {\r\n        var position;\r\n        var labelsInside = \"inside\" === this._options.label.position;\r\n        if (!this._options.rotated) {\r\n            position = \"top\" === markerType ^ labelsInside ? \"top\" : \"bottom\"\r\n        } else {\r\n            position = \"top\" === markerType ^ labelsInside ? \"right\" : \"left\"\r\n        }\r\n        return position\r\n    },\r\n    _getLabelMinFormatObject: function() {\r\n        var that = this;\r\n        return {\r\n            index: 0,\r\n            argument: that.initialArgument,\r\n            value: that.initialMinValue,\r\n            seriesName: that.series.name,\r\n            originalValue: that.originalMinValue,\r\n            originalArgument: that.originalArgument,\r\n            point: that\r\n        }\r\n    },\r\n    _updateLabelData: function() {\r\n        var maxFormatObject = this._getLabelFormatObject();\r\n        maxFormatObject.index = 1;\r\n        this._topLabel.setData(maxFormatObject);\r\n        this._bottomLabel.setData(this._getLabelMinFormatObject())\r\n    },\r\n    _updateLabelOptions: function() {\r\n        var that = this;\r\n        var options = this._options.label;\r\n        (!that._topLabel || !that._bottomLabel) && that._createLabel();\r\n        that._topLabel.setOptions(options);\r\n        that._bottomLabel.setOptions(options)\r\n    },\r\n    _createLabel: function() {\r\n        var options = {\r\n            renderer: this.series._renderer,\r\n            labelsGroup: this.series._labelsGroup,\r\n            point: this\r\n        };\r\n        this._topLabel = new labelModule.Label(options);\r\n        this._bottomLabel = new labelModule.Label(options)\r\n    },\r\n    _getGraphicBBox: function(location) {\r\n        var options = this._options;\r\n        var images = this._getImage(options.image);\r\n        var image = \"top\" === location ? this._checkImage(images.top) : this._checkImage(images.bottom);\r\n        var bBox;\r\n        var coord = this._getPositionFromLocation(location);\r\n        if (options.visible) {\r\n            bBox = image ? this._getImageBBox(coord.x, coord.y) : this._getSymbolBBox(coord.x, coord.y, options.styles.normal.r)\r\n        } else {\r\n            bBox = {\r\n                x: coord.x,\r\n                y: coord.y,\r\n                width: 0,\r\n                height: 0\r\n            }\r\n        }\r\n        return bBox\r\n    },\r\n    _getPositionFromLocation: function(location) {\r\n        var x;\r\n        var y;\r\n        var isTop = \"top\" === location;\r\n        if (!this._options.rotated) {\r\n            x = this.x;\r\n            y = isTop ? _min(this.y, this.minY) : _max(this.y, this.minY)\r\n        } else {\r\n            x = isTop ? _max(this.x, this.minX) : _min(this.x, this.minX);\r\n            y = this.y\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    },\r\n    _checkOverlay: function(bottomCoord, topCoord, topValue) {\r\n        return bottomCoord < topCoord + topValue\r\n    },\r\n    _getOverlayCorrections: function(topCoords, bottomCoords) {\r\n        var rotated = this._options.rotated;\r\n        var coordSelector = !rotated ? \"y\" : \"x\";\r\n        var valueSelector = !rotated ? \"height\" : \"width\";\r\n        var visibleArea = this.series.getValueAxis().getVisibleArea();\r\n        var minBound = visibleArea[0];\r\n        var maxBound = visibleArea[1];\r\n        var delta = _round((topCoords[coordSelector] + topCoords[valueSelector] - bottomCoords[coordSelector]) / 2);\r\n        var coord1 = topCoords[coordSelector] - delta;\r\n        var coord2 = bottomCoords[coordSelector] + delta;\r\n        if (coord1 < minBound) {\r\n            delta = minBound - topCoords[coordSelector];\r\n            coord1 += delta;\r\n            coord2 += delta\r\n        } else {\r\n            if (coord2 + bottomCoords[valueSelector] > maxBound) {\r\n                delta = -(bottomCoords[coordSelector] + bottomCoords[valueSelector] - maxBound);\r\n                coord1 += delta;\r\n                coord2 += delta\r\n            }\r\n        }\r\n        return {\r\n            coord1: coord1,\r\n            coord2: coord2\r\n        }\r\n    },\r\n    _checkLabelsOverlay: function(topLocation) {\r\n        var that = this;\r\n        var topCoords = that._topLabel.getBoundingRect();\r\n        var bottomCoords = that._bottomLabel.getBoundingRect();\r\n        var corrections = {};\r\n        if (!that._options.rotated) {\r\n            if (\"top\" === topLocation) {\r\n                if (this._checkOverlay(bottomCoords.y, topCoords.y, topCoords.height)) {\r\n                    corrections = this._getOverlayCorrections(topCoords, bottomCoords);\r\n                    that._topLabel.shift(topCoords.x, corrections.coord1);\r\n                    that._bottomLabel.shift(bottomCoords.x, corrections.coord2)\r\n                }\r\n            } else {\r\n                if (this._checkOverlay(topCoords.y, bottomCoords.y, bottomCoords.height)) {\r\n                    corrections = this._getOverlayCorrections(bottomCoords, topCoords);\r\n                    that._topLabel.shift(topCoords.x, corrections.coord2);\r\n                    that._bottomLabel.shift(bottomCoords.x, corrections.coord1)\r\n                }\r\n            }\r\n        } else {\r\n            if (\"top\" === topLocation) {\r\n                if (this._checkOverlay(topCoords.x, bottomCoords.x, bottomCoords.width)) {\r\n                    corrections = this._getOverlayCorrections(bottomCoords, topCoords);\r\n                    that._topLabel.shift(corrections.coord2, topCoords.y);\r\n                    that._bottomLabel.shift(corrections.coord1, bottomCoords.y)\r\n                }\r\n            } else {\r\n                if (this._checkOverlay(bottomCoords.x, topCoords.x, topCoords.width)) {\r\n                    corrections = this._getOverlayCorrections(topCoords, bottomCoords);\r\n                    that._topLabel.shift(corrections.coord1, topCoords.y);\r\n                    that._bottomLabel.shift(corrections.coord2, bottomCoords.y)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _drawLabel: function() {\r\n        var that = this;\r\n        var labels = [];\r\n        var notInverted = that._options.rotated ? that.x >= that.minX : that.y < that.minY;\r\n        var customVisibility = that._getCustomLabelVisibility();\r\n        var topLabel = that._topLabel;\r\n        var bottomLabel = that._bottomLabel;\r\n        topLabel.pointPosition = notInverted ? \"top\" : \"bottom\";\r\n        bottomLabel.pointPosition = notInverted ? \"bottom\" : \"top\";\r\n        if ((that.series.getLabelVisibility() || customVisibility) && that.hasValue() && false !== customVisibility) {\r\n            false !== that.visibleTopMarker && labels.push(topLabel);\r\n            false !== that.visibleBottomMarker && labels.push(bottomLabel);\r\n            each(labels, function(_, label) {\r\n                label.draw(true)\r\n            });\r\n            that._checkLabelsOverlay(that._topLabel.pointPosition)\r\n        } else {\r\n            topLabel.draw(false);\r\n            bottomLabel.draw(false)\r\n        }\r\n    },\r\n    _getImage: function(imageOption) {\r\n        var image = {};\r\n        if (_isDefined(imageOption)) {\r\n            if (\"string\" === typeof imageOption) {\r\n                image.top = image.bottom = imageOption\r\n            } else {\r\n                image.top = {\r\n                    url: \"string\" === typeof imageOption.url ? imageOption.url : imageOption.url && imageOption.url.rangeMaxPoint,\r\n                    width: \"number\" === typeof imageOption.width ? imageOption.width : imageOption.width && imageOption.width.rangeMaxPoint,\r\n                    height: \"number\" === typeof imageOption.height ? imageOption.height : imageOption.height && imageOption.height.rangeMaxPoint\r\n                };\r\n                image.bottom = {\r\n                    url: \"string\" === typeof imageOption.url ? imageOption.url : imageOption.url && imageOption.url.rangeMinPoint,\r\n                    width: \"number\" === typeof imageOption.width ? imageOption.width : imageOption.width && imageOption.width.rangeMinPoint,\r\n                    height: \"number\" === typeof imageOption.height ? imageOption.height : imageOption.height && imageOption.height.rangeMinPoint\r\n                }\r\n            }\r\n        }\r\n        return image\r\n    },\r\n    _checkSymbol: function(oldOptions, newOptions) {\r\n        var that = this;\r\n        var oldSymbol = oldOptions.symbol;\r\n        var newSymbol = newOptions.symbol;\r\n        var symbolChanged = \"circle\" === oldSymbol && \"circle\" !== newSymbol || \"circle\" !== oldSymbol && \"circle\" === newSymbol;\r\n        var oldImages = that._getImage(oldOptions.image);\r\n        var newImages = that._getImage(newOptions.image);\r\n        var topImageChanged = that._checkImage(oldImages.top) !== that._checkImage(newImages.top);\r\n        var bottomImageChanged = that._checkImage(oldImages.bottom) !== that._checkImage(newImages.bottom);\r\n        return symbolChanged || topImageChanged || bottomImageChanged\r\n    },\r\n    _getSettingsForTwoMarkers: function(style) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var settings = {};\r\n        var x = options.rotated ? _min(that.x, that.minX) : that.x;\r\n        var y = options.rotated ? that.y : _min(that.y, that.minY);\r\n        var radius = style.r;\r\n        var points = that._populatePointShape(options.symbol, radius);\r\n        settings.top = _extend({\r\n            translateX: x + that.width,\r\n            translateY: y,\r\n            r: radius\r\n        }, style);\r\n        settings.bottom = _extend({\r\n            translateX: x,\r\n            translateY: y + that.height,\r\n            r: radius\r\n        }, style);\r\n        if (points) {\r\n            settings.top.points = settings.bottom.points = points\r\n        }\r\n        return settings\r\n    },\r\n    _hasGraphic: function() {\r\n        return this.graphic && this.graphic.topMarker && this.graphic.bottomMarker\r\n    },\r\n    _drawOneMarker: function(renderer, markerType, imageSettings, settings) {\r\n        var that = this;\r\n        var graphic = that.graphic;\r\n        if (graphic[markerType]) {\r\n            that._updateOneMarker(markerType, settings)\r\n        } else {\r\n            graphic[markerType] = that._createMarker(renderer, graphic, imageSettings, settings)\r\n        }\r\n    },\r\n    _drawMarker: function(renderer, group, animationEnabled, firstDrawing, style) {\r\n        var that = this;\r\n        var settings = that._getSettingsForTwoMarkers(style || that._getStyle());\r\n        var image = that._getImage(that._options.image);\r\n        if (that._checkImage(image.top)) {\r\n            settings.top = that._getImageSettings(settings.top, image.top)\r\n        }\r\n        if (that._checkImage(image.bottom)) {\r\n            settings.bottom = that._getImageSettings(settings.bottom, image.bottom)\r\n        }\r\n        that.graphic = that.graphic || renderer.g().append(group);\r\n        that.visibleTopMarker && that._drawOneMarker(renderer, \"topMarker\", image.top, settings.top);\r\n        that.visibleBottomMarker && that._drawOneMarker(renderer, \"bottomMarker\", image.bottom, settings.bottom)\r\n    },\r\n    _getSettingsForTracker: function(radius) {\r\n        var that = this;\r\n        var rotated = that._options.rotated;\r\n        return {\r\n            translateX: rotated ? _min(that.x, that.minX) - radius : that.x - radius,\r\n            translateY: rotated ? that.y - radius : _min(that.y, that.minY) - radius,\r\n            width: that.width + 2 * radius,\r\n            height: that.height + 2 * radius\r\n        }\r\n    },\r\n    isInVisibleArea: function() {\r\n        var that = this;\r\n        var rotated = that._options.rotated;\r\n        var argument = !rotated ? that.x : that.y;\r\n        var maxValue = !rotated ? _max(that.minY, that.y) : _max(that.minX, that.x);\r\n        var minValue = !rotated ? _min(that.minY, that.y) : _min(that.minX, that.x);\r\n        var notVisibleByArg;\r\n        var notVisibleByVal;\r\n        var tmp;\r\n        var visibleTopMarker = true;\r\n        var visibleBottomMarker = true;\r\n        var visibleRangeArea = true;\r\n        var visibleArgArea;\r\n        var visibleValArea;\r\n        visibleArgArea = that.series.getArgumentAxis().getVisibleArea();\r\n        visibleValArea = that.series.getValueAxis().getVisibleArea();\r\n        notVisibleByArg = visibleArgArea[1] < argument || visibleArgArea[0] > argument;\r\n        notVisibleByVal = visibleValArea[0] > minValue && visibleValArea[0] > maxValue || visibleValArea[1] < minValue && visibleValArea[1] < maxValue;\r\n        if (notVisibleByArg || notVisibleByVal) {\r\n            visibleTopMarker = visibleBottomMarker = visibleRangeArea = false\r\n        } else {\r\n            visibleTopMarker = visibleValArea[0] <= minValue && visibleValArea[1] > minValue;\r\n            visibleBottomMarker = visibleValArea[0] < maxValue && visibleValArea[1] >= maxValue;\r\n            if (rotated) {\r\n                tmp = visibleTopMarker;\r\n                visibleTopMarker = visibleBottomMarker;\r\n                visibleBottomMarker = tmp\r\n            }\r\n        }\r\n        that.visibleTopMarker = visibleTopMarker;\r\n        that.visibleBottomMarker = visibleBottomMarker;\r\n        return visibleRangeArea\r\n    },\r\n    getTooltipParams: function() {\r\n        var that = this;\r\n        var x;\r\n        var y;\r\n        var rotated = that._options.rotated;\r\n        var minValue = !rotated ? _min(that.y, that.minY) : _min(that.x, that.minX);\r\n        var side = !rotated ? \"height\" : \"width\";\r\n        var visibleArea = that._getVisibleArea();\r\n        var minVisible = rotated ? visibleArea.minX : visibleArea.minY;\r\n        var maxVisible = rotated ? visibleArea.maxX : visibleArea.maxY;\r\n        var min = _max(minVisible, minValue);\r\n        var max = _min(maxVisible, minValue + that[side]);\r\n        if (!rotated) {\r\n            x = that.x;\r\n            y = min + (max - min) / 2\r\n        } else {\r\n            y = that.y;\r\n            x = min + (max - min) / 2\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            offset: 0\r\n        }\r\n    },\r\n    _translate: function() {\r\n        var that = this;\r\n        var rotated = that._options.rotated;\r\n        symbolPoint._translate.call(that);\r\n        that.height = rotated ? 0 : _abs(that.minY - that.y);\r\n        that.width = rotated ? _abs(that.x - that.minX) : 0\r\n    },\r\n    hasCoords: function() {\r\n        return symbolPoint.hasCoords.call(this) && !(null === this.minX || null === this.minY)\r\n    },\r\n    _updateData: function(data) {\r\n        var that = this;\r\n        symbolPoint._updateData.call(that, data);\r\n        that.minValue = that.initialMinValue = that.originalMinValue = data.minValue\r\n    },\r\n    _getImageSettings: function(settings, image) {\r\n        return {\r\n            href: image.url || image.toString(),\r\n            width: image.width || DEFAULT_IMAGE_WIDTH,\r\n            height: image.height || DEFAULT_IMAGE_HEIGHT,\r\n            translateX: settings.translateX,\r\n            translateY: settings.translateY\r\n        }\r\n    },\r\n    getCrosshairData: function(x, y) {\r\n        var that = this;\r\n        var rotated = that._options.rotated;\r\n        var minX = that.minX;\r\n        var minY = that.minY;\r\n        var vx = that.vx;\r\n        var vy = that.vy;\r\n        var value = that.value;\r\n        var minValue = that.minValue;\r\n        var argument = that.argument;\r\n        var coords = {\r\n            axis: that.series.axis,\r\n            x: vx,\r\n            y: vy,\r\n            yValue: value,\r\n            xValue: argument\r\n        };\r\n        if (rotated) {\r\n            coords.yValue = argument;\r\n            if (_abs(vx - x) < _abs(minX - x)) {\r\n                coords.xValue = value\r\n            } else {\r\n                coords.x = minX;\r\n                coords.xValue = minValue\r\n            }\r\n        } else {\r\n            if (_abs(vy - y) >= _abs(minY - y)) {\r\n                coords.y = minY;\r\n                coords.yValue = minValue\r\n            }\r\n        }\r\n        return coords\r\n    },\r\n    _updateOneMarker: function(markerType, settings) {\r\n        this.graphic && this.graphic[markerType] && this.graphic[markerType].attr(settings)\r\n    },\r\n    _updateMarker: function(animationEnabled, style) {\r\n        this._drawMarker(void 0, void 0, false, false, style)\r\n    },\r\n    _getFormatObject: function(tooltip) {\r\n        var that = this;\r\n        var initialMinValue = that.initialMinValue;\r\n        var initialValue = that.initialValue;\r\n        var initialArgument = that.initialArgument;\r\n        var minValue = tooltip.formatValue(initialMinValue);\r\n        var value = tooltip.formatValue(initialValue);\r\n        return {\r\n            argument: initialArgument,\r\n            argumentText: tooltip.formatValue(initialArgument, \"argument\"),\r\n            valueText: minValue + \" - \" + value,\r\n            rangeValue1Text: minValue,\r\n            rangeValue2Text: value,\r\n            rangeValue1: initialMinValue,\r\n            rangeValue2: initialValue,\r\n            seriesName: that.series.name,\r\n            point: that,\r\n            originalMinValue: that.originalMinValue,\r\n            originalValue: that.originalValue,\r\n            originalArgument: that.originalArgument\r\n        }\r\n    },\r\n    getLabel: function() {\r\n        return [this._topLabel, this._bottomLabel]\r\n    },\r\n    getLabels: function() {\r\n        return [this._topLabel, this._bottomLabel]\r\n    },\r\n    getBoundingRect: noop,\r\n    coordsIn: function(x, y) {\r\n        var trackerRadius = this._storeTrackerR();\r\n        var xCond = x >= this.x - trackerRadius && x <= this.x + trackerRadius;\r\n        var yCond = y >= this.y - trackerRadius && y <= this.y + trackerRadius;\r\n        if (this._options.rotated) {\r\n            return yCond && (xCond || x >= this.minX - trackerRadius && x <= this.minX + trackerRadius)\r\n        } else {\r\n            return xCond && (yCond || y >= this.minY - trackerRadius && y <= this.minY + trackerRadius)\r\n        }\r\n    },\r\n    getMaxValue: function() {\r\n        if (\"discrete\" !== this.series.valueAxisType) {\r\n            return this.minValue > this.value ? this.minValue : this.value\r\n        }\r\n        return this.value\r\n    },\r\n    getMinValue: function() {\r\n        if (\"discrete\" !== this.series.valueAxisType) {\r\n            return this.minValue < this.value ? this.minValue : this.value\r\n        }\r\n        return this.minValue\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}