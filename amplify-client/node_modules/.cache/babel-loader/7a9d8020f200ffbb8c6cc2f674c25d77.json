{"ast":null,"code":"/**\r\n * DevExtreme (viz/vector_map/vector_map.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _utils = require(\"../core/utils\");\n\nvar _projection = require(\"./projection.main\");\n\nvar _control_bar = require(\"./control_bar\");\n\nvar _control_bar2 = _interopRequireDefault(_control_bar);\n\nvar _gesture_handler = require(\"./gesture_handler\");\n\nvar _gesture_handler2 = _interopRequireDefault(_gesture_handler);\n\nvar _tracker = require(\"./tracker\");\n\nvar _tracker2 = _interopRequireDefault(_tracker);\n\nvar _data_exchanger = require(\"./data_exchanger\");\n\nvar _data_exchanger2 = _interopRequireDefault(_data_exchanger);\n\nvar _legend = require(\"./legend\");\n\nvar _legend2 = _interopRequireDefault(_legend);\n\nvar _layout = require(\"./layout\");\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nvar _map_layer = require(\"./map_layer\");\n\nvar _tooltip_viewer = require(\"./tooltip_viewer\");\n\nvar _tooltip_viewer2 = _interopRequireDefault(_tooltip_viewer);\n\nrequire(\"./projection\");\n\nvar _base_widget = require(\"../core/base_widget\");\n\nvar _base_widget2 = _interopRequireDefault(_base_widget);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _export = require(\"../core/export\");\n\nvar _title = require(\"../core/title\");\n\nvar _tooltip = require(\"../core/tooltip\");\n\nvar _loading_indicator = require(\"../core/loading_indicator\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DEFAULT_WIDTH = 800;\nvar DEFAULT_HEIGHT = 400;\nvar RE_STARTS_LAYERS = /^layers/;\nvar RE_ENDS_DATA_SOURCE = /\\.dataSource$/;\nvar nextDataKey = 1;\n\nfunction generateDataKey() {\n  return \"vectormap-data-\" + nextDataKey++;\n}\n\nfunction mergeBounds(sumBounds, dataBounds) {\n  return dataBounds ? [Math.min(dataBounds[0], dataBounds[2], sumBounds[0]), Math.min(dataBounds[1], dataBounds[3], sumBounds[3]), Math.max(dataBounds[0], dataBounds[2], sumBounds[2]), Math.max(dataBounds[1], dataBounds[3], sumBounds[1])] : sumBounds;\n}\n\nvar dxVectorMap = _base_widget2.default.inherit({\n  _eventsMap: {\n    onClick: {\n      name: \"click\"\n    },\n    onCenterChanged: {\n      name: \"centerChanged\"\n    },\n    onZoomFactorChanged: {\n      name: \"zoomFactorChanged\"\n    },\n    onHoverChanged: {\n      name: \"hoverChanged\"\n    },\n    onSelectionChanged: {\n      name: \"selectionChanged\"\n    }\n  },\n  _rootClassPrefix: \"dxm\",\n  _rootClass: \"dxm-vector-map\",\n  _themeSection: \"map\",\n  _fontFields: [\"layer:area.label.font\", \"layer:marker:dot.label.font\", \"layer:marker:bubble.label.font\", \"layer:marker:pie.label.font\", \"layer:marker:image.label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\n  _initLayerCollection: function _initLayerCollection(dataKey) {\n    var that = this;\n    that._layerCollection = new _map_layer.MapLayerCollection({\n      renderer: that._renderer,\n      projection: that._projection,\n      themeManager: that._themeManager,\n      tracker: that._tracker,\n      dataKey: dataKey,\n      eventTrigger: that._eventTrigger,\n      dataExchanger: that._dataExchanger,\n      tooltip: that._tooltip,\n      notifyDirty: that._notifyDirty,\n      notifyReady: that._notifyReady,\n      dataReady: function dataReady() {\n        var bounds;\n\n        if (that.option(\"getBoundsFromData\") && !that.option(\"bounds\")) {\n          that._preventProjectionEvents();\n\n          bounds = that._getBoundsFromData();\n\n          that._projection.setBounds(bounds);\n\n          that._allowProjectionEvents();\n        }\n\n        if (!that.option(\"projection\")) {\n          bounds = bounds || that._getBoundsFromData();\n\n          if (Math.ceil(bounds[0]) < -180 || Math.ceil(bounds[3]) < -90 || Math.floor(bounds[2]) > 180 || Math.floor(bounds[1]) > 90) {\n            var longitudeLength = bounds[2] - bounds[0];\n            var latitudeLength = bounds[1] - bounds[3];\n\n            that._projection.setEngine({\n              to: function to(coordinates) {\n                return [2 * (coordinates[0] - bounds[0]) / longitudeLength - 1, 2 * (coordinates[1] - bounds[3]) / latitudeLength - 1];\n              },\n              from: function from(coordinates) {\n                return [(coordinates[0] + 1) * longitudeLength / 2 + bounds[0], (coordinates[1] + 1) * latitudeLength / 2 + bounds[3]];\n              }\n            });\n          }\n        }\n      }\n    });\n  },\n  _getBoundsFromData: function _getBoundsFromData() {\n    var bounds = this._getBoundingBoxFromDataSource();\n\n    if (!bounds) {\n      var boundsByData = (0, _map_layer.getMaxBound)(this.getLayers().map(function (l) {\n        return l.getBounds();\n      }));\n\n      if (boundsByData) {\n        bounds = boundsByData;\n      }\n    }\n\n    bounds = bounds || [];\n    bounds = [bounds[0], bounds[3], bounds[2], bounds[1]];\n    return bounds;\n  },\n  _initLegendsControl: function _initLegendsControl() {\n    var that = this;\n    that._legendsControl = new _legend2.default.LegendsControl({\n      renderer: that._renderer,\n      container: that._root,\n      widget: that,\n      layoutControl: that._layoutControl,\n      themeManager: that._themeManager,\n      dataExchanger: that._dataExchanger,\n      notifyDirty: that._notifyDirty,\n      notifyReady: that._notifyReady\n    });\n  },\n  _initControlBar: function _initControlBar(dataKey) {\n    var that = this;\n    that._controlBar = new _control_bar2.default.ControlBar({\n      renderer: that._renderer,\n      container: that._root,\n      layoutControl: that._layoutControl,\n      projection: that._projection,\n      tracker: that._tracker,\n      dataKey: dataKey\n    });\n  },\n  _initElements: function _initElements() {\n    var that = this;\n    var dataKey = generateDataKey();\n    var notifyCounter = 0;\n    var preventProjectionEvents;\n\n    that._preventProjectionEvents = function () {\n      preventProjectionEvents = true;\n    };\n\n    that._allowProjectionEvents = function () {\n      preventProjectionEvents = false;\n    };\n\n    that._notifyDirty = function () {\n      that._resetIsReady();\n\n      ++notifyCounter;\n    };\n\n    that._notifyReady = function () {\n      that._allowProjectionEvents();\n\n      if (0 === --notifyCounter) {\n        that._drawn();\n      }\n    };\n\n    that._preventProjectionEvents();\n\n    that._dataExchanger = new _data_exchanger2.default.DataExchanger();\n    that._projection = new _projection.Projection({\n      centerChanged: function centerChanged(value) {\n        if (!preventProjectionEvents) {\n          that._eventTrigger(\"centerChanged\", {\n            center: value\n          });\n        }\n      },\n      zoomChanged: function zoomChanged(value) {\n        if (!preventProjectionEvents) {\n          that._eventTrigger(\"zoomFactorChanged\", {\n            zoomFactor: value\n          });\n        }\n      }\n    });\n    that._tracker = new _tracker2.default.Tracker({\n      root: that._root,\n      projection: that._projection,\n      dataKey: dataKey\n    });\n    that._gestureHandler = new _gesture_handler2.default.GestureHandler({\n      projection: that._projection,\n      renderer: that._renderer,\n      tracker: that._tracker\n    });\n    that._layoutControl = new _layout2.default.LayoutControl();\n\n    that._layoutControl.suspend();\n\n    that._initLayerCollection(dataKey);\n\n    that._initControlBar(dataKey);\n\n    that._initLegendsControl();\n\n    that._tooltipViewer = new _tooltip_viewer2.default.TooltipViewer({\n      tracker: that._tracker,\n      tooltip: that._tooltip,\n      layerCollection: that._layerCollection\n    });\n  },\n  _change_RESUME_LAYOUT: function _change_RESUME_LAYOUT() {\n    this._layoutControl.resume();\n  },\n  _initialChanges: [\"PROJECTION\", \"RESUME_LAYOUT\", \"LAYOUT_INIT\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\"],\n  _layoutChangesOrder: [\"RESUME_LAYOUT\", \"LAYERS\"],\n  _initCore: function _initCore() {\n    this._root = this._renderer.root.attr({\n      align: \"center\",\n      cursor: \"default\"\n    });\n\n    this._initElements();\n  },\n  _disposeCore: function _disposeCore() {\n    var that = this;\n\n    that._controlBar.dispose();\n\n    that._gestureHandler.dispose();\n\n    that._tracker.dispose();\n\n    that._legendsControl.dispose();\n\n    that._layerCollection.dispose();\n\n    that._layoutControl.dispose();\n\n    that._tooltipViewer.dispose();\n\n    that._dataExchanger.dispose();\n\n    that._projection.dispose();\n\n    that._dataExchanger = that._gestureHandler = that._projection = that._tracker = that._layoutControl = that._root = that._layerCollection = that._controlBar = that._legendsControl = null;\n  },\n  _setupInteraction: function _setupInteraction() {\n    var options = {\n      centeringEnabled: !!(0, _utils.parseScalar)(this._getOption(\"panningEnabled\", true), true),\n      zoomingEnabled: !!(0, _utils.parseScalar)(this._getOption(\"zoomingEnabled\", true), true)\n    };\n\n    this._gestureHandler.setInteraction(options);\n\n    this._controlBar.setInteraction(options);\n  },\n  _getDefaultSize: function _getDefaultSize() {\n    return {\n      width: DEFAULT_WIDTH,\n      height: DEFAULT_HEIGHT\n    };\n  },\n  _applySize: function _applySize(rect) {\n    var layout = {\n      left: rect[0],\n      top: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1],\n      right: 0,\n      bottom: 0\n    };\n\n    this._projection.setSize(layout);\n\n    this._layoutControl.setSize(layout);\n\n    this._layerCollection.setRect([layout.left, layout.top, layout.width, layout.height]);\n  },\n  _optionChanging: function _optionChanging(name, currentValue, nextValue) {\n    if (currentValue && nextValue) {\n      if (RE_STARTS_LAYERS.test(name)) {\n        if (currentValue.dataSource && nextValue.dataSource && currentValue !== nextValue) {\n          currentValue.dataSource = null;\n        } else {\n          if (RE_ENDS_DATA_SOURCE.test(name)) {\n            this.option(name, null);\n          }\n        }\n      }\n    }\n  },\n  _applyChanges: function _applyChanges() {\n    this._notifyDirty();\n\n    this.callBase.apply(this, arguments);\n\n    this._notifyReady();\n  },\n  _optionChangesMap: {\n    background: \"BACKGROUND\",\n    layers: \"LAYERS\",\n    controlBar: \"CONTROL_BAR\",\n    legends: \"LEGENDS\",\n    touchEnabled: \"TRACKER\",\n    wheelEnabled: \"TRACKER\",\n    panningEnabled: \"INTERACTION\",\n    zoomingEnabled: \"INTERACTION\",\n    projection: \"PROJECTION\",\n    bounds: \"BOUNDS\",\n    maxZoomFactor: \"MAX_ZOOM_FACTOR\",\n    zoomFactor: \"ZOOM_FACTOR\",\n    center: \"CENTER\"\n  },\n  _optionChangesOrder: [\"PROJECTION\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\", \"BACKGROUND\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\n  _change_PROJECTION: function _change_PROJECTION() {\n    this._setProjection();\n  },\n  _change_BOUNDS: function _change_BOUNDS() {\n    this._setBounds();\n  },\n  _change_MAX_ZOOM_FACTOR: function _change_MAX_ZOOM_FACTOR() {\n    this._setMaxZoom();\n  },\n  _change_ZOOM_FACTOR: function _change_ZOOM_FACTOR() {\n    this._setZoom();\n  },\n  _change_CENTER: function _change_CENTER() {\n    this._setCenter();\n  },\n  _change_BACKGROUND: function _change_BACKGROUND() {\n    this._setBackgroundOptions();\n  },\n  _change_LAYERS: function _change_LAYERS() {\n    this._setLayerCollectionOptions();\n  },\n  _change_CONTROL_BAR: function _change_CONTROL_BAR() {\n    this._setControlBarOptions();\n  },\n  _change_LEGENDS: function _change_LEGENDS() {\n    this._setLegendsOptions();\n  },\n  _change_TRACKER: function _change_TRACKER() {\n    this._setTrackerOptions();\n  },\n  _change_INTERACTION: function _change_INTERACTION() {\n    this._setupInteraction();\n  },\n  _themeDependentChanges: [\"BACKGROUND\", \"LAYERS\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\n  _setProjection: function _setProjection() {\n    this._projection.setEngine(this.option(\"projection\"));\n  },\n  _setBounds: function _setBounds() {\n    this._projection.setBounds(this.option(\"bounds\"));\n  },\n  _setMaxZoom: function _setMaxZoom() {\n    this._projection.setMaxZoom(this.option(\"maxZoomFactor\"));\n  },\n  _setZoom: function _setZoom() {\n    this._projection.setZoom(this.option(\"zoomFactor\"));\n  },\n  _setCenter: function _setCenter() {\n    this._projection.setCenter(this.option(\"center\"));\n  },\n  _setBackgroundOptions: function _setBackgroundOptions() {\n    this._layerCollection.setBackgroundOptions(this._getOption(\"background\"));\n  },\n  _setLayerCollectionOptions: function _setLayerCollectionOptions() {\n    this._layerCollection.setOptions(this.option(\"layers\"));\n  },\n  _getBoundingBoxFromDataSource: function _getBoundingBoxFromDataSource() {\n    var that = this;\n\n    var layers = that._layerCollection.items();\n\n    var infinityBounds = [1 / 0, -(1 / 0), -(1 / 0), 1 / 0];\n    var resultBBox = layers && layers.length ? layers.reduce(function (sumBBox, l) {\n      var layerData = l.getData();\n      var itemCount = layerData.count();\n\n      if (itemCount > 0) {\n        var rootBBox = layerData.getBBox();\n\n        if (rootBBox) {\n          sumBBox = mergeBounds(sumBBox, rootBBox);\n        } else {\n          for (var i = 0; i < itemCount; i++) {\n            sumBBox = mergeBounds(sumBBox, layerData.getBBox(i));\n          }\n        }\n      }\n\n      return sumBBox;\n    }, infinityBounds) : void 0;\n    return resultBBox === infinityBounds ? void 0 : resultBBox;\n  },\n  _setControlBarOptions: function _setControlBarOptions() {\n    this._controlBar.setOptions(this._getOption(\"controlBar\"));\n  },\n  _setLegendsOptions: function _setLegendsOptions() {\n    this._legendsControl.setOptions(this.option(\"legends\"));\n  },\n  _setTrackerOptions: function _setTrackerOptions() {\n    this._tracker.setOptions({\n      touchEnabled: this._getOption(\"touchEnabled\", true),\n      wheelEnabled: this._getOption(\"wheelEnabled\", true)\n    });\n  },\n  getLayers: function getLayers() {\n    return this._layerCollection.items().map(function (l) {\n      return l.proxy;\n    });\n  },\n  getLayerByIndex: function getLayerByIndex(index) {\n    var layer = this._layerCollection.byIndex(index);\n\n    return layer ? layer.proxy : null;\n  },\n  getLayerByName: function getLayerByName(name) {\n    var layer = this._layerCollection.byName(name);\n\n    return layer ? layer.proxy : null;\n  },\n  clearSelection: function clearSelection(_noEvent) {\n    var layers = this._layerCollection.items();\n\n    var i;\n    var ii = layers.length;\n\n    for (i = 0; i < ii; ++i) {\n      layers[i].clearSelection(_noEvent);\n    }\n\n    return this;\n  },\n  center: function center(value) {\n    var that = this;\n\n    if (void 0 === value) {\n      return that._projection.getCenter();\n    } else {\n      that._projection.setCenter(value);\n\n      return that;\n    }\n  },\n  zoomFactor: function zoomFactor(value) {\n    var that = this;\n\n    if (void 0 === value) {\n      return that._projection.getZoom();\n    } else {\n      that._projection.setZoom(value);\n\n      return that;\n    }\n  },\n  viewport: function viewport(value) {\n    var that = this;\n\n    if (void 0 === value) {\n      return that._projection.getViewport();\n    } else {\n      that._projection.setViewport(value);\n\n      return that;\n    }\n  },\n  convertCoordinates: function convertCoordinates(coordinates) {\n    coordinates = coordinates && coordinates.length ? coordinates : [arguments[0], arguments[1]];\n    return this.convertToGeo(coordinates[0], coordinates[1]);\n  },\n  convertToGeo: function convertToGeo(x, y) {\n    return this._projection.fromScreenPoint([x, y]);\n  },\n  convertToXY: function convertToXY(longitude, latitude) {\n    return this._projection.toScreenPoint([longitude, latitude]);\n  }\n});\n\n(0, _component_registrator2.default)(\"dxVectorMap\", dxVectorMap);\nmodule.exports = dxVectorMap;\ndxVectorMap.addPlugin(_export.plugin);\ndxVectorMap.addPlugin(_title.plugin);\ndxVectorMap.addPlugin(_tooltip.plugin);\ndxVectorMap.addPlugin(_loading_indicator.plugin);","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/vector_map/vector_map.js"],"names":["_utils","require","_projection","_control_bar","_control_bar2","_interopRequireDefault","_gesture_handler","_gesture_handler2","_tracker","_tracker2","_data_exchanger","_data_exchanger2","_legend","_legend2","_layout","_layout2","_map_layer","_tooltip_viewer","_tooltip_viewer2","_base_widget","_base_widget2","_component_registrator","_component_registrator2","_export","_title","_tooltip","_loading_indicator","obj","DEFAULT_WIDTH","DEFAULT_HEIGHT","RE_STARTS_LAYERS","RE_ENDS_DATA_SOURCE","nextDataKey","dataBounds","Math","sumBounds","dxVectorMap","_eventsMap","onClick","name","onCenterChanged","onZoomFactorChanged","onHoverChanged","onSelectionChanged","_rootClassPrefix","_rootClass","_themeSection","_fontFields","_initLayerCollection","that","renderer","projection","themeManager","tracker","dataKey","eventTrigger","dataExchanger","tooltip","notifyDirty","notifyReady","dataReady","bounds","longitudeLength","latitudeLength","to","coordinates","from","_getBoundsFromData","boundsByData","l","_initLegendsControl","container","widget","layoutControl","_notifyReady","_initControlBar","_initElements","generateDataKey","notifyCounter","preventProjectionEvents","centerChanged","center","value","zoomChanged","zoomFactor","root","layerCollection","_layerCollection","_change_RESUME_LAYOUT","_initialChanges","_layoutChangesOrder","_initCore","align","cursor","_disposeCore","_setupInteraction","options","centeringEnabled","zoomingEnabled","_getDefaultSize","width","height","_applySize","layout","left","rect","top","right","bottom","_optionChanging","currentValue","nextValue","_applyChanges","_optionChangesMap","background","layers","controlBar","legends","touchEnabled","wheelEnabled","panningEnabled","maxZoomFactor","_optionChangesOrder","_change_PROJECTION","_change_BOUNDS","_change_MAX_ZOOM_FACTOR","_change_ZOOM_FACTOR","_change_CENTER","_change_BACKGROUND","_change_LAYERS","_change_CONTROL_BAR","_change_LEGENDS","_change_TRACKER","_change_INTERACTION","_themeDependentChanges","_setProjection","_setBounds","_setMaxZoom","_setZoom","_setCenter","_setBackgroundOptions","_setLayerCollectionOptions","_getBoundingBoxFromDataSource","infinityBounds","resultBBox","layerData","itemCount","rootBBox","sumBBox","mergeBounds","i","_setControlBarOptions","_setLegendsOptions","_setTrackerOptions","getLayers","getLayerByIndex","layer","getLayerByName","clearSelection","ii","viewport","convertCoordinates","arguments","convertToGeo","convertToXY","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/vector_map/vector_map.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _utils = require(\"../core/utils\");\r\nvar _projection = require(\"./projection.main\");\r\nvar _control_bar = require(\"./control_bar\");\r\nvar _control_bar2 = _interopRequireDefault(_control_bar);\r\nvar _gesture_handler = require(\"./gesture_handler\");\r\nvar _gesture_handler2 = _interopRequireDefault(_gesture_handler);\r\nvar _tracker = require(\"./tracker\");\r\nvar _tracker2 = _interopRequireDefault(_tracker);\r\nvar _data_exchanger = require(\"./data_exchanger\");\r\nvar _data_exchanger2 = _interopRequireDefault(_data_exchanger);\r\nvar _legend = require(\"./legend\");\r\nvar _legend2 = _interopRequireDefault(_legend);\r\nvar _layout = require(\"./layout\");\r\nvar _layout2 = _interopRequireDefault(_layout);\r\nvar _map_layer = require(\"./map_layer\");\r\nvar _tooltip_viewer = require(\"./tooltip_viewer\");\r\nvar _tooltip_viewer2 = _interopRequireDefault(_tooltip_viewer);\r\nrequire(\"./projection\");\r\nvar _base_widget = require(\"../core/base_widget\");\r\nvar _base_widget2 = _interopRequireDefault(_base_widget);\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _export = require(\"../core/export\");\r\nvar _title = require(\"../core/title\");\r\nvar _tooltip = require(\"../core/tooltip\");\r\nvar _loading_indicator = require(\"../core/loading_indicator\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DEFAULT_WIDTH = 800;\r\nvar DEFAULT_HEIGHT = 400;\r\nvar RE_STARTS_LAYERS = /^layers/;\r\nvar RE_ENDS_DATA_SOURCE = /\\.dataSource$/;\r\nvar nextDataKey = 1;\r\n\r\nfunction generateDataKey() {\r\n    return \"vectormap-data-\" + nextDataKey++\r\n}\r\n\r\nfunction mergeBounds(sumBounds, dataBounds) {\r\n    return dataBounds ? [Math.min(dataBounds[0], dataBounds[2], sumBounds[0]), Math.min(dataBounds[1], dataBounds[3], sumBounds[3]), Math.max(dataBounds[0], dataBounds[2], sumBounds[2]), Math.max(dataBounds[1], dataBounds[3], sumBounds[1])] : sumBounds\r\n}\r\nvar dxVectorMap = _base_widget2.default.inherit({\r\n    _eventsMap: {\r\n        onClick: {\r\n            name: \"click\"\r\n        },\r\n        onCenterChanged: {\r\n            name: \"centerChanged\"\r\n        },\r\n        onZoomFactorChanged: {\r\n            name: \"zoomFactorChanged\"\r\n        },\r\n        onHoverChanged: {\r\n            name: \"hoverChanged\"\r\n        },\r\n        onSelectionChanged: {\r\n            name: \"selectionChanged\"\r\n        }\r\n    },\r\n    _rootClassPrefix: \"dxm\",\r\n    _rootClass: \"dxm-vector-map\",\r\n    _themeSection: \"map\",\r\n    _fontFields: [\"layer:area.label.font\", \"layer:marker:dot.label.font\", \"layer:marker:bubble.label.font\", \"layer:marker:pie.label.font\", \"layer:marker:image.label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\r\n    _initLayerCollection: function(dataKey) {\r\n        var that = this;\r\n        that._layerCollection = new _map_layer.MapLayerCollection({\r\n            renderer: that._renderer,\r\n            projection: that._projection,\r\n            themeManager: that._themeManager,\r\n            tracker: that._tracker,\r\n            dataKey: dataKey,\r\n            eventTrigger: that._eventTrigger,\r\n            dataExchanger: that._dataExchanger,\r\n            tooltip: that._tooltip,\r\n            notifyDirty: that._notifyDirty,\r\n            notifyReady: that._notifyReady,\r\n            dataReady: function() {\r\n                var bounds;\r\n                if (that.option(\"getBoundsFromData\") && !that.option(\"bounds\")) {\r\n                    that._preventProjectionEvents();\r\n                    bounds = that._getBoundsFromData();\r\n                    that._projection.setBounds(bounds);\r\n                    that._allowProjectionEvents()\r\n                }\r\n                if (!that.option(\"projection\")) {\r\n                    bounds = bounds || that._getBoundsFromData();\r\n                    if (Math.ceil(bounds[0]) < -180 || Math.ceil(bounds[3]) < -90 || Math.floor(bounds[2]) > 180 || Math.floor(bounds[1]) > 90) {\r\n                        var longitudeLength = bounds[2] - bounds[0];\r\n                        var latitudeLength = bounds[1] - bounds[3];\r\n                        that._projection.setEngine({\r\n                            to: function(coordinates) {\r\n                                return [2 * (coordinates[0] - bounds[0]) / longitudeLength - 1, 2 * (coordinates[1] - bounds[3]) / latitudeLength - 1]\r\n                            },\r\n                            from: function(coordinates) {\r\n                                return [(coordinates[0] + 1) * longitudeLength / 2 + bounds[0], (coordinates[1] + 1) * latitudeLength / 2 + bounds[3]]\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getBoundsFromData: function() {\r\n        var bounds = this._getBoundingBoxFromDataSource();\r\n        if (!bounds) {\r\n            var boundsByData = (0, _map_layer.getMaxBound)(this.getLayers().map(function(l) {\r\n                return l.getBounds()\r\n            }));\r\n            if (boundsByData) {\r\n                bounds = boundsByData\r\n            }\r\n        }\r\n        bounds = bounds || [];\r\n        bounds = [bounds[0], bounds[3], bounds[2], bounds[1]];\r\n        return bounds\r\n    },\r\n    _initLegendsControl: function() {\r\n        var that = this;\r\n        that._legendsControl = new _legend2.default.LegendsControl({\r\n            renderer: that._renderer,\r\n            container: that._root,\r\n            widget: that,\r\n            layoutControl: that._layoutControl,\r\n            themeManager: that._themeManager,\r\n            dataExchanger: that._dataExchanger,\r\n            notifyDirty: that._notifyDirty,\r\n            notifyReady: that._notifyReady\r\n        })\r\n    },\r\n    _initControlBar: function(dataKey) {\r\n        var that = this;\r\n        that._controlBar = new _control_bar2.default.ControlBar({\r\n            renderer: that._renderer,\r\n            container: that._root,\r\n            layoutControl: that._layoutControl,\r\n            projection: that._projection,\r\n            tracker: that._tracker,\r\n            dataKey: dataKey\r\n        })\r\n    },\r\n    _initElements: function() {\r\n        var that = this;\r\n        var dataKey = generateDataKey();\r\n        var notifyCounter = 0;\r\n        var preventProjectionEvents;\r\n        that._preventProjectionEvents = function() {\r\n            preventProjectionEvents = true\r\n        };\r\n        that._allowProjectionEvents = function() {\r\n            preventProjectionEvents = false\r\n        };\r\n        that._notifyDirty = function() {\r\n            that._resetIsReady();\r\n            ++notifyCounter\r\n        };\r\n        that._notifyReady = function() {\r\n            that._allowProjectionEvents();\r\n            if (0 === --notifyCounter) {\r\n                that._drawn()\r\n            }\r\n        };\r\n        that._preventProjectionEvents();\r\n        that._dataExchanger = new _data_exchanger2.default.DataExchanger;\r\n        that._projection = new _projection.Projection({\r\n            centerChanged: function(value) {\r\n                if (!preventProjectionEvents) {\r\n                    that._eventTrigger(\"centerChanged\", {\r\n                        center: value\r\n                    })\r\n                }\r\n            },\r\n            zoomChanged: function(value) {\r\n                if (!preventProjectionEvents) {\r\n                    that._eventTrigger(\"zoomFactorChanged\", {\r\n                        zoomFactor: value\r\n                    })\r\n                }\r\n            }\r\n        });\r\n        that._tracker = new _tracker2.default.Tracker({\r\n            root: that._root,\r\n            projection: that._projection,\r\n            dataKey: dataKey\r\n        });\r\n        that._gestureHandler = new _gesture_handler2.default.GestureHandler({\r\n            projection: that._projection,\r\n            renderer: that._renderer,\r\n            tracker: that._tracker\r\n        });\r\n        that._layoutControl = new _layout2.default.LayoutControl;\r\n        that._layoutControl.suspend();\r\n        that._initLayerCollection(dataKey);\r\n        that._initControlBar(dataKey);\r\n        that._initLegendsControl();\r\n        that._tooltipViewer = new _tooltip_viewer2.default.TooltipViewer({\r\n            tracker: that._tracker,\r\n            tooltip: that._tooltip,\r\n            layerCollection: that._layerCollection\r\n        })\r\n    },\r\n    _change_RESUME_LAYOUT: function() {\r\n        this._layoutControl.resume()\r\n    },\r\n    _initialChanges: [\"PROJECTION\", \"RESUME_LAYOUT\", \"LAYOUT_INIT\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\"],\r\n    _layoutChangesOrder: [\"RESUME_LAYOUT\", \"LAYERS\"],\r\n    _initCore: function() {\r\n        this._root = this._renderer.root.attr({\r\n            align: \"center\",\r\n            cursor: \"default\"\r\n        });\r\n        this._initElements()\r\n    },\r\n    _disposeCore: function() {\r\n        var that = this;\r\n        that._controlBar.dispose();\r\n        that._gestureHandler.dispose();\r\n        that._tracker.dispose();\r\n        that._legendsControl.dispose();\r\n        that._layerCollection.dispose();\r\n        that._layoutControl.dispose();\r\n        that._tooltipViewer.dispose();\r\n        that._dataExchanger.dispose();\r\n        that._projection.dispose();\r\n        that._dataExchanger = that._gestureHandler = that._projection = that._tracker = that._layoutControl = that._root = that._layerCollection = that._controlBar = that._legendsControl = null\r\n    },\r\n    _setupInteraction: function() {\r\n        var options = {\r\n            centeringEnabled: !!(0, _utils.parseScalar)(this._getOption(\"panningEnabled\", true), true),\r\n            zoomingEnabled: !!(0, _utils.parseScalar)(this._getOption(\"zoomingEnabled\", true), true)\r\n        };\r\n        this._gestureHandler.setInteraction(options);\r\n        this._controlBar.setInteraction(options)\r\n    },\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: DEFAULT_WIDTH,\r\n            height: DEFAULT_HEIGHT\r\n        }\r\n    },\r\n    _applySize: function(rect) {\r\n        var layout = {\r\n            left: rect[0],\r\n            top: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1],\r\n            right: 0,\r\n            bottom: 0\r\n        };\r\n        this._projection.setSize(layout);\r\n        this._layoutControl.setSize(layout);\r\n        this._layerCollection.setRect([layout.left, layout.top, layout.width, layout.height])\r\n    },\r\n    _optionChanging: function(name, currentValue, nextValue) {\r\n        if (currentValue && nextValue) {\r\n            if (RE_STARTS_LAYERS.test(name)) {\r\n                if (currentValue.dataSource && nextValue.dataSource && currentValue !== nextValue) {\r\n                    currentValue.dataSource = null\r\n                } else {\r\n                    if (RE_ENDS_DATA_SOURCE.test(name)) {\r\n                        this.option(name, null)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _applyChanges: function() {\r\n        this._notifyDirty();\r\n        this.callBase.apply(this, arguments);\r\n        this._notifyReady()\r\n    },\r\n    _optionChangesMap: {\r\n        background: \"BACKGROUND\",\r\n        layers: \"LAYERS\",\r\n        controlBar: \"CONTROL_BAR\",\r\n        legends: \"LEGENDS\",\r\n        touchEnabled: \"TRACKER\",\r\n        wheelEnabled: \"TRACKER\",\r\n        panningEnabled: \"INTERACTION\",\r\n        zoomingEnabled: \"INTERACTION\",\r\n        projection: \"PROJECTION\",\r\n        bounds: \"BOUNDS\",\r\n        maxZoomFactor: \"MAX_ZOOM_FACTOR\",\r\n        zoomFactor: \"ZOOM_FACTOR\",\r\n        center: \"CENTER\"\r\n    },\r\n    _optionChangesOrder: [\"PROJECTION\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\", \"BACKGROUND\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\r\n    _change_PROJECTION: function() {\r\n        this._setProjection()\r\n    },\r\n    _change_BOUNDS: function() {\r\n        this._setBounds()\r\n    },\r\n    _change_MAX_ZOOM_FACTOR: function() {\r\n        this._setMaxZoom()\r\n    },\r\n    _change_ZOOM_FACTOR: function() {\r\n        this._setZoom()\r\n    },\r\n    _change_CENTER: function() {\r\n        this._setCenter()\r\n    },\r\n    _change_BACKGROUND: function() {\r\n        this._setBackgroundOptions()\r\n    },\r\n    _change_LAYERS: function() {\r\n        this._setLayerCollectionOptions()\r\n    },\r\n    _change_CONTROL_BAR: function() {\r\n        this._setControlBarOptions()\r\n    },\r\n    _change_LEGENDS: function() {\r\n        this._setLegendsOptions()\r\n    },\r\n    _change_TRACKER: function() {\r\n        this._setTrackerOptions()\r\n    },\r\n    _change_INTERACTION: function() {\r\n        this._setupInteraction()\r\n    },\r\n    _themeDependentChanges: [\"BACKGROUND\", \"LAYERS\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\r\n    _setProjection: function() {\r\n        this._projection.setEngine(this.option(\"projection\"))\r\n    },\r\n    _setBounds: function() {\r\n        this._projection.setBounds(this.option(\"bounds\"))\r\n    },\r\n    _setMaxZoom: function() {\r\n        this._projection.setMaxZoom(this.option(\"maxZoomFactor\"))\r\n    },\r\n    _setZoom: function() {\r\n        this._projection.setZoom(this.option(\"zoomFactor\"))\r\n    },\r\n    _setCenter: function() {\r\n        this._projection.setCenter(this.option(\"center\"))\r\n    },\r\n    _setBackgroundOptions: function() {\r\n        this._layerCollection.setBackgroundOptions(this._getOption(\"background\"))\r\n    },\r\n    _setLayerCollectionOptions: function() {\r\n        this._layerCollection.setOptions(this.option(\"layers\"))\r\n    },\r\n    _getBoundingBoxFromDataSource: function() {\r\n        var that = this;\r\n        var layers = that._layerCollection.items();\r\n        var infinityBounds = [1 / 0, -(1 / 0), -(1 / 0), 1 / 0];\r\n        var resultBBox = layers && layers.length ? layers.reduce(function(sumBBox, l) {\r\n            var layerData = l.getData();\r\n            var itemCount = layerData.count();\r\n            if (itemCount > 0) {\r\n                var rootBBox = layerData.getBBox();\r\n                if (rootBBox) {\r\n                    sumBBox = mergeBounds(sumBBox, rootBBox)\r\n                } else {\r\n                    for (var i = 0; i < itemCount; i++) {\r\n                        sumBBox = mergeBounds(sumBBox, layerData.getBBox(i))\r\n                    }\r\n                }\r\n            }\r\n            return sumBBox\r\n        }, infinityBounds) : void 0;\r\n        return resultBBox === infinityBounds ? void 0 : resultBBox\r\n    },\r\n    _setControlBarOptions: function() {\r\n        this._controlBar.setOptions(this._getOption(\"controlBar\"))\r\n    },\r\n    _setLegendsOptions: function() {\r\n        this._legendsControl.setOptions(this.option(\"legends\"))\r\n    },\r\n    _setTrackerOptions: function() {\r\n        this._tracker.setOptions({\r\n            touchEnabled: this._getOption(\"touchEnabled\", true),\r\n            wheelEnabled: this._getOption(\"wheelEnabled\", true)\r\n        })\r\n    },\r\n    getLayers: function() {\r\n        return this._layerCollection.items().map(function(l) {\r\n            return l.proxy\r\n        })\r\n    },\r\n    getLayerByIndex: function(index) {\r\n        var layer = this._layerCollection.byIndex(index);\r\n        return layer ? layer.proxy : null\r\n    },\r\n    getLayerByName: function(name) {\r\n        var layer = this._layerCollection.byName(name);\r\n        return layer ? layer.proxy : null\r\n    },\r\n    clearSelection: function(_noEvent) {\r\n        var layers = this._layerCollection.items();\r\n        var i;\r\n        var ii = layers.length;\r\n        for (i = 0; i < ii; ++i) {\r\n            layers[i].clearSelection(_noEvent)\r\n        }\r\n        return this\r\n    },\r\n    center: function(value) {\r\n        var that = this;\r\n        if (void 0 === value) {\r\n            return that._projection.getCenter()\r\n        } else {\r\n            that._projection.setCenter(value);\r\n            return that\r\n        }\r\n    },\r\n    zoomFactor: function(value) {\r\n        var that = this;\r\n        if (void 0 === value) {\r\n            return that._projection.getZoom()\r\n        } else {\r\n            that._projection.setZoom(value);\r\n            return that\r\n        }\r\n    },\r\n    viewport: function(value) {\r\n        var that = this;\r\n        if (void 0 === value) {\r\n            return that._projection.getViewport()\r\n        } else {\r\n            that._projection.setViewport(value);\r\n            return that\r\n        }\r\n    },\r\n    convertCoordinates: function(coordinates) {\r\n        coordinates = coordinates && coordinates.length ? coordinates : [arguments[0], arguments[1]];\r\n        return this.convertToGeo(coordinates[0], coordinates[1])\r\n    },\r\n    convertToGeo: function(x, y) {\r\n        return this._projection.fromScreenPoint([x, y])\r\n    },\r\n    convertToXY: function(longitude, latitude) {\r\n        return this._projection.toScreenPoint([longitude, latitude])\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxVectorMap\", dxVectorMap);\r\nmodule.exports = dxVectorMap;\r\ndxVectorMap.addPlugin(_export.plugin);\r\ndxVectorMap.addPlugin(_title.plugin);\r\ndxVectorMap.addPlugin(_tooltip.plugin);\r\ndxVectorMap.addPlugin(_loading_indicator.plugin);\r\n"]},"metadata":{},"sourceType":"module"}