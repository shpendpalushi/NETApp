{"ast":null,"code":"/**\r\n * DevExtreme (viz/tree_map/api.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar proto = require(\"./tree_map.base\").prototype;\n\nvar nodeProto = require(\"./node\").prototype;\n\nvar _extend = require(\"../../core/utils/extend\").extend;\n\nproto._eventsMap.onNodesInitialized = {\n  name: \"nodesInitialized\"\n};\nproto._eventsMap.onNodesRendering = {\n  name: \"nodesRendering\"\n};\n\nproto._createProxyType = function () {\n  var that = this;\n  var nodes;\n  Proxy.prototype = {\n    constructor: Proxy,\n    getParent: function getParent() {\n      return nodes[this._id].parent.proxy || null;\n    },\n    getChild: function getChild(index) {\n      var _nodes = nodes[this._id].nodes;\n      return _nodes ? _nodes[index].proxy : null;\n    },\n    getChildrenCount: function getChildrenCount() {\n      var _nodes = nodes[this._id].nodes;\n      return _nodes ? _nodes.length : 0;\n    },\n    getAllChildren: function getAllChildren() {\n      var _nodes = nodes[this._id].nodes;\n      var i;\n      var ii = _nodes && _nodes.length;\n      var list = [];\n\n      for (i = 0; i < ii; ++i) {\n        list.push(_nodes[i].proxy);\n      }\n\n      return list;\n    },\n    getAllNodes: function getAllNodes() {\n      var list = [];\n      collectNodes(nodes[this._id], list);\n      return list;\n    },\n    isLeaf: function isLeaf() {\n      return !nodes[this._id].isNode();\n    },\n    isActive: function isActive() {\n      return nodes[this._id].isActive();\n    },\n    value: function value(arg) {\n      var node = nodes[this._id];\n      var result;\n\n      if (void 0 !== arg) {\n        updateValue(node, arg > 0 ? Number(arg) : 0);\n        change(node, [\"TILING\"]);\n        result = this;\n      } else {\n        result = node.value;\n      }\n\n      return result;\n    },\n    label: function label(arg) {\n      var node = nodes[this._id];\n      var result;\n\n      if (void 0 !== arg) {\n        node.customLabel = arg ? String(arg) : null;\n        change(node, [\"LABELS\"]);\n        result = this;\n      } else {\n        result = node.customLabel || node.label;\n      }\n\n      return result;\n    },\n    customize: function customize(settings) {\n      var node = nodes[this._id];\n\n      if (settings) {\n        node._custom = node._custom || {};\n\n        _extend(true, node._custom, settings);\n\n        node._partialState = node._partialLabelState = null;\n      }\n\n      change(node, [\"TILES\", \"LABELS\"]);\n      return this;\n    },\n    resetCustomization: function resetCustomization() {\n      var node = nodes[this._id];\n      node._custom = node._partialState = node._partialLabelState = null;\n      change(node, [\"TILES\", \"LABELS\"]);\n      return this;\n    }\n  };\n\n  that._extendProxyType(Proxy.prototype);\n\n  function Proxy(node) {\n    var that = this;\n    node.proxy = that;\n    that._id = node._id;\n    that.level = node.level;\n    that.index = node.index;\n    that.data = node.data;\n  }\n\n  that._handlers.beginBuildNodes = function () {\n    nodes = that._nodes;\n    new Proxy(that._root);\n  };\n\n  that._handlers.buildNode = function (node) {\n    new Proxy(node);\n  };\n\n  that._handlers.endBuildNodes = function () {\n    that._eventTrigger(\"nodesInitialized\", {\n      root: that._root.proxy\n    });\n  };\n};\n\nfunction change(node, codes) {\n  var ctx = node.ctx;\n  ctx.suspend();\n  ctx.change(codes);\n  ctx.resume();\n}\n\nfunction collectNodes(node, list) {\n  var nodes = node.nodes;\n  var i;\n  var ii = nodes && nodes.length;\n\n  for (i = 0; i < ii; ++i) {\n    list.push(nodes[i].proxy);\n    collectNodes(nodes[i], list);\n  }\n}\n\nfunction updateValue(node, value) {\n  var delta = value - node.value;\n\n  while (node) {\n    node.value += delta;\n    node = node.parent;\n  }\n}\n\nproto._extendProxyType = require(\"../../core/utils/common\").noop;\nvar _resetNodes = proto._resetNodes;\n\nproto._resetNodes = function () {\n  _resetNodes.call(this);\n\n  this._eventTrigger(\"nodesRendering\", {\n    node: this._topNode.proxy\n  });\n};\n\nvar _updateStyles = nodeProto.updateStyles;\n\nnodeProto.updateStyles = function () {\n  var that = this;\n\n  _updateStyles.call(that);\n\n  if (that._custom) {\n    that._partialState = !that.ctx.forceReset && that._partialState || that.ctx.calculateState(that._custom);\n\n    _extend(true, that.state, that._partialState);\n  }\n};\n\nvar _updateLabelStyle = nodeProto.updateLabelStyle;\n\nnodeProto.updateLabelStyle = function () {\n  var that = this;\n  var custom = that._custom;\n\n  _updateLabelStyle.call(that);\n\n  if (custom && custom.label) {\n    that._partialLabelState = !that.ctx.forceReset && that._partialLabelState || calculatePartialLabelState(that, custom.label);\n    that.labelState = _extend(true, {}, that.labelState, that._partialLabelState);\n  }\n};\n\nfunction calculatePartialLabelState(node, settings) {\n  var state = node.ctx.calculateLabelState(settings);\n\n  if (\"visible\" in settings) {\n    state.visible = !!settings.visible;\n  }\n\n  return state;\n}\n\nproto.getRootNode = function () {\n  return this._root.proxy;\n};\n\nproto.resetNodes = function () {\n  var context = this._context;\n  context.suspend();\n  context.change([\"NODES_CREATE\"]);\n  context.resume();\n  return this;\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/tree_map/api.js"],"names":["proto","require","nodeProto","_extend","name","that","Proxy","constructor","getParent","nodes","getChild","_nodes","getChildrenCount","getAllChildren","ii","list","i","getAllNodes","collectNodes","isLeaf","isActive","value","node","updateValue","arg","Number","change","result","label","String","customize","resetCustomization","root","proxy","ctx","delta","_resetNodes","_updateStyles","_updateLabelStyle","custom","calculatePartialLabelState","state","settings","context"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/tree_map/api.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar proto = require(\"./tree_map.base\").prototype;\r\nvar nodeProto = require(\"./node\").prototype;\r\nvar _extend = require(\"../../core/utils/extend\").extend;\r\nproto._eventsMap.onNodesInitialized = {\r\n    name: \"nodesInitialized\"\r\n};\r\nproto._eventsMap.onNodesRendering = {\r\n    name: \"nodesRendering\"\r\n};\r\nproto._createProxyType = function() {\r\n    var that = this;\r\n    var nodes;\r\n    Proxy.prototype = {\r\n        constructor: Proxy,\r\n        getParent: function() {\r\n            return nodes[this._id].parent.proxy || null\r\n        },\r\n        getChild: function(index) {\r\n            var _nodes = nodes[this._id].nodes;\r\n            return _nodes ? _nodes[index].proxy : null\r\n        },\r\n        getChildrenCount: function() {\r\n            var _nodes = nodes[this._id].nodes;\r\n            return _nodes ? _nodes.length : 0\r\n        },\r\n        getAllChildren: function() {\r\n            var _nodes = nodes[this._id].nodes;\r\n            var i;\r\n            var ii = _nodes && _nodes.length;\r\n            var list = [];\r\n            for (i = 0; i < ii; ++i) {\r\n                list.push(_nodes[i].proxy)\r\n            }\r\n            return list\r\n        },\r\n        getAllNodes: function() {\r\n            var list = [];\r\n            collectNodes(nodes[this._id], list);\r\n            return list\r\n        },\r\n        isLeaf: function() {\r\n            return !nodes[this._id].isNode()\r\n        },\r\n        isActive: function() {\r\n            return nodes[this._id].isActive()\r\n        },\r\n        value: function(arg) {\r\n            var node = nodes[this._id];\r\n            var result;\r\n            if (void 0 !== arg) {\r\n                updateValue(node, arg > 0 ? Number(arg) : 0);\r\n                change(node, [\"TILING\"]);\r\n                result = this\r\n            } else {\r\n                result = node.value\r\n            }\r\n            return result\r\n        },\r\n        label: function(arg) {\r\n            var node = nodes[this._id];\r\n            var result;\r\n            if (void 0 !== arg) {\r\n                node.customLabel = arg ? String(arg) : null;\r\n                change(node, [\"LABELS\"]);\r\n                result = this\r\n            } else {\r\n                result = node.customLabel || node.label\r\n            }\r\n            return result\r\n        },\r\n        customize: function(settings) {\r\n            var node = nodes[this._id];\r\n            if (settings) {\r\n                node._custom = node._custom || {};\r\n                _extend(true, node._custom, settings);\r\n                node._partialState = node._partialLabelState = null\r\n            }\r\n            change(node, [\"TILES\", \"LABELS\"]);\r\n            return this\r\n        },\r\n        resetCustomization: function() {\r\n            var node = nodes[this._id];\r\n            node._custom = node._partialState = node._partialLabelState = null;\r\n            change(node, [\"TILES\", \"LABELS\"]);\r\n            return this\r\n        }\r\n    };\r\n    that._extendProxyType(Proxy.prototype);\r\n\r\n    function Proxy(node) {\r\n        var that = this;\r\n        node.proxy = that;\r\n        that._id = node._id;\r\n        that.level = node.level;\r\n        that.index = node.index;\r\n        that.data = node.data\r\n    }\r\n    that._handlers.beginBuildNodes = function() {\r\n        nodes = that._nodes;\r\n        new Proxy(that._root)\r\n    };\r\n    that._handlers.buildNode = function(node) {\r\n        new Proxy(node)\r\n    };\r\n    that._handlers.endBuildNodes = function() {\r\n        that._eventTrigger(\"nodesInitialized\", {\r\n            root: that._root.proxy\r\n        })\r\n    }\r\n};\r\n\r\nfunction change(node, codes) {\r\n    var ctx = node.ctx;\r\n    ctx.suspend();\r\n    ctx.change(codes);\r\n    ctx.resume()\r\n}\r\n\r\nfunction collectNodes(node, list) {\r\n    var nodes = node.nodes;\r\n    var i;\r\n    var ii = nodes && nodes.length;\r\n    for (i = 0; i < ii; ++i) {\r\n        list.push(nodes[i].proxy);\r\n        collectNodes(nodes[i], list)\r\n    }\r\n}\r\n\r\nfunction updateValue(node, value) {\r\n    var delta = value - node.value;\r\n    while (node) {\r\n        node.value += delta;\r\n        node = node.parent\r\n    }\r\n}\r\nproto._extendProxyType = require(\"../../core/utils/common\").noop;\r\nvar _resetNodes = proto._resetNodes;\r\nproto._resetNodes = function() {\r\n    _resetNodes.call(this);\r\n    this._eventTrigger(\"nodesRendering\", {\r\n        node: this._topNode.proxy\r\n    })\r\n};\r\nvar _updateStyles = nodeProto.updateStyles;\r\nnodeProto.updateStyles = function() {\r\n    var that = this;\r\n    _updateStyles.call(that);\r\n    if (that._custom) {\r\n        that._partialState = !that.ctx.forceReset && that._partialState || that.ctx.calculateState(that._custom);\r\n        _extend(true, that.state, that._partialState)\r\n    }\r\n};\r\nvar _updateLabelStyle = nodeProto.updateLabelStyle;\r\nnodeProto.updateLabelStyle = function() {\r\n    var that = this;\r\n    var custom = that._custom;\r\n    _updateLabelStyle.call(that);\r\n    if (custom && custom.label) {\r\n        that._partialLabelState = !that.ctx.forceReset && that._partialLabelState || calculatePartialLabelState(that, custom.label);\r\n        that.labelState = _extend(true, {}, that.labelState, that._partialLabelState)\r\n    }\r\n};\r\n\r\nfunction calculatePartialLabelState(node, settings) {\r\n    var state = node.ctx.calculateLabelState(settings);\r\n    if (\"visible\" in settings) {\r\n        state.visible = !!settings.visible\r\n    }\r\n    return state\r\n}\r\nproto.getRootNode = function() {\r\n    return this._root.proxy\r\n};\r\nproto.resetNodes = function() {\r\n    var context = this._context;\r\n    context.suspend();\r\n    context.change([\"NODES_CREATE\"]);\r\n    context.resume();\r\n    return this\r\n};\r\n"]},"metadata":{},"sourceType":"module"}