{"ast":null,"code":"/**\r\n * DevExtreme (viz/range_selector/series_data_source.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar seriesModule = require(\"../series/base_series\");\n\nvar seriesFamilyModule = require(\"../core/series_family\");\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar inArray = require(\"../../core/utils/array\").inArray;\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar rangeModule = require(\"../translators/range\");\n\nvar dataValidatorModule = require(\"../components/data_validator\");\n\nvar ChartThemeManager = require(\"../components/chart_theme_manager\").ThemeManager;\n\nvar SeriesDataSource;\n\nvar createThemeManager = function createThemeManager(chartOptions) {\n  return new ChartThemeManager({\n    options: chartOptions,\n    themeSection: \"rangeSelector.chart\",\n    fontFields: [\"commonSeriesSettings.label.font\"]\n  });\n};\n\nvar processSeriesFamilies = function processSeriesFamilies(series, equalBarWidth, minBubbleSize, maxBubbleSize, barOptions, negativesAsZeroes) {\n  var families = [];\n  var types = [];\n  each(series, function (i, item) {\n    if (inArray(item.type, types) === -1) {\n      types.push(item.type);\n    }\n  });\n  each(types, function (_, type) {\n    var family = new seriesFamilyModule.SeriesFamily({\n      type: type,\n      equalBarWidth: equalBarWidth,\n      minBubbleSize: minBubbleSize,\n      maxBubbleSize: maxBubbleSize,\n      barWidth: barOptions.barWidth,\n      barGroupPadding: barOptions.barGroupPadding,\n      barGroupWidth: barOptions.barGroupWidth,\n      negativesAsZeroes: negativesAsZeroes\n    });\n    family.add(series);\n    family.adjustSeriesValues();\n    families.push(family);\n  });\n  return families;\n};\n\nSeriesDataSource = function SeriesDataSource(options) {\n  var that = this;\n  var themeManager = that._themeManager = createThemeManager(options.chart);\n  var topIndent;\n  var bottomIndent;\n  themeManager.setTheme(options.chart.theme);\n  topIndent = themeManager.getOptions(\"topIndent\");\n  bottomIndent = themeManager.getOptions(\"bottomIndent\");\n  that._indent = {\n    top: topIndent >= 0 && topIndent < 1 ? topIndent : 0,\n    bottom: bottomIndent >= 0 && bottomIndent < 1 ? bottomIndent : 0\n  };\n  that._valueAxis = themeManager.getOptions(\"valueAxisRangeSelector\") || {};\n  that._hideChart = false;\n  that._series = that._calculateSeries(options);\n  that._seriesFamilies = [];\n};\n\nSeriesDataSource.prototype = {\n  constructor: SeriesDataSource,\n  _calculateSeries: function _calculateSeries(options) {\n    var that = this;\n    var series = [];\n    var particularSeriesOptions;\n    var seriesTheme;\n    var data = options.dataSource || [];\n    var parsedData;\n    var chartThemeManager = that._themeManager;\n    var seriesTemplate = chartThemeManager.getOptions(\"seriesTemplate\");\n    var allSeriesOptions = seriesTemplate ? vizUtils.processSeriesTemplate(seriesTemplate, data) : options.chart.series;\n    var dataSourceField;\n    var valueAxis = that._valueAxis;\n    var i;\n    var newSeries;\n    var groupsData;\n\n    if (options.dataSource && !allSeriesOptions) {\n      dataSourceField = options.dataSourceField || \"arg\";\n      allSeriesOptions = {\n        argumentField: dataSourceField,\n        valueField: dataSourceField\n      };\n      that._hideChart = true;\n    }\n\n    allSeriesOptions = Array.isArray(allSeriesOptions) ? allSeriesOptions : allSeriesOptions ? [allSeriesOptions] : [];\n\n    for (i = 0; i < allSeriesOptions.length; i++) {\n      particularSeriesOptions = extend(true, {}, allSeriesOptions[i]);\n      particularSeriesOptions.rotated = false;\n      seriesTheme = chartThemeManager.getOptions(\"series\", particularSeriesOptions, allSeriesOptions.length);\n      seriesTheme.argumentField = seriesTheme.argumentField || options.dataSourceField;\n\n      if (!seriesTheme.name) {\n        seriesTheme.name = \"Series \" + (i + 1).toString();\n      }\n\n      if (data && data.length > 0) {\n        newSeries = new seriesModule.Series({\n          renderer: options.renderer,\n          argumentAxis: options.argumentAxis,\n          valueAxis: options.valueAxis,\n          incidentOccurred: options.incidentOccurred\n        }, seriesTheme);\n        series.push(newSeries);\n      }\n    }\n\n    if (series.length) {\n      groupsData = {\n        groups: [{\n          series: series,\n          valueAxis: options.valueAxis,\n          valueOptions: {\n            type: valueAxis.type,\n            valueType: dataSourceField ? options.valueType : valueAxis.valueType\n          }\n        }],\n        argumentOptions: {\n          categories: options.categories,\n          argumentType: options.valueType,\n          type: options.axisType\n        }\n      };\n      parsedData = dataValidatorModule.validateData(data, groupsData, options.incidentOccurred, chartThemeManager.getOptions(\"dataPrepareSettings\"));\n      that.argCategories = groupsData.categories;\n\n      for (i = 0; i < series.length; i++) {\n        series[i].updateData(parsedData[series[i].getArgumentField()]);\n      }\n    }\n\n    return series;\n  },\n  createPoints: function createPoints() {\n    if (0 === this._series.length) {\n      return;\n    }\n\n    var series = this._series;\n    var viewport = new rangeModule.Range();\n    var axis = series[0].getArgumentAxis();\n    var themeManager = this._themeManager;\n    var negativesAsZeroes = themeManager.getOptions(\"negativesAsZeroes\");\n    var negativesAsZeros = themeManager.getOptions(\"negativesAsZeros\");\n    series.forEach(function (s) {\n      viewport.addRange(s.getArgumentRange());\n    });\n    axis.getTranslator().updateBusinessRange(viewport);\n    series.forEach(function (s) {\n      s.createPoints();\n    });\n    this._seriesFamilies = processSeriesFamilies(series, themeManager.getOptions(\"equalBarWidth\"), themeManager.getOptions(\"minBubbleSize\"), themeManager.getOptions(\"maxBubbleSize\"), {\n      barWidth: themeManager.getOptions(\"barWidth\"),\n      barGroupPadding: themeManager.getOptions(\"barGroupPadding\"),\n      barGroupWidth: themeManager.getOptions(\"barGroupWidth\")\n    }, typeUtils.isDefined(negativesAsZeroes) ? negativesAsZeroes : negativesAsZeros);\n  },\n  adjustSeriesDimensions: function adjustSeriesDimensions() {\n    each(this._seriesFamilies, function (_, family) {\n      family.adjustSeriesDimensions();\n    });\n  },\n  getBoundRange: function getBoundRange() {\n    var that = this;\n    var rangeData;\n    var valueAxis = that._valueAxis;\n    var valRange = new rangeModule.Range({\n      min: valueAxis.min,\n      minVisible: valueAxis.min,\n      max: valueAxis.max,\n      maxVisible: valueAxis.max,\n      axisType: valueAxis.type,\n      base: valueAxis.logarithmBase\n    });\n    var argRange = new rangeModule.Range({});\n    var rangeYSize;\n    var rangeVisibleSizeY;\n    var minIndent;\n    var maxIndent;\n    each(that._series, function (_, series) {\n      rangeData = series.getRangeData();\n      valRange.addRange(rangeData.val);\n      argRange.addRange(rangeData.arg);\n    });\n\n    if (!valRange.isEmpty() && !argRange.isEmpty()) {\n      minIndent = valueAxis.inverted ? that._indent.top : that._indent.bottom;\n      maxIndent = valueAxis.inverted ? that._indent.bottom : that._indent.top;\n      rangeYSize = valRange.max - valRange.min;\n      rangeVisibleSizeY = (typeUtils.isNumeric(valRange.maxVisible) ? valRange.maxVisible : valRange.max) - (typeUtils.isNumeric(valRange.minVisible) ? valRange.minVisible : valRange.min);\n\n      if (typeUtils.isDate(valRange.min)) {\n        valRange.min = new Date(valRange.min.valueOf() - rangeYSize * minIndent);\n      } else {\n        valRange.min -= rangeYSize * minIndent;\n      }\n\n      if (typeUtils.isDate(valRange.max)) {\n        valRange.max = new Date(valRange.max.valueOf() + rangeYSize * maxIndent);\n      } else {\n        valRange.max += rangeYSize * maxIndent;\n      }\n\n      if (typeUtils.isNumeric(rangeVisibleSizeY)) {\n        valRange.maxVisible = valRange.maxVisible ? valRange.maxVisible + rangeVisibleSizeY * maxIndent : void 0;\n        valRange.minVisible = valRange.minVisible ? valRange.minVisible - rangeVisibleSizeY * minIndent : void 0;\n      }\n\n      valRange.invert = valueAxis.inverted;\n    }\n\n    return {\n      arg: argRange,\n      val: valRange\n    };\n  },\n  getMarginOptions: function getMarginOptions(canvas) {\n    var bubbleSize = Math.min(canvas.width, canvas.height) * this._themeManager.getOptions(\"maxBubbleSize\");\n\n    return this._series.reduce(function (marginOptions, series) {\n      var seriesOptions = series.getMarginOptions();\n\n      if (true === seriesOptions.processBubbleSize) {\n        seriesOptions.size = bubbleSize;\n      }\n\n      return vizUtils.mergeMarginOptions(marginOptions, seriesOptions);\n    }, {});\n  },\n  getSeries: function getSeries() {\n    return this._series;\n  },\n  isEmpty: function isEmpty() {\n    return 0 === this.getSeries().length;\n  },\n  isShowChart: function isShowChart() {\n    return !this._hideChart;\n  },\n  getCalculatedValueType: function getCalculatedValueType() {\n    var series = this._series[0];\n    return series && series.argumentType;\n  },\n  getThemeManager: function getThemeManager() {\n    return this._themeManager;\n  }\n};\nexports.SeriesDataSource = SeriesDataSource;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/range_selector/series_data_source.js"],"names":["seriesModule","require","seriesFamilyModule","typeUtils","extend","inArray","each","vizUtils","rangeModule","dataValidatorModule","ChartThemeManager","createThemeManager","options","themeSection","fontFields","processSeriesFamilies","families","types","item","family","type","equalBarWidth","minBubbleSize","maxBubbleSize","barWidth","barOptions","barGroupPadding","barGroupWidth","negativesAsZeroes","SeriesDataSource","that","themeManager","topIndent","bottomIndent","top","bottom","constructor","_calculateSeries","series","data","chartThemeManager","seriesTemplate","allSeriesOptions","valueAxis","dataSourceField","argumentField","valueField","Array","i","particularSeriesOptions","seriesTheme","newSeries","renderer","argumentAxis","incidentOccurred","groupsData","groups","valueOptions","valueType","argumentOptions","categories","argumentType","axisType","parsedData","createPoints","viewport","axis","negativesAsZeros","s","adjustSeriesDimensions","getBoundRange","valRange","min","minVisible","max","maxVisible","base","logarithmBase","argRange","rangeData","minIndent","maxIndent","rangeYSize","rangeVisibleSizeY","arg","val","getMarginOptions","bubbleSize","Math","canvas","seriesOptions","getSeries","isEmpty","isShowChart","getCalculatedValueType","getThemeManager","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/range_selector/series_data_source.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar seriesModule = require(\"../series/base_series\");\r\nvar seriesFamilyModule = require(\"../core/series_family\");\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar inArray = require(\"../../core/utils/array\").inArray;\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar rangeModule = require(\"../translators/range\");\r\nvar dataValidatorModule = require(\"../components/data_validator\");\r\nvar ChartThemeManager = require(\"../components/chart_theme_manager\").ThemeManager;\r\nvar SeriesDataSource;\r\nvar createThemeManager = function(chartOptions) {\r\n    return new ChartThemeManager({\r\n        options: chartOptions,\r\n        themeSection: \"rangeSelector.chart\",\r\n        fontFields: [\"commonSeriesSettings.label.font\"]\r\n    })\r\n};\r\nvar processSeriesFamilies = function(series, equalBarWidth, minBubbleSize, maxBubbleSize, barOptions, negativesAsZeroes) {\r\n    var families = [];\r\n    var types = [];\r\n    each(series, function(i, item) {\r\n        if (inArray(item.type, types) === -1) {\r\n            types.push(item.type)\r\n        }\r\n    });\r\n    each(types, function(_, type) {\r\n        var family = new seriesFamilyModule.SeriesFamily({\r\n            type: type,\r\n            equalBarWidth: equalBarWidth,\r\n            minBubbleSize: minBubbleSize,\r\n            maxBubbleSize: maxBubbleSize,\r\n            barWidth: barOptions.barWidth,\r\n            barGroupPadding: barOptions.barGroupPadding,\r\n            barGroupWidth: barOptions.barGroupWidth,\r\n            negativesAsZeroes: negativesAsZeroes\r\n        });\r\n        family.add(series);\r\n        family.adjustSeriesValues();\r\n        families.push(family)\r\n    });\r\n    return families\r\n};\r\nSeriesDataSource = function(options) {\r\n    var that = this;\r\n    var themeManager = that._themeManager = createThemeManager(options.chart);\r\n    var topIndent;\r\n    var bottomIndent;\r\n    themeManager.setTheme(options.chart.theme);\r\n    topIndent = themeManager.getOptions(\"topIndent\");\r\n    bottomIndent = themeManager.getOptions(\"bottomIndent\");\r\n    that._indent = {\r\n        top: topIndent >= 0 && topIndent < 1 ? topIndent : 0,\r\n        bottom: bottomIndent >= 0 && bottomIndent < 1 ? bottomIndent : 0\r\n    };\r\n    that._valueAxis = themeManager.getOptions(\"valueAxisRangeSelector\") || {};\r\n    that._hideChart = false;\r\n    that._series = that._calculateSeries(options);\r\n    that._seriesFamilies = []\r\n};\r\nSeriesDataSource.prototype = {\r\n    constructor: SeriesDataSource,\r\n    _calculateSeries: function(options) {\r\n        var that = this;\r\n        var series = [];\r\n        var particularSeriesOptions;\r\n        var seriesTheme;\r\n        var data = options.dataSource || [];\r\n        var parsedData;\r\n        var chartThemeManager = that._themeManager;\r\n        var seriesTemplate = chartThemeManager.getOptions(\"seriesTemplate\");\r\n        var allSeriesOptions = seriesTemplate ? vizUtils.processSeriesTemplate(seriesTemplate, data) : options.chart.series;\r\n        var dataSourceField;\r\n        var valueAxis = that._valueAxis;\r\n        var i;\r\n        var newSeries;\r\n        var groupsData;\r\n        if (options.dataSource && !allSeriesOptions) {\r\n            dataSourceField = options.dataSourceField || \"arg\";\r\n            allSeriesOptions = {\r\n                argumentField: dataSourceField,\r\n                valueField: dataSourceField\r\n            };\r\n            that._hideChart = true\r\n        }\r\n        allSeriesOptions = Array.isArray(allSeriesOptions) ? allSeriesOptions : allSeriesOptions ? [allSeriesOptions] : [];\r\n        for (i = 0; i < allSeriesOptions.length; i++) {\r\n            particularSeriesOptions = extend(true, {}, allSeriesOptions[i]);\r\n            particularSeriesOptions.rotated = false;\r\n            seriesTheme = chartThemeManager.getOptions(\"series\", particularSeriesOptions, allSeriesOptions.length);\r\n            seriesTheme.argumentField = seriesTheme.argumentField || options.dataSourceField;\r\n            if (!seriesTheme.name) {\r\n                seriesTheme.name = \"Series \" + (i + 1).toString()\r\n            }\r\n            if (data && data.length > 0) {\r\n                newSeries = new seriesModule.Series({\r\n                    renderer: options.renderer,\r\n                    argumentAxis: options.argumentAxis,\r\n                    valueAxis: options.valueAxis,\r\n                    incidentOccurred: options.incidentOccurred\r\n                }, seriesTheme);\r\n                series.push(newSeries)\r\n            }\r\n        }\r\n        if (series.length) {\r\n            groupsData = {\r\n                groups: [{\r\n                    series: series,\r\n                    valueAxis: options.valueAxis,\r\n                    valueOptions: {\r\n                        type: valueAxis.type,\r\n                        valueType: dataSourceField ? options.valueType : valueAxis.valueType\r\n                    }\r\n                }],\r\n                argumentOptions: {\r\n                    categories: options.categories,\r\n                    argumentType: options.valueType,\r\n                    type: options.axisType\r\n                }\r\n            };\r\n            parsedData = dataValidatorModule.validateData(data, groupsData, options.incidentOccurred, chartThemeManager.getOptions(\"dataPrepareSettings\"));\r\n            that.argCategories = groupsData.categories;\r\n            for (i = 0; i < series.length; i++) {\r\n                series[i].updateData(parsedData[series[i].getArgumentField()])\r\n            }\r\n        }\r\n        return series\r\n    },\r\n    createPoints: function() {\r\n        if (0 === this._series.length) {\r\n            return\r\n        }\r\n        var series = this._series;\r\n        var viewport = new rangeModule.Range;\r\n        var axis = series[0].getArgumentAxis();\r\n        var themeManager = this._themeManager;\r\n        var negativesAsZeroes = themeManager.getOptions(\"negativesAsZeroes\");\r\n        var negativesAsZeros = themeManager.getOptions(\"negativesAsZeros\");\r\n        series.forEach(function(s) {\r\n            viewport.addRange(s.getArgumentRange())\r\n        });\r\n        axis.getTranslator().updateBusinessRange(viewport);\r\n        series.forEach(function(s) {\r\n            s.createPoints()\r\n        });\r\n        this._seriesFamilies = processSeriesFamilies(series, themeManager.getOptions(\"equalBarWidth\"), themeManager.getOptions(\"minBubbleSize\"), themeManager.getOptions(\"maxBubbleSize\"), {\r\n            barWidth: themeManager.getOptions(\"barWidth\"),\r\n            barGroupPadding: themeManager.getOptions(\"barGroupPadding\"),\r\n            barGroupWidth: themeManager.getOptions(\"barGroupWidth\")\r\n        }, typeUtils.isDefined(negativesAsZeroes) ? negativesAsZeroes : negativesAsZeros)\r\n    },\r\n    adjustSeriesDimensions: function() {\r\n        each(this._seriesFamilies, function(_, family) {\r\n            family.adjustSeriesDimensions()\r\n        })\r\n    },\r\n    getBoundRange: function() {\r\n        var that = this;\r\n        var rangeData;\r\n        var valueAxis = that._valueAxis;\r\n        var valRange = new rangeModule.Range({\r\n            min: valueAxis.min,\r\n            minVisible: valueAxis.min,\r\n            max: valueAxis.max,\r\n            maxVisible: valueAxis.max,\r\n            axisType: valueAxis.type,\r\n            base: valueAxis.logarithmBase\r\n        });\r\n        var argRange = new rangeModule.Range({});\r\n        var rangeYSize;\r\n        var rangeVisibleSizeY;\r\n        var minIndent;\r\n        var maxIndent;\r\n        each(that._series, function(_, series) {\r\n            rangeData = series.getRangeData();\r\n            valRange.addRange(rangeData.val);\r\n            argRange.addRange(rangeData.arg)\r\n        });\r\n        if (!valRange.isEmpty() && !argRange.isEmpty()) {\r\n            minIndent = valueAxis.inverted ? that._indent.top : that._indent.bottom;\r\n            maxIndent = valueAxis.inverted ? that._indent.bottom : that._indent.top;\r\n            rangeYSize = valRange.max - valRange.min;\r\n            rangeVisibleSizeY = (typeUtils.isNumeric(valRange.maxVisible) ? valRange.maxVisible : valRange.max) - (typeUtils.isNumeric(valRange.minVisible) ? valRange.minVisible : valRange.min);\r\n            if (typeUtils.isDate(valRange.min)) {\r\n                valRange.min = new Date(valRange.min.valueOf() - rangeYSize * minIndent)\r\n            } else {\r\n                valRange.min -= rangeYSize * minIndent\r\n            }\r\n            if (typeUtils.isDate(valRange.max)) {\r\n                valRange.max = new Date(valRange.max.valueOf() + rangeYSize * maxIndent)\r\n            } else {\r\n                valRange.max += rangeYSize * maxIndent\r\n            }\r\n            if (typeUtils.isNumeric(rangeVisibleSizeY)) {\r\n                valRange.maxVisible = valRange.maxVisible ? valRange.maxVisible + rangeVisibleSizeY * maxIndent : void 0;\r\n                valRange.minVisible = valRange.minVisible ? valRange.minVisible - rangeVisibleSizeY * minIndent : void 0\r\n            }\r\n            valRange.invert = valueAxis.inverted\r\n        }\r\n        return {\r\n            arg: argRange,\r\n            val: valRange\r\n        }\r\n    },\r\n    getMarginOptions: function(canvas) {\r\n        var bubbleSize = Math.min(canvas.width, canvas.height) * this._themeManager.getOptions(\"maxBubbleSize\");\r\n        return this._series.reduce(function(marginOptions, series) {\r\n            var seriesOptions = series.getMarginOptions();\r\n            if (true === seriesOptions.processBubbleSize) {\r\n                seriesOptions.size = bubbleSize\r\n            }\r\n            return vizUtils.mergeMarginOptions(marginOptions, seriesOptions)\r\n        }, {})\r\n    },\r\n    getSeries: function() {\r\n        return this._series\r\n    },\r\n    isEmpty: function() {\r\n        return 0 === this.getSeries().length\r\n    },\r\n    isShowChart: function() {\r\n        return !this._hideChart\r\n    },\r\n    getCalculatedValueType: function() {\r\n        var series = this._series[0];\r\n        return series && series.argumentType\r\n    },\r\n    getThemeManager: function() {\r\n        return this._themeManager\r\n    }\r\n};\r\nexports.SeriesDataSource = SeriesDataSource;\r\n"]},"metadata":{},"sourceType":"module"}