{"ast":null,"code":"/**\r\n * DevExtreme (ui/date_box/ui.date_box.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar windowUtils = require(\"../../core/utils/window\");\n\nvar window = windowUtils.getWindow();\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar dom = require(\"../../core/utils/dom\");\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar compareVersions = require(\"../../core/utils/version\").compare;\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar support = require(\"../../core/utils/support\");\n\nvar devices = require(\"../../core/devices\");\n\nvar config = require(\"../../core/config\");\n\nvar dateUtils = require(\"../../core/utils/date\");\n\nvar uiDateUtils = require(\"./ui.date_utils\");\n\nvar dateSerialization = require(\"../../core/utils/date_serialization\");\n\nvar DropDownEditor = require(\"../drop_down_editor/ui.drop_down_editor\");\n\nvar dateLocalization = require(\"../../localization/date\");\n\nvar messageLocalization = require(\"../../localization/message\");\n\nvar DATEBOX_CLASS = \"dx-datebox\";\nvar DX_AUTO_WIDTH_CLASS = \"dx-auto-width\";\nvar DX_INVALID_BADGE_CLASS = \"dx-show-invalid-badge\";\nvar DX_CLEAR_BUTTON_CLASS = \"dx-clear-button-area\";\nvar DATEBOX_WRAPPER_CLASS = \"dx-datebox-wrapper\";\nvar PICKER_TYPE = {\n  calendar: \"calendar\",\n  rollers: \"rollers\",\n  list: \"list\",\n  \"native\": \"native\"\n};\nvar TYPE = {\n  date: \"date\",\n  datetime: \"datetime\",\n  time: \"time\"\n};\nvar STRATEGY_NAME = {\n  calendar: \"Calendar\",\n  dateView: \"DateView\",\n  \"native\": \"Native\",\n  calendarWithTime: \"CalendarWithTime\",\n  list: \"List\"\n};\nvar STRATEGY_CLASSES = {\n  Calendar: require(\"./ui.date_box.strategy.calendar\"),\n  DateView: require(\"./ui.date_box.strategy.date_view\"),\n  Native: require(\"./ui.date_box.strategy.native\"),\n  CalendarWithTime: require(\"./ui.date_box.strategy.calendar_with_time\"),\n  List: require(\"./ui.date_box.strategy.list\")\n};\nvar DateBox = DropDownEditor.inherit({\n  _supportedKeys: function _supportedKeys() {\n    return extend(this.callBase(), this._strategy.supportedKeys());\n  },\n  _setDeprecatedOptions: function _setDeprecatedOptions() {\n    this.callBase();\n    extend(this._deprecatedOptions, {\n      maxZoomLevel: {\n        since: \"18.1\",\n        alias: \"calendarOptions.maxZoomLevel\"\n      },\n      minZoomLevel: {\n        since: \"18.1\",\n        alias: \"calendarOptions.minZoomLevel\"\n      }\n    });\n  },\n  _renderButtonContainers: function _renderButtonContainers() {\n    this.callBase.apply(this, arguments);\n\n    this._strategy.customizeButtons();\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      type: \"date\",\n      showAnalogClock: true,\n      value: null,\n      dateSerializationFormat: void 0,\n      min: void 0,\n      max: void 0,\n      displayFormat: null,\n      interval: 30,\n      disabledDates: null,\n      maxZoomLevel: \"month\",\n      minZoomLevel: \"century\",\n      pickerType: PICKER_TYPE.calendar,\n      invalidDateMessage: messageLocalization.format(\"dxDateBox-validation-datetime\"),\n      dateOutOfRangeMessage: messageLocalization.format(\"validation-range\"),\n      applyButtonText: messageLocalization.format(\"OK\"),\n      adaptivityEnabled: false,\n      calendarOptions: {},\n      useHiddenSubmitElement: true\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: {\n        platform: \"ios\"\n      },\n      options: {\n        showPopupTitle: true\n      }\n    }, {\n      device: {\n        platform: \"android\"\n      },\n      options: {\n        buttonsLocation: \"bottom after\"\n      }\n    }, {\n      device: function device() {\n        var realDevice = devices.real();\n        var platform = realDevice.platform;\n        return \"ios\" === platform || \"android\" === platform;\n      },\n      options: {\n        pickerType: PICKER_TYPE.native\n      }\n    }, {\n      device: function device(currentDevice) {\n        var realDevice = devices.real();\n        var platform = realDevice.platform;\n        var version = realDevice.version;\n        return \"generic\" === platform && \"desktop\" !== currentDevice.deviceType || \"android\" === platform && compareVersions(version, [4, 4]) < 0;\n      },\n      options: {\n        pickerType: PICKER_TYPE.rollers\n      }\n    }, {\n      device: {\n        platform: \"generic\",\n        deviceType: \"desktop\"\n      },\n      options: {\n        buttonsLocation: \"bottom after\"\n      }\n    }]);\n  },\n  _initOptions: function _initOptions(options) {\n    this._userOptions = extend({}, options);\n    this.callBase(options);\n\n    this._updatePickerOptions();\n  },\n  _updatePickerOptions: function _updatePickerOptions() {\n    var pickerType = this.option(\"pickerType\");\n    var type = this.option(\"type\");\n\n    if (pickerType === PICKER_TYPE.list && (type === TYPE.datetime || type === TYPE.date)) {\n      pickerType = PICKER_TYPE.calendar;\n    }\n\n    if (type === TYPE.time && pickerType === PICKER_TYPE.calendar) {\n      pickerType = PICKER_TYPE.list;\n    }\n\n    this.option(\"showDropDownButton\", \"generic\" !== devices.real().platform || pickerType !== PICKER_TYPE.native);\n    this._pickerType = pickerType;\n  },\n  _init: function _init() {\n    this._initStrategy();\n\n    this.option(extend({}, this._strategy.getDefaultOptions(), this._userOptions));\n    delete this._userOptions;\n    this._skipCustomValidation = false;\n    this.callBase();\n  },\n  _toLowerCaseFirstLetter: function _toLowerCaseFirstLetter(string) {\n    return string.charAt(0).toLowerCase() + string.substr(1);\n  },\n  _initStrategy: function _initStrategy() {\n    var strategyName = this._getStrategyName(this._getFormatType());\n\n    var strategy = STRATEGY_CLASSES[strategyName];\n\n    if (!(this._strategy && this._strategy.NAME === strategyName)) {\n      this._strategy = new strategy(this);\n    }\n  },\n  _getFormatType: function _getFormatType() {\n    var currentType = this.option(\"type\");\n    var isTime = /h|m|s/g.test(currentType);\n    var isDate = /d|M|Y/g.test(currentType);\n    var type = \"\";\n\n    if (isDate) {\n      type += TYPE.date;\n    }\n\n    if (isTime) {\n      type += TYPE.time;\n    }\n\n    return type;\n  },\n  _getStrategyName: function _getStrategyName(type) {\n    var pickerType = this._pickerType;\n\n    if (pickerType === PICKER_TYPE.rollers) {\n      return STRATEGY_NAME.dateView;\n    } else {\n      if (pickerType === PICKER_TYPE.native) {\n        return STRATEGY_NAME.native;\n      }\n    }\n\n    if (type === TYPE.date) {\n      return STRATEGY_NAME.calendar;\n    }\n\n    if (type === TYPE.datetime) {\n      return STRATEGY_NAME.calendarWithTime;\n    }\n\n    return STRATEGY_NAME.list;\n  },\n  _initMarkup: function _initMarkup() {\n    this.$element().addClass(DATEBOX_CLASS);\n    this.callBase();\n\n    this._refreshFormatClass();\n\n    this._refreshPickerTypeClass();\n\n    this._strategy.renderInputMinMax(this._input());\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._formatValidationIcon();\n  },\n  _renderDimensions: function _renderDimensions() {\n    this.callBase();\n    this.$element().toggleClass(DX_AUTO_WIDTH_CLASS, !this.option(\"width\"));\n  },\n  _refreshFormatClass: function _refreshFormatClass() {\n    var $element = this.$element();\n    each(TYPE, function (_, item) {\n      $element.removeClass(DATEBOX_CLASS + \"-\" + item);\n    });\n    $element.addClass(DATEBOX_CLASS + \"-\" + this.option(\"type\"));\n  },\n  _refreshPickerTypeClass: function _refreshPickerTypeClass() {\n    var $element = this.$element();\n    each(PICKER_TYPE, function (_, item) {\n      $element.removeClass(DATEBOX_CLASS + \"-\" + item);\n    });\n    $element.addClass(DATEBOX_CLASS + \"-\" + this._pickerType);\n  },\n  _formatValidationIcon: function _formatValidationIcon() {\n    if (!windowUtils.hasWindow()) {\n      return;\n    }\n\n    var inputElement = this._input().get(0);\n\n    var isRtlEnabled = this.option(\"rtlEnabled\");\n\n    var clearButtonWidth = this._getClearButtonWidth();\n\n    var longestElementDimensions = this._getLongestElementDimensions();\n\n    var curWidth = parseFloat(window.getComputedStyle(inputElement).width) - clearButtonWidth;\n    var shouldHideValidationIcon = longestElementDimensions.width > curWidth;\n    var style = inputElement.style;\n    this.$element().toggleClass(DX_INVALID_BADGE_CLASS, !shouldHideValidationIcon);\n\n    if (shouldHideValidationIcon) {\n      if (void 0 === this._storedPadding) {\n        this._storedPadding = isRtlEnabled ? longestElementDimensions.leftPadding : longestElementDimensions.rightPadding;\n      }\n\n      isRtlEnabled ? style.paddingLeft = 0 : style.paddingRight = 0;\n    } else {\n      isRtlEnabled ? style.paddingLeft = this._storedPadding + \"px\" : style.paddingRight = this._storedPadding + \"px\";\n    }\n  },\n  _getClearButtonWidth: function _getClearButtonWidth() {\n    var clearButtonWidth = 0;\n\n    if (this._isClearButtonVisible() && \"\" === this._input().val()) {\n      var clearButtonElement = this.$element().find(\".\" + DX_CLEAR_BUTTON_CLASS).get(0);\n      clearButtonWidth = parseFloat(window.getComputedStyle(clearButtonElement).width);\n    }\n\n    return clearButtonWidth;\n  },\n  _getLongestElementDimensions: function _getLongestElementDimensions() {\n    var format = this._strategy.getDisplayFormat(this.option(\"displayFormat\"));\n\n    var longestValue = dateLocalization.format(uiDateUtils.getLongestDate(format, dateLocalization.getMonthNames(), dateLocalization.getDayNames()), format);\n\n    var $input = this._input();\n\n    var inputElement = $input.get(0);\n    var $longestValueElement = dom.createTextElementHiddenCopy($input, longestValue);\n    var isPaddingStored = void 0 !== this._storedPadding;\n    var storedPadding = !isPaddingStored ? 0 : this._storedPadding;\n    $longestValueElement.appendTo(this.$element());\n    var elementWidth = parseFloat(window.getComputedStyle($longestValueElement.get(0)).width);\n    var rightPadding = parseFloat(window.getComputedStyle(inputElement).paddingRight);\n    var leftPadding = parseFloat(window.getComputedStyle(inputElement).paddingLeft);\n    var necessaryWidth = elementWidth + leftPadding + rightPadding + storedPadding;\n    $longestValueElement.remove();\n    return {\n      width: necessaryWidth,\n      leftPadding: leftPadding,\n      rightPadding: rightPadding\n    };\n  },\n  _attachChildKeyboardEvents: function _attachChildKeyboardEvents() {\n    this._strategy.attachKeyboardEvents(this._keyboardProcessor);\n  },\n  _renderPopup: function _renderPopup() {\n    this.callBase();\n\n    this._popup._wrapper().addClass(DATEBOX_WRAPPER_CLASS);\n\n    this._renderPopupWrapper();\n  },\n  _popupConfig: function _popupConfig() {\n    var popupConfig = this.callBase();\n    return extend(this._strategy.popupConfig(popupConfig), {\n      title: this._getPopupTitle(),\n      dragEnabled: false\n    });\n  },\n  _renderPopupWrapper: function _renderPopupWrapper() {\n    if (!this._popup) {\n      return;\n    }\n\n    var $element = this.$element();\n    var classPostfixes = extend({}, TYPE, PICKER_TYPE);\n    each(classPostfixes, function (_, item) {\n      $element.removeClass(DATEBOX_WRAPPER_CLASS + \"-\" + item);\n    }.bind(this));\n\n    this._popup._wrapper().addClass(DATEBOX_WRAPPER_CLASS + \"-\" + this.option(\"type\")).addClass(DATEBOX_WRAPPER_CLASS + \"-\" + this._pickerType);\n  },\n  _renderPopupContent: function _renderPopupContent() {\n    this.callBase();\n\n    this._strategy.renderPopupContent();\n  },\n  _getFirstPopupElement: function _getFirstPopupElement() {\n    return this._strategy.getFirstPopupElement() || this.callBase();\n  },\n  _getLastPopupElement: function _getLastPopupElement() {\n    return this._strategy.getLastPopupElement() || this.callBase();\n  },\n  _popupShowingHandler: function _popupShowingHandler() {\n    this.callBase();\n\n    this._strategy.popupShowingHandler();\n  },\n  _popupHiddenHandler: function _popupHiddenHandler() {\n    this.callBase();\n\n    this._strategy.popupHiddenHandler();\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible) {\n      this._formatValidationIcon();\n    }\n  },\n  _clearValueHandler: function _clearValueHandler(e) {\n    this.option(\"text\", \"\");\n    this.callBase(e);\n  },\n  _readOnlyPropValue: function _readOnlyPropValue() {\n    if (this._pickerType === PICKER_TYPE.rollers) {\n      return true;\n    }\n\n    var platform = devices.real().platform;\n    var isCustomValueDisabled = this._isNativeType() && (\"ios\" === platform || \"android\" === platform);\n\n    if (isCustomValueDisabled) {\n      return this.option(\"readOnly\");\n    }\n\n    return this.callBase();\n  },\n  _isClearButtonVisible: function _isClearButtonVisible() {\n    return this.callBase() && !this._isNativeType();\n  },\n  _renderValue: function _renderValue() {\n    var value = this.dateOption(\"value\");\n    this.option(\"text\", this._getDisplayedText(value));\n\n    this._strategy.renderValue();\n\n    return this.callBase();\n  },\n  _setSubmitValue: function _setSubmitValue() {\n    var value = this.dateOption(\"value\");\n    var dateSerializationFormat = this.option(\"dateSerializationFormat\");\n    var submitFormat = uiDateUtils.SUBMIT_FORMATS_MAP[this.option(\"type\")];\n    var submitValue = dateSerializationFormat ? dateSerialization.serializeDate(value, dateSerializationFormat) : uiDateUtils.toStandardDateFormat(value, submitFormat);\n\n    this._getSubmitElement().val(submitValue);\n  },\n  _getDisplayedText: function _getDisplayedText(value) {\n    var mode = this.option(\"mode\");\n    var displayedText;\n\n    if (\"text\" === mode) {\n      var displayFormat = this._strategy.getDisplayFormat(this.option(\"displayFormat\"));\n\n      displayedText = dateLocalization.format(value, displayFormat);\n    } else {\n      var format = this._getFormatByMode(mode);\n\n      if (format) {\n        displayedText = dateLocalization.format(value, format);\n      } else {\n        displayedText = uiDateUtils.toStandardDateFormat(value, mode);\n      }\n    }\n\n    return displayedText;\n  },\n  _getFormatByMode: function _getFormatByMode(mode) {\n    return support.inputType(mode) ? null : uiDateUtils.FORMATS_MAP[mode];\n  },\n  _valueChangeEventHandler: function _valueChangeEventHandler(e) {\n    var text = this.option(\"text\");\n    var currentValue = this.dateOption(\"value\");\n\n    if (text === this._getDisplayedText(currentValue)) {\n      this._validateValue(currentValue);\n\n      return;\n    }\n\n    var parsedDate = this._getParsedDate(text);\n\n    var value = currentValue || this._getDateByDefault();\n\n    var type = this.option(\"type\");\n    var newValue = uiDateUtils.mergeDates(value, parsedDate, type);\n    var date = parsedDate && \"time\" === type ? newValue : parsedDate;\n\n    if (this._applyInternalValidation(date)) {\n      var displayedText = this._getDisplayedText(newValue);\n\n      if (value && newValue && value.getTime() === newValue.getTime() && displayedText !== text) {\n        this._renderValue();\n      } else {\n        this.dateValue(newValue, e);\n      }\n    }\n\n    this._applyCustomValidation(newValue);\n  },\n  _getDateByDefault: function _getDateByDefault() {\n    return this._strategy.useCurrentDateByDefault() && this._strategy.getDefaultDate();\n  },\n  _getParsedDate: function _getParsedDate(text) {\n    var displayFormat = this._strategy.getDisplayFormat(this.option(\"displayFormat\"));\n\n    var parsedText = this._strategy.getParsedText(text, displayFormat);\n\n    return typeUtils.isDefined(parsedText) ? parsedText : void 0;\n  },\n  _validateValue: function _validateValue(value) {\n    var internalResult = this._applyInternalValidation(value);\n\n    var customResult = !this._skipCustomValidation ? this._applyCustomValidation(value) : true;\n    this._skipCustomValidation = false;\n    return internalResult && customResult;\n  },\n  _applyInternalValidation: function _applyInternalValidation(value) {\n    var text = this.option(\"text\");\n    var hasText = !!text && null !== value;\n    var isDate = !!value && typeUtils.isDate(value) && !isNaN(value.getTime());\n    var isDateInRange = isDate && dateUtils.dateInRange(value, this.dateOption(\"min\"), this.dateOption(\"max\"), this.option(\"type\"));\n    var isValid = !hasText && !value || isDateInRange;\n    var validationMessage = \"\";\n\n    if (!isDate) {\n      validationMessage = this.option(\"invalidDateMessage\");\n    } else {\n      if (!isDateInRange) {\n        validationMessage = this.option(\"dateOutOfRangeMessage\");\n      }\n    }\n\n    this.option({\n      isValid: isValid,\n      validationError: isValid ? null : {\n        editorSpecific: true,\n        message: validationMessage\n      }\n    });\n    return isValid;\n  },\n  _applyCustomValidation: function _applyCustomValidation(value) {\n    this.validationRequest.fire({\n      editor: this,\n      value: value\n    });\n    return this.option(\"isValid\");\n  },\n  _isValueChanged: function _isValueChanged(newValue) {\n    var oldValue = this.dateOption(\"value\");\n    var oldTime = oldValue && oldValue.getTime();\n    var newTime = newValue && newValue.getTime();\n    return oldTime !== newTime;\n  },\n  _isTextChanged: function _isTextChanged(newValue) {\n    var oldText = this.option(\"text\");\n    var newText = newValue && this._getDisplayedText(newValue) || \"\";\n    return oldText !== newText;\n  },\n  _renderProps: function _renderProps() {\n    this.callBase();\n\n    this._input().attr(\"autocomplete\", \"off\");\n  },\n  _renderOpenedState: function _renderOpenedState() {\n    if (!this._isNativeType()) {\n      this.callBase();\n    }\n\n    if (this._strategy.isAdaptivityChanged()) {\n      this._refreshStrategy();\n    }\n\n    this._strategy.renderOpenedState();\n  },\n  _getPopupTitle: function _getPopupTitle() {\n    var placeholder = this.option(\"placeholder\");\n\n    if (placeholder) {\n      return placeholder;\n    }\n\n    var type = this.option(\"type\");\n\n    if (type === TYPE.time) {\n      return messageLocalization.format(\"dxDateBox-simulatedDataPickerTitleTime\");\n    }\n\n    if (type === TYPE.date || type === TYPE.datetime) {\n      return messageLocalization.format(\"dxDateBox-simulatedDataPickerTitleDate\");\n    }\n\n    return \"\";\n  },\n  _renderPlaceholder: function _renderPlaceholder() {\n    this._popup && this._popup.option(\"title\", this._getPopupTitle());\n    this.callBase();\n  },\n  _refreshStrategy: function _refreshStrategy() {\n    this._strategy.dispose();\n\n    this._initStrategy();\n\n    this.option(this._strategy.getDefaultOptions());\n\n    this._refresh();\n  },\n  _applyButtonHandler: function _applyButtonHandler(e) {\n    var value = this._strategy.getValue();\n\n    if (this._applyInternalValidation(value)) {\n      this.dateValue(value, e.event);\n    }\n\n    this.callBase();\n  },\n  _dispose: function _dispose() {\n    this._strategy && this._strategy.dispose();\n    this.callBase();\n  },\n  _isNativeType: function _isNativeType() {\n    return this._pickerType === PICKER_TYPE.native;\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"showClearButton\":\n      case \"buttons\":\n        this.callBase.apply(this, arguments);\n\n        this._formatValidationIcon();\n\n        break;\n\n      case \"pickerType\":\n        this._updatePickerOptions({\n          pickerType: args.value\n        });\n\n        this._refreshStrategy();\n\n        this._refreshPickerTypeClass();\n\n        this._invalidate();\n\n        break;\n\n      case \"type\":\n        this._updatePickerOptions({\n          format: args.value\n        });\n\n        this._refreshStrategy();\n\n        this._refreshFormatClass();\n\n        this._renderPopupWrapper();\n\n        this._formatValidationIcon();\n\n        this._updateValue();\n\n        break;\n\n      case \"placeholder\":\n        this._renderPlaceholder();\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        if (this.option(\"isValid\")) {\n          this._applyInternalValidation(this.dateOption(\"value\"));\n        } else {\n          this._validateValue(this.dateOption(\"value\"));\n        }\n\n        this._invalidate();\n\n        break;\n\n      case \"dateSerializationFormat\":\n      case \"interval\":\n      case \"disabledDates\":\n      case \"calendarOptions\":\n      case \"minZoomLevel\":\n      case \"maxZoomLevel\":\n        this._invalidate();\n\n        break;\n\n      case \"displayFormat\":\n        this.option(\"text\", this._getDisplayedText(this.dateOption(\"value\")));\n\n        this._renderInputValue();\n\n        break;\n\n      case \"formatWidthCalculator\":\n        break;\n\n      case \"closeOnValueChange\":\n        var applyValueMode = args.value ? \"instantly\" : \"useButtons\";\n        this.option(\"applyValueMode\", applyValueMode);\n        break;\n\n      case \"applyValueMode\":\n        this.option(\"closeOnValueChange\", \"instantly\" === args.value);\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"text\":\n        this._strategy.textChangedHandler(args.value);\n\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"isValid\":\n        this.callBase.apply(this, arguments);\n\n        this._formatValidationIcon();\n\n        break;\n\n      case \"showDropDownButton\":\n        this._formatValidationIcon();\n\n        break;\n\n      case \"readOnly\":\n        this.callBase.apply(this, arguments);\n\n        this._formatValidationIcon();\n\n        break;\n\n      case \"invalidDateMessage\":\n      case \"dateOutOfRangeMessage\":\n      case \"adaptivityEnabled\":\n      case \"showAnalogClock\":\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  _getSerializationFormat: function _getSerializationFormat() {\n    var value = this.option(\"value\");\n\n    if (this.option(\"dateSerializationFormat\") && config().forceIsoDateParsing) {\n      return this.option(\"dateSerializationFormat\");\n    }\n\n    if (typeUtils.isNumeric(value)) {\n      return \"number\";\n    }\n\n    if (!typeUtils.isString(value)) {\n      return;\n    }\n\n    return dateSerialization.getDateSerializationFormat(value);\n  },\n  _updateValue: function _updateValue(value) {\n    this.callBase();\n\n    this._validateValue(value || this.dateOption(\"value\"));\n  },\n  dateValue: function dateValue(value, dxEvent) {\n    var isValueChanged = this._isValueChanged(value);\n\n    if (isValueChanged && dxEvent) {\n      this._saveValueChangeEvent(dxEvent);\n    }\n\n    if (!isValueChanged && this._isTextChanged(value)) {\n      this._updateValue(value);\n    }\n\n    return this.dateOption(\"value\", value);\n  },\n  dateOption: function dateOption(optionName, value) {\n    if (1 === arguments.length) {\n      return dateSerialization.deserializeDate(this.option(optionName));\n    }\n\n    var serializationFormat = this._getSerializationFormat();\n\n    this.option(optionName, dateSerialization.serializeDate(value, serializationFormat));\n  },\n  reset: function reset() {\n    var defaultOptions = this._getDefaultOptions();\n\n    this._skipCustomValidation = defaultOptions.value === this.dateOption(\"value\");\n    this.callBase();\n\n    this._updateValue(this.dateOption(\"value\"));\n  }\n});\nregisterComponent(\"dxDateBox\", DateBox);\nmodule.exports = DateBox;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/date_box/ui.date_box.base.js"],"names":["windowUtils","require","window","registerComponent","typeUtils","dom","each","compareVersions","extend","support","devices","config","dateUtils","uiDateUtils","dateSerialization","DropDownEditor","dateLocalization","messageLocalization","DATEBOX_CLASS","DX_AUTO_WIDTH_CLASS","DX_INVALID_BADGE_CLASS","DX_CLEAR_BUTTON_CLASS","DATEBOX_WRAPPER_CLASS","PICKER_TYPE","calendar","rollers","list","TYPE","date","datetime","time","STRATEGY_NAME","dateView","calendarWithTime","STRATEGY_CLASSES","Calendar","DateView","Native","CalendarWithTime","List","DateBox","_supportedKeys","_setDeprecatedOptions","maxZoomLevel","since","alias","minZoomLevel","_renderButtonContainers","_getDefaultOptions","type","showAnalogClock","value","dateSerializationFormat","min","max","displayFormat","interval","disabledDates","pickerType","invalidDateMessage","dateOutOfRangeMessage","applyButtonText","adaptivityEnabled","calendarOptions","useHiddenSubmitElement","_defaultOptionsRules","device","platform","options","showPopupTitle","buttonsLocation","realDevice","native","version","currentDevice","deviceType","_initOptions","_updatePickerOptions","_init","_toLowerCaseFirstLetter","string","_initStrategy","strategyName","strategy","_getFormatType","currentType","isTime","isDate","_getStrategyName","_initMarkup","_render","_renderDimensions","_refreshFormatClass","$element","_refreshPickerTypeClass","_formatValidationIcon","inputElement","isRtlEnabled","clearButtonWidth","longestElementDimensions","curWidth","parseFloat","shouldHideValidationIcon","style","_getClearButtonWidth","clearButtonElement","_getLongestElementDimensions","format","longestValue","$input","$longestValueElement","isPaddingStored","storedPadding","elementWidth","rightPadding","leftPadding","necessaryWidth","width","_attachChildKeyboardEvents","_renderPopup","_popupConfig","popupConfig","title","dragEnabled","_renderPopupWrapper","classPostfixes","_renderPopupContent","_getFirstPopupElement","_getLastPopupElement","_popupShowingHandler","_popupHiddenHandler","_visibilityChanged","_clearValueHandler","_readOnlyPropValue","isCustomValueDisabled","_isClearButtonVisible","_renderValue","_setSubmitValue","submitFormat","submitValue","_getDisplayedText","mode","displayedText","_getFormatByMode","_valueChangeEventHandler","text","currentValue","parsedDate","newValue","_getDateByDefault","_getParsedDate","parsedText","_validateValue","internalResult","customResult","_applyInternalValidation","hasText","isNaN","isDateInRange","isValid","validationMessage","validationError","editorSpecific","message","_applyCustomValidation","editor","_isValueChanged","oldValue","oldTime","newTime","_isTextChanged","oldText","newText","_renderProps","_renderOpenedState","_getPopupTitle","placeholder","_renderPlaceholder","_refreshStrategy","_applyButtonHandler","e","_dispose","_isNativeType","_optionChanged","args","applyValueMode","_getSerializationFormat","_updateValue","dateValue","isValueChanged","dateOption","arguments","serializationFormat","reset","defaultOptions","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/date_box/ui.date_box.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar windowUtils = require(\"../../core/utils/window\");\r\nvar window = windowUtils.getWindow();\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar dom = require(\"../../core/utils/dom\");\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar compareVersions = require(\"../../core/utils/version\").compare;\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar support = require(\"../../core/utils/support\");\r\nvar devices = require(\"../../core/devices\");\r\nvar config = require(\"../../core/config\");\r\nvar dateUtils = require(\"../../core/utils/date\");\r\nvar uiDateUtils = require(\"./ui.date_utils\");\r\nvar dateSerialization = require(\"../../core/utils/date_serialization\");\r\nvar DropDownEditor = require(\"../drop_down_editor/ui.drop_down_editor\");\r\nvar dateLocalization = require(\"../../localization/date\");\r\nvar messageLocalization = require(\"../../localization/message\");\r\nvar DATEBOX_CLASS = \"dx-datebox\";\r\nvar DX_AUTO_WIDTH_CLASS = \"dx-auto-width\";\r\nvar DX_INVALID_BADGE_CLASS = \"dx-show-invalid-badge\";\r\nvar DX_CLEAR_BUTTON_CLASS = \"dx-clear-button-area\";\r\nvar DATEBOX_WRAPPER_CLASS = \"dx-datebox-wrapper\";\r\nvar PICKER_TYPE = {\r\n    calendar: \"calendar\",\r\n    rollers: \"rollers\",\r\n    list: \"list\",\r\n    \"native\": \"native\"\r\n};\r\nvar TYPE = {\r\n    date: \"date\",\r\n    datetime: \"datetime\",\r\n    time: \"time\"\r\n};\r\nvar STRATEGY_NAME = {\r\n    calendar: \"Calendar\",\r\n    dateView: \"DateView\",\r\n    \"native\": \"Native\",\r\n    calendarWithTime: \"CalendarWithTime\",\r\n    list: \"List\"\r\n};\r\nvar STRATEGY_CLASSES = {\r\n    Calendar: require(\"./ui.date_box.strategy.calendar\"),\r\n    DateView: require(\"./ui.date_box.strategy.date_view\"),\r\n    Native: require(\"./ui.date_box.strategy.native\"),\r\n    CalendarWithTime: require(\"./ui.date_box.strategy.calendar_with_time\"),\r\n    List: require(\"./ui.date_box.strategy.list\")\r\n};\r\nvar DateBox = DropDownEditor.inherit({\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), this._strategy.supportedKeys())\r\n    },\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase();\r\n        extend(this._deprecatedOptions, {\r\n            maxZoomLevel: {\r\n                since: \"18.1\",\r\n                alias: \"calendarOptions.maxZoomLevel\"\r\n            },\r\n            minZoomLevel: {\r\n                since: \"18.1\",\r\n                alias: \"calendarOptions.minZoomLevel\"\r\n            }\r\n        })\r\n    },\r\n    _renderButtonContainers: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._strategy.customizeButtons()\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            type: \"date\",\r\n            showAnalogClock: true,\r\n            value: null,\r\n            dateSerializationFormat: void 0,\r\n            min: void 0,\r\n            max: void 0,\r\n            displayFormat: null,\r\n            interval: 30,\r\n            disabledDates: null,\r\n            maxZoomLevel: \"month\",\r\n            minZoomLevel: \"century\",\r\n            pickerType: PICKER_TYPE.calendar,\r\n            invalidDateMessage: messageLocalization.format(\"dxDateBox-validation-datetime\"),\r\n            dateOutOfRangeMessage: messageLocalization.format(\"validation-range\"),\r\n            applyButtonText: messageLocalization.format(\"OK\"),\r\n            adaptivityEnabled: false,\r\n            calendarOptions: {},\r\n            useHiddenSubmitElement: true\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: {\r\n                platform: \"ios\"\r\n            },\r\n            options: {\r\n                showPopupTitle: true\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"android\"\r\n            },\r\n            options: {\r\n                buttonsLocation: \"bottom after\"\r\n            }\r\n        }, {\r\n            device: function() {\r\n                var realDevice = devices.real();\r\n                var platform = realDevice.platform;\r\n                return \"ios\" === platform || \"android\" === platform\r\n            },\r\n            options: {\r\n                pickerType: PICKER_TYPE.native\r\n            }\r\n        }, {\r\n            device: function(currentDevice) {\r\n                var realDevice = devices.real();\r\n                var platform = realDevice.platform;\r\n                var version = realDevice.version;\r\n                return \"generic\" === platform && \"desktop\" !== currentDevice.deviceType || \"android\" === platform && compareVersions(version, [4, 4]) < 0\r\n            },\r\n            options: {\r\n                pickerType: PICKER_TYPE.rollers\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"generic\",\r\n                deviceType: \"desktop\"\r\n            },\r\n            options: {\r\n                buttonsLocation: \"bottom after\"\r\n            }\r\n        }])\r\n    },\r\n    _initOptions: function(options) {\r\n        this._userOptions = extend({}, options);\r\n        this.callBase(options);\r\n        this._updatePickerOptions()\r\n    },\r\n    _updatePickerOptions: function() {\r\n        var pickerType = this.option(\"pickerType\");\r\n        var type = this.option(\"type\");\r\n        if (pickerType === PICKER_TYPE.list && (type === TYPE.datetime || type === TYPE.date)) {\r\n            pickerType = PICKER_TYPE.calendar\r\n        }\r\n        if (type === TYPE.time && pickerType === PICKER_TYPE.calendar) {\r\n            pickerType = PICKER_TYPE.list\r\n        }\r\n        this.option(\"showDropDownButton\", \"generic\" !== devices.real().platform || pickerType !== PICKER_TYPE.native);\r\n        this._pickerType = pickerType\r\n    },\r\n    _init: function() {\r\n        this._initStrategy();\r\n        this.option(extend({}, this._strategy.getDefaultOptions(), this._userOptions));\r\n        delete this._userOptions;\r\n        this._skipCustomValidation = false;\r\n        this.callBase()\r\n    },\r\n    _toLowerCaseFirstLetter: function(string) {\r\n        return string.charAt(0).toLowerCase() + string.substr(1)\r\n    },\r\n    _initStrategy: function() {\r\n        var strategyName = this._getStrategyName(this._getFormatType());\r\n        var strategy = STRATEGY_CLASSES[strategyName];\r\n        if (!(this._strategy && this._strategy.NAME === strategyName)) {\r\n            this._strategy = new strategy(this)\r\n        }\r\n    },\r\n    _getFormatType: function() {\r\n        var currentType = this.option(\"type\");\r\n        var isTime = /h|m|s/g.test(currentType);\r\n        var isDate = /d|M|Y/g.test(currentType);\r\n        var type = \"\";\r\n        if (isDate) {\r\n            type += TYPE.date\r\n        }\r\n        if (isTime) {\r\n            type += TYPE.time\r\n        }\r\n        return type\r\n    },\r\n    _getStrategyName: function(type) {\r\n        var pickerType = this._pickerType;\r\n        if (pickerType === PICKER_TYPE.rollers) {\r\n            return STRATEGY_NAME.dateView\r\n        } else {\r\n            if (pickerType === PICKER_TYPE.native) {\r\n                return STRATEGY_NAME.native\r\n            }\r\n        }\r\n        if (type === TYPE.date) {\r\n            return STRATEGY_NAME.calendar\r\n        }\r\n        if (type === TYPE.datetime) {\r\n            return STRATEGY_NAME.calendarWithTime\r\n        }\r\n        return STRATEGY_NAME.list\r\n    },\r\n    _initMarkup: function() {\r\n        this.$element().addClass(DATEBOX_CLASS);\r\n        this.callBase();\r\n        this._refreshFormatClass();\r\n        this._refreshPickerTypeClass();\r\n        this._strategy.renderInputMinMax(this._input())\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._formatValidationIcon()\r\n    },\r\n    _renderDimensions: function() {\r\n        this.callBase();\r\n        this.$element().toggleClass(DX_AUTO_WIDTH_CLASS, !this.option(\"width\"))\r\n    },\r\n    _refreshFormatClass: function() {\r\n        var $element = this.$element();\r\n        each(TYPE, function(_, item) {\r\n            $element.removeClass(DATEBOX_CLASS + \"-\" + item)\r\n        });\r\n        $element.addClass(DATEBOX_CLASS + \"-\" + this.option(\"type\"))\r\n    },\r\n    _refreshPickerTypeClass: function() {\r\n        var $element = this.$element();\r\n        each(PICKER_TYPE, function(_, item) {\r\n            $element.removeClass(DATEBOX_CLASS + \"-\" + item)\r\n        });\r\n        $element.addClass(DATEBOX_CLASS + \"-\" + this._pickerType)\r\n    },\r\n    _formatValidationIcon: function() {\r\n        if (!windowUtils.hasWindow()) {\r\n            return\r\n        }\r\n        var inputElement = this._input().get(0);\r\n        var isRtlEnabled = this.option(\"rtlEnabled\");\r\n        var clearButtonWidth = this._getClearButtonWidth();\r\n        var longestElementDimensions = this._getLongestElementDimensions();\r\n        var curWidth = parseFloat(window.getComputedStyle(inputElement).width) - clearButtonWidth;\r\n        var shouldHideValidationIcon = longestElementDimensions.width > curWidth;\r\n        var style = inputElement.style;\r\n        this.$element().toggleClass(DX_INVALID_BADGE_CLASS, !shouldHideValidationIcon);\r\n        if (shouldHideValidationIcon) {\r\n            if (void 0 === this._storedPadding) {\r\n                this._storedPadding = isRtlEnabled ? longestElementDimensions.leftPadding : longestElementDimensions.rightPadding\r\n            }\r\n            isRtlEnabled ? style.paddingLeft = 0 : style.paddingRight = 0\r\n        } else {\r\n            isRtlEnabled ? style.paddingLeft = this._storedPadding + \"px\" : style.paddingRight = this._storedPadding + \"px\"\r\n        }\r\n    },\r\n    _getClearButtonWidth: function() {\r\n        var clearButtonWidth = 0;\r\n        if (this._isClearButtonVisible() && \"\" === this._input().val()) {\r\n            var clearButtonElement = this.$element().find(\".\" + DX_CLEAR_BUTTON_CLASS).get(0);\r\n            clearButtonWidth = parseFloat(window.getComputedStyle(clearButtonElement).width)\r\n        }\r\n        return clearButtonWidth\r\n    },\r\n    _getLongestElementDimensions: function() {\r\n        var format = this._strategy.getDisplayFormat(this.option(\"displayFormat\"));\r\n        var longestValue = dateLocalization.format(uiDateUtils.getLongestDate(format, dateLocalization.getMonthNames(), dateLocalization.getDayNames()), format);\r\n        var $input = this._input();\r\n        var inputElement = $input.get(0);\r\n        var $longestValueElement = dom.createTextElementHiddenCopy($input, longestValue);\r\n        var isPaddingStored = void 0 !== this._storedPadding;\r\n        var storedPadding = !isPaddingStored ? 0 : this._storedPadding;\r\n        $longestValueElement.appendTo(this.$element());\r\n        var elementWidth = parseFloat(window.getComputedStyle($longestValueElement.get(0)).width);\r\n        var rightPadding = parseFloat(window.getComputedStyle(inputElement).paddingRight);\r\n        var leftPadding = parseFloat(window.getComputedStyle(inputElement).paddingLeft);\r\n        var necessaryWidth = elementWidth + leftPadding + rightPadding + storedPadding;\r\n        $longestValueElement.remove();\r\n        return {\r\n            width: necessaryWidth,\r\n            leftPadding: leftPadding,\r\n            rightPadding: rightPadding\r\n        }\r\n    },\r\n    _attachChildKeyboardEvents: function() {\r\n        this._strategy.attachKeyboardEvents(this._keyboardProcessor)\r\n    },\r\n    _renderPopup: function() {\r\n        this.callBase();\r\n        this._popup._wrapper().addClass(DATEBOX_WRAPPER_CLASS);\r\n        this._renderPopupWrapper()\r\n    },\r\n    _popupConfig: function() {\r\n        var popupConfig = this.callBase();\r\n        return extend(this._strategy.popupConfig(popupConfig), {\r\n            title: this._getPopupTitle(),\r\n            dragEnabled: false\r\n        })\r\n    },\r\n    _renderPopupWrapper: function() {\r\n        if (!this._popup) {\r\n            return\r\n        }\r\n        var $element = this.$element();\r\n        var classPostfixes = extend({}, TYPE, PICKER_TYPE);\r\n        each(classPostfixes, function(_, item) {\r\n            $element.removeClass(DATEBOX_WRAPPER_CLASS + \"-\" + item)\r\n        }.bind(this));\r\n        this._popup._wrapper().addClass(DATEBOX_WRAPPER_CLASS + \"-\" + this.option(\"type\")).addClass(DATEBOX_WRAPPER_CLASS + \"-\" + this._pickerType)\r\n    },\r\n    _renderPopupContent: function() {\r\n        this.callBase();\r\n        this._strategy.renderPopupContent()\r\n    },\r\n    _getFirstPopupElement: function() {\r\n        return this._strategy.getFirstPopupElement() || this.callBase()\r\n    },\r\n    _getLastPopupElement: function() {\r\n        return this._strategy.getLastPopupElement() || this.callBase()\r\n    },\r\n    _popupShowingHandler: function() {\r\n        this.callBase();\r\n        this._strategy.popupShowingHandler()\r\n    },\r\n    _popupHiddenHandler: function() {\r\n        this.callBase();\r\n        this._strategy.popupHiddenHandler()\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._formatValidationIcon()\r\n        }\r\n    },\r\n    _clearValueHandler: function(e) {\r\n        this.option(\"text\", \"\");\r\n        this.callBase(e)\r\n    },\r\n    _readOnlyPropValue: function() {\r\n        if (this._pickerType === PICKER_TYPE.rollers) {\r\n            return true\r\n        }\r\n        var platform = devices.real().platform;\r\n        var isCustomValueDisabled = this._isNativeType() && (\"ios\" === platform || \"android\" === platform);\r\n        if (isCustomValueDisabled) {\r\n            return this.option(\"readOnly\")\r\n        }\r\n        return this.callBase()\r\n    },\r\n    _isClearButtonVisible: function() {\r\n        return this.callBase() && !this._isNativeType()\r\n    },\r\n    _renderValue: function() {\r\n        var value = this.dateOption(\"value\");\r\n        this.option(\"text\", this._getDisplayedText(value));\r\n        this._strategy.renderValue();\r\n        return this.callBase()\r\n    },\r\n    _setSubmitValue: function() {\r\n        var value = this.dateOption(\"value\");\r\n        var dateSerializationFormat = this.option(\"dateSerializationFormat\");\r\n        var submitFormat = uiDateUtils.SUBMIT_FORMATS_MAP[this.option(\"type\")];\r\n        var submitValue = dateSerializationFormat ? dateSerialization.serializeDate(value, dateSerializationFormat) : uiDateUtils.toStandardDateFormat(value, submitFormat);\r\n        this._getSubmitElement().val(submitValue)\r\n    },\r\n    _getDisplayedText: function(value) {\r\n        var mode = this.option(\"mode\");\r\n        var displayedText;\r\n        if (\"text\" === mode) {\r\n            var displayFormat = this._strategy.getDisplayFormat(this.option(\"displayFormat\"));\r\n            displayedText = dateLocalization.format(value, displayFormat)\r\n        } else {\r\n            var format = this._getFormatByMode(mode);\r\n            if (format) {\r\n                displayedText = dateLocalization.format(value, format)\r\n            } else {\r\n                displayedText = uiDateUtils.toStandardDateFormat(value, mode)\r\n            }\r\n        }\r\n        return displayedText\r\n    },\r\n    _getFormatByMode: function(mode) {\r\n        return support.inputType(mode) ? null : uiDateUtils.FORMATS_MAP[mode]\r\n    },\r\n    _valueChangeEventHandler: function(e) {\r\n        var text = this.option(\"text\");\r\n        var currentValue = this.dateOption(\"value\");\r\n        if (text === this._getDisplayedText(currentValue)) {\r\n            this._validateValue(currentValue);\r\n            return\r\n        }\r\n        var parsedDate = this._getParsedDate(text);\r\n        var value = currentValue || this._getDateByDefault();\r\n        var type = this.option(\"type\");\r\n        var newValue = uiDateUtils.mergeDates(value, parsedDate, type);\r\n        var date = parsedDate && \"time\" === type ? newValue : parsedDate;\r\n        if (this._applyInternalValidation(date)) {\r\n            var displayedText = this._getDisplayedText(newValue);\r\n            if (value && newValue && value.getTime() === newValue.getTime() && displayedText !== text) {\r\n                this._renderValue()\r\n            } else {\r\n                this.dateValue(newValue, e)\r\n            }\r\n        }\r\n        this._applyCustomValidation(newValue)\r\n    },\r\n    _getDateByDefault: function() {\r\n        return this._strategy.useCurrentDateByDefault() && this._strategy.getDefaultDate()\r\n    },\r\n    _getParsedDate: function(text) {\r\n        var displayFormat = this._strategy.getDisplayFormat(this.option(\"displayFormat\"));\r\n        var parsedText = this._strategy.getParsedText(text, displayFormat);\r\n        return typeUtils.isDefined(parsedText) ? parsedText : void 0\r\n    },\r\n    _validateValue: function(value) {\r\n        var internalResult = this._applyInternalValidation(value);\r\n        var customResult = !this._skipCustomValidation ? this._applyCustomValidation(value) : true;\r\n        this._skipCustomValidation = false;\r\n        return internalResult && customResult\r\n    },\r\n    _applyInternalValidation: function(value) {\r\n        var text = this.option(\"text\");\r\n        var hasText = !!text && null !== value;\r\n        var isDate = !!value && typeUtils.isDate(value) && !isNaN(value.getTime());\r\n        var isDateInRange = isDate && dateUtils.dateInRange(value, this.dateOption(\"min\"), this.dateOption(\"max\"), this.option(\"type\"));\r\n        var isValid = !hasText && !value || isDateInRange;\r\n        var validationMessage = \"\";\r\n        if (!isDate) {\r\n            validationMessage = this.option(\"invalidDateMessage\")\r\n        } else {\r\n            if (!isDateInRange) {\r\n                validationMessage = this.option(\"dateOutOfRangeMessage\")\r\n            }\r\n        }\r\n        this.option({\r\n            isValid: isValid,\r\n            validationError: isValid ? null : {\r\n                editorSpecific: true,\r\n                message: validationMessage\r\n            }\r\n        });\r\n        return isValid\r\n    },\r\n    _applyCustomValidation: function(value) {\r\n        this.validationRequest.fire({\r\n            editor: this,\r\n            value: value\r\n        });\r\n        return this.option(\"isValid\")\r\n    },\r\n    _isValueChanged: function(newValue) {\r\n        var oldValue = this.dateOption(\"value\");\r\n        var oldTime = oldValue && oldValue.getTime();\r\n        var newTime = newValue && newValue.getTime();\r\n        return oldTime !== newTime\r\n    },\r\n    _isTextChanged: function(newValue) {\r\n        var oldText = this.option(\"text\");\r\n        var newText = newValue && this._getDisplayedText(newValue) || \"\";\r\n        return oldText !== newText\r\n    },\r\n    _renderProps: function() {\r\n        this.callBase();\r\n        this._input().attr(\"autocomplete\", \"off\")\r\n    },\r\n    _renderOpenedState: function() {\r\n        if (!this._isNativeType()) {\r\n            this.callBase()\r\n        }\r\n        if (this._strategy.isAdaptivityChanged()) {\r\n            this._refreshStrategy()\r\n        }\r\n        this._strategy.renderOpenedState()\r\n    },\r\n    _getPopupTitle: function() {\r\n        var placeholder = this.option(\"placeholder\");\r\n        if (placeholder) {\r\n            return placeholder\r\n        }\r\n        var type = this.option(\"type\");\r\n        if (type === TYPE.time) {\r\n            return messageLocalization.format(\"dxDateBox-simulatedDataPickerTitleTime\")\r\n        }\r\n        if (type === TYPE.date || type === TYPE.datetime) {\r\n            return messageLocalization.format(\"dxDateBox-simulatedDataPickerTitleDate\")\r\n        }\r\n        return \"\"\r\n    },\r\n    _renderPlaceholder: function() {\r\n        this._popup && this._popup.option(\"title\", this._getPopupTitle());\r\n        this.callBase()\r\n    },\r\n    _refreshStrategy: function() {\r\n        this._strategy.dispose();\r\n        this._initStrategy();\r\n        this.option(this._strategy.getDefaultOptions());\r\n        this._refresh()\r\n    },\r\n    _applyButtonHandler: function(e) {\r\n        var value = this._strategy.getValue();\r\n        if (this._applyInternalValidation(value)) {\r\n            this.dateValue(value, e.event)\r\n        }\r\n        this.callBase()\r\n    },\r\n    _dispose: function() {\r\n        this._strategy && this._strategy.dispose();\r\n        this.callBase()\r\n    },\r\n    _isNativeType: function() {\r\n        return this._pickerType === PICKER_TYPE.native\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"showClearButton\":\r\n            case \"buttons\":\r\n                this.callBase.apply(this, arguments);\r\n                this._formatValidationIcon();\r\n                break;\r\n            case \"pickerType\":\r\n                this._updatePickerOptions({\r\n                    pickerType: args.value\r\n                });\r\n                this._refreshStrategy();\r\n                this._refreshPickerTypeClass();\r\n                this._invalidate();\r\n                break;\r\n            case \"type\":\r\n                this._updatePickerOptions({\r\n                    format: args.value\r\n                });\r\n                this._refreshStrategy();\r\n                this._refreshFormatClass();\r\n                this._renderPopupWrapper();\r\n                this._formatValidationIcon();\r\n                this._updateValue();\r\n                break;\r\n            case \"placeholder\":\r\n                this._renderPlaceholder();\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                if (this.option(\"isValid\")) {\r\n                    this._applyInternalValidation(this.dateOption(\"value\"))\r\n                } else {\r\n                    this._validateValue(this.dateOption(\"value\"))\r\n                }\r\n                this._invalidate();\r\n                break;\r\n            case \"dateSerializationFormat\":\r\n            case \"interval\":\r\n            case \"disabledDates\":\r\n            case \"calendarOptions\":\r\n            case \"minZoomLevel\":\r\n            case \"maxZoomLevel\":\r\n                this._invalidate();\r\n                break;\r\n            case \"displayFormat\":\r\n                this.option(\"text\", this._getDisplayedText(this.dateOption(\"value\")));\r\n                this._renderInputValue();\r\n                break;\r\n            case \"formatWidthCalculator\":\r\n                break;\r\n            case \"closeOnValueChange\":\r\n                var applyValueMode = args.value ? \"instantly\" : \"useButtons\";\r\n                this.option(\"applyValueMode\", applyValueMode);\r\n                break;\r\n            case \"applyValueMode\":\r\n                this.option(\"closeOnValueChange\", \"instantly\" === args.value);\r\n                this.callBase.apply(this, arguments);\r\n                break;\r\n            case \"text\":\r\n                this._strategy.textChangedHandler(args.value);\r\n                this.callBase.apply(this, arguments);\r\n                break;\r\n            case \"isValid\":\r\n                this.callBase.apply(this, arguments);\r\n                this._formatValidationIcon();\r\n                break;\r\n            case \"showDropDownButton\":\r\n                this._formatValidationIcon();\r\n                break;\r\n            case \"readOnly\":\r\n                this.callBase.apply(this, arguments);\r\n                this._formatValidationIcon();\r\n                break;\r\n            case \"invalidDateMessage\":\r\n            case \"dateOutOfRangeMessage\":\r\n            case \"adaptivityEnabled\":\r\n            case \"showAnalogClock\":\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _getSerializationFormat: function() {\r\n        var value = this.option(\"value\");\r\n        if (this.option(\"dateSerializationFormat\") && config().forceIsoDateParsing) {\r\n            return this.option(\"dateSerializationFormat\")\r\n        }\r\n        if (typeUtils.isNumeric(value)) {\r\n            return \"number\"\r\n        }\r\n        if (!typeUtils.isString(value)) {\r\n            return\r\n        }\r\n        return dateSerialization.getDateSerializationFormat(value)\r\n    },\r\n    _updateValue: function(value) {\r\n        this.callBase();\r\n        this._validateValue(value || this.dateOption(\"value\"))\r\n    },\r\n    dateValue: function(value, dxEvent) {\r\n        var isValueChanged = this._isValueChanged(value);\r\n        if (isValueChanged && dxEvent) {\r\n            this._saveValueChangeEvent(dxEvent)\r\n        }\r\n        if (!isValueChanged && this._isTextChanged(value)) {\r\n            this._updateValue(value)\r\n        }\r\n        return this.dateOption(\"value\", value)\r\n    },\r\n    dateOption: function(optionName, value) {\r\n        if (1 === arguments.length) {\r\n            return dateSerialization.deserializeDate(this.option(optionName))\r\n        }\r\n        var serializationFormat = this._getSerializationFormat();\r\n        this.option(optionName, dateSerialization.serializeDate(value, serializationFormat))\r\n    },\r\n    reset: function() {\r\n        var defaultOptions = this._getDefaultOptions();\r\n        this._skipCustomValidation = defaultOptions.value === this.dateOption(\"value\");\r\n        this.callBase();\r\n        this._updateValue(this.dateOption(\"value\"))\r\n    }\r\n});\r\nregisterComponent(\"dxDateBox\", DateBox);\r\nmodule.exports = DateBox;\r\n"]},"metadata":{},"sourceType":"module"}