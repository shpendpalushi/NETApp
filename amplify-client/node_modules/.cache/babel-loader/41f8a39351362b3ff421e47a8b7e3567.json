{"ast":null,"code":"/**\r\n * DevExtreme (ui/diagram/ui.diagram.contextmenu.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _ui = require(\"../widget/ui.widget\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _context_menu = require(\"../context_menu\");\n\nvar _context_menu2 = _interopRequireDefault(_context_menu);\n\nvar _uiDiagram = require(\"./ui.diagram.commands\");\n\nvar _uiDiagram2 = _interopRequireDefault(_uiDiagram);\n\nvar _diagram_bar = require(\"./diagram_bar\");\n\nvar _diagram_bar2 = _interopRequireDefault(_diagram_bar);\n\nvar _diagram_importer = require(\"./diagram_importer\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar DIAGRAM_TOUCHBAR_CLASS = \"dx-diagram-touchbar\";\nvar DIAGRAM_TOUCHBAR_TARGET_CLASS = \"dx-diagram-touchbar-target\";\nvar DIAGRAM_TOUCHBAR_MIN_UNWRAPPED_WIDTH = 800;\nvar DIAGRAM_TOUCHBAR_Y_OFFSET = 32;\n\nvar DiagramContextMenu = function (_Widget) {\n  _inherits(DiagramContextMenu, _Widget);\n\n  function DiagramContextMenu() {\n    _classCallCheck(this, DiagramContextMenu);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DiagramContextMenu).apply(this, arguments));\n  }\n\n  _createClass(DiagramContextMenu, [{\n    key: \"_init\",\n    value: function value() {\n      _get(_getPrototypeOf(DiagramContextMenu.prototype), \"_init\", this).call(this);\n\n      this._createOnVisibleChangedAction();\n\n      this._createOnItemClickAction();\n\n      this.bar = new ContextMenuBar(this);\n      this._tempState = void 0;\n      this._commands = [];\n      this._commandToIndexMap = {};\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function value() {\n      var _this = this;\n\n      _get(_getPrototypeOf(DiagramContextMenu.prototype), \"_initMarkup\", this).call(this);\n\n      this._commands = _uiDiagram2.default.getContextMenuCommands(this.option(\"commands\"));\n      this._commandToIndexMap = {};\n\n      this._commands.forEach(function (item, index) {\n        return _this._commandToIndexMap[item.command] = index;\n      });\n\n      this._$contextMenuTargetElement = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_TOUCHBAR_TARGET_CLASS).appendTo(this.$element());\n      var $contextMenu = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n\n      var _getDiagram = (0, _diagram_importer.getDiagram)(),\n          Browser = _getDiagram.Browser;\n\n      this._contextMenuInstance = this._createComponent($contextMenu, _context_menu2.default, {\n        cssClass: Browser.TouchUI ? DIAGRAM_TOUCHBAR_CLASS : \"\",\n        items: this._getItems(this._commands),\n        focusStateEnabled: false,\n        position: Browser.TouchUI ? {\n          my: {\n            x: \"center\",\n            y: \"bottom\"\n          },\n          at: {\n            x: \"center\",\n            y: \"top\"\n          },\n          of: this._$contextMenuTargetElement\n        } : {},\n        onItemClick: function onItemClick(_ref) {\n          var itemData = _ref.itemData;\n          return _this._onItemClick(itemData);\n        },\n        onShowing: function onShowing(e) {\n          if (true === _this._tempState) {\n            return;\n          }\n\n          _this._tempState = true;\n\n          _this._onVisibleChangedAction({\n            visible: true,\n            component: _this\n          });\n\n          _this._contextMenuInstance.option(\"items\", _this._getItems(_this._commands, true));\n\n          delete _this._tempState;\n        },\n        onHiding: function onHiding(e) {\n          _this._tempState = false;\n\n          _this._onVisibleChangedAction({\n            visible: false,\n            component: _this\n          });\n\n          delete _this._tempState;\n        }\n      });\n    }\n  }, {\n    key: \"_getItems\",\n    value: function value(commands, onlyVisible) {\n      var items = [];\n      var beginGroup = false;\n      commands.forEach(function (command) {\n        if (\"separator\" === command.widget) {\n          beginGroup = true;\n        } else {\n          if (command.visible || !onlyVisible) {\n            items.push({\n              command: command.command,\n              text: command.text,\n              icon: command.icon,\n              getParameter: command.getParameter,\n              beginGroup: beginGroup\n            });\n            beginGroup = false;\n          }\n        }\n      });\n      return items;\n    }\n  }, {\n    key: \"_show\",\n    value: function value(x, y, selection) {\n      this.clickPosition = {\n        x: x,\n        y: y\n      };\n\n      var _getDiagram2 = (0, _diagram_importer.getDiagram)(),\n          Browser = _getDiagram2.Browser;\n\n      if (Browser.TouchUI) {\n        this._contextMenuInstance.hide();\n\n        this._$contextMenuTargetElement.show();\n\n        if (!selection) {\n          selection = {\n            x: x,\n            y: y,\n            width: 0,\n            height: 0\n          };\n        }\n\n        var widthCorrection = selection.width > DIAGRAM_TOUCHBAR_MIN_UNWRAPPED_WIDTH ? 0 : (DIAGRAM_TOUCHBAR_MIN_UNWRAPPED_WIDTH - selection.width) / 2;\n\n        this._$contextMenuTargetElement.css({\n          left: selection.x - widthCorrection,\n          top: selection.y - DIAGRAM_TOUCHBAR_Y_OFFSET,\n          width: selection.width + 2 * widthCorrection,\n          height: selection.height + 2 * DIAGRAM_TOUCHBAR_Y_OFFSET\n        });\n\n        this._contextMenuInstance.show();\n      } else {\n        this._contextMenuInstance.hide();\n\n        this._contextMenuInstance.option(\"position\", {\n          offset: x + \" \" + y\n        });\n\n        this._contextMenuInstance.show();\n      }\n    }\n  }, {\n    key: \"_hide\",\n    value: function value() {\n      this._$contextMenuTargetElement.hide();\n\n      this._contextMenuInstance.hide();\n    }\n  }, {\n    key: \"_onItemClick\",\n    value: function value(itemData) {\n      var processed = false;\n\n      if (this._onItemClickAction) {\n        processed = this._onItemClickAction(itemData);\n      }\n\n      if (!processed) {\n        var parameter = this._getExecCommandParameter(itemData);\n\n        this.bar.raiseBarCommandExecuted(itemData.command, parameter);\n\n        this._contextMenuInstance.hide();\n      }\n    }\n  }, {\n    key: \"_getExecCommandParameter\",\n    value: function value(itemData) {\n      if (itemData.getParameter) {\n        return itemData.getParameter(this);\n      }\n    }\n  }, {\n    key: \"_setItemEnabled\",\n    value: function value(key, enabled) {\n      this._setItemVisible(key, enabled);\n    }\n  }, {\n    key: \"_setItemVisible\",\n    value: function value(key, visible) {\n      if (key in this._commandToIndexMap) {\n        var command = this._commands[this._commandToIndexMap[key]];\n\n        if (command) {\n          command.visible = visible;\n        }\n      }\n    }\n  }, {\n    key: \"_setEnabled\",\n    value: function value(enabled) {\n      this._contextMenuInstance.option(\"disabled\", !enabled);\n    }\n  }, {\n    key: \"isVisible\",\n    value: function value() {\n      if (void 0 !== this._tempState) {\n        return this._tempState;\n      }\n\n      return !!this._contextMenuInstance.option(\"visible\");\n    }\n  }, {\n    key: \"_createOnVisibleChangedAction\",\n    value: function value() {\n      this._onVisibleChangedAction = this._createActionByOption(\"onVisibleChanged\");\n    }\n  }, {\n    key: \"_createOnItemClickAction\",\n    value: function value() {\n      this._onItemClickAction = this._createActionByOption(\"onItemClick\");\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function value(args) {\n      switch (args.name) {\n        case \"onVisibleChanged\":\n          this._createOnVisibleChangedAction();\n\n          break;\n\n        case \"onItemClick\":\n          this._createOnItemClickAction();\n\n          break;\n\n        case \"commands\":\n          this._invalidate();\n\n          break;\n\n        default:\n          _get(_getPrototypeOf(DiagramContextMenu.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }]);\n\n  return DiagramContextMenu;\n}(_ui2.default);\n\nvar ContextMenuBar = function (_DiagramBar) {\n  _inherits(ContextMenuBar, _DiagramBar);\n\n  function ContextMenuBar() {\n    _classCallCheck(this, ContextMenuBar);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ContextMenuBar).apply(this, arguments));\n  }\n\n  _createClass(ContextMenuBar, [{\n    key: \"getCommandKeys\",\n    value: function value() {\n      return _uiDiagram2.default.getContextMenuCommands().map(function (c) {\n        return c.command;\n      });\n    }\n  }, {\n    key: \"setItemEnabled\",\n    value: function value(key, enabled) {\n      this._owner._setItemEnabled(key, enabled);\n    }\n  }, {\n    key: \"setItemVisible\",\n    value: function value(key, visible) {\n      this._owner._setItemVisible(key, visible);\n    }\n  }, {\n    key: \"setEnabled\",\n    value: function value(enabled) {\n      this._owner._setEnabled(enabled);\n    }\n  }, {\n    key: \"isVisible\",\n    value: function value() {\n      return this._owner.isVisible();\n    }\n  }]);\n\n  return ContextMenuBar;\n}(_diagram_bar2.default);\n\nmodule.exports = DiagramContextMenu;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/diagram/ui.diagram.contextmenu.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_ui","_ui2","_context_menu","_context_menu2","_uiDiagram","_uiDiagram2","_diagram_bar","_diagram_bar2","_diagram_importer","obj","Symbol","_typeof","instance","i","props","descriptor","Object","_defineProperties","Constructor","call","_assertThisInitialized","Reflect","_get","base","_superPropBase","desc","receiver","object","_getPrototypeOf","o","subClass","superClass","constructor","value","writable","configurable","_setPrototypeOf","DIAGRAM_TOUCHBAR_CLASS","DIAGRAM_TOUCHBAR_TARGET_CLASS","DIAGRAM_TOUCHBAR_MIN_UNWRAPPED_WIDTH","DIAGRAM_TOUCHBAR_Y_OFFSET","DiagramContextMenu","_inherits","_classCallCheck","_possibleConstructorReturn","_createClass","key","_this","item","$contextMenu","_getDiagram","Browser","cssClass","items","focusStateEnabled","position","my","x","y","at","of","_$contextMenuTargetElement","onItemClick","itemData","_ref","onShowing","visible","component","onHiding","beginGroup","commands","command","text","icon","getParameter","_getDiagram2","selection","width","height","widthCorrection","left","top","offset","processed","parameter","args","ContextMenuBar","c","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/diagram/ui.diagram.contextmenu.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _ui = require(\"../widget/ui.widget\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _context_menu = require(\"../context_menu\");\r\nvar _context_menu2 = _interopRequireDefault(_context_menu);\r\nvar _uiDiagram = require(\"./ui.diagram.commands\");\r\nvar _uiDiagram2 = _interopRequireDefault(_uiDiagram);\r\nvar _diagram_bar = require(\"./diagram_bar\");\r\nvar _diagram_bar2 = _interopRequireDefault(_diagram_bar);\r\nvar _diagram_importer = require(\"./diagram_importer\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar DIAGRAM_TOUCHBAR_CLASS = \"dx-diagram-touchbar\";\r\nvar DIAGRAM_TOUCHBAR_TARGET_CLASS = \"dx-diagram-touchbar-target\";\r\nvar DIAGRAM_TOUCHBAR_MIN_UNWRAPPED_WIDTH = 800;\r\nvar DIAGRAM_TOUCHBAR_Y_OFFSET = 32;\r\nvar DiagramContextMenu = function(_Widget) {\r\n    _inherits(DiagramContextMenu, _Widget);\r\n\r\n    function DiagramContextMenu() {\r\n        _classCallCheck(this, DiagramContextMenu);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(DiagramContextMenu).apply(this, arguments))\r\n    }\r\n    _createClass(DiagramContextMenu, [{\r\n        key: \"_init\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(DiagramContextMenu.prototype), \"_init\", this).call(this);\r\n            this._createOnVisibleChangedAction();\r\n            this._createOnItemClickAction();\r\n            this.bar = new ContextMenuBar(this);\r\n            this._tempState = void 0;\r\n            this._commands = [];\r\n            this._commandToIndexMap = {}\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            var _this = this;\r\n            _get(_getPrototypeOf(DiagramContextMenu.prototype), \"_initMarkup\", this).call(this);\r\n            this._commands = _uiDiagram2.default.getContextMenuCommands(this.option(\"commands\"));\r\n            this._commandToIndexMap = {};\r\n            this._commands.forEach(function(item, index) {\r\n                return _this._commandToIndexMap[item.command] = index\r\n            });\r\n            this._$contextMenuTargetElement = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_TOUCHBAR_TARGET_CLASS).appendTo(this.$element());\r\n            var $contextMenu = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\r\n            var _getDiagram = (0, _diagram_importer.getDiagram)(),\r\n                Browser = _getDiagram.Browser;\r\n            this._contextMenuInstance = this._createComponent($contextMenu, _context_menu2.default, {\r\n                cssClass: Browser.TouchUI ? DIAGRAM_TOUCHBAR_CLASS : \"\",\r\n                items: this._getItems(this._commands),\r\n                focusStateEnabled: false,\r\n                position: Browser.TouchUI ? {\r\n                    my: {\r\n                        x: \"center\",\r\n                        y: \"bottom\"\r\n                    },\r\n                    at: {\r\n                        x: \"center\",\r\n                        y: \"top\"\r\n                    },\r\n                    of: this._$contextMenuTargetElement\r\n                } : {},\r\n                onItemClick: function(_ref) {\r\n                    var itemData = _ref.itemData;\r\n                    return _this._onItemClick(itemData)\r\n                },\r\n                onShowing: function(e) {\r\n                    if (true === _this._tempState) {\r\n                        return\r\n                    }\r\n                    _this._tempState = true;\r\n                    _this._onVisibleChangedAction({\r\n                        visible: true,\r\n                        component: _this\r\n                    });\r\n                    _this._contextMenuInstance.option(\"items\", _this._getItems(_this._commands, true));\r\n                    delete _this._tempState\r\n                },\r\n                onHiding: function(e) {\r\n                    _this._tempState = false;\r\n                    _this._onVisibleChangedAction({\r\n                        visible: false,\r\n                        component: _this\r\n                    });\r\n                    delete _this._tempState\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getItems\",\r\n        value: function(commands, onlyVisible) {\r\n            var items = [];\r\n            var beginGroup = false;\r\n            commands.forEach(function(command) {\r\n                if (\"separator\" === command.widget) {\r\n                    beginGroup = true\r\n                } else {\r\n                    if (command.visible || !onlyVisible) {\r\n                        items.push({\r\n                            command: command.command,\r\n                            text: command.text,\r\n                            icon: command.icon,\r\n                            getParameter: command.getParameter,\r\n                            beginGroup: beginGroup\r\n                        });\r\n                        beginGroup = false\r\n                    }\r\n                }\r\n            });\r\n            return items\r\n        }\r\n    }, {\r\n        key: \"_show\",\r\n        value: function(x, y, selection) {\r\n            this.clickPosition = {\r\n                x: x,\r\n                y: y\r\n            };\r\n            var _getDiagram2 = (0, _diagram_importer.getDiagram)(),\r\n                Browser = _getDiagram2.Browser;\r\n            if (Browser.TouchUI) {\r\n                this._contextMenuInstance.hide();\r\n                this._$contextMenuTargetElement.show();\r\n                if (!selection) {\r\n                    selection = {\r\n                        x: x,\r\n                        y: y,\r\n                        width: 0,\r\n                        height: 0\r\n                    }\r\n                }\r\n                var widthCorrection = selection.width > DIAGRAM_TOUCHBAR_MIN_UNWRAPPED_WIDTH ? 0 : (DIAGRAM_TOUCHBAR_MIN_UNWRAPPED_WIDTH - selection.width) / 2;\r\n                this._$contextMenuTargetElement.css({\r\n                    left: selection.x - widthCorrection,\r\n                    top: selection.y - DIAGRAM_TOUCHBAR_Y_OFFSET,\r\n                    width: selection.width + 2 * widthCorrection,\r\n                    height: selection.height + 2 * DIAGRAM_TOUCHBAR_Y_OFFSET\r\n                });\r\n                this._contextMenuInstance.show()\r\n            } else {\r\n                this._contextMenuInstance.hide();\r\n                this._contextMenuInstance.option(\"position\", {\r\n                    offset: x + \" \" + y\r\n                });\r\n                this._contextMenuInstance.show()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hide\",\r\n        value: function() {\r\n            this._$contextMenuTargetElement.hide();\r\n            this._contextMenuInstance.hide()\r\n        }\r\n    }, {\r\n        key: \"_onItemClick\",\r\n        value: function(itemData) {\r\n            var processed = false;\r\n            if (this._onItemClickAction) {\r\n                processed = this._onItemClickAction(itemData)\r\n            }\r\n            if (!processed) {\r\n                var parameter = this._getExecCommandParameter(itemData);\r\n                this.bar.raiseBarCommandExecuted(itemData.command, parameter);\r\n                this._contextMenuInstance.hide()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getExecCommandParameter\",\r\n        value: function(itemData) {\r\n            if (itemData.getParameter) {\r\n                return itemData.getParameter(this)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setItemEnabled\",\r\n        value: function(key, enabled) {\r\n            this._setItemVisible(key, enabled)\r\n        }\r\n    }, {\r\n        key: \"_setItemVisible\",\r\n        value: function(key, visible) {\r\n            if (key in this._commandToIndexMap) {\r\n                var command = this._commands[this._commandToIndexMap[key]];\r\n                if (command) {\r\n                    command.visible = visible\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setEnabled\",\r\n        value: function(enabled) {\r\n            this._contextMenuInstance.option(\"disabled\", !enabled)\r\n        }\r\n    }, {\r\n        key: \"isVisible\",\r\n        value: function() {\r\n            if (void 0 !== this._tempState) {\r\n                return this._tempState\r\n            }\r\n            return !!this._contextMenuInstance.option(\"visible\")\r\n        }\r\n    }, {\r\n        key: \"_createOnVisibleChangedAction\",\r\n        value: function() {\r\n            this._onVisibleChangedAction = this._createActionByOption(\"onVisibleChanged\")\r\n        }\r\n    }, {\r\n        key: \"_createOnItemClickAction\",\r\n        value: function() {\r\n            this._onItemClickAction = this._createActionByOption(\"onItemClick\")\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            switch (args.name) {\r\n                case \"onVisibleChanged\":\r\n                    this._createOnVisibleChangedAction();\r\n                    break;\r\n                case \"onItemClick\":\r\n                    this._createOnItemClickAction();\r\n                    break;\r\n                case \"commands\":\r\n                    this._invalidate();\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(DiagramContextMenu.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }]);\r\n    return DiagramContextMenu\r\n}(_ui2.default);\r\nvar ContextMenuBar = function(_DiagramBar) {\r\n    _inherits(ContextMenuBar, _DiagramBar);\r\n\r\n    function ContextMenuBar() {\r\n        _classCallCheck(this, ContextMenuBar);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(ContextMenuBar).apply(this, arguments))\r\n    }\r\n    _createClass(ContextMenuBar, [{\r\n        key: \"getCommandKeys\",\r\n        value: function() {\r\n            return _uiDiagram2.default.getContextMenuCommands().map(function(c) {\r\n                return c.command\r\n            })\r\n        }\r\n    }, {\r\n        key: \"setItemEnabled\",\r\n        value: function(key, enabled) {\r\n            this._owner._setItemEnabled(key, enabled)\r\n        }\r\n    }, {\r\n        key: \"setItemVisible\",\r\n        value: function(key, visible) {\r\n            this._owner._setItemVisible(key, visible)\r\n        }\r\n    }, {\r\n        key: \"setEnabled\",\r\n        value: function(enabled) {\r\n            this._owner._setEnabled(enabled)\r\n        }\r\n    }, {\r\n        key: \"isVisible\",\r\n        value: function() {\r\n            return this._owner.isVisible()\r\n        }\r\n    }]);\r\n    return ContextMenuBar\r\n}(_diagram_bar2.default);\r\nmodule.exports = DiagramContextMenu;\r\n"]},"metadata":{},"sourceType":"module"}