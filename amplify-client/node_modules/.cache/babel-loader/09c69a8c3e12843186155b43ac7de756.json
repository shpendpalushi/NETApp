{"ast":null,"code":"/**\r\n * DevExtreme (ui/gallery.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar commonUtils = require(\"../core/utils/common\");\n\nvar typeUtils = require(\"../core/utils/type\");\n\nvar windowUtils = require(\"../core/utils/window\");\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar getPublicElement = require(\"../core/utils/dom\").getPublicElement;\n\nvar fx = require(\"../animation/fx\");\n\nvar clickEvent = require(\"../events/click\");\n\nvar translator = require(\"../animation/translator\");\n\nvar devices = require(\"../core/devices\");\n\nvar Widget = require(\"./widget/ui.widget\");\n\nvar eventUtils = require(\"../events/utils\");\n\nvar CollectionWidget = require(\"./collection/ui.collection_widget.edit\");\n\nvar Swipeable = require(\"../events/gesture/swipeable\");\n\nvar BindableTemplate = require(\"../core/templates/bindable_template\").BindableTemplate;\n\nvar Deferred = require(\"../core/utils/deferred\").Deferred;\n\nvar GALLERY_CLASS = \"dx-gallery\";\nvar GALLERY_WRAPPER_CLASS = GALLERY_CLASS + \"-wrapper\";\nvar GALLERY_LOOP_CLASS = \"dx-gallery-loop\";\nvar GALLERY_ITEM_CONTAINER_CLASS = GALLERY_CLASS + \"-container\";\nvar GALLERY_ACTIVE_CLASS = GALLERY_CLASS + \"-active\";\nvar GALLERY_ITEM_CLASS = GALLERY_CLASS + \"-item\";\nvar GALLERY_INVISIBLE_ITEM_CLASS = GALLERY_CLASS + \"-item-invisible\";\nvar GALLERY_LOOP_ITEM_CLASS = GALLERY_ITEM_CLASS + \"-loop\";\nvar GALLERY_ITEM_SELECTOR = \".\" + GALLERY_ITEM_CLASS;\nvar GALLERY_ITEM_SELECTED_CLASS = GALLERY_ITEM_CLASS + \"-selected\";\nvar GALLERY_INDICATOR_CLASS = GALLERY_CLASS + \"-indicator\";\nvar GALLERY_INDICATOR_ITEM_CLASS = GALLERY_INDICATOR_CLASS + \"-item\";\nvar GALLERY_INDICATOR_ITEM_SELECTOR = \".\" + GALLERY_INDICATOR_ITEM_CLASS;\nvar GALLERY_INDICATOR_ITEM_SELECTED_CLASS = GALLERY_INDICATOR_ITEM_CLASS + \"-selected\";\nvar GALLERY_IMAGE_CLASS = \"dx-gallery-item-image\";\nvar GALLERY_ITEM_DATA_KEY = \"dxGalleryItemData\";\nvar MAX_CALC_ERROR = 1;\nvar GalleryNavButton = Widget.inherit({\n  _supportedKeys: function _supportedKeys() {\n    return extend(this.callBase(), {\n      pageUp: commonUtils.noop,\n      pageDown: commonUtils.noop\n    });\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      direction: \"next\",\n      onClick: null,\n      hoverStateEnabled: true,\n      activeStateEnabled: true\n    });\n  },\n  _render: function _render() {\n    this.callBase();\n    var that = this;\n    var $element = this.$element();\n    var eventName = eventUtils.addNamespace(clickEvent.name, this.NAME);\n    $element.addClass(GALLERY_CLASS + \"-nav-button-\" + this.option(\"direction\"));\n    eventsEngine.off($element, eventName);\n    eventsEngine.on($element, eventName, function (e) {\n      that._createActionByOption(\"onClick\")({\n        event: e\n      });\n    });\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"onClick\":\n      case \"direction\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\nvar Gallery = CollectionWidget.inherit({\n  _activeStateUnit: GALLERY_ITEM_SELECTOR,\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      activeStateEnabled: false,\n      animationDuration: 400,\n      animationEnabled: true,\n      loop: false,\n      swipeEnabled: true,\n      indicatorEnabled: true,\n      showIndicator: true,\n      selectedIndex: 0,\n      slideshowDelay: 0,\n      showNavButtons: false,\n      wrapAround: false,\n      initialItemWidth: void 0,\n      stretchImages: false,\n      _itemAttributes: {\n        role: \"option\"\n      },\n      loopItemFocus: false,\n      selectOnFocus: true,\n      selectionMode: \"single\",\n      selectionRequired: true,\n      selectionByClick: false\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _init: function _init() {\n    this.callBase();\n    this.option(\"loopItemFocus\", this.option(\"loop\"));\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates.item = new BindableTemplate(function ($container, data) {\n      var $img = $(\"<img>\").addClass(GALLERY_IMAGE_CLASS);\n\n      if (typeUtils.isPlainObject(data)) {\n        this._prepareDefaultItemTemplate(data, $container);\n\n        $img.attr({\n          src: data.imageSrc,\n          alt: data.imageAlt\n        }).appendTo($container);\n      } else {\n        $img.attr(\"src\", String(data)).appendTo($container);\n      }\n    }.bind(this), [\"imageSrc\", \"imageAlt\", \"text\", \"html\"], this.option(\"integrationOptions.watchMethod\"));\n  },\n  _dataSourceOptions: function _dataSourceOptions() {\n    return {\n      paginate: false\n    };\n  },\n  _itemContainer: function _itemContainer() {\n    return this._$container;\n  },\n  _itemClass: function _itemClass() {\n    return GALLERY_ITEM_CLASS;\n  },\n  _itemDataKey: function _itemDataKey() {\n    return GALLERY_ITEM_DATA_KEY;\n  },\n  _actualItemWidth: function _actualItemWidth() {\n    var isWrapAround = this.option(\"wrapAround\");\n\n    if (this.option(\"stretchImages\")) {\n      var itemPerPage = isWrapAround ? this._itemsPerPage() + 1 : this._itemsPerPage();\n      return 1 / itemPerPage;\n    }\n\n    if (isWrapAround) {\n      return this._itemPercentWidth() * this._itemsPerPage() / (this._itemsPerPage() + 1);\n    }\n\n    return this._itemPercentWidth();\n  },\n  _itemPercentWidth: function _itemPercentWidth() {\n    var percentWidth;\n    var elementWidth = this.$element().outerWidth();\n    var initialItemWidth = this.option(\"initialItemWidth\");\n\n    if (initialItemWidth && initialItemWidth <= elementWidth) {\n      percentWidth = initialItemWidth / elementWidth;\n    } else {\n      percentWidth = 1;\n    }\n\n    return percentWidth;\n  },\n  _itemsPerPage: function _itemsPerPage() {\n    var itemsPerPage = windowUtils.hasWindow() ? Math.floor(1 / this._itemPercentWidth()) : 1;\n    return Math.min(itemsPerPage, this._itemsCount());\n  },\n  _pagesCount: function _pagesCount() {\n    return Math.ceil(this._itemsCount() / this._itemsPerPage());\n  },\n  _itemsCount: function _itemsCount() {\n    return (this.option(\"items\") || []).length;\n  },\n  _offsetDirection: function _offsetDirection() {\n    return this.option(\"rtlEnabled\") ? -1 : 1;\n  },\n  _initMarkup: function _initMarkup() {\n    this._renderWrapper();\n\n    this._renderItemsContainer();\n\n    this.$element().addClass(GALLERY_CLASS);\n    this.$element().toggleClass(GALLERY_LOOP_CLASS, this.option(\"loop\"));\n    this.callBase();\n    this.setAria({\n      role: \"listbox\",\n      label: \"gallery\"\n    });\n  },\n  _render: function _render() {\n    this._renderDragHandler();\n\n    this._renderContainerPosition();\n\n    this._renderItemSizes();\n\n    this._renderItemPositions();\n\n    this._renderNavButtons();\n\n    this._renderIndicator();\n\n    this._renderSelectedItem();\n\n    this._renderItemVisibility();\n\n    this._renderUserInteraction();\n\n    this._setupSlideShow();\n\n    this._reviseDimensions();\n\n    this.callBase();\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    var selectedIndex = this.option(\"selectedIndex\") || 0;\n\n    this._stopItemAnimations();\n\n    this._clearCacheWidth();\n\n    this._cloneDuplicateItems();\n\n    this._renderItemSizes();\n\n    this._renderItemPositions();\n\n    this._renderIndicator();\n\n    this._renderContainerPosition(this._calculateIndexOffset(selectedIndex), true);\n\n    this._renderItemVisibility();\n  },\n  _renderDragHandler: function _renderDragHandler() {\n    var eventName = eventUtils.addNamespace(\"dragstart\", this.NAME);\n    eventsEngine.off(this.$element(), eventName);\n    eventsEngine.on(this.$element(), eventName, \"img\", function () {\n      return false;\n    });\n  },\n  _renderWrapper: function _renderWrapper() {\n    if (this._$wrapper) {\n      return;\n    }\n\n    this._$wrapper = $(\"<div>\").addClass(GALLERY_WRAPPER_CLASS).appendTo(this.$element());\n  },\n  _renderItems: function _renderItems(items) {\n    if (!windowUtils.hasWindow()) {\n      var selectedIndex = this.option(\"selectedIndex\");\n      items = items.length > selectedIndex ? items.slice(selectedIndex, selectedIndex + 1) : items.slice(0, 1);\n    }\n\n    this.callBase(items);\n\n    this._loadNextPageIfNeeded();\n  },\n  _renderItemsContainer: function _renderItemsContainer() {\n    if (this._$container) {\n      return;\n    }\n\n    this._$container = $(\"<div>\").addClass(GALLERY_ITEM_CONTAINER_CLASS).appendTo(this._$wrapper);\n  },\n  _cloneDuplicateItems: function _cloneDuplicateItems() {\n    if (!this.option(\"loop\")) {\n      return;\n    }\n\n    var items = this.option(\"items\") || [];\n    var itemsCount = items.length;\n    var lastItemIndex = itemsCount - 1;\n    var i;\n\n    if (!itemsCount) {\n      return;\n    }\n\n    this._getLoopedItems().remove();\n\n    var duplicateCount = Math.min(this._itemsPerPage(), itemsCount);\n\n    var $items = this._getRealItems();\n\n    var $container = this._itemContainer();\n\n    for (i = 0; i < duplicateCount; i++) {\n      this._cloneItemForDuplicate($items[i], $container);\n    }\n\n    for (i = 0; i < duplicateCount; i++) {\n      this._cloneItemForDuplicate($items[lastItemIndex - i], $container);\n    }\n  },\n  _cloneItemForDuplicate: function _cloneItemForDuplicate(item, $container) {\n    if (item) {\n      $(item).clone(true).addClass(GALLERY_LOOP_ITEM_CLASS).css(\"margin\", 0).appendTo($container);\n    }\n  },\n  _getRealItems: function _getRealItems() {\n    var selector = \".\" + GALLERY_ITEM_CLASS + \":not(.\" + GALLERY_LOOP_ITEM_CLASS + \")\";\n    return this.$element().find(selector);\n  },\n  _getLoopedItems: function _getLoopedItems() {\n    return this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS);\n  },\n  _emptyMessageContainer: function _emptyMessageContainer() {\n    return this._$wrapper;\n  },\n  _renderItemSizes: function _renderItemSizes(startIndex) {\n    var $items = this._itemElements();\n\n    var itemWidth = this._actualItemWidth();\n\n    if (void 0 !== startIndex) {\n      $items = $items.slice(startIndex);\n    }\n\n    $items.each(function (index) {\n      $($items[index]).outerWidth(100 * itemWidth + \"%\");\n    });\n  },\n  _renderItemPositions: function _renderItemPositions() {\n    var itemWidth = this._actualItemWidth();\n\n    var itemsCount = this._itemsCount();\n\n    var itemsPerPage = this._itemsPerPage();\n\n    var loopItemsCount = this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS).length;\n    var lastItemDuplicateIndex = itemsCount + loopItemsCount - 1;\n    var offsetRatio = this.option(\"wrapAround\") ? .5 : 0;\n\n    var freeSpace = this._itemFreeSpace();\n\n    var isGapBetweenImages = !!freeSpace;\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    var selectedIndex = this.option(\"selectedIndex\");\n    var side = rtlEnabled ? \"Right\" : \"Left\";\n\n    this._itemElements().each(function (index) {\n      var realIndex = index;\n      var isLoopItem = $(this).hasClass(GALLERY_LOOP_ITEM_CLASS);\n\n      if (index > itemsCount + itemsPerPage - 1) {\n        realIndex = lastItemDuplicateIndex - realIndex - itemsPerPage;\n      }\n\n      if (!isLoopItem && 0 !== realIndex) {\n        if (isGapBetweenImages) {\n          $(this).css(\"margin\" + side, 100 * freeSpace + \"%\");\n        }\n\n        return;\n      }\n\n      var itemPosition = itemWidth * (realIndex + offsetRatio) + freeSpace * (realIndex + 1 - offsetRatio);\n      var property = isLoopItem ? side.toLowerCase() : \"margin\" + side;\n      $(this).css(property, 100 * itemPosition + \"%\");\n    });\n\n    this._relocateItems(selectedIndex, selectedIndex, true);\n  },\n  _itemFreeSpace: function _itemFreeSpace() {\n    var itemsPerPage = this._itemsPerPage();\n\n    if (this.option(\"wrapAround\")) {\n      itemsPerPage += 1;\n    }\n\n    return (1 - this._actualItemWidth() * itemsPerPage) / (itemsPerPage + 1);\n  },\n  _renderContainerPosition: function _renderContainerPosition(offset, hideItems, animate) {\n    this._releaseInvisibleItems();\n\n    offset = offset || 0;\n    var that = this;\n\n    var itemWidth = this._actualItemWidth();\n\n    var targetIndex = offset;\n\n    var targetPosition = this._offsetDirection() * targetIndex * (itemWidth + this._itemFreeSpace());\n\n    var positionReady;\n\n    if (typeUtils.isDefined(this._animationOverride)) {\n      animate = this._animationOverride;\n      delete this._animationOverride;\n    }\n\n    if (animate) {\n      that._startSwipe();\n\n      positionReady = that._animate(targetPosition).done(that._endSwipe.bind(that));\n    } else {\n      translator.move(this._$container, {\n        left: targetPosition * this._elementWidth(),\n        top: 0\n      });\n      positionReady = new Deferred().resolveWith(that);\n    }\n\n    positionReady.done(function () {\n      this._deferredAnimate && that._deferredAnimate.resolveWith(that);\n      hideItems && this._renderItemVisibility();\n    });\n    return positionReady.promise();\n  },\n  _startSwipe: function _startSwipe() {\n    this.$element().addClass(GALLERY_ACTIVE_CLASS);\n  },\n  _endSwipe: function _endSwipe() {\n    this.$element().removeClass(GALLERY_ACTIVE_CLASS);\n  },\n  _animate: function _animate(targetPosition, extraConfig) {\n    var that = this;\n    var $container = this._$container;\n    var animationComplete = new Deferred();\n    fx.animate(this._$container, extend({\n      type: \"slide\",\n      to: {\n        left: targetPosition * this._elementWidth()\n      },\n      duration: that.option(\"animationDuration\"),\n      complete: function complete() {\n        if (that._needMoveContainerForward()) {\n          translator.move($container, {\n            left: 0,\n            top: 0\n          });\n        }\n\n        if (that._needMoveContainerBack()) {\n          translator.move($container, {\n            left: that._maxContainerOffset() * that._elementWidth(),\n            top: 0\n          });\n        }\n\n        animationComplete.resolveWith(that);\n      }\n    }, extraConfig || {}));\n    return animationComplete;\n  },\n  _needMoveContainerForward: function _needMoveContainerForward() {\n    var expectedPosition = this._$container.position().left * this._offsetDirection();\n\n    var actualPosition = -this._maxItemWidth() * this._elementWidth() * this._itemsCount();\n\n    return expectedPosition <= actualPosition + MAX_CALC_ERROR;\n  },\n  _needMoveContainerBack: function _needMoveContainerBack() {\n    var expectedPosition = this._$container.position().left * this._offsetDirection();\n\n    var actualPosition = this._actualItemWidth() * this._elementWidth();\n\n    return expectedPosition >= actualPosition - MAX_CALC_ERROR;\n  },\n  _maxContainerOffset: function _maxContainerOffset() {\n    return -this._maxItemWidth() * (this._itemsCount() - this._itemsPerPage()) * this._offsetDirection();\n  },\n  _maxItemWidth: function _maxItemWidth() {\n    return this._actualItemWidth() + this._itemFreeSpace();\n  },\n  _reviseDimensions: function _reviseDimensions() {\n    var that = this;\n\n    var $firstItem = that._itemElements().first().find(\".dx-item-content\");\n\n    if (!$firstItem || $firstItem.is(\":hidden\")) {\n      return;\n    }\n\n    if (!that.option(\"height\")) {\n      that.option(\"height\", $firstItem.outerHeight());\n    }\n\n    if (!that.option(\"width\")) {\n      that.option(\"width\", $firstItem.outerWidth());\n    }\n\n    this._dimensionChanged();\n  },\n  _renderIndicator: function _renderIndicator() {\n    this._cleanIndicators();\n\n    if (!this.option(\"showIndicator\")) {\n      return;\n    }\n\n    var indicator = this._$indicator = $(\"<div>\").addClass(GALLERY_INDICATOR_CLASS).appendTo(this._$wrapper);\n\n    for (var i = 0; i < this._pagesCount(); i++) {\n      $(\"<div>\").addClass(GALLERY_INDICATOR_ITEM_CLASS).appendTo(indicator);\n    }\n\n    this._renderSelectedPageIndicator();\n  },\n  _cleanIndicators: function _cleanIndicators() {\n    if (this._$indicator) {\n      this._$indicator.remove();\n    }\n  },\n  _renderSelectedItem: function _renderSelectedItem() {\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    this._itemElements().removeClass(GALLERY_ITEM_SELECTED_CLASS).eq(selectedIndex).addClass(GALLERY_ITEM_SELECTED_CLASS);\n  },\n  _renderItemVisibility: function _renderItemVisibility() {\n    if (this.option(\"initialItemWidth\") || this.option(\"wrapAround\")) {\n      this._releaseInvisibleItems();\n\n      return;\n    }\n\n    this._itemElements().each(function (index, item) {\n      if (this.option(\"selectedIndex\") === index) {\n        $(item).removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\n      } else {\n        $(item).addClass(GALLERY_INVISIBLE_ITEM_CLASS);\n      }\n    }.bind(this));\n\n    this._getLoopedItems().addClass(GALLERY_INVISIBLE_ITEM_CLASS);\n  },\n  _releaseInvisibleItems: function _releaseInvisibleItems() {\n    this._itemElements().removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\n\n    this._getLoopedItems().removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\n  },\n  _renderSelectedPageIndicator: function _renderSelectedPageIndicator() {\n    if (!this._$indicator) {\n      return;\n    }\n\n    var itemIndex = this.option(\"selectedIndex\");\n    var lastIndex = this._pagesCount() - 1;\n    var pageIndex = Math.ceil(itemIndex / this._itemsPerPage());\n    pageIndex = Math.min(lastIndex, pageIndex);\n\n    this._$indicator.find(GALLERY_INDICATOR_ITEM_SELECTOR).removeClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS).eq(pageIndex).addClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS);\n  },\n  _renderUserInteraction: function _renderUserInteraction() {\n    var rootElement = this.$element();\n    var swipeEnabled = this.option(\"swipeEnabled\") && this._itemsCount() > 1;\n\n    this._createComponent(rootElement, Swipeable, {\n      disabled: this.option(\"disabled\") || !swipeEnabled,\n      onStart: this._swipeStartHandler.bind(this),\n      onUpdated: this._swipeUpdateHandler.bind(this),\n      onEnd: this._swipeEndHandler.bind(this),\n      itemSizeFunc: this._elementWidth.bind(this)\n    });\n\n    var indicatorSelectAction = this._createAction(this._indicatorSelectHandler);\n\n    eventsEngine.off(rootElement, eventUtils.addNamespace(clickEvent.name, this.NAME), GALLERY_INDICATOR_ITEM_SELECTOR);\n    eventsEngine.on(rootElement, eventUtils.addNamespace(clickEvent.name, this.NAME), GALLERY_INDICATOR_ITEM_SELECTOR, function (e) {\n      indicatorSelectAction({\n        event: e\n      });\n    });\n  },\n  _indicatorSelectHandler: function _indicatorSelectHandler(args) {\n    var e = args.event;\n    var instance = args.component;\n\n    if (!instance.option(\"indicatorEnabled\")) {\n      return;\n    }\n\n    var indicatorIndex = $(e.target).index();\n\n    var itemIndex = instance._fitPaginatedIndex(indicatorIndex * instance._itemsPerPage());\n\n    instance._needLongMove = true;\n    instance.option(\"selectedIndex\", itemIndex);\n\n    instance._loadNextPageIfNeeded(itemIndex);\n  },\n  _renderNavButtons: function _renderNavButtons() {\n    var that = this;\n\n    if (!that.option(\"showNavButtons\")) {\n      that._cleanNavButtons();\n\n      return;\n    }\n\n    that._prevNavButton = $(\"<div>\").appendTo(this._$wrapper);\n\n    that._createComponent(that._prevNavButton, GalleryNavButton, {\n      direction: \"prev\",\n      onClick: function onClick() {\n        that._prevPage();\n      }\n    });\n\n    that._nextNavButton = $(\"<div>\").appendTo(this._$wrapper);\n\n    that._createComponent(that._nextNavButton, GalleryNavButton, {\n      direction: \"next\",\n      onClick: function onClick() {\n        that._nextPage();\n      }\n    });\n\n    this._renderNavButtonsVisibility();\n  },\n  _prevPage: function _prevPage() {\n    var visiblePageSize = this._itemsPerPage();\n\n    var newSelectedIndex = this.option(\"selectedIndex\") - visiblePageSize;\n\n    if (newSelectedIndex === -visiblePageSize && visiblePageSize === this._itemsCount()) {\n      return this._relocateItems(newSelectedIndex, 0);\n    } else {\n      return this.goToItem(this._fitPaginatedIndex(newSelectedIndex));\n    }\n  },\n  _nextPage: function _nextPage() {\n    var visiblePageSize = this._itemsPerPage();\n\n    var newSelectedIndex = this.option(\"selectedIndex\") + visiblePageSize;\n\n    if (newSelectedIndex === visiblePageSize && visiblePageSize === this._itemsCount()) {\n      return this._relocateItems(newSelectedIndex, 0);\n    } else {\n      return this.goToItem(this._fitPaginatedIndex(newSelectedIndex)).done(this._loadNextPageIfNeeded);\n    }\n  },\n  _loadNextPageIfNeeded: function _loadNextPageIfNeeded(selectedIndex) {\n    selectedIndex = void 0 === selectedIndex ? this.option(\"selectedIndex\") : selectedIndex;\n\n    if (this._dataSource && this._dataSource.paginate() && this._shouldLoadNextPage(selectedIndex) && !this._isDataSourceLoading() && !this._isLastPage()) {\n      this._loadNextPage().done(function () {\n        this._renderIndicator();\n\n        this._renderItemPositions();\n\n        this._renderNavButtonsVisibility();\n\n        this._renderItemSizes(selectedIndex);\n      }.bind(this));\n    }\n  },\n  _shouldLoadNextPage: function _shouldLoadNextPage(selectedIndex) {\n    var visiblePageSize = this._itemsPerPage();\n\n    return selectedIndex + 2 * visiblePageSize > this.option(\"items\").length;\n  },\n  _allowDynamicItemsAppend: function _allowDynamicItemsAppend() {\n    return true;\n  },\n  _fitPaginatedIndex: function _fitPaginatedIndex(itemIndex) {\n    var itemsPerPage = this._itemsPerPage();\n\n    var restItemsCount = itemIndex < 0 ? itemsPerPage + itemIndex : this._itemsCount() - itemIndex;\n\n    if (itemIndex > this._itemsCount() - 1) {\n      itemIndex = 0;\n      this._goToGhostItem = true;\n    } else {\n      if (restItemsCount < itemsPerPage && restItemsCount > 0) {\n        if (itemIndex > 0) {\n          itemIndex -= itemsPerPage - restItemsCount;\n        } else {\n          itemIndex += itemsPerPage - restItemsCount;\n        }\n      }\n    }\n\n    return itemIndex;\n  },\n  _cleanNavButtons: function _cleanNavButtons() {\n    if (this._prevNavButton) {\n      this._prevNavButton.remove();\n\n      delete this._prevNavButton;\n    }\n\n    if (this._nextNavButton) {\n      this._nextNavButton.remove();\n\n      delete this._nextNavButton;\n    }\n  },\n  _renderNavButtonsVisibility: function _renderNavButtonsVisibility() {\n    if (!this.option(\"showNavButtons\") || !this._prevNavButton || !this._nextNavButton) {\n      return;\n    }\n\n    var selectedIndex = this.option(\"selectedIndex\");\n    var loop = this.option(\"loop\");\n\n    var itemsCount = this._itemsCount();\n\n    this._prevNavButton.show();\n\n    this._nextNavButton.show();\n\n    if (0 === itemsCount) {\n      this._prevNavButton.hide();\n\n      this._nextNavButton.hide();\n    }\n\n    if (loop) {\n      return;\n    }\n\n    var nextHidden = selectedIndex === itemsCount - this._itemsPerPage();\n\n    var prevHidden = itemsCount < 2 || 0 === selectedIndex;\n\n    if (this._dataSource && this._dataSource.paginate()) {\n      nextHidden = nextHidden && this._isLastPage();\n    } else {\n      nextHidden = nextHidden || itemsCount < 2;\n    }\n\n    if (prevHidden) {\n      this._prevNavButton.hide();\n    }\n\n    if (nextHidden) {\n      this._nextNavButton.hide();\n    }\n  },\n  _setupSlideShow: function _setupSlideShow() {\n    var that = this;\n    var slideshowDelay = that.option(\"slideshowDelay\");\n    clearTimeout(that._slideshowTimer);\n\n    if (!slideshowDelay) {\n      return;\n    }\n\n    that._slideshowTimer = setTimeout(function () {\n      if (that._userInteraction) {\n        that._setupSlideShow();\n\n        return;\n      }\n\n      that.nextItem(true).done(that._setupSlideShow);\n    }, slideshowDelay);\n  },\n  _elementWidth: function _elementWidth() {\n    if (!this._cacheElementWidth) {\n      this._cacheElementWidth = this.$element().width();\n    }\n\n    return this._cacheElementWidth;\n  },\n  _clearCacheWidth: function _clearCacheWidth() {\n    delete this._cacheElementWidth;\n  },\n  _swipeStartHandler: function _swipeStartHandler(e) {\n    this._releaseInvisibleItems();\n\n    this._clearCacheWidth();\n\n    this._elementWidth();\n\n    var itemsCount = this._itemsCount();\n\n    if (!itemsCount) {\n      e.event.cancel = true;\n      return;\n    }\n\n    this._stopItemAnimations();\n\n    this._startSwipe();\n\n    this._userInteraction = true;\n\n    if (!this.option(\"loop\")) {\n      var selectedIndex = this.option(\"selectedIndex\");\n\n      var startOffset = itemsCount - selectedIndex - this._itemsPerPage();\n\n      var endOffset = selectedIndex;\n      var rtlEnabled = this.option(\"rtlEnabled\");\n      e.event.maxLeftOffset = rtlEnabled ? endOffset : startOffset;\n      e.event.maxRightOffset = rtlEnabled ? startOffset : endOffset;\n    }\n  },\n  _stopItemAnimations: function _stopItemAnimations() {\n    fx.stop(this._$container, true);\n  },\n  _swipeUpdateHandler: function _swipeUpdateHandler(e) {\n    var wrapAroundRatio = this.option(\"wrapAround\") ? 1 : 0;\n    var offset = this._offsetDirection() * e.event.offset * (this._itemsPerPage() + wrapAroundRatio) - this.option(\"selectedIndex\");\n\n    if (offset < 0) {\n      this._loadNextPageIfNeeded(Math.ceil(Math.abs(offset)));\n    }\n\n    this._renderContainerPosition(offset);\n  },\n  _swipeEndHandler: function _swipeEndHandler(e) {\n    var targetOffset = e.event.targetOffset * this._offsetDirection() * this._itemsPerPage();\n\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    var newIndex = this._fitIndex(selectedIndex - targetOffset);\n\n    var paginatedIndex = this._fitPaginatedIndex(newIndex);\n\n    if (Math.abs(targetOffset) < this._itemsPerPage()) {\n      this._relocateItems(selectedIndex);\n\n      return;\n    }\n\n    if (this._itemsPerPage() === this._itemsCount()) {\n      if (targetOffset > 0) {\n        this._relocateItems(-targetOffset);\n      } else {\n        this._relocateItems(0);\n      }\n\n      return;\n    }\n\n    this.option(\"selectedIndex\", paginatedIndex);\n  },\n  _setFocusOnSelect: function _setFocusOnSelect() {\n    this._userInteraction = true;\n    var selectedItem = this.itemElements().filter(\".\" + GALLERY_ITEM_SELECTED_CLASS);\n    this.option(\"focusedElement\", getPublicElement(selectedItem));\n    this._userInteraction = false;\n  },\n  _flipIndex: function _flipIndex(index) {\n    var itemsCount = this._itemsCount();\n\n    index %= itemsCount;\n\n    if (index > (itemsCount + 1) / 2) {\n      index -= itemsCount;\n    }\n\n    if (index < -(itemsCount - 1) / 2) {\n      index += itemsCount;\n    }\n\n    return index;\n  },\n  _fitIndex: function _fitIndex(index) {\n    if (!this.option(\"loop\")) {\n      return index;\n    }\n\n    var itemsCount = this._itemsCount();\n\n    if (index >= itemsCount || index < 0) {\n      this._goToGhostItem = true;\n    }\n\n    if (index >= itemsCount) {\n      index = itemsCount - index;\n    }\n\n    index %= itemsCount;\n\n    if (index < 0) {\n      index += itemsCount;\n    }\n\n    return index;\n  },\n  _clean: function _clean() {\n    this.callBase();\n\n    this._cleanIndicators();\n\n    this._cleanNavButtons();\n  },\n  _dispose: function _dispose() {\n    clearTimeout(this._slideshowTimer);\n    this.callBase();\n  },\n  _updateSelection: function _updateSelection(addedSelection, removedSelection) {\n    this._stopItemAnimations();\n\n    this._renderNavButtonsVisibility();\n\n    this._renderSelectedItem();\n\n    this._relocateItems(addedSelection[0], removedSelection[0]);\n\n    this._renderSelectedPageIndicator();\n  },\n  _relocateItems: function _relocateItems(newIndex, prevIndex, withoutAnimation) {\n    if (void 0 === prevIndex) {\n      prevIndex = newIndex;\n    }\n\n    var indexOffset = this._calculateIndexOffset(newIndex, prevIndex);\n\n    this._renderContainerPosition(indexOffset, true, this.option(\"animationEnabled\") && !withoutAnimation).done(function () {\n      this._setFocusOnSelect();\n\n      this._userInteraction = false;\n\n      this._setupSlideShow();\n    });\n  },\n  _focusInHandler: function _focusInHandler() {\n    if (fx.isAnimating(this._$container) || this._userInteraction) {\n      return;\n    }\n\n    this.callBase.apply(this, arguments);\n  },\n  _focusOutHandler: function _focusOutHandler() {\n    if (fx.isAnimating(this._$container) || this._userInteraction) {\n      return;\n    }\n\n    this.callBase.apply(this, arguments);\n  },\n  _selectFocusedItem: commonUtils.noop,\n  _moveFocus: function _moveFocus() {\n    this._stopItemAnimations();\n\n    this.callBase.apply(this, arguments);\n    var index = this.itemElements().index($(this.option(\"focusedElement\")));\n    this.goToItem(index, this.option(\"animationEnabled\"));\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible) {\n      this._reviseDimensions();\n    }\n  },\n  _calculateIndexOffset: function _calculateIndexOffset(newIndex, lastIndex) {\n    if (void 0 === lastIndex) {\n      lastIndex = newIndex;\n    }\n\n    var indexOffset = lastIndex - newIndex;\n\n    if (this.option(\"loop\") && !this._needLongMove && this._goToGhostItem) {\n      if (this._isItemOnFirstPage(newIndex) && this._isItemOnLastPage(lastIndex)) {\n        indexOffset = -this._itemsPerPage();\n      } else {\n        if (this._isItemOnLastPage(newIndex) && this._isItemOnFirstPage(lastIndex)) {\n          indexOffset = this._itemsPerPage();\n        }\n      }\n\n      this._goToGhostItem = false;\n    }\n\n    this._needLongMove = false;\n    indexOffset -= lastIndex;\n    return indexOffset;\n  },\n  _isItemOnLastPage: function _isItemOnLastPage(itemIndex) {\n    return itemIndex >= this._itemsCount() - this._itemsPerPage();\n  },\n  _isItemOnFirstPage: function _isItemOnFirstPage(itemIndex) {\n    return itemIndex <= this._itemsPerPage();\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"width\":\n      case \"initialItemWidth\":\n        this.callBase.apply(this, arguments);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"animationDuration\":\n        this._renderNavButtonsVisibility();\n\n        break;\n\n      case \"animationEnabled\":\n        break;\n\n      case \"loop\":\n        this.$element().toggleClass(GALLERY_LOOP_CLASS, args.value);\n        this.option(\"loopItemFocus\", args.value);\n\n        if (windowUtils.hasWindow()) {\n          this._cloneDuplicateItems();\n\n          this._renderItemPositions();\n\n          this._renderNavButtonsVisibility();\n        }\n\n        break;\n\n      case \"showIndicator\":\n        this._renderIndicator();\n\n        break;\n\n      case \"showNavButtons\":\n        this._renderNavButtons();\n\n        break;\n\n      case \"slideshowDelay\":\n        this._setupSlideShow();\n\n        break;\n\n      case \"wrapAround\":\n      case \"stretchImages\":\n        if (windowUtils.hasWindow()) {\n          this._renderItemSizes();\n\n          this._renderItemPositions();\n\n          this._renderItemVisibility();\n        }\n\n        break;\n\n      case \"swipeEnabled\":\n      case \"indicatorEnabled\":\n        this._renderUserInteraction();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  goToItem: function goToItem(itemIndex, animation) {\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    var itemsCount = this._itemsCount();\n\n    if (void 0 !== animation) {\n      this._animationOverride = animation;\n    }\n\n    itemIndex = this._fitIndex(itemIndex);\n    this._deferredAnimate = new Deferred();\n\n    if (itemIndex > itemsCount - 1 || itemIndex < 0 || selectedIndex === itemIndex) {\n      return this._deferredAnimate.resolveWith(this).promise();\n    }\n\n    this.option(\"selectedIndex\", itemIndex);\n    return this._deferredAnimate.promise();\n  },\n  prevItem: function prevItem(animation) {\n    return this.goToItem(this.option(\"selectedIndex\") - 1, animation);\n  },\n  nextItem: function nextItem(animation) {\n    return this.goToItem(this.option(\"selectedIndex\") + 1, animation);\n  }\n});\nregisterComponent(\"dxGallery\", Gallery);\nmodule.exports = Gallery;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/gallery.js"],"names":["$","require","eventsEngine","registerComponent","commonUtils","typeUtils","windowUtils","extend","getPublicElement","fx","clickEvent","translator","devices","Widget","eventUtils","CollectionWidget","Swipeable","BindableTemplate","Deferred","GALLERY_CLASS","GALLERY_WRAPPER_CLASS","GALLERY_LOOP_CLASS","GALLERY_ITEM_CONTAINER_CLASS","GALLERY_ACTIVE_CLASS","GALLERY_ITEM_CLASS","GALLERY_INVISIBLE_ITEM_CLASS","GALLERY_LOOP_ITEM_CLASS","GALLERY_ITEM_SELECTOR","GALLERY_ITEM_SELECTED_CLASS","GALLERY_INDICATOR_CLASS","GALLERY_INDICATOR_ITEM_CLASS","GALLERY_INDICATOR_ITEM_SELECTOR","GALLERY_INDICATOR_ITEM_SELECTED_CLASS","GALLERY_IMAGE_CLASS","GALLERY_ITEM_DATA_KEY","MAX_CALC_ERROR","GalleryNavButton","_supportedKeys","pageUp","pageDown","noop","_getDefaultOptions","direction","onClick","hoverStateEnabled","activeStateEnabled","_render","that","$element","eventName","event","e","_optionChanged","args","Gallery","_activeStateUnit","animationDuration","animationEnabled","loop","swipeEnabled","indicatorEnabled","showIndicator","selectedIndex","slideshowDelay","showNavButtons","wrapAround","initialItemWidth","stretchImages","_itemAttributes","role","loopItemFocus","selectOnFocus","selectionMode","selectionRequired","selectionByClick","_defaultOptionsRules","device","options","focusStateEnabled","_init","_initTemplates","$img","src","data","alt","imageAlt","String","_dataSourceOptions","paginate","_itemContainer","_itemClass","_itemDataKey","_actualItemWidth","isWrapAround","itemPerPage","_itemPercentWidth","elementWidth","percentWidth","_itemsPerPage","itemsPerPage","Math","_pagesCount","_itemsCount","_offsetDirection","_initMarkup","label","_dimensionChanged","_renderDragHandler","_renderWrapper","_renderItems","items","_renderItemsContainer","_cloneDuplicateItems","itemsCount","lastItemIndex","duplicateCount","$items","$container","i","_cloneItemForDuplicate","_getRealItems","selector","_getLoopedItems","_emptyMessageContainer","_renderItemSizes","itemWidth","_renderItemPositions","loopItemsCount","lastItemDuplicateIndex","offsetRatio","freeSpace","isGapBetweenImages","rtlEnabled","side","realIndex","isLoopItem","index","itemPosition","property","_itemFreeSpace","_renderContainerPosition","offset","targetIndex","targetPosition","animate","positionReady","left","top","hideItems","_startSwipe","_endSwipe","_animate","animationComplete","type","to","duration","complete","extraConfig","_needMoveContainerForward","expectedPosition","actualPosition","_needMoveContainerBack","_maxContainerOffset","_maxItemWidth","_reviseDimensions","$firstItem","_renderIndicator","indicator","_cleanIndicators","_renderSelectedItem","_renderItemVisibility","_releaseInvisibleItems","_renderSelectedPageIndicator","itemIndex","lastIndex","pageIndex","_renderUserInteraction","rootElement","disabled","onStart","onUpdated","onEnd","itemSizeFunc","indicatorSelectAction","_indicatorSelectHandler","instance","indicatorIndex","_renderNavButtons","_prevPage","visiblePageSize","newSelectedIndex","_nextPage","_loadNextPageIfNeeded","_shouldLoadNextPage","_allowDynamicItemsAppend","_fitPaginatedIndex","restItemsCount","_cleanNavButtons","_renderNavButtonsVisibility","nextHidden","prevHidden","_setupSlideShow","clearTimeout","setTimeout","_elementWidth","_clearCacheWidth","_swipeStartHandler","startOffset","endOffset","_stopItemAnimations","_swipeUpdateHandler","wrapAroundRatio","_swipeEndHandler","targetOffset","newIndex","paginatedIndex","_setFocusOnSelect","selectedItem","_flipIndex","_fitIndex","_clean","_dispose","_updateSelection","addedSelection","removedSelection","_relocateItems","prevIndex","indexOffset","_focusInHandler","_focusOutHandler","_selectFocusedItem","_moveFocus","_visibilityChanged","_calculateIndexOffset","_isItemOnLastPage","_isItemOnFirstPage","goToItem","prevItem","nextItem","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/gallery.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../core/renderer\");\r\nvar eventsEngine = require(\"../events/core/events_engine\");\r\nvar registerComponent = require(\"../core/component_registrator\");\r\nvar commonUtils = require(\"../core/utils/common\");\r\nvar typeUtils = require(\"../core/utils/type\");\r\nvar windowUtils = require(\"../core/utils/window\");\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar getPublicElement = require(\"../core/utils/dom\").getPublicElement;\r\nvar fx = require(\"../animation/fx\");\r\nvar clickEvent = require(\"../events/click\");\r\nvar translator = require(\"../animation/translator\");\r\nvar devices = require(\"../core/devices\");\r\nvar Widget = require(\"./widget/ui.widget\");\r\nvar eventUtils = require(\"../events/utils\");\r\nvar CollectionWidget = require(\"./collection/ui.collection_widget.edit\");\r\nvar Swipeable = require(\"../events/gesture/swipeable\");\r\nvar BindableTemplate = require(\"../core/templates/bindable_template\").BindableTemplate;\r\nvar Deferred = require(\"../core/utils/deferred\").Deferred;\r\nvar GALLERY_CLASS = \"dx-gallery\";\r\nvar GALLERY_WRAPPER_CLASS = GALLERY_CLASS + \"-wrapper\";\r\nvar GALLERY_LOOP_CLASS = \"dx-gallery-loop\";\r\nvar GALLERY_ITEM_CONTAINER_CLASS = GALLERY_CLASS + \"-container\";\r\nvar GALLERY_ACTIVE_CLASS = GALLERY_CLASS + \"-active\";\r\nvar GALLERY_ITEM_CLASS = GALLERY_CLASS + \"-item\";\r\nvar GALLERY_INVISIBLE_ITEM_CLASS = GALLERY_CLASS + \"-item-invisible\";\r\nvar GALLERY_LOOP_ITEM_CLASS = GALLERY_ITEM_CLASS + \"-loop\";\r\nvar GALLERY_ITEM_SELECTOR = \".\" + GALLERY_ITEM_CLASS;\r\nvar GALLERY_ITEM_SELECTED_CLASS = GALLERY_ITEM_CLASS + \"-selected\";\r\nvar GALLERY_INDICATOR_CLASS = GALLERY_CLASS + \"-indicator\";\r\nvar GALLERY_INDICATOR_ITEM_CLASS = GALLERY_INDICATOR_CLASS + \"-item\";\r\nvar GALLERY_INDICATOR_ITEM_SELECTOR = \".\" + GALLERY_INDICATOR_ITEM_CLASS;\r\nvar GALLERY_INDICATOR_ITEM_SELECTED_CLASS = GALLERY_INDICATOR_ITEM_CLASS + \"-selected\";\r\nvar GALLERY_IMAGE_CLASS = \"dx-gallery-item-image\";\r\nvar GALLERY_ITEM_DATA_KEY = \"dxGalleryItemData\";\r\nvar MAX_CALC_ERROR = 1;\r\nvar GalleryNavButton = Widget.inherit({\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), {\r\n            pageUp: commonUtils.noop,\r\n            pageDown: commonUtils.noop\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            direction: \"next\",\r\n            onClick: null,\r\n            hoverStateEnabled: true,\r\n            activeStateEnabled: true\r\n        })\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        var that = this;\r\n        var $element = this.$element();\r\n        var eventName = eventUtils.addNamespace(clickEvent.name, this.NAME);\r\n        $element.addClass(GALLERY_CLASS + \"-nav-button-\" + this.option(\"direction\"));\r\n        eventsEngine.off($element, eventName);\r\n        eventsEngine.on($element, eventName, function(e) {\r\n            that._createActionByOption(\"onClick\")({\r\n                event: e\r\n            })\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"onClick\":\r\n            case \"direction\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nvar Gallery = CollectionWidget.inherit({\r\n    _activeStateUnit: GALLERY_ITEM_SELECTOR,\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            activeStateEnabled: false,\r\n            animationDuration: 400,\r\n            animationEnabled: true,\r\n            loop: false,\r\n            swipeEnabled: true,\r\n            indicatorEnabled: true,\r\n            showIndicator: true,\r\n            selectedIndex: 0,\r\n            slideshowDelay: 0,\r\n            showNavButtons: false,\r\n            wrapAround: false,\r\n            initialItemWidth: void 0,\r\n            stretchImages: false,\r\n            _itemAttributes: {\r\n                role: \"option\"\r\n            },\r\n            loopItemFocus: false,\r\n            selectOnFocus: true,\r\n            selectionMode: \"single\",\r\n            selectionRequired: true,\r\n            selectionByClick: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.option(\"loopItemFocus\", this.option(\"loop\"))\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._defaultTemplates.item = new BindableTemplate(function($container, data) {\r\n            var $img = $(\"<img>\").addClass(GALLERY_IMAGE_CLASS);\r\n            if (typeUtils.isPlainObject(data)) {\r\n                this._prepareDefaultItemTemplate(data, $container);\r\n                $img.attr({\r\n                    src: data.imageSrc,\r\n                    alt: data.imageAlt\r\n                }).appendTo($container)\r\n            } else {\r\n                $img.attr(\"src\", String(data)).appendTo($container)\r\n            }\r\n        }.bind(this), [\"imageSrc\", \"imageAlt\", \"text\", \"html\"], this.option(\"integrationOptions.watchMethod\"))\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _itemContainer: function() {\r\n        return this._$container\r\n    },\r\n    _itemClass: function() {\r\n        return GALLERY_ITEM_CLASS\r\n    },\r\n    _itemDataKey: function() {\r\n        return GALLERY_ITEM_DATA_KEY\r\n    },\r\n    _actualItemWidth: function() {\r\n        var isWrapAround = this.option(\"wrapAround\");\r\n        if (this.option(\"stretchImages\")) {\r\n            var itemPerPage = isWrapAround ? this._itemsPerPage() + 1 : this._itemsPerPage();\r\n            return 1 / itemPerPage\r\n        }\r\n        if (isWrapAround) {\r\n            return this._itemPercentWidth() * this._itemsPerPage() / (this._itemsPerPage() + 1)\r\n        }\r\n        return this._itemPercentWidth()\r\n    },\r\n    _itemPercentWidth: function() {\r\n        var percentWidth;\r\n        var elementWidth = this.$element().outerWidth();\r\n        var initialItemWidth = this.option(\"initialItemWidth\");\r\n        if (initialItemWidth && initialItemWidth <= elementWidth) {\r\n            percentWidth = initialItemWidth / elementWidth\r\n        } else {\r\n            percentWidth = 1\r\n        }\r\n        return percentWidth\r\n    },\r\n    _itemsPerPage: function() {\r\n        var itemsPerPage = windowUtils.hasWindow() ? Math.floor(1 / this._itemPercentWidth()) : 1;\r\n        return Math.min(itemsPerPage, this._itemsCount())\r\n    },\r\n    _pagesCount: function() {\r\n        return Math.ceil(this._itemsCount() / this._itemsPerPage())\r\n    },\r\n    _itemsCount: function() {\r\n        return (this.option(\"items\") || []).length\r\n    },\r\n    _offsetDirection: function() {\r\n        return this.option(\"rtlEnabled\") ? -1 : 1\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderWrapper();\r\n        this._renderItemsContainer();\r\n        this.$element().addClass(GALLERY_CLASS);\r\n        this.$element().toggleClass(GALLERY_LOOP_CLASS, this.option(\"loop\"));\r\n        this.callBase();\r\n        this.setAria({\r\n            role: \"listbox\",\r\n            label: \"gallery\"\r\n        })\r\n    },\r\n    _render: function() {\r\n        this._renderDragHandler();\r\n        this._renderContainerPosition();\r\n        this._renderItemSizes();\r\n        this._renderItemPositions();\r\n        this._renderNavButtons();\r\n        this._renderIndicator();\r\n        this._renderSelectedItem();\r\n        this._renderItemVisibility();\r\n        this._renderUserInteraction();\r\n        this._setupSlideShow();\r\n        this._reviseDimensions();\r\n        this.callBase()\r\n    },\r\n    _dimensionChanged: function() {\r\n        var selectedIndex = this.option(\"selectedIndex\") || 0;\r\n        this._stopItemAnimations();\r\n        this._clearCacheWidth();\r\n        this._cloneDuplicateItems();\r\n        this._renderItemSizes();\r\n        this._renderItemPositions();\r\n        this._renderIndicator();\r\n        this._renderContainerPosition(this._calculateIndexOffset(selectedIndex), true);\r\n        this._renderItemVisibility()\r\n    },\r\n    _renderDragHandler: function() {\r\n        var eventName = eventUtils.addNamespace(\"dragstart\", this.NAME);\r\n        eventsEngine.off(this.$element(), eventName);\r\n        eventsEngine.on(this.$element(), eventName, \"img\", function() {\r\n            return false\r\n        })\r\n    },\r\n    _renderWrapper: function() {\r\n        if (this._$wrapper) {\r\n            return\r\n        }\r\n        this._$wrapper = $(\"<div>\").addClass(GALLERY_WRAPPER_CLASS).appendTo(this.$element())\r\n    },\r\n    _renderItems: function(items) {\r\n        if (!windowUtils.hasWindow()) {\r\n            var selectedIndex = this.option(\"selectedIndex\");\r\n            items = items.length > selectedIndex ? items.slice(selectedIndex, selectedIndex + 1) : items.slice(0, 1)\r\n        }\r\n        this.callBase(items);\r\n        this._loadNextPageIfNeeded()\r\n    },\r\n    _renderItemsContainer: function() {\r\n        if (this._$container) {\r\n            return\r\n        }\r\n        this._$container = $(\"<div>\").addClass(GALLERY_ITEM_CONTAINER_CLASS).appendTo(this._$wrapper)\r\n    },\r\n    _cloneDuplicateItems: function() {\r\n        if (!this.option(\"loop\")) {\r\n            return\r\n        }\r\n        var items = this.option(\"items\") || [];\r\n        var itemsCount = items.length;\r\n        var lastItemIndex = itemsCount - 1;\r\n        var i;\r\n        if (!itemsCount) {\r\n            return\r\n        }\r\n        this._getLoopedItems().remove();\r\n        var duplicateCount = Math.min(this._itemsPerPage(), itemsCount);\r\n        var $items = this._getRealItems();\r\n        var $container = this._itemContainer();\r\n        for (i = 0; i < duplicateCount; i++) {\r\n            this._cloneItemForDuplicate($items[i], $container)\r\n        }\r\n        for (i = 0; i < duplicateCount; i++) {\r\n            this._cloneItemForDuplicate($items[lastItemIndex - i], $container)\r\n        }\r\n    },\r\n    _cloneItemForDuplicate: function(item, $container) {\r\n        if (item) {\r\n            $(item).clone(true).addClass(GALLERY_LOOP_ITEM_CLASS).css(\"margin\", 0).appendTo($container)\r\n        }\r\n    },\r\n    _getRealItems: function() {\r\n        var selector = \".\" + GALLERY_ITEM_CLASS + \":not(.\" + GALLERY_LOOP_ITEM_CLASS + \")\";\r\n        return this.$element().find(selector)\r\n    },\r\n    _getLoopedItems: function() {\r\n        return this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS)\r\n    },\r\n    _emptyMessageContainer: function() {\r\n        return this._$wrapper\r\n    },\r\n    _renderItemSizes: function(startIndex) {\r\n        var $items = this._itemElements();\r\n        var itemWidth = this._actualItemWidth();\r\n        if (void 0 !== startIndex) {\r\n            $items = $items.slice(startIndex)\r\n        }\r\n        $items.each(function(index) {\r\n            $($items[index]).outerWidth(100 * itemWidth + \"%\")\r\n        })\r\n    },\r\n    _renderItemPositions: function() {\r\n        var itemWidth = this._actualItemWidth();\r\n        var itemsCount = this._itemsCount();\r\n        var itemsPerPage = this._itemsPerPage();\r\n        var loopItemsCount = this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS).length;\r\n        var lastItemDuplicateIndex = itemsCount + loopItemsCount - 1;\r\n        var offsetRatio = this.option(\"wrapAround\") ? .5 : 0;\r\n        var freeSpace = this._itemFreeSpace();\r\n        var isGapBetweenImages = !!freeSpace;\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var side = rtlEnabled ? \"Right\" : \"Left\";\r\n        this._itemElements().each(function(index) {\r\n            var realIndex = index;\r\n            var isLoopItem = $(this).hasClass(GALLERY_LOOP_ITEM_CLASS);\r\n            if (index > itemsCount + itemsPerPage - 1) {\r\n                realIndex = lastItemDuplicateIndex - realIndex - itemsPerPage\r\n            }\r\n            if (!isLoopItem && 0 !== realIndex) {\r\n                if (isGapBetweenImages) {\r\n                    $(this).css(\"margin\" + side, 100 * freeSpace + \"%\")\r\n                }\r\n                return\r\n            }\r\n            var itemPosition = itemWidth * (realIndex + offsetRatio) + freeSpace * (realIndex + 1 - offsetRatio);\r\n            var property = isLoopItem ? side.toLowerCase() : \"margin\" + side;\r\n            $(this).css(property, 100 * itemPosition + \"%\")\r\n        });\r\n        this._relocateItems(selectedIndex, selectedIndex, true)\r\n    },\r\n    _itemFreeSpace: function() {\r\n        var itemsPerPage = this._itemsPerPage();\r\n        if (this.option(\"wrapAround\")) {\r\n            itemsPerPage += 1\r\n        }\r\n        return (1 - this._actualItemWidth() * itemsPerPage) / (itemsPerPage + 1)\r\n    },\r\n    _renderContainerPosition: function(offset, hideItems, animate) {\r\n        this._releaseInvisibleItems();\r\n        offset = offset || 0;\r\n        var that = this;\r\n        var itemWidth = this._actualItemWidth();\r\n        var targetIndex = offset;\r\n        var targetPosition = this._offsetDirection() * targetIndex * (itemWidth + this._itemFreeSpace());\r\n        var positionReady;\r\n        if (typeUtils.isDefined(this._animationOverride)) {\r\n            animate = this._animationOverride;\r\n            delete this._animationOverride\r\n        }\r\n        if (animate) {\r\n            that._startSwipe();\r\n            positionReady = that._animate(targetPosition).done(that._endSwipe.bind(that))\r\n        } else {\r\n            translator.move(this._$container, {\r\n                left: targetPosition * this._elementWidth(),\r\n                top: 0\r\n            });\r\n            positionReady = (new Deferred).resolveWith(that)\r\n        }\r\n        positionReady.done(function() {\r\n            this._deferredAnimate && that._deferredAnimate.resolveWith(that);\r\n            hideItems && this._renderItemVisibility()\r\n        });\r\n        return positionReady.promise()\r\n    },\r\n    _startSwipe: function() {\r\n        this.$element().addClass(GALLERY_ACTIVE_CLASS)\r\n    },\r\n    _endSwipe: function() {\r\n        this.$element().removeClass(GALLERY_ACTIVE_CLASS)\r\n    },\r\n    _animate: function(targetPosition, extraConfig) {\r\n        var that = this;\r\n        var $container = this._$container;\r\n        var animationComplete = new Deferred;\r\n        fx.animate(this._$container, extend({\r\n            type: \"slide\",\r\n            to: {\r\n                left: targetPosition * this._elementWidth()\r\n            },\r\n            duration: that.option(\"animationDuration\"),\r\n            complete: function() {\r\n                if (that._needMoveContainerForward()) {\r\n                    translator.move($container, {\r\n                        left: 0,\r\n                        top: 0\r\n                    })\r\n                }\r\n                if (that._needMoveContainerBack()) {\r\n                    translator.move($container, {\r\n                        left: that._maxContainerOffset() * that._elementWidth(),\r\n                        top: 0\r\n                    })\r\n                }\r\n                animationComplete.resolveWith(that)\r\n            }\r\n        }, extraConfig || {}));\r\n        return animationComplete\r\n    },\r\n    _needMoveContainerForward: function() {\r\n        var expectedPosition = this._$container.position().left * this._offsetDirection();\r\n        var actualPosition = -this._maxItemWidth() * this._elementWidth() * this._itemsCount();\r\n        return expectedPosition <= actualPosition + MAX_CALC_ERROR\r\n    },\r\n    _needMoveContainerBack: function() {\r\n        var expectedPosition = this._$container.position().left * this._offsetDirection();\r\n        var actualPosition = this._actualItemWidth() * this._elementWidth();\r\n        return expectedPosition >= actualPosition - MAX_CALC_ERROR\r\n    },\r\n    _maxContainerOffset: function() {\r\n        return -this._maxItemWidth() * (this._itemsCount() - this._itemsPerPage()) * this._offsetDirection()\r\n    },\r\n    _maxItemWidth: function() {\r\n        return this._actualItemWidth() + this._itemFreeSpace()\r\n    },\r\n    _reviseDimensions: function() {\r\n        var that = this;\r\n        var $firstItem = that._itemElements().first().find(\".dx-item-content\");\r\n        if (!$firstItem || $firstItem.is(\":hidden\")) {\r\n            return\r\n        }\r\n        if (!that.option(\"height\")) {\r\n            that.option(\"height\", $firstItem.outerHeight())\r\n        }\r\n        if (!that.option(\"width\")) {\r\n            that.option(\"width\", $firstItem.outerWidth())\r\n        }\r\n        this._dimensionChanged()\r\n    },\r\n    _renderIndicator: function() {\r\n        this._cleanIndicators();\r\n        if (!this.option(\"showIndicator\")) {\r\n            return\r\n        }\r\n        var indicator = this._$indicator = $(\"<div>\").addClass(GALLERY_INDICATOR_CLASS).appendTo(this._$wrapper);\r\n        for (var i = 0; i < this._pagesCount(); i++) {\r\n            $(\"<div>\").addClass(GALLERY_INDICATOR_ITEM_CLASS).appendTo(indicator)\r\n        }\r\n        this._renderSelectedPageIndicator()\r\n    },\r\n    _cleanIndicators: function() {\r\n        if (this._$indicator) {\r\n            this._$indicator.remove()\r\n        }\r\n    },\r\n    _renderSelectedItem: function() {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        this._itemElements().removeClass(GALLERY_ITEM_SELECTED_CLASS).eq(selectedIndex).addClass(GALLERY_ITEM_SELECTED_CLASS)\r\n    },\r\n    _renderItemVisibility: function() {\r\n        if (this.option(\"initialItemWidth\") || this.option(\"wrapAround\")) {\r\n            this._releaseInvisibleItems();\r\n            return\r\n        }\r\n        this._itemElements().each(function(index, item) {\r\n            if (this.option(\"selectedIndex\") === index) {\r\n                $(item).removeClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n            } else {\r\n                $(item).addClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n            }\r\n        }.bind(this));\r\n        this._getLoopedItems().addClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n    },\r\n    _releaseInvisibleItems: function() {\r\n        this._itemElements().removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\r\n        this._getLoopedItems().removeClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n    },\r\n    _renderSelectedPageIndicator: function() {\r\n        if (!this._$indicator) {\r\n            return\r\n        }\r\n        var itemIndex = this.option(\"selectedIndex\");\r\n        var lastIndex = this._pagesCount() - 1;\r\n        var pageIndex = Math.ceil(itemIndex / this._itemsPerPage());\r\n        pageIndex = Math.min(lastIndex, pageIndex);\r\n        this._$indicator.find(GALLERY_INDICATOR_ITEM_SELECTOR).removeClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS).eq(pageIndex).addClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS)\r\n    },\r\n    _renderUserInteraction: function() {\r\n        var rootElement = this.$element();\r\n        var swipeEnabled = this.option(\"swipeEnabled\") && this._itemsCount() > 1;\r\n        this._createComponent(rootElement, Swipeable, {\r\n            disabled: this.option(\"disabled\") || !swipeEnabled,\r\n            onStart: this._swipeStartHandler.bind(this),\r\n            onUpdated: this._swipeUpdateHandler.bind(this),\r\n            onEnd: this._swipeEndHandler.bind(this),\r\n            itemSizeFunc: this._elementWidth.bind(this)\r\n        });\r\n        var indicatorSelectAction = this._createAction(this._indicatorSelectHandler);\r\n        eventsEngine.off(rootElement, eventUtils.addNamespace(clickEvent.name, this.NAME), GALLERY_INDICATOR_ITEM_SELECTOR);\r\n        eventsEngine.on(rootElement, eventUtils.addNamespace(clickEvent.name, this.NAME), GALLERY_INDICATOR_ITEM_SELECTOR, function(e) {\r\n            indicatorSelectAction({\r\n                event: e\r\n            })\r\n        })\r\n    },\r\n    _indicatorSelectHandler: function(args) {\r\n        var e = args.event;\r\n        var instance = args.component;\r\n        if (!instance.option(\"indicatorEnabled\")) {\r\n            return\r\n        }\r\n        var indicatorIndex = $(e.target).index();\r\n        var itemIndex = instance._fitPaginatedIndex(indicatorIndex * instance._itemsPerPage());\r\n        instance._needLongMove = true;\r\n        instance.option(\"selectedIndex\", itemIndex);\r\n        instance._loadNextPageIfNeeded(itemIndex)\r\n    },\r\n    _renderNavButtons: function() {\r\n        var that = this;\r\n        if (!that.option(\"showNavButtons\")) {\r\n            that._cleanNavButtons();\r\n            return\r\n        }\r\n        that._prevNavButton = $(\"<div>\").appendTo(this._$wrapper);\r\n        that._createComponent(that._prevNavButton, GalleryNavButton, {\r\n            direction: \"prev\",\r\n            onClick: function() {\r\n                that._prevPage()\r\n            }\r\n        });\r\n        that._nextNavButton = $(\"<div>\").appendTo(this._$wrapper);\r\n        that._createComponent(that._nextNavButton, GalleryNavButton, {\r\n            direction: \"next\",\r\n            onClick: function() {\r\n                that._nextPage()\r\n            }\r\n        });\r\n        this._renderNavButtonsVisibility()\r\n    },\r\n    _prevPage: function() {\r\n        var visiblePageSize = this._itemsPerPage();\r\n        var newSelectedIndex = this.option(\"selectedIndex\") - visiblePageSize;\r\n        if (newSelectedIndex === -visiblePageSize && visiblePageSize === this._itemsCount()) {\r\n            return this._relocateItems(newSelectedIndex, 0)\r\n        } else {\r\n            return this.goToItem(this._fitPaginatedIndex(newSelectedIndex))\r\n        }\r\n    },\r\n    _nextPage: function() {\r\n        var visiblePageSize = this._itemsPerPage();\r\n        var newSelectedIndex = this.option(\"selectedIndex\") + visiblePageSize;\r\n        if (newSelectedIndex === visiblePageSize && visiblePageSize === this._itemsCount()) {\r\n            return this._relocateItems(newSelectedIndex, 0)\r\n        } else {\r\n            return this.goToItem(this._fitPaginatedIndex(newSelectedIndex)).done(this._loadNextPageIfNeeded)\r\n        }\r\n    },\r\n    _loadNextPageIfNeeded: function(selectedIndex) {\r\n        selectedIndex = void 0 === selectedIndex ? this.option(\"selectedIndex\") : selectedIndex;\r\n        if (this._dataSource && this._dataSource.paginate() && this._shouldLoadNextPage(selectedIndex) && !this._isDataSourceLoading() && !this._isLastPage()) {\r\n            this._loadNextPage().done(function() {\r\n                this._renderIndicator();\r\n                this._renderItemPositions();\r\n                this._renderNavButtonsVisibility();\r\n                this._renderItemSizes(selectedIndex)\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _shouldLoadNextPage: function(selectedIndex) {\r\n        var visiblePageSize = this._itemsPerPage();\r\n        return selectedIndex + 2 * visiblePageSize > this.option(\"items\").length\r\n    },\r\n    _allowDynamicItemsAppend: function() {\r\n        return true\r\n    },\r\n    _fitPaginatedIndex: function(itemIndex) {\r\n        var itemsPerPage = this._itemsPerPage();\r\n        var restItemsCount = itemIndex < 0 ? itemsPerPage + itemIndex : this._itemsCount() - itemIndex;\r\n        if (itemIndex > this._itemsCount() - 1) {\r\n            itemIndex = 0;\r\n            this._goToGhostItem = true\r\n        } else {\r\n            if (restItemsCount < itemsPerPage && restItemsCount > 0) {\r\n                if (itemIndex > 0) {\r\n                    itemIndex -= itemsPerPage - restItemsCount\r\n                } else {\r\n                    itemIndex += itemsPerPage - restItemsCount\r\n                }\r\n            }\r\n        }\r\n        return itemIndex\r\n    },\r\n    _cleanNavButtons: function() {\r\n        if (this._prevNavButton) {\r\n            this._prevNavButton.remove();\r\n            delete this._prevNavButton\r\n        }\r\n        if (this._nextNavButton) {\r\n            this._nextNavButton.remove();\r\n            delete this._nextNavButton\r\n        }\r\n    },\r\n    _renderNavButtonsVisibility: function() {\r\n        if (!this.option(\"showNavButtons\") || !this._prevNavButton || !this._nextNavButton) {\r\n            return\r\n        }\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var loop = this.option(\"loop\");\r\n        var itemsCount = this._itemsCount();\r\n        this._prevNavButton.show();\r\n        this._nextNavButton.show();\r\n        if (0 === itemsCount) {\r\n            this._prevNavButton.hide();\r\n            this._nextNavButton.hide()\r\n        }\r\n        if (loop) {\r\n            return\r\n        }\r\n        var nextHidden = selectedIndex === itemsCount - this._itemsPerPage();\r\n        var prevHidden = itemsCount < 2 || 0 === selectedIndex;\r\n        if (this._dataSource && this._dataSource.paginate()) {\r\n            nextHidden = nextHidden && this._isLastPage()\r\n        } else {\r\n            nextHidden = nextHidden || itemsCount < 2\r\n        }\r\n        if (prevHidden) {\r\n            this._prevNavButton.hide()\r\n        }\r\n        if (nextHidden) {\r\n            this._nextNavButton.hide()\r\n        }\r\n    },\r\n    _setupSlideShow: function() {\r\n        var that = this;\r\n        var slideshowDelay = that.option(\"slideshowDelay\");\r\n        clearTimeout(that._slideshowTimer);\r\n        if (!slideshowDelay) {\r\n            return\r\n        }\r\n        that._slideshowTimer = setTimeout(function() {\r\n            if (that._userInteraction) {\r\n                that._setupSlideShow();\r\n                return\r\n            }\r\n            that.nextItem(true).done(that._setupSlideShow)\r\n        }, slideshowDelay)\r\n    },\r\n    _elementWidth: function() {\r\n        if (!this._cacheElementWidth) {\r\n            this._cacheElementWidth = this.$element().width()\r\n        }\r\n        return this._cacheElementWidth\r\n    },\r\n    _clearCacheWidth: function() {\r\n        delete this._cacheElementWidth\r\n    },\r\n    _swipeStartHandler: function(e) {\r\n        this._releaseInvisibleItems();\r\n        this._clearCacheWidth();\r\n        this._elementWidth();\r\n        var itemsCount = this._itemsCount();\r\n        if (!itemsCount) {\r\n            e.event.cancel = true;\r\n            return\r\n        }\r\n        this._stopItemAnimations();\r\n        this._startSwipe();\r\n        this._userInteraction = true;\r\n        if (!this.option(\"loop\")) {\r\n            var selectedIndex = this.option(\"selectedIndex\");\r\n            var startOffset = itemsCount - selectedIndex - this._itemsPerPage();\r\n            var endOffset = selectedIndex;\r\n            var rtlEnabled = this.option(\"rtlEnabled\");\r\n            e.event.maxLeftOffset = rtlEnabled ? endOffset : startOffset;\r\n            e.event.maxRightOffset = rtlEnabled ? startOffset : endOffset\r\n        }\r\n    },\r\n    _stopItemAnimations: function() {\r\n        fx.stop(this._$container, true)\r\n    },\r\n    _swipeUpdateHandler: function(e) {\r\n        var wrapAroundRatio = this.option(\"wrapAround\") ? 1 : 0;\r\n        var offset = this._offsetDirection() * e.event.offset * (this._itemsPerPage() + wrapAroundRatio) - this.option(\"selectedIndex\");\r\n        if (offset < 0) {\r\n            this._loadNextPageIfNeeded(Math.ceil(Math.abs(offset)))\r\n        }\r\n        this._renderContainerPosition(offset)\r\n    },\r\n    _swipeEndHandler: function(e) {\r\n        var targetOffset = e.event.targetOffset * this._offsetDirection() * this._itemsPerPage();\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var newIndex = this._fitIndex(selectedIndex - targetOffset);\r\n        var paginatedIndex = this._fitPaginatedIndex(newIndex);\r\n        if (Math.abs(targetOffset) < this._itemsPerPage()) {\r\n            this._relocateItems(selectedIndex);\r\n            return\r\n        }\r\n        if (this._itemsPerPage() === this._itemsCount()) {\r\n            if (targetOffset > 0) {\r\n                this._relocateItems(-targetOffset)\r\n            } else {\r\n                this._relocateItems(0)\r\n            }\r\n            return\r\n        }\r\n        this.option(\"selectedIndex\", paginatedIndex)\r\n    },\r\n    _setFocusOnSelect: function() {\r\n        this._userInteraction = true;\r\n        var selectedItem = this.itemElements().filter(\".\" + GALLERY_ITEM_SELECTED_CLASS);\r\n        this.option(\"focusedElement\", getPublicElement(selectedItem));\r\n        this._userInteraction = false\r\n    },\r\n    _flipIndex: function(index) {\r\n        var itemsCount = this._itemsCount();\r\n        index %= itemsCount;\r\n        if (index > (itemsCount + 1) / 2) {\r\n            index -= itemsCount\r\n        }\r\n        if (index < -(itemsCount - 1) / 2) {\r\n            index += itemsCount\r\n        }\r\n        return index\r\n    },\r\n    _fitIndex: function(index) {\r\n        if (!this.option(\"loop\")) {\r\n            return index\r\n        }\r\n        var itemsCount = this._itemsCount();\r\n        if (index >= itemsCount || index < 0) {\r\n            this._goToGhostItem = true\r\n        }\r\n        if (index >= itemsCount) {\r\n            index = itemsCount - index\r\n        }\r\n        index %= itemsCount;\r\n        if (index < 0) {\r\n            index += itemsCount\r\n        }\r\n        return index\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._cleanIndicators();\r\n        this._cleanNavButtons()\r\n    },\r\n    _dispose: function() {\r\n        clearTimeout(this._slideshowTimer);\r\n        this.callBase()\r\n    },\r\n    _updateSelection: function(addedSelection, removedSelection) {\r\n        this._stopItemAnimations();\r\n        this._renderNavButtonsVisibility();\r\n        this._renderSelectedItem();\r\n        this._relocateItems(addedSelection[0], removedSelection[0]);\r\n        this._renderSelectedPageIndicator()\r\n    },\r\n    _relocateItems: function(newIndex, prevIndex, withoutAnimation) {\r\n        if (void 0 === prevIndex) {\r\n            prevIndex = newIndex\r\n        }\r\n        var indexOffset = this._calculateIndexOffset(newIndex, prevIndex);\r\n        this._renderContainerPosition(indexOffset, true, this.option(\"animationEnabled\") && !withoutAnimation).done(function() {\r\n            this._setFocusOnSelect();\r\n            this._userInteraction = false;\r\n            this._setupSlideShow()\r\n        })\r\n    },\r\n    _focusInHandler: function() {\r\n        if (fx.isAnimating(this._$container) || this._userInteraction) {\r\n            return\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _focusOutHandler: function() {\r\n        if (fx.isAnimating(this._$container) || this._userInteraction) {\r\n            return\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _selectFocusedItem: commonUtils.noop,\r\n    _moveFocus: function() {\r\n        this._stopItemAnimations();\r\n        this.callBase.apply(this, arguments);\r\n        var index = this.itemElements().index($(this.option(\"focusedElement\")));\r\n        this.goToItem(index, this.option(\"animationEnabled\"))\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._reviseDimensions()\r\n        }\r\n    },\r\n    _calculateIndexOffset: function(newIndex, lastIndex) {\r\n        if (void 0 === lastIndex) {\r\n            lastIndex = newIndex\r\n        }\r\n        var indexOffset = lastIndex - newIndex;\r\n        if (this.option(\"loop\") && !this._needLongMove && this._goToGhostItem) {\r\n            if (this._isItemOnFirstPage(newIndex) && this._isItemOnLastPage(lastIndex)) {\r\n                indexOffset = -this._itemsPerPage()\r\n            } else {\r\n                if (this._isItemOnLastPage(newIndex) && this._isItemOnFirstPage(lastIndex)) {\r\n                    indexOffset = this._itemsPerPage()\r\n                }\r\n            }\r\n            this._goToGhostItem = false\r\n        }\r\n        this._needLongMove = false;\r\n        indexOffset -= lastIndex;\r\n        return indexOffset\r\n    },\r\n    _isItemOnLastPage: function(itemIndex) {\r\n        return itemIndex >= this._itemsCount() - this._itemsPerPage()\r\n    },\r\n    _isItemOnFirstPage: function(itemIndex) {\r\n        return itemIndex <= this._itemsPerPage()\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"width\":\r\n            case \"initialItemWidth\":\r\n                this.callBase.apply(this, arguments);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"animationDuration\":\r\n                this._renderNavButtonsVisibility();\r\n                break;\r\n            case \"animationEnabled\":\r\n                break;\r\n            case \"loop\":\r\n                this.$element().toggleClass(GALLERY_LOOP_CLASS, args.value);\r\n                this.option(\"loopItemFocus\", args.value);\r\n                if (windowUtils.hasWindow()) {\r\n                    this._cloneDuplicateItems();\r\n                    this._renderItemPositions();\r\n                    this._renderNavButtonsVisibility()\r\n                }\r\n                break;\r\n            case \"showIndicator\":\r\n                this._renderIndicator();\r\n                break;\r\n            case \"showNavButtons\":\r\n                this._renderNavButtons();\r\n                break;\r\n            case \"slideshowDelay\":\r\n                this._setupSlideShow();\r\n                break;\r\n            case \"wrapAround\":\r\n            case \"stretchImages\":\r\n                if (windowUtils.hasWindow()) {\r\n                    this._renderItemSizes();\r\n                    this._renderItemPositions();\r\n                    this._renderItemVisibility()\r\n                }\r\n                break;\r\n            case \"swipeEnabled\":\r\n            case \"indicatorEnabled\":\r\n                this._renderUserInteraction();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    goToItem: function(itemIndex, animation) {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var itemsCount = this._itemsCount();\r\n        if (void 0 !== animation) {\r\n            this._animationOverride = animation\r\n        }\r\n        itemIndex = this._fitIndex(itemIndex);\r\n        this._deferredAnimate = new Deferred;\r\n        if (itemIndex > itemsCount - 1 || itemIndex < 0 || selectedIndex === itemIndex) {\r\n            return this._deferredAnimate.resolveWith(this).promise()\r\n        }\r\n        this.option(\"selectedIndex\", itemIndex);\r\n        return this._deferredAnimate.promise()\r\n    },\r\n    prevItem: function(animation) {\r\n        return this.goToItem(this.option(\"selectedIndex\") - 1, animation)\r\n    },\r\n    nextItem: function(animation) {\r\n        return this.goToItem(this.option(\"selectedIndex\") + 1, animation)\r\n    }\r\n});\r\nregisterComponent(\"dxGallery\", Gallery);\r\nmodule.exports = Gallery;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}