{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_uploader.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _guid = require(\"../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _window = require(\"../core/utils/window\");\n\nvar _events_engine = require(\"../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _component_registrator = require(\"../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _callbacks = require(\"../core/utils/callbacks\");\n\nvar _callbacks2 = _interopRequireDefault(_callbacks);\n\nvar _type = require(\"../core/utils/type\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _array = require(\"../core/utils/array\");\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _ajax = require(\"../core/utils/ajax\");\n\nvar _ajax2 = _interopRequireDefault(_ajax);\n\nvar _editor = require(\"./editor/editor\");\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _button = require(\"./button\");\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _progress_bar = require(\"./progress_bar\");\n\nvar _progress_bar2 = _interopRequireDefault(_progress_bar);\n\nvar _browser = require(\"../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _devices = require(\"../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _utils = require(\"../events/utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _click = require(\"../events/click\");\n\nvar _click2 = _interopRequireDefault(_click);\n\nvar _message = require(\"../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _themes = require(\"./themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar window = (0, _window.getWindow)();\nvar FILEUPLOADER_CLASS = \"dx-fileuploader\";\nvar FILEUPLOADER_EMPTY_CLASS = \"dx-fileuploader-empty\";\nvar FILEUPLOADER_SHOW_FILE_LIST_CLASS = \"dx-fileuploader-show-file-list\";\nvar FILEUPLOADER_DRAGOVER_CLASS = \"dx-fileuploader-dragover\";\nvar FILEUPLOADER_WRAPPER_CLASS = \"dx-fileuploader-wrapper\";\nvar FILEUPLOADER_CONTAINER_CLASS = \"dx-fileuploader-container\";\nvar FILEUPLOADER_CONTENT_CLASS = \"dx-fileuploader-content\";\nvar FILEUPLOADER_INPUT_WRAPPER_CLASS = \"dx-fileuploader-input-wrapper\";\nvar FILEUPLOADER_INPUT_CONTAINER_CLASS = \"dx-fileuploader-input-container\";\nvar FILEUPLOADER_INPUT_LABEL_CLASS = \"dx-fileuploader-input-label\";\nvar FILEUPLOADER_INPUT_CLASS = \"dx-fileuploader-input\";\nvar FILEUPLOADER_FILES_CONTAINER_CLASS = \"dx-fileuploader-files-container\";\nvar FILEUPLOADER_FILE_CONTAINER_CLASS = \"dx-fileuploader-file-container\";\nvar FILEUPLOADER_FILE_INFO_CLASS = \"dx-fileuploader-file-info\";\nvar FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS = \"dx-fileuploader-file-status-message\";\nvar FILEUPLOADER_FILE_CLASS = \"dx-fileuploader-file\";\nvar FILEUPLOADER_FILE_NAME_CLASS = \"dx-fileuploader-file-name\";\nvar FILEUPLOADER_FILE_SIZE_CLASS = \"dx-fileuploader-file-size\";\nvar FILEUPLOADER_BUTTON_CLASS = \"dx-fileuploader-button\";\nvar FILEUPLOADER_BUTTON_CONTAINER_CLASS = \"dx-fileuploader-button-container\";\nvar FILEUPLOADER_CANCEL_BUTTON_CLASS = \"dx-fileuploader-cancel-button\";\nvar FILEUPLOADER_UPLOAD_BUTTON_CLASS = \"dx-fileuploader-upload-button\";\nvar FILEUPLOADER_INVALID_CLASS = \"dx-fileuploader-invalid\";\nvar FILEUPLOADER_AFTER_LOAD_DELAY = 400;\nvar FILEUPLOADER_CHUNK_META_DATA_NAME = \"chunkMetadata\";\n\nvar renderFileUploaderInput = function renderFileUploaderInput() {\n  return (0, _renderer2.default)(\"<input>\").attr(\"type\", \"file\");\n};\n\nvar isFormDataSupported = function isFormDataSupported() {\n  return !!window.FormData;\n};\n\nvar FileUploader = function (_Editor) {\n  _inherits(FileUploader, _Editor);\n\n  function FileUploader() {\n    _classCallCheck(this, FileUploader);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FileUploader).apply(this, arguments));\n  }\n\n  _createClass(FileUploader, [{\n    key: \"_supportedKeys\",\n    value: function value() {\n      var _this = this;\n\n      var click = function click(e) {\n        e.preventDefault();\n\n        var $selectButton = _this._selectButton.$element();\n\n        _events_engine2.default.trigger($selectButton, _click2.default.name);\n      };\n\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_supportedKeys\", this).call(this), {\n        space: click,\n        enter: click\n      });\n    }\n  }, {\n    key: \"_setOptionsByReference\",\n    value: function value() {\n      _get(_getPrototypeOf(FileUploader.prototype), \"_setOptionsByReference\", this).call(this);\n\n      (0, _extend.extend)(this._optionsByReference, {\n        value: true\n      });\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_getDefaultOptions\", this).call(this), {\n        chunkSize: 0,\n        value: [],\n        selectButtonText: _message2.default.format(\"dxFileUploader-selectFile\"),\n        uploadButtonText: _message2.default.format(\"dxFileUploader-upload\"),\n        labelText: _message2.default.format(\"dxFileUploader-dropFile\"),\n        name: \"files[]\",\n        multiple: false,\n        accept: \"\",\n        uploadUrl: \"/\",\n        allowCanceling: true,\n        showFileList: true,\n        progress: 0,\n        readyToUploadMessage: _message2.default.format(\"dxFileUploader-readyToUpload\"),\n        uploadedMessage: _message2.default.format(\"dxFileUploader-uploaded\"),\n        uploadFailedMessage: _message2.default.format(\"dxFileUploader-uploadFailedMessage\"),\n        uploadMode: \"instantly\",\n        uploadMethod: \"POST\",\n        uploadHeaders: {},\n        onUploadStarted: null,\n        onUploaded: null,\n        onProgress: null,\n        onUploadError: null,\n        onUploadAborted: null,\n        allowedFileExtensions: [],\n        maxFileSize: 0,\n        minFileSize: 0,\n        invalidFileExtensionMessage: _message2.default.format(\"dxFileUploader-invalidFileExtension\"),\n        invalidMaxFileSizeMessage: _message2.default.format(\"dxFileUploader-invalidMaxFileSize\"),\n        invalidMinFileSizeMessage: _message2.default.format(\"dxFileUploader-invalidMinFileSize\"),\n        extendSelection: true,\n        validationMessageMode: \"always\",\n        uploadFile: null,\n        uploadChunk: null,\n        abortUpload: null,\n        validationMessageOffset: {\n          h: 0,\n          v: 0\n        },\n        useNativeInputClick: false,\n        useDragOver: true,\n        nativeDropSupported: true,\n        _uploadButtonType: \"normal\"\n      });\n    }\n  }, {\n    key: \"_defaultOptionsRules\",\n    value: function value() {\n      return _get(_getPrototypeOf(FileUploader.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\n        device: function device() {\n          return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator();\n        },\n        options: {\n          focusStateEnabled: true\n        }\n      }, {\n        device: [{\n          platform: \"android\"\n        }],\n        options: {\n          validationMessageOffset: {\n            v: 0\n          }\n        }\n      }, {\n        device: function device() {\n          return \"desktop\" !== _devices2.default.real().deviceType;\n        },\n        options: {\n          useDragOver: false\n        }\n      }, {\n        device: function device() {\n          return !isFormDataSupported();\n        },\n        options: {\n          uploadMode: \"useForm\"\n        }\n      }, {\n        device: function device() {\n          return _browser2.default.msie || \"desktop\" !== _devices2.default.real().deviceType;\n        },\n        options: {\n          nativeDropSupported: false\n        }\n      }, {\n        device: function device() {\n          return _themes2.default.isMaterial();\n        },\n        options: {\n          _uploadButtonType: \"default\"\n        }\n      }]);\n    }\n  }, {\n    key: \"_init\",\n    value: function value() {\n      _get(_getPrototypeOf(FileUploader.prototype), \"_init\", this).call(this);\n\n      this._initFileInput();\n\n      this._initLabel();\n\n      this._setUploadStrategy();\n\n      this._createFiles();\n\n      this._createUploadStartedAction();\n\n      this._createUploadedAction();\n\n      this._createProgressAction();\n\n      this._createUploadErrorAction();\n\n      this._createUploadAbortedAction();\n    }\n  }, {\n    key: \"_setUploadStrategy\",\n    value: function value() {\n      var strategy = null;\n\n      if (this.option(\"chunkSize\") > 0) {\n        var uploadChunk = this.option(\"uploadChunk\");\n        strategy = uploadChunk && (0, _type.isFunction)(uploadChunk) ? new CustomChunksFileUploadStrategy(this) : new DefaultChunksFileUploadStrategy(this);\n      } else {\n        var uploadFile = this.option(\"uploadFile\");\n        strategy = uploadFile && (0, _type.isFunction)(uploadFile) ? new CustomWholeFileUploadStrategy(this) : new DefaultWholeFileUploadStrategy(this);\n      }\n\n      this._uploadStrategy = strategy;\n    }\n  }, {\n    key: \"_initFileInput\",\n    value: function value() {\n      var _this2 = this;\n\n      this._isCustomClickEvent = false;\n\n      if (!this._$fileInput) {\n        this._$fileInput = renderFileUploaderInput();\n\n        _events_engine2.default.on(this._$fileInput, \"change\", this._inputChangeHandler.bind(this));\n\n        _events_engine2.default.on(this._$fileInput, \"click\", function (e) {\n          e.stopPropagation();\n          return _this2.option(\"useNativeInputClick\") || _this2._isCustomClickEvent;\n        });\n      }\n\n      this._$fileInput.prop({\n        multiple: this.option(\"multiple\"),\n        accept: this.option(\"accept\"),\n        tabIndex: -1\n      });\n    }\n  }, {\n    key: \"_inputChangeHandler\",\n    value: function value() {\n      if (this._doPreventInputChange) {\n        return;\n      }\n\n      var fileName = this._$fileInput.val().replace(/^.*\\\\/, \"\");\n\n      var files = this._$fileInput.prop(\"files\");\n\n      if (files && !files.length) {\n        return;\n      }\n\n      var value = files ? this._getFiles(files) : [{\n        name: fileName\n      }];\n\n      this._changeValue(value);\n\n      if (\"instantly\" === this.option(\"uploadMode\")) {\n        this._uploadFiles();\n      }\n    }\n  }, {\n    key: \"_shouldFileListBeExtended\",\n    value: function value() {\n      return \"useForm\" !== this.option(\"uploadMode\") && this.option(\"extendSelection\") && this.option(\"multiple\");\n    }\n  }, {\n    key: \"_removeDuplicates\",\n    value: function value(files, _value) {\n      var result = [];\n\n      for (var i = 0; i < _value.length; i++) {\n        if (!this._isFileInArray(files, _value[i])) {\n          result.push(_value[i]);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_isFileInArray\",\n    value: function value(files, file) {\n      for (var i = 0; i < files.length; i++) {\n        var item = files[i];\n\n        if (item.size === file.size && item.name === file.name) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_changeValue\",\n    value: function value(_value2) {\n      var files = this._shouldFileListBeExtended() ? this.option(\"value\").slice() : [];\n\n      if (\"instantly\" !== this.option(\"uploadMode\")) {\n        _value2 = this._removeDuplicates(files, _value2);\n      }\n\n      this.option(\"value\", files.concat(_value2));\n    }\n  }, {\n    key: \"_getFiles\",\n    value: function value(fileList) {\n      var values = [];\n      (0, _iterator.each)(fileList, function (_, value) {\n        return values.push(value);\n      });\n      return values;\n    }\n  }, {\n    key: \"_initLabel\",\n    value: function value() {\n      if (!this._$inputLabel) {\n        this._$inputLabel = (0, _renderer2.default)(\"<div>\");\n      }\n\n      this._$inputLabel.text(this.option(\"labelText\"));\n    }\n  }, {\n    key: \"_focusTarget\",\n    value: function value() {\n      return this.$element().find(\".\" + FILEUPLOADER_BUTTON_CLASS);\n    }\n  }, {\n    key: \"_getSubmitElement\",\n    value: function value() {\n      return this._$fileInput;\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function value() {\n      _get(_getPrototypeOf(FileUploader.prototype), \"_initMarkup\", this).call(this);\n\n      this.$element().addClass(FILEUPLOADER_CLASS);\n\n      this._renderWrapper();\n\n      this._renderInputWrapper();\n\n      this._renderSelectButton();\n\n      this._renderInputContainer();\n\n      this._renderUploadButton();\n\n      this._preventRecreatingFiles = true;\n    }\n  }, {\n    key: \"_render\",\n    value: function value() {\n      this._preventRecreatingFiles = false;\n\n      this._renderDragEvents();\n\n      this._renderFiles();\n\n      _get(_getPrototypeOf(FileUploader.prototype), \"_render\", this).call(this);\n    }\n  }, {\n    key: \"_createFileProgressBar\",\n    value: function value(file) {\n      file.progressBar = this._createProgressBar(file.value.size);\n      file.progressBar.$element().appendTo(file.$file);\n\n      this._initStatusMessage(file);\n\n      this._initCancelButton(file);\n    }\n  }, {\n    key: \"_setStatusMessage\",\n    value: function value(file, key) {\n      var _this3 = this;\n\n      setTimeout(function () {\n        if (_this3.option(\"showFileList\")) {\n          file.$statusMessage.text(_this3.option(key));\n          file.$statusMessage.css(\"display\", \"\");\n          file.progressBar.$element().remove();\n        }\n      }, FILEUPLOADER_AFTER_LOAD_DELAY);\n    }\n  }, {\n    key: \"_createFiles\",\n    value: function value() {\n      var _this4 = this;\n\n      var value = this.option(\"value\");\n\n      if (this._files && (0 === value.length || !this._shouldFileListBeExtended())) {\n        this._preventFilesUploading(this._files);\n\n        this._files = null;\n      }\n\n      if (!this._files) {\n        this._files = [];\n      }\n\n      (0, _iterator.each)(value.slice(this._files.length), function (_, value) {\n        var file = _this4._createFile(value);\n\n        _this4._validateFile(file);\n\n        _this4._files.push(file);\n      });\n    }\n  }, {\n    key: \"_preventFilesUploading\",\n    value: function value(files) {\n      var _this5 = this;\n\n      files.forEach(function (file) {\n        return _this5._uploadStrategy.abortUpload(file);\n      });\n    }\n  }, {\n    key: \"_validateFile\",\n    value: function value(file) {\n      file.isValidFileExtension = this._validateFileExtension(file);\n      file.isValidMinSize = this._validateMinFileSize(file);\n      file.isValidMaxSize = this._validateMaxFileSize(file);\n    }\n  }, {\n    key: \"_validateFileExtension\",\n    value: function value(file) {\n      var allowedExtensions = this.option(\"allowedFileExtensions\");\n      var fileExtension = file.value.name.substring(file.value.name.lastIndexOf(\".\")).toLowerCase();\n\n      if (0 === allowedExtensions.length) {\n        return true;\n      }\n\n      for (var i = 0; i < allowedExtensions.length; i++) {\n        if (fileExtension === allowedExtensions[i].toLowerCase()) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_validateMaxFileSize\",\n    value: function value(file) {\n      var fileSize = file.value.size;\n      var maxFileSize = this.option(\"maxFileSize\");\n      return maxFileSize > 0 ? fileSize <= maxFileSize : true;\n    }\n  }, {\n    key: \"_validateMinFileSize\",\n    value: function value(file) {\n      var fileSize = file.value.size;\n      var minFileSize = this.option(\"minFileSize\");\n      return minFileSize > 0 ? fileSize >= minFileSize : true;\n    }\n  }, {\n    key: \"_createUploadStartedAction\",\n    value: function value() {\n      this._uploadStartedAction = this._createActionByOption(\"onUploadStarted\");\n    }\n  }, {\n    key: \"_createUploadedAction\",\n    value: function value() {\n      this._uploadedAction = this._createActionByOption(\"onUploaded\");\n    }\n  }, {\n    key: \"_createProgressAction\",\n    value: function value() {\n      this._progressAction = this._createActionByOption(\"onProgress\");\n    }\n  }, {\n    key: \"_createUploadAbortedAction\",\n    value: function value() {\n      this._uploadAbortedAction = this._createActionByOption(\"onUploadAborted\");\n    }\n  }, {\n    key: \"_createUploadErrorAction\",\n    value: function value() {\n      this._uploadErrorAction = this._createActionByOption(\"onUploadError\");\n    }\n  }, {\n    key: \"_createFile\",\n    value: function value(_value3) {\n      return {\n        value: _value3,\n        loadedSize: 0,\n        onProgress: (0, _callbacks2.default)(),\n        onAbort: (0, _callbacks2.default)(),\n        onLoad: (0, _callbacks2.default)(),\n        onError: (0, _callbacks2.default)(),\n        onLoadStart: (0, _callbacks2.default)(),\n        isValidFileExtension: true,\n        isValidMaxSize: true,\n        isValidMinSize: true,\n        isValid: function isValid() {\n          return this.isValidFileExtension && this.isValidMaxSize && this.isValidMinSize;\n        }\n      };\n    }\n  }, {\n    key: \"_renderFiles\",\n    value: function value() {\n      var _this6 = this;\n\n      var value = this.option(\"value\");\n\n      if (!this._$filesContainer) {\n        this._$filesContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILES_CONTAINER_CLASS).appendTo(this._$content);\n      } else {\n        if (!this._shouldFileListBeExtended() || 0 === value.length) {\n          this._$filesContainer.empty();\n        }\n      }\n\n      var showFileList = this.option(\"showFileList\");\n\n      if (showFileList) {\n        (0, _iterator.each)(this._files, function (_, file) {\n          if (!file.$file) {\n            _this6._renderFile(file);\n          }\n        });\n      }\n\n      this.$element().toggleClass(FILEUPLOADER_SHOW_FILE_LIST_CLASS, showFileList);\n\n      this._toggleFileUploaderEmptyClassName();\n\n      this._updateFileNameMaxWidth();\n\n      this._$validationMessage && this._$validationMessage.dxOverlay(\"instance\").repaint();\n    }\n  }, {\n    key: \"_renderFile\",\n    value: function value(file) {\n      var value = file.value;\n      var $fileContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CONTAINER_CLASS).appendTo(this._$filesContainer);\n\n      this._renderFileButtons(file, $fileContainer);\n\n      file.$file = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CLASS).appendTo($fileContainer);\n      var $fileInfo = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_INFO_CLASS).appendTo(file.$file);\n      file.$statusMessage = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS).appendTo(file.$file);\n      (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_NAME_CLASS).text(value.name).appendTo($fileInfo);\n\n      if ((0, _type.isDefined)(value.size)) {\n        (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_SIZE_CLASS).text(this._getFileSize(value.size)).appendTo($fileInfo);\n      }\n\n      if (file.isValid()) {\n        file.$statusMessage.text(this.option(\"readyToUploadMessage\"));\n      } else {\n        if (!file.isValidFileExtension) {\n          file.$statusMessage.append(this._createValidationElement(\"invalidFileExtensionMessage\"));\n        }\n\n        if (!file.isValidMaxSize) {\n          file.$statusMessage.append(this._createValidationElement(\"invalidMaxFileSizeMessage\"));\n        }\n\n        if (!file.isValidMinSize) {\n          file.$statusMessage.append(this._createValidationElement(\"invalidMinFileSizeMessage\"));\n        }\n\n        $fileContainer.addClass(FILEUPLOADER_INVALID_CLASS);\n      }\n    }\n  }, {\n    key: \"_createValidationElement\",\n    value: function value(key) {\n      return (0, _renderer2.default)(\"<span>\").text(this.option(key));\n    }\n  }, {\n    key: \"_updateFileNameMaxWidth\",\n    value: function value() {\n      var cancelButtonsCount = this.option(\"allowCanceling\") && \"useForm\" !== this.option(\"uploadMode\") ? 1 : 0;\n      var uploadButtonsCount = \"useButtons\" === this.option(\"uploadMode\") ? 1 : 0;\n\n      var filesContainerWidth = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_CONTAINER_CLASS).first().width() || this._$filesContainer.width();\n\n      var $buttonContainer = this._$filesContainer.find(\".\" + FILEUPLOADER_BUTTON_CONTAINER_CLASS).eq(0);\n\n      var buttonsWidth = $buttonContainer.width() * (cancelButtonsCount + uploadButtonsCount);\n\n      var $fileSize = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_SIZE_CLASS).eq(0);\n\n      var prevFileSize = $fileSize.text();\n      $fileSize.text(\"1000 Mb\");\n      var fileSizeWidth = $fileSize.width();\n      $fileSize.text(prevFileSize);\n\n      this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_NAME_CLASS).css(\"maxWidth\", filesContainerWidth - buttonsWidth - fileSizeWidth);\n    }\n  }, {\n    key: \"_renderFileButtons\",\n    value: function value(file, $container) {\n      var $cancelButton = this._getCancelButton(file);\n\n      $cancelButton && $container.append($cancelButton);\n\n      var $uploadButton = this._getUploadButton(file);\n\n      $uploadButton && $container.append($uploadButton);\n    }\n  }, {\n    key: \"_getCancelButton\",\n    value: function value(file) {\n      var _this7 = this;\n\n      if (\"useForm\" === this.option(\"uploadMode\")) {\n        return null;\n      }\n\n      file.cancelButton = this._createComponent((0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_CANCEL_BUTTON_CLASS), _button2.default, {\n        onClick: function onClick() {\n          return _this7._removeFile(file);\n        },\n        icon: \"close\",\n        visible: this.option(\"allowCanceling\"),\n        integrationOptions: {}\n      });\n      return (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.cancelButton.$element());\n    }\n  }, {\n    key: \"_getUploadButton\",\n    value: function value(file) {\n      var _this8 = this;\n\n      if (!file.isValid() || \"useButtons\" !== this.option(\"uploadMode\")) {\n        return null;\n      }\n\n      file.uploadButton = this._createComponent((0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_UPLOAD_BUTTON_CLASS), _button2.default, {\n        onClick: function onClick() {\n          return _this8._uploadFile(file);\n        },\n        icon: \"upload\"\n      });\n      file.onLoadStart.add(function () {\n        return file.uploadButton.$element().remove();\n      });\n      return (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.uploadButton.$element());\n    }\n  }, {\n    key: \"_removeFile\",\n    value: function value(file) {\n      file.$file.parent().remove();\n\n      this._files.splice((0, _array.inArray)(file, this._files), 1);\n\n      var value = this.option(\"value\").slice();\n      value.splice((0, _array.inArray)(file.value, value), 1);\n      this._preventRecreatingFiles = true;\n      this.option(\"value\", value);\n      this._preventRecreatingFiles = false;\n\n      this._toggleFileUploaderEmptyClassName();\n\n      this._doPreventInputChange = true;\n\n      this._$fileInput.val(\"\");\n\n      this._doPreventInputChange = false;\n    }\n  }, {\n    key: \"_toggleFileUploaderEmptyClassName\",\n    value: function value() {\n      this.$element().toggleClass(FILEUPLOADER_EMPTY_CLASS, !this._files.length || this._hasInvalidFile(this._files));\n    }\n  }, {\n    key: \"_hasInvalidFile\",\n    value: function value(files) {\n      for (var i = 0; i < files.length; i++) {\n        if (!files[i].isValid()) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_getFileSize\",\n    value: function value(size) {\n      var i = 0;\n      var labels = [_message2.default.format(\"dxFileUploader-bytes\"), _message2.default.format(\"dxFileUploader-kb\"), _message2.default.format(\"dxFileUploader-Mb\"), _message2.default.format(\"dxFileUploader-Gb\")];\n      var count = labels.length - 1;\n\n      while (i < count && size >= 1024) {\n        size /= 1024;\n        i++;\n      }\n\n      return Math.round(size) + \" \" + labels[i];\n    }\n  }, {\n    key: \"_renderSelectButton\",\n    value: function value() {\n      var $button = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).appendTo(this._$inputWrapper);\n      this._selectButton = this._createComponent($button, _button2.default, {\n        text: this.option(\"selectButtonText\"),\n        focusStateEnabled: false,\n        integrationOptions: {}\n      });\n\n      if (\"desktop\" === _devices2.default.real().deviceType) {\n        this._selectButton.option(\"onClick\", this._selectButtonClickHandler.bind(this));\n      } else {\n        _events_engine2.default.off($button, \"click\");\n\n        _events_engine2.default.on($button, \"click\", this._selectButtonClickHandler.bind(this));\n      }\n    }\n  }, {\n    key: \"_selectButtonClickHandler\",\n    value: function value() {\n      if (this.option(\"useNativeInputClick\")) {\n        return;\n      }\n\n      if (this.option(\"disabled\")) {\n        return false;\n      }\n\n      this._isCustomClickEvent = true;\n\n      _events_engine2.default.trigger(this._$fileInput, \"click\");\n\n      this._isCustomClickEvent = false;\n    }\n  }, {\n    key: \"_renderUploadButton\",\n    value: function value() {\n      if (\"useButtons\" !== this.option(\"uploadMode\")) {\n        return;\n      }\n\n      var $uploadButton = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).addClass(FILEUPLOADER_UPLOAD_BUTTON_CLASS).appendTo(this._$content);\n      this._uploadButton = this._createComponent($uploadButton, _button2.default, {\n        text: this.option(\"uploadButtonText\"),\n        onClick: this._uploadButtonClickHandler.bind(this),\n        type: this.option(\"_uploadButtonType\"),\n        integrationOptions: {}\n      });\n    }\n  }, {\n    key: \"_uploadButtonClickHandler\",\n    value: function value() {\n      this._uploadFiles();\n    }\n  }, {\n    key: \"_shouldDragOverBeRendered\",\n    value: function value() {\n      return \"useForm\" !== this.option(\"uploadMode\") || this.option(\"nativeDropSupported\");\n    }\n  }, {\n    key: \"_renderInputContainer\",\n    value: function value() {\n      this._$inputContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_CONTAINER_CLASS).appendTo(this._$inputWrapper);\n\n      if (!this._shouldDragOverBeRendered()) {\n        this._$inputContainer.css(\"display\", \"none\");\n      }\n\n      this._$fileInput.addClass(FILEUPLOADER_INPUT_CLASS);\n\n      this._renderInput();\n\n      this._$inputLabel.addClass(FILEUPLOADER_INPUT_LABEL_CLASS).appendTo(this._$inputContainer);\n    }\n  }, {\n    key: \"_renderInput\",\n    value: function value() {\n      if (this.option(\"useNativeInputClick\")) {\n        this._selectButton.option(\"template\", this._selectButtonInputTemplate.bind(this));\n      } else {\n        this._$fileInput.appendTo(this._$inputContainer);\n\n        this._selectButton.option(\"template\", \"content\");\n      }\n    }\n  }, {\n    key: \"_selectButtonInputTemplate\",\n    value: function value(data, content) {\n      var $content = (0, _renderer2.default)(content);\n      var $text = (0, _renderer2.default)(\"<span>\").addClass(\"dx-button-text\").text(data.text);\n      $content.append($text).append(this._$fileInput);\n      return $content;\n    }\n  }, {\n    key: \"_renderInputWrapper\",\n    value: function value() {\n      this._$inputWrapper = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_WRAPPER_CLASS).appendTo(this._$content);\n    }\n  }, {\n    key: \"_renderDragEvents\",\n    value: function value() {\n      _events_engine2.default.off(this._$inputWrapper, \".\" + this.NAME);\n\n      if (!this._shouldDragOverBeRendered()) {\n        return;\n      }\n\n      this._dragEventsTargets = [];\n\n      _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragenter\", this.NAME), this._dragEnterHandler.bind(this));\n\n      _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragover\", this.NAME), this._dragOverHandler.bind(this));\n\n      _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragleave\", this.NAME), this._dragLeaveHandler.bind(this));\n\n      _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"drop\", this.NAME), this._dropHandler.bind(this));\n    }\n  }, {\n    key: \"_useInputForDrop\",\n    value: function value() {\n      return this.option(\"nativeDropSupported\") && \"useForm\" === this.option(\"uploadMode\");\n    }\n  }, {\n    key: \"_dragEnterHandler\",\n    value: function value(e) {\n      if (this.option(\"disabled\")) {\n        return false;\n      }\n\n      if (!this._useInputForDrop()) {\n        e.preventDefault();\n      }\n\n      this._updateEventTargets(e);\n\n      this.$element().addClass(FILEUPLOADER_DRAGOVER_CLASS);\n    }\n  }, {\n    key: \"_dragOverHandler\",\n    value: function value(e) {\n      if (!this._useInputForDrop()) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"_dragLeaveHandler\",\n    value: function value(e) {\n      if (!this._useInputForDrop()) {\n        e.preventDefault();\n      }\n\n      this._updateEventTargets(e);\n\n      if (!this._dragEventsTargets.length) {\n        this.$element().removeClass(FILEUPLOADER_DRAGOVER_CLASS);\n      }\n    }\n  }, {\n    key: \"_updateEventTargets\",\n    value: function value(e) {\n      var targetIndex = this._dragEventsTargets.indexOf(e.target);\n\n      var isTargetExists = targetIndex !== -1;\n\n      if (\"dragenter\" === e.type) {\n        !isTargetExists && this._dragEventsTargets.push(e.target);\n      } else {\n        isTargetExists && this._dragEventsTargets.splice(targetIndex, 1);\n      }\n    }\n  }, {\n    key: \"_dropHandler\",\n    value: function value(e) {\n      this._dragEventsTargets = [];\n      this.$element().removeClass(FILEUPLOADER_DRAGOVER_CLASS);\n\n      if (this._useInputForDrop()) {\n        return;\n      }\n\n      e.preventDefault();\n      var fileList = e.originalEvent.dataTransfer.files;\n\n      var files = this._getFiles(fileList);\n\n      if (!this.option(\"multiple\") && files.length > 1) {\n        return;\n      }\n\n      this._changeValue(this._filterFiles(files));\n\n      if (\"instantly\" === this.option(\"uploadMode\")) {\n        this._uploadFiles();\n      }\n    }\n  }, {\n    key: \"_filterFiles\",\n    value: function value(files) {\n      if (!files.length) {\n        return files;\n      }\n\n      var accept = this.option(\"accept\");\n\n      if (!accept.length) {\n        return files;\n      }\n\n      var result = [];\n\n      var allowedTypes = this._getAllowedFileTypes(accept);\n\n      for (var i = 0, n = files.length; i < n; i++) {\n        if (this._isFileTypeAllowed(files[i], allowedTypes)) {\n          result.push(files[i]);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_getAllowedFileTypes\",\n    value: function value(acceptSting) {\n      if (!acceptSting.length) {\n        return [];\n      }\n\n      return acceptSting.split(\",\").map(function (item) {\n        return item.trim();\n      });\n    }\n  }, {\n    key: \"_isFileTypeAllowed\",\n    value: function value(file, allowedTypes) {\n      for (var i = 0, n = allowedTypes.length; i < n; i++) {\n        var allowedType = allowedTypes[i];\n\n        if (\".\" === allowedType[0]) {\n          allowedType = allowedType.replace(\".\", \"\\\\.\");\n\n          if (file.name.match(new RegExp(allowedType + \"$\", \"i\"))) {\n            return true;\n          }\n        } else {\n          allowedType = allowedType.replace(\"*\", \"\");\n\n          if (file.type.match(new RegExp(allowedType, \"i\"))) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_renderWrapper\",\n    value: function value() {\n      var $wrapper = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_WRAPPER_CLASS).appendTo(this.$element());\n      var $container = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_CONTAINER_CLASS).appendTo($wrapper);\n      this._$content = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_CONTENT_CLASS).appendTo($container);\n    }\n  }, {\n    key: \"_clean\",\n    value: function value() {\n      this._$fileInput.detach();\n\n      delete this._$filesContainer;\n\n      if (this._files) {\n        this._files.forEach(function (file) {\n          file.$file = null;\n          file.$statusMessage = null;\n        });\n      }\n\n      _get(_getPrototypeOf(FileUploader.prototype), \"_clean\", this).call(this);\n    }\n  }, {\n    key: \"_uploadFiles\",\n    value: function value() {\n      var _this9 = this;\n\n      if (isFormDataSupported()) {\n        (0, _iterator.each)(this._files, function (_, file) {\n          return _this9._uploadFile(file);\n        });\n      }\n    }\n  }, {\n    key: \"_uploadFile\",\n    value: function value(file) {\n      this._uploadStrategy.upload(file);\n    }\n  }, {\n    key: \"_updateProgressBar\",\n    value: function value(file, loadedFileData) {\n      file.progressBar && file.progressBar.option({\n        value: loadedFileData.loaded,\n        showStatus: true\n      });\n\n      this._progressAction({\n        file: file.value,\n        segmentSize: loadedFileData.currentSegmentSize,\n        bytesLoaded: loadedFileData.loaded,\n        bytesTotal: loadedFileData.total,\n        event: loadedFileData.event,\n        request: file.request\n      });\n    }\n  }, {\n    key: \"_updateTotalProgress\",\n    value: function value(totalFilesSize, totalLoadedFilesSize) {\n      var progress = totalFilesSize ? this._getProgressValue(totalLoadedFilesSize / totalFilesSize) : 0;\n      this.option(\"progress\", progress);\n\n      this._setLoadedSize(totalLoadedFilesSize);\n    }\n  }, {\n    key: \"_getProgressValue\",\n    value: function value(ratio) {\n      return Math.floor(100 * ratio);\n    }\n  }, {\n    key: \"_initStatusMessage\",\n    value: function value(file) {\n      file.$statusMessage.css(\"display\", \"none\");\n    }\n  }, {\n    key: \"_initCancelButton\",\n    value: function value(file) {\n      var _this10 = this;\n\n      file.cancelButton.option(\"onClick\", function () {\n        _this10._preventFilesUploading([file]);\n\n        _this10._removeFile(file);\n      });\n\n      var hideCancelButton = function hideCancelButton() {\n        setTimeout(function () {\n          file.cancelButton.option({\n            visible: false\n          });\n        }, FILEUPLOADER_AFTER_LOAD_DELAY);\n      };\n\n      file.onLoad.add(hideCancelButton);\n      file.onError.add(hideCancelButton);\n    }\n  }, {\n    key: \"_createProgressBar\",\n    value: function value(fileSize) {\n      var _this11 = this;\n\n      return this._createComponent((0, _renderer2.default)(\"<div>\"), _progress_bar2.default, {\n        value: void 0,\n        min: 0,\n        max: fileSize,\n        statusFormat: function statusFormat(ratio) {\n          return _this11._getProgressValue(ratio) + \"%\";\n        },\n        showStatus: false,\n        statusPosition: \"right\"\n      });\n    }\n  }, {\n    key: \"_getTotalFilesSize\",\n    value: function value() {\n      var _this12 = this;\n\n      if (!this._totalFilesSize) {\n        this._totalFilesSize = 0;\n        (0, _iterator.each)(this._files, function (_, file) {\n          _this12._totalFilesSize += file.value.size;\n        });\n      }\n\n      return this._totalFilesSize;\n    }\n  }, {\n    key: \"_getTotalLoadedFilesSize\",\n    value: function value() {\n      var _this13 = this;\n\n      if (!this._totalLoadedFilesSize) {\n        this._totalLoadedFilesSize = 0;\n        (0, _iterator.each)(this._files, function (_, file) {\n          _this13._totalLoadedFilesSize += file.loadedSize;\n        });\n      }\n\n      return this._totalLoadedFilesSize;\n    }\n  }, {\n    key: \"_setLoadedSize\",\n    value: function value(_value4) {\n      this._totalLoadedFilesSize = _value4;\n    }\n  }, {\n    key: \"_recalculateProgress\",\n    value: function value() {\n      this._totalFilesSize = 0;\n      this._totalLoadedFilesSize = 0;\n\n      this._updateTotalProgress(this._getTotalFilesSize(), this._getTotalLoadedFilesSize());\n    }\n  }, {\n    key: \"_getValidationMessageTarget\",\n    value: function value() {\n      return this._$inputWrapper;\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function value(args) {\n      var value = args.value;\n\n      switch (args.name) {\n        case \"height\":\n        case \"width\":\n          this._updateFileNameMaxWidth();\n\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"value\":\n          !value.length && this._$fileInput.val(\"\");\n\n          if (!this._preventRecreatingFiles) {\n            this._createFiles();\n\n            this._renderFiles();\n          }\n\n          this._recalculateProgress();\n\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"name\":\n          this._initFileInput();\n\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"accept\":\n          this._initFileInput();\n\n          break;\n\n        case \"multiple\":\n          this._initFileInput();\n\n          if (!args.value) {\n            this.reset();\n          }\n\n          break;\n\n        case \"selectButtonText\":\n          this._selectButton.option(\"text\", value);\n\n          break;\n\n        case \"uploadButtonText\":\n          this._uploadButton && this._uploadButton.option(\"text\", value);\n          break;\n\n        case \"_uploadButtonType\":\n          this._uploadButton && this._uploadButton.option(\"type\", value);\n          break;\n\n        case \"maxFileSize\":\n        case \"minFileSize\":\n        case \"allowedFileExtensions\":\n        case \"invalidFileExtensionMessage\":\n        case \"invalidMaxFileSizeMessage\":\n        case \"invalidMinFileSizeMessage\":\n        case \"readyToUploadMessage\":\n        case \"uploadedMessage\":\n        case \"uploadFailedMessage\":\n          this._invalidate();\n\n          break;\n\n        case \"labelText\":\n          this._$inputLabel.text(value);\n\n          break;\n\n        case \"showFileList\":\n          if (!this._preventRecreatingFiles) {\n            this._renderFiles();\n          }\n\n          break;\n\n        case \"uploadFile\":\n        case \"uploadChunk\":\n        case \"chunkSize\":\n          this._setUploadStrategy();\n\n          break;\n\n        case \"abortUpload\":\n        case \"uploadUrl\":\n        case \"progress\":\n        case \"uploadMethod\":\n        case \"uploadHeaders\":\n        case \"extendSelection\":\n          break;\n\n        case \"allowCanceling\":\n        case \"uploadMode\":\n          this.reset();\n\n          this._invalidate();\n\n          break;\n\n        case \"onUploadStarted\":\n          this._createUploadStartedAction();\n\n          break;\n\n        case \"onUploaded\":\n          this._createUploadedAction();\n\n          break;\n\n        case \"onProgress\":\n          this._createProgressAction();\n\n          break;\n\n        case \"onUploadError\":\n          this._createUploadErrorAction();\n\n          break;\n\n        case \"onUploadAborted\":\n          this._createUploadAbortedAction();\n\n          break;\n\n        case \"useNativeInputClick\":\n          this._renderInput();\n\n          break;\n\n        case \"useDragOver\":\n          this._renderDragEvents();\n\n          break;\n\n        case \"nativeDropSupported\":\n          this._invalidate();\n\n          break;\n\n        default:\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"reset\",\n    value: function value() {\n      this.option(\"value\", []);\n    }\n  }]);\n\n  return FileUploader;\n}(_editor2.default);\n\nvar FileBlobReader = function () {\n  function FileBlobReader(file, chunkSize) {\n    _classCallCheck(this, FileBlobReader);\n\n    this.file = file;\n    this.chunkSize = chunkSize;\n    this.index = 0;\n  }\n\n  _createClass(FileBlobReader, [{\n    key: \"read\",\n    value: function value() {\n      if (!this.file) {\n        return null;\n      }\n\n      var result = this.createBlobResult(this.file, this.index, this.chunkSize);\n\n      if (result.isCompleted) {\n        this.file = null;\n      }\n\n      this.index++;\n      return result;\n    }\n  }, {\n    key: \"createBlobResult\",\n    value: function value(file, index, chunkSize) {\n      var currentPosition = index * chunkSize;\n      return {\n        blob: this.sliceFile(file, currentPosition, chunkSize),\n        index: index,\n        isCompleted: currentPosition + chunkSize >= file.size\n      };\n    }\n  }, {\n    key: \"sliceFile\",\n    value: function value(file, startPos, length) {\n      if (file.slice) {\n        return file.slice(startPos, startPos + length);\n      }\n\n      if (file.webkitSlice) {\n        return file.webkitSlice(startPos, startPos + length);\n      }\n\n      return null;\n    }\n  }]);\n\n  return FileBlobReader;\n}();\n\nvar FileUploadStrategyBase = function () {\n  function FileUploadStrategyBase(fileUploader) {\n    _classCallCheck(this, FileUploadStrategyBase);\n\n    this.fileUploader = fileUploader;\n  }\n\n  _createClass(FileUploadStrategyBase, [{\n    key: \"upload\",\n    value: function value(file) {\n      if (file.isValid() && !file.uploadStarted) {\n        this._prepareFileBeforeUpload(file);\n\n        this._uploadCore(file);\n      }\n    }\n  }, {\n    key: \"abortUpload\",\n    value: function abortUpload(file) {\n      var _this14 = this;\n\n      if (file._isError || file._isLoaded || file.isAborted) {\n        return;\n      }\n\n      file.request && file.request.abort();\n      file.isAborted = true;\n\n      if (this._isCustomAbortUpload()) {\n        var abortUpload = this.fileUploader.option(\"abortUpload\");\n\n        var arg = this._createAbortUploadArgument(file);\n\n        var deferred = null;\n\n        try {\n          var result = abortUpload(file.value, arg);\n          deferred = (0, _deferred.when)(result);\n        } catch (error) {\n          deferred = new _deferred.Deferred().reject(error).promise();\n        }\n\n        deferred.done(function () {\n          return file.onAbort.fire();\n        }).fail(function (error) {\n          return _this14._handleFileError(file, error);\n        });\n      }\n    }\n  }, {\n    key: \"_createAbortUploadArgument\",\n    value: function value(file) {}\n  }, {\n    key: \"_uploadCore\",\n    value: function value(file) {}\n  }, {\n    key: \"_isCustomAbortUpload\",\n    value: function value() {\n      var callback = this.fileUploader.option(\"abortUpload\");\n      return callback && (0, _type.isFunction)(callback);\n    }\n  }, {\n    key: \"_handleFileError\",\n    value: function value(file, error) {\n      file._isError = true;\n      file.onError.fire(error);\n    }\n  }, {\n    key: \"_prepareFileBeforeUpload\",\n    value: function value(file) {\n      if (file.$file) {\n        this.fileUploader._createFileProgressBar(file);\n      }\n\n      file.onLoadStart.add(this._onUploadStarted.bind(this, file));\n      file.onLoad.add(this._onLoadedHandler.bind(this, file));\n      file.onError.add(this._onErrorHandler.bind(this, file));\n      file.onAbort.add(this._onAbortHandler.bind(this, file));\n      file.onProgress.add(this._onProgressHandler.bind(this, file));\n    }\n  }, {\n    key: \"_isStatusError\",\n    value: function value(status) {\n      return 400 <= status && status < 500 || 500 <= status && status < 600;\n    }\n  }, {\n    key: \"_onUploadStarted\",\n    value: function value(file, e) {\n      file.uploadStarted = true;\n\n      this.fileUploader._uploadStartedAction({\n        file: file.value,\n        event: e,\n        request: file.request\n      });\n    }\n  }, {\n    key: \"_onAbortHandler\",\n    value: function value(file, e) {\n      this.fileUploader._uploadAbortedAction({\n        file: file.value,\n        event: e,\n        request: file.request\n      });\n    }\n  }, {\n    key: \"_onErrorHandler\",\n    value: function value(file, error) {\n      this.fileUploader._setStatusMessage(file, \"uploadFailedMessage\");\n\n      this.fileUploader._uploadErrorAction({\n        file: file.value,\n        event: void 0,\n        request: file.request,\n        error: error\n      });\n    }\n  }, {\n    key: \"_onLoadedHandler\",\n    value: function value(file, e) {\n      file._isLoaded = true;\n\n      this.fileUploader._setStatusMessage(file, \"uploadedMessage\");\n\n      this.fileUploader._uploadedAction({\n        file: file.value,\n        event: e,\n        request: file.request\n      });\n    }\n  }, {\n    key: \"_onProgressHandler\",\n    value: function value(file, e) {\n      if (file) {\n        var totalFilesSize = this.fileUploader._getTotalFilesSize();\n\n        var totalLoadedFilesSize = this.fileUploader._getTotalLoadedFilesSize();\n\n        var loadedSize = Math.min(e.loaded, file.value.size);\n        var segmentSize = loadedSize - file.loadedSize;\n        file.loadedSize = loadedSize;\n\n        this.fileUploader._updateTotalProgress(totalFilesSize, totalLoadedFilesSize + segmentSize);\n\n        this.fileUploader._updateProgressBar(file, this._getLoadedData(loadedSize, e.total, segmentSize, e));\n      }\n    }\n  }, {\n    key: \"_getLoadedData\",\n    value: function value(loaded, total, currentSegmentSize, event) {\n      return {\n        loaded: loaded,\n        total: total,\n        currentSegmentSize: currentSegmentSize\n      };\n    }\n  }]);\n\n  return FileUploadStrategyBase;\n}();\n\nvar ChunksFileUploadStrategyBase = function (_FileUploadStrategyBa) {\n  _inherits(ChunksFileUploadStrategyBase, _FileUploadStrategyBa);\n\n  function ChunksFileUploadStrategyBase(fileUploader) {\n    var _this15;\n\n    _classCallCheck(this, ChunksFileUploadStrategyBase);\n\n    _this15 = _possibleConstructorReturn(this, _getPrototypeOf(ChunksFileUploadStrategyBase).call(this, fileUploader));\n    _this15.chunkSize = _this15.fileUploader.option(\"chunkSize\");\n    return _this15;\n  }\n\n  _createClass(ChunksFileUploadStrategyBase, [{\n    key: \"_uploadCore\",\n    value: function value(file) {\n      var realFile = file.value;\n      var chunksData = {\n        name: realFile.name,\n        loadedBytes: 0,\n        type: realFile.type,\n        blobReader: new FileBlobReader(realFile, this.chunkSize),\n        guid: new _guid2.default(),\n        fileSize: realFile.size,\n        count: Math.ceil(realFile.size / this.chunkSize),\n        customData: {}\n      };\n      file.chunksData = chunksData;\n\n      this._sendChunk(file, chunksData);\n    }\n  }, {\n    key: \"_sendChunk\",\n    value: function value(file, chunksData) {\n      var _this16 = this;\n\n      var chunk = chunksData.blobReader.read();\n      chunksData.currentChunk = chunk;\n\n      if (chunk) {\n        this._sendChunkCore(file, chunksData, chunk).done(function () {\n          if (file.isAborted) {\n            return;\n          }\n\n          chunksData.loadedBytes += chunk.blob.size;\n          file.onProgress.fire({\n            loaded: chunksData.loadedBytes,\n            total: file.value.size\n          });\n\n          if (chunk.isCompleted) {\n            file.onLoad.fire();\n          }\n\n          _this16._sendChunk(file, chunksData);\n        }).fail(function (error) {\n          if (_this16._shouldHandleError(error)) {\n            _this16._handleFileError(file, error);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_sendChunkCore\",\n    value: function value(file, chunksData, chunk) {}\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(error) {}\n  }, {\n    key: \"_tryRaiseStartLoad\",\n    value: function value(file) {\n      if (!file.isStartLoad) {\n        file.isStartLoad = true;\n        file.onLoadStart.fire();\n      }\n    }\n  }, {\n    key: \"_getEvent\",\n    value: function value(e) {\n      return null;\n    }\n  }]);\n\n  return ChunksFileUploadStrategyBase;\n}(FileUploadStrategyBase);\n\nvar DefaultChunksFileUploadStrategy = function (_ChunksFileUploadStra) {\n  _inherits(DefaultChunksFileUploadStrategy, _ChunksFileUploadStra);\n\n  function DefaultChunksFileUploadStrategy() {\n    _classCallCheck(this, DefaultChunksFileUploadStrategy);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DefaultChunksFileUploadStrategy).apply(this, arguments));\n  }\n\n  _createClass(DefaultChunksFileUploadStrategy, [{\n    key: \"_sendChunkCore\",\n    value: function value(file, chunksData, chunk) {\n      var _this17 = this;\n\n      return _ajax2.default.sendRequest({\n        url: this.fileUploader.option(\"uploadUrl\"),\n        method: this.fileUploader.option(\"uploadMethod\"),\n        headers: this.fileUploader.option(\"uploadHeaders\"),\n        beforeSend: function beforeSend(xhr) {\n          file.request = xhr;\n        },\n        upload: {\n          onloadstart: function onloadstart() {\n            return _this17._tryRaiseStartLoad(file);\n          },\n          onabort: function onabort() {\n            return file.onAbort.fire();\n          }\n        },\n        data: this._createFormData({\n          fileName: chunksData.name,\n          blobName: this.fileUploader.option(\"name\"),\n          blob: chunk.blob,\n          index: chunk.index,\n          count: chunksData.count,\n          type: chunksData.type,\n          guid: chunksData.guid,\n          size: chunksData.fileSize\n        })\n      });\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(e) {\n      return this._isStatusError(e.status);\n    }\n  }, {\n    key: \"_createFormData\",\n    value: function value(options) {\n      var formData = new window.FormData();\n      formData.append(options.blobName, options.blob);\n      formData.append(FILEUPLOADER_CHUNK_META_DATA_NAME, JSON.stringify({\n        FileName: options.fileName,\n        Index: options.index,\n        TotalCount: options.count,\n        FileSize: options.size,\n        FileType: options.type,\n        FileGuid: options.guid\n      }));\n      return formData;\n    }\n  }]);\n\n  return DefaultChunksFileUploadStrategy;\n}(ChunksFileUploadStrategyBase);\n\nvar CustomChunksFileUploadStrategy = function (_ChunksFileUploadStra2) {\n  _inherits(CustomChunksFileUploadStrategy, _ChunksFileUploadStra2);\n\n  function CustomChunksFileUploadStrategy() {\n    _classCallCheck(this, CustomChunksFileUploadStrategy);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CustomChunksFileUploadStrategy).apply(this, arguments));\n  }\n\n  _createClass(CustomChunksFileUploadStrategy, [{\n    key: \"_sendChunkCore\",\n    value: function value(file, chunksData) {\n      this._tryRaiseStartLoad(file);\n\n      var chunksInfo = this._createChunksInfo(chunksData);\n\n      var uploadChunk = this.fileUploader.option(\"uploadChunk\");\n\n      try {\n        var result = uploadChunk(file.value, chunksInfo);\n        return (0, _deferred.when)(result);\n      } catch (error) {\n        return new _deferred.Deferred().reject(error).promise();\n      }\n    }\n  }, {\n    key: \"_createAbortUploadArgument\",\n    value: function value(file) {\n      return this._createChunksInfo(file.chunksData);\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(e) {\n      return true;\n    }\n  }, {\n    key: \"_createChunksInfo\",\n    value: function value(chunksData) {\n      return {\n        bytesUploaded: chunksData.loadedBytes,\n        chunkCount: chunksData.count,\n        customData: chunksData.customData,\n        chunkBlob: chunksData.currentChunk.blob,\n        chunkIndex: chunksData.currentChunk.index\n      };\n    }\n  }]);\n\n  return CustomChunksFileUploadStrategy;\n}(ChunksFileUploadStrategyBase);\n\nvar WholeFileUploadStrategyBase = function (_FileUploadStrategyBa2) {\n  _inherits(WholeFileUploadStrategyBase, _FileUploadStrategyBa2);\n\n  function WholeFileUploadStrategyBase() {\n    _classCallCheck(this, WholeFileUploadStrategyBase);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WholeFileUploadStrategyBase).apply(this, arguments));\n  }\n\n  _createClass(WholeFileUploadStrategyBase, [{\n    key: \"_uploadCore\",\n    value: function value(file) {\n      var _this18 = this;\n\n      file.loadedSize = 0;\n\n      this._uploadFile(file).done(function () {\n        if (!file.isAborted) {\n          file.onLoad.fire();\n        }\n      }).fail(function (error) {\n        if (_this18._shouldHandleError(file, error)) {\n          _this18._handleFileError(file, error);\n        }\n      });\n    }\n  }, {\n    key: \"_uploadFile\",\n    value: function value(file) {}\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(file, e) {}\n  }, {\n    key: \"_handleProgress\",\n    value: function value(file, e) {\n      if (file._isError) {\n        return;\n      }\n\n      file._isProgressStarted = true;\n      file.onProgress.fire(e);\n    }\n  }, {\n    key: \"_getLoadedData\",\n    value: function value(loaded, total, segmentSize, event) {\n      var result = _get(_getPrototypeOf(WholeFileUploadStrategyBase.prototype), \"_getLoadedData\", this).call(this, loaded, total, segmentSize, event);\n\n      result.event = event;\n      return result;\n    }\n  }]);\n\n  return WholeFileUploadStrategyBase;\n}(FileUploadStrategyBase);\n\nvar DefaultWholeFileUploadStrategy = function (_WholeFileUploadStrat) {\n  _inherits(DefaultWholeFileUploadStrategy, _WholeFileUploadStrat);\n\n  function DefaultWholeFileUploadStrategy() {\n    _classCallCheck(this, DefaultWholeFileUploadStrategy);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DefaultWholeFileUploadStrategy).apply(this, arguments));\n  }\n\n  _createClass(DefaultWholeFileUploadStrategy, [{\n    key: \"_uploadFile\",\n    value: function value(file) {\n      var _this19 = this;\n\n      return _ajax2.default.sendRequest({\n        url: this.fileUploader.option(\"uploadUrl\"),\n        method: this.fileUploader.option(\"uploadMethod\"),\n        headers: this.fileUploader.option(\"uploadHeaders\"),\n        beforeSend: function beforeSend(xhr) {\n          file.request = xhr;\n        },\n        upload: {\n          onprogress: function onprogress(e) {\n            return _this19._handleProgress(file, e);\n          },\n          onloadstart: function onloadstart() {\n            return file.onLoadStart.fire();\n          },\n          onabort: function onabort() {\n            return file.onAbort.fire();\n          }\n        },\n        data: this._createFormData(this.fileUploader.option(\"name\"), file.value)\n      });\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(file, e) {\n      return this._isStatusError(e.status) || !file._isProgressStarted;\n    }\n  }, {\n    key: \"_createFormData\",\n    value: function value(fieldName, fieldValue) {\n      var formData = new window.FormData();\n      formData.append(fieldName, fieldValue, fieldValue.name);\n      return formData;\n    }\n  }]);\n\n  return DefaultWholeFileUploadStrategy;\n}(WholeFileUploadStrategyBase);\n\nvar CustomWholeFileUploadStrategy = function (_WholeFileUploadStrat2) {\n  _inherits(CustomWholeFileUploadStrategy, _WholeFileUploadStrat2);\n\n  function CustomWholeFileUploadStrategy() {\n    _classCallCheck(this, CustomWholeFileUploadStrategy);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CustomWholeFileUploadStrategy).apply(this, arguments));\n  }\n\n  _createClass(CustomWholeFileUploadStrategy, [{\n    key: \"_uploadFile\",\n    value: function value(file) {\n      var _this20 = this;\n\n      file.onLoadStart.fire();\n\n      var progressCallback = function progressCallback(loadedBytes) {\n        var arg = {\n          loaded: loadedBytes,\n          total: file.size\n        };\n\n        _this20._handleProgress(file, arg);\n      };\n\n      var uploadFile = this.fileUploader.option(\"uploadFile\");\n\n      try {\n        var result = uploadFile(file, progressCallback);\n        return (0, _deferred.when)(result);\n      } catch (error) {\n        return new _deferred.Deferred().reject(error).promise();\n      }\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(file, e) {\n      return true;\n    }\n  }]);\n\n  return CustomWholeFileUploadStrategy;\n}(WholeFileUploadStrategyBase);\n\n(0, _component_registrator2.default)(\"dxFileUploader\", FileUploader);\nmodule.exports = FileUploader;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/file_uploader.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_guid","_guid2","_window","_events_engine","_events_engine2","_component_registrator","_component_registrator2","_callbacks","_callbacks2","_type","_iterator","_extend","_array","_deferred","_ajax","_ajax2","_editor","_editor2","_button","_button2","_progress_bar","_progress_bar2","_browser","_browser2","_devices","_devices2","_utils","_utils2","_click","_click2","_message","_message2","_themes","_themes2","obj","Symbol","_typeof","instance","i","props","descriptor","Object","_defineProperties","Constructor","call","_assertThisInitialized","Reflect","_get","base","_superPropBase","desc","receiver","object","_getPrototypeOf","o","subClass","superClass","constructor","value","writable","configurable","_setPrototypeOf","window","FILEUPLOADER_CLASS","FILEUPLOADER_EMPTY_CLASS","FILEUPLOADER_SHOW_FILE_LIST_CLASS","FILEUPLOADER_DRAGOVER_CLASS","FILEUPLOADER_WRAPPER_CLASS","FILEUPLOADER_CONTAINER_CLASS","FILEUPLOADER_CONTENT_CLASS","FILEUPLOADER_INPUT_WRAPPER_CLASS","FILEUPLOADER_INPUT_CONTAINER_CLASS","FILEUPLOADER_INPUT_LABEL_CLASS","FILEUPLOADER_INPUT_CLASS","FILEUPLOADER_FILES_CONTAINER_CLASS","FILEUPLOADER_FILE_CONTAINER_CLASS","FILEUPLOADER_FILE_INFO_CLASS","FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS","FILEUPLOADER_FILE_CLASS","FILEUPLOADER_FILE_NAME_CLASS","FILEUPLOADER_FILE_SIZE_CLASS","FILEUPLOADER_BUTTON_CLASS","FILEUPLOADER_BUTTON_CONTAINER_CLASS","FILEUPLOADER_CANCEL_BUTTON_CLASS","FILEUPLOADER_UPLOAD_BUTTON_CLASS","FILEUPLOADER_INVALID_CLASS","FILEUPLOADER_AFTER_LOAD_DELAY","FILEUPLOADER_CHUNK_META_DATA_NAME","renderFileUploaderInput","isFormDataSupported","FileUploader","_inherits","_classCallCheck","_possibleConstructorReturn","_createClass","key","_this","click","e","$selectButton","space","enter","chunkSize","selectButtonText","uploadButtonText","labelText","name","multiple","accept","uploadUrl","allowCanceling","showFileList","progress","readyToUploadMessage","uploadedMessage","uploadFailedMessage","uploadMode","uploadMethod","uploadHeaders","onUploadStarted","onUploaded","onProgress","onUploadError","onUploadAborted","allowedFileExtensions","maxFileSize","minFileSize","invalidFileExtensionMessage","invalidMaxFileSizeMessage","invalidMinFileSizeMessage","extendSelection","validationMessageMode","uploadFile","uploadChunk","abortUpload","validationMessageOffset","h","v","useNativeInputClick","useDragOver","nativeDropSupported","_uploadButtonType","device","options","focusStateEnabled","platform","strategy","_this2","tabIndex","fileName","files","result","item","file","values","_this3","setTimeout","_this4","_this5","allowedExtensions","fileExtension","fileSize","loadedSize","onAbort","onLoad","onError","onLoadStart","isValidFileExtension","isValidMaxSize","isValidMinSize","isValid","_this6","$fileContainer","$fileInfo","cancelButtonsCount","uploadButtonsCount","filesContainerWidth","$buttonContainer","buttonsWidth","$fileSize","prevFileSize","fileSizeWidth","$cancelButton","$container","$uploadButton","_this7","onClick","icon","visible","integrationOptions","_this8","labels","count","size","Math","$button","text","type","$content","$text","data","targetIndex","isTargetExists","fileList","allowedTypes","n","acceptSting","allowedType","$wrapper","_this9","loadedFileData","showStatus","segmentSize","bytesLoaded","bytesTotal","event","request","totalFilesSize","totalLoadedFilesSize","_this10","hideCancelButton","_this11","min","max","statusFormat","statusPosition","_this12","_this13","args","FileBlobReader","currentPosition","index","blob","isCompleted","startPos","FileUploadStrategyBase","_this14","arg","deferred","callback","status","error","loaded","total","currentSegmentSize","ChunksFileUploadStrategyBase","_this15","realFile","chunksData","loadedBytes","blobReader","guid","customData","_this16","chunk","DefaultChunksFileUploadStrategy","_this17","url","method","headers","beforeSend","upload","onloadstart","onabort","blobName","formData","FileName","Index","TotalCount","FileSize","FileType","FileGuid","CustomChunksFileUploadStrategy","chunksInfo","bytesUploaded","chunkCount","chunkBlob","chunkIndex","WholeFileUploadStrategyBase","_this18","DefaultWholeFileUploadStrategy","_this19","onprogress","fieldValue","CustomWholeFileUploadStrategy","_this20","progressCallback","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_uploader.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _guid = require(\"../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _window = require(\"../core/utils/window\");\r\nvar _events_engine = require(\"../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _component_registrator = require(\"../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _callbacks = require(\"../core/utils/callbacks\");\r\nvar _callbacks2 = _interopRequireDefault(_callbacks);\r\nvar _type = require(\"../core/utils/type\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _array = require(\"../core/utils/array\");\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _ajax = require(\"../core/utils/ajax\");\r\nvar _ajax2 = _interopRequireDefault(_ajax);\r\nvar _editor = require(\"./editor/editor\");\r\nvar _editor2 = _interopRequireDefault(_editor);\r\nvar _button = require(\"./button\");\r\nvar _button2 = _interopRequireDefault(_button);\r\nvar _progress_bar = require(\"./progress_bar\");\r\nvar _progress_bar2 = _interopRequireDefault(_progress_bar);\r\nvar _browser = require(\"../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _devices = require(\"../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _utils = require(\"../events/utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _click = require(\"../events/click\");\r\nvar _click2 = _interopRequireDefault(_click);\r\nvar _message = require(\"../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _themes = require(\"./themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar window = (0, _window.getWindow)();\r\nvar FILEUPLOADER_CLASS = \"dx-fileuploader\";\r\nvar FILEUPLOADER_EMPTY_CLASS = \"dx-fileuploader-empty\";\r\nvar FILEUPLOADER_SHOW_FILE_LIST_CLASS = \"dx-fileuploader-show-file-list\";\r\nvar FILEUPLOADER_DRAGOVER_CLASS = \"dx-fileuploader-dragover\";\r\nvar FILEUPLOADER_WRAPPER_CLASS = \"dx-fileuploader-wrapper\";\r\nvar FILEUPLOADER_CONTAINER_CLASS = \"dx-fileuploader-container\";\r\nvar FILEUPLOADER_CONTENT_CLASS = \"dx-fileuploader-content\";\r\nvar FILEUPLOADER_INPUT_WRAPPER_CLASS = \"dx-fileuploader-input-wrapper\";\r\nvar FILEUPLOADER_INPUT_CONTAINER_CLASS = \"dx-fileuploader-input-container\";\r\nvar FILEUPLOADER_INPUT_LABEL_CLASS = \"dx-fileuploader-input-label\";\r\nvar FILEUPLOADER_INPUT_CLASS = \"dx-fileuploader-input\";\r\nvar FILEUPLOADER_FILES_CONTAINER_CLASS = \"dx-fileuploader-files-container\";\r\nvar FILEUPLOADER_FILE_CONTAINER_CLASS = \"dx-fileuploader-file-container\";\r\nvar FILEUPLOADER_FILE_INFO_CLASS = \"dx-fileuploader-file-info\";\r\nvar FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS = \"dx-fileuploader-file-status-message\";\r\nvar FILEUPLOADER_FILE_CLASS = \"dx-fileuploader-file\";\r\nvar FILEUPLOADER_FILE_NAME_CLASS = \"dx-fileuploader-file-name\";\r\nvar FILEUPLOADER_FILE_SIZE_CLASS = \"dx-fileuploader-file-size\";\r\nvar FILEUPLOADER_BUTTON_CLASS = \"dx-fileuploader-button\";\r\nvar FILEUPLOADER_BUTTON_CONTAINER_CLASS = \"dx-fileuploader-button-container\";\r\nvar FILEUPLOADER_CANCEL_BUTTON_CLASS = \"dx-fileuploader-cancel-button\";\r\nvar FILEUPLOADER_UPLOAD_BUTTON_CLASS = \"dx-fileuploader-upload-button\";\r\nvar FILEUPLOADER_INVALID_CLASS = \"dx-fileuploader-invalid\";\r\nvar FILEUPLOADER_AFTER_LOAD_DELAY = 400;\r\nvar FILEUPLOADER_CHUNK_META_DATA_NAME = \"chunkMetadata\";\r\nvar renderFileUploaderInput = function() {\r\n    return (0, _renderer2.default)(\"<input>\").attr(\"type\", \"file\")\r\n};\r\nvar isFormDataSupported = function() {\r\n    return !!window.FormData\r\n};\r\nvar FileUploader = function(_Editor) {\r\n    _inherits(FileUploader, _Editor);\r\n\r\n    function FileUploader() {\r\n        _classCallCheck(this, FileUploader);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(FileUploader).apply(this, arguments))\r\n    }\r\n    _createClass(FileUploader, [{\r\n        key: \"_supportedKeys\",\r\n        value: function() {\r\n            var _this = this;\r\n            var click = function(e) {\r\n                e.preventDefault();\r\n                var $selectButton = _this._selectButton.$element();\r\n                _events_engine2.default.trigger($selectButton, _click2.default.name)\r\n            };\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_supportedKeys\", this).call(this), {\r\n                space: click,\r\n                enter: click\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_setOptionsByReference\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_setOptionsByReference\", this).call(this);\r\n            (0, _extend.extend)(this._optionsByReference, {\r\n                value: true\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                chunkSize: 0,\r\n                value: [],\r\n                selectButtonText: _message2.default.format(\"dxFileUploader-selectFile\"),\r\n                uploadButtonText: _message2.default.format(\"dxFileUploader-upload\"),\r\n                labelText: _message2.default.format(\"dxFileUploader-dropFile\"),\r\n                name: \"files[]\",\r\n                multiple: false,\r\n                accept: \"\",\r\n                uploadUrl: \"/\",\r\n                allowCanceling: true,\r\n                showFileList: true,\r\n                progress: 0,\r\n                readyToUploadMessage: _message2.default.format(\"dxFileUploader-readyToUpload\"),\r\n                uploadedMessage: _message2.default.format(\"dxFileUploader-uploaded\"),\r\n                uploadFailedMessage: _message2.default.format(\"dxFileUploader-uploadFailedMessage\"),\r\n                uploadMode: \"instantly\",\r\n                uploadMethod: \"POST\",\r\n                uploadHeaders: {},\r\n                onUploadStarted: null,\r\n                onUploaded: null,\r\n                onProgress: null,\r\n                onUploadError: null,\r\n                onUploadAborted: null,\r\n                allowedFileExtensions: [],\r\n                maxFileSize: 0,\r\n                minFileSize: 0,\r\n                invalidFileExtensionMessage: _message2.default.format(\"dxFileUploader-invalidFileExtension\"),\r\n                invalidMaxFileSizeMessage: _message2.default.format(\"dxFileUploader-invalidMaxFileSize\"),\r\n                invalidMinFileSizeMessage: _message2.default.format(\"dxFileUploader-invalidMinFileSize\"),\r\n                extendSelection: true,\r\n                validationMessageMode: \"always\",\r\n                uploadFile: null,\r\n                uploadChunk: null,\r\n                abortUpload: null,\r\n                validationMessageOffset: {\r\n                    h: 0,\r\n                    v: 0\r\n                },\r\n                useNativeInputClick: false,\r\n                useDragOver: true,\r\n                nativeDropSupported: true,\r\n                _uploadButtonType: \"normal\"\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_defaultOptionsRules\",\r\n        value: function() {\r\n            return _get(_getPrototypeOf(FileUploader.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\r\n                device: function() {\r\n                    return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator()\r\n                },\r\n                options: {\r\n                    focusStateEnabled: true\r\n                }\r\n            }, {\r\n                device: [{\r\n                    platform: \"android\"\r\n                }],\r\n                options: {\r\n                    validationMessageOffset: {\r\n                        v: 0\r\n                    }\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return \"desktop\" !== _devices2.default.real().deviceType\r\n                },\r\n                options: {\r\n                    useDragOver: false\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return !isFormDataSupported()\r\n                },\r\n                options: {\r\n                    uploadMode: \"useForm\"\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return _browser2.default.msie || \"desktop\" !== _devices2.default.real().deviceType\r\n                },\r\n                options: {\r\n                    nativeDropSupported: false\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return _themes2.default.isMaterial()\r\n                },\r\n                options: {\r\n                    _uploadButtonType: \"default\"\r\n                }\r\n            }])\r\n        }\r\n    }, {\r\n        key: \"_init\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_init\", this).call(this);\r\n            this._initFileInput();\r\n            this._initLabel();\r\n            this._setUploadStrategy();\r\n            this._createFiles();\r\n            this._createUploadStartedAction();\r\n            this._createUploadedAction();\r\n            this._createProgressAction();\r\n            this._createUploadErrorAction();\r\n            this._createUploadAbortedAction()\r\n        }\r\n    }, {\r\n        key: \"_setUploadStrategy\",\r\n        value: function() {\r\n            var strategy = null;\r\n            if (this.option(\"chunkSize\") > 0) {\r\n                var uploadChunk = this.option(\"uploadChunk\");\r\n                strategy = uploadChunk && (0, _type.isFunction)(uploadChunk) ? new CustomChunksFileUploadStrategy(this) : new DefaultChunksFileUploadStrategy(this)\r\n            } else {\r\n                var uploadFile = this.option(\"uploadFile\");\r\n                strategy = uploadFile && (0, _type.isFunction)(uploadFile) ? new CustomWholeFileUploadStrategy(this) : new DefaultWholeFileUploadStrategy(this)\r\n            }\r\n            this._uploadStrategy = strategy\r\n        }\r\n    }, {\r\n        key: \"_initFileInput\",\r\n        value: function() {\r\n            var _this2 = this;\r\n            this._isCustomClickEvent = false;\r\n            if (!this._$fileInput) {\r\n                this._$fileInput = renderFileUploaderInput();\r\n                _events_engine2.default.on(this._$fileInput, \"change\", this._inputChangeHandler.bind(this));\r\n                _events_engine2.default.on(this._$fileInput, \"click\", function(e) {\r\n                    e.stopPropagation();\r\n                    return _this2.option(\"useNativeInputClick\") || _this2._isCustomClickEvent\r\n                })\r\n            }\r\n            this._$fileInput.prop({\r\n                multiple: this.option(\"multiple\"),\r\n                accept: this.option(\"accept\"),\r\n                tabIndex: -1\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_inputChangeHandler\",\r\n        value: function() {\r\n            if (this._doPreventInputChange) {\r\n                return\r\n            }\r\n            var fileName = this._$fileInput.val().replace(/^.*\\\\/, \"\");\r\n            var files = this._$fileInput.prop(\"files\");\r\n            if (files && !files.length) {\r\n                return\r\n            }\r\n            var value = files ? this._getFiles(files) : [{\r\n                name: fileName\r\n            }];\r\n            this._changeValue(value);\r\n            if (\"instantly\" === this.option(\"uploadMode\")) {\r\n                this._uploadFiles()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_shouldFileListBeExtended\",\r\n        value: function() {\r\n            return \"useForm\" !== this.option(\"uploadMode\") && this.option(\"extendSelection\") && this.option(\"multiple\")\r\n        }\r\n    }, {\r\n        key: \"_removeDuplicates\",\r\n        value: function(files, value) {\r\n            var result = [];\r\n            for (var i = 0; i < value.length; i++) {\r\n                if (!this._isFileInArray(files, value[i])) {\r\n                    result.push(value[i])\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_isFileInArray\",\r\n        value: function(files, file) {\r\n            for (var i = 0; i < files.length; i++) {\r\n                var item = files[i];\r\n                if (item.size === file.size && item.name === file.name) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_changeValue\",\r\n        value: function(value) {\r\n            var files = this._shouldFileListBeExtended() ? this.option(\"value\").slice() : [];\r\n            if (\"instantly\" !== this.option(\"uploadMode\")) {\r\n                value = this._removeDuplicates(files, value)\r\n            }\r\n            this.option(\"value\", files.concat(value))\r\n        }\r\n    }, {\r\n        key: \"_getFiles\",\r\n        value: function(fileList) {\r\n            var values = [];\r\n            (0, _iterator.each)(fileList, function(_, value) {\r\n                return values.push(value)\r\n            });\r\n            return values\r\n        }\r\n    }, {\r\n        key: \"_initLabel\",\r\n        value: function() {\r\n            if (!this._$inputLabel) {\r\n                this._$inputLabel = (0, _renderer2.default)(\"<div>\")\r\n            }\r\n            this._$inputLabel.text(this.option(\"labelText\"))\r\n        }\r\n    }, {\r\n        key: \"_focusTarget\",\r\n        value: function() {\r\n            return this.$element().find(\".\" + FILEUPLOADER_BUTTON_CLASS)\r\n        }\r\n    }, {\r\n        key: \"_getSubmitElement\",\r\n        value: function() {\r\n            return this._$fileInput\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_initMarkup\", this).call(this);\r\n            this.$element().addClass(FILEUPLOADER_CLASS);\r\n            this._renderWrapper();\r\n            this._renderInputWrapper();\r\n            this._renderSelectButton();\r\n            this._renderInputContainer();\r\n            this._renderUploadButton();\r\n            this._preventRecreatingFiles = true\r\n        }\r\n    }, {\r\n        key: \"_render\",\r\n        value: function() {\r\n            this._preventRecreatingFiles = false;\r\n            this._renderDragEvents();\r\n            this._renderFiles();\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_render\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_createFileProgressBar\",\r\n        value: function(file) {\r\n            file.progressBar = this._createProgressBar(file.value.size);\r\n            file.progressBar.$element().appendTo(file.$file);\r\n            this._initStatusMessage(file);\r\n            this._initCancelButton(file)\r\n        }\r\n    }, {\r\n        key: \"_setStatusMessage\",\r\n        value: function(file, key) {\r\n            var _this3 = this;\r\n            setTimeout(function() {\r\n                if (_this3.option(\"showFileList\")) {\r\n                    file.$statusMessage.text(_this3.option(key));\r\n                    file.$statusMessage.css(\"display\", \"\");\r\n                    file.progressBar.$element().remove()\r\n                }\r\n            }, FILEUPLOADER_AFTER_LOAD_DELAY)\r\n        }\r\n    }, {\r\n        key: \"_createFiles\",\r\n        value: function() {\r\n            var _this4 = this;\r\n            var value = this.option(\"value\");\r\n            if (this._files && (0 === value.length || !this._shouldFileListBeExtended())) {\r\n                this._preventFilesUploading(this._files);\r\n                this._files = null\r\n            }\r\n            if (!this._files) {\r\n                this._files = []\r\n            }(0, _iterator.each)(value.slice(this._files.length), function(_, value) {\r\n                var file = _this4._createFile(value);\r\n                _this4._validateFile(file);\r\n                _this4._files.push(file)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_preventFilesUploading\",\r\n        value: function(files) {\r\n            var _this5 = this;\r\n            files.forEach(function(file) {\r\n                return _this5._uploadStrategy.abortUpload(file)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_validateFile\",\r\n        value: function(file) {\r\n            file.isValidFileExtension = this._validateFileExtension(file);\r\n            file.isValidMinSize = this._validateMinFileSize(file);\r\n            file.isValidMaxSize = this._validateMaxFileSize(file)\r\n        }\r\n    }, {\r\n        key: \"_validateFileExtension\",\r\n        value: function(file) {\r\n            var allowedExtensions = this.option(\"allowedFileExtensions\");\r\n            var fileExtension = file.value.name.substring(file.value.name.lastIndexOf(\".\")).toLowerCase();\r\n            if (0 === allowedExtensions.length) {\r\n                return true\r\n            }\r\n            for (var i = 0; i < allowedExtensions.length; i++) {\r\n                if (fileExtension === allowedExtensions[i].toLowerCase()) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_validateMaxFileSize\",\r\n        value: function(file) {\r\n            var fileSize = file.value.size;\r\n            var maxFileSize = this.option(\"maxFileSize\");\r\n            return maxFileSize > 0 ? fileSize <= maxFileSize : true\r\n        }\r\n    }, {\r\n        key: \"_validateMinFileSize\",\r\n        value: function(file) {\r\n            var fileSize = file.value.size;\r\n            var minFileSize = this.option(\"minFileSize\");\r\n            return minFileSize > 0 ? fileSize >= minFileSize : true\r\n        }\r\n    }, {\r\n        key: \"_createUploadStartedAction\",\r\n        value: function() {\r\n            this._uploadStartedAction = this._createActionByOption(\"onUploadStarted\")\r\n        }\r\n    }, {\r\n        key: \"_createUploadedAction\",\r\n        value: function() {\r\n            this._uploadedAction = this._createActionByOption(\"onUploaded\")\r\n        }\r\n    }, {\r\n        key: \"_createProgressAction\",\r\n        value: function() {\r\n            this._progressAction = this._createActionByOption(\"onProgress\")\r\n        }\r\n    }, {\r\n        key: \"_createUploadAbortedAction\",\r\n        value: function() {\r\n            this._uploadAbortedAction = this._createActionByOption(\"onUploadAborted\")\r\n        }\r\n    }, {\r\n        key: \"_createUploadErrorAction\",\r\n        value: function() {\r\n            this._uploadErrorAction = this._createActionByOption(\"onUploadError\")\r\n        }\r\n    }, {\r\n        key: \"_createFile\",\r\n        value: function(value) {\r\n            return {\r\n                value: value,\r\n                loadedSize: 0,\r\n                onProgress: (0, _callbacks2.default)(),\r\n                onAbort: (0, _callbacks2.default)(),\r\n                onLoad: (0, _callbacks2.default)(),\r\n                onError: (0, _callbacks2.default)(),\r\n                onLoadStart: (0, _callbacks2.default)(),\r\n                isValidFileExtension: true,\r\n                isValidMaxSize: true,\r\n                isValidMinSize: true,\r\n                isValid: function() {\r\n                    return this.isValidFileExtension && this.isValidMaxSize && this.isValidMinSize\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderFiles\",\r\n        value: function() {\r\n            var _this6 = this;\r\n            var value = this.option(\"value\");\r\n            if (!this._$filesContainer) {\r\n                this._$filesContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILES_CONTAINER_CLASS).appendTo(this._$content)\r\n            } else {\r\n                if (!this._shouldFileListBeExtended() || 0 === value.length) {\r\n                    this._$filesContainer.empty()\r\n                }\r\n            }\r\n            var showFileList = this.option(\"showFileList\");\r\n            if (showFileList) {\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    if (!file.$file) {\r\n                        _this6._renderFile(file)\r\n                    }\r\n                })\r\n            }\r\n            this.$element().toggleClass(FILEUPLOADER_SHOW_FILE_LIST_CLASS, showFileList);\r\n            this._toggleFileUploaderEmptyClassName();\r\n            this._updateFileNameMaxWidth();\r\n            this._$validationMessage && this._$validationMessage.dxOverlay(\"instance\").repaint()\r\n        }\r\n    }, {\r\n        key: \"_renderFile\",\r\n        value: function(file) {\r\n            var value = file.value;\r\n            var $fileContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CONTAINER_CLASS).appendTo(this._$filesContainer);\r\n            this._renderFileButtons(file, $fileContainer);\r\n            file.$file = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CLASS).appendTo($fileContainer);\r\n            var $fileInfo = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_INFO_CLASS).appendTo(file.$file);\r\n            file.$statusMessage = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS).appendTo(file.$file);\r\n            (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_NAME_CLASS).text(value.name).appendTo($fileInfo);\r\n            if ((0, _type.isDefined)(value.size)) {\r\n                (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_SIZE_CLASS).text(this._getFileSize(value.size)).appendTo($fileInfo)\r\n            }\r\n            if (file.isValid()) {\r\n                file.$statusMessage.text(this.option(\"readyToUploadMessage\"))\r\n            } else {\r\n                if (!file.isValidFileExtension) {\r\n                    file.$statusMessage.append(this._createValidationElement(\"invalidFileExtensionMessage\"))\r\n                }\r\n                if (!file.isValidMaxSize) {\r\n                    file.$statusMessage.append(this._createValidationElement(\"invalidMaxFileSizeMessage\"))\r\n                }\r\n                if (!file.isValidMinSize) {\r\n                    file.$statusMessage.append(this._createValidationElement(\"invalidMinFileSizeMessage\"))\r\n                }\r\n                $fileContainer.addClass(FILEUPLOADER_INVALID_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createValidationElement\",\r\n        value: function(key) {\r\n            return (0, _renderer2.default)(\"<span>\").text(this.option(key))\r\n        }\r\n    }, {\r\n        key: \"_updateFileNameMaxWidth\",\r\n        value: function() {\r\n            var cancelButtonsCount = this.option(\"allowCanceling\") && \"useForm\" !== this.option(\"uploadMode\") ? 1 : 0;\r\n            var uploadButtonsCount = \"useButtons\" === this.option(\"uploadMode\") ? 1 : 0;\r\n            var filesContainerWidth = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_CONTAINER_CLASS).first().width() || this._$filesContainer.width();\r\n            var $buttonContainer = this._$filesContainer.find(\".\" + FILEUPLOADER_BUTTON_CONTAINER_CLASS).eq(0);\r\n            var buttonsWidth = $buttonContainer.width() * (cancelButtonsCount + uploadButtonsCount);\r\n            var $fileSize = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_SIZE_CLASS).eq(0);\r\n            var prevFileSize = $fileSize.text();\r\n            $fileSize.text(\"1000 Mb\");\r\n            var fileSizeWidth = $fileSize.width();\r\n            $fileSize.text(prevFileSize);\r\n            this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_NAME_CLASS).css(\"maxWidth\", filesContainerWidth - buttonsWidth - fileSizeWidth)\r\n        }\r\n    }, {\r\n        key: \"_renderFileButtons\",\r\n        value: function(file, $container) {\r\n            var $cancelButton = this._getCancelButton(file);\r\n            $cancelButton && $container.append($cancelButton);\r\n            var $uploadButton = this._getUploadButton(file);\r\n            $uploadButton && $container.append($uploadButton)\r\n        }\r\n    }, {\r\n        key: \"_getCancelButton\",\r\n        value: function(file) {\r\n            var _this7 = this;\r\n            if (\"useForm\" === this.option(\"uploadMode\")) {\r\n                return null\r\n            }\r\n            file.cancelButton = this._createComponent((0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_CANCEL_BUTTON_CLASS), _button2.default, {\r\n                onClick: function() {\r\n                    return _this7._removeFile(file)\r\n                },\r\n                icon: \"close\",\r\n                visible: this.option(\"allowCanceling\"),\r\n                integrationOptions: {}\r\n            });\r\n            return (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.cancelButton.$element())\r\n        }\r\n    }, {\r\n        key: \"_getUploadButton\",\r\n        value: function(file) {\r\n            var _this8 = this;\r\n            if (!file.isValid() || \"useButtons\" !== this.option(\"uploadMode\")) {\r\n                return null\r\n            }\r\n            file.uploadButton = this._createComponent((0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_UPLOAD_BUTTON_CLASS), _button2.default, {\r\n                onClick: function() {\r\n                    return _this8._uploadFile(file)\r\n                },\r\n                icon: \"upload\"\r\n            });\r\n            file.onLoadStart.add(function() {\r\n                return file.uploadButton.$element().remove()\r\n            });\r\n            return (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.uploadButton.$element())\r\n        }\r\n    }, {\r\n        key: \"_removeFile\",\r\n        value: function(file) {\r\n            file.$file.parent().remove();\r\n            this._files.splice((0, _array.inArray)(file, this._files), 1);\r\n            var value = this.option(\"value\").slice();\r\n            value.splice((0, _array.inArray)(file.value, value), 1);\r\n            this._preventRecreatingFiles = true;\r\n            this.option(\"value\", value);\r\n            this._preventRecreatingFiles = false;\r\n            this._toggleFileUploaderEmptyClassName();\r\n            this._doPreventInputChange = true;\r\n            this._$fileInput.val(\"\");\r\n            this._doPreventInputChange = false\r\n        }\r\n    }, {\r\n        key: \"_toggleFileUploaderEmptyClassName\",\r\n        value: function() {\r\n            this.$element().toggleClass(FILEUPLOADER_EMPTY_CLASS, !this._files.length || this._hasInvalidFile(this._files))\r\n        }\r\n    }, {\r\n        key: \"_hasInvalidFile\",\r\n        value: function(files) {\r\n            for (var i = 0; i < files.length; i++) {\r\n                if (!files[i].isValid()) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_getFileSize\",\r\n        value: function(size) {\r\n            var i = 0;\r\n            var labels = [_message2.default.format(\"dxFileUploader-bytes\"), _message2.default.format(\"dxFileUploader-kb\"), _message2.default.format(\"dxFileUploader-Mb\"), _message2.default.format(\"dxFileUploader-Gb\")];\r\n            var count = labels.length - 1;\r\n            while (i < count && size >= 1024) {\r\n                size /= 1024;\r\n                i++\r\n            }\r\n            return Math.round(size) + \" \" + labels[i]\r\n        }\r\n    }, {\r\n        key: \"_renderSelectButton\",\r\n        value: function() {\r\n            var $button = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).appendTo(this._$inputWrapper);\r\n            this._selectButton = this._createComponent($button, _button2.default, {\r\n                text: this.option(\"selectButtonText\"),\r\n                focusStateEnabled: false,\r\n                integrationOptions: {}\r\n            });\r\n            if (\"desktop\" === _devices2.default.real().deviceType) {\r\n                this._selectButton.option(\"onClick\", this._selectButtonClickHandler.bind(this))\r\n            } else {\r\n                _events_engine2.default.off($button, \"click\");\r\n                _events_engine2.default.on($button, \"click\", this._selectButtonClickHandler.bind(this))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_selectButtonClickHandler\",\r\n        value: function() {\r\n            if (this.option(\"useNativeInputClick\")) {\r\n                return\r\n            }\r\n            if (this.option(\"disabled\")) {\r\n                return false\r\n            }\r\n            this._isCustomClickEvent = true;\r\n            _events_engine2.default.trigger(this._$fileInput, \"click\");\r\n            this._isCustomClickEvent = false\r\n        }\r\n    }, {\r\n        key: \"_renderUploadButton\",\r\n        value: function() {\r\n            if (\"useButtons\" !== this.option(\"uploadMode\")) {\r\n                return\r\n            }\r\n            var $uploadButton = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).addClass(FILEUPLOADER_UPLOAD_BUTTON_CLASS).appendTo(this._$content);\r\n            this._uploadButton = this._createComponent($uploadButton, _button2.default, {\r\n                text: this.option(\"uploadButtonText\"),\r\n                onClick: this._uploadButtonClickHandler.bind(this),\r\n                type: this.option(\"_uploadButtonType\"),\r\n                integrationOptions: {}\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_uploadButtonClickHandler\",\r\n        value: function() {\r\n            this._uploadFiles()\r\n        }\r\n    }, {\r\n        key: \"_shouldDragOverBeRendered\",\r\n        value: function() {\r\n            return \"useForm\" !== this.option(\"uploadMode\") || this.option(\"nativeDropSupported\")\r\n        }\r\n    }, {\r\n        key: \"_renderInputContainer\",\r\n        value: function() {\r\n            this._$inputContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_CONTAINER_CLASS).appendTo(this._$inputWrapper);\r\n            if (!this._shouldDragOverBeRendered()) {\r\n                this._$inputContainer.css(\"display\", \"none\")\r\n            }\r\n            this._$fileInput.addClass(FILEUPLOADER_INPUT_CLASS);\r\n            this._renderInput();\r\n            this._$inputLabel.addClass(FILEUPLOADER_INPUT_LABEL_CLASS).appendTo(this._$inputContainer)\r\n        }\r\n    }, {\r\n        key: \"_renderInput\",\r\n        value: function() {\r\n            if (this.option(\"useNativeInputClick\")) {\r\n                this._selectButton.option(\"template\", this._selectButtonInputTemplate.bind(this))\r\n            } else {\r\n                this._$fileInput.appendTo(this._$inputContainer);\r\n                this._selectButton.option(\"template\", \"content\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_selectButtonInputTemplate\",\r\n        value: function(data, content) {\r\n            var $content = (0, _renderer2.default)(content);\r\n            var $text = (0, _renderer2.default)(\"<span>\").addClass(\"dx-button-text\").text(data.text);\r\n            $content.append($text).append(this._$fileInput);\r\n            return $content\r\n        }\r\n    }, {\r\n        key: \"_renderInputWrapper\",\r\n        value: function() {\r\n            this._$inputWrapper = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_WRAPPER_CLASS).appendTo(this._$content)\r\n        }\r\n    }, {\r\n        key: \"_renderDragEvents\",\r\n        value: function() {\r\n            _events_engine2.default.off(this._$inputWrapper, \".\" + this.NAME);\r\n            if (!this._shouldDragOverBeRendered()) {\r\n                return\r\n            }\r\n            this._dragEventsTargets = [];\r\n            _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragenter\", this.NAME), this._dragEnterHandler.bind(this));\r\n            _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragover\", this.NAME), this._dragOverHandler.bind(this));\r\n            _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragleave\", this.NAME), this._dragLeaveHandler.bind(this));\r\n            _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"drop\", this.NAME), this._dropHandler.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_useInputForDrop\",\r\n        value: function() {\r\n            return this.option(\"nativeDropSupported\") && \"useForm\" === this.option(\"uploadMode\")\r\n        }\r\n    }, {\r\n        key: \"_dragEnterHandler\",\r\n        value: function(e) {\r\n            if (this.option(\"disabled\")) {\r\n                return false\r\n            }\r\n            if (!this._useInputForDrop()) {\r\n                e.preventDefault()\r\n            }\r\n            this._updateEventTargets(e);\r\n            this.$element().addClass(FILEUPLOADER_DRAGOVER_CLASS)\r\n        }\r\n    }, {\r\n        key: \"_dragOverHandler\",\r\n        value: function(e) {\r\n            if (!this._useInputForDrop()) {\r\n                e.preventDefault()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_dragLeaveHandler\",\r\n        value: function(e) {\r\n            if (!this._useInputForDrop()) {\r\n                e.preventDefault()\r\n            }\r\n            this._updateEventTargets(e);\r\n            if (!this._dragEventsTargets.length) {\r\n                this.$element().removeClass(FILEUPLOADER_DRAGOVER_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateEventTargets\",\r\n        value: function(e) {\r\n            var targetIndex = this._dragEventsTargets.indexOf(e.target);\r\n            var isTargetExists = targetIndex !== -1;\r\n            if (\"dragenter\" === e.type) {\r\n                !isTargetExists && this._dragEventsTargets.push(e.target)\r\n            } else {\r\n                isTargetExists && this._dragEventsTargets.splice(targetIndex, 1)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_dropHandler\",\r\n        value: function(e) {\r\n            this._dragEventsTargets = [];\r\n            this.$element().removeClass(FILEUPLOADER_DRAGOVER_CLASS);\r\n            if (this._useInputForDrop()) {\r\n                return\r\n            }\r\n            e.preventDefault();\r\n            var fileList = e.originalEvent.dataTransfer.files;\r\n            var files = this._getFiles(fileList);\r\n            if (!this.option(\"multiple\") && files.length > 1) {\r\n                return\r\n            }\r\n            this._changeValue(this._filterFiles(files));\r\n            if (\"instantly\" === this.option(\"uploadMode\")) {\r\n                this._uploadFiles()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_filterFiles\",\r\n        value: function(files) {\r\n            if (!files.length) {\r\n                return files\r\n            }\r\n            var accept = this.option(\"accept\");\r\n            if (!accept.length) {\r\n                return files\r\n            }\r\n            var result = [];\r\n            var allowedTypes = this._getAllowedFileTypes(accept);\r\n            for (var i = 0, n = files.length; i < n; i++) {\r\n                if (this._isFileTypeAllowed(files[i], allowedTypes)) {\r\n                    result.push(files[i])\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_getAllowedFileTypes\",\r\n        value: function(acceptSting) {\r\n            if (!acceptSting.length) {\r\n                return []\r\n            }\r\n            return acceptSting.split(\",\").map(function(item) {\r\n                return item.trim()\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_isFileTypeAllowed\",\r\n        value: function(file, allowedTypes) {\r\n            for (var i = 0, n = allowedTypes.length; i < n; i++) {\r\n                var allowedType = allowedTypes[i];\r\n                if (\".\" === allowedType[0]) {\r\n                    allowedType = allowedType.replace(\".\", \"\\\\.\");\r\n                    if (file.name.match(new RegExp(allowedType + \"$\", \"i\"))) {\r\n                        return true\r\n                    }\r\n                } else {\r\n                    allowedType = allowedType.replace(\"*\", \"\");\r\n                    if (file.type.match(new RegExp(allowedType, \"i\"))) {\r\n                        return true\r\n                    }\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_renderWrapper\",\r\n        value: function() {\r\n            var $wrapper = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_WRAPPER_CLASS).appendTo(this.$element());\r\n            var $container = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_CONTAINER_CLASS).appendTo($wrapper);\r\n            this._$content = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_CONTENT_CLASS).appendTo($container)\r\n        }\r\n    }, {\r\n        key: \"_clean\",\r\n        value: function() {\r\n            this._$fileInput.detach();\r\n            delete this._$filesContainer;\r\n            if (this._files) {\r\n                this._files.forEach(function(file) {\r\n                    file.$file = null;\r\n                    file.$statusMessage = null\r\n                })\r\n            }\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_clean\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_uploadFiles\",\r\n        value: function() {\r\n            var _this9 = this;\r\n            if (isFormDataSupported()) {\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    return _this9._uploadFile(file)\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_uploadFile\",\r\n        value: function(file) {\r\n            this._uploadStrategy.upload(file)\r\n        }\r\n    }, {\r\n        key: \"_updateProgressBar\",\r\n        value: function(file, loadedFileData) {\r\n            file.progressBar && file.progressBar.option({\r\n                value: loadedFileData.loaded,\r\n                showStatus: true\r\n            });\r\n            this._progressAction({\r\n                file: file.value,\r\n                segmentSize: loadedFileData.currentSegmentSize,\r\n                bytesLoaded: loadedFileData.loaded,\r\n                bytesTotal: loadedFileData.total,\r\n                event: loadedFileData.event,\r\n                request: file.request\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_updateTotalProgress\",\r\n        value: function(totalFilesSize, totalLoadedFilesSize) {\r\n            var progress = totalFilesSize ? this._getProgressValue(totalLoadedFilesSize / totalFilesSize) : 0;\r\n            this.option(\"progress\", progress);\r\n            this._setLoadedSize(totalLoadedFilesSize)\r\n        }\r\n    }, {\r\n        key: \"_getProgressValue\",\r\n        value: function(ratio) {\r\n            return Math.floor(100 * ratio)\r\n        }\r\n    }, {\r\n        key: \"_initStatusMessage\",\r\n        value: function(file) {\r\n            file.$statusMessage.css(\"display\", \"none\")\r\n        }\r\n    }, {\r\n        key: \"_initCancelButton\",\r\n        value: function(file) {\r\n            var _this10 = this;\r\n            file.cancelButton.option(\"onClick\", function() {\r\n                _this10._preventFilesUploading([file]);\r\n                _this10._removeFile(file)\r\n            });\r\n            var hideCancelButton = function() {\r\n                setTimeout(function() {\r\n                    file.cancelButton.option({\r\n                        visible: false\r\n                    })\r\n                }, FILEUPLOADER_AFTER_LOAD_DELAY)\r\n            };\r\n            file.onLoad.add(hideCancelButton);\r\n            file.onError.add(hideCancelButton)\r\n        }\r\n    }, {\r\n        key: \"_createProgressBar\",\r\n        value: function(fileSize) {\r\n            var _this11 = this;\r\n            return this._createComponent((0, _renderer2.default)(\"<div>\"), _progress_bar2.default, {\r\n                value: void 0,\r\n                min: 0,\r\n                max: fileSize,\r\n                statusFormat: function(ratio) {\r\n                    return _this11._getProgressValue(ratio) + \"%\"\r\n                },\r\n                showStatus: false,\r\n                statusPosition: \"right\"\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getTotalFilesSize\",\r\n        value: function() {\r\n            var _this12 = this;\r\n            if (!this._totalFilesSize) {\r\n                this._totalFilesSize = 0;\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    _this12._totalFilesSize += file.value.size\r\n                })\r\n            }\r\n            return this._totalFilesSize\r\n        }\r\n    }, {\r\n        key: \"_getTotalLoadedFilesSize\",\r\n        value: function() {\r\n            var _this13 = this;\r\n            if (!this._totalLoadedFilesSize) {\r\n                this._totalLoadedFilesSize = 0;\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    _this13._totalLoadedFilesSize += file.loadedSize\r\n                })\r\n            }\r\n            return this._totalLoadedFilesSize\r\n        }\r\n    }, {\r\n        key: \"_setLoadedSize\",\r\n        value: function(value) {\r\n            this._totalLoadedFilesSize = value\r\n        }\r\n    }, {\r\n        key: \"_recalculateProgress\",\r\n        value: function() {\r\n            this._totalFilesSize = 0;\r\n            this._totalLoadedFilesSize = 0;\r\n            this._updateTotalProgress(this._getTotalFilesSize(), this._getTotalLoadedFilesSize())\r\n        }\r\n    }, {\r\n        key: \"_getValidationMessageTarget\",\r\n        value: function() {\r\n            return this._$inputWrapper\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            var value = args.value;\r\n            switch (args.name) {\r\n                case \"height\":\r\n                case \"width\":\r\n                    this._updateFileNameMaxWidth();\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"value\":\r\n                    !value.length && this._$fileInput.val(\"\");\r\n                    if (!this._preventRecreatingFiles) {\r\n                        this._createFiles();\r\n                        this._renderFiles()\r\n                    }\r\n                    this._recalculateProgress();\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"name\":\r\n                    this._initFileInput();\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"accept\":\r\n                    this._initFileInput();\r\n                    break;\r\n                case \"multiple\":\r\n                    this._initFileInput();\r\n                    if (!args.value) {\r\n                        this.reset()\r\n                    }\r\n                    break;\r\n                case \"selectButtonText\":\r\n                    this._selectButton.option(\"text\", value);\r\n                    break;\r\n                case \"uploadButtonText\":\r\n                    this._uploadButton && this._uploadButton.option(\"text\", value);\r\n                    break;\r\n                case \"_uploadButtonType\":\r\n                    this._uploadButton && this._uploadButton.option(\"type\", value);\r\n                    break;\r\n                case \"maxFileSize\":\r\n                case \"minFileSize\":\r\n                case \"allowedFileExtensions\":\r\n                case \"invalidFileExtensionMessage\":\r\n                case \"invalidMaxFileSizeMessage\":\r\n                case \"invalidMinFileSizeMessage\":\r\n                case \"readyToUploadMessage\":\r\n                case \"uploadedMessage\":\r\n                case \"uploadFailedMessage\":\r\n                    this._invalidate();\r\n                    break;\r\n                case \"labelText\":\r\n                    this._$inputLabel.text(value);\r\n                    break;\r\n                case \"showFileList\":\r\n                    if (!this._preventRecreatingFiles) {\r\n                        this._renderFiles()\r\n                    }\r\n                    break;\r\n                case \"uploadFile\":\r\n                case \"uploadChunk\":\r\n                case \"chunkSize\":\r\n                    this._setUploadStrategy();\r\n                    break;\r\n                case \"abortUpload\":\r\n                case \"uploadUrl\":\r\n                case \"progress\":\r\n                case \"uploadMethod\":\r\n                case \"uploadHeaders\":\r\n                case \"extendSelection\":\r\n                    break;\r\n                case \"allowCanceling\":\r\n                case \"uploadMode\":\r\n                    this.reset();\r\n                    this._invalidate();\r\n                    break;\r\n                case \"onUploadStarted\":\r\n                    this._createUploadStartedAction();\r\n                    break;\r\n                case \"onUploaded\":\r\n                    this._createUploadedAction();\r\n                    break;\r\n                case \"onProgress\":\r\n                    this._createProgressAction();\r\n                    break;\r\n                case \"onUploadError\":\r\n                    this._createUploadErrorAction();\r\n                    break;\r\n                case \"onUploadAborted\":\r\n                    this._createUploadAbortedAction();\r\n                    break;\r\n                case \"useNativeInputClick\":\r\n                    this._renderInput();\r\n                    break;\r\n                case \"useDragOver\":\r\n                    this._renderDragEvents();\r\n                    break;\r\n                case \"nativeDropSupported\":\r\n                    this._invalidate();\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"reset\",\r\n        value: function() {\r\n            this.option(\"value\", [])\r\n        }\r\n    }]);\r\n    return FileUploader\r\n}(_editor2.default);\r\nvar FileBlobReader = function() {\r\n    function FileBlobReader(file, chunkSize) {\r\n        _classCallCheck(this, FileBlobReader);\r\n        this.file = file;\r\n        this.chunkSize = chunkSize;\r\n        this.index = 0\r\n    }\r\n    _createClass(FileBlobReader, [{\r\n        key: \"read\",\r\n        value: function() {\r\n            if (!this.file) {\r\n                return null\r\n            }\r\n            var result = this.createBlobResult(this.file, this.index, this.chunkSize);\r\n            if (result.isCompleted) {\r\n                this.file = null\r\n            }\r\n            this.index++;\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"createBlobResult\",\r\n        value: function(file, index, chunkSize) {\r\n            var currentPosition = index * chunkSize;\r\n            return {\r\n                blob: this.sliceFile(file, currentPosition, chunkSize),\r\n                index: index,\r\n                isCompleted: currentPosition + chunkSize >= file.size\r\n            }\r\n        }\r\n    }, {\r\n        key: \"sliceFile\",\r\n        value: function(file, startPos, length) {\r\n            if (file.slice) {\r\n                return file.slice(startPos, startPos + length)\r\n            }\r\n            if (file.webkitSlice) {\r\n                return file.webkitSlice(startPos, startPos + length)\r\n            }\r\n            return null\r\n        }\r\n    }]);\r\n    return FileBlobReader\r\n}();\r\nvar FileUploadStrategyBase = function() {\r\n    function FileUploadStrategyBase(fileUploader) {\r\n        _classCallCheck(this, FileUploadStrategyBase);\r\n        this.fileUploader = fileUploader\r\n    }\r\n    _createClass(FileUploadStrategyBase, [{\r\n        key: \"upload\",\r\n        value: function(file) {\r\n            if (file.isValid() && !file.uploadStarted) {\r\n                this._prepareFileBeforeUpload(file);\r\n                this._uploadCore(file)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"abortUpload\",\r\n        value: function abortUpload(file) {\r\n            var _this14 = this;\r\n            if (file._isError || file._isLoaded || file.isAborted) {\r\n                return\r\n            }\r\n            file.request && file.request.abort();\r\n            file.isAborted = true;\r\n            if (this._isCustomAbortUpload()) {\r\n                var abortUpload = this.fileUploader.option(\"abortUpload\");\r\n                var arg = this._createAbortUploadArgument(file);\r\n                var deferred = null;\r\n                try {\r\n                    var result = abortUpload(file.value, arg);\r\n                    deferred = (0, _deferred.when)(result)\r\n                } catch (error) {\r\n                    deferred = (new _deferred.Deferred).reject(error).promise()\r\n                }\r\n                deferred.done(function() {\r\n                    return file.onAbort.fire()\r\n                }).fail(function(error) {\r\n                    return _this14._handleFileError(file, error)\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createAbortUploadArgument\",\r\n        value: function(file) {}\r\n    }, {\r\n        key: \"_uploadCore\",\r\n        value: function(file) {}\r\n    }, {\r\n        key: \"_isCustomAbortUpload\",\r\n        value: function() {\r\n            var callback = this.fileUploader.option(\"abortUpload\");\r\n            return callback && (0, _type.isFunction)(callback)\r\n        }\r\n    }, {\r\n        key: \"_handleFileError\",\r\n        value: function(file, error) {\r\n            file._isError = true;\r\n            file.onError.fire(error)\r\n        }\r\n    }, {\r\n        key: \"_prepareFileBeforeUpload\",\r\n        value: function(file) {\r\n            if (file.$file) {\r\n                this.fileUploader._createFileProgressBar(file)\r\n            }\r\n            file.onLoadStart.add(this._onUploadStarted.bind(this, file));\r\n            file.onLoad.add(this._onLoadedHandler.bind(this, file));\r\n            file.onError.add(this._onErrorHandler.bind(this, file));\r\n            file.onAbort.add(this._onAbortHandler.bind(this, file));\r\n            file.onProgress.add(this._onProgressHandler.bind(this, file))\r\n        }\r\n    }, {\r\n        key: \"_isStatusError\",\r\n        value: function(status) {\r\n            return 400 <= status && status < 500 || 500 <= status && status < 600\r\n        }\r\n    }, {\r\n        key: \"_onUploadStarted\",\r\n        value: function(file, e) {\r\n            file.uploadStarted = true;\r\n            this.fileUploader._uploadStartedAction({\r\n                file: file.value,\r\n                event: e,\r\n                request: file.request\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onAbortHandler\",\r\n        value: function(file, e) {\r\n            this.fileUploader._uploadAbortedAction({\r\n                file: file.value,\r\n                event: e,\r\n                request: file.request\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onErrorHandler\",\r\n        value: function(file, error) {\r\n            this.fileUploader._setStatusMessage(file, \"uploadFailedMessage\");\r\n            this.fileUploader._uploadErrorAction({\r\n                file: file.value,\r\n                event: void 0,\r\n                request: file.request,\r\n                error: error\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onLoadedHandler\",\r\n        value: function(file, e) {\r\n            file._isLoaded = true;\r\n            this.fileUploader._setStatusMessage(file, \"uploadedMessage\");\r\n            this.fileUploader._uploadedAction({\r\n                file: file.value,\r\n                event: e,\r\n                request: file.request\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onProgressHandler\",\r\n        value: function(file, e) {\r\n            if (file) {\r\n                var totalFilesSize = this.fileUploader._getTotalFilesSize();\r\n                var totalLoadedFilesSize = this.fileUploader._getTotalLoadedFilesSize();\r\n                var loadedSize = Math.min(e.loaded, file.value.size);\r\n                var segmentSize = loadedSize - file.loadedSize;\r\n                file.loadedSize = loadedSize;\r\n                this.fileUploader._updateTotalProgress(totalFilesSize, totalLoadedFilesSize + segmentSize);\r\n                this.fileUploader._updateProgressBar(file, this._getLoadedData(loadedSize, e.total, segmentSize, e))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getLoadedData\",\r\n        value: function(loaded, total, currentSegmentSize, event) {\r\n            return {\r\n                loaded: loaded,\r\n                total: total,\r\n                currentSegmentSize: currentSegmentSize\r\n            }\r\n        }\r\n    }]);\r\n    return FileUploadStrategyBase\r\n}();\r\nvar ChunksFileUploadStrategyBase = function(_FileUploadStrategyBa) {\r\n    _inherits(ChunksFileUploadStrategyBase, _FileUploadStrategyBa);\r\n\r\n    function ChunksFileUploadStrategyBase(fileUploader) {\r\n        var _this15;\r\n        _classCallCheck(this, ChunksFileUploadStrategyBase);\r\n        _this15 = _possibleConstructorReturn(this, _getPrototypeOf(ChunksFileUploadStrategyBase).call(this, fileUploader));\r\n        _this15.chunkSize = _this15.fileUploader.option(\"chunkSize\");\r\n        return _this15\r\n    }\r\n    _createClass(ChunksFileUploadStrategyBase, [{\r\n        key: \"_uploadCore\",\r\n        value: function(file) {\r\n            var realFile = file.value;\r\n            var chunksData = {\r\n                name: realFile.name,\r\n                loadedBytes: 0,\r\n                type: realFile.type,\r\n                blobReader: new FileBlobReader(realFile, this.chunkSize),\r\n                guid: new _guid2.default,\r\n                fileSize: realFile.size,\r\n                count: Math.ceil(realFile.size / this.chunkSize),\r\n                customData: {}\r\n            };\r\n            file.chunksData = chunksData;\r\n            this._sendChunk(file, chunksData)\r\n        }\r\n    }, {\r\n        key: \"_sendChunk\",\r\n        value: function(file, chunksData) {\r\n            var _this16 = this;\r\n            var chunk = chunksData.blobReader.read();\r\n            chunksData.currentChunk = chunk;\r\n            if (chunk) {\r\n                this._sendChunkCore(file, chunksData, chunk).done(function() {\r\n                    if (file.isAborted) {\r\n                        return\r\n                    }\r\n                    chunksData.loadedBytes += chunk.blob.size;\r\n                    file.onProgress.fire({\r\n                        loaded: chunksData.loadedBytes,\r\n                        total: file.value.size\r\n                    });\r\n                    if (chunk.isCompleted) {\r\n                        file.onLoad.fire()\r\n                    }\r\n                    _this16._sendChunk(file, chunksData)\r\n                }).fail(function(error) {\r\n                    if (_this16._shouldHandleError(error)) {\r\n                        _this16._handleFileError(file, error)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_sendChunkCore\",\r\n        value: function(file, chunksData, chunk) {}\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(error) {}\r\n    }, {\r\n        key: \"_tryRaiseStartLoad\",\r\n        value: function(file) {\r\n            if (!file.isStartLoad) {\r\n                file.isStartLoad = true;\r\n                file.onLoadStart.fire()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getEvent\",\r\n        value: function(e) {\r\n            return null\r\n        }\r\n    }]);\r\n    return ChunksFileUploadStrategyBase\r\n}(FileUploadStrategyBase);\r\nvar DefaultChunksFileUploadStrategy = function(_ChunksFileUploadStra) {\r\n    _inherits(DefaultChunksFileUploadStrategy, _ChunksFileUploadStra);\r\n\r\n    function DefaultChunksFileUploadStrategy() {\r\n        _classCallCheck(this, DefaultChunksFileUploadStrategy);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(DefaultChunksFileUploadStrategy).apply(this, arguments))\r\n    }\r\n    _createClass(DefaultChunksFileUploadStrategy, [{\r\n        key: \"_sendChunkCore\",\r\n        value: function(file, chunksData, chunk) {\r\n            var _this17 = this;\r\n            return _ajax2.default.sendRequest({\r\n                url: this.fileUploader.option(\"uploadUrl\"),\r\n                method: this.fileUploader.option(\"uploadMethod\"),\r\n                headers: this.fileUploader.option(\"uploadHeaders\"),\r\n                beforeSend: function(xhr) {\r\n                    file.request = xhr\r\n                },\r\n                upload: {\r\n                    onloadstart: function() {\r\n                        return _this17._tryRaiseStartLoad(file)\r\n                    },\r\n                    onabort: function() {\r\n                        return file.onAbort.fire()\r\n                    }\r\n                },\r\n                data: this._createFormData({\r\n                    fileName: chunksData.name,\r\n                    blobName: this.fileUploader.option(\"name\"),\r\n                    blob: chunk.blob,\r\n                    index: chunk.index,\r\n                    count: chunksData.count,\r\n                    type: chunksData.type,\r\n                    guid: chunksData.guid,\r\n                    size: chunksData.fileSize\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(e) {\r\n            return this._isStatusError(e.status)\r\n        }\r\n    }, {\r\n        key: \"_createFormData\",\r\n        value: function(options) {\r\n            var formData = new window.FormData;\r\n            formData.append(options.blobName, options.blob);\r\n            formData.append(FILEUPLOADER_CHUNK_META_DATA_NAME, JSON.stringify({\r\n                FileName: options.fileName,\r\n                Index: options.index,\r\n                TotalCount: options.count,\r\n                FileSize: options.size,\r\n                FileType: options.type,\r\n                FileGuid: options.guid\r\n            }));\r\n            return formData\r\n        }\r\n    }]);\r\n    return DefaultChunksFileUploadStrategy\r\n}(ChunksFileUploadStrategyBase);\r\nvar CustomChunksFileUploadStrategy = function(_ChunksFileUploadStra2) {\r\n    _inherits(CustomChunksFileUploadStrategy, _ChunksFileUploadStra2);\r\n\r\n    function CustomChunksFileUploadStrategy() {\r\n        _classCallCheck(this, CustomChunksFileUploadStrategy);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(CustomChunksFileUploadStrategy).apply(this, arguments))\r\n    }\r\n    _createClass(CustomChunksFileUploadStrategy, [{\r\n        key: \"_sendChunkCore\",\r\n        value: function(file, chunksData) {\r\n            this._tryRaiseStartLoad(file);\r\n            var chunksInfo = this._createChunksInfo(chunksData);\r\n            var uploadChunk = this.fileUploader.option(\"uploadChunk\");\r\n            try {\r\n                var result = uploadChunk(file.value, chunksInfo);\r\n                return (0, _deferred.when)(result)\r\n            } catch (error) {\r\n                return (new _deferred.Deferred).reject(error).promise()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createAbortUploadArgument\",\r\n        value: function(file) {\r\n            return this._createChunksInfo(file.chunksData)\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(e) {\r\n            return true\r\n        }\r\n    }, {\r\n        key: \"_createChunksInfo\",\r\n        value: function(chunksData) {\r\n            return {\r\n                bytesUploaded: chunksData.loadedBytes,\r\n                chunkCount: chunksData.count,\r\n                customData: chunksData.customData,\r\n                chunkBlob: chunksData.currentChunk.blob,\r\n                chunkIndex: chunksData.currentChunk.index\r\n            }\r\n        }\r\n    }]);\r\n    return CustomChunksFileUploadStrategy\r\n}(ChunksFileUploadStrategyBase);\r\nvar WholeFileUploadStrategyBase = function(_FileUploadStrategyBa2) {\r\n    _inherits(WholeFileUploadStrategyBase, _FileUploadStrategyBa2);\r\n\r\n    function WholeFileUploadStrategyBase() {\r\n        _classCallCheck(this, WholeFileUploadStrategyBase);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(WholeFileUploadStrategyBase).apply(this, arguments))\r\n    }\r\n    _createClass(WholeFileUploadStrategyBase, [{\r\n        key: \"_uploadCore\",\r\n        value: function(file) {\r\n            var _this18 = this;\r\n            file.loadedSize = 0;\r\n            this._uploadFile(file).done(function() {\r\n                if (!file.isAborted) {\r\n                    file.onLoad.fire()\r\n                }\r\n            }).fail(function(error) {\r\n                if (_this18._shouldHandleError(file, error)) {\r\n                    _this18._handleFileError(file, error)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_uploadFile\",\r\n        value: function(file) {}\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(file, e) {}\r\n    }, {\r\n        key: \"_handleProgress\",\r\n        value: function(file, e) {\r\n            if (file._isError) {\r\n                return\r\n            }\r\n            file._isProgressStarted = true;\r\n            file.onProgress.fire(e)\r\n        }\r\n    }, {\r\n        key: \"_getLoadedData\",\r\n        value: function(loaded, total, segmentSize, event) {\r\n            var result = _get(_getPrototypeOf(WholeFileUploadStrategyBase.prototype), \"_getLoadedData\", this).call(this, loaded, total, segmentSize, event);\r\n            result.event = event;\r\n            return result\r\n        }\r\n    }]);\r\n    return WholeFileUploadStrategyBase\r\n}(FileUploadStrategyBase);\r\nvar DefaultWholeFileUploadStrategy = function(_WholeFileUploadStrat) {\r\n    _inherits(DefaultWholeFileUploadStrategy, _WholeFileUploadStrat);\r\n\r\n    function DefaultWholeFileUploadStrategy() {\r\n        _classCallCheck(this, DefaultWholeFileUploadStrategy);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(DefaultWholeFileUploadStrategy).apply(this, arguments))\r\n    }\r\n    _createClass(DefaultWholeFileUploadStrategy, [{\r\n        key: \"_uploadFile\",\r\n        value: function(file) {\r\n            var _this19 = this;\r\n            return _ajax2.default.sendRequest({\r\n                url: this.fileUploader.option(\"uploadUrl\"),\r\n                method: this.fileUploader.option(\"uploadMethod\"),\r\n                headers: this.fileUploader.option(\"uploadHeaders\"),\r\n                beforeSend: function(xhr) {\r\n                    file.request = xhr\r\n                },\r\n                upload: {\r\n                    onprogress: function(e) {\r\n                        return _this19._handleProgress(file, e)\r\n                    },\r\n                    onloadstart: function() {\r\n                        return file.onLoadStart.fire()\r\n                    },\r\n                    onabort: function() {\r\n                        return file.onAbort.fire()\r\n                    }\r\n                },\r\n                data: this._createFormData(this.fileUploader.option(\"name\"), file.value)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(file, e) {\r\n            return this._isStatusError(e.status) || !file._isProgressStarted\r\n        }\r\n    }, {\r\n        key: \"_createFormData\",\r\n        value: function(fieldName, fieldValue) {\r\n            var formData = new window.FormData;\r\n            formData.append(fieldName, fieldValue, fieldValue.name);\r\n            return formData\r\n        }\r\n    }]);\r\n    return DefaultWholeFileUploadStrategy\r\n}(WholeFileUploadStrategyBase);\r\nvar CustomWholeFileUploadStrategy = function(_WholeFileUploadStrat2) {\r\n    _inherits(CustomWholeFileUploadStrategy, _WholeFileUploadStrat2);\r\n\r\n    function CustomWholeFileUploadStrategy() {\r\n        _classCallCheck(this, CustomWholeFileUploadStrategy);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(CustomWholeFileUploadStrategy).apply(this, arguments))\r\n    }\r\n    _createClass(CustomWholeFileUploadStrategy, [{\r\n        key: \"_uploadFile\",\r\n        value: function(file) {\r\n            var _this20 = this;\r\n            file.onLoadStart.fire();\r\n            var progressCallback = function(loadedBytes) {\r\n                var arg = {\r\n                    loaded: loadedBytes,\r\n                    total: file.size\r\n                };\r\n                _this20._handleProgress(file, arg)\r\n            };\r\n            var uploadFile = this.fileUploader.option(\"uploadFile\");\r\n            try {\r\n                var result = uploadFile(file, progressCallback);\r\n                return (0, _deferred.when)(result)\r\n            } catch (error) {\r\n                return (new _deferred.Deferred).reject(error).promise()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(file, e) {\r\n            return true\r\n        }\r\n    }]);\r\n    return CustomWholeFileUploadStrategy\r\n}(WholeFileUploadStrategyBase);\r\n(0, _component_registrator2.default)(\"dxFileUploader\", FileUploader);\r\nmodule.exports = FileUploader;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}