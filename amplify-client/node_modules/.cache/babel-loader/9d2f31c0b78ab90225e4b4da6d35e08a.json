{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.virtual_columns.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _uiGrid_core = require(\"./ui.grid_core.virtual_columns_core\");\n\nvar DEFAULT_COLUMN_WIDTH = 50;\nvar VirtualScrollingRowsViewExtender = {\n  _resizeCore: function _resizeCore() {\n    this.callBase.apply(this, arguments);\n\n    this._columnsController.resize();\n  },\n  _handleScroll: function _handleScroll(e) {\n    var that = this;\n    var scrollable = this.getScrollable();\n    var left = e.scrollOffset.left;\n    that.callBase.apply(that, arguments);\n\n    if (that.option(\"rtlEnabled\") && scrollable) {\n      left = scrollable.$content().width() - scrollable.$element().width() - left;\n    }\n\n    that._columnsController.setScrollPosition(left);\n  }\n};\nvar HeaderFooterViewExtender = {\n  _renderCore: function _renderCore() {\n    var that = this;\n    var scrollLeft = that._scrollLeft;\n    that.callBase.apply(that, arguments);\n\n    if (that._columnsController.isVirtualMode() && scrollLeft >= 0) {\n      that._scrollLeft = 0;\n      that.scrollTo({\n        left: scrollLeft\n      });\n    }\n  }\n};\n\nvar ColumnsControllerExtender = function () {\n  var getWidths = function getWidths(columns) {\n    return columns.map(function (column) {\n      return column.visibleWidth || parseFloat(column.width) || DEFAULT_COLUMN_WIDTH;\n    });\n  };\n\n  var members = {\n    init: function init() {\n      var that = this;\n      that.callBase();\n      that._beginPageIndex = 0;\n      that._endPageIndex = 0;\n      that._position = 0;\n      that._virtualVisibleColumns = {};\n    },\n    resetColumnsCache: function resetColumnsCache() {\n      this.callBase();\n      this._virtualVisibleColumns = {};\n    },\n    getBeginPageIndex: function getBeginPageIndex(position) {\n      var visibleColumns = this.getVisibleColumns(void 0, true);\n      var widths = getWidths(visibleColumns);\n      var currentPosition = 0;\n\n      for (var index = 0; index < widths.length; index++) {\n        if (currentPosition >= position) {\n          return Math.floor(index / this.getColumnPageSize());\n        }\n\n        currentPosition += widths[index];\n      }\n\n      return 0;\n    },\n    getTotalWidth: function getTotalWidth() {\n      var width = this.option(\"width\");\n\n      if (\"number\" === typeof width) {\n        return width;\n      }\n\n      return this.getController(\"resizing\")._lastWidth || this.component.$element().outerWidth();\n    },\n    getEndPageIndex: function getEndPageIndex(position) {\n      var visibleColumns = this.getVisibleColumns(void 0, true);\n      var widths = getWidths(visibleColumns);\n      var currentPosition = 0;\n      position += this.getTotalWidth();\n\n      for (var index = 0; index < widths.length; index++) {\n        if (currentPosition >= position) {\n          return Math.ceil(index / this.getColumnPageSize());\n        }\n\n        currentPosition += widths[index];\n      }\n\n      return Math.ceil(widths.length / this.getColumnPageSize());\n    },\n    getColumnPageSize: function getColumnPageSize() {\n      return this.option(\"scrolling.columnPageSize\");\n    },\n    _fireColumnsChanged: function _fireColumnsChanged() {\n      var date = new Date();\n      this.columnsChanged.fire({\n        optionNames: {\n          all: true,\n          length: 1\n        },\n        changeTypes: {\n          columns: true,\n          length: 1\n        }\n      });\n      this._renderTime = new Date() - date;\n    },\n    setScrollPosition: function setScrollPosition(position) {\n      var that = this;\n      var renderingThreshold = that.option(\"scrolling.columnRenderingThreshold\");\n\n      if (that._renderTime > renderingThreshold) {\n        clearTimeout(that._changedTimeout);\n        that._changedTimeout = setTimeout(function () {\n          that._setScrollPositionCore(position);\n        }, that.option(\"scrolling.timeout\"));\n      } else {\n        that._setScrollPositionCore(position);\n      }\n    },\n    isVirtualMode: function isVirtualMode() {\n      return (0, _window.hasWindow)() && \"virtual\" === this.option(\"scrolling.columnRenderingMode\");\n    },\n    resize: function resize() {\n      this._setScrollPositionCore(this._position);\n    },\n    _setScrollPositionCore: function _setScrollPositionCore(position) {\n      var that = this;\n\n      if (that.isVirtualMode()) {\n        var beginPageIndex = that.getBeginPageIndex(position);\n        var endPageIndex = that.getEndPageIndex(position);\n        var needColumnsChanged = position < that._position ? that._beginPageIndex > beginPageIndex : that._endPageIndex < endPageIndex;\n        that._position = position;\n\n        if (needColumnsChanged) {\n          that._beginPageIndex = beginPageIndex;\n          that._endPageIndex = endPageIndex;\n\n          that._fireColumnsChanged();\n        }\n      }\n    },\n    getFixedColumns: function getFixedColumns(rowIndex, isBase) {\n      var fixedColumns = this.callBase(rowIndex);\n\n      if (this.isVirtualMode() && !isBase && fixedColumns.length) {\n        var transparentColumnIndex = fixedColumns.map(function (c) {\n          return c.command;\n        }).indexOf(\"transparent\");\n        fixedColumns[transparentColumnIndex].colspan = this.getVisibleColumns().length - this.callBase().length + 1;\n        return fixedColumns;\n      }\n\n      return fixedColumns;\n    },\n    getVisibleColumns: function getVisibleColumns(rowIndex, isBase) {\n      if (isBase || !this.isVirtualMode()) {\n        return this.callBase(rowIndex);\n      }\n\n      if (!this._beginPageIndex && !this._endPageIndex) {\n        this._beginPageIndex = this.getBeginPageIndex(this._position);\n        this._endPageIndex = this.getEndPageIndex(this._position);\n      }\n\n      var beginPageIndex = this._beginPageIndex;\n      var endPageIndex = this._endPageIndex;\n      var visibleColumnsHash = rowIndex + \"-\" + beginPageIndex + \"-\" + endPageIndex;\n\n      if (this._virtualVisibleColumns[visibleColumnsHash]) {\n        return this._virtualVisibleColumns[visibleColumnsHash];\n      }\n\n      var visibleColumns = this.callBase();\n      var rowCount = this.getRowCount();\n      var pageSize = this.getColumnPageSize();\n      var startIndex = beginPageIndex * pageSize;\n      var endIndex = endPageIndex * pageSize;\n      var fixedColumns = this.getFixedColumns(void 0, true);\n      var transparentColumnIndex = fixedColumns.map(function (c) {\n        return c.command;\n      }).indexOf(\"transparent\");\n      var beginFixedColumnCount = fixedColumns.length ? transparentColumnIndex : 0;\n      var beginFixedColumns = visibleColumns.slice(0, beginFixedColumnCount);\n      var beginColumns = visibleColumns.slice(beginFixedColumnCount, startIndex);\n      var beginWidth = getWidths(beginColumns).reduce(function (a, b) {\n        return a + b;\n      }, 0);\n\n      if (!beginWidth) {\n        startIndex = 0;\n      }\n\n      var endFixedColumnCount = fixedColumns.length ? fixedColumns.length - transparentColumnIndex - 1 : 0;\n      var endFixedColumns = visibleColumns.slice(visibleColumns.length - endFixedColumnCount);\n      var endColumns = visibleColumns.slice(endIndex, visibleColumns.length - endFixedColumnCount);\n      var endWidth = getWidths(endColumns).reduce(function (a, b) {\n        return a + b;\n      }, 0);\n\n      if (!endWidth) {\n        endIndex = visibleColumns.length;\n      }\n\n      if (rowCount > 1 && \"number\" === typeof rowIndex) {\n        var columnsInfo = [];\n\n        for (var i = 0; i < rowCount; i++) {\n          columnsInfo.push(this.callBase(i));\n        }\n\n        beginFixedColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, 0, beginFixedColumns.length)[rowIndex] || [];\n        endFixedColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, visibleColumns.length - endFixedColumns.length, visibleColumns.length)[rowIndex] || [];\n        visibleColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, startIndex, endIndex)[rowIndex] || [];\n      } else {\n        visibleColumns = visibleColumns.slice(startIndex, endIndex);\n      }\n\n      if (beginWidth) {\n        visibleColumns.unshift({\n          command: \"virtual\",\n          width: beginWidth\n        });\n        visibleColumns = beginFixedColumns.concat(visibleColumns);\n      }\n\n      if (endWidth) {\n        visibleColumns.push({\n          command: \"virtual\",\n          width: endWidth\n        });\n        visibleColumns = visibleColumns.concat(endFixedColumns);\n      }\n\n      this._virtualVisibleColumns[visibleColumnsHash] = visibleColumns;\n      return visibleColumns;\n    },\n    dispose: function dispose() {\n      clearTimeout(this._changedTimeout);\n      this.callBase.apply(this, arguments);\n    }\n  };\n  return members;\n}();\n\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      scrolling: {\n        columnRenderingMode: \"standard\",\n        columnPageSize: 5,\n        columnRenderingThreshold: 300\n      }\n    };\n  },\n  extenders: {\n    controllers: {\n      columns: ColumnsControllerExtender\n    },\n    views: {\n      columnHeadersView: HeaderFooterViewExtender,\n      footerView: HeaderFooterViewExtender,\n      rowsView: VirtualScrollingRowsViewExtender\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.virtual_columns.js"],"names":["_window","require","_uiGrid_core","DEFAULT_COLUMN_WIDTH","VirtualScrollingRowsViewExtender","_resizeCore","_handleScroll","that","scrollable","left","e","HeaderFooterViewExtender","_renderCore","scrollLeft","ColumnsControllerExtender","getWidths","column","parseFloat","members","init","resetColumnsCache","getBeginPageIndex","visibleColumns","widths","currentPosition","index","Math","getTotalWidth","width","getEndPageIndex","position","getColumnPageSize","_fireColumnsChanged","date","optionNames","all","length","changeTypes","columns","setScrollPosition","renderingThreshold","clearTimeout","setTimeout","isVirtualMode","resize","_setScrollPositionCore","beginPageIndex","endPageIndex","needColumnsChanged","getFixedColumns","fixedColumns","transparentColumnIndex","c","getVisibleColumns","isBase","visibleColumnsHash","rowIndex","rowCount","pageSize","startIndex","endIndex","beginFixedColumnCount","beginFixedColumns","beginColumns","beginWidth","a","endFixedColumnCount","endFixedColumns","endColumns","endWidth","columnsInfo","i","command","dispose","module","defaultOptions","scrolling","columnRenderingMode","columnPageSize","columnRenderingThreshold","extenders","controllers","views","columnHeadersView","footerView","rowsView"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.virtual_columns.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _uiGrid_core = require(\"./ui.grid_core.virtual_columns_core\");\r\nvar DEFAULT_COLUMN_WIDTH = 50;\r\nvar VirtualScrollingRowsViewExtender = {\r\n    _resizeCore: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._columnsController.resize()\r\n    },\r\n    _handleScroll: function(e) {\r\n        var that = this;\r\n        var scrollable = this.getScrollable();\r\n        var left = e.scrollOffset.left;\r\n        that.callBase.apply(that, arguments);\r\n        if (that.option(\"rtlEnabled\") && scrollable) {\r\n            left = scrollable.$content().width() - scrollable.$element().width() - left\r\n        }\r\n        that._columnsController.setScrollPosition(left)\r\n    }\r\n};\r\nvar HeaderFooterViewExtender = {\r\n    _renderCore: function() {\r\n        var that = this;\r\n        var scrollLeft = that._scrollLeft;\r\n        that.callBase.apply(that, arguments);\r\n        if (that._columnsController.isVirtualMode() && scrollLeft >= 0) {\r\n            that._scrollLeft = 0;\r\n            that.scrollTo({\r\n                left: scrollLeft\r\n            })\r\n        }\r\n    }\r\n};\r\nvar ColumnsControllerExtender = function() {\r\n    var getWidths = function(columns) {\r\n        return columns.map(function(column) {\r\n            return column.visibleWidth || parseFloat(column.width) || DEFAULT_COLUMN_WIDTH\r\n        })\r\n    };\r\n    var members = {\r\n        init: function() {\r\n            var that = this;\r\n            that.callBase();\r\n            that._beginPageIndex = 0;\r\n            that._endPageIndex = 0;\r\n            that._position = 0;\r\n            that._virtualVisibleColumns = {}\r\n        },\r\n        resetColumnsCache: function() {\r\n            this.callBase();\r\n            this._virtualVisibleColumns = {}\r\n        },\r\n        getBeginPageIndex: function(position) {\r\n            var visibleColumns = this.getVisibleColumns(void 0, true);\r\n            var widths = getWidths(visibleColumns);\r\n            var currentPosition = 0;\r\n            for (var index = 0; index < widths.length; index++) {\r\n                if (currentPosition >= position) {\r\n                    return Math.floor(index / this.getColumnPageSize())\r\n                }\r\n                currentPosition += widths[index]\r\n            }\r\n            return 0\r\n        },\r\n        getTotalWidth: function() {\r\n            var width = this.option(\"width\");\r\n            if (\"number\" === typeof width) {\r\n                return width\r\n            }\r\n            return this.getController(\"resizing\")._lastWidth || this.component.$element().outerWidth()\r\n        },\r\n        getEndPageIndex: function(position) {\r\n            var visibleColumns = this.getVisibleColumns(void 0, true);\r\n            var widths = getWidths(visibleColumns);\r\n            var currentPosition = 0;\r\n            position += this.getTotalWidth();\r\n            for (var index = 0; index < widths.length; index++) {\r\n                if (currentPosition >= position) {\r\n                    return Math.ceil(index / this.getColumnPageSize())\r\n                }\r\n                currentPosition += widths[index]\r\n            }\r\n            return Math.ceil(widths.length / this.getColumnPageSize())\r\n        },\r\n        getColumnPageSize: function() {\r\n            return this.option(\"scrolling.columnPageSize\")\r\n        },\r\n        _fireColumnsChanged: function() {\r\n            var date = new Date;\r\n            this.columnsChanged.fire({\r\n                optionNames: {\r\n                    all: true,\r\n                    length: 1\r\n                },\r\n                changeTypes: {\r\n                    columns: true,\r\n                    length: 1\r\n                }\r\n            });\r\n            this._renderTime = new Date - date\r\n        },\r\n        setScrollPosition: function(position) {\r\n            var that = this;\r\n            var renderingThreshold = that.option(\"scrolling.columnRenderingThreshold\");\r\n            if (that._renderTime > renderingThreshold) {\r\n                clearTimeout(that._changedTimeout);\r\n                that._changedTimeout = setTimeout(function() {\r\n                    that._setScrollPositionCore(position)\r\n                }, that.option(\"scrolling.timeout\"))\r\n            } else {\r\n                that._setScrollPositionCore(position)\r\n            }\r\n        },\r\n        isVirtualMode: function() {\r\n            return (0, _window.hasWindow)() && \"virtual\" === this.option(\"scrolling.columnRenderingMode\")\r\n        },\r\n        resize: function() {\r\n            this._setScrollPositionCore(this._position)\r\n        },\r\n        _setScrollPositionCore: function(position) {\r\n            var that = this;\r\n            if (that.isVirtualMode()) {\r\n                var beginPageIndex = that.getBeginPageIndex(position);\r\n                var endPageIndex = that.getEndPageIndex(position);\r\n                var needColumnsChanged = position < that._position ? that._beginPageIndex > beginPageIndex : that._endPageIndex < endPageIndex;\r\n                that._position = position;\r\n                if (needColumnsChanged) {\r\n                    that._beginPageIndex = beginPageIndex;\r\n                    that._endPageIndex = endPageIndex;\r\n                    that._fireColumnsChanged()\r\n                }\r\n            }\r\n        },\r\n        getFixedColumns: function(rowIndex, isBase) {\r\n            var fixedColumns = this.callBase(rowIndex);\r\n            if (this.isVirtualMode() && !isBase && fixedColumns.length) {\r\n                var transparentColumnIndex = fixedColumns.map(function(c) {\r\n                    return c.command\r\n                }).indexOf(\"transparent\");\r\n                fixedColumns[transparentColumnIndex].colspan = this.getVisibleColumns().length - this.callBase().length + 1;\r\n                return fixedColumns\r\n            }\r\n            return fixedColumns\r\n        },\r\n        getVisibleColumns: function(rowIndex, isBase) {\r\n            if (isBase || !this.isVirtualMode()) {\r\n                return this.callBase(rowIndex)\r\n            }\r\n            if (!this._beginPageIndex && !this._endPageIndex) {\r\n                this._beginPageIndex = this.getBeginPageIndex(this._position);\r\n                this._endPageIndex = this.getEndPageIndex(this._position)\r\n            }\r\n            var beginPageIndex = this._beginPageIndex;\r\n            var endPageIndex = this._endPageIndex;\r\n            var visibleColumnsHash = rowIndex + \"-\" + beginPageIndex + \"-\" + endPageIndex;\r\n            if (this._virtualVisibleColumns[visibleColumnsHash]) {\r\n                return this._virtualVisibleColumns[visibleColumnsHash]\r\n            }\r\n            var visibleColumns = this.callBase();\r\n            var rowCount = this.getRowCount();\r\n            var pageSize = this.getColumnPageSize();\r\n            var startIndex = beginPageIndex * pageSize;\r\n            var endIndex = endPageIndex * pageSize;\r\n            var fixedColumns = this.getFixedColumns(void 0, true);\r\n            var transparentColumnIndex = fixedColumns.map(function(c) {\r\n                return c.command\r\n            }).indexOf(\"transparent\");\r\n            var beginFixedColumnCount = fixedColumns.length ? transparentColumnIndex : 0;\r\n            var beginFixedColumns = visibleColumns.slice(0, beginFixedColumnCount);\r\n            var beginColumns = visibleColumns.slice(beginFixedColumnCount, startIndex);\r\n            var beginWidth = getWidths(beginColumns).reduce(function(a, b) {\r\n                return a + b\r\n            }, 0);\r\n            if (!beginWidth) {\r\n                startIndex = 0\r\n            }\r\n            var endFixedColumnCount = fixedColumns.length ? fixedColumns.length - transparentColumnIndex - 1 : 0;\r\n            var endFixedColumns = visibleColumns.slice(visibleColumns.length - endFixedColumnCount);\r\n            var endColumns = visibleColumns.slice(endIndex, visibleColumns.length - endFixedColumnCount);\r\n            var endWidth = getWidths(endColumns).reduce(function(a, b) {\r\n                return a + b\r\n            }, 0);\r\n            if (!endWidth) {\r\n                endIndex = visibleColumns.length\r\n            }\r\n            if (rowCount > 1 && \"number\" === typeof rowIndex) {\r\n                var columnsInfo = [];\r\n                for (var i = 0; i < rowCount; i++) {\r\n                    columnsInfo.push(this.callBase(i))\r\n                }\r\n                beginFixedColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, 0, beginFixedColumns.length)[rowIndex] || [];\r\n                endFixedColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, visibleColumns.length - endFixedColumns.length, visibleColumns.length)[rowIndex] || [];\r\n                visibleColumns = (0, _uiGrid_core.createColumnsInfo)(columnsInfo, startIndex, endIndex)[rowIndex] || []\r\n            } else {\r\n                visibleColumns = visibleColumns.slice(startIndex, endIndex)\r\n            }\r\n            if (beginWidth) {\r\n                visibleColumns.unshift({\r\n                    command: \"virtual\",\r\n                    width: beginWidth\r\n                });\r\n                visibleColumns = beginFixedColumns.concat(visibleColumns)\r\n            }\r\n            if (endWidth) {\r\n                visibleColumns.push({\r\n                    command: \"virtual\",\r\n                    width: endWidth\r\n                });\r\n                visibleColumns = visibleColumns.concat(endFixedColumns)\r\n            }\r\n            this._virtualVisibleColumns[visibleColumnsHash] = visibleColumns;\r\n            return visibleColumns\r\n        },\r\n        dispose: function() {\r\n            clearTimeout(this._changedTimeout);\r\n            this.callBase.apply(this, arguments)\r\n        }\r\n    };\r\n    return members\r\n}();\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            scrolling: {\r\n                columnRenderingMode: \"standard\",\r\n                columnPageSize: 5,\r\n                columnRenderingThreshold: 300\r\n            }\r\n        }\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            columns: ColumnsControllerExtender\r\n        },\r\n        views: {\r\n            columnHeadersView: HeaderFooterViewExtender,\r\n            footerView: HeaderFooterViewExtender,\r\n            rowsView: VirtualScrollingRowsViewExtender\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}