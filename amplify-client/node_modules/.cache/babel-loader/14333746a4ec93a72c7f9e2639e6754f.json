{"ast":null,"code":"/**\r\n * DevExtreme (ui/toolbar/ui.toolbar.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _common2 = _interopRequireDefault(_common);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _uiCollection_widget = require(\"../collection/ui.collection_widget.async\");\n\nvar _uiCollection_widget2 = _interopRequireDefault(_uiCollection_widget);\n\nvar _promise = require(\"../../core/polyfills/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\n\nvar _fx = require(\"../../animation/fx\");\n\nvar _fx2 = _interopRequireDefault(_fx);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar TOOLBAR_CLASS = \"dx-toolbar\";\nvar TOOLBAR_BEFORE_CLASS = \"dx-toolbar-before\";\nvar TOOLBAR_CENTER_CLASS = \"dx-toolbar-center\";\nvar TOOLBAR_AFTER_CLASS = \"dx-toolbar-after\";\nvar TOOLBAR_BOTTOM_CLASS = \"dx-toolbar-bottom\";\nvar TOOLBAR_MINI_CLASS = \"dx-toolbar-mini\";\nvar TOOLBAR_ITEM_CLASS = \"dx-toolbar-item\";\nvar TOOLBAR_LABEL_CLASS = \"dx-toolbar-label\";\nvar TOOLBAR_BUTTON_CLASS = \"dx-toolbar-button\";\nvar TOOLBAR_ITEMS_CONTAINER_CLASS = \"dx-toolbar-items-container\";\nvar TOOLBAR_GROUP_CLASS = \"dx-toolbar-group\";\nvar TOOLBAR_COMPACT_CLASS = \"dx-toolbar-compact\";\nvar TOOLBAR_LABEL_SELECTOR = \".\" + TOOLBAR_LABEL_CLASS;\nvar TEXT_BUTTON_MODE = \"text\";\nvar DEFAULT_BUTTON_TYPE = \"default\";\nvar TOOLBAR_ITEM_DATA_KEY = \"dxToolbarItemDataKey\";\n\nvar ToolbarBase = _uiCollection_widget2.default.inherit({\n  compactMode: false,\n  ctor: function ctor(element, options) {\n    this._userOptions = options || {};\n    this.callBase(element, options);\n  },\n  _getSynchronizableOptionsForCreateComponent: function _getSynchronizableOptionsForCreateComponent() {\n    return this.callBase().filter(function (item) {\n      return \"disabled\" !== item;\n    });\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    var template = new _bindable_template.BindableTemplate(function ($container, data, rawModel) {\n      if ((0, _type.isPlainObject)(data)) {\n        if (data.text) {\n          $container.text(data.text).wrapInner(\"<div>\");\n        }\n\n        if (data.html) {\n          $container.html(data.html);\n        }\n\n        if (\"dxButton\" === data.widget) {\n          if (this.option(\"useFlatButtons\")) {\n            data.options = data.options || {};\n            data.options.stylingMode = data.options.stylingMode || TEXT_BUTTON_MODE;\n          }\n\n          if (this.option(\"useDefaultButtons\")) {\n            data.options = data.options || {};\n            data.options.type = data.options.type || DEFAULT_BUTTON_TYPE;\n          }\n        }\n      } else {\n        $container.text(String(data));\n      }\n\n      this._getTemplate(\"dx-polymorph-widget\").render({\n        container: $container,\n        model: rawModel,\n        parent: this\n      });\n    }.bind(this), [\"text\", \"html\", \"widget\", \"options\"], this.option(\"integrationOptions.watchMethod\"));\n    this._defaultTemplates.item = template;\n    this._defaultTemplates.menuItem = template;\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      renderAs: \"topToolbar\",\n      grouped: false,\n      useFlatButtons: false,\n      useDefaultButtons: false\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return _themes2.default.isMaterial();\n      },\n      options: {\n        useFlatButtons: true\n      }\n    }]);\n  },\n  _itemContainer: function _itemContainer() {\n    return this._$toolbarItemsContainer.find([\".\" + TOOLBAR_BEFORE_CLASS, \".\" + TOOLBAR_CENTER_CLASS, \".\" + TOOLBAR_AFTER_CLASS].join(\",\"));\n  },\n  _itemClass: function _itemClass() {\n    return TOOLBAR_ITEM_CLASS;\n  },\n  _itemDataKey: function _itemDataKey() {\n    return TOOLBAR_ITEM_DATA_KEY;\n  },\n  _buttonClass: function _buttonClass() {\n    return TOOLBAR_BUTTON_CLASS;\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    this._arrangeItems();\n\n    this._applyCompactMode();\n  },\n  _initMarkup: function _initMarkup() {\n    this._renderToolbar();\n\n    this._renderSections();\n\n    this.callBase();\n    this.setAria(\"role\", \"toolbar\");\n  },\n  _waitParentAnimationFinished: function _waitParentAnimationFinished() {\n    var _this = this;\n\n    var $element = this.$element();\n    var timeout = 15;\n    return new _promise2.default(function (resolve) {\n      var check = function check() {\n        var readyToResolve = true;\n        $element.parents().each(function (_, parent) {\n          if (_fx2.default.isAnimating((0, _renderer2.default)(parent))) {\n            readyToResolve = false;\n            return false;\n          }\n        });\n\n        if (readyToResolve) {\n          resolve();\n        }\n\n        return readyToResolve;\n      };\n\n      var runCheck = function runCheck() {\n        clearTimeout(_this._waitParentAnimationTimeout);\n        _this._waitParentAnimationTimeout = setTimeout(function () {\n          return check() || runCheck();\n        }, timeout);\n      };\n\n      runCheck();\n    });\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._renderItemsAsync();\n\n    if (_themes2.default.isMaterial()) {\n      _promise2.default.all([this._waitParentAnimationFinished(), this._checkWebFontForLabelsLoaded()]).then(this._dimensionChanged.bind(this));\n    }\n  },\n  _postProcessRenderItems: function _postProcessRenderItems() {\n    this._arrangeItems();\n  },\n  _renderToolbar: function _renderToolbar() {\n    this.$element().addClass(TOOLBAR_CLASS).toggleClass(TOOLBAR_BOTTOM_CLASS, \"bottomToolbar\" === this.option(\"renderAs\"));\n    this._$toolbarItemsContainer = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_ITEMS_CONTAINER_CLASS).appendTo(this.$element());\n  },\n  _renderSections: function _renderSections() {\n    var $container = this._$toolbarItemsContainer;\n    var that = this;\n    (0, _iterator.each)([\"before\", \"center\", \"after\"], function () {\n      var sectionClass = \"dx-toolbar-\" + this;\n      var $section = $container.find(\".\" + sectionClass);\n\n      if (!$section.length) {\n        that[\"_$\" + this + \"Section\"] = $section = (0, _renderer2.default)(\"<div>\").addClass(sectionClass).appendTo($container);\n      }\n    });\n  },\n  _checkWebFontForLabelsLoaded: function _checkWebFontForLabelsLoaded() {\n    var $labels = this.$element().find(TOOLBAR_LABEL_SELECTOR);\n    var promises = [];\n    $labels.each(function (_, label) {\n      var text = (0, _renderer2.default)(label).text();\n      var fontWeight = (0, _renderer2.default)(label).css(\"fontWeight\");\n      promises.push(_themes2.default.waitWebFont(text, fontWeight));\n    });\n    return _promise2.default.all(promises);\n  },\n  _arrangeItems: function _arrangeItems(elementWidth) {\n    elementWidth = elementWidth || this.$element().width();\n\n    this._$centerSection.css({\n      margin: \"0 auto\",\n      \"float\": \"none\"\n    });\n\n    var beforeRect = this._$beforeSection.get(0).getBoundingClientRect();\n\n    var afterRect = this._$afterSection.get(0).getBoundingClientRect();\n\n    this._alignCenterSection(beforeRect, afterRect, elementWidth);\n\n    var $label = this._$toolbarItemsContainer.find(TOOLBAR_LABEL_SELECTOR).eq(0);\n\n    var $section = $label.parent();\n\n    if (!$label.length) {\n      return;\n    }\n\n    var labelOffset = beforeRect.width ? beforeRect.width : $label.position().left;\n    var widthBeforeSection = $section.hasClass(TOOLBAR_BEFORE_CLASS) ? 0 : labelOffset;\n    var widthAfterSection = $section.hasClass(TOOLBAR_AFTER_CLASS) ? 0 : afterRect.width;\n    var elemsAtSectionWidth = 0;\n    $section.children().not(TOOLBAR_LABEL_SELECTOR).each(function () {\n      elemsAtSectionWidth += (0, _renderer2.default)(this).outerWidth();\n    });\n    var freeSpace = elementWidth - elemsAtSectionWidth;\n    var sectionMaxWidth = Math.max(freeSpace - widthBeforeSection - widthAfterSection, 0);\n\n    if ($section.hasClass(TOOLBAR_BEFORE_CLASS)) {\n      this._alignSection(this._$beforeSection, sectionMaxWidth);\n    } else {\n      var labelPaddings = $label.outerWidth() - $label.width();\n      $label.css(\"maxWidth\", sectionMaxWidth - labelPaddings);\n    }\n  },\n  _alignCenterSection: function _alignCenterSection(beforeRect, afterRect, elementWidth) {\n    this._alignSection(this._$centerSection, elementWidth - beforeRect.width - afterRect.width);\n\n    var isRTL = this.option(\"rtlEnabled\");\n    var leftRect = isRTL ? afterRect : beforeRect;\n    var rightRect = isRTL ? beforeRect : afterRect;\n\n    var centerRect = this._$centerSection.get(0).getBoundingClientRect();\n\n    if (leftRect.right > centerRect.left || centerRect.right > rightRect.left) {\n      this._$centerSection.css({\n        marginLeft: leftRect.width,\n        marginRight: rightRect.width,\n        \"float\": leftRect.width > rightRect.width ? \"none\" : \"right\"\n      });\n    }\n  },\n  _alignSection: function _alignSection($section, maxWidth) {\n    var $labels = $section.find(TOOLBAR_LABEL_SELECTOR);\n    var labels = $labels.toArray();\n    maxWidth -= this._getCurrentLabelsPaddings(labels);\n\n    var currentWidth = this._getCurrentLabelsWidth(labels);\n\n    var difference = Math.abs(currentWidth - maxWidth);\n\n    if (maxWidth < currentWidth) {\n      labels = labels.reverse();\n\n      this._alignSectionLabels(labels, difference, false);\n    } else {\n      this._alignSectionLabels(labels, difference, true);\n    }\n  },\n  _alignSectionLabels: function _alignSectionLabels(labels, difference, expanding) {\n    var getRealLabelWidth = function getRealLabelWidth(label) {\n      return label.getBoundingClientRect().width;\n    };\n\n    for (var i = 0; i < labels.length; i++) {\n      var $label = (0, _renderer2.default)(labels[i]);\n      var currentLabelWidth = Math.ceil(getRealLabelWidth(labels[i]));\n      var labelMaxWidth;\n\n      if (expanding) {\n        $label.css(\"maxWidth\", \"inherit\");\n      }\n\n      var possibleLabelWidth = Math.ceil(expanding ? getRealLabelWidth(labels[i]) : currentLabelWidth);\n\n      if (possibleLabelWidth < difference) {\n        labelMaxWidth = expanding ? possibleLabelWidth : 0;\n        difference -= possibleLabelWidth;\n      } else {\n        labelMaxWidth = expanding ? currentLabelWidth + difference : currentLabelWidth - difference;\n        $label.css(\"maxWidth\", labelMaxWidth);\n        break;\n      }\n\n      $label.css(\"maxWidth\", labelMaxWidth);\n    }\n  },\n  _applyCompactMode: function _applyCompactMode() {\n    var $element = this.$element();\n    $element.removeClass(TOOLBAR_COMPACT_CLASS);\n\n    if (this.option(\"compactMode\") && this._getSummaryItemsWidth(this.itemElements(), true) > $element.width()) {\n      $element.addClass(TOOLBAR_COMPACT_CLASS);\n    }\n  },\n  _getCurrentLabelsWidth: function _getCurrentLabelsWidth(labels) {\n    var width = 0;\n    labels.forEach(function (label, index) {\n      width += (0, _renderer2.default)(label).outerWidth();\n    });\n    return width;\n  },\n  _getCurrentLabelsPaddings: function _getCurrentLabelsPaddings(labels) {\n    var padding = 0;\n    labels.forEach(function (label, index) {\n      padding += (0, _renderer2.default)(label).outerWidth() - (0, _renderer2.default)(label).width();\n    });\n    return padding;\n  },\n  _renderItem: function _renderItem(index, item, itemContainer, $after) {\n    var location = item.location || \"center\";\n    var container = itemContainer || this[\"_$\" + location + \"Section\"];\n    var itemHasText = !!(item.text || item.html);\n    var itemElement = this.callBase(index, item, container, $after);\n    itemElement.toggleClass(this._buttonClass(), !itemHasText).toggleClass(TOOLBAR_LABEL_CLASS, itemHasText).addClass(item.cssClass);\n    return itemElement;\n  },\n  _renderGroupedItems: function _renderGroupedItems() {\n    var that = this;\n    (0, _iterator.each)(this.option(\"items\"), function (groupIndex, group) {\n      var groupItems = group.items;\n      var $container = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_GROUP_CLASS);\n      var location = group.location || \"center\";\n\n      if (!groupItems || !groupItems.length) {\n        return;\n      }\n\n      (0, _iterator.each)(groupItems, function (itemIndex, item) {\n        that._renderItem(itemIndex, item, $container, null);\n      });\n\n      that._$toolbarItemsContainer.find(\".dx-toolbar-\" + location).append($container);\n    });\n  },\n  _renderItems: function _renderItems(items) {\n    var grouped = this.option(\"grouped\") && items.length && items[0].items;\n    grouped ? this._renderGroupedItems() : this.callBase(items);\n  },\n  _getToolbarItems: function _getToolbarItems() {\n    return this.option(\"items\") || [];\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    var items = this._getToolbarItems();\n\n    this.$element().toggleClass(TOOLBAR_MINI_CLASS, 0 === items.length);\n\n    if (this._renderedItemsCount) {\n      this._renderItems(items.slice(this._renderedItemsCount));\n    } else {\n      this._renderItems(items);\n    }\n\n    this._applyCompactMode();\n  },\n  _renderEmptyMessage: _common2.default.noop,\n  _clean: function _clean() {\n    this._$toolbarItemsContainer.children().empty();\n\n    this.$element().empty();\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible) {\n      this._arrangeItems();\n    }\n  },\n  _isVisible: function _isVisible() {\n    return this.$element().width() > 0 && this.$element().height() > 0;\n  },\n  _getIndexByItem: function _getIndexByItem(item) {\n    return (0, _array.inArray)(item, this._getToolbarItems());\n  },\n  _itemOptionChanged: function _itemOptionChanged(item, property, value) {\n    this.callBase.apply(this, [item, property, value]);\n\n    this._arrangeItems();\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name;\n\n    switch (name) {\n      case \"width\":\n        this.callBase.apply(this, arguments);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"renderAs\":\n      case \"useFlatButtons\":\n      case \"useDefaultButtons\":\n        this._invalidate();\n\n        break;\n\n      case \"compactMode\":\n        this._applyCompactMode();\n\n        break;\n\n      case \"grouped\":\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  _dispose: function _dispose() {\n    this.callBase();\n    clearTimeout(this._waitParentAnimationTimeout);\n  }\n});\n\n(0, _component_registrator2.default)(\"dxToolbarBase\", ToolbarBase);\nmodule.exports = ToolbarBase;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/toolbar/ui.toolbar.base.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_themes","_themes2","_common","_common2","_type","_component_registrator","_component_registrator2","_array","_extend","_iterator","_uiCollection_widget","_uiCollection_widget2","_promise","_promise2","_bindable_template","_fx","_fx2","obj","TOOLBAR_CLASS","TOOLBAR_BEFORE_CLASS","TOOLBAR_CENTER_CLASS","TOOLBAR_AFTER_CLASS","TOOLBAR_BOTTOM_CLASS","TOOLBAR_MINI_CLASS","TOOLBAR_ITEM_CLASS","TOOLBAR_LABEL_CLASS","TOOLBAR_BUTTON_CLASS","TOOLBAR_ITEMS_CONTAINER_CLASS","TOOLBAR_GROUP_CLASS","TOOLBAR_COMPACT_CLASS","TOOLBAR_LABEL_SELECTOR","TEXT_BUTTON_MODE","DEFAULT_BUTTON_TYPE","TOOLBAR_ITEM_DATA_KEY","ToolbarBase","compactMode","ctor","options","_getSynchronizableOptionsForCreateComponent","_initTemplates","template","data","$container","String","container","model","parent","_getDefaultOptions","renderAs","grouped","useFlatButtons","useDefaultButtons","_defaultOptionsRules","device","_itemContainer","_itemClass","_itemDataKey","_buttonClass","_dimensionChanged","_initMarkup","_waitParentAnimationFinished","_this","$element","timeout","check","readyToResolve","resolve","runCheck","clearTimeout","setTimeout","_render","_postProcessRenderItems","_renderToolbar","_renderSections","that","sectionClass","$section","_checkWebFontForLabelsLoaded","$labels","promises","text","fontWeight","_arrangeItems","elementWidth","margin","beforeRect","afterRect","$label","labelOffset","widthBeforeSection","widthAfterSection","elemsAtSectionWidth","freeSpace","sectionMaxWidth","Math","labelPaddings","_alignCenterSection","isRTL","leftRect","rightRect","centerRect","marginLeft","marginRight","_alignSection","labels","maxWidth","currentWidth","difference","_alignSectionLabels","getRealLabelWidth","label","i","currentLabelWidth","possibleLabelWidth","expanding","labelMaxWidth","_applyCompactMode","_getCurrentLabelsWidth","width","_getCurrentLabelsPaddings","padding","_renderItem","location","item","itemContainer","itemHasText","itemElement","_renderGroupedItems","groupItems","group","_renderItems","items","_getToolbarItems","_renderContentImpl","_renderEmptyMessage","_clean","_visibilityChanged","_isVisible","_getIndexByItem","_itemOptionChanged","_optionChanged","name","args","_dispose","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/toolbar/ui.toolbar.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _common2 = _interopRequireDefault(_common);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _uiCollection_widget = require(\"../collection/ui.collection_widget.async\");\r\nvar _uiCollection_widget2 = _interopRequireDefault(_uiCollection_widget);\r\nvar _promise = require(\"../../core/polyfills/promise\");\r\nvar _promise2 = _interopRequireDefault(_promise);\r\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\r\nvar _fx = require(\"../../animation/fx\");\r\nvar _fx2 = _interopRequireDefault(_fx);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar TOOLBAR_CLASS = \"dx-toolbar\";\r\nvar TOOLBAR_BEFORE_CLASS = \"dx-toolbar-before\";\r\nvar TOOLBAR_CENTER_CLASS = \"dx-toolbar-center\";\r\nvar TOOLBAR_AFTER_CLASS = \"dx-toolbar-after\";\r\nvar TOOLBAR_BOTTOM_CLASS = \"dx-toolbar-bottom\";\r\nvar TOOLBAR_MINI_CLASS = \"dx-toolbar-mini\";\r\nvar TOOLBAR_ITEM_CLASS = \"dx-toolbar-item\";\r\nvar TOOLBAR_LABEL_CLASS = \"dx-toolbar-label\";\r\nvar TOOLBAR_BUTTON_CLASS = \"dx-toolbar-button\";\r\nvar TOOLBAR_ITEMS_CONTAINER_CLASS = \"dx-toolbar-items-container\";\r\nvar TOOLBAR_GROUP_CLASS = \"dx-toolbar-group\";\r\nvar TOOLBAR_COMPACT_CLASS = \"dx-toolbar-compact\";\r\nvar TOOLBAR_LABEL_SELECTOR = \".\" + TOOLBAR_LABEL_CLASS;\r\nvar TEXT_BUTTON_MODE = \"text\";\r\nvar DEFAULT_BUTTON_TYPE = \"default\";\r\nvar TOOLBAR_ITEM_DATA_KEY = \"dxToolbarItemDataKey\";\r\nvar ToolbarBase = _uiCollection_widget2.default.inherit({\r\n    compactMode: false,\r\n    ctor: function(element, options) {\r\n        this._userOptions = options || {};\r\n        this.callBase(element, options)\r\n    },\r\n    _getSynchronizableOptionsForCreateComponent: function() {\r\n        return this.callBase().filter(function(item) {\r\n            return \"disabled\" !== item\r\n        })\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        var template = new _bindable_template.BindableTemplate(function($container, data, rawModel) {\r\n            if ((0, _type.isPlainObject)(data)) {\r\n                if (data.text) {\r\n                    $container.text(data.text).wrapInner(\"<div>\")\r\n                }\r\n                if (data.html) {\r\n                    $container.html(data.html)\r\n                }\r\n                if (\"dxButton\" === data.widget) {\r\n                    if (this.option(\"useFlatButtons\")) {\r\n                        data.options = data.options || {};\r\n                        data.options.stylingMode = data.options.stylingMode || TEXT_BUTTON_MODE\r\n                    }\r\n                    if (this.option(\"useDefaultButtons\")) {\r\n                        data.options = data.options || {};\r\n                        data.options.type = data.options.type || DEFAULT_BUTTON_TYPE\r\n                    }\r\n                }\r\n            } else {\r\n                $container.text(String(data))\r\n            }\r\n            this._getTemplate(\"dx-polymorph-widget\").render({\r\n                container: $container,\r\n                model: rawModel,\r\n                parent: this\r\n            })\r\n        }.bind(this), [\"text\", \"html\", \"widget\", \"options\"], this.option(\"integrationOptions.watchMethod\"));\r\n        this._defaultTemplates.item = template;\r\n        this._defaultTemplates.menuItem = template\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            renderAs: \"topToolbar\",\r\n            grouped: false,\r\n            useFlatButtons: false,\r\n            useDefaultButtons: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return _themes2.default.isMaterial()\r\n            },\r\n            options: {\r\n                useFlatButtons: true\r\n            }\r\n        }])\r\n    },\r\n    _itemContainer: function() {\r\n        return this._$toolbarItemsContainer.find([\".\" + TOOLBAR_BEFORE_CLASS, \".\" + TOOLBAR_CENTER_CLASS, \".\" + TOOLBAR_AFTER_CLASS].join(\",\"))\r\n    },\r\n    _itemClass: function() {\r\n        return TOOLBAR_ITEM_CLASS\r\n    },\r\n    _itemDataKey: function() {\r\n        return TOOLBAR_ITEM_DATA_KEY\r\n    },\r\n    _buttonClass: function() {\r\n        return TOOLBAR_BUTTON_CLASS\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._arrangeItems();\r\n        this._applyCompactMode()\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderToolbar();\r\n        this._renderSections();\r\n        this.callBase();\r\n        this.setAria(\"role\", \"toolbar\")\r\n    },\r\n    _waitParentAnimationFinished: function() {\r\n        var _this = this;\r\n        var $element = this.$element();\r\n        var timeout = 15;\r\n        return new _promise2.default(function(resolve) {\r\n            var check = function() {\r\n                var readyToResolve = true;\r\n                $element.parents().each(function(_, parent) {\r\n                    if (_fx2.default.isAnimating((0, _renderer2.default)(parent))) {\r\n                        readyToResolve = false;\r\n                        return false\r\n                    }\r\n                });\r\n                if (readyToResolve) {\r\n                    resolve()\r\n                }\r\n                return readyToResolve\r\n            };\r\n            var runCheck = function runCheck() {\r\n                clearTimeout(_this._waitParentAnimationTimeout);\r\n                _this._waitParentAnimationTimeout = setTimeout(function() {\r\n                    return check() || runCheck()\r\n                }, timeout)\r\n            };\r\n            runCheck()\r\n        })\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderItemsAsync();\r\n        if (_themes2.default.isMaterial()) {\r\n            _promise2.default.all([this._waitParentAnimationFinished(), this._checkWebFontForLabelsLoaded()]).then(this._dimensionChanged.bind(this))\r\n        }\r\n    },\r\n    _postProcessRenderItems: function() {\r\n        this._arrangeItems()\r\n    },\r\n    _renderToolbar: function() {\r\n        this.$element().addClass(TOOLBAR_CLASS).toggleClass(TOOLBAR_BOTTOM_CLASS, \"bottomToolbar\" === this.option(\"renderAs\"));\r\n        this._$toolbarItemsContainer = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_ITEMS_CONTAINER_CLASS).appendTo(this.$element())\r\n    },\r\n    _renderSections: function() {\r\n        var $container = this._$toolbarItemsContainer;\r\n        var that = this;\r\n        (0, _iterator.each)([\"before\", \"center\", \"after\"], function() {\r\n            var sectionClass = \"dx-toolbar-\" + this;\r\n            var $section = $container.find(\".\" + sectionClass);\r\n            if (!$section.length) {\r\n                that[\"_$\" + this + \"Section\"] = $section = (0, _renderer2.default)(\"<div>\").addClass(sectionClass).appendTo($container)\r\n            }\r\n        })\r\n    },\r\n    _checkWebFontForLabelsLoaded: function() {\r\n        var $labels = this.$element().find(TOOLBAR_LABEL_SELECTOR);\r\n        var promises = [];\r\n        $labels.each(function(_, label) {\r\n            var text = (0, _renderer2.default)(label).text();\r\n            var fontWeight = (0, _renderer2.default)(label).css(\"fontWeight\");\r\n            promises.push(_themes2.default.waitWebFont(text, fontWeight))\r\n        });\r\n        return _promise2.default.all(promises)\r\n    },\r\n    _arrangeItems: function(elementWidth) {\r\n        elementWidth = elementWidth || this.$element().width();\r\n        this._$centerSection.css({\r\n            margin: \"0 auto\",\r\n            \"float\": \"none\"\r\n        });\r\n        var beforeRect = this._$beforeSection.get(0).getBoundingClientRect();\r\n        var afterRect = this._$afterSection.get(0).getBoundingClientRect();\r\n        this._alignCenterSection(beforeRect, afterRect, elementWidth);\r\n        var $label = this._$toolbarItemsContainer.find(TOOLBAR_LABEL_SELECTOR).eq(0);\r\n        var $section = $label.parent();\r\n        if (!$label.length) {\r\n            return\r\n        }\r\n        var labelOffset = beforeRect.width ? beforeRect.width : $label.position().left;\r\n        var widthBeforeSection = $section.hasClass(TOOLBAR_BEFORE_CLASS) ? 0 : labelOffset;\r\n        var widthAfterSection = $section.hasClass(TOOLBAR_AFTER_CLASS) ? 0 : afterRect.width;\r\n        var elemsAtSectionWidth = 0;\r\n        $section.children().not(TOOLBAR_LABEL_SELECTOR).each(function() {\r\n            elemsAtSectionWidth += (0, _renderer2.default)(this).outerWidth()\r\n        });\r\n        var freeSpace = elementWidth - elemsAtSectionWidth;\r\n        var sectionMaxWidth = Math.max(freeSpace - widthBeforeSection - widthAfterSection, 0);\r\n        if ($section.hasClass(TOOLBAR_BEFORE_CLASS)) {\r\n            this._alignSection(this._$beforeSection, sectionMaxWidth)\r\n        } else {\r\n            var labelPaddings = $label.outerWidth() - $label.width();\r\n            $label.css(\"maxWidth\", sectionMaxWidth - labelPaddings)\r\n        }\r\n    },\r\n    _alignCenterSection: function(beforeRect, afterRect, elementWidth) {\r\n        this._alignSection(this._$centerSection, elementWidth - beforeRect.width - afterRect.width);\r\n        var isRTL = this.option(\"rtlEnabled\");\r\n        var leftRect = isRTL ? afterRect : beforeRect;\r\n        var rightRect = isRTL ? beforeRect : afterRect;\r\n        var centerRect = this._$centerSection.get(0).getBoundingClientRect();\r\n        if (leftRect.right > centerRect.left || centerRect.right > rightRect.left) {\r\n            this._$centerSection.css({\r\n                marginLeft: leftRect.width,\r\n                marginRight: rightRect.width,\r\n                \"float\": leftRect.width > rightRect.width ? \"none\" : \"right\"\r\n            })\r\n        }\r\n    },\r\n    _alignSection: function($section, maxWidth) {\r\n        var $labels = $section.find(TOOLBAR_LABEL_SELECTOR);\r\n        var labels = $labels.toArray();\r\n        maxWidth -= this._getCurrentLabelsPaddings(labels);\r\n        var currentWidth = this._getCurrentLabelsWidth(labels);\r\n        var difference = Math.abs(currentWidth - maxWidth);\r\n        if (maxWidth < currentWidth) {\r\n            labels = labels.reverse();\r\n            this._alignSectionLabels(labels, difference, false)\r\n        } else {\r\n            this._alignSectionLabels(labels, difference, true)\r\n        }\r\n    },\r\n    _alignSectionLabels: function(labels, difference, expanding) {\r\n        var getRealLabelWidth = function(label) {\r\n            return label.getBoundingClientRect().width\r\n        };\r\n        for (var i = 0; i < labels.length; i++) {\r\n            var $label = (0, _renderer2.default)(labels[i]);\r\n            var currentLabelWidth = Math.ceil(getRealLabelWidth(labels[i]));\r\n            var labelMaxWidth;\r\n            if (expanding) {\r\n                $label.css(\"maxWidth\", \"inherit\")\r\n            }\r\n            var possibleLabelWidth = Math.ceil(expanding ? getRealLabelWidth(labels[i]) : currentLabelWidth);\r\n            if (possibleLabelWidth < difference) {\r\n                labelMaxWidth = expanding ? possibleLabelWidth : 0;\r\n                difference -= possibleLabelWidth\r\n            } else {\r\n                labelMaxWidth = expanding ? currentLabelWidth + difference : currentLabelWidth - difference;\r\n                $label.css(\"maxWidth\", labelMaxWidth);\r\n                break\r\n            }\r\n            $label.css(\"maxWidth\", labelMaxWidth)\r\n        }\r\n    },\r\n    _applyCompactMode: function() {\r\n        var $element = this.$element();\r\n        $element.removeClass(TOOLBAR_COMPACT_CLASS);\r\n        if (this.option(\"compactMode\") && this._getSummaryItemsWidth(this.itemElements(), true) > $element.width()) {\r\n            $element.addClass(TOOLBAR_COMPACT_CLASS)\r\n        }\r\n    },\r\n    _getCurrentLabelsWidth: function(labels) {\r\n        var width = 0;\r\n        labels.forEach(function(label, index) {\r\n            width += (0, _renderer2.default)(label).outerWidth()\r\n        });\r\n        return width\r\n    },\r\n    _getCurrentLabelsPaddings: function(labels) {\r\n        var padding = 0;\r\n        labels.forEach(function(label, index) {\r\n            padding += (0, _renderer2.default)(label).outerWidth() - (0, _renderer2.default)(label).width()\r\n        });\r\n        return padding\r\n    },\r\n    _renderItem: function(index, item, itemContainer, $after) {\r\n        var location = item.location || \"center\";\r\n        var container = itemContainer || this[\"_$\" + location + \"Section\"];\r\n        var itemHasText = !!(item.text || item.html);\r\n        var itemElement = this.callBase(index, item, container, $after);\r\n        itemElement.toggleClass(this._buttonClass(), !itemHasText).toggleClass(TOOLBAR_LABEL_CLASS, itemHasText).addClass(item.cssClass);\r\n        return itemElement\r\n    },\r\n    _renderGroupedItems: function() {\r\n        var that = this;\r\n        (0, _iterator.each)(this.option(\"items\"), function(groupIndex, group) {\r\n            var groupItems = group.items;\r\n            var $container = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_GROUP_CLASS);\r\n            var location = group.location || \"center\";\r\n            if (!groupItems || !groupItems.length) {\r\n                return\r\n            }(0, _iterator.each)(groupItems, function(itemIndex, item) {\r\n                that._renderItem(itemIndex, item, $container, null)\r\n            });\r\n            that._$toolbarItemsContainer.find(\".dx-toolbar-\" + location).append($container)\r\n        })\r\n    },\r\n    _renderItems: function(items) {\r\n        var grouped = this.option(\"grouped\") && items.length && items[0].items;\r\n        grouped ? this._renderGroupedItems() : this.callBase(items)\r\n    },\r\n    _getToolbarItems: function() {\r\n        return this.option(\"items\") || []\r\n    },\r\n    _renderContentImpl: function() {\r\n        var items = this._getToolbarItems();\r\n        this.$element().toggleClass(TOOLBAR_MINI_CLASS, 0 === items.length);\r\n        if (this._renderedItemsCount) {\r\n            this._renderItems(items.slice(this._renderedItemsCount))\r\n        } else {\r\n            this._renderItems(items)\r\n        }\r\n        this._applyCompactMode()\r\n    },\r\n    _renderEmptyMessage: _common2.default.noop,\r\n    _clean: function() {\r\n        this._$toolbarItemsContainer.children().empty();\r\n        this.$element().empty()\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._arrangeItems()\r\n        }\r\n    },\r\n    _isVisible: function() {\r\n        return this.$element().width() > 0 && this.$element().height() > 0\r\n    },\r\n    _getIndexByItem: function(item) {\r\n        return (0, _array.inArray)(item, this._getToolbarItems())\r\n    },\r\n    _itemOptionChanged: function(item, property, value) {\r\n        this.callBase.apply(this, [item, property, value]);\r\n        this._arrangeItems()\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        switch (name) {\r\n            case \"width\":\r\n                this.callBase.apply(this, arguments);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"renderAs\":\r\n            case \"useFlatButtons\":\r\n            case \"useDefaultButtons\":\r\n                this._invalidate();\r\n                break;\r\n            case \"compactMode\":\r\n                this._applyCompactMode();\r\n                break;\r\n            case \"grouped\":\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        this.callBase();\r\n        clearTimeout(this._waitParentAnimationTimeout)\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxToolbarBase\", ToolbarBase);\r\nmodule.exports = ToolbarBase;\r\n"]},"metadata":{},"sourceType":"module"}