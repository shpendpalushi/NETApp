{"ast":null,"code":"import _toConsumableArray from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { map } from '../operators/map';\nimport { isObject } from '../util/isObject';\nimport { from } from './from';\nexport function forkJoin() {\n  for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {\n    sources[_key] = arguments[_key];\n  }\n\n  if (sources.length === 1) {\n    var first = sources[0];\n\n    if (isArray(first)) {\n      return forkJoinInternal(first, null);\n    }\n\n    if (isObject(first) && Object.getPrototypeOf(first) === Object.prototype) {\n      var keys = Object.keys(first);\n      return forkJoinInternal(keys.map(function (key) {\n        return first[key];\n      }), keys);\n    }\n  }\n\n  if (typeof sources[sources.length - 1] === 'function') {\n    var resultSelector = sources.pop();\n    sources = sources.length === 1 && isArray(sources[0]) ? sources[0] : sources;\n    return forkJoinInternal(sources, null).pipe(map(function (args) {\n      return resultSelector.apply(void 0, _toConsumableArray(args));\n    }));\n  }\n\n  return forkJoinInternal(sources, null);\n}\n\nfunction forkJoinInternal(sources, keys) {\n  return new Observable(function (subscriber) {\n    var len = sources.length;\n\n    if (len === 0) {\n      subscriber.complete();\n      return;\n    }\n\n    var values = new Array(len);\n    var completed = 0;\n    var emitted = 0;\n\n    var _loop = function _loop(i) {\n      var source = from(sources[i]);\n      var hasValue = false;\n      subscriber.add(source.subscribe({\n        next: function next(value) {\n          if (!hasValue) {\n            hasValue = true;\n            emitted++;\n          }\n\n          values[i] = value;\n        },\n        error: function error(err) {\n          return subscriber.error(err);\n        },\n        complete: function complete() {\n          completed++;\n\n          if (completed === len || !hasValue) {\n            if (emitted === len) {\n              subscriber.next(keys ? keys.reduce(function (result, key, i) {\n                return result[key] = values[i], result;\n              }, {}) : values);\n            }\n\n            subscriber.complete();\n          }\n        }\n      }));\n    };\n\n    for (var i = 0; i < len; i++) {\n      _loop(i);\n    }\n  });\n}","map":{"version":3,"sources":["../../../src/internal/observable/forkJoin.ts"],"names":[],"mappings":"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","sourcesContent":["import { Observable } from '../Observable';\r\nimport { isArray } from '../util/isArray';\r\nimport { map } from '../operators/map';\r\nimport { isObject } from '../util/isObject';\r\nimport { from } from './from';\r\nexport function forkJoin(...sources) {\r\n    if (sources.length === 1) {\r\n        const first = sources[0];\r\n        if (isArray(first)) {\r\n            return forkJoinInternal(first, null);\r\n        }\r\n        if (isObject(first) && Object.getPrototypeOf(first) === Object.prototype) {\r\n            const keys = Object.keys(first);\r\n            return forkJoinInternal(keys.map(key => first[key]), keys);\r\n        }\r\n    }\r\n    if (typeof sources[sources.length - 1] === 'function') {\r\n        const resultSelector = sources.pop();\r\n        sources = (sources.length === 1 && isArray(sources[0])) ? sources[0] : sources;\r\n        return forkJoinInternal(sources, null).pipe(map((args) => resultSelector(...args)));\r\n    }\r\n    return forkJoinInternal(sources, null);\r\n}\r\nfunction forkJoinInternal(sources, keys) {\r\n    return new Observable(subscriber => {\r\n        const len = sources.length;\r\n        if (len === 0) {\r\n            subscriber.complete();\r\n            return;\r\n        }\r\n        const values = new Array(len);\r\n        let completed = 0;\r\n        let emitted = 0;\r\n        for (let i = 0; i < len; i++) {\r\n            const source = from(sources[i]);\r\n            let hasValue = false;\r\n            subscriber.add(source.subscribe({\r\n                next: value => {\r\n                    if (!hasValue) {\r\n                        hasValue = true;\r\n                        emitted++;\r\n                    }\r\n                    values[i] = value;\r\n                },\r\n                error: err => subscriber.error(err),\r\n                complete: () => {\r\n                    completed++;\r\n                    if (completed === len || !hasValue) {\r\n                        if (emitted === len) {\r\n                            subscriber.next(keys ?\r\n                                keys.reduce((result, key, i) => (result[key] = values[i], result), {}) :\r\n                                values);\r\n                        }\r\n                        subscriber.complete();\r\n                    }\r\n                }\r\n            }));\r\n        }\r\n    });\r\n}\r\n//# sourceMappingURL=forkJoin.js.map"]},"metadata":{},"sourceType":"module"}