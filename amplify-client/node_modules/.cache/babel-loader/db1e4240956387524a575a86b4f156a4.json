{"ast":null,"code":"/**\r\n * DevExtreme (viz/axes/smart_formatter.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.smartFormatter = smartFormatter;\nexports.formatRange = formatRange;\n\nvar _format_helper = require(\"../../format_helper\");\n\nvar _format_helper2 = _interopRequireDefault(_format_helper);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _date = require(\"../../core/utils/date\");\n\nvar _date2 = _interopRequireDefault(_date);\n\nvar _math = require(\"../../core/utils/math\");\n\nvar _utils = require(\"../core/utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar _format = _format_helper2.default.format;\nvar floor = Math.floor;\nvar abs = Math.abs;\nvar EXPONENTIAL = \"exponential\";\nvar formats = [\"fixedPoint\", \"thousands\", \"millions\", \"billions\", \"trillions\", EXPONENTIAL];\nvar dateUnitIntervals = [\"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"month\", \"year\"];\n\nfunction getDatesDifferences(prevDate, curDate, nextDate, tickFormat) {\n  var prevDifferences;\n  var nextDifferences;\n  var dateUnitInterval;\n  var tickFormatIndex;\n  var dateUnitsLength = dateUnitIntervals.length;\n  var i;\n  var j;\n\n  if (\"week\" === tickFormat) {\n    tickFormat = \"day\";\n  } else {\n    if (\"quarter\" === tickFormat) {\n      tickFormat = \"month\";\n    } else {\n      if (\"shorttime\" === tickFormat) {\n        tickFormat = \"hour\";\n      } else {\n        if (\"longtime\" === tickFormat) {\n          tickFormat = \"second\";\n        }\n      }\n    }\n  }\n\n  tickFormatIndex = dateUnitIntervals.indexOf(tickFormat);\n\n  if (nextDate) {\n    nextDifferences = _date2.default.getDatesDifferences(curDate, nextDate);\n    prevDifferences = _date2.default.getDatesDifferences(curDate, prevDate);\n\n    if (nextDifferences[tickFormat]) {\n      for (i = dateUnitsLength - 1; i >= tickFormatIndex; i--) {\n        dateUnitInterval = dateUnitIntervals[i];\n\n        if (i === tickFormatIndex) {\n          setDateUnitInterval(nextDifferences, tickFormatIndex + (nextDifferences.millisecond ? 2 : 1));\n        } else {\n          if (nextDifferences[dateUnitInterval]) {\n            resetDateUnitInterval(nextDifferences, i);\n            break;\n          }\n        }\n      }\n    }\n  } else {\n    prevDifferences = _date2.default.getDatesDifferences(prevDate, curDate);\n\n    for (i = dateUnitsLength - 1; i >= tickFormatIndex; i--) {\n      dateUnitInterval = dateUnitIntervals[i];\n\n      if (prevDifferences[dateUnitInterval]) {\n        if (i - tickFormatIndex > 1) {\n          for (j = tickFormatIndex + 1; j >= 0; j--) {\n            resetDateUnitInterval(prevDifferences, j);\n          }\n\n          break;\n        } else {\n          if (isDateTimeStart(curDate, dateUnitInterval)) {\n            for (j = i - 1; j > 0; j--) {\n              resetDateUnitInterval(prevDifferences, j);\n            }\n\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  return nextDate ? nextDifferences : prevDifferences;\n}\n\nfunction isDateTimeStart(date, dateUnitInterval) {\n  var unitNumbers = [date.getMilliseconds(), date.getSeconds(), date.getMinutes(), date.getHours(), date.getDate(), date.getMonth()];\n  var unitIndex = dateUnitIntervals.indexOf(dateUnitInterval);\n  var i;\n\n  for (i = 0; i < unitIndex; i++) {\n    if (4 === i && 1 !== unitNumbers[i] || 4 !== i && 0 !== unitNumbers[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction resetDateUnitInterval(differences, intervalIndex) {\n  var dateUnitInterval = dateUnitIntervals[intervalIndex];\n\n  if (differences[dateUnitInterval]) {\n    differences[dateUnitInterval] = false;\n    differences.count--;\n  }\n}\n\nfunction setDateUnitInterval(differences, intervalIndex) {\n  var dateUnitInterval = dateUnitIntervals[intervalIndex];\n\n  if (false === differences[dateUnitInterval]) {\n    differences[dateUnitInterval] = true;\n    differences.count++;\n  }\n}\n\nfunction getNoZeroIndex(str) {\n  return str.length - parseInt(str).toString().length;\n}\n\nfunction getTransitionTickIndex(ticks, value) {\n  var i;\n  var curDiff;\n  var minDiff;\n  var nearestTickIndex = 0;\n  minDiff = abs(value - ticks[0]);\n\n  for (i = 1; i < ticks.length; i++) {\n    curDiff = abs(value - ticks[i]);\n\n    if (curDiff < minDiff) {\n      minDiff = curDiff;\n      nearestTickIndex = i;\n    }\n  }\n\n  return nearestTickIndex;\n}\n\nfunction splitDecimalNumber(value) {\n  return value.toString().split(\".\");\n}\n\nfunction createFormat(type) {\n  var formatter;\n\n  if ((0, _type.isFunction)(type)) {\n    formatter = type;\n    type = null;\n  }\n\n  return {\n    type: type,\n    formatter: formatter\n  };\n}\n\nfunction smartFormatter(tick, options) {\n  var tickInterval = options.tickInterval;\n  var tickIntervalIndex;\n  var tickIndex;\n  var actualIndex;\n  var stringTick = abs(tick).toString();\n  var precision = 0;\n  var typeFormat;\n  var offset = 0;\n  var separatedTickInterval;\n  var indexOfFormat = 0;\n  var indexOfTick = -1;\n  var datesDifferences;\n  var format = options.labelOptions.format;\n  var ticks = options.ticks;\n  var log10Tick;\n  var prevDateIndex;\n  var nextDateIndex;\n  var isLogarithmic = \"logarithmic\" === options.type;\n\n  if (1 === ticks.length && 0 === ticks.indexOf(tick) && !(0, _type.isDefined)(tickInterval)) {\n    tickInterval = abs(tick) >= 1 ? 1 : (0, _math.adjust)(1 - abs(tick), tick);\n  }\n\n  if (!(0, _type.isDefined)(format) && \"discrete\" !== options.type && tick && (10 === options.logarithmBase || !isLogarithmic)) {\n    if (\"datetime\" !== options.dataType && (0, _type.isDefined)(tickInterval)) {\n      if (ticks.length && ticks.indexOf(tick) === -1) {\n        indexOfTick = getTransitionTickIndex(ticks, tick);\n        tickInterval = (0, _math.adjust)(abs(tick - ticks[indexOfTick]), tick);\n      }\n\n      separatedTickInterval = splitDecimalNumber(tickInterval);\n\n      if (separatedTickInterval < 2) {\n        separatedTickInterval = splitDecimalNumber(tick);\n      }\n\n      if (isLogarithmic) {\n        log10Tick = (0, _utils.getAdjustedLog10)(abs(tick));\n\n        if (log10Tick > 0) {\n          typeFormat = formats[floor(log10Tick / 3)] || EXPONENTIAL;\n        } else {\n          if (log10Tick < -4) {\n            typeFormat = EXPONENTIAL;\n          } else {\n            precision = void 0;\n          }\n        }\n      } else {\n        if (separatedTickInterval.length > 1 && !(0, _type.isExponential)(tickInterval)) {\n          precision = separatedTickInterval[1].length;\n          typeFormat = formats[indexOfFormat];\n        } else {\n          if ((0, _type.isExponential)(tickInterval) && (stringTick.indexOf(\".\") !== -1 || (0, _type.isExponential)(tick))) {\n            typeFormat = EXPONENTIAL;\n\n            if (!(0, _type.isExponential)(tick)) {\n              precision = abs(getNoZeroIndex(stringTick.split(\".\")[1]) - (0, _math.getExponent)(tickInterval) + 1);\n            } else {\n              precision = Math.max(abs((0, _math.getExponent)(tick) - (0, _math.getExponent)(tickInterval)), abs((0, _math.getPrecision)(tick) - (0, _math.getPrecision)(tickInterval)));\n            }\n          } else {\n            tickIntervalIndex = floor((0, _utils.getAdjustedLog10)(tickInterval));\n            actualIndex = tickIndex = floor((0, _utils.getAdjustedLog10)(abs(tick)));\n\n            if (tickIndex - tickIntervalIndex >= 2) {\n              actualIndex = tickIntervalIndex;\n            }\n\n            indexOfFormat = floor(actualIndex / 3);\n            offset = 3 * indexOfFormat;\n\n            if (indexOfFormat < 5) {\n              if (tickIntervalIndex - offset === 2 && tickIndex >= 3) {\n                indexOfFormat++;\n                offset = 3 * indexOfFormat;\n              }\n\n              typeFormat = formats[indexOfFormat];\n            } else {\n              typeFormat = formats[formats.length - 1];\n            }\n\n            if (offset > 0) {\n              separatedTickInterval = splitDecimalNumber(tickInterval / Math.pow(10, offset));\n\n              if (separatedTickInterval[1]) {\n                precision = separatedTickInterval[1].length;\n              }\n            }\n          }\n        }\n      }\n\n      if (void 0 !== typeFormat || void 0 !== precision) {\n        format = {\n          type: typeFormat,\n          precision: precision\n        };\n      }\n    } else {\n      if (\"datetime\" === options.dataType) {\n        typeFormat = _date2.default.getDateFormatByTickInterval(tickInterval);\n\n        if (options.showTransition && ticks.length) {\n          indexOfTick = ticks.map(Number).indexOf(+tick);\n\n          if (1 === ticks.length && 0 === indexOfTick) {\n            typeFormat = _format_helper2.default.getDateFormatByTicks(ticks);\n          } else {\n            if (indexOfTick === -1) {\n              prevDateIndex = getTransitionTickIndex(ticks, tick);\n            } else {\n              prevDateIndex = 0 === indexOfTick ? ticks.length - 1 : indexOfTick - 1;\n              nextDateIndex = 0 === indexOfTick ? 1 : -1;\n            }\n\n            datesDifferences = getDatesDifferences(ticks[prevDateIndex], tick, ticks[nextDateIndex], typeFormat);\n            typeFormat = _format_helper2.default.getDateFormatByDifferences(datesDifferences, typeFormat);\n          }\n        }\n\n        format = createFormat(typeFormat);\n      }\n    }\n  }\n\n  return _format(tick, format);\n}\n\nfunction getHighDiffFormat(diff) {\n  var stop = false;\n\n  for (var i in diff) {\n    if (true === diff[i] || \"hour\" === i || stop) {\n      diff[i] = false;\n      stop = true;\n    } else {\n      if (false === diff[i]) {\n        diff[i] = true;\n      }\n    }\n  }\n\n  return createFormat(_format_helper2.default.getDateFormatByDifferences(diff));\n}\n\nfunction getHighAndSelfDiffFormat(diff, interval) {\n  var stop = false;\n\n  for (var i in diff) {\n    if (stop) {\n      diff[i] = false;\n    } else {\n      if (i === interval) {\n        stop = true;\n      } else {\n        diff[i] = true;\n      }\n    }\n  }\n\n  return createFormat(_format_helper2.default.getDateFormatByDifferences(diff));\n}\n\nfunction formatDateRange(startValue, endValue, tickInterval) {\n  var diff = getDatesDifferences(startValue, endValue);\n\n  var typeFormat = _date2.default.getDateFormatByTickInterval(tickInterval);\n\n  var diffFormatType = _format_helper2.default.getDateFormatByDifferences(diff, typeFormat);\n\n  var diffFormat = createFormat(diffFormatType);\n  var values = [];\n\n  if (tickInterval in diff) {\n    var rangeFormat = getHighAndSelfDiffFormat(getDatesDifferences(startValue, endValue), tickInterval);\n\n    var value = _format(startValue, rangeFormat);\n\n    if (value) {\n      values.push(value);\n    }\n  } else {\n    var _rangeFormat = getHighDiffFormat(getDatesDifferences(startValue, endValue));\n\n    var highValue = _format(startValue, _rangeFormat);\n\n    if (highValue) {\n      values.push(highValue);\n    }\n\n    values.push(\"\".concat(_format(startValue, diffFormat), \" - \").concat(_format(endValue, diffFormat)));\n  }\n\n  return values.join(\", \");\n}\n\nfunction processDateInterval(interval) {\n  if ((0, _type.isObject)(interval)) {\n    var dateUnits = Object.keys(interval);\n    var sum = dateUnits.reduce(function (sum, k) {\n      return interval[k] + sum;\n    }, 0);\n\n    if (1 === sum) {\n      var dateUnit = dateUnits.filter(function (k) {\n        return 1 === interval[k];\n      })[0];\n      return dateUnit.slice(0, dateUnit.length - 1);\n    }\n  }\n\n  return interval;\n}\n\nfunction formatRange(startValue, endValue, tickInterval, _ref) {\n  var dataType = _ref.dataType,\n      type = _ref.type,\n      logarithmBase = _ref.logarithmBase;\n\n  if (\"discrete\" === type) {\n    return \"\";\n  }\n\n  if (\"datetime\" === dataType) {\n    return formatDateRange(startValue, endValue, processDateInterval(tickInterval));\n  }\n\n  var formatOptions = {\n    ticks: [],\n    type: type,\n    dataType: dataType,\n    tickInterval: tickInterval,\n    logarithmBase: logarithmBase,\n    labelOptions: {}\n  };\n  return \"\".concat(smartFormatter(startValue, formatOptions), \" - \").concat(smartFormatter(endValue, formatOptions));\n}","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/axes/smart_formatter.js"],"names":["Object","value","exports","_format_helper","require","_format_helper2","_interopRequireDefault","_type","_date","_date2","_math","_utils","obj","_format","floor","Math","abs","EXPONENTIAL","formats","dateUnitIntervals","dateUnitsLength","tickFormat","tickFormatIndex","nextDifferences","prevDifferences","i","dateUnitInterval","setDateUnitInterval","resetDateUnitInterval","j","isDateTimeStart","nextDate","unitNumbers","date","unitIndex","differences","str","parseInt","nearestTickIndex","minDiff","ticks","curDiff","formatter","type","tickInterval","options","stringTick","precision","offset","indexOfFormat","indexOfTick","format","isLogarithmic","getTransitionTickIndex","tick","separatedTickInterval","splitDecimalNumber","log10Tick","typeFormat","getNoZeroIndex","tickIntervalIndex","actualIndex","tickIndex","prevDateIndex","nextDateIndex","datesDifferences","getDatesDifferences","createFormat","stop","diff","diffFormatType","diffFormat","values","rangeFormat","getHighAndSelfDiffFormat","_rangeFormat","getHighDiffFormat","highValue","dateUnits","sum","interval","dateUnit","dataType","_ref","logarithmBase","formatDateRange","processDateInterval","formatOptions","labelOptions","smartFormatter"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/axes/smart_formatter.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.smartFormatter = smartFormatter;\r\nexports.formatRange = formatRange;\r\nvar _format_helper = require(\"../../format_helper\");\r\nvar _format_helper2 = _interopRequireDefault(_format_helper);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _date = require(\"../../core/utils/date\");\r\nvar _date2 = _interopRequireDefault(_date);\r\nvar _math = require(\"../../core/utils/math\");\r\nvar _utils = require(\"../core/utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar _format = _format_helper2.default.format;\r\nvar floor = Math.floor;\r\nvar abs = Math.abs;\r\nvar EXPONENTIAL = \"exponential\";\r\nvar formats = [\"fixedPoint\", \"thousands\", \"millions\", \"billions\", \"trillions\", EXPONENTIAL];\r\nvar dateUnitIntervals = [\"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"month\", \"year\"];\r\n\r\nfunction getDatesDifferences(prevDate, curDate, nextDate, tickFormat) {\r\n    var prevDifferences;\r\n    var nextDifferences;\r\n    var dateUnitInterval;\r\n    var tickFormatIndex;\r\n    var dateUnitsLength = dateUnitIntervals.length;\r\n    var i;\r\n    var j;\r\n    if (\"week\" === tickFormat) {\r\n        tickFormat = \"day\"\r\n    } else {\r\n        if (\"quarter\" === tickFormat) {\r\n            tickFormat = \"month\"\r\n        } else {\r\n            if (\"shorttime\" === tickFormat) {\r\n                tickFormat = \"hour\"\r\n            } else {\r\n                if (\"longtime\" === tickFormat) {\r\n                    tickFormat = \"second\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n    tickFormatIndex = dateUnitIntervals.indexOf(tickFormat);\r\n    if (nextDate) {\r\n        nextDifferences = _date2.default.getDatesDifferences(curDate, nextDate);\r\n        prevDifferences = _date2.default.getDatesDifferences(curDate, prevDate);\r\n        if (nextDifferences[tickFormat]) {\r\n            for (i = dateUnitsLength - 1; i >= tickFormatIndex; i--) {\r\n                dateUnitInterval = dateUnitIntervals[i];\r\n                if (i === tickFormatIndex) {\r\n                    setDateUnitInterval(nextDifferences, tickFormatIndex + (nextDifferences.millisecond ? 2 : 1))\r\n                } else {\r\n                    if (nextDifferences[dateUnitInterval]) {\r\n                        resetDateUnitInterval(nextDifferences, i);\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        prevDifferences = _date2.default.getDatesDifferences(prevDate, curDate);\r\n        for (i = dateUnitsLength - 1; i >= tickFormatIndex; i--) {\r\n            dateUnitInterval = dateUnitIntervals[i];\r\n            if (prevDifferences[dateUnitInterval]) {\r\n                if (i - tickFormatIndex > 1) {\r\n                    for (j = tickFormatIndex + 1; j >= 0; j--) {\r\n                        resetDateUnitInterval(prevDifferences, j)\r\n                    }\r\n                    break\r\n                } else {\r\n                    if (isDateTimeStart(curDate, dateUnitInterval)) {\r\n                        for (j = i - 1; j > 0; j--) {\r\n                            resetDateUnitInterval(prevDifferences, j)\r\n                        }\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return nextDate ? nextDifferences : prevDifferences\r\n}\r\n\r\nfunction isDateTimeStart(date, dateUnitInterval) {\r\n    var unitNumbers = [date.getMilliseconds(), date.getSeconds(), date.getMinutes(), date.getHours(), date.getDate(), date.getMonth()];\r\n    var unitIndex = dateUnitIntervals.indexOf(dateUnitInterval);\r\n    var i;\r\n    for (i = 0; i < unitIndex; i++) {\r\n        if (4 === i && 1 !== unitNumbers[i] || 4 !== i && 0 !== unitNumbers[i]) {\r\n            return false\r\n        }\r\n    }\r\n    return true\r\n}\r\n\r\nfunction resetDateUnitInterval(differences, intervalIndex) {\r\n    var dateUnitInterval = dateUnitIntervals[intervalIndex];\r\n    if (differences[dateUnitInterval]) {\r\n        differences[dateUnitInterval] = false;\r\n        differences.count--\r\n    }\r\n}\r\n\r\nfunction setDateUnitInterval(differences, intervalIndex) {\r\n    var dateUnitInterval = dateUnitIntervals[intervalIndex];\r\n    if (false === differences[dateUnitInterval]) {\r\n        differences[dateUnitInterval] = true;\r\n        differences.count++\r\n    }\r\n}\r\n\r\nfunction getNoZeroIndex(str) {\r\n    return str.length - parseInt(str).toString().length\r\n}\r\n\r\nfunction getTransitionTickIndex(ticks, value) {\r\n    var i;\r\n    var curDiff;\r\n    var minDiff;\r\n    var nearestTickIndex = 0;\r\n    minDiff = abs(value - ticks[0]);\r\n    for (i = 1; i < ticks.length; i++) {\r\n        curDiff = abs(value - ticks[i]);\r\n        if (curDiff < minDiff) {\r\n            minDiff = curDiff;\r\n            nearestTickIndex = i\r\n        }\r\n    }\r\n    return nearestTickIndex\r\n}\r\n\r\nfunction splitDecimalNumber(value) {\r\n    return value.toString().split(\".\")\r\n}\r\n\r\nfunction createFormat(type) {\r\n    var formatter;\r\n    if ((0, _type.isFunction)(type)) {\r\n        formatter = type;\r\n        type = null\r\n    }\r\n    return {\r\n        type: type,\r\n        formatter: formatter\r\n    }\r\n}\r\n\r\nfunction smartFormatter(tick, options) {\r\n    var tickInterval = options.tickInterval;\r\n    var tickIntervalIndex;\r\n    var tickIndex;\r\n    var actualIndex;\r\n    var stringTick = abs(tick).toString();\r\n    var precision = 0;\r\n    var typeFormat;\r\n    var offset = 0;\r\n    var separatedTickInterval;\r\n    var indexOfFormat = 0;\r\n    var indexOfTick = -1;\r\n    var datesDifferences;\r\n    var format = options.labelOptions.format;\r\n    var ticks = options.ticks;\r\n    var log10Tick;\r\n    var prevDateIndex;\r\n    var nextDateIndex;\r\n    var isLogarithmic = \"logarithmic\" === options.type;\r\n    if (1 === ticks.length && 0 === ticks.indexOf(tick) && !(0, _type.isDefined)(tickInterval)) {\r\n        tickInterval = abs(tick) >= 1 ? 1 : (0, _math.adjust)(1 - abs(tick), tick)\r\n    }\r\n    if (!(0, _type.isDefined)(format) && \"discrete\" !== options.type && tick && (10 === options.logarithmBase || !isLogarithmic)) {\r\n        if (\"datetime\" !== options.dataType && (0, _type.isDefined)(tickInterval)) {\r\n            if (ticks.length && ticks.indexOf(tick) === -1) {\r\n                indexOfTick = getTransitionTickIndex(ticks, tick);\r\n                tickInterval = (0, _math.adjust)(abs(tick - ticks[indexOfTick]), tick)\r\n            }\r\n            separatedTickInterval = splitDecimalNumber(tickInterval);\r\n            if (separatedTickInterval < 2) {\r\n                separatedTickInterval = splitDecimalNumber(tick)\r\n            }\r\n            if (isLogarithmic) {\r\n                log10Tick = (0, _utils.getAdjustedLog10)(abs(tick));\r\n                if (log10Tick > 0) {\r\n                    typeFormat = formats[floor(log10Tick / 3)] || EXPONENTIAL\r\n                } else {\r\n                    if (log10Tick < -4) {\r\n                        typeFormat = EXPONENTIAL\r\n                    } else {\r\n                        precision = void 0\r\n                    }\r\n                }\r\n            } else {\r\n                if (separatedTickInterval.length > 1 && !(0, _type.isExponential)(tickInterval)) {\r\n                    precision = separatedTickInterval[1].length;\r\n                    typeFormat = formats[indexOfFormat]\r\n                } else {\r\n                    if ((0, _type.isExponential)(tickInterval) && (stringTick.indexOf(\".\") !== -1 || (0, _type.isExponential)(tick))) {\r\n                        typeFormat = EXPONENTIAL;\r\n                        if (!(0, _type.isExponential)(tick)) {\r\n                            precision = abs(getNoZeroIndex(stringTick.split(\".\")[1]) - (0, _math.getExponent)(tickInterval) + 1)\r\n                        } else {\r\n                            precision = Math.max(abs((0, _math.getExponent)(tick) - (0, _math.getExponent)(tickInterval)), abs((0, _math.getPrecision)(tick) - (0, _math.getPrecision)(tickInterval)))\r\n                        }\r\n                    } else {\r\n                        tickIntervalIndex = floor((0, _utils.getAdjustedLog10)(tickInterval));\r\n                        actualIndex = tickIndex = floor((0, _utils.getAdjustedLog10)(abs(tick)));\r\n                        if (tickIndex - tickIntervalIndex >= 2) {\r\n                            actualIndex = tickIntervalIndex\r\n                        }\r\n                        indexOfFormat = floor(actualIndex / 3);\r\n                        offset = 3 * indexOfFormat;\r\n                        if (indexOfFormat < 5) {\r\n                            if (tickIntervalIndex - offset === 2 && tickIndex >= 3) {\r\n                                indexOfFormat++;\r\n                                offset = 3 * indexOfFormat\r\n                            }\r\n                            typeFormat = formats[indexOfFormat]\r\n                        } else {\r\n                            typeFormat = formats[formats.length - 1]\r\n                        }\r\n                        if (offset > 0) {\r\n                            separatedTickInterval = splitDecimalNumber(tickInterval / Math.pow(10, offset));\r\n                            if (separatedTickInterval[1]) {\r\n                                precision = separatedTickInterval[1].length\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (void 0 !== typeFormat || void 0 !== precision) {\r\n                format = {\r\n                    type: typeFormat,\r\n                    precision: precision\r\n                }\r\n            }\r\n        } else {\r\n            if (\"datetime\" === options.dataType) {\r\n                typeFormat = _date2.default.getDateFormatByTickInterval(tickInterval);\r\n                if (options.showTransition && ticks.length) {\r\n                    indexOfTick = ticks.map(Number).indexOf(+tick);\r\n                    if (1 === ticks.length && 0 === indexOfTick) {\r\n                        typeFormat = _format_helper2.default.getDateFormatByTicks(ticks)\r\n                    } else {\r\n                        if (indexOfTick === -1) {\r\n                            prevDateIndex = getTransitionTickIndex(ticks, tick)\r\n                        } else {\r\n                            prevDateIndex = 0 === indexOfTick ? ticks.length - 1 : indexOfTick - 1;\r\n                            nextDateIndex = 0 === indexOfTick ? 1 : -1\r\n                        }\r\n                        datesDifferences = getDatesDifferences(ticks[prevDateIndex], tick, ticks[nextDateIndex], typeFormat);\r\n                        typeFormat = _format_helper2.default.getDateFormatByDifferences(datesDifferences, typeFormat)\r\n                    }\r\n                }\r\n                format = createFormat(typeFormat)\r\n            }\r\n        }\r\n    }\r\n    return _format(tick, format)\r\n}\r\n\r\nfunction getHighDiffFormat(diff) {\r\n    var stop = false;\r\n    for (var i in diff) {\r\n        if (true === diff[i] || \"hour\" === i || stop) {\r\n            diff[i] = false;\r\n            stop = true\r\n        } else {\r\n            if (false === diff[i]) {\r\n                diff[i] = true\r\n            }\r\n        }\r\n    }\r\n    return createFormat(_format_helper2.default.getDateFormatByDifferences(diff))\r\n}\r\n\r\nfunction getHighAndSelfDiffFormat(diff, interval) {\r\n    var stop = false;\r\n    for (var i in diff) {\r\n        if (stop) {\r\n            diff[i] = false\r\n        } else {\r\n            if (i === interval) {\r\n                stop = true\r\n            } else {\r\n                diff[i] = true\r\n            }\r\n        }\r\n    }\r\n    return createFormat(_format_helper2.default.getDateFormatByDifferences(diff))\r\n}\r\n\r\nfunction formatDateRange(startValue, endValue, tickInterval) {\r\n    var diff = getDatesDifferences(startValue, endValue);\r\n    var typeFormat = _date2.default.getDateFormatByTickInterval(tickInterval);\r\n    var diffFormatType = _format_helper2.default.getDateFormatByDifferences(diff, typeFormat);\r\n    var diffFormat = createFormat(diffFormatType);\r\n    var values = [];\r\n    if (tickInterval in diff) {\r\n        var rangeFormat = getHighAndSelfDiffFormat(getDatesDifferences(startValue, endValue), tickInterval);\r\n        var value = _format(startValue, rangeFormat);\r\n        if (value) {\r\n            values.push(value)\r\n        }\r\n    } else {\r\n        var _rangeFormat = getHighDiffFormat(getDatesDifferences(startValue, endValue));\r\n        var highValue = _format(startValue, _rangeFormat);\r\n        if (highValue) {\r\n            values.push(highValue)\r\n        }\r\n        values.push(\"\".concat(_format(startValue, diffFormat), \" - \").concat(_format(endValue, diffFormat)))\r\n    }\r\n    return values.join(\", \")\r\n}\r\n\r\nfunction processDateInterval(interval) {\r\n    if ((0, _type.isObject)(interval)) {\r\n        var dateUnits = Object.keys(interval);\r\n        var sum = dateUnits.reduce(function(sum, k) {\r\n            return interval[k] + sum\r\n        }, 0);\r\n        if (1 === sum) {\r\n            var dateUnit = dateUnits.filter(function(k) {\r\n                return 1 === interval[k]\r\n            })[0];\r\n            return dateUnit.slice(0, dateUnit.length - 1)\r\n        }\r\n    }\r\n    return interval\r\n}\r\n\r\nfunction formatRange(startValue, endValue, tickInterval, _ref) {\r\n    var dataType = _ref.dataType,\r\n        type = _ref.type,\r\n        logarithmBase = _ref.logarithmBase;\r\n    if (\"discrete\" === type) {\r\n        return \"\"\r\n    }\r\n    if (\"datetime\" === dataType) {\r\n        return formatDateRange(startValue, endValue, processDateInterval(tickInterval))\r\n    }\r\n    var formatOptions = {\r\n        ticks: [],\r\n        type: type,\r\n        dataType: dataType,\r\n        tickInterval: tickInterval,\r\n        logarithmBase: logarithmBase,\r\n        labelOptions: {}\r\n    };\r\n    return \"\".concat(smartFormatter(startValue, formatOptions), \" - \").concat(smartFormatter(endValue, formatOptions))\r\n}\r\n"]},"metadata":{},"sourceType":"module"}