{"ast":null,"code":"/**\r\n * DevExtreme (ui/drop_down_editor/ui.drop_down_editor.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar AsyncTemplateMixin = require(\"../shared/async_template_mixin\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar Guid = require(\"../../core/guid\");\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar commonUtils = require(\"../../core/utils/common\");\n\nvar domUtils = require(\"../../core/utils/dom\");\n\nvar focused = require(\"../widget/selectors\").focused;\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar getPublicElement = require(\"../../core/utils/dom\").getPublicElement;\n\nvar errors = require(\"../widget/ui.errors\");\n\nvar positionUtils = require(\"../../animation/position\");\n\nvar getDefaultAlignment = require(\"../../core/utils/position\").getDefaultAlignment;\n\nvar DropDownButton = require(\"./ui.drop_down_button\").default;\n\nvar messageLocalization = require(\"../../localization/message\");\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar TextBox = require(\"../text_box\");\n\nvar clickEvent = require(\"../../events/click\");\n\nvar devices = require(\"../../core/devices\");\n\nvar FunctionTemplate = require(\"../../core/templates/function_template\").FunctionTemplate;\n\nvar Popup = require(\"../popup\");\n\nvar DROP_DOWN_EDITOR_CLASS = \"dx-dropdowneditor\";\nvar DROP_DOWN_EDITOR_INPUT_WRAPPER = \"dx-dropdowneditor-input-wrapper\";\nvar DROP_DOWN_EDITOR_BUTTON_ICON = \"dx-dropdowneditor-icon\";\nvar DROP_DOWN_EDITOR_OVERLAY = \"dx-dropdowneditor-overlay\";\nvar DROP_DOWN_EDITOR_OVERLAY_FLIPPED = \"dx-dropdowneditor-overlay-flipped\";\nvar DROP_DOWN_EDITOR_ACTIVE = \"dx-dropdowneditor-active\";\nvar DROP_DOWN_EDITOR_FIELD_CLICKABLE = \"dx-dropdowneditor-field-clickable\";\nvar DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER = \"dx-dropdowneditor-field-template-wrapper\";\nvar isIOs = \"ios\" === devices.current().platform;\nvar DropDownEditor = TextBox.inherit({\n  _supportedKeys: function _supportedKeys() {\n    var homeEndHandler = function homeEndHandler(e) {\n      if (this.option(\"opened\")) {\n        e.preventDefault();\n        return true;\n      }\n\n      return false;\n    };\n\n    return extend({}, this.callBase(), {\n      tab: function tab(e) {\n        if (!this.option(\"opened\")) {\n          return;\n        }\n\n        if (\"instantly\" === this.option(\"applyValueMode\")) {\n          this.close();\n          return;\n        }\n\n        var $focusableElement = e.shiftKey ? this._getLastPopupElement() : this._getFirstPopupElement();\n        $focusableElement && eventsEngine.trigger($focusableElement, \"focus\");\n        e.preventDefault();\n      },\n      escape: function escape(e) {\n        if (this.option(\"opened\")) {\n          e.preventDefault();\n        }\n\n        this.close();\n        return true;\n      },\n      upArrow: function upArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (e.altKey) {\n          this.close();\n          return false;\n        }\n\n        return true;\n      },\n      downArrow: function downArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (e.altKey) {\n          this._validatedOpening();\n\n          return false;\n        }\n\n        return true;\n      },\n      enter: function enter(e) {\n        if (this.option(\"opened\")) {\n          e.preventDefault();\n\n          this._valueChangeEventHandler(e);\n        }\n\n        return true;\n      },\n      home: homeEndHandler,\n      end: homeEndHandler\n    });\n  },\n  _getDefaultButtons: function _getDefaultButtons() {\n    return this.callBase().concat([{\n      name: \"dropDown\",\n      Ctor: DropDownButton\n    }]);\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      value: null,\n      onOpened: null,\n      onClosed: null,\n      opened: false,\n      acceptCustomValue: true,\n      applyValueMode: \"instantly\",\n      deferRendering: true,\n      activeStateEnabled: true,\n      dropDownButtonTemplate: \"dropDownButton\",\n      fieldTemplate: null,\n      contentTemplate: null,\n      openOnFieldClick: false,\n      showDropDownButton: true,\n      buttons: void 0,\n      dropDownOptions: {},\n      popupPosition: this._getDefaultPopupPosition(),\n      onPopupInitialized: null,\n      applyButtonText: messageLocalization.format(\"OK\"),\n      cancelButtonText: messageLocalization.format(\"Cancel\"),\n      buttonsLocation: \"default\",\n      showPopupTitle: false,\n      useHiddenSubmitElement: false\n    });\n  },\n  _getDefaultPopupPosition: function _getDefaultPopupPosition() {\n    var position = getDefaultAlignment();\n    return {\n      offset: {\n        h: 0,\n        v: -1\n      },\n      my: position + \" top\",\n      at: position + \" bottom\",\n      collision: \"flip flip\"\n    };\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device(_device) {\n        var isGeneric = \"generic\" === _device.platform;\n        return isGeneric;\n      },\n      options: {\n        popupPosition: {\n          offset: {\n            v: 0\n          }\n        }\n      }\n    }]);\n  },\n  _inputWrapper: function _inputWrapper() {\n    return this.$element().find(\".\" + DROP_DOWN_EDITOR_INPUT_WRAPPER);\n  },\n  _init: function _init() {\n    this.callBase();\n\n    this._initVisibilityActions();\n\n    this._initPopupInitializedAction();\n\n    this._initInnerOptionCache(\"dropDownOptions\");\n  },\n  _initVisibilityActions: function _initVisibilityActions() {\n    this._openAction = this._createActionByOption(\"onOpened\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n    this._closeAction = this._createActionByOption(\"onClosed\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _initPopupInitializedAction: function _initPopupInitializedAction() {\n    this._popupInitializedAction = this._createActionByOption(\"onPopupInitialized\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _initMarkup: function _initMarkup() {\n    this._renderSubmitElement();\n\n    this.callBase();\n    this.$element().addClass(DROP_DOWN_EDITOR_CLASS);\n    this.setAria(\"role\", \"combobox\");\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._renderOpenHandler();\n\n    this._attachFocusOutHandler();\n\n    this._renderOpenedState();\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    if (!this.option(\"deferRendering\")) {\n      this._createPopup();\n    }\n  },\n  _renderInput: function _renderInput() {\n    this.callBase();\n    this.$element().wrapInner($(\"<div>\").addClass(DROP_DOWN_EDITOR_INPUT_WRAPPER));\n    this._$container = this.$element().children().eq(0);\n\n    this._setDefaultAria();\n  },\n  _setDefaultAria: function _setDefaultAria() {\n    this.setAria({\n      haspopup: \"true\",\n      autocomplete: \"list\"\n    });\n  },\n  _readOnlyPropValue: function _readOnlyPropValue() {\n    return !this.option(\"acceptCustomValue\") || this.callBase();\n  },\n  _cleanFocusState: function _cleanFocusState() {\n    this.callBase();\n\n    if (this.option(\"fieldTemplate\")) {\n      this._detachFocusEvents();\n    }\n  },\n  _getFieldTemplate: function _getFieldTemplate() {\n    return this.option(\"fieldTemplate\") && this._getTemplateByOption(\"fieldTemplate\");\n  },\n  _renderMask: function _renderMask() {\n    if (this.option(\"fieldTemplate\")) {\n      return;\n    }\n\n    this.callBase();\n  },\n  _renderField: function _renderField() {\n    var fieldTemplate = this._getFieldTemplate();\n\n    fieldTemplate && this._renderTemplatedField(fieldTemplate, this._fieldRenderData());\n  },\n  _renderPlaceholder: function _renderPlaceholder() {\n    var hasFieldTemplate = !!this._getFieldTemplate();\n\n    if (!hasFieldTemplate) {\n      this.callBase();\n    }\n  },\n  _renderValue: function _renderValue() {\n    if (this.option(\"useHiddenSubmitElement\")) {\n      this._setSubmitValue();\n    }\n\n    var promise = this.callBase();\n    promise.always(this._renderField.bind(this));\n  },\n  _renderTemplatedField: function _renderTemplatedField(fieldTemplate, data) {\n    var _this = this;\n\n    var isFocused = focused(this._input());\n    var $container = this._$container;\n\n    this._disposeKeyboardProcessor();\n\n    var beforeButtonsContainerParent = this._$beforeButtonsContainer && this._$beforeButtonsContainer[0].parentNode;\n    var afterButtonsContainerParent = this._$afterButtonsContainer && this._$afterButtonsContainer[0].parentNode;\n    beforeButtonsContainerParent && beforeButtonsContainerParent.removeChild(this._$beforeButtonsContainer[0]);\n    afterButtonsContainerParent && afterButtonsContainerParent.removeChild(this._$afterButtonsContainer[0]);\n\n    this._detachFocusEvents();\n\n    $container.empty();\n    var $templateWrapper = $(\"<div>\").addClass(DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER).appendTo($container);\n    fieldTemplate.render({\n      model: data,\n      container: domUtils.getPublicElement($templateWrapper),\n      onRendered: function onRendered() {\n        var $input = _this._input();\n\n        if (!$input.length) {\n          throw errors.Error(\"E1010\");\n        }\n\n        _this._refreshEvents();\n\n        _this._refreshValueChangeEvent();\n\n        _this._renderFocusState();\n\n        isFocused && eventsEngine.trigger($input, \"focus\");\n      }\n    });\n    $container.prepend(this._$beforeButtonsContainer);\n    $container.append(this._$afterButtonsContainer);\n  },\n  _fieldRenderData: function _fieldRenderData() {\n    return this.option(\"value\");\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates.dropDownButton = new FunctionTemplate(function (options) {\n      var $icon = $(\"<div>\").addClass(DROP_DOWN_EDITOR_BUTTON_ICON);\n      $(options.container).append($icon);\n    });\n  },\n  _renderOpenHandler: function _renderOpenHandler() {\n    var that = this;\n\n    var $inputWrapper = that._inputWrapper();\n\n    var eventName = eventUtils.addNamespace(clickEvent.name, that.NAME);\n    var openOnFieldClick = that.option(\"openOnFieldClick\");\n    eventsEngine.off($inputWrapper, eventName);\n    eventsEngine.on($inputWrapper, eventName, that._getInputClickHandler(openOnFieldClick));\n    that.$element().toggleClass(DROP_DOWN_EDITOR_FIELD_CLICKABLE, openOnFieldClick);\n\n    if (openOnFieldClick) {\n      that._openOnFieldClickAction = that._createAction(that._openHandler.bind(that));\n    }\n  },\n  _attachFocusOutHandler: function _attachFocusOutHandler() {\n    if (isIOs) {\n      this._detachFocusOutEvents();\n\n      eventsEngine.on(this._inputWrapper(), eventUtils.addNamespace(\"focusout\", this.NAME), function (event) {\n        var newTarget = event.relatedTarget;\n        var popupWrapper = this.content ? $(this.content()).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY) : this._$popup;\n\n        if (newTarget && this.option(\"opened\")) {\n          var isNewTargetOutside = 0 === $(newTarget).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY, popupWrapper).length;\n\n          if (isNewTargetOutside) {\n            this.close();\n          }\n        }\n      }.bind(this));\n    }\n  },\n  _detachFocusOutEvents: function _detachFocusOutEvents() {\n    isIOs && eventsEngine.off(this._inputWrapper(), eventUtils.addNamespace(\"focusout\", this.NAME));\n  },\n  _getInputClickHandler: function _getInputClickHandler(openOnFieldClick) {\n    var that = this;\n    return openOnFieldClick ? function (e) {\n      that._executeOpenAction(e);\n    } : function (e) {\n      that._focusInput();\n    };\n  },\n  _openHandler: function _openHandler() {\n    this._toggleOpenState();\n  },\n  _executeOpenAction: function _executeOpenAction(e) {\n    this._openOnFieldClickAction({\n      event: e\n    });\n  },\n  _keyboardEventBindingTarget: function _keyboardEventBindingTarget() {\n    return this._input();\n  },\n  _focusInput: function _focusInput() {\n    if (this.option(\"disabled\")) {\n      return false;\n    }\n\n    if (this.option(\"focusStateEnabled\") && !focused(this._input())) {\n      eventsEngine.trigger(this._input(), \"focus\");\n    }\n\n    return true;\n  },\n  _toggleOpenState: function _toggleOpenState(isVisible) {\n    if (!this._focusInput()) {\n      return;\n    }\n\n    if (!this.option(\"readOnly\")) {\n      isVisible = arguments.length ? isVisible : !this.option(\"opened\");\n      this.option(\"opened\", isVisible);\n    }\n  },\n  _renderOpenedState: function _renderOpenedState() {\n    var opened = this.option(\"opened\");\n\n    if (opened) {\n      this._createPopup();\n    }\n\n    this.$element().toggleClass(DROP_DOWN_EDITOR_ACTIVE, opened);\n\n    this._setPopupOption(\"visible\", opened);\n\n    this.setAria({\n      expanded: opened\n    });\n    this.setAria(\"owns\", (opened || void 0) && this._popupContentId, this.$element());\n  },\n  _createPopup: function _createPopup() {\n    if (this._$popup) {\n      return;\n    }\n\n    this._$popup = $(\"<div>\").addClass(DROP_DOWN_EDITOR_OVERLAY).addClass(this.option(\"customOverlayCssClass\")).appendTo(this.$element());\n\n    this._renderPopup();\n\n    this._renderPopupContent();\n  },\n  _renderPopup: function _renderPopup() {\n    this._popup = this._createComponent(this._$popup, Popup, extend(this._popupConfig(), this._getInnerOptionsCache(\"dropDownOptions\")));\n\n    this._popup.on({\n      showing: this._popupShowingHandler.bind(this),\n      shown: this._popupShownHandler.bind(this),\n      hiding: this._popupHidingHandler.bind(this),\n      hidden: this._popupHiddenHandler.bind(this)\n    });\n\n    this._popup.option(\"onContentReady\", this._contentReadyHandler.bind(this));\n\n    this._contentReadyHandler();\n\n    this._setPopupContentId(this._popup.$content());\n\n    this._bindInnerWidgetOptions(this._popup, \"dropDownOptions\");\n  },\n  _setPopupContentId: function _setPopupContentId($popupContent) {\n    this._popupContentId = \"dx-\" + new Guid();\n    this.setAria(\"id\", this._popupContentId, $popupContent);\n  },\n  _contentReadyHandler: commonUtils.noop,\n  _popupConfig: function _popupConfig() {\n    return {\n      onInitialized: this._popupInitializedHandler(),\n      position: extend(this.option(\"popupPosition\"), {\n        of: this.$element()\n      }),\n      showTitle: this.option(\"showPopupTitle\"),\n      width: \"auto\",\n      height: \"auto\",\n      shading: false,\n      closeOnTargetScroll: true,\n      closeOnOutsideClick: this._closeOutsideDropDownHandler.bind(this),\n      animation: {\n        show: {\n          type: \"fade\",\n          duration: 0,\n          from: 0,\n          to: 1\n        },\n        hide: {\n          type: \"fade\",\n          duration: 400,\n          from: 1,\n          to: 0\n        }\n      },\n      deferRendering: false,\n      focusStateEnabled: false,\n      showCloseButton: false,\n      toolbarItems: this._getPopupToolbarItems(),\n      onPositioned: this._popupPositionedHandler.bind(this),\n      fullScreen: false\n    };\n  },\n  _popupInitializedHandler: function _popupInitializedHandler() {\n    if (!this.option(\"onPopupInitialized\")) {\n      return;\n    }\n\n    return function (e) {\n      this._popupInitializedAction({\n        popup: e.component\n      });\n    }.bind(this);\n  },\n  _popupPositionedHandler: function _popupPositionedHandler(e) {\n    e.position && this._popup.overlayContent().toggleClass(DROP_DOWN_EDITOR_OVERLAY_FLIPPED, e.position.v.flip);\n  },\n  _popupShowingHandler: commonUtils.noop,\n  _popupHidingHandler: function _popupHidingHandler() {\n    this.option(\"opened\", false);\n  },\n  _popupShownHandler: function _popupShownHandler() {\n    this._openAction();\n\n    if (this._$validationMessage) {\n      this._$validationMessage.dxOverlay(\"option\", \"position\", this._getValidationMessagePosition());\n    }\n  },\n  _popupHiddenHandler: function _popupHiddenHandler() {\n    this._closeAction();\n\n    if (this._$validationMessage) {\n      this._$validationMessage.dxOverlay(\"option\", \"position\", this._getValidationMessagePosition());\n    }\n  },\n  _getValidationMessagePosition: function _getValidationMessagePosition() {\n    var positionRequest = \"below\";\n\n    if (this._popup && this._popup.option(\"visible\")) {\n      var myTop = positionUtils.setup(this.$element()).top;\n      var popupTop = positionUtils.setup(this._popup.$content()).top;\n      positionRequest = myTop + this.option(\"popupPosition\").offset.v > popupTop ? \"below\" : \"above\";\n    }\n\n    return this.callBase(positionRequest);\n  },\n  _renderPopupContent: function _renderPopupContent() {\n    var contentTemplate = this._getTemplateByOption(\"contentTemplate\");\n\n    if (!(contentTemplate && this.option(\"contentTemplate\"))) {\n      return;\n    }\n\n    var $popupContent = this._popup.$content();\n\n    var templateData = {\n      value: this._fieldRenderData(),\n      component: this\n    };\n    $popupContent.empty();\n    contentTemplate.render({\n      container: domUtils.getPublicElement($popupContent),\n      model: templateData\n    });\n  },\n  _closeOutsideDropDownHandler: function _closeOutsideDropDownHandler(_ref) {\n    var target = _ref.target;\n    var $target = $(target);\n    var dropDownButton = this.getButton(\"dropDown\");\n    var $dropDownButton = dropDownButton && dropDownButton.$element();\n    var isInputClicked = !!$target.closest(this.$element()).length;\n    var isDropDownButtonClicked = !!$target.closest($dropDownButton).length;\n    var isOutsideClick = !isInputClicked && !isDropDownButtonClicked;\n    return isOutsideClick;\n  },\n  _clean: function _clean() {\n    delete this._openOnFieldClickAction;\n\n    if (this._$popup) {\n      this._$popup.remove();\n\n      delete this._$popup;\n      delete this._popup;\n    }\n\n    this.callBase();\n  },\n  _setPopupOption: function _setPopupOption(optionName, value) {\n    this._setWidgetOption(\"_popup\", arguments);\n  },\n  _validatedOpening: function _validatedOpening() {\n    if (!this.option(\"readOnly\")) {\n      this._toggleOpenState(true);\n    }\n  },\n  _getPopupToolbarItems: function _getPopupToolbarItems() {\n    return \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : [];\n  },\n  _getFirstPopupElement: function _getFirstPopupElement() {\n    return this._popup._wrapper().find(\".dx-popup-done.dx-button\");\n  },\n  _getLastPopupElement: function _getLastPopupElement() {\n    return this._popup._wrapper().find(\".dx-popup-cancel.dx-button\");\n  },\n  _popupElementTabHandler: function _popupElementTabHandler(e) {\n    var $element = $(e.currentTarget);\n\n    if (e.shiftKey && $element.is(this._getFirstPopupElement()) || !e.shiftKey && $element.is(this._getLastPopupElement())) {\n      eventsEngine.trigger(this._input(), \"focus\");\n      e.preventDefault();\n    }\n  },\n  _popupElementEscHandler: function _popupElementEscHandler() {\n    eventsEngine.trigger(this._input(), \"focus\");\n    this.close();\n  },\n  _popupButtonInitializedHandler: function _popupButtonInitializedHandler(e) {\n    e.component.registerKeyHandler(\"tab\", this._popupElementTabHandler.bind(this));\n    e.component.registerKeyHandler(\"escape\", this._popupElementEscHandler.bind(this));\n  },\n  _popupToolbarItemsConfig: function _popupToolbarItemsConfig() {\n    var buttonsConfig = [{\n      shortcut: \"done\",\n      options: {\n        onClick: this._applyButtonHandler.bind(this),\n        text: this.option(\"applyButtonText\"),\n        onInitialized: this._popupButtonInitializedHandler.bind(this)\n      }\n    }, {\n      shortcut: \"cancel\",\n      options: {\n        onClick: this._cancelButtonHandler.bind(this),\n        text: this.option(\"cancelButtonText\"),\n        onInitialized: this._popupButtonInitializedHandler.bind(this)\n      }\n    }];\n    return this._applyButtonsLocation(buttonsConfig);\n  },\n  _applyButtonsLocation: function _applyButtonsLocation(buttonsConfig) {\n    var buttonsLocation = this.option(\"buttonsLocation\");\n    var resultConfig = buttonsConfig;\n\n    if (\"default\" !== buttonsLocation) {\n      var position = commonUtils.splitPair(buttonsLocation);\n      each(resultConfig, function (_, element) {\n        extend(element, {\n          toolbar: position[0],\n          location: position[1]\n        });\n      });\n    }\n\n    return resultConfig;\n  },\n  _applyButtonHandler: function _applyButtonHandler() {\n    this.close();\n    this.option(\"focusStateEnabled\") && this.focus();\n  },\n  _cancelButtonHandler: function _cancelButtonHandler() {\n    this.close();\n    this.option(\"focusStateEnabled\") && this.focus();\n  },\n  _updatePopupWidth: commonUtils.noop,\n  _popupOptionChanged: function _popupOptionChanged(args) {\n    var options = this._getOptionsFromContainer(args);\n\n    this._setPopupOption(options);\n\n    if (Object.keys(options).indexOf(\"width\") !== -1 && void 0 === options.width) {\n      this._updatePopupWidth();\n    }\n  },\n  _renderSubmitElement: function _renderSubmitElement() {\n    if (this.option(\"useHiddenSubmitElement\")) {\n      this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\n    }\n  },\n  _setSubmitValue: function _setSubmitValue() {\n    this._getSubmitElement().val(this.option(\"value\"));\n  },\n  _getSubmitElement: function _getSubmitElement() {\n    if (this.option(\"useHiddenSubmitElement\")) {\n      return this._$submitElement;\n    } else {\n      return this.callBase();\n    }\n  },\n  _dispose: function _dispose() {\n    this._detachFocusOutEvents();\n\n    this.callBase();\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"opened\":\n        this._renderOpenedState();\n\n        break;\n\n      case \"onOpened\":\n      case \"onClosed\":\n        this._initVisibilityActions();\n\n        break;\n\n      case \"onPopupInitialized\":\n        this._initPopupInitializedAction();\n\n        break;\n\n      case \"fieldTemplate\":\n        if (isDefined(args.value)) {\n          this._renderField();\n        } else {\n          this._invalidate();\n        }\n\n        break;\n\n      case \"contentTemplate\":\n      case \"acceptCustomValue\":\n      case \"openOnFieldClick\":\n        this._invalidate();\n\n        break;\n\n      case \"dropDownButtonTemplate\":\n      case \"showDropDownButton\":\n        this._updateButtons([\"dropDown\"]);\n\n        break;\n\n      case \"dropDownOptions\":\n        this._popupOptionChanged(args);\n\n        this._cacheInnerOptions(\"dropDownOptions\", args.value);\n\n        break;\n\n      case \"popupPosition\":\n      case \"deferRendering\":\n        break;\n\n      case \"applyValueMode\":\n      case \"applyButtonText\":\n      case \"cancelButtonText\":\n      case \"buttonsLocation\":\n        this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\n\n        break;\n\n      case \"showPopupTitle\":\n        this._setPopupOption(\"showTitle\", args.value);\n\n        break;\n\n      case \"useHiddenSubmitElement\":\n        if (this._$submitElement) {\n          this._$submitElement.remove();\n\n          this._$submitElement = void 0;\n        }\n\n        this._renderSubmitElement();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  open: function open() {\n    this.option(\"opened\", true);\n  },\n  close: function close() {\n    this.option(\"opened\", false);\n  },\n  field: function field() {\n    return getPublicElement(this._input());\n  },\n  content: function content() {\n    return this._popup ? this._popup.content() : null;\n  }\n}).include(AsyncTemplateMixin);\nregisterComponent(\"dxDropDownEditor\", DropDownEditor);\nmodule.exports = DropDownEditor;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/drop_down_editor/ui.drop_down_editor.js"],"names":["$","require","AsyncTemplateMixin","eventsEngine","Guid","registerComponent","commonUtils","domUtils","focused","each","isDefined","extend","getPublicElement","errors","positionUtils","getDefaultAlignment","DropDownButton","messageLocalization","eventUtils","TextBox","clickEvent","devices","FunctionTemplate","Popup","DROP_DOWN_EDITOR_CLASS","DROP_DOWN_EDITOR_INPUT_WRAPPER","DROP_DOWN_EDITOR_BUTTON_ICON","DROP_DOWN_EDITOR_OVERLAY","DROP_DOWN_EDITOR_OVERLAY_FLIPPED","DROP_DOWN_EDITOR_ACTIVE","DROP_DOWN_EDITOR_FIELD_CLICKABLE","DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER","isIOs","DropDownEditor","_supportedKeys","homeEndHandler","e","tab","$focusableElement","escape","upArrow","downArrow","enter","home","end","_getDefaultButtons","name","Ctor","_getDefaultOptions","value","onOpened","onClosed","opened","acceptCustomValue","applyValueMode","deferRendering","activeStateEnabled","dropDownButtonTemplate","fieldTemplate","contentTemplate","openOnFieldClick","showDropDownButton","buttons","dropDownOptions","popupPosition","onPopupInitialized","applyButtonText","cancelButtonText","buttonsLocation","showPopupTitle","useHiddenSubmitElement","_getDefaultPopupPosition","position","offset","h","v","my","at","collision","_defaultOptionsRules","device","isGeneric","_device","options","_inputWrapper","_init","_initVisibilityActions","excludeValidators","_initPopupInitializedAction","_initMarkup","_render","_renderContentImpl","_renderInput","_setDefaultAria","haspopup","autocomplete","_readOnlyPropValue","_cleanFocusState","_getFieldTemplate","_renderMask","_renderField","_renderPlaceholder","hasFieldTemplate","_renderValue","promise","_renderTemplatedField","_this","isFocused","$container","beforeButtonsContainerParent","afterButtonsContainerParent","$templateWrapper","model","container","onRendered","$input","_fieldRenderData","_initTemplates","$icon","_renderOpenHandler","that","$inputWrapper","eventName","_attachFocusOutHandler","newTarget","event","popupWrapper","isNewTargetOutside","_detachFocusOutEvents","_getInputClickHandler","_openHandler","_executeOpenAction","_keyboardEventBindingTarget","_focusInput","_toggleOpenState","isVisible","arguments","_renderOpenedState","expanded","_createPopup","_renderPopup","showing","shown","hiding","hidden","_setPopupContentId","_contentReadyHandler","_popupConfig","onInitialized","of","showTitle","width","height","shading","closeOnTargetScroll","closeOnOutsideClick","animation","show","type","duration","from","to","hide","focusStateEnabled","showCloseButton","toolbarItems","onPositioned","fullScreen","_popupInitializedHandler","popup","component","_popupPositionedHandler","_popupShowingHandler","_popupHidingHandler","_popupShownHandler","_popupHiddenHandler","_getValidationMessagePosition","positionRequest","myTop","popupTop","_renderPopupContent","$popupContent","templateData","_closeOutsideDropDownHandler","target","_ref","$target","dropDownButton","$dropDownButton","isInputClicked","isDropDownButtonClicked","isOutsideClick","_clean","_setPopupOption","_validatedOpening","_getPopupToolbarItems","_getFirstPopupElement","_getLastPopupElement","_popupElementTabHandler","$element","_popupElementEscHandler","_popupButtonInitializedHandler","_popupToolbarItemsConfig","buttonsConfig","shortcut","onClick","text","_applyButtonsLocation","resultConfig","toolbar","location","_applyButtonHandler","_cancelButtonHandler","_updatePopupWidth","_popupOptionChanged","Object","_renderSubmitElement","_setSubmitValue","_getSubmitElement","_dispose","_optionChanged","args","open","close","field","content","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/drop_down_editor/ui.drop_down_editor.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar AsyncTemplateMixin = require(\"../shared/async_template_mixin\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar Guid = require(\"../../core/guid\");\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar commonUtils = require(\"../../core/utils/common\");\r\nvar domUtils = require(\"../../core/utils/dom\");\r\nvar focused = require(\"../widget/selectors\").focused;\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar getPublicElement = require(\"../../core/utils/dom\").getPublicElement;\r\nvar errors = require(\"../widget/ui.errors\");\r\nvar positionUtils = require(\"../../animation/position\");\r\nvar getDefaultAlignment = require(\"../../core/utils/position\").getDefaultAlignment;\r\nvar DropDownButton = require(\"./ui.drop_down_button\").default;\r\nvar messageLocalization = require(\"../../localization/message\");\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar TextBox = require(\"../text_box\");\r\nvar clickEvent = require(\"../../events/click\");\r\nvar devices = require(\"../../core/devices\");\r\nvar FunctionTemplate = require(\"../../core/templates/function_template\").FunctionTemplate;\r\nvar Popup = require(\"../popup\");\r\nvar DROP_DOWN_EDITOR_CLASS = \"dx-dropdowneditor\";\r\nvar DROP_DOWN_EDITOR_INPUT_WRAPPER = \"dx-dropdowneditor-input-wrapper\";\r\nvar DROP_DOWN_EDITOR_BUTTON_ICON = \"dx-dropdowneditor-icon\";\r\nvar DROP_DOWN_EDITOR_OVERLAY = \"dx-dropdowneditor-overlay\";\r\nvar DROP_DOWN_EDITOR_OVERLAY_FLIPPED = \"dx-dropdowneditor-overlay-flipped\";\r\nvar DROP_DOWN_EDITOR_ACTIVE = \"dx-dropdowneditor-active\";\r\nvar DROP_DOWN_EDITOR_FIELD_CLICKABLE = \"dx-dropdowneditor-field-clickable\";\r\nvar DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER = \"dx-dropdowneditor-field-template-wrapper\";\r\nvar isIOs = \"ios\" === devices.current().platform;\r\nvar DropDownEditor = TextBox.inherit({\r\n    _supportedKeys: function() {\r\n        var homeEndHandler = function(e) {\r\n            if (this.option(\"opened\")) {\r\n                e.preventDefault();\r\n                return true\r\n            }\r\n            return false\r\n        };\r\n        return extend({}, this.callBase(), {\r\n            tab: function(e) {\r\n                if (!this.option(\"opened\")) {\r\n                    return\r\n                }\r\n                if (\"instantly\" === this.option(\"applyValueMode\")) {\r\n                    this.close();\r\n                    return\r\n                }\r\n                var $focusableElement = e.shiftKey ? this._getLastPopupElement() : this._getFirstPopupElement();\r\n                $focusableElement && eventsEngine.trigger($focusableElement, \"focus\");\r\n                e.preventDefault()\r\n            },\r\n            escape: function(e) {\r\n                if (this.option(\"opened\")) {\r\n                    e.preventDefault()\r\n                }\r\n                this.close();\r\n                return true\r\n            },\r\n            upArrow: function(e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                if (e.altKey) {\r\n                    this.close();\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            downArrow: function(e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                if (e.altKey) {\r\n                    this._validatedOpening();\r\n                    return false\r\n                }\r\n                return true\r\n            },\r\n            enter: function(e) {\r\n                if (this.option(\"opened\")) {\r\n                    e.preventDefault();\r\n                    this._valueChangeEventHandler(e)\r\n                }\r\n                return true\r\n            },\r\n            home: homeEndHandler,\r\n            end: homeEndHandler\r\n        })\r\n    },\r\n    _getDefaultButtons: function() {\r\n        return this.callBase().concat([{\r\n            name: \"dropDown\",\r\n            Ctor: DropDownButton\r\n        }])\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            value: null,\r\n            onOpened: null,\r\n            onClosed: null,\r\n            opened: false,\r\n            acceptCustomValue: true,\r\n            applyValueMode: \"instantly\",\r\n            deferRendering: true,\r\n            activeStateEnabled: true,\r\n            dropDownButtonTemplate: \"dropDownButton\",\r\n            fieldTemplate: null,\r\n            contentTemplate: null,\r\n            openOnFieldClick: false,\r\n            showDropDownButton: true,\r\n            buttons: void 0,\r\n            dropDownOptions: {},\r\n            popupPosition: this._getDefaultPopupPosition(),\r\n            onPopupInitialized: null,\r\n            applyButtonText: messageLocalization.format(\"OK\"),\r\n            cancelButtonText: messageLocalization.format(\"Cancel\"),\r\n            buttonsLocation: \"default\",\r\n            showPopupTitle: false,\r\n            useHiddenSubmitElement: false\r\n        })\r\n    },\r\n    _getDefaultPopupPosition: function() {\r\n        var position = getDefaultAlignment();\r\n        return {\r\n            offset: {\r\n                h: 0,\r\n                v: -1\r\n            },\r\n            my: position + \" top\",\r\n            at: position + \" bottom\",\r\n            collision: \"flip flip\"\r\n        }\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function(_device) {\r\n                var isGeneric = \"generic\" === _device.platform;\r\n                return isGeneric\r\n            },\r\n            options: {\r\n                popupPosition: {\r\n                    offset: {\r\n                        v: 0\r\n                    }\r\n                }\r\n            }\r\n        }])\r\n    },\r\n    _inputWrapper: function() {\r\n        return this.$element().find(\".\" + DROP_DOWN_EDITOR_INPUT_WRAPPER)\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initVisibilityActions();\r\n        this._initPopupInitializedAction();\r\n        this._initInnerOptionCache(\"dropDownOptions\")\r\n    },\r\n    _initVisibilityActions: function() {\r\n        this._openAction = this._createActionByOption(\"onOpened\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        });\r\n        this._closeAction = this._createActionByOption(\"onClosed\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    },\r\n    _initPopupInitializedAction: function() {\r\n        this._popupInitializedAction = this._createActionByOption(\"onPopupInitialized\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderSubmitElement();\r\n        this.callBase();\r\n        this.$element().addClass(DROP_DOWN_EDITOR_CLASS);\r\n        this.setAria(\"role\", \"combobox\")\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderOpenHandler();\r\n        this._attachFocusOutHandler();\r\n        this._renderOpenedState()\r\n    },\r\n    _renderContentImpl: function() {\r\n        if (!this.option(\"deferRendering\")) {\r\n            this._createPopup()\r\n        }\r\n    },\r\n    _renderInput: function() {\r\n        this.callBase();\r\n        this.$element().wrapInner($(\"<div>\").addClass(DROP_DOWN_EDITOR_INPUT_WRAPPER));\r\n        this._$container = this.$element().children().eq(0);\r\n        this._setDefaultAria()\r\n    },\r\n    _setDefaultAria: function() {\r\n        this.setAria({\r\n            haspopup: \"true\",\r\n            autocomplete: \"list\"\r\n        })\r\n    },\r\n    _readOnlyPropValue: function() {\r\n        return !this.option(\"acceptCustomValue\") || this.callBase()\r\n    },\r\n    _cleanFocusState: function() {\r\n        this.callBase();\r\n        if (this.option(\"fieldTemplate\")) {\r\n            this._detachFocusEvents()\r\n        }\r\n    },\r\n    _getFieldTemplate: function() {\r\n        return this.option(\"fieldTemplate\") && this._getTemplateByOption(\"fieldTemplate\")\r\n    },\r\n    _renderMask: function() {\r\n        if (this.option(\"fieldTemplate\")) {\r\n            return\r\n        }\r\n        this.callBase()\r\n    },\r\n    _renderField: function() {\r\n        var fieldTemplate = this._getFieldTemplate();\r\n        fieldTemplate && this._renderTemplatedField(fieldTemplate, this._fieldRenderData())\r\n    },\r\n    _renderPlaceholder: function() {\r\n        var hasFieldTemplate = !!this._getFieldTemplate();\r\n        if (!hasFieldTemplate) {\r\n            this.callBase()\r\n        }\r\n    },\r\n    _renderValue: function() {\r\n        if (this.option(\"useHiddenSubmitElement\")) {\r\n            this._setSubmitValue()\r\n        }\r\n        var promise = this.callBase();\r\n        promise.always(this._renderField.bind(this))\r\n    },\r\n    _renderTemplatedField: function(fieldTemplate, data) {\r\n        var _this = this;\r\n        var isFocused = focused(this._input());\r\n        var $container = this._$container;\r\n        this._disposeKeyboardProcessor();\r\n        var beforeButtonsContainerParent = this._$beforeButtonsContainer && this._$beforeButtonsContainer[0].parentNode;\r\n        var afterButtonsContainerParent = this._$afterButtonsContainer && this._$afterButtonsContainer[0].parentNode;\r\n        beforeButtonsContainerParent && beforeButtonsContainerParent.removeChild(this._$beforeButtonsContainer[0]);\r\n        afterButtonsContainerParent && afterButtonsContainerParent.removeChild(this._$afterButtonsContainer[0]);\r\n        this._detachFocusEvents();\r\n        $container.empty();\r\n        var $templateWrapper = $(\"<div>\").addClass(DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER).appendTo($container);\r\n        fieldTemplate.render({\r\n            model: data,\r\n            container: domUtils.getPublicElement($templateWrapper),\r\n            onRendered: function() {\r\n                var $input = _this._input();\r\n                if (!$input.length) {\r\n                    throw errors.Error(\"E1010\")\r\n                }\r\n                _this._refreshEvents();\r\n                _this._refreshValueChangeEvent();\r\n                _this._renderFocusState();\r\n                isFocused && eventsEngine.trigger($input, \"focus\")\r\n            }\r\n        });\r\n        $container.prepend(this._$beforeButtonsContainer);\r\n        $container.append(this._$afterButtonsContainer)\r\n    },\r\n    _fieldRenderData: function() {\r\n        return this.option(\"value\")\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._defaultTemplates.dropDownButton = new FunctionTemplate(function(options) {\r\n            var $icon = $(\"<div>\").addClass(DROP_DOWN_EDITOR_BUTTON_ICON);\r\n            $(options.container).append($icon)\r\n        })\r\n    },\r\n    _renderOpenHandler: function() {\r\n        var that = this;\r\n        var $inputWrapper = that._inputWrapper();\r\n        var eventName = eventUtils.addNamespace(clickEvent.name, that.NAME);\r\n        var openOnFieldClick = that.option(\"openOnFieldClick\");\r\n        eventsEngine.off($inputWrapper, eventName);\r\n        eventsEngine.on($inputWrapper, eventName, that._getInputClickHandler(openOnFieldClick));\r\n        that.$element().toggleClass(DROP_DOWN_EDITOR_FIELD_CLICKABLE, openOnFieldClick);\r\n        if (openOnFieldClick) {\r\n            that._openOnFieldClickAction = that._createAction(that._openHandler.bind(that))\r\n        }\r\n    },\r\n    _attachFocusOutHandler: function() {\r\n        if (isIOs) {\r\n            this._detachFocusOutEvents();\r\n            eventsEngine.on(this._inputWrapper(), eventUtils.addNamespace(\"focusout\", this.NAME), function(event) {\r\n                var newTarget = event.relatedTarget;\r\n                var popupWrapper = this.content ? $(this.content()).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY) : this._$popup;\r\n                if (newTarget && this.option(\"opened\")) {\r\n                    var isNewTargetOutside = 0 === $(newTarget).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY, popupWrapper).length;\r\n                    if (isNewTargetOutside) {\r\n                        this.close()\r\n                    }\r\n                }\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _detachFocusOutEvents: function() {\r\n        isIOs && eventsEngine.off(this._inputWrapper(), eventUtils.addNamespace(\"focusout\", this.NAME))\r\n    },\r\n    _getInputClickHandler: function(openOnFieldClick) {\r\n        var that = this;\r\n        return openOnFieldClick ? function(e) {\r\n            that._executeOpenAction(e)\r\n        } : function(e) {\r\n            that._focusInput()\r\n        }\r\n    },\r\n    _openHandler: function() {\r\n        this._toggleOpenState()\r\n    },\r\n    _executeOpenAction: function(e) {\r\n        this._openOnFieldClickAction({\r\n            event: e\r\n        })\r\n    },\r\n    _keyboardEventBindingTarget: function() {\r\n        return this._input()\r\n    },\r\n    _focusInput: function() {\r\n        if (this.option(\"disabled\")) {\r\n            return false\r\n        }\r\n        if (this.option(\"focusStateEnabled\") && !focused(this._input())) {\r\n            eventsEngine.trigger(this._input(), \"focus\")\r\n        }\r\n        return true\r\n    },\r\n    _toggleOpenState: function(isVisible) {\r\n        if (!this._focusInput()) {\r\n            return\r\n        }\r\n        if (!this.option(\"readOnly\")) {\r\n            isVisible = arguments.length ? isVisible : !this.option(\"opened\");\r\n            this.option(\"opened\", isVisible)\r\n        }\r\n    },\r\n    _renderOpenedState: function() {\r\n        var opened = this.option(\"opened\");\r\n        if (opened) {\r\n            this._createPopup()\r\n        }\r\n        this.$element().toggleClass(DROP_DOWN_EDITOR_ACTIVE, opened);\r\n        this._setPopupOption(\"visible\", opened);\r\n        this.setAria({\r\n            expanded: opened\r\n        });\r\n        this.setAria(\"owns\", (opened || void 0) && this._popupContentId, this.$element())\r\n    },\r\n    _createPopup: function() {\r\n        if (this._$popup) {\r\n            return\r\n        }\r\n        this._$popup = $(\"<div>\").addClass(DROP_DOWN_EDITOR_OVERLAY).addClass(this.option(\"customOverlayCssClass\")).appendTo(this.$element());\r\n        this._renderPopup();\r\n        this._renderPopupContent()\r\n    },\r\n    _renderPopup: function() {\r\n        this._popup = this._createComponent(this._$popup, Popup, extend(this._popupConfig(), this._getInnerOptionsCache(\"dropDownOptions\")));\r\n        this._popup.on({\r\n            showing: this._popupShowingHandler.bind(this),\r\n            shown: this._popupShownHandler.bind(this),\r\n            hiding: this._popupHidingHandler.bind(this),\r\n            hidden: this._popupHiddenHandler.bind(this)\r\n        });\r\n        this._popup.option(\"onContentReady\", this._contentReadyHandler.bind(this));\r\n        this._contentReadyHandler();\r\n        this._setPopupContentId(this._popup.$content());\r\n        this._bindInnerWidgetOptions(this._popup, \"dropDownOptions\")\r\n    },\r\n    _setPopupContentId: function($popupContent) {\r\n        this._popupContentId = \"dx-\" + new Guid;\r\n        this.setAria(\"id\", this._popupContentId, $popupContent)\r\n    },\r\n    _contentReadyHandler: commonUtils.noop,\r\n    _popupConfig: function() {\r\n        return {\r\n            onInitialized: this._popupInitializedHandler(),\r\n            position: extend(this.option(\"popupPosition\"), {\r\n                of: this.$element()\r\n            }),\r\n            showTitle: this.option(\"showPopupTitle\"),\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            shading: false,\r\n            closeOnTargetScroll: true,\r\n            closeOnOutsideClick: this._closeOutsideDropDownHandler.bind(this),\r\n            animation: {\r\n                show: {\r\n                    type: \"fade\",\r\n                    duration: 0,\r\n                    from: 0,\r\n                    to: 1\r\n                },\r\n                hide: {\r\n                    type: \"fade\",\r\n                    duration: 400,\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            },\r\n            deferRendering: false,\r\n            focusStateEnabled: false,\r\n            showCloseButton: false,\r\n            toolbarItems: this._getPopupToolbarItems(),\r\n            onPositioned: this._popupPositionedHandler.bind(this),\r\n            fullScreen: false\r\n        }\r\n    },\r\n    _popupInitializedHandler: function() {\r\n        if (!this.option(\"onPopupInitialized\")) {\r\n            return\r\n        }\r\n        return function(e) {\r\n            this._popupInitializedAction({\r\n                popup: e.component\r\n            })\r\n        }.bind(this)\r\n    },\r\n    _popupPositionedHandler: function(e) {\r\n        e.position && this._popup.overlayContent().toggleClass(DROP_DOWN_EDITOR_OVERLAY_FLIPPED, e.position.v.flip)\r\n    },\r\n    _popupShowingHandler: commonUtils.noop,\r\n    _popupHidingHandler: function() {\r\n        this.option(\"opened\", false)\r\n    },\r\n    _popupShownHandler: function() {\r\n        this._openAction();\r\n        if (this._$validationMessage) {\r\n            this._$validationMessage.dxOverlay(\"option\", \"position\", this._getValidationMessagePosition())\r\n        }\r\n    },\r\n    _popupHiddenHandler: function() {\r\n        this._closeAction();\r\n        if (this._$validationMessage) {\r\n            this._$validationMessage.dxOverlay(\"option\", \"position\", this._getValidationMessagePosition())\r\n        }\r\n    },\r\n    _getValidationMessagePosition: function() {\r\n        var positionRequest = \"below\";\r\n        if (this._popup && this._popup.option(\"visible\")) {\r\n            var myTop = positionUtils.setup(this.$element()).top;\r\n            var popupTop = positionUtils.setup(this._popup.$content()).top;\r\n            positionRequest = myTop + this.option(\"popupPosition\").offset.v > popupTop ? \"below\" : \"above\"\r\n        }\r\n        return this.callBase(positionRequest)\r\n    },\r\n    _renderPopupContent: function() {\r\n        var contentTemplate = this._getTemplateByOption(\"contentTemplate\");\r\n        if (!(contentTemplate && this.option(\"contentTemplate\"))) {\r\n            return\r\n        }\r\n        var $popupContent = this._popup.$content();\r\n        var templateData = {\r\n            value: this._fieldRenderData(),\r\n            component: this\r\n        };\r\n        $popupContent.empty();\r\n        contentTemplate.render({\r\n            container: domUtils.getPublicElement($popupContent),\r\n            model: templateData\r\n        })\r\n    },\r\n    _closeOutsideDropDownHandler: function(_ref) {\r\n        var target = _ref.target;\r\n        var $target = $(target);\r\n        var dropDownButton = this.getButton(\"dropDown\");\r\n        var $dropDownButton = dropDownButton && dropDownButton.$element();\r\n        var isInputClicked = !!$target.closest(this.$element()).length;\r\n        var isDropDownButtonClicked = !!$target.closest($dropDownButton).length;\r\n        var isOutsideClick = !isInputClicked && !isDropDownButtonClicked;\r\n        return isOutsideClick\r\n    },\r\n    _clean: function() {\r\n        delete this._openOnFieldClickAction;\r\n        if (this._$popup) {\r\n            this._$popup.remove();\r\n            delete this._$popup;\r\n            delete this._popup\r\n        }\r\n        this.callBase()\r\n    },\r\n    _setPopupOption: function(optionName, value) {\r\n        this._setWidgetOption(\"_popup\", arguments)\r\n    },\r\n    _validatedOpening: function() {\r\n        if (!this.option(\"readOnly\")) {\r\n            this._toggleOpenState(true)\r\n        }\r\n    },\r\n    _getPopupToolbarItems: function() {\r\n        return \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : []\r\n    },\r\n    _getFirstPopupElement: function() {\r\n        return this._popup._wrapper().find(\".dx-popup-done.dx-button\")\r\n    },\r\n    _getLastPopupElement: function() {\r\n        return this._popup._wrapper().find(\".dx-popup-cancel.dx-button\")\r\n    },\r\n    _popupElementTabHandler: function(e) {\r\n        var $element = $(e.currentTarget);\r\n        if (e.shiftKey && $element.is(this._getFirstPopupElement()) || !e.shiftKey && $element.is(this._getLastPopupElement())) {\r\n            eventsEngine.trigger(this._input(), \"focus\");\r\n            e.preventDefault()\r\n        }\r\n    },\r\n    _popupElementEscHandler: function() {\r\n        eventsEngine.trigger(this._input(), \"focus\");\r\n        this.close()\r\n    },\r\n    _popupButtonInitializedHandler: function(e) {\r\n        e.component.registerKeyHandler(\"tab\", this._popupElementTabHandler.bind(this));\r\n        e.component.registerKeyHandler(\"escape\", this._popupElementEscHandler.bind(this))\r\n    },\r\n    _popupToolbarItemsConfig: function() {\r\n        var buttonsConfig = [{\r\n            shortcut: \"done\",\r\n            options: {\r\n                onClick: this._applyButtonHandler.bind(this),\r\n                text: this.option(\"applyButtonText\"),\r\n                onInitialized: this._popupButtonInitializedHandler.bind(this)\r\n            }\r\n        }, {\r\n            shortcut: \"cancel\",\r\n            options: {\r\n                onClick: this._cancelButtonHandler.bind(this),\r\n                text: this.option(\"cancelButtonText\"),\r\n                onInitialized: this._popupButtonInitializedHandler.bind(this)\r\n            }\r\n        }];\r\n        return this._applyButtonsLocation(buttonsConfig)\r\n    },\r\n    _applyButtonsLocation: function(buttonsConfig) {\r\n        var buttonsLocation = this.option(\"buttonsLocation\");\r\n        var resultConfig = buttonsConfig;\r\n        if (\"default\" !== buttonsLocation) {\r\n            var position = commonUtils.splitPair(buttonsLocation);\r\n            each(resultConfig, function(_, element) {\r\n                extend(element, {\r\n                    toolbar: position[0],\r\n                    location: position[1]\r\n                })\r\n            })\r\n        }\r\n        return resultConfig\r\n    },\r\n    _applyButtonHandler: function() {\r\n        this.close();\r\n        this.option(\"focusStateEnabled\") && this.focus()\r\n    },\r\n    _cancelButtonHandler: function() {\r\n        this.close();\r\n        this.option(\"focusStateEnabled\") && this.focus()\r\n    },\r\n    _updatePopupWidth: commonUtils.noop,\r\n    _popupOptionChanged: function(args) {\r\n        var options = this._getOptionsFromContainer(args);\r\n        this._setPopupOption(options);\r\n        if (Object.keys(options).indexOf(\"width\") !== -1 && void 0 === options.width) {\r\n            this._updatePopupWidth()\r\n        }\r\n    },\r\n    _renderSubmitElement: function() {\r\n        if (this.option(\"useHiddenSubmitElement\")) {\r\n            this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element())\r\n        }\r\n    },\r\n    _setSubmitValue: function() {\r\n        this._getSubmitElement().val(this.option(\"value\"))\r\n    },\r\n    _getSubmitElement: function() {\r\n        if (this.option(\"useHiddenSubmitElement\")) {\r\n            return this._$submitElement\r\n        } else {\r\n            return this.callBase()\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        this._detachFocusOutEvents();\r\n        this.callBase()\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"opened\":\r\n                this._renderOpenedState();\r\n                break;\r\n            case \"onOpened\":\r\n            case \"onClosed\":\r\n                this._initVisibilityActions();\r\n                break;\r\n            case \"onPopupInitialized\":\r\n                this._initPopupInitializedAction();\r\n                break;\r\n            case \"fieldTemplate\":\r\n                if (isDefined(args.value)) {\r\n                    this._renderField()\r\n                } else {\r\n                    this._invalidate()\r\n                }\r\n                break;\r\n            case \"contentTemplate\":\r\n            case \"acceptCustomValue\":\r\n            case \"openOnFieldClick\":\r\n                this._invalidate();\r\n                break;\r\n            case \"dropDownButtonTemplate\":\r\n            case \"showDropDownButton\":\r\n                this._updateButtons([\"dropDown\"]);\r\n                break;\r\n            case \"dropDownOptions\":\r\n                this._popupOptionChanged(args);\r\n                this._cacheInnerOptions(\"dropDownOptions\", args.value);\r\n                break;\r\n            case \"popupPosition\":\r\n            case \"deferRendering\":\r\n                break;\r\n            case \"applyValueMode\":\r\n            case \"applyButtonText\":\r\n            case \"cancelButtonText\":\r\n            case \"buttonsLocation\":\r\n                this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\r\n                break;\r\n            case \"showPopupTitle\":\r\n                this._setPopupOption(\"showTitle\", args.value);\r\n                break;\r\n            case \"useHiddenSubmitElement\":\r\n                if (this._$submitElement) {\r\n                    this._$submitElement.remove();\r\n                    this._$submitElement = void 0\r\n                }\r\n                this._renderSubmitElement();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    open: function() {\r\n        this.option(\"opened\", true)\r\n    },\r\n    close: function() {\r\n        this.option(\"opened\", false)\r\n    },\r\n    field: function() {\r\n        return getPublicElement(this._input())\r\n    },\r\n    content: function() {\r\n        return this._popup ? this._popup.content() : null\r\n    }\r\n}).include(AsyncTemplateMixin);\r\nregisterComponent(\"dxDropDownEditor\", DropDownEditor);\r\nmodule.exports = DropDownEditor;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}