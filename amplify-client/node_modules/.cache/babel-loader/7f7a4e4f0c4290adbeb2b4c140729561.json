{"ast":null,"code":"/**\r\n * DevExtreme (core/utils/array_compare.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.findChanges = void 0;\n\nvar _type = require(\"./type\");\n\nvar getKeyWrapper = function getKeyWrapper(item, getKey) {\n  var key = getKey(item);\n\n  if ((0, _type.isObject)(key)) {\n    try {\n      return JSON.stringify(key);\n    } catch (e) {\n      return key;\n    }\n  }\n\n  return key;\n};\n\nvar getSameNewByOld = function getSameNewByOld(oldItem, newItems, newIndexByKey, getKey) {\n  var key = getKeyWrapper(oldItem, getKey);\n  return newItems[newIndexByKey[key]];\n};\n\nvar findChanges = exports.findChanges = function (oldItems, newItems, getKey, isItemEquals) {\n  var oldIndexByKey = {};\n  var newIndexByKey = {};\n  var addedCount = 0;\n  var removeCount = 0;\n  var result = [];\n  oldItems.forEach(function (item, index) {\n    var key = getKeyWrapper(item, getKey);\n    oldIndexByKey[key] = index;\n  });\n  newItems.forEach(function (item, index) {\n    var key = getKeyWrapper(item, getKey);\n    newIndexByKey[key] = index;\n  });\n  var itemCount = Math.max(oldItems.length, newItems.length);\n\n  for (var index = 0; index < itemCount + addedCount; index++) {\n    var newItem = newItems[index];\n    var oldNextIndex = index - addedCount + removeCount;\n    var nextOldItem = oldItems[oldNextIndex];\n    var isRemoved = !newItem || nextOldItem && !getSameNewByOld(nextOldItem, newItems, newIndexByKey, getKey);\n\n    if (isRemoved) {\n      if (nextOldItem) {\n        result.push({\n          type: \"remove\",\n          key: getKey(nextOldItem),\n          index: index,\n          oldItem: nextOldItem\n        });\n        removeCount++;\n        index--;\n      }\n    } else {\n      var key = getKeyWrapper(newItem, getKey);\n      var oldIndex = oldIndexByKey[key];\n      var oldItem = oldItems[oldIndex];\n\n      if (!oldItem) {\n        addedCount++;\n        result.push({\n          type: \"insert\",\n          data: newItem,\n          index: index\n        });\n      } else {\n        if (oldIndex === oldNextIndex) {\n          if (!isItemEquals(oldItem, newItem)) {\n            result.push({\n              type: \"update\",\n              data: newItem,\n              key: getKey(newItem),\n              index: index,\n              oldItem: oldItem\n            });\n          }\n        } else {\n          return;\n        }\n      }\n    }\n  }\n\n  return result;\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/core/utils/array_compare.js"],"names":["Object","value","exports","_type","require","getKeyWrapper","key","getKey","JSON","getSameNewByOld","newItems","newIndexByKey","findChanges","oldIndexByKey","addedCount","removeCount","result","oldItems","itemCount","Math","index","newItem","oldNextIndex","nextOldItem","isRemoved","type","oldItem","oldIndex","data","isItemEquals"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (core/utils/array_compare.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.findChanges = void 0;\r\nvar _type = require(\"./type\");\r\nvar getKeyWrapper = function(item, getKey) {\r\n    var key = getKey(item);\r\n    if ((0, _type.isObject)(key)) {\r\n        try {\r\n            return JSON.stringify(key)\r\n        } catch (e) {\r\n            return key\r\n        }\r\n    }\r\n    return key\r\n};\r\nvar getSameNewByOld = function(oldItem, newItems, newIndexByKey, getKey) {\r\n    var key = getKeyWrapper(oldItem, getKey);\r\n    return newItems[newIndexByKey[key]]\r\n};\r\nvar findChanges = exports.findChanges = function(oldItems, newItems, getKey, isItemEquals) {\r\n    var oldIndexByKey = {};\r\n    var newIndexByKey = {};\r\n    var addedCount = 0;\r\n    var removeCount = 0;\r\n    var result = [];\r\n    oldItems.forEach(function(item, index) {\r\n        var key = getKeyWrapper(item, getKey);\r\n        oldIndexByKey[key] = index\r\n    });\r\n    newItems.forEach(function(item, index) {\r\n        var key = getKeyWrapper(item, getKey);\r\n        newIndexByKey[key] = index\r\n    });\r\n    var itemCount = Math.max(oldItems.length, newItems.length);\r\n    for (var index = 0; index < itemCount + addedCount; index++) {\r\n        var newItem = newItems[index];\r\n        var oldNextIndex = index - addedCount + removeCount;\r\n        var nextOldItem = oldItems[oldNextIndex];\r\n        var isRemoved = !newItem || nextOldItem && !getSameNewByOld(nextOldItem, newItems, newIndexByKey, getKey);\r\n        if (isRemoved) {\r\n            if (nextOldItem) {\r\n                result.push({\r\n                    type: \"remove\",\r\n                    key: getKey(nextOldItem),\r\n                    index: index,\r\n                    oldItem: nextOldItem\r\n                });\r\n                removeCount++;\r\n                index--\r\n            }\r\n        } else {\r\n            var key = getKeyWrapper(newItem, getKey);\r\n            var oldIndex = oldIndexByKey[key];\r\n            var oldItem = oldItems[oldIndex];\r\n            if (!oldItem) {\r\n                addedCount++;\r\n                result.push({\r\n                    type: \"insert\",\r\n                    data: newItem,\r\n                    index: index\r\n                })\r\n            } else {\r\n                if (oldIndex === oldNextIndex) {\r\n                    if (!isItemEquals(oldItem, newItem)) {\r\n                        result.push({\r\n                            type: \"update\",\r\n                            data: newItem,\r\n                            key: getKey(newItem),\r\n                            index: index,\r\n                            oldItem: oldItem\r\n                        })\r\n                    }\r\n                } else {\r\n                    return\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result\r\n};\r\n"]},"metadata":{},"sourceType":"module"}