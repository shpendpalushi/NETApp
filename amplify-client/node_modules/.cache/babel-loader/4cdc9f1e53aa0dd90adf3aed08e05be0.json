{"ast":null,"code":"/**\r\n * DevExtreme (viz/range_selector/tracker.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tracker = Tracker;\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _support = require(\"../../core/utils/support\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar MIN_MANUAL_SELECTING_WIDTH = 10;\n\nvar window = _window2.default.getWindow();\n\nfunction isLeftButtonPressed(event) {\n  var e = event || window.event;\n  var originalEvent = e.originalEvent;\n  var touches = e.touches;\n  var pointerType = originalEvent ? originalEvent.pointerType : false;\n  var eventTouches = originalEvent ? originalEvent.touches : false;\n  var isMSPointerLeftClick = originalEvent && void 0 !== pointerType && (pointerType === (originalEvent.MSPOINTER_TYPE_TOUCH || \"touch\") || pointerType === (originalEvent.MSPOINTER_TYPE_MOUSE || \"mouse\") && 1 === originalEvent.buttons);\n  var isTouches = touches && touches.length > 0 || eventTouches && eventTouches.length > 0;\n  return 1 === e.which || isMSPointerLeftClick || isTouches;\n}\n\nfunction isMultiTouches(event) {\n  var originalEvent = event.originalEvent;\n  var touches = event.touches;\n  var eventTouches = originalEvent && originalEvent.touches;\n  return touches && touches.length > 1 || eventTouches && eventTouches.length > 1 || null;\n}\n\nfunction preventDefault(e) {\n  if (!isMultiTouches(e)) {\n    e.preventDefault();\n  }\n}\n\nfunction stopPropagationAndPreventDefault(e) {\n  if (!isMultiTouches(e)) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n}\n\nfunction isTouchEventArgs(e) {\n  return e && e.type && 0 === e.type.indexOf(\"touch\");\n}\n\nfunction getEventPageX(event) {\n  var originalEvent = event.originalEvent;\n  var result = 0;\n\n  if (event.pageX) {\n    result = event.pageX;\n  } else {\n    if (originalEvent && originalEvent.pageX) {\n      result = originalEvent.pageX;\n    }\n  }\n\n  if (originalEvent && originalEvent.touches) {\n    if (originalEvent.touches.length > 0) {\n      result = originalEvent.touches[0].pageX;\n    } else {\n      if (originalEvent.changedTouches.length > 0) {\n        result = originalEvent.changedTouches[0].pageX;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction initializeAreaEvents(controller, area, state, getRootOffsetLeft) {\n  var _docEvents;\n\n  var isTouchEvent;\n  var isActive = false;\n  var initialPosition;\n  var movingHandler = null;\n  var docEvents = (_docEvents = {}, _defineProperty(_docEvents, _pointer2.default.move, function (e) {\n    var position;\n    var offset;\n\n    if (isTouchEvent !== isTouchEventArgs(e)) {\n      return;\n    }\n\n    if (!isLeftButtonPressed(e)) {\n      cancel(e);\n    }\n\n    if (isActive) {\n      position = getEventPageX(e);\n      offset = getRootOffsetLeft();\n\n      if (movingHandler) {\n        movingHandler(position - offset, e);\n      } else {\n        if (state.manualRangeSelectionEnabled && Math.abs(initialPosition - position) >= MIN_MANUAL_SELECTING_WIDTH) {\n          movingHandler = controller.placeSliderAndBeginMoving(initialPosition - offset, position - offset, e);\n        }\n      }\n    }\n  }), _defineProperty(_docEvents, _pointer2.default.up, function (e) {\n    var position;\n\n    if (isActive) {\n      position = getEventPageX(e);\n\n      if (!movingHandler && state.moveSelectedRangeByClick && Math.abs(initialPosition - position) < MIN_MANUAL_SELECTING_WIDTH) {\n        controller.moveSelectedArea(position - getRootOffsetLeft(), e);\n      }\n\n      cancel(e);\n    }\n  }), _docEvents);\n\n  function cancel(e) {\n    if (isActive) {\n      isActive = false;\n\n      if (movingHandler) {\n        movingHandler.complete(e);\n        movingHandler = null;\n      }\n    }\n  }\n\n  area.on(_pointer2.default.down, function (e) {\n    if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\n      return;\n    }\n\n    isActive = true;\n    isTouchEvent = isTouchEventArgs(e);\n    initialPosition = getEventPageX(e);\n  });\n  return docEvents;\n}\n\nfunction initializeSelectedAreaEvents(controller, area, state, getRootOffsetLeft) {\n  var _docEvents2;\n\n  var isTouchEvent;\n  var isActive = false;\n  var movingHandler = null;\n  var docEvents = (_docEvents2 = {}, _defineProperty(_docEvents2, _pointer2.default.move, function (e) {\n    if (isTouchEvent !== isTouchEventArgs(e)) {\n      return;\n    }\n\n    if (!isLeftButtonPressed(e)) {\n      cancel(e);\n    }\n\n    if (isActive) {\n      preventDefault(e);\n      movingHandler(getEventPageX(e) - getRootOffsetLeft(), e);\n    }\n  }), _defineProperty(_docEvents2, _pointer2.default.up, cancel), _docEvents2);\n\n  function cancel(e) {\n    if (isActive) {\n      isActive = false;\n      movingHandler.complete(e);\n      movingHandler = null;\n    }\n  }\n\n  area.on(_pointer2.default.down, function (e) {\n    if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\n      return;\n    }\n\n    isActive = true;\n    isTouchEvent = isTouchEventArgs(e);\n    movingHandler = controller.beginSelectedAreaMoving(getEventPageX(e) - getRootOffsetLeft());\n    stopPropagationAndPreventDefault(e);\n  });\n  return docEvents;\n}\n\nfunction initializeSliderEvents(controller, sliders, state, getRootOffsetLeft) {\n  var _docEvents3;\n\n  var isTouchEvent;\n  var isActive = false;\n  var movingHandler = null;\n  var docEvents = (_docEvents3 = {}, _defineProperty(_docEvents3, _pointer2.default.move, function (e) {\n    if (isTouchEvent !== isTouchEventArgs(e)) {\n      return;\n    }\n\n    if (!isLeftButtonPressed(e)) {\n      cancel(e);\n    }\n\n    if (isActive) {\n      preventDefault(e);\n      movingHandler(getEventPageX(e) - getRootOffsetLeft(), e);\n    }\n  }), _defineProperty(_docEvents3, _pointer2.default.up, cancel), _docEvents3);\n  (0, _iterator.each)(sliders, function (i, slider) {\n    var _slider$on;\n\n    slider.on((_slider$on = {}, _defineProperty(_slider$on, _pointer2.default.down, function (e) {\n      if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\n        return;\n      }\n\n      isActive = true;\n      isTouchEvent = isTouchEventArgs(e);\n      movingHandler = controller.beginSliderMoving(i, getEventPageX(e) - getRootOffsetLeft());\n      stopPropagationAndPreventDefault(e);\n    }), _defineProperty(_slider$on, _pointer2.default.move, function () {\n      if (!movingHandler) {\n        controller.foregroundSlider(i);\n      }\n    }), _slider$on));\n  });\n\n  function cancel(e) {\n    if (isActive) {\n      isActive = false;\n      movingHandler.complete(e);\n      movingHandler = null;\n    }\n  }\n\n  return docEvents;\n}\n\nfunction Tracker(params) {\n  var state = this._state = {};\n  var targets = params.controller.getTrackerTargets();\n\n  if (_support.pointer) {\n    params.renderer.root.css({\n      msTouchAction: \"pinch-zoom\"\n    });\n  }\n\n  this._docEvents = [initializeSelectedAreaEvents(params.controller, targets.selectedArea, state, getRootOffsetLeft), initializeAreaEvents(params.controller, targets.area, state, getRootOffsetLeft), initializeSliderEvents(params.controller, targets.sliders, state, getRootOffsetLeft)];\n  (0, _iterator.each)(this._docEvents, function (_, events) {\n    _events_engine2.default.on(_dom_adapter2.default.getDocument(), events);\n  });\n\n  function getRootOffsetLeft() {\n    return params.renderer.getRootOffset().left;\n  }\n}\n\nTracker.prototype = {\n  constructor: Tracker,\n  dispose: function dispose() {\n    (0, _iterator.each)(this._docEvents, function (_, events) {\n      _events_engine2.default.off(_dom_adapter2.default.getDocument(), events);\n    });\n  },\n  update: function update(enabled, behavior) {\n    var state = this._state;\n    state.enabled = enabled;\n    state.moveSelectedRangeByClick = behavior.moveSelectedRangeByClick;\n    state.manualRangeSelectionEnabled = behavior.manualRangeSelectionEnabled;\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/range_selector/tracker.js"],"names":["Object","value","exports","_events_engine","require","_events_engine2","_interopRequireDefault","_pointer","_pointer2","_window","_window2","_dom_adapter","_dom_adapter2","_iterator","_support","obj","key","enumerable","configurable","writable","MIN_MANUAL_SELECTING_WIDTH","window","e","event","originalEvent","touches","pointerType","eventTouches","isMSPointerLeftClick","isTouches","isMultiTouches","result","isActive","movingHandler","docEvents","_defineProperty","isTouchEvent","isTouchEventArgs","isLeftButtonPressed","cancel","position","getEventPageX","offset","getRootOffsetLeft","state","Math","initialPosition","controller","area","preventDefault","stopPropagationAndPreventDefault","slider","targets","params","msTouchAction","initializeSelectedAreaEvents","initializeAreaEvents","initializeSliderEvents","Tracker","constructor","dispose","update","behavior"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/range_selector/tracker.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.Tracker = Tracker;\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _window2 = _interopRequireDefault(_window);\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _support = require(\"../../core/utils/support\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\nvar MIN_MANUAL_SELECTING_WIDTH = 10;\r\nvar window = _window2.default.getWindow();\r\n\r\nfunction isLeftButtonPressed(event) {\r\n    var e = event || window.event;\r\n    var originalEvent = e.originalEvent;\r\n    var touches = e.touches;\r\n    var pointerType = originalEvent ? originalEvent.pointerType : false;\r\n    var eventTouches = originalEvent ? originalEvent.touches : false;\r\n    var isMSPointerLeftClick = originalEvent && void 0 !== pointerType && (pointerType === (originalEvent.MSPOINTER_TYPE_TOUCH || \"touch\") || pointerType === (originalEvent.MSPOINTER_TYPE_MOUSE || \"mouse\") && 1 === originalEvent.buttons);\r\n    var isTouches = touches && touches.length > 0 || eventTouches && eventTouches.length > 0;\r\n    return 1 === e.which || isMSPointerLeftClick || isTouches\r\n}\r\n\r\nfunction isMultiTouches(event) {\r\n    var originalEvent = event.originalEvent;\r\n    var touches = event.touches;\r\n    var eventTouches = originalEvent && originalEvent.touches;\r\n    return touches && touches.length > 1 || eventTouches && eventTouches.length > 1 || null\r\n}\r\n\r\nfunction preventDefault(e) {\r\n    if (!isMultiTouches(e)) {\r\n        e.preventDefault()\r\n    }\r\n}\r\n\r\nfunction stopPropagationAndPreventDefault(e) {\r\n    if (!isMultiTouches(e)) {\r\n        e.stopPropagation();\r\n        e.preventDefault()\r\n    }\r\n}\r\n\r\nfunction isTouchEventArgs(e) {\r\n    return e && e.type && 0 === e.type.indexOf(\"touch\")\r\n}\r\n\r\nfunction getEventPageX(event) {\r\n    var originalEvent = event.originalEvent;\r\n    var result = 0;\r\n    if (event.pageX) {\r\n        result = event.pageX\r\n    } else {\r\n        if (originalEvent && originalEvent.pageX) {\r\n            result = originalEvent.pageX\r\n        }\r\n    }\r\n    if (originalEvent && originalEvent.touches) {\r\n        if (originalEvent.touches.length > 0) {\r\n            result = originalEvent.touches[0].pageX\r\n        } else {\r\n            if (originalEvent.changedTouches.length > 0) {\r\n                result = originalEvent.changedTouches[0].pageX\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction initializeAreaEvents(controller, area, state, getRootOffsetLeft) {\r\n    var _docEvents;\r\n    var isTouchEvent;\r\n    var isActive = false;\r\n    var initialPosition;\r\n    var movingHandler = null;\r\n    var docEvents = (_docEvents = {}, _defineProperty(_docEvents, _pointer2.default.move, function(e) {\r\n        var position;\r\n        var offset;\r\n        if (isTouchEvent !== isTouchEventArgs(e)) {\r\n            return\r\n        }\r\n        if (!isLeftButtonPressed(e)) {\r\n            cancel(e)\r\n        }\r\n        if (isActive) {\r\n            position = getEventPageX(e);\r\n            offset = getRootOffsetLeft();\r\n            if (movingHandler) {\r\n                movingHandler(position - offset, e)\r\n            } else {\r\n                if (state.manualRangeSelectionEnabled && Math.abs(initialPosition - position) >= MIN_MANUAL_SELECTING_WIDTH) {\r\n                    movingHandler = controller.placeSliderAndBeginMoving(initialPosition - offset, position - offset, e)\r\n                }\r\n            }\r\n        }\r\n    }), _defineProperty(_docEvents, _pointer2.default.up, function(e) {\r\n        var position;\r\n        if (isActive) {\r\n            position = getEventPageX(e);\r\n            if (!movingHandler && state.moveSelectedRangeByClick && Math.abs(initialPosition - position) < MIN_MANUAL_SELECTING_WIDTH) {\r\n                controller.moveSelectedArea(position - getRootOffsetLeft(), e)\r\n            }\r\n            cancel(e)\r\n        }\r\n    }), _docEvents);\r\n\r\n    function cancel(e) {\r\n        if (isActive) {\r\n            isActive = false;\r\n            if (movingHandler) {\r\n                movingHandler.complete(e);\r\n                movingHandler = null\r\n            }\r\n        }\r\n    }\r\n    area.on(_pointer2.default.down, function(e) {\r\n        if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\r\n            return\r\n        }\r\n        isActive = true;\r\n        isTouchEvent = isTouchEventArgs(e);\r\n        initialPosition = getEventPageX(e)\r\n    });\r\n    return docEvents\r\n}\r\n\r\nfunction initializeSelectedAreaEvents(controller, area, state, getRootOffsetLeft) {\r\n    var _docEvents2;\r\n    var isTouchEvent;\r\n    var isActive = false;\r\n    var movingHandler = null;\r\n    var docEvents = (_docEvents2 = {}, _defineProperty(_docEvents2, _pointer2.default.move, function(e) {\r\n        if (isTouchEvent !== isTouchEventArgs(e)) {\r\n            return\r\n        }\r\n        if (!isLeftButtonPressed(e)) {\r\n            cancel(e)\r\n        }\r\n        if (isActive) {\r\n            preventDefault(e);\r\n            movingHandler(getEventPageX(e) - getRootOffsetLeft(), e)\r\n        }\r\n    }), _defineProperty(_docEvents2, _pointer2.default.up, cancel), _docEvents2);\r\n\r\n    function cancel(e) {\r\n        if (isActive) {\r\n            isActive = false;\r\n            movingHandler.complete(e);\r\n            movingHandler = null\r\n        }\r\n    }\r\n    area.on(_pointer2.default.down, function(e) {\r\n        if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\r\n            return\r\n        }\r\n        isActive = true;\r\n        isTouchEvent = isTouchEventArgs(e);\r\n        movingHandler = controller.beginSelectedAreaMoving(getEventPageX(e) - getRootOffsetLeft());\r\n        stopPropagationAndPreventDefault(e)\r\n    });\r\n    return docEvents\r\n}\r\n\r\nfunction initializeSliderEvents(controller, sliders, state, getRootOffsetLeft) {\r\n    var _docEvents3;\r\n    var isTouchEvent;\r\n    var isActive = false;\r\n    var movingHandler = null;\r\n    var docEvents = (_docEvents3 = {}, _defineProperty(_docEvents3, _pointer2.default.move, function(e) {\r\n        if (isTouchEvent !== isTouchEventArgs(e)) {\r\n            return\r\n        }\r\n        if (!isLeftButtonPressed(e)) {\r\n            cancel(e)\r\n        }\r\n        if (isActive) {\r\n            preventDefault(e);\r\n            movingHandler(getEventPageX(e) - getRootOffsetLeft(), e)\r\n        }\r\n    }), _defineProperty(_docEvents3, _pointer2.default.up, cancel), _docEvents3);\r\n    (0, _iterator.each)(sliders, function(i, slider) {\r\n        var _slider$on;\r\n        slider.on((_slider$on = {}, _defineProperty(_slider$on, _pointer2.default.down, function(e) {\r\n            if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\r\n                return\r\n            }\r\n            isActive = true;\r\n            isTouchEvent = isTouchEventArgs(e);\r\n            movingHandler = controller.beginSliderMoving(i, getEventPageX(e) - getRootOffsetLeft());\r\n            stopPropagationAndPreventDefault(e)\r\n        }), _defineProperty(_slider$on, _pointer2.default.move, function() {\r\n            if (!movingHandler) {\r\n                controller.foregroundSlider(i)\r\n            }\r\n        }), _slider$on))\r\n    });\r\n\r\n    function cancel(e) {\r\n        if (isActive) {\r\n            isActive = false;\r\n            movingHandler.complete(e);\r\n            movingHandler = null\r\n        }\r\n    }\r\n    return docEvents\r\n}\r\n\r\nfunction Tracker(params) {\r\n    var state = this._state = {};\r\n    var targets = params.controller.getTrackerTargets();\r\n    if (_support.pointer) {\r\n        params.renderer.root.css({\r\n            msTouchAction: \"pinch-zoom\"\r\n        })\r\n    }\r\n    this._docEvents = [initializeSelectedAreaEvents(params.controller, targets.selectedArea, state, getRootOffsetLeft), initializeAreaEvents(params.controller, targets.area, state, getRootOffsetLeft), initializeSliderEvents(params.controller, targets.sliders, state, getRootOffsetLeft)];\r\n    (0, _iterator.each)(this._docEvents, function(_, events) {\r\n        _events_engine2.default.on(_dom_adapter2.default.getDocument(), events)\r\n    });\r\n\r\n    function getRootOffsetLeft() {\r\n        return params.renderer.getRootOffset().left\r\n    }\r\n}\r\nTracker.prototype = {\r\n    constructor: Tracker,\r\n    dispose: function() {\r\n        (0, _iterator.each)(this._docEvents, function(_, events) {\r\n            _events_engine2.default.off(_dom_adapter2.default.getDocument(), events)\r\n        })\r\n    },\r\n    update: function(enabled, behavior) {\r\n        var state = this._state;\r\n        state.enabled = enabled;\r\n        state.moveSelectedRangeByClick = behavior.moveSelectedRangeByClick;\r\n        state.manualRangeSelectionEnabled = behavior.manualRangeSelectionEnabled\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}