{"ast":null,"code":"/**\r\n * DevExtreme (core/utils/ajax.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar Deferred = require(\"./deferred\").Deferred;\n\nvar domAdapter = require(\"../../core/dom_adapter\");\n\nvar httpRequest = require(\"../../core/http_request\");\n\nvar windowUtils = require(\"../../core/utils/window\");\n\nvar window = windowUtils.getWindow();\n\nvar extendFromObject = require(\"./extend\").extendFromObject;\n\nvar isDefined = require(\"./type\").isDefined;\n\nvar Promise = require(\"../polyfills/promise\");\n\nvar injector = require(\"./dependency_injector\");\n\nvar SUCCESS = \"success\";\nvar ERROR = \"error\";\nvar TIMEOUT = \"timeout\";\nvar NO_CONTENT = \"nocontent\";\nvar PARSER_ERROR = \"parsererror\";\n\nvar isStatusSuccess = function isStatusSuccess(status) {\n  return 200 <= status && status < 300;\n};\n\nvar hasContent = function hasContent(status) {\n  return 204 !== status;\n};\n\nvar paramsConvert = function paramsConvert(params) {\n  var result = [];\n\n  for (var name in params) {\n    var value = params[name];\n\n    if (void 0 === value) {\n      continue;\n    }\n\n    if (null === value) {\n      value = \"\";\n    }\n\n    result.push(encodeURIComponent(name) + \"=\" + encodeURIComponent(value));\n  }\n\n  return result.join(\"&\");\n};\n\nvar createScript = function createScript(options) {\n  var script = domAdapter.createElement(\"script\");\n\n  for (var name in options) {\n    script[name] = options[name];\n  }\n\n  return script;\n};\n\nvar removeScript = function removeScript(scriptNode) {\n  scriptNode.parentNode.removeChild(scriptNode);\n};\n\nvar appendToHead = function appendToHead(element) {\n  return domAdapter.getHead().appendChild(element);\n};\n\nvar evalScript = function evalScript(code) {\n  var script = createScript({\n    text: code\n  });\n  appendToHead(script);\n  removeScript(script);\n};\n\nvar evalCrossDomainScript = function evalCrossDomainScript(url) {\n  var script = createScript({\n    src: url\n  });\n  return new Promise(function (resolve, reject) {\n    var events = {\n      load: resolve,\n      error: reject\n    };\n\n    var loadHandler = function loadHandler(e) {\n      events[e.type]();\n      removeScript(script);\n    };\n\n    for (var event in events) {\n      domAdapter.listen(script, event, loadHandler);\n    }\n\n    appendToHead(script);\n  });\n};\n\nvar getAcceptHeader = function getAcceptHeader(options) {\n  var dataType = options.dataType || \"*\";\n  var scriptAccept = \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\";\n  var accepts = {\n    \"*\": \"*/*\",\n    text: \"text/plain\",\n    html: \"text/html\",\n    xml: \"application/xml, text/xml\",\n    json: \"application/json, text/javascript\",\n    jsonp: scriptAccept,\n    script: scriptAccept\n  };\n  extendFromObject(accepts, options.accepts, true);\n  return accepts[dataType] ? accepts[dataType] + (\"*\" !== dataType ? \", */*; q=0.01\" : \"\") : accepts[\"*\"];\n};\n\nvar getContentTypeHeader = function getContentTypeHeader(options) {\n  var defaultContentType;\n\n  if (options.data && !options.upload && \"GET\" !== getMethod(options)) {\n    defaultContentType = \"application/x-www-form-urlencoded;charset=utf-8\";\n  }\n\n  return options.contentType || defaultContentType;\n};\n\nvar getDataFromResponse = function getDataFromResponse(xhr) {\n  return xhr.responseType && \"text\" !== xhr.responseType || \"string\" !== typeof xhr.responseText ? xhr.response : xhr.responseText;\n};\n\nvar postProcess = function postProcess(deferred, xhr, dataType) {\n  var data = getDataFromResponse(xhr);\n\n  switch (dataType) {\n    case \"jsonp\":\n      evalScript(data);\n      break;\n\n    case \"script\":\n      evalScript(data);\n      deferred.resolve(data, SUCCESS, xhr);\n      break;\n\n    case \"json\":\n      try {\n        deferred.resolve(JSON.parse(data), SUCCESS, xhr);\n      } catch (e) {\n        deferred.reject(xhr, PARSER_ERROR, e);\n      }\n\n      break;\n\n    default:\n      deferred.resolve(data, SUCCESS, xhr);\n  }\n};\n\nvar isCrossDomain = function isCrossDomain(url) {\n  if (!windowUtils.hasWindow()) {\n    return true;\n  }\n\n  var crossDomain = false;\n  var originAnchor = domAdapter.createElement(\"a\");\n  var urlAnchor = domAdapter.createElement(\"a\");\n  originAnchor.href = window.location.href;\n\n  try {\n    urlAnchor.href = url;\n    urlAnchor.href = urlAnchor.href;\n    crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !== urlAnchor.protocol + \"//\" + urlAnchor.host;\n  } catch (e) {\n    crossDomain = true;\n  }\n\n  return crossDomain;\n};\n\nvar setHttpTimeout = function setHttpTimeout(timeout, xhr) {\n  return timeout && setTimeout(function () {\n    xhr.customStatus = TIMEOUT;\n    xhr.abort();\n  }, timeout);\n};\n\nvar getJsonpOptions = function getJsonpOptions(options) {\n  if (\"jsonp\" === options.dataType) {\n    var random = Math.random().toString().replace(/\\D/g, \"\");\n    var callbackName = options.jsonpCallback || \"dxCallback\" + Date.now() + \"_\" + random;\n    var callbackParameter = options.jsonp || \"callback\";\n    options.data = options.data || {};\n    options.data[callbackParameter] = callbackName;\n    return callbackName;\n  }\n};\n\nvar getRequestOptions = function getRequestOptions(options, headers) {\n  var params = options.data;\n  var paramsAlreadyString = \"string\" === typeof params;\n  var url = options.url || window.location.href;\n\n  if (!paramsAlreadyString && !options.cache) {\n    params = params || {};\n    params._ = Date.now();\n  }\n\n  if (params && !options.upload) {\n    if (!paramsAlreadyString) {\n      params = paramsConvert(params);\n    }\n\n    if (\"GET\" === getMethod(options)) {\n      if (\"\" !== params) {\n        url += (url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + params;\n      }\n\n      params = null;\n    } else {\n      if (headers[\"Content-Type\"] && headers[\"Content-Type\"].indexOf(\"application/x-www-form-urlencoded\") > -1) {\n        params = params.replace(/%20/g, \"+\");\n      }\n    }\n  }\n\n  return {\n    url: url,\n    parameters: params\n  };\n};\n\nvar getMethod = function getMethod(options) {\n  return (options.method || \"GET\").toUpperCase();\n};\n\nvar getRequestHeaders = function getRequestHeaders(options) {\n  var headers = options.headers || {};\n  headers[\"Content-Type\"] = headers[\"Content-Type\"] || getContentTypeHeader(options);\n  headers.Accept = headers.Accept || getAcceptHeader(options);\n\n  if (!options.crossDomain && !headers[\"X-Requested-With\"]) {\n    headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n  }\n\n  return headers;\n};\n\nvar sendRequest = function sendRequest(options) {\n  var xhr = httpRequest.getXhr();\n  var d = new Deferred();\n  var result = d.promise();\n  var async = isDefined(options.async) ? options.async : true;\n  var dataType = options.dataType;\n  var timeout = options.timeout || 0;\n  var timeoutId;\n  options.crossDomain = isCrossDomain(options.url);\n  var needScriptEvaluation = \"jsonp\" === dataType || \"script\" === dataType;\n\n  if (void 0 === options.cache) {\n    options.cache = !needScriptEvaluation;\n  }\n\n  var callbackName = getJsonpOptions(options);\n  var headers = getRequestHeaders(options);\n  var requestOptions = getRequestOptions(options, headers);\n  var url = requestOptions.url;\n  var parameters = requestOptions.parameters;\n\n  if (callbackName) {\n    window[callbackName] = function (data) {\n      d.resolve(data, SUCCESS, xhr);\n    };\n  }\n\n  if (options.crossDomain && needScriptEvaluation) {\n    var reject = function reject() {\n      d.reject(xhr, ERROR);\n    };\n\n    var resolve = function resolve() {\n      if (\"jsonp\" === dataType) {\n        return;\n      }\n\n      d.resolve(null, SUCCESS, xhr);\n    };\n\n    evalCrossDomainScript(url).then(resolve, reject);\n    return result;\n  }\n\n  if (options.crossDomain && !(\"withCredentials\" in xhr)) {\n    d.reject(xhr, ERROR);\n    return result;\n  }\n\n  xhr.open(getMethod(options), url, async, options.username, options.password);\n\n  if (async) {\n    xhr.timeout = timeout;\n    timeoutId = setHttpTimeout(timeout, xhr, d);\n  }\n\n  xhr.onreadystatechange = function (e) {\n    if (4 === xhr.readyState) {\n      clearTimeout(timeoutId);\n\n      if (isStatusSuccess(xhr.status)) {\n        if (hasContent(xhr.status)) {\n          postProcess(d, xhr, dataType);\n        } else {\n          d.resolve(null, NO_CONTENT, xhr);\n        }\n      } else {\n        d.reject(xhr, xhr.customStatus || ERROR);\n      }\n    }\n  };\n\n  if (options.upload) {\n    xhr.upload.onprogress = options.upload.onprogress;\n    xhr.upload.onloadstart = options.upload.onloadstart;\n    xhr.upload.onabort = options.upload.onabort;\n  }\n\n  if (options.xhrFields) {\n    for (var field in options.xhrFields) {\n      xhr[field] = options.xhrFields[field];\n    }\n  }\n\n  if (\"arraybuffer\" === options.responseType) {\n    xhr.responseType = options.responseType;\n  }\n\n  for (var name in headers) {\n    if (Object.prototype.hasOwnProperty.call(headers, name) && isDefined(headers[name])) {\n      xhr.setRequestHeader(name, headers[name]);\n    }\n  }\n\n  if (options.beforeSend) {\n    options.beforeSend(xhr);\n  }\n\n  xhr.send(parameters);\n\n  result.abort = function () {\n    xhr.abort();\n  };\n\n  return result;\n};\n\nmodule.exports = injector({\n  sendRequest: sendRequest\n});","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/core/utils/ajax.js"],"names":["Deferred","require","domAdapter","httpRequest","windowUtils","window","extendFromObject","isDefined","Promise","injector","SUCCESS","ERROR","TIMEOUT","NO_CONTENT","PARSER_ERROR","isStatusSuccess","status","hasContent","paramsConvert","result","value","params","encodeURIComponent","createScript","script","options","removeScript","scriptNode","appendToHead","evalScript","text","code","evalCrossDomainScript","src","url","events","load","error","reject","loadHandler","e","getAcceptHeader","dataType","scriptAccept","accepts","html","xml","json","jsonp","getContentTypeHeader","getMethod","defaultContentType","getDataFromResponse","xhr","postProcess","data","deferred","JSON","isCrossDomain","crossDomain","originAnchor","urlAnchor","setHttpTimeout","timeout","setTimeout","getJsonpOptions","random","Math","callbackName","Date","callbackParameter","getRequestOptions","paramsAlreadyString","headers","parameters","getRequestHeaders","sendRequest","d","async","needScriptEvaluation","requestOptions","resolve","timeoutId","clearTimeout","Object","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (core/utils/ajax.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar Deferred = require(\"./deferred\").Deferred;\r\nvar domAdapter = require(\"../../core/dom_adapter\");\r\nvar httpRequest = require(\"../../core/http_request\");\r\nvar windowUtils = require(\"../../core/utils/window\");\r\nvar window = windowUtils.getWindow();\r\nvar extendFromObject = require(\"./extend\").extendFromObject;\r\nvar isDefined = require(\"./type\").isDefined;\r\nvar Promise = require(\"../polyfills/promise\");\r\nvar injector = require(\"./dependency_injector\");\r\nvar SUCCESS = \"success\";\r\nvar ERROR = \"error\";\r\nvar TIMEOUT = \"timeout\";\r\nvar NO_CONTENT = \"nocontent\";\r\nvar PARSER_ERROR = \"parsererror\";\r\nvar isStatusSuccess = function(status) {\r\n    return 200 <= status && status < 300\r\n};\r\nvar hasContent = function(status) {\r\n    return 204 !== status\r\n};\r\nvar paramsConvert = function(params) {\r\n    var result = [];\r\n    for (var name in params) {\r\n        var value = params[name];\r\n        if (void 0 === value) {\r\n            continue\r\n        }\r\n        if (null === value) {\r\n            value = \"\"\r\n        }\r\n        result.push(encodeURIComponent(name) + \"=\" + encodeURIComponent(value))\r\n    }\r\n    return result.join(\"&\")\r\n};\r\nvar createScript = function(options) {\r\n    var script = domAdapter.createElement(\"script\");\r\n    for (var name in options) {\r\n        script[name] = options[name]\r\n    }\r\n    return script\r\n};\r\nvar removeScript = function(scriptNode) {\r\n    scriptNode.parentNode.removeChild(scriptNode)\r\n};\r\nvar appendToHead = function(element) {\r\n    return domAdapter.getHead().appendChild(element)\r\n};\r\nvar evalScript = function(code) {\r\n    var script = createScript({\r\n        text: code\r\n    });\r\n    appendToHead(script);\r\n    removeScript(script)\r\n};\r\nvar evalCrossDomainScript = function(url) {\r\n    var script = createScript({\r\n        src: url\r\n    });\r\n    return new Promise(function(resolve, reject) {\r\n        var events = {\r\n            load: resolve,\r\n            error: reject\r\n        };\r\n        var loadHandler = function(e) {\r\n            events[e.type]();\r\n            removeScript(script)\r\n        };\r\n        for (var event in events) {\r\n            domAdapter.listen(script, event, loadHandler)\r\n        }\r\n        appendToHead(script)\r\n    })\r\n};\r\nvar getAcceptHeader = function(options) {\r\n    var dataType = options.dataType || \"*\";\r\n    var scriptAccept = \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\";\r\n    var accepts = {\r\n        \"*\": \"*/*\",\r\n        text: \"text/plain\",\r\n        html: \"text/html\",\r\n        xml: \"application/xml, text/xml\",\r\n        json: \"application/json, text/javascript\",\r\n        jsonp: scriptAccept,\r\n        script: scriptAccept\r\n    };\r\n    extendFromObject(accepts, options.accepts, true);\r\n    return accepts[dataType] ? accepts[dataType] + (\"*\" !== dataType ? \", */*; q=0.01\" : \"\") : accepts[\"*\"]\r\n};\r\nvar getContentTypeHeader = function(options) {\r\n    var defaultContentType;\r\n    if (options.data && !options.upload && \"GET\" !== getMethod(options)) {\r\n        defaultContentType = \"application/x-www-form-urlencoded;charset=utf-8\"\r\n    }\r\n    return options.contentType || defaultContentType\r\n};\r\nvar getDataFromResponse = function(xhr) {\r\n    return xhr.responseType && \"text\" !== xhr.responseType || \"string\" !== typeof xhr.responseText ? xhr.response : xhr.responseText\r\n};\r\nvar postProcess = function(deferred, xhr, dataType) {\r\n    var data = getDataFromResponse(xhr);\r\n    switch (dataType) {\r\n        case \"jsonp\":\r\n            evalScript(data);\r\n            break;\r\n        case \"script\":\r\n            evalScript(data);\r\n            deferred.resolve(data, SUCCESS, xhr);\r\n            break;\r\n        case \"json\":\r\n            try {\r\n                deferred.resolve(JSON.parse(data), SUCCESS, xhr)\r\n            } catch (e) {\r\n                deferred.reject(xhr, PARSER_ERROR, e)\r\n            }\r\n            break;\r\n        default:\r\n            deferred.resolve(data, SUCCESS, xhr)\r\n    }\r\n};\r\nvar isCrossDomain = function(url) {\r\n    if (!windowUtils.hasWindow()) {\r\n        return true\r\n    }\r\n    var crossDomain = false;\r\n    var originAnchor = domAdapter.createElement(\"a\");\r\n    var urlAnchor = domAdapter.createElement(\"a\");\r\n    originAnchor.href = window.location.href;\r\n    try {\r\n        urlAnchor.href = url;\r\n        urlAnchor.href = urlAnchor.href;\r\n        crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !== urlAnchor.protocol + \"//\" + urlAnchor.host\r\n    } catch (e) {\r\n        crossDomain = true\r\n    }\r\n    return crossDomain\r\n};\r\nvar setHttpTimeout = function(timeout, xhr) {\r\n    return timeout && setTimeout(function() {\r\n        xhr.customStatus = TIMEOUT;\r\n        xhr.abort()\r\n    }, timeout)\r\n};\r\nvar getJsonpOptions = function(options) {\r\n    if (\"jsonp\" === options.dataType) {\r\n        var random = Math.random().toString().replace(/\\D/g, \"\");\r\n        var callbackName = options.jsonpCallback || \"dxCallback\" + Date.now() + \"_\" + random;\r\n        var callbackParameter = options.jsonp || \"callback\";\r\n        options.data = options.data || {};\r\n        options.data[callbackParameter] = callbackName;\r\n        return callbackName\r\n    }\r\n};\r\nvar getRequestOptions = function(options, headers) {\r\n    var params = options.data;\r\n    var paramsAlreadyString = \"string\" === typeof params;\r\n    var url = options.url || window.location.href;\r\n    if (!paramsAlreadyString && !options.cache) {\r\n        params = params || {};\r\n        params._ = Date.now()\r\n    }\r\n    if (params && !options.upload) {\r\n        if (!paramsAlreadyString) {\r\n            params = paramsConvert(params)\r\n        }\r\n        if (\"GET\" === getMethod(options)) {\r\n            if (\"\" !== params) {\r\n                url += (url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + params\r\n            }\r\n            params = null\r\n        } else {\r\n            if (headers[\"Content-Type\"] && headers[\"Content-Type\"].indexOf(\"application/x-www-form-urlencoded\") > -1) {\r\n                params = params.replace(/%20/g, \"+\")\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        url: url,\r\n        parameters: params\r\n    }\r\n};\r\nvar getMethod = function(options) {\r\n    return (options.method || \"GET\").toUpperCase()\r\n};\r\nvar getRequestHeaders = function(options) {\r\n    var headers = options.headers || {};\r\n    headers[\"Content-Type\"] = headers[\"Content-Type\"] || getContentTypeHeader(options);\r\n    headers.Accept = headers.Accept || getAcceptHeader(options);\r\n    if (!options.crossDomain && !headers[\"X-Requested-With\"]) {\r\n        headers[\"X-Requested-With\"] = \"XMLHttpRequest\"\r\n    }\r\n    return headers\r\n};\r\nvar sendRequest = function(options) {\r\n    var xhr = httpRequest.getXhr();\r\n    var d = new Deferred;\r\n    var result = d.promise();\r\n    var async = isDefined(options.async) ? options.async : true;\r\n    var dataType = options.dataType;\r\n    var timeout = options.timeout || 0;\r\n    var timeoutId;\r\n    options.crossDomain = isCrossDomain(options.url);\r\n    var needScriptEvaluation = \"jsonp\" === dataType || \"script\" === dataType;\r\n    if (void 0 === options.cache) {\r\n        options.cache = !needScriptEvaluation\r\n    }\r\n    var callbackName = getJsonpOptions(options);\r\n    var headers = getRequestHeaders(options);\r\n    var requestOptions = getRequestOptions(options, headers);\r\n    var url = requestOptions.url;\r\n    var parameters = requestOptions.parameters;\r\n    if (callbackName) {\r\n        window[callbackName] = function(data) {\r\n            d.resolve(data, SUCCESS, xhr)\r\n        }\r\n    }\r\n    if (options.crossDomain && needScriptEvaluation) {\r\n        var reject = function() {\r\n            d.reject(xhr, ERROR)\r\n        };\r\n        var resolve = function() {\r\n            if (\"jsonp\" === dataType) {\r\n                return\r\n            }\r\n            d.resolve(null, SUCCESS, xhr)\r\n        };\r\n        evalCrossDomainScript(url).then(resolve, reject);\r\n        return result\r\n    }\r\n    if (options.crossDomain && !(\"withCredentials\" in xhr)) {\r\n        d.reject(xhr, ERROR);\r\n        return result\r\n    }\r\n    xhr.open(getMethod(options), url, async, options.username, options.password);\r\n    if (async) {\r\n        xhr.timeout = timeout;\r\n        timeoutId = setHttpTimeout(timeout, xhr, d)\r\n    }\r\n    xhr.onreadystatechange = function(e) {\r\n        if (4 === xhr.readyState) {\r\n            clearTimeout(timeoutId);\r\n            if (isStatusSuccess(xhr.status)) {\r\n                if (hasContent(xhr.status)) {\r\n                    postProcess(d, xhr, dataType)\r\n                } else {\r\n                    d.resolve(null, NO_CONTENT, xhr)\r\n                }\r\n            } else {\r\n                d.reject(xhr, xhr.customStatus || ERROR)\r\n            }\r\n        }\r\n    };\r\n    if (options.upload) {\r\n        xhr.upload.onprogress = options.upload.onprogress;\r\n        xhr.upload.onloadstart = options.upload.onloadstart;\r\n        xhr.upload.onabort = options.upload.onabort\r\n    }\r\n    if (options.xhrFields) {\r\n        for (var field in options.xhrFields) {\r\n            xhr[field] = options.xhrFields[field]\r\n        }\r\n    }\r\n    if (\"arraybuffer\" === options.responseType) {\r\n        xhr.responseType = options.responseType\r\n    }\r\n    for (var name in headers) {\r\n        if (Object.prototype.hasOwnProperty.call(headers, name) && isDefined(headers[name])) {\r\n            xhr.setRequestHeader(name, headers[name])\r\n        }\r\n    }\r\n    if (options.beforeSend) {\r\n        options.beforeSend(xhr)\r\n    }\r\n    xhr.send(parameters);\r\n    result.abort = function() {\r\n        xhr.abort()\r\n    };\r\n    return result\r\n};\r\nmodule.exports = injector({\r\n    sendRequest: sendRequest\r\n});\r\n"]},"metadata":{},"sourceType":"module"}