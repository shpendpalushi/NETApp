{"ast":null,"code":"/**\r\n * DevExtreme (viz/series/points/symbol_point.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar extend = require(\"../../../core/utils/extend\").extend;\n\nvar each = require(\"../../../core/utils/iterator\").each;\n\nvar noop = require(\"../../../core/utils/common\").noop;\n\nvar windowUtils = require(\"../../../core/utils/window\");\n\nvar window = windowUtils.getWindow();\n\nvar labelModule = require(\"./label\");\n\nvar _extend = extend;\n\nvar _isDefined = require(\"../../../core/utils/type\").isDefined;\n\nvar _normalizeEnum = require(\"../../core/utils\").normalizeEnum;\n\nvar _math = Math;\nvar _round = _math.round;\nvar _floor = _math.floor;\nvar _ceil = _math.ceil;\nvar DEFAULT_IMAGE_WIDTH = 20;\nvar DEFAULT_IMAGE_HEIGHT = 20;\nvar LABEL_OFFSET = 10;\nvar CANVAS_POSITION_DEFAULT = \"canvas_position_default\";\n\nfunction getSquareMarkerCoords(radius) {\n  return [-radius, -radius, radius, -radius, radius, radius, -radius, radius, -radius, -radius];\n}\n\nfunction getPolygonMarkerCoords(radius) {\n  var r = _ceil(radius);\n\n  return [-r, 0, 0, -r, r, 0, 0, r, -r, 0];\n}\n\nfunction getCrossMarkerCoords(radius) {\n  var r = _ceil(radius);\n\n  var floorHalfRadius = _floor(r / 2);\n\n  var ceilHalfRadius = _ceil(r / 2);\n\n  return [-r, -floorHalfRadius, -floorHalfRadius, -r, 0, -ceilHalfRadius, floorHalfRadius, -r, r, -floorHalfRadius, ceilHalfRadius, 0, r, floorHalfRadius, floorHalfRadius, r, 0, ceilHalfRadius, -floorHalfRadius, r, -r, floorHalfRadius, -ceilHalfRadius, 0];\n}\n\nfunction getTriangleDownMarkerCoords(radius) {\n  return [-radius, -radius, radius, -radius, 0, radius, -radius, -radius];\n}\n\nfunction getTriangleUpMarkerCoords(radius) {\n  return [-radius, radius, radius, radius, 0, -radius, -radius, radius];\n}\n\nmodule.exports = {\n  deleteLabel: function deleteLabel() {\n    this._label.dispose();\n\n    this._label = null;\n  },\n  _hasGraphic: function _hasGraphic() {\n    return this.graphic;\n  },\n  clearVisibility: function clearVisibility() {\n    var that = this;\n    var graphic = that.graphic;\n\n    if (graphic && graphic.attr(\"visibility\")) {\n      graphic.attr({\n        visibility: null\n      });\n    }\n  },\n  isVisible: function isVisible() {\n    return this.inVisibleArea && this.series.isVisible();\n  },\n  setInvisibility: function setInvisibility() {\n    var that = this;\n    var graphic = that.graphic;\n\n    if (graphic && \"hidden\" !== graphic.attr(\"visibility\")) {\n      graphic.attr({\n        visibility: \"hidden\"\n      });\n    }\n\n    that._errorBar && that._errorBar.attr({\n      visibility: \"hidden\"\n    });\n\n    that._label.draw(false);\n  },\n  clearMarker: function clearMarker() {\n    var graphic = this.graphic;\n    graphic && graphic.attr(this._emptySettings);\n  },\n  _createLabel: function _createLabel() {\n    this._label = new labelModule.Label({\n      renderer: this.series._renderer,\n      labelsGroup: this.series._labelsGroup,\n      point: this\n    });\n  },\n  _updateLabelData: function _updateLabelData() {\n    this._label.setData(this._getLabelFormatObject());\n  },\n  _updateLabelOptions: function _updateLabelOptions() {\n    !this._label && this._createLabel();\n\n    this._label.setOptions(this._options.label);\n  },\n  _checkImage: function _checkImage(image) {\n    return _isDefined(image) && (\"string\" === typeof image || _isDefined(image.url));\n  },\n  _fillStyle: function _fillStyle() {\n    this._styles = this._options.styles;\n  },\n  _checkSymbol: function _checkSymbol(oldOptions, newOptions) {\n    var oldSymbol = oldOptions.symbol;\n    var newSymbol = newOptions.symbol;\n    var symbolChanged = \"circle\" === oldSymbol && \"circle\" !== newSymbol || \"circle\" !== oldSymbol && \"circle\" === newSymbol;\n\n    var imageChanged = this._checkImage(oldOptions.image) !== this._checkImage(newOptions.image);\n\n    return !!(symbolChanged || imageChanged);\n  },\n  _populatePointShape: function _populatePointShape(symbol, radius) {\n    switch (symbol) {\n      case \"square\":\n        return getSquareMarkerCoords(radius);\n\n      case \"polygon\":\n        return getPolygonMarkerCoords(radius);\n\n      case \"triangle\":\n      case \"triangleDown\":\n        return getTriangleDownMarkerCoords(radius);\n\n      case \"triangleUp\":\n        return getTriangleUpMarkerCoords(radius);\n\n      case \"cross\":\n        return getCrossMarkerCoords(radius);\n    }\n  },\n  hasCoords: function hasCoords() {\n    return null !== this.x && null !== this.y;\n  },\n  correctValue: function correctValue(correction) {\n    var that = this;\n    var axis = that.series.getValueAxis();\n\n    if (that.hasValue()) {\n      that.value = that.properValue = axis.validateUnit(that.initialValue.valueOf() + correction.valueOf());\n      that.minValue = axis.validateUnit(correction);\n    }\n  },\n  resetCorrection: function resetCorrection() {\n    this.value = this.properValue = this.initialValue;\n    this.minValue = CANVAS_POSITION_DEFAULT;\n  },\n  resetValue: function resetValue() {\n    var that = this;\n\n    if (that.hasValue()) {\n      that.value = that.properValue = that.initialValue = 0;\n      that.minValue = 0;\n\n      that._label.setDataField(\"value\", that.value);\n    }\n  },\n  _getTranslates: function _getTranslates(animationEnabled) {\n    var translateX = this.x;\n    var translateY = this.y;\n\n    if (animationEnabled) {\n      if (this._options.rotated) {\n        translateX = this.defaultX;\n      } else {\n        translateY = this.defaultY;\n      }\n    }\n\n    return {\n      x: translateX,\n      y: translateY\n    };\n  },\n  _createImageMarker: function _createImageMarker(renderer, settings, options) {\n    var width = options.width || DEFAULT_IMAGE_WIDTH;\n    var height = options.height || DEFAULT_IMAGE_HEIGHT;\n    return renderer.image(-_round(.5 * width), -_round(.5 * height), width, height, options.url ? options.url.toString() : options.toString(), \"center\").attr({\n      translateX: settings.translateX,\n      translateY: settings.translateY,\n      visibility: settings.visibility\n    });\n  },\n  _createSymbolMarker: function _createSymbolMarker(renderer, pointSettings) {\n    var marker;\n    var symbol = this._options.symbol;\n\n    if (\"circle\" === symbol) {\n      delete pointSettings.points;\n      marker = renderer.circle().attr(pointSettings);\n    } else {\n      if (\"square\" === symbol || \"polygon\" === symbol || \"triangle\" === symbol || \"triangleDown\" === symbol || \"triangleUp\" === symbol || \"cross\" === symbol) {\n        marker = renderer.path([], \"area\").attr(pointSettings).sharp();\n      }\n    }\n\n    return marker;\n  },\n  _createMarker: function _createMarker(renderer, group, image, settings) {\n    var that = this;\n    var marker = that._checkImage(image) ? that._createImageMarker(renderer, settings, image) : that._createSymbolMarker(renderer, settings);\n\n    if (marker) {\n      marker.data({\n        \"chart-data-point\": that\n      }).append(group);\n    }\n\n    return marker;\n  },\n  _getSymbolBBox: function _getSymbolBBox(x, y, r) {\n    return {\n      x: x - r,\n      y: y - r,\n      width: 2 * r,\n      height: 2 * r\n    };\n  },\n  _getImageBBox: function _getImageBBox(x, y) {\n    var image = this._options.image;\n    var width = image.width || DEFAULT_IMAGE_WIDTH;\n    var height = image.height || DEFAULT_IMAGE_HEIGHT;\n    return {\n      x: x - _round(width / 2),\n      y: y - _round(height / 2),\n      width: width,\n      height: height\n    };\n  },\n  _getGraphicBBox: function _getGraphicBBox() {\n    var that = this;\n    var options = that._options;\n    var x = that.x;\n    var y = that.y;\n    var bBox;\n\n    if (options.visible) {\n      bBox = that._checkImage(options.image) ? that._getImageBBox(x, y) : that._getSymbolBBox(x, y, options.styles.normal.r);\n    } else {\n      bBox = {\n        x: x,\n        y: y,\n        width: 0,\n        height: 0\n      };\n    }\n\n    return bBox;\n  },\n  hideInsideLabel: noop,\n  _getShiftLabelCoords: function _getShiftLabelCoords(label) {\n    var coord = this._addLabelAlignmentAndOffset(label, this._getLabelCoords(label));\n\n    return this._checkLabelPosition(label, coord);\n  },\n  _drawLabel: function _drawLabel() {\n    var that = this;\n\n    var customVisibility = that._getCustomLabelVisibility();\n\n    var label = that._label;\n    var isVisible = that._showForZeroValues() && that.hasValue() && false !== customVisibility && (that.series.getLabelVisibility() || customVisibility);\n    label.draw(!!isVisible);\n  },\n  correctLabelPosition: function correctLabelPosition(label) {\n    var that = this;\n\n    var coord = that._getShiftLabelCoords(label);\n\n    if (!that.hideInsideLabel(label, coord)) {\n      label.setFigureToDrawConnector(that._getLabelConnector(label.pointPosition));\n      label.shift(_round(coord.x), _round(coord.y));\n    }\n  },\n  _showForZeroValues: function _showForZeroValues() {\n    return true;\n  },\n  _getLabelConnector: function _getLabelConnector(pointPosition) {\n    var bBox = this._getGraphicBBox(pointPosition);\n\n    var w2 = bBox.width / 2;\n    var h2 = bBox.height / 2;\n    return {\n      x: bBox.x + w2,\n      y: bBox.y + h2,\n      r: this._options.visible ? Math.max(w2, h2) : 0\n    };\n  },\n  _getPositionFromLocation: function _getPositionFromLocation() {\n    return {\n      x: this.x,\n      y: this.y\n    };\n  },\n  _isPointInVisibleArea: function _isPointInVisibleArea(visibleArea, graphicBBox) {\n    return visibleArea.minX <= graphicBBox.x + graphicBBox.width && visibleArea.maxX >= graphicBBox.x && visibleArea.minY <= graphicBBox.y + graphicBBox.height && visibleArea.maxY >= graphicBBox.y;\n  },\n  _checkLabelPosition: function _checkLabelPosition(label, coord) {\n    var that = this;\n\n    var visibleArea = that._getVisibleArea();\n\n    var labelBBox = label.getBoundingRect();\n\n    var graphicBBox = that._getGraphicBBox(label.pointPosition);\n\n    var offset = LABEL_OFFSET;\n\n    if (that._isPointInVisibleArea(visibleArea, graphicBBox)) {\n      if (!that._options.rotated) {\n        if (visibleArea.minX > coord.x) {\n          coord.x = visibleArea.minX;\n        }\n\n        if (visibleArea.maxX < coord.x + labelBBox.width) {\n          coord.x = visibleArea.maxX - labelBBox.width;\n        }\n\n        if (visibleArea.minY > coord.y) {\n          coord.y = graphicBBox.y + graphicBBox.height + offset;\n        }\n\n        if (visibleArea.maxY < coord.y + labelBBox.height) {\n          coord.y = graphicBBox.y - labelBBox.height - offset;\n        }\n      } else {\n        if (visibleArea.minX > coord.x) {\n          coord.x = graphicBBox.x + graphicBBox.width + offset;\n        }\n\n        if (visibleArea.maxX < coord.x + labelBBox.width) {\n          coord.x = graphicBBox.x - offset - labelBBox.width;\n        }\n\n        if (visibleArea.minY > coord.y) {\n          coord.y = visibleArea.minY;\n        }\n\n        if (visibleArea.maxY < coord.y + labelBBox.height) {\n          coord.y = visibleArea.maxY - labelBBox.height;\n        }\n      }\n    }\n\n    return coord;\n  },\n  _addLabelAlignmentAndOffset: function _addLabelAlignmentAndOffset(label, coord) {\n    var labelBBox = label.getBoundingRect();\n    var labelOptions = label.getLayoutOptions();\n\n    if (!this._options.rotated) {\n      if (\"left\" === labelOptions.alignment) {\n        coord.x += labelBBox.width / 2;\n      } else {\n        if (\"right\" === labelOptions.alignment) {\n          coord.x -= labelBBox.width / 2;\n        }\n      }\n    }\n\n    coord.x += labelOptions.horizontalOffset;\n    coord.y += labelOptions.verticalOffset;\n    return coord;\n  },\n  _getLabelCoords: function _getLabelCoords(label) {\n    return this._getLabelCoordOfPosition(label, this._getLabelPosition(label.pointPosition));\n  },\n  _getLabelCoordOfPosition: function _getLabelCoordOfPosition(label, position) {\n    var that = this;\n    var labelBBox = label.getBoundingRect();\n\n    var graphicBBox = that._getGraphicBBox(label.pointPosition);\n\n    var offset = LABEL_OFFSET;\n    var centerY = graphicBBox.height / 2 - labelBBox.height / 2;\n    var centerX = graphicBBox.width / 2 - labelBBox.width / 2;\n    var x = graphicBBox.x;\n    var y = graphicBBox.y;\n\n    switch (position) {\n      case \"left\":\n        x -= labelBBox.width + offset;\n        y += centerY;\n        break;\n\n      case \"right\":\n        x += graphicBBox.width + offset;\n        y += centerY;\n        break;\n\n      case \"top\":\n        x += centerX;\n        y -= labelBBox.height + offset;\n        break;\n\n      case \"bottom\":\n        x += centerX;\n        y += graphicBBox.height + offset;\n        break;\n\n      case \"inside\":\n        x += centerX;\n        y += centerY;\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  },\n  _drawMarker: function _drawMarker(renderer, group, animationEnabled) {\n    var that = this;\n    var options = that._options;\n\n    var translates = that._getTranslates(animationEnabled);\n\n    var style = that._getStyle();\n\n    that.graphic = that._createMarker(renderer, group, options.image, _extend({\n      translateX: translates.x,\n      translateY: translates.y,\n      points: that._populatePointShape(options.symbol, style.r)\n    }, style));\n  },\n  _getErrorBarSettings: function _getErrorBarSettings() {\n    return {\n      visibility: \"visible\"\n    };\n  },\n  _getErrorBarBaseEdgeLength: function _getErrorBarBaseEdgeLength() {\n    return 2 * this.getPointRadius();\n  },\n  _drawErrorBar: function _drawErrorBar(renderer, group) {\n    if (!this._options.errorBars) {\n      return;\n    }\n\n    var that = this;\n    var options = that._options;\n    var errorBarOptions = options.errorBars;\n    var points = [];\n    var settings;\n    var pos = that._errorBarPos;\n    var high = that._highErrorCoord;\n    var low = that._lowErrorCoord;\n\n    var displayMode = _normalizeEnum(errorBarOptions.displayMode);\n\n    var isHighDisplayMode = \"high\" === displayMode;\n    var isLowDisplayMode = \"low\" === displayMode;\n    var highErrorOnly = (isHighDisplayMode || !_isDefined(low)) && _isDefined(high) && !isLowDisplayMode;\n    var lowErrorOnly = (isLowDisplayMode || !_isDefined(high)) && _isDefined(low) && !isHighDisplayMode;\n    var edgeLength = errorBarOptions.edgeLength;\n\n    if (edgeLength <= 1 && edgeLength > 0) {\n      edgeLength = this._getErrorBarBaseEdgeLength() * errorBarOptions.edgeLength;\n    }\n\n    edgeLength = _floor(parseInt(edgeLength) / 2);\n    highErrorOnly && (low = that._baseErrorBarPos);\n    lowErrorOnly && (high = that._baseErrorBarPos);\n\n    if (\"none\" !== displayMode && _isDefined(high) && _isDefined(low) && _isDefined(pos)) {\n      !lowErrorOnly && points.push([pos - edgeLength, high, pos + edgeLength, high]);\n      points.push([pos, high, pos, low]);\n      !highErrorOnly && points.push([pos + edgeLength, low, pos - edgeLength, low]);\n      options.rotated && each(points, function (_, p) {\n        p.reverse();\n      });\n      settings = that._getErrorBarSettings(errorBarOptions);\n\n      if (!that._errorBar) {\n        that._errorBar = renderer.path(points, \"line\").attr(settings).append(group);\n      } else {\n        settings.points = points;\n\n        that._errorBar.attr(settings);\n      }\n    } else {\n      that._errorBar && that._errorBar.attr({\n        visibility: \"hidden\"\n      });\n    }\n  },\n  getTooltipParams: function getTooltipParams() {\n    var that = this;\n    var graphic = that.graphic;\n    return {\n      x: that.x,\n      y: that.y,\n      offset: graphic ? graphic.getBBox().height / 2 : 0\n    };\n  },\n  setPercentValue: function setPercentValue(absTotal, total, leftHoleTotal, rightHoleTotal) {\n    var that = this;\n    var valuePercent = that.value / absTotal || 0;\n    var minValuePercent = that.minValue / absTotal || 0;\n    var percent = valuePercent - minValuePercent;\n\n    that._label.setDataField(\"percent\", percent);\n\n    that._label.setDataField(\"total\", total);\n\n    if (that.series.isFullStackedSeries() && that.hasValue()) {\n      if (that.leftHole) {\n        that.leftHole /= absTotal - leftHoleTotal;\n        that.minLeftHole /= absTotal - leftHoleTotal;\n      }\n\n      if (that.rightHole) {\n        that.rightHole /= absTotal - rightHoleTotal;\n        that.minRightHole /= absTotal - rightHoleTotal;\n      }\n\n      that.value = that.properValue = valuePercent;\n      that.minValue = !minValuePercent ? that.minValue : minValuePercent;\n    }\n  },\n  _storeTrackerR: function _storeTrackerR() {\n    var that = this;\n    var navigator = window.navigator;\n    var r = that._options.styles.normal.r;\n    var minTrackerSize;\n    minTrackerSize = windowUtils.hasProperty(\"ontouchstart\") || navigator.msPointerEnabled && navigator.msMaxTouchPoints || navigator.pointerEnabled && navigator.maxTouchPoints ? 20 : 6;\n    that._options.trackerR = r < minTrackerSize ? minTrackerSize : r;\n    return that._options.trackerR;\n  },\n  _translateErrorBars: function _translateErrorBars() {\n    var that = this;\n    var options = that._options;\n    var rotated = options.rotated;\n    var errorBars = options.errorBars;\n\n    var translator = that._getValTranslator();\n\n    if (!errorBars) {\n      return;\n    }\n\n    _isDefined(that.lowError) && (that._lowErrorCoord = translator.translate(that.lowError));\n    _isDefined(that.highError) && (that._highErrorCoord = translator.translate(that.highError));\n    that._errorBarPos = _floor(rotated ? that.vy : that.vx);\n    that._baseErrorBarPos = \"stdDeviation\" === errorBars.type ? that._lowErrorCoord + (that._highErrorCoord - that._lowErrorCoord) / 2 : rotated ? that.vx : that.vy;\n  },\n  _translate: function _translate() {\n    var that = this;\n\n    var valTranslator = that._getValTranslator();\n\n    var argTranslator = that._getArgTranslator();\n\n    if (that._options.rotated) {\n      that.vx = that.x = valTranslator.translate(that.value);\n      that.vy = that.y = argTranslator.translate(that.argument);\n      that.minX = valTranslator.translate(that.minValue);\n      that.defaultX = valTranslator.translate(CANVAS_POSITION_DEFAULT);\n    } else {\n      that.vy = that.y = valTranslator.translate(that.value);\n      that.vx = that.x = argTranslator.translate(that.argument);\n      that.minY = valTranslator.translate(that.minValue);\n      that.defaultY = valTranslator.translate(CANVAS_POSITION_DEFAULT);\n    }\n\n    that._translateErrorBars();\n\n    that._calculateVisibility(that.x, that.y);\n  },\n  _updateData: function _updateData(data) {\n    var that = this;\n    that.value = that.properValue = that.initialValue = that.originalValue = data.value;\n    that.minValue = that.initialMinValue = that.originalMinValue = _isDefined(data.minValue) ? data.minValue : CANVAS_POSITION_DEFAULT;\n  },\n  _getImageSettings: function _getImageSettings(image) {\n    return {\n      href: image.url || image.toString(),\n      width: image.width || DEFAULT_IMAGE_WIDTH,\n      height: image.height || DEFAULT_IMAGE_HEIGHT\n    };\n  },\n  getCrosshairData: function getCrosshairData() {\n    var that = this;\n    var r = that._options.rotated;\n    var value = that.properValue;\n    var argument = that.argument;\n    return {\n      x: that.vx,\n      y: that.vy,\n      xValue: r ? value : argument,\n      yValue: r ? argument : value,\n      axis: that.series.axis\n    };\n  },\n  getPointRadius: function getPointRadius() {\n    var style = this._getStyle();\n\n    var options = this._options;\n    var r = style.r;\n    var extraSpace;\n    var symbol = options.symbol;\n    var isSquare = \"square\" === symbol;\n    var isTriangle = \"triangle\" === symbol || \"triangleDown\" === symbol || \"triangleUp\" === symbol;\n\n    if (options.visible && !options.image && r) {\n      extraSpace = style[\"stroke-width\"] / 2;\n      return (isSquare || isTriangle ? 1.4 * r : r) + extraSpace;\n    }\n\n    return 0;\n  },\n  _updateMarker: function _updateMarker(animationEnabled, style) {\n    var that = this;\n    var options = that._options;\n    var settings;\n    var image = options.image;\n    var visibility = !that.isVisible() ? {\n      visibility: \"hidden\"\n    } : {};\n\n    if (that._checkImage(image)) {\n      settings = _extend({}, {\n        visibility: style.visibility\n      }, visibility, that._getImageSettings(image));\n    } else {\n      settings = _extend({}, style, visibility, {\n        points: that._populatePointShape(options.symbol, style.r)\n      });\n    }\n\n    if (!animationEnabled) {\n      settings.translateX = that.x;\n      settings.translateY = that.y;\n    }\n\n    that.graphic.attr(settings).sharp();\n  },\n  _getLabelFormatObject: function _getLabelFormatObject() {\n    var that = this;\n    return {\n      argument: that.initialArgument,\n      value: that.initialValue,\n      originalArgument: that.originalArgument,\n      originalValue: that.originalValue,\n      seriesName: that.series.name,\n      lowErrorValue: that.lowError,\n      highErrorValue: that.highError,\n      point: that\n    };\n  },\n  _getLabelPosition: function _getLabelPosition() {\n    var rotated = this._options.rotated;\n\n    if (this.initialValue > 0) {\n      return rotated ? \"right\" : \"top\";\n    } else {\n      return rotated ? \"left\" : \"bottom\";\n    }\n  },\n  _getFormatObject: function _getFormatObject(tooltip) {\n    var that = this;\n\n    var labelFormatObject = that._label.getData();\n\n    return _extend({}, labelFormatObject, {\n      argumentText: tooltip.formatValue(that.initialArgument, \"argument\"),\n      valueText: tooltip.formatValue(that.initialValue)\n    }, _isDefined(labelFormatObject.percent) ? {\n      percentText: tooltip.formatValue(labelFormatObject.percent, \"percent\")\n    } : {}, _isDefined(labelFormatObject.total) ? {\n      totalText: tooltip.formatValue(labelFormatObject.total)\n    } : {});\n  },\n  getMarkerVisibility: function getMarkerVisibility() {\n    return this._options.visible;\n  },\n  coordsIn: function coordsIn(x, y) {\n    var trackerRadius = this._storeTrackerR();\n\n    return x >= this.x - trackerRadius && x <= this.x + trackerRadius && y >= this.y - trackerRadius && y <= this.y + trackerRadius;\n  },\n  getMinValue: function getMinValue(noErrorBar) {\n    var errorBarOptions = this._options.errorBars;\n\n    if (errorBarOptions && !noErrorBar) {\n      var displayMode = errorBarOptions.displayMode;\n      var lowValue = \"high\" !== displayMode && _isDefined(this.lowError) ? this.lowError : this.value;\n      var highValue = \"low\" !== displayMode && _isDefined(this.highError) ? this.highError : this.value;\n      return lowValue < highValue ? lowValue : highValue;\n    } else {\n      return this.value;\n    }\n  },\n  getMaxValue: function getMaxValue(noErrorBar) {\n    var errorBarOptions = this._options.errorBars;\n\n    if (errorBarOptions && !noErrorBar) {\n      var displayMode = errorBarOptions.displayMode;\n      var lowValue = \"high\" !== displayMode && _isDefined(this.lowError) ? this.lowError : this.value;\n      var highValue = \"low\" !== displayMode && _isDefined(this.highError) ? this.highError : this.value;\n      return lowValue > highValue ? lowValue : highValue;\n    } else {\n      return this.value;\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/series/points/symbol_point.js"],"names":["extend","require","each","noop","windowUtils","window","labelModule","_extend","_isDefined","_normalizeEnum","_math","_round","_floor","_ceil","DEFAULT_IMAGE_WIDTH","DEFAULT_IMAGE_HEIGHT","LABEL_OFFSET","CANVAS_POSITION_DEFAULT","r","floorHalfRadius","ceilHalfRadius","module","deleteLabel","_hasGraphic","clearVisibility","that","graphic","visibility","isVisible","setInvisibility","clearMarker","_createLabel","renderer","labelsGroup","point","_updateLabelData","_updateLabelOptions","_checkImage","image","_fillStyle","_checkSymbol","oldSymbol","oldOptions","newSymbol","newOptions","symbolChanged","imageChanged","_populatePointShape","getSquareMarkerCoords","getPolygonMarkerCoords","getTriangleDownMarkerCoords","getTriangleUpMarkerCoords","getCrossMarkerCoords","hasCoords","correctValue","axis","correction","resetCorrection","resetValue","_getTranslates","translateX","translateY","x","y","_createImageMarker","width","options","height","settings","_createSymbolMarker","symbol","pointSettings","marker","_createMarker","_getSymbolBBox","_getImageBBox","_getGraphicBBox","bBox","hideInsideLabel","_getShiftLabelCoords","coord","_drawLabel","customVisibility","label","correctLabelPosition","_showForZeroValues","_getLabelConnector","w2","h2","Math","_getPositionFromLocation","_isPointInVisibleArea","visibleArea","graphicBBox","_checkLabelPosition","labelBBox","offset","_addLabelAlignmentAndOffset","labelOptions","_getLabelCoords","_getLabelCoordOfPosition","centerY","centerX","_drawMarker","translates","style","points","_getErrorBarSettings","_getErrorBarBaseEdgeLength","_drawErrorBar","errorBarOptions","pos","high","low","displayMode","isHighDisplayMode","isLowDisplayMode","highErrorOnly","lowErrorOnly","edgeLength","parseInt","p","getTooltipParams","setPercentValue","valuePercent","minValuePercent","percent","absTotal","_storeTrackerR","navigator","minTrackerSize","_translateErrorBars","rotated","errorBars","translator","_translate","valTranslator","argTranslator","_updateData","data","_getImageSettings","href","getCrosshairData","value","argument","xValue","yValue","getPointRadius","isSquare","isTriangle","extraSpace","_updateMarker","_getLabelFormatObject","originalArgument","originalValue","seriesName","lowErrorValue","highErrorValue","_getLabelPosition","_getFormatObject","labelFormatObject","argumentText","tooltip","valueText","percentText","totalText","getMarkerVisibility","coordsIn","trackerRadius","getMinValue","lowValue","highValue","getMaxValue"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/series/points/symbol_point.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar extend = require(\"../../../core/utils/extend\").extend;\r\nvar each = require(\"../../../core/utils/iterator\").each;\r\nvar noop = require(\"../../../core/utils/common\").noop;\r\nvar windowUtils = require(\"../../../core/utils/window\");\r\nvar window = windowUtils.getWindow();\r\nvar labelModule = require(\"./label\");\r\nvar _extend = extend;\r\nvar _isDefined = require(\"../../../core/utils/type\").isDefined;\r\nvar _normalizeEnum = require(\"../../core/utils\").normalizeEnum;\r\nvar _math = Math;\r\nvar _round = _math.round;\r\nvar _floor = _math.floor;\r\nvar _ceil = _math.ceil;\r\nvar DEFAULT_IMAGE_WIDTH = 20;\r\nvar DEFAULT_IMAGE_HEIGHT = 20;\r\nvar LABEL_OFFSET = 10;\r\nvar CANVAS_POSITION_DEFAULT = \"canvas_position_default\";\r\n\r\nfunction getSquareMarkerCoords(radius) {\r\n    return [-radius, -radius, radius, -radius, radius, radius, -radius, radius, -radius, -radius]\r\n}\r\n\r\nfunction getPolygonMarkerCoords(radius) {\r\n    var r = _ceil(radius);\r\n    return [-r, 0, 0, -r, r, 0, 0, r, -r, 0]\r\n}\r\n\r\nfunction getCrossMarkerCoords(radius) {\r\n    var r = _ceil(radius);\r\n    var floorHalfRadius = _floor(r / 2);\r\n    var ceilHalfRadius = _ceil(r / 2);\r\n    return [-r, -floorHalfRadius, -floorHalfRadius, -r, 0, -ceilHalfRadius, floorHalfRadius, -r, r, -floorHalfRadius, ceilHalfRadius, 0, r, floorHalfRadius, floorHalfRadius, r, 0, ceilHalfRadius, -floorHalfRadius, r, -r, floorHalfRadius, -ceilHalfRadius, 0]\r\n}\r\n\r\nfunction getTriangleDownMarkerCoords(radius) {\r\n    return [-radius, -radius, radius, -radius, 0, radius, -radius, -radius]\r\n}\r\n\r\nfunction getTriangleUpMarkerCoords(radius) {\r\n    return [-radius, radius, radius, radius, 0, -radius, -radius, radius]\r\n}\r\nmodule.exports = {\r\n    deleteLabel: function() {\r\n        this._label.dispose();\r\n        this._label = null\r\n    },\r\n    _hasGraphic: function() {\r\n        return this.graphic\r\n    },\r\n    clearVisibility: function() {\r\n        var that = this;\r\n        var graphic = that.graphic;\r\n        if (graphic && graphic.attr(\"visibility\")) {\r\n            graphic.attr({\r\n                visibility: null\r\n            })\r\n        }\r\n    },\r\n    isVisible: function() {\r\n        return this.inVisibleArea && this.series.isVisible()\r\n    },\r\n    setInvisibility: function() {\r\n        var that = this;\r\n        var graphic = that.graphic;\r\n        if (graphic && \"hidden\" !== graphic.attr(\"visibility\")) {\r\n            graphic.attr({\r\n                visibility: \"hidden\"\r\n            })\r\n        }\r\n        that._errorBar && that._errorBar.attr({\r\n            visibility: \"hidden\"\r\n        });\r\n        that._label.draw(false)\r\n    },\r\n    clearMarker: function() {\r\n        var graphic = this.graphic;\r\n        graphic && graphic.attr(this._emptySettings)\r\n    },\r\n    _createLabel: function() {\r\n        this._label = new labelModule.Label({\r\n            renderer: this.series._renderer,\r\n            labelsGroup: this.series._labelsGroup,\r\n            point: this\r\n        })\r\n    },\r\n    _updateLabelData: function() {\r\n        this._label.setData(this._getLabelFormatObject())\r\n    },\r\n    _updateLabelOptions: function() {\r\n        !this._label && this._createLabel();\r\n        this._label.setOptions(this._options.label)\r\n    },\r\n    _checkImage: function(image) {\r\n        return _isDefined(image) && (\"string\" === typeof image || _isDefined(image.url))\r\n    },\r\n    _fillStyle: function() {\r\n        this._styles = this._options.styles\r\n    },\r\n    _checkSymbol: function(oldOptions, newOptions) {\r\n        var oldSymbol = oldOptions.symbol;\r\n        var newSymbol = newOptions.symbol;\r\n        var symbolChanged = \"circle\" === oldSymbol && \"circle\" !== newSymbol || \"circle\" !== oldSymbol && \"circle\" === newSymbol;\r\n        var imageChanged = this._checkImage(oldOptions.image) !== this._checkImage(newOptions.image);\r\n        return !!(symbolChanged || imageChanged)\r\n    },\r\n    _populatePointShape: function(symbol, radius) {\r\n        switch (symbol) {\r\n            case \"square\":\r\n                return getSquareMarkerCoords(radius);\r\n            case \"polygon\":\r\n                return getPolygonMarkerCoords(radius);\r\n            case \"triangle\":\r\n            case \"triangleDown\":\r\n                return getTriangleDownMarkerCoords(radius);\r\n            case \"triangleUp\":\r\n                return getTriangleUpMarkerCoords(radius);\r\n            case \"cross\":\r\n                return getCrossMarkerCoords(radius)\r\n        }\r\n    },\r\n    hasCoords: function() {\r\n        return null !== this.x && null !== this.y\r\n    },\r\n    correctValue: function(correction) {\r\n        var that = this;\r\n        var axis = that.series.getValueAxis();\r\n        if (that.hasValue()) {\r\n            that.value = that.properValue = axis.validateUnit(that.initialValue.valueOf() + correction.valueOf());\r\n            that.minValue = axis.validateUnit(correction)\r\n        }\r\n    },\r\n    resetCorrection: function() {\r\n        this.value = this.properValue = this.initialValue;\r\n        this.minValue = CANVAS_POSITION_DEFAULT\r\n    },\r\n    resetValue: function() {\r\n        var that = this;\r\n        if (that.hasValue()) {\r\n            that.value = that.properValue = that.initialValue = 0;\r\n            that.minValue = 0;\r\n            that._label.setDataField(\"value\", that.value)\r\n        }\r\n    },\r\n    _getTranslates: function(animationEnabled) {\r\n        var translateX = this.x;\r\n        var translateY = this.y;\r\n        if (animationEnabled) {\r\n            if (this._options.rotated) {\r\n                translateX = this.defaultX\r\n            } else {\r\n                translateY = this.defaultY\r\n            }\r\n        }\r\n        return {\r\n            x: translateX,\r\n            y: translateY\r\n        }\r\n    },\r\n    _createImageMarker: function(renderer, settings, options) {\r\n        var width = options.width || DEFAULT_IMAGE_WIDTH;\r\n        var height = options.height || DEFAULT_IMAGE_HEIGHT;\r\n        return renderer.image(-_round(.5 * width), -_round(.5 * height), width, height, options.url ? options.url.toString() : options.toString(), \"center\").attr({\r\n            translateX: settings.translateX,\r\n            translateY: settings.translateY,\r\n            visibility: settings.visibility\r\n        })\r\n    },\r\n    _createSymbolMarker: function(renderer, pointSettings) {\r\n        var marker;\r\n        var symbol = this._options.symbol;\r\n        if (\"circle\" === symbol) {\r\n            delete pointSettings.points;\r\n            marker = renderer.circle().attr(pointSettings)\r\n        } else {\r\n            if (\"square\" === symbol || \"polygon\" === symbol || \"triangle\" === symbol || \"triangleDown\" === symbol || \"triangleUp\" === symbol || \"cross\" === symbol) {\r\n                marker = renderer.path([], \"area\").attr(pointSettings).sharp()\r\n            }\r\n        }\r\n        return marker\r\n    },\r\n    _createMarker: function(renderer, group, image, settings) {\r\n        var that = this;\r\n        var marker = that._checkImage(image) ? that._createImageMarker(renderer, settings, image) : that._createSymbolMarker(renderer, settings);\r\n        if (marker) {\r\n            marker.data({\r\n                \"chart-data-point\": that\r\n            }).append(group)\r\n        }\r\n        return marker\r\n    },\r\n    _getSymbolBBox: function(x, y, r) {\r\n        return {\r\n            x: x - r,\r\n            y: y - r,\r\n            width: 2 * r,\r\n            height: 2 * r\r\n        }\r\n    },\r\n    _getImageBBox: function(x, y) {\r\n        var image = this._options.image;\r\n        var width = image.width || DEFAULT_IMAGE_WIDTH;\r\n        var height = image.height || DEFAULT_IMAGE_HEIGHT;\r\n        return {\r\n            x: x - _round(width / 2),\r\n            y: y - _round(height / 2),\r\n            width: width,\r\n            height: height\r\n        }\r\n    },\r\n    _getGraphicBBox: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var x = that.x;\r\n        var y = that.y;\r\n        var bBox;\r\n        if (options.visible) {\r\n            bBox = that._checkImage(options.image) ? that._getImageBBox(x, y) : that._getSymbolBBox(x, y, options.styles.normal.r)\r\n        } else {\r\n            bBox = {\r\n                x: x,\r\n                y: y,\r\n                width: 0,\r\n                height: 0\r\n            }\r\n        }\r\n        return bBox\r\n    },\r\n    hideInsideLabel: noop,\r\n    _getShiftLabelCoords: function(label) {\r\n        var coord = this._addLabelAlignmentAndOffset(label, this._getLabelCoords(label));\r\n        return this._checkLabelPosition(label, coord)\r\n    },\r\n    _drawLabel: function() {\r\n        var that = this;\r\n        var customVisibility = that._getCustomLabelVisibility();\r\n        var label = that._label;\r\n        var isVisible = that._showForZeroValues() && that.hasValue() && false !== customVisibility && (that.series.getLabelVisibility() || customVisibility);\r\n        label.draw(!!isVisible)\r\n    },\r\n    correctLabelPosition: function(label) {\r\n        var that = this;\r\n        var coord = that._getShiftLabelCoords(label);\r\n        if (!that.hideInsideLabel(label, coord)) {\r\n            label.setFigureToDrawConnector(that._getLabelConnector(label.pointPosition));\r\n            label.shift(_round(coord.x), _round(coord.y))\r\n        }\r\n    },\r\n    _showForZeroValues: function() {\r\n        return true\r\n    },\r\n    _getLabelConnector: function(pointPosition) {\r\n        var bBox = this._getGraphicBBox(pointPosition);\r\n        var w2 = bBox.width / 2;\r\n        var h2 = bBox.height / 2;\r\n        return {\r\n            x: bBox.x + w2,\r\n            y: bBox.y + h2,\r\n            r: this._options.visible ? Math.max(w2, h2) : 0\r\n        }\r\n    },\r\n    _getPositionFromLocation: function() {\r\n        return {\r\n            x: this.x,\r\n            y: this.y\r\n        }\r\n    },\r\n    _isPointInVisibleArea: function(visibleArea, graphicBBox) {\r\n        return visibleArea.minX <= graphicBBox.x + graphicBBox.width && visibleArea.maxX >= graphicBBox.x && visibleArea.minY <= graphicBBox.y + graphicBBox.height && visibleArea.maxY >= graphicBBox.y\r\n    },\r\n    _checkLabelPosition: function(label, coord) {\r\n        var that = this;\r\n        var visibleArea = that._getVisibleArea();\r\n        var labelBBox = label.getBoundingRect();\r\n        var graphicBBox = that._getGraphicBBox(label.pointPosition);\r\n        var offset = LABEL_OFFSET;\r\n        if (that._isPointInVisibleArea(visibleArea, graphicBBox)) {\r\n            if (!that._options.rotated) {\r\n                if (visibleArea.minX > coord.x) {\r\n                    coord.x = visibleArea.minX\r\n                }\r\n                if (visibleArea.maxX < coord.x + labelBBox.width) {\r\n                    coord.x = visibleArea.maxX - labelBBox.width\r\n                }\r\n                if (visibleArea.minY > coord.y) {\r\n                    coord.y = graphicBBox.y + graphicBBox.height + offset\r\n                }\r\n                if (visibleArea.maxY < coord.y + labelBBox.height) {\r\n                    coord.y = graphicBBox.y - labelBBox.height - offset\r\n                }\r\n            } else {\r\n                if (visibleArea.minX > coord.x) {\r\n                    coord.x = graphicBBox.x + graphicBBox.width + offset\r\n                }\r\n                if (visibleArea.maxX < coord.x + labelBBox.width) {\r\n                    coord.x = graphicBBox.x - offset - labelBBox.width\r\n                }\r\n                if (visibleArea.minY > coord.y) {\r\n                    coord.y = visibleArea.minY\r\n                }\r\n                if (visibleArea.maxY < coord.y + labelBBox.height) {\r\n                    coord.y = visibleArea.maxY - labelBBox.height\r\n                }\r\n            }\r\n        }\r\n        return coord\r\n    },\r\n    _addLabelAlignmentAndOffset: function(label, coord) {\r\n        var labelBBox = label.getBoundingRect();\r\n        var labelOptions = label.getLayoutOptions();\r\n        if (!this._options.rotated) {\r\n            if (\"left\" === labelOptions.alignment) {\r\n                coord.x += labelBBox.width / 2\r\n            } else {\r\n                if (\"right\" === labelOptions.alignment) {\r\n                    coord.x -= labelBBox.width / 2\r\n                }\r\n            }\r\n        }\r\n        coord.x += labelOptions.horizontalOffset;\r\n        coord.y += labelOptions.verticalOffset;\r\n        return coord\r\n    },\r\n    _getLabelCoords: function(label) {\r\n        return this._getLabelCoordOfPosition(label, this._getLabelPosition(label.pointPosition))\r\n    },\r\n    _getLabelCoordOfPosition: function(label, position) {\r\n        var that = this;\r\n        var labelBBox = label.getBoundingRect();\r\n        var graphicBBox = that._getGraphicBBox(label.pointPosition);\r\n        var offset = LABEL_OFFSET;\r\n        var centerY = graphicBBox.height / 2 - labelBBox.height / 2;\r\n        var centerX = graphicBBox.width / 2 - labelBBox.width / 2;\r\n        var x = graphicBBox.x;\r\n        var y = graphicBBox.y;\r\n        switch (position) {\r\n            case \"left\":\r\n                x -= labelBBox.width + offset;\r\n                y += centerY;\r\n                break;\r\n            case \"right\":\r\n                x += graphicBBox.width + offset;\r\n                y += centerY;\r\n                break;\r\n            case \"top\":\r\n                x += centerX;\r\n                y -= labelBBox.height + offset;\r\n                break;\r\n            case \"bottom\":\r\n                x += centerX;\r\n                y += graphicBBox.height + offset;\r\n                break;\r\n            case \"inside\":\r\n                x += centerX;\r\n                y += centerY\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    },\r\n    _drawMarker: function(renderer, group, animationEnabled) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var translates = that._getTranslates(animationEnabled);\r\n        var style = that._getStyle();\r\n        that.graphic = that._createMarker(renderer, group, options.image, _extend({\r\n            translateX: translates.x,\r\n            translateY: translates.y,\r\n            points: that._populatePointShape(options.symbol, style.r)\r\n        }, style))\r\n    },\r\n    _getErrorBarSettings: function() {\r\n        return {\r\n            visibility: \"visible\"\r\n        }\r\n    },\r\n    _getErrorBarBaseEdgeLength: function() {\r\n        return 2 * this.getPointRadius()\r\n    },\r\n    _drawErrorBar: function(renderer, group) {\r\n        if (!this._options.errorBars) {\r\n            return\r\n        }\r\n        var that = this;\r\n        var options = that._options;\r\n        var errorBarOptions = options.errorBars;\r\n        var points = [];\r\n        var settings;\r\n        var pos = that._errorBarPos;\r\n        var high = that._highErrorCoord;\r\n        var low = that._lowErrorCoord;\r\n        var displayMode = _normalizeEnum(errorBarOptions.displayMode);\r\n        var isHighDisplayMode = \"high\" === displayMode;\r\n        var isLowDisplayMode = \"low\" === displayMode;\r\n        var highErrorOnly = (isHighDisplayMode || !_isDefined(low)) && _isDefined(high) && !isLowDisplayMode;\r\n        var lowErrorOnly = (isLowDisplayMode || !_isDefined(high)) && _isDefined(low) && !isHighDisplayMode;\r\n        var edgeLength = errorBarOptions.edgeLength;\r\n        if (edgeLength <= 1 && edgeLength > 0) {\r\n            edgeLength = this._getErrorBarBaseEdgeLength() * errorBarOptions.edgeLength\r\n        }\r\n        edgeLength = _floor(parseInt(edgeLength) / 2);\r\n        highErrorOnly && (low = that._baseErrorBarPos);\r\n        lowErrorOnly && (high = that._baseErrorBarPos);\r\n        if (\"none\" !== displayMode && _isDefined(high) && _isDefined(low) && _isDefined(pos)) {\r\n            !lowErrorOnly && points.push([pos - edgeLength, high, pos + edgeLength, high]);\r\n            points.push([pos, high, pos, low]);\r\n            !highErrorOnly && points.push([pos + edgeLength, low, pos - edgeLength, low]);\r\n            options.rotated && each(points, function(_, p) {\r\n                p.reverse()\r\n            });\r\n            settings = that._getErrorBarSettings(errorBarOptions);\r\n            if (!that._errorBar) {\r\n                that._errorBar = renderer.path(points, \"line\").attr(settings).append(group)\r\n            } else {\r\n                settings.points = points;\r\n                that._errorBar.attr(settings)\r\n            }\r\n        } else {\r\n            that._errorBar && that._errorBar.attr({\r\n                visibility: \"hidden\"\r\n            })\r\n        }\r\n    },\r\n    getTooltipParams: function() {\r\n        var that = this;\r\n        var graphic = that.graphic;\r\n        return {\r\n            x: that.x,\r\n            y: that.y,\r\n            offset: graphic ? graphic.getBBox().height / 2 : 0\r\n        }\r\n    },\r\n    setPercentValue: function(absTotal, total, leftHoleTotal, rightHoleTotal) {\r\n        var that = this;\r\n        var valuePercent = that.value / absTotal || 0;\r\n        var minValuePercent = that.minValue / absTotal || 0;\r\n        var percent = valuePercent - minValuePercent;\r\n        that._label.setDataField(\"percent\", percent);\r\n        that._label.setDataField(\"total\", total);\r\n        if (that.series.isFullStackedSeries() && that.hasValue()) {\r\n            if (that.leftHole) {\r\n                that.leftHole /= absTotal - leftHoleTotal;\r\n                that.minLeftHole /= absTotal - leftHoleTotal\r\n            }\r\n            if (that.rightHole) {\r\n                that.rightHole /= absTotal - rightHoleTotal;\r\n                that.minRightHole /= absTotal - rightHoleTotal\r\n            }\r\n            that.value = that.properValue = valuePercent;\r\n            that.minValue = !minValuePercent ? that.minValue : minValuePercent\r\n        }\r\n    },\r\n    _storeTrackerR: function() {\r\n        var that = this;\r\n        var navigator = window.navigator;\r\n        var r = that._options.styles.normal.r;\r\n        var minTrackerSize;\r\n        minTrackerSize = windowUtils.hasProperty(\"ontouchstart\") || navigator.msPointerEnabled && navigator.msMaxTouchPoints || navigator.pointerEnabled && navigator.maxTouchPoints ? 20 : 6;\r\n        that._options.trackerR = r < minTrackerSize ? minTrackerSize : r;\r\n        return that._options.trackerR\r\n    },\r\n    _translateErrorBars: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var rotated = options.rotated;\r\n        var errorBars = options.errorBars;\r\n        var translator = that._getValTranslator();\r\n        if (!errorBars) {\r\n            return\r\n        }\r\n        _isDefined(that.lowError) && (that._lowErrorCoord = translator.translate(that.lowError));\r\n        _isDefined(that.highError) && (that._highErrorCoord = translator.translate(that.highError));\r\n        that._errorBarPos = _floor(rotated ? that.vy : that.vx);\r\n        that._baseErrorBarPos = \"stdDeviation\" === errorBars.type ? that._lowErrorCoord + (that._highErrorCoord - that._lowErrorCoord) / 2 : rotated ? that.vx : that.vy\r\n    },\r\n    _translate: function() {\r\n        var that = this;\r\n        var valTranslator = that._getValTranslator();\r\n        var argTranslator = that._getArgTranslator();\r\n        if (that._options.rotated) {\r\n            that.vx = that.x = valTranslator.translate(that.value);\r\n            that.vy = that.y = argTranslator.translate(that.argument);\r\n            that.minX = valTranslator.translate(that.minValue);\r\n            that.defaultX = valTranslator.translate(CANVAS_POSITION_DEFAULT)\r\n        } else {\r\n            that.vy = that.y = valTranslator.translate(that.value);\r\n            that.vx = that.x = argTranslator.translate(that.argument);\r\n            that.minY = valTranslator.translate(that.minValue);\r\n            that.defaultY = valTranslator.translate(CANVAS_POSITION_DEFAULT)\r\n        }\r\n        that._translateErrorBars();\r\n        that._calculateVisibility(that.x, that.y)\r\n    },\r\n    _updateData: function(data) {\r\n        var that = this;\r\n        that.value = that.properValue = that.initialValue = that.originalValue = data.value;\r\n        that.minValue = that.initialMinValue = that.originalMinValue = _isDefined(data.minValue) ? data.minValue : CANVAS_POSITION_DEFAULT\r\n    },\r\n    _getImageSettings: function(image) {\r\n        return {\r\n            href: image.url || image.toString(),\r\n            width: image.width || DEFAULT_IMAGE_WIDTH,\r\n            height: image.height || DEFAULT_IMAGE_HEIGHT\r\n        }\r\n    },\r\n    getCrosshairData: function() {\r\n        var that = this;\r\n        var r = that._options.rotated;\r\n        var value = that.properValue;\r\n        var argument = that.argument;\r\n        return {\r\n            x: that.vx,\r\n            y: that.vy,\r\n            xValue: r ? value : argument,\r\n            yValue: r ? argument : value,\r\n            axis: that.series.axis\r\n        }\r\n    },\r\n    getPointRadius: function() {\r\n        var style = this._getStyle();\r\n        var options = this._options;\r\n        var r = style.r;\r\n        var extraSpace;\r\n        var symbol = options.symbol;\r\n        var isSquare = \"square\" === symbol;\r\n        var isTriangle = \"triangle\" === symbol || \"triangleDown\" === symbol || \"triangleUp\" === symbol;\r\n        if (options.visible && !options.image && r) {\r\n            extraSpace = style[\"stroke-width\"] / 2;\r\n            return (isSquare || isTriangle ? 1.4 * r : r) + extraSpace\r\n        }\r\n        return 0\r\n    },\r\n    _updateMarker: function(animationEnabled, style) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var settings;\r\n        var image = options.image;\r\n        var visibility = !that.isVisible() ? {\r\n            visibility: \"hidden\"\r\n        } : {};\r\n        if (that._checkImage(image)) {\r\n            settings = _extend({}, {\r\n                visibility: style.visibility\r\n            }, visibility, that._getImageSettings(image))\r\n        } else {\r\n            settings = _extend({}, style, visibility, {\r\n                points: that._populatePointShape(options.symbol, style.r)\r\n            })\r\n        }\r\n        if (!animationEnabled) {\r\n            settings.translateX = that.x;\r\n            settings.translateY = that.y\r\n        }\r\n        that.graphic.attr(settings).sharp()\r\n    },\r\n    _getLabelFormatObject: function() {\r\n        var that = this;\r\n        return {\r\n            argument: that.initialArgument,\r\n            value: that.initialValue,\r\n            originalArgument: that.originalArgument,\r\n            originalValue: that.originalValue,\r\n            seriesName: that.series.name,\r\n            lowErrorValue: that.lowError,\r\n            highErrorValue: that.highError,\r\n            point: that\r\n        }\r\n    },\r\n    _getLabelPosition: function() {\r\n        var rotated = this._options.rotated;\r\n        if (this.initialValue > 0) {\r\n            return rotated ? \"right\" : \"top\"\r\n        } else {\r\n            return rotated ? \"left\" : \"bottom\"\r\n        }\r\n    },\r\n    _getFormatObject: function(tooltip) {\r\n        var that = this;\r\n        var labelFormatObject = that._label.getData();\r\n        return _extend({}, labelFormatObject, {\r\n            argumentText: tooltip.formatValue(that.initialArgument, \"argument\"),\r\n            valueText: tooltip.formatValue(that.initialValue)\r\n        }, _isDefined(labelFormatObject.percent) ? {\r\n            percentText: tooltip.formatValue(labelFormatObject.percent, \"percent\")\r\n        } : {}, _isDefined(labelFormatObject.total) ? {\r\n            totalText: tooltip.formatValue(labelFormatObject.total)\r\n        } : {})\r\n    },\r\n    getMarkerVisibility: function() {\r\n        return this._options.visible\r\n    },\r\n    coordsIn: function(x, y) {\r\n        var trackerRadius = this._storeTrackerR();\r\n        return x >= this.x - trackerRadius && x <= this.x + trackerRadius && y >= this.y - trackerRadius && y <= this.y + trackerRadius\r\n    },\r\n    getMinValue: function(noErrorBar) {\r\n        var errorBarOptions = this._options.errorBars;\r\n        if (errorBarOptions && !noErrorBar) {\r\n            var displayMode = errorBarOptions.displayMode;\r\n            var lowValue = \"high\" !== displayMode && _isDefined(this.lowError) ? this.lowError : this.value;\r\n            var highValue = \"low\" !== displayMode && _isDefined(this.highError) ? this.highError : this.value;\r\n            return lowValue < highValue ? lowValue : highValue\r\n        } else {\r\n            return this.value\r\n        }\r\n    },\r\n    getMaxValue: function(noErrorBar) {\r\n        var errorBarOptions = this._options.errorBars;\r\n        if (errorBarOptions && !noErrorBar) {\r\n            var displayMode = errorBarOptions.displayMode;\r\n            var lowValue = \"high\" !== displayMode && _isDefined(this.lowError) ? this.lowError : this.value;\r\n            var highValue = \"low\" !== displayMode && _isDefined(this.highError) ? this.highError : this.value;\r\n            return lowValue > highValue ? lowValue : highValue\r\n        } else {\r\n            return this.value\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}