{"ast":null,"code":"/**\r\n * DevExtreme (ui/scroll_view/ui.scroll_view.simulated.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar Callbacks = require(\"../../core/utils/callbacks\");\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar commonUtils = require(\"../../core/utils/common\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar math = Math;\n\nvar simulatedStrategy = require(\"./ui.scrollable.simulated\");\n\nvar LoadIndicator = require(\"../load_indicator\");\n\nvar SCROLLVIEW_PULLDOWN_REFRESHING_CLASS = \"dx-scrollview-pull-down-loading\";\nvar SCROLLVIEW_PULLDOWN_READY_CLASS = \"dx-scrollview-pull-down-ready\";\nvar SCROLLVIEW_PULLDOWN_IMAGE_CLASS = \"dx-scrollview-pull-down-image\";\nvar SCROLLVIEW_PULLDOWN_INDICATOR_CLASS = \"dx-scrollview-pull-down-indicator\";\nvar SCROLLVIEW_PULLDOWN_TEXT_CLASS = \"dx-scrollview-pull-down-text\";\nvar SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS = \"dx-scrollview-pull-down-text-visible\";\nvar STATE_RELEASED = 0;\nvar STATE_READY = 1;\nvar STATE_REFRESHING = 2;\nvar STATE_LOADING = 3;\nvar ScrollViewScroller = simulatedStrategy.Scroller.inherit({\n  ctor: function ctor() {\n    this._topPocketSize = 0;\n    this.callBase.apply(this, arguments);\n\n    this._initCallbacks();\n\n    this._releaseState();\n  },\n  _releaseState: function _releaseState() {\n    this._state = STATE_RELEASED;\n\n    this._refreshPullDownText();\n  },\n  _refreshPullDownText: function _refreshPullDownText() {\n    var that = this;\n    var pullDownTextItems = [{\n      element: this._$pullingDownText,\n      visibleState: STATE_RELEASED\n    }, {\n      element: this._$pulledDownText,\n      visibleState: STATE_READY\n    }, {\n      element: this._$refreshingText,\n      visibleState: STATE_REFRESHING\n    }];\n    each(pullDownTextItems, function (_, item) {\n      var action = that._state === item.visibleState ? \"addClass\" : \"removeClass\";\n      item.element[action](SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS);\n    });\n  },\n  _initCallbacks: function _initCallbacks() {\n    this.pullDownCallbacks = Callbacks();\n    this.releaseCallbacks = Callbacks();\n    this.reachBottomCallbacks = Callbacks();\n  },\n  _updateBounds: function _updateBounds() {\n    var considerPockets = \"horizontal\" !== this._direction;\n    this._topPocketSize = considerPockets ? Math.round(this._$topPocket[this._dimension]()) : 0;\n    this._bottomPocketSize = considerPockets ? Math.round(this._$bottomPocket[this._dimension]()) : 0;\n    this.callBase();\n    this._bottomBound = this._minOffset + this._bottomPocketSize;\n  },\n  _updateScrollbar: function _updateScrollbar() {\n    this._scrollbar.option({\n      containerSize: this._containerSize(),\n      contentSize: this._contentSize() - this._topPocketSize - this._bottomPocketSize,\n      scaleRatio: this._getScaleRatio()\n    });\n  },\n  _moveContent: function _moveContent() {\n    this.callBase();\n\n    if (this._isPullDown()) {\n      this._pullDownReady();\n    } else {\n      if (this._isReachBottom()) {\n        this._reachBottomReady();\n      } else {\n        if (this._state !== STATE_RELEASED) {\n          this._stateReleased();\n        }\n      }\n    }\n  },\n  _moveScrollbar: function _moveScrollbar() {\n    this._scrollbar.moveTo(this._topPocketSize + this._location);\n  },\n  _isPullDown: function _isPullDown() {\n    return this._pullDownEnabled && this._location >= 0;\n  },\n  _isReachBottom: function _isReachBottom() {\n    return this._reachBottomEnabled && this._location <= this._bottomBound;\n  },\n  _scrollComplete: function _scrollComplete() {\n    if (this._inBounds() && this._state === STATE_READY) {\n      this._pullDownRefreshing();\n    } else {\n      if (this._inBounds() && this._state === STATE_LOADING) {\n        this._reachBottomLoading();\n      } else {\n        this.callBase();\n      }\n    }\n  },\n  _reachBottomReady: function _reachBottomReady() {\n    if (this._state === STATE_LOADING) {\n      return;\n    }\n\n    this._state = STATE_LOADING;\n    this._minOffset = this._getMinOffset();\n  },\n  _getMaxOffset: function _getMaxOffset() {\n    return -this._topPocketSize;\n  },\n  _getMinOffset: function _getMinOffset() {\n    return math.min(this.callBase(), -this._topPocketSize);\n  },\n  _reachBottomLoading: function _reachBottomLoading() {\n    this.reachBottomCallbacks.fire();\n  },\n  _pullDownReady: function _pullDownReady() {\n    if (this._state === STATE_READY) {\n      return;\n    }\n\n    this._state = STATE_READY;\n    this._maxOffset = 0;\n\n    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\n\n    this._refreshPullDownText();\n  },\n  _stateReleased: function _stateReleased() {\n    if (this._state === STATE_RELEASED) {\n      return;\n    }\n\n    this._releaseState();\n\n    this._updateBounds();\n\n    this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\n\n    this.releaseCallbacks.fire();\n  },\n  _pullDownRefreshing: function _pullDownRefreshing() {\n    if (this._state === STATE_REFRESHING) {\n      return;\n    }\n\n    this._state = STATE_REFRESHING;\n\n    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\n\n    this._refreshPullDownText();\n\n    this.pullDownCallbacks.fire();\n  },\n  _releaseHandler: function _releaseHandler() {\n    if (this._state === STATE_RELEASED) {\n      this._moveToBounds();\n    }\n\n    this._update();\n\n    if (this._releaseTask) {\n      this._releaseTask.abort();\n    }\n\n    this._releaseTask = commonUtils.executeAsync(this._release.bind(this));\n    return this._releaseTask.promise;\n  },\n  _release: function _release() {\n    this._stateReleased();\n\n    this._scrollComplete();\n  },\n  _reachBottomEnablingHandler: function _reachBottomEnablingHandler(enabled) {\n    if (this._reachBottomEnabled === enabled) {\n      return;\n    }\n\n    this._reachBottomEnabled = enabled;\n\n    this._updateBounds();\n  },\n  _pullDownEnablingHandler: function _pullDownEnablingHandler(enabled) {\n    if (this._pullDownEnabled === enabled) {\n      return;\n    }\n\n    this._pullDownEnabled = enabled;\n\n    this._considerTopPocketChange();\n\n    this._updateHandler();\n  },\n  _considerTopPocketChange: function _considerTopPocketChange() {\n    this._location -= this._$topPocket.height() || -this._topPocketSize;\n    this._maxOffset = 0;\n\n    this._move();\n  },\n  _pendingReleaseHandler: function _pendingReleaseHandler() {\n    this._state = STATE_READY;\n  },\n  dispose: function dispose() {\n    if (this._releaseTask) {\n      this._releaseTask.abort();\n    }\n\n    this.callBase();\n  }\n});\nvar SimulatedScrollViewStrategy = simulatedStrategy.SimulatedStrategy.inherit({\n  _init: function _init(scrollView) {\n    this.callBase(scrollView);\n    this._$pullDown = scrollView._$pullDown;\n    this._$topPocket = scrollView._$topPocket;\n    this._$bottomPocket = scrollView._$bottomPocket;\n\n    this._initCallbacks();\n  },\n  _initCallbacks: function _initCallbacks() {\n    this.pullDownCallbacks = Callbacks();\n    this.releaseCallbacks = Callbacks();\n    this.reachBottomCallbacks = Callbacks();\n  },\n  render: function render() {\n    this._renderPullDown();\n\n    this.callBase();\n  },\n  _renderPullDown: function _renderPullDown() {\n    var $image = $(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_IMAGE_CLASS);\n    var $loadContainer = $(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS);\n    var $loadIndicator = new LoadIndicator($(\"<div>\")).$element();\n    var $text = this._$pullDownText = $(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_TEXT_CLASS);\n    this._$pullingDownText = $(\"<div>\").text(this.option(\"pullingDownText\")).appendTo($text);\n    this._$pulledDownText = $(\"<div>\").text(this.option(\"pulledDownText\")).appendTo($text);\n    this._$refreshingText = $(\"<div>\").text(this.option(\"refreshingText\")).appendTo($text);\n\n    this._$pullDown.empty().append($image).append($loadContainer.append($loadIndicator)).append($text);\n  },\n  pullDownEnable: function pullDownEnable(enabled) {\n    this._eventHandler(\"pullDownEnabling\", enabled);\n  },\n  reachBottomEnable: function reachBottomEnable(enabled) {\n    this._eventHandler(\"reachBottomEnabling\", enabled);\n  },\n  _createScroller: function _createScroller(direction) {\n    var that = this;\n    var scroller = that._scrollers[direction] = new ScrollViewScroller(that._scrollerOptions(direction));\n    scroller.pullDownCallbacks.add(function () {\n      that.pullDownCallbacks.fire();\n    });\n    scroller.releaseCallbacks.add(function () {\n      that.releaseCallbacks.fire();\n    });\n    scroller.reachBottomCallbacks.add(function () {\n      that.reachBottomCallbacks.fire();\n    });\n  },\n  _scrollerOptions: function _scrollerOptions(direction) {\n    return extend(this.callBase(direction), {\n      $topPocket: this._$topPocket,\n      $bottomPocket: this._$bottomPocket,\n      $pullDown: this._$pullDown,\n      $pullDownText: this._$pullDownText,\n      $pullingDownText: this._$pullingDownText,\n      $pulledDownText: this._$pulledDownText,\n      $refreshingText: this._$refreshingText\n    });\n  },\n  pendingRelease: function pendingRelease() {\n    this._eventHandler(\"pendingRelease\");\n  },\n  release: function release() {\n    return this._eventHandler(\"release\").done(this._updateAction);\n  },\n  location: function location() {\n    var location = this.callBase();\n    location.top += this._$topPocket.height();\n    return location;\n  },\n  dispose: function dispose() {\n    each(this._scrollers, function () {\n      this.dispose();\n    });\n    this.callBase();\n  }\n});\nmodule.exports = SimulatedScrollViewStrategy;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/scroll_view/ui.scroll_view.simulated.js"],"names":["$","require","Callbacks","each","commonUtils","extend","math","simulatedStrategy","LoadIndicator","SCROLLVIEW_PULLDOWN_REFRESHING_CLASS","SCROLLVIEW_PULLDOWN_READY_CLASS","SCROLLVIEW_PULLDOWN_IMAGE_CLASS","SCROLLVIEW_PULLDOWN_INDICATOR_CLASS","SCROLLVIEW_PULLDOWN_TEXT_CLASS","SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS","STATE_RELEASED","STATE_READY","STATE_REFRESHING","STATE_LOADING","ScrollViewScroller","ctor","_releaseState","_refreshPullDownText","that","pullDownTextItems","element","visibleState","action","item","_initCallbacks","_updateBounds","considerPockets","Math","_updateScrollbar","containerSize","contentSize","scaleRatio","_moveContent","_moveScrollbar","_isPullDown","_isReachBottom","_scrollComplete","_reachBottomReady","_getMaxOffset","_getMinOffset","_reachBottomLoading","_pullDownReady","_stateReleased","_pullDownRefreshing","_releaseHandler","_release","_reachBottomEnablingHandler","_pullDownEnablingHandler","_considerTopPocketChange","_pendingReleaseHandler","dispose","SimulatedScrollViewStrategy","_init","scrollView","render","_renderPullDown","$image","$loadContainer","$loadIndicator","$text","pullDownEnable","reachBottomEnable","_createScroller","scroller","_scrollerOptions","$topPocket","$bottomPocket","$pullDown","$pullDownText","$pullingDownText","$pulledDownText","$refreshingText","_$refreshingText","pendingRelease","release","location","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scroll_view/ui.scroll_view.simulated.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar Callbacks = require(\"../../core/utils/callbacks\");\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar commonUtils = require(\"../../core/utils/common\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar math = Math;\r\nvar simulatedStrategy = require(\"./ui.scrollable.simulated\");\r\nvar LoadIndicator = require(\"../load_indicator\");\r\nvar SCROLLVIEW_PULLDOWN_REFRESHING_CLASS = \"dx-scrollview-pull-down-loading\";\r\nvar SCROLLVIEW_PULLDOWN_READY_CLASS = \"dx-scrollview-pull-down-ready\";\r\nvar SCROLLVIEW_PULLDOWN_IMAGE_CLASS = \"dx-scrollview-pull-down-image\";\r\nvar SCROLLVIEW_PULLDOWN_INDICATOR_CLASS = \"dx-scrollview-pull-down-indicator\";\r\nvar SCROLLVIEW_PULLDOWN_TEXT_CLASS = \"dx-scrollview-pull-down-text\";\r\nvar SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS = \"dx-scrollview-pull-down-text-visible\";\r\nvar STATE_RELEASED = 0;\r\nvar STATE_READY = 1;\r\nvar STATE_REFRESHING = 2;\r\nvar STATE_LOADING = 3;\r\nvar ScrollViewScroller = simulatedStrategy.Scroller.inherit({\r\n    ctor: function() {\r\n        this._topPocketSize = 0;\r\n        this.callBase.apply(this, arguments);\r\n        this._initCallbacks();\r\n        this._releaseState()\r\n    },\r\n    _releaseState: function() {\r\n        this._state = STATE_RELEASED;\r\n        this._refreshPullDownText()\r\n    },\r\n    _refreshPullDownText: function() {\r\n        var that = this;\r\n        var pullDownTextItems = [{\r\n            element: this._$pullingDownText,\r\n            visibleState: STATE_RELEASED\r\n        }, {\r\n            element: this._$pulledDownText,\r\n            visibleState: STATE_READY\r\n        }, {\r\n            element: this._$refreshingText,\r\n            visibleState: STATE_REFRESHING\r\n        }];\r\n        each(pullDownTextItems, function(_, item) {\r\n            var action = that._state === item.visibleState ? \"addClass\" : \"removeClass\";\r\n            item.element[action](SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS)\r\n        })\r\n    },\r\n    _initCallbacks: function() {\r\n        this.pullDownCallbacks = Callbacks();\r\n        this.releaseCallbacks = Callbacks();\r\n        this.reachBottomCallbacks = Callbacks()\r\n    },\r\n    _updateBounds: function() {\r\n        var considerPockets = \"horizontal\" !== this._direction;\r\n        this._topPocketSize = considerPockets ? Math.round(this._$topPocket[this._dimension]()) : 0;\r\n        this._bottomPocketSize = considerPockets ? Math.round(this._$bottomPocket[this._dimension]()) : 0;\r\n        this.callBase();\r\n        this._bottomBound = this._minOffset + this._bottomPocketSize\r\n    },\r\n    _updateScrollbar: function() {\r\n        this._scrollbar.option({\r\n            containerSize: this._containerSize(),\r\n            contentSize: this._contentSize() - this._topPocketSize - this._bottomPocketSize,\r\n            scaleRatio: this._getScaleRatio()\r\n        })\r\n    },\r\n    _moveContent: function() {\r\n        this.callBase();\r\n        if (this._isPullDown()) {\r\n            this._pullDownReady()\r\n        } else {\r\n            if (this._isReachBottom()) {\r\n                this._reachBottomReady()\r\n            } else {\r\n                if (this._state !== STATE_RELEASED) {\r\n                    this._stateReleased()\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _moveScrollbar: function() {\r\n        this._scrollbar.moveTo(this._topPocketSize + this._location)\r\n    },\r\n    _isPullDown: function() {\r\n        return this._pullDownEnabled && this._location >= 0\r\n    },\r\n    _isReachBottom: function() {\r\n        return this._reachBottomEnabled && this._location <= this._bottomBound\r\n    },\r\n    _scrollComplete: function() {\r\n        if (this._inBounds() && this._state === STATE_READY) {\r\n            this._pullDownRefreshing()\r\n        } else {\r\n            if (this._inBounds() && this._state === STATE_LOADING) {\r\n                this._reachBottomLoading()\r\n            } else {\r\n                this.callBase()\r\n            }\r\n        }\r\n    },\r\n    _reachBottomReady: function() {\r\n        if (this._state === STATE_LOADING) {\r\n            return\r\n        }\r\n        this._state = STATE_LOADING;\r\n        this._minOffset = this._getMinOffset()\r\n    },\r\n    _getMaxOffset: function() {\r\n        return -this._topPocketSize\r\n    },\r\n    _getMinOffset: function() {\r\n        return math.min(this.callBase(), -this._topPocketSize)\r\n    },\r\n    _reachBottomLoading: function() {\r\n        this.reachBottomCallbacks.fire()\r\n    },\r\n    _pullDownReady: function() {\r\n        if (this._state === STATE_READY) {\r\n            return\r\n        }\r\n        this._state = STATE_READY;\r\n        this._maxOffset = 0;\r\n        this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\r\n        this._refreshPullDownText()\r\n    },\r\n    _stateReleased: function() {\r\n        if (this._state === STATE_RELEASED) {\r\n            return\r\n        }\r\n        this._releaseState();\r\n        this._updateBounds();\r\n        this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\r\n        this.releaseCallbacks.fire()\r\n    },\r\n    _pullDownRefreshing: function() {\r\n        if (this._state === STATE_REFRESHING) {\r\n            return\r\n        }\r\n        this._state = STATE_REFRESHING;\r\n        this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\r\n        this._refreshPullDownText();\r\n        this.pullDownCallbacks.fire()\r\n    },\r\n    _releaseHandler: function() {\r\n        if (this._state === STATE_RELEASED) {\r\n            this._moveToBounds()\r\n        }\r\n        this._update();\r\n        if (this._releaseTask) {\r\n            this._releaseTask.abort()\r\n        }\r\n        this._releaseTask = commonUtils.executeAsync(this._release.bind(this));\r\n        return this._releaseTask.promise\r\n    },\r\n    _release: function() {\r\n        this._stateReleased();\r\n        this._scrollComplete()\r\n    },\r\n    _reachBottomEnablingHandler: function(enabled) {\r\n        if (this._reachBottomEnabled === enabled) {\r\n            return\r\n        }\r\n        this._reachBottomEnabled = enabled;\r\n        this._updateBounds()\r\n    },\r\n    _pullDownEnablingHandler: function(enabled) {\r\n        if (this._pullDownEnabled === enabled) {\r\n            return\r\n        }\r\n        this._pullDownEnabled = enabled;\r\n        this._considerTopPocketChange();\r\n        this._updateHandler()\r\n    },\r\n    _considerTopPocketChange: function() {\r\n        this._location -= this._$topPocket.height() || -this._topPocketSize;\r\n        this._maxOffset = 0;\r\n        this._move()\r\n    },\r\n    _pendingReleaseHandler: function() {\r\n        this._state = STATE_READY\r\n    },\r\n    dispose: function() {\r\n        if (this._releaseTask) {\r\n            this._releaseTask.abort()\r\n        }\r\n        this.callBase()\r\n    }\r\n});\r\nvar SimulatedScrollViewStrategy = simulatedStrategy.SimulatedStrategy.inherit({\r\n    _init: function(scrollView) {\r\n        this.callBase(scrollView);\r\n        this._$pullDown = scrollView._$pullDown;\r\n        this._$topPocket = scrollView._$topPocket;\r\n        this._$bottomPocket = scrollView._$bottomPocket;\r\n        this._initCallbacks()\r\n    },\r\n    _initCallbacks: function() {\r\n        this.pullDownCallbacks = Callbacks();\r\n        this.releaseCallbacks = Callbacks();\r\n        this.reachBottomCallbacks = Callbacks()\r\n    },\r\n    render: function() {\r\n        this._renderPullDown();\r\n        this.callBase()\r\n    },\r\n    _renderPullDown: function() {\r\n        var $image = $(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_IMAGE_CLASS);\r\n        var $loadContainer = $(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS);\r\n        var $loadIndicator = new LoadIndicator($(\"<div>\")).$element();\r\n        var $text = this._$pullDownText = $(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_TEXT_CLASS);\r\n        this._$pullingDownText = $(\"<div>\").text(this.option(\"pullingDownText\")).appendTo($text);\r\n        this._$pulledDownText = $(\"<div>\").text(this.option(\"pulledDownText\")).appendTo($text);\r\n        this._$refreshingText = $(\"<div>\").text(this.option(\"refreshingText\")).appendTo($text);\r\n        this._$pullDown.empty().append($image).append($loadContainer.append($loadIndicator)).append($text)\r\n    },\r\n    pullDownEnable: function(enabled) {\r\n        this._eventHandler(\"pullDownEnabling\", enabled)\r\n    },\r\n    reachBottomEnable: function(enabled) {\r\n        this._eventHandler(\"reachBottomEnabling\", enabled)\r\n    },\r\n    _createScroller: function(direction) {\r\n        var that = this;\r\n        var scroller = that._scrollers[direction] = new ScrollViewScroller(that._scrollerOptions(direction));\r\n        scroller.pullDownCallbacks.add(function() {\r\n            that.pullDownCallbacks.fire()\r\n        });\r\n        scroller.releaseCallbacks.add(function() {\r\n            that.releaseCallbacks.fire()\r\n        });\r\n        scroller.reachBottomCallbacks.add(function() {\r\n            that.reachBottomCallbacks.fire()\r\n        })\r\n    },\r\n    _scrollerOptions: function(direction) {\r\n        return extend(this.callBase(direction), {\r\n            $topPocket: this._$topPocket,\r\n            $bottomPocket: this._$bottomPocket,\r\n            $pullDown: this._$pullDown,\r\n            $pullDownText: this._$pullDownText,\r\n            $pullingDownText: this._$pullingDownText,\r\n            $pulledDownText: this._$pulledDownText,\r\n            $refreshingText: this._$refreshingText\r\n        })\r\n    },\r\n    pendingRelease: function() {\r\n        this._eventHandler(\"pendingRelease\")\r\n    },\r\n    release: function() {\r\n        return this._eventHandler(\"release\").done(this._updateAction)\r\n    },\r\n    location: function location() {\r\n        var location = this.callBase();\r\n        location.top += this._$topPocket.height();\r\n        return location\r\n    },\r\n    dispose: function() {\r\n        each(this._scrollers, function() {\r\n            this.dispose()\r\n        });\r\n        this.callBase()\r\n    }\r\n});\r\nmodule.exports = SimulatedScrollViewStrategy;\r\n"]},"metadata":{},"sourceType":"module"}