{"ast":null,"code":"/**\r\n * DevExtreme (ui/map.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar Promise = require(\"../core/polyfills/promise\");\n\nvar fromPromise = require(\"../core/utils/deferred\").fromPromise;\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar errors = require(\"./widget/ui.errors\");\n\nvar devices = require(\"../core/devices\");\n\nvar Widget = require(\"./widget/ui.widget\");\n\nvar inflector = require(\"../core/utils/inflector\");\n\nvar each = require(\"../core/utils/iterator\").each;\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar inArray = require(\"../core/utils/array\").inArray;\n\nvar isNumeric = require(\"../core/utils/type\").isNumeric;\n\nvar eventUtils = require(\"../events/utils\");\n\nvar pointerEvents = require(\"../events/pointer\");\n\nvar wrapToArray = require(\"../core/utils/array\").wrapToArray;\n\nvar PROVIDERS = {\n  googleStatic: require(\"./map/provider.google_static\"),\n  google: require(\"./map/provider.dynamic.google\"),\n  bing: require(\"./map/provider.dynamic.bing\")\n};\nvar MAP_CLASS = \"dx-map\";\nvar MAP_CONTAINER_CLASS = \"dx-map-container\";\nvar MAP_SHIELD_CLASS = \"dx-map-shield\";\nvar NATIVE_CLICK_CLASS = \"dx-native-click\";\nvar Map = Widget.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      bounds: {\n        northEast: null,\n        southWest: null\n      },\n      center: {\n        lat: 0,\n        lng: 0\n      },\n      zoom: 1,\n      width: 300,\n      height: 300,\n      type: \"roadmap\",\n      provider: \"google\",\n      autoAdjust: true,\n      markers: [],\n      markerIconSrc: null,\n      onMarkerAdded: null,\n      onMarkerRemoved: null,\n      routes: [],\n      onRouteAdded: null,\n      onRouteRemoved: null,\n      key: {\n        bing: \"\",\n        google: \"\",\n        googleStatic: \"\"\n      },\n      controls: false,\n      onReady: null,\n      onUpdated: null,\n      onClick: null\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _init: function _init() {\n    this.callBase();\n    this.$element().addClass(MAP_CLASS).addClass(NATIVE_CLICK_CLASS);\n    this._lastAsyncAction = Promise.resolve();\n\n    this._checkOption(\"provider\");\n\n    this._checkOption(\"markers\");\n\n    this._checkOption(\"routes\");\n\n    this._initContainer();\n\n    this._grabEvents();\n\n    this._rendered = {};\n  },\n  _checkOption: function _checkOption(option) {\n    var value = this.option(option);\n\n    if (\"markers\" === option && !Array.isArray(value)) {\n      throw errors.Error(\"E1022\");\n    }\n\n    if (\"routes\" === option && !Array.isArray(value)) {\n      throw errors.Error(\"E1023\");\n    }\n  },\n  _initContainer: function _initContainer() {\n    this._$container = $(\"<div>\").addClass(MAP_CONTAINER_CLASS);\n    this.$element().append(this._$container);\n  },\n  _grabEvents: function _grabEvents() {\n    var eventName = eventUtils.addNamespace(pointerEvents.down, this.NAME);\n    eventsEngine.on(this.$element(), eventName, this._cancelEvent.bind(this));\n  },\n  _cancelEvent: function _cancelEvent(e) {\n    var cancelByProvider = this._provider && this._provider.isEventsCanceled(e) && !this.option(\"disabled\");\n\n    if (cancelByProvider) {\n      e.stopPropagation();\n    }\n  },\n  _saveRendered: function _saveRendered(option) {\n    var value = this.option(option);\n    this._rendered[option] = value.slice();\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._renderShield();\n\n    this._saveRendered(\"markers\");\n\n    this._saveRendered(\"routes\");\n\n    this._provider = new PROVIDERS[this.option(\"provider\")](this, this._$container);\n\n    this._queueAsyncAction(\"render\", this._rendered.markers, this._rendered.routes);\n  },\n  _renderShield: function _renderShield() {\n    var $shield;\n\n    if (this.option(\"disabled\")) {\n      $shield = $(\"<div>\").addClass(MAP_SHIELD_CLASS);\n      this.$element().append($shield);\n    } else {\n      $shield = this.$element().find(\".\" + MAP_SHIELD_CLASS);\n      $shield.remove();\n    }\n  },\n  _clean: function _clean() {\n    this._cleanFocusState();\n\n    if (this._provider) {\n      this._provider.clean();\n    }\n\n    this._provider = null;\n    this._lastAsyncAction = Promise.resolve();\n    this.setOptionSilent(\"bounds\", {\n      northEast: null,\n      southWest: null\n    });\n    delete this._suppressAsyncAction;\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name;\n    var changeBag = this._optionChangeBag;\n    this._optionChangeBag = null;\n\n    switch (name) {\n      case \"disabled\":\n        this._renderShield();\n\n        this.callBase(args);\n        break;\n\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"provider\":\n        this._suppressAsyncAction = true;\n\n        this._invalidate();\n\n        break;\n\n      case \"key\":\n        errors.log(\"W1001\");\n        break;\n\n      case \"bounds\":\n        this._queueAsyncAction(\"updateBounds\");\n\n        break;\n\n      case \"center\":\n        this._queueAsyncAction(\"updateCenter\");\n\n        break;\n\n      case \"zoom\":\n        this._queueAsyncAction(\"updateZoom\");\n\n        break;\n\n      case \"type\":\n        this._queueAsyncAction(\"updateMapType\");\n\n        break;\n\n      case \"controls\":\n        this._queueAsyncAction(\"updateControls\", this._rendered.markers, this._rendered.routes);\n\n        break;\n\n      case \"autoAdjust\":\n        this._queueAsyncAction(\"adjustViewport\");\n\n        break;\n\n      case \"markers\":\n      case \"routes\":\n        this._checkOption(name);\n\n        var prevValue = this._rendered[name];\n\n        this._saveRendered(name);\n\n        this._queueAsyncAction(\"update\" + inflector.titleize(name), changeBag ? changeBag.removed : prevValue, changeBag ? changeBag.added : this._rendered[name]).then(function (result) {\n          if (changeBag) {\n            changeBag.resolve(result);\n          }\n        });\n\n        break;\n\n      case \"markerIconSrc\":\n        this._queueAsyncAction(\"updateMarkers\", this._rendered.markers, this._rendered.markers);\n\n        break;\n\n      case \"onReady\":\n      case \"onUpdated\":\n      case \"onMarkerAdded\":\n      case \"onMarkerRemoved\":\n      case \"onRouteAdded\":\n      case \"onRouteRemoved\":\n      case \"onClick\":\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible) {\n      this._dimensionChanged();\n    }\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    this._queueAsyncAction(\"updateDimensions\");\n  },\n  _queueAsyncAction: function _queueAsyncAction(name) {\n    var options = [].slice.call(arguments).slice(1);\n    var isActionSuppressed = this._suppressAsyncAction;\n    this._lastAsyncAction = this._lastAsyncAction.then(function () {\n      if (!this._provider || isActionSuppressed) {\n        return Promise.resolve();\n      }\n\n      return this._provider[name].apply(this._provider, options).then(function (result) {\n        result = wrapToArray(result);\n        var mapRefreshed = result[0];\n\n        if (mapRefreshed) {\n          this._triggerReadyAction();\n        }\n\n        return result[1];\n      }.bind(this));\n    }.bind(this));\n    return this._lastAsyncAction;\n  },\n  _triggerReadyAction: function _triggerReadyAction() {\n    this._createActionByOption(\"onReady\")({\n      originalMap: this._provider.map()\n    });\n  },\n  _triggerUpdateAction: function _triggerUpdateAction() {\n    this._createActionByOption(\"onUpdated\")();\n  },\n  setOptionSilent: function setOptionSilent(name, value) {\n    this._setOptionSilent(name, value);\n  },\n  addMarker: function addMarker(marker) {\n    return this._addFunction(\"markers\", marker);\n  },\n  removeMarker: function removeMarker(marker) {\n    return this._removeFunction(\"markers\", marker);\n  },\n  addRoute: function addRoute(route) {\n    return this._addFunction(\"routes\", route);\n  },\n  removeRoute: function removeRoute(route) {\n    return this._removeFunction(\"routes\", route);\n  },\n  _addFunction: function _addFunction(optionName, addingValue) {\n    var optionValue = this.option(optionName);\n    var addingValues = wrapToArray(addingValue);\n    optionValue.push.apply(optionValue, addingValues);\n    return this._partialArrayOptionChange(optionName, optionValue, addingValues, []);\n  },\n  _removeFunction: function _removeFunction(optionName, removingValue) {\n    var optionValue = this.option(optionName);\n    var removingValues = wrapToArray(removingValue);\n    each(removingValues, function (removingIndex, removingValue) {\n      var index = isNumeric(removingValue) ? removingValue : inArray(removingValue, optionValue);\n\n      if (index !== -1) {\n        var removing = optionValue.splice(index, 1)[0];\n        removingValues.splice(removingIndex, 1, removing);\n      } else {\n        throw errors.log(\"E1021\", inflector.titleize(optionName.substring(0, optionName.length - 1)), removingValue);\n      }\n    });\n    return this._partialArrayOptionChange(optionName, optionValue, [], removingValues);\n  },\n  _partialArrayOptionChange: function _partialArrayOptionChange(optionName, optionValue, addingValues, removingValues) {\n    return fromPromise(new Promise(function (resolve) {\n      this._optionChangeBag = {\n        resolve: resolve,\n        added: addingValues,\n        removed: removingValues\n      };\n      this.option(optionName, optionValue);\n    }.bind(this)).then(function (result) {\n      return result && 1 === result.length ? result[0] : result;\n    }), this);\n  }\n});\nregisterComponent(\"dxMap\", Map);\nmodule.exports = Map;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/map.js"],"names":["$","require","eventsEngine","Promise","fromPromise","registerComponent","errors","devices","Widget","inflector","each","extend","inArray","isNumeric","eventUtils","pointerEvents","wrapToArray","PROVIDERS","googleStatic","google","bing","MAP_CLASS","MAP_CONTAINER_CLASS","MAP_SHIELD_CLASS","NATIVE_CLICK_CLASS","Map","_getDefaultOptions","bounds","northEast","southWest","center","lat","lng","zoom","width","height","type","provider","autoAdjust","markers","markerIconSrc","onMarkerAdded","onMarkerRemoved","routes","onRouteAdded","onRouteRemoved","key","controls","onReady","onUpdated","onClick","_defaultOptionsRules","device","options","focusStateEnabled","_init","_checkOption","value","Array","_initContainer","_grabEvents","eventName","_cancelEvent","cancelByProvider","e","_saveRendered","_render","_renderShield","$shield","_clean","_optionChanged","name","args","changeBag","prevValue","_visibilityChanged","_dimensionChanged","_queueAsyncAction","isActionSuppressed","result","mapRefreshed","_triggerReadyAction","originalMap","_triggerUpdateAction","setOptionSilent","addMarker","removeMarker","addRoute","removeRoute","_addFunction","optionValue","addingValues","_removeFunction","removingValues","index","removing","optionName","_partialArrayOptionChange","resolve","added","removed","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,CAAC,GAAGC,OAAO,CAAf,kBAAe,CAAf;;AACA,IAAIC,YAAY,GAAGD,OAAO,CAA1B,8BAA0B,CAA1B;;AACA,IAAIE,OAAO,GAAGF,OAAO,CAArB,2BAAqB,CAArB;;AACA,IAAIG,WAAW,GAAGH,OAAO,CAAPA,wBAAO,CAAPA,CAAlB,WAAA;;AACA,IAAII,iBAAiB,GAAGJ,OAAO,CAA/B,+BAA+B,CAA/B;;AACA,IAAIK,MAAM,GAAGL,OAAO,CAApB,oBAAoB,CAApB;;AACA,IAAIM,OAAO,GAAGN,OAAO,CAArB,iBAAqB,CAArB;;AACA,IAAIO,MAAM,GAAGP,OAAO,CAApB,oBAAoB,CAApB;;AACA,IAAIQ,SAAS,GAAGR,OAAO,CAAvB,yBAAuB,CAAvB;;AACA,IAAIS,IAAI,GAAGT,OAAO,CAAPA,wBAAO,CAAPA,CAAX,IAAA;;AACA,IAAIU,MAAM,GAAGV,OAAO,CAAPA,sBAAO,CAAPA,CAAb,MAAA;;AACA,IAAIW,OAAO,GAAGX,OAAO,CAAPA,qBAAO,CAAPA,CAAd,OAAA;;AACA,IAAIY,SAAS,GAAGZ,OAAO,CAAPA,oBAAO,CAAPA,CAAhB,SAAA;;AACA,IAAIa,UAAU,GAAGb,OAAO,CAAxB,iBAAwB,CAAxB;;AACA,IAAIc,aAAa,GAAGd,OAAO,CAA3B,mBAA2B,CAA3B;;AACA,IAAIe,WAAW,GAAGf,OAAO,CAAPA,qBAAO,CAAPA,CAAlB,WAAA;;AACA,IAAIgB,SAAS,GAAG;AACZC,EAAAA,YAAY,EAAEjB,OAAO,CADT,8BACS,CADT;AAEZkB,EAAAA,MAAM,EAAElB,OAAO,CAFH,+BAEG,CAFH;AAGZmB,EAAAA,IAAI,EAAEnB,OAAO,CAAA,6BAAA;AAHD,CAAhB;AAKA,IAAIoB,SAAS,GAAb,QAAA;AACA,IAAIC,mBAAmB,GAAvB,kBAAA;AACA,IAAIC,gBAAgB,GAApB,eAAA;AACA,IAAIC,kBAAkB,GAAtB,iBAAA;AACA,IAAIC,GAAG,GAAG,MAAM,CAAN,OAAA,CAAe;AACrBC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,WAAOf,MAAM,CAAC,KAAD,QAAC,EAAD,EAAkB;AAC3BgB,MAAAA,MAAM,EAAE;AACJC,QAAAA,SAAS,EADL,IAAA;AAEJC,QAAAA,SAAS,EAAE;AAFP,OADmB;AAK3BC,MAAAA,MAAM,EAAE;AACJC,QAAAA,GAAG,EADC,CAAA;AAEJC,QAAAA,GAAG,EAAE;AAFD,OALmB;AAS3BC,MAAAA,IAAI,EATuB,CAAA;AAU3BC,MAAAA,KAAK,EAVsB,GAAA;AAW3BC,MAAAA,MAAM,EAXqB,GAAA;AAY3BC,MAAAA,IAAI,EAZuB,SAAA;AAa3BC,MAAAA,QAAQ,EAbmB,QAAA;AAc3BC,MAAAA,UAAU,EAdiB,IAAA;AAe3BC,MAAAA,OAAO,EAfoB,EAAA;AAgB3BC,MAAAA,aAAa,EAhBc,IAAA;AAiB3BC,MAAAA,aAAa,EAjBc,IAAA;AAkB3BC,MAAAA,eAAe,EAlBY,IAAA;AAmB3BC,MAAAA,MAAM,EAnBqB,EAAA;AAoB3BC,MAAAA,YAAY,EApBe,IAAA;AAqB3BC,MAAAA,cAAc,EArBa,IAAA;AAsB3BC,MAAAA,GAAG,EAAE;AACD1B,QAAAA,IAAI,EADH,EAAA;AAEDD,QAAAA,MAAM,EAFL,EAAA;AAGDD,QAAAA,YAAY,EAAE;AAHb,OAtBsB;AA2B3B6B,MAAAA,QAAQ,EA3BmB,KAAA;AA4B3BC,MAAAA,OAAO,EA5BoB,IAAA;AA6B3BC,MAAAA,SAAS,EA7BkB,IAAA;AA8B3BC,MAAAA,OAAO,EAAE;AA9BkB,KAAlB,CAAb;AAFiB,GAAA;AAmCrBC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,WAAO,KAAA,QAAA,GAAA,MAAA,CAAuB,CAAC;AAC3BC,MAAAA,MAAM,EAAE,SAAA,MAAA,GAAW;AACf,eAAO,cAAc7C,OAAO,CAAPA,IAAAA,GAAd,UAAA,IAA2C,CAACA,OAAO,CAA1D,WAAmDA,EAAnD;AAFuB,OAAA;AAI3B8C,MAAAA,OAAO,EAAE;AACLC,QAAAA,iBAAiB,EAAE;AADd;AAJkB,KAAD,CAAvB,CAAP;AApCiB,GAAA;AA6CrBC,EAAAA,KAAK,EAAE,SAAA,KAAA,GAAW;AACd,SAAA,QAAA;AACA,SAAA,QAAA,GAAA,QAAA,CAAA,SAAA,EAAA,QAAA,CAAA,kBAAA;AACA,SAAA,gBAAA,GAAwBpD,OAAO,CAA/B,OAAwBA,EAAxB;;AACA,SAAA,YAAA,CAAA,UAAA;;AACA,SAAA,YAAA,CAAA,SAAA;;AACA,SAAA,YAAA,CAAA,QAAA;;AACA,SAAA,cAAA;;AACA,SAAA,WAAA;;AACA,SAAA,SAAA,GAAA,EAAA;AAtDiB,GAAA;AAwDrBqD,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,MAAA,EAAiB;AAC3B,QAAIC,KAAK,GAAG,KAAA,MAAA,CAAZ,MAAY,CAAZ;;AACA,QAAI,cAAA,MAAA,IAAwB,CAACC,KAAK,CAALA,OAAAA,CAA7B,KAA6BA,CAA7B,EAAmD;AAC/C,YAAMpD,MAAM,CAANA,KAAAA,CAAN,OAAMA,CAAN;AACH;;AACD,QAAI,aAAA,MAAA,IAAuB,CAACoD,KAAK,CAALA,OAAAA,CAA5B,KAA4BA,CAA5B,EAAkD;AAC9C,YAAMpD,MAAM,CAANA,KAAAA,CAAN,OAAMA,CAAN;AACH;AA/DgB,GAAA;AAiErBqD,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,SAAA,WAAA,GAAmB3D,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAAnB,mBAAmBA,CAAnB;AACA,SAAA,QAAA,GAAA,MAAA,CAAuB,KAAvB,WAAA;AAnEiB,GAAA;AAqErB4D,EAAAA,WAAW,EAAE,SAAA,WAAA,GAAW;AACpB,QAAIC,SAAS,GAAG/C,UAAU,CAAVA,YAAAA,CAAwBC,aAAa,CAArCD,IAAAA,EAA4C,KAA5D,IAAgBA,CAAhB;AACAZ,IAAAA,YAAY,CAAZA,EAAAA,CAAgB,KAAhBA,QAAgB,EAAhBA,EAAAA,SAAAA,EAA4C,KAAA,YAAA,CAAA,IAAA,CAA5CA,IAA4C,CAA5CA;AAvEiB,GAAA;AAyErB4D,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,CAAA,EAAY;AACtB,QAAIC,gBAAgB,GAAG,KAAA,SAAA,IAAkB,KAAA,SAAA,CAAA,gBAAA,CAAlB,CAAkB,CAAlB,IAAwD,CAAC,KAAA,MAAA,CAAhF,UAAgF,CAAhF;;AACA,QAAA,gBAAA,EAAsB;AAClBC,MAAAA,CAAC,CAADA,eAAAA;AACH;AA7EgB,GAAA;AA+ErBC,EAAAA,aAAa,EAAE,SAAA,aAAA,CAAA,MAAA,EAAiB;AAC5B,QAAIR,KAAK,GAAG,KAAA,MAAA,CAAZ,MAAY,CAAZ;AACA,SAAA,SAAA,CAAA,MAAA,IAAyBA,KAAK,CAA9B,KAAyBA,EAAzB;AAjFiB,GAAA;AAmFrBS,EAAAA,OAAO,EAAE,SAAA,OAAA,GAAW;AAChB,SAAA,QAAA;;AACA,SAAA,aAAA;;AACA,SAAA,aAAA,CAAA,SAAA;;AACA,SAAA,aAAA,CAAA,QAAA;;AACA,SAAA,SAAA,GAAiB,IAAIjD,SAAS,CAAC,KAAA,MAAA,CAAd,UAAc,CAAD,CAAb,CAAA,IAAA,EAA8C,KAA/D,WAAiB,CAAjB;;AACA,SAAA,iBAAA,CAAA,QAAA,EAAiC,KAAA,SAAA,CAAjC,OAAA,EAAyD,KAAA,SAAA,CAAzD,MAAA;AAzFiB,GAAA;AA2FrBkD,EAAAA,aAAa,EAAE,SAAA,aAAA,GAAW;AACtB,QAAA,OAAA;;AACA,QAAI,KAAA,MAAA,CAAJ,UAAI,CAAJ,EAA6B;AACzBC,MAAAA,OAAO,GAAGpE,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAAVoE,gBAAUpE,CAAVoE;AACA,WAAA,QAAA,GAAA,MAAA,CAAA,OAAA;AAFJ,KAAA,MAGO;AACHA,MAAAA,OAAO,GAAG,KAAA,QAAA,GAAA,IAAA,CAAqB,MAA/BA,gBAAU,CAAVA;AACAA,MAAAA,OAAO,CAAPA,MAAAA;AACH;AAnGgB,GAAA;AAqGrBC,EAAAA,MAAM,EAAE,SAAA,MAAA,GAAW;AACf,SAAA,gBAAA;;AACA,QAAI,KAAJ,SAAA,EAAoB;AAChB,WAAA,SAAA,CAAA,KAAA;AACH;;AACD,SAAA,SAAA,GAAA,IAAA;AACA,SAAA,gBAAA,GAAwBlE,OAAO,CAA/B,OAAwBA,EAAxB;AACA,SAAA,eAAA,CAAA,QAAA,EAA+B;AAC3ByB,MAAAA,SAAS,EADkB,IAAA;AAE3BC,MAAAA,SAAS,EAAE;AAFgB,KAA/B;AAIA,WAAO,KAAP,oBAAA;AAhHiB,GAAA;AAkHrByC,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,IAAA,EAAe;AAC3B,QAAIC,IAAI,GAAGC,IAAI,CAAf,IAAA;AACA,QAAIC,SAAS,GAAG,KAAhB,gBAAA;AACA,SAAA,gBAAA,GAAA,IAAA;;AACA,YAAA,IAAA;AACI,WAAA,UAAA;AACI,aAAA,aAAA;;AACA,aAAA,QAAA,CAAA,IAAA;AACA;;AACJ,WAAA,OAAA;AACA,WAAA,QAAA;AACI,aAAA,QAAA,CAAA,IAAA;;AACA,aAAA,iBAAA;;AACA;;AACJ,WAAA,UAAA;AACI,aAAA,oBAAA,GAAA,IAAA;;AACA,aAAA,WAAA;;AACA;;AACJ,WAAA,KAAA;AACInE,QAAAA,MAAM,CAANA,GAAAA,CAAAA,OAAAA;AACA;;AACJ,WAAA,QAAA;AACI,aAAA,iBAAA,CAAA,cAAA;;AACA;;AACJ,WAAA,QAAA;AACI,aAAA,iBAAA,CAAA,cAAA;;AACA;;AACJ,WAAA,MAAA;AACI,aAAA,iBAAA,CAAA,YAAA;;AACA;;AACJ,WAAA,MAAA;AACI,aAAA,iBAAA,CAAA,eAAA;;AACA;;AACJ,WAAA,UAAA;AACI,aAAA,iBAAA,CAAA,gBAAA,EAAyC,KAAA,SAAA,CAAzC,OAAA,EAAiE,KAAA,SAAA,CAAjE,MAAA;;AACA;;AACJ,WAAA,YAAA;AACI,aAAA,iBAAA,CAAA,gBAAA;;AACA;;AACJ,WAAA,SAAA;AACA,WAAA,QAAA;AACI,aAAA,YAAA,CAAA,IAAA;;AACA,YAAIoE,SAAS,GAAG,KAAA,SAAA,CAAhB,IAAgB,CAAhB;;AACA,aAAA,aAAA,CAAA,IAAA;;AACA,aAAA,iBAAA,CAAuB,WAAWjE,SAAS,CAATA,QAAAA,CAAlC,IAAkCA,CAAlC,EAA4DgE,SAAS,GAAGA,SAAS,CAAZ,OAAA,GAArE,SAAA,EAAuGA,SAAS,GAAGA,SAAS,CAAZ,KAAA,GAAqB,KAAA,SAAA,CAArI,IAAqI,CAArI,EAAA,IAAA,CAAgK,UAAA,MAAA,EAAiB;AAC7K,cAAA,SAAA,EAAe;AACXA,YAAAA,SAAS,CAATA,OAAAA,CAAAA,MAAAA;AACH;AAHL,SAAA;;AAKA;;AACJ,WAAA,eAAA;AACI,aAAA,iBAAA,CAAA,eAAA,EAAwC,KAAA,SAAA,CAAxC,OAAA,EAAgE,KAAA,SAAA,CAAhE,OAAA;;AACA;;AACJ,WAAA,SAAA;AACA,WAAA,WAAA;AACA,WAAA,eAAA;AACA,WAAA,iBAAA;AACA,WAAA,cAAA;AACA,WAAA,gBAAA;AACA,WAAA,SAAA;AACI;;AACJ;AACI,aAAA,QAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA;AA1DR;AAtHiB,GAAA;AAmLrBE,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,CAAA,OAAA,EAAkB;AAClC,QAAA,OAAA,EAAa;AACT,WAAA,iBAAA;AACH;AAtLgB,GAAA;AAwLrBC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,SAAA,iBAAA,CAAA,kBAAA;AAzLiB,GAAA;AA2LrBC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,CAAA,IAAA,EAAe;AAC9B,QAAIxB,OAAO,GAAG,GAAA,KAAA,CAAA,IAAA,CAAA,SAAA,EAAA,KAAA,CAAd,CAAc,CAAd;AACA,QAAIyB,kBAAkB,GAAG,KAAzB,oBAAA;AACA,SAAA,gBAAA,GAAwB,KAAA,gBAAA,CAAA,IAAA,CAA2B,YAAW;AAC1D,UAAI,CAAC,KAAD,SAAA,IAAJ,kBAAA,EAA2C;AACvC,eAAO3E,OAAO,CAAd,OAAOA,EAAP;AACH;;AACD,aAAO,KAAA,SAAA,CAAA,IAAA,EAAA,KAAA,CAA2B,KAA3B,SAAA,EAAA,OAAA,EAAA,IAAA,CAAyD,UAAA,MAAA,EAAiB;AAC7E4E,QAAAA,MAAM,GAAG/D,WAAW,CAApB+D,MAAoB,CAApBA;AACA,YAAIC,YAAY,GAAGD,MAAM,CAAzB,CAAyB,CAAzB;;AACA,YAAA,YAAA,EAAkB;AACd,eAAA,mBAAA;AACH;;AACD,eAAOA,MAAM,CAAb,CAAa,CAAb;AAN4D,OAAA,CAAA,IAAA,CAAhE,IAAgE,CAAzD,CAAP;AAJ+C,KAAA,CAAA,IAAA,CAAnD,IAAmD,CAA3B,CAAxB;AAaA,WAAO,KAAP,gBAAA;AA3MiB,GAAA;AA6MrBE,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,SAAA,qBAAA,CAAA,SAAA,EAAsC;AAClCC,MAAAA,WAAW,EAAE,KAAA,SAAA,CAAA,GAAA;AADqB,KAAtC;AA9MiB,GAAA;AAkNrBC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,SAAA,qBAAA,CAAA,WAAA;AAnNiB,GAAA;AAqNrBC,EAAAA,eAAe,EAAE,SAAA,eAAA,CAAA,IAAA,EAAA,KAAA,EAAsB;AACnC,SAAA,gBAAA,CAAA,IAAA,EAAA,KAAA;AAtNiB,GAAA;AAwNrBC,EAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,MAAA,EAAiB;AACxB,WAAO,KAAA,YAAA,CAAA,SAAA,EAAP,MAAO,CAAP;AAzNiB,GAAA;AA2NrBC,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,MAAA,EAAiB;AAC3B,WAAO,KAAA,eAAA,CAAA,SAAA,EAAP,MAAO,CAAP;AA5NiB,GAAA;AA8NrBC,EAAAA,QAAQ,EAAE,SAAA,QAAA,CAAA,KAAA,EAAgB;AACtB,WAAO,KAAA,YAAA,CAAA,QAAA,EAAP,KAAO,CAAP;AA/NiB,GAAA;AAiOrBC,EAAAA,WAAW,EAAE,SAAA,WAAA,CAAA,KAAA,EAAgB;AACzB,WAAO,KAAA,eAAA,CAAA,QAAA,EAAP,KAAO,CAAP;AAlOiB,GAAA;AAoOrBC,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,UAAA,EAAA,WAAA,EAAkC;AAC5C,QAAIC,WAAW,GAAG,KAAA,MAAA,CAAlB,UAAkB,CAAlB;AACA,QAAIC,YAAY,GAAG3E,WAAW,CAA9B,WAA8B,CAA9B;AACA0E,IAAAA,WAAW,CAAXA,IAAAA,CAAAA,KAAAA,CAAAA,WAAAA,EAAAA,YAAAA;AACA,WAAO,KAAA,yBAAA,CAAA,UAAA,EAAA,WAAA,EAAA,YAAA,EAAP,EAAO,CAAP;AAxOiB,GAAA;AA0OrBE,EAAAA,eAAe,EAAE,SAAA,eAAA,CAAA,UAAA,EAAA,aAAA,EAAoC;AACjD,QAAIF,WAAW,GAAG,KAAA,MAAA,CAAlB,UAAkB,CAAlB;AACA,QAAIG,cAAc,GAAG7E,WAAW,CAAhC,aAAgC,CAAhC;AACAN,IAAAA,IAAI,CAAA,cAAA,EAAiB,UAAA,aAAA,EAAA,aAAA,EAAuC;AACxD,UAAIoF,KAAK,GAAGjF,SAAS,CAATA,aAAS,CAATA,GAAAA,aAAAA,GAA2CD,OAAO,CAAA,aAAA,EAA9D,WAA8D,CAA9D;;AACA,UAAIkF,KAAK,KAAK,CAAd,CAAA,EAAkB;AACd,YAAIC,QAAQ,GAAGL,WAAW,CAAXA,MAAAA,CAAAA,KAAAA,EAAAA,CAAAA,EAAf,CAAeA,CAAf;AACAG,QAAAA,cAAc,CAAdA,MAAAA,CAAAA,aAAAA,EAAAA,CAAAA,EAAAA,QAAAA;AAFJ,OAAA,MAGO;AACH,cAAMvF,MAAM,CAANA,GAAAA,CAAAA,OAAAA,EAAoBG,SAAS,CAATA,QAAAA,CAAmBuF,UAAU,CAAVA,SAAAA,CAAAA,CAAAA,EAAwBA,UAAU,CAAVA,MAAAA,GAA/D1F,CAAuC0F,CAAnBvF,CAApBH,EAAN,aAAMA,CAAN;AACH;AAPLI,KAAI,CAAJA;AASA,WAAO,KAAA,yBAAA,CAAA,UAAA,EAAA,WAAA,EAAA,EAAA,EAAP,cAAO,CAAP;AAtPiB,GAAA;AAwPrBuF,EAAAA,yBAAyB,EAAE,SAAA,yBAAA,CAAA,UAAA,EAAA,WAAA,EAAA,YAAA,EAAA,cAAA,EAAgE;AACvF,WAAO7F,WAAW,CAAC,IAAA,OAAA,CAAY,UAAA,OAAA,EAAkB;AAC7C,WAAA,gBAAA,GAAwB;AACpB8F,QAAAA,OAAO,EADa,OAAA;AAEpBC,QAAAA,KAAK,EAFe,YAAA;AAGpBC,QAAAA,OAAO,EAAEP;AAHW,OAAxB;AAKA,WAAA,MAAA,CAAA,UAAA,EAAA,WAAA;AAN2B,KAAA,CAAA,IAAA,CAAZ,IAAY,CAAZ,EAAA,IAAA,CAOA,UAAA,MAAA,EAAiB;AAChC,aAAOd,MAAM,IAAI,MAAMA,MAAM,CAAtBA,MAAAA,GAAgCA,MAAM,CAAtCA,CAAsC,CAAtCA,GAAP,MAAA;AARc,KAAC,CAAD,EAAlB,IAAkB,CAAlB;AAUH;AAnQoB,CAAf,CAAV;AAqQA1E,iBAAiB,CAAA,OAAA,EAAjBA,GAAiB,CAAjBA;AACAgG,MAAM,CAANA,OAAAA,GAAAA,GAAAA;AACAA,MAAM,CAANA,OAAAA,CAAAA,OAAAA,GAAyBA,MAAM,CAA/BA,OAAAA","sourcesContent":["/**\r\n * DevExtreme (ui/map.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../core/renderer\");\r\nvar eventsEngine = require(\"../events/core/events_engine\");\r\nvar Promise = require(\"../core/polyfills/promise\");\r\nvar fromPromise = require(\"../core/utils/deferred\").fromPromise;\r\nvar registerComponent = require(\"../core/component_registrator\");\r\nvar errors = require(\"./widget/ui.errors\");\r\nvar devices = require(\"../core/devices\");\r\nvar Widget = require(\"./widget/ui.widget\");\r\nvar inflector = require(\"../core/utils/inflector\");\r\nvar each = require(\"../core/utils/iterator\").each;\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar inArray = require(\"../core/utils/array\").inArray;\r\nvar isNumeric = require(\"../core/utils/type\").isNumeric;\r\nvar eventUtils = require(\"../events/utils\");\r\nvar pointerEvents = require(\"../events/pointer\");\r\nvar wrapToArray = require(\"../core/utils/array\").wrapToArray;\r\nvar PROVIDERS = {\r\n    googleStatic: require(\"./map/provider.google_static\"),\r\n    google: require(\"./map/provider.dynamic.google\"),\r\n    bing: require(\"./map/provider.dynamic.bing\")\r\n};\r\nvar MAP_CLASS = \"dx-map\";\r\nvar MAP_CONTAINER_CLASS = \"dx-map-container\";\r\nvar MAP_SHIELD_CLASS = \"dx-map-shield\";\r\nvar NATIVE_CLICK_CLASS = \"dx-native-click\";\r\nvar Map = Widget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            bounds: {\r\n                northEast: null,\r\n                southWest: null\r\n            },\r\n            center: {\r\n                lat: 0,\r\n                lng: 0\r\n            },\r\n            zoom: 1,\r\n            width: 300,\r\n            height: 300,\r\n            type: \"roadmap\",\r\n            provider: \"google\",\r\n            autoAdjust: true,\r\n            markers: [],\r\n            markerIconSrc: null,\r\n            onMarkerAdded: null,\r\n            onMarkerRemoved: null,\r\n            routes: [],\r\n            onRouteAdded: null,\r\n            onRouteRemoved: null,\r\n            key: {\r\n                bing: \"\",\r\n                google: \"\",\r\n                googleStatic: \"\"\r\n            },\r\n            controls: false,\r\n            onReady: null,\r\n            onUpdated: null,\r\n            onClick: null\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.$element().addClass(MAP_CLASS).addClass(NATIVE_CLICK_CLASS);\r\n        this._lastAsyncAction = Promise.resolve();\r\n        this._checkOption(\"provider\");\r\n        this._checkOption(\"markers\");\r\n        this._checkOption(\"routes\");\r\n        this._initContainer();\r\n        this._grabEvents();\r\n        this._rendered = {}\r\n    },\r\n    _checkOption: function(option) {\r\n        var value = this.option(option);\r\n        if (\"markers\" === option && !Array.isArray(value)) {\r\n            throw errors.Error(\"E1022\")\r\n        }\r\n        if (\"routes\" === option && !Array.isArray(value)) {\r\n            throw errors.Error(\"E1023\")\r\n        }\r\n    },\r\n    _initContainer: function() {\r\n        this._$container = $(\"<div>\").addClass(MAP_CONTAINER_CLASS);\r\n        this.$element().append(this._$container)\r\n    },\r\n    _grabEvents: function() {\r\n        var eventName = eventUtils.addNamespace(pointerEvents.down, this.NAME);\r\n        eventsEngine.on(this.$element(), eventName, this._cancelEvent.bind(this))\r\n    },\r\n    _cancelEvent: function(e) {\r\n        var cancelByProvider = this._provider && this._provider.isEventsCanceled(e) && !this.option(\"disabled\");\r\n        if (cancelByProvider) {\r\n            e.stopPropagation()\r\n        }\r\n    },\r\n    _saveRendered: function(option) {\r\n        var value = this.option(option);\r\n        this._rendered[option] = value.slice()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderShield();\r\n        this._saveRendered(\"markers\");\r\n        this._saveRendered(\"routes\");\r\n        this._provider = new(PROVIDERS[this.option(\"provider\")])(this, this._$container);\r\n        this._queueAsyncAction(\"render\", this._rendered.markers, this._rendered.routes)\r\n    },\r\n    _renderShield: function() {\r\n        var $shield;\r\n        if (this.option(\"disabled\")) {\r\n            $shield = $(\"<div>\").addClass(MAP_SHIELD_CLASS);\r\n            this.$element().append($shield)\r\n        } else {\r\n            $shield = this.$element().find(\".\" + MAP_SHIELD_CLASS);\r\n            $shield.remove()\r\n        }\r\n    },\r\n    _clean: function() {\r\n        this._cleanFocusState();\r\n        if (this._provider) {\r\n            this._provider.clean()\r\n        }\r\n        this._provider = null;\r\n        this._lastAsyncAction = Promise.resolve();\r\n        this.setOptionSilent(\"bounds\", {\r\n            northEast: null,\r\n            southWest: null\r\n        });\r\n        delete this._suppressAsyncAction\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        var changeBag = this._optionChangeBag;\r\n        this._optionChangeBag = null;\r\n        switch (name) {\r\n            case \"disabled\":\r\n                this._renderShield();\r\n                this.callBase(args);\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"provider\":\r\n                this._suppressAsyncAction = true;\r\n                this._invalidate();\r\n                break;\r\n            case \"key\":\r\n                errors.log(\"W1001\");\r\n                break;\r\n            case \"bounds\":\r\n                this._queueAsyncAction(\"updateBounds\");\r\n                break;\r\n            case \"center\":\r\n                this._queueAsyncAction(\"updateCenter\");\r\n                break;\r\n            case \"zoom\":\r\n                this._queueAsyncAction(\"updateZoom\");\r\n                break;\r\n            case \"type\":\r\n                this._queueAsyncAction(\"updateMapType\");\r\n                break;\r\n            case \"controls\":\r\n                this._queueAsyncAction(\"updateControls\", this._rendered.markers, this._rendered.routes);\r\n                break;\r\n            case \"autoAdjust\":\r\n                this._queueAsyncAction(\"adjustViewport\");\r\n                break;\r\n            case \"markers\":\r\n            case \"routes\":\r\n                this._checkOption(name);\r\n                var prevValue = this._rendered[name];\r\n                this._saveRendered(name);\r\n                this._queueAsyncAction(\"update\" + inflector.titleize(name), changeBag ? changeBag.removed : prevValue, changeBag ? changeBag.added : this._rendered[name]).then(function(result) {\r\n                    if (changeBag) {\r\n                        changeBag.resolve(result)\r\n                    }\r\n                });\r\n                break;\r\n            case \"markerIconSrc\":\r\n                this._queueAsyncAction(\"updateMarkers\", this._rendered.markers, this._rendered.markers);\r\n                break;\r\n            case \"onReady\":\r\n            case \"onUpdated\":\r\n            case \"onMarkerAdded\":\r\n            case \"onMarkerRemoved\":\r\n            case \"onRouteAdded\":\r\n            case \"onRouteRemoved\":\r\n            case \"onClick\":\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._dimensionChanged()\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._queueAsyncAction(\"updateDimensions\")\r\n    },\r\n    _queueAsyncAction: function(name) {\r\n        var options = [].slice.call(arguments).slice(1);\r\n        var isActionSuppressed = this._suppressAsyncAction;\r\n        this._lastAsyncAction = this._lastAsyncAction.then(function() {\r\n            if (!this._provider || isActionSuppressed) {\r\n                return Promise.resolve()\r\n            }\r\n            return this._provider[name].apply(this._provider, options).then(function(result) {\r\n                result = wrapToArray(result);\r\n                var mapRefreshed = result[0];\r\n                if (mapRefreshed) {\r\n                    this._triggerReadyAction()\r\n                }\r\n                return result[1]\r\n            }.bind(this))\r\n        }.bind(this));\r\n        return this._lastAsyncAction\r\n    },\r\n    _triggerReadyAction: function() {\r\n        this._createActionByOption(\"onReady\")({\r\n            originalMap: this._provider.map()\r\n        })\r\n    },\r\n    _triggerUpdateAction: function() {\r\n        this._createActionByOption(\"onUpdated\")()\r\n    },\r\n    setOptionSilent: function(name, value) {\r\n        this._setOptionSilent(name, value)\r\n    },\r\n    addMarker: function(marker) {\r\n        return this._addFunction(\"markers\", marker)\r\n    },\r\n    removeMarker: function(marker) {\r\n        return this._removeFunction(\"markers\", marker)\r\n    },\r\n    addRoute: function(route) {\r\n        return this._addFunction(\"routes\", route)\r\n    },\r\n    removeRoute: function(route) {\r\n        return this._removeFunction(\"routes\", route)\r\n    },\r\n    _addFunction: function(optionName, addingValue) {\r\n        var optionValue = this.option(optionName);\r\n        var addingValues = wrapToArray(addingValue);\r\n        optionValue.push.apply(optionValue, addingValues);\r\n        return this._partialArrayOptionChange(optionName, optionValue, addingValues, [])\r\n    },\r\n    _removeFunction: function(optionName, removingValue) {\r\n        var optionValue = this.option(optionName);\r\n        var removingValues = wrapToArray(removingValue);\r\n        each(removingValues, function(removingIndex, removingValue) {\r\n            var index = isNumeric(removingValue) ? removingValue : inArray(removingValue, optionValue);\r\n            if (index !== -1) {\r\n                var removing = optionValue.splice(index, 1)[0];\r\n                removingValues.splice(removingIndex, 1, removing)\r\n            } else {\r\n                throw errors.log(\"E1021\", inflector.titleize(optionName.substring(0, optionName.length - 1)), removingValue)\r\n            }\r\n        });\r\n        return this._partialArrayOptionChange(optionName, optionValue, [], removingValues)\r\n    },\r\n    _partialArrayOptionChange: function(optionName, optionValue, addingValues, removingValues) {\r\n        return fromPromise(new Promise(function(resolve) {\r\n            this._optionChangeBag = {\r\n                resolve: resolve,\r\n                added: addingValues,\r\n                removed: removingValues\r\n            };\r\n            this.option(optionName, optionValue)\r\n        }.bind(this)).then(function(result) {\r\n            return result && 1 === result.length ? result[0] : result\r\n        }), this)\r\n    }\r\n});\r\nregisterComponent(\"dxMap\", Map);\r\nmodule.exports = Map;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}