{"ast":null,"code":"/**\r\n * DevExtreme (ui/tree_list/ui.tree_list.focus.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _uiTree_list = require(\"./ui.tree_list.core\");\n\nvar _uiTree_list2 = _interopRequireDefault(_uiTree_list);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _uiGrid_core = require(\"../grid_core/ui.grid_core.focus\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction findIndex(items, callback) {\n  var result = -1;\n  items.forEach(function (node, index) {\n    if (callback(node)) {\n      result = index;\n    }\n  });\n  return result;\n}\n\n_uiTree_list2.default.registerModule(\"focus\", (0, _extend.extend)(true, {}, _uiGrid_core2.default, {\n  extenders: {\n    controllers: {\n      data: {\n        changeRowExpand: function changeRowExpand(key) {\n          if (this.option(\"focusedRowEnabled\") && this.isRowExpanded(key)) {\n            if (this._isFocusedRowInside(key)) {\n              this.option(\"focusedRowKey\", key);\n            }\n          }\n\n          return this.callBase.apply(this, arguments);\n        },\n        _isFocusedRowInside: function _isFocusedRowInside(parentKey) {\n          var focusedRowKey = this.option(\"focusedRowKey\");\n          var rowIndex = this.getRowIndexByKey(focusedRowKey);\n          var focusedRow = rowIndex >= 0 && this.getVisibleRows()[rowIndex];\n          var parent = focusedRow && focusedRow.node.parent;\n\n          while (parent) {\n            if (parent.key === parentKey) {\n              return true;\n            }\n\n            parent = parent.parent;\n          }\n\n          return false;\n        },\n        getParentKey: function getParentKey(key) {\n          var that = this;\n          var dataSource = that._dataSource;\n          var node = that.getNodeByKey(key);\n          var d = new _deferred.Deferred();\n\n          if (node) {\n            d.resolve(node.parent ? node.parent.key : void 0);\n          } else {\n            dataSource.load({\n              filter: [dataSource.getKeyExpr(), \"=\", key]\n            }).done(function (items) {\n              var parentData = items[0];\n\n              if (parentData) {\n                d.resolve(dataSource.parentKeyOf(parentData));\n              } else {\n                d.reject();\n              }\n            }).fail(d.reject);\n          }\n\n          return d.promise();\n        },\n        expandAscendants: function expandAscendants(key) {\n          var that = this;\n          var dataSource = that._dataSource;\n          var d = new _deferred.Deferred();\n          that.getParentKey(key).done(function (parentKey) {\n            if (dataSource && void 0 !== parentKey && parentKey !== that.option(\"rootValue\")) {\n              dataSource._isNodesInitializing = true;\n              that.expandRow(parentKey);\n              dataSource._isNodesInitializing = false;\n              that.expandAscendants(parentKey).done(d.resolve).fail(d.reject);\n            } else {\n              d.resolve();\n            }\n          }).fail(d.reject);\n          return d.promise();\n        },\n        getPageIndexByKey: function getPageIndexByKey(key) {\n          var that = this;\n          var dataSource = that._dataSource;\n          var d = new _deferred.Deferred();\n          that.expandAscendants(key).done(function () {\n            dataSource.load({\n              filter: that.getCombinedFilter(),\n              sort: that.getController(\"columns\").getSortDataSourceParameters(!dataSource.remoteOperations().sorting),\n              parentIds: []\n            }).done(function (nodes) {\n              var offset = findIndex(nodes, function (node) {\n                return that.keyOf(node.data) === key;\n              });\n              var pageIndex = that.pageIndex();\n\n              if (offset >= 0) {\n                pageIndex = Math.floor(offset / that.pageSize());\n              }\n\n              d.resolve(pageIndex);\n            }).fail(d.reject);\n          }).fail(d.reject);\n          return d.promise();\n        }\n      }\n    }\n  }\n}));","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/tree_list/ui.tree_list.focus.js"],"names":["_uiTree_list","require","_uiTree_list2","_interopRequireDefault","_extend","_deferred","_uiGrid_core","_uiGrid_core2","obj","result","items","callback","extenders","controllers","data","changeRowExpand","_isFocusedRowInside","focusedRowKey","rowIndex","focusedRow","parent","getParentKey","that","dataSource","node","d","filter","parentData","expandAscendants","parentKey","getPageIndexByKey","sort","parentIds","offset","findIndex","pageIndex","Math"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/tree_list/ui.tree_list.focus.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _uiTree_list = require(\"./ui.tree_list.core\");\r\nvar _uiTree_list2 = _interopRequireDefault(_uiTree_list);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _uiGrid_core = require(\"../grid_core/ui.grid_core.focus\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction findIndex(items, callback) {\r\n    var result = -1;\r\n    items.forEach(function(node, index) {\r\n        if (callback(node)) {\r\n            result = index\r\n        }\r\n    });\r\n    return result\r\n}\r\n_uiTree_list2.default.registerModule(\"focus\", (0, _extend.extend)(true, {}, _uiGrid_core2.default, {\r\n    extenders: {\r\n        controllers: {\r\n            data: {\r\n                changeRowExpand: function(key) {\r\n                    if (this.option(\"focusedRowEnabled\") && this.isRowExpanded(key)) {\r\n                        if (this._isFocusedRowInside(key)) {\r\n                            this.option(\"focusedRowKey\", key)\r\n                        }\r\n                    }\r\n                    return this.callBase.apply(this, arguments)\r\n                },\r\n                _isFocusedRowInside: function(parentKey) {\r\n                    var focusedRowKey = this.option(\"focusedRowKey\");\r\n                    var rowIndex = this.getRowIndexByKey(focusedRowKey);\r\n                    var focusedRow = rowIndex >= 0 && this.getVisibleRows()[rowIndex];\r\n                    var parent = focusedRow && focusedRow.node.parent;\r\n                    while (parent) {\r\n                        if (parent.key === parentKey) {\r\n                            return true\r\n                        }\r\n                        parent = parent.parent\r\n                    }\r\n                    return false\r\n                },\r\n                getParentKey: function(key) {\r\n                    var that = this;\r\n                    var dataSource = that._dataSource;\r\n                    var node = that.getNodeByKey(key);\r\n                    var d = new _deferred.Deferred;\r\n                    if (node) {\r\n                        d.resolve(node.parent ? node.parent.key : void 0)\r\n                    } else {\r\n                        dataSource.load({\r\n                            filter: [dataSource.getKeyExpr(), \"=\", key]\r\n                        }).done(function(items) {\r\n                            var parentData = items[0];\r\n                            if (parentData) {\r\n                                d.resolve(dataSource.parentKeyOf(parentData))\r\n                            } else {\r\n                                d.reject()\r\n                            }\r\n                        }).fail(d.reject)\r\n                    }\r\n                    return d.promise()\r\n                },\r\n                expandAscendants: function(key) {\r\n                    var that = this;\r\n                    var dataSource = that._dataSource;\r\n                    var d = new _deferred.Deferred;\r\n                    that.getParentKey(key).done(function(parentKey) {\r\n                        if (dataSource && void 0 !== parentKey && parentKey !== that.option(\"rootValue\")) {\r\n                            dataSource._isNodesInitializing = true;\r\n                            that.expandRow(parentKey);\r\n                            dataSource._isNodesInitializing = false;\r\n                            that.expandAscendants(parentKey).done(d.resolve).fail(d.reject)\r\n                        } else {\r\n                            d.resolve()\r\n                        }\r\n                    }).fail(d.reject);\r\n                    return d.promise()\r\n                },\r\n                getPageIndexByKey: function(key) {\r\n                    var that = this;\r\n                    var dataSource = that._dataSource;\r\n                    var d = new _deferred.Deferred;\r\n                    that.expandAscendants(key).done(function() {\r\n                        dataSource.load({\r\n                            filter: that.getCombinedFilter(),\r\n                            sort: that.getController(\"columns\").getSortDataSourceParameters(!dataSource.remoteOperations().sorting),\r\n                            parentIds: []\r\n                        }).done(function(nodes) {\r\n                            var offset = findIndex(nodes, function(node) {\r\n                                return that.keyOf(node.data) === key\r\n                            });\r\n                            var pageIndex = that.pageIndex();\r\n                            if (offset >= 0) {\r\n                                pageIndex = Math.floor(offset / that.pageSize())\r\n                            }\r\n                            d.resolve(pageIndex)\r\n                        }).fail(d.reject)\r\n                    }).fail(d.reject);\r\n                    return d.promise()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}));\r\n"]},"metadata":{},"sourceType":"module"}