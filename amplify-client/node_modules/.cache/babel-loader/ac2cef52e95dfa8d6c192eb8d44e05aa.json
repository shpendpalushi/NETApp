{"ast":null,"code":"/**\r\n * DevExtreme (ui/calendar/ui.calendar.base_view.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar domAdapter = require(\"../../core/dom_adapter\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar dataUtils = require(\"../../core/element_data\");\n\nvar domUtils = require(\"../../core/utils/dom\");\n\nvar Widget = require(\"../widget/ui.widget\");\n\nvar dateUtils = require(\"../../core/utils/date\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar dateSerialization = require(\"../../core/utils/date_serialization\");\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar clickEvent = require(\"../../events/click\");\n\nvar abstract = Widget.abstract;\nvar CALENDAR_OTHER_VIEW_CLASS = \"dx-calendar-other-view\";\nvar CALENDAR_CELL_CLASS = \"dx-calendar-cell\";\nvar CALENDAR_EMPTY_CELL_CLASS = \"dx-calendar-empty-cell\";\nvar CALENDAR_TODAY_CLASS = \"dx-calendar-today\";\nvar CALENDAR_SELECTED_DATE_CLASS = \"dx-calendar-selected-date\";\nvar CALENDAR_CONTOURED_DATE_CLASS = \"dx-calendar-contoured-date\";\nvar CALENDAR_DXCLICK_EVENT_NAME = eventUtils.addNamespace(clickEvent.name, \"dxCalendar\");\nvar CALENDAR_DATE_VALUE_KEY = \"dxDateValueKey\";\nvar BaseView = Widget.inherit({\n  _getViewName: function _getViewName() {\n    return \"base\";\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      date: new Date(),\n      focusStateEnabled: false,\n      cellTemplate: null,\n      disabledDates: null,\n      onCellClick: null,\n      rowCount: 3,\n      colCount: 4,\n      allowValueSelection: true\n    });\n  },\n  _init: function _init() {\n    this.callBase();\n    var value = this.option(\"value\");\n    this.option(\"value\", new Date(value));\n\n    if (!this.option(\"value\").valueOf()) {\n      this.option(\"value\", new Date(0, 0, 0, 0, 0, 0));\n    }\n  },\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n\n    this._renderImpl();\n  },\n  _renderImpl: function _renderImpl() {\n    this._$table = $(\"<table>\");\n    this.$element().append(this._$table);\n\n    this._createDisabledDatesHandler();\n\n    this._renderBody();\n\n    this._renderContouredDate();\n\n    this._renderValue();\n\n    this._renderEvents();\n  },\n  _renderBody: function _renderBody() {\n    this.$body = $(\"<tbody>\").appendTo(this._$table);\n    var that = this;\n    var cellTemplate = this.option(\"cellTemplate\");\n    var appendChild = this.option(\"rtl\") ? function (row, cell) {\n      row.insertBefore(cell, row.firstChild);\n    } : function (row, cell) {\n      row.appendChild(cell);\n    };\n\n    function renderCell(cellIndex) {\n      if (prevCellDate) {\n        dateUtils.fixTimezoneGap(prevCellDate, cellDate);\n      }\n\n      prevCellDate = cellDate;\n      var cell = domAdapter.createElement(\"td\");\n      var $cell = $(cell);\n      var className = CALENDAR_CELL_CLASS;\n\n      if (that._isTodayCell(cellDate)) {\n        className = className + \" \" + CALENDAR_TODAY_CLASS;\n      }\n\n      if (that._isDateOutOfRange(cellDate) || that.isDateDisabled(cellDate)) {\n        className = className + \" \" + CALENDAR_EMPTY_CELL_CLASS;\n      }\n\n      if (that._isOtherView(cellDate)) {\n        className = className + \" \" + CALENDAR_OTHER_VIEW_CLASS;\n      }\n\n      cell.className = className;\n      cell.setAttribute(\"data-value\", dateSerialization.serializeDate(cellDate, dateUtils.getShortDateFormat()));\n      dataUtils.data(cell, CALENDAR_DATE_VALUE_KEY, cellDate);\n      that.setAria({\n        role: \"option\",\n        label: that.getCellAriaLabel(cellDate)\n      }, $cell);\n      appendChild(row, cell);\n\n      if (cellTemplate) {\n        cellTemplate.render({\n          model: {\n            text: that._getCellText(cellDate),\n            date: cellDate,\n            view: that._getViewName()\n          },\n          container: domUtils.getPublicElement($cell),\n          index: cellIndex\n        });\n      } else {\n        cell.innerHTML = that._getCellText(cellDate);\n      }\n\n      cellDate = that._getNextCellData(cellDate);\n    }\n\n    var cellDate = this._getFirstCellData();\n\n    var colCount = this.option(\"colCount\");\n    var prevCellDate;\n\n    for (var indexRow = 0, len = this.option(\"rowCount\"); indexRow < len; indexRow++) {\n      var row = domAdapter.createElement(\"tr\");\n      this.$body.get(0).appendChild(row);\n\n      this._iterateCells(colCount, renderCell);\n    }\n  },\n  _iterateCells: function _iterateCells(colCount, delegate) {\n    var i = 0;\n\n    while (i < colCount) {\n      delegate(i);\n      ++i;\n    }\n  },\n  _renderEvents: function _renderEvents() {\n    this._createCellClickAction();\n\n    eventsEngine.off(this._$table, CALENDAR_DXCLICK_EVENT_NAME);\n    eventsEngine.on(this._$table, CALENDAR_DXCLICK_EVENT_NAME, \"td\", function (e) {\n      if (!$(e.currentTarget).hasClass(CALENDAR_EMPTY_CELL_CLASS)) {\n        this._cellClickAction({\n          event: e,\n          value: $(e.currentTarget).data(CALENDAR_DATE_VALUE_KEY)\n        });\n      }\n    }.bind(this));\n  },\n  _createCellClickAction: function _createCellClickAction() {\n    this._cellClickAction = this._createActionByOption(\"onCellClick\");\n  },\n  _createDisabledDatesHandler: function _createDisabledDatesHandler() {\n    var disabledDates = this.option(\"disabledDates\");\n    this._disabledDatesHandler = Array.isArray(disabledDates) ? this._getDefaultDisabledDatesHandler(disabledDates) : disabledDates || noop;\n  },\n  _getDefaultDisabledDatesHandler: function _getDefaultDisabledDatesHandler(disabledDates) {\n    return noop;\n  },\n  _isTodayCell: abstract,\n  _isDateOutOfRange: abstract,\n  isDateDisabled: function isDateDisabled(cellDate) {\n    var dateParts = {\n      date: cellDate,\n      view: this._getViewName()\n    };\n    return this._disabledDatesHandler(dateParts);\n  },\n  _isOtherView: abstract,\n  _getCellText: abstract,\n  _getFirstCellData: abstract,\n  _getNextCellData: abstract,\n  _renderContouredDate: function _renderContouredDate(contouredDate) {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n\n    contouredDate = contouredDate || this.option(\"contouredDate\");\n\n    var $oldContouredCell = this._$table.find(\".\" + CALENDAR_CONTOURED_DATE_CLASS);\n\n    var $newContouredCell = this._getCellByDate(contouredDate);\n\n    $oldContouredCell.removeClass(CALENDAR_CONTOURED_DATE_CLASS);\n    $newContouredCell.addClass(CALENDAR_CONTOURED_DATE_CLASS);\n  },\n  _dispose: function _dispose() {\n    this._keyboardProcessor = void 0;\n    this.callBase();\n  },\n  _changeValue: function _changeValue(cellDate) {\n    if (cellDate) {\n      var value = this.option(\"value\");\n      var newValue = value ? new Date(value) : new Date();\n      newValue.setDate(cellDate.getDate());\n      newValue.setMonth(cellDate.getMonth());\n      newValue.setFullYear(cellDate.getFullYear());\n      newValue.setDate(cellDate.getDate());\n      this.option(\"value\", newValue);\n    } else {\n      this.option(\"value\", null);\n    }\n  },\n  _renderValue: function _renderValue() {\n    if (!this.option(\"allowValueSelection\")) {\n      return;\n    }\n\n    var value = this.option(\"value\");\n\n    var selectedCell = this._getCellByDate(value);\n\n    if (this._selectedCell) {\n      this._selectedCell.removeClass(CALENDAR_SELECTED_DATE_CLASS);\n    }\n\n    selectedCell.addClass(CALENDAR_SELECTED_DATE_CLASS);\n    this._selectedCell = selectedCell;\n  },\n  getCellAriaLabel: function getCellAriaLabel(date) {\n    return this._getCellText(date);\n  },\n  _getFirstAvailableDate: function _getFirstAvailableDate() {\n    var date = this.option(\"date\");\n    var min = this.option(\"min\");\n    date = dateUtils.getFirstDateView(this._getViewName(), date);\n    return new Date(min && date < min ? min : date);\n  },\n  _getCellByDate: abstract,\n  isBoundary: abstract,\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name;\n\n    switch (name) {\n      case \"value\":\n        this._renderValue();\n\n        break;\n\n      case \"contouredDate\":\n        this._renderContouredDate(args.value);\n\n        break;\n\n      case \"onCellClick\":\n        this._createCellClickAction();\n\n        break;\n\n      case \"disabledDates\":\n      case \"cellTemplate\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\nmodule.exports = BaseView;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/calendar/ui.calendar.base_view.js"],"names":["$","require","domAdapter","eventsEngine","dataUtils","domUtils","Widget","dateUtils","extend","noop","dateSerialization","eventUtils","clickEvent","abstract","CALENDAR_OTHER_VIEW_CLASS","CALENDAR_CELL_CLASS","CALENDAR_EMPTY_CELL_CLASS","CALENDAR_TODAY_CLASS","CALENDAR_SELECTED_DATE_CLASS","CALENDAR_CONTOURED_DATE_CLASS","CALENDAR_DXCLICK_EVENT_NAME","CALENDAR_DATE_VALUE_KEY","BaseView","_getViewName","_getDefaultOptions","date","focusStateEnabled","cellTemplate","disabledDates","onCellClick","rowCount","colCount","allowValueSelection","_init","value","_initMarkup","_renderImpl","_renderBody","that","appendChild","row","prevCellDate","cell","$cell","className","role","label","model","text","view","container","index","cellIndex","cellDate","indexRow","len","_iterateCells","i","delegate","_renderEvents","e","event","_createCellClickAction","_createDisabledDatesHandler","Array","_getDefaultDisabledDatesHandler","_isTodayCell","_isDateOutOfRange","isDateDisabled","dateParts","_isOtherView","_getCellText","_getFirstCellData","_getNextCellData","_renderContouredDate","contouredDate","$oldContouredCell","$newContouredCell","_dispose","_changeValue","newValue","_renderValue","selectedCell","getCellAriaLabel","_getFirstAvailableDate","min","_getCellByDate","isBoundary","_optionChanged","name","args","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/calendar/ui.calendar.base_view.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar domAdapter = require(\"../../core/dom_adapter\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar dataUtils = require(\"../../core/element_data\");\r\nvar domUtils = require(\"../../core/utils/dom\");\r\nvar Widget = require(\"../widget/ui.widget\");\r\nvar dateUtils = require(\"../../core/utils/date\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar dateSerialization = require(\"../../core/utils/date_serialization\");\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar clickEvent = require(\"../../events/click\");\r\nvar abstract = Widget.abstract;\r\nvar CALENDAR_OTHER_VIEW_CLASS = \"dx-calendar-other-view\";\r\nvar CALENDAR_CELL_CLASS = \"dx-calendar-cell\";\r\nvar CALENDAR_EMPTY_CELL_CLASS = \"dx-calendar-empty-cell\";\r\nvar CALENDAR_TODAY_CLASS = \"dx-calendar-today\";\r\nvar CALENDAR_SELECTED_DATE_CLASS = \"dx-calendar-selected-date\";\r\nvar CALENDAR_CONTOURED_DATE_CLASS = \"dx-calendar-contoured-date\";\r\nvar CALENDAR_DXCLICK_EVENT_NAME = eventUtils.addNamespace(clickEvent.name, \"dxCalendar\");\r\nvar CALENDAR_DATE_VALUE_KEY = \"dxDateValueKey\";\r\nvar BaseView = Widget.inherit({\r\n    _getViewName: function() {\r\n        return \"base\"\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            date: new Date,\r\n            focusStateEnabled: false,\r\n            cellTemplate: null,\r\n            disabledDates: null,\r\n            onCellClick: null,\r\n            rowCount: 3,\r\n            colCount: 4,\r\n            allowValueSelection: true\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        var value = this.option(\"value\");\r\n        this.option(\"value\", new Date(value));\r\n        if (!this.option(\"value\").valueOf()) {\r\n            this.option(\"value\", new Date(0, 0, 0, 0, 0, 0))\r\n        }\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._renderImpl()\r\n    },\r\n    _renderImpl: function() {\r\n        this._$table = $(\"<table>\");\r\n        this.$element().append(this._$table);\r\n        this._createDisabledDatesHandler();\r\n        this._renderBody();\r\n        this._renderContouredDate();\r\n        this._renderValue();\r\n        this._renderEvents()\r\n    },\r\n    _renderBody: function() {\r\n        this.$body = $(\"<tbody>\").appendTo(this._$table);\r\n        var that = this;\r\n        var cellTemplate = this.option(\"cellTemplate\");\r\n        var appendChild = this.option(\"rtl\") ? function(row, cell) {\r\n            row.insertBefore(cell, row.firstChild)\r\n        } : function(row, cell) {\r\n            row.appendChild(cell)\r\n        };\r\n\r\n        function renderCell(cellIndex) {\r\n            if (prevCellDate) {\r\n                dateUtils.fixTimezoneGap(prevCellDate, cellDate)\r\n            }\r\n            prevCellDate = cellDate;\r\n            var cell = domAdapter.createElement(\"td\");\r\n            var $cell = $(cell);\r\n            var className = CALENDAR_CELL_CLASS;\r\n            if (that._isTodayCell(cellDate)) {\r\n                className = className + \" \" + CALENDAR_TODAY_CLASS\r\n            }\r\n            if (that._isDateOutOfRange(cellDate) || that.isDateDisabled(cellDate)) {\r\n                className = className + \" \" + CALENDAR_EMPTY_CELL_CLASS\r\n            }\r\n            if (that._isOtherView(cellDate)) {\r\n                className = className + \" \" + CALENDAR_OTHER_VIEW_CLASS\r\n            }\r\n            cell.className = className;\r\n            cell.setAttribute(\"data-value\", dateSerialization.serializeDate(cellDate, dateUtils.getShortDateFormat()));\r\n            dataUtils.data(cell, CALENDAR_DATE_VALUE_KEY, cellDate);\r\n            that.setAria({\r\n                role: \"option\",\r\n                label: that.getCellAriaLabel(cellDate)\r\n            }, $cell);\r\n            appendChild(row, cell);\r\n            if (cellTemplate) {\r\n                cellTemplate.render({\r\n                    model: {\r\n                        text: that._getCellText(cellDate),\r\n                        date: cellDate,\r\n                        view: that._getViewName()\r\n                    },\r\n                    container: domUtils.getPublicElement($cell),\r\n                    index: cellIndex\r\n                })\r\n            } else {\r\n                cell.innerHTML = that._getCellText(cellDate)\r\n            }\r\n            cellDate = that._getNextCellData(cellDate)\r\n        }\r\n        var cellDate = this._getFirstCellData();\r\n        var colCount = this.option(\"colCount\");\r\n        var prevCellDate;\r\n        for (var indexRow = 0, len = this.option(\"rowCount\"); indexRow < len; indexRow++) {\r\n            var row = domAdapter.createElement(\"tr\");\r\n            this.$body.get(0).appendChild(row);\r\n            this._iterateCells(colCount, renderCell)\r\n        }\r\n    },\r\n    _iterateCells: function(colCount, delegate) {\r\n        var i = 0;\r\n        while (i < colCount) {\r\n            delegate(i);\r\n            ++i\r\n        }\r\n    },\r\n    _renderEvents: function() {\r\n        this._createCellClickAction();\r\n        eventsEngine.off(this._$table, CALENDAR_DXCLICK_EVENT_NAME);\r\n        eventsEngine.on(this._$table, CALENDAR_DXCLICK_EVENT_NAME, \"td\", function(e) {\r\n            if (!$(e.currentTarget).hasClass(CALENDAR_EMPTY_CELL_CLASS)) {\r\n                this._cellClickAction({\r\n                    event: e,\r\n                    value: $(e.currentTarget).data(CALENDAR_DATE_VALUE_KEY)\r\n                })\r\n            }\r\n        }.bind(this))\r\n    },\r\n    _createCellClickAction: function() {\r\n        this._cellClickAction = this._createActionByOption(\"onCellClick\")\r\n    },\r\n    _createDisabledDatesHandler: function() {\r\n        var disabledDates = this.option(\"disabledDates\");\r\n        this._disabledDatesHandler = Array.isArray(disabledDates) ? this._getDefaultDisabledDatesHandler(disabledDates) : disabledDates || noop\r\n    },\r\n    _getDefaultDisabledDatesHandler: function(disabledDates) {\r\n        return noop\r\n    },\r\n    _isTodayCell: abstract,\r\n    _isDateOutOfRange: abstract,\r\n    isDateDisabled: function(cellDate) {\r\n        var dateParts = {\r\n            date: cellDate,\r\n            view: this._getViewName()\r\n        };\r\n        return this._disabledDatesHandler(dateParts)\r\n    },\r\n    _isOtherView: abstract,\r\n    _getCellText: abstract,\r\n    _getFirstCellData: abstract,\r\n    _getNextCellData: abstract,\r\n    _renderContouredDate: function(contouredDate) {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        contouredDate = contouredDate || this.option(\"contouredDate\");\r\n        var $oldContouredCell = this._$table.find(\".\" + CALENDAR_CONTOURED_DATE_CLASS);\r\n        var $newContouredCell = this._getCellByDate(contouredDate);\r\n        $oldContouredCell.removeClass(CALENDAR_CONTOURED_DATE_CLASS);\r\n        $newContouredCell.addClass(CALENDAR_CONTOURED_DATE_CLASS)\r\n    },\r\n    _dispose: function() {\r\n        this._keyboardProcessor = void 0;\r\n        this.callBase()\r\n    },\r\n    _changeValue: function(cellDate) {\r\n        if (cellDate) {\r\n            var value = this.option(\"value\");\r\n            var newValue = value ? new Date(value) : new Date;\r\n            newValue.setDate(cellDate.getDate());\r\n            newValue.setMonth(cellDate.getMonth());\r\n            newValue.setFullYear(cellDate.getFullYear());\r\n            newValue.setDate(cellDate.getDate());\r\n            this.option(\"value\", newValue)\r\n        } else {\r\n            this.option(\"value\", null)\r\n        }\r\n    },\r\n    _renderValue: function() {\r\n        if (!this.option(\"allowValueSelection\")) {\r\n            return\r\n        }\r\n        var value = this.option(\"value\");\r\n        var selectedCell = this._getCellByDate(value);\r\n        if (this._selectedCell) {\r\n            this._selectedCell.removeClass(CALENDAR_SELECTED_DATE_CLASS)\r\n        }\r\n        selectedCell.addClass(CALENDAR_SELECTED_DATE_CLASS);\r\n        this._selectedCell = selectedCell\r\n    },\r\n    getCellAriaLabel: function(date) {\r\n        return this._getCellText(date)\r\n    },\r\n    _getFirstAvailableDate: function() {\r\n        var date = this.option(\"date\");\r\n        var min = this.option(\"min\");\r\n        date = dateUtils.getFirstDateView(this._getViewName(), date);\r\n        return new Date(min && date < min ? min : date)\r\n    },\r\n    _getCellByDate: abstract,\r\n    isBoundary: abstract,\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        switch (name) {\r\n            case \"value\":\r\n                this._renderValue();\r\n                break;\r\n            case \"contouredDate\":\r\n                this._renderContouredDate(args.value);\r\n                break;\r\n            case \"onCellClick\":\r\n                this._createCellClickAction();\r\n                break;\r\n            case \"disabledDates\":\r\n            case \"cellTemplate\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nmodule.exports = BaseView;\r\n"]},"metadata":{},"sourceType":"module"}