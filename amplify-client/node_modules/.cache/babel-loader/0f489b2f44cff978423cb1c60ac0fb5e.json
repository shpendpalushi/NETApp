{"ast":null,"code":"import { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function scheduleIterable(input, scheduler) {\n  if (!input) {\n    throw new Error('Iterable cannot be null');\n  }\n\n  return new Observable(function (subscriber) {\n    var sub = new Subscription();\n    var iterator;\n    sub.add(function () {\n      if (iterator && typeof iterator.return === 'function') {\n        iterator.return();\n      }\n    });\n    sub.add(scheduler.schedule(function () {\n      iterator = input[Symbol_iterator]();\n      sub.add(scheduler.schedule(function () {\n        if (subscriber.closed) {\n          return;\n        }\n\n        var value;\n        var done;\n\n        try {\n          var result = iterator.next();\n          value = result.value;\n          done = result.done;\n        } catch (err) {\n          subscriber.error(err);\n          return;\n        }\n\n        if (done) {\n          subscriber.complete();\n        } else {\n          subscriber.next(value);\n          this.schedule();\n        }\n      }));\n    }));\n    return sub;\n  });\n}","map":{"version":3,"sources":["../../../src/internal/scheduled/scheduleIterable.ts"],"names":[],"mappings":"AAAA,SAAA,UAAA,QAAA,eAAA;AAEA,SAAA,YAAA,QAAA,iBAAA;AACA,SAAS,QAAQ,IAAjB,eAAA,QAAA,oBAAA;AAEA,OAAM,SAAA,gBAAA,CAAA,KAAA,EAAA,SAAA,EAA0E;AAC9E,MAAI,CAAJ,KAAA,EAAY;AACV,UAAM,IAAA,KAAA,CAAN,yBAAM,CAAN;AACD;;AACD,SAAO,IAAA,UAAA,CAAkB,UAAA,UAAA,EAAa;AACpC,QAAM,GAAG,GAAG,IAAZ,YAAY,EAAZ;AACA,QAAA,QAAA;AACA,IAAA,GAAG,CAAH,GAAA,CAAQ,YAAK;AAEX,UAAI,QAAQ,IAAI,OAAO,QAAQ,CAAf,MAAA,KAAhB,UAAA,EAAuD;AACrD,QAAA,QAAQ,CAAR,MAAA;AACD;AAJH,KAAA;AAMA,IAAA,GAAG,CAAH,GAAA,CAAQ,SAAS,CAAT,QAAA,CAAmB,YAAK;AAC9B,MAAA,QAAQ,GAAG,KAAK,CAAhB,eAAgB,CAAL,EAAX;AACA,MAAA,GAAG,CAAH,GAAA,CAAQ,SAAS,CAAT,QAAA,CAAmB,YAAA;AACzB,YAAI,UAAU,CAAd,MAAA,EAAuB;AACrB;AACD;;AACD,YAAA,KAAA;AACA,YAAA,IAAA;;AACA,YAAI;AACF,cAAM,MAAM,GAAG,QAAQ,CAAvB,IAAe,EAAf;AACA,UAAA,KAAK,GAAG,MAAM,CAAd,KAAA;AACA,UAAA,IAAI,GAAG,MAAM,CAAb,IAAA;AAHF,SAAA,CAIE,OAAA,GAAA,EAAY;AACZ,UAAA,UAAU,CAAV,KAAA,CAAA,GAAA;AACA;AACD;;AACD,YAAA,IAAA,EAAU;AACR,UAAA,UAAU,CAAV,QAAA;AADF,SAAA,MAEO;AACL,UAAA,UAAU,CAAV,IAAA,CAAA,KAAA;AACA,eAAA,QAAA;AACD;AAnBH,OAAQ,CAAR;AAFF,KAAQ,CAAR;AAwBA,WAAA,GAAA;AAjCF,GAAO,CAAP;AAmCD","sourcesContent":["import { Observable } from '../Observable';\r\nimport { Subscription } from '../Subscription';\r\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\r\nexport function scheduleIterable(input, scheduler) {\r\n    if (!input) {\r\n        throw new Error('Iterable cannot be null');\r\n    }\r\n    return new Observable(subscriber => {\r\n        const sub = new Subscription();\r\n        let iterator;\r\n        sub.add(() => {\r\n            if (iterator && typeof iterator.return === 'function') {\r\n                iterator.return();\r\n            }\r\n        });\r\n        sub.add(scheduler.schedule(() => {\r\n            iterator = input[Symbol_iterator]();\r\n            sub.add(scheduler.schedule(function () {\r\n                if (subscriber.closed) {\r\n                    return;\r\n                }\r\n                let value;\r\n                let done;\r\n                try {\r\n                    const result = iterator.next();\r\n                    value = result.value;\r\n                    done = result.done;\r\n                }\r\n                catch (err) {\r\n                    subscriber.error(err);\r\n                    return;\r\n                }\r\n                if (done) {\r\n                    subscriber.complete();\r\n                }\r\n                else {\r\n                    subscriber.next(value);\r\n                    this.schedule();\r\n                }\r\n            }));\r\n        }));\r\n        return sub;\r\n    });\r\n}\r\n//# sourceMappingURL=scheduleIterable.js.map"]},"metadata":{},"sourceType":"module"}