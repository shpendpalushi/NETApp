{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.editor_factory.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _click = require(\"../../events/click\");\n\nvar _click2 = _interopRequireDefault(_click);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _position = require(\"../../animation/position\");\n\nvar _position2 = _interopRequireDefault(_position);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _ui = require(\"../shared/ui.editor_factory_mixin\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar EDITOR_INLINE_BLOCK = \"dx-editor-inline-block\";\nvar CELL_FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\nvar FOCUS_OVERLAY_CLASS = \"focus-overlay\";\nvar CONTENT_CLASS = \"content\";\nvar FOCUSED_ELEMENT_CLASS = \"dx-focused\";\nvar ROW_CLASS = \"dx-row\";\nvar MODULE_NAMESPACE = \"dxDataGridEditorFactory\";\nvar UPDATE_FOCUS_EVENTS = (0, _utils.addNamespace)([_pointer2.default.down, \"focusin\", _click2.default.name].join(\" \"), MODULE_NAMESPACE);\nvar POINTER_EVENTS_TARGET_CLASS = \"dx-pointer-events-target\";\nvar POINTER_EVENTS_NONE_CLASS = \"dx-pointer-events-none\";\nvar DX_HIDDEN = \"dx-hidden\";\n\nvar EditorFactory = _uiGrid_core2.default.ViewController.inherit({\n  _getFocusedElement: function _getFocusedElement($dataGridElement) {\n    var rowSelector = this.option(\"focusedRowEnabled\") ? \"tr[tabindex]:focus\" : \"tr[tabindex]:not(.dx-data-row):focus\";\n    var focusedElementSelector = \"td[tabindex]:focus, \".concat(rowSelector, \", input:focus, textarea:focus, .dx-lookup-field:focus, .dx-checkbox:focus\");\n    return $dataGridElement.find(focusedElementSelector);\n  },\n  _getFocusCellSelector: function _getFocusCellSelector() {\n    return \".dx-row > td\";\n  },\n  _updateFocusCore: function _updateFocusCore() {\n    var $focus = this._$focusedElement;\n    var $dataGridElement = this.component && this.component.$element();\n    var $focusCell;\n    var hideBorders;\n\n    if ($dataGridElement) {\n      $focus = this._getFocusedElement($dataGridElement);\n\n      if ($focus.length) {\n        if (!$focus.hasClass(CELL_FOCUS_DISABLED_CLASS) && !$focus.hasClass(ROW_CLASS)) {\n          $focusCell = $focus.closest(this._getFocusCellSelector() + \", .\" + CELL_FOCUS_DISABLED_CLASS);\n          hideBorders = $focusCell.get(0) !== $focus.get(0) && $focusCell.hasClass(EDITOR_INLINE_BLOCK);\n          $focus = $focusCell;\n        }\n\n        if ($focus.length && !$focus.hasClass(CELL_FOCUS_DISABLED_CLASS)) {\n          this.focus($focus, hideBorders);\n          return;\n        }\n      }\n    }\n\n    this.loseFocus();\n  },\n  _updateFocus: function _updateFocus(e) {\n    var that = this;\n    var isFocusOverlay = e && e.event && (0, _renderer2.default)(e.event.target).hasClass(that.addWidgetPrefix(FOCUS_OVERLAY_CLASS));\n    that._isFocusOverlay = that._isFocusOverlay || isFocusOverlay;\n    clearTimeout(that._updateFocusTimeoutID);\n    that._updateFocusTimeoutID = setTimeout(function () {\n      delete that._updateFocusTimeoutID;\n\n      if (!that._isFocusOverlay) {\n        that._updateFocusCore();\n      }\n\n      that._isFocusOverlay = false;\n    });\n  },\n  _updateFocusOverlaySize: function _updateFocusOverlaySize($element, position) {\n    $element.hide();\n\n    var location = _position2.default.calculate($element, (0, _extend.extend)({\n      collision: \"fit\"\n    }, position));\n\n    if (location.h.oversize > 0) {\n      $element.outerWidth($element.outerWidth() - location.h.oversize);\n    }\n\n    if (location.v.oversize > 0) {\n      $element.outerHeight($element.outerHeight() - location.v.oversize);\n    }\n\n    $element.show();\n  },\n  callbackNames: function callbackNames() {\n    return [\"focused\"];\n  },\n  focus: function focus($element, hideBorder) {\n    var that = this;\n\n    if (void 0 === $element) {\n      return that._$focusedElement;\n    } else {\n      if ($element) {\n        if (!$element.is(that._$focusedElement)) {\n          that._$focusedElement && that._$focusedElement.removeClass(FOCUSED_ELEMENT_CLASS);\n        }\n\n        that._$focusedElement = $element;\n        clearTimeout(that._focusTimeoutID);\n        that._focusTimeoutID = setTimeout(function () {\n          delete that._focusTimeoutID;\n          that.renderFocusOverlay($element, hideBorder);\n          $element.addClass(FOCUSED_ELEMENT_CLASS);\n          that.focused.fire($element);\n        });\n      }\n    }\n  },\n  renderFocusOverlay: function renderFocusOverlay($element, hideBorder) {\n    var that = this;\n    var focusOverlayPosition;\n\n    if (!(0, _uiGrid_core3.isElementInCurrentGrid)(this, $element)) {\n      return;\n    }\n\n    if (!that._$focusOverlay) {\n      that._$focusOverlay = (0, _renderer2.default)(\"<div>\").addClass(that.addWidgetPrefix(FOCUS_OVERLAY_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS);\n    }\n\n    if (hideBorder) {\n      that._$focusOverlay.addClass(DX_HIDDEN);\n    } else {\n      if ($element.length) {\n        var align = _browser2.default.msie ? \"left bottom\" : _browser2.default.mozilla ? \"right bottom\" : \"left top\";\n        var $content = $element.closest(\".\" + that.addWidgetPrefix(CONTENT_CLASS));\n        var elemCoord = $element[0].getBoundingClientRect();\n\n        that._$focusOverlay.removeClass(DX_HIDDEN).appendTo($content).outerWidth(elemCoord.right - elemCoord.left + 1).outerHeight(elemCoord.bottom - elemCoord.top + 1);\n\n        focusOverlayPosition = {\n          precise: true,\n          my: align,\n          at: align,\n          of: $element,\n          boundary: $content.length && $content\n        };\n\n        that._updateFocusOverlaySize(that._$focusOverlay, focusOverlayPosition);\n\n        _position2.default.setup(that._$focusOverlay, focusOverlayPosition);\n\n        that._$focusOverlay.css(\"visibility\", \"visible\");\n      }\n    }\n  },\n  resize: function resize() {\n    var $focusedElement = this._$focusedElement;\n\n    if ($focusedElement) {\n      this.focus($focusedElement);\n    }\n  },\n  loseFocus: function loseFocus() {\n    this._$focusedElement && this._$focusedElement.removeClass(FOCUSED_ELEMENT_CLASS);\n    this._$focusedElement = null;\n    this._$focusOverlay && this._$focusOverlay.addClass(DX_HIDDEN);\n  },\n  init: function init() {\n    this.createAction(\"onEditorPreparing\", {\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n    this.createAction(\"onEditorPrepared\", {\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n    this._updateFocusHandler = this._updateFocusHandler || this.createAction(this._updateFocus.bind(this));\n\n    _events_engine2.default.on(_dom_adapter2.default.getDocument(), UPDATE_FOCUS_EVENTS, this._updateFocusHandler);\n\n    this._attachContainerEventHandlers();\n  },\n  _attachContainerEventHandlers: function _attachContainerEventHandlers() {\n    var that = this;\n    var $container = that.component && that.component.$element();\n\n    if ($container) {\n      _events_engine2.default.on($container, (0, _utils.addNamespace)(\"keydown\", MODULE_NAMESPACE), function (e) {\n        if (\"tab\" === (0, _utils.normalizeKeyName)(e)) {\n          that._updateFocusHandler(e);\n        }\n      });\n    }\n  },\n  _focusOverlayEventProxy: function _focusOverlayEventProxy(e) {\n    var $target = (0, _renderer2.default)(e.target);\n    var $currentTarget = (0, _renderer2.default)(e.currentTarget);\n    var element;\n    var needProxy = $target.hasClass(POINTER_EVENTS_TARGET_CLASS) || $target.hasClass(POINTER_EVENTS_NONE_CLASS);\n\n    if (!needProxy || $currentTarget.hasClass(DX_HIDDEN)) {\n      return;\n    }\n\n    $currentTarget.addClass(DX_HIDDEN);\n    element = $target.get(0).ownerDocument.elementFromPoint(e.clientX, e.clientY);\n    (0, _utils.fireEvent)({\n      originalEvent: e,\n      target: element\n    });\n    e.stopPropagation();\n    $currentTarget.removeClass(DX_HIDDEN);\n\n    if (e.type === _click2.default.name && \"INPUT\" === element.tagName) {\n      _events_engine2.default.trigger((0, _renderer2.default)(element), \"focus\");\n    }\n  },\n  dispose: function dispose() {\n    clearTimeout(this._focusTimeoutID);\n    clearTimeout(this._updateFocusTimeoutID);\n\n    _events_engine2.default.off(_dom_adapter2.default.getDocument(), UPDATE_FOCUS_EVENTS, this._updateFocusHandler);\n  }\n}).include(_ui2.default);\n\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {};\n  },\n  controllers: {\n    editorFactory: EditorFactory\n  },\n  extenders: {\n    controllers: {\n      columnsResizer: {\n        _startResizing: function _startResizing(args) {\n          this.callBase(args);\n\n          if (this.isResizing()) {\n            this.getController(\"editorFactory\").loseFocus();\n          }\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.editor_factory.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_dom_adapter","_dom_adapter2","_events_engine","_events_engine2","_uiGrid_core","_uiGrid_core2","_click","_click2","_pointer","_pointer2","_position","_position2","_utils","_browser","_browser2","_extend","_ui","_ui2","_uiGrid_core3","obj","EDITOR_INLINE_BLOCK","CELL_FOCUS_DISABLED_CLASS","FOCUS_OVERLAY_CLASS","CONTENT_CLASS","FOCUSED_ELEMENT_CLASS","ROW_CLASS","MODULE_NAMESPACE","UPDATE_FOCUS_EVENTS","POINTER_EVENTS_TARGET_CLASS","POINTER_EVENTS_NONE_CLASS","DX_HIDDEN","EditorFactory","_getFocusedElement","rowSelector","focusedElementSelector","$dataGridElement","_getFocusCellSelector","_updateFocusCore","$focus","$focusCell","hideBorders","_updateFocus","that","isFocusOverlay","e","clearTimeout","setTimeout","_updateFocusOverlaySize","$element","location","collision","callbackNames","focus","renderFocusOverlay","align","$content","elemCoord","focusOverlayPosition","precise","my","at","of","boundary","resize","$focusedElement","loseFocus","init","excludeValidators","category","_attachContainerEventHandlers","$container","_focusOverlayEventProxy","$target","$currentTarget","needProxy","element","originalEvent","target","dispose","module","defaultOptions","controllers","editorFactory","extenders","columnsResizer","_startResizing"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.editor_factory.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _click = require(\"../../events/click\");\r\nvar _click2 = _interopRequireDefault(_click);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _position = require(\"../../animation/position\");\r\nvar _position2 = _interopRequireDefault(_position);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _ui = require(\"../shared/ui.editor_factory_mixin\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar EDITOR_INLINE_BLOCK = \"dx-editor-inline-block\";\r\nvar CELL_FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\r\nvar FOCUS_OVERLAY_CLASS = \"focus-overlay\";\r\nvar CONTENT_CLASS = \"content\";\r\nvar FOCUSED_ELEMENT_CLASS = \"dx-focused\";\r\nvar ROW_CLASS = \"dx-row\";\r\nvar MODULE_NAMESPACE = \"dxDataGridEditorFactory\";\r\nvar UPDATE_FOCUS_EVENTS = (0, _utils.addNamespace)([_pointer2.default.down, \"focusin\", _click2.default.name].join(\" \"), MODULE_NAMESPACE);\r\nvar POINTER_EVENTS_TARGET_CLASS = \"dx-pointer-events-target\";\r\nvar POINTER_EVENTS_NONE_CLASS = \"dx-pointer-events-none\";\r\nvar DX_HIDDEN = \"dx-hidden\";\r\nvar EditorFactory = _uiGrid_core2.default.ViewController.inherit({\r\n    _getFocusedElement: function($dataGridElement) {\r\n        var rowSelector = this.option(\"focusedRowEnabled\") ? \"tr[tabindex]:focus\" : \"tr[tabindex]:not(.dx-data-row):focus\";\r\n        var focusedElementSelector = \"td[tabindex]:focus, \".concat(rowSelector, \", input:focus, textarea:focus, .dx-lookup-field:focus, .dx-checkbox:focus\");\r\n        return $dataGridElement.find(focusedElementSelector)\r\n    },\r\n    _getFocusCellSelector: function() {\r\n        return \".dx-row > td\"\r\n    },\r\n    _updateFocusCore: function() {\r\n        var $focus = this._$focusedElement;\r\n        var $dataGridElement = this.component && this.component.$element();\r\n        var $focusCell;\r\n        var hideBorders;\r\n        if ($dataGridElement) {\r\n            $focus = this._getFocusedElement($dataGridElement);\r\n            if ($focus.length) {\r\n                if (!$focus.hasClass(CELL_FOCUS_DISABLED_CLASS) && !$focus.hasClass(ROW_CLASS)) {\r\n                    $focusCell = $focus.closest(this._getFocusCellSelector() + \", .\" + CELL_FOCUS_DISABLED_CLASS);\r\n                    hideBorders = $focusCell.get(0) !== $focus.get(0) && $focusCell.hasClass(EDITOR_INLINE_BLOCK);\r\n                    $focus = $focusCell\r\n                }\r\n                if ($focus.length && !$focus.hasClass(CELL_FOCUS_DISABLED_CLASS)) {\r\n                    this.focus($focus, hideBorders);\r\n                    return\r\n                }\r\n            }\r\n        }\r\n        this.loseFocus()\r\n    },\r\n    _updateFocus: function(e) {\r\n        var that = this;\r\n        var isFocusOverlay = e && e.event && (0, _renderer2.default)(e.event.target).hasClass(that.addWidgetPrefix(FOCUS_OVERLAY_CLASS));\r\n        that._isFocusOverlay = that._isFocusOverlay || isFocusOverlay;\r\n        clearTimeout(that._updateFocusTimeoutID);\r\n        that._updateFocusTimeoutID = setTimeout(function() {\r\n            delete that._updateFocusTimeoutID;\r\n            if (!that._isFocusOverlay) {\r\n                that._updateFocusCore()\r\n            }\r\n            that._isFocusOverlay = false\r\n        })\r\n    },\r\n    _updateFocusOverlaySize: function($element, position) {\r\n        $element.hide();\r\n        var location = _position2.default.calculate($element, (0, _extend.extend)({\r\n            collision: \"fit\"\r\n        }, position));\r\n        if (location.h.oversize > 0) {\r\n            $element.outerWidth($element.outerWidth() - location.h.oversize)\r\n        }\r\n        if (location.v.oversize > 0) {\r\n            $element.outerHeight($element.outerHeight() - location.v.oversize)\r\n        }\r\n        $element.show()\r\n    },\r\n    callbackNames: function() {\r\n        return [\"focused\"]\r\n    },\r\n    focus: function($element, hideBorder) {\r\n        var that = this;\r\n        if (void 0 === $element) {\r\n            return that._$focusedElement\r\n        } else {\r\n            if ($element) {\r\n                if (!$element.is(that._$focusedElement)) {\r\n                    that._$focusedElement && that._$focusedElement.removeClass(FOCUSED_ELEMENT_CLASS)\r\n                }\r\n                that._$focusedElement = $element;\r\n                clearTimeout(that._focusTimeoutID);\r\n                that._focusTimeoutID = setTimeout(function() {\r\n                    delete that._focusTimeoutID;\r\n                    that.renderFocusOverlay($element, hideBorder);\r\n                    $element.addClass(FOCUSED_ELEMENT_CLASS);\r\n                    that.focused.fire($element)\r\n                })\r\n            }\r\n        }\r\n    },\r\n    renderFocusOverlay: function($element, hideBorder) {\r\n        var that = this;\r\n        var focusOverlayPosition;\r\n        if (!(0, _uiGrid_core3.isElementInCurrentGrid)(this, $element)) {\r\n            return\r\n        }\r\n        if (!that._$focusOverlay) {\r\n            that._$focusOverlay = (0, _renderer2.default)(\"<div>\").addClass(that.addWidgetPrefix(FOCUS_OVERLAY_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS)\r\n        }\r\n        if (hideBorder) {\r\n            that._$focusOverlay.addClass(DX_HIDDEN)\r\n        } else {\r\n            if ($element.length) {\r\n                var align = _browser2.default.msie ? \"left bottom\" : _browser2.default.mozilla ? \"right bottom\" : \"left top\";\r\n                var $content = $element.closest(\".\" + that.addWidgetPrefix(CONTENT_CLASS));\r\n                var elemCoord = $element[0].getBoundingClientRect();\r\n                that._$focusOverlay.removeClass(DX_HIDDEN).appendTo($content).outerWidth(elemCoord.right - elemCoord.left + 1).outerHeight(elemCoord.bottom - elemCoord.top + 1);\r\n                focusOverlayPosition = {\r\n                    precise: true,\r\n                    my: align,\r\n                    at: align,\r\n                    of: $element,\r\n                    boundary: $content.length && $content\r\n                };\r\n                that._updateFocusOverlaySize(that._$focusOverlay, focusOverlayPosition);\r\n                _position2.default.setup(that._$focusOverlay, focusOverlayPosition);\r\n                that._$focusOverlay.css(\"visibility\", \"visible\")\r\n            }\r\n        }\r\n    },\r\n    resize: function() {\r\n        var $focusedElement = this._$focusedElement;\r\n        if ($focusedElement) {\r\n            this.focus($focusedElement)\r\n        }\r\n    },\r\n    loseFocus: function() {\r\n        this._$focusedElement && this._$focusedElement.removeClass(FOCUSED_ELEMENT_CLASS);\r\n        this._$focusedElement = null;\r\n        this._$focusOverlay && this._$focusOverlay.addClass(DX_HIDDEN)\r\n    },\r\n    init: function() {\r\n        this.createAction(\"onEditorPreparing\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        });\r\n        this.createAction(\"onEditorPrepared\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        });\r\n        this._updateFocusHandler = this._updateFocusHandler || this.createAction(this._updateFocus.bind(this));\r\n        _events_engine2.default.on(_dom_adapter2.default.getDocument(), UPDATE_FOCUS_EVENTS, this._updateFocusHandler);\r\n        this._attachContainerEventHandlers()\r\n    },\r\n    _attachContainerEventHandlers: function() {\r\n        var that = this;\r\n        var $container = that.component && that.component.$element();\r\n        if ($container) {\r\n            _events_engine2.default.on($container, (0, _utils.addNamespace)(\"keydown\", MODULE_NAMESPACE), function(e) {\r\n                if (\"tab\" === (0, _utils.normalizeKeyName)(e)) {\r\n                    that._updateFocusHandler(e)\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _focusOverlayEventProxy: function(e) {\r\n        var $target = (0, _renderer2.default)(e.target);\r\n        var $currentTarget = (0, _renderer2.default)(e.currentTarget);\r\n        var element;\r\n        var needProxy = $target.hasClass(POINTER_EVENTS_TARGET_CLASS) || $target.hasClass(POINTER_EVENTS_NONE_CLASS);\r\n        if (!needProxy || $currentTarget.hasClass(DX_HIDDEN)) {\r\n            return\r\n        }\r\n        $currentTarget.addClass(DX_HIDDEN);\r\n        element = $target.get(0).ownerDocument.elementFromPoint(e.clientX, e.clientY);\r\n        (0, _utils.fireEvent)({\r\n            originalEvent: e,\r\n            target: element\r\n        });\r\n        e.stopPropagation();\r\n        $currentTarget.removeClass(DX_HIDDEN);\r\n        if (e.type === _click2.default.name && \"INPUT\" === element.tagName) {\r\n            _events_engine2.default.trigger((0, _renderer2.default)(element), \"focus\")\r\n        }\r\n    },\r\n    dispose: function() {\r\n        clearTimeout(this._focusTimeoutID);\r\n        clearTimeout(this._updateFocusTimeoutID);\r\n        _events_engine2.default.off(_dom_adapter2.default.getDocument(), UPDATE_FOCUS_EVENTS, this._updateFocusHandler)\r\n    }\r\n}).include(_ui2.default);\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {}\r\n    },\r\n    controllers: {\r\n        editorFactory: EditorFactory\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            columnsResizer: {\r\n                _startResizing: function(args) {\r\n                    this.callBase(args);\r\n                    if (this.isResizing()) {\r\n                        this.getController(\"editorFactory\").loseFocus()\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}