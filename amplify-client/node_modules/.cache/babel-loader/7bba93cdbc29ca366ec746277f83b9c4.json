{"ast":null,"code":"/**\r\n * DevExtreme (viz/axes/base_axis.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _smart_formatter = require(\"./smart_formatter\");\n\nvar _utils = require(\"../core/utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _axes_constants = require(\"./axes_constants\");\n\nvar _axes_constants2 = _interopRequireDefault(_axes_constants);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _format_helper = require(\"../../format_helper\");\n\nvar _format_helper2 = _interopRequireDefault(_format_helper);\n\nvar _parse_utils = require(\"../components/parse_utils\");\n\nvar _parse_utils2 = _interopRequireDefault(_parse_utils);\n\nvar _tick_generator = require(\"./tick_generator\");\n\nvar _tick_generator2 = _interopRequireDefault(_tick_generator);\n\nvar _translator2d = require(\"../translators/translator2d\");\n\nvar _translator2d2 = _interopRequireDefault(_translator2d);\n\nvar _range = require(\"../translators/range\");\n\nvar _tick = require(\"./tick\");\n\nvar _math2 = require(\"../../core/utils/math\");\n\nvar _date = require(\"../../core/utils/date\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _xy_axes = require(\"./xy_axes\");\n\nvar _xy_axes2 = _interopRequireDefault(_xy_axes);\n\nvar _polar_axes = require(\"./polar_axes\");\n\nvar _polar_axes2 = _interopRequireDefault(_polar_axes);\n\nvar _constant_line = require(\"./constant_line\");\n\nvar _constant_line2 = _interopRequireDefault(_constant_line);\n\nvar _strip = require(\"./strip\");\n\nvar _strip2 = _interopRequireDefault(_strip);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar convertTicksToValues = _axes_constants2.default.convertTicksToValues;\nvar patchFontOptions = _utils2.default.patchFontOptions;\nvar getVizRangeObject = _utils2.default.getVizRangeObject;\nvar getLog = _utils2.default.getLogExt;\nvar raiseTo = _utils2.default.raiseToExt;\nvar _math = Math;\nvar _abs = _math.abs;\nvar _max = _math.max;\nvar _min = _math.min;\nvar _isArray = Array.isArray;\nvar DEFAULT_AXIS_LABEL_SPACING = 5;\nvar MAX_GRID_BORDER_ADHENSION = 4;\nvar TOP = _axes_constants2.default.top;\nvar BOTTOM = _axes_constants2.default.bottom;\nvar LEFT = _axes_constants2.default.left;\nvar RIGHT = _axes_constants2.default.right;\nvar CENTER = _axes_constants2.default.center;\nvar KEEP = \"keep\";\nvar SHIFT = \"shift\";\nvar RESET = \"reset\";\nvar ROTATE = \"rotate\";\nvar DEFAULT_AXIS_DIVISION_FACTOR = 50;\nvar DEFAULT_MINOR_AXIS_DIVISION_FACTOR = 15;\nvar SCROLL_THRESHOLD = 5;\nvar MAX_MARGIN_VALUE = .8;\nvar dateIntervals = {\n  day: 864e5,\n  week: 6048e5\n};\n\nfunction getTickGenerator(options, incidentOccurred, skipTickGeneration, rangeIsEmpty, adjustDivisionFactor, _ref) {\n  var allowNegatives = _ref.allowNegatives,\n      linearThreshold = _ref.linearThreshold;\n  return _tick_generator2.default.tickGenerator({\n    axisType: options.type,\n    dataType: options.dataType,\n    logBase: options.logarithmBase,\n    allowNegatives: allowNegatives,\n    linearThreshold: linearThreshold,\n    axisDivisionFactor: adjustDivisionFactor(options.axisDivisionFactor || DEFAULT_AXIS_DIVISION_FACTOR),\n    minorAxisDivisionFactor: adjustDivisionFactor(options.minorAxisDivisionFactor || DEFAULT_MINOR_AXIS_DIVISION_FACTOR),\n    numberMultipliers: options.numberMultipliers,\n    calculateMinors: options.minorTick.visible || options.minorGrid.visible || options.calculateMinors,\n    allowDecimals: options.allowDecimals,\n    endOnTick: options.endOnTick,\n    incidentOccurred: incidentOccurred,\n    firstDayOfWeek: options.workWeek && options.workWeek[0],\n    skipTickGeneration: skipTickGeneration,\n    skipCalculationLimits: options.skipCalculationLimits,\n    generateExtraTick: options.generateExtraTick,\n    minTickInterval: options.minTickInterval,\n    rangeIsEmpty: rangeIsEmpty\n  });\n}\n\nfunction createMajorTick(axis, renderer, skippedCategory) {\n  var options = axis.getOptions();\n  return (0, _tick.tick)(axis, renderer, options.tick, options.grid, skippedCategory, false);\n}\n\nfunction createMinorTick(axis, renderer) {\n  var options = axis.getOptions();\n  return (0, _tick.tick)(axis, renderer, options.minorTick, options.minorGrid);\n}\n\nfunction createBoundaryTick(axis, renderer, isFirst) {\n  var options = axis.getOptions();\n  return (0, _tick.tick)(axis, renderer, (0, _extend.extend)({}, options.tick, {\n    visible: options.showCustomBoundaryTicks\n  }), options.grid, void 0, false, isFirst ? -1 : 1);\n}\n\nfunction callAction(elements, action, actionArgument1, actionArgument2) {\n  (elements || []).forEach(function (e) {\n    return e[action](actionArgument1, actionArgument2);\n  });\n}\n\nfunction initTickCoords(ticks) {\n  callAction(ticks, \"initCoords\");\n}\n\nfunction drawTickMarks(ticks, options) {\n  callAction(ticks, \"drawMark\", options);\n}\n\nfunction drawGrids(ticks, drawLine) {\n  callAction(ticks, \"drawGrid\", drawLine);\n}\n\nfunction updateTicksPosition(ticks, options, animate) {\n  callAction(ticks, \"updateTickPosition\", options, animate);\n}\n\nfunction updateGridsPosition(ticks, animate) {\n  callAction(ticks, \"updateGridPosition\", animate);\n}\n\nvar measureLabels = exports.measureLabels = function (items) {\n  items.forEach(function (item) {\n    item.labelBBox = item.label ? item.label.getBBox() : {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n  });\n};\n\nfunction cleanUpInvalidTicks(ticks) {\n  var i = ticks.length - 1;\n\n  for (i; i >= 0; i--) {\n    if (!removeInvalidTick(ticks, i)) {\n      break;\n    }\n  }\n\n  for (i = 0; i < ticks.length; i++) {\n    if (removeInvalidTick(ticks, i)) {\n      i--;\n    } else {\n      break;\n    }\n  }\n}\n\nfunction removeInvalidTick(ticks, i) {\n  if (null === ticks[i].coords.x || null === ticks[i].coords.y) {\n    ticks.splice(i, 1);\n    return true;\n  }\n\n  return false;\n}\n\nfunction validateAxisOptions(options) {\n  var labelOptions = options.label;\n  var position = options.position;\n  var defaultPosition = options.isHorizontal ? BOTTOM : LEFT;\n  var secondaryPosition = options.isHorizontal ? TOP : RIGHT;\n\n  if (position !== defaultPosition && position !== secondaryPosition) {\n    position = defaultPosition;\n  }\n\n  if (position === RIGHT && !labelOptions.userAlignment) {\n    labelOptions.alignment = LEFT;\n  }\n\n  options.position = position;\n  options.hoverMode = options.hoverMode ? options.hoverMode.toLowerCase() : \"none\";\n  labelOptions.minSpacing = (0, _type.isDefined)(labelOptions.minSpacing) ? labelOptions.minSpacing : DEFAULT_AXIS_LABEL_SPACING;\n  options.type && (options.type = options.type.toLowerCase());\n  options.argumentType && (options.argumentType = options.argumentType.toLowerCase());\n  options.valueType && (options.valueType = options.valueType.toLowerCase());\n}\n\nfunction getOptimalAngle(boxes, labelOpt) {\n  var angle = 180 * _math.asin((boxes[0].height + labelOpt.minSpacing) / (boxes[1].x - boxes[0].x)) / _math.PI;\n\n  return angle < 45 ? -45 : -90;\n}\n\nfunction updateLabels(ticks, step, func) {\n  ticks.forEach(function (tick, index) {\n    if (tick.label) {\n      if (index % step !== 0) {\n        tick.removeLabel();\n      } else {\n        if (func) {\n          func(tick, index);\n        }\n      }\n    }\n  });\n}\n\nfunction valueOf(value) {\n  return value.valueOf();\n}\n\nfunction getZoomBoundValue(optionValue, dataValue) {\n  if (void 0 === optionValue) {\n    return dataValue;\n  } else {\n    if (null === optionValue) {\n      return;\n    } else {\n      return optionValue;\n    }\n  }\n}\n\nfunction configureGenerator(options, axisDivisionFactor, viewPort, screenDelta, minTickInterval) {\n  var tickGeneratorOptions = (0, _extend.extend)({}, options, {\n    endOnTick: true,\n    axisDivisionFactor: axisDivisionFactor,\n    skipCalculationLimits: true,\n    generateExtraTick: true,\n    minTickInterval: minTickInterval\n  });\n  return function (tickInterval, skipTickGeneration, min, max, breaks) {\n    return getTickGenerator(tickGeneratorOptions, _common.noop, skipTickGeneration, viewPort.isEmpty(), function (v) {\n      return v;\n    }, viewPort)({\n      min: min,\n      max: max,\n      categories: viewPort.categories,\n      isSpacedMargin: viewPort.isSpacedMargin,\n      checkMinDataVisibility: viewPort.checkMinDataVisibility,\n      checkMaxDataVisibility: viewPort.checkMaxDataVisibility\n    }, screenDelta, tickInterval, (0, _type.isDefined)(tickInterval), void 0, void 0, void 0, breaks);\n  };\n}\n\nfunction convertVisualRangeObject(visualRange, optionValue) {\n  return _utils2.default.convertVisualRangeObject(visualRange, !_isArray(optionValue));\n}\n\nfunction getConstantLineSharpDirection(coord, axisCanvas) {\n  return Math.max(axisCanvas.start, axisCanvas.end) !== coord ? 1 : -1;\n}\n\nvar calculateCanvasMargins = exports.calculateCanvasMargins = function (bBoxes, canvas) {\n  var cLeft = canvas.left;\n  var cTop = canvas.top;\n  var cRight = canvas.width - canvas.right;\n  var cBottom = canvas.height - canvas.bottom;\n  return bBoxes.reduce(function (margins, bBox) {\n    if (!bBox || bBox.isEmpty) {\n      return margins;\n    }\n\n    return {\n      left: _max(margins.left, cLeft - bBox.x),\n      top: _max(margins.top, cTop - bBox.y),\n      right: _max(margins.right, bBox.x + bBox.width - cRight),\n      bottom: _max(margins.bottom, bBox.y + bBox.height - cBottom)\n    };\n  }, {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  });\n};\n\nvar Axis = exports.Axis = function (renderSettings) {\n  var that = this;\n  that._renderer = renderSettings.renderer;\n  that._incidentOccurred = renderSettings.incidentOccurred;\n  that._eventTrigger = renderSettings.eventTrigger;\n  that._stripsGroup = renderSettings.stripsGroup;\n  that._labelAxesGroup = renderSettings.labelAxesGroup;\n  that._constantLinesGroup = renderSettings.constantLinesGroup;\n  that._scaleBreaksGroup = renderSettings.scaleBreaksGroup;\n  that._axesContainerGroup = renderSettings.axesContainerGroup;\n  that._gridContainerGroup = renderSettings.gridGroup;\n  that._axisCssPrefix = renderSettings.widgetClass + \"-\" + (renderSettings.axisClass ? renderSettings.axisClass + \"-\" : \"\");\n\n  that._setType(renderSettings.axisType, renderSettings.drawingType);\n\n  that._createAxisGroups();\n\n  that._translator = that._createTranslator();\n  that.isArgumentAxis = renderSettings.isArgumentAxis;\n  that._viewport = {};\n  that._firstDrawing = true;\n  that._initRange = {};\n};\n\nAxis.prototype = {\n  constructor: Axis,\n  _drawAxis: function _drawAxis() {\n    var options = this._options;\n\n    if (!options.visible) {\n      return;\n    }\n\n    this._axisElement = this._createAxisElement();\n\n    this._updateAxisElementPosition();\n\n    this._axisElement.attr({\n      \"stroke-width\": options.width,\n      stroke: options.color,\n      \"stroke-opacity\": options.opacity\n    }).sharp(this._getSharpParam(true), this.getAxisSharpDirection()).append(this._axisLineGroup);\n  },\n  _createPathElement: function _createPathElement(points, attr, sharpDirection) {\n    return this.sharp(this._renderer.path(points, \"line\").attr(attr), sharpDirection);\n  },\n  sharp: function sharp(svgElement) {\n    var sharpDirection = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;\n    return svgElement.sharp(this._getSharpParam(), sharpDirection);\n  },\n  getAxisSharpDirection: function getAxisSharpDirection() {\n    var position = this._options.position;\n    return position === TOP || position === LEFT ? 1 : -1;\n  },\n  getSharpDirectionByCoords: function getSharpDirectionByCoords(coords) {\n    var canvas = this._getCanvasStartEnd();\n\n    var maxCoord = Math.max(canvas.start, canvas.end);\n    return this.getRadius ? 0 : maxCoord !== coords[this._isHorizontal ? \"x\" : \"y\"] ? 1 : -1;\n  },\n  _getGridLineDrawer: function _getGridLineDrawer() {\n    var that = this;\n    return function (tick, gridStyle) {\n      var grid = that._getGridPoints(tick.coords);\n\n      if (grid.points) {\n        return that._createPathElement(grid.points, gridStyle, that.getSharpDirectionByCoords(tick.coords));\n      }\n\n      return null;\n    };\n  },\n  _getGridPoints: function _getGridPoints(coords) {\n    var that = this;\n    var isHorizontal = this._isHorizontal;\n    var tickPositionField = isHorizontal ? \"x\" : \"y\";\n    var orthogonalPositions = this._orthogonalPositions;\n    var positionFrom = orthogonalPositions.start;\n    var positionTo = orthogonalPositions.end;\n    var borderOptions = that.borderOptions;\n    var canvasStart = isHorizontal ? LEFT : TOP;\n    var canvasEnd = isHorizontal ? RIGHT : BOTTOM;\n    var axisCanvas = that.getCanvas();\n    var canvas = {\n      left: axisCanvas.left,\n      right: axisCanvas.width - axisCanvas.right,\n      top: axisCanvas.top,\n      bottom: axisCanvas.height - axisCanvas.bottom\n    };\n    var firstBorderLinePosition = borderOptions.visible && borderOptions[canvasStart] ? canvas[canvasStart] : void 0;\n    var lastBorderLinePosition = borderOptions.visible && borderOptions[canvasEnd] ? canvas[canvasEnd] : void 0;\n    var minDelta = MAX_GRID_BORDER_ADHENSION + firstBorderLinePosition;\n    var maxDelta = lastBorderLinePosition - MAX_GRID_BORDER_ADHENSION;\n\n    if (that.areCoordsOutsideAxis(coords) || void 0 === coords[tickPositionField] || coords[tickPositionField] < minDelta || coords[tickPositionField] > maxDelta) {\n      return {\n        points: null\n      };\n    }\n\n    return {\n      points: isHorizontal ? null !== coords[tickPositionField] ? [coords[tickPositionField], positionFrom, coords[tickPositionField], positionTo] : null : null !== coords[tickPositionField] ? [positionFrom, coords[tickPositionField], positionTo, coords[tickPositionField]] : null\n    };\n  },\n  _getConstantLinePos: function _getConstantLinePos(parsedValue, canvasStart, canvasEnd) {\n    var value = this._getTranslatedCoord(parsedValue);\n\n    if (!(0, _type.isDefined)(value) || value < _min(canvasStart, canvasEnd) || value > _max(canvasStart, canvasEnd)) {\n      return;\n    }\n\n    return value;\n  },\n  _getConstantLineGraphicAttributes: function _getConstantLineGraphicAttributes(value) {\n    var positionFrom = this._orthogonalPositions.start;\n    var positionTo = this._orthogonalPositions.end;\n    return {\n      points: this._isHorizontal ? [value, positionFrom, value, positionTo] : [positionFrom, value, positionTo, value]\n    };\n  },\n  _createConstantLine: function _createConstantLine(value, attr) {\n    return this._createPathElement(this._getConstantLineGraphicAttributes(value).points, attr, getConstantLineSharpDirection(value, this._getCanvasStartEnd()));\n  },\n  _drawConstantLineLabelText: function _drawConstantLineLabelText(text, x, y, _ref2, group) {\n    var font = _ref2.font,\n        cssClass = _ref2.cssClass;\n    return this._renderer.text(text, x, y).css(patchFontOptions((0, _extend.extend)({}, this._options.label.font, font))).attr({\n      align: \"center\",\n      \"class\": cssClass\n    }).append(group);\n  },\n  _drawConstantLineLabels: function _drawConstantLineLabels(parsedValue, lineLabelOptions, value, group) {\n    var that = this;\n    var text = lineLabelOptions.text;\n    var options = that._options;\n    var labelOptions = options.label;\n    var coords;\n\n    that._checkAlignmentConstantLineLabels(lineLabelOptions);\n\n    text = (0, _type.isDefined)(text) ? text : that.formatLabel(parsedValue, labelOptions);\n    coords = that._getConstantLineLabelsCoords(value, lineLabelOptions);\n    return that._drawConstantLineLabelText(text, coords.x, coords.y, lineLabelOptions, group);\n  },\n  _getStripPos: function _getStripPos(startValue, endValue, canvasStart, canvasEnd, range) {\n    var isContinuous = !!(range.minVisible || range.maxVisible);\n    var categories = (range.categories || []).reduce(function (result, cat) {\n      result.push(cat.valueOf());\n      return result;\n    }, []);\n    var start;\n    var end;\n    var swap;\n    var startCategoryIndex;\n    var endCategoryIndex;\n    var min = range.minVisible;\n\n    if (!isContinuous) {\n      if ((0, _type.isDefined)(startValue) && (0, _type.isDefined)(endValue)) {\n        var parsedStartValue = this.parser(startValue);\n        var parsedEndValue = this.parser(endValue);\n        startCategoryIndex = (0, _array.inArray)((0, _type.isDefined)(parsedStartValue) ? parsedStartValue.valueOf() : void 0, categories);\n        endCategoryIndex = (0, _array.inArray)((0, _type.isDefined)(parsedEndValue) ? parsedEndValue.valueOf() : void 0, categories);\n\n        if (startCategoryIndex === -1 || endCategoryIndex === -1) {\n          return {\n            from: 0,\n            to: 0\n          };\n        }\n\n        if (startCategoryIndex > endCategoryIndex) {\n          swap = endValue;\n          endValue = startValue;\n          startValue = swap;\n        }\n      }\n    }\n\n    if ((0, _type.isDefined)(startValue)) {\n      startValue = this.validateUnit(startValue, \"E2105\", \"strip\");\n      start = this._getTranslatedCoord(startValue, -1);\n\n      if (!(0, _type.isDefined)(start) && isContinuous) {\n        start = startValue < min ? canvasStart : canvasEnd;\n      }\n    } else {\n      start = canvasStart;\n    }\n\n    if ((0, _type.isDefined)(endValue)) {\n      endValue = this.validateUnit(endValue, \"E2105\", \"strip\");\n      end = this._getTranslatedCoord(endValue, 1);\n\n      if (!(0, _type.isDefined)(end) && isContinuous) {\n        end = endValue > min ? canvasEnd : canvasStart;\n      }\n    } else {\n      end = canvasEnd;\n    }\n\n    return start < end ? {\n      from: start,\n      to: end\n    } : {\n      from: end,\n      to: start\n    };\n  },\n  _getStripGraphicAttributes: function _getStripGraphicAttributes(fromPoint, toPoint) {\n    var x;\n    var y;\n    var width;\n    var height;\n    var orthogonalPositions = this._orthogonalPositions;\n    var positionFrom = orthogonalPositions.start;\n    var positionTo = orthogonalPositions.end;\n\n    if (this._isHorizontal) {\n      x = fromPoint;\n      y = _min(positionFrom, positionTo);\n      width = toPoint - fromPoint;\n      height = _abs(positionFrom - positionTo);\n    } else {\n      x = _min(positionFrom, positionTo);\n      y = fromPoint;\n      width = _abs(positionFrom - positionTo);\n      height = _abs(fromPoint - toPoint);\n    }\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  },\n  _createStrip: function _createStrip(attrs) {\n    return this._renderer.rect(attrs.x, attrs.y, attrs.width, attrs.height);\n  },\n  _adjustStripLabels: function _adjustStripLabels() {\n    var that = this;\n\n    this._strips.forEach(function (strip) {\n      if (strip.label) {\n        strip.label.attr(that._getAdjustedStripLabelCoords(strip));\n      }\n    });\n  },\n  _adjustLabelsCoord: function _adjustLabelsCoord(offset, maxWidth, checkCanvas) {\n    var that = this;\n\n    that._majorTicks.forEach(function (tick) {\n      if (tick.label) {\n        tick.updateMultilineTextAlignment();\n        tick.label.attr(that._getLabelAdjustedCoord(tick, offset + (tick.labelOffset || 0), maxWidth, checkCanvas));\n      }\n    });\n  },\n  _adjustLabels: function _adjustLabels(offset) {\n    var that = this;\n\n    var maxSize = that._majorTicks.reduce(function (size, tick) {\n      if (!tick.label) {\n        return size;\n      }\n\n      var bBox = tick.labelRotationAngle ? _utils2.default.rotateBBox(tick.labelBBox, [tick.labelCoords.x, tick.labelCoords.y], -tick.labelRotationAngle) : tick.labelBBox;\n      return {\n        width: _max(size.width || 0, bBox.width),\n        height: _max(size.height || 0, bBox.height),\n        offset: _max(size.offset || 0, tick.labelOffset || 0)\n      };\n    }, {});\n\n    var additionalOffset = that._isHorizontal ? maxSize.height : maxSize.width;\n\n    that._adjustLabelsCoord(offset, maxSize.width);\n\n    return offset + additionalOffset + (additionalOffset && that._options.label.indentFromAxis) + maxSize.offset;\n  },\n  _getLabelAdjustedCoord: function _getLabelAdjustedCoord(tick, offset, maxWidth) {\n    offset = offset || 0;\n    var that = this;\n    var options = that._options;\n\n    var box = _utils2.default.rotateBBox(tick.labelBBox, [tick.labelCoords.x, tick.labelCoords.y], -tick.labelRotationAngle || 0);\n\n    var position = options.position;\n    var textAlign = tick.labelAlignment || options.label.alignment;\n    var isDiscrete = \"discrete\" === that._options.type;\n    var isFlatLabel = tick.labelRotationAngle % 90 === 0;\n    var indentFromAxis = options.label.indentFromAxis;\n    var axisPosition = that._axisPosition;\n    var labelCoords = tick.labelCoords;\n    var labelX = labelCoords.x;\n    var translateX;\n    var translateY;\n\n    if (that._isHorizontal) {\n      if (position === BOTTOM) {\n        translateY = axisPosition + indentFromAxis - box.y + offset;\n      } else {\n        translateY = axisPosition - indentFromAxis - (box.y + box.height) - offset;\n      }\n\n      if (textAlign === RIGHT) {\n        translateX = isDiscrete && isFlatLabel ? tick.coords.x - (box.x + box.width) : labelX - box.x - box.width;\n      } else {\n        if (textAlign === LEFT) {\n          translateX = isDiscrete && isFlatLabel ? labelX - box.x - (tick.coords.x - labelX) : labelX - box.x;\n        } else {\n          translateX = labelX - box.x - box.width / 2;\n        }\n      }\n    } else {\n      translateY = labelCoords.y - box.y - box.height / 2;\n\n      if (position === LEFT) {\n        if (textAlign === LEFT) {\n          translateX = axisPosition - indentFromAxis - maxWidth - box.x;\n        } else {\n          if (textAlign === CENTER) {\n            translateX = axisPosition - indentFromAxis - maxWidth / 2 - box.x - box.width / 2;\n          } else {\n            translateX = axisPosition - indentFromAxis - box.x - box.width;\n          }\n        }\n\n        translateX -= offset;\n      } else {\n        if (textAlign === RIGHT) {\n          translateX = axisPosition + indentFromAxis + maxWidth - box.x - box.width;\n        } else {\n          if (textAlign === CENTER) {\n            translateX = axisPosition + indentFromAxis + maxWidth / 2 - box.x - box.width / 2;\n          } else {\n            translateX = axisPosition + indentFromAxis - box.x;\n          }\n        }\n\n        translateX += offset;\n      }\n    }\n\n    return {\n      translateX: translateX,\n      translateY: translateY\n    };\n  },\n  _createAxisConstantLineGroups: function _createAxisConstantLineGroups() {\n    var that = this;\n    var renderer = that._renderer;\n    var classSelector = that._axisCssPrefix;\n    var constantLinesClass = classSelector + \"constant-lines\";\n    var insideGroup;\n    var outsideGroup1;\n    var outsideGroup2;\n    insideGroup = renderer.g().attr({\n      \"class\": constantLinesClass\n    });\n    outsideGroup1 = renderer.g().attr({\n      \"class\": constantLinesClass\n    });\n    outsideGroup2 = renderer.g().attr({\n      \"class\": constantLinesClass\n    });\n    return {\n      inside: insideGroup,\n      outside1: outsideGroup1,\n      left: outsideGroup1,\n      top: outsideGroup1,\n      outside2: outsideGroup2,\n      right: outsideGroup2,\n      bottom: outsideGroup2,\n      remove: function remove() {\n        this.inside.remove();\n        this.outside1.remove();\n        this.outside2.remove();\n      },\n      clear: function clear() {\n        this.inside.clear();\n        this.outside1.clear();\n        this.outside2.clear();\n      }\n    };\n  },\n  _createAxisGroups: function _createAxisGroups() {\n    var that = this;\n    var renderer = that._renderer;\n    var classSelector = that._axisCssPrefix;\n    that._axisGroup = renderer.g().attr({\n      \"class\": classSelector + \"axis\"\n    });\n    that._axisStripGroup = renderer.g().attr({\n      \"class\": classSelector + \"strips\"\n    });\n    that._axisGridGroup = renderer.g().attr({\n      \"class\": classSelector + \"grid\"\n    });\n    that._axisElementsGroup = renderer.g().attr({\n      \"class\": classSelector + \"elements\"\n    }).append(that._axisGroup);\n    that._axisLineGroup = renderer.g().attr({\n      \"class\": classSelector + \"line\"\n    }).append(that._axisGroup);\n    that._axisTitleGroup = renderer.g().attr({\n      \"class\": classSelector + \"title\"\n    }).append(that._axisGroup);\n    that._axisConstantLineGroups = {\n      above: that._createAxisConstantLineGroups(),\n      under: that._createAxisConstantLineGroups()\n    };\n    that._axisStripLabelGroup = renderer.g().attr({\n      \"class\": classSelector + \"axis-labels\"\n    });\n  },\n  _clearAxisGroups: function _clearAxisGroups() {\n    var that = this;\n\n    that._axisGroup.remove();\n\n    that._axisStripGroup.remove();\n\n    that._axisStripLabelGroup.remove();\n\n    that._axisConstantLineGroups.above.remove();\n\n    that._axisConstantLineGroups.under.remove();\n\n    that._axisGridGroup.remove();\n\n    that._axisTitleGroup.clear();\n\n    that._axisElementsGroup.clear();\n\n    that._axisLineGroup && that._axisLineGroup.clear();\n    that._axisStripGroup && that._axisStripGroup.clear();\n    that._axisGridGroup && that._axisGridGroup.clear();\n\n    that._axisConstantLineGroups.above.clear();\n\n    that._axisConstantLineGroups.under.clear();\n\n    that._axisStripLabelGroup && that._axisStripLabelGroup.clear();\n  },\n  _getLabelFormatObject: function _getLabelFormatObject(value, labelOptions, range, point, tickInterval, ticks) {\n    range = range || this._getViewportRange();\n    var formatObject = {\n      value: value,\n      valueText: (0, _smart_formatter.smartFormatter)(value, {\n        labelOptions: labelOptions,\n        ticks: ticks || convertTicksToValues(this._majorTicks),\n        tickInterval: (0, _type.isDefined)(tickInterval) ? tickInterval : this._tickInterval,\n        dataType: this._options.dataType,\n        logarithmBase: this._options.logarithmBase,\n        type: this._options.type,\n        showTransition: !this._options.marker.visible,\n        point: point\n      }) || \"\",\n      min: range.minVisible,\n      max: range.maxVisible\n    };\n\n    if (point) {\n      formatObject.point = point;\n    }\n\n    return formatObject;\n  },\n  formatLabel: function formatLabel(value, labelOptions, range, point, tickInterval, ticks) {\n    var formatObject = this._getLabelFormatObject(value, labelOptions, range, point, tickInterval, ticks);\n\n    return (0, _type.isFunction)(labelOptions.customizeText) ? labelOptions.customizeText.call(formatObject, formatObject) : formatObject.valueText;\n  },\n  formatHint: function formatHint(value, labelOptions, range) {\n    var formatObject = this._getLabelFormatObject(value, labelOptions, range);\n\n    return (0, _type.isFunction)(labelOptions.customizeHint) ? labelOptions.customizeHint.call(formatObject, formatObject) : void 0;\n  },\n  formatRange: function formatRange(startValue, endValue, interval) {\n    return (0, _smart_formatter.formatRange)(startValue, endValue, interval, this.getOptions());\n  },\n  _setTickOffset: function _setTickOffset() {\n    var options = this._options;\n    var discreteAxisDivisionMode = options.discreteAxisDivisionMode;\n    this._tickOffset = +(\"crossLabels\" !== discreteAxisDivisionMode || !discreteAxisDivisionMode);\n  },\n  getMargins: function getMargins() {\n    var that = this;\n    var options = that._options;\n    var position = options.position;\n    var placeholderSize = options.placeholderSize;\n    var canvas = that.getCanvas();\n    var cLeft = canvas.left;\n    var cTop = canvas.top;\n    var cRight = canvas.width - canvas.right;\n    var cBottom = canvas.height - canvas.bottom;\n\n    var edgeMarginCorrection = _max(options.grid.visible && options.grid.width || 0, options.tick.visible && options.tick.width || 0);\n\n    var constantLineAboveSeries = that._axisConstantLineGroups.above;\n    var constantLineUnderSeries = that._axisConstantLineGroups.under;\n    var boxes = [that._axisElementsGroup, constantLineAboveSeries.outside1, constantLineAboveSeries.outside2, constantLineUnderSeries.outside1, constantLineUnderSeries.outside2, that._axisLineGroup].map(function (group) {\n      return group && group.getBBox();\n    }).concat(function (group) {\n      var box = group && group.getBBox();\n\n      if (!box || box.isEmpty) {\n        return box;\n      }\n\n      if (that._isHorizontal) {\n        box.x = cLeft;\n        box.width = cRight - cLeft;\n      } else {\n        box.y = cTop;\n        box.height = cBottom - cTop;\n      }\n\n      return box;\n    }(that._axisTitleGroup));\n    var margins = calculateCanvasMargins(boxes, canvas);\n    margins[position] += options.crosshairMargin;\n\n    if (placeholderSize) {\n      margins[position] = placeholderSize;\n    }\n\n    if (edgeMarginCorrection) {\n      if (that._isHorizontal && canvas.right < edgeMarginCorrection && margins.right < edgeMarginCorrection) {\n        margins.right = edgeMarginCorrection;\n      }\n\n      if (!that._isHorizontal && canvas.bottom < edgeMarginCorrection && margins.bottom < edgeMarginCorrection) {\n        margins.bottom = edgeMarginCorrection;\n      }\n    }\n\n    return margins;\n  },\n  validateUnit: function validateUnit(unit, idError, parameters) {\n    var that = this;\n    unit = that.parser(unit);\n\n    if (void 0 === unit && idError) {\n      that._incidentOccurred(idError, [parameters]);\n    }\n\n    return unit;\n  },\n  _setType: function _setType(axisType, drawingType) {\n    var that = this;\n    var axisTypeMethods;\n\n    switch (axisType) {\n      case \"xyAxes\":\n        axisTypeMethods = _xy_axes2.default;\n        break;\n\n      case \"polarAxes\":\n        axisTypeMethods = _polar_axes2.default;\n    }\n\n    (0, _extend.extend)(that, axisTypeMethods[drawingType]);\n  },\n  _getSharpParam: function _getSharpParam() {\n    return true;\n  },\n  _disposeBreaksGroup: _common.noop,\n  dispose: function dispose() {\n    var that = this;\n    [that._axisElementsGroup, that._axisStripGroup, that._axisGroup].forEach(function (g) {\n      g.dispose();\n    });\n    that._strips = that._title = null;\n    that._axisStripGroup = that._axisConstantLineGroups = that._axisStripLabelGroup = that._axisBreaksGroup = null;\n    that._axisLineGroup = that._axisElementsGroup = that._axisGridGroup = null;\n    that._axisGroup = that._axisTitleGroup = null;\n    that._axesContainerGroup = that._stripsGroup = that._constantLinesGroup = null;\n    that._renderer = that._options = that._textOptions = that._textFontStyles = null;\n    that._translator = null;\n    that._majorTicks = that._minorTicks = null;\n\n    that._disposeBreaksGroup();\n  },\n  getOptions: function getOptions() {\n    return this._options;\n  },\n  setPane: function setPane(pane) {\n    this.pane = pane;\n    this._options.pane = pane;\n  },\n  setTypes: function setTypes(type, axisType, typeSelector) {\n    this._options.type = type || this._options.type;\n    this._options[typeSelector] = axisType || this._options[typeSelector];\n\n    this._updateTranslator();\n  },\n  resetTypes: function resetTypes(typeSelector) {\n    this._options.type = this._initTypes.type;\n    this._options[typeSelector] = this._initTypes[typeSelector];\n  },\n  getTranslator: function getTranslator() {\n    return this._translator;\n  },\n  updateOptions: function updateOptions(options) {\n    var that = this;\n    var labelOpt = options.label;\n    validateAxisOptions(options);\n    that._options = options;\n    options.tick = options.tick || {};\n    options.minorTick = options.minorTick || {};\n    options.grid = options.grid || {};\n    options.minorGrid = options.minorGrid || {};\n    options.title = options.title || {};\n    options.marker = options.marker || {};\n    that._initTypes = {\n      type: options.type,\n      argumentType: options.argumentType,\n      valueType: options.valueType\n    };\n\n    that._setTickOffset();\n\n    that._isHorizontal = options.isHorizontal;\n    that.pane = options.pane;\n    that.name = options.name;\n    that.priority = options.priority;\n    that._hasLabelFormat = \"\" !== labelOpt.format && (0, _type.isDefined)(labelOpt.format);\n    that._textOptions = {\n      opacity: labelOpt.opacity,\n      align: \"center\",\n      \"class\": labelOpt.cssClass\n    };\n    that._textFontStyles = _utils2.default.patchFontOptions(labelOpt.font);\n\n    if (options.type === _axes_constants2.default.logarithmic) {\n      if (options.logarithmBaseError) {\n        that._incidentOccurred(\"E2104\");\n\n        delete options.logarithmBaseError;\n      }\n    }\n\n    that._updateTranslator();\n\n    that._createConstantLines();\n\n    that._strips = (options.strips || []).map(function (o) {\n      return (0, _strip2.default)(that, o);\n    });\n    that._majorTicks = that._minorTicks = null;\n    that._firstDrawing = true;\n  },\n  calculateInterval: function calculateInterval(value, prevValue) {\n    var options = this._options;\n\n    if (!options || options.type !== _axes_constants2.default.logarithmic) {\n      return _abs(value - prevValue);\n    }\n\n    var _ref3 = new _range.Range(this.getTranslator().getBusinessRange()),\n        allowNegatives = _ref3.allowNegatives,\n        linearThreshold = _ref3.linearThreshold;\n\n    return _abs(getLog(value, options.logarithmBase, allowNegatives, linearThreshold) - getLog(prevValue, options.logarithmBase, allowNegatives, linearThreshold));\n  },\n  _processCanvas: function _processCanvas(canvas) {\n    return canvas;\n  },\n  updateCanvas: function updateCanvas(canvas) {\n    var positions = this._orthogonalPositions = {\n      start: !this._isHorizontal ? canvas.left : canvas.top,\n      end: !this._isHorizontal ? canvas.width - canvas.right : canvas.height - canvas.bottom\n    };\n    this._canvas = canvas;\n    positions.center = positions.start + (positions.end - positions.start) / 2;\n\n    this._translator.updateCanvas(this._processCanvas(canvas));\n\n    this._initAxisPositions();\n  },\n  getCanvas: function getCanvas() {\n    return this._canvas;\n  },\n  getAxisShift: function getAxisShift() {\n    return this._axisShift || 0;\n  },\n  hideTitle: function hideTitle() {\n    var that = this;\n\n    if (that._options.title.text) {\n      that._incidentOccurred(\"W2105\", [that._isHorizontal ? \"horizontal\" : \"vertical\"]);\n\n      that._axisTitleGroup.clear();\n    }\n  },\n  getTitle: function getTitle() {\n    return this._title;\n  },\n  hideOuterElements: function hideOuterElements() {\n    var that = this;\n    var options = that._options;\n\n    if ((options.label.visible || that._outsideConstantLines.length) && !that._translator.getBusinessRange().isEmpty()) {\n      that._incidentOccurred(\"W2106\", [that._isHorizontal ? \"horizontal\" : \"vertical\"]);\n\n      that._axisElementsGroup.clear();\n\n      callAction(that._outsideConstantLines, \"removeLabel\");\n    }\n  },\n  adjustViewport: function adjustViewport(businessRange) {\n    var that = this;\n    var options = that._options;\n    var isDiscrete = options.type === _axes_constants2.default.discrete;\n    var categories = that._seriesData && that._seriesData.categories || [];\n    var wholeRange = that.adjustRange(getVizRangeObject(options.wholeRange));\n    var visualRange = that.getViewport() || {};\n    var result = new _range.Range(businessRange);\n\n    that._addConstantLinesToRange(result, \"minVisible\", \"maxVisible\");\n\n    var minDefined = (0, _type.isDefined)(visualRange.startValue);\n    var maxDefined = (0, _type.isDefined)(visualRange.endValue);\n\n    if (!isDiscrete) {\n      minDefined = minDefined && (!(0, _type.isDefined)(wholeRange.endValue) || visualRange.startValue < wholeRange.endValue);\n      maxDefined = maxDefined && (!(0, _type.isDefined)(wholeRange.startValue) || visualRange.endValue > wholeRange.startValue);\n    }\n\n    var minVisible = minDefined ? visualRange.startValue : result.minVisible;\n    var maxVisible = maxDefined ? visualRange.endValue : result.maxVisible;\n\n    if (!isDiscrete) {\n      result.min = (0, _type.isDefined)(wholeRange.startValue) ? wholeRange.startValue : result.min;\n      result.max = (0, _type.isDefined)(wholeRange.endValue) ? wholeRange.endValue : result.max;\n    } else {\n      var categoriesInfo = _utils2.default.getCategoriesInfo(categories, wholeRange.startValue, wholeRange.endValue);\n\n      categories = categoriesInfo.categories;\n      result.categories = categories;\n    }\n\n    var adjustedVisualRange = _utils2.default.adjustVisualRange({\n      axisType: options.type,\n      dataType: options.dataType,\n      base: options.logarithmBase\n    }, {\n      startValue: minDefined ? visualRange.startValue : void 0,\n      endValue: maxDefined ? visualRange.endValue : void 0,\n      length: visualRange.length\n    }, {\n      categories: categories,\n      min: wholeRange.startValue,\n      max: wholeRange.endValue\n    }, {\n      categories: categories,\n      min: minVisible,\n      max: maxVisible\n    });\n\n    result.minVisible = adjustedVisualRange.startValue;\n    result.maxVisible = adjustedVisualRange.endValue;\n    !(0, _type.isDefined)(result.min) && (result.min = result.minVisible);\n    !(0, _type.isDefined)(result.max) && (result.max = result.maxVisible);\n    result.addRange({});\n    return result;\n  },\n  adjustRange: function adjustRange(range) {\n    range = range || {};\n    var isDiscrete = this._options.type === _axes_constants2.default.discrete;\n    var isLogarithmic = this._options.type === _axes_constants2.default.logarithmic;\n    var disabledNegatives = false === this._options.allowNegatives;\n\n    if (isLogarithmic) {\n      range.startValue = disabledNegatives && range.startValue <= 0 ? null : range.startValue;\n      range.endValue = disabledNegatives && range.endValue <= 0 ? null : range.endValue;\n    }\n\n    if (!isDiscrete && (0, _type.isDefined)(range.startValue) && (0, _type.isDefined)(range.endValue) && range.startValue > range.endValue) {\n      var tmp = range.endValue;\n      range.endValue = range.startValue;\n      range.startValue = tmp;\n    }\n\n    return range;\n  },\n  _getVisualRangeUpdateMode: function _getVisualRangeUpdateMode(viewport, newRange, oppositeValue) {\n    var value = this._options.visualRangeUpdateMode;\n    var translator = this._translator;\n    var range = this._seriesData;\n\n    if (this.isArgumentAxis) {\n      if ([SHIFT, KEEP, RESET].indexOf(value) === -1) {\n        if (range.axisType === _axes_constants2.default.discrete) {\n          var categories = range.categories;\n          var newCategories = newRange.categories;\n          var visualRange = this.visualRange();\n\n          if (categories && newCategories && categories.length && newCategories.map(function (c) {\n            return c.valueOf();\n          }).join(\",\").indexOf(categories.map(function (c) {\n            return c.valueOf();\n          }).join(\",\")) !== -1 && (visualRange.startValue.valueOf() !== categories[0].valueOf() || visualRange.endValue.valueOf() !== categories[categories.length - 1].valueOf())) {\n            value = KEEP;\n          } else {\n            value = RESET;\n          }\n        } else {\n          var minPoint = translator.translate(range.min);\n          var minVisiblePoint = translator.translate(viewport.startValue);\n          var maxPoint = translator.translate(range.max);\n          var maxVisiblePoint = translator.translate(viewport.endValue);\n\n          if (minPoint === minVisiblePoint && maxPoint === maxVisiblePoint) {\n            value = RESET;\n          } else {\n            if (minPoint !== minVisiblePoint && maxPoint === maxVisiblePoint) {\n              value = SHIFT;\n            } else {\n              value = KEEP;\n            }\n          }\n        }\n      }\n    } else {\n      if ([KEEP, RESET].indexOf(value) === -1) {\n        if (oppositeValue === KEEP) {\n          value = KEEP;\n        } else {\n          value = RESET;\n        }\n      }\n    }\n\n    return value;\n  },\n  _handleBusinessRangeChanged: function _handleBusinessRangeChanged(oppositeVisualRangeUpdateMode, axisReinitialized, newRange) {\n    var that = this;\n    var visualRange = this.visualRange();\n\n    if (axisReinitialized || that._translator.getBusinessRange().isEmpty()) {\n      return;\n    }\n\n    var visualRangeUpdateMode = that._lastVisualRangeUpdateMode = that._getVisualRangeUpdateMode(visualRange, newRange, oppositeVisualRangeUpdateMode);\n\n    if (!that.isArgumentAxis) {\n      var viewport = that.getViewport();\n\n      if (!(0, _type.isDefined)(viewport.startValue) && !(0, _type.isDefined)(viewport.endValue) && !(0, _type.isDefined)(viewport.length)) {\n        visualRangeUpdateMode = RESET;\n      }\n    }\n\n    that._prevDataWasEmpty && (visualRangeUpdateMode = KEEP);\n\n    if (visualRangeUpdateMode === KEEP) {\n      that._setVisualRange([visualRange.startValue, visualRange.endValue]);\n    }\n\n    if (visualRangeUpdateMode === RESET) {\n      that._setVisualRange([null, null]);\n    }\n\n    if (visualRangeUpdateMode === SHIFT) {\n      that._setVisualRange({\n        length: that.getVisualRangeLength()\n      });\n    }\n  },\n  getVisualRangeLength: function getVisualRangeLength(range) {\n    var currentBusinessRange = range || this._translator.getBusinessRange();\n\n    var type = this._options.type;\n    var length;\n\n    if (type === _axes_constants2.default.logarithmic) {\n      length = (0, _math2.adjust)(this.calculateInterval(currentBusinessRange.maxVisible, currentBusinessRange.minVisible));\n    } else {\n      if (type === _axes_constants2.default.discrete) {\n        var categoriesInfo = _utils2.default.getCategoriesInfo(currentBusinessRange.categories, currentBusinessRange.minVisible, currentBusinessRange.maxVisible);\n\n        length = categoriesInfo.categories.length;\n      } else {\n        length = currentBusinessRange.maxVisible - currentBusinessRange.minVisible;\n      }\n    }\n\n    return length;\n  },\n  getVisualRangeCenter: function getVisualRangeCenter(range) {\n    var businessRange = this._translator.getBusinessRange();\n\n    var currentBusinessRange = range || businessRange;\n    var _this$_options = this._options,\n        type = _this$_options.type,\n        logarithmBase = _this$_options.logarithmBase;\n    var center;\n\n    if (!(0, _type.isDefined)(currentBusinessRange.minVisible) || !(0, _type.isDefined)(currentBusinessRange.maxVisible)) {\n      return;\n    }\n\n    if (type === _axes_constants2.default.logarithmic) {\n      var allowNegatives = currentBusinessRange.allowNegatives,\n          linearThreshold = currentBusinessRange.linearThreshold,\n          minVisible = currentBusinessRange.minVisible,\n          maxVisible = currentBusinessRange.maxVisible;\n      center = raiseTo((0, _math2.adjust)(getLog(maxVisible, logarithmBase, allowNegatives, linearThreshold) + getLog(minVisible, logarithmBase, allowNegatives, linearThreshold)) / 2, logarithmBase, allowNegatives, linearThreshold);\n    } else {\n      if (type === _axes_constants2.default.discrete) {\n        var categoriesInfo = _utils2.default.getCategoriesInfo(currentBusinessRange.categories, currentBusinessRange.minVisible, currentBusinessRange.maxVisible);\n\n        var index = Math.ceil(categoriesInfo.categories.length / 2) - 1;\n        center = businessRange.categories.indexOf(categoriesInfo.categories[index]);\n      } else {\n        center = (currentBusinessRange.maxVisible.valueOf() + currentBusinessRange.minVisible.valueOf()) / 2;\n      }\n    }\n\n    return center;\n  },\n  setBusinessRange: function setBusinessRange(range, axisReinitialized, oppositeVisualRangeUpdateMode, argCategories) {\n    var that = this;\n    var options = that._options;\n    var isDiscrete = options.type === _axes_constants2.default.discrete;\n\n    that._handleBusinessRangeChanged(oppositeVisualRangeUpdateMode, axisReinitialized, range);\n\n    that._seriesData = new _range.Range(range);\n\n    var dataIsEmpty = that._seriesData.isEmpty();\n\n    that._prevDataWasEmpty = dataIsEmpty;\n\n    that._seriesData.addRange({\n      categories: options.categories,\n      dataType: options.dataType,\n      axisType: options.type,\n      base: options.logarithmBase,\n      invert: options.inverted\n    });\n\n    if (options.type === _axes_constants2.default.logarithmic) {\n      that._seriesData.addRange({\n        allowNegatives: void 0 !== options.allowNegatives ? options.allowNegatives : range.min <= 0\n      });\n\n      if (!isNaN(options.linearThreshold)) {\n        that._seriesData.linearThreshold = options.linearThreshold;\n      }\n    }\n\n    if (!isDiscrete) {\n      if (!(0, _type.isDefined)(that._seriesData.min) && !(0, _type.isDefined)(that._seriesData.max)) {\n        var visualRange = that.getViewport();\n        visualRange && that._seriesData.addRange({\n          min: visualRange.startValue,\n          max: visualRange.endValue\n        });\n      }\n\n      var synchronizedValue = options.synchronizedValue;\n\n      if ((0, _type.isDefined)(synchronizedValue)) {\n        that._seriesData.addRange({\n          min: synchronizedValue,\n          max: synchronizedValue\n        });\n      }\n    }\n\n    that._seriesData.minVisible = void 0 === that._seriesData.minVisible ? that._seriesData.min : that._seriesData.minVisible;\n    that._seriesData.maxVisible = void 0 === that._seriesData.maxVisible ? that._seriesData.max : that._seriesData.maxVisible;\n\n    if (!that.isArgumentAxis && options.showZero) {\n      that._seriesData.correctValueZeroLevel();\n    }\n\n    that._seriesData.sortCategories(that.getCategoriesSorter(argCategories));\n\n    that._seriesData.breaks = that._breaks = that._getScaleBreaks(options, that._seriesData, that._series, that.isArgumentAxis);\n\n    that._translator.updateBusinessRange(that.adjustViewport(that._seriesData));\n  },\n  _addConstantLinesToRange: function _addConstantLinesToRange(dataRange, minValueField, maxValueField) {\n    this._outsideConstantLines.concat(this._insideConstantLines || []).forEach(function (cl) {\n      if (cl.options.extendAxis) {\n        var _dataRange$addRange;\n\n        var value = cl.getParsedValue();\n        dataRange.addRange((_dataRange$addRange = {}, _defineProperty(_dataRange$addRange, minValueField, value), _defineProperty(_dataRange$addRange, maxValueField, value), _dataRange$addRange));\n      }\n    });\n  },\n  setGroupSeries: function setGroupSeries(series) {\n    this._series = series;\n  },\n  getLabelsPosition: function getLabelsPosition() {\n    var that = this;\n    var options = that._options;\n    var position = options.position;\n    var labelShift = options.label.indentFromAxis + (that._axisShift || 0) + that._constantLabelOffset;\n    var axisPosition = that._axisPosition;\n    return position === TOP || position === LEFT ? axisPosition - labelShift : axisPosition + labelShift;\n  },\n  getFormattedValue: function getFormattedValue(value, options, point) {\n    var labelOptions = this._options.label;\n    return (0, _type.isDefined)(value) ? this.formatLabel(value, (0, _extend.extend)(true, {}, labelOptions, options), void 0, point) : null;\n  },\n  _getBoundaryTicks: function _getBoundaryTicks(majors, viewPort) {\n    var that = this;\n    var length = majors.length;\n    var options = that._options;\n    var customBounds = options.customBoundTicks;\n    var min = viewPort.minVisible;\n    var max = viewPort.maxVisible;\n    var addMinMax = options.showCustomBoundaryTicks ? that._boundaryTicksVisibility : {};\n    var boundaryTicks = [];\n\n    if (options.type === _axes_constants2.default.discrete) {\n      if (that._tickOffset && 0 !== majors.length) {\n        boundaryTicks = [majors[0], majors[majors.length - 1]];\n      }\n    } else {\n      if (customBounds) {\n        if (addMinMax.min && (0, _type.isDefined)(customBounds[0])) {\n          boundaryTicks.push(customBounds[0]);\n        }\n\n        if (addMinMax.max && (0, _type.isDefined)(customBounds[1])) {\n          boundaryTicks.push(customBounds[1]);\n        }\n      } else {\n        if (addMinMax.min && (0 === length || majors[0] > min)) {\n          boundaryTicks.push(min);\n        }\n\n        if (addMinMax.max && (0 === length || majors[length - 1] < max)) {\n          boundaryTicks.push(max);\n        }\n      }\n    }\n\n    return boundaryTicks;\n  },\n  setPercentLabelFormat: function setPercentLabelFormat() {\n    if (!this._hasLabelFormat) {\n      this._options.label.format = \"percent\";\n    }\n  },\n  resetAutoLabelFormat: function resetAutoLabelFormat() {\n    if (!this._hasLabelFormat) {\n      delete this._options.label.format;\n    }\n  },\n  getMultipleAxesSpacing: function getMultipleAxesSpacing() {\n    return this._options.multipleAxesSpacing || 0;\n  },\n  getTicksValues: function getTicksValues() {\n    return {\n      majorTicksValues: convertTicksToValues(this._majorTicks),\n      minorTicksValues: convertTicksToValues(this._minorTicks)\n    };\n  },\n  setTicks: function setTicks(ticks) {\n    var majors = ticks.majorTicks || [];\n    this._majorTicks = majors.map(createMajorTick(this, this._renderer, this._getSkippedCategory(majors)));\n    this._minorTicks = (ticks.minorTicks || []).map(createMinorTick(this, this._renderer));\n    this._isSynchronized = true;\n  },\n  _adjustDivisionFactor: function _adjustDivisionFactor(val) {\n    return val;\n  },\n  _getTicks: function _getTicks(viewPort, incidentOccurred, skipTickGeneration) {\n    var that = this;\n    var options = that._options;\n    var customTicks = options.customTicks;\n    var customMinorTicks = options.customMinorTicks;\n    return getTickGenerator(options, incidentOccurred || that._incidentOccurred, skipTickGeneration, that._translator.getBusinessRange().isEmpty(), that._adjustDivisionFactor.bind(that), viewPort)({\n      min: viewPort.minVisible,\n      max: viewPort.maxVisible,\n      categories: viewPort.categories,\n      isSpacedMargin: viewPort.isSpacedMargin,\n      checkMinDataVisibility: viewPort.checkMinDataVisibility,\n      checkMaxDataVisibility: viewPort.checkMaxDataVisibility\n    }, that._getScreenDelta(), options.tickInterval, \"ignore\" === options.label.overlappingBehavior || options.forceUserTickInterval, {\n      majors: customTicks,\n      minors: customMinorTicks\n    }, options.minorTickInterval, options.minorTickCount, that._breaks);\n  },\n  _createTicksAndLabelFormat: function _createTicksAndLabelFormat(range, incidentOccurred) {\n    var options = this._options;\n    var ticks;\n    ticks = this._getTicks(range, incidentOccurred, false);\n\n    if (!range.isEmpty() && options.type === _axes_constants2.default.discrete && \"datetime\" === options.dataType && !this._hasLabelFormat && ticks.ticks.length) {\n      options.label.format = _format_helper2.default.getDateFormatByTicks(ticks.ticks);\n    }\n\n    return ticks;\n  },\n  getAggregationInfo: function getAggregationInfo(useAllAggregatedPoints, range) {\n    var that = this;\n    var options = that._options;\n    var marginOptions = that._marginOptions;\n    var businessRange = new _range.Range(that.getTranslator().getBusinessRange()).addRange(range);\n    var visualRange = that.getViewport();\n    var minVisible = visualRange && (0, _type.isDefined)(visualRange.startValue) ? visualRange.startValue : businessRange.minVisible;\n    var maxVisible = visualRange && (0, _type.isDefined)(visualRange.endValue) ? visualRange.endValue : businessRange.maxVisible;\n    var ticks = [];\n\n    if (options.type === _axes_constants2.default.discrete && options.aggregateByCategory) {\n      return {\n        aggregateByCategory: true\n      };\n    }\n\n    var aggregationInterval = options.aggregationInterval;\n    var aggregationGroupWidth = options.aggregationGroupWidth;\n\n    if (!aggregationGroupWidth && marginOptions) {\n      if (marginOptions.checkInterval) {\n        aggregationGroupWidth = options.axisDivisionFactor;\n      }\n\n      if (marginOptions.sizePointNormalState) {\n        aggregationGroupWidth = Math.min(marginOptions.sizePointNormalState, options.axisDivisionFactor);\n      }\n    }\n\n    var minInterval = !options.aggregationGroupWidth && !aggregationInterval && range.interval;\n    var generateTicks = configureGenerator(options, aggregationGroupWidth, businessRange, that._getScreenDelta(), minInterval);\n    var tickInterval = generateTicks(aggregationInterval, true, minVisible, maxVisible, that._breaks).tickInterval;\n\n    if (options.type !== _axes_constants2.default.discrete) {\n      var min = useAllAggregatedPoints ? businessRange.min : minVisible;\n      var max = useAllAggregatedPoints ? businessRange.max : maxVisible;\n\n      if ((0, _type.isDefined)(min) && (0, _type.isDefined)(max)) {\n        var add = _utils2.default.getAddFunction({\n          base: options.logarithmBase,\n          axisType: options.type,\n          dataType: options.dataType\n        }, false);\n\n        var start = min;\n        var end = max;\n\n        if (!useAllAggregatedPoints) {\n          var maxMinDistance = Math.max(that.calculateInterval(max, min), \"datetime\" === options.dataType ? (0, _date.dateToMilliseconds)(tickInterval) : tickInterval);\n          start = add(min, maxMinDistance, -1);\n          end = add(max, maxMinDistance);\n        }\n\n        start = start < businessRange.min ? businessRange.min : start;\n        end = end > businessRange.max ? businessRange.max : end;\n\n        var breaks = that._getScaleBreaks(options, {\n          minVisible: start,\n          maxVisible: end\n        }, that._series, that.isArgumentAxis);\n\n        ticks = generateTicks(tickInterval, false, start, end, breaks).ticks;\n      }\n    }\n\n    that._aggregationInterval = tickInterval;\n    return {\n      interval: tickInterval,\n      ticks: ticks\n    };\n  },\n  createTicks: function createTicks(canvas) {\n    var that = this;\n    var renderer = that._renderer;\n    var options = that._options;\n    var ticks;\n    var boundaryTicks;\n    var range;\n\n    if (!canvas) {\n      return;\n    }\n\n    that._isSynchronized = false;\n    that.updateCanvas(canvas);\n    that._estimatedTickInterval = that._getTicks(that.adjustViewport(this._seriesData), _common.noop, true).tickInterval;\n    range = that._getViewportRange();\n\n    var margins = this._calculateValueMargins();\n\n    range.addRange({\n      minVisible: margins.minValue,\n      maxVisible: margins.maxValue,\n      isSpacedMargin: margins.isSpacedMargin,\n      checkMinDataVisibility: !this.isArgumentAxis && margins.checkInterval && !(0, _type.isDefined)(options.min) && margins.minValue.valueOf() > 0,\n      checkMaxDataVisibility: !this.isArgumentAxis && margins.checkInterval && !(0, _type.isDefined)(options.max) && margins.maxValue.valueOf() < 0\n    });\n    ticks = that._createTicksAndLabelFormat(range);\n    boundaryTicks = that._getBoundaryTicks(ticks.ticks, that._getViewportRange());\n\n    if (options.showCustomBoundaryTicks && boundaryTicks.length) {\n      that._boundaryTicks = [boundaryTicks[0]].map(createBoundaryTick(that, renderer, true));\n\n      if (boundaryTicks.length > 1) {\n        that._boundaryTicks = that._boundaryTicks.concat([boundaryTicks[1]].map(createBoundaryTick(that, renderer, false)));\n      }\n    } else {\n      that._boundaryTicks = [];\n    }\n\n    var minors = (ticks.minorTicks || []).filter(function (minor) {\n      return !boundaryTicks.some(function (boundary) {\n        return valueOf(boundary) === valueOf(minor);\n      });\n    });\n    that._tickInterval = ticks.tickInterval;\n    that._minorTickInterval = ticks.minorTickInterval;\n    var oldMajorTicks = that._majorTicks || [];\n    var majorTicksByValues = oldMajorTicks.reduce(function (r, t) {\n      r[t.value.valueOf()] = t;\n      return r;\n    }, {});\n    var sameType = (0, _type.type)(ticks.ticks[0]) === (0, _type.type)(oldMajorTicks[0] && oldMajorTicks[0].value);\n\n    var skippedCategory = that._getSkippedCategory(ticks.ticks);\n\n    var majorTicks = ticks.ticks.map(function (v) {\n      var tick = majorTicksByValues[v.valueOf()];\n\n      if (tick && sameType) {\n        delete majorTicksByValues[v.valueOf()];\n        tick.setSkippedCategory(skippedCategory);\n        return tick;\n      } else {\n        return createMajorTick(that, renderer, skippedCategory)(v);\n      }\n    });\n    that._majorTicks = majorTicks;\n    var oldMinorTicks = that._minorTicks || [];\n    that._minorTicks = minors.map(function (v, i) {\n      var minorTick = oldMinorTicks[i];\n\n      if (minorTick) {\n        minorTick.updateValue(v);\n        return minorTick;\n      }\n\n      return createMinorTick(that, renderer)(v);\n    });\n    that._ticksToRemove = Object.keys(majorTicksByValues).map(function (k) {\n      return majorTicksByValues[k];\n    }).concat(oldMinorTicks.slice(that._minorTicks.length, oldMinorTicks.length));\n    that._correctedBreaks = ticks.breaks;\n\n    that._reinitTranslator(that._getViewportRange());\n  },\n  _reinitTranslator: function _reinitTranslator(range) {\n    var that = this;\n    var translator = that._translator;\n\n    if (that._correctedBreaks) {\n      range.breaks = that._correctedBreaks;\n    }\n\n    if (that._isSynchronized) {\n      return;\n    }\n\n    translator.updateBusinessRange(that.adjustViewport(range));\n  },\n  _getViewportRange: function _getViewportRange() {\n    return this.adjustViewport(this._seriesData);\n  },\n  setMarginOptions: function setMarginOptions(options) {\n    this._marginOptions = options;\n  },\n  getMarginOptions: function getMarginOptions() {\n    return (0, _type.isDefined)(this._marginOptions) ? this._marginOptions : {};\n  },\n  allowToExtendVisualRange: function allowToExtendVisualRange(isEnd) {\n    var wholeRange = this.adjustRange(getVizRangeObject(this._options.wholeRange));\n    var bound = isEnd ? wholeRange.endValue : wholeRange.startValue;\n    return !this.isArgumentAxis || !(0, _type.isDefined)(bound) && this.isExtremePosition(isEnd);\n  },\n  _calculateRangeInterval: function _calculateRangeInterval(interval) {\n    var isDateTime = \"datetime\" === this._options.dataType;\n    var minArgs = [];\n\n    var addToArgs = function addToArgs(value) {\n      (0, _type.isDefined)(value) && minArgs.push(isDateTime ? (0, _date.dateToMilliseconds)(value) : value);\n    };\n\n    addToArgs(this._tickInterval);\n    addToArgs(this._estimatedTickInterval);\n    (0, _type.isDefined)(interval) && minArgs.push(interval);\n    addToArgs(this._aggregationInterval);\n    return this._calculateWorkWeekInterval(_min.apply(this, minArgs));\n  },\n  _calculateWorkWeekInterval: function _calculateWorkWeekInterval(businessInterval) {\n    var options = this._options;\n\n    if (\"datetime\" === options.dataType && options.workdaysOnly && businessInterval) {\n      var workWeek = options.workWeek.length * dateIntervals.day;\n      var weekend = dateIntervals.week - workWeek;\n\n      if (workWeek !== businessInterval && weekend < businessInterval) {\n        var weekendsCount = Math.ceil(businessInterval / dateIntervals.week);\n        businessInterval = weekend >= businessInterval ? dateIntervals.day : businessInterval - weekend * weekendsCount;\n      } else {\n        if (weekend >= businessInterval && businessInterval > dateIntervals.day) {\n          businessInterval = dateIntervals.day;\n        }\n      }\n    }\n\n    return businessInterval;\n  },\n  _calculateValueMargins: function _calculateValueMargins(ticks) {\n    this._resetMargins();\n\n    var that = this;\n    var margins = that.getMarginOptions();\n    var marginSize = (margins.size || 0) / 2;\n    var options = that._options;\n\n    var dataRange = this._getViewportRange();\n\n    var viewPort = this.getViewport();\n\n    var screenDelta = that._getScreenDelta();\n\n    var isDiscrete = (options.type || \"\").indexOf(_axes_constants2.default.discrete) !== -1;\n    var valueMarginsEnabled = options.valueMarginsEnabled && !isDiscrete;\n    var translator = that._translator;\n    var minValueMargin = options.minValueMargin;\n    var maxValueMargin = options.maxValueMargin;\n    var minPadding = 0;\n    var maxPadding = 0;\n    var interval = 0;\n    var rangeInterval;\n\n    if (dataRange.stubData || !screenDelta) {\n      return {\n        startPadding: 0,\n        endPadding: 0\n      };\n    }\n\n    function getConvertIntervalCoefficient(intervalInPx) {\n      var ratioOfCanvasRange = translator.ratioOfCanvasRange();\n      return ratioOfCanvasRange / (ratioOfCanvasRange * screenDelta / (intervalInPx + screenDelta));\n    }\n\n    if (that.isArgumentAxis && margins.checkInterval) {\n      rangeInterval = that._calculateRangeInterval(dataRange.interval);\n      var pxInterval = translator.getInterval(rangeInterval);\n\n      if (isFinite(pxInterval)) {\n        interval = Math.ceil(pxInterval / (2 * getConvertIntervalCoefficient(pxInterval)));\n      } else {\n        rangeInterval = 0;\n      }\n    }\n\n    var minPercentPadding;\n    var maxPercentPadding;\n    var maxPaddingValue = screenDelta * MAX_MARGIN_VALUE / 2;\n\n    if (valueMarginsEnabled) {\n      if ((0, _type.isDefined)(minValueMargin)) {\n        minPercentPadding = isFinite(minValueMargin) ? minValueMargin : 0;\n      } else {\n        minPadding = Math.max(marginSize, interval);\n        minPadding = Math.min(maxPaddingValue, minPadding);\n      }\n\n      if ((0, _type.isDefined)(maxValueMargin)) {\n        maxPercentPadding = isFinite(maxValueMargin) ? maxValueMargin : 0;\n      } else {\n        maxPadding = Math.max(marginSize, interval);\n        maxPadding = Math.min(maxPaddingValue, maxPadding);\n      }\n    }\n\n    var percentStick = margins.percentStick && !this.isArgumentAxis;\n\n    if (percentStick) {\n      if (1 === _abs(dataRange.max)) {\n        maxPadding = 0;\n      }\n\n      if (1 === _abs(dataRange.min)) {\n        minPadding = 0;\n      }\n    }\n\n    var canvasStartEnd = that._getCanvasStartEnd();\n\n    var commonMargin = 1 + (minPercentPadding || 0) + (maxPercentPadding || 0);\n    var screenDeltaWithMargins = (screenDelta - minPadding - maxPadding) / commonMargin || screenDelta;\n\n    if (void 0 !== minPercentPadding || void 0 !== maxPercentPadding) {\n      if (void 0 !== minPercentPadding) {\n        minPadding = screenDeltaWithMargins * minPercentPadding;\n      }\n\n      if (void 0 !== maxPercentPadding) {\n        maxPadding = screenDeltaWithMargins * maxPercentPadding;\n      }\n    }\n\n    var minValue;\n    var maxValue;\n\n    if (options.type !== _axes_constants2.default.discrete && ticks && ticks.length > 1 && !options.skipViewportExtending && !viewPort.action && false !== options.endOnTick) {\n      var length = ticks.length;\n      var firstTickPosition = translator.translate(ticks[0].value);\n      var lastTickPosition = translator.translate(ticks[length - 1].value);\n      var invertMultiplier = firstTickPosition > lastTickPosition ? -1 : 1;\n\n      var minTickPadding = _max(invertMultiplier * (canvasStartEnd.start - firstTickPosition), 0);\n\n      var maxTickPadding = _max(invertMultiplier * (lastTickPosition - canvasStartEnd.end), 0);\n\n      if (minTickPadding > minPadding || maxTickPadding > maxPadding) {\n        var commonPadding = maxTickPadding + minTickPadding;\n        var coeff = getConvertIntervalCoefficient(commonPadding);\n\n        if (minTickPadding >= minPadding) {\n          minValue = ticks[0].value;\n        }\n\n        if (maxTickPadding >= maxPadding) {\n          maxValue = ticks[length - 1].value;\n        }\n\n        minPadding = _max(minTickPadding, minPadding) / coeff;\n        maxPadding = _max(maxTickPadding, maxPadding) / coeff;\n      }\n    }\n\n    minPercentPadding = void 0 === minPercentPadding ? minPadding / screenDeltaWithMargins : minPercentPadding;\n    maxPercentPadding = void 0 === maxPercentPadding ? maxPadding / screenDeltaWithMargins : maxPercentPadding;\n\n    if (!isDiscrete) {\n      if (this._translator.isInverted()) {\n        minValue = (0, _type.isDefined)(minValue) ? minValue : translator.from(canvasStartEnd.start + screenDelta * minPercentPadding, -1);\n        maxValue = (0, _type.isDefined)(maxValue) ? maxValue : translator.from(canvasStartEnd.end - screenDelta * maxPercentPadding, 1);\n      } else {\n        minValue = (0, _type.isDefined)(minValue) ? minValue : translator.from(canvasStartEnd.start - screenDelta * minPercentPadding, -1);\n        maxValue = (0, _type.isDefined)(maxValue) ? maxValue : translator.from(canvasStartEnd.end + screenDelta * maxPercentPadding, 1);\n      }\n    }\n\n    function correctZeroLevel(minPoint, maxPoint) {\n      var minExpectedPadding = _abs(canvasStartEnd.start - minPoint);\n\n      var maxExpectedPadding = _abs(canvasStartEnd.end - maxPoint);\n\n      var coeff = getConvertIntervalCoefficient(minExpectedPadding + maxExpectedPadding);\n      minPadding = minExpectedPadding / coeff;\n      maxPadding = maxExpectedPadding / coeff;\n    }\n\n    if (!that.isArgumentAxis) {\n      if (minValue * dataRange.min <= 0 && minValue * dataRange.minVisible <= 0) {\n        correctZeroLevel(translator.translate(0), translator.translate(maxValue));\n        minValue = 0;\n      }\n\n      if (maxValue * dataRange.max <= 0 && maxValue * dataRange.maxVisible <= 0) {\n        correctZeroLevel(translator.translate(minValue), translator.translate(0));\n        maxValue = 0;\n      }\n    }\n\n    return {\n      startPadding: this._translator.isInverted() ? maxPadding : minPadding,\n      endPadding: this._translator.isInverted() ? minPadding : maxPadding,\n      minValue: minValue,\n      maxValue: maxValue,\n      interval: rangeInterval,\n      isSpacedMargin: minPadding === maxPadding && 0 !== minPadding\n    };\n  },\n  applyMargins: function applyMargins() {\n    if (this._isSynchronized) {\n      return;\n    }\n\n    var margins = this._calculateValueMargins(this._majorTicks);\n\n    var canvas = (0, _extend.extend)({}, this._canvas, {\n      startPadding: margins.startPadding,\n      endPadding: margins.endPadding\n    });\n\n    this._translator.updateCanvas(this._processCanvas(canvas));\n\n    if (isFinite(margins.interval)) {\n      var br = this._translator.getBusinessRange();\n\n      br.addRange({\n        interval: margins.interval\n      });\n\n      this._translator.updateBusinessRange(br);\n    }\n  },\n  _resetMargins: function _resetMargins() {\n    this._reinitTranslator(this._getViewportRange());\n\n    if (this._canvas) {\n      this._translator.updateCanvas(this._processCanvas(this._canvas));\n    }\n  },\n  _createConstantLines: function _createConstantLines() {\n    var _this = this;\n\n    var constantLines = (this._options.constantLines || []).map(function (o) {\n      return (0, _constant_line2.default)(_this, o);\n    });\n    this._outsideConstantLines = constantLines.filter(function (l) {\n      return \"outside\" === l.labelPosition;\n    });\n    this._insideConstantLines = constantLines.filter(function (l) {\n      return \"inside\" === l.labelPosition;\n    });\n  },\n  draw: function draw(canvas, borderOptions) {\n    var that = this;\n    var options = this._options;\n    that.borderOptions = borderOptions || {\n      visible: false\n    };\n\n    that._resetMargins();\n\n    that.createTicks(canvas);\n    that.applyMargins();\n\n    that._clearAxisGroups();\n\n    initTickCoords(that._majorTicks);\n    initTickCoords(that._minorTicks);\n    initTickCoords(that._boundaryTicks);\n\n    that._axisGroup.append(that._axesContainerGroup);\n\n    that._drawAxis();\n\n    that._drawTitle();\n\n    drawTickMarks(that._majorTicks, options.tick);\n    drawTickMarks(that._minorTicks, options.minorTick);\n    drawTickMarks(that._boundaryTicks, options.tick);\n\n    var drawGridLine = that._getGridLineDrawer();\n\n    drawGrids(that._majorTicks, drawGridLine);\n    drawGrids(that._minorTicks, drawGridLine);\n    callAction(that._majorTicks, \"drawLabel\", that._getViewportRange());\n\n    that._majorTicks.forEach(function (tick) {\n      tick.labelRotationAngle = 0;\n      tick.labelAlignment = void 0;\n      tick.labelOffset = 0;\n    });\n\n    callAction(that._outsideConstantLines.concat(that._insideConstantLines), \"draw\");\n    callAction(that._strips, \"draw\");\n    that._dateMarkers = that._drawDateMarkers() || [];\n    that._labelAxesGroup && that._axisStripLabelGroup.append(that._labelAxesGroup);\n    that._gridContainerGroup && that._axisGridGroup.append(that._gridContainerGroup);\n    that._stripsGroup && that._axisStripGroup.append(that._stripsGroup);\n\n    if (that._constantLinesGroup) {\n      that._axisConstantLineGroups.above.inside.append(that._constantLinesGroup.above);\n\n      that._axisConstantLineGroups.above.outside1.append(that._constantLinesGroup.above);\n\n      that._axisConstantLineGroups.above.outside2.append(that._constantLinesGroup.above);\n\n      that._axisConstantLineGroups.under.inside.append(that._constantLinesGroup.under);\n\n      that._axisConstantLineGroups.under.outside1.append(that._constantLinesGroup.under);\n\n      that._axisConstantLineGroups.under.outside2.append(that._constantLinesGroup.under);\n    }\n\n    that._measureTitle();\n\n    measureLabels(that._majorTicks);\n    var textWidth;\n    var textHeight;\n    var convertedTickInterval;\n    var tickInterval = that._tickInterval;\n\n    if ((0, _type.isDefined)(tickInterval)) {\n      convertedTickInterval = that.getTranslator().getInterval(\"datetime\" === options.dataType ? (0, _date.dateToMilliseconds)(tickInterval) : tickInterval);\n    }\n\n    var usefulSpace = (0, _type.isDefined)(options.placeholderSize) ? options.placeholderSize - options.label.indentFromAxis : void 0;\n\n    if (that._isHorizontal) {\n      textWidth = convertedTickInterval;\n      textHeight = usefulSpace;\n    } else {\n      textWidth = usefulSpace;\n      textHeight = convertedTickInterval;\n    }\n\n    var displayMode = that._validateDisplayMode(options.label.displayMode);\n\n    var overlappingMode = that._validateOverlappingMode(options.label.overlappingBehavior, displayMode);\n\n    var wordWrapMode = options.label.wordWrap || \"none\";\n    var overflowMode = options.label.textOverflow || \"none\";\n\n    if ((\"none\" !== wordWrapMode || \"none\" !== overflowMode) && displayMode !== ROTATE && overlappingMode !== ROTATE && \"auto\" !== overlappingMode) {\n      var correctByWidth = false;\n      var correctByHeight = false;\n\n      if (textWidth) {\n        if (that._majorTicks.some(function (tick) {\n          return tick.labelBBox.width > textWidth;\n        })) {\n          correctByWidth = true;\n        }\n      }\n\n      if (textHeight) {\n        if (that._majorTicks.some(function (tick) {\n          return tick.labelBBox.height > textHeight;\n        })) {\n          correctByHeight = true;\n        }\n      }\n\n      if (correctByWidth || correctByHeight) {\n        that._majorTicks.forEach(function (tick) {\n          tick.label && tick.label.setMaxSize(textWidth, textHeight, options.label);\n        });\n\n        measureLabels(that._majorTicks);\n      }\n    }\n\n    measureLabels(that._outsideConstantLines);\n    measureLabels(that._insideConstantLines);\n    measureLabels(that._strips);\n    measureLabels(that._dateMarkers);\n\n    that._adjustConstantLineLabels(that._insideConstantLines);\n\n    that._adjustStripLabels();\n\n    var offset = that._constantLabelOffset = that._adjustConstantLineLabels(that._outsideConstantLines);\n\n    if (!that._translator.getBusinessRange().isEmpty()) {\n      that._setLabelsPlacement();\n\n      offset = that._adjustLabels(offset);\n    }\n\n    offset = that._adjustDateMarkers(offset);\n\n    that._adjustTitle(offset);\n  },\n  _measureTitle: _common.noop,\n  animate: function animate() {\n    callAction(this._majorTicks, \"animateLabels\");\n  },\n  updateSize: function updateSize(canvas, animate) {\n    var updateTitle = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : true;\n    var that = this;\n    that.updateCanvas(canvas);\n\n    if (updateTitle) {\n      that._checkTitleOverflow();\n\n      that._measureTitle();\n\n      that._updateTitleCoords();\n    }\n\n    that._reinitTranslator(that._getViewportRange());\n\n    that.applyMargins();\n    var animationEnabled = !that._firstDrawing && animate;\n    var options = this._options;\n    initTickCoords(that._majorTicks);\n    initTickCoords(that._minorTicks);\n    initTickCoords(that._boundaryTicks);\n    cleanUpInvalidTicks(that._majorTicks);\n    cleanUpInvalidTicks(that._minorTicks);\n    cleanUpInvalidTicks(that._boundaryTicks);\n\n    if (this._axisElement) {\n      that._updateAxisElementPosition();\n    }\n\n    updateTicksPosition(that._majorTicks, options.tick, animationEnabled);\n    updateTicksPosition(that._minorTicks, options.minorTick, animationEnabled);\n    updateTicksPosition(that._boundaryTicks, options.tick);\n    callAction(that._majorTicks, \"updateLabelPosition\", animationEnabled);\n\n    that._outsideConstantLines.concat(that._insideConstantLines || []).forEach(function (l) {\n      return l.updatePosition(animationEnabled);\n    });\n\n    callAction(that._strips, \"updatePosition\", animationEnabled);\n    updateGridsPosition(that._majorTicks, animationEnabled);\n    updateGridsPosition(that._minorTicks, animationEnabled);\n\n    if (animationEnabled) {\n      callAction(that._ticksToRemove || [], \"fadeOutElements\");\n    }\n\n    that.prepareAnimation();\n    that._ticksToRemove = null;\n\n    if (!that._translator.getBusinessRange().isEmpty()) {\n      that._firstDrawing = false;\n    }\n  },\n  prepareAnimation: function prepareAnimation() {\n    var that = this;\n    var action = \"saveCoords\";\n    callAction(that._majorTicks, action);\n    callAction(that._minorTicks, action);\n    callAction(that._insideConstantLines, action);\n    callAction(that._outsideConstantLines, action);\n    callAction(that._strips, action);\n  },\n  applyClipRects: function applyClipRects(elementsClipID, canvasClipID) {\n    this._axisGroup.attr({\n      \"clip-path\": canvasClipID\n    });\n\n    this._axisStripGroup.attr({\n      \"clip-path\": elementsClipID\n    });\n  },\n  _mergeViewportOptions: function _mergeViewportOptions() {\n    var that = this;\n    var options = that._options;\n    var visualRange = {};\n    var visualRangeOptionValue = options._customVisualRange;\n\n    if (((0, _type.isDefined)(options.max) || (0, _type.isDefined)(options.min)) && !(0, _type.isDefined)(visualRangeOptionValue.startValue) && !(0, _type.isDefined)(visualRangeOptionValue.endValue) && !(0, _type.isDefined)(visualRangeOptionValue.length)) {\n      visualRange = {\n        startValue: options.min,\n        endValue: options.max\n      };\n    } else {\n      visualRange = visualRangeOptionValue;\n    }\n\n    that._setVisualRange(visualRange);\n  },\n  _validateVisualRange: function _validateVisualRange(visualRange) {\n    var range = getVizRangeObject(visualRange);\n\n    if (void 0 !== range.startValue) {\n      range.startValue = this.validateUnit(range.startValue);\n    }\n\n    if (void 0 !== range.endValue) {\n      range.endValue = this.validateUnit(range.endValue);\n    }\n\n    return convertVisualRangeObject(range, visualRange);\n  },\n  _validateOptions: function _validateOptions(options) {\n    var that = this;\n\n    if (void 0 !== options.min) {\n      options.min = that.validateUnit(options.min, \"E2106\");\n    }\n\n    if (void 0 !== options.max) {\n      options.max = that.validateUnit(options.max, \"E2106\");\n    }\n\n    options.wholeRange = that._validateVisualRange(options.wholeRange);\n    options.visualRange = options._customVisualRange = that._validateVisualRange(options._customVisualRange);\n\n    that._mergeViewportOptions();\n  },\n  validate: function validate() {\n    var that = this;\n    var options = that._options;\n    var dataType = that.isArgumentAxis ? options.argumentType : options.valueType;\n    var parser = dataType ? _parse_utils2.default.getParser(dataType) : function (unit) {\n      return unit;\n    };\n    that.parser = parser;\n    options.dataType = dataType;\n\n    that._validateOptions(options);\n  },\n  resetVisualRange: function resetVisualRange(isSilent) {\n    this._seriesData.minVisible = this._seriesData.min;\n    this._seriesData.maxVisible = this._seriesData.max;\n    this.handleZooming([null, null], {\n      start: !!isSilent,\n      end: !!isSilent\n    });\n  },\n  _setVisualRange: function _setVisualRange(visualRange, allowPartialUpdate) {\n    var range = this.adjustRange(_utils2.default.getVizRangeObject(visualRange));\n\n    if (allowPartialUpdate) {\n      (0, _type.isDefined)(range.startValue) && (this._viewport.startValue = range.startValue);\n      (0, _type.isDefined)(range.endValue) && (this._viewport.endValue = range.endValue);\n    } else {\n      this._viewport = range;\n    }\n  },\n  _applyZooming: function _applyZooming(visualRange, allowPartialUpdate) {\n    var that = this;\n\n    that._resetVisualRangeOption();\n\n    that._setVisualRange(visualRange, allowPartialUpdate);\n\n    var viewPort = that.getViewport();\n    that._breaks = that._getScaleBreaks(that._options, {\n      minVisible: viewPort.startValue,\n      maxVisible: viewPort.endValue\n    }, that._series, that.isArgumentAxis);\n\n    that._translator.updateBusinessRange(that._getViewportRange());\n  },\n  getZoomStartEventArg: function getZoomStartEventArg(event, actionType) {\n    return {\n      axis: this,\n      range: this.visualRange(),\n      cancel: false,\n      event: event,\n      actionType: actionType\n    };\n  },\n  getZoomEndEventArg: function getZoomEndEventArg(previousRange, event, actionType, zoomFactor, shift) {\n    var newRange = this.visualRange();\n    return {\n      axis: this,\n      previousRange: previousRange,\n      range: newRange,\n      cancel: false,\n      event: event,\n      actionType: actionType,\n      zoomFactor: zoomFactor,\n      shift: shift,\n      rangeStart: newRange.startValue,\n      rangeEnd: newRange.endValue\n    };\n  },\n  getZoomBounds: function getZoomBounds() {\n    var wholeRange = _utils2.default.getVizRangeObject(this._options.wholeRange);\n\n    var range = this.getTranslator().getBusinessRange();\n    var secondPriorityRange = {\n      startValue: getZoomBoundValue(this._initRange.startValue, range.min),\n      endValue: getZoomBoundValue(this._initRange.endValue, range.max)\n    };\n    return {\n      startValue: getZoomBoundValue(wholeRange.startValue, secondPriorityRange.startValue),\n      endValue: getZoomBoundValue(wholeRange.endValue, secondPriorityRange.endValue)\n    };\n  },\n  setInitRange: function setInitRange() {\n    this._initRange = {};\n\n    if (0 === Object.keys(this._options.wholeRange || {}).length) {\n      this._initRange = this.getZoomBounds();\n    }\n  },\n  _resetVisualRangeOption: function _resetVisualRangeOption() {\n    this._options._customVisualRange = {};\n  },\n  setCustomVisualRange: function setCustomVisualRange(range) {\n    this._options._customVisualRange = range;\n  },\n  visualRange: function visualRange() {\n    var that = this;\n    var args = arguments;\n    var visualRange;\n\n    if (0 === args.length) {\n      var adjustedRange = that._getAdjustedBusinessRange();\n\n      var startValue = adjustedRange.minVisible;\n      var endValue = adjustedRange.maxVisible;\n\n      if (that._options.type === _axes_constants2.default.discrete) {\n        startValue = (0, _type.isDefined)(startValue) ? startValue : adjustedRange.categories[0];\n        endValue = (0, _type.isDefined)(endValue) ? endValue : adjustedRange.categories[adjustedRange.categories.length - 1];\n        return {\n          startValue: startValue,\n          endValue: endValue,\n          categories: _utils2.default.getCategoriesInfo(adjustedRange.categories, startValue, endValue).categories\n        };\n      }\n\n      return {\n        startValue: startValue,\n        endValue: endValue\n      };\n    } else {\n      if (_isArray(args[0])) {\n        visualRange = args[0];\n      } else {\n        if ((0, _type.isPlainObject)(args[0])) {\n          visualRange = (0, _extend.extend)({}, args[0]);\n        } else {\n          visualRange = [args[0], args[1]];\n        }\n      }\n    }\n\n    var zoomResults = that.handleZooming(visualRange, args[1]);\n\n    if (!zoomResults.isPrevented) {\n      that._visualRange(that, zoomResults);\n    }\n  },\n  handleZooming: function handleZooming(visualRange, preventEvents, domEvent, action) {\n    var that = this;\n    preventEvents = preventEvents || {};\n\n    if ((0, _type.isDefined)(visualRange)) {\n      visualRange = that._validateVisualRange(visualRange);\n      visualRange.action = action;\n    }\n\n    var zoomStartEvent = that.getZoomStartEventArg(domEvent, action);\n    var previousRange = zoomStartEvent.range;\n    !preventEvents.start && that._eventTrigger(\"zoomStart\", zoomStartEvent);\n    var zoomResults = {\n      isPrevented: zoomStartEvent.cancel,\n      skipEventRising: preventEvents.skipEventRising,\n      range: visualRange || zoomStartEvent.range\n    };\n\n    if (!zoomStartEvent.cancel) {\n      (0, _type.isDefined)(visualRange) && that._applyZooming(visualRange, preventEvents.allowPartialUpdate);\n\n      if (!(0, _type.isDefined)(that._storedZoomEndParams)) {\n        that._storedZoomEndParams = {\n          startRange: previousRange,\n          type: this.getOptions().type\n        };\n      }\n\n      that._storedZoomEndParams.event = domEvent;\n      that._storedZoomEndParams.action = action;\n      that._storedZoomEndParams.prevent = !!preventEvents.end;\n    }\n\n    return zoomResults;\n  },\n  handleZoomEnd: function handleZoomEnd() {\n    var that = this;\n\n    if ((0, _type.isDefined)(that._storedZoomEndParams) && !that._storedZoomEndParams.prevent) {\n      var previousRange = that._storedZoomEndParams.startRange;\n      var domEvent = that._storedZoomEndParams.event;\n      var action = that._storedZoomEndParams.action;\n      var previousBusinessRange = {\n        minVisible: previousRange.startValue,\n        maxVisible: previousRange.endValue,\n        categories: previousRange.categories\n      };\n\n      var typeIsNotChanged = that.getOptions().type === that._storedZoomEndParams.type;\n\n      var shift = typeIsNotChanged ? (0, _math2.adjust)(that.getVisualRangeCenter() - that.getVisualRangeCenter(previousBusinessRange)) : NaN;\n      var zoomFactor = typeIsNotChanged ? +(Math.round(that.getVisualRangeLength(previousBusinessRange) / that.getVisualRangeLength() + \"e+2\") + \"e-2\") : NaN;\n      var zoomEndEvent = that.getZoomEndEventArg(previousRange, domEvent, action, zoomFactor, shift);\n      zoomEndEvent.cancel = that.isZoomingLowerLimitOvercome(1 === zoomFactor ? \"pan\" : \"zoom\", zoomFactor);\n\n      that._eventTrigger(\"zoomEnd\", zoomEndEvent);\n\n      if (zoomEndEvent.cancel) {\n        that.restorePreviousVisualRange(previousRange);\n      }\n\n      that._storedZoomEndParams = null;\n    }\n  },\n  restorePreviousVisualRange: function restorePreviousVisualRange(previousRange) {\n    var that = this;\n    that._storedZoomEndParams = null;\n\n    that._applyZooming(previousRange);\n\n    that._visualRange(that, previousRange);\n  },\n  isZoomingLowerLimitOvercome: function isZoomingLowerLimitOvercome(actionType, zoomFactor, range) {\n    var that = this;\n    var options = that._options;\n    var minZoom = options.minVisualRangeLength;\n    var isOvercoming = \"zoom\" === actionType && zoomFactor >= 1;\n\n    var businessRange = that._translator.getBusinessRange();\n\n    var visualRange;\n\n    if ((0, _type.isDefined)(range)) {\n      visualRange = that.adjustRange(_utils2.default.getVizRangeObject(range));\n      visualRange = {\n        minVisible: visualRange.startValue,\n        maxVisible: visualRange.endValue,\n        categories: businessRange.categories\n      };\n    }\n\n    var visualRangeLength = that.getVisualRangeLength(visualRange);\n\n    if (\"discrete\" !== options.type) {\n      if ((0, _type.isDefined)(minZoom)) {\n        if (\"datetime\" === options.dataType && !(0, _type.isNumeric)(minZoom)) {\n          minZoom = (0, _date.dateToMilliseconds)(minZoom);\n        }\n\n        isOvercoming &= minZoom >= visualRangeLength;\n      } else {\n        var canvasLength = that._translator.canvasLength;\n        var fullRange = {\n          minVisible: businessRange.min,\n          maxVisible: businessRange.max,\n          categories: businessRange.categories\n        };\n        isOvercoming &= that.getVisualRangeLength(fullRange) / canvasLength >= visualRangeLength;\n      }\n    } else {\n      !(0, _type.isDefined)(minZoom) && (minZoom = 1);\n      isOvercoming &= (0, _type.isDefined)(range) && that.getVisualRangeLength() === minZoom && visualRangeLength <= minZoom;\n    }\n\n    return !!isOvercoming;\n  },\n  dataVisualRangeIsReduced: function dataVisualRangeIsReduced() {\n    var minDataValue;\n    var maxDataValue;\n    var translator = this.getTranslator();\n\n    if (\"discrete\" === this._options.type) {\n      var categories = translator.getBusinessRange().categories;\n      minDataValue = categories[0];\n      maxDataValue = categories[categories.length - 1];\n    } else {\n      var seriesData = this._seriesData;\n      minDataValue = seriesData.min;\n      maxDataValue = seriesData.max;\n    }\n\n    if (!(0, _type.isDefined)(minDataValue) || !(0, _type.isDefined)(maxDataValue)) {\n      return false;\n    }\n\n    var startPoint = translator.translate(minDataValue);\n    var endPoint = translator.translate(maxDataValue);\n    var edges = [Math.min(startPoint, endPoint), Math.max(startPoint, endPoint)];\n    var visualRange = this.visualRange();\n    var visualRangeStartPoint = translator.translate(visualRange.startValue);\n    var visualRangeEndPoint = translator.translate(visualRange.endValue);\n    return visualRangeStartPoint > edges[0] && visualRangeStartPoint < edges[1] || visualRangeEndPoint > edges[0] && visualRangeEndPoint < edges[1] || visualRangeStartPoint === visualRangeEndPoint && edges[0] !== edges[1];\n  },\n  isExtremePosition: function isExtremePosition(isMax) {\n    var extremeDataValue;\n    var seriesData;\n\n    if (\"discrete\" === this._options.type) {\n      seriesData = this._translator.getBusinessRange();\n      extremeDataValue = isMax ? seriesData.categories[seriesData.categories.length - 1] : seriesData.categories[0];\n    } else {\n      seriesData = this.getZoomBounds();\n      extremeDataValue = isMax ? seriesData.endValue : seriesData.startValue;\n    }\n\n    var translator = this.getTranslator();\n    var extremePoint = translator.translate(extremeDataValue);\n    var visualRange = this.visualRange();\n    var visualRangePoint = isMax ? translator.translate(visualRange.endValue) : translator.translate(visualRange.startValue);\n    return _abs(visualRangePoint - extremePoint) < SCROLL_THRESHOLD;\n  },\n  getViewport: function getViewport() {\n    return this._viewport;\n  },\n  getFullTicks: function getFullTicks() {\n    var majors = this._majorTicks || [];\n\n    if (this._options.type === _axes_constants2.default.discrete) {\n      return convertTicksToValues(majors);\n    } else {\n      return convertTicksToValues(majors.concat(this._minorTicks, this._boundaryTicks)).sort(function (a, b) {\n        return valueOf(a) - valueOf(b);\n      });\n    }\n  },\n  measureLabels: function measureLabels(canvas, withIndents) {\n    var that = this;\n    var options = that._options;\n    var widthAxis = options.visible ? options.width : 0;\n    var ticks;\n    var maxText;\n    var text;\n    var box;\n    var indent = withIndents ? options.label.indentFromAxis + .5 * options.tick.length : 0;\n    var tickInterval;\n\n    var viewportRange = that._getViewportRange();\n\n    if (viewportRange.isEmpty() || !options.label.visible || !that._axisElementsGroup) {\n      return {\n        height: widthAxis,\n        width: widthAxis,\n        x: 0,\n        y: 0\n      };\n    }\n\n    if (that._majorTicks) {\n      ticks = convertTicksToValues(that._majorTicks);\n    } else {\n      this.updateCanvas(canvas);\n      ticks = that._createTicksAndLabelFormat(viewportRange, _common.noop);\n      tickInterval = ticks.tickInterval;\n      ticks = ticks.ticks;\n    }\n\n    maxText = ticks.reduce(function (prevLabel, tick, index) {\n      var label = that.formatLabel(tick, options.label, viewportRange, void 0, tickInterval, ticks);\n\n      if (prevLabel.length < label.length) {\n        return label;\n      } else {\n        return prevLabel;\n      }\n    }, that.formatLabel(ticks[0], options.label, viewportRange, void 0, tickInterval, ticks));\n    text = that._renderer.text(maxText, 0, 0).css(that._textFontStyles).attr(that._textOptions).append(that._renderer.root);\n    box = text.getBBox();\n    text.remove();\n    return {\n      x: box.x,\n      y: box.y,\n      width: box.width + indent,\n      height: box.height + indent\n    };\n  },\n  _setLabelsPlacement: function _setLabelsPlacement() {\n    if (!this._options.label.visible) {\n      return;\n    }\n\n    var that = this;\n    var labelOpt = that._options.label;\n\n    var displayMode = that._validateDisplayMode(labelOpt.displayMode);\n\n    var overlappingMode = that._validateOverlappingMode(labelOpt.overlappingBehavior, displayMode);\n\n    var ignoreOverlapping = \"none\" === overlappingMode || \"ignore\" === overlappingMode;\n    var behavior = {\n      rotationAngle: labelOpt.rotationAngle,\n      staggeringSpacing: labelOpt.staggeringSpacing\n    };\n    var notRecastStep;\n\n    var boxes = that._majorTicks.map(function (tick) {\n      return tick.labelBBox;\n    });\n\n    var step;\n    step = that._getStep(boxes);\n\n    switch (displayMode) {\n      case ROTATE:\n        if (ignoreOverlapping) {\n          notRecastStep = true;\n          step = 1;\n        }\n\n        that._applyLabelMode(displayMode, step, boxes, labelOpt, notRecastStep);\n\n        break;\n\n      case \"stagger\":\n        if (ignoreOverlapping) {\n          step = 2;\n        }\n\n        that._applyLabelMode(displayMode, _max(step, 2), boxes, labelOpt);\n\n        break;\n\n      default:\n        that._applyLabelOverlapping(boxes, overlappingMode, step, behavior);\n\n    }\n  },\n  _applyLabelOverlapping: function _applyLabelOverlapping(boxes, mode, step, behavior) {\n    var that = this;\n    var labelOpt = that._options.label;\n    var majorTicks = that._majorTicks;\n\n    if (\"none\" === mode || \"ignore\" === mode) {\n      return;\n    }\n\n    var checkLabels = function checkLabels(box, index, array) {\n      if (0 === index) {\n        return false;\n      }\n\n      return _axes_constants2.default.areLabelsOverlap(box, array[index - 1], labelOpt.minSpacing, labelOpt.alignment);\n    };\n\n    if (step > 1 && boxes.some(checkLabels)) {\n      that._applyLabelMode(mode, step, boxes, behavior);\n    }\n\n    that._checkBoundedLabelsOverlapping(majorTicks, boxes, mode);\n  },\n  _applyLabelMode: function _applyLabelMode(mode, step, boxes, behavior, notRecastStep) {\n    var that = this;\n    var majorTicks = that._majorTicks;\n    var labelOpt = that._options.label;\n    var angle = behavior.rotationAngle;\n    var labelHeight;\n    var alignment;\n    var func;\n\n    switch (mode) {\n      case ROTATE:\n        if (!labelOpt.userAlignment) {\n          alignment = angle < 0 ? RIGHT : LEFT;\n\n          if (angle % 90 === 0) {\n            alignment = CENTER;\n          }\n        }\n\n        step = notRecastStep ? step : that._getStep(boxes, angle);\n\n        func = function func(tick) {\n          tick.label.rotate(angle);\n          tick.labelRotationAngle = angle;\n          alignment && (tick.labelAlignment = alignment);\n        };\n\n        updateLabels(majorTicks, step, func);\n        break;\n\n      case \"stagger\":\n        labelHeight = that._getMaxLabelHeight(boxes, behavior.staggeringSpacing);\n\n        func = function func(tick, index) {\n          if (index / (step - 1) % 2 !== 0) {\n            tick.labelOffset = labelHeight;\n          }\n        };\n\n        updateLabels(majorTicks, step - 1, func);\n        break;\n\n      case \"auto\":\n      case \"_auto\":\n        if (2 === step) {\n          that._applyLabelMode(\"stagger\", step, boxes, behavior);\n        } else {\n          that._applyLabelMode(ROTATE, step, boxes, {\n            rotationAngle: getOptimalAngle(boxes, labelOpt)\n          });\n        }\n\n        break;\n\n      default:\n        updateLabels(majorTicks, step);\n    }\n  },\n  getMarkerTrackers: _common.noop,\n  _drawDateMarkers: _common.noop,\n  _adjustDateMarkers: _common.noop,\n  coordsIn: _common.noop,\n  areCoordsOutsideAxis: _common.noop,\n  _getSkippedCategory: _common.noop,\n  _initAxisPositions: _common.noop,\n  _drawTitle: _common.noop,\n  _updateTitleCoords: _common.noop,\n  _adjustConstantLineLabels: _common.noop,\n  _createTranslator: function _createTranslator() {\n    return new _translator2d2.default.Translator2D({}, {}, {});\n  },\n  _updateTranslator: function _updateTranslator() {\n    var translator = this._translator;\n    translator.update(translator.getBusinessRange(), this._canvas || {}, this._getTranslatorOptions());\n  },\n  _getTranslatorOptions: function _getTranslatorOptions() {\n    var options = this._options;\n    return {\n      isHorizontal: this._isHorizontal,\n      shiftZeroValue: !this.isArgumentAxis,\n      interval: options.semiDiscreteInterval,\n      stick: this._getStick(),\n      breaksSize: options.breakStyle ? options.breakStyle.width : 0\n    };\n  },\n  getVisibleArea: function getVisibleArea() {\n    var canvas = this._getCanvasStartEnd();\n\n    return [canvas.start, canvas.end].sort(function (a, b) {\n      return a - b;\n    });\n  },\n  _getCanvasStartEnd: function _getCanvasStartEnd() {\n    var isHorizontal = this._isHorizontal;\n    var canvas = this._canvas || {};\n\n    var invert = this._translator.getBusinessRange().invert;\n\n    var coords = isHorizontal ? [canvas.left, canvas.width - canvas.right] : [canvas.height - canvas.bottom, canvas.top];\n    invert && coords.reverse();\n    return {\n      start: coords[0],\n      end: coords[1]\n    };\n  },\n  _getScreenDelta: function _getScreenDelta() {\n    var that = this;\n\n    var canvas = that._getCanvasStartEnd();\n\n    var breaks = that._breaks;\n    var breaksLength = breaks ? breaks.length : 0;\n\n    var screenDelta = _abs(canvas.start - canvas.end);\n\n    return screenDelta - (breaksLength ? breaks[breaksLength - 1].cumulativeWidth : 0);\n  },\n  _getScaleBreaks: function _getScaleBreaks() {\n    return [];\n  },\n  _adjustTitle: _common.noop,\n  _checkTitleOverflow: _common.noop,\n  getSpiderTicks: _common.noop,\n  setSpiderTicks: _common.noop,\n  _checkBoundedLabelsOverlapping: _common.noop,\n  drawScaleBreaks: _common.noop,\n  _visualRange: _common.noop,\n  _rotateConstantLine: _common.noop,\n  applyVisualRangeSetter: function applyVisualRangeSetter(visualRangeSetter) {\n    this._visualRange = visualRangeSetter;\n  },\n  getCategoriesSorter: function getCategoriesSorter(argCategories) {\n    var sort;\n\n    if (this.isArgumentAxis) {\n      sort = argCategories;\n    } else {\n      var categoriesSortingMethod = this._options.categoriesSortingMethod;\n      sort = (0, _type.isDefined)(categoriesSortingMethod) ? categoriesSortingMethod : this._options.categories;\n    }\n\n    return sort;\n  },\n  _getAdjustedBusinessRange: function _getAdjustedBusinessRange() {\n    return this.adjustViewport(this._translator.getBusinessRange());\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/axes/base_axis.js"],"names":["_smart_formatter","require","_utils","_utils2","_interopRequireDefault","_type","_axes_constants","_axes_constants2","_extend","_array","_format_helper","_format_helper2","_parse_utils","_parse_utils2","_tick_generator","_tick_generator2","_translator2d","_translator2d2","_range","_tick","_math2","_date","_common","_xy_axes","_xy_axes2","_polar_axes","_polar_axes2","_constant_line","_constant_line2","_strip","_strip2","obj","key","Object","value","enumerable","configurable","writable","convertTicksToValues","patchFontOptions","getVizRangeObject","getLog","raiseTo","_math","_abs","_max","_min","_isArray","Array","DEFAULT_AXIS_LABEL_SPACING","MAX_GRID_BORDER_ADHENSION","TOP","BOTTOM","LEFT","RIGHT","CENTER","KEEP","SHIFT","RESET","ROTATE","DEFAULT_AXIS_DIVISION_FACTOR","DEFAULT_MINOR_AXIS_DIVISION_FACTOR","SCROLL_THRESHOLD","MAX_MARGIN_VALUE","dateIntervals","day","week","allowNegatives","_ref","linearThreshold","axisType","options","dataType","logBase","axisDivisionFactor","adjustDivisionFactor","minorAxisDivisionFactor","numberMultipliers","calculateMinors","allowDecimals","endOnTick","incidentOccurred","firstDayOfWeek","skipTickGeneration","skipCalculationLimits","generateExtraTick","minTickInterval","rangeIsEmpty","axis","visible","showCustomBoundaryTicks","isFirst","elements","e","callAction","measureLabels","exports","items","item","x","y","width","height","i","ticks","removeInvalidTick","labelOptions","position","defaultPosition","secondaryPosition","angle","boxes","labelOpt","tick","index","func","tickGeneratorOptions","viewPort","min","max","categories","isSpacedMargin","checkMinDataVisibility","checkMaxDataVisibility","Math","axisCanvas","calculateCanvasMargins","cLeft","canvas","cTop","cRight","cBottom","bBox","left","margins","top","right","bottom","Axis","that","renderSettings","constructor","_drawAxis","stroke","opacity","_createPathElement","sharp","sharpDirection","arguments","svgElement","getAxisSharpDirection","getSharpDirectionByCoords","maxCoord","coords","_getGridLineDrawer","grid","_getGridPoints","isHorizontal","tickPositionField","orthogonalPositions","positionFrom","positionTo","borderOptions","canvasStart","canvasEnd","firstBorderLinePosition","lastBorderLinePosition","minDelta","maxDelta","points","_getConstantLinePos","_getConstantLineGraphicAttributes","_createConstantLine","getConstantLineSharpDirection","_drawConstantLineLabelText","font","_ref2","cssClass","align","_drawConstantLineLabels","text","lineLabelOptions","_getStripPos","isContinuous","range","result","cat","parsedStartValue","parsedEndValue","startCategoryIndex","endCategoryIndex","from","to","swap","endValue","startValue","start","end","_getStripGraphicAttributes","toPoint","fromPoint","_createStrip","attrs","_adjustStripLabels","strip","_adjustLabelsCoord","offset","_adjustLabels","maxSize","size","additionalOffset","_getLabelAdjustedCoord","box","textAlign","isDiscrete","isFlatLabel","indentFromAxis","axisPosition","labelCoords","labelX","translateY","translateX","maxWidth","_createAxisConstantLineGroups","renderer","classSelector","constantLinesClass","insideGroup","outsideGroup1","outsideGroup2","inside","outside1","outside2","remove","clear","_createAxisGroups","above","under","_clearAxisGroups","_getLabelFormatObject","formatObject","valueText","tickInterval","logarithmBase","type","showTransition","point","maxVisible","formatLabel","formatHint","formatRange","_setTickOffset","discreteAxisDivisionMode","getMargins","placeholderSize","edgeMarginCorrection","constantLineAboveSeries","constantLineUnderSeries","group","validateUnit","unit","_setType","axisTypeMethods","_getSharpParam","_disposeBreaksGroup","dispose","g","getOptions","setPane","setTypes","resetTypes","getTranslator","updateOptions","validateAxisOptions","argumentType","valueType","calculateInterval","_ref3","_processCanvas","updateCanvas","positions","getCanvas","getAxisShift","hideTitle","getTitle","hideOuterElements","adjustViewport","wholeRange","visualRange","minDefined","maxDefined","minVisible","categoriesInfo","adjustedVisualRange","base","length","adjustRange","isLogarithmic","disabledNegatives","tmp","_getVisualRangeUpdateMode","translator","newCategories","newRange","c","minPoint","minVisiblePoint","viewport","maxPoint","maxVisiblePoint","oppositeValue","_handleBusinessRangeChanged","axisReinitialized","visualRangeUpdateMode","getVisualRangeLength","currentBusinessRange","getVisualRangeCenter","businessRange","_this$_options","center","setBusinessRange","dataIsEmpty","invert","inverted","isNaN","synchronizedValue","_addConstantLinesToRange","cl","dataRange","_dataRange$addRange","_defineProperty","setGroupSeries","getLabelsPosition","labelShift","getFormattedValue","_getBoundaryTicks","majors","customBounds","addMinMax","boundaryTicks","setPercentLabelFormat","resetAutoLabelFormat","getMultipleAxesSpacing","getTicksValues","majorTicksValues","minorTicksValues","setTicks","createMajorTick","createMinorTick","_adjustDivisionFactor","_getTicks","customTicks","customMinorTicks","minors","_createTicksAndLabelFormat","getAggregationInfo","marginOptions","aggregateByCategory","aggregationInterval","aggregationGroupWidth","minInterval","generateTicks","configureGenerator","useAllAggregatedPoints","add","maxMinDistance","breaks","interval","createTicks","createBoundaryTick","valueOf","oldMajorTicks","majorTicksByValues","r","t","sameType","skippedCategory","majorTicks","v","oldMinorTicks","minorTick","_reinitTranslator","_getViewportRange","setMarginOptions","getMarginOptions","allowToExtendVisualRange","bound","isEnd","_calculateRangeInterval","isDateTime","minArgs","addToArgs","_calculateWorkWeekInterval","workWeek","weekend","weekendsCount","businessInterval","_calculateValueMargins","marginSize","screenDelta","valueMarginsEnabled","minValueMargin","maxValueMargin","minPadding","maxPadding","startPadding","endPadding","ratioOfCanvasRange","intervalInPx","rangeInterval","pxInterval","isFinite","getConvertIntervalCoefficient","maxPaddingValue","minPercentPadding","maxPercentPadding","percentStick","canvasStartEnd","commonMargin","screenDeltaWithMargins","firstTickPosition","lastTickPosition","invertMultiplier","minTickPadding","maxTickPadding","commonPadding","coeff","minValue","maxValue","minExpectedPadding","maxExpectedPadding","correctZeroLevel","applyMargins","br","_resetMargins","_createConstantLines","_this","constantLines","l","draw","initTickCoords","drawTickMarks","drawGridLine","drawGrids","convertedTickInterval","usefulSpace","textWidth","textHeight","displayMode","overlappingMode","wordWrapMode","overflowMode","correctByWidth","correctByHeight","_measureTitle","animate","updateSize","updateTitle","animationEnabled","cleanUpInvalidTicks","updateTicksPosition","updateGridsPosition","prepareAnimation","action","applyClipRects","canvasClipID","elementsClipID","_mergeViewportOptions","visualRangeOptionValue","_validateVisualRange","convertVisualRangeObject","_validateOptions","validate","parser","resetVisualRange","isSilent","_setVisualRange","_applyZooming","getZoomStartEventArg","cancel","event","actionType","getZoomEndEventArg","previousRange","zoomFactor","shift","rangeStart","rangeEnd","getZoomBounds","secondPriorityRange","getZoomBoundValue","setInitRange","_resetVisualRangeOption","setCustomVisualRange","args","adjustedRange","zoomResults","handleZooming","preventEvents","zoomStartEvent","isPrevented","skipEventRising","startRange","handleZoomEnd","domEvent","previousBusinessRange","typeIsNotChanged","zoomEndEvent","restorePreviousVisualRange","isZoomingLowerLimitOvercome","minZoom","isOvercoming","visualRangeLength","canvasLength","fullRange","dataVisualRangeIsReduced","minDataValue","maxDataValue","seriesData","startPoint","endPoint","edges","visualRangeStartPoint","visualRangeEndPoint","isExtremePosition","extremeDataValue","isMax","extremePoint","visualRangePoint","getViewport","getFullTicks","widthAxis","indent","withIndents","viewportRange","maxText","label","prevLabel","_setLabelsPlacement","ignoreOverlapping","behavior","rotationAngle","staggeringSpacing","step","notRecastStep","_applyLabelOverlapping","checkLabels","array","_applyLabelMode","alignment","updateLabels","labelHeight","getOptimalAngle","getMarkerTrackers","_drawDateMarkers","_adjustDateMarkers","coordsIn","areCoordsOutsideAxis","_getSkippedCategory","_initAxisPositions","_drawTitle","_updateTitleCoords","_adjustConstantLineLabels","_createTranslator","_updateTranslator","_getTranslatorOptions","shiftZeroValue","stick","breaksSize","getVisibleArea","a","_getCanvasStartEnd","_getScreenDelta","breaksLength","_getScaleBreaks","_adjustTitle","_checkTitleOverflow","getSpiderTicks","setSpiderTicks","_checkBoundedLabelsOverlapping","drawScaleBreaks","_visualRange","_rotateConstantLine","applyVisualRangeSetter","getCategoriesSorter","sort","categoriesSortingMethod","_getAdjustedBusinessRange"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/axes/base_axis.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _smart_formatter = require(\"./smart_formatter\");\r\nvar _utils = require(\"../core/utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _axes_constants = require(\"./axes_constants\");\r\nvar _axes_constants2 = _interopRequireDefault(_axes_constants);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _format_helper = require(\"../../format_helper\");\r\nvar _format_helper2 = _interopRequireDefault(_format_helper);\r\nvar _parse_utils = require(\"../components/parse_utils\");\r\nvar _parse_utils2 = _interopRequireDefault(_parse_utils);\r\nvar _tick_generator = require(\"./tick_generator\");\r\nvar _tick_generator2 = _interopRequireDefault(_tick_generator);\r\nvar _translator2d = require(\"../translators/translator2d\");\r\nvar _translator2d2 = _interopRequireDefault(_translator2d);\r\nvar _range = require(\"../translators/range\");\r\nvar _tick = require(\"./tick\");\r\nvar _math2 = require(\"../../core/utils/math\");\r\nvar _date = require(\"../../core/utils/date\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _xy_axes = require(\"./xy_axes\");\r\nvar _xy_axes2 = _interopRequireDefault(_xy_axes);\r\nvar _polar_axes = require(\"./polar_axes\");\r\nvar _polar_axes2 = _interopRequireDefault(_polar_axes);\r\nvar _constant_line = require(\"./constant_line\");\r\nvar _constant_line2 = _interopRequireDefault(_constant_line);\r\nvar _strip = require(\"./strip\");\r\nvar _strip2 = _interopRequireDefault(_strip);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\nvar convertTicksToValues = _axes_constants2.default.convertTicksToValues;\r\nvar patchFontOptions = _utils2.default.patchFontOptions;\r\nvar getVizRangeObject = _utils2.default.getVizRangeObject;\r\nvar getLog = _utils2.default.getLogExt;\r\nvar raiseTo = _utils2.default.raiseToExt;\r\nvar _math = Math;\r\nvar _abs = _math.abs;\r\nvar _max = _math.max;\r\nvar _min = _math.min;\r\nvar _isArray = Array.isArray;\r\nvar DEFAULT_AXIS_LABEL_SPACING = 5;\r\nvar MAX_GRID_BORDER_ADHENSION = 4;\r\nvar TOP = _axes_constants2.default.top;\r\nvar BOTTOM = _axes_constants2.default.bottom;\r\nvar LEFT = _axes_constants2.default.left;\r\nvar RIGHT = _axes_constants2.default.right;\r\nvar CENTER = _axes_constants2.default.center;\r\nvar KEEP = \"keep\";\r\nvar SHIFT = \"shift\";\r\nvar RESET = \"reset\";\r\nvar ROTATE = \"rotate\";\r\nvar DEFAULT_AXIS_DIVISION_FACTOR = 50;\r\nvar DEFAULT_MINOR_AXIS_DIVISION_FACTOR = 15;\r\nvar SCROLL_THRESHOLD = 5;\r\nvar MAX_MARGIN_VALUE = .8;\r\nvar dateIntervals = {\r\n    day: 864e5,\r\n    week: 6048e5\r\n};\r\n\r\nfunction getTickGenerator(options, incidentOccurred, skipTickGeneration, rangeIsEmpty, adjustDivisionFactor, _ref) {\r\n    var allowNegatives = _ref.allowNegatives,\r\n        linearThreshold = _ref.linearThreshold;\r\n    return _tick_generator2.default.tickGenerator({\r\n        axisType: options.type,\r\n        dataType: options.dataType,\r\n        logBase: options.logarithmBase,\r\n        allowNegatives: allowNegatives,\r\n        linearThreshold: linearThreshold,\r\n        axisDivisionFactor: adjustDivisionFactor(options.axisDivisionFactor || DEFAULT_AXIS_DIVISION_FACTOR),\r\n        minorAxisDivisionFactor: adjustDivisionFactor(options.minorAxisDivisionFactor || DEFAULT_MINOR_AXIS_DIVISION_FACTOR),\r\n        numberMultipliers: options.numberMultipliers,\r\n        calculateMinors: options.minorTick.visible || options.minorGrid.visible || options.calculateMinors,\r\n        allowDecimals: options.allowDecimals,\r\n        endOnTick: options.endOnTick,\r\n        incidentOccurred: incidentOccurred,\r\n        firstDayOfWeek: options.workWeek && options.workWeek[0],\r\n        skipTickGeneration: skipTickGeneration,\r\n        skipCalculationLimits: options.skipCalculationLimits,\r\n        generateExtraTick: options.generateExtraTick,\r\n        minTickInterval: options.minTickInterval,\r\n        rangeIsEmpty: rangeIsEmpty\r\n    })\r\n}\r\n\r\nfunction createMajorTick(axis, renderer, skippedCategory) {\r\n    var options = axis.getOptions();\r\n    return (0, _tick.tick)(axis, renderer, options.tick, options.grid, skippedCategory, false)\r\n}\r\n\r\nfunction createMinorTick(axis, renderer) {\r\n    var options = axis.getOptions();\r\n    return (0, _tick.tick)(axis, renderer, options.minorTick, options.minorGrid)\r\n}\r\n\r\nfunction createBoundaryTick(axis, renderer, isFirst) {\r\n    var options = axis.getOptions();\r\n    return (0, _tick.tick)(axis, renderer, (0, _extend.extend)({}, options.tick, {\r\n        visible: options.showCustomBoundaryTicks\r\n    }), options.grid, void 0, false, isFirst ? -1 : 1)\r\n}\r\n\r\nfunction callAction(elements, action, actionArgument1, actionArgument2) {\r\n    (elements || []).forEach(function(e) {\r\n        return e[action](actionArgument1, actionArgument2)\r\n    })\r\n}\r\n\r\nfunction initTickCoords(ticks) {\r\n    callAction(ticks, \"initCoords\")\r\n}\r\n\r\nfunction drawTickMarks(ticks, options) {\r\n    callAction(ticks, \"drawMark\", options)\r\n}\r\n\r\nfunction drawGrids(ticks, drawLine) {\r\n    callAction(ticks, \"drawGrid\", drawLine)\r\n}\r\n\r\nfunction updateTicksPosition(ticks, options, animate) {\r\n    callAction(ticks, \"updateTickPosition\", options, animate)\r\n}\r\n\r\nfunction updateGridsPosition(ticks, animate) {\r\n    callAction(ticks, \"updateGridPosition\", animate)\r\n}\r\nvar measureLabels = exports.measureLabels = function(items) {\r\n    items.forEach(function(item) {\r\n        item.labelBBox = item.label ? item.label.getBBox() : {\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        }\r\n    })\r\n};\r\n\r\nfunction cleanUpInvalidTicks(ticks) {\r\n    var i = ticks.length - 1;\r\n    for (i; i >= 0; i--) {\r\n        if (!removeInvalidTick(ticks, i)) {\r\n            break\r\n        }\r\n    }\r\n    for (i = 0; i < ticks.length; i++) {\r\n        if (removeInvalidTick(ticks, i)) {\r\n            i--\r\n        } else {\r\n            break\r\n        }\r\n    }\r\n}\r\n\r\nfunction removeInvalidTick(ticks, i) {\r\n    if (null === ticks[i].coords.x || null === ticks[i].coords.y) {\r\n        ticks.splice(i, 1);\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nfunction validateAxisOptions(options) {\r\n    var labelOptions = options.label;\r\n    var position = options.position;\r\n    var defaultPosition = options.isHorizontal ? BOTTOM : LEFT;\r\n    var secondaryPosition = options.isHorizontal ? TOP : RIGHT;\r\n    if (position !== defaultPosition && position !== secondaryPosition) {\r\n        position = defaultPosition\r\n    }\r\n    if (position === RIGHT && !labelOptions.userAlignment) {\r\n        labelOptions.alignment = LEFT\r\n    }\r\n    options.position = position;\r\n    options.hoverMode = options.hoverMode ? options.hoverMode.toLowerCase() : \"none\";\r\n    labelOptions.minSpacing = (0, _type.isDefined)(labelOptions.minSpacing) ? labelOptions.minSpacing : DEFAULT_AXIS_LABEL_SPACING;\r\n    options.type && (options.type = options.type.toLowerCase());\r\n    options.argumentType && (options.argumentType = options.argumentType.toLowerCase());\r\n    options.valueType && (options.valueType = options.valueType.toLowerCase())\r\n}\r\n\r\nfunction getOptimalAngle(boxes, labelOpt) {\r\n    var angle = 180 * _math.asin((boxes[0].height + labelOpt.minSpacing) / (boxes[1].x - boxes[0].x)) / _math.PI;\r\n    return angle < 45 ? -45 : -90\r\n}\r\n\r\nfunction updateLabels(ticks, step, func) {\r\n    ticks.forEach(function(tick, index) {\r\n        if (tick.label) {\r\n            if (index % step !== 0) {\r\n                tick.removeLabel()\r\n            } else {\r\n                if (func) {\r\n                    func(tick, index)\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction valueOf(value) {\r\n    return value.valueOf()\r\n}\r\n\r\nfunction getZoomBoundValue(optionValue, dataValue) {\r\n    if (void 0 === optionValue) {\r\n        return dataValue\r\n    } else {\r\n        if (null === optionValue) {\r\n            return\r\n        } else {\r\n            return optionValue\r\n        }\r\n    }\r\n}\r\n\r\nfunction configureGenerator(options, axisDivisionFactor, viewPort, screenDelta, minTickInterval) {\r\n    var tickGeneratorOptions = (0, _extend.extend)({}, options, {\r\n        endOnTick: true,\r\n        axisDivisionFactor: axisDivisionFactor,\r\n        skipCalculationLimits: true,\r\n        generateExtraTick: true,\r\n        minTickInterval: minTickInterval\r\n    });\r\n    return function(tickInterval, skipTickGeneration, min, max, breaks) {\r\n        return getTickGenerator(tickGeneratorOptions, _common.noop, skipTickGeneration, viewPort.isEmpty(), function(v) {\r\n            return v\r\n        }, viewPort)({\r\n            min: min,\r\n            max: max,\r\n            categories: viewPort.categories,\r\n            isSpacedMargin: viewPort.isSpacedMargin,\r\n            checkMinDataVisibility: viewPort.checkMinDataVisibility,\r\n            checkMaxDataVisibility: viewPort.checkMaxDataVisibility\r\n        }, screenDelta, tickInterval, (0, _type.isDefined)(tickInterval), void 0, void 0, void 0, breaks)\r\n    }\r\n}\r\n\r\nfunction convertVisualRangeObject(visualRange, optionValue) {\r\n    return _utils2.default.convertVisualRangeObject(visualRange, !_isArray(optionValue))\r\n}\r\n\r\nfunction getConstantLineSharpDirection(coord, axisCanvas) {\r\n    return Math.max(axisCanvas.start, axisCanvas.end) !== coord ? 1 : -1\r\n}\r\nvar calculateCanvasMargins = exports.calculateCanvasMargins = function(bBoxes, canvas) {\r\n    var cLeft = canvas.left;\r\n    var cTop = canvas.top;\r\n    var cRight = canvas.width - canvas.right;\r\n    var cBottom = canvas.height - canvas.bottom;\r\n    return bBoxes.reduce(function(margins, bBox) {\r\n        if (!bBox || bBox.isEmpty) {\r\n            return margins\r\n        }\r\n        return {\r\n            left: _max(margins.left, cLeft - bBox.x),\r\n            top: _max(margins.top, cTop - bBox.y),\r\n            right: _max(margins.right, bBox.x + bBox.width - cRight),\r\n            bottom: _max(margins.bottom, bBox.y + bBox.height - cBottom)\r\n        }\r\n    }, {\r\n        left: 0,\r\n        right: 0,\r\n        top: 0,\r\n        bottom: 0\r\n    })\r\n};\r\nvar Axis = exports.Axis = function(renderSettings) {\r\n    var that = this;\r\n    that._renderer = renderSettings.renderer;\r\n    that._incidentOccurred = renderSettings.incidentOccurred;\r\n    that._eventTrigger = renderSettings.eventTrigger;\r\n    that._stripsGroup = renderSettings.stripsGroup;\r\n    that._labelAxesGroup = renderSettings.labelAxesGroup;\r\n    that._constantLinesGroup = renderSettings.constantLinesGroup;\r\n    that._scaleBreaksGroup = renderSettings.scaleBreaksGroup;\r\n    that._axesContainerGroup = renderSettings.axesContainerGroup;\r\n    that._gridContainerGroup = renderSettings.gridGroup;\r\n    that._axisCssPrefix = renderSettings.widgetClass + \"-\" + (renderSettings.axisClass ? renderSettings.axisClass + \"-\" : \"\");\r\n    that._setType(renderSettings.axisType, renderSettings.drawingType);\r\n    that._createAxisGroups();\r\n    that._translator = that._createTranslator();\r\n    that.isArgumentAxis = renderSettings.isArgumentAxis;\r\n    that._viewport = {};\r\n    that._firstDrawing = true;\r\n    that._initRange = {}\r\n};\r\nAxis.prototype = {\r\n    constructor: Axis,\r\n    _drawAxis: function() {\r\n        var options = this._options;\r\n        if (!options.visible) {\r\n            return\r\n        }\r\n        this._axisElement = this._createAxisElement();\r\n        this._updateAxisElementPosition();\r\n        this._axisElement.attr({\r\n            \"stroke-width\": options.width,\r\n            stroke: options.color,\r\n            \"stroke-opacity\": options.opacity\r\n        }).sharp(this._getSharpParam(true), this.getAxisSharpDirection()).append(this._axisLineGroup)\r\n    },\r\n    _createPathElement: function(points, attr, sharpDirection) {\r\n        return this.sharp(this._renderer.path(points, \"line\").attr(attr), sharpDirection)\r\n    },\r\n    sharp: function(svgElement) {\r\n        var sharpDirection = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;\r\n        return svgElement.sharp(this._getSharpParam(), sharpDirection)\r\n    },\r\n    getAxisSharpDirection: function() {\r\n        var position = this._options.position;\r\n        return position === TOP || position === LEFT ? 1 : -1\r\n    },\r\n    getSharpDirectionByCoords: function(coords) {\r\n        var canvas = this._getCanvasStartEnd();\r\n        var maxCoord = Math.max(canvas.start, canvas.end);\r\n        return this.getRadius ? 0 : maxCoord !== coords[this._isHorizontal ? \"x\" : \"y\"] ? 1 : -1\r\n    },\r\n    _getGridLineDrawer: function() {\r\n        var that = this;\r\n        return function(tick, gridStyle) {\r\n            var grid = that._getGridPoints(tick.coords);\r\n            if (grid.points) {\r\n                return that._createPathElement(grid.points, gridStyle, that.getSharpDirectionByCoords(tick.coords))\r\n            }\r\n            return null\r\n        }\r\n    },\r\n    _getGridPoints: function(coords) {\r\n        var that = this;\r\n        var isHorizontal = this._isHorizontal;\r\n        var tickPositionField = isHorizontal ? \"x\" : \"y\";\r\n        var orthogonalPositions = this._orthogonalPositions;\r\n        var positionFrom = orthogonalPositions.start;\r\n        var positionTo = orthogonalPositions.end;\r\n        var borderOptions = that.borderOptions;\r\n        var canvasStart = isHorizontal ? LEFT : TOP;\r\n        var canvasEnd = isHorizontal ? RIGHT : BOTTOM;\r\n        var axisCanvas = that.getCanvas();\r\n        var canvas = {\r\n            left: axisCanvas.left,\r\n            right: axisCanvas.width - axisCanvas.right,\r\n            top: axisCanvas.top,\r\n            bottom: axisCanvas.height - axisCanvas.bottom\r\n        };\r\n        var firstBorderLinePosition = borderOptions.visible && borderOptions[canvasStart] ? canvas[canvasStart] : void 0;\r\n        var lastBorderLinePosition = borderOptions.visible && borderOptions[canvasEnd] ? canvas[canvasEnd] : void 0;\r\n        var minDelta = MAX_GRID_BORDER_ADHENSION + firstBorderLinePosition;\r\n        var maxDelta = lastBorderLinePosition - MAX_GRID_BORDER_ADHENSION;\r\n        if (that.areCoordsOutsideAxis(coords) || void 0 === coords[tickPositionField] || coords[tickPositionField] < minDelta || coords[tickPositionField] > maxDelta) {\r\n            return {\r\n                points: null\r\n            }\r\n        }\r\n        return {\r\n            points: isHorizontal ? null !== coords[tickPositionField] ? [coords[tickPositionField], positionFrom, coords[tickPositionField], positionTo] : null : null !== coords[tickPositionField] ? [positionFrom, coords[tickPositionField], positionTo, coords[tickPositionField]] : null\r\n        }\r\n    },\r\n    _getConstantLinePos: function(parsedValue, canvasStart, canvasEnd) {\r\n        var value = this._getTranslatedCoord(parsedValue);\r\n        if (!(0, _type.isDefined)(value) || value < _min(canvasStart, canvasEnd) || value > _max(canvasStart, canvasEnd)) {\r\n            return\r\n        }\r\n        return value\r\n    },\r\n    _getConstantLineGraphicAttributes: function(value) {\r\n        var positionFrom = this._orthogonalPositions.start;\r\n        var positionTo = this._orthogonalPositions.end;\r\n        return {\r\n            points: this._isHorizontal ? [value, positionFrom, value, positionTo] : [positionFrom, value, positionTo, value]\r\n        }\r\n    },\r\n    _createConstantLine: function(value, attr) {\r\n        return this._createPathElement(this._getConstantLineGraphicAttributes(value).points, attr, getConstantLineSharpDirection(value, this._getCanvasStartEnd()))\r\n    },\r\n    _drawConstantLineLabelText: function(text, x, y, _ref2, group) {\r\n        var font = _ref2.font,\r\n            cssClass = _ref2.cssClass;\r\n        return this._renderer.text(text, x, y).css(patchFontOptions((0, _extend.extend)({}, this._options.label.font, font))).attr({\r\n            align: \"center\",\r\n            \"class\": cssClass\r\n        }).append(group)\r\n    },\r\n    _drawConstantLineLabels: function(parsedValue, lineLabelOptions, value, group) {\r\n        var that = this;\r\n        var text = lineLabelOptions.text;\r\n        var options = that._options;\r\n        var labelOptions = options.label;\r\n        var coords;\r\n        that._checkAlignmentConstantLineLabels(lineLabelOptions);\r\n        text = (0, _type.isDefined)(text) ? text : that.formatLabel(parsedValue, labelOptions);\r\n        coords = that._getConstantLineLabelsCoords(value, lineLabelOptions);\r\n        return that._drawConstantLineLabelText(text, coords.x, coords.y, lineLabelOptions, group)\r\n    },\r\n    _getStripPos: function(startValue, endValue, canvasStart, canvasEnd, range) {\r\n        var isContinuous = !!(range.minVisible || range.maxVisible);\r\n        var categories = (range.categories || []).reduce(function(result, cat) {\r\n            result.push(cat.valueOf());\r\n            return result\r\n        }, []);\r\n        var start;\r\n        var end;\r\n        var swap;\r\n        var startCategoryIndex;\r\n        var endCategoryIndex;\r\n        var min = range.minVisible;\r\n        if (!isContinuous) {\r\n            if ((0, _type.isDefined)(startValue) && (0, _type.isDefined)(endValue)) {\r\n                var parsedStartValue = this.parser(startValue);\r\n                var parsedEndValue = this.parser(endValue);\r\n                startCategoryIndex = (0, _array.inArray)((0, _type.isDefined)(parsedStartValue) ? parsedStartValue.valueOf() : void 0, categories);\r\n                endCategoryIndex = (0, _array.inArray)((0, _type.isDefined)(parsedEndValue) ? parsedEndValue.valueOf() : void 0, categories);\r\n                if (startCategoryIndex === -1 || endCategoryIndex === -1) {\r\n                    return {\r\n                        from: 0,\r\n                        to: 0\r\n                    }\r\n                }\r\n                if (startCategoryIndex > endCategoryIndex) {\r\n                    swap = endValue;\r\n                    endValue = startValue;\r\n                    startValue = swap\r\n                }\r\n            }\r\n        }\r\n        if ((0, _type.isDefined)(startValue)) {\r\n            startValue = this.validateUnit(startValue, \"E2105\", \"strip\");\r\n            start = this._getTranslatedCoord(startValue, -1);\r\n            if (!(0, _type.isDefined)(start) && isContinuous) {\r\n                start = startValue < min ? canvasStart : canvasEnd\r\n            }\r\n        } else {\r\n            start = canvasStart\r\n        }\r\n        if ((0, _type.isDefined)(endValue)) {\r\n            endValue = this.validateUnit(endValue, \"E2105\", \"strip\");\r\n            end = this._getTranslatedCoord(endValue, 1);\r\n            if (!(0, _type.isDefined)(end) && isContinuous) {\r\n                end = endValue > min ? canvasEnd : canvasStart\r\n            }\r\n        } else {\r\n            end = canvasEnd\r\n        }\r\n        return start < end ? {\r\n            from: start,\r\n            to: end\r\n        } : {\r\n            from: end,\r\n            to: start\r\n        }\r\n    },\r\n    _getStripGraphicAttributes: function(fromPoint, toPoint) {\r\n        var x;\r\n        var y;\r\n        var width;\r\n        var height;\r\n        var orthogonalPositions = this._orthogonalPositions;\r\n        var positionFrom = orthogonalPositions.start;\r\n        var positionTo = orthogonalPositions.end;\r\n        if (this._isHorizontal) {\r\n            x = fromPoint;\r\n            y = _min(positionFrom, positionTo);\r\n            width = toPoint - fromPoint;\r\n            height = _abs(positionFrom - positionTo)\r\n        } else {\r\n            x = _min(positionFrom, positionTo);\r\n            y = fromPoint;\r\n            width = _abs(positionFrom - positionTo);\r\n            height = _abs(fromPoint - toPoint)\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            width: width,\r\n            height: height\r\n        }\r\n    },\r\n    _createStrip: function(attrs) {\r\n        return this._renderer.rect(attrs.x, attrs.y, attrs.width, attrs.height)\r\n    },\r\n    _adjustStripLabels: function() {\r\n        var that = this;\r\n        this._strips.forEach(function(strip) {\r\n            if (strip.label) {\r\n                strip.label.attr(that._getAdjustedStripLabelCoords(strip))\r\n            }\r\n        })\r\n    },\r\n    _adjustLabelsCoord: function(offset, maxWidth, checkCanvas) {\r\n        var that = this;\r\n        that._majorTicks.forEach(function(tick) {\r\n            if (tick.label) {\r\n                tick.updateMultilineTextAlignment();\r\n                tick.label.attr(that._getLabelAdjustedCoord(tick, offset + (tick.labelOffset || 0), maxWidth, checkCanvas))\r\n            }\r\n        })\r\n    },\r\n    _adjustLabels: function(offset) {\r\n        var that = this;\r\n        var maxSize = that._majorTicks.reduce(function(size, tick) {\r\n            if (!tick.label) {\r\n                return size\r\n            }\r\n            var bBox = tick.labelRotationAngle ? _utils2.default.rotateBBox(tick.labelBBox, [tick.labelCoords.x, tick.labelCoords.y], -tick.labelRotationAngle) : tick.labelBBox;\r\n            return {\r\n                width: _max(size.width || 0, bBox.width),\r\n                height: _max(size.height || 0, bBox.height),\r\n                offset: _max(size.offset || 0, tick.labelOffset || 0)\r\n            }\r\n        }, {});\r\n        var additionalOffset = that._isHorizontal ? maxSize.height : maxSize.width;\r\n        that._adjustLabelsCoord(offset, maxSize.width);\r\n        return offset + additionalOffset + (additionalOffset && that._options.label.indentFromAxis) + maxSize.offset\r\n    },\r\n    _getLabelAdjustedCoord: function(tick, offset, maxWidth) {\r\n        offset = offset || 0;\r\n        var that = this;\r\n        var options = that._options;\r\n        var box = _utils2.default.rotateBBox(tick.labelBBox, [tick.labelCoords.x, tick.labelCoords.y], -tick.labelRotationAngle || 0);\r\n        var position = options.position;\r\n        var textAlign = tick.labelAlignment || options.label.alignment;\r\n        var isDiscrete = \"discrete\" === that._options.type;\r\n        var isFlatLabel = tick.labelRotationAngle % 90 === 0;\r\n        var indentFromAxis = options.label.indentFromAxis;\r\n        var axisPosition = that._axisPosition;\r\n        var labelCoords = tick.labelCoords;\r\n        var labelX = labelCoords.x;\r\n        var translateX;\r\n        var translateY;\r\n        if (that._isHorizontal) {\r\n            if (position === BOTTOM) {\r\n                translateY = axisPosition + indentFromAxis - box.y + offset\r\n            } else {\r\n                translateY = axisPosition - indentFromAxis - (box.y + box.height) - offset\r\n            }\r\n            if (textAlign === RIGHT) {\r\n                translateX = isDiscrete && isFlatLabel ? tick.coords.x - (box.x + box.width) : labelX - box.x - box.width\r\n            } else {\r\n                if (textAlign === LEFT) {\r\n                    translateX = isDiscrete && isFlatLabel ? labelX - box.x - (tick.coords.x - labelX) : labelX - box.x\r\n                } else {\r\n                    translateX = labelX - box.x - box.width / 2\r\n                }\r\n            }\r\n        } else {\r\n            translateY = labelCoords.y - box.y - box.height / 2;\r\n            if (position === LEFT) {\r\n                if (textAlign === LEFT) {\r\n                    translateX = axisPosition - indentFromAxis - maxWidth - box.x\r\n                } else {\r\n                    if (textAlign === CENTER) {\r\n                        translateX = axisPosition - indentFromAxis - maxWidth / 2 - box.x - box.width / 2\r\n                    } else {\r\n                        translateX = axisPosition - indentFromAxis - box.x - box.width\r\n                    }\r\n                }\r\n                translateX -= offset\r\n            } else {\r\n                if (textAlign === RIGHT) {\r\n                    translateX = axisPosition + indentFromAxis + maxWidth - box.x - box.width\r\n                } else {\r\n                    if (textAlign === CENTER) {\r\n                        translateX = axisPosition + indentFromAxis + maxWidth / 2 - box.x - box.width / 2\r\n                    } else {\r\n                        translateX = axisPosition + indentFromAxis - box.x\r\n                    }\r\n                }\r\n                translateX += offset\r\n            }\r\n        }\r\n        return {\r\n            translateX: translateX,\r\n            translateY: translateY\r\n        }\r\n    },\r\n    _createAxisConstantLineGroups: function() {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var classSelector = that._axisCssPrefix;\r\n        var constantLinesClass = classSelector + \"constant-lines\";\r\n        var insideGroup;\r\n        var outsideGroup1;\r\n        var outsideGroup2;\r\n        insideGroup = renderer.g().attr({\r\n            \"class\": constantLinesClass\r\n        });\r\n        outsideGroup1 = renderer.g().attr({\r\n            \"class\": constantLinesClass\r\n        });\r\n        outsideGroup2 = renderer.g().attr({\r\n            \"class\": constantLinesClass\r\n        });\r\n        return {\r\n            inside: insideGroup,\r\n            outside1: outsideGroup1,\r\n            left: outsideGroup1,\r\n            top: outsideGroup1,\r\n            outside2: outsideGroup2,\r\n            right: outsideGroup2,\r\n            bottom: outsideGroup2,\r\n            remove: function() {\r\n                this.inside.remove();\r\n                this.outside1.remove();\r\n                this.outside2.remove()\r\n            },\r\n            clear: function() {\r\n                this.inside.clear();\r\n                this.outside1.clear();\r\n                this.outside2.clear()\r\n            }\r\n        }\r\n    },\r\n    _createAxisGroups: function() {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var classSelector = that._axisCssPrefix;\r\n        that._axisGroup = renderer.g().attr({\r\n            \"class\": classSelector + \"axis\"\r\n        });\r\n        that._axisStripGroup = renderer.g().attr({\r\n            \"class\": classSelector + \"strips\"\r\n        });\r\n        that._axisGridGroup = renderer.g().attr({\r\n            \"class\": classSelector + \"grid\"\r\n        });\r\n        that._axisElementsGroup = renderer.g().attr({\r\n            \"class\": classSelector + \"elements\"\r\n        }).append(that._axisGroup);\r\n        that._axisLineGroup = renderer.g().attr({\r\n            \"class\": classSelector + \"line\"\r\n        }).append(that._axisGroup);\r\n        that._axisTitleGroup = renderer.g().attr({\r\n            \"class\": classSelector + \"title\"\r\n        }).append(that._axisGroup);\r\n        that._axisConstantLineGroups = {\r\n            above: that._createAxisConstantLineGroups(),\r\n            under: that._createAxisConstantLineGroups()\r\n        };\r\n        that._axisStripLabelGroup = renderer.g().attr({\r\n            \"class\": classSelector + \"axis-labels\"\r\n        })\r\n    },\r\n    _clearAxisGroups: function() {\r\n        var that = this;\r\n        that._axisGroup.remove();\r\n        that._axisStripGroup.remove();\r\n        that._axisStripLabelGroup.remove();\r\n        that._axisConstantLineGroups.above.remove();\r\n        that._axisConstantLineGroups.under.remove();\r\n        that._axisGridGroup.remove();\r\n        that._axisTitleGroup.clear();\r\n        that._axisElementsGroup.clear();\r\n        that._axisLineGroup && that._axisLineGroup.clear();\r\n        that._axisStripGroup && that._axisStripGroup.clear();\r\n        that._axisGridGroup && that._axisGridGroup.clear();\r\n        that._axisConstantLineGroups.above.clear();\r\n        that._axisConstantLineGroups.under.clear();\r\n        that._axisStripLabelGroup && that._axisStripLabelGroup.clear()\r\n    },\r\n    _getLabelFormatObject: function(value, labelOptions, range, point, tickInterval, ticks) {\r\n        range = range || this._getViewportRange();\r\n        var formatObject = {\r\n            value: value,\r\n            valueText: (0, _smart_formatter.smartFormatter)(value, {\r\n                labelOptions: labelOptions,\r\n                ticks: ticks || convertTicksToValues(this._majorTicks),\r\n                tickInterval: (0, _type.isDefined)(tickInterval) ? tickInterval : this._tickInterval,\r\n                dataType: this._options.dataType,\r\n                logarithmBase: this._options.logarithmBase,\r\n                type: this._options.type,\r\n                showTransition: !this._options.marker.visible,\r\n                point: point\r\n            }) || \"\",\r\n            min: range.minVisible,\r\n            max: range.maxVisible\r\n        };\r\n        if (point) {\r\n            formatObject.point = point\r\n        }\r\n        return formatObject\r\n    },\r\n    formatLabel: function(value, labelOptions, range, point, tickInterval, ticks) {\r\n        var formatObject = this._getLabelFormatObject(value, labelOptions, range, point, tickInterval, ticks);\r\n        return (0, _type.isFunction)(labelOptions.customizeText) ? labelOptions.customizeText.call(formatObject, formatObject) : formatObject.valueText\r\n    },\r\n    formatHint: function(value, labelOptions, range) {\r\n        var formatObject = this._getLabelFormatObject(value, labelOptions, range);\r\n        return (0, _type.isFunction)(labelOptions.customizeHint) ? labelOptions.customizeHint.call(formatObject, formatObject) : void 0\r\n    },\r\n    formatRange: function(startValue, endValue, interval) {\r\n        return (0, _smart_formatter.formatRange)(startValue, endValue, interval, this.getOptions())\r\n    },\r\n    _setTickOffset: function() {\r\n        var options = this._options;\r\n        var discreteAxisDivisionMode = options.discreteAxisDivisionMode;\r\n        this._tickOffset = +(\"crossLabels\" !== discreteAxisDivisionMode || !discreteAxisDivisionMode)\r\n    },\r\n    getMargins: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var position = options.position;\r\n        var placeholderSize = options.placeholderSize;\r\n        var canvas = that.getCanvas();\r\n        var cLeft = canvas.left;\r\n        var cTop = canvas.top;\r\n        var cRight = canvas.width - canvas.right;\r\n        var cBottom = canvas.height - canvas.bottom;\r\n        var edgeMarginCorrection = _max(options.grid.visible && options.grid.width || 0, options.tick.visible && options.tick.width || 0);\r\n        var constantLineAboveSeries = that._axisConstantLineGroups.above;\r\n        var constantLineUnderSeries = that._axisConstantLineGroups.under;\r\n        var boxes = [that._axisElementsGroup, constantLineAboveSeries.outside1, constantLineAboveSeries.outside2, constantLineUnderSeries.outside1, constantLineUnderSeries.outside2, that._axisLineGroup].map(function(group) {\r\n            return group && group.getBBox()\r\n        }).concat(function(group) {\r\n            var box = group && group.getBBox();\r\n            if (!box || box.isEmpty) {\r\n                return box\r\n            }\r\n            if (that._isHorizontal) {\r\n                box.x = cLeft;\r\n                box.width = cRight - cLeft\r\n            } else {\r\n                box.y = cTop;\r\n                box.height = cBottom - cTop\r\n            }\r\n            return box\r\n        }(that._axisTitleGroup));\r\n        var margins = calculateCanvasMargins(boxes, canvas);\r\n        margins[position] += options.crosshairMargin;\r\n        if (placeholderSize) {\r\n            margins[position] = placeholderSize\r\n        }\r\n        if (edgeMarginCorrection) {\r\n            if (that._isHorizontal && canvas.right < edgeMarginCorrection && margins.right < edgeMarginCorrection) {\r\n                margins.right = edgeMarginCorrection\r\n            }\r\n            if (!that._isHorizontal && canvas.bottom < edgeMarginCorrection && margins.bottom < edgeMarginCorrection) {\r\n                margins.bottom = edgeMarginCorrection\r\n            }\r\n        }\r\n        return margins\r\n    },\r\n    validateUnit: function(unit, idError, parameters) {\r\n        var that = this;\r\n        unit = that.parser(unit);\r\n        if (void 0 === unit && idError) {\r\n            that._incidentOccurred(idError, [parameters])\r\n        }\r\n        return unit\r\n    },\r\n    _setType: function(axisType, drawingType) {\r\n        var that = this;\r\n        var axisTypeMethods;\r\n        switch (axisType) {\r\n            case \"xyAxes\":\r\n                axisTypeMethods = _xy_axes2.default;\r\n                break;\r\n            case \"polarAxes\":\r\n                axisTypeMethods = _polar_axes2.default\r\n        }(0, _extend.extend)(that, axisTypeMethods[drawingType])\r\n    },\r\n    _getSharpParam: function() {\r\n        return true\r\n    },\r\n    _disposeBreaksGroup: _common.noop,\r\n    dispose: function() {\r\n        var that = this;\r\n        [that._axisElementsGroup, that._axisStripGroup, that._axisGroup].forEach(function(g) {\r\n            g.dispose()\r\n        });\r\n        that._strips = that._title = null;\r\n        that._axisStripGroup = that._axisConstantLineGroups = that._axisStripLabelGroup = that._axisBreaksGroup = null;\r\n        that._axisLineGroup = that._axisElementsGroup = that._axisGridGroup = null;\r\n        that._axisGroup = that._axisTitleGroup = null;\r\n        that._axesContainerGroup = that._stripsGroup = that._constantLinesGroup = null;\r\n        that._renderer = that._options = that._textOptions = that._textFontStyles = null;\r\n        that._translator = null;\r\n        that._majorTicks = that._minorTicks = null;\r\n        that._disposeBreaksGroup()\r\n    },\r\n    getOptions: function() {\r\n        return this._options\r\n    },\r\n    setPane: function(pane) {\r\n        this.pane = pane;\r\n        this._options.pane = pane\r\n    },\r\n    setTypes: function(type, axisType, typeSelector) {\r\n        this._options.type = type || this._options.type;\r\n        this._options[typeSelector] = axisType || this._options[typeSelector];\r\n        this._updateTranslator()\r\n    },\r\n    resetTypes: function(typeSelector) {\r\n        this._options.type = this._initTypes.type;\r\n        this._options[typeSelector] = this._initTypes[typeSelector]\r\n    },\r\n    getTranslator: function() {\r\n        return this._translator\r\n    },\r\n    updateOptions: function(options) {\r\n        var that = this;\r\n        var labelOpt = options.label;\r\n        validateAxisOptions(options);\r\n        that._options = options;\r\n        options.tick = options.tick || {};\r\n        options.minorTick = options.minorTick || {};\r\n        options.grid = options.grid || {};\r\n        options.minorGrid = options.minorGrid || {};\r\n        options.title = options.title || {};\r\n        options.marker = options.marker || {};\r\n        that._initTypes = {\r\n            type: options.type,\r\n            argumentType: options.argumentType,\r\n            valueType: options.valueType\r\n        };\r\n        that._setTickOffset();\r\n        that._isHorizontal = options.isHorizontal;\r\n        that.pane = options.pane;\r\n        that.name = options.name;\r\n        that.priority = options.priority;\r\n        that._hasLabelFormat = \"\" !== labelOpt.format && (0, _type.isDefined)(labelOpt.format);\r\n        that._textOptions = {\r\n            opacity: labelOpt.opacity,\r\n            align: \"center\",\r\n            \"class\": labelOpt.cssClass\r\n        };\r\n        that._textFontStyles = _utils2.default.patchFontOptions(labelOpt.font);\r\n        if (options.type === _axes_constants2.default.logarithmic) {\r\n            if (options.logarithmBaseError) {\r\n                that._incidentOccurred(\"E2104\");\r\n                delete options.logarithmBaseError\r\n            }\r\n        }\r\n        that._updateTranslator();\r\n        that._createConstantLines();\r\n        that._strips = (options.strips || []).map(function(o) {\r\n            return (0, _strip2.default)(that, o)\r\n        });\r\n        that._majorTicks = that._minorTicks = null;\r\n        that._firstDrawing = true\r\n    },\r\n    calculateInterval: function(value, prevValue) {\r\n        var options = this._options;\r\n        if (!options || options.type !== _axes_constants2.default.logarithmic) {\r\n            return _abs(value - prevValue)\r\n        }\r\n        var _ref3 = new _range.Range(this.getTranslator().getBusinessRange()),\r\n            allowNegatives = _ref3.allowNegatives,\r\n            linearThreshold = _ref3.linearThreshold;\r\n        return _abs(getLog(value, options.logarithmBase, allowNegatives, linearThreshold) - getLog(prevValue, options.logarithmBase, allowNegatives, linearThreshold))\r\n    },\r\n    _processCanvas: function(canvas) {\r\n        return canvas\r\n    },\r\n    updateCanvas: function(canvas) {\r\n        var positions = this._orthogonalPositions = {\r\n            start: !this._isHorizontal ? canvas.left : canvas.top,\r\n            end: !this._isHorizontal ? canvas.width - canvas.right : canvas.height - canvas.bottom\r\n        };\r\n        this._canvas = canvas;\r\n        positions.center = positions.start + (positions.end - positions.start) / 2;\r\n        this._translator.updateCanvas(this._processCanvas(canvas));\r\n        this._initAxisPositions()\r\n    },\r\n    getCanvas: function() {\r\n        return this._canvas\r\n    },\r\n    getAxisShift: function() {\r\n        return this._axisShift || 0\r\n    },\r\n    hideTitle: function() {\r\n        var that = this;\r\n        if (that._options.title.text) {\r\n            that._incidentOccurred(\"W2105\", [that._isHorizontal ? \"horizontal\" : \"vertical\"]);\r\n            that._axisTitleGroup.clear()\r\n        }\r\n    },\r\n    getTitle: function() {\r\n        return this._title\r\n    },\r\n    hideOuterElements: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        if ((options.label.visible || that._outsideConstantLines.length) && !that._translator.getBusinessRange().isEmpty()) {\r\n            that._incidentOccurred(\"W2106\", [that._isHorizontal ? \"horizontal\" : \"vertical\"]);\r\n            that._axisElementsGroup.clear();\r\n            callAction(that._outsideConstantLines, \"removeLabel\")\r\n        }\r\n    },\r\n    adjustViewport: function(businessRange) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var isDiscrete = options.type === _axes_constants2.default.discrete;\r\n        var categories = that._seriesData && that._seriesData.categories || [];\r\n        var wholeRange = that.adjustRange(getVizRangeObject(options.wholeRange));\r\n        var visualRange = that.getViewport() || {};\r\n        var result = new _range.Range(businessRange);\r\n        that._addConstantLinesToRange(result, \"minVisible\", \"maxVisible\");\r\n        var minDefined = (0, _type.isDefined)(visualRange.startValue);\r\n        var maxDefined = (0, _type.isDefined)(visualRange.endValue);\r\n        if (!isDiscrete) {\r\n            minDefined = minDefined && (!(0, _type.isDefined)(wholeRange.endValue) || visualRange.startValue < wholeRange.endValue);\r\n            maxDefined = maxDefined && (!(0, _type.isDefined)(wholeRange.startValue) || visualRange.endValue > wholeRange.startValue)\r\n        }\r\n        var minVisible = minDefined ? visualRange.startValue : result.minVisible;\r\n        var maxVisible = maxDefined ? visualRange.endValue : result.maxVisible;\r\n        if (!isDiscrete) {\r\n            result.min = (0, _type.isDefined)(wholeRange.startValue) ? wholeRange.startValue : result.min;\r\n            result.max = (0, _type.isDefined)(wholeRange.endValue) ? wholeRange.endValue : result.max\r\n        } else {\r\n            var categoriesInfo = _utils2.default.getCategoriesInfo(categories, wholeRange.startValue, wholeRange.endValue);\r\n            categories = categoriesInfo.categories;\r\n            result.categories = categories\r\n        }\r\n        var adjustedVisualRange = _utils2.default.adjustVisualRange({\r\n            axisType: options.type,\r\n            dataType: options.dataType,\r\n            base: options.logarithmBase\r\n        }, {\r\n            startValue: minDefined ? visualRange.startValue : void 0,\r\n            endValue: maxDefined ? visualRange.endValue : void 0,\r\n            length: visualRange.length\r\n        }, {\r\n            categories: categories,\r\n            min: wholeRange.startValue,\r\n            max: wholeRange.endValue\r\n        }, {\r\n            categories: categories,\r\n            min: minVisible,\r\n            max: maxVisible\r\n        });\r\n        result.minVisible = adjustedVisualRange.startValue;\r\n        result.maxVisible = adjustedVisualRange.endValue;\r\n        !(0, _type.isDefined)(result.min) && (result.min = result.minVisible);\r\n        !(0, _type.isDefined)(result.max) && (result.max = result.maxVisible);\r\n        result.addRange({});\r\n        return result\r\n    },\r\n    adjustRange: function(range) {\r\n        range = range || {};\r\n        var isDiscrete = this._options.type === _axes_constants2.default.discrete;\r\n        var isLogarithmic = this._options.type === _axes_constants2.default.logarithmic;\r\n        var disabledNegatives = false === this._options.allowNegatives;\r\n        if (isLogarithmic) {\r\n            range.startValue = disabledNegatives && range.startValue <= 0 ? null : range.startValue;\r\n            range.endValue = disabledNegatives && range.endValue <= 0 ? null : range.endValue\r\n        }\r\n        if (!isDiscrete && (0, _type.isDefined)(range.startValue) && (0, _type.isDefined)(range.endValue) && range.startValue > range.endValue) {\r\n            var tmp = range.endValue;\r\n            range.endValue = range.startValue;\r\n            range.startValue = tmp\r\n        }\r\n        return range\r\n    },\r\n    _getVisualRangeUpdateMode: function(viewport, newRange, oppositeValue) {\r\n        var value = this._options.visualRangeUpdateMode;\r\n        var translator = this._translator;\r\n        var range = this._seriesData;\r\n        if (this.isArgumentAxis) {\r\n            if ([SHIFT, KEEP, RESET].indexOf(value) === -1) {\r\n                if (range.axisType === _axes_constants2.default.discrete) {\r\n                    var categories = range.categories;\r\n                    var newCategories = newRange.categories;\r\n                    var visualRange = this.visualRange();\r\n                    if (categories && newCategories && categories.length && newCategories.map(function(c) {\r\n                            return c.valueOf()\r\n                        }).join(\",\").indexOf(categories.map(function(c) {\r\n                            return c.valueOf()\r\n                        }).join(\",\")) !== -1 && (visualRange.startValue.valueOf() !== categories[0].valueOf() || visualRange.endValue.valueOf() !== categories[categories.length - 1].valueOf())) {\r\n                        value = KEEP\r\n                    } else {\r\n                        value = RESET\r\n                    }\r\n                } else {\r\n                    var minPoint = translator.translate(range.min);\r\n                    var minVisiblePoint = translator.translate(viewport.startValue);\r\n                    var maxPoint = translator.translate(range.max);\r\n                    var maxVisiblePoint = translator.translate(viewport.endValue);\r\n                    if (minPoint === minVisiblePoint && maxPoint === maxVisiblePoint) {\r\n                        value = RESET\r\n                    } else {\r\n                        if (minPoint !== minVisiblePoint && maxPoint === maxVisiblePoint) {\r\n                            value = SHIFT\r\n                        } else {\r\n                            value = KEEP\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if ([KEEP, RESET].indexOf(value) === -1) {\r\n                if (oppositeValue === KEEP) {\r\n                    value = KEEP\r\n                } else {\r\n                    value = RESET\r\n                }\r\n            }\r\n        }\r\n        return value\r\n    },\r\n    _handleBusinessRangeChanged: function(oppositeVisualRangeUpdateMode, axisReinitialized, newRange) {\r\n        var that = this;\r\n        var visualRange = this.visualRange();\r\n        if (axisReinitialized || that._translator.getBusinessRange().isEmpty()) {\r\n            return\r\n        }\r\n        var visualRangeUpdateMode = that._lastVisualRangeUpdateMode = that._getVisualRangeUpdateMode(visualRange, newRange, oppositeVisualRangeUpdateMode);\r\n        if (!that.isArgumentAxis) {\r\n            var viewport = that.getViewport();\r\n            if (!(0, _type.isDefined)(viewport.startValue) && !(0, _type.isDefined)(viewport.endValue) && !(0, _type.isDefined)(viewport.length)) {\r\n                visualRangeUpdateMode = RESET\r\n            }\r\n        }\r\n        that._prevDataWasEmpty && (visualRangeUpdateMode = KEEP);\r\n        if (visualRangeUpdateMode === KEEP) {\r\n            that._setVisualRange([visualRange.startValue, visualRange.endValue])\r\n        }\r\n        if (visualRangeUpdateMode === RESET) {\r\n            that._setVisualRange([null, null])\r\n        }\r\n        if (visualRangeUpdateMode === SHIFT) {\r\n            that._setVisualRange({\r\n                length: that.getVisualRangeLength()\r\n            })\r\n        }\r\n    },\r\n    getVisualRangeLength: function(range) {\r\n        var currentBusinessRange = range || this._translator.getBusinessRange();\r\n        var type = this._options.type;\r\n        var length;\r\n        if (type === _axes_constants2.default.logarithmic) {\r\n            length = (0, _math2.adjust)(this.calculateInterval(currentBusinessRange.maxVisible, currentBusinessRange.minVisible));\r\n        } else {\r\n            if (type === _axes_constants2.default.discrete) {\r\n                var categoriesInfo = _utils2.default.getCategoriesInfo(currentBusinessRange.categories, currentBusinessRange.minVisible, currentBusinessRange.maxVisible);\r\n                length = categoriesInfo.categories.length\r\n            } else {\r\n                length = currentBusinessRange.maxVisible - currentBusinessRange.minVisible\r\n            }\r\n        }\r\n        return length\r\n    },\r\n    getVisualRangeCenter: function(range) {\r\n        var businessRange = this._translator.getBusinessRange();\r\n        var currentBusinessRange = range || businessRange;\r\n        var _this$_options = this._options,\r\n            type = _this$_options.type,\r\n            logarithmBase = _this$_options.logarithmBase;\r\n        var center;\r\n        if (!(0, _type.isDefined)(currentBusinessRange.minVisible) || !(0, _type.isDefined)(currentBusinessRange.maxVisible)) {\r\n            return\r\n        }\r\n        if (type === _axes_constants2.default.logarithmic) {\r\n            var allowNegatives = currentBusinessRange.allowNegatives,\r\n                linearThreshold = currentBusinessRange.linearThreshold,\r\n                minVisible = currentBusinessRange.minVisible,\r\n                maxVisible = currentBusinessRange.maxVisible;\r\n            center = raiseTo((0, _math2.adjust)(getLog(maxVisible, logarithmBase, allowNegatives, linearThreshold) + getLog(minVisible, logarithmBase, allowNegatives, linearThreshold)) / 2, logarithmBase, allowNegatives, linearThreshold)\r\n        } else {\r\n            if (type === _axes_constants2.default.discrete) {\r\n                var categoriesInfo = _utils2.default.getCategoriesInfo(currentBusinessRange.categories, currentBusinessRange.minVisible, currentBusinessRange.maxVisible);\r\n                var index = Math.ceil(categoriesInfo.categories.length / 2) - 1;\r\n                center = businessRange.categories.indexOf(categoriesInfo.categories[index])\r\n            } else {\r\n                center = (currentBusinessRange.maxVisible.valueOf() + currentBusinessRange.minVisible.valueOf()) / 2\r\n            }\r\n        }\r\n        return center\r\n    },\r\n    setBusinessRange: function(range, axisReinitialized, oppositeVisualRangeUpdateMode, argCategories) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var isDiscrete = options.type === _axes_constants2.default.discrete;\r\n        that._handleBusinessRangeChanged(oppositeVisualRangeUpdateMode, axisReinitialized, range);\r\n        that._seriesData = new _range.Range(range);\r\n        var dataIsEmpty = that._seriesData.isEmpty();\r\n        that._prevDataWasEmpty = dataIsEmpty;\r\n        that._seriesData.addRange({\r\n            categories: options.categories,\r\n            dataType: options.dataType,\r\n            axisType: options.type,\r\n            base: options.logarithmBase,\r\n            invert: options.inverted\r\n        });\r\n        if (options.type === _axes_constants2.default.logarithmic) {\r\n            that._seriesData.addRange({\r\n                allowNegatives: void 0 !== options.allowNegatives ? options.allowNegatives : range.min <= 0\r\n            });\r\n            if (!isNaN(options.linearThreshold)) {\r\n                that._seriesData.linearThreshold = options.linearThreshold\r\n            }\r\n        }\r\n        if (!isDiscrete) {\r\n            if (!(0, _type.isDefined)(that._seriesData.min) && !(0, _type.isDefined)(that._seriesData.max)) {\r\n                var visualRange = that.getViewport();\r\n                visualRange && that._seriesData.addRange({\r\n                    min: visualRange.startValue,\r\n                    max: visualRange.endValue\r\n                })\r\n            }\r\n            var synchronizedValue = options.synchronizedValue;\r\n            if ((0, _type.isDefined)(synchronizedValue)) {\r\n                that._seriesData.addRange({\r\n                    min: synchronizedValue,\r\n                    max: synchronizedValue\r\n                })\r\n            }\r\n        }\r\n        that._seriesData.minVisible = void 0 === that._seriesData.minVisible ? that._seriesData.min : that._seriesData.minVisible;\r\n        that._seriesData.maxVisible = void 0 === that._seriesData.maxVisible ? that._seriesData.max : that._seriesData.maxVisible;\r\n        if (!that.isArgumentAxis && options.showZero) {\r\n            that._seriesData.correctValueZeroLevel()\r\n        }\r\n        that._seriesData.sortCategories(that.getCategoriesSorter(argCategories));\r\n        that._seriesData.breaks = that._breaks = that._getScaleBreaks(options, that._seriesData, that._series, that.isArgumentAxis);\r\n        that._translator.updateBusinessRange(that.adjustViewport(that._seriesData))\r\n    },\r\n    _addConstantLinesToRange: function(dataRange, minValueField, maxValueField) {\r\n        this._outsideConstantLines.concat(this._insideConstantLines || []).forEach(function(cl) {\r\n            if (cl.options.extendAxis) {\r\n                var _dataRange$addRange;\r\n                var value = cl.getParsedValue();\r\n                dataRange.addRange((_dataRange$addRange = {}, _defineProperty(_dataRange$addRange, minValueField, value), _defineProperty(_dataRange$addRange, maxValueField, value), _dataRange$addRange))\r\n            }\r\n        })\r\n    },\r\n    setGroupSeries: function(series) {\r\n        this._series = series\r\n    },\r\n    getLabelsPosition: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var position = options.position;\r\n        var labelShift = options.label.indentFromAxis + (that._axisShift || 0) + that._constantLabelOffset;\r\n        var axisPosition = that._axisPosition;\r\n        return position === TOP || position === LEFT ? axisPosition - labelShift : axisPosition + labelShift\r\n    },\r\n    getFormattedValue: function(value, options, point) {\r\n        var labelOptions = this._options.label;\r\n        return (0, _type.isDefined)(value) ? this.formatLabel(value, (0, _extend.extend)(true, {}, labelOptions, options), void 0, point) : null\r\n    },\r\n    _getBoundaryTicks: function(majors, viewPort) {\r\n        var that = this;\r\n        var length = majors.length;\r\n        var options = that._options;\r\n        var customBounds = options.customBoundTicks;\r\n        var min = viewPort.minVisible;\r\n        var max = viewPort.maxVisible;\r\n        var addMinMax = options.showCustomBoundaryTicks ? that._boundaryTicksVisibility : {};\r\n        var boundaryTicks = [];\r\n        if (options.type === _axes_constants2.default.discrete) {\r\n            if (that._tickOffset && 0 !== majors.length) {\r\n                boundaryTicks = [majors[0], majors[majors.length - 1]]\r\n            }\r\n        } else {\r\n            if (customBounds) {\r\n                if (addMinMax.min && (0, _type.isDefined)(customBounds[0])) {\r\n                    boundaryTicks.push(customBounds[0])\r\n                }\r\n                if (addMinMax.max && (0, _type.isDefined)(customBounds[1])) {\r\n                    boundaryTicks.push(customBounds[1])\r\n                }\r\n            } else {\r\n                if (addMinMax.min && (0 === length || majors[0] > min)) {\r\n                    boundaryTicks.push(min)\r\n                }\r\n                if (addMinMax.max && (0 === length || majors[length - 1] < max)) {\r\n                    boundaryTicks.push(max)\r\n                }\r\n            }\r\n        }\r\n        return boundaryTicks\r\n    },\r\n    setPercentLabelFormat: function() {\r\n        if (!this._hasLabelFormat) {\r\n            this._options.label.format = \"percent\"\r\n        }\r\n    },\r\n    resetAutoLabelFormat: function() {\r\n        if (!this._hasLabelFormat) {\r\n            delete this._options.label.format\r\n        }\r\n    },\r\n    getMultipleAxesSpacing: function() {\r\n        return this._options.multipleAxesSpacing || 0\r\n    },\r\n    getTicksValues: function() {\r\n        return {\r\n            majorTicksValues: convertTicksToValues(this._majorTicks),\r\n            minorTicksValues: convertTicksToValues(this._minorTicks)\r\n        }\r\n    },\r\n    setTicks: function(ticks) {\r\n        var majors = ticks.majorTicks || [];\r\n        this._majorTicks = majors.map(createMajorTick(this, this._renderer, this._getSkippedCategory(majors)));\r\n        this._minorTicks = (ticks.minorTicks || []).map(createMinorTick(this, this._renderer));\r\n        this._isSynchronized = true\r\n    },\r\n    _adjustDivisionFactor: function(val) {\r\n        return val\r\n    },\r\n    _getTicks: function(viewPort, incidentOccurred, skipTickGeneration) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var customTicks = options.customTicks;\r\n        var customMinorTicks = options.customMinorTicks;\r\n        return getTickGenerator(options, incidentOccurred || that._incidentOccurred, skipTickGeneration, that._translator.getBusinessRange().isEmpty(), that._adjustDivisionFactor.bind(that), viewPort)({\r\n            min: viewPort.minVisible,\r\n            max: viewPort.maxVisible,\r\n            categories: viewPort.categories,\r\n            isSpacedMargin: viewPort.isSpacedMargin,\r\n            checkMinDataVisibility: viewPort.checkMinDataVisibility,\r\n            checkMaxDataVisibility: viewPort.checkMaxDataVisibility\r\n        }, that._getScreenDelta(), options.tickInterval, \"ignore\" === options.label.overlappingBehavior || options.forceUserTickInterval, {\r\n            majors: customTicks,\r\n            minors: customMinorTicks\r\n        }, options.minorTickInterval, options.minorTickCount, that._breaks)\r\n    },\r\n    _createTicksAndLabelFormat: function(range, incidentOccurred) {\r\n        var options = this._options;\r\n        var ticks;\r\n        ticks = this._getTicks(range, incidentOccurred, false);\r\n        if (!range.isEmpty() && options.type === _axes_constants2.default.discrete && \"datetime\" === options.dataType && !this._hasLabelFormat && ticks.ticks.length) {\r\n            options.label.format = _format_helper2.default.getDateFormatByTicks(ticks.ticks)\r\n        }\r\n        return ticks\r\n    },\r\n    getAggregationInfo: function(useAllAggregatedPoints, range) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var marginOptions = that._marginOptions;\r\n        var businessRange = new _range.Range(that.getTranslator().getBusinessRange()).addRange(range);\r\n        var visualRange = that.getViewport();\r\n        var minVisible = visualRange && (0, _type.isDefined)(visualRange.startValue) ? visualRange.startValue : businessRange.minVisible;\r\n        var maxVisible = visualRange && (0, _type.isDefined)(visualRange.endValue) ? visualRange.endValue : businessRange.maxVisible;\r\n        var ticks = [];\r\n        if (options.type === _axes_constants2.default.discrete && options.aggregateByCategory) {\r\n            return {\r\n                aggregateByCategory: true\r\n            }\r\n        }\r\n        var aggregationInterval = options.aggregationInterval;\r\n        var aggregationGroupWidth = options.aggregationGroupWidth;\r\n        if (!aggregationGroupWidth && marginOptions) {\r\n            if (marginOptions.checkInterval) {\r\n                aggregationGroupWidth = options.axisDivisionFactor\r\n            }\r\n            if (marginOptions.sizePointNormalState) {\r\n                aggregationGroupWidth = Math.min(marginOptions.sizePointNormalState, options.axisDivisionFactor)\r\n            }\r\n        }\r\n        var minInterval = !options.aggregationGroupWidth && !aggregationInterval && range.interval;\r\n        var generateTicks = configureGenerator(options, aggregationGroupWidth, businessRange, that._getScreenDelta(), minInterval);\r\n        var tickInterval = generateTicks(aggregationInterval, true, minVisible, maxVisible, that._breaks).tickInterval;\r\n        if (options.type !== _axes_constants2.default.discrete) {\r\n            var min = useAllAggregatedPoints ? businessRange.min : minVisible;\r\n            var max = useAllAggregatedPoints ? businessRange.max : maxVisible;\r\n            if ((0, _type.isDefined)(min) && (0, _type.isDefined)(max)) {\r\n                var add = _utils2.default.getAddFunction({\r\n                    base: options.logarithmBase,\r\n                    axisType: options.type,\r\n                    dataType: options.dataType\r\n                }, false);\r\n                var start = min;\r\n                var end = max;\r\n                if (!useAllAggregatedPoints) {\r\n                    var maxMinDistance = Math.max(that.calculateInterval(max, min), \"datetime\" === options.dataType ? (0, _date.dateToMilliseconds)(tickInterval) : tickInterval);\r\n                    start = add(min, maxMinDistance, -1);\r\n                    end = add(max, maxMinDistance)\r\n                }\r\n                start = start < businessRange.min ? businessRange.min : start;\r\n                end = end > businessRange.max ? businessRange.max : end;\r\n                var breaks = that._getScaleBreaks(options, {\r\n                    minVisible: start,\r\n                    maxVisible: end\r\n                }, that._series, that.isArgumentAxis);\r\n                ticks = generateTicks(tickInterval, false, start, end, breaks).ticks\r\n            }\r\n        }\r\n        that._aggregationInterval = tickInterval;\r\n        return {\r\n            interval: tickInterval,\r\n            ticks: ticks\r\n        }\r\n    },\r\n    createTicks: function(canvas) {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var options = that._options;\r\n        var ticks;\r\n        var boundaryTicks;\r\n        var range;\r\n        if (!canvas) {\r\n            return\r\n        }\r\n        that._isSynchronized = false;\r\n        that.updateCanvas(canvas);\r\n        that._estimatedTickInterval = that._getTicks(that.adjustViewport(this._seriesData), _common.noop, true).tickInterval;\r\n        range = that._getViewportRange();\r\n        var margins = this._calculateValueMargins();\r\n        range.addRange({\r\n            minVisible: margins.minValue,\r\n            maxVisible: margins.maxValue,\r\n            isSpacedMargin: margins.isSpacedMargin,\r\n            checkMinDataVisibility: !this.isArgumentAxis && margins.checkInterval && !(0, _type.isDefined)(options.min) && margins.minValue.valueOf() > 0,\r\n            checkMaxDataVisibility: !this.isArgumentAxis && margins.checkInterval && !(0, _type.isDefined)(options.max) && margins.maxValue.valueOf() < 0\r\n        });\r\n        ticks = that._createTicksAndLabelFormat(range);\r\n        boundaryTicks = that._getBoundaryTicks(ticks.ticks, that._getViewportRange());\r\n        if (options.showCustomBoundaryTicks && boundaryTicks.length) {\r\n            that._boundaryTicks = [boundaryTicks[0]].map(createBoundaryTick(that, renderer, true));\r\n            if (boundaryTicks.length > 1) {\r\n                that._boundaryTicks = that._boundaryTicks.concat([boundaryTicks[1]].map(createBoundaryTick(that, renderer, false)))\r\n            }\r\n        } else {\r\n            that._boundaryTicks = []\r\n        }\r\n        var minors = (ticks.minorTicks || []).filter(function(minor) {\r\n            return !boundaryTicks.some(function(boundary) {\r\n                return valueOf(boundary) === valueOf(minor)\r\n            })\r\n        });\r\n        that._tickInterval = ticks.tickInterval;\r\n        that._minorTickInterval = ticks.minorTickInterval;\r\n        var oldMajorTicks = that._majorTicks || [];\r\n        var majorTicksByValues = oldMajorTicks.reduce(function(r, t) {\r\n            r[t.value.valueOf()] = t;\r\n            return r\r\n        }, {});\r\n        var sameType = (0, _type.type)(ticks.ticks[0]) === (0, _type.type)(oldMajorTicks[0] && oldMajorTicks[0].value);\r\n        var skippedCategory = that._getSkippedCategory(ticks.ticks);\r\n        var majorTicks = ticks.ticks.map(function(v) {\r\n            var tick = majorTicksByValues[v.valueOf()];\r\n            if (tick && sameType) {\r\n                delete majorTicksByValues[v.valueOf()];\r\n                tick.setSkippedCategory(skippedCategory);\r\n                return tick\r\n            } else {\r\n                return createMajorTick(that, renderer, skippedCategory)(v)\r\n            }\r\n        });\r\n        that._majorTicks = majorTicks;\r\n        var oldMinorTicks = that._minorTicks || [];\r\n        that._minorTicks = minors.map(function(v, i) {\r\n            var minorTick = oldMinorTicks[i];\r\n            if (minorTick) {\r\n                minorTick.updateValue(v);\r\n                return minorTick\r\n            }\r\n            return createMinorTick(that, renderer)(v)\r\n        });\r\n        that._ticksToRemove = Object.keys(majorTicksByValues).map(function(k) {\r\n            return majorTicksByValues[k]\r\n        }).concat(oldMinorTicks.slice(that._minorTicks.length, oldMinorTicks.length));\r\n        that._correctedBreaks = ticks.breaks;\r\n        that._reinitTranslator(that._getViewportRange())\r\n    },\r\n    _reinitTranslator: function(range) {\r\n        var that = this;\r\n        var translator = that._translator;\r\n        if (that._correctedBreaks) {\r\n            range.breaks = that._correctedBreaks\r\n        }\r\n        if (that._isSynchronized) {\r\n            return\r\n        }\r\n        translator.updateBusinessRange(that.adjustViewport(range))\r\n    },\r\n    _getViewportRange: function() {\r\n        return this.adjustViewport(this._seriesData)\r\n    },\r\n    setMarginOptions: function(options) {\r\n        this._marginOptions = options\r\n    },\r\n    getMarginOptions: function() {\r\n        return (0, _type.isDefined)(this._marginOptions) ? this._marginOptions : {}\r\n    },\r\n    allowToExtendVisualRange: function(isEnd) {\r\n        var wholeRange = this.adjustRange(getVizRangeObject(this._options.wholeRange));\r\n        var bound = isEnd ? wholeRange.endValue : wholeRange.startValue;\r\n        return !this.isArgumentAxis || !(0, _type.isDefined)(bound) && this.isExtremePosition(isEnd)\r\n    },\r\n    _calculateRangeInterval: function(interval) {\r\n        var isDateTime = \"datetime\" === this._options.dataType;\r\n        var minArgs = [];\r\n        var addToArgs = function(value) {\r\n            (0, _type.isDefined)(value) && minArgs.push(isDateTime ? (0, _date.dateToMilliseconds)(value) : value)\r\n        };\r\n        addToArgs(this._tickInterval);\r\n        addToArgs(this._estimatedTickInterval);\r\n        (0, _type.isDefined)(interval) && minArgs.push(interval);\r\n        addToArgs(this._aggregationInterval);\r\n        return this._calculateWorkWeekInterval(_min.apply(this, minArgs))\r\n    },\r\n    _calculateWorkWeekInterval: function(businessInterval) {\r\n        var options = this._options;\r\n        if (\"datetime\" === options.dataType && options.workdaysOnly && businessInterval) {\r\n            var workWeek = options.workWeek.length * dateIntervals.day;\r\n            var weekend = dateIntervals.week - workWeek;\r\n            if (workWeek !== businessInterval && weekend < businessInterval) {\r\n                var weekendsCount = Math.ceil(businessInterval / dateIntervals.week);\r\n                businessInterval = weekend >= businessInterval ? dateIntervals.day : businessInterval - weekend * weekendsCount\r\n            } else {\r\n                if (weekend >= businessInterval && businessInterval > dateIntervals.day) {\r\n                    businessInterval = dateIntervals.day\r\n                }\r\n            }\r\n        }\r\n        return businessInterval\r\n    },\r\n    _calculateValueMargins: function(ticks) {\r\n        this._resetMargins();\r\n        var that = this;\r\n        var margins = that.getMarginOptions();\r\n        var marginSize = (margins.size || 0) / 2;\r\n        var options = that._options;\r\n        var dataRange = this._getViewportRange();\r\n        var viewPort = this.getViewport();\r\n        var screenDelta = that._getScreenDelta();\r\n        var isDiscrete = (options.type || \"\").indexOf(_axes_constants2.default.discrete) !== -1;\r\n        var valueMarginsEnabled = options.valueMarginsEnabled && !isDiscrete;\r\n        var translator = that._translator;\r\n        var minValueMargin = options.minValueMargin;\r\n        var maxValueMargin = options.maxValueMargin;\r\n        var minPadding = 0;\r\n        var maxPadding = 0;\r\n        var interval = 0;\r\n        var rangeInterval;\r\n        if (dataRange.stubData || !screenDelta) {\r\n            return {\r\n                startPadding: 0,\r\n                endPadding: 0\r\n            }\r\n        }\r\n\r\n        function getConvertIntervalCoefficient(intervalInPx) {\r\n            var ratioOfCanvasRange = translator.ratioOfCanvasRange();\r\n            return ratioOfCanvasRange / (ratioOfCanvasRange * screenDelta / (intervalInPx + screenDelta))\r\n        }\r\n        if (that.isArgumentAxis && margins.checkInterval) {\r\n            rangeInterval = that._calculateRangeInterval(dataRange.interval);\r\n            var pxInterval = translator.getInterval(rangeInterval);\r\n            if (isFinite(pxInterval)) {\r\n                interval = Math.ceil(pxInterval / (2 * getConvertIntervalCoefficient(pxInterval)))\r\n            } else {\r\n                rangeInterval = 0\r\n            }\r\n        }\r\n        var minPercentPadding;\r\n        var maxPercentPadding;\r\n        var maxPaddingValue = screenDelta * MAX_MARGIN_VALUE / 2;\r\n        if (valueMarginsEnabled) {\r\n            if ((0, _type.isDefined)(minValueMargin)) {\r\n                minPercentPadding = isFinite(minValueMargin) ? minValueMargin : 0\r\n            } else {\r\n                minPadding = Math.max(marginSize, interval);\r\n                minPadding = Math.min(maxPaddingValue, minPadding)\r\n            }\r\n            if ((0, _type.isDefined)(maxValueMargin)) {\r\n                maxPercentPadding = isFinite(maxValueMargin) ? maxValueMargin : 0\r\n            } else {\r\n                maxPadding = Math.max(marginSize, interval);\r\n                maxPadding = Math.min(maxPaddingValue, maxPadding)\r\n            }\r\n        }\r\n        var percentStick = margins.percentStick && !this.isArgumentAxis;\r\n        if (percentStick) {\r\n            if (1 === _abs(dataRange.max)) {\r\n                maxPadding = 0\r\n            }\r\n            if (1 === _abs(dataRange.min)) {\r\n                minPadding = 0\r\n            }\r\n        }\r\n        var canvasStartEnd = that._getCanvasStartEnd();\r\n        var commonMargin = 1 + (minPercentPadding || 0) + (maxPercentPadding || 0);\r\n        var screenDeltaWithMargins = (screenDelta - minPadding - maxPadding) / commonMargin || screenDelta;\r\n        if (void 0 !== minPercentPadding || void 0 !== maxPercentPadding) {\r\n            if (void 0 !== minPercentPadding) {\r\n                minPadding = screenDeltaWithMargins * minPercentPadding\r\n            }\r\n            if (void 0 !== maxPercentPadding) {\r\n                maxPadding = screenDeltaWithMargins * maxPercentPadding\r\n            }\r\n        }\r\n        var minValue;\r\n        var maxValue;\r\n        if (options.type !== _axes_constants2.default.discrete && ticks && ticks.length > 1 && !options.skipViewportExtending && !viewPort.action && false !== options.endOnTick) {\r\n            var length = ticks.length;\r\n            var firstTickPosition = translator.translate(ticks[0].value);\r\n            var lastTickPosition = translator.translate(ticks[length - 1].value);\r\n            var invertMultiplier = firstTickPosition > lastTickPosition ? -1 : 1;\r\n            var minTickPadding = _max(invertMultiplier * (canvasStartEnd.start - firstTickPosition), 0);\r\n            var maxTickPadding = _max(invertMultiplier * (lastTickPosition - canvasStartEnd.end), 0);\r\n            if (minTickPadding > minPadding || maxTickPadding > maxPadding) {\r\n                var commonPadding = maxTickPadding + minTickPadding;\r\n                var coeff = getConvertIntervalCoefficient(commonPadding);\r\n                if (minTickPadding >= minPadding) {\r\n                    minValue = ticks[0].value\r\n                }\r\n                if (maxTickPadding >= maxPadding) {\r\n                    maxValue = ticks[length - 1].value\r\n                }\r\n                minPadding = _max(minTickPadding, minPadding) / coeff;\r\n                maxPadding = _max(maxTickPadding, maxPadding) / coeff\r\n            }\r\n        }\r\n        minPercentPadding = void 0 === minPercentPadding ? minPadding / screenDeltaWithMargins : minPercentPadding;\r\n        maxPercentPadding = void 0 === maxPercentPadding ? maxPadding / screenDeltaWithMargins : maxPercentPadding;\r\n        if (!isDiscrete) {\r\n            if (this._translator.isInverted()) {\r\n                minValue = (0, _type.isDefined)(minValue) ? minValue : translator.from(canvasStartEnd.start + screenDelta * minPercentPadding, -1);\r\n                maxValue = (0, _type.isDefined)(maxValue) ? maxValue : translator.from(canvasStartEnd.end - screenDelta * maxPercentPadding, 1)\r\n            } else {\r\n                minValue = (0, _type.isDefined)(minValue) ? minValue : translator.from(canvasStartEnd.start - screenDelta * minPercentPadding, -1);\r\n                maxValue = (0, _type.isDefined)(maxValue) ? maxValue : translator.from(canvasStartEnd.end + screenDelta * maxPercentPadding, 1)\r\n            }\r\n        }\r\n\r\n        function correctZeroLevel(minPoint, maxPoint) {\r\n            var minExpectedPadding = _abs(canvasStartEnd.start - minPoint);\r\n            var maxExpectedPadding = _abs(canvasStartEnd.end - maxPoint);\r\n            var coeff = getConvertIntervalCoefficient(minExpectedPadding + maxExpectedPadding);\r\n            minPadding = minExpectedPadding / coeff;\r\n            maxPadding = maxExpectedPadding / coeff\r\n        }\r\n        if (!that.isArgumentAxis) {\r\n            if (minValue * dataRange.min <= 0 && minValue * dataRange.minVisible <= 0) {\r\n                correctZeroLevel(translator.translate(0), translator.translate(maxValue));\r\n                minValue = 0\r\n            }\r\n            if (maxValue * dataRange.max <= 0 && maxValue * dataRange.maxVisible <= 0) {\r\n                correctZeroLevel(translator.translate(minValue), translator.translate(0));\r\n                maxValue = 0\r\n            }\r\n        }\r\n        return {\r\n            startPadding: this._translator.isInverted() ? maxPadding : minPadding,\r\n            endPadding: this._translator.isInverted() ? minPadding : maxPadding,\r\n            minValue: minValue,\r\n            maxValue: maxValue,\r\n            interval: rangeInterval,\r\n            isSpacedMargin: minPadding === maxPadding && 0 !== minPadding\r\n        }\r\n    },\r\n    applyMargins: function() {\r\n        if (this._isSynchronized) {\r\n            return\r\n        }\r\n        var margins = this._calculateValueMargins(this._majorTicks);\r\n        var canvas = (0, _extend.extend)({}, this._canvas, {\r\n            startPadding: margins.startPadding,\r\n            endPadding: margins.endPadding\r\n        });\r\n        this._translator.updateCanvas(this._processCanvas(canvas));\r\n        if (isFinite(margins.interval)) {\r\n            var br = this._translator.getBusinessRange();\r\n            br.addRange({\r\n                interval: margins.interval\r\n            });\r\n            this._translator.updateBusinessRange(br)\r\n        }\r\n    },\r\n    _resetMargins: function() {\r\n        this._reinitTranslator(this._getViewportRange());\r\n        if (this._canvas) {\r\n            this._translator.updateCanvas(this._processCanvas(this._canvas))\r\n        }\r\n    },\r\n    _createConstantLines: function() {\r\n        var _this = this;\r\n        var constantLines = (this._options.constantLines || []).map(function(o) {\r\n            return (0, _constant_line2.default)(_this, o)\r\n        });\r\n        this._outsideConstantLines = constantLines.filter(function(l) {\r\n            return \"outside\" === l.labelPosition\r\n        });\r\n        this._insideConstantLines = constantLines.filter(function(l) {\r\n            return \"inside\" === l.labelPosition\r\n        })\r\n    },\r\n    draw: function(canvas, borderOptions) {\r\n        var that = this;\r\n        var options = this._options;\r\n        that.borderOptions = borderOptions || {\r\n            visible: false\r\n        };\r\n        that._resetMargins();\r\n        that.createTicks(canvas);\r\n        that.applyMargins();\r\n        that._clearAxisGroups();\r\n        initTickCoords(that._majorTicks);\r\n        initTickCoords(that._minorTicks);\r\n        initTickCoords(that._boundaryTicks);\r\n        that._axisGroup.append(that._axesContainerGroup);\r\n        that._drawAxis();\r\n        that._drawTitle();\r\n        drawTickMarks(that._majorTicks, options.tick);\r\n        drawTickMarks(that._minorTicks, options.minorTick);\r\n        drawTickMarks(that._boundaryTicks, options.tick);\r\n        var drawGridLine = that._getGridLineDrawer();\r\n        drawGrids(that._majorTicks, drawGridLine);\r\n        drawGrids(that._minorTicks, drawGridLine);\r\n        callAction(that._majorTicks, \"drawLabel\", that._getViewportRange());\r\n        that._majorTicks.forEach(function(tick) {\r\n            tick.labelRotationAngle = 0;\r\n            tick.labelAlignment = void 0;\r\n            tick.labelOffset = 0\r\n        });\r\n        callAction(that._outsideConstantLines.concat(that._insideConstantLines), \"draw\");\r\n        callAction(that._strips, \"draw\");\r\n        that._dateMarkers = that._drawDateMarkers() || [];\r\n        that._labelAxesGroup && that._axisStripLabelGroup.append(that._labelAxesGroup);\r\n        that._gridContainerGroup && that._axisGridGroup.append(that._gridContainerGroup);\r\n        that._stripsGroup && that._axisStripGroup.append(that._stripsGroup);\r\n        if (that._constantLinesGroup) {\r\n            that._axisConstantLineGroups.above.inside.append(that._constantLinesGroup.above);\r\n            that._axisConstantLineGroups.above.outside1.append(that._constantLinesGroup.above);\r\n            that._axisConstantLineGroups.above.outside2.append(that._constantLinesGroup.above);\r\n            that._axisConstantLineGroups.under.inside.append(that._constantLinesGroup.under);\r\n            that._axisConstantLineGroups.under.outside1.append(that._constantLinesGroup.under);\r\n            that._axisConstantLineGroups.under.outside2.append(that._constantLinesGroup.under)\r\n        }\r\n        that._measureTitle();\r\n        measureLabels(that._majorTicks);\r\n        var textWidth;\r\n        var textHeight;\r\n        var convertedTickInterval;\r\n        var tickInterval = that._tickInterval;\r\n        if ((0, _type.isDefined)(tickInterval)) {\r\n            convertedTickInterval = that.getTranslator().getInterval(\"datetime\" === options.dataType ? (0, _date.dateToMilliseconds)(tickInterval) : tickInterval)\r\n        }\r\n        var usefulSpace = (0, _type.isDefined)(options.placeholderSize) ? options.placeholderSize - options.label.indentFromAxis : void 0;\r\n        if (that._isHorizontal) {\r\n            textWidth = convertedTickInterval;\r\n            textHeight = usefulSpace\r\n        } else {\r\n            textWidth = usefulSpace;\r\n            textHeight = convertedTickInterval\r\n        }\r\n        var displayMode = that._validateDisplayMode(options.label.displayMode);\r\n        var overlappingMode = that._validateOverlappingMode(options.label.overlappingBehavior, displayMode);\r\n        var wordWrapMode = options.label.wordWrap || \"none\";\r\n        var overflowMode = options.label.textOverflow || \"none\";\r\n        if ((\"none\" !== wordWrapMode || \"none\" !== overflowMode) && displayMode !== ROTATE && overlappingMode !== ROTATE && \"auto\" !== overlappingMode) {\r\n            var correctByWidth = false;\r\n            var correctByHeight = false;\r\n            if (textWidth) {\r\n                if (that._majorTicks.some(function(tick) {\r\n                        return tick.labelBBox.width > textWidth\r\n                    })) {\r\n                    correctByWidth = true\r\n                }\r\n            }\r\n            if (textHeight) {\r\n                if (that._majorTicks.some(function(tick) {\r\n                        return tick.labelBBox.height > textHeight\r\n                    })) {\r\n                    correctByHeight = true\r\n                }\r\n            }\r\n            if (correctByWidth || correctByHeight) {\r\n                that._majorTicks.forEach(function(tick) {\r\n                    tick.label && tick.label.setMaxSize(textWidth, textHeight, options.label)\r\n                });\r\n                measureLabels(that._majorTicks)\r\n            }\r\n        }\r\n        measureLabels(that._outsideConstantLines);\r\n        measureLabels(that._insideConstantLines);\r\n        measureLabels(that._strips);\r\n        measureLabels(that._dateMarkers);\r\n        that._adjustConstantLineLabels(that._insideConstantLines);\r\n        that._adjustStripLabels();\r\n        var offset = that._constantLabelOffset = that._adjustConstantLineLabels(that._outsideConstantLines);\r\n        if (!that._translator.getBusinessRange().isEmpty()) {\r\n            that._setLabelsPlacement();\r\n            offset = that._adjustLabels(offset)\r\n        }\r\n        offset = that._adjustDateMarkers(offset);\r\n        that._adjustTitle(offset)\r\n    },\r\n    _measureTitle: _common.noop,\r\n    animate: function() {\r\n        callAction(this._majorTicks, \"animateLabels\")\r\n    },\r\n    updateSize: function(canvas, animate) {\r\n        var updateTitle = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : true;\r\n        var that = this;\r\n        that.updateCanvas(canvas);\r\n        if (updateTitle) {\r\n            that._checkTitleOverflow();\r\n            that._measureTitle();\r\n            that._updateTitleCoords()\r\n        }\r\n        that._reinitTranslator(that._getViewportRange());\r\n        that.applyMargins();\r\n        var animationEnabled = !that._firstDrawing && animate;\r\n        var options = this._options;\r\n        initTickCoords(that._majorTicks);\r\n        initTickCoords(that._minorTicks);\r\n        initTickCoords(that._boundaryTicks);\r\n        cleanUpInvalidTicks(that._majorTicks);\r\n        cleanUpInvalidTicks(that._minorTicks);\r\n        cleanUpInvalidTicks(that._boundaryTicks);\r\n        if (this._axisElement) {\r\n            that._updateAxisElementPosition()\r\n        }\r\n        updateTicksPosition(that._majorTicks, options.tick, animationEnabled);\r\n        updateTicksPosition(that._minorTicks, options.minorTick, animationEnabled);\r\n        updateTicksPosition(that._boundaryTicks, options.tick);\r\n        callAction(that._majorTicks, \"updateLabelPosition\", animationEnabled);\r\n        that._outsideConstantLines.concat(that._insideConstantLines || []).forEach(function(l) {\r\n            return l.updatePosition(animationEnabled)\r\n        });\r\n        callAction(that._strips, \"updatePosition\", animationEnabled);\r\n        updateGridsPosition(that._majorTicks, animationEnabled);\r\n        updateGridsPosition(that._minorTicks, animationEnabled);\r\n        if (animationEnabled) {\r\n            callAction(that._ticksToRemove || [], \"fadeOutElements\")\r\n        }\r\n        that.prepareAnimation();\r\n        that._ticksToRemove = null;\r\n        if (!that._translator.getBusinessRange().isEmpty()) {\r\n            that._firstDrawing = false\r\n        }\r\n    },\r\n    prepareAnimation: function() {\r\n        var that = this;\r\n        var action = \"saveCoords\";\r\n        callAction(that._majorTicks, action);\r\n        callAction(that._minorTicks, action);\r\n        callAction(that._insideConstantLines, action);\r\n        callAction(that._outsideConstantLines, action);\r\n        callAction(that._strips, action)\r\n    },\r\n    applyClipRects: function(elementsClipID, canvasClipID) {\r\n        this._axisGroup.attr({\r\n            \"clip-path\": canvasClipID\r\n        });\r\n        this._axisStripGroup.attr({\r\n            \"clip-path\": elementsClipID\r\n        })\r\n    },\r\n    _mergeViewportOptions: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var visualRange = {};\r\n        var visualRangeOptionValue = options._customVisualRange;\r\n        if (((0, _type.isDefined)(options.max) || (0, _type.isDefined)(options.min)) && !(0, _type.isDefined)(visualRangeOptionValue.startValue) && !(0, _type.isDefined)(visualRangeOptionValue.endValue) && !(0, _type.isDefined)(visualRangeOptionValue.length)) {\r\n            visualRange = {\r\n                startValue: options.min,\r\n                endValue: options.max\r\n            }\r\n        } else {\r\n            visualRange = visualRangeOptionValue\r\n        }\r\n        that._setVisualRange(visualRange)\r\n    },\r\n    _validateVisualRange: function(visualRange) {\r\n        var range = getVizRangeObject(visualRange);\r\n        if (void 0 !== range.startValue) {\r\n            range.startValue = this.validateUnit(range.startValue)\r\n        }\r\n        if (void 0 !== range.endValue) {\r\n            range.endValue = this.validateUnit(range.endValue)\r\n        }\r\n        return convertVisualRangeObject(range, visualRange)\r\n    },\r\n    _validateOptions: function(options) {\r\n        var that = this;\r\n        if (void 0 !== options.min) {\r\n            options.min = that.validateUnit(options.min, \"E2106\")\r\n        }\r\n        if (void 0 !== options.max) {\r\n            options.max = that.validateUnit(options.max, \"E2106\")\r\n        }\r\n        options.wholeRange = that._validateVisualRange(options.wholeRange);\r\n        options.visualRange = options._customVisualRange = that._validateVisualRange(options._customVisualRange);\r\n        that._mergeViewportOptions()\r\n    },\r\n    validate: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var dataType = that.isArgumentAxis ? options.argumentType : options.valueType;\r\n        var parser = dataType ? _parse_utils2.default.getParser(dataType) : function(unit) {\r\n            return unit\r\n        };\r\n        that.parser = parser;\r\n        options.dataType = dataType;\r\n        that._validateOptions(options)\r\n    },\r\n    resetVisualRange: function(isSilent) {\r\n        this._seriesData.minVisible = this._seriesData.min;\r\n        this._seriesData.maxVisible = this._seriesData.max;\r\n        this.handleZooming([null, null], {\r\n            start: !!isSilent,\r\n            end: !!isSilent\r\n        })\r\n    },\r\n    _setVisualRange: function(visualRange, allowPartialUpdate) {\r\n        var range = this.adjustRange(_utils2.default.getVizRangeObject(visualRange));\r\n        if (allowPartialUpdate) {\r\n            (0, _type.isDefined)(range.startValue) && (this._viewport.startValue = range.startValue);\r\n            (0, _type.isDefined)(range.endValue) && (this._viewport.endValue = range.endValue)\r\n        } else {\r\n            this._viewport = range\r\n        }\r\n    },\r\n    _applyZooming: function(visualRange, allowPartialUpdate) {\r\n        var that = this;\r\n        that._resetVisualRangeOption();\r\n        that._setVisualRange(visualRange, allowPartialUpdate);\r\n        var viewPort = that.getViewport();\r\n        that._breaks = that._getScaleBreaks(that._options, {\r\n            minVisible: viewPort.startValue,\r\n            maxVisible: viewPort.endValue\r\n        }, that._series, that.isArgumentAxis);\r\n        that._translator.updateBusinessRange(that._getViewportRange())\r\n    },\r\n    getZoomStartEventArg: function(event, actionType) {\r\n        return {\r\n            axis: this,\r\n            range: this.visualRange(),\r\n            cancel: false,\r\n            event: event,\r\n            actionType: actionType\r\n        }\r\n    },\r\n    getZoomEndEventArg: function(previousRange, event, actionType, zoomFactor, shift) {\r\n        var newRange = this.visualRange();\r\n        return {\r\n            axis: this,\r\n            previousRange: previousRange,\r\n            range: newRange,\r\n            cancel: false,\r\n            event: event,\r\n            actionType: actionType,\r\n            zoomFactor: zoomFactor,\r\n            shift: shift,\r\n            rangeStart: newRange.startValue,\r\n            rangeEnd: newRange.endValue\r\n        }\r\n    },\r\n    getZoomBounds: function() {\r\n        var wholeRange = _utils2.default.getVizRangeObject(this._options.wholeRange);\r\n        var range = this.getTranslator().getBusinessRange();\r\n        var secondPriorityRange = {\r\n            startValue: getZoomBoundValue(this._initRange.startValue, range.min),\r\n            endValue: getZoomBoundValue(this._initRange.endValue, range.max)\r\n        };\r\n        return {\r\n            startValue: getZoomBoundValue(wholeRange.startValue, secondPriorityRange.startValue),\r\n            endValue: getZoomBoundValue(wholeRange.endValue, secondPriorityRange.endValue)\r\n        }\r\n    },\r\n    setInitRange: function() {\r\n        this._initRange = {};\r\n        if (0 === Object.keys(this._options.wholeRange || {}).length) {\r\n            this._initRange = this.getZoomBounds()\r\n        }\r\n    },\r\n    _resetVisualRangeOption: function() {\r\n        this._options._customVisualRange = {}\r\n    },\r\n    setCustomVisualRange: function(range) {\r\n        this._options._customVisualRange = range\r\n    },\r\n    visualRange: function visualRange() {\r\n        var that = this;\r\n        var args = arguments;\r\n        var visualRange;\r\n        if (0 === args.length) {\r\n            var adjustedRange = that._getAdjustedBusinessRange();\r\n            var startValue = adjustedRange.minVisible;\r\n            var endValue = adjustedRange.maxVisible;\r\n            if (that._options.type === _axes_constants2.default.discrete) {\r\n                startValue = (0, _type.isDefined)(startValue) ? startValue : adjustedRange.categories[0];\r\n                endValue = (0, _type.isDefined)(endValue) ? endValue : adjustedRange.categories[adjustedRange.categories.length - 1];\r\n                return {\r\n                    startValue: startValue,\r\n                    endValue: endValue,\r\n                    categories: _utils2.default.getCategoriesInfo(adjustedRange.categories, startValue, endValue).categories\r\n                }\r\n            }\r\n            return {\r\n                startValue: startValue,\r\n                endValue: endValue\r\n            }\r\n        } else {\r\n            if (_isArray(args[0])) {\r\n                visualRange = args[0]\r\n            } else {\r\n                if ((0, _type.isPlainObject)(args[0])) {\r\n                    visualRange = (0, _extend.extend)({}, args[0])\r\n                } else {\r\n                    visualRange = [args[0], args[1]]\r\n                }\r\n            }\r\n        }\r\n        var zoomResults = that.handleZooming(visualRange, args[1]);\r\n        if (!zoomResults.isPrevented) {\r\n            that._visualRange(that, zoomResults)\r\n        }\r\n    },\r\n    handleZooming: function(visualRange, preventEvents, domEvent, action) {\r\n        var that = this;\r\n        preventEvents = preventEvents || {};\r\n        if ((0, _type.isDefined)(visualRange)) {\r\n            visualRange = that._validateVisualRange(visualRange);\r\n            visualRange.action = action\r\n        }\r\n        var zoomStartEvent = that.getZoomStartEventArg(domEvent, action);\r\n        var previousRange = zoomStartEvent.range;\r\n        !preventEvents.start && that._eventTrigger(\"zoomStart\", zoomStartEvent);\r\n        var zoomResults = {\r\n            isPrevented: zoomStartEvent.cancel,\r\n            skipEventRising: preventEvents.skipEventRising,\r\n            range: visualRange || zoomStartEvent.range\r\n        };\r\n        if (!zoomStartEvent.cancel) {\r\n            (0, _type.isDefined)(visualRange) && that._applyZooming(visualRange, preventEvents.allowPartialUpdate);\r\n            if (!(0, _type.isDefined)(that._storedZoomEndParams)) {\r\n                that._storedZoomEndParams = {\r\n                    startRange: previousRange,\r\n                    type: this.getOptions().type\r\n                }\r\n            }\r\n            that._storedZoomEndParams.event = domEvent;\r\n            that._storedZoomEndParams.action = action;\r\n            that._storedZoomEndParams.prevent = !!preventEvents.end\r\n        }\r\n        return zoomResults\r\n    },\r\n    handleZoomEnd: function() {\r\n        var that = this;\r\n        if ((0, _type.isDefined)(that._storedZoomEndParams) && !that._storedZoomEndParams.prevent) {\r\n            var previousRange = that._storedZoomEndParams.startRange;\r\n            var domEvent = that._storedZoomEndParams.event;\r\n            var action = that._storedZoomEndParams.action;\r\n            var previousBusinessRange = {\r\n                minVisible: previousRange.startValue,\r\n                maxVisible: previousRange.endValue,\r\n                categories: previousRange.categories\r\n            };\r\n            var typeIsNotChanged = that.getOptions().type === that._storedZoomEndParams.type;\r\n            var shift = typeIsNotChanged ? (0, _math2.adjust)(that.getVisualRangeCenter() - that.getVisualRangeCenter(previousBusinessRange)) : NaN;\r\n            var zoomFactor = typeIsNotChanged ? +(Math.round(that.getVisualRangeLength(previousBusinessRange) / that.getVisualRangeLength() + \"e+2\") + \"e-2\") : NaN;\r\n            var zoomEndEvent = that.getZoomEndEventArg(previousRange, domEvent, action, zoomFactor, shift);\r\n            zoomEndEvent.cancel = that.isZoomingLowerLimitOvercome(1 === zoomFactor ? \"pan\" : \"zoom\", zoomFactor);\r\n            that._eventTrigger(\"zoomEnd\", zoomEndEvent);\r\n            if (zoomEndEvent.cancel) {\r\n                that.restorePreviousVisualRange(previousRange)\r\n            }\r\n            that._storedZoomEndParams = null\r\n        }\r\n    },\r\n    restorePreviousVisualRange: function(previousRange) {\r\n        var that = this;\r\n        that._storedZoomEndParams = null;\r\n        that._applyZooming(previousRange);\r\n        that._visualRange(that, previousRange)\r\n    },\r\n    isZoomingLowerLimitOvercome: function(actionType, zoomFactor, range) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var minZoom = options.minVisualRangeLength;\r\n        var isOvercoming = \"zoom\" === actionType && zoomFactor >= 1;\r\n        var businessRange = that._translator.getBusinessRange();\r\n        var visualRange;\r\n        if ((0, _type.isDefined)(range)) {\r\n            visualRange = that.adjustRange(_utils2.default.getVizRangeObject(range));\r\n            visualRange = {\r\n                minVisible: visualRange.startValue,\r\n                maxVisible: visualRange.endValue,\r\n                categories: businessRange.categories\r\n            }\r\n        }\r\n        var visualRangeLength = that.getVisualRangeLength(visualRange);\r\n        if (\"discrete\" !== options.type) {\r\n            if ((0, _type.isDefined)(minZoom)) {\r\n                if (\"datetime\" === options.dataType && !(0, _type.isNumeric)(minZoom)) {\r\n                    minZoom = (0, _date.dateToMilliseconds)(minZoom)\r\n                }\r\n                isOvercoming &= minZoom >= visualRangeLength\r\n            } else {\r\n                var canvasLength = that._translator.canvasLength;\r\n                var fullRange = {\r\n                    minVisible: businessRange.min,\r\n                    maxVisible: businessRange.max,\r\n                    categories: businessRange.categories\r\n                };\r\n                isOvercoming &= that.getVisualRangeLength(fullRange) / canvasLength >= visualRangeLength\r\n            }\r\n        } else {\r\n            !(0, _type.isDefined)(minZoom) && (minZoom = 1);\r\n            isOvercoming &= (0, _type.isDefined)(range) && that.getVisualRangeLength() === minZoom && visualRangeLength <= minZoom\r\n        }\r\n        return !!isOvercoming\r\n    },\r\n    dataVisualRangeIsReduced: function() {\r\n        var minDataValue;\r\n        var maxDataValue;\r\n        var translator = this.getTranslator();\r\n        if (\"discrete\" === this._options.type) {\r\n            var categories = translator.getBusinessRange().categories;\r\n            minDataValue = categories[0];\r\n            maxDataValue = categories[categories.length - 1]\r\n        } else {\r\n            var seriesData = this._seriesData;\r\n            minDataValue = seriesData.min;\r\n            maxDataValue = seriesData.max\r\n        }\r\n        if (!(0, _type.isDefined)(minDataValue) || !(0, _type.isDefined)(maxDataValue)) {\r\n            return false\r\n        }\r\n        var startPoint = translator.translate(minDataValue);\r\n        var endPoint = translator.translate(maxDataValue);\r\n        var edges = [Math.min(startPoint, endPoint), Math.max(startPoint, endPoint)];\r\n        var visualRange = this.visualRange();\r\n        var visualRangeStartPoint = translator.translate(visualRange.startValue);\r\n        var visualRangeEndPoint = translator.translate(visualRange.endValue);\r\n        return visualRangeStartPoint > edges[0] && visualRangeStartPoint < edges[1] || visualRangeEndPoint > edges[0] && visualRangeEndPoint < edges[1] || visualRangeStartPoint === visualRangeEndPoint && edges[0] !== edges[1]\r\n    },\r\n    isExtremePosition: function(isMax) {\r\n        var extremeDataValue;\r\n        var seriesData;\r\n        if (\"discrete\" === this._options.type) {\r\n            seriesData = this._translator.getBusinessRange();\r\n            extremeDataValue = isMax ? seriesData.categories[seriesData.categories.length - 1] : seriesData.categories[0]\r\n        } else {\r\n            seriesData = this.getZoomBounds();\r\n            extremeDataValue = isMax ? seriesData.endValue : seriesData.startValue\r\n        }\r\n        var translator = this.getTranslator();\r\n        var extremePoint = translator.translate(extremeDataValue);\r\n        var visualRange = this.visualRange();\r\n        var visualRangePoint = isMax ? translator.translate(visualRange.endValue) : translator.translate(visualRange.startValue);\r\n        return _abs(visualRangePoint - extremePoint) < SCROLL_THRESHOLD\r\n    },\r\n    getViewport: function() {\r\n        return this._viewport\r\n    },\r\n    getFullTicks: function() {\r\n        var majors = this._majorTicks || [];\r\n        if (this._options.type === _axes_constants2.default.discrete) {\r\n            return convertTicksToValues(majors)\r\n        } else {\r\n            return convertTicksToValues(majors.concat(this._minorTicks, this._boundaryTicks)).sort(function(a, b) {\r\n                return valueOf(a) - valueOf(b)\r\n            })\r\n        }\r\n    },\r\n    measureLabels: function(canvas, withIndents) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var widthAxis = options.visible ? options.width : 0;\r\n        var ticks;\r\n        var maxText;\r\n        var text;\r\n        var box;\r\n        var indent = withIndents ? options.label.indentFromAxis + .5 * options.tick.length : 0;\r\n        var tickInterval;\r\n        var viewportRange = that._getViewportRange();\r\n        if (viewportRange.isEmpty() || !options.label.visible || !that._axisElementsGroup) {\r\n            return {\r\n                height: widthAxis,\r\n                width: widthAxis,\r\n                x: 0,\r\n                y: 0\r\n            }\r\n        }\r\n        if (that._majorTicks) {\r\n            ticks = convertTicksToValues(that._majorTicks)\r\n        } else {\r\n            this.updateCanvas(canvas);\r\n            ticks = that._createTicksAndLabelFormat(viewportRange, _common.noop);\r\n            tickInterval = ticks.tickInterval;\r\n            ticks = ticks.ticks\r\n        }\r\n        maxText = ticks.reduce(function(prevLabel, tick, index) {\r\n            var label = that.formatLabel(tick, options.label, viewportRange, void 0, tickInterval, ticks);\r\n            if (prevLabel.length < label.length) {\r\n                return label\r\n            } else {\r\n                return prevLabel\r\n            }\r\n        }, that.formatLabel(ticks[0], options.label, viewportRange, void 0, tickInterval, ticks));\r\n        text = that._renderer.text(maxText, 0, 0).css(that._textFontStyles).attr(that._textOptions).append(that._renderer.root);\r\n        box = text.getBBox();\r\n        text.remove();\r\n        return {\r\n            x: box.x,\r\n            y: box.y,\r\n            width: box.width + indent,\r\n            height: box.height + indent\r\n        }\r\n    },\r\n    _setLabelsPlacement: function() {\r\n        if (!this._options.label.visible) {\r\n            return\r\n        }\r\n        var that = this;\r\n        var labelOpt = that._options.label;\r\n        var displayMode = that._validateDisplayMode(labelOpt.displayMode);\r\n        var overlappingMode = that._validateOverlappingMode(labelOpt.overlappingBehavior, displayMode);\r\n        var ignoreOverlapping = \"none\" === overlappingMode || \"ignore\" === overlappingMode;\r\n        var behavior = {\r\n            rotationAngle: labelOpt.rotationAngle,\r\n            staggeringSpacing: labelOpt.staggeringSpacing\r\n        };\r\n        var notRecastStep;\r\n        var boxes = that._majorTicks.map(function(tick) {\r\n            return tick.labelBBox\r\n        });\r\n        var step;\r\n        step = that._getStep(boxes);\r\n        switch (displayMode) {\r\n            case ROTATE:\r\n                if (ignoreOverlapping) {\r\n                    notRecastStep = true;\r\n                    step = 1\r\n                }\r\n                that._applyLabelMode(displayMode, step, boxes, labelOpt, notRecastStep);\r\n                break;\r\n            case \"stagger\":\r\n                if (ignoreOverlapping) {\r\n                    step = 2\r\n                }\r\n                that._applyLabelMode(displayMode, _max(step, 2), boxes, labelOpt);\r\n                break;\r\n            default:\r\n                that._applyLabelOverlapping(boxes, overlappingMode, step, behavior)\r\n        }\r\n    },\r\n    _applyLabelOverlapping: function(boxes, mode, step, behavior) {\r\n        var that = this;\r\n        var labelOpt = that._options.label;\r\n        var majorTicks = that._majorTicks;\r\n        if (\"none\" === mode || \"ignore\" === mode) {\r\n            return\r\n        }\r\n        var checkLabels = function(box, index, array) {\r\n            if (0 === index) {\r\n                return false\r\n            }\r\n            return _axes_constants2.default.areLabelsOverlap(box, array[index - 1], labelOpt.minSpacing, labelOpt.alignment)\r\n        };\r\n        if (step > 1 && boxes.some(checkLabels)) {\r\n            that._applyLabelMode(mode, step, boxes, behavior)\r\n        }\r\n        that._checkBoundedLabelsOverlapping(majorTicks, boxes, mode)\r\n    },\r\n    _applyLabelMode: function(mode, step, boxes, behavior, notRecastStep) {\r\n        var that = this;\r\n        var majorTicks = that._majorTicks;\r\n        var labelOpt = that._options.label;\r\n        var angle = behavior.rotationAngle;\r\n        var labelHeight;\r\n        var alignment;\r\n        var func;\r\n        switch (mode) {\r\n            case ROTATE:\r\n                if (!labelOpt.userAlignment) {\r\n                    alignment = angle < 0 ? RIGHT : LEFT;\r\n                    if (angle % 90 === 0) {\r\n                        alignment = CENTER\r\n                    }\r\n                }\r\n                step = notRecastStep ? step : that._getStep(boxes, angle);\r\n                func = function(tick) {\r\n                    tick.label.rotate(angle);\r\n                    tick.labelRotationAngle = angle;\r\n                    alignment && (tick.labelAlignment = alignment)\r\n                };\r\n                updateLabels(majorTicks, step, func);\r\n                break;\r\n            case \"stagger\":\r\n                labelHeight = that._getMaxLabelHeight(boxes, behavior.staggeringSpacing);\r\n                func = function(tick, index) {\r\n                    if (index / (step - 1) % 2 !== 0) {\r\n                        tick.labelOffset = labelHeight\r\n                    }\r\n                };\r\n                updateLabels(majorTicks, step - 1, func);\r\n                break;\r\n            case \"auto\":\r\n            case \"_auto\":\r\n                if (2 === step) {\r\n                    that._applyLabelMode(\"stagger\", step, boxes, behavior)\r\n                } else {\r\n                    that._applyLabelMode(ROTATE, step, boxes, {\r\n                        rotationAngle: getOptimalAngle(boxes, labelOpt)\r\n                    })\r\n                }\r\n                break;\r\n            default:\r\n                updateLabels(majorTicks, step)\r\n        }\r\n    },\r\n    getMarkerTrackers: _common.noop,\r\n    _drawDateMarkers: _common.noop,\r\n    _adjustDateMarkers: _common.noop,\r\n    coordsIn: _common.noop,\r\n    areCoordsOutsideAxis: _common.noop,\r\n    _getSkippedCategory: _common.noop,\r\n    _initAxisPositions: _common.noop,\r\n    _drawTitle: _common.noop,\r\n    _updateTitleCoords: _common.noop,\r\n    _adjustConstantLineLabels: _common.noop,\r\n    _createTranslator: function() {\r\n        return new _translator2d2.default.Translator2D({}, {}, {})\r\n    },\r\n    _updateTranslator: function() {\r\n        var translator = this._translator;\r\n        translator.update(translator.getBusinessRange(), this._canvas || {}, this._getTranslatorOptions())\r\n    },\r\n    _getTranslatorOptions: function() {\r\n        var options = this._options;\r\n        return {\r\n            isHorizontal: this._isHorizontal,\r\n            shiftZeroValue: !this.isArgumentAxis,\r\n            interval: options.semiDiscreteInterval,\r\n            stick: this._getStick(),\r\n            breaksSize: options.breakStyle ? options.breakStyle.width : 0\r\n        }\r\n    },\r\n    getVisibleArea: function() {\r\n        var canvas = this._getCanvasStartEnd();\r\n        return [canvas.start, canvas.end].sort(function(a, b) {\r\n            return a - b\r\n        })\r\n    },\r\n    _getCanvasStartEnd: function() {\r\n        var isHorizontal = this._isHorizontal;\r\n        var canvas = this._canvas || {};\r\n        var invert = this._translator.getBusinessRange().invert;\r\n        var coords = isHorizontal ? [canvas.left, canvas.width - canvas.right] : [canvas.height - canvas.bottom, canvas.top];\r\n        invert && coords.reverse();\r\n        return {\r\n            start: coords[0],\r\n            end: coords[1]\r\n        }\r\n    },\r\n    _getScreenDelta: function() {\r\n        var that = this;\r\n        var canvas = that._getCanvasStartEnd();\r\n        var breaks = that._breaks;\r\n        var breaksLength = breaks ? breaks.length : 0;\r\n        var screenDelta = _abs(canvas.start - canvas.end);\r\n        return screenDelta - (breaksLength ? breaks[breaksLength - 1].cumulativeWidth : 0)\r\n    },\r\n    _getScaleBreaks: function() {\r\n        return []\r\n    },\r\n    _adjustTitle: _common.noop,\r\n    _checkTitleOverflow: _common.noop,\r\n    getSpiderTicks: _common.noop,\r\n    setSpiderTicks: _common.noop,\r\n    _checkBoundedLabelsOverlapping: _common.noop,\r\n    drawScaleBreaks: _common.noop,\r\n    _visualRange: _common.noop,\r\n    _rotateConstantLine: _common.noop,\r\n    applyVisualRangeSetter: function(visualRangeSetter) {\r\n        this._visualRange = visualRangeSetter\r\n    },\r\n    getCategoriesSorter: function(argCategories) {\r\n        var sort;\r\n        if (this.isArgumentAxis) {\r\n            sort = argCategories\r\n        } else {\r\n            var categoriesSortingMethod = this._options.categoriesSortingMethod;\r\n            sort = (0, _type.isDefined)(categoriesSortingMethod) ? categoriesSortingMethod : this._options.categories\r\n        }\r\n        return sort\r\n    },\r\n    _getAdjustedBusinessRange: function() {\r\n        return this.adjustViewport(this._translator.getBusinessRange())\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}