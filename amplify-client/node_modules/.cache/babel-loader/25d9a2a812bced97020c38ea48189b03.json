{"ast":null,"code":"import _inherits from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _classCallCheck from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Subscriber } from '../Subscriber';\nexport function scan(accumulator, seed) {\n  var hasSeed = false;\n\n  if (arguments.length >= 2) {\n    hasSeed = true;\n  }\n\n  return function scanOperatorFunction(source) {\n    return source.lift(new ScanOperator(accumulator, seed, hasSeed));\n  };\n}\n\nvar ScanOperator = /*#__PURE__*/function () {\n  function ScanOperator(accumulator, seed) {\n    var hasSeed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    _classCallCheck(this, ScanOperator);\n\n    this.accumulator = accumulator;\n    this.seed = seed;\n    this.hasSeed = hasSeed;\n  }\n\n  _createClass(ScanOperator, [{\n    key: \"call\",\n    value: function call(subscriber, source) {\n      return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\n    }\n  }]);\n\n  return ScanOperator;\n}();\n\nvar ScanSubscriber = /*#__PURE__*/function (_Subscriber) {\n  _inherits(ScanSubscriber, _Subscriber);\n\n  var _super = _createSuper(ScanSubscriber);\n\n  function ScanSubscriber(destination, accumulator, _seed, hasSeed) {\n    var _this;\n\n    _classCallCheck(this, ScanSubscriber);\n\n    _this = _super.call(this, destination);\n    _this.accumulator = accumulator;\n    _this._seed = _seed;\n    _this.hasSeed = hasSeed;\n    _this.index = 0;\n    return _this;\n  }\n\n  _createClass(ScanSubscriber, [{\n    key: \"_next\",\n    value: function _next(value) {\n      if (!this.hasSeed) {\n        this.seed = value;\n        this.destination.next(value);\n      } else {\n        return this._tryNext(value);\n      }\n    }\n  }, {\n    key: \"_tryNext\",\n    value: function _tryNext(value) {\n      var index = this.index++;\n      var result;\n\n      try {\n        result = this.accumulator(this.seed, value, index);\n      } catch (err) {\n        this.destination.error(err);\n      }\n\n      this.seed = result;\n      this.destination.next(result);\n    }\n  }, {\n    key: \"seed\",\n    get: function get() {\n      return this._seed;\n    },\n    set: function set(value) {\n      this.hasSeed = true;\n      this._seed = value;\n    }\n  }]);\n\n  return ScanSubscriber;\n}(Subscriber);","map":{"version":3,"sources":["../../../src/internal/operators/scan.ts"],"names":[],"mappings":";;;;AAEA,SAAA,UAAA,QAAA,eAAA;AAoDA,OAAM,SAAA,IAAA,CAAA,WAAA,EAAA,IAAA,EAAsF;AAC1F,MAAI,OAAO,GAAX,KAAA;;AAMA,MAAI,SAAS,CAAT,MAAA,IAAJ,CAAA,EAA2B;AACzB,IAAA,OAAO,GAAP,IAAA;AACD;;AAED,SAAO,SAAA,oBAAA,CAAA,MAAA,EAAmD;AACxD,WAAO,MAAM,CAAN,IAAA,CAAY,IAAA,YAAA,CAAA,WAAA,EAAA,IAAA,EAAnB,OAAmB,CAAZ,CAAP;AADF,GAAA;AAGD;;IAEK,Y;AACJ,WAAA,YAAA,CAAA,WAAA,EAAA,IAAA,EAA+H;AAAA,QAAxB,OAAwB,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAL,KAAK;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,YAAA,CAAA;;AAA3G,SAAA,WAAA,GAAA,WAAA;AAA6D,SAAA,IAAA,GAAA,IAAA;AAAsB,SAAA,OAAA,GAAA,OAAA;AAA4B;;;;yBAE9H,U,EAA2B,M,EAAW;AACzC,aAAO,MAAM,CAAN,SAAA,CAAiB,IAAA,cAAA,CAAA,UAAA,EAA+B,KAA/B,WAAA,EAAiD,KAAjD,IAAA,EAA4D,KAApF,OAAwB,CAAjB,CAAP;AACD;;;;;;IAQG,c;;;;;AAYJ,WAAA,cAAA,CAAA,WAAA,EAAA,WAAA,EAAA,KAAA,EAAA,OAAA,EACoC;AAAA,QAAA,KAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,cAAA,CAAA;;AAClC,IAAA,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,WAAA,CAAA;AAF8C,IAAA,KAAA,CAAA,WAAA,GAAA,WAAA;AAA6D,IAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACzF,IAAA,KAAA,CAAA,OAAA,GAAA,OAAA;AAZZ,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA;AAY4B,WAAA,KAAA;AAEnC;;;;0BAEe,K,EAAQ;AACtB,UAAI,CAAC,KAAL,OAAA,EAAmB;AACjB,aAAA,IAAA,GAAA,KAAA;AACA,aAAA,WAAA,CAAA,IAAA,CAAA,KAAA;AAFF,OAAA,MAGO;AACL,eAAO,KAAA,QAAA,CAAP,KAAO,CAAP;AACD;AACF;;;6BAEgB,K,EAAQ;AACvB,UAAM,KAAK,GAAG,KAAd,KAAc,EAAd;AACA,UAAA,MAAA;;AACA,UAAI;AACF,QAAA,MAAM,GAAG,KAAA,WAAA,CAAoB,KAApB,IAAA,EAAA,KAAA,EAAT,KAAS,CAAT;AADF,OAAA,CAEE,OAAA,GAAA,EAAY;AACZ,aAAA,WAAA,CAAA,KAAA,CAAA,GAAA;AACD;;AACD,WAAA,IAAA,GAAA,MAAA;AACA,WAAA,WAAA,CAAA,IAAA,CAAA,MAAA;AACD;;;wBAjCO;AACN,aAAO,KAAP,KAAA;;sBAGO,K,EAAY;AACnB,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,KAAA,GAAA,KAAA;AACD;;;;EAVgC,U","sourcesContent":["import { Subscriber } from '../Subscriber';\r\nexport function scan(accumulator, seed) {\r\n    let hasSeed = false;\r\n    if (arguments.length >= 2) {\r\n        hasSeed = true;\r\n    }\r\n    return function scanOperatorFunction(source) {\r\n        return source.lift(new ScanOperator(accumulator, seed, hasSeed));\r\n    };\r\n}\r\nclass ScanOperator {\r\n    constructor(accumulator, seed, hasSeed = false) {\r\n        this.accumulator = accumulator;\r\n        this.seed = seed;\r\n        this.hasSeed = hasSeed;\r\n    }\r\n    call(subscriber, source) {\r\n        return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\r\n    }\r\n}\r\nclass ScanSubscriber extends Subscriber {\r\n    constructor(destination, accumulator, _seed, hasSeed) {\r\n        super(destination);\r\n        this.accumulator = accumulator;\r\n        this._seed = _seed;\r\n        this.hasSeed = hasSeed;\r\n        this.index = 0;\r\n    }\r\n    get seed() {\r\n        return this._seed;\r\n    }\r\n    set seed(value) {\r\n        this.hasSeed = true;\r\n        this._seed = value;\r\n    }\r\n    _next(value) {\r\n        if (!this.hasSeed) {\r\n            this.seed = value;\r\n            this.destination.next(value);\r\n        }\r\n        else {\r\n            return this._tryNext(value);\r\n        }\r\n    }\r\n    _tryNext(value) {\r\n        const index = this.index++;\r\n        let result;\r\n        try {\r\n            result = this.accumulator(this.seed, value, index);\r\n        }\r\n        catch (err) {\r\n            this.destination.error(err);\r\n        }\r\n        this.seed = result;\r\n        this.destination.next(result);\r\n    }\r\n}\r\n//# sourceMappingURL=scan.js.map"]},"metadata":{},"sourceType":"module"}