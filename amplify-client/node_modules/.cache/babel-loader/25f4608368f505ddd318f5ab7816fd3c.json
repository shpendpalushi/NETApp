{"ast":null,"code":"/**\r\n * DevExtreme (ui/html_editor/modules/toolbar.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _quill_importer = require(\"../quill_importer\");\n\nvar _renderer = require(\"../../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _toolbar = require(\"../../toolbar\");\n\nvar _toolbar2 = _interopRequireDefault(_toolbar);\n\nrequire(\"../../select_box\");\n\nrequire(\"../../color_box/color_view\");\n\nvar _widget_collector = require(\"./widget_collector\");\n\nvar _widget_collector2 = _interopRequireDefault(_widget_collector);\n\nvar _iterator = require(\"../../../core/utils/iterator\");\n\nvar _type = require(\"../../../core/utils/type\");\n\nvar _extend = require(\"../../../core/utils/extend\");\n\nvar _message = require(\"../../../localization/message\");\n\nvar _inflector = require(\"../../../core/utils/inflector\");\n\nvar _events_engine = require(\"../../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../../events/utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar BaseModule = (0, _quill_importer.getQuill)().import(\"core/module\");\nvar TOOLBAR_WRAPPER_CLASS = \"dx-htmleditor-toolbar-wrapper\";\nvar TOOLBAR_CLASS = \"dx-htmleditor-toolbar\";\nvar TOOLBAR_FORMAT_WIDGET_CLASS = \"dx-htmleditor-toolbar-format\";\nvar TOOLBAR_SEPARATOR_CLASS = \"dx-htmleditor-toolbar-separator\";\nvar TOOLBAR_MENU_SEPARATOR_CLASS = \"dx-htmleditor-toolbar-menu-separator\";\nvar ACTIVE_FORMAT_CLASS = \"dx-format-active\";\nvar BOX_ITEM_CONTENT_CLASS = \"dx-box-item-content\";\nvar ICON_CLASS = \"dx-icon\";\nvar SELECTION_CHANGE_EVENT = \"selection-change\";\nvar DIALOG_COLOR_CAPTION = \"dxHtmlEditor-dialogColorCaption\";\nvar DIALOG_BACKGROUND_CAPTION = \"dxHtmlEditor-dialogBackgroundCaption\";\nvar DIALOG_LINK_CAPTION = \"dxHtmlEditor-dialogLinkCaption\";\nvar DIALOG_LINK_FIELD_URL = \"dxHtmlEditor-dialogLinkUrlField\";\nvar DIALOG_LINK_FIELD_TEXT = \"dxHtmlEditor-dialogLinkTextField\";\nvar DIALOG_LINK_FIELD_TARGET = \"dxHtmlEditor-dialogLinkTargetField\";\nvar DIALOG_LINK_FIELD_TARGET_CLASS = \"dx-formdialog-field-target\";\nvar DIALOG_IMAGE_CAPTION = \"dxHtmlEditor-dialogImageCaption\";\nvar DIALOG_IMAGE_FIELD_URL = \"dxHtmlEditor-dialogImageUrlField\";\nvar DIALOG_IMAGE_FIELD_ALT = \"dxHtmlEditor-dialogImageAltField\";\nvar DIALOG_IMAGE_FIELD_WIDTH = \"dxHtmlEditor-dialogImageWidthField\";\nvar DIALOG_IMAGE_FIELD_HEIGHT = \"dxHtmlEditor-dialogImageHeightField\";\nvar USER_ACTION = \"user\";\nvar SILENT_ACTION = \"silent\";\nvar HEADING_TEXT = (0, _message.format)(\"dxHtmlEditor-heading\");\nvar NORMAL_TEXT = (0, _message.format)(\"dxHtmlEditor-normalText\");\n\nvar ToolbarModule = function (_BaseModule) {\n  _inherits(ToolbarModule, _BaseModule);\n\n  function ToolbarModule(quill, options) {\n    var _this;\n\n    _classCallCheck(this, ToolbarModule);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ToolbarModule).call(this, quill, options));\n    _this._editorInstance = options.editorInstance;\n    _this._toolbarWidgets = new _widget_collector2.default();\n    _this._formatHandlers = _this._getFormatHandlers();\n\n    if ((0, _type.isDefined)(options.items)) {\n      _this._addCallbacks();\n\n      _this._renderToolbar();\n\n      _this.quill.on(\"editor-change\", function (eventName) {\n        var isSelectionChanged = eventName === SELECTION_CHANGE_EVENT;\n\n        _this._updateToolbar(isSelectionChanged);\n      });\n    }\n\n    return _this;\n  }\n\n  _createClass(ToolbarModule, [{\n    key: \"_addCallbacks\",\n    value: function value() {\n      this._editorInstance.addCleanCallback(this.clean.bind(this));\n\n      this._editorInstance.addContentInitializedCallback(this.updateHistoryWidgets.bind(this));\n    }\n  }, {\n    key: \"_updateToolbar\",\n    value: function value(isSelectionChanged) {\n      this.updateFormatWidgets(isSelectionChanged);\n      this.updateHistoryWidgets();\n    }\n  }, {\n    key: \"_getDefaultClickHandler\",\n    value: function value(formatName) {\n      var _this2 = this;\n\n      return function (e) {\n        var formats = _this2.quill.getFormat();\n\n        var value = formats[formatName];\n        var newValue = !((0, _type.isBoolean)(value) ? value : (0, _type.isDefined)(value));\n\n        _this2.quill.format(formatName, newValue, USER_ACTION);\n\n        _this2._updateFormatWidget(formatName, newValue, formats);\n      };\n    }\n  }, {\n    key: \"_updateFormatWidget\",\n    value: function value(formatName, isApplied, formats) {\n      var widget = this._toolbarWidgets.getByName(formatName);\n\n      if (!widget) {\n        return;\n      }\n\n      if (isApplied) {\n        this._markActiveFormatWidget(formatName, widget, formats);\n      } else {\n        this._resetFormatWidget(formatName, widget);\n\n        if (Object.prototype.hasOwnProperty.call(formatName)) {\n          delete formats[formatName];\n        }\n      }\n\n      this._toggleClearFormatting(isApplied || !(0, _type.isEmptyObject)(formats));\n    }\n  }, {\n    key: \"_getFormatHandlers\",\n    value: function value() {\n      var _this3 = this;\n\n      return {\n        clear: function clear(e) {\n          var range = _this3.quill.getSelection();\n\n          if (range) {\n            _this3.quill.removeFormat(range);\n\n            _this3.updateFormatWidgets();\n          }\n        },\n        link: this._prepareLinkHandler(),\n        image: this._prepareImageHandler(),\n        color: this._prepareColorClickHandler(\"color\"),\n        background: this._prepareColorClickHandler(\"background\"),\n        orderedList: this._prepareShortcutHandler(\"list\", \"ordered\"),\n        bulletList: this._prepareShortcutHandler(\"list\", \"bullet\"),\n        alignLeft: this._prepareShortcutHandler(\"align\", \"left\"),\n        alignCenter: this._prepareShortcutHandler(\"align\", \"center\"),\n        alignRight: this._prepareShortcutHandler(\"align\", \"right\"),\n        alignJustify: this._prepareShortcutHandler(\"align\", \"justify\"),\n        codeBlock: this._getDefaultClickHandler(\"code-block\"),\n        undo: function undo() {\n          _this3.quill.history.undo();\n        },\n        redo: function redo() {\n          _this3.quill.history.redo();\n        },\n        increaseIndent: function increaseIndent() {\n          _this3.quill.format(\"indent\", \"+1\", USER_ACTION);\n        },\n        decreaseIndent: function decreaseIndent() {\n          _this3.quill.format(\"indent\", \"-1\", USER_ACTION);\n        },\n        superscript: this._prepareShortcutHandler(\"script\", \"super\"),\n        subscript: this._prepareShortcutHandler(\"script\", \"sub\")\n      };\n    }\n  }, {\n    key: \"_prepareShortcutHandler\",\n    value: function value(formatName, shortcutValue) {\n      var _this4 = this;\n\n      return function () {\n        var formats = _this4.quill.getFormat();\n\n        var value = formats[formatName] === shortcutValue ? false : shortcutValue;\n\n        _this4.quill.format(formatName, value, USER_ACTION);\n\n        _this4.updateFormatWidgets(true);\n      };\n    }\n  }, {\n    key: \"_prepareLinkHandler\",\n    value: function value() {\n      var _this5 = this;\n\n      return function () {\n        _this5.quill.focus();\n\n        var selection = _this5.quill.getSelection();\n\n        var hasEmbedContent = _this5._hasEmbedContent(selection);\n\n        var formats = selection ? _this5.quill.getFormat() : {};\n        var formData = {\n          href: formats.link || \"\",\n          text: selection && !hasEmbedContent ? _this5.quill.getText(selection) : \"\",\n          target: Object.prototype.hasOwnProperty.call(formats, \"target\") ? !!formats.target : true\n        };\n\n        _this5._editorInstance.formDialogOption(\"title\", (0, _message.format)(DIALOG_LINK_CAPTION));\n\n        var promise = _this5._editorInstance.showFormDialog({\n          formData: formData,\n          items: _this5._getLinkFormItems(selection)\n        });\n\n        promise.done(function (formData) {\n          if (selection && !hasEmbedContent) {\n            var text = formData.text || formData.href;\n            var index = selection.index,\n                length = selection.length;\n            formData.text = void 0;\n            length && _this5.quill.deleteText(index, length, SILENT_ACTION);\n\n            _this5.quill.insertText(index, text, \"link\", formData, USER_ACTION);\n\n            _this5.quill.setSelection(index + text.length, 0, USER_ACTION);\n          } else {\n            formData.text = !selection && !formData.text ? formData.href : formData.text;\n\n            _this5.quill.format(\"link\", formData, USER_ACTION);\n          }\n        });\n        promise.fail(function () {\n          _this5.quill.focus();\n        });\n      };\n    }\n  }, {\n    key: \"_hasEmbedContent\",\n    value: function value(selection) {\n      return !!selection && this.quill.getText(selection).trim().length < selection.length;\n    }\n  }, {\n    key: \"_getLinkFormItems\",\n    value: function value(selection) {\n      return [{\n        dataField: \"href\",\n        label: {\n          text: (0, _message.format)(DIALOG_LINK_FIELD_URL)\n        }\n      }, {\n        dataField: \"text\",\n        label: {\n          text: (0, _message.format)(DIALOG_LINK_FIELD_TEXT)\n        },\n        visible: !this._hasEmbedContent(selection)\n      }, {\n        dataField: \"target\",\n        editorType: \"dxCheckBox\",\n        editorOptions: {\n          text: (0, _message.format)(DIALOG_LINK_FIELD_TARGET)\n        },\n        cssClass: DIALOG_LINK_FIELD_TARGET_CLASS,\n        label: {\n          visible: false\n        }\n      }];\n    }\n  }, {\n    key: \"_prepareImageHandler\",\n    value: function value() {\n      var _this6 = this;\n\n      return function () {\n        var formData = _this6.quill.getFormat();\n\n        var isUpdateDialog = Object.prototype.hasOwnProperty.call(formData, \"imageSrc\");\n        var defaultIndex = _this6._defaultPasteIndex;\n\n        if (isUpdateDialog) {\n          var _this6$quill$getForma = _this6.quill.getFormat(defaultIndex - 1, 1),\n              imageSrc = _this6$quill$getForma.imageSrc;\n\n          formData.src = formData.imageSrc;\n          delete formData.imageSrc;\n\n          if (!imageSrc || 0 === defaultIndex) {\n            _this6.quill.setSelection(defaultIndex + 1, 0, SILENT_ACTION);\n          }\n        }\n\n        var formatIndex = _this6._embedFormatIndex;\n\n        _this6._editorInstance.formDialogOption(\"title\", (0, _message.format)(DIALOG_IMAGE_CAPTION));\n\n        var promise = _this6._editorInstance.showFormDialog({\n          formData: formData,\n          items: _this6._imageFormItems\n        });\n\n        promise.done(function (formData) {\n          var index = defaultIndex;\n\n          if (isUpdateDialog) {\n            index = formatIndex;\n\n            _this6.quill.deleteText(index, 1, SILENT_ACTION);\n          }\n\n          _this6.quill.insertEmbed(index, \"extendedImage\", formData, USER_ACTION);\n\n          _this6.quill.setSelection(index + 1, 0, USER_ACTION);\n        }).always(function () {\n          _this6.quill.focus();\n        });\n      };\n    }\n  }, {\n    key: \"_renderToolbar\",\n    value: function value() {\n      var _this7 = this;\n\n      var container = this.options.container || this._getContainer();\n\n      this._$toolbar = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_CLASS).appendTo(container);\n      this._$toolbarContainer = (0, _renderer2.default)(container).addClass(TOOLBAR_WRAPPER_CLASS);\n\n      _events_engine2.default.on(this._$toolbarContainer, (0, _utils.addNamespace)(\"mousedown\", this._editorInstance.NAME), function (e) {\n        e.preventDefault();\n      });\n\n      this.toolbarInstance = this._editorInstance._createComponent(this._$toolbar, _toolbar2.default, this.toolbarConfig);\n\n      this._editorInstance.on(\"optionChanged\", function (_ref) {\n        var name = _ref.name;\n\n        if (\"readOnly\" === name || \"disabled\" === name) {\n          _this7.toolbarInstance.option(\"disabled\", _this7.isInteractionDisabled);\n        }\n      });\n    }\n  }, {\n    key: \"clean\",\n    value: function value() {\n      this._toolbarWidgets.clear();\n\n      if (this._$toolbarContainer) {\n        this._$toolbarContainer.empty().removeClass(TOOLBAR_WRAPPER_CLASS);\n      }\n    }\n  }, {\n    key: \"repaint\",\n    value: function value() {\n      this.toolbarInstance && this.toolbarInstance.repaint();\n    }\n  }, {\n    key: \"_getContainer\",\n    value: function value() {\n      var $container = (0, _renderer2.default)(\"<div>\");\n\n      this._editorInstance.$element().prepend($container);\n\n      return $container;\n    }\n  }, {\n    key: \"_prepareToolbarItems\",\n    value: function value() {\n      var _this8 = this;\n\n      var resultItems = [];\n      (0, _iterator.each)(this.options.items, function (index, item) {\n        var newItem;\n\n        if ((0, _type.isObject)(item)) {\n          newItem = _this8._handleObjectItem(item);\n        } else {\n          if ((0, _type.isString)(item)) {\n            var buttonItemConfig = _this8._prepareButtonItemConfig(item);\n\n            newItem = _this8._getToolbarItem(buttonItemConfig);\n          }\n        }\n\n        if (newItem) {\n          resultItems.push(newItem);\n        }\n      });\n      return resultItems;\n    }\n  }, {\n    key: \"_handleObjectItem\",\n    value: function value(item) {\n      if (item.formatName && item.formatValues && this._isAcceptableItem(\"dxSelectBox\")) {\n        var selectItemConfig = this._prepareSelectItemConfig(item);\n\n        return this._getToolbarItem(selectItemConfig);\n      } else {\n        if (item.formatName && this._isAcceptableItem(\"dxButton\")) {\n          var defaultButtonItemConfig = this._prepareButtonItemConfig(item.formatName);\n\n          var buttonItemConfig = (0, _extend.extend)(true, defaultButtonItemConfig, item);\n          return this._getToolbarItem(buttonItemConfig);\n        } else {\n          return this._getToolbarItem(item);\n        }\n      }\n    }\n  }, {\n    key: \"_isAcceptableItem\",\n    value: function value(item, acceptableWidgetName) {\n      return !item.widget || item.widget === acceptableWidgetName;\n    }\n  }, {\n    key: \"_prepareButtonItemConfig\",\n    value: function value(formatName) {\n      var iconName = \"clear\" === formatName ? \"clearformat\" : formatName;\n      var buttonText = (0, _inflector.titleize)(formatName);\n      return {\n        widget: \"dxButton\",\n        formatName: formatName,\n        options: {\n          hint: buttonText,\n          text: buttonText,\n          icon: iconName.toLowerCase(),\n          onClick: this._formatHandlers[formatName] || this._getDefaultClickHandler(formatName),\n          stylingMode: \"text\"\n        },\n        showText: \"inMenu\"\n      };\n    }\n  }, {\n    key: \"_prepareSelectItemConfig\",\n    value: function value(item) {\n      var _this9 = this;\n\n      return (0, _extend.extend)(true, {\n        widget: \"dxSelectBox\",\n        formatName: item.formatName,\n        options: {\n          stylingMode: \"filled\",\n          dataSource: item.formatValues,\n          placeholder: (0, _inflector.titleize)(item.formatName),\n          onValueChanged: function onValueChanged(e) {\n            if (!_this9._isReset) {\n              _this9.quill.format(item.formatName, e.value, USER_ACTION);\n\n              _this9._setValueSilent(e.component, e.value);\n            }\n          }\n        }\n      }, item);\n    }\n  }, {\n    key: \"_prepareColorClickHandler\",\n    value: function value(formatName) {\n      var _this10 = this;\n\n      return function () {\n        var formData = _this10.quill.getFormat();\n\n        var caption = \"color\" === formatName ? DIALOG_COLOR_CAPTION : DIALOG_BACKGROUND_CAPTION;\n\n        _this10._editorInstance.formDialogOption(\"title\", (0, _message.format)(caption));\n\n        var promise = _this10._editorInstance.showFormDialog({\n          formData: formData,\n          items: [{\n            dataField: formatName,\n            editorType: \"dxColorView\",\n            editorOptions: {\n              onContentReady: function onContentReady(e) {\n                (0, _renderer2.default)(e.element).closest(\".\".concat(BOX_ITEM_CONTENT_CLASS)).css(\"flexBasis\", \"auto\");\n              },\n              focusStateEnabled: false\n            },\n            label: {\n              visible: false\n            }\n          }]\n        });\n\n        promise.done(function (formData) {\n          _this10.quill.format(formatName, formData[formatName], USER_ACTION);\n        });\n        promise.fail(function () {\n          _this10.quill.focus();\n        });\n      };\n    }\n  }, {\n    key: \"_getToolbarItem\",\n    value: function value(item) {\n      var _this11 = this;\n\n      var baseItem = {\n        options: {\n          onInitialized: function onInitialized(e) {\n            if (item.formatName) {\n              e.component.$element().addClass(TOOLBAR_FORMAT_WIDGET_CLASS);\n              e.component.$element().toggleClass(\"dx-\".concat(item.formatName.toLowerCase(), \"-format\"), !!item.formatName);\n\n              _this11._toolbarWidgets.add(item.formatName, e.component);\n            }\n          }\n        }\n      };\n      return (0, _extend.extend)(true, {\n        location: \"before\",\n        locateInMenu: \"auto\"\n      }, this._getDefaultConfig(item.formatName), item, baseItem);\n    }\n  }, {\n    key: \"_getDefaultItemsConfig\",\n    value: function value() {\n      return {\n        header: {\n          options: {\n            displayExpr: function displayExpr(item) {\n              var isHeaderValue = (0, _type.isDefined)(item) && false !== item;\n              return isHeaderValue ? \"\".concat(HEADING_TEXT, \" \").concat(item) : NORMAL_TEXT;\n            }\n          }\n        },\n        clear: {\n          options: {\n            disabled: true\n          }\n        },\n        undo: {\n          options: {\n            disabled: true\n          }\n        },\n        redo: {\n          options: {\n            disabled: true\n          }\n        },\n        separator: {\n          template: function template(data, index, element) {\n            (0, _renderer2.default)(element).addClass(TOOLBAR_SEPARATOR_CLASS);\n          },\n          menuItemTemplate: function menuItemTemplate(data, index, element) {\n            (0, _renderer2.default)(element).addClass(TOOLBAR_MENU_SEPARATOR_CLASS);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"_getDefaultConfig\",\n    value: function value(formatName) {\n      return this._getDefaultItemsConfig()[formatName];\n    }\n  }, {\n    key: \"updateHistoryWidgets\",\n    value: function value() {\n      var historyModule = this.quill.history;\n\n      if (!historyModule) {\n        return;\n      }\n\n      var undoOps = historyModule.stack.undo;\n      var redoOps = historyModule.stack.redo;\n\n      this._updateHistoryWidget(this._toolbarWidgets.getByName(\"undo\"), undoOps);\n\n      this._updateHistoryWidget(this._toolbarWidgets.getByName(\"redo\"), redoOps);\n    }\n  }, {\n    key: \"_updateHistoryWidget\",\n    value: function value(widget, operations) {\n      if (!widget) {\n        return;\n      }\n\n      widget.option(\"disabled\", !operations.length);\n    }\n  }, {\n    key: \"updateFormatWidgets\",\n    value: function value(isResetRequired) {\n      var selection = this.quill.getSelection();\n\n      if (!selection) {\n        return;\n      }\n\n      var formats = this.quill.getFormat(selection);\n      var hasFormats = !(0, _type.isEmptyObject)(formats);\n\n      if (!hasFormats || isResetRequired) {\n        this._resetFormatWidgets();\n      }\n\n      for (var formatName in formats) {\n        var widgetName = this._getFormatWidgetName(formatName, formats);\n\n        var formatWidget = this._toolbarWidgets.getByName(widgetName) || this._toolbarWidgets.getByName(formatName);\n\n        if (!formatWidget) {\n          continue;\n        }\n\n        this._markActiveFormatWidget(formatName, formatWidget, formats);\n      }\n\n      this._toggleClearFormatting(hasFormats);\n    }\n  }, {\n    key: \"_markActiveFormatWidget\",\n    value: function value(name, widget, formats) {\n      if (this._isColorFormat(name)) {\n        this._updateColorWidget(name, formats[name]);\n      }\n\n      if (\"value\" in widget.option()) {\n        this._setValueSilent(widget, formats[name]);\n      } else {\n        widget.$element().addClass(ACTIVE_FORMAT_CLASS);\n      }\n    }\n  }, {\n    key: \"_toggleClearFormatting\",\n    value: function value(hasFormats) {\n      var clearWidget = this._toolbarWidgets.getByName(\"clear\");\n\n      if (clearWidget) {\n        clearWidget.option(\"disabled\", !hasFormats);\n      }\n    }\n  }, {\n    key: \"_isColorFormat\",\n    value: function value(formatName) {\n      return \"color\" === formatName || \"background\" === formatName;\n    }\n  }, {\n    key: \"_updateColorWidget\",\n    value: function value(formatName, color) {\n      var formatWidget = this._toolbarWidgets.getByName(formatName);\n\n      if (!formatWidget) {\n        return;\n      }\n\n      formatWidget.$element().find(\".\".concat(ICON_CLASS)).css(\"borderBottomColor\", color || \"transparent\");\n    }\n  }, {\n    key: \"_getFormatWidgetName\",\n    value: function value(formatName, formats) {\n      var widgetName;\n\n      switch (formatName) {\n        case \"align\":\n          widgetName = formatName + (0, _inflector.titleize)(formats[formatName]);\n          break;\n\n        case \"list\":\n          widgetName = formats[formatName] + (0, _inflector.titleize)(formatName);\n          break;\n\n        case \"code-block\":\n          widgetName = \"codeBlock\";\n          break;\n\n        case \"script\":\n          widgetName = formats[formatName] + formatName;\n          break;\n\n        case \"imageSrc\":\n          widgetName = \"image\";\n          break;\n\n        default:\n          widgetName = formatName;\n      }\n\n      return widgetName;\n    }\n  }, {\n    key: \"_setValueSilent\",\n    value: function value(widget, _value) {\n      this._isReset = true;\n      widget.option(\"value\", _value);\n      this._isReset = false;\n    }\n  }, {\n    key: \"_resetFormatWidgets\",\n    value: function value() {\n      var _this12 = this;\n\n      this._toolbarWidgets.each(function (name, widget) {\n        _this12._resetFormatWidget(name, widget);\n      });\n    }\n  }, {\n    key: \"_resetFormatWidget\",\n    value: function value(name, widget) {\n      widget.$element().removeClass(ACTIVE_FORMAT_CLASS);\n\n      if (this._isColorFormat(name)) {\n        this._updateColorWidget(name);\n      }\n\n      if (\"clear\" === name) {\n        widget.option(\"disabled\", true);\n      }\n\n      if (\"dxSelectBox\" === widget.NAME) {\n        this._setValueSilent(widget, null);\n      }\n    }\n  }, {\n    key: \"addClickHandler\",\n    value: function value(formatName, handler) {\n      this._formatHandlers[formatName] = handler;\n\n      var formatWidget = this._toolbarWidgets.getByName(formatName);\n\n      if (formatWidget && \"dxButton\" === formatWidget.NAME) {\n        formatWidget.option(\"onClick\", handler);\n      }\n    }\n  }, {\n    key: \"_embedFormatIndex\",\n    get: function get() {\n      var selection = this.quill.getSelection();\n\n      if (selection) {\n        if (selection.length) {\n          return selection.index;\n        } else {\n          return selection.index - 1;\n        }\n      } else {\n        return this.quill.getLength();\n      }\n    }\n  }, {\n    key: \"_defaultPasteIndex\",\n    get: function get() {\n      var selection = this.quill.getSelection();\n      return selection && selection.index || this.quill.getLength();\n    }\n  }, {\n    key: \"_imageFormItems\",\n    get: function get() {\n      return [{\n        dataField: \"src\",\n        label: {\n          text: (0, _message.format)(DIALOG_IMAGE_FIELD_URL)\n        }\n      }, {\n        dataField: \"width\",\n        label: {\n          text: (0, _message.format)(DIALOG_IMAGE_FIELD_WIDTH)\n        }\n      }, {\n        dataField: \"height\",\n        label: {\n          text: (0, _message.format)(DIALOG_IMAGE_FIELD_HEIGHT)\n        }\n      }, {\n        dataField: \"alt\",\n        label: {\n          text: (0, _message.format)(DIALOG_IMAGE_FIELD_ALT)\n        }\n      }];\n    }\n  }, {\n    key: \"toolbarConfig\",\n    get: function get() {\n      return {\n        dataSource: this._prepareToolbarItems(),\n        disabled: this.isInteractionDisabled,\n        menuContainer: this._$toolbarContainer\n      };\n    }\n  }, {\n    key: \"isInteractionDisabled\",\n    get: function get() {\n      return this._editorInstance.option(\"readOnly\") || this._editorInstance.option(\"disabled\");\n    }\n  }]);\n\n  return ToolbarModule;\n}(BaseModule);\n\nexports.default = ToolbarModule;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/html_editor/modules/toolbar.js"],"names":["Object","value","_quill_importer","require","_renderer","_renderer2","_interopRequireDefault","_toolbar","_toolbar2","_widget_collector","_widget_collector2","_iterator","_type","_extend","_message","_inflector","_events_engine","_events_engine2","_utils","obj","Symbol","_typeof","instance","i","props","descriptor","_defineProperties","Constructor","call","_assertThisInitialized","_getPrototypeOf","o","subClass","superClass","constructor","writable","configurable","_setPrototypeOf","BaseModule","TOOLBAR_WRAPPER_CLASS","TOOLBAR_CLASS","TOOLBAR_FORMAT_WIDGET_CLASS","TOOLBAR_SEPARATOR_CLASS","TOOLBAR_MENU_SEPARATOR_CLASS","ACTIVE_FORMAT_CLASS","BOX_ITEM_CONTENT_CLASS","ICON_CLASS","SELECTION_CHANGE_EVENT","DIALOG_COLOR_CAPTION","DIALOG_BACKGROUND_CAPTION","DIALOG_LINK_CAPTION","DIALOG_LINK_FIELD_URL","DIALOG_LINK_FIELD_TEXT","DIALOG_LINK_FIELD_TARGET","DIALOG_LINK_FIELD_TARGET_CLASS","DIALOG_IMAGE_CAPTION","DIALOG_IMAGE_FIELD_URL","DIALOG_IMAGE_FIELD_ALT","DIALOG_IMAGE_FIELD_WIDTH","DIALOG_IMAGE_FIELD_HEIGHT","USER_ACTION","SILENT_ACTION","HEADING_TEXT","NORMAL_TEXT","ToolbarModule","_inherits","_classCallCheck","_this","_possibleConstructorReturn","options","isSelectionChanged","eventName","_createClass","key","_this2","formats","newValue","widget","isApplied","_this3","clear","range","link","image","color","background","orderedList","bulletList","alignLeft","alignCenter","alignRight","alignJustify","codeBlock","undo","redo","increaseIndent","decreaseIndent","superscript","subscript","_this4","_this5","selection","hasEmbedContent","formData","href","text","target","promise","items","index","length","dataField","label","visible","editorType","editorOptions","cssClass","_this6","isUpdateDialog","defaultIndex","_this6$quill$getForma","imageSrc","formatIndex","_imageFormItems","_this7","container","e","name","_ref","$container","_this8","resultItems","newItem","buttonItemConfig","item","selectItemConfig","defaultButtonItemConfig","iconName","buttonText","formatName","hint","icon","onClick","stylingMode","showText","_this9","dataSource","placeholder","onValueChanged","_this10","caption","onContentReady","focusStateEnabled","_this11","baseItem","onInitialized","location","locateInMenu","header","displayExpr","isHeaderValue","disabled","separator","template","menuItemTemplate","historyModule","undoOps","redoOps","operations","hasFormats","widgetName","formatWidget","clearWidget","_this12","get","menuContainer","_$toolbarContainer","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/html_editor/modules/toolbar.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nvar _quill_importer = require(\"../quill_importer\");\r\nvar _renderer = require(\"../../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _toolbar = require(\"../../toolbar\");\r\nvar _toolbar2 = _interopRequireDefault(_toolbar);\r\nrequire(\"../../select_box\");\r\nrequire(\"../../color_box/color_view\");\r\nvar _widget_collector = require(\"./widget_collector\");\r\nvar _widget_collector2 = _interopRequireDefault(_widget_collector);\r\nvar _iterator = require(\"../../../core/utils/iterator\");\r\nvar _type = require(\"../../../core/utils/type\");\r\nvar _extend = require(\"../../../core/utils/extend\");\r\nvar _message = require(\"../../../localization/message\");\r\nvar _inflector = require(\"../../../core/utils/inflector\");\r\nvar _events_engine = require(\"../../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _utils = require(\"../../../events/utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar BaseModule = (0, _quill_importer.getQuill)().import(\"core/module\");\r\nvar TOOLBAR_WRAPPER_CLASS = \"dx-htmleditor-toolbar-wrapper\";\r\nvar TOOLBAR_CLASS = \"dx-htmleditor-toolbar\";\r\nvar TOOLBAR_FORMAT_WIDGET_CLASS = \"dx-htmleditor-toolbar-format\";\r\nvar TOOLBAR_SEPARATOR_CLASS = \"dx-htmleditor-toolbar-separator\";\r\nvar TOOLBAR_MENU_SEPARATOR_CLASS = \"dx-htmleditor-toolbar-menu-separator\";\r\nvar ACTIVE_FORMAT_CLASS = \"dx-format-active\";\r\nvar BOX_ITEM_CONTENT_CLASS = \"dx-box-item-content\";\r\nvar ICON_CLASS = \"dx-icon\";\r\nvar SELECTION_CHANGE_EVENT = \"selection-change\";\r\nvar DIALOG_COLOR_CAPTION = \"dxHtmlEditor-dialogColorCaption\";\r\nvar DIALOG_BACKGROUND_CAPTION = \"dxHtmlEditor-dialogBackgroundCaption\";\r\nvar DIALOG_LINK_CAPTION = \"dxHtmlEditor-dialogLinkCaption\";\r\nvar DIALOG_LINK_FIELD_URL = \"dxHtmlEditor-dialogLinkUrlField\";\r\nvar DIALOG_LINK_FIELD_TEXT = \"dxHtmlEditor-dialogLinkTextField\";\r\nvar DIALOG_LINK_FIELD_TARGET = \"dxHtmlEditor-dialogLinkTargetField\";\r\nvar DIALOG_LINK_FIELD_TARGET_CLASS = \"dx-formdialog-field-target\";\r\nvar DIALOG_IMAGE_CAPTION = \"dxHtmlEditor-dialogImageCaption\";\r\nvar DIALOG_IMAGE_FIELD_URL = \"dxHtmlEditor-dialogImageUrlField\";\r\nvar DIALOG_IMAGE_FIELD_ALT = \"dxHtmlEditor-dialogImageAltField\";\r\nvar DIALOG_IMAGE_FIELD_WIDTH = \"dxHtmlEditor-dialogImageWidthField\";\r\nvar DIALOG_IMAGE_FIELD_HEIGHT = \"dxHtmlEditor-dialogImageHeightField\";\r\nvar USER_ACTION = \"user\";\r\nvar SILENT_ACTION = \"silent\";\r\nvar HEADING_TEXT = (0, _message.format)(\"dxHtmlEditor-heading\");\r\nvar NORMAL_TEXT = (0, _message.format)(\"dxHtmlEditor-normalText\");\r\nvar ToolbarModule = function(_BaseModule) {\r\n    _inherits(ToolbarModule, _BaseModule);\r\n\r\n    function ToolbarModule(quill, options) {\r\n        var _this;\r\n        _classCallCheck(this, ToolbarModule);\r\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(ToolbarModule).call(this, quill, options));\r\n        _this._editorInstance = options.editorInstance;\r\n        _this._toolbarWidgets = new _widget_collector2.default;\r\n        _this._formatHandlers = _this._getFormatHandlers();\r\n        if ((0, _type.isDefined)(options.items)) {\r\n            _this._addCallbacks();\r\n            _this._renderToolbar();\r\n            _this.quill.on(\"editor-change\", function(eventName) {\r\n                var isSelectionChanged = eventName === SELECTION_CHANGE_EVENT;\r\n                _this._updateToolbar(isSelectionChanged)\r\n            })\r\n        }\r\n        return _this\r\n    }\r\n    _createClass(ToolbarModule, [{\r\n        key: \"_addCallbacks\",\r\n        value: function() {\r\n            this._editorInstance.addCleanCallback(this.clean.bind(this));\r\n            this._editorInstance.addContentInitializedCallback(this.updateHistoryWidgets.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_updateToolbar\",\r\n        value: function(isSelectionChanged) {\r\n            this.updateFormatWidgets(isSelectionChanged);\r\n            this.updateHistoryWidgets()\r\n        }\r\n    }, {\r\n        key: \"_getDefaultClickHandler\",\r\n        value: function(formatName) {\r\n            var _this2 = this;\r\n            return function(e) {\r\n                var formats = _this2.quill.getFormat();\r\n                var value = formats[formatName];\r\n                var newValue = !((0, _type.isBoolean)(value) ? value : (0, _type.isDefined)(value));\r\n                _this2.quill.format(formatName, newValue, USER_ACTION);\r\n                _this2._updateFormatWidget(formatName, newValue, formats)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateFormatWidget\",\r\n        value: function(formatName, isApplied, formats) {\r\n            var widget = this._toolbarWidgets.getByName(formatName);\r\n            if (!widget) {\r\n                return\r\n            }\r\n            if (isApplied) {\r\n                this._markActiveFormatWidget(formatName, widget, formats)\r\n            } else {\r\n                this._resetFormatWidget(formatName, widget);\r\n                if (Object.prototype.hasOwnProperty.call(formatName)) {\r\n                    delete formats[formatName]\r\n                }\r\n            }\r\n            this._toggleClearFormatting(isApplied || !(0, _type.isEmptyObject)(formats))\r\n        }\r\n    }, {\r\n        key: \"_getFormatHandlers\",\r\n        value: function() {\r\n            var _this3 = this;\r\n            return {\r\n                clear: function(e) {\r\n                    var range = _this3.quill.getSelection();\r\n                    if (range) {\r\n                        _this3.quill.removeFormat(range);\r\n                        _this3.updateFormatWidgets()\r\n                    }\r\n                },\r\n                link: this._prepareLinkHandler(),\r\n                image: this._prepareImageHandler(),\r\n                color: this._prepareColorClickHandler(\"color\"),\r\n                background: this._prepareColorClickHandler(\"background\"),\r\n                orderedList: this._prepareShortcutHandler(\"list\", \"ordered\"),\r\n                bulletList: this._prepareShortcutHandler(\"list\", \"bullet\"),\r\n                alignLeft: this._prepareShortcutHandler(\"align\", \"left\"),\r\n                alignCenter: this._prepareShortcutHandler(\"align\", \"center\"),\r\n                alignRight: this._prepareShortcutHandler(\"align\", \"right\"),\r\n                alignJustify: this._prepareShortcutHandler(\"align\", \"justify\"),\r\n                codeBlock: this._getDefaultClickHandler(\"code-block\"),\r\n                undo: function() {\r\n                    _this3.quill.history.undo()\r\n                },\r\n                redo: function() {\r\n                    _this3.quill.history.redo()\r\n                },\r\n                increaseIndent: function() {\r\n                    _this3.quill.format(\"indent\", \"+1\", USER_ACTION)\r\n                },\r\n                decreaseIndent: function() {\r\n                    _this3.quill.format(\"indent\", \"-1\", USER_ACTION)\r\n                },\r\n                superscript: this._prepareShortcutHandler(\"script\", \"super\"),\r\n                subscript: this._prepareShortcutHandler(\"script\", \"sub\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_prepareShortcutHandler\",\r\n        value: function(formatName, shortcutValue) {\r\n            var _this4 = this;\r\n            return function() {\r\n                var formats = _this4.quill.getFormat();\r\n                var value = formats[formatName] === shortcutValue ? false : shortcutValue;\r\n                _this4.quill.format(formatName, value, USER_ACTION);\r\n                _this4.updateFormatWidgets(true)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_prepareLinkHandler\",\r\n        value: function() {\r\n            var _this5 = this;\r\n            return function() {\r\n                _this5.quill.focus();\r\n                var selection = _this5.quill.getSelection();\r\n                var hasEmbedContent = _this5._hasEmbedContent(selection);\r\n                var formats = selection ? _this5.quill.getFormat() : {};\r\n                var formData = {\r\n                    href: formats.link || \"\",\r\n                    text: selection && !hasEmbedContent ? _this5.quill.getText(selection) : \"\",\r\n                    target: Object.prototype.hasOwnProperty.call(formats, \"target\") ? !!formats.target : true\r\n                };\r\n                _this5._editorInstance.formDialogOption(\"title\", (0, _message.format)(DIALOG_LINK_CAPTION));\r\n                var promise = _this5._editorInstance.showFormDialog({\r\n                    formData: formData,\r\n                    items: _this5._getLinkFormItems(selection)\r\n                });\r\n                promise.done(function(formData) {\r\n                    if (selection && !hasEmbedContent) {\r\n                        var text = formData.text || formData.href;\r\n                        var index = selection.index,\r\n                            length = selection.length;\r\n                        formData.text = void 0;\r\n                        length && _this5.quill.deleteText(index, length, SILENT_ACTION);\r\n                        _this5.quill.insertText(index, text, \"link\", formData, USER_ACTION);\r\n                        _this5.quill.setSelection(index + text.length, 0, USER_ACTION)\r\n                    } else {\r\n                        formData.text = !selection && !formData.text ? formData.href : formData.text;\r\n                        _this5.quill.format(\"link\", formData, USER_ACTION)\r\n                    }\r\n                });\r\n                promise.fail(function() {\r\n                    _this5.quill.focus()\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hasEmbedContent\",\r\n        value: function(selection) {\r\n            return !!selection && this.quill.getText(selection).trim().length < selection.length\r\n        }\r\n    }, {\r\n        key: \"_getLinkFormItems\",\r\n        value: function(selection) {\r\n            return [{\r\n                dataField: \"href\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_LINK_FIELD_URL)\r\n                }\r\n            }, {\r\n                dataField: \"text\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_LINK_FIELD_TEXT)\r\n                },\r\n                visible: !this._hasEmbedContent(selection)\r\n            }, {\r\n                dataField: \"target\",\r\n                editorType: \"dxCheckBox\",\r\n                editorOptions: {\r\n                    text: (0, _message.format)(DIALOG_LINK_FIELD_TARGET)\r\n                },\r\n                cssClass: DIALOG_LINK_FIELD_TARGET_CLASS,\r\n                label: {\r\n                    visible: false\r\n                }\r\n            }]\r\n        }\r\n    }, {\r\n        key: \"_prepareImageHandler\",\r\n        value: function() {\r\n            var _this6 = this;\r\n            return function() {\r\n                var formData = _this6.quill.getFormat();\r\n                var isUpdateDialog = Object.prototype.hasOwnProperty.call(formData, \"imageSrc\");\r\n                var defaultIndex = _this6._defaultPasteIndex;\r\n                if (isUpdateDialog) {\r\n                    var _this6$quill$getForma = _this6.quill.getFormat(defaultIndex - 1, 1),\r\n                        imageSrc = _this6$quill$getForma.imageSrc;\r\n                    formData.src = formData.imageSrc;\r\n                    delete formData.imageSrc;\r\n                    if (!imageSrc || 0 === defaultIndex) {\r\n                        _this6.quill.setSelection(defaultIndex + 1, 0, SILENT_ACTION)\r\n                    }\r\n                }\r\n                var formatIndex = _this6._embedFormatIndex;\r\n                _this6._editorInstance.formDialogOption(\"title\", (0, _message.format)(DIALOG_IMAGE_CAPTION));\r\n                var promise = _this6._editorInstance.showFormDialog({\r\n                    formData: formData,\r\n                    items: _this6._imageFormItems\r\n                });\r\n                promise.done(function(formData) {\r\n                    var index = defaultIndex;\r\n                    if (isUpdateDialog) {\r\n                        index = formatIndex;\r\n                        _this6.quill.deleteText(index, 1, SILENT_ACTION)\r\n                    }\r\n                    _this6.quill.insertEmbed(index, \"extendedImage\", formData, USER_ACTION);\r\n                    _this6.quill.setSelection(index + 1, 0, USER_ACTION)\r\n                }).always(function() {\r\n                    _this6.quill.focus()\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderToolbar\",\r\n        value: function() {\r\n            var _this7 = this;\r\n            var container = this.options.container || this._getContainer();\r\n            this._$toolbar = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_CLASS).appendTo(container);\r\n            this._$toolbarContainer = (0, _renderer2.default)(container).addClass(TOOLBAR_WRAPPER_CLASS);\r\n            _events_engine2.default.on(this._$toolbarContainer, (0, _utils.addNamespace)(\"mousedown\", this._editorInstance.NAME), function(e) {\r\n                e.preventDefault()\r\n            });\r\n            this.toolbarInstance = this._editorInstance._createComponent(this._$toolbar, _toolbar2.default, this.toolbarConfig);\r\n            this._editorInstance.on(\"optionChanged\", function(_ref) {\r\n                var name = _ref.name;\r\n                if (\"readOnly\" === name || \"disabled\" === name) {\r\n                    _this7.toolbarInstance.option(\"disabled\", _this7.isInteractionDisabled)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"clean\",\r\n        value: function() {\r\n            this._toolbarWidgets.clear();\r\n            if (this._$toolbarContainer) {\r\n                this._$toolbarContainer.empty().removeClass(TOOLBAR_WRAPPER_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"repaint\",\r\n        value: function() {\r\n            this.toolbarInstance && this.toolbarInstance.repaint()\r\n        }\r\n    }, {\r\n        key: \"_getContainer\",\r\n        value: function() {\r\n            var $container = (0, _renderer2.default)(\"<div>\");\r\n            this._editorInstance.$element().prepend($container);\r\n            return $container\r\n        }\r\n    }, {\r\n        key: \"_prepareToolbarItems\",\r\n        value: function() {\r\n            var _this8 = this;\r\n            var resultItems = [];\r\n            (0, _iterator.each)(this.options.items, function(index, item) {\r\n                var newItem;\r\n                if ((0, _type.isObject)(item)) {\r\n                    newItem = _this8._handleObjectItem(item)\r\n                } else {\r\n                    if ((0, _type.isString)(item)) {\r\n                        var buttonItemConfig = _this8._prepareButtonItemConfig(item);\r\n                        newItem = _this8._getToolbarItem(buttonItemConfig)\r\n                    }\r\n                }\r\n                if (newItem) {\r\n                    resultItems.push(newItem)\r\n                }\r\n            });\r\n            return resultItems\r\n        }\r\n    }, {\r\n        key: \"_handleObjectItem\",\r\n        value: function(item) {\r\n            if (item.formatName && item.formatValues && this._isAcceptableItem(\"dxSelectBox\")) {\r\n                var selectItemConfig = this._prepareSelectItemConfig(item);\r\n                return this._getToolbarItem(selectItemConfig)\r\n            } else {\r\n                if (item.formatName && this._isAcceptableItem(\"dxButton\")) {\r\n                    var defaultButtonItemConfig = this._prepareButtonItemConfig(item.formatName);\r\n                    var buttonItemConfig = (0, _extend.extend)(true, defaultButtonItemConfig, item);\r\n                    return this._getToolbarItem(buttonItemConfig)\r\n                } else {\r\n                    return this._getToolbarItem(item)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isAcceptableItem\",\r\n        value: function(item, acceptableWidgetName) {\r\n            return !item.widget || item.widget === acceptableWidgetName\r\n        }\r\n    }, {\r\n        key: \"_prepareButtonItemConfig\",\r\n        value: function(formatName) {\r\n            var iconName = \"clear\" === formatName ? \"clearformat\" : formatName;\r\n            var buttonText = (0, _inflector.titleize)(formatName);\r\n            return {\r\n                widget: \"dxButton\",\r\n                formatName: formatName,\r\n                options: {\r\n                    hint: buttonText,\r\n                    text: buttonText,\r\n                    icon: iconName.toLowerCase(),\r\n                    onClick: this._formatHandlers[formatName] || this._getDefaultClickHandler(formatName),\r\n                    stylingMode: \"text\"\r\n                },\r\n                showText: \"inMenu\"\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_prepareSelectItemConfig\",\r\n        value: function(item) {\r\n            var _this9 = this;\r\n            return (0, _extend.extend)(true, {\r\n                widget: \"dxSelectBox\",\r\n                formatName: item.formatName,\r\n                options: {\r\n                    stylingMode: \"filled\",\r\n                    dataSource: item.formatValues,\r\n                    placeholder: (0, _inflector.titleize)(item.formatName),\r\n                    onValueChanged: function(e) {\r\n                        if (!_this9._isReset) {\r\n                            _this9.quill.format(item.formatName, e.value, USER_ACTION);\r\n                            _this9._setValueSilent(e.component, e.value)\r\n                        }\r\n                    }\r\n                }\r\n            }, item)\r\n        }\r\n    }, {\r\n        key: \"_prepareColorClickHandler\",\r\n        value: function(formatName) {\r\n            var _this10 = this;\r\n            return function() {\r\n                var formData = _this10.quill.getFormat();\r\n                var caption = \"color\" === formatName ? DIALOG_COLOR_CAPTION : DIALOG_BACKGROUND_CAPTION;\r\n                _this10._editorInstance.formDialogOption(\"title\", (0, _message.format)(caption));\r\n                var promise = _this10._editorInstance.showFormDialog({\r\n                    formData: formData,\r\n                    items: [{\r\n                        dataField: formatName,\r\n                        editorType: \"dxColorView\",\r\n                        editorOptions: {\r\n                            onContentReady: function(e) {\r\n                                (0, _renderer2.default)(e.element).closest(\".\".concat(BOX_ITEM_CONTENT_CLASS)).css(\"flexBasis\", \"auto\")\r\n                            },\r\n                            focusStateEnabled: false\r\n                        },\r\n                        label: {\r\n                            visible: false\r\n                        }\r\n                    }]\r\n                });\r\n                promise.done(function(formData) {\r\n                    _this10.quill.format(formatName, formData[formatName], USER_ACTION)\r\n                });\r\n                promise.fail(function() {\r\n                    _this10.quill.focus()\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getToolbarItem\",\r\n        value: function(item) {\r\n            var _this11 = this;\r\n            var baseItem = {\r\n                options: {\r\n                    onInitialized: function(e) {\r\n                        if (item.formatName) {\r\n                            e.component.$element().addClass(TOOLBAR_FORMAT_WIDGET_CLASS);\r\n                            e.component.$element().toggleClass(\"dx-\".concat(item.formatName.toLowerCase(), \"-format\"), !!item.formatName);\r\n                            _this11._toolbarWidgets.add(item.formatName, e.component)\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            return (0, _extend.extend)(true, {\r\n                location: \"before\",\r\n                locateInMenu: \"auto\"\r\n            }, this._getDefaultConfig(item.formatName), item, baseItem)\r\n        }\r\n    }, {\r\n        key: \"_getDefaultItemsConfig\",\r\n        value: function() {\r\n            return {\r\n                header: {\r\n                    options: {\r\n                        displayExpr: function(item) {\r\n                            var isHeaderValue = (0, _type.isDefined)(item) && false !== item;\r\n                            return isHeaderValue ? \"\".concat(HEADING_TEXT, \" \").concat(item) : NORMAL_TEXT\r\n                        }\r\n                    }\r\n                },\r\n                clear: {\r\n                    options: {\r\n                        disabled: true\r\n                    }\r\n                },\r\n                undo: {\r\n                    options: {\r\n                        disabled: true\r\n                    }\r\n                },\r\n                redo: {\r\n                    options: {\r\n                        disabled: true\r\n                    }\r\n                },\r\n                separator: {\r\n                    template: function(data, index, element) {\r\n                        (0, _renderer2.default)(element).addClass(TOOLBAR_SEPARATOR_CLASS)\r\n                    },\r\n                    menuItemTemplate: function(data, index, element) {\r\n                        (0, _renderer2.default)(element).addClass(TOOLBAR_MENU_SEPARATOR_CLASS)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDefaultConfig\",\r\n        value: function(formatName) {\r\n            return this._getDefaultItemsConfig()[formatName]\r\n        }\r\n    }, {\r\n        key: \"updateHistoryWidgets\",\r\n        value: function() {\r\n            var historyModule = this.quill.history;\r\n            if (!historyModule) {\r\n                return\r\n            }\r\n            var undoOps = historyModule.stack.undo;\r\n            var redoOps = historyModule.stack.redo;\r\n            this._updateHistoryWidget(this._toolbarWidgets.getByName(\"undo\"), undoOps);\r\n            this._updateHistoryWidget(this._toolbarWidgets.getByName(\"redo\"), redoOps)\r\n        }\r\n    }, {\r\n        key: \"_updateHistoryWidget\",\r\n        value: function(widget, operations) {\r\n            if (!widget) {\r\n                return\r\n            }\r\n            widget.option(\"disabled\", !operations.length)\r\n        }\r\n    }, {\r\n        key: \"updateFormatWidgets\",\r\n        value: function(isResetRequired) {\r\n            var selection = this.quill.getSelection();\r\n            if (!selection) {\r\n                return\r\n            }\r\n            var formats = this.quill.getFormat(selection);\r\n            var hasFormats = !(0, _type.isEmptyObject)(formats);\r\n            if (!hasFormats || isResetRequired) {\r\n                this._resetFormatWidgets()\r\n            }\r\n            for (var formatName in formats) {\r\n                var widgetName = this._getFormatWidgetName(formatName, formats);\r\n                var formatWidget = this._toolbarWidgets.getByName(widgetName) || this._toolbarWidgets.getByName(formatName);\r\n                if (!formatWidget) {\r\n                    continue\r\n                }\r\n                this._markActiveFormatWidget(formatName, formatWidget, formats)\r\n            }\r\n            this._toggleClearFormatting(hasFormats)\r\n        }\r\n    }, {\r\n        key: \"_markActiveFormatWidget\",\r\n        value: function(name, widget, formats) {\r\n            if (this._isColorFormat(name)) {\r\n                this._updateColorWidget(name, formats[name])\r\n            }\r\n            if (\"value\" in widget.option()) {\r\n                this._setValueSilent(widget, formats[name])\r\n            } else {\r\n                widget.$element().addClass(ACTIVE_FORMAT_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_toggleClearFormatting\",\r\n        value: function(hasFormats) {\r\n            var clearWidget = this._toolbarWidgets.getByName(\"clear\");\r\n            if (clearWidget) {\r\n                clearWidget.option(\"disabled\", !hasFormats)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isColorFormat\",\r\n        value: function(formatName) {\r\n            return \"color\" === formatName || \"background\" === formatName\r\n        }\r\n    }, {\r\n        key: \"_updateColorWidget\",\r\n        value: function(formatName, color) {\r\n            var formatWidget = this._toolbarWidgets.getByName(formatName);\r\n            if (!formatWidget) {\r\n                return\r\n            }\r\n            formatWidget.$element().find(\".\".concat(ICON_CLASS)).css(\"borderBottomColor\", color || \"transparent\")\r\n        }\r\n    }, {\r\n        key: \"_getFormatWidgetName\",\r\n        value: function(formatName, formats) {\r\n            var widgetName;\r\n            switch (formatName) {\r\n                case \"align\":\r\n                    widgetName = formatName + (0, _inflector.titleize)(formats[formatName]);\r\n                    break;\r\n                case \"list\":\r\n                    widgetName = formats[formatName] + (0, _inflector.titleize)(formatName);\r\n                    break;\r\n                case \"code-block\":\r\n                    widgetName = \"codeBlock\";\r\n                    break;\r\n                case \"script\":\r\n                    widgetName = formats[formatName] + formatName;\r\n                    break;\r\n                case \"imageSrc\":\r\n                    widgetName = \"image\";\r\n                    break;\r\n                default:\r\n                    widgetName = formatName\r\n            }\r\n            return widgetName\r\n        }\r\n    }, {\r\n        key: \"_setValueSilent\",\r\n        value: function(widget, value) {\r\n            this._isReset = true;\r\n            widget.option(\"value\", value);\r\n            this._isReset = false\r\n        }\r\n    }, {\r\n        key: \"_resetFormatWidgets\",\r\n        value: function() {\r\n            var _this12 = this;\r\n            this._toolbarWidgets.each(function(name, widget) {\r\n                _this12._resetFormatWidget(name, widget)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_resetFormatWidget\",\r\n        value: function(name, widget) {\r\n            widget.$element().removeClass(ACTIVE_FORMAT_CLASS);\r\n            if (this._isColorFormat(name)) {\r\n                this._updateColorWidget(name)\r\n            }\r\n            if (\"clear\" === name) {\r\n                widget.option(\"disabled\", true)\r\n            }\r\n            if (\"dxSelectBox\" === widget.NAME) {\r\n                this._setValueSilent(widget, null)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"addClickHandler\",\r\n        value: function(formatName, handler) {\r\n            this._formatHandlers[formatName] = handler;\r\n            var formatWidget = this._toolbarWidgets.getByName(formatName);\r\n            if (formatWidget && \"dxButton\" === formatWidget.NAME) {\r\n                formatWidget.option(\"onClick\", handler)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_embedFormatIndex\",\r\n        get: function() {\r\n            var selection = this.quill.getSelection();\r\n            if (selection) {\r\n                if (selection.length) {\r\n                    return selection.index\r\n                } else {\r\n                    return selection.index - 1\r\n                }\r\n            } else {\r\n                return this.quill.getLength()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_defaultPasteIndex\",\r\n        get: function() {\r\n            var selection = this.quill.getSelection();\r\n            return selection && selection.index || this.quill.getLength()\r\n        }\r\n    }, {\r\n        key: \"_imageFormItems\",\r\n        get: function() {\r\n            return [{\r\n                dataField: \"src\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_IMAGE_FIELD_URL)\r\n                }\r\n            }, {\r\n                dataField: \"width\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_IMAGE_FIELD_WIDTH)\r\n                }\r\n            }, {\r\n                dataField: \"height\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_IMAGE_FIELD_HEIGHT)\r\n                }\r\n            }, {\r\n                dataField: \"alt\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_IMAGE_FIELD_ALT)\r\n                }\r\n            }]\r\n        }\r\n    }, {\r\n        key: \"toolbarConfig\",\r\n        get: function() {\r\n            return {\r\n                dataSource: this._prepareToolbarItems(),\r\n                disabled: this.isInteractionDisabled,\r\n                menuContainer: this._$toolbarContainer\r\n            }\r\n        }\r\n    }, {\r\n        key: \"isInteractionDisabled\",\r\n        get: function() {\r\n            return this._editorInstance.option(\"readOnly\") || this._editorInstance.option(\"disabled\")\r\n        }\r\n    }]);\r\n    return ToolbarModule\r\n}(BaseModule);\r\nexports.default = ToolbarModule;\r\n"]},"metadata":{},"sourceType":"module"}