{"ast":null,"code":"/**\r\n * DevExtreme (viz/sparklines/sparkline.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar BaseSparkline = require(\"./base_sparkline\");\n\nvar dataValidatorModule = require(\"../components/data_validator\");\n\nvar seriesModule = require(\"../series/base_series\");\n\nvar MIN_BAR_WIDTH = 1;\nvar MAX_BAR_WIDTH = 50;\nvar DEFAULT_BAR_INTERVAL = 4;\nvar DEFAULT_CANVAS_WIDTH = 250;\nvar DEFAULT_CANVAS_HEIGHT = 30;\nvar DEFAULT_POINT_BORDER = 2;\nvar ALLOWED_TYPES = {\n  line: true,\n  spline: true,\n  stepline: true,\n  area: true,\n  steparea: true,\n  splinearea: true,\n  bar: true,\n  winloss: true\n};\nvar _math = Math;\nvar _abs = _math.abs;\nvar _round = _math.round;\nvar _max = _math.max;\nvar _min = _math.min;\nvar _isFinite = isFinite;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar _map = vizUtils.map;\nvar _normalizeEnum = vizUtils.normalizeEnum;\n\nvar _isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar _Number = Number;\nvar _String = String;\n\nfunction findMinMax(data, valField) {\n  var firstItem = data[0] || {};\n  var firstValue = firstItem[valField] || 0;\n  var min = firstValue;\n  var max = firstValue;\n  var minIndexes = [0];\n  var maxIndexes = [0];\n  var dataLength = data.length;\n  var value;\n  var i;\n\n  for (i = 1; i < dataLength; i++) {\n    value = data[i][valField];\n\n    if (value < min) {\n      min = value;\n      minIndexes = [i];\n    } else {\n      if (value === min) {\n        minIndexes.push(i);\n      }\n    }\n\n    if (value > max) {\n      max = value;\n      maxIndexes = [i];\n    } else {\n      if (value === max) {\n        maxIndexes.push(i);\n      }\n    }\n  }\n\n  if (max === min) {\n    minIndexes = maxIndexes = [];\n  }\n\n  return {\n    minIndexes: minIndexes,\n    maxIndexes: maxIndexes\n  };\n}\n\nfunction parseNumericDataSource(data, argField, valField, ignoreEmptyPoints) {\n  return _map(data, function (dataItem, index) {\n    var item = null;\n    var isDataNumber;\n    var value;\n\n    if (void 0 !== dataItem) {\n      item = {};\n      isDataNumber = _isFinite(dataItem);\n      item[argField] = isDataNumber ? _String(index) : dataItem[argField];\n      value = isDataNumber ? dataItem : dataItem[valField];\n      item[valField] = null === value ? ignoreEmptyPoints ? void 0 : value : _Number(value);\n      item = void 0 !== item[argField] && void 0 !== item[valField] ? item : null;\n    }\n\n    return item;\n  });\n}\n\nfunction parseWinlossDataSource(data, argField, valField, target) {\n  var lowBarValue = -1;\n  var zeroBarValue = 0;\n  var highBarValue = 1;\n  var delta = 1e-4;\n  return _map(data, function (dataItem) {\n    var item = {};\n    item[argField] = dataItem[argField];\n\n    if (_abs(dataItem[valField] - target) < delta) {\n      item[valField] = zeroBarValue;\n    } else {\n      if (dataItem[valField] > target) {\n        item[valField] = highBarValue;\n      } else {\n        item[valField] = lowBarValue;\n      }\n    }\n\n    return item;\n  });\n}\n\nfunction selectPointColor(color, options, index, pointIndexes) {\n  if (index === pointIndexes.first || index === pointIndexes.last) {\n    color = options.firstLastColor;\n  }\n\n  if ((pointIndexes.min || []).indexOf(index) >= 0) {\n    color = options.minColor;\n  }\n\n  if ((pointIndexes.max || []).indexOf(index) >= 0) {\n    color = options.maxColor;\n  }\n\n  return color;\n}\n\nfunction createLineCustomizeFunction(pointIndexes, options) {\n  return function () {\n    var color = selectPointColor(void 0, options, this.index, pointIndexes);\n    return color ? {\n      visible: true,\n      border: {\n        color: color\n      }\n    } : {};\n  };\n}\n\nfunction createBarCustomizeFunction(pointIndexes, options, winlossData) {\n  return function () {\n    var index = this.index;\n    var isWinloss = \"winloss\" === options.type;\n    var target = isWinloss ? options.winlossThreshold : 0;\n    var value = isWinloss ? winlossData[index][options.valueField] : this.value;\n    var positiveColor = isWinloss ? options.winColor : options.barPositiveColor;\n    var negativeColor = isWinloss ? options.lossColor : options.barNegativeColor;\n    return {\n      color: selectPointColor(value >= target ? positiveColor : negativeColor, options, index, pointIndexes)\n    };\n  };\n}\n\nvar dxSparkline = BaseSparkline.inherit({\n  _rootClassPrefix: \"dxsl\",\n  _rootClass: \"dxsl-sparkline\",\n  _themeSection: \"sparkline\",\n  _defaultSize: {\n    width: DEFAULT_CANVAS_WIDTH,\n    height: DEFAULT_CANVAS_HEIGHT\n  },\n  _initCore: function _initCore() {\n    this.callBase();\n\n    this._createSeries();\n  },\n  _initialChanges: [\"DATA_SOURCE\"],\n  _dataSourceChangedHandler: function _dataSourceChangedHandler() {\n    this._requestChange([\"UPDATE\"]);\n  },\n  _updateWidgetElements: function _updateWidgetElements() {\n    this._updateSeries();\n\n    this.callBase();\n  },\n  _disposeWidgetElements: function _disposeWidgetElements() {\n    var that = this;\n    that._series && that._series.dispose();\n    that._series = that._seriesGroup = that._seriesLabelGroup = null;\n  },\n  _cleanWidgetElements: function _cleanWidgetElements() {\n    this._seriesGroup.remove();\n\n    this._seriesLabelGroup.remove();\n\n    this._seriesGroup.clear();\n\n    this._seriesLabelGroup.clear();\n  },\n  _drawWidgetElements: function _drawWidgetElements() {\n    if (this._dataIsLoaded()) {\n      this._drawSeries();\n\n      this._drawn();\n    }\n  },\n  _getCorrectCanvas: function _getCorrectCanvas() {\n    var options = this._allOptions;\n    var canvas = this._canvas;\n    var halfPointSize = options.pointSize && Math.ceil(options.pointSize / 2) + DEFAULT_POINT_BORDER;\n    var type = options.type;\n\n    if (\"bar\" !== type && \"winloss\" !== type && (options.showFirstLast || options.showMinMax)) {\n      return {\n        width: canvas.width,\n        height: canvas.height,\n        left: canvas.left + halfPointSize,\n        right: canvas.right + halfPointSize,\n        top: canvas.top + halfPointSize,\n        bottom: canvas.bottom + halfPointSize\n      };\n    }\n\n    return canvas;\n  },\n  _prepareOptions: function _prepareOptions() {\n    var that = this;\n    that._allOptions = that.callBase();\n    that._allOptions.type = _normalizeEnum(that._allOptions.type);\n\n    if (!ALLOWED_TYPES[that._allOptions.type]) {\n      that._allOptions.type = \"line\";\n    }\n  },\n  _createHtmlElements: function _createHtmlElements() {\n    this._seriesGroup = this._renderer.g().attr({\n      \"class\": \"dxsl-series\"\n    });\n    this._seriesLabelGroup = this._renderer.g().attr({\n      \"class\": \"dxsl-series-labels\"\n    });\n  },\n  _createSeries: function _createSeries() {\n    this._series = new seriesModule.Series({\n      renderer: this._renderer,\n      seriesGroup: this._seriesGroup,\n      labelsGroup: this._seriesLabelGroup,\n      argumentAxis: this._argumentAxis,\n      valueAxis: this._valueAxis\n    }, {\n      widgetType: \"chart\",\n      type: \"line\"\n    });\n  },\n  _updateSeries: function _updateSeries() {\n    var that = this;\n    var groupsData;\n    var seriesOptions;\n    var singleSeries = that._series;\n\n    that._prepareDataSource();\n\n    seriesOptions = that._prepareSeriesOptions();\n    singleSeries.updateOptions(seriesOptions);\n    groupsData = {\n      groups: [{\n        series: [singleSeries]\n      }]\n    };\n    groupsData.argumentOptions = {\n      type: \"bar\" === seriesOptions.type ? \"discrete\" : void 0\n    };\n    that._simpleDataSource = dataValidatorModule.validateData(that._simpleDataSource, groupsData, that._incidentOccurred, {\n      checkTypeForAllData: false,\n      convertToAxisDataType: true,\n      sortingMethod: true\n    })[singleSeries.getArgumentField()];\n    seriesOptions.customizePoint = that._getCustomizeFunction();\n    singleSeries.updateData(that._simpleDataSource);\n    singleSeries.createPoints();\n    that._groupsDataCategories = groupsData.categories;\n  },\n  _optionChangesMap: {\n    dataSource: \"DATA_SOURCE\"\n  },\n  _optionChangesOrder: [\"DATA_SOURCE\"],\n  _change_DATA_SOURCE: function _change_DATA_SOURCE() {\n    this._updateDataSource();\n  },\n  _prepareDataSource: function _prepareDataSource() {\n    var that = this;\n    var options = that._allOptions;\n    var argField = options.argumentField;\n    var valField = options.valueField;\n    var dataSource = that._dataSourceItems() || [];\n    var data = parseNumericDataSource(dataSource, argField, valField, that.option(\"ignoreEmptyPoints\"));\n\n    if (\"winloss\" === options.type) {\n      that._winlossDataSource = data;\n      that._simpleDataSource = parseWinlossDataSource(data, argField, valField, options.winlossThreshold);\n    } else {\n      that._simpleDataSource = data;\n    }\n  },\n  _prepareSeriesOptions: function _prepareSeriesOptions() {\n    var that = this;\n    var options = that._allOptions;\n    var type = \"winloss\" === options.type ? \"bar\" : options.type;\n    return {\n      visible: true,\n      argumentField: options.argumentField,\n      valueField: options.valueField,\n      color: options.lineColor,\n      width: options.lineWidth,\n      widgetType: \"chart\",\n      type: type,\n      opacity: type.indexOf(\"area\") !== -1 ? that._allOptions.areaOpacity : void 0,\n      point: {\n        size: options.pointSize,\n        symbol: options.pointSymbol,\n        border: {\n          visible: true,\n          width: DEFAULT_POINT_BORDER\n        },\n        color: options.pointColor,\n        visible: false,\n        hoverStyle: {\n          border: {}\n        },\n        selectionStyle: {\n          border: {}\n        }\n      },\n      border: {\n        color: options.lineColor,\n        width: options.lineWidth,\n        visible: \"bar\" !== type\n      }\n    };\n  },\n  _getCustomizeFunction: function _getCustomizeFunction() {\n    var that = this;\n    var options = that._allOptions;\n    var dataSource = that._winlossDataSource || that._simpleDataSource;\n\n    var drawnPointIndexes = that._getExtremumPointsIndexes(dataSource);\n\n    var customizeFunction;\n\n    if (\"winloss\" === options.type || \"bar\" === options.type) {\n      customizeFunction = createBarCustomizeFunction(drawnPointIndexes, options, that._winlossDataSource);\n    } else {\n      customizeFunction = createLineCustomizeFunction(drawnPointIndexes, options);\n    }\n\n    return customizeFunction;\n  },\n  _getExtremumPointsIndexes: function _getExtremumPointsIndexes(data) {\n    var that = this;\n    var options = that._allOptions;\n    var lastIndex = data.length - 1;\n    var indexes = {};\n    that._minMaxIndexes = findMinMax(data, options.valueField);\n\n    if (options.showFirstLast) {\n      indexes.first = 0;\n      indexes.last = lastIndex;\n    }\n\n    if (options.showMinMax) {\n      indexes.min = that._minMaxIndexes.minIndexes;\n      indexes.max = that._minMaxIndexes.maxIndexes;\n    }\n\n    return indexes;\n  },\n  _getStick: function _getStick() {\n    return {\n      stick: \"bar\" !== this._series.type\n    };\n  },\n  _updateRange: function _updateRange() {\n    var that = this;\n    var series = that._series;\n    var type = series.type;\n    var isBarType = \"bar\" === type;\n    var isWinlossType = \"winloss\" === type;\n    var DEFAULT_VALUE_RANGE_MARGIN = .15;\n    var DEFAULT_ARGUMENT_RANGE_MARGIN = .1;\n    var WINLOSS_MAX_RANGE = 1;\n    var WINLOSS_MIN_RANGE = -1;\n    var rangeData = series.getRangeData();\n    var minValue = that._allOptions.minValue;\n\n    var hasMinY = _isDefined(minValue) && _isFinite(minValue);\n\n    var maxValue = that._allOptions.maxValue;\n\n    var hasMaxY = _isDefined(maxValue) && _isFinite(maxValue);\n\n    var valCoef;\n    var argCoef;\n    valCoef = (rangeData.val.max - rangeData.val.min) * DEFAULT_VALUE_RANGE_MARGIN;\n\n    if (isBarType || isWinlossType || \"area\" === type) {\n      if (0 !== rangeData.val.min) {\n        rangeData.val.min -= valCoef;\n      }\n\n      if (0 !== rangeData.val.max) {\n        rangeData.val.max += valCoef;\n      }\n    } else {\n      rangeData.val.min -= valCoef;\n      rangeData.val.max += valCoef;\n    }\n\n    if (hasMinY || hasMaxY) {\n      if (hasMinY && hasMaxY) {\n        rangeData.val.minVisible = _min(minValue, maxValue);\n        rangeData.val.maxVisible = _max(minValue, maxValue);\n      } else {\n        rangeData.val.minVisible = hasMinY ? _Number(minValue) : void 0;\n        rangeData.val.maxVisible = hasMaxY ? _Number(maxValue) : void 0;\n      }\n\n      if (isWinlossType) {\n        rangeData.val.minVisible = hasMinY ? _max(rangeData.val.minVisible, WINLOSS_MIN_RANGE) : void 0;\n        rangeData.val.maxVisible = hasMaxY ? _min(rangeData.val.maxVisible, WINLOSS_MAX_RANGE) : void 0;\n      }\n    }\n\n    if (series.getPoints().length > 1) {\n      if (isBarType) {\n        argCoef = (rangeData.arg.max - rangeData.arg.min) * DEFAULT_ARGUMENT_RANGE_MARGIN;\n        rangeData.arg.min = rangeData.arg.min - argCoef;\n        rangeData.arg.max = rangeData.arg.max + argCoef;\n      }\n    }\n\n    rangeData.arg.categories = that._groupsDataCategories;\n    that._ranges = rangeData;\n  },\n  _getBarWidth: function _getBarWidth(pointsCount) {\n    var that = this;\n    var canvas = that._canvas;\n    var intervalWidth = pointsCount * DEFAULT_BAR_INTERVAL;\n    var rangeWidth = canvas.width - canvas.left - canvas.right - intervalWidth;\n\n    var width = _round(rangeWidth / pointsCount);\n\n    if (width < MIN_BAR_WIDTH) {\n      width = MIN_BAR_WIDTH;\n    }\n\n    if (width > MAX_BAR_WIDTH) {\n      width = MAX_BAR_WIDTH;\n    }\n\n    return width;\n  },\n  _correctPoints: function _correctPoints() {\n    var that = this;\n    var seriesType = that._allOptions.type;\n\n    var seriesPoints = that._series.getPoints();\n\n    var pointsLength = seriesPoints.length;\n    var barWidth;\n    var i;\n\n    if (\"bar\" === seriesType || \"winloss\" === seriesType) {\n      barWidth = that._getBarWidth(pointsLength);\n\n      for (i = 0; i < pointsLength; i++) {\n        seriesPoints[i].correctCoordinates({\n          width: barWidth,\n          offset: 0\n        });\n      }\n    }\n  },\n  _drawSeries: function _drawSeries() {\n    var that = this;\n\n    if (that._simpleDataSource.length > 0) {\n      that._correctPoints();\n\n      that._series.draw();\n\n      that._seriesGroup.append(that._renderer.root);\n    }\n  },\n  _isTooltipEnabled: function _isTooltipEnabled() {\n    return !!this._simpleDataSource.length;\n  },\n  _getTooltipData: function _getTooltipData() {\n    var that = this;\n    var options = that._allOptions;\n    var dataSource = that._winlossDataSource || that._simpleDataSource;\n    var tooltip = that._tooltip;\n\n    if (0 === dataSource.length) {\n      return {};\n    }\n\n    var minMax = that._minMaxIndexes;\n    var valueField = options.valueField;\n    var first = dataSource[0][valueField];\n    var last = dataSource[dataSource.length - 1][valueField];\n    var min = _isDefined(minMax.minIndexes[0]) ? dataSource[minMax.minIndexes[0]][valueField] : first;\n    var max = _isDefined(minMax.maxIndexes[0]) ? dataSource[minMax.maxIndexes[0]][valueField] : first;\n    var formattedFirst = tooltip.formatValue(first);\n    var formattedLast = tooltip.formatValue(last);\n    var formattedMin = tooltip.formatValue(min);\n    var formattedMax = tooltip.formatValue(max);\n    var customizeObject = {\n      firstValue: formattedFirst,\n      lastValue: formattedLast,\n      minValue: formattedMin,\n      maxValue: formattedMax,\n      originalFirstValue: first,\n      originalLastValue: last,\n      originalMinValue: min,\n      originalMaxValue: max,\n      valueText: [\"Start:\", formattedFirst, \"End:\", formattedLast, \"Min:\", formattedMin, \"Max:\", formattedMax]\n    };\n\n    if (\"winloss\" === options.type) {\n      customizeObject.originalThresholdValue = options.winlossThreshold;\n      customizeObject.thresholdValue = tooltip.formatValue(options.winlossThreshold);\n    }\n\n    return customizeObject;\n  }\n});\n\n_map([\"lineColor\", \"lineWidth\", \"areaOpacity\", \"minColor\", \"maxColor\", \"barPositiveColor\", \"barNegativeColor\", \"winColor\", \"lessColor\", \"firstLastColor\", \"pointSymbol\", \"pointColor\", \"pointSize\", \"type\", \"argumentField\", \"valueField\", \"winlossThreshold\", \"showFirstLast\", \"showMinMax\", \"ignoreEmptyPoints\", \"minValue\", \"maxValue\"], function (name) {\n  dxSparkline.prototype._optionChangesMap[name] = \"OPTIONS\";\n});\n\nrequire(\"../../core/component_registrator\")(\"dxSparkline\", dxSparkline);\n\nmodule.exports = dxSparkline;\ndxSparkline.addPlugin(require(\"../core/data_source\").plugin);","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/sparklines/sparkline.js"],"names":["BaseSparkline","require","dataValidatorModule","seriesModule","MIN_BAR_WIDTH","MAX_BAR_WIDTH","DEFAULT_BAR_INTERVAL","DEFAULT_CANVAS_WIDTH","DEFAULT_CANVAS_HEIGHT","DEFAULT_POINT_BORDER","ALLOWED_TYPES","line","spline","stepline","area","steparea","splinearea","bar","winloss","_math","_abs","_round","_max","_min","_isFinite","vizUtils","_map","_normalizeEnum","_isDefined","_Number","_String","firstItem","data","firstValue","min","max","minIndexes","maxIndexes","dataLength","i","value","item","isDataNumber","dataItem","ignoreEmptyPoints","lowBarValue","zeroBarValue","highBarValue","delta","index","pointIndexes","color","options","selectPointColor","visible","border","isWinloss","target","winlossData","positiveColor","negativeColor","dxSparkline","_rootClassPrefix","_rootClass","_themeSection","_defaultSize","width","height","_initCore","_initialChanges","_dataSourceChangedHandler","_updateWidgetElements","_disposeWidgetElements","that","_cleanWidgetElements","_drawWidgetElements","_getCorrectCanvas","canvas","halfPointSize","Math","type","left","right","top","bottom","_prepareOptions","_createHtmlElements","_createSeries","renderer","seriesGroup","labelsGroup","argumentAxis","valueAxis","_valueAxis","widgetType","_updateSeries","singleSeries","seriesOptions","groupsData","groups","series","checkTypeForAllData","convertToAxisDataType","sortingMethod","_optionChangesMap","dataSource","_optionChangesOrder","_change_DATA_SOURCE","_prepareDataSource","argField","valField","parseNumericDataSource","parseWinlossDataSource","_prepareSeriesOptions","argumentField","valueField","opacity","point","size","symbol","hoverStyle","selectionStyle","_getCustomizeFunction","drawnPointIndexes","customizeFunction","createBarCustomizeFunction","createLineCustomizeFunction","_getExtremumPointsIndexes","lastIndex","indexes","findMinMax","_getStick","stick","_updateRange","isBarType","isWinlossType","DEFAULT_VALUE_RANGE_MARGIN","DEFAULT_ARGUMENT_RANGE_MARGIN","WINLOSS_MAX_RANGE","WINLOSS_MIN_RANGE","rangeData","minValue","hasMinY","maxValue","hasMaxY","valCoef","argCoef","_getBarWidth","intervalWidth","pointsCount","rangeWidth","_correctPoints","seriesType","seriesPoints","pointsLength","barWidth","offset","_drawSeries","_isTooltipEnabled","_getTooltipData","tooltip","minMax","first","last","formattedFirst","formattedLast","formattedMin","formattedMax","customizeObject","lastValue","originalFirstValue","originalLastValue","originalMinValue","originalMaxValue","valueText","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,aAAa,GAAGC,OAAO,CAA3B,kBAA2B,CAA3B;;AACA,IAAIC,mBAAmB,GAAGD,OAAO,CAAjC,8BAAiC,CAAjC;;AACA,IAAIE,YAAY,GAAGF,OAAO,CAA1B,uBAA0B,CAA1B;;AACA,IAAIG,aAAa,GAAjB,CAAA;AACA,IAAIC,aAAa,GAAjB,EAAA;AACA,IAAIC,oBAAoB,GAAxB,CAAA;AACA,IAAIC,oBAAoB,GAAxB,GAAA;AACA,IAAIC,qBAAqB,GAAzB,EAAA;AACA,IAAIC,oBAAoB,GAAxB,CAAA;AACA,IAAIC,aAAa,GAAG;AAChBC,EAAAA,IAAI,EADY,IAAA;AAEhBC,EAAAA,MAAM,EAFU,IAAA;AAGhBC,EAAAA,QAAQ,EAHQ,IAAA;AAIhBC,EAAAA,IAAI,EAJY,IAAA;AAKhBC,EAAAA,QAAQ,EALQ,IAAA;AAMhBC,EAAAA,UAAU,EANM,IAAA;AAOhBC,EAAAA,GAAG,EAPa,IAAA;AAQhBC,EAAAA,OAAO,EAAE;AARO,CAApB;AAUA,IAAIC,KAAK,GAAT,IAAA;AACA,IAAIC,IAAI,GAAGD,KAAK,CAAhB,GAAA;AACA,IAAIE,MAAM,GAAGF,KAAK,CAAlB,KAAA;AACA,IAAIG,IAAI,GAAGH,KAAK,CAAhB,GAAA;AACA,IAAII,IAAI,GAAGJ,KAAK,CAAhB,GAAA;AACA,IAAIK,SAAS,GAAb,QAAA;;AACA,IAAIC,QAAQ,GAAGxB,OAAO,CAAtB,eAAsB,CAAtB;;AACA,IAAIyB,IAAI,GAAGD,QAAQ,CAAnB,GAAA;AACA,IAAIE,cAAc,GAAGF,QAAQ,CAA7B,aAAA;;AACA,IAAIG,UAAU,GAAG3B,OAAO,CAAPA,uBAAO,CAAPA,CAAjB,SAAA;;AACA,IAAI4B,OAAO,GAAX,MAAA;AACA,IAAIC,OAAO,GAAX,MAAA;;AAEA,SAAA,UAAA,CAAA,IAAA,EAAA,QAAA,EAAoC;AAChC,MAAIC,SAAS,GAAGC,IAAI,CAAJA,CAAI,CAAJA,IAAhB,EAAA;AACA,MAAIC,UAAU,GAAGF,SAAS,CAATA,QAAS,CAATA,IAAjB,CAAA;AACA,MAAIG,GAAG,GAAP,UAAA;AACA,MAAIC,GAAG,GAAP,UAAA;AACA,MAAIC,UAAU,GAAG,CAAjB,CAAiB,CAAjB;AACA,MAAIC,UAAU,GAAG,CAAjB,CAAiB,CAAjB;AACA,MAAIC,UAAU,GAAGN,IAAI,CAArB,MAAA;AACA,MAAA,KAAA;AACA,MAAA,CAAA;;AACA,OAAKO,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAb,UAAA,EAA4BA,CAA5B,EAAA,EAAiC;AAC7BC,IAAAA,KAAK,GAAGR,IAAI,CAAJA,CAAI,CAAJA,CAARQ,QAAQR,CAARQ;;AACA,QAAIA,KAAK,GAAT,GAAA,EAAiB;AACbN,MAAAA,GAAG,GAAHA,KAAAA;AACAE,MAAAA,UAAU,GAAG,CAAbA,CAAa,CAAbA;AAFJ,KAAA,MAGO;AACH,UAAII,KAAK,KAAT,GAAA,EAAmB;AACfJ,QAAAA,UAAU,CAAVA,IAAAA,CAAAA,CAAAA;AACH;AACJ;;AACD,QAAII,KAAK,GAAT,GAAA,EAAiB;AACbL,MAAAA,GAAG,GAAHA,KAAAA;AACAE,MAAAA,UAAU,GAAG,CAAbA,CAAa,CAAbA;AAFJ,KAAA,MAGO;AACH,UAAIG,KAAK,KAAT,GAAA,EAAmB;AACfH,QAAAA,UAAU,CAAVA,IAAAA,CAAAA,CAAAA;AACH;AACJ;AACJ;;AACD,MAAIF,GAAG,KAAP,GAAA,EAAiB;AACbC,IAAAA,UAAU,GAAGC,UAAU,GAAvBD,EAAAA;AACH;;AACD,SAAO;AACHA,IAAAA,UAAU,EADP,UAAA;AAEHC,IAAAA,UAAU,EAAEA;AAFT,GAAP;AAIH;;AAED,SAAA,sBAAA,CAAA,IAAA,EAAA,QAAA,EAAA,QAAA,EAAA,iBAAA,EAA6E;AACzE,SAAOX,IAAI,CAAA,IAAA,EAAO,UAAA,QAAA,EAAA,KAAA,EAA0B;AACxC,QAAIe,IAAI,GAAR,IAAA;AACA,QAAA,YAAA;AACA,QAAA,KAAA;;AACA,QAAI,KAAA,CAAA,KAAJ,QAAA,EAAyB;AACrBA,MAAAA,IAAI,GAAJA,EAAAA;AACAC,MAAAA,YAAY,GAAGlB,SAAS,CAAxBkB,QAAwB,CAAxBA;AACAD,MAAAA,IAAI,CAAJA,QAAI,CAAJA,GAAiBC,YAAY,GAAGZ,OAAO,CAAV,KAAU,CAAV,GAAoBa,QAAQ,CAAzDF,QAAyD,CAAzDA;AACAD,MAAAA,KAAK,GAAGE,YAAY,GAAA,QAAA,GAAcC,QAAQ,CAA1CH,QAA0C,CAA1CA;AACAC,MAAAA,IAAI,CAAJA,QAAI,CAAJA,GAAiB,SAAA,KAAA,GAAiBG,iBAAiB,GAAG,KAAH,CAAA,GAAlC,KAAA,GAAsDf,OAAO,CAA9EY,KAA8E,CAA9EA;AACAA,MAAAA,IAAI,GAAG,KAAA,CAAA,KAAWA,IAAI,CAAf,QAAe,CAAf,IAA6B,KAAA,CAAA,KAAWA,IAAI,CAA5C,QAA4C,CAA5C,GAAA,IAAA,GAAPA,IAAAA;AACH;;AACD,WAAA,IAAA;AAZJ,GAAW,CAAX;AAcH;;AAED,SAAA,sBAAA,CAAA,IAAA,EAAA,QAAA,EAAA,QAAA,EAAA,MAAA,EAAkE;AAC9D,MAAII,WAAW,GAAG,CAAlB,CAAA;AACA,MAAIC,YAAY,GAAhB,CAAA;AACA,MAAIC,YAAY,GAAhB,CAAA;AACA,MAAIC,KAAK,GAAT,IAAA;AACA,SAAOtB,IAAI,CAAA,IAAA,EAAO,UAAA,QAAA,EAAmB;AACjC,QAAIe,IAAI,GAAR,EAAA;AACAA,IAAAA,IAAI,CAAJA,QAAI,CAAJA,GAAiBE,QAAQ,CAAzBF,QAAyB,CAAzBA;;AACA,QAAIrB,IAAI,CAACuB,QAAQ,CAARA,QAAQ,CAARA,GAALvB,MAAI,CAAJA,GAAJ,KAAA,EAA+C;AAC3CqB,MAAAA,IAAI,CAAJA,QAAI,CAAJA,GAAAA,YAAAA;AADJ,KAAA,MAEO;AACH,UAAIE,QAAQ,CAARA,QAAQ,CAARA,GAAJ,MAAA,EAAiC;AAC7BF,QAAAA,IAAI,CAAJA,QAAI,CAAJA,GAAAA,YAAAA;AADJ,OAAA,MAEO;AACHA,QAAAA,IAAI,CAAJA,QAAI,CAAJA,GAAAA,WAAAA;AACH;AACJ;;AACD,WAAA,IAAA;AAZJ,GAAW,CAAX;AAcH;;AAED,SAAA,gBAAA,CAAA,KAAA,EAAA,OAAA,EAAA,KAAA,EAAA,YAAA,EAA+D;AAC3D,MAAIQ,KAAK,KAAKC,YAAY,CAAtBD,KAAAA,IAAgCA,KAAK,KAAKC,YAAY,CAA1D,IAAA,EAAiE;AAC7DC,IAAAA,KAAK,GAAGC,OAAO,CAAfD,cAAAA;AACH;;AACD,MAAI,CAACD,YAAY,CAAZA,GAAAA,IAAD,EAAA,EAAA,OAAA,CAAA,KAAA,KAAJ,CAAA,EAAkD;AAC9CC,IAAAA,KAAK,GAAGC,OAAO,CAAfD,QAAAA;AACH;;AACD,MAAI,CAACD,YAAY,CAAZA,GAAAA,IAAD,EAAA,EAAA,OAAA,CAAA,KAAA,KAAJ,CAAA,EAAkD;AAC9CC,IAAAA,KAAK,GAAGC,OAAO,CAAfD,QAAAA;AACH;;AACD,SAAA,KAAA;AACH;;AAED,SAAA,2BAAA,CAAA,YAAA,EAAA,OAAA,EAA4D;AACxD,SAAO,YAAW;AACd,QAAIA,KAAK,GAAGE,gBAAgB,CAAC,KAAD,CAAA,EAAA,OAAA,EAAkB,KAAlB,KAAA,EAA5B,YAA4B,CAA5B;AACA,WAAOF,KAAK,GAAG;AACXG,MAAAA,OAAO,EADI,IAAA;AAEXC,MAAAA,MAAM,EAAE;AACJJ,QAAAA,KAAK,EAAEA;AADH;AAFG,KAAH,GAAZ,EAAA;AAFJ,GAAA;AASH;;AAED,SAAA,0BAAA,CAAA,YAAA,EAAA,OAAA,EAAA,WAAA,EAAwE;AACpE,SAAO,YAAW;AACd,QAAIF,KAAK,GAAG,KAAZ,KAAA;AACA,QAAIO,SAAS,GAAG,cAAcJ,OAAO,CAArC,IAAA;AACA,QAAIK,MAAM,GAAGD,SAAS,GAAGJ,OAAO,CAAV,gBAAA,GAAtB,CAAA;AACA,QAAIZ,KAAK,GAAGgB,SAAS,GAAGE,WAAW,CAAXA,KAAW,CAAXA,CAAmBN,OAAO,CAA7B,UAAGM,CAAH,GAA4C,KAAjE,KAAA;AACA,QAAIC,aAAa,GAAGH,SAAS,GAAGJ,OAAO,CAAV,QAAA,GAAsBA,OAAO,CAA1D,gBAAA;AACA,QAAIQ,aAAa,GAAGJ,SAAS,GAAGJ,OAAO,CAAV,SAAA,GAAuBA,OAAO,CAA3D,gBAAA;AACA,WAAO;AACHD,MAAAA,KAAK,EAAEE,gBAAgB,CAACb,KAAK,IAALA,MAAAA,GAAAA,aAAAA,GAAD,aAAA,EAAA,OAAA,EAAA,KAAA,EAAA,YAAA;AADpB,KAAP;AAPJ,GAAA;AAWH;;AACD,IAAIqB,WAAW,GAAG,aAAa,CAAb,OAAA,CAAsB;AACpCC,EAAAA,gBAAgB,EADoB,MAAA;AAEpCC,EAAAA,UAAU,EAF0B,gBAAA;AAGpCC,EAAAA,aAAa,EAHuB,WAAA;AAIpCC,EAAAA,YAAY,EAAE;AACVC,IAAAA,KAAK,EADK,oBAAA;AAEVC,IAAAA,MAAM,EAAE3D;AAFE,GAJsB;AAQpC4D,EAAAA,SAAS,EAAE,SAAA,SAAA,GAAW;AAClB,SAAA,QAAA;;AACA,SAAA,aAAA;AAVgC,GAAA;AAYpCC,EAAAA,eAAe,EAAE,CAZmB,aAYnB,CAZmB;AAapCC,EAAAA,yBAAyB,EAAE,SAAA,yBAAA,GAAW;AAClC,SAAA,cAAA,CAAoB,CAApB,QAAoB,CAApB;AAdgC,GAAA;AAgBpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,SAAA,aAAA;;AACA,SAAA,QAAA;AAlBgC,GAAA;AAoBpCC,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,GAAW;AAC/B,QAAIC,IAAI,GAAR,IAAA;AACAA,IAAAA,IAAI,CAAJA,OAAAA,IAAgBA,IAAI,CAAJA,OAAAA,CAAhBA,OAAgBA,EAAhBA;AACAA,IAAAA,IAAI,CAAJA,OAAAA,GAAeA,IAAI,CAAJA,YAAAA,GAAoBA,IAAI,CAAJA,iBAAAA,GAAnCA,IAAAA;AAvBgC,GAAA;AAyBpCC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,SAAA,YAAA,CAAA,MAAA;;AACA,SAAA,iBAAA,CAAA,MAAA;;AACA,SAAA,YAAA,CAAA,KAAA;;AACA,SAAA,iBAAA,CAAA,KAAA;AA7BgC,GAAA;AA+BpCC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,QAAI,KAAJ,aAAI,EAAJ,EAA0B;AACtB,WAAA,WAAA;;AACA,WAAA,MAAA;AACH;AAnC+B,GAAA;AAqCpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,QAAIxB,OAAO,GAAG,KAAd,WAAA;AACA,QAAIyB,MAAM,GAAG,KAAb,OAAA;AACA,QAAIC,aAAa,GAAG1B,OAAO,CAAPA,SAAAA,IAAqB2B,IAAI,CAAJA,IAAAA,CAAU3B,OAAO,CAAPA,SAAAA,GAAV2B,CAAAA,IAAzC,oBAAA;AACA,QAAIC,IAAI,GAAG5B,OAAO,CAAlB,IAAA;;AACA,QAAI,UAAA,IAAA,IAAkB,cAAlB,IAAA,KAAyCA,OAAO,CAAPA,aAAAA,IAAyBA,OAAO,CAA7E,UAAI,CAAJ,EAA2F;AACvF,aAAO;AACHc,QAAAA,KAAK,EAAEW,MAAM,CADV,KAAA;AAEHV,QAAAA,MAAM,EAAEU,MAAM,CAFX,MAAA;AAGHI,QAAAA,IAAI,EAAEJ,MAAM,CAANA,IAAAA,GAHH,aAAA;AAIHK,QAAAA,KAAK,EAAEL,MAAM,CAANA,KAAAA,GAJJ,aAAA;AAKHM,QAAAA,GAAG,EAAEN,MAAM,CAANA,GAAAA,GALF,aAAA;AAMHO,QAAAA,MAAM,EAAEP,MAAM,CAANA,MAAAA,GAAgBC;AANrB,OAAP;AAQH;;AACD,WAAA,MAAA;AApDgC,GAAA;AAsDpCO,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,QAAIZ,IAAI,GAAR,IAAA;AACAA,IAAAA,IAAI,CAAJA,WAAAA,GAAmBA,IAAI,CAAvBA,QAAmBA,EAAnBA;AACAA,IAAAA,IAAI,CAAJA,WAAAA,CAAAA,IAAAA,GAAwB9C,cAAc,CAAC8C,IAAI,CAAJA,WAAAA,CAAvCA,IAAsC,CAAtCA;;AACA,QAAI,CAAC/D,aAAa,CAAC+D,IAAI,CAAJA,WAAAA,CAAnB,IAAkB,CAAlB,EAA2C;AACvCA,MAAAA,IAAI,CAAJA,WAAAA,CAAAA,IAAAA,GAAAA,MAAAA;AACH;AA5D+B,GAAA;AA8DpCa,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,SAAA,YAAA,GAAoB,KAAA,SAAA,CAAA,CAAA,GAAA,IAAA,CAAwB;AACxC,eAAS;AAD+B,KAAxB,CAApB;AAGA,SAAA,iBAAA,GAAyB,KAAA,SAAA,CAAA,CAAA,GAAA,IAAA,CAAwB;AAC7C,eAAS;AADoC,KAAxB,CAAzB;AAlEgC,GAAA;AAsEpCC,EAAAA,aAAa,EAAE,SAAA,aAAA,GAAW;AACtB,SAAA,OAAA,GAAe,IAAIpF,YAAY,CAAhB,MAAA,CAAwB;AACnCqF,MAAAA,QAAQ,EAAE,KADyB,SAAA;AAEnCC,MAAAA,WAAW,EAAE,KAFsB,YAAA;AAGnCC,MAAAA,WAAW,EAAE,KAHsB,iBAAA;AAInCC,MAAAA,YAAY,EAAE,KAJqB,aAAA;AAKnCC,MAAAA,SAAS,EAAE,KAAKC;AALmB,KAAxB,EAMZ;AACCC,MAAAA,UAAU,EADX,OAAA;AAECd,MAAAA,IAAI,EAAE;AAFP,KANY,CAAf;AAvEgC,GAAA;AAkFpCe,EAAAA,aAAa,EAAE,SAAA,aAAA,GAAW;AACtB,QAAItB,IAAI,GAAR,IAAA;AACA,QAAA,UAAA;AACA,QAAA,aAAA;AACA,QAAIuB,YAAY,GAAGvB,IAAI,CAAvB,OAAA;;AACAA,IAAAA,IAAI,CAAJA,kBAAAA;;AACAwB,IAAAA,aAAa,GAAGxB,IAAI,CAApBwB,qBAAgBxB,EAAhBwB;AACAD,IAAAA,YAAY,CAAZA,aAAAA,CAAAA,aAAAA;AACAE,IAAAA,UAAU,GAAG;AACTC,MAAAA,MAAM,EAAE,CAAC;AACLC,QAAAA,MAAM,EAAE,CAAA,YAAA;AADH,OAAD;AADC,KAAbF;AAKAA,IAAAA,UAAU,CAAVA,eAAAA,GAA6B;AACzBlB,MAAAA,IAAI,EAAE,UAAUiB,aAAa,CAAvB,IAAA,GAAA,UAAA,GAA4C,KAAK;AAD9B,KAA7BC;AAGAzB,IAAAA,IAAI,CAAJA,iBAAAA,GAAyB,mBAAmB,CAAnB,YAAA,CAAiCA,IAAI,CAArC,iBAAA,EAAA,UAAA,EAAqEA,IAAI,CAAzE,iBAAA,EAA6F;AAClH4B,MAAAA,mBAAmB,EAD+F,KAAA;AAElHC,MAAAA,qBAAqB,EAF6F,IAAA;AAGlHC,MAAAA,aAAa,EAAE;AAHmG,KAA7F,EAItBP,YAAY,CAJfvB,gBAIGuB,EAJsB,CAAzBvB;AAKAwB,IAAAA,aAAa,CAAbA,cAAAA,GAA+BxB,IAAI,CAAnCwB,qBAA+BxB,EAA/BwB;AACAD,IAAAA,YAAY,CAAZA,UAAAA,CAAwBvB,IAAI,CAA5BuB,iBAAAA;AACAA,IAAAA,YAAY,CAAZA,YAAAA;AACAvB,IAAAA,IAAI,CAAJA,qBAAAA,GAA6ByB,UAAU,CAAvCzB,UAAAA;AA1GgC,GAAA;AA4GpC+B,EAAAA,iBAAiB,EAAE;AACfC,IAAAA,UAAU,EAAE;AADG,GA5GiB;AA+GpCC,EAAAA,mBAAmB,EAAE,CA/Ge,aA+Gf,CA/Ge;AAgHpCC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,SAAA,iBAAA;AAjHgC,GAAA;AAmHpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,QAAInC,IAAI,GAAR,IAAA;AACA,QAAIrB,OAAO,GAAGqB,IAAI,CAAlB,WAAA;AACA,QAAIoC,QAAQ,GAAGzD,OAAO,CAAtB,aAAA;AACA,QAAI0D,QAAQ,GAAG1D,OAAO,CAAtB,UAAA;AACA,QAAIqD,UAAU,GAAGhC,IAAI,CAAJA,gBAAAA,MAAjB,EAAA;AACA,QAAIzC,IAAI,GAAG+E,sBAAsB,CAAA,UAAA,EAAA,QAAA,EAAA,QAAA,EAAiCtC,IAAI,CAAJA,MAAAA,CAAlE,mBAAkEA,CAAjC,CAAjC;;AACA,QAAI,cAAcrB,OAAO,CAAzB,IAAA,EAAgC;AAC5BqB,MAAAA,IAAI,CAAJA,kBAAAA,GAAAA,IAAAA;AACAA,MAAAA,IAAI,CAAJA,iBAAAA,GAAyBuC,sBAAsB,CAAA,IAAA,EAAA,QAAA,EAAA,QAAA,EAA2B5D,OAAO,CAAjFqB,gBAA+C,CAA/CA;AAFJ,KAAA,MAGO;AACHA,MAAAA,IAAI,CAAJA,iBAAAA,GAAAA,IAAAA;AACH;AA/H+B,GAAA;AAiIpCwC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,QAAIxC,IAAI,GAAR,IAAA;AACA,QAAIrB,OAAO,GAAGqB,IAAI,CAAlB,WAAA;AACA,QAAIO,IAAI,GAAG,cAAc5B,OAAO,CAArB,IAAA,GAAA,KAAA,GAAqCA,OAAO,CAAvD,IAAA;AACA,WAAO;AACHE,MAAAA,OAAO,EADJ,IAAA;AAEH4D,MAAAA,aAAa,EAAE9D,OAAO,CAFnB,aAAA;AAGH+D,MAAAA,UAAU,EAAE/D,OAAO,CAHhB,UAAA;AAIHD,MAAAA,KAAK,EAAEC,OAAO,CAJX,SAAA;AAKHc,MAAAA,KAAK,EAAEd,OAAO,CALX,SAAA;AAMH0C,MAAAA,UAAU,EANP,OAAA;AAOHd,MAAAA,IAAI,EAPD,IAAA;AAQHoC,MAAAA,OAAO,EAAEpC,IAAI,CAAJA,OAAAA,CAAAA,MAAAA,MAAyB,CAAzBA,CAAAA,GAA8BP,IAAI,CAAJA,WAAAA,CAA9BO,WAAAA,GAA6D,KARnE,CAAA;AASHqC,MAAAA,KAAK,EAAE;AACHC,QAAAA,IAAI,EAAElE,OAAO,CADV,SAAA;AAEHmE,QAAAA,MAAM,EAAEnE,OAAO,CAFZ,WAAA;AAGHG,QAAAA,MAAM,EAAE;AACJD,UAAAA,OAAO,EADH,IAAA;AAEJY,UAAAA,KAAK,EAAEzD;AAFH,SAHL;AAOH0C,QAAAA,KAAK,EAAEC,OAAO,CAPX,UAAA;AAQHE,QAAAA,OAAO,EARJ,KAAA;AASHkE,QAAAA,UAAU,EAAE;AACRjE,UAAAA,MAAM,EAAE;AADA,SATT;AAYHkE,QAAAA,cAAc,EAAE;AACZlE,UAAAA,MAAM,EAAE;AADI;AAZb,OATJ;AAyBHA,MAAAA,MAAM,EAAE;AACJJ,QAAAA,KAAK,EAAEC,OAAO,CADV,SAAA;AAEJc,QAAAA,KAAK,EAAEd,OAAO,CAFV,SAAA;AAGJE,QAAAA,OAAO,EAAE,UAAU0B;AAHf;AAzBL,KAAP;AArIgC,GAAA;AAqKpC0C,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,QAAIjD,IAAI,GAAR,IAAA;AACA,QAAIrB,OAAO,GAAGqB,IAAI,CAAlB,WAAA;AACA,QAAIgC,UAAU,GAAGhC,IAAI,CAAJA,kBAAAA,IAA2BA,IAAI,CAAhD,iBAAA;;AACA,QAAIkD,iBAAiB,GAAGlD,IAAI,CAAJA,yBAAAA,CAAxB,UAAwBA,CAAxB;;AACA,QAAA,iBAAA;;AACA,QAAI,cAAcrB,OAAO,CAArB,IAAA,IAA8B,UAAUA,OAAO,CAAnD,IAAA,EAA0D;AACtDwE,MAAAA,iBAAiB,GAAGC,0BAA0B,CAAA,iBAAA,EAAA,OAAA,EAA6BpD,IAAI,CAA/EmD,kBAA8C,CAA9CA;AADJ,KAAA,MAEO;AACHA,MAAAA,iBAAiB,GAAGE,2BAA2B,CAAA,iBAAA,EAA/CF,OAA+C,CAA/CA;AACH;;AACD,WAAA,iBAAA;AAhLgC,GAAA;AAkLpCG,EAAAA,yBAAyB,EAAE,SAAA,yBAAA,CAAA,IAAA,EAAe;AACtC,QAAItD,IAAI,GAAR,IAAA;AACA,QAAIrB,OAAO,GAAGqB,IAAI,CAAlB,WAAA;AACA,QAAIuD,SAAS,GAAGhG,IAAI,CAAJA,MAAAA,GAAhB,CAAA;AACA,QAAIiG,OAAO,GAAX,EAAA;AACAxD,IAAAA,IAAI,CAAJA,cAAAA,GAAsByD,UAAU,CAAA,IAAA,EAAO9E,OAAO,CAA9CqB,UAAgC,CAAhCA;;AACA,QAAIrB,OAAO,CAAX,aAAA,EAA2B;AACvB6E,MAAAA,OAAO,CAAPA,KAAAA,GAAAA,CAAAA;AACAA,MAAAA,OAAO,CAAPA,IAAAA,GAAAA,SAAAA;AACH;;AACD,QAAI7E,OAAO,CAAX,UAAA,EAAwB;AACpB6E,MAAAA,OAAO,CAAPA,GAAAA,GAAcxD,IAAI,CAAJA,cAAAA,CAAdwD,UAAAA;AACAA,MAAAA,OAAO,CAAPA,GAAAA,GAAcxD,IAAI,CAAJA,cAAAA,CAAdwD,UAAAA;AACH;;AACD,WAAA,OAAA;AAhMgC,GAAA;AAkMpCE,EAAAA,SAAS,EAAE,SAAA,SAAA,GAAW;AAClB,WAAO;AACHC,MAAAA,KAAK,EAAE,UAAU,KAAA,OAAA,CAAapD;AAD3B,KAAP;AAnMgC,GAAA;AAuMpCqD,EAAAA,YAAY,EAAE,SAAA,YAAA,GAAW;AACrB,QAAI5D,IAAI,GAAR,IAAA;AACA,QAAI2B,MAAM,GAAG3B,IAAI,CAAjB,OAAA;AACA,QAAIO,IAAI,GAAGoB,MAAM,CAAjB,IAAA;AACA,QAAIkC,SAAS,GAAG,UAAhB,IAAA;AACA,QAAIC,aAAa,GAAG,cAApB,IAAA;AACA,QAAIC,0BAA0B,GAA9B,GAAA;AACA,QAAIC,6BAA6B,GAAjC,EAAA;AACA,QAAIC,iBAAiB,GAArB,CAAA;AACA,QAAIC,iBAAiB,GAAG,CAAxB,CAAA;AACA,QAAIC,SAAS,GAAGxC,MAAM,CAAtB,YAAgBA,EAAhB;AACA,QAAIyC,QAAQ,GAAGpE,IAAI,CAAJA,WAAAA,CAAf,QAAA;;AACA,QAAIqE,OAAO,GAAGlH,UAAU,CAAVA,QAAU,CAAVA,IAAwBJ,SAAS,CAA/C,QAA+C,CAA/C;;AACA,QAAIuH,QAAQ,GAAGtE,IAAI,CAAJA,WAAAA,CAAf,QAAA;;AACA,QAAIuE,OAAO,GAAGpH,UAAU,CAAVA,QAAU,CAAVA,IAAwBJ,SAAS,CAA/C,QAA+C,CAA/C;;AACA,QAAA,OAAA;AACA,QAAA,OAAA;AACAyH,IAAAA,OAAO,GAAG,CAACL,SAAS,CAATA,GAAAA,CAAAA,GAAAA,GAAoBA,SAAS,CAATA,GAAAA,CAArB,GAAA,IAAVK,0BAAAA;;AACA,QAAIX,SAAS,IAATA,aAAAA,IAA8B,WAAlC,IAAA,EAAmD;AAC/C,UAAI,MAAMM,SAAS,CAATA,GAAAA,CAAV,GAAA,EAA6B;AACzBA,QAAAA,SAAS,CAATA,GAAAA,CAAAA,GAAAA,IAAAA,OAAAA;AACH;;AACD,UAAI,MAAMA,SAAS,CAATA,GAAAA,CAAV,GAAA,EAA6B;AACzBA,QAAAA,SAAS,CAATA,GAAAA,CAAAA,GAAAA,IAAAA,OAAAA;AACH;AANL,KAAA,MAOO;AACHA,MAAAA,SAAS,CAATA,GAAAA,CAAAA,GAAAA,IAAAA,OAAAA;AACAA,MAAAA,SAAS,CAATA,GAAAA,CAAAA,GAAAA,IAAAA,OAAAA;AACH;;AACD,QAAIE,OAAO,IAAX,OAAA,EAAwB;AACpB,UAAIA,OAAO,IAAX,OAAA,EAAwB;AACpBF,QAAAA,SAAS,CAATA,GAAAA,CAAAA,UAAAA,GAA2BrH,IAAI,CAAA,QAAA,EAA/BqH,QAA+B,CAA/BA;AACAA,QAAAA,SAAS,CAATA,GAAAA,CAAAA,UAAAA,GAA2BtH,IAAI,CAAA,QAAA,EAA/BsH,QAA+B,CAA/BA;AAFJ,OAAA,MAGO;AACHA,QAAAA,SAAS,CAATA,GAAAA,CAAAA,UAAAA,GAA2BE,OAAO,GAAGjH,OAAO,CAAV,QAAU,CAAV,GAAuB,KAAzD+G,CAAAA;AACAA,QAAAA,SAAS,CAATA,GAAAA,CAAAA,UAAAA,GAA2BI,OAAO,GAAGnH,OAAO,CAAV,QAAU,CAAV,GAAuB,KAAzD+G,CAAAA;AACH;;AACD,UAAA,aAAA,EAAmB;AACfA,QAAAA,SAAS,CAATA,GAAAA,CAAAA,UAAAA,GAA2BE,OAAO,GAAGxH,IAAI,CAACsH,SAAS,CAATA,GAAAA,CAAD,UAAA,EAAP,iBAAO,CAAP,GAAuD,KAAzFA,CAAAA;AACAA,QAAAA,SAAS,CAATA,GAAAA,CAAAA,UAAAA,GAA2BI,OAAO,GAAGzH,IAAI,CAACqH,SAAS,CAATA,GAAAA,CAAD,UAAA,EAAP,iBAAO,CAAP,GAAuD,KAAzFA,CAAAA;AACH;AACJ;;AACD,QAAIxC,MAAM,CAANA,SAAAA,GAAAA,MAAAA,GAAJ,CAAA,EAAmC;AAC/B,UAAA,SAAA,EAAe;AACX8C,QAAAA,OAAO,GAAG,CAACN,SAAS,CAATA,GAAAA,CAAAA,GAAAA,GAAoBA,SAAS,CAATA,GAAAA,CAArB,GAAA,IAAVM,6BAAAA;AACAN,QAAAA,SAAS,CAATA,GAAAA,CAAAA,GAAAA,GAAoBA,SAAS,CAATA,GAAAA,CAAAA,GAAAA,GAApBA,OAAAA;AACAA,QAAAA,SAAS,CAATA,GAAAA,CAAAA,GAAAA,GAAoBA,SAAS,CAATA,GAAAA,CAAAA,GAAAA,GAApBA,OAAAA;AACH;AACJ;;AACDA,IAAAA,SAAS,CAATA,GAAAA,CAAAA,UAAAA,GAA2BnE,IAAI,CAA/BmE,qBAAAA;AACAnE,IAAAA,IAAI,CAAJA,OAAAA,GAAAA,SAAAA;AAzPgC,GAAA;AA2PpC0E,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,WAAA,EAAsB;AAChC,QAAI1E,IAAI,GAAR,IAAA;AACA,QAAII,MAAM,GAAGJ,IAAI,CAAjB,OAAA;AACA,QAAI2E,aAAa,GAAGC,WAAW,GAA/B,oBAAA;AACA,QAAIC,UAAU,GAAGzE,MAAM,CAANA,KAAAA,GAAeA,MAAM,CAArBA,IAAAA,GAA6BA,MAAM,CAAnCA,KAAAA,GAAjB,aAAA;;AACA,QAAIX,KAAK,GAAG7C,MAAM,CAACiI,UAAU,GAA7B,WAAkB,CAAlB;;AACA,QAAIpF,KAAK,GAAT,aAAA,EAA2B;AACvBA,MAAAA,KAAK,GAALA,aAAAA;AACH;;AACD,QAAIA,KAAK,GAAT,aAAA,EAA2B;AACvBA,MAAAA,KAAK,GAALA,aAAAA;AACH;;AACD,WAAA,KAAA;AAvQgC,GAAA;AAyQpCqF,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,QAAI9E,IAAI,GAAR,IAAA;AACA,QAAI+E,UAAU,GAAG/E,IAAI,CAAJA,WAAAA,CAAjB,IAAA;;AACA,QAAIgF,YAAY,GAAGhF,IAAI,CAAJA,OAAAA,CAAnB,SAAmBA,EAAnB;;AACA,QAAIiF,YAAY,GAAGD,YAAY,CAA/B,MAAA;AACA,QAAA,QAAA;AACA,QAAA,CAAA;;AACA,QAAI,UAAA,UAAA,IAAwB,cAA5B,UAAA,EAAsD;AAClDE,MAAAA,QAAQ,GAAGlF,IAAI,CAAJA,YAAAA,CAAXkF,YAAWlF,CAAXkF;;AACA,WAAKpH,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAb,YAAA,EAA8BA,CAA9B,EAAA,EAAmC;AAC/BkH,QAAAA,YAAY,CAAZA,CAAY,CAAZA,CAAAA,kBAAAA,CAAmC;AAC/BvF,UAAAA,KAAK,EAD0B,QAAA;AAE/B0F,UAAAA,MAAM,EAAE;AAFuB,SAAnCH;AAIH;AACJ;AAxR+B,GAAA;AA0RpCI,EAAAA,WAAW,EAAE,SAAA,WAAA,GAAW;AACpB,QAAIpF,IAAI,GAAR,IAAA;;AACA,QAAIA,IAAI,CAAJA,iBAAAA,CAAAA,MAAAA,GAAJ,CAAA,EAAuC;AACnCA,MAAAA,IAAI,CAAJA,cAAAA;;AACAA,MAAAA,IAAI,CAAJA,OAAAA,CAAAA,IAAAA;;AACAA,MAAAA,IAAI,CAAJA,YAAAA,CAAAA,MAAAA,CAAyBA,IAAI,CAAJA,SAAAA,CAAzBA,IAAAA;AACH;AAhS+B,GAAA;AAkSpCqF,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAO,CAAC,CAAC,KAAA,iBAAA,CAAT,MAAA;AAnSgC,GAAA;AAqSpCC,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,QAAItF,IAAI,GAAR,IAAA;AACA,QAAIrB,OAAO,GAAGqB,IAAI,CAAlB,WAAA;AACA,QAAIgC,UAAU,GAAGhC,IAAI,CAAJA,kBAAAA,IAA2BA,IAAI,CAAhD,iBAAA;AACA,QAAIuF,OAAO,GAAGvF,IAAI,CAAlB,QAAA;;AACA,QAAI,MAAMgC,UAAU,CAApB,MAAA,EAA6B;AACzB,aAAA,EAAA;AACH;;AACD,QAAIwD,MAAM,GAAGxF,IAAI,CAAjB,cAAA;AACA,QAAI0C,UAAU,GAAG/D,OAAO,CAAxB,UAAA;AACA,QAAI8G,KAAK,GAAGzD,UAAU,CAAVA,CAAU,CAAVA,CAAZ,UAAYA,CAAZ;AACA,QAAI0D,IAAI,GAAG1D,UAAU,CAACA,UAAU,CAAVA,MAAAA,GAAXA,CAAU,CAAVA,CAAX,UAAWA,CAAX;AACA,QAAIvE,GAAG,GAAGN,UAAU,CAACqI,MAAM,CAANA,UAAAA,CAAXrI,CAAWqI,CAAD,CAAVrI,GAAmC6E,UAAU,CAACwD,MAAM,CAANA,UAAAA,CAAXxD,CAAWwD,CAAD,CAAVxD,CAAnC7E,UAAmC6E,CAAnC7E,GAAV,KAAA;AACA,QAAIO,GAAG,GAAGP,UAAU,CAACqI,MAAM,CAANA,UAAAA,CAAXrI,CAAWqI,CAAD,CAAVrI,GAAmC6E,UAAU,CAACwD,MAAM,CAANA,UAAAA,CAAXxD,CAAWwD,CAAD,CAAVxD,CAAnC7E,UAAmC6E,CAAnC7E,GAAV,KAAA;AACA,QAAIwI,cAAc,GAAGJ,OAAO,CAAPA,WAAAA,CAArB,KAAqBA,CAArB;AACA,QAAIK,aAAa,GAAGL,OAAO,CAAPA,WAAAA,CAApB,IAAoBA,CAApB;AACA,QAAIM,YAAY,GAAGN,OAAO,CAAPA,WAAAA,CAAnB,GAAmBA,CAAnB;AACA,QAAIO,YAAY,GAAGP,OAAO,CAAPA,WAAAA,CAAnB,GAAmBA,CAAnB;AACA,QAAIQ,eAAe,GAAG;AAClBvI,MAAAA,UAAU,EADQ,cAAA;AAElBwI,MAAAA,SAAS,EAFS,aAAA;AAGlB5B,MAAAA,QAAQ,EAHU,YAAA;AAIlBE,MAAAA,QAAQ,EAJU,YAAA;AAKlB2B,MAAAA,kBAAkB,EALA,KAAA;AAMlBC,MAAAA,iBAAiB,EANC,IAAA;AAOlBC,MAAAA,gBAAgB,EAPE,GAAA;AAQlBC,MAAAA,gBAAgB,EARE,GAAA;AASlBC,MAAAA,SAAS,EAAE,CAAA,QAAA,EAAA,cAAA,EAAA,MAAA,EAAA,aAAA,EAAA,MAAA,EAAA,YAAA,EAAA,MAAA,EAAA,YAAA;AATO,KAAtB;;AAWA,QAAI,cAAc1H,OAAO,CAAzB,IAAA,EAAgC;AAC5BoH,MAAAA,eAAe,CAAfA,sBAAAA,GAAyCpH,OAAO,CAAhDoH,gBAAAA;AACAA,MAAAA,eAAe,CAAfA,cAAAA,GAAiCR,OAAO,CAAPA,WAAAA,CAAoB5G,OAAO,CAA5DoH,gBAAiCR,CAAjCQ;AACH;;AACD,WAAA,eAAA;AACH;AAvUmC,CAAtB,CAAlB;;AAyUA9I,IAAI,CAAC,CAAA,WAAA,EAAA,WAAA,EAAA,aAAA,EAAA,UAAA,EAAA,UAAA,EAAA,kBAAA,EAAA,kBAAA,EAAA,UAAA,EAAA,WAAA,EAAA,gBAAA,EAAA,aAAA,EAAA,YAAA,EAAA,WAAA,EAAA,MAAA,EAAA,eAAA,EAAA,YAAA,EAAA,kBAAA,EAAA,eAAA,EAAA,YAAA,EAAA,mBAAA,EAAA,UAAA,EAAD,UAAC,CAAD,EAAwU,UAAA,IAAA,EAAe;AACvVmC,EAAAA,WAAW,CAAXA,SAAAA,CAAAA,iBAAAA,CAAAA,IAAAA,IAAAA,SAAAA;AADJnC,CAAI,CAAJA;;AAGAzB,OAAO,CAAPA,kCAAO,CAAPA,CAAAA,aAAAA,EAAAA,WAAAA;;AACA8K,MAAM,CAANA,OAAAA,GAAAA,WAAAA;AACAlH,WAAW,CAAXA,SAAAA,CAAsB5D,OAAO,CAAPA,qBAAO,CAAPA,CAAtB4D,MAAAA","sourcesContent":["/**\r\n * DevExtreme (viz/sparklines/sparkline.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar BaseSparkline = require(\"./base_sparkline\");\r\nvar dataValidatorModule = require(\"../components/data_validator\");\r\nvar seriesModule = require(\"../series/base_series\");\r\nvar MIN_BAR_WIDTH = 1;\r\nvar MAX_BAR_WIDTH = 50;\r\nvar DEFAULT_BAR_INTERVAL = 4;\r\nvar DEFAULT_CANVAS_WIDTH = 250;\r\nvar DEFAULT_CANVAS_HEIGHT = 30;\r\nvar DEFAULT_POINT_BORDER = 2;\r\nvar ALLOWED_TYPES = {\r\n    line: true,\r\n    spline: true,\r\n    stepline: true,\r\n    area: true,\r\n    steparea: true,\r\n    splinearea: true,\r\n    bar: true,\r\n    winloss: true\r\n};\r\nvar _math = Math;\r\nvar _abs = _math.abs;\r\nvar _round = _math.round;\r\nvar _max = _math.max;\r\nvar _min = _math.min;\r\nvar _isFinite = isFinite;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar _map = vizUtils.map;\r\nvar _normalizeEnum = vizUtils.normalizeEnum;\r\nvar _isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar _Number = Number;\r\nvar _String = String;\r\n\r\nfunction findMinMax(data, valField) {\r\n    var firstItem = data[0] || {};\r\n    var firstValue = firstItem[valField] || 0;\r\n    var min = firstValue;\r\n    var max = firstValue;\r\n    var minIndexes = [0];\r\n    var maxIndexes = [0];\r\n    var dataLength = data.length;\r\n    var value;\r\n    var i;\r\n    for (i = 1; i < dataLength; i++) {\r\n        value = data[i][valField];\r\n        if (value < min) {\r\n            min = value;\r\n            minIndexes = [i]\r\n        } else {\r\n            if (value === min) {\r\n                minIndexes.push(i)\r\n            }\r\n        }\r\n        if (value > max) {\r\n            max = value;\r\n            maxIndexes = [i]\r\n        } else {\r\n            if (value === max) {\r\n                maxIndexes.push(i)\r\n            }\r\n        }\r\n    }\r\n    if (max === min) {\r\n        minIndexes = maxIndexes = []\r\n    }\r\n    return {\r\n        minIndexes: minIndexes,\r\n        maxIndexes: maxIndexes\r\n    }\r\n}\r\n\r\nfunction parseNumericDataSource(data, argField, valField, ignoreEmptyPoints) {\r\n    return _map(data, function(dataItem, index) {\r\n        var item = null;\r\n        var isDataNumber;\r\n        var value;\r\n        if (void 0 !== dataItem) {\r\n            item = {};\r\n            isDataNumber = _isFinite(dataItem);\r\n            item[argField] = isDataNumber ? _String(index) : dataItem[argField];\r\n            value = isDataNumber ? dataItem : dataItem[valField];\r\n            item[valField] = null === value ? ignoreEmptyPoints ? void 0 : value : _Number(value);\r\n            item = void 0 !== item[argField] && void 0 !== item[valField] ? item : null\r\n        }\r\n        return item\r\n    })\r\n}\r\n\r\nfunction parseWinlossDataSource(data, argField, valField, target) {\r\n    var lowBarValue = -1;\r\n    var zeroBarValue = 0;\r\n    var highBarValue = 1;\r\n    var delta = 1e-4;\r\n    return _map(data, function(dataItem) {\r\n        var item = {};\r\n        item[argField] = dataItem[argField];\r\n        if (_abs(dataItem[valField] - target) < delta) {\r\n            item[valField] = zeroBarValue\r\n        } else {\r\n            if (dataItem[valField] > target) {\r\n                item[valField] = highBarValue\r\n            } else {\r\n                item[valField] = lowBarValue\r\n            }\r\n        }\r\n        return item\r\n    })\r\n}\r\n\r\nfunction selectPointColor(color, options, index, pointIndexes) {\r\n    if (index === pointIndexes.first || index === pointIndexes.last) {\r\n        color = options.firstLastColor\r\n    }\r\n    if ((pointIndexes.min || []).indexOf(index) >= 0) {\r\n        color = options.minColor\r\n    }\r\n    if ((pointIndexes.max || []).indexOf(index) >= 0) {\r\n        color = options.maxColor\r\n    }\r\n    return color\r\n}\r\n\r\nfunction createLineCustomizeFunction(pointIndexes, options) {\r\n    return function() {\r\n        var color = selectPointColor(void 0, options, this.index, pointIndexes);\r\n        return color ? {\r\n            visible: true,\r\n            border: {\r\n                color: color\r\n            }\r\n        } : {}\r\n    }\r\n}\r\n\r\nfunction createBarCustomizeFunction(pointIndexes, options, winlossData) {\r\n    return function() {\r\n        var index = this.index;\r\n        var isWinloss = \"winloss\" === options.type;\r\n        var target = isWinloss ? options.winlossThreshold : 0;\r\n        var value = isWinloss ? winlossData[index][options.valueField] : this.value;\r\n        var positiveColor = isWinloss ? options.winColor : options.barPositiveColor;\r\n        var negativeColor = isWinloss ? options.lossColor : options.barNegativeColor;\r\n        return {\r\n            color: selectPointColor(value >= target ? positiveColor : negativeColor, options, index, pointIndexes)\r\n        }\r\n    }\r\n}\r\nvar dxSparkline = BaseSparkline.inherit({\r\n    _rootClassPrefix: \"dxsl\",\r\n    _rootClass: \"dxsl-sparkline\",\r\n    _themeSection: \"sparkline\",\r\n    _defaultSize: {\r\n        width: DEFAULT_CANVAS_WIDTH,\r\n        height: DEFAULT_CANVAS_HEIGHT\r\n    },\r\n    _initCore: function() {\r\n        this.callBase();\r\n        this._createSeries()\r\n    },\r\n    _initialChanges: [\"DATA_SOURCE\"],\r\n    _dataSourceChangedHandler: function() {\r\n        this._requestChange([\"UPDATE\"])\r\n    },\r\n    _updateWidgetElements: function() {\r\n        this._updateSeries();\r\n        this.callBase()\r\n    },\r\n    _disposeWidgetElements: function() {\r\n        var that = this;\r\n        that._series && that._series.dispose();\r\n        that._series = that._seriesGroup = that._seriesLabelGroup = null\r\n    },\r\n    _cleanWidgetElements: function() {\r\n        this._seriesGroup.remove();\r\n        this._seriesLabelGroup.remove();\r\n        this._seriesGroup.clear();\r\n        this._seriesLabelGroup.clear()\r\n    },\r\n    _drawWidgetElements: function() {\r\n        if (this._dataIsLoaded()) {\r\n            this._drawSeries();\r\n            this._drawn()\r\n        }\r\n    },\r\n    _getCorrectCanvas: function() {\r\n        var options = this._allOptions;\r\n        var canvas = this._canvas;\r\n        var halfPointSize = options.pointSize && Math.ceil(options.pointSize / 2) + DEFAULT_POINT_BORDER;\r\n        var type = options.type;\r\n        if (\"bar\" !== type && \"winloss\" !== type && (options.showFirstLast || options.showMinMax)) {\r\n            return {\r\n                width: canvas.width,\r\n                height: canvas.height,\r\n                left: canvas.left + halfPointSize,\r\n                right: canvas.right + halfPointSize,\r\n                top: canvas.top + halfPointSize,\r\n                bottom: canvas.bottom + halfPointSize\r\n            }\r\n        }\r\n        return canvas\r\n    },\r\n    _prepareOptions: function() {\r\n        var that = this;\r\n        that._allOptions = that.callBase();\r\n        that._allOptions.type = _normalizeEnum(that._allOptions.type);\r\n        if (!ALLOWED_TYPES[that._allOptions.type]) {\r\n            that._allOptions.type = \"line\"\r\n        }\r\n    },\r\n    _createHtmlElements: function() {\r\n        this._seriesGroup = this._renderer.g().attr({\r\n            \"class\": \"dxsl-series\"\r\n        });\r\n        this._seriesLabelGroup = this._renderer.g().attr({\r\n            \"class\": \"dxsl-series-labels\"\r\n        })\r\n    },\r\n    _createSeries: function() {\r\n        this._series = new seriesModule.Series({\r\n            renderer: this._renderer,\r\n            seriesGroup: this._seriesGroup,\r\n            labelsGroup: this._seriesLabelGroup,\r\n            argumentAxis: this._argumentAxis,\r\n            valueAxis: this._valueAxis\r\n        }, {\r\n            widgetType: \"chart\",\r\n            type: \"line\"\r\n        })\r\n    },\r\n    _updateSeries: function() {\r\n        var that = this;\r\n        var groupsData;\r\n        var seriesOptions;\r\n        var singleSeries = that._series;\r\n        that._prepareDataSource();\r\n        seriesOptions = that._prepareSeriesOptions();\r\n        singleSeries.updateOptions(seriesOptions);\r\n        groupsData = {\r\n            groups: [{\r\n                series: [singleSeries]\r\n            }]\r\n        };\r\n        groupsData.argumentOptions = {\r\n            type: \"bar\" === seriesOptions.type ? \"discrete\" : void 0\r\n        };\r\n        that._simpleDataSource = dataValidatorModule.validateData(that._simpleDataSource, groupsData, that._incidentOccurred, {\r\n            checkTypeForAllData: false,\r\n            convertToAxisDataType: true,\r\n            sortingMethod: true\r\n        })[singleSeries.getArgumentField()];\r\n        seriesOptions.customizePoint = that._getCustomizeFunction();\r\n        singleSeries.updateData(that._simpleDataSource);\r\n        singleSeries.createPoints();\r\n        that._groupsDataCategories = groupsData.categories\r\n    },\r\n    _optionChangesMap: {\r\n        dataSource: \"DATA_SOURCE\"\r\n    },\r\n    _optionChangesOrder: [\"DATA_SOURCE\"],\r\n    _change_DATA_SOURCE: function() {\r\n        this._updateDataSource()\r\n    },\r\n    _prepareDataSource: function() {\r\n        var that = this;\r\n        var options = that._allOptions;\r\n        var argField = options.argumentField;\r\n        var valField = options.valueField;\r\n        var dataSource = that._dataSourceItems() || [];\r\n        var data = parseNumericDataSource(dataSource, argField, valField, that.option(\"ignoreEmptyPoints\"));\r\n        if (\"winloss\" === options.type) {\r\n            that._winlossDataSource = data;\r\n            that._simpleDataSource = parseWinlossDataSource(data, argField, valField, options.winlossThreshold)\r\n        } else {\r\n            that._simpleDataSource = data\r\n        }\r\n    },\r\n    _prepareSeriesOptions: function() {\r\n        var that = this;\r\n        var options = that._allOptions;\r\n        var type = \"winloss\" === options.type ? \"bar\" : options.type;\r\n        return {\r\n            visible: true,\r\n            argumentField: options.argumentField,\r\n            valueField: options.valueField,\r\n            color: options.lineColor,\r\n            width: options.lineWidth,\r\n            widgetType: \"chart\",\r\n            type: type,\r\n            opacity: type.indexOf(\"area\") !== -1 ? that._allOptions.areaOpacity : void 0,\r\n            point: {\r\n                size: options.pointSize,\r\n                symbol: options.pointSymbol,\r\n                border: {\r\n                    visible: true,\r\n                    width: DEFAULT_POINT_BORDER\r\n                },\r\n                color: options.pointColor,\r\n                visible: false,\r\n                hoverStyle: {\r\n                    border: {}\r\n                },\r\n                selectionStyle: {\r\n                    border: {}\r\n                }\r\n            },\r\n            border: {\r\n                color: options.lineColor,\r\n                width: options.lineWidth,\r\n                visible: \"bar\" !== type\r\n            }\r\n        }\r\n    },\r\n    _getCustomizeFunction: function() {\r\n        var that = this;\r\n        var options = that._allOptions;\r\n        var dataSource = that._winlossDataSource || that._simpleDataSource;\r\n        var drawnPointIndexes = that._getExtremumPointsIndexes(dataSource);\r\n        var customizeFunction;\r\n        if (\"winloss\" === options.type || \"bar\" === options.type) {\r\n            customizeFunction = createBarCustomizeFunction(drawnPointIndexes, options, that._winlossDataSource)\r\n        } else {\r\n            customizeFunction = createLineCustomizeFunction(drawnPointIndexes, options)\r\n        }\r\n        return customizeFunction\r\n    },\r\n    _getExtremumPointsIndexes: function(data) {\r\n        var that = this;\r\n        var options = that._allOptions;\r\n        var lastIndex = data.length - 1;\r\n        var indexes = {};\r\n        that._minMaxIndexes = findMinMax(data, options.valueField);\r\n        if (options.showFirstLast) {\r\n            indexes.first = 0;\r\n            indexes.last = lastIndex\r\n        }\r\n        if (options.showMinMax) {\r\n            indexes.min = that._minMaxIndexes.minIndexes;\r\n            indexes.max = that._minMaxIndexes.maxIndexes\r\n        }\r\n        return indexes\r\n    },\r\n    _getStick: function() {\r\n        return {\r\n            stick: \"bar\" !== this._series.type\r\n        }\r\n    },\r\n    _updateRange: function() {\r\n        var that = this;\r\n        var series = that._series;\r\n        var type = series.type;\r\n        var isBarType = \"bar\" === type;\r\n        var isWinlossType = \"winloss\" === type;\r\n        var DEFAULT_VALUE_RANGE_MARGIN = .15;\r\n        var DEFAULT_ARGUMENT_RANGE_MARGIN = .1;\r\n        var WINLOSS_MAX_RANGE = 1;\r\n        var WINLOSS_MIN_RANGE = -1;\r\n        var rangeData = series.getRangeData();\r\n        var minValue = that._allOptions.minValue;\r\n        var hasMinY = _isDefined(minValue) && _isFinite(minValue);\r\n        var maxValue = that._allOptions.maxValue;\r\n        var hasMaxY = _isDefined(maxValue) && _isFinite(maxValue);\r\n        var valCoef;\r\n        var argCoef;\r\n        valCoef = (rangeData.val.max - rangeData.val.min) * DEFAULT_VALUE_RANGE_MARGIN;\r\n        if (isBarType || isWinlossType || \"area\" === type) {\r\n            if (0 !== rangeData.val.min) {\r\n                rangeData.val.min -= valCoef\r\n            }\r\n            if (0 !== rangeData.val.max) {\r\n                rangeData.val.max += valCoef\r\n            }\r\n        } else {\r\n            rangeData.val.min -= valCoef;\r\n            rangeData.val.max += valCoef\r\n        }\r\n        if (hasMinY || hasMaxY) {\r\n            if (hasMinY && hasMaxY) {\r\n                rangeData.val.minVisible = _min(minValue, maxValue);\r\n                rangeData.val.maxVisible = _max(minValue, maxValue)\r\n            } else {\r\n                rangeData.val.minVisible = hasMinY ? _Number(minValue) : void 0;\r\n                rangeData.val.maxVisible = hasMaxY ? _Number(maxValue) : void 0\r\n            }\r\n            if (isWinlossType) {\r\n                rangeData.val.minVisible = hasMinY ? _max(rangeData.val.minVisible, WINLOSS_MIN_RANGE) : void 0;\r\n                rangeData.val.maxVisible = hasMaxY ? _min(rangeData.val.maxVisible, WINLOSS_MAX_RANGE) : void 0\r\n            }\r\n        }\r\n        if (series.getPoints().length > 1) {\r\n            if (isBarType) {\r\n                argCoef = (rangeData.arg.max - rangeData.arg.min) * DEFAULT_ARGUMENT_RANGE_MARGIN;\r\n                rangeData.arg.min = rangeData.arg.min - argCoef;\r\n                rangeData.arg.max = rangeData.arg.max + argCoef\r\n            }\r\n        }\r\n        rangeData.arg.categories = that._groupsDataCategories;\r\n        that._ranges = rangeData\r\n    },\r\n    _getBarWidth: function(pointsCount) {\r\n        var that = this;\r\n        var canvas = that._canvas;\r\n        var intervalWidth = pointsCount * DEFAULT_BAR_INTERVAL;\r\n        var rangeWidth = canvas.width - canvas.left - canvas.right - intervalWidth;\r\n        var width = _round(rangeWidth / pointsCount);\r\n        if (width < MIN_BAR_WIDTH) {\r\n            width = MIN_BAR_WIDTH\r\n        }\r\n        if (width > MAX_BAR_WIDTH) {\r\n            width = MAX_BAR_WIDTH\r\n        }\r\n        return width\r\n    },\r\n    _correctPoints: function() {\r\n        var that = this;\r\n        var seriesType = that._allOptions.type;\r\n        var seriesPoints = that._series.getPoints();\r\n        var pointsLength = seriesPoints.length;\r\n        var barWidth;\r\n        var i;\r\n        if (\"bar\" === seriesType || \"winloss\" === seriesType) {\r\n            barWidth = that._getBarWidth(pointsLength);\r\n            for (i = 0; i < pointsLength; i++) {\r\n                seriesPoints[i].correctCoordinates({\r\n                    width: barWidth,\r\n                    offset: 0\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _drawSeries: function() {\r\n        var that = this;\r\n        if (that._simpleDataSource.length > 0) {\r\n            that._correctPoints();\r\n            that._series.draw();\r\n            that._seriesGroup.append(that._renderer.root)\r\n        }\r\n    },\r\n    _isTooltipEnabled: function() {\r\n        return !!this._simpleDataSource.length\r\n    },\r\n    _getTooltipData: function() {\r\n        var that = this;\r\n        var options = that._allOptions;\r\n        var dataSource = that._winlossDataSource || that._simpleDataSource;\r\n        var tooltip = that._tooltip;\r\n        if (0 === dataSource.length) {\r\n            return {}\r\n        }\r\n        var minMax = that._minMaxIndexes;\r\n        var valueField = options.valueField;\r\n        var first = dataSource[0][valueField];\r\n        var last = dataSource[dataSource.length - 1][valueField];\r\n        var min = _isDefined(minMax.minIndexes[0]) ? dataSource[minMax.minIndexes[0]][valueField] : first;\r\n        var max = _isDefined(minMax.maxIndexes[0]) ? dataSource[minMax.maxIndexes[0]][valueField] : first;\r\n        var formattedFirst = tooltip.formatValue(first);\r\n        var formattedLast = tooltip.formatValue(last);\r\n        var formattedMin = tooltip.formatValue(min);\r\n        var formattedMax = tooltip.formatValue(max);\r\n        var customizeObject = {\r\n            firstValue: formattedFirst,\r\n            lastValue: formattedLast,\r\n            minValue: formattedMin,\r\n            maxValue: formattedMax,\r\n            originalFirstValue: first,\r\n            originalLastValue: last,\r\n            originalMinValue: min,\r\n            originalMaxValue: max,\r\n            valueText: [\"Start:\", formattedFirst, \"End:\", formattedLast, \"Min:\", formattedMin, \"Max:\", formattedMax]\r\n        };\r\n        if (\"winloss\" === options.type) {\r\n            customizeObject.originalThresholdValue = options.winlossThreshold;\r\n            customizeObject.thresholdValue = tooltip.formatValue(options.winlossThreshold)\r\n        }\r\n        return customizeObject\r\n    }\r\n});\r\n_map([\"lineColor\", \"lineWidth\", \"areaOpacity\", \"minColor\", \"maxColor\", \"barPositiveColor\", \"barNegativeColor\", \"winColor\", \"lessColor\", \"firstLastColor\", \"pointSymbol\", \"pointColor\", \"pointSize\", \"type\", \"argumentField\", \"valueField\", \"winlossThreshold\", \"showFirstLast\", \"showMinMax\", \"ignoreEmptyPoints\", \"minValue\", \"maxValue\"], function(name) {\r\n    dxSparkline.prototype._optionChangesMap[name] = \"OPTIONS\"\r\n});\r\nrequire(\"../../core/component_registrator\")(\"dxSparkline\", dxSparkline);\r\nmodule.exports = dxSparkline;\r\ndxSparkline.addPlugin(require(\"../core/data_source\").plugin);\r\n"]},"metadata":{},"sourceType":"module"}