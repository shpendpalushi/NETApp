{"ast":null,"code":"/**\r\n * DevExtreme (ui/list/ui.list.edit.decorator.switchable.slide.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar clickEvent = require(\"../../events/click\");\n\nvar messageLocalization = require(\"../../localization/message\");\n\nvar translator = require(\"../../animation/translator\");\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar feedbackEvents = require(\"../../events/core/emitter.feedback\");\n\nvar EditDecoratorMenuHelperMixin = require(\"./ui.list.edit.decorator_menu_helper\");\n\nvar registerDecorator = require(\"./ui.list.edit.decorator_registry\").register;\n\nvar SwitchableEditDecorator = require(\"./ui.list.edit.decorator.switchable\");\n\nvar fx = require(\"../../animation/fx\");\n\nvar themes = require(\"../themes\");\n\nvar ActionSheet = require(\"../action_sheet\");\n\nvar LIST_EDIT_DECORATOR = \"dxListEditDecorator\";\nvar CLICK_EVENT_NAME = eventUtils.addNamespace(clickEvent.name, LIST_EDIT_DECORATOR);\nvar ACTIVE_EVENT_NAME = eventUtils.addNamespace(feedbackEvents.active, LIST_EDIT_DECORATOR);\nvar SLIDE_MENU_CLASS = \"dx-list-slide-menu\";\nvar SLIDE_MENU_WRAPPER_CLASS = \"dx-list-slide-menu-wrapper\";\nvar SLIDE_MENU_CONTENT_CLASS = \"dx-list-slide-menu-content\";\nvar SLIDE_MENU_BUTTONS_CONTAINER_CLASS = \"dx-list-slide-menu-buttons-container\";\nvar SLIDE_MENU_BUTTONS_CLASS = \"dx-list-slide-menu-buttons\";\nvar SLIDE_MENU_BUTTON_CLASS = \"dx-list-slide-menu-button\";\nvar SLIDE_MENU_BUTTON_MENU_CLASS = \"dx-list-slide-menu-button-menu\";\nvar SLIDE_MENU_BUTTON_DELETE_CLASS = \"dx-list-slide-menu-button-delete\";\nvar SLIDE_MENU_ANIMATION_DURATION = 400;\nvar SLIDE_MENU_ANIMATION_EASING = \"cubic-bezier(0.075, 0.82, 0.165, 1)\";\nregisterDecorator(\"menu\", \"slide\", SwitchableEditDecorator.inherit({\n  _shouldHandleSwipe: true,\n  _init: function _init() {\n    this.callBase.apply(this, arguments);\n    this._$buttonsContainer = $(\"<div>\").addClass(SLIDE_MENU_BUTTONS_CONTAINER_CLASS);\n    eventsEngine.on(this._$buttonsContainer, ACTIVE_EVENT_NAME, noop);\n    this._$buttons = $(\"<div>\").addClass(SLIDE_MENU_BUTTONS_CLASS).appendTo(this._$buttonsContainer);\n\n    this._renderMenu();\n\n    this._renderDeleteButton();\n  },\n  _renderMenu: function _renderMenu() {\n    if (!this._menuEnabled()) {\n      return;\n    }\n\n    var menuItems = this._menuItems();\n\n    if (1 === menuItems.length) {\n      var menuItem = menuItems[0];\n\n      this._renderMenuButton(menuItem.text, function (e) {\n        e.stopPropagation();\n\n        this._fireAction(menuItem);\n      }.bind(this));\n    } else {\n      var $menu = $(\"<div>\").addClass(SLIDE_MENU_CLASS);\n      this._menu = this._list._createComponent($menu, ActionSheet, {\n        showTitle: false,\n        items: menuItems,\n        onItemClick: function (args) {\n          this._fireAction(args.itemData);\n        }.bind(this),\n        integrationOptions: {}\n      });\n      $menu.appendTo(this._list.$element());\n\n      var $menuButton = this._renderMenuButton(messageLocalization.format(\"dxListEditDecorator-more\"), function (e) {\n        e.stopPropagation();\n\n        this._menu.show();\n      }.bind(this));\n\n      this._menu.option(\"target\", $menuButton);\n    }\n  },\n  _renderMenuButton: function _renderMenuButton(text, action) {\n    var $menuButton = $(\"<div>\").addClass(SLIDE_MENU_BUTTON_CLASS).addClass(SLIDE_MENU_BUTTON_MENU_CLASS).text(text);\n\n    this._$buttons.append($menuButton);\n\n    eventsEngine.on($menuButton, CLICK_EVENT_NAME, action);\n    return $menuButton;\n  },\n  _renderDeleteButton: function _renderDeleteButton() {\n    if (!this._deleteEnabled()) {\n      return;\n    }\n\n    var $deleteButton = $(\"<div>\").addClass(SLIDE_MENU_BUTTON_CLASS).addClass(SLIDE_MENU_BUTTON_DELETE_CLASS).text(themes.isMaterial() ? \"\" : messageLocalization.format(\"dxListEditDecorator-delete\"));\n    eventsEngine.on($deleteButton, CLICK_EVENT_NAME, function (e) {\n      e.stopPropagation();\n\n      this._deleteItem();\n    }.bind(this));\n\n    this._$buttons.append($deleteButton);\n  },\n  _fireAction: function _fireAction(menuItem) {\n    this._fireMenuAction($(this._cachedNode), menuItem.action);\n\n    this._cancelDeleteReadyItem();\n  },\n  modifyElement: function modifyElement(config) {\n    this.callBase.apply(this, arguments);\n    var $itemElement = config.$itemElement;\n    $itemElement.addClass(SLIDE_MENU_WRAPPER_CLASS);\n    var $slideMenuContent = $(\"<div>\").addClass(SLIDE_MENU_CONTENT_CLASS);\n    $itemElement.wrapInner($slideMenuContent);\n  },\n  _getDeleteButtonContainer: function _getDeleteButtonContainer() {\n    return this._$buttonsContainer;\n  },\n  handleClick: function handleClick(_, e) {\n    if ($(e.target).closest(\".\" + SLIDE_MENU_CONTENT_CLASS).length) {\n      return this.callBase.apply(this, arguments);\n    }\n\n    return false;\n  },\n  _swipeStartHandler: function _swipeStartHandler($itemElement) {\n    this._enablePositioning($itemElement);\n\n    this._cacheItemData($itemElement);\n\n    this._setPositions(this._getPositions(0));\n  },\n  _swipeUpdateHandler: function _swipeUpdateHandler($itemElement, args) {\n    var rtl = this._isRtlEnabled();\n\n    var signCorrection = rtl ? -1 : 1;\n\n    var isItemReadyToDelete = this._isReadyToDelete($itemElement);\n\n    var moveJustStarted = this._getCurrentPositions().content === this._getStartPositions().content;\n\n    if (moveJustStarted && !isItemReadyToDelete && args.offset * signCorrection > 0) {\n      args.cancel = true;\n      return;\n    }\n\n    var offset = this._cachedItemWidth * args.offset;\n    var startOffset = isItemReadyToDelete ? -this._cachedButtonWidth * signCorrection : 0;\n    var correctedOffset = (offset + startOffset) * signCorrection;\n    var percent = correctedOffset < 0 ? Math.abs((offset + startOffset) / this._cachedButtonWidth) : 0;\n\n    this._setPositions(this._getPositions(percent));\n\n    return true;\n  },\n  _getStartPositions: function _getStartPositions() {\n    var rtl = this._isRtlEnabled();\n\n    var signCorrection = rtl ? -1 : 1;\n    return {\n      content: 0,\n      buttonsContainer: rtl ? -this._cachedButtonWidth : this._cachedItemWidth,\n      buttons: -this._cachedButtonWidth * signCorrection\n    };\n  },\n  _getPositions: function _getPositions(percent) {\n    var rtl = this._isRtlEnabled();\n\n    var signCorrection = rtl ? -1 : 1;\n\n    var startPositions = this._getStartPositions();\n\n    return {\n      content: startPositions.content - percent * this._cachedButtonWidth * signCorrection,\n      buttonsContainer: startPositions.buttonsContainer - Math.min(percent, 1) * this._cachedButtonWidth * signCorrection,\n      buttons: startPositions.buttons + Math.min(percent, 1) * this._cachedButtonWidth * signCorrection\n    };\n  },\n  _getCurrentPositions: function _getCurrentPositions() {\n    return {\n      content: translator.locate(this._$cachedContent).left,\n      buttonsContainer: translator.locate(this._$buttonsContainer).left,\n      buttons: translator.locate(this._$buttons).left\n    };\n  },\n  _setPositions: function _setPositions(positions) {\n    translator.move(this._$cachedContent, {\n      left: positions.content\n    });\n    translator.move(this._$buttonsContainer, {\n      left: positions.buttonsContainer\n    });\n    translator.move(this._$buttons, {\n      left: positions.buttons\n    });\n  },\n  _cacheItemData: function _cacheItemData($itemElement) {\n    if ($itemElement[0] === this._cachedNode) {\n      return;\n    }\n\n    this._$cachedContent = $itemElement.find(\".\" + SLIDE_MENU_CONTENT_CLASS);\n    this._cachedItemWidth = $itemElement.outerWidth();\n    this._cachedButtonWidth = this._cachedButtonWidth || this._$buttons.outerWidth();\n\n    this._$buttonsContainer.width(this._cachedButtonWidth);\n\n    if (this._$cachedContent.length) {\n      this._cachedNode = $itemElement[0];\n    }\n  },\n  _minButtonContainerLeftOffset: function _minButtonContainerLeftOffset() {\n    return this._cachedItemWidth - this._cachedButtonWidth;\n  },\n  _swipeEndHandler: function _swipeEndHandler($itemElement, args) {\n    this._cacheItemData($itemElement);\n\n    var signCorrection = this._isRtlEnabled() ? 1 : -1;\n    var offset = this._cachedItemWidth * args.offset;\n    var endedAtReadyToDelete = !this._isReadyToDelete($itemElement) && offset * signCorrection > .2 * this._cachedButtonWidth;\n    var readyToDelete = args.targetOffset === signCorrection && endedAtReadyToDelete;\n\n    this._toggleDeleteReady($itemElement, readyToDelete);\n\n    return true;\n  },\n  _enablePositioning: function _enablePositioning($itemElement) {\n    fx.stop(this._$cachedContent, true);\n    this.callBase.apply(this, arguments);\n\n    this._$buttonsContainer.appendTo($itemElement);\n  },\n  _disablePositioning: function _disablePositioning() {\n    this.callBase.apply(this, arguments);\n\n    this._$buttonsContainer.detach();\n  },\n  _animatePrepareDeleteReady: function _animatePrepareDeleteReady() {\n    return this._animateToPositions(this._getPositions(1));\n  },\n  _animateForgetDeleteReady: function _animateForgetDeleteReady($itemElement) {\n    this._cacheItemData($itemElement);\n\n    return this._animateToPositions(this._getPositions(0));\n  },\n  _animateToPositions: function _animateToPositions(positions) {\n    var that = this;\n\n    var currentPosition = this._getCurrentPositions();\n\n    var durationTimePart = Math.min(Math.abs(currentPosition.content - positions.content) / this._cachedButtonWidth, 1);\n    return fx.animate(this._$cachedContent, {\n      from: currentPosition,\n      to: positions,\n      easing: SLIDE_MENU_ANIMATION_EASING,\n      duration: SLIDE_MENU_ANIMATION_DURATION * durationTimePart,\n      strategy: \"frame\",\n      draw: function draw(positions) {\n        that._setPositions(positions);\n      }\n    });\n  },\n  dispose: function dispose() {\n    if (this._menu) {\n      this._menu.$element().remove();\n    }\n\n    if (this._$buttonsContainer) {\n      this._$buttonsContainer.remove();\n    }\n\n    this.callBase.apply(this, arguments);\n  }\n}).include(EditDecoratorMenuHelperMixin));","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/list/ui.list.edit.decorator.switchable.slide.js"],"names":["$","require","eventsEngine","noop","clickEvent","messageLocalization","translator","eventUtils","feedbackEvents","EditDecoratorMenuHelperMixin","registerDecorator","SwitchableEditDecorator","fx","themes","ActionSheet","LIST_EDIT_DECORATOR","CLICK_EVENT_NAME","ACTIVE_EVENT_NAME","SLIDE_MENU_CLASS","SLIDE_MENU_WRAPPER_CLASS","SLIDE_MENU_CONTENT_CLASS","SLIDE_MENU_BUTTONS_CONTAINER_CLASS","SLIDE_MENU_BUTTONS_CLASS","SLIDE_MENU_BUTTON_CLASS","SLIDE_MENU_BUTTON_MENU_CLASS","SLIDE_MENU_BUTTON_DELETE_CLASS","SLIDE_MENU_ANIMATION_DURATION","SLIDE_MENU_ANIMATION_EASING","_shouldHandleSwipe","_init","_renderMenu","menuItems","menuItem","e","$menu","showTitle","items","onItemClick","args","integrationOptions","$menuButton","_renderMenuButton","_renderDeleteButton","$deleteButton","_fireAction","modifyElement","$itemElement","config","$slideMenuContent","_getDeleteButtonContainer","handleClick","_swipeStartHandler","_swipeUpdateHandler","rtl","signCorrection","isItemReadyToDelete","moveJustStarted","offset","startOffset","correctedOffset","percent","Math","_getStartPositions","content","buttonsContainer","buttons","_getPositions","startPositions","_getCurrentPositions","left","_setPositions","positions","_cacheItemData","_minButtonContainerLeftOffset","_swipeEndHandler","endedAtReadyToDelete","readyToDelete","_enablePositioning","_disablePositioning","_animatePrepareDeleteReady","_animateForgetDeleteReady","_animateToPositions","that","currentPosition","durationTimePart","from","to","easing","duration","strategy","draw","dispose"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/list/ui.list.edit.decorator.switchable.slide.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar clickEvent = require(\"../../events/click\");\r\nvar messageLocalization = require(\"../../localization/message\");\r\nvar translator = require(\"../../animation/translator\");\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar feedbackEvents = require(\"../../events/core/emitter.feedback\");\r\nvar EditDecoratorMenuHelperMixin = require(\"./ui.list.edit.decorator_menu_helper\");\r\nvar registerDecorator = require(\"./ui.list.edit.decorator_registry\").register;\r\nvar SwitchableEditDecorator = require(\"./ui.list.edit.decorator.switchable\");\r\nvar fx = require(\"../../animation/fx\");\r\nvar themes = require(\"../themes\");\r\nvar ActionSheet = require(\"../action_sheet\");\r\nvar LIST_EDIT_DECORATOR = \"dxListEditDecorator\";\r\nvar CLICK_EVENT_NAME = eventUtils.addNamespace(clickEvent.name, LIST_EDIT_DECORATOR);\r\nvar ACTIVE_EVENT_NAME = eventUtils.addNamespace(feedbackEvents.active, LIST_EDIT_DECORATOR);\r\nvar SLIDE_MENU_CLASS = \"dx-list-slide-menu\";\r\nvar SLIDE_MENU_WRAPPER_CLASS = \"dx-list-slide-menu-wrapper\";\r\nvar SLIDE_MENU_CONTENT_CLASS = \"dx-list-slide-menu-content\";\r\nvar SLIDE_MENU_BUTTONS_CONTAINER_CLASS = \"dx-list-slide-menu-buttons-container\";\r\nvar SLIDE_MENU_BUTTONS_CLASS = \"dx-list-slide-menu-buttons\";\r\nvar SLIDE_MENU_BUTTON_CLASS = \"dx-list-slide-menu-button\";\r\nvar SLIDE_MENU_BUTTON_MENU_CLASS = \"dx-list-slide-menu-button-menu\";\r\nvar SLIDE_MENU_BUTTON_DELETE_CLASS = \"dx-list-slide-menu-button-delete\";\r\nvar SLIDE_MENU_ANIMATION_DURATION = 400;\r\nvar SLIDE_MENU_ANIMATION_EASING = \"cubic-bezier(0.075, 0.82, 0.165, 1)\";\r\nregisterDecorator(\"menu\", \"slide\", SwitchableEditDecorator.inherit({\r\n    _shouldHandleSwipe: true,\r\n    _init: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._$buttonsContainer = $(\"<div>\").addClass(SLIDE_MENU_BUTTONS_CONTAINER_CLASS);\r\n        eventsEngine.on(this._$buttonsContainer, ACTIVE_EVENT_NAME, noop);\r\n        this._$buttons = $(\"<div>\").addClass(SLIDE_MENU_BUTTONS_CLASS).appendTo(this._$buttonsContainer);\r\n        this._renderMenu();\r\n        this._renderDeleteButton()\r\n    },\r\n    _renderMenu: function() {\r\n        if (!this._menuEnabled()) {\r\n            return\r\n        }\r\n        var menuItems = this._menuItems();\r\n        if (1 === menuItems.length) {\r\n            var menuItem = menuItems[0];\r\n            this._renderMenuButton(menuItem.text, function(e) {\r\n                e.stopPropagation();\r\n                this._fireAction(menuItem)\r\n            }.bind(this))\r\n        } else {\r\n            var $menu = $(\"<div>\").addClass(SLIDE_MENU_CLASS);\r\n            this._menu = this._list._createComponent($menu, ActionSheet, {\r\n                showTitle: false,\r\n                items: menuItems,\r\n                onItemClick: function(args) {\r\n                    this._fireAction(args.itemData)\r\n                }.bind(this),\r\n                integrationOptions: {}\r\n            });\r\n            $menu.appendTo(this._list.$element());\r\n            var $menuButton = this._renderMenuButton(messageLocalization.format(\"dxListEditDecorator-more\"), function(e) {\r\n                e.stopPropagation();\r\n                this._menu.show()\r\n            }.bind(this));\r\n            this._menu.option(\"target\", $menuButton)\r\n        }\r\n    },\r\n    _renderMenuButton: function(text, action) {\r\n        var $menuButton = $(\"<div>\").addClass(SLIDE_MENU_BUTTON_CLASS).addClass(SLIDE_MENU_BUTTON_MENU_CLASS).text(text);\r\n        this._$buttons.append($menuButton);\r\n        eventsEngine.on($menuButton, CLICK_EVENT_NAME, action);\r\n        return $menuButton\r\n    },\r\n    _renderDeleteButton: function() {\r\n        if (!this._deleteEnabled()) {\r\n            return\r\n        }\r\n        var $deleteButton = $(\"<div>\").addClass(SLIDE_MENU_BUTTON_CLASS).addClass(SLIDE_MENU_BUTTON_DELETE_CLASS).text(themes.isMaterial() ? \"\" : messageLocalization.format(\"dxListEditDecorator-delete\"));\r\n        eventsEngine.on($deleteButton, CLICK_EVENT_NAME, function(e) {\r\n            e.stopPropagation();\r\n            this._deleteItem()\r\n        }.bind(this));\r\n        this._$buttons.append($deleteButton)\r\n    },\r\n    _fireAction: function(menuItem) {\r\n        this._fireMenuAction($(this._cachedNode), menuItem.action);\r\n        this._cancelDeleteReadyItem()\r\n    },\r\n    modifyElement: function(config) {\r\n        this.callBase.apply(this, arguments);\r\n        var $itemElement = config.$itemElement;\r\n        $itemElement.addClass(SLIDE_MENU_WRAPPER_CLASS);\r\n        var $slideMenuContent = $(\"<div>\").addClass(SLIDE_MENU_CONTENT_CLASS);\r\n        $itemElement.wrapInner($slideMenuContent)\r\n    },\r\n    _getDeleteButtonContainer: function() {\r\n        return this._$buttonsContainer\r\n    },\r\n    handleClick: function(_, e) {\r\n        if ($(e.target).closest(\".\" + SLIDE_MENU_CONTENT_CLASS).length) {\r\n            return this.callBase.apply(this, arguments)\r\n        }\r\n        return false\r\n    },\r\n    _swipeStartHandler: function($itemElement) {\r\n        this._enablePositioning($itemElement);\r\n        this._cacheItemData($itemElement);\r\n        this._setPositions(this._getPositions(0))\r\n    },\r\n    _swipeUpdateHandler: function($itemElement, args) {\r\n        var rtl = this._isRtlEnabled();\r\n        var signCorrection = rtl ? -1 : 1;\r\n        var isItemReadyToDelete = this._isReadyToDelete($itemElement);\r\n        var moveJustStarted = this._getCurrentPositions().content === this._getStartPositions().content;\r\n        if (moveJustStarted && !isItemReadyToDelete && args.offset * signCorrection > 0) {\r\n            args.cancel = true;\r\n            return\r\n        }\r\n        var offset = this._cachedItemWidth * args.offset;\r\n        var startOffset = isItemReadyToDelete ? -this._cachedButtonWidth * signCorrection : 0;\r\n        var correctedOffset = (offset + startOffset) * signCorrection;\r\n        var percent = correctedOffset < 0 ? Math.abs((offset + startOffset) / this._cachedButtonWidth) : 0;\r\n        this._setPositions(this._getPositions(percent));\r\n        return true\r\n    },\r\n    _getStartPositions: function() {\r\n        var rtl = this._isRtlEnabled();\r\n        var signCorrection = rtl ? -1 : 1;\r\n        return {\r\n            content: 0,\r\n            buttonsContainer: rtl ? -this._cachedButtonWidth : this._cachedItemWidth,\r\n            buttons: -this._cachedButtonWidth * signCorrection\r\n        }\r\n    },\r\n    _getPositions: function(percent) {\r\n        var rtl = this._isRtlEnabled();\r\n        var signCorrection = rtl ? -1 : 1;\r\n        var startPositions = this._getStartPositions();\r\n        return {\r\n            content: startPositions.content - percent * this._cachedButtonWidth * signCorrection,\r\n            buttonsContainer: startPositions.buttonsContainer - Math.min(percent, 1) * this._cachedButtonWidth * signCorrection,\r\n            buttons: startPositions.buttons + Math.min(percent, 1) * this._cachedButtonWidth * signCorrection\r\n        }\r\n    },\r\n    _getCurrentPositions: function() {\r\n        return {\r\n            content: translator.locate(this._$cachedContent).left,\r\n            buttonsContainer: translator.locate(this._$buttonsContainer).left,\r\n            buttons: translator.locate(this._$buttons).left\r\n        }\r\n    },\r\n    _setPositions: function(positions) {\r\n        translator.move(this._$cachedContent, {\r\n            left: positions.content\r\n        });\r\n        translator.move(this._$buttonsContainer, {\r\n            left: positions.buttonsContainer\r\n        });\r\n        translator.move(this._$buttons, {\r\n            left: positions.buttons\r\n        })\r\n    },\r\n    _cacheItemData: function($itemElement) {\r\n        if ($itemElement[0] === this._cachedNode) {\r\n            return\r\n        }\r\n        this._$cachedContent = $itemElement.find(\".\" + SLIDE_MENU_CONTENT_CLASS);\r\n        this._cachedItemWidth = $itemElement.outerWidth();\r\n        this._cachedButtonWidth = this._cachedButtonWidth || this._$buttons.outerWidth();\r\n        this._$buttonsContainer.width(this._cachedButtonWidth);\r\n        if (this._$cachedContent.length) {\r\n            this._cachedNode = $itemElement[0]\r\n        }\r\n    },\r\n    _minButtonContainerLeftOffset: function() {\r\n        return this._cachedItemWidth - this._cachedButtonWidth\r\n    },\r\n    _swipeEndHandler: function($itemElement, args) {\r\n        this._cacheItemData($itemElement);\r\n        var signCorrection = this._isRtlEnabled() ? 1 : -1;\r\n        var offset = this._cachedItemWidth * args.offset;\r\n        var endedAtReadyToDelete = !this._isReadyToDelete($itemElement) && offset * signCorrection > .2 * this._cachedButtonWidth;\r\n        var readyToDelete = args.targetOffset === signCorrection && endedAtReadyToDelete;\r\n        this._toggleDeleteReady($itemElement, readyToDelete);\r\n        return true\r\n    },\r\n    _enablePositioning: function($itemElement) {\r\n        fx.stop(this._$cachedContent, true);\r\n        this.callBase.apply(this, arguments);\r\n        this._$buttonsContainer.appendTo($itemElement)\r\n    },\r\n    _disablePositioning: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._$buttonsContainer.detach()\r\n    },\r\n    _animatePrepareDeleteReady: function() {\r\n        return this._animateToPositions(this._getPositions(1))\r\n    },\r\n    _animateForgetDeleteReady: function($itemElement) {\r\n        this._cacheItemData($itemElement);\r\n        return this._animateToPositions(this._getPositions(0))\r\n    },\r\n    _animateToPositions: function(positions) {\r\n        var that = this;\r\n        var currentPosition = this._getCurrentPositions();\r\n        var durationTimePart = Math.min(Math.abs(currentPosition.content - positions.content) / this._cachedButtonWidth, 1);\r\n        return fx.animate(this._$cachedContent, {\r\n            from: currentPosition,\r\n            to: positions,\r\n            easing: SLIDE_MENU_ANIMATION_EASING,\r\n            duration: SLIDE_MENU_ANIMATION_DURATION * durationTimePart,\r\n            strategy: \"frame\",\r\n            draw: function(positions) {\r\n                that._setPositions(positions)\r\n            }\r\n        })\r\n    },\r\n    dispose: function() {\r\n        if (this._menu) {\r\n            this._menu.$element().remove()\r\n        }\r\n        if (this._$buttonsContainer) {\r\n            this._$buttonsContainer.remove()\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    }\r\n}).include(EditDecoratorMenuHelperMixin));\r\n"]},"metadata":{},"sourceType":"module"}