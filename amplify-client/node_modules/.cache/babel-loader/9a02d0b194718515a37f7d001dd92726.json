{"ast":null,"code":"/**\r\n * DevExtreme (viz/chart.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _common = require(\"../core/utils/common\");\n\nvar _extend2 = require(\"../core/utils/extend\");\n\nvar _array = require(\"../core/utils/array\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _component_registrator = require(\"../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _utils = require(\"./core/utils\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _math = require(\"../core/utils/math\");\n\nvar _base_chart = require(\"./chart_components/base_chart\");\n\nvar _layout_manager = require(\"./chart_components/layout_manager\");\n\nvar _layout_manager2 = _interopRequireDefault(_layout_manager);\n\nvar _multi_axes_synchronizer = require(\"./chart_components/multi_axes_synchronizer\");\n\nvar _multi_axes_synchronizer2 = _interopRequireDefault(_multi_axes_synchronizer);\n\nvar _advanced_chart = require(\"./chart_components/advanced_chart\");\n\nvar _scroll_bar = require(\"./chart_components/scroll_bar\");\n\nvar _scroll_bar2 = _interopRequireDefault(_scroll_bar);\n\nvar _crosshair = require(\"./chart_components/crosshair\");\n\nvar _crosshair2 = _interopRequireDefault(_crosshair);\n\nvar _range_data_calculator = require(\"./series/helpers/range_data_calculator\");\n\nvar _range_data_calculator2 = _interopRequireDefault(_range_data_calculator);\n\nvar _range = require(\"./translators/range\");\n\nvar _range2 = _interopRequireDefault(_range);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DEFAULT_PANE_NAME = \"default\";\nvar VISUAL_RANGE = \"VISUAL_RANGE\";\nvar DEFAULT_PANES = [{\n  name: DEFAULT_PANE_NAME,\n  border: {}\n}];\nvar _isArray = Array.isArray;\n\nfunction getFirstAxisNameForPane(axes, paneName, defaultPane) {\n  var result;\n\n  for (var i = 0; i < axes.length; i++) {\n    if (axes[i].pane === paneName || void 0 === axes[i].pane && paneName === defaultPane) {\n      result = axes[i].name;\n      break;\n    }\n  }\n\n  if (!result) {\n    result = axes[0].name;\n  }\n\n  return result;\n}\n\nfunction changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility) {\n  var gridOpt = axis.getOptions().grid;\n  var minorGridOpt = axis.getOptions().minorGrid;\n  gridOpt.visible = gridVisibility;\n  minorGridOpt && (minorGridOpt.visible = minorGridVisibility);\n}\n\nfunction hideGridsOnNonFirstValueAxisForPane(axesForPane) {\n  var axisShown = false;\n  var hiddenStubAxis = [];\n  var minorGridVisibility = axesForPane.some(function (axis) {\n    var minorGridOptions = axis.getOptions().minorGrid;\n    return minorGridOptions && minorGridOptions.visible;\n  });\n  var gridVisibility = axesForPane.some(function (axis) {\n    var gridOptions = axis.getOptions().grid;\n    return gridOptions && gridOptions.visible;\n  });\n\n  if (axesForPane.length > 1) {\n    axesForPane.forEach(function (axis) {\n      var gridOpt = axis.getOptions().grid;\n\n      if (axisShown) {\n        changeVisibilityAxisGrids(axis, false, false);\n      } else {\n        if (gridOpt && gridOpt.visible) {\n          if (axis.getTranslator().getBusinessRange().isEmpty()) {\n            changeVisibilityAxisGrids(axis, false, false);\n            hiddenStubAxis.push(axis);\n          } else {\n            axisShown = true;\n            changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility);\n          }\n        }\n      }\n    });\n    !axisShown && hiddenStubAxis.length && changeVisibilityAxisGrids(hiddenStubAxis[0], gridVisibility, minorGridVisibility);\n  }\n}\n\nfunction findAxisOptions(valueAxes, valueAxesOptions, axisName) {\n  var result;\n  var axInd;\n\n  for (axInd = 0; axInd < valueAxesOptions.length; axInd++) {\n    if (valueAxesOptions[axInd].name === axisName) {\n      result = valueAxesOptions[axInd];\n      result.priority = axInd;\n      break;\n    }\n  }\n\n  if (!result) {\n    for (axInd = 0; axInd < valueAxes.length; axInd++) {\n      if (valueAxes[axInd].name === axisName) {\n        result = valueAxes[axInd].getOptions();\n        result.priority = valueAxes[axInd].priority;\n        break;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction findAxis(paneName, axisName, axes) {\n  var axis;\n  var i;\n\n  for (i = 0; i < axes.length; i++) {\n    axis = axes[i];\n\n    if (axis.name === axisName && axis.pane === paneName) {\n      return axis;\n    }\n  }\n\n  if (paneName) {\n    return findAxis(void 0, axisName, axes);\n  }\n}\n\nfunction compareAxes(a, b) {\n  return a.priority - b.priority;\n}\n\nfunction doesPaneExist(panes, paneName) {\n  var found = false;\n  (0, _iterator.each)(panes, function (_, pane) {\n    if (pane.name === paneName) {\n      found = true;\n      return false;\n    }\n  });\n  return found;\n}\n\nvar prepareSegmentRectPoints = function prepareSegmentRectPoints(left, top, width, height, borderOptions) {\n  var maxSW = ~~((width < height ? width : height) / 2);\n  var sw = borderOptions.width || 0;\n  var newSW = sw < maxSW ? sw : maxSW;\n  left += newSW / 2;\n  top += newSW / 2;\n  width -= newSW;\n  height -= newSW;\n  var right = left + width;\n  var bottom = top + height;\n  var points = [];\n  var segments = [];\n  var segmentSequence;\n  var visiblyOpt = 0;\n  var prevSegmentVisibility = 0;\n  var allSegment = {\n    top: [[left, top], [right, top]],\n    right: [[right, top], [right, bottom]],\n    bottom: [[right, bottom], [left, bottom]],\n    left: [[left, bottom], [left, top]]\n  };\n  (0, _iterator.each)(allSegment, function (seg) {\n    var visibility = !!borderOptions[seg];\n    visiblyOpt = 2 * visiblyOpt + ~~visibility;\n  });\n\n  switch (visiblyOpt) {\n    case 13:\n    case 9:\n      segmentSequence = [\"left\", \"top\", \"right\", \"bottom\"];\n      break;\n\n    case 11:\n      segmentSequence = [\"bottom\", \"left\", \"top\", \"right\"];\n      break;\n\n    default:\n      segmentSequence = [\"top\", \"right\", \"bottom\", \"left\"];\n  }\n\n  (0, _iterator.each)(segmentSequence, function (_, seg) {\n    var segmentVisibility = !!borderOptions[seg];\n\n    if (!prevSegmentVisibility && segments.length) {\n      points.push(segments);\n      segments = [];\n    }\n\n    if (segmentVisibility) {\n      (0, _iterator.each)(allSegment[seg].slice(prevSegmentVisibility), function (_, segment) {\n        segments = segments.concat(segment);\n      });\n    }\n\n    prevSegmentVisibility = ~~segmentVisibility;\n  });\n  segments.length && points.push(segments);\n  1 === points.length && (points = points[0]);\n  return {\n    points: points,\n    pathType: 15 === visiblyOpt ? \"area\" : \"line\"\n  };\n};\n\nfunction accumulate(field, src1, src2, auxSpacing) {\n  var val1 = src1[field] || 0;\n  var val2 = src2[field] || 0;\n  return val1 + val2 + (val1 && val2 ? auxSpacing : 0);\n}\n\nfunction pickMax(field, src1, src2) {\n  return pickMaxValue(src1[field], src2[field]);\n}\n\nfunction pickMaxValue(val1, val2) {\n  return Math.max(val1 || 0, val2 || 0);\n}\n\nfunction getAxisMargins(axis) {\n  return axis.getMargins();\n}\n\nfunction getHorizontalAxesMargins(axes, getMarginsFunc) {\n  return axes.reduce(function (margins, axis) {\n    var axisMargins = getMarginsFunc(axis);\n    var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\n    var spacing = axis.getMultipleAxesSpacing();\n    paneMargins.top = accumulate(\"top\", paneMargins, axisMargins, spacing);\n    paneMargins.bottom = accumulate(\"bottom\", paneMargins, axisMargins, spacing);\n    paneMargins.left = pickMax(\"left\", paneMargins, axisMargins);\n    paneMargins.right = pickMax(\"right\", paneMargins, axisMargins);\n    margins.top = pickMax(\"top\", paneMargins, margins);\n    margins.bottom = pickMax(\"bottom\", paneMargins, margins);\n    margins.left = pickMax(\"left\", paneMargins, margins);\n    margins.right = pickMax(\"right\", paneMargins, margins);\n    return margins;\n  }, {\n    panes: {}\n  });\n}\n\nfunction getVerticalAxesMargins(axes) {\n  return axes.reduce(function (margins, axis) {\n    var axisMargins = axis.getMargins();\n    var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\n    var spacing = axis.getMultipleAxesSpacing();\n    paneMargins.top = pickMax(\"top\", paneMargins, axisMargins);\n    paneMargins.bottom = pickMax(\"bottom\", paneMargins, axisMargins);\n    paneMargins.left = accumulate(\"left\", paneMargins, axisMargins, spacing);\n    paneMargins.right = accumulate(\"right\", paneMargins, axisMargins, spacing);\n    margins.top = pickMax(\"top\", paneMargins, margins);\n    margins.bottom = pickMax(\"bottom\", paneMargins, margins);\n    margins.left = pickMax(\"left\", paneMargins, margins);\n    margins.right = pickMax(\"right\", paneMargins, margins);\n    return margins;\n  }, {\n    panes: {}\n  });\n}\n\nfunction performActionOnAxes(axes, action, actionArgument1, actionArgument2, actionArgument3) {\n  axes.forEach(function (axis) {\n    axis[action](actionArgument1 && actionArgument1[axis.pane], actionArgument2 && actionArgument2[axis.pane] || actionArgument2, actionArgument3);\n  });\n}\n\nfunction shrinkCanvases(isRotated, canvases, sizes, verticalMargins, horizontalMargins) {\n  function getMargin(side, margins, pane) {\n    var m = (isRotated ? [\"left\", \"right\"] : [\"top\", \"bottom\"]).indexOf(side) === -1 ? margins : margins.panes[pane] || {};\n    return m[side];\n  }\n\n  function getMaxMargin(side, margins1, margins2, pane) {\n    return pickMaxValue(getMargin(side, margins1, pane), getMargin(side, margins2, pane));\n  }\n\n  var getOriginalField = function getOriginalField(field) {\n    return \"original\".concat(field[0].toUpperCase()).concat(field.slice(1));\n  };\n\n  function shrink(canvases, paneNames, sizeField, startMargin, endMargin, oppositeMargins) {\n    paneNames = paneNames.sort(function (p1, p2) {\n      return canvases[p2][startMargin] - canvases[p1][startMargin];\n    });\n    paneNames.forEach(function (pane) {\n      var canvas = canvases[pane];\n      oppositeMargins.forEach(function (margin) {\n        canvas[margin] = canvas[getOriginalField(margin)] + getMaxMargin(margin, verticalMargins, horizontalMargins, pane);\n      });\n    });\n    var firstPane = canvases[paneNames[0]];\n    var emptySpace = paneNames.reduce(function (space, paneName) {\n      space -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, paneName) + getMaxMargin(endMargin, verticalMargins, horizontalMargins, paneName);\n      return space;\n    }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - canvases[paneNames[paneNames.length - 1]][getOriginalField(startMargin)]) - _utils.PANE_PADDING * (paneNames.length - 1);\n    var totalCustomSpace = Object.keys(sizes).reduce(function (prev, key) {\n      return prev + (sizes[key].unit ? sizes[key].height : 0);\n    }, 0);\n    emptySpace -= totalCustomSpace;\n    paneNames.reduce(function (offset, pane) {\n      var canvas = canvases[pane];\n      var paneSize = sizes[pane];\n      offset -= getMaxMargin(endMargin, verticalMargins, horizontalMargins, pane);\n      canvas[endMargin] = firstPane[sizeField] - offset;\n      offset -= paneSize.unit ? paneSize.height : Math.floor(emptySpace * paneSize.height);\n      canvas[startMargin] = offset;\n      offset -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, pane) + _utils.PANE_PADDING;\n      return offset;\n    }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - (emptySpace < 0 ? emptySpace : 0));\n  }\n\n  var paneNames = Object.keys(canvases);\n\n  if (!isRotated) {\n    shrink(canvases, paneNames, \"height\", \"top\", \"bottom\", [\"left\", \"right\"]);\n  } else {\n    shrink(canvases, paneNames, \"width\", \"left\", \"right\", [\"top\", \"bottom\"]);\n  }\n\n  return canvases;\n}\n\nfunction drawAxesWithTicks(axes, condition, canvases, panesBorderOptions) {\n  if (condition) {\n    performActionOnAxes(axes, \"createTicks\", canvases);\n\n    _multi_axes_synchronizer2.default.synchronize(axes);\n  }\n\n  performActionOnAxes(axes, \"draw\", !condition && canvases, panesBorderOptions);\n}\n\nfunction shiftAxis(side1, side2) {\n  var shifts = {};\n  return function (axis) {\n    var shift = shifts[axis.pane] = shifts[axis.pane] || {\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0\n    };\n    var spacing = axis.getMultipleAxesSpacing();\n    var margins = axis.getMargins();\n    axis.shift(shift);\n    shift[side1] = accumulate(side1, shift, margins, spacing);\n    shift[side2] = accumulate(side2, shift, margins, spacing);\n  };\n}\n\nfunction getCommonSize(side, margins) {\n  var size = 0;\n  var pane;\n  var paneMargins;\n\n  for (pane in margins.panes) {\n    paneMargins = margins.panes[pane];\n    size += \"height\" === side ? paneMargins.top + paneMargins.bottom : paneMargins.left + paneMargins.right;\n  }\n\n  return size;\n}\n\nfunction checkUsedSpace(sizeShortage, side, axes, getMarginFunc) {\n  var size = 0;\n\n  if (sizeShortage[side] > 0) {\n    size = getCommonSize(side, getMarginFunc(axes, getAxisMargins));\n    performActionOnAxes(axes, \"hideTitle\");\n    sizeShortage[side] -= size - getCommonSize(side, getMarginFunc(axes, getAxisMargins));\n  }\n\n  if (sizeShortage[side] > 0) {\n    performActionOnAxes(axes, \"hideOuterElements\");\n  }\n}\n\nfunction axisAnimationEnabled(drawOptions, series) {\n  var pointsCount = series.reduce(function (sum, s) {\n    return sum += s.getPoints().length;\n  }, 0) / series.length;\n  return drawOptions.animate && pointsCount <= drawOptions.animationPointsLimit;\n}\n\nvar dxChart = _advanced_chart.AdvancedChart.inherit({\n  _themeSection: \"chart\",\n  _fontFields: [\"crosshair.label.font\"],\n  _setDeprecatedOptions: function _setDeprecatedOptions() {\n    this.callBase.apply(this, arguments);\n    (0, _extend2.extend)(this._deprecatedOptions, {\n      useAggregation: {\n        since: \"18.1\",\n        message: \"Use the 'commonSeriesSettings.aggregation.enabled' or 'series.aggregation.enabled' option instead\"\n      },\n      \"argumentAxis.min\": {\n        since: \"18.2\",\n        message: \"Use the 'argumentAxis.visualRange' option instead\"\n      },\n      \"argumentAxis.max\": {\n        since: \"18.2\",\n        message: \"Use the 'argumentAxis.visualRange' option instead\"\n      },\n      \"valueAxis.min\": {\n        since: \"18.2\",\n        message: \"Use the 'valueAxis.visualRange' option instead\"\n      },\n      \"valueAxis.max\": {\n        since: \"18.2\",\n        message: \"Use the 'valueAxis.visualRange' option instead\"\n      },\n      zoomingMode: {\n        since: \"18.2\",\n        message: \"Use the 'zoomAndPan' option instead\"\n      },\n      scrollingMode: {\n        since: \"18.2\",\n        message: \"Use the 'zoomAndPan' option instead\"\n      }\n    });\n  },\n  _initCore: function _initCore() {\n    this.paneAxis = {};\n    this.callBase();\n  },\n  _correctAxes: function _correctAxes() {\n    this._correctValueAxes(true);\n  },\n  _getExtraOptions: _common.noop,\n  _createPanes: function _createPanes() {\n    var that = this;\n    var panes = that.option(\"panes\");\n    var panesNameCounter = 0;\n    var defaultPane;\n\n    if (!panes || _isArray(panes) && !panes.length) {\n      panes = DEFAULT_PANES;\n    }\n\n    that.callBase();\n    defaultPane = that.option(\"defaultPane\");\n    panes = (0, _extend2.extend)(true, [], _isArray(panes) ? panes : [panes]);\n    (0, _iterator.each)(panes, function (_, pane) {\n      pane.name = !(0, _type.isDefined)(pane.name) ? DEFAULT_PANE_NAME + panesNameCounter++ : pane.name;\n    });\n\n    if ((0, _type.isDefined)(defaultPane)) {\n      if (!doesPaneExist(panes, defaultPane)) {\n        that._incidentOccurred(\"W2101\", [defaultPane]);\n\n        defaultPane = panes[panes.length - 1].name;\n      }\n    } else {\n      defaultPane = panes[panes.length - 1].name;\n    }\n\n    that.defaultPane = defaultPane;\n    panes = that._isRotated() ? panes.reverse() : panes;\n    return panes;\n  },\n  _getAxisRenderingOptions: function _getAxisRenderingOptions() {\n    return {\n      axisType: \"xyAxes\",\n      drawingType: \"linear\"\n    };\n  },\n  _prepareAxisOptions: function _prepareAxisOptions(typeSelector, userOptions, rotated) {\n    return {\n      isHorizontal: \"argumentAxis\" === typeSelector !== rotated,\n      containerColor: this._themeManager.getOptions(\"containerBackgroundColor\")\n    };\n  },\n  _checkPaneName: function _checkPaneName(seriesTheme) {\n    var paneList = (0, _utils.map)(this.panes, function (pane) {\n      return pane.name;\n    });\n    seriesTheme.pane = seriesTheme.pane || this.defaultPane;\n    return (0, _array.inArray)(seriesTheme.pane, paneList) !== -1;\n  },\n  _getValueAxis: function _getValueAxis(paneName, axisName) {\n    var that = this;\n    var valueAxes = that._valueAxes;\n    var valueAxisOptions = that.option(\"valueAxis\") || {};\n    var valueAxesOptions = _isArray(valueAxisOptions) ? valueAxisOptions : [valueAxisOptions];\n\n    var rotated = that._isRotated();\n\n    var crosshairMargins = that._getCrosshairMargins();\n\n    var axisOptions;\n    var axis;\n    axisName = axisName || getFirstAxisNameForPane(valueAxes, paneName, that.defaultPane);\n    axis = findAxis(paneName, axisName, valueAxes);\n\n    if (!axis) {\n      axisOptions = findAxisOptions(valueAxes, valueAxesOptions, axisName);\n\n      if (!axisOptions) {\n        that._incidentOccurred(\"W2102\", [axisName]);\n\n        axisOptions = {\n          name: axisName,\n          priority: valueAxes.length\n        };\n      }\n\n      axis = that._createAxis(false, that._populateAxesOptions(\"valueAxis\", axisOptions, {\n        pane: paneName,\n        name: axisName,\n        optionPath: _isArray(valueAxisOptions) ? \"valueAxis[\".concat(axisOptions.priority, \"]\") : \"valueAxis\",\n        crosshairMargin: rotated ? crosshairMargins.y : crosshairMargins.x\n      }, rotated));\n      axis.applyVisualRangeSetter(that._getVisualRangeSetter());\n      valueAxes.push(axis);\n    }\n\n    axis.setPane(paneName);\n    return axis;\n  },\n  _correctValueAxes: function _correctValueAxes(needHideGrids) {\n    var that = this;\n\n    var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\n\n    var valueAxes = that._valueAxes;\n    var paneWithAxis = {};\n    that.series.forEach(function (series) {\n      var axis = series.getValueAxis();\n      paneWithAxis[axis.pane] = true;\n    });\n    that.panes.forEach(function (pane) {\n      var paneName = pane.name;\n\n      if (!paneWithAxis[paneName]) {\n        that._getValueAxis(paneName);\n      }\n\n      if (needHideGrids && synchronizeMultiAxes) {\n        hideGridsOnNonFirstValueAxisForPane(valueAxes.filter(function (axis) {\n          return axis.pane === paneName;\n        }));\n      }\n    });\n    that._valueAxes = valueAxes.filter(function (axis) {\n      if (!axis.pane) {\n        axis.setPane(that.defaultPane);\n      }\n\n      return doesPaneExist(that.panes, axis.pane);\n    }).sort(compareAxes);\n    var defaultAxis = this.getValueAxis();\n\n    that._valueAxes.forEach(function (axis) {\n      var optionPath = axis.getOptions().optionPath;\n\n      if (optionPath) {\n        var axesWithSamePath = that._valueAxes.filter(function (a) {\n          return a.getOptions().optionPath === optionPath;\n        });\n\n        if (axesWithSamePath.length > 1) {\n          if (axesWithSamePath.some(function (a) {\n            return a === defaultAxis;\n          })) {\n            axesWithSamePath.forEach(function (a) {\n              if (a !== defaultAxis) {\n                a.getOptions().optionPath = null;\n              }\n            });\n          } else {\n            axesWithSamePath.forEach(function (a, i) {\n              if (0 !== i) {\n                a.getOptions().optionPath = null;\n              }\n            });\n          }\n        }\n      }\n    });\n  },\n  _getSeriesForPane: function _getSeriesForPane(paneName) {\n    var paneSeries = [];\n    (0, _iterator.each)(this.series, function (_, oneSeries) {\n      if (oneSeries.pane === paneName) {\n        paneSeries.push(oneSeries);\n      }\n    });\n    return paneSeries;\n  },\n  _createPanesBorderOptions: function _createPanesBorderOptions() {\n    var commonBorderOptions = this._themeManager.getOptions(\"commonPaneSettings\").border;\n\n    var panesBorderOptions = {};\n    this.panes.forEach(function (pane) {\n      return panesBorderOptions[pane.name] = (0, _extend2.extend)(true, {}, commonBorderOptions, pane.border);\n    });\n    return panesBorderOptions;\n  },\n  _createScrollBar: function _createScrollBar() {\n    var that = this;\n    var scrollBarOptions = that._themeManager.getOptions(\"scrollBar\") || {};\n    var scrollBarGroup = that._scrollBarGroup;\n\n    if (scrollBarOptions.visible) {\n      scrollBarOptions.rotated = that._isRotated();\n      that._scrollBar = (that._scrollBar || new _scroll_bar2.default.ScrollBar(that._renderer, scrollBarGroup)).update(scrollBarOptions);\n    } else {\n      scrollBarGroup.linkRemove();\n      that._scrollBar && that._scrollBar.dispose();\n      that._scrollBar = null;\n    }\n  },\n  _prepareToRender: function _prepareToRender(drawOptions) {\n    var panesBorderOptions = this._createPanesBorderOptions();\n\n    this._createPanesBackground();\n\n    this._appendAxesGroups();\n\n    this._adjustViewport();\n\n    return panesBorderOptions;\n  },\n  _adjustViewport: function _adjustViewport() {\n    var that = this;\n\n    var series = that._getVisibleSeries();\n\n    var argumentAxis = that.getArgumentAxis();\n    var useAggregation = series.some(function (s) {\n      return s.useAggregation();\n    });\n\n    var adjustOnZoom = that._themeManager.getOptions(\"adjustOnZoom\");\n\n    var alignToBounds = !argumentAxis.dataVisualRangeIsReduced();\n\n    if (!useAggregation && !adjustOnZoom) {\n      return;\n    }\n\n    that._valueAxes.forEach(function (axis) {\n      return axis.adjust(alignToBounds);\n    });\n  },\n  _recreateSizeDependentObjects: function _recreateSizeDependentObjects(isCanvasChanged) {\n    var that = this;\n\n    var series = that._getVisibleSeries();\n\n    var useAggregation = series.some(function (s) {\n      return s.useAggregation();\n    });\n\n    var zoomChanged = that._isZooming();\n\n    if (!useAggregation) {\n      return;\n    }\n\n    that._argumentAxes.forEach(function (axis) {\n      axis.updateCanvas(that._canvas);\n    });\n\n    series.forEach(function (series) {\n      if (series.useAggregation() && (isCanvasChanged || zoomChanged || !series._useAllAggregatedPoints)) {\n        series.createPoints();\n      }\n    });\n\n    that._processSeriesFamilies();\n  },\n  _isZooming: function _isZooming() {\n    var that = this;\n    var argumentAxis = that.getArgumentAxis();\n\n    if (!argumentAxis || !argumentAxis.getTranslator()) {\n      return false;\n    }\n\n    var businessRange = argumentAxis.getTranslator().getBusinessRange();\n    var zoomRange = argumentAxis.getViewport();\n    var min = zoomRange ? zoomRange.min : 0;\n    var max = zoomRange ? zoomRange.max : 0;\n\n    if (\"logarithmic\" === businessRange.axisType) {\n      min = (0, _utils.getLog)(min, businessRange.base);\n      max = (0, _utils.getLog)(max, businessRange.base);\n    }\n\n    var viewportDistance = \"discrete\" === businessRange.axisType ? (0, _utils.getCategoriesInfo)(businessRange.categories, min, max).categories.length : Math.abs(max - min);\n    var precision = (0, _math.getPrecision)(viewportDistance);\n    precision = precision > 1 ? Math.pow(10, precision - 2) : 1;\n    var zoomChanged = Math.round((that._zoomLength - viewportDistance) * precision) / precision !== 0;\n    that._zoomLength = viewportDistance;\n    return zoomChanged;\n  },\n  _handleSeriesDataUpdated: function _handleSeriesDataUpdated() {\n    var that = this;\n    var viewport = new _range2.default.Range();\n    that.series.forEach(function (s) {\n      viewport.addRange(s.getArgumentRange());\n    });\n\n    that._argumentAxes.forEach(function (axis) {\n      axis.updateCanvas(that._canvas);\n      axis.setBusinessRange(viewport, that._axesReinitialized);\n    });\n\n    that.callBase();\n  },\n  _isLegendInside: function _isLegendInside() {\n    return this._legend && \"inside\" === this._legend.getPosition();\n  },\n  _isRotated: function _isRotated() {\n    return this._themeManager.getOptions(\"rotated\");\n  },\n  _getLayoutTargets: function _getLayoutTargets() {\n    return this.panes;\n  },\n  _applyClipRects: function _applyClipRects(panesBorderOptions) {\n    var that = this;\n\n    var canvasClipRectID = that._getCanvasClipRectID();\n\n    var i;\n\n    that._drawPanesBorders(panesBorderOptions);\n\n    that._createClipRectsForPanes();\n\n    for (i = 0; i < that._argumentAxes.length; i++) {\n      that._argumentAxes[i].applyClipRects(that._getElementsClipRectID(that._argumentAxes[i].pane), canvasClipRectID);\n    }\n\n    for (i = 0; i < that._valueAxes.length; i++) {\n      that._valueAxes[i].applyClipRects(that._getElementsClipRectID(that._valueAxes[i].pane), canvasClipRectID);\n    }\n\n    that._fillPanesBackground();\n  },\n  _updateLegendPosition: function _updateLegendPosition(drawOptions, legendHasInsidePosition) {\n    var that = this;\n\n    if (drawOptions.drawLegend && that._legend && legendHasInsidePosition) {\n      var panes = that.panes;\n      var newCanvas = (0, _extend2.extend)({}, panes[0].canvas);\n      var layoutManager = new _layout_manager2.default.LayoutManager();\n      newCanvas.right = panes[panes.length - 1].canvas.right;\n      newCanvas.bottom = panes[panes.length - 1].canvas.bottom;\n      layoutManager.setOptions({\n        width: 0,\n        height: 0\n      });\n      layoutManager.layoutElements([that._legend], newCanvas, _common.noop, [{\n        canvas: newCanvas\n      }], void 0);\n    }\n  },\n  _allowLegendInsidePosition: function _allowLegendInsidePosition() {\n    return true;\n  },\n  _applyExtraSettings: function _applyExtraSettings(series) {\n    var that = this;\n\n    var paneIndex = that._getPaneIndex(series.pane);\n\n    var panesClipRects = that._panesClipRects;\n    var wideClipRect = panesClipRects.wide[paneIndex];\n    series.setClippingParams(panesClipRects.base[paneIndex].id, wideClipRect && wideClipRect.id, that._getPaneBorderVisibility(paneIndex));\n  },\n  _updatePanesCanvases: function _updatePanesCanvases(drawOptions) {\n    if (!drawOptions.recreateCanvas) {\n      return;\n    }\n\n    (0, _utils.updatePanesCanvases)(this.panes, this._canvas, this._isRotated());\n  },\n  _normalizePanesHeight: function _normalizePanesHeight() {\n    (0, _utils.normalizePanesHeight)(this.panes);\n  },\n  _renderScaleBreaks: function _renderScaleBreaks() {\n    this._valueAxes.concat(this._argumentAxes).forEach(function (axis) {\n      axis.drawScaleBreaks();\n    });\n  },\n  _applyPointMarkersAutoHiding: function _applyPointMarkersAutoHiding() {\n    var that = this;\n\n    if (!that._themeManager.getOptions(\"autoHidePointMarkers\")) {\n      that.series.forEach(function (s) {\n        return s.autoHidePointMarkers = false;\n      });\n      return;\n    }\n\n    that.panes.forEach(function (pane) {\n      var series = that.series.filter(function (s) {\n        return s.pane === pane.name && s.usePointsToDefineAutoHiding();\n      });\n      var argAxis = that.getArgumentAxis();\n      var argVisualRange = argAxis.visualRange();\n      var argTranslator = argAxis.getTranslator();\n      var argAxisType = argAxis.getOptions().type;\n\n      var argViewPortFilter = _range_data_calculator2.default.getViewPortFilter(argVisualRange || {});\n\n      var points = [];\n      var overloadedSeries = {};\n      series.forEach(function (s) {\n        var valAxis = s.getValueAxis();\n        var valVisualRange = valAxis.visualRange();\n        var valTranslator = valAxis.getTranslator();\n        var seriesIndex = that.series.indexOf(s);\n\n        var valViewPortFilter = _range_data_calculator2.default.getViewPortFilter(valVisualRange || {});\n\n        overloadedSeries[seriesIndex] = {};\n        series.forEach(function (sr) {\n          return overloadedSeries[seriesIndex][that.series.indexOf(sr)] = 0;\n        });\n        var seriesPoints = [];\n        s.getPoints().filter(function (p) {\n          return p.getOptions().visible && argViewPortFilter(p.argument) && (valViewPortFilter(p.getMinValue(true)) || valViewPortFilter(p.getMaxValue(true)));\n        }).forEach(function (p) {\n          var tp = {\n            seriesIndex: seriesIndex,\n            argument: p.argument,\n            value: p.getMaxValue(true),\n            size: p.bubbleSize || p.getOptions().size\n          };\n\n          if (p.getMinValue(true) !== p.getMaxValue(true)) {\n            var mp = (0, _extend2.extend)({}, tp);\n            mp.value = p.getMinValue(true);\n            mp.x = argTranslator.to(mp.argument, 1);\n            mp.y = valTranslator.to(mp.value, 1);\n            seriesPoints.push(mp);\n          }\n\n          tp.x = argTranslator.to(tp.argument, 1);\n          tp.y = valTranslator.to(tp.value, 1);\n          seriesPoints.push(tp);\n        });\n        overloadedSeries[seriesIndex].pointsCount = seriesPoints.length;\n        overloadedSeries[seriesIndex].total = 0;\n        overloadedSeries[seriesIndex].continuousSeries = 0;\n        points = points.concat(seriesPoints);\n      });\n      var sortingCallback = \"discrete\" === argAxisType ? function (p1, p2) {\n        return argVisualRange.categories.indexOf(p1.argument) - argVisualRange.categories.indexOf(p2.argument);\n      } : function (p1, p2) {\n        return p1.argument - p2.argument;\n      };\n      points.sort(sortingCallback);\n      var isContinuousSeries = false;\n\n      for (var i = 0; i < points.length - 1; i++) {\n        var curPoint = points[i];\n        var size = curPoint.size;\n\n        if ((0, _type.isDefined)(curPoint.x) && (0, _type.isDefined)(curPoint.y)) {\n          for (var j = i + 1; j < points.length; j++) {\n            var nextPoint = points[j];\n            var next_x = (0, _type.isDefined)(nextPoint) ? nextPoint.x : null;\n            var next_y = (0, _type.isDefined)(nextPoint) ? nextPoint.y : null;\n\n            if (!(0, _type.isDefined)(next_x) || Math.abs(curPoint.x - next_x) >= size) {\n              isContinuousSeries &= j !== i + 1;\n              break;\n            } else {\n              var distance = (0, _type.isDefined)(next_x) && (0, _type.isDefined)(next_y) && Math.sqrt(Math.pow(curPoint.x - next_x, 2) + Math.pow(curPoint.y - next_y, 2));\n\n              if (distance && distance < size) {\n                overloadedSeries[curPoint.seriesIndex][nextPoint.seriesIndex]++;\n                overloadedSeries[curPoint.seriesIndex].total++;\n\n                if (!isContinuousSeries) {\n                  overloadedSeries[curPoint.seriesIndex].continuousSeries++;\n                  isContinuousSeries = true;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      series.forEach(function (s) {\n        var seriesIndex = that.series.indexOf(s);\n        s.autoHidePointMarkers = false;\n        var tickCount = argAxis.getTicksValues().majorTicksValues.length;\n\n        if (s.autoHidePointMarkersEnabled() && (\"discrete\" === argAxisType || overloadedSeries[seriesIndex].pointsCount > tickCount)) {\n          for (var index in overloadedSeries[seriesIndex]) {\n            var _i = parseInt(index);\n\n            if (isNaN(_i) || overloadedSeries[seriesIndex].total / overloadedSeries[seriesIndex].continuousSeries < 3) {\n              continue;\n            }\n\n            if (_i === seriesIndex) {\n              if (2 * overloadedSeries[_i][_i] >= overloadedSeries[_i].pointsCount) {\n                s.autoHidePointMarkers = true;\n                break;\n              }\n            } else {\n              if (overloadedSeries[seriesIndex].total >= overloadedSeries[seriesIndex].pointsCount) {\n                s.autoHidePointMarkers = true;\n                break;\n              }\n            }\n          }\n        }\n      });\n    });\n  },\n  _renderAxes: function _renderAxes(drawOptions, panesBorderOptions) {\n    function calculateTitlesWidth(axes) {\n      return axes.map(function (axis) {\n        if (!axis.getTitle) {\n          return 0;\n        }\n\n        var title = axis.getTitle();\n        return title ? title.bBox.width : 0;\n      });\n    }\n\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\n\n    var extendedArgAxes = (that._scrollBar ? [that._scrollBar] : []).concat(that._argumentAxes);\n    var verticalAxes = rotated ? extendedArgAxes : that._valueAxes;\n    var horizontalAxes = rotated ? that._valueAxes : extendedArgAxes;\n    var allAxes = verticalAxes.concat(horizontalAxes);\n\n    that._normalizePanesHeight();\n\n    that._updatePanesCanvases(drawOptions);\n\n    var panesCanvases = that.panes.reduce(function (canvases, pane) {\n      canvases[pane.name] = (0, _extend2.extend)({}, pane.canvas);\n      return canvases;\n    }, {});\n    var paneSizes = that.panes.reduce(function (sizes, pane) {\n      sizes[pane.name] = {\n        height: pane.height,\n        unit: pane.unit\n      };\n      return sizes;\n    }, {});\n    var cleanPanesCanvases = (0, _extend2.extend)(true, {}, panesCanvases);\n\n    if (!drawOptions.adjustAxes) {\n      drawAxesWithTicks(verticalAxes, !rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\n      drawAxesWithTicks(horizontalAxes, rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\n      performActionOnAxes(allAxes, \"prepareAnimation\");\n\n      that._renderScaleBreaks();\n\n      return false;\n    }\n\n    if (that._scrollBar) {\n      that._scrollBar.setPane(that.panes);\n    }\n\n    var vAxesMargins = {\n      panes: {}\n    };\n    var hAxesMargins = getHorizontalAxesMargins(horizontalAxes, function (axis) {\n      return axis.estimateMargins(panesCanvases[axis.pane]);\n    });\n    panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n    drawAxesWithTicks(verticalAxes, !rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\n    vAxesMargins = getVerticalAxesMargins(verticalAxes);\n    panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n    drawAxesWithTicks(horizontalAxes, rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\n    hAxesMargins = getHorizontalAxesMargins(horizontalAxes, getAxisMargins);\n    panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n    var oldTitlesWidth = calculateTitlesWidth(verticalAxes);\n    performActionOnAxes(allAxes, \"updateSize\", panesCanvases, axisAnimationEnabled(drawOptions, that._getVisibleSeries()));\n    horizontalAxes.forEach(shiftAxis(\"top\", \"bottom\"));\n    verticalAxes.forEach(shiftAxis(\"left\", \"right\"));\n\n    that._renderScaleBreaks();\n\n    that.panes.forEach(function (pane) {\n      (0, _extend2.extend)(pane.canvas, panesCanvases[pane.name]);\n    });\n\n    that._valueAxes.forEach(function (axis) {\n      axis.setInitRange();\n    });\n\n    verticalAxes.forEach(function (axis, i) {\n      if (axis.hasWrap && axis.hasWrap()) {\n        var title = axis.getTitle();\n        var newTitleWidth = title ? title.bBox.width : 0;\n        var offset = newTitleWidth - oldTitlesWidth[i];\n\n        if (\"right\" === axis.getOptions().position) {\n          vAxesMargins.right += offset;\n        } else {\n          vAxesMargins.left += offset;\n          that.panes.forEach(function (_ref) {\n            var name = _ref.name;\n            return vAxesMargins.panes[name].left += offset;\n          });\n        }\n\n        panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n        performActionOnAxes(allAxes, \"updateSize\", panesCanvases, false, false);\n        oldTitlesWidth = calculateTitlesWidth(verticalAxes);\n      }\n    });\n    return cleanPanesCanvases;\n  },\n  checkForMoreSpaceForPanesCanvas: function checkForMoreSpaceForPanesCanvas() {\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    var panesAreCustomSized = that.panes.filter(function (p) {\n      return p.unit;\n    }).length === that.panes.length;\n    var needSpace = false;\n\n    if (panesAreCustomSized) {\n      var needHorizontalSpace = 0;\n      var needVerticalSpace = 0;\n\n      if (rotated) {\n        var argAxisRightMargin = that.getArgumentAxis().getMargins().right;\n        var rightPanesIndent = Math.min.apply(Math, that.panes.map(function (p) {\n          return p.canvas.right;\n        }));\n        needHorizontalSpace = that._canvas.right + argAxisRightMargin - rightPanesIndent;\n      } else {\n        var argAxisBottomMargin = that.getArgumentAxis().getMargins().bottom;\n        var bottomPanesIndent = Math.min.apply(Math, that.panes.map(function (p) {\n          return p.canvas.bottom;\n        }));\n        needVerticalSpace = that._canvas.bottom + argAxisBottomMargin - bottomPanesIndent;\n      }\n\n      needSpace = needHorizontalSpace > 0 || needVerticalSpace > 0 ? {\n        width: needHorizontalSpace,\n        height: needVerticalSpace\n      } : false;\n\n      if (0 !== needVerticalSpace) {\n        var realSize = that.getSize();\n        var customSize = that.option(\"size\");\n        var container = that._$element[0];\n        var containerHasStyledHeight = !!container.style.height || (0, _utils.checkElementHasPropertyFromStyleSheet)(container, \"height\");\n\n        if (!rotated && !(customSize && customSize.height) && !containerHasStyledHeight) {\n          that._forceResize(realSize.width, realSize.height + needVerticalSpace);\n\n          needSpace = false;\n        }\n      }\n    } else {\n      needSpace = that.layoutManager.needMoreSpaceForPanesCanvas(that._getLayoutTargets(), rotated, function (pane) {\n        return {\n          width: rotated && !!pane.unit,\n          height: !rotated && !!pane.unit\n        };\n      });\n    }\n\n    return needSpace;\n  },\n  _forceResize: function _forceResize(width, height) {\n    this._renderer.resize(width, height);\n\n    this._updateSize();\n\n    this._setContentSize();\n\n    this._preserveOriginalCanvas();\n\n    this._updateCanvasClipRect(this._canvas);\n  },\n  _shrinkAxes: function _shrinkAxes(sizeShortage, panesCanvases) {\n    if (!sizeShortage || !panesCanvases) {\n      return;\n    }\n\n    this._renderer.stopAllAnimations(true);\n\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    var extendedArgAxes = (that._scrollBar ? [that._scrollBar] : []).concat(that._argumentAxes);\n    var verticalAxes = rotated ? extendedArgAxes : that._valueAxes;\n    var horizontalAxes = rotated ? that._valueAxes : extendedArgAxes;\n    var allAxes = verticalAxes.concat(horizontalAxes);\n\n    if (sizeShortage.width || sizeShortage.height) {\n      checkUsedSpace(sizeShortage, \"height\", horizontalAxes, getHorizontalAxesMargins);\n      checkUsedSpace(sizeShortage, \"width\", verticalAxes, getVerticalAxesMargins);\n      performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\n      var paneSizes = that.panes.reduce(function (sizes, pane) {\n        sizes[pane.name] = {\n          height: pane.height,\n          unit: pane.unit\n        };\n        return sizes;\n      }, {});\n      panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, getVerticalAxesMargins(verticalAxes), getHorizontalAxesMargins(horizontalAxes, getAxisMargins));\n      performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\n      horizontalAxes.forEach(shiftAxis(\"top\", \"bottom\"));\n      verticalAxes.forEach(shiftAxis(\"left\", \"right\"));\n      that.panes.forEach(function (pane) {\n        return (0, _extend2.extend)(pane.canvas, panesCanvases[pane.name]);\n      });\n    }\n  },\n  _getPanesParameters: function _getPanesParameters() {\n    var that = this;\n    var panes = that.panes;\n    var i;\n    var params = [];\n\n    for (i = 0; i < panes.length; i++) {\n      if (that._getPaneBorderVisibility(i)) {\n        params.push({\n          coords: panes[i].borderCoords,\n          clipRect: that._panesClipRects.fixed[i]\n        });\n      }\n    }\n\n    return params;\n  },\n  _createCrosshairCursor: function _createCrosshairCursor() {\n    var that = this;\n    var options = that._themeManager.getOptions(\"crosshair\") || {};\n    var argumentAxis = that.getArgumentAxis();\n    var axes = !that._isRotated() ? [[argumentAxis], that._valueAxes] : [that._valueAxes, [argumentAxis]];\n    var parameters = {\n      canvas: that._getCommonCanvas(),\n      panes: that._getPanesParameters(),\n      axes: axes\n    };\n\n    if (!options || !options.enabled) {\n      return;\n    }\n\n    if (!that._crosshair) {\n      that._crosshair = new _crosshair2.default.Crosshair(that._renderer, options, parameters, that._crosshairCursorGroup);\n    } else {\n      that._crosshair.update(options, parameters);\n    }\n\n    that._crosshair.render();\n  },\n  _getCommonCanvas: function _getCommonCanvas() {\n    var i;\n    var canvas;\n    var commonCanvas;\n    var panes = this.panes;\n\n    for (i = 0; i < panes.length; i++) {\n      canvas = panes[i].canvas;\n\n      if (!commonCanvas) {\n        commonCanvas = (0, _extend2.extend)({}, canvas);\n      } else {\n        commonCanvas.right = canvas.right;\n        commonCanvas.bottom = canvas.bottom;\n      }\n    }\n\n    return commonCanvas;\n  },\n  _createPanesBackground: function _createPanesBackground() {\n    var that = this;\n\n    var defaultBackgroundColor = that._themeManager.getOptions(\"commonPaneSettings\").backgroundColor;\n\n    var backgroundColor;\n    var renderer = that._renderer;\n    var rect;\n    var i;\n    var rects = [];\n\n    that._panesBackgroundGroup.clear();\n\n    for (i = 0; i < that.panes.length; i++) {\n      backgroundColor = that.panes[i].backgroundColor || defaultBackgroundColor;\n\n      if (!backgroundColor || \"none\" === backgroundColor) {\n        rects.push(null);\n        continue;\n      }\n\n      rect = renderer.rect(0, 0, 0, 0).attr({\n        fill: backgroundColor,\n        \"stroke-width\": 0\n      }).append(that._panesBackgroundGroup);\n      rects.push(rect);\n    }\n\n    that.panesBackground = rects;\n  },\n  _fillPanesBackground: function _fillPanesBackground() {\n    var that = this;\n    var bc;\n    (0, _iterator.each)(that.panes, function (i, pane) {\n      bc = pane.borderCoords;\n\n      if (null !== that.panesBackground[i]) {\n        that.panesBackground[i].attr({\n          x: bc.left,\n          y: bc.top,\n          width: bc.width,\n          height: bc.height\n        });\n      }\n    });\n  },\n  _calcPaneBorderCoords: function _calcPaneBorderCoords(pane) {\n    var canvas = pane.canvas;\n    var bc = pane.borderCoords = pane.borderCoords || {};\n    bc.left = canvas.left;\n    bc.top = canvas.top;\n    bc.right = canvas.width - canvas.right;\n    bc.bottom = canvas.height - canvas.bottom;\n    bc.width = Math.max(bc.right - bc.left, 0);\n    bc.height = Math.max(bc.bottom - bc.top, 0);\n  },\n  _drawPanesBorders: function _drawPanesBorders(panesBorderOptions) {\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    that._panesBorderGroup.linkRemove().clear();\n\n    (0, _iterator.each)(that.panes, function (i, pane) {\n      var bc;\n      var borderOptions = panesBorderOptions[pane.name];\n      var segmentRectParams;\n      var attr = {\n        fill: \"none\",\n        stroke: borderOptions.color,\n        \"stroke-opacity\": borderOptions.opacity,\n        \"stroke-width\": borderOptions.width,\n        dashStyle: borderOptions.dashStyle,\n        \"stroke-linecap\": \"square\"\n      };\n\n      that._calcPaneBorderCoords(pane, rotated);\n\n      if (!borderOptions.visible) {\n        return;\n      }\n\n      bc = pane.borderCoords;\n      segmentRectParams = prepareSegmentRectPoints(bc.left, bc.top, bc.width, bc.height, borderOptions);\n\n      that._renderer.path(segmentRectParams.points, segmentRectParams.pathType).attr(attr).append(that._panesBorderGroup);\n    });\n\n    that._panesBorderGroup.linkAppend();\n  },\n  _createClipRect: function _createClipRect(clipArray, index, left, top, width, height) {\n    var that = this;\n    var clipRect = clipArray[index];\n\n    if (!clipRect) {\n      clipRect = that._renderer.clipRect(left, top, width, height);\n      clipArray[index] = clipRect;\n    } else {\n      clipRect.attr({\n        x: left,\n        y: top,\n        width: width,\n        height: height\n      });\n    }\n  },\n  _createClipRectsForPanes: function _createClipRectsForPanes() {\n    var that = this;\n    var canvas = that._canvas;\n    (0, _iterator.each)(that.panes, function (i, pane) {\n      var needWideClipRect = false;\n      var bc = pane.borderCoords;\n      var left = bc.left;\n      var top = bc.top;\n      var width = bc.width;\n      var height = bc.height;\n      var panesClipRects = that._panesClipRects;\n\n      that._createClipRect(panesClipRects.fixed, i, left, top, width, height);\n\n      that._createClipRect(panesClipRects.base, i, left, top, width, height);\n\n      (0, _iterator.each)(that.series, function (_, series) {\n        if (series.pane === pane.name && (series.isFinancialSeries() || series.areErrorBarsVisible())) {\n          needWideClipRect = true;\n        }\n      });\n\n      if (needWideClipRect) {\n        if (that._isRotated()) {\n          top = 0;\n          height = canvas.height;\n        } else {\n          left = 0;\n          width = canvas.width;\n        }\n\n        that._createClipRect(panesClipRects.wide, i, left, top, width, height);\n      } else {\n        panesClipRects.wide[i] = null;\n      }\n    });\n  },\n  _getPaneBorderVisibility: function _getPaneBorderVisibility(paneIndex) {\n    var commonPaneBorderVisible = this._themeManager.getOptions(\"commonPaneSettings\").border.visible;\n\n    var pane = this.panes[paneIndex] || {};\n    var paneBorder = pane.border || {};\n    return \"visible\" in paneBorder ? paneBorder.visible : commonPaneBorderVisible;\n  },\n  _getCanvasForPane: function _getCanvasForPane(paneName) {\n    var panes = this.panes;\n    var panesNumber = panes.length;\n    var i;\n\n    for (i = 0; i < panesNumber; i++) {\n      if (panes[i].name === paneName) {\n        return panes[i].canvas;\n      }\n    }\n  },\n  _getTrackerSettings: function _getTrackerSettings() {\n    var that = this;\n    var themeManager = that._themeManager;\n    return (0, _extend2.extend)(this.callBase(), {\n      chart: that,\n      rotated: that._isRotated(),\n      crosshair: that._getCrosshairOptions().enabled ? that._crosshair : null,\n      stickyHovering: themeManager.getOptions(\"stickyHovering\")\n    });\n  },\n  _resolveLabelOverlappingStack: function _resolveLabelOverlappingStack() {\n    var that = this;\n\n    var isRotated = that._isRotated();\n\n    var shiftDirection = isRotated ? function (box, length) {\n      return {\n        x: box.x - length,\n        y: box.y\n      };\n    } : function (box, length) {\n      return {\n        x: box.x,\n        y: box.y - length\n      };\n    };\n    (0, _iterator.each)(that._getStackPoints(), function (_, stacks) {\n      (0, _iterator.each)(stacks, function (_, points) {\n        _base_chart.overlapping.resolveLabelOverlappingInOneDirection(points, that._getCommonCanvas(), isRotated, shiftDirection, function (a, b) {\n          var coordPosition = isRotated ? 1 : 0;\n          var figureCenter1 = a.labels[0].getFigureCenter()[coordPosition];\n          var figureCenter12 = b.labels[0].getFigureCenter()[coordPosition];\n\n          if (figureCenter1 - figureCenter12 === 0) {\n            return (a.value() - b.value()) * (a.labels[0].getPoint().series.getValueAxis().getTranslator().isInverted() ? -1 : 1);\n          }\n\n          return 0;\n        });\n      });\n    });\n  },\n  _getStackPoints: function _getStackPoints() {\n    var stackPoints = {};\n\n    var visibleSeries = this._getVisibleSeries();\n\n    (0, _iterator.each)(visibleSeries, function (_, singleSeries) {\n      var points = singleSeries.getPoints();\n      var stackName = singleSeries.getStackName() || null;\n      (0, _iterator.each)(points, function (_, point) {\n        var argument = point.argument;\n\n        if (!stackPoints[argument]) {\n          stackPoints[argument] = {};\n        }\n\n        if (!stackPoints[argument][stackName]) {\n          stackPoints[argument][stackName] = [];\n        }\n\n        stackPoints[argument][stackName].push(point);\n      });\n    });\n    return stackPoints;\n  },\n  _getCrosshairOptions: function _getCrosshairOptions() {\n    return this._getOption(\"crosshair\");\n  },\n  zoomArgument: function zoomArgument(min, max) {\n    var that = this;\n\n    if (!that._initialized || !(0, _type.isDefined)(min) && !(0, _type.isDefined)(max)) {\n      return;\n    }\n\n    that.getArgumentAxis().visualRange([min, max]);\n  },\n  resetVisualRange: function resetVisualRange() {\n    var that = this;\n    var axes = that._argumentAxes;\n    var nonVirtualArgumentAxis = that.getArgumentAxis();\n    axes.forEach(function (axis) {\n      axis.resetVisualRange(nonVirtualArgumentAxis !== axis);\n\n      that._applyCustomVisualRangeOption(axis);\n    });\n    that.callBase();\n  },\n  getVisibleArgumentBounds: function getVisibleArgumentBounds() {\n    var translator = this._argumentAxes[0].getTranslator();\n\n    var range = translator.getBusinessRange();\n    var isDiscrete = \"discrete\" === range.axisType;\n    var categories = range.categories;\n    return {\n      minVisible: isDiscrete ? range.minVisible || categories[0] : range.minVisible,\n      maxVisible: isDiscrete ? range.maxVisible || categories[categories.length - 1] : range.maxVisible\n    };\n  },\n  _change_FULL_RENDER: function _change_FULL_RENDER() {\n    this.callBase();\n\n    if (this._changes.has(VISUAL_RANGE)) {\n      this._raiseZoomEndHandlers();\n    }\n  },\n  _getAxesForScaling: function _getAxesForScaling() {\n    return [this.getArgumentAxis()].concat(this._valueAxes);\n  },\n  _applyVisualRangeByVirtualAxes: function _applyVisualRangeByVirtualAxes(axis, range) {\n    var that = this;\n\n    if (axis.isArgumentAxis) {\n      if (axis !== that.getArgumentAxis()) {\n        return true;\n      }\n\n      that._argumentAxes.filter(function (a) {\n        return a !== axis;\n      }).forEach(function (a) {\n        return a.visualRange(range, {\n          start: true,\n          end: true\n        });\n      });\n    }\n\n    return false;\n  },\n  _raiseZoomEndHandlers: function _raiseZoomEndHandlers() {\n    this._argumentAxes.forEach(function (axis) {\n      return axis.handleZoomEnd();\n    });\n\n    this.callBase();\n  },\n  _setOptionsByReference: function _setOptionsByReference() {\n    this.callBase();\n    (0, _extend2.extend)(this._optionsByReference, {\n      \"argumentAxis.visualRange\": true\n    });\n  },\n  option: function option() {\n    var option = this.callBase.apply(this, arguments);\n\n    if (\"array\" === (0, _type.type)(this._options.valueAxis)) {\n      for (var i = 0; i < this._options.valueAxis.length; i++) {\n        var optionPath = \"valueAxis[\".concat(i, \"].visualRange\");\n        this._optionsByReference[optionPath] = true;\n      }\n    }\n\n    return option;\n  },\n  _notifyVisualRange: function _notifyVisualRange() {\n    var that = this;\n    var argAxis = that._argumentAxes[0];\n    var argumentVisualRange = (0, _utils.convertVisualRangeObject)(argAxis.visualRange(), !_isArray(that.option(\"argumentAxis.visualRange\")));\n\n    if (!argAxis.skipEventRising || !(0, _utils.rangesAreEqual)(argumentVisualRange, that.option(\"argumentAxis.visualRange\"))) {\n      that.option(\"argumentAxis.visualRange\", argumentVisualRange);\n    } else {\n      argAxis.skipEventRising = null;\n    }\n\n    that.callBase();\n  }\n});\n\ndxChart.addPlugin(require(\"./chart_components/shutter_zoom\"));\ndxChart.addPlugin(require(\"./chart_components/zoom_and_pan\"));\ndxChart.addPlugin(require(\"./core/annotations\").plugins.core);\ndxChart.addPlugin(require(\"./core/annotations\").plugins.chart);\n(0, _component_registrator2.default)(\"dxChart\", dxChart);\nmodule.exports = dxChart;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/chart.js"],"names":["_common","require","_extend2","_array","_iterator","_component_registrator","_component_registrator2","_interopRequireDefault","_utils","_type","_math","_base_chart","_layout_manager","_layout_manager2","_multi_axes_synchronizer","_multi_axes_synchronizer2","_advanced_chart","_scroll_bar","_scroll_bar2","_crosshair","_crosshair2","_range_data_calculator","_range_data_calculator2","_range","_range2","obj","DEFAULT_PANE_NAME","VISUAL_RANGE","DEFAULT_PANES","name","border","_isArray","Array","i","axes","paneName","result","gridOpt","axis","minorGridOpt","axisShown","hiddenStubAxis","minorGridVisibility","minorGridOptions","gridVisibility","gridOptions","axesForPane","changeVisibilityAxisGrids","axInd","valueAxesOptions","valueAxes","findAxis","a","b","found","pane","prepareSegmentRectPoints","maxSW","width","sw","borderOptions","newSW","left","top","height","right","bottom","points","segments","visiblyOpt","prevSegmentVisibility","allSegment","visibility","segmentSequence","segmentVisibility","pathType","val1","src1","val2","src2","pickMaxValue","Math","axisMargins","getMarginsFunc","paneMargins","margins","spacing","accumulate","pickMax","panes","actionArgument1","actionArgument2","m","isRotated","getMargin","getOriginalField","field","paneNames","canvases","canvas","oppositeMargins","getMaxMargin","firstPane","emptySpace","space","totalCustomSpace","prev","sizes","paneSize","offset","Object","shrink","performActionOnAxes","shifts","shift","size","sizeShortage","getCommonSize","getMarginFunc","pointsCount","sum","s","series","drawOptions","dxChart","_themeSection","_fontFields","_setDeprecatedOptions","useAggregation","since","message","zoomingMode","scrollingMode","_initCore","_correctAxes","_getExtraOptions","_createPanes","that","panesNameCounter","defaultPane","doesPaneExist","_getAxisRenderingOptions","axisType","drawingType","_prepareAxisOptions","isHorizontal","containerColor","_checkPaneName","paneList","seriesTheme","_getValueAxis","valueAxisOptions","rotated","crosshairMargins","axisName","getFirstAxisNameForPane","axisOptions","findAxisOptions","priority","length","optionPath","crosshairMargin","x","_correctValueAxes","synchronizeMultiAxes","paneWithAxis","needHideGrids","hideGridsOnNonFirstValueAxisForPane","defaultAxis","axesWithSamePath","_getSeriesForPane","paneSeries","oneSeries","_createPanesBorderOptions","commonBorderOptions","panesBorderOptions","_createScrollBar","scrollBarOptions","scrollBarGroup","_prepareToRender","_adjustViewport","argumentAxis","adjustOnZoom","alignToBounds","_recreateSizeDependentObjects","zoomChanged","isCanvasChanged","_isZooming","businessRange","zoomRange","min","max","viewportDistance","precision","_handleSeriesDataUpdated","viewport","_isLegendInside","_isRotated","_getLayoutTargets","_applyClipRects","canvasClipRectID","_updateLegendPosition","newCanvas","layoutManager","_allowLegendInsidePosition","_applyExtraSettings","paneIndex","panesClipRects","wideClipRect","_updatePanesCanvases","_normalizePanesHeight","_renderScaleBreaks","_applyPointMarkersAutoHiding","argAxis","argVisualRange","argTranslator","argAxisType","argViewPortFilter","overloadedSeries","valAxis","valVisualRange","valTranslator","seriesIndex","valViewPortFilter","seriesPoints","p","tp","argument","value","mp","sortingCallback","p1","p2","isContinuousSeries","curPoint","j","nextPoint","next_x","next_y","distance","tickCount","_i","parseInt","isNaN","_renderAxes","title","extendedArgAxes","verticalAxes","horizontalAxes","allAxes","panesCanvases","paneSizes","unit","cleanPanesCanvases","drawAxesWithTicks","vAxesMargins","hAxesMargins","getHorizontalAxesMargins","shrinkCanvases","getVerticalAxesMargins","oldTitlesWidth","calculateTitlesWidth","axisAnimationEnabled","shiftAxis","newTitleWidth","_ref","checkForMoreSpaceForPanesCanvas","panesAreCustomSized","needSpace","needHorizontalSpace","needVerticalSpace","argAxisRightMargin","rightPanesIndent","argAxisBottomMargin","bottomPanesIndent","realSize","customSize","container","containerHasStyledHeight","_forceResize","_shrinkAxes","checkUsedSpace","_getPanesParameters","params","coords","clipRect","_createCrosshairCursor","options","parameters","_getCommonCanvas","commonCanvas","_createPanesBackground","defaultBackgroundColor","renderer","rects","backgroundColor","rect","fill","_fillPanesBackground","bc","y","_calcPaneBorderCoords","_drawPanesBorders","attr","stroke","dashStyle","segmentRectParams","_createClipRect","clipArray","_createClipRectsForPanes","needWideClipRect","_getPaneBorderVisibility","commonPaneBorderVisible","paneBorder","_getCanvasForPane","panesNumber","_getTrackerSettings","themeManager","chart","crosshair","stickyHovering","_resolveLabelOverlappingStack","shiftDirection","box","coordPosition","figureCenter1","figureCenter12","_getStackPoints","stackPoints","visibleSeries","singleSeries","stackName","point","_getCrosshairOptions","zoomArgument","resetVisualRange","nonVirtualArgumentAxis","getVisibleArgumentBounds","translator","range","isDiscrete","categories","minVisible","maxVisible","_change_FULL_RENDER","_getAxesForScaling","_applyVisualRangeByVirtualAxes","start","end","_raiseZoomEndHandlers","_setOptionsByReference","option","_notifyVisualRange","argumentVisualRange","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/chart.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _common = require(\"../core/utils/common\");\r\nvar _extend2 = require(\"../core/utils/extend\");\r\nvar _array = require(\"../core/utils/array\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _component_registrator = require(\"../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _utils = require(\"./core/utils\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _math = require(\"../core/utils/math\");\r\nvar _base_chart = require(\"./chart_components/base_chart\");\r\nvar _layout_manager = require(\"./chart_components/layout_manager\");\r\nvar _layout_manager2 = _interopRequireDefault(_layout_manager);\r\nvar _multi_axes_synchronizer = require(\"./chart_components/multi_axes_synchronizer\");\r\nvar _multi_axes_synchronizer2 = _interopRequireDefault(_multi_axes_synchronizer);\r\nvar _advanced_chart = require(\"./chart_components/advanced_chart\");\r\nvar _scroll_bar = require(\"./chart_components/scroll_bar\");\r\nvar _scroll_bar2 = _interopRequireDefault(_scroll_bar);\r\nvar _crosshair = require(\"./chart_components/crosshair\");\r\nvar _crosshair2 = _interopRequireDefault(_crosshair);\r\nvar _range_data_calculator = require(\"./series/helpers/range_data_calculator\");\r\nvar _range_data_calculator2 = _interopRequireDefault(_range_data_calculator);\r\nvar _range = require(\"./translators/range\");\r\nvar _range2 = _interopRequireDefault(_range);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DEFAULT_PANE_NAME = \"default\";\r\nvar VISUAL_RANGE = \"VISUAL_RANGE\";\r\nvar DEFAULT_PANES = [{\r\n    name: DEFAULT_PANE_NAME,\r\n    border: {}\r\n}];\r\nvar _isArray = Array.isArray;\r\n\r\nfunction getFirstAxisNameForPane(axes, paneName, defaultPane) {\r\n    var result;\r\n    for (var i = 0; i < axes.length; i++) {\r\n        if (axes[i].pane === paneName || void 0 === axes[i].pane && paneName === defaultPane) {\r\n            result = axes[i].name;\r\n            break\r\n        }\r\n    }\r\n    if (!result) {\r\n        result = axes[0].name\r\n    }\r\n    return result\r\n}\r\n\r\nfunction changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility) {\r\n    var gridOpt = axis.getOptions().grid;\r\n    var minorGridOpt = axis.getOptions().minorGrid;\r\n    gridOpt.visible = gridVisibility;\r\n    minorGridOpt && (minorGridOpt.visible = minorGridVisibility)\r\n}\r\n\r\nfunction hideGridsOnNonFirstValueAxisForPane(axesForPane) {\r\n    var axisShown = false;\r\n    var hiddenStubAxis = [];\r\n    var minorGridVisibility = axesForPane.some(function(axis) {\r\n        var minorGridOptions = axis.getOptions().minorGrid;\r\n        return minorGridOptions && minorGridOptions.visible\r\n    });\r\n    var gridVisibility = axesForPane.some(function(axis) {\r\n        var gridOptions = axis.getOptions().grid;\r\n        return gridOptions && gridOptions.visible\r\n    });\r\n    if (axesForPane.length > 1) {\r\n        axesForPane.forEach(function(axis) {\r\n            var gridOpt = axis.getOptions().grid;\r\n            if (axisShown) {\r\n                changeVisibilityAxisGrids(axis, false, false)\r\n            } else {\r\n                if (gridOpt && gridOpt.visible) {\r\n                    if (axis.getTranslator().getBusinessRange().isEmpty()) {\r\n                        changeVisibilityAxisGrids(axis, false, false);\r\n                        hiddenStubAxis.push(axis)\r\n                    } else {\r\n                        axisShown = true;\r\n                        changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility)\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        !axisShown && hiddenStubAxis.length && changeVisibilityAxisGrids(hiddenStubAxis[0], gridVisibility, minorGridVisibility)\r\n    }\r\n}\r\n\r\nfunction findAxisOptions(valueAxes, valueAxesOptions, axisName) {\r\n    var result;\r\n    var axInd;\r\n    for (axInd = 0; axInd < valueAxesOptions.length; axInd++) {\r\n        if (valueAxesOptions[axInd].name === axisName) {\r\n            result = valueAxesOptions[axInd];\r\n            result.priority = axInd;\r\n            break\r\n        }\r\n    }\r\n    if (!result) {\r\n        for (axInd = 0; axInd < valueAxes.length; axInd++) {\r\n            if (valueAxes[axInd].name === axisName) {\r\n                result = valueAxes[axInd].getOptions();\r\n                result.priority = valueAxes[axInd].priority;\r\n                break\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction findAxis(paneName, axisName, axes) {\r\n    var axis;\r\n    var i;\r\n    for (i = 0; i < axes.length; i++) {\r\n        axis = axes[i];\r\n        if (axis.name === axisName && axis.pane === paneName) {\r\n            return axis\r\n        }\r\n    }\r\n    if (paneName) {\r\n        return findAxis(void 0, axisName, axes)\r\n    }\r\n}\r\n\r\nfunction compareAxes(a, b) {\r\n    return a.priority - b.priority\r\n}\r\n\r\nfunction doesPaneExist(panes, paneName) {\r\n    var found = false;\r\n    (0, _iterator.each)(panes, function(_, pane) {\r\n        if (pane.name === paneName) {\r\n            found = true;\r\n            return false\r\n        }\r\n    });\r\n    return found\r\n}\r\nvar prepareSegmentRectPoints = function(left, top, width, height, borderOptions) {\r\n    var maxSW = ~~((width < height ? width : height) / 2);\r\n    var sw = borderOptions.width || 0;\r\n    var newSW = sw < maxSW ? sw : maxSW;\r\n    left += newSW / 2;\r\n    top += newSW / 2;\r\n    width -= newSW;\r\n    height -= newSW;\r\n    var right = left + width;\r\n    var bottom = top + height;\r\n    var points = [];\r\n    var segments = [];\r\n    var segmentSequence;\r\n    var visiblyOpt = 0;\r\n    var prevSegmentVisibility = 0;\r\n    var allSegment = {\r\n        top: [\r\n            [left, top],\r\n            [right, top]\r\n        ],\r\n        right: [\r\n            [right, top],\r\n            [right, bottom]\r\n        ],\r\n        bottom: [\r\n            [right, bottom],\r\n            [left, bottom]\r\n        ],\r\n        left: [\r\n            [left, bottom],\r\n            [left, top]\r\n        ]\r\n    };\r\n    (0, _iterator.each)(allSegment, function(seg) {\r\n        var visibility = !!borderOptions[seg];\r\n        visiblyOpt = 2 * visiblyOpt + ~~visibility\r\n    });\r\n    switch (visiblyOpt) {\r\n        case 13:\r\n        case 9:\r\n            segmentSequence = [\"left\", \"top\", \"right\", \"bottom\"];\r\n            break;\r\n        case 11:\r\n            segmentSequence = [\"bottom\", \"left\", \"top\", \"right\"];\r\n            break;\r\n        default:\r\n            segmentSequence = [\"top\", \"right\", \"bottom\", \"left\"]\r\n    }(0, _iterator.each)(segmentSequence, function(_, seg) {\r\n        var segmentVisibility = !!borderOptions[seg];\r\n        if (!prevSegmentVisibility && segments.length) {\r\n            points.push(segments);\r\n            segments = []\r\n        }\r\n        if (segmentVisibility) {\r\n            (0, _iterator.each)(allSegment[seg].slice(prevSegmentVisibility), function(_, segment) {\r\n                segments = segments.concat(segment)\r\n            })\r\n        }\r\n        prevSegmentVisibility = ~~segmentVisibility\r\n    });\r\n    segments.length && points.push(segments);\r\n    1 === points.length && (points = points[0]);\r\n    return {\r\n        points: points,\r\n        pathType: 15 === visiblyOpt ? \"area\" : \"line\"\r\n    }\r\n};\r\n\r\nfunction accumulate(field, src1, src2, auxSpacing) {\r\n    var val1 = src1[field] || 0;\r\n    var val2 = src2[field] || 0;\r\n    return val1 + val2 + (val1 && val2 ? auxSpacing : 0)\r\n}\r\n\r\nfunction pickMax(field, src1, src2) {\r\n    return pickMaxValue(src1[field], src2[field])\r\n}\r\n\r\nfunction pickMaxValue(val1, val2) {\r\n    return Math.max(val1 || 0, val2 || 0)\r\n}\r\n\r\nfunction getAxisMargins(axis) {\r\n    return axis.getMargins()\r\n}\r\n\r\nfunction getHorizontalAxesMargins(axes, getMarginsFunc) {\r\n    return axes.reduce(function(margins, axis) {\r\n        var axisMargins = getMarginsFunc(axis);\r\n        var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\r\n        var spacing = axis.getMultipleAxesSpacing();\r\n        paneMargins.top = accumulate(\"top\", paneMargins, axisMargins, spacing);\r\n        paneMargins.bottom = accumulate(\"bottom\", paneMargins, axisMargins, spacing);\r\n        paneMargins.left = pickMax(\"left\", paneMargins, axisMargins);\r\n        paneMargins.right = pickMax(\"right\", paneMargins, axisMargins);\r\n        margins.top = pickMax(\"top\", paneMargins, margins);\r\n        margins.bottom = pickMax(\"bottom\", paneMargins, margins);\r\n        margins.left = pickMax(\"left\", paneMargins, margins);\r\n        margins.right = pickMax(\"right\", paneMargins, margins);\r\n        return margins\r\n    }, {\r\n        panes: {}\r\n    })\r\n}\r\n\r\nfunction getVerticalAxesMargins(axes) {\r\n    return axes.reduce(function(margins, axis) {\r\n        var axisMargins = axis.getMargins();\r\n        var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\r\n        var spacing = axis.getMultipleAxesSpacing();\r\n        paneMargins.top = pickMax(\"top\", paneMargins, axisMargins);\r\n        paneMargins.bottom = pickMax(\"bottom\", paneMargins, axisMargins);\r\n        paneMargins.left = accumulate(\"left\", paneMargins, axisMargins, spacing);\r\n        paneMargins.right = accumulate(\"right\", paneMargins, axisMargins, spacing);\r\n        margins.top = pickMax(\"top\", paneMargins, margins);\r\n        margins.bottom = pickMax(\"bottom\", paneMargins, margins);\r\n        margins.left = pickMax(\"left\", paneMargins, margins);\r\n        margins.right = pickMax(\"right\", paneMargins, margins);\r\n        return margins\r\n    }, {\r\n        panes: {}\r\n    })\r\n}\r\n\r\nfunction performActionOnAxes(axes, action, actionArgument1, actionArgument2, actionArgument3) {\r\n    axes.forEach(function(axis) {\r\n        axis[action](actionArgument1 && actionArgument1[axis.pane], actionArgument2 && actionArgument2[axis.pane] || actionArgument2, actionArgument3)\r\n    })\r\n}\r\n\r\nfunction shrinkCanvases(isRotated, canvases, sizes, verticalMargins, horizontalMargins) {\r\n    function getMargin(side, margins, pane) {\r\n        var m = (isRotated ? [\"left\", \"right\"] : [\"top\", \"bottom\"]).indexOf(side) === -1 ? margins : margins.panes[pane] || {};\r\n        return m[side]\r\n    }\r\n\r\n    function getMaxMargin(side, margins1, margins2, pane) {\r\n        return pickMaxValue(getMargin(side, margins1, pane), getMargin(side, margins2, pane))\r\n    }\r\n    var getOriginalField = function(field) {\r\n        return \"original\".concat(field[0].toUpperCase()).concat(field.slice(1))\r\n    };\r\n\r\n    function shrink(canvases, paneNames, sizeField, startMargin, endMargin, oppositeMargins) {\r\n        paneNames = paneNames.sort(function(p1, p2) {\r\n            return canvases[p2][startMargin] - canvases[p1][startMargin]\r\n        });\r\n        paneNames.forEach(function(pane) {\r\n            var canvas = canvases[pane];\r\n            oppositeMargins.forEach(function(margin) {\r\n                canvas[margin] = canvas[getOriginalField(margin)] + getMaxMargin(margin, verticalMargins, horizontalMargins, pane)\r\n            })\r\n        });\r\n        var firstPane = canvases[paneNames[0]];\r\n        var emptySpace = paneNames.reduce(function(space, paneName) {\r\n            space -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, paneName) + getMaxMargin(endMargin, verticalMargins, horizontalMargins, paneName);\r\n            return space\r\n        }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - canvases[paneNames[paneNames.length - 1]][getOriginalField(startMargin)]) - _utils.PANE_PADDING * (paneNames.length - 1);\r\n        var totalCustomSpace = Object.keys(sizes).reduce(function(prev, key) {\r\n            return prev + (sizes[key].unit ? sizes[key].height : 0)\r\n        }, 0);\r\n        emptySpace -= totalCustomSpace;\r\n        paneNames.reduce(function(offset, pane) {\r\n            var canvas = canvases[pane];\r\n            var paneSize = sizes[pane];\r\n            offset -= getMaxMargin(endMargin, verticalMargins, horizontalMargins, pane);\r\n            canvas[endMargin] = firstPane[sizeField] - offset;\r\n            offset -= paneSize.unit ? paneSize.height : Math.floor(emptySpace * paneSize.height);\r\n            canvas[startMargin] = offset;\r\n            offset -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, pane) + _utils.PANE_PADDING;\r\n            return offset\r\n        }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - (emptySpace < 0 ? emptySpace : 0))\r\n    }\r\n    var paneNames = Object.keys(canvases);\r\n    if (!isRotated) {\r\n        shrink(canvases, paneNames, \"height\", \"top\", \"bottom\", [\"left\", \"right\"])\r\n    } else {\r\n        shrink(canvases, paneNames, \"width\", \"left\", \"right\", [\"top\", \"bottom\"])\r\n    }\r\n    return canvases\r\n}\r\n\r\nfunction drawAxesWithTicks(axes, condition, canvases, panesBorderOptions) {\r\n    if (condition) {\r\n        performActionOnAxes(axes, \"createTicks\", canvases);\r\n        _multi_axes_synchronizer2.default.synchronize(axes)\r\n    }\r\n    performActionOnAxes(axes, \"draw\", !condition && canvases, panesBorderOptions)\r\n}\r\n\r\nfunction shiftAxis(side1, side2) {\r\n    var shifts = {};\r\n    return function(axis) {\r\n        var shift = shifts[axis.pane] = shifts[axis.pane] || {\r\n            top: 0,\r\n            left: 0,\r\n            bottom: 0,\r\n            right: 0\r\n        };\r\n        var spacing = axis.getMultipleAxesSpacing();\r\n        var margins = axis.getMargins();\r\n        axis.shift(shift);\r\n        shift[side1] = accumulate(side1, shift, margins, spacing);\r\n        shift[side2] = accumulate(side2, shift, margins, spacing)\r\n    }\r\n}\r\n\r\nfunction getCommonSize(side, margins) {\r\n    var size = 0;\r\n    var pane;\r\n    var paneMargins;\r\n    for (pane in margins.panes) {\r\n        paneMargins = margins.panes[pane];\r\n        size += \"height\" === side ? paneMargins.top + paneMargins.bottom : paneMargins.left + paneMargins.right\r\n    }\r\n    return size\r\n}\r\n\r\nfunction checkUsedSpace(sizeShortage, side, axes, getMarginFunc) {\r\n    var size = 0;\r\n    if (sizeShortage[side] > 0) {\r\n        size = getCommonSize(side, getMarginFunc(axes, getAxisMargins));\r\n        performActionOnAxes(axes, \"hideTitle\");\r\n        sizeShortage[side] -= size - getCommonSize(side, getMarginFunc(axes, getAxisMargins))\r\n    }\r\n    if (sizeShortage[side] > 0) {\r\n        performActionOnAxes(axes, \"hideOuterElements\")\r\n    }\r\n}\r\n\r\nfunction axisAnimationEnabled(drawOptions, series) {\r\n    var pointsCount = series.reduce(function(sum, s) {\r\n        return sum += s.getPoints().length\r\n    }, 0) / series.length;\r\n    return drawOptions.animate && pointsCount <= drawOptions.animationPointsLimit\r\n}\r\nvar dxChart = _advanced_chart.AdvancedChart.inherit({\r\n    _themeSection: \"chart\",\r\n    _fontFields: [\"crosshair.label.font\"],\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase.apply(this, arguments);\r\n        (0, _extend2.extend)(this._deprecatedOptions, {\r\n            useAggregation: {\r\n                since: \"18.1\",\r\n                message: \"Use the 'commonSeriesSettings.aggregation.enabled' or 'series.aggregation.enabled' option instead\"\r\n            },\r\n            \"argumentAxis.min\": {\r\n                since: \"18.2\",\r\n                message: \"Use the 'argumentAxis.visualRange' option instead\"\r\n            },\r\n            \"argumentAxis.max\": {\r\n                since: \"18.2\",\r\n                message: \"Use the 'argumentAxis.visualRange' option instead\"\r\n            },\r\n            \"valueAxis.min\": {\r\n                since: \"18.2\",\r\n                message: \"Use the 'valueAxis.visualRange' option instead\"\r\n            },\r\n            \"valueAxis.max\": {\r\n                since: \"18.2\",\r\n                message: \"Use the 'valueAxis.visualRange' option instead\"\r\n            },\r\n            zoomingMode: {\r\n                since: \"18.2\",\r\n                message: \"Use the 'zoomAndPan' option instead\"\r\n            },\r\n            scrollingMode: {\r\n                since: \"18.2\",\r\n                message: \"Use the 'zoomAndPan' option instead\"\r\n            }\r\n        })\r\n    },\r\n    _initCore: function() {\r\n        this.paneAxis = {};\r\n        this.callBase()\r\n    },\r\n    _correctAxes: function() {\r\n        this._correctValueAxes(true)\r\n    },\r\n    _getExtraOptions: _common.noop,\r\n    _createPanes: function() {\r\n        var that = this;\r\n        var panes = that.option(\"panes\");\r\n        var panesNameCounter = 0;\r\n        var defaultPane;\r\n        if (!panes || _isArray(panes) && !panes.length) {\r\n            panes = DEFAULT_PANES\r\n        }\r\n        that.callBase();\r\n        defaultPane = that.option(\"defaultPane\");\r\n        panes = (0, _extend2.extend)(true, [], _isArray(panes) ? panes : [panes]);\r\n        (0, _iterator.each)(panes, function(_, pane) {\r\n            pane.name = !(0, _type.isDefined)(pane.name) ? DEFAULT_PANE_NAME + panesNameCounter++ : pane.name\r\n        });\r\n        if ((0, _type.isDefined)(defaultPane)) {\r\n            if (!doesPaneExist(panes, defaultPane)) {\r\n                that._incidentOccurred(\"W2101\", [defaultPane]);\r\n                defaultPane = panes[panes.length - 1].name\r\n            }\r\n        } else {\r\n            defaultPane = panes[panes.length - 1].name\r\n        }\r\n        that.defaultPane = defaultPane;\r\n        panes = that._isRotated() ? panes.reverse() : panes;\r\n        return panes\r\n    },\r\n    _getAxisRenderingOptions: function() {\r\n        return {\r\n            axisType: \"xyAxes\",\r\n            drawingType: \"linear\"\r\n        }\r\n    },\r\n    _prepareAxisOptions: function(typeSelector, userOptions, rotated) {\r\n        return {\r\n            isHorizontal: \"argumentAxis\" === typeSelector !== rotated,\r\n            containerColor: this._themeManager.getOptions(\"containerBackgroundColor\")\r\n        }\r\n    },\r\n    _checkPaneName: function(seriesTheme) {\r\n        var paneList = (0, _utils.map)(this.panes, function(pane) {\r\n            return pane.name\r\n        });\r\n        seriesTheme.pane = seriesTheme.pane || this.defaultPane;\r\n        return (0, _array.inArray)(seriesTheme.pane, paneList) !== -1\r\n    },\r\n    _getValueAxis: function(paneName, axisName) {\r\n        var that = this;\r\n        var valueAxes = that._valueAxes;\r\n        var valueAxisOptions = that.option(\"valueAxis\") || {};\r\n        var valueAxesOptions = _isArray(valueAxisOptions) ? valueAxisOptions : [valueAxisOptions];\r\n        var rotated = that._isRotated();\r\n        var crosshairMargins = that._getCrosshairMargins();\r\n        var axisOptions;\r\n        var axis;\r\n        axisName = axisName || getFirstAxisNameForPane(valueAxes, paneName, that.defaultPane);\r\n        axis = findAxis(paneName, axisName, valueAxes);\r\n        if (!axis) {\r\n            axisOptions = findAxisOptions(valueAxes, valueAxesOptions, axisName);\r\n            if (!axisOptions) {\r\n                that._incidentOccurred(\"W2102\", [axisName]);\r\n                axisOptions = {\r\n                    name: axisName,\r\n                    priority: valueAxes.length\r\n                }\r\n            }\r\n            axis = that._createAxis(false, that._populateAxesOptions(\"valueAxis\", axisOptions, {\r\n                pane: paneName,\r\n                name: axisName,\r\n                optionPath: _isArray(valueAxisOptions) ? \"valueAxis[\".concat(axisOptions.priority, \"]\") : \"valueAxis\",\r\n                crosshairMargin: rotated ? crosshairMargins.y : crosshairMargins.x\r\n            }, rotated));\r\n            axis.applyVisualRangeSetter(that._getVisualRangeSetter());\r\n            valueAxes.push(axis)\r\n        }\r\n        axis.setPane(paneName);\r\n        return axis\r\n    },\r\n    _correctValueAxes: function(needHideGrids) {\r\n        var that = this;\r\n        var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\r\n        var valueAxes = that._valueAxes;\r\n        var paneWithAxis = {};\r\n        that.series.forEach(function(series) {\r\n            var axis = series.getValueAxis();\r\n            paneWithAxis[axis.pane] = true\r\n        });\r\n        that.panes.forEach(function(pane) {\r\n            var paneName = pane.name;\r\n            if (!paneWithAxis[paneName]) {\r\n                that._getValueAxis(paneName)\r\n            }\r\n            if (needHideGrids && synchronizeMultiAxes) {\r\n                hideGridsOnNonFirstValueAxisForPane(valueAxes.filter(function(axis) {\r\n                    return axis.pane === paneName\r\n                }))\r\n            }\r\n        });\r\n        that._valueAxes = valueAxes.filter(function(axis) {\r\n            if (!axis.pane) {\r\n                axis.setPane(that.defaultPane)\r\n            }\r\n            return doesPaneExist(that.panes, axis.pane)\r\n        }).sort(compareAxes);\r\n        var defaultAxis = this.getValueAxis();\r\n        that._valueAxes.forEach(function(axis) {\r\n            var optionPath = axis.getOptions().optionPath;\r\n            if (optionPath) {\r\n                var axesWithSamePath = that._valueAxes.filter(function(a) {\r\n                    return a.getOptions().optionPath === optionPath\r\n                });\r\n                if (axesWithSamePath.length > 1) {\r\n                    if (axesWithSamePath.some(function(a) {\r\n                            return a === defaultAxis\r\n                        })) {\r\n                        axesWithSamePath.forEach(function(a) {\r\n                            if (a !== defaultAxis) {\r\n                                a.getOptions().optionPath = null\r\n                            }\r\n                        })\r\n                    } else {\r\n                        axesWithSamePath.forEach(function(a, i) {\r\n                            if (0 !== i) {\r\n                                a.getOptions().optionPath = null\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getSeriesForPane: function(paneName) {\r\n        var paneSeries = [];\r\n        (0, _iterator.each)(this.series, function(_, oneSeries) {\r\n            if (oneSeries.pane === paneName) {\r\n                paneSeries.push(oneSeries)\r\n            }\r\n        });\r\n        return paneSeries\r\n    },\r\n    _createPanesBorderOptions: function() {\r\n        var commonBorderOptions = this._themeManager.getOptions(\"commonPaneSettings\").border;\r\n        var panesBorderOptions = {};\r\n        this.panes.forEach(function(pane) {\r\n            return panesBorderOptions[pane.name] = (0, _extend2.extend)(true, {}, commonBorderOptions, pane.border)\r\n        });\r\n        return panesBorderOptions\r\n    },\r\n    _createScrollBar: function() {\r\n        var that = this;\r\n        var scrollBarOptions = that._themeManager.getOptions(\"scrollBar\") || {};\r\n        var scrollBarGroup = that._scrollBarGroup;\r\n        if (scrollBarOptions.visible) {\r\n            scrollBarOptions.rotated = that._isRotated();\r\n            that._scrollBar = (that._scrollBar || new _scroll_bar2.default.ScrollBar(that._renderer, scrollBarGroup)).update(scrollBarOptions)\r\n        } else {\r\n            scrollBarGroup.linkRemove();\r\n            that._scrollBar && that._scrollBar.dispose();\r\n            that._scrollBar = null\r\n        }\r\n    },\r\n    _prepareToRender: function(drawOptions) {\r\n        var panesBorderOptions = this._createPanesBorderOptions();\r\n        this._createPanesBackground();\r\n        this._appendAxesGroups();\r\n        this._adjustViewport();\r\n        return panesBorderOptions\r\n    },\r\n    _adjustViewport: function() {\r\n        var that = this;\r\n        var series = that._getVisibleSeries();\r\n        var argumentAxis = that.getArgumentAxis();\r\n        var useAggregation = series.some(function(s) {\r\n            return s.useAggregation()\r\n        });\r\n        var adjustOnZoom = that._themeManager.getOptions(\"adjustOnZoom\");\r\n        var alignToBounds = !argumentAxis.dataVisualRangeIsReduced();\r\n        if (!useAggregation && !adjustOnZoom) {\r\n            return\r\n        }\r\n        that._valueAxes.forEach(function(axis) {\r\n            return axis.adjust(alignToBounds)\r\n        })\r\n    },\r\n    _recreateSizeDependentObjects: function(isCanvasChanged) {\r\n        var that = this;\r\n        var series = that._getVisibleSeries();\r\n        var useAggregation = series.some(function(s) {\r\n            return s.useAggregation()\r\n        });\r\n        var zoomChanged = that._isZooming();\r\n        if (!useAggregation) {\r\n            return\r\n        }\r\n        that._argumentAxes.forEach(function(axis) {\r\n            axis.updateCanvas(that._canvas)\r\n        });\r\n        series.forEach(function(series) {\r\n            if (series.useAggregation() && (isCanvasChanged || zoomChanged || !series._useAllAggregatedPoints)) {\r\n                series.createPoints()\r\n            }\r\n        });\r\n        that._processSeriesFamilies()\r\n    },\r\n    _isZooming: function() {\r\n        var that = this;\r\n        var argumentAxis = that.getArgumentAxis();\r\n        if (!argumentAxis || !argumentAxis.getTranslator()) {\r\n            return false\r\n        }\r\n        var businessRange = argumentAxis.getTranslator().getBusinessRange();\r\n        var zoomRange = argumentAxis.getViewport();\r\n        var min = zoomRange ? zoomRange.min : 0;\r\n        var max = zoomRange ? zoomRange.max : 0;\r\n        if (\"logarithmic\" === businessRange.axisType) {\r\n            min = (0, _utils.getLog)(min, businessRange.base);\r\n            max = (0, _utils.getLog)(max, businessRange.base)\r\n        }\r\n        var viewportDistance = \"discrete\" === businessRange.axisType ? (0, _utils.getCategoriesInfo)(businessRange.categories, min, max).categories.length : Math.abs(max - min);\r\n        var precision = (0, _math.getPrecision)(viewportDistance);\r\n        precision = precision > 1 ? Math.pow(10, precision - 2) : 1;\r\n        var zoomChanged = Math.round((that._zoomLength - viewportDistance) * precision) / precision !== 0;\r\n        that._zoomLength = viewportDistance;\r\n        return zoomChanged\r\n    },\r\n    _handleSeriesDataUpdated: function() {\r\n        var that = this;\r\n        var viewport = new _range2.default.Range;\r\n        that.series.forEach(function(s) {\r\n            viewport.addRange(s.getArgumentRange())\r\n        });\r\n        that._argumentAxes.forEach(function(axis) {\r\n            axis.updateCanvas(that._canvas);\r\n            axis.setBusinessRange(viewport, that._axesReinitialized)\r\n        });\r\n        that.callBase()\r\n    },\r\n    _isLegendInside: function() {\r\n        return this._legend && \"inside\" === this._legend.getPosition()\r\n    },\r\n    _isRotated: function() {\r\n        return this._themeManager.getOptions(\"rotated\")\r\n    },\r\n    _getLayoutTargets: function() {\r\n        return this.panes\r\n    },\r\n    _applyClipRects: function(panesBorderOptions) {\r\n        var that = this;\r\n        var canvasClipRectID = that._getCanvasClipRectID();\r\n        var i;\r\n        that._drawPanesBorders(panesBorderOptions);\r\n        that._createClipRectsForPanes();\r\n        for (i = 0; i < that._argumentAxes.length; i++) {\r\n            that._argumentAxes[i].applyClipRects(that._getElementsClipRectID(that._argumentAxes[i].pane), canvasClipRectID)\r\n        }\r\n        for (i = 0; i < that._valueAxes.length; i++) {\r\n            that._valueAxes[i].applyClipRects(that._getElementsClipRectID(that._valueAxes[i].pane), canvasClipRectID)\r\n        }\r\n        that._fillPanesBackground()\r\n    },\r\n    _updateLegendPosition: function(drawOptions, legendHasInsidePosition) {\r\n        var that = this;\r\n        if (drawOptions.drawLegend && that._legend && legendHasInsidePosition) {\r\n            var panes = that.panes;\r\n            var newCanvas = (0, _extend2.extend)({}, panes[0].canvas);\r\n            var layoutManager = new _layout_manager2.default.LayoutManager;\r\n            newCanvas.right = panes[panes.length - 1].canvas.right;\r\n            newCanvas.bottom = panes[panes.length - 1].canvas.bottom;\r\n            layoutManager.setOptions({\r\n                width: 0,\r\n                height: 0\r\n            });\r\n            layoutManager.layoutElements([that._legend], newCanvas, _common.noop, [{\r\n                canvas: newCanvas\r\n            }], void 0)\r\n        }\r\n    },\r\n    _allowLegendInsidePosition: function() {\r\n        return true\r\n    },\r\n    _applyExtraSettings: function(series) {\r\n        var that = this;\r\n        var paneIndex = that._getPaneIndex(series.pane);\r\n        var panesClipRects = that._panesClipRects;\r\n        var wideClipRect = panesClipRects.wide[paneIndex];\r\n        series.setClippingParams(panesClipRects.base[paneIndex].id, wideClipRect && wideClipRect.id, that._getPaneBorderVisibility(paneIndex))\r\n    },\r\n    _updatePanesCanvases: function(drawOptions) {\r\n        if (!drawOptions.recreateCanvas) {\r\n            return\r\n        }(0, _utils.updatePanesCanvases)(this.panes, this._canvas, this._isRotated())\r\n    },\r\n    _normalizePanesHeight: function() {\r\n        (0, _utils.normalizePanesHeight)(this.panes)\r\n    },\r\n    _renderScaleBreaks: function() {\r\n        this._valueAxes.concat(this._argumentAxes).forEach(function(axis) {\r\n            axis.drawScaleBreaks()\r\n        })\r\n    },\r\n    _applyPointMarkersAutoHiding: function() {\r\n        var that = this;\r\n        if (!that._themeManager.getOptions(\"autoHidePointMarkers\")) {\r\n            that.series.forEach(function(s) {\r\n                return s.autoHidePointMarkers = false\r\n            });\r\n            return\r\n        }\r\n        that.panes.forEach(function(pane) {\r\n            var series = that.series.filter(function(s) {\r\n                return s.pane === pane.name && s.usePointsToDefineAutoHiding()\r\n            });\r\n            var argAxis = that.getArgumentAxis();\r\n            var argVisualRange = argAxis.visualRange();\r\n            var argTranslator = argAxis.getTranslator();\r\n            var argAxisType = argAxis.getOptions().type;\r\n            var argViewPortFilter = _range_data_calculator2.default.getViewPortFilter(argVisualRange || {});\r\n            var points = [];\r\n            var overloadedSeries = {};\r\n            series.forEach(function(s) {\r\n                var valAxis = s.getValueAxis();\r\n                var valVisualRange = valAxis.visualRange();\r\n                var valTranslator = valAxis.getTranslator();\r\n                var seriesIndex = that.series.indexOf(s);\r\n                var valViewPortFilter = _range_data_calculator2.default.getViewPortFilter(valVisualRange || {});\r\n                overloadedSeries[seriesIndex] = {};\r\n                series.forEach(function(sr) {\r\n                    return overloadedSeries[seriesIndex][that.series.indexOf(sr)] = 0\r\n                });\r\n                var seriesPoints = [];\r\n                s.getPoints().filter(function(p) {\r\n                    return p.getOptions().visible && argViewPortFilter(p.argument) && (valViewPortFilter(p.getMinValue(true)) || valViewPortFilter(p.getMaxValue(true)))\r\n                }).forEach(function(p) {\r\n                    var tp = {\r\n                        seriesIndex: seriesIndex,\r\n                        argument: p.argument,\r\n                        value: p.getMaxValue(true),\r\n                        size: p.bubbleSize || p.getOptions().size\r\n                    };\r\n                    if (p.getMinValue(true) !== p.getMaxValue(true)) {\r\n                        var mp = (0, _extend2.extend)({}, tp);\r\n                        mp.value = p.getMinValue(true);\r\n                        mp.x = argTranslator.to(mp.argument, 1);\r\n                        mp.y = valTranslator.to(mp.value, 1);\r\n                        seriesPoints.push(mp)\r\n                    }\r\n                    tp.x = argTranslator.to(tp.argument, 1);\r\n                    tp.y = valTranslator.to(tp.value, 1);\r\n                    seriesPoints.push(tp)\r\n                });\r\n                overloadedSeries[seriesIndex].pointsCount = seriesPoints.length;\r\n                overloadedSeries[seriesIndex].total = 0;\r\n                overloadedSeries[seriesIndex].continuousSeries = 0;\r\n                points = points.concat(seriesPoints)\r\n            });\r\n            var sortingCallback = \"discrete\" === argAxisType ? function(p1, p2) {\r\n                return argVisualRange.categories.indexOf(p1.argument) - argVisualRange.categories.indexOf(p2.argument)\r\n            } : function(p1, p2) {\r\n                return p1.argument - p2.argument\r\n            };\r\n            points.sort(sortingCallback);\r\n            var isContinuousSeries = false;\r\n            for (var i = 0; i < points.length - 1; i++) {\r\n                var curPoint = points[i];\r\n                var size = curPoint.size;\r\n                if ((0, _type.isDefined)(curPoint.x) && (0, _type.isDefined)(curPoint.y)) {\r\n                    for (var j = i + 1; j < points.length; j++) {\r\n                        var nextPoint = points[j];\r\n                        var next_x = (0, _type.isDefined)(nextPoint) ? nextPoint.x : null;\r\n                        var next_y = (0, _type.isDefined)(nextPoint) ? nextPoint.y : null;\r\n                        if (!(0, _type.isDefined)(next_x) || Math.abs(curPoint.x - next_x) >= size) {\r\n                            isContinuousSeries &= j !== i + 1;\r\n                            break\r\n                        } else {\r\n                            var distance = (0, _type.isDefined)(next_x) && (0, _type.isDefined)(next_y) && Math.sqrt(Math.pow(curPoint.x - next_x, 2) + Math.pow(curPoint.y - next_y, 2));\r\n                            if (distance && distance < size) {\r\n                                overloadedSeries[curPoint.seriesIndex][nextPoint.seriesIndex]++;\r\n                                overloadedSeries[curPoint.seriesIndex].total++;\r\n                                if (!isContinuousSeries) {\r\n                                    overloadedSeries[curPoint.seriesIndex].continuousSeries++;\r\n                                    isContinuousSeries = true\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            series.forEach(function(s) {\r\n                var seriesIndex = that.series.indexOf(s);\r\n                s.autoHidePointMarkers = false;\r\n                var tickCount = argAxis.getTicksValues().majorTicksValues.length;\r\n                if (s.autoHidePointMarkersEnabled() && (\"discrete\" === argAxisType || overloadedSeries[seriesIndex].pointsCount > tickCount)) {\r\n                    for (var index in overloadedSeries[seriesIndex]) {\r\n                        var _i = parseInt(index);\r\n                        if (isNaN(_i) || overloadedSeries[seriesIndex].total / overloadedSeries[seriesIndex].continuousSeries < 3) {\r\n                            continue\r\n                        }\r\n                        if (_i === seriesIndex) {\r\n                            if (2 * overloadedSeries[_i][_i] >= overloadedSeries[_i].pointsCount) {\r\n                                s.autoHidePointMarkers = true;\r\n                                break\r\n                            }\r\n                        } else {\r\n                            if (overloadedSeries[seriesIndex].total >= overloadedSeries[seriesIndex].pointsCount) {\r\n                                s.autoHidePointMarkers = true;\r\n                                break\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        })\r\n    },\r\n    _renderAxes: function(drawOptions, panesBorderOptions) {\r\n        function calculateTitlesWidth(axes) {\r\n            return axes.map(function(axis) {\r\n                if (!axis.getTitle) {\r\n                    return 0\r\n                }\r\n                var title = axis.getTitle();\r\n                return title ? title.bBox.width : 0\r\n            })\r\n        }\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\r\n        var extendedArgAxes = (that._scrollBar ? [that._scrollBar] : []).concat(that._argumentAxes);\r\n        var verticalAxes = rotated ? extendedArgAxes : that._valueAxes;\r\n        var horizontalAxes = rotated ? that._valueAxes : extendedArgAxes;\r\n        var allAxes = verticalAxes.concat(horizontalAxes);\r\n        that._normalizePanesHeight();\r\n        that._updatePanesCanvases(drawOptions);\r\n        var panesCanvases = that.panes.reduce(function(canvases, pane) {\r\n            canvases[pane.name] = (0, _extend2.extend)({}, pane.canvas);\r\n            return canvases\r\n        }, {});\r\n        var paneSizes = that.panes.reduce(function(sizes, pane) {\r\n            sizes[pane.name] = {\r\n                height: pane.height,\r\n                unit: pane.unit\r\n            };\r\n            return sizes\r\n        }, {});\r\n        var cleanPanesCanvases = (0, _extend2.extend)(true, {}, panesCanvases);\r\n        if (!drawOptions.adjustAxes) {\r\n            drawAxesWithTicks(verticalAxes, !rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\r\n            drawAxesWithTicks(horizontalAxes, rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\r\n            performActionOnAxes(allAxes, \"prepareAnimation\");\r\n            that._renderScaleBreaks();\r\n            return false\r\n        }\r\n        if (that._scrollBar) {\r\n            that._scrollBar.setPane(that.panes)\r\n        }\r\n        var vAxesMargins = {\r\n            panes: {}\r\n        };\r\n        var hAxesMargins = getHorizontalAxesMargins(horizontalAxes, function(axis) {\r\n            return axis.estimateMargins(panesCanvases[axis.pane])\r\n        });\r\n        panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\r\n        drawAxesWithTicks(verticalAxes, !rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\r\n        vAxesMargins = getVerticalAxesMargins(verticalAxes);\r\n        panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\r\n        drawAxesWithTicks(horizontalAxes, rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\r\n        hAxesMargins = getHorizontalAxesMargins(horizontalAxes, getAxisMargins);\r\n        panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\r\n        var oldTitlesWidth = calculateTitlesWidth(verticalAxes);\r\n        performActionOnAxes(allAxes, \"updateSize\", panesCanvases, axisAnimationEnabled(drawOptions, that._getVisibleSeries()));\r\n        horizontalAxes.forEach(shiftAxis(\"top\", \"bottom\"));\r\n        verticalAxes.forEach(shiftAxis(\"left\", \"right\"));\r\n        that._renderScaleBreaks();\r\n        that.panes.forEach(function(pane) {\r\n            (0, _extend2.extend)(pane.canvas, panesCanvases[pane.name])\r\n        });\r\n        that._valueAxes.forEach(function(axis) {\r\n            axis.setInitRange()\r\n        });\r\n        verticalAxes.forEach(function(axis, i) {\r\n            if (axis.hasWrap && axis.hasWrap()) {\r\n                var title = axis.getTitle();\r\n                var newTitleWidth = title ? title.bBox.width : 0;\r\n                var offset = newTitleWidth - oldTitlesWidth[i];\r\n                if (\"right\" === axis.getOptions().position) {\r\n                    vAxesMargins.right += offset\r\n                } else {\r\n                    vAxesMargins.left += offset;\r\n                    that.panes.forEach(function(_ref) {\r\n                        var name = _ref.name;\r\n                        return vAxesMargins.panes[name].left += offset\r\n                    })\r\n                }\r\n                panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\r\n                performActionOnAxes(allAxes, \"updateSize\", panesCanvases, false, false);\r\n                oldTitlesWidth = calculateTitlesWidth(verticalAxes)\r\n            }\r\n        });\r\n        return cleanPanesCanvases\r\n    },\r\n    checkForMoreSpaceForPanesCanvas: function() {\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        var panesAreCustomSized = that.panes.filter(function(p) {\r\n            return p.unit\r\n        }).length === that.panes.length;\r\n        var needSpace = false;\r\n        if (panesAreCustomSized) {\r\n            var needHorizontalSpace = 0;\r\n            var needVerticalSpace = 0;\r\n            if (rotated) {\r\n                var argAxisRightMargin = that.getArgumentAxis().getMargins().right;\r\n                var rightPanesIndent = Math.min.apply(Math, that.panes.map(function(p) {\r\n                    return p.canvas.right\r\n                }));\r\n                needHorizontalSpace = that._canvas.right + argAxisRightMargin - rightPanesIndent\r\n            } else {\r\n                var argAxisBottomMargin = that.getArgumentAxis().getMargins().bottom;\r\n                var bottomPanesIndent = Math.min.apply(Math, that.panes.map(function(p) {\r\n                    return p.canvas.bottom\r\n                }));\r\n                needVerticalSpace = that._canvas.bottom + argAxisBottomMargin - bottomPanesIndent\r\n            }\r\n            needSpace = needHorizontalSpace > 0 || needVerticalSpace > 0 ? {\r\n                width: needHorizontalSpace,\r\n                height: needVerticalSpace\r\n            } : false;\r\n            if (0 !== needVerticalSpace) {\r\n                var realSize = that.getSize();\r\n                var customSize = that.option(\"size\");\r\n                var container = that._$element[0];\r\n                var containerHasStyledHeight = !!container.style.height || (0, _utils.checkElementHasPropertyFromStyleSheet)(container, \"height\");\r\n                if (!rotated && !(customSize && customSize.height) && !containerHasStyledHeight) {\r\n                    that._forceResize(realSize.width, realSize.height + needVerticalSpace);\r\n                    needSpace = false\r\n                }\r\n            }\r\n        } else {\r\n            needSpace = that.layoutManager.needMoreSpaceForPanesCanvas(that._getLayoutTargets(), rotated, function(pane) {\r\n                return {\r\n                    width: rotated && !!pane.unit,\r\n                    height: !rotated && !!pane.unit\r\n                }\r\n            })\r\n        }\r\n        return needSpace\r\n    },\r\n    _forceResize: function(width, height) {\r\n        this._renderer.resize(width, height);\r\n        this._updateSize();\r\n        this._setContentSize();\r\n        this._preserveOriginalCanvas();\r\n        this._updateCanvasClipRect(this._canvas)\r\n    },\r\n    _shrinkAxes: function(sizeShortage, panesCanvases) {\r\n        if (!sizeShortage || !panesCanvases) {\r\n            return\r\n        }\r\n        this._renderer.stopAllAnimations(true);\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        var extendedArgAxes = (that._scrollBar ? [that._scrollBar] : []).concat(that._argumentAxes);\r\n        var verticalAxes = rotated ? extendedArgAxes : that._valueAxes;\r\n        var horizontalAxes = rotated ? that._valueAxes : extendedArgAxes;\r\n        var allAxes = verticalAxes.concat(horizontalAxes);\r\n        if (sizeShortage.width || sizeShortage.height) {\r\n            checkUsedSpace(sizeShortage, \"height\", horizontalAxes, getHorizontalAxesMargins);\r\n            checkUsedSpace(sizeShortage, \"width\", verticalAxes, getVerticalAxesMargins);\r\n            performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\r\n            var paneSizes = that.panes.reduce(function(sizes, pane) {\r\n                sizes[pane.name] = {\r\n                    height: pane.height,\r\n                    unit: pane.unit\r\n                };\r\n                return sizes\r\n            }, {});\r\n            panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, getVerticalAxesMargins(verticalAxes), getHorizontalAxesMargins(horizontalAxes, getAxisMargins));\r\n            performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\r\n            horizontalAxes.forEach(shiftAxis(\"top\", \"bottom\"));\r\n            verticalAxes.forEach(shiftAxis(\"left\", \"right\"));\r\n            that.panes.forEach(function(pane) {\r\n                return (0, _extend2.extend)(pane.canvas, panesCanvases[pane.name])\r\n            })\r\n        }\r\n    },\r\n    _getPanesParameters: function() {\r\n        var that = this;\r\n        var panes = that.panes;\r\n        var i;\r\n        var params = [];\r\n        for (i = 0; i < panes.length; i++) {\r\n            if (that._getPaneBorderVisibility(i)) {\r\n                params.push({\r\n                    coords: panes[i].borderCoords,\r\n                    clipRect: that._panesClipRects.fixed[i]\r\n                })\r\n            }\r\n        }\r\n        return params\r\n    },\r\n    _createCrosshairCursor: function() {\r\n        var that = this;\r\n        var options = that._themeManager.getOptions(\"crosshair\") || {};\r\n        var argumentAxis = that.getArgumentAxis();\r\n        var axes = !that._isRotated() ? [\r\n            [argumentAxis], that._valueAxes\r\n        ] : [that._valueAxes, [argumentAxis]];\r\n        var parameters = {\r\n            canvas: that._getCommonCanvas(),\r\n            panes: that._getPanesParameters(),\r\n            axes: axes\r\n        };\r\n        if (!options || !options.enabled) {\r\n            return\r\n        }\r\n        if (!that._crosshair) {\r\n            that._crosshair = new _crosshair2.default.Crosshair(that._renderer, options, parameters, that._crosshairCursorGroup)\r\n        } else {\r\n            that._crosshair.update(options, parameters)\r\n        }\r\n        that._crosshair.render()\r\n    },\r\n    _getCommonCanvas: function() {\r\n        var i;\r\n        var canvas;\r\n        var commonCanvas;\r\n        var panes = this.panes;\r\n        for (i = 0; i < panes.length; i++) {\r\n            canvas = panes[i].canvas;\r\n            if (!commonCanvas) {\r\n                commonCanvas = (0, _extend2.extend)({}, canvas)\r\n            } else {\r\n                commonCanvas.right = canvas.right;\r\n                commonCanvas.bottom = canvas.bottom\r\n            }\r\n        }\r\n        return commonCanvas\r\n    },\r\n    _createPanesBackground: function() {\r\n        var that = this;\r\n        var defaultBackgroundColor = that._themeManager.getOptions(\"commonPaneSettings\").backgroundColor;\r\n        var backgroundColor;\r\n        var renderer = that._renderer;\r\n        var rect;\r\n        var i;\r\n        var rects = [];\r\n        that._panesBackgroundGroup.clear();\r\n        for (i = 0; i < that.panes.length; i++) {\r\n            backgroundColor = that.panes[i].backgroundColor || defaultBackgroundColor;\r\n            if (!backgroundColor || \"none\" === backgroundColor) {\r\n                rects.push(null);\r\n                continue\r\n            }\r\n            rect = renderer.rect(0, 0, 0, 0).attr({\r\n                fill: backgroundColor,\r\n                \"stroke-width\": 0\r\n            }).append(that._panesBackgroundGroup);\r\n            rects.push(rect)\r\n        }\r\n        that.panesBackground = rects\r\n    },\r\n    _fillPanesBackground: function() {\r\n        var that = this;\r\n        var bc;\r\n        (0, _iterator.each)(that.panes, function(i, pane) {\r\n            bc = pane.borderCoords;\r\n            if (null !== that.panesBackground[i]) {\r\n                that.panesBackground[i].attr({\r\n                    x: bc.left,\r\n                    y: bc.top,\r\n                    width: bc.width,\r\n                    height: bc.height\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _calcPaneBorderCoords: function(pane) {\r\n        var canvas = pane.canvas;\r\n        var bc = pane.borderCoords = pane.borderCoords || {};\r\n        bc.left = canvas.left;\r\n        bc.top = canvas.top;\r\n        bc.right = canvas.width - canvas.right;\r\n        bc.bottom = canvas.height - canvas.bottom;\r\n        bc.width = Math.max(bc.right - bc.left, 0);\r\n        bc.height = Math.max(bc.bottom - bc.top, 0)\r\n    },\r\n    _drawPanesBorders: function(panesBorderOptions) {\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        that._panesBorderGroup.linkRemove().clear();\r\n        (0, _iterator.each)(that.panes, function(i, pane) {\r\n            var bc;\r\n            var borderOptions = panesBorderOptions[pane.name];\r\n            var segmentRectParams;\r\n            var attr = {\r\n                fill: \"none\",\r\n                stroke: borderOptions.color,\r\n                \"stroke-opacity\": borderOptions.opacity,\r\n                \"stroke-width\": borderOptions.width,\r\n                dashStyle: borderOptions.dashStyle,\r\n                \"stroke-linecap\": \"square\"\r\n            };\r\n            that._calcPaneBorderCoords(pane, rotated);\r\n            if (!borderOptions.visible) {\r\n                return\r\n            }\r\n            bc = pane.borderCoords;\r\n            segmentRectParams = prepareSegmentRectPoints(bc.left, bc.top, bc.width, bc.height, borderOptions);\r\n            that._renderer.path(segmentRectParams.points, segmentRectParams.pathType).attr(attr).append(that._panesBorderGroup)\r\n        });\r\n        that._panesBorderGroup.linkAppend()\r\n    },\r\n    _createClipRect: function(clipArray, index, left, top, width, height) {\r\n        var that = this;\r\n        var clipRect = clipArray[index];\r\n        if (!clipRect) {\r\n            clipRect = that._renderer.clipRect(left, top, width, height);\r\n            clipArray[index] = clipRect\r\n        } else {\r\n            clipRect.attr({\r\n                x: left,\r\n                y: top,\r\n                width: width,\r\n                height: height\r\n            })\r\n        }\r\n    },\r\n    _createClipRectsForPanes: function() {\r\n        var that = this;\r\n        var canvas = that._canvas;\r\n        (0, _iterator.each)(that.panes, function(i, pane) {\r\n            var needWideClipRect = false;\r\n            var bc = pane.borderCoords;\r\n            var left = bc.left;\r\n            var top = bc.top;\r\n            var width = bc.width;\r\n            var height = bc.height;\r\n            var panesClipRects = that._panesClipRects;\r\n            that._createClipRect(panesClipRects.fixed, i, left, top, width, height);\r\n            that._createClipRect(panesClipRects.base, i, left, top, width, height);\r\n            (0, _iterator.each)(that.series, function(_, series) {\r\n                if (series.pane === pane.name && (series.isFinancialSeries() || series.areErrorBarsVisible())) {\r\n                    needWideClipRect = true\r\n                }\r\n            });\r\n            if (needWideClipRect) {\r\n                if (that._isRotated()) {\r\n                    top = 0;\r\n                    height = canvas.height\r\n                } else {\r\n                    left = 0;\r\n                    width = canvas.width\r\n                }\r\n                that._createClipRect(panesClipRects.wide, i, left, top, width, height)\r\n            } else {\r\n                panesClipRects.wide[i] = null\r\n            }\r\n        })\r\n    },\r\n    _getPaneBorderVisibility: function(paneIndex) {\r\n        var commonPaneBorderVisible = this._themeManager.getOptions(\"commonPaneSettings\").border.visible;\r\n        var pane = this.panes[paneIndex] || {};\r\n        var paneBorder = pane.border || {};\r\n        return \"visible\" in paneBorder ? paneBorder.visible : commonPaneBorderVisible\r\n    },\r\n    _getCanvasForPane: function(paneName) {\r\n        var panes = this.panes;\r\n        var panesNumber = panes.length;\r\n        var i;\r\n        for (i = 0; i < panesNumber; i++) {\r\n            if (panes[i].name === paneName) {\r\n                return panes[i].canvas\r\n            }\r\n        }\r\n    },\r\n    _getTrackerSettings: function() {\r\n        var that = this;\r\n        var themeManager = that._themeManager;\r\n        return (0, _extend2.extend)(this.callBase(), {\r\n            chart: that,\r\n            rotated: that._isRotated(),\r\n            crosshair: that._getCrosshairOptions().enabled ? that._crosshair : null,\r\n            stickyHovering: themeManager.getOptions(\"stickyHovering\")\r\n        })\r\n    },\r\n    _resolveLabelOverlappingStack: function() {\r\n        var that = this;\r\n        var isRotated = that._isRotated();\r\n        var shiftDirection = isRotated ? function(box, length) {\r\n            return {\r\n                x: box.x - length,\r\n                y: box.y\r\n            }\r\n        } : function(box, length) {\r\n            return {\r\n                x: box.x,\r\n                y: box.y - length\r\n            }\r\n        };\r\n        (0, _iterator.each)(that._getStackPoints(), function(_, stacks) {\r\n            (0, _iterator.each)(stacks, function(_, points) {\r\n                _base_chart.overlapping.resolveLabelOverlappingInOneDirection(points, that._getCommonCanvas(), isRotated, shiftDirection, function(a, b) {\r\n                    var coordPosition = isRotated ? 1 : 0;\r\n                    var figureCenter1 = a.labels[0].getFigureCenter()[coordPosition];\r\n                    var figureCenter12 = b.labels[0].getFigureCenter()[coordPosition];\r\n                    if (figureCenter1 - figureCenter12 === 0) {\r\n                        return (a.value() - b.value()) * (a.labels[0].getPoint().series.getValueAxis().getTranslator().isInverted() ? -1 : 1)\r\n                    }\r\n                    return 0\r\n                })\r\n            })\r\n        })\r\n    },\r\n    _getStackPoints: function() {\r\n        var stackPoints = {};\r\n        var visibleSeries = this._getVisibleSeries();\r\n        (0, _iterator.each)(visibleSeries, function(_, singleSeries) {\r\n            var points = singleSeries.getPoints();\r\n            var stackName = singleSeries.getStackName() || null;\r\n            (0, _iterator.each)(points, function(_, point) {\r\n                var argument = point.argument;\r\n                if (!stackPoints[argument]) {\r\n                    stackPoints[argument] = {}\r\n                }\r\n                if (!stackPoints[argument][stackName]) {\r\n                    stackPoints[argument][stackName] = []\r\n                }\r\n                stackPoints[argument][stackName].push(point)\r\n            })\r\n        });\r\n        return stackPoints\r\n    },\r\n    _getCrosshairOptions: function() {\r\n        return this._getOption(\"crosshair\")\r\n    },\r\n    zoomArgument: function(min, max) {\r\n        var that = this;\r\n        if (!that._initialized || !(0, _type.isDefined)(min) && !(0, _type.isDefined)(max)) {\r\n            return\r\n        }\r\n        that.getArgumentAxis().visualRange([min, max])\r\n    },\r\n    resetVisualRange: function() {\r\n        var that = this;\r\n        var axes = that._argumentAxes;\r\n        var nonVirtualArgumentAxis = that.getArgumentAxis();\r\n        axes.forEach(function(axis) {\r\n            axis.resetVisualRange(nonVirtualArgumentAxis !== axis);\r\n            that._applyCustomVisualRangeOption(axis)\r\n        });\r\n        that.callBase()\r\n    },\r\n    getVisibleArgumentBounds: function() {\r\n        var translator = this._argumentAxes[0].getTranslator();\r\n        var range = translator.getBusinessRange();\r\n        var isDiscrete = \"discrete\" === range.axisType;\r\n        var categories = range.categories;\r\n        return {\r\n            minVisible: isDiscrete ? range.minVisible || categories[0] : range.minVisible,\r\n            maxVisible: isDiscrete ? range.maxVisible || categories[categories.length - 1] : range.maxVisible\r\n        }\r\n    },\r\n    _change_FULL_RENDER: function() {\r\n        this.callBase();\r\n        if (this._changes.has(VISUAL_RANGE)) {\r\n            this._raiseZoomEndHandlers()\r\n        }\r\n    },\r\n    _getAxesForScaling: function() {\r\n        return [this.getArgumentAxis()].concat(this._valueAxes)\r\n    },\r\n    _applyVisualRangeByVirtualAxes: function(axis, range) {\r\n        var that = this;\r\n        if (axis.isArgumentAxis) {\r\n            if (axis !== that.getArgumentAxis()) {\r\n                return true\r\n            }\r\n            that._argumentAxes.filter(function(a) {\r\n                return a !== axis\r\n            }).forEach(function(a) {\r\n                return a.visualRange(range, {\r\n                    start: true,\r\n                    end: true\r\n                })\r\n            })\r\n        }\r\n        return false\r\n    },\r\n    _raiseZoomEndHandlers: function() {\r\n        this._argumentAxes.forEach(function(axis) {\r\n            return axis.handleZoomEnd()\r\n        });\r\n        this.callBase()\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        (0, _extend2.extend)(this._optionsByReference, {\r\n            \"argumentAxis.visualRange\": true\r\n        })\r\n    },\r\n    option: function option() {\r\n        var option = this.callBase.apply(this, arguments);\r\n        if (\"array\" === (0, _type.type)(this._options.valueAxis)) {\r\n            for (var i = 0; i < this._options.valueAxis.length; i++) {\r\n                var optionPath = \"valueAxis[\".concat(i, \"].visualRange\");\r\n                this._optionsByReference[optionPath] = true\r\n            }\r\n        }\r\n        return option\r\n    },\r\n    _notifyVisualRange: function() {\r\n        var that = this;\r\n        var argAxis = that._argumentAxes[0];\r\n        var argumentVisualRange = (0, _utils.convertVisualRangeObject)(argAxis.visualRange(), !_isArray(that.option(\"argumentAxis.visualRange\")));\r\n        if (!argAxis.skipEventRising || !(0, _utils.rangesAreEqual)(argumentVisualRange, that.option(\"argumentAxis.visualRange\"))) {\r\n            that.option(\"argumentAxis.visualRange\", argumentVisualRange)\r\n        } else {\r\n            argAxis.skipEventRising = null\r\n        }\r\n        that.callBase()\r\n    }\r\n});\r\ndxChart.addPlugin(require(\"./chart_components/shutter_zoom\"));\r\ndxChart.addPlugin(require(\"./chart_components/zoom_and_pan\"));\r\ndxChart.addPlugin(require(\"./core/annotations\").plugins.core);\r\ndxChart.addPlugin(require(\"./core/annotations\").plugins.chart);\r\n(0, _component_registrator2.default)(\"dxChart\", dxChart);\r\nmodule.exports = dxChart;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}