{"ast":null,"code":"/**\r\n * DevExtreme (ui/text_box/ui.text_editor.mask.strategy.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _dom = require(\"../../core/utils/dom\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar MASK_EVENT_NAMESPACE = \"dxMask\";\nvar BLUR_EVENT = \"blur beforedeactivate\";\nvar EMPTY_CHAR = \" \";\n\nvar BaseMaskStrategy = function () {\n  function BaseMaskStrategy(editor) {\n    _classCallCheck(this, BaseMaskStrategy);\n\n    this.editor = editor;\n    this.DIRECTION = {\n      FORWARD: \"forward\",\n      BACKWARD: \"backward\"\n    };\n    this.NAME = this._getStrategyName();\n  }\n\n  _createClass(BaseMaskStrategy, [{\n    key: \"_getStrategyName\",\n    value: function value() {\n      return \"base\";\n    }\n  }, {\n    key: \"editorOption\",\n    value: function value() {\n      var _this$editor;\n\n      return (_this$editor = this.editor).option.apply(_this$editor, arguments);\n    }\n  }, {\n    key: \"editorInput\",\n    value: function value() {\n      return this.editor._input();\n    }\n  }, {\n    key: \"editorCaret\",\n    value: function value(newCaret) {\n      if (!newCaret) {\n        return this.editor._caret();\n      }\n\n      this.editor._caret(newCaret);\n    }\n  }, {\n    key: \"getHandler\",\n    value: function value(handlerName) {\n      var handler = this[\"_\".concat(handlerName, \"Handler\")] || function () {};\n\n      return handler.bind(this);\n    }\n  }, {\n    key: \"attachEvents\",\n    value: function value() {\n      var _this = this;\n\n      var $input = this.editorInput();\n      this.getHandleEventNames().forEach(function (eventName) {\n        var subscriptionName = (0, _utils.addNamespace)(eventName.toLowerCase(), MASK_EVENT_NAMESPACE);\n\n        _events_engine2.default.on($input, subscriptionName, _this.getEventHandler(eventName));\n      });\n\n      this._attachChangeEventHandlers();\n    }\n  }, {\n    key: \"getHandleEventNames\",\n    value: function value() {\n      return [\"focusIn\", \"focusOut\", \"keyDown\", \"input\", \"paste\", \"cut\", \"drop\"];\n    }\n  }, {\n    key: \"getEventHandler\",\n    value: function value(eventName) {\n      return this[\"_\".concat(eventName, \"Handler\")].bind(this);\n    }\n  }, {\n    key: \"detachEvents\",\n    value: function value() {\n      _events_engine2.default.off(this.editorInput(), \".\".concat(MASK_EVENT_NAMESPACE));\n    }\n  }, {\n    key: \"_attachChangeEventHandlers\",\n    value: function value() {\n      if ((0, _array.inArray)(\"change\", this.editorOption(\"valueChangeEvent\").split(\" \")) === -1) {\n        return;\n      }\n\n      _events_engine2.default.on(this.editorInput(), (0, _utils.addNamespace)(BLUR_EVENT, MASK_EVENT_NAMESPACE), function (e) {\n        this._suppressCaretChanging(this._changeHandler, [e]);\n\n        this._changeHandler(e);\n      }.bind(this.editor));\n    }\n  }, {\n    key: \"_focusInHandler\",\n    value: function value() {\n      this.editor._showMaskPlaceholder();\n\n      this.editor._direction(this.DIRECTION.FORWARD);\n\n      if (!this.editor._isValueEmpty() && this.editorOption(\"isValid\")) {\n        this.editor._adjustCaret();\n      } else {\n        var caret = this.editor._maskRulesChain.first();\n\n        this._caretTimeout = setTimeout(function () {\n          this._caret({\n            start: caret,\n            end: caret\n          });\n        }.bind(this.editor), 0);\n      }\n    }\n  }, {\n    key: \"_focusOutHandler\",\n    value: function value(event) {\n      this.editor._changeHandler(event);\n\n      if (\"onFocus\" === this.editorOption(\"showMaskMode\") && this.editor._isValueEmpty()) {\n        this.editorOption(\"text\", \"\");\n\n        this.editor._renderDisplayText(\"\");\n      }\n    }\n  }, {\n    key: \"_cutHandler\",\n    value: function value(event) {\n      var caret = this.editorCaret();\n      var selectedText = this.editorInput().val().substring(caret.start, caret.end);\n\n      this.editor._maskKeyHandler(event, function () {\n        return (0, _dom.clipboardText)(event, selectedText);\n      });\n    }\n  }, {\n    key: \"_dropHandler\",\n    value: function value() {\n      this._clearDragTimer();\n\n      this._dragTimer = setTimeout(function () {\n        this.option(\"value\", this._convertToValue(this._input().val()));\n      }.bind(this.editor));\n    }\n  }, {\n    key: \"_clearDragTimer\",\n    value: function value() {\n      clearTimeout(this._dragTimer);\n    }\n  }, {\n    key: \"_keyDownHandler\",\n    value: function value() {\n      this._keyPressHandled = false;\n    }\n  }, {\n    key: \"_pasteHandler\",\n    value: function value(event) {\n      var editor = this.editor;\n      this._keyPressHandled = true;\n      var caret = this.editorCaret();\n\n      editor._maskKeyHandler(event, function () {\n        var pastingText = (0, _dom.clipboardText)(event);\n\n        var restText = editor._maskRulesChain.text().substring(caret.end);\n\n        var accepted = editor._handleChain({\n          text: pastingText,\n          start: caret.start,\n          length: pastingText.length\n        });\n\n        var newCaret = caret.start + accepted;\n\n        editor._handleChain({\n          text: restText,\n          start: newCaret,\n          length: restText.length\n        });\n\n        editor._caret({\n          start: newCaret,\n          end: newCaret\n        });\n      });\n    }\n  }, {\n    key: \"runWithoutEventProcessing\",\n    value: function value(action) {\n      var keyPressHandled = this._keyPressHandled;\n      this._keyPressHandled = true;\n      action();\n      this._keyPressHandled = keyPressHandled;\n    }\n  }, {\n    key: \"_backspaceHandler\",\n    value: function value() {}\n  }, {\n    key: \"_delHandler\",\n    value: function value(event) {\n      var editor = this.editor;\n      this._keyPressHandled = true;\n\n      editor._maskKeyHandler(event, function () {\n        return !editor._hasSelection() && editor._handleKey(EMPTY_CHAR);\n      });\n    }\n  }, {\n    key: \"clean\",\n    value: function value() {\n      this._clearDragTimer();\n\n      clearTimeout(this._backspaceHandlerTimeout);\n      clearTimeout(this._caretTimeout);\n    }\n  }]);\n\n  return BaseMaskStrategy;\n}();\n\nexports.default = BaseMaskStrategy;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/text_box/ui.text_editor.mask.strategy.base.js"],"names":["Object","value","exports","_events_engine","require","_events_engine2","_interopRequireDefault","_utils","_array","_dom","obj","instance","i","props","descriptor","_defineProperties","Constructor","MASK_EVENT_NAMESPACE","BLUR_EVENT","EMPTY_CHAR","BaseMaskStrategy","_classCallCheck","FORWARD","BACKWARD","_createClass","key","_this$editor","handler","_this","$input","subscriptionName","eventName","caret","setTimeout","start","end","selectedText","clearTimeout","editor","pastingText","restText","accepted","text","length","newCaret","keyPressHandled","action"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/text_box/ui.text_editor.mask.strategy.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.default = void 0;\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _dom = require(\"../../core/utils/dom\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar MASK_EVENT_NAMESPACE = \"dxMask\";\r\nvar BLUR_EVENT = \"blur beforedeactivate\";\r\nvar EMPTY_CHAR = \" \";\r\nvar BaseMaskStrategy = function() {\r\n    function BaseMaskStrategy(editor) {\r\n        _classCallCheck(this, BaseMaskStrategy);\r\n        this.editor = editor;\r\n        this.DIRECTION = {\r\n            FORWARD: \"forward\",\r\n            BACKWARD: \"backward\"\r\n        };\r\n        this.NAME = this._getStrategyName()\r\n    }\r\n    _createClass(BaseMaskStrategy, [{\r\n        key: \"_getStrategyName\",\r\n        value: function() {\r\n            return \"base\"\r\n        }\r\n    }, {\r\n        key: \"editorOption\",\r\n        value: function() {\r\n            var _this$editor;\r\n            return (_this$editor = this.editor).option.apply(_this$editor, arguments)\r\n        }\r\n    }, {\r\n        key: \"editorInput\",\r\n        value: function() {\r\n            return this.editor._input()\r\n        }\r\n    }, {\r\n        key: \"editorCaret\",\r\n        value: function(newCaret) {\r\n            if (!newCaret) {\r\n                return this.editor._caret()\r\n            }\r\n            this.editor._caret(newCaret)\r\n        }\r\n    }, {\r\n        key: \"getHandler\",\r\n        value: function(handlerName) {\r\n            var handler = this[\"_\".concat(handlerName, \"Handler\")] || function() {};\r\n            return handler.bind(this)\r\n        }\r\n    }, {\r\n        key: \"attachEvents\",\r\n        value: function() {\r\n            var _this = this;\r\n            var $input = this.editorInput();\r\n            this.getHandleEventNames().forEach(function(eventName) {\r\n                var subscriptionName = (0, _utils.addNamespace)(eventName.toLowerCase(), MASK_EVENT_NAMESPACE);\r\n                _events_engine2.default.on($input, subscriptionName, _this.getEventHandler(eventName))\r\n            });\r\n            this._attachChangeEventHandlers()\r\n        }\r\n    }, {\r\n        key: \"getHandleEventNames\",\r\n        value: function() {\r\n            return [\"focusIn\", \"focusOut\", \"keyDown\", \"input\", \"paste\", \"cut\", \"drop\"]\r\n        }\r\n    }, {\r\n        key: \"getEventHandler\",\r\n        value: function(eventName) {\r\n            return this[\"_\".concat(eventName, \"Handler\")].bind(this)\r\n        }\r\n    }, {\r\n        key: \"detachEvents\",\r\n        value: function() {\r\n            _events_engine2.default.off(this.editorInput(), \".\".concat(MASK_EVENT_NAMESPACE))\r\n        }\r\n    }, {\r\n        key: \"_attachChangeEventHandlers\",\r\n        value: function() {\r\n            if ((0, _array.inArray)(\"change\", this.editorOption(\"valueChangeEvent\").split(\" \")) === -1) {\r\n                return\r\n            }\r\n            _events_engine2.default.on(this.editorInput(), (0, _utils.addNamespace)(BLUR_EVENT, MASK_EVENT_NAMESPACE), function(e) {\r\n                this._suppressCaretChanging(this._changeHandler, [e]);\r\n                this._changeHandler(e)\r\n            }.bind(this.editor))\r\n        }\r\n    }, {\r\n        key: \"_focusInHandler\",\r\n        value: function() {\r\n            this.editor._showMaskPlaceholder();\r\n            this.editor._direction(this.DIRECTION.FORWARD);\r\n            if (!this.editor._isValueEmpty() && this.editorOption(\"isValid\")) {\r\n                this.editor._adjustCaret()\r\n            } else {\r\n                var caret = this.editor._maskRulesChain.first();\r\n                this._caretTimeout = setTimeout(function() {\r\n                    this._caret({\r\n                        start: caret,\r\n                        end: caret\r\n                    })\r\n                }.bind(this.editor), 0)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_focusOutHandler\",\r\n        value: function(event) {\r\n            this.editor._changeHandler(event);\r\n            if (\"onFocus\" === this.editorOption(\"showMaskMode\") && this.editor._isValueEmpty()) {\r\n                this.editorOption(\"text\", \"\");\r\n                this.editor._renderDisplayText(\"\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_cutHandler\",\r\n        value: function(event) {\r\n            var caret = this.editorCaret();\r\n            var selectedText = this.editorInput().val().substring(caret.start, caret.end);\r\n            this.editor._maskKeyHandler(event, function() {\r\n                return (0, _dom.clipboardText)(event, selectedText)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_dropHandler\",\r\n        value: function() {\r\n            this._clearDragTimer();\r\n            this._dragTimer = setTimeout(function() {\r\n                this.option(\"value\", this._convertToValue(this._input().val()))\r\n            }.bind(this.editor))\r\n        }\r\n    }, {\r\n        key: \"_clearDragTimer\",\r\n        value: function() {\r\n            clearTimeout(this._dragTimer)\r\n        }\r\n    }, {\r\n        key: \"_keyDownHandler\",\r\n        value: function() {\r\n            this._keyPressHandled = false\r\n        }\r\n    }, {\r\n        key: \"_pasteHandler\",\r\n        value: function(event) {\r\n            var editor = this.editor;\r\n            this._keyPressHandled = true;\r\n            var caret = this.editorCaret();\r\n            editor._maskKeyHandler(event, function() {\r\n                var pastingText = (0, _dom.clipboardText)(event);\r\n                var restText = editor._maskRulesChain.text().substring(caret.end);\r\n                var accepted = editor._handleChain({\r\n                    text: pastingText,\r\n                    start: caret.start,\r\n                    length: pastingText.length\r\n                });\r\n                var newCaret = caret.start + accepted;\r\n                editor._handleChain({\r\n                    text: restText,\r\n                    start: newCaret,\r\n                    length: restText.length\r\n                });\r\n                editor._caret({\r\n                    start: newCaret,\r\n                    end: newCaret\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"runWithoutEventProcessing\",\r\n        value: function(action) {\r\n            var keyPressHandled = this._keyPressHandled;\r\n            this._keyPressHandled = true;\r\n            action();\r\n            this._keyPressHandled = keyPressHandled\r\n        }\r\n    }, {\r\n        key: \"_backspaceHandler\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"_delHandler\",\r\n        value: function(event) {\r\n            var editor = this.editor;\r\n            this._keyPressHandled = true;\r\n            editor._maskKeyHandler(event, function() {\r\n                return !editor._hasSelection() && editor._handleKey(EMPTY_CHAR)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"clean\",\r\n        value: function() {\r\n            this._clearDragTimer();\r\n            clearTimeout(this._backspaceHandlerTimeout);\r\n            clearTimeout(this._caretTimeout)\r\n        }\r\n    }]);\r\n    return BaseMaskStrategy\r\n}();\r\nexports.default = BaseMaskStrategy;\r\n"]},"metadata":{},"sourceType":"module"}