{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.search.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _uiGrid_core = require(\"./ui.grid_core.utils\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _query = require(\"../../data/query\");\n\nvar _query2 = _interopRequireDefault(_query);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar SEARCH_PANEL_CLASS = \"search-panel\";\nvar SEARCH_TEXT_CLASS = \"search-text\";\nvar HEADER_PANEL_CLASS = \"header-panel\";\nvar FILTERING_TIMEOUT = 700;\n\nfunction allowSearch(column) {\n  return (0, _type.isDefined)(column.allowSearch) ? column.allowSearch : column.allowFiltering;\n}\n\nfunction parseValue(column, text) {\n  var lookup = column.lookup;\n\n  if (!column.parseValue) {\n    return text;\n  }\n\n  if (lookup) {\n    return column.parseValue.call(lookup, text);\n  }\n\n  return column.parseValue(text);\n}\n\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      searchPanel: {\n        visible: false,\n        width: 160,\n        placeholder: _message2.default.format(\"dxDataGrid-searchPanelPlaceholder\"),\n        highlightSearchText: true,\n        highlightCaseSensitive: false,\n        text: \"\",\n        searchVisibleColumnsOnly: false\n      }\n    };\n  },\n  extenders: {\n    controllers: {\n      data: function () {\n        var calculateSearchFilter = function calculateSearchFilter(that, text) {\n          var i;\n          var column;\n\n          var columns = that._columnsController.getColumns();\n\n          var searchVisibleColumnsOnly = that.option(\"searchPanel.searchVisibleColumnsOnly\");\n          var filterValue;\n          var lookup;\n          var filters = [];\n\n          if (!text) {\n            return null;\n          }\n\n          function onQueryDone(items) {\n            var i;\n            var valueGetter = (0, _data.compileGetter)(lookup.valueExpr);\n            var value;\n\n            for (i = 0; i < items.length; i++) {\n              value = valueGetter(items[i]);\n              filters.push(column.createFilterExpression(value, null, \"search\"));\n            }\n          }\n\n          for (i = 0; i < columns.length; i++) {\n            column = columns[i];\n\n            if (searchVisibleColumnsOnly && !column.visible) {\n              continue;\n            }\n\n            if (allowSearch(column) && column.calculateFilterExpression) {\n              lookup = column.lookup;\n              filterValue = parseValue(column, text);\n\n              if (lookup && lookup.items) {\n                (0, _query2.default)(lookup.items).filter(column.createFilterExpression.call({\n                  dataField: lookup.displayExpr,\n                  dataType: lookup.dataType,\n                  calculateFilterExpression: column.calculateFilterExpression\n                }, filterValue, null, \"search\")).enumerate().done(onQueryDone);\n              } else {\n                if (void 0 !== filterValue) {\n                  filters.push(column.createFilterExpression(filterValue, null, \"search\"));\n                }\n              }\n            }\n          }\n\n          return (0, _uiGrid_core.combineFilters)(filters, \"or\");\n        };\n\n        return {\n          publicMethods: function publicMethods() {\n            return this.callBase().concat([\"searchByText\"]);\n          },\n          _calculateAdditionalFilter: function _calculateAdditionalFilter() {\n            var that = this;\n            var filter = that.callBase();\n            var searchFilter = calculateSearchFilter(that, that.option(\"searchPanel.text\"));\n            return (0, _uiGrid_core.combineFilters)([filter, searchFilter]);\n          },\n          searchByText: function searchByText(text) {\n            this.option(\"searchPanel.text\", text);\n          },\n          optionChanged: function optionChanged(args) {\n            var that = this;\n\n            switch (args.fullName) {\n              case \"searchPanel.text\":\n              case \"searchPanel\":\n                that._applyFilter();\n\n                args.handled = true;\n                break;\n\n              default:\n                that.callBase(args);\n            }\n          }\n        };\n      }()\n    },\n    views: {\n      headerPanel: function () {\n        var getSearchPanelOptions = function getSearchPanelOptions(that) {\n          return that.option(\"searchPanel\");\n        };\n\n        return {\n          _getToolbarItems: function _getToolbarItems() {\n            var items = this.callBase();\n            return this._prepareSearchItem(items);\n          },\n          _prepareSearchItem: function _prepareSearchItem(items) {\n            var that = this;\n            var dataController = that.getController(\"data\");\n            var searchPanelOptions = getSearchPanelOptions(that);\n\n            if (searchPanelOptions && searchPanelOptions.visible) {\n              var toolbarItem = {\n                template: function template(data, index, container) {\n                  var $search = (0, _renderer2.default)(\"<div>\").addClass(that.addWidgetPrefix(SEARCH_PANEL_CLASS)).appendTo(container);\n                  that.getController(\"editorFactory\").createEditor($search, {\n                    width: searchPanelOptions.width,\n                    placeholder: searchPanelOptions.placeholder,\n                    parentType: \"searchPanel\",\n                    value: that.option(\"searchPanel.text\"),\n                    updateValueTimeout: FILTERING_TIMEOUT,\n                    setValue: function setValue(value) {\n                      dataController.searchByText(value);\n                    },\n                    editorOptions: {\n                      inputAttr: {\n                        \"aria-label\": _message2.default.format(\"dxDataGrid-ariaSearchInGrid\")\n                      }\n                    }\n                  });\n                  that.resize();\n                },\n                name: \"searchPanel\",\n                location: \"after\",\n                locateInMenu: \"never\",\n                sortIndex: 40\n              };\n              items.push(toolbarItem);\n            }\n\n            return items;\n          },\n          getSearchTextEditor: function getSearchTextEditor() {\n            var that = this;\n            var $element = that.element();\n            var $searchPanel = $element.find(\".\" + that.addWidgetPrefix(SEARCH_PANEL_CLASS)).filter(function () {\n              return (0, _renderer2.default)(this).closest(\".\" + that.addWidgetPrefix(HEADER_PANEL_CLASS)).is($element);\n            });\n\n            if ($searchPanel.length) {\n              return $searchPanel.dxTextBox(\"instance\");\n            }\n\n            return null;\n          },\n          isVisible: function isVisible() {\n            var searchPanelOptions = getSearchPanelOptions(this);\n            return this.callBase() || searchPanelOptions && searchPanelOptions.visible;\n          },\n          optionChanged: function optionChanged(args) {\n            if (\"searchPanel\" === args.name) {\n              if (\"searchPanel.text\" === args.fullName) {\n                var editor = this.getSearchTextEditor();\n\n                if (editor) {\n                  editor.option(\"value\", args.value);\n                }\n              } else {\n                this._invalidate();\n              }\n\n              args.handled = true;\n            } else {\n              this.callBase(args);\n            }\n          }\n        };\n      }(),\n      rowsView: {\n        init: function init() {\n          this.callBase.apply(this, arguments);\n          this._searchParams = [];\n        },\n        _getFormattedSearchText: function _getFormattedSearchText(column, searchText) {\n          var value = parseValue(column, searchText);\n          var formatOptions = (0, _uiGrid_core.getFormatOptionsByColumn)(column, \"search\");\n          return (0, _uiGrid_core.formatValue)(value, formatOptions);\n        },\n        _getStringNormalizer: function _getStringNormalizer() {\n          var isCaseSensitive = this.option(\"searchPanel.highlightCaseSensitive\");\n          return function (str) {\n            return isCaseSensitive ? str : str.toLowerCase();\n          };\n        },\n        _findHighlightingTextNodes: function _findHighlightingTextNodes(column, cellElement, searchText) {\n          var that = this;\n          var $parent = cellElement.parent();\n          var $items;\n          var columnIndex;\n\n          var stringNormalizer = this._getStringNormalizer();\n\n          var normalizedSearchText = stringNormalizer(searchText);\n\n          if (!$parent.length) {\n            $parent = (0, _renderer2.default)(\"<div>\").append(cellElement);\n          } else {\n            if (column) {\n              if (column.groupIndex >= 0 && !column.showWhenGrouped) {\n                $items = cellElement;\n              } else {\n                columnIndex = that._columnsController.getVisibleIndex(column.index);\n                $items = $parent.children(\"td\").eq(columnIndex).find(\"*\");\n              }\n            }\n          }\n\n          $items = $items && $items.length ? $items : $parent.find(\"*\");\n          $items = $items.filter(function (_, element) {\n            var $contents = (0, _renderer2.default)(element).contents();\n\n            for (var i = 0; i < $contents.length; i++) {\n              var node = $contents.get(i);\n\n              if (3 === node.nodeType) {\n                return stringNormalizer(node.textContent || node.nodeValue).indexOf(normalizedSearchText) > -1;\n              }\n\n              return false;\n            }\n          });\n          return $items;\n        },\n        _highlightSearchTextCore: function _highlightSearchTextCore($textNode, searchText) {\n          var that = this;\n          var $searchTextSpan = (0, _renderer2.default)(\"<span>\").addClass(that.addWidgetPrefix(SEARCH_TEXT_CLASS));\n          var text = $textNode.text();\n          var firstContentElement = $textNode[0];\n\n          var stringNormalizer = this._getStringNormalizer();\n\n          var index = stringNormalizer(text).indexOf(stringNormalizer(searchText));\n\n          if (index >= 0) {\n            if (firstContentElement.textContent) {\n              firstContentElement.textContent = text.substr(0, index);\n            } else {\n              firstContentElement.nodeValue = text.substr(0, index);\n            }\n\n            $textNode.after($searchTextSpan.text(text.substr(index, searchText.length)));\n            $textNode = (0, _renderer2.default)(_dom_adapter2.default.createTextNode(text.substr(index + searchText.length))).insertAfter($searchTextSpan);\n            return that._highlightSearchTextCore($textNode, searchText);\n          }\n        },\n        _highlightSearchText: function _highlightSearchText(cellElement, isEquals, column) {\n          var that = this;\n\n          var stringNormalizer = this._getStringNormalizer();\n\n          var searchText = that.option(\"searchPanel.text\");\n\n          if (isEquals && column) {\n            searchText = searchText && that._getFormattedSearchText(column, searchText);\n          }\n\n          if (searchText && that.option(\"searchPanel.highlightSearchText\")) {\n            var textNodes = that._findHighlightingTextNodes(column, cellElement, searchText);\n\n            (0, _iterator.each)(textNodes, function (_, element) {\n              (0, _iterator.each)((0, _renderer2.default)(element).contents(), function (_, textNode) {\n                if (isEquals) {\n                  if (stringNormalizer((0, _renderer2.default)(textNode).text()) === stringNormalizer(searchText)) {\n                    (0, _renderer2.default)(this).replaceWith((0, _renderer2.default)(\"<span>\").addClass(that.addWidgetPrefix(SEARCH_TEXT_CLASS)).text((0, _renderer2.default)(textNode).text()));\n                  }\n                } else {\n                  that._highlightSearchTextCore((0, _renderer2.default)(textNode), searchText);\n                }\n              });\n            });\n          }\n        },\n        _renderCore: function _renderCore() {\n          this.callBase.apply(this, arguments);\n\n          if (this.option(\"rowTemplate\")) {\n            if (this.option(\"templatesRenderAsynchronously\")) {\n              clearTimeout(this._highlightTimer);\n              this._highlightTimer = setTimeout(function () {\n                this._highlightSearchText(this._getTableElement());\n              }.bind(this));\n            } else {\n              this._highlightSearchText(this._getTableElement());\n            }\n          }\n        },\n        _updateCell: function _updateCell($cell, parameters) {\n          var column = parameters.column;\n          var dataType = column.lookup && column.lookup.dataType || column.dataType;\n          var isEquals = \"string\" !== dataType;\n\n          if (allowSearch(column)) {\n            if (this.option(\"templatesRenderAsynchronously\")) {\n              if (!this._searchParams.length) {\n                clearTimeout(this._highlightTimer);\n                this._highlightTimer = setTimeout(function () {\n                  this._searchParams.forEach(function (params) {\n                    this._highlightSearchText.apply(this, params);\n                  }.bind(this));\n\n                  this._searchParams = [];\n                }.bind(this));\n              }\n\n              this._searchParams.push([$cell, isEquals, column]);\n            } else {\n              this._highlightSearchText($cell, isEquals, column);\n            }\n          }\n\n          this.callBase($cell, parameters);\n        },\n        dispose: function dispose() {\n          clearTimeout(this._highlightTimer);\n          this.callBase();\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.search.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_dom_adapter","_dom_adapter2","_type","_data","_iterator","_uiGrid_core","_message","_message2","_query","_query2","obj","SEARCH_PANEL_CLASS","SEARCH_TEXT_CLASS","HEADER_PANEL_CLASS","FILTERING_TIMEOUT","column","lookup","module","defaultOptions","searchPanel","visible","width","placeholder","highlightSearchText","highlightCaseSensitive","text","searchVisibleColumnsOnly","extenders","controllers","data","calculateSearchFilter","columns","that","filters","valueGetter","i","items","value","allowSearch","filterValue","parseValue","dataField","dataType","calculateFilterExpression","publicMethods","_calculateAdditionalFilter","filter","searchFilter","searchByText","optionChanged","args","views","headerPanel","getSearchPanelOptions","_getToolbarItems","_prepareSearchItem","dataController","searchPanelOptions","toolbarItem","template","$search","parentType","updateValueTimeout","setValue","editorOptions","inputAttr","name","location","locateInMenu","sortIndex","getSearchTextEditor","$element","$searchPanel","isVisible","editor","rowsView","init","_getFormattedSearchText","formatOptions","_getStringNormalizer","isCaseSensitive","str","_findHighlightingTextNodes","$parent","cellElement","stringNormalizer","normalizedSearchText","$items","columnIndex","$contents","node","_highlightSearchTextCore","$searchTextSpan","$textNode","firstContentElement","index","searchText","_highlightSearchText","isEquals","textNodes","_renderCore","clearTimeout","setTimeout","_updateCell","parameters","dispose"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.search.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _uiGrid_core = require(\"./ui.grid_core.utils\");\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _query = require(\"../../data/query\");\r\nvar _query2 = _interopRequireDefault(_query);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar SEARCH_PANEL_CLASS = \"search-panel\";\r\nvar SEARCH_TEXT_CLASS = \"search-text\";\r\nvar HEADER_PANEL_CLASS = \"header-panel\";\r\nvar FILTERING_TIMEOUT = 700;\r\n\r\nfunction allowSearch(column) {\r\n    return (0, _type.isDefined)(column.allowSearch) ? column.allowSearch : column.allowFiltering\r\n}\r\n\r\nfunction parseValue(column, text) {\r\n    var lookup = column.lookup;\r\n    if (!column.parseValue) {\r\n        return text\r\n    }\r\n    if (lookup) {\r\n        return column.parseValue.call(lookup, text)\r\n    }\r\n    return column.parseValue(text)\r\n}\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            searchPanel: {\r\n                visible: false,\r\n                width: 160,\r\n                placeholder: _message2.default.format(\"dxDataGrid-searchPanelPlaceholder\"),\r\n                highlightSearchText: true,\r\n                highlightCaseSensitive: false,\r\n                text: \"\",\r\n                searchVisibleColumnsOnly: false\r\n            }\r\n        }\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            data: function() {\r\n                var calculateSearchFilter = function(that, text) {\r\n                    var i;\r\n                    var column;\r\n                    var columns = that._columnsController.getColumns();\r\n                    var searchVisibleColumnsOnly = that.option(\"searchPanel.searchVisibleColumnsOnly\");\r\n                    var filterValue;\r\n                    var lookup;\r\n                    var filters = [];\r\n                    if (!text) {\r\n                        return null\r\n                    }\r\n\r\n                    function onQueryDone(items) {\r\n                        var i;\r\n                        var valueGetter = (0, _data.compileGetter)(lookup.valueExpr);\r\n                        var value;\r\n                        for (i = 0; i < items.length; i++) {\r\n                            value = valueGetter(items[i]);\r\n                            filters.push(column.createFilterExpression(value, null, \"search\"))\r\n                        }\r\n                    }\r\n                    for (i = 0; i < columns.length; i++) {\r\n                        column = columns[i];\r\n                        if (searchVisibleColumnsOnly && !column.visible) {\r\n                            continue\r\n                        }\r\n                        if (allowSearch(column) && column.calculateFilterExpression) {\r\n                            lookup = column.lookup;\r\n                            filterValue = parseValue(column, text);\r\n                            if (lookup && lookup.items) {\r\n                                (0, _query2.default)(lookup.items).filter(column.createFilterExpression.call({\r\n                                    dataField: lookup.displayExpr,\r\n                                    dataType: lookup.dataType,\r\n                                    calculateFilterExpression: column.calculateFilterExpression\r\n                                }, filterValue, null, \"search\")).enumerate().done(onQueryDone)\r\n                            } else {\r\n                                if (void 0 !== filterValue) {\r\n                                    filters.push(column.createFilterExpression(filterValue, null, \"search\"))\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    return (0, _uiGrid_core.combineFilters)(filters, \"or\")\r\n                };\r\n                return {\r\n                    publicMethods: function() {\r\n                        return this.callBase().concat([\"searchByText\"])\r\n                    },\r\n                    _calculateAdditionalFilter: function() {\r\n                        var that = this;\r\n                        var filter = that.callBase();\r\n                        var searchFilter = calculateSearchFilter(that, that.option(\"searchPanel.text\"));\r\n                        return (0, _uiGrid_core.combineFilters)([filter, searchFilter])\r\n                    },\r\n                    searchByText: function(text) {\r\n                        this.option(\"searchPanel.text\", text)\r\n                    },\r\n                    optionChanged: function(args) {\r\n                        var that = this;\r\n                        switch (args.fullName) {\r\n                            case \"searchPanel.text\":\r\n                            case \"searchPanel\":\r\n                                that._applyFilter();\r\n                                args.handled = true;\r\n                                break;\r\n                            default:\r\n                                that.callBase(args)\r\n                        }\r\n                    }\r\n                }\r\n            }()\r\n        },\r\n        views: {\r\n            headerPanel: function() {\r\n                var getSearchPanelOptions = function(that) {\r\n                    return that.option(\"searchPanel\")\r\n                };\r\n                return {\r\n                    _getToolbarItems: function() {\r\n                        var items = this.callBase();\r\n                        return this._prepareSearchItem(items)\r\n                    },\r\n                    _prepareSearchItem: function(items) {\r\n                        var that = this;\r\n                        var dataController = that.getController(\"data\");\r\n                        var searchPanelOptions = getSearchPanelOptions(that);\r\n                        if (searchPanelOptions && searchPanelOptions.visible) {\r\n                            var toolbarItem = {\r\n                                template: function(data, index, container) {\r\n                                    var $search = (0, _renderer2.default)(\"<div>\").addClass(that.addWidgetPrefix(SEARCH_PANEL_CLASS)).appendTo(container);\r\n                                    that.getController(\"editorFactory\").createEditor($search, {\r\n                                        width: searchPanelOptions.width,\r\n                                        placeholder: searchPanelOptions.placeholder,\r\n                                        parentType: \"searchPanel\",\r\n                                        value: that.option(\"searchPanel.text\"),\r\n                                        updateValueTimeout: FILTERING_TIMEOUT,\r\n                                        setValue: function(value) {\r\n                                            dataController.searchByText(value)\r\n                                        },\r\n                                        editorOptions: {\r\n                                            inputAttr: {\r\n                                                \"aria-label\": _message2.default.format(\"dxDataGrid-ariaSearchInGrid\")\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                    that.resize()\r\n                                },\r\n                                name: \"searchPanel\",\r\n                                location: \"after\",\r\n                                locateInMenu: \"never\",\r\n                                sortIndex: 40\r\n                            };\r\n                            items.push(toolbarItem)\r\n                        }\r\n                        return items\r\n                    },\r\n                    getSearchTextEditor: function() {\r\n                        var that = this;\r\n                        var $element = that.element();\r\n                        var $searchPanel = $element.find(\".\" + that.addWidgetPrefix(SEARCH_PANEL_CLASS)).filter(function() {\r\n                            return (0, _renderer2.default)(this).closest(\".\" + that.addWidgetPrefix(HEADER_PANEL_CLASS)).is($element)\r\n                        });\r\n                        if ($searchPanel.length) {\r\n                            return $searchPanel.dxTextBox(\"instance\")\r\n                        }\r\n                        return null\r\n                    },\r\n                    isVisible: function() {\r\n                        var searchPanelOptions = getSearchPanelOptions(this);\r\n                        return this.callBase() || searchPanelOptions && searchPanelOptions.visible\r\n                    },\r\n                    optionChanged: function(args) {\r\n                        if (\"searchPanel\" === args.name) {\r\n                            if (\"searchPanel.text\" === args.fullName) {\r\n                                var editor = this.getSearchTextEditor();\r\n                                if (editor) {\r\n                                    editor.option(\"value\", args.value)\r\n                                }\r\n                            } else {\r\n                                this._invalidate()\r\n                            }\r\n                            args.handled = true\r\n                        } else {\r\n                            this.callBase(args)\r\n                        }\r\n                    }\r\n                }\r\n            }(),\r\n            rowsView: {\r\n                init: function() {\r\n                    this.callBase.apply(this, arguments);\r\n                    this._searchParams = []\r\n                },\r\n                _getFormattedSearchText: function(column, searchText) {\r\n                    var value = parseValue(column, searchText);\r\n                    var formatOptions = (0, _uiGrid_core.getFormatOptionsByColumn)(column, \"search\");\r\n                    return (0, _uiGrid_core.formatValue)(value, formatOptions)\r\n                },\r\n                _getStringNormalizer: function() {\r\n                    var isCaseSensitive = this.option(\"searchPanel.highlightCaseSensitive\");\r\n                    return function(str) {\r\n                        return isCaseSensitive ? str : str.toLowerCase()\r\n                    }\r\n                },\r\n                _findHighlightingTextNodes: function(column, cellElement, searchText) {\r\n                    var that = this;\r\n                    var $parent = cellElement.parent();\r\n                    var $items;\r\n                    var columnIndex;\r\n                    var stringNormalizer = this._getStringNormalizer();\r\n                    var normalizedSearchText = stringNormalizer(searchText);\r\n                    if (!$parent.length) {\r\n                        $parent = (0, _renderer2.default)(\"<div>\").append(cellElement)\r\n                    } else {\r\n                        if (column) {\r\n                            if (column.groupIndex >= 0 && !column.showWhenGrouped) {\r\n                                $items = cellElement\r\n                            } else {\r\n                                columnIndex = that._columnsController.getVisibleIndex(column.index);\r\n                                $items = $parent.children(\"td\").eq(columnIndex).find(\"*\")\r\n                            }\r\n                        }\r\n                    }\r\n                    $items = $items && $items.length ? $items : $parent.find(\"*\");\r\n                    $items = $items.filter(function(_, element) {\r\n                        var $contents = (0, _renderer2.default)(element).contents();\r\n                        for (var i = 0; i < $contents.length; i++) {\r\n                            var node = $contents.get(i);\r\n                            if (3 === node.nodeType) {\r\n                                return stringNormalizer(node.textContent || node.nodeValue).indexOf(normalizedSearchText) > -1\r\n                            }\r\n                            return false\r\n                        }\r\n                    });\r\n                    return $items\r\n                },\r\n                _highlightSearchTextCore: function($textNode, searchText) {\r\n                    var that = this;\r\n                    var $searchTextSpan = (0, _renderer2.default)(\"<span>\").addClass(that.addWidgetPrefix(SEARCH_TEXT_CLASS));\r\n                    var text = $textNode.text();\r\n                    var firstContentElement = $textNode[0];\r\n                    var stringNormalizer = this._getStringNormalizer();\r\n                    var index = stringNormalizer(text).indexOf(stringNormalizer(searchText));\r\n                    if (index >= 0) {\r\n                        if (firstContentElement.textContent) {\r\n                            firstContentElement.textContent = text.substr(0, index)\r\n                        } else {\r\n                            firstContentElement.nodeValue = text.substr(0, index)\r\n                        }\r\n                        $textNode.after($searchTextSpan.text(text.substr(index, searchText.length)));\r\n                        $textNode = (0, _renderer2.default)(_dom_adapter2.default.createTextNode(text.substr(index + searchText.length))).insertAfter($searchTextSpan);\r\n                        return that._highlightSearchTextCore($textNode, searchText)\r\n                    }\r\n                },\r\n                _highlightSearchText: function(cellElement, isEquals, column) {\r\n                    var that = this;\r\n                    var stringNormalizer = this._getStringNormalizer();\r\n                    var searchText = that.option(\"searchPanel.text\");\r\n                    if (isEquals && column) {\r\n                        searchText = searchText && that._getFormattedSearchText(column, searchText)\r\n                    }\r\n                    if (searchText && that.option(\"searchPanel.highlightSearchText\")) {\r\n                        var textNodes = that._findHighlightingTextNodes(column, cellElement, searchText);\r\n                        (0, _iterator.each)(textNodes, function(_, element) {\r\n                            (0, _iterator.each)((0, _renderer2.default)(element).contents(), function(_, textNode) {\r\n                                if (isEquals) {\r\n                                    if (stringNormalizer((0, _renderer2.default)(textNode).text()) === stringNormalizer(searchText)) {\r\n                                        (0, _renderer2.default)(this).replaceWith((0, _renderer2.default)(\"<span>\").addClass(that.addWidgetPrefix(SEARCH_TEXT_CLASS)).text((0, _renderer2.default)(textNode).text()))\r\n                                    }\r\n                                } else {\r\n                                    that._highlightSearchTextCore((0, _renderer2.default)(textNode), searchText)\r\n                                }\r\n                            })\r\n                        })\r\n                    }\r\n                },\r\n                _renderCore: function() {\r\n                    this.callBase.apply(this, arguments);\r\n                    if (this.option(\"rowTemplate\")) {\r\n                        if (this.option(\"templatesRenderAsynchronously\")) {\r\n                            clearTimeout(this._highlightTimer);\r\n                            this._highlightTimer = setTimeout(function() {\r\n                                this._highlightSearchText(this._getTableElement())\r\n                            }.bind(this))\r\n                        } else {\r\n                            this._highlightSearchText(this._getTableElement())\r\n                        }\r\n                    }\r\n                },\r\n                _updateCell: function($cell, parameters) {\r\n                    var column = parameters.column;\r\n                    var dataType = column.lookup && column.lookup.dataType || column.dataType;\r\n                    var isEquals = \"string\" !== dataType;\r\n                    if (allowSearch(column)) {\r\n                        if (this.option(\"templatesRenderAsynchronously\")) {\r\n                            if (!this._searchParams.length) {\r\n                                clearTimeout(this._highlightTimer);\r\n                                this._highlightTimer = setTimeout(function() {\r\n                                    this._searchParams.forEach(function(params) {\r\n                                        this._highlightSearchText.apply(this, params)\r\n                                    }.bind(this));\r\n                                    this._searchParams = []\r\n                                }.bind(this))\r\n                            }\r\n                            this._searchParams.push([$cell, isEquals, column])\r\n                        } else {\r\n                            this._highlightSearchText($cell, isEquals, column)\r\n                        }\r\n                    }\r\n                    this.callBase($cell, parameters)\r\n                },\r\n                dispose: function() {\r\n                    clearTimeout(this._highlightTimer);\r\n                    this.callBase()\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}