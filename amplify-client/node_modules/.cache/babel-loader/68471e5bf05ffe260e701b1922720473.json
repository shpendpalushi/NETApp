{"ast":null,"code":"/**\r\n * DevExtreme (viz/tree_map/tiling.squarified.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _max = Math.max;\nvar _round = Math.round;\n\nvar tiling = require(\"./tiling\");\n\nfunction compare(a, b) {\n  return b.value - a.value;\n}\n\nfunction getAspectRatio(value) {\n  return _max(value, 1 / value);\n}\n\nfunction findAppropriateCollection(nodes, head, context) {\n  var bestAspectRatio = 1 / 0;\n  var nextAspectRatio;\n  var sum = 0;\n  var nextSum;\n  var i;\n  var j;\n  var ii = nodes.length;\n  var coeff = context.areaToValue / context.staticSide;\n  var totalAspectRatio;\n\n  for (i = head; i < ii;) {\n    nextSum = sum + nodes[i].value;\n    totalAspectRatio = context.staticSide / coeff / nextSum;\n    nextAspectRatio = 0;\n\n    for (j = head; j <= i; ++j) {\n      nextAspectRatio = context.accumulate(nextAspectRatio, getAspectRatio(totalAspectRatio * nodes[j].value / nextSum), j - head + 1);\n    }\n\n    if (nextAspectRatio < bestAspectRatio) {\n      bestAspectRatio = nextAspectRatio;\n      sum = nextSum;\n      ++i;\n    } else {\n      break;\n    }\n  }\n\n  return {\n    sum: sum,\n    count: i - head,\n    side: _round(coeff * sum)\n  };\n}\n\nfunction getArea(rect) {\n  return (rect[2] - rect[0]) * (rect[3] - rect[1]);\n}\n\nfunction doStep(nodes, head, context) {\n  var sidesData = tiling.buildSidesData(context.rect, context.directions, context.staticSideIndex);\n  var area = getArea(context.rect);\n  var rowData = area > 0 ? findAppropriateCollection(nodes, head, {\n    areaToValue: area / context.sum,\n    accumulate: context.accumulate,\n    staticSide: sidesData.staticSide\n  }) : {\n    sum: 1,\n    side: sidesData.variedSide,\n    count: nodes.length - head\n  };\n  tiling.calculateRectangles(nodes, head, context.rect, sidesData, rowData);\n  context.sum -= rowData.sum;\n  return head + rowData.count;\n}\n\nmodule.exports = function (data, accumulate, isFixedStaticSide) {\n  var items = data.items;\n  var ii = items.length;\n  var i;\n  var context = {\n    sum: data.sum,\n    rect: data.rect,\n    directions: data.directions,\n    accumulate: accumulate\n  };\n\n  if (isFixedStaticSide) {\n    context.staticSideIndex = tiling.getStaticSideIndex(context.rect);\n  }\n\n  items.sort(compare);\n\n  for (i = 0; i < ii;) {\n    i = doStep(items, i, context);\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/tree_map/tiling.squarified.base.js"],"names":["_max","Math","_round","tiling","require","b","a","bestAspectRatio","sum","ii","nodes","coeff","context","i","nextSum","totalAspectRatio","nextAspectRatio","j","getAspectRatio","count","side","rect","sidesData","area","getArea","rowData","findAppropriateCollection","areaToValue","accumulate","staticSide","head","module","items","data","directions","doStep"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/tree_map/tiling.squarified.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _max = Math.max;\r\nvar _round = Math.round;\r\nvar tiling = require(\"./tiling\");\r\n\r\nfunction compare(a, b) {\r\n    return b.value - a.value\r\n}\r\n\r\nfunction getAspectRatio(value) {\r\n    return _max(value, 1 / value)\r\n}\r\n\r\nfunction findAppropriateCollection(nodes, head, context) {\r\n    var bestAspectRatio = 1 / 0;\r\n    var nextAspectRatio;\r\n    var sum = 0;\r\n    var nextSum;\r\n    var i;\r\n    var j;\r\n    var ii = nodes.length;\r\n    var coeff = context.areaToValue / context.staticSide;\r\n    var totalAspectRatio;\r\n    for (i = head; i < ii;) {\r\n        nextSum = sum + nodes[i].value;\r\n        totalAspectRatio = context.staticSide / coeff / nextSum;\r\n        nextAspectRatio = 0;\r\n        for (j = head; j <= i; ++j) {\r\n            nextAspectRatio = context.accumulate(nextAspectRatio, getAspectRatio(totalAspectRatio * nodes[j].value / nextSum), j - head + 1)\r\n        }\r\n        if (nextAspectRatio < bestAspectRatio) {\r\n            bestAspectRatio = nextAspectRatio;\r\n            sum = nextSum;\r\n            ++i\r\n        } else {\r\n            break\r\n        }\r\n    }\r\n    return {\r\n        sum: sum,\r\n        count: i - head,\r\n        side: _round(coeff * sum)\r\n    }\r\n}\r\n\r\nfunction getArea(rect) {\r\n    return (rect[2] - rect[0]) * (rect[3] - rect[1])\r\n}\r\n\r\nfunction doStep(nodes, head, context) {\r\n    var sidesData = tiling.buildSidesData(context.rect, context.directions, context.staticSideIndex);\r\n    var area = getArea(context.rect);\r\n    var rowData = area > 0 ? findAppropriateCollection(nodes, head, {\r\n        areaToValue: area / context.sum,\r\n        accumulate: context.accumulate,\r\n        staticSide: sidesData.staticSide\r\n    }) : {\r\n        sum: 1,\r\n        side: sidesData.variedSide,\r\n        count: nodes.length - head\r\n    };\r\n    tiling.calculateRectangles(nodes, head, context.rect, sidesData, rowData);\r\n    context.sum -= rowData.sum;\r\n    return head + rowData.count\r\n}\r\nmodule.exports = function(data, accumulate, isFixedStaticSide) {\r\n    var items = data.items;\r\n    var ii = items.length;\r\n    var i;\r\n    var context = {\r\n        sum: data.sum,\r\n        rect: data.rect,\r\n        directions: data.directions,\r\n        accumulate: accumulate\r\n    };\r\n    if (isFixedStaticSide) {\r\n        context.staticSideIndex = tiling.getStaticSideIndex(context.rect)\r\n    }\r\n    items.sort(compare);\r\n    for (i = 0; i < ii;) {\r\n        i = doStep(items, i, context)\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}