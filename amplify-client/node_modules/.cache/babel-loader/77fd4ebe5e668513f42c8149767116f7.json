{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.work_space.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../../core/renderer\");\n\nvar domAdapter = require(\"../../../core/dom_adapter\");\n\nvar eventsEngine = require(\"../../../events/core/events_engine\");\n\nvar dataUtils = require(\"../../../core/element_data\");\n\nvar dateUtils = require(\"../../../core/utils/date\");\n\nvar typeUtils = require(\"../../../core/utils/type\");\n\nvar windowUtils = require(\"../../../core/utils/window\");\n\nvar getPublicElement = require(\"../../../core/utils/dom\").getPublicElement;\n\nvar extend = require(\"../../../core/utils/extend\").extend;\n\nvar each = require(\"../../../core/utils/iterator\").each;\n\nvar messageLocalization = require(\"../../../localization/message\");\n\nvar dateLocalization = require(\"../../../localization/date\");\n\nvar toMs = dateUtils.dateToMilliseconds;\n\nvar Widget = require(\"../../widget/ui.widget\");\n\nvar abstract = Widget.abstract;\n\nvar noop = require(\"../../../core/utils/common\").noop;\n\nvar isDefined = require(\"../../../core/utils/type\").isDefined;\n\nvar publisherMixin = require(\"../ui.scheduler.publisher_mixin\");\n\nvar eventUtils = require(\"../../../events/utils\");\n\nvar pointerEvents = require(\"../../../events/pointer\");\n\nvar errors = require(\"../../widget/ui.errors\");\n\nvar clickEvent = require(\"../../../events/click\");\n\nvar contextMenuEvent = require(\"../../../events/contextmenu\");\n\nvar dragEvents = require(\"../../../events/drag\");\n\nvar Scrollable = require(\"../../scroll_view/ui.scrollable\");\n\nvar HorizontalGroupedStrategy = require(\"./ui.scheduler.work_space.grouped.strategy.horizontal\");\n\nvar VerticalGroupedStrategy = require(\"./ui.scheduler.work_space.grouped.strategy.vertical\");\n\nvar tableCreator = require(\"../ui.scheduler.table_creator\");\n\nvar VerticalShader = require(\"../shaders/ui.scheduler.current_time_shader.vertical\");\n\nvar AppointmentDragBehavior = require(\"../appointmentDragBehavior\");\n\nvar FIXED_CONTAINER_CLASS = require(\"../constants\").FIXED_CONTAINER_CLASS;\n\nvar COMPONENT_CLASS = \"dx-scheduler-work-space\";\nvar GROUPED_WORKSPACE_CLASS = \"dx-scheduler-work-space-grouped\";\nvar VERTICAL_GROUPED_WORKSPACE_CLASS = \"dx-scheduler-work-space-vertical-grouped\";\nvar WORKSPACE_VERTICAL_GROUP_TABLE_CLASS = \"dx-scheduler-work-space-vertical-group-table\";\nvar WORKSPACE_WITH_BOTH_SCROLLS_CLASS = \"dx-scheduler-work-space-both-scrollbar\";\nvar WORKSPACE_WITH_COUNT_CLASS = \"dx-scheduler-work-space-count\";\nvar WORKSPACE_WITH_GROUP_BY_DATE_CLASS = \"dx-scheduler-work-space-group-by-date\";\nvar WORKSPACE_WITH_ODD_CELLS_CLASS = \"dx-scheduler-work-space-odd-cells\";\nvar WORKSPACE_WITH_OVERLAPPING_CLASS = \"dx-scheduler-work-space-overlapping\";\nvar TIME_PANEL_CLASS = \"dx-scheduler-time-panel\";\nvar TIME_PANEL_CELL_CLASS = \"dx-scheduler-time-panel-cell\";\nvar TIME_PANEL_ROW_CLASS = \"dx-scheduler-time-panel-row\";\nvar ALL_DAY_PANEL_CLASS = \"dx-scheduler-all-day-panel\";\nvar ALL_DAY_TABLE_CLASS = \"dx-scheduler-all-day-table\";\nvar ALL_DAY_CONTAINER_CLASS = \"dx-scheduler-all-day-appointments\";\nvar ALL_DAY_TITLE_CLASS = \"dx-scheduler-all-day-title\";\nvar ALL_DAY_TITLE_HIDDEN_CLASS = \"dx-scheduler-all-day-title-hidden\";\nvar ALL_DAY_TABLE_CELL_CLASS = \"dx-scheduler-all-day-table-cell\";\nvar ALL_DAY_TABLE_ROW_CLASS = \"dx-scheduler-all-day-table-row\";\nvar WORKSPACE_WITH_ALL_DAY_CLASS = \"dx-scheduler-work-space-all-day\";\nvar WORKSPACE_WITH_COLLAPSED_ALL_DAY_CLASS = \"dx-scheduler-work-space-all-day-collapsed\";\nvar WORKSPACE_WITH_MOUSE_SELECTION_CLASS = \"dx-scheduler-work-space-mouse-selection\";\nvar HORIZONTAL_SIZES_CLASS = \"dx-scheduler-cell-sizes-horizontal\";\nvar VERTICAL_SIZES_CLASS = \"dx-scheduler-cell-sizes-vertical\";\nvar HEADER_PANEL_CLASS = \"dx-scheduler-header-panel\";\nvar HEADER_PANEL_CELL_CLASS = \"dx-scheduler-header-panel-cell\";\nvar HEADER_ROW_CLASS = \"dx-scheduler-header-row\";\nvar GROUP_ROW_CLASS = \"dx-scheduler-group-row\";\nvar GROUP_HEADER_CLASS = \"dx-scheduler-group-header\";\nvar GROUP_HEADER_CONTENT_CLASS = \"dx-scheduler-group-header-content\";\nvar DATE_TABLE_CLASS = \"dx-scheduler-date-table\";\nvar DATE_TABLE_CELL_CLASS = \"dx-scheduler-date-table-cell\";\nvar DATE_TABLE_ROW_CLASS = \"dx-scheduler-date-table-row\";\nvar DATE_TABLE_FOCUSED_CELL_CLASS = \"dx-scheduler-focused-cell\";\nvar DATE_TABLE_DROPPABLE_CELL_CLASS = \"dx-scheduler-date-table-droppable-cell\";\nvar SCHEDULER_HEADER_SCROLLABLE_CLASS = \"dx-scheduler-header-scrollable\";\nvar SCHEDULER_SIDEBAR_SCROLLABLE_CLASS = \"dx-scheduler-sidebar-scrollable\";\nvar SCHEDULER_DATE_TABLE_SCROLLABLE_CLASS = \"dx-scheduler-date-table-scrollable\";\nvar SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME = eventUtils.addNamespace(pointerEvents.down, \"dxSchedulerWorkSpace\");\nvar SCHEDULER_CELL_DXDRAGENTER_EVENT_NAME = eventUtils.addNamespace(dragEvents.enter, \"dxSchedulerDateTable\");\nvar SCHEDULER_CELL_DXDROP_EVENT_NAME = eventUtils.addNamespace(dragEvents.drop, \"dxSchedulerDateTable\");\nvar SCHEDULER_CELL_DXCLICK_EVENT_NAME = eventUtils.addNamespace(clickEvent.name, \"dxSchedulerDateTable\");\nvar SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME = eventUtils.addNamespace(pointerEvents.down, \"dxSchedulerDateTable\");\nvar SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME = eventUtils.addNamespace(pointerEvents.up, \"dxSchedulerDateTable\");\nvar SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME = eventUtils.addNamespace(pointerEvents.move, \"dxSchedulerDateTable\");\nvar CELL_DATA = \"dxCellData\";\nvar DATE_TABLE_CELL_BORDER = 1;\nvar DATE_TABLE_MIN_CELL_WIDTH = 75;\nvar DAY_MS = toMs(\"day\");\nvar HOUR_MS = toMs(\"hour\");\nvar SCHEDULER_DRAG_AND_DROP_SELECTOR = \".\".concat(DATE_TABLE_CLASS, \" td, .\").concat(ALL_DAY_TABLE_CLASS, \" td\");\n\nvar formatWeekday = function formatWeekday(date) {\n  return dateLocalization.getDayNames(\"abbreviated\")[date.getDay()];\n};\n\nvar SchedulerWorkSpace = Widget.inherit({\n  _supportedKeys: function _supportedKeys() {\n    var clickHandler = function clickHandler(e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (this._focusedCells && this._focusedCells.length) {\n        var $itemElement = $(this.option(\"focusedElement\"));\n        var $cellElement = $itemElement.length ? $itemElement : this._focusedCells;\n        e.target = this._focusedCells;\n        this._showPopup = true;\n\n        this._cellClickAction({\n          event: e,\n          cellElement: $(this._focusedCells),\n          cellData: this.getCellData($cellElement)\n        });\n      }\n    };\n\n    var arrowPressHandler = function arrowPressHandler(e, cell) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      this._moveToCell(cell, e.shiftKey);\n    };\n\n    return extend(this.callBase(), {\n      enter: clickHandler,\n      space: clickHandler,\n      downArrow: function downArrow(e) {\n        var $cell = this._getCellFromNextRow(\"next\", e.shiftKey);\n\n        arrowPressHandler.call(this, e, $cell);\n      },\n      upArrow: function upArrow(e) {\n        var $cell = this._getCellFromNextRow(\"prev\", e.shiftKey);\n\n        arrowPressHandler.call(this, e, $cell);\n      },\n      rightArrow: function rightArrow(e) {\n        var $rightCell = this._getRightCell(e.shiftKey);\n\n        arrowPressHandler.call(this, e, $rightCell);\n      },\n      leftArrow: function leftArrow(e) {\n        var $leftCell = this._getLeftCell(e.shiftKey);\n\n        arrowPressHandler.call(this, e, $leftCell);\n      }\n    });\n  },\n  _isRTL: function _isRTL() {\n    return this.option(\"rtlEnabled\");\n  },\n  _getFocusedCell: function _getFocusedCell() {\n    return this._$focusedCell || this._$dateTable.find(\".\" + DATE_TABLE_CELL_CLASS).eq(0);\n  },\n  _getAllFocusedCells: function _getAllFocusedCells() {\n    return this._focusedCells || this._$dateTable.find(\".\" + DATE_TABLE_CELL_CLASS).eq(0);\n  },\n  _getCellFromNextRow: function _getCellFromNextRow(direction) {\n    var $currentCell = this._$focusedCell;\n\n    if (isDefined($currentCell)) {\n      var cellIndex = $currentCell.index();\n      var $row = $currentCell.parent();\n      var $cell = $row[direction]().children().eq(cellIndex);\n      $cell = this._checkForViewBounds($cell);\n      return $cell;\n    }\n  },\n  _checkForViewBounds: function _checkForViewBounds($item) {\n    if (!$item.length) {\n      $item = this._$focusedCell;\n    }\n\n    return $item;\n  },\n  _getRightCell: function _getRightCell(isMultiSelection) {\n    if (!isDefined(this._$focusedCell)) {\n      return;\n    }\n\n    var $rightCell;\n    var $focusedCell = this._$focusedCell;\n\n    var groupCount = this._getGroupCount();\n\n    var rowCellCount = isMultiSelection ? this._getCellCount() : this._getTotalCellCount(groupCount);\n    var lastIndexInRow = rowCellCount - 1;\n    var edgeCellIndex = this._isRTL() ? 0 : lastIndexInRow;\n    var currentIndex = $focusedCell.index();\n    var direction = this._isRTL() ? \"prev\" : \"next\";\n\n    if (currentIndex === edgeCellIndex || isMultiSelection && this._isGroupEndCell($focusedCell)) {\n      var $row = $focusedCell.parent();\n      var sign = this._isRTL() ? 1 : -1;\n      $rightCell = $row[direction]().children().eq(currentIndex + sign * lastIndexInRow);\n      $rightCell = this._checkForViewBounds($rightCell);\n    } else {\n      $rightCell = $focusedCell[direction]();\n    }\n\n    return $rightCell;\n  },\n  _isGroupEndCell: function _isGroupEndCell($cell) {\n    var cellsInRow = this._getCellCount();\n\n    var currentCellIndex = $cell.index();\n    var result = currentCellIndex % cellsInRow;\n    return this._isRTL() ? 0 === result : result === cellsInRow - 1;\n  },\n  _getLeftCell: function _getLeftCell(isMultiSelection) {\n    if (!isDefined(this._$focusedCell)) {\n      return;\n    }\n\n    var $leftCell;\n    var $focusedCell = this._$focusedCell;\n\n    var groupCount = this._getGroupCount();\n\n    var rowCellCount = isMultiSelection ? this._getCellCount() : this._getTotalCellCount(groupCount);\n    var lastIndexInRow = rowCellCount - 1;\n    var edgeCellIndex = this._isRTL() ? lastIndexInRow : 0;\n    var currentIndex = $focusedCell.index();\n    var direction = this._isRTL() ? \"next\" : \"prev\";\n\n    if (currentIndex === edgeCellIndex || isMultiSelection && this._isGroupStartCell($focusedCell)) {\n      var $row = $focusedCell.parent();\n      var sign = this._isRTL() ? -1 : 1;\n      $leftCell = $row[direction]().children().eq(currentIndex + sign * lastIndexInRow);\n      $leftCell = this._checkForViewBounds($leftCell);\n    } else {\n      $leftCell = $focusedCell[direction]();\n    }\n\n    return $leftCell;\n  },\n  _isGroupStartCell: function _isGroupStartCell($cell) {\n    var cellsInRow = this._getCellCount();\n\n    var currentCellIndex = $cell.index();\n    var result = currentCellIndex % cellsInRow;\n    return this._isRTL() ? result === cellsInRow - 1 : 0 === result;\n  },\n  _moveToCell: function _moveToCell($cell, isMultiSelection) {\n    isMultiSelection = isMultiSelection && this.option(\"allowMultipleCellSelection\");\n\n    this._setFocusedCell($cell, isMultiSelection);\n\n    this._dateTableScrollable.scrollToElement($cell);\n  },\n  _setFocusedCell: function _setFocusedCell($cell, isMultiSelection) {\n    if (!isDefined($cell) || !$cell.length) {\n      return;\n    }\n\n    this._releaseFocusedCell();\n\n    this._focusedCells = [];\n\n    if (isMultiSelection) {\n      $cell = this._correctCellForGroup($cell);\n      var orientation = \"day\" === this.option(\"type\") && (!this.option(\"groups\").length || \"vertical\" === this.option(\"groupOrientation\")) ? \"vertical\" : \"horizontal\";\n\n      var $targetCells = this._getCellsBetween($cell, this._$prevCell, orientation);\n\n      this._focusedCells = $targetCells.toArray();\n    } else {\n      this._focusedCells = [$cell.get(0)];\n      this._$prevCell = $cell;\n    }\n\n    var $focusedCells = $(this._focusedCells);\n\n    this._toggleFocusClass(true, $focusedCells);\n\n    this.setAria(\"label\", \"Add appointment\", $focusedCells);\n\n    this._toggleFocusedCellClass(true, $cell);\n\n    this._$focusedCell = $cell;\n    var selectedCellData = this.getFocusedCellData();\n    this.option(\"selectedCellData\", selectedCellData);\n\n    this._selectionChangedAction({\n      selectedCellData: selectedCellData\n    });\n  },\n  _correctCellForGroup: function _correctCellForGroup($cell) {\n    var $focusedCell = this._$focusedCell;\n\n    var cellGroupIndex = this._getGroupIndexByCell($cell);\n\n    var focusedCellGroupIndex = this._getGroupIndexByCell($focusedCell);\n\n    var isDifferentTables = this._hasAllDayClass($cell) !== this._hasAllDayClass($focusedCell);\n\n    return focusedCellGroupIndex !== cellGroupIndex || isDifferentTables ? $focusedCell : $cell;\n  },\n  _getCellsBetween: function _getCellsBetween($first, $last, direction) {\n    var isAllDayTable = this._hasAllDayClass($last);\n\n    var $cells = this._getCells(isAllDayTable, direction);\n\n    var firstIndex = $cells.index($first);\n    var lastIndex = $cells.index($last);\n\n    if (firstIndex > lastIndex) {\n      var buffer = firstIndex;\n      firstIndex = lastIndex;\n      lastIndex = buffer;\n    }\n\n    $cells = $cells.slice(firstIndex, lastIndex + 1);\n\n    if (this._getGroupCount() > 1) {\n      var result = [];\n\n      var focusedGroupIndex = this._getGroupIndexByCell($first);\n\n      each($cells, function (_, cell) {\n        var groupIndex = this._getGroupIndexByCell($(cell));\n\n        if (focusedGroupIndex === groupIndex) {\n          result.push(cell);\n        }\n      }.bind(this));\n      $cells = $(result);\n    }\n\n    return $cells;\n  },\n  _hasAllDayClass: function _hasAllDayClass($cell) {\n    return $cell.hasClass(ALL_DAY_TABLE_CELL_CLASS);\n  },\n  _getGroupIndexByCell: function _getGroupIndexByCell($cell) {\n    var cellsInRow = this._getCellCount();\n\n    var currentCellIndex = $cell.index() + 1;\n    var groupIndex = Math.ceil(currentCellIndex / cellsInRow);\n    return groupIndex;\n  },\n  _toggleFocusedCellClass: function _toggleFocusedCellClass(isFocused, $element) {\n    var $focusTarget = $element && $element.length ? $element : this._focusTarget();\n    $focusTarget.toggleClass(DATE_TABLE_FOCUSED_CELL_CLASS, isFocused);\n  },\n  _releaseFocusedCell: function _releaseFocusedCell($cell) {\n    $cell = $cell || $(this._focusedCells);\n\n    if (isDefined($cell) && $cell.length) {\n      this._toggleFocusClass(false, $cell);\n\n      this._toggleFocusedCellClass(false, $cell);\n\n      this.setAria(\"label\", void 0, $cell);\n    }\n\n    this.option(\"selectedCellData\", []);\n  },\n  _focusInHandler: function _focusInHandler(e) {\n    if ($(e.target).is(this._focusTarget()) && false !== this._isCellClick) {\n      delete this._isCellClick;\n      delete this._contextMenuHandled;\n      this.callBase.apply(this, arguments);\n\n      var $cell = this._getFocusedCell();\n\n      this._setFocusedCell($cell);\n    }\n  },\n  _focusOutHandler: function _focusOutHandler() {\n    this.callBase.apply(this, arguments);\n\n    if (!this._contextMenuHandled) {\n      this._releaseFocusedCell();\n    }\n  },\n  _focusTarget: function _focusTarget() {\n    return this.$element();\n  },\n  _activeStateUnit: \".\" + DATE_TABLE_CELL_CLASS + \", .\" + ALL_DAY_TABLE_CELL_CLASS,\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      currentDate: new Date(),\n      intervalCount: 1,\n      startDate: null,\n      firstDayOfWeek: void 0,\n      startDayHour: 0,\n      endDayHour: 24,\n      hoursInterval: .5,\n      activeStateEnabled: true,\n      hoverStateEnabled: true,\n      groups: [],\n      showAllDayPanel: true,\n      allDayExpanded: false,\n      onCellClick: null,\n      crossScrollingEnabled: false,\n      dataCellTemplate: null,\n      timeCellTemplate: null,\n      resourceCellTemplate: null,\n      dateCellTemplate: null,\n      allowMultipleCellSelection: true,\n      indicatorTime: new Date(),\n      indicatorUpdateInterval: 5 * toMs(\"minute\"),\n      shadeUntilCurrentTime: true,\n      groupOrientation: \"horizontal\",\n      selectedCellData: [],\n      groupByDate: false\n    });\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"dateCellTemplate\":\n      case \"resourceCellTemplate\":\n      case \"dataCellTemplate\":\n      case \"timeCellTemplate\":\n      case \"startDayHour\":\n      case \"endDayHour\":\n      case \"hoursInterval\":\n      case \"firstDayOfWeek\":\n      case \"currentDate\":\n      case \"startDate\":\n        this._cleanWorkSpace();\n\n        break;\n\n      case \"groups\":\n        this._cleanView();\n\n        this._removeAllDayElements();\n\n        this._initGrouping();\n\n        this.repaint();\n        break;\n\n      case \"groupOrientation\":\n        this._initGroupedStrategy();\n\n        this._createAllDayPanelElements();\n\n        this._removeAllDayElements();\n\n        this._cleanWorkSpace();\n\n        this._toggleGroupByDateClass();\n\n        break;\n\n      case \"showAllDayPanel\":\n        if (this._isVerticalGroupedWorkSpace()) {\n          this._cleanView();\n\n          this._removeAllDayElements();\n\n          this._initGrouping();\n\n          this.repaint();\n        } else {\n          this._toggleAllDayVisibility();\n        }\n\n        break;\n\n      case \"allDayExpanded\":\n        this._changeAllDayVisibility();\n\n        this._attachTablesEvents();\n\n        this.headerPanelOffsetRecalculate();\n\n        this._updateScrollable();\n\n        break;\n\n      case \"onSelectionChanged\":\n        this._createSelectionChangedAction();\n\n        break;\n\n      case \"onCellClick\":\n        this._createCellClickAction();\n\n        break;\n\n      case \"onCellContextMenu\":\n        this._attachContextMenuEvent();\n\n        break;\n\n      case \"intervalCount\":\n        this._cleanWorkSpace();\n\n        this._toggleWorkSpaceCountClass();\n\n        this._toggleFixedScrollableClass();\n\n        break;\n\n      case \"groupByDate\":\n        this._cleanWorkSpace();\n\n        this._toggleGroupByDateClass();\n\n        break;\n\n      case \"crossScrollingEnabled\":\n        this._toggleHorizontalScrollClass();\n\n        this._dateTableScrollable.option(this._dateTableScrollableConfig());\n\n        break;\n\n      case \"width\":\n        this.callBase(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"allowMultipleCellSelection\":\n        break;\n\n      case \"selectedCellData\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _cleanWorkSpace: function _cleanWorkSpace() {\n    this._cleanView();\n\n    this._toggleGroupedClass();\n\n    this._toggleWorkSpaceWithOddCells();\n\n    this._renderView();\n  },\n  _init: function _init() {\n    this.callBase();\n\n    this._initGrouping();\n\n    this._toggleHorizontalScrollClass();\n\n    this._toggleWorkSpaceCountClass();\n\n    this._toggleGroupByDateClass();\n\n    this._toggleWorkSpaceWithOddCells();\n\n    this._toggleWorkSpaceOverlappingClass();\n\n    this.$element().addClass(COMPONENT_CLASS).addClass(this._getElementClass());\n  },\n  _initGrouping: function _initGrouping() {\n    this._initGroupedStrategy();\n\n    this._toggleGroupingDirectionClass();\n\n    this._toggleGroupByDateClass();\n  },\n  _initGroupedStrategy: function _initGroupedStrategy() {\n    var strategyName = this.option(\"groups\").length ? this.option(\"groupOrientation\") : this._getDefaultGroupStrategy();\n    var Strategy = \"vertical\" === strategyName ? VerticalGroupedStrategy : HorizontalGroupedStrategy;\n    this._groupedStrategy = new Strategy(this);\n  },\n  _getDefaultGroupStrategy: function _getDefaultGroupStrategy() {\n    return \"horizontal\";\n  },\n  _isVerticalGroupedWorkSpace: function _isVerticalGroupedWorkSpace() {\n    return !!this.option(\"groups\").length && \"vertical\" === this.option(\"groupOrientation\");\n  },\n  _isHorizontalGroupedWorkSpace: function _isHorizontalGroupedWorkSpace() {\n    return !!this.option(\"groups\").length && \"horizontal\" === this.option(\"groupOrientation\");\n  },\n  _toggleHorizontalScrollClass: function _toggleHorizontalScrollClass() {\n    this.$element().toggleClass(WORKSPACE_WITH_BOTH_SCROLLS_CLASS, this.option(\"crossScrollingEnabled\"));\n  },\n  _toggleGroupByDateClass: function _toggleGroupByDateClass() {\n    this.$element().toggleClass(WORKSPACE_WITH_GROUP_BY_DATE_CLASS, this.isGroupedByDate());\n  },\n  _toggleWorkSpaceCountClass: function _toggleWorkSpaceCountClass() {\n    this.$element().toggleClass(WORKSPACE_WITH_COUNT_CLASS, this._isWorkSpaceWithCount());\n  },\n  _isWorkSpaceWithCount: function _isWorkSpaceWithCount() {\n    return this.option(\"intervalCount\") > 1;\n  },\n  _toggleWorkSpaceWithOddCells: function _toggleWorkSpaceWithOddCells() {\n    this.$element().toggleClass(WORKSPACE_WITH_ODD_CELLS_CLASS, this._isWorkspaceWithOddCells());\n  },\n  _isWorkspaceWithOddCells: function _isWorkspaceWithOddCells() {\n    return .5 === this.option(\"hoursInterval\");\n  },\n  _toggleWorkSpaceOverlappingClass: function _toggleWorkSpaceOverlappingClass() {\n    this.$element().toggleClass(WORKSPACE_WITH_OVERLAPPING_CLASS, this._isWorkSpaceWithOverlapping());\n  },\n  _isWorkSpaceWithOverlapping: function _isWorkSpaceWithOverlapping() {\n    return null !== this.invoke(\"getMaxAppointmentsPerCell\");\n  },\n  _toggleGroupingDirectionClass: function _toggleGroupingDirectionClass() {\n    this.$element().toggleClass(VERTICAL_GROUPED_WORKSPACE_CLASS, this._isVerticalGroupedWorkSpace());\n  },\n  _getRealGroupOrientation: function _getRealGroupOrientation() {\n    return this._isVerticalGroupedWorkSpace() ? \"vertical\" : \"horizontal\";\n  },\n  _getTimePanelClass: function _getTimePanelClass() {\n    return TIME_PANEL_CLASS;\n  },\n  _getDateTableClass: function _getDateTableClass() {\n    return DATE_TABLE_CLASS;\n  },\n  _getDateTableRowClass: function _getDateTableRowClass() {\n    return DATE_TABLE_ROW_CLASS;\n  },\n  _getDateTableCellClass: function _getDateTableCellClass(i, j) {\n    var cellClass = DATE_TABLE_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS + \" \" + VERTICAL_SIZES_CLASS;\n    return this._needApplyLastGroupCellClass() ? this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, j + 1, i, j) : cellClass;\n  },\n  _needApplyLastGroupCellClass: function _needApplyLastGroupCellClass() {\n    return true;\n  },\n  _getGroupRowClass: function _getGroupRowClass() {\n    return GROUP_ROW_CLASS;\n  },\n  _getGroupHeaderClass: function _getGroupHeaderClass(i) {\n    var cellClass = GROUP_HEADER_CLASS;\n    return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i + 1);\n  },\n  _getGroupHeaderContentClass: function _getGroupHeaderContentClass() {\n    return GROUP_HEADER_CONTENT_CLASS;\n  },\n  _initWorkSpaceUnits: function _initWorkSpaceUnits() {\n    this._$headerPanel = $(\"<table>\");\n    this._$thead = $(\"<thead>\").appendTo(this._$headerPanel);\n    this._$fixedContainer = $(\"<div>\").addClass(FIXED_CONTAINER_CLASS);\n    this._$allDayContainer = $(\"<div>\").addClass(ALL_DAY_CONTAINER_CLASS);\n\n    this._initAllDayPanelElements();\n\n    this._createAllDayPanelElements();\n\n    this._$timePanel = $(\"<table>\").addClass(this._getTimePanelClass());\n    this._$dateTable = $(\"<table>\");\n    this._$groupTable = $(\"<div>\").addClass(WORKSPACE_VERTICAL_GROUP_TABLE_CLASS);\n  },\n  _initAllDayPanelElements: function _initAllDayPanelElements() {\n    this._allDayTitles = [];\n    this._allDayTables = [];\n    this._allDayPanels = [];\n  },\n  _createAllDayPanelElements: function _createAllDayPanelElements() {\n    var groupCount = this._getGroupCount();\n\n    if (this._isVerticalGroupedWorkSpace() && 0 !== groupCount) {\n      for (var i = 0; i < groupCount; i++) {\n        var $allDayTitle = $(\"<div>\").addClass(ALL_DAY_TITLE_CLASS).text(messageLocalization.format(\"dxScheduler-allDay\"));\n\n        this._allDayTitles.push($allDayTitle);\n\n        this._$allDayTable = $(\"<table>\");\n\n        this._allDayTables.push(this._$allDayTable);\n\n        this._$allDayPanel = $(\"<div>\").addClass(ALL_DAY_PANEL_CLASS).append(this._$allDayTable);\n\n        this._allDayPanels.push(this._$allDayPanel);\n      }\n    } else {\n      this._$allDayTitle = $(\"<div>\").addClass(ALL_DAY_TITLE_CLASS).text(messageLocalization.format(\"dxScheduler-allDay\")).appendTo(this.$element());\n      this._$allDayTable = $(\"<table>\");\n      this._$allDayPanel = $(\"<div>\").addClass(ALL_DAY_PANEL_CLASS).append(this._$allDayTable);\n    }\n  },\n  _initDateTableScrollable: function _initDateTableScrollable() {\n    var $dateTableScrollable = $(\"<div>\").addClass(SCHEDULER_DATE_TABLE_SCROLLABLE_CLASS);\n    this._dateTableScrollable = this._createComponent($dateTableScrollable, Scrollable, this._dateTableScrollableConfig());\n  },\n  _dateTableScrollableConfig: function _dateTableScrollableConfig() {\n    var config = {\n      useKeyboard: false,\n      bounceEnabled: false,\n      updateManually: true,\n      pushBackValue: 0\n    };\n\n    if (this._needCreateCrossScrolling()) {\n      config = extend(config, this._createCrossScrollingConfig());\n    }\n\n    return config;\n  },\n  _createCrossScrollingConfig: function _createCrossScrollingConfig() {\n    var config = {};\n    var headerScrollableOnScroll;\n    var sidebarScrollableOnScroll;\n    config.direction = \"both\";\n\n    config.onStart = function (e) {\n      if (this._headerScrollable) {\n        headerScrollableOnScroll = this._headerScrollable.option(\"onScroll\");\n\n        this._headerScrollable.option(\"onScroll\", void 0);\n      }\n\n      if (this._sidebarScrollable) {\n        sidebarScrollableOnScroll = this._sidebarScrollable.option(\"onScroll\");\n\n        this._sidebarScrollable.option(\"onScroll\", void 0);\n      }\n    }.bind(this);\n\n    config.onScroll = function (e) {\n      this._sidebarScrollable && this._sidebarScrollable.scrollTo({\n        top: e.scrollOffset.top\n      });\n      this._headerScrollable && this._headerScrollable.scrollTo({\n        left: e.scrollOffset.left\n      });\n    }.bind(this);\n\n    config.onEnd = function () {\n      this.notifyObserver(\"updateResizableArea\", {});\n      this._headerScrollable && this._headerScrollable.option(\"onScroll\", headerScrollableOnScroll);\n      this._sidebarScrollable && this._sidebarScrollable.option(\"onScroll\", sidebarScrollableOnScroll);\n    }.bind(this);\n\n    return config;\n  },\n  _createWorkSpaceElements: function _createWorkSpaceElements() {\n    if (this.option(\"crossScrollingEnabled\")) {\n      this._createWorkSpaceScrollableElements();\n    } else {\n      this._createWorkSpaceStaticElements();\n    }\n  },\n  _createWorkSpaceStaticElements: function _createWorkSpaceStaticElements() {\n    if (this._isVerticalGroupedWorkSpace()) {\n      this._dateTableScrollable.$content().append(this._$allDayContainer, this._$groupTable, this._$timePanel, this._$dateTable);\n\n      this.$element().append(this._$fixedContainer, this._$headerPanel, this._dateTableScrollable.$element());\n    } else {\n      this._dateTableScrollable.$content().append(this._$timePanel, this._$dateTable);\n\n      this.$element().append(this._$fixedContainer, this._$headerPanel, this._$allDayContainer, this._$allDayPanel, this._dateTableScrollable.$element());\n    }\n  },\n  _createWorkSpaceScrollableElements: function _createWorkSpaceScrollableElements() {\n    this.$element().append(this._$fixedContainer);\n\n    this._createHeaderScrollable();\n\n    this._createSidebarScrollable();\n\n    this.$element().append(this._dateTableScrollable.$element());\n\n    this._headerScrollable.$content().append(this._$headerPanel);\n\n    this._dateTableScrollable.$content().append(this._$dateTable);\n\n    if (this._isVerticalGroupedWorkSpace()) {\n      this._dateTableScrollable.$content().prepend(this._$allDayContainer);\n\n      this._sidebarScrollable.$content().append(this._$groupTable, this._$timePanel);\n    } else {\n      this._headerScrollable.$content().append(this._$allDayContainer, this._$allDayPanel);\n    }\n\n    this._sidebarScrollable.$content().append(this._$timePanel);\n  },\n  _createHeaderScrollable: function _createHeaderScrollable() {\n    var $headerScrollable = $(\"<div>\").addClass(SCHEDULER_HEADER_SCROLLABLE_CLASS).appendTo(this.$element());\n    this._headerScrollable = this._createComponent($headerScrollable, Scrollable, this._headerScrollableConfig());\n  },\n  _headerScrollableConfig: function _headerScrollableConfig() {\n    var dateTableScrollableOnScroll;\n    var config = {\n      useKeyboard: false,\n      showScrollbar: false,\n      direction: \"horizontal\",\n      useNative: false,\n      updateManually: true,\n      bounceEnabled: false,\n      pushBackValue: 0,\n      onStart: function (e) {\n        dateTableScrollableOnScroll = this._dateTableScrollable.option(\"onScroll\");\n      }.bind(this),\n      onScroll: function (e) {\n        this._dateTableScrollable.option(\"onScroll\", void 0);\n\n        this._dateTableScrollable.scrollTo({\n          left: e.scrollOffset.left\n        });\n\n        this._dateTableScrollable.option(\"onScroll\", dateTableScrollableOnScroll);\n      }.bind(this)\n    };\n    return config;\n  },\n  _createSidebarScrollable: function _createSidebarScrollable() {\n    var dateTableScrollableOnScroll;\n    var $timePanelScrollable = $(\"<div>\").addClass(SCHEDULER_SIDEBAR_SCROLLABLE_CLASS).appendTo(this.$element());\n    this._sidebarScrollable = this._createComponent($timePanelScrollable, Scrollable, {\n      useKeyboard: false,\n      showScrollbar: false,\n      direction: \"vertical\",\n      useNative: false,\n      updateManually: true,\n      bounceEnabled: false,\n      pushBackValue: 0,\n      onStart: function (e) {\n        dateTableScrollableOnScroll = this._dateTableScrollable.option(\"onScroll\");\n\n        this._dateTableScrollable.option(\"onScroll\", void 0);\n      }.bind(this),\n      onScroll: function (e) {\n        this._dateTableScrollable.scrollTo({\n          top: e.scrollOffset.top\n        });\n      }.bind(this),\n      onEnd: function (e) {\n        this._dateTableScrollable.option(\"onScroll\", dateTableScrollableOnScroll);\n      }.bind(this)\n    });\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible && this._isVerticalGroupedWorkSpace()) {\n      this._setHorizontalGroupHeaderCellsHeight();\n    }\n\n    if (visible && this._needCreateCrossScrolling()) {\n      this._setTableSizes();\n    }\n  },\n  _attachTableClasses: function _attachTableClasses() {\n    this._addTableClass(this._$dateTable, this._getDateTableClass());\n\n    if (this._isVerticalGroupedWorkSpace()) {\n      var groupCount = this._getGroupCount();\n\n      for (var i = 0; i < groupCount; i++) {\n        this._addTableClass(this._allDayTables[i], ALL_DAY_TABLE_CLASS);\n      }\n    } else {\n      this._addTableClass(this._$allDayTable, ALL_DAY_TABLE_CLASS);\n    }\n  },\n  _attachHeaderTableClasses: function _attachHeaderTableClasses() {\n    this._addTableClass(this._$headerPanel, HEADER_PANEL_CLASS);\n  },\n  _addTableClass: function _addTableClass($el, className) {\n    $el && !$el.hasClass(className) && $el.addClass(className);\n  },\n  _setTableSizes: function _setTableSizes() {\n    this._attachTableClasses();\n\n    var cellWidth = this.getCellWidth();\n\n    if (cellWidth < this.getCellMinWidth()) {\n      cellWidth = this.getCellMinWidth();\n    }\n\n    var minWidth = this.getWorkSpaceMinWidth();\n\n    var $headerCells = this._$headerPanel.find(\"tr\").last().find(\"th\");\n\n    var width = cellWidth * $headerCells.length;\n\n    if (width < minWidth) {\n      width = minWidth;\n    }\n\n    this._$headerPanel.width(width);\n\n    this._$dateTable.width(width);\n\n    this._$allDayTable && this._$allDayTable.width(width);\n\n    this._attachHeaderTableClasses();\n\n    if (this._isVerticalGroupedWorkSpace()) {\n      this._setHorizontalGroupHeaderCellsHeight();\n    }\n  },\n  getWorkSpaceMinWidth: function getWorkSpaceMinWidth() {\n    return this._groupedStrategy.getWorkSpaceMinWidth();\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    if (this.option(\"crossScrollingEnabled\")) {\n      this._setTableSizes();\n    }\n\n    this.headerPanelOffsetRecalculate();\n\n    this._cleanCellDataCache();\n\n    this._cleanAllowedPositions();\n  },\n  _needCreateCrossScrolling: function _needCreateCrossScrolling() {\n    return this.option(\"crossScrollingEnabled\");\n  },\n  _getElementClass: noop,\n  _getRowCount: noop,\n  _getCellCount: noop,\n  _initMarkup: function _initMarkup() {\n    this._initWorkSpaceUnits();\n\n    this._initDateTableScrollable();\n\n    this._createWorkSpaceElements();\n\n    this.callBase();\n\n    if (!this.option(\"crossScrollingEnabled\")) {\n      this._attachTableClasses();\n\n      this._attachHeaderTableClasses();\n    }\n\n    this._toggleGroupedClass();\n\n    this._toggleFixedScrollableClass();\n\n    this._renderView();\n\n    this._attachEvents();\n\n    this._setFocusOnCellByOption(this.option(\"selectedCellData\"));\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._renderDateTimeIndication();\n\n    this._setIndicationUpdateInterval();\n  },\n  _toggleGroupedClass: function _toggleGroupedClass() {\n    this.$element().toggleClass(GROUPED_WORKSPACE_CLASS, this._getGroupCount() > 0);\n  },\n  _toggleFixedScrollableClass: noop,\n  _renderView: function _renderView() {\n    this._setFirstViewDate();\n\n    this._applyCellTemplates(this._renderGroupHeader());\n\n    this._renderDateHeader();\n\n    this._renderTimePanel();\n\n    if (this._isVerticalGroupedWorkSpace()) {\n      var groupCount = this._getGroupCount();\n\n      for (var i = 0; i < groupCount; i++) {\n        this._renderAllDayPanel(i);\n      }\n    }\n\n    this._renderDateTable();\n\n    this._renderAllDayPanel();\n\n    this._updateGroupTableHeight();\n\n    this._shader = new VerticalShader();\n  },\n  _updateGroupTableHeight: function _updateGroupTableHeight() {\n    if (this._isVerticalGroupedWorkSpace() && windowUtils.hasWindow()) {\n      this._setHorizontalGroupHeaderCellsHeight();\n    }\n  },\n  _renderDateTimeIndication: noop,\n  _setIndicationUpdateInterval: noop,\n  _refreshDateTimeIndication: noop,\n  _setFocusOnCellByOption: function _setFocusOnCellByOption(data) {\n    var cells = [];\n\n    this._releaseFocusedCell();\n\n    for (var i = 0; i < data.length; i++) {\n      var groups = data[i].groups;\n      var groupIndex = this.option(\"groups\").length && groups ? this._getGroupIndexByResourceId(groups) : 0;\n      var allDay = !!data[i].allDay;\n      var coordinates = this.getCoordinatesByDate(data[i].startDate, groupIndex, allDay);\n\n      var $cell = this._getCellByCoordinates(coordinates, groupIndex);\n\n      if (isDefined($cell)) {\n        this._toggleFocusClass(true, $cell);\n\n        cells.push($cell.get(0));\n      }\n    }\n\n    this._focusedCells = cells;\n  },\n  _getGroupIndexByResourceId: function _getGroupIndexByResourceId(id) {\n    var groups = this.option(\"groups\");\n    var groupKey = Object.keys(id)[0];\n    var groupValue = id[groupKey];\n    var tree = this.invoke(\"createResourcesTree\", groups);\n    var index = 0;\n\n    for (var i = 0; i < tree.length; i++) {\n      if (tree[i].name === groupKey && tree[i].value === groupValue) {\n        index = tree[i].leafIndex;\n      }\n    }\n\n    return index;\n  },\n  _setFirstViewDate: function _setFirstViewDate() {\n    var firstDayOfWeek = isDefined(this._firstDayOfWeek()) ? this._firstDayOfWeek() : dateLocalization.firstDayOfWeekIndex();\n    this._firstViewDate = dateUtils.getFirstWeekDate(this._getViewStartByOptions(), firstDayOfWeek);\n\n    this._setStartDayHour(this._firstViewDate);\n  },\n  _getViewStartByOptions: function _getViewStartByOptions() {\n    if (!this.option(\"startDate\")) {\n      return this.option(\"currentDate\");\n    } else {\n      var startDate = dateUtils.trimTime(this._getStartViewDate());\n      var currentDate = this.option(\"currentDate\");\n      var diff = startDate.getTime() <= currentDate.getTime() ? 1 : -1;\n      var endDate = new Date(startDate.getTime() + this._getIntervalDuration() * diff);\n\n      while (!this._dateInRange(currentDate, startDate, endDate, diff)) {\n        startDate = endDate;\n        endDate = new Date(startDate.getTime() + this._getIntervalDuration() * diff);\n      }\n\n      return diff > 0 ? startDate : endDate;\n    }\n  },\n  _getHeaderDate: function _getHeaderDate() {\n    return this.getStartViewDate();\n  },\n  _getStartViewDate: function _getStartViewDate() {\n    return this.option(\"startDate\");\n  },\n  _dateInRange: function _dateInRange(date, startDate, endDate, diff) {\n    return diff > 0 ? dateUtils.dateInRange(date, startDate, new Date(endDate.getTime() - 1)) : dateUtils.dateInRange(date, endDate, startDate, \"date\");\n  },\n  _getIntervalDuration: function _getIntervalDuration() {\n    return toMs(\"day\") * this.option(\"intervalCount\");\n  },\n  _setStartDayHour: function _setStartDayHour(date) {\n    var startDayHour = this.option(\"startDayHour\");\n\n    if (isDefined(startDayHour)) {\n      date.setHours(startDayHour, startDayHour % 1 * 60, 0, 0);\n    }\n  },\n  _firstDayOfWeek: function _firstDayOfWeek() {\n    return this.option(\"firstDayOfWeek\");\n  },\n  _attachEvents: function _attachEvents() {\n    this._createSelectionChangedAction();\n\n    this._attachClickEvent();\n\n    this._attachContextMenuEvent();\n  },\n  _attachClickEvent: function _attachClickEvent() {\n    var that = this;\n\n    var pointerDownAction = this._createAction(function (e) {\n      that._pointerDownHandler(e.event);\n    });\n\n    this._createCellClickAction();\n\n    var cellSelector = \".\" + DATE_TABLE_CELL_CLASS + \",.\" + ALL_DAY_TABLE_CELL_CLASS;\n    var $element = this.$element();\n    eventsEngine.off($element, SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME);\n    eventsEngine.off($element, SCHEDULER_CELL_DXCLICK_EVENT_NAME);\n    eventsEngine.on($element, SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME, function (e) {\n      if (eventUtils.isMouseEvent(e) && e.which > 1) {\n        e.preventDefault();\n        return;\n      }\n\n      pointerDownAction({\n        event: e\n      });\n    });\n    eventsEngine.on($element, SCHEDULER_CELL_DXCLICK_EVENT_NAME, cellSelector, function (e) {\n      var $cell = $(e.target);\n\n      that._cellClickAction({\n        event: e,\n        cellElement: getPublicElement($cell),\n        cellData: that.getCellData($cell)\n      });\n    });\n  },\n  _createCellClickAction: function _createCellClickAction() {\n    var that = this;\n    this._cellClickAction = this._createActionByOption(\"onCellClick\", {\n      afterExecute: function afterExecute(e) {\n        that._moveToClosestNonStub(e.args[0].event);\n      }\n    });\n  },\n  _createSelectionChangedAction: function _createSelectionChangedAction() {\n    this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\");\n  },\n  _moveToClosestNonStub: function _moveToClosestNonStub(e) {\n    var $target = $(e.target);\n\n    if (this._showPopup && this._hasFocusClass($target)) {\n      delete this._showPopup;\n\n      this._showAddAppointmentPopup($target);\n    }\n  },\n  _pointerDownHandler: function _pointerDownHandler(e) {\n    var $target = $(e.target);\n\n    if (!$target.hasClass(DATE_TABLE_CELL_CLASS) && !$target.hasClass(ALL_DAY_TABLE_CELL_CLASS)) {\n      this._isCellClick = false;\n      return;\n    }\n\n    this._isCellClick = true;\n\n    if ($target.hasClass(DATE_TABLE_FOCUSED_CELL_CLASS)) {\n      this._showPopup = true;\n    } else {\n      this._setFocusedCell($target);\n    }\n  },\n  _showAddAppointmentPopup: function _showAddAppointmentPopup($cell) {\n    var firstCellData = this.getCellData($cell.first());\n    var lastCellData = this.getCellData($cell.last());\n    var args = {\n      startDate: firstCellData.startDate,\n      endDate: lastCellData.endDate\n    };\n\n    if (isDefined(lastCellData.allDay)) {\n      args.allDay = lastCellData.allDay;\n    }\n\n    extend(args, lastCellData.groups);\n    this.notifyObserver(\"showAddAppointmentPopup\", args);\n  },\n  _attachContextMenuEvent: function _attachContextMenuEvent() {\n    this._createContextMenuAction();\n\n    var cellSelector = \".\" + DATE_TABLE_CELL_CLASS + \",.\" + ALL_DAY_TABLE_CELL_CLASS;\n    var $element = this.$element();\n    var eventName = eventUtils.addNamespace(contextMenuEvent.name, this.NAME);\n    eventsEngine.off($element, eventName, cellSelector);\n    eventsEngine.on($element, eventName, cellSelector, this._contextMenuHandler.bind(this));\n  },\n  _contextMenuHandler: function _contextMenuHandler(e) {\n    var $cell = $(e.target);\n\n    this._contextMenuAction({\n      event: e,\n      cellElement: getPublicElement($cell),\n      cellData: this.getCellData($cell)\n    });\n\n    this._contextMenuHandled = true;\n  },\n  _createContextMenuAction: function _createContextMenuAction() {\n    this._contextMenuAction = this._createActionByOption(\"onCellContextMenu\");\n  },\n  _getGroupHeaderContainer: function _getGroupHeaderContainer() {\n    if (this._isVerticalGroupedWorkSpace()) {\n      return this._$groupTable;\n    }\n\n    return this._$thead;\n  },\n  _getDateHeaderContainer: function _getDateHeaderContainer() {\n    return this._$thead;\n  },\n  _renderGroupHeader: function _renderGroupHeader() {\n    var $container = this._getGroupHeaderContainer();\n\n    var groupCount = this._getGroupCount();\n\n    var cellTemplates = [];\n\n    if (groupCount) {\n      var groupRows = this._makeGroupRows(this.option(\"groups\"), this.option(\"groupByDate\"));\n\n      this._attachGroupCountAttr(groupCount, groupRows);\n\n      $container.append(groupRows.elements);\n      cellTemplates = groupRows.cellTemplates;\n    } else {\n      this._detachGroupCountAttr();\n    }\n\n    return cellTemplates;\n  },\n  _applyCellTemplates: function _applyCellTemplates(templates) {\n    templates.forEach(function (template) {\n      template();\n    });\n  },\n  _detachGroupCountAttr: function _detachGroupCountAttr() {\n    var groupedAttr = this._groupedStrategy.getGroupCountAttr();\n\n    this.$element().removeAttr(groupedAttr.attr);\n  },\n  _attachGroupCountAttr: function _attachGroupCountAttr(groupRowCount, groupRows) {\n    var groupedAttr = this._groupedStrategy.getGroupCountAttr(groupRowCount, groupRows);\n\n    this.$element().attr(groupedAttr.attr, groupedAttr.count);\n  },\n  headerPanelOffsetRecalculate: function headerPanelOffsetRecalculate() {\n    if (!this.option(\"resourceCellTemplate\") && !this.option(\"dateCellTemplate\")) {\n      return;\n    }\n\n    var headerPanelHeight = this.getHeaderPanelHeight();\n    var headerHeight = this.invoke(\"getHeaderHeight\");\n    var allDayPanelHeight = this.supportAllDayRow() && this.option(\"showAllDayPanel\") ? this._groupedStrategy.getAllDayTableHeight() : 0;\n    headerPanelHeight && this._headerScrollable && this._headerScrollable.$element().height(headerPanelHeight + allDayPanelHeight);\n    headerPanelHeight && this._dateTableScrollable.$element().css({\n      paddingBottom: allDayPanelHeight + headerPanelHeight + \"px\",\n      marginBottom: -1 * (parseInt(headerPanelHeight, 10) + allDayPanelHeight) + \"px\"\n    });\n    headerPanelHeight && this._sidebarScrollable && this._sidebarScrollable.$element().css({\n      paddingBottom: allDayPanelHeight + headerPanelHeight + \"px\",\n      marginBottom: -1 * (parseInt(headerPanelHeight, 10) + allDayPanelHeight) + \"px\"\n    });\n    this._$allDayTitle && this._$allDayTitle.css(\"top\", headerHeight + headerPanelHeight + \"px\");\n  },\n  _makeGroupRows: function _makeGroupRows(groups, groupByDate) {\n    var tableCreatorStrategy = this._isVerticalGroupedWorkSpace() ? tableCreator.VERTICAL : tableCreator.HORIZONTAL;\n    return tableCreator.makeGroupedTable(tableCreatorStrategy, groups, {\n      groupHeaderRowClass: this._getGroupRowClass(),\n      groupRowClass: this._getGroupRowClass(),\n      groupHeaderClass: this._getGroupHeaderClass.bind(this),\n      groupHeaderContentClass: this._getGroupHeaderContentClass()\n    }, this._getCellCount() || 1, this.option(\"resourceCellTemplate\"), this._getGroupCount(), groupByDate);\n  },\n  _getDateHeaderTemplate: function _getDateHeaderTemplate() {\n    return this.option(\"dateCellTemplate\");\n  },\n  _renderDateHeader: function _renderDateHeader() {\n    var $container = this._getDateHeaderContainer();\n\n    var $headerRow = $(\"<tr>\").addClass(HEADER_ROW_CLASS);\n\n    var count = this._getCellCount();\n\n    var cellTemplate = this._getDateHeaderTemplate();\n\n    var repeatCount = this._calculateHeaderCellRepeatCount();\n\n    var templateCallbacks = [];\n    var colspan = this.option(\"groupByDate\") ? this._getGroupCount() : 1;\n    var groupByDate = this.option(\"groupByDate\");\n    var i;\n    var j;\n\n    if (!groupByDate) {\n      for (j = 0; j < repeatCount; j++) {\n        for (i = 0; i < count; i++) {\n          this._renderDateHeaderTemplate($headerRow, i, j * repeatCount + i, cellTemplate, templateCallbacks);\n        }\n      }\n\n      $container.append($headerRow);\n    } else {\n      for (i = 0; i < count; i++) {\n        var $cell = this._renderDateHeaderTemplate($headerRow, i, i * repeatCount, cellTemplate, templateCallbacks);\n\n        $cell.attr(\"colSpan\", colspan);\n      }\n\n      $container.prepend($headerRow);\n    }\n\n    this._applyCellTemplates(templateCallbacks);\n\n    return $headerRow;\n  },\n  _renderDateHeaderTemplate: function _renderDateHeaderTemplate($container, i, calculatedIndex, cellTemplate, templateCallbacks) {\n    var text = this._getHeaderText(i);\n\n    var $cell = $(\"<th>\").addClass(this._getHeaderPanelCellClass(i)).attr(\"title\", text);\n\n    if (cellTemplate && cellTemplate.render) {\n      templateCallbacks.push(cellTemplate.render.bind(cellTemplate, {\n        model: {\n          text: text,\n          date: this._getDateByIndex(i)\n        },\n        index: calculatedIndex,\n        container: getPublicElement($cell)\n      }));\n    } else {\n      $cell.text(text);\n    }\n\n    $container.append($cell);\n    return $cell;\n  },\n  _getHeaderPanelCellClass: function _getHeaderPanelCellClass(i) {\n    var cellClass = HEADER_PANEL_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS;\n    return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i + 1);\n  },\n  _calculateHeaderCellRepeatCount: function _calculateHeaderCellRepeatCount() {\n    return this._groupedStrategy.calculateHeaderCellRepeatCount();\n  },\n  _renderAllDayPanel: function _renderAllDayPanel(index) {\n    var cellCount = this._getCellCount();\n\n    if (!this._isVerticalGroupedWorkSpace()) {\n      cellCount *= this._getGroupCount() || 1;\n    }\n\n    var cellTemplates = this._renderTableBody({\n      container: this._allDayPanels.length ? getPublicElement(this._allDayTables[index]) : getPublicElement(this._$allDayTable),\n      rowCount: 1,\n      cellCount: cellCount,\n      cellClass: this._getAllDayPanelCellClass.bind(this),\n      rowClass: ALL_DAY_TABLE_ROW_CLASS,\n      cellTemplate: this.option(\"dataCellTemplate\"),\n      getCellData: this._getAllDayCellData.bind(this),\n      groupIndex: index\n    }, true);\n\n    this._toggleAllDayVisibility();\n\n    this._applyCellTemplates(cellTemplates);\n  },\n  _getAllDayPanelCellClass: function _getAllDayPanelCellClass(i, j) {\n    var cellClass = ALL_DAY_TABLE_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS;\n    return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, j + 1);\n  },\n  _getAllDayCellData: function _getAllDayCellData(cell, rowIndex, cellIndex, groupIndex) {\n    var startDate = this._getDateByCellIndexes(rowIndex, cellIndex);\n\n    startDate = dateUtils.trimTime(startDate);\n    var data = {\n      startDate: startDate,\n      endDate: new Date(startDate.getTime() + DAY_MS),\n      allDay: true\n    };\n\n    var groups = this._getCellGroups(groupIndex || this._getGroupIndex(rowIndex, cellIndex));\n\n    if (groups.length) {\n      data.groups = {};\n    }\n\n    for (var i = 0; i < groups.length; i++) {\n      data.groups[groups[i].name] = groups[i].id;\n    }\n\n    return {\n      key: CELL_DATA,\n      value: data\n    };\n  },\n  _toggleAllDayVisibility: function _toggleAllDayVisibility() {\n    var showAllDayPanel = this.option(\"showAllDayPanel\");\n\n    this._$allDayPanel.toggle(showAllDayPanel);\n\n    this._$allDayTitle && this._$allDayTitle.toggleClass(ALL_DAY_TITLE_HIDDEN_CLASS, !showAllDayPanel);\n    this.$element().toggleClass(WORKSPACE_WITH_ALL_DAY_CLASS, showAllDayPanel);\n\n    this._changeAllDayVisibility();\n\n    this._updateScrollable();\n  },\n  _changeAllDayVisibility: function _changeAllDayVisibility() {\n    this.$element().toggleClass(WORKSPACE_WITH_COLLAPSED_ALL_DAY_CLASS, !this.option(\"allDayExpanded\") && this.option(\"showAllDayPanel\"));\n  },\n  _updateScrollable: function _updateScrollable() {\n    this._dateTableScrollable.update();\n\n    this._headerScrollable && this._headerScrollable.update();\n    this._sidebarScrollable && this._sidebarScrollable.update();\n  },\n  _renderTimePanel: function _renderTimePanel() {\n    var repeatCount = this._groupedStrategy.calculateTimeCellRepeatCount();\n\n    this._renderTableBody({\n      container: getPublicElement(this._$timePanel),\n      rowCount: this._getTimePanelRowCount() * repeatCount,\n      cellCount: 1,\n      cellClass: this._getTimeCellClass.bind(this),\n      rowClass: TIME_PANEL_ROW_CLASS,\n      cellTemplate: this.option(\"timeCellTemplate\"),\n      getCellText: this._getTimeText.bind(this),\n      getCellDate: this._getTimeCellDate.bind(this),\n      groupCount: this._getGroupCount(),\n      allDayElements: this._insertAllDayRowsIntoDateTable() ? this._allDayTitles : void 0\n    });\n  },\n  _getTimePanelRowCount: function _getTimePanelRowCount() {\n    return this._getCellCountInDay();\n  },\n  _getCellCountInDay: function _getCellCountInDay() {\n    return Math.ceil(this._calculateDayDuration() / this.option(\"hoursInterval\"));\n  },\n  _calculateDayDuration: function _calculateDayDuration() {\n    return this.option(\"endDayHour\") - this.option(\"startDayHour\");\n  },\n  _getTimeCellClass: function _getTimeCellClass(i) {\n    var cellClass = TIME_PANEL_CELL_CLASS + \" \" + VERTICAL_SIZES_CLASS;\n    return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i, i);\n  },\n  _getTimeText: function _getTimeText(i) {\n    var startViewDate = this._getTimeCellDate(i);\n\n    var index = i % this._getRowCount();\n\n    if (index % 2 === 0) {\n      return dateLocalization.format(startViewDate, \"shorttime\");\n    }\n\n    return \"\";\n  },\n  _getTimeCellDate: function _getTimeCellDate(i) {\n    var startViewDate = new Date(this.getStartViewDate());\n    var timeCellDuration = Math.round(this.getCellDuration());\n    var lastCellInDay = this._calculateDayDuration() / this.option(\"hoursInterval\");\n    startViewDate.setMilliseconds(startViewDate.getMilliseconds() + timeCellDuration * (i % lastCellInDay));\n    return startViewDate;\n  },\n  _renderDateTable: function _renderDateTable() {\n    var groupCount = this._getGroupCount();\n\n    this._renderTableBody({\n      container: getPublicElement(this._$dateTable),\n      rowCount: this._getTotalRowCount(groupCount),\n      cellCount: this._getTotalCellCount(groupCount),\n      cellClass: this._getDateTableCellClass.bind(this),\n      rowClass: this._getDateTableRowClass(),\n      cellTemplate: this.option(\"dataCellTemplate\"),\n      getCellData: this._getCellData.bind(this),\n      allDayElements: this._insertAllDayRowsIntoDateTable() ? this._allDayPanels : void 0,\n      groupCount: groupCount,\n      groupByDate: this.option(\"groupByDate\")\n    });\n  },\n  _insertAllDayRowsIntoDateTable: function _insertAllDayRowsIntoDateTable() {\n    return this._groupedStrategy.insertAllDayRowsIntoDateTable();\n  },\n  _getTotalCellCount: function _getTotalCellCount(groupCount) {\n    return this._groupedStrategy.getTotalCellCount(groupCount);\n  },\n  _getTotalRowCount: function _getTotalRowCount() {\n    return this._groupedStrategy.getTotalRowCount();\n  },\n  _getCellData: function _getCellData(cell, rowIndex, cellIndex) {\n    var data = this._prepareCellData(rowIndex, cellIndex, cell);\n\n    return {\n      key: CELL_DATA,\n      value: data\n    };\n  },\n  _prepareCellData: function _prepareCellData(rowIndex, cellIndex) {\n    var startDate = this._getDateByCellIndexes(rowIndex, cellIndex);\n\n    var endDate = this.calculateEndDate(startDate);\n    var data = {\n      startDate: startDate,\n      endDate: endDate,\n      allDay: this._getTableAllDay()\n    };\n\n    var groups = this._getCellGroups(this._getGroupIndex(rowIndex, cellIndex));\n\n    if (groups.length) {\n      data.groups = {};\n    }\n\n    for (var i = 0; i < groups.length; i++) {\n      data.groups[groups[i].name] = groups[i].id;\n    }\n\n    return data;\n  },\n  _getGroupIndex: function _getGroupIndex(rowIndex, cellIndex) {\n    return this._groupedStrategy.getGroupIndex(rowIndex, cellIndex);\n  },\n  _getTableAllDay: function _getTableAllDay() {\n    return false;\n  },\n  calculateEndDate: function calculateEndDate(startDate) {\n    var result = new Date(startDate);\n    result.setMilliseconds(result.getMilliseconds() + Math.round(this._getInterval()));\n    return result;\n  },\n  _getGroupCount: function _getGroupCount() {\n    var groups = this.option(\"groups\");\n    var result = 0;\n\n    for (var i = 0, len = groups.length; i < len; i++) {\n      if (!i) {\n        result = groups[i].items.length;\n      } else {\n        result *= groups[i].items.length;\n      }\n    }\n\n    return result;\n  },\n  _getPathToLeaf: function _getPathToLeaf(leafIndex) {\n    var tree = this.invoke(\"createResourcesTree\", this.option(\"groups\"));\n\n    function findLeafByIndex(data, index) {\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].leafIndex === index) {\n          return data[i];\n        } else {\n          var _leaf = findLeafByIndex(data[i].children, index);\n\n          if (_leaf) {\n            return _leaf;\n          }\n        }\n      }\n    }\n\n    function makeBranch(leaf, result) {\n      result = result || [];\n      result.push(leaf.value);\n\n      if (leaf.parent) {\n        makeBranch(leaf.parent, result);\n      }\n\n      return result;\n    }\n\n    var leaf = findLeafByIndex(tree, leafIndex);\n    return makeBranch(leaf).reverse();\n  },\n  _getCellGroups: function _getCellGroups(groupIndex) {\n    var result = [];\n\n    if (this._getGroupCount()) {\n      var groups = this.option(\"groups\");\n\n      if (groupIndex < 0) {\n        return;\n      }\n\n      var path = this._getPathToLeaf(groupIndex);\n\n      for (var i = 0; i < groups.length; i++) {\n        result.push({\n          name: groups[i].name,\n          id: path[i]\n        });\n      }\n    }\n\n    return result;\n  },\n  _attachTablesEvents: function _attachTablesEvents() {\n    var that = this;\n    var isPointerDown = false;\n    var cellHeight;\n    var cellWidth;\n    var $element = this.$element();\n    eventsEngine.off($element, SCHEDULER_CELL_DXDRAGENTER_EVENT_NAME);\n    eventsEngine.off($element, SCHEDULER_CELL_DXDROP_EVENT_NAME);\n    eventsEngine.off($element, SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME);\n    eventsEngine.off($element, SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME);\n    eventsEngine.on($element, SCHEDULER_CELL_DXDRAGENTER_EVENT_NAME, SCHEDULER_DRAG_AND_DROP_SELECTOR, {\n      itemSizeFunc: function itemSizeFunc($element) {\n        if (!cellHeight) {\n          cellHeight = $element.get(0).getBoundingClientRect().height;\n        }\n\n        if (!cellWidth) {\n          cellWidth = $element.get(0).getBoundingClientRect().width;\n        }\n\n        return {\n          width: cellWidth,\n          height: cellHeight\n        };\n      }\n    }, function (e) {\n      if (that._$currentTableTarget) {\n        that._$currentTableTarget.removeClass(DATE_TABLE_DROPPABLE_CELL_CLASS);\n      }\n\n      that._$currentTableTarget = $(e.target);\n\n      that._$currentTableTarget.addClass(DATE_TABLE_DROPPABLE_CELL_CLASS);\n    });\n    eventsEngine.on($element, SCHEDULER_CELL_DXDROP_EVENT_NAME, SCHEDULER_DRAG_AND_DROP_SELECTOR, function (e) {\n      $(e.target).removeClass(DATE_TABLE_DROPPABLE_CELL_CLASS);\n      cellHeight = 0;\n      cellWidth = 0;\n    });\n    eventsEngine.on($element, SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME, SCHEDULER_DRAG_AND_DROP_SELECTOR, function (e) {\n      if (eventUtils.isMouseEvent(e) && 1 === e.which) {\n        isPointerDown = true;\n        that.$element().addClass(WORKSPACE_WITH_MOUSE_SELECTION_CLASS);\n        eventsEngine.off(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME);\n        eventsEngine.on(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME, function () {\n          isPointerDown = false;\n          that.$element().removeClass(WORKSPACE_WITH_MOUSE_SELECTION_CLASS);\n        });\n      }\n    });\n    eventsEngine.on($element, SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME, SCHEDULER_DRAG_AND_DROP_SELECTOR, function (e) {\n      if (isPointerDown && that._dateTableScrollable && !that._dateTableScrollable.option(\"scrollByContent\")) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        that._moveToCell($(e.target), true);\n      }\n    });\n  },\n  _getDateTables: function _getDateTables() {\n    return this._$dateTable.add(this._$allDayTable);\n  },\n  _getDateTable: function _getDateTable() {\n    return this._$dateTable;\n  },\n  _getAllDayTable: function _getAllDayTable() {\n    return this._$allDayTable;\n  },\n  _getInterval: function _getInterval() {\n    if (void 0 === this._interval) {\n      this._interval = this.option(\"hoursInterval\") * HOUR_MS;\n    }\n\n    return this._interval;\n  },\n  _getHeaderText: function _getHeaderText(headerIndex) {\n    return dateLocalization.format(this._getDateByIndex(headerIndex), this._getFormat());\n  },\n  _getDateByIndex: abstract,\n  _getFormat: abstract,\n  _calculateCellIndex: function _calculateCellIndex(rowIndex, cellIndex) {\n    return this._groupedStrategy.calculateCellIndex(rowIndex, cellIndex);\n  },\n  _renderTableBody: function _renderTableBody(options, delayCellTemplateRendering) {\n    var result = [];\n\n    if (!delayCellTemplateRendering) {\n      this._applyCellTemplates(tableCreator.makeTable(options));\n    } else {\n      result = tableCreator.makeTable(options);\n    }\n\n    return result;\n  },\n  _removeAllDayElements: function _removeAllDayElements() {\n    this._$allDayTable && this._$allDayTable.remove();\n    this._$allDayTitle && this._$allDayTitle.remove();\n  },\n  _cleanView: function _cleanView() {\n    this._cleanCellDataCache();\n\n    this._cleanAllowedPositions();\n\n    this._$thead.empty();\n\n    this._$dateTable.empty();\n\n    this._shader && this._shader.clean();\n\n    this._$timePanel.empty();\n\n    this._$allDayTable && this._$allDayTable.empty();\n\n    this._$groupTable.empty();\n\n    delete this._hiddenInterval;\n    delete this._interval;\n  },\n  _clean: function _clean() {\n    eventsEngine.off(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME);\n    this.callBase();\n  },\n  getWorkArea: function getWorkArea() {\n    return this._dateTableScrollable.$content();\n  },\n  getScrollable: function getScrollable() {\n    return this._dateTableScrollable;\n  },\n  getScrollableScrollTop: function getScrollableScrollTop() {\n    return this._dateTableScrollable.scrollTop();\n  },\n  getGroupedScrollableScrollTop: function getGroupedScrollableScrollTop(allDay) {\n    return this._groupedStrategy.getScrollableScrollTop(allDay);\n  },\n  getScrollableScrollLeft: function getScrollableScrollLeft() {\n    return this._dateTableScrollable.scrollLeft();\n  },\n  getScrollableOuterWidth: function getScrollableOuterWidth() {\n    return this._dateTableScrollable.scrollWidth();\n  },\n  getScrollableContainer: function getScrollableContainer() {\n    return this._dateTableScrollable._container();\n  },\n  getHeaderPanelHeight: function getHeaderPanelHeight() {\n    return this._$headerPanel && this._$headerPanel.outerHeight(true);\n  },\n  getTimePanelWidth: function getTimePanelWidth() {\n    return this._$timePanel && this._$timePanel.get(0).getBoundingClientRect().width;\n  },\n  getGroupTableWidth: function getGroupTableWidth() {\n    return this._$groupTable ? this._$groupTable.outerWidth() : 0;\n  },\n  getWorkSpaceLeftOffset: function getWorkSpaceLeftOffset() {\n    return this._groupedStrategy.getLeftOffset();\n  },\n  getGroupedStrategy: function getGroupedStrategy() {\n    return this._groupedStrategy;\n  },\n  _getCellCoordinatesByIndex: function _getCellCoordinatesByIndex(index) {\n    var cellIndex = Math.floor(index / this._getRowCount());\n    var rowIndex = index - this._getRowCount() * cellIndex;\n    return {\n      cellIndex: cellIndex,\n      rowIndex: rowIndex\n    };\n  },\n  _getDateByCellIndexes: function _getDateByCellIndexes(rowIndex, cellIndex, patchedIndexes) {\n    cellIndex = !patchedIndexes ? this._patchCellIndex(cellIndex) : cellIndex;\n    var firstViewDate = this.getStartViewDate();\n    var currentDate = new Date(firstViewDate.getTime() + this._getMillisecondsOffset(rowIndex, cellIndex) + this._getOffsetByCount(cellIndex));\n    currentDate.setTime(currentDate.getTime() + dateUtils.getTimezonesDifference(firstViewDate, currentDate));\n    return currentDate;\n  },\n  _patchCellIndex: function _patchCellIndex(cellIndex) {\n    if (this.isGroupedByDate()) {\n      cellIndex = Math.floor(cellIndex / this._getGroupCount());\n    }\n\n    return cellIndex;\n  },\n  _getOffsetByCount: function _getOffsetByCount() {\n    return 0;\n  },\n  _getMillisecondsOffset: function _getMillisecondsOffset(rowIndex, cellIndex) {\n    return this._getInterval() * this._calculateCellIndex(rowIndex, cellIndex) + this._calculateHiddenInterval(rowIndex, cellIndex);\n  },\n  _calculateHiddenInterval: function _calculateHiddenInterval(rowIndex, cellIndex) {\n    var dayCount = cellIndex % this._getCellCount();\n\n    return dayCount * this._getHiddenInterval();\n  },\n  _getHiddenInterval: function _getHiddenInterval() {\n    if (void 0 === this._hiddenInterval) {\n      this._hiddenInterval = DAY_MS - this.getVisibleDayDuration();\n    }\n\n    return this._hiddenInterval;\n  },\n  _getIntervalBetween: function _getIntervalBetween(currentDate, allDay) {\n    var firstViewDate = this.getStartViewDate();\n    var startDayTime = this.option(\"startDayHour\") * HOUR_MS;\n    var timeZoneOffset = dateUtils.getTimezonesDifference(firstViewDate, currentDate);\n    var fullInterval = currentDate.getTime() - firstViewDate.getTime() - timeZoneOffset;\n\n    var days = this._getDaysOfInterval(fullInterval, startDayTime);\n\n    var weekendsCount = this._getWeekendsCount(days);\n\n    var result = (days - weekendsCount) * DAY_MS;\n\n    if (!allDay) {\n      result = fullInterval - days * this._getHiddenInterval() - weekendsCount * this.getVisibleDayDuration();\n    }\n\n    return result;\n  },\n  _getWeekendsCount: function _getWeekendsCount() {\n    return 0;\n  },\n  _getDaysOfInterval: function _getDaysOfInterval(fullInterval, startDayTime) {\n    return Math.floor((fullInterval + startDayTime) / DAY_MS);\n  },\n  _getGroupIndexes: function _getGroupIndexes(appointmentResources) {\n    var result = [];\n\n    if (appointmentResources && this.option(\"groups\").length) {\n      var tree = this.invoke(\"createResourcesTree\", this.option(\"groups\"));\n      result = this.invoke(\"getResourceTreeLeaves\", tree, appointmentResources);\n    }\n\n    return result;\n  },\n  _updateIndex: function _updateIndex(index) {\n    return index * this._getRowCount();\n  },\n  _getDroppableCell: function _getDroppableCell() {\n    return this._getDateTables().find(\".\" + DATE_TABLE_DROPPABLE_CELL_CLASS);\n  },\n  _getWorkSpaceWidth: function _getWorkSpaceWidth() {\n    if (this._needCreateCrossScrolling()) {\n      return this._$dateTable.get(0).getBoundingClientRect().width;\n    }\n\n    return this.$element().get(0).getBoundingClientRect().width - this.getTimePanelWidth();\n  },\n  _getCellPositionByIndex: function _getCellPositionByIndex(index, groupIndex, inAllDayRow) {\n    var cellCoordinates = this._getCellCoordinatesByIndex(index);\n\n    var $cell = this._getCellByCoordinates(cellCoordinates, groupIndex, inAllDayRow);\n\n    var result = this._getCellPosition($cell);\n\n    this.setCellDataCache(cellCoordinates, groupIndex, $cell);\n\n    if (result) {\n      result.rowIndex = cellCoordinates.rowIndex;\n      result.cellIndex = cellCoordinates.cellIndex;\n    }\n\n    return result;\n  },\n  _getCellPosition: function _getCellPosition($cell) {\n    var position = $cell.position();\n\n    if (this.option(\"rtlEnabled\")) {\n      position.left += $cell.get(0).getBoundingClientRect().width;\n    }\n\n    return position;\n  },\n  _getCellByCoordinates: function _getCellByCoordinates(cellCoordinates, groupIndex, inAllDayRow) {\n    var indexes = this._groupedStrategy.prepareCellIndexes(cellCoordinates, groupIndex, inAllDayRow);\n\n    return this._$dateTable.find(\"tr\").eq(indexes.rowIndex).find(\"td\").eq(indexes.cellIndex);\n  },\n  _getCells: function _getCells(allDay, direction) {\n    var cellClass = allDay ? ALL_DAY_TABLE_CELL_CLASS : DATE_TABLE_CELL_CLASS;\n\n    if (\"vertical\" === direction) {\n      var result = [];\n\n      for (var i = 1;; i++) {\n        var cells = this.$element().find(\"tr .\".concat(cellClass, \":nth-child(\").concat(i, \")\"));\n\n        if (!cells.length) {\n          break;\n        }\n\n        result = result.concat(cells.toArray());\n      }\n\n      return $(result);\n    } else {\n      return this.$element().find(\".\" + cellClass);\n    }\n  },\n  _setHorizontalGroupHeaderCellsHeight: function _setHorizontalGroupHeaderCellsHeight() {\n    var height = this._$dateTable.get(0).getBoundingClientRect().height;\n\n    this._$groupTable.outerHeight(height);\n  },\n  _getDateTableBorder: function _getDateTableBorder() {\n    return DATE_TABLE_CELL_BORDER;\n  },\n  _getDateTableBorderOffset: function _getDateTableBorderOffset() {\n    return 2 * this._getDateTableBorder();\n  },\n  _getGroupHeaderCellsContent: function _getGroupHeaderCellsContent() {\n    return this.$element().find(\".\" + GROUP_HEADER_CONTENT_CLASS);\n  },\n  _getGroupHeaderCells: function _getGroupHeaderCells() {\n    return this.$element().find(\".\" + GROUP_HEADER_CLASS);\n  },\n  _getScrollCoordinates: function _getScrollCoordinates(hours, minutes, date) {\n    var currentDate = date || new Date(this.option(\"currentDate\"));\n    var startDayHour = this.option(\"startDayHour\");\n    var endDayHour = this.option(\"endDayHour\");\n\n    if (hours < startDayHour) {\n      hours = startDayHour;\n    }\n\n    if (hours >= endDayHour) {\n      hours = endDayHour - 1;\n    }\n\n    currentDate.setHours(hours, minutes, 0, 0);\n    return this.getCoordinatesByDate(currentDate);\n  },\n  setCellDataCache: function setCellDataCache(cellCoordinates, groupIndex, $cell) {\n    var cache = this.getCellDataCache();\n    var data = this.getCellData($cell);\n    var key = JSON.stringify({\n      rowIndex: cellCoordinates.rowIndex,\n      cellIndex: cellCoordinates.cellIndex,\n      groupIndex: groupIndex\n    });\n    cache[key] = data;\n  },\n  setCellDataCacheAlias: function setCellDataCacheAlias(appointment, geometry) {\n    var key = JSON.stringify({\n      rowIndex: appointment.rowIndex,\n      cellIndex: appointment.cellIndex,\n      groupIndex: appointment.groupIndex\n    });\n    var aliasKey = JSON.stringify({\n      top: geometry.top,\n      left: geometry.left\n    });\n    var cache = this.getCellDataCache();\n\n    if (cache[key]) {\n      cache[aliasKey] = cache[key];\n    }\n  },\n  getCellDataCache: function getCellDataCache(key) {\n    if (!this._cache) {\n      this._cache = {};\n    }\n\n    return key ? this._cache[key] : this._cache;\n  },\n  _cleanCellDataCache: function _cleanCellDataCache() {\n    delete this._cache;\n  },\n  _cleanAllowedPositions: function _cleanAllowedPositions() {\n    delete this._maxAllowedVerticalPosition;\n    delete this._maxAllowedPosition;\n  },\n  supportAllDayRow: function supportAllDayRow() {\n    return true;\n  },\n  keepOriginalHours: function keepOriginalHours() {\n    return false;\n  },\n  getFocusedCellData: function getFocusedCellData() {\n    var $focusedCells = this._getAllFocusedCells();\n\n    var result = [];\n\n    if ($focusedCells.length > 1) {\n      result = this._getMultipleCellsData($focusedCells);\n    } else {\n      var data = this.getCellData($focusedCells);\n      data && result.push(data);\n    }\n\n    return result;\n  },\n  _getMultipleCellsData: function _getMultipleCellsData($cells) {\n    var data = [];\n\n    for (var i = 0; i < $cells.length; i++) {\n      data.push(dataUtils.data($cells[i], CELL_DATA));\n    }\n\n    return data;\n  },\n  getCellData: function getCellData($cell) {\n    var data = $cell[0] ? dataUtils.data($cell[0], CELL_DATA) : void 0;\n    return extend(true, {}, data);\n  },\n  _getHorizontalMax: function _getHorizontalMax(groupIndex) {\n    groupIndex = this.option(\"groupByDate\") ? this._getGroupCount() - 1 : groupIndex;\n    return this._groupedStrategy.getHorizontalMax(groupIndex);\n  },\n  getCoordinatesByDate: function getCoordinatesByDate(date, groupIndex, inAllDayRow) {\n    groupIndex = groupIndex || 0;\n    var index = this.getCellIndexByDate(date, inAllDayRow);\n\n    var position = this._getCellPositionByIndex(index, groupIndex, inAllDayRow);\n\n    var shift = this.getPositionShift(inAllDayRow ? 0 : this.getTimeShift(date), inAllDayRow);\n\n    var horizontalHMax = this._getHorizontalMax(groupIndex, date);\n\n    if (!position) {\n      throw errors.Error(\"E1039\");\n    }\n\n    var coordinates = {\n      cellPosition: position.left + shift.cellPosition,\n      top: position.top + shift.top,\n      left: position.left + shift.left,\n      rowIndex: position.rowIndex,\n      cellIndex: position.cellIndex,\n      hMax: horizontalHMax,\n      vMax: this.getVerticalMax(groupIndex),\n      groupIndex: groupIndex\n    };\n    return coordinates;\n  },\n  getVerticalMax: function getVerticalMax(groupIndex) {\n    return this._groupedStrategy.getVerticalMax(groupIndex);\n  },\n  _getOffsetByAllDayPanel: function _getOffsetByAllDayPanel(groupIndex) {\n    return this._groupedStrategy._getOffsetByAllDayPanel(groupIndex);\n  },\n  _getGroupTop: function _getGroupTop(groupIndex) {\n    return this._groupedStrategy._getGroupTop(groupIndex);\n  },\n  isGroupedByDate: function isGroupedByDate() {\n    return this.option(\"groupByDate\") && this._isHorizontalGroupedWorkSpace() && this._getGroupCount() > 0;\n  },\n  getCellIndexByDate: function getCellIndexByDate(date, inAllDayRow) {\n    var timeInterval = inAllDayRow ? 864e5 : this._getInterval();\n\n    var dateTimeStamp = this._getIntervalBetween(date, inAllDayRow);\n\n    var index = Math.floor(dateTimeStamp / timeInterval);\n\n    if (inAllDayRow) {\n      index = this._updateIndex(index);\n    }\n\n    if (index < 0) {\n      index = 0;\n    }\n\n    return index;\n  },\n  getPositionShift: function getPositionShift(timeShift, isAllDay) {\n    return {\n      top: timeShift * this.getCellHeight(),\n      left: 0,\n      cellPosition: 0\n    };\n  },\n  getTimeShift: function getTimeShift(date) {\n    var cellDuration = this.getCellDuration();\n    var currentDayStart = new Date(date);\n    var currentDayEndHour = new Date(new Date(date).setHours(this.option(\"endDayHour\"), 0, 0));\n\n    if (date.getTime() <= currentDayEndHour.getTime()) {\n      currentDayStart.setHours(this.option(\"startDayHour\"), 0, 0, 0);\n    }\n\n    var currentDateTime = date.getTime();\n    var currentDayStartTime = currentDayStart.getTime();\n\n    var minTime = this._firstViewDate.getTime();\n\n    return currentDateTime > minTime ? (currentDateTime - currentDayStartTime) % cellDuration / cellDuration : 0;\n  },\n  getCoordinatesByDateInGroup: function getCoordinatesByDateInGroup(date, appointmentResources, inAllDayRow) {\n    var indexes = this._getGroupIndexes(appointmentResources);\n\n    var result = [];\n\n    if (indexes.length) {\n      for (var i = 0; i < indexes.length; i++) {\n        result.push(this.getCoordinatesByDate(date, indexes[i], inAllDayRow));\n      }\n    } else {\n      result.push(this.getCoordinatesByDate(date, 0, inAllDayRow));\n    }\n\n    return result;\n  },\n  getDroppableCellIndex: function getDroppableCellIndex() {\n    var $droppableCell = this._getDroppableCell();\n\n    var $row = $droppableCell.parent();\n    var rowIndex = $row.index();\n    return rowIndex * $row.find(\"td\").length + $droppableCell.index();\n  },\n  getDataByDroppableCell: function getDataByDroppableCell() {\n    var cellData = this.getCellData(this._getDroppableCell());\n    return {\n      date: cellData.startDate,\n      allDay: cellData.allDay,\n      groups: cellData.groups\n    };\n  },\n  getDateRange: function getDateRange() {\n    return [this.getStartViewDate(), this.getEndViewDate()];\n  },\n  getCellWidth: function getCellWidth() {\n    var cell = this._getCells().first().get(0);\n\n    return cell && cell.getBoundingClientRect().width;\n  },\n  getCellMinWidth: function getCellMinWidth() {\n    return DATE_TABLE_MIN_CELL_WIDTH;\n  },\n  getRoundedCellWidth: function getRoundedCellWidth(groupIndex, startIndex, cellCount) {\n    if (groupIndex < 0) {\n      return 0;\n    }\n\n    var $row = this.$element().find(\".\" + this._getDateTableRowClass()).eq(0);\n    var width = 0;\n    var $cells = $row.find(\".\" + DATE_TABLE_CELL_CLASS);\n    var totalCellCount = this._getCellCount() * groupIndex;\n    cellCount = cellCount || this._getCellCount();\n\n    if (!typeUtils.isDefined(startIndex)) {\n      startIndex = totalCellCount;\n    }\n\n    for (var i = startIndex; i < totalCellCount + cellCount; i++) {\n      width += $($cells).eq(i).get(0).getBoundingClientRect().width;\n    }\n\n    return width / (totalCellCount + cellCount - startIndex);\n  },\n  getCellHeight: function getCellHeight() {\n    var cell = this._getCells().first().get(0);\n\n    return cell && cell.getBoundingClientRect().height;\n  },\n  getAllDayHeight: function getAllDayHeight() {\n    var cell = this._getCells(true).first().get(0);\n\n    return this.option(\"showAllDayPanel\") ? cell && cell.getBoundingClientRect().height || 0 : 0;\n  },\n  getAllDayOffset: function getAllDayOffset() {\n    return this._groupedStrategy.getAllDayOffset();\n  },\n  getMaxAllowedPosition: function getMaxAllowedPosition() {\n    if (!this._maxAllowedPosition) {\n      var isRtl = this.option(\"rtlEnabled\");\n      this._maxAllowedPosition = [];\n\n      this._$dateTable.find(\"tr\").first().find(\"td:nth-child(\" + this._getCellCount() + \"n)\").each(function (_, cell) {\n        var maxPosition = $(cell).position().left;\n\n        if (!isRtl) {\n          maxPosition += $(cell).get(0).getBoundingClientRect().width;\n        }\n\n        this._maxAllowedPosition.push(Math.round(maxPosition));\n      }.bind(this));\n    }\n\n    return this._maxAllowedPosition;\n  },\n  getMaxAllowedVerticalPosition: function getMaxAllowedVerticalPosition() {\n    if (!this._maxAllowedVerticalPosition) {\n      var that = this;\n      this._maxAllowedVerticalPosition = [];\n\n      var rows = this._getRowCount();\n\n      this._$dateTable.find(\"tr:nth-child(\" + rows + \"n)\").each(function (_, row) {\n        var maxPosition = $(row).position().top + $(row).get(0).getBoundingClientRect().height;\n\n        that._maxAllowedVerticalPosition.push(Math.round(maxPosition));\n      });\n    }\n\n    return this._maxAllowedVerticalPosition;\n  },\n  getFixedContainer: function getFixedContainer() {\n    return this._$fixedContainer;\n  },\n  getAllDayContainer: function getAllDayContainer() {\n    return this._$allDayContainer;\n  },\n  getCellIndexByCoordinates: function getCellIndexByCoordinates(coordinates, allDay) {\n    var cellCount = this._getTotalCellCount(this._getGroupCount());\n\n    var cellWidth = Math.floor(this._getWorkSpaceWidth() / cellCount);\n    var cellHeight = allDay ? this.getAllDayHeight() : this.getCellHeight();\n    var leftOffset = this._isRTL() || this.option(\"crossScrollingEnabled\") ? 0 : this.getWorkSpaceLeftOffset();\n    var topIndex = Math.floor(Math.floor(coordinates.top) / Math.floor(cellHeight));\n    var leftIndex = Math.floor((coordinates.left + 5 - leftOffset) / cellWidth);\n\n    if (this._isRTL()) {\n      leftIndex = cellCount - leftIndex - 1;\n    }\n\n    return cellCount * topIndex + leftIndex;\n  },\n  getStartViewDate: function getStartViewDate() {\n    return this._firstViewDate;\n  },\n  getEndViewDate: function getEndViewDate() {\n    var dateOfLastViewCell = this.getDateOfLastViewCell();\n    var endDateOfLastViewCell = this.calculateEndViewDate(dateOfLastViewCell);\n    return this._adjustEndViewDateByDaylightDiff(dateOfLastViewCell, endDateOfLastViewCell);\n  },\n  calculateEndViewDate: function calculateEndViewDate(dateOfLastViewCell) {\n    return new Date(dateOfLastViewCell.getTime() + this.getCellDuration());\n  },\n  _adjustEndViewDateByDaylightDiff: function _adjustEndViewDateByDaylightDiff(startDate, endDate) {\n    var daylightDiff = this.invoke(\"getDaylightOffset\", startDate, endDate) * toMs(\"minute\") || 0;\n    var endDateOfLastViewCell = new Date(endDate.getTime() - daylightDiff);\n    return new Date(endDateOfLastViewCell.getTime() - toMs(\"minute\"));\n  },\n  getDateOfLastViewCell: function getDateOfLastViewCell() {\n    var rowIndex = this._getRowCount() - 1;\n\n    var cellIndex = this._getCellCount();\n\n    if (this.option(\"groupByDate\") && this._getGroupCount() > 0) {\n      cellIndex = cellIndex * this._getGroupCount() - 1;\n    } else {\n      cellIndex -= 1;\n    }\n\n    return this._getDateByCellIndexes(rowIndex, cellIndex, true);\n  },\n  getCellDuration: function getCellDuration() {\n    return 36e5 * this.option(\"hoursInterval\");\n  },\n  getIntervalDuration: function getIntervalDuration(allDay) {\n    return allDay ? toMs(\"day\") : this.getCellDuration();\n  },\n  getVisibleDayDuration: function getVisibleDayDuration() {\n    return this.option(\"hoursInterval\") * this._getCellCountInDay() * HOUR_MS;\n  },\n  getGroupBounds: function getGroupBounds(coordinates) {\n    var cellCount = this._getCellCount();\n\n    var $cells = this._getCells();\n\n    var cellWidth = this.getCellWidth();\n\n    var result = this._groupedStrategy.getGroupBoundsOffset(cellCount, $cells, cellWidth, coordinates);\n\n    if (this._isRTL()) {\n      var startOffset = result.left;\n      result.left = result.right - 2 * cellWidth;\n      result.right = startOffset + 2 * cellWidth;\n    }\n\n    return result;\n  },\n  needRecalculateResizableArea: function needRecalculateResizableArea() {\n    return this._isVerticalGroupedWorkSpace() && 0 !== this.getScrollable().scrollTop();\n  },\n  getCellDataByCoordinates: function getCellDataByCoordinates(coordinates, allDay) {\n    var key = JSON.stringify({\n      top: coordinates.top,\n      left: coordinates.left\n    });\n    var data = this.getCellDataCache(key);\n\n    if (data) {\n      return data;\n    }\n\n    var $cells = this._getCells(allDay);\n\n    var cellIndex = this.getCellIndexByCoordinates(coordinates, allDay);\n    var $cell = $cells.eq(cellIndex);\n    return this.getCellData($cell);\n  },\n  getVisibleBounds: function getVisibleBounds() {\n    var result = {};\n    var $scrollable = this.getScrollable().$element();\n    var cellHeight = this.getCellHeight();\n    var scrolledCellCount = this.getScrollableScrollTop() / cellHeight;\n    var totalCellCount = scrolledCellCount + $scrollable.height() / cellHeight;\n    result.top = {\n      hours: Math.floor(scrolledCellCount * this.option(\"hoursInterval\")) + this.option(\"startDayHour\"),\n      minutes: scrolledCellCount % 2 ? 30 : 0\n    };\n    result.bottom = {\n      hours: Math.floor(totalCellCount * this.option(\"hoursInterval\")) + this.option(\"startDayHour\"),\n      minutes: Math.floor(totalCellCount) % 2 ? 30 : 0\n    };\n    return result;\n  },\n  updateScrollPosition: function updateScrollPosition(date) {\n    date = this.invoke(\"convertDateByTimezone\", date);\n    var bounds = this.getVisibleBounds();\n    var startDateHour = date.getHours();\n    var startDateMinutes = date.getMinutes();\n\n    if (this.needUpdateScrollPosition(startDateHour, startDateMinutes, bounds, date)) {\n      this.scrollToTime(startDateHour, startDateMinutes, date);\n    }\n  },\n  needUpdateScrollPosition: function needUpdateScrollPosition(hours, minutes, bounds) {\n    var isUpdateNeeded = false;\n\n    if (hours < bounds.top.hours || hours > bounds.bottom.hours) {\n      isUpdateNeeded = true;\n    }\n\n    if (hours === bounds.top.hours && minutes < bounds.top.minutes) {\n      isUpdateNeeded = true;\n    }\n\n    if (hours === bounds.bottom.hours && minutes > bounds.top.minutes) {\n      isUpdateNeeded = true;\n    }\n\n    return isUpdateNeeded;\n  },\n  getGroupWidth: function getGroupWidth(groupIndex) {\n    var result = this._getCellCount() * this.getCellWidth();\n    var position = this.getMaxAllowedPosition();\n    var currentPosition = position[groupIndex];\n\n    if (position.length && currentPosition) {\n      if (this._isRTL()) {\n        result = currentPosition - position[groupIndex + 1];\n      } else {\n        if (0 === groupIndex) {\n          result = currentPosition;\n        } else {\n          result = currentPosition - position[groupIndex - 1];\n        }\n      }\n    }\n\n    return result;\n  },\n  restoreScrollTop: function restoreScrollTop() {\n    this.$element().scrollTop(0);\n  },\n  scrollToTime: function scrollToTime(hours, minutes, date) {\n    var min = this.getStartViewDate();\n    var max = this.getEndViewDate();\n\n    if (date < min || date > max) {\n      errors.log(\"W1008\", date);\n      return;\n    }\n\n    var coordinates = this._getScrollCoordinates(hours, minutes, date);\n\n    var scrollable = this.getScrollable();\n    scrollable.scrollBy({\n      top: coordinates.top - scrollable.scrollTop(),\n      left: 0\n    });\n  },\n  getDistanceBetweenCells: function getDistanceBetweenCells(startIndex, endIndex) {\n    var result = 0;\n    this.$element().find(\".\" + this._getDateTableRowClass()).first().find(\".\" + DATE_TABLE_CELL_CLASS).each(function (index) {\n      if (index < startIndex || index > endIndex) {\n        return true;\n      }\n\n      result += $(this).get(0).getBoundingClientRect().width;\n    });\n    return result;\n  },\n  needApplyCollectorOffset: function needApplyCollectorOffset() {\n    return false;\n  },\n  initDragBehavior: function initDragBehavior(scheduler) {\n    if (!this.dragBehavior && scheduler) {\n      this.dragBehavior = new AppointmentDragBehavior(scheduler);\n      this.dragBehavior.addTo(this.getWorkArea());\n      this.dragBehavior.addTo(this.getAllDayContainer());\n      this.dragBehavior.addTo(this._$allDayPanel);\n    }\n\n    this._attachTablesEvents();\n  },\n  _isApplyCompactAppointmentOffset: function _isApplyCompactAppointmentOffset() {\n    return this._supportCompactDropDownAppointments();\n  },\n  _supportCompactDropDownAppointments: function _supportCompactDropDownAppointments() {\n    return true;\n  },\n  _formatWeekday: function _formatWeekday(date) {\n    return formatWeekday(date);\n  },\n  _formatWeekdayAndDay: function _formatWeekdayAndDay(date) {\n    return formatWeekday(date) + \" \" + dateLocalization.format(date, \"day\");\n  }\n}).include(publisherMixin);\nmodule.exports = SchedulerWorkSpace;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/scheduler/workspaces/ui.scheduler.work_space.js"],"names":["$","require","domAdapter","eventsEngine","dataUtils","dateUtils","typeUtils","windowUtils","getPublicElement","extend","each","messageLocalization","dateLocalization","toMs","Widget","abstract","noop","isDefined","publisherMixin","eventUtils","pointerEvents","errors","clickEvent","contextMenuEvent","dragEvents","Scrollable","HorizontalGroupedStrategy","VerticalGroupedStrategy","tableCreator","VerticalShader","AppointmentDragBehavior","FIXED_CONTAINER_CLASS","COMPONENT_CLASS","GROUPED_WORKSPACE_CLASS","VERTICAL_GROUPED_WORKSPACE_CLASS","WORKSPACE_VERTICAL_GROUP_TABLE_CLASS","WORKSPACE_WITH_BOTH_SCROLLS_CLASS","WORKSPACE_WITH_COUNT_CLASS","WORKSPACE_WITH_GROUP_BY_DATE_CLASS","WORKSPACE_WITH_ODD_CELLS_CLASS","WORKSPACE_WITH_OVERLAPPING_CLASS","TIME_PANEL_CLASS","TIME_PANEL_CELL_CLASS","TIME_PANEL_ROW_CLASS","ALL_DAY_PANEL_CLASS","ALL_DAY_TABLE_CLASS","ALL_DAY_CONTAINER_CLASS","ALL_DAY_TITLE_CLASS","ALL_DAY_TITLE_HIDDEN_CLASS","ALL_DAY_TABLE_CELL_CLASS","ALL_DAY_TABLE_ROW_CLASS","WORKSPACE_WITH_ALL_DAY_CLASS","WORKSPACE_WITH_COLLAPSED_ALL_DAY_CLASS","WORKSPACE_WITH_MOUSE_SELECTION_CLASS","HORIZONTAL_SIZES_CLASS","VERTICAL_SIZES_CLASS","HEADER_PANEL_CLASS","HEADER_PANEL_CELL_CLASS","HEADER_ROW_CLASS","GROUP_ROW_CLASS","GROUP_HEADER_CLASS","GROUP_HEADER_CONTENT_CLASS","DATE_TABLE_CLASS","DATE_TABLE_CELL_CLASS","DATE_TABLE_ROW_CLASS","DATE_TABLE_FOCUSED_CELL_CLASS","DATE_TABLE_DROPPABLE_CELL_CLASS","SCHEDULER_HEADER_SCROLLABLE_CLASS","SCHEDULER_SIDEBAR_SCROLLABLE_CLASS","SCHEDULER_DATE_TABLE_SCROLLABLE_CLASS","SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME","SCHEDULER_CELL_DXDRAGENTER_EVENT_NAME","SCHEDULER_CELL_DXDROP_EVENT_NAME","SCHEDULER_CELL_DXCLICK_EVENT_NAME","SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME","SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME","SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME","CELL_DATA","DATE_TABLE_CELL_BORDER","DATE_TABLE_MIN_CELL_WIDTH","DAY_MS","HOUR_MS","SCHEDULER_DRAG_AND_DROP_SELECTOR","formatWeekday","date","SchedulerWorkSpace","_supportedKeys","clickHandler","e","$itemElement","$cellElement","event","cellElement","cellData","arrowPressHandler","enter","space","downArrow","$cell","upArrow","rightArrow","$rightCell","leftArrow","$leftCell","_isRTL","_getFocusedCell","_getAllFocusedCells","_getCellFromNextRow","$currentCell","cellIndex","$row","_checkForViewBounds","$item","_getRightCell","$focusedCell","groupCount","rowCellCount","isMultiSelection","lastIndexInRow","edgeCellIndex","currentIndex","direction","sign","_isGroupEndCell","cellsInRow","currentCellIndex","result","_getLeftCell","_isGroupStartCell","_moveToCell","_setFocusedCell","orientation","$targetCells","$focusedCells","selectedCellData","_correctCellForGroup","cellGroupIndex","focusedCellGroupIndex","isDifferentTables","_getCellsBetween","isAllDayTable","$cells","firstIndex","lastIndex","buffer","focusedGroupIndex","groupIndex","_hasAllDayClass","_getGroupIndexByCell","Math","_toggleFocusedCellClass","$focusTarget","$element","_releaseFocusedCell","_focusInHandler","_focusOutHandler","_focusTarget","_activeStateUnit","_getDefaultOptions","currentDate","intervalCount","startDate","firstDayOfWeek","startDayHour","endDayHour","hoursInterval","activeStateEnabled","hoverStateEnabled","groups","showAllDayPanel","allDayExpanded","onCellClick","crossScrollingEnabled","dataCellTemplate","timeCellTemplate","resourceCellTemplate","dateCellTemplate","allowMultipleCellSelection","indicatorTime","indicatorUpdateInterval","shadeUntilCurrentTime","groupOrientation","groupByDate","_optionChanged","args","_cleanWorkSpace","_init","_initGrouping","_initGroupedStrategy","strategyName","Strategy","_getDefaultGroupStrategy","_isVerticalGroupedWorkSpace","_isHorizontalGroupedWorkSpace","_toggleHorizontalScrollClass","_toggleGroupByDateClass","_toggleWorkSpaceCountClass","_isWorkSpaceWithCount","_toggleWorkSpaceWithOddCells","_isWorkspaceWithOddCells","_toggleWorkSpaceOverlappingClass","_isWorkSpaceWithOverlapping","_toggleGroupingDirectionClass","_getRealGroupOrientation","_getTimePanelClass","_getDateTableClass","_getDateTableRowClass","_getDateTableCellClass","cellClass","j","_needApplyLastGroupCellClass","_getGroupRowClass","_getGroupHeaderClass","i","_getGroupHeaderContentClass","_initWorkSpaceUnits","_initAllDayPanelElements","_createAllDayPanelElements","$allDayTitle","_initDateTableScrollable","$dateTableScrollable","_dateTableScrollableConfig","config","useKeyboard","bounceEnabled","updateManually","pushBackValue","_createCrossScrollingConfig","headerScrollableOnScroll","sidebarScrollableOnScroll","top","left","_createWorkSpaceElements","_createWorkSpaceStaticElements","_createWorkSpaceScrollableElements","_createHeaderScrollable","$headerScrollable","_headerScrollableConfig","showScrollbar","useNative","onStart","dateTableScrollableOnScroll","onScroll","_createSidebarScrollable","$timePanelScrollable","onEnd","_visibilityChanged","visible","_attachTableClasses","_attachHeaderTableClasses","_addTableClass","$el","_setTableSizes","cellWidth","minWidth","$headerCells","width","getWorkSpaceMinWidth","_dimensionChanged","_needCreateCrossScrolling","_getElementClass","_getRowCount","_getCellCount","_initMarkup","_render","_toggleGroupedClass","_toggleFixedScrollableClass","_renderView","_updateGroupTableHeight","_renderDateTimeIndication","_setIndicationUpdateInterval","_refreshDateTimeIndication","_setFocusOnCellByOption","cells","data","allDay","coordinates","_getGroupIndexByResourceId","groupKey","Object","groupValue","id","tree","index","_setFirstViewDate","_getViewStartByOptions","diff","endDate","_getHeaderDate","_getStartViewDate","_dateInRange","_getIntervalDuration","_setStartDayHour","_firstDayOfWeek","_attachEvents","_attachClickEvent","that","pointerDownAction","cellSelector","_createCellClickAction","afterExecute","_createSelectionChangedAction","_moveToClosestNonStub","$target","_pointerDownHandler","_showAddAppointmentPopup","firstCellData","lastCellData","_attachContextMenuEvent","eventName","_contextMenuHandler","_createContextMenuAction","_getGroupHeaderContainer","_getDateHeaderContainer","_renderGroupHeader","$container","cellTemplates","groupRows","_applyCellTemplates","templates","template","_detachGroupCountAttr","groupedAttr","_attachGroupCountAttr","headerPanelOffsetRecalculate","headerPanelHeight","headerHeight","allDayPanelHeight","paddingBottom","marginBottom","parseInt","_makeGroupRows","tableCreatorStrategy","groupHeaderRowClass","groupRowClass","groupHeaderClass","groupHeaderContentClass","_getDateHeaderTemplate","_renderDateHeader","$headerRow","count","cellTemplate","repeatCount","templateCallbacks","colspan","_renderDateHeaderTemplate","text","model","container","_getHeaderPanelCellClass","_calculateHeaderCellRepeatCount","_renderAllDayPanel","cellCount","rowCount","rowClass","getCellData","_getAllDayPanelCellClass","_getAllDayCellData","key","value","_toggleAllDayVisibility","_changeAllDayVisibility","_updateScrollable","_renderTimePanel","getCellText","getCellDate","allDayElements","_getTimePanelRowCount","_getCellCountInDay","_calculateDayDuration","_getTimeCellClass","_getTimeText","startViewDate","_getTimeCellDate","timeCellDuration","lastCellInDay","_renderDateTable","_insertAllDayRowsIntoDateTable","_getTotalCellCount","_getTotalRowCount","_getCellData","_prepareCellData","_getGroupIndex","_getTableAllDay","calculateEndDate","_getGroupCount","len","_getPathToLeaf","_leaf","findLeafByIndex","leaf","makeBranch","_getCellGroups","path","name","_attachTablesEvents","isPointerDown","itemSizeFunc","cellHeight","height","_getDateTables","_getDateTable","_getAllDayTable","_getInterval","_getHeaderText","_getDateByIndex","_getFormat","_calculateCellIndex","_renderTableBody","_removeAllDayElements","_cleanView","_clean","getWorkArea","getScrollable","getScrollableScrollTop","getGroupedScrollableScrollTop","getScrollableScrollLeft","getScrollableOuterWidth","getScrollableContainer","getHeaderPanelHeight","getTimePanelWidth","getGroupTableWidth","getWorkSpaceLeftOffset","getGroupedStrategy","_getCellCoordinatesByIndex","rowIndex","_getDateByCellIndexes","firstViewDate","_patchCellIndex","_getOffsetByCount","_getMillisecondsOffset","_calculateHiddenInterval","dayCount","_getHiddenInterval","_getIntervalBetween","startDayTime","timeZoneOffset","fullInterval","days","weekendsCount","_getWeekendsCount","_getDaysOfInterval","_getGroupIndexes","appointmentResources","_updateIndex","_getDroppableCell","_getWorkSpaceWidth","_getCellPositionByIndex","cellCoordinates","_getCellPosition","position","_getCellByCoordinates","indexes","_getCells","_setHorizontalGroupHeaderCellsHeight","_getDateTableBorder","_getDateTableBorderOffset","_getGroupHeaderCellsContent","_getGroupHeaderCells","_getScrollCoordinates","hours","setCellDataCache","cache","setCellDataCacheAlias","appointment","aliasKey","geometry","getCellDataCache","_cleanCellDataCache","_cleanAllowedPositions","supportAllDayRow","keepOriginalHours","getFocusedCellData","_getMultipleCellsData","_getHorizontalMax","getCoordinatesByDate","shift","inAllDayRow","horizontalHMax","cellPosition","hMax","vMax","getVerticalMax","_getOffsetByAllDayPanel","_getGroupTop","isGroupedByDate","getCellIndexByDate","timeInterval","dateTimeStamp","getPositionShift","timeShift","getTimeShift","cellDuration","currentDayStart","currentDayEndHour","currentDateTime","currentDayStartTime","minTime","getCoordinatesByDateInGroup","getDroppableCellIndex","$droppableCell","getDataByDroppableCell","getDateRange","getCellWidth","cell","getCellMinWidth","getRoundedCellWidth","totalCellCount","startIndex","getCellHeight","getAllDayHeight","getAllDayOffset","getMaxAllowedPosition","isRtl","maxPosition","getMaxAllowedVerticalPosition","rows","getFixedContainer","getAllDayContainer","getCellIndexByCoordinates","leftOffset","topIndex","leftIndex","getStartViewDate","getEndViewDate","dateOfLastViewCell","endDateOfLastViewCell","calculateEndViewDate","_adjustEndViewDateByDaylightDiff","daylightDiff","getDateOfLastViewCell","getCellDuration","getIntervalDuration","getVisibleDayDuration","getGroupBounds","startOffset","needRecalculateResizableArea","getCellDataByCoordinates","getVisibleBounds","$scrollable","scrolledCellCount","minutes","updateScrollPosition","bounds","startDateHour","startDateMinutes","needUpdateScrollPosition","isUpdateNeeded","getGroupWidth","currentPosition","restoreScrollTop","scrollToTime","min","max","scrollable","getDistanceBetweenCells","needApplyCollectorOffset","initDragBehavior","_isApplyCompactAppointmentOffset","_supportCompactDropDownAppointments","_formatWeekday","_formatWeekdayAndDay","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,CAAC,GAAGC,OAAO,CAAf,wBAAe,CAAf;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAxB,2BAAwB,CAAxB;;AACA,IAAIE,YAAY,GAAGF,OAAO,CAA1B,oCAA0B,CAA1B;;AACA,IAAIG,SAAS,GAAGH,OAAO,CAAvB,4BAAuB,CAAvB;;AACA,IAAII,SAAS,GAAGJ,OAAO,CAAvB,0BAAuB,CAAvB;;AACA,IAAIK,SAAS,GAAGL,OAAO,CAAvB,0BAAuB,CAAvB;;AACA,IAAIM,WAAW,GAAGN,OAAO,CAAzB,4BAAyB,CAAzB;;AACA,IAAIO,gBAAgB,GAAGP,OAAO,CAAPA,yBAAO,CAAPA,CAAvB,gBAAA;;AACA,IAAIQ,MAAM,GAAGR,OAAO,CAAPA,4BAAO,CAAPA,CAAb,MAAA;;AACA,IAAIS,IAAI,GAAGT,OAAO,CAAPA,8BAAO,CAAPA,CAAX,IAAA;;AACA,IAAIU,mBAAmB,GAAGV,OAAO,CAAjC,+BAAiC,CAAjC;;AACA,IAAIW,gBAAgB,GAAGX,OAAO,CAA9B,4BAA8B,CAA9B;;AACA,IAAIY,IAAI,GAAGR,SAAS,CAApB,kBAAA;;AACA,IAAIS,MAAM,GAAGb,OAAO,CAApB,wBAAoB,CAApB;;AACA,IAAIc,QAAQ,GAAGD,MAAM,CAArB,QAAA;;AACA,IAAIE,IAAI,GAAGf,OAAO,CAAPA,4BAAO,CAAPA,CAAX,IAAA;;AACA,IAAIgB,SAAS,GAAGhB,OAAO,CAAPA,0BAAO,CAAPA,CAAhB,SAAA;;AACA,IAAIiB,cAAc,GAAGjB,OAAO,CAA5B,iCAA4B,CAA5B;;AACA,IAAIkB,UAAU,GAAGlB,OAAO,CAAxB,uBAAwB,CAAxB;;AACA,IAAImB,aAAa,GAAGnB,OAAO,CAA3B,yBAA2B,CAA3B;;AACA,IAAIoB,MAAM,GAAGpB,OAAO,CAApB,wBAAoB,CAApB;;AACA,IAAIqB,UAAU,GAAGrB,OAAO,CAAxB,uBAAwB,CAAxB;;AACA,IAAIsB,gBAAgB,GAAGtB,OAAO,CAA9B,6BAA8B,CAA9B;;AACA,IAAIuB,UAAU,GAAGvB,OAAO,CAAxB,sBAAwB,CAAxB;;AACA,IAAIwB,UAAU,GAAGxB,OAAO,CAAxB,iCAAwB,CAAxB;;AACA,IAAIyB,yBAAyB,GAAGzB,OAAO,CAAvC,uDAAuC,CAAvC;;AACA,IAAI0B,uBAAuB,GAAG1B,OAAO,CAArC,qDAAqC,CAArC;;AACA,IAAI2B,YAAY,GAAG3B,OAAO,CAA1B,+BAA0B,CAA1B;;AACA,IAAI4B,cAAc,GAAG5B,OAAO,CAA5B,sDAA4B,CAA5B;;AACA,IAAI6B,uBAAuB,GAAG7B,OAAO,CAArC,4BAAqC,CAArC;;AACA,IAAI8B,qBAAqB,GAAG9B,OAAO,CAAPA,cAAO,CAAPA,CAA5B,qBAAA;;AACA,IAAI+B,eAAe,GAAnB,yBAAA;AACA,IAAIC,uBAAuB,GAA3B,iCAAA;AACA,IAAIC,gCAAgC,GAApC,0CAAA;AACA,IAAIC,oCAAoC,GAAxC,8CAAA;AACA,IAAIC,iCAAiC,GAArC,wCAAA;AACA,IAAIC,0BAA0B,GAA9B,+BAAA;AACA,IAAIC,kCAAkC,GAAtC,uCAAA;AACA,IAAIC,8BAA8B,GAAlC,mCAAA;AACA,IAAIC,gCAAgC,GAApC,qCAAA;AACA,IAAIC,gBAAgB,GAApB,yBAAA;AACA,IAAIC,qBAAqB,GAAzB,8BAAA;AACA,IAAIC,oBAAoB,GAAxB,6BAAA;AACA,IAAIC,mBAAmB,GAAvB,4BAAA;AACA,IAAIC,mBAAmB,GAAvB,4BAAA;AACA,IAAIC,uBAAuB,GAA3B,mCAAA;AACA,IAAIC,mBAAmB,GAAvB,4BAAA;AACA,IAAIC,0BAA0B,GAA9B,mCAAA;AACA,IAAIC,wBAAwB,GAA5B,iCAAA;AACA,IAAIC,uBAAuB,GAA3B,gCAAA;AACA,IAAIC,4BAA4B,GAAhC,iCAAA;AACA,IAAIC,sCAAsC,GAA1C,2CAAA;AACA,IAAIC,oCAAoC,GAAxC,yCAAA;AACA,IAAIC,sBAAsB,GAA1B,oCAAA;AACA,IAAIC,oBAAoB,GAAxB,kCAAA;AACA,IAAIC,kBAAkB,GAAtB,2BAAA;AACA,IAAIC,uBAAuB,GAA3B,gCAAA;AACA,IAAIC,gBAAgB,GAApB,yBAAA;AACA,IAAIC,eAAe,GAAnB,wBAAA;AACA,IAAIC,kBAAkB,GAAtB,2BAAA;AACA,IAAIC,0BAA0B,GAA9B,mCAAA;AACA,IAAIC,gBAAgB,GAApB,yBAAA;AACA,IAAIC,qBAAqB,GAAzB,8BAAA;AACA,IAAIC,oBAAoB,GAAxB,6BAAA;AACA,IAAIC,6BAA6B,GAAjC,2BAAA;AACA,IAAIC,+BAA+B,GAAnC,wCAAA;AACA,IAAIC,iCAAiC,GAArC,gCAAA;AACA,IAAIC,kCAAkC,GAAtC,iCAAA;AACA,IAAIC,qCAAqC,GAAzC,oCAAA;AACA,IAAIC,4CAA4C,GAAGnD,UAAU,CAAVA,YAAAA,CAAwBC,aAAa,CAArCD,IAAAA,EAAnD,sBAAmDA,CAAnD;AACA,IAAIoD,qCAAqC,GAAGpD,UAAU,CAAVA,YAAAA,CAAwBK,UAAU,CAAlCL,KAAAA,EAA5C,sBAA4CA,CAA5C;AACA,IAAIqD,gCAAgC,GAAGrD,UAAU,CAAVA,YAAAA,CAAwBK,UAAU,CAAlCL,IAAAA,EAAvC,sBAAuCA,CAAvC;AACA,IAAIsD,iCAAiC,GAAGtD,UAAU,CAAVA,YAAAA,CAAwBG,UAAU,CAAlCH,IAAAA,EAAxC,sBAAwCA,CAAxC;AACA,IAAIuD,uCAAuC,GAAGvD,UAAU,CAAVA,YAAAA,CAAwBC,aAAa,CAArCD,IAAAA,EAA9C,sBAA8CA,CAA9C;AACA,IAAIwD,qCAAqC,GAAGxD,UAAU,CAAVA,YAAAA,CAAwBC,aAAa,CAArCD,EAAAA,EAA5C,sBAA4CA,CAA5C;AACA,IAAIyD,uCAAuC,GAAGzD,UAAU,CAAVA,YAAAA,CAAwBC,aAAa,CAArCD,IAAAA,EAA9C,sBAA8CA,CAA9C;AACA,IAAI0D,SAAS,GAAb,YAAA;AACA,IAAIC,sBAAsB,GAA1B,CAAA;AACA,IAAIC,yBAAyB,GAA7B,EAAA;AACA,IAAIC,MAAM,GAAGnE,IAAI,CAAjB,KAAiB,CAAjB;AACA,IAAIoE,OAAO,GAAGpE,IAAI,CAAlB,MAAkB,CAAlB;AACA,IAAIqE,gCAAgC,GAAG,IAAA,MAAA,CAAA,gBAAA,EAAA,QAAA,EAAA,MAAA,CAAA,mBAAA,EAAvC,KAAuC,CAAvC;;AACA,IAAIC,aAAa,GAAG,SAAhBA,aAAgB,CAAA,IAAA,EAAe;AAC/B,SAAOvE,gBAAgB,CAAhBA,WAAAA,CAAAA,aAAAA,EAA4CwE,IAAI,CAAvD,MAAmDA,EAA5CxE,CAAP;AADJ,CAAA;;AAGA,IAAIyE,kBAAkB,GAAG,MAAM,CAAN,OAAA,CAAe;AACpCC,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,QAAIC,YAAY,GAAG,SAAfA,YAAe,CAAA,CAAA,EAAY;AAC3BC,MAAAA,CAAC,CAADA,cAAAA;AACAA,MAAAA,CAAC,CAADA,eAAAA;;AACA,UAAI,KAAA,aAAA,IAAsB,KAAA,aAAA,CAA1B,MAAA,EAAqD;AACjD,YAAIC,YAAY,GAAGzF,CAAC,CAAC,KAAA,MAAA,CAArB,gBAAqB,CAAD,CAApB;AACA,YAAI0F,YAAY,GAAGD,YAAY,CAAZA,MAAAA,GAAAA,YAAAA,GAAqC,KAAxD,aAAA;AACAD,QAAAA,CAAC,CAADA,MAAAA,GAAW,KAAXA,aAAAA;AACA,aAAA,UAAA,GAAA,IAAA;;AACA,aAAA,gBAAA,CAAsB;AAClBG,UAAAA,KAAK,EADa,CAAA;AAElBC,UAAAA,WAAW,EAAE5F,CAAC,CAAC,KAFG,aAEJ,CAFI;AAGlB6F,UAAAA,QAAQ,EAAE,KAAA,WAAA,CAAA,YAAA;AAHQ,SAAtB;AAKH;AAbL,KAAA;;AAeA,QAAIC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,CAAA,EAAA,IAAA,EAAkB;AACtCN,MAAAA,CAAC,CAADA,cAAAA;AACAA,MAAAA,CAAC,CAADA,eAAAA;;AACA,WAAA,WAAA,CAAA,IAAA,EAAuBA,CAAC,CAAxB,QAAA;AAHJ,KAAA;;AAKA,WAAO/E,MAAM,CAAC,KAAD,QAAC,EAAD,EAAkB;AAC3BsF,MAAAA,KAAK,EADsB,YAAA;AAE3BC,MAAAA,KAAK,EAFsB,YAAA;AAG3BC,MAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,CAAA,EAAY;AACnB,YAAIC,KAAK,GAAG,KAAA,mBAAA,CAAA,MAAA,EAAiCV,CAAC,CAA9C,QAAY,CAAZ;;AACAM,QAAAA,iBAAiB,CAAjBA,IAAAA,CAAAA,IAAAA,EAAAA,CAAAA,EAAAA,KAAAA;AALuB,OAAA;AAO3BK,MAAAA,OAAO,EAAE,SAAA,OAAA,CAAA,CAAA,EAAY;AACjB,YAAID,KAAK,GAAG,KAAA,mBAAA,CAAA,MAAA,EAAiCV,CAAC,CAA9C,QAAY,CAAZ;;AACAM,QAAAA,iBAAiB,CAAjBA,IAAAA,CAAAA,IAAAA,EAAAA,CAAAA,EAAAA,KAAAA;AATuB,OAAA;AAW3BM,MAAAA,UAAU,EAAE,SAAA,UAAA,CAAA,CAAA,EAAY;AACpB,YAAIC,UAAU,GAAG,KAAA,aAAA,CAAmBb,CAAC,CAArC,QAAiB,CAAjB;;AACAM,QAAAA,iBAAiB,CAAjBA,IAAAA,CAAAA,IAAAA,EAAAA,CAAAA,EAAAA,UAAAA;AAbuB,OAAA;AAe3BQ,MAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,CAAA,EAAY;AACnB,YAAIC,SAAS,GAAG,KAAA,YAAA,CAAkBf,CAAC,CAAnC,QAAgB,CAAhB;;AACAM,QAAAA,iBAAiB,CAAjBA,IAAAA,CAAAA,IAAAA,EAAAA,CAAAA,EAAAA,SAAAA;AACH;AAlB0B,KAAlB,CAAb;AAtBgC,GAAA;AA2CpCU,EAAAA,MAAM,EAAE,SAAA,MAAA,GAAW;AACf,WAAO,KAAA,MAAA,CAAP,YAAO,CAAP;AA5CgC,GAAA;AA8CpCC,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,WAAO,KAAA,aAAA,IAAsB,KAAA,WAAA,CAAA,IAAA,CAAsB,MAAtB,qBAAA,EAAA,EAAA,CAA7B,CAA6B,CAA7B;AA/CgC,GAAA;AAiDpCC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,WAAO,KAAA,aAAA,IAAsB,KAAA,WAAA,CAAA,IAAA,CAAsB,MAAtB,qBAAA,EAAA,EAAA,CAA7B,CAA6B,CAA7B;AAlDgC,GAAA;AAoDpCC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,SAAA,EAAoB;AACrC,QAAIC,YAAY,GAAG,KAAnB,aAAA;;AACA,QAAI3F,SAAS,CAAb,YAAa,CAAb,EAA6B;AACzB,UAAI4F,SAAS,GAAGD,YAAY,CAA5B,KAAgBA,EAAhB;AACA,UAAIE,IAAI,GAAGF,YAAY,CAAvB,MAAWA,EAAX;AACA,UAAIV,KAAK,GAAGY,IAAI,CAAJA,SAAI,CAAJA,GAAAA,QAAAA,GAAAA,EAAAA,CAAZ,SAAYA,CAAZ;AACAZ,MAAAA,KAAK,GAAG,KAAA,mBAAA,CAARA,KAAQ,CAARA;AACA,aAAA,KAAA;AACH;AA5D+B,GAAA;AA8DpCa,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,KAAA,EAAgB;AACjC,QAAI,CAACC,KAAK,CAAV,MAAA,EAAmB;AACfA,MAAAA,KAAK,GAAG,KAARA,aAAAA;AACH;;AACD,WAAA,KAAA;AAlEgC,GAAA;AAoEpCC,EAAAA,aAAa,EAAE,SAAA,aAAA,CAAA,gBAAA,EAA2B;AACtC,QAAI,CAAChG,SAAS,CAAC,KAAf,aAAc,CAAd,EAAoC;AAChC;AACH;;AACD,QAAA,UAAA;AACA,QAAIiG,YAAY,GAAG,KAAnB,aAAA;;AACA,QAAIC,UAAU,GAAG,KAAjB,cAAiB,EAAjB;;AACA,QAAIC,YAAY,GAAGC,gBAAgB,GAAG,KAAH,aAAG,EAAH,GAA0B,KAAA,kBAAA,CAA7D,UAA6D,CAA7D;AACA,QAAIC,cAAc,GAAGF,YAAY,GAAjC,CAAA;AACA,QAAIG,aAAa,GAAG,KAAA,MAAA,KAAA,CAAA,GAApB,cAAA;AACA,QAAIC,YAAY,GAAGN,YAAY,CAA/B,KAAmBA,EAAnB;AACA,QAAIO,SAAS,GAAG,KAAA,MAAA,KAAA,MAAA,GAAhB,MAAA;;AACA,QAAID,YAAY,KAAZA,aAAAA,IAAkCH,gBAAgB,IAAI,KAAA,eAAA,CAA1D,YAA0D,CAA1D,EAA8F;AAC1F,UAAIP,IAAI,GAAGI,YAAY,CAAvB,MAAWA,EAAX;AACA,UAAIQ,IAAI,GAAG,KAAA,MAAA,KAAA,CAAA,GAAoB,CAA/B,CAAA;AACArB,MAAAA,UAAU,GAAGS,IAAI,CAAJA,SAAI,CAAJA,GAAAA,QAAAA,GAAAA,EAAAA,CAAgCU,YAAY,GAAGE,IAAI,GAAhErB,cAAaS,CAAbT;AACAA,MAAAA,UAAU,GAAG,KAAA,mBAAA,CAAbA,UAAa,CAAbA;AAJJ,KAAA,MAKO;AACHA,MAAAA,UAAU,GAAGa,YAAY,CAAzBb,SAAyB,CAAZa,EAAbb;AACH;;AACD,WAAA,UAAA;AAxFgC,GAAA;AA0FpCsB,EAAAA,eAAe,EAAE,SAAA,eAAA,CAAA,KAAA,EAAgB;AAC7B,QAAIC,UAAU,GAAG,KAAjB,aAAiB,EAAjB;;AACA,QAAIC,gBAAgB,GAAG3B,KAAK,CAA5B,KAAuBA,EAAvB;AACA,QAAI4B,MAAM,GAAGD,gBAAgB,GAA7B,UAAA;AACA,WAAO,KAAA,MAAA,KAAgB,MAAhB,MAAA,GAA+BC,MAAM,KAAKF,UAAU,GAA3D,CAAA;AA9FgC,GAAA;AAgGpCG,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,gBAAA,EAA2B;AACrC,QAAI,CAAC9G,SAAS,CAAC,KAAf,aAAc,CAAd,EAAoC;AAChC;AACH;;AACD,QAAA,SAAA;AACA,QAAIiG,YAAY,GAAG,KAAnB,aAAA;;AACA,QAAIC,UAAU,GAAG,KAAjB,cAAiB,EAAjB;;AACA,QAAIC,YAAY,GAAGC,gBAAgB,GAAG,KAAH,aAAG,EAAH,GAA0B,KAAA,kBAAA,CAA7D,UAA6D,CAA7D;AACA,QAAIC,cAAc,GAAGF,YAAY,GAAjC,CAAA;AACA,QAAIG,aAAa,GAAG,KAAA,MAAA,KAAA,cAAA,GAApB,CAAA;AACA,QAAIC,YAAY,GAAGN,YAAY,CAA/B,KAAmBA,EAAnB;AACA,QAAIO,SAAS,GAAG,KAAA,MAAA,KAAA,MAAA,GAAhB,MAAA;;AACA,QAAID,YAAY,KAAZA,aAAAA,IAAkCH,gBAAgB,IAAI,KAAA,iBAAA,CAA1D,YAA0D,CAA1D,EAAgG;AAC5F,UAAIP,IAAI,GAAGI,YAAY,CAAvB,MAAWA,EAAX;AACA,UAAIQ,IAAI,GAAG,KAAA,MAAA,KAAgB,CAAhB,CAAA,GAAX,CAAA;AACAnB,MAAAA,SAAS,GAAGO,IAAI,CAAJA,SAAI,CAAJA,GAAAA,QAAAA,GAAAA,EAAAA,CAAgCU,YAAY,GAAGE,IAAI,GAA/DnB,cAAYO,CAAZP;AACAA,MAAAA,SAAS,GAAG,KAAA,mBAAA,CAAZA,SAAY,CAAZA;AAJJ,KAAA,MAKO;AACHA,MAAAA,SAAS,GAAGW,YAAY,CAAxBX,SAAwB,CAAZW,EAAZX;AACH;;AACD,WAAA,SAAA;AApHgC,GAAA;AAsHpCyB,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,CAAA,KAAA,EAAgB;AAC/B,QAAIJ,UAAU,GAAG,KAAjB,aAAiB,EAAjB;;AACA,QAAIC,gBAAgB,GAAG3B,KAAK,CAA5B,KAAuBA,EAAvB;AACA,QAAI4B,MAAM,GAAGD,gBAAgB,GAA7B,UAAA;AACA,WAAO,KAAA,MAAA,KAAgBC,MAAM,KAAKF,UAAU,GAArC,CAAA,GAA4C,MAAnD,MAAA;AA1HgC,GAAA;AA4HpCK,EAAAA,WAAW,EAAE,SAAA,WAAA,CAAA,KAAA,EAAA,gBAAA,EAAkC;AAC3CZ,IAAAA,gBAAgB,GAAGA,gBAAgB,IAAI,KAAA,MAAA,CAAvCA,4BAAuC,CAAvCA;;AACA,SAAA,eAAA,CAAA,KAAA,EAAA,gBAAA;;AACA,SAAA,oBAAA,CAAA,eAAA,CAAA,KAAA;AA/HgC,GAAA;AAiIpCa,EAAAA,eAAe,EAAE,SAAA,eAAA,CAAA,KAAA,EAAA,gBAAA,EAAkC;AAC/C,QAAI,CAACjH,SAAS,CAAV,KAAU,CAAV,IAAqB,CAACiF,KAAK,CAA/B,MAAA,EAAwC;AACpC;AACH;;AACD,SAAA,mBAAA;;AACA,SAAA,aAAA,GAAA,EAAA;;AACA,QAAA,gBAAA,EAAsB;AAClBA,MAAAA,KAAK,GAAG,KAAA,oBAAA,CAARA,KAAQ,CAARA;AACA,UAAIiC,WAAW,GAAG,UAAU,KAAA,MAAA,CAAV,MAAU,CAAV,KAAkC,CAAC,KAAA,MAAA,CAAA,QAAA,EAAD,MAAA,IAAiC,eAAe,KAAA,MAAA,CAAlF,kBAAkF,CAAlF,IAAA,UAAA,GAAlB,YAAA;;AACA,UAAIC,YAAY,GAAG,KAAA,gBAAA,CAAA,KAAA,EAA6B,KAA7B,UAAA,EAAnB,WAAmB,CAAnB;;AACA,WAAA,aAAA,GAAqBA,YAAY,CAAjC,OAAqBA,EAArB;AAJJ,KAAA,MAKO;AACH,WAAA,aAAA,GAAqB,CAAClC,KAAK,CAALA,GAAAA,CAAtB,CAAsBA,CAAD,CAArB;AACA,WAAA,UAAA,GAAA,KAAA;AACH;;AACD,QAAImC,aAAa,GAAGrI,CAAC,CAAC,KAAtB,aAAqB,CAArB;;AACA,SAAA,iBAAA,CAAA,IAAA,EAAA,aAAA;;AACA,SAAA,OAAA,CAAA,OAAA,EAAA,iBAAA,EAAA,aAAA;;AACA,SAAA,uBAAA,CAAA,IAAA,EAAA,KAAA;;AACA,SAAA,aAAA,GAAA,KAAA;AACA,QAAIsI,gBAAgB,GAAG,KAAvB,kBAAuB,EAAvB;AACA,SAAA,MAAA,CAAA,kBAAA,EAAA,gBAAA;;AACA,SAAA,uBAAA,CAA6B;AACzBA,MAAAA,gBAAgB,EAAEA;AADO,KAA7B;AAvJgC,GAAA;AA2JpCC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,CAAA,KAAA,EAAgB;AAClC,QAAIrB,YAAY,GAAG,KAAnB,aAAA;;AACA,QAAIsB,cAAc,GAAG,KAAA,oBAAA,CAArB,KAAqB,CAArB;;AACA,QAAIC,qBAAqB,GAAG,KAAA,oBAAA,CAA5B,YAA4B,CAA5B;;AACA,QAAIC,iBAAiB,GAAG,KAAA,eAAA,CAAA,KAAA,MAAgC,KAAA,eAAA,CAAxD,YAAwD,CAAxD;;AACA,WAAOD,qBAAqB,KAArBA,cAAAA,IAAAA,iBAAAA,GAAAA,YAAAA,GAAP,KAAA;AAhKgC,GAAA;AAkKpCE,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,MAAA,EAAA,KAAA,EAAA,SAAA,EAAmC;AACjD,QAAIC,aAAa,GAAG,KAAA,eAAA,CAApB,KAAoB,CAApB;;AACA,QAAIC,MAAM,GAAG,KAAA,SAAA,CAAA,aAAA,EAAb,SAAa,CAAb;;AACA,QAAIC,UAAU,GAAGD,MAAM,CAANA,KAAAA,CAAjB,MAAiBA,CAAjB;AACA,QAAIE,SAAS,GAAGF,MAAM,CAANA,KAAAA,CAAhB,KAAgBA,CAAhB;;AACA,QAAIC,UAAU,GAAd,SAAA,EAA4B;AACxB,UAAIE,MAAM,GAAV,UAAA;AACAF,MAAAA,UAAU,GAAVA,SAAAA;AACAC,MAAAA,SAAS,GAATA,MAAAA;AACH;;AACDF,IAAAA,MAAM,GAAGA,MAAM,CAANA,KAAAA,CAAAA,UAAAA,EAAyBE,SAAS,GAA3CF,CAASA,CAATA;;AACA,QAAI,KAAA,cAAA,KAAJ,CAAA,EAA+B;AAC3B,UAAIf,MAAM,GAAV,EAAA;;AACA,UAAImB,iBAAiB,GAAG,KAAA,oBAAA,CAAxB,MAAwB,CAAxB;;AACAvI,MAAAA,IAAI,CAAA,MAAA,EAAS,UAAA,CAAA,EAAA,IAAA,EAAkB;AAC3B,YAAIwI,UAAU,GAAG,KAAA,oBAAA,CAA0BlJ,CAAC,CAA5C,IAA4C,CAA3B,CAAjB;;AACA,YAAIiJ,iBAAiB,KAArB,UAAA,EAAsC;AAClCnB,UAAAA,MAAM,CAANA,IAAAA,CAAAA,IAAAA;AACH;AAJQ,OAAA,CAAA,IAAA,CAAbpH,IAAa,CAAT,CAAJA;AAMAmI,MAAAA,MAAM,GAAG7I,CAAC,CAAV6I,MAAU,CAAVA;AACH;;AACD,WAAA,MAAA;AAxLgC,GAAA;AA0LpCM,EAAAA,eAAe,EAAE,SAAA,eAAA,CAAA,KAAA,EAAgB;AAC7B,WAAOjD,KAAK,CAALA,QAAAA,CAAP,wBAAOA,CAAP;AA3LgC,GAAA;AA6LpCkD,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,CAAA,KAAA,EAAgB;AAClC,QAAIxB,UAAU,GAAG,KAAjB,aAAiB,EAAjB;;AACA,QAAIC,gBAAgB,GAAG3B,KAAK,CAALA,KAAAA,KAAvB,CAAA;AACA,QAAIgD,UAAU,GAAGG,IAAI,CAAJA,IAAAA,CAAUxB,gBAAgB,GAA3C,UAAiBwB,CAAjB;AACA,WAAA,UAAA;AAjMgC,GAAA;AAmMpCC,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,CAAA,SAAA,EAAA,QAAA,EAA8B;AACnD,QAAIC,YAAY,GAAGC,QAAQ,IAAIA,QAAQ,CAApBA,MAAAA,GAAAA,QAAAA,GAAyC,KAA5D,YAA4D,EAA5D;AACAD,IAAAA,YAAY,CAAZA,WAAAA,CAAAA,6BAAAA,EAAAA,SAAAA;AArMgC,GAAA;AAuMpCE,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,KAAA,EAAgB;AACjCvD,IAAAA,KAAK,GAAGA,KAAK,IAAIlG,CAAC,CAAC,KAAnBkG,aAAkB,CAAlBA;;AACA,QAAIjF,SAAS,CAATA,KAAS,CAATA,IAAoBiF,KAAK,CAA7B,MAAA,EAAsC;AAClC,WAAA,iBAAA,CAAA,KAAA,EAAA,KAAA;;AACA,WAAA,uBAAA,CAAA,KAAA,EAAA,KAAA;;AACA,WAAA,OAAA,CAAA,OAAA,EAAsB,KAAtB,CAAA,EAAA,KAAA;AACH;;AACD,SAAA,MAAA,CAAA,kBAAA,EAAA,EAAA;AA9MgC,GAAA;AAgNpCwD,EAAAA,eAAe,EAAE,SAAA,eAAA,CAAA,CAAA,EAAY;AACzB,QAAI1J,CAAC,CAACwF,CAAC,CAAHxF,MAAC,CAADA,CAAAA,EAAAA,CAAe,KAAfA,YAAe,EAAfA,KAAuC,UAAU,KAArD,YAAA,EAAwE;AACpE,aAAO,KAAP,YAAA;AACA,aAAO,KAAP,mBAAA;AACA,WAAA,QAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA;;AACA,UAAIkG,KAAK,GAAG,KAAZ,eAAY,EAAZ;;AACA,WAAA,eAAA,CAAA,KAAA;AACH;AAvN+B,GAAA;AAyNpCyD,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,GAAW;AACzB,SAAA,QAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA;;AACA,QAAI,CAAC,KAAL,mBAAA,EAA+B;AAC3B,WAAA,mBAAA;AACH;AA7N+B,GAAA;AA+NpCC,EAAAA,YAAY,EAAE,SAAA,YAAA,GAAW;AACrB,WAAO,KAAP,QAAO,EAAP;AAhOgC,GAAA;AAkOpCC,EAAAA,gBAAgB,EAAE,MAAA,qBAAA,GAAA,KAAA,GAlOkB,wBAAA;AAmOpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,WAAOrJ,MAAM,CAAC,KAAD,QAAC,EAAD,EAAkB;AAC3BsJ,MAAAA,WAAW,EAAE,IADc,IACd,EADc;AAE3BC,MAAAA,aAAa,EAFc,CAAA;AAG3BC,MAAAA,SAAS,EAHkB,IAAA;AAI3BC,MAAAA,cAAc,EAAE,KAJW,CAAA;AAK3BC,MAAAA,YAAY,EALe,CAAA;AAM3BC,MAAAA,UAAU,EANiB,EAAA;AAO3BC,MAAAA,aAAa,EAPc,EAAA;AAQ3BC,MAAAA,kBAAkB,EARS,IAAA;AAS3BC,MAAAA,iBAAiB,EATU,IAAA;AAU3BC,MAAAA,MAAM,EAVqB,EAAA;AAW3BC,MAAAA,eAAe,EAXY,IAAA;AAY3BC,MAAAA,cAAc,EAZa,KAAA;AAa3BC,MAAAA,WAAW,EAbgB,IAAA;AAc3BC,MAAAA,qBAAqB,EAdM,KAAA;AAe3BC,MAAAA,gBAAgB,EAfW,IAAA;AAgB3BC,MAAAA,gBAAgB,EAhBW,IAAA;AAiB3BC,MAAAA,oBAAoB,EAjBO,IAAA;AAkB3BC,MAAAA,gBAAgB,EAlBW,IAAA;AAmB3BC,MAAAA,0BAA0B,EAnBC,IAAA;AAoB3BC,MAAAA,aAAa,EAAE,IApBY,IAoBZ,EApBY;AAqB3BC,MAAAA,uBAAuB,EAAE,IAAItK,IAAI,CArBN,QAqBM,CArBN;AAsB3BuK,MAAAA,qBAAqB,EAtBM,IAAA;AAuB3BC,MAAAA,gBAAgB,EAvBW,YAAA;AAwB3B/C,MAAAA,gBAAgB,EAxBW,EAAA;AAyB3BgD,MAAAA,WAAW,EAAE;AAzBc,KAAlB,CAAb;AApOgC,GAAA;AAgQpCC,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,IAAA,EAAe;AAC3B,YAAQC,IAAI,CAAZ,IAAA;AACI,WAAA,kBAAA;AACA,WAAA,sBAAA;AACA,WAAA,kBAAA;AACA,WAAA,kBAAA;AACA,WAAA,cAAA;AACA,WAAA,YAAA;AACA,WAAA,eAAA;AACA,WAAA,gBAAA;AACA,WAAA,aAAA;AACA,WAAA,WAAA;AACI,aAAA,eAAA;;AACA;;AACJ,WAAA,QAAA;AACI,aAAA,UAAA;;AACA,aAAA,qBAAA;;AACA,aAAA,aAAA;;AACA,aAAA,OAAA;AACA;;AACJ,WAAA,kBAAA;AACI,aAAA,oBAAA;;AACA,aAAA,0BAAA;;AACA,aAAA,qBAAA;;AACA,aAAA,eAAA;;AACA,aAAA,uBAAA;;AACA;;AACJ,WAAA,iBAAA;AACI,YAAI,KAAJ,2BAAI,EAAJ,EAAwC;AACpC,eAAA,UAAA;;AACA,eAAA,qBAAA;;AACA,eAAA,aAAA;;AACA,eAAA,OAAA;AAJJ,SAAA,MAKO;AACH,eAAA,uBAAA;AACH;;AACD;;AACJ,WAAA,gBAAA;AACI,aAAA,uBAAA;;AACA,aAAA,mBAAA;;AACA,aAAA,4BAAA;;AACA,aAAA,iBAAA;;AACA;;AACJ,WAAA,oBAAA;AACI,aAAA,6BAAA;;AACA;;AACJ,WAAA,aAAA;AACI,aAAA,sBAAA;;AACA;;AACJ,WAAA,mBAAA;AACI,aAAA,uBAAA;;AACA;;AACJ,WAAA,eAAA;AACI,aAAA,eAAA;;AACA,aAAA,0BAAA;;AACA,aAAA,2BAAA;;AACA;;AACJ,WAAA,aAAA;AACI,aAAA,eAAA;;AACA,aAAA,uBAAA;;AACA;;AACJ,WAAA,uBAAA;AACI,aAAA,4BAAA;;AACA,aAAA,oBAAA,CAAA,MAAA,CAAiC,KAAjC,0BAAiC,EAAjC;;AACA;;AACJ,WAAA,OAAA;AACI,aAAA,QAAA,CAAA,IAAA;;AACA,aAAA,iBAAA;;AACA;;AACJ,WAAA,4BAAA;AACI;;AACJ,WAAA,kBAAA;AACI;;AACJ;AACI,aAAA,QAAA,CAAA,IAAA;AAzER;AAjQgC,GAAA;AA6UpCC,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,SAAA,UAAA;;AACA,SAAA,mBAAA;;AACA,SAAA,4BAAA;;AACA,SAAA,WAAA;AAjVgC,GAAA;AAmVpCC,EAAAA,KAAK,EAAE,SAAA,KAAA,GAAW;AACd,SAAA,QAAA;;AACA,SAAA,aAAA;;AACA,SAAA,4BAAA;;AACA,SAAA,0BAAA;;AACA,SAAA,uBAAA;;AACA,SAAA,4BAAA;;AACA,SAAA,gCAAA;;AACA,SAAA,QAAA,GAAA,QAAA,CAAA,eAAA,EAAA,QAAA,CAAmD,KAAnD,gBAAmD,EAAnD;AA3VgC,GAAA;AA6VpCC,EAAAA,aAAa,EAAE,SAAA,aAAA,GAAW;AACtB,SAAA,oBAAA;;AACA,SAAA,6BAAA;;AACA,SAAA,uBAAA;AAhWgC,GAAA;AAkWpCC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,QAAIC,YAAY,GAAG,KAAA,MAAA,CAAA,QAAA,EAAA,MAAA,GAA+B,KAAA,MAAA,CAA/B,kBAA+B,CAA/B,GAAiE,KAApF,wBAAoF,EAApF;AACA,QAAIC,QAAQ,GAAG,eAAA,YAAA,GAAA,uBAAA,GAAf,yBAAA;AACA,SAAA,gBAAA,GAAwB,IAAA,QAAA,CAAxB,IAAwB,CAAxB;AArWgC,GAAA;AAuWpCC,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,WAAA,YAAA;AAxWgC,GAAA;AA0WpCC,EAAAA,2BAA2B,EAAE,SAAA,2BAAA,GAAW;AACpC,WAAO,CAAC,CAAC,KAAA,MAAA,CAAA,QAAA,EAAF,MAAA,IAAkC,eAAe,KAAA,MAAA,CAAxD,kBAAwD,CAAxD;AA3WgC,GAAA;AA6WpCC,EAAAA,6BAA6B,EAAE,SAAA,6BAAA,GAAW;AACtC,WAAO,CAAC,CAAC,KAAA,MAAA,CAAA,QAAA,EAAF,MAAA,IAAkC,iBAAiB,KAAA,MAAA,CAA1D,kBAA0D,CAA1D;AA9WgC,GAAA;AAgXpCC,EAAAA,4BAA4B,EAAE,SAAA,4BAAA,GAAW;AACrC,SAAA,QAAA,GAAA,WAAA,CAAA,iCAAA,EAA+D,KAAA,MAAA,CAA/D,uBAA+D,CAA/D;AAjXgC,GAAA;AAmXpCC,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,GAAW;AAChC,SAAA,QAAA,GAAA,WAAA,CAAA,kCAAA,EAAgE,KAAhE,eAAgE,EAAhE;AApXgC,GAAA;AAsXpCC,EAAAA,0BAA0B,EAAE,SAAA,0BAAA,GAAW;AACnC,SAAA,QAAA,GAAA,WAAA,CAAA,0BAAA,EAAwD,KAAxD,qBAAwD,EAAxD;AAvXgC,GAAA;AAyXpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,WAAO,KAAA,MAAA,CAAA,eAAA,IAAP,CAAA;AA1XgC,GAAA;AA4XpCC,EAAAA,4BAA4B,EAAE,SAAA,4BAAA,GAAW;AACrC,SAAA,QAAA,GAAA,WAAA,CAAA,8BAAA,EAA4D,KAA5D,wBAA4D,EAA5D;AA7XgC,GAAA;AA+XpCC,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,WAAO,OAAO,KAAA,MAAA,CAAd,eAAc,CAAd;AAhYgC,GAAA;AAkYpCC,EAAAA,gCAAgC,EAAE,SAAA,gCAAA,GAAW;AACzC,SAAA,QAAA,GAAA,WAAA,CAAA,gCAAA,EAA8D,KAA9D,2BAA8D,EAA9D;AAnYgC,GAAA;AAqYpCC,EAAAA,2BAA2B,EAAE,SAAA,2BAAA,GAAW;AACpC,WAAO,SAAS,KAAA,MAAA,CAAhB,2BAAgB,CAAhB;AAtYgC,GAAA;AAwYpCC,EAAAA,6BAA6B,EAAE,SAAA,6BAAA,GAAW;AACtC,SAAA,QAAA,GAAA,WAAA,CAAA,gCAAA,EAA8D,KAA9D,2BAA8D,EAA9D;AAzYgC,GAAA;AA2YpCC,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,WAAO,KAAA,2BAAA,KAAA,UAAA,GAAP,YAAA;AA5YgC,GAAA;AA8YpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,WAAA,gBAAA;AA/YgC,GAAA;AAiZpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,WAAA,gBAAA;AAlZgC,GAAA;AAoZpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,WAAA,oBAAA;AArZgC,GAAA;AAuZpCC,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,CAAA,CAAA,EAAA,CAAA,EAAe;AACnC,QAAIC,SAAS,GAAGjJ,qBAAqB,GAArBA,GAAAA,GAAAA,sBAAAA,GAAAA,GAAAA,GAAhB,oBAAA;AACA,WAAO,KAAA,4BAAA,KAAsC,KAAA,gBAAA,CAAA,6BAAA,CAAA,SAAA,EAA+DkJ,CAAC,GAAhE,CAAA,EAAA,CAAA,EAAtC,CAAsC,CAAtC,GAAP,SAAA;AAzZgC,GAAA;AA2ZpCC,EAAAA,4BAA4B,EAAE,SAAA,4BAAA,GAAW;AACrC,WAAA,IAAA;AA5ZgC,GAAA;AA8ZpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAA,eAAA;AA/ZgC,GAAA;AAiapCC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,CAAA,CAAA,EAAY;AAC9B,QAAIJ,SAAS,GAAb,kBAAA;AACA,WAAO,KAAA,gBAAA,CAAA,6BAAA,CAAA,SAAA,EAA+DK,CAAC,GAAvE,CAAO,CAAP;AAnagC,GAAA;AAqapCC,EAAAA,2BAA2B,EAAE,SAAA,2BAAA,GAAW;AACpC,WAAA,0BAAA;AAtagC,GAAA;AAwapCC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,SAAA,aAAA,GAAqBvN,CAAC,CAAtB,SAAsB,CAAtB;AACA,SAAA,OAAA,GAAeA,CAAC,CAADA,SAAC,CAADA,CAAAA,QAAAA,CAAsB,KAArC,aAAeA,CAAf;AACA,SAAA,gBAAA,GAAwBA,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAAxB,qBAAwBA,CAAxB;AACA,SAAA,iBAAA,GAAyBA,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAAzB,uBAAyBA,CAAzB;;AACA,SAAA,wBAAA;;AACA,SAAA,0BAAA;;AACA,SAAA,WAAA,GAAmBA,CAAC,CAADA,SAAC,CAADA,CAAAA,QAAAA,CAAsB,KAAzC,kBAAyC,EAAtBA,CAAnB;AACA,SAAA,WAAA,GAAmBA,CAAC,CAApB,SAAoB,CAApB;AACA,SAAA,YAAA,GAAoBA,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAApB,oCAAoBA,CAApB;AAjbgC,GAAA;AAmbpCwN,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,SAAA,aAAA,GAAA,EAAA;AACA,SAAA,aAAA,GAAA,EAAA;AACA,SAAA,aAAA,GAAA,EAAA;AAtbgC,GAAA;AAwbpCC,EAAAA,0BAA0B,EAAE,SAAA,0BAAA,GAAW;AACnC,QAAItG,UAAU,GAAG,KAAjB,cAAiB,EAAjB;;AACA,QAAI,KAAA,2BAAA,MAAsC,MAA1C,UAAA,EAA4D;AACxD,WAAK,IAAIkG,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAjB,UAAA,EAAgCA,CAAhC,EAAA,EAAqC;AACjC,YAAIK,YAAY,GAAG1N,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAAAA,mBAAAA,EAAAA,IAAAA,CAA8CW,mBAAmB,CAAnBA,MAAAA,CAAjE,oBAAiEA,CAA9CX,CAAnB;;AACA,aAAA,aAAA,CAAA,IAAA,CAAA,YAAA;;AACA,aAAA,aAAA,GAAqBA,CAAC,CAAtB,SAAsB,CAAtB;;AACA,aAAA,aAAA,CAAA,IAAA,CAAwB,KAAxB,aAAA;;AACA,aAAA,aAAA,GAAqBA,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAAAA,mBAAAA,EAAAA,MAAAA,CAAgD,KAArE,aAAqBA,CAArB;;AACA,aAAA,aAAA,CAAA,IAAA,CAAwB,KAAxB,aAAA;AACH;AARL,KAAA,MASO;AACH,WAAA,aAAA,GAAqBA,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAAAA,mBAAAA,EAAAA,IAAAA,CAA8CW,mBAAmB,CAAnBA,MAAAA,CAA9CX,oBAA8CW,CAA9CX,EAAAA,QAAAA,CAAyG,KAA9H,QAA8H,EAAzGA,CAArB;AACA,WAAA,aAAA,GAAqBA,CAAC,CAAtB,SAAsB,CAAtB;AACA,WAAA,aAAA,GAAqBA,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAAAA,mBAAAA,EAAAA,MAAAA,CAAgD,KAArE,aAAqBA,CAArB;AACH;AAvc+B,GAAA;AAycpC2N,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,QAAIC,oBAAoB,GAAG5N,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAA3B,qCAA2BA,CAA3B;AACA,SAAA,oBAAA,GAA4B,KAAA,gBAAA,CAAA,oBAAA,EAAA,UAAA,EAAwD,KAApF,0BAAoF,EAAxD,CAA5B;AA3cgC,GAAA;AA6cpC6N,EAAAA,0BAA0B,EAAE,SAAA,0BAAA,GAAW;AACnC,QAAIC,MAAM,GAAG;AACTC,MAAAA,WAAW,EADF,KAAA;AAETC,MAAAA,aAAa,EAFJ,KAAA;AAGTC,MAAAA,cAAc,EAHL,IAAA;AAITC,MAAAA,aAAa,EAAE;AAJN,KAAb;;AAMA,QAAI,KAAJ,yBAAI,EAAJ,EAAsC;AAClCJ,MAAAA,MAAM,GAAGrN,MAAM,CAAA,MAAA,EAAS,KAAxBqN,2BAAwB,EAAT,CAAfA;AACH;;AACD,WAAA,MAAA;AAvdgC,GAAA;AAydpCK,EAAAA,2BAA2B,EAAE,SAAA,2BAAA,GAAW;AACpC,QAAIL,MAAM,GAAV,EAAA;AACA,QAAA,wBAAA;AACA,QAAA,yBAAA;AACAA,IAAAA,MAAM,CAANA,SAAAA,GAAAA,MAAAA;;AACAA,IAAAA,MAAM,CAANA,OAAAA,GAAiB,UAAA,CAAA,EAAY;AACzB,UAAI,KAAJ,iBAAA,EAA4B;AACxBM,QAAAA,wBAAwB,GAAG,KAAA,iBAAA,CAAA,MAAA,CAA3BA,UAA2B,CAA3BA;;AACA,aAAA,iBAAA,CAAA,MAAA,CAAA,UAAA,EAA0C,KAA1C,CAAA;AACH;;AACD,UAAI,KAAJ,kBAAA,EAA6B;AACzBC,QAAAA,yBAAyB,GAAG,KAAA,kBAAA,CAAA,MAAA,CAA5BA,UAA4B,CAA5BA;;AACA,aAAA,kBAAA,CAAA,MAAA,CAAA,UAAA,EAA2C,KAA3C,CAAA;AACH;AARY,KAAA,CAAA,IAAA,CAAjBP,IAAiB,CAAjBA;;AAUAA,IAAAA,MAAM,CAANA,QAAAA,GAAkB,UAAA,CAAA,EAAY;AAC1B,WAAA,kBAAA,IAA2B,KAAA,kBAAA,CAAA,QAAA,CAAiC;AACxDQ,QAAAA,GAAG,EAAE9I,CAAC,CAADA,YAAAA,CAAe8I;AADoC,OAAjC,CAA3B;AAGA,WAAA,iBAAA,IAA0B,KAAA,iBAAA,CAAA,QAAA,CAAgC;AACtDC,QAAAA,IAAI,EAAE/I,CAAC,CAADA,YAAAA,CAAe+I;AADiC,OAAhC,CAA1B;AAJc,KAAA,CAAA,IAAA,CAAlBT,IAAkB,CAAlBA;;AAQAA,IAAAA,MAAM,CAANA,KAAAA,GAAe,YAAW;AACtB,WAAA,cAAA,CAAA,qBAAA,EAAA,EAAA;AACA,WAAA,iBAAA,IAA0B,KAAA,iBAAA,CAAA,MAAA,CAAA,UAAA,EAA1B,wBAA0B,CAA1B;AACA,WAAA,kBAAA,IAA2B,KAAA,kBAAA,CAAA,MAAA,CAAA,UAAA,EAA3B,yBAA2B,CAA3B;AAHW,KAAA,CAAA,IAAA,CAAfA,IAAe,CAAfA;;AAKA,WAAA,MAAA;AArfgC,GAAA;AAufpCU,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,QAAI,KAAA,MAAA,CAAJ,uBAAI,CAAJ,EAA0C;AACtC,WAAA,kCAAA;AADJ,KAAA,MAEO;AACH,WAAA,8BAAA;AACH;AA5f+B,GAAA;AA8fpCC,EAAAA,8BAA8B,EAAE,SAAA,8BAAA,GAAW;AACvC,QAAI,KAAJ,2BAAI,EAAJ,EAAwC;AACpC,WAAA,oBAAA,CAAA,QAAA,GAAA,MAAA,CAA4C,KAA5C,iBAAA,EAAoE,KAApE,YAAA,EAAuF,KAAvF,WAAA,EAAyG,KAAzG,WAAA;;AACA,WAAA,QAAA,GAAA,MAAA,CAAuB,KAAvB,gBAAA,EAA8C,KAA9C,aAAA,EAAkE,KAAA,oBAAA,CAAlE,QAAkE,EAAlE;AAFJ,KAAA,MAGO;AACH,WAAA,oBAAA,CAAA,QAAA,GAAA,MAAA,CAA4C,KAA5C,WAAA,EAA8D,KAA9D,WAAA;;AACA,WAAA,QAAA,GAAA,MAAA,CAAuB,KAAvB,gBAAA,EAA8C,KAA9C,aAAA,EAAkE,KAAlE,iBAAA,EAA0F,KAA1F,aAAA,EAA8G,KAAA,oBAAA,CAA9G,QAA8G,EAA9G;AACH;AArgB+B,GAAA;AAugBpCC,EAAAA,kCAAkC,EAAE,SAAA,kCAAA,GAAW;AAC3C,SAAA,QAAA,GAAA,MAAA,CAAuB,KAAvB,gBAAA;;AACA,SAAA,uBAAA;;AACA,SAAA,wBAAA;;AACA,SAAA,QAAA,GAAA,MAAA,CAAuB,KAAA,oBAAA,CAAvB,QAAuB,EAAvB;;AACA,SAAA,iBAAA,CAAA,QAAA,GAAA,MAAA,CAAyC,KAAzC,aAAA;;AACA,SAAA,oBAAA,CAAA,QAAA,GAAA,MAAA,CAA4C,KAA5C,WAAA;;AACA,QAAI,KAAJ,2BAAI,EAAJ,EAAwC;AACpC,WAAA,oBAAA,CAAA,QAAA,GAAA,OAAA,CAA6C,KAA7C,iBAAA;;AACA,WAAA,kBAAA,CAAA,QAAA,GAAA,MAAA,CAA0C,KAA1C,YAAA,EAA6D,KAA7D,WAAA;AAFJ,KAAA,MAGO;AACH,WAAA,iBAAA,CAAA,QAAA,GAAA,MAAA,CAAyC,KAAzC,iBAAA,EAAiE,KAAjE,aAAA;AACH;;AACD,SAAA,kBAAA,CAAA,QAAA,GAAA,MAAA,CAA0C,KAA1C,WAAA;AAphBgC,GAAA;AAshBpCC,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,GAAW;AAChC,QAAIC,iBAAiB,GAAG5O,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAAAA,iCAAAA,EAAAA,QAAAA,CAAgE,KAAxF,QAAwF,EAAhEA,CAAxB;AACA,SAAA,iBAAA,GAAyB,KAAA,gBAAA,CAAA,iBAAA,EAAA,UAAA,EAAqD,KAA9E,uBAA8E,EAArD,CAAzB;AAxhBgC,GAAA;AA0hBpC6O,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,GAAW;AAChC,QAAA,2BAAA;AACA,QAAIf,MAAM,GAAG;AACTC,MAAAA,WAAW,EADF,KAAA;AAETe,MAAAA,aAAa,EAFJ,KAAA;AAGTrH,MAAAA,SAAS,EAHA,YAAA;AAITsH,MAAAA,SAAS,EAJA,KAAA;AAKTd,MAAAA,cAAc,EALL,IAAA;AAMTD,MAAAA,aAAa,EANJ,KAAA;AAOTE,MAAAA,aAAa,EAPJ,CAAA;AAQTc,MAAAA,OAAO,EAAE,UAAA,CAAA,EAAY;AACjBC,QAAAA,2BAA2B,GAAG,KAAA,oBAAA,CAAA,MAAA,CAA9BA,UAA8B,CAA9BA;AADK,OAAA,CAAA,IAAA,CARA,IAQA,CARA;AAWTC,MAAAA,QAAQ,EAAE,UAAA,CAAA,EAAY;AAClB,aAAA,oBAAA,CAAA,MAAA,CAAA,UAAA,EAA6C,KAA7C,CAAA;;AACA,aAAA,oBAAA,CAAA,QAAA,CAAmC;AAC/BX,UAAAA,IAAI,EAAE/I,CAAC,CAADA,YAAAA,CAAe+I;AADU,SAAnC;;AAGA,aAAA,oBAAA,CAAA,MAAA,CAAA,UAAA,EAAA,2BAAA;AALM,OAAA,CAAA,IAAA,CAAA,IAAA;AAXD,KAAb;AAmBA,WAAA,MAAA;AA/iBgC,GAAA;AAijBpCY,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,QAAA,2BAAA;AACA,QAAIC,oBAAoB,GAAGpP,CAAC,CAADA,OAAC,CAADA,CAAAA,QAAAA,CAAAA,kCAAAA,EAAAA,QAAAA,CAAiE,KAA5F,QAA4F,EAAjEA,CAA3B;AACA,SAAA,kBAAA,GAA0B,KAAA,gBAAA,CAAA,oBAAA,EAAA,UAAA,EAAwD;AAC9E+N,MAAAA,WAAW,EADmE,KAAA;AAE9Ee,MAAAA,aAAa,EAFiE,KAAA;AAG9ErH,MAAAA,SAAS,EAHqE,UAAA;AAI9EsH,MAAAA,SAAS,EAJqE,KAAA;AAK9Ed,MAAAA,cAAc,EALgE,IAAA;AAM9ED,MAAAA,aAAa,EANiE,KAAA;AAO9EE,MAAAA,aAAa,EAPiE,CAAA;AAQ9Ec,MAAAA,OAAO,EAAE,UAAA,CAAA,EAAY;AACjBC,QAAAA,2BAA2B,GAAG,KAAA,oBAAA,CAAA,MAAA,CAA9BA,UAA8B,CAA9BA;;AACA,aAAA,oBAAA,CAAA,MAAA,CAAA,UAAA,EAA6C,KAA7C,CAAA;AAFK,OAAA,CAAA,IAAA,CARqE,IAQrE,CARqE;AAY9EC,MAAAA,QAAQ,EAAE,UAAA,CAAA,EAAY;AAClB,aAAA,oBAAA,CAAA,QAAA,CAAmC;AAC/BZ,UAAAA,GAAG,EAAE9I,CAAC,CAADA,YAAAA,CAAe8I;AADW,SAAnC;AADM,OAAA,CAAA,IAAA,CAZoE,IAYpE,CAZoE;AAiB9Ee,MAAAA,KAAK,EAAE,UAAA,CAAA,EAAY;AACf,aAAA,oBAAA,CAAA,MAAA,CAAA,UAAA,EAAA,2BAAA;AADG,OAAA,CAAA,IAAA,CAAA,IAAA;AAjBuE,KAAxD,CAA1B;AApjBgC,GAAA;AA0kBpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,CAAA,OAAA,EAAkB;AAClC,QAAIC,OAAO,IAAI,KAAf,2BAAe,EAAf,EAAmD;AAC/C,WAAA,oCAAA;AACH;;AACD,QAAIA,OAAO,IAAI,KAAf,yBAAe,EAAf,EAAiD;AAC7C,WAAA,cAAA;AACH;AAhlB+B,GAAA;AAklBpCC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,SAAA,cAAA,CAAoB,KAApB,WAAA,EAAsC,KAAtC,kBAAsC,EAAtC;;AACA,QAAI,KAAJ,2BAAI,EAAJ,EAAwC;AACpC,UAAIrI,UAAU,GAAG,KAAjB,cAAiB,EAAjB;;AACA,WAAK,IAAIkG,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAjB,UAAA,EAAgCA,CAAhC,EAAA,EAAqC;AACjC,aAAA,cAAA,CAAoB,KAAA,aAAA,CAApB,CAAoB,CAApB,EAAA,mBAAA;AACH;AAJL,KAAA,MAKO;AACH,WAAA,cAAA,CAAoB,KAApB,aAAA,EAAA,mBAAA;AACH;AA3lB+B,GAAA;AA6lBpCoC,EAAAA,yBAAyB,EAAE,SAAA,yBAAA,GAAW;AAClC,SAAA,cAAA,CAAoB,KAApB,aAAA,EAAA,kBAAA;AA9lBgC,GAAA;AAgmBpCC,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,GAAA,EAAA,SAAA,EAAyB;AACrCC,IAAAA,GAAG,IAAI,CAACA,GAAG,CAAHA,QAAAA,CAARA,SAAQA,CAARA,IAAmCA,GAAG,CAAHA,QAAAA,CAAnCA,SAAmCA,CAAnCA;AAjmBgC,GAAA;AAmmBpCC,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,SAAA,mBAAA;;AACA,QAAIC,SAAS,GAAG,KAAhB,YAAgB,EAAhB;;AACA,QAAIA,SAAS,GAAG,KAAhB,eAAgB,EAAhB,EAAwC;AACpCA,MAAAA,SAAS,GAAG,KAAZA,eAAY,EAAZA;AACH;;AACD,QAAIC,QAAQ,GAAG,KAAf,oBAAe,EAAf;;AACA,QAAIC,YAAY,GAAG,KAAA,aAAA,CAAA,IAAA,CAAA,IAAA,EAAA,IAAA,GAAA,IAAA,CAAnB,IAAmB,CAAnB;;AACA,QAAIC,KAAK,GAAGH,SAAS,GAAGE,YAAY,CAApC,MAAA;;AACA,QAAIC,KAAK,GAAT,QAAA,EAAsB;AAClBA,MAAAA,KAAK,GAALA,QAAAA;AACH;;AACD,SAAA,aAAA,CAAA,KAAA,CAAA,KAAA;;AACA,SAAA,WAAA,CAAA,KAAA,CAAA,KAAA;;AACA,SAAA,aAAA,IAAsB,KAAA,aAAA,CAAA,KAAA,CAAtB,KAAsB,CAAtB;;AACA,SAAA,yBAAA;;AACA,QAAI,KAAJ,2BAAI,EAAJ,EAAwC;AACpC,WAAA,oCAAA;AACH;AArnB+B,GAAA;AAunBpCC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,WAAO,KAAA,gBAAA,CAAP,oBAAO,EAAP;AAxnBgC,GAAA;AA0nBpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,QAAI,KAAA,MAAA,CAAJ,uBAAI,CAAJ,EAA0C;AACtC,WAAA,cAAA;AACH;;AACD,SAAA,4BAAA;;AACA,SAAA,mBAAA;;AACA,SAAA,sBAAA;AAhoBgC,GAAA;AAkoBpCC,EAAAA,yBAAyB,EAAE,SAAA,yBAAA,GAAW;AAClC,WAAO,KAAA,MAAA,CAAP,uBAAO,CAAP;AAnoBgC,GAAA;AAqoBpCC,EAAAA,gBAAgB,EAroBoB,IAAA;AAsoBpCC,EAAAA,YAAY,EAtoBwB,IAAA;AAuoBpCC,EAAAA,aAAa,EAvoBuB,IAAA;AAwoBpCC,EAAAA,WAAW,EAAE,SAAA,WAAA,GAAW;AACpB,SAAA,mBAAA;;AACA,SAAA,wBAAA;;AACA,SAAA,wBAAA;;AACA,SAAA,QAAA;;AACA,QAAI,CAAC,KAAA,MAAA,CAAL,uBAAK,CAAL,EAA2C;AACvC,WAAA,mBAAA;;AACA,WAAA,yBAAA;AACH;;AACD,SAAA,mBAAA;;AACA,SAAA,2BAAA;;AACA,SAAA,WAAA;;AACA,SAAA,aAAA;;AACA,SAAA,uBAAA,CAA6B,KAAA,MAAA,CAA7B,kBAA6B,CAA7B;AArpBgC,GAAA;AAupBpCC,EAAAA,OAAO,EAAE,SAAA,OAAA,GAAW;AAChB,SAAA,QAAA;;AACA,SAAA,yBAAA;;AACA,SAAA,4BAAA;AA1pBgC,GAAA;AA4pBpCC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,SAAA,QAAA,GAAA,WAAA,CAAA,uBAAA,EAAqD,KAAA,cAAA,KAArD,CAAA;AA7pBgC,GAAA;AA+pBpCC,EAAAA,2BAA2B,EA/pBS,IAAA;AAgqBpCC,EAAAA,WAAW,EAAE,SAAA,WAAA,GAAW;AACpB,SAAA,iBAAA;;AACA,SAAA,mBAAA,CAAyB,KAAzB,kBAAyB,EAAzB;;AACA,SAAA,iBAAA;;AACA,SAAA,gBAAA;;AACA,QAAI,KAAJ,2BAAI,EAAJ,EAAwC;AACpC,UAAIxJ,UAAU,GAAG,KAAjB,cAAiB,EAAjB;;AACA,WAAK,IAAIkG,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAjB,UAAA,EAAgCA,CAAhC,EAAA,EAAqC;AACjC,aAAA,kBAAA,CAAA,CAAA;AACH;AACJ;;AACD,SAAA,gBAAA;;AACA,SAAA,kBAAA;;AACA,SAAA,uBAAA;;AACA,SAAA,OAAA,GAAe,IAAf,cAAe,EAAf;AA9qBgC,GAAA;AAgrBpCuD,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,GAAW;AAChC,QAAI,KAAA,2BAAA,MAAsCrQ,WAAW,CAArD,SAA0CA,EAA1C,EAAmE;AAC/D,WAAA,oCAAA;AACH;AAnrB+B,GAAA;AAqrBpCsQ,EAAAA,yBAAyB,EArrBW,IAAA;AAsrBpCC,EAAAA,4BAA4B,EAtrBQ,IAAA;AAurBpCC,EAAAA,0BAA0B,EAvrBU,IAAA;AAwrBpCC,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,CAAA,IAAA,EAAe;AACpC,QAAIC,KAAK,GAAT,EAAA;;AACA,SAAA,mBAAA;;AACA,SAAK,IAAI5D,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAG6D,IAAI,CAAxB,MAAA,EAAiC7D,CAAjC,EAAA,EAAsC;AAClC,UAAI7C,MAAM,GAAG0G,IAAI,CAAJA,CAAI,CAAJA,CAAb,MAAA;AACA,UAAIhI,UAAU,GAAG,KAAA,MAAA,CAAA,QAAA,EAAA,MAAA,IAAA,MAAA,GAAyC,KAAA,0BAAA,CAAzC,MAAyC,CAAzC,GAAjB,CAAA;AACA,UAAIiI,MAAM,GAAG,CAAC,CAACD,IAAI,CAAJA,CAAI,CAAJA,CAAf,MAAA;AACA,UAAIE,WAAW,GAAG,KAAA,oBAAA,CAA0BF,IAAI,CAAJA,CAAI,CAAJA,CAA1B,SAAA,EAAA,UAAA,EAAlB,MAAkB,CAAlB;;AACA,UAAIhL,KAAK,GAAG,KAAA,qBAAA,CAAA,WAAA,EAAZ,UAAY,CAAZ;;AACA,UAAIjF,SAAS,CAAb,KAAa,CAAb,EAAsB;AAClB,aAAA,iBAAA,CAAA,IAAA,EAAA,KAAA;;AACAgQ,QAAAA,KAAK,CAALA,IAAAA,CAAW/K,KAAK,CAALA,GAAAA,CAAX+K,CAAW/K,CAAX+K;AACH;AACJ;;AACD,SAAA,aAAA,GAAA,KAAA;AAtsBgC,GAAA;AAwsBpCI,EAAAA,0BAA0B,EAAE,SAAA,0BAAA,CAAA,EAAA,EAAa;AACrC,QAAI7G,MAAM,GAAG,KAAA,MAAA,CAAb,QAAa,CAAb;AACA,QAAI8G,QAAQ,GAAGC,MAAM,CAANA,IAAAA,CAAAA,EAAAA,EAAf,CAAeA,CAAf;AACA,QAAIC,UAAU,GAAGC,EAAE,CAAnB,QAAmB,CAAnB;AACA,QAAIC,IAAI,GAAG,KAAA,MAAA,CAAA,qBAAA,EAAX,MAAW,CAAX;AACA,QAAIC,KAAK,GAAT,CAAA;;AACA,SAAK,IAAItE,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAGqE,IAAI,CAAxB,MAAA,EAAiCrE,CAAjC,EAAA,EAAsC;AAClC,UAAIqE,IAAI,CAAJA,CAAI,CAAJA,CAAAA,IAAAA,KAAAA,QAAAA,IAA6BA,IAAI,CAAJA,CAAI,CAAJA,CAAAA,KAAAA,KAAjC,UAAA,EAA+D;AAC3DC,QAAAA,KAAK,GAAGD,IAAI,CAAJA,CAAI,CAAJA,CAARC,SAAAA;AACH;AACJ;;AACD,WAAA,KAAA;AAntBgC,GAAA;AAqtBpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,QAAI1H,cAAc,GAAGjJ,SAAS,CAAC,KAAVA,eAAU,EAAD,CAATA,GAAoC,KAApCA,eAAoC,EAApCA,GAA6DL,gBAAgB,CAAlG,mBAAkFA,EAAlF;AACA,SAAA,cAAA,GAAsBP,SAAS,CAATA,gBAAAA,CAA2B,KAA3BA,sBAA2B,EAA3BA,EAAtB,cAAsBA,CAAtB;;AACA,SAAA,gBAAA,CAAsB,KAAtB,cAAA;AAxtBgC,GAAA;AA0tBpCwR,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,GAAW;AAC/B,QAAI,CAAC,KAAA,MAAA,CAAL,WAAK,CAAL,EAA+B;AAC3B,aAAO,KAAA,MAAA,CAAP,aAAO,CAAP;AADJ,KAAA,MAEO;AACH,UAAI5H,SAAS,GAAG5J,SAAS,CAATA,QAAAA,CAAmB,KAAnC,iBAAmC,EAAnBA,CAAhB;AACA,UAAI0J,WAAW,GAAG,KAAA,MAAA,CAAlB,aAAkB,CAAlB;AACA,UAAI+H,IAAI,GAAG7H,SAAS,CAATA,OAAAA,MAAuBF,WAAW,CAAlCE,OAAuBF,EAAvBE,GAAAA,CAAAA,GAAmD,CAA9D,CAAA;AACA,UAAI8H,OAAO,GAAG,IAAA,IAAA,CAAS9H,SAAS,CAATA,OAAAA,KAAsB,KAAA,oBAAA,KAA7C,IAAc,CAAd;;AACA,aAAO,CAAC,KAAA,YAAA,CAAA,WAAA,EAAA,SAAA,EAAA,OAAA,EAAR,IAAQ,CAAR,EAAkE;AAC9DA,QAAAA,SAAS,GAATA,OAAAA;AACA8H,QAAAA,OAAO,GAAG,IAAA,IAAA,CAAS9H,SAAS,CAATA,OAAAA,KAAsB,KAAA,oBAAA,KAAzC8H,IAAU,CAAVA;AACH;;AACD,aAAOD,IAAI,GAAJA,CAAAA,GAAAA,SAAAA,GAAP,OAAA;AACH;AAvuB+B,GAAA;AAyuBpCE,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,WAAO,KAAP,gBAAO,EAAP;AA1uBgC,GAAA;AA4uBpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAO,KAAA,MAAA,CAAP,WAAO,CAAP;AA7uBgC,GAAA;AA+uBpCC,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,IAAA,EAAA,SAAA,EAAA,OAAA,EAAA,IAAA,EAAyC;AACnD,WAAOJ,IAAI,GAAJA,CAAAA,GAAWzR,SAAS,CAATA,WAAAA,CAAAA,IAAAA,EAAAA,SAAAA,EAAuC,IAAA,IAAA,CAAS0R,OAAO,CAAPA,OAAAA,KAA3DD,CAAkD,CAAvCzR,CAAXyR,GAAqFzR,SAAS,CAATA,WAAAA,CAAAA,IAAAA,EAAAA,OAAAA,EAAAA,SAAAA,EAA5F,MAA4FA,CAA5F;AAhvBgC,GAAA;AAkvBpC8R,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,WAAOtR,IAAI,CAAJA,KAAI,CAAJA,GAAc,KAAA,MAAA,CAArB,eAAqB,CAArB;AAnvBgC,GAAA;AAqvBpCuR,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,IAAA,EAAe;AAC7B,QAAIjI,YAAY,GAAG,KAAA,MAAA,CAAnB,cAAmB,CAAnB;;AACA,QAAIlJ,SAAS,CAAb,YAAa,CAAb,EAA6B;AACzBmE,MAAAA,IAAI,CAAJA,QAAAA,CAAAA,YAAAA,EAA4B+E,YAAY,GAAZA,CAAAA,GAA5B/E,EAAAA,EAAAA,CAAAA,EAAAA,CAAAA;AACH;AAzvB+B,GAAA;AA2vBpCiN,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,WAAO,KAAA,MAAA,CAAP,gBAAO,CAAP;AA5vBgC,GAAA;AA8vBpCC,EAAAA,aAAa,EAAE,SAAA,aAAA,GAAW;AACtB,SAAA,6BAAA;;AACA,SAAA,iBAAA;;AACA,SAAA,uBAAA;AAjwBgC,GAAA;AAmwBpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,QAAIC,IAAI,GAAR,IAAA;;AACA,QAAIC,iBAAiB,GAAG,KAAA,aAAA,CAAmB,UAAA,CAAA,EAAY;AACnDD,MAAAA,IAAI,CAAJA,mBAAAA,CAAyBhN,CAAC,CAA1BgN,KAAAA;AADJ,KAAwB,CAAxB;;AAGA,SAAA,sBAAA;;AACA,QAAIE,YAAY,GAAG,MAAA,qBAAA,GAAA,IAAA,GAAnB,wBAAA;AACA,QAAIlJ,QAAQ,GAAG,KAAf,QAAe,EAAf;AACArJ,IAAAA,YAAY,CAAZA,GAAAA,CAAAA,QAAAA,EAAAA,4CAAAA;AACAA,IAAAA,YAAY,CAAZA,GAAAA,CAAAA,QAAAA,EAAAA,iCAAAA;AACAA,IAAAA,YAAY,CAAZA,EAAAA,CAAAA,QAAAA,EAAAA,4CAAAA,EAAwE,UAAA,CAAA,EAAY;AAChF,UAAIgB,UAAU,CAAVA,YAAAA,CAAAA,CAAAA,KAA8BqE,CAAC,CAADA,KAAAA,GAAlC,CAAA,EAA+C;AAC3CA,QAAAA,CAAC,CAADA,cAAAA;AACA;AACH;;AACDiN,MAAAA,iBAAiB,CAAC;AACd9M,QAAAA,KAAK,EAAEH;AADO,OAAD,CAAjBiN;AALJtS,KAAAA;AASAA,IAAAA,YAAY,CAAZA,EAAAA,CAAAA,QAAAA,EAAAA,iCAAAA,EAAAA,YAAAA,EAA2E,UAAA,CAAA,EAAY;AACnF,UAAI+F,KAAK,GAAGlG,CAAC,CAACwF,CAAC,CAAf,MAAa,CAAb;;AACAgN,MAAAA,IAAI,CAAJA,gBAAAA,CAAsB;AAClB7M,QAAAA,KAAK,EADa,CAAA;AAElBC,QAAAA,WAAW,EAAEpF,gBAAgB,CAFX,KAEW,CAFX;AAGlBqF,QAAAA,QAAQ,EAAE2M,IAAI,CAAJA,WAAAA,CAAAA,KAAAA;AAHQ,OAAtBA;AAFJrS,KAAAA;AAtxBgC,GAAA;AA+xBpCwS,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,GAAW;AAC/B,QAAIH,IAAI,GAAR,IAAA;AACA,SAAA,gBAAA,GAAwB,KAAA,qBAAA,CAAA,aAAA,EAA0C;AAC9DI,MAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,CAAA,EAAY;AACtBJ,QAAAA,IAAI,CAAJA,qBAAAA,CAA2BhN,CAAC,CAADA,IAAAA,CAAAA,CAAAA,EAA3BgN,KAAAA;AACH;AAH6D,KAA1C,CAAxB;AAjyBgC,GAAA;AAuyBpCK,EAAAA,6BAA6B,EAAE,SAAA,6BAAA,GAAW;AACtC,SAAA,uBAAA,GAA+B,KAAA,qBAAA,CAA/B,oBAA+B,CAA/B;AAxyBgC,GAAA;AA0yBpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,CAAA,CAAA,EAAY;AAC/B,QAAIC,OAAO,GAAG/S,CAAC,CAACwF,CAAC,CAAjB,MAAe,CAAf;;AACA,QAAI,KAAA,UAAA,IAAmB,KAAA,cAAA,CAAvB,OAAuB,CAAvB,EAAqD;AACjD,aAAO,KAAP,UAAA;;AACA,WAAA,wBAAA,CAAA,OAAA;AACH;AA/yB+B,GAAA;AAizBpCwN,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,CAAA,EAAY;AAC7B,QAAID,OAAO,GAAG/S,CAAC,CAACwF,CAAC,CAAjB,MAAe,CAAf;;AACA,QAAI,CAACuN,OAAO,CAAPA,QAAAA,CAAD,qBAACA,CAAD,IAA4C,CAACA,OAAO,CAAPA,QAAAA,CAAjD,wBAAiDA,CAAjD,EAA6F;AACzF,WAAA,YAAA,GAAA,KAAA;AACA;AACH;;AACD,SAAA,YAAA,GAAA,IAAA;;AACA,QAAIA,OAAO,CAAPA,QAAAA,CAAJ,6BAAIA,CAAJ,EAAqD;AACjD,WAAA,UAAA,GAAA,IAAA;AADJ,KAAA,MAEO;AACH,WAAA,eAAA,CAAA,OAAA;AACH;AA5zB+B,GAAA;AA8zBpCE,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,CAAA,KAAA,EAAgB;AACtC,QAAIC,aAAa,GAAG,KAAA,WAAA,CAAiBhN,KAAK,CAA1C,KAAqCA,EAAjB,CAApB;AACA,QAAIiN,YAAY,GAAG,KAAA,WAAA,CAAiBjN,KAAK,CAAzC,IAAoCA,EAAjB,CAAnB;AACA,QAAIsF,IAAI,GAAG;AACPvB,MAAAA,SAAS,EAAEiJ,aAAa,CADjB,SAAA;AAEPnB,MAAAA,OAAO,EAAEoB,YAAY,CAACpB;AAFf,KAAX;;AAIA,QAAI9Q,SAAS,CAACkS,YAAY,CAA1B,MAAa,CAAb,EAAoC;AAChC3H,MAAAA,IAAI,CAAJA,MAAAA,GAAc2H,YAAY,CAA1B3H,MAAAA;AACH;;AACD/K,IAAAA,MAAM,CAAA,IAAA,EAAO0S,YAAY,CAAzB1S,MAAM,CAANA;AACA,SAAA,cAAA,CAAA,yBAAA,EAAA,IAAA;AAz0BgC,GAAA;AA20BpC2S,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,GAAW;AAChC,SAAA,wBAAA;;AACA,QAAIV,YAAY,GAAG,MAAA,qBAAA,GAAA,IAAA,GAAnB,wBAAA;AACA,QAAIlJ,QAAQ,GAAG,KAAf,QAAe,EAAf;AACA,QAAI6J,SAAS,GAAGlS,UAAU,CAAVA,YAAAA,CAAwBI,gBAAgB,CAAxCJ,IAAAA,EAA+C,KAA/D,IAAgBA,CAAhB;AACAhB,IAAAA,YAAY,CAAZA,GAAAA,CAAAA,QAAAA,EAAAA,SAAAA,EAAAA,YAAAA;AACAA,IAAAA,YAAY,CAAZA,EAAAA,CAAAA,QAAAA,EAAAA,SAAAA,EAAAA,YAAAA,EAAmD,KAAA,mBAAA,CAAA,IAAA,CAAnDA,IAAmD,CAAnDA;AAj1BgC,GAAA;AAm1BpCmT,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,CAAA,EAAY;AAC7B,QAAIpN,KAAK,GAAGlG,CAAC,CAACwF,CAAC,CAAf,MAAa,CAAb;;AACA,SAAA,kBAAA,CAAwB;AACpBG,MAAAA,KAAK,EADe,CAAA;AAEpBC,MAAAA,WAAW,EAAEpF,gBAAgB,CAFT,KAES,CAFT;AAGpBqF,MAAAA,QAAQ,EAAE,KAAA,WAAA,CAAA,KAAA;AAHU,KAAxB;;AAKA,SAAA,mBAAA,GAAA,IAAA;AA11BgC,GAAA;AA41BpC0N,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,SAAA,kBAAA,GAA0B,KAAA,qBAAA,CAA1B,mBAA0B,CAA1B;AA71BgC,GAAA;AA+1BpCC,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,QAAI,KAAJ,2BAAI,EAAJ,EAAwC;AACpC,aAAO,KAAP,YAAA;AACH;;AACD,WAAO,KAAP,OAAA;AAn2BgC,GAAA;AAq2BpCC,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,GAAW;AAChC,WAAO,KAAP,OAAA;AAt2BgC,GAAA;AAw2BpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,QAAIC,UAAU,GAAG,KAAjB,wBAAiB,EAAjB;;AACA,QAAIxM,UAAU,GAAG,KAAjB,cAAiB,EAAjB;;AACA,QAAIyM,aAAa,GAAjB,EAAA;;AACA,QAAA,UAAA,EAAgB;AACZ,UAAIC,SAAS,GAAG,KAAA,cAAA,CAAoB,KAAA,MAAA,CAApB,QAAoB,CAApB,EAA2C,KAAA,MAAA,CAA3D,aAA2D,CAA3C,CAAhB;;AACA,WAAA,qBAAA,CAAA,UAAA,EAAA,SAAA;;AACAF,MAAAA,UAAU,CAAVA,MAAAA,CAAkBE,SAAS,CAA3BF,QAAAA;AACAC,MAAAA,aAAa,GAAGC,SAAS,CAAzBD,aAAAA;AAJJ,KAAA,MAKO;AACH,WAAA,qBAAA;AACH;;AACD,WAAA,aAAA;AAp3BgC,GAAA;AAs3BpCE,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,SAAA,EAAoB;AACrCC,IAAAA,SAAS,CAATA,OAAAA,CAAkB,UAAA,QAAA,EAAmB;AACjCC,MAAAA,QAAQ;AADZD,KAAAA;AAv3BgC,GAAA;AA23BpCE,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,QAAIC,WAAW,GAAG,KAAA,gBAAA,CAAlB,iBAAkB,EAAlB;;AACA,SAAA,QAAA,GAAA,UAAA,CAA2BA,WAAW,CAAtC,IAAA;AA73BgC,GAAA;AA+3BpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,CAAA,aAAA,EAAA,SAAA,EAAmC;AACtD,QAAID,WAAW,GAAG,KAAA,gBAAA,CAAA,iBAAA,CAAA,aAAA,EAAlB,SAAkB,CAAlB;;AACA,SAAA,QAAA,GAAA,IAAA,CAAqBA,WAAW,CAAhC,IAAA,EAAuCA,WAAW,CAAlD,KAAA;AAj4BgC,GAAA;AAm4BpCE,EAAAA,4BAA4B,EAAE,SAAA,4BAAA,GAAW;AACrC,QAAI,CAAC,KAAA,MAAA,CAAD,sBAAC,CAAD,IAAwC,CAAC,KAAA,MAAA,CAA7C,kBAA6C,CAA7C,EAA8E;AAC1E;AACH;;AACD,QAAIC,iBAAiB,GAAG,KAAxB,oBAAwB,EAAxB;AACA,QAAIC,YAAY,GAAG,KAAA,MAAA,CAAnB,iBAAmB,CAAnB;AACA,QAAIC,iBAAiB,GAAG,KAAA,gBAAA,MAA2B,KAAA,MAAA,CAA3B,iBAA2B,CAA3B,GAA4D,KAAA,gBAAA,CAA5D,oBAA4D,EAA5D,GAAxB,CAAA;AACAF,IAAAA,iBAAiB,IAAI,KAArBA,iBAAAA,IAA+C,KAAA,iBAAA,CAAA,QAAA,GAAA,MAAA,CAAyCA,iBAAiB,GAAzGA,iBAA+C,CAA/CA;AACAA,IAAAA,iBAAiB,IAAI,KAAA,oBAAA,CAAA,QAAA,GAAA,GAAA,CAAyC;AAC1DG,MAAAA,aAAa,EAAED,iBAAiB,GAAjBA,iBAAAA,GAD2C,IAAA;AAE1DE,MAAAA,YAAY,EAAE,CAAA,CAAA,IAAMC,QAAQ,CAAA,iBAAA,EAARA,EAAQ,CAARA,GAAN,iBAAA,IAA6D;AAFjB,KAAzC,CAArBL;AAIAA,IAAAA,iBAAiB,IAAI,KAArBA,kBAAAA,IAAgD,KAAA,kBAAA,CAAA,QAAA,GAAA,GAAA,CAAuC;AACnFG,MAAAA,aAAa,EAAED,iBAAiB,GAAjBA,iBAAAA,GADoE,IAAA;AAEnFE,MAAAA,YAAY,EAAE,CAAA,CAAA,IAAMC,QAAQ,CAAA,iBAAA,EAARA,EAAQ,CAARA,GAAN,iBAAA,IAA6D;AAFQ,KAAvC,CAAhDL;AAIA,SAAA,aAAA,IAAsB,KAAA,aAAA,CAAA,GAAA,CAAA,KAAA,EAA8BC,YAAY,GAAZA,iBAAAA,GAApD,IAAsB,CAAtB;AAn5BgC,GAAA;AAq5BpCK,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,MAAA,EAAA,WAAA,EAA8B;AAC1C,QAAIC,oBAAoB,GAAG,KAAA,2BAAA,KAAqChT,YAAY,CAAjD,QAAA,GAA6DA,YAAY,CAApG,UAAA;AACA,WAAO,YAAY,CAAZ,gBAAA,CAAA,oBAAA,EAAA,MAAA,EAA4D;AAC/DiT,MAAAA,mBAAmB,EAAE,KAD0C,iBAC1C,EAD0C;AAE/DC,MAAAA,aAAa,EAAE,KAFgD,iBAEhD,EAFgD;AAG/DC,MAAAA,gBAAgB,EAAE,KAAA,oBAAA,CAAA,IAAA,CAH6C,IAG7C,CAH6C;AAI/DC,MAAAA,uBAAuB,EAAE,KAAA,2BAAA;AAJsC,KAA5D,EAKJ,KAAA,aAAA,MALI,CAAA,EAKuB,KAAA,MAAA,CALvB,sBAKuB,CALvB,EAK4D,KAL5D,cAK4D,EAL5D,EAAP,WAAO,CAAP;AAv5BgC,GAAA;AA85BpCC,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,GAAW;AAC/B,WAAO,KAAA,MAAA,CAAP,kBAAO,CAAP;AA/5BgC,GAAA;AAi6BpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,QAAIvB,UAAU,GAAG,KAAjB,uBAAiB,EAAjB;;AACA,QAAIwB,UAAU,GAAGnV,CAAC,CAADA,MAAC,CAADA,CAAAA,QAAAA,CAAjB,gBAAiBA,CAAjB;;AACA,QAAIoV,KAAK,GAAG,KAAZ,aAAY,EAAZ;;AACA,QAAIC,YAAY,GAAG,KAAnB,sBAAmB,EAAnB;;AACA,QAAIC,WAAW,GAAG,KAAlB,+BAAkB,EAAlB;;AACA,QAAIC,iBAAiB,GAArB,EAAA;AACA,QAAIC,OAAO,GAAG,KAAA,MAAA,CAAA,aAAA,IAA6B,KAA7B,cAA6B,EAA7B,GAAd,CAAA;AACA,QAAIlK,WAAW,GAAG,KAAA,MAAA,CAAlB,aAAkB,CAAlB;AACA,QAAA,CAAA;AACA,QAAA,CAAA;;AACA,QAAI,CAAJ,WAAA,EAAkB;AACd,WAAK2B,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAb,WAAA,EAA6BA,CAA7B,EAAA,EAAkC;AAC9B,aAAKI,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAb,KAAA,EAAuBA,CAAvB,EAAA,EAA4B;AACxB,eAAA,yBAAA,CAAA,UAAA,EAAA,CAAA,EAA8CJ,CAAC,GAADA,WAAAA,GAA9C,CAAA,EAAA,YAAA,EAAA,iBAAA;AACH;AACJ;;AACD0G,MAAAA,UAAU,CAAVA,MAAAA,CAAAA,UAAAA;AANJ,KAAA,MAOO;AACH,WAAKtG,CAAC,GAAN,CAAA,EAAYA,CAAC,GAAb,KAAA,EAAuBA,CAAvB,EAAA,EAA4B;AACxB,YAAInH,KAAK,GAAG,KAAA,yBAAA,CAAA,UAAA,EAAA,CAAA,EAA8CmH,CAAC,GAA/C,WAAA,EAAA,YAAA,EAAZ,iBAAY,CAAZ;;AACAnH,QAAAA,KAAK,CAALA,IAAAA,CAAAA,SAAAA,EAAAA,OAAAA;AACH;;AACDyN,MAAAA,UAAU,CAAVA,OAAAA,CAAAA,UAAAA;AACH;;AACD,SAAA,mBAAA,CAAA,iBAAA;;AACA,WAAA,UAAA;AA37BgC,GAAA;AA67BpC8B,EAAAA,yBAAyB,EAAE,SAAA,yBAAA,CAAA,UAAA,EAAA,CAAA,EAAA,eAAA,EAAA,YAAA,EAAA,iBAAA,EAA0E;AACjG,QAAIC,IAAI,GAAG,KAAA,cAAA,CAAX,CAAW,CAAX;;AACA,QAAIxP,KAAK,GAAGlG,CAAC,CAADA,MAAC,CAADA,CAAAA,QAAAA,CAAmB,KAAA,wBAAA,CAAnBA,CAAmB,CAAnBA,EAAAA,IAAAA,CAAAA,OAAAA,EAAZ,IAAYA,CAAZ;;AACA,QAAIqV,YAAY,IAAIA,YAAY,CAAhC,MAAA,EAAyC;AACrCE,MAAAA,iBAAiB,CAAjBA,IAAAA,CAAuB,YAAY,CAAZ,MAAA,CAAA,IAAA,CAAA,YAAA,EAAuC;AAC1DI,QAAAA,KAAK,EAAE;AACHD,UAAAA,IAAI,EADD,IAAA;AAEHtQ,UAAAA,IAAI,EAAE,KAAA,eAAA,CAAA,CAAA;AAFH,SADmD;AAK1DuM,QAAAA,KAAK,EALqD,eAAA;AAM1DiE,QAAAA,SAAS,EAAEpV,gBAAgB,CAAA,KAAA;AAN+B,OAAvC,CAAvB+U;AADJ,KAAA,MASO;AACHrP,MAAAA,KAAK,CAALA,IAAAA,CAAAA,IAAAA;AACH;;AACDyN,IAAAA,UAAU,CAAVA,MAAAA,CAAAA,KAAAA;AACA,WAAA,KAAA;AA78BgC,GAAA;AA+8BpCkC,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,CAAA,CAAA,EAAY;AAClC,QAAI7I,SAAS,GAAGvJ,uBAAuB,GAAvBA,GAAAA,GAAhB,sBAAA;AACA,WAAO,KAAA,gBAAA,CAAA,6BAAA,CAAA,SAAA,EAA+D4J,CAAC,GAAvE,CAAO,CAAP;AAj9BgC,GAAA;AAm9BpCyI,EAAAA,+BAA+B,EAAE,SAAA,+BAAA,GAAW;AACxC,WAAO,KAAA,gBAAA,CAAP,8BAAO,EAAP;AAp9BgC,GAAA;AAs9BpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,CAAA,KAAA,EAAgB;AAChC,QAAIC,SAAS,GAAG,KAAhB,aAAgB,EAAhB;;AACA,QAAI,CAAC,KAAL,2BAAK,EAAL,EAAyC;AACrCA,MAAAA,SAAS,IAAI,KAAA,cAAA,MAAbA,CAAAA;AACH;;AACD,QAAIpC,aAAa,GAAG,KAAA,gBAAA,CAAsB;AACtCgC,MAAAA,SAAS,EAAE,KAAA,aAAA,CAAA,MAAA,GAA4BpV,gBAAgB,CAAC,KAAA,aAAA,CAA7C,KAA6C,CAAD,CAA5C,GAA0EA,gBAAgB,CAAC,KADhE,aAC+D,CAD/D;AAEtCyV,MAAAA,QAAQ,EAF8B,CAAA;AAGtCD,MAAAA,SAAS,EAH6B,SAAA;AAItChJ,MAAAA,SAAS,EAAE,KAAA,wBAAA,CAAA,IAAA,CAJ2B,IAI3B,CAJ2B;AAKtCkJ,MAAAA,QAAQ,EAL8B,uBAAA;AAMtCb,MAAAA,YAAY,EAAE,KAAA,MAAA,CANwB,kBAMxB,CANwB;AAOtCc,MAAAA,WAAW,EAAE,KAAA,kBAAA,CAAA,IAAA,CAPyB,IAOzB,CAPyB;AAQtCjN,MAAAA,UAAU,EAAEyI;AAR0B,KAAtB,EAApB,IAAoB,CAApB;;AAUA,SAAA,uBAAA;;AACA,SAAA,mBAAA,CAAA,aAAA;AAt+BgC,GAAA;AAw+BpCyE,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,CAAA,CAAA,EAAA,CAAA,EAAe;AACrC,QAAIpJ,SAAS,GAAG/J,wBAAwB,GAAxBA,GAAAA,GAAhB,sBAAA;AACA,WAAO,KAAA,gBAAA,CAAA,6BAAA,CAAA,SAAA,EAA+DgK,CAAC,GAAvE,CAAO,CAAP;AA1+BgC,GAAA;AA4+BpCoJ,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,CAAA,IAAA,EAAA,QAAA,EAAA,SAAA,EAAA,UAAA,EAAgD;AAChE,QAAIpM,SAAS,GAAG,KAAA,qBAAA,CAAA,QAAA,EAAhB,SAAgB,CAAhB;;AACAA,IAAAA,SAAS,GAAG5J,SAAS,CAATA,QAAAA,CAAZ4J,SAAY5J,CAAZ4J;AACA,QAAIiH,IAAI,GAAG;AACPjH,MAAAA,SAAS,EADF,SAAA;AAEP8H,MAAAA,OAAO,EAAE,IAAA,IAAA,CAAS9H,SAAS,CAATA,OAAAA,KAFX,MAEE,CAFF;AAGPkH,MAAAA,MAAM,EAAE;AAHD,KAAX;;AAKA,QAAI3G,MAAM,GAAG,KAAA,cAAA,CAAoBtB,UAAU,IAAI,KAAA,cAAA,CAAA,QAAA,EAA/C,SAA+C,CAAlC,CAAb;;AACA,QAAIsB,MAAM,CAAV,MAAA,EAAmB;AACf0G,MAAAA,IAAI,CAAJA,MAAAA,GAAAA,EAAAA;AACH;;AACD,SAAK,IAAI7D,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAG7C,MAAM,CAA1B,MAAA,EAAmC6C,CAAnC,EAAA,EAAwC;AACpC6D,MAAAA,IAAI,CAAJA,MAAAA,CAAY1G,MAAM,CAANA,CAAM,CAANA,CAAZ0G,IAAAA,IAA8B1G,MAAM,CAANA,CAAM,CAANA,CAA9B0G,EAAAA;AACH;;AACD,WAAO;AACHoF,MAAAA,GAAG,EADA,SAAA;AAEHC,MAAAA,KAAK,EAAErF;AAFJ,KAAP;AA3/BgC,GAAA;AAggCpCsF,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,GAAW;AAChC,QAAI/L,eAAe,GAAG,KAAA,MAAA,CAAtB,iBAAsB,CAAtB;;AACA,SAAA,aAAA,CAAA,MAAA,CAAA,eAAA;;AACA,SAAA,aAAA,IAAsB,KAAA,aAAA,CAAA,WAAA,CAAA,0BAAA,EAA2D,CAAjF,eAAsB,CAAtB;AACA,SAAA,QAAA,GAAA,WAAA,CAAA,4BAAA,EAAA,eAAA;;AACA,SAAA,uBAAA;;AACA,SAAA,iBAAA;AAtgCgC,GAAA;AAwgCpCgM,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,GAAW;AAChC,SAAA,QAAA,GAAA,WAAA,CAAA,sCAAA,EAAoE,CAAC,KAAA,MAAA,CAAD,gBAAC,CAAD,IAAkC,KAAA,MAAA,CAAtG,iBAAsG,CAAtG;AAzgCgC,GAAA;AA2gCpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,SAAA,oBAAA,CAAA,MAAA;;AACA,SAAA,iBAAA,IAA0B,KAAA,iBAAA,CAA1B,MAA0B,EAA1B;AACA,SAAA,kBAAA,IAA2B,KAAA,kBAAA,CAA3B,MAA2B,EAA3B;AA9gCgC,GAAA;AAghCpCC,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,GAAW;AACzB,QAAIrB,WAAW,GAAG,KAAA,gBAAA,CAAlB,4BAAkB,EAAlB;;AACA,SAAA,gBAAA,CAAsB;AAClBM,MAAAA,SAAS,EAAEpV,gBAAgB,CAAC,KADV,WACS,CADT;AAElByV,MAAAA,QAAQ,EAAE,KAAA,qBAAA,KAFQ,WAAA;AAGlBD,MAAAA,SAAS,EAHS,CAAA;AAIlBhJ,MAAAA,SAAS,EAAE,KAAA,iBAAA,CAAA,IAAA,CAJO,IAIP,CAJO;AAKlBkJ,MAAAA,QAAQ,EALU,oBAAA;AAMlBb,MAAAA,YAAY,EAAE,KAAA,MAAA,CANI,kBAMJ,CANI;AAOlBuB,MAAAA,WAAW,EAAE,KAAA,YAAA,CAAA,IAAA,CAPK,IAOL,CAPK;AAQlBC,MAAAA,WAAW,EAAE,KAAA,gBAAA,CAAA,IAAA,CARK,IAQL,CARK;AASlB1P,MAAAA,UAAU,EAAE,KATM,cASN,EATM;AAUlB2P,MAAAA,cAAc,EAAE,KAAA,8BAAA,KAAwC,KAAxC,aAAA,GAA6D,KAAK;AAVhE,KAAtB;AAlhCgC,GAAA;AA+hCpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,WAAO,KAAP,kBAAO,EAAP;AAhiCgC,GAAA;AAkiCpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,WAAO3N,IAAI,CAAJA,IAAAA,CAAU,KAAA,qBAAA,KAA+B,KAAA,MAAA,CAAhD,eAAgD,CAAzCA,CAAP;AAniCgC,GAAA;AAqiCpC4N,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,WAAO,KAAA,MAAA,CAAA,YAAA,IAA4B,KAAA,MAAA,CAAnC,cAAmC,CAAnC;AAtiCgC,GAAA;AAwiCpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,CAAA,CAAA,EAAY;AAC3B,QAAIlK,SAAS,GAAGtK,qBAAqB,GAArBA,GAAAA,GAAhB,oBAAA;AACA,WAAO,KAAA,gBAAA,CAAA,6BAAA,CAAA,SAAA,EAAA,CAAA,EAAP,CAAO,CAAP;AA1iCgC,GAAA;AA4iCpCyU,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,CAAA,EAAY;AACtB,QAAIC,aAAa,GAAG,KAAA,gBAAA,CAApB,CAAoB,CAApB;;AACA,QAAIzF,KAAK,GAAGtE,CAAC,GAAG,KAAhB,YAAgB,EAAhB;;AACA,QAAIsE,KAAK,GAALA,CAAAA,KAAJ,CAAA,EAAqB;AACjB,aAAO/Q,gBAAgB,CAAhBA,MAAAA,CAAAA,aAAAA,EAAP,WAAOA,CAAP;AACH;;AACD,WAAA,EAAA;AAljCgC,GAAA;AAojCpCyW,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,CAAA,EAAY;AAC1B,QAAID,aAAa,GAAG,IAAA,IAAA,CAAS,KAA7B,gBAA6B,EAAT,CAApB;AACA,QAAIE,gBAAgB,GAAGjO,IAAI,CAAJA,KAAAA,CAAW,KAAlC,eAAkC,EAAXA,CAAvB;AACA,QAAIkO,aAAa,GAAG,KAAA,qBAAA,KAA+B,KAAA,MAAA,CAAnD,eAAmD,CAAnD;AACAH,IAAAA,aAAa,CAAbA,eAAAA,CAA8BA,aAAa,CAAbA,eAAAA,KAAkCE,gBAAgB,IAAIjK,CAAC,GAArF+J,aAAgF,CAAhFA;AACA,WAAA,aAAA;AAzjCgC,GAAA;AA2jCpCI,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,GAAW;AACzB,QAAIrQ,UAAU,GAAG,KAAjB,cAAiB,EAAjB;;AACA,SAAA,gBAAA,CAAsB;AAClByO,MAAAA,SAAS,EAAEpV,gBAAgB,CAAC,KADV,WACS,CADT;AAElByV,MAAAA,QAAQ,EAAE,KAAA,iBAAA,CAFQ,UAER,CAFQ;AAGlBD,MAAAA,SAAS,EAAE,KAAA,kBAAA,CAHO,UAGP,CAHO;AAIlBhJ,MAAAA,SAAS,EAAE,KAAA,sBAAA,CAAA,IAAA,CAJO,IAIP,CAJO;AAKlBkJ,MAAAA,QAAQ,EAAE,KALQ,qBAKR,EALQ;AAMlBb,MAAAA,YAAY,EAAE,KAAA,MAAA,CANI,kBAMJ,CANI;AAOlBc,MAAAA,WAAW,EAAE,KAAA,YAAA,CAAA,IAAA,CAPK,IAOL,CAPK;AAQlBW,MAAAA,cAAc,EAAE,KAAA,8BAAA,KAAwC,KAAxC,aAAA,GAA6D,KAR3D,CAAA;AASlB3P,MAAAA,UAAU,EATQ,UAAA;AAUlBmE,MAAAA,WAAW,EAAE,KAAA,MAAA,CAAA,aAAA;AAVK,KAAtB;AA7jCgC,GAAA;AA0kCpCmM,EAAAA,8BAA8B,EAAE,SAAA,8BAAA,GAAW;AACvC,WAAO,KAAA,gBAAA,CAAP,6BAAO,EAAP;AA3kCgC,GAAA;AA6kCpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,CAAA,UAAA,EAAqB;AACrC,WAAO,KAAA,gBAAA,CAAA,iBAAA,CAAP,UAAO,CAAP;AA9kCgC,GAAA;AAglCpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAO,KAAA,gBAAA,CAAP,gBAAO,EAAP;AAjlCgC,GAAA;AAmlCpCC,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,IAAA,EAAA,QAAA,EAAA,SAAA,EAAoC;AAC9C,QAAI1G,IAAI,GAAG,KAAA,gBAAA,CAAA,QAAA,EAAA,SAAA,EAAX,IAAW,CAAX;;AACA,WAAO;AACHoF,MAAAA,GAAG,EADA,SAAA;AAEHC,MAAAA,KAAK,EAAErF;AAFJ,KAAP;AArlCgC,GAAA;AA0lCpC2G,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,QAAA,EAAA,SAAA,EAA8B;AAC5C,QAAI5N,SAAS,GAAG,KAAA,qBAAA,CAAA,QAAA,EAAhB,SAAgB,CAAhB;;AACA,QAAI8H,OAAO,GAAG,KAAA,gBAAA,CAAd,SAAc,CAAd;AACA,QAAIb,IAAI,GAAG;AACPjH,MAAAA,SAAS,EADF,SAAA;AAEP8H,MAAAA,OAAO,EAFA,OAAA;AAGPZ,MAAAA,MAAM,EAAE,KAAA,eAAA;AAHD,KAAX;;AAKA,QAAI3G,MAAM,GAAG,KAAA,cAAA,CAAoB,KAAA,cAAA,CAAA,QAAA,EAAjC,SAAiC,CAApB,CAAb;;AACA,QAAIA,MAAM,CAAV,MAAA,EAAmB;AACf0G,MAAAA,IAAI,CAAJA,MAAAA,GAAAA,EAAAA;AACH;;AACD,SAAK,IAAI7D,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAG7C,MAAM,CAA1B,MAAA,EAAmC6C,CAAnC,EAAA,EAAwC;AACpC6D,MAAAA,IAAI,CAAJA,MAAAA,CAAY1G,MAAM,CAANA,CAAM,CAANA,CAAZ0G,IAAAA,IAA8B1G,MAAM,CAANA,CAAM,CAANA,CAA9B0G,EAAAA;AACH;;AACD,WAAA,IAAA;AAzmCgC,GAAA;AA2mCpC4G,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,QAAA,EAAA,SAAA,EAA8B;AAC1C,WAAO,KAAA,gBAAA,CAAA,aAAA,CAAA,QAAA,EAAP,SAAO,CAAP;AA5mCgC,GAAA;AA8mCpCC,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,WAAA,KAAA;AA/mCgC,GAAA;AAinCpCC,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,SAAA,EAAoB;AAClC,QAAIlQ,MAAM,GAAG,IAAA,IAAA,CAAb,SAAa,CAAb;AACAA,IAAAA,MAAM,CAANA,eAAAA,CAAuBA,MAAM,CAANA,eAAAA,KAA2BuB,IAAI,CAAJA,KAAAA,CAAW,KAA7DvB,YAA6D,EAAXuB,CAAlDvB;AACA,WAAA,MAAA;AApnCgC,GAAA;AAsnCpCmQ,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,QAAIzN,MAAM,GAAG,KAAA,MAAA,CAAb,QAAa,CAAb;AACA,QAAI1C,MAAM,GAAV,CAAA;;AACA,SAAK,IAAIuF,CAAC,GAAL,CAAA,EAAW6K,GAAG,GAAG1N,MAAM,CAA5B,MAAA,EAAqC6C,CAAC,GAAtC,GAAA,EAA8CA,CAA9C,EAAA,EAAmD;AAC/C,UAAI,CAAJ,CAAA,EAAQ;AACJvF,QAAAA,MAAM,GAAG0C,MAAM,CAANA,CAAM,CAANA,CAAAA,KAAAA,CAAT1C,MAAAA;AADJ,OAAA,MAEO;AACHA,QAAAA,MAAM,IAAI0C,MAAM,CAANA,CAAM,CAANA,CAAAA,KAAAA,CAAV1C,MAAAA;AACH;AACJ;;AACD,WAAA,MAAA;AAhoCgC,GAAA;AAkoCpCqQ,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,SAAA,EAAoB;AAChC,QAAIzG,IAAI,GAAG,KAAA,MAAA,CAAA,qBAAA,EAAmC,KAAA,MAAA,CAA9C,QAA8C,CAAnC,CAAX;;AAEA,aAAA,eAAA,CAAA,IAAA,EAAA,KAAA,EAAsC;AAClC,WAAK,IAAIrE,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAG6D,IAAI,CAAxB,MAAA,EAAiC7D,CAAjC,EAAA,EAAsC;AAClC,YAAI6D,IAAI,CAAJA,CAAI,CAAJA,CAAAA,SAAAA,KAAJ,KAAA,EAAiC;AAC7B,iBAAOA,IAAI,CAAX,CAAW,CAAX;AADJ,SAAA,MAEO;AACH,cAAIkH,KAAK,GAAGC,eAAe,CAACnH,IAAI,CAAJA,CAAI,CAAJA,CAAD,QAAA,EAA3B,KAA2B,CAA3B;;AACA,cAAA,KAAA,EAAW;AACP,mBAAA,KAAA;AACH;AACJ;AACJ;AACJ;;AAED,aAAA,UAAA,CAAA,IAAA,EAAA,MAAA,EAAkC;AAC9BpJ,MAAAA,MAAM,GAAGA,MAAM,IAAfA,EAAAA;AACAA,MAAAA,MAAM,CAANA,IAAAA,CAAYwQ,IAAI,CAAhBxQ,KAAAA;;AACA,UAAIwQ,IAAI,CAAR,MAAA,EAAiB;AACbC,QAAAA,UAAU,CAACD,IAAI,CAAL,MAAA,EAAVC,MAAU,CAAVA;AACH;;AACD,aAAA,MAAA;AACH;;AACD,QAAID,IAAI,GAAGD,eAAe,CAAA,IAAA,EAA1B,SAA0B,CAA1B;AACA,WAAOE,UAAU,CAAVA,IAAU,CAAVA,CAAP,OAAOA,EAAP;AA3pCgC,GAAA;AA6pCpCC,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,UAAA,EAAqB;AACjC,QAAI1Q,MAAM,GAAV,EAAA;;AACA,QAAI,KAAJ,cAAI,EAAJ,EAA2B;AACvB,UAAI0C,MAAM,GAAG,KAAA,MAAA,CAAb,QAAa,CAAb;;AACA,UAAItB,UAAU,GAAd,CAAA,EAAoB;AAChB;AACH;;AACD,UAAIuP,IAAI,GAAG,KAAA,cAAA,CAAX,UAAW,CAAX;;AACA,WAAK,IAAIpL,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAG7C,MAAM,CAA1B,MAAA,EAAmC6C,CAAnC,EAAA,EAAwC;AACpCvF,QAAAA,MAAM,CAANA,IAAAA,CAAY;AACR4Q,UAAAA,IAAI,EAAElO,MAAM,CAANA,CAAM,CAANA,CADE,IAAA;AAERiH,UAAAA,EAAE,EAAEgH,IAAI,CAAA,CAAA;AAFA,SAAZ3Q;AAIH;AACJ;;AACD,WAAA,MAAA;AA5qCgC,GAAA;AA8qCpC6Q,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,QAAInG,IAAI,GAAR,IAAA;AACA,QAAIoG,aAAa,GAAjB,KAAA;AACA,QAAA,UAAA;AACA,QAAA,SAAA;AACA,QAAIpP,QAAQ,GAAG,KAAf,QAAe,EAAf;AACArJ,IAAAA,YAAY,CAAZA,GAAAA,CAAAA,QAAAA,EAAAA,qCAAAA;AACAA,IAAAA,YAAY,CAAZA,GAAAA,CAAAA,QAAAA,EAAAA,gCAAAA;AACAA,IAAAA,YAAY,CAAZA,GAAAA,CAAAA,QAAAA,EAAAA,uCAAAA;AACAA,IAAAA,YAAY,CAAZA,GAAAA,CAAAA,QAAAA,EAAAA,uCAAAA;AACAA,IAAAA,YAAY,CAAZA,EAAAA,CAAAA,QAAAA,EAAAA,qCAAAA,EAAAA,gCAAAA,EAAmG;AAC/F0Y,MAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,QAAA,EAAmB;AAC7B,YAAI,CAAJ,UAAA,EAAiB;AACbC,UAAAA,UAAU,GAAGtP,QAAQ,CAARA,GAAAA,CAAAA,CAAAA,EAAAA,qBAAAA,GAAbsP,MAAAA;AACH;;AACD,YAAI,CAAJ,SAAA,EAAgB;AACZjJ,UAAAA,SAAS,GAAGrG,QAAQ,CAARA,GAAAA,CAAAA,CAAAA,EAAAA,qBAAAA,GAAZqG,KAAAA;AACH;;AACD,eAAO;AACHG,UAAAA,KAAK,EADF,SAAA;AAEH+I,UAAAA,MAAM,EAAED;AAFL,SAAP;AAIH;AAZ8F,KAAnG3Y,EAaG,UAAA,CAAA,EAAY;AACX,UAAIqS,IAAI,CAAR,oBAAA,EAA+B;AAC3BA,QAAAA,IAAI,CAAJA,oBAAAA,CAAAA,WAAAA,CAAAA,+BAAAA;AACH;;AACDA,MAAAA,IAAI,CAAJA,oBAAAA,GAA4BxS,CAAC,CAACwF,CAAC,CAA/BgN,MAA6B,CAA7BA;;AACAA,MAAAA,IAAI,CAAJA,oBAAAA,CAAAA,QAAAA,CAAAA,+BAAAA;AAlBJrS,KAAAA;AAoBAA,IAAAA,YAAY,CAAZA,EAAAA,CAAAA,QAAAA,EAAAA,gCAAAA,EAAAA,gCAAAA,EAA8F,UAAA,CAAA,EAAY;AACtGH,MAAAA,CAAC,CAACwF,CAAC,CAAHxF,MAAC,CAADA,CAAAA,WAAAA,CAAAA,+BAAAA;AACA8Y,MAAAA,UAAU,GAAVA,CAAAA;AACAjJ,MAAAA,SAAS,GAATA,CAAAA;AAHJ1P,KAAAA;AAKAA,IAAAA,YAAY,CAAZA,EAAAA,CAAAA,QAAAA,EAAAA,uCAAAA,EAAAA,gCAAAA,EAAqG,UAAA,CAAA,EAAY;AAC7G,UAAIgB,UAAU,CAAVA,YAAAA,CAAAA,CAAAA,KAA8B,MAAMqE,CAAC,CAAzC,KAAA,EAAiD;AAC7CoT,QAAAA,aAAa,GAAbA,IAAAA;AACApG,QAAAA,IAAI,CAAJA,QAAAA,GAAAA,QAAAA,CAAAA,oCAAAA;AACArS,QAAAA,YAAY,CAAZA,GAAAA,CAAiBD,UAAU,CAA3BC,WAAiBD,EAAjBC,EAAAA,qCAAAA;AACAA,QAAAA,YAAY,CAAZA,EAAAA,CAAgBD,UAAU,CAA1BC,WAAgBD,EAAhBC,EAAAA,qCAAAA,EAAiF,YAAW;AACxFyY,UAAAA,aAAa,GAAbA,KAAAA;AACApG,UAAAA,IAAI,CAAJA,QAAAA,GAAAA,WAAAA,CAAAA,oCAAAA;AAFJrS,SAAAA;AAIH;AATLA,KAAAA;AAWAA,IAAAA,YAAY,CAAZA,EAAAA,CAAAA,QAAAA,EAAAA,uCAAAA,EAAAA,gCAAAA,EAAqG,UAAA,CAAA,EAAY;AAC7G,UAAIyY,aAAa,IAAIpG,IAAI,CAArBoG,oBAAAA,IAA8C,CAACpG,IAAI,CAAJA,oBAAAA,CAAAA,MAAAA,CAAnD,iBAAmDA,CAAnD,EAAwG;AACpGhN,QAAAA,CAAC,CAADA,cAAAA;AACAA,QAAAA,CAAC,CAADA,eAAAA;;AACAgN,QAAAA,IAAI,CAAJA,WAAAA,CAAiBxS,CAAC,CAACwF,CAAC,CAApBgN,MAAkB,CAAlBA,EAAAA,IAAAA;AACH;AALLrS,KAAAA;AA5tCgC,GAAA;AAouCpC6Y,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,WAAO,KAAA,WAAA,CAAA,GAAA,CAAqB,KAA5B,aAAO,CAAP;AAruCgC,GAAA;AAuuCpCC,EAAAA,aAAa,EAAE,SAAA,aAAA,GAAW;AACtB,WAAO,KAAP,WAAA;AAxuCgC,GAAA;AA0uCpCC,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,WAAO,KAAP,aAAA;AA3uCgC,GAAA;AA6uCpCC,EAAAA,YAAY,EAAE,SAAA,YAAA,GAAW;AACrB,QAAI,KAAA,CAAA,KAAW,KAAf,SAAA,EAA+B;AAC3B,WAAA,SAAA,GAAiB,KAAA,MAAA,CAAA,eAAA,IAAjB,OAAA;AACH;;AACD,WAAO,KAAP,SAAA;AAjvCgC,GAAA;AAmvCpCC,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,WAAA,EAAsB;AAClC,WAAOxY,gBAAgB,CAAhBA,MAAAA,CAAwB,KAAA,eAAA,CAAxBA,WAAwB,CAAxBA,EAA2D,KAAlE,UAAkE,EAA3DA,CAAP;AApvCgC,GAAA;AAsvCpCyY,EAAAA,eAAe,EAtvCqB,QAAA;AAuvCpCC,EAAAA,UAAU,EAvvC0B,QAAA;AAwvCpCC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,QAAA,EAAA,SAAA,EAA8B;AAC/C,WAAO,KAAA,gBAAA,CAAA,kBAAA,CAAA,QAAA,EAAP,SAAO,CAAP;AAzvCgC,GAAA;AA2vCpCC,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,OAAA,EAAA,0BAAA,EAA8C;AAC5D,QAAI1R,MAAM,GAAV,EAAA;;AACA,QAAI,CAAJ,0BAAA,EAAiC;AAC7B,WAAA,mBAAA,CAAyBlG,YAAY,CAAZA,SAAAA,CAAzB,OAAyBA,CAAzB;AADJ,KAAA,MAEO;AACHkG,MAAAA,MAAM,GAAGlG,YAAY,CAAZA,SAAAA,CAATkG,OAASlG,CAATkG;AACH;;AACD,WAAA,MAAA;AAlwCgC,GAAA;AAowCpC2R,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,SAAA,aAAA,IAAsB,KAAA,aAAA,CAAtB,MAAsB,EAAtB;AACA,SAAA,aAAA,IAAsB,KAAA,aAAA,CAAtB,MAAsB,EAAtB;AAtwCgC,GAAA;AAwwCpCC,EAAAA,UAAU,EAAE,SAAA,UAAA,GAAW;AACnB,SAAA,mBAAA;;AACA,SAAA,sBAAA;;AACA,SAAA,OAAA,CAAA,KAAA;;AACA,SAAA,WAAA,CAAA,KAAA;;AACA,SAAA,OAAA,IAAgB,KAAA,OAAA,CAAhB,KAAgB,EAAhB;;AACA,SAAA,WAAA,CAAA,KAAA;;AACA,SAAA,aAAA,IAAsB,KAAA,aAAA,CAAtB,KAAsB,EAAtB;;AACA,SAAA,YAAA,CAAA,KAAA;;AACA,WAAO,KAAP,eAAA;AACA,WAAO,KAAP,SAAA;AAlxCgC,GAAA;AAoxCpCC,EAAAA,MAAM,EAAE,SAAA,MAAA,GAAW;AACfxZ,IAAAA,YAAY,CAAZA,GAAAA,CAAiBD,UAAU,CAA3BC,WAAiBD,EAAjBC,EAAAA,qCAAAA;AACA,SAAA,QAAA;AAtxCgC,GAAA;AAwxCpCyZ,EAAAA,WAAW,EAAE,SAAA,WAAA,GAAW;AACpB,WAAO,KAAA,oBAAA,CAAP,QAAO,EAAP;AAzxCgC,GAAA;AA2xCpCC,EAAAA,aAAa,EAAE,SAAA,aAAA,GAAW;AACtB,WAAO,KAAP,oBAAA;AA5xCgC,GAAA;AA8xCpCC,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,GAAW;AAC/B,WAAO,KAAA,oBAAA,CAAP,SAAO,EAAP;AA/xCgC,GAAA;AAiyCpCC,EAAAA,6BAA6B,EAAE,SAAA,6BAAA,CAAA,MAAA,EAAiB;AAC5C,WAAO,KAAA,gBAAA,CAAA,sBAAA,CAAP,MAAO,CAAP;AAlyCgC,GAAA;AAoyCpCC,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,GAAW;AAChC,WAAO,KAAA,oBAAA,CAAP,UAAO,EAAP;AAryCgC,GAAA;AAuyCpCC,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,GAAW;AAChC,WAAO,KAAA,oBAAA,CAAP,WAAO,EAAP;AAxyCgC,GAAA;AA0yCpCC,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,GAAW;AAC/B,WAAO,KAAA,oBAAA,CAAP,UAAO,EAAP;AA3yCgC,GAAA;AA6yCpCC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,WAAO,KAAA,aAAA,IAAsB,KAAA,aAAA,CAAA,WAAA,CAA7B,IAA6B,CAA7B;AA9yCgC,GAAA;AAgzCpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAO,KAAA,WAAA,IAAoB,KAAA,WAAA,CAAA,GAAA,CAAA,CAAA,EAAA,qBAAA,GAA3B,KAAA;AAjzCgC,GAAA;AAmzCpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,WAAO,KAAA,YAAA,GAAoB,KAAA,YAAA,CAApB,UAAoB,EAApB,GAAP,CAAA;AApzCgC,GAAA;AAszCpCC,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,GAAW;AAC/B,WAAO,KAAA,gBAAA,CAAP,aAAO,EAAP;AAvzCgC,GAAA;AAyzCpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,WAAO,KAAP,gBAAA;AA1zCgC,GAAA;AA4zCpCC,EAAAA,0BAA0B,EAAE,SAAA,0BAAA,CAAA,KAAA,EAAgB;AACxC,QAAI3T,SAAS,GAAGwC,IAAI,CAAJA,KAAAA,CAAWsI,KAAK,GAAG,KAAnC,YAAmC,EAAnBtI,CAAhB;AACA,QAAIoR,QAAQ,GAAG9I,KAAK,GAAG,KAAA,YAAA,KAAvB,SAAA;AACA,WAAO;AACH9K,MAAAA,SAAS,EADN,SAAA;AAEH4T,MAAAA,QAAQ,EAAEA;AAFP,KAAP;AA/zCgC,GAAA;AAo0CpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,CAAA,QAAA,EAAA,SAAA,EAAA,cAAA,EAA8C;AACjE7T,IAAAA,SAAS,GAAG,CAAA,cAAA,GAAkB,KAAA,eAAA,CAAlB,SAAkB,CAAlB,GAAZA,SAAAA;AACA,QAAI8T,aAAa,GAAG,KAApB,gBAAoB,EAApB;AACA,QAAI5Q,WAAW,GAAG,IAAA,IAAA,CAAS4Q,aAAa,CAAbA,OAAAA,KAA0B,KAAA,sBAAA,CAAA,QAAA,EAA1BA,SAA0B,CAA1BA,GAA6E,KAAA,iBAAA,CAAxG,SAAwG,CAAtF,CAAlB;AACA5Q,IAAAA,WAAW,CAAXA,OAAAA,CAAoBA,WAAW,CAAXA,OAAAA,KAAwB1J,SAAS,CAATA,sBAAAA,CAAAA,aAAAA,EAA5C0J,WAA4C1J,CAA5C0J;AACA,WAAA,WAAA;AAz0CgC,GAAA;AA20CpC6Q,EAAAA,eAAe,EAAE,SAAA,eAAA,CAAA,SAAA,EAAoB;AACjC,QAAI,KAAJ,eAAI,EAAJ,EAA4B;AACxB/T,MAAAA,SAAS,GAAGwC,IAAI,CAAJA,KAAAA,CAAWxC,SAAS,GAAG,KAAnCA,cAAmC,EAAvBwC,CAAZxC;AACH;;AACD,WAAA,SAAA;AA/0CgC,GAAA;AAi1CpCgU,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAA,CAAA;AAl1CgC,GAAA;AAo1CpCC,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,CAAA,QAAA,EAAA,SAAA,EAA8B;AAClD,WAAO,KAAA,YAAA,KAAsB,KAAA,mBAAA,CAAA,QAAA,EAAtB,SAAsB,CAAtB,GAAsE,KAAA,wBAAA,CAAA,QAAA,EAA7E,SAA6E,CAA7E;AAr1CgC,GAAA;AAu1CpCC,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,CAAA,QAAA,EAAA,SAAA,EAA8B;AACpD,QAAIC,QAAQ,GAAGnU,SAAS,GAAG,KAA3B,aAA2B,EAA3B;;AACA,WAAOmU,QAAQ,GAAG,KAAlB,kBAAkB,EAAlB;AAz1CgC,GAAA;AA21CpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,QAAI,KAAA,CAAA,KAAW,KAAf,eAAA,EAAqC;AACjC,WAAA,eAAA,GAAuBjW,MAAM,GAAG,KAAhC,qBAAgC,EAAhC;AACH;;AACD,WAAO,KAAP,eAAA;AA/1CgC,GAAA;AAi2CpCkW,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,WAAA,EAAA,MAAA,EAA8B;AAC/C,QAAIP,aAAa,GAAG,KAApB,gBAAoB,EAApB;AACA,QAAIQ,YAAY,GAAG,KAAA,MAAA,CAAA,cAAA,IAAnB,OAAA;AACA,QAAIC,cAAc,GAAG/a,SAAS,CAATA,sBAAAA,CAAAA,aAAAA,EAArB,WAAqBA,CAArB;AACA,QAAIgb,YAAY,GAAGtR,WAAW,CAAXA,OAAAA,KAAwB4Q,aAAa,CAArC5Q,OAAwB4Q,EAAxB5Q,GAAnB,cAAA;;AACA,QAAIuR,IAAI,GAAG,KAAA,kBAAA,CAAA,YAAA,EAAX,YAAW,CAAX;;AACA,QAAIC,aAAa,GAAG,KAAA,iBAAA,CAApB,IAAoB,CAApB;;AACA,QAAIzT,MAAM,GAAG,CAACwT,IAAI,GAAL,aAAA,IAAb,MAAA;;AACA,QAAI,CAAJ,MAAA,EAAa;AACTxT,MAAAA,MAAM,GAAGuT,YAAY,GAAGC,IAAI,GAAG,KAAtBD,kBAAsB,EAAtBA,GAAkDE,aAAa,GAAG,KAA3EzT,qBAA2E,EAA3EA;AACH;;AACD,WAAA,MAAA;AA52CgC,GAAA;AA82CpC0T,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAA,CAAA;AA/2CgC,GAAA;AAi3CpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,CAAA,YAAA,EAAA,YAAA,EAAqC;AACrD,WAAOpS,IAAI,CAAJA,KAAAA,CAAW,CAACgS,YAAY,GAAb,YAAA,IAAlB,MAAOhS,CAAP;AAl3CgC,GAAA;AAo3CpCqS,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,oBAAA,EAA+B;AAC7C,QAAI5T,MAAM,GAAV,EAAA;;AACA,QAAI6T,oBAAoB,IAAI,KAAA,MAAA,CAAA,QAAA,EAA5B,MAAA,EAA0D;AACtD,UAAIjK,IAAI,GAAG,KAAA,MAAA,CAAA,qBAAA,EAAmC,KAAA,MAAA,CAA9C,QAA8C,CAAnC,CAAX;AACA5J,MAAAA,MAAM,GAAG,KAAA,MAAA,CAAA,uBAAA,EAAA,IAAA,EAATA,oBAAS,CAATA;AACH;;AACD,WAAA,MAAA;AA13CgC,GAAA;AA43CpC8T,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,KAAA,EAAgB;AAC1B,WAAOjK,KAAK,GAAG,KAAf,YAAe,EAAf;AA73CgC,GAAA;AA+3CpCkK,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAO,KAAA,cAAA,GAAA,IAAA,CAA2B,MAAlC,+BAAO,CAAP;AAh4CgC,GAAA;AAk4CpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,QAAI,KAAJ,yBAAI,EAAJ,EAAsC;AAClC,aAAO,KAAA,WAAA,CAAA,GAAA,CAAA,CAAA,EAAA,qBAAA,GAAP,KAAA;AACH;;AACD,WAAO,KAAA,QAAA,GAAA,GAAA,CAAA,CAAA,EAAA,qBAAA,GAAA,KAAA,GAAuD,KAA9D,iBAA8D,EAA9D;AAt4CgC,GAAA;AAw4CpCC,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,CAAA,KAAA,EAAA,UAAA,EAAA,WAAA,EAAyC;AAC9D,QAAIC,eAAe,GAAG,KAAA,0BAAA,CAAtB,KAAsB,CAAtB;;AACA,QAAI9V,KAAK,GAAG,KAAA,qBAAA,CAAA,eAAA,EAAA,UAAA,EAAZ,WAAY,CAAZ;;AACA,QAAI4B,MAAM,GAAG,KAAA,gBAAA,CAAb,KAAa,CAAb;;AACA,SAAA,gBAAA,CAAA,eAAA,EAAA,UAAA,EAAA,KAAA;;AACA,QAAA,MAAA,EAAY;AACRA,MAAAA,MAAM,CAANA,QAAAA,GAAkBkU,eAAe,CAAjClU,QAAAA;AACAA,MAAAA,MAAM,CAANA,SAAAA,GAAmBkU,eAAe,CAAlClU,SAAAA;AACH;;AACD,WAAA,MAAA;AAj5CgC,GAAA;AAm5CpCmU,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,KAAA,EAAgB;AAC9B,QAAIC,QAAQ,GAAGhW,KAAK,CAApB,QAAeA,EAAf;;AACA,QAAI,KAAA,MAAA,CAAJ,YAAI,CAAJ,EAA+B;AAC3BgW,MAAAA,QAAQ,CAARA,IAAAA,IAAiBhW,KAAK,CAALA,GAAAA,CAAAA,CAAAA,EAAAA,qBAAAA,GAAjBgW,KAAAA;AACH;;AACD,WAAA,QAAA;AAx5CgC,GAAA;AA05CpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,CAAA,eAAA,EAAA,UAAA,EAAA,WAAA,EAAmD;AACtE,QAAIC,OAAO,GAAG,KAAA,gBAAA,CAAA,kBAAA,CAAA,eAAA,EAAA,UAAA,EAAd,WAAc,CAAd;;AACA,WAAO,KAAA,WAAA,CAAA,IAAA,CAAA,IAAA,EAAA,EAAA,CAA+BA,OAAO,CAAtC,QAAA,EAAA,IAAA,CAAA,IAAA,EAAA,EAAA,CAA+DA,OAAO,CAA7E,SAAO,CAAP;AA55CgC,GAAA;AA85CpCC,EAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,MAAA,EAAA,SAAA,EAA4B;AACnC,QAAIrP,SAAS,GAAGmE,MAAM,GAAA,wBAAA,GAAtB,qBAAA;;AACA,QAAI,eAAJ,SAAA,EAA8B;AAC1B,UAAIrJ,MAAM,GAAV,EAAA;;AACA,WAAK,IAAIuF,CAAC,GAAV,CAAA,GAAiBA,CAAjB,EAAA,EAAsB;AAClB,YAAI4D,KAAK,GAAG,KAAA,QAAA,GAAA,IAAA,CAAqB,OAAA,MAAA,CAAA,SAAA,EAAA,aAAA,EAAA,MAAA,CAAA,CAAA,EAAjC,GAAiC,CAArB,CAAZ;;AACA,YAAI,CAACA,KAAK,CAAV,MAAA,EAAmB;AACf;AACH;;AACDnJ,QAAAA,MAAM,GAAGA,MAAM,CAANA,MAAAA,CAAcmJ,KAAK,CAA5BnJ,OAAuBmJ,EAAdnJ,CAATA;AACH;;AACD,aAAO9H,CAAC,CAAR,MAAQ,CAAR;AATJ,KAAA,MAUO;AACH,aAAO,KAAA,QAAA,GAAA,IAAA,CAAqB,MAA5B,SAAO,CAAP;AACH;AA56C+B,GAAA;AA86CpCsc,EAAAA,oCAAoC,EAAE,SAAA,oCAAA,GAAW;AAC7C,QAAIvD,MAAM,GAAG,KAAA,WAAA,CAAA,GAAA,CAAA,CAAA,EAAA,qBAAA,GAAb,MAAA;;AACA,SAAA,YAAA,CAAA,WAAA,CAAA,MAAA;AAh7CgC,GAAA;AAk7CpCwD,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,WAAA,sBAAA;AAn7CgC,GAAA;AAq7CpCC,EAAAA,yBAAyB,EAAE,SAAA,yBAAA,GAAW;AAClC,WAAO,IAAI,KAAX,mBAAW,EAAX;AAt7CgC,GAAA;AAw7CpCC,EAAAA,2BAA2B,EAAE,SAAA,2BAAA,GAAW;AACpC,WAAO,KAAA,QAAA,GAAA,IAAA,CAAqB,MAA5B,0BAAO,CAAP;AAz7CgC,GAAA;AA27CpCC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,GAAW;AAC7B,WAAO,KAAA,QAAA,GAAA,IAAA,CAAqB,MAA5B,kBAAO,CAAP;AA57CgC,GAAA;AA87CpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,CAAA,KAAA,EAAA,OAAA,EAAA,IAAA,EAA+B;AAClD,QAAI5S,WAAW,GAAG3E,IAAI,IAAI,IAAA,IAAA,CAAS,KAAA,MAAA,CAAnC,aAAmC,CAAT,CAA1B;AACA,QAAI+E,YAAY,GAAG,KAAA,MAAA,CAAnB,cAAmB,CAAnB;AACA,QAAIC,UAAU,GAAG,KAAA,MAAA,CAAjB,YAAiB,CAAjB;;AACA,QAAIwS,KAAK,GAAT,YAAA,EAA0B;AACtBA,MAAAA,KAAK,GAALA,YAAAA;AACH;;AACD,QAAIA,KAAK,IAAT,UAAA,EAAyB;AACrBA,MAAAA,KAAK,GAAGxS,UAAU,GAAlBwS,CAAAA;AACH;;AACD7S,IAAAA,WAAW,CAAXA,QAAAA,CAAAA,KAAAA,EAAAA,OAAAA,EAAAA,CAAAA,EAAAA,CAAAA;AACA,WAAO,KAAA,oBAAA,CAAP,WAAO,CAAP;AAz8CgC,GAAA;AA28CpC8S,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,eAAA,EAAA,UAAA,EAAA,KAAA,EAA6C;AAC3D,QAAIC,KAAK,GAAG,KAAZ,gBAAY,EAAZ;AACA,QAAI5L,IAAI,GAAG,KAAA,WAAA,CAAX,KAAW,CAAX;AACA,QAAIoF,GAAG,GAAG,IAAI,CAAJ,SAAA,CAAe;AACrBmE,MAAAA,QAAQ,EAAEuB,eAAe,CADJ,QAAA;AAErBnV,MAAAA,SAAS,EAAEmV,eAAe,CAFL,SAAA;AAGrB9S,MAAAA,UAAU,EAAEA;AAHS,KAAf,CAAV;AAKA4T,IAAAA,KAAK,CAALA,GAAK,CAALA,GAAAA,IAAAA;AAn9CgC,GAAA;AAq9CpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,CAAA,WAAA,EAAA,QAAA,EAAgC;AACnD,QAAIzG,GAAG,GAAG,IAAI,CAAJ,SAAA,CAAe;AACrBmE,MAAAA,QAAQ,EAAEuC,WAAW,CADA,QAAA;AAErBnW,MAAAA,SAAS,EAAEmW,WAAW,CAFD,SAAA;AAGrB9T,MAAAA,UAAU,EAAE8T,WAAW,CAAC9T;AAHH,KAAf,CAAV;AAKA,QAAI+T,QAAQ,GAAG,IAAI,CAAJ,SAAA,CAAe;AAC1B3O,MAAAA,GAAG,EAAE4O,QAAQ,CADa,GAAA;AAE1B3O,MAAAA,IAAI,EAAE2O,QAAQ,CAAC3O;AAFW,KAAf,CAAf;AAIA,QAAIuO,KAAK,GAAG,KAAZ,gBAAY,EAAZ;;AACA,QAAIA,KAAK,CAAT,GAAS,CAAT,EAAgB;AACZA,MAAAA,KAAK,CAALA,QAAK,CAALA,GAAkBA,KAAK,CAAvBA,GAAuB,CAAvBA;AACH;AAl+C+B,GAAA;AAo+CpCK,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,GAAA,EAAc;AAC5B,QAAI,CAAC,KAAL,MAAA,EAAkB;AACd,WAAA,MAAA,GAAA,EAAA;AACH;;AACD,WAAO7G,GAAG,GAAG,KAAA,MAAA,CAAH,GAAG,CAAH,GAAsB,KAAhC,MAAA;AAx+CgC,GAAA;AA0+CpC8G,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,GAAW;AAC5B,WAAO,KAAP,MAAA;AA3+CgC,GAAA;AA6+CpCC,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,GAAW;AAC/B,WAAO,KAAP,2BAAA;AACA,WAAO,KAAP,mBAAA;AA/+CgC,GAAA;AAi/CpCC,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,GAAW;AACzB,WAAA,IAAA;AAl/CgC,GAAA;AAo/CpCC,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAA,KAAA;AAr/CgC,GAAA;AAu/CpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,QAAInV,aAAa,GAAG,KAApB,mBAAoB,EAApB;;AACA,QAAIP,MAAM,GAAV,EAAA;;AACA,QAAIO,aAAa,CAAbA,MAAAA,GAAJ,CAAA,EAA8B;AAC1BP,MAAAA,MAAM,GAAG,KAAA,qBAAA,CAATA,aAAS,CAATA;AADJ,KAAA,MAEO;AACH,UAAIoJ,IAAI,GAAG,KAAA,WAAA,CAAX,aAAW,CAAX;AACAA,MAAAA,IAAI,IAAIpJ,MAAM,CAANA,IAAAA,CAARoJ,IAAQpJ,CAARoJ;AACH;;AACD,WAAA,MAAA;AAhgDgC,GAAA;AAkgDpCuM,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,CAAA,MAAA,EAAiB;AACpC,QAAIvM,IAAI,GAAR,EAAA;;AACA,SAAK,IAAI7D,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAGxE,MAAM,CAA1B,MAAA,EAAmCwE,CAAnC,EAAA,EAAwC;AACpC6D,MAAAA,IAAI,CAAJA,IAAAA,CAAU9Q,SAAS,CAATA,IAAAA,CAAeyI,MAAM,CAArBzI,CAAqB,CAArBA,EAAV8Q,SAAU9Q,CAAV8Q;AACH;;AACD,WAAA,IAAA;AAvgDgC,GAAA;AAygDpCiF,EAAAA,WAAW,EAAE,SAAA,WAAA,CAAA,KAAA,EAAgB;AACzB,QAAIjF,IAAI,GAAGhL,KAAK,CAALA,CAAK,CAALA,GAAW9F,SAAS,CAATA,IAAAA,CAAe8F,KAAK,CAApB9F,CAAoB,CAApBA,EAAX8F,SAAW9F,CAAX8F,GAAiD,KAA5D,CAAA;AACA,WAAOzF,MAAM,CAAA,IAAA,EAAA,EAAA,EAAb,IAAa,CAAb;AA3gDgC,GAAA;AA6gDpCid,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,CAAA,UAAA,EAAqB;AACpCxU,IAAAA,UAAU,GAAG,KAAA,MAAA,CAAA,aAAA,IAA6B,KAAA,cAAA,KAA7B,CAAA,GAAbA,UAAAA;AACA,WAAO,KAAA,gBAAA,CAAA,gBAAA,CAAP,UAAO,CAAP;AA/gDgC,GAAA;AAihDpCyU,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,CAAA,IAAA,EAAA,UAAA,EAAA,WAAA,EAAwC;AAC1DzU,IAAAA,UAAU,GAAGA,UAAU,IAAvBA,CAAAA;AACA,QAAIyI,KAAK,GAAG,KAAA,kBAAA,CAAA,IAAA,EAAZ,WAAY,CAAZ;;AACA,QAAIuK,QAAQ,GAAG,KAAA,uBAAA,CAAA,KAAA,EAAA,UAAA,EAAf,WAAe,CAAf;;AACA,QAAI0B,KAAK,GAAG,KAAA,gBAAA,CAAsBC,WAAW,GAAA,CAAA,GAAO,KAAA,YAAA,CAAxC,IAAwC,CAAxC,EAAZ,WAAY,CAAZ;;AACA,QAAIC,cAAc,GAAG,KAAA,iBAAA,CAAA,UAAA,EAArB,IAAqB,CAArB;;AACA,QAAI,CAAJ,QAAA,EAAe;AACX,YAAMzc,MAAM,CAANA,KAAAA,CAAN,OAAMA,CAAN;AACH;;AACD,QAAI+P,WAAW,GAAG;AACd2M,MAAAA,YAAY,EAAE7B,QAAQ,CAARA,IAAAA,GAAgB0B,KAAK,CADrB,YAAA;AAEdtP,MAAAA,GAAG,EAAE4N,QAAQ,CAARA,GAAAA,GAAe0B,KAAK,CAFX,GAAA;AAGdrP,MAAAA,IAAI,EAAE2N,QAAQ,CAARA,IAAAA,GAAgB0B,KAAK,CAHb,IAAA;AAIdnD,MAAAA,QAAQ,EAAEyB,QAAQ,CAJJ,QAAA;AAKdrV,MAAAA,SAAS,EAAEqV,QAAQ,CALL,SAAA;AAMd8B,MAAAA,IAAI,EANU,cAAA;AAOdC,MAAAA,IAAI,EAAE,KAAA,cAAA,CAPQ,UAOR,CAPQ;AAQd/U,MAAAA,UAAU,EAAEA;AARE,KAAlB;AAUA,WAAA,WAAA;AApiDgC,GAAA;AAsiDpCgV,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,UAAA,EAAqB;AACjC,WAAO,KAAA,gBAAA,CAAA,cAAA,CAAP,UAAO,CAAP;AAviDgC,GAAA;AAyiDpCC,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,CAAA,UAAA,EAAqB;AAC1C,WAAO,KAAA,gBAAA,CAAA,uBAAA,CAAP,UAAO,CAAP;AA1iDgC,GAAA;AA4iDpCC,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,UAAA,EAAqB;AAC/B,WAAO,KAAA,gBAAA,CAAA,YAAA,CAAP,UAAO,CAAP;AA7iDgC,GAAA;AA+iDpCC,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,WAAO,KAAA,MAAA,CAAA,aAAA,KAA8B,KAA9B,6BAA8B,EAA9B,IAAsE,KAAA,cAAA,KAA7E,CAAA;AAhjDgC,GAAA;AAkjDpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,CAAA,IAAA,EAAA,WAAA,EAA4B;AAC5C,QAAIC,YAAY,GAAGV,WAAW,GAAA,KAAA,GAAW,KAAzC,YAAyC,EAAzC;;AACA,QAAIW,aAAa,GAAG,KAAA,mBAAA,CAAA,IAAA,EAApB,WAAoB,CAApB;;AACA,QAAI7M,KAAK,GAAGtI,IAAI,CAAJA,KAAAA,CAAWmV,aAAa,GAApC,YAAYnV,CAAZ;;AACA,QAAA,WAAA,EAAiB;AACbsI,MAAAA,KAAK,GAAG,KAAA,YAAA,CAARA,KAAQ,CAARA;AACH;;AACD,QAAIA,KAAK,GAAT,CAAA,EAAe;AACXA,MAAAA,KAAK,GAALA,CAAAA;AACH;;AACD,WAAA,KAAA;AA5jDgC,GAAA;AA8jDpC8M,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,SAAA,EAAA,QAAA,EAA8B;AAC5C,WAAO;AACHnQ,MAAAA,GAAG,EAAEoQ,SAAS,GAAG,KADd,aACc,EADd;AAEHnQ,MAAAA,IAAI,EAFD,CAAA;AAGHwP,MAAAA,YAAY,EAAE;AAHX,KAAP;AA/jDgC,GAAA;AAqkDpCY,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,IAAA,EAAe;AACzB,QAAIC,YAAY,GAAG,KAAnB,eAAmB,EAAnB;AACA,QAAIC,eAAe,GAAG,IAAA,IAAA,CAAtB,IAAsB,CAAtB;AACA,QAAIC,iBAAiB,GAAG,IAAA,IAAA,CAAS,IAAA,IAAA,CAAA,IAAA,EAAA,QAAA,CAAwB,KAAA,MAAA,CAAxB,YAAwB,CAAxB,EAAA,CAAA,EAAjC,CAAiC,CAAT,CAAxB;;AACA,QAAI1Z,IAAI,CAAJA,OAAAA,MAAkB0Z,iBAAiB,CAAvC,OAAsBA,EAAtB,EAAmD;AAC/CD,MAAAA,eAAe,CAAfA,QAAAA,CAAyB,KAAA,MAAA,CAAzBA,cAAyB,CAAzBA,EAAAA,CAAAA,EAAAA,CAAAA,EAAAA,CAAAA;AACH;;AACD,QAAIE,eAAe,GAAG3Z,IAAI,CAA1B,OAAsBA,EAAtB;AACA,QAAI4Z,mBAAmB,GAAGH,eAAe,CAAzC,OAA0BA,EAA1B;;AACA,QAAII,OAAO,GAAG,KAAA,cAAA,CAAd,OAAc,EAAd;;AACA,WAAOF,eAAe,GAAfA,OAAAA,GAA4B,CAACA,eAAe,GAAhB,mBAAA,IAAA,YAAA,GAA5BA,YAAAA,GAAP,CAAA;AA/kDgC,GAAA;AAilDpCG,EAAAA,2BAA2B,EAAE,SAAA,2BAAA,CAAA,IAAA,EAAA,oBAAA,EAAA,WAAA,EAAkD;AAC3E,QAAI9C,OAAO,GAAG,KAAA,gBAAA,CAAd,oBAAc,CAAd;;AACA,QAAItU,MAAM,GAAV,EAAA;;AACA,QAAIsU,OAAO,CAAX,MAAA,EAAoB;AAChB,WAAK,IAAI/O,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAG+O,OAAO,CAA3B,MAAA,EAAoC/O,CAApC,EAAA,EAAyC;AACrCvF,QAAAA,MAAM,CAANA,IAAAA,CAAY,KAAA,oBAAA,CAAA,IAAA,EAAgCsU,OAAO,CAAvC,CAAuC,CAAvC,EAAZtU,WAAY,CAAZA;AACH;AAHL,KAAA,MAIO;AACHA,MAAAA,MAAM,CAANA,IAAAA,CAAY,KAAA,oBAAA,CAAA,IAAA,EAAA,CAAA,EAAZA,WAAY,CAAZA;AACH;;AACD,WAAA,MAAA;AA3lDgC,GAAA;AA6lDpCqX,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,QAAIC,cAAc,GAAG,KAArB,iBAAqB,EAArB;;AACA,QAAItY,IAAI,GAAGsY,cAAc,CAAzB,MAAWA,EAAX;AACA,QAAI3E,QAAQ,GAAG3T,IAAI,CAAnB,KAAeA,EAAf;AACA,WAAO2T,QAAQ,GAAG3T,IAAI,CAAJA,IAAAA,CAAAA,IAAAA,EAAX2T,MAAAA,GAAoC2E,cAAc,CAAzD,KAA2CA,EAA3C;AAjmDgC,GAAA;AAmmDpCC,EAAAA,sBAAsB,EAAE,SAAA,sBAAA,GAAW;AAC/B,QAAIxZ,QAAQ,GAAG,KAAA,WAAA,CAAiB,KAAhC,iBAAgC,EAAjB,CAAf;AACA,WAAO;AACHT,MAAAA,IAAI,EAAES,QAAQ,CADX,SAAA;AAEHsL,MAAAA,MAAM,EAAEtL,QAAQ,CAFb,MAAA;AAGH2E,MAAAA,MAAM,EAAE3E,QAAQ,CAAC2E;AAHd,KAAP;AArmDgC,GAAA;AA2mDpC8U,EAAAA,YAAY,EAAE,SAAA,YAAA,GAAW;AACrB,WAAO,CAAC,KAAD,gBAAC,EAAD,EAA0B,KAAjC,cAAiC,EAA1B,CAAP;AA5mDgC,GAAA;AA8mDpCC,EAAAA,YAAY,EAAE,SAAA,YAAA,GAAW;AACrB,QAAIC,IAAI,GAAG,KAAA,SAAA,GAAA,KAAA,GAAA,GAAA,CAAX,CAAW,CAAX;;AACA,WAAOA,IAAI,IAAIA,IAAI,CAAJA,qBAAAA,GAAf,KAAA;AAhnDgC,GAAA;AAknDpCC,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,WAAA,yBAAA;AAnnDgC,GAAA;AAqnDpCC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,UAAA,EAAA,UAAA,EAAA,SAAA,EAA4C;AAC7D,QAAIxW,UAAU,GAAd,CAAA,EAAoB;AAChB,aAAA,CAAA;AACH;;AACD,QAAIpC,IAAI,GAAG,KAAA,QAAA,GAAA,IAAA,CAAqB,MAAM,KAA3B,qBAA2B,EAA3B,EAAA,EAAA,CAAX,CAAW,CAAX;AACA,QAAIkJ,KAAK,GAAT,CAAA;AACA,QAAInH,MAAM,GAAG/B,IAAI,CAAJA,IAAAA,CAAU,MAAvB,qBAAaA,CAAb;AACA,QAAI6Y,cAAc,GAAG,KAAA,aAAA,KAArB,UAAA;AACA3J,IAAAA,SAAS,GAAGA,SAAS,IAAI,KAAzBA,aAAyB,EAAzBA;;AACA,QAAI,CAAC1V,SAAS,CAATA,SAAAA,CAAL,UAAKA,CAAL,EAAsC;AAClCsf,MAAAA,UAAU,GAAVA,cAAAA;AACH;;AACD,SAAK,IAAIvS,CAAC,GAAV,UAAA,EAAyBA,CAAC,GAAGsS,cAAc,GAA3C,SAAA,EAAyDtS,CAAzD,EAAA,EAA8D;AAC1D2C,MAAAA,KAAK,IAAIhQ,CAAC,CAADA,MAAC,CAADA,CAAAA,EAAAA,CAAAA,CAAAA,EAAAA,GAAAA,CAAAA,CAAAA,EAAAA,qBAAAA,GAATgQ,KAAAA;AACH;;AACD,WAAOA,KAAK,IAAI2P,cAAc,GAAdA,SAAAA,GAAhB,UAAY,CAAZ;AApoDgC,GAAA;AAsoDpCE,EAAAA,aAAa,EAAE,SAAA,aAAA,GAAW;AACtB,QAAIL,IAAI,GAAG,KAAA,SAAA,GAAA,KAAA,GAAA,GAAA,CAAX,CAAW,CAAX;;AACA,WAAOA,IAAI,IAAIA,IAAI,CAAJA,qBAAAA,GAAf,MAAA;AAxoDgC,GAAA;AA0oDpCM,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,QAAIN,IAAI,GAAG,KAAA,SAAA,CAAA,IAAA,EAAA,KAAA,GAAA,GAAA,CAAX,CAAW,CAAX;;AACA,WAAO,KAAA,MAAA,CAAA,iBAAA,IAAiCA,IAAI,IAAIA,IAAI,CAAJA,qBAAAA,GAARA,MAAAA,IAAjC,CAAA,GAAP,CAAA;AA5oDgC,GAAA;AA8oDpCO,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,WAAO,KAAA,gBAAA,CAAP,eAAO,EAAP;AA/oDgC,GAAA;AAipDpCC,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,QAAI,CAAC,KAAL,mBAAA,EAA+B;AAC3B,UAAIC,KAAK,GAAG,KAAA,MAAA,CAAZ,YAAY,CAAZ;AACA,WAAA,mBAAA,GAAA,EAAA;;AACA,WAAA,WAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA,GAAA,IAAA,CAAyC,kBAAkB,KAAlB,aAAkB,EAAlB,GAAzC,IAAA,EAAA,IAAA,CAA6F,UAAA,CAAA,EAAA,IAAA,EAAkB;AAC3G,YAAIC,WAAW,GAAGlgB,CAAC,CAADA,IAAC,CAADA,CAAAA,QAAAA,GAAlB,IAAA;;AACA,YAAI,CAAJ,KAAA,EAAY;AACRkgB,UAAAA,WAAW,IAAIlgB,CAAC,CAADA,IAAC,CAADA,CAAAA,GAAAA,CAAAA,CAAAA,EAAAA,qBAAAA,GAAfkgB,KAAAA;AACH;;AACD,aAAA,mBAAA,CAAA,IAAA,CAA8B7W,IAAI,CAAJA,KAAAA,CAA9B,WAA8BA,CAA9B;AALyF,OAAA,CAAA,IAAA,CAA7F,IAA6F,CAA7F;AAOH;;AACD,WAAO,KAAP,mBAAA;AA7pDgC,GAAA;AA+pDpC8W,EAAAA,6BAA6B,EAAE,SAAA,6BAAA,GAAW;AACtC,QAAI,CAAC,KAAL,2BAAA,EAAuC;AACnC,UAAI3N,IAAI,GAAR,IAAA;AACA,WAAA,2BAAA,GAAA,EAAA;;AACA,UAAI4N,IAAI,GAAG,KAAX,YAAW,EAAX;;AACA,WAAA,WAAA,CAAA,IAAA,CAAsB,kBAAA,IAAA,GAAtB,IAAA,EAAA,IAAA,CAA0D,UAAA,CAAA,EAAA,GAAA,EAAiB;AACvE,YAAIF,WAAW,GAAGlgB,CAAC,CAADA,GAAC,CAADA,CAAAA,QAAAA,GAAAA,GAAAA,GAAwBA,CAAC,CAADA,GAAC,CAADA,CAAAA,GAAAA,CAAAA,CAAAA,EAAAA,qBAAAA,GAA1C,MAAA;;AACAwS,QAAAA,IAAI,CAAJA,2BAAAA,CAAAA,IAAAA,CAAsCnJ,IAAI,CAAJA,KAAAA,CAAtCmJ,WAAsCnJ,CAAtCmJ;AAFJ,OAAA;AAIH;;AACD,WAAO,KAAP,2BAAA;AAzqDgC,GAAA;AA2qDpC6N,EAAAA,iBAAiB,EAAE,SAAA,iBAAA,GAAW;AAC1B,WAAO,KAAP,gBAAA;AA5qDgC,GAAA;AA8qDpCC,EAAAA,kBAAkB,EAAE,SAAA,kBAAA,GAAW;AAC3B,WAAO,KAAP,iBAAA;AA/qDgC,GAAA;AAirDpCC,EAAAA,yBAAyB,EAAE,SAAA,yBAAA,CAAA,WAAA,EAAA,MAAA,EAA8B;AACrD,QAAIvK,SAAS,GAAG,KAAA,kBAAA,CAAwB,KAAxC,cAAwC,EAAxB,CAAhB;;AACA,QAAInG,SAAS,GAAGxG,IAAI,CAAJA,KAAAA,CAAW,KAAA,kBAAA,KAA3B,SAAgBA,CAAhB;AACA,QAAIyP,UAAU,GAAG3H,MAAM,GAAG,KAAH,eAAG,EAAH,GAA4B,KAAnD,aAAmD,EAAnD;AACA,QAAIqP,UAAU,GAAG,KAAA,MAAA,MAAiB,KAAA,MAAA,CAAjB,uBAAiB,CAAjB,GAAA,CAAA,GAA4D,KAA7E,sBAA6E,EAA7E;AACA,QAAIC,QAAQ,GAAGpX,IAAI,CAAJA,KAAAA,CAAWA,IAAI,CAAJA,KAAAA,CAAW+H,WAAW,CAAtB/H,GAAAA,IAA8BA,IAAI,CAAJA,KAAAA,CAAxD,UAAwDA,CAAzCA,CAAf;AACA,QAAIqX,SAAS,GAAGrX,IAAI,CAAJA,KAAAA,CAAW,CAAC+H,WAAW,CAAXA,IAAAA,GAAAA,CAAAA,GAAD,UAAA,IAA3B,SAAgB/H,CAAhB;;AACA,QAAI,KAAJ,MAAI,EAAJ,EAAmB;AACfqX,MAAAA,SAAS,GAAG1K,SAAS,GAATA,SAAAA,GAAZ0K,CAAAA;AACH;;AACD,WAAO1K,SAAS,GAATA,QAAAA,GAAP,SAAA;AA3rDgC,GAAA;AA6rDpC2K,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,GAAW;AACzB,WAAO,KAAP,cAAA;AA9rDgC,GAAA;AAgsDpCC,EAAAA,cAAc,EAAE,SAAA,cAAA,GAAW;AACvB,QAAIC,kBAAkB,GAAG,KAAzB,qBAAyB,EAAzB;AACA,QAAIC,qBAAqB,GAAG,KAAA,oBAAA,CAA5B,kBAA4B,CAA5B;AACA,WAAO,KAAA,gCAAA,CAAA,kBAAA,EAAP,qBAAO,CAAP;AAnsDgC,GAAA;AAqsDpCC,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,CAAA,kBAAA,EAA6B;AAC/C,WAAO,IAAA,IAAA,CAASF,kBAAkB,CAAlBA,OAAAA,KAA+B,KAA/C,eAA+C,EAAxC,CAAP;AAtsDgC,GAAA;AAwsDpCG,EAAAA,gCAAgC,EAAE,SAAA,gCAAA,CAAA,SAAA,EAAA,OAAA,EAA6B;AAC3D,QAAIC,YAAY,GAAG,KAAA,MAAA,CAAA,mBAAA,EAAA,SAAA,EAAA,OAAA,IAAuDpgB,IAAI,CAA3D,QAA2D,CAA3D,IAAnB,CAAA;AACA,QAAIigB,qBAAqB,GAAG,IAAA,IAAA,CAAS/O,OAAO,CAAPA,OAAAA,KAArC,YAA4B,CAA5B;AACA,WAAO,IAAA,IAAA,CAAS+O,qBAAqB,CAArBA,OAAAA,KAAkCjgB,IAAI,CAAtD,QAAsD,CAA/C,CAAP;AA3sDgC,GAAA;AA6sDpCqgB,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,QAAIzG,QAAQ,GAAG,KAAA,YAAA,KAAf,CAAA;;AACA,QAAI5T,SAAS,GAAG,KAAhB,aAAgB,EAAhB;;AACA,QAAI,KAAA,MAAA,CAAA,aAAA,KAA8B,KAAA,cAAA,KAAlC,CAAA,EAA6D;AACzDA,MAAAA,SAAS,GAAGA,SAAS,GAAG,KAAZA,cAAY,EAAZA,GAAZA,CAAAA;AADJ,KAAA,MAEO;AACHA,MAAAA,SAAS,IAATA,CAAAA;AACH;;AACD,WAAO,KAAA,qBAAA,CAAA,QAAA,EAAA,SAAA,EAAP,IAAO,CAAP;AArtDgC,GAAA;AAutDpCsa,EAAAA,eAAe,EAAE,SAAA,eAAA,GAAW;AACxB,WAAO,OAAO,KAAA,MAAA,CAAd,eAAc,CAAd;AAxtDgC,GAAA;AA0tDpCC,EAAAA,mBAAmB,EAAE,SAAA,mBAAA,CAAA,MAAA,EAAiB;AAClC,WAAOjQ,MAAM,GAAGtQ,IAAI,CAAP,KAAO,CAAP,GAAiB,KAA9B,eAA8B,EAA9B;AA3tDgC,GAAA;AA6tDpCwgB,EAAAA,qBAAqB,EAAE,SAAA,qBAAA,GAAW;AAC9B,WAAO,KAAA,MAAA,CAAA,eAAA,IAA+B,KAA/B,kBAA+B,EAA/B,GAAP,OAAA;AA9tDgC,GAAA;AAguDpCC,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,WAAA,EAAsB;AAClC,QAAItL,SAAS,GAAG,KAAhB,aAAgB,EAAhB;;AACA,QAAInN,MAAM,GAAG,KAAb,SAAa,EAAb;;AACA,QAAIgH,SAAS,GAAG,KAAhB,YAAgB,EAAhB;;AACA,QAAI/H,MAAM,GAAG,KAAA,gBAAA,CAAA,oBAAA,CAAA,SAAA,EAAA,MAAA,EAAA,SAAA,EAAb,WAAa,CAAb;;AACA,QAAI,KAAJ,MAAI,EAAJ,EAAmB;AACf,UAAIyZ,WAAW,GAAGzZ,MAAM,CAAxB,IAAA;AACAA,MAAAA,MAAM,CAANA,IAAAA,GAAcA,MAAM,CAANA,KAAAA,GAAe,IAA7BA,SAAAA;AACAA,MAAAA,MAAM,CAANA,KAAAA,GAAeyZ,WAAW,GAAG,IAA7BzZ,SAAAA;AACH;;AACD,WAAA,MAAA;AA1uDgC,GAAA;AA4uDpC0Z,EAAAA,4BAA4B,EAAE,SAAA,4BAAA,GAAW;AACrC,WAAO,KAAA,2BAAA,MAAsC,MAAM,KAAA,aAAA,GAAnD,SAAmD,EAAnD;AA7uDgC,GAAA;AA+uDpCC,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,CAAA,WAAA,EAAA,MAAA,EAA8B;AACpD,QAAInL,GAAG,GAAG,IAAI,CAAJ,SAAA,CAAe;AACrBhI,MAAAA,GAAG,EAAE8C,WAAW,CADK,GAAA;AAErB7C,MAAAA,IAAI,EAAE6C,WAAW,CAAC7C;AAFG,KAAf,CAAV;AAIA,QAAI2C,IAAI,GAAG,KAAA,gBAAA,CAAX,GAAW,CAAX;;AACA,QAAA,IAAA,EAAU;AACN,aAAA,IAAA;AACH;;AACD,QAAIrI,MAAM,GAAG,KAAA,SAAA,CAAb,MAAa,CAAb;;AACA,QAAIhC,SAAS,GAAG,KAAA,yBAAA,CAAA,WAAA,EAAhB,MAAgB,CAAhB;AACA,QAAIX,KAAK,GAAG2C,MAAM,CAANA,EAAAA,CAAZ,SAAYA,CAAZ;AACA,WAAO,KAAA,WAAA,CAAP,KAAO,CAAP;AA3vDgC,GAAA;AA6vDpC6Y,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,GAAW;AACzB,QAAI5Z,MAAM,GAAV,EAAA;AACA,QAAI6Z,WAAW,GAAG,KAAA,aAAA,GAAlB,QAAkB,EAAlB;AACA,QAAI7I,UAAU,GAAG,KAAjB,aAAiB,EAAjB;AACA,QAAI8I,iBAAiB,GAAG,KAAA,sBAAA,KAAxB,UAAA;AACA,QAAIjC,cAAc,GAAGiC,iBAAiB,GAAGD,WAAW,CAAXA,MAAAA,KAAzC,UAAA;AACA7Z,IAAAA,MAAM,CAANA,GAAAA,GAAa;AACT8U,MAAAA,KAAK,EAAEvT,IAAI,CAAJA,KAAAA,CAAWuY,iBAAiB,GAAG,KAAA,MAAA,CAA/BvY,eAA+B,CAA/BA,IAA+D,KAAA,MAAA,CAD7D,cAC6D,CAD7D;AAETwY,MAAAA,OAAO,EAAED,iBAAiB,GAAjBA,CAAAA,GAAAA,EAAAA,GAA6B;AAF7B,KAAb9Z;AAIAA,IAAAA,MAAM,CAANA,MAAAA,GAAgB;AACZ8U,MAAAA,KAAK,EAAEvT,IAAI,CAAJA,KAAAA,CAAWsW,cAAc,GAAG,KAAA,MAAA,CAA5BtW,eAA4B,CAA5BA,IAA4D,KAAA,MAAA,CADvD,cACuD,CADvD;AAEZwY,MAAAA,OAAO,EAAExY,IAAI,CAAJA,KAAAA,CAAAA,cAAAA,IAAAA,CAAAA,GAAAA,EAAAA,GAAsC;AAFnC,KAAhBvB;AAIA,WAAA,MAAA;AA3wDgC,GAAA;AA6wDpCga,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,CAAA,IAAA,EAAe;AACjC1c,IAAAA,IAAI,GAAG,KAAA,MAAA,CAAA,uBAAA,EAAPA,IAAO,CAAPA;AACA,QAAI2c,MAAM,GAAG,KAAb,gBAAa,EAAb;AACA,QAAIC,aAAa,GAAG5c,IAAI,CAAxB,QAAoBA,EAApB;AACA,QAAI6c,gBAAgB,GAAG7c,IAAI,CAA3B,UAAuBA,EAAvB;;AACA,QAAI,KAAA,wBAAA,CAAA,aAAA,EAAA,gBAAA,EAAA,MAAA,EAAJ,IAAI,CAAJ,EAAkF;AAC9E,WAAA,YAAA,CAAA,aAAA,EAAA,gBAAA,EAAA,IAAA;AACH;AApxD+B,GAAA;AAsxDpC8c,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,CAAA,KAAA,EAAA,OAAA,EAAA,MAAA,EAAiC;AACvD,QAAIC,cAAc,GAAlB,KAAA;;AACA,QAAIvF,KAAK,GAAGmF,MAAM,CAANA,GAAAA,CAARnF,KAAAA,IAA4BA,KAAK,GAAGmF,MAAM,CAANA,MAAAA,CAAxC,KAAA,EAA6D;AACzDI,MAAAA,cAAc,GAAdA,IAAAA;AACH;;AACD,QAAIvF,KAAK,KAAKmF,MAAM,CAANA,GAAAA,CAAVnF,KAAAA,IAA8BiF,OAAO,GAAGE,MAAM,CAANA,GAAAA,CAA5C,OAAA,EAAgE;AAC5DI,MAAAA,cAAc,GAAdA,IAAAA;AACH;;AACD,QAAIvF,KAAK,KAAKmF,MAAM,CAANA,MAAAA,CAAVnF,KAAAA,IAAiCiF,OAAO,GAAGE,MAAM,CAANA,GAAAA,CAA/C,OAAA,EAAmE;AAC/DI,MAAAA,cAAc,GAAdA,IAAAA;AACH;;AACD,WAAA,cAAA;AAjyDgC,GAAA;AAmyDpCC,EAAAA,aAAa,EAAE,SAAA,aAAA,CAAA,UAAA,EAAqB;AAChC,QAAIta,MAAM,GAAG,KAAA,aAAA,KAAuB,KAApC,YAAoC,EAApC;AACA,QAAIoU,QAAQ,GAAG,KAAf,qBAAe,EAAf;AACA,QAAImG,eAAe,GAAGnG,QAAQ,CAA9B,UAA8B,CAA9B;;AACA,QAAIA,QAAQ,CAARA,MAAAA,IAAJ,eAAA,EAAwC;AACpC,UAAI,KAAJ,MAAI,EAAJ,EAAmB;AACfpU,QAAAA,MAAM,GAAGua,eAAe,GAAGnG,QAAQ,CAAChT,UAAU,GAA9CpB,CAAmC,CAAnCA;AADJ,OAAA,MAEO;AACH,YAAI,MAAJ,UAAA,EAAsB;AAClBA,UAAAA,MAAM,GAANA,eAAAA;AADJ,SAAA,MAEO;AACHA,UAAAA,MAAM,GAAGua,eAAe,GAAGnG,QAAQ,CAAChT,UAAU,GAA9CpB,CAAmC,CAAnCA;AACH;AACJ;AACJ;;AACD,WAAA,MAAA;AAlzDgC,GAAA;AAozDpCwa,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,GAAW;AACzB,SAAA,QAAA,GAAA,SAAA,CAAA,CAAA;AArzDgC,GAAA;AAuzDpCC,EAAAA,YAAY,EAAE,SAAA,YAAA,CAAA,KAAA,EAAA,OAAA,EAAA,IAAA,EAA+B;AACzC,QAAIC,GAAG,GAAG,KAAV,gBAAU,EAAV;AACA,QAAIC,GAAG,GAAG,KAAV,cAAU,EAAV;;AACA,QAAIrd,IAAI,GAAJA,GAAAA,IAAcA,IAAI,GAAtB,GAAA,EAA8B;AAC1B/D,MAAAA,MAAM,CAANA,GAAAA,CAAAA,OAAAA,EAAAA,IAAAA;AACA;AACH;;AACD,QAAI+P,WAAW,GAAG,KAAA,qBAAA,CAAA,KAAA,EAAA,OAAA,EAAlB,IAAkB,CAAlB;;AACA,QAAIsR,UAAU,GAAG,KAAjB,aAAiB,EAAjB;AACAA,IAAAA,UAAU,CAAVA,QAAAA,CAAoB;AAChBpU,MAAAA,GAAG,EAAE8C,WAAW,CAAXA,GAAAA,GAAkBsR,UAAU,CADjB,SACOA,EADP;AAEhBnU,MAAAA,IAAI,EAAE;AAFU,KAApBmU;AAh0DgC,GAAA;AAq0DpCC,EAAAA,uBAAuB,EAAE,SAAA,uBAAA,CAAA,UAAA,EAAA,QAAA,EAA+B;AACpD,QAAI7a,MAAM,GAAV,CAAA;AACA,SAAA,QAAA,GAAA,IAAA,CAAqB,MAAM,KAA3B,qBAA2B,EAA3B,EAAA,KAAA,GAAA,IAAA,CAAsE,MAAtE,qBAAA,EAAA,IAAA,CAAwG,UAAA,KAAA,EAAgB;AACpH,UAAI6J,KAAK,GAALA,UAAAA,IAAsBA,KAAK,GAA/B,QAAA,EAA4C;AACxC,eAAA,IAAA;AACH;;AACD7J,MAAAA,MAAM,IAAI9H,CAAC,CAADA,IAAC,CAADA,CAAAA,GAAAA,CAAAA,CAAAA,EAAAA,qBAAAA,GAAV8H,KAAAA;AAJJ,KAAA;AAMA,WAAA,MAAA;AA70DgC,GAAA;AA+0DpC8a,EAAAA,wBAAwB,EAAE,SAAA,wBAAA,GAAW;AACjC,WAAA,KAAA;AAh1DgC,GAAA;AAk1DpCC,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,SAAA,EAAoB;AAClC,QAAI,CAAC,KAAD,YAAA,IAAJ,SAAA,EAAqC;AACjC,WAAA,YAAA,GAAoB,IAAA,uBAAA,CAApB,SAAoB,CAApB;AACA,WAAA,YAAA,CAAA,KAAA,CAAwB,KAAxB,WAAwB,EAAxB;AACA,WAAA,YAAA,CAAA,KAAA,CAAwB,KAAxB,kBAAwB,EAAxB;AACA,WAAA,YAAA,CAAA,KAAA,CAAwB,KAAxB,aAAA;AACH;;AACD,SAAA,mBAAA;AAz1DgC,GAAA;AA21DpCC,EAAAA,gCAAgC,EAAE,SAAA,gCAAA,GAAW;AACzC,WAAO,KAAP,mCAAO,EAAP;AA51DgC,GAAA;AA81DpCC,EAAAA,mCAAmC,EAAE,SAAA,mCAAA,GAAW;AAC5C,WAAA,IAAA;AA/1DgC,GAAA;AAi2DpCC,EAAAA,cAAc,EAAE,SAAA,cAAA,CAAA,IAAA,EAAe;AAC3B,WAAO7d,aAAa,CAApB,IAAoB,CAApB;AAl2DgC,GAAA;AAo2DpC8d,EAAAA,oBAAoB,EAAE,SAAA,oBAAA,CAAA,IAAA,EAAe;AACjC,WAAO9d,aAAa,CAAbA,IAAa,CAAbA,GAAAA,GAAAA,GAA4BvE,gBAAgB,CAAhBA,MAAAA,CAAAA,IAAAA,EAAnC,KAAmCA,CAAnC;AACH;AAt2DmC,CAAf,EAAA,OAAA,CAAzB,cAAyB,CAAzB;AAw2DAsiB,MAAM,CAANA,OAAAA,GAAAA,kBAAAA","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.work_space.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../../core/renderer\");\r\nvar domAdapter = require(\"../../../core/dom_adapter\");\r\nvar eventsEngine = require(\"../../../events/core/events_engine\");\r\nvar dataUtils = require(\"../../../core/element_data\");\r\nvar dateUtils = require(\"../../../core/utils/date\");\r\nvar typeUtils = require(\"../../../core/utils/type\");\r\nvar windowUtils = require(\"../../../core/utils/window\");\r\nvar getPublicElement = require(\"../../../core/utils/dom\").getPublicElement;\r\nvar extend = require(\"../../../core/utils/extend\").extend;\r\nvar each = require(\"../../../core/utils/iterator\").each;\r\nvar messageLocalization = require(\"../../../localization/message\");\r\nvar dateLocalization = require(\"../../../localization/date\");\r\nvar toMs = dateUtils.dateToMilliseconds;\r\nvar Widget = require(\"../../widget/ui.widget\");\r\nvar abstract = Widget.abstract;\r\nvar noop = require(\"../../../core/utils/common\").noop;\r\nvar isDefined = require(\"../../../core/utils/type\").isDefined;\r\nvar publisherMixin = require(\"../ui.scheduler.publisher_mixin\");\r\nvar eventUtils = require(\"../../../events/utils\");\r\nvar pointerEvents = require(\"../../../events/pointer\");\r\nvar errors = require(\"../../widget/ui.errors\");\r\nvar clickEvent = require(\"../../../events/click\");\r\nvar contextMenuEvent = require(\"../../../events/contextmenu\");\r\nvar dragEvents = require(\"../../../events/drag\");\r\nvar Scrollable = require(\"../../scroll_view/ui.scrollable\");\r\nvar HorizontalGroupedStrategy = require(\"./ui.scheduler.work_space.grouped.strategy.horizontal\");\r\nvar VerticalGroupedStrategy = require(\"./ui.scheduler.work_space.grouped.strategy.vertical\");\r\nvar tableCreator = require(\"../ui.scheduler.table_creator\");\r\nvar VerticalShader = require(\"../shaders/ui.scheduler.current_time_shader.vertical\");\r\nvar AppointmentDragBehavior = require(\"../appointmentDragBehavior\");\r\nvar FIXED_CONTAINER_CLASS = require(\"../constants\").FIXED_CONTAINER_CLASS;\r\nvar COMPONENT_CLASS = \"dx-scheduler-work-space\";\r\nvar GROUPED_WORKSPACE_CLASS = \"dx-scheduler-work-space-grouped\";\r\nvar VERTICAL_GROUPED_WORKSPACE_CLASS = \"dx-scheduler-work-space-vertical-grouped\";\r\nvar WORKSPACE_VERTICAL_GROUP_TABLE_CLASS = \"dx-scheduler-work-space-vertical-group-table\";\r\nvar WORKSPACE_WITH_BOTH_SCROLLS_CLASS = \"dx-scheduler-work-space-both-scrollbar\";\r\nvar WORKSPACE_WITH_COUNT_CLASS = \"dx-scheduler-work-space-count\";\r\nvar WORKSPACE_WITH_GROUP_BY_DATE_CLASS = \"dx-scheduler-work-space-group-by-date\";\r\nvar WORKSPACE_WITH_ODD_CELLS_CLASS = \"dx-scheduler-work-space-odd-cells\";\r\nvar WORKSPACE_WITH_OVERLAPPING_CLASS = \"dx-scheduler-work-space-overlapping\";\r\nvar TIME_PANEL_CLASS = \"dx-scheduler-time-panel\";\r\nvar TIME_PANEL_CELL_CLASS = \"dx-scheduler-time-panel-cell\";\r\nvar TIME_PANEL_ROW_CLASS = \"dx-scheduler-time-panel-row\";\r\nvar ALL_DAY_PANEL_CLASS = \"dx-scheduler-all-day-panel\";\r\nvar ALL_DAY_TABLE_CLASS = \"dx-scheduler-all-day-table\";\r\nvar ALL_DAY_CONTAINER_CLASS = \"dx-scheduler-all-day-appointments\";\r\nvar ALL_DAY_TITLE_CLASS = \"dx-scheduler-all-day-title\";\r\nvar ALL_DAY_TITLE_HIDDEN_CLASS = \"dx-scheduler-all-day-title-hidden\";\r\nvar ALL_DAY_TABLE_CELL_CLASS = \"dx-scheduler-all-day-table-cell\";\r\nvar ALL_DAY_TABLE_ROW_CLASS = \"dx-scheduler-all-day-table-row\";\r\nvar WORKSPACE_WITH_ALL_DAY_CLASS = \"dx-scheduler-work-space-all-day\";\r\nvar WORKSPACE_WITH_COLLAPSED_ALL_DAY_CLASS = \"dx-scheduler-work-space-all-day-collapsed\";\r\nvar WORKSPACE_WITH_MOUSE_SELECTION_CLASS = \"dx-scheduler-work-space-mouse-selection\";\r\nvar HORIZONTAL_SIZES_CLASS = \"dx-scheduler-cell-sizes-horizontal\";\r\nvar VERTICAL_SIZES_CLASS = \"dx-scheduler-cell-sizes-vertical\";\r\nvar HEADER_PANEL_CLASS = \"dx-scheduler-header-panel\";\r\nvar HEADER_PANEL_CELL_CLASS = \"dx-scheduler-header-panel-cell\";\r\nvar HEADER_ROW_CLASS = \"dx-scheduler-header-row\";\r\nvar GROUP_ROW_CLASS = \"dx-scheduler-group-row\";\r\nvar GROUP_HEADER_CLASS = \"dx-scheduler-group-header\";\r\nvar GROUP_HEADER_CONTENT_CLASS = \"dx-scheduler-group-header-content\";\r\nvar DATE_TABLE_CLASS = \"dx-scheduler-date-table\";\r\nvar DATE_TABLE_CELL_CLASS = \"dx-scheduler-date-table-cell\";\r\nvar DATE_TABLE_ROW_CLASS = \"dx-scheduler-date-table-row\";\r\nvar DATE_TABLE_FOCUSED_CELL_CLASS = \"dx-scheduler-focused-cell\";\r\nvar DATE_TABLE_DROPPABLE_CELL_CLASS = \"dx-scheduler-date-table-droppable-cell\";\r\nvar SCHEDULER_HEADER_SCROLLABLE_CLASS = \"dx-scheduler-header-scrollable\";\r\nvar SCHEDULER_SIDEBAR_SCROLLABLE_CLASS = \"dx-scheduler-sidebar-scrollable\";\r\nvar SCHEDULER_DATE_TABLE_SCROLLABLE_CLASS = \"dx-scheduler-date-table-scrollable\";\r\nvar SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME = eventUtils.addNamespace(pointerEvents.down, \"dxSchedulerWorkSpace\");\r\nvar SCHEDULER_CELL_DXDRAGENTER_EVENT_NAME = eventUtils.addNamespace(dragEvents.enter, \"dxSchedulerDateTable\");\r\nvar SCHEDULER_CELL_DXDROP_EVENT_NAME = eventUtils.addNamespace(dragEvents.drop, \"dxSchedulerDateTable\");\r\nvar SCHEDULER_CELL_DXCLICK_EVENT_NAME = eventUtils.addNamespace(clickEvent.name, \"dxSchedulerDateTable\");\r\nvar SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME = eventUtils.addNamespace(pointerEvents.down, \"dxSchedulerDateTable\");\r\nvar SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME = eventUtils.addNamespace(pointerEvents.up, \"dxSchedulerDateTable\");\r\nvar SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME = eventUtils.addNamespace(pointerEvents.move, \"dxSchedulerDateTable\");\r\nvar CELL_DATA = \"dxCellData\";\r\nvar DATE_TABLE_CELL_BORDER = 1;\r\nvar DATE_TABLE_MIN_CELL_WIDTH = 75;\r\nvar DAY_MS = toMs(\"day\");\r\nvar HOUR_MS = toMs(\"hour\");\r\nvar SCHEDULER_DRAG_AND_DROP_SELECTOR = \".\".concat(DATE_TABLE_CLASS, \" td, .\").concat(ALL_DAY_TABLE_CLASS, \" td\");\r\nvar formatWeekday = function(date) {\r\n    return dateLocalization.getDayNames(\"abbreviated\")[date.getDay()]\r\n};\r\nvar SchedulerWorkSpace = Widget.inherit({\r\n    _supportedKeys: function() {\r\n        var clickHandler = function(e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            if (this._focusedCells && this._focusedCells.length) {\r\n                var $itemElement = $(this.option(\"focusedElement\"));\r\n                var $cellElement = $itemElement.length ? $itemElement : this._focusedCells;\r\n                e.target = this._focusedCells;\r\n                this._showPopup = true;\r\n                this._cellClickAction({\r\n                    event: e,\r\n                    cellElement: $(this._focusedCells),\r\n                    cellData: this.getCellData($cellElement)\r\n                })\r\n            }\r\n        };\r\n        var arrowPressHandler = function(e, cell) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            this._moveToCell(cell, e.shiftKey)\r\n        };\r\n        return extend(this.callBase(), {\r\n            enter: clickHandler,\r\n            space: clickHandler,\r\n            downArrow: function(e) {\r\n                var $cell = this._getCellFromNextRow(\"next\", e.shiftKey);\r\n                arrowPressHandler.call(this, e, $cell)\r\n            },\r\n            upArrow: function(e) {\r\n                var $cell = this._getCellFromNextRow(\"prev\", e.shiftKey);\r\n                arrowPressHandler.call(this, e, $cell)\r\n            },\r\n            rightArrow: function(e) {\r\n                var $rightCell = this._getRightCell(e.shiftKey);\r\n                arrowPressHandler.call(this, e, $rightCell)\r\n            },\r\n            leftArrow: function(e) {\r\n                var $leftCell = this._getLeftCell(e.shiftKey);\r\n                arrowPressHandler.call(this, e, $leftCell)\r\n            }\r\n        })\r\n    },\r\n    _isRTL: function() {\r\n        return this.option(\"rtlEnabled\")\r\n    },\r\n    _getFocusedCell: function() {\r\n        return this._$focusedCell || this._$dateTable.find(\".\" + DATE_TABLE_CELL_CLASS).eq(0)\r\n    },\r\n    _getAllFocusedCells: function() {\r\n        return this._focusedCells || this._$dateTable.find(\".\" + DATE_TABLE_CELL_CLASS).eq(0)\r\n    },\r\n    _getCellFromNextRow: function(direction) {\r\n        var $currentCell = this._$focusedCell;\r\n        if (isDefined($currentCell)) {\r\n            var cellIndex = $currentCell.index();\r\n            var $row = $currentCell.parent();\r\n            var $cell = $row[direction]().children().eq(cellIndex);\r\n            $cell = this._checkForViewBounds($cell);\r\n            return $cell\r\n        }\r\n    },\r\n    _checkForViewBounds: function($item) {\r\n        if (!$item.length) {\r\n            $item = this._$focusedCell\r\n        }\r\n        return $item\r\n    },\r\n    _getRightCell: function(isMultiSelection) {\r\n        if (!isDefined(this._$focusedCell)) {\r\n            return\r\n        }\r\n        var $rightCell;\r\n        var $focusedCell = this._$focusedCell;\r\n        var groupCount = this._getGroupCount();\r\n        var rowCellCount = isMultiSelection ? this._getCellCount() : this._getTotalCellCount(groupCount);\r\n        var lastIndexInRow = rowCellCount - 1;\r\n        var edgeCellIndex = this._isRTL() ? 0 : lastIndexInRow;\r\n        var currentIndex = $focusedCell.index();\r\n        var direction = this._isRTL() ? \"prev\" : \"next\";\r\n        if (currentIndex === edgeCellIndex || isMultiSelection && this._isGroupEndCell($focusedCell)) {\r\n            var $row = $focusedCell.parent();\r\n            var sign = this._isRTL() ? 1 : -1;\r\n            $rightCell = $row[direction]().children().eq(currentIndex + sign * lastIndexInRow);\r\n            $rightCell = this._checkForViewBounds($rightCell)\r\n        } else {\r\n            $rightCell = $focusedCell[direction]()\r\n        }\r\n        return $rightCell\r\n    },\r\n    _isGroupEndCell: function($cell) {\r\n        var cellsInRow = this._getCellCount();\r\n        var currentCellIndex = $cell.index();\r\n        var result = currentCellIndex % cellsInRow;\r\n        return this._isRTL() ? 0 === result : result === cellsInRow - 1\r\n    },\r\n    _getLeftCell: function(isMultiSelection) {\r\n        if (!isDefined(this._$focusedCell)) {\r\n            return\r\n        }\r\n        var $leftCell;\r\n        var $focusedCell = this._$focusedCell;\r\n        var groupCount = this._getGroupCount();\r\n        var rowCellCount = isMultiSelection ? this._getCellCount() : this._getTotalCellCount(groupCount);\r\n        var lastIndexInRow = rowCellCount - 1;\r\n        var edgeCellIndex = this._isRTL() ? lastIndexInRow : 0;\r\n        var currentIndex = $focusedCell.index();\r\n        var direction = this._isRTL() ? \"next\" : \"prev\";\r\n        if (currentIndex === edgeCellIndex || isMultiSelection && this._isGroupStartCell($focusedCell)) {\r\n            var $row = $focusedCell.parent();\r\n            var sign = this._isRTL() ? -1 : 1;\r\n            $leftCell = $row[direction]().children().eq(currentIndex + sign * lastIndexInRow);\r\n            $leftCell = this._checkForViewBounds($leftCell)\r\n        } else {\r\n            $leftCell = $focusedCell[direction]()\r\n        }\r\n        return $leftCell\r\n    },\r\n    _isGroupStartCell: function($cell) {\r\n        var cellsInRow = this._getCellCount();\r\n        var currentCellIndex = $cell.index();\r\n        var result = currentCellIndex % cellsInRow;\r\n        return this._isRTL() ? result === cellsInRow - 1 : 0 === result\r\n    },\r\n    _moveToCell: function($cell, isMultiSelection) {\r\n        isMultiSelection = isMultiSelection && this.option(\"allowMultipleCellSelection\");\r\n        this._setFocusedCell($cell, isMultiSelection);\r\n        this._dateTableScrollable.scrollToElement($cell)\r\n    },\r\n    _setFocusedCell: function($cell, isMultiSelection) {\r\n        if (!isDefined($cell) || !$cell.length) {\r\n            return\r\n        }\r\n        this._releaseFocusedCell();\r\n        this._focusedCells = [];\r\n        if (isMultiSelection) {\r\n            $cell = this._correctCellForGroup($cell);\r\n            var orientation = \"day\" === this.option(\"type\") && (!this.option(\"groups\").length || \"vertical\" === this.option(\"groupOrientation\")) ? \"vertical\" : \"horizontal\";\r\n            var $targetCells = this._getCellsBetween($cell, this._$prevCell, orientation);\r\n            this._focusedCells = $targetCells.toArray()\r\n        } else {\r\n            this._focusedCells = [$cell.get(0)];\r\n            this._$prevCell = $cell\r\n        }\r\n        var $focusedCells = $(this._focusedCells);\r\n        this._toggleFocusClass(true, $focusedCells);\r\n        this.setAria(\"label\", \"Add appointment\", $focusedCells);\r\n        this._toggleFocusedCellClass(true, $cell);\r\n        this._$focusedCell = $cell;\r\n        var selectedCellData = this.getFocusedCellData();\r\n        this.option(\"selectedCellData\", selectedCellData);\r\n        this._selectionChangedAction({\r\n            selectedCellData: selectedCellData\r\n        })\r\n    },\r\n    _correctCellForGroup: function($cell) {\r\n        var $focusedCell = this._$focusedCell;\r\n        var cellGroupIndex = this._getGroupIndexByCell($cell);\r\n        var focusedCellGroupIndex = this._getGroupIndexByCell($focusedCell);\r\n        var isDifferentTables = this._hasAllDayClass($cell) !== this._hasAllDayClass($focusedCell);\r\n        return focusedCellGroupIndex !== cellGroupIndex || isDifferentTables ? $focusedCell : $cell\r\n    },\r\n    _getCellsBetween: function($first, $last, direction) {\r\n        var isAllDayTable = this._hasAllDayClass($last);\r\n        var $cells = this._getCells(isAllDayTable, direction);\r\n        var firstIndex = $cells.index($first);\r\n        var lastIndex = $cells.index($last);\r\n        if (firstIndex > lastIndex) {\r\n            var buffer = firstIndex;\r\n            firstIndex = lastIndex;\r\n            lastIndex = buffer\r\n        }\r\n        $cells = $cells.slice(firstIndex, lastIndex + 1);\r\n        if (this._getGroupCount() > 1) {\r\n            var result = [];\r\n            var focusedGroupIndex = this._getGroupIndexByCell($first);\r\n            each($cells, function(_, cell) {\r\n                var groupIndex = this._getGroupIndexByCell($(cell));\r\n                if (focusedGroupIndex === groupIndex) {\r\n                    result.push(cell)\r\n                }\r\n            }.bind(this));\r\n            $cells = $(result)\r\n        }\r\n        return $cells\r\n    },\r\n    _hasAllDayClass: function($cell) {\r\n        return $cell.hasClass(ALL_DAY_TABLE_CELL_CLASS)\r\n    },\r\n    _getGroupIndexByCell: function($cell) {\r\n        var cellsInRow = this._getCellCount();\r\n        var currentCellIndex = $cell.index() + 1;\r\n        var groupIndex = Math.ceil(currentCellIndex / cellsInRow);\r\n        return groupIndex\r\n    },\r\n    _toggleFocusedCellClass: function(isFocused, $element) {\r\n        var $focusTarget = $element && $element.length ? $element : this._focusTarget();\r\n        $focusTarget.toggleClass(DATE_TABLE_FOCUSED_CELL_CLASS, isFocused)\r\n    },\r\n    _releaseFocusedCell: function($cell) {\r\n        $cell = $cell || $(this._focusedCells);\r\n        if (isDefined($cell) && $cell.length) {\r\n            this._toggleFocusClass(false, $cell);\r\n            this._toggleFocusedCellClass(false, $cell);\r\n            this.setAria(\"label\", void 0, $cell)\r\n        }\r\n        this.option(\"selectedCellData\", [])\r\n    },\r\n    _focusInHandler: function(e) {\r\n        if ($(e.target).is(this._focusTarget()) && false !== this._isCellClick) {\r\n            delete this._isCellClick;\r\n            delete this._contextMenuHandled;\r\n            this.callBase.apply(this, arguments);\r\n            var $cell = this._getFocusedCell();\r\n            this._setFocusedCell($cell)\r\n        }\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        if (!this._contextMenuHandled) {\r\n            this._releaseFocusedCell()\r\n        }\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _activeStateUnit: \".\" + DATE_TABLE_CELL_CLASS + \", .\" + ALL_DAY_TABLE_CELL_CLASS,\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            currentDate: new Date,\r\n            intervalCount: 1,\r\n            startDate: null,\r\n            firstDayOfWeek: void 0,\r\n            startDayHour: 0,\r\n            endDayHour: 24,\r\n            hoursInterval: .5,\r\n            activeStateEnabled: true,\r\n            hoverStateEnabled: true,\r\n            groups: [],\r\n            showAllDayPanel: true,\r\n            allDayExpanded: false,\r\n            onCellClick: null,\r\n            crossScrollingEnabled: false,\r\n            dataCellTemplate: null,\r\n            timeCellTemplate: null,\r\n            resourceCellTemplate: null,\r\n            dateCellTemplate: null,\r\n            allowMultipleCellSelection: true,\r\n            indicatorTime: new Date,\r\n            indicatorUpdateInterval: 5 * toMs(\"minute\"),\r\n            shadeUntilCurrentTime: true,\r\n            groupOrientation: \"horizontal\",\r\n            selectedCellData: [],\r\n            groupByDate: false\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"dateCellTemplate\":\r\n            case \"resourceCellTemplate\":\r\n            case \"dataCellTemplate\":\r\n            case \"timeCellTemplate\":\r\n            case \"startDayHour\":\r\n            case \"endDayHour\":\r\n            case \"hoursInterval\":\r\n            case \"firstDayOfWeek\":\r\n            case \"currentDate\":\r\n            case \"startDate\":\r\n                this._cleanWorkSpace();\r\n                break;\r\n            case \"groups\":\r\n                this._cleanView();\r\n                this._removeAllDayElements();\r\n                this._initGrouping();\r\n                this.repaint();\r\n                break;\r\n            case \"groupOrientation\":\r\n                this._initGroupedStrategy();\r\n                this._createAllDayPanelElements();\r\n                this._removeAllDayElements();\r\n                this._cleanWorkSpace();\r\n                this._toggleGroupByDateClass();\r\n                break;\r\n            case \"showAllDayPanel\":\r\n                if (this._isVerticalGroupedWorkSpace()) {\r\n                    this._cleanView();\r\n                    this._removeAllDayElements();\r\n                    this._initGrouping();\r\n                    this.repaint()\r\n                } else {\r\n                    this._toggleAllDayVisibility()\r\n                }\r\n                break;\r\n            case \"allDayExpanded\":\r\n                this._changeAllDayVisibility();\r\n                this._attachTablesEvents();\r\n                this.headerPanelOffsetRecalculate();\r\n                this._updateScrollable();\r\n                break;\r\n            case \"onSelectionChanged\":\r\n                this._createSelectionChangedAction();\r\n                break;\r\n            case \"onCellClick\":\r\n                this._createCellClickAction();\r\n                break;\r\n            case \"onCellContextMenu\":\r\n                this._attachContextMenuEvent();\r\n                break;\r\n            case \"intervalCount\":\r\n                this._cleanWorkSpace();\r\n                this._toggleWorkSpaceCountClass();\r\n                this._toggleFixedScrollableClass();\r\n                break;\r\n            case \"groupByDate\":\r\n                this._cleanWorkSpace();\r\n                this._toggleGroupByDateClass();\r\n                break;\r\n            case \"crossScrollingEnabled\":\r\n                this._toggleHorizontalScrollClass();\r\n                this._dateTableScrollable.option(this._dateTableScrollableConfig());\r\n                break;\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"allowMultipleCellSelection\":\r\n                break;\r\n            case \"selectedCellData\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _cleanWorkSpace: function() {\r\n        this._cleanView();\r\n        this._toggleGroupedClass();\r\n        this._toggleWorkSpaceWithOddCells();\r\n        this._renderView()\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initGrouping();\r\n        this._toggleHorizontalScrollClass();\r\n        this._toggleWorkSpaceCountClass();\r\n        this._toggleGroupByDateClass();\r\n        this._toggleWorkSpaceWithOddCells();\r\n        this._toggleWorkSpaceOverlappingClass();\r\n        this.$element().addClass(COMPONENT_CLASS).addClass(this._getElementClass())\r\n    },\r\n    _initGrouping: function() {\r\n        this._initGroupedStrategy();\r\n        this._toggleGroupingDirectionClass();\r\n        this._toggleGroupByDateClass()\r\n    },\r\n    _initGroupedStrategy: function() {\r\n        var strategyName = this.option(\"groups\").length ? this.option(\"groupOrientation\") : this._getDefaultGroupStrategy();\r\n        var Strategy = \"vertical\" === strategyName ? VerticalGroupedStrategy : HorizontalGroupedStrategy;\r\n        this._groupedStrategy = new Strategy(this)\r\n    },\r\n    _getDefaultGroupStrategy: function() {\r\n        return \"horizontal\"\r\n    },\r\n    _isVerticalGroupedWorkSpace: function() {\r\n        return !!this.option(\"groups\").length && \"vertical\" === this.option(\"groupOrientation\")\r\n    },\r\n    _isHorizontalGroupedWorkSpace: function() {\r\n        return !!this.option(\"groups\").length && \"horizontal\" === this.option(\"groupOrientation\")\r\n    },\r\n    _toggleHorizontalScrollClass: function() {\r\n        this.$element().toggleClass(WORKSPACE_WITH_BOTH_SCROLLS_CLASS, this.option(\"crossScrollingEnabled\"))\r\n    },\r\n    _toggleGroupByDateClass: function() {\r\n        this.$element().toggleClass(WORKSPACE_WITH_GROUP_BY_DATE_CLASS, this.isGroupedByDate())\r\n    },\r\n    _toggleWorkSpaceCountClass: function() {\r\n        this.$element().toggleClass(WORKSPACE_WITH_COUNT_CLASS, this._isWorkSpaceWithCount())\r\n    },\r\n    _isWorkSpaceWithCount: function() {\r\n        return this.option(\"intervalCount\") > 1\r\n    },\r\n    _toggleWorkSpaceWithOddCells: function() {\r\n        this.$element().toggleClass(WORKSPACE_WITH_ODD_CELLS_CLASS, this._isWorkspaceWithOddCells())\r\n    },\r\n    _isWorkspaceWithOddCells: function() {\r\n        return .5 === this.option(\"hoursInterval\")\r\n    },\r\n    _toggleWorkSpaceOverlappingClass: function() {\r\n        this.$element().toggleClass(WORKSPACE_WITH_OVERLAPPING_CLASS, this._isWorkSpaceWithOverlapping())\r\n    },\r\n    _isWorkSpaceWithOverlapping: function() {\r\n        return null !== this.invoke(\"getMaxAppointmentsPerCell\")\r\n    },\r\n    _toggleGroupingDirectionClass: function() {\r\n        this.$element().toggleClass(VERTICAL_GROUPED_WORKSPACE_CLASS, this._isVerticalGroupedWorkSpace())\r\n    },\r\n    _getRealGroupOrientation: function() {\r\n        return this._isVerticalGroupedWorkSpace() ? \"vertical\" : \"horizontal\"\r\n    },\r\n    _getTimePanelClass: function() {\r\n        return TIME_PANEL_CLASS\r\n    },\r\n    _getDateTableClass: function() {\r\n        return DATE_TABLE_CLASS\r\n    },\r\n    _getDateTableRowClass: function() {\r\n        return DATE_TABLE_ROW_CLASS\r\n    },\r\n    _getDateTableCellClass: function(i, j) {\r\n        var cellClass = DATE_TABLE_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS + \" \" + VERTICAL_SIZES_CLASS;\r\n        return this._needApplyLastGroupCellClass() ? this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, j + 1, i, j) : cellClass\r\n    },\r\n    _needApplyLastGroupCellClass: function() {\r\n        return true\r\n    },\r\n    _getGroupRowClass: function() {\r\n        return GROUP_ROW_CLASS\r\n    },\r\n    _getGroupHeaderClass: function(i) {\r\n        var cellClass = GROUP_HEADER_CLASS;\r\n        return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i + 1)\r\n    },\r\n    _getGroupHeaderContentClass: function() {\r\n        return GROUP_HEADER_CONTENT_CLASS\r\n    },\r\n    _initWorkSpaceUnits: function() {\r\n        this._$headerPanel = $(\"<table>\");\r\n        this._$thead = $(\"<thead>\").appendTo(this._$headerPanel);\r\n        this._$fixedContainer = $(\"<div>\").addClass(FIXED_CONTAINER_CLASS);\r\n        this._$allDayContainer = $(\"<div>\").addClass(ALL_DAY_CONTAINER_CLASS);\r\n        this._initAllDayPanelElements();\r\n        this._createAllDayPanelElements();\r\n        this._$timePanel = $(\"<table>\").addClass(this._getTimePanelClass());\r\n        this._$dateTable = $(\"<table>\");\r\n        this._$groupTable = $(\"<div>\").addClass(WORKSPACE_VERTICAL_GROUP_TABLE_CLASS)\r\n    },\r\n    _initAllDayPanelElements: function() {\r\n        this._allDayTitles = [];\r\n        this._allDayTables = [];\r\n        this._allDayPanels = []\r\n    },\r\n    _createAllDayPanelElements: function() {\r\n        var groupCount = this._getGroupCount();\r\n        if (this._isVerticalGroupedWorkSpace() && 0 !== groupCount) {\r\n            for (var i = 0; i < groupCount; i++) {\r\n                var $allDayTitle = $(\"<div>\").addClass(ALL_DAY_TITLE_CLASS).text(messageLocalization.format(\"dxScheduler-allDay\"));\r\n                this._allDayTitles.push($allDayTitle);\r\n                this._$allDayTable = $(\"<table>\");\r\n                this._allDayTables.push(this._$allDayTable);\r\n                this._$allDayPanel = $(\"<div>\").addClass(ALL_DAY_PANEL_CLASS).append(this._$allDayTable);\r\n                this._allDayPanels.push(this._$allDayPanel)\r\n            }\r\n        } else {\r\n            this._$allDayTitle = $(\"<div>\").addClass(ALL_DAY_TITLE_CLASS).text(messageLocalization.format(\"dxScheduler-allDay\")).appendTo(this.$element());\r\n            this._$allDayTable = $(\"<table>\");\r\n            this._$allDayPanel = $(\"<div>\").addClass(ALL_DAY_PANEL_CLASS).append(this._$allDayTable)\r\n        }\r\n    },\r\n    _initDateTableScrollable: function() {\r\n        var $dateTableScrollable = $(\"<div>\").addClass(SCHEDULER_DATE_TABLE_SCROLLABLE_CLASS);\r\n        this._dateTableScrollable = this._createComponent($dateTableScrollable, Scrollable, this._dateTableScrollableConfig())\r\n    },\r\n    _dateTableScrollableConfig: function() {\r\n        var config = {\r\n            useKeyboard: false,\r\n            bounceEnabled: false,\r\n            updateManually: true,\r\n            pushBackValue: 0\r\n        };\r\n        if (this._needCreateCrossScrolling()) {\r\n            config = extend(config, this._createCrossScrollingConfig())\r\n        }\r\n        return config\r\n    },\r\n    _createCrossScrollingConfig: function() {\r\n        var config = {};\r\n        var headerScrollableOnScroll;\r\n        var sidebarScrollableOnScroll;\r\n        config.direction = \"both\";\r\n        config.onStart = function(e) {\r\n            if (this._headerScrollable) {\r\n                headerScrollableOnScroll = this._headerScrollable.option(\"onScroll\");\r\n                this._headerScrollable.option(\"onScroll\", void 0)\r\n            }\r\n            if (this._sidebarScrollable) {\r\n                sidebarScrollableOnScroll = this._sidebarScrollable.option(\"onScroll\");\r\n                this._sidebarScrollable.option(\"onScroll\", void 0)\r\n            }\r\n        }.bind(this);\r\n        config.onScroll = function(e) {\r\n            this._sidebarScrollable && this._sidebarScrollable.scrollTo({\r\n                top: e.scrollOffset.top\r\n            });\r\n            this._headerScrollable && this._headerScrollable.scrollTo({\r\n                left: e.scrollOffset.left\r\n            })\r\n        }.bind(this);\r\n        config.onEnd = function() {\r\n            this.notifyObserver(\"updateResizableArea\", {});\r\n            this._headerScrollable && this._headerScrollable.option(\"onScroll\", headerScrollableOnScroll);\r\n            this._sidebarScrollable && this._sidebarScrollable.option(\"onScroll\", sidebarScrollableOnScroll)\r\n        }.bind(this);\r\n        return config\r\n    },\r\n    _createWorkSpaceElements: function() {\r\n        if (this.option(\"crossScrollingEnabled\")) {\r\n            this._createWorkSpaceScrollableElements()\r\n        } else {\r\n            this._createWorkSpaceStaticElements()\r\n        }\r\n    },\r\n    _createWorkSpaceStaticElements: function() {\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            this._dateTableScrollable.$content().append(this._$allDayContainer, this._$groupTable, this._$timePanel, this._$dateTable);\r\n            this.$element().append(this._$fixedContainer, this._$headerPanel, this._dateTableScrollable.$element())\r\n        } else {\r\n            this._dateTableScrollable.$content().append(this._$timePanel, this._$dateTable);\r\n            this.$element().append(this._$fixedContainer, this._$headerPanel, this._$allDayContainer, this._$allDayPanel, this._dateTableScrollable.$element())\r\n        }\r\n    },\r\n    _createWorkSpaceScrollableElements: function() {\r\n        this.$element().append(this._$fixedContainer);\r\n        this._createHeaderScrollable();\r\n        this._createSidebarScrollable();\r\n        this.$element().append(this._dateTableScrollable.$element());\r\n        this._headerScrollable.$content().append(this._$headerPanel);\r\n        this._dateTableScrollable.$content().append(this._$dateTable);\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            this._dateTableScrollable.$content().prepend(this._$allDayContainer);\r\n            this._sidebarScrollable.$content().append(this._$groupTable, this._$timePanel)\r\n        } else {\r\n            this._headerScrollable.$content().append(this._$allDayContainer, this._$allDayPanel)\r\n        }\r\n        this._sidebarScrollable.$content().append(this._$timePanel)\r\n    },\r\n    _createHeaderScrollable: function() {\r\n        var $headerScrollable = $(\"<div>\").addClass(SCHEDULER_HEADER_SCROLLABLE_CLASS).appendTo(this.$element());\r\n        this._headerScrollable = this._createComponent($headerScrollable, Scrollable, this._headerScrollableConfig())\r\n    },\r\n    _headerScrollableConfig: function() {\r\n        var dateTableScrollableOnScroll;\r\n        var config = {\r\n            useKeyboard: false,\r\n            showScrollbar: false,\r\n            direction: \"horizontal\",\r\n            useNative: false,\r\n            updateManually: true,\r\n            bounceEnabled: false,\r\n            pushBackValue: 0,\r\n            onStart: function(e) {\r\n                dateTableScrollableOnScroll = this._dateTableScrollable.option(\"onScroll\")\r\n            }.bind(this),\r\n            onScroll: function(e) {\r\n                this._dateTableScrollable.option(\"onScroll\", void 0);\r\n                this._dateTableScrollable.scrollTo({\r\n                    left: e.scrollOffset.left\r\n                });\r\n                this._dateTableScrollable.option(\"onScroll\", dateTableScrollableOnScroll)\r\n            }.bind(this)\r\n        };\r\n        return config\r\n    },\r\n    _createSidebarScrollable: function() {\r\n        var dateTableScrollableOnScroll;\r\n        var $timePanelScrollable = $(\"<div>\").addClass(SCHEDULER_SIDEBAR_SCROLLABLE_CLASS).appendTo(this.$element());\r\n        this._sidebarScrollable = this._createComponent($timePanelScrollable, Scrollable, {\r\n            useKeyboard: false,\r\n            showScrollbar: false,\r\n            direction: \"vertical\",\r\n            useNative: false,\r\n            updateManually: true,\r\n            bounceEnabled: false,\r\n            pushBackValue: 0,\r\n            onStart: function(e) {\r\n                dateTableScrollableOnScroll = this._dateTableScrollable.option(\"onScroll\");\r\n                this._dateTableScrollable.option(\"onScroll\", void 0)\r\n            }.bind(this),\r\n            onScroll: function(e) {\r\n                this._dateTableScrollable.scrollTo({\r\n                    top: e.scrollOffset.top\r\n                })\r\n            }.bind(this),\r\n            onEnd: function(e) {\r\n                this._dateTableScrollable.option(\"onScroll\", dateTableScrollableOnScroll)\r\n            }.bind(this)\r\n        })\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible && this._isVerticalGroupedWorkSpace()) {\r\n            this._setHorizontalGroupHeaderCellsHeight()\r\n        }\r\n        if (visible && this._needCreateCrossScrolling()) {\r\n            this._setTableSizes()\r\n        }\r\n    },\r\n    _attachTableClasses: function() {\r\n        this._addTableClass(this._$dateTable, this._getDateTableClass());\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            var groupCount = this._getGroupCount();\r\n            for (var i = 0; i < groupCount; i++) {\r\n                this._addTableClass(this._allDayTables[i], ALL_DAY_TABLE_CLASS)\r\n            }\r\n        } else {\r\n            this._addTableClass(this._$allDayTable, ALL_DAY_TABLE_CLASS)\r\n        }\r\n    },\r\n    _attachHeaderTableClasses: function() {\r\n        this._addTableClass(this._$headerPanel, HEADER_PANEL_CLASS)\r\n    },\r\n    _addTableClass: function($el, className) {\r\n        $el && !$el.hasClass(className) && $el.addClass(className)\r\n    },\r\n    _setTableSizes: function() {\r\n        this._attachTableClasses();\r\n        var cellWidth = this.getCellWidth();\r\n        if (cellWidth < this.getCellMinWidth()) {\r\n            cellWidth = this.getCellMinWidth()\r\n        }\r\n        var minWidth = this.getWorkSpaceMinWidth();\r\n        var $headerCells = this._$headerPanel.find(\"tr\").last().find(\"th\");\r\n        var width = cellWidth * $headerCells.length;\r\n        if (width < minWidth) {\r\n            width = minWidth\r\n        }\r\n        this._$headerPanel.width(width);\r\n        this._$dateTable.width(width);\r\n        this._$allDayTable && this._$allDayTable.width(width);\r\n        this._attachHeaderTableClasses();\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            this._setHorizontalGroupHeaderCellsHeight()\r\n        }\r\n    },\r\n    getWorkSpaceMinWidth: function() {\r\n        return this._groupedStrategy.getWorkSpaceMinWidth()\r\n    },\r\n    _dimensionChanged: function() {\r\n        if (this.option(\"crossScrollingEnabled\")) {\r\n            this._setTableSizes()\r\n        }\r\n        this.headerPanelOffsetRecalculate();\r\n        this._cleanCellDataCache();\r\n        this._cleanAllowedPositions()\r\n    },\r\n    _needCreateCrossScrolling: function() {\r\n        return this.option(\"crossScrollingEnabled\")\r\n    },\r\n    _getElementClass: noop,\r\n    _getRowCount: noop,\r\n    _getCellCount: noop,\r\n    _initMarkup: function() {\r\n        this._initWorkSpaceUnits();\r\n        this._initDateTableScrollable();\r\n        this._createWorkSpaceElements();\r\n        this.callBase();\r\n        if (!this.option(\"crossScrollingEnabled\")) {\r\n            this._attachTableClasses();\r\n            this._attachHeaderTableClasses()\r\n        }\r\n        this._toggleGroupedClass();\r\n        this._toggleFixedScrollableClass();\r\n        this._renderView();\r\n        this._attachEvents();\r\n        this._setFocusOnCellByOption(this.option(\"selectedCellData\"))\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderDateTimeIndication();\r\n        this._setIndicationUpdateInterval()\r\n    },\r\n    _toggleGroupedClass: function() {\r\n        this.$element().toggleClass(GROUPED_WORKSPACE_CLASS, this._getGroupCount() > 0)\r\n    },\r\n    _toggleFixedScrollableClass: noop,\r\n    _renderView: function() {\r\n        this._setFirstViewDate();\r\n        this._applyCellTemplates(this._renderGroupHeader());\r\n        this._renderDateHeader();\r\n        this._renderTimePanel();\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            var groupCount = this._getGroupCount();\r\n            for (var i = 0; i < groupCount; i++) {\r\n                this._renderAllDayPanel(i)\r\n            }\r\n        }\r\n        this._renderDateTable();\r\n        this._renderAllDayPanel();\r\n        this._updateGroupTableHeight();\r\n        this._shader = new VerticalShader\r\n    },\r\n    _updateGroupTableHeight: function() {\r\n        if (this._isVerticalGroupedWorkSpace() && windowUtils.hasWindow()) {\r\n            this._setHorizontalGroupHeaderCellsHeight()\r\n        }\r\n    },\r\n    _renderDateTimeIndication: noop,\r\n    _setIndicationUpdateInterval: noop,\r\n    _refreshDateTimeIndication: noop,\r\n    _setFocusOnCellByOption: function(data) {\r\n        var cells = [];\r\n        this._releaseFocusedCell();\r\n        for (var i = 0; i < data.length; i++) {\r\n            var groups = data[i].groups;\r\n            var groupIndex = this.option(\"groups\").length && groups ? this._getGroupIndexByResourceId(groups) : 0;\r\n            var allDay = !!data[i].allDay;\r\n            var coordinates = this.getCoordinatesByDate(data[i].startDate, groupIndex, allDay);\r\n            var $cell = this._getCellByCoordinates(coordinates, groupIndex);\r\n            if (isDefined($cell)) {\r\n                this._toggleFocusClass(true, $cell);\r\n                cells.push($cell.get(0))\r\n            }\r\n        }\r\n        this._focusedCells = cells\r\n    },\r\n    _getGroupIndexByResourceId: function(id) {\r\n        var groups = this.option(\"groups\");\r\n        var groupKey = Object.keys(id)[0];\r\n        var groupValue = id[groupKey];\r\n        var tree = this.invoke(\"createResourcesTree\", groups);\r\n        var index = 0;\r\n        for (var i = 0; i < tree.length; i++) {\r\n            if (tree[i].name === groupKey && tree[i].value === groupValue) {\r\n                index = tree[i].leafIndex\r\n            }\r\n        }\r\n        return index\r\n    },\r\n    _setFirstViewDate: function() {\r\n        var firstDayOfWeek = isDefined(this._firstDayOfWeek()) ? this._firstDayOfWeek() : dateLocalization.firstDayOfWeekIndex();\r\n        this._firstViewDate = dateUtils.getFirstWeekDate(this._getViewStartByOptions(), firstDayOfWeek);\r\n        this._setStartDayHour(this._firstViewDate)\r\n    },\r\n    _getViewStartByOptions: function() {\r\n        if (!this.option(\"startDate\")) {\r\n            return this.option(\"currentDate\")\r\n        } else {\r\n            var startDate = dateUtils.trimTime(this._getStartViewDate());\r\n            var currentDate = this.option(\"currentDate\");\r\n            var diff = startDate.getTime() <= currentDate.getTime() ? 1 : -1;\r\n            var endDate = new Date(startDate.getTime() + this._getIntervalDuration() * diff);\r\n            while (!this._dateInRange(currentDate, startDate, endDate, diff)) {\r\n                startDate = endDate;\r\n                endDate = new Date(startDate.getTime() + this._getIntervalDuration() * diff)\r\n            }\r\n            return diff > 0 ? startDate : endDate\r\n        }\r\n    },\r\n    _getHeaderDate: function() {\r\n        return this.getStartViewDate()\r\n    },\r\n    _getStartViewDate: function() {\r\n        return this.option(\"startDate\")\r\n    },\r\n    _dateInRange: function(date, startDate, endDate, diff) {\r\n        return diff > 0 ? dateUtils.dateInRange(date, startDate, new Date(endDate.getTime() - 1)) : dateUtils.dateInRange(date, endDate, startDate, \"date\")\r\n    },\r\n    _getIntervalDuration: function() {\r\n        return toMs(\"day\") * this.option(\"intervalCount\")\r\n    },\r\n    _setStartDayHour: function(date) {\r\n        var startDayHour = this.option(\"startDayHour\");\r\n        if (isDefined(startDayHour)) {\r\n            date.setHours(startDayHour, startDayHour % 1 * 60, 0, 0)\r\n        }\r\n    },\r\n    _firstDayOfWeek: function() {\r\n        return this.option(\"firstDayOfWeek\")\r\n    },\r\n    _attachEvents: function() {\r\n        this._createSelectionChangedAction();\r\n        this._attachClickEvent();\r\n        this._attachContextMenuEvent()\r\n    },\r\n    _attachClickEvent: function() {\r\n        var that = this;\r\n        var pointerDownAction = this._createAction(function(e) {\r\n            that._pointerDownHandler(e.event)\r\n        });\r\n        this._createCellClickAction();\r\n        var cellSelector = \".\" + DATE_TABLE_CELL_CLASS + \",.\" + ALL_DAY_TABLE_CELL_CLASS;\r\n        var $element = this.$element();\r\n        eventsEngine.off($element, SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME);\r\n        eventsEngine.off($element, SCHEDULER_CELL_DXCLICK_EVENT_NAME);\r\n        eventsEngine.on($element, SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME, function(e) {\r\n            if (eventUtils.isMouseEvent(e) && e.which > 1) {\r\n                e.preventDefault();\r\n                return\r\n            }\r\n            pointerDownAction({\r\n                event: e\r\n            })\r\n        });\r\n        eventsEngine.on($element, SCHEDULER_CELL_DXCLICK_EVENT_NAME, cellSelector, function(e) {\r\n            var $cell = $(e.target);\r\n            that._cellClickAction({\r\n                event: e,\r\n                cellElement: getPublicElement($cell),\r\n                cellData: that.getCellData($cell)\r\n            })\r\n        })\r\n    },\r\n    _createCellClickAction: function() {\r\n        var that = this;\r\n        this._cellClickAction = this._createActionByOption(\"onCellClick\", {\r\n            afterExecute: function(e) {\r\n                that._moveToClosestNonStub(e.args[0].event)\r\n            }\r\n        })\r\n    },\r\n    _createSelectionChangedAction: function() {\r\n        this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\")\r\n    },\r\n    _moveToClosestNonStub: function(e) {\r\n        var $target = $(e.target);\r\n        if (this._showPopup && this._hasFocusClass($target)) {\r\n            delete this._showPopup;\r\n            this._showAddAppointmentPopup($target)\r\n        }\r\n    },\r\n    _pointerDownHandler: function(e) {\r\n        var $target = $(e.target);\r\n        if (!$target.hasClass(DATE_TABLE_CELL_CLASS) && !$target.hasClass(ALL_DAY_TABLE_CELL_CLASS)) {\r\n            this._isCellClick = false;\r\n            return\r\n        }\r\n        this._isCellClick = true;\r\n        if ($target.hasClass(DATE_TABLE_FOCUSED_CELL_CLASS)) {\r\n            this._showPopup = true\r\n        } else {\r\n            this._setFocusedCell($target)\r\n        }\r\n    },\r\n    _showAddAppointmentPopup: function($cell) {\r\n        var firstCellData = this.getCellData($cell.first());\r\n        var lastCellData = this.getCellData($cell.last());\r\n        var args = {\r\n            startDate: firstCellData.startDate,\r\n            endDate: lastCellData.endDate\r\n        };\r\n        if (isDefined(lastCellData.allDay)) {\r\n            args.allDay = lastCellData.allDay\r\n        }\r\n        extend(args, lastCellData.groups);\r\n        this.notifyObserver(\"showAddAppointmentPopup\", args)\r\n    },\r\n    _attachContextMenuEvent: function() {\r\n        this._createContextMenuAction();\r\n        var cellSelector = \".\" + DATE_TABLE_CELL_CLASS + \",.\" + ALL_DAY_TABLE_CELL_CLASS;\r\n        var $element = this.$element();\r\n        var eventName = eventUtils.addNamespace(contextMenuEvent.name, this.NAME);\r\n        eventsEngine.off($element, eventName, cellSelector);\r\n        eventsEngine.on($element, eventName, cellSelector, this._contextMenuHandler.bind(this))\r\n    },\r\n    _contextMenuHandler: function(e) {\r\n        var $cell = $(e.target);\r\n        this._contextMenuAction({\r\n            event: e,\r\n            cellElement: getPublicElement($cell),\r\n            cellData: this.getCellData($cell)\r\n        });\r\n        this._contextMenuHandled = true\r\n    },\r\n    _createContextMenuAction: function() {\r\n        this._contextMenuAction = this._createActionByOption(\"onCellContextMenu\")\r\n    },\r\n    _getGroupHeaderContainer: function() {\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            return this._$groupTable\r\n        }\r\n        return this._$thead\r\n    },\r\n    _getDateHeaderContainer: function() {\r\n        return this._$thead\r\n    },\r\n    _renderGroupHeader: function() {\r\n        var $container = this._getGroupHeaderContainer();\r\n        var groupCount = this._getGroupCount();\r\n        var cellTemplates = [];\r\n        if (groupCount) {\r\n            var groupRows = this._makeGroupRows(this.option(\"groups\"), this.option(\"groupByDate\"));\r\n            this._attachGroupCountAttr(groupCount, groupRows);\r\n            $container.append(groupRows.elements);\r\n            cellTemplates = groupRows.cellTemplates\r\n        } else {\r\n            this._detachGroupCountAttr()\r\n        }\r\n        return cellTemplates\r\n    },\r\n    _applyCellTemplates: function(templates) {\r\n        templates.forEach(function(template) {\r\n            template()\r\n        })\r\n    },\r\n    _detachGroupCountAttr: function() {\r\n        var groupedAttr = this._groupedStrategy.getGroupCountAttr();\r\n        this.$element().removeAttr(groupedAttr.attr)\r\n    },\r\n    _attachGroupCountAttr: function(groupRowCount, groupRows) {\r\n        var groupedAttr = this._groupedStrategy.getGroupCountAttr(groupRowCount, groupRows);\r\n        this.$element().attr(groupedAttr.attr, groupedAttr.count)\r\n    },\r\n    headerPanelOffsetRecalculate: function() {\r\n        if (!this.option(\"resourceCellTemplate\") && !this.option(\"dateCellTemplate\")) {\r\n            return\r\n        }\r\n        var headerPanelHeight = this.getHeaderPanelHeight();\r\n        var headerHeight = this.invoke(\"getHeaderHeight\");\r\n        var allDayPanelHeight = this.supportAllDayRow() && this.option(\"showAllDayPanel\") ? this._groupedStrategy.getAllDayTableHeight() : 0;\r\n        headerPanelHeight && this._headerScrollable && this._headerScrollable.$element().height(headerPanelHeight + allDayPanelHeight);\r\n        headerPanelHeight && this._dateTableScrollable.$element().css({\r\n            paddingBottom: allDayPanelHeight + headerPanelHeight + \"px\",\r\n            marginBottom: -1 * (parseInt(headerPanelHeight, 10) + allDayPanelHeight) + \"px\"\r\n        });\r\n        headerPanelHeight && this._sidebarScrollable && this._sidebarScrollable.$element().css({\r\n            paddingBottom: allDayPanelHeight + headerPanelHeight + \"px\",\r\n            marginBottom: -1 * (parseInt(headerPanelHeight, 10) + allDayPanelHeight) + \"px\"\r\n        });\r\n        this._$allDayTitle && this._$allDayTitle.css(\"top\", headerHeight + headerPanelHeight + \"px\")\r\n    },\r\n    _makeGroupRows: function(groups, groupByDate) {\r\n        var tableCreatorStrategy = this._isVerticalGroupedWorkSpace() ? tableCreator.VERTICAL : tableCreator.HORIZONTAL;\r\n        return tableCreator.makeGroupedTable(tableCreatorStrategy, groups, {\r\n            groupHeaderRowClass: this._getGroupRowClass(),\r\n            groupRowClass: this._getGroupRowClass(),\r\n            groupHeaderClass: this._getGroupHeaderClass.bind(this),\r\n            groupHeaderContentClass: this._getGroupHeaderContentClass()\r\n        }, this._getCellCount() || 1, this.option(\"resourceCellTemplate\"), this._getGroupCount(), groupByDate)\r\n    },\r\n    _getDateHeaderTemplate: function() {\r\n        return this.option(\"dateCellTemplate\")\r\n    },\r\n    _renderDateHeader: function() {\r\n        var $container = this._getDateHeaderContainer();\r\n        var $headerRow = $(\"<tr>\").addClass(HEADER_ROW_CLASS);\r\n        var count = this._getCellCount();\r\n        var cellTemplate = this._getDateHeaderTemplate();\r\n        var repeatCount = this._calculateHeaderCellRepeatCount();\r\n        var templateCallbacks = [];\r\n        var colspan = this.option(\"groupByDate\") ? this._getGroupCount() : 1;\r\n        var groupByDate = this.option(\"groupByDate\");\r\n        var i;\r\n        var j;\r\n        if (!groupByDate) {\r\n            for (j = 0; j < repeatCount; j++) {\r\n                for (i = 0; i < count; i++) {\r\n                    this._renderDateHeaderTemplate($headerRow, i, j * repeatCount + i, cellTemplate, templateCallbacks)\r\n                }\r\n            }\r\n            $container.append($headerRow)\r\n        } else {\r\n            for (i = 0; i < count; i++) {\r\n                var $cell = this._renderDateHeaderTemplate($headerRow, i, i * repeatCount, cellTemplate, templateCallbacks);\r\n                $cell.attr(\"colSpan\", colspan)\r\n            }\r\n            $container.prepend($headerRow)\r\n        }\r\n        this._applyCellTemplates(templateCallbacks);\r\n        return $headerRow\r\n    },\r\n    _renderDateHeaderTemplate: function($container, i, calculatedIndex, cellTemplate, templateCallbacks) {\r\n        var text = this._getHeaderText(i);\r\n        var $cell = $(\"<th>\").addClass(this._getHeaderPanelCellClass(i)).attr(\"title\", text);\r\n        if (cellTemplate && cellTemplate.render) {\r\n            templateCallbacks.push(cellTemplate.render.bind(cellTemplate, {\r\n                model: {\r\n                    text: text,\r\n                    date: this._getDateByIndex(i)\r\n                },\r\n                index: calculatedIndex,\r\n                container: getPublicElement($cell)\r\n            }))\r\n        } else {\r\n            $cell.text(text)\r\n        }\r\n        $container.append($cell);\r\n        return $cell\r\n    },\r\n    _getHeaderPanelCellClass: function(i) {\r\n        var cellClass = HEADER_PANEL_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS;\r\n        return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i + 1)\r\n    },\r\n    _calculateHeaderCellRepeatCount: function() {\r\n        return this._groupedStrategy.calculateHeaderCellRepeatCount()\r\n    },\r\n    _renderAllDayPanel: function(index) {\r\n        var cellCount = this._getCellCount();\r\n        if (!this._isVerticalGroupedWorkSpace()) {\r\n            cellCount *= this._getGroupCount() || 1\r\n        }\r\n        var cellTemplates = this._renderTableBody({\r\n            container: this._allDayPanels.length ? getPublicElement(this._allDayTables[index]) : getPublicElement(this._$allDayTable),\r\n            rowCount: 1,\r\n            cellCount: cellCount,\r\n            cellClass: this._getAllDayPanelCellClass.bind(this),\r\n            rowClass: ALL_DAY_TABLE_ROW_CLASS,\r\n            cellTemplate: this.option(\"dataCellTemplate\"),\r\n            getCellData: this._getAllDayCellData.bind(this),\r\n            groupIndex: index\r\n        }, true);\r\n        this._toggleAllDayVisibility();\r\n        this._applyCellTemplates(cellTemplates)\r\n    },\r\n    _getAllDayPanelCellClass: function(i, j) {\r\n        var cellClass = ALL_DAY_TABLE_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS;\r\n        return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, j + 1)\r\n    },\r\n    _getAllDayCellData: function(cell, rowIndex, cellIndex, groupIndex) {\r\n        var startDate = this._getDateByCellIndexes(rowIndex, cellIndex);\r\n        startDate = dateUtils.trimTime(startDate);\r\n        var data = {\r\n            startDate: startDate,\r\n            endDate: new Date(startDate.getTime() + DAY_MS),\r\n            allDay: true\r\n        };\r\n        var groups = this._getCellGroups(groupIndex || this._getGroupIndex(rowIndex, cellIndex));\r\n        if (groups.length) {\r\n            data.groups = {}\r\n        }\r\n        for (var i = 0; i < groups.length; i++) {\r\n            data.groups[groups[i].name] = groups[i].id\r\n        }\r\n        return {\r\n            key: CELL_DATA,\r\n            value: data\r\n        }\r\n    },\r\n    _toggleAllDayVisibility: function() {\r\n        var showAllDayPanel = this.option(\"showAllDayPanel\");\r\n        this._$allDayPanel.toggle(showAllDayPanel);\r\n        this._$allDayTitle && this._$allDayTitle.toggleClass(ALL_DAY_TITLE_HIDDEN_CLASS, !showAllDayPanel);\r\n        this.$element().toggleClass(WORKSPACE_WITH_ALL_DAY_CLASS, showAllDayPanel);\r\n        this._changeAllDayVisibility();\r\n        this._updateScrollable()\r\n    },\r\n    _changeAllDayVisibility: function() {\r\n        this.$element().toggleClass(WORKSPACE_WITH_COLLAPSED_ALL_DAY_CLASS, !this.option(\"allDayExpanded\") && this.option(\"showAllDayPanel\"))\r\n    },\r\n    _updateScrollable: function() {\r\n        this._dateTableScrollable.update();\r\n        this._headerScrollable && this._headerScrollable.update();\r\n        this._sidebarScrollable && this._sidebarScrollable.update()\r\n    },\r\n    _renderTimePanel: function() {\r\n        var repeatCount = this._groupedStrategy.calculateTimeCellRepeatCount();\r\n        this._renderTableBody({\r\n            container: getPublicElement(this._$timePanel),\r\n            rowCount: this._getTimePanelRowCount() * repeatCount,\r\n            cellCount: 1,\r\n            cellClass: this._getTimeCellClass.bind(this),\r\n            rowClass: TIME_PANEL_ROW_CLASS,\r\n            cellTemplate: this.option(\"timeCellTemplate\"),\r\n            getCellText: this._getTimeText.bind(this),\r\n            getCellDate: this._getTimeCellDate.bind(this),\r\n            groupCount: this._getGroupCount(),\r\n            allDayElements: this._insertAllDayRowsIntoDateTable() ? this._allDayTitles : void 0\r\n        })\r\n    },\r\n    _getTimePanelRowCount: function() {\r\n        return this._getCellCountInDay()\r\n    },\r\n    _getCellCountInDay: function() {\r\n        return Math.ceil(this._calculateDayDuration() / this.option(\"hoursInterval\"))\r\n    },\r\n    _calculateDayDuration: function() {\r\n        return this.option(\"endDayHour\") - this.option(\"startDayHour\")\r\n    },\r\n    _getTimeCellClass: function(i) {\r\n        var cellClass = TIME_PANEL_CELL_CLASS + \" \" + VERTICAL_SIZES_CLASS;\r\n        return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i, i)\r\n    },\r\n    _getTimeText: function(i) {\r\n        var startViewDate = this._getTimeCellDate(i);\r\n        var index = i % this._getRowCount();\r\n        if (index % 2 === 0) {\r\n            return dateLocalization.format(startViewDate, \"shorttime\")\r\n        }\r\n        return \"\"\r\n    },\r\n    _getTimeCellDate: function(i) {\r\n        var startViewDate = new Date(this.getStartViewDate());\r\n        var timeCellDuration = Math.round(this.getCellDuration());\r\n        var lastCellInDay = this._calculateDayDuration() / this.option(\"hoursInterval\");\r\n        startViewDate.setMilliseconds(startViewDate.getMilliseconds() + timeCellDuration * (i % lastCellInDay));\r\n        return startViewDate\r\n    },\r\n    _renderDateTable: function() {\r\n        var groupCount = this._getGroupCount();\r\n        this._renderTableBody({\r\n            container: getPublicElement(this._$dateTable),\r\n            rowCount: this._getTotalRowCount(groupCount),\r\n            cellCount: this._getTotalCellCount(groupCount),\r\n            cellClass: this._getDateTableCellClass.bind(this),\r\n            rowClass: this._getDateTableRowClass(),\r\n            cellTemplate: this.option(\"dataCellTemplate\"),\r\n            getCellData: this._getCellData.bind(this),\r\n            allDayElements: this._insertAllDayRowsIntoDateTable() ? this._allDayPanels : void 0,\r\n            groupCount: groupCount,\r\n            groupByDate: this.option(\"groupByDate\")\r\n        })\r\n    },\r\n    _insertAllDayRowsIntoDateTable: function() {\r\n        return this._groupedStrategy.insertAllDayRowsIntoDateTable()\r\n    },\r\n    _getTotalCellCount: function(groupCount) {\r\n        return this._groupedStrategy.getTotalCellCount(groupCount)\r\n    },\r\n    _getTotalRowCount: function() {\r\n        return this._groupedStrategy.getTotalRowCount()\r\n    },\r\n    _getCellData: function(cell, rowIndex, cellIndex) {\r\n        var data = this._prepareCellData(rowIndex, cellIndex, cell);\r\n        return {\r\n            key: CELL_DATA,\r\n            value: data\r\n        }\r\n    },\r\n    _prepareCellData: function(rowIndex, cellIndex) {\r\n        var startDate = this._getDateByCellIndexes(rowIndex, cellIndex);\r\n        var endDate = this.calculateEndDate(startDate);\r\n        var data = {\r\n            startDate: startDate,\r\n            endDate: endDate,\r\n            allDay: this._getTableAllDay()\r\n        };\r\n        var groups = this._getCellGroups(this._getGroupIndex(rowIndex, cellIndex));\r\n        if (groups.length) {\r\n            data.groups = {}\r\n        }\r\n        for (var i = 0; i < groups.length; i++) {\r\n            data.groups[groups[i].name] = groups[i].id\r\n        }\r\n        return data\r\n    },\r\n    _getGroupIndex: function(rowIndex, cellIndex) {\r\n        return this._groupedStrategy.getGroupIndex(rowIndex, cellIndex)\r\n    },\r\n    _getTableAllDay: function() {\r\n        return false\r\n    },\r\n    calculateEndDate: function(startDate) {\r\n        var result = new Date(startDate);\r\n        result.setMilliseconds(result.getMilliseconds() + Math.round(this._getInterval()));\r\n        return result\r\n    },\r\n    _getGroupCount: function() {\r\n        var groups = this.option(\"groups\");\r\n        var result = 0;\r\n        for (var i = 0, len = groups.length; i < len; i++) {\r\n            if (!i) {\r\n                result = groups[i].items.length\r\n            } else {\r\n                result *= groups[i].items.length\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _getPathToLeaf: function(leafIndex) {\r\n        var tree = this.invoke(\"createResourcesTree\", this.option(\"groups\"));\r\n\r\n        function findLeafByIndex(data, index) {\r\n            for (var i = 0; i < data.length; i++) {\r\n                if (data[i].leafIndex === index) {\r\n                    return data[i]\r\n                } else {\r\n                    var _leaf = findLeafByIndex(data[i].children, index);\r\n                    if (_leaf) {\r\n                        return _leaf\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function makeBranch(leaf, result) {\r\n            result = result || [];\r\n            result.push(leaf.value);\r\n            if (leaf.parent) {\r\n                makeBranch(leaf.parent, result)\r\n            }\r\n            return result\r\n        }\r\n        var leaf = findLeafByIndex(tree, leafIndex);\r\n        return makeBranch(leaf).reverse()\r\n    },\r\n    _getCellGroups: function(groupIndex) {\r\n        var result = [];\r\n        if (this._getGroupCount()) {\r\n            var groups = this.option(\"groups\");\r\n            if (groupIndex < 0) {\r\n                return\r\n            }\r\n            var path = this._getPathToLeaf(groupIndex);\r\n            for (var i = 0; i < groups.length; i++) {\r\n                result.push({\r\n                    name: groups[i].name,\r\n                    id: path[i]\r\n                })\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _attachTablesEvents: function() {\r\n        var that = this;\r\n        var isPointerDown = false;\r\n        var cellHeight;\r\n        var cellWidth;\r\n        var $element = this.$element();\r\n        eventsEngine.off($element, SCHEDULER_CELL_DXDRAGENTER_EVENT_NAME);\r\n        eventsEngine.off($element, SCHEDULER_CELL_DXDROP_EVENT_NAME);\r\n        eventsEngine.off($element, SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME);\r\n        eventsEngine.off($element, SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME);\r\n        eventsEngine.on($element, SCHEDULER_CELL_DXDRAGENTER_EVENT_NAME, SCHEDULER_DRAG_AND_DROP_SELECTOR, {\r\n            itemSizeFunc: function($element) {\r\n                if (!cellHeight) {\r\n                    cellHeight = $element.get(0).getBoundingClientRect().height\r\n                }\r\n                if (!cellWidth) {\r\n                    cellWidth = $element.get(0).getBoundingClientRect().width\r\n                }\r\n                return {\r\n                    width: cellWidth,\r\n                    height: cellHeight\r\n                }\r\n            }\r\n        }, function(e) {\r\n            if (that._$currentTableTarget) {\r\n                that._$currentTableTarget.removeClass(DATE_TABLE_DROPPABLE_CELL_CLASS)\r\n            }\r\n            that._$currentTableTarget = $(e.target);\r\n            that._$currentTableTarget.addClass(DATE_TABLE_DROPPABLE_CELL_CLASS)\r\n        });\r\n        eventsEngine.on($element, SCHEDULER_CELL_DXDROP_EVENT_NAME, SCHEDULER_DRAG_AND_DROP_SELECTOR, function(e) {\r\n            $(e.target).removeClass(DATE_TABLE_DROPPABLE_CELL_CLASS);\r\n            cellHeight = 0;\r\n            cellWidth = 0\r\n        });\r\n        eventsEngine.on($element, SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME, SCHEDULER_DRAG_AND_DROP_SELECTOR, function(e) {\r\n            if (eventUtils.isMouseEvent(e) && 1 === e.which) {\r\n                isPointerDown = true;\r\n                that.$element().addClass(WORKSPACE_WITH_MOUSE_SELECTION_CLASS);\r\n                eventsEngine.off(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME);\r\n                eventsEngine.on(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME, function() {\r\n                    isPointerDown = false;\r\n                    that.$element().removeClass(WORKSPACE_WITH_MOUSE_SELECTION_CLASS)\r\n                })\r\n            }\r\n        });\r\n        eventsEngine.on($element, SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME, SCHEDULER_DRAG_AND_DROP_SELECTOR, function(e) {\r\n            if (isPointerDown && that._dateTableScrollable && !that._dateTableScrollable.option(\"scrollByContent\")) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                that._moveToCell($(e.target), true)\r\n            }\r\n        })\r\n    },\r\n    _getDateTables: function() {\r\n        return this._$dateTable.add(this._$allDayTable)\r\n    },\r\n    _getDateTable: function() {\r\n        return this._$dateTable\r\n    },\r\n    _getAllDayTable: function() {\r\n        return this._$allDayTable\r\n    },\r\n    _getInterval: function() {\r\n        if (void 0 === this._interval) {\r\n            this._interval = this.option(\"hoursInterval\") * HOUR_MS\r\n        }\r\n        return this._interval\r\n    },\r\n    _getHeaderText: function(headerIndex) {\r\n        return dateLocalization.format(this._getDateByIndex(headerIndex), this._getFormat())\r\n    },\r\n    _getDateByIndex: abstract,\r\n    _getFormat: abstract,\r\n    _calculateCellIndex: function(rowIndex, cellIndex) {\r\n        return this._groupedStrategy.calculateCellIndex(rowIndex, cellIndex)\r\n    },\r\n    _renderTableBody: function(options, delayCellTemplateRendering) {\r\n        var result = [];\r\n        if (!delayCellTemplateRendering) {\r\n            this._applyCellTemplates(tableCreator.makeTable(options))\r\n        } else {\r\n            result = tableCreator.makeTable(options)\r\n        }\r\n        return result\r\n    },\r\n    _removeAllDayElements: function() {\r\n        this._$allDayTable && this._$allDayTable.remove();\r\n        this._$allDayTitle && this._$allDayTitle.remove()\r\n    },\r\n    _cleanView: function() {\r\n        this._cleanCellDataCache();\r\n        this._cleanAllowedPositions();\r\n        this._$thead.empty();\r\n        this._$dateTable.empty();\r\n        this._shader && this._shader.clean();\r\n        this._$timePanel.empty();\r\n        this._$allDayTable && this._$allDayTable.empty();\r\n        this._$groupTable.empty();\r\n        delete this._hiddenInterval;\r\n        delete this._interval\r\n    },\r\n    _clean: function() {\r\n        eventsEngine.off(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME);\r\n        this.callBase()\r\n    },\r\n    getWorkArea: function() {\r\n        return this._dateTableScrollable.$content()\r\n    },\r\n    getScrollable: function() {\r\n        return this._dateTableScrollable\r\n    },\r\n    getScrollableScrollTop: function() {\r\n        return this._dateTableScrollable.scrollTop()\r\n    },\r\n    getGroupedScrollableScrollTop: function(allDay) {\r\n        return this._groupedStrategy.getScrollableScrollTop(allDay)\r\n    },\r\n    getScrollableScrollLeft: function() {\r\n        return this._dateTableScrollable.scrollLeft()\r\n    },\r\n    getScrollableOuterWidth: function() {\r\n        return this._dateTableScrollable.scrollWidth()\r\n    },\r\n    getScrollableContainer: function() {\r\n        return this._dateTableScrollable._container()\r\n    },\r\n    getHeaderPanelHeight: function() {\r\n        return this._$headerPanel && this._$headerPanel.outerHeight(true)\r\n    },\r\n    getTimePanelWidth: function() {\r\n        return this._$timePanel && this._$timePanel.get(0).getBoundingClientRect().width\r\n    },\r\n    getGroupTableWidth: function() {\r\n        return this._$groupTable ? this._$groupTable.outerWidth() : 0\r\n    },\r\n    getWorkSpaceLeftOffset: function() {\r\n        return this._groupedStrategy.getLeftOffset()\r\n    },\r\n    getGroupedStrategy: function() {\r\n        return this._groupedStrategy\r\n    },\r\n    _getCellCoordinatesByIndex: function(index) {\r\n        var cellIndex = Math.floor(index / this._getRowCount());\r\n        var rowIndex = index - this._getRowCount() * cellIndex;\r\n        return {\r\n            cellIndex: cellIndex,\r\n            rowIndex: rowIndex\r\n        }\r\n    },\r\n    _getDateByCellIndexes: function(rowIndex, cellIndex, patchedIndexes) {\r\n        cellIndex = !patchedIndexes ? this._patchCellIndex(cellIndex) : cellIndex;\r\n        var firstViewDate = this.getStartViewDate();\r\n        var currentDate = new Date(firstViewDate.getTime() + this._getMillisecondsOffset(rowIndex, cellIndex) + this._getOffsetByCount(cellIndex));\r\n        currentDate.setTime(currentDate.getTime() + dateUtils.getTimezonesDifference(firstViewDate, currentDate));\r\n        return currentDate\r\n    },\r\n    _patchCellIndex: function(cellIndex) {\r\n        if (this.isGroupedByDate()) {\r\n            cellIndex = Math.floor(cellIndex / this._getGroupCount())\r\n        }\r\n        return cellIndex\r\n    },\r\n    _getOffsetByCount: function() {\r\n        return 0\r\n    },\r\n    _getMillisecondsOffset: function(rowIndex, cellIndex) {\r\n        return this._getInterval() * this._calculateCellIndex(rowIndex, cellIndex) + this._calculateHiddenInterval(rowIndex, cellIndex)\r\n    },\r\n    _calculateHiddenInterval: function(rowIndex, cellIndex) {\r\n        var dayCount = cellIndex % this._getCellCount();\r\n        return dayCount * this._getHiddenInterval()\r\n    },\r\n    _getHiddenInterval: function() {\r\n        if (void 0 === this._hiddenInterval) {\r\n            this._hiddenInterval = DAY_MS - this.getVisibleDayDuration()\r\n        }\r\n        return this._hiddenInterval\r\n    },\r\n    _getIntervalBetween: function(currentDate, allDay) {\r\n        var firstViewDate = this.getStartViewDate();\r\n        var startDayTime = this.option(\"startDayHour\") * HOUR_MS;\r\n        var timeZoneOffset = dateUtils.getTimezonesDifference(firstViewDate, currentDate);\r\n        var fullInterval = currentDate.getTime() - firstViewDate.getTime() - timeZoneOffset;\r\n        var days = this._getDaysOfInterval(fullInterval, startDayTime);\r\n        var weekendsCount = this._getWeekendsCount(days);\r\n        var result = (days - weekendsCount) * DAY_MS;\r\n        if (!allDay) {\r\n            result = fullInterval - days * this._getHiddenInterval() - weekendsCount * this.getVisibleDayDuration()\r\n        }\r\n        return result\r\n    },\r\n    _getWeekendsCount: function() {\r\n        return 0\r\n    },\r\n    _getDaysOfInterval: function(fullInterval, startDayTime) {\r\n        return Math.floor((fullInterval + startDayTime) / DAY_MS)\r\n    },\r\n    _getGroupIndexes: function(appointmentResources) {\r\n        var result = [];\r\n        if (appointmentResources && this.option(\"groups\").length) {\r\n            var tree = this.invoke(\"createResourcesTree\", this.option(\"groups\"));\r\n            result = this.invoke(\"getResourceTreeLeaves\", tree, appointmentResources)\r\n        }\r\n        return result\r\n    },\r\n    _updateIndex: function(index) {\r\n        return index * this._getRowCount()\r\n    },\r\n    _getDroppableCell: function() {\r\n        return this._getDateTables().find(\".\" + DATE_TABLE_DROPPABLE_CELL_CLASS)\r\n    },\r\n    _getWorkSpaceWidth: function() {\r\n        if (this._needCreateCrossScrolling()) {\r\n            return this._$dateTable.get(0).getBoundingClientRect().width\r\n        }\r\n        return this.$element().get(0).getBoundingClientRect().width - this.getTimePanelWidth()\r\n    },\r\n    _getCellPositionByIndex: function(index, groupIndex, inAllDayRow) {\r\n        var cellCoordinates = this._getCellCoordinatesByIndex(index);\r\n        var $cell = this._getCellByCoordinates(cellCoordinates, groupIndex, inAllDayRow);\r\n        var result = this._getCellPosition($cell);\r\n        this.setCellDataCache(cellCoordinates, groupIndex, $cell);\r\n        if (result) {\r\n            result.rowIndex = cellCoordinates.rowIndex;\r\n            result.cellIndex = cellCoordinates.cellIndex\r\n        }\r\n        return result\r\n    },\r\n    _getCellPosition: function($cell) {\r\n        var position = $cell.position();\r\n        if (this.option(\"rtlEnabled\")) {\r\n            position.left += $cell.get(0).getBoundingClientRect().width\r\n        }\r\n        return position\r\n    },\r\n    _getCellByCoordinates: function(cellCoordinates, groupIndex, inAllDayRow) {\r\n        var indexes = this._groupedStrategy.prepareCellIndexes(cellCoordinates, groupIndex, inAllDayRow);\r\n        return this._$dateTable.find(\"tr\").eq(indexes.rowIndex).find(\"td\").eq(indexes.cellIndex)\r\n    },\r\n    _getCells: function(allDay, direction) {\r\n        var cellClass = allDay ? ALL_DAY_TABLE_CELL_CLASS : DATE_TABLE_CELL_CLASS;\r\n        if (\"vertical\" === direction) {\r\n            var result = [];\r\n            for (var i = 1;; i++) {\r\n                var cells = this.$element().find(\"tr .\".concat(cellClass, \":nth-child(\").concat(i, \")\"));\r\n                if (!cells.length) {\r\n                    break\r\n                }\r\n                result = result.concat(cells.toArray())\r\n            }\r\n            return $(result)\r\n        } else {\r\n            return this.$element().find(\".\" + cellClass)\r\n        }\r\n    },\r\n    _setHorizontalGroupHeaderCellsHeight: function() {\r\n        var height = this._$dateTable.get(0).getBoundingClientRect().height;\r\n        this._$groupTable.outerHeight(height)\r\n    },\r\n    _getDateTableBorder: function() {\r\n        return DATE_TABLE_CELL_BORDER\r\n    },\r\n    _getDateTableBorderOffset: function() {\r\n        return 2 * this._getDateTableBorder()\r\n    },\r\n    _getGroupHeaderCellsContent: function() {\r\n        return this.$element().find(\".\" + GROUP_HEADER_CONTENT_CLASS)\r\n    },\r\n    _getGroupHeaderCells: function() {\r\n        return this.$element().find(\".\" + GROUP_HEADER_CLASS)\r\n    },\r\n    _getScrollCoordinates: function(hours, minutes, date) {\r\n        var currentDate = date || new Date(this.option(\"currentDate\"));\r\n        var startDayHour = this.option(\"startDayHour\");\r\n        var endDayHour = this.option(\"endDayHour\");\r\n        if (hours < startDayHour) {\r\n            hours = startDayHour\r\n        }\r\n        if (hours >= endDayHour) {\r\n            hours = endDayHour - 1\r\n        }\r\n        currentDate.setHours(hours, minutes, 0, 0);\r\n        return this.getCoordinatesByDate(currentDate)\r\n    },\r\n    setCellDataCache: function(cellCoordinates, groupIndex, $cell) {\r\n        var cache = this.getCellDataCache();\r\n        var data = this.getCellData($cell);\r\n        var key = JSON.stringify({\r\n            rowIndex: cellCoordinates.rowIndex,\r\n            cellIndex: cellCoordinates.cellIndex,\r\n            groupIndex: groupIndex\r\n        });\r\n        cache[key] = data\r\n    },\r\n    setCellDataCacheAlias: function(appointment, geometry) {\r\n        var key = JSON.stringify({\r\n            rowIndex: appointment.rowIndex,\r\n            cellIndex: appointment.cellIndex,\r\n            groupIndex: appointment.groupIndex\r\n        });\r\n        var aliasKey = JSON.stringify({\r\n            top: geometry.top,\r\n            left: geometry.left\r\n        });\r\n        var cache = this.getCellDataCache();\r\n        if (cache[key]) {\r\n            cache[aliasKey] = cache[key]\r\n        }\r\n    },\r\n    getCellDataCache: function(key) {\r\n        if (!this._cache) {\r\n            this._cache = {}\r\n        }\r\n        return key ? this._cache[key] : this._cache\r\n    },\r\n    _cleanCellDataCache: function() {\r\n        delete this._cache\r\n    },\r\n    _cleanAllowedPositions: function() {\r\n        delete this._maxAllowedVerticalPosition;\r\n        delete this._maxAllowedPosition\r\n    },\r\n    supportAllDayRow: function() {\r\n        return true\r\n    },\r\n    keepOriginalHours: function() {\r\n        return false\r\n    },\r\n    getFocusedCellData: function() {\r\n        var $focusedCells = this._getAllFocusedCells();\r\n        var result = [];\r\n        if ($focusedCells.length > 1) {\r\n            result = this._getMultipleCellsData($focusedCells)\r\n        } else {\r\n            var data = this.getCellData($focusedCells);\r\n            data && result.push(data)\r\n        }\r\n        return result\r\n    },\r\n    _getMultipleCellsData: function($cells) {\r\n        var data = [];\r\n        for (var i = 0; i < $cells.length; i++) {\r\n            data.push(dataUtils.data($cells[i], CELL_DATA))\r\n        }\r\n        return data\r\n    },\r\n    getCellData: function($cell) {\r\n        var data = $cell[0] ? dataUtils.data($cell[0], CELL_DATA) : void 0;\r\n        return extend(true, {}, data)\r\n    },\r\n    _getHorizontalMax: function(groupIndex) {\r\n        groupIndex = this.option(\"groupByDate\") ? this._getGroupCount() - 1 : groupIndex;\r\n        return this._groupedStrategy.getHorizontalMax(groupIndex)\r\n    },\r\n    getCoordinatesByDate: function(date, groupIndex, inAllDayRow) {\r\n        groupIndex = groupIndex || 0;\r\n        var index = this.getCellIndexByDate(date, inAllDayRow);\r\n        var position = this._getCellPositionByIndex(index, groupIndex, inAllDayRow);\r\n        var shift = this.getPositionShift(inAllDayRow ? 0 : this.getTimeShift(date), inAllDayRow);\r\n        var horizontalHMax = this._getHorizontalMax(groupIndex, date);\r\n        if (!position) {\r\n            throw errors.Error(\"E1039\")\r\n        }\r\n        var coordinates = {\r\n            cellPosition: position.left + shift.cellPosition,\r\n            top: position.top + shift.top,\r\n            left: position.left + shift.left,\r\n            rowIndex: position.rowIndex,\r\n            cellIndex: position.cellIndex,\r\n            hMax: horizontalHMax,\r\n            vMax: this.getVerticalMax(groupIndex),\r\n            groupIndex: groupIndex\r\n        };\r\n        return coordinates\r\n    },\r\n    getVerticalMax: function(groupIndex) {\r\n        return this._groupedStrategy.getVerticalMax(groupIndex)\r\n    },\r\n    _getOffsetByAllDayPanel: function(groupIndex) {\r\n        return this._groupedStrategy._getOffsetByAllDayPanel(groupIndex)\r\n    },\r\n    _getGroupTop: function(groupIndex) {\r\n        return this._groupedStrategy._getGroupTop(groupIndex)\r\n    },\r\n    isGroupedByDate: function() {\r\n        return this.option(\"groupByDate\") && this._isHorizontalGroupedWorkSpace() && this._getGroupCount() > 0\r\n    },\r\n    getCellIndexByDate: function(date, inAllDayRow) {\r\n        var timeInterval = inAllDayRow ? 864e5 : this._getInterval();\r\n        var dateTimeStamp = this._getIntervalBetween(date, inAllDayRow);\r\n        var index = Math.floor(dateTimeStamp / timeInterval);\r\n        if (inAllDayRow) {\r\n            index = this._updateIndex(index)\r\n        }\r\n        if (index < 0) {\r\n            index = 0\r\n        }\r\n        return index\r\n    },\r\n    getPositionShift: function(timeShift, isAllDay) {\r\n        return {\r\n            top: timeShift * this.getCellHeight(),\r\n            left: 0,\r\n            cellPosition: 0\r\n        }\r\n    },\r\n    getTimeShift: function(date) {\r\n        var cellDuration = this.getCellDuration();\r\n        var currentDayStart = new Date(date);\r\n        var currentDayEndHour = new Date(new Date(date).setHours(this.option(\"endDayHour\"), 0, 0));\r\n        if (date.getTime() <= currentDayEndHour.getTime()) {\r\n            currentDayStart.setHours(this.option(\"startDayHour\"), 0, 0, 0)\r\n        }\r\n        var currentDateTime = date.getTime();\r\n        var currentDayStartTime = currentDayStart.getTime();\r\n        var minTime = this._firstViewDate.getTime();\r\n        return currentDateTime > minTime ? (currentDateTime - currentDayStartTime) % cellDuration / cellDuration : 0\r\n    },\r\n    getCoordinatesByDateInGroup: function(date, appointmentResources, inAllDayRow) {\r\n        var indexes = this._getGroupIndexes(appointmentResources);\r\n        var result = [];\r\n        if (indexes.length) {\r\n            for (var i = 0; i < indexes.length; i++) {\r\n                result.push(this.getCoordinatesByDate(date, indexes[i], inAllDayRow))\r\n            }\r\n        } else {\r\n            result.push(this.getCoordinatesByDate(date, 0, inAllDayRow))\r\n        }\r\n        return result\r\n    },\r\n    getDroppableCellIndex: function() {\r\n        var $droppableCell = this._getDroppableCell();\r\n        var $row = $droppableCell.parent();\r\n        var rowIndex = $row.index();\r\n        return rowIndex * $row.find(\"td\").length + $droppableCell.index()\r\n    },\r\n    getDataByDroppableCell: function() {\r\n        var cellData = this.getCellData(this._getDroppableCell());\r\n        return {\r\n            date: cellData.startDate,\r\n            allDay: cellData.allDay,\r\n            groups: cellData.groups\r\n        }\r\n    },\r\n    getDateRange: function() {\r\n        return [this.getStartViewDate(), this.getEndViewDate()]\r\n    },\r\n    getCellWidth: function() {\r\n        var cell = this._getCells().first().get(0);\r\n        return cell && cell.getBoundingClientRect().width\r\n    },\r\n    getCellMinWidth: function() {\r\n        return DATE_TABLE_MIN_CELL_WIDTH\r\n    },\r\n    getRoundedCellWidth: function(groupIndex, startIndex, cellCount) {\r\n        if (groupIndex < 0) {\r\n            return 0\r\n        }\r\n        var $row = this.$element().find(\".\" + this._getDateTableRowClass()).eq(0);\r\n        var width = 0;\r\n        var $cells = $row.find(\".\" + DATE_TABLE_CELL_CLASS);\r\n        var totalCellCount = this._getCellCount() * groupIndex;\r\n        cellCount = cellCount || this._getCellCount();\r\n        if (!typeUtils.isDefined(startIndex)) {\r\n            startIndex = totalCellCount\r\n        }\r\n        for (var i = startIndex; i < totalCellCount + cellCount; i++) {\r\n            width += $($cells).eq(i).get(0).getBoundingClientRect().width\r\n        }\r\n        return width / (totalCellCount + cellCount - startIndex)\r\n    },\r\n    getCellHeight: function() {\r\n        var cell = this._getCells().first().get(0);\r\n        return cell && cell.getBoundingClientRect().height\r\n    },\r\n    getAllDayHeight: function() {\r\n        var cell = this._getCells(true).first().get(0);\r\n        return this.option(\"showAllDayPanel\") ? cell && cell.getBoundingClientRect().height || 0 : 0\r\n    },\r\n    getAllDayOffset: function() {\r\n        return this._groupedStrategy.getAllDayOffset()\r\n    },\r\n    getMaxAllowedPosition: function() {\r\n        if (!this._maxAllowedPosition) {\r\n            var isRtl = this.option(\"rtlEnabled\");\r\n            this._maxAllowedPosition = [];\r\n            this._$dateTable.find(\"tr\").first().find(\"td:nth-child(\" + this._getCellCount() + \"n)\").each(function(_, cell) {\r\n                var maxPosition = $(cell).position().left;\r\n                if (!isRtl) {\r\n                    maxPosition += $(cell).get(0).getBoundingClientRect().width\r\n                }\r\n                this._maxAllowedPosition.push(Math.round(maxPosition))\r\n            }.bind(this))\r\n        }\r\n        return this._maxAllowedPosition\r\n    },\r\n    getMaxAllowedVerticalPosition: function() {\r\n        if (!this._maxAllowedVerticalPosition) {\r\n            var that = this;\r\n            this._maxAllowedVerticalPosition = [];\r\n            var rows = this._getRowCount();\r\n            this._$dateTable.find(\"tr:nth-child(\" + rows + \"n)\").each(function(_, row) {\r\n                var maxPosition = $(row).position().top + $(row).get(0).getBoundingClientRect().height;\r\n                that._maxAllowedVerticalPosition.push(Math.round(maxPosition))\r\n            })\r\n        }\r\n        return this._maxAllowedVerticalPosition\r\n    },\r\n    getFixedContainer: function() {\r\n        return this._$fixedContainer\r\n    },\r\n    getAllDayContainer: function() {\r\n        return this._$allDayContainer\r\n    },\r\n    getCellIndexByCoordinates: function(coordinates, allDay) {\r\n        var cellCount = this._getTotalCellCount(this._getGroupCount());\r\n        var cellWidth = Math.floor(this._getWorkSpaceWidth() / cellCount);\r\n        var cellHeight = allDay ? this.getAllDayHeight() : this.getCellHeight();\r\n        var leftOffset = this._isRTL() || this.option(\"crossScrollingEnabled\") ? 0 : this.getWorkSpaceLeftOffset();\r\n        var topIndex = Math.floor(Math.floor(coordinates.top) / Math.floor(cellHeight));\r\n        var leftIndex = Math.floor((coordinates.left + 5 - leftOffset) / cellWidth);\r\n        if (this._isRTL()) {\r\n            leftIndex = cellCount - leftIndex - 1\r\n        }\r\n        return cellCount * topIndex + leftIndex\r\n    },\r\n    getStartViewDate: function() {\r\n        return this._firstViewDate\r\n    },\r\n    getEndViewDate: function() {\r\n        var dateOfLastViewCell = this.getDateOfLastViewCell();\r\n        var endDateOfLastViewCell = this.calculateEndViewDate(dateOfLastViewCell);\r\n        return this._adjustEndViewDateByDaylightDiff(dateOfLastViewCell, endDateOfLastViewCell)\r\n    },\r\n    calculateEndViewDate: function(dateOfLastViewCell) {\r\n        return new Date(dateOfLastViewCell.getTime() + this.getCellDuration())\r\n    },\r\n    _adjustEndViewDateByDaylightDiff: function(startDate, endDate) {\r\n        var daylightDiff = this.invoke(\"getDaylightOffset\", startDate, endDate) * toMs(\"minute\") || 0;\r\n        var endDateOfLastViewCell = new Date(endDate.getTime() - daylightDiff);\r\n        return new Date(endDateOfLastViewCell.getTime() - toMs(\"minute\"))\r\n    },\r\n    getDateOfLastViewCell: function() {\r\n        var rowIndex = this._getRowCount() - 1;\r\n        var cellIndex = this._getCellCount();\r\n        if (this.option(\"groupByDate\") && this._getGroupCount() > 0) {\r\n            cellIndex = cellIndex * this._getGroupCount() - 1\r\n        } else {\r\n            cellIndex -= 1\r\n        }\r\n        return this._getDateByCellIndexes(rowIndex, cellIndex, true)\r\n    },\r\n    getCellDuration: function() {\r\n        return 36e5 * this.option(\"hoursInterval\")\r\n    },\r\n    getIntervalDuration: function(allDay) {\r\n        return allDay ? toMs(\"day\") : this.getCellDuration()\r\n    },\r\n    getVisibleDayDuration: function() {\r\n        return this.option(\"hoursInterval\") * this._getCellCountInDay() * HOUR_MS\r\n    },\r\n    getGroupBounds: function(coordinates) {\r\n        var cellCount = this._getCellCount();\r\n        var $cells = this._getCells();\r\n        var cellWidth = this.getCellWidth();\r\n        var result = this._groupedStrategy.getGroupBoundsOffset(cellCount, $cells, cellWidth, coordinates);\r\n        if (this._isRTL()) {\r\n            var startOffset = result.left;\r\n            result.left = result.right - 2 * cellWidth;\r\n            result.right = startOffset + 2 * cellWidth\r\n        }\r\n        return result\r\n    },\r\n    needRecalculateResizableArea: function() {\r\n        return this._isVerticalGroupedWorkSpace() && 0 !== this.getScrollable().scrollTop()\r\n    },\r\n    getCellDataByCoordinates: function(coordinates, allDay) {\r\n        var key = JSON.stringify({\r\n            top: coordinates.top,\r\n            left: coordinates.left\r\n        });\r\n        var data = this.getCellDataCache(key);\r\n        if (data) {\r\n            return data\r\n        }\r\n        var $cells = this._getCells(allDay);\r\n        var cellIndex = this.getCellIndexByCoordinates(coordinates, allDay);\r\n        var $cell = $cells.eq(cellIndex);\r\n        return this.getCellData($cell)\r\n    },\r\n    getVisibleBounds: function() {\r\n        var result = {};\r\n        var $scrollable = this.getScrollable().$element();\r\n        var cellHeight = this.getCellHeight();\r\n        var scrolledCellCount = this.getScrollableScrollTop() / cellHeight;\r\n        var totalCellCount = scrolledCellCount + $scrollable.height() / cellHeight;\r\n        result.top = {\r\n            hours: Math.floor(scrolledCellCount * this.option(\"hoursInterval\")) + this.option(\"startDayHour\"),\r\n            minutes: scrolledCellCount % 2 ? 30 : 0\r\n        };\r\n        result.bottom = {\r\n            hours: Math.floor(totalCellCount * this.option(\"hoursInterval\")) + this.option(\"startDayHour\"),\r\n            minutes: Math.floor(totalCellCount) % 2 ? 30 : 0\r\n        };\r\n        return result\r\n    },\r\n    updateScrollPosition: function(date) {\r\n        date = this.invoke(\"convertDateByTimezone\", date);\r\n        var bounds = this.getVisibleBounds();\r\n        var startDateHour = date.getHours();\r\n        var startDateMinutes = date.getMinutes();\r\n        if (this.needUpdateScrollPosition(startDateHour, startDateMinutes, bounds, date)) {\r\n            this.scrollToTime(startDateHour, startDateMinutes, date)\r\n        }\r\n    },\r\n    needUpdateScrollPosition: function(hours, minutes, bounds) {\r\n        var isUpdateNeeded = false;\r\n        if (hours < bounds.top.hours || hours > bounds.bottom.hours) {\r\n            isUpdateNeeded = true\r\n        }\r\n        if (hours === bounds.top.hours && minutes < bounds.top.minutes) {\r\n            isUpdateNeeded = true\r\n        }\r\n        if (hours === bounds.bottom.hours && minutes > bounds.top.minutes) {\r\n            isUpdateNeeded = true\r\n        }\r\n        return isUpdateNeeded\r\n    },\r\n    getGroupWidth: function(groupIndex) {\r\n        var result = this._getCellCount() * this.getCellWidth();\r\n        var position = this.getMaxAllowedPosition();\r\n        var currentPosition = position[groupIndex];\r\n        if (position.length && currentPosition) {\r\n            if (this._isRTL()) {\r\n                result = currentPosition - position[groupIndex + 1]\r\n            } else {\r\n                if (0 === groupIndex) {\r\n                    result = currentPosition\r\n                } else {\r\n                    result = currentPosition - position[groupIndex - 1]\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    restoreScrollTop: function() {\r\n        this.$element().scrollTop(0)\r\n    },\r\n    scrollToTime: function(hours, minutes, date) {\r\n        var min = this.getStartViewDate();\r\n        var max = this.getEndViewDate();\r\n        if (date < min || date > max) {\r\n            errors.log(\"W1008\", date);\r\n            return\r\n        }\r\n        var coordinates = this._getScrollCoordinates(hours, minutes, date);\r\n        var scrollable = this.getScrollable();\r\n        scrollable.scrollBy({\r\n            top: coordinates.top - scrollable.scrollTop(),\r\n            left: 0\r\n        })\r\n    },\r\n    getDistanceBetweenCells: function(startIndex, endIndex) {\r\n        var result = 0;\r\n        this.$element().find(\".\" + this._getDateTableRowClass()).first().find(\".\" + DATE_TABLE_CELL_CLASS).each(function(index) {\r\n            if (index < startIndex || index > endIndex) {\r\n                return true\r\n            }\r\n            result += $(this).get(0).getBoundingClientRect().width\r\n        });\r\n        return result\r\n    },\r\n    needApplyCollectorOffset: function() {\r\n        return false\r\n    },\r\n    initDragBehavior: function(scheduler) {\r\n        if (!this.dragBehavior && scheduler) {\r\n            this.dragBehavior = new AppointmentDragBehavior(scheduler);\r\n            this.dragBehavior.addTo(this.getWorkArea());\r\n            this.dragBehavior.addTo(this.getAllDayContainer());\r\n            this.dragBehavior.addTo(this._$allDayPanel)\r\n        }\r\n        this._attachTablesEvents()\r\n    },\r\n    _isApplyCompactAppointmentOffset: function() {\r\n        return this._supportCompactDropDownAppointments()\r\n    },\r\n    _supportCompactDropDownAppointments: function() {\r\n        return true\r\n    },\r\n    _formatWeekday: function(date) {\r\n        return formatWeekday(date)\r\n    },\r\n    _formatWeekdayAndDay: function(date) {\r\n        return formatWeekday(date) + \" \" + dateLocalization.format(date, \"day\")\r\n    }\r\n}).include(publisherMixin);\r\nmodule.exports = SchedulerWorkSpace;\r\n"]},"metadata":{},"sourceType":"module"}