{"ast":null,"code":"/**\r\n * DevExtreme (ui/calendar/ui.calendar.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar Guid = require(\"../../core/guid\");\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar inRange = require(\"../../core/utils/math\").inRange;\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar Button = require(\"../button\");\n\nvar Editor = require(\"../editor/editor\");\n\nvar Swipeable = require(\"../../events/gesture/swipeable\");\n\nvar Navigator = require(\"./ui.calendar.navigator\");\n\nvar Views = require(\"./ui.calendar.views\");\n\nvar translator = require(\"../../animation/translator\");\n\nvar browser = require(\"../../core/utils/browser\");\n\nvar dateUtils = require(\"../../core/utils/date\");\n\nvar dateSerialization = require(\"../../core/utils/date_serialization\");\n\nvar devices = require(\"../../core/devices\");\n\nvar fx = require(\"../../animation/fx\");\n\nvar windowUtils = require(\"../../core/utils/window\");\n\nvar messageLocalization = require(\"../../localization/message\");\n\nvar FunctionTemplate = require(\"../../core/templates/function_template\").FunctionTemplate;\n\nvar CALENDAR_CLASS = \"dx-calendar\";\nvar CALENDAR_BODY_CLASS = \"dx-calendar-body\";\nvar CALENDAR_CELL_CLASS = \"dx-calendar-cell\";\nvar CALENDAR_FOOTER_CLASS = \"dx-calendar-footer\";\nvar CALENDAR_TODAY_BUTTON_CLASS = \"dx-calendar-today-button\";\nvar CALENDAR_HAS_FOOTER_CLASS = \"dx-calendar-with-footer\";\nvar CALENDAR_VIEWS_WRAPPER_CLASS = \"dx-calendar-views-wrapper\";\nvar CALENDAR_VIEW_CLASS = \"dx-calendar-view\";\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\nvar ANIMATION_DURATION_SHOW_VIEW = 250;\nvar POP_ANIMATION_FROM = .6;\nvar POP_ANIMATION_TO = 1;\nvar CALENDAR_INPUT_STANDARD_PATTERN = \"yyyy-MM-dd\";\nvar CALENDAR_DATE_VALUE_KEY = \"dxDateValueKey\";\nvar LEVEL_COMPARE_MAP = {\n  month: 3,\n  year: 2,\n  decade: 1,\n  century: 0\n};\nvar ZOOM_LEVEL = {\n  MONTH: \"month\",\n  YEAR: \"year\",\n  DECADE: \"decade\",\n  CENTURY: \"century\"\n};\nvar Calendar = Editor.inherit({\n  _activeStateUnit: \".\" + CALENDAR_CELL_CLASS,\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      hoverStateEnabled: true,\n      activeStateEnabled: true,\n      currentDate: new Date(),\n      value: null,\n      dateSerializationFormat: void 0,\n      min: new Date(1e3, 0),\n      max: new Date(3e3, 0),\n      firstDayOfWeek: void 0,\n      zoomLevel: ZOOM_LEVEL.MONTH,\n      maxZoomLevel: ZOOM_LEVEL.MONTH,\n      minZoomLevel: ZOOM_LEVEL.CENTURY,\n      showTodayButton: false,\n      cellTemplate: \"cell\",\n      disabledDates: null,\n      onCellClick: null,\n      onContouredChanged: null,\n      hasFocus: function hasFocus(element) {\n        return element.hasClass(FOCUSED_STATE_CLASS);\n      }\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _supportedKeys: function _supportedKeys() {\n    return extend(this.callBase(), {\n      rightArrow: function rightArrow(e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._waitRenderView(1);\n        } else {\n          this._moveCurrentDate(1 * this._getRtlCorrection());\n        }\n      },\n      leftArrow: function leftArrow(e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._waitRenderView(-1);\n        } else {\n          this._moveCurrentDate(-1 * this._getRtlCorrection());\n        }\n      },\n      upArrow: function upArrow(e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._navigateUp();\n        } else {\n          if (fx.isAnimating(this._view.$element())) {\n            return;\n          }\n\n          this._moveCurrentDate(-1 * this._view.option(\"colCount\"));\n        }\n      },\n      downArrow: function downArrow(e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._navigateDown();\n        } else {\n          if (fx.isAnimating(this._view.$element())) {\n            return;\n          }\n\n          this._moveCurrentDate(1 * this._view.option(\"colCount\"));\n        }\n      },\n      home: function home(e) {\n        e.preventDefault();\n        var zoomLevel = this.option(\"zoomLevel\");\n        var currentDate = this.option(\"currentDate\");\n\n        var min = this._dateOption(\"min\");\n\n        var date = dateUtils.sameView(zoomLevel, currentDate, min) ? min : dateUtils.getViewFirstCellDate(zoomLevel, currentDate);\n\n        this._moveToClosestAvailableDate(date, 1);\n      },\n      end: function end(e) {\n        e.preventDefault();\n        var zoomLevel = this.option(\"zoomLevel\");\n        var currentDate = this.option(\"currentDate\");\n\n        var max = this._dateOption(\"max\");\n\n        var date = dateUtils.sameView(zoomLevel, currentDate, max) ? max : dateUtils.getViewLastCellDate(zoomLevel, currentDate);\n\n        this._moveToClosestAvailableDate(date, -1);\n      },\n      pageUp: function pageUp(e) {\n        e.preventDefault();\n\n        this._waitRenderView(-1);\n      },\n      pageDown: function pageDown(e) {\n        e.preventDefault();\n\n        this._waitRenderView(1);\n      },\n      tab: noop,\n      enter: function enter(e) {\n        if (!this._isMaxZoomLevel()) {\n          this._navigateDown();\n        } else {\n          var value = this._updateTimeComponent(this.option(\"currentDate\"));\n\n          this._dateValue(value, e);\n        }\n      }\n    });\n  },\n  _getSerializationFormat: function _getSerializationFormat(optionName) {\n    var value = this.option(optionName || \"value\");\n\n    if (this.option(\"dateSerializationFormat\")) {\n      return this.option(\"dateSerializationFormat\");\n    }\n\n    if (typeUtils.isNumeric(value)) {\n      return \"number\";\n    }\n\n    if (!typeUtils.isString(value)) {\n      return;\n    }\n\n    return dateSerialization.getDateSerializationFormat(value);\n  },\n  _convertToDate: function _convertToDate(value, optionName) {\n    return dateSerialization.deserializeDate(value);\n  },\n  _dateValue: function _dateValue(value, dxEvent) {\n    if (dxEvent) {\n      this._saveValueChangeEvent(dxEvent);\n    }\n\n    this._dateOption(\"value\", value);\n  },\n  _dateOption: function _dateOption(optionName, optionValue) {\n    if (1 === arguments.length) {\n      return this._convertToDate(this.option(optionName), optionName);\n    }\n\n    var serializationFormat = this._getSerializationFormat(optionName);\n\n    this.option(optionName, dateSerialization.serializeDate(optionValue, serializationFormat));\n  },\n  _moveCurrentDate: function _moveCurrentDate(offset, baseDate) {\n    var currentDate = baseDate || new Date(this.option(\"currentDate\"));\n\n    var maxDate = this._getMaxDate();\n\n    var minDate = this._getMinDate();\n\n    var zoomLevel = this.option(\"zoomLevel\");\n    var isCurrentDateInRange = inRange(currentDate, minDate, maxDate);\n    var dateForward = new Date(currentDate);\n    var dateBackward = new Date(currentDate);\n    var isDateForwardInRange = isCurrentDateInRange;\n    var isDateBackwardInRange = isCurrentDateInRange;\n    var step = offset || 1;\n\n    while (!offset && (isDateForwardInRange || isDateBackwardInRange) || offset && isDateForwardInRange) {\n      switch (zoomLevel) {\n        case ZOOM_LEVEL.MONTH:\n          dateForward.setDate(dateForward.getDate() + step);\n          dateBackward.setDate(dateBackward.getDate() - step);\n          break;\n\n        case ZOOM_LEVEL.YEAR:\n          dateForward.setMonth(dateForward.getMonth() + step);\n          dateBackward.setMonth(dateBackward.getMonth() - step);\n          break;\n\n        case ZOOM_LEVEL.DECADE:\n          dateForward.setFullYear(dateForward.getFullYear() + step);\n          dateBackward.setFullYear(dateBackward.getFullYear() - step);\n          break;\n\n        case ZOOM_LEVEL.CENTURY:\n          dateForward.setFullYear(dateForward.getFullYear() + 10 * step);\n          dateBackward.setFullYear(dateBackward.getFullYear() - 10 * step);\n      }\n\n      if (isDateForwardInRange && !this._view.isDateDisabled(dateForward)) {\n        currentDate = dateForward;\n        break;\n      }\n\n      if (isDateBackwardInRange && !offset && !this._view.isDateDisabled(dateBackward)) {\n        currentDate = dateBackward;\n        break;\n      }\n\n      isDateBackwardInRange = inRange(dateBackward, minDate, maxDate);\n      isDateForwardInRange = inRange(dateForward, minDate, maxDate);\n    }\n\n    this.option(\"currentDate\", currentDate);\n  },\n  _moveToClosestAvailableDate: function _moveToClosestAvailableDate(baseDate, offset) {\n    if (this._view.isDateDisabled(baseDate)) {\n      this._moveCurrentDate(offset, baseDate);\n    } else {\n      this.option(\"currentDate\", baseDate);\n    }\n  },\n  _init: function _init() {\n    this.callBase();\n\n    this._correctZoomLevel();\n\n    this._initCurrentDate();\n\n    this._initActions();\n  },\n  _correctZoomLevel: function _correctZoomLevel() {\n    var minZoomLevel = this.option(\"minZoomLevel\");\n    var maxZoomLevel = this.option(\"maxZoomLevel\");\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    if (LEVEL_COMPARE_MAP[maxZoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\n      return;\n    }\n\n    if (LEVEL_COMPARE_MAP[zoomLevel] > LEVEL_COMPARE_MAP[maxZoomLevel]) {\n      this.option(\"zoomLevel\", maxZoomLevel);\n    } else {\n      if (LEVEL_COMPARE_MAP[zoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\n        this.option(\"zoomLevel\", minZoomLevel);\n      }\n    }\n  },\n  _initCurrentDate: function _initCurrentDate() {\n    var currentDate = this._getNormalizedDate(this._dateOption(\"value\")) || this._getNormalizedDate(this.option(\"currentDate\"));\n\n    this.option(\"currentDate\", currentDate);\n  },\n  _getNormalizedDate: function _getNormalizedDate(date) {\n    date = dateUtils.normalizeDate(date, this._getMinDate(), this._getMaxDate());\n    return typeUtils.isDefined(date) ? new Date(date) : date;\n  },\n  _initActions: function _initActions() {\n    this._cellClickAction = this._createActionByOption(\"onCellClick\");\n    this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates.cell = new FunctionTemplate(function (options) {\n      var data = options.model;\n      $(options.container).append($(\"<span>\").text(data && data.text || String(data)));\n    });\n  },\n  _updateCurrentDate: function _updateCurrentDate(date) {\n    if (fx.isAnimating(this._$viewsWrapper)) {\n      fx.stop(this._$viewsWrapper, true);\n    }\n\n    var min = this._getMinDate();\n\n    var max = this._getMaxDate();\n\n    if (min > max) {\n      this.option(\"currentDate\", new Date());\n      return;\n    }\n\n    var normalizedDate = this._getNormalizedDate(date);\n\n    if (date.getTime() !== normalizedDate.getTime()) {\n      this.option(\"currentDate\", new Date(normalizedDate));\n      return;\n    }\n\n    var offset = this._getViewsOffset(this._view.option(\"date\"), normalizedDate);\n\n    if (0 !== offset && !this._isMaxZoomLevel() && this._isOtherViewCellClicked) {\n      offset = 0;\n    }\n\n    if (this._view && 0 !== offset && !this._suppressNavigation) {\n      this._navigate(offset, normalizedDate);\n    } else {\n      this._renderNavigator();\n\n      this._setViewContoured(normalizedDate);\n\n      this._updateAriaId(normalizedDate);\n    }\n  },\n  _setViewContoured: function _setViewContoured(date) {\n    if (this.option(\"hasFocus\")(this._focusTarget())) {\n      this._view.option(\"contouredDate\", date);\n    }\n  },\n  _getMinDate: function _getMinDate() {\n    if (this.min) {\n      return this.min;\n    }\n\n    this.min = this._dateOption(\"min\") || new Date(1e3, 0);\n    return this.min;\n  },\n  _getMaxDate: function _getMaxDate() {\n    if (this.max) {\n      return this.max;\n    }\n\n    this.max = this._dateOption(\"max\") || new Date(3e3, 0);\n    return this.max;\n  },\n  _getViewsOffset: function _getViewsOffset(startDate, endDate) {\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    if (zoomLevel === ZOOM_LEVEL.MONTH) {\n      return this._getMonthsOffset(startDate, endDate);\n    }\n\n    var zoomCorrection;\n\n    switch (zoomLevel) {\n      case ZOOM_LEVEL.CENTURY:\n        zoomCorrection = 100;\n        break;\n\n      case ZOOM_LEVEL.DECADE:\n        zoomCorrection = 10;\n        break;\n\n      default:\n        zoomCorrection = 1;\n    }\n\n    return parseInt(endDate.getFullYear() / zoomCorrection) - parseInt(startDate.getFullYear() / zoomCorrection);\n  },\n  _getMonthsOffset: function _getMonthsOffset(startDate, endDate) {\n    var yearOffset = endDate.getFullYear() - startDate.getFullYear();\n    var monthOffset = endDate.getMonth() - startDate.getMonth();\n    return 12 * yearOffset + monthOffset;\n  },\n  _waitRenderView: function _waitRenderView(offset) {\n    if (this._alreadyViewRender) {\n      return;\n    }\n\n    this._alreadyViewRender = true;\n\n    var date = this._getDateByOffset(offset * this._getRtlCorrection());\n\n    this._moveToClosestAvailableDate(date, offset);\n\n    setTimeout(function () {\n      this._alreadyViewRender = false;\n    }.bind(this));\n  },\n  _getRtlCorrection: function _getRtlCorrection() {\n    return this.option(\"rtlEnabled\") ? -1 : 1;\n  },\n  _getDateByOffset: function _getDateByOffset(offset, date) {\n    date = new Date(date || this.option(\"currentDate\"));\n    var currentDay = date.getDate();\n    var difference = dateUtils.getDifferenceInMonth(this.option(\"zoomLevel\")) * offset;\n    date.setDate(1);\n    date.setMonth(date.getMonth() + difference);\n    var lastDay = dateUtils.getLastMonthDate(date).getDate();\n    date.setDate(currentDay > lastDay ? lastDay : currentDay);\n    return date;\n  },\n  _focusTarget: function _focusTarget() {\n    return this.$element();\n  },\n  _initMarkup: function _initMarkup() {\n    this._renderSubmitElement();\n\n    this.callBase();\n    var $element = this.$element();\n    $element.addClass(CALENDAR_CLASS);\n\n    this._renderBody();\n\n    $element.append(this.$body);\n\n    this._renderViews();\n\n    this._renderNavigator();\n\n    $element.append(this._navigator.$element());\n\n    this._renderSwipeable();\n\n    this._renderFooter();\n\n    this.setAria({\n      role: \"listbox\",\n      label: messageLocalization.format(\"dxCalendar-ariaWidgetName\")\n    });\n\n    this._updateAriaSelected();\n\n    this._updateAriaId();\n\n    if (this._view.isDateDisabled(this.option(\"currentDate\"))) {\n      this._moveCurrentDate(0);\n    }\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._setViewContoured(this.option(\"currentDate\"));\n  },\n  _renderBody: function _renderBody() {\n    if (!this._$viewsWrapper) {\n      this.$body = $(\"<div>\").addClass(CALENDAR_BODY_CLASS);\n      this._$viewsWrapper = $(\"<div>\").addClass(CALENDAR_VIEWS_WRAPPER_CLASS);\n      this.$body.append(this._$viewsWrapper);\n    }\n  },\n  _renderViews: function _renderViews() {\n    this.$element().addClass(CALENDAR_VIEW_CLASS + \"-\" + this.option(\"zoomLevel\"));\n    var currentDate = this.option(\"currentDate\");\n    this._view = this._renderSpecificView(currentDate);\n\n    this._view.option(\"_keyboardProcessor\", this._viewKeyboardProcessor);\n\n    if (windowUtils.hasWindow()) {\n      var beforeDate = this._getDateByOffset(-1, currentDate);\n\n      this._beforeView = this._isViewAvailable(beforeDate) ? this._renderSpecificView(beforeDate) : null;\n\n      var afterDate = this._getDateByOffset(1, currentDate);\n\n      afterDate.setDate(1);\n      this._afterView = this._isViewAvailable(afterDate) ? this._renderSpecificView(afterDate) : null;\n    }\n\n    this._translateViews();\n  },\n  _renderSpecificView: function _renderSpecificView(date) {\n    var specificView = Views[this.option(\"zoomLevel\")];\n    var $view = $(\"<div>\").appendTo(this._$viewsWrapper);\n\n    var config = this._viewConfig(date);\n\n    return new specificView($view, config);\n  },\n  _viewConfig: function _viewConfig(date) {\n    var disabledDates = this.option(\"disabledDates\");\n    disabledDates = typeUtils.isFunction(disabledDates) ? this._injectComponent(disabledDates.bind(this)) : disabledDates;\n    return {\n      date: date,\n      min: this._getMinDate(),\n      max: this._getMaxDate(),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      value: this._dateOption(\"value\"),\n      rtl: this.option(\"rtlEnabled\"),\n      disabled: this.option(\"disabled\"),\n      tabIndex: void 0,\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      disabledDates: disabledDates,\n      onCellClick: this._cellClickHandler.bind(this),\n      cellTemplate: this._getTemplateByOption(\"cellTemplate\"),\n      allowValueSelection: this._isMaxZoomLevel()\n    };\n  },\n  _injectComponent: function _injectComponent(func) {\n    var that = this;\n    return function (params) {\n      extend(params, {\n        component: that\n      });\n      return func(params);\n    };\n  },\n  _isViewAvailable: function _isViewAvailable(date) {\n    var zoomLevel = this.option(\"zoomLevel\");\n    var min = dateUtils.getViewMinBoundaryDate(zoomLevel, this._getMinDate());\n    var max = dateUtils.getViewMaxBoundaryDate(zoomLevel, this._getMaxDate());\n    return dateUtils.dateInRange(date, min, max);\n  },\n  _translateViews: function _translateViews() {\n    translator.move(this._view.$element(), {\n      left: 0,\n      top: 0\n    });\n    this._beforeView && translator.move(this._beforeView.$element(), {\n      left: this._getViewPosition(-1),\n      top: 0\n    });\n    this._afterView && translator.move(this._afterView.$element(), {\n      left: this._getViewPosition(1),\n      top: 0\n    });\n  },\n  _getViewPosition: function _getViewPosition(coefficient) {\n    var rtlCorrection = this.option(\"rtlEnabled\") && !browser.msie ? -1 : 1;\n    return 100 * coefficient * rtlCorrection + \"%\";\n  },\n  _cellClickHandler: function _cellClickHandler(e) {\n    var zoomLevel = this.option(\"zoomLevel\");\n    var nextView = dateUtils.getViewDown(zoomLevel);\n\n    var isMaxZoomLevel = this._isMaxZoomLevel();\n\n    if (nextView && !isMaxZoomLevel) {\n      this._navigateDown(e.event.currentTarget);\n    } else {\n      var newValue = this._updateTimeComponent(e.value);\n\n      this._dateValue(newValue, e.event);\n\n      this._cellClickAction(e);\n    }\n  },\n  _updateTimeComponent: function _updateTimeComponent(date) {\n    var result = new Date(date);\n\n    var currentValue = this._dateOption(\"value\");\n\n    if (currentValue) {\n      result.setHours(currentValue.getHours());\n      result.setMinutes(currentValue.getMinutes());\n      result.setSeconds(currentValue.getSeconds());\n      result.setMilliseconds(currentValue.getMilliseconds());\n    }\n\n    return result;\n  },\n  _isMaxZoomLevel: function _isMaxZoomLevel() {\n    return this.option(\"zoomLevel\") === this.option(\"maxZoomLevel\");\n  },\n  _navigateDown: function _navigateDown(cell) {\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    if (this._isMaxZoomLevel()) {\n      return;\n    }\n\n    var nextView = dateUtils.getViewDown(zoomLevel);\n\n    if (!nextView) {\n      return;\n    }\n\n    var newCurrentDate = this._view.option(\"contouredDate\") || this._view.option(\"date\");\n\n    if (cell) {\n      newCurrentDate = $(cell).data(CALENDAR_DATE_VALUE_KEY);\n    }\n\n    this._isOtherViewCellClicked = true;\n    this.option(\"currentDate\", newCurrentDate);\n    this.option(\"zoomLevel\", nextView);\n    this._isOtherViewCellClicked = false;\n\n    this._renderNavigator();\n\n    this._animateShowView();\n\n    this._setViewContoured(this._getNormalizedDate(newCurrentDate));\n  },\n  _renderNavigator: function _renderNavigator() {\n    if (!this._navigator) {\n      this._navigator = new Navigator($(\"<div>\"), this._navigatorConfig());\n    }\n\n    this._navigator.option(\"text\", this._view.getNavigatorCaption());\n\n    this._updateButtonsVisibility();\n  },\n  _navigatorConfig: function _navigatorConfig() {\n    return {\n      text: this._view.getNavigatorCaption(),\n      onClick: this._navigatorClickHandler.bind(this),\n      onCaptionClick: this._navigateUp.bind(this),\n      rtlEnabled: this.option(\"rtlEnabled\")\n    };\n  },\n  _navigatorClickHandler: function _navigatorClickHandler(e) {\n    var currentDate = this._getDateByOffset(e.direction, this.option(\"currentDate\"));\n\n    this._moveToClosestAvailableDate(currentDate, 1 * e.direction);\n\n    this._updateNavigatorCaption(-e.direction * this._getRtlCorrection());\n  },\n  _navigateUp: function _navigateUp() {\n    var zoomLevel = this.option(\"zoomLevel\");\n    var nextView = dateUtils.getViewUp(zoomLevel);\n\n    if (!nextView || this._isMinZoomLevel(zoomLevel)) {\n      return;\n    }\n\n    var contouredDate = this._view.option(\"contouredDate\");\n\n    this.option(\"zoomLevel\", nextView);\n    this.option(\"currentDate\", contouredDate || this._view.option(\"date\"));\n\n    this._renderNavigator();\n\n    this._animateShowView().done(function () {\n      this._setViewContoured(contouredDate);\n    }.bind(this));\n  },\n  _isMinZoomLevel: function _isMinZoomLevel(zoomLevel) {\n    var min = this._getMinDate();\n\n    var max = this._getMaxDate();\n\n    return dateUtils.sameView(zoomLevel, min, max) || this.option(\"minZoomLevel\") === zoomLevel;\n  },\n  _updateButtonsVisibility: function _updateButtonsVisibility() {\n    this._navigator.toggleButton(\"next\", !typeUtils.isDefined(this._getRequiredView(\"next\")));\n\n    this._navigator.toggleButton(\"prev\", !typeUtils.isDefined(this._getRequiredView(\"prev\")));\n  },\n  _renderSwipeable: function _renderSwipeable() {\n    if (!this._swipeable) {\n      this._swipeable = this._createComponent(this.$element(), Swipeable, {\n        onStart: this._swipeStartHandler.bind(this),\n        onUpdated: this._swipeUpdateHandler.bind(this),\n        onEnd: this._swipeEndHandler.bind(this),\n        itemSizeFunc: this._viewWidth.bind(this)\n      });\n    }\n  },\n  _swipeStartHandler: function _swipeStartHandler(e) {\n    fx.stop(this._$viewsWrapper, true);\n    e.event.maxLeftOffset = this._getRequiredView(\"next\") ? 1 : 0;\n    e.event.maxRightOffset = this._getRequiredView(\"prev\") ? 1 : 0;\n  },\n  _getRequiredView: function _getRequiredView(name) {\n    var view;\n    var isRtl = this.option(\"rtlEnabled\");\n\n    if (\"next\" === name) {\n      view = isRtl ? this._beforeView : this._afterView;\n    } else {\n      if (\"prev\" === name) {\n        view = isRtl ? this._afterView : this._beforeView;\n      }\n    }\n\n    return view;\n  },\n  _swipeUpdateHandler: function _swipeUpdateHandler(e) {\n    var offset = e.event.offset;\n    translator.move(this._$viewsWrapper, {\n      left: offset * this._viewWidth(),\n      top: 0\n    });\n\n    this._updateNavigatorCaption(offset);\n  },\n  _swipeEndHandler: function _swipeEndHandler(e) {\n    var targetOffset = e.event.targetOffset;\n    var moveOffset = !targetOffset ? 0 : targetOffset / Math.abs(targetOffset);\n\n    if (0 === moveOffset) {\n      this._animateWrapper(0, ANIMATION_DURATION_SHOW_VIEW);\n\n      return;\n    }\n\n    var date = this._getDateByOffset(-moveOffset * this._getRtlCorrection());\n\n    if (this._isDateInInvalidRange(date)) {\n      if (moveOffset >= 0) {\n        date = new Date(this._getMinDate());\n      } else {\n        date = new Date(this._getMaxDate());\n      }\n    }\n\n    this.option(\"currentDate\", date);\n  },\n  _viewWidth: function _viewWidth() {\n    if (!this._viewWidthValue) {\n      this._viewWidthValue = this.$element().width();\n    }\n\n    return this._viewWidthValue;\n  },\n  _updateNavigatorCaption: function _updateNavigatorCaption(offset) {\n    offset *= this._getRtlCorrection();\n    var view = this._view;\n\n    if (offset > .5 && this._beforeView) {\n      view = this._beforeView;\n    } else {\n      if (offset < -.5 && this._afterView) {\n        view = this._afterView;\n      }\n    }\n\n    this._navigator.option(\"text\", view.getNavigatorCaption());\n  },\n  _isDateInInvalidRange: function _isDateInInvalidRange(date) {\n    if (this._view.isBoundary(date)) {\n      return;\n    }\n\n    var min = this._getMinDate();\n\n    var max = this._getMaxDate();\n\n    var normalizedDate = dateUtils.normalizeDate(date, min, max);\n    return normalizedDate === min || normalizedDate === max;\n  },\n  _renderFooter: function _renderFooter() {\n    var showTodayButton = this.option(\"showTodayButton\");\n\n    if (showTodayButton) {\n      var $todayButton = this._createComponent($(\"<a>\"), Button, {\n        focusStateEnabled: false,\n        text: messageLocalization.format(\"dxCalendar-todayButtonText\"),\n        onClick: function () {\n          this._toTodayView();\n        }.bind(this),\n        integrationOptions: {}\n      }).$element().addClass(CALENDAR_TODAY_BUTTON_CLASS);\n\n      this._$footer = $(\"<div>\").addClass(CALENDAR_FOOTER_CLASS).append($todayButton);\n      this.$element().append(this._$footer);\n    }\n\n    this.$element().toggleClass(CALENDAR_HAS_FOOTER_CLASS, showTodayButton);\n  },\n  _renderSubmitElement: function _renderSubmitElement() {\n    this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\n\n    this._setSubmitValue(this.option(\"value\"));\n  },\n  _setSubmitValue: function _setSubmitValue(value) {\n    var dateValue = this._convertToDate(value);\n\n    this._getSubmitElement().val(dateSerialization.serializeDate(dateValue, CALENDAR_INPUT_STANDARD_PATTERN));\n  },\n  _getSubmitElement: function _getSubmitElement() {\n    return this._$submitElement;\n  },\n  _animateShowView: function _animateShowView() {\n    fx.stop(this._view.$element(), true);\n    return this._popAnimationView(this._view, POP_ANIMATION_FROM, POP_ANIMATION_TO, ANIMATION_DURATION_SHOW_VIEW).promise();\n  },\n  _popAnimationView: function _popAnimationView(view, from, to, duration) {\n    return fx.animate(view.$element(), {\n      type: \"pop\",\n      from: {\n        scale: from,\n        opacity: from\n      },\n      to: {\n        scale: to,\n        opacity: to\n      },\n      duration: duration\n    });\n  },\n  _navigate: function _navigate(offset, value) {\n    if (0 !== offset && 1 !== Math.abs(offset) && this._isViewAvailable(value)) {\n      var newView = this._renderSpecificView(value);\n\n      if (offset > 0) {\n        this._afterView && this._afterView.$element().remove();\n        this._afterView = newView;\n      } else {\n        this._beforeView && this._beforeView.$element().remove();\n        this._beforeView = newView;\n      }\n\n      this._translateViews();\n    }\n\n    var rtlCorrection = this._getRtlCorrection();\n\n    var offsetSign = offset > 0 ? 1 : offset < 0 ? -1 : 0;\n\n    var endPosition = -rtlCorrection * offsetSign * this._viewWidth();\n\n    var viewsWrapperPosition = this._$viewsWrapper.position().left;\n\n    if (viewsWrapperPosition !== endPosition) {\n      if (this._preventViewChangeAnimation) {\n        this._wrapperAnimationEndHandler(offset, value);\n      } else {\n        this._animateWrapper(endPosition, ANIMATION_DURATION_SHOW_VIEW).done(this._wrapperAnimationEndHandler.bind(this, offset, value));\n      }\n    }\n  },\n  _animateWrapper: function _animateWrapper(to, duration) {\n    return fx.animate(this._$viewsWrapper, {\n      type: \"slide\",\n      from: {\n        left: this._$viewsWrapper.position().left\n      },\n      to: {\n        left: to\n      },\n      duration: duration\n    });\n  },\n  _toTodayView: function _toTodayView() {\n    var today = new Date();\n\n    if (this._isMaxZoomLevel()) {\n      this._dateOption(\"value\", today);\n\n      return;\n    }\n\n    this._preventViewChangeAnimation = true;\n    this.option(\"zoomLevel\", this.option(\"maxZoomLevel\"));\n\n    this._dateOption(\"value\", today);\n\n    this._animateShowView();\n\n    this._preventViewChangeAnimation = false;\n  },\n  _wrapperAnimationEndHandler: function _wrapperAnimationEndHandler(offset, newDate) {\n    this._rearrangeViews(offset);\n\n    this._translateViews();\n\n    this._resetLocation();\n\n    this._renderNavigator();\n\n    this._setViewContoured(newDate);\n\n    this._updateAriaId(newDate);\n  },\n  _rearrangeViews: function _rearrangeViews(offset) {\n    if (0 === offset) {\n      return;\n    }\n\n    var viewOffset;\n    var viewToCreateKey;\n    var viewToRemoveKey;\n\n    if (offset < 0) {\n      viewOffset = 1;\n      viewToCreateKey = \"_beforeView\";\n      viewToRemoveKey = \"_afterView\";\n    } else {\n      viewOffset = -1;\n      viewToCreateKey = \"_afterView\";\n      viewToRemoveKey = \"_beforeView\";\n    }\n\n    if (!this[viewToCreateKey]) {\n      return;\n    }\n\n    var destinationDate = this[viewToCreateKey].option(\"date\");\n\n    if (this[viewToRemoveKey]) {\n      this[viewToRemoveKey].$element().remove();\n    }\n\n    if (offset === viewOffset) {\n      this[viewToRemoveKey] = this._view;\n    } else {\n      this[viewToRemoveKey] = this._renderSpecificView(this._getDateByOffset(viewOffset, destinationDate));\n\n      this._view.$element().remove();\n    }\n\n    this._view = this[viewToCreateKey];\n\n    var dateByOffset = this._getDateByOffset(-viewOffset, destinationDate);\n\n    this[viewToCreateKey] = this._isViewAvailable(dateByOffset) ? this._renderSpecificView(dateByOffset) : null;\n  },\n  _resetLocation: function _resetLocation() {\n    translator.move(this._$viewsWrapper, {\n      left: 0,\n      top: 0\n    });\n  },\n  _clean: function _clean() {\n    this.callBase();\n\n    this._clearViewWidthCache();\n\n    delete this._$viewsWrapper;\n    delete this._navigator;\n    delete this._$footer;\n  },\n  _clearViewWidthCache: function _clearViewWidthCache() {\n    delete this._viewWidthValue;\n  },\n  _disposeViews: function _disposeViews() {\n    this._view.$element().remove();\n\n    this._beforeView && this._beforeView.$element().remove();\n    this._afterView && this._afterView.$element().remove();\n    delete this._view;\n    delete this._beforeView;\n    delete this._afterView;\n  },\n  _refreshViews: function _refreshViews() {\n    this._disposeViews();\n\n    this._renderViews();\n  },\n  _visibilityChanged: function _visibilityChanged() {\n    this._translateViews();\n  },\n  _focusInHandler: function _focusInHandler() {\n    this.callBase.apply(this, arguments);\n\n    this._view.option(\"contouredDate\", this.option(\"currentDate\"));\n  },\n  _focusOutHandler: function _focusOutHandler() {\n    this.callBase.apply(this, arguments);\n\n    this._view.option(\"contouredDate\", null);\n  },\n  _updateViewsValue: function _updateViewsValue(value) {\n    var newValue = value ? new Date(value) : null;\n\n    this._view.option(\"value\", newValue);\n\n    this._beforeView && this._beforeView.option(\"value\", newValue);\n    this._afterView && this._afterView.option(\"value\", newValue);\n  },\n  _updateAriaSelected: function _updateAriaSelected(value, previousValue) {\n    value = value || this._dateOption(\"value\");\n\n    var $prevSelectedCell = this._view._getCellByDate(previousValue);\n\n    var $selectedCell = this._view._getCellByDate(value);\n\n    this.setAria(\"selected\", void 0, $prevSelectedCell);\n    this.setAria(\"selected\", true, $selectedCell);\n\n    if (value && this.option(\"currentDate\").getTime() === value.getTime()) {\n      this._updateAriaId(value);\n    }\n  },\n  _updateAriaId: function _updateAriaId(value) {\n    value = value || this.option(\"currentDate\");\n    var ariaId = \"dx-\" + new Guid();\n\n    var $newCell = this._view._getCellByDate(value);\n\n    this.setAria(\"id\", ariaId, $newCell);\n    this.setAria(\"activedescendant\", ariaId);\n\n    this._onContouredChanged(ariaId);\n  },\n  _suppressingNavigation: function _suppressingNavigation(callback, args) {\n    this._suppressNavigation = true;\n    callback.apply(this, args);\n    delete this._suppressNavigation;\n  },\n  _optionChanged: function _optionChanged(args) {\n    var value = args.value;\n    var previousValue = args.previousValue;\n\n    switch (args.name) {\n      case \"width\":\n        this.callBase(args);\n\n        this._clearViewWidthCache();\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        this.min = void 0;\n        this.max = void 0;\n\n        this._suppressingNavigation(this._updateCurrentDate, [this.option(\"currentDate\")]);\n\n        this._refreshViews();\n\n        this._renderNavigator();\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._refreshViews();\n\n        this._updateButtonsVisibility();\n\n        break;\n\n      case \"currentDate\":\n        this.setAria(\"id\", void 0, this._view._getCellByDate(previousValue));\n\n        this._updateCurrentDate(value);\n\n        break;\n\n      case \"zoomLevel\":\n        this.$element().removeClass(CALENDAR_VIEW_CLASS + \"-\" + previousValue);\n\n        this._correctZoomLevel();\n\n        this._refreshViews();\n\n        this._renderNavigator();\n\n        this._updateAriaId();\n\n        break;\n\n      case \"minZoomLevel\":\n      case \"maxZoomLevel\":\n        this._correctZoomLevel();\n\n        this._updateButtonsVisibility();\n\n        break;\n\n      case \"value\":\n        value = this._convertToDate(value);\n        previousValue = this._convertToDate(previousValue);\n\n        this._updateAriaSelected(value, previousValue);\n\n        this.option(\"currentDate\", typeUtils.isDefined(value) ? new Date(value) : new Date());\n\n        this._updateViewsValue(value);\n\n        this._setSubmitValue(value);\n\n        this.callBase(args);\n        break;\n\n      case \"disabled\":\n        this._view.option(\"disabled\", value);\n\n        this.callBase(args);\n        break;\n\n      case \"onCellClick\":\n        this._view.option(\"onCellClick\", value);\n\n        break;\n\n      case \"onContouredChanged\":\n        this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\n        break;\n\n      case \"disabledDates\":\n      case \"dateSerializationFormat\":\n      case \"cellTemplate\":\n      case \"showTodayButton\":\n        this._invalidate();\n\n        break;\n\n      case \"hasFocus\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\nregisterComponent(\"dxCalendar\", Calendar);\nmodule.exports = Calendar;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/calendar/ui.calendar.js"],"names":["$","require","Guid","registerComponent","noop","typeUtils","inRange","extend","Button","Editor","Swipeable","Navigator","Views","translator","browser","dateUtils","dateSerialization","devices","fx","windowUtils","messageLocalization","FunctionTemplate","CALENDAR_CLASS","CALENDAR_BODY_CLASS","CALENDAR_CELL_CLASS","CALENDAR_FOOTER_CLASS","CALENDAR_TODAY_BUTTON_CLASS","CALENDAR_HAS_FOOTER_CLASS","CALENDAR_VIEWS_WRAPPER_CLASS","CALENDAR_VIEW_CLASS","FOCUSED_STATE_CLASS","ANIMATION_DURATION_SHOW_VIEW","POP_ANIMATION_FROM","POP_ANIMATION_TO","CALENDAR_INPUT_STANDARD_PATTERN","CALENDAR_DATE_VALUE_KEY","LEVEL_COMPARE_MAP","month","year","decade","century","ZOOM_LEVEL","MONTH","YEAR","DECADE","CENTURY","Calendar","_activeStateUnit","_getDefaultOptions","hoverStateEnabled","activeStateEnabled","currentDate","value","dateSerializationFormat","min","max","firstDayOfWeek","zoomLevel","maxZoomLevel","minZoomLevel","showTodayButton","cellTemplate","disabledDates","onCellClick","onContouredChanged","hasFocus","element","_defaultOptionsRules","device","options","focusStateEnabled","_supportedKeys","rightArrow","e","leftArrow","upArrow","downArrow","home","date","end","pageUp","pageDown","tab","enter","_getSerializationFormat","optionName","_convertToDate","_dateValue","_dateOption","arguments","serializationFormat","_moveCurrentDate","baseDate","maxDate","minDate","isCurrentDateInRange","dateForward","dateBackward","isDateForwardInRange","isDateBackwardInRange","step","offset","_moveToClosestAvailableDate","_init","_correctZoomLevel","_initCurrentDate","_getNormalizedDate","_initActions","_initTemplates","data","String","_updateCurrentDate","normalizedDate","_setViewContoured","_getMinDate","_getMaxDate","_getViewsOffset","zoomCorrection","parseInt","endDate","startDate","_getMonthsOffset","yearOffset","monthOffset","_waitRenderView","setTimeout","_getRtlCorrection","_getDateByOffset","currentDay","difference","lastDay","_focusTarget","_initMarkup","$element","role","label","_render","_renderBody","_renderViews","beforeDate","afterDate","_renderSpecificView","specificView","$view","config","_viewConfig","rtl","disabled","tabIndex","allowValueSelection","_injectComponent","that","component","func","_isViewAvailable","_translateViews","left","top","_getViewPosition","rtlCorrection","_cellClickHandler","nextView","isMaxZoomLevel","newValue","_updateTimeComponent","result","currentValue","_isMaxZoomLevel","_navigateDown","newCurrentDate","_renderNavigator","_navigatorConfig","text","onClick","onCaptionClick","rtlEnabled","_navigatorClickHandler","_navigateUp","contouredDate","_isMinZoomLevel","_updateButtonsVisibility","_renderSwipeable","onStart","onUpdated","onEnd","itemSizeFunc","_swipeStartHandler","_getRequiredView","isRtl","view","_swipeUpdateHandler","_swipeEndHandler","targetOffset","moveOffset","Math","_viewWidth","_updateNavigatorCaption","_isDateInInvalidRange","_renderFooter","$todayButton","integrationOptions","_renderSubmitElement","_setSubmitValue","dateValue","_getSubmitElement","_animateShowView","_popAnimationView","type","from","scale","opacity","to","duration","_navigate","newView","offsetSign","endPosition","viewsWrapperPosition","_animateWrapper","_toTodayView","today","_wrapperAnimationEndHandler","_rearrangeViews","viewOffset","viewToCreateKey","viewToRemoveKey","destinationDate","dateByOffset","_resetLocation","_clean","_clearViewWidthCache","_disposeViews","_refreshViews","_visibilityChanged","_focusInHandler","_focusOutHandler","_updateViewsValue","_updateAriaSelected","$prevSelectedCell","$selectedCell","_updateAriaId","ariaId","$newCell","_suppressingNavigation","callback","_optionChanged","args","previousValue","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/calendar/ui.calendar.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar Guid = require(\"../../core/guid\");\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar inRange = require(\"../../core/utils/math\").inRange;\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar Button = require(\"../button\");\r\nvar Editor = require(\"../editor/editor\");\r\nvar Swipeable = require(\"../../events/gesture/swipeable\");\r\nvar Navigator = require(\"./ui.calendar.navigator\");\r\nvar Views = require(\"./ui.calendar.views\");\r\nvar translator = require(\"../../animation/translator\");\r\nvar browser = require(\"../../core/utils/browser\");\r\nvar dateUtils = require(\"../../core/utils/date\");\r\nvar dateSerialization = require(\"../../core/utils/date_serialization\");\r\nvar devices = require(\"../../core/devices\");\r\nvar fx = require(\"../../animation/fx\");\r\nvar windowUtils = require(\"../../core/utils/window\");\r\nvar messageLocalization = require(\"../../localization/message\");\r\nvar FunctionTemplate = require(\"../../core/templates/function_template\").FunctionTemplate;\r\nvar CALENDAR_CLASS = \"dx-calendar\";\r\nvar CALENDAR_BODY_CLASS = \"dx-calendar-body\";\r\nvar CALENDAR_CELL_CLASS = \"dx-calendar-cell\";\r\nvar CALENDAR_FOOTER_CLASS = \"dx-calendar-footer\";\r\nvar CALENDAR_TODAY_BUTTON_CLASS = \"dx-calendar-today-button\";\r\nvar CALENDAR_HAS_FOOTER_CLASS = \"dx-calendar-with-footer\";\r\nvar CALENDAR_VIEWS_WRAPPER_CLASS = \"dx-calendar-views-wrapper\";\r\nvar CALENDAR_VIEW_CLASS = \"dx-calendar-view\";\r\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\r\nvar ANIMATION_DURATION_SHOW_VIEW = 250;\r\nvar POP_ANIMATION_FROM = .6;\r\nvar POP_ANIMATION_TO = 1;\r\nvar CALENDAR_INPUT_STANDARD_PATTERN = \"yyyy-MM-dd\";\r\nvar CALENDAR_DATE_VALUE_KEY = \"dxDateValueKey\";\r\nvar LEVEL_COMPARE_MAP = {\r\n    month: 3,\r\n    year: 2,\r\n    decade: 1,\r\n    century: 0\r\n};\r\nvar ZOOM_LEVEL = {\r\n    MONTH: \"month\",\r\n    YEAR: \"year\",\r\n    DECADE: \"decade\",\r\n    CENTURY: \"century\"\r\n};\r\nvar Calendar = Editor.inherit({\r\n    _activeStateUnit: \".\" + CALENDAR_CELL_CLASS,\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            hoverStateEnabled: true,\r\n            activeStateEnabled: true,\r\n            currentDate: new Date,\r\n            value: null,\r\n            dateSerializationFormat: void 0,\r\n            min: new Date(1e3, 0),\r\n            max: new Date(3e3, 0),\r\n            firstDayOfWeek: void 0,\r\n            zoomLevel: ZOOM_LEVEL.MONTH,\r\n            maxZoomLevel: ZOOM_LEVEL.MONTH,\r\n            minZoomLevel: ZOOM_LEVEL.CENTURY,\r\n            showTodayButton: false,\r\n            cellTemplate: \"cell\",\r\n            disabledDates: null,\r\n            onCellClick: null,\r\n            onContouredChanged: null,\r\n            hasFocus: function(element) {\r\n                return element.hasClass(FOCUSED_STATE_CLASS)\r\n            }\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), {\r\n            rightArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._waitRenderView(1)\r\n                } else {\r\n                    this._moveCurrentDate(1 * this._getRtlCorrection())\r\n                }\r\n            },\r\n            leftArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._waitRenderView(-1)\r\n                } else {\r\n                    this._moveCurrentDate(-1 * this._getRtlCorrection())\r\n                }\r\n            },\r\n            upArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._navigateUp()\r\n                } else {\r\n                    if (fx.isAnimating(this._view.$element())) {\r\n                        return\r\n                    }\r\n                    this._moveCurrentDate(-1 * this._view.option(\"colCount\"))\r\n                }\r\n            },\r\n            downArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._navigateDown()\r\n                } else {\r\n                    if (fx.isAnimating(this._view.$element())) {\r\n                        return\r\n                    }\r\n                    this._moveCurrentDate(1 * this._view.option(\"colCount\"))\r\n                }\r\n            },\r\n            home: function(e) {\r\n                e.preventDefault();\r\n                var zoomLevel = this.option(\"zoomLevel\");\r\n                var currentDate = this.option(\"currentDate\");\r\n                var min = this._dateOption(\"min\");\r\n                var date = dateUtils.sameView(zoomLevel, currentDate, min) ? min : dateUtils.getViewFirstCellDate(zoomLevel, currentDate);\r\n                this._moveToClosestAvailableDate(date, 1)\r\n            },\r\n            end: function(e) {\r\n                e.preventDefault();\r\n                var zoomLevel = this.option(\"zoomLevel\");\r\n                var currentDate = this.option(\"currentDate\");\r\n                var max = this._dateOption(\"max\");\r\n                var date = dateUtils.sameView(zoomLevel, currentDate, max) ? max : dateUtils.getViewLastCellDate(zoomLevel, currentDate);\r\n                this._moveToClosestAvailableDate(date, -1)\r\n            },\r\n            pageUp: function(e) {\r\n                e.preventDefault();\r\n                this._waitRenderView(-1)\r\n            },\r\n            pageDown: function(e) {\r\n                e.preventDefault();\r\n                this._waitRenderView(1)\r\n            },\r\n            tab: noop,\r\n            enter: function(e) {\r\n                if (!this._isMaxZoomLevel()) {\r\n                    this._navigateDown()\r\n                } else {\r\n                    var value = this._updateTimeComponent(this.option(\"currentDate\"));\r\n                    this._dateValue(value, e)\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getSerializationFormat: function(optionName) {\r\n        var value = this.option(optionName || \"value\");\r\n        if (this.option(\"dateSerializationFormat\")) {\r\n            return this.option(\"dateSerializationFormat\")\r\n        }\r\n        if (typeUtils.isNumeric(value)) {\r\n            return \"number\"\r\n        }\r\n        if (!typeUtils.isString(value)) {\r\n            return\r\n        }\r\n        return dateSerialization.getDateSerializationFormat(value)\r\n    },\r\n    _convertToDate: function(value, optionName) {\r\n        return dateSerialization.deserializeDate(value)\r\n    },\r\n    _dateValue: function(value, dxEvent) {\r\n        if (dxEvent) {\r\n            this._saveValueChangeEvent(dxEvent)\r\n        }\r\n        this._dateOption(\"value\", value)\r\n    },\r\n    _dateOption: function(optionName, optionValue) {\r\n        if (1 === arguments.length) {\r\n            return this._convertToDate(this.option(optionName), optionName)\r\n        }\r\n        var serializationFormat = this._getSerializationFormat(optionName);\r\n        this.option(optionName, dateSerialization.serializeDate(optionValue, serializationFormat))\r\n    },\r\n    _moveCurrentDate: function(offset, baseDate) {\r\n        var currentDate = baseDate || new Date(this.option(\"currentDate\"));\r\n        var maxDate = this._getMaxDate();\r\n        var minDate = this._getMinDate();\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var isCurrentDateInRange = inRange(currentDate, minDate, maxDate);\r\n        var dateForward = new Date(currentDate);\r\n        var dateBackward = new Date(currentDate);\r\n        var isDateForwardInRange = isCurrentDateInRange;\r\n        var isDateBackwardInRange = isCurrentDateInRange;\r\n        var step = offset || 1;\r\n        while (!offset && (isDateForwardInRange || isDateBackwardInRange) || offset && isDateForwardInRange) {\r\n            switch (zoomLevel) {\r\n                case ZOOM_LEVEL.MONTH:\r\n                    dateForward.setDate(dateForward.getDate() + step);\r\n                    dateBackward.setDate(dateBackward.getDate() - step);\r\n                    break;\r\n                case ZOOM_LEVEL.YEAR:\r\n                    dateForward.setMonth(dateForward.getMonth() + step);\r\n                    dateBackward.setMonth(dateBackward.getMonth() - step);\r\n                    break;\r\n                case ZOOM_LEVEL.DECADE:\r\n                    dateForward.setFullYear(dateForward.getFullYear() + step);\r\n                    dateBackward.setFullYear(dateBackward.getFullYear() - step);\r\n                    break;\r\n                case ZOOM_LEVEL.CENTURY:\r\n                    dateForward.setFullYear(dateForward.getFullYear() + 10 * step);\r\n                    dateBackward.setFullYear(dateBackward.getFullYear() - 10 * step)\r\n            }\r\n            if (isDateForwardInRange && !this._view.isDateDisabled(dateForward)) {\r\n                currentDate = dateForward;\r\n                break\r\n            }\r\n            if (isDateBackwardInRange && !offset && !this._view.isDateDisabled(dateBackward)) {\r\n                currentDate = dateBackward;\r\n                break\r\n            }\r\n            isDateBackwardInRange = inRange(dateBackward, minDate, maxDate);\r\n            isDateForwardInRange = inRange(dateForward, minDate, maxDate)\r\n        }\r\n        this.option(\"currentDate\", currentDate)\r\n    },\r\n    _moveToClosestAvailableDate: function(baseDate, offset) {\r\n        if (this._view.isDateDisabled(baseDate)) {\r\n            this._moveCurrentDate(offset, baseDate)\r\n        } else {\r\n            this.option(\"currentDate\", baseDate)\r\n        }\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._correctZoomLevel();\r\n        this._initCurrentDate();\r\n        this._initActions()\r\n    },\r\n    _correctZoomLevel: function() {\r\n        var minZoomLevel = this.option(\"minZoomLevel\");\r\n        var maxZoomLevel = this.option(\"maxZoomLevel\");\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (LEVEL_COMPARE_MAP[maxZoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\r\n            return\r\n        }\r\n        if (LEVEL_COMPARE_MAP[zoomLevel] > LEVEL_COMPARE_MAP[maxZoomLevel]) {\r\n            this.option(\"zoomLevel\", maxZoomLevel)\r\n        } else {\r\n            if (LEVEL_COMPARE_MAP[zoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\r\n                this.option(\"zoomLevel\", minZoomLevel)\r\n            }\r\n        }\r\n    },\r\n    _initCurrentDate: function() {\r\n        var currentDate = this._getNormalizedDate(this._dateOption(\"value\")) || this._getNormalizedDate(this.option(\"currentDate\"));\r\n        this.option(\"currentDate\", currentDate)\r\n    },\r\n    _getNormalizedDate: function(date) {\r\n        date = dateUtils.normalizeDate(date, this._getMinDate(), this._getMaxDate());\r\n        return typeUtils.isDefined(date) ? new Date(date) : date\r\n    },\r\n    _initActions: function() {\r\n        this._cellClickAction = this._createActionByOption(\"onCellClick\");\r\n        this._onContouredChanged = this._createActionByOption(\"onContouredChanged\")\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._defaultTemplates.cell = new FunctionTemplate(function(options) {\r\n            var data = options.model;\r\n            $(options.container).append($(\"<span>\").text(data && data.text || String(data)))\r\n        })\r\n    },\r\n    _updateCurrentDate: function(date) {\r\n        if (fx.isAnimating(this._$viewsWrapper)) {\r\n            fx.stop(this._$viewsWrapper, true)\r\n        }\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        if (min > max) {\r\n            this.option(\"currentDate\", new Date);\r\n            return\r\n        }\r\n        var normalizedDate = this._getNormalizedDate(date);\r\n        if (date.getTime() !== normalizedDate.getTime()) {\r\n            this.option(\"currentDate\", new Date(normalizedDate));\r\n            return\r\n        }\r\n        var offset = this._getViewsOffset(this._view.option(\"date\"), normalizedDate);\r\n        if (0 !== offset && !this._isMaxZoomLevel() && this._isOtherViewCellClicked) {\r\n            offset = 0\r\n        }\r\n        if (this._view && 0 !== offset && !this._suppressNavigation) {\r\n            this._navigate(offset, normalizedDate)\r\n        } else {\r\n            this._renderNavigator();\r\n            this._setViewContoured(normalizedDate);\r\n            this._updateAriaId(normalizedDate)\r\n        }\r\n    },\r\n    _setViewContoured: function(date) {\r\n        if (this.option(\"hasFocus\")(this._focusTarget())) {\r\n            this._view.option(\"contouredDate\", date)\r\n        }\r\n    },\r\n    _getMinDate: function() {\r\n        if (this.min) {\r\n            return this.min\r\n        }\r\n        this.min = this._dateOption(\"min\") || new Date(1e3, 0);\r\n        return this.min\r\n    },\r\n    _getMaxDate: function() {\r\n        if (this.max) {\r\n            return this.max\r\n        }\r\n        this.max = this._dateOption(\"max\") || new Date(3e3, 0);\r\n        return this.max\r\n    },\r\n    _getViewsOffset: function(startDate, endDate) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (zoomLevel === ZOOM_LEVEL.MONTH) {\r\n            return this._getMonthsOffset(startDate, endDate)\r\n        }\r\n        var zoomCorrection;\r\n        switch (zoomLevel) {\r\n            case ZOOM_LEVEL.CENTURY:\r\n                zoomCorrection = 100;\r\n                break;\r\n            case ZOOM_LEVEL.DECADE:\r\n                zoomCorrection = 10;\r\n                break;\r\n            default:\r\n                zoomCorrection = 1\r\n        }\r\n        return parseInt(endDate.getFullYear() / zoomCorrection) - parseInt(startDate.getFullYear() / zoomCorrection)\r\n    },\r\n    _getMonthsOffset: function(startDate, endDate) {\r\n        var yearOffset = endDate.getFullYear() - startDate.getFullYear();\r\n        var monthOffset = endDate.getMonth() - startDate.getMonth();\r\n        return 12 * yearOffset + monthOffset\r\n    },\r\n    _waitRenderView: function(offset) {\r\n        if (this._alreadyViewRender) {\r\n            return\r\n        }\r\n        this._alreadyViewRender = true;\r\n        var date = this._getDateByOffset(offset * this._getRtlCorrection());\r\n        this._moveToClosestAvailableDate(date, offset);\r\n        setTimeout(function() {\r\n            this._alreadyViewRender = false\r\n        }.bind(this))\r\n    },\r\n    _getRtlCorrection: function() {\r\n        return this.option(\"rtlEnabled\") ? -1 : 1\r\n    },\r\n    _getDateByOffset: function(offset, date) {\r\n        date = new Date(date || this.option(\"currentDate\"));\r\n        var currentDay = date.getDate();\r\n        var difference = dateUtils.getDifferenceInMonth(this.option(\"zoomLevel\")) * offset;\r\n        date.setDate(1);\r\n        date.setMonth(date.getMonth() + difference);\r\n        var lastDay = dateUtils.getLastMonthDate(date).getDate();\r\n        date.setDate(currentDay > lastDay ? lastDay : currentDay);\r\n        return date\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderSubmitElement();\r\n        this.callBase();\r\n        var $element = this.$element();\r\n        $element.addClass(CALENDAR_CLASS);\r\n        this._renderBody();\r\n        $element.append(this.$body);\r\n        this._renderViews();\r\n        this._renderNavigator();\r\n        $element.append(this._navigator.$element());\r\n        this._renderSwipeable();\r\n        this._renderFooter();\r\n        this.setAria({\r\n            role: \"listbox\",\r\n            label: messageLocalization.format(\"dxCalendar-ariaWidgetName\")\r\n        });\r\n        this._updateAriaSelected();\r\n        this._updateAriaId();\r\n        if (this._view.isDateDisabled(this.option(\"currentDate\"))) {\r\n            this._moveCurrentDate(0)\r\n        }\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._setViewContoured(this.option(\"currentDate\"))\r\n    },\r\n    _renderBody: function() {\r\n        if (!this._$viewsWrapper) {\r\n            this.$body = $(\"<div>\").addClass(CALENDAR_BODY_CLASS);\r\n            this._$viewsWrapper = $(\"<div>\").addClass(CALENDAR_VIEWS_WRAPPER_CLASS);\r\n            this.$body.append(this._$viewsWrapper)\r\n        }\r\n    },\r\n    _renderViews: function() {\r\n        this.$element().addClass(CALENDAR_VIEW_CLASS + \"-\" + this.option(\"zoomLevel\"));\r\n        var currentDate = this.option(\"currentDate\");\r\n        this._view = this._renderSpecificView(currentDate);\r\n        this._view.option(\"_keyboardProcessor\", this._viewKeyboardProcessor);\r\n        if (windowUtils.hasWindow()) {\r\n            var beforeDate = this._getDateByOffset(-1, currentDate);\r\n            this._beforeView = this._isViewAvailable(beforeDate) ? this._renderSpecificView(beforeDate) : null;\r\n            var afterDate = this._getDateByOffset(1, currentDate);\r\n            afterDate.setDate(1);\r\n            this._afterView = this._isViewAvailable(afterDate) ? this._renderSpecificView(afterDate) : null\r\n        }\r\n        this._translateViews()\r\n    },\r\n    _renderSpecificView: function(date) {\r\n        var specificView = Views[this.option(\"zoomLevel\")];\r\n        var $view = $(\"<div>\").appendTo(this._$viewsWrapper);\r\n        var config = this._viewConfig(date);\r\n        return new specificView($view, config)\r\n    },\r\n    _viewConfig: function(date) {\r\n        var disabledDates = this.option(\"disabledDates\");\r\n        disabledDates = typeUtils.isFunction(disabledDates) ? this._injectComponent(disabledDates.bind(this)) : disabledDates;\r\n        return {\r\n            date: date,\r\n            min: this._getMinDate(),\r\n            max: this._getMaxDate(),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            value: this._dateOption(\"value\"),\r\n            rtl: this.option(\"rtlEnabled\"),\r\n            disabled: this.option(\"disabled\"),\r\n            tabIndex: void 0,\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            hoverStateEnabled: this.option(\"hoverStateEnabled\"),\r\n            disabledDates: disabledDates,\r\n            onCellClick: this._cellClickHandler.bind(this),\r\n            cellTemplate: this._getTemplateByOption(\"cellTemplate\"),\r\n            allowValueSelection: this._isMaxZoomLevel()\r\n        }\r\n    },\r\n    _injectComponent: function(func) {\r\n        var that = this;\r\n        return function(params) {\r\n            extend(params, {\r\n                component: that\r\n            });\r\n            return func(params)\r\n        }\r\n    },\r\n    _isViewAvailable: function(date) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var min = dateUtils.getViewMinBoundaryDate(zoomLevel, this._getMinDate());\r\n        var max = dateUtils.getViewMaxBoundaryDate(zoomLevel, this._getMaxDate());\r\n        return dateUtils.dateInRange(date, min, max)\r\n    },\r\n    _translateViews: function() {\r\n        translator.move(this._view.$element(), {\r\n            left: 0,\r\n            top: 0\r\n        });\r\n        this._beforeView && translator.move(this._beforeView.$element(), {\r\n            left: this._getViewPosition(-1),\r\n            top: 0\r\n        });\r\n        this._afterView && translator.move(this._afterView.$element(), {\r\n            left: this._getViewPosition(1),\r\n            top: 0\r\n        })\r\n    },\r\n    _getViewPosition: function(coefficient) {\r\n        var rtlCorrection = this.option(\"rtlEnabled\") && !browser.msie ? -1 : 1;\r\n        return 100 * coefficient * rtlCorrection + \"%\"\r\n    },\r\n    _cellClickHandler: function(e) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var nextView = dateUtils.getViewDown(zoomLevel);\r\n        var isMaxZoomLevel = this._isMaxZoomLevel();\r\n        if (nextView && !isMaxZoomLevel) {\r\n            this._navigateDown(e.event.currentTarget)\r\n        } else {\r\n            var newValue = this._updateTimeComponent(e.value);\r\n            this._dateValue(newValue, e.event);\r\n            this._cellClickAction(e)\r\n        }\r\n    },\r\n    _updateTimeComponent: function(date) {\r\n        var result = new Date(date);\r\n        var currentValue = this._dateOption(\"value\");\r\n        if (currentValue) {\r\n            result.setHours(currentValue.getHours());\r\n            result.setMinutes(currentValue.getMinutes());\r\n            result.setSeconds(currentValue.getSeconds());\r\n            result.setMilliseconds(currentValue.getMilliseconds())\r\n        }\r\n        return result\r\n    },\r\n    _isMaxZoomLevel: function() {\r\n        return this.option(\"zoomLevel\") === this.option(\"maxZoomLevel\")\r\n    },\r\n    _navigateDown: function(cell) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (this._isMaxZoomLevel()) {\r\n            return\r\n        }\r\n        var nextView = dateUtils.getViewDown(zoomLevel);\r\n        if (!nextView) {\r\n            return\r\n        }\r\n        var newCurrentDate = this._view.option(\"contouredDate\") || this._view.option(\"date\");\r\n        if (cell) {\r\n            newCurrentDate = $(cell).data(CALENDAR_DATE_VALUE_KEY)\r\n        }\r\n        this._isOtherViewCellClicked = true;\r\n        this.option(\"currentDate\", newCurrentDate);\r\n        this.option(\"zoomLevel\", nextView);\r\n        this._isOtherViewCellClicked = false;\r\n        this._renderNavigator();\r\n        this._animateShowView();\r\n        this._setViewContoured(this._getNormalizedDate(newCurrentDate))\r\n    },\r\n    _renderNavigator: function() {\r\n        if (!this._navigator) {\r\n            this._navigator = new Navigator($(\"<div>\"), this._navigatorConfig())\r\n        }\r\n        this._navigator.option(\"text\", this._view.getNavigatorCaption());\r\n        this._updateButtonsVisibility()\r\n    },\r\n    _navigatorConfig: function() {\r\n        return {\r\n            text: this._view.getNavigatorCaption(),\r\n            onClick: this._navigatorClickHandler.bind(this),\r\n            onCaptionClick: this._navigateUp.bind(this),\r\n            rtlEnabled: this.option(\"rtlEnabled\")\r\n        }\r\n    },\r\n    _navigatorClickHandler: function(e) {\r\n        var currentDate = this._getDateByOffset(e.direction, this.option(\"currentDate\"));\r\n        this._moveToClosestAvailableDate(currentDate, 1 * e.direction);\r\n        this._updateNavigatorCaption(-e.direction * this._getRtlCorrection())\r\n    },\r\n    _navigateUp: function() {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var nextView = dateUtils.getViewUp(zoomLevel);\r\n        if (!nextView || this._isMinZoomLevel(zoomLevel)) {\r\n            return\r\n        }\r\n        var contouredDate = this._view.option(\"contouredDate\");\r\n        this.option(\"zoomLevel\", nextView);\r\n        this.option(\"currentDate\", contouredDate || this._view.option(\"date\"));\r\n        this._renderNavigator();\r\n        this._animateShowView().done(function() {\r\n            this._setViewContoured(contouredDate)\r\n        }.bind(this))\r\n    },\r\n    _isMinZoomLevel: function(zoomLevel) {\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        return dateUtils.sameView(zoomLevel, min, max) || this.option(\"minZoomLevel\") === zoomLevel\r\n    },\r\n    _updateButtonsVisibility: function() {\r\n        this._navigator.toggleButton(\"next\", !typeUtils.isDefined(this._getRequiredView(\"next\")));\r\n        this._navigator.toggleButton(\"prev\", !typeUtils.isDefined(this._getRequiredView(\"prev\")))\r\n    },\r\n    _renderSwipeable: function() {\r\n        if (!this._swipeable) {\r\n            this._swipeable = this._createComponent(this.$element(), Swipeable, {\r\n                onStart: this._swipeStartHandler.bind(this),\r\n                onUpdated: this._swipeUpdateHandler.bind(this),\r\n                onEnd: this._swipeEndHandler.bind(this),\r\n                itemSizeFunc: this._viewWidth.bind(this)\r\n            })\r\n        }\r\n    },\r\n    _swipeStartHandler: function(e) {\r\n        fx.stop(this._$viewsWrapper, true);\r\n        e.event.maxLeftOffset = this._getRequiredView(\"next\") ? 1 : 0;\r\n        e.event.maxRightOffset = this._getRequiredView(\"prev\") ? 1 : 0\r\n    },\r\n    _getRequiredView: function(name) {\r\n        var view;\r\n        var isRtl = this.option(\"rtlEnabled\");\r\n        if (\"next\" === name) {\r\n            view = isRtl ? this._beforeView : this._afterView\r\n        } else {\r\n            if (\"prev\" === name) {\r\n                view = isRtl ? this._afterView : this._beforeView\r\n            }\r\n        }\r\n        return view\r\n    },\r\n    _swipeUpdateHandler: function(e) {\r\n        var offset = e.event.offset;\r\n        translator.move(this._$viewsWrapper, {\r\n            left: offset * this._viewWidth(),\r\n            top: 0\r\n        });\r\n        this._updateNavigatorCaption(offset)\r\n    },\r\n    _swipeEndHandler: function(e) {\r\n        var targetOffset = e.event.targetOffset;\r\n        var moveOffset = !targetOffset ? 0 : targetOffset / Math.abs(targetOffset);\r\n        if (0 === moveOffset) {\r\n            this._animateWrapper(0, ANIMATION_DURATION_SHOW_VIEW);\r\n            return\r\n        }\r\n        var date = this._getDateByOffset(-moveOffset * this._getRtlCorrection());\r\n        if (this._isDateInInvalidRange(date)) {\r\n            if (moveOffset >= 0) {\r\n                date = new Date(this._getMinDate())\r\n            } else {\r\n                date = new Date(this._getMaxDate())\r\n            }\r\n        }\r\n        this.option(\"currentDate\", date)\r\n    },\r\n    _viewWidth: function() {\r\n        if (!this._viewWidthValue) {\r\n            this._viewWidthValue = this.$element().width()\r\n        }\r\n        return this._viewWidthValue\r\n    },\r\n    _updateNavigatorCaption: function(offset) {\r\n        offset *= this._getRtlCorrection();\r\n        var view = this._view;\r\n        if (offset > .5 && this._beforeView) {\r\n            view = this._beforeView\r\n        } else {\r\n            if (offset < -.5 && this._afterView) {\r\n                view = this._afterView\r\n            }\r\n        }\r\n        this._navigator.option(\"text\", view.getNavigatorCaption())\r\n    },\r\n    _isDateInInvalidRange: function(date) {\r\n        if (this._view.isBoundary(date)) {\r\n            return\r\n        }\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        var normalizedDate = dateUtils.normalizeDate(date, min, max);\r\n        return normalizedDate === min || normalizedDate === max\r\n    },\r\n    _renderFooter: function() {\r\n        var showTodayButton = this.option(\"showTodayButton\");\r\n        if (showTodayButton) {\r\n            var $todayButton = this._createComponent($(\"<a>\"), Button, {\r\n                focusStateEnabled: false,\r\n                text: messageLocalization.format(\"dxCalendar-todayButtonText\"),\r\n                onClick: function() {\r\n                    this._toTodayView()\r\n                }.bind(this),\r\n                integrationOptions: {}\r\n            }).$element().addClass(CALENDAR_TODAY_BUTTON_CLASS);\r\n            this._$footer = $(\"<div>\").addClass(CALENDAR_FOOTER_CLASS).append($todayButton);\r\n            this.$element().append(this._$footer)\r\n        }\r\n        this.$element().toggleClass(CALENDAR_HAS_FOOTER_CLASS, showTodayButton)\r\n    },\r\n    _renderSubmitElement: function() {\r\n        this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\r\n        this._setSubmitValue(this.option(\"value\"))\r\n    },\r\n    _setSubmitValue: function(value) {\r\n        var dateValue = this._convertToDate(value);\r\n        this._getSubmitElement().val(dateSerialization.serializeDate(dateValue, CALENDAR_INPUT_STANDARD_PATTERN))\r\n    },\r\n    _getSubmitElement: function() {\r\n        return this._$submitElement\r\n    },\r\n    _animateShowView: function() {\r\n        fx.stop(this._view.$element(), true);\r\n        return this._popAnimationView(this._view, POP_ANIMATION_FROM, POP_ANIMATION_TO, ANIMATION_DURATION_SHOW_VIEW).promise()\r\n    },\r\n    _popAnimationView: function(view, from, to, duration) {\r\n        return fx.animate(view.$element(), {\r\n            type: \"pop\",\r\n            from: {\r\n                scale: from,\r\n                opacity: from\r\n            },\r\n            to: {\r\n                scale: to,\r\n                opacity: to\r\n            },\r\n            duration: duration\r\n        })\r\n    },\r\n    _navigate: function(offset, value) {\r\n        if (0 !== offset && 1 !== Math.abs(offset) && this._isViewAvailable(value)) {\r\n            var newView = this._renderSpecificView(value);\r\n            if (offset > 0) {\r\n                this._afterView && this._afterView.$element().remove();\r\n                this._afterView = newView\r\n            } else {\r\n                this._beforeView && this._beforeView.$element().remove();\r\n                this._beforeView = newView\r\n            }\r\n            this._translateViews()\r\n        }\r\n        var rtlCorrection = this._getRtlCorrection();\r\n        var offsetSign = offset > 0 ? 1 : offset < 0 ? -1 : 0;\r\n        var endPosition = -rtlCorrection * offsetSign * this._viewWidth();\r\n        var viewsWrapperPosition = this._$viewsWrapper.position().left;\r\n        if (viewsWrapperPosition !== endPosition) {\r\n            if (this._preventViewChangeAnimation) {\r\n                this._wrapperAnimationEndHandler(offset, value)\r\n            } else {\r\n                this._animateWrapper(endPosition, ANIMATION_DURATION_SHOW_VIEW).done(this._wrapperAnimationEndHandler.bind(this, offset, value))\r\n            }\r\n        }\r\n    },\r\n    _animateWrapper: function(to, duration) {\r\n        return fx.animate(this._$viewsWrapper, {\r\n            type: \"slide\",\r\n            from: {\r\n                left: this._$viewsWrapper.position().left\r\n            },\r\n            to: {\r\n                left: to\r\n            },\r\n            duration: duration\r\n        })\r\n    },\r\n    _toTodayView: function() {\r\n        var today = new Date;\r\n        if (this._isMaxZoomLevel()) {\r\n            this._dateOption(\"value\", today);\r\n            return\r\n        }\r\n        this._preventViewChangeAnimation = true;\r\n        this.option(\"zoomLevel\", this.option(\"maxZoomLevel\"));\r\n        this._dateOption(\"value\", today);\r\n        this._animateShowView();\r\n        this._preventViewChangeAnimation = false\r\n    },\r\n    _wrapperAnimationEndHandler: function(offset, newDate) {\r\n        this._rearrangeViews(offset);\r\n        this._translateViews();\r\n        this._resetLocation();\r\n        this._renderNavigator();\r\n        this._setViewContoured(newDate);\r\n        this._updateAriaId(newDate)\r\n    },\r\n    _rearrangeViews: function(offset) {\r\n        if (0 === offset) {\r\n            return\r\n        }\r\n        var viewOffset;\r\n        var viewToCreateKey;\r\n        var viewToRemoveKey;\r\n        if (offset < 0) {\r\n            viewOffset = 1;\r\n            viewToCreateKey = \"_beforeView\";\r\n            viewToRemoveKey = \"_afterView\"\r\n        } else {\r\n            viewOffset = -1;\r\n            viewToCreateKey = \"_afterView\";\r\n            viewToRemoveKey = \"_beforeView\"\r\n        }\r\n        if (!this[viewToCreateKey]) {\r\n            return\r\n        }\r\n        var destinationDate = this[viewToCreateKey].option(\"date\");\r\n        if (this[viewToRemoveKey]) {\r\n            this[viewToRemoveKey].$element().remove()\r\n        }\r\n        if (offset === viewOffset) {\r\n            this[viewToRemoveKey] = this._view\r\n        } else {\r\n            this[viewToRemoveKey] = this._renderSpecificView(this._getDateByOffset(viewOffset, destinationDate));\r\n            this._view.$element().remove()\r\n        }\r\n        this._view = this[viewToCreateKey];\r\n        var dateByOffset = this._getDateByOffset(-viewOffset, destinationDate);\r\n        this[viewToCreateKey] = this._isViewAvailable(dateByOffset) ? this._renderSpecificView(dateByOffset) : null\r\n    },\r\n    _resetLocation: function() {\r\n        translator.move(this._$viewsWrapper, {\r\n            left: 0,\r\n            top: 0\r\n        })\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._clearViewWidthCache();\r\n        delete this._$viewsWrapper;\r\n        delete this._navigator;\r\n        delete this._$footer\r\n    },\r\n    _clearViewWidthCache: function() {\r\n        delete this._viewWidthValue\r\n    },\r\n    _disposeViews: function() {\r\n        this._view.$element().remove();\r\n        this._beforeView && this._beforeView.$element().remove();\r\n        this._afterView && this._afterView.$element().remove();\r\n        delete this._view;\r\n        delete this._beforeView;\r\n        delete this._afterView\r\n    },\r\n    _refreshViews: function() {\r\n        this._disposeViews();\r\n        this._renderViews()\r\n    },\r\n    _visibilityChanged: function() {\r\n        this._translateViews()\r\n    },\r\n    _focusInHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._view.option(\"contouredDate\", this.option(\"currentDate\"))\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._view.option(\"contouredDate\", null)\r\n    },\r\n    _updateViewsValue: function(value) {\r\n        var newValue = value ? new Date(value) : null;\r\n        this._view.option(\"value\", newValue);\r\n        this._beforeView && this._beforeView.option(\"value\", newValue);\r\n        this._afterView && this._afterView.option(\"value\", newValue)\r\n    },\r\n    _updateAriaSelected: function(value, previousValue) {\r\n        value = value || this._dateOption(\"value\");\r\n        var $prevSelectedCell = this._view._getCellByDate(previousValue);\r\n        var $selectedCell = this._view._getCellByDate(value);\r\n        this.setAria(\"selected\", void 0, $prevSelectedCell);\r\n        this.setAria(\"selected\", true, $selectedCell);\r\n        if (value && this.option(\"currentDate\").getTime() === value.getTime()) {\r\n            this._updateAriaId(value)\r\n        }\r\n    },\r\n    _updateAriaId: function(value) {\r\n        value = value || this.option(\"currentDate\");\r\n        var ariaId = \"dx-\" + new Guid;\r\n        var $newCell = this._view._getCellByDate(value);\r\n        this.setAria(\"id\", ariaId, $newCell);\r\n        this.setAria(\"activedescendant\", ariaId);\r\n        this._onContouredChanged(ariaId)\r\n    },\r\n    _suppressingNavigation: function(callback, args) {\r\n        this._suppressNavigation = true;\r\n        callback.apply(this, args);\r\n        delete this._suppressNavigation\r\n    },\r\n    _optionChanged: function(args) {\r\n        var value = args.value;\r\n        var previousValue = args.previousValue;\r\n        switch (args.name) {\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._clearViewWidthCache();\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                this.min = void 0;\r\n                this.max = void 0;\r\n                this._suppressingNavigation(this._updateCurrentDate, [this.option(\"currentDate\")]);\r\n                this._refreshViews();\r\n                this._renderNavigator();\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._refreshViews();\r\n                this._updateButtonsVisibility();\r\n                break;\r\n            case \"currentDate\":\r\n                this.setAria(\"id\", void 0, this._view._getCellByDate(previousValue));\r\n                this._updateCurrentDate(value);\r\n                break;\r\n            case \"zoomLevel\":\r\n                this.$element().removeClass(CALENDAR_VIEW_CLASS + \"-\" + previousValue);\r\n                this._correctZoomLevel();\r\n                this._refreshViews();\r\n                this._renderNavigator();\r\n                this._updateAriaId();\r\n                break;\r\n            case \"minZoomLevel\":\r\n            case \"maxZoomLevel\":\r\n                this._correctZoomLevel();\r\n                this._updateButtonsVisibility();\r\n                break;\r\n            case \"value\":\r\n                value = this._convertToDate(value);\r\n                previousValue = this._convertToDate(previousValue);\r\n                this._updateAriaSelected(value, previousValue);\r\n                this.option(\"currentDate\", typeUtils.isDefined(value) ? new Date(value) : new Date);\r\n                this._updateViewsValue(value);\r\n                this._setSubmitValue(value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"disabled\":\r\n                this._view.option(\"disabled\", value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"onCellClick\":\r\n                this._view.option(\"onCellClick\", value);\r\n                break;\r\n            case \"onContouredChanged\":\r\n                this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\r\n                break;\r\n            case \"disabledDates\":\r\n            case \"dateSerializationFormat\":\r\n            case \"cellTemplate\":\r\n            case \"showTodayButton\":\r\n                this._invalidate();\r\n                break;\r\n            case \"hasFocus\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nregisterComponent(\"dxCalendar\", Calendar);\r\nmodule.exports = Calendar;\r\n"]},"metadata":{},"sourceType":"module"}