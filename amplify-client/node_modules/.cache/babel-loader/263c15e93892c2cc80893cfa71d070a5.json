{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.appointment.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _translator2 = _interopRequireDefault(_translator);\n\nvar _utils = require(\"./utils.recurrence\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _ui = require(\"../tooltip/ui.tooltip\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _uiScheduler = require(\"./ui.scheduler.publisher_mixin\");\n\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\n\nvar _utils3 = require(\"../../events/utils\");\n\nvar _utils4 = _interopRequireDefault(_utils3);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _dom_component = require(\"../../core/dom_component\");\n\nvar _dom_component2 = _interopRequireDefault(_dom_component);\n\nvar _resizable = require(\"../resizable\");\n\nvar _resizable2 = _interopRequireDefault(_resizable);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _date = require(\"../../localization/date\");\n\nvar _date2 = _interopRequireDefault(_date);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DEFAULT_HORIZONTAL_HANDLES = \"left right\";\nvar DEFAULT_VERTICAL_HANDLES = \"top bottom\";\n\nvar REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME = _utils4.default.addNamespace(_pointer2.default.enter, \"dxSchedulerAppointment\");\n\nvar REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME = _utils4.default.addNamespace(_pointer2.default.leave, \"dxSchedulerAppointment\");\n\nvar EMPTY_APPOINTMENT_CLASS = \"dx-scheduler-appointment-empty\";\nvar APPOINTMENT_ALL_DAY_ITEM_CLASS = \"dx-scheduler-all-day-appointment\";\nvar DIRECTION_APPOINTMENT_CLASSES = {\n  horizontal: \"dx-scheduler-appointment-horizontal\",\n  vertical: \"dx-scheduler-appointment-vertical\"\n};\nvar RECURRENCE_APPOINTMENT_CLASS = \"dx-scheduler-appointment-recurrence\";\nvar COMPACT_APPOINTMENT_CLASS = \"dx-scheduler-appointment-compact\";\nvar REDUCED_APPOINTMENT_CLASS = \"dx-scheduler-appointment-reduced\";\nvar REDUCED_APPOINTMENT_ICON = \"dx-scheduler-appointment-reduced-icon\";\nvar REDUCED_APPOINTMENT_PARTS_CLASSES = {\n  head: \"dx-scheduler-appointment-head\",\n  body: \"dx-scheduler-appointment-body\",\n  tail: \"dx-scheduler-appointment-tail\"\n};\n\nvar Appointment = _dom_component2.default.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      data: {},\n      geometry: {\n        top: 0,\n        left: 0,\n        width: 0,\n        height: 0\n      },\n      allowDrag: true,\n      allowResize: true,\n      reduced: null,\n      isCompact: false,\n      direction: \"vertical\",\n      resizableConfig: {},\n      cellHeight: 0,\n      cellWidth: 0\n    });\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"data\":\n      case \"geometry\":\n      case \"allowDrag\":\n      case \"allowResize\":\n      case \"reduced\":\n      case \"sortedIndex\":\n      case \"isCompact\":\n      case \"direction\":\n      case \"resizableConfig\":\n      case \"cellHeight\":\n      case \"cellWidth\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _getHorizontalResizingRule: function _getHorizontalResizingRule() {\n    var reducedHandles = {\n      head: this.option(\"rtlEnabled\") ? \"right\" : \"left\",\n      body: \"\",\n      tail: this.option(\"rtlEnabled\") ? \"left\" : \"right\"\n    };\n    return {\n      handles: this.option(\"reduced\") ? reducedHandles[this.option(\"reduced\")] : DEFAULT_HORIZONTAL_HANDLES,\n      minHeight: 0,\n      minWidth: this.invoke(\"getCellWidth\"),\n      step: this.invoke(\"getResizableStep\")\n    };\n  },\n  _getVerticalResizingRule: function _getVerticalResizingRule() {\n    var height = this.invoke(\"getCellHeight\");\n    return {\n      handles: DEFAULT_VERTICAL_HANDLES,\n      minWidth: 0,\n      minHeight: height,\n      step: height\n    };\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._renderAppointmentGeometry();\n\n    this._renderEmptyClass();\n\n    this._renderCompactClass();\n\n    this._renderReducedAppointment();\n\n    this._renderAllDayClass();\n\n    this._renderDirection();\n\n    this.$element().data(\"dxAppointmentStartDate\", this.option(\"startDate\"));\n    this.$element().attr(\"title\", this.invoke(\"getField\", \"text\", this.option(\"data\")));\n    this.$element().attr(\"role\", \"button\");\n\n    this._renderRecurrenceClass();\n\n    this._renderResizable();\n  },\n  _renderAppointmentGeometry: function _renderAppointmentGeometry() {\n    var geometry = this.option(\"geometry\");\n    var $element = this.$element();\n\n    _translator2.default.move($element, {\n      top: geometry.top,\n      left: geometry.left\n    });\n\n    $element.css({\n      width: geometry.width < 0 ? 0 : geometry.width,\n      height: geometry.height < 0 ? 0 : geometry.height\n    });\n  },\n  _renderEmptyClass: function _renderEmptyClass() {\n    var geometry = this.option(\"geometry\");\n\n    if (geometry.empty || this.option(\"isCompact\")) {\n      this.$element().addClass(EMPTY_APPOINTMENT_CLASS);\n    }\n  },\n  _renderReducedAppointment: function _renderReducedAppointment() {\n    var reducedPart = this.option(\"reduced\");\n\n    if (!reducedPart) {\n      return;\n    }\n\n    this.$element().toggleClass(REDUCED_APPOINTMENT_CLASS, true).toggleClass(REDUCED_APPOINTMENT_PARTS_CLASSES[reducedPart], true);\n\n    this._renderAppointmentReducedIcon();\n  },\n  _renderAppointmentReducedIcon: function _renderAppointmentReducedIcon() {\n    var $icon = (0, _renderer2.default)(\"<div>\").addClass(REDUCED_APPOINTMENT_ICON).appendTo(this.$element());\n\n    var endDate = this._getEndDate();\n\n    var tooltipLabel = _message2.default.format(\"dxScheduler-editorLabelEndDate\");\n\n    var tooltipText = [tooltipLabel, \": \", _date2.default.format(endDate, \"monthAndDay\"), \", \", _date2.default.format(endDate, \"year\")].join(\"\");\n\n    _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME);\n\n    _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME, function () {\n      _ui2.default.show({\n        target: $icon,\n        content: tooltipText\n      });\n    });\n\n    _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME);\n\n    _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME, function () {\n      _ui2.default.hide();\n    });\n  },\n  _getEndDate: function _getEndDate() {\n    var result = this.invoke(\"getField\", \"endDate\", this.option(\"data\"));\n\n    if (result) {\n      return new Date(result);\n    }\n\n    return result;\n  },\n  _renderAllDayClass: function _renderAllDayClass() {\n    this.$element().toggleClass(APPOINTMENT_ALL_DAY_ITEM_CLASS, !!this.option(\"allDay\"));\n  },\n  _renderRecurrenceClass: function _renderRecurrenceClass() {\n    var rule = this.invoke(\"getField\", \"recurrenceRule\", this.option(\"data\"));\n\n    if (_utils2.default.getRecurrenceRule(rule).isValid) {\n      this.$element().addClass(RECURRENCE_APPOINTMENT_CLASS);\n    }\n  },\n  _renderCompactClass: function _renderCompactClass() {\n    this.$element().toggleClass(COMPACT_APPOINTMENT_CLASS, !!this.option(\"isCompact\"));\n  },\n  _renderDirection: function _renderDirection() {\n    this.$element().addClass(DIRECTION_APPOINTMENT_CLASSES[this.option(\"direction\")]);\n  },\n  _createResizingConfig: function _createResizingConfig() {\n    var config = \"vertical\" === this.option(\"direction\") ? this._getVerticalResizingRule() : this._getHorizontalResizingRule();\n    config.roundStepValue = true;\n\n    if (!this.invoke(\"isGroupedByDate\")) {\n      config.stepPrecision = \"strict\";\n    }\n\n    return config;\n  },\n  _renderResizable: function _renderResizable() {\n    if (this.option(\"allowResize\") && !this.option(\"isCompact\")) {\n      this._createComponent(this.$element(), _resizable2.default, (0, _extend.extend)(this._createResizingConfig(), this.option(\"resizableConfig\")));\n    }\n  }\n}).include(_uiScheduler2.default);\n\n(0, _component_registrator2.default)(\"dxSchedulerAppointment\", Appointment);\nmodule.exports = Appointment;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/scheduler/ui.scheduler.appointment.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_translator","_translator2","_utils","_utils2","_extend","_component_registrator","_component_registrator2","_ui","_ui2","_uiScheduler","_uiScheduler2","_utils3","_utils4","_pointer","_pointer2","_dom_component","_dom_component2","_resizable","_resizable2","_message","_message2","_date","_date2","obj","DEFAULT_HORIZONTAL_HANDLES","DEFAULT_VERTICAL_HANDLES","REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME","REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME","EMPTY_APPOINTMENT_CLASS","APPOINTMENT_ALL_DAY_ITEM_CLASS","DIRECTION_APPOINTMENT_CLASSES","horizontal","vertical","RECURRENCE_APPOINTMENT_CLASS","COMPACT_APPOINTMENT_CLASS","REDUCED_APPOINTMENT_CLASS","REDUCED_APPOINTMENT_ICON","REDUCED_APPOINTMENT_PARTS_CLASSES","head","body","tail","Appointment","_getDefaultOptions","data","geometry","top","left","width","height","allowDrag","allowResize","reduced","isCompact","direction","resizableConfig","cellHeight","cellWidth","_optionChanged","args","_getHorizontalResizingRule","reducedHandles","handles","minHeight","minWidth","step","_getVerticalResizingRule","_render","_renderAppointmentGeometry","$element","_renderEmptyClass","_renderReducedAppointment","reducedPart","_renderAppointmentReducedIcon","$icon","endDate","tooltipLabel","tooltipText","target","content","_getEndDate","result","_renderAllDayClass","_renderRecurrenceClass","rule","_renderCompactClass","_renderDirection","_createResizingConfig","config","_renderResizable","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.appointment.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _translator2 = _interopRequireDefault(_translator);\r\nvar _utils = require(\"./utils.recurrence\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _ui = require(\"../tooltip/ui.tooltip\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _uiScheduler = require(\"./ui.scheduler.publisher_mixin\");\r\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\r\nvar _utils3 = require(\"../../events/utils\");\r\nvar _utils4 = _interopRequireDefault(_utils3);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _dom_component = require(\"../../core/dom_component\");\r\nvar _dom_component2 = _interopRequireDefault(_dom_component);\r\nvar _resizable = require(\"../resizable\");\r\nvar _resizable2 = _interopRequireDefault(_resizable);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _date = require(\"../../localization/date\");\r\nvar _date2 = _interopRequireDefault(_date);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DEFAULT_HORIZONTAL_HANDLES = \"left right\";\r\nvar DEFAULT_VERTICAL_HANDLES = \"top bottom\";\r\nvar REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME = _utils4.default.addNamespace(_pointer2.default.enter, \"dxSchedulerAppointment\");\r\nvar REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME = _utils4.default.addNamespace(_pointer2.default.leave, \"dxSchedulerAppointment\");\r\nvar EMPTY_APPOINTMENT_CLASS = \"dx-scheduler-appointment-empty\";\r\nvar APPOINTMENT_ALL_DAY_ITEM_CLASS = \"dx-scheduler-all-day-appointment\";\r\nvar DIRECTION_APPOINTMENT_CLASSES = {\r\n    horizontal: \"dx-scheduler-appointment-horizontal\",\r\n    vertical: \"dx-scheduler-appointment-vertical\"\r\n};\r\nvar RECURRENCE_APPOINTMENT_CLASS = \"dx-scheduler-appointment-recurrence\";\r\nvar COMPACT_APPOINTMENT_CLASS = \"dx-scheduler-appointment-compact\";\r\nvar REDUCED_APPOINTMENT_CLASS = \"dx-scheduler-appointment-reduced\";\r\nvar REDUCED_APPOINTMENT_ICON = \"dx-scheduler-appointment-reduced-icon\";\r\nvar REDUCED_APPOINTMENT_PARTS_CLASSES = {\r\n    head: \"dx-scheduler-appointment-head\",\r\n    body: \"dx-scheduler-appointment-body\",\r\n    tail: \"dx-scheduler-appointment-tail\"\r\n};\r\nvar Appointment = _dom_component2.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            data: {},\r\n            geometry: {\r\n                top: 0,\r\n                left: 0,\r\n                width: 0,\r\n                height: 0\r\n            },\r\n            allowDrag: true,\r\n            allowResize: true,\r\n            reduced: null,\r\n            isCompact: false,\r\n            direction: \"vertical\",\r\n            resizableConfig: {},\r\n            cellHeight: 0,\r\n            cellWidth: 0\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"data\":\r\n            case \"geometry\":\r\n            case \"allowDrag\":\r\n            case \"allowResize\":\r\n            case \"reduced\":\r\n            case \"sortedIndex\":\r\n            case \"isCompact\":\r\n            case \"direction\":\r\n            case \"resizableConfig\":\r\n            case \"cellHeight\":\r\n            case \"cellWidth\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _getHorizontalResizingRule: function() {\r\n        var reducedHandles = {\r\n            head: this.option(\"rtlEnabled\") ? \"right\" : \"left\",\r\n            body: \"\",\r\n            tail: this.option(\"rtlEnabled\") ? \"left\" : \"right\"\r\n        };\r\n        return {\r\n            handles: this.option(\"reduced\") ? reducedHandles[this.option(\"reduced\")] : DEFAULT_HORIZONTAL_HANDLES,\r\n            minHeight: 0,\r\n            minWidth: this.invoke(\"getCellWidth\"),\r\n            step: this.invoke(\"getResizableStep\")\r\n        }\r\n    },\r\n    _getVerticalResizingRule: function() {\r\n        var height = this.invoke(\"getCellHeight\");\r\n        return {\r\n            handles: DEFAULT_VERTICAL_HANDLES,\r\n            minWidth: 0,\r\n            minHeight: height,\r\n            step: height\r\n        }\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderAppointmentGeometry();\r\n        this._renderEmptyClass();\r\n        this._renderCompactClass();\r\n        this._renderReducedAppointment();\r\n        this._renderAllDayClass();\r\n        this._renderDirection();\r\n        this.$element().data(\"dxAppointmentStartDate\", this.option(\"startDate\"));\r\n        this.$element().attr(\"title\", this.invoke(\"getField\", \"text\", this.option(\"data\")));\r\n        this.$element().attr(\"role\", \"button\");\r\n        this._renderRecurrenceClass();\r\n        this._renderResizable()\r\n    },\r\n    _renderAppointmentGeometry: function() {\r\n        var geometry = this.option(\"geometry\");\r\n        var $element = this.$element();\r\n        _translator2.default.move($element, {\r\n            top: geometry.top,\r\n            left: geometry.left\r\n        });\r\n        $element.css({\r\n            width: geometry.width < 0 ? 0 : geometry.width,\r\n            height: geometry.height < 0 ? 0 : geometry.height\r\n        })\r\n    },\r\n    _renderEmptyClass: function() {\r\n        var geometry = this.option(\"geometry\");\r\n        if (geometry.empty || this.option(\"isCompact\")) {\r\n            this.$element().addClass(EMPTY_APPOINTMENT_CLASS)\r\n        }\r\n    },\r\n    _renderReducedAppointment: function() {\r\n        var reducedPart = this.option(\"reduced\");\r\n        if (!reducedPart) {\r\n            return\r\n        }\r\n        this.$element().toggleClass(REDUCED_APPOINTMENT_CLASS, true).toggleClass(REDUCED_APPOINTMENT_PARTS_CLASSES[reducedPart], true);\r\n        this._renderAppointmentReducedIcon()\r\n    },\r\n    _renderAppointmentReducedIcon: function() {\r\n        var $icon = (0, _renderer2.default)(\"<div>\").addClass(REDUCED_APPOINTMENT_ICON).appendTo(this.$element());\r\n        var endDate = this._getEndDate();\r\n        var tooltipLabel = _message2.default.format(\"dxScheduler-editorLabelEndDate\");\r\n        var tooltipText = [tooltipLabel, \": \", _date2.default.format(endDate, \"monthAndDay\"), \", \", _date2.default.format(endDate, \"year\")].join(\"\");\r\n        _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME);\r\n        _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME, function() {\r\n            _ui2.default.show({\r\n                target: $icon,\r\n                content: tooltipText\r\n            })\r\n        });\r\n        _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME);\r\n        _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME, function() {\r\n            _ui2.default.hide()\r\n        })\r\n    },\r\n    _getEndDate: function() {\r\n        var result = this.invoke(\"getField\", \"endDate\", this.option(\"data\"));\r\n        if (result) {\r\n            return new Date(result)\r\n        }\r\n        return result\r\n    },\r\n    _renderAllDayClass: function() {\r\n        this.$element().toggleClass(APPOINTMENT_ALL_DAY_ITEM_CLASS, !!this.option(\"allDay\"))\r\n    },\r\n    _renderRecurrenceClass: function() {\r\n        var rule = this.invoke(\"getField\", \"recurrenceRule\", this.option(\"data\"));\r\n        if (_utils2.default.getRecurrenceRule(rule).isValid) {\r\n            this.$element().addClass(RECURRENCE_APPOINTMENT_CLASS)\r\n        }\r\n    },\r\n    _renderCompactClass: function() {\r\n        this.$element().toggleClass(COMPACT_APPOINTMENT_CLASS, !!this.option(\"isCompact\"))\r\n    },\r\n    _renderDirection: function() {\r\n        this.$element().addClass(DIRECTION_APPOINTMENT_CLASSES[this.option(\"direction\")])\r\n    },\r\n    _createResizingConfig: function() {\r\n        var config = \"vertical\" === this.option(\"direction\") ? this._getVerticalResizingRule() : this._getHorizontalResizingRule();\r\n        config.roundStepValue = true;\r\n        if (!this.invoke(\"isGroupedByDate\")) {\r\n            config.stepPrecision = \"strict\"\r\n        }\r\n        return config\r\n    },\r\n    _renderResizable: function() {\r\n        if (this.option(\"allowResize\") && !this.option(\"isCompact\")) {\r\n            this._createComponent(this.$element(), _resizable2.default, (0, _extend.extend)(this._createResizingConfig(), this.option(\"resizableConfig\")))\r\n        }\r\n    }\r\n}).include(_uiScheduler2.default);\r\n(0, _component_registrator2.default)(\"dxSchedulerAppointment\", Appointment);\r\nmodule.exports = Appointment;\r\n"]},"metadata":{},"sourceType":"module"}