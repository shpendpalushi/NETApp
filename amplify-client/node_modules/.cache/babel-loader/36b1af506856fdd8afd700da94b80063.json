{"ast":null,"code":"/**\r\n * DevExtreme (ui/text_box/ui.text_editor.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _dom2 = _interopRequireDefault(_dom);\n\nvar _selectors = require(\"../widget/selectors\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _editor = require(\"../editor/editor\");\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _uiText_editor = require(\"./ui.text_editor.clear\");\n\nvar _uiText_editor2 = _interopRequireDefault(_uiText_editor);\n\nvar _index = require(\"./texteditor_button_collection/index\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _config = require(\"../../core/config\");\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _load_indicator = require(\"../load_indicator\");\n\nvar _load_indicator2 = _interopRequireDefault(_load_indicator);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar TEXTEDITOR_CLASS = \"dx-texteditor\";\nvar TEXTEDITOR_INPUT_CONTAINER_CLASS = \"dx-texteditor-input-container\";\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\nvar TEXTEDITOR_INPUT_SELECTOR = \".\" + TEXTEDITOR_INPUT_CLASS;\nvar TEXTEDITOR_CONTAINER_CLASS = \"dx-texteditor-container\";\nvar TEXTEDITOR_BUTTONS_CONTAINER_CLASS = \"dx-texteditor-buttons-container\";\nvar TEXTEDITOR_PLACEHOLDER_CLASS = \"dx-placeholder\";\nvar TEXTEDITOR_EMPTY_INPUT_CLASS = \"dx-texteditor-empty\";\nvar TEXTEDITOR_STYLING_MODE_PREFIX = \"dx-editor-\";\nvar ALLOWED_STYLE_CLASSES = [TEXTEDITOR_STYLING_MODE_PREFIX + \"outlined\", TEXTEDITOR_STYLING_MODE_PREFIX + \"filled\", TEXTEDITOR_STYLING_MODE_PREFIX + \"underlined\"];\nvar STATE_INVISIBLE_CLASS = \"dx-state-invisible\";\nvar TEXTEDITOR_PENDING_INDICATOR_CLASS = \"dx-pending-indicator\";\nvar TEXTEDITOR_VALIDATION_PENDING_CLASS = \"dx-validation-pending\";\nvar TEXTEDITOR_VALID_CLASS = \"dx-valid\";\nvar EVENTS_LIST = [\"KeyDown\", \"KeyPress\", \"KeyUp\", \"Change\", \"Cut\", \"Copy\", \"Paste\", \"Input\"];\nvar CONTROL_KEYS = [\"tab\", \"enter\", \"shift\", \"control\", \"alt\", \"escape\", \"pageUp\", \"pageDown\", \"end\", \"home\", \"leftArrow\", \"upArrow\", \"rightArrow\", \"downArrow\"];\n\nfunction checkButtonsOptionType(buttons) {\n  if ((0, _type.isDefined)(buttons) && !Array.isArray(buttons)) {\n    throw _ui2.default.Error(\"E1053\");\n  }\n}\n\nvar TextEditorBase = _editor2.default.inherit({\n  ctor: function ctor(_, options) {\n    if (options) {\n      checkButtonsOptionType(options.buttons);\n    }\n\n    this._buttonCollection = new _index2.default(this, this._getDefaultButtons());\n    this._$beforeButtonsContainer = null;\n    this._$afterButtonsContainer = null;\n    this.callBase.apply(this, arguments);\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      buttons: void 0,\n      value: \"\",\n      spellcheck: false,\n      showClearButton: false,\n      valueChangeEvent: \"change\",\n      placeholder: \"\",\n      inputAttr: {},\n      onFocusIn: null,\n      onFocusOut: null,\n      onKeyDown: null,\n      onKeyPress: null,\n      onKeyUp: null,\n      onChange: null,\n      onInput: null,\n      onCut: null,\n      onCopy: null,\n      onPaste: null,\n      onEnterKey: null,\n      mode: \"text\",\n      hoverStateEnabled: true,\n      focusStateEnabled: true,\n      text: void 0,\n      displayValueFormatter: function displayValueFormatter(value) {\n        return (0, _type.isDefined)(value) && false !== value ? value : \"\";\n      },\n      stylingMode: (0, _config2.default)().editorStylingMode || \"outlined\"\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    var themeName = _themes2.default.current();\n\n    return this.callBase().concat([{\n      device: function device() {\n        return _themes2.default.isMaterial(themeName);\n      },\n      options: {\n        stylingMode: (0, _config2.default)().editorStylingMode || \"underlined\"\n      }\n    }]);\n  },\n  _getDefaultButtons: function _getDefaultButtons() {\n    return [{\n      name: \"clear\",\n      Ctor: _uiText_editor2.default\n    }];\n  },\n  _isClearButtonVisible: function _isClearButtonVisible() {\n    return this.option(\"showClearButton\") && !this.option(\"readOnly\");\n  },\n  _input: function _input() {\n    return this.$element().find(TEXTEDITOR_INPUT_SELECTOR).first();\n  },\n  _isFocused: function _isFocused() {\n    return (0, _selectors.focused)(this._input()) || this.callBase();\n  },\n  _inputWrapper: function _inputWrapper() {\n    return this.$element();\n  },\n  _buttonsContainer: function _buttonsContainer() {\n    return this._inputWrapper().find(\".\" + TEXTEDITOR_BUTTONS_CONTAINER_CLASS).eq(0);\n  },\n  _isControlKey: function _isControlKey(key) {\n    return CONTROL_KEYS.indexOf(key) !== -1;\n  },\n  _renderStylingMode: function _renderStylingMode() {\n    var _this = this;\n\n    var optionName = \"stylingMode\";\n    var optionValue = this.option(optionName);\n    ALLOWED_STYLE_CLASSES.forEach(function (className) {\n      return _this.$element().removeClass(className);\n    });\n    var stylingModeClass = TEXTEDITOR_STYLING_MODE_PREFIX + optionValue;\n\n    if (ALLOWED_STYLE_CLASSES.indexOf(stylingModeClass) === -1) {\n      var defaultOptionValue = this._getDefaultOptions()[optionName];\n\n      var platformOptionValue = this._convertRulesToOptions(this._defaultOptionsRules())[optionName];\n\n      stylingModeClass = TEXTEDITOR_STYLING_MODE_PREFIX + (platformOptionValue || defaultOptionValue);\n    }\n\n    this.$element().addClass(stylingModeClass);\n\n    this._updateButtonsStyling(optionValue);\n  },\n  _initMarkup: function _initMarkup() {\n    this.$element().addClass(TEXTEDITOR_CLASS);\n\n    this._renderInput();\n\n    this._renderStylingMode();\n\n    this._renderInputType();\n\n    this._renderPlaceholder();\n\n    this._renderProps();\n\n    this.callBase();\n\n    this._renderValue();\n  },\n  _render: function _render() {\n    this._renderPlaceholder();\n\n    this._refreshValueChangeEvent();\n\n    this._renderEvents();\n\n    this._renderEnterKeyAction();\n\n    this._renderEmptinessEvent();\n\n    this.callBase();\n  },\n  _renderInput: function _renderInput() {\n    this._$textEditorContainer = (0, _renderer2.default)(\"<div>\").addClass(TEXTEDITOR_CONTAINER_CLASS).appendTo(this.$element());\n    this._$textEditorInputContainer = (0, _renderer2.default)(\"<div>\").addClass(TEXTEDITOR_INPUT_CONTAINER_CLASS).appendTo(this._$textEditorContainer);\n\n    this._$textEditorInputContainer.append(this._createInput());\n\n    this._renderButtonContainers();\n  },\n  _getInputContainer: function _getInputContainer() {\n    return this._$textEditorInputContainer;\n  },\n  _renderPendingIndicator: function _renderPendingIndicator() {\n    this.$element().addClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);\n\n    var $inputContainer = this._getInputContainer();\n\n    var $indicatorElement = (0, _renderer2.default)(\"<div>\").addClass(TEXTEDITOR_PENDING_INDICATOR_CLASS).appendTo($inputContainer);\n    this._pendingIndicator = this._createComponent($indicatorElement, _load_indicator2.default);\n  },\n  _disposePendingIndicator: function _disposePendingIndicator() {\n    if (!this._pendingIndicator) {\n      return;\n    }\n\n    this._pendingIndicator.dispose();\n\n    this._pendingIndicator.$element().remove();\n\n    this._pendingIndicator = null;\n    this.$element().removeClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);\n  },\n  _renderValidationState: function _renderValidationState() {\n    this.callBase();\n    var isPending = \"pending\" === this.option(\"validationStatus\");\n    var $element = this.$element();\n\n    if (isPending) {\n      !this._pendingIndicator && this._renderPendingIndicator();\n      this._showValidMark = false;\n    } else {\n      if (\"invalid\" === this.option(\"validationStatus\")) {\n        this._showValidMark = false;\n      }\n\n      if (!this._showValidMark) {\n        this._showValidMark = \"valid\" === this.option(\"validationStatus\") && !!this._pendingIndicator;\n      }\n\n      this._disposePendingIndicator();\n    }\n\n    $element.toggleClass(TEXTEDITOR_VALID_CLASS, this._showValidMark);\n  },\n  _renderButtonContainers: function _renderButtonContainers() {\n    var buttons = this.option(\"buttons\");\n    this._$beforeButtonsContainer = this._buttonCollection.renderBeforeButtons(buttons, this._$textEditorContainer);\n    this._$afterButtonsContainer = this._buttonCollection.renderAfterButtons(buttons, this._$textEditorContainer);\n  },\n  _clean: function _clean() {\n    this._buttonCollection.clean();\n\n    this._disposePendingIndicator();\n\n    this._$beforeButtonsContainer = null;\n    this._$afterButtonsContainer = null;\n    this._$textEditorContainer = null;\n    this.callBase();\n  },\n  _createInput: function _createInput() {\n    var $input = (0, _renderer2.default)(\"<input>\");\n\n    this._applyInputAttributes($input, this.option(\"inputAttr\"));\n\n    return $input;\n  },\n  _setSubmitElementName: function _setSubmitElementName(name) {\n    var inputAttrName = this.option(\"inputAttr.name\");\n    return this.callBase(name || inputAttrName || \"\");\n  },\n  _applyInputAttributes: function _applyInputAttributes($input, customAttributes) {\n    $input.attr(\"autocomplete\", \"off\").attr(customAttributes).addClass(TEXTEDITOR_INPUT_CLASS).css(\"minHeight\", this.option(\"height\") ? \"0\" : \"\");\n  },\n  _updateButtons: function _updateButtons(names) {\n    this._buttonCollection.updateButtons(names);\n  },\n  _updateButtonsStyling: function _updateButtonsStyling(editorStylingMode) {\n    var _this2 = this;\n\n    (0, _iterator.each)(this.option(\"buttons\"), function (_, buttonOptions) {\n      if (buttonOptions.options && !buttonOptions.options.stylingMode) {\n        var buttonInstance = _this2.getButton(buttonOptions.name);\n\n        buttonInstance.option && buttonInstance.option(\"stylingMode\", \"underlined\" === editorStylingMode ? \"text\" : \"contained\");\n      }\n    });\n  },\n  _renderValue: function _renderValue() {\n    var renderInputPromise = this._renderInputValue();\n\n    return renderInputPromise.promise();\n  },\n  _renderInputValue: function _renderInputValue(value) {\n    value = value || this.option(\"value\");\n    var text = this.option(\"text\");\n    var displayValue = this.option(\"displayValue\");\n    var displayValueFormatter = this.option(\"displayValueFormatter\");\n\n    if (void 0 !== displayValue && null !== value) {\n      text = displayValueFormatter(displayValue);\n    } else {\n      if (!(0, _type.isDefined)(text)) {\n        text = displayValueFormatter(value);\n      }\n    }\n\n    this.option(\"text\", text);\n\n    if (this._input().val() !== ((0, _type.isDefined)(text) ? text : \"\")) {\n      this._renderDisplayText(text);\n    } else {\n      this._toggleEmptinessEventHandler();\n    }\n\n    return new _deferred.Deferred().resolve();\n  },\n  _renderDisplayText: function _renderDisplayText(text) {\n    this._input().val(text);\n\n    this._toggleEmptinessEventHandler();\n  },\n  _isValueValid: function _isValueValid() {\n    if (this._input().length) {\n      var validity = this._input().get(0).validity;\n\n      if (validity) {\n        return validity.valid;\n      }\n    }\n\n    return true;\n  },\n  _toggleEmptiness: function _toggleEmptiness(isEmpty) {\n    this.$element().toggleClass(TEXTEDITOR_EMPTY_INPUT_CLASS, isEmpty);\n\n    this._togglePlaceholder(isEmpty);\n  },\n  _togglePlaceholder: function _togglePlaceholder(isEmpty) {\n    if (!this._$placeholder) {\n      return;\n    }\n\n    this._$placeholder.toggleClass(STATE_INVISIBLE_CLASS, !isEmpty);\n  },\n  _renderProps: function _renderProps() {\n    this._toggleReadOnlyState();\n\n    this._toggleSpellcheckState();\n\n    this._toggleTabIndex();\n  },\n  _toggleDisabledState: function _toggleDisabledState(value) {\n    this.callBase.apply(this, arguments);\n\n    var $input = this._input();\n\n    if (value) {\n      $input.attr(\"disabled\", true);\n    } else {\n      $input.removeAttr(\"disabled\");\n    }\n  },\n  _toggleTabIndex: function _toggleTabIndex() {\n    var $input = this._input();\n\n    var disabled = this.option(\"disabled\");\n    var focusStateEnabled = this.option(\"focusStateEnabled\");\n\n    if (disabled || !focusStateEnabled) {\n      $input.attr(\"tabIndex\", -1);\n    } else {\n      $input.removeAttr(\"tabIndex\");\n    }\n  },\n  _toggleReadOnlyState: function _toggleReadOnlyState() {\n    this._input().prop(\"readOnly\", this._readOnlyPropValue());\n\n    this.callBase();\n  },\n  _readOnlyPropValue: function _readOnlyPropValue() {\n    return this.option(\"readOnly\");\n  },\n  _toggleSpellcheckState: function _toggleSpellcheckState() {\n    this._input().prop(\"spellcheck\", this.option(\"spellcheck\"));\n  },\n  _renderPlaceholder: function _renderPlaceholder() {\n    this._renderPlaceholderMarkup();\n\n    this._attachPlaceholderEvents();\n  },\n  _renderPlaceholderMarkup: function _renderPlaceholderMarkup() {\n    if (this._$placeholder) {\n      this._$placeholder.remove();\n\n      this._$placeholder = null;\n    }\n\n    var $input = this._input();\n\n    var placeholderText = this.option(\"placeholder\");\n    var $placeholder = this._$placeholder = (0, _renderer2.default)(\"<div>\").attr(\"data-dx_placeholder\", placeholderText);\n    $placeholder.insertAfter($input);\n    $placeholder.addClass(TEXTEDITOR_PLACEHOLDER_CLASS);\n  },\n  _attachPlaceholderEvents: function _attachPlaceholderEvents() {\n    var _this3 = this;\n\n    var startEvent = _utils2.default.addNamespace(_pointer2.default.up, this.NAME);\n\n    _events_engine2.default.on(this._$placeholder, startEvent, function () {\n      _events_engine2.default.trigger(_this3._input(), \"focus\");\n    });\n\n    this._toggleEmptinessEventHandler();\n  },\n  _placeholder: function _placeholder() {\n    return this._$placeholder || (0, _renderer2.default)();\n  },\n  _clearValueHandler: function _clearValueHandler(e) {\n    var $input = this._input();\n\n    e.stopPropagation();\n\n    this._saveValueChangeEvent(e);\n\n    this._clearValue();\n\n    !this._isFocused() && _events_engine2.default.trigger($input, \"focus\");\n\n    _events_engine2.default.trigger($input, \"input\");\n  },\n  _clearValue: function _clearValue() {\n    this.reset();\n  },\n  _renderEvents: function _renderEvents() {\n    var _this4 = this;\n\n    var $input = this._input();\n\n    (0, _iterator.each)(EVENTS_LIST, function (_, event) {\n      if (_this4.hasActionSubscription(\"on\" + event)) {\n        var action = _this4._createActionByOption(\"on\" + event, {\n          excludeValidators: [\"readOnly\"]\n        });\n\n        _events_engine2.default.on($input, _utils2.default.addNamespace(event.toLowerCase(), _this4.NAME), function (e) {\n          if (_this4._disposed) {\n            return;\n          }\n\n          action({\n            event: e\n          });\n        });\n      }\n    });\n  },\n  _refreshEvents: function _refreshEvents() {\n    var _this5 = this;\n\n    var $input = this._input();\n\n    (0, _iterator.each)(EVENTS_LIST, function (_, event) {\n      _events_engine2.default.off($input, _utils2.default.addNamespace(event.toLowerCase(), _this5.NAME));\n    });\n\n    this._renderEvents();\n  },\n  _keyPressHandler: function _keyPressHandler() {\n    this.option(\"text\", this._input().val());\n  },\n  _keyDownHandler: function _keyDownHandler(e) {\n    var $input = this._input();\n\n    var isCtrlEnter = e.ctrlKey && \"enter\" === _utils2.default.normalizeKeyName(e);\n\n    var isNewValue = $input.val() !== this.option(\"value\");\n\n    if (isCtrlEnter && isNewValue) {\n      _events_engine2.default.trigger($input, \"change\");\n    }\n  },\n  _renderValueChangeEvent: function _renderValueChangeEvent() {\n    var keyPressEvent = _utils2.default.addNamespace(this._renderValueEventName(), \"\".concat(this.NAME, \"TextChange\"));\n\n    var valueChangeEvent = _utils2.default.addNamespace(this.option(\"valueChangeEvent\"), \"\".concat(this.NAME, \"ValueChange\"));\n\n    var keyDownEvent = _utils2.default.addNamespace(\"keydown\", \"\".concat(this.NAME, \"TextChange\"));\n\n    var $input = this._input();\n\n    _events_engine2.default.on($input, keyPressEvent, this._keyPressHandler.bind(this));\n\n    _events_engine2.default.on($input, valueChangeEvent, this._valueChangeEventHandler.bind(this));\n\n    _events_engine2.default.on($input, keyDownEvent, this._keyDownHandler.bind(this));\n  },\n  _cleanValueChangeEvent: function _cleanValueChangeEvent() {\n    var valueChangeNamespace = \".\".concat(this.NAME, \"ValueChange\");\n    var textChangeNamespace = \".\".concat(this.NAME, \"TextChange\");\n\n    _events_engine2.default.off(this._input(), valueChangeNamespace);\n\n    _events_engine2.default.off(this._input(), textChangeNamespace);\n  },\n  _refreshValueChangeEvent: function _refreshValueChangeEvent() {\n    this._cleanValueChangeEvent();\n\n    this._renderValueChangeEvent();\n  },\n  _renderValueEventName: function _renderValueEventName() {\n    return \"input change keypress\";\n  },\n  _focusTarget: function _focusTarget() {\n    return this._input();\n  },\n  _focusEventTarget: function _focusEventTarget() {\n    return this.element();\n  },\n  _preventNestedFocusEvent: function _preventNestedFocusEvent(event) {\n    if (event.isDefaultPrevented()) {\n      return true;\n    }\n\n    var result = this._isNestedTarget(event.relatedTarget);\n\n    if (\"focusin\" === event.type) {\n      result = result && this._isNestedTarget(event.target);\n    }\n\n    result && event.preventDefault();\n    return result;\n  },\n  _isNestedTarget: function _isNestedTarget(target) {\n    return !!this.$element().find(target).length;\n  },\n  _focusClassTarget: function _focusClassTarget() {\n    return this.$element();\n  },\n  _focusInHandler: function _focusInHandler(event) {\n    this._preventNestedFocusEvent(event);\n\n    this.callBase.apply(this, arguments);\n  },\n  _focusOutHandler: function _focusOutHandler(event) {\n    this._preventNestedFocusEvent(event);\n\n    this.callBase.apply(this, arguments);\n  },\n  _toggleFocusClass: function _toggleFocusClass(isFocused, $element) {\n    this.callBase(isFocused, this._focusClassTarget($element));\n  },\n  _hasFocusClass: function _hasFocusClass(element) {\n    return this.callBase((0, _renderer2.default)(element || this.$element()));\n  },\n  _renderEmptinessEvent: function _renderEmptinessEvent() {\n    var $input = this._input();\n\n    _events_engine2.default.on($input, \"input blur\", this._toggleEmptinessEventHandler.bind(this));\n  },\n  _toggleEmptinessEventHandler: function _toggleEmptinessEventHandler() {\n    var text = this._input().val();\n\n    var isEmpty = (\"\" === text || null === text) && this._isValueValid();\n\n    this._toggleEmptiness(isEmpty);\n  },\n  _valueChangeEventHandler: function _valueChangeEventHandler(e, formattedValue) {\n    this._saveValueChangeEvent(e);\n\n    this.option(\"value\", arguments.length > 1 ? formattedValue : this._input().val());\n\n    this._saveValueChangeEvent(void 0);\n  },\n  _renderEnterKeyAction: function _renderEnterKeyAction() {\n    this._enterKeyAction = this._createActionByOption(\"onEnterKey\", {\n      excludeValidators: [\"readOnly\"]\n    });\n\n    _events_engine2.default.off(this._input(), \"keyup.onEnterKey.dxTextEditor\");\n\n    _events_engine2.default.on(this._input(), \"keyup.onEnterKey.dxTextEditor\", this._enterKeyHandlerUp.bind(this));\n  },\n  _enterKeyHandlerUp: function _enterKeyHandlerUp(e) {\n    if (this._disposed) {\n      return;\n    }\n\n    if (\"enter\" === _utils2.default.normalizeKeyName(e)) {\n      this._enterKeyAction({\n        event: e\n      });\n    }\n  },\n  _updateValue: function _updateValue() {\n    this.option(\"text\", void 0);\n\n    this._renderValue();\n  },\n  _dispose: function _dispose() {\n    this._enterKeyAction = void 0;\n    this.callBase();\n  },\n  _getSubmitElement: function _getSubmitElement() {\n    return this._input();\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name;\n\n    if ((0, _array.inArray)(name.replace(\"on\", \"\"), EVENTS_LIST) > -1) {\n      this._refreshEvents();\n\n      return;\n    }\n\n    switch (name) {\n      case \"valueChangeEvent\":\n        this._refreshValueChangeEvent();\n\n        this._refreshFocusEvent();\n\n        this._refreshEvents();\n\n        break;\n\n      case \"onValueChanged\":\n        this._createValueChangeAction();\n\n        break;\n\n      case \"focusStateEnabled\":\n        this.callBase(args);\n\n        this._toggleTabIndex();\n\n        break;\n\n      case \"spellcheck\":\n        this._toggleSpellcheckState();\n\n        break;\n\n      case \"mode\":\n        this._renderInputType();\n\n        break;\n\n      case \"onEnterKey\":\n        this._renderEnterKeyAction();\n\n        break;\n\n      case \"placeholder\":\n        this._renderPlaceholder();\n\n        break;\n\n      case \"readOnly\":\n      case \"disabled\":\n        this._updateButtons();\n\n        this.callBase(args);\n        break;\n\n      case \"showClearButton\":\n        this._updateButtons([\"clear\"]);\n\n        break;\n\n      case \"text\":\n        break;\n\n      case \"value\":\n        this._updateValue();\n\n        this.callBase(args);\n        break;\n\n      case \"inputAttr\":\n        this._applyInputAttributes(this._input(), args.value);\n\n        break;\n\n      case \"stylingMode\":\n        this._renderStylingMode();\n\n        break;\n\n      case \"buttons\":\n        if (args.fullName === args.name) {\n          checkButtonsOptionType(args.value);\n        }\n\n        this._$beforeButtonsContainer && this._$beforeButtonsContainer.remove();\n        this._$afterButtonsContainer && this._$afterButtonsContainer.remove();\n\n        this._buttonCollection.clean();\n\n        this._renderButtonContainers();\n\n        break;\n\n      case \"displayValueFormatter\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _renderInputType: function _renderInputType() {\n    this._setInputType(this.option(\"mode\"));\n  },\n  _setInputType: function _setInputType(type) {\n    var input = this._input();\n\n    if (\"search\" === type) {\n      type = \"text\";\n    }\n\n    try {\n      input.prop(\"type\", type);\n    } catch (e) {\n      input.prop(\"type\", \"text\");\n    }\n  },\n  getButton: function getButton(name) {\n    return this._buttonCollection.getButton(name);\n  },\n  focus: function focus() {\n    _events_engine2.default.trigger(this._input(), \"focus\");\n  },\n  blur: function blur() {\n    if (this._input().is(_dom_adapter2.default.getActiveElement())) {\n      _dom2.default.resetActiveElement();\n    }\n  },\n  reset: function reset() {\n    if (this._showValidMark) {\n      this._showValidMark = false;\n\n      this._renderValidationState();\n    }\n\n    var defaultOptions = this._getDefaultOptions();\n\n    if (this.option(\"value\") === defaultOptions.value) {\n      this.option(\"text\", \"\");\n\n      this._renderValue();\n    } else {\n      this.option(\"value\", defaultOptions.value);\n    }\n  },\n  on: function on(eventName, eventHandler) {\n    var result = this.callBase(eventName, eventHandler);\n    var event = eventName.charAt(0).toUpperCase() + eventName.substr(1);\n\n    if (EVENTS_LIST.indexOf(event) >= 0) {\n      this._refreshEvents();\n    }\n\n    return result;\n  }\n});\n\nmodule.exports = TextEditorBase;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/text_box/ui.text_editor.base.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_dom_adapter","_dom_adapter2","_events_engine","_events_engine2","_dom","_dom2","_selectors","_type","_extend","_array","_iterator","_themes","_themes2","_editor","_editor2","_utils","_utils2","_pointer","_pointer2","_uiText_editor","_uiText_editor2","_index","_index2","_config","_config2","_ui","_ui2","_deferred","_load_indicator","_load_indicator2","obj","TEXTEDITOR_CLASS","TEXTEDITOR_INPUT_CONTAINER_CLASS","TEXTEDITOR_INPUT_CLASS","TEXTEDITOR_INPUT_SELECTOR","TEXTEDITOR_CONTAINER_CLASS","TEXTEDITOR_BUTTONS_CONTAINER_CLASS","TEXTEDITOR_PLACEHOLDER_CLASS","TEXTEDITOR_EMPTY_INPUT_CLASS","TEXTEDITOR_STYLING_MODE_PREFIX","ALLOWED_STYLE_CLASSES","STATE_INVISIBLE_CLASS","TEXTEDITOR_PENDING_INDICATOR_CLASS","TEXTEDITOR_VALIDATION_PENDING_CLASS","TEXTEDITOR_VALID_CLASS","EVENTS_LIST","CONTROL_KEYS","Array","TextEditorBase","ctor","checkButtonsOptionType","options","_getDefaultOptions","buttons","value","spellcheck","showClearButton","valueChangeEvent","placeholder","inputAttr","onFocusIn","onFocusOut","onKeyDown","onKeyPress","onKeyUp","onChange","onInput","onCut","onCopy","onPaste","onEnterKey","mode","hoverStateEnabled","focusStateEnabled","text","displayValueFormatter","stylingMode","_defaultOptionsRules","themeName","device","_getDefaultButtons","name","Ctor","default","_isClearButtonVisible","_input","_isFocused","_inputWrapper","_buttonsContainer","_isControlKey","_renderStylingMode","_this","optionName","optionValue","stylingModeClass","defaultOptionValue","platformOptionValue","_initMarkup","_render","_renderInput","_getInputContainer","_renderPendingIndicator","$inputContainer","$indicatorElement","_disposePendingIndicator","_renderValidationState","isPending","$element","_renderButtonContainers","_clean","_createInput","$input","_setSubmitElementName","inputAttrName","_applyInputAttributes","_updateButtons","_updateButtonsStyling","_this2","buttonOptions","buttonInstance","_renderValue","renderInputPromise","_renderInputValue","displayValue","_renderDisplayText","_isValueValid","validity","_toggleEmptiness","_togglePlaceholder","_renderProps","_toggleDisabledState","_toggleTabIndex","disabled","_toggleReadOnlyState","_readOnlyPropValue","_toggleSpellcheckState","_renderPlaceholder","_renderPlaceholderMarkup","placeholderText","$placeholder","_attachPlaceholderEvents","_this3","startEvent","_placeholder","_clearValueHandler","e","_clearValue","_renderEvents","_this4","action","excludeValidators","event","_refreshEvents","_this5","_keyPressHandler","_keyDownHandler","isCtrlEnter","isNewValue","_renderValueChangeEvent","keyPressEvent","keyDownEvent","_cleanValueChangeEvent","valueChangeNamespace","textChangeNamespace","_refreshValueChangeEvent","_renderValueEventName","_focusTarget","_focusEventTarget","_preventNestedFocusEvent","result","_isNestedTarget","_focusClassTarget","_focusInHandler","_focusOutHandler","_toggleFocusClass","_hasFocusClass","element","_renderEmptinessEvent","_toggleEmptinessEventHandler","isEmpty","_valueChangeEventHandler","arguments","_renderEnterKeyAction","_enterKeyHandlerUp","_updateValue","_dispose","_getSubmitElement","_optionChanged","args","_renderInputType","_setInputType","input","type","getButton","focus","blur","reset","defaultOptions","on","eventName","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/text_box/ui.text_editor.base.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _dom2 = _interopRequireDefault(_dom);\r\nvar _selectors = require(\"../widget/selectors\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nvar _editor = require(\"../editor/editor\");\r\nvar _editor2 = _interopRequireDefault(_editor);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _uiText_editor = require(\"./ui.text_editor.clear\");\r\nvar _uiText_editor2 = _interopRequireDefault(_uiText_editor);\r\nvar _index = require(\"./texteditor_button_collection/index\");\r\nvar _index2 = _interopRequireDefault(_index);\r\nvar _config = require(\"../../core/config\");\r\nvar _config2 = _interopRequireDefault(_config);\r\nvar _ui = require(\"../widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _load_indicator = require(\"../load_indicator\");\r\nvar _load_indicator2 = _interopRequireDefault(_load_indicator);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar TEXTEDITOR_CLASS = \"dx-texteditor\";\r\nvar TEXTEDITOR_INPUT_CONTAINER_CLASS = \"dx-texteditor-input-container\";\r\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\r\nvar TEXTEDITOR_INPUT_SELECTOR = \".\" + TEXTEDITOR_INPUT_CLASS;\r\nvar TEXTEDITOR_CONTAINER_CLASS = \"dx-texteditor-container\";\r\nvar TEXTEDITOR_BUTTONS_CONTAINER_CLASS = \"dx-texteditor-buttons-container\";\r\nvar TEXTEDITOR_PLACEHOLDER_CLASS = \"dx-placeholder\";\r\nvar TEXTEDITOR_EMPTY_INPUT_CLASS = \"dx-texteditor-empty\";\r\nvar TEXTEDITOR_STYLING_MODE_PREFIX = \"dx-editor-\";\r\nvar ALLOWED_STYLE_CLASSES = [TEXTEDITOR_STYLING_MODE_PREFIX + \"outlined\", TEXTEDITOR_STYLING_MODE_PREFIX + \"filled\", TEXTEDITOR_STYLING_MODE_PREFIX + \"underlined\"];\r\nvar STATE_INVISIBLE_CLASS = \"dx-state-invisible\";\r\nvar TEXTEDITOR_PENDING_INDICATOR_CLASS = \"dx-pending-indicator\";\r\nvar TEXTEDITOR_VALIDATION_PENDING_CLASS = \"dx-validation-pending\";\r\nvar TEXTEDITOR_VALID_CLASS = \"dx-valid\";\r\nvar EVENTS_LIST = [\"KeyDown\", \"KeyPress\", \"KeyUp\", \"Change\", \"Cut\", \"Copy\", \"Paste\", \"Input\"];\r\nvar CONTROL_KEYS = [\"tab\", \"enter\", \"shift\", \"control\", \"alt\", \"escape\", \"pageUp\", \"pageDown\", \"end\", \"home\", \"leftArrow\", \"upArrow\", \"rightArrow\", \"downArrow\"];\r\n\r\nfunction checkButtonsOptionType(buttons) {\r\n    if ((0, _type.isDefined)(buttons) && !Array.isArray(buttons)) {\r\n        throw _ui2.default.Error(\"E1053\")\r\n    }\r\n}\r\nvar TextEditorBase = _editor2.default.inherit({\r\n    ctor: function(_, options) {\r\n        if (options) {\r\n            checkButtonsOptionType(options.buttons)\r\n        }\r\n        this._buttonCollection = new _index2.default(this, this._getDefaultButtons());\r\n        this._$beforeButtonsContainer = null;\r\n        this._$afterButtonsContainer = null;\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            buttons: void 0,\r\n            value: \"\",\r\n            spellcheck: false,\r\n            showClearButton: false,\r\n            valueChangeEvent: \"change\",\r\n            placeholder: \"\",\r\n            inputAttr: {},\r\n            onFocusIn: null,\r\n            onFocusOut: null,\r\n            onKeyDown: null,\r\n            onKeyPress: null,\r\n            onKeyUp: null,\r\n            onChange: null,\r\n            onInput: null,\r\n            onCut: null,\r\n            onCopy: null,\r\n            onPaste: null,\r\n            onEnterKey: null,\r\n            mode: \"text\",\r\n            hoverStateEnabled: true,\r\n            focusStateEnabled: true,\r\n            text: void 0,\r\n            displayValueFormatter: function(value) {\r\n                return (0, _type.isDefined)(value) && false !== value ? value : \"\"\r\n            },\r\n            stylingMode: (0, _config2.default)().editorStylingMode || \"outlined\"\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        var themeName = _themes2.default.current();\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return _themes2.default.isMaterial(themeName)\r\n            },\r\n            options: {\r\n                stylingMode: (0, _config2.default)().editorStylingMode || \"underlined\"\r\n            }\r\n        }])\r\n    },\r\n    _getDefaultButtons: function() {\r\n        return [{\r\n            name: \"clear\",\r\n            Ctor: _uiText_editor2.default\r\n        }]\r\n    },\r\n    _isClearButtonVisible: function() {\r\n        return this.option(\"showClearButton\") && !this.option(\"readOnly\")\r\n    },\r\n    _input: function() {\r\n        return this.$element().find(TEXTEDITOR_INPUT_SELECTOR).first()\r\n    },\r\n    _isFocused: function() {\r\n        return (0, _selectors.focused)(this._input()) || this.callBase()\r\n    },\r\n    _inputWrapper: function() {\r\n        return this.$element()\r\n    },\r\n    _buttonsContainer: function() {\r\n        return this._inputWrapper().find(\".\" + TEXTEDITOR_BUTTONS_CONTAINER_CLASS).eq(0)\r\n    },\r\n    _isControlKey: function(key) {\r\n        return CONTROL_KEYS.indexOf(key) !== -1\r\n    },\r\n    _renderStylingMode: function() {\r\n        var _this = this;\r\n        var optionName = \"stylingMode\";\r\n        var optionValue = this.option(optionName);\r\n        ALLOWED_STYLE_CLASSES.forEach(function(className) {\r\n            return _this.$element().removeClass(className)\r\n        });\r\n        var stylingModeClass = TEXTEDITOR_STYLING_MODE_PREFIX + optionValue;\r\n        if (ALLOWED_STYLE_CLASSES.indexOf(stylingModeClass) === -1) {\r\n            var defaultOptionValue = this._getDefaultOptions()[optionName];\r\n            var platformOptionValue = this._convertRulesToOptions(this._defaultOptionsRules())[optionName];\r\n            stylingModeClass = TEXTEDITOR_STYLING_MODE_PREFIX + (platformOptionValue || defaultOptionValue)\r\n        }\r\n        this.$element().addClass(stylingModeClass);\r\n        this._updateButtonsStyling(optionValue)\r\n    },\r\n    _initMarkup: function() {\r\n        this.$element().addClass(TEXTEDITOR_CLASS);\r\n        this._renderInput();\r\n        this._renderStylingMode();\r\n        this._renderInputType();\r\n        this._renderPlaceholder();\r\n        this._renderProps();\r\n        this.callBase();\r\n        this._renderValue()\r\n    },\r\n    _render: function() {\r\n        this._renderPlaceholder();\r\n        this._refreshValueChangeEvent();\r\n        this._renderEvents();\r\n        this._renderEnterKeyAction();\r\n        this._renderEmptinessEvent();\r\n        this.callBase()\r\n    },\r\n    _renderInput: function() {\r\n        this._$textEditorContainer = (0, _renderer2.default)(\"<div>\").addClass(TEXTEDITOR_CONTAINER_CLASS).appendTo(this.$element());\r\n        this._$textEditorInputContainer = (0, _renderer2.default)(\"<div>\").addClass(TEXTEDITOR_INPUT_CONTAINER_CLASS).appendTo(this._$textEditorContainer);\r\n        this._$textEditorInputContainer.append(this._createInput());\r\n        this._renderButtonContainers()\r\n    },\r\n    _getInputContainer: function() {\r\n        return this._$textEditorInputContainer\r\n    },\r\n    _renderPendingIndicator: function() {\r\n        this.$element().addClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);\r\n        var $inputContainer = this._getInputContainer();\r\n        var $indicatorElement = (0, _renderer2.default)(\"<div>\").addClass(TEXTEDITOR_PENDING_INDICATOR_CLASS).appendTo($inputContainer);\r\n        this._pendingIndicator = this._createComponent($indicatorElement, _load_indicator2.default)\r\n    },\r\n    _disposePendingIndicator: function() {\r\n        if (!this._pendingIndicator) {\r\n            return\r\n        }\r\n        this._pendingIndicator.dispose();\r\n        this._pendingIndicator.$element().remove();\r\n        this._pendingIndicator = null;\r\n        this.$element().removeClass(TEXTEDITOR_VALIDATION_PENDING_CLASS)\r\n    },\r\n    _renderValidationState: function() {\r\n        this.callBase();\r\n        var isPending = \"pending\" === this.option(\"validationStatus\");\r\n        var $element = this.$element();\r\n        if (isPending) {\r\n            !this._pendingIndicator && this._renderPendingIndicator();\r\n            this._showValidMark = false\r\n        } else {\r\n            if (\"invalid\" === this.option(\"validationStatus\")) {\r\n                this._showValidMark = false\r\n            }\r\n            if (!this._showValidMark) {\r\n                this._showValidMark = \"valid\" === this.option(\"validationStatus\") && !!this._pendingIndicator\r\n            }\r\n            this._disposePendingIndicator()\r\n        }\r\n        $element.toggleClass(TEXTEDITOR_VALID_CLASS, this._showValidMark)\r\n    },\r\n    _renderButtonContainers: function() {\r\n        var buttons = this.option(\"buttons\");\r\n        this._$beforeButtonsContainer = this._buttonCollection.renderBeforeButtons(buttons, this._$textEditorContainer);\r\n        this._$afterButtonsContainer = this._buttonCollection.renderAfterButtons(buttons, this._$textEditorContainer)\r\n    },\r\n    _clean: function() {\r\n        this._buttonCollection.clean();\r\n        this._disposePendingIndicator();\r\n        this._$beforeButtonsContainer = null;\r\n        this._$afterButtonsContainer = null;\r\n        this._$textEditorContainer = null;\r\n        this.callBase()\r\n    },\r\n    _createInput: function() {\r\n        var $input = (0, _renderer2.default)(\"<input>\");\r\n        this._applyInputAttributes($input, this.option(\"inputAttr\"));\r\n        return $input\r\n    },\r\n    _setSubmitElementName: function(name) {\r\n        var inputAttrName = this.option(\"inputAttr.name\");\r\n        return this.callBase(name || inputAttrName || \"\")\r\n    },\r\n    _applyInputAttributes: function($input, customAttributes) {\r\n        $input.attr(\"autocomplete\", \"off\").attr(customAttributes).addClass(TEXTEDITOR_INPUT_CLASS).css(\"minHeight\", this.option(\"height\") ? \"0\" : \"\")\r\n    },\r\n    _updateButtons: function(names) {\r\n        this._buttonCollection.updateButtons(names)\r\n    },\r\n    _updateButtonsStyling: function(editorStylingMode) {\r\n        var _this2 = this;\r\n        (0, _iterator.each)(this.option(\"buttons\"), function(_, buttonOptions) {\r\n            if (buttonOptions.options && !buttonOptions.options.stylingMode) {\r\n                var buttonInstance = _this2.getButton(buttonOptions.name);\r\n                buttonInstance.option && buttonInstance.option(\"stylingMode\", \"underlined\" === editorStylingMode ? \"text\" : \"contained\")\r\n            }\r\n        })\r\n    },\r\n    _renderValue: function() {\r\n        var renderInputPromise = this._renderInputValue();\r\n        return renderInputPromise.promise()\r\n    },\r\n    _renderInputValue: function(value) {\r\n        value = value || this.option(\"value\");\r\n        var text = this.option(\"text\");\r\n        var displayValue = this.option(\"displayValue\");\r\n        var displayValueFormatter = this.option(\"displayValueFormatter\");\r\n        if (void 0 !== displayValue && null !== value) {\r\n            text = displayValueFormatter(displayValue)\r\n        } else {\r\n            if (!(0, _type.isDefined)(text)) {\r\n                text = displayValueFormatter(value)\r\n            }\r\n        }\r\n        this.option(\"text\", text);\r\n        if (this._input().val() !== ((0, _type.isDefined)(text) ? text : \"\")) {\r\n            this._renderDisplayText(text)\r\n        } else {\r\n            this._toggleEmptinessEventHandler()\r\n        }\r\n        return (new _deferred.Deferred).resolve()\r\n    },\r\n    _renderDisplayText: function(text) {\r\n        this._input().val(text);\r\n        this._toggleEmptinessEventHandler()\r\n    },\r\n    _isValueValid: function() {\r\n        if (this._input().length) {\r\n            var validity = this._input().get(0).validity;\r\n            if (validity) {\r\n                return validity.valid\r\n            }\r\n        }\r\n        return true\r\n    },\r\n    _toggleEmptiness: function(isEmpty) {\r\n        this.$element().toggleClass(TEXTEDITOR_EMPTY_INPUT_CLASS, isEmpty);\r\n        this._togglePlaceholder(isEmpty)\r\n    },\r\n    _togglePlaceholder: function(isEmpty) {\r\n        if (!this._$placeholder) {\r\n            return\r\n        }\r\n        this._$placeholder.toggleClass(STATE_INVISIBLE_CLASS, !isEmpty)\r\n    },\r\n    _renderProps: function() {\r\n        this._toggleReadOnlyState();\r\n        this._toggleSpellcheckState();\r\n        this._toggleTabIndex()\r\n    },\r\n    _toggleDisabledState: function(value) {\r\n        this.callBase.apply(this, arguments);\r\n        var $input = this._input();\r\n        if (value) {\r\n            $input.attr(\"disabled\", true)\r\n        } else {\r\n            $input.removeAttr(\"disabled\")\r\n        }\r\n    },\r\n    _toggleTabIndex: function() {\r\n        var $input = this._input();\r\n        var disabled = this.option(\"disabled\");\r\n        var focusStateEnabled = this.option(\"focusStateEnabled\");\r\n        if (disabled || !focusStateEnabled) {\r\n            $input.attr(\"tabIndex\", -1)\r\n        } else {\r\n            $input.removeAttr(\"tabIndex\")\r\n        }\r\n    },\r\n    _toggleReadOnlyState: function() {\r\n        this._input().prop(\"readOnly\", this._readOnlyPropValue());\r\n        this.callBase()\r\n    },\r\n    _readOnlyPropValue: function() {\r\n        return this.option(\"readOnly\")\r\n    },\r\n    _toggleSpellcheckState: function() {\r\n        this._input().prop(\"spellcheck\", this.option(\"spellcheck\"))\r\n    },\r\n    _renderPlaceholder: function() {\r\n        this._renderPlaceholderMarkup();\r\n        this._attachPlaceholderEvents()\r\n    },\r\n    _renderPlaceholderMarkup: function() {\r\n        if (this._$placeholder) {\r\n            this._$placeholder.remove();\r\n            this._$placeholder = null\r\n        }\r\n        var $input = this._input();\r\n        var placeholderText = this.option(\"placeholder\");\r\n        var $placeholder = this._$placeholder = (0, _renderer2.default)(\"<div>\").attr(\"data-dx_placeholder\", placeholderText);\r\n        $placeholder.insertAfter($input);\r\n        $placeholder.addClass(TEXTEDITOR_PLACEHOLDER_CLASS)\r\n    },\r\n    _attachPlaceholderEvents: function() {\r\n        var _this3 = this;\r\n        var startEvent = _utils2.default.addNamespace(_pointer2.default.up, this.NAME);\r\n        _events_engine2.default.on(this._$placeholder, startEvent, function() {\r\n            _events_engine2.default.trigger(_this3._input(), \"focus\")\r\n        });\r\n        this._toggleEmptinessEventHandler()\r\n    },\r\n    _placeholder: function() {\r\n        return this._$placeholder || (0, _renderer2.default)()\r\n    },\r\n    _clearValueHandler: function(e) {\r\n        var $input = this._input();\r\n        e.stopPropagation();\r\n        this._saveValueChangeEvent(e);\r\n        this._clearValue();\r\n        !this._isFocused() && _events_engine2.default.trigger($input, \"focus\");\r\n        _events_engine2.default.trigger($input, \"input\")\r\n    },\r\n    _clearValue: function() {\r\n        this.reset()\r\n    },\r\n    _renderEvents: function() {\r\n        var _this4 = this;\r\n        var $input = this._input();\r\n        (0, _iterator.each)(EVENTS_LIST, function(_, event) {\r\n            if (_this4.hasActionSubscription(\"on\" + event)) {\r\n                var action = _this4._createActionByOption(\"on\" + event, {\r\n                    excludeValidators: [\"readOnly\"]\r\n                });\r\n                _events_engine2.default.on($input, _utils2.default.addNamespace(event.toLowerCase(), _this4.NAME), function(e) {\r\n                    if (_this4._disposed) {\r\n                        return\r\n                    }\r\n                    action({\r\n                        event: e\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _refreshEvents: function() {\r\n        var _this5 = this;\r\n        var $input = this._input();\r\n        (0, _iterator.each)(EVENTS_LIST, function(_, event) {\r\n            _events_engine2.default.off($input, _utils2.default.addNamespace(event.toLowerCase(), _this5.NAME))\r\n        });\r\n        this._renderEvents()\r\n    },\r\n    _keyPressHandler: function() {\r\n        this.option(\"text\", this._input().val())\r\n    },\r\n    _keyDownHandler: function(e) {\r\n        var $input = this._input();\r\n        var isCtrlEnter = e.ctrlKey && \"enter\" === _utils2.default.normalizeKeyName(e);\r\n        var isNewValue = $input.val() !== this.option(\"value\");\r\n        if (isCtrlEnter && isNewValue) {\r\n            _events_engine2.default.trigger($input, \"change\")\r\n        }\r\n    },\r\n    _renderValueChangeEvent: function() {\r\n        var keyPressEvent = _utils2.default.addNamespace(this._renderValueEventName(), \"\".concat(this.NAME, \"TextChange\"));\r\n        var valueChangeEvent = _utils2.default.addNamespace(this.option(\"valueChangeEvent\"), \"\".concat(this.NAME, \"ValueChange\"));\r\n        var keyDownEvent = _utils2.default.addNamespace(\"keydown\", \"\".concat(this.NAME, \"TextChange\"));\r\n        var $input = this._input();\r\n        _events_engine2.default.on($input, keyPressEvent, this._keyPressHandler.bind(this));\r\n        _events_engine2.default.on($input, valueChangeEvent, this._valueChangeEventHandler.bind(this));\r\n        _events_engine2.default.on($input, keyDownEvent, this._keyDownHandler.bind(this))\r\n    },\r\n    _cleanValueChangeEvent: function() {\r\n        var valueChangeNamespace = \".\".concat(this.NAME, \"ValueChange\");\r\n        var textChangeNamespace = \".\".concat(this.NAME, \"TextChange\");\r\n        _events_engine2.default.off(this._input(), valueChangeNamespace);\r\n        _events_engine2.default.off(this._input(), textChangeNamespace)\r\n    },\r\n    _refreshValueChangeEvent: function() {\r\n        this._cleanValueChangeEvent();\r\n        this._renderValueChangeEvent()\r\n    },\r\n    _renderValueEventName: function() {\r\n        return \"input change keypress\"\r\n    },\r\n    _focusTarget: function() {\r\n        return this._input()\r\n    },\r\n    _focusEventTarget: function() {\r\n        return this.element()\r\n    },\r\n    _preventNestedFocusEvent: function(event) {\r\n        if (event.isDefaultPrevented()) {\r\n            return true\r\n        }\r\n        var result = this._isNestedTarget(event.relatedTarget);\r\n        if (\"focusin\" === event.type) {\r\n            result = result && this._isNestedTarget(event.target)\r\n        }\r\n        result && event.preventDefault();\r\n        return result\r\n    },\r\n    _isNestedTarget: function(target) {\r\n        return !!this.$element().find(target).length\r\n    },\r\n    _focusClassTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _focusInHandler: function(event) {\r\n        this._preventNestedFocusEvent(event);\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _focusOutHandler: function(event) {\r\n        this._preventNestedFocusEvent(event);\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _toggleFocusClass: function(isFocused, $element) {\r\n        this.callBase(isFocused, this._focusClassTarget($element))\r\n    },\r\n    _hasFocusClass: function(element) {\r\n        return this.callBase((0, _renderer2.default)(element || this.$element()))\r\n    },\r\n    _renderEmptinessEvent: function() {\r\n        var $input = this._input();\r\n        _events_engine2.default.on($input, \"input blur\", this._toggleEmptinessEventHandler.bind(this))\r\n    },\r\n    _toggleEmptinessEventHandler: function() {\r\n        var text = this._input().val();\r\n        var isEmpty = (\"\" === text || null === text) && this._isValueValid();\r\n        this._toggleEmptiness(isEmpty)\r\n    },\r\n    _valueChangeEventHandler: function(e, formattedValue) {\r\n        this._saveValueChangeEvent(e);\r\n        this.option(\"value\", arguments.length > 1 ? formattedValue : this._input().val());\r\n        this._saveValueChangeEvent(void 0)\r\n    },\r\n    _renderEnterKeyAction: function() {\r\n        this._enterKeyAction = this._createActionByOption(\"onEnterKey\", {\r\n            excludeValidators: [\"readOnly\"]\r\n        });\r\n        _events_engine2.default.off(this._input(), \"keyup.onEnterKey.dxTextEditor\");\r\n        _events_engine2.default.on(this._input(), \"keyup.onEnterKey.dxTextEditor\", this._enterKeyHandlerUp.bind(this))\r\n    },\r\n    _enterKeyHandlerUp: function(e) {\r\n        if (this._disposed) {\r\n            return\r\n        }\r\n        if (\"enter\" === _utils2.default.normalizeKeyName(e)) {\r\n            this._enterKeyAction({\r\n                event: e\r\n            })\r\n        }\r\n    },\r\n    _updateValue: function() {\r\n        this.option(\"text\", void 0);\r\n        this._renderValue()\r\n    },\r\n    _dispose: function() {\r\n        this._enterKeyAction = void 0;\r\n        this.callBase()\r\n    },\r\n    _getSubmitElement: function() {\r\n        return this._input()\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        if ((0, _array.inArray)(name.replace(\"on\", \"\"), EVENTS_LIST) > -1) {\r\n            this._refreshEvents();\r\n            return\r\n        }\r\n        switch (name) {\r\n            case \"valueChangeEvent\":\r\n                this._refreshValueChangeEvent();\r\n                this._refreshFocusEvent();\r\n                this._refreshEvents();\r\n                break;\r\n            case \"onValueChanged\":\r\n                this._createValueChangeAction();\r\n                break;\r\n            case \"focusStateEnabled\":\r\n                this.callBase(args);\r\n                this._toggleTabIndex();\r\n                break;\r\n            case \"spellcheck\":\r\n                this._toggleSpellcheckState();\r\n                break;\r\n            case \"mode\":\r\n                this._renderInputType();\r\n                break;\r\n            case \"onEnterKey\":\r\n                this._renderEnterKeyAction();\r\n                break;\r\n            case \"placeholder\":\r\n                this._renderPlaceholder();\r\n                break;\r\n            case \"readOnly\":\r\n            case \"disabled\":\r\n                this._updateButtons();\r\n                this.callBase(args);\r\n                break;\r\n            case \"showClearButton\":\r\n                this._updateButtons([\"clear\"]);\r\n                break;\r\n            case \"text\":\r\n                break;\r\n            case \"value\":\r\n                this._updateValue();\r\n                this.callBase(args);\r\n                break;\r\n            case \"inputAttr\":\r\n                this._applyInputAttributes(this._input(), args.value);\r\n                break;\r\n            case \"stylingMode\":\r\n                this._renderStylingMode();\r\n                break;\r\n            case \"buttons\":\r\n                if (args.fullName === args.name) {\r\n                    checkButtonsOptionType(args.value)\r\n                }\r\n                this._$beforeButtonsContainer && this._$beforeButtonsContainer.remove();\r\n                this._$afterButtonsContainer && this._$afterButtonsContainer.remove();\r\n                this._buttonCollection.clean();\r\n                this._renderButtonContainers();\r\n                break;\r\n            case \"displayValueFormatter\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _renderInputType: function() {\r\n        this._setInputType(this.option(\"mode\"))\r\n    },\r\n    _setInputType: function(type) {\r\n        var input = this._input();\r\n        if (\"search\" === type) {\r\n            type = \"text\"\r\n        }\r\n        try {\r\n            input.prop(\"type\", type)\r\n        } catch (e) {\r\n            input.prop(\"type\", \"text\")\r\n        }\r\n    },\r\n    getButton: function(name) {\r\n        return this._buttonCollection.getButton(name)\r\n    },\r\n    focus: function() {\r\n        _events_engine2.default.trigger(this._input(), \"focus\")\r\n    },\r\n    blur: function() {\r\n        if (this._input().is(_dom_adapter2.default.getActiveElement())) {\r\n            _dom2.default.resetActiveElement()\r\n        }\r\n    },\r\n    reset: function() {\r\n        if (this._showValidMark) {\r\n            this._showValidMark = false;\r\n            this._renderValidationState()\r\n        }\r\n        var defaultOptions = this._getDefaultOptions();\r\n        if (this.option(\"value\") === defaultOptions.value) {\r\n            this.option(\"text\", \"\");\r\n            this._renderValue()\r\n        } else {\r\n            this.option(\"value\", defaultOptions.value)\r\n        }\r\n    },\r\n    on: function(eventName, eventHandler) {\r\n        var result = this.callBase(eventName, eventHandler);\r\n        var event = eventName.charAt(0).toUpperCase() + eventName.substr(1);\r\n        if (EVENTS_LIST.indexOf(event) >= 0) {\r\n            this._refreshEvents()\r\n        }\r\n        return result\r\n    }\r\n});\r\nmodule.exports = TextEditorBase;\r\n"]},"metadata":{},"sourceType":"module"}