{"ast":null,"code":"/**\r\n * DevExtreme (ui/html_editor/modules/resizing.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _renderer = require(\"../../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _click = require(\"../../../events/click\");\n\nvar _utils = require(\"../../../events/utils\");\n\nvar _translator = require(\"../../../animation/translator\");\n\nvar _devices = require(\"../../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _resizable = require(\"../../resizable\");\n\nvar _resizable2 = _interopRequireDefault(_resizable);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar DX_RESIZE_FRAME_CLASS = \"dx-resize-frame\";\nvar DX_TOUCH_DEVICE_CLASS = \"dx-touch-device\";\nvar MODULE_NAMESPACE = \"dxHtmlResizingModule\";\nvar KEYDOWN_EVENT = (0, _utils.addNamespace)(\"keydown\", MODULE_NAMESPACE);\nvar SCROLL_EVENT = (0, _utils.addNamespace)(\"scroll\", MODULE_NAMESPACE);\nvar FRAME_PADDING = 1;\n\nvar ResizingModule = function () {\n  function ResizingModule(quill, options) {\n    _classCallCheck(this, ResizingModule);\n\n    this.quill = quill;\n    this.editorInstance = options.editorInstance;\n    this.allowedTargets = options.allowedTargets || [\"image\"];\n    this.enabled = !!options.enabled;\n\n    if (this.enabled) {\n      this._attachEvents();\n\n      this._createResizeFrame();\n    }\n  }\n\n  _createClass(ResizingModule, [{\n    key: \"_attachEvents\",\n    value: function value() {\n      _events_engine2.default.on(this.quill.root, (0, _utils.addNamespace)(_click.name, MODULE_NAMESPACE), this._clickHandler.bind(this));\n\n      _events_engine2.default.on(this.quill.root, SCROLL_EVENT, this._scrollHandler.bind(this));\n    }\n  }, {\n    key: \"_detachEvents\",\n    value: function value() {\n      _events_engine2.default.off(this.quill.root, MODULE_NAMESPACE);\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function value(e) {\n      if (this._isAllowedTarget(e.target)) {\n        if (this._$target === e.target) {\n          return;\n        }\n\n        this._$target = e.target;\n        this.updateFramePosition();\n        this.showFrame();\n      } else {\n        if (this._$target) {\n          this.hideFrame();\n        }\n      }\n    }\n  }, {\n    key: \"_scrollHandler\",\n    value: function value(e) {\n      if (this._$target) {\n        this.updateFramePosition();\n      }\n    }\n  }, {\n    key: \"_isAllowedTarget\",\n    value: function value(targetElement) {\n      return this._isImage(targetElement);\n    }\n  }, {\n    key: \"_isImage\",\n    value: function value(targetElement) {\n      return this.allowedTargets.indexOf(\"image\") !== -1 && \"IMG\" === targetElement.tagName.toUpperCase();\n    }\n  }, {\n    key: \"showFrame\",\n    value: function value() {\n      this._$resizeFrame.show();\n\n      _events_engine2.default.on(this.quill.root, KEYDOWN_EVENT, this.hideFrame.bind(this));\n    }\n  }, {\n    key: \"hideFrame\",\n    value: function value() {\n      this._$target = null;\n\n      this._$resizeFrame.hide();\n\n      _events_engine2.default.off(this.quill.root, KEYDOWN_EVENT);\n    }\n  }, {\n    key: \"updateFramePosition\",\n    value: function value() {\n      var _this$_$target = this._$target,\n          height = _this$_$target.height,\n          width = _this$_$target.width,\n          offsetTop = _this$_$target.offsetTop,\n          offsetLeft = _this$_$target.offsetLeft;\n      var _this$quill$root = this.quill.root,\n          scrollTop = _this$quill$root.scrollTop,\n          scrollLeft = _this$quill$root.scrollLeft;\n\n      var borderWidth = this._getBorderWidth();\n\n      this._$resizeFrame.css({\n        height: height,\n        width: width,\n        padding: FRAME_PADDING,\n        top: offsetTop - borderWidth - scrollTop - FRAME_PADDING,\n        left: offsetLeft - borderWidth - scrollLeft - FRAME_PADDING\n      });\n\n      (0, _translator.move)(this._$resizeFrame, {\n        left: 0,\n        top: 0\n      });\n    }\n  }, {\n    key: \"_getBorderWidth\",\n    value: function value() {\n      return parseInt(this._$resizeFrame.css(\"borderTopWidth\"));\n    }\n  }, {\n    key: \"_createResizeFrame\",\n    value: function value() {\n      var _this = this;\n\n      if (this._$resizeFrame) {\n        return;\n      }\n\n      var _devices$current = _devices2.default.current(),\n          deviceType = _devices$current.deviceType;\n\n      this._$resizeFrame = (0, _renderer2.default)(\"<div>\").addClass(DX_RESIZE_FRAME_CLASS).toggleClass(DX_TOUCH_DEVICE_CLASS, \"desktop\" !== deviceType).appendTo(this.editorInstance._getQuillContainer()).hide();\n\n      this.editorInstance._createComponent(this._$resizeFrame, _resizable2.default, {\n        onResize: function onResize(e) {\n          if (!_this._$target) {\n            return;\n          }\n\n          var correction = 2 * (FRAME_PADDING + _this._getBorderWidth());\n\n          (0, _renderer2.default)(_this._$target).attr({\n            height: e.height - correction,\n            width: e.width - correction\n          });\n\n          _this.updateFramePosition();\n        }\n      });\n    }\n  }, {\n    key: \"option\",\n    value: function value(_option, _value) {\n      var _this2 = this;\n\n      if (\"mediaResizing\" === _option) {\n        Object.keys(_value).forEach(function (optionName) {\n          return _this2.option(optionName, _value[optionName]);\n        });\n        return;\n      }\n\n      if (\"enabled\" === _option) {\n        this.enabled = _value;\n        _value ? this._attachEvents() : this._detachEvents();\n      } else {\n        if (\"allowedTargets\" === _option && Array.isArray(_value)) {\n          this.allowedTargets = _value;\n        }\n      }\n    }\n  }, {\n    key: \"clean\",\n    value: function value() {\n      this._detachEvents();\n\n      this._$resizeFrame.remove();\n\n      this._$resizeFrame = void 0;\n    }\n  }]);\n\n  return ResizingModule;\n}();\n\nexports.default = ResizingModule;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/html_editor/modules/resizing.js"],"names":["Object","value","_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_click","_utils","_translator","_devices","_devices2","_resizable","_resizable2","obj","instance","i","props","descriptor","_defineProperties","Constructor","DX_RESIZE_FRAME_CLASS","DX_TOUCH_DEVICE_CLASS","MODULE_NAMESPACE","KEYDOWN_EVENT","SCROLL_EVENT","FRAME_PADDING","ResizingModule","_classCallCheck","options","_createClass","key","e","targetElement","_this$_$target","height","width","offsetTop","offsetLeft","_this$quill$root","scrollTop","scrollLeft","borderWidth","padding","top","left","parseInt","_this","_devices$current","deviceType","onResize","correction","_this2","Array","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/html_editor/modules/resizing.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nvar _renderer = require(\"../../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _click = require(\"../../../events/click\");\r\nvar _utils = require(\"../../../events/utils\");\r\nvar _translator = require(\"../../../animation/translator\");\r\nvar _devices = require(\"../../../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _resizable = require(\"../../resizable\");\r\nvar _resizable2 = _interopRequireDefault(_resizable);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar DX_RESIZE_FRAME_CLASS = \"dx-resize-frame\";\r\nvar DX_TOUCH_DEVICE_CLASS = \"dx-touch-device\";\r\nvar MODULE_NAMESPACE = \"dxHtmlResizingModule\";\r\nvar KEYDOWN_EVENT = (0, _utils.addNamespace)(\"keydown\", MODULE_NAMESPACE);\r\nvar SCROLL_EVENT = (0, _utils.addNamespace)(\"scroll\", MODULE_NAMESPACE);\r\nvar FRAME_PADDING = 1;\r\nvar ResizingModule = function() {\r\n    function ResizingModule(quill, options) {\r\n        _classCallCheck(this, ResizingModule);\r\n        this.quill = quill;\r\n        this.editorInstance = options.editorInstance;\r\n        this.allowedTargets = options.allowedTargets || [\"image\"];\r\n        this.enabled = !!options.enabled;\r\n        if (this.enabled) {\r\n            this._attachEvents();\r\n            this._createResizeFrame()\r\n        }\r\n    }\r\n    _createClass(ResizingModule, [{\r\n        key: \"_attachEvents\",\r\n        value: function() {\r\n            _events_engine2.default.on(this.quill.root, (0, _utils.addNamespace)(_click.name, MODULE_NAMESPACE), this._clickHandler.bind(this));\r\n            _events_engine2.default.on(this.quill.root, SCROLL_EVENT, this._scrollHandler.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_detachEvents\",\r\n        value: function() {\r\n            _events_engine2.default.off(this.quill.root, MODULE_NAMESPACE)\r\n        }\r\n    }, {\r\n        key: \"_clickHandler\",\r\n        value: function(e) {\r\n            if (this._isAllowedTarget(e.target)) {\r\n                if (this._$target === e.target) {\r\n                    return\r\n                }\r\n                this._$target = e.target;\r\n                this.updateFramePosition();\r\n                this.showFrame()\r\n            } else {\r\n                if (this._$target) {\r\n                    this.hideFrame()\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_scrollHandler\",\r\n        value: function(e) {\r\n            if (this._$target) {\r\n                this.updateFramePosition()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isAllowedTarget\",\r\n        value: function(targetElement) {\r\n            return this._isImage(targetElement)\r\n        }\r\n    }, {\r\n        key: \"_isImage\",\r\n        value: function(targetElement) {\r\n            return this.allowedTargets.indexOf(\"image\") !== -1 && \"IMG\" === targetElement.tagName.toUpperCase()\r\n        }\r\n    }, {\r\n        key: \"showFrame\",\r\n        value: function() {\r\n            this._$resizeFrame.show();\r\n            _events_engine2.default.on(this.quill.root, KEYDOWN_EVENT, this.hideFrame.bind(this))\r\n        }\r\n    }, {\r\n        key: \"hideFrame\",\r\n        value: function() {\r\n            this._$target = null;\r\n            this._$resizeFrame.hide();\r\n            _events_engine2.default.off(this.quill.root, KEYDOWN_EVENT)\r\n        }\r\n    }, {\r\n        key: \"updateFramePosition\",\r\n        value: function() {\r\n            var _this$_$target = this._$target,\r\n                height = _this$_$target.height,\r\n                width = _this$_$target.width,\r\n                offsetTop = _this$_$target.offsetTop,\r\n                offsetLeft = _this$_$target.offsetLeft;\r\n            var _this$quill$root = this.quill.root,\r\n                scrollTop = _this$quill$root.scrollTop,\r\n                scrollLeft = _this$quill$root.scrollLeft;\r\n            var borderWidth = this._getBorderWidth();\r\n            this._$resizeFrame.css({\r\n                height: height,\r\n                width: width,\r\n                padding: FRAME_PADDING,\r\n                top: offsetTop - borderWidth - scrollTop - FRAME_PADDING,\r\n                left: offsetLeft - borderWidth - scrollLeft - FRAME_PADDING\r\n            });\r\n            (0, _translator.move)(this._$resizeFrame, {\r\n                left: 0,\r\n                top: 0\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getBorderWidth\",\r\n        value: function() {\r\n            return parseInt(this._$resizeFrame.css(\"borderTopWidth\"))\r\n        }\r\n    }, {\r\n        key: \"_createResizeFrame\",\r\n        value: function() {\r\n            var _this = this;\r\n            if (this._$resizeFrame) {\r\n                return\r\n            }\r\n            var _devices$current = _devices2.default.current(),\r\n                deviceType = _devices$current.deviceType;\r\n            this._$resizeFrame = (0, _renderer2.default)(\"<div>\").addClass(DX_RESIZE_FRAME_CLASS).toggleClass(DX_TOUCH_DEVICE_CLASS, \"desktop\" !== deviceType).appendTo(this.editorInstance._getQuillContainer()).hide();\r\n            this.editorInstance._createComponent(this._$resizeFrame, _resizable2.default, {\r\n                onResize: function(e) {\r\n                    if (!_this._$target) {\r\n                        return\r\n                    }\r\n                    var correction = 2 * (FRAME_PADDING + _this._getBorderWidth());\r\n                    (0, _renderer2.default)(_this._$target).attr({\r\n                        height: e.height - correction,\r\n                        width: e.width - correction\r\n                    });\r\n                    _this.updateFramePosition()\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"option\",\r\n        value: function(_option, value) {\r\n            var _this2 = this;\r\n            if (\"mediaResizing\" === _option) {\r\n                Object.keys(value).forEach(function(optionName) {\r\n                    return _this2.option(optionName, value[optionName])\r\n                });\r\n                return\r\n            }\r\n            if (\"enabled\" === _option) {\r\n                this.enabled = value;\r\n                value ? this._attachEvents() : this._detachEvents()\r\n            } else {\r\n                if (\"allowedTargets\" === _option && Array.isArray(value)) {\r\n                    this.allowedTargets = value\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"clean\",\r\n        value: function() {\r\n            this._detachEvents();\r\n            this._$resizeFrame.remove();\r\n            this._$resizeFrame = void 0\r\n        }\r\n    }]);\r\n    return ResizingModule\r\n}();\r\nexports.default = ResizingModule;\r\n"]},"metadata":{},"sourceType":"module"}