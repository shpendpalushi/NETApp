{"ast":null,"code":"/**\r\n * DevExtreme (ui/defer_rendering.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar domAdapter = require(\"../core/dom_adapter\");\n\nvar windowUtils = require(\"../core/utils/window\");\n\nvar window = windowUtils.getWindow();\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar commonUtils = require(\"../core/utils/common\");\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar each = require(\"../core/utils/iterator\").each;\n\nvar domUtils = require(\"../core/utils/dom\");\n\nvar TransitionExecutorModule = require(\"../animation/transition_executor/transition_executor\");\n\nvar Widget = require(\"./widget/ui.widget\");\n\nvar LoadIndicator = require(\"./load_indicator\");\n\nvar isPromise = require(\"../core/utils/type\").isPromise;\n\nvar deferredUtils = require(\"../core/utils/deferred\");\n\nvar Deferred = deferredUtils.Deferred;\nvar WIDGET_CLASS = \"dx-widget\";\nvar DEFER_RENDERING_CLASS = \"dx-deferrendering\";\nvar PENDING_RENDERING_CLASS = \"dx-pending-rendering\";\nvar PENDING_RENDERING_MANUAL_CLASS = \"dx-pending-rendering-manual\";\nvar PENDING_RENDERING_ACTIVE_CLASS = \"dx-pending-rendering-active\";\nvar VISIBLE_WHILE_PENDING_RENDERING_CLASS = \"dx-visible-while-pending-rendering\";\nvar INVISIBLE_WHILE_PENDING_RENDERING_CLASS = \"dx-invisible-while-pending-rendering\";\nvar LOADINDICATOR_CONTAINER_CLASS = \"dx-loadindicator-container\";\nvar DEFER_RENDERING_LOADINDICATOR_CONTAINER_CLASS = \"dx-deferrendering-loadindicator-container\";\nvar DEFER_DEFER_RENDERING_LOAD_INDICATOR = \"dx-deferrendering-load-indicator\";\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\nvar ACTIONS = [\"onRendered\", \"onShown\"];\nvar DeferRendering = Widget.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      showLoadIndicator: false,\n      renderWhen: void 0,\n      animation: void 0,\n      staggerItemSelector: void 0,\n      onRendered: null,\n      onShown: null\n    });\n  },\n  _getAnonymousTemplateName: function _getAnonymousTemplateName() {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _init: function _init() {\n    this.transitionExecutor = new TransitionExecutorModule.TransitionExecutor();\n\n    this._initElement();\n\n    this._initRender();\n\n    this._$initialContent = this.$element().clone().contents();\n\n    this._initActions();\n\n    this.callBase();\n  },\n  _initElement: function _initElement() {\n    this.$element().addClass(DEFER_RENDERING_CLASS);\n  },\n  _initRender: function _initRender() {\n    var that = this;\n    var $element = this.$element();\n    var renderWhen = this.option(\"renderWhen\");\n\n    var doRender = function doRender() {\n      return that._renderDeferredContent();\n    };\n\n    if (isPromise(renderWhen)) {\n      deferredUtils.fromPromise(renderWhen).done(doRender);\n    } else {\n      $element.data(\"dx-render-delegate\", doRender);\n\n      if (void 0 === renderWhen) {\n        $element.addClass(PENDING_RENDERING_MANUAL_CLASS);\n      }\n    }\n  },\n  _initActions: function _initActions() {\n    this._actions = {};\n    each(ACTIONS, function (_, action) {\n      this._actions[action] = this._createActionByOption(action) || commonUtils.noop;\n    }.bind(this));\n  },\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n\n    if (!this._initContent) {\n      this._initContent = this._renderContent;\n\n      this._renderContent = function () {};\n    }\n\n    this._initContent();\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    this.$element().removeClass(WIDGET_CLASS);\n    this.$element().append(this._$initialContent);\n\n    this._setLoadingState();\n  },\n  _renderDeferredContent: function _renderDeferredContent() {\n    var that = this;\n    var $element = this.$element();\n    var result = new Deferred();\n    $element.removeClass(PENDING_RENDERING_MANUAL_CLASS);\n    $element.addClass(PENDING_RENDERING_ACTIVE_CLASS);\n\n    this._abortRenderTask();\n\n    this._renderTask = commonUtils.executeAsync(function () {\n      that._renderImpl().done(function () {\n        var shownArgs = {\n          element: $element\n        };\n\n        that._actions.onShown([shownArgs]);\n\n        result.resolve(shownArgs);\n      }).fail(function () {\n        result.rejectWith(result, arguments);\n      });\n    });\n    return result.promise();\n  },\n  _isElementInViewport: function _isElementInViewport(element) {\n    var rect = element.getBoundingClientRect();\n    return rect.bottom >= 0 && rect.right >= 0 && rect.top <= (window.innerHeight || domAdapter.getDocumentElement().clientHeight) && rect.left <= (window.innerWidth || domAdapter.getDocumentElement().clientWidth);\n  },\n  _animate: function _animate() {\n    var that = this;\n    var $element = this.$element();\n    var animation = windowUtils.hasWindow() && this.option(\"animation\");\n    var staggerItemSelector = this.option(\"staggerItemSelector\");\n    var animatePromise;\n    that.transitionExecutor.stop();\n\n    if (animation) {\n      if (staggerItemSelector) {\n        $element.find(staggerItemSelector).each(function () {\n          if (that._isElementInViewport(this)) {\n            that.transitionExecutor.enter($(this), animation);\n          }\n        });\n      } else {\n        that.transitionExecutor.enter($element, animation);\n      }\n\n      animatePromise = that.transitionExecutor.start();\n    } else {\n      animatePromise = new Deferred().resolve().promise();\n    }\n\n    return animatePromise;\n  },\n  _renderImpl: function _renderImpl() {\n    var $element = this.$element();\n    var renderedArgs = {\n      element: $element\n    };\n\n    var contentTemplate = this._getTemplate(this._getAnonymousTemplateName());\n\n    if (contentTemplate) {\n      contentTemplate.render({\n        container: $element.empty(),\n        noModel: true\n      });\n    }\n\n    this._setRenderedState($element);\n\n    eventsEngine.trigger($element, \"dxcontentrendered\");\n\n    this._actions.onRendered([renderedArgs]);\n\n    this._isRendered = true;\n    return this._animate();\n  },\n  _setLoadingState: function _setLoadingState() {\n    var $element = this.$element();\n    var hasCustomLoadIndicator = !!$element.find(\".\" + VISIBLE_WHILE_PENDING_RENDERING_CLASS).length;\n    $element.addClass(PENDING_RENDERING_CLASS);\n\n    if (!hasCustomLoadIndicator) {\n      $element.children().addClass(INVISIBLE_WHILE_PENDING_RENDERING_CLASS);\n    }\n\n    if (this.option(\"showLoadIndicator\")) {\n      this._showLoadIndicator($element);\n    }\n  },\n  _showLoadIndicator: function _showLoadIndicator($container) {\n    this._$loadIndicator = new LoadIndicator($(\"<div>\"), {\n      visible: true\n    }).$element().addClass(DEFER_DEFER_RENDERING_LOAD_INDICATOR);\n    $(\"<div>\").addClass(LOADINDICATOR_CONTAINER_CLASS).addClass(DEFER_RENDERING_LOADINDICATOR_CONTAINER_CLASS).append(this._$loadIndicator).appendTo($container);\n  },\n  _setRenderedState: function _setRenderedState() {\n    var $element = this.$element();\n\n    if (this._$loadIndicator) {\n      this._$loadIndicator.remove();\n    }\n\n    $element.removeClass(PENDING_RENDERING_CLASS);\n    $element.removeClass(PENDING_RENDERING_ACTIVE_CLASS);\n    domUtils.triggerShownEvent($element.children());\n  },\n  _optionChanged: function _optionChanged(args) {\n    var value = args.value;\n    var previousValue = args.previousValue;\n\n    switch (args.name) {\n      case \"renderWhen\":\n        if (false === previousValue && true === value) {\n          this._renderOrAnimate();\n        } else {\n          if (true === previousValue && false === value) {\n            this.transitionExecutor.stop();\n\n            this._setLoadingState();\n          }\n        }\n\n        break;\n\n      case \"showLoadIndicator\":\n      case \"onRendered\":\n      case \"onShown\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _renderOrAnimate: function _renderOrAnimate() {\n    var result;\n\n    if (this._isRendered) {\n      this._setRenderedState();\n\n      result = this._animate();\n    } else {\n      result = this._renderDeferredContent();\n    }\n\n    return result;\n  },\n  renderContent: function renderContent() {\n    return this._renderOrAnimate();\n  },\n  _abortRenderTask: function _abortRenderTask() {\n    if (this._renderTask) {\n      this._renderTask.abort();\n\n      this._renderTask = void 0;\n    }\n  },\n  _dispose: function _dispose() {\n    this.transitionExecutor.stop(true);\n\n    this._abortRenderTask();\n\n    this._actions = void 0;\n    this._$initialContent = void 0;\n    this.callBase();\n  }\n});\nregisterComponent(\"dxDeferRendering\", DeferRendering);\nmodule.exports = DeferRendering;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/defer_rendering.js"],"names":["$","require","domAdapter","windowUtils","window","eventsEngine","registerComponent","commonUtils","extend","each","domUtils","TransitionExecutorModule","Widget","LoadIndicator","isPromise","deferredUtils","Deferred","WIDGET_CLASS","DEFER_RENDERING_CLASS","PENDING_RENDERING_CLASS","PENDING_RENDERING_MANUAL_CLASS","PENDING_RENDERING_ACTIVE_CLASS","VISIBLE_WHILE_PENDING_RENDERING_CLASS","INVISIBLE_WHILE_PENDING_RENDERING_CLASS","LOADINDICATOR_CONTAINER_CLASS","DEFER_RENDERING_LOADINDICATOR_CONTAINER_CLASS","DEFER_DEFER_RENDERING_LOAD_INDICATOR","ANONYMOUS_TEMPLATE_NAME","ACTIONS","DeferRendering","_getDefaultOptions","showLoadIndicator","renderWhen","animation","staggerItemSelector","onRendered","onShown","_getAnonymousTemplateName","_init","_initElement","_initRender","that","$element","doRender","_initActions","_initMarkup","_renderContentImpl","_renderDeferredContent","result","shownArgs","element","_isElementInViewport","rect","_animate","animatePromise","_renderImpl","renderedArgs","contentTemplate","container","noModel","_setLoadingState","hasCustomLoadIndicator","_showLoadIndicator","visible","_setRenderedState","_optionChanged","value","args","previousValue","_renderOrAnimate","renderContent","_abortRenderTask","_dispose","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/defer_rendering.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../core/renderer\");\r\nvar domAdapter = require(\"../core/dom_adapter\");\r\nvar windowUtils = require(\"../core/utils/window\");\r\nvar window = windowUtils.getWindow();\r\nvar eventsEngine = require(\"../events/core/events_engine\");\r\nvar registerComponent = require(\"../core/component_registrator\");\r\nvar commonUtils = require(\"../core/utils/common\");\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar each = require(\"../core/utils/iterator\").each;\r\nvar domUtils = require(\"../core/utils/dom\");\r\nvar TransitionExecutorModule = require(\"../animation/transition_executor/transition_executor\");\r\nvar Widget = require(\"./widget/ui.widget\");\r\nvar LoadIndicator = require(\"./load_indicator\");\r\nvar isPromise = require(\"../core/utils/type\").isPromise;\r\nvar deferredUtils = require(\"../core/utils/deferred\");\r\nvar Deferred = deferredUtils.Deferred;\r\nvar WIDGET_CLASS = \"dx-widget\";\r\nvar DEFER_RENDERING_CLASS = \"dx-deferrendering\";\r\nvar PENDING_RENDERING_CLASS = \"dx-pending-rendering\";\r\nvar PENDING_RENDERING_MANUAL_CLASS = \"dx-pending-rendering-manual\";\r\nvar PENDING_RENDERING_ACTIVE_CLASS = \"dx-pending-rendering-active\";\r\nvar VISIBLE_WHILE_PENDING_RENDERING_CLASS = \"dx-visible-while-pending-rendering\";\r\nvar INVISIBLE_WHILE_PENDING_RENDERING_CLASS = \"dx-invisible-while-pending-rendering\";\r\nvar LOADINDICATOR_CONTAINER_CLASS = \"dx-loadindicator-container\";\r\nvar DEFER_RENDERING_LOADINDICATOR_CONTAINER_CLASS = \"dx-deferrendering-loadindicator-container\";\r\nvar DEFER_DEFER_RENDERING_LOAD_INDICATOR = \"dx-deferrendering-load-indicator\";\r\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\r\nvar ACTIONS = [\"onRendered\", \"onShown\"];\r\nvar DeferRendering = Widget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            showLoadIndicator: false,\r\n            renderWhen: void 0,\r\n            animation: void 0,\r\n            staggerItemSelector: void 0,\r\n            onRendered: null,\r\n            onShown: null\r\n        })\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _init: function() {\r\n        this.transitionExecutor = new TransitionExecutorModule.TransitionExecutor;\r\n        this._initElement();\r\n        this._initRender();\r\n        this._$initialContent = this.$element().clone().contents();\r\n        this._initActions();\r\n        this.callBase()\r\n    },\r\n    _initElement: function() {\r\n        this.$element().addClass(DEFER_RENDERING_CLASS)\r\n    },\r\n    _initRender: function() {\r\n        var that = this;\r\n        var $element = this.$element();\r\n        var renderWhen = this.option(\"renderWhen\");\r\n        var doRender = function() {\r\n            return that._renderDeferredContent()\r\n        };\r\n        if (isPromise(renderWhen)) {\r\n            deferredUtils.fromPromise(renderWhen).done(doRender)\r\n        } else {\r\n            $element.data(\"dx-render-delegate\", doRender);\r\n            if (void 0 === renderWhen) {\r\n                $element.addClass(PENDING_RENDERING_MANUAL_CLASS)\r\n            }\r\n        }\r\n    },\r\n    _initActions: function() {\r\n        this._actions = {};\r\n        each(ACTIONS, function(_, action) {\r\n            this._actions[action] = this._createActionByOption(action) || commonUtils.noop\r\n        }.bind(this))\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        if (!this._initContent) {\r\n            this._initContent = this._renderContent;\r\n            this._renderContent = function() {}\r\n        }\r\n        this._initContent()\r\n    },\r\n    _renderContentImpl: function() {\r\n        this.$element().removeClass(WIDGET_CLASS);\r\n        this.$element().append(this._$initialContent);\r\n        this._setLoadingState()\r\n    },\r\n    _renderDeferredContent: function() {\r\n        var that = this;\r\n        var $element = this.$element();\r\n        var result = new Deferred;\r\n        $element.removeClass(PENDING_RENDERING_MANUAL_CLASS);\r\n        $element.addClass(PENDING_RENDERING_ACTIVE_CLASS);\r\n        this._abortRenderTask();\r\n        this._renderTask = commonUtils.executeAsync(function() {\r\n            that._renderImpl().done(function() {\r\n                var shownArgs = {\r\n                    element: $element\r\n                };\r\n                that._actions.onShown([shownArgs]);\r\n                result.resolve(shownArgs)\r\n            }).fail(function() {\r\n                result.rejectWith(result, arguments)\r\n            })\r\n        });\r\n        return result.promise()\r\n    },\r\n    _isElementInViewport: function(element) {\r\n        var rect = element.getBoundingClientRect();\r\n        return rect.bottom >= 0 && rect.right >= 0 && rect.top <= (window.innerHeight || domAdapter.getDocumentElement().clientHeight) && rect.left <= (window.innerWidth || domAdapter.getDocumentElement().clientWidth)\r\n    },\r\n    _animate: function() {\r\n        var that = this;\r\n        var $element = this.$element();\r\n        var animation = windowUtils.hasWindow() && this.option(\"animation\");\r\n        var staggerItemSelector = this.option(\"staggerItemSelector\");\r\n        var animatePromise;\r\n        that.transitionExecutor.stop();\r\n        if (animation) {\r\n            if (staggerItemSelector) {\r\n                $element.find(staggerItemSelector).each(function() {\r\n                    if (that._isElementInViewport(this)) {\r\n                        that.transitionExecutor.enter($(this), animation)\r\n                    }\r\n                })\r\n            } else {\r\n                that.transitionExecutor.enter($element, animation)\r\n            }\r\n            animatePromise = that.transitionExecutor.start()\r\n        } else {\r\n            animatePromise = (new Deferred).resolve().promise()\r\n        }\r\n        return animatePromise\r\n    },\r\n    _renderImpl: function() {\r\n        var $element = this.$element();\r\n        var renderedArgs = {\r\n            element: $element\r\n        };\r\n        var contentTemplate = this._getTemplate(this._getAnonymousTemplateName());\r\n        if (contentTemplate) {\r\n            contentTemplate.render({\r\n                container: $element.empty(),\r\n                noModel: true\r\n            })\r\n        }\r\n        this._setRenderedState($element);\r\n        eventsEngine.trigger($element, \"dxcontentrendered\");\r\n        this._actions.onRendered([renderedArgs]);\r\n        this._isRendered = true;\r\n        return this._animate()\r\n    },\r\n    _setLoadingState: function() {\r\n        var $element = this.$element();\r\n        var hasCustomLoadIndicator = !!$element.find(\".\" + VISIBLE_WHILE_PENDING_RENDERING_CLASS).length;\r\n        $element.addClass(PENDING_RENDERING_CLASS);\r\n        if (!hasCustomLoadIndicator) {\r\n            $element.children().addClass(INVISIBLE_WHILE_PENDING_RENDERING_CLASS)\r\n        }\r\n        if (this.option(\"showLoadIndicator\")) {\r\n            this._showLoadIndicator($element)\r\n        }\r\n    },\r\n    _showLoadIndicator: function($container) {\r\n        this._$loadIndicator = new LoadIndicator($(\"<div>\"), {\r\n            visible: true\r\n        }).$element().addClass(DEFER_DEFER_RENDERING_LOAD_INDICATOR);\r\n        $(\"<div>\").addClass(LOADINDICATOR_CONTAINER_CLASS).addClass(DEFER_RENDERING_LOADINDICATOR_CONTAINER_CLASS).append(this._$loadIndicator).appendTo($container)\r\n    },\r\n    _setRenderedState: function() {\r\n        var $element = this.$element();\r\n        if (this._$loadIndicator) {\r\n            this._$loadIndicator.remove()\r\n        }\r\n        $element.removeClass(PENDING_RENDERING_CLASS);\r\n        $element.removeClass(PENDING_RENDERING_ACTIVE_CLASS);\r\n        domUtils.triggerShownEvent($element.children())\r\n    },\r\n    _optionChanged: function(args) {\r\n        var value = args.value;\r\n        var previousValue = args.previousValue;\r\n        switch (args.name) {\r\n            case \"renderWhen\":\r\n                if (false === previousValue && true === value) {\r\n                    this._renderOrAnimate()\r\n                } else {\r\n                    if (true === previousValue && false === value) {\r\n                        this.transitionExecutor.stop();\r\n                        this._setLoadingState()\r\n                    }\r\n                }\r\n                break;\r\n            case \"showLoadIndicator\":\r\n            case \"onRendered\":\r\n            case \"onShown\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _renderOrAnimate: function() {\r\n        var result;\r\n        if (this._isRendered) {\r\n            this._setRenderedState();\r\n            result = this._animate()\r\n        } else {\r\n            result = this._renderDeferredContent()\r\n        }\r\n        return result\r\n    },\r\n    renderContent: function() {\r\n        return this._renderOrAnimate()\r\n    },\r\n    _abortRenderTask: function() {\r\n        if (this._renderTask) {\r\n            this._renderTask.abort();\r\n            this._renderTask = void 0\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        this.transitionExecutor.stop(true);\r\n        this._abortRenderTask();\r\n        this._actions = void 0;\r\n        this._$initialContent = void 0;\r\n        this.callBase()\r\n    }\r\n});\r\nregisterComponent(\"dxDeferRendering\", DeferRendering);\r\nmodule.exports = DeferRendering;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}