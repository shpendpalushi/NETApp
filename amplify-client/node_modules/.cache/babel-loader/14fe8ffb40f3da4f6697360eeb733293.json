{"ast":null,"code":"/**\r\n * DevExtreme (ui/overlay/ui.overlay.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar $ = require(\"../../core/renderer\");\n\nvar domAdapter = require(\"../../core/dom_adapter\");\n\nvar windowUtils = require(\"../../core/utils/window\");\n\nvar ready = require(\"../../core/utils/ready_callbacks\").add;\n\nvar window = windowUtils.getWindow();\nvar navigator = windowUtils.getNavigator();\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar fx = require(\"../../animation/fx\");\n\nvar translator = require(\"../../animation/translator\");\n\nvar compareVersions = require(\"../../core/utils/version\").compare;\n\nvar viewPortUtils = require(\"../../core/utils/view_port\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar inArray = require(\"../../core/utils/array\").inArray;\n\nvar getPublicElement = require(\"../../core/utils/dom\").getPublicElement;\n\nvar viewPortChanged = viewPortUtils.changeCallback;\n\nvar hideTopOverlayCallback = require(\"../../mobile/hide_top_overlay\").hideCallback;\n\nvar positionUtils = require(\"../../animation/position\");\n\nvar fitIntoRange = require(\"../../core/utils/math\").fitIntoRange;\n\nvar domUtils = require(\"../../core/utils/dom\");\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar devices = require(\"../../core/devices\");\n\nvar browser = require(\"../../core/utils/browser\");\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar Widget = require(\"../widget/ui.widget\");\n\nvar KeyboardProcessor = require(\"../widget/ui.keyboard_processor\");\n\nvar selectors = require(\"../widget/selectors\");\n\nvar dragEvents = require(\"../../events/drag\");\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar pointerEvents = require(\"../../events/pointer\");\n\nvar Resizable = require(\"../resizable\");\n\nvar EmptyTemplate = require(\"../../core/templates/empty_template\").EmptyTemplate;\n\nvar Deferred = require(\"../../core/utils/deferred\").Deferred;\n\nvar zIndexPool = require(\"./z_index\");\n\nvar swatch = require(\"../widget/swatch_container\");\n\nvar OVERLAY_CLASS = \"dx-overlay\";\nvar OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\nvar OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\nvar OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\nvar OVERLAY_MODAL_CLASS = \"dx-overlay-modal\";\nvar INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\nvar RTL_DIRECTION_CLASS = \"dx-rtl\";\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onPositioned\", \"onResizeStart\", \"onResize\", \"onResizeEnd\"];\nvar OVERLAY_STACK = [];\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\nvar PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\nvar TAB_KEY = \"tab\";\nvar POSITION_ALIASES = {\n  top: {\n    my: \"top center\",\n    at: \"top center\"\n  },\n  bottom: {\n    my: \"bottom center\",\n    at: \"bottom center\"\n  },\n  right: {\n    my: \"right center\",\n    at: \"right center\"\n  },\n  left: {\n    my: \"left center\",\n    at: \"left center\"\n  },\n  center: {\n    my: \"center\",\n    at: \"center\"\n  },\n  \"right bottom\": {\n    my: \"right bottom\",\n    at: \"right bottom\"\n  },\n  \"right top\": {\n    my: \"right top\",\n    at: \"right top\"\n  },\n  \"left bottom\": {\n    my: \"left bottom\",\n    at: \"left bottom\"\n  },\n  \"left top\": {\n    my: \"left top\",\n    at: \"left top\"\n  }\n};\nvar realDevice = devices.real();\nvar realVersion = realDevice.version;\nvar firefoxDesktop = browser.mozilla && \"desktop\" === realDevice.deviceType;\nvar iOS = \"ios\" === realDevice.platform;\nvar hasSafariAddressBar = browser.safari && \"desktop\" !== realDevice.deviceType;\nvar android4_0nativeBrowser = \"android\" === realDevice.platform && 0 === compareVersions(realVersion, [4, 0], 2) && navigator.userAgent.indexOf(\"Chrome\") === -1;\n\nvar forceRepaint = function forceRepaint($element) {\n  if (firefoxDesktop) {\n    $element.width();\n  }\n\n  if (android4_0nativeBrowser) {\n    var $parents = $element.parents();\n    var inScrollView = $parents.is(\".dx-scrollable-native\");\n\n    if (!inScrollView) {\n      $parents.css(\"backfaceVisibility\", \"hidden\");\n      $parents.css(\"backfaceVisibility\");\n      $parents.css(\"backfaceVisibility\", \"visible\");\n    }\n  }\n};\n\nvar getElement = function getElement(value) {\n  return value && $(value.target || value);\n};\n\nready(function () {\n  eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, function (e) {\n    for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\n      if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\n        return;\n      }\n    }\n  });\n});\nvar Overlay = Widget.inherit({\n  _supportedKeys: function _supportedKeys() {\n    var offsetSize = 5;\n\n    var move = function move(top, left, e) {\n      if (!this.option(\"dragEnabled\")) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      var allowedOffsets = this._allowedOffsets();\n\n      var offset = {\n        top: fitIntoRange(top, -allowedOffsets.top, allowedOffsets.bottom),\n        left: fitIntoRange(left, -allowedOffsets.left, allowedOffsets.right)\n      };\n\n      this._changePosition(offset);\n    };\n\n    return extend(this.callBase(), {\n      escape: function escape() {\n        this.hide();\n      },\n      upArrow: move.bind(this, -offsetSize, 0),\n      downArrow: move.bind(this, offsetSize, 0),\n      leftArrow: move.bind(this, 0, -offsetSize),\n      rightArrow: move.bind(this, 0, offsetSize)\n    });\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      activeStateEnabled: false,\n      visible: false,\n      deferRendering: true,\n      shading: true,\n      shadingColor: \"\",\n      position: {\n        my: \"center\",\n        at: \"center\"\n      },\n      width: function width() {\n        return .8 * $(window).width();\n      },\n      minWidth: null,\n      maxWidth: null,\n      height: function height() {\n        return .8 * $(window).height();\n      },\n      minHeight: null,\n      maxHeight: null,\n      animation: {\n        show: {\n          type: \"pop\",\n          duration: 300,\n          from: {\n            scale: .55\n          }\n        },\n        hide: {\n          type: \"pop\",\n          duration: 300,\n          to: {\n            opacity: 0,\n            scale: .55\n          },\n          from: {\n            opacity: 1,\n            scale: 1\n          }\n        }\n      },\n      closeOnOutsideClick: false,\n      closeOnBackButton: true,\n      onShowing: null,\n      onShown: null,\n      onHiding: null,\n      onHidden: null,\n      contentTemplate: \"content\",\n      dragEnabled: false,\n      resizeEnabled: false,\n      onResizeStart: null,\n      onResize: null,\n      onResizeEnd: null,\n      innerOverlay: false,\n      target: void 0,\n      container: void 0,\n      hideTopOverlayHandler: void 0,\n      closeOnTargetScroll: false,\n      onPositioned: null,\n      boundaryOffset: {\n        h: 0,\n        v: 0\n      },\n      propagateOutsideClick: false,\n      ignoreChildEvents: true,\n      _checkParentVisibility: true\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        var realDevice = devices.real();\n        var realPlatform = realDevice.platform;\n        var realVersion = realDevice.version;\n        return \"android\" === realPlatform && compareVersions(realVersion, [4, 2]) < 0;\n      },\n      options: {\n        animation: {\n          show: {\n            type: \"fade\",\n            duration: 400\n          },\n          hide: {\n            type: \"fade\",\n            duration: 400,\n            to: {\n              opacity: 0\n            },\n            from: {\n              opacity: 1\n            }\n          }\n        }\n      }\n    }, {\n      device: function device() {\n        return !windowUtils.hasWindow();\n      },\n      options: {\n        width: null,\n        height: null,\n        animation: null,\n        _checkParentVisibility: false\n      }\n    }]);\n  },\n  _setOptionsByReference: function _setOptionsByReference() {\n    this.callBase();\n    extend(this._optionsByReference, {\n      animation: true\n    });\n  },\n  _getAnonymousTemplateName: function _getAnonymousTemplateName() {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _wrapper: function _wrapper() {\n    return this._$wrapper;\n  },\n  _container: function _container() {\n    return this._$content;\n  },\n  _eventBindingTarget: function _eventBindingTarget() {\n    return this._$content;\n  },\n  _init: function _init() {\n    this.callBase();\n\n    this._initActions();\n\n    this._initCloseOnOutsideClickHandler();\n\n    this._initTabTerminatorHandler();\n\n    this._$wrapper = $(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\n    this._$content = $(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\n\n    this._initInnerOverlayClass();\n\n    var $element = this.$element();\n\n    this._$wrapper.addClass($element.attr(\"class\"));\n\n    $element.addClass(OVERLAY_CLASS);\n\n    this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\n\n    eventsEngine.on(this._$wrapper, \"MSPointerDown\", noop);\n    eventsEngine.on(this._$wrapper, \"focusin\", function (e) {\n      e.stopPropagation();\n    });\n\n    this._toggleViewPortSubscription(true);\n  },\n  _initOptions: function _initOptions(options) {\n    this._initTarget(options.target);\n\n    var container = void 0 === options.container ? this.option(\"container\") : options.container;\n\n    this._initContainer(container);\n\n    this._initHideTopOverlayHandler(options.hideTopOverlayHandler);\n\n    this.callBase(options);\n  },\n  _initInnerOverlayClass: function _initInnerOverlayClass() {\n    this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"));\n  },\n  _initTarget: function _initTarget(target) {\n    if (!typeUtils.isDefined(target)) {\n      return;\n    }\n\n    var options = this.option();\n    each([\"position.of\", \"animation.show.from.position.of\", \"animation.show.to.position.of\", \"animation.hide.from.position.of\", \"animation.hide.to.position.of\"], function (_, path) {\n      var pathParts = path.split(\".\");\n      var option = options;\n\n      while (option) {\n        if (1 === pathParts.length) {\n          if (typeUtils.isPlainObject(option)) {\n            option[pathParts.shift()] = target;\n          }\n\n          break;\n        } else {\n          option = option[pathParts.shift()];\n        }\n      }\n    });\n  },\n  _initContainer: function _initContainer(container) {\n    container = void 0 === container ? viewPortUtils.value() : container;\n    var $element = this.$element();\n    var $container = $element.closest(container);\n\n    if (!$container.length) {\n      $container = $(container).first();\n    }\n\n    this._$container = $container.length ? $container : $element.parent();\n  },\n  _initHideTopOverlayHandler: function _initHideTopOverlayHandler(handler) {\n    this._hideTopOverlayHandler = void 0 !== handler ? handler : this._defaultHideTopOverlayHandler.bind(this);\n  },\n  _defaultHideTopOverlayHandler: function _defaultHideTopOverlayHandler() {\n    this.hide();\n  },\n  _initActions: function _initActions() {\n    this._actions = {};\n    each(ACTIONS, function (_, action) {\n      this._actions[action] = this._createActionByOption(action, {\n        excludeValidators: [\"disabled\", \"readOnly\"]\n      }) || noop;\n    }.bind(this));\n  },\n  _initCloseOnOutsideClickHandler: function _initCloseOnOutsideClickHandler() {\n    var that = this;\n\n    this._proxiedDocumentDownHandler = function () {\n      return that._documentDownHandler.apply(that, arguments);\n    };\n  },\n  _documentDownHandler: function _documentDownHandler(e) {\n    if (this._showAnimationProcessing) {\n      this._stopAnimation();\n    }\n\n    var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\n\n    if (typeUtils.isFunction(closeOnOutsideClick)) {\n      closeOnOutsideClick = closeOnOutsideClick(e);\n    }\n\n    var $container = this._$content;\n    var isAttachedTarget = $(window.document).is(e.target) || domUtils.contains(window.document, e.target);\n    var isInnerOverlay = $(e.target).closest(\".\" + INNER_OVERLAY_CLASS).length;\n    var outsideClick = isAttachedTarget && !isInnerOverlay && !($container.is(e.target) || domUtils.contains($container.get(0), e.target));\n\n    if (outsideClick && closeOnOutsideClick) {\n      this._outsideClickHandler(e);\n    }\n\n    return this.option(\"propagateOutsideClick\");\n  },\n  _outsideClickHandler: function _outsideClickHandler(e) {\n    if (this.option(\"shading\")) {\n      e.preventDefault();\n    }\n\n    this.hide();\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates.content = new EmptyTemplate();\n  },\n  _isTopOverlay: function _isTopOverlay() {\n    var overlayStack = this._overlayStack();\n\n    for (var i = overlayStack.length - 1; i >= 0; i--) {\n      var tabbableElements = overlayStack[i]._findTabbableBounds();\n\n      if (tabbableElements.first || tabbableElements.last) {\n        return overlayStack[i] === this;\n      }\n    }\n\n    return false;\n  },\n  _overlayStack: function _overlayStack() {\n    return OVERLAY_STACK;\n  },\n  _zIndexInitValue: function _zIndexInitValue() {\n    return Overlay.baseZIndex();\n  },\n  _toggleViewPortSubscription: function _toggleViewPortSubscription(toggle) {\n    viewPortChanged.remove(this._viewPortChangeHandle);\n\n    if (toggle) {\n      this._viewPortChangeHandle = this._viewPortChangeHandler.bind(this);\n      viewPortChanged.add(this._viewPortChangeHandle);\n    }\n  },\n  _viewPortChangeHandler: function _viewPortChangeHandler() {\n    this._initContainer(this.option(\"container\"));\n\n    this._refresh();\n  },\n  _renderVisibilityAnimate: function _renderVisibilityAnimate(visible) {\n    this._stopAnimation();\n\n    return visible ? this._show() : this._hide();\n  },\n  _normalizePosition: function _normalizePosition() {\n    var position = this.option(\"position\");\n    this._position = \"function\" === typeof position ? position() : position;\n  },\n  _getAnimationConfig: function _getAnimationConfig() {\n    var animation = this.option(\"animation\");\n\n    if (typeUtils.isFunction(animation)) {\n      animation = animation.call(this);\n    }\n\n    return animation;\n  },\n  _show: function _show() {\n    var that = this;\n    var deferred = new Deferred();\n    this._parentHidden = this._isParentHidden();\n    deferred.done(function () {\n      delete that._parentHidden;\n    });\n\n    if (this._parentHidden) {\n      this._isHidden = true;\n      return deferred.resolve();\n    }\n\n    if (this._currentVisible) {\n      return new Deferred().resolve().promise();\n    }\n\n    this._currentVisible = true;\n    this._isShown = false;\n\n    this._normalizePosition();\n\n    var animation = that._getAnimationConfig() || {};\n\n    var showAnimation = this._normalizeAnimation(animation.show, \"to\");\n\n    var startShowAnimation = showAnimation && showAnimation.start || noop;\n    var completeShowAnimation = showAnimation && showAnimation.complete || noop;\n\n    if (this._isHidingActionCanceled) {\n      delete this._isHidingActionCanceled;\n      deferred.resolve();\n    } else {\n      var show = function () {\n        this._renderVisibility(true);\n\n        if (this._isShowingActionCanceled) {\n          delete this._isShowingActionCanceled;\n          deferred.resolve();\n          return;\n        }\n\n        this._animate(showAnimation, function () {\n          if (that.option(\"focusStateEnabled\")) {\n            eventsEngine.trigger(that._focusTarget(), \"focus\");\n          }\n\n          completeShowAnimation.apply(this, arguments);\n          that._showAnimationProcessing = false;\n          that._isShown = true;\n\n          that._actions.onShown();\n\n          that._toggleSafariScrolling(false);\n\n          deferred.resolve();\n        }, function () {\n          startShowAnimation.apply(this, arguments);\n          that._showAnimationProcessing = true;\n        });\n      }.bind(this);\n\n      if (this.option(\"templatesRenderAsynchronously\")) {\n        this._stopShowTimer();\n\n        this._asyncShowTimeout = setTimeout(show);\n      } else {\n        show();\n      }\n    }\n\n    return deferred.promise();\n  },\n  _normalizeAnimation: function _normalizeAnimation(animation, prop) {\n    if (animation) {\n      animation = extend({\n        type: \"slide\"\n      }, animation);\n\n      if (animation[prop] && \"object\" === _typeof(animation[prop])) {\n        extend(animation[prop], {\n          position: this._position\n        });\n      }\n    }\n\n    return animation;\n  },\n  _hide: function _hide() {\n    if (!this._currentVisible) {\n      return new Deferred().resolve().promise();\n    }\n\n    this._currentVisible = false;\n    var that = this;\n    var deferred = new Deferred();\n    var animation = that._getAnimationConfig() || {};\n\n    var hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\n\n    var startHideAnimation = hideAnimation && hideAnimation.start || noop;\n    var completeHideAnimation = hideAnimation && hideAnimation.complete || noop;\n    var hidingArgs = {\n      cancel: false\n    };\n\n    if (this._isShowingActionCanceled) {\n      deferred.resolve();\n    } else {\n      this._actions.onHiding(hidingArgs);\n\n      that._toggleSafariScrolling(true);\n\n      if (hidingArgs.cancel) {\n        this._isHidingActionCanceled = true;\n        this.option(\"visible\", true);\n        deferred.resolve();\n      } else {\n        this._forceFocusLost();\n\n        this._toggleShading(false);\n\n        this._toggleSubscriptions(false);\n\n        this._stopShowTimer();\n\n        this._animate(hideAnimation, function () {\n          that._$content.css(\"pointerEvents\", \"\");\n\n          that._renderVisibility(false);\n\n          completeHideAnimation.apply(this, arguments);\n\n          that._actions.onHidden();\n\n          deferred.resolve();\n        }, function () {\n          that._$content.css(\"pointerEvents\", \"none\");\n\n          startHideAnimation.apply(this, arguments);\n        });\n      }\n    }\n\n    return deferred.promise();\n  },\n  _forceFocusLost: function _forceFocusLost() {\n    var activeElement = domAdapter.getActiveElement();\n    var shouldResetActiveElement = !!this._$content.find(activeElement).length;\n\n    if (shouldResetActiveElement) {\n      domUtils.resetActiveElement();\n    }\n  },\n  _animate: function _animate(animation, completeCallback, startCallback) {\n    if (animation) {\n      startCallback = startCallback || animation.start || noop;\n      fx.animate(this._$content, extend({}, animation, {\n        start: startCallback,\n        complete: completeCallback\n      }));\n    } else {\n      completeCallback();\n    }\n  },\n  _stopAnimation: function _stopAnimation() {\n    fx.stop(this._$content, true);\n  },\n  _renderVisibility: function _renderVisibility(visible) {\n    if (visible && this._isParentHidden()) {\n      return;\n    }\n\n    this._currentVisible = visible;\n\n    this._stopAnimation();\n\n    if (!visible) {\n      domUtils.triggerHidingEvent(this._$content);\n    }\n\n    this._toggleVisibility(visible);\n\n    this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\n\n    this._updateZIndexStackPosition(visible);\n\n    if (visible) {\n      this._renderContent();\n\n      var showingArgs = {\n        cancel: false\n      };\n\n      this._actions.onShowing(showingArgs);\n\n      if (showingArgs.cancel) {\n        this._toggleVisibility(false);\n\n        this._$content.toggleClass(INVISIBLE_STATE_CLASS, true);\n\n        this._updateZIndexStackPosition(false);\n\n        this._moveFromContainer();\n\n        this._isShowingActionCanceled = true;\n        this.option(\"visible\", false);\n        return;\n      }\n\n      this._moveToContainer();\n\n      this._renderGeometry();\n\n      domUtils.triggerShownEvent(this._$content);\n      domUtils.triggerResizeEvent(this._$content);\n    } else {\n      this._moveFromContainer();\n    }\n\n    this._toggleShading(visible);\n\n    this._toggleSubscriptions(visible);\n  },\n  _updateZIndexStackPosition: function _updateZIndexStackPosition(pushToStack) {\n    var overlayStack = this._overlayStack();\n\n    var index = inArray(this, overlayStack);\n\n    if (pushToStack) {\n      if (index === -1) {\n        this._zIndex = zIndexPool.create(this._zIndexInitValue());\n        overlayStack.push(this);\n      }\n\n      this._$wrapper.css(\"zIndex\", this._zIndex);\n\n      this._$content.css(\"zIndex\", this._zIndex);\n    } else {\n      if (index !== -1) {\n        overlayStack.splice(index, 1);\n        zIndexPool.remove(this._zIndex);\n      }\n    }\n  },\n  _toggleShading: function _toggleShading(visible) {\n    this._$wrapper.toggleClass(OVERLAY_MODAL_CLASS, this.option(\"shading\") && !this.option(\"container\"));\n\n    this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\n\n    this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\n\n    this._toggleTabTerminator(visible && this.option(\"shading\"));\n  },\n  _initTabTerminatorHandler: function _initTabTerminatorHandler() {\n    var that = this;\n\n    this._proxiedTabTerminatorHandler = function () {\n      that._tabKeyHandler.apply(that, arguments);\n    };\n  },\n  _toggleTabTerminator: function _toggleTabTerminator(enabled) {\n    var eventName = eventUtils.addNamespace(\"keydown\", this.NAME);\n\n    if (enabled) {\n      eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    } else {\n      eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    }\n  },\n  _findTabbableBounds: function _findTabbableBounds() {\n    var $elements = this._$wrapper.find(\"*\");\n\n    var elementsCount = $elements.length - 1;\n    var result = {\n      first: null,\n      last: null\n    };\n\n    for (var i = 0; i <= elementsCount; i++) {\n      if (!result.first && $elements.eq(i).is(selectors.tabbable)) {\n        result.first = $elements.eq(i);\n      }\n\n      if (!result.last && $elements.eq(elementsCount - i).is(selectors.tabbable)) {\n        result.last = $elements.eq(elementsCount - i);\n      }\n\n      if (result.first && result.last) {\n        break;\n      }\n    }\n\n    return result;\n  },\n  _tabKeyHandler: function _tabKeyHandler(e) {\n    if (eventUtils.normalizeKeyName(e) !== TAB_KEY || !this._isTopOverlay()) {\n      return;\n    }\n\n    var tabbableElements = this._findTabbableBounds();\n\n    var $firstTabbable = tabbableElements.first;\n    var $lastTabbable = tabbableElements.last;\n    var isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0);\n    var isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0);\n    var isEmptyTabList = 0 === tabbableElements.length;\n    var isOutsideTarget = !domUtils.contains(this._$wrapper.get(0), e.target);\n\n    if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\n      e.preventDefault();\n      var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\n      eventsEngine.trigger($focusElement, \"focusin\");\n      eventsEngine.trigger($focusElement, \"focus\");\n    }\n  },\n  _toggleSubscriptions: function _toggleSubscriptions(enabled) {\n    if (windowUtils.hasWindow()) {\n      this._toggleHideTopOverlayCallback(enabled);\n\n      this._toggleParentsScrollSubscription(enabled);\n    }\n  },\n  _toggleHideTopOverlayCallback: function _toggleHideTopOverlayCallback(subscribe) {\n    if (!this._hideTopOverlayHandler) {\n      return;\n    }\n\n    if (subscribe && this.option(\"closeOnBackButton\")) {\n      hideTopOverlayCallback.add(this._hideTopOverlayHandler);\n    } else {\n      hideTopOverlayCallback.remove(this._hideTopOverlayHandler);\n    }\n  },\n  _toggleParentsScrollSubscription: function _toggleParentsScrollSubscription(subscribe) {\n    if (!this._position) {\n      return;\n    }\n\n    var target = this._position.of || $();\n    var closeOnScroll = this.option(\"closeOnTargetScroll\");\n    var $parents = getElement(target).parents();\n    var scrollEvent = eventUtils.addNamespace(\"scroll\", this.NAME);\n\n    if (\"desktop\" === devices.real().deviceType) {\n      $parents = $parents.add(window);\n    }\n\n    this._proxiedTargetParentsScrollHandler = this._proxiedTargetParentsScrollHandler || function (e) {\n      this._targetParentsScrollHandler(e);\n    }.bind(this);\n\n    eventsEngine.off($().add(this._$prevTargetParents), scrollEvent, this._proxiedTargetParentsScrollHandler);\n\n    if (subscribe && closeOnScroll) {\n      eventsEngine.on($parents, scrollEvent, this._proxiedTargetParentsScrollHandler);\n      this._$prevTargetParents = $parents;\n    }\n  },\n  _targetParentsScrollHandler: function _targetParentsScrollHandler(e) {\n    var closeHandled = false;\n    var closeOnScroll = this.option(\"closeOnTargetScroll\");\n\n    if (typeUtils.isFunction(closeOnScroll)) {\n      closeHandled = closeOnScroll(e);\n    }\n\n    if (!closeHandled && !this._showAnimationProcessing) {\n      this.hide();\n    }\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._appendContentToElement();\n\n    this._renderVisibilityAnimate(this.option(\"visible\"));\n  },\n  _appendContentToElement: function _appendContentToElement() {\n    if (!this._$content.parent().is(this.$element())) {\n      this._$content.appendTo(this.$element());\n    }\n  },\n  _renderContent: function _renderContent() {\n    var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\n\n    var isParentHidden = this.option(\"visible\") && this._isParentHidden();\n\n    if (isParentHidden) {\n      this._isHidden = true;\n      return;\n    }\n\n    if (this._contentAlreadyRendered || shouldDeferRendering) {\n      return;\n    }\n\n    this._contentAlreadyRendered = true;\n\n    this._appendContentToElement();\n\n    this.callBase();\n  },\n  _isParentHidden: function _isParentHidden() {\n    if (!this.option(\"_checkParentVisibility\")) {\n      return false;\n    }\n\n    if (void 0 !== this._parentHidden) {\n      return this._parentHidden;\n    }\n\n    var $parent = this.$element().parent();\n\n    if ($parent.is(\":visible\")) {\n      return false;\n    }\n\n    var isHidden = false;\n    $parent.add($parent.parents()).each(function () {\n      var $element = $(this);\n\n      if (\"none\" === $element.css(\"display\")) {\n        isHidden = true;\n        return false;\n      }\n    });\n    return isHidden || !domAdapter.getBody().contains($parent.get(0));\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    var _this = this;\n\n    var whenContentRendered = new Deferred();\n    var contentTemplateOption = this.option(\"contentTemplate\");\n\n    var contentTemplate = this._getTemplate(contentTemplateOption);\n\n    var transclude = this._getAnonymousTemplateName() === contentTemplateOption;\n    contentTemplate && contentTemplate.render({\n      container: getPublicElement(this.$content()),\n      noModel: true,\n      transclude: transclude,\n      onRendered: function onRendered() {\n        whenContentRendered.resolve();\n      }\n    });\n\n    this._renderDrag();\n\n    this._renderResize();\n\n    this._renderScrollTerminator();\n\n    whenContentRendered.done(function () {\n      if (_this.option(\"visible\")) {\n        _this._moveToContainer();\n      }\n    });\n    return whenContentRendered.promise();\n  },\n  _renderDrag: function _renderDrag() {\n    var $dragTarget = this._getDragTarget();\n\n    if (!$dragTarget) {\n      return;\n    }\n\n    var startEventName = eventUtils.addNamespace(dragEvents.start, this.NAME);\n    var updateEventName = eventUtils.addNamespace(dragEvents.move, this.NAME);\n    eventsEngine.off($dragTarget, startEventName);\n    eventsEngine.off($dragTarget, updateEventName);\n\n    if (!this.option(\"dragEnabled\")) {\n      return;\n    }\n\n    eventsEngine.on($dragTarget, startEventName, this._dragStartHandler.bind(this));\n    eventsEngine.on($dragTarget, updateEventName, this._dragUpdateHandler.bind(this));\n  },\n  _renderResize: function _renderResize() {\n    this._resizable = this._createComponent(this._$content, Resizable, {\n      handles: this.option(\"resizeEnabled\") ? \"all\" : \"none\",\n      onResizeEnd: this._resizeEndHandler.bind(this),\n      onResize: this._actions.onResize.bind(this),\n      onResizeStart: this._actions.onResizeStart.bind(this),\n      minHeight: 100,\n      minWidth: 100,\n      area: this._getDragResizeContainer()\n    });\n  },\n  _resizeEndHandler: function _resizeEndHandler() {\n    this._positionChangeHandled = true;\n\n    var width = this._resizable.option(\"width\");\n\n    var height = this._resizable.option(\"height\");\n\n    width && this.option(\"width\", width);\n    height && this.option(\"height\", height);\n\n    this._actions.onResizeEnd();\n  },\n  _renderScrollTerminator: function _renderScrollTerminator() {\n    var $scrollTerminator = this._wrapper();\n\n    var terminatorEventName = eventUtils.addNamespace(dragEvents.move, this.NAME);\n    eventsEngine.off($scrollTerminator, terminatorEventName);\n    eventsEngine.on($scrollTerminator, terminatorEventName, {\n      validate: function validate() {\n        return true;\n      },\n      getDirection: function getDirection() {\n        return \"both\";\n      },\n      _toggleGestureCover: function _toggleGestureCover(toggle) {\n        if (!toggle) {\n          this._toggleGestureCoverImpl(toggle);\n        }\n      },\n      _clearSelection: noop,\n      isNative: true\n    }, function (e) {\n      var originalEvent = e.originalEvent.originalEvent;\n      e._cancelPreventDefault = true;\n\n      if (originalEvent && \"mousemove\" !== originalEvent.type) {\n        e.preventDefault();\n      }\n    });\n  },\n  _getDragTarget: function _getDragTarget() {\n    return this.$content();\n  },\n  _dragStartHandler: function _dragStartHandler(e) {\n    e.targetElements = [];\n    this._prevOffset = {\n      x: 0,\n      y: 0\n    };\n\n    var allowedOffsets = this._allowedOffsets();\n\n    e.maxTopOffset = allowedOffsets.top;\n    e.maxBottomOffset = allowedOffsets.bottom;\n    e.maxLeftOffset = allowedOffsets.left;\n    e.maxRightOffset = allowedOffsets.right;\n  },\n  _getDragResizeContainer: function _getDragResizeContainer() {\n    var isContainerDefined = viewPortUtils.originalViewPort().get(0) || this.option(\"container\");\n    var $container = !isContainerDefined ? $(window) : this._$container;\n    return $container;\n  },\n  _deltaSize: function _deltaSize() {\n    var $content = this._$content;\n\n    var $container = this._getDragResizeContainer();\n\n    var contentWidth = $content.outerWidth();\n    var contentHeight = $content.outerHeight();\n    var containerWidth = $container.outerWidth();\n    var containerHeight = $container.outerHeight();\n\n    if (this._isWindow($container)) {\n      var document = domAdapter.getDocument();\n      var fullPageHeight = Math.max($(document).outerHeight(), containerHeight);\n      var fullPageWidth = Math.max($(document).outerWidth(), containerWidth);\n      containerHeight = fullPageHeight;\n      containerWidth = fullPageWidth;\n    }\n\n    return {\n      width: containerWidth - contentWidth,\n      height: containerHeight - contentHeight\n    };\n  },\n  _dragUpdateHandler: function _dragUpdateHandler(e) {\n    var offset = e.offset;\n    var prevOffset = this._prevOffset;\n    var targetOffset = {\n      top: offset.y - prevOffset.y,\n      left: offset.x - prevOffset.x\n    };\n\n    this._changePosition(targetOffset);\n\n    this._prevOffset = offset;\n  },\n  _changePosition: function _changePosition(offset) {\n    var position = translator.locate(this._$content);\n    translator.move(this._$content, {\n      left: position.left + offset.left,\n      top: position.top + offset.top\n    });\n    this._positionChangeHandled = true;\n  },\n  _allowedOffsets: function _allowedOffsets() {\n    var position = translator.locate(this._$content);\n\n    var deltaSize = this._deltaSize();\n\n    var isAllowedDrag = deltaSize.height >= 0 && deltaSize.width >= 0;\n    var shaderOffset = this.option(\"shading\") && !this.option(\"container\") && !this._isWindow(this._getContainer()) ? translator.locate(this._$wrapper) : {\n      top: 0,\n      left: 0\n    };\n    var boundaryOffset = this.option(\"boundaryOffset\");\n    return {\n      top: isAllowedDrag ? position.top + shaderOffset.top + boundaryOffset.v : 0,\n      bottom: isAllowedDrag ? -position.top - shaderOffset.top + deltaSize.height - boundaryOffset.v : 0,\n      left: isAllowedDrag ? position.left + shaderOffset.left + boundaryOffset.h : 0,\n      right: isAllowedDrag ? -position.left - shaderOffset.left + deltaSize.width - boundaryOffset.h : 0\n    };\n  },\n  _moveFromContainer: function _moveFromContainer() {\n    this._$content.appendTo(this.$element());\n\n    this._detachWrapperToContainer();\n  },\n  _detachWrapperToContainer: function _detachWrapperToContainer() {\n    this._$wrapper.detach();\n  },\n  _moveToContainer: function _moveToContainer() {\n    this._attachWrapperToContainer();\n\n    this._$content.appendTo(this._$wrapper);\n  },\n  _attachWrapperToContainer: function _attachWrapperToContainer() {\n    var $element = this.$element();\n    var containerDefined = void 0 !== this.option(\"container\");\n    var renderContainer = containerDefined ? this._$container : swatch.getSwatchContainer($element);\n\n    if (renderContainer && renderContainer[0] === $element.parent()[0]) {\n      renderContainer = $element;\n    }\n\n    this._$wrapper.appendTo(renderContainer);\n  },\n  _fixHeightAfterSafariAddressBarResizing: function _fixHeightAfterSafariAddressBarResizing() {\n    if (this._isWindow(this._getContainer()) && hasSafariAddressBar) {\n      this._$wrapper.css(\"minHeight\", window.innerHeight);\n    }\n  },\n  _renderGeometry: function _renderGeometry(isDimensionChanged) {\n    if (this.option(\"visible\") && windowUtils.hasWindow()) {\n      this._renderGeometryImpl(isDimensionChanged);\n    }\n  },\n  _renderGeometryImpl: function _renderGeometryImpl(isDimensionChanged) {\n    this._stopAnimation();\n\n    this._normalizePosition();\n\n    this._renderWrapper();\n\n    this._fixHeightAfterSafariAddressBarResizing();\n\n    this._renderDimensions();\n\n    var resultPosition = this._renderPosition();\n\n    this._actions.onPositioned({\n      position: resultPosition\n    });\n  },\n  _fixWrapperPosition: function _fixWrapperPosition() {\n    this._$wrapper.css(\"position\", this._useFixedPosition() ? \"fixed\" : \"absolute\");\n  },\n  _useFixedPosition: function _useFixedPosition() {\n    var $container = this._getContainer();\n\n    return this._isWindow($container) && (!iOS || void 0 !== this._bodyScrollTop);\n  },\n  _toggleSafariScrolling: function _toggleSafariScrolling(scrollingEnabled) {\n    if (iOS && this._useFixedPosition()) {\n      var body = domAdapter.getBody();\n\n      if (scrollingEnabled) {\n        $(body).removeClass(PREVENT_SAFARI_SCROLLING_CLASS);\n        window.scrollTo(0, this._bodyScrollTop);\n        this._bodyScrollTop = void 0;\n      } else {\n        if (this.option(\"visible\")) {\n          this._bodyScrollTop = window.pageYOffset;\n          $(body).addClass(PREVENT_SAFARI_SCROLLING_CLASS);\n        }\n      }\n    }\n  },\n  _renderWrapper: function _renderWrapper() {\n    this._fixWrapperPosition();\n\n    this._renderWrapperDimensions();\n\n    this._renderWrapperPosition();\n  },\n  _renderWrapperDimensions: function _renderWrapperDimensions() {\n    var wrapperWidth;\n    var wrapperHeight;\n\n    var $container = this._getContainer();\n\n    if (!$container) {\n      return;\n    }\n\n    var isWindow = this._isWindow($container);\n\n    wrapperWidth = isWindow ? null : $container.outerWidth(), wrapperHeight = isWindow ? null : $container.outerHeight();\n\n    this._$wrapper.css({\n      width: wrapperWidth,\n      height: wrapperHeight\n    });\n  },\n  _isWindow: function _isWindow($element) {\n    return !!$element && typeUtils.isWindow($element.get(0));\n  },\n  _renderWrapperPosition: function _renderWrapperPosition() {\n    var $container = this._getContainer();\n\n    if ($container) {\n      positionUtils.setup(this._$wrapper, {\n        my: \"top left\",\n        at: \"top left\",\n        of: $container\n      });\n    }\n  },\n  _getContainer: function _getContainer() {\n    var position = this._position;\n    var container = this.option(\"container\");\n    var positionOf = null;\n\n    if (!container && position) {\n      var isEvent = !!(position.of && position.of.preventDefault);\n      positionOf = isEvent ? window : position.of || window;\n    }\n\n    return getElement(container || positionOf);\n  },\n  _renderDimensions: function _renderDimensions() {\n    var content = this._$content.get(0);\n\n    this._$content.css({\n      minWidth: this._getOptionValue(\"minWidth\", content),\n      maxWidth: this._getOptionValue(\"maxWidth\", content),\n      minHeight: this._getOptionValue(\"minHeight\", content),\n      maxHeight: this._getOptionValue(\"maxHeight\", content),\n      width: this._getOptionValue(\"width\", content),\n      height: this._getOptionValue(\"height\", content)\n    });\n  },\n  _renderPosition: function _renderPosition() {\n    if (this._positionChangeHandled) {\n      var allowedOffsets = this._allowedOffsets();\n\n      this._changePosition({\n        top: fitIntoRange(0, -allowedOffsets.top, allowedOffsets.bottom),\n        left: fitIntoRange(0, -allowedOffsets.left, allowedOffsets.right)\n      });\n    } else {\n      this._renderOverlayBoundaryOffset();\n\n      translator.resetPosition(this._$content);\n\n      var position = this._transformStringPosition(this._position, POSITION_ALIASES);\n\n      var resultPosition = positionUtils.setup(this._$content, position);\n      forceRepaint(this._$content);\n\n      this._actions.onPositioning();\n\n      return resultPosition;\n    }\n  },\n  _transformStringPosition: function _transformStringPosition(position, positionAliases) {\n    if (typeUtils.isString(position)) {\n      position = extend({}, positionAliases[position]);\n    }\n\n    return position;\n  },\n  _renderOverlayBoundaryOffset: function _renderOverlayBoundaryOffset() {\n    var boundaryOffset = this.option(\"boundaryOffset\");\n\n    this._$content.css(\"margin\", boundaryOffset.v + \"px \" + boundaryOffset.h + \"px\");\n  },\n  _focusTarget: function _focusTarget() {\n    return this._$content;\n  },\n  _attachKeyboardEvents: function _attachKeyboardEvents() {\n    this._keyboardProcessor = new KeyboardProcessor({\n      element: this._$content,\n      handler: this._keyboardHandler,\n      context: this\n    });\n  },\n  _keyboardHandler: function _keyboardHandler(options) {\n    var e = options.originalEvent;\n    var $target = $(e.target);\n\n    if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\n      this.callBase.apply(this, arguments);\n    }\n  },\n  _isVisible: function _isVisible() {\n    return this.option(\"visible\");\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible) {\n      if (this.option(\"visible\")) {\n        this._renderVisibilityAnimate(visible);\n      }\n    } else {\n      this._renderVisibilityAnimate(visible);\n    }\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    this._renderGeometry(true);\n  },\n  _clean: function _clean() {\n    if (!this._contentAlreadyRendered) {\n      this.$content().empty();\n    }\n\n    this._renderVisibility(false);\n\n    this._stopShowTimer();\n\n    this._cleanFocusState();\n  },\n  _stopShowTimer: function _stopShowTimer() {\n    if (this._asyncShowTimeout) {\n      clearTimeout(this._asyncShowTimeout);\n    }\n\n    this._asyncShowTimeout = null;\n  },\n  _dispose: function _dispose() {\n    fx.stop(this._$content, false);\n    clearTimeout(this._deferShowTimer);\n\n    this._toggleViewPortSubscription(false);\n\n    this._toggleSubscriptions(false);\n\n    this._updateZIndexStackPosition(false);\n\n    this._toggleTabTerminator(false);\n\n    this._toggleSafariScrolling(true);\n\n    this._actions = null;\n    this.callBase();\n    zIndexPool.remove(this._zIndex);\n\n    this._$wrapper.remove();\n\n    this._$content.remove();\n  },\n  _toggleDisabledState: function _toggleDisabledState(value) {\n    this.callBase.apply(this, arguments);\n\n    this._$content.toggleClass(DISABLED_STATE_CLASS, Boolean(value));\n  },\n  _toggleRTLDirection: function _toggleRTLDirection(rtl) {\n    this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl);\n  },\n  _optionChanged: function _optionChanged(args) {\n    var value = args.value;\n\n    if (inArray(args.name, ACTIONS) > -1) {\n      this._initActions();\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"dragEnabled\":\n        this._renderDrag();\n\n        this._renderGeometry();\n\n        break;\n\n      case \"resizeEnabled\":\n        this._renderResize();\n\n        this._renderGeometry();\n\n        break;\n\n      case \"shading\":\n      case \"shadingColor\":\n        this._toggleShading(this.option(\"visible\"));\n\n        break;\n\n      case \"width\":\n      case \"height\":\n      case \"minWidth\":\n      case \"maxWidth\":\n      case \"minHeight\":\n      case \"maxHeight\":\n      case \"boundaryOffset\":\n        this._renderGeometry();\n\n        break;\n\n      case \"position\":\n        this._positionChangeHandled = false;\n\n        this._renderGeometry();\n\n        break;\n\n      case \"visible\":\n        this._renderVisibilityAnimate(value).done(function () {\n          if (!this._animateDeferred) {\n            return;\n          }\n\n          this._animateDeferred.resolveWith(this);\n        }.bind(this));\n\n        break;\n\n      case \"target\":\n        this._initTarget(value);\n\n        this._invalidate();\n\n        break;\n\n      case \"container\":\n        this._initContainer(value);\n\n        this._invalidate();\n\n        break;\n\n      case \"innerOverlay\":\n        this._initInnerOverlayClass();\n\n        break;\n\n      case \"deferRendering\":\n      case \"contentTemplate\":\n        this._contentAlreadyRendered = false;\n\n        this._clean();\n\n        this._invalidate();\n\n        break;\n\n      case \"closeOnBackButton\":\n        this._toggleHideTopOverlayCallback(this.option(\"visible\"));\n\n        break;\n\n      case \"closeOnTargetScroll\":\n        this._toggleParentsScrollSubscription(this.option(\"visible\"));\n\n        break;\n\n      case \"closeOnOutsideClick\":\n      case \"animation\":\n      case \"propagateOutsideClick\":\n        break;\n\n      case \"rtlEnabled\":\n        this._contentAlreadyRendered = false;\n        this.callBase(args);\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  toggle: function toggle(showing) {\n    showing = void 0 === showing ? !this.option(\"visible\") : showing;\n    var result = new Deferred();\n\n    if (showing === this.option(\"visible\")) {\n      return result.resolveWith(this, [showing]).promise();\n    }\n\n    var animateDeferred = new Deferred();\n    this._animateDeferred = animateDeferred;\n    this.option(\"visible\", showing);\n    animateDeferred.promise().done(function () {\n      delete this._animateDeferred;\n      result.resolveWith(this, [this.option(\"visible\")]);\n    }.bind(this));\n    return result.promise();\n  },\n  $content: function $content() {\n    return this._$content;\n  },\n  show: function show() {\n    return this.toggle(true);\n  },\n  hide: function hide() {\n    return this.toggle(false);\n  },\n  content: function content() {\n    return getPublicElement(this._$content);\n  },\n  repaint: function repaint() {\n    this._renderGeometry();\n\n    domUtils.triggerResizeEvent(this._$content);\n  }\n});\n\nOverlay.baseZIndex = function (zIndex) {\n  return zIndexPool.base(zIndex);\n};\n\nregisterComponent(\"dxOverlay\", Overlay);\nmodule.exports = Overlay;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/overlay/ui.overlay.js"],"names":["Symbol","_typeof","obj","$","require","domAdapter","windowUtils","ready","window","navigator","eventsEngine","fx","translator","compareVersions","viewPortUtils","extend","inArray","getPublicElement","viewPortChanged","hideTopOverlayCallback","positionUtils","fitIntoRange","domUtils","noop","typeUtils","each","devices","browser","registerComponent","Widget","KeyboardProcessor","selectors","dragEvents","eventUtils","pointerEvents","Resizable","EmptyTemplate","Deferred","zIndexPool","swatch","OVERLAY_CLASS","OVERLAY_WRAPPER_CLASS","OVERLAY_CONTENT_CLASS","OVERLAY_SHADER_CLASS","OVERLAY_MODAL_CLASS","INNER_OVERLAY_CLASS","INVISIBLE_STATE_CLASS","ANONYMOUS_TEMPLATE_NAME","RTL_DIRECTION_CLASS","ACTIONS","OVERLAY_STACK","DISABLED_STATE_CLASS","PREVENT_SAFARI_SCROLLING_CLASS","TAB_KEY","POSITION_ALIASES","top","my","at","bottom","right","left","center","realDevice","realVersion","firefoxDesktop","iOS","hasSafariAddressBar","android4_0nativeBrowser","forceRepaint","$element","$parents","inScrollView","getElement","value","i","Overlay","_supportedKeys","offsetSize","move","e","allowedOffsets","offset","escape","upArrow","downArrow","leftArrow","rightArrow","_getDefaultOptions","activeStateEnabled","visible","deferRendering","shading","shadingColor","position","width","minWidth","maxWidth","height","minHeight","maxHeight","animation","show","type","duration","from","scale","hide","to","opacity","closeOnOutsideClick","closeOnBackButton","onShowing","onShown","onHiding","onHidden","contentTemplate","dragEnabled","resizeEnabled","onResizeStart","onResize","onResizeEnd","innerOverlay","target","container","hideTopOverlayHandler","closeOnTargetScroll","onPositioned","boundaryOffset","h","v","propagateOutsideClick","ignoreChildEvents","_checkParentVisibility","_defaultOptionsRules","device","realPlatform","options","_setOptionsByReference","_getAnonymousTemplateName","_wrapper","_container","_eventBindingTarget","_init","_initOptions","_initInnerOverlayClass","_initTarget","pathParts","path","option","_initContainer","$container","_initHideTopOverlayHandler","_defaultHideTopOverlayHandler","_initActions","excludeValidators","_initCloseOnOutsideClickHandler","that","_documentDownHandler","isAttachedTarget","isInnerOverlay","outsideClick","_outsideClickHandler","_initTemplates","_isTopOverlay","overlayStack","tabbableElements","_overlayStack","_zIndexInitValue","_toggleViewPortSubscription","_viewPortChangeHandler","_renderVisibilityAnimate","_normalizePosition","_getAnimationConfig","_show","deferred","showAnimation","startShowAnimation","completeShowAnimation","setTimeout","_normalizeAnimation","_position","_hide","hideAnimation","startHideAnimation","completeHideAnimation","hidingArgs","cancel","_forceFocusLost","activeElement","shouldResetActiveElement","_animate","startCallback","start","complete","completeCallback","_stopAnimation","_renderVisibility","showingArgs","_updateZIndexStackPosition","index","_toggleShading","_initTabTerminatorHandler","_toggleTabTerminator","eventName","_findTabbableBounds","$elements","elementsCount","result","first","last","_tabKeyHandler","$firstTabbable","$lastTabbable","isTabOnLast","isShiftTabOnFirst","isEmptyTabList","isOutsideTarget","$focusElement","_toggleSubscriptions","_toggleHideTopOverlayCallback","subscribe","_toggleParentsScrollSubscription","closeOnScroll","scrollEvent","_targetParentsScrollHandler","closeHandled","_render","_appendContentToElement","_renderContent","shouldDeferRendering","isParentHidden","_isParentHidden","$parent","isHidden","_renderContentImpl","_this","whenContentRendered","contentTemplateOption","transclude","noModel","onRendered","_renderDrag","$dragTarget","startEventName","updateEventName","_renderResize","handles","area","_resizeEndHandler","_renderScrollTerminator","$scrollTerminator","terminatorEventName","validate","getDirection","_toggleGestureCover","_clearSelection","isNative","originalEvent","_getDragTarget","_dragStartHandler","x","y","_getDragResizeContainer","isContainerDefined","_deltaSize","$content","contentWidth","contentHeight","containerWidth","containerHeight","document","fullPageHeight","Math","fullPageWidth","_dragUpdateHandler","prevOffset","targetOffset","_changePosition","_allowedOffsets","deltaSize","isAllowedDrag","shaderOffset","_moveFromContainer","_detachWrapperToContainer","_moveToContainer","_attachWrapperToContainer","containerDefined","renderContainer","_fixHeightAfterSafariAddressBarResizing","_renderGeometry","_renderGeometryImpl","resultPosition","_fixWrapperPosition","_useFixedPosition","_toggleSafariScrolling","body","_renderWrapper","_renderWrapperDimensions","isWindow","wrapperWidth","wrapperHeight","_isWindow","_renderWrapperPosition","of","_getContainer","positionOf","isEvent","_renderDimensions","content","_renderPosition","_transformStringPosition","positionAliases","_renderOverlayBoundaryOffset","_focusTarget","_attachKeyboardEvents","element","handler","context","_keyboardHandler","$target","_isVisible","_visibilityChanged","_dimensionChanged","_clean","_stopShowTimer","clearTimeout","_dispose","_toggleDisabledState","Boolean","_toggleRTLDirection","_optionChanged","args","toggle","showing","animateDeferred","repaint","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/overlay/ui.overlay.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nvar $ = require(\"../../core/renderer\");\r\nvar domAdapter = require(\"../../core/dom_adapter\");\r\nvar windowUtils = require(\"../../core/utils/window\");\r\nvar ready = require(\"../../core/utils/ready_callbacks\").add;\r\nvar window = windowUtils.getWindow();\r\nvar navigator = windowUtils.getNavigator();\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar fx = require(\"../../animation/fx\");\r\nvar translator = require(\"../../animation/translator\");\r\nvar compareVersions = require(\"../../core/utils/version\").compare;\r\nvar viewPortUtils = require(\"../../core/utils/view_port\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar inArray = require(\"../../core/utils/array\").inArray;\r\nvar getPublicElement = require(\"../../core/utils/dom\").getPublicElement;\r\nvar viewPortChanged = viewPortUtils.changeCallback;\r\nvar hideTopOverlayCallback = require(\"../../mobile/hide_top_overlay\").hideCallback;\r\nvar positionUtils = require(\"../../animation/position\");\r\nvar fitIntoRange = require(\"../../core/utils/math\").fitIntoRange;\r\nvar domUtils = require(\"../../core/utils/dom\");\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar devices = require(\"../../core/devices\");\r\nvar browser = require(\"../../core/utils/browser\");\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar Widget = require(\"../widget/ui.widget\");\r\nvar KeyboardProcessor = require(\"../widget/ui.keyboard_processor\");\r\nvar selectors = require(\"../widget/selectors\");\r\nvar dragEvents = require(\"../../events/drag\");\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar pointerEvents = require(\"../../events/pointer\");\r\nvar Resizable = require(\"../resizable\");\r\nvar EmptyTemplate = require(\"../../core/templates/empty_template\").EmptyTemplate;\r\nvar Deferred = require(\"../../core/utils/deferred\").Deferred;\r\nvar zIndexPool = require(\"./z_index\");\r\nvar swatch = require(\"../widget/swatch_container\");\r\nvar OVERLAY_CLASS = \"dx-overlay\";\r\nvar OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\r\nvar OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\r\nvar OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\r\nvar OVERLAY_MODAL_CLASS = \"dx-overlay-modal\";\r\nvar INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\r\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\r\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\r\nvar RTL_DIRECTION_CLASS = \"dx-rtl\";\r\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onPositioned\", \"onResizeStart\", \"onResize\", \"onResizeEnd\"];\r\nvar OVERLAY_STACK = [];\r\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\r\nvar PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\r\nvar TAB_KEY = \"tab\";\r\nvar POSITION_ALIASES = {\r\n    top: {\r\n        my: \"top center\",\r\n        at: \"top center\"\r\n    },\r\n    bottom: {\r\n        my: \"bottom center\",\r\n        at: \"bottom center\"\r\n    },\r\n    right: {\r\n        my: \"right center\",\r\n        at: \"right center\"\r\n    },\r\n    left: {\r\n        my: \"left center\",\r\n        at: \"left center\"\r\n    },\r\n    center: {\r\n        my: \"center\",\r\n        at: \"center\"\r\n    },\r\n    \"right bottom\": {\r\n        my: \"right bottom\",\r\n        at: \"right bottom\"\r\n    },\r\n    \"right top\": {\r\n        my: \"right top\",\r\n        at: \"right top\"\r\n    },\r\n    \"left bottom\": {\r\n        my: \"left bottom\",\r\n        at: \"left bottom\"\r\n    },\r\n    \"left top\": {\r\n        my: \"left top\",\r\n        at: \"left top\"\r\n    }\r\n};\r\nvar realDevice = devices.real();\r\nvar realVersion = realDevice.version;\r\nvar firefoxDesktop = browser.mozilla && \"desktop\" === realDevice.deviceType;\r\nvar iOS = \"ios\" === realDevice.platform;\r\nvar hasSafariAddressBar = browser.safari && \"desktop\" !== realDevice.deviceType;\r\nvar android4_0nativeBrowser = \"android\" === realDevice.platform && 0 === compareVersions(realVersion, [4, 0], 2) && navigator.userAgent.indexOf(\"Chrome\") === -1;\r\nvar forceRepaint = function($element) {\r\n    if (firefoxDesktop) {\r\n        $element.width()\r\n    }\r\n    if (android4_0nativeBrowser) {\r\n        var $parents = $element.parents();\r\n        var inScrollView = $parents.is(\".dx-scrollable-native\");\r\n        if (!inScrollView) {\r\n            $parents.css(\"backfaceVisibility\", \"hidden\");\r\n            $parents.css(\"backfaceVisibility\");\r\n            $parents.css(\"backfaceVisibility\", \"visible\")\r\n        }\r\n    }\r\n};\r\nvar getElement = function(value) {\r\n    return value && $(value.target || value)\r\n};\r\nready(function() {\r\n    eventsEngine.subscribeGlobal(domAdapter.getDocument(), pointerEvents.down, function(e) {\r\n        for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\r\n            if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\r\n                return\r\n            }\r\n        }\r\n    })\r\n});\r\nvar Overlay = Widget.inherit({\r\n    _supportedKeys: function() {\r\n        var offsetSize = 5;\r\n        var move = function(top, left, e) {\r\n            if (!this.option(\"dragEnabled\")) {\r\n                return\r\n            }\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            var allowedOffsets = this._allowedOffsets();\r\n            var offset = {\r\n                top: fitIntoRange(top, -allowedOffsets.top, allowedOffsets.bottom),\r\n                left: fitIntoRange(left, -allowedOffsets.left, allowedOffsets.right)\r\n            };\r\n            this._changePosition(offset)\r\n        };\r\n        return extend(this.callBase(), {\r\n            escape: function() {\r\n                this.hide()\r\n            },\r\n            upArrow: move.bind(this, -offsetSize, 0),\r\n            downArrow: move.bind(this, offsetSize, 0),\r\n            leftArrow: move.bind(this, 0, -offsetSize),\r\n            rightArrow: move.bind(this, 0, offsetSize)\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            activeStateEnabled: false,\r\n            visible: false,\r\n            deferRendering: true,\r\n            shading: true,\r\n            shadingColor: \"\",\r\n            position: {\r\n                my: \"center\",\r\n                at: \"center\"\r\n            },\r\n            width: function() {\r\n                return .8 * $(window).width()\r\n            },\r\n            minWidth: null,\r\n            maxWidth: null,\r\n            height: function() {\r\n                return .8 * $(window).height()\r\n            },\r\n            minHeight: null,\r\n            maxHeight: null,\r\n            animation: {\r\n                show: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    from: {\r\n                        scale: .55\r\n                    }\r\n                },\r\n                hide: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    to: {\r\n                        opacity: 0,\r\n                        scale: .55\r\n                    },\r\n                    from: {\r\n                        opacity: 1,\r\n                        scale: 1\r\n                    }\r\n                }\r\n            },\r\n            closeOnOutsideClick: false,\r\n            closeOnBackButton: true,\r\n            onShowing: null,\r\n            onShown: null,\r\n            onHiding: null,\r\n            onHidden: null,\r\n            contentTemplate: \"content\",\r\n            dragEnabled: false,\r\n            resizeEnabled: false,\r\n            onResizeStart: null,\r\n            onResize: null,\r\n            onResizeEnd: null,\r\n            innerOverlay: false,\r\n            target: void 0,\r\n            container: void 0,\r\n            hideTopOverlayHandler: void 0,\r\n            closeOnTargetScroll: false,\r\n            onPositioned: null,\r\n            boundaryOffset: {\r\n                h: 0,\r\n                v: 0\r\n            },\r\n            propagateOutsideClick: false,\r\n            ignoreChildEvents: true,\r\n            _checkParentVisibility: true\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                var realDevice = devices.real();\r\n                var realPlatform = realDevice.platform;\r\n                var realVersion = realDevice.version;\r\n                return \"android\" === realPlatform && compareVersions(realVersion, [4, 2]) < 0\r\n            },\r\n            options: {\r\n                animation: {\r\n                    show: {\r\n                        type: \"fade\",\r\n                        duration: 400\r\n                    },\r\n                    hide: {\r\n                        type: \"fade\",\r\n                        duration: 400,\r\n                        to: {\r\n                            opacity: 0\r\n                        },\r\n                        from: {\r\n                            opacity: 1\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return !windowUtils.hasWindow()\r\n            },\r\n            options: {\r\n                width: null,\r\n                height: null,\r\n                animation: null,\r\n                _checkParentVisibility: false\r\n            }\r\n        }])\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        extend(this._optionsByReference, {\r\n            animation: true\r\n        })\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _wrapper: function() {\r\n        return this._$wrapper\r\n    },\r\n    _container: function() {\r\n        return this._$content\r\n    },\r\n    _eventBindingTarget: function() {\r\n        return this._$content\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initActions();\r\n        this._initCloseOnOutsideClickHandler();\r\n        this._initTabTerminatorHandler();\r\n        this._$wrapper = $(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\r\n        this._$content = $(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\r\n        this._initInnerOverlayClass();\r\n        var $element = this.$element();\r\n        this._$wrapper.addClass($element.attr(\"class\"));\r\n        $element.addClass(OVERLAY_CLASS);\r\n        this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\r\n        eventsEngine.on(this._$wrapper, \"MSPointerDown\", noop);\r\n        eventsEngine.on(this._$wrapper, \"focusin\", function(e) {\r\n            e.stopPropagation()\r\n        });\r\n        this._toggleViewPortSubscription(true)\r\n    },\r\n    _initOptions: function(options) {\r\n        this._initTarget(options.target);\r\n        var container = void 0 === options.container ? this.option(\"container\") : options.container;\r\n        this._initContainer(container);\r\n        this._initHideTopOverlayHandler(options.hideTopOverlayHandler);\r\n        this.callBase(options)\r\n    },\r\n    _initInnerOverlayClass: function() {\r\n        this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"))\r\n    },\r\n    _initTarget: function(target) {\r\n        if (!typeUtils.isDefined(target)) {\r\n            return\r\n        }\r\n        var options = this.option();\r\n        each([\"position.of\", \"animation.show.from.position.of\", \"animation.show.to.position.of\", \"animation.hide.from.position.of\", \"animation.hide.to.position.of\"], function(_, path) {\r\n            var pathParts = path.split(\".\");\r\n            var option = options;\r\n            while (option) {\r\n                if (1 === pathParts.length) {\r\n                    if (typeUtils.isPlainObject(option)) {\r\n                        option[pathParts.shift()] = target\r\n                    }\r\n                    break\r\n                } else {\r\n                    option = option[pathParts.shift()]\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _initContainer: function(container) {\r\n        container = void 0 === container ? viewPortUtils.value() : container;\r\n        var $element = this.$element();\r\n        var $container = $element.closest(container);\r\n        if (!$container.length) {\r\n            $container = $(container).first()\r\n        }\r\n        this._$container = $container.length ? $container : $element.parent()\r\n    },\r\n    _initHideTopOverlayHandler: function(handler) {\r\n        this._hideTopOverlayHandler = void 0 !== handler ? handler : this._defaultHideTopOverlayHandler.bind(this)\r\n    },\r\n    _defaultHideTopOverlayHandler: function() {\r\n        this.hide()\r\n    },\r\n    _initActions: function() {\r\n        this._actions = {};\r\n        each(ACTIONS, function(_, action) {\r\n            this._actions[action] = this._createActionByOption(action, {\r\n                excludeValidators: [\"disabled\", \"readOnly\"]\r\n            }) || noop\r\n        }.bind(this))\r\n    },\r\n    _initCloseOnOutsideClickHandler: function() {\r\n        var that = this;\r\n        this._proxiedDocumentDownHandler = function() {\r\n            return that._documentDownHandler.apply(that, arguments)\r\n        }\r\n    },\r\n    _documentDownHandler: function(e) {\r\n        if (this._showAnimationProcessing) {\r\n            this._stopAnimation()\r\n        }\r\n        var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\r\n        if (typeUtils.isFunction(closeOnOutsideClick)) {\r\n            closeOnOutsideClick = closeOnOutsideClick(e)\r\n        }\r\n        var $container = this._$content;\r\n        var isAttachedTarget = $(window.document).is(e.target) || domUtils.contains(window.document, e.target);\r\n        var isInnerOverlay = $(e.target).closest(\".\" + INNER_OVERLAY_CLASS).length;\r\n        var outsideClick = isAttachedTarget && !isInnerOverlay && !($container.is(e.target) || domUtils.contains($container.get(0), e.target));\r\n        if (outsideClick && closeOnOutsideClick) {\r\n            this._outsideClickHandler(e)\r\n        }\r\n        return this.option(\"propagateOutsideClick\")\r\n    },\r\n    _outsideClickHandler: function(e) {\r\n        if (this.option(\"shading\")) {\r\n            e.preventDefault()\r\n        }\r\n        this.hide()\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._defaultTemplates.content = new EmptyTemplate\r\n    },\r\n    _isTopOverlay: function() {\r\n        var overlayStack = this._overlayStack();\r\n        for (var i = overlayStack.length - 1; i >= 0; i--) {\r\n            var tabbableElements = overlayStack[i]._findTabbableBounds();\r\n            if (tabbableElements.first || tabbableElements.last) {\r\n                return overlayStack[i] === this\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _overlayStack: function() {\r\n        return OVERLAY_STACK\r\n    },\r\n    _zIndexInitValue: function() {\r\n        return Overlay.baseZIndex()\r\n    },\r\n    _toggleViewPortSubscription: function(toggle) {\r\n        viewPortChanged.remove(this._viewPortChangeHandle);\r\n        if (toggle) {\r\n            this._viewPortChangeHandle = this._viewPortChangeHandler.bind(this);\r\n            viewPortChanged.add(this._viewPortChangeHandle)\r\n        }\r\n    },\r\n    _viewPortChangeHandler: function() {\r\n        this._initContainer(this.option(\"container\"));\r\n        this._refresh()\r\n    },\r\n    _renderVisibilityAnimate: function(visible) {\r\n        this._stopAnimation();\r\n        return visible ? this._show() : this._hide()\r\n    },\r\n    _normalizePosition: function() {\r\n        var position = this.option(\"position\");\r\n        this._position = \"function\" === typeof position ? position() : position\r\n    },\r\n    _getAnimationConfig: function() {\r\n        var animation = this.option(\"animation\");\r\n        if (typeUtils.isFunction(animation)) {\r\n            animation = animation.call(this)\r\n        }\r\n        return animation\r\n    },\r\n    _show: function() {\r\n        var that = this;\r\n        var deferred = new Deferred;\r\n        this._parentHidden = this._isParentHidden();\r\n        deferred.done(function() {\r\n            delete that._parentHidden\r\n        });\r\n        if (this._parentHidden) {\r\n            this._isHidden = true;\r\n            return deferred.resolve()\r\n        }\r\n        if (this._currentVisible) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = true;\r\n        this._isShown = false;\r\n        this._normalizePosition();\r\n        var animation = that._getAnimationConfig() || {};\r\n        var showAnimation = this._normalizeAnimation(animation.show, \"to\");\r\n        var startShowAnimation = showAnimation && showAnimation.start || noop;\r\n        var completeShowAnimation = showAnimation && showAnimation.complete || noop;\r\n        if (this._isHidingActionCanceled) {\r\n            delete this._isHidingActionCanceled;\r\n            deferred.resolve()\r\n        } else {\r\n            var show = function() {\r\n                this._renderVisibility(true);\r\n                if (this._isShowingActionCanceled) {\r\n                    delete this._isShowingActionCanceled;\r\n                    deferred.resolve();\r\n                    return\r\n                }\r\n                this._animate(showAnimation, function() {\r\n                    if (that.option(\"focusStateEnabled\")) {\r\n                        eventsEngine.trigger(that._focusTarget(), \"focus\")\r\n                    }\r\n                    completeShowAnimation.apply(this, arguments);\r\n                    that._showAnimationProcessing = false;\r\n                    that._isShown = true;\r\n                    that._actions.onShown();\r\n                    that._toggleSafariScrolling(false);\r\n                    deferred.resolve()\r\n                }, function() {\r\n                    startShowAnimation.apply(this, arguments);\r\n                    that._showAnimationProcessing = true\r\n                })\r\n            }.bind(this);\r\n            if (this.option(\"templatesRenderAsynchronously\")) {\r\n                this._stopShowTimer();\r\n                this._asyncShowTimeout = setTimeout(show)\r\n            } else {\r\n                show()\r\n            }\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _normalizeAnimation: function(animation, prop) {\r\n        if (animation) {\r\n            animation = extend({\r\n                type: \"slide\"\r\n            }, animation);\r\n            if (animation[prop] && \"object\" === _typeof(animation[prop])) {\r\n                extend(animation[prop], {\r\n                    position: this._position\r\n                })\r\n            }\r\n        }\r\n        return animation\r\n    },\r\n    _hide: function() {\r\n        if (!this._currentVisible) {\r\n            return (new Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = false;\r\n        var that = this;\r\n        var deferred = new Deferred;\r\n        var animation = that._getAnimationConfig() || {};\r\n        var hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\r\n        var startHideAnimation = hideAnimation && hideAnimation.start || noop;\r\n        var completeHideAnimation = hideAnimation && hideAnimation.complete || noop;\r\n        var hidingArgs = {\r\n            cancel: false\r\n        };\r\n        if (this._isShowingActionCanceled) {\r\n            deferred.resolve()\r\n        } else {\r\n            this._actions.onHiding(hidingArgs);\r\n            that._toggleSafariScrolling(true);\r\n            if (hidingArgs.cancel) {\r\n                this._isHidingActionCanceled = true;\r\n                this.option(\"visible\", true);\r\n                deferred.resolve()\r\n            } else {\r\n                this._forceFocusLost();\r\n                this._toggleShading(false);\r\n                this._toggleSubscriptions(false);\r\n                this._stopShowTimer();\r\n                this._animate(hideAnimation, function() {\r\n                    that._$content.css(\"pointerEvents\", \"\");\r\n                    that._renderVisibility(false);\r\n                    completeHideAnimation.apply(this, arguments);\r\n                    that._actions.onHidden();\r\n                    deferred.resolve()\r\n                }, function() {\r\n                    that._$content.css(\"pointerEvents\", \"none\");\r\n                    startHideAnimation.apply(this, arguments)\r\n                })\r\n            }\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _forceFocusLost: function() {\r\n        var activeElement = domAdapter.getActiveElement();\r\n        var shouldResetActiveElement = !!this._$content.find(activeElement).length;\r\n        if (shouldResetActiveElement) {\r\n            domUtils.resetActiveElement()\r\n        }\r\n    },\r\n    _animate: function(animation, completeCallback, startCallback) {\r\n        if (animation) {\r\n            startCallback = startCallback || animation.start || noop;\r\n            fx.animate(this._$content, extend({}, animation, {\r\n                start: startCallback,\r\n                complete: completeCallback\r\n            }))\r\n        } else {\r\n            completeCallback()\r\n        }\r\n    },\r\n    _stopAnimation: function() {\r\n        fx.stop(this._$content, true)\r\n    },\r\n    _renderVisibility: function(visible) {\r\n        if (visible && this._isParentHidden()) {\r\n            return\r\n        }\r\n        this._currentVisible = visible;\r\n        this._stopAnimation();\r\n        if (!visible) {\r\n            domUtils.triggerHidingEvent(this._$content)\r\n        }\r\n        this._toggleVisibility(visible);\r\n        this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\r\n        this._updateZIndexStackPosition(visible);\r\n        if (visible) {\r\n            this._renderContent();\r\n            var showingArgs = {\r\n                cancel: false\r\n            };\r\n            this._actions.onShowing(showingArgs);\r\n            if (showingArgs.cancel) {\r\n                this._toggleVisibility(false);\r\n                this._$content.toggleClass(INVISIBLE_STATE_CLASS, true);\r\n                this._updateZIndexStackPosition(false);\r\n                this._moveFromContainer();\r\n                this._isShowingActionCanceled = true;\r\n                this.option(\"visible\", false);\r\n                return\r\n            }\r\n            this._moveToContainer();\r\n            this._renderGeometry();\r\n            domUtils.triggerShownEvent(this._$content);\r\n            domUtils.triggerResizeEvent(this._$content)\r\n        } else {\r\n            this._moveFromContainer()\r\n        }\r\n        this._toggleShading(visible);\r\n        this._toggleSubscriptions(visible)\r\n    },\r\n    _updateZIndexStackPosition: function(pushToStack) {\r\n        var overlayStack = this._overlayStack();\r\n        var index = inArray(this, overlayStack);\r\n        if (pushToStack) {\r\n            if (index === -1) {\r\n                this._zIndex = zIndexPool.create(this._zIndexInitValue());\r\n                overlayStack.push(this)\r\n            }\r\n            this._$wrapper.css(\"zIndex\", this._zIndex);\r\n            this._$content.css(\"zIndex\", this._zIndex)\r\n        } else {\r\n            if (index !== -1) {\r\n                overlayStack.splice(index, 1);\r\n                zIndexPool.remove(this._zIndex)\r\n            }\r\n        }\r\n    },\r\n    _toggleShading: function(visible) {\r\n        this._$wrapper.toggleClass(OVERLAY_MODAL_CLASS, this.option(\"shading\") && !this.option(\"container\"));\r\n        this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\r\n        this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\r\n        this._toggleTabTerminator(visible && this.option(\"shading\"))\r\n    },\r\n    _initTabTerminatorHandler: function() {\r\n        var that = this;\r\n        this._proxiedTabTerminatorHandler = function() {\r\n            that._tabKeyHandler.apply(that, arguments)\r\n        }\r\n    },\r\n    _toggleTabTerminator: function(enabled) {\r\n        var eventName = eventUtils.addNamespace(\"keydown\", this.NAME);\r\n        if (enabled) {\r\n            eventsEngine.on(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        } else {\r\n            eventsEngine.off(domAdapter.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        }\r\n    },\r\n    _findTabbableBounds: function() {\r\n        var $elements = this._$wrapper.find(\"*\");\r\n        var elementsCount = $elements.length - 1;\r\n        var result = {\r\n            first: null,\r\n            last: null\r\n        };\r\n        for (var i = 0; i <= elementsCount; i++) {\r\n            if (!result.first && $elements.eq(i).is(selectors.tabbable)) {\r\n                result.first = $elements.eq(i)\r\n            }\r\n            if (!result.last && $elements.eq(elementsCount - i).is(selectors.tabbable)) {\r\n                result.last = $elements.eq(elementsCount - i)\r\n            }\r\n            if (result.first && result.last) {\r\n                break\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _tabKeyHandler: function(e) {\r\n        if (eventUtils.normalizeKeyName(e) !== TAB_KEY || !this._isTopOverlay()) {\r\n            return\r\n        }\r\n        var tabbableElements = this._findTabbableBounds();\r\n        var $firstTabbable = tabbableElements.first;\r\n        var $lastTabbable = tabbableElements.last;\r\n        var isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0);\r\n        var isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0);\r\n        var isEmptyTabList = 0 === tabbableElements.length;\r\n        var isOutsideTarget = !domUtils.contains(this._$wrapper.get(0), e.target);\r\n        if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\r\n            e.preventDefault();\r\n            var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\r\n            eventsEngine.trigger($focusElement, \"focusin\");\r\n            eventsEngine.trigger($focusElement, \"focus\")\r\n        }\r\n    },\r\n    _toggleSubscriptions: function(enabled) {\r\n        if (windowUtils.hasWindow()) {\r\n            this._toggleHideTopOverlayCallback(enabled);\r\n            this._toggleParentsScrollSubscription(enabled)\r\n        }\r\n    },\r\n    _toggleHideTopOverlayCallback: function(subscribe) {\r\n        if (!this._hideTopOverlayHandler) {\r\n            return\r\n        }\r\n        if (subscribe && this.option(\"closeOnBackButton\")) {\r\n            hideTopOverlayCallback.add(this._hideTopOverlayHandler)\r\n        } else {\r\n            hideTopOverlayCallback.remove(this._hideTopOverlayHandler)\r\n        }\r\n    },\r\n    _toggleParentsScrollSubscription: function(subscribe) {\r\n        if (!this._position) {\r\n            return\r\n        }\r\n        var target = this._position.of || $();\r\n        var closeOnScroll = this.option(\"closeOnTargetScroll\");\r\n        var $parents = getElement(target).parents();\r\n        var scrollEvent = eventUtils.addNamespace(\"scroll\", this.NAME);\r\n        if (\"desktop\" === devices.real().deviceType) {\r\n            $parents = $parents.add(window)\r\n        }\r\n        this._proxiedTargetParentsScrollHandler = this._proxiedTargetParentsScrollHandler || function(e) {\r\n            this._targetParentsScrollHandler(e)\r\n        }.bind(this);\r\n        eventsEngine.off($().add(this._$prevTargetParents), scrollEvent, this._proxiedTargetParentsScrollHandler);\r\n        if (subscribe && closeOnScroll) {\r\n            eventsEngine.on($parents, scrollEvent, this._proxiedTargetParentsScrollHandler);\r\n            this._$prevTargetParents = $parents\r\n        }\r\n    },\r\n    _targetParentsScrollHandler: function(e) {\r\n        var closeHandled = false;\r\n        var closeOnScroll = this.option(\"closeOnTargetScroll\");\r\n        if (typeUtils.isFunction(closeOnScroll)) {\r\n            closeHandled = closeOnScroll(e)\r\n        }\r\n        if (!closeHandled && !this._showAnimationProcessing) {\r\n            this.hide()\r\n        }\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._appendContentToElement();\r\n        this._renderVisibilityAnimate(this.option(\"visible\"))\r\n    },\r\n    _appendContentToElement: function() {\r\n        if (!this._$content.parent().is(this.$element())) {\r\n            this._$content.appendTo(this.$element())\r\n        }\r\n    },\r\n    _renderContent: function() {\r\n        var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\r\n        var isParentHidden = this.option(\"visible\") && this._isParentHidden();\r\n        if (isParentHidden) {\r\n            this._isHidden = true;\r\n            return\r\n        }\r\n        if (this._contentAlreadyRendered || shouldDeferRendering) {\r\n            return\r\n        }\r\n        this._contentAlreadyRendered = true;\r\n        this._appendContentToElement();\r\n        this.callBase()\r\n    },\r\n    _isParentHidden: function() {\r\n        if (!this.option(\"_checkParentVisibility\")) {\r\n            return false\r\n        }\r\n        if (void 0 !== this._parentHidden) {\r\n            return this._parentHidden\r\n        }\r\n        var $parent = this.$element().parent();\r\n        if ($parent.is(\":visible\")) {\r\n            return false\r\n        }\r\n        var isHidden = false;\r\n        $parent.add($parent.parents()).each(function() {\r\n            var $element = $(this);\r\n            if (\"none\" === $element.css(\"display\")) {\r\n                isHidden = true;\r\n                return false\r\n            }\r\n        });\r\n        return isHidden || !domAdapter.getBody().contains($parent.get(0))\r\n    },\r\n    _renderContentImpl: function() {\r\n        var _this = this;\r\n        var whenContentRendered = new Deferred;\r\n        var contentTemplateOption = this.option(\"contentTemplate\");\r\n        var contentTemplate = this._getTemplate(contentTemplateOption);\r\n        var transclude = this._getAnonymousTemplateName() === contentTemplateOption;\r\n        contentTemplate && contentTemplate.render({\r\n            container: getPublicElement(this.$content()),\r\n            noModel: true,\r\n            transclude: transclude,\r\n            onRendered: function() {\r\n                whenContentRendered.resolve()\r\n            }\r\n        });\r\n        this._renderDrag();\r\n        this._renderResize();\r\n        this._renderScrollTerminator();\r\n        whenContentRendered.done(function() {\r\n            if (_this.option(\"visible\")) {\r\n                _this._moveToContainer()\r\n            }\r\n        });\r\n        return whenContentRendered.promise()\r\n    },\r\n    _renderDrag: function() {\r\n        var $dragTarget = this._getDragTarget();\r\n        if (!$dragTarget) {\r\n            return\r\n        }\r\n        var startEventName = eventUtils.addNamespace(dragEvents.start, this.NAME);\r\n        var updateEventName = eventUtils.addNamespace(dragEvents.move, this.NAME);\r\n        eventsEngine.off($dragTarget, startEventName);\r\n        eventsEngine.off($dragTarget, updateEventName);\r\n        if (!this.option(\"dragEnabled\")) {\r\n            return\r\n        }\r\n        eventsEngine.on($dragTarget, startEventName, this._dragStartHandler.bind(this));\r\n        eventsEngine.on($dragTarget, updateEventName, this._dragUpdateHandler.bind(this))\r\n    },\r\n    _renderResize: function() {\r\n        this._resizable = this._createComponent(this._$content, Resizable, {\r\n            handles: this.option(\"resizeEnabled\") ? \"all\" : \"none\",\r\n            onResizeEnd: this._resizeEndHandler.bind(this),\r\n            onResize: this._actions.onResize.bind(this),\r\n            onResizeStart: this._actions.onResizeStart.bind(this),\r\n            minHeight: 100,\r\n            minWidth: 100,\r\n            area: this._getDragResizeContainer()\r\n        })\r\n    },\r\n    _resizeEndHandler: function() {\r\n        this._positionChangeHandled = true;\r\n        var width = this._resizable.option(\"width\");\r\n        var height = this._resizable.option(\"height\");\r\n        width && this.option(\"width\", width);\r\n        height && this.option(\"height\", height);\r\n        this._actions.onResizeEnd()\r\n    },\r\n    _renderScrollTerminator: function() {\r\n        var $scrollTerminator = this._wrapper();\r\n        var terminatorEventName = eventUtils.addNamespace(dragEvents.move, this.NAME);\r\n        eventsEngine.off($scrollTerminator, terminatorEventName);\r\n        eventsEngine.on($scrollTerminator, terminatorEventName, {\r\n            validate: function() {\r\n                return true\r\n            },\r\n            getDirection: function() {\r\n                return \"both\"\r\n            },\r\n            _toggleGestureCover: function(toggle) {\r\n                if (!toggle) {\r\n                    this._toggleGestureCoverImpl(toggle)\r\n                }\r\n            },\r\n            _clearSelection: noop,\r\n            isNative: true\r\n        }, function(e) {\r\n            var originalEvent = e.originalEvent.originalEvent;\r\n            e._cancelPreventDefault = true;\r\n            if (originalEvent && \"mousemove\" !== originalEvent.type) {\r\n                e.preventDefault()\r\n            }\r\n        })\r\n    },\r\n    _getDragTarget: function() {\r\n        return this.$content()\r\n    },\r\n    _dragStartHandler: function(e) {\r\n        e.targetElements = [];\r\n        this._prevOffset = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        var allowedOffsets = this._allowedOffsets();\r\n        e.maxTopOffset = allowedOffsets.top;\r\n        e.maxBottomOffset = allowedOffsets.bottom;\r\n        e.maxLeftOffset = allowedOffsets.left;\r\n        e.maxRightOffset = allowedOffsets.right\r\n    },\r\n    _getDragResizeContainer: function() {\r\n        var isContainerDefined = viewPortUtils.originalViewPort().get(0) || this.option(\"container\");\r\n        var $container = !isContainerDefined ? $(window) : this._$container;\r\n        return $container\r\n    },\r\n    _deltaSize: function() {\r\n        var $content = this._$content;\r\n        var $container = this._getDragResizeContainer();\r\n        var contentWidth = $content.outerWidth();\r\n        var contentHeight = $content.outerHeight();\r\n        var containerWidth = $container.outerWidth();\r\n        var containerHeight = $container.outerHeight();\r\n        if (this._isWindow($container)) {\r\n            var document = domAdapter.getDocument();\r\n            var fullPageHeight = Math.max($(document).outerHeight(), containerHeight);\r\n            var fullPageWidth = Math.max($(document).outerWidth(), containerWidth);\r\n            containerHeight = fullPageHeight;\r\n            containerWidth = fullPageWidth\r\n        }\r\n        return {\r\n            width: containerWidth - contentWidth,\r\n            height: containerHeight - contentHeight\r\n        }\r\n    },\r\n    _dragUpdateHandler: function(e) {\r\n        var offset = e.offset;\r\n        var prevOffset = this._prevOffset;\r\n        var targetOffset = {\r\n            top: offset.y - prevOffset.y,\r\n            left: offset.x - prevOffset.x\r\n        };\r\n        this._changePosition(targetOffset);\r\n        this._prevOffset = offset\r\n    },\r\n    _changePosition: function(offset) {\r\n        var position = translator.locate(this._$content);\r\n        translator.move(this._$content, {\r\n            left: position.left + offset.left,\r\n            top: position.top + offset.top\r\n        });\r\n        this._positionChangeHandled = true\r\n    },\r\n    _allowedOffsets: function() {\r\n        var position = translator.locate(this._$content);\r\n        var deltaSize = this._deltaSize();\r\n        var isAllowedDrag = deltaSize.height >= 0 && deltaSize.width >= 0;\r\n        var shaderOffset = this.option(\"shading\") && !this.option(\"container\") && !this._isWindow(this._getContainer()) ? translator.locate(this._$wrapper) : {\r\n            top: 0,\r\n            left: 0\r\n        };\r\n        var boundaryOffset = this.option(\"boundaryOffset\");\r\n        return {\r\n            top: isAllowedDrag ? position.top + shaderOffset.top + boundaryOffset.v : 0,\r\n            bottom: isAllowedDrag ? -position.top - shaderOffset.top + deltaSize.height - boundaryOffset.v : 0,\r\n            left: isAllowedDrag ? position.left + shaderOffset.left + boundaryOffset.h : 0,\r\n            right: isAllowedDrag ? -position.left - shaderOffset.left + deltaSize.width - boundaryOffset.h : 0\r\n        }\r\n    },\r\n    _moveFromContainer: function() {\r\n        this._$content.appendTo(this.$element());\r\n        this._detachWrapperToContainer()\r\n    },\r\n    _detachWrapperToContainer: function() {\r\n        this._$wrapper.detach()\r\n    },\r\n    _moveToContainer: function() {\r\n        this._attachWrapperToContainer();\r\n        this._$content.appendTo(this._$wrapper)\r\n    },\r\n    _attachWrapperToContainer: function() {\r\n        var $element = this.$element();\r\n        var containerDefined = void 0 !== this.option(\"container\");\r\n        var renderContainer = containerDefined ? this._$container : swatch.getSwatchContainer($element);\r\n        if (renderContainer && renderContainer[0] === $element.parent()[0]) {\r\n            renderContainer = $element\r\n        }\r\n        this._$wrapper.appendTo(renderContainer)\r\n    },\r\n    _fixHeightAfterSafariAddressBarResizing: function() {\r\n        if (this._isWindow(this._getContainer()) && hasSafariAddressBar) {\r\n            this._$wrapper.css(\"minHeight\", window.innerHeight)\r\n        }\r\n    },\r\n    _renderGeometry: function(isDimensionChanged) {\r\n        if (this.option(\"visible\") && windowUtils.hasWindow()) {\r\n            this._renderGeometryImpl(isDimensionChanged)\r\n        }\r\n    },\r\n    _renderGeometryImpl: function(isDimensionChanged) {\r\n        this._stopAnimation();\r\n        this._normalizePosition();\r\n        this._renderWrapper();\r\n        this._fixHeightAfterSafariAddressBarResizing();\r\n        this._renderDimensions();\r\n        var resultPosition = this._renderPosition();\r\n        this._actions.onPositioned({\r\n            position: resultPosition\r\n        })\r\n    },\r\n    _fixWrapperPosition: function() {\r\n        this._$wrapper.css(\"position\", this._useFixedPosition() ? \"fixed\" : \"absolute\")\r\n    },\r\n    _useFixedPosition: function() {\r\n        var $container = this._getContainer();\r\n        return this._isWindow($container) && (!iOS || void 0 !== this._bodyScrollTop)\r\n    },\r\n    _toggleSafariScrolling: function(scrollingEnabled) {\r\n        if (iOS && this._useFixedPosition()) {\r\n            var body = domAdapter.getBody();\r\n            if (scrollingEnabled) {\r\n                $(body).removeClass(PREVENT_SAFARI_SCROLLING_CLASS);\r\n                window.scrollTo(0, this._bodyScrollTop);\r\n                this._bodyScrollTop = void 0\r\n            } else {\r\n                if (this.option(\"visible\")) {\r\n                    this._bodyScrollTop = window.pageYOffset;\r\n                    $(body).addClass(PREVENT_SAFARI_SCROLLING_CLASS)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _renderWrapper: function() {\r\n        this._fixWrapperPosition();\r\n        this._renderWrapperDimensions();\r\n        this._renderWrapperPosition()\r\n    },\r\n    _renderWrapperDimensions: function() {\r\n        var wrapperWidth;\r\n        var wrapperHeight;\r\n        var $container = this._getContainer();\r\n        if (!$container) {\r\n            return\r\n        }\r\n        var isWindow = this._isWindow($container);\r\n        wrapperWidth = isWindow ? null : $container.outerWidth(), wrapperHeight = isWindow ? null : $container.outerHeight();\r\n        this._$wrapper.css({\r\n            width: wrapperWidth,\r\n            height: wrapperHeight\r\n        })\r\n    },\r\n    _isWindow: function($element) {\r\n        return !!$element && typeUtils.isWindow($element.get(0))\r\n    },\r\n    _renderWrapperPosition: function() {\r\n        var $container = this._getContainer();\r\n        if ($container) {\r\n            positionUtils.setup(this._$wrapper, {\r\n                my: \"top left\",\r\n                at: \"top left\",\r\n                of: $container\r\n            })\r\n        }\r\n    },\r\n    _getContainer: function() {\r\n        var position = this._position;\r\n        var container = this.option(\"container\");\r\n        var positionOf = null;\r\n        if (!container && position) {\r\n            var isEvent = !!(position.of && position.of.preventDefault);\r\n            positionOf = isEvent ? window : position.of || window\r\n        }\r\n        return getElement(container || positionOf)\r\n    },\r\n    _renderDimensions: function() {\r\n        var content = this._$content.get(0);\r\n        this._$content.css({\r\n            minWidth: this._getOptionValue(\"minWidth\", content),\r\n            maxWidth: this._getOptionValue(\"maxWidth\", content),\r\n            minHeight: this._getOptionValue(\"minHeight\", content),\r\n            maxHeight: this._getOptionValue(\"maxHeight\", content),\r\n            width: this._getOptionValue(\"width\", content),\r\n            height: this._getOptionValue(\"height\", content)\r\n        })\r\n    },\r\n    _renderPosition: function() {\r\n        if (this._positionChangeHandled) {\r\n            var allowedOffsets = this._allowedOffsets();\r\n            this._changePosition({\r\n                top: fitIntoRange(0, -allowedOffsets.top, allowedOffsets.bottom),\r\n                left: fitIntoRange(0, -allowedOffsets.left, allowedOffsets.right)\r\n            })\r\n        } else {\r\n            this._renderOverlayBoundaryOffset();\r\n            translator.resetPosition(this._$content);\r\n            var position = this._transformStringPosition(this._position, POSITION_ALIASES);\r\n            var resultPosition = positionUtils.setup(this._$content, position);\r\n            forceRepaint(this._$content);\r\n            this._actions.onPositioning();\r\n            return resultPosition\r\n        }\r\n    },\r\n    _transformStringPosition: function(position, positionAliases) {\r\n        if (typeUtils.isString(position)) {\r\n            position = extend({}, positionAliases[position])\r\n        }\r\n        return position\r\n    },\r\n    _renderOverlayBoundaryOffset: function() {\r\n        var boundaryOffset = this.option(\"boundaryOffset\");\r\n        this._$content.css(\"margin\", boundaryOffset.v + \"px \" + boundaryOffset.h + \"px\")\r\n    },\r\n    _focusTarget: function() {\r\n        return this._$content\r\n    },\r\n    _attachKeyboardEvents: function() {\r\n        this._keyboardProcessor = new KeyboardProcessor({\r\n            element: this._$content,\r\n            handler: this._keyboardHandler,\r\n            context: this\r\n        })\r\n    },\r\n    _keyboardHandler: function(options) {\r\n        var e = options.originalEvent;\r\n        var $target = $(e.target);\r\n        if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\r\n            this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _isVisible: function() {\r\n        return this.option(\"visible\")\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            if (this.option(\"visible\")) {\r\n                this._renderVisibilityAnimate(visible)\r\n            }\r\n        } else {\r\n            this._renderVisibilityAnimate(visible)\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._renderGeometry(true)\r\n    },\r\n    _clean: function() {\r\n        if (!this._contentAlreadyRendered) {\r\n            this.$content().empty()\r\n        }\r\n        this._renderVisibility(false);\r\n        this._stopShowTimer();\r\n        this._cleanFocusState()\r\n    },\r\n    _stopShowTimer: function() {\r\n        if (this._asyncShowTimeout) {\r\n            clearTimeout(this._asyncShowTimeout)\r\n        }\r\n        this._asyncShowTimeout = null\r\n    },\r\n    _dispose: function() {\r\n        fx.stop(this._$content, false);\r\n        clearTimeout(this._deferShowTimer);\r\n        this._toggleViewPortSubscription(false);\r\n        this._toggleSubscriptions(false);\r\n        this._updateZIndexStackPosition(false);\r\n        this._toggleTabTerminator(false);\r\n        this._toggleSafariScrolling(true);\r\n        this._actions = null;\r\n        this.callBase();\r\n        zIndexPool.remove(this._zIndex);\r\n        this._$wrapper.remove();\r\n        this._$content.remove()\r\n    },\r\n    _toggleDisabledState: function(value) {\r\n        this.callBase.apply(this, arguments);\r\n        this._$content.toggleClass(DISABLED_STATE_CLASS, Boolean(value))\r\n    },\r\n    _toggleRTLDirection: function(rtl) {\r\n        this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl)\r\n    },\r\n    _optionChanged: function(args) {\r\n        var value = args.value;\r\n        if (inArray(args.name, ACTIONS) > -1) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"dragEnabled\":\r\n                this._renderDrag();\r\n                this._renderGeometry();\r\n                break;\r\n            case \"resizeEnabled\":\r\n                this._renderResize();\r\n                this._renderGeometry();\r\n                break;\r\n            case \"shading\":\r\n            case \"shadingColor\":\r\n                this._toggleShading(this.option(\"visible\"));\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n            case \"minWidth\":\r\n            case \"maxWidth\":\r\n            case \"minHeight\":\r\n            case \"maxHeight\":\r\n            case \"boundaryOffset\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"position\":\r\n                this._positionChangeHandled = false;\r\n                this._renderGeometry();\r\n                break;\r\n            case \"visible\":\r\n                this._renderVisibilityAnimate(value).done(function() {\r\n                    if (!this._animateDeferred) {\r\n                        return\r\n                    }\r\n                    this._animateDeferred.resolveWith(this)\r\n                }.bind(this));\r\n                break;\r\n            case \"target\":\r\n                this._initTarget(value);\r\n                this._invalidate();\r\n                break;\r\n            case \"container\":\r\n                this._initContainer(value);\r\n                this._invalidate();\r\n                break;\r\n            case \"innerOverlay\":\r\n                this._initInnerOverlayClass();\r\n                break;\r\n            case \"deferRendering\":\r\n            case \"contentTemplate\":\r\n                this._contentAlreadyRendered = false;\r\n                this._clean();\r\n                this._invalidate();\r\n                break;\r\n            case \"closeOnBackButton\":\r\n                this._toggleHideTopOverlayCallback(this.option(\"visible\"));\r\n                break;\r\n            case \"closeOnTargetScroll\":\r\n                this._toggleParentsScrollSubscription(this.option(\"visible\"));\r\n                break;\r\n            case \"closeOnOutsideClick\":\r\n            case \"animation\":\r\n            case \"propagateOutsideClick\":\r\n                break;\r\n            case \"rtlEnabled\":\r\n                this._contentAlreadyRendered = false;\r\n                this.callBase(args);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    toggle: function(showing) {\r\n        showing = void 0 === showing ? !this.option(\"visible\") : showing;\r\n        var result = new Deferred;\r\n        if (showing === this.option(\"visible\")) {\r\n            return result.resolveWith(this, [showing]).promise()\r\n        }\r\n        var animateDeferred = new Deferred;\r\n        this._animateDeferred = animateDeferred;\r\n        this.option(\"visible\", showing);\r\n        animateDeferred.promise().done(function() {\r\n            delete this._animateDeferred;\r\n            result.resolveWith(this, [this.option(\"visible\")])\r\n        }.bind(this));\r\n        return result.promise()\r\n    },\r\n    $content: function() {\r\n        return this._$content\r\n    },\r\n    show: function() {\r\n        return this.toggle(true)\r\n    },\r\n    hide: function() {\r\n        return this.toggle(false)\r\n    },\r\n    content: function() {\r\n        return getPublicElement(this._$content)\r\n    },\r\n    repaint: function() {\r\n        this._renderGeometry();\r\n        domUtils.triggerResizeEvent(this._$content)\r\n    }\r\n});\r\nOverlay.baseZIndex = function(zIndex) {\r\n    return zIndexPool.base(zIndex)\r\n};\r\nregisterComponent(\"dxOverlay\", Overlay);\r\nmodule.exports = Overlay;\r\n"]},"metadata":{},"sourceType":"module"}