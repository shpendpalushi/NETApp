{"ast":null,"code":"/**\r\n * DevExtreme (animation/fx.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar $ = require(\"../core/renderer\");\n\nvar window = require(\"../core/utils/window\").getWindow();\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar errors = require(\"../core/errors\");\n\nvar getPublicElement = require(\"../core/utils/dom\").getPublicElement;\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar typeUtils = require(\"../core/utils/type\");\n\nvar iteratorUtils = require(\"../core/utils/iterator\");\n\nvar translator = require(\"./translator\");\n\nvar easing = require(\"./easing\");\n\nvar animationFrame = require(\"./frame\");\n\nvar support = require(\"../core/utils/support\");\n\nvar positionUtils = require(\"./position\");\n\nvar removeEvent = require(\"../core/remove_event\");\n\nvar eventUtils = require(\"../events/utils\");\n\nvar deferredUtils = require(\"../core/utils/deferred\");\n\nvar when = deferredUtils.when;\nvar Deferred = deferredUtils.Deferred;\nvar removeEventName = eventUtils.addNamespace(removeEvent, \"dxFX\");\nvar isFunction = typeUtils.isFunction;\nvar isPlainObject = typeUtils.isPlainObject;\n\nvar noop = require(\"../core/utils/common\").noop;\n\nvar RELATIVE_VALUE_REGEX = /^([+-])=(.*)/i;\nvar ANIM_DATA_KEY = \"dxAnimData\";\nvar ANIM_QUEUE_KEY = \"dxAnimQueue\";\nvar TRANSFORM_PROP = \"transform\";\nvar TransitionAnimationStrategy = {\n  initAnimation: function initAnimation($element, config) {\n    $element.css({\n      transitionProperty: \"none\"\n    });\n\n    if (\"string\" === typeof config.from) {\n      $element.addClass(config.from);\n    } else {\n      setProps($element, config.from);\n    }\n\n    var that = this;\n    var deferred = new Deferred();\n    var cleanupWhen = config.cleanupWhen;\n    config.transitionAnimation = {\n      deferred: deferred,\n      finish: function finish() {\n        that._finishTransition($element);\n\n        if (cleanupWhen) {\n          when(deferred, cleanupWhen).always(function () {\n            that._cleanup($element, config);\n          });\n        } else {\n          that._cleanup($element, config);\n        }\n\n        deferred.resolveWith($element, [config, $element]);\n      }\n    };\n\n    this._completeAnimationCallback($element, config).done(function () {\n      config.transitionAnimation.finish();\n    }).fail(function () {\n      deferred.rejectWith($element, [config, $element]);\n    });\n\n    if (!config.duration) {\n      config.transitionAnimation.finish();\n    }\n\n    $element.css(\"transform\");\n  },\n  animate: function animate($element, config) {\n    this._startAnimation($element, config);\n\n    return config.transitionAnimation.deferred.promise();\n  },\n  _completeAnimationCallback: function _completeAnimationCallback($element, config) {\n    var that = this;\n    var startTime = Date.now() + config.delay;\n    var deferred = new Deferred();\n    var transitionEndFired = new Deferred();\n    var simulatedTransitionEndFired = new Deferred();\n    var simulatedEndEventTimer;\n    var waitForJSCompleteTimer;\n    var transitionEndEventName = support.transitionEndEventName() + \".dxFX\";\n\n    config.transitionAnimation.cleanup = function () {\n      clearTimeout(simulatedEndEventTimer);\n      clearTimeout(waitForJSCompleteTimer);\n      eventsEngine.off($element, transitionEndEventName);\n      eventsEngine.off($element, removeEventName);\n    };\n\n    eventsEngine.one($element, transitionEndEventName, function () {\n      if (Date.now() - startTime >= config.duration) {\n        transitionEndFired.reject();\n      }\n    });\n    eventsEngine.off($element, removeEventName);\n    eventsEngine.on($element, removeEventName, function () {\n      that.stop($element, config);\n      deferred.reject();\n    });\n    waitForJSCompleteTimer = setTimeout(function () {\n      simulatedEndEventTimer = setTimeout(function () {\n        simulatedTransitionEndFired.reject();\n      }, config.duration + config.delay + fx._simulatedTransitionEndDelay);\n      when(transitionEndFired, simulatedTransitionEndFired).fail(function () {\n        deferred.resolve();\n      }.bind(this));\n    });\n    return deferred.promise();\n  },\n  _startAnimation: function _startAnimation($element, config) {\n    $element.css({\n      transitionProperty: \"all\",\n      transitionDelay: config.delay + \"ms\",\n      transitionDuration: config.duration + \"ms\",\n      transitionTimingFunction: config.easing\n    });\n\n    if (\"string\" === typeof config.to) {\n      $element[0].className += \" \" + config.to;\n    } else {\n      if (config.to) {\n        setProps($element, config.to);\n      }\n    }\n  },\n  _finishTransition: function _finishTransition($element) {\n    $element.css(\"transition\", \"none\");\n  },\n  _cleanup: function _cleanup($element, config) {\n    config.transitionAnimation.cleanup();\n\n    if (\"string\" === typeof config.from) {\n      $element.removeClass(config.from);\n      $element.removeClass(config.to);\n    }\n  },\n  stop: function stop($element, config, jumpToEnd) {\n    if (!config) {\n      return;\n    }\n\n    if (jumpToEnd) {\n      config.transitionAnimation.finish();\n    } else {\n      if (isPlainObject(config.to)) {\n        iteratorUtils.each(config.to, function (key) {\n          $element.css(key, $element.css(key));\n        });\n      }\n\n      this._finishTransition($element);\n\n      this._cleanup($element, config);\n    }\n  }\n};\nvar FrameAnimationStrategy = {\n  initAnimation: function initAnimation($element, config) {\n    setProps($element, config.from);\n  },\n  animate: function animate($element, config) {\n    var deferred = new Deferred();\n    var that = this;\n\n    if (!config) {\n      return deferred.reject().promise();\n    }\n\n    iteratorUtils.each(config.to, function (prop) {\n      if (void 0 === config.from[prop]) {\n        config.from[prop] = that._normalizeValue($element.css(prop));\n      }\n    });\n\n    if (config.to[TRANSFORM_PROP]) {\n      config.from[TRANSFORM_PROP] = that._parseTransform(config.from[TRANSFORM_PROP]);\n      config.to[TRANSFORM_PROP] = that._parseTransform(config.to[TRANSFORM_PROP]);\n    }\n\n    config.frameAnimation = {\n      to: config.to,\n      from: config.from,\n      currentValue: config.from,\n      easing: easing.convertTransitionTimingFuncToEasing(config.easing),\n      duration: config.duration,\n      startTime: new Date().valueOf(),\n      finish: function finish() {\n        this.currentValue = this.to;\n        this.draw();\n        animationFrame.cancelAnimationFrame(config.frameAnimation.animationFrameId);\n        deferred.resolve();\n      },\n      draw: function draw() {\n        if (config.draw) {\n          config.draw(this.currentValue);\n          return;\n        }\n\n        var currentValue = extend({}, this.currentValue);\n\n        if (currentValue[TRANSFORM_PROP]) {\n          currentValue[TRANSFORM_PROP] = iteratorUtils.map(currentValue[TRANSFORM_PROP], function (value, prop) {\n            if (\"translate\" === prop) {\n              return translator.getTranslateCss(value);\n            } else {\n              if (\"scale\" === prop) {\n                return \"scale(\" + value + \")\";\n              } else {\n                if (\"rotate\" === prop.substr(0, prop.length - 1)) {\n                  return prop + \"(\" + value + \"deg)\";\n                }\n              }\n            }\n          }).join(\" \");\n        }\n\n        $element.css(currentValue);\n      }\n    };\n\n    if (config.delay) {\n      config.frameAnimation.startTime += config.delay;\n      config.frameAnimation.delayTimeout = setTimeout(function () {\n        that._startAnimation($element, config);\n      }, config.delay);\n    } else {\n      that._startAnimation($element, config);\n    }\n\n    return deferred.promise();\n  },\n  _startAnimation: function _startAnimation($element, config) {\n    eventsEngine.off($element, removeEventName);\n    eventsEngine.on($element, removeEventName, function () {\n      if (config.frameAnimation) {\n        animationFrame.cancelAnimationFrame(config.frameAnimation.animationFrameId);\n      }\n    });\n\n    this._animationStep($element, config);\n  },\n  _parseTransform: function _parseTransform(transformString) {\n    var result = {};\n    iteratorUtils.each(transformString.match(/(\\w|\\d)+\\([^)]*\\)\\s*/g), function (i, part) {\n      var translateData = translator.parseTranslate(part);\n      var scaleData = part.match(/scale\\((.+?)\\)/);\n      var rotateData = part.match(/(rotate.)\\((.+)deg\\)/);\n\n      if (translateData) {\n        result.translate = translateData;\n      }\n\n      if (scaleData && scaleData[1]) {\n        result.scale = parseFloat(scaleData[1]);\n      }\n\n      if (rotateData && rotateData[1]) {\n        result[rotateData[1]] = parseFloat(rotateData[2]);\n      }\n    });\n    return result;\n  },\n  stop: function stop($element, config, jumpToEnd) {\n    var frameAnimation = config && config.frameAnimation;\n\n    if (!frameAnimation) {\n      return;\n    }\n\n    animationFrame.cancelAnimationFrame(frameAnimation.animationFrameId);\n    clearTimeout(frameAnimation.delayTimeout);\n\n    if (jumpToEnd) {\n      frameAnimation.finish();\n    }\n\n    delete config.frameAnimation;\n  },\n  _animationStep: function _animationStep($element, config) {\n    var frameAnimation = config && config.frameAnimation;\n\n    if (!frameAnimation) {\n      return;\n    }\n\n    var now = new Date().valueOf();\n\n    if (now >= frameAnimation.startTime + frameAnimation.duration) {\n      frameAnimation.finish();\n      return;\n    }\n\n    frameAnimation.currentValue = this._calcStepValue(frameAnimation, now - frameAnimation.startTime);\n    frameAnimation.draw();\n    var that = this;\n    frameAnimation.animationFrameId = animationFrame.requestAnimationFrame(function () {\n      that._animationStep($element, config);\n    });\n  },\n  _calcStepValue: function _calcStepValue(frameAnimation, currentDuration) {\n    var calcValueRecursively = function calcValueRecursively(from, to) {\n      var result = Array.isArray(to) ? [] : {};\n\n      var calcEasedValue = function calcEasedValue(propName) {\n        var x = currentDuration / frameAnimation.duration;\n        var t = currentDuration;\n        var b = 1 * from[propName];\n        var c = to[propName] - from[propName];\n        var d = frameAnimation.duration;\n        return easing.getEasing(frameAnimation.easing)(x, t, b, c, d);\n      };\n\n      iteratorUtils.each(to, function (propName, endPropValue) {\n        if (\"string\" === typeof endPropValue && false === parseFloat(endPropValue, 10)) {\n          return true;\n        }\n\n        result[propName] = \"object\" === _typeof(endPropValue) ? calcValueRecursively(from[propName], endPropValue) : calcEasedValue(propName);\n      });\n      return result;\n    };\n\n    return calcValueRecursively(frameAnimation.from, frameAnimation.to);\n  },\n  _normalizeValue: function _normalizeValue(value) {\n    var numericValue = parseFloat(value, 10);\n\n    if (false === numericValue) {\n      return value;\n    }\n\n    return numericValue;\n  }\n};\nvar FallbackToNoAnimationStrategy = {\n  initAnimation: function initAnimation() {},\n  animate: function animate() {\n    return new Deferred().resolve().promise();\n  },\n  stop: noop,\n  isSynchronous: true\n};\n\nvar getAnimationStrategy = function getAnimationStrategy(config) {\n  config = config || {};\n  var animationStrategies = {\n    transition: support.transition() ? TransitionAnimationStrategy : FrameAnimationStrategy,\n    frame: FrameAnimationStrategy,\n    noAnimation: FallbackToNoAnimationStrategy\n  };\n  var strategy = config.strategy || \"transition\";\n\n  if (\"css\" === config.type && !support.transition()) {\n    strategy = \"noAnimation\";\n  }\n\n  return animationStrategies[strategy];\n};\n\nvar baseConfigValidator = function baseConfigValidator(config, animationType, validate, typeMessage) {\n  iteratorUtils.each([\"from\", \"to\"], function () {\n    if (!validate(config[this])) {\n      throw errors.Error(\"E0010\", animationType, this, typeMessage);\n    }\n  });\n};\n\nvar isObjectConfigValidator = function isObjectConfigValidator(config, animationType) {\n  return baseConfigValidator(config, animationType, function (target) {\n    return isPlainObject(target);\n  }, \"a plain object\");\n};\n\nvar isStringConfigValidator = function isStringConfigValidator(config, animationType) {\n  return baseConfigValidator(config, animationType, function (target) {\n    return \"string\" === typeof target;\n  }, \"a string\");\n};\n\nvar CustomAnimationConfigurator = {\n  setup: function setup() {}\n};\nvar CssAnimationConfigurator = {\n  validateConfig: function validateConfig(config) {\n    isStringConfigValidator(config, \"css\");\n  },\n  setup: function setup() {}\n};\nvar positionAliases = {\n  top: {\n    my: \"bottom center\",\n    at: \"top center\"\n  },\n  bottom: {\n    my: \"top center\",\n    at: \"bottom center\"\n  },\n  right: {\n    my: \"left center\",\n    at: \"right center\"\n  },\n  left: {\n    my: \"right center\",\n    at: \"left center\"\n  }\n};\nvar SlideAnimationConfigurator = {\n  validateConfig: function validateConfig(config) {\n    isObjectConfigValidator(config, \"slide\");\n  },\n  setup: function setup($element, config) {\n    var location = translator.locate($element);\n\n    if (\"slide\" !== config.type) {\n      var positioningConfig = \"slideIn\" === config.type ? config.from : config.to;\n      positioningConfig.position = extend({\n        of: window\n      }, positionAliases[config.direction]);\n      setupPosition($element, positioningConfig);\n    }\n\n    this._setUpConfig(location, config.from);\n\n    this._setUpConfig(location, config.to);\n\n    translator.clearCache($element);\n  },\n  _setUpConfig: function _setUpConfig(location, config) {\n    config.left = \"left\" in config ? config.left : \"+=0\";\n    config.top = \"top\" in config ? config.top : \"+=0\";\n\n    this._initNewPosition(location, config);\n  },\n  _initNewPosition: function _initNewPosition(location, config) {\n    var position = {\n      left: config.left,\n      top: config.top\n    };\n    delete config.left;\n    delete config.top;\n\n    var relativeValue = this._getRelativeValue(position.left);\n\n    if (void 0 !== relativeValue) {\n      position.left = relativeValue + location.left;\n    } else {\n      config.left = 0;\n    }\n\n    relativeValue = this._getRelativeValue(position.top);\n\n    if (void 0 !== relativeValue) {\n      position.top = relativeValue + location.top;\n    } else {\n      config.top = 0;\n    }\n\n    config[TRANSFORM_PROP] = translator.getTranslateCss({\n      x: position.left,\n      y: position.top\n    });\n  },\n  _getRelativeValue: function _getRelativeValue(value) {\n    var relativeValue;\n\n    if (\"string\" === typeof value && (relativeValue = RELATIVE_VALUE_REGEX.exec(value))) {\n      return parseInt(relativeValue[1] + \"1\") * relativeValue[2];\n    }\n  }\n};\nvar FadeAnimationConfigurator = {\n  setup: function setup($element, config) {\n    var from = config.from;\n    var fromOpacity = isPlainObject(from) ? config.skipElementInitialStyles ? 0 : $element.css(\"opacity\") : String(from);\n    var toOpacity;\n\n    switch (config.type) {\n      case \"fadeIn\":\n        toOpacity = 1;\n        break;\n\n      case \"fadeOut\":\n        toOpacity = 0;\n        break;\n\n      default:\n        toOpacity = String(config.to);\n    }\n\n    config.from = {\n      visibility: \"visible\",\n      opacity: fromOpacity\n    };\n    config.to = {\n      opacity: toOpacity\n    };\n  }\n};\nvar PopAnimationConfigurator = {\n  validateConfig: function validateConfig(config) {\n    isObjectConfigValidator(config, \"pop\");\n  },\n  setup: function setup($element, config) {\n    var from = config.from;\n    var to = config.to;\n    var fromOpacity = \"opacity\" in from ? from.opacity : $element.css(\"opacity\");\n    var toOpacity = \"opacity\" in to ? to.opacity : 1;\n    var fromScale = \"scale\" in from ? from.scale : 0;\n    var toScale = \"scale\" in to ? to.scale : 1;\n    config.from = {\n      opacity: fromOpacity\n    };\n    var translate = translator.getTranslate($element);\n    config.from[TRANSFORM_PROP] = this._getCssTransform(translate, fromScale);\n    config.to = {\n      opacity: toOpacity\n    };\n    config.to[TRANSFORM_PROP] = this._getCssTransform(translate, toScale);\n  },\n  _getCssTransform: function _getCssTransform(translate, scale) {\n    return translator.getTranslateCss(translate) + \"scale(\" + scale + \")\";\n  }\n};\nvar animationConfigurators = {\n  custom: CustomAnimationConfigurator,\n  slide: SlideAnimationConfigurator,\n  slideIn: SlideAnimationConfigurator,\n  slideOut: SlideAnimationConfigurator,\n  fade: FadeAnimationConfigurator,\n  fadeIn: FadeAnimationConfigurator,\n  fadeOut: FadeAnimationConfigurator,\n  pop: PopAnimationConfigurator,\n  css: CssAnimationConfigurator\n};\n\nvar getAnimationConfigurator = function getAnimationConfigurator(config) {\n  var result = animationConfigurators[config.type];\n\n  if (!result) {\n    throw errors.Error(\"E0011\", config.type);\n  }\n\n  return result;\n};\n\nvar defaultJSConfig = {\n  type: \"custom\",\n  from: {},\n  to: {},\n  duration: 400,\n  start: noop,\n  complete: noop,\n  easing: \"ease\",\n  delay: 0\n};\nvar defaultCssConfig = {\n  duration: 400,\n  easing: \"ease\",\n  delay: 0\n};\n\nvar setupAnimationOnElement = function setupAnimationOnElement() {\n  var animation = this;\n  var $element = animation.element;\n  var config = animation.config;\n  setupPosition($element, config.from);\n  setupPosition($element, config.to);\n  animation.configurator.setup($element, config);\n  $element.data(ANIM_DATA_KEY, animation);\n\n  if (fx.off) {\n    config.duration = 0;\n    config.delay = 0;\n  }\n\n  animation.strategy.initAnimation($element, config);\n\n  if (config.start) {\n    var element = getPublicElement($element);\n    config.start.apply(this, [element, config]);\n  }\n};\n\nvar onElementAnimationComplete = function onElementAnimationComplete(animation) {\n  var $element = animation.element;\n  var config = animation.config;\n  $element.removeData(ANIM_DATA_KEY);\n\n  if (config.complete) {\n    var element = getPublicElement($element);\n    config.complete.apply(this, [element, config]);\n  }\n\n  animation.deferred.resolveWith(this, [$element, config]);\n};\n\nvar startAnimationOnElement = function startAnimationOnElement() {\n  var animation = this;\n  var $element = animation.element;\n  var config = animation.config;\n  animation.isStarted = true;\n  return animation.strategy.animate($element, config).done(function () {\n    onElementAnimationComplete(animation);\n  }).fail(function () {\n    animation.deferred.rejectWith(this, [$element, config]);\n  });\n};\n\nvar stopAnimationOnElement = function stopAnimationOnElement(jumpToEnd) {\n  var animation = this;\n  var $element = animation.element;\n  var config = animation.config;\n  clearTimeout(animation.startTimeout);\n\n  if (!animation.isStarted) {\n    animation.start();\n  }\n\n  animation.strategy.stop($element, config, jumpToEnd);\n};\n\nvar scopedRemoveEvent = eventUtils.addNamespace(removeEvent, \"dxFXStartAnimation\");\n\nvar subscribeToRemoveEvent = function subscribeToRemoveEvent(animation) {\n  eventsEngine.off(animation.element, scopedRemoveEvent);\n  eventsEngine.on(animation.element, scopedRemoveEvent, function () {\n    fx.stop(animation.element);\n  });\n  animation.deferred.always(function () {\n    eventsEngine.off(animation.element, scopedRemoveEvent);\n  });\n};\n\nvar createAnimation = function createAnimation(element, initialConfig) {\n  var defaultConfig = \"css\" === initialConfig.type ? defaultCssConfig : defaultJSConfig;\n  var config = extend(true, {}, defaultConfig, initialConfig);\n  var configurator = getAnimationConfigurator(config);\n  var strategy = getAnimationStrategy(config);\n  var animation = {\n    element: $(element),\n    config: config,\n    configurator: configurator,\n    strategy: strategy,\n    isSynchronous: strategy.isSynchronous,\n    setup: setupAnimationOnElement,\n    start: startAnimationOnElement,\n    stop: stopAnimationOnElement,\n    deferred: new Deferred()\n  };\n\n  if (isFunction(configurator.validateConfig)) {\n    configurator.validateConfig(config);\n  }\n\n  subscribeToRemoveEvent(animation);\n  return animation;\n};\n\nvar animate = function animate(element, config) {\n  var $element = $(element);\n\n  if (!$element.length) {\n    return new Deferred().resolve().promise();\n  }\n\n  var animation = createAnimation($element, config);\n  pushInAnimationQueue($element, animation);\n  return animation.deferred.promise();\n};\n\nvar pushInAnimationQueue = function pushInAnimationQueue($element, animation) {\n  var queueData = getAnimQueueData($element);\n  writeAnimQueueData($element, queueData);\n  queueData.push(animation);\n\n  if (!isAnimating($element)) {\n    shiftFromAnimationQueue($element, queueData);\n  }\n};\n\nvar getAnimQueueData = function getAnimQueueData($element) {\n  return $element.data(ANIM_QUEUE_KEY) || [];\n};\n\nvar writeAnimQueueData = function writeAnimQueueData($element, queueData) {\n  $element.data(ANIM_QUEUE_KEY, queueData);\n};\n\nvar destroyAnimQueueData = function destroyAnimQueueData($element) {\n  $element.removeData(ANIM_QUEUE_KEY);\n};\n\nvar isAnimating = function isAnimating($element) {\n  return !!$element.data(ANIM_DATA_KEY);\n};\n\nvar shiftFromAnimationQueue = function shiftFromAnimationQueue($element, queueData) {\n  queueData = getAnimQueueData($element);\n\n  if (!queueData.length) {\n    return;\n  }\n\n  var animation = queueData.shift();\n\n  if (0 === queueData.length) {\n    destroyAnimQueueData($element);\n  }\n\n  executeAnimation(animation).done(function () {\n    if (!isAnimating($element)) {\n      shiftFromAnimationQueue($element);\n    }\n  });\n};\n\nvar executeAnimation = function executeAnimation(animation) {\n  animation.setup();\n\n  if (fx.off || animation.isSynchronous) {\n    animation.start();\n  } else {\n    animation.startTimeout = setTimeout(function () {\n      animation.start();\n    });\n  }\n\n  return animation.deferred.promise();\n};\n\nvar setupPosition = function setupPosition($element, config) {\n  if (!config || !config.position) {\n    return;\n  }\n\n  var win = $(window);\n  var left = 0;\n  var top = 0;\n  var position = positionUtils.calculate($element, config.position);\n  var offset = $element.offset();\n  var currentPosition = $element.position();\n\n  if (currentPosition.top > offset.top) {\n    top = win.scrollTop();\n  }\n\n  if (currentPosition.left > offset.left) {\n    left = win.scrollLeft();\n  }\n\n  extend(config, {\n    left: position.h.location - offset.left + currentPosition.left - left,\n    top: position.v.location - offset.top + currentPosition.top - top\n  });\n  delete config.position;\n};\n\nvar setProps = function setProps($element, props) {\n  iteratorUtils.each(props, function (key, value) {\n    try {\n      $element.css(key, typeUtils.isFunction(value) ? value() : value);\n    } catch (e) {}\n  });\n};\n\nvar stop = function stop(element, jumpToEnd) {\n  var $element = $(element);\n  var queueData = getAnimQueueData($element);\n  iteratorUtils.each(queueData, function (_, animation) {\n    animation.config.delay = 0;\n    animation.config.duration = 0;\n    animation.isSynchronous = true;\n  });\n\n  if (!isAnimating($element)) {\n    shiftFromAnimationQueue($element, queueData);\n  }\n\n  var animation = $element.data(ANIM_DATA_KEY);\n\n  if (animation) {\n    animation.stop(jumpToEnd);\n  }\n\n  $element.removeData(ANIM_DATA_KEY);\n  destroyAnimQueueData($element);\n};\n\nvar fx = {\n  off: false,\n  animationTypes: animationConfigurators,\n  animate: animate,\n  createAnimation: createAnimation,\n  isAnimating: isAnimating,\n  stop: stop,\n  _simulatedTransitionEndDelay: 100\n};\nmodule.exports = fx;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/animation/fx.js"],"names":["Symbol","_typeof","obj","$","require","window","eventsEngine","errors","getPublicElement","extend","typeUtils","iteratorUtils","translator","easing","animationFrame","support","positionUtils","removeEvent","eventUtils","deferredUtils","when","Deferred","removeEventName","isFunction","isPlainObject","noop","RELATIVE_VALUE_REGEX","ANIM_DATA_KEY","ANIM_QUEUE_KEY","TRANSFORM_PROP","TransitionAnimationStrategy","initAnimation","$element","transitionProperty","config","setProps","that","deferred","cleanupWhen","finish","animate","_completeAnimationCallback","startTime","Date","transitionEndFired","simulatedTransitionEndFired","transitionEndEventName","clearTimeout","waitForJSCompleteTimer","setTimeout","simulatedEndEventTimer","fx","_startAnimation","transitionDelay","transitionDuration","transitionTimingFunction","_finishTransition","_cleanup","stop","FrameAnimationStrategy","to","from","currentValue","duration","draw","prop","_parseTransform","result","transformString","translateData","scaleData","part","rotateData","parseFloat","frameAnimation","_animationStep","now","_calcStepValue","calcValueRecursively","Array","calcEasedValue","x","currentDuration","t","b","c","d","_normalizeValue","numericValue","FallbackToNoAnimationStrategy","isSynchronous","getAnimationStrategy","animationStrategies","transition","frame","noAnimation","strategy","baseConfigValidator","validate","isObjectConfigValidator","isStringConfigValidator","CustomAnimationConfigurator","setup","CssAnimationConfigurator","validateConfig","positionAliases","top","my","at","bottom","right","left","SlideAnimationConfigurator","location","positioningConfig","of","setupPosition","_setUpConfig","_initNewPosition","position","relativeValue","y","_getRelativeValue","parseInt","FadeAnimationConfigurator","fromOpacity","String","toOpacity","visibility","opacity","PopAnimationConfigurator","fromScale","toScale","translate","_getCssTransform","animationConfigurators","custom","slide","slideIn","slideOut","fade","fadeIn","fadeOut","pop","css","getAnimationConfigurator","defaultJSConfig","type","start","complete","delay","defaultCssConfig","setupAnimationOnElement","animation","element","onElementAnimationComplete","startAnimationOnElement","stopAnimationOnElement","scopedRemoveEvent","subscribeToRemoveEvent","createAnimation","defaultConfig","initialConfig","configurator","pushInAnimationQueue","queueData","getAnimQueueData","writeAnimQueueData","isAnimating","shiftFromAnimationQueue","destroyAnimQueueData","executeAnimation","win","offset","currentPosition","value","off","animationTypes","_simulatedTransitionEndDelay","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (animation/fx.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nvar $ = require(\"../core/renderer\");\r\nvar window = require(\"../core/utils/window\").getWindow();\r\nvar eventsEngine = require(\"../events/core/events_engine\");\r\nvar errors = require(\"../core/errors\");\r\nvar getPublicElement = require(\"../core/utils/dom\").getPublicElement;\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar typeUtils = require(\"../core/utils/type\");\r\nvar iteratorUtils = require(\"../core/utils/iterator\");\r\nvar translator = require(\"./translator\");\r\nvar easing = require(\"./easing\");\r\nvar animationFrame = require(\"./frame\");\r\nvar support = require(\"../core/utils/support\");\r\nvar positionUtils = require(\"./position\");\r\nvar removeEvent = require(\"../core/remove_event\");\r\nvar eventUtils = require(\"../events/utils\");\r\nvar deferredUtils = require(\"../core/utils/deferred\");\r\nvar when = deferredUtils.when;\r\nvar Deferred = deferredUtils.Deferred;\r\nvar removeEventName = eventUtils.addNamespace(removeEvent, \"dxFX\");\r\nvar isFunction = typeUtils.isFunction;\r\nvar isPlainObject = typeUtils.isPlainObject;\r\nvar noop = require(\"../core/utils/common\").noop;\r\nvar RELATIVE_VALUE_REGEX = /^([+-])=(.*)/i;\r\nvar ANIM_DATA_KEY = \"dxAnimData\";\r\nvar ANIM_QUEUE_KEY = \"dxAnimQueue\";\r\nvar TRANSFORM_PROP = \"transform\";\r\nvar TransitionAnimationStrategy = {\r\n    initAnimation: function($element, config) {\r\n        $element.css({\r\n            transitionProperty: \"none\"\r\n        });\r\n        if (\"string\" === typeof config.from) {\r\n            $element.addClass(config.from)\r\n        } else {\r\n            setProps($element, config.from)\r\n        }\r\n        var that = this;\r\n        var deferred = new Deferred;\r\n        var cleanupWhen = config.cleanupWhen;\r\n        config.transitionAnimation = {\r\n            deferred: deferred,\r\n            finish: function() {\r\n                that._finishTransition($element);\r\n                if (cleanupWhen) {\r\n                    when(deferred, cleanupWhen).always(function() {\r\n                        that._cleanup($element, config)\r\n                    })\r\n                } else {\r\n                    that._cleanup($element, config)\r\n                }\r\n                deferred.resolveWith($element, [config, $element])\r\n            }\r\n        };\r\n        this._completeAnimationCallback($element, config).done(function() {\r\n            config.transitionAnimation.finish()\r\n        }).fail(function() {\r\n            deferred.rejectWith($element, [config, $element])\r\n        });\r\n        if (!config.duration) {\r\n            config.transitionAnimation.finish()\r\n        }\r\n        $element.css(\"transform\")\r\n    },\r\n    animate: function($element, config) {\r\n        this._startAnimation($element, config);\r\n        return config.transitionAnimation.deferred.promise()\r\n    },\r\n    _completeAnimationCallback: function($element, config) {\r\n        var that = this;\r\n        var startTime = Date.now() + config.delay;\r\n        var deferred = new Deferred;\r\n        var transitionEndFired = new Deferred;\r\n        var simulatedTransitionEndFired = new Deferred;\r\n        var simulatedEndEventTimer;\r\n        var waitForJSCompleteTimer;\r\n        var transitionEndEventName = support.transitionEndEventName() + \".dxFX\";\r\n        config.transitionAnimation.cleanup = function() {\r\n            clearTimeout(simulatedEndEventTimer);\r\n            clearTimeout(waitForJSCompleteTimer);\r\n            eventsEngine.off($element, transitionEndEventName);\r\n            eventsEngine.off($element, removeEventName)\r\n        };\r\n        eventsEngine.one($element, transitionEndEventName, function() {\r\n            if (Date.now() - startTime >= config.duration) {\r\n                transitionEndFired.reject()\r\n            }\r\n        });\r\n        eventsEngine.off($element, removeEventName);\r\n        eventsEngine.on($element, removeEventName, function() {\r\n            that.stop($element, config);\r\n            deferred.reject()\r\n        });\r\n        waitForJSCompleteTimer = setTimeout(function() {\r\n            simulatedEndEventTimer = setTimeout(function() {\r\n                simulatedTransitionEndFired.reject()\r\n            }, config.duration + config.delay + fx._simulatedTransitionEndDelay);\r\n            when(transitionEndFired, simulatedTransitionEndFired).fail(function() {\r\n                deferred.resolve()\r\n            }.bind(this))\r\n        });\r\n        return deferred.promise()\r\n    },\r\n    _startAnimation: function($element, config) {\r\n        $element.css({\r\n            transitionProperty: \"all\",\r\n            transitionDelay: config.delay + \"ms\",\r\n            transitionDuration: config.duration + \"ms\",\r\n            transitionTimingFunction: config.easing\r\n        });\r\n        if (\"string\" === typeof config.to) {\r\n            $element[0].className += \" \" + config.to\r\n        } else {\r\n            if (config.to) {\r\n                setProps($element, config.to)\r\n            }\r\n        }\r\n    },\r\n    _finishTransition: function($element) {\r\n        $element.css(\"transition\", \"none\")\r\n    },\r\n    _cleanup: function($element, config) {\r\n        config.transitionAnimation.cleanup();\r\n        if (\"string\" === typeof config.from) {\r\n            $element.removeClass(config.from);\r\n            $element.removeClass(config.to)\r\n        }\r\n    },\r\n    stop: function($element, config, jumpToEnd) {\r\n        if (!config) {\r\n            return\r\n        }\r\n        if (jumpToEnd) {\r\n            config.transitionAnimation.finish()\r\n        } else {\r\n            if (isPlainObject(config.to)) {\r\n                iteratorUtils.each(config.to, function(key) {\r\n                    $element.css(key, $element.css(key))\r\n                })\r\n            }\r\n            this._finishTransition($element);\r\n            this._cleanup($element, config)\r\n        }\r\n    }\r\n};\r\nvar FrameAnimationStrategy = {\r\n    initAnimation: function($element, config) {\r\n        setProps($element, config.from)\r\n    },\r\n    animate: function($element, config) {\r\n        var deferred = new Deferred;\r\n        var that = this;\r\n        if (!config) {\r\n            return deferred.reject().promise()\r\n        }\r\n        iteratorUtils.each(config.to, function(prop) {\r\n            if (void 0 === config.from[prop]) {\r\n                config.from[prop] = that._normalizeValue($element.css(prop))\r\n            }\r\n        });\r\n        if (config.to[TRANSFORM_PROP]) {\r\n            config.from[TRANSFORM_PROP] = that._parseTransform(config.from[TRANSFORM_PROP]);\r\n            config.to[TRANSFORM_PROP] = that._parseTransform(config.to[TRANSFORM_PROP])\r\n        }\r\n        config.frameAnimation = {\r\n            to: config.to,\r\n            from: config.from,\r\n            currentValue: config.from,\r\n            easing: easing.convertTransitionTimingFuncToEasing(config.easing),\r\n            duration: config.duration,\r\n            startTime: (new Date).valueOf(),\r\n            finish: function() {\r\n                this.currentValue = this.to;\r\n                this.draw();\r\n                animationFrame.cancelAnimationFrame(config.frameAnimation.animationFrameId);\r\n                deferred.resolve()\r\n            },\r\n            draw: function() {\r\n                if (config.draw) {\r\n                    config.draw(this.currentValue);\r\n                    return\r\n                }\r\n                var currentValue = extend({}, this.currentValue);\r\n                if (currentValue[TRANSFORM_PROP]) {\r\n                    currentValue[TRANSFORM_PROP] = iteratorUtils.map(currentValue[TRANSFORM_PROP], function(value, prop) {\r\n                        if (\"translate\" === prop) {\r\n                            return translator.getTranslateCss(value)\r\n                        } else {\r\n                            if (\"scale\" === prop) {\r\n                                return \"scale(\" + value + \")\"\r\n                            } else {\r\n                                if (\"rotate\" === prop.substr(0, prop.length - 1)) {\r\n                                    return prop + \"(\" + value + \"deg)\"\r\n                                }\r\n                            }\r\n                        }\r\n                    }).join(\" \")\r\n                }\r\n                $element.css(currentValue)\r\n            }\r\n        };\r\n        if (config.delay) {\r\n            config.frameAnimation.startTime += config.delay;\r\n            config.frameAnimation.delayTimeout = setTimeout(function() {\r\n                that._startAnimation($element, config)\r\n            }, config.delay)\r\n        } else {\r\n            that._startAnimation($element, config)\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _startAnimation: function($element, config) {\r\n        eventsEngine.off($element, removeEventName);\r\n        eventsEngine.on($element, removeEventName, function() {\r\n            if (config.frameAnimation) {\r\n                animationFrame.cancelAnimationFrame(config.frameAnimation.animationFrameId)\r\n            }\r\n        });\r\n        this._animationStep($element, config)\r\n    },\r\n    _parseTransform: function(transformString) {\r\n        var result = {};\r\n        iteratorUtils.each(transformString.match(/(\\w|\\d)+\\([^)]*\\)\\s*/g), function(i, part) {\r\n            var translateData = translator.parseTranslate(part);\r\n            var scaleData = part.match(/scale\\((.+?)\\)/);\r\n            var rotateData = part.match(/(rotate.)\\((.+)deg\\)/);\r\n            if (translateData) {\r\n                result.translate = translateData\r\n            }\r\n            if (scaleData && scaleData[1]) {\r\n                result.scale = parseFloat(scaleData[1])\r\n            }\r\n            if (rotateData && rotateData[1]) {\r\n                result[rotateData[1]] = parseFloat(rotateData[2])\r\n            }\r\n        });\r\n        return result\r\n    },\r\n    stop: function($element, config, jumpToEnd) {\r\n        var frameAnimation = config && config.frameAnimation;\r\n        if (!frameAnimation) {\r\n            return\r\n        }\r\n        animationFrame.cancelAnimationFrame(frameAnimation.animationFrameId);\r\n        clearTimeout(frameAnimation.delayTimeout);\r\n        if (jumpToEnd) {\r\n            frameAnimation.finish()\r\n        }\r\n        delete config.frameAnimation\r\n    },\r\n    _animationStep: function($element, config) {\r\n        var frameAnimation = config && config.frameAnimation;\r\n        if (!frameAnimation) {\r\n            return\r\n        }\r\n        var now = (new Date).valueOf();\r\n        if (now >= frameAnimation.startTime + frameAnimation.duration) {\r\n            frameAnimation.finish();\r\n            return\r\n        }\r\n        frameAnimation.currentValue = this._calcStepValue(frameAnimation, now - frameAnimation.startTime);\r\n        frameAnimation.draw();\r\n        var that = this;\r\n        frameAnimation.animationFrameId = animationFrame.requestAnimationFrame(function() {\r\n            that._animationStep($element, config)\r\n        })\r\n    },\r\n    _calcStepValue: function(frameAnimation, currentDuration) {\r\n        var calcValueRecursively = function calcValueRecursively(from, to) {\r\n            var result = Array.isArray(to) ? [] : {};\r\n            var calcEasedValue = function(propName) {\r\n                var x = currentDuration / frameAnimation.duration;\r\n                var t = currentDuration;\r\n                var b = 1 * from[propName];\r\n                var c = to[propName] - from[propName];\r\n                var d = frameAnimation.duration;\r\n                return easing.getEasing(frameAnimation.easing)(x, t, b, c, d)\r\n            };\r\n            iteratorUtils.each(to, function(propName, endPropValue) {\r\n                if (\"string\" === typeof endPropValue && false === parseFloat(endPropValue, 10)) {\r\n                    return true\r\n                }\r\n                result[propName] = \"object\" === _typeof(endPropValue) ? calcValueRecursively(from[propName], endPropValue) : calcEasedValue(propName)\r\n            });\r\n            return result\r\n        };\r\n        return calcValueRecursively(frameAnimation.from, frameAnimation.to)\r\n    },\r\n    _normalizeValue: function(value) {\r\n        var numericValue = parseFloat(value, 10);\r\n        if (false === numericValue) {\r\n            return value\r\n        }\r\n        return numericValue\r\n    }\r\n};\r\nvar FallbackToNoAnimationStrategy = {\r\n    initAnimation: function() {},\r\n    animate: function() {\r\n        return (new Deferred).resolve().promise()\r\n    },\r\n    stop: noop,\r\n    isSynchronous: true\r\n};\r\nvar getAnimationStrategy = function(config) {\r\n    config = config || {};\r\n    var animationStrategies = {\r\n        transition: support.transition() ? TransitionAnimationStrategy : FrameAnimationStrategy,\r\n        frame: FrameAnimationStrategy,\r\n        noAnimation: FallbackToNoAnimationStrategy\r\n    };\r\n    var strategy = config.strategy || \"transition\";\r\n    if (\"css\" === config.type && !support.transition()) {\r\n        strategy = \"noAnimation\"\r\n    }\r\n    return animationStrategies[strategy]\r\n};\r\nvar baseConfigValidator = function(config, animationType, validate, typeMessage) {\r\n    iteratorUtils.each([\"from\", \"to\"], function() {\r\n        if (!validate(config[this])) {\r\n            throw errors.Error(\"E0010\", animationType, this, typeMessage)\r\n        }\r\n    })\r\n};\r\nvar isObjectConfigValidator = function(config, animationType) {\r\n    return baseConfigValidator(config, animationType, function(target) {\r\n        return isPlainObject(target)\r\n    }, \"a plain object\")\r\n};\r\nvar isStringConfigValidator = function(config, animationType) {\r\n    return baseConfigValidator(config, animationType, function(target) {\r\n        return \"string\" === typeof target\r\n    }, \"a string\")\r\n};\r\nvar CustomAnimationConfigurator = {\r\n    setup: function() {}\r\n};\r\nvar CssAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isStringConfigValidator(config, \"css\")\r\n    },\r\n    setup: function() {}\r\n};\r\nvar positionAliases = {\r\n    top: {\r\n        my: \"bottom center\",\r\n        at: \"top center\"\r\n    },\r\n    bottom: {\r\n        my: \"top center\",\r\n        at: \"bottom center\"\r\n    },\r\n    right: {\r\n        my: \"left center\",\r\n        at: \"right center\"\r\n    },\r\n    left: {\r\n        my: \"right center\",\r\n        at: \"left center\"\r\n    }\r\n};\r\nvar SlideAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isObjectConfigValidator(config, \"slide\")\r\n    },\r\n    setup: function($element, config) {\r\n        var location = translator.locate($element);\r\n        if (\"slide\" !== config.type) {\r\n            var positioningConfig = \"slideIn\" === config.type ? config.from : config.to;\r\n            positioningConfig.position = extend({\r\n                of: window\r\n            }, positionAliases[config.direction]);\r\n            setupPosition($element, positioningConfig)\r\n        }\r\n        this._setUpConfig(location, config.from);\r\n        this._setUpConfig(location, config.to);\r\n        translator.clearCache($element)\r\n    },\r\n    _setUpConfig: function(location, config) {\r\n        config.left = \"left\" in config ? config.left : \"+=0\";\r\n        config.top = \"top\" in config ? config.top : \"+=0\";\r\n        this._initNewPosition(location, config)\r\n    },\r\n    _initNewPosition: function(location, config) {\r\n        var position = {\r\n            left: config.left,\r\n            top: config.top\r\n        };\r\n        delete config.left;\r\n        delete config.top;\r\n        var relativeValue = this._getRelativeValue(position.left);\r\n        if (void 0 !== relativeValue) {\r\n            position.left = relativeValue + location.left\r\n        } else {\r\n            config.left = 0\r\n        }\r\n        relativeValue = this._getRelativeValue(position.top);\r\n        if (void 0 !== relativeValue) {\r\n            position.top = relativeValue + location.top\r\n        } else {\r\n            config.top = 0\r\n        }\r\n        config[TRANSFORM_PROP] = translator.getTranslateCss({\r\n            x: position.left,\r\n            y: position.top\r\n        })\r\n    },\r\n    _getRelativeValue: function(value) {\r\n        var relativeValue;\r\n        if (\"string\" === typeof value && (relativeValue = RELATIVE_VALUE_REGEX.exec(value))) {\r\n            return parseInt(relativeValue[1] + \"1\") * relativeValue[2]\r\n        }\r\n    }\r\n};\r\nvar FadeAnimationConfigurator = {\r\n    setup: function($element, config) {\r\n        var from = config.from;\r\n        var fromOpacity = isPlainObject(from) ? config.skipElementInitialStyles ? 0 : $element.css(\"opacity\") : String(from);\r\n        var toOpacity;\r\n        switch (config.type) {\r\n            case \"fadeIn\":\r\n                toOpacity = 1;\r\n                break;\r\n            case \"fadeOut\":\r\n                toOpacity = 0;\r\n                break;\r\n            default:\r\n                toOpacity = String(config.to)\r\n        }\r\n        config.from = {\r\n            visibility: \"visible\",\r\n            opacity: fromOpacity\r\n        };\r\n        config.to = {\r\n            opacity: toOpacity\r\n        }\r\n    }\r\n};\r\nvar PopAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isObjectConfigValidator(config, \"pop\")\r\n    },\r\n    setup: function($element, config) {\r\n        var from = config.from;\r\n        var to = config.to;\r\n        var fromOpacity = \"opacity\" in from ? from.opacity : $element.css(\"opacity\");\r\n        var toOpacity = \"opacity\" in to ? to.opacity : 1;\r\n        var fromScale = \"scale\" in from ? from.scale : 0;\r\n        var toScale = \"scale\" in to ? to.scale : 1;\r\n        config.from = {\r\n            opacity: fromOpacity\r\n        };\r\n        var translate = translator.getTranslate($element);\r\n        config.from[TRANSFORM_PROP] = this._getCssTransform(translate, fromScale);\r\n        config.to = {\r\n            opacity: toOpacity\r\n        };\r\n        config.to[TRANSFORM_PROP] = this._getCssTransform(translate, toScale)\r\n    },\r\n    _getCssTransform: function(translate, scale) {\r\n        return translator.getTranslateCss(translate) + \"scale(\" + scale + \")\"\r\n    }\r\n};\r\nvar animationConfigurators = {\r\n    custom: CustomAnimationConfigurator,\r\n    slide: SlideAnimationConfigurator,\r\n    slideIn: SlideAnimationConfigurator,\r\n    slideOut: SlideAnimationConfigurator,\r\n    fade: FadeAnimationConfigurator,\r\n    fadeIn: FadeAnimationConfigurator,\r\n    fadeOut: FadeAnimationConfigurator,\r\n    pop: PopAnimationConfigurator,\r\n    css: CssAnimationConfigurator\r\n};\r\nvar getAnimationConfigurator = function(config) {\r\n    var result = animationConfigurators[config.type];\r\n    if (!result) {\r\n        throw errors.Error(\"E0011\", config.type)\r\n    }\r\n    return result\r\n};\r\nvar defaultJSConfig = {\r\n    type: \"custom\",\r\n    from: {},\r\n    to: {},\r\n    duration: 400,\r\n    start: noop,\r\n    complete: noop,\r\n    easing: \"ease\",\r\n    delay: 0\r\n};\r\nvar defaultCssConfig = {\r\n    duration: 400,\r\n    easing: \"ease\",\r\n    delay: 0\r\n};\r\nvar setupAnimationOnElement = function() {\r\n    var animation = this;\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    setupPosition($element, config.from);\r\n    setupPosition($element, config.to);\r\n    animation.configurator.setup($element, config);\r\n    $element.data(ANIM_DATA_KEY, animation);\r\n    if (fx.off) {\r\n        config.duration = 0;\r\n        config.delay = 0\r\n    }\r\n    animation.strategy.initAnimation($element, config);\r\n    if (config.start) {\r\n        var element = getPublicElement($element);\r\n        config.start.apply(this, [element, config])\r\n    }\r\n};\r\nvar onElementAnimationComplete = function(animation) {\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    $element.removeData(ANIM_DATA_KEY);\r\n    if (config.complete) {\r\n        var element = getPublicElement($element);\r\n        config.complete.apply(this, [element, config])\r\n    }\r\n    animation.deferred.resolveWith(this, [$element, config])\r\n};\r\nvar startAnimationOnElement = function() {\r\n    var animation = this;\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    animation.isStarted = true;\r\n    return animation.strategy.animate($element, config).done(function() {\r\n        onElementAnimationComplete(animation)\r\n    }).fail(function() {\r\n        animation.deferred.rejectWith(this, [$element, config])\r\n    })\r\n};\r\nvar stopAnimationOnElement = function(jumpToEnd) {\r\n    var animation = this;\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    clearTimeout(animation.startTimeout);\r\n    if (!animation.isStarted) {\r\n        animation.start()\r\n    }\r\n    animation.strategy.stop($element, config, jumpToEnd)\r\n};\r\nvar scopedRemoveEvent = eventUtils.addNamespace(removeEvent, \"dxFXStartAnimation\");\r\nvar subscribeToRemoveEvent = function(animation) {\r\n    eventsEngine.off(animation.element, scopedRemoveEvent);\r\n    eventsEngine.on(animation.element, scopedRemoveEvent, function() {\r\n        fx.stop(animation.element)\r\n    });\r\n    animation.deferred.always(function() {\r\n        eventsEngine.off(animation.element, scopedRemoveEvent)\r\n    })\r\n};\r\nvar createAnimation = function(element, initialConfig) {\r\n    var defaultConfig = \"css\" === initialConfig.type ? defaultCssConfig : defaultJSConfig;\r\n    var config = extend(true, {}, defaultConfig, initialConfig);\r\n    var configurator = getAnimationConfigurator(config);\r\n    var strategy = getAnimationStrategy(config);\r\n    var animation = {\r\n        element: $(element),\r\n        config: config,\r\n        configurator: configurator,\r\n        strategy: strategy,\r\n        isSynchronous: strategy.isSynchronous,\r\n        setup: setupAnimationOnElement,\r\n        start: startAnimationOnElement,\r\n        stop: stopAnimationOnElement,\r\n        deferred: new Deferred\r\n    };\r\n    if (isFunction(configurator.validateConfig)) {\r\n        configurator.validateConfig(config)\r\n    }\r\n    subscribeToRemoveEvent(animation);\r\n    return animation\r\n};\r\nvar animate = function(element, config) {\r\n    var $element = $(element);\r\n    if (!$element.length) {\r\n        return (new Deferred).resolve().promise()\r\n    }\r\n    var animation = createAnimation($element, config);\r\n    pushInAnimationQueue($element, animation);\r\n    return animation.deferred.promise()\r\n};\r\nvar pushInAnimationQueue = function($element, animation) {\r\n    var queueData = getAnimQueueData($element);\r\n    writeAnimQueueData($element, queueData);\r\n    queueData.push(animation);\r\n    if (!isAnimating($element)) {\r\n        shiftFromAnimationQueue($element, queueData)\r\n    }\r\n};\r\nvar getAnimQueueData = function($element) {\r\n    return $element.data(ANIM_QUEUE_KEY) || []\r\n};\r\nvar writeAnimQueueData = function($element, queueData) {\r\n    $element.data(ANIM_QUEUE_KEY, queueData)\r\n};\r\nvar destroyAnimQueueData = function($element) {\r\n    $element.removeData(ANIM_QUEUE_KEY)\r\n};\r\nvar isAnimating = function($element) {\r\n    return !!$element.data(ANIM_DATA_KEY)\r\n};\r\nvar shiftFromAnimationQueue = function shiftFromAnimationQueue($element, queueData) {\r\n    queueData = getAnimQueueData($element);\r\n    if (!queueData.length) {\r\n        return\r\n    }\r\n    var animation = queueData.shift();\r\n    if (0 === queueData.length) {\r\n        destroyAnimQueueData($element)\r\n    }\r\n    executeAnimation(animation).done(function() {\r\n        if (!isAnimating($element)) {\r\n            shiftFromAnimationQueue($element)\r\n        }\r\n    })\r\n};\r\nvar executeAnimation = function(animation) {\r\n    animation.setup();\r\n    if (fx.off || animation.isSynchronous) {\r\n        animation.start()\r\n    } else {\r\n        animation.startTimeout = setTimeout(function() {\r\n            animation.start()\r\n        })\r\n    }\r\n    return animation.deferred.promise()\r\n};\r\nvar setupPosition = function($element, config) {\r\n    if (!config || !config.position) {\r\n        return\r\n    }\r\n    var win = $(window);\r\n    var left = 0;\r\n    var top = 0;\r\n    var position = positionUtils.calculate($element, config.position);\r\n    var offset = $element.offset();\r\n    var currentPosition = $element.position();\r\n    if (currentPosition.top > offset.top) {\r\n        top = win.scrollTop()\r\n    }\r\n    if (currentPosition.left > offset.left) {\r\n        left = win.scrollLeft()\r\n    }\r\n    extend(config, {\r\n        left: position.h.location - offset.left + currentPosition.left - left,\r\n        top: position.v.location - offset.top + currentPosition.top - top\r\n    });\r\n    delete config.position\r\n};\r\nvar setProps = function($element, props) {\r\n    iteratorUtils.each(props, function(key, value) {\r\n        try {\r\n            $element.css(key, typeUtils.isFunction(value) ? value() : value)\r\n        } catch (e) {}\r\n    })\r\n};\r\nvar stop = function(element, jumpToEnd) {\r\n    var $element = $(element);\r\n    var queueData = getAnimQueueData($element);\r\n    iteratorUtils.each(queueData, function(_, animation) {\r\n        animation.config.delay = 0;\r\n        animation.config.duration = 0;\r\n        animation.isSynchronous = true\r\n    });\r\n    if (!isAnimating($element)) {\r\n        shiftFromAnimationQueue($element, queueData)\r\n    }\r\n    var animation = $element.data(ANIM_DATA_KEY);\r\n    if (animation) {\r\n        animation.stop(jumpToEnd)\r\n    }\r\n    $element.removeData(ANIM_DATA_KEY);\r\n    destroyAnimQueueData($element)\r\n};\r\nvar fx = {\r\n    off: false,\r\n    animationTypes: animationConfigurators,\r\n    animate: animate,\r\n    createAnimation: createAnimation,\r\n    isAnimating: isAnimating,\r\n    stop: stop,\r\n    _simulatedTransitionEndDelay: 100\r\n};\r\nmodule.exports = fx;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}