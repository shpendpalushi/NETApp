{"ast":null,"code":"/**\r\n * DevExtreme (viz/chart_components/crosshair.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _utils = require(\"../core/utils\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar math = Math;\nvar mathAbs = math.abs;\nvar mathMin = math.min;\nvar mathMax = math.max;\nvar mathFloor = math.floor;\nvar HORIZONTAL = \"horizontal\";\nvar VERTICAL = \"vertical\";\nvar LABEL_BACKGROUND_PADDING_X = 8;\nvar LABEL_BACKGROUND_PADDING_Y = 4;\nvar CENTER = \"center\";\nvar RIGHT = \"right\";\nvar LEFT = \"left\";\nvar TOP = \"top\";\nvar BOTTOM = \"bottom\";\n\nexports.getMargins = function () {\n  return {\n    x: LABEL_BACKGROUND_PADDING_X,\n    y: LABEL_BACKGROUND_PADDING_Y\n  };\n};\n\nfunction getRectangleBBox(bBox) {\n  return {\n    x: bBox.x - LABEL_BACKGROUND_PADDING_X,\n    y: bBox.y - LABEL_BACKGROUND_PADDING_Y,\n    width: bBox.width + 2 * LABEL_BACKGROUND_PADDING_X,\n    height: bBox.height + 2 * LABEL_BACKGROUND_PADDING_Y\n  };\n}\n\nfunction getLabelCheckerPosition(x, y, isHorizontal, canvas) {\n  var params = isHorizontal ? [\"x\", \"width\", \"y\", \"height\", y, 0] : [\"y\", \"height\", \"x\", \"width\", x, 1];\n  return function (bBox, position, coord) {\n    var labelCoord = {\n      x: coord.x,\n      y: coord.y\n    };\n    var rectangleBBox = getRectangleBBox(bBox);\n    var delta = isHorizontal ? coord.y - bBox.y - bBox.height / 2 : coord.y - bBox.y;\n    labelCoord.y = isHorizontal || !isHorizontal && position === BOTTOM ? coord.y + delta : coord.y;\n\n    if (rectangleBBox[params[0]] < 0) {\n      labelCoord[params[0]] -= rectangleBBox[params[0]];\n    } else {\n      if (rectangleBBox[params[0]] + rectangleBBox[params[1]] + delta * params[5] > canvas[params[1]]) {\n        labelCoord[params[0]] -= rectangleBBox[params[0]] + rectangleBBox[params[1]] + delta * params[5] - canvas[params[1]];\n      }\n    }\n\n    if (params[4] - rectangleBBox[params[3]] / 2 < 0) {\n      labelCoord[params[2]] -= params[4] - rectangleBBox[params[3]] / 2;\n    } else {\n      if (params[4] + rectangleBBox[params[3]] / 2 > canvas[params[3]]) {\n        labelCoord[params[2]] -= params[4] + rectangleBBox[params[3]] / 2 - canvas[params[3]];\n      }\n    }\n\n    return labelCoord;\n  };\n}\n\nfunction Crosshair(renderer, options, params, group) {\n  var that = this;\n  that._renderer = renderer;\n  that._crosshairGroup = group;\n  that._options = {};\n  that.update(options, params);\n}\n\nCrosshair.prototype = {\n  constructor: Crosshair,\n  update: function update(options, params) {\n    var that = this;\n    var canvas = params.canvas;\n    that._canvas = {\n      top: canvas.top,\n      bottom: canvas.height - canvas.bottom,\n      left: canvas.left,\n      right: canvas.width - canvas.right,\n      width: canvas.width,\n      height: canvas.height\n    };\n    that._axes = params.axes;\n    that._panes = params.panes;\n\n    that._prepareOptions(options, HORIZONTAL);\n\n    that._prepareOptions(options, VERTICAL);\n  },\n  dispose: function dispose() {\n    var that = this;\n    that._renderer = that._crosshairGroup = that._options = that._axes = that._canvas = that._horizontalGroup = that._verticalGroup = that._horizontal = that._vertical = that._circle = that._panes = null;\n  },\n  _prepareOptions: function _prepareOptions(options, direction) {\n    var lineOptions = options[direction + \"Line\"];\n    this._options[direction] = {\n      visible: lineOptions.visible,\n      line: {\n        stroke: lineOptions.color || options.color,\n        \"stroke-width\": lineOptions.width || options.width,\n        dashStyle: lineOptions.dashStyle || options.dashStyle,\n        opacity: lineOptions.opacity || options.opacity,\n        \"stroke-linecap\": \"butt\"\n      },\n      label: (0, _extend.extend)(true, {}, options.label, lineOptions.label)\n    };\n  },\n  _createLines: function _createLines(options, sharpParam, group) {\n    var lines = [];\n    var canvas = this._canvas;\n    var points = [canvas.left, canvas.top, canvas.left, canvas.top];\n\n    for (var i = 0; i < 2; i++) {\n      lines.push(this._renderer.path(points, \"line\").attr(options).sharp(sharpParam).append(group));\n    }\n\n    return lines;\n  },\n  render: function render() {\n    var that = this;\n    var renderer = that._renderer;\n    var options = that._options;\n    var verticalOptions = options.vertical;\n    var horizontalOptions = options.horizontal;\n    var extraOptions = horizontalOptions.visible ? horizontalOptions.line : verticalOptions.line;\n    var circleOptions = {\n      stroke: extraOptions.stroke,\n      \"stroke-width\": extraOptions[\"stroke-width\"],\n      dashStyle: extraOptions.dashStyle,\n      opacity: extraOptions.opacity\n    };\n    var canvas = that._canvas;\n    that._horizontal = {};\n    that._vertical = {};\n    that._circle = renderer.circle(canvas.left, canvas.top, 0).attr(circleOptions).append(that._crosshairGroup);\n    that._horizontalGroup = renderer.g().append(that._crosshairGroup);\n    that._verticalGroup = renderer.g().append(that._crosshairGroup);\n\n    if (verticalOptions.visible) {\n      that._vertical.lines = that._createLines(verticalOptions.line, \"h\", that._verticalGroup);\n      that._vertical.labels = that._createLabels(that._axes[0], verticalOptions, false, that._verticalGroup);\n    }\n\n    if (horizontalOptions.visible) {\n      that._horizontal.lines = that._createLines(horizontalOptions.line, \"v\", that._horizontalGroup);\n      that._horizontal.labels = that._createLabels(that._axes[1], horizontalOptions, true, that._horizontalGroup);\n    }\n\n    that.hide();\n  },\n  _createLabels: function _createLabels(axes, options, isHorizontal, group) {\n    var that = this;\n    var canvas = that._canvas;\n    var renderer = that._renderer;\n    var x;\n    var y;\n    var text;\n    var labels = [];\n    var background;\n    var currentLabelPos;\n    var labelOptions = options.label;\n\n    if (labelOptions.visible) {\n      axes.forEach(function (axis) {\n        var position = axis.getOptions().position;\n        var align;\n\n        if (axis.getTranslator().getBusinessRange().isEmpty()) {\n          return;\n        }\n\n        currentLabelPos = axis.getLabelsPosition();\n\n        if (isHorizontal) {\n          y = canvas.top;\n          x = currentLabelPos;\n        } else {\n          x = canvas.left;\n          y = currentLabelPos;\n        }\n\n        align = position === TOP || position === BOTTOM ? CENTER : position === RIGHT ? LEFT : RIGHT;\n        background = renderer.rect(0, 0, 0, 0).attr({\n          fill: labelOptions.backgroundColor || options.line.stroke\n        }).append(group);\n        text = renderer.text(\"0\", 0, 0).css((0, _utils.patchFontOptions)(options.label.font)).attr({\n          align: align,\n          \"class\": labelOptions.cssClass\n        }).append(group);\n        labels.push({\n          text: text,\n          background: background,\n          axis: axis,\n          options: labelOptions,\n          pos: {\n            coord: currentLabelPos,\n            side: position\n          },\n          startXY: {\n            x: x,\n            y: y\n          }\n        });\n      });\n    }\n\n    return labels;\n  },\n  _updateText: function _updateText(value, axisName, labels, point, func) {\n    var that = this;\n    labels.forEach(function (label) {\n      var axis = label.axis;\n      var coord = label.startXY;\n      var textElement = label.text;\n      var backgroundElement = label.background;\n      var text = \"\";\n\n      if (!axis.name || axis.name === axisName) {\n        text = axis.getFormattedValue(value, label.options, point);\n      }\n\n      if (text) {\n        textElement.attr({\n          text: text,\n          x: coord.x,\n          y: coord.y\n        });\n        textElement.attr(func(textElement.getBBox(), label.pos.side, coord));\n\n        that._updateLinesCanvas(label);\n\n        backgroundElement.attr(getRectangleBBox(textElement.getBBox()));\n      } else {\n        textElement.attr({\n          text: \"\"\n        });\n        backgroundElement.attr({\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        });\n      }\n    });\n  },\n  hide: function hide() {\n    this._crosshairGroup.attr({\n      visibility: \"hidden\"\n    });\n  },\n  _updateLinesCanvas: function _updateLinesCanvas(label) {\n    var position = label.pos.side;\n    var labelCoord = label.pos.coord;\n    var coords = this._linesCanvas;\n    var canvas = this._canvas;\n    coords[position] = coords[position] !== canvas[position] && mathAbs(coords[position] - canvas[position]) < mathAbs(labelCoord - canvas[position]) ? coords[position] : labelCoord;\n  },\n  _updateLines: function _updateLines(lines, x, y, r, isHorizontal) {\n    var coords = this._linesCanvas;\n    var canvas = this._canvas;\n    var points = isHorizontal ? [[mathMin(x - r, coords.left), canvas.top, x - r, canvas.top], [x + r, canvas.top, mathMax(coords.right, x + r), canvas.top]] : [[canvas.left, mathMin(coords.top, y - r), canvas.left, y - r], [canvas.left, y + r, canvas.left, mathMax(coords.bottom, y + r)]];\n\n    for (var i = 0; i < 2; i++) {\n      lines[i].attr({\n        points: points[i]\n      }).sharp(isHorizontal ? \"v\" : \"h\", isHorizontal ? y === canvas.bottom ? -1 : 1 : x === canvas.right ? -1 : 1);\n    }\n  },\n  _resetLinesCanvas: function _resetLinesCanvas() {\n    var canvas = this._canvas;\n    this._linesCanvas = {\n      left: canvas.left,\n      right: canvas.right,\n      top: canvas.top,\n      bottom: canvas.bottom\n    };\n  },\n  _getClipRectForPane: function _getClipRectForPane(x, y) {\n    var panes = this._panes;\n    var i;\n    var coords;\n\n    for (i = 0; i < panes.length; i++) {\n      coords = panes[i].coords;\n\n      if (coords.left <= x && coords.right >= x && coords.top <= y && coords.bottom >= y) {\n        return panes[i].clipRect;\n      }\n    }\n\n    return {\n      id: null\n    };\n  },\n  show: function show(data) {\n    var that = this;\n    var point = data.point;\n    var pointData = point.getCrosshairData(data.x, data.y);\n    var r = point.getPointRadius();\n    var horizontal = that._horizontal;\n    var vertical = that._vertical;\n    var rad = !r ? 0 : r + 3;\n    var canvas = that._canvas;\n    var x = mathFloor(pointData.x);\n    var y = mathFloor(pointData.y);\n\n    if (x >= canvas.left && x <= canvas.right && y >= canvas.top && y <= canvas.bottom) {\n      that._crosshairGroup.attr({\n        visibility: \"visible\"\n      });\n\n      that._resetLinesCanvas();\n\n      that._circle.attr({\n        cx: x,\n        cy: y,\n        r: rad,\n        \"clip-path\": that._getClipRectForPane(x, y).id\n      });\n\n      if (horizontal.lines) {\n        that._updateText(pointData.yValue, pointData.axis, horizontal.labels, point, getLabelCheckerPosition(x, y, true, canvas));\n\n        that._updateLines(horizontal.lines, x, y, rad, true);\n\n        that._horizontalGroup.attr({\n          translateY: y - canvas.top\n        });\n      }\n\n      if (vertical.lines) {\n        that._updateText(pointData.xValue, pointData.axis, vertical.labels, point, getLabelCheckerPosition(x, y, false, canvas));\n\n        that._updateLines(vertical.lines, x, y, rad, false);\n\n        that._verticalGroup.attr({\n          translateX: x - canvas.left\n        });\n      }\n    } else {\n      that.hide();\n    }\n  }\n};\nexports.Crosshair = Crosshair;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/chart_components/crosshair.js"],"names":["_utils","require","_extend","math","mathAbs","mathMin","mathMax","mathFloor","HORIZONTAL","VERTICAL","LABEL_BACKGROUND_PADDING_X","LABEL_BACKGROUND_PADDING_Y","CENTER","RIGHT","LEFT","TOP","BOTTOM","exports","x","y","bBox","width","height","params","isHorizontal","labelCoord","coord","rectangleBBox","getRectangleBBox","delta","position","canvas","that","Crosshair","constructor","update","top","bottom","left","right","dispose","_prepareOptions","lineOptions","options","direction","visible","line","stroke","dashStyle","opacity","label","_createLines","lines","points","i","render","renderer","verticalOptions","horizontalOptions","extraOptions","circleOptions","_createLabels","labels","labelOptions","axes","axis","currentLabelPos","align","background","fill","text","cssClass","pos","side","startXY","_updateText","textElement","backgroundElement","func","hide","visibility","_updateLinesCanvas","coords","_updateLines","_resetLinesCanvas","_getClipRectForPane","panes","id","show","point","data","pointData","r","horizontal","vertical","rad","cx","cy","getLabelCheckerPosition","translateY","translateX"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/chart_components/crosshair.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _utils = require(\"../core/utils\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar math = Math;\r\nvar mathAbs = math.abs;\r\nvar mathMin = math.min;\r\nvar mathMax = math.max;\r\nvar mathFloor = math.floor;\r\nvar HORIZONTAL = \"horizontal\";\r\nvar VERTICAL = \"vertical\";\r\nvar LABEL_BACKGROUND_PADDING_X = 8;\r\nvar LABEL_BACKGROUND_PADDING_Y = 4;\r\nvar CENTER = \"center\";\r\nvar RIGHT = \"right\";\r\nvar LEFT = \"left\";\r\nvar TOP = \"top\";\r\nvar BOTTOM = \"bottom\";\r\nexports.getMargins = function() {\r\n    return {\r\n        x: LABEL_BACKGROUND_PADDING_X,\r\n        y: LABEL_BACKGROUND_PADDING_Y\r\n    }\r\n};\r\n\r\nfunction getRectangleBBox(bBox) {\r\n    return {\r\n        x: bBox.x - LABEL_BACKGROUND_PADDING_X,\r\n        y: bBox.y - LABEL_BACKGROUND_PADDING_Y,\r\n        width: bBox.width + 2 * LABEL_BACKGROUND_PADDING_X,\r\n        height: bBox.height + 2 * LABEL_BACKGROUND_PADDING_Y\r\n    }\r\n}\r\n\r\nfunction getLabelCheckerPosition(x, y, isHorizontal, canvas) {\r\n    var params = isHorizontal ? [\"x\", \"width\", \"y\", \"height\", y, 0] : [\"y\", \"height\", \"x\", \"width\", x, 1];\r\n    return function(bBox, position, coord) {\r\n        var labelCoord = {\r\n            x: coord.x,\r\n            y: coord.y\r\n        };\r\n        var rectangleBBox = getRectangleBBox(bBox);\r\n        var delta = isHorizontal ? coord.y - bBox.y - bBox.height / 2 : coord.y - bBox.y;\r\n        labelCoord.y = isHorizontal || !isHorizontal && position === BOTTOM ? coord.y + delta : coord.y;\r\n        if (rectangleBBox[params[0]] < 0) {\r\n            labelCoord[params[0]] -= rectangleBBox[params[0]]\r\n        } else {\r\n            if (rectangleBBox[params[0]] + rectangleBBox[params[1]] + delta * params[5] > canvas[params[1]]) {\r\n                labelCoord[params[0]] -= rectangleBBox[params[0]] + rectangleBBox[params[1]] + delta * params[5] - canvas[params[1]]\r\n            }\r\n        }\r\n        if (params[4] - rectangleBBox[params[3]] / 2 < 0) {\r\n            labelCoord[params[2]] -= params[4] - rectangleBBox[params[3]] / 2\r\n        } else {\r\n            if (params[4] + rectangleBBox[params[3]] / 2 > canvas[params[3]]) {\r\n                labelCoord[params[2]] -= params[4] + rectangleBBox[params[3]] / 2 - canvas[params[3]]\r\n            }\r\n        }\r\n        return labelCoord\r\n    }\r\n}\r\n\r\nfunction Crosshair(renderer, options, params, group) {\r\n    var that = this;\r\n    that._renderer = renderer;\r\n    that._crosshairGroup = group;\r\n    that._options = {};\r\n    that.update(options, params)\r\n}\r\nCrosshair.prototype = {\r\n    constructor: Crosshair,\r\n    update: function(options, params) {\r\n        var that = this;\r\n        var canvas = params.canvas;\r\n        that._canvas = {\r\n            top: canvas.top,\r\n            bottom: canvas.height - canvas.bottom,\r\n            left: canvas.left,\r\n            right: canvas.width - canvas.right,\r\n            width: canvas.width,\r\n            height: canvas.height\r\n        };\r\n        that._axes = params.axes;\r\n        that._panes = params.panes;\r\n        that._prepareOptions(options, HORIZONTAL);\r\n        that._prepareOptions(options, VERTICAL)\r\n    },\r\n    dispose: function() {\r\n        var that = this;\r\n        that._renderer = that._crosshairGroup = that._options = that._axes = that._canvas = that._horizontalGroup = that._verticalGroup = that._horizontal = that._vertical = that._circle = that._panes = null\r\n    },\r\n    _prepareOptions: function(options, direction) {\r\n        var lineOptions = options[direction + \"Line\"];\r\n        this._options[direction] = {\r\n            visible: lineOptions.visible,\r\n            line: {\r\n                stroke: lineOptions.color || options.color,\r\n                \"stroke-width\": lineOptions.width || options.width,\r\n                dashStyle: lineOptions.dashStyle || options.dashStyle,\r\n                opacity: lineOptions.opacity || options.opacity,\r\n                \"stroke-linecap\": \"butt\"\r\n            },\r\n            label: (0, _extend.extend)(true, {}, options.label, lineOptions.label)\r\n        }\r\n    },\r\n    _createLines: function(options, sharpParam, group) {\r\n        var lines = [];\r\n        var canvas = this._canvas;\r\n        var points = [canvas.left, canvas.top, canvas.left, canvas.top];\r\n        for (var i = 0; i < 2; i++) {\r\n            lines.push(this._renderer.path(points, \"line\").attr(options).sharp(sharpParam).append(group))\r\n        }\r\n        return lines\r\n    },\r\n    render: function() {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var options = that._options;\r\n        var verticalOptions = options.vertical;\r\n        var horizontalOptions = options.horizontal;\r\n        var extraOptions = horizontalOptions.visible ? horizontalOptions.line : verticalOptions.line;\r\n        var circleOptions = {\r\n            stroke: extraOptions.stroke,\r\n            \"stroke-width\": extraOptions[\"stroke-width\"],\r\n            dashStyle: extraOptions.dashStyle,\r\n            opacity: extraOptions.opacity\r\n        };\r\n        var canvas = that._canvas;\r\n        that._horizontal = {};\r\n        that._vertical = {};\r\n        that._circle = renderer.circle(canvas.left, canvas.top, 0).attr(circleOptions).append(that._crosshairGroup);\r\n        that._horizontalGroup = renderer.g().append(that._crosshairGroup);\r\n        that._verticalGroup = renderer.g().append(that._crosshairGroup);\r\n        if (verticalOptions.visible) {\r\n            that._vertical.lines = that._createLines(verticalOptions.line, \"h\", that._verticalGroup);\r\n            that._vertical.labels = that._createLabels(that._axes[0], verticalOptions, false, that._verticalGroup)\r\n        }\r\n        if (horizontalOptions.visible) {\r\n            that._horizontal.lines = that._createLines(horizontalOptions.line, \"v\", that._horizontalGroup);\r\n            that._horizontal.labels = that._createLabels(that._axes[1], horizontalOptions, true, that._horizontalGroup)\r\n        }\r\n        that.hide()\r\n    },\r\n    _createLabels: function(axes, options, isHorizontal, group) {\r\n        var that = this;\r\n        var canvas = that._canvas;\r\n        var renderer = that._renderer;\r\n        var x;\r\n        var y;\r\n        var text;\r\n        var labels = [];\r\n        var background;\r\n        var currentLabelPos;\r\n        var labelOptions = options.label;\r\n        if (labelOptions.visible) {\r\n            axes.forEach(function(axis) {\r\n                var position = axis.getOptions().position;\r\n                var align;\r\n                if (axis.getTranslator().getBusinessRange().isEmpty()) {\r\n                    return\r\n                }\r\n                currentLabelPos = axis.getLabelsPosition();\r\n                if (isHorizontal) {\r\n                    y = canvas.top;\r\n                    x = currentLabelPos\r\n                } else {\r\n                    x = canvas.left;\r\n                    y = currentLabelPos\r\n                }\r\n                align = position === TOP || position === BOTTOM ? CENTER : position === RIGHT ? LEFT : RIGHT;\r\n                background = renderer.rect(0, 0, 0, 0).attr({\r\n                    fill: labelOptions.backgroundColor || options.line.stroke\r\n                }).append(group);\r\n                text = renderer.text(\"0\", 0, 0).css((0, _utils.patchFontOptions)(options.label.font)).attr({\r\n                    align: align,\r\n                    \"class\": labelOptions.cssClass\r\n                }).append(group);\r\n                labels.push({\r\n                    text: text,\r\n                    background: background,\r\n                    axis: axis,\r\n                    options: labelOptions,\r\n                    pos: {\r\n                        coord: currentLabelPos,\r\n                        side: position\r\n                    },\r\n                    startXY: {\r\n                        x: x,\r\n                        y: y\r\n                    }\r\n                })\r\n            })\r\n        }\r\n        return labels\r\n    },\r\n    _updateText: function(value, axisName, labels, point, func) {\r\n        var that = this;\r\n        labels.forEach(function(label) {\r\n            var axis = label.axis;\r\n            var coord = label.startXY;\r\n            var textElement = label.text;\r\n            var backgroundElement = label.background;\r\n            var text = \"\";\r\n            if (!axis.name || axis.name === axisName) {\r\n                text = axis.getFormattedValue(value, label.options, point)\r\n            }\r\n            if (text) {\r\n                textElement.attr({\r\n                    text: text,\r\n                    x: coord.x,\r\n                    y: coord.y\r\n                });\r\n                textElement.attr(func(textElement.getBBox(), label.pos.side, coord));\r\n                that._updateLinesCanvas(label);\r\n                backgroundElement.attr(getRectangleBBox(textElement.getBBox()))\r\n            } else {\r\n                textElement.attr({\r\n                    text: \"\"\r\n                });\r\n                backgroundElement.attr({\r\n                    x: 0,\r\n                    y: 0,\r\n                    width: 0,\r\n                    height: 0\r\n                })\r\n            }\r\n        })\r\n    },\r\n    hide: function() {\r\n        this._crosshairGroup.attr({\r\n            visibility: \"hidden\"\r\n        })\r\n    },\r\n    _updateLinesCanvas: function(label) {\r\n        var position = label.pos.side;\r\n        var labelCoord = label.pos.coord;\r\n        var coords = this._linesCanvas;\r\n        var canvas = this._canvas;\r\n        coords[position] = coords[position] !== canvas[position] && mathAbs(coords[position] - canvas[position]) < mathAbs(labelCoord - canvas[position]) ? coords[position] : labelCoord\r\n    },\r\n    _updateLines: function(lines, x, y, r, isHorizontal) {\r\n        var coords = this._linesCanvas;\r\n        var canvas = this._canvas;\r\n        var points = isHorizontal ? [\r\n            [mathMin(x - r, coords.left), canvas.top, x - r, canvas.top],\r\n            [x + r, canvas.top, mathMax(coords.right, x + r), canvas.top]\r\n        ] : [\r\n            [canvas.left, mathMin(coords.top, y - r), canvas.left, y - r],\r\n            [canvas.left, y + r, canvas.left, mathMax(coords.bottom, y + r)]\r\n        ];\r\n        for (var i = 0; i < 2; i++) {\r\n            lines[i].attr({\r\n                points: points[i]\r\n            }).sharp(isHorizontal ? \"v\" : \"h\", isHorizontal ? y === canvas.bottom ? -1 : 1 : x === canvas.right ? -1 : 1)\r\n        }\r\n    },\r\n    _resetLinesCanvas: function() {\r\n        var canvas = this._canvas;\r\n        this._linesCanvas = {\r\n            left: canvas.left,\r\n            right: canvas.right,\r\n            top: canvas.top,\r\n            bottom: canvas.bottom\r\n        }\r\n    },\r\n    _getClipRectForPane: function(x, y) {\r\n        var panes = this._panes;\r\n        var i;\r\n        var coords;\r\n        for (i = 0; i < panes.length; i++) {\r\n            coords = panes[i].coords;\r\n            if (coords.left <= x && coords.right >= x && coords.top <= y && coords.bottom >= y) {\r\n                return panes[i].clipRect\r\n            }\r\n        }\r\n        return {\r\n            id: null\r\n        }\r\n    },\r\n    show: function(data) {\r\n        var that = this;\r\n        var point = data.point;\r\n        var pointData = point.getCrosshairData(data.x, data.y);\r\n        var r = point.getPointRadius();\r\n        var horizontal = that._horizontal;\r\n        var vertical = that._vertical;\r\n        var rad = !r ? 0 : r + 3;\r\n        var canvas = that._canvas;\r\n        var x = mathFloor(pointData.x);\r\n        var y = mathFloor(pointData.y);\r\n        if (x >= canvas.left && x <= canvas.right && y >= canvas.top && y <= canvas.bottom) {\r\n            that._crosshairGroup.attr({\r\n                visibility: \"visible\"\r\n            });\r\n            that._resetLinesCanvas();\r\n            that._circle.attr({\r\n                cx: x,\r\n                cy: y,\r\n                r: rad,\r\n                \"clip-path\": that._getClipRectForPane(x, y).id\r\n            });\r\n            if (horizontal.lines) {\r\n                that._updateText(pointData.yValue, pointData.axis, horizontal.labels, point, getLabelCheckerPosition(x, y, true, canvas));\r\n                that._updateLines(horizontal.lines, x, y, rad, true);\r\n                that._horizontalGroup.attr({\r\n                    translateY: y - canvas.top\r\n                })\r\n            }\r\n            if (vertical.lines) {\r\n                that._updateText(pointData.xValue, pointData.axis, vertical.labels, point, getLabelCheckerPosition(x, y, false, canvas));\r\n                that._updateLines(vertical.lines, x, y, rad, false);\r\n                that._verticalGroup.attr({\r\n                    translateX: x - canvas.left\r\n                })\r\n            }\r\n        } else {\r\n            that.hide()\r\n        }\r\n    }\r\n};\r\nexports.Crosshair = Crosshair;\r\n"]},"metadata":{},"sourceType":"module"}