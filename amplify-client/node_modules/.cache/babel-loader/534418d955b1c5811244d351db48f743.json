{"ast":null,"code":"/**\r\n * DevExtreme (ui/list/ui.list.edit.decorator.selection.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar clickEvent = require(\"../../events/click\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar errors = require(\"../widget/ui.errors\");\n\nvar CheckBox = require(\"../check_box\");\n\nvar RadioButton = require(\"../radio_group/radio_button\");\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar registerDecorator = require(\"./ui.list.edit.decorator_registry\").register;\n\nvar EditDecorator = require(\"./ui.list.edit.decorator\");\n\nvar SELECT_DECORATOR_ENABLED_CLASS = \"dx-list-select-decorator-enabled\";\nvar SELECT_DECORATOR_SELECT_ALL_CLASS = \"dx-list-select-all\";\nvar SELECT_DECORATOR_SELECT_ALL_CHECKBOX_CLASS = \"dx-list-select-all-checkbox\";\nvar SELECT_DECORATOR_SELECT_ALL_LABEL_CLASS = \"dx-list-select-all-label\";\nvar SELECT_CHECKBOX_CONTAINER_CLASS = \"dx-list-select-checkbox-container\";\nvar SELECT_CHECKBOX_CLASS = \"dx-list-select-checkbox\";\nvar SELECT_RADIO_BUTTON_CONTAINER_CLASS = \"dx-list-select-radiobutton-container\";\nvar SELECT_RADIO_BUTTON_CLASS = \"dx-list-select-radiobutton\";\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\nvar CLICK_EVENT_NAME = eventUtils.addNamespace(clickEvent.name, \"dxListEditDecorator\");\nregisterDecorator(\"selection\", \"default\", EditDecorator.inherit({\n  _init: function _init() {\n    this.callBase.apply(this, arguments);\n\n    var selectionMode = this._list.option(\"selectionMode\");\n\n    this._singleStrategy = \"single\" === selectionMode;\n    this._containerClass = this._singleStrategy ? SELECT_RADIO_BUTTON_CONTAINER_CLASS : SELECT_CHECKBOX_CONTAINER_CLASS;\n    this._controlClass = this._singleStrategy ? SELECT_RADIO_BUTTON_CLASS : SELECT_CHECKBOX_CLASS;\n    this._controlWidget = this._singleStrategy ? RadioButton : CheckBox;\n\n    this._list.$element().addClass(SELECT_DECORATOR_ENABLED_CLASS);\n  },\n  beforeBag: function beforeBag(config) {\n    var $itemElement = config.$itemElement;\n    var $container = config.$container;\n    var $control = $(\"<div>\").addClass(this._controlClass);\n    new this._controlWidget($control, extend(this._commonOptions(), {\n      value: this._isSelected($itemElement),\n      focusStateEnabled: false,\n      hoverStateEnabled: false,\n      onValueChanged: function (e) {\n        this._processCheckedState($itemElement, e.value);\n\n        e.event && e.event.stopPropagation();\n      }.bind(this)\n    }));\n    $container.addClass(this._containerClass);\n    $container.append($control);\n  },\n  modifyElement: function modifyElement(config) {\n    this.callBase.apply(this, arguments);\n    var $itemElement = config.$itemElement;\n\n    var control = this._controlWidget.getInstance($itemElement.find(\".\" + this._controlClass));\n\n    eventsEngine.on($itemElement, \"stateChanged\", function (e, state) {\n      control.option(\"value\", state);\n    }.bind(this));\n  },\n  _updateSelectAllState: function _updateSelectAllState() {\n    if (!this._$selectAll) {\n      return;\n    }\n\n    this._selectAllCheckBox.option(\"value\", this._list.isSelectAll());\n  },\n  afterRender: function afterRender() {\n    if (\"all\" !== this._list.option(\"selectionMode\")) {\n      return;\n    }\n\n    if (!this._$selectAll) {\n      this._renderSelectAll();\n    } else {\n      this._updateSelectAllState();\n    }\n  },\n  handleKeyboardEvents: function handleKeyboardEvents(currentFocusedIndex, moveFocusUp) {\n    var moveFocusDown = !moveFocusUp;\n    var list = this._list;\n    var $selectAll = this._$selectAll;\n\n    var lastItemIndex = list._getLastItemIndex();\n\n    var isFocusOutOfList = moveFocusUp && 0 === currentFocusedIndex || moveFocusDown && currentFocusedIndex === lastItemIndex;\n    var hasSelectAllItem = !!$selectAll;\n\n    if (hasSelectAllItem && isFocusOutOfList) {\n      list.option(\"focusedElement\", $selectAll);\n      list.scrollToItem(list.option(\"focusedElement\"));\n      return true;\n    }\n\n    return false;\n  },\n  handleEnterPressing: function handleEnterPressing() {\n    if (this._$selectAll && this._$selectAll.hasClass(FOCUSED_STATE_CLASS)) {\n      this._selectAllCheckBox.option(\"value\", !this._selectAllCheckBox.option(\"value\"));\n\n      return true;\n    }\n  },\n  _renderSelectAll: function _renderSelectAll() {\n    var $selectAll = this._$selectAll = $(\"<div>\").addClass(SELECT_DECORATOR_SELECT_ALL_CLASS);\n    var list = this._list;\n\n    var downArrowHandler = list._supportedKeys().downArrow.bind(list);\n\n    this._selectAllCheckBox = list._createComponent($(\"<div>\").addClass(SELECT_DECORATOR_SELECT_ALL_CHECKBOX_CLASS).appendTo($selectAll), CheckBox, {\n      focusStateEnabled: false,\n      hoverStateEnabled: false\n    });\n\n    this._selectAllCheckBox.registerKeyHandler(\"downArrow\", downArrowHandler);\n\n    $(\"<div>\").addClass(SELECT_DECORATOR_SELECT_ALL_LABEL_CLASS).text(this._list.option(\"selectAllText\")).appendTo($selectAll);\n\n    this._list.itemsContainer().prepend($selectAll);\n\n    this._updateSelectAllState();\n\n    this._attachSelectAllHandler();\n  },\n  _attachSelectAllHandler: function _attachSelectAllHandler() {\n    this._selectAllCheckBox.option(\"onValueChanged\", this._selectAllHandler.bind(this));\n\n    eventsEngine.off(this._$selectAll, CLICK_EVENT_NAME);\n    eventsEngine.on(this._$selectAll, CLICK_EVENT_NAME, this._selectAllClickHandler.bind(this));\n  },\n  _selectAllHandler: function _selectAllHandler(e) {\n    e.event && e.event.stopPropagation();\n\n    var isSelectedAll = this._selectAllCheckBox.option(\"value\");\n\n    var result = this._list._createActionByOption(\"onSelectAllValueChanged\")({\n      value: isSelectedAll\n    });\n\n    if (false === result) {\n      return;\n    }\n\n    if (true === isSelectedAll) {\n      this._selectAllItems();\n    } else {\n      if (false === isSelectedAll) {\n        this._unselectAllItems();\n      }\n    }\n  },\n  _checkSelectAllCapability: function _checkSelectAllCapability() {\n    var list = this._list;\n    var dataSource = list.getDataSource();\n\n    if (\"allPages\" === list.option(\"selectAllMode\") && list.option(\"grouped\") && (!dataSource || !dataSource.group())) {\n      errors.log(\"W1010\");\n      return false;\n    }\n\n    return true;\n  },\n  _selectAllItems: function _selectAllItems() {\n    if (!this._checkSelectAllCapability()) {\n      return;\n    }\n\n    this._list._selection.selectAll(\"page\" === this._list.option(\"selectAllMode\"));\n  },\n  _unselectAllItems: function _unselectAllItems() {\n    if (!this._checkSelectAllCapability()) {\n      return;\n    }\n\n    this._list._selection.deselectAll(\"page\" === this._list.option(\"selectAllMode\"));\n  },\n  _selectAllClickHandler: function _selectAllClickHandler() {\n    this._selectAllCheckBox.option(\"value\", !this._selectAllCheckBox.option(\"value\"));\n  },\n  _isSelected: function _isSelected($itemElement) {\n    return this._list.isItemSelected($itemElement);\n  },\n  _processCheckedState: function _processCheckedState($itemElement, checked) {\n    if (checked) {\n      this._list.selectItem($itemElement);\n    } else {\n      this._list.unselectItem($itemElement);\n    }\n  },\n  dispose: function dispose() {\n    this._disposeSelectAll();\n\n    this._list.$element().removeClass(SELECT_DECORATOR_ENABLED_CLASS);\n\n    this.callBase.apply(this, arguments);\n  },\n  _disposeSelectAll: function _disposeSelectAll() {\n    if (this._$selectAll) {\n      this._$selectAll.remove();\n\n      this._$selectAll = null;\n    }\n  }\n}));","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/list/ui.list.edit.decorator.selection.js"],"names":["$","require","eventsEngine","clickEvent","extend","errors","CheckBox","RadioButton","eventUtils","registerDecorator","EditDecorator","SELECT_DECORATOR_ENABLED_CLASS","SELECT_DECORATOR_SELECT_ALL_CLASS","SELECT_DECORATOR_SELECT_ALL_CHECKBOX_CLASS","SELECT_DECORATOR_SELECT_ALL_LABEL_CLASS","SELECT_CHECKBOX_CONTAINER_CLASS","SELECT_CHECKBOX_CLASS","SELECT_RADIO_BUTTON_CONTAINER_CLASS","SELECT_RADIO_BUTTON_CLASS","FOCUSED_STATE_CLASS","CLICK_EVENT_NAME","_init","selectionMode","beforeBag","$itemElement","config","$container","$control","value","focusStateEnabled","hoverStateEnabled","onValueChanged","e","modifyElement","control","_updateSelectAllState","afterRender","handleKeyboardEvents","moveFocusDown","list","$selectAll","lastItemIndex","isFocusOutOfList","moveFocusUp","currentFocusedIndex","hasSelectAllItem","handleEnterPressing","_renderSelectAll","downArrowHandler","_attachSelectAllHandler","_selectAllHandler","isSelectedAll","result","_checkSelectAllCapability","dataSource","_selectAllItems","_unselectAllItems","_selectAllClickHandler","_isSelected","_processCheckedState","dispose","_disposeSelectAll"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/list/ui.list.edit.decorator.selection.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar clickEvent = require(\"../../events/click\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar errors = require(\"../widget/ui.errors\");\r\nvar CheckBox = require(\"../check_box\");\r\nvar RadioButton = require(\"../radio_group/radio_button\");\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar registerDecorator = require(\"./ui.list.edit.decorator_registry\").register;\r\nvar EditDecorator = require(\"./ui.list.edit.decorator\");\r\nvar SELECT_DECORATOR_ENABLED_CLASS = \"dx-list-select-decorator-enabled\";\r\nvar SELECT_DECORATOR_SELECT_ALL_CLASS = \"dx-list-select-all\";\r\nvar SELECT_DECORATOR_SELECT_ALL_CHECKBOX_CLASS = \"dx-list-select-all-checkbox\";\r\nvar SELECT_DECORATOR_SELECT_ALL_LABEL_CLASS = \"dx-list-select-all-label\";\r\nvar SELECT_CHECKBOX_CONTAINER_CLASS = \"dx-list-select-checkbox-container\";\r\nvar SELECT_CHECKBOX_CLASS = \"dx-list-select-checkbox\";\r\nvar SELECT_RADIO_BUTTON_CONTAINER_CLASS = \"dx-list-select-radiobutton-container\";\r\nvar SELECT_RADIO_BUTTON_CLASS = \"dx-list-select-radiobutton\";\r\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\r\nvar CLICK_EVENT_NAME = eventUtils.addNamespace(clickEvent.name, \"dxListEditDecorator\");\r\nregisterDecorator(\"selection\", \"default\", EditDecorator.inherit({\r\n    _init: function() {\r\n        this.callBase.apply(this, arguments);\r\n        var selectionMode = this._list.option(\"selectionMode\");\r\n        this._singleStrategy = \"single\" === selectionMode;\r\n        this._containerClass = this._singleStrategy ? SELECT_RADIO_BUTTON_CONTAINER_CLASS : SELECT_CHECKBOX_CONTAINER_CLASS;\r\n        this._controlClass = this._singleStrategy ? SELECT_RADIO_BUTTON_CLASS : SELECT_CHECKBOX_CLASS;\r\n        this._controlWidget = this._singleStrategy ? RadioButton : CheckBox;\r\n        this._list.$element().addClass(SELECT_DECORATOR_ENABLED_CLASS)\r\n    },\r\n    beforeBag: function(config) {\r\n        var $itemElement = config.$itemElement;\r\n        var $container = config.$container;\r\n        var $control = $(\"<div>\").addClass(this._controlClass);\r\n        new this._controlWidget($control, extend(this._commonOptions(), {\r\n            value: this._isSelected($itemElement),\r\n            focusStateEnabled: false,\r\n            hoverStateEnabled: false,\r\n            onValueChanged: function(e) {\r\n                this._processCheckedState($itemElement, e.value);\r\n                e.event && e.event.stopPropagation()\r\n            }.bind(this)\r\n        }));\r\n        $container.addClass(this._containerClass);\r\n        $container.append($control)\r\n    },\r\n    modifyElement: function(config) {\r\n        this.callBase.apply(this, arguments);\r\n        var $itemElement = config.$itemElement;\r\n        var control = this._controlWidget.getInstance($itemElement.find(\".\" + this._controlClass));\r\n        eventsEngine.on($itemElement, \"stateChanged\", function(e, state) {\r\n            control.option(\"value\", state)\r\n        }.bind(this))\r\n    },\r\n    _updateSelectAllState: function() {\r\n        if (!this._$selectAll) {\r\n            return\r\n        }\r\n        this._selectAllCheckBox.option(\"value\", this._list.isSelectAll())\r\n    },\r\n    afterRender: function() {\r\n        if (\"all\" !== this._list.option(\"selectionMode\")) {\r\n            return\r\n        }\r\n        if (!this._$selectAll) {\r\n            this._renderSelectAll()\r\n        } else {\r\n            this._updateSelectAllState()\r\n        }\r\n    },\r\n    handleKeyboardEvents: function(currentFocusedIndex, moveFocusUp) {\r\n        var moveFocusDown = !moveFocusUp;\r\n        var list = this._list;\r\n        var $selectAll = this._$selectAll;\r\n        var lastItemIndex = list._getLastItemIndex();\r\n        var isFocusOutOfList = moveFocusUp && 0 === currentFocusedIndex || moveFocusDown && currentFocusedIndex === lastItemIndex;\r\n        var hasSelectAllItem = !!$selectAll;\r\n        if (hasSelectAllItem && isFocusOutOfList) {\r\n            list.option(\"focusedElement\", $selectAll);\r\n            list.scrollToItem(list.option(\"focusedElement\"));\r\n            return true\r\n        }\r\n        return false\r\n    },\r\n    handleEnterPressing: function() {\r\n        if (this._$selectAll && this._$selectAll.hasClass(FOCUSED_STATE_CLASS)) {\r\n            this._selectAllCheckBox.option(\"value\", !this._selectAllCheckBox.option(\"value\"));\r\n            return true\r\n        }\r\n    },\r\n    _renderSelectAll: function() {\r\n        var $selectAll = this._$selectAll = $(\"<div>\").addClass(SELECT_DECORATOR_SELECT_ALL_CLASS);\r\n        var list = this._list;\r\n        var downArrowHandler = list._supportedKeys().downArrow.bind(list);\r\n        this._selectAllCheckBox = list._createComponent($(\"<div>\").addClass(SELECT_DECORATOR_SELECT_ALL_CHECKBOX_CLASS).appendTo($selectAll), CheckBox, {\r\n            focusStateEnabled: false,\r\n            hoverStateEnabled: false\r\n        });\r\n        this._selectAllCheckBox.registerKeyHandler(\"downArrow\", downArrowHandler);\r\n        $(\"<div>\").addClass(SELECT_DECORATOR_SELECT_ALL_LABEL_CLASS).text(this._list.option(\"selectAllText\")).appendTo($selectAll);\r\n        this._list.itemsContainer().prepend($selectAll);\r\n        this._updateSelectAllState();\r\n        this._attachSelectAllHandler()\r\n    },\r\n    _attachSelectAllHandler: function() {\r\n        this._selectAllCheckBox.option(\"onValueChanged\", this._selectAllHandler.bind(this));\r\n        eventsEngine.off(this._$selectAll, CLICK_EVENT_NAME);\r\n        eventsEngine.on(this._$selectAll, CLICK_EVENT_NAME, this._selectAllClickHandler.bind(this))\r\n    },\r\n    _selectAllHandler: function(e) {\r\n        e.event && e.event.stopPropagation();\r\n        var isSelectedAll = this._selectAllCheckBox.option(\"value\");\r\n        var result = this._list._createActionByOption(\"onSelectAllValueChanged\")({\r\n            value: isSelectedAll\r\n        });\r\n        if (false === result) {\r\n            return\r\n        }\r\n        if (true === isSelectedAll) {\r\n            this._selectAllItems()\r\n        } else {\r\n            if (false === isSelectedAll) {\r\n                this._unselectAllItems()\r\n            }\r\n        }\r\n    },\r\n    _checkSelectAllCapability: function() {\r\n        var list = this._list;\r\n        var dataSource = list.getDataSource();\r\n        if (\"allPages\" === list.option(\"selectAllMode\") && list.option(\"grouped\") && (!dataSource || !dataSource.group())) {\r\n            errors.log(\"W1010\");\r\n            return false\r\n        }\r\n        return true\r\n    },\r\n    _selectAllItems: function() {\r\n        if (!this._checkSelectAllCapability()) {\r\n            return\r\n        }\r\n        this._list._selection.selectAll(\"page\" === this._list.option(\"selectAllMode\"))\r\n    },\r\n    _unselectAllItems: function() {\r\n        if (!this._checkSelectAllCapability()) {\r\n            return\r\n        }\r\n        this._list._selection.deselectAll(\"page\" === this._list.option(\"selectAllMode\"))\r\n    },\r\n    _selectAllClickHandler: function() {\r\n        this._selectAllCheckBox.option(\"value\", !this._selectAllCheckBox.option(\"value\"))\r\n    },\r\n    _isSelected: function($itemElement) {\r\n        return this._list.isItemSelected($itemElement)\r\n    },\r\n    _processCheckedState: function($itemElement, checked) {\r\n        if (checked) {\r\n            this._list.selectItem($itemElement)\r\n        } else {\r\n            this._list.unselectItem($itemElement)\r\n        }\r\n    },\r\n    dispose: function() {\r\n        this._disposeSelectAll();\r\n        this._list.$element().removeClass(SELECT_DECORATOR_ENABLED_CLASS);\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _disposeSelectAll: function() {\r\n        if (this._$selectAll) {\r\n            this._$selectAll.remove();\r\n            this._$selectAll = null\r\n        }\r\n    }\r\n}));\r\n"]},"metadata":{},"sourceType":"module"}