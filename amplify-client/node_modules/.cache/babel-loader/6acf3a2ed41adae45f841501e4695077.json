{"ast":null,"code":"/**\r\n * DevExtreme (viz/chart_components/advanced_chart.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar inArray = require(\"../../core/utils/array\").inArray;\n\nvar iteratorModule = require(\"../../core/utils/iterator\");\n\nvar rangeModule = require(\"../translators/range\");\n\nvar DEFAULT_AXIS_NAME = \"defaultAxisName\";\n\nvar axisModule = require(\"../axes/base_axis\");\n\nvar seriesFamilyModule = require(\"../core/series_family\");\n\nvar BaseChart = require(\"./base_chart\").BaseChart;\n\nvar crosshairModule = require(\"./crosshair\");\n\nvar _isArray = Array.isArray;\n\nvar _isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar _each = iteratorModule.each;\nvar _reverseEach = iteratorModule.reverseEach;\n\nvar _noop = require(\"../../core/utils/common\").noop;\n\nvar _extend = extend;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar type = require(\"../../core/utils/type\").type;\n\nvar convertVisualRangeObject = vizUtils.convertVisualRangeObject;\nvar rangesAreEqual = vizUtils.rangesAreEqual;\nvar _map = vizUtils.map;\nvar mergeMarginOptions = vizUtils.mergeMarginOptions;\nvar FONT = \"font\";\nvar COMMON_AXIS_SETTINGS = \"commonAxisSettings\";\nvar DEFAULT_PANE_NAME = \"default\";\nvar VISUAL_RANGE = \"VISUAL_RANGE\";\n\nfunction prepareAxis(axisOptions) {\n  return _isArray(axisOptions) ? 0 === axisOptions.length ? [{}] : axisOptions : [axisOptions];\n}\n\nfunction processBubbleMargin(opt, bubbleSize) {\n  if (opt.processBubbleSize) {\n    opt.size = bubbleSize;\n  }\n\n  return opt;\n}\n\nfunction estimateBubbleSize(size, panesCount, maxSize, rotated) {\n  var width = rotated ? size.width / panesCount : size.width;\n  var height = rotated ? size.height : size.height / panesCount;\n  return Math.min(width, height) * maxSize;\n}\n\nfunction setAxisVisualRangeByOption(arg, axis, isDirectOption, index) {\n  var options;\n  var visualRange;\n\n  if (isDirectOption) {\n    visualRange = arg.value;\n    options = {\n      skipEventRising: true\n    };\n    var pathElements = arg.fullName.split(\".\");\n    var destElem = pathElements[pathElements.length - 1];\n\n    if (\"endValue\" === destElem || \"startValue\" === destElem) {\n      options = {\n        allowPartialUpdate: true\n      };\n      visualRange = _defineProperty({}, destElem, arg.value);\n    }\n  } else {\n    visualRange = (_isDefined(index) ? arg.value[index] : arg.value).visualRange;\n  }\n\n  axis.visualRange(visualRange, options);\n}\n\nvar AdvancedChart = BaseChart.inherit({\n  _setDeprecatedOptions: function _setDeprecatedOptions() {\n    this.callBase.apply(this, arguments);\n\n    _extend(this._deprecatedOptions, {\n      barWidth: {\n        since: \"18.1\",\n        message: \"Use the 'commonSeriesSettings.barPadding' or 'series.barPadding' option instead\"\n      },\n      equalBarWidth: {\n        since: \"18.1\",\n        message: \"Use the 'commonSeriesSettings.ignoreEmptyPoints' or 'series.ignoreEmptyPoints' option instead\"\n      }\n    });\n  },\n  _fontFields: [COMMON_AXIS_SETTINGS + \".label.\" + FONT, COMMON_AXIS_SETTINGS + \".title.\" + FONT],\n  _partialOptionChangesMap: {\n    visualRange: VISUAL_RANGE,\n    _customVisualRange: VISUAL_RANGE,\n    strips: \"REFRESH_AXES\",\n    constantLines: \"REFRESH_AXES\"\n  },\n  _partialOptionChangesPath: {\n    argumentAxis: [\"strips\", \"constantLines\", \"visualRange\", \"_customVisualRange\"],\n    valueAxis: [\"strips\", \"constantLines\", \"visualRange\", \"_customVisualRange\"]\n  },\n  _initCore: function _initCore() {\n    this._panesClipRects = {};\n    this.callBase();\n  },\n  _disposeCore: function _disposeCore() {\n    var disposeObjectsInArray = this._disposeObjectsInArray;\n    var panesClipRects = this._panesClipRects;\n    this.callBase();\n    disposeObjectsInArray.call(panesClipRects, \"fixed\");\n    disposeObjectsInArray.call(panesClipRects, \"base\");\n    disposeObjectsInArray.call(panesClipRects, \"wide\");\n    this._panesClipRects = null;\n  },\n  _dispose: function _dispose() {\n    var that = this;\n    var disposeObjectsInArray = this._disposeObjectsInArray;\n    that.callBase();\n    that.panes = null;\n\n    if (that._legend) {\n      that._legend.dispose();\n\n      that._legend = null;\n    }\n\n    disposeObjectsInArray.call(that, \"panesBackground\");\n    disposeObjectsInArray.call(that, \"seriesFamilies\");\n\n    that._disposeAxes();\n  },\n  _createPanes: function _createPanes() {\n    this._cleanPanesClipRects(\"fixed\");\n\n    this._cleanPanesClipRects(\"base\");\n\n    this._cleanPanesClipRects(\"wide\");\n  },\n  _cleanPanesClipRects: function _cleanPanesClipRects(clipArrayName) {\n    var clipArray = this._panesClipRects[clipArrayName];\n    (clipArray || []).forEach(function (clipRect) {\n      return clipRect && clipRect.dispose();\n    });\n    this._panesClipRects[clipArrayName] = [];\n  },\n  _getElementsClipRectID: function _getElementsClipRectID(paneName) {\n    var clipShape = this._panesClipRects.fixed[this._getPaneIndex(paneName)];\n\n    return clipShape && clipShape.id;\n  },\n  _getPaneIndex: function _getPaneIndex(paneName) {\n    var paneIndex;\n    var name = paneName || DEFAULT_PANE_NAME;\n\n    _each(this.panes, function (index, pane) {\n      if (pane.name === name) {\n        paneIndex = index;\n        return false;\n      }\n    });\n\n    return paneIndex;\n  },\n  _reinitAxes: function _reinitAxes() {\n    this.panes = this._createPanes();\n\n    this._populateAxes();\n\n    this._axesReinitialized = true;\n  },\n  _getCrosshairMargins: function _getCrosshairMargins() {\n    var crosshairOptions = this._getCrosshairOptions() || {};\n    var crosshairEnabled = crosshairOptions.enabled;\n    var margins = crosshairModule.getMargins();\n    return {\n      x: crosshairEnabled && crosshairOptions.horizontalLine.visible ? margins.x : 0,\n      y: crosshairEnabled && crosshairOptions.verticalLine.visible ? margins.y : 0\n    };\n  },\n  _populateAxes: function _populateAxes() {\n    var that = this;\n    var panes = that.panes;\n\n    var rotated = that._isRotated();\n\n    var argumentAxesOptions = prepareAxis(that.option(\"argumentAxis\") || {})[0];\n    var valueAxisOption = that.option(\"valueAxis\");\n    var valueAxesOptions = prepareAxis(valueAxisOption || {});\n    var argumentAxesPopulatedOptions = [];\n    var valueAxesPopulatedOptions = [];\n    var axisNames = [];\n    var valueAxesCounter = 0;\n    var paneWithNonVirtualAxis;\n\n    var crosshairMargins = that._getCrosshairMargins();\n\n    function getNextAxisName() {\n      return DEFAULT_AXIS_NAME + valueAxesCounter++;\n    }\n\n    if (rotated) {\n      paneWithNonVirtualAxis = \"right\" === argumentAxesOptions.position ? panes[panes.length - 1].name : panes[0].name;\n    } else {\n      paneWithNonVirtualAxis = \"top\" === argumentAxesOptions.position ? panes[0].name : panes[panes.length - 1].name;\n    }\n\n    argumentAxesPopulatedOptions = _map(panes, function (pane) {\n      var virtual = pane.name !== paneWithNonVirtualAxis;\n      return that._populateAxesOptions(\"argumentAxis\", argumentAxesOptions, {\n        pane: pane.name,\n        name: null,\n        optionPath: \"argumentAxis\",\n        crosshairMargin: rotated ? crosshairMargins.x : crosshairMargins.y\n      }, rotated, virtual);\n    });\n\n    _each(valueAxesOptions, function (priority, axisOptions) {\n      var axisPanes = [];\n      var name = axisOptions.name;\n\n      if (name && inArray(name, axisNames) !== -1) {\n        that._incidentOccurred(\"E2102\");\n\n        return;\n      }\n\n      name && axisNames.push(name);\n\n      if (axisOptions.pane) {\n        axisPanes.push(axisOptions.pane);\n      }\n\n      if (axisOptions.panes && axisOptions.panes.length) {\n        axisPanes = axisPanes.concat(axisOptions.panes.slice(0));\n      }\n\n      axisPanes = vizUtils.unique(axisPanes);\n\n      if (!axisPanes.length) {\n        axisPanes.push(void 0);\n      }\n\n      _each(axisPanes, function (_, pane) {\n        var optionPath = _isArray(valueAxisOption) ? \"valueAxis[\".concat(priority, \"]\") : \"valueAxis\";\n        valueAxesPopulatedOptions.push(that._populateAxesOptions(\"valueAxis\", axisOptions, {\n          name: name || getNextAxisName(),\n          pane: pane,\n          priority: priority,\n          optionPath: optionPath,\n          crosshairMargin: rotated ? crosshairMargins.y : crosshairMargins.x\n        }, rotated));\n      });\n    });\n\n    that._redesignAxes(argumentAxesPopulatedOptions, true, paneWithNonVirtualAxis);\n\n    that._redesignAxes(valueAxesPopulatedOptions, false);\n  },\n  _redesignAxes: function _redesignAxes(options, isArgumentAxes, paneWithNonVirtualAxis) {\n    var that = this;\n    var axesBasis = [];\n    var axes = isArgumentAxes ? that._argumentAxes : that._valueAxes;\n\n    _each(options, function (_, opt) {\n      var curAxes = axes && axes.filter(function (a) {\n        return a.name === opt.name && (!_isDefined(opt.pane) && that.panes.some(function (p) {\n          return p.name === a.pane;\n        }) || a.pane === opt.pane);\n      });\n\n      if (curAxes && curAxes.length > 0) {\n        _each(curAxes, function (_, axis) {\n          axis.updateOptions(opt);\n          axis.validate();\n          axesBasis.push({\n            axis: axis\n          });\n        });\n      } else {\n        axesBasis.push({\n          options: opt\n        });\n      }\n    });\n\n    if (axes) {\n      _reverseEach(axes, function (index, axis) {\n        if (!axesBasis.some(function (basis) {\n          return basis.axis && basis.axis === axis;\n        })) {\n          that._disposeAxis(index, isArgumentAxes);\n        }\n      });\n    } else {\n      if (isArgumentAxes) {\n        axes = that._argumentAxes = [];\n      } else {\n        axes = that._valueAxes = [];\n      }\n    }\n\n    _each(axesBasis, function (index, basis) {\n      var axis = basis.axis;\n\n      if (basis.axis && isArgumentAxes) {\n        basis.axis.isVirtual = basis.axis.pane !== paneWithNonVirtualAxis;\n      } else {\n        if (basis.options) {\n          axis = that._createAxis(isArgumentAxes, basis.options, isArgumentAxes ? basis.options.pane !== paneWithNonVirtualAxis : void 0, isArgumentAxes ? index : void 0);\n          axes.push(axis);\n        }\n      }\n\n      axis.applyVisualRangeSetter(that._getVisualRangeSetter());\n    });\n  },\n  _disposeAxis: function _disposeAxis(index, isArgumentAxis) {\n    var axes = isArgumentAxis ? this._argumentAxes : this._valueAxes;\n    var axis = axes[index];\n\n    if (!axis) {\n      return;\n    }\n\n    axis.dispose();\n    axes.splice(index, 1);\n  },\n  _disposeAxes: function _disposeAxes() {\n    var that = this;\n    var disposeObjectsInArray = that._disposeObjectsInArray;\n    disposeObjectsInArray.call(that, \"_argumentAxes\");\n    disposeObjectsInArray.call(that, \"_valueAxes\");\n  },\n  _appendAdditionalSeriesGroups: function _appendAdditionalSeriesGroups() {\n    this._crosshairCursorGroup.linkAppend();\n\n    this._scrollBar && this._scrollBarGroup.linkAppend();\n  },\n  _getLegendTargets: function _getLegendTargets() {\n    var _this = this;\n\n    return (this.series || []).map(function (s) {\n      var item = _this._getLegendOptions(s);\n\n      item.legendData.series = s;\n\n      if (!s.getOptions().showInLegend) {\n        item.legendData.visible = false;\n      }\n\n      return item;\n    });\n  },\n  _legendItemTextField: \"name\",\n  _seriesPopulatedHandlerCore: function _seriesPopulatedHandlerCore() {\n    this._processSeriesFamilies();\n\n    this._processValueAxisFormat();\n  },\n  _renderTrackers: function _renderTrackers() {\n    var that = this;\n    var i;\n\n    for (i = 0; i < that.series.length; ++i) {\n      that.series[i].drawTrackers();\n    }\n  },\n  _specialProcessSeries: function _specialProcessSeries() {\n    this._processSeriesFamilies();\n  },\n  _processSeriesFamilies: function _processSeriesFamilies() {\n    var that = this;\n    var types = [];\n    var families = [];\n    var paneSeries;\n    var themeManager = that._themeManager;\n    var negativesAsZeroes = themeManager.getOptions(\"negativesAsZeroes\");\n    var negativesAsZeros = themeManager.getOptions(\"negativesAsZeros\");\n    var familyOptions = {\n      equalBarWidth: themeManager.getOptions(\"equalBarWidth\"),\n      minBubbleSize: themeManager.getOptions(\"minBubbleSize\"),\n      maxBubbleSize: themeManager.getOptions(\"maxBubbleSize\"),\n      barWidth: themeManager.getOptions(\"barWidth\"),\n      barGroupPadding: themeManager.getOptions(\"barGroupPadding\"),\n      barGroupWidth: themeManager.getOptions(\"barGroupWidth\"),\n      negativesAsZeroes: _isDefined(negativesAsZeroes) ? negativesAsZeroes : negativesAsZeros\n    };\n\n    if (that.seriesFamilies && that.seriesFamilies.length) {\n      _each(that.seriesFamilies, function (_, family) {\n        family.updateOptions(familyOptions);\n        family.adjustSeriesValues();\n      });\n\n      return;\n    }\n\n    _each(that.series, function (_, item) {\n      if (inArray(item.type, types) === -1) {\n        types.push(item.type);\n      }\n    });\n\n    _each(that._getLayoutTargets(), function (_, pane) {\n      paneSeries = that._getSeriesForPane(pane.name);\n\n      _each(types, function (_, type) {\n        var family = new seriesFamilyModule.SeriesFamily({\n          type: type,\n          pane: pane.name,\n          equalBarWidth: familyOptions.equalBarWidth,\n          minBubbleSize: familyOptions.minBubbleSize,\n          maxBubbleSize: familyOptions.maxBubbleSize,\n          barWidth: familyOptions.barWidth,\n          barGroupPadding: familyOptions.barGroupPadding,\n          barGroupWidth: familyOptions.barGroupWidth,\n          negativesAsZeroes: familyOptions.negativesAsZeroes,\n          rotated: that._isRotated()\n        });\n        family.add(paneSeries);\n        family.adjustSeriesValues();\n        families.push(family);\n      });\n    });\n\n    that.seriesFamilies = families;\n  },\n  _updateSeriesDimensions: function _updateSeriesDimensions() {\n    var that = this;\n    var i;\n    var seriesFamilies = that.seriesFamilies || [];\n\n    for (i = 0; i < seriesFamilies.length; i++) {\n      var family = seriesFamilies[i];\n      family.updateSeriesValues();\n      family.adjustSeriesDimensions();\n    }\n  },\n  _getLegendCallBack: function _getLegendCallBack(series) {\n    return this._legend && this._legend.getActionCallback(series);\n  },\n  _appendAxesGroups: function _appendAxesGroups() {\n    var that = this;\n\n    that._stripsGroup.linkAppend();\n\n    that._gridGroup.linkAppend();\n\n    that._axesGroup.linkAppend();\n\n    that._constantLinesGroup.linkAppend();\n\n    that._labelAxesGroup.linkAppend();\n\n    that._scaleBreaksGroup.linkAppend();\n  },\n  _populateMarginOptions: function _populateMarginOptions() {\n    var that = this;\n    var bubbleSize = estimateBubbleSize(that.getSize(), that.panes.length, that._themeManager.getOptions(\"maxBubbleSize\"), that._isRotated());\n    var argumentMarginOptions = {};\n\n    that._valueAxes.forEach(function (valueAxis) {\n      var groupSeries = that.series.filter(function (series) {\n        return series.getValueAxis() === valueAxis;\n      });\n      var marginOptions = {};\n      groupSeries.forEach(function (series) {\n        if (series.isVisible()) {\n          var seriesMarginOptions = processBubbleMargin(series.getMarginOptions(), bubbleSize);\n          marginOptions = mergeMarginOptions(marginOptions, seriesMarginOptions);\n          argumentMarginOptions = mergeMarginOptions(argumentMarginOptions, seriesMarginOptions);\n        }\n      });\n      valueAxis.setMarginOptions(marginOptions);\n    });\n\n    that._argumentAxes.forEach(function (a) {\n      return a.setMarginOptions(argumentMarginOptions);\n    });\n  },\n  _populateBusinessRange: function _populateBusinessRange(updatedAxis, keepRange) {\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    var argRange = new rangeModule.Range({\n      rotated: !!rotated\n    });\n\n    var series = that._getVisibleSeries();\n\n    that._valueAxes.forEach(function (valueAxis) {\n      var groupRange = new rangeModule.Range({\n        rotated: !!rotated,\n        pane: valueAxis.pane,\n        axis: valueAxis.name\n      });\n      var groupSeries = series.filter(function (series) {\n        return series.getValueAxis() === valueAxis;\n      });\n      groupSeries.forEach(function (series) {\n        var seriesRange = series.getRangeData();\n        groupRange.addRange(seriesRange.val);\n        argRange.addRange(seriesRange.arg);\n      });\n\n      if (!updatedAxis || updatedAxis && groupSeries.length && valueAxis === updatedAxis) {\n        valueAxis.setGroupSeries(groupSeries);\n        valueAxis.setBusinessRange(groupRange, that._axesReinitialized || keepRange, that._argumentAxes[0]._lastVisualRangeUpdateMode);\n      }\n    });\n\n    if (!updatedAxis || updatedAxis && series.length) {\n      that._argumentAxes.forEach(function (a) {\n        return a.setBusinessRange(argRange, that._axesReinitialized, void 0, that._groupsData.categories);\n      });\n    }\n\n    that._populateMarginOptions();\n  },\n  getArgumentAxis: function getArgumentAxis() {\n    return (this._argumentAxes || []).filter(function (a) {\n      return !a.isVirtual;\n    })[0];\n  },\n  getValueAxis: function getValueAxis(name) {\n    var _this2 = this;\n\n    return (this._valueAxes || []).filter(_isDefined(name) ? function (a) {\n      return a.name === name;\n    } : function (a) {\n      return a.pane === _this2.defaultPane;\n    })[0];\n  },\n  _getGroupsData: function _getGroupsData() {\n    var that = this;\n    var groups = [];\n\n    that._valueAxes.forEach(function (axis) {\n      groups.push({\n        series: that.series.filter(function (series) {\n          return series.getValueAxis() === axis;\n        }),\n        valueAxis: axis,\n        valueOptions: axis.getOptions()\n      });\n    });\n\n    return {\n      groups: groups,\n      argumentAxes: that._argumentAxes,\n      argumentOptions: that._argumentAxes[0].getOptions()\n    };\n  },\n  _groupSeries: function _groupSeries() {\n    var that = this;\n\n    that._correctValueAxes(false);\n\n    that._groupsData = that._getGroupsData();\n  },\n  _processValueAxisFormat: function _processValueAxisFormat() {\n    var axesWithFullStackedFormat = [];\n    this.series.forEach(function (series) {\n      var axis = series.getValueAxis();\n\n      if (series.isFullStackedSeries()) {\n        axis.setPercentLabelFormat();\n        axesWithFullStackedFormat.push(axis);\n      }\n    });\n\n    this._valueAxes.forEach(function (axis) {\n      if (axesWithFullStackedFormat.indexOf(axis) === -1) {\n        axis.resetAutoLabelFormat();\n      }\n    });\n  },\n  _populateAxesOptions: function _populateAxesOptions(typeSelector, userOptions, axisOptions, rotated, virtual) {\n    var that = this;\n\n    var preparedUserOptions = that._prepareStripsAndConstantLines(typeSelector, userOptions, rotated);\n\n    var options = _extend(true, {}, preparedUserOptions, axisOptions, that._prepareAxisOptions(typeSelector, preparedUserOptions, rotated));\n\n    if (virtual) {\n      options.visible = options.tick.visible = options.minorTick.visible = options.label.visible = false;\n      options.title = {};\n    }\n\n    return options;\n  },\n  _createAxis: function _createAxis(isArgumentAxes, options, virtual, index) {\n    var that = this;\n    var typeSelector = isArgumentAxes ? \"argumentAxis\" : \"valueAxis\";\n\n    var renderingSettings = _extend({\n      renderer: that._renderer,\n      incidentOccurred: that._incidentOccurred,\n      eventTrigger: that._eventTrigger,\n      axisClass: isArgumentAxes ? \"arg\" : \"val\",\n      widgetClass: \"dxc\",\n      stripsGroup: that._stripsGroup,\n      labelAxesGroup: that._labelAxesGroup,\n      constantLinesGroup: that._constantLinesGroup,\n      scaleBreaksGroup: that._scaleBreaksGroup,\n      axesContainerGroup: that._axesGroup,\n      gridGroup: that._gridGroup,\n      isArgumentAxis: isArgumentAxes\n    }, that._getAxisRenderingOptions(typeSelector));\n\n    var axis = new axisModule.Axis(renderingSettings);\n    axis.updateOptions(options);\n    axis.isVirtual = virtual;\n    return axis;\n  },\n  _applyVisualRangeByVirtualAxes: function _applyVisualRangeByVirtualAxes(axis, range) {\n    return false;\n  },\n  _applyCustomVisualRangeOption: function _applyCustomVisualRangeOption(axis, range) {\n    var that = this;\n\n    if (axis.getOptions().optionPath) {\n      that._parseVisualRangeOption(\"\".concat(axis.getOptions().optionPath, \".visualRange\"), range);\n    }\n  },\n  _getVisualRangeSetter: function _getVisualRangeSetter() {\n    var chart = this;\n    return function (axis, _ref) {\n      var skipEventRising = _ref.skipEventRising,\n          range = _ref.range;\n\n      chart._applyCustomVisualRangeOption(axis, range);\n\n      axis.setCustomVisualRange(range);\n      axis.skipEventRising = skipEventRising;\n\n      if (!chart._applyVisualRangeByVirtualAxes(axis, range)) {\n        if (chart._applyingChanges) {\n          chart._change_VISUAL_RANGE();\n        } else {\n          chart._requestChange([VISUAL_RANGE]);\n        }\n      }\n    };\n  },\n  _getTrackerSettings: function _getTrackerSettings() {\n    return _extend(this.callBase(), {\n      argumentAxis: this.getArgumentAxis()\n    });\n  },\n  _prepareStripsAndConstantLines: function _prepareStripsAndConstantLines(typeSelector, userOptions, rotated) {\n    userOptions = this._themeManager.getOptions(typeSelector, userOptions, rotated);\n\n    if (userOptions.strips) {\n      _each(userOptions.strips, function (i) {\n        userOptions.strips[i] = _extend(true, {}, userOptions.stripStyle, userOptions.strips[i]);\n      });\n    }\n\n    if (userOptions.constantLines) {\n      _each(userOptions.constantLines, function (i, line) {\n        userOptions.constantLines[i] = _extend(true, {}, userOptions.constantLineStyle, line);\n      });\n    }\n\n    return userOptions;\n  },\n  refresh: function refresh() {\n    this._disposeAxes();\n\n    this.callBase();\n  },\n  _layoutAxes: function _layoutAxes(drawAxes) {\n    var that = this;\n    var cleanPanesCanvases = drawAxes();\n    var needSpace = that.checkForMoreSpaceForPanesCanvas();\n\n    if (needSpace) {\n      var size = this._layout.backward(this._rect, this._rect, [needSpace.width, needSpace.height]);\n\n      needSpace.width = Math.max(0, size[0]);\n      needSpace.height = Math.max(0, size[1]);\n      this._canvas = this._createCanvasFromRect(this._rect);\n      drawAxes(needSpace, cleanPanesCanvases);\n    }\n  },\n  checkForMoreSpaceForPanesCanvas: function checkForMoreSpaceForPanesCanvas() {\n    return this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(), this._isRotated());\n  },\n  _parseVisualRangeOption: function _parseVisualRangeOption(fullName, value) {\n    var that = this;\n    var name = fullName.split(/[.[]/)[0];\n    var index = fullName.match(/\\d+/g);\n    index = _isDefined(index) ? parseInt(index[0]) : index;\n\n    if (fullName.indexOf(\"visualRange\") > 0) {\n      that._setCustomVisualRange(name, index, value);\n    } else {\n      if ((\"object\" === type(value) || _isArray(value)) && name.indexOf(\"Axis\") > 0 && JSON.stringify(value).indexOf(\"visualRange\") > 0) {\n        if (_isDefined(value.visualRange)) {\n          that._setCustomVisualRange(name, index, value.visualRange);\n        } else {\n          if (_isArray(value)) {\n            value.forEach(function (a, i) {\n              return _isDefined(a.visualRange) && that._setCustomVisualRange(name, i, a.visualRange);\n            });\n          }\n        }\n      }\n    }\n  },\n  _setCustomVisualRange: function _setCustomVisualRange(axesName, index, value) {\n    var that = this;\n    var options = that._options[axesName];\n\n    if (!options) {\n      return;\n    }\n\n    if (!_isDefined(index)) {\n      options._customVisualRange = value;\n    } else {\n      options[index]._customVisualRange = value;\n    }\n\n    that._axesReinitialized = true;\n  },\n  _raiseZoomEndHandlers: function _raiseZoomEndHandlers() {\n    this._valueAxes.forEach(function (axis) {\n      return axis.handleZoomEnd();\n    });\n  },\n  _setOptionsByReference: function _setOptionsByReference() {\n    this.callBase();\n\n    _extend(this._optionsByReference, {\n      \"valueAxis.visualRange\": true\n    });\n  },\n  _notifyOptionChanged: function _notifyOptionChanged(option, value, previousValue) {\n    this.callBase.apply(this, arguments);\n\n    if (!this._optionChangedLocker) {\n      this._parseVisualRangeOption(option, value);\n    }\n  },\n  _notifyVisualRange: function _notifyVisualRange() {\n    var that = this;\n\n    that._valueAxes.forEach(function (axis) {\n      if (axis.getOptions().optionPath) {\n        var path = \"\".concat(axis.getOptions().optionPath, \".visualRange\");\n        var visualRange = convertVisualRangeObject(axis.visualRange(), !_isArray(that.option(path)));\n\n        if (!axis.skipEventRising || !rangesAreEqual(visualRange, that.option(path))) {\n          that.option(path, visualRange);\n        } else {\n          axis.skipEventRising = null;\n        }\n      }\n    });\n  },\n  _notify: function _notify() {\n    this.callBase();\n    this._axesReinitialized = false;\n\n    if (true !== this.option(\"disableTwoWayBinding\")) {\n      this._notifyVisualRange();\n    }\n  },\n  _getAxesForScaling: function _getAxesForScaling() {\n    return this._valueAxes;\n  },\n  _getAxesByOptionPath: function _getAxesByOptionPath(arg, isDirectOption, optionName) {\n    var that = this;\n\n    var sourceAxes = that._getAxesForScaling();\n\n    var axes = [];\n\n    if (isDirectOption) {\n      var axisPath;\n\n      if (arg.fullName) {\n        axisPath = arg.fullName.slice(0, arg.fullName.indexOf(\".\"));\n      }\n\n      axes = sourceAxes.filter(function (a) {\n        return a.getOptions().optionPath === axisPath;\n      });\n    } else {\n      if (\"object\" === type(arg.value)) {\n        axes = sourceAxes.filter(function (a) {\n          return a.getOptions().optionPath === arg.name;\n        });\n      } else {\n        if (_isArray(arg.value)) {\n          arg.value.forEach(function (v, index) {\n            var axis = sourceAxes.filter(function (a) {\n              return a.getOptions().optionPath === \"\".concat(arg.name, \"[\").concat(index, \"]\");\n            })[0];\n            _isDefined(v[optionName]) && _isDefined(axis) && (axes[index] = axis);\n          });\n        }\n      }\n    }\n\n    return axes;\n  },\n  _optionChanged: function _optionChanged(arg) {\n    var that = this;\n\n    if (!that._optionChangedLocker) {\n      var optionName = \"visualRange\";\n      var axes;\n      var isDirectOption = arg.fullName.indexOf(optionName) > 0 ? true : that.getPartialChangeOptionsName(arg).indexOf(optionName) > -1 ? false : void 0;\n\n      if (_isDefined(isDirectOption)) {\n        axes = that._getAxesByOptionPath(arg, isDirectOption, optionName);\n\n        if (axes) {\n          if (axes.length > 1 || _isArray(arg.value)) {\n            axes.forEach(function (a, index) {\n              return setAxisVisualRangeByOption(arg, a, isDirectOption, index);\n            });\n          } else {\n            if (1 === axes.length) {\n              setAxisVisualRangeByOption(arg, axes[0], isDirectOption);\n            }\n          }\n        }\n      }\n    }\n\n    that.callBase(arg);\n  },\n  _change_VISUAL_RANGE: function _change_VISUAL_RANGE() {\n    var that = this;\n\n    that._recreateSizeDependentObjects(false);\n\n    if (!that._changes.has(\"FULL_RENDER\")) {\n      var resizePanesOnZoom = this.option(\"resizePanesOnZoom\");\n\n      that._doRender({\n        force: true,\n        drawTitle: false,\n        drawLegend: false,\n        adjustAxes: _isDefined(resizePanesOnZoom) ? resizePanesOnZoom : this.option(\"adjustAxesOnZoom\") || false,\n        animate: false\n      });\n\n      that._raiseZoomEndHandlers();\n    }\n  },\n  resetVisualRange: function resetVisualRange() {\n    var that = this;\n\n    that._valueAxes.forEach(function (axis) {\n      axis.resetVisualRange(false);\n\n      that._applyCustomVisualRangeOption(axis);\n    });\n\n    that._requestChange([VISUAL_RANGE]);\n  },\n  _legendDataField: \"series\",\n  _adjustSeriesLabels: _noop,\n  _correctValueAxes: _noop\n});\nexports.AdvancedChart = AdvancedChart;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/chart_components/advanced_chart.js"],"names":["key","Object","value","enumerable","configurable","writable","obj","extend","require","inArray","iteratorModule","rangeModule","DEFAULT_AXIS_NAME","axisModule","seriesFamilyModule","BaseChart","crosshairModule","_isArray","Array","_isDefined","_each","_reverseEach","_noop","_extend","vizUtils","type","convertVisualRangeObject","rangesAreEqual","_map","mergeMarginOptions","FONT","COMMON_AXIS_SETTINGS","DEFAULT_PANE_NAME","VISUAL_RANGE","axisOptions","opt","width","rotated","size","height","Math","visualRange","arg","options","skipEventRising","pathElements","destElem","allowPartialUpdate","_defineProperty","axis","AdvancedChart","_setDeprecatedOptions","barWidth","since","message","equalBarWidth","_fontFields","_partialOptionChangesMap","_customVisualRange","strips","constantLines","_partialOptionChangesPath","argumentAxis","valueAxis","_initCore","_disposeCore","disposeObjectsInArray","panesClipRects","_dispose","that","_createPanes","_cleanPanesClipRects","clipArray","clipRect","_getElementsClipRectID","clipShape","_getPaneIndex","name","paneName","pane","paneIndex","_reinitAxes","_getCrosshairMargins","crosshairOptions","crosshairEnabled","margins","x","y","_populateAxes","panes","argumentAxesOptions","prepareAxis","valueAxisOption","valueAxesOptions","argumentAxesPopulatedOptions","valueAxesPopulatedOptions","axisNames","valueAxesCounter","crosshairMargins","paneWithNonVirtualAxis","virtual","optionPath","crosshairMargin","axisPanes","getNextAxisName","priority","_redesignAxes","axesBasis","axes","isArgumentAxes","curAxes","a","p","basis","_disposeAxis","isArgumentAxis","_disposeAxes","_appendAdditionalSeriesGroups","_getLegendTargets","_this","item","s","_legendItemTextField","_seriesPopulatedHandlerCore","_renderTrackers","i","_specialProcessSeries","_processSeriesFamilies","types","families","themeManager","negativesAsZeroes","negativesAsZeros","familyOptions","minBubbleSize","maxBubbleSize","barGroupPadding","barGroupWidth","family","paneSeries","_updateSeriesDimensions","seriesFamilies","_getLegendCallBack","_appendAxesGroups","_populateMarginOptions","bubbleSize","estimateBubbleSize","argumentMarginOptions","groupSeries","series","marginOptions","seriesMarginOptions","processBubbleMargin","_populateBusinessRange","argRange","groupRange","seriesRange","updatedAxis","getArgumentAxis","getValueAxis","_this2","_getGroupsData","groups","valueOptions","argumentAxes","argumentOptions","_groupSeries","_processValueAxisFormat","axesWithFullStackedFormat","_populateAxesOptions","preparedUserOptions","_createAxis","typeSelector","renderingSettings","renderer","incidentOccurred","eventTrigger","axisClass","widgetClass","stripsGroup","labelAxesGroup","constantLinesGroup","scaleBreaksGroup","axesContainerGroup","gridGroup","_applyVisualRangeByVirtualAxes","_applyCustomVisualRangeOption","_getVisualRangeSetter","chart","_ref","range","_getTrackerSettings","_prepareStripsAndConstantLines","userOptions","refresh","_layoutAxes","cleanPanesCanvases","drawAxes","needSpace","checkForMoreSpaceForPanesCanvas","_parseVisualRangeOption","fullName","index","parseInt","JSON","_setCustomVisualRange","_raiseZoomEndHandlers","_setOptionsByReference","_notifyOptionChanged","_notifyVisualRange","path","_notify","_getAxesForScaling","_getAxesByOptionPath","sourceAxes","axisPath","v","_optionChanged","optionName","isDirectOption","setAxisVisualRangeByOption","_change_VISUAL_RANGE","resizePanesOnZoom","force","drawTitle","drawLegend","adjustAxes","animate","resetVisualRange","_legendDataField","_adjustSeriesLabels","_correctValueAxes","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/chart_components/advanced_chart.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar inArray = require(\"../../core/utils/array\").inArray;\r\nvar iteratorModule = require(\"../../core/utils/iterator\");\r\nvar rangeModule = require(\"../translators/range\");\r\nvar DEFAULT_AXIS_NAME = \"defaultAxisName\";\r\nvar axisModule = require(\"../axes/base_axis\");\r\nvar seriesFamilyModule = require(\"../core/series_family\");\r\nvar BaseChart = require(\"./base_chart\").BaseChart;\r\nvar crosshairModule = require(\"./crosshair\");\r\nvar _isArray = Array.isArray;\r\nvar _isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar _each = iteratorModule.each;\r\nvar _reverseEach = iteratorModule.reverseEach;\r\nvar _noop = require(\"../../core/utils/common\").noop;\r\nvar _extend = extend;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar type = require(\"../../core/utils/type\").type;\r\nvar convertVisualRangeObject = vizUtils.convertVisualRangeObject;\r\nvar rangesAreEqual = vizUtils.rangesAreEqual;\r\nvar _map = vizUtils.map;\r\nvar mergeMarginOptions = vizUtils.mergeMarginOptions;\r\nvar FONT = \"font\";\r\nvar COMMON_AXIS_SETTINGS = \"commonAxisSettings\";\r\nvar DEFAULT_PANE_NAME = \"default\";\r\nvar VISUAL_RANGE = \"VISUAL_RANGE\";\r\n\r\nfunction prepareAxis(axisOptions) {\r\n    return _isArray(axisOptions) ? 0 === axisOptions.length ? [{}] : axisOptions : [axisOptions]\r\n}\r\n\r\nfunction processBubbleMargin(opt, bubbleSize) {\r\n    if (opt.processBubbleSize) {\r\n        opt.size = bubbleSize\r\n    }\r\n    return opt\r\n}\r\n\r\nfunction estimateBubbleSize(size, panesCount, maxSize, rotated) {\r\n    var width = rotated ? size.width / panesCount : size.width;\r\n    var height = rotated ? size.height : size.height / panesCount;\r\n    return Math.min(width, height) * maxSize\r\n}\r\n\r\nfunction setAxisVisualRangeByOption(arg, axis, isDirectOption, index) {\r\n    var options;\r\n    var visualRange;\r\n    if (isDirectOption) {\r\n        visualRange = arg.value;\r\n        options = {\r\n            skipEventRising: true\r\n        };\r\n        var pathElements = arg.fullName.split(\".\");\r\n        var destElem = pathElements[pathElements.length - 1];\r\n        if (\"endValue\" === destElem || \"startValue\" === destElem) {\r\n            options = {\r\n                allowPartialUpdate: true\r\n            };\r\n            visualRange = _defineProperty({}, destElem, arg.value)\r\n        }\r\n    } else {\r\n        visualRange = (_isDefined(index) ? arg.value[index] : arg.value).visualRange\r\n    }\r\n    axis.visualRange(visualRange, options)\r\n}\r\nvar AdvancedChart = BaseChart.inherit({\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase.apply(this, arguments);\r\n        _extend(this._deprecatedOptions, {\r\n            barWidth: {\r\n                since: \"18.1\",\r\n                message: \"Use the 'commonSeriesSettings.barPadding' or 'series.barPadding' option instead\"\r\n            },\r\n            equalBarWidth: {\r\n                since: \"18.1\",\r\n                message: \"Use the 'commonSeriesSettings.ignoreEmptyPoints' or 'series.ignoreEmptyPoints' option instead\"\r\n            }\r\n        })\r\n    },\r\n    _fontFields: [COMMON_AXIS_SETTINGS + \".label.\" + FONT, COMMON_AXIS_SETTINGS + \".title.\" + FONT],\r\n    _partialOptionChangesMap: {\r\n        visualRange: VISUAL_RANGE,\r\n        _customVisualRange: VISUAL_RANGE,\r\n        strips: \"REFRESH_AXES\",\r\n        constantLines: \"REFRESH_AXES\"\r\n    },\r\n    _partialOptionChangesPath: {\r\n        argumentAxis: [\"strips\", \"constantLines\", \"visualRange\", \"_customVisualRange\"],\r\n        valueAxis: [\"strips\", \"constantLines\", \"visualRange\", \"_customVisualRange\"]\r\n    },\r\n    _initCore: function() {\r\n        this._panesClipRects = {};\r\n        this.callBase()\r\n    },\r\n    _disposeCore: function() {\r\n        var disposeObjectsInArray = this._disposeObjectsInArray;\r\n        var panesClipRects = this._panesClipRects;\r\n        this.callBase();\r\n        disposeObjectsInArray.call(panesClipRects, \"fixed\");\r\n        disposeObjectsInArray.call(panesClipRects, \"base\");\r\n        disposeObjectsInArray.call(panesClipRects, \"wide\");\r\n        this._panesClipRects = null\r\n    },\r\n    _dispose: function() {\r\n        var that = this;\r\n        var disposeObjectsInArray = this._disposeObjectsInArray;\r\n        that.callBase();\r\n        that.panes = null;\r\n        if (that._legend) {\r\n            that._legend.dispose();\r\n            that._legend = null\r\n        }\r\n        disposeObjectsInArray.call(that, \"panesBackground\");\r\n        disposeObjectsInArray.call(that, \"seriesFamilies\");\r\n        that._disposeAxes()\r\n    },\r\n    _createPanes: function() {\r\n        this._cleanPanesClipRects(\"fixed\");\r\n        this._cleanPanesClipRects(\"base\");\r\n        this._cleanPanesClipRects(\"wide\")\r\n    },\r\n    _cleanPanesClipRects: function(clipArrayName) {\r\n        var clipArray = this._panesClipRects[clipArrayName];\r\n        (clipArray || []).forEach(function(clipRect) {\r\n            return clipRect && clipRect.dispose()\r\n        });\r\n        this._panesClipRects[clipArrayName] = []\r\n    },\r\n    _getElementsClipRectID: function(paneName) {\r\n        var clipShape = this._panesClipRects.fixed[this._getPaneIndex(paneName)];\r\n        return clipShape && clipShape.id\r\n    },\r\n    _getPaneIndex: function(paneName) {\r\n        var paneIndex;\r\n        var name = paneName || DEFAULT_PANE_NAME;\r\n        _each(this.panes, function(index, pane) {\r\n            if (pane.name === name) {\r\n                paneIndex = index;\r\n                return false\r\n            }\r\n        });\r\n        return paneIndex\r\n    },\r\n    _reinitAxes: function() {\r\n        this.panes = this._createPanes();\r\n        this._populateAxes();\r\n        this._axesReinitialized = true\r\n    },\r\n    _getCrosshairMargins: function() {\r\n        var crosshairOptions = this._getCrosshairOptions() || {};\r\n        var crosshairEnabled = crosshairOptions.enabled;\r\n        var margins = crosshairModule.getMargins();\r\n        return {\r\n            x: crosshairEnabled && crosshairOptions.horizontalLine.visible ? margins.x : 0,\r\n            y: crosshairEnabled && crosshairOptions.verticalLine.visible ? margins.y : 0\r\n        }\r\n    },\r\n    _populateAxes: function() {\r\n        var that = this;\r\n        var panes = that.panes;\r\n        var rotated = that._isRotated();\r\n        var argumentAxesOptions = prepareAxis(that.option(\"argumentAxis\") || {})[0];\r\n        var valueAxisOption = that.option(\"valueAxis\");\r\n        var valueAxesOptions = prepareAxis(valueAxisOption || {});\r\n        var argumentAxesPopulatedOptions = [];\r\n        var valueAxesPopulatedOptions = [];\r\n        var axisNames = [];\r\n        var valueAxesCounter = 0;\r\n        var paneWithNonVirtualAxis;\r\n        var crosshairMargins = that._getCrosshairMargins();\r\n\r\n        function getNextAxisName() {\r\n            return DEFAULT_AXIS_NAME + valueAxesCounter++\r\n        }\r\n        if (rotated) {\r\n            paneWithNonVirtualAxis = \"right\" === argumentAxesOptions.position ? panes[panes.length - 1].name : panes[0].name\r\n        } else {\r\n            paneWithNonVirtualAxis = \"top\" === argumentAxesOptions.position ? panes[0].name : panes[panes.length - 1].name\r\n        }\r\n        argumentAxesPopulatedOptions = _map(panes, function(pane) {\r\n            var virtual = pane.name !== paneWithNonVirtualAxis;\r\n            return that._populateAxesOptions(\"argumentAxis\", argumentAxesOptions, {\r\n                pane: pane.name,\r\n                name: null,\r\n                optionPath: \"argumentAxis\",\r\n                crosshairMargin: rotated ? crosshairMargins.x : crosshairMargins.y\r\n            }, rotated, virtual)\r\n        });\r\n        _each(valueAxesOptions, function(priority, axisOptions) {\r\n            var axisPanes = [];\r\n            var name = axisOptions.name;\r\n            if (name && inArray(name, axisNames) !== -1) {\r\n                that._incidentOccurred(\"E2102\");\r\n                return\r\n            }\r\n            name && axisNames.push(name);\r\n            if (axisOptions.pane) {\r\n                axisPanes.push(axisOptions.pane)\r\n            }\r\n            if (axisOptions.panes && axisOptions.panes.length) {\r\n                axisPanes = axisPanes.concat(axisOptions.panes.slice(0))\r\n            }\r\n            axisPanes = vizUtils.unique(axisPanes);\r\n            if (!axisPanes.length) {\r\n                axisPanes.push(void 0)\r\n            }\r\n            _each(axisPanes, function(_, pane) {\r\n                var optionPath = _isArray(valueAxisOption) ? \"valueAxis[\".concat(priority, \"]\") : \"valueAxis\";\r\n                valueAxesPopulatedOptions.push(that._populateAxesOptions(\"valueAxis\", axisOptions, {\r\n                    name: name || getNextAxisName(),\r\n                    pane: pane,\r\n                    priority: priority,\r\n                    optionPath: optionPath,\r\n                    crosshairMargin: rotated ? crosshairMargins.y : crosshairMargins.x\r\n                }, rotated))\r\n            })\r\n        });\r\n        that._redesignAxes(argumentAxesPopulatedOptions, true, paneWithNonVirtualAxis);\r\n        that._redesignAxes(valueAxesPopulatedOptions, false)\r\n    },\r\n    _redesignAxes: function(options, isArgumentAxes, paneWithNonVirtualAxis) {\r\n        var that = this;\r\n        var axesBasis = [];\r\n        var axes = isArgumentAxes ? that._argumentAxes : that._valueAxes;\r\n        _each(options, function(_, opt) {\r\n            var curAxes = axes && axes.filter(function(a) {\r\n                return a.name === opt.name && (!_isDefined(opt.pane) && that.panes.some(function(p) {\r\n                    return p.name === a.pane\r\n                }) || a.pane === opt.pane)\r\n            });\r\n            if (curAxes && curAxes.length > 0) {\r\n                _each(curAxes, function(_, axis) {\r\n                    axis.updateOptions(opt);\r\n                    axis.validate();\r\n                    axesBasis.push({\r\n                        axis: axis\r\n                    })\r\n                })\r\n            } else {\r\n                axesBasis.push({\r\n                    options: opt\r\n                })\r\n            }\r\n        });\r\n        if (axes) {\r\n            _reverseEach(axes, function(index, axis) {\r\n                if (!axesBasis.some(function(basis) {\r\n                        return basis.axis && basis.axis === axis\r\n                    })) {\r\n                    that._disposeAxis(index, isArgumentAxes)\r\n                }\r\n            })\r\n        } else {\r\n            if (isArgumentAxes) {\r\n                axes = that._argumentAxes = []\r\n            } else {\r\n                axes = that._valueAxes = []\r\n            }\r\n        }\r\n        _each(axesBasis, function(index, basis) {\r\n            var axis = basis.axis;\r\n            if (basis.axis && isArgumentAxes) {\r\n                basis.axis.isVirtual = basis.axis.pane !== paneWithNonVirtualAxis\r\n            } else {\r\n                if (basis.options) {\r\n                    axis = that._createAxis(isArgumentAxes, basis.options, isArgumentAxes ? basis.options.pane !== paneWithNonVirtualAxis : void 0, isArgumentAxes ? index : void 0);\r\n                    axes.push(axis)\r\n                }\r\n            }\r\n            axis.applyVisualRangeSetter(that._getVisualRangeSetter())\r\n        })\r\n    },\r\n    _disposeAxis: function(index, isArgumentAxis) {\r\n        var axes = isArgumentAxis ? this._argumentAxes : this._valueAxes;\r\n        var axis = axes[index];\r\n        if (!axis) {\r\n            return\r\n        }\r\n        axis.dispose();\r\n        axes.splice(index, 1)\r\n    },\r\n    _disposeAxes: function() {\r\n        var that = this;\r\n        var disposeObjectsInArray = that._disposeObjectsInArray;\r\n        disposeObjectsInArray.call(that, \"_argumentAxes\");\r\n        disposeObjectsInArray.call(that, \"_valueAxes\")\r\n    },\r\n    _appendAdditionalSeriesGroups: function() {\r\n        this._crosshairCursorGroup.linkAppend();\r\n        this._scrollBar && this._scrollBarGroup.linkAppend()\r\n    },\r\n    _getLegendTargets: function() {\r\n        var _this = this;\r\n        return (this.series || []).map(function(s) {\r\n            var item = _this._getLegendOptions(s);\r\n            item.legendData.series = s;\r\n            if (!s.getOptions().showInLegend) {\r\n                item.legendData.visible = false\r\n            }\r\n            return item\r\n        })\r\n    },\r\n    _legendItemTextField: \"name\",\r\n    _seriesPopulatedHandlerCore: function() {\r\n        this._processSeriesFamilies();\r\n        this._processValueAxisFormat()\r\n    },\r\n    _renderTrackers: function() {\r\n        var that = this;\r\n        var i;\r\n        for (i = 0; i < that.series.length; ++i) {\r\n            that.series[i].drawTrackers()\r\n        }\r\n    },\r\n    _specialProcessSeries: function() {\r\n        this._processSeriesFamilies()\r\n    },\r\n    _processSeriesFamilies: function() {\r\n        var that = this;\r\n        var types = [];\r\n        var families = [];\r\n        var paneSeries;\r\n        var themeManager = that._themeManager;\r\n        var negativesAsZeroes = themeManager.getOptions(\"negativesAsZeroes\");\r\n        var negativesAsZeros = themeManager.getOptions(\"negativesAsZeros\");\r\n        var familyOptions = {\r\n            equalBarWidth: themeManager.getOptions(\"equalBarWidth\"),\r\n            minBubbleSize: themeManager.getOptions(\"minBubbleSize\"),\r\n            maxBubbleSize: themeManager.getOptions(\"maxBubbleSize\"),\r\n            barWidth: themeManager.getOptions(\"barWidth\"),\r\n            barGroupPadding: themeManager.getOptions(\"barGroupPadding\"),\r\n            barGroupWidth: themeManager.getOptions(\"barGroupWidth\"),\r\n            negativesAsZeroes: _isDefined(negativesAsZeroes) ? negativesAsZeroes : negativesAsZeros\r\n        };\r\n        if (that.seriesFamilies && that.seriesFamilies.length) {\r\n            _each(that.seriesFamilies, function(_, family) {\r\n                family.updateOptions(familyOptions);\r\n                family.adjustSeriesValues()\r\n            });\r\n            return\r\n        }\r\n        _each(that.series, function(_, item) {\r\n            if (inArray(item.type, types) === -1) {\r\n                types.push(item.type)\r\n            }\r\n        });\r\n        _each(that._getLayoutTargets(), function(_, pane) {\r\n            paneSeries = that._getSeriesForPane(pane.name);\r\n            _each(types, function(_, type) {\r\n                var family = new seriesFamilyModule.SeriesFamily({\r\n                    type: type,\r\n                    pane: pane.name,\r\n                    equalBarWidth: familyOptions.equalBarWidth,\r\n                    minBubbleSize: familyOptions.minBubbleSize,\r\n                    maxBubbleSize: familyOptions.maxBubbleSize,\r\n                    barWidth: familyOptions.barWidth,\r\n                    barGroupPadding: familyOptions.barGroupPadding,\r\n                    barGroupWidth: familyOptions.barGroupWidth,\r\n                    negativesAsZeroes: familyOptions.negativesAsZeroes,\r\n                    rotated: that._isRotated()\r\n                });\r\n                family.add(paneSeries);\r\n                family.adjustSeriesValues();\r\n                families.push(family)\r\n            })\r\n        });\r\n        that.seriesFamilies = families\r\n    },\r\n    _updateSeriesDimensions: function() {\r\n        var that = this;\r\n        var i;\r\n        var seriesFamilies = that.seriesFamilies || [];\r\n        for (i = 0; i < seriesFamilies.length; i++) {\r\n            var family = seriesFamilies[i];\r\n            family.updateSeriesValues();\r\n            family.adjustSeriesDimensions()\r\n        }\r\n    },\r\n    _getLegendCallBack: function(series) {\r\n        return this._legend && this._legend.getActionCallback(series)\r\n    },\r\n    _appendAxesGroups: function() {\r\n        var that = this;\r\n        that._stripsGroup.linkAppend();\r\n        that._gridGroup.linkAppend();\r\n        that._axesGroup.linkAppend();\r\n        that._constantLinesGroup.linkAppend();\r\n        that._labelAxesGroup.linkAppend();\r\n        that._scaleBreaksGroup.linkAppend()\r\n    },\r\n    _populateMarginOptions: function() {\r\n        var that = this;\r\n        var bubbleSize = estimateBubbleSize(that.getSize(), that.panes.length, that._themeManager.getOptions(\"maxBubbleSize\"), that._isRotated());\r\n        var argumentMarginOptions = {};\r\n        that._valueAxes.forEach(function(valueAxis) {\r\n            var groupSeries = that.series.filter(function(series) {\r\n                return series.getValueAxis() === valueAxis\r\n            });\r\n            var marginOptions = {};\r\n            groupSeries.forEach(function(series) {\r\n                if (series.isVisible()) {\r\n                    var seriesMarginOptions = processBubbleMargin(series.getMarginOptions(), bubbleSize);\r\n                    marginOptions = mergeMarginOptions(marginOptions, seriesMarginOptions);\r\n                    argumentMarginOptions = mergeMarginOptions(argumentMarginOptions, seriesMarginOptions)\r\n                }\r\n            });\r\n            valueAxis.setMarginOptions(marginOptions)\r\n        });\r\n        that._argumentAxes.forEach(function(a) {\r\n            return a.setMarginOptions(argumentMarginOptions)\r\n        })\r\n    },\r\n    _populateBusinessRange: function(updatedAxis, keepRange) {\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        var argRange = new rangeModule.Range({\r\n            rotated: !!rotated\r\n        });\r\n        var series = that._getVisibleSeries();\r\n        that._valueAxes.forEach(function(valueAxis) {\r\n            var groupRange = new rangeModule.Range({\r\n                rotated: !!rotated,\r\n                pane: valueAxis.pane,\r\n                axis: valueAxis.name\r\n            });\r\n            var groupSeries = series.filter(function(series) {\r\n                return series.getValueAxis() === valueAxis\r\n            });\r\n            groupSeries.forEach(function(series) {\r\n                var seriesRange = series.getRangeData();\r\n                groupRange.addRange(seriesRange.val);\r\n                argRange.addRange(seriesRange.arg)\r\n            });\r\n            if (!updatedAxis || updatedAxis && groupSeries.length && valueAxis === updatedAxis) {\r\n                valueAxis.setGroupSeries(groupSeries);\r\n                valueAxis.setBusinessRange(groupRange, that._axesReinitialized || keepRange, that._argumentAxes[0]._lastVisualRangeUpdateMode)\r\n            }\r\n        });\r\n        if (!updatedAxis || updatedAxis && series.length) {\r\n            that._argumentAxes.forEach(function(a) {\r\n                return a.setBusinessRange(argRange, that._axesReinitialized, void 0, that._groupsData.categories)\r\n            })\r\n        }\r\n        that._populateMarginOptions()\r\n    },\r\n    getArgumentAxis: function() {\r\n        return (this._argumentAxes || []).filter(function(a) {\r\n            return !a.isVirtual\r\n        })[0]\r\n    },\r\n    getValueAxis: function(name) {\r\n        var _this2 = this;\r\n        return (this._valueAxes || []).filter(_isDefined(name) ? function(a) {\r\n            return a.name === name\r\n        } : function(a) {\r\n            return a.pane === _this2.defaultPane\r\n        })[0]\r\n    },\r\n    _getGroupsData: function() {\r\n        var that = this;\r\n        var groups = [];\r\n        that._valueAxes.forEach(function(axis) {\r\n            groups.push({\r\n                series: that.series.filter(function(series) {\r\n                    return series.getValueAxis() === axis\r\n                }),\r\n                valueAxis: axis,\r\n                valueOptions: axis.getOptions()\r\n            })\r\n        });\r\n        return {\r\n            groups: groups,\r\n            argumentAxes: that._argumentAxes,\r\n            argumentOptions: that._argumentAxes[0].getOptions()\r\n        }\r\n    },\r\n    _groupSeries: function() {\r\n        var that = this;\r\n        that._correctValueAxes(false);\r\n        that._groupsData = that._getGroupsData()\r\n    },\r\n    _processValueAxisFormat: function() {\r\n        var axesWithFullStackedFormat = [];\r\n        this.series.forEach(function(series) {\r\n            var axis = series.getValueAxis();\r\n            if (series.isFullStackedSeries()) {\r\n                axis.setPercentLabelFormat();\r\n                axesWithFullStackedFormat.push(axis)\r\n            }\r\n        });\r\n        this._valueAxes.forEach(function(axis) {\r\n            if (axesWithFullStackedFormat.indexOf(axis) === -1) {\r\n                axis.resetAutoLabelFormat()\r\n            }\r\n        })\r\n    },\r\n    _populateAxesOptions: function(typeSelector, userOptions, axisOptions, rotated, virtual) {\r\n        var that = this;\r\n        var preparedUserOptions = that._prepareStripsAndConstantLines(typeSelector, userOptions, rotated);\r\n        var options = _extend(true, {}, preparedUserOptions, axisOptions, that._prepareAxisOptions(typeSelector, preparedUserOptions, rotated));\r\n        if (virtual) {\r\n            options.visible = options.tick.visible = options.minorTick.visible = options.label.visible = false;\r\n            options.title = {}\r\n        }\r\n        return options\r\n    },\r\n    _createAxis: function(isArgumentAxes, options, virtual, index) {\r\n        var that = this;\r\n        var typeSelector = isArgumentAxes ? \"argumentAxis\" : \"valueAxis\";\r\n        var renderingSettings = _extend({\r\n            renderer: that._renderer,\r\n            incidentOccurred: that._incidentOccurred,\r\n            eventTrigger: that._eventTrigger,\r\n            axisClass: isArgumentAxes ? \"arg\" : \"val\",\r\n            widgetClass: \"dxc\",\r\n            stripsGroup: that._stripsGroup,\r\n            labelAxesGroup: that._labelAxesGroup,\r\n            constantLinesGroup: that._constantLinesGroup,\r\n            scaleBreaksGroup: that._scaleBreaksGroup,\r\n            axesContainerGroup: that._axesGroup,\r\n            gridGroup: that._gridGroup,\r\n            isArgumentAxis: isArgumentAxes\r\n        }, that._getAxisRenderingOptions(typeSelector));\r\n        var axis = new axisModule.Axis(renderingSettings);\r\n        axis.updateOptions(options);\r\n        axis.isVirtual = virtual;\r\n        return axis\r\n    },\r\n    _applyVisualRangeByVirtualAxes: function(axis, range) {\r\n        return false\r\n    },\r\n    _applyCustomVisualRangeOption: function(axis, range) {\r\n        var that = this;\r\n        if (axis.getOptions().optionPath) {\r\n            that._parseVisualRangeOption(\"\".concat(axis.getOptions().optionPath, \".visualRange\"), range)\r\n        }\r\n    },\r\n    _getVisualRangeSetter: function() {\r\n        var chart = this;\r\n        return function(axis, _ref) {\r\n            var skipEventRising = _ref.skipEventRising,\r\n                range = _ref.range;\r\n            chart._applyCustomVisualRangeOption(axis, range);\r\n            axis.setCustomVisualRange(range);\r\n            axis.skipEventRising = skipEventRising;\r\n            if (!chart._applyVisualRangeByVirtualAxes(axis, range)) {\r\n                if (chart._applyingChanges) {\r\n                    chart._change_VISUAL_RANGE()\r\n                } else {\r\n                    chart._requestChange([VISUAL_RANGE])\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _getTrackerSettings: function() {\r\n        return _extend(this.callBase(), {\r\n            argumentAxis: this.getArgumentAxis()\r\n        })\r\n    },\r\n    _prepareStripsAndConstantLines: function(typeSelector, userOptions, rotated) {\r\n        userOptions = this._themeManager.getOptions(typeSelector, userOptions, rotated);\r\n        if (userOptions.strips) {\r\n            _each(userOptions.strips, function(i) {\r\n                userOptions.strips[i] = _extend(true, {}, userOptions.stripStyle, userOptions.strips[i])\r\n            })\r\n        }\r\n        if (userOptions.constantLines) {\r\n            _each(userOptions.constantLines, function(i, line) {\r\n                userOptions.constantLines[i] = _extend(true, {}, userOptions.constantLineStyle, line)\r\n            })\r\n        }\r\n        return userOptions\r\n    },\r\n    refresh: function() {\r\n        this._disposeAxes();\r\n        this.callBase()\r\n    },\r\n    _layoutAxes: function(drawAxes) {\r\n        var that = this;\r\n        var cleanPanesCanvases = drawAxes();\r\n        var needSpace = that.checkForMoreSpaceForPanesCanvas();\r\n        if (needSpace) {\r\n            var size = this._layout.backward(this._rect, this._rect, [needSpace.width, needSpace.height]);\r\n            needSpace.width = Math.max(0, size[0]);\r\n            needSpace.height = Math.max(0, size[1]);\r\n            this._canvas = this._createCanvasFromRect(this._rect);\r\n            drawAxes(needSpace, cleanPanesCanvases)\r\n        }\r\n    },\r\n    checkForMoreSpaceForPanesCanvas: function() {\r\n        return this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(), this._isRotated())\r\n    },\r\n    _parseVisualRangeOption: function(fullName, value) {\r\n        var that = this;\r\n        var name = fullName.split(/[.[]/)[0];\r\n        var index = fullName.match(/\\d+/g);\r\n        index = _isDefined(index) ? parseInt(index[0]) : index;\r\n        if (fullName.indexOf(\"visualRange\") > 0) {\r\n            that._setCustomVisualRange(name, index, value)\r\n        } else {\r\n            if ((\"object\" === type(value) || _isArray(value)) && name.indexOf(\"Axis\") > 0 && JSON.stringify(value).indexOf(\"visualRange\") > 0) {\r\n                if (_isDefined(value.visualRange)) {\r\n                    that._setCustomVisualRange(name, index, value.visualRange)\r\n                } else {\r\n                    if (_isArray(value)) {\r\n                        value.forEach(function(a, i) {\r\n                            return _isDefined(a.visualRange) && that._setCustomVisualRange(name, i, a.visualRange)\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _setCustomVisualRange: function(axesName, index, value) {\r\n        var that = this;\r\n        var options = that._options[axesName];\r\n        if (!options) {\r\n            return\r\n        }\r\n        if (!_isDefined(index)) {\r\n            options._customVisualRange = value\r\n        } else {\r\n            options[index]._customVisualRange = value\r\n        }\r\n        that._axesReinitialized = true\r\n    },\r\n    _raiseZoomEndHandlers: function() {\r\n        this._valueAxes.forEach(function(axis) {\r\n            return axis.handleZoomEnd()\r\n        })\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        _extend(this._optionsByReference, {\r\n            \"valueAxis.visualRange\": true\r\n        })\r\n    },\r\n    _notifyOptionChanged: function(option, value, previousValue) {\r\n        this.callBase.apply(this, arguments);\r\n        if (!this._optionChangedLocker) {\r\n            this._parseVisualRangeOption(option, value)\r\n        }\r\n    },\r\n    _notifyVisualRange: function() {\r\n        var that = this;\r\n        that._valueAxes.forEach(function(axis) {\r\n            if (axis.getOptions().optionPath) {\r\n                var path = \"\".concat(axis.getOptions().optionPath, \".visualRange\");\r\n                var visualRange = convertVisualRangeObject(axis.visualRange(), !_isArray(that.option(path)));\r\n                if (!axis.skipEventRising || !rangesAreEqual(visualRange, that.option(path))) {\r\n                    that.option(path, visualRange)\r\n                } else {\r\n                    axis.skipEventRising = null\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _notify: function() {\r\n        this.callBase();\r\n        this._axesReinitialized = false;\r\n        if (true !== this.option(\"disableTwoWayBinding\")) {\r\n            this._notifyVisualRange()\r\n        }\r\n    },\r\n    _getAxesForScaling: function() {\r\n        return this._valueAxes\r\n    },\r\n    _getAxesByOptionPath: function(arg, isDirectOption, optionName) {\r\n        var that = this;\r\n        var sourceAxes = that._getAxesForScaling();\r\n        var axes = [];\r\n        if (isDirectOption) {\r\n            var axisPath;\r\n            if (arg.fullName) {\r\n                axisPath = arg.fullName.slice(0, arg.fullName.indexOf(\".\"))\r\n            }\r\n            axes = sourceAxes.filter(function(a) {\r\n                return a.getOptions().optionPath === axisPath\r\n            })\r\n        } else {\r\n            if (\"object\" === type(arg.value)) {\r\n                axes = sourceAxes.filter(function(a) {\r\n                    return a.getOptions().optionPath === arg.name\r\n                })\r\n            } else {\r\n                if (_isArray(arg.value)) {\r\n                    arg.value.forEach(function(v, index) {\r\n                        var axis = sourceAxes.filter(function(a) {\r\n                            return a.getOptions().optionPath === \"\".concat(arg.name, \"[\").concat(index, \"]\")\r\n                        })[0];\r\n                        _isDefined(v[optionName]) && _isDefined(axis) && (axes[index] = axis)\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        return axes\r\n    },\r\n    _optionChanged: function(arg) {\r\n        var that = this;\r\n        if (!that._optionChangedLocker) {\r\n            var optionName = \"visualRange\";\r\n            var axes;\r\n            var isDirectOption = arg.fullName.indexOf(optionName) > 0 ? true : that.getPartialChangeOptionsName(arg).indexOf(optionName) > -1 ? false : void 0;\r\n            if (_isDefined(isDirectOption)) {\r\n                axes = that._getAxesByOptionPath(arg, isDirectOption, optionName);\r\n                if (axes) {\r\n                    if (axes.length > 1 || _isArray(arg.value)) {\r\n                        axes.forEach(function(a, index) {\r\n                            return setAxisVisualRangeByOption(arg, a, isDirectOption, index)\r\n                        })\r\n                    } else {\r\n                        if (1 === axes.length) {\r\n                            setAxisVisualRangeByOption(arg, axes[0], isDirectOption)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        that.callBase(arg)\r\n    },\r\n    _change_VISUAL_RANGE: function() {\r\n        var that = this;\r\n        that._recreateSizeDependentObjects(false);\r\n        if (!that._changes.has(\"FULL_RENDER\")) {\r\n            var resizePanesOnZoom = this.option(\"resizePanesOnZoom\");\r\n            that._doRender({\r\n                force: true,\r\n                drawTitle: false,\r\n                drawLegend: false,\r\n                adjustAxes: _isDefined(resizePanesOnZoom) ? resizePanesOnZoom : this.option(\"adjustAxesOnZoom\") || false,\r\n                animate: false\r\n            });\r\n            that._raiseZoomEndHandlers()\r\n        }\r\n    },\r\n    resetVisualRange: function() {\r\n        var that = this;\r\n        that._valueAxes.forEach(function(axis) {\r\n            axis.resetVisualRange(false);\r\n            that._applyCustomVisualRangeOption(axis)\r\n        });\r\n        that._requestChange([VISUAL_RANGE])\r\n    },\r\n    _legendDataField: \"series\",\r\n    _adjustSeriesLabels: _noop,\r\n    _correctValueAxes: _noop\r\n});\r\nexports.AdvancedChart = AdvancedChart;\r\n"]},"metadata":{},"sourceType":"module"}