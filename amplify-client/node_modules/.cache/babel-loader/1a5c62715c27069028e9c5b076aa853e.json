{"ast":null,"code":"import { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nimport { isScheduler } from '../util/isScheduler';\nexport function timer() {\n  var dueTime = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var periodOrScheduler = arguments.length > 1 ? arguments[1] : undefined;\n  var scheduler = arguments.length > 2 ? arguments[2] : undefined;\n  var period = -1;\n\n  if (isNumeric(periodOrScheduler)) {\n    period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n  } else if (isScheduler(periodOrScheduler)) {\n    scheduler = periodOrScheduler;\n  }\n\n  if (!isScheduler(scheduler)) {\n    scheduler = async;\n  }\n\n  return new Observable(function (subscriber) {\n    var due = isNumeric(dueTime) ? dueTime : +dueTime - scheduler.now();\n    return scheduler.schedule(dispatch, due, {\n      index: 0,\n      period: period,\n      subscriber: subscriber\n    });\n  });\n}\n\nfunction dispatch(state) {\n  var index = state.index,\n      period = state.period,\n      subscriber = state.subscriber;\n  subscriber.next(index);\n\n  if (subscriber.closed) {\n    return;\n  } else if (period === -1) {\n    return subscriber.complete();\n  }\n\n  state.index = index + 1;\n  this.schedule(state, period);\n}","map":{"version":3,"sources":["../../../src/internal/observable/timer.ts"],"names":[],"mappings":"AAAA,SAAA,UAAA,QAAA,eAAA;AAEA,SAAA,KAAA,QAAA,oBAAA;AACA,SAAA,SAAA,QAAA,mBAAA;AACA,SAAA,WAAA,QAAA,qBAAA;AAqDA,OAAM,SAAA,KAAA,GAEyC;AAAA,MAFzB,OAEyB,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAFA,CAEA;AAAA,MADzB,iBACyB,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,SAAA;AAAA,MAAzB,SAAyB,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,SAAA;AAC7C,MAAI,MAAM,GAAG,CAAb,CAAA;;AACA,MAAI,SAAS,CAAb,iBAAa,CAAb,EAAkC;AAChC,IAAA,MAAM,GAAG,MAAM,CAAN,iBAAM,CAAN,GAAA,CAAA,IAAA,CAAA,IAAsC,MAAM,CAArD,iBAAqD,CAArD;AADF,GAAA,MAEO,IAAI,WAAW,CAAf,iBAAe,CAAf,EAAoC;AACzC,IAAA,SAAS,GAAT,iBAAA;AACD;;AAED,MAAI,CAAC,WAAW,CAAhB,SAAgB,CAAhB,EAA6B;AAC3B,IAAA,SAAS,GAAT,KAAA;AACD;;AAED,SAAO,IAAA,UAAA,CAAe,UAAA,UAAA,EAAa;AACjC,QAAM,GAAG,GAAG,SAAS,CAAT,OAAS,CAAT,GAAA,OAAA,GAEP,CAAA,OAAA,GAAW,SAAS,CAFzB,GAEgB,EAFhB;AAIA,WAAO,SAAS,CAAT,QAAA,CAAA,QAAA,EAAA,GAAA,EAAkC;AACvC,MAAA,KAAK,EADkC,CAAA;AAC7B,MAAA,MAAM,EADuB,MAAA;AACrB,MAAA,UAAU,EAAV;AADqB,KAAlC,CAAP;AALF,GAAO,CAAP;AASD;;AAQD,SAAA,QAAA,CAAA,KAAA,EAAsE;AAAA,MAC5D,KAD4D,GAC9B,KAD8B,CAAA,KAAA;AAAA,MACrD,MADqD,GAC9B,KAD8B,CAAA,MAAA;AAAA,MAC7C,UAD6C,GAC9B,KAD8B,CAAA,UAAA;AAEpE,EAAA,UAAU,CAAV,IAAA,CAAA,KAAA;;AAEA,MAAI,UAAU,CAAd,MAAA,EAAuB;AACrB;AADF,GAAA,MAEO,IAAI,MAAM,KAAK,CAAf,CAAA,EAAmB;AACxB,WAAO,UAAU,CAAjB,QAAO,EAAP;AACD;;AAED,EAAA,KAAK,CAAL,KAAA,GAAc,KAAK,GAAnB,CAAA;AACA,OAAA,QAAA,CAAA,KAAA,EAAA,MAAA;AACD","sourcesContent":["import { Observable } from '../Observable';\r\nimport { async } from '../scheduler/async';\r\nimport { isNumeric } from '../util/isNumeric';\r\nimport { isScheduler } from '../util/isScheduler';\r\nexport function timer(dueTime = 0, periodOrScheduler, scheduler) {\r\n    let period = -1;\r\n    if (isNumeric(periodOrScheduler)) {\r\n        period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\r\n    }\r\n    else if (isScheduler(periodOrScheduler)) {\r\n        scheduler = periodOrScheduler;\r\n    }\r\n    if (!isScheduler(scheduler)) {\r\n        scheduler = async;\r\n    }\r\n    return new Observable(subscriber => {\r\n        const due = isNumeric(dueTime)\r\n            ? dueTime\r\n            : (+dueTime - scheduler.now());\r\n        return scheduler.schedule(dispatch, due, {\r\n            index: 0, period, subscriber\r\n        });\r\n    });\r\n}\r\nfunction dispatch(state) {\r\n    const { index, period, subscriber } = state;\r\n    subscriber.next(index);\r\n    if (subscriber.closed) {\r\n        return;\r\n    }\r\n    else if (period === -1) {\r\n        return subscriber.complete();\r\n    }\r\n    state.index = index + 1;\r\n    this.schedule(state, period);\r\n}\r\n//# sourceMappingURL=timer.js.map"]},"metadata":{},"sourceType":"module"}