{"ast":null,"code":"/**\r\n * DevExtreme (ui/hierarchical_collection/ui.hierarchical_collection_widget.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _devices = require(\"../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _icon = require(\"../../core/utils/icon\");\n\nvar _icon2 = _interopRequireDefault(_icon);\n\nvar _ui = require(\"./ui.data_adapter\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _uiCollection_widget = require(\"../collection/ui.collection_widget.edit\");\n\nvar _uiCollection_widget2 = _interopRequireDefault(_uiCollection_widget);\n\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _common = require(\"../../core/utils/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\n\nvar HierarchicalCollectionWidget = _uiCollection_widget2.default.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      keyExpr: \"id\",\n      displayExpr: \"text\",\n      selectedExpr: \"selected\",\n      disabledExpr: \"disabled\",\n      itemsExpr: \"items\",\n      hoverStateEnabled: true,\n      parentIdExpr: \"parentId\",\n      expandedExpr: \"expanded\"\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _init: function _init() {\n    this.callBase();\n\n    this._initAccessors();\n\n    this._initDataAdapter();\n\n    this._initDynamicTemplates();\n  },\n  _initDataSource: function _initDataSource() {\n    this.callBase();\n    this._dataSource && this._dataSource.paginate(false);\n  },\n  _initDataAdapter: function _initDataAdapter() {\n    var accessors = this._createDataAdapterAccessors();\n\n    this._dataAdapter = new _ui2.default((0, _extend.extend)({\n      dataAccessors: {\n        getters: accessors.getters,\n        setters: accessors.setters\n      },\n      items: this.option(\"items\")\n    }, this._getDataAdapterOptions()));\n  },\n  _getDataAdapterOptions: _common.noop,\n  _initDynamicTemplates: function _initDynamicTemplates() {\n    var that = this;\n    this._defaultTemplates.item = new _bindable_template.BindableTemplate(function ($container, itemData) {\n      $container.html(itemData.html).append(this._getIconContainer(itemData)).append(this._getTextContainer(itemData)).append(this._getPopoutContainer(itemData));\n\n      that._addContentClasses(itemData, $container.parent());\n    }.bind(this), [\"text\", \"html\", \"items\", \"icon\"], this.option(\"integrationOptions.watchMethod\"), {\n      text: this._displayGetter,\n      items: this._itemsGetter\n    });\n  },\n  _getIconContainer: function _getIconContainer(itemData) {\n    return itemData.icon ? _icon2.default.getImageContainer(itemData.icon) : void 0;\n  },\n  _getTextContainer: function _getTextContainer(itemData) {\n    return (0, _renderer2.default)(\"<span>\").text(itemData.text);\n  },\n  _getPopoutContainer: _common.noop,\n  _addContentClasses: _common.noop,\n  _initAccessors: function _initAccessors() {\n    var that = this;\n    (0, _iterator.each)(this._getAccessors(), function (_, accessor) {\n      that._compileAccessor(accessor);\n    });\n\n    this._compileDisplayGetter();\n  },\n  _getAccessors: function _getAccessors() {\n    return [\"key\", \"selected\", \"items\", \"disabled\", \"parentId\", \"expanded\"];\n  },\n  _getChildNodes: function _getChildNodes(node) {\n    var that = this;\n    var arr = [];\n    (0, _iterator.each)(node.internalFields.childrenKeys, function (_, key) {\n      var childNode = that._dataAdapter.getNodeByKey(key);\n\n      arr.push(childNode);\n    });\n    return arr;\n  },\n  _hasChildren: function _hasChildren(node) {\n    return node && node.internalFields.childrenKeys.length;\n  },\n  _compileAccessor: function _compileAccessor(optionName) {\n    var getter = \"_\" + optionName + \"Getter\";\n    var setter = \"_\" + optionName + \"Setter\";\n    var optionExpr = this.option(optionName + \"Expr\");\n\n    if (!optionExpr) {\n      this[getter] = _common.noop;\n      this[setter] = _common.noop;\n      return;\n    } else {\n      if ((0, _type.isFunction)(optionExpr)) {\n        this[setter] = function (obj, value) {\n          obj[optionExpr()] = value;\n        };\n\n        this[getter] = function (obj) {\n          return obj[optionExpr()];\n        };\n\n        return;\n      }\n    }\n\n    this[getter] = (0, _data.compileGetter)(optionExpr);\n    this[setter] = (0, _data.compileSetter)(optionExpr);\n  },\n  _createDataAdapterAccessors: function _createDataAdapterAccessors() {\n    var that = this;\n    var accessors = {\n      getters: {},\n      setters: {}\n    };\n    (0, _iterator.each)(this._getAccessors(), function (_, accessor) {\n      var getterName = \"_\" + accessor + \"Getter\";\n      var setterName = \"_\" + accessor + \"Setter\";\n      var newAccessor = \"parentId\" === accessor ? \"parentKey\" : accessor;\n      accessors.getters[newAccessor] = that[getterName];\n      accessors.setters[newAccessor] = that[setterName];\n    });\n    accessors.getters.display = !this._displayGetter ? function (itemData) {\n      return itemData.text;\n    } : this._displayGetter;\n    return accessors;\n  },\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n\n    this._addWidgetClass();\n  },\n  _addWidgetClass: function _addWidgetClass() {\n    this._focusTarget().addClass(this._widgetClass());\n  },\n  _widgetClass: _common.noop,\n  _renderItemFrame: function _renderItemFrame(index, itemData) {\n    var $itemFrame = this.callBase.apply(this, arguments);\n    $itemFrame.toggleClass(DISABLED_STATE_CLASS, !!this._disabledGetter(itemData));\n    return $itemFrame;\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"displayExpr\":\n      case \"keyExpr\":\n        this._initAccessors();\n\n        this._initDynamicTemplates();\n\n        this.repaint();\n        break;\n\n      case \"itemsExpr\":\n      case \"selectedExpr\":\n      case \"disabledExpr\":\n      case \"expandedExpr\":\n      case \"parentIdExpr\":\n        this._initAccessors();\n\n        this._initDataAdapter();\n\n        this.repaint();\n        break;\n\n      case \"items\":\n        this._initDataAdapter();\n\n        this.callBase(args);\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\n\nmodule.exports = HierarchicalCollectionWidget;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/hierarchical_collection/ui.hierarchical_collection_widget.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_data","_extend","_iterator","_devices","_devices2","_icon","_icon2","_ui","_ui2","_uiCollection_widget","_uiCollection_widget2","_bindable_template","_type","_common","obj","DISABLED_STATE_CLASS","HierarchicalCollectionWidget","_getDefaultOptions","keyExpr","displayExpr","selectedExpr","disabledExpr","itemsExpr","hoverStateEnabled","parentIdExpr","expandedExpr","_defaultOptionsRules","device","options","focusStateEnabled","_init","_initDataSource","_initDataAdapter","accessors","dataAccessors","getters","setters","items","_getDataAdapterOptions","_initDynamicTemplates","that","$container","itemData","text","_itemsGetter","_getIconContainer","_getTextContainer","_getPopoutContainer","_addContentClasses","_initAccessors","_getAccessors","_getChildNodes","arr","node","childNode","_hasChildren","_compileAccessor","getter","setter","optionExpr","optionName","_createDataAdapterAccessors","getterName","setterName","newAccessor","_initMarkup","_addWidgetClass","_widgetClass","_renderItemFrame","$itemFrame","_optionChanged","args","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/hierarchical_collection/ui.hierarchical_collection_widget.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _devices = require(\"../../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _icon = require(\"../../core/utils/icon\");\r\nvar _icon2 = _interopRequireDefault(_icon);\r\nvar _ui = require(\"./ui.data_adapter\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _uiCollection_widget = require(\"../collection/ui.collection_widget.edit\");\r\nvar _uiCollection_widget2 = _interopRequireDefault(_uiCollection_widget);\r\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _common = require(\"../../core/utils/common\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\r\nvar HierarchicalCollectionWidget = _uiCollection_widget2.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            keyExpr: \"id\",\r\n            displayExpr: \"text\",\r\n            selectedExpr: \"selected\",\r\n            disabledExpr: \"disabled\",\r\n            itemsExpr: \"items\",\r\n            hoverStateEnabled: true,\r\n            parentIdExpr: \"parentId\",\r\n            expandedExpr: \"expanded\"\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initAccessors();\r\n        this._initDataAdapter();\r\n        this._initDynamicTemplates()\r\n    },\r\n    _initDataSource: function() {\r\n        this.callBase();\r\n        this._dataSource && this._dataSource.paginate(false)\r\n    },\r\n    _initDataAdapter: function() {\r\n        var accessors = this._createDataAdapterAccessors();\r\n        this._dataAdapter = new _ui2.default((0, _extend.extend)({\r\n            dataAccessors: {\r\n                getters: accessors.getters,\r\n                setters: accessors.setters\r\n            },\r\n            items: this.option(\"items\")\r\n        }, this._getDataAdapterOptions()))\r\n    },\r\n    _getDataAdapterOptions: _common.noop,\r\n    _initDynamicTemplates: function() {\r\n        var that = this;\r\n        this._defaultTemplates.item = new _bindable_template.BindableTemplate(function($container, itemData) {\r\n            $container.html(itemData.html).append(this._getIconContainer(itemData)).append(this._getTextContainer(itemData)).append(this._getPopoutContainer(itemData));\r\n            that._addContentClasses(itemData, $container.parent())\r\n        }.bind(this), [\"text\", \"html\", \"items\", \"icon\"], this.option(\"integrationOptions.watchMethod\"), {\r\n            text: this._displayGetter,\r\n            items: this._itemsGetter\r\n        })\r\n    },\r\n    _getIconContainer: function(itemData) {\r\n        return itemData.icon ? _icon2.default.getImageContainer(itemData.icon) : void 0\r\n    },\r\n    _getTextContainer: function(itemData) {\r\n        return (0, _renderer2.default)(\"<span>\").text(itemData.text)\r\n    },\r\n    _getPopoutContainer: _common.noop,\r\n    _addContentClasses: _common.noop,\r\n    _initAccessors: function() {\r\n        var that = this;\r\n        (0, _iterator.each)(this._getAccessors(), function(_, accessor) {\r\n            that._compileAccessor(accessor)\r\n        });\r\n        this._compileDisplayGetter()\r\n    },\r\n    _getAccessors: function() {\r\n        return [\"key\", \"selected\", \"items\", \"disabled\", \"parentId\", \"expanded\"]\r\n    },\r\n    _getChildNodes: function(node) {\r\n        var that = this;\r\n        var arr = [];\r\n        (0, _iterator.each)(node.internalFields.childrenKeys, function(_, key) {\r\n            var childNode = that._dataAdapter.getNodeByKey(key);\r\n            arr.push(childNode)\r\n        });\r\n        return arr\r\n    },\r\n    _hasChildren: function(node) {\r\n        return node && node.internalFields.childrenKeys.length\r\n    },\r\n    _compileAccessor: function(optionName) {\r\n        var getter = \"_\" + optionName + \"Getter\";\r\n        var setter = \"_\" + optionName + \"Setter\";\r\n        var optionExpr = this.option(optionName + \"Expr\");\r\n        if (!optionExpr) {\r\n            this[getter] = _common.noop;\r\n            this[setter] = _common.noop;\r\n            return\r\n        } else {\r\n            if ((0, _type.isFunction)(optionExpr)) {\r\n                this[setter] = function(obj, value) {\r\n                    obj[optionExpr()] = value\r\n                };\r\n                this[getter] = function(obj) {\r\n                    return obj[optionExpr()]\r\n                };\r\n                return\r\n            }\r\n        }\r\n        this[getter] = (0, _data.compileGetter)(optionExpr);\r\n        this[setter] = (0, _data.compileSetter)(optionExpr)\r\n    },\r\n    _createDataAdapterAccessors: function() {\r\n        var that = this;\r\n        var accessors = {\r\n            getters: {},\r\n            setters: {}\r\n        };\r\n        (0, _iterator.each)(this._getAccessors(), function(_, accessor) {\r\n            var getterName = \"_\" + accessor + \"Getter\";\r\n            var setterName = \"_\" + accessor + \"Setter\";\r\n            var newAccessor = \"parentId\" === accessor ? \"parentKey\" : accessor;\r\n            accessors.getters[newAccessor] = that[getterName];\r\n            accessors.setters[newAccessor] = that[setterName]\r\n        });\r\n        accessors.getters.display = !this._displayGetter ? function(itemData) {\r\n            return itemData.text\r\n        } : this._displayGetter;\r\n        return accessors\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._addWidgetClass()\r\n    },\r\n    _addWidgetClass: function() {\r\n        this._focusTarget().addClass(this._widgetClass())\r\n    },\r\n    _widgetClass: _common.noop,\r\n    _renderItemFrame: function(index, itemData) {\r\n        var $itemFrame = this.callBase.apply(this, arguments);\r\n        $itemFrame.toggleClass(DISABLED_STATE_CLASS, !!this._disabledGetter(itemData));\r\n        return $itemFrame\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"displayExpr\":\r\n            case \"keyExpr\":\r\n                this._initAccessors();\r\n                this._initDynamicTemplates();\r\n                this.repaint();\r\n                break;\r\n            case \"itemsExpr\":\r\n            case \"selectedExpr\":\r\n            case \"disabledExpr\":\r\n            case \"expandedExpr\":\r\n            case \"parentIdExpr\":\r\n                this._initAccessors();\r\n                this._initDataAdapter();\r\n                this.repaint();\r\n                break;\r\n            case \"items\":\r\n                this._initDataAdapter();\r\n                this.callBase(args);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nmodule.exports = HierarchicalCollectionWidget;\r\n"]},"metadata":{},"sourceType":"module"}