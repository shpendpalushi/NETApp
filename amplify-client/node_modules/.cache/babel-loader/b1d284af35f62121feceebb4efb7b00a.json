{"ast":null,"code":"/**\r\n * DevExtreme (viz/vector_map/layout.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar inArray = require(\"../../core/utils/array\").inArray;\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar _round = Math.round;\nvar _min = Math.min;\nvar _max = Math.max;\nvar _each = each;\nvar _inArray = inArray;\nvar horizontalAlignmentMap = {\n  left: 0,\n  center: 1,\n  right: 2\n};\nvar verticalAlignmentMap = {\n  top: 0,\n  bottom: 1\n};\n\nfunction getCellIndex(options) {\n  return 3 * verticalAlignmentMap[options.verticalAlignment] + horizontalAlignmentMap[options.horizontalAlignment];\n}\n\nfunction createCells(canvas, items) {\n  var hStep = (canvas.right - canvas.left) / 3;\n  var vStep = (canvas.bottom - canvas.top) / 2;\n  var h1 = canvas.left;\n\n  var h2 = _round(h1 + hStep);\n\n  var h3 = _round(h1 + hStep + hStep);\n\n  var h4 = canvas.right;\n  var v1 = canvas.top;\n\n  var v2 = _round(v1 + vStep);\n\n  var v3 = canvas.bottom;\n  var cells = [{\n    rect: [h1, v1, h2, v2]\n  }, {\n    rect: [h2, v1, h3, v2],\n    center: true\n  }, {\n    rect: [h3, v1, h4, v2],\n    horInversion: true\n  }, {\n    rect: [h1, v2, h2, v3],\n    verInversion: true\n  }, {\n    rect: [h2, v2, h3, v3],\n    center: true,\n    verInversion: true\n  }, {\n    rect: [h3, v2, h4, v3],\n    horInversion: true,\n    verInversion: true\n  }];\n  var itemsList = [[], [], [], [], [], []];\n\n  _each(items, function (_, item) {\n    var options = item.getLayoutOptions();\n\n    if (options) {\n      itemsList[getCellIndex(options)].push({\n        item: item,\n        width: options.width,\n        height: options.height\n      });\n    }\n  });\n\n  _each(cells, function (i, cell) {\n    if (itemsList[i].length) {\n      cell.items = itemsList[i];\n    } else {\n      if (cell.center) {\n        cell.rect[0] = cell.rect[2] = (cell.rect[0] + cell.rect[2]) / 2;\n      } else {\n        cell.rect[cell.horInversion ? 0 : 2] = cell.rect[cell.horInversion ? 2 : 0];\n      }\n\n      cell.rect[cell.verInversion ? 1 : 3] = cell.rect[cell.verInversion ? 3 : 1];\n    }\n  });\n\n  return cells;\n}\n\nfunction adjustCellSizes(cells) {\n  _each([0, 1, 2, 3, 4, 5], function (_, index) {\n    var cell = cells[index];\n    var otherCell = cells[(index + 3) % 6];\n\n    if (cell.items) {\n      if (!otherCell.items) {\n        cell.rect[1] = _min(cell.rect[1], otherCell.rect[3]);\n        cell.rect[3] = _max(cell.rect[3], otherCell.rect[1]);\n      }\n    }\n  });\n\n  _each([1, 4], function (_, index) {\n    var cell = cells[index];\n    var otherCell1 = cells[index - 1];\n    var otherCell2 = cells[index + 1];\n    var size1;\n    var size2;\n\n    if (cell.items) {\n      if (!otherCell1.items && !otherCell2.items) {\n        size1 = cell.rect[0] - otherCell1.rect[2];\n        size2 = otherCell2.rect[0] - cell.rect[2];\n\n        if (size1 > size2) {\n          if (size1 / size2 >= 2) {\n            cell.rect[0] -= size1;\n            cell.right = true;\n          } else {\n            cell.rect[0] -= size2;\n            cell.rect[2] += size2;\n          }\n        } else {\n          if (size2 / size1 >= 2) {\n            cell.rect[2] += size2;\n            cell.center = null;\n          } else {\n            cell.rect[0] -= size1;\n            cell.rect[2] += size1;\n          }\n        }\n      }\n    } else {\n      if (otherCell1.items) {\n        otherCell1.rect[2] = (cell.rect[0] + cell.rect[2]) / 2;\n      }\n\n      if (otherCell2.items) {\n        otherCell2.rect[0] = (cell.rect[0] + cell.rect[2]) / 2;\n      }\n    }\n  });\n}\n\nfunction adjustCellsAndApplyLayout(cells, forceMode) {\n  var hasHiddenItems = false;\n  adjustCellSizes(cells);\n\n  _each(cells, function (_, cell) {\n    if (cell.items) {\n      hasHiddenItems = applyCellLayout(cell, forceMode) || hasHiddenItems;\n    }\n  });\n\n  return hasHiddenItems;\n}\n\nfunction applyCellLayout(cell, forceMode) {\n  var cellRect = cell.rect;\n  var cellWidth = cellRect[2] - cellRect[0];\n  var cellHeight = cellRect[3] - cellRect[1];\n  var xOffset = 0;\n  var yOffset = 0;\n  var currentHeight = 0;\n  var totalL = cellRect[2];\n  var totalT = cellRect[3];\n  var totalR = cellRect[0];\n  var totalB = cellRect[1];\n  var moves = [];\n  var hasHiddenItems = false;\n\n  _each(cell.items, function (_, item) {\n    if (item.width > cellWidth || item.height > cellHeight) {\n      moves.push(null);\n      hasHiddenItems = true;\n      return forceMode || false;\n    }\n\n    if (xOffset + item.width > cellWidth) {\n      yOffset += currentHeight;\n      xOffset = currentHeight = 0;\n    }\n\n    if (yOffset + item.height > cellHeight) {\n      moves.push(null);\n      hasHiddenItems = true;\n      return forceMode || false;\n    }\n\n    currentHeight = _max(currentHeight, item.height);\n    var dx = cell.horInversion ? cellRect[2] - item.width - xOffset : cellRect[0] + xOffset;\n    var dy = cell.verInversion ? cellRect[3] - item.height - yOffset : cellRect[1] + yOffset;\n    xOffset += item.width;\n    totalL = _min(totalL, dx);\n    totalT = _min(totalT, dy);\n    totalR = _max(totalR, dx + item.width);\n    totalB = _max(totalB, dy + item.height);\n    moves.push([dx, dy]);\n  });\n\n  if (forceMode || !hasHiddenItems) {\n    xOffset = 0;\n\n    if (cell.right) {\n      xOffset = cellRect[2] - cellRect[0] - totalR + totalL;\n    } else {\n      if (cell.center) {\n        xOffset = _round((cellRect[2] - cellRect[0] - totalR + totalL) / 2);\n      }\n    }\n\n    _each(cell.items, function (i, item) {\n      var move = moves[i];\n\n      if (move) {\n        item.item.locate(move[0] + xOffset, move[1]);\n      } else {\n        item.item.resize(null);\n      }\n    });\n\n    cell.rect = [totalL, totalT, totalR, totalB];\n    cell.items = null;\n  }\n\n  return hasHiddenItems;\n}\n\nfunction applyLayout(canvas, items) {\n  var cells = createCells(canvas, items);\n\n  if (adjustCellsAndApplyLayout(cells)) {\n    adjustCellsAndApplyLayout(cells, true);\n  }\n}\n\nfunction LayoutControl() {\n  var that = this;\n  that._items = [];\n  that._suspended = 0;\n\n  that._updateLayout = function () {\n    that._update();\n  };\n}\n\nLayoutControl.prototype = {\n  constructor: LayoutControl,\n  dispose: function dispose() {\n    this._items = this._updateLayout = null;\n  },\n  setSize: function setSize(canvas) {\n    this._canvas = canvas;\n\n    this._update();\n  },\n  suspend: function suspend() {\n    ++this._suspended;\n  },\n  resume: function resume() {\n    if (0 === --this._suspended) {\n      this._update();\n    }\n  },\n  addItem: function addItem(item) {\n    this._items.push(item);\n\n    item.updateLayout = this._updateLayout;\n  },\n  removeItem: function removeItem(item) {\n    this._items.splice(_inArray(item, this._items), 1);\n\n    item.updateLayout = null;\n  },\n  _update: function _update() {\n    var canvas;\n\n    if (0 === this._suspended) {\n      canvas = this._canvas;\n\n      _each(this._items, function (_, item) {\n        item.resize(canvas);\n      });\n\n      applyLayout({\n        left: canvas.left,\n        top: canvas.top,\n        right: canvas.width + canvas.left,\n        bottom: canvas.height + canvas.top\n      }, this._items);\n    }\n  }\n};\nexports.LayoutControl = LayoutControl;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/vector_map/layout.js"],"names":["inArray","require","each","_round","Math","_min","_max","_each","_inArray","horizontalAlignmentMap","left","center","right","verticalAlignmentMap","top","bottom","options","hStep","canvas","vStep","h1","h2","h3","h4","v1","v2","v3","cells","rect","horInversion","verInversion","itemsList","item","getCellIndex","width","height","cell","otherCell","index","otherCell1","otherCell2","size1","size2","hasHiddenItems","adjustCellSizes","applyCellLayout","cellRect","cellWidth","cellHeight","xOffset","yOffset","currentHeight","totalL","totalT","totalR","totalB","moves","forceMode","dx","dy","move","createCells","adjustCellsAndApplyLayout","that","LayoutControl","constructor","dispose","setSize","suspend","resume","addItem","removeItem","_update","applyLayout","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/vector_map/layout.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar inArray = require(\"../../core/utils/array\").inArray;\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar _round = Math.round;\r\nvar _min = Math.min;\r\nvar _max = Math.max;\r\nvar _each = each;\r\nvar _inArray = inArray;\r\nvar horizontalAlignmentMap = {\r\n    left: 0,\r\n    center: 1,\r\n    right: 2\r\n};\r\nvar verticalAlignmentMap = {\r\n    top: 0,\r\n    bottom: 1\r\n};\r\n\r\nfunction getCellIndex(options) {\r\n    return 3 * verticalAlignmentMap[options.verticalAlignment] + horizontalAlignmentMap[options.horizontalAlignment]\r\n}\r\n\r\nfunction createCells(canvas, items) {\r\n    var hStep = (canvas.right - canvas.left) / 3;\r\n    var vStep = (canvas.bottom - canvas.top) / 2;\r\n    var h1 = canvas.left;\r\n    var h2 = _round(h1 + hStep);\r\n    var h3 = _round(h1 + hStep + hStep);\r\n    var h4 = canvas.right;\r\n    var v1 = canvas.top;\r\n    var v2 = _round(v1 + vStep);\r\n    var v3 = canvas.bottom;\r\n    var cells = [{\r\n        rect: [h1, v1, h2, v2]\r\n    }, {\r\n        rect: [h2, v1, h3, v2],\r\n        center: true\r\n    }, {\r\n        rect: [h3, v1, h4, v2],\r\n        horInversion: true\r\n    }, {\r\n        rect: [h1, v2, h2, v3],\r\n        verInversion: true\r\n    }, {\r\n        rect: [h2, v2, h3, v3],\r\n        center: true,\r\n        verInversion: true\r\n    }, {\r\n        rect: [h3, v2, h4, v3],\r\n        horInversion: true,\r\n        verInversion: true\r\n    }];\r\n    var itemsList = [\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        []\r\n    ];\r\n    _each(items, function(_, item) {\r\n        var options = item.getLayoutOptions();\r\n        if (options) {\r\n            itemsList[getCellIndex(options)].push({\r\n                item: item,\r\n                width: options.width,\r\n                height: options.height\r\n            })\r\n        }\r\n    });\r\n    _each(cells, function(i, cell) {\r\n        if (itemsList[i].length) {\r\n            cell.items = itemsList[i]\r\n        } else {\r\n            if (cell.center) {\r\n                cell.rect[0] = cell.rect[2] = (cell.rect[0] + cell.rect[2]) / 2\r\n            } else {\r\n                cell.rect[cell.horInversion ? 0 : 2] = cell.rect[cell.horInversion ? 2 : 0]\r\n            }\r\n            cell.rect[cell.verInversion ? 1 : 3] = cell.rect[cell.verInversion ? 3 : 1]\r\n        }\r\n    });\r\n    return cells\r\n}\r\n\r\nfunction adjustCellSizes(cells) {\r\n    _each([0, 1, 2, 3, 4, 5], function(_, index) {\r\n        var cell = cells[index];\r\n        var otherCell = cells[(index + 3) % 6];\r\n        if (cell.items) {\r\n            if (!otherCell.items) {\r\n                cell.rect[1] = _min(cell.rect[1], otherCell.rect[3]);\r\n                cell.rect[3] = _max(cell.rect[3], otherCell.rect[1])\r\n            }\r\n        }\r\n    });\r\n    _each([1, 4], function(_, index) {\r\n        var cell = cells[index];\r\n        var otherCell1 = cells[index - 1];\r\n        var otherCell2 = cells[index + 1];\r\n        var size1;\r\n        var size2;\r\n        if (cell.items) {\r\n            if (!otherCell1.items && !otherCell2.items) {\r\n                size1 = cell.rect[0] - otherCell1.rect[2];\r\n                size2 = otherCell2.rect[0] - cell.rect[2];\r\n                if (size1 > size2) {\r\n                    if (size1 / size2 >= 2) {\r\n                        cell.rect[0] -= size1;\r\n                        cell.right = true\r\n                    } else {\r\n                        cell.rect[0] -= size2;\r\n                        cell.rect[2] += size2\r\n                    }\r\n                } else {\r\n                    if (size2 / size1 >= 2) {\r\n                        cell.rect[2] += size2;\r\n                        cell.center = null\r\n                    } else {\r\n                        cell.rect[0] -= size1;\r\n                        cell.rect[2] += size1\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (otherCell1.items) {\r\n                otherCell1.rect[2] = (cell.rect[0] + cell.rect[2]) / 2\r\n            }\r\n            if (otherCell2.items) {\r\n                otherCell2.rect[0] = (cell.rect[0] + cell.rect[2]) / 2\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction adjustCellsAndApplyLayout(cells, forceMode) {\r\n    var hasHiddenItems = false;\r\n    adjustCellSizes(cells);\r\n    _each(cells, function(_, cell) {\r\n        if (cell.items) {\r\n            hasHiddenItems = applyCellLayout(cell, forceMode) || hasHiddenItems\r\n        }\r\n    });\r\n    return hasHiddenItems\r\n}\r\n\r\nfunction applyCellLayout(cell, forceMode) {\r\n    var cellRect = cell.rect;\r\n    var cellWidth = cellRect[2] - cellRect[0];\r\n    var cellHeight = cellRect[3] - cellRect[1];\r\n    var xOffset = 0;\r\n    var yOffset = 0;\r\n    var currentHeight = 0;\r\n    var totalL = cellRect[2];\r\n    var totalT = cellRect[3];\r\n    var totalR = cellRect[0];\r\n    var totalB = cellRect[1];\r\n    var moves = [];\r\n    var hasHiddenItems = false;\r\n    _each(cell.items, function(_, item) {\r\n        if (item.width > cellWidth || item.height > cellHeight) {\r\n            moves.push(null);\r\n            hasHiddenItems = true;\r\n            return forceMode || false\r\n        }\r\n        if (xOffset + item.width > cellWidth) {\r\n            yOffset += currentHeight;\r\n            xOffset = currentHeight = 0\r\n        }\r\n        if (yOffset + item.height > cellHeight) {\r\n            moves.push(null);\r\n            hasHiddenItems = true;\r\n            return forceMode || false\r\n        }\r\n        currentHeight = _max(currentHeight, item.height);\r\n        var dx = cell.horInversion ? cellRect[2] - item.width - xOffset : cellRect[0] + xOffset;\r\n        var dy = cell.verInversion ? cellRect[3] - item.height - yOffset : cellRect[1] + yOffset;\r\n        xOffset += item.width;\r\n        totalL = _min(totalL, dx);\r\n        totalT = _min(totalT, dy);\r\n        totalR = _max(totalR, dx + item.width);\r\n        totalB = _max(totalB, dy + item.height);\r\n        moves.push([dx, dy])\r\n    });\r\n    if (forceMode || !hasHiddenItems) {\r\n        xOffset = 0;\r\n        if (cell.right) {\r\n            xOffset = cellRect[2] - cellRect[0] - totalR + totalL\r\n        } else {\r\n            if (cell.center) {\r\n                xOffset = _round((cellRect[2] - cellRect[0] - totalR + totalL) / 2)\r\n            }\r\n        }\r\n        _each(cell.items, function(i, item) {\r\n            var move = moves[i];\r\n            if (move) {\r\n                item.item.locate(move[0] + xOffset, move[1])\r\n            } else {\r\n                item.item.resize(null)\r\n            }\r\n        });\r\n        cell.rect = [totalL, totalT, totalR, totalB];\r\n        cell.items = null\r\n    }\r\n    return hasHiddenItems\r\n}\r\n\r\nfunction applyLayout(canvas, items) {\r\n    var cells = createCells(canvas, items);\r\n    if (adjustCellsAndApplyLayout(cells)) {\r\n        adjustCellsAndApplyLayout(cells, true)\r\n    }\r\n}\r\n\r\nfunction LayoutControl() {\r\n    var that = this;\r\n    that._items = [];\r\n    that._suspended = 0;\r\n    that._updateLayout = function() {\r\n        that._update()\r\n    }\r\n}\r\nLayoutControl.prototype = {\r\n    constructor: LayoutControl,\r\n    dispose: function() {\r\n        this._items = this._updateLayout = null\r\n    },\r\n    setSize: function(canvas) {\r\n        this._canvas = canvas;\r\n        this._update()\r\n    },\r\n    suspend: function() {\r\n        ++this._suspended\r\n    },\r\n    resume: function() {\r\n        if (0 === --this._suspended) {\r\n            this._update()\r\n        }\r\n    },\r\n    addItem: function(item) {\r\n        this._items.push(item);\r\n        item.updateLayout = this._updateLayout\r\n    },\r\n    removeItem: function(item) {\r\n        this._items.splice(_inArray(item, this._items), 1);\r\n        item.updateLayout = null\r\n    },\r\n    _update: function() {\r\n        var canvas;\r\n        if (0 === this._suspended) {\r\n            canvas = this._canvas;\r\n            _each(this._items, function(_, item) {\r\n                item.resize(canvas)\r\n            });\r\n            applyLayout({\r\n                left: canvas.left,\r\n                top: canvas.top,\r\n                right: canvas.width + canvas.left,\r\n                bottom: canvas.height + canvas.top\r\n            }, this._items)\r\n        }\r\n    }\r\n};\r\nexports.LayoutControl = LayoutControl;\r\n"]},"metadata":{},"sourceType":"module"}