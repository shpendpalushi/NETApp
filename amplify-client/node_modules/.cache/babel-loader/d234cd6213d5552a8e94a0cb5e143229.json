{"ast":null,"code":"/**\r\n * DevExtreme (viz/core/tooltip.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _inflector = require(\"../../core/utils/inflector\");\n\nvar _inflector2 = _interopRequireDefault(_inflector);\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _renderer3 = require(\"./renderers/renderer\");\n\nvar _renderer4 = _interopRequireDefault(_renderer3);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _utils = require(\"./utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _format_helper = require(\"../../format_helper\");\n\nvar _plaque = require(\"./plaque\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar mathCeil = Math.ceil;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\n\nvar window = _window2.default.getWindow();\n\nvar DEFAULT_HTML_GROUP_WIDTH = 3e3;\n\nfunction hideElement($element) {\n  $element.css({\n    left: \"-9999px\"\n  }).detach();\n}\n\nfunction getSpecialFormatOptions(options, specialFormat) {\n  var result = options;\n\n  switch (specialFormat) {\n    case \"argument\":\n      result = {\n        format: options.argumentFormat\n      };\n      break;\n\n    case \"percent\":\n      result = {\n        format: {\n          type: \"percent\",\n          precision: options.format && options.format.percentPrecision\n        }\n      };\n  }\n\n  return result;\n}\n\nfunction Tooltip(params) {\n  var that = this;\n  var renderer;\n  var root;\n  that._eventTrigger = params.eventTrigger;\n  that._widgetRoot = params.widgetRoot;\n  that._widget = params.widget;\n  that._wrapper = (0, _renderer2.default)(\"<div>\").css({\n    position: \"absolute\",\n    overflow: \"hidden\",\n    pointerEvents: \"none\"\n  }).addClass(params.cssClass);\n  that._renderer = renderer = new _renderer4.default.Renderer({\n    pathModified: params.pathModified,\n    container: that._wrapper[0]\n  });\n  root = renderer.root;\n  root.attr({\n    \"pointer-events\": \"none\"\n  });\n  that._text = renderer.text(void 0, 0, 0);\n  that._textGroupHtml = (0, _renderer2.default)(\"<div>\").css({\n    position: \"absolute\",\n    padding: 0,\n    margin: 0,\n    border: \"0px solid transparent\"\n  }).appendTo(that._wrapper);\n  that._textHtml = (0, _renderer2.default)(\"<div>\").css({\n    position: \"relative\",\n    display: \"inline-block\",\n    padding: 0,\n    margin: 0,\n    border: \"0px solid transparent\"\n  }).appendTo(that._textGroupHtml);\n}\n\nTooltip.prototype = {\n  constructor: Tooltip,\n  dispose: function dispose() {\n    this._wrapper.remove();\n\n    this._renderer.dispose();\n\n    this._options = this._widgetRoot = null;\n  },\n  _getContainer: function _getContainer() {\n    var options = this._options;\n    var container = (0, _renderer2.default)(this._widgetRoot).closest(options.container);\n\n    if (0 === container.length) {\n      container = (0, _renderer2.default)(options.container);\n    }\n\n    return (container.length ? container : (0, _renderer2.default)(\"body\")).get(0);\n  },\n  setTemplate: function setTemplate(contentTemplate) {\n    var that = this;\n    that._template = contentTemplate ? that._widget._getTemplate(contentTemplate) : null;\n  },\n  setOptions: function setOptions(options) {\n    var _this = this;\n\n    options = options || {};\n    var that = this;\n    that._options = options;\n    that._textFontStyles = _utils2.default.patchFontOptions(options.font);\n    that._textFontStyles.color = options.font.color;\n\n    that._wrapper.css({\n      zIndex: options.zIndex\n    });\n\n    that._customizeTooltip = options.customizeTooltip;\n    var textGroupHtml = that._textGroupHtml;\n    var textHtml = that._textHtml;\n\n    if (this.plaque) {\n      this.plaque.clear();\n    }\n\n    this.setTemplate(options.contentTemplate);\n\n    var drawTooltip = function drawTooltip(tooltip, group) {\n      var state = tooltip._state;\n      var template = tooltip._template;\n      var useTemplate = template && !state.formatObject.skipTemplate;\n\n      if (state.html || useTemplate) {\n        if (!state.isRendered) {\n          if (useTemplate) {\n            template.render({\n              model: state.formatObject,\n              container: textHtml\n            });\n            state.html = textHtml.html();\n\n            if (!state.html) {\n              _this.plaque.clear();\n\n              return;\n            }\n          } else {\n            that._text.attr({\n              text: \"\"\n            });\n\n            textHtml.html(state.html);\n          }\n\n          textGroupHtml.css({\n            color: state.textColor,\n            width: DEFAULT_HTML_GROUP_WIDTH\n          });\n          state.isRendered = true;\n        }\n      } else {\n        that._text.css({\n          fill: state.textColor\n        }).attr({\n          text: state.text,\n          \"class\": options.cssClass\n        }).append(group.attr({\n          align: options.textAlignment\n        }));\n      }\n\n      tooltip.plaque.customizeCloud({\n        fill: state.color,\n        stroke: state.borderColor\n      });\n    };\n\n    this.plaque = new _plaque.Plaque({\n      opacity: that._options.opacity,\n      color: that._options.color,\n      border: that._options.border,\n      paddingLeftRight: that._options.paddingLeftRight,\n      paddingTopBottom: that._options.paddingTopBottom,\n      arrowLength: that._options.arrowLength,\n      arrowWidth: 20,\n      shadow: that._options.shadow,\n      cornerRadius: that._options.cornerRadius\n    }, that, that._renderer.root, drawTooltip, true, function (tooltip, g) {\n      var state = tooltip._state;\n\n      if (state.html) {\n        var bBox;\n        var getComputedStyle = window.getComputedStyle;\n\n        if (getComputedStyle) {\n          bBox = getComputedStyle(textHtml.get(0));\n          bBox = {\n            x: 0,\n            y: 0,\n            width: mathCeil(parseFloat(bBox.width)),\n            height: mathCeil(parseFloat(bBox.height))\n          };\n        } else {\n          bBox = textHtml.get(0).getBoundingClientRect();\n          bBox = {\n            x: 0,\n            y: 0,\n            width: mathCeil(bBox.width ? bBox.width : bBox.right - bBox.left),\n            height: mathCeil(bBox.height ? bBox.height : bBox.bottom - bBox.top)\n          };\n        }\n\n        return bBox;\n      }\n\n      return g.getBBox();\n    }, function (tooltip, g, x, y) {\n      var state = tooltip._state;\n\n      if (state.html) {\n        that._textGroupHtml.css({\n          left: x,\n          top: y\n        });\n      } else {\n        g.move(x, y);\n      }\n    });\n    return that;\n  },\n  setRendererOptions: function setRendererOptions(options) {\n    this._renderer.setOptions(options);\n\n    this._textGroupHtml.css({\n      direction: options.rtl ? \"rtl\" : \"ltr\"\n    });\n\n    return this;\n  },\n  render: function render() {\n    var that = this;\n    hideElement(that._wrapper);\n    var normalizedCSS = {};\n\n    for (var name in that._textFontStyles) {\n      normalizedCSS[_inflector2.default.camelize(name)] = that._textFontStyles[name];\n    }\n\n    that._textGroupHtml.css(normalizedCSS);\n\n    that._text.css(that._textFontStyles);\n\n    that._eventData = null;\n    return that;\n  },\n  update: function update(options) {\n    return this.setOptions(options).render();\n  },\n  _prepare: function _prepare(formatObject, state) {\n    var customizeTooltip = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this._customizeTooltip;\n    var options = this._options;\n    var customize = {};\n\n    if (_type2.default.isFunction(customizeTooltip)) {\n      customize = customizeTooltip.call(formatObject, formatObject);\n      customize = _type2.default.isPlainObject(customize) ? customize : {};\n\n      if (\"text\" in customize) {\n        state.text = _type2.default.isDefined(customize.text) ? String(customize.text) : \"\";\n      }\n\n      if (\"html\" in customize) {\n        state.html = _type2.default.isDefined(customize.html) ? String(customize.html) : \"\";\n      }\n    }\n\n    if (!(\"text\" in state) && !(\"html\" in state)) {\n      state.text = formatObject.valueText || formatObject.description || \"\";\n    }\n\n    state.color = customize.color || options.color;\n    state.borderColor = customize.borderColor || (options.border || {}).color;\n    state.textColor = customize.fontColor || (options.font || {}).color;\n    return !!state.text || !!state.html || !!this._template;\n  },\n  show: function show(formatObject, params, eventData, customizeTooltip) {\n    var that = this;\n    var state = {\n      formatObject: formatObject\n    };\n\n    if (!that._prepare(formatObject, state, customizeTooltip)) {\n      return false;\n    }\n\n    that._state = state;\n\n    that._wrapper.appendTo(that._getContainer());\n\n    that._clear();\n\n    this.plaque.clear().draw((0, _extend.extend)({}, that._options, {\n      canvas: that._getCanvas()\n    }, state, {\n      x: params.x,\n      y: params.y,\n      offset: params.offset\n    }));\n    that.moveWrapper();\n    that._eventData && that._eventTrigger(\"tooltipHidden\", that._eventData);\n    that._eventData = eventData;\n\n    that._eventTrigger(\"tooltipShown\", that._eventData);\n\n    return true;\n  },\n  hide: function hide() {\n    var that = this;\n    hideElement(that._wrapper);\n\n    if (that._eventData) {\n      that._eventTrigger(\"tooltipHidden\", that._eventData);\n\n      that._clear();\n\n      that._eventData = null;\n    }\n  },\n  _clear: function _clear() {\n    this._textHtml.empty();\n  },\n  move: function move(x, y, offset) {\n    this.plaque.draw({\n      x: x,\n      y: y,\n      offset: offset,\n      canvas: this._getCanvas()\n    });\n    this.moveWrapper();\n  },\n  moveWrapper: function moveWrapper() {\n    var that = this;\n    var plaqueBBox = this.plaque.getBBox();\n\n    that._renderer.resize(plaqueBBox.width, plaqueBBox.height);\n\n    var offset = that._wrapper.css({\n      left: 0,\n      top: 0\n    }).offset();\n\n    var left = plaqueBBox.x;\n    var top = plaqueBBox.y;\n\n    that._wrapper.css({\n      left: left - offset.left,\n      top: top - offset.top\n    });\n\n    this.plaque.moveRoot(-left, -top);\n\n    if (this._state.html) {\n      that._textHtml.css({\n        left: -left,\n        top: -top\n      });\n\n      that._textGroupHtml.css({\n        width: plaqueBBox.width\n      });\n    }\n  },\n  formatValue: function formatValue(value, _specialFormat) {\n    var options = _specialFormat ? getSpecialFormatOptions(this._options, _specialFormat) : this._options;\n    return (0, _format_helper.format)(value, options.format);\n  },\n  getLocation: function getLocation() {\n    return _utils2.default.normalizeEnum(this._options.location);\n  },\n  isEnabled: function isEnabled() {\n    return !!this._options.enabled;\n  },\n  isShared: function isShared() {\n    return !!this._options.shared;\n  },\n  _getCanvas: function _getCanvas() {\n    var container = this._getContainer();\n\n    var containerBox = container.getBoundingClientRect();\n\n    var html = _dom_adapter2.default.getDocumentElement();\n\n    var document = _dom_adapter2.default.getDocument();\n\n    var left = window.pageXOffset || html.scrollLeft || 0;\n    var top = window.pageYOffset || html.scrollTop || 0;\n    var box = {\n      left: left,\n      top: top,\n      width: html.clientWidth + left || 0,\n      height: mathMax(document.body.scrollHeight, html.scrollHeight, document.body.offsetHeight, html.offsetHeight, document.body.clientHeight, html.clientHeight) || 0,\n      right: 0,\n      bottom: 0\n    };\n\n    if (container !== _dom_adapter2.default.getBody()) {\n      left = mathMax(box.left, box.left + containerBox.left);\n      top = mathMax(box.top, box.top + containerBox.top);\n      box.width = mathMin(containerBox.width, box.width) + left + box.left;\n      box.height = mathMin(containerBox.height, box.height) + top + box.top;\n      box.left = left;\n      box.top = top;\n    }\n\n    return box;\n  }\n};\nexports.Tooltip = Tooltip;\nexports.plugin = {\n  name: \"tooltip\",\n  init: function init() {\n    this._initTooltip();\n  },\n  dispose: function dispose() {\n    this._disposeTooltip();\n  },\n  members: {\n    _initTooltip: function _initTooltip() {\n      this._tooltip = new exports.Tooltip({\n        cssClass: this._rootClassPrefix + \"-tooltip\",\n        eventTrigger: this._eventTrigger,\n        pathModified: this.option(\"pathModified\"),\n        widgetRoot: this.element(),\n        widget: this\n      });\n    },\n    _disposeTooltip: function _disposeTooltip() {\n      this._tooltip.dispose();\n\n      this._tooltip = null;\n    },\n    _setTooltipRendererOptions: function _setTooltipRendererOptions() {\n      this._tooltip.setRendererOptions(this._getRendererOptions());\n    },\n    _setTooltipOptions: function _setTooltipOptions() {\n      this._tooltip.update(this._getOption(\"tooltip\"));\n    }\n  },\n  extenders: {\n    _stopCurrentHandling: function _stopCurrentHandling() {\n      this._tooltip && this._tooltip.hide();\n    }\n  },\n  customize: function customize(constructor) {\n    var proto = constructor.prototype;\n    proto._eventsMap.onTooltipShown = {\n      name: \"tooltipShown\"\n    };\n    proto._eventsMap.onTooltipHidden = {\n      name: \"tooltipHidden\"\n    };\n    constructor.addChange({\n      code: \"TOOLTIP_RENDERER\",\n      handler: function handler() {\n        this._setTooltipRendererOptions();\n      },\n      isThemeDependent: true,\n      isOptionChange: true\n    });\n    constructor.addChange({\n      code: \"TOOLTIP\",\n      handler: function handler() {\n        this._setTooltipOptions();\n      },\n      isThemeDependent: true,\n      isOptionChange: true,\n      option: \"tooltip\"\n    });\n  },\n  fontFields: [\"tooltip.font\"]\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/core/tooltip.js"],"names":["_dom_adapter","require","_dom_adapter2","_interopRequireDefault","_window","_window2","_inflector","_inflector2","_renderer","_renderer2","_renderer3","_renderer4","_type","_type2","_extend","_utils","_utils2","_format_helper","_plaque","obj","mathCeil","Math","mathMax","mathMin","window","DEFAULT_HTML_GROUP_WIDTH","$element","left","result","format","options","argumentFormat","type","precision","percentPrecision","that","params","position","overflow","pointerEvents","renderer","pathModified","container","root","padding","margin","border","display","Tooltip","constructor","dispose","_getContainer","setTemplate","contentTemplate","setOptions","_this","zIndex","textGroupHtml","textHtml","drawTooltip","state","tooltip","template","useTemplate","model","text","color","width","fill","textColor","cssClass","align","textAlignment","stroke","borderColor","opacity","paddingLeftRight","paddingTopBottom","arrowLength","arrowWidth","shadow","cornerRadius","getComputedStyle","bBox","x","y","parseFloat","height","g","top","setRendererOptions","direction","render","hideElement","normalizedCSS","update","_prepare","customizeTooltip","arguments","customize","String","formatObject","show","canvas","offset","hide","_clear","move","moveWrapper","plaqueBBox","formatValue","_specialFormat","getSpecialFormatOptions","getLocation","isEnabled","isShared","_getCanvas","containerBox","html","document","box","right","bottom","exports","name","init","members","_initTooltip","eventTrigger","widgetRoot","widget","_disposeTooltip","_setTooltipRendererOptions","_setTooltipOptions","extenders","_stopCurrentHandling","proto","code","handler","isThemeDependent","isOptionChange","option","fontFields"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/core/tooltip.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _window2 = _interopRequireDefault(_window);\r\nvar _inflector = require(\"../../core/utils/inflector\");\r\nvar _inflector2 = _interopRequireDefault(_inflector);\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _renderer3 = require(\"./renderers/renderer\");\r\nvar _renderer4 = _interopRequireDefault(_renderer3);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _utils = require(\"./utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _format_helper = require(\"../../format_helper\");\r\nvar _plaque = require(\"./plaque\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar mathCeil = Math.ceil;\r\nvar mathMax = Math.max;\r\nvar mathMin = Math.min;\r\nvar window = _window2.default.getWindow();\r\nvar DEFAULT_HTML_GROUP_WIDTH = 3e3;\r\n\r\nfunction hideElement($element) {\r\n    $element.css({\r\n        left: \"-9999px\"\r\n    }).detach()\r\n}\r\n\r\nfunction getSpecialFormatOptions(options, specialFormat) {\r\n    var result = options;\r\n    switch (specialFormat) {\r\n        case \"argument\":\r\n            result = {\r\n                format: options.argumentFormat\r\n            };\r\n            break;\r\n        case \"percent\":\r\n            result = {\r\n                format: {\r\n                    type: \"percent\",\r\n                    precision: options.format && options.format.percentPrecision\r\n                }\r\n            }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction Tooltip(params) {\r\n    var that = this;\r\n    var renderer;\r\n    var root;\r\n    that._eventTrigger = params.eventTrigger;\r\n    that._widgetRoot = params.widgetRoot;\r\n    that._widget = params.widget;\r\n    that._wrapper = (0, _renderer2.default)(\"<div>\").css({\r\n        position: \"absolute\",\r\n        overflow: \"hidden\",\r\n        pointerEvents: \"none\"\r\n    }).addClass(params.cssClass);\r\n    that._renderer = renderer = new _renderer4.default.Renderer({\r\n        pathModified: params.pathModified,\r\n        container: that._wrapper[0]\r\n    });\r\n    root = renderer.root;\r\n    root.attr({\r\n        \"pointer-events\": \"none\"\r\n    });\r\n    that._text = renderer.text(void 0, 0, 0);\r\n    that._textGroupHtml = (0, _renderer2.default)(\"<div>\").css({\r\n        position: \"absolute\",\r\n        padding: 0,\r\n        margin: 0,\r\n        border: \"0px solid transparent\"\r\n    }).appendTo(that._wrapper);\r\n    that._textHtml = (0, _renderer2.default)(\"<div>\").css({\r\n        position: \"relative\",\r\n        display: \"inline-block\",\r\n        padding: 0,\r\n        margin: 0,\r\n        border: \"0px solid transparent\"\r\n    }).appendTo(that._textGroupHtml)\r\n}\r\nTooltip.prototype = {\r\n    constructor: Tooltip,\r\n    dispose: function() {\r\n        this._wrapper.remove();\r\n        this._renderer.dispose();\r\n        this._options = this._widgetRoot = null\r\n    },\r\n    _getContainer: function() {\r\n        var options = this._options;\r\n        var container = (0, _renderer2.default)(this._widgetRoot).closest(options.container);\r\n        if (0 === container.length) {\r\n            container = (0, _renderer2.default)(options.container)\r\n        }\r\n        return (container.length ? container : (0, _renderer2.default)(\"body\")).get(0)\r\n    },\r\n    setTemplate: function(contentTemplate) {\r\n        var that = this;\r\n        that._template = contentTemplate ? that._widget._getTemplate(contentTemplate) : null\r\n    },\r\n    setOptions: function(options) {\r\n        var _this = this;\r\n        options = options || {};\r\n        var that = this;\r\n        that._options = options;\r\n        that._textFontStyles = _utils2.default.patchFontOptions(options.font);\r\n        that._textFontStyles.color = options.font.color;\r\n        that._wrapper.css({\r\n            zIndex: options.zIndex\r\n        });\r\n        that._customizeTooltip = options.customizeTooltip;\r\n        var textGroupHtml = that._textGroupHtml;\r\n        var textHtml = that._textHtml;\r\n        if (this.plaque) {\r\n            this.plaque.clear()\r\n        }\r\n        this.setTemplate(options.contentTemplate);\r\n        var drawTooltip = function(tooltip, group) {\r\n            var state = tooltip._state;\r\n            var template = tooltip._template;\r\n            var useTemplate = template && !state.formatObject.skipTemplate;\r\n            if (state.html || useTemplate) {\r\n                if (!state.isRendered) {\r\n                    if (useTemplate) {\r\n                        template.render({\r\n                            model: state.formatObject,\r\n                            container: textHtml\r\n                        });\r\n                        state.html = textHtml.html();\r\n                        if (!state.html) {\r\n                            _this.plaque.clear();\r\n                            return\r\n                        }\r\n                    } else {\r\n                        that._text.attr({\r\n                            text: \"\"\r\n                        });\r\n                        textHtml.html(state.html)\r\n                    }\r\n                    textGroupHtml.css({\r\n                        color: state.textColor,\r\n                        width: DEFAULT_HTML_GROUP_WIDTH\r\n                    });\r\n                    state.isRendered = true\r\n                }\r\n            } else {\r\n                that._text.css({\r\n                    fill: state.textColor\r\n                }).attr({\r\n                    text: state.text,\r\n                    \"class\": options.cssClass\r\n                }).append(group.attr({\r\n                    align: options.textAlignment\r\n                }))\r\n            }\r\n            tooltip.plaque.customizeCloud({\r\n                fill: state.color,\r\n                stroke: state.borderColor\r\n            })\r\n        };\r\n        this.plaque = new _plaque.Plaque({\r\n            opacity: that._options.opacity,\r\n            color: that._options.color,\r\n            border: that._options.border,\r\n            paddingLeftRight: that._options.paddingLeftRight,\r\n            paddingTopBottom: that._options.paddingTopBottom,\r\n            arrowLength: that._options.arrowLength,\r\n            arrowWidth: 20,\r\n            shadow: that._options.shadow,\r\n            cornerRadius: that._options.cornerRadius\r\n        }, that, that._renderer.root, drawTooltip, true, function(tooltip, g) {\r\n            var state = tooltip._state;\r\n            if (state.html) {\r\n                var bBox;\r\n                var getComputedStyle = window.getComputedStyle;\r\n                if (getComputedStyle) {\r\n                    bBox = getComputedStyle(textHtml.get(0));\r\n                    bBox = {\r\n                        x: 0,\r\n                        y: 0,\r\n                        width: mathCeil(parseFloat(bBox.width)),\r\n                        height: mathCeil(parseFloat(bBox.height))\r\n                    }\r\n                } else {\r\n                    bBox = textHtml.get(0).getBoundingClientRect();\r\n                    bBox = {\r\n                        x: 0,\r\n                        y: 0,\r\n                        width: mathCeil(bBox.width ? bBox.width : bBox.right - bBox.left),\r\n                        height: mathCeil(bBox.height ? bBox.height : bBox.bottom - bBox.top)\r\n                    }\r\n                }\r\n                return bBox\r\n            }\r\n            return g.getBBox()\r\n        }, function(tooltip, g, x, y) {\r\n            var state = tooltip._state;\r\n            if (state.html) {\r\n                that._textGroupHtml.css({\r\n                    left: x,\r\n                    top: y\r\n                })\r\n            } else {\r\n                g.move(x, y)\r\n            }\r\n        });\r\n        return that\r\n    },\r\n    setRendererOptions: function(options) {\r\n        this._renderer.setOptions(options);\r\n        this._textGroupHtml.css({\r\n            direction: options.rtl ? \"rtl\" : \"ltr\"\r\n        });\r\n        return this\r\n    },\r\n    render: function() {\r\n        var that = this;\r\n        hideElement(that._wrapper);\r\n        var normalizedCSS = {};\r\n        for (var name in that._textFontStyles) {\r\n            normalizedCSS[_inflector2.default.camelize(name)] = that._textFontStyles[name]\r\n        }\r\n        that._textGroupHtml.css(normalizedCSS);\r\n        that._text.css(that._textFontStyles);\r\n        that._eventData = null;\r\n        return that\r\n    },\r\n    update: function(options) {\r\n        return this.setOptions(options).render()\r\n    },\r\n    _prepare: function(formatObject, state) {\r\n        var customizeTooltip = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this._customizeTooltip;\r\n        var options = this._options;\r\n        var customize = {};\r\n        if (_type2.default.isFunction(customizeTooltip)) {\r\n            customize = customizeTooltip.call(formatObject, formatObject);\r\n            customize = _type2.default.isPlainObject(customize) ? customize : {};\r\n            if (\"text\" in customize) {\r\n                state.text = _type2.default.isDefined(customize.text) ? String(customize.text) : \"\"\r\n            }\r\n            if (\"html\" in customize) {\r\n                state.html = _type2.default.isDefined(customize.html) ? String(customize.html) : \"\"\r\n            }\r\n        }\r\n        if (!(\"text\" in state) && !(\"html\" in state)) {\r\n            state.text = formatObject.valueText || formatObject.description || \"\"\r\n        }\r\n        state.color = customize.color || options.color;\r\n        state.borderColor = customize.borderColor || (options.border || {}).color;\r\n        state.textColor = customize.fontColor || (options.font || {}).color;\r\n        return !!state.text || !!state.html || !!this._template\r\n    },\r\n    show: function(formatObject, params, eventData, customizeTooltip) {\r\n        var that = this;\r\n        var state = {\r\n            formatObject: formatObject\r\n        };\r\n        if (!that._prepare(formatObject, state, customizeTooltip)) {\r\n            return false\r\n        }\r\n        that._state = state;\r\n        that._wrapper.appendTo(that._getContainer());\r\n        that._clear();\r\n        this.plaque.clear().draw((0, _extend.extend)({}, that._options, {\r\n            canvas: that._getCanvas()\r\n        }, state, {\r\n            x: params.x,\r\n            y: params.y,\r\n            offset: params.offset\r\n        }));\r\n        that.moveWrapper();\r\n        that._eventData && that._eventTrigger(\"tooltipHidden\", that._eventData);\r\n        that._eventData = eventData;\r\n        that._eventTrigger(\"tooltipShown\", that._eventData);\r\n        return true\r\n    },\r\n    hide: function() {\r\n        var that = this;\r\n        hideElement(that._wrapper);\r\n        if (that._eventData) {\r\n            that._eventTrigger(\"tooltipHidden\", that._eventData);\r\n            that._clear();\r\n            that._eventData = null\r\n        }\r\n    },\r\n    _clear: function() {\r\n        this._textHtml.empty()\r\n    },\r\n    move: function(x, y, offset) {\r\n        this.plaque.draw({\r\n            x: x,\r\n            y: y,\r\n            offset: offset,\r\n            canvas: this._getCanvas()\r\n        });\r\n        this.moveWrapper()\r\n    },\r\n    moveWrapper: function() {\r\n        var that = this;\r\n        var plaqueBBox = this.plaque.getBBox();\r\n        that._renderer.resize(plaqueBBox.width, plaqueBBox.height);\r\n        var offset = that._wrapper.css({\r\n            left: 0,\r\n            top: 0\r\n        }).offset();\r\n        var left = plaqueBBox.x;\r\n        var top = plaqueBBox.y;\r\n        that._wrapper.css({\r\n            left: left - offset.left,\r\n            top: top - offset.top\r\n        });\r\n        this.plaque.moveRoot(-left, -top);\r\n        if (this._state.html) {\r\n            that._textHtml.css({\r\n                left: -left,\r\n                top: -top\r\n            });\r\n            that._textGroupHtml.css({\r\n                width: plaqueBBox.width\r\n            })\r\n        }\r\n    },\r\n    formatValue: function(value, _specialFormat) {\r\n        var options = _specialFormat ? getSpecialFormatOptions(this._options, _specialFormat) : this._options;\r\n        return (0, _format_helper.format)(value, options.format)\r\n    },\r\n    getLocation: function() {\r\n        return _utils2.default.normalizeEnum(this._options.location)\r\n    },\r\n    isEnabled: function() {\r\n        return !!this._options.enabled\r\n    },\r\n    isShared: function() {\r\n        return !!this._options.shared\r\n    },\r\n    _getCanvas: function() {\r\n        var container = this._getContainer();\r\n        var containerBox = container.getBoundingClientRect();\r\n        var html = _dom_adapter2.default.getDocumentElement();\r\n        var document = _dom_adapter2.default.getDocument();\r\n        var left = window.pageXOffset || html.scrollLeft || 0;\r\n        var top = window.pageYOffset || html.scrollTop || 0;\r\n        var box = {\r\n            left: left,\r\n            top: top,\r\n            width: html.clientWidth + left || 0,\r\n            height: mathMax(document.body.scrollHeight, html.scrollHeight, document.body.offsetHeight, html.offsetHeight, document.body.clientHeight, html.clientHeight) || 0,\r\n            right: 0,\r\n            bottom: 0\r\n        };\r\n        if (container !== _dom_adapter2.default.getBody()) {\r\n            left = mathMax(box.left, box.left + containerBox.left);\r\n            top = mathMax(box.top, box.top + containerBox.top);\r\n            box.width = mathMin(containerBox.width, box.width) + left + box.left;\r\n            box.height = mathMin(containerBox.height, box.height) + top + box.top;\r\n            box.left = left;\r\n            box.top = top\r\n        }\r\n        return box\r\n    }\r\n};\r\nexports.Tooltip = Tooltip;\r\nexports.plugin = {\r\n    name: \"tooltip\",\r\n    init: function() {\r\n        this._initTooltip()\r\n    },\r\n    dispose: function() {\r\n        this._disposeTooltip()\r\n    },\r\n    members: {\r\n        _initTooltip: function() {\r\n            this._tooltip = new exports.Tooltip({\r\n                cssClass: this._rootClassPrefix + \"-tooltip\",\r\n                eventTrigger: this._eventTrigger,\r\n                pathModified: this.option(\"pathModified\"),\r\n                widgetRoot: this.element(),\r\n                widget: this\r\n            })\r\n        },\r\n        _disposeTooltip: function() {\r\n            this._tooltip.dispose();\r\n            this._tooltip = null\r\n        },\r\n        _setTooltipRendererOptions: function() {\r\n            this._tooltip.setRendererOptions(this._getRendererOptions())\r\n        },\r\n        _setTooltipOptions: function() {\r\n            this._tooltip.update(this._getOption(\"tooltip\"))\r\n        }\r\n    },\r\n    extenders: {\r\n        _stopCurrentHandling: function() {\r\n            this._tooltip && this._tooltip.hide()\r\n        }\r\n    },\r\n    customize: function(constructor) {\r\n        var proto = constructor.prototype;\r\n        proto._eventsMap.onTooltipShown = {\r\n            name: \"tooltipShown\"\r\n        };\r\n        proto._eventsMap.onTooltipHidden = {\r\n            name: \"tooltipHidden\"\r\n        };\r\n        constructor.addChange({\r\n            code: \"TOOLTIP_RENDERER\",\r\n            handler: function() {\r\n                this._setTooltipRendererOptions()\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true\r\n        });\r\n        constructor.addChange({\r\n            code: \"TOOLTIP\",\r\n            handler: function() {\r\n                this._setTooltipOptions()\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true,\r\n            option: \"tooltip\"\r\n        })\r\n    },\r\n    fontFields: [\"tooltip.font\"]\r\n};\r\n"]},"metadata":{},"sourceType":"module"}