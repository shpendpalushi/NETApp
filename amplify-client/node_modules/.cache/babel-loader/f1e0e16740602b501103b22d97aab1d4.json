{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.filter_row.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _utils = require(\"../../events/utils\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\n\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _editor = require(\"../editor/editor\");\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _overlay = require(\"../overlay\");\n\nvar _overlay2 = _interopRequireDefault(_overlay);\n\nvar _menu = require(\"../menu\");\n\nvar _menu2 = _interopRequireDefault(_menu);\n\nvar _accessibility = require(\"../shared/accessibility\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar OPERATION_ICONS = {\n  \"=\": \"filter-operation-equals\",\n  \"<>\": \"filter-operation-not-equals\",\n  \"<\": \"filter-operation-less\",\n  \"<=\": \"filter-operation-less-equal\",\n  \">\": \"filter-operation-greater\",\n  \">=\": \"filter-operation-greater-equal\",\n  \"default\": \"filter-operation-default\",\n  notcontains: \"filter-operation-not-contains\",\n  contains: \"filter-operation-contains\",\n  startswith: \"filter-operation-starts-with\",\n  endswith: \"filter-operation-ends-with\",\n  between: \"filter-operation-between\"\n};\nvar OPERATION_DESCRIPTORS = {\n  \"=\": \"equal\",\n  \"<>\": \"notEqual\",\n  \"<\": \"lessThan\",\n  \"<=\": \"lessThanOrEqual\",\n  \">\": \"greaterThan\",\n  \">=\": \"greaterThanOrEqual\",\n  startswith: \"startsWith\",\n  contains: \"contains\",\n  notcontains: \"notContains\",\n  endswith: \"endsWith\",\n  between: \"between\"\n};\nvar FILTERING_TIMEOUT = 700;\nvar CORRECT_FILTER_RANGE_OVERLAY_WIDTH = 1;\nvar FILTER_ROW_CLASS = \"filter-row\";\nvar FILTER_RANGE_OVERLAY_CLASS = \"filter-range-overlay\";\nvar FILTER_RANGE_START_CLASS = \"filter-range-start\";\nvar FILTER_RANGE_END_CLASS = \"filter-range-end\";\nvar MENU_CLASS = \"dx-menu\";\nvar EDITOR_WITH_MENU_CLASS = \"dx-editor-with-menu\";\nvar EDITOR_CONTAINER_CLASS = \"dx-editor-container\";\nvar EDITOR_CELL_CLASS = \"dx-editor-cell\";\nvar FILTER_MENU = \"dx-filter-menu\";\nvar APPLY_BUTTON_CLASS = \"dx-apply-button\";\nvar HIGHLIGHT_OUTLINE_CLASS = \"dx-highlight-outline\";\nvar FOCUSED_CLASS = \"dx-focused\";\nvar CELL_FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\nvar FILTER_RANGE_CONTENT_CLASS = \"dx-filter-range-content\";\nvar FILTER_MODIFIED_CLASS = \"dx-filter-modified\";\nvar EDITORS_INPUT_SELECTOR = \"input:not([type='hidden'])\";\nvar BETWEEN_OPERATION_DATA_TYPES = [\"date\", \"datetime\", \"number\"];\n\nfunction isOnClickApplyFilterMode(that) {\n  return \"onClick\" === that.option(\"filterRow.applyFilter\");\n}\n\nvar ColumnHeadersViewFilterRowExtender = function () {\n  var getEditorInstance = function getEditorInstance($editorContainer) {\n    var $editor = $editorContainer && $editorContainer.children();\n    var componentNames = $editor && $editor.data(\"dxComponents\");\n    var editor = componentNames && componentNames.length && $editor.data(componentNames[0]);\n\n    if (editor instanceof _editor2.default) {\n      return editor;\n    }\n  };\n\n  var getRangeTextByFilterValue = function getRangeTextByFilterValue(that, column) {\n    var result = \"\";\n    var rangeEnd = \"\";\n    var filterValue = getColumnFilterValue(that, column);\n\n    var formatOptions = _uiGrid_core4.default.getFormatOptionsByColumn(column, \"filterRow\");\n\n    if (Array.isArray(filterValue)) {\n      result = _uiGrid_core4.default.formatValue(filterValue[0], formatOptions);\n      rangeEnd = _uiGrid_core4.default.formatValue(filterValue[1], formatOptions);\n\n      if (\"\" !== rangeEnd) {\n        result += \" - \" + rangeEnd;\n      }\n    } else {\n      if ((0, _type.isDefined)(filterValue)) {\n        result = _uiGrid_core4.default.formatValue(filterValue, formatOptions);\n      }\n    }\n\n    return result;\n  };\n\n  var getColumnFilterValue = function getColumnFilterValue(that, column) {\n    if (column) {\n      return isOnClickApplyFilterMode(that) && void 0 !== column.bufferedFilterValue ? column.bufferedFilterValue : column.filterValue;\n    }\n  };\n\n  var getColumnSelectedFilterOperation = function getColumnSelectedFilterOperation(that, column) {\n    if (column) {\n      return isOnClickApplyFilterMode(that) && void 0 !== column.bufferedSelectedFilterOperation ? column.bufferedSelectedFilterOperation : column.selectedFilterOperation;\n    }\n  };\n\n  var isValidFilterValue = function isValidFilterValue(filterValue, column) {\n    if (column && BETWEEN_OPERATION_DATA_TYPES.indexOf(column.dataType) >= 0 && Array.isArray(filterValue)) {\n      return false;\n    }\n\n    return void 0 !== filterValue;\n  };\n\n  var getFilterValue = function getFilterValue(that, columnIndex, $editorContainer) {\n    var column = that._columnsController.columnOption(columnIndex);\n\n    var filterValue = getColumnFilterValue(that, column);\n    var isFilterRange = $editorContainer.closest(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).length;\n    var isRangeStart = $editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS));\n\n    if (filterValue && Array.isArray(filterValue) && \"between\" === getColumnSelectedFilterOperation(that, column)) {\n      if (isRangeStart) {\n        return filterValue[0];\n      } else {\n        return filterValue[1];\n      }\n    }\n\n    return !isFilterRange && isValidFilterValue(filterValue, column) ? filterValue : null;\n  };\n\n  var normalizeFilterValue = function normalizeFilterValue(that, filterValue, column, $editorContainer) {\n    if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\n      var columnFilterValue = getColumnFilterValue(that, column);\n\n      if ($editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))) {\n        return [filterValue, Array.isArray(columnFilterValue) ? columnFilterValue[1] : void 0];\n      } else {\n        return [Array.isArray(columnFilterValue) ? columnFilterValue[0] : columnFilterValue, filterValue];\n      }\n    }\n\n    return filterValue;\n  };\n\n  var updateFilterValue = function updateFilterValue(that, options) {\n    var value = \"\" === options.value ? null : options.value;\n    var $editorContainer = options.container;\n\n    var column = that._columnsController.columnOption(options.column.index);\n\n    var filterValue = getFilterValue(that, column.index, $editorContainer);\n\n    if (!(0, _type.isDefined)(filterValue) && !(0, _type.isDefined)(value)) {\n      return;\n    }\n\n    that._applyFilterViewController.setHighLight($editorContainer, filterValue !== value);\n\n    that._columnsController.columnOption(column.index, isOnClickApplyFilterMode(that) ? \"bufferedFilterValue\" : \"filterValue\", normalizeFilterValue(that, value, column, $editorContainer), options.notFireEvent);\n  };\n\n  return {\n    _updateEditorValue: function _updateEditorValue(column, $editorContainer) {\n      var that = this;\n      var editor = getEditorInstance($editorContainer);\n      editor && editor.option(\"value\", getFilterValue(that, column.index, $editorContainer));\n    },\n    _columnOptionChanged: function _columnOptionChanged(e) {\n      var that = this;\n      var optionNames = e.optionNames;\n      var overlayInstance;\n      var visibleIndex;\n      var column;\n      var $cell;\n      var $editorContainer;\n      var $editorRangeElements;\n      var $menu;\n\n      if (_uiGrid_core4.default.checkChanges(optionNames, [\"filterValue\", \"bufferedFilterValue\", \"selectedFilterOperation\", \"bufferedSelectedFilterOperation\"]) && void 0 !== e.columnIndex) {\n        visibleIndex = that._columnsController.getVisibleIndex(e.columnIndex);\n        column = that._columnsController.columnOption(e.columnIndex);\n        $cell = that._getCellElement(that.element().find(\".\" + that.addWidgetPrefix(FILTER_ROW_CLASS)).index(), visibleIndex) || (0, _renderer2.default)();\n        $editorContainer = $cell.find(\".\" + EDITOR_CONTAINER_CLASS).first();\n\n        if (optionNames.filterValue || optionNames.bufferedFilterValue) {\n          that._updateEditorValue(column, $editorContainer);\n\n          overlayInstance = $cell.find(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).data(\"dxOverlay\");\n\n          if (overlayInstance) {\n            $editorRangeElements = overlayInstance.$content().find(\".\" + EDITOR_CONTAINER_CLASS);\n\n            that._updateEditorValue(column, $editorRangeElements.first());\n\n            that._updateEditorValue(column, $editorRangeElements.last());\n          }\n\n          if (!overlayInstance || !overlayInstance.option(\"visible\")) {\n            that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column));\n          }\n        }\n\n        if (optionNames.selectedFilterOperation || optionNames.bufferedSelectedFilterOperation) {\n          if (visibleIndex >= 0 && column) {\n            $menu = $cell.find(\".\" + MENU_CLASS);\n\n            if ($menu.length) {\n              that._updateFilterOperationChooser($menu, column, $editorContainer);\n\n              if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\n                that._renderFilterRangeContent($cell, column);\n              } else {\n                if ($editorContainer.find(\".\" + FILTER_RANGE_CONTENT_CLASS).length) {\n                  that._renderEditor($editorContainer, that._getEditorOptions($editorContainer, column));\n\n                  that._hideFilterRange();\n                }\n              }\n            }\n          }\n        }\n\n        return;\n      }\n\n      that.callBase(e);\n    },\n    _renderCore: function _renderCore() {\n      this._filterRangeOverlayInstance = null;\n      this.callBase.apply(this, arguments);\n    },\n    _resizeCore: function _resizeCore() {\n      this.callBase.apply(this, arguments);\n      this._filterRangeOverlayInstance && this._filterRangeOverlayInstance.repaint();\n    },\n    isFilterRowVisible: function isFilterRowVisible() {\n      return this._isElementVisible(this.option(\"filterRow\"));\n    },\n    isVisible: function isVisible() {\n      return this.callBase() || this.isFilterRowVisible();\n    },\n    init: function init() {\n      this.callBase();\n      this._applyFilterViewController = this.getController(\"applyFilter\");\n    },\n    _initFilterRangeOverlay: function _initFilterRangeOverlay($cell, column) {\n      var that = this;\n      var sharedData = {};\n      var $editorContainer = $cell.find(\".dx-editor-container\");\n      var $overlay = (0, _renderer2.default)(\"<div>\").addClass(that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).appendTo($cell);\n      return that._createComponent($overlay, _overlay2.default, {\n        height: \"auto\",\n        shading: false,\n        showTitle: false,\n        focusStateEnabled: false,\n        closeOnTargetScroll: false,\n        closeOnOutsideClick: true,\n        animation: false,\n        position: {\n          my: \"top\",\n          at: \"top\",\n          of: $editorContainer.length && $editorContainer || $cell,\n          offset: \"0 -1\"\n        },\n        contentTemplate: function contentTemplate(contentElement) {\n          var editorOptions;\n          var $editor = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS + \" \" + that.addWidgetPrefix(FILTER_RANGE_START_CLASS)).appendTo(contentElement);\n          column = that._columnsController.columnOption(column.index);\n          editorOptions = that._getEditorOptions($editor, column);\n          editorOptions.sharedData = sharedData;\n\n          that._renderEditor($editor, editorOptions);\n\n          _events_engine2.default.on($editor.find(EDITORS_INPUT_SELECTOR), \"keydown\", function (e) {\n            var $prevElement = $cell.find(\"[tabindex]\").not(e.target).first();\n\n            if (\"tab\" === (0, _utils.normalizeKeyName)(e) && e.shiftKey) {\n              e.preventDefault();\n\n              that._hideFilterRange();\n\n              if (!$prevElement.length) {\n                $prevElement = $cell.prev().find(\"[tabindex]\").last();\n              }\n\n              _events_engine2.default.trigger($prevElement, \"focus\");\n            }\n          });\n\n          $editor = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS + \" \" + that.addWidgetPrefix(FILTER_RANGE_END_CLASS)).appendTo(contentElement);\n          editorOptions = that._getEditorOptions($editor, column);\n          editorOptions.sharedData = sharedData;\n\n          that._renderEditor($editor, editorOptions);\n\n          _events_engine2.default.on($editor.find(EDITORS_INPUT_SELECTOR), \"keydown\", function (e) {\n            if (\"tab\" === (0, _utils.normalizeKeyName)(e) && !e.shiftKey) {\n              e.preventDefault();\n\n              that._hideFilterRange();\n\n              _events_engine2.default.trigger($cell.next().find(\"[tabindex]\").first(), \"focus\");\n            }\n          });\n\n          return (0, _renderer2.default)(contentElement).addClass(that.getWidgetContainerClass());\n        },\n        onShown: function onShown(e) {\n          var $editor = e.component.$content().find(\".\" + EDITOR_CONTAINER_CLASS).first();\n\n          _events_engine2.default.trigger($editor.find(EDITORS_INPUT_SELECTOR), \"focus\");\n        },\n        onHidden: function onHidden() {\n          column = that._columnsController.columnOption(column.index);\n          $cell.find(\".\" + MENU_CLASS).parent().addClass(EDITOR_WITH_MENU_CLASS);\n\n          if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\n            that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column));\n\n            that.component.updateDimensions();\n          }\n        }\n      });\n    },\n    _updateFilterRangeOverlay: function _updateFilterRangeOverlay(options) {\n      var overlayInstance = this._filterRangeOverlayInstance;\n      overlayInstance && overlayInstance.option(options);\n    },\n    _showFilterRange: function _showFilterRange($cell, column) {\n      var that = this;\n      var $overlay = $cell.children(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS));\n      var overlayInstance = $overlay.length && $overlay.data(\"dxOverlay\");\n\n      if (!overlayInstance && column) {\n        overlayInstance = that._initFilterRangeOverlay($cell, column);\n      }\n\n      if (!overlayInstance.option(\"visible\")) {\n        that._filterRangeOverlayInstance && that._filterRangeOverlayInstance.hide();\n        that._filterRangeOverlayInstance = overlayInstance;\n\n        that._updateFilterRangeOverlay({\n          width: $cell.outerWidth(true) + CORRECT_FILTER_RANGE_OVERLAY_WIDTH\n        });\n\n        that._filterRangeOverlayInstance && that._filterRangeOverlayInstance.show();\n      }\n    },\n    _hideFilterRange: function _hideFilterRange() {\n      var overlayInstance = this._filterRangeOverlayInstance;\n      overlayInstance && overlayInstance.hide();\n    },\n    getFilterRangeOverlayInstance: function getFilterRangeOverlayInstance() {\n      return this._filterRangeOverlayInstance;\n    },\n    _createRow: function _createRow(row) {\n      var _this = this;\n\n      var $row = this.callBase(row);\n\n      if (\"filter\" === row.rowType) {\n        $row.addClass(this.addWidgetPrefix(FILTER_ROW_CLASS));\n\n        if (!this.option(\"useLegacyKeyboardNavigation\")) {\n          _events_engine2.default.on($row, \"keydown\", function (event) {\n            return (0, _accessibility.selectView)(\"filterRow\", _this, event);\n          });\n        }\n      }\n\n      return $row;\n    },\n    _getRows: function _getRows() {\n      var result = this.callBase();\n\n      if (this.isFilterRowVisible()) {\n        result.push({\n          rowType: \"filter\"\n        });\n      }\n\n      return result;\n    },\n    _renderFilterCell: function _renderFilterCell(cell, options) {\n      var that = this;\n      var column = options.column;\n      var $cell = (0, _renderer2.default)(cell);\n      var $container;\n      var $editorContainer;\n\n      if (that.component.option(\"showColumnHeaders\")) {\n        that.setAria(\"describedby\", column.headerId, $cell);\n      }\n\n      that.setAria(\"label\", _message2.default.format(\"dxDataGrid-ariaFilterCell\"), $cell);\n      $cell.addClass(EDITOR_CELL_CLASS);\n      $container = (0, _renderer2.default)(\"<div>\").appendTo($cell);\n      $editorContainer = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS).appendTo($container);\n\n      if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\n        that._renderFilterRangeContent($cell, column);\n      } else {\n        var editorOptions = that._getEditorOptions($editorContainer, column);\n\n        that._renderEditor($editorContainer, editorOptions);\n      }\n\n      if (column.alignment) {\n        $cell.find(EDITORS_INPUT_SELECTOR).first().css(\"textAlign\", column.alignment);\n      }\n\n      if (column.filterOperations && column.filterOperations.length) {\n        that._renderFilterOperationChooser($container, column, $editorContainer);\n      }\n    },\n    _renderCellContent: function _renderCellContent($cell, options) {\n      var that = this;\n      var column = options.column;\n\n      if (\"filter\" === options.rowType) {\n        if (column.command) {\n          $cell.html(\"&nbsp;\");\n        } else {\n          if (column.allowFiltering) {\n            that.renderTemplate($cell, that._renderFilterCell.bind(that), options);\n            return;\n          }\n        }\n      }\n\n      that.callBase($cell, options);\n    },\n    _getEditorOptions: function _getEditorOptions($editorContainer, column) {\n      var that = this;\n      var accessibilityOptions = {\n        editorOptions: {\n          inputAttr: that._getFilterInputAccessibilityAttributes(column)\n        }\n      };\n      var result = (0, _extend.extend)(accessibilityOptions, column, {\n        value: getFilterValue(that, column.index, $editorContainer),\n        parentType: \"filterRow\",\n        showAllText: that.option(\"filterRow.showAllText\"),\n        updateValueTimeout: \"onClick\" === that.option(\"filterRow.applyFilter\") ? 0 : FILTERING_TIMEOUT,\n        width: null,\n        setValue: function setValue(value, notFireEvent) {\n          updateFilterValue(that, {\n            column: column,\n            value: value,\n            container: $editorContainer,\n            notFireEvent: notFireEvent\n          });\n        }\n      });\n\n      if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\n        if ($editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))) {\n          result.placeholder = that.option(\"filterRow.betweenStartText\");\n        } else {\n          result.placeholder = that.option(\"filterRow.betweenEndText\");\n        }\n      }\n\n      return result;\n    },\n    _getFilterInputAccessibilityAttributes: function _getFilterInputAccessibilityAttributes(column) {\n      var columnAriaLabel = _message2.default.format(\"dxDataGrid-ariaFilterCell\");\n\n      if (this.component.option(\"showColumnHeaders\")) {\n        return {\n          \"aria-label\": columnAriaLabel,\n          \"aria-describedby\": column.headerId\n        };\n      }\n\n      return {\n        \"aria-label\": columnAriaLabel\n      };\n    },\n    _renderEditor: function _renderEditor($editorContainer, options) {\n      $editorContainer.empty();\n      return this.getController(\"editorFactory\").createEditor((0, _renderer2.default)(\"<div>\").appendTo($editorContainer), options);\n    },\n    _renderFilterRangeContent: function _renderFilterRangeContent($cell, column) {\n      var that = this;\n      var $editorContainer = $cell.find(\".\" + EDITOR_CONTAINER_CLASS).first();\n      $editorContainer.empty();\n      var $filterRangeContent = (0, _renderer2.default)(\"<div>\").addClass(FILTER_RANGE_CONTENT_CLASS).attr(\"tabindex\", this.option(\"tabIndex\"));\n\n      _events_engine2.default.on($filterRangeContent, \"focusin\", function () {\n        that._showFilterRange($cell, column);\n      });\n\n      $filterRangeContent.appendTo($editorContainer);\n\n      that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column));\n    },\n    _updateFilterRangeContent: function _updateFilterRangeContent($cell, value) {\n      var $filterRangeContent = $cell.find(\".\" + FILTER_RANGE_CONTENT_CLASS);\n\n      if ($filterRangeContent.length) {\n        if (\"\" === value) {\n          $filterRangeContent.html(\"&nbsp;\");\n        } else {\n          $filterRangeContent.text(value);\n        }\n      }\n    },\n    _updateFilterOperationChooser: function _updateFilterOperationChooser($menu, column, $editorContainer) {\n      var that = this;\n      var isCellWasFocused;\n\n      var restoreFocus = function restoreFocus() {\n        var menu = _menu2.default.getInstance($menu);\n\n        menu && menu.option(\"focusedElement\", null);\n        isCellWasFocused && that._focusEditor($editorContainer);\n      };\n\n      that._createComponent($menu, _menu2.default, {\n        integrationOptions: {},\n        activeStateEnabled: false,\n        selectionMode: \"single\",\n        cssClass: that.getWidgetContainerClass() + \" \" + CELL_FOCUS_DISABLED_CLASS + \" \" + FILTER_MENU,\n        showFirstSubmenuMode: \"onHover\",\n        hideSubmenuOnMouseLeave: true,\n        items: [{\n          disabled: column.filterOperations && column.filterOperations.length ? false : true,\n          icon: OPERATION_ICONS[getColumnSelectedFilterOperation(that, column) || \"default\"],\n          selectable: false,\n          items: that._getFilterOperationMenuItems(column)\n        }],\n        onItemClick: function onItemClick(properties) {\n          var selectedFilterOperation = properties.itemData.name;\n          var columnSelectedFilterOperation = getColumnSelectedFilterOperation(that, column);\n          var notFocusEditor = false;\n          var isOnClickMode = isOnClickApplyFilterMode(that);\n          var options = {};\n\n          if (properties.itemData.items || selectedFilterOperation && selectedFilterOperation === columnSelectedFilterOperation) {\n            return;\n          }\n\n          if (selectedFilterOperation) {\n            options[isOnClickMode ? \"bufferedSelectedFilterOperation\" : \"selectedFilterOperation\"] = selectedFilterOperation;\n\n            if (\"between\" === selectedFilterOperation || \"between\" === columnSelectedFilterOperation) {\n              notFocusEditor = \"between\" === selectedFilterOperation;\n              options[isOnClickMode ? \"bufferedFilterValue\" : \"filterValue\"] = null;\n            }\n          } else {\n            options[isOnClickMode ? \"bufferedFilterValue\" : \"filterValue\"] = null;\n            options[isOnClickMode ? \"bufferedSelectedFilterOperation\" : \"selectedFilterOperation\"] = column.defaultSelectedFilterOperation || null;\n          }\n\n          that._columnsController.columnOption(column.index, options);\n\n          that._applyFilterViewController.setHighLight($editorContainer, true);\n\n          if (!selectedFilterOperation) {\n            var editor = getEditorInstance($editorContainer);\n\n            if (editor && \"dxDateBox\" === editor.NAME && !editor.option(\"isValid\")) {\n              editor.reset();\n              editor.option(\"isValid\", true);\n            }\n          }\n\n          if (!notFocusEditor) {\n            that._focusEditor($editorContainer);\n          } else {\n            that._showFilterRange($editorContainer.closest(\".\" + EDITOR_CELL_CLASS), column);\n          }\n        },\n        onSubmenuShown: function onSubmenuShown() {\n          isCellWasFocused = that._isEditorFocused($editorContainer);\n          that.getController(\"editorFactory\").loseFocus();\n        },\n        onSubmenuHiding: function onSubmenuHiding() {\n          _events_engine2.default.trigger($menu, \"blur\");\n\n          restoreFocus();\n        },\n        onContentReady: function onContentReady(e) {\n          _events_engine2.default.on($menu, \"blur\", function () {\n            var menu = e.component;\n\n            menu._hideSubmenu(menu._visibleSubmenu);\n\n            restoreFocus();\n          });\n        },\n        rtlEnabled: that.option(\"rtlEnabled\")\n      });\n    },\n    _isEditorFocused: function _isEditorFocused($container) {\n      return $container.hasClass(FOCUSED_CLASS) || $container.parents(\".\" + FOCUSED_CLASS).length;\n    },\n    _focusEditor: function _focusEditor($container) {\n      this.getController(\"editorFactory\").focus($container);\n\n      _events_engine2.default.trigger($container.find(EDITORS_INPUT_SELECTOR), \"focus\");\n    },\n    _renderFilterOperationChooser: function _renderFilterOperationChooser($container, column, $editorContainer) {\n      var that = this;\n      var $menu;\n\n      if (that.option(\"filterRow.showOperationChooser\")) {\n        $container.addClass(EDITOR_WITH_MENU_CLASS);\n        $menu = (0, _renderer2.default)(\"<div>\").prependTo($container);\n\n        that._updateFilterOperationChooser($menu, column, $editorContainer);\n      }\n    },\n    _getFilterOperationMenuItems: function _getFilterOperationMenuItems(column) {\n      var that = this;\n      var result = [{}];\n      var filterRowOptions = that.option(\"filterRow\");\n      var operationDescriptions = filterRowOptions && filterRowOptions.operationDescriptions || {};\n\n      if (column.filterOperations && column.filterOperations.length) {\n        var availableFilterOperations = column.filterOperations.filter(function (value) {\n          return (0, _type.isDefined)(OPERATION_DESCRIPTORS[value]);\n        });\n        result = _iterator2.default.map(availableFilterOperations, function (value) {\n          var descriptionName = OPERATION_DESCRIPTORS[value];\n          return {\n            name: value,\n            selected: (getColumnSelectedFilterOperation(that, column) || column.defaultFilterOperation) === value,\n            text: operationDescriptions[descriptionName],\n            icon: OPERATION_ICONS[value]\n          };\n        });\n        result.push({\n          name: null,\n          text: filterRowOptions && filterRowOptions.resetOperationText,\n          icon: OPERATION_ICONS.default\n        });\n      }\n\n      return result;\n    },\n    optionChanged: function optionChanged(args) {\n      var that = this;\n\n      switch (args.name) {\n        case \"filterRow\":\n        case \"showColumnLines\":\n          this._invalidate(true, true);\n\n          args.handled = true;\n          break;\n\n        default:\n          that.callBase(args);\n      }\n    }\n  };\n}();\n\nvar DataControllerFilterRowExtender = {\n  skipCalculateColumnFilters: function skipCalculateColumnFilters() {\n    return false;\n  },\n  _calculateAdditionalFilter: function _calculateAdditionalFilter() {\n    if (this.skipCalculateColumnFilters()) {\n      return this.callBase();\n    }\n\n    var filters = [this.callBase()];\n\n    var columns = this._columnsController.getVisibleColumns(null, true);\n\n    _iterator2.default.each(columns, function () {\n      var filter;\n\n      if (this.allowFiltering && this.calculateFilterExpression && (0, _type.isDefined)(this.filterValue)) {\n        filter = this.createFilterExpression(this.filterValue, this.selectedFilterOperation || this.defaultFilterOperation, \"filterRow\");\n        filters.push(filter);\n      }\n    });\n\n    return _uiGrid_core4.default.combineFilters(filters);\n  }\n};\nexports.ApplyFilterViewController = _uiGrid_core2.default.ViewController.inherit({\n  _getHeaderPanel: function _getHeaderPanel() {\n    if (!this._headerPanel) {\n      this._headerPanel = this.getView(\"headerPanel\");\n    }\n\n    return this._headerPanel;\n  },\n  setHighLight: function setHighLight($element, value) {\n    if (isOnClickApplyFilterMode(this)) {\n      $element && $element.toggleClass(HIGHLIGHT_OUTLINE_CLASS, value) && $element.closest(\".\" + EDITOR_CELL_CLASS).toggleClass(FILTER_MODIFIED_CLASS, value);\n\n      this._getHeaderPanel().enableApplyButton(value);\n    }\n  },\n  applyFilter: function applyFilter() {\n    var columnsController = this.getController(\"columns\");\n    var columns = columnsController.getColumns();\n    columnsController.beginUpdate();\n\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[i];\n\n      if (void 0 !== column.bufferedFilterValue) {\n        columnsController.columnOption(i, \"filterValue\", column.bufferedFilterValue);\n        column.bufferedFilterValue = void 0;\n      }\n\n      if (void 0 !== column.bufferedSelectedFilterOperation) {\n        columnsController.columnOption(i, \"selectedFilterOperation\", column.bufferedSelectedFilterOperation);\n        column.bufferedSelectedFilterOperation = void 0;\n      }\n    }\n\n    columnsController.endUpdate();\n    this.removeHighLights();\n  },\n  removeHighLights: function removeHighLights() {\n    if (isOnClickApplyFilterMode(this)) {\n      var columnHeadersViewElement = this.getView(\"columnHeadersView\").element();\n      columnHeadersViewElement.find(\".\" + this.addWidgetPrefix(FILTER_ROW_CLASS) + \" .\" + HIGHLIGHT_OUTLINE_CLASS).removeClass(HIGHLIGHT_OUTLINE_CLASS);\n      columnHeadersViewElement.find(\".\" + this.addWidgetPrefix(FILTER_ROW_CLASS) + \" .\" + FILTER_MODIFIED_CLASS).removeClass(FILTER_MODIFIED_CLASS);\n\n      this._getHeaderPanel().enableApplyButton(false);\n    }\n  }\n});\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      filterRow: {\n        visible: false,\n        showOperationChooser: true,\n        showAllText: _message2.default.format(\"dxDataGrid-filterRowShowAllText\"),\n        resetOperationText: _message2.default.format(\"dxDataGrid-filterRowResetOperationText\"),\n        applyFilter: \"auto\",\n        applyFilterText: _message2.default.format(\"dxDataGrid-applyFilterText\"),\n        operationDescriptions: {\n          equal: _message2.default.format(\"dxDataGrid-filterRowOperationEquals\"),\n          notEqual: _message2.default.format(\"dxDataGrid-filterRowOperationNotEquals\"),\n          lessThan: _message2.default.format(\"dxDataGrid-filterRowOperationLess\"),\n          lessThanOrEqual: _message2.default.format(\"dxDataGrid-filterRowOperationLessOrEquals\"),\n          greaterThan: _message2.default.format(\"dxDataGrid-filterRowOperationGreater\"),\n          greaterThanOrEqual: _message2.default.format(\"dxDataGrid-filterRowOperationGreaterOrEquals\"),\n          startsWith: _message2.default.format(\"dxDataGrid-filterRowOperationStartsWith\"),\n          contains: _message2.default.format(\"dxDataGrid-filterRowOperationContains\"),\n          notContains: _message2.default.format(\"dxDataGrid-filterRowOperationNotContains\"),\n          endsWith: _message2.default.format(\"dxDataGrid-filterRowOperationEndsWith\"),\n          between: _message2.default.format(\"dxDataGrid-filterRowOperationBetween\"),\n          isBlank: _message2.default.format(\"dxFilterBuilder-filterOperationIsBlank\"),\n          isNotBlank: _message2.default.format(\"dxFilterBuilder-filterOperationIsNotBlank\")\n        },\n        betweenStartText: _message2.default.format(\"dxDataGrid-filterRowOperationBetweenStartText\"),\n        betweenEndText: _message2.default.format(\"dxDataGrid-filterRowOperationBetweenEndText\")\n      }\n    };\n  },\n  controllers: {\n    applyFilter: exports.ApplyFilterViewController\n  },\n  extenders: {\n    controllers: {\n      data: DataControllerFilterRowExtender,\n      columnsResizer: {\n        _startResizing: function _startResizing() {\n          var that = this;\n          var cellIndex;\n          var overlayInstance;\n          that.callBase.apply(that, arguments);\n\n          if (that.isResizing()) {\n            overlayInstance = that._columnHeadersView.getFilterRangeOverlayInstance();\n\n            if (overlayInstance) {\n              cellIndex = overlayInstance.$element().closest(\"td\").index();\n\n              if (cellIndex === that._targetPoint.columnIndex || cellIndex === that._targetPoint.columnIndex + 1) {\n                overlayInstance.$content().hide();\n              }\n            }\n          }\n        },\n        _endResizing: function _endResizing() {\n          var that = this;\n          var $cell;\n          var overlayInstance;\n\n          if (that.isResizing()) {\n            overlayInstance = that._columnHeadersView.getFilterRangeOverlayInstance();\n\n            if (overlayInstance) {\n              $cell = overlayInstance.$element().closest(\"td\");\n\n              that._columnHeadersView._updateFilterRangeOverlay({\n                width: $cell.outerWidth(true) + CORRECT_FILTER_RANGE_OVERLAY_WIDTH\n              });\n\n              overlayInstance.$content().show();\n            }\n          }\n\n          that.callBase.apply(that, arguments);\n        }\n      }\n    },\n    views: {\n      columnHeadersView: ColumnHeadersViewFilterRowExtender,\n      headerPanel: {\n        _getToolbarItems: function _getToolbarItems() {\n          var items = this.callBase();\n\n          var filterItem = this._prepareFilterItem(items);\n\n          return filterItem.concat(items);\n        },\n        _prepareFilterItem: function _prepareFilterItem() {\n          var that = this;\n          var filterItem = [];\n\n          if (that._isShowApplyFilterButton()) {\n            var hintText = that.option(\"filterRow.applyFilterText\");\n\n            var columns = that._columnsController.getColumns();\n\n            var disabled = !columns.filter(function (column) {\n              return void 0 !== column.bufferedFilterValue;\n            }).length;\n\n            var onInitialized = function onInitialized(e) {\n              (0, _renderer2.default)(e.element).addClass(that._getToolbarButtonClass(APPLY_BUTTON_CLASS));\n            };\n\n            var onClickHandler = function onClickHandler() {\n              that._applyFilterViewController.applyFilter();\n            };\n\n            var toolbarItem = {\n              widget: \"dxButton\",\n              options: {\n                icon: \"apply-filter\",\n                disabled: disabled,\n                onClick: onClickHandler,\n                hint: hintText,\n                text: hintText,\n                onInitialized: onInitialized\n              },\n              showText: \"inMenu\",\n              name: \"applyFilterButton\",\n              location: \"after\",\n              locateInMenu: \"auto\",\n              sortIndex: 10\n            };\n            filterItem.push(toolbarItem);\n          }\n\n          return filterItem;\n        },\n        _isShowApplyFilterButton: function _isShowApplyFilterButton() {\n          var filterRowOptions = this.option(\"filterRow\");\n          return filterRowOptions && filterRowOptions.visible && \"onClick\" === filterRowOptions.applyFilter;\n        },\n        init: function init() {\n          this.callBase();\n          this._dataController = this.getController(\"data\");\n          this._applyFilterViewController = this.getController(\"applyFilter\");\n        },\n        enableApplyButton: function enableApplyButton(value) {\n          this.setToolbarItemDisabled(\"applyFilterButton\", !value);\n        },\n        isVisible: function isVisible() {\n          return this.callBase() || this._isShowApplyFilterButton();\n        },\n        optionChanged: function optionChanged(args) {\n          if (\"filterRow\" === args.name) {\n            this._invalidate();\n\n            args.handled = true;\n          } else {\n            this.callBase(args);\n          }\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.filter_row.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_type","_extend","_utils","_iterator","_iterator2","_uiGrid_core","_uiGrid_core2","_uiGrid_core3","_uiGrid_core4","_message","_message2","_editor","_editor2","_overlay","_overlay2","_menu","_menu2","_accessibility","obj","OPERATION_ICONS","notcontains","contains","startswith","endswith","between","OPERATION_DESCRIPTORS","FILTERING_TIMEOUT","CORRECT_FILTER_RANGE_OVERLAY_WIDTH","FILTER_ROW_CLASS","FILTER_RANGE_OVERLAY_CLASS","FILTER_RANGE_START_CLASS","FILTER_RANGE_END_CLASS","MENU_CLASS","EDITOR_WITH_MENU_CLASS","EDITOR_CONTAINER_CLASS","EDITOR_CELL_CLASS","FILTER_MENU","APPLY_BUTTON_CLASS","HIGHLIGHT_OUTLINE_CLASS","FOCUSED_CLASS","CELL_FOCUS_DISABLED_CLASS","FILTER_RANGE_CONTENT_CLASS","FILTER_MODIFIED_CLASS","EDITORS_INPUT_SELECTOR","BETWEEN_OPERATION_DATA_TYPES","that","ColumnHeadersViewFilterRowExtender","getEditorInstance","$editor","$editorContainer","componentNames","editor","getRangeTextByFilterValue","result","rangeEnd","filterValue","getColumnFilterValue","formatOptions","Array","isOnClickApplyFilterMode","column","getColumnSelectedFilterOperation","isValidFilterValue","getFilterValue","isFilterRange","isRangeStart","normalizeFilterValue","columnFilterValue","updateFilterValue","value","options","_updateEditorValue","_columnOptionChanged","optionNames","e","visibleIndex","$cell","overlayInstance","$editorRangeElements","$menu","_renderCore","_resizeCore","isFilterRowVisible","isVisible","init","_initFilterRangeOverlay","sharedData","$overlay","height","shading","showTitle","focusStateEnabled","closeOnTargetScroll","closeOnOutsideClick","animation","position","my","at","of","offset","contentTemplate","editorOptions","$prevElement","onShown","onHidden","_updateFilterRangeOverlay","_showFilterRange","width","_hideFilterRange","getFilterRangeOverlayInstance","_createRow","_this","$row","row","_getRows","rowType","_renderFilterCell","$container","_renderCellContent","_getEditorOptions","accessibilityOptions","inputAttr","parentType","showAllText","updateValueTimeout","setValue","container","notFireEvent","_getFilterInputAccessibilityAttributes","columnAriaLabel","headerId","_renderEditor","_renderFilterRangeContent","$filterRangeContent","_updateFilterRangeContent","_updateFilterOperationChooser","restoreFocus","menu","isCellWasFocused","integrationOptions","activeStateEnabled","selectionMode","cssClass","showFirstSubmenuMode","hideSubmenuOnMouseLeave","items","disabled","icon","selectable","onItemClick","selectedFilterOperation","properties","columnSelectedFilterOperation","notFocusEditor","isOnClickMode","onSubmenuShown","onSubmenuHiding","onContentReady","rtlEnabled","_isEditorFocused","_focusEditor","_renderFilterOperationChooser","_getFilterOperationMenuItems","filterRowOptions","operationDescriptions","availableFilterOperations","descriptionName","name","selected","text","default","optionChanged","args","DataControllerFilterRowExtender","skipCalculateColumnFilters","_calculateAdditionalFilter","filters","columns","filter","exports","_getHeaderPanel","setHighLight","$element","applyFilter","columnsController","i","removeHighLights","columnHeadersViewElement","module","defaultOptions","filterRow","visible","showOperationChooser","resetOperationText","applyFilterText","equal","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","startsWith","notContains","endsWith","isBlank","isNotBlank","betweenStartText","betweenEndText","controllers","ApplyFilterViewController","extenders","data","columnsResizer","_startResizing","cellIndex","_endResizing","views","columnHeadersView","headerPanel","_getToolbarItems","filterItem","_prepareFilterItem","hintText","onInitialized","onClickHandler","toolbarItem","widget","onClick","hint","showText","location","locateInMenu","sortIndex","_isShowApplyFilterButton","enableApplyButton"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.filter_row.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _utils = require(\"../../events/utils\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _iterator2 = _interopRequireDefault(_iterator);\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\r\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _editor = require(\"../editor/editor\");\r\nvar _editor2 = _interopRequireDefault(_editor);\r\nvar _overlay = require(\"../overlay\");\r\nvar _overlay2 = _interopRequireDefault(_overlay);\r\nvar _menu = require(\"../menu\");\r\nvar _menu2 = _interopRequireDefault(_menu);\r\nvar _accessibility = require(\"../shared/accessibility\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar OPERATION_ICONS = {\r\n    \"=\": \"filter-operation-equals\",\r\n    \"<>\": \"filter-operation-not-equals\",\r\n    \"<\": \"filter-operation-less\",\r\n    \"<=\": \"filter-operation-less-equal\",\r\n    \">\": \"filter-operation-greater\",\r\n    \">=\": \"filter-operation-greater-equal\",\r\n    \"default\": \"filter-operation-default\",\r\n    notcontains: \"filter-operation-not-contains\",\r\n    contains: \"filter-operation-contains\",\r\n    startswith: \"filter-operation-starts-with\",\r\n    endswith: \"filter-operation-ends-with\",\r\n    between: \"filter-operation-between\"\r\n};\r\nvar OPERATION_DESCRIPTORS = {\r\n    \"=\": \"equal\",\r\n    \"<>\": \"notEqual\",\r\n    \"<\": \"lessThan\",\r\n    \"<=\": \"lessThanOrEqual\",\r\n    \">\": \"greaterThan\",\r\n    \">=\": \"greaterThanOrEqual\",\r\n    startswith: \"startsWith\",\r\n    contains: \"contains\",\r\n    notcontains: \"notContains\",\r\n    endswith: \"endsWith\",\r\n    between: \"between\"\r\n};\r\nvar FILTERING_TIMEOUT = 700;\r\nvar CORRECT_FILTER_RANGE_OVERLAY_WIDTH = 1;\r\nvar FILTER_ROW_CLASS = \"filter-row\";\r\nvar FILTER_RANGE_OVERLAY_CLASS = \"filter-range-overlay\";\r\nvar FILTER_RANGE_START_CLASS = \"filter-range-start\";\r\nvar FILTER_RANGE_END_CLASS = \"filter-range-end\";\r\nvar MENU_CLASS = \"dx-menu\";\r\nvar EDITOR_WITH_MENU_CLASS = \"dx-editor-with-menu\";\r\nvar EDITOR_CONTAINER_CLASS = \"dx-editor-container\";\r\nvar EDITOR_CELL_CLASS = \"dx-editor-cell\";\r\nvar FILTER_MENU = \"dx-filter-menu\";\r\nvar APPLY_BUTTON_CLASS = \"dx-apply-button\";\r\nvar HIGHLIGHT_OUTLINE_CLASS = \"dx-highlight-outline\";\r\nvar FOCUSED_CLASS = \"dx-focused\";\r\nvar CELL_FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\r\nvar FILTER_RANGE_CONTENT_CLASS = \"dx-filter-range-content\";\r\nvar FILTER_MODIFIED_CLASS = \"dx-filter-modified\";\r\nvar EDITORS_INPUT_SELECTOR = \"input:not([type='hidden'])\";\r\nvar BETWEEN_OPERATION_DATA_TYPES = [\"date\", \"datetime\", \"number\"];\r\n\r\nfunction isOnClickApplyFilterMode(that) {\r\n    return \"onClick\" === that.option(\"filterRow.applyFilter\")\r\n}\r\nvar ColumnHeadersViewFilterRowExtender = function() {\r\n    var getEditorInstance = function($editorContainer) {\r\n        var $editor = $editorContainer && $editorContainer.children();\r\n        var componentNames = $editor && $editor.data(\"dxComponents\");\r\n        var editor = componentNames && componentNames.length && $editor.data(componentNames[0]);\r\n        if (editor instanceof _editor2.default) {\r\n            return editor\r\n        }\r\n    };\r\n    var getRangeTextByFilterValue = function(that, column) {\r\n        var result = \"\";\r\n        var rangeEnd = \"\";\r\n        var filterValue = getColumnFilterValue(that, column);\r\n        var formatOptions = _uiGrid_core4.default.getFormatOptionsByColumn(column, \"filterRow\");\r\n        if (Array.isArray(filterValue)) {\r\n            result = _uiGrid_core4.default.formatValue(filterValue[0], formatOptions);\r\n            rangeEnd = _uiGrid_core4.default.formatValue(filterValue[1], formatOptions);\r\n            if (\"\" !== rangeEnd) {\r\n                result += \" - \" + rangeEnd\r\n            }\r\n        } else {\r\n            if ((0, _type.isDefined)(filterValue)) {\r\n                result = _uiGrid_core4.default.formatValue(filterValue, formatOptions)\r\n            }\r\n        }\r\n        return result\r\n    };\r\n    var getColumnFilterValue = function(that, column) {\r\n        if (column) {\r\n            return isOnClickApplyFilterMode(that) && void 0 !== column.bufferedFilterValue ? column.bufferedFilterValue : column.filterValue\r\n        }\r\n    };\r\n    var getColumnSelectedFilterOperation = function(that, column) {\r\n        if (column) {\r\n            return isOnClickApplyFilterMode(that) && void 0 !== column.bufferedSelectedFilterOperation ? column.bufferedSelectedFilterOperation : column.selectedFilterOperation\r\n        }\r\n    };\r\n    var isValidFilterValue = function(filterValue, column) {\r\n        if (column && BETWEEN_OPERATION_DATA_TYPES.indexOf(column.dataType) >= 0 && Array.isArray(filterValue)) {\r\n            return false\r\n        }\r\n        return void 0 !== filterValue\r\n    };\r\n    var getFilterValue = function(that, columnIndex, $editorContainer) {\r\n        var column = that._columnsController.columnOption(columnIndex);\r\n        var filterValue = getColumnFilterValue(that, column);\r\n        var isFilterRange = $editorContainer.closest(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).length;\r\n        var isRangeStart = $editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS));\r\n        if (filterValue && Array.isArray(filterValue) && \"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n            if (isRangeStart) {\r\n                return filterValue[0]\r\n            } else {\r\n                return filterValue[1]\r\n            }\r\n        }\r\n        return !isFilterRange && isValidFilterValue(filterValue, column) ? filterValue : null\r\n    };\r\n    var normalizeFilterValue = function(that, filterValue, column, $editorContainer) {\r\n        if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n            var columnFilterValue = getColumnFilterValue(that, column);\r\n            if ($editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))) {\r\n                return [filterValue, Array.isArray(columnFilterValue) ? columnFilterValue[1] : void 0]\r\n            } else {\r\n                return [Array.isArray(columnFilterValue) ? columnFilterValue[0] : columnFilterValue, filterValue]\r\n            }\r\n        }\r\n        return filterValue\r\n    };\r\n    var updateFilterValue = function(that, options) {\r\n        var value = \"\" === options.value ? null : options.value;\r\n        var $editorContainer = options.container;\r\n        var column = that._columnsController.columnOption(options.column.index);\r\n        var filterValue = getFilterValue(that, column.index, $editorContainer);\r\n        if (!(0, _type.isDefined)(filterValue) && !(0, _type.isDefined)(value)) {\r\n            return\r\n        }\r\n        that._applyFilterViewController.setHighLight($editorContainer, filterValue !== value);\r\n        that._columnsController.columnOption(column.index, isOnClickApplyFilterMode(that) ? \"bufferedFilterValue\" : \"filterValue\", normalizeFilterValue(that, value, column, $editorContainer), options.notFireEvent)\r\n    };\r\n    return {\r\n        _updateEditorValue: function(column, $editorContainer) {\r\n            var that = this;\r\n            var editor = getEditorInstance($editorContainer);\r\n            editor && editor.option(\"value\", getFilterValue(that, column.index, $editorContainer))\r\n        },\r\n        _columnOptionChanged: function(e) {\r\n            var that = this;\r\n            var optionNames = e.optionNames;\r\n            var overlayInstance;\r\n            var visibleIndex;\r\n            var column;\r\n            var $cell;\r\n            var $editorContainer;\r\n            var $editorRangeElements;\r\n            var $menu;\r\n            if (_uiGrid_core4.default.checkChanges(optionNames, [\"filterValue\", \"bufferedFilterValue\", \"selectedFilterOperation\", \"bufferedSelectedFilterOperation\"]) && void 0 !== e.columnIndex) {\r\n                visibleIndex = that._columnsController.getVisibleIndex(e.columnIndex);\r\n                column = that._columnsController.columnOption(e.columnIndex);\r\n                $cell = that._getCellElement(that.element().find(\".\" + that.addWidgetPrefix(FILTER_ROW_CLASS)).index(), visibleIndex) || (0, _renderer2.default)();\r\n                $editorContainer = $cell.find(\".\" + EDITOR_CONTAINER_CLASS).first();\r\n                if (optionNames.filterValue || optionNames.bufferedFilterValue) {\r\n                    that._updateEditorValue(column, $editorContainer);\r\n                    overlayInstance = $cell.find(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).data(\"dxOverlay\");\r\n                    if (overlayInstance) {\r\n                        $editorRangeElements = overlayInstance.$content().find(\".\" + EDITOR_CONTAINER_CLASS);\r\n                        that._updateEditorValue(column, $editorRangeElements.first());\r\n                        that._updateEditorValue(column, $editorRangeElements.last())\r\n                    }\r\n                    if (!overlayInstance || !overlayInstance.option(\"visible\")) {\r\n                        that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column))\r\n                    }\r\n                }\r\n                if (optionNames.selectedFilterOperation || optionNames.bufferedSelectedFilterOperation) {\r\n                    if (visibleIndex >= 0 && column) {\r\n                        $menu = $cell.find(\".\" + MENU_CLASS);\r\n                        if ($menu.length) {\r\n                            that._updateFilterOperationChooser($menu, column, $editorContainer);\r\n                            if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n                                that._renderFilterRangeContent($cell, column)\r\n                            } else {\r\n                                if ($editorContainer.find(\".\" + FILTER_RANGE_CONTENT_CLASS).length) {\r\n                                    that._renderEditor($editorContainer, that._getEditorOptions($editorContainer, column));\r\n                                    that._hideFilterRange()\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return\r\n            }\r\n            that.callBase(e)\r\n        },\r\n        _renderCore: function() {\r\n            this._filterRangeOverlayInstance = null;\r\n            this.callBase.apply(this, arguments)\r\n        },\r\n        _resizeCore: function() {\r\n            this.callBase.apply(this, arguments);\r\n            this._filterRangeOverlayInstance && this._filterRangeOverlayInstance.repaint()\r\n        },\r\n        isFilterRowVisible: function() {\r\n            return this._isElementVisible(this.option(\"filterRow\"))\r\n        },\r\n        isVisible: function() {\r\n            return this.callBase() || this.isFilterRowVisible()\r\n        },\r\n        init: function() {\r\n            this.callBase();\r\n            this._applyFilterViewController = this.getController(\"applyFilter\")\r\n        },\r\n        _initFilterRangeOverlay: function($cell, column) {\r\n            var that = this;\r\n            var sharedData = {};\r\n            var $editorContainer = $cell.find(\".dx-editor-container\");\r\n            var $overlay = (0, _renderer2.default)(\"<div>\").addClass(that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).appendTo($cell);\r\n            return that._createComponent($overlay, _overlay2.default, {\r\n                height: \"auto\",\r\n                shading: false,\r\n                showTitle: false,\r\n                focusStateEnabled: false,\r\n                closeOnTargetScroll: false,\r\n                closeOnOutsideClick: true,\r\n                animation: false,\r\n                position: {\r\n                    my: \"top\",\r\n                    at: \"top\",\r\n                    of: $editorContainer.length && $editorContainer || $cell,\r\n                    offset: \"0 -1\"\r\n                },\r\n                contentTemplate: function(contentElement) {\r\n                    var editorOptions;\r\n                    var $editor = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS + \" \" + that.addWidgetPrefix(FILTER_RANGE_START_CLASS)).appendTo(contentElement);\r\n                    column = that._columnsController.columnOption(column.index);\r\n                    editorOptions = that._getEditorOptions($editor, column);\r\n                    editorOptions.sharedData = sharedData;\r\n                    that._renderEditor($editor, editorOptions);\r\n                    _events_engine2.default.on($editor.find(EDITORS_INPUT_SELECTOR), \"keydown\", function(e) {\r\n                        var $prevElement = $cell.find(\"[tabindex]\").not(e.target).first();\r\n                        if (\"tab\" === (0, _utils.normalizeKeyName)(e) && e.shiftKey) {\r\n                            e.preventDefault();\r\n                            that._hideFilterRange();\r\n                            if (!$prevElement.length) {\r\n                                $prevElement = $cell.prev().find(\"[tabindex]\").last()\r\n                            }\r\n                            _events_engine2.default.trigger($prevElement, \"focus\")\r\n                        }\r\n                    });\r\n                    $editor = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS + \" \" + that.addWidgetPrefix(FILTER_RANGE_END_CLASS)).appendTo(contentElement);\r\n                    editorOptions = that._getEditorOptions($editor, column);\r\n                    editorOptions.sharedData = sharedData;\r\n                    that._renderEditor($editor, editorOptions);\r\n                    _events_engine2.default.on($editor.find(EDITORS_INPUT_SELECTOR), \"keydown\", function(e) {\r\n                        if (\"tab\" === (0, _utils.normalizeKeyName)(e) && !e.shiftKey) {\r\n                            e.preventDefault();\r\n                            that._hideFilterRange();\r\n                            _events_engine2.default.trigger($cell.next().find(\"[tabindex]\").first(), \"focus\")\r\n                        }\r\n                    });\r\n                    return (0, _renderer2.default)(contentElement).addClass(that.getWidgetContainerClass())\r\n                },\r\n                onShown: function(e) {\r\n                    var $editor = e.component.$content().find(\".\" + EDITOR_CONTAINER_CLASS).first();\r\n                    _events_engine2.default.trigger($editor.find(EDITORS_INPUT_SELECTOR), \"focus\")\r\n                },\r\n                onHidden: function() {\r\n                    column = that._columnsController.columnOption(column.index);\r\n                    $cell.find(\".\" + MENU_CLASS).parent().addClass(EDITOR_WITH_MENU_CLASS);\r\n                    if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n                        that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column));\r\n                        that.component.updateDimensions()\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        _updateFilterRangeOverlay: function(options) {\r\n            var overlayInstance = this._filterRangeOverlayInstance;\r\n            overlayInstance && overlayInstance.option(options)\r\n        },\r\n        _showFilterRange: function($cell, column) {\r\n            var that = this;\r\n            var $overlay = $cell.children(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS));\r\n            var overlayInstance = $overlay.length && $overlay.data(\"dxOverlay\");\r\n            if (!overlayInstance && column) {\r\n                overlayInstance = that._initFilterRangeOverlay($cell, column)\r\n            }\r\n            if (!overlayInstance.option(\"visible\")) {\r\n                that._filterRangeOverlayInstance && that._filterRangeOverlayInstance.hide();\r\n                that._filterRangeOverlayInstance = overlayInstance;\r\n                that._updateFilterRangeOverlay({\r\n                    width: $cell.outerWidth(true) + CORRECT_FILTER_RANGE_OVERLAY_WIDTH\r\n                });\r\n                that._filterRangeOverlayInstance && that._filterRangeOverlayInstance.show()\r\n            }\r\n        },\r\n        _hideFilterRange: function() {\r\n            var overlayInstance = this._filterRangeOverlayInstance;\r\n            overlayInstance && overlayInstance.hide()\r\n        },\r\n        getFilterRangeOverlayInstance: function() {\r\n            return this._filterRangeOverlayInstance\r\n        },\r\n        _createRow: function(row) {\r\n            var _this = this;\r\n            var $row = this.callBase(row);\r\n            if (\"filter\" === row.rowType) {\r\n                $row.addClass(this.addWidgetPrefix(FILTER_ROW_CLASS));\r\n                if (!this.option(\"useLegacyKeyboardNavigation\")) {\r\n                    _events_engine2.default.on($row, \"keydown\", function(event) {\r\n                        return (0, _accessibility.selectView)(\"filterRow\", _this, event)\r\n                    })\r\n                }\r\n            }\r\n            return $row\r\n        },\r\n        _getRows: function() {\r\n            var result = this.callBase();\r\n            if (this.isFilterRowVisible()) {\r\n                result.push({\r\n                    rowType: \"filter\"\r\n                })\r\n            }\r\n            return result\r\n        },\r\n        _renderFilterCell: function(cell, options) {\r\n            var that = this;\r\n            var column = options.column;\r\n            var $cell = (0, _renderer2.default)(cell);\r\n            var $container;\r\n            var $editorContainer;\r\n            if (that.component.option(\"showColumnHeaders\")) {\r\n                that.setAria(\"describedby\", column.headerId, $cell)\r\n            }\r\n            that.setAria(\"label\", _message2.default.format(\"dxDataGrid-ariaFilterCell\"), $cell);\r\n            $cell.addClass(EDITOR_CELL_CLASS);\r\n            $container = (0, _renderer2.default)(\"<div>\").appendTo($cell);\r\n            $editorContainer = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS).appendTo($container);\r\n            if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n                that._renderFilterRangeContent($cell, column)\r\n            } else {\r\n                var editorOptions = that._getEditorOptions($editorContainer, column);\r\n                that._renderEditor($editorContainer, editorOptions)\r\n            }\r\n            if (column.alignment) {\r\n                $cell.find(EDITORS_INPUT_SELECTOR).first().css(\"textAlign\", column.alignment)\r\n            }\r\n            if (column.filterOperations && column.filterOperations.length) {\r\n                that._renderFilterOperationChooser($container, column, $editorContainer)\r\n            }\r\n        },\r\n        _renderCellContent: function($cell, options) {\r\n            var that = this;\r\n            var column = options.column;\r\n            if (\"filter\" === options.rowType) {\r\n                if (column.command) {\r\n                    $cell.html(\"&nbsp;\")\r\n                } else {\r\n                    if (column.allowFiltering) {\r\n                        that.renderTemplate($cell, that._renderFilterCell.bind(that), options);\r\n                        return\r\n                    }\r\n                }\r\n            }\r\n            that.callBase($cell, options)\r\n        },\r\n        _getEditorOptions: function($editorContainer, column) {\r\n            var that = this;\r\n            var accessibilityOptions = {\r\n                editorOptions: {\r\n                    inputAttr: that._getFilterInputAccessibilityAttributes(column)\r\n                }\r\n            };\r\n            var result = (0, _extend.extend)(accessibilityOptions, column, {\r\n                value: getFilterValue(that, column.index, $editorContainer),\r\n                parentType: \"filterRow\",\r\n                showAllText: that.option(\"filterRow.showAllText\"),\r\n                updateValueTimeout: \"onClick\" === that.option(\"filterRow.applyFilter\") ? 0 : FILTERING_TIMEOUT,\r\n                width: null,\r\n                setValue: function(value, notFireEvent) {\r\n                    updateFilterValue(that, {\r\n                        column: column,\r\n                        value: value,\r\n                        container: $editorContainer,\r\n                        notFireEvent: notFireEvent\r\n                    })\r\n                }\r\n            });\r\n            if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n                if ($editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))) {\r\n                    result.placeholder = that.option(\"filterRow.betweenStartText\")\r\n                } else {\r\n                    result.placeholder = that.option(\"filterRow.betweenEndText\")\r\n                }\r\n            }\r\n            return result\r\n        },\r\n        _getFilterInputAccessibilityAttributes: function(column) {\r\n            var columnAriaLabel = _message2.default.format(\"dxDataGrid-ariaFilterCell\");\r\n            if (this.component.option(\"showColumnHeaders\")) {\r\n                return {\r\n                    \"aria-label\": columnAriaLabel,\r\n                    \"aria-describedby\": column.headerId\r\n                }\r\n            }\r\n            return {\r\n                \"aria-label\": columnAriaLabel\r\n            }\r\n        },\r\n        _renderEditor: function($editorContainer, options) {\r\n            $editorContainer.empty();\r\n            return this.getController(\"editorFactory\").createEditor((0, _renderer2.default)(\"<div>\").appendTo($editorContainer), options)\r\n        },\r\n        _renderFilterRangeContent: function($cell, column) {\r\n            var that = this;\r\n            var $editorContainer = $cell.find(\".\" + EDITOR_CONTAINER_CLASS).first();\r\n            $editorContainer.empty();\r\n            var $filterRangeContent = (0, _renderer2.default)(\"<div>\").addClass(FILTER_RANGE_CONTENT_CLASS).attr(\"tabindex\", this.option(\"tabIndex\"));\r\n            _events_engine2.default.on($filterRangeContent, \"focusin\", function() {\r\n                that._showFilterRange($cell, column)\r\n            });\r\n            $filterRangeContent.appendTo($editorContainer);\r\n            that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column))\r\n        },\r\n        _updateFilterRangeContent: function($cell, value) {\r\n            var $filterRangeContent = $cell.find(\".\" + FILTER_RANGE_CONTENT_CLASS);\r\n            if ($filterRangeContent.length) {\r\n                if (\"\" === value) {\r\n                    $filterRangeContent.html(\"&nbsp;\")\r\n                } else {\r\n                    $filterRangeContent.text(value)\r\n                }\r\n            }\r\n        },\r\n        _updateFilterOperationChooser: function($menu, column, $editorContainer) {\r\n            var that = this;\r\n            var isCellWasFocused;\r\n            var restoreFocus = function() {\r\n                var menu = _menu2.default.getInstance($menu);\r\n                menu && menu.option(\"focusedElement\", null);\r\n                isCellWasFocused && that._focusEditor($editorContainer)\r\n            };\r\n            that._createComponent($menu, _menu2.default, {\r\n                integrationOptions: {},\r\n                activeStateEnabled: false,\r\n                selectionMode: \"single\",\r\n                cssClass: that.getWidgetContainerClass() + \" \" + CELL_FOCUS_DISABLED_CLASS + \" \" + FILTER_MENU,\r\n                showFirstSubmenuMode: \"onHover\",\r\n                hideSubmenuOnMouseLeave: true,\r\n                items: [{\r\n                    disabled: column.filterOperations && column.filterOperations.length ? false : true,\r\n                    icon: OPERATION_ICONS[getColumnSelectedFilterOperation(that, column) || \"default\"],\r\n                    selectable: false,\r\n                    items: that._getFilterOperationMenuItems(column)\r\n                }],\r\n                onItemClick: function(properties) {\r\n                    var selectedFilterOperation = properties.itemData.name;\r\n                    var columnSelectedFilterOperation = getColumnSelectedFilterOperation(that, column);\r\n                    var notFocusEditor = false;\r\n                    var isOnClickMode = isOnClickApplyFilterMode(that);\r\n                    var options = {};\r\n                    if (properties.itemData.items || selectedFilterOperation && selectedFilterOperation === columnSelectedFilterOperation) {\r\n                        return\r\n                    }\r\n                    if (selectedFilterOperation) {\r\n                        options[isOnClickMode ? \"bufferedSelectedFilterOperation\" : \"selectedFilterOperation\"] = selectedFilterOperation;\r\n                        if (\"between\" === selectedFilterOperation || \"between\" === columnSelectedFilterOperation) {\r\n                            notFocusEditor = \"between\" === selectedFilterOperation;\r\n                            options[isOnClickMode ? \"bufferedFilterValue\" : \"filterValue\"] = null\r\n                        }\r\n                    } else {\r\n                        options[isOnClickMode ? \"bufferedFilterValue\" : \"filterValue\"] = null;\r\n                        options[isOnClickMode ? \"bufferedSelectedFilterOperation\" : \"selectedFilterOperation\"] = column.defaultSelectedFilterOperation || null\r\n                    }\r\n                    that._columnsController.columnOption(column.index, options);\r\n                    that._applyFilterViewController.setHighLight($editorContainer, true);\r\n                    if (!selectedFilterOperation) {\r\n                        var editor = getEditorInstance($editorContainer);\r\n                        if (editor && \"dxDateBox\" === editor.NAME && !editor.option(\"isValid\")) {\r\n                            editor.reset();\r\n                            editor.option(\"isValid\", true)\r\n                        }\r\n                    }\r\n                    if (!notFocusEditor) {\r\n                        that._focusEditor($editorContainer)\r\n                    } else {\r\n                        that._showFilterRange($editorContainer.closest(\".\" + EDITOR_CELL_CLASS), column)\r\n                    }\r\n                },\r\n                onSubmenuShown: function() {\r\n                    isCellWasFocused = that._isEditorFocused($editorContainer);\r\n                    that.getController(\"editorFactory\").loseFocus()\r\n                },\r\n                onSubmenuHiding: function() {\r\n                    _events_engine2.default.trigger($menu, \"blur\");\r\n                    restoreFocus()\r\n                },\r\n                onContentReady: function(e) {\r\n                    _events_engine2.default.on($menu, \"blur\", function() {\r\n                        var menu = e.component;\r\n                        menu._hideSubmenu(menu._visibleSubmenu);\r\n                        restoreFocus()\r\n                    })\r\n                },\r\n                rtlEnabled: that.option(\"rtlEnabled\")\r\n            })\r\n        },\r\n        _isEditorFocused: function($container) {\r\n            return $container.hasClass(FOCUSED_CLASS) || $container.parents(\".\" + FOCUSED_CLASS).length\r\n        },\r\n        _focusEditor: function($container) {\r\n            this.getController(\"editorFactory\").focus($container);\r\n            _events_engine2.default.trigger($container.find(EDITORS_INPUT_SELECTOR), \"focus\")\r\n        },\r\n        _renderFilterOperationChooser: function($container, column, $editorContainer) {\r\n            var that = this;\r\n            var $menu;\r\n            if (that.option(\"filterRow.showOperationChooser\")) {\r\n                $container.addClass(EDITOR_WITH_MENU_CLASS);\r\n                $menu = (0, _renderer2.default)(\"<div>\").prependTo($container);\r\n                that._updateFilterOperationChooser($menu, column, $editorContainer)\r\n            }\r\n        },\r\n        _getFilterOperationMenuItems: function(column) {\r\n            var that = this;\r\n            var result = [{}];\r\n            var filterRowOptions = that.option(\"filterRow\");\r\n            var operationDescriptions = filterRowOptions && filterRowOptions.operationDescriptions || {};\r\n            if (column.filterOperations && column.filterOperations.length) {\r\n                var availableFilterOperations = column.filterOperations.filter(function(value) {\r\n                    return (0, _type.isDefined)(OPERATION_DESCRIPTORS[value])\r\n                });\r\n                result = _iterator2.default.map(availableFilterOperations, function(value) {\r\n                    var descriptionName = OPERATION_DESCRIPTORS[value];\r\n                    return {\r\n                        name: value,\r\n                        selected: (getColumnSelectedFilterOperation(that, column) || column.defaultFilterOperation) === value,\r\n                        text: operationDescriptions[descriptionName],\r\n                        icon: OPERATION_ICONS[value]\r\n                    }\r\n                });\r\n                result.push({\r\n                    name: null,\r\n                    text: filterRowOptions && filterRowOptions.resetOperationText,\r\n                    icon: OPERATION_ICONS.default\r\n                })\r\n            }\r\n            return result\r\n        },\r\n        optionChanged: function(args) {\r\n            var that = this;\r\n            switch (args.name) {\r\n                case \"filterRow\":\r\n                case \"showColumnLines\":\r\n                    this._invalidate(true, true);\r\n                    args.handled = true;\r\n                    break;\r\n                default:\r\n                    that.callBase(args)\r\n            }\r\n        }\r\n    }\r\n}();\r\nvar DataControllerFilterRowExtender = {\r\n    skipCalculateColumnFilters: function() {\r\n        return false\r\n    },\r\n    _calculateAdditionalFilter: function() {\r\n        if (this.skipCalculateColumnFilters()) {\r\n            return this.callBase()\r\n        }\r\n        var filters = [this.callBase()];\r\n        var columns = this._columnsController.getVisibleColumns(null, true);\r\n        _iterator2.default.each(columns, function() {\r\n            var filter;\r\n            if (this.allowFiltering && this.calculateFilterExpression && (0, _type.isDefined)(this.filterValue)) {\r\n                filter = this.createFilterExpression(this.filterValue, this.selectedFilterOperation || this.defaultFilterOperation, \"filterRow\");\r\n                filters.push(filter)\r\n            }\r\n        });\r\n        return _uiGrid_core4.default.combineFilters(filters)\r\n    }\r\n};\r\nexports.ApplyFilterViewController = _uiGrid_core2.default.ViewController.inherit({\r\n    _getHeaderPanel: function() {\r\n        if (!this._headerPanel) {\r\n            this._headerPanel = this.getView(\"headerPanel\")\r\n        }\r\n        return this._headerPanel\r\n    },\r\n    setHighLight: function($element, value) {\r\n        if (isOnClickApplyFilterMode(this)) {\r\n            $element && $element.toggleClass(HIGHLIGHT_OUTLINE_CLASS, value) && $element.closest(\".\" + EDITOR_CELL_CLASS).toggleClass(FILTER_MODIFIED_CLASS, value);\r\n            this._getHeaderPanel().enableApplyButton(value)\r\n        }\r\n    },\r\n    applyFilter: function() {\r\n        var columnsController = this.getController(\"columns\");\r\n        var columns = columnsController.getColumns();\r\n        columnsController.beginUpdate();\r\n        for (var i = 0; i < columns.length; i++) {\r\n            var column = columns[i];\r\n            if (void 0 !== column.bufferedFilterValue) {\r\n                columnsController.columnOption(i, \"filterValue\", column.bufferedFilterValue);\r\n                column.bufferedFilterValue = void 0\r\n            }\r\n            if (void 0 !== column.bufferedSelectedFilterOperation) {\r\n                columnsController.columnOption(i, \"selectedFilterOperation\", column.bufferedSelectedFilterOperation);\r\n                column.bufferedSelectedFilterOperation = void 0\r\n            }\r\n        }\r\n        columnsController.endUpdate();\r\n        this.removeHighLights()\r\n    },\r\n    removeHighLights: function() {\r\n        if (isOnClickApplyFilterMode(this)) {\r\n            var columnHeadersViewElement = this.getView(\"columnHeadersView\").element();\r\n            columnHeadersViewElement.find(\".\" + this.addWidgetPrefix(FILTER_ROW_CLASS) + \" .\" + HIGHLIGHT_OUTLINE_CLASS).removeClass(HIGHLIGHT_OUTLINE_CLASS);\r\n            columnHeadersViewElement.find(\".\" + this.addWidgetPrefix(FILTER_ROW_CLASS) + \" .\" + FILTER_MODIFIED_CLASS).removeClass(FILTER_MODIFIED_CLASS);\r\n            this._getHeaderPanel().enableApplyButton(false)\r\n        }\r\n    }\r\n});\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            filterRow: {\r\n                visible: false,\r\n                showOperationChooser: true,\r\n                showAllText: _message2.default.format(\"dxDataGrid-filterRowShowAllText\"),\r\n                resetOperationText: _message2.default.format(\"dxDataGrid-filterRowResetOperationText\"),\r\n                applyFilter: \"auto\",\r\n                applyFilterText: _message2.default.format(\"dxDataGrid-applyFilterText\"),\r\n                operationDescriptions: {\r\n                    equal: _message2.default.format(\"dxDataGrid-filterRowOperationEquals\"),\r\n                    notEqual: _message2.default.format(\"dxDataGrid-filterRowOperationNotEquals\"),\r\n                    lessThan: _message2.default.format(\"dxDataGrid-filterRowOperationLess\"),\r\n                    lessThanOrEqual: _message2.default.format(\"dxDataGrid-filterRowOperationLessOrEquals\"),\r\n                    greaterThan: _message2.default.format(\"dxDataGrid-filterRowOperationGreater\"),\r\n                    greaterThanOrEqual: _message2.default.format(\"dxDataGrid-filterRowOperationGreaterOrEquals\"),\r\n                    startsWith: _message2.default.format(\"dxDataGrid-filterRowOperationStartsWith\"),\r\n                    contains: _message2.default.format(\"dxDataGrid-filterRowOperationContains\"),\r\n                    notContains: _message2.default.format(\"dxDataGrid-filterRowOperationNotContains\"),\r\n                    endsWith: _message2.default.format(\"dxDataGrid-filterRowOperationEndsWith\"),\r\n                    between: _message2.default.format(\"dxDataGrid-filterRowOperationBetween\"),\r\n                    isBlank: _message2.default.format(\"dxFilterBuilder-filterOperationIsBlank\"),\r\n                    isNotBlank: _message2.default.format(\"dxFilterBuilder-filterOperationIsNotBlank\")\r\n                },\r\n                betweenStartText: _message2.default.format(\"dxDataGrid-filterRowOperationBetweenStartText\"),\r\n                betweenEndText: _message2.default.format(\"dxDataGrid-filterRowOperationBetweenEndText\")\r\n            }\r\n        }\r\n    },\r\n    controllers: {\r\n        applyFilter: exports.ApplyFilterViewController\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            data: DataControllerFilterRowExtender,\r\n            columnsResizer: {\r\n                _startResizing: function() {\r\n                    var that = this;\r\n                    var cellIndex;\r\n                    var overlayInstance;\r\n                    that.callBase.apply(that, arguments);\r\n                    if (that.isResizing()) {\r\n                        overlayInstance = that._columnHeadersView.getFilterRangeOverlayInstance();\r\n                        if (overlayInstance) {\r\n                            cellIndex = overlayInstance.$element().closest(\"td\").index();\r\n                            if (cellIndex === that._targetPoint.columnIndex || cellIndex === that._targetPoint.columnIndex + 1) {\r\n                                overlayInstance.$content().hide()\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                _endResizing: function() {\r\n                    var that = this;\r\n                    var $cell;\r\n                    var overlayInstance;\r\n                    if (that.isResizing()) {\r\n                        overlayInstance = that._columnHeadersView.getFilterRangeOverlayInstance();\r\n                        if (overlayInstance) {\r\n                            $cell = overlayInstance.$element().closest(\"td\");\r\n                            that._columnHeadersView._updateFilterRangeOverlay({\r\n                                width: $cell.outerWidth(true) + CORRECT_FILTER_RANGE_OVERLAY_WIDTH\r\n                            });\r\n                            overlayInstance.$content().show()\r\n                        }\r\n                    }\r\n                    that.callBase.apply(that, arguments)\r\n                }\r\n            }\r\n        },\r\n        views: {\r\n            columnHeadersView: ColumnHeadersViewFilterRowExtender,\r\n            headerPanel: {\r\n                _getToolbarItems: function() {\r\n                    var items = this.callBase();\r\n                    var filterItem = this._prepareFilterItem(items);\r\n                    return filterItem.concat(items)\r\n                },\r\n                _prepareFilterItem: function() {\r\n                    var that = this;\r\n                    var filterItem = [];\r\n                    if (that._isShowApplyFilterButton()) {\r\n                        var hintText = that.option(\"filterRow.applyFilterText\");\r\n                        var columns = that._columnsController.getColumns();\r\n                        var disabled = !columns.filter(function(column) {\r\n                            return void 0 !== column.bufferedFilterValue\r\n                        }).length;\r\n                        var onInitialized = function(e) {\r\n                            (0, _renderer2.default)(e.element).addClass(that._getToolbarButtonClass(APPLY_BUTTON_CLASS))\r\n                        };\r\n                        var onClickHandler = function() {\r\n                            that._applyFilterViewController.applyFilter()\r\n                        };\r\n                        var toolbarItem = {\r\n                            widget: \"dxButton\",\r\n                            options: {\r\n                                icon: \"apply-filter\",\r\n                                disabled: disabled,\r\n                                onClick: onClickHandler,\r\n                                hint: hintText,\r\n                                text: hintText,\r\n                                onInitialized: onInitialized\r\n                            },\r\n                            showText: \"inMenu\",\r\n                            name: \"applyFilterButton\",\r\n                            location: \"after\",\r\n                            locateInMenu: \"auto\",\r\n                            sortIndex: 10\r\n                        };\r\n                        filterItem.push(toolbarItem)\r\n                    }\r\n                    return filterItem\r\n                },\r\n                _isShowApplyFilterButton: function() {\r\n                    var filterRowOptions = this.option(\"filterRow\");\r\n                    return filterRowOptions && filterRowOptions.visible && \"onClick\" === filterRowOptions.applyFilter\r\n                },\r\n                init: function() {\r\n                    this.callBase();\r\n                    this._dataController = this.getController(\"data\");\r\n                    this._applyFilterViewController = this.getController(\"applyFilter\")\r\n                },\r\n                enableApplyButton: function(value) {\r\n                    this.setToolbarItemDisabled(\"applyFilterButton\", !value)\r\n                },\r\n                isVisible: function() {\r\n                    return this.callBase() || this._isShowApplyFilterButton()\r\n                },\r\n                optionChanged: function(args) {\r\n                    if (\"filterRow\" === args.name) {\r\n                        this._invalidate();\r\n                        args.handled = true\r\n                    } else {\r\n                        this.callBase(args)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}