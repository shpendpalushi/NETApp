{"ast":null,"code":"import _inherits from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _classCallCheck from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { fromArray } from './fromArray';\nimport { isArray } from '../util/isArray';\nimport { Subscriber } from '../Subscriber';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { iterator as Symbol_iterator } from '../../internal/symbol/iterator';\nexport function zip() {\n  for (var _len = arguments.length, observables = new Array(_len), _key = 0; _key < _len; _key++) {\n    observables[_key] = arguments[_key];\n  }\n\n  var resultSelector = observables[observables.length - 1];\n\n  if (typeof resultSelector === 'function') {\n    observables.pop();\n  }\n\n  return fromArray(observables, undefined).lift(new ZipOperator(resultSelector));\n}\nexport var ZipOperator = /*#__PURE__*/function () {\n  function ZipOperator(resultSelector) {\n    _classCallCheck(this, ZipOperator);\n\n    this.resultSelector = resultSelector;\n  }\n\n  _createClass(ZipOperator, [{\n    key: \"call\",\n    value: function call(subscriber, source) {\n      return source.subscribe(new ZipSubscriber(subscriber, this.resultSelector));\n    }\n  }]);\n\n  return ZipOperator;\n}();\nexport var ZipSubscriber = /*#__PURE__*/function (_Subscriber) {\n  _inherits(ZipSubscriber, _Subscriber);\n\n  var _super = _createSuper(ZipSubscriber);\n\n  function ZipSubscriber(destination, resultSelector) {\n    var _this;\n\n    var values = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Object.create(null);\n\n    _classCallCheck(this, ZipSubscriber);\n\n    _this = _super.call(this, destination);\n    _this.iterators = [];\n    _this.active = 0;\n    _this.resultSelector = typeof resultSelector === 'function' ? resultSelector : null;\n    _this.values = values;\n    return _this;\n  }\n\n  _createClass(ZipSubscriber, [{\n    key: \"_next\",\n    value: function _next(value) {\n      var iterators = this.iterators;\n\n      if (isArray(value)) {\n        iterators.push(new StaticArrayIterator(value));\n      } else if (typeof value[Symbol_iterator] === 'function') {\n        iterators.push(new StaticIterator(value[Symbol_iterator]()));\n      } else {\n        iterators.push(new ZipBufferIterator(this.destination, this, value));\n      }\n    }\n  }, {\n    key: \"_complete\",\n    value: function _complete() {\n      var iterators = this.iterators;\n      var len = iterators.length;\n      this.unsubscribe();\n\n      if (len === 0) {\n        this.destination.complete();\n        return;\n      }\n\n      this.active = len;\n\n      for (var i = 0; i < len; i++) {\n        var iterator = iterators[i];\n\n        if (iterator.stillUnsubscribed) {\n          var destination = this.destination;\n          destination.add(iterator.subscribe(iterator, i));\n        } else {\n          this.active--;\n        }\n      }\n    }\n  }, {\n    key: \"notifyInactive\",\n    value: function notifyInactive() {\n      this.active--;\n\n      if (this.active === 0) {\n        this.destination.complete();\n      }\n    }\n  }, {\n    key: \"checkIterators\",\n    value: function checkIterators() {\n      var iterators = this.iterators;\n      var len = iterators.length;\n      var destination = this.destination;\n\n      for (var i = 0; i < len; i++) {\n        var iterator = iterators[i];\n\n        if (typeof iterator.hasValue === 'function' && !iterator.hasValue()) {\n          return;\n        }\n      }\n\n      var shouldComplete = false;\n      var args = [];\n\n      for (var _i = 0; _i < len; _i++) {\n        var _iterator = iterators[_i];\n\n        var result = _iterator.next();\n\n        if (_iterator.hasCompleted()) {\n          shouldComplete = true;\n        }\n\n        if (result.done) {\n          destination.complete();\n          return;\n        }\n\n        args.push(result.value);\n      }\n\n      if (this.resultSelector) {\n        this._tryresultSelector(args);\n      } else {\n        destination.next(args);\n      }\n\n      if (shouldComplete) {\n        destination.complete();\n      }\n    }\n  }, {\n    key: \"_tryresultSelector\",\n    value: function _tryresultSelector(args) {\n      var result;\n\n      try {\n        result = this.resultSelector.apply(this, args);\n      } catch (err) {\n        this.destination.error(err);\n        return;\n      }\n\n      this.destination.next(result);\n    }\n  }]);\n\n  return ZipSubscriber;\n}(Subscriber);\n\nvar StaticIterator = /*#__PURE__*/function () {\n  function StaticIterator(iterator) {\n    _classCallCheck(this, StaticIterator);\n\n    this.iterator = iterator;\n    this.nextResult = iterator.next();\n  }\n\n  _createClass(StaticIterator, [{\n    key: \"hasValue\",\n    value: function hasValue() {\n      return true;\n    }\n  }, {\n    key: \"next\",\n    value: function next() {\n      var result = this.nextResult;\n      this.nextResult = this.iterator.next();\n      return result;\n    }\n  }, {\n    key: \"hasCompleted\",\n    value: function hasCompleted() {\n      var nextResult = this.nextResult;\n      return nextResult && nextResult.done;\n    }\n  }]);\n\n  return StaticIterator;\n}();\n\nvar StaticArrayIterator = /*#__PURE__*/function () {\n  function StaticArrayIterator(array) {\n    _classCallCheck(this, StaticArrayIterator);\n\n    this.array = array;\n    this.index = 0;\n    this.length = 0;\n    this.length = array.length;\n  }\n\n  _createClass(StaticArrayIterator, [{\n    key: Symbol_iterator,\n    value: function value() {\n      return this;\n    }\n  }, {\n    key: \"next\",\n    value: function next(value) {\n      var i = this.index++;\n      var array = this.array;\n      return i < this.length ? {\n        value: array[i],\n        done: false\n      } : {\n        value: null,\n        done: true\n      };\n    }\n  }, {\n    key: \"hasValue\",\n    value: function hasValue() {\n      return this.array.length > this.index;\n    }\n  }, {\n    key: \"hasCompleted\",\n    value: function hasCompleted() {\n      return this.array.length === this.index;\n    }\n  }]);\n\n  return StaticArrayIterator;\n}();\n\nvar ZipBufferIterator = /*#__PURE__*/function (_OuterSubscriber) {\n  _inherits(ZipBufferIterator, _OuterSubscriber);\n\n  var _super2 = _createSuper(ZipBufferIterator);\n\n  function ZipBufferIterator(destination, parent, observable) {\n    var _this2;\n\n    _classCallCheck(this, ZipBufferIterator);\n\n    _this2 = _super2.call(this, destination);\n    _this2.parent = parent;\n    _this2.observable = observable;\n    _this2.stillUnsubscribed = true;\n    _this2.buffer = [];\n    _this2.isComplete = false;\n    return _this2;\n  }\n\n  _createClass(ZipBufferIterator, [{\n    key: Symbol_iterator,\n    value: function value() {\n      return this;\n    }\n  }, {\n    key: \"next\",\n    value: function next() {\n      var buffer = this.buffer;\n\n      if (buffer.length === 0 && this.isComplete) {\n        return {\n          value: null,\n          done: true\n        };\n      } else {\n        return {\n          value: buffer.shift(),\n          done: false\n        };\n      }\n    }\n  }, {\n    key: \"hasValue\",\n    value: function hasValue() {\n      return this.buffer.length > 0;\n    }\n  }, {\n    key: \"hasCompleted\",\n    value: function hasCompleted() {\n      return this.buffer.length === 0 && this.isComplete;\n    }\n  }, {\n    key: \"notifyComplete\",\n    value: function notifyComplete() {\n      if (this.buffer.length > 0) {\n        this.isComplete = true;\n        this.parent.notifyInactive();\n      } else {\n        this.destination.complete();\n      }\n    }\n  }, {\n    key: \"notifyNext\",\n    value: function notifyNext(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n      this.buffer.push(innerValue);\n      this.parent.checkIterators();\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(value, index) {\n      return subscribeToResult(this, this.observable, this, index);\n    }\n  }]);\n\n  return ZipBufferIterator;\n}(OuterSubscriber);","map":{"version":3,"sources":["../../../src/internal/observable/zip.ts"],"names":[],"mappings":"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","sourcesContent":["import { fromArray } from './fromArray';\r\nimport { isArray } from '../util/isArray';\r\nimport { Subscriber } from '../Subscriber';\r\nimport { OuterSubscriber } from '../OuterSubscriber';\r\nimport { subscribeToResult } from '../util/subscribeToResult';\r\nimport { iterator as Symbol_iterator } from '../../internal/symbol/iterator';\r\nexport function zip(...observables) {\r\n    const resultSelector = observables[observables.length - 1];\r\n    if (typeof resultSelector === 'function') {\r\n        observables.pop();\r\n    }\r\n    return fromArray(observables, undefined).lift(new ZipOperator(resultSelector));\r\n}\r\nexport class ZipOperator {\r\n    constructor(resultSelector) {\r\n        this.resultSelector = resultSelector;\r\n    }\r\n    call(subscriber, source) {\r\n        return source.subscribe(new ZipSubscriber(subscriber, this.resultSelector));\r\n    }\r\n}\r\nexport class ZipSubscriber extends Subscriber {\r\n    constructor(destination, resultSelector, values = Object.create(null)) {\r\n        super(destination);\r\n        this.iterators = [];\r\n        this.active = 0;\r\n        this.resultSelector = (typeof resultSelector === 'function') ? resultSelector : null;\r\n        this.values = values;\r\n    }\r\n    _next(value) {\r\n        const iterators = this.iterators;\r\n        if (isArray(value)) {\r\n            iterators.push(new StaticArrayIterator(value));\r\n        }\r\n        else if (typeof value[Symbol_iterator] === 'function') {\r\n            iterators.push(new StaticIterator(value[Symbol_iterator]()));\r\n        }\r\n        else {\r\n            iterators.push(new ZipBufferIterator(this.destination, this, value));\r\n        }\r\n    }\r\n    _complete() {\r\n        const iterators = this.iterators;\r\n        const len = iterators.length;\r\n        this.unsubscribe();\r\n        if (len === 0) {\r\n            this.destination.complete();\r\n            return;\r\n        }\r\n        this.active = len;\r\n        for (let i = 0; i < len; i++) {\r\n            let iterator = iterators[i];\r\n            if (iterator.stillUnsubscribed) {\r\n                const destination = this.destination;\r\n                destination.add(iterator.subscribe(iterator, i));\r\n            }\r\n            else {\r\n                this.active--;\r\n            }\r\n        }\r\n    }\r\n    notifyInactive() {\r\n        this.active--;\r\n        if (this.active === 0) {\r\n            this.destination.complete();\r\n        }\r\n    }\r\n    checkIterators() {\r\n        const iterators = this.iterators;\r\n        const len = iterators.length;\r\n        const destination = this.destination;\r\n        for (let i = 0; i < len; i++) {\r\n            let iterator = iterators[i];\r\n            if (typeof iterator.hasValue === 'function' && !iterator.hasValue()) {\r\n                return;\r\n            }\r\n        }\r\n        let shouldComplete = false;\r\n        const args = [];\r\n        for (let i = 0; i < len; i++) {\r\n            let iterator = iterators[i];\r\n            let result = iterator.next();\r\n            if (iterator.hasCompleted()) {\r\n                shouldComplete = true;\r\n            }\r\n            if (result.done) {\r\n                destination.complete();\r\n                return;\r\n            }\r\n            args.push(result.value);\r\n        }\r\n        if (this.resultSelector) {\r\n            this._tryresultSelector(args);\r\n        }\r\n        else {\r\n            destination.next(args);\r\n        }\r\n        if (shouldComplete) {\r\n            destination.complete();\r\n        }\r\n    }\r\n    _tryresultSelector(args) {\r\n        let result;\r\n        try {\r\n            result = this.resultSelector.apply(this, args);\r\n        }\r\n        catch (err) {\r\n            this.destination.error(err);\r\n            return;\r\n        }\r\n        this.destination.next(result);\r\n    }\r\n}\r\nclass StaticIterator {\r\n    constructor(iterator) {\r\n        this.iterator = iterator;\r\n        this.nextResult = iterator.next();\r\n    }\r\n    hasValue() {\r\n        return true;\r\n    }\r\n    next() {\r\n        const result = this.nextResult;\r\n        this.nextResult = this.iterator.next();\r\n        return result;\r\n    }\r\n    hasCompleted() {\r\n        const nextResult = this.nextResult;\r\n        return nextResult && nextResult.done;\r\n    }\r\n}\r\nclass StaticArrayIterator {\r\n    constructor(array) {\r\n        this.array = array;\r\n        this.index = 0;\r\n        this.length = 0;\r\n        this.length = array.length;\r\n    }\r\n    [Symbol_iterator]() {\r\n        return this;\r\n    }\r\n    next(value) {\r\n        const i = this.index++;\r\n        const array = this.array;\r\n        return i < this.length ? { value: array[i], done: false } : { value: null, done: true };\r\n    }\r\n    hasValue() {\r\n        return this.array.length > this.index;\r\n    }\r\n    hasCompleted() {\r\n        return this.array.length === this.index;\r\n    }\r\n}\r\nclass ZipBufferIterator extends OuterSubscriber {\r\n    constructor(destination, parent, observable) {\r\n        super(destination);\r\n        this.parent = parent;\r\n        this.observable = observable;\r\n        this.stillUnsubscribed = true;\r\n        this.buffer = [];\r\n        this.isComplete = false;\r\n    }\r\n    [Symbol_iterator]() {\r\n        return this;\r\n    }\r\n    next() {\r\n        const buffer = this.buffer;\r\n        if (buffer.length === 0 && this.isComplete) {\r\n            return { value: null, done: true };\r\n        }\r\n        else {\r\n            return { value: buffer.shift(), done: false };\r\n        }\r\n    }\r\n    hasValue() {\r\n        return this.buffer.length > 0;\r\n    }\r\n    hasCompleted() {\r\n        return this.buffer.length === 0 && this.isComplete;\r\n    }\r\n    notifyComplete() {\r\n        if (this.buffer.length > 0) {\r\n            this.isComplete = true;\r\n            this.parent.notifyInactive();\r\n        }\r\n        else {\r\n            this.destination.complete();\r\n        }\r\n    }\r\n    notifyNext(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\r\n        this.buffer.push(innerValue);\r\n        this.parent.checkIterators();\r\n    }\r\n    subscribe(value, index) {\r\n        return subscribeToResult(this, this.observable, this, index);\r\n    }\r\n}\r\n//# sourceMappingURL=zip.js.map"]},"metadata":{},"sourceType":"module"}