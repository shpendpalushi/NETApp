{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/appointmentDragBehavior.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _draggable = require(\"../draggable\");\n\nvar _draggable2 = _interopRequireDefault(_draggable);\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _translator2 = _interopRequireDefault(_translator);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _constants = require(\"./constants\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar FIXED_CONTAINER_PROP_NAME = \"fixedContainer\";\nvar APPOINTMENT_ITEM_CLASS = \"dx-scheduler-appointment\";\n\nvar AppointmentDragBehavior = function () {\n  function AppointmentDragBehavior(scheduler) {\n    _classCallCheck(this, AppointmentDragBehavior);\n\n    this.scheduler = scheduler;\n    this.appointments = scheduler._appointments;\n    this.initialPosition = {\n      left: 0,\n      top: 0\n    };\n    this.currentAppointment = null;\n  }\n\n  _createClass(AppointmentDragBehavior, [{\n    key: \"isAllDay\",\n    value: function value(appointment) {\n      return appointment.data(\"dxAppointmentSettings\").allDay;\n    }\n  }, {\n    key: \"getContainerShift\",\n    value: function value(isAllDay) {\n      var appointmentContainer = this.appointments._getAppointmentContainer(isAllDay);\n\n      var dragAndDropContainer = this.appointments.option(FIXED_CONTAINER_PROP_NAME);\n      var appointmentContainerRect = appointmentContainer[0].getBoundingClientRect();\n      var dragAndDropContainerRect = dragAndDropContainer[0].getBoundingClientRect();\n      return {\n        left: appointmentContainerRect.left - dragAndDropContainerRect.left,\n        top: appointmentContainerRect.top - dragAndDropContainerRect.top\n      };\n    }\n  }, {\n    key: \"onDragStart\",\n    value: function value(e) {\n      this.initialPosition = _translator2.default.locate((0, _renderer2.default)(e.itemElement));\n      this.appointments.notifyObserver(\"hideAppointmentTooltip\");\n    }\n  }, {\n    key: \"getAppointmentElement\",\n    value: function value(e) {\n      var itemElement = e.event.data && e.event.data.itemElement || e.itemElement;\n      return (0, _renderer2.default)(itemElement);\n    }\n  }, {\n    key: \"onDragEnd\",\n    value: function value(e) {\n      var $appointment = this.getAppointmentElement(e);\n\n      var container = this.appointments._getAppointmentContainer(this.isAllDay($appointment));\n\n      container.append($appointment);\n      this.currentAppointment = $appointment;\n      this.appointments.notifyObserver(\"updateAppointmentAfterDrag\", {\n        event: e,\n        data: this.appointments._getItemData($appointment),\n        $appointment: $appointment,\n        coordinates: this.initialPosition\n      });\n    }\n  }, {\n    key: \"getItemData\",\n    value: function value(appointment) {\n      var itemData = (0, _renderer2.default)(appointment).data(_constants.LIST_ITEM_DATA_KEY);\n      return itemData && itemData.data || this.appointments._getItemData(appointment);\n    }\n  }, {\n    key: \"getItemSettings\",\n    value: function value(appointment) {\n      var itemData = (0, _renderer2.default)(appointment).data(_constants.LIST_ITEM_DATA_KEY);\n      return itemData && itemData.settings || [];\n    }\n  }, {\n    key: \"createDragStartHandler\",\n    value: function value(options, appointmentDragging) {\n      var _this = this;\n\n      return function (e) {\n        e.itemData = _this.getItemData(e.itemElement);\n        e.itemSettings = _this.getItemSettings(e.itemElement);\n        appointmentDragging.onDragStart && appointmentDragging.onDragStart(e);\n\n        if (!e.cancel) {\n          options.onDragStart(e);\n        }\n      };\n    }\n  }, {\n    key: \"createDragEndHandler\",\n    value: function value(options, appointmentDragging) {\n      return function (e) {\n        appointmentDragging.onDragEnd && appointmentDragging.onDragEnd(e);\n\n        if (!e.cancel) {\n          options.onDragEnd(e);\n\n          if (e.fromComponent !== e.toComponent) {\n            appointmentDragging.onRemove && appointmentDragging.onRemove(e);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"createDropHandler\",\n    value: function value(appointmentDragging) {\n      var _this2 = this;\n\n      return function (e) {\n        e.itemData = (0, _extend.extend)({}, e.itemData, _this2.appointments.invoke(\"getUpdatedData\", {\n          data: e.itemData\n        }));\n\n        if (e.fromComponent !== e.toComponent) {\n          appointmentDragging.onAdd && appointmentDragging.onAdd(e);\n        }\n      };\n    }\n  }, {\n    key: \"addTo\",\n    value: function value(container, config) {\n      var appointmentDragging = this.scheduler.option(\"appointmentDragging\") || {};\n      var options = (0, _extend.extend)({\n        component: this.scheduler,\n        contentTemplate: null,\n        filter: \".\".concat(APPOINTMENT_ITEM_CLASS),\n        immediate: false,\n        onDragStart: this.onDragStart.bind(this),\n        onDragEnd: this.onDragEnd.bind(this)\n      }, config);\n\n      this.appointments._createComponent(container, _draggable2.default, (0, _extend.extend)({}, options, appointmentDragging, {\n        onDragStart: this.createDragStartHandler(options, appointmentDragging),\n        onDragEnd: this.createDragEndHandler(options, appointmentDragging),\n        onDrop: this.createDropHandler(appointmentDragging)\n      }));\n    }\n  }, {\n    key: \"moveBack\",\n    value: function value() {\n      if (this.currentAppointment && void 0 !== this.initialPosition.left && void 0 !== this.initialPosition.top) {\n        _translator2.default.move(this.currentAppointment, this.initialPosition);\n      }\n    }\n  }]);\n\n  return AppointmentDragBehavior;\n}();\n\nexports.default = AppointmentDragBehavior;\nmodule.exports = AppointmentDragBehavior;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/scheduler/appointmentDragBehavior.js"],"names":["Object","value","exports","_renderer","require","_renderer2","_interopRequireDefault","_draggable","_draggable2","_translator","_translator2","_extend","_constants","obj","instance","i","props","descriptor","_defineProperties","Constructor","FIXED_CONTAINER_PROP_NAME","APPOINTMENT_ITEM_CLASS","AppointmentDragBehavior","_classCallCheck","scheduler","left","top","_createClass","key","appointment","appointmentContainer","dragAndDropContainer","appointmentContainerRect","dragAndDropContainerRect","e","itemElement","$appointment","container","event","data","coordinates","initialPosition","itemData","_this","appointmentDragging","options","_this2","component","contentTemplate","filter","immediate","onDragStart","onDragEnd","onDrop","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/appointmentDragBehavior.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.default = void 0;\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _draggable = require(\"../draggable\");\r\nvar _draggable2 = _interopRequireDefault(_draggable);\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _translator2 = _interopRequireDefault(_translator);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _constants = require(\"./constants\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar FIXED_CONTAINER_PROP_NAME = \"fixedContainer\";\r\nvar APPOINTMENT_ITEM_CLASS = \"dx-scheduler-appointment\";\r\nvar AppointmentDragBehavior = function() {\r\n    function AppointmentDragBehavior(scheduler) {\r\n        _classCallCheck(this, AppointmentDragBehavior);\r\n        this.scheduler = scheduler;\r\n        this.appointments = scheduler._appointments;\r\n        this.initialPosition = {\r\n            left: 0,\r\n            top: 0\r\n        };\r\n        this.currentAppointment = null\r\n    }\r\n    _createClass(AppointmentDragBehavior, [{\r\n        key: \"isAllDay\",\r\n        value: function(appointment) {\r\n            return appointment.data(\"dxAppointmentSettings\").allDay\r\n        }\r\n    }, {\r\n        key: \"getContainerShift\",\r\n        value: function(isAllDay) {\r\n            var appointmentContainer = this.appointments._getAppointmentContainer(isAllDay);\r\n            var dragAndDropContainer = this.appointments.option(FIXED_CONTAINER_PROP_NAME);\r\n            var appointmentContainerRect = appointmentContainer[0].getBoundingClientRect();\r\n            var dragAndDropContainerRect = dragAndDropContainer[0].getBoundingClientRect();\r\n            return {\r\n                left: appointmentContainerRect.left - dragAndDropContainerRect.left,\r\n                top: appointmentContainerRect.top - dragAndDropContainerRect.top\r\n            }\r\n        }\r\n    }, {\r\n        key: \"onDragStart\",\r\n        value: function(e) {\r\n            this.initialPosition = _translator2.default.locate((0, _renderer2.default)(e.itemElement));\r\n            this.appointments.notifyObserver(\"hideAppointmentTooltip\")\r\n        }\r\n    }, {\r\n        key: \"getAppointmentElement\",\r\n        value: function(e) {\r\n            var itemElement = e.event.data && e.event.data.itemElement || e.itemElement;\r\n            return (0, _renderer2.default)(itemElement)\r\n        }\r\n    }, {\r\n        key: \"onDragEnd\",\r\n        value: function(e) {\r\n            var $appointment = this.getAppointmentElement(e);\r\n            var container = this.appointments._getAppointmentContainer(this.isAllDay($appointment));\r\n            container.append($appointment);\r\n            this.currentAppointment = $appointment;\r\n            this.appointments.notifyObserver(\"updateAppointmentAfterDrag\", {\r\n                event: e,\r\n                data: this.appointments._getItemData($appointment),\r\n                $appointment: $appointment,\r\n                coordinates: this.initialPosition\r\n            })\r\n        }\r\n    }, {\r\n        key: \"getItemData\",\r\n        value: function(appointment) {\r\n            var itemData = (0, _renderer2.default)(appointment).data(_constants.LIST_ITEM_DATA_KEY);\r\n            return itemData && itemData.data || this.appointments._getItemData(appointment)\r\n        }\r\n    }, {\r\n        key: \"getItemSettings\",\r\n        value: function(appointment) {\r\n            var itemData = (0, _renderer2.default)(appointment).data(_constants.LIST_ITEM_DATA_KEY);\r\n            return itemData && itemData.settings || []\r\n        }\r\n    }, {\r\n        key: \"createDragStartHandler\",\r\n        value: function(options, appointmentDragging) {\r\n            var _this = this;\r\n            return function(e) {\r\n                e.itemData = _this.getItemData(e.itemElement);\r\n                e.itemSettings = _this.getItemSettings(e.itemElement);\r\n                appointmentDragging.onDragStart && appointmentDragging.onDragStart(e);\r\n                if (!e.cancel) {\r\n                    options.onDragStart(e)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"createDragEndHandler\",\r\n        value: function(options, appointmentDragging) {\r\n            return function(e) {\r\n                appointmentDragging.onDragEnd && appointmentDragging.onDragEnd(e);\r\n                if (!e.cancel) {\r\n                    options.onDragEnd(e);\r\n                    if (e.fromComponent !== e.toComponent) {\r\n                        appointmentDragging.onRemove && appointmentDragging.onRemove(e)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"createDropHandler\",\r\n        value: function(appointmentDragging) {\r\n            var _this2 = this;\r\n            return function(e) {\r\n                e.itemData = (0, _extend.extend)({}, e.itemData, _this2.appointments.invoke(\"getUpdatedData\", {\r\n                    data: e.itemData\r\n                }));\r\n                if (e.fromComponent !== e.toComponent) {\r\n                    appointmentDragging.onAdd && appointmentDragging.onAdd(e)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"addTo\",\r\n        value: function(container, config) {\r\n            var appointmentDragging = this.scheduler.option(\"appointmentDragging\") || {};\r\n            var options = (0, _extend.extend)({\r\n                component: this.scheduler,\r\n                contentTemplate: null,\r\n                filter: \".\".concat(APPOINTMENT_ITEM_CLASS),\r\n                immediate: false,\r\n                onDragStart: this.onDragStart.bind(this),\r\n                onDragEnd: this.onDragEnd.bind(this)\r\n            }, config);\r\n            this.appointments._createComponent(container, _draggable2.default, (0, _extend.extend)({}, options, appointmentDragging, {\r\n                onDragStart: this.createDragStartHandler(options, appointmentDragging),\r\n                onDragEnd: this.createDragEndHandler(options, appointmentDragging),\r\n                onDrop: this.createDropHandler(appointmentDragging)\r\n            }))\r\n        }\r\n    }, {\r\n        key: \"moveBack\",\r\n        value: function() {\r\n            if (this.currentAppointment && void 0 !== this.initialPosition.left && void 0 !== this.initialPosition.top) {\r\n                _translator2.default.move(this.currentAppointment, this.initialPosition)\r\n            }\r\n        }\r\n    }]);\r\n    return AppointmentDragBehavior\r\n}();\r\nexports.default = AppointmentDragBehavior;\r\nmodule.exports = AppointmentDragBehavior;\r\n"]},"metadata":{},"sourceType":"module"}