{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.error_handling.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _click = require(\"../../events/click\");\n\nvar _click2 = _interopRequireDefault(_click);\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar ERROR_ROW_CLASS = \"dx-error-row\";\nvar ERROR_MESSAGE_CLASS = \"dx-error-message\";\nvar ERROR_CLOSEBUTTON_CLASS = \"dx-closebutton\";\nvar ACTION_CLASS = \"action\";\n\nvar ErrorHandlingController = _uiGrid_core2.default.ViewController.inherit({\n  init: function init() {\n    var that = this;\n    that._columnHeadersView = that.getView(\"columnHeadersView\");\n    that._rowsView = that.getView(\"rowsView\");\n  },\n  _createErrorRow: function _createErrorRow(error, $tableElements) {\n    var that = this;\n    var $errorRow;\n    var $closeButton;\n\n    var $errorMessage = this._renderErrorMessage(error);\n\n    if ($tableElements) {\n      $errorRow = (0, _renderer2.default)(\"<tr>\").addClass(ERROR_ROW_CLASS);\n      $closeButton = (0, _renderer2.default)(\"<div>\").addClass(ERROR_CLOSEBUTTON_CLASS).addClass(that.addWidgetPrefix(ACTION_CLASS));\n\n      _events_engine2.default.on($closeButton, _click2.default.name, that.createAction(function (args) {\n        var e = args.event;\n        var $errorRow;\n        var errorRowIndex = (0, _renderer2.default)(e.currentTarget).closest(\".\" + ERROR_ROW_CLASS).index();\n        e.stopPropagation();\n        (0, _iterator.each)($tableElements, function (_, tableElement) {\n          $errorRow = (0, _renderer2.default)(tableElement).children(\"tbody\").children(\"tr\").eq(errorRowIndex);\n          that.removeErrorRow($errorRow);\n        });\n        that.getController(\"resizing\") && that.getController(\"resizing\").fireContentReadyAction();\n      }));\n\n      (0, _renderer2.default)(\"<td>\").attr({\n        colSpan: that.getController(\"columns\").getVisibleColumns().length,\n        role: \"presentation\"\n      }).prepend($closeButton).append($errorMessage).appendTo($errorRow);\n      return $errorRow;\n    }\n\n    return $errorMessage;\n  },\n  _renderErrorMessage: function _renderErrorMessage(error) {\n    var message = error.url ? error.message.replace(error.url, \"\") : error.message || error;\n    var $message = (0, _renderer2.default)(\"<div>\").addClass(ERROR_MESSAGE_CLASS).text(message);\n\n    if (error.url) {\n      (0, _renderer2.default)(\"<a>\").attr(\"href\", error.url).text(error.url).appendTo($message);\n    }\n\n    return $message;\n  },\n  renderErrorRow: function renderErrorRow(error, rowIndex, $popupContent) {\n    var that = this;\n    var $row;\n    var $errorMessageElement;\n    var $firstErrorRow;\n    var rowElements;\n    var viewElement;\n    var $tableElements;\n\n    if ($popupContent) {\n      $popupContent.find(\".\" + ERROR_MESSAGE_CLASS).remove();\n      $errorMessageElement = that._createErrorRow(error);\n      $popupContent.prepend($errorMessageElement);\n      return $errorMessageElement;\n    }\n\n    viewElement = rowIndex >= 0 || !that._columnHeadersView.isVisible() ? that._rowsView : that._columnHeadersView, $tableElements = $popupContent || viewElement.getTableElements();\n    (0, _iterator.each)($tableElements, function (_, tableElement) {\n      $errorMessageElement = that._createErrorRow(error, $tableElements);\n      $firstErrorRow = $firstErrorRow || $errorMessageElement;\n\n      if (rowIndex >= 0) {\n        $row = viewElement._getRowElements((0, _renderer2.default)(tableElement)).eq(rowIndex);\n        that.removeErrorRow($row.next());\n        $errorMessageElement.insertAfter($row);\n      } else {\n        var $tbody = (0, _renderer2.default)(tableElement).children(\"tbody\");\n        rowElements = $tbody.children(\"tr\");\n\n        if (that._columnHeadersView.isVisible()) {\n          that.removeErrorRow(rowElements.last());\n          (0, _renderer2.default)(tableElement).append($errorMessageElement);\n        } else {\n          that.removeErrorRow(rowElements.first());\n          $tbody.first().prepend($errorMessageElement);\n        }\n      }\n    });\n\n    if (!$popupContent) {\n      var resizingController = that.getController(\"resizing\");\n      resizingController && resizingController.fireContentReadyAction();\n    }\n\n    return $firstErrorRow;\n  },\n  removeErrorRow: function removeErrorRow($row) {\n    if (!$row) {\n      var $columnHeaders = this._columnHeadersView && this._columnHeadersView.element();\n\n      $row = $columnHeaders && $columnHeaders.find(\".\" + ERROR_ROW_CLASS);\n\n      if (!$row || !$row.length) {\n        var $rowsViewElement = this._rowsView.element();\n\n        $row = $rowsViewElement && $rowsViewElement.find(\".\" + ERROR_ROW_CLASS);\n      }\n    }\n\n    $row && $row.hasClass(ERROR_ROW_CLASS) && $row.remove();\n  },\n  optionChanged: function optionChanged(args) {\n    var that = this;\n\n    switch (args.name) {\n      case \"errorRowEnabled\":\n        args.handled = true;\n        break;\n\n      default:\n        that.callBase(args);\n    }\n  }\n});\n\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      errorRowEnabled: true\n    };\n  },\n  controllers: {\n    errorHandling: ErrorHandlingController\n  },\n  extenders: {\n    controllers: {\n      data: {\n        init: function init() {\n          var that = this;\n          var errorHandlingController = that.getController(\"errorHandling\");\n          that.callBase();\n          that.dataErrorOccurred.add(function (error, $popupContent) {\n            if (that.option(\"errorRowEnabled\")) {\n              errorHandlingController.renderErrorRow(error, void 0, $popupContent);\n            }\n          });\n          that.changed.add(function (e) {\n            if (e && \"loadError\" === e.changeType) {\n              return;\n            }\n\n            var errorHandlingController = that.getController(\"errorHandling\");\n            var editingController = that.getController(\"editing\");\n\n            if (editingController && !editingController.hasChanges()) {\n              errorHandlingController && errorHandlingController.removeErrorRow();\n            }\n          });\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.error_handling.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_click","_click2","_iterator","_uiGrid_core","_uiGrid_core2","obj","ERROR_ROW_CLASS","ERROR_MESSAGE_CLASS","ERROR_CLOSEBUTTON_CLASS","ACTION_CLASS","ErrorHandlingController","init","that","_createErrorRow","$errorMessage","$errorRow","$closeButton","e","args","errorRowIndex","colSpan","role","_renderErrorMessage","message","error","$message","renderErrorRow","$popupContent","$errorMessageElement","viewElement","rowIndex","$tableElements","$firstErrorRow","$row","$tbody","rowElements","resizingController","removeErrorRow","$columnHeaders","$rowsViewElement","optionChanged","module","defaultOptions","errorRowEnabled","controllers","errorHandling","extenders","data","errorHandlingController","editingController"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.error_handling.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _click = require(\"../../events/click\");\r\nvar _click2 = _interopRequireDefault(_click);\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar ERROR_ROW_CLASS = \"dx-error-row\";\r\nvar ERROR_MESSAGE_CLASS = \"dx-error-message\";\r\nvar ERROR_CLOSEBUTTON_CLASS = \"dx-closebutton\";\r\nvar ACTION_CLASS = \"action\";\r\nvar ErrorHandlingController = _uiGrid_core2.default.ViewController.inherit({\r\n    init: function() {\r\n        var that = this;\r\n        that._columnHeadersView = that.getView(\"columnHeadersView\");\r\n        that._rowsView = that.getView(\"rowsView\")\r\n    },\r\n    _createErrorRow: function(error, $tableElements) {\r\n        var that = this;\r\n        var $errorRow;\r\n        var $closeButton;\r\n        var $errorMessage = this._renderErrorMessage(error);\r\n        if ($tableElements) {\r\n            $errorRow = (0, _renderer2.default)(\"<tr>\").addClass(ERROR_ROW_CLASS);\r\n            $closeButton = (0, _renderer2.default)(\"<div>\").addClass(ERROR_CLOSEBUTTON_CLASS).addClass(that.addWidgetPrefix(ACTION_CLASS));\r\n            _events_engine2.default.on($closeButton, _click2.default.name, that.createAction(function(args) {\r\n                var e = args.event;\r\n                var $errorRow;\r\n                var errorRowIndex = (0, _renderer2.default)(e.currentTarget).closest(\".\" + ERROR_ROW_CLASS).index();\r\n                e.stopPropagation();\r\n                (0, _iterator.each)($tableElements, function(_, tableElement) {\r\n                    $errorRow = (0, _renderer2.default)(tableElement).children(\"tbody\").children(\"tr\").eq(errorRowIndex);\r\n                    that.removeErrorRow($errorRow)\r\n                });\r\n                that.getController(\"resizing\") && that.getController(\"resizing\").fireContentReadyAction()\r\n            }));\r\n            (0, _renderer2.default)(\"<td>\").attr({\r\n                colSpan: that.getController(\"columns\").getVisibleColumns().length,\r\n                role: \"presentation\"\r\n            }).prepend($closeButton).append($errorMessage).appendTo($errorRow);\r\n            return $errorRow\r\n        }\r\n        return $errorMessage\r\n    },\r\n    _renderErrorMessage: function(error) {\r\n        var message = error.url ? error.message.replace(error.url, \"\") : error.message || error;\r\n        var $message = (0, _renderer2.default)(\"<div>\").addClass(ERROR_MESSAGE_CLASS).text(message);\r\n        if (error.url) {\r\n            (0, _renderer2.default)(\"<a>\").attr(\"href\", error.url).text(error.url).appendTo($message)\r\n        }\r\n        return $message\r\n    },\r\n    renderErrorRow: function(error, rowIndex, $popupContent) {\r\n        var that = this;\r\n        var $row;\r\n        var $errorMessageElement;\r\n        var $firstErrorRow;\r\n        var rowElements;\r\n        var viewElement;\r\n        var $tableElements;\r\n        if ($popupContent) {\r\n            $popupContent.find(\".\" + ERROR_MESSAGE_CLASS).remove();\r\n            $errorMessageElement = that._createErrorRow(error);\r\n            $popupContent.prepend($errorMessageElement);\r\n            return $errorMessageElement\r\n        }\r\n        viewElement = rowIndex >= 0 || !that._columnHeadersView.isVisible() ? that._rowsView : that._columnHeadersView, $tableElements = $popupContent || viewElement.getTableElements();\r\n        (0, _iterator.each)($tableElements, function(_, tableElement) {\r\n            $errorMessageElement = that._createErrorRow(error, $tableElements);\r\n            $firstErrorRow = $firstErrorRow || $errorMessageElement;\r\n            if (rowIndex >= 0) {\r\n                $row = viewElement._getRowElements((0, _renderer2.default)(tableElement)).eq(rowIndex);\r\n                that.removeErrorRow($row.next());\r\n                $errorMessageElement.insertAfter($row)\r\n            } else {\r\n                var $tbody = (0, _renderer2.default)(tableElement).children(\"tbody\");\r\n                rowElements = $tbody.children(\"tr\");\r\n                if (that._columnHeadersView.isVisible()) {\r\n                    that.removeErrorRow(rowElements.last());\r\n                    (0, _renderer2.default)(tableElement).append($errorMessageElement)\r\n                } else {\r\n                    that.removeErrorRow(rowElements.first());\r\n                    $tbody.first().prepend($errorMessageElement)\r\n                }\r\n            }\r\n        });\r\n        if (!$popupContent) {\r\n            var resizingController = that.getController(\"resizing\");\r\n            resizingController && resizingController.fireContentReadyAction()\r\n        }\r\n        return $firstErrorRow\r\n    },\r\n    removeErrorRow: function($row) {\r\n        if (!$row) {\r\n            var $columnHeaders = this._columnHeadersView && this._columnHeadersView.element();\r\n            $row = $columnHeaders && $columnHeaders.find(\".\" + ERROR_ROW_CLASS);\r\n            if (!$row || !$row.length) {\r\n                var $rowsViewElement = this._rowsView.element();\r\n                $row = $rowsViewElement && $rowsViewElement.find(\".\" + ERROR_ROW_CLASS)\r\n            }\r\n        }\r\n        $row && $row.hasClass(ERROR_ROW_CLASS) && $row.remove()\r\n    },\r\n    optionChanged: function(args) {\r\n        var that = this;\r\n        switch (args.name) {\r\n            case \"errorRowEnabled\":\r\n                args.handled = true;\r\n                break;\r\n            default:\r\n                that.callBase(args)\r\n        }\r\n    }\r\n});\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            errorRowEnabled: true\r\n        }\r\n    },\r\n    controllers: {\r\n        errorHandling: ErrorHandlingController\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            data: {\r\n                init: function() {\r\n                    var that = this;\r\n                    var errorHandlingController = that.getController(\"errorHandling\");\r\n                    that.callBase();\r\n                    that.dataErrorOccurred.add(function(error, $popupContent) {\r\n                        if (that.option(\"errorRowEnabled\")) {\r\n                            errorHandlingController.renderErrorRow(error, void 0, $popupContent)\r\n                        }\r\n                    });\r\n                    that.changed.add(function(e) {\r\n                        if (e && \"loadError\" === e.changeType) {\r\n                            return\r\n                        }\r\n                        var errorHandlingController = that.getController(\"errorHandling\");\r\n                        var editingController = that.getController(\"editing\");\r\n                        if (editingController && !editingController.hasChanges()) {\r\n                            errorHandlingController && errorHandlingController.removeErrorRow()\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}