{"ast":null,"code":"/**\r\n * DevExtreme (ui/scroll_view/ui.events.emitter.gesture.scroll.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar Class = require(\"../../core/class\");\n\nvar abstract = Class.abstract;\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar GestureEmitter = require(\"../../events/gesture/emitter.gesture\");\n\nvar registerEmitter = require(\"../../events/core/emitter_registrator\");\n\nvar animationFrame = require(\"../../animation/frame\");\n\nvar realDevice = require(\"../../core/devices\").real();\n\nvar compareVersions = require(\"../../core/utils/version\").compare;\n\nvar SCROLL_INIT_EVENT = \"dxscrollinit\";\nvar SCROLL_START_EVENT = \"dxscrollstart\";\nvar SCROLL_MOVE_EVENT = \"dxscroll\";\nvar SCROLL_END_EVENT = \"dxscrollend\";\nvar SCROLL_STOP_EVENT = \"dxscrollstop\";\nvar SCROLL_CANCEL_EVENT = \"dxscrollcancel\";\nvar Locker = Class.inherit(function () {\n  var NAMESPACED_SCROLL_EVENT = eventUtils.addNamespace(\"scroll\", \"dxScrollEmitter\");\n  return {\n    ctor: function ctor(element) {\n      this._element = element;\n      this._locked = false;\n      var that = this;\n\n      this._proxiedScroll = function (e) {\n        that._scroll(e);\n      };\n\n      eventsEngine.on(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll);\n    },\n    _scroll: abstract,\n    check: function check(e, callback) {\n      if (this._locked) {\n        callback();\n      }\n    },\n    dispose: function dispose() {\n      eventsEngine.off(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll);\n    }\n  };\n}());\nvar TimeoutLocker = Locker.inherit(function () {\n  return {\n    ctor: function ctor(element, timeout) {\n      this.callBase(element);\n      this._timeout = timeout;\n    },\n    _scroll: function _scroll() {\n      this._prepare();\n\n      this._forget();\n    },\n    _prepare: function _prepare() {\n      if (this._timer) {\n        this._clearTimer();\n      }\n\n      this._locked = true;\n    },\n    _clearTimer: function _clearTimer() {\n      clearTimeout(this._timer);\n      this._locked = false;\n      this._timer = null;\n    },\n    _forget: function _forget() {\n      var that = this;\n      this._timer = setTimeout(function () {\n        that._clearTimer();\n      }, this._timeout);\n    },\n    dispose: function dispose() {\n      this.callBase();\n\n      this._clearTimer();\n    }\n  };\n}());\nvar WheelLocker = TimeoutLocker.inherit(function () {\n  var WHEEL_UNLOCK_TIMEOUT = 400;\n  return {\n    ctor: function ctor(element) {\n      this.callBase(element, WHEEL_UNLOCK_TIMEOUT);\n      this._lastWheelDirection = null;\n    },\n    check: function check(e, callback) {\n      this._checkDirectionChanged(e);\n\n      this.callBase(e, callback);\n    },\n    _checkDirectionChanged: function _checkDirectionChanged(e) {\n      if (!eventUtils.isDxMouseWheelEvent(e)) {\n        this._lastWheelDirection = null;\n        return;\n      }\n\n      var direction = e.shiftKey || false;\n      var directionChange = null !== this._lastWheelDirection && direction !== this._lastWheelDirection;\n      this._lastWheelDirection = direction;\n      this._locked = this._locked && !directionChange;\n    }\n  };\n}());\nvar PointerLocker = TimeoutLocker.inherit(function () {\n  var POINTER_UNLOCK_TIMEOUT = 400;\n  return {\n    ctor: function ctor(element) {\n      this.callBase(element, POINTER_UNLOCK_TIMEOUT);\n    }\n  };\n}());\n!function () {\n  var ios8_greater = realDevice.ios && compareVersions(realDevice.version, [8]) >= 0;\n  var android5_greater = realDevice.android && compareVersions(realDevice.version, [5]) >= 0;\n\n  if (!(ios8_greater || android5_greater)) {\n    return;\n  }\n\n  PointerLocker = Locker.inherit(function () {\n    return {\n      _scroll: function _scroll() {\n        this._locked = true;\n        var that = this;\n        animationFrame.cancelAnimationFrame(this._scrollFrame);\n        this._scrollFrame = animationFrame.requestAnimationFrame(function () {\n          that._locked = false;\n        });\n      },\n      check: function check(e, callback) {\n        animationFrame.cancelAnimationFrame(this._scrollFrame);\n        animationFrame.cancelAnimationFrame(this._checkFrame);\n        var that = this;\n        var callBase = this.callBase;\n        this._checkFrame = animationFrame.requestAnimationFrame(function () {\n          callBase.call(that, e, callback);\n          that._locked = false;\n        });\n      },\n      dispose: function dispose() {\n        this.callBase();\n        animationFrame.cancelAnimationFrame(this._scrollFrame);\n        animationFrame.cancelAnimationFrame(this._checkFrame);\n      }\n    };\n  }());\n}();\nvar ScrollEmitter = GestureEmitter.inherit(function () {\n  var INERTIA_TIMEOUT = 100;\n  var VELOCITY_CALC_TIMEOUT = 200;\n  var FRAME_DURATION = Math.round(1e3 / 60);\n  return {\n    ctor: function ctor(element) {\n      this.callBase.apply(this, arguments);\n      this.direction = \"both\";\n      this._pointerLocker = new PointerLocker(element);\n      this._wheelLocker = new WheelLocker(element);\n    },\n    validate: function validate() {\n      return true;\n    },\n    configure: function configure(data) {\n      if (data.scrollTarget) {\n        this._pointerLocker.dispose();\n\n        this._wheelLocker.dispose();\n\n        this._pointerLocker = new PointerLocker(data.scrollTarget);\n        this._wheelLocker = new WheelLocker(data.scrollTarget);\n      }\n\n      this.callBase(data);\n    },\n    _init: function _init(e) {\n      this._wheelLocker.check(e, function () {\n        if (eventUtils.isDxMouseWheelEvent(e)) {\n          this._accept(e);\n        }\n      }.bind(this));\n\n      this._pointerLocker.check(e, function () {\n        var skipCheck = this.isNative && eventUtils.isMouseEvent(e);\n\n        if (!eventUtils.isDxMouseWheelEvent(e) && !skipCheck) {\n          this._accept(e);\n        }\n      }.bind(this));\n\n      this._fireEvent(SCROLL_INIT_EVENT, e);\n\n      this._prevEventData = eventUtils.eventData(e);\n    },\n    move: function move(e) {\n      this.callBase.apply(this, arguments);\n      e.isScrollingEvent = this.isNative || e.isScrollingEvent;\n    },\n    _start: function _start(e) {\n      this._savedEventData = eventUtils.eventData(e);\n\n      this._fireEvent(SCROLL_START_EVENT, e);\n\n      this._prevEventData = eventUtils.eventData(e);\n    },\n    _move: function _move(e) {\n      var currentEventData = eventUtils.eventData(e);\n\n      this._fireEvent(SCROLL_MOVE_EVENT, e, {\n        delta: eventUtils.eventDelta(this._prevEventData, currentEventData)\n      });\n\n      var eventDelta = eventUtils.eventDelta(this._savedEventData, currentEventData);\n\n      if (eventDelta.time > VELOCITY_CALC_TIMEOUT) {\n        this._savedEventData = this._prevEventData;\n      }\n\n      this._prevEventData = eventUtils.eventData(e);\n    },\n    _end: function _end(e) {\n      var endEventDelta = eventUtils.eventDelta(this._prevEventData, eventUtils.eventData(e));\n      var velocity = {\n        x: 0,\n        y: 0\n      };\n\n      if (!eventUtils.isDxMouseWheelEvent(e) && endEventDelta.time < INERTIA_TIMEOUT) {\n        var eventDelta = eventUtils.eventDelta(this._savedEventData, this._prevEventData);\n        var velocityMultiplier = FRAME_DURATION / eventDelta.time;\n        velocity = {\n          x: eventDelta.x * velocityMultiplier,\n          y: eventDelta.y * velocityMultiplier\n        };\n      }\n\n      this._fireEvent(SCROLL_END_EVENT, e, {\n        velocity: velocity\n      });\n    },\n    _stop: function _stop(e) {\n      this._fireEvent(SCROLL_STOP_EVENT, e);\n    },\n    cancel: function cancel(e) {\n      this.callBase.apply(this, arguments);\n\n      this._fireEvent(SCROLL_CANCEL_EVENT, e);\n    },\n    dispose: function dispose() {\n      this.callBase.apply(this, arguments);\n\n      this._pointerLocker.dispose();\n\n      this._wheelLocker.dispose();\n    },\n    _clearSelection: function _clearSelection() {\n      if (this.isNative) {\n        return;\n      }\n\n      return this.callBase.apply(this, arguments);\n    },\n    _toggleGestureCover: function _toggleGestureCover() {\n      if (this.isNative) {\n        return;\n      }\n\n      return this.callBase.apply(this, arguments);\n    }\n  };\n}());\nregisterEmitter({\n  emitter: ScrollEmitter,\n  events: [SCROLL_INIT_EVENT, SCROLL_START_EVENT, SCROLL_MOVE_EVENT, SCROLL_END_EVENT, SCROLL_STOP_EVENT, SCROLL_CANCEL_EVENT]\n});\nmodule.exports = {\n  init: SCROLL_INIT_EVENT,\n  start: SCROLL_START_EVENT,\n  move: SCROLL_MOVE_EVENT,\n  end: SCROLL_END_EVENT,\n  stop: SCROLL_STOP_EVENT,\n  cancel: SCROLL_CANCEL_EVENT\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/scroll_view/ui.events.emitter.gesture.scroll.js"],"names":["eventsEngine","require","Class","abstract","eventUtils","GestureEmitter","registerEmitter","animationFrame","realDevice","compareVersions","SCROLL_INIT_EVENT","SCROLL_START_EVENT","SCROLL_MOVE_EVENT","SCROLL_END_EVENT","SCROLL_STOP_EVENT","SCROLL_CANCEL_EVENT","Locker","NAMESPACED_SCROLL_EVENT","ctor","that","_scroll","check","callback","dispose","TimeoutLocker","_prepare","_clearTimer","clearTimeout","_forget","setTimeout","WheelLocker","WHEEL_UNLOCK_TIMEOUT","_checkDirectionChanged","direction","e","directionChange","PointerLocker","POINTER_UNLOCK_TIMEOUT","ios8_greater","android5_greater","callBase","ScrollEmitter","INERTIA_TIMEOUT","VELOCITY_CALC_TIMEOUT","FRAME_DURATION","Math","validate","configure","data","_init","skipCheck","move","_start","_move","currentEventData","delta","eventDelta","_end","endEventDelta","velocity","x","y","velocityMultiplier","_stop","cancel","_clearSelection","_toggleGestureCover","emitter","events","module","init","start","end","stop"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scroll_view/ui.events.emitter.gesture.scroll.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar Class = require(\"../../core/class\");\r\nvar abstract = Class.abstract;\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar GestureEmitter = require(\"../../events/gesture/emitter.gesture\");\r\nvar registerEmitter = require(\"../../events/core/emitter_registrator\");\r\nvar animationFrame = require(\"../../animation/frame\");\r\nvar realDevice = require(\"../../core/devices\").real();\r\nvar compareVersions = require(\"../../core/utils/version\").compare;\r\nvar SCROLL_INIT_EVENT = \"dxscrollinit\";\r\nvar SCROLL_START_EVENT = \"dxscrollstart\";\r\nvar SCROLL_MOVE_EVENT = \"dxscroll\";\r\nvar SCROLL_END_EVENT = \"dxscrollend\";\r\nvar SCROLL_STOP_EVENT = \"dxscrollstop\";\r\nvar SCROLL_CANCEL_EVENT = \"dxscrollcancel\";\r\nvar Locker = Class.inherit(function() {\r\n    var NAMESPACED_SCROLL_EVENT = eventUtils.addNamespace(\"scroll\", \"dxScrollEmitter\");\r\n    return {\r\n        ctor: function(element) {\r\n            this._element = element;\r\n            this._locked = false;\r\n            var that = this;\r\n            this._proxiedScroll = function(e) {\r\n                that._scroll(e)\r\n            };\r\n            eventsEngine.on(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll)\r\n        },\r\n        _scroll: abstract,\r\n        check: function(e, callback) {\r\n            if (this._locked) {\r\n                callback()\r\n            }\r\n        },\r\n        dispose: function() {\r\n            eventsEngine.off(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll)\r\n        }\r\n    }\r\n}());\r\nvar TimeoutLocker = Locker.inherit(function() {\r\n    return {\r\n        ctor: function(element, timeout) {\r\n            this.callBase(element);\r\n            this._timeout = timeout\r\n        },\r\n        _scroll: function() {\r\n            this._prepare();\r\n            this._forget()\r\n        },\r\n        _prepare: function() {\r\n            if (this._timer) {\r\n                this._clearTimer()\r\n            }\r\n            this._locked = true\r\n        },\r\n        _clearTimer: function() {\r\n            clearTimeout(this._timer);\r\n            this._locked = false;\r\n            this._timer = null\r\n        },\r\n        _forget: function() {\r\n            var that = this;\r\n            this._timer = setTimeout(function() {\r\n                that._clearTimer()\r\n            }, this._timeout)\r\n        },\r\n        dispose: function() {\r\n            this.callBase();\r\n            this._clearTimer()\r\n        }\r\n    }\r\n}());\r\nvar WheelLocker = TimeoutLocker.inherit(function() {\r\n    var WHEEL_UNLOCK_TIMEOUT = 400;\r\n    return {\r\n        ctor: function(element) {\r\n            this.callBase(element, WHEEL_UNLOCK_TIMEOUT);\r\n            this._lastWheelDirection = null\r\n        },\r\n        check: function(e, callback) {\r\n            this._checkDirectionChanged(e);\r\n            this.callBase(e, callback)\r\n        },\r\n        _checkDirectionChanged: function(e) {\r\n            if (!eventUtils.isDxMouseWheelEvent(e)) {\r\n                this._lastWheelDirection = null;\r\n                return\r\n            }\r\n            var direction = e.shiftKey || false;\r\n            var directionChange = null !== this._lastWheelDirection && direction !== this._lastWheelDirection;\r\n            this._lastWheelDirection = direction;\r\n            this._locked = this._locked && !directionChange\r\n        }\r\n    }\r\n}());\r\nvar PointerLocker = TimeoutLocker.inherit(function() {\r\n    var POINTER_UNLOCK_TIMEOUT = 400;\r\n    return {\r\n        ctor: function(element) {\r\n            this.callBase(element, POINTER_UNLOCK_TIMEOUT)\r\n        }\r\n    }\r\n}());\r\n! function() {\r\n    var ios8_greater = realDevice.ios && compareVersions(realDevice.version, [8]) >= 0;\r\n    var android5_greater = realDevice.android && compareVersions(realDevice.version, [5]) >= 0;\r\n    if (!(ios8_greater || android5_greater)) {\r\n        return\r\n    }\r\n    PointerLocker = Locker.inherit(function() {\r\n        return {\r\n            _scroll: function() {\r\n                this._locked = true;\r\n                var that = this;\r\n                animationFrame.cancelAnimationFrame(this._scrollFrame);\r\n                this._scrollFrame = animationFrame.requestAnimationFrame(function() {\r\n                    that._locked = false\r\n                })\r\n            },\r\n            check: function(e, callback) {\r\n                animationFrame.cancelAnimationFrame(this._scrollFrame);\r\n                animationFrame.cancelAnimationFrame(this._checkFrame);\r\n                var that = this;\r\n                var callBase = this.callBase;\r\n                this._checkFrame = animationFrame.requestAnimationFrame(function() {\r\n                    callBase.call(that, e, callback);\r\n                    that._locked = false\r\n                })\r\n            },\r\n            dispose: function() {\r\n                this.callBase();\r\n                animationFrame.cancelAnimationFrame(this._scrollFrame);\r\n                animationFrame.cancelAnimationFrame(this._checkFrame)\r\n            }\r\n        }\r\n    }())\r\n}();\r\nvar ScrollEmitter = GestureEmitter.inherit(function() {\r\n    var INERTIA_TIMEOUT = 100;\r\n    var VELOCITY_CALC_TIMEOUT = 200;\r\n    var FRAME_DURATION = Math.round(1e3 / 60);\r\n    return {\r\n        ctor: function(element) {\r\n            this.callBase.apply(this, arguments);\r\n            this.direction = \"both\";\r\n            this._pointerLocker = new PointerLocker(element);\r\n            this._wheelLocker = new WheelLocker(element)\r\n        },\r\n        validate: function() {\r\n            return true\r\n        },\r\n        configure: function(data) {\r\n            if (data.scrollTarget) {\r\n                this._pointerLocker.dispose();\r\n                this._wheelLocker.dispose();\r\n                this._pointerLocker = new PointerLocker(data.scrollTarget);\r\n                this._wheelLocker = new WheelLocker(data.scrollTarget)\r\n            }\r\n            this.callBase(data)\r\n        },\r\n        _init: function(e) {\r\n            this._wheelLocker.check(e, function() {\r\n                if (eventUtils.isDxMouseWheelEvent(e)) {\r\n                    this._accept(e)\r\n                }\r\n            }.bind(this));\r\n            this._pointerLocker.check(e, function() {\r\n                var skipCheck = this.isNative && eventUtils.isMouseEvent(e);\r\n                if (!eventUtils.isDxMouseWheelEvent(e) && !skipCheck) {\r\n                    this._accept(e)\r\n                }\r\n            }.bind(this));\r\n            this._fireEvent(SCROLL_INIT_EVENT, e);\r\n            this._prevEventData = eventUtils.eventData(e)\r\n        },\r\n        move: function(e) {\r\n            this.callBase.apply(this, arguments);\r\n            e.isScrollingEvent = this.isNative || e.isScrollingEvent\r\n        },\r\n        _start: function(e) {\r\n            this._savedEventData = eventUtils.eventData(e);\r\n            this._fireEvent(SCROLL_START_EVENT, e);\r\n            this._prevEventData = eventUtils.eventData(e)\r\n        },\r\n        _move: function(e) {\r\n            var currentEventData = eventUtils.eventData(e);\r\n            this._fireEvent(SCROLL_MOVE_EVENT, e, {\r\n                delta: eventUtils.eventDelta(this._prevEventData, currentEventData)\r\n            });\r\n            var eventDelta = eventUtils.eventDelta(this._savedEventData, currentEventData);\r\n            if (eventDelta.time > VELOCITY_CALC_TIMEOUT) {\r\n                this._savedEventData = this._prevEventData\r\n            }\r\n            this._prevEventData = eventUtils.eventData(e)\r\n        },\r\n        _end: function(e) {\r\n            var endEventDelta = eventUtils.eventDelta(this._prevEventData, eventUtils.eventData(e));\r\n            var velocity = {\r\n                x: 0,\r\n                y: 0\r\n            };\r\n            if (!eventUtils.isDxMouseWheelEvent(e) && endEventDelta.time < INERTIA_TIMEOUT) {\r\n                var eventDelta = eventUtils.eventDelta(this._savedEventData, this._prevEventData);\r\n                var velocityMultiplier = FRAME_DURATION / eventDelta.time;\r\n                velocity = {\r\n                    x: eventDelta.x * velocityMultiplier,\r\n                    y: eventDelta.y * velocityMultiplier\r\n                }\r\n            }\r\n            this._fireEvent(SCROLL_END_EVENT, e, {\r\n                velocity: velocity\r\n            })\r\n        },\r\n        _stop: function(e) {\r\n            this._fireEvent(SCROLL_STOP_EVENT, e)\r\n        },\r\n        cancel: function(e) {\r\n            this.callBase.apply(this, arguments);\r\n            this._fireEvent(SCROLL_CANCEL_EVENT, e)\r\n        },\r\n        dispose: function() {\r\n            this.callBase.apply(this, arguments);\r\n            this._pointerLocker.dispose();\r\n            this._wheelLocker.dispose()\r\n        },\r\n        _clearSelection: function() {\r\n            if (this.isNative) {\r\n                return\r\n            }\r\n            return this.callBase.apply(this, arguments)\r\n        },\r\n        _toggleGestureCover: function() {\r\n            if (this.isNative) {\r\n                return\r\n            }\r\n            return this.callBase.apply(this, arguments)\r\n        }\r\n    }\r\n}());\r\nregisterEmitter({\r\n    emitter: ScrollEmitter,\r\n    events: [SCROLL_INIT_EVENT, SCROLL_START_EVENT, SCROLL_MOVE_EVENT, SCROLL_END_EVENT, SCROLL_STOP_EVENT, SCROLL_CANCEL_EVENT]\r\n});\r\nmodule.exports = {\r\n    init: SCROLL_INIT_EVENT,\r\n    start: SCROLL_START_EVENT,\r\n    move: SCROLL_MOVE_EVENT,\r\n    end: SCROLL_END_EVENT,\r\n    stop: SCROLL_STOP_EVENT,\r\n    cancel: SCROLL_CANCEL_EVENT\r\n};\r\n"]},"metadata":{},"sourceType":"module"}