{"ast":null,"code":"/**\r\n * DevExtreme (ui/responsive_box.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar commonUtils = require(\"../core/utils/common\");\n\nvar typeUtils = require(\"../core/utils/type\");\n\nvar errors = require(\"./widget/ui.errors\");\n\nvar windowUtils = require(\"../core/utils/window\");\n\nvar window = windowUtils.getWindow();\n\nvar iteratorUtils = require(\"../core/utils/iterator\");\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar Box = require(\"./box\");\n\nvar CollectionWidget = require(\"./collection/ui.collection_widget.edit\");\n\nvar RESPONSIVE_BOX_CLASS = \"dx-responsivebox\";\nvar SCREEN_SIZE_CLASS_PREFIX = RESPONSIVE_BOX_CLASS + \"-screen-\";\nvar BOX_ITEM_CLASS = \"dx-box-item\";\nvar BOX_ITEM_DATA_KEY = \"dxBoxItemData\";\nvar HD_SCREEN_WIDTH = 1920;\nvar ResponsiveBox = CollectionWidget.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      rows: [],\n      cols: [],\n      screenByWidth: null,\n      singleColumnScreen: \"\",\n      height: \"100%\",\n      width: \"100%\",\n      activeStateEnabled: false,\n      focusStateEnabled: false,\n      onItemStateChanged: void 0,\n      onLayoutChanged: null,\n      currentScreenFactor: void 0,\n      _layoutStrategy: void 0\n    });\n  },\n  _init: function _init() {\n    if (!this.option(\"screenByWidth\")) {\n      this._options.screenByWidth = windowUtils.defaultScreenFactorFunc;\n    }\n\n    this.callBase();\n\n    this._initLayoutChangedAction();\n  },\n  _initLayoutChangedAction: function _initLayoutChangedAction() {\n    this._layoutChangedAction = this._createActionByOption(\"onLayoutChanged\", {\n      excludeValidators: [\"disabled\", \"readonly\"]\n    });\n  },\n  _itemClass: function _itemClass() {\n    return BOX_ITEM_CLASS;\n  },\n  _itemDataKey: function _itemDataKey() {\n    return BOX_ITEM_DATA_KEY;\n  },\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n    this.$element().addClass(RESPONSIVE_BOX_CLASS);\n\n    this._updateRootBox();\n  },\n  _updateRootBox: function _updateRootBox() {\n    clearTimeout(this._updateTimer);\n    this._updateTimer = setTimeout(function () {\n      if (this._$root) {\n        eventsEngine.triggerHandler(this._$root, \"dxupdate\");\n      }\n    }.bind(this));\n  },\n  _renderItems: function _renderItems() {\n    this._setScreenSize();\n\n    this._screenItems = this._itemsByScreen();\n\n    this._prepareGrid();\n\n    this._spreadItems();\n\n    this._layoutItems();\n\n    this._linkNodeToItem();\n  },\n  _itemOptionChanged: function _itemOptionChanged(item) {\n    var $item = this._findItemElementByItem(item);\n\n    if (!$item.length) {\n      return;\n    }\n\n    this._refreshItem($item, item);\n\n    this._clearItemNodeTemplates();\n\n    this._update();\n  },\n  _setScreenSize: function _setScreenSize() {\n    var currentScreen = this._getCurrentScreen();\n\n    this._removeScreenSizeClass();\n\n    this.$element().addClass(SCREEN_SIZE_CLASS_PREFIX + currentScreen);\n    this.option(\"currentScreenFactor\", currentScreen);\n  },\n  _removeScreenSizeClass: function _removeScreenSizeClass() {\n    var currentScreenFactor = this.option(\"currentScreenFactor\");\n    currentScreenFactor && this.$element().removeClass(SCREEN_SIZE_CLASS_PREFIX + currentScreenFactor);\n  },\n  _prepareGrid: function _prepareGrid() {\n    var grid = this._grid = [];\n\n    this._prepareRowsAndCols();\n\n    iteratorUtils.each(this._rows, function () {\n      var row = [];\n      grid.push(row);\n      iteratorUtils.each(this._cols, function () {\n        row.push(this._createEmptyCell());\n      }.bind(this));\n    }.bind(this));\n  },\n  getSingleColumnRows: function getSingleColumnRows() {\n    var rows = this.option(\"rows\");\n    var screenItemsLength = this._screenItems.length;\n\n    if (rows.length) {\n      var filteredRows = this._filterByScreen(rows);\n\n      var result = [];\n\n      for (var i = 0; i < screenItemsLength; i++) {\n        var sizeConfig = this._defaultSizeConfig();\n\n        if (i < filteredRows.length && typeUtils.isDefined(filteredRows[i].shrink)) {\n          sizeConfig.shrink = filteredRows[i].shrink;\n        }\n\n        result.push(sizeConfig);\n      }\n\n      return result;\n    } else {\n      return this._defaultSizeConfig(screenItemsLength);\n    }\n  },\n  _prepareRowsAndCols: function _prepareRowsAndCols() {\n    if (this._isSingleColumnScreen()) {\n      this._prepareSingleColumnScreenItems();\n\n      this._rows = this.getSingleColumnRows();\n      this._cols = this._defaultSizeConfig(1);\n    } else {\n      this._rows = this._sizesByScreen(this.option(\"rows\"));\n      this._cols = this._sizesByScreen(this.option(\"cols\"));\n    }\n  },\n  _isSingleColumnScreen: function _isSingleColumnScreen() {\n    return this._screenRegExp().test(this.option(\"singleColumnScreen\")) || !this.option(\"rows\").length || !this.option(\"cols\").length;\n  },\n  _prepareSingleColumnScreenItems: function _prepareSingleColumnScreenItems() {\n    this._screenItems.sort(function (item1, item2) {\n      return item1.location.row - item2.location.row || item1.location.col - item2.location.col;\n    });\n\n    iteratorUtils.each(this._screenItems, function (index, item) {\n      extend(item.location, {\n        row: index,\n        col: 0,\n        rowspan: 1,\n        colspan: 1\n      });\n    });\n  },\n  _sizesByScreen: function _sizesByScreen(sizeConfigs) {\n    return iteratorUtils.map(this._filterByScreen(sizeConfigs), function (sizeConfig) {\n      return extend(this._defaultSizeConfig(), sizeConfig);\n    }.bind(this));\n  },\n  _createDefaultSizeConfig: function _createDefaultSizeConfig() {\n    return {\n      ratio: 1,\n      baseSize: 0,\n      minSize: 0,\n      maxSize: 0\n    };\n  },\n  _defaultSizeConfig: function _defaultSizeConfig(size) {\n    var defaultSizeConfig = this._createDefaultSizeConfig();\n\n    if (!arguments.length) {\n      return defaultSizeConfig;\n    }\n\n    var result = [];\n\n    for (var i = 0; i < size; i++) {\n      result.push(defaultSizeConfig);\n    }\n\n    return result;\n  },\n  _filterByScreen: function _filterByScreen(items) {\n    var screenRegExp = this._screenRegExp();\n\n    return commonUtils.grep(items, function (item) {\n      return !item.screen || screenRegExp.test(item.screen);\n    });\n  },\n  _screenRegExp: function _screenRegExp() {\n    var screen = this._getCurrentScreen();\n\n    return new RegExp(\"(^|\\\\s)\" + screen + \"($|\\\\s)\", \"i\");\n  },\n  _getCurrentScreen: function _getCurrentScreen() {\n    var width = this._screenWidth();\n\n    return this.option(\"screenByWidth\")(width);\n  },\n  _screenWidth: function _screenWidth() {\n    return windowUtils.hasWindow() ? $(window).width() : HD_SCREEN_WIDTH;\n  },\n  _createEmptyCell: function _createEmptyCell() {\n    return {\n      item: {},\n      location: {\n        colspan: 1,\n        rowspan: 1\n      }\n    };\n  },\n  _spreadItems: function _spreadItems() {\n    iteratorUtils.each(this._screenItems, function (_, itemInfo) {\n      var location = itemInfo.location || {};\n      var itemCol = location.col;\n      var itemRow = location.row;\n      var row = this._grid[itemRow];\n      var itemCell = row && row[itemCol];\n\n      this._occupyCells(itemCell, itemInfo);\n    }.bind(this));\n  },\n  _itemsByScreen: function _itemsByScreen() {\n    var _this = this;\n\n    return this.option(\"items\").reduce(function (result, item) {\n      var locations = item.location || {};\n      locations = typeUtils.isPlainObject(locations) ? [locations] : locations;\n\n      _this._filterByScreen(locations).forEach(function (location) {\n        result.push({\n          item: item,\n          location: extend({\n            rowspan: 1,\n            colspan: 1\n          }, location)\n        });\n      });\n\n      return result;\n    }, []);\n  },\n  _occupyCells: function _occupyCells(itemCell, itemInfo) {\n    if (!itemCell || this._isItemCellOccupied(itemCell, itemInfo)) {\n      return;\n    }\n\n    extend(itemCell, itemInfo);\n\n    this._markSpanningCell(itemCell);\n  },\n  _isItemCellOccupied: function _isItemCellOccupied(itemCell, itemInfo) {\n    if (!typeUtils.isEmptyObject(itemCell.item)) {\n      return true;\n    }\n\n    var result = false;\n\n    this._loopOverSpanning(itemInfo.location, function (cell) {\n      result = result || !typeUtils.isEmptyObject(cell.item);\n    });\n\n    return result;\n  },\n  _loopOverSpanning: function _loopOverSpanning(location, callback) {\n    var rowEnd = location.row + location.rowspan - 1;\n    var colEnd = location.col + location.colspan - 1;\n    var boundRowEnd = Math.min(rowEnd, this._rows.length - 1);\n    var boundColEnd = Math.min(colEnd, this._cols.length - 1);\n    location.rowspan -= rowEnd - boundRowEnd;\n    location.colspan -= colEnd - boundColEnd;\n\n    for (var rowIndex = location.row; rowIndex <= boundRowEnd; rowIndex++) {\n      for (var colIndex = location.col; colIndex <= boundColEnd; colIndex++) {\n        if (rowIndex !== location.row || colIndex !== location.col) {\n          callback(this._grid[rowIndex][colIndex]);\n        }\n      }\n    }\n  },\n  _markSpanningCell: function _markSpanningCell(itemCell) {\n    this._loopOverSpanning(itemCell.location, function (cell) {\n      extend(cell, {\n        item: itemCell.item,\n        spanningCell: itemCell\n      });\n    });\n  },\n  _linkNodeToItem: function _linkNodeToItem() {\n    iteratorUtils.each(this._itemElements(), function (_, itemNode) {\n      var $item = $(itemNode);\n      var item = $item.data(BOX_ITEM_DATA_KEY);\n\n      if (!item.box) {\n        item.node = $item.children();\n      }\n    });\n  },\n  _layoutItems: function _layoutItems() {\n    var rowsCount = this._grid.length;\n    var colsCount = rowsCount && this._grid[0].length;\n\n    if (!rowsCount && !colsCount) {\n      return;\n    }\n\n    var result = this._layoutBlock({\n      direction: \"col\",\n      row: {\n        start: 0,\n        end: rowsCount - 1\n      },\n      col: {\n        start: 0,\n        end: colsCount - 1\n      }\n    });\n\n    var rootBox = this._prepareBoxConfig(result.box || {\n      direction: \"row\",\n      items: [extend(result, {\n        ratio: 1\n      })]\n    });\n\n    extend(rootBox, this._rootBoxConfig(rootBox.items));\n    this._$root = $(\"<div>\").appendTo(this._itemContainer());\n\n    this._createComponent(this._$root, Box, rootBox);\n  },\n  _rootBoxConfig: function _rootBoxConfig(items) {\n    var rootItems = iteratorUtils.each(items, function (index, item) {\n      this._needApplyAutoBaseSize(item) && extend(item, {\n        baseSize: \"auto\"\n      });\n    }.bind(this));\n    return extend({\n      width: \"100%\",\n      height: \"100%\",\n      items: rootItems,\n      itemTemplate: this._getTemplateByOption(\"itemTemplate\"),\n      itemHoldTimeout: this.option(\"itemHoldTimeout\"),\n      onItemHold: this._createActionByOption(\"onItemHold\"),\n      onItemClick: this._createActionByOption(\"onItemClick\"),\n      onItemContextMenu: this._createActionByOption(\"onItemContextMenu\"),\n      onItemRendered: this._createActionByOption(\"onItemRendered\")\n    }, {\n      _layoutStrategy: this.option(\"_layoutStrategy\")\n    });\n  },\n  _needApplyAutoBaseSize: function _needApplyAutoBaseSize(item) {\n    return !item.baseSize && (!item.minSize || \"auto\" === item.minSize) && (!item.maxSize || \"auto\" === item.maxSize);\n  },\n  _prepareBoxConfig: function _prepareBoxConfig(config) {\n    return extend(config || {}, {\n      crossAlign: \"stretch\",\n      onItemStateChanged: this.option(\"onItemStateChanged\")\n    });\n  },\n  _layoutBlock: function _layoutBlock(options) {\n    if (this._isSingleItem(options)) {\n      return this._itemByCell(options.row.start, options.col.start);\n    }\n\n    return this._layoutDirection(options);\n  },\n  _isSingleItem: function _isSingleItem(options) {\n    var firstCellLocation = this._grid[options.row.start][options.col.start].location;\n    var isItemRowSpanned = options.row.end - options.row.start === firstCellLocation.rowspan - 1;\n    var isItemColSpanned = options.col.end - options.col.start === firstCellLocation.colspan - 1;\n    return isItemRowSpanned && isItemColSpanned;\n  },\n  _itemByCell: function _itemByCell(rowIndex, colIndex) {\n    var itemCell = this._grid[rowIndex][colIndex];\n    return itemCell.spanningCell ? null : itemCell.item;\n  },\n  _layoutDirection: function _layoutDirection(options) {\n    var items = [];\n    var direction = options.direction;\n\n    var crossDirection = this._crossDirection(direction);\n\n    var block;\n\n    while (block = this._nextBlock(options)) {\n      if (this._isBlockIndivisible(options.prevBlockOptions, block)) {\n        throw errors.Error(\"E1025\");\n      }\n\n      var item = this._layoutBlock({\n        direction: crossDirection,\n        row: block.row,\n        col: block.col,\n        prevBlockOptions: options\n      });\n\n      if (item) {\n        extend(item, this._blockSize(block, crossDirection));\n        items.push(item);\n      }\n\n      options[crossDirection].start = block[crossDirection].end + 1;\n    }\n\n    return {\n      box: this._prepareBoxConfig({\n        direction: direction,\n        items: items\n      })\n    };\n  },\n  _isBlockIndivisible: function _isBlockIndivisible(options, block) {\n    return options && options.col.start === block.col.start && options.col.end === block.col.end && options.row.start === block.row.start && options.row.end === block.row.end;\n  },\n  _crossDirection: function _crossDirection(direction) {\n    return \"col\" === direction ? \"row\" : \"col\";\n  },\n  _nextBlock: function _nextBlock(options) {\n    var direction = options.direction;\n\n    var crossDirection = this._crossDirection(direction);\n\n    var startIndex = options[direction].start;\n    var endIndex = options[direction].end;\n    var crossStartIndex = options[crossDirection].start;\n\n    if (crossStartIndex > options[crossDirection].end) {\n      return null;\n    }\n\n    var crossSpan = 1;\n\n    for (var crossIndex = crossStartIndex; crossIndex < crossStartIndex + crossSpan; crossIndex++) {\n      var lineCrossSpan = 1;\n\n      for (var index = startIndex; index <= endIndex; index++) {\n        var cell = this._cellByDirection(direction, index, crossIndex);\n\n        lineCrossSpan = Math.max(lineCrossSpan, cell.location[crossDirection + \"span\"]);\n      }\n\n      var lineCrossEndIndex = crossIndex + lineCrossSpan;\n      var crossEndIndex = crossStartIndex + crossSpan;\n\n      if (lineCrossEndIndex > crossEndIndex) {\n        crossSpan += lineCrossEndIndex - crossEndIndex;\n      }\n    }\n\n    var result = {};\n    result[direction] = {\n      start: startIndex,\n      end: endIndex\n    };\n    result[crossDirection] = {\n      start: crossStartIndex,\n      end: crossStartIndex + crossSpan - 1\n    };\n    return result;\n  },\n  _cellByDirection: function _cellByDirection(direction, index, crossIndex) {\n    return \"col\" === direction ? this._grid[crossIndex][index] : this._grid[index][crossIndex];\n  },\n  _blockSize: function _blockSize(block, direction) {\n    var sizeConfigs = \"row\" === direction ? this._rows : this._cols;\n    var result = extend(this._createDefaultSizeConfig(), {\n      ratio: 0\n    });\n\n    for (var index = block[direction].start; index <= block[direction].end; index++) {\n      var sizeConfig = sizeConfigs[index];\n      result.ratio += sizeConfig.ratio;\n      result.baseSize += sizeConfig.baseSize;\n      result.minSize += sizeConfig.minSize;\n      result.maxSize += sizeConfig.maxSize;\n\n      if (typeUtils.isDefined(sizeConfig.shrink)) {\n        result.shrink = sizeConfig.shrink;\n      }\n    }\n\n    result.minSize = result.minSize ? result.minSize : \"auto\";\n    result.maxSize = result.maxSize ? result.maxSize : \"auto\";\n    this._isSingleColumnScreen() && (result.baseSize = \"auto\");\n    return result;\n  },\n  _update: function _update() {\n    var $existingRoot = this._$root;\n\n    this._renderItems();\n\n    $existingRoot && $existingRoot.detach();\n\n    this._saveAssistantRoot($existingRoot);\n\n    this._layoutChangedAction();\n\n    this._updateRootBox();\n  },\n  _saveAssistantRoot: function _saveAssistantRoot($root) {\n    this._assistantRoots = this._assistantRoots || [];\n\n    this._assistantRoots.push($root);\n  },\n  _dispose: function _dispose() {\n    clearTimeout(this._updateTimer);\n\n    this._clearItemNodeTemplates();\n\n    this._cleanUnusedRoots();\n\n    this.callBase.apply(this, arguments);\n  },\n  _cleanUnusedRoots: function _cleanUnusedRoots() {\n    if (!this._assistantRoots) {\n      return;\n    }\n\n    iteratorUtils.each(this._assistantRoots, function (_, item) {\n      $(item).remove();\n    });\n  },\n  _clearItemNodeTemplates: function _clearItemNodeTemplates() {\n    iteratorUtils.each(this.option(\"items\"), function () {\n      delete this.node;\n    });\n  },\n  _toggleVisibility: function _toggleVisibility(visible) {\n    this.callBase(visible);\n\n    if (visible) {\n      this._updateRootBox();\n    }\n  },\n  _attachClickEvent: commonUtils.noop,\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"rows\":\n      case \"cols\":\n      case \"screenByWidth\":\n      case \"_layoutStrategy\":\n      case \"singleColumnScreen\":\n        this._clearItemNodeTemplates();\n\n        this._invalidate();\n\n        break;\n\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n\n        this._update();\n\n        break;\n\n      case \"onLayoutChanged\":\n        this._initLayoutChangedAction();\n\n        break;\n\n      case \"itemTemplate\":\n        this._clearItemNodeTemplates();\n\n        this.callBase(args);\n        break;\n\n      case \"currentScreenFactor\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    if (this._getCurrentScreen() !== this.option(\"currentScreenFactor\")) {\n      this._update();\n    }\n  },\n  repaint: function repaint() {\n    this._update();\n  }\n});\nregisterComponent(\"dxResponsiveBox\", ResponsiveBox);\nmodule.exports = ResponsiveBox;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/responsive_box.js"],"names":["$","require","eventsEngine","commonUtils","typeUtils","errors","windowUtils","window","iteratorUtils","extend","registerComponent","Box","CollectionWidget","RESPONSIVE_BOX_CLASS","SCREEN_SIZE_CLASS_PREFIX","BOX_ITEM_CLASS","BOX_ITEM_DATA_KEY","HD_SCREEN_WIDTH","ResponsiveBox","_getDefaultOptions","rows","cols","screenByWidth","singleColumnScreen","height","width","activeStateEnabled","focusStateEnabled","onItemStateChanged","onLayoutChanged","currentScreenFactor","_layoutStrategy","_init","_initLayoutChangedAction","excludeValidators","_itemClass","_itemDataKey","_initMarkup","_updateRootBox","clearTimeout","setTimeout","_renderItems","_itemOptionChanged","$item","_setScreenSize","currentScreen","_removeScreenSizeClass","_prepareGrid","grid","row","getSingleColumnRows","screenItemsLength","filteredRows","result","i","sizeConfig","_prepareRowsAndCols","_isSingleColumnScreen","_prepareSingleColumnScreenItems","item1","item2","item","col","rowspan","colspan","_sizesByScreen","_createDefaultSizeConfig","ratio","baseSize","minSize","maxSize","_defaultSizeConfig","defaultSizeConfig","arguments","_filterByScreen","screenRegExp","_screenRegExp","screen","_getCurrentScreen","_screenWidth","_createEmptyCell","location","_spreadItems","itemInfo","itemCol","itemRow","itemCell","_itemsByScreen","_this","locations","_occupyCells","_isItemCellOccupied","cell","_loopOverSpanning","rowEnd","colEnd","boundRowEnd","Math","boundColEnd","rowIndex","colIndex","callback","_markSpanningCell","spanningCell","_linkNodeToItem","_layoutItems","rowsCount","colsCount","direction","start","end","rootBox","items","_rootBoxConfig","rootItems","itemTemplate","itemHoldTimeout","onItemHold","onItemClick","onItemContextMenu","onItemRendered","_needApplyAutoBaseSize","_prepareBoxConfig","config","crossAlign","_layoutBlock","options","_isSingleItem","firstCellLocation","isItemRowSpanned","isItemColSpanned","_itemByCell","_layoutDirection","crossDirection","block","prevBlockOptions","box","_isBlockIndivisible","_crossDirection","_nextBlock","startIndex","endIndex","crossStartIndex","crossSpan","crossIndex","lineCrossSpan","index","lineCrossEndIndex","crossEndIndex","_cellByDirection","_blockSize","sizeConfigs","_update","$existingRoot","_saveAssistantRoot","_dispose","_cleanUnusedRoots","_clearItemNodeTemplates","_toggleVisibility","_attachClickEvent","_optionChanged","args","_dimensionChanged","repaint","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/responsive_box.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../core/renderer\");\r\nvar eventsEngine = require(\"../events/core/events_engine\");\r\nvar commonUtils = require(\"../core/utils/common\");\r\nvar typeUtils = require(\"../core/utils/type\");\r\nvar errors = require(\"./widget/ui.errors\");\r\nvar windowUtils = require(\"../core/utils/window\");\r\nvar window = windowUtils.getWindow();\r\nvar iteratorUtils = require(\"../core/utils/iterator\");\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar registerComponent = require(\"../core/component_registrator\");\r\nvar Box = require(\"./box\");\r\nvar CollectionWidget = require(\"./collection/ui.collection_widget.edit\");\r\nvar RESPONSIVE_BOX_CLASS = \"dx-responsivebox\";\r\nvar SCREEN_SIZE_CLASS_PREFIX = RESPONSIVE_BOX_CLASS + \"-screen-\";\r\nvar BOX_ITEM_CLASS = \"dx-box-item\";\r\nvar BOX_ITEM_DATA_KEY = \"dxBoxItemData\";\r\nvar HD_SCREEN_WIDTH = 1920;\r\nvar ResponsiveBox = CollectionWidget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            rows: [],\r\n            cols: [],\r\n            screenByWidth: null,\r\n            singleColumnScreen: \"\",\r\n            height: \"100%\",\r\n            width: \"100%\",\r\n            activeStateEnabled: false,\r\n            focusStateEnabled: false,\r\n            onItemStateChanged: void 0,\r\n            onLayoutChanged: null,\r\n            currentScreenFactor: void 0,\r\n            _layoutStrategy: void 0\r\n        })\r\n    },\r\n    _init: function() {\r\n        if (!this.option(\"screenByWidth\")) {\r\n            this._options.screenByWidth = windowUtils.defaultScreenFactorFunc\r\n        }\r\n        this.callBase();\r\n        this._initLayoutChangedAction()\r\n    },\r\n    _initLayoutChangedAction: function() {\r\n        this._layoutChangedAction = this._createActionByOption(\"onLayoutChanged\", {\r\n            excludeValidators: [\"disabled\", \"readonly\"]\r\n        })\r\n    },\r\n    _itemClass: function() {\r\n        return BOX_ITEM_CLASS\r\n    },\r\n    _itemDataKey: function() {\r\n        return BOX_ITEM_DATA_KEY\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this.$element().addClass(RESPONSIVE_BOX_CLASS);\r\n        this._updateRootBox()\r\n    },\r\n    _updateRootBox: function() {\r\n        clearTimeout(this._updateTimer);\r\n        this._updateTimer = setTimeout(function() {\r\n            if (this._$root) {\r\n                eventsEngine.triggerHandler(this._$root, \"dxupdate\")\r\n            }\r\n        }.bind(this))\r\n    },\r\n    _renderItems: function() {\r\n        this._setScreenSize();\r\n        this._screenItems = this._itemsByScreen();\r\n        this._prepareGrid();\r\n        this._spreadItems();\r\n        this._layoutItems();\r\n        this._linkNodeToItem()\r\n    },\r\n    _itemOptionChanged: function(item) {\r\n        var $item = this._findItemElementByItem(item);\r\n        if (!$item.length) {\r\n            return\r\n        }\r\n        this._refreshItem($item, item);\r\n        this._clearItemNodeTemplates();\r\n        this._update()\r\n    },\r\n    _setScreenSize: function() {\r\n        var currentScreen = this._getCurrentScreen();\r\n        this._removeScreenSizeClass();\r\n        this.$element().addClass(SCREEN_SIZE_CLASS_PREFIX + currentScreen);\r\n        this.option(\"currentScreenFactor\", currentScreen)\r\n    },\r\n    _removeScreenSizeClass: function() {\r\n        var currentScreenFactor = this.option(\"currentScreenFactor\");\r\n        currentScreenFactor && this.$element().removeClass(SCREEN_SIZE_CLASS_PREFIX + currentScreenFactor)\r\n    },\r\n    _prepareGrid: function() {\r\n        var grid = this._grid = [];\r\n        this._prepareRowsAndCols();\r\n        iteratorUtils.each(this._rows, function() {\r\n            var row = [];\r\n            grid.push(row);\r\n            iteratorUtils.each(this._cols, function() {\r\n                row.push(this._createEmptyCell())\r\n            }.bind(this))\r\n        }.bind(this))\r\n    },\r\n    getSingleColumnRows: function() {\r\n        var rows = this.option(\"rows\");\r\n        var screenItemsLength = this._screenItems.length;\r\n        if (rows.length) {\r\n            var filteredRows = this._filterByScreen(rows);\r\n            var result = [];\r\n            for (var i = 0; i < screenItemsLength; i++) {\r\n                var sizeConfig = this._defaultSizeConfig();\r\n                if (i < filteredRows.length && typeUtils.isDefined(filteredRows[i].shrink)) {\r\n                    sizeConfig.shrink = filteredRows[i].shrink\r\n                }\r\n                result.push(sizeConfig)\r\n            }\r\n            return result\r\n        } else {\r\n            return this._defaultSizeConfig(screenItemsLength)\r\n        }\r\n    },\r\n    _prepareRowsAndCols: function() {\r\n        if (this._isSingleColumnScreen()) {\r\n            this._prepareSingleColumnScreenItems();\r\n            this._rows = this.getSingleColumnRows();\r\n            this._cols = this._defaultSizeConfig(1)\r\n        } else {\r\n            this._rows = this._sizesByScreen(this.option(\"rows\"));\r\n            this._cols = this._sizesByScreen(this.option(\"cols\"))\r\n        }\r\n    },\r\n    _isSingleColumnScreen: function() {\r\n        return this._screenRegExp().test(this.option(\"singleColumnScreen\")) || !this.option(\"rows\").length || !this.option(\"cols\").length\r\n    },\r\n    _prepareSingleColumnScreenItems: function() {\r\n        this._screenItems.sort(function(item1, item2) {\r\n            return item1.location.row - item2.location.row || item1.location.col - item2.location.col\r\n        });\r\n        iteratorUtils.each(this._screenItems, function(index, item) {\r\n            extend(item.location, {\r\n                row: index,\r\n                col: 0,\r\n                rowspan: 1,\r\n                colspan: 1\r\n            })\r\n        })\r\n    },\r\n    _sizesByScreen: function(sizeConfigs) {\r\n        return iteratorUtils.map(this._filterByScreen(sizeConfigs), function(sizeConfig) {\r\n            return extend(this._defaultSizeConfig(), sizeConfig)\r\n        }.bind(this))\r\n    },\r\n    _createDefaultSizeConfig: function() {\r\n        return {\r\n            ratio: 1,\r\n            baseSize: 0,\r\n            minSize: 0,\r\n            maxSize: 0\r\n        }\r\n    },\r\n    _defaultSizeConfig: function(size) {\r\n        var defaultSizeConfig = this._createDefaultSizeConfig();\r\n        if (!arguments.length) {\r\n            return defaultSizeConfig\r\n        }\r\n        var result = [];\r\n        for (var i = 0; i < size; i++) {\r\n            result.push(defaultSizeConfig)\r\n        }\r\n        return result\r\n    },\r\n    _filterByScreen: function(items) {\r\n        var screenRegExp = this._screenRegExp();\r\n        return commonUtils.grep(items, function(item) {\r\n            return !item.screen || screenRegExp.test(item.screen)\r\n        })\r\n    },\r\n    _screenRegExp: function() {\r\n        var screen = this._getCurrentScreen();\r\n        return new RegExp(\"(^|\\\\s)\" + screen + \"($|\\\\s)\", \"i\")\r\n    },\r\n    _getCurrentScreen: function() {\r\n        var width = this._screenWidth();\r\n        return this.option(\"screenByWidth\")(width)\r\n    },\r\n    _screenWidth: function() {\r\n        return windowUtils.hasWindow() ? $(window).width() : HD_SCREEN_WIDTH\r\n    },\r\n    _createEmptyCell: function() {\r\n        return {\r\n            item: {},\r\n            location: {\r\n                colspan: 1,\r\n                rowspan: 1\r\n            }\r\n        }\r\n    },\r\n    _spreadItems: function() {\r\n        iteratorUtils.each(this._screenItems, function(_, itemInfo) {\r\n            var location = itemInfo.location || {};\r\n            var itemCol = location.col;\r\n            var itemRow = location.row;\r\n            var row = this._grid[itemRow];\r\n            var itemCell = row && row[itemCol];\r\n            this._occupyCells(itemCell, itemInfo)\r\n        }.bind(this))\r\n    },\r\n    _itemsByScreen: function() {\r\n        var _this = this;\r\n        return this.option(\"items\").reduce(function(result, item) {\r\n            var locations = item.location || {};\r\n            locations = typeUtils.isPlainObject(locations) ? [locations] : locations;\r\n            _this._filterByScreen(locations).forEach(function(location) {\r\n                result.push({\r\n                    item: item,\r\n                    location: extend({\r\n                        rowspan: 1,\r\n                        colspan: 1\r\n                    }, location)\r\n                })\r\n            });\r\n            return result\r\n        }, [])\r\n    },\r\n    _occupyCells: function(itemCell, itemInfo) {\r\n        if (!itemCell || this._isItemCellOccupied(itemCell, itemInfo)) {\r\n            return\r\n        }\r\n        extend(itemCell, itemInfo);\r\n        this._markSpanningCell(itemCell)\r\n    },\r\n    _isItemCellOccupied: function(itemCell, itemInfo) {\r\n        if (!typeUtils.isEmptyObject(itemCell.item)) {\r\n            return true\r\n        }\r\n        var result = false;\r\n        this._loopOverSpanning(itemInfo.location, function(cell) {\r\n            result = result || !typeUtils.isEmptyObject(cell.item)\r\n        });\r\n        return result\r\n    },\r\n    _loopOverSpanning: function(location, callback) {\r\n        var rowEnd = location.row + location.rowspan - 1;\r\n        var colEnd = location.col + location.colspan - 1;\r\n        var boundRowEnd = Math.min(rowEnd, this._rows.length - 1);\r\n        var boundColEnd = Math.min(colEnd, this._cols.length - 1);\r\n        location.rowspan -= rowEnd - boundRowEnd;\r\n        location.colspan -= colEnd - boundColEnd;\r\n        for (var rowIndex = location.row; rowIndex <= boundRowEnd; rowIndex++) {\r\n            for (var colIndex = location.col; colIndex <= boundColEnd; colIndex++) {\r\n                if (rowIndex !== location.row || colIndex !== location.col) {\r\n                    callback(this._grid[rowIndex][colIndex])\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _markSpanningCell: function(itemCell) {\r\n        this._loopOverSpanning(itemCell.location, function(cell) {\r\n            extend(cell, {\r\n                item: itemCell.item,\r\n                spanningCell: itemCell\r\n            })\r\n        })\r\n    },\r\n    _linkNodeToItem: function() {\r\n        iteratorUtils.each(this._itemElements(), function(_, itemNode) {\r\n            var $item = $(itemNode);\r\n            var item = $item.data(BOX_ITEM_DATA_KEY);\r\n            if (!item.box) {\r\n                item.node = $item.children()\r\n            }\r\n        })\r\n    },\r\n    _layoutItems: function() {\r\n        var rowsCount = this._grid.length;\r\n        var colsCount = rowsCount && this._grid[0].length;\r\n        if (!rowsCount && !colsCount) {\r\n            return\r\n        }\r\n        var result = this._layoutBlock({\r\n            direction: \"col\",\r\n            row: {\r\n                start: 0,\r\n                end: rowsCount - 1\r\n            },\r\n            col: {\r\n                start: 0,\r\n                end: colsCount - 1\r\n            }\r\n        });\r\n        var rootBox = this._prepareBoxConfig(result.box || {\r\n            direction: \"row\",\r\n            items: [extend(result, {\r\n                ratio: 1\r\n            })]\r\n        });\r\n        extend(rootBox, this._rootBoxConfig(rootBox.items));\r\n        this._$root = $(\"<div>\").appendTo(this._itemContainer());\r\n        this._createComponent(this._$root, Box, rootBox)\r\n    },\r\n    _rootBoxConfig: function(items) {\r\n        var rootItems = iteratorUtils.each(items, function(index, item) {\r\n            this._needApplyAutoBaseSize(item) && extend(item, {\r\n                baseSize: \"auto\"\r\n            })\r\n        }.bind(this));\r\n        return extend({\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            items: rootItems,\r\n            itemTemplate: this._getTemplateByOption(\"itemTemplate\"),\r\n            itemHoldTimeout: this.option(\"itemHoldTimeout\"),\r\n            onItemHold: this._createActionByOption(\"onItemHold\"),\r\n            onItemClick: this._createActionByOption(\"onItemClick\"),\r\n            onItemContextMenu: this._createActionByOption(\"onItemContextMenu\"),\r\n            onItemRendered: this._createActionByOption(\"onItemRendered\")\r\n        }, {\r\n            _layoutStrategy: this.option(\"_layoutStrategy\")\r\n        })\r\n    },\r\n    _needApplyAutoBaseSize: function(item) {\r\n        return !item.baseSize && (!item.minSize || \"auto\" === item.minSize) && (!item.maxSize || \"auto\" === item.maxSize)\r\n    },\r\n    _prepareBoxConfig: function(config) {\r\n        return extend(config || {}, {\r\n            crossAlign: \"stretch\",\r\n            onItemStateChanged: this.option(\"onItemStateChanged\")\r\n        })\r\n    },\r\n    _layoutBlock: function(options) {\r\n        if (this._isSingleItem(options)) {\r\n            return this._itemByCell(options.row.start, options.col.start)\r\n        }\r\n        return this._layoutDirection(options)\r\n    },\r\n    _isSingleItem: function(options) {\r\n        var firstCellLocation = this._grid[options.row.start][options.col.start].location;\r\n        var isItemRowSpanned = options.row.end - options.row.start === firstCellLocation.rowspan - 1;\r\n        var isItemColSpanned = options.col.end - options.col.start === firstCellLocation.colspan - 1;\r\n        return isItemRowSpanned && isItemColSpanned\r\n    },\r\n    _itemByCell: function(rowIndex, colIndex) {\r\n        var itemCell = this._grid[rowIndex][colIndex];\r\n        return itemCell.spanningCell ? null : itemCell.item\r\n    },\r\n    _layoutDirection: function(options) {\r\n        var items = [];\r\n        var direction = options.direction;\r\n        var crossDirection = this._crossDirection(direction);\r\n        var block;\r\n        while (block = this._nextBlock(options)) {\r\n            if (this._isBlockIndivisible(options.prevBlockOptions, block)) {\r\n                throw errors.Error(\"E1025\")\r\n            }\r\n            var item = this._layoutBlock({\r\n                direction: crossDirection,\r\n                row: block.row,\r\n                col: block.col,\r\n                prevBlockOptions: options\r\n            });\r\n            if (item) {\r\n                extend(item, this._blockSize(block, crossDirection));\r\n                items.push(item)\r\n            }\r\n            options[crossDirection].start = block[crossDirection].end + 1\r\n        }\r\n        return {\r\n            box: this._prepareBoxConfig({\r\n                direction: direction,\r\n                items: items\r\n            })\r\n        }\r\n    },\r\n    _isBlockIndivisible: function(options, block) {\r\n        return options && options.col.start === block.col.start && options.col.end === block.col.end && options.row.start === block.row.start && options.row.end === block.row.end\r\n    },\r\n    _crossDirection: function(direction) {\r\n        return \"col\" === direction ? \"row\" : \"col\"\r\n    },\r\n    _nextBlock: function(options) {\r\n        var direction = options.direction;\r\n        var crossDirection = this._crossDirection(direction);\r\n        var startIndex = options[direction].start;\r\n        var endIndex = options[direction].end;\r\n        var crossStartIndex = options[crossDirection].start;\r\n        if (crossStartIndex > options[crossDirection].end) {\r\n            return null\r\n        }\r\n        var crossSpan = 1;\r\n        for (var crossIndex = crossStartIndex; crossIndex < crossStartIndex + crossSpan; crossIndex++) {\r\n            var lineCrossSpan = 1;\r\n            for (var index = startIndex; index <= endIndex; index++) {\r\n                var cell = this._cellByDirection(direction, index, crossIndex);\r\n                lineCrossSpan = Math.max(lineCrossSpan, cell.location[crossDirection + \"span\"])\r\n            }\r\n            var lineCrossEndIndex = crossIndex + lineCrossSpan;\r\n            var crossEndIndex = crossStartIndex + crossSpan;\r\n            if (lineCrossEndIndex > crossEndIndex) {\r\n                crossSpan += lineCrossEndIndex - crossEndIndex\r\n            }\r\n        }\r\n        var result = {};\r\n        result[direction] = {\r\n            start: startIndex,\r\n            end: endIndex\r\n        };\r\n        result[crossDirection] = {\r\n            start: crossStartIndex,\r\n            end: crossStartIndex + crossSpan - 1\r\n        };\r\n        return result\r\n    },\r\n    _cellByDirection: function(direction, index, crossIndex) {\r\n        return \"col\" === direction ? this._grid[crossIndex][index] : this._grid[index][crossIndex]\r\n    },\r\n    _blockSize: function(block, direction) {\r\n        var sizeConfigs = \"row\" === direction ? this._rows : this._cols;\r\n        var result = extend(this._createDefaultSizeConfig(), {\r\n            ratio: 0\r\n        });\r\n        for (var index = block[direction].start; index <= block[direction].end; index++) {\r\n            var sizeConfig = sizeConfigs[index];\r\n            result.ratio += sizeConfig.ratio;\r\n            result.baseSize += sizeConfig.baseSize;\r\n            result.minSize += sizeConfig.minSize;\r\n            result.maxSize += sizeConfig.maxSize;\r\n            if (typeUtils.isDefined(sizeConfig.shrink)) {\r\n                result.shrink = sizeConfig.shrink\r\n            }\r\n        }\r\n        result.minSize = result.minSize ? result.minSize : \"auto\";\r\n        result.maxSize = result.maxSize ? result.maxSize : \"auto\";\r\n        this._isSingleColumnScreen() && (result.baseSize = \"auto\");\r\n        return result\r\n    },\r\n    _update: function() {\r\n        var $existingRoot = this._$root;\r\n        this._renderItems();\r\n        $existingRoot && $existingRoot.detach();\r\n        this._saveAssistantRoot($existingRoot);\r\n        this._layoutChangedAction();\r\n        this._updateRootBox()\r\n    },\r\n    _saveAssistantRoot: function($root) {\r\n        this._assistantRoots = this._assistantRoots || [];\r\n        this._assistantRoots.push($root)\r\n    },\r\n    _dispose: function() {\r\n        clearTimeout(this._updateTimer);\r\n        this._clearItemNodeTemplates();\r\n        this._cleanUnusedRoots();\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _cleanUnusedRoots: function() {\r\n        if (!this._assistantRoots) {\r\n            return\r\n        }\r\n        iteratorUtils.each(this._assistantRoots, function(_, item) {\r\n            $(item).remove()\r\n        })\r\n    },\r\n    _clearItemNodeTemplates: function() {\r\n        iteratorUtils.each(this.option(\"items\"), function() {\r\n            delete this.node\r\n        })\r\n    },\r\n    _toggleVisibility: function(visible) {\r\n        this.callBase(visible);\r\n        if (visible) {\r\n            this._updateRootBox()\r\n        }\r\n    },\r\n    _attachClickEvent: commonUtils.noop,\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"rows\":\r\n            case \"cols\":\r\n            case \"screenByWidth\":\r\n            case \"_layoutStrategy\":\r\n            case \"singleColumnScreen\":\r\n                this._clearItemNodeTemplates();\r\n                this._invalidate();\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                this._update();\r\n                break;\r\n            case \"onLayoutChanged\":\r\n                this._initLayoutChangedAction();\r\n                break;\r\n            case \"itemTemplate\":\r\n                this._clearItemNodeTemplates();\r\n                this.callBase(args);\r\n                break;\r\n            case \"currentScreenFactor\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        if (this._getCurrentScreen() !== this.option(\"currentScreenFactor\")) {\r\n            this._update()\r\n        }\r\n    },\r\n    repaint: function() {\r\n        this._update()\r\n    }\r\n});\r\nregisterComponent(\"dxResponsiveBox\", ResponsiveBox);\r\nmodule.exports = ResponsiveBox;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"module"}