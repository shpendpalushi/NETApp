{"ast":null,"code":"/**\r\n * DevExtreme (viz/funnel/tooltip.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nfunction getCoords(figureCoords, renderer) {\n  var offset = renderer.getRootOffset();\n  return [(figureCoords[0] + figureCoords[2]) / 2 + offset.left, (figureCoords[1] + figureCoords[5]) / 2 + offset.top];\n}\n\nexports.plugin = {\n  name: \"funnel-tooltip\",\n  init: noop,\n  dispose: noop,\n  extenders: {\n    _buildNodes: function _buildNodes() {\n      this.hideTooltip();\n    },\n    _change_TILING: function _change_TILING() {\n      if (this._tooltipIndex >= 0) {\n        this._moveTooltip(this._items[this._tooltipIndex]);\n      }\n    }\n  },\n  members: {\n    hideTooltip: function hideTooltip() {\n      if (this._tooltipIndex >= 0) {\n        this._tooltipIndex = -1;\n\n        this._tooltip.hide();\n      }\n    },\n    _moveTooltip: function _moveTooltip(item, coords) {\n      var xy = coords || item.coords && getCoords(item.coords, this._renderer) || [-1e3, -1e3];\n\n      this._tooltip.move(xy[0], xy[1], 0);\n    },\n    _showTooltip: function _showTooltip(index, coords) {\n      var that = this;\n      var tooltip = that._tooltip;\n      var item = that._items[index];\n      var state = that._tooltipIndex === index || tooltip.show({\n        value: item.value,\n        valueText: tooltip.formatValue(item.value),\n        percentText: tooltip.formatValue(item.percent, \"percent\"),\n        percent: item.percent,\n        item: item\n      }, {\n        x: 0,\n        y: 0,\n        offset: 0\n      }, {\n        item: item\n      });\n\n      if (state) {\n        that._moveTooltip(item, coords);\n      } else {\n        tooltip.hide();\n      }\n\n      that._tooltipIndex = state ? index : -1;\n    }\n  },\n  customize: function customize(constructor) {\n    constructor.addPlugin(require(\"../core/tooltip\").plugin);\n  }\n};","map":null,"metadata":{},"sourceType":"script"}