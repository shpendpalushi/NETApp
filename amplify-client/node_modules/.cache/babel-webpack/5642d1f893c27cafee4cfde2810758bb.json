{"ast":null,"code":"/**\r\n * DevExtreme (viz/gauges/base_range_container.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar iterateUtils = require(\"../../core/utils/iterator\");\n\nvar BaseElement = require(\"./base_indicators\").BaseElement;\n\nvar _Number = Number;\nvar _abs = Math.abs;\n\nvar _isString = require(\"../../core/utils/type\").isString;\n\nvar _isArray = Array.isArray;\nvar _isFinite = isFinite;\nvar _each = iterateUtils.each;\nvar BaseRangeContainer = BaseElement.inherit({\n  _init: function _init() {\n    this._root = this._renderer.g().attr({\n      \"class\": \"dxg-range-container\"\n    }).linkOn(this._container, \"range-container\");\n  },\n  _dispose: function _dispose() {\n    this._root.linkOff();\n  },\n  clean: function clean() {\n    this._root.linkRemove().clear();\n\n    this._options = this.enabled = null;\n    return this;\n  },\n  _getRanges: function _getRanges() {\n    var that = this;\n    var options = that._options;\n    var translator = that._translator;\n    var totalStart = translator.getDomain()[0];\n    var totalEnd = translator.getDomain()[1];\n    var totalDelta = totalEnd - totalStart;\n    var isNotEmptySegment = totalDelta >= 0 ? isNotEmptySegmentAsc : isNotEmptySegmentDesc;\n    var subtractSegment = totalDelta >= 0 ? subtractSegmentAsc : subtractSegmentDesc;\n    var list = [];\n    var ranges = [];\n    var backgroundRanges = [{\n      start: totalStart,\n      end: totalEnd\n    }];\n    var threshold = _abs(totalDelta) / 1e4;\n    var palette;\n    var backgroundColor = _isString(options.backgroundColor) ? options.backgroundColor : \"none\";\n    var width = options.width || {};\n\n    var startWidth = _Number(width > 0 ? width : width.start);\n\n    var endWidth = _Number(width > 0 ? width : width.end);\n\n    var deltaWidth = endWidth - startWidth;\n\n    if (void 0 !== options.ranges && !_isArray(options.ranges)) {\n      return null;\n    }\n\n    if (!(startWidth >= 0 && endWidth >= 0 && startWidth + endWidth > 0)) {\n      return null;\n    }\n\n    list = (_isArray(options.ranges) ? options.ranges : []).reduce(function (result, rangeOptions, i) {\n      rangeOptions = rangeOptions || {};\n      var start = translator.adjust(rangeOptions.startValue);\n      var end = translator.adjust(rangeOptions.endValue);\n\n      if (_isFinite(start) && _isFinite(end) && isNotEmptySegment(start, end, threshold)) {\n        result.push({\n          start: start,\n          end: end,\n          color: rangeOptions.color,\n          classIndex: i\n        });\n      }\n\n      return result;\n    }, []);\n    palette = that._themeManager.createPalette(options.palette, {\n      type: \"indicatingSet\",\n      extensionMode: options.paletteExtensionMode,\n      keepLastColorInEnd: true,\n      count: list.length\n    });\n\n    _each(list, function (_, item) {\n      var paletteColor = palette.getNextColor();\n      item.color = _isString(item.color) && item.color || paletteColor || \"none\";\n      item.className = \"dxg-range dxg-range-\" + item.classIndex;\n      delete item.classIndex;\n    });\n\n    _each(list, function (_, item) {\n      var i;\n      var ii;\n      var sub;\n      var subs;\n      var range;\n      var newRanges = [];\n      var newBackgroundRanges = [];\n\n      for (i = 0, ii = ranges.length; i < ii; ++i) {\n        range = ranges[i];\n        subs = subtractSegment(range.start, range.end, item.start, item.end);\n        (sub = subs[0]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\n        (sub = subs[1]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\n      }\n\n      newRanges.push(item);\n      ranges = newRanges;\n\n      for (i = 0, ii = backgroundRanges.length; i < ii; ++i) {\n        range = backgroundRanges[i];\n        subs = subtractSegment(range.start, range.end, item.start, item.end);\n        (sub = subs[0]) && newBackgroundRanges.push(sub);\n        (sub = subs[1]) && newBackgroundRanges.push(sub);\n      }\n\n      backgroundRanges = newBackgroundRanges;\n    });\n\n    _each(backgroundRanges, function (_, range) {\n      range.color = backgroundColor;\n      range.className = \"dxg-range dxg-background-range\";\n      ranges.push(range);\n    });\n\n    _each(ranges, function (_, range) {\n      range.startWidth = (range.start - totalStart) / totalDelta * deltaWidth + startWidth;\n      range.endWidth = (range.end - totalStart) / totalDelta * deltaWidth + startWidth;\n    });\n\n    return ranges;\n  },\n  render: function render(options) {\n    var that = this;\n    that._options = options;\n\n    that._processOptions();\n\n    that._ranges = that._getRanges();\n\n    if (that._ranges) {\n      that.enabled = true;\n\n      that._root.linkAppend();\n    }\n\n    return that;\n  },\n  resize: function resize(layout) {\n    var that = this;\n\n    that._root.clear();\n\n    if (that._isVisible(layout)) {\n      _each(that._ranges, function (_, range) {\n        that._createRange(range, layout).attr({\n          fill: range.color,\n          \"class\": range.className\n        }).append(that._root);\n      });\n    }\n\n    return that;\n  },\n  _processOptions: null,\n  _isVisible: null,\n  _createRange: null,\n  getColorForValue: function getColorForValue(value) {\n    var color = null;\n\n    _each(this._ranges, function (_, range) {\n      if (range.start <= value && value <= range.end || range.start >= value && value >= range.end) {\n        color = range.color;\n        return false;\n      }\n    });\n\n    return color;\n  }\n});\n\nfunction subtractSegmentAsc(segmentStart, segmentEnd, otherStart, otherEnd) {\n  var result;\n\n  if (otherStart > segmentStart && otherEnd < segmentEnd) {\n    result = [{\n      start: segmentStart,\n      end: otherStart\n    }, {\n      start: otherEnd,\n      end: segmentEnd\n    }];\n  } else {\n    if (otherStart >= segmentEnd || otherEnd <= segmentStart) {\n      result = [{\n        start: segmentStart,\n        end: segmentEnd\n      }];\n    } else {\n      if (otherStart <= segmentStart && otherEnd >= segmentEnd) {\n        result = [];\n      } else {\n        if (otherStart > segmentStart) {\n          result = [{\n            start: segmentStart,\n            end: otherStart\n          }];\n        } else {\n          if (otherEnd < segmentEnd) {\n            result = [{\n              start: otherEnd,\n              end: segmentEnd\n            }];\n          }\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction subtractSegmentDesc(segmentStart, segmentEnd, otherStart, otherEnd) {\n  var result;\n\n  if (otherStart < segmentStart && otherEnd > segmentEnd) {\n    result = [{\n      start: segmentStart,\n      end: otherStart\n    }, {\n      start: otherEnd,\n      end: segmentEnd\n    }];\n  } else {\n    if (otherStart <= segmentEnd || otherEnd >= segmentStart) {\n      result = [{\n        start: segmentStart,\n        end: segmentEnd\n      }];\n    } else {\n      if (otherStart >= segmentStart && otherEnd <= segmentEnd) {\n        result = [];\n      } else {\n        if (otherStart < segmentStart) {\n          result = [{\n            start: segmentStart,\n            end: otherStart\n          }];\n        } else {\n          if (otherEnd > segmentEnd) {\n            result = [{\n              start: otherEnd,\n              end: segmentEnd\n            }];\n          }\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction isNotEmptySegmentAsc(start, end, threshold) {\n  return end - start >= threshold;\n}\n\nfunction isNotEmptySegmentDesc(start, end, threshold) {\n  return start - end >= threshold;\n}\n\nmodule.exports = BaseRangeContainer;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/gauges/base_range_container.js"],"names":["iterateUtils","require","BaseElement","_Number","Number","_abs","Math","abs","_isString","isString","_isArray","Array","isArray","_isFinite","isFinite","_each","each","BaseRangeContainer","inherit","_init","_root","_renderer","g","attr","linkOn","_container","_dispose","linkOff","clean","linkRemove","clear","_options","enabled","_getRanges","that","options","translator","_translator","totalStart","getDomain","totalEnd","totalDelta","isNotEmptySegment","isNotEmptySegmentAsc","isNotEmptySegmentDesc","subtractSegment","subtractSegmentAsc","subtractSegmentDesc","list","ranges","backgroundRanges","start","end","threshold","palette","backgroundColor","width","startWidth","endWidth","deltaWidth","reduce","result","rangeOptions","i","adjust","startValue","endValue","push","color","classIndex","_themeManager","createPalette","type","extensionMode","paletteExtensionMode","keepLastColorInEnd","count","length","_","item","paletteColor","getNextColor","className","ii","sub","subs","range","newRanges","newBackgroundRanges","render","_processOptions","_ranges","linkAppend","resize","layout","_isVisible","_createRange","fill","append","getColorForValue","value","segmentStart","segmentEnd","otherStart","otherEnd","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/gauges/base_range_container.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar iterateUtils = require(\"../../core/utils/iterator\");\r\nvar BaseElement = require(\"./base_indicators\").BaseElement;\r\nvar _Number = Number;\r\nvar _abs = Math.abs;\r\nvar _isString = require(\"../../core/utils/type\").isString;\r\nvar _isArray = Array.isArray;\r\nvar _isFinite = isFinite;\r\nvar _each = iterateUtils.each;\r\nvar BaseRangeContainer = BaseElement.inherit({\r\n    _init: function() {\r\n        this._root = this._renderer.g().attr({\r\n            \"class\": \"dxg-range-container\"\r\n        }).linkOn(this._container, \"range-container\")\r\n    },\r\n    _dispose: function() {\r\n        this._root.linkOff()\r\n    },\r\n    clean: function() {\r\n        this._root.linkRemove().clear();\r\n        this._options = this.enabled = null;\r\n        return this\r\n    },\r\n    _getRanges: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var translator = that._translator;\r\n        var totalStart = translator.getDomain()[0];\r\n        var totalEnd = translator.getDomain()[1];\r\n        var totalDelta = totalEnd - totalStart;\r\n        var isNotEmptySegment = totalDelta >= 0 ? isNotEmptySegmentAsc : isNotEmptySegmentDesc;\r\n        var subtractSegment = totalDelta >= 0 ? subtractSegmentAsc : subtractSegmentDesc;\r\n        var list = [];\r\n        var ranges = [];\r\n        var backgroundRanges = [{\r\n            start: totalStart,\r\n            end: totalEnd\r\n        }];\r\n        var threshold = _abs(totalDelta) / 1e4;\r\n        var palette;\r\n        var backgroundColor = _isString(options.backgroundColor) ? options.backgroundColor : \"none\";\r\n        var width = options.width || {};\r\n        var startWidth = _Number(width > 0 ? width : width.start);\r\n        var endWidth = _Number(width > 0 ? width : width.end);\r\n        var deltaWidth = endWidth - startWidth;\r\n        if (void 0 !== options.ranges && !_isArray(options.ranges)) {\r\n            return null\r\n        }\r\n        if (!(startWidth >= 0 && endWidth >= 0 && startWidth + endWidth > 0)) {\r\n            return null\r\n        }\r\n        list = (_isArray(options.ranges) ? options.ranges : []).reduce(function(result, rangeOptions, i) {\r\n            rangeOptions = rangeOptions || {};\r\n            var start = translator.adjust(rangeOptions.startValue);\r\n            var end = translator.adjust(rangeOptions.endValue);\r\n            if (_isFinite(start) && _isFinite(end) && isNotEmptySegment(start, end, threshold)) {\r\n                result.push({\r\n                    start: start,\r\n                    end: end,\r\n                    color: rangeOptions.color,\r\n                    classIndex: i\r\n                })\r\n            }\r\n            return result\r\n        }, []);\r\n        palette = that._themeManager.createPalette(options.palette, {\r\n            type: \"indicatingSet\",\r\n            extensionMode: options.paletteExtensionMode,\r\n            keepLastColorInEnd: true,\r\n            count: list.length\r\n        });\r\n        _each(list, function(_, item) {\r\n            var paletteColor = palette.getNextColor();\r\n            item.color = _isString(item.color) && item.color || paletteColor || \"none\";\r\n            item.className = \"dxg-range dxg-range-\" + item.classIndex;\r\n            delete item.classIndex\r\n        });\r\n        _each(list, function(_, item) {\r\n            var i;\r\n            var ii;\r\n            var sub;\r\n            var subs;\r\n            var range;\r\n            var newRanges = [];\r\n            var newBackgroundRanges = [];\r\n            for (i = 0, ii = ranges.length; i < ii; ++i) {\r\n                range = ranges[i];\r\n                subs = subtractSegment(range.start, range.end, item.start, item.end);\r\n                (sub = subs[0]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\r\n                (sub = subs[1]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub)\r\n            }\r\n            newRanges.push(item);\r\n            ranges = newRanges;\r\n            for (i = 0, ii = backgroundRanges.length; i < ii; ++i) {\r\n                range = backgroundRanges[i];\r\n                subs = subtractSegment(range.start, range.end, item.start, item.end);\r\n                (sub = subs[0]) && newBackgroundRanges.push(sub);\r\n                (sub = subs[1]) && newBackgroundRanges.push(sub)\r\n            }\r\n            backgroundRanges = newBackgroundRanges\r\n        });\r\n        _each(backgroundRanges, function(_, range) {\r\n            range.color = backgroundColor;\r\n            range.className = \"dxg-range dxg-background-range\";\r\n            ranges.push(range)\r\n        });\r\n        _each(ranges, function(_, range) {\r\n            range.startWidth = (range.start - totalStart) / totalDelta * deltaWidth + startWidth;\r\n            range.endWidth = (range.end - totalStart) / totalDelta * deltaWidth + startWidth\r\n        });\r\n        return ranges\r\n    },\r\n    render: function(options) {\r\n        var that = this;\r\n        that._options = options;\r\n        that._processOptions();\r\n        that._ranges = that._getRanges();\r\n        if (that._ranges) {\r\n            that.enabled = true;\r\n            that._root.linkAppend()\r\n        }\r\n        return that\r\n    },\r\n    resize: function(layout) {\r\n        var that = this;\r\n        that._root.clear();\r\n        if (that._isVisible(layout)) {\r\n            _each(that._ranges, function(_, range) {\r\n                that._createRange(range, layout).attr({\r\n                    fill: range.color,\r\n                    \"class\": range.className\r\n                }).append(that._root)\r\n            })\r\n        }\r\n        return that\r\n    },\r\n    _processOptions: null,\r\n    _isVisible: null,\r\n    _createRange: null,\r\n    getColorForValue: function(value) {\r\n        var color = null;\r\n        _each(this._ranges, function(_, range) {\r\n            if (range.start <= value && value <= range.end || range.start >= value && value >= range.end) {\r\n                color = range.color;\r\n                return false\r\n            }\r\n        });\r\n        return color\r\n    }\r\n});\r\n\r\nfunction subtractSegmentAsc(segmentStart, segmentEnd, otherStart, otherEnd) {\r\n    var result;\r\n    if (otherStart > segmentStart && otherEnd < segmentEnd) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: otherStart\r\n        }, {\r\n            start: otherEnd,\r\n            end: segmentEnd\r\n        }]\r\n    } else {\r\n        if (otherStart >= segmentEnd || otherEnd <= segmentStart) {\r\n            result = [{\r\n                start: segmentStart,\r\n                end: segmentEnd\r\n            }]\r\n        } else {\r\n            if (otherStart <= segmentStart && otherEnd >= segmentEnd) {\r\n                result = []\r\n            } else {\r\n                if (otherStart > segmentStart) {\r\n                    result = [{\r\n                        start: segmentStart,\r\n                        end: otherStart\r\n                    }]\r\n                } else {\r\n                    if (otherEnd < segmentEnd) {\r\n                        result = [{\r\n                            start: otherEnd,\r\n                            end: segmentEnd\r\n                        }]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction subtractSegmentDesc(segmentStart, segmentEnd, otherStart, otherEnd) {\r\n    var result;\r\n    if (otherStart < segmentStart && otherEnd > segmentEnd) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: otherStart\r\n        }, {\r\n            start: otherEnd,\r\n            end: segmentEnd\r\n        }]\r\n    } else {\r\n        if (otherStart <= segmentEnd || otherEnd >= segmentStart) {\r\n            result = [{\r\n                start: segmentStart,\r\n                end: segmentEnd\r\n            }]\r\n        } else {\r\n            if (otherStart >= segmentStart && otherEnd <= segmentEnd) {\r\n                result = []\r\n            } else {\r\n                if (otherStart < segmentStart) {\r\n                    result = [{\r\n                        start: segmentStart,\r\n                        end: otherStart\r\n                    }]\r\n                } else {\r\n                    if (otherEnd > segmentEnd) {\r\n                        result = [{\r\n                            start: otherEnd,\r\n                            end: segmentEnd\r\n                        }]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction isNotEmptySegmentAsc(start, end, threshold) {\r\n    return end - start >= threshold\r\n}\r\n\r\nfunction isNotEmptySegmentDesc(start, end, threshold) {\r\n    return start - end >= threshold\r\n}\r\nmodule.exports = BaseRangeContainer;\r\n"]},"metadata":{},"sourceType":"script"}