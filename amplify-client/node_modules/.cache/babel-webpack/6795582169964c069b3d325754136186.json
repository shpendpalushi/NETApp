{"ast":null,"code":"/**\r\n * DevExtreme (ui/diagram/ui.diagram.dialogmanager.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _diagram_importer = require(\"./diagram_importer\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _window = require(\"../../core/utils/window\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar FileUploader = require(\"../file_uploader\");\n\nvar DiagramDialogManager = {\n  getConfigurations: function getConfigurations() {\n    var _getDiagram = (0, _diagram_importer.getDiagram)(),\n        DiagramCommand = _getDiagram.DiagramCommand;\n\n    return this.dialogList || (this.dialogList = [{\n      command: DiagramCommand.InsertShapeImage,\n      title: _message2.default.format(\"dxDiagram-dialogInsertShapeImageTitle\"),\n      onGetContent: this.getChangeImageDialogContent\n    }, {\n      command: DiagramCommand.EditShapeImage,\n      title: _message2.default.format(\"dxDiagram-dialogEditShapeImageTitle\"),\n      onGetContent: this.getChangeImageDialogContent\n    }]);\n  },\n  getChangeImageDialogContent: function getChangeImageDialogContent(args) {\n    var $uploader = (0, _renderer2.default)(\"<div>\");\n\n    args.component._createComponent($uploader, FileUploader, {\n      selectButtonText: _message2.default.format(\"dxDiagram-dialogEditShapeImageSelectButton\"),\n      accept: \"image/*\",\n      uploadMode: \"useForm\",\n      onValueChanged: function onValueChanged(e) {\n        var window = (0, _window.getWindow)();\n        var reader = new window.FileReader();\n\n        reader.onload = function (e) {\n          args.component._commandParameter = e.target.result;\n        };\n\n        reader.readAsDataURL(e.value[0]);\n      }\n    });\n\n    return $uploader;\n  },\n  getDialogParameters: function getDialogParameters(command) {\n    var commandIndex = this.getConfigurations().map(function (c) {\n      return c.command;\n    }).indexOf(command);\n\n    if (commandIndex >= 0) {\n      return this.getConfigurations()[commandIndex];\n    } else {\n      return null;\n    }\n  }\n};\nmodule.exports = DiagramDialogManager;","map":null,"metadata":{},"sourceType":"script"}