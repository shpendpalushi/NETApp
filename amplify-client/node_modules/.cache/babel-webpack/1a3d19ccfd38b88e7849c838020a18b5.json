{"ast":null,"code":"/**\r\n * DevExtreme (viz/tree_map/selection.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar proto = require(\"./tree_map.base\").prototype;\n\nvar nodeProto = require(\"./node\").prototype;\n\nvar expand = require(\"../core/helpers\").expand;\n\nvar common = require(\"./common\");\n\nvar _buildRectAppearance = common.buildRectAppearance;\n\nvar _normalizeEnum = require(\"../core/utils\").normalizeEnum;\n\nvar _inArray = require(\"../../core/utils/array\").inArray;\n\nvar MODE_NONE = 0;\nvar MODE_SINGLE = 1;\nvar MODE_MULTIPLE = 2;\nvar STATE_CODE = 2;\n\nrequire(\"./api\");\n\nrequire(\"./states\");\n\nproto._eventsMap.onSelectionChanged = {\n  name: \"selectionChanged\"\n};\nexpand(proto._handlers, \"calculateAdditionalStates\", function (states, options) {\n  states[2] = options.selectionStyle ? _buildRectAppearance(options.selectionStyle) : {};\n});\nnodeProto.statesMap[2] = nodeProto.statesMap[3] = STATE_CODE;\nnodeProto.additionalStates.push(2);\nexpand(proto, \"_onNodesCreated\", function () {\n  this._selectionList.length = 0;\n});\nexpand(proto, \"_extendProxyType\", function (proto) {\n  var that = this;\n\n  proto.select = function (state) {\n    that._selectNode(this._id, !!state);\n  };\n\n  proto.isSelected = function () {\n    return _inArray(this._id, that._selectionList) >= 0;\n  };\n\n  that._selectionList = [];\n});\n\nrequire(\"./tree_map.base\").addChange({\n  code: \"SELECTION_MODE\",\n  handler: function handler() {\n    var that = this;\n\n    var option = _normalizeEnum(that._getOption(\"selectionMode\", true));\n\n    var mode;\n    var selectionList = that._selectionList;\n    var tmp;\n    mode = \"none\" === option ? MODE_NONE : \"multiple\" === option ? MODE_MULTIPLE : MODE_SINGLE;\n\n    if (mode === MODE_SINGLE && selectionList.length > 1) {\n      tmp = selectionList.pop();\n      that.clearSelection();\n      selectionList.push(tmp);\n    } else {\n      if (mode === MODE_NONE) {\n        that.clearSelection();\n      }\n    }\n\n    that._selectionMode = mode;\n  },\n  isThemeDependent: true,\n  isOptionChange: true,\n  option: \"selectionMode\"\n});\n\nexpand(proto, \"_applyTilesAppearance\", function () {\n  if (this._selectionList.length) {\n    bringSelectedTilesToForeground(this._nodes, this._selectionList);\n  }\n});\n\nfunction bringSelectedTilesToForeground(nodes, selectionList) {\n  var i;\n  var ii = selectionList.length;\n  var node;\n\n  for (i = 0; i < ii; ++i) {\n    node = nodes[selectionList[i]];\n    tileToFront[Number(node.isNode())](node.tile);\n  }\n}\n\nvar tileToFront = [leafToFront, groupToFront];\n\nfunction leafToFront(content) {\n  content.toForeground();\n}\n\nfunction groupToFront(content) {\n  content.outer.toForeground();\n  content.inner.toForeground();\n}\n\nproto._applySelectionState = function (index, state) {\n  var node = this._nodes[index];\n  node.setState(STATE_CODE, state);\n\n  this._eventTrigger(\"selectionChanged\", {\n    node: node.proxy\n  });\n};\n\nproto._selectNode = function (index, state) {\n  var that = this;\n  var selectionList;\n  var k;\n  var tmp;\n\n  if (that._selectionMode !== MODE_NONE) {\n    that._context.suspend();\n\n    selectionList = that._selectionList;\n    k = _inArray(index, selectionList);\n\n    if (state && k === -1) {\n      if (that._selectionMode === MODE_SINGLE) {\n        if (selectionList.length) {\n          tmp = selectionList.pop();\n\n          that._applySelectionState(tmp, false);\n        }\n      }\n\n      selectionList.push(index);\n\n      that._applySelectionState(index, true);\n    } else {\n      if (!state && k >= 0) {\n        selectionList.splice(k, 1);\n\n        that._applySelectionState(index, false);\n      }\n    }\n\n    that._context.resume();\n  }\n};\n\nproto.clearSelection = function () {\n  var that = this;\n  var selectionList = that._selectionList;\n  var i;\n  var ii = selectionList.length;\n\n  if (that._selectionMode !== MODE_NONE) {\n    that._context.suspend();\n\n    for (i = 0; i < ii; ++i) {\n      that._applySelectionState(selectionList[i], false);\n    }\n\n    selectionList.length = 0;\n\n    that._context.resume();\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/viz/tree_map/selection.js"],"names":["proto","require","prototype","nodeProto","expand","common","_buildRectAppearance","buildRectAppearance","_normalizeEnum","normalizeEnum","_inArray","inArray","MODE_NONE","MODE_SINGLE","MODE_MULTIPLE","STATE_CODE","_eventsMap","onSelectionChanged","name","_handlers","states","options","selectionStyle","statesMap","additionalStates","push","_selectionList","length","that","select","state","_selectNode","_id","isSelected","addChange","code","handler","option","_getOption","mode","selectionList","tmp","pop","clearSelection","_selectionMode","isThemeDependent","isOptionChange","bringSelectedTilesToForeground","_nodes","nodes","i","ii","node","tileToFront","Number","isNode","tile","leafToFront","groupToFront","content","toForeground","outer","inner","_applySelectionState","index","setState","_eventTrigger","proxy","k","_context","suspend","splice","resume"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/tree_map/selection.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar proto = require(\"./tree_map.base\").prototype;\r\nvar nodeProto = require(\"./node\").prototype;\r\nvar expand = require(\"../core/helpers\").expand;\r\nvar common = require(\"./common\");\r\nvar _buildRectAppearance = common.buildRectAppearance;\r\nvar _normalizeEnum = require(\"../core/utils\").normalizeEnum;\r\nvar _inArray = require(\"../../core/utils/array\").inArray;\r\nvar MODE_NONE = 0;\r\nvar MODE_SINGLE = 1;\r\nvar MODE_MULTIPLE = 2;\r\nvar STATE_CODE = 2;\r\nrequire(\"./api\");\r\nrequire(\"./states\");\r\nproto._eventsMap.onSelectionChanged = {\r\n    name: \"selectionChanged\"\r\n};\r\nexpand(proto._handlers, \"calculateAdditionalStates\", function(states, options) {\r\n    states[2] = options.selectionStyle ? _buildRectAppearance(options.selectionStyle) : {}\r\n});\r\nnodeProto.statesMap[2] = nodeProto.statesMap[3] = STATE_CODE;\r\nnodeProto.additionalStates.push(2);\r\nexpand(proto, \"_onNodesCreated\", function() {\r\n    this._selectionList.length = 0\r\n});\r\nexpand(proto, \"_extendProxyType\", function(proto) {\r\n    var that = this;\r\n    proto.select = function(state) {\r\n        that._selectNode(this._id, !!state)\r\n    };\r\n    proto.isSelected = function() {\r\n        return _inArray(this._id, that._selectionList) >= 0\r\n    };\r\n    that._selectionList = []\r\n});\r\nrequire(\"./tree_map.base\").addChange({\r\n    code: \"SELECTION_MODE\",\r\n    handler: function() {\r\n        var that = this;\r\n        var option = _normalizeEnum(that._getOption(\"selectionMode\", true));\r\n        var mode;\r\n        var selectionList = that._selectionList;\r\n        var tmp;\r\n        mode = \"none\" === option ? MODE_NONE : \"multiple\" === option ? MODE_MULTIPLE : MODE_SINGLE;\r\n        if (mode === MODE_SINGLE && selectionList.length > 1) {\r\n            tmp = selectionList.pop();\r\n            that.clearSelection();\r\n            selectionList.push(tmp)\r\n        } else {\r\n            if (mode === MODE_NONE) {\r\n                that.clearSelection()\r\n            }\r\n        }\r\n        that._selectionMode = mode\r\n    },\r\n    isThemeDependent: true,\r\n    isOptionChange: true,\r\n    option: \"selectionMode\"\r\n});\r\nexpand(proto, \"_applyTilesAppearance\", function() {\r\n    if (this._selectionList.length) {\r\n        bringSelectedTilesToForeground(this._nodes, this._selectionList)\r\n    }\r\n});\r\n\r\nfunction bringSelectedTilesToForeground(nodes, selectionList) {\r\n    var i;\r\n    var ii = selectionList.length;\r\n    var node;\r\n    for (i = 0; i < ii; ++i) {\r\n        node = nodes[selectionList[i]];\r\n        tileToFront[Number(node.isNode())](node.tile)\r\n    }\r\n}\r\nvar tileToFront = [leafToFront, groupToFront];\r\n\r\nfunction leafToFront(content) {\r\n    content.toForeground()\r\n}\r\n\r\nfunction groupToFront(content) {\r\n    content.outer.toForeground();\r\n    content.inner.toForeground()\r\n}\r\nproto._applySelectionState = function(index, state) {\r\n    var node = this._nodes[index];\r\n    node.setState(STATE_CODE, state);\r\n    this._eventTrigger(\"selectionChanged\", {\r\n        node: node.proxy\r\n    })\r\n};\r\nproto._selectNode = function(index, state) {\r\n    var that = this;\r\n    var selectionList;\r\n    var k;\r\n    var tmp;\r\n    if (that._selectionMode !== MODE_NONE) {\r\n        that._context.suspend();\r\n        selectionList = that._selectionList;\r\n        k = _inArray(index, selectionList);\r\n        if (state && k === -1) {\r\n            if (that._selectionMode === MODE_SINGLE) {\r\n                if (selectionList.length) {\r\n                    tmp = selectionList.pop();\r\n                    that._applySelectionState(tmp, false)\r\n                }\r\n            }\r\n            selectionList.push(index);\r\n            that._applySelectionState(index, true)\r\n        } else {\r\n            if (!state && k >= 0) {\r\n                selectionList.splice(k, 1);\r\n                that._applySelectionState(index, false)\r\n            }\r\n        }\r\n        that._context.resume()\r\n    }\r\n};\r\nproto.clearSelection = function() {\r\n    var that = this;\r\n    var selectionList = that._selectionList;\r\n    var i;\r\n    var ii = selectionList.length;\r\n    if (that._selectionMode !== MODE_NONE) {\r\n        that._context.suspend();\r\n        for (i = 0; i < ii; ++i) {\r\n            that._applySelectionState(selectionList[i], false)\r\n        }\r\n        selectionList.length = 0;\r\n        that._context.resume()\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}