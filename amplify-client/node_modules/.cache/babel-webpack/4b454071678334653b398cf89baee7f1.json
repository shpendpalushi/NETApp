{"ast":null,"code":"/**\r\n * DevExtreme (viz/axes/tick_generator.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _utils = require(\"../core/utils\");\n\nvar _date = require(\"../../core/utils/date\");\n\nvar _date2 = _interopRequireDefault(_date);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _math = require(\"../../core/utils/math\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || \"[object Arguments]\" === Object.prototype.toString.call(arr))) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _e = void 0;\n\n  try {\n    for (var _s, _i = arr[Symbol.iterator](); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) {\n        break;\n      }\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && null != _i.return) {\n        _i.return();\n      }\n    } finally {\n      if (_d) {\n        throw _e;\n      }\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) {\n    return arr;\n  }\n}\n\nvar convertDateUnitToMilliseconds = _date2.default.convertDateUnitToMilliseconds;\nvar dateToMilliseconds = _date2.default.dateToMilliseconds;\nvar math = Math;\nvar mathAbs = math.abs;\nvar mathFloor = math.floor;\nvar mathCeil = math.ceil;\nvar mathPow = math.pow;\nvar NUMBER_MULTIPLIERS = [1, 2, 2.5, 5];\nvar LOGARITHMIC_MULTIPLIERS = [1, 2, 3, 5];\nvar DATETIME_MULTIPLIERS = {\n  millisecond: [1, 2, 5, 10, 25, 50, 100, 250, 500],\n  second: [1, 2, 3, 5, 10, 15, 20, 30],\n  minute: [1, 2, 3, 5, 10, 15, 20, 30],\n  hour: [1, 2, 3, 4, 6, 8, 12],\n  day: [1, 2],\n  week: [1, 2],\n  month: [1, 2, 3, 6]\n};\nvar DATETIME_MULTIPLIERS_WITH_BIG_WEEKEND = (0, _extend.extend)({}, DATETIME_MULTIPLIERS, {\n  day: [1]\n});\nvar DATETIME_MINOR_MULTIPLIERS = {\n  millisecond: [1, 2, 5, 10, 25, 50, 100, 250, 500],\n  second: [1, 2, 3, 5, 10, 15, 20, 30],\n  minute: [1, 2, 3, 5, 10, 15, 20, 30],\n  hour: [1, 2, 3, 4, 6, 8, 12],\n  day: [1, 2, 3, 7, 14],\n  month: [1, 2, 3, 6]\n};\nvar MINOR_DELIMITERS = [2, 4, 5, 8, 10];\nvar VISIBILITY_DELIMITER = 3;\nvar MINUTE = 6e4;\n\nfunction dummyGenerator(options) {\n  return function (data, screenDelta, tickInterval, forceTickInterval) {\n    var count = mathFloor(screenDelta / options.axisDivisionFactor);\n    count = count < 1 ? 1 : count;\n    var interval = screenDelta / count;\n    return {\n      ticks: interval > 0 ? Array.apply(null, new Array(count + 1)).map(function (_, i) {\n        return interval * i;\n      }) : [],\n      tickInterval: interval\n    };\n  };\n}\n\nfunction discreteGenerator(options) {\n  return function (data, screenDelta, tickInterval, forceTickInterval) {\n    var categories = (0, _utils.getCategoriesInfo)(data.categories, data.min, data.max).categories;\n    return {\n      ticks: categories,\n      tickInterval: mathCeil(categories.length * options.axisDivisionFactor / screenDelta)\n    };\n  };\n}\n\nvar getValue = function getValue(value) {\n  return value;\n};\n\nvar getLogValue = function getLogValue(base, allowNegatives, linearThreshold) {\n  return function (value) {\n    return (0, _utils.getLogExt)(value, base, allowNegatives, linearThreshold);\n  };\n};\n\nvar raiseTo = function raiseTo(base, allowNegatives, linearThreshold) {\n  return function (value) {\n    return (0, _utils.raiseToExt)(value, base, allowNegatives, linearThreshold);\n  };\n};\n\nvar mathRaiseTo = function mathRaiseTo(base) {\n  return function (value) {\n    return (0, _utils.raiseTo)(value, base);\n  };\n};\n\nvar logAbsValue = function logAbsValue(base) {\n  return function (value) {\n    return 0 === value ? 0 : (0, _utils.getLog)(mathAbs(value), base);\n  };\n};\n\nvar correctValueByInterval = function correctValueByInterval(post, round, getValue) {\n  return function (value, interval) {\n    return (0, _math.adjust)(post(round((0, _math.adjust)(getValue(value) / interval)) * interval));\n  };\n};\n\nfunction correctMinValueByEndOnTick(floorFunc, ceilFunc, resolveEndOnTick, endOnTick) {\n  if ((0, _type.isDefined)(endOnTick)) {\n    return endOnTick ? floorFunc : ceilFunc;\n  }\n\n  return function (value, interval, businessViewInfo, forceEndOnTick) {\n    var floorTickValue = floorFunc(value, interval);\n\n    if (value - floorTickValue === 0 || !(0, _type.isDefined)(businessViewInfo) || resolveEndOnTick(value, floorTickValue, interval, businessViewInfo) || forceEndOnTick) {\n      return floorTickValue;\n    }\n\n    return ceilFunc(value, interval);\n  };\n}\n\nfunction resolveEndOnTick(curValue, tickValue, interval, businessViewInfo) {\n  var prevTickDataDiff = interval - mathAbs(tickValue - curValue);\n  var intervalCount = math.max(mathCeil(businessViewInfo.businessDelta / interval), 2);\n  var businessRatio = businessViewInfo.screenDelta / (intervalCount * interval);\n  var potentialTickScreenDiff = math.round(businessRatio * prevTickDataDiff);\n  var delimiterFactor = (0, _utils.getLogExt)(businessRatio * interval / businessViewInfo.axisDivisionFactor, 2) + 1;\n  var delimiterMultiplier = (businessViewInfo.isSpacedMargin ? 2 : 1) * delimiterFactor;\n  var screenDelimiter = math.round(VISIBILITY_DELIMITER * delimiterMultiplier);\n  return businessViewInfo.businessDelta > businessViewInfo.interval && potentialTickScreenDiff >= screenDelimiter;\n}\n\nfunction resolveEndOnTickLog(base) {\n  return function (curValue, tickValue, interval, businessViewInfo) {\n    return resolveEndOnTick((0, _utils.getLogExt)(curValue, base), (0, _utils.getLogExt)(tickValue, base), interval, businessViewInfo);\n  };\n}\n\nfunction resolveEndOnTickDate(curValue, tickValue, interval, businessViewInfo) {\n  return resolveEndOnTick(curValue.valueOf(), tickValue.valueOf(), dateToMilliseconds(interval), businessViewInfo);\n}\n\nfunction resolveExtraTickForHiddenDataPoint(checkDataVisibility, extremum, tick, businessViewInfo, isMin) {\n  var screenRatio = businessViewInfo.screenDelta / businessViewInfo.businessDelta;\n  var extDir = isMin ? 1 : -1;\n  var tickDir = isMin ? -1 : 1;\n  return checkDataVisibility && screenRatio * (extremum * extDir + tick * tickDir) < VISIBILITY_DELIMITER;\n}\n\nfunction resolveExtraTickForHiddenDataPointLog(base) {\n  return function (checkDataVisibility, extremum, tick, businessViewInfo, isMin) {\n    return resolveExtraTickForHiddenDataPoint(checkDataVisibility, (0, _utils.getLogExt)(extremum, base), (0, _utils.getLogExt)(tick, base), businessViewInfo, isMin);\n  };\n}\n\nfunction resolveExtraTickForHiddenDataPointDate(checkDataVisibility, extremum, tick, businessViewInfo, isMin) {\n  return resolveExtraTickForHiddenDataPoint(checkDataVisibility, extremum.valueOf(), tick.valueOf(), businessViewInfo, isMin);\n}\n\nfunction getBusinessDelta(data, breaks) {\n  var spacing = 0;\n\n  if (breaks) {\n    spacing = breaks.reduce(function (prev, item) {\n      return prev + (item.to - item.from);\n    }, 0);\n  }\n\n  return mathAbs(data.max - data.min - spacing);\n}\n\nfunction getBusinessDeltaLog(base, allowNegatives, linearThreshold) {\n  var getLog = getLogValue(base, allowNegatives, linearThreshold);\n  return function (data, breaks) {\n    var spacing = 0;\n\n    if (breaks) {\n      spacing = breaks.reduce(function (prev, item) {\n        return prev + mathAbs(getLog(item.to / item.from));\n      }, 0);\n    }\n\n    return mathCeil(mathAbs(getLog(data.max) - getLog(data.min)) - spacing);\n  };\n}\n\nfunction getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor, addTickCount) {\n  var count = screenDelta / axisDivisionFactor - (addTickCount || 0);\n  count = count < 1 ? 1 : count;\n  return businessDelta / count;\n}\n\nfunction getMultiplierFactor(interval, factorDelta) {\n  return mathPow(10, mathFloor((0, _utils.getLogExt)(interval, 10)) + (factorDelta || 0));\n}\n\nfunction calculateTickInterval(businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, addTickCount, _, minTickInterval) {\n  var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor, addTickCount);\n  var result = 1;\n  var onlyIntegers = false === allowDecimals;\n\n  if (!forceTickInterval || !tickInterval) {\n    if (interval >= 1 || !onlyIntegers && interval > 0) {\n      result = adjustInterval(interval, multipliers, onlyIntegers);\n    }\n\n    if (!tickInterval || !forceTickInterval && tickInterval < result) {\n      tickInterval = result;\n    }\n  }\n\n  if (!forceTickInterval && minTickInterval) {\n    minTickInterval = adjustInterval(minTickInterval, multipliers, onlyIntegers);\n\n    if (minTickInterval > tickInterval) {\n      tickInterval = minTickInterval;\n    }\n  }\n\n  return tickInterval;\n}\n\nfunction adjustInterval(interval, multipliers, onlyIntegers) {\n  var factor = getMultiplierFactor(interval, -1);\n  var result = 1;\n  multipliers = multipliers || NUMBER_MULTIPLIERS;\n\n  if (interval > 0) {\n    interval /= factor;\n    result = multipliers.concat(10 * multipliers[0]).map(function (m) {\n      return 10 * m;\n    }).reduce(function (r, m) {\n      if (.1 === factor && onlyIntegers && 25 === m) {\n        return r;\n      }\n\n      return r < interval ? m : r;\n    }, 0);\n    result = (0, _math.adjust)(result * factor, factor);\n  }\n\n  return result;\n}\n\nfunction calculateMinorTickInterval(businessDelta, screenDelta, tickInterval, axisDivisionFactor) {\n  var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor);\n  return tickInterval || MINOR_DELIMITERS.reduce(function (r, d) {\n    var cur = businessDelta / d;\n    return cur >= interval ? cur : r;\n  }, 0);\n}\n\nfunction getCalculateTickIntervalLog(skipCalculationLimits) {\n  return function (businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, _, __, minTickInterval) {\n    var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor);\n    var result = 0;\n    var adjustInterval = getAdjustIntervalLog(skipCalculationLimits);\n\n    if (!forceTickInterval || !tickInterval) {\n      if (interval > 0) {\n        result = adjustInterval(interval, multipliers);\n      }\n\n      if (!tickInterval || !forceTickInterval && tickInterval < result) {\n        tickInterval = result;\n      }\n    }\n\n    if (!forceTickInterval && minTickInterval) {\n      minTickInterval = adjustInterval(minTickInterval, multipliers);\n\n      if (minTickInterval > tickInterval) {\n        tickInterval = minTickInterval;\n      }\n    }\n\n    return tickInterval;\n  };\n}\n\nfunction getAdjustIntervalLog(skipCalculationLimits) {\n  return function (interval, multipliers) {\n    var factor = getMultiplierFactor(interval);\n    multipliers = multipliers || LOGARITHMIC_MULTIPLIERS;\n\n    if (!skipCalculationLimits && factor < 1) {\n      factor = 1;\n    }\n\n    return multipliers.concat(10 * multipliers[0]).reduce(function (r, m) {\n      return r < interval ? m * factor : r;\n    }, 0);\n  };\n}\n\nfunction getDataTimeMultipliers(gapSize) {\n  if (gapSize && gapSize > 2) {\n    return DATETIME_MULTIPLIERS_WITH_BIG_WEEKEND;\n  } else {\n    return DATETIME_MULTIPLIERS;\n  }\n}\n\nfunction numbersReducer(interval, key) {\n  return function (r, m) {\n    if (!r && interval <= convertDateUnitToMilliseconds(key, m)) {\n      r = {};\n      r[key + \"s\"] = m;\n    }\n\n    return r;\n  };\n}\n\nfunction yearsReducer(interval, factor) {\n  return function (r, m) {\n    var years = factor * m;\n\n    if (!r && interval <= convertDateUnitToMilliseconds(\"year\", years) && 2.5 !== years) {\n      r = {\n        years: years\n      };\n    }\n\n    return r;\n  };\n}\n\nfunction calculateTickIntervalDateTime(businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, addTickCount, gapSize, minTickInterval) {\n  if (!forceTickInterval || !tickInterval) {\n    var result = adjustIntervalDateTime(getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor), multipliers, null, gapSize);\n\n    if (!tickInterval || !forceTickInterval && dateToMilliseconds(tickInterval) <= dateToMilliseconds(result)) {\n      tickInterval = result;\n    }\n  }\n\n  if (!forceTickInterval && minTickInterval) {\n    minTickInterval = adjustIntervalDateTime(minTickInterval, multipliers, null, gapSize);\n\n    if (dateToMilliseconds(minTickInterval) > dateToMilliseconds(tickInterval)) {\n      tickInterval = minTickInterval;\n    }\n  }\n\n  return tickInterval;\n}\n\nfunction adjustIntervalDateTime(interval, multipliers, _, gapSize) {\n  var result;\n  multipliers = multipliers || getDataTimeMultipliers(gapSize);\n\n  for (var key in multipliers) {\n    result = multipliers[key].reduce(numbersReducer(interval, key), result);\n\n    if (result) {\n      break;\n    }\n  }\n\n  if (!result) {\n    for (var factor = 1;; factor *= 10) {\n      result = NUMBER_MULTIPLIERS.reduce(yearsReducer(interval, factor), result);\n\n      if (result) {\n        break;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction calculateMinorTickIntervalDateTime(businessDelta, screenDelta, tickInterval, axisDivisionFactor) {\n  return calculateTickIntervalDateTime(businessDelta, screenDelta, tickInterval, true, axisDivisionFactor, DATETIME_MINOR_MULTIPLIERS);\n}\n\nfunction getTickIntervalByCustomTicks(getValue, postProcess) {\n  return function (ticks) {\n    return ticks ? postProcess(mathAbs((0, _math.adjust)(getValue(ticks[1]) - getValue(ticks[0])))) || void 0 : void 0;\n  };\n}\n\nfunction addInterval(value, interval, isNegative) {\n  return _date2.default.addInterval(value, interval, isNegative);\n}\n\nfunction addIntervalLog(log, raise) {\n  return function (value, interval, isNegative) {\n    return raise(addInterval(log(value), interval, isNegative));\n  };\n}\n\nfunction addIntervalDate(value, interval, isNegative) {\n  return addInterval(value, interval, isNegative);\n}\n\nfunction addIntervalWithBreaks(addInterval, breaks, correctValue) {\n  breaks = breaks.filter(function (b) {\n    return !b.gapSize;\n  });\n  return function (value, interval, isNegative) {\n    var breakSize;\n    value = addInterval(value, interval, isNegative);\n\n    if (!breaks.every(function (item) {\n      if (value >= addInterval(item.from, interval) && addInterval(value, interval) < item.to) {\n        breakSize = item.to - item.from - 2 * (addInterval(item.from, interval) - item.from);\n      }\n\n      return !breakSize;\n    })) {\n      value = correctValue(addInterval(value, breakSize), interval);\n    }\n\n    return value;\n  };\n}\n\nfunction calculateTicks(addInterval, correctMinValue, adjustInterval, resolveEndOnTick, resolveExtraTickForHiddenDataPoint) {\n  return function (data, tickInterval, endOnTick, gaps, breaks, businessDelta, screenDelta, axisDivisionFactor, generateExtraTick) {\n    var correctTickValue = correctTickValueOnGapSize(addInterval, gaps);\n    var min = data.min;\n    var max = data.max;\n    var businessViewInfo = {\n      screenDelta: screenDelta,\n      businessDelta: businessDelta,\n      axisDivisionFactor: axisDivisionFactor,\n      isSpacedMargin: data.isSpacedMargin,\n      interval: tickInterval\n    };\n    var cur = correctMinValue(min, tickInterval, businessViewInfo);\n    var ticks = [];\n\n    if (breaks && breaks.length) {\n      addInterval = addIntervalWithBreaks(addInterval, breaks, correctMinValue);\n    }\n\n    if (cur > max) {\n      cur = correctMinValue(min, adjustInterval(businessDelta / 2), businessViewInfo);\n\n      if (cur > max) {\n        endOnTick = true;\n        cur = correctMinValue(min, tickInterval, businessViewInfo, endOnTick);\n      }\n    }\n\n    cur = correctTickValue(cur);\n    var prev;\n\n    while (cur < max && cur !== prev || generateExtraTick && cur <= max) {\n      ticks.push(cur);\n      prev = cur;\n      cur = correctTickValue(addInterval(cur, tickInterval));\n    }\n\n    if (endOnTick || cur - max === 0 || !(0, _type.isDefined)(endOnTick) && resolveEndOnTick(max, cur, tickInterval, businessViewInfo)) {\n      ticks.push(cur);\n    }\n\n    if (ticks.length > 0) {\n      if (ticks[0].valueOf() > 0 && resolveExtraTickForHiddenDataPoint(data.checkMinDataVisibility, min, ticks[0], businessViewInfo, true)) {\n        cur = addInterval(ticks[0], tickInterval, true);\n        ticks.unshift(cur);\n      } else {\n        if (ticks[ticks.length - 1].valueOf() < 0 && resolveExtraTickForHiddenDataPoint(data.checkMaxDataVisibility, max, ticks[ticks.length - 1], businessViewInfo, false)) {\n          cur = addInterval(ticks[ticks.length - 1], tickInterval);\n          ticks.push(cur);\n        }\n      }\n    }\n\n    return ticks;\n  };\n}\n\nfunction calculateMinorTicks(updateTickInterval, addInterval, correctMinValue, correctTickValue, ceil) {\n  return function (min, max, majorTicks, minorTickInterval, tickInterval, breaks, maxCount) {\n    var factor = tickInterval / minorTickInterval;\n    var lastMajor = majorTicks[majorTicks.length - 1];\n    var firstMajor = majorTicks[0];\n    var tickBalance = maxCount - 1;\n\n    if (breaks && breaks.length) {\n      addInterval = addIntervalWithBreaks(addInterval, breaks, correctMinValue);\n    }\n\n    minorTickInterval = updateTickInterval(minorTickInterval, firstMajor, firstMajor, factor);\n\n    if (0 === minorTickInterval) {\n      return [];\n    }\n\n    var cur = correctTickValue(correctMinValue(min, tickInterval, min), minorTickInterval);\n    minorTickInterval = updateTickInterval(minorTickInterval, firstMajor, cur, factor);\n    var ticks = [];\n\n    while (cur < firstMajor && (!tickBalance || tickBalance > 0)) {\n      cur >= min && ticks.push(cur);\n      tickBalance--;\n      cur = addInterval(cur, minorTickInterval);\n    }\n\n    var middleTicks = majorTicks.reduce(function (r, tick) {\n      tickBalance = maxCount - 1;\n\n      if (null === r.prevTick) {\n        r.prevTick = tick;\n        return r;\n      }\n\n      minorTickInterval = updateTickInterval(minorTickInterval, tick, r.prevTick, factor);\n      var cur = correctTickValue(r.prevTick, minorTickInterval);\n\n      while (cur < tick && (!tickBalance || tickBalance > 0)) {\n        cur !== r.prevTick && r.minors.push(cur);\n        tickBalance--;\n        cur = addInterval(cur, minorTickInterval);\n      }\n\n      r.prevTick = tick;\n      return r;\n    }, {\n      prevTick: null,\n      minors: []\n    });\n    ticks = ticks.concat(middleTicks.minors);\n    var maxValue = ceil(max, tickInterval, min);\n    minorTickInterval = updateTickInterval(minorTickInterval, maxValue, maxValue, factor);\n    cur = correctTickValue(lastMajor, minorTickInterval);\n    var prev;\n\n    while (cur < max && cur !== prev) {\n      ticks.push(cur);\n      prev = cur;\n      cur = addInterval(cur, minorTickInterval);\n    }\n\n    if (lastMajor - max !== 0 && cur - max === 0) {\n      ticks.push(cur);\n    }\n\n    return ticks;\n  };\n}\n\nfunction filterTicks(ticks, breaks) {\n  if (breaks.length) {\n    var result = breaks.reduce(function (result, b) {\n      var tmpTicks = [];\n      var i;\n\n      for (i = result[1]; i < ticks.length; i++) {\n        var tickValue = ticks[i];\n\n        if (tickValue < b.from) {\n          tmpTicks.push(tickValue);\n        }\n\n        if (tickValue >= b.to) {\n          break;\n        }\n      }\n\n      return [result[0].concat(tmpTicks), i];\n    }, [[], 0]);\n    return result[0].concat(ticks.slice(result[1]));\n  }\n\n  return ticks;\n}\n\nfunction correctTickValueOnGapSize(addInterval, breaks) {\n  return function (value) {\n    var gapSize;\n\n    if (!breaks.every(function (item) {\n      if (value >= item.from && value < item.to) {\n        gapSize = item.gapSize;\n      }\n\n      return !gapSize;\n    })) {\n      value = addInterval(value, gapSize);\n    }\n\n    return value;\n  };\n}\n\nfunction generator(options, getBusinessDelta, calculateTickInterval, calculateMinorTickInterval, getMajorTickIntervalByCustomTicks, getMinorTickIntervalByCustomTicks, convertTickInterval, calculateTicks, calculateMinorTicks, processScaleBreaks) {\n  function processCustomTicks(customTicks) {\n    return {\n      tickInterval: getMajorTickIntervalByCustomTicks(customTicks.majors),\n      ticks: customTicks.majors || [],\n      minorTickInterval: getMinorTickIntervalByCustomTicks(customTicks.minors),\n      minorTicks: customTicks.minors || []\n    };\n  }\n\n  function correctUserTickInterval(tickInterval, businessDelta, limit) {\n    if (tickInterval && businessDelta / convertTickInterval(tickInterval) >= limit + 1) {\n      options.incidentOccurred(\"W2003\");\n      tickInterval = void 0;\n    }\n\n    return tickInterval;\n  }\n\n  function generateMajorTicks(ticks, data, businessDelta, screenDelta, tickInterval, forceTickInterval, customTicks, breaks) {\n    if (customTicks.majors) {\n      ticks.breaks = breaks;\n      return ticks;\n    }\n\n    var gaps = breaks.filter(function (b) {\n      return b.gapSize;\n    });\n    var majorTicks;\n    tickInterval = options.skipCalculationLimits ? tickInterval : correctUserTickInterval(tickInterval, businessDelta, screenDelta);\n    tickInterval = calculateTickInterval(businessDelta, screenDelta, tickInterval, forceTickInterval, options.axisDivisionFactor, options.numberMultipliers, options.allowDecimals, breaks.length, gaps[0] && gaps[0].gapSize.days, options.minTickInterval);\n\n    if (!options.skipTickGeneration) {\n      majorTicks = calculateTicks(data, tickInterval, options.endOnTick, gaps, breaks, businessDelta, screenDelta, options.axisDivisionFactor, options.generateExtraTick);\n      breaks = processScaleBreaks(breaks, majorTicks, tickInterval);\n      majorTicks = filterTicks(majorTicks, breaks);\n      ticks.breaks = breaks;\n      ticks.ticks = ticks.ticks.concat(majorTicks);\n    }\n\n    ticks.tickInterval = tickInterval;\n    return ticks;\n  }\n\n  function generateMinorTicks(ticks, data, businessDelta, screenDelta, minorTickInterval, minorTickCount, customTicks) {\n    if (!options.calculateMinors) {\n      return ticks;\n    }\n\n    if (customTicks.minors) {\n      return ticks;\n    }\n\n    var minorBusinessDelta = convertTickInterval(ticks.tickInterval);\n    var minorScreenDelta = screenDelta * minorBusinessDelta / businessDelta;\n    var breaks = ticks.breaks;\n\n    if (!minorTickInterval && minorTickCount) {\n      minorTickInterval = getMinorTickIntervalByCustomTicks([minorBusinessDelta / (minorTickCount + 1), minorBusinessDelta / (minorTickCount + 1) * 2]);\n    } else {\n      minorTickCount = void 0;\n    }\n\n    minorTickInterval = correctUserTickInterval(minorTickInterval, minorBusinessDelta, minorScreenDelta);\n    minorTickInterval = calculateMinorTickInterval(minorBusinessDelta, minorScreenDelta, minorTickInterval, options.minorAxisDivisionFactor);\n    ticks.minorTicks = filterTicks(ticks.minorTicks.concat(calculateMinorTicks(data.min, data.max, ticks.ticks, minorTickInterval, ticks.tickInterval, breaks, minorTickCount)), breaks);\n    ticks.minorTickInterval = minorTickInterval;\n    return ticks;\n  }\n\n  return function (data, screenDelta, tickInterval, forceTickInterval, customTicks, minorTickInterval, minorTickCount, breaks) {\n    customTicks = customTicks || {};\n    var businessDelta = getBusinessDelta(data, breaks);\n    var result = processCustomTicks(customTicks);\n\n    if (!isNaN(businessDelta)) {\n      if (0 === businessDelta && !customTicks.majors) {\n        result.ticks = [data.min];\n      } else {\n        result = generateMajorTicks(result, data, businessDelta, screenDelta, tickInterval, forceTickInterval, customTicks, breaks || []);\n\n        if (!options.skipTickGeneration && businessDelta > 0) {\n          result = generateMinorTicks(result, data, businessDelta, screenDelta, minorTickInterval, minorTickCount, customTicks);\n        }\n      }\n    }\n\n    return result;\n  };\n}\n\nfunction getBaseTick(breakValue, _ref, interval, getValue) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      tick = _ref2[0],\n      insideTick = _ref2[1];\n\n  if (!(0, _type.isDefined)(tick) || mathAbs(getValue(breakValue) - getValue(tick)) / interval > .25) {\n    if ((0, _type.isDefined)(insideTick)) {\n      tick = insideTick;\n    } else {\n      if (!(0, _type.isDefined)(tick)) {\n        tick = breakValue;\n      }\n    }\n  }\n\n  return tick;\n}\n\nfunction getScaleBreaksProcessor(convertTickInterval, getValue, addCorrection) {\n  return function (breaks, ticks, tickInterval) {\n    var interval = convertTickInterval(tickInterval);\n    var correction = .5 * interval;\n    return breaks.reduce(function (result, b) {\n      var breakTicks = ticks.filter(function (tick) {\n        return tick <= b.from;\n      });\n      var from = addCorrection(getBaseTick(b.from, [].concat(breakTicks[breakTicks.length - 1], ticks[breakTicks.length]), interval, getValue), correction);\n      breakTicks = ticks.filter(function (tick) {\n        return tick >= b.to;\n      });\n      var to = addCorrection(getBaseTick(b.to, [].concat(breakTicks[0], ticks[ticks.length - breakTicks.length - 1]), interval, getValue), -correction);\n\n      if (getValue(to) - getValue(from) < interval && !b.gapSize) {\n        return result;\n      }\n\n      if (b.gapSize) {\n        return result.concat([b]);\n      }\n\n      return result.concat([{\n        from: from,\n        to: to,\n        cumulativeWidth: b.cumulativeWidth\n      }]);\n    }, []);\n  };\n}\n\nfunction numericGenerator(options) {\n  var floor = correctValueByInterval(getValue, mathFloor, getValue);\n  var ceil = correctValueByInterval(getValue, mathCeil, getValue);\n  var calculateTickIntervalByCustomTicks = getTickIntervalByCustomTicks(getValue, getValue);\n  return generator(options, getBusinessDelta, calculateTickInterval, calculateMinorTickInterval, calculateTickIntervalByCustomTicks, calculateTickIntervalByCustomTicks, getValue, calculateTicks(addInterval, correctMinValueByEndOnTick(floor, ceil, resolveEndOnTick, options.endOnTick), adjustInterval, resolveEndOnTick, resolveExtraTickForHiddenDataPoint), calculateMinorTicks(getValue, addInterval, floor, addInterval, getValue), getScaleBreaksProcessor(getValue, getValue, function (value, correction) {\n    return value + correction;\n  }));\n}\n\nvar correctValueByIntervalLog = function correctValueByIntervalLog(post, getRound, getValue) {\n  return function (value, interval) {\n    return (0, _math.sign)(value) * (0, _math.adjust)(post(getRound(value)((0, _math.adjust)(getValue(value) / interval)) * interval));\n  };\n};\n\nfunction logarithmicGenerator(options) {\n  var base = options.logBase;\n  var raise = raiseTo(base, options.allowNegatives, options.linearThreshold);\n  var log = getLogValue(base, options.allowNegatives, options.linearThreshold);\n  var absLog = logAbsValue(base);\n  var absRaise = mathRaiseTo(base);\n\n  var absFloor = function absFloor(value) {\n    return value < 0 ? mathCeil : mathFloor;\n  };\n\n  var absCeil = function absCeil(value) {\n    return value < 0 ? mathFloor : mathCeil;\n  };\n\n  var floor = correctValueByIntervalLog(absRaise, absFloor, absLog);\n  var ceil = correctValueByIntervalLog(absRaise, absCeil, absLog);\n  var ceilNumber = correctValueByInterval(getValue, mathCeil, getValue);\n  return generator(options, getBusinessDeltaLog(base, options.allowNegatives, options.linearThreshold), getCalculateTickIntervalLog(options.skipCalculationLimits), calculateMinorTickInterval, getTickIntervalByCustomTicks(log, getValue), getTickIntervalByCustomTicks(getValue, getValue), getValue, calculateTicks(addIntervalLog(log, raise), correctMinValueByEndOnTick(floor, ceil, resolveEndOnTickLog(base), options.endOnTick), getAdjustIntervalLog(options.skipCalculationLimits), resolveEndOnTickLog(base), resolveExtraTickForHiddenDataPointLog(base)), calculateMinorTicks(function (_, tick, prevTick, factor) {\n    return Math.max(Math.abs(tick), Math.abs(prevTick)) / factor;\n  }, addInterval, floor, ceilNumber, ceil), getScaleBreaksProcessor(getValue, log, function (value, correction) {\n    return raise(log(value) + correction);\n  }));\n}\n\nfunction dateGenerator(options) {\n  function floor(value, interval) {\n    var floorNumber = correctValueByInterval(getValue, mathFloor, getValue);\n    var intervalObject = (0, _type.isString)(interval) ? _date2.default.getDateIntervalByString(interval.toLowerCase()) : interval;\n    var divider = dateToMilliseconds(interval);\n\n    if (intervalObject.days % 7 === 0 || interval.quarters) {\n      intervalObject = adjustIntervalDateTime(divider);\n    }\n\n    var correctDateWithUnitBeginning = function correctDateWithUnitBeginning(v) {\n      return _date2.default.correctDateWithUnitBeginning(v, intervalObject, null, options.firstDayOfWeek);\n    };\n\n    var floorAtStartDate = function floorAtStartDate(v) {\n      return new Date(mathFloor((v.getTime() - v.getTimezoneOffset() * MINUTE) / divider) * divider + v.getTimezoneOffset() * MINUTE);\n    };\n\n    value = correctDateWithUnitBeginning(value);\n\n    if (\"years\" in intervalObject) {\n      value.setFullYear(floorNumber(value.getFullYear(), intervalObject.years, 0));\n    } else {\n      if (\"quarters\" in intervalObject) {\n        value = correctDateWithUnitBeginning(floorAtStartDate(value));\n      } else {\n        if (\"months\" in intervalObject) {\n          value.setMonth(floorNumber(value.getMonth(), intervalObject.months, 0));\n        } else {\n          if (\"weeks\" in intervalObject || \"days\" in intervalObject) {\n            value = correctDateWithUnitBeginning(floorAtStartDate(value));\n          } else {\n            if (\"hours\" in intervalObject) {\n              value.setHours(floorNumber(value.getHours(), intervalObject.hours, 0));\n            } else {\n              if (\"minutes\" in intervalObject) {\n                value.setMinutes(floorNumber(value.getMinutes(), intervalObject.minutes, 0));\n              } else {\n                if (\"seconds\" in intervalObject) {\n                  value.setSeconds(floorNumber(value.getSeconds(), intervalObject.seconds, 0));\n                } else {\n                  if (\"milliseconds\" in intervalObject) {\n                    value = floorAtStartDate(value);\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return value;\n  }\n\n  function ceil(value, interval) {\n    var newValue = floor(value, interval);\n\n    while (value - newValue > 0) {\n      newValue = addIntervalDate(newValue, interval);\n    }\n\n    return newValue;\n  }\n\n  var calculateTickIntervalByCustomTicks = getTickIntervalByCustomTicks(getValue, _date2.default.convertMillisecondsToDateUnits);\n  return generator(options, getBusinessDelta, calculateTickIntervalDateTime, calculateMinorTickIntervalDateTime, calculateTickIntervalByCustomTicks, calculateTickIntervalByCustomTicks, dateToMilliseconds, calculateTicks(addIntervalDate, correctMinValueByEndOnTick(floor, ceil, resolveEndOnTickDate, options.endOnTick), adjustIntervalDateTime, resolveEndOnTickDate, resolveExtraTickForHiddenDataPointDate), calculateMinorTicks(getValue, addIntervalDate, floor, addIntervalDate, getValue), getScaleBreaksProcessor(dateToMilliseconds, getValue, function (value, correction) {\n    return new Date(value.getTime() + correction);\n  }));\n}\n\nexports.tickGenerator = function (options) {\n  var result;\n\n  if (options.rangeIsEmpty) {\n    result = dummyGenerator(options);\n  } else {\n    if (\"discrete\" === options.axisType) {\n      result = discreteGenerator(options);\n    } else {\n      if (\"logarithmic\" === options.axisType) {\n        result = logarithmicGenerator(options);\n      } else {\n        if (\"datetime\" === options.dataType) {\n          result = dateGenerator(options);\n        } else {\n          result = numericGenerator(options);\n        }\n      }\n    }\n  }\n\n  return result;\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/viz/axes/tick_generator.js"],"names":["_utils","require","_date","_date2","_interopRequireDefault","_type","_math","_extend","obj","__esModule","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","_s","_i","next","done","push","value","length","err","return","Array","isArray","convertDateUnitToMilliseconds","default","dateToMilliseconds","math","Math","mathAbs","abs","mathFloor","floor","mathCeil","ceil","mathPow","pow","NUMBER_MULTIPLIERS","LOGARITHMIC_MULTIPLIERS","DATETIME_MULTIPLIERS","millisecond","second","minute","hour","day","week","month","DATETIME_MULTIPLIERS_WITH_BIG_WEEKEND","extend","DATETIME_MINOR_MULTIPLIERS","MINOR_DELIMITERS","VISIBILITY_DELIMITER","MINUTE","dummyGenerator","options","data","screenDelta","tickInterval","forceTickInterval","count","axisDivisionFactor","interval","ticks","apply","map","_","discreteGenerator","categories","getCategoriesInfo","min","max","getValue","getLogValue","base","allowNegatives","linearThreshold","getLogExt","raiseTo","raiseToExt","mathRaiseTo","logAbsValue","getLog","correctValueByInterval","post","round","adjust","correctMinValueByEndOnTick","floorFunc","ceilFunc","resolveEndOnTick","endOnTick","isDefined","businessViewInfo","forceEndOnTick","floorTickValue","curValue","tickValue","prevTickDataDiff","intervalCount","businessDelta","businessRatio","potentialTickScreenDiff","delimiterFactor","delimiterMultiplier","isSpacedMargin","screenDelimiter","resolveEndOnTickLog","resolveEndOnTickDate","valueOf","resolveExtraTickForHiddenDataPoint","checkDataVisibility","extremum","tick","isMin","screenRatio","extDir","tickDir","resolveExtraTickForHiddenDataPointLog","resolveExtraTickForHiddenDataPointDate","getBusinessDelta","breaks","spacing","reduce","prev","item","to","from","getBusinessDeltaLog","getIntervalByFactor","addTickCount","getMultiplierFactor","factorDelta","calculateTickInterval","multipliers","allowDecimals","minTickInterval","result","onlyIntegers","adjustInterval","factor","concat","m","r","calculateMinorTickInterval","d","cur","getCalculateTickIntervalLog","skipCalculationLimits","__","getAdjustIntervalLog","getDataTimeMultipliers","gapSize","numbersReducer","key","yearsReducer","years","calculateTickIntervalDateTime","adjustIntervalDateTime","calculateMinorTickIntervalDateTime","getTickIntervalByCustomTicks","postProcess","addInterval","isNegative","addIntervalLog","log","raise","addIntervalDate","addIntervalWithBreaks","correctValue","filter","b","breakSize","every","calculateTicks","correctMinValue","gaps","generateExtraTick","correctTickValue","correctTickValueOnGapSize","checkMinDataVisibility","unshift","checkMaxDataVisibility","calculateMinorTicks","updateTickInterval","majorTicks","minorTickInterval","maxCount","lastMajor","firstMajor","tickBalance","middleTicks","prevTick","minors","maxValue","filterTicks","tmpTicks","slice","generator","getMajorTickIntervalByCustomTicks","getMinorTickIntervalByCustomTicks","convertTickInterval","processScaleBreaks","processCustomTicks","customTicks","majors","minorTicks","correctUserTickInterval","limit","incidentOccurred","generateMajorTicks","numberMultipliers","days","skipTickGeneration","generateMinorTicks","minorTickCount","calculateMinors","minorBusinessDelta","minorScreenDelta","minorAxisDivisionFactor","isNaN","getBaseTick","breakValue","_ref","_ref2","insideTick","getScaleBreaksProcessor","addCorrection","correction","breakTicks","cumulativeWidth","numericGenerator","calculateTickIntervalByCustomTicks","correctValueByIntervalLog","getRound","sign","logarithmicGenerator","logBase","absLog","absRaise","absFloor","absCeil","ceilNumber","dateGenerator","floorNumber","intervalObject","isString","getDateIntervalByString","toLowerCase","divider","quarters","correctDateWithUnitBeginning","v","firstDayOfWeek","floorAtStartDate","Date","getTime","getTimezoneOffset","setFullYear","getFullYear","setMonth","getMonth","months","setHours","getHours","hours","setMinutes","getMinutes","minutes","setSeconds","getSeconds","seconds","newValue","convertMillisecondsToDateUnits","exports","tickGenerator","rangeIsEmpty","axisType","dataType"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/axes/tick_generator.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _utils = require(\"../core/utils\");\r\nvar _date = require(\"../../core/utils/date\");\r\nvar _date2 = _interopRequireDefault(_date);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _math = require(\"../../core/utils/math\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _slicedToArray(arr, i) {\r\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest()\r\n}\r\n\r\nfunction _nonIterableRest() {\r\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")\r\n}\r\n\r\nfunction _iterableToArrayLimit(arr, i) {\r\n    if (!(Symbol.iterator in Object(arr) || \"[object Arguments]\" === Object.prototype.toString.call(arr))) {\r\n        return\r\n    }\r\n    var _arr = [];\r\n    var _n = true;\r\n    var _d = false;\r\n    var _e = void 0;\r\n    try {\r\n        for (var _s, _i = arr[Symbol.iterator](); !(_n = (_s = _i.next()).done); _n = true) {\r\n            _arr.push(_s.value);\r\n            if (i && _arr.length === i) {\r\n                break\r\n            }\r\n        }\r\n    } catch (err) {\r\n        _d = true;\r\n        _e = err\r\n    } finally {\r\n        try {\r\n            if (!_n && null != _i.return) {\r\n                _i.return()\r\n            }\r\n        } finally {\r\n            if (_d) {\r\n                throw _e\r\n            }\r\n        }\r\n    }\r\n    return _arr\r\n}\r\n\r\nfunction _arrayWithHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        return arr\r\n    }\r\n}\r\nvar convertDateUnitToMilliseconds = _date2.default.convertDateUnitToMilliseconds;\r\nvar dateToMilliseconds = _date2.default.dateToMilliseconds;\r\nvar math = Math;\r\nvar mathAbs = math.abs;\r\nvar mathFloor = math.floor;\r\nvar mathCeil = math.ceil;\r\nvar mathPow = math.pow;\r\nvar NUMBER_MULTIPLIERS = [1, 2, 2.5, 5];\r\nvar LOGARITHMIC_MULTIPLIERS = [1, 2, 3, 5];\r\nvar DATETIME_MULTIPLIERS = {\r\n    millisecond: [1, 2, 5, 10, 25, 50, 100, 250, 500],\r\n    second: [1, 2, 3, 5, 10, 15, 20, 30],\r\n    minute: [1, 2, 3, 5, 10, 15, 20, 30],\r\n    hour: [1, 2, 3, 4, 6, 8, 12],\r\n    day: [1, 2],\r\n    week: [1, 2],\r\n    month: [1, 2, 3, 6]\r\n};\r\nvar DATETIME_MULTIPLIERS_WITH_BIG_WEEKEND = (0, _extend.extend)({}, DATETIME_MULTIPLIERS, {\r\n    day: [1]\r\n});\r\nvar DATETIME_MINOR_MULTIPLIERS = {\r\n    millisecond: [1, 2, 5, 10, 25, 50, 100, 250, 500],\r\n    second: [1, 2, 3, 5, 10, 15, 20, 30],\r\n    minute: [1, 2, 3, 5, 10, 15, 20, 30],\r\n    hour: [1, 2, 3, 4, 6, 8, 12],\r\n    day: [1, 2, 3, 7, 14],\r\n    month: [1, 2, 3, 6]\r\n};\r\nvar MINOR_DELIMITERS = [2, 4, 5, 8, 10];\r\nvar VISIBILITY_DELIMITER = 3;\r\nvar MINUTE = 6e4;\r\n\r\nfunction dummyGenerator(options) {\r\n    return function(data, screenDelta, tickInterval, forceTickInterval) {\r\n        var count = mathFloor(screenDelta / options.axisDivisionFactor);\r\n        count = count < 1 ? 1 : count;\r\n        var interval = screenDelta / count;\r\n        return {\r\n            ticks: interval > 0 ? Array.apply(null, new Array(count + 1)).map(function(_, i) {\r\n                return interval * i\r\n            }) : [],\r\n            tickInterval: interval\r\n        }\r\n    }\r\n}\r\n\r\nfunction discreteGenerator(options) {\r\n    return function(data, screenDelta, tickInterval, forceTickInterval) {\r\n        var categories = (0, _utils.getCategoriesInfo)(data.categories, data.min, data.max).categories;\r\n        return {\r\n            ticks: categories,\r\n            tickInterval: mathCeil(categories.length * options.axisDivisionFactor / screenDelta)\r\n        }\r\n    }\r\n}\r\nvar getValue = function(value) {\r\n    return value\r\n};\r\nvar getLogValue = function(base, allowNegatives, linearThreshold) {\r\n    return function(value) {\r\n        return (0, _utils.getLogExt)(value, base, allowNegatives, linearThreshold)\r\n    }\r\n};\r\nvar raiseTo = function(base, allowNegatives, linearThreshold) {\r\n    return function(value) {\r\n        return (0, _utils.raiseToExt)(value, base, allowNegatives, linearThreshold)\r\n    }\r\n};\r\nvar mathRaiseTo = function(base) {\r\n    return function(value) {\r\n        return (0, _utils.raiseTo)(value, base)\r\n    }\r\n};\r\nvar logAbsValue = function(base) {\r\n    return function(value) {\r\n        return 0 === value ? 0 : (0, _utils.getLog)(mathAbs(value), base)\r\n    }\r\n};\r\nvar correctValueByInterval = function(post, round, getValue) {\r\n    return function(value, interval) {\r\n        return (0, _math.adjust)(post(round((0, _math.adjust)(getValue(value) / interval)) * interval))\r\n    }\r\n};\r\n\r\nfunction correctMinValueByEndOnTick(floorFunc, ceilFunc, resolveEndOnTick, endOnTick) {\r\n    if ((0, _type.isDefined)(endOnTick)) {\r\n        return endOnTick ? floorFunc : ceilFunc\r\n    }\r\n    return function(value, interval, businessViewInfo, forceEndOnTick) {\r\n        var floorTickValue = floorFunc(value, interval);\r\n        if (value - floorTickValue === 0 || !(0, _type.isDefined)(businessViewInfo) || resolveEndOnTick(value, floorTickValue, interval, businessViewInfo) || forceEndOnTick) {\r\n            return floorTickValue\r\n        }\r\n        return ceilFunc(value, interval)\r\n    }\r\n}\r\n\r\nfunction resolveEndOnTick(curValue, tickValue, interval, businessViewInfo) {\r\n    var prevTickDataDiff = interval - mathAbs(tickValue - curValue);\r\n    var intervalCount = math.max(mathCeil(businessViewInfo.businessDelta / interval), 2);\r\n    var businessRatio = businessViewInfo.screenDelta / (intervalCount * interval);\r\n    var potentialTickScreenDiff = math.round(businessRatio * prevTickDataDiff);\r\n    var delimiterFactor = (0, _utils.getLogExt)(businessRatio * interval / businessViewInfo.axisDivisionFactor, 2) + 1;\r\n    var delimiterMultiplier = (businessViewInfo.isSpacedMargin ? 2 : 1) * delimiterFactor;\r\n    var screenDelimiter = math.round(VISIBILITY_DELIMITER * delimiterMultiplier);\r\n    return businessViewInfo.businessDelta > businessViewInfo.interval && potentialTickScreenDiff >= screenDelimiter\r\n}\r\n\r\nfunction resolveEndOnTickLog(base) {\r\n    return function(curValue, tickValue, interval, businessViewInfo) {\r\n        return resolveEndOnTick((0, _utils.getLogExt)(curValue, base), (0, _utils.getLogExt)(tickValue, base), interval, businessViewInfo)\r\n    }\r\n}\r\n\r\nfunction resolveEndOnTickDate(curValue, tickValue, interval, businessViewInfo) {\r\n    return resolveEndOnTick(curValue.valueOf(), tickValue.valueOf(), dateToMilliseconds(interval), businessViewInfo)\r\n}\r\n\r\nfunction resolveExtraTickForHiddenDataPoint(checkDataVisibility, extremum, tick, businessViewInfo, isMin) {\r\n    var screenRatio = businessViewInfo.screenDelta / businessViewInfo.businessDelta;\r\n    var extDir = isMin ? 1 : -1;\r\n    var tickDir = isMin ? -1 : 1;\r\n    return checkDataVisibility && screenRatio * (extremum * extDir + tick * tickDir) < VISIBILITY_DELIMITER\r\n}\r\n\r\nfunction resolveExtraTickForHiddenDataPointLog(base) {\r\n    return function(checkDataVisibility, extremum, tick, businessViewInfo, isMin) {\r\n        return resolveExtraTickForHiddenDataPoint(checkDataVisibility, (0, _utils.getLogExt)(extremum, base), (0, _utils.getLogExt)(tick, base), businessViewInfo, isMin)\r\n    }\r\n}\r\n\r\nfunction resolveExtraTickForHiddenDataPointDate(checkDataVisibility, extremum, tick, businessViewInfo, isMin) {\r\n    return resolveExtraTickForHiddenDataPoint(checkDataVisibility, extremum.valueOf(), tick.valueOf(), businessViewInfo, isMin)\r\n}\r\n\r\nfunction getBusinessDelta(data, breaks) {\r\n    var spacing = 0;\r\n    if (breaks) {\r\n        spacing = breaks.reduce(function(prev, item) {\r\n            return prev + (item.to - item.from)\r\n        }, 0)\r\n    }\r\n    return mathAbs(data.max - data.min - spacing)\r\n}\r\n\r\nfunction getBusinessDeltaLog(base, allowNegatives, linearThreshold) {\r\n    var getLog = getLogValue(base, allowNegatives, linearThreshold);\r\n    return function(data, breaks) {\r\n        var spacing = 0;\r\n        if (breaks) {\r\n            spacing = breaks.reduce(function(prev, item) {\r\n                return prev + mathAbs(getLog(item.to / item.from))\r\n            }, 0)\r\n        }\r\n        return mathCeil(mathAbs(getLog(data.max) - getLog(data.min)) - spacing)\r\n    }\r\n}\r\n\r\nfunction getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor, addTickCount) {\r\n    var count = screenDelta / axisDivisionFactor - (addTickCount || 0);\r\n    count = count < 1 ? 1 : count;\r\n    return businessDelta / count\r\n}\r\n\r\nfunction getMultiplierFactor(interval, factorDelta) {\r\n    return mathPow(10, mathFloor((0, _utils.getLogExt)(interval, 10)) + (factorDelta || 0))\r\n}\r\n\r\nfunction calculateTickInterval(businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, addTickCount, _, minTickInterval) {\r\n    var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor, addTickCount);\r\n    var result = 1;\r\n    var onlyIntegers = false === allowDecimals;\r\n    if (!forceTickInterval || !tickInterval) {\r\n        if (interval >= 1 || !onlyIntegers && interval > 0) {\r\n            result = adjustInterval(interval, multipliers, onlyIntegers)\r\n        }\r\n        if (!tickInterval || !forceTickInterval && tickInterval < result) {\r\n            tickInterval = result\r\n        }\r\n    }\r\n    if (!forceTickInterval && minTickInterval) {\r\n        minTickInterval = adjustInterval(minTickInterval, multipliers, onlyIntegers);\r\n        if (minTickInterval > tickInterval) {\r\n            tickInterval = minTickInterval\r\n        }\r\n    }\r\n    return tickInterval\r\n}\r\n\r\nfunction adjustInterval(interval, multipliers, onlyIntegers) {\r\n    var factor = getMultiplierFactor(interval, -1);\r\n    var result = 1;\r\n    multipliers = multipliers || NUMBER_MULTIPLIERS;\r\n    if (interval > 0) {\r\n        interval /= factor;\r\n        result = multipliers.concat(10 * multipliers[0]).map(function(m) {\r\n            return 10 * m\r\n        }).reduce(function(r, m) {\r\n            if (.1 === factor && onlyIntegers && 25 === m) {\r\n                return r\r\n            }\r\n            return r < interval ? m : r\r\n        }, 0);\r\n        result = (0, _math.adjust)(result * factor, factor)\r\n    }\r\n    return result\r\n}\r\n\r\nfunction calculateMinorTickInterval(businessDelta, screenDelta, tickInterval, axisDivisionFactor) {\r\n    var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor);\r\n    return tickInterval || MINOR_DELIMITERS.reduce(function(r, d) {\r\n        var cur = businessDelta / d;\r\n        return cur >= interval ? cur : r\r\n    }, 0)\r\n}\r\n\r\nfunction getCalculateTickIntervalLog(skipCalculationLimits) {\r\n    return function(businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, _, __, minTickInterval) {\r\n        var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor);\r\n        var result = 0;\r\n        var adjustInterval = getAdjustIntervalLog(skipCalculationLimits);\r\n        if (!forceTickInterval || !tickInterval) {\r\n            if (interval > 0) {\r\n                result = adjustInterval(interval, multipliers)\r\n            }\r\n            if (!tickInterval || !forceTickInterval && tickInterval < result) {\r\n                tickInterval = result\r\n            }\r\n        }\r\n        if (!forceTickInterval && minTickInterval) {\r\n            minTickInterval = adjustInterval(minTickInterval, multipliers);\r\n            if (minTickInterval > tickInterval) {\r\n                tickInterval = minTickInterval\r\n            }\r\n        }\r\n        return tickInterval\r\n    }\r\n}\r\n\r\nfunction getAdjustIntervalLog(skipCalculationLimits) {\r\n    return function(interval, multipliers) {\r\n        var factor = getMultiplierFactor(interval);\r\n        multipliers = multipliers || LOGARITHMIC_MULTIPLIERS;\r\n        if (!skipCalculationLimits && factor < 1) {\r\n            factor = 1\r\n        }\r\n        return multipliers.concat(10 * multipliers[0]).reduce(function(r, m) {\r\n            return r < interval ? m * factor : r\r\n        }, 0)\r\n    }\r\n}\r\n\r\nfunction getDataTimeMultipliers(gapSize) {\r\n    if (gapSize && gapSize > 2) {\r\n        return DATETIME_MULTIPLIERS_WITH_BIG_WEEKEND\r\n    } else {\r\n        return DATETIME_MULTIPLIERS\r\n    }\r\n}\r\n\r\nfunction numbersReducer(interval, key) {\r\n    return function(r, m) {\r\n        if (!r && interval <= convertDateUnitToMilliseconds(key, m)) {\r\n            r = {};\r\n            r[key + \"s\"] = m\r\n        }\r\n        return r\r\n    }\r\n}\r\n\r\nfunction yearsReducer(interval, factor) {\r\n    return function(r, m) {\r\n        var years = factor * m;\r\n        if (!r && interval <= convertDateUnitToMilliseconds(\"year\", years) && 2.5 !== years) {\r\n            r = {\r\n                years: years\r\n            }\r\n        }\r\n        return r\r\n    }\r\n}\r\n\r\nfunction calculateTickIntervalDateTime(businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, addTickCount, gapSize, minTickInterval) {\r\n    if (!forceTickInterval || !tickInterval) {\r\n        var result = adjustIntervalDateTime(getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor), multipliers, null, gapSize);\r\n        if (!tickInterval || !forceTickInterval && dateToMilliseconds(tickInterval) <= dateToMilliseconds(result)) {\r\n            tickInterval = result\r\n        }\r\n    }\r\n    if (!forceTickInterval && minTickInterval) {\r\n        minTickInterval = adjustIntervalDateTime(minTickInterval, multipliers, null, gapSize);\r\n        if (dateToMilliseconds(minTickInterval) > dateToMilliseconds(tickInterval)) {\r\n            tickInterval = minTickInterval\r\n        }\r\n    }\r\n    return tickInterval\r\n}\r\n\r\nfunction adjustIntervalDateTime(interval, multipliers, _, gapSize) {\r\n    var result;\r\n    multipliers = multipliers || getDataTimeMultipliers(gapSize);\r\n    for (var key in multipliers) {\r\n        result = multipliers[key].reduce(numbersReducer(interval, key), result);\r\n        if (result) {\r\n            break\r\n        }\r\n    }\r\n    if (!result) {\r\n        for (var factor = 1;; factor *= 10) {\r\n            result = NUMBER_MULTIPLIERS.reduce(yearsReducer(interval, factor), result);\r\n            if (result) {\r\n                break\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction calculateMinorTickIntervalDateTime(businessDelta, screenDelta, tickInterval, axisDivisionFactor) {\r\n    return calculateTickIntervalDateTime(businessDelta, screenDelta, tickInterval, true, axisDivisionFactor, DATETIME_MINOR_MULTIPLIERS)\r\n}\r\n\r\nfunction getTickIntervalByCustomTicks(getValue, postProcess) {\r\n    return function(ticks) {\r\n        return ticks ? postProcess(mathAbs((0, _math.adjust)(getValue(ticks[1]) - getValue(ticks[0])))) || void 0 : void 0\r\n    }\r\n}\r\n\r\nfunction addInterval(value, interval, isNegative) {\r\n    return _date2.default.addInterval(value, interval, isNegative)\r\n}\r\n\r\nfunction addIntervalLog(log, raise) {\r\n    return function(value, interval, isNegative) {\r\n        return raise(addInterval(log(value), interval, isNegative))\r\n    }\r\n}\r\n\r\nfunction addIntervalDate(value, interval, isNegative) {\r\n    return addInterval(value, interval, isNegative)\r\n}\r\n\r\nfunction addIntervalWithBreaks(addInterval, breaks, correctValue) {\r\n    breaks = breaks.filter(function(b) {\r\n        return !b.gapSize\r\n    });\r\n    return function(value, interval, isNegative) {\r\n        var breakSize;\r\n        value = addInterval(value, interval, isNegative);\r\n        if (!breaks.every(function(item) {\r\n                if (value >= addInterval(item.from, interval) && addInterval(value, interval) < item.to) {\r\n                    breakSize = item.to - item.from - 2 * (addInterval(item.from, interval) - item.from)\r\n                }\r\n                return !breakSize\r\n            })) {\r\n            value = correctValue(addInterval(value, breakSize), interval)\r\n        }\r\n        return value\r\n    }\r\n}\r\n\r\nfunction calculateTicks(addInterval, correctMinValue, adjustInterval, resolveEndOnTick, resolveExtraTickForHiddenDataPoint) {\r\n    return function(data, tickInterval, endOnTick, gaps, breaks, businessDelta, screenDelta, axisDivisionFactor, generateExtraTick) {\r\n        var correctTickValue = correctTickValueOnGapSize(addInterval, gaps);\r\n        var min = data.min;\r\n        var max = data.max;\r\n        var businessViewInfo = {\r\n            screenDelta: screenDelta,\r\n            businessDelta: businessDelta,\r\n            axisDivisionFactor: axisDivisionFactor,\r\n            isSpacedMargin: data.isSpacedMargin,\r\n            interval: tickInterval\r\n        };\r\n        var cur = correctMinValue(min, tickInterval, businessViewInfo);\r\n        var ticks = [];\r\n        if (breaks && breaks.length) {\r\n            addInterval = addIntervalWithBreaks(addInterval, breaks, correctMinValue)\r\n        }\r\n        if (cur > max) {\r\n            cur = correctMinValue(min, adjustInterval(businessDelta / 2), businessViewInfo);\r\n            if (cur > max) {\r\n                endOnTick = true;\r\n                cur = correctMinValue(min, tickInterval, businessViewInfo, endOnTick)\r\n            }\r\n        }\r\n        cur = correctTickValue(cur);\r\n        var prev;\r\n        while (cur < max && cur !== prev || generateExtraTick && cur <= max) {\r\n            ticks.push(cur);\r\n            prev = cur;\r\n            cur = correctTickValue(addInterval(cur, tickInterval))\r\n        }\r\n        if (endOnTick || cur - max === 0 || !(0, _type.isDefined)(endOnTick) && resolveEndOnTick(max, cur, tickInterval, businessViewInfo)) {\r\n            ticks.push(cur)\r\n        }\r\n        if (ticks.length > 0) {\r\n            if (ticks[0].valueOf() > 0 && resolveExtraTickForHiddenDataPoint(data.checkMinDataVisibility, min, ticks[0], businessViewInfo, true)) {\r\n                cur = addInterval(ticks[0], tickInterval, true);\r\n                ticks.unshift(cur)\r\n            } else {\r\n                if (ticks[ticks.length - 1].valueOf() < 0 && resolveExtraTickForHiddenDataPoint(data.checkMaxDataVisibility, max, ticks[ticks.length - 1], businessViewInfo, false)) {\r\n                    cur = addInterval(ticks[ticks.length - 1], tickInterval);\r\n                    ticks.push(cur)\r\n                }\r\n            }\r\n        }\r\n        return ticks\r\n    }\r\n}\r\n\r\nfunction calculateMinorTicks(updateTickInterval, addInterval, correctMinValue, correctTickValue, ceil) {\r\n    return function(min, max, majorTicks, minorTickInterval, tickInterval, breaks, maxCount) {\r\n        var factor = tickInterval / minorTickInterval;\r\n        var lastMajor = majorTicks[majorTicks.length - 1];\r\n        var firstMajor = majorTicks[0];\r\n        var tickBalance = maxCount - 1;\r\n        if (breaks && breaks.length) {\r\n            addInterval = addIntervalWithBreaks(addInterval, breaks, correctMinValue)\r\n        }\r\n        minorTickInterval = updateTickInterval(minorTickInterval, firstMajor, firstMajor, factor);\r\n        if (0 === minorTickInterval) {\r\n            return []\r\n        }\r\n        var cur = correctTickValue(correctMinValue(min, tickInterval, min), minorTickInterval);\r\n        minorTickInterval = updateTickInterval(minorTickInterval, firstMajor, cur, factor);\r\n        var ticks = [];\r\n        while (cur < firstMajor && (!tickBalance || tickBalance > 0)) {\r\n            cur >= min && ticks.push(cur);\r\n            tickBalance--;\r\n            cur = addInterval(cur, minorTickInterval)\r\n        }\r\n        var middleTicks = majorTicks.reduce(function(r, tick) {\r\n            tickBalance = maxCount - 1;\r\n            if (null === r.prevTick) {\r\n                r.prevTick = tick;\r\n                return r\r\n            }\r\n            minorTickInterval = updateTickInterval(minorTickInterval, tick, r.prevTick, factor);\r\n            var cur = correctTickValue(r.prevTick, minorTickInterval);\r\n            while (cur < tick && (!tickBalance || tickBalance > 0)) {\r\n                cur !== r.prevTick && r.minors.push(cur);\r\n                tickBalance--;\r\n                cur = addInterval(cur, minorTickInterval)\r\n            }\r\n            r.prevTick = tick;\r\n            return r\r\n        }, {\r\n            prevTick: null,\r\n            minors: []\r\n        });\r\n        ticks = ticks.concat(middleTicks.minors);\r\n        var maxValue = ceil(max, tickInterval, min);\r\n        minorTickInterval = updateTickInterval(minorTickInterval, maxValue, maxValue, factor);\r\n        cur = correctTickValue(lastMajor, minorTickInterval);\r\n        var prev;\r\n        while (cur < max && cur !== prev) {\r\n            ticks.push(cur);\r\n            prev = cur;\r\n            cur = addInterval(cur, minorTickInterval)\r\n        }\r\n        if (lastMajor - max !== 0 && cur - max === 0) {\r\n            ticks.push(cur)\r\n        }\r\n        return ticks\r\n    }\r\n}\r\n\r\nfunction filterTicks(ticks, breaks) {\r\n    if (breaks.length) {\r\n        var result = breaks.reduce(function(result, b) {\r\n            var tmpTicks = [];\r\n            var i;\r\n            for (i = result[1]; i < ticks.length; i++) {\r\n                var tickValue = ticks[i];\r\n                if (tickValue < b.from) {\r\n                    tmpTicks.push(tickValue)\r\n                }\r\n                if (tickValue >= b.to) {\r\n                    break\r\n                }\r\n            }\r\n            return [result[0].concat(tmpTicks), i]\r\n        }, [\r\n            [], 0\r\n        ]);\r\n        return result[0].concat(ticks.slice(result[1]))\r\n    }\r\n    return ticks\r\n}\r\n\r\nfunction correctTickValueOnGapSize(addInterval, breaks) {\r\n    return function(value) {\r\n        var gapSize;\r\n        if (!breaks.every(function(item) {\r\n                if (value >= item.from && value < item.to) {\r\n                    gapSize = item.gapSize\r\n                }\r\n                return !gapSize\r\n            })) {\r\n            value = addInterval(value, gapSize)\r\n        }\r\n        return value\r\n    }\r\n}\r\n\r\nfunction generator(options, getBusinessDelta, calculateTickInterval, calculateMinorTickInterval, getMajorTickIntervalByCustomTicks, getMinorTickIntervalByCustomTicks, convertTickInterval, calculateTicks, calculateMinorTicks, processScaleBreaks) {\r\n    function processCustomTicks(customTicks) {\r\n        return {\r\n            tickInterval: getMajorTickIntervalByCustomTicks(customTicks.majors),\r\n            ticks: customTicks.majors || [],\r\n            minorTickInterval: getMinorTickIntervalByCustomTicks(customTicks.minors),\r\n            minorTicks: customTicks.minors || []\r\n        }\r\n    }\r\n\r\n    function correctUserTickInterval(tickInterval, businessDelta, limit) {\r\n        if (tickInterval && businessDelta / convertTickInterval(tickInterval) >= limit + 1) {\r\n            options.incidentOccurred(\"W2003\");\r\n            tickInterval = void 0\r\n        }\r\n        return tickInterval\r\n    }\r\n\r\n    function generateMajorTicks(ticks, data, businessDelta, screenDelta, tickInterval, forceTickInterval, customTicks, breaks) {\r\n        if (customTicks.majors) {\r\n            ticks.breaks = breaks;\r\n            return ticks\r\n        }\r\n        var gaps = breaks.filter(function(b) {\r\n            return b.gapSize\r\n        });\r\n        var majorTicks;\r\n        tickInterval = options.skipCalculationLimits ? tickInterval : correctUserTickInterval(tickInterval, businessDelta, screenDelta);\r\n        tickInterval = calculateTickInterval(businessDelta, screenDelta, tickInterval, forceTickInterval, options.axisDivisionFactor, options.numberMultipliers, options.allowDecimals, breaks.length, gaps[0] && gaps[0].gapSize.days, options.minTickInterval);\r\n        if (!options.skipTickGeneration) {\r\n            majorTicks = calculateTicks(data, tickInterval, options.endOnTick, gaps, breaks, businessDelta, screenDelta, options.axisDivisionFactor, options.generateExtraTick);\r\n            breaks = processScaleBreaks(breaks, majorTicks, tickInterval);\r\n            majorTicks = filterTicks(majorTicks, breaks);\r\n            ticks.breaks = breaks;\r\n            ticks.ticks = ticks.ticks.concat(majorTicks)\r\n        }\r\n        ticks.tickInterval = tickInterval;\r\n        return ticks\r\n    }\r\n\r\n    function generateMinorTicks(ticks, data, businessDelta, screenDelta, minorTickInterval, minorTickCount, customTicks) {\r\n        if (!options.calculateMinors) {\r\n            return ticks\r\n        }\r\n        if (customTicks.minors) {\r\n            return ticks\r\n        }\r\n        var minorBusinessDelta = convertTickInterval(ticks.tickInterval);\r\n        var minorScreenDelta = screenDelta * minorBusinessDelta / businessDelta;\r\n        var breaks = ticks.breaks;\r\n        if (!minorTickInterval && minorTickCount) {\r\n            minorTickInterval = getMinorTickIntervalByCustomTicks([minorBusinessDelta / (minorTickCount + 1), minorBusinessDelta / (minorTickCount + 1) * 2])\r\n        } else {\r\n            minorTickCount = void 0\r\n        }\r\n        minorTickInterval = correctUserTickInterval(minorTickInterval, minorBusinessDelta, minorScreenDelta);\r\n        minorTickInterval = calculateMinorTickInterval(minorBusinessDelta, minorScreenDelta, minorTickInterval, options.minorAxisDivisionFactor);\r\n        ticks.minorTicks = filterTicks(ticks.minorTicks.concat(calculateMinorTicks(data.min, data.max, ticks.ticks, minorTickInterval, ticks.tickInterval, breaks, minorTickCount)), breaks);\r\n        ticks.minorTickInterval = minorTickInterval;\r\n        return ticks\r\n    }\r\n    return function(data, screenDelta, tickInterval, forceTickInterval, customTicks, minorTickInterval, minorTickCount, breaks) {\r\n        customTicks = customTicks || {};\r\n        var businessDelta = getBusinessDelta(data, breaks);\r\n        var result = processCustomTicks(customTicks);\r\n        if (!isNaN(businessDelta)) {\r\n            if (0 === businessDelta && !customTicks.majors) {\r\n                result.ticks = [data.min]\r\n            } else {\r\n                result = generateMajorTicks(result, data, businessDelta, screenDelta, tickInterval, forceTickInterval, customTicks, breaks || []);\r\n                if (!options.skipTickGeneration && businessDelta > 0) {\r\n                    result = generateMinorTicks(result, data, businessDelta, screenDelta, minorTickInterval, minorTickCount, customTicks)\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    }\r\n}\r\n\r\nfunction getBaseTick(breakValue, _ref, interval, getValue) {\r\n    var _ref2 = _slicedToArray(_ref, 2),\r\n        tick = _ref2[0],\r\n        insideTick = _ref2[1];\r\n    if (!(0, _type.isDefined)(tick) || mathAbs(getValue(breakValue) - getValue(tick)) / interval > .25) {\r\n        if ((0, _type.isDefined)(insideTick)) {\r\n            tick = insideTick\r\n        } else {\r\n            if (!(0, _type.isDefined)(tick)) {\r\n                tick = breakValue\r\n            }\r\n        }\r\n    }\r\n    return tick\r\n}\r\n\r\nfunction getScaleBreaksProcessor(convertTickInterval, getValue, addCorrection) {\r\n    return function(breaks, ticks, tickInterval) {\r\n        var interval = convertTickInterval(tickInterval);\r\n        var correction = .5 * interval;\r\n        return breaks.reduce(function(result, b) {\r\n            var breakTicks = ticks.filter(function(tick) {\r\n                return tick <= b.from\r\n            });\r\n            var from = addCorrection(getBaseTick(b.from, [].concat(breakTicks[breakTicks.length - 1], ticks[breakTicks.length]), interval, getValue), correction);\r\n            breakTicks = ticks.filter(function(tick) {\r\n                return tick >= b.to\r\n            });\r\n            var to = addCorrection(getBaseTick(b.to, [].concat(breakTicks[0], ticks[ticks.length - breakTicks.length - 1]), interval, getValue), -correction);\r\n            if (getValue(to) - getValue(from) < interval && !b.gapSize) {\r\n                return result\r\n            }\r\n            if (b.gapSize) {\r\n                return result.concat([b])\r\n            }\r\n            return result.concat([{\r\n                from: from,\r\n                to: to,\r\n                cumulativeWidth: b.cumulativeWidth\r\n            }])\r\n        }, [])\r\n    }\r\n}\r\n\r\nfunction numericGenerator(options) {\r\n    var floor = correctValueByInterval(getValue, mathFloor, getValue);\r\n    var ceil = correctValueByInterval(getValue, mathCeil, getValue);\r\n    var calculateTickIntervalByCustomTicks = getTickIntervalByCustomTicks(getValue, getValue);\r\n    return generator(options, getBusinessDelta, calculateTickInterval, calculateMinorTickInterval, calculateTickIntervalByCustomTicks, calculateTickIntervalByCustomTicks, getValue, calculateTicks(addInterval, correctMinValueByEndOnTick(floor, ceil, resolveEndOnTick, options.endOnTick), adjustInterval, resolveEndOnTick, resolveExtraTickForHiddenDataPoint), calculateMinorTicks(getValue, addInterval, floor, addInterval, getValue), getScaleBreaksProcessor(getValue, getValue, function(value, correction) {\r\n        return value + correction\r\n    }))\r\n}\r\nvar correctValueByIntervalLog = function(post, getRound, getValue) {\r\n    return function(value, interval) {\r\n        return (0, _math.sign)(value) * (0, _math.adjust)(post(getRound(value)((0, _math.adjust)(getValue(value) / interval)) * interval))\r\n    }\r\n};\r\n\r\nfunction logarithmicGenerator(options) {\r\n    var base = options.logBase;\r\n    var raise = raiseTo(base, options.allowNegatives, options.linearThreshold);\r\n    var log = getLogValue(base, options.allowNegatives, options.linearThreshold);\r\n    var absLog = logAbsValue(base);\r\n    var absRaise = mathRaiseTo(base);\r\n    var absFloor = function(value) {\r\n        return value < 0 ? mathCeil : mathFloor\r\n    };\r\n    var absCeil = function(value) {\r\n        return value < 0 ? mathFloor : mathCeil\r\n    };\r\n    var floor = correctValueByIntervalLog(absRaise, absFloor, absLog);\r\n    var ceil = correctValueByIntervalLog(absRaise, absCeil, absLog);\r\n    var ceilNumber = correctValueByInterval(getValue, mathCeil, getValue);\r\n    return generator(options, getBusinessDeltaLog(base, options.allowNegatives, options.linearThreshold), getCalculateTickIntervalLog(options.skipCalculationLimits), calculateMinorTickInterval, getTickIntervalByCustomTicks(log, getValue), getTickIntervalByCustomTicks(getValue, getValue), getValue, calculateTicks(addIntervalLog(log, raise), correctMinValueByEndOnTick(floor, ceil, resolveEndOnTickLog(base), options.endOnTick), getAdjustIntervalLog(options.skipCalculationLimits), resolveEndOnTickLog(base), resolveExtraTickForHiddenDataPointLog(base)), calculateMinorTicks(function(_, tick, prevTick, factor) {\r\n        return Math.max(Math.abs(tick), Math.abs(prevTick)) / factor\r\n    }, addInterval, floor, ceilNumber, ceil), getScaleBreaksProcessor(getValue, log, function(value, correction) {\r\n        return raise(log(value) + correction)\r\n    }))\r\n}\r\n\r\nfunction dateGenerator(options) {\r\n    function floor(value, interval) {\r\n        var floorNumber = correctValueByInterval(getValue, mathFloor, getValue);\r\n        var intervalObject = (0, _type.isString)(interval) ? _date2.default.getDateIntervalByString(interval.toLowerCase()) : interval;\r\n        var divider = dateToMilliseconds(interval);\r\n        if (intervalObject.days % 7 === 0 || interval.quarters) {\r\n            intervalObject = adjustIntervalDateTime(divider)\r\n        }\r\n        var correctDateWithUnitBeginning = function(v) {\r\n            return _date2.default.correctDateWithUnitBeginning(v, intervalObject, null, options.firstDayOfWeek)\r\n        };\r\n        var floorAtStartDate = function(v) {\r\n            return new Date(mathFloor((v.getTime() - v.getTimezoneOffset() * MINUTE) / divider) * divider + v.getTimezoneOffset() * MINUTE)\r\n        };\r\n        value = correctDateWithUnitBeginning(value);\r\n        if (\"years\" in intervalObject) {\r\n            value.setFullYear(floorNumber(value.getFullYear(), intervalObject.years, 0))\r\n        } else {\r\n            if (\"quarters\" in intervalObject) {\r\n                value = correctDateWithUnitBeginning(floorAtStartDate(value))\r\n            } else {\r\n                if (\"months\" in intervalObject) {\r\n                    value.setMonth(floorNumber(value.getMonth(), intervalObject.months, 0))\r\n                } else {\r\n                    if (\"weeks\" in intervalObject || \"days\" in intervalObject) {\r\n                        value = correctDateWithUnitBeginning(floorAtStartDate(value))\r\n                    } else {\r\n                        if (\"hours\" in intervalObject) {\r\n                            value.setHours(floorNumber(value.getHours(), intervalObject.hours, 0))\r\n                        } else {\r\n                            if (\"minutes\" in intervalObject) {\r\n                                value.setMinutes(floorNumber(value.getMinutes(), intervalObject.minutes, 0))\r\n                            } else {\r\n                                if (\"seconds\" in intervalObject) {\r\n                                    value.setSeconds(floorNumber(value.getSeconds(), intervalObject.seconds, 0))\r\n                                } else {\r\n                                    if (\"milliseconds\" in intervalObject) {\r\n                                        value = floorAtStartDate(value)\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return value\r\n    }\r\n\r\n    function ceil(value, interval) {\r\n        var newValue = floor(value, interval);\r\n        while (value - newValue > 0) {\r\n            newValue = addIntervalDate(newValue, interval)\r\n        }\r\n        return newValue\r\n    }\r\n    var calculateTickIntervalByCustomTicks = getTickIntervalByCustomTicks(getValue, _date2.default.convertMillisecondsToDateUnits);\r\n    return generator(options, getBusinessDelta, calculateTickIntervalDateTime, calculateMinorTickIntervalDateTime, calculateTickIntervalByCustomTicks, calculateTickIntervalByCustomTicks, dateToMilliseconds, calculateTicks(addIntervalDate, correctMinValueByEndOnTick(floor, ceil, resolveEndOnTickDate, options.endOnTick), adjustIntervalDateTime, resolveEndOnTickDate, resolveExtraTickForHiddenDataPointDate), calculateMinorTicks(getValue, addIntervalDate, floor, addIntervalDate, getValue), getScaleBreaksProcessor(dateToMilliseconds, getValue, function(value, correction) {\r\n        return new Date(value.getTime() + correction)\r\n    }))\r\n}\r\nexports.tickGenerator = function(options) {\r\n    var result;\r\n    if (options.rangeIsEmpty) {\r\n        result = dummyGenerator(options)\r\n    } else {\r\n        if (\"discrete\" === options.axisType) {\r\n            result = discreteGenerator(options)\r\n        } else {\r\n            if (\"logarithmic\" === options.axisType) {\r\n                result = logarithmicGenerator(options)\r\n            } else {\r\n                if (\"datetime\" === options.dataType) {\r\n                    result = dateGenerator(options)\r\n                } else {\r\n                    result = numericGenerator(options)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result\r\n};\r\n"]},"metadata":{},"sourceType":"script"}