{"ast":null,"code":"/**\r\n * DevExtreme (viz/vector_map/gesture_handler.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _ln = Math.log;\nvar _LN2 = Math.LN2;\n\nfunction GestureHandler(params) {\n  var that = this;\n  that._projection = params.projection;\n  that._renderer = params.renderer;\n  that._x = that._y = 0;\n\n  that._subscribeToTracker(params.tracker);\n}\n\nGestureHandler.prototype = {\n  constructor: GestureHandler,\n  dispose: function dispose() {\n    this._offTracker();\n\n    this._offTracker = null;\n  },\n  _subscribeToTracker: function _subscribeToTracker(tracker) {\n    var that = this;\n    var isActive = false;\n    that._offTracker = tracker.on({\n      start: function start(arg) {\n        isActive = \"control-bar\" !== arg.data.name;\n\n        if (isActive) {\n          that._processStart(arg);\n        }\n      },\n      move: function move(arg) {\n        if (isActive) {\n          that._processMove(arg);\n        }\n      },\n      end: function end() {\n        if (isActive) {\n          that._processEnd();\n        }\n      },\n      zoom: function zoom(arg) {\n        that._processZoom(arg);\n      }\n    });\n  },\n  setInteraction: function setInteraction(options) {\n    this._processEnd();\n\n    this._centeringEnabled = options.centeringEnabled;\n    this._zoomingEnabled = options.zoomingEnabled;\n  },\n  _processStart: function _processStart(arg) {\n    if (this._centeringEnabled) {\n      this._x = arg.x;\n      this._y = arg.y;\n\n      this._projection.beginMoveCenter();\n    }\n  },\n  _processMove: function _processMove(arg) {\n    var that = this;\n\n    if (that._centeringEnabled) {\n      that._renderer.root.attr({\n        cursor: \"move\"\n      });\n\n      that._projection.moveCenter([that._x - arg.x, that._y - arg.y]);\n\n      that._x = arg.x;\n      that._y = arg.y;\n    }\n  },\n  _processEnd: function _processEnd() {\n    if (this._centeringEnabled) {\n      this._renderer.root.attr({\n        cursor: \"default\"\n      });\n\n      this._projection.endMoveCenter();\n    }\n  },\n  _processZoom: function _processZoom(arg) {\n    var that = this;\n    var delta;\n    var screenPosition;\n    var coords;\n\n    if (that._zoomingEnabled) {\n      if (arg.delta) {\n        delta = arg.delta;\n      } else {\n        if (arg.ratio) {\n          delta = _ln(arg.ratio) / _LN2;\n        }\n      }\n\n      if (that._centeringEnabled) {\n        screenPosition = that._renderer.getRootOffset();\n        screenPosition = [arg.x - screenPosition.left, arg.y - screenPosition.top];\n        coords = that._projection.fromScreenPoint(screenPosition);\n      }\n\n      that._projection.changeScaledZoom(delta);\n\n      if (that._centeringEnabled) {\n        that._projection.setCenterByPoint(coords, screenPosition);\n      }\n    }\n  }\n};\nexports.GestureHandler = GestureHandler;","map":null,"metadata":{},"sourceType":"script"}