{"ast":null,"code":"/**\r\n * DevExtreme (viz/sankey/tracker.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar proto = require(\"./sankey\").prototype;\n\nvar Tracker = require(\"../components/tracker\").Tracker;\n\nvar DATA_KEY_BASE = \"__sankey_data_\";\nvar dataKeyModifier = 0;\nproto._eventsMap.onNodeClick = {\n  name: \"nodeClick\"\n};\nproto._eventsMap.onLinkClick = {\n  name: \"linkClick\"\n};\nexports.plugin = {\n  name: \"tracker\",\n  init: function init() {\n    var that = this;\n    var dataKey = DATA_KEY_BASE + dataKeyModifier++;\n    that._tracker = new Tracker({\n      widget: that,\n      root: that._renderer.root,\n      getData: function getData(e) {\n        var target = e.target;\n        return target[dataKey];\n      },\n      getNode: function getNode(index) {\n        if (index < that._nodes.length) {\n          return that._nodes[index];\n        } else {\n          return that._links[index - that._nodes.length];\n        }\n      },\n      click: function click(e) {\n        var eventName = this.getData(e.event) < that._nodes.length ? \"nodeClick\" : \"linkClick\";\n\n        that._eventTrigger(eventName, {\n          target: e.node,\n          event: e.event\n        });\n      }\n    });\n    this._dataKey = dataKey;\n  },\n  dispose: function dispose() {\n    this._tracker.dispose();\n  },\n  extenders: {\n    _change_LINKS_DRAW: function _change_LINKS_DRAW() {\n      var dataKey = this._dataKey;\n\n      this._nodes.concat(this._links).forEach(function (item, index) {\n        item.element.data(dataKey, index);\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"script"}