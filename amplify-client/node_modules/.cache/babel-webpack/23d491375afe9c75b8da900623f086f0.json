{"ast":null,"code":"/**\r\n * DevExtreme (viz/tree_map/tooltip.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar proto = require(\"./tree_map.base\").prototype;\n\nvar expand = require(\"../core/helpers\").expand;\n\nrequire(\"./api\");\n\nexpand(proto, \"_extendProxyType\", function (proto) {\n  var that = this;\n\n  proto.showTooltip = function (coords) {\n    that._showTooltip(this._id, coords);\n  };\n});\nexpand(proto, \"_onNodesCreated\", function () {\n  if (this._tooltipIndex >= 0) {\n    this._tooltip.hide();\n  }\n\n  this._tooltipIndex = -1;\n});\nexpand(proto, \"_onTilingPerformed\", function () {\n  if (this._tooltipIndex >= 0) {\n    this._moveTooltip(this._nodes[this._tooltipIndex]);\n  }\n});\n\nfunction getCoords(rect, renderer) {\n  var offset = renderer.getRootOffset();\n  return [(rect[0] + rect[2]) / 2 + offset.left, (rect[1] + rect[3]) / 2 + offset.top];\n}\n\nproto._showTooltip = function (index, coords) {\n  var that = this;\n  var tooltip = that._tooltip;\n  var node = that._nodes[index];\n  var state = that._tooltipIndex === index || tooltip.show({\n    value: node.value,\n    valueText: tooltip.formatValue(node.value),\n    node: node.proxy\n  }, {\n    x: 0,\n    y: 0,\n    offset: 0\n  }, {\n    node: node.proxy\n  });\n\n  if (state) {\n    that._moveTooltip(node, coords);\n  } else {\n    tooltip.hide();\n  }\n\n  that._tooltipIndex = state ? index : -1;\n};\n\nproto._moveTooltip = function (node, coords) {\n  var xy = coords || node.rect && getCoords(node.rect, this._renderer) || [-1e3, -1e3];\n\n  this._tooltip.move(xy[0], xy[1], 0);\n};\n\nproto.hideTooltip = function () {\n  if (this._tooltipIndex >= 0) {\n    this._tooltipIndex = -1;\n\n    this._tooltip.hide();\n  }\n};\n\nrequire(\"./tree_map.base\").addPlugin(require(\"../core/tooltip\").plugin);","map":null,"metadata":{},"sourceType":"script"}