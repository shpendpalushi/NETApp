{"ast":null,"code":"/**\r\n * DevExtreme (viz/core/export.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.plugin = exports.ExportMenu = exports.combineMarkups = exports.exportWidgets = exports.getMarkup = exports.exportFromMarkup = void 0;\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _utils = require(\"./utils\");\n\nvar _exporter = require(\"../../exporter\");\n\nvar _exporter2 = _interopRequireDefault(_exporter);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _hover = require(\"../../events/hover\");\n\nvar _hover2 = _interopRequireDefault(_hover);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _console = require(\"../../core/utils/console\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar imageExporter = _exporter2.default.image;\nvar svgExporter = _exporter2.default.svg;\nvar pdfExporter = _exporter2.default.pdf;\nvar pointerActions = [_pointer2.default.down, _pointer2.default.move].join(\" \");\nvar BUTTON_SIZE = 35;\nvar ICON_COORDS = [[9, 12, 26, 12, 26, 14, 9, 14], [9, 17, 26, 17, 26, 19, 9, 19], [9, 22, 26, 22, 26, 24, 9, 24]];\nvar LIST_PADDING_TOP = 4;\nvar LIST_WIDTH = 120;\nvar VERTICAL_TEXT_MARGIN = 8;\nvar HORIZONTAL_TEXT_MARGIN = 15;\nvar MENU_ITEM_HEIGHT = 30;\nvar LIST_STROKE_WIDTH = 1;\nvar MARGIN = 10;\nvar SHADOW_OFFSET = 2;\nvar SHADOW_BLUR = 3;\nvar DEFAULT_EXPORT_FORMAT = \"PNG\";\nvar ALLOWED_IMAGE_FORMATS = [DEFAULT_EXPORT_FORMAT, \"JPEG\", \"GIF\"];\nvar ALLOWED_EXTRA_FORMATS = [\"PDF\", \"SVG\"];\nvar EXPORT_CSS_CLASS = \"dx-export-menu\";\nvar EXPORT_DATA_KEY = \"export-element-type\";\nvar FORMAT_DATA_KEY = \"export-element-format\";\nvar GET_COLOR_REGEX = /data-backgroundcolor=\"([^\"]*)\"/;\n\nfunction getValidFormats() {\n  var imageFormats = imageExporter.testFormats(ALLOWED_IMAGE_FORMATS);\n  return {\n    unsupported: imageFormats.unsupported,\n    supported: imageFormats.supported.concat(ALLOWED_EXTRA_FORMATS)\n  };\n}\n\nfunction validateFormat(format, incidentOccurred, validFormats) {\n  validFormats = validFormats || getValidFormats();\n  format = String(format).toUpperCase();\n\n  if (validFormats.supported.indexOf(format) !== -1) {\n    return format;\n  }\n\n  if (validFormats.unsupported.indexOf(format) !== -1) {\n    incidentOccurred && incidentOccurred(\"W2108\", [format]);\n  }\n}\n\nfunction getCreatorFunc(format) {\n  if (\"SVG\" === format) {\n    return svgExporter.getData;\n  } else {\n    if (\"PDF\" === format) {\n      return pdfExporter.getData;\n    } else {\n      return imageExporter.getData;\n    }\n  }\n}\n\nfunction _print(imageSrc, options) {\n  var document = (0, _window.getWindow)().document;\n  var iFrame = document.createElement(\"iframe\");\n  iFrame.onload = setPrint(imageSrc, options);\n  iFrame.style.visibility = \"hidden\";\n  iFrame.style.position = \"fixed\";\n  iFrame.style.right = \"0\";\n  iFrame.style.bottom = \"0\";\n  document.body.appendChild(iFrame);\n}\n\nfunction setPrint(imageSrc, options) {\n  return function () {\n    var _this = this;\n\n    var window = this.contentWindow;\n    var img = window.document.createElement(\"img\");\n    window.document.body.appendChild(img);\n\n    var removeFrame = function removeFrame() {\n      _this.parentElement.removeChild(_this);\n    };\n\n    img.addEventListener(\"load\", function () {\n      window.focus();\n      window.print();\n      removeFrame();\n    });\n    img.addEventListener(\"error\", removeFrame);\n    img.src = imageSrc;\n  };\n}\n\nfunction getItemAttributes(options, type, itemIndex) {\n  var x = BUTTON_SIZE - LIST_WIDTH;\n  var y = BUTTON_SIZE + LIST_PADDING_TOP + LIST_STROKE_WIDTH + itemIndex * MENU_ITEM_HEIGHT;\n  var attr = {\n    rect: {\n      width: LIST_WIDTH - 2 * LIST_STROKE_WIDTH,\n      height: MENU_ITEM_HEIGHT,\n      x: x + LIST_STROKE_WIDTH,\n      y: y\n    },\n    text: {\n      x: x + (options.rtl ? LIST_WIDTH - HORIZONTAL_TEXT_MARGIN : HORIZONTAL_TEXT_MARGIN),\n      y: y + MENU_ITEM_HEIGHT - VERTICAL_TEXT_MARGIN\n    }\n  };\n\n  if (\"printing\" === type) {\n    attr.separator = {\n      stroke: options.button.default.borderColor,\n      \"stroke-width\": LIST_STROKE_WIDTH,\n      cursor: \"pointer\",\n      sharp: \"v\",\n      d: \"M \" + x + \" \" + (y + MENU_ITEM_HEIGHT - LIST_STROKE_WIDTH) + \" L \" + (x + LIST_WIDTH) + \" \" + (y + MENU_ITEM_HEIGHT - LIST_STROKE_WIDTH)\n    };\n  }\n\n  return attr;\n}\n\nfunction createMenuItem(renderer, options, settings) {\n  var itemData = {};\n  var type = settings.type;\n  var format = settings.format;\n  var attr = getItemAttributes(options, type, settings.itemIndex);\n  var fontStyle = (0, _utils.patchFontOptions)(options.font);\n  fontStyle[\"pointer-events\"] = \"none\";\n  var menuItem = renderer.g().attr({\n    \"class\": EXPORT_CSS_CLASS + \"-list-item\"\n  });\n  itemData[EXPORT_DATA_KEY] = type;\n\n  if (format) {\n    itemData[FORMAT_DATA_KEY] = format;\n  }\n\n  var rect = renderer.rect();\n  rect.attr(attr.rect).css({\n    cursor: \"pointer\",\n    \"pointer-events\": \"all\"\n  }).data(itemData);\n  rect.on(_hover2.default.start + \".export\", function () {\n    return rect.attr({\n      fill: options.button.hover.backgroundColor\n    });\n  }).on(_hover2.default.end + \".export\", function () {\n    return rect.attr({\n      fill: null\n    });\n  });\n  rect.append(menuItem);\n  var text = renderer.text(settings.text).css(fontStyle).attr(attr.text).append(menuItem);\n\n  if (\"printing\" === type) {\n    renderer.path(null, \"line\").attr(attr.separator).append(menuItem);\n  }\n\n  return {\n    g: menuItem,\n    rect: rect,\n    resetState: function resetState() {\n      return rect.attr({\n        fill: null\n      });\n    },\n    fixPosition: function fixPosition() {\n      var textBBox = text.getBBox();\n      text.move(attr.text.x - textBBox.x - (options.rtl ? textBBox.width : 0));\n    }\n  };\n}\n\nfunction createMenuItems(renderer, options) {\n  var items = [];\n\n  if (options.printingEnabled) {\n    items.push(createMenuItem(renderer, options, {\n      type: \"printing\",\n      text: _message2.default.format(\"vizExport-printingButtonText\"),\n      itemIndex: items.length\n    }));\n  }\n\n  items = options.formats.reduce(function (r, format) {\n    r.push(createMenuItem(renderer, options, {\n      type: \"exporting\",\n      text: _message2.default.getFormatter(\"vizExport-exportButtonText\")(format),\n      format: format,\n      itemIndex: r.length\n    }));\n    return r;\n  }, items);\n  return items;\n}\n\nfunction getBackgroundColorFromMarkup(markup) {\n  var parsedMarkup = GET_COLOR_REGEX.exec(markup);\n  return parsedMarkup ? parsedMarkup[1] : void 0;\n}\n\nvar exportFromMarkup = exports.exportFromMarkup = function (markup, options) {\n  options.format = validateFormat(options.format) || DEFAULT_EXPORT_FORMAT;\n  options.fileName = options.fileName || \"file\";\n  options.exportingAction = options.onExporting;\n  options.exportedAction = options.onExported;\n  options.fileSavingAction = options.onFileSaving;\n  options.margin = (0, _type.isDefined)(options.margin) ? options.margin : MARGIN;\n  options.backgroundColor = (0, _type.isDefined)(options.backgroundColor) ? options.backgroundColor : getBackgroundColorFromMarkup(markup) || _themes2.default.getTheme().backgroundColor;\n\n  _exporter2.default.export(markup, options, getCreatorFunc(options.format));\n};\n\nvar getMarkup = exports.getMarkup = function (widgets) {\n  return combineMarkups(widgets).markup;\n};\n\nvar exportWidgets = exports.exportWidgets = function (widgets, options) {\n  options = options || {};\n  var markupInfo = exports.combineMarkups(widgets, {\n    gridLayout: options.gridLayout,\n    verticalAlignment: options.verticalAlignment,\n    horizontalAlignment: options.horizontalAlignment\n  });\n  options.width = markupInfo.width;\n  options.height = markupInfo.height;\n  exportFromMarkup(markupInfo.markup, options);\n};\n\nvar combineMarkups = exports.combineMarkups = function (widgets) {\n  var options = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n\n  if (!Array.isArray(widgets)) {\n    widgets = [[widgets]];\n  } else {\n    if (!Array.isArray(widgets[0])) {\n      widgets = widgets.map(function (item) {\n        return [item];\n      });\n    }\n  }\n\n  var compactView = !options.gridLayout;\n  var exportItems = widgets.reduce(function (r, row, rowIndex) {\n    var rowInfo = row.reduce(function (r, item, colIndex) {\n      var size = item.getSize();\n\n      var backgroundColor = item.option(\"backgroundColor\") || _themes2.default.getTheme(item.option(\"theme\")).backgroundColor;\n\n      backgroundColor && r.backgroundColors.indexOf(backgroundColor) === -1 && r.backgroundColors.push(backgroundColor);\n      r.hOffset = r.width;\n      r.width += size.width;\n      r.height = Math.max(r.height, size.height);\n      r.itemWidth = Math.max(r.itemWidth, size.width);\n      r.items.push({\n        markup: item.svg(),\n        width: size.width,\n        height: size.height,\n        c: colIndex,\n        r: rowIndex,\n        hOffset: r.hOffset\n      });\n      return r;\n    }, {\n      items: [],\n      height: 0,\n      itemWidth: 0,\n      hOffset: 0,\n      width: 0,\n      backgroundColors: r.backgroundColors\n    });\n    r.rowOffsets.push(r.totalHeight);\n    r.rowHeights.push(rowInfo.height);\n    r.totalHeight += rowInfo.height;\n    r.items = r.items.concat(rowInfo.items);\n    r.itemWidth = Math.max(r.itemWidth, rowInfo.itemWidth);\n    r.maxItemLen = Math.max(r.maxItemLen, rowInfo.items.length);\n    r.totalWidth = compactView ? Math.max(r.totalWidth, rowInfo.width) : r.maxItemLen * r.itemWidth;\n    return r;\n  }, {\n    items: [],\n    rowOffsets: [],\n    rowHeights: [],\n    itemWidth: 0,\n    totalHeight: 0,\n    maxItemLen: 0,\n    totalWidth: 0,\n    backgroundColors: []\n  });\n  var backgroundColor = 'data-backgroundcolor=\"'.concat(1 === exportItems.backgroundColors.length ? exportItems.backgroundColors[0] : \"\", '\" ');\n\n  var getVOffset = function getVOffset(item) {\n    var align = options.verticalAlignment;\n    var dy = exportItems.rowHeights[item.r] - item.height;\n    return exportItems.rowOffsets[item.r] + (\"bottom\" === align ? dy : \"center\" === align ? dy / 2 : 0);\n  };\n\n  var getHOffset = function getHOffset(item) {\n    if (compactView) {\n      return item.hOffset;\n    }\n\n    var align = options.horizontalAlignment;\n    var colWidth = exportItems.itemWidth;\n    var dx = colWidth - item.width;\n    return item.c * colWidth + (\"right\" === align ? dx : \"center\" === align ? dx / 2 : 0);\n  };\n\n  var totalHeight = exportItems.totalHeight;\n  var totalWidth = exportItems.totalWidth;\n  return {\n    markup: \"<svg \" + backgroundColor + 'height=\"' + totalHeight + '\" width=\"' + totalWidth + '\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">' + exportItems.items.map(function (item) {\n      return '<g transform=\"translate('.concat(getHOffset(item), \",\").concat(getVOffset(item), ')\">').concat(item.markup, \"</g>\");\n    }).join(\"\") + \"</svg>\",\n    width: totalWidth,\n    height: totalHeight\n  };\n};\n\nvar ExportMenu = exports.ExportMenu = function (params) {\n  var renderer = this._renderer = params.renderer;\n  this._incidentOccurred = params.incidentOccurred;\n  this._exportTo = params.exportTo;\n  this._print = params.print;\n  this._shadow = renderer.shadowFilter(\"-50%\", \"-50%\", \"200%\", \"200%\", SHADOW_OFFSET, 6, SHADOW_BLUR);\n\n  this._shadow.attr({\n    opacity: .8\n  });\n\n  this._group = renderer.g().attr({\n    \"class\": EXPORT_CSS_CLASS,\n    \"hidden-for-export\": true\n  }).linkOn(renderer.root, {\n    name: \"export-menu\",\n    after: \"peripheral\"\n  });\n  this._buttonGroup = renderer.g().attr({\n    \"class\": EXPORT_CSS_CLASS + \"-button\"\n  }).append(this._group);\n  this._listGroup = renderer.g().attr({\n    \"class\": EXPORT_CSS_CLASS + \"-list\"\n  }).append(this._group);\n  this._overlay = renderer.rect(-LIST_WIDTH + BUTTON_SIZE, BUTTON_SIZE + LIST_PADDING_TOP, LIST_WIDTH, 0);\n\n  this._overlay.attr({\n    \"stroke-width\": LIST_STROKE_WIDTH,\n    cursor: \"pointer\",\n    rx: 4,\n    ry: 4,\n    filter: this._shadow.id\n  });\n\n  this._overlay.data({\n    \"export-element-type\": \"list\"\n  });\n\n  this.validFormats = getValidFormats();\n\n  this._subscribeEvents();\n};\n\n(0, _extend.extend)(ExportMenu.prototype, {\n  getLayoutOptions: function getLayoutOptions() {\n    if (this._hiddenDueToLayout) {\n      return {\n        width: 0,\n        height: 0,\n        cutSide: \"vertical\",\n        cutLayoutSide: \"top\"\n      };\n    }\n\n    var bBox = this._buttonGroup.getBBox();\n\n    bBox.cutSide = \"vertical\";\n    bBox.cutLayoutSide = \"top\";\n    bBox.height += MARGIN;\n    bBox.position = {\n      vertical: \"top\",\n      horizontal: \"right\"\n    };\n    bBox.verticalAlignment = \"top\";\n    bBox.horizontalAlignment = \"right\";\n    return bBox;\n  },\n  probeDraw: function probeDraw() {\n    this._fillSpace();\n\n    this.show();\n  },\n  shift: function shift(_, y) {\n    this._group.attr({\n      translateY: this._group.attr(\"translateY\") + y\n    });\n  },\n  draw: function draw(width, height, canvas) {\n    this._group.move(width - BUTTON_SIZE - SHADOW_OFFSET - SHADOW_BLUR + canvas.left, Math.floor(height / 2 - BUTTON_SIZE / 2));\n\n    var layoutOptions = this.getLayoutOptions();\n\n    if (layoutOptions.width > width || layoutOptions.height > height) {\n      this.freeSpace();\n    }\n\n    return this;\n  },\n  show: function show() {\n    this._group.linkAppend();\n  },\n  hide: function hide() {\n    this._group.linkRemove();\n  },\n  setOptions: function setOptions(options) {\n    var _this2 = this;\n\n    this._options = options;\n\n    if (options.formats) {\n      options.formats = options.formats.reduce(function (r, format) {\n        format = validateFormat(format, _this2._incidentOccurred, _this2.validFormats);\n        format && r.push(format);\n        return r;\n      }, []);\n    } else {\n      options.formats = this.validFormats.supported.slice();\n    }\n\n    options.printingEnabled = void 0 === options.printingEnabled ? true : options.printingEnabled;\n\n    if (options.enabled && (options.formats.length || options.printingEnabled)) {\n      this.show();\n\n      this._updateButton();\n\n      this._updateList();\n\n      this._hideList();\n    } else {\n      this.hide();\n    }\n  },\n  dispose: function dispose() {\n    this._unsubscribeEvents();\n\n    this._group.linkRemove().linkOff();\n\n    this._group.dispose();\n\n    this._shadow.dispose();\n  },\n  layoutOptions: function layoutOptions() {\n    return this._options.enabled && {\n      horizontalAlignment: \"right\",\n      verticalAlignment: \"top\",\n      weak: true\n    };\n  },\n  measure: function measure() {\n    this._fillSpace();\n\n    var margin = this._options.button.margin;\n    return [BUTTON_SIZE + margin.left + margin.right, BUTTON_SIZE + margin.top + margin.bottom];\n  },\n  move: function move(rect) {\n    var margin = this._options.button.margin;\n\n    this._group.attr({\n      translateX: Math.round(rect[0]) + margin.left,\n      translateY: Math.round(rect[1]) + margin.top\n    });\n  },\n  _fillSpace: function _fillSpace() {\n    this._hiddenDueToLayout = false;\n    this.show();\n  },\n  freeSpace: function freeSpace() {\n    this._incidentOccurred(\"W2107\");\n\n    this._hiddenDueToLayout = true;\n    this.hide();\n  },\n  _hideList: function _hideList() {\n    this._listGroup.remove();\n\n    this._listShown = false;\n\n    this._setButtonState(\"default\");\n\n    this._menuItems.forEach(function (item) {\n      return item.resetState();\n    });\n  },\n  _showList: function _showList() {\n    this._listGroup.append(this._group);\n\n    this._listShown = true;\n\n    this._menuItems.forEach(function (item) {\n      return item.fixPosition();\n    });\n  },\n  _setButtonState: function _setButtonState(state) {\n    var style = this._options.button[state];\n\n    this._button.attr({\n      stroke: style.borderColor,\n      fill: style.backgroundColor\n    });\n\n    this._icon.attr({\n      fill: style.color\n    });\n  },\n  _subscribeEvents: function _subscribeEvents() {\n    var _this3 = this;\n\n    this._renderer.root.on(_pointer2.default.up + \".export\", function (e) {\n      var elementType = e.target[EXPORT_DATA_KEY];\n\n      if (!elementType) {\n        if (_this3._button) {\n          _this3._hideList();\n        }\n\n        return;\n      }\n\n      if (\"button\" === elementType) {\n        if (_this3._listShown) {\n          _this3._setButtonState(\"default\");\n\n          _this3._hideList();\n        } else {\n          _this3._setButtonState(\"focus\");\n\n          _this3._showList();\n        }\n      } else {\n        if (\"printing\" === elementType) {\n          _this3._print();\n\n          _this3._hideList();\n        } else {\n          if (\"exporting\" === elementType) {\n            _this3._exportTo(e.target[FORMAT_DATA_KEY]);\n\n            _this3._hideList();\n          }\n        }\n      }\n    });\n\n    this._listGroup.on(pointerActions, function (e) {\n      return e.stopPropagation();\n    });\n\n    this._buttonGroup.on(_pointer2.default.enter, function () {\n      return _this3._setButtonState(\"hover\");\n    });\n\n    this._buttonGroup.on(_pointer2.default.leave, function () {\n      return _this3._setButtonState(_this3._listShown ? \"focus\" : \"default\");\n    });\n\n    this._buttonGroup.on(_pointer2.default.down + \".export\", function () {\n      return _this3._setButtonState(\"active\");\n    });\n  },\n  _unsubscribeEvents: function _unsubscribeEvents() {\n    this._renderer.root.off(\".export\");\n\n    this._listGroup.off();\n\n    this._buttonGroup.off();\n  },\n  _updateButton: function _updateButton() {\n    var renderer = this._renderer;\n    var options = this._options;\n    var exportData = {\n      \"export-element-type\": \"button\"\n    };\n\n    if (!this._button) {\n      this._button = renderer.rect(0, 0, BUTTON_SIZE, BUTTON_SIZE).append(this._buttonGroup);\n\n      this._button.attr({\n        rx: 4,\n        ry: 4,\n        fill: options.button.default.backgroundColor,\n        stroke: options.button.default.borderColor,\n        \"stroke-width\": 1,\n        cursor: \"pointer\"\n      });\n\n      this._button.data(exportData);\n\n      this._icon = renderer.path(ICON_COORDS).append(this._buttonGroup);\n\n      this._icon.attr({\n        fill: options.button.default.color,\n        cursor: \"pointer\"\n      });\n\n      this._icon.data(exportData);\n\n      this._buttonGroup.setTitle(_message2.default.format(\"vizExport-titleMenuText\"));\n    }\n  },\n  _updateList: function _updateList() {\n    var options = this._options;\n    var buttonDefault = options.button.default;\n    var listGroup = this._listGroup;\n    var items = createMenuItems(this._renderer, options);\n\n    this._shadow.attr({\n      color: options.shadowColor\n    });\n\n    this._overlay.attr({\n      height: items.length * MENU_ITEM_HEIGHT + 2 * LIST_STROKE_WIDTH,\n      fill: buttonDefault.backgroundColor,\n      stroke: buttonDefault.borderColor\n    });\n\n    listGroup.clear();\n\n    this._overlay.append(listGroup);\n\n    items.forEach(function (item) {\n      return item.g.append(listGroup);\n    });\n    this._menuItems = items;\n  }\n});\n\nfunction getExportOptions(widget, exportOptions, fileName, format) {\n  if (format || exportOptions.format) {\n    format = validateFormat(format || exportOptions.format, widget._incidentOccurred);\n  }\n\n  return {\n    format: format || DEFAULT_EXPORT_FORMAT,\n    fileName: fileName || exportOptions.fileName || \"file\",\n    proxyUrl: exportOptions.proxyUrl,\n    backgroundColor: exportOptions.backgroundColor,\n    width: widget._canvas.width,\n    height: widget._canvas.height,\n    margin: exportOptions.margin,\n    svgToCanvas: exportOptions.svgToCanvas,\n    forceProxy: exportOptions.forceProxy,\n    exportingAction: widget._createActionByOption(\"onExporting\"),\n    exportedAction: widget._createActionByOption(\"onExported\"),\n    fileSavingAction: widget._createActionByOption(\"onFileSaving\")\n  };\n}\n\nvar plugin = exports.plugin = {\n  name: \"export\",\n  init: function init() {\n    var _this4 = this;\n\n    this._exportMenu = new exports.ExportMenu({\n      renderer: this._renderer,\n      incidentOccurred: this._incidentOccurred,\n      print: function print() {\n        return _this4.print();\n      },\n      exportTo: function exportTo(format) {\n        return _this4.exportTo(void 0, format);\n      }\n    });\n\n    this._layout.add(this._exportMenu);\n  },\n  dispose: function dispose() {\n    this._exportMenu.dispose();\n  },\n  members: {\n    _getExportMenuOptions: function _getExportMenuOptions() {\n      return (0, _extend.extend)({}, this._getOption(\"export\"), {\n        rtl: this._getOption(\"rtlEnabled\", true)\n      });\n    },\n    _disablePointerEvents: function _disablePointerEvents() {\n      var pointerEventsValue = this._renderer.root.attr(\"pointer-events\");\n\n      this._renderer.root.attr({\n        \"pointer-events\": \"none\"\n      });\n\n      return pointerEventsValue;\n    },\n    exportTo: function exportTo(fileName, format) {\n      var _this5 = this;\n\n      var menu = this._exportMenu;\n      var options = getExportOptions(this, this._getOption(\"export\") || {}, fileName, format);\n      menu && menu.hide();\n\n      var pointerEventsValue = this._disablePointerEvents();\n\n      var promise = _exporter2.default.export(this._renderer.root.element, options, getCreatorFunc(options.format)).fail(_console.logger.error).always(function () {\n        _this5._renderer.root.attr({\n          \"pointer-events\": pointerEventsValue\n        });\n      });\n\n      menu && menu.show();\n      return promise;\n    },\n    print: function print() {\n      var _this6 = this;\n\n      var menu = this._exportMenu;\n      var options = getExportOptions(this, this._getOption(\"export\") || {});\n      options.exportingAction = null;\n      options.exportedAction = null;\n      options.margin = 0;\n      options.format = \"PNG\";\n      options.forceProxy = true;\n\n      options.fileSavingAction = function (eventArgs) {\n        _print(\"data:image/png;base64,\".concat(eventArgs.data), {\n          __test: options.__test\n        });\n\n        eventArgs.cancel = true;\n      };\n\n      var pointerEventsValue = this._disablePointerEvents();\n\n      menu && menu.hide();\n\n      var promise = _exporter2.default.export(this._renderer.root.element, options, getCreatorFunc(options.format)).fail(_console.logger.error).always(function () {\n        _this6._renderer.root.attr({\n          \"pointer-events\": pointerEventsValue\n        });\n      });\n\n      menu && menu.show();\n      return promise;\n    }\n  },\n  customize: function customize(constructor) {\n    var proto = constructor.prototype;\n    constructor.addChange({\n      code: \"EXPORT\",\n      handler: function handler() {\n        this._exportMenu.setOptions(this._getExportMenuOptions());\n\n        this._change([\"LAYOUT\"]);\n      },\n      isThemeDependent: true,\n      isOptionChange: true,\n      option: \"export\"\n    });\n    proto._optionChangesMap.onExporting = \"EXPORT\";\n    proto._optionChangesMap.onExported = \"EXPORT\";\n    proto._optionChangesMap.onFileSaving = \"EXPORT\";\n  },\n  fontFields: [\"export.font\"]\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/core/export.js"],"names":["Object","defineProperty","exports","value","plugin","ExportMenu","combineMarkups","exportWidgets","getMarkup","exportFromMarkup","_extend","require","_window","_utils","_exporter","_exporter2","_interopRequireDefault","_message","_message2","_type","_themes","_themes2","_hover","_hover2","_pointer","_pointer2","_console","obj","__esModule","imageExporter","default","image","svgExporter","svg","pdfExporter","pdf","pointerActions","down","move","join","BUTTON_SIZE","ICON_COORDS","LIST_PADDING_TOP","LIST_WIDTH","VERTICAL_TEXT_MARGIN","HORIZONTAL_TEXT_MARGIN","MENU_ITEM_HEIGHT","LIST_STROKE_WIDTH","MARGIN","SHADOW_OFFSET","SHADOW_BLUR","DEFAULT_EXPORT_FORMAT","ALLOWED_IMAGE_FORMATS","ALLOWED_EXTRA_FORMATS","EXPORT_CSS_CLASS","EXPORT_DATA_KEY","FORMAT_DATA_KEY","GET_COLOR_REGEX","getValidFormats","imageFormats","testFormats","unsupported","supported","concat","validateFormat","format","incidentOccurred","validFormats","String","toUpperCase","indexOf","getCreatorFunc","getData","_print","imageSrc","options","document","getWindow","iFrame","createElement","onload","setPrint","style","visibility","position","right","bottom","body","appendChild","_this","window","contentWindow","img","removeFrame","parentElement","removeChild","addEventListener","focus","print","src","getItemAttributes","type","itemIndex","x","y","attr","rect","width","height","text","rtl","separator","stroke","button","borderColor","cursor","sharp","d","createMenuItem","renderer","settings","itemData","fontStyle","patchFontOptions","font","menuItem","g","css","data","on","start","fill","hover","backgroundColor","end","append","path","resetState","fixPosition","textBBox","getBBox","createMenuItems","items","printingEnabled","push","length","formats","reduce","r","getFormatter","getBackgroundColorFromMarkup","markup","parsedMarkup","exec","fileName","exportingAction","onExporting","exportedAction","onExported","fileSavingAction","onFileSaving","margin","isDefined","getTheme","export","widgets","markupInfo","gridLayout","verticalAlignment","horizontalAlignment","arguments","Array","isArray","map","item","compactView","exportItems","row","rowIndex","rowInfo","colIndex","size","getSize","option","backgroundColors","hOffset","Math","max","itemWidth","c","rowOffsets","totalHeight","rowHeights","maxItemLen","totalWidth","getVOffset","align","dy","getHOffset","colWidth","dx","params","_renderer","_incidentOccurred","_exportTo","exportTo","_shadow","shadowFilter","opacity","_group","linkOn","root","name","after","_buttonGroup","_listGroup","_overlay","rx","ry","filter","id","_subscribeEvents","extend","prototype","getLayoutOptions","_hiddenDueToLayout","cutSide","cutLayoutSide","bBox","vertical","horizontal","probeDraw","_fillSpace","show","shift","_","translateY","draw","canvas","left","floor","layoutOptions","freeSpace","linkAppend","hide","linkRemove","setOptions","_this2","_options","slice","enabled","_updateButton","_updateList","_hideList","dispose","_unsubscribeEvents","linkOff","weak","measure","top","translateX","round","remove","_listShown","_setButtonState","_menuItems","forEach","_showList","state","_button","_icon","color","_this3","up","e","elementType","target","stopPropagation","enter","leave","off","exportData","setTitle","buttonDefault","listGroup","shadowColor","clear","getExportOptions","widget","exportOptions","proxyUrl","_canvas","svgToCanvas","forceProxy","_createActionByOption","init","_this4","_exportMenu","_layout","add","members","_getExportMenuOptions","_getOption","_disablePointerEvents","pointerEventsValue","_this5","menu","promise","element","fail","logger","error","always","_this6","eventArgs","__test","cancel","customize","constructor","proto","addChange","code","handler","_change","isThemeDependent","isOptionChange","_optionChangesMap","fontFields"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/core/export.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.plugin = exports.ExportMenu = exports.combineMarkups = exports.exportWidgets = exports.getMarkup = exports.exportFromMarkup = void 0;\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _utils = require(\"./utils\");\r\nvar _exporter = require(\"../../exporter\");\r\nvar _exporter2 = _interopRequireDefault(_exporter);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nvar _hover = require(\"../../events/hover\");\r\nvar _hover2 = _interopRequireDefault(_hover);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _console = require(\"../../core/utils/console\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar imageExporter = _exporter2.default.image;\r\nvar svgExporter = _exporter2.default.svg;\r\nvar pdfExporter = _exporter2.default.pdf;\r\nvar pointerActions = [_pointer2.default.down, _pointer2.default.move].join(\" \");\r\nvar BUTTON_SIZE = 35;\r\nvar ICON_COORDS = [\r\n    [9, 12, 26, 12, 26, 14, 9, 14],\r\n    [9, 17, 26, 17, 26, 19, 9, 19],\r\n    [9, 22, 26, 22, 26, 24, 9, 24]\r\n];\r\nvar LIST_PADDING_TOP = 4;\r\nvar LIST_WIDTH = 120;\r\nvar VERTICAL_TEXT_MARGIN = 8;\r\nvar HORIZONTAL_TEXT_MARGIN = 15;\r\nvar MENU_ITEM_HEIGHT = 30;\r\nvar LIST_STROKE_WIDTH = 1;\r\nvar MARGIN = 10;\r\nvar SHADOW_OFFSET = 2;\r\nvar SHADOW_BLUR = 3;\r\nvar DEFAULT_EXPORT_FORMAT = \"PNG\";\r\nvar ALLOWED_IMAGE_FORMATS = [DEFAULT_EXPORT_FORMAT, \"JPEG\", \"GIF\"];\r\nvar ALLOWED_EXTRA_FORMATS = [\"PDF\", \"SVG\"];\r\nvar EXPORT_CSS_CLASS = \"dx-export-menu\";\r\nvar EXPORT_DATA_KEY = \"export-element-type\";\r\nvar FORMAT_DATA_KEY = \"export-element-format\";\r\nvar GET_COLOR_REGEX = /data-backgroundcolor=\"([^\"]*)\"/;\r\n\r\nfunction getValidFormats() {\r\n    var imageFormats = imageExporter.testFormats(ALLOWED_IMAGE_FORMATS);\r\n    return {\r\n        unsupported: imageFormats.unsupported,\r\n        supported: imageFormats.supported.concat(ALLOWED_EXTRA_FORMATS)\r\n    }\r\n}\r\n\r\nfunction validateFormat(format, incidentOccurred, validFormats) {\r\n    validFormats = validFormats || getValidFormats();\r\n    format = String(format).toUpperCase();\r\n    if (validFormats.supported.indexOf(format) !== -1) {\r\n        return format\r\n    }\r\n    if (validFormats.unsupported.indexOf(format) !== -1) {\r\n        incidentOccurred && incidentOccurred(\"W2108\", [format])\r\n    }\r\n}\r\n\r\nfunction getCreatorFunc(format) {\r\n    if (\"SVG\" === format) {\r\n        return svgExporter.getData\r\n    } else {\r\n        if (\"PDF\" === format) {\r\n            return pdfExporter.getData\r\n        } else {\r\n            return imageExporter.getData\r\n        }\r\n    }\r\n}\r\n\r\nfunction _print(imageSrc, options) {\r\n    var document = (0, _window.getWindow)().document;\r\n    var iFrame = document.createElement(\"iframe\");\r\n    iFrame.onload = setPrint(imageSrc, options);\r\n    iFrame.style.visibility = \"hidden\";\r\n    iFrame.style.position = \"fixed\";\r\n    iFrame.style.right = \"0\";\r\n    iFrame.style.bottom = \"0\";\r\n    document.body.appendChild(iFrame)\r\n}\r\n\r\nfunction setPrint(imageSrc, options) {\r\n    return function() {\r\n        var _this = this;\r\n        var window = this.contentWindow;\r\n        var img = window.document.createElement(\"img\");\r\n        window.document.body.appendChild(img);\r\n        var removeFrame = function() {\r\n            _this.parentElement.removeChild(_this)\r\n        };\r\n        img.addEventListener(\"load\", function() {\r\n            window.focus();\r\n            window.print();\r\n            removeFrame()\r\n        });\r\n        img.addEventListener(\"error\", removeFrame);\r\n        img.src = imageSrc\r\n    }\r\n}\r\n\r\nfunction getItemAttributes(options, type, itemIndex) {\r\n    var x = BUTTON_SIZE - LIST_WIDTH;\r\n    var y = BUTTON_SIZE + LIST_PADDING_TOP + LIST_STROKE_WIDTH + itemIndex * MENU_ITEM_HEIGHT;\r\n    var attr = {\r\n        rect: {\r\n            width: LIST_WIDTH - 2 * LIST_STROKE_WIDTH,\r\n            height: MENU_ITEM_HEIGHT,\r\n            x: x + LIST_STROKE_WIDTH,\r\n            y: y\r\n        },\r\n        text: {\r\n            x: x + (options.rtl ? LIST_WIDTH - HORIZONTAL_TEXT_MARGIN : HORIZONTAL_TEXT_MARGIN),\r\n            y: y + MENU_ITEM_HEIGHT - VERTICAL_TEXT_MARGIN\r\n        }\r\n    };\r\n    if (\"printing\" === type) {\r\n        attr.separator = {\r\n            stroke: options.button.default.borderColor,\r\n            \"stroke-width\": LIST_STROKE_WIDTH,\r\n            cursor: \"pointer\",\r\n            sharp: \"v\",\r\n            d: \"M \" + x + \" \" + (y + MENU_ITEM_HEIGHT - LIST_STROKE_WIDTH) + \" L \" + (x + LIST_WIDTH) + \" \" + (y + MENU_ITEM_HEIGHT - LIST_STROKE_WIDTH)\r\n        }\r\n    }\r\n    return attr\r\n}\r\n\r\nfunction createMenuItem(renderer, options, settings) {\r\n    var itemData = {};\r\n    var type = settings.type;\r\n    var format = settings.format;\r\n    var attr = getItemAttributes(options, type, settings.itemIndex);\r\n    var fontStyle = (0, _utils.patchFontOptions)(options.font);\r\n    fontStyle[\"pointer-events\"] = \"none\";\r\n    var menuItem = renderer.g().attr({\r\n        \"class\": EXPORT_CSS_CLASS + \"-list-item\"\r\n    });\r\n    itemData[EXPORT_DATA_KEY] = type;\r\n    if (format) {\r\n        itemData[FORMAT_DATA_KEY] = format\r\n    }\r\n    var rect = renderer.rect();\r\n    rect.attr(attr.rect).css({\r\n        cursor: \"pointer\",\r\n        \"pointer-events\": \"all\"\r\n    }).data(itemData);\r\n    rect.on(_hover2.default.start + \".export\", function() {\r\n        return rect.attr({\r\n            fill: options.button.hover.backgroundColor\r\n        })\r\n    }).on(_hover2.default.end + \".export\", function() {\r\n        return rect.attr({\r\n            fill: null\r\n        })\r\n    });\r\n    rect.append(menuItem);\r\n    var text = renderer.text(settings.text).css(fontStyle).attr(attr.text).append(menuItem);\r\n    if (\"printing\" === type) {\r\n        renderer.path(null, \"line\").attr(attr.separator).append(menuItem)\r\n    }\r\n    return {\r\n        g: menuItem,\r\n        rect: rect,\r\n        resetState: function() {\r\n            return rect.attr({\r\n                fill: null\r\n            })\r\n        },\r\n        fixPosition: function() {\r\n            var textBBox = text.getBBox();\r\n            text.move(attr.text.x - textBBox.x - (options.rtl ? textBBox.width : 0))\r\n        }\r\n    }\r\n}\r\n\r\nfunction createMenuItems(renderer, options) {\r\n    var items = [];\r\n    if (options.printingEnabled) {\r\n        items.push(createMenuItem(renderer, options, {\r\n            type: \"printing\",\r\n            text: _message2.default.format(\"vizExport-printingButtonText\"),\r\n            itemIndex: items.length\r\n        }))\r\n    }\r\n    items = options.formats.reduce(function(r, format) {\r\n        r.push(createMenuItem(renderer, options, {\r\n            type: \"exporting\",\r\n            text: _message2.default.getFormatter(\"vizExport-exportButtonText\")(format),\r\n            format: format,\r\n            itemIndex: r.length\r\n        }));\r\n        return r\r\n    }, items);\r\n    return items\r\n}\r\n\r\nfunction getBackgroundColorFromMarkup(markup) {\r\n    var parsedMarkup = GET_COLOR_REGEX.exec(markup);\r\n    return parsedMarkup ? parsedMarkup[1] : void 0\r\n}\r\nvar exportFromMarkup = exports.exportFromMarkup = function(markup, options) {\r\n    options.format = validateFormat(options.format) || DEFAULT_EXPORT_FORMAT;\r\n    options.fileName = options.fileName || \"file\";\r\n    options.exportingAction = options.onExporting;\r\n    options.exportedAction = options.onExported;\r\n    options.fileSavingAction = options.onFileSaving;\r\n    options.margin = (0, _type.isDefined)(options.margin) ? options.margin : MARGIN;\r\n    options.backgroundColor = (0, _type.isDefined)(options.backgroundColor) ? options.backgroundColor : getBackgroundColorFromMarkup(markup) || _themes2.default.getTheme().backgroundColor;\r\n    _exporter2.default.export(markup, options, getCreatorFunc(options.format))\r\n};\r\nvar getMarkup = exports.getMarkup = function(widgets) {\r\n    return combineMarkups(widgets).markup\r\n};\r\nvar exportWidgets = exports.exportWidgets = function(widgets, options) {\r\n    options = options || {};\r\n    var markupInfo = exports.combineMarkups(widgets, {\r\n        gridLayout: options.gridLayout,\r\n        verticalAlignment: options.verticalAlignment,\r\n        horizontalAlignment: options.horizontalAlignment\r\n    });\r\n    options.width = markupInfo.width;\r\n    options.height = markupInfo.height;\r\n    exportFromMarkup(markupInfo.markup, options)\r\n};\r\nvar combineMarkups = exports.combineMarkups = function(widgets) {\r\n    var options = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\r\n    if (!Array.isArray(widgets)) {\r\n        widgets = [\r\n            [widgets]\r\n        ]\r\n    } else {\r\n        if (!Array.isArray(widgets[0])) {\r\n            widgets = widgets.map(function(item) {\r\n                return [item]\r\n            })\r\n        }\r\n    }\r\n    var compactView = !options.gridLayout;\r\n    var exportItems = widgets.reduce(function(r, row, rowIndex) {\r\n        var rowInfo = row.reduce(function(r, item, colIndex) {\r\n            var size = item.getSize();\r\n            var backgroundColor = item.option(\"backgroundColor\") || _themes2.default.getTheme(item.option(\"theme\")).backgroundColor;\r\n            backgroundColor && r.backgroundColors.indexOf(backgroundColor) === -1 && r.backgroundColors.push(backgroundColor);\r\n            r.hOffset = r.width;\r\n            r.width += size.width;\r\n            r.height = Math.max(r.height, size.height);\r\n            r.itemWidth = Math.max(r.itemWidth, size.width);\r\n            r.items.push({\r\n                markup: item.svg(),\r\n                width: size.width,\r\n                height: size.height,\r\n                c: colIndex,\r\n                r: rowIndex,\r\n                hOffset: r.hOffset\r\n            });\r\n            return r\r\n        }, {\r\n            items: [],\r\n            height: 0,\r\n            itemWidth: 0,\r\n            hOffset: 0,\r\n            width: 0,\r\n            backgroundColors: r.backgroundColors\r\n        });\r\n        r.rowOffsets.push(r.totalHeight);\r\n        r.rowHeights.push(rowInfo.height);\r\n        r.totalHeight += rowInfo.height;\r\n        r.items = r.items.concat(rowInfo.items);\r\n        r.itemWidth = Math.max(r.itemWidth, rowInfo.itemWidth);\r\n        r.maxItemLen = Math.max(r.maxItemLen, rowInfo.items.length);\r\n        r.totalWidth = compactView ? Math.max(r.totalWidth, rowInfo.width) : r.maxItemLen * r.itemWidth;\r\n        return r\r\n    }, {\r\n        items: [],\r\n        rowOffsets: [],\r\n        rowHeights: [],\r\n        itemWidth: 0,\r\n        totalHeight: 0,\r\n        maxItemLen: 0,\r\n        totalWidth: 0,\r\n        backgroundColors: []\r\n    });\r\n    var backgroundColor = 'data-backgroundcolor=\"'.concat(1 === exportItems.backgroundColors.length ? exportItems.backgroundColors[0] : \"\", '\" ');\r\n    var getVOffset = function(item) {\r\n        var align = options.verticalAlignment;\r\n        var dy = exportItems.rowHeights[item.r] - item.height;\r\n        return exportItems.rowOffsets[item.r] + (\"bottom\" === align ? dy : \"center\" === align ? dy / 2 : 0)\r\n    };\r\n    var getHOffset = function(item) {\r\n        if (compactView) {\r\n            return item.hOffset\r\n        }\r\n        var align = options.horizontalAlignment;\r\n        var colWidth = exportItems.itemWidth;\r\n        var dx = colWidth - item.width;\r\n        return item.c * colWidth + (\"right\" === align ? dx : \"center\" === align ? dx / 2 : 0)\r\n    };\r\n    var totalHeight = exportItems.totalHeight;\r\n    var totalWidth = exportItems.totalWidth;\r\n    return {\r\n        markup: \"<svg \" + backgroundColor + 'height=\"' + totalHeight + '\" width=\"' + totalWidth + '\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">' + exportItems.items.map(function(item) {\r\n            return '<g transform=\"translate('.concat(getHOffset(item), \",\").concat(getVOffset(item), ')\">').concat(item.markup, \"</g>\")\r\n        }).join(\"\") + \"</svg>\",\r\n        width: totalWidth,\r\n        height: totalHeight\r\n    }\r\n};\r\nvar ExportMenu = exports.ExportMenu = function(params) {\r\n    var renderer = this._renderer = params.renderer;\r\n    this._incidentOccurred = params.incidentOccurred;\r\n    this._exportTo = params.exportTo;\r\n    this._print = params.print;\r\n    this._shadow = renderer.shadowFilter(\"-50%\", \"-50%\", \"200%\", \"200%\", SHADOW_OFFSET, 6, SHADOW_BLUR);\r\n    this._shadow.attr({\r\n        opacity: .8\r\n    });\r\n    this._group = renderer.g().attr({\r\n        \"class\": EXPORT_CSS_CLASS,\r\n        \"hidden-for-export\": true\r\n    }).linkOn(renderer.root, {\r\n        name: \"export-menu\",\r\n        after: \"peripheral\"\r\n    });\r\n    this._buttonGroup = renderer.g().attr({\r\n        \"class\": EXPORT_CSS_CLASS + \"-button\"\r\n    }).append(this._group);\r\n    this._listGroup = renderer.g().attr({\r\n        \"class\": EXPORT_CSS_CLASS + \"-list\"\r\n    }).append(this._group);\r\n    this._overlay = renderer.rect(-LIST_WIDTH + BUTTON_SIZE, BUTTON_SIZE + LIST_PADDING_TOP, LIST_WIDTH, 0);\r\n    this._overlay.attr({\r\n        \"stroke-width\": LIST_STROKE_WIDTH,\r\n        cursor: \"pointer\",\r\n        rx: 4,\r\n        ry: 4,\r\n        filter: this._shadow.id\r\n    });\r\n    this._overlay.data({\r\n        \"export-element-type\": \"list\"\r\n    });\r\n    this.validFormats = getValidFormats();\r\n    this._subscribeEvents()\r\n};\r\n(0, _extend.extend)(ExportMenu.prototype, {\r\n    getLayoutOptions: function() {\r\n        if (this._hiddenDueToLayout) {\r\n            return {\r\n                width: 0,\r\n                height: 0,\r\n                cutSide: \"vertical\",\r\n                cutLayoutSide: \"top\"\r\n            }\r\n        }\r\n        var bBox = this._buttonGroup.getBBox();\r\n        bBox.cutSide = \"vertical\";\r\n        bBox.cutLayoutSide = \"top\";\r\n        bBox.height += MARGIN;\r\n        bBox.position = {\r\n            vertical: \"top\",\r\n            horizontal: \"right\"\r\n        };\r\n        bBox.verticalAlignment = \"top\";\r\n        bBox.horizontalAlignment = \"right\";\r\n        return bBox\r\n    },\r\n    probeDraw: function() {\r\n        this._fillSpace();\r\n        this.show()\r\n    },\r\n    shift: function(_, y) {\r\n        this._group.attr({\r\n            translateY: this._group.attr(\"translateY\") + y\r\n        })\r\n    },\r\n    draw: function(width, height, canvas) {\r\n        this._group.move(width - BUTTON_SIZE - SHADOW_OFFSET - SHADOW_BLUR + canvas.left, Math.floor(height / 2 - BUTTON_SIZE / 2));\r\n        var layoutOptions = this.getLayoutOptions();\r\n        if (layoutOptions.width > width || layoutOptions.height > height) {\r\n            this.freeSpace()\r\n        }\r\n        return this\r\n    },\r\n    show: function() {\r\n        this._group.linkAppend()\r\n    },\r\n    hide: function() {\r\n        this._group.linkRemove()\r\n    },\r\n    setOptions: function(options) {\r\n        var _this2 = this;\r\n        this._options = options;\r\n        if (options.formats) {\r\n            options.formats = options.formats.reduce(function(r, format) {\r\n                format = validateFormat(format, _this2._incidentOccurred, _this2.validFormats);\r\n                format && r.push(format);\r\n                return r\r\n            }, [])\r\n        } else {\r\n            options.formats = this.validFormats.supported.slice()\r\n        }\r\n        options.printingEnabled = void 0 === options.printingEnabled ? true : options.printingEnabled;\r\n        if (options.enabled && (options.formats.length || options.printingEnabled)) {\r\n            this.show();\r\n            this._updateButton();\r\n            this._updateList();\r\n            this._hideList()\r\n        } else {\r\n            this.hide()\r\n        }\r\n    },\r\n    dispose: function() {\r\n        this._unsubscribeEvents();\r\n        this._group.linkRemove().linkOff();\r\n        this._group.dispose();\r\n        this._shadow.dispose()\r\n    },\r\n    layoutOptions: function() {\r\n        return this._options.enabled && {\r\n            horizontalAlignment: \"right\",\r\n            verticalAlignment: \"top\",\r\n            weak: true\r\n        }\r\n    },\r\n    measure: function() {\r\n        this._fillSpace();\r\n        var margin = this._options.button.margin;\r\n        return [BUTTON_SIZE + margin.left + margin.right, BUTTON_SIZE + margin.top + margin.bottom]\r\n    },\r\n    move: function(rect) {\r\n        var margin = this._options.button.margin;\r\n        this._group.attr({\r\n            translateX: Math.round(rect[0]) + margin.left,\r\n            translateY: Math.round(rect[1]) + margin.top\r\n        })\r\n    },\r\n    _fillSpace: function() {\r\n        this._hiddenDueToLayout = false;\r\n        this.show()\r\n    },\r\n    freeSpace: function() {\r\n        this._incidentOccurred(\"W2107\");\r\n        this._hiddenDueToLayout = true;\r\n        this.hide()\r\n    },\r\n    _hideList: function() {\r\n        this._listGroup.remove();\r\n        this._listShown = false;\r\n        this._setButtonState(\"default\");\r\n        this._menuItems.forEach(function(item) {\r\n            return item.resetState()\r\n        })\r\n    },\r\n    _showList: function() {\r\n        this._listGroup.append(this._group);\r\n        this._listShown = true;\r\n        this._menuItems.forEach(function(item) {\r\n            return item.fixPosition()\r\n        })\r\n    },\r\n    _setButtonState: function(state) {\r\n        var style = this._options.button[state];\r\n        this._button.attr({\r\n            stroke: style.borderColor,\r\n            fill: style.backgroundColor\r\n        });\r\n        this._icon.attr({\r\n            fill: style.color\r\n        })\r\n    },\r\n    _subscribeEvents: function() {\r\n        var _this3 = this;\r\n        this._renderer.root.on(_pointer2.default.up + \".export\", function(e) {\r\n            var elementType = e.target[EXPORT_DATA_KEY];\r\n            if (!elementType) {\r\n                if (_this3._button) {\r\n                    _this3._hideList()\r\n                }\r\n                return\r\n            }\r\n            if (\"button\" === elementType) {\r\n                if (_this3._listShown) {\r\n                    _this3._setButtonState(\"default\");\r\n                    _this3._hideList()\r\n                } else {\r\n                    _this3._setButtonState(\"focus\");\r\n                    _this3._showList()\r\n                }\r\n            } else {\r\n                if (\"printing\" === elementType) {\r\n                    _this3._print();\r\n                    _this3._hideList()\r\n                } else {\r\n                    if (\"exporting\" === elementType) {\r\n                        _this3._exportTo(e.target[FORMAT_DATA_KEY]);\r\n                        _this3._hideList()\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this._listGroup.on(pointerActions, function(e) {\r\n            return e.stopPropagation()\r\n        });\r\n        this._buttonGroup.on(_pointer2.default.enter, function() {\r\n            return _this3._setButtonState(\"hover\")\r\n        });\r\n        this._buttonGroup.on(_pointer2.default.leave, function() {\r\n            return _this3._setButtonState(_this3._listShown ? \"focus\" : \"default\")\r\n        });\r\n        this._buttonGroup.on(_pointer2.default.down + \".export\", function() {\r\n            return _this3._setButtonState(\"active\")\r\n        })\r\n    },\r\n    _unsubscribeEvents: function() {\r\n        this._renderer.root.off(\".export\");\r\n        this._listGroup.off();\r\n        this._buttonGroup.off()\r\n    },\r\n    _updateButton: function() {\r\n        var renderer = this._renderer;\r\n        var options = this._options;\r\n        var exportData = {\r\n            \"export-element-type\": \"button\"\r\n        };\r\n        if (!this._button) {\r\n            this._button = renderer.rect(0, 0, BUTTON_SIZE, BUTTON_SIZE).append(this._buttonGroup);\r\n            this._button.attr({\r\n                rx: 4,\r\n                ry: 4,\r\n                fill: options.button.default.backgroundColor,\r\n                stroke: options.button.default.borderColor,\r\n                \"stroke-width\": 1,\r\n                cursor: \"pointer\"\r\n            });\r\n            this._button.data(exportData);\r\n            this._icon = renderer.path(ICON_COORDS).append(this._buttonGroup);\r\n            this._icon.attr({\r\n                fill: options.button.default.color,\r\n                cursor: \"pointer\"\r\n            });\r\n            this._icon.data(exportData);\r\n            this._buttonGroup.setTitle(_message2.default.format(\"vizExport-titleMenuText\"))\r\n        }\r\n    },\r\n    _updateList: function() {\r\n        var options = this._options;\r\n        var buttonDefault = options.button.default;\r\n        var listGroup = this._listGroup;\r\n        var items = createMenuItems(this._renderer, options);\r\n        this._shadow.attr({\r\n            color: options.shadowColor\r\n        });\r\n        this._overlay.attr({\r\n            height: items.length * MENU_ITEM_HEIGHT + 2 * LIST_STROKE_WIDTH,\r\n            fill: buttonDefault.backgroundColor,\r\n            stroke: buttonDefault.borderColor\r\n        });\r\n        listGroup.clear();\r\n        this._overlay.append(listGroup);\r\n        items.forEach(function(item) {\r\n            return item.g.append(listGroup)\r\n        });\r\n        this._menuItems = items\r\n    }\r\n});\r\n\r\nfunction getExportOptions(widget, exportOptions, fileName, format) {\r\n    if (format || exportOptions.format) {\r\n        format = validateFormat(format || exportOptions.format, widget._incidentOccurred)\r\n    }\r\n    return {\r\n        format: format || DEFAULT_EXPORT_FORMAT,\r\n        fileName: fileName || exportOptions.fileName || \"file\",\r\n        proxyUrl: exportOptions.proxyUrl,\r\n        backgroundColor: exportOptions.backgroundColor,\r\n        width: widget._canvas.width,\r\n        height: widget._canvas.height,\r\n        margin: exportOptions.margin,\r\n        svgToCanvas: exportOptions.svgToCanvas,\r\n        forceProxy: exportOptions.forceProxy,\r\n        exportingAction: widget._createActionByOption(\"onExporting\"),\r\n        exportedAction: widget._createActionByOption(\"onExported\"),\r\n        fileSavingAction: widget._createActionByOption(\"onFileSaving\")\r\n    }\r\n}\r\nvar plugin = exports.plugin = {\r\n    name: \"export\",\r\n    init: function() {\r\n        var _this4 = this;\r\n        this._exportMenu = new exports.ExportMenu({\r\n            renderer: this._renderer,\r\n            incidentOccurred: this._incidentOccurred,\r\n            print: function() {\r\n                return _this4.print()\r\n            },\r\n            exportTo: function(format) {\r\n                return _this4.exportTo(void 0, format)\r\n            }\r\n        });\r\n        this._layout.add(this._exportMenu)\r\n    },\r\n    dispose: function() {\r\n        this._exportMenu.dispose()\r\n    },\r\n    members: {\r\n        _getExportMenuOptions: function() {\r\n            return (0, _extend.extend)({}, this._getOption(\"export\"), {\r\n                rtl: this._getOption(\"rtlEnabled\", true)\r\n            })\r\n        },\r\n        _disablePointerEvents: function() {\r\n            var pointerEventsValue = this._renderer.root.attr(\"pointer-events\");\r\n            this._renderer.root.attr({\r\n                \"pointer-events\": \"none\"\r\n            });\r\n            return pointerEventsValue\r\n        },\r\n        exportTo: function(fileName, format) {\r\n            var _this5 = this;\r\n            var menu = this._exportMenu;\r\n            var options = getExportOptions(this, this._getOption(\"export\") || {}, fileName, format);\r\n            menu && menu.hide();\r\n            var pointerEventsValue = this._disablePointerEvents();\r\n            var promise = _exporter2.default.export(this._renderer.root.element, options, getCreatorFunc(options.format)).fail(_console.logger.error).always(function() {\r\n                _this5._renderer.root.attr({\r\n                    \"pointer-events\": pointerEventsValue\r\n                })\r\n            });\r\n            menu && menu.show();\r\n            return promise\r\n        },\r\n        print: function() {\r\n            var _this6 = this;\r\n            var menu = this._exportMenu;\r\n            var options = getExportOptions(this, this._getOption(\"export\") || {});\r\n            options.exportingAction = null;\r\n            options.exportedAction = null;\r\n            options.margin = 0;\r\n            options.format = \"PNG\";\r\n            options.forceProxy = true;\r\n            options.fileSavingAction = function(eventArgs) {\r\n                _print(\"data:image/png;base64,\".concat(eventArgs.data), {\r\n                    __test: options.__test\r\n                });\r\n                eventArgs.cancel = true\r\n            };\r\n            var pointerEventsValue = this._disablePointerEvents();\r\n            menu && menu.hide();\r\n            var promise = _exporter2.default.export(this._renderer.root.element, options, getCreatorFunc(options.format)).fail(_console.logger.error).always(function() {\r\n                _this6._renderer.root.attr({\r\n                    \"pointer-events\": pointerEventsValue\r\n                })\r\n            });\r\n            menu && menu.show();\r\n            return promise\r\n        }\r\n    },\r\n    customize: function(constructor) {\r\n        var proto = constructor.prototype;\r\n        constructor.addChange({\r\n            code: \"EXPORT\",\r\n            handler: function() {\r\n                this._exportMenu.setOptions(this._getExportMenuOptions());\r\n                this._change([\"LAYOUT\"])\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true,\r\n            option: \"export\"\r\n        });\r\n        proto._optionChangesMap.onExporting = \"EXPORT\";\r\n        proto._optionChangesMap.onExported = \"EXPORT\";\r\n        proto._optionChangesMap.onFileSaving = \"EXPORT\"\r\n    },\r\n    fontFields: [\"export.font\"]\r\n};\r\n"]},"metadata":{},"sourceType":"script"}