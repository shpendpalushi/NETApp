{"ast":null,"code":"/**\r\n * DevExtreme (ui/defer_rendering.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar domAdapter = require(\"../core/dom_adapter\");\n\nvar windowUtils = require(\"../core/utils/window\");\n\nvar window = windowUtils.getWindow();\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar commonUtils = require(\"../core/utils/common\");\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar each = require(\"../core/utils/iterator\").each;\n\nvar domUtils = require(\"../core/utils/dom\");\n\nvar TransitionExecutorModule = require(\"../animation/transition_executor/transition_executor\");\n\nvar Widget = require(\"./widget/ui.widget\");\n\nvar LoadIndicator = require(\"./load_indicator\");\n\nvar isPromise = require(\"../core/utils/type\").isPromise;\n\nvar deferredUtils = require(\"../core/utils/deferred\");\n\nvar Deferred = deferredUtils.Deferred;\nvar WIDGET_CLASS = \"dx-widget\";\nvar DEFER_RENDERING_CLASS = \"dx-deferrendering\";\nvar PENDING_RENDERING_CLASS = \"dx-pending-rendering\";\nvar PENDING_RENDERING_MANUAL_CLASS = \"dx-pending-rendering-manual\";\nvar PENDING_RENDERING_ACTIVE_CLASS = \"dx-pending-rendering-active\";\nvar VISIBLE_WHILE_PENDING_RENDERING_CLASS = \"dx-visible-while-pending-rendering\";\nvar INVISIBLE_WHILE_PENDING_RENDERING_CLASS = \"dx-invisible-while-pending-rendering\";\nvar LOADINDICATOR_CONTAINER_CLASS = \"dx-loadindicator-container\";\nvar DEFER_RENDERING_LOADINDICATOR_CONTAINER_CLASS = \"dx-deferrendering-loadindicator-container\";\nvar DEFER_DEFER_RENDERING_LOAD_INDICATOR = \"dx-deferrendering-load-indicator\";\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\nvar ACTIONS = [\"onRendered\", \"onShown\"];\nvar DeferRendering = Widget.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      showLoadIndicator: false,\n      renderWhen: void 0,\n      animation: void 0,\n      staggerItemSelector: void 0,\n      onRendered: null,\n      onShown: null\n    });\n  },\n  _getAnonymousTemplateName: function _getAnonymousTemplateName() {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _init: function _init() {\n    this.transitionExecutor = new TransitionExecutorModule.TransitionExecutor();\n\n    this._initElement();\n\n    this._initRender();\n\n    this._$initialContent = this.$element().clone().contents();\n\n    this._initActions();\n\n    this.callBase();\n  },\n  _initElement: function _initElement() {\n    this.$element().addClass(DEFER_RENDERING_CLASS);\n  },\n  _initRender: function _initRender() {\n    var that = this;\n    var $element = this.$element();\n    var renderWhen = this.option(\"renderWhen\");\n\n    var doRender = function doRender() {\n      return that._renderDeferredContent();\n    };\n\n    if (isPromise(renderWhen)) {\n      deferredUtils.fromPromise(renderWhen).done(doRender);\n    } else {\n      $element.data(\"dx-render-delegate\", doRender);\n\n      if (void 0 === renderWhen) {\n        $element.addClass(PENDING_RENDERING_MANUAL_CLASS);\n      }\n    }\n  },\n  _initActions: function _initActions() {\n    this._actions = {};\n    each(ACTIONS, function (_, action) {\n      this._actions[action] = this._createActionByOption(action) || commonUtils.noop;\n    }.bind(this));\n  },\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n\n    if (!this._initContent) {\n      this._initContent = this._renderContent;\n\n      this._renderContent = function () {};\n    }\n\n    this._initContent();\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    this.$element().removeClass(WIDGET_CLASS);\n    this.$element().append(this._$initialContent);\n\n    this._setLoadingState();\n  },\n  _renderDeferredContent: function _renderDeferredContent() {\n    var that = this;\n    var $element = this.$element();\n    var result = new Deferred();\n    $element.removeClass(PENDING_RENDERING_MANUAL_CLASS);\n    $element.addClass(PENDING_RENDERING_ACTIVE_CLASS);\n\n    this._abortRenderTask();\n\n    this._renderTask = commonUtils.executeAsync(function () {\n      that._renderImpl().done(function () {\n        var shownArgs = {\n          element: $element\n        };\n\n        that._actions.onShown([shownArgs]);\n\n        result.resolve(shownArgs);\n      }).fail(function () {\n        result.rejectWith(result, arguments);\n      });\n    });\n    return result.promise();\n  },\n  _isElementInViewport: function _isElementInViewport(element) {\n    var rect = element.getBoundingClientRect();\n    return rect.bottom >= 0 && rect.right >= 0 && rect.top <= (window.innerHeight || domAdapter.getDocumentElement().clientHeight) && rect.left <= (window.innerWidth || domAdapter.getDocumentElement().clientWidth);\n  },\n  _animate: function _animate() {\n    var that = this;\n    var $element = this.$element();\n    var animation = windowUtils.hasWindow() && this.option(\"animation\");\n    var staggerItemSelector = this.option(\"staggerItemSelector\");\n    var animatePromise;\n    that.transitionExecutor.stop();\n\n    if (animation) {\n      if (staggerItemSelector) {\n        $element.find(staggerItemSelector).each(function () {\n          if (that._isElementInViewport(this)) {\n            that.transitionExecutor.enter($(this), animation);\n          }\n        });\n      } else {\n        that.transitionExecutor.enter($element, animation);\n      }\n\n      animatePromise = that.transitionExecutor.start();\n    } else {\n      animatePromise = new Deferred().resolve().promise();\n    }\n\n    return animatePromise;\n  },\n  _renderImpl: function _renderImpl() {\n    var $element = this.$element();\n    var renderedArgs = {\n      element: $element\n    };\n\n    var contentTemplate = this._getTemplate(this._getAnonymousTemplateName());\n\n    if (contentTemplate) {\n      contentTemplate.render({\n        container: $element.empty(),\n        noModel: true\n      });\n    }\n\n    this._setRenderedState($element);\n\n    eventsEngine.trigger($element, \"dxcontentrendered\");\n\n    this._actions.onRendered([renderedArgs]);\n\n    this._isRendered = true;\n    return this._animate();\n  },\n  _setLoadingState: function _setLoadingState() {\n    var $element = this.$element();\n    var hasCustomLoadIndicator = !!$element.find(\".\" + VISIBLE_WHILE_PENDING_RENDERING_CLASS).length;\n    $element.addClass(PENDING_RENDERING_CLASS);\n\n    if (!hasCustomLoadIndicator) {\n      $element.children().addClass(INVISIBLE_WHILE_PENDING_RENDERING_CLASS);\n    }\n\n    if (this.option(\"showLoadIndicator\")) {\n      this._showLoadIndicator($element);\n    }\n  },\n  _showLoadIndicator: function _showLoadIndicator($container) {\n    this._$loadIndicator = new LoadIndicator($(\"<div>\"), {\n      visible: true\n    }).$element().addClass(DEFER_DEFER_RENDERING_LOAD_INDICATOR);\n    $(\"<div>\").addClass(LOADINDICATOR_CONTAINER_CLASS).addClass(DEFER_RENDERING_LOADINDICATOR_CONTAINER_CLASS).append(this._$loadIndicator).appendTo($container);\n  },\n  _setRenderedState: function _setRenderedState() {\n    var $element = this.$element();\n\n    if (this._$loadIndicator) {\n      this._$loadIndicator.remove();\n    }\n\n    $element.removeClass(PENDING_RENDERING_CLASS);\n    $element.removeClass(PENDING_RENDERING_ACTIVE_CLASS);\n    domUtils.triggerShownEvent($element.children());\n  },\n  _optionChanged: function _optionChanged(args) {\n    var value = args.value;\n    var previousValue = args.previousValue;\n\n    switch (args.name) {\n      case \"renderWhen\":\n        if (false === previousValue && true === value) {\n          this._renderOrAnimate();\n        } else {\n          if (true === previousValue && false === value) {\n            this.transitionExecutor.stop();\n\n            this._setLoadingState();\n          }\n        }\n\n        break;\n\n      case \"showLoadIndicator\":\n      case \"onRendered\":\n      case \"onShown\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _renderOrAnimate: function _renderOrAnimate() {\n    var result;\n\n    if (this._isRendered) {\n      this._setRenderedState();\n\n      result = this._animate();\n    } else {\n      result = this._renderDeferredContent();\n    }\n\n    return result;\n  },\n  renderContent: function renderContent() {\n    return this._renderOrAnimate();\n  },\n  _abortRenderTask: function _abortRenderTask() {\n    if (this._renderTask) {\n      this._renderTask.abort();\n\n      this._renderTask = void 0;\n    }\n  },\n  _dispose: function _dispose() {\n    this.transitionExecutor.stop(true);\n\n    this._abortRenderTask();\n\n    this._actions = void 0;\n    this._$initialContent = void 0;\n    this.callBase();\n  }\n});\nregisterComponent(\"dxDeferRendering\", DeferRendering);\nmodule.exports = DeferRendering;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/defer_rendering.js"],"names":["$","require","domAdapter","windowUtils","window","getWindow","eventsEngine","registerComponent","commonUtils","extend","each","domUtils","TransitionExecutorModule","Widget","LoadIndicator","isPromise","deferredUtils","Deferred","WIDGET_CLASS","DEFER_RENDERING_CLASS","PENDING_RENDERING_CLASS","PENDING_RENDERING_MANUAL_CLASS","PENDING_RENDERING_ACTIVE_CLASS","VISIBLE_WHILE_PENDING_RENDERING_CLASS","INVISIBLE_WHILE_PENDING_RENDERING_CLASS","LOADINDICATOR_CONTAINER_CLASS","DEFER_RENDERING_LOADINDICATOR_CONTAINER_CLASS","DEFER_DEFER_RENDERING_LOAD_INDICATOR","ANONYMOUS_TEMPLATE_NAME","ACTIONS","DeferRendering","inherit","_getDefaultOptions","callBase","showLoadIndicator","renderWhen","animation","staggerItemSelector","onRendered","onShown","_getAnonymousTemplateName","_init","transitionExecutor","TransitionExecutor","_initElement","_initRender","_$initialContent","$element","clone","contents","_initActions","addClass","that","option","doRender","_renderDeferredContent","fromPromise","done","data","_actions","_","action","_createActionByOption","noop","bind","_initMarkup","_initContent","_renderContent","_renderContentImpl","removeClass","append","_setLoadingState","result","_abortRenderTask","_renderTask","executeAsync","_renderImpl","shownArgs","element","resolve","fail","rejectWith","arguments","promise","_isElementInViewport","rect","getBoundingClientRect","bottom","right","top","innerHeight","getDocumentElement","clientHeight","left","innerWidth","clientWidth","_animate","hasWindow","animatePromise","stop","find","enter","start","renderedArgs","contentTemplate","_getTemplate","render","container","empty","noModel","_setRenderedState","trigger","_isRendered","hasCustomLoadIndicator","length","children","_showLoadIndicator","$container","_$loadIndicator","visible","appendTo","remove","triggerShownEvent","_optionChanged","args","value","previousValue","name","_renderOrAnimate","renderContent","abort","_dispose","module","exports","default"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/defer_rendering.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../core/renderer\");\r\nvar domAdapter = require(\"../core/dom_adapter\");\r\nvar windowUtils = require(\"../core/utils/window\");\r\nvar window = windowUtils.getWindow();\r\nvar eventsEngine = require(\"../events/core/events_engine\");\r\nvar registerComponent = require(\"../core/component_registrator\");\r\nvar commonUtils = require(\"../core/utils/common\");\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar each = require(\"../core/utils/iterator\").each;\r\nvar domUtils = require(\"../core/utils/dom\");\r\nvar TransitionExecutorModule = require(\"../animation/transition_executor/transition_executor\");\r\nvar Widget = require(\"./widget/ui.widget\");\r\nvar LoadIndicator = require(\"./load_indicator\");\r\nvar isPromise = require(\"../core/utils/type\").isPromise;\r\nvar deferredUtils = require(\"../core/utils/deferred\");\r\nvar Deferred = deferredUtils.Deferred;\r\nvar WIDGET_CLASS = \"dx-widget\";\r\nvar DEFER_RENDERING_CLASS = \"dx-deferrendering\";\r\nvar PENDING_RENDERING_CLASS = \"dx-pending-rendering\";\r\nvar PENDING_RENDERING_MANUAL_CLASS = \"dx-pending-rendering-manual\";\r\nvar PENDING_RENDERING_ACTIVE_CLASS = \"dx-pending-rendering-active\";\r\nvar VISIBLE_WHILE_PENDING_RENDERING_CLASS = \"dx-visible-while-pending-rendering\";\r\nvar INVISIBLE_WHILE_PENDING_RENDERING_CLASS = \"dx-invisible-while-pending-rendering\";\r\nvar LOADINDICATOR_CONTAINER_CLASS = \"dx-loadindicator-container\";\r\nvar DEFER_RENDERING_LOADINDICATOR_CONTAINER_CLASS = \"dx-deferrendering-loadindicator-container\";\r\nvar DEFER_DEFER_RENDERING_LOAD_INDICATOR = \"dx-deferrendering-load-indicator\";\r\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\r\nvar ACTIONS = [\"onRendered\", \"onShown\"];\r\nvar DeferRendering = Widget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            showLoadIndicator: false,\r\n            renderWhen: void 0,\r\n            animation: void 0,\r\n            staggerItemSelector: void 0,\r\n            onRendered: null,\r\n            onShown: null\r\n        })\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _init: function() {\r\n        this.transitionExecutor = new TransitionExecutorModule.TransitionExecutor;\r\n        this._initElement();\r\n        this._initRender();\r\n        this._$initialContent = this.$element().clone().contents();\r\n        this._initActions();\r\n        this.callBase()\r\n    },\r\n    _initElement: function() {\r\n        this.$element().addClass(DEFER_RENDERING_CLASS)\r\n    },\r\n    _initRender: function() {\r\n        var that = this;\r\n        var $element = this.$element();\r\n        var renderWhen = this.option(\"renderWhen\");\r\n        var doRender = function() {\r\n            return that._renderDeferredContent()\r\n        };\r\n        if (isPromise(renderWhen)) {\r\n            deferredUtils.fromPromise(renderWhen).done(doRender)\r\n        } else {\r\n            $element.data(\"dx-render-delegate\", doRender);\r\n            if (void 0 === renderWhen) {\r\n                $element.addClass(PENDING_RENDERING_MANUAL_CLASS)\r\n            }\r\n        }\r\n    },\r\n    _initActions: function() {\r\n        this._actions = {};\r\n        each(ACTIONS, function(_, action) {\r\n            this._actions[action] = this._createActionByOption(action) || commonUtils.noop\r\n        }.bind(this))\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        if (!this._initContent) {\r\n            this._initContent = this._renderContent;\r\n            this._renderContent = function() {}\r\n        }\r\n        this._initContent()\r\n    },\r\n    _renderContentImpl: function() {\r\n        this.$element().removeClass(WIDGET_CLASS);\r\n        this.$element().append(this._$initialContent);\r\n        this._setLoadingState()\r\n    },\r\n    _renderDeferredContent: function() {\r\n        var that = this;\r\n        var $element = this.$element();\r\n        var result = new Deferred;\r\n        $element.removeClass(PENDING_RENDERING_MANUAL_CLASS);\r\n        $element.addClass(PENDING_RENDERING_ACTIVE_CLASS);\r\n        this._abortRenderTask();\r\n        this._renderTask = commonUtils.executeAsync(function() {\r\n            that._renderImpl().done(function() {\r\n                var shownArgs = {\r\n                    element: $element\r\n                };\r\n                that._actions.onShown([shownArgs]);\r\n                result.resolve(shownArgs)\r\n            }).fail(function() {\r\n                result.rejectWith(result, arguments)\r\n            })\r\n        });\r\n        return result.promise()\r\n    },\r\n    _isElementInViewport: function(element) {\r\n        var rect = element.getBoundingClientRect();\r\n        return rect.bottom >= 0 && rect.right >= 0 && rect.top <= (window.innerHeight || domAdapter.getDocumentElement().clientHeight) && rect.left <= (window.innerWidth || domAdapter.getDocumentElement().clientWidth)\r\n    },\r\n    _animate: function() {\r\n        var that = this;\r\n        var $element = this.$element();\r\n        var animation = windowUtils.hasWindow() && this.option(\"animation\");\r\n        var staggerItemSelector = this.option(\"staggerItemSelector\");\r\n        var animatePromise;\r\n        that.transitionExecutor.stop();\r\n        if (animation) {\r\n            if (staggerItemSelector) {\r\n                $element.find(staggerItemSelector).each(function() {\r\n                    if (that._isElementInViewport(this)) {\r\n                        that.transitionExecutor.enter($(this), animation)\r\n                    }\r\n                })\r\n            } else {\r\n                that.transitionExecutor.enter($element, animation)\r\n            }\r\n            animatePromise = that.transitionExecutor.start()\r\n        } else {\r\n            animatePromise = (new Deferred).resolve().promise()\r\n        }\r\n        return animatePromise\r\n    },\r\n    _renderImpl: function() {\r\n        var $element = this.$element();\r\n        var renderedArgs = {\r\n            element: $element\r\n        };\r\n        var contentTemplate = this._getTemplate(this._getAnonymousTemplateName());\r\n        if (contentTemplate) {\r\n            contentTemplate.render({\r\n                container: $element.empty(),\r\n                noModel: true\r\n            })\r\n        }\r\n        this._setRenderedState($element);\r\n        eventsEngine.trigger($element, \"dxcontentrendered\");\r\n        this._actions.onRendered([renderedArgs]);\r\n        this._isRendered = true;\r\n        return this._animate()\r\n    },\r\n    _setLoadingState: function() {\r\n        var $element = this.$element();\r\n        var hasCustomLoadIndicator = !!$element.find(\".\" + VISIBLE_WHILE_PENDING_RENDERING_CLASS).length;\r\n        $element.addClass(PENDING_RENDERING_CLASS);\r\n        if (!hasCustomLoadIndicator) {\r\n            $element.children().addClass(INVISIBLE_WHILE_PENDING_RENDERING_CLASS)\r\n        }\r\n        if (this.option(\"showLoadIndicator\")) {\r\n            this._showLoadIndicator($element)\r\n        }\r\n    },\r\n    _showLoadIndicator: function($container) {\r\n        this._$loadIndicator = new LoadIndicator($(\"<div>\"), {\r\n            visible: true\r\n        }).$element().addClass(DEFER_DEFER_RENDERING_LOAD_INDICATOR);\r\n        $(\"<div>\").addClass(LOADINDICATOR_CONTAINER_CLASS).addClass(DEFER_RENDERING_LOADINDICATOR_CONTAINER_CLASS).append(this._$loadIndicator).appendTo($container)\r\n    },\r\n    _setRenderedState: function() {\r\n        var $element = this.$element();\r\n        if (this._$loadIndicator) {\r\n            this._$loadIndicator.remove()\r\n        }\r\n        $element.removeClass(PENDING_RENDERING_CLASS);\r\n        $element.removeClass(PENDING_RENDERING_ACTIVE_CLASS);\r\n        domUtils.triggerShownEvent($element.children())\r\n    },\r\n    _optionChanged: function(args) {\r\n        var value = args.value;\r\n        var previousValue = args.previousValue;\r\n        switch (args.name) {\r\n            case \"renderWhen\":\r\n                if (false === previousValue && true === value) {\r\n                    this._renderOrAnimate()\r\n                } else {\r\n                    if (true === previousValue && false === value) {\r\n                        this.transitionExecutor.stop();\r\n                        this._setLoadingState()\r\n                    }\r\n                }\r\n                break;\r\n            case \"showLoadIndicator\":\r\n            case \"onRendered\":\r\n            case \"onShown\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _renderOrAnimate: function() {\r\n        var result;\r\n        if (this._isRendered) {\r\n            this._setRenderedState();\r\n            result = this._animate()\r\n        } else {\r\n            result = this._renderDeferredContent()\r\n        }\r\n        return result\r\n    },\r\n    renderContent: function() {\r\n        return this._renderOrAnimate()\r\n    },\r\n    _abortRenderTask: function() {\r\n        if (this._renderTask) {\r\n            this._renderTask.abort();\r\n            this._renderTask = void 0\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        this.transitionExecutor.stop(true);\r\n        this._abortRenderTask();\r\n        this._actions = void 0;\r\n        this._$initialContent = void 0;\r\n        this.callBase()\r\n    }\r\n});\r\nregisterComponent(\"dxDeferRendering\", DeferRendering);\r\nmodule.exports = DeferRendering;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}