{"ast":null,"code":"/**\r\n * DevExtreme (viz/gauges/bar_gauge.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar PI_DIV_180 = Math.PI / 180;\nvar _abs = Math.abs;\nvar _round = Math.round;\nvar _floor = Math.floor;\nvar _min = Math.min;\nvar _max = Math.max;\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar objectUtils = require(\"../../core/utils/object\");\n\nvar commonUtils = require(\"../../core/utils/common\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar _normalizeEnum = require(\"../core/utils\").normalizeEnum;\n\nvar baseGaugeModule = require(\"./base_gauge\");\n\nvar dxBaseGauge = baseGaugeModule.dxBaseGauge;\nvar _getSampleText = baseGaugeModule.getSampleText;\nvar _formatValue = baseGaugeModule.formatValue;\nvar _compareArrays = baseGaugeModule.compareArrays;\n\nvar dxCircularGauge = require(\"./circular_gauge\");\n\nvar _isArray = Array.isArray;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar _convertAngleToRendererSpace = vizUtils.convertAngleToRendererSpace;\nvar _getCosAndSin = vizUtils.getCosAndSin;\nvar _patchFontOptions = vizUtils.patchFontOptions;\nvar _Number = Number;\nvar _isFinite = isFinite;\nvar _noop = commonUtils.noop;\nvar _extend = extend;\nvar OPTION_VALUES = \"values\";\nvar dxBarGauge = dxBaseGauge.inherit({\n  _rootClass: \"dxbg-bar-gauge\",\n  _themeSection: \"barGauge\",\n  _fontFields: [\"label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\n  _initCore: function _initCore() {\n    var that = this;\n    that.callBase.apply(that, arguments);\n    that._barsGroup = that._renderer.g().attr({\n      \"class\": \"dxbg-bars\"\n    }).linkOn(that._renderer.root, \"bars\");\n    that._values = [];\n    that._context = {\n      renderer: that._renderer,\n      translator: that._translator,\n      tracker: that._tracker,\n      group: that._barsGroup\n    };\n\n    that._animateStep = function (pos) {\n      var bars = that._bars;\n      var i;\n      var ii;\n\n      for (i = 0, ii = bars.length; i < ii; ++i) {\n        bars[i].animate(pos);\n      }\n    };\n\n    that._animateComplete = function () {\n      that._bars.forEach(function (bar) {\n        return bar.endAnimation();\n      });\n\n      that._checkOverlap();\n    };\n  },\n  _disposeCore: function _disposeCore() {\n    var that = this;\n\n    that._barsGroup.linkOff();\n\n    that._barsGroup = that._values = that._context = that._animateStep = that._animateComplete = null;\n    that.callBase.apply(that, arguments);\n  },\n  _setupDomainCore: function _setupDomainCore() {\n    var that = this;\n    var startValue = that.option(\"startValue\");\n    var endValue = that.option(\"endValue\");\n    _isFinite(startValue) || (startValue = 0);\n    _isFinite(endValue) || (endValue = 100);\n\n    that._translator.setDomain(startValue, endValue);\n\n    that._baseValue = that._translator.adjust(that.option(\"baseValue\"));\n    _isFinite(that._baseValue) || (that._baseValue = startValue < endValue ? startValue : endValue);\n  },\n  _getDefaultSize: function _getDefaultSize() {\n    return {\n      width: 300,\n      height: 300\n    };\n  },\n  _setupCodomain: dxCircularGauge.prototype._setupCodomain,\n  _getApproximateScreenRange: function _getApproximateScreenRange() {\n    var that = this;\n    var sides = that._area.sides;\n    var width = that._canvas.width / (sides.right - sides.left);\n    var height = that._canvas.height / (sides.down - sides.up);\n    var r = width < height ? width : height;\n    return -that._translator.getCodomainRange() * r * PI_DIV_180;\n  },\n  _setupAnimationSettings: function _setupAnimationSettings() {\n    var that = this;\n    that.callBase.apply(that, arguments);\n\n    if (that._animationSettings) {\n      that._animationSettings.step = that._animateStep;\n      that._animationSettings.complete = that._animateComplete;\n    }\n  },\n  _cleanContent: function _cleanContent() {\n    var that = this;\n\n    that._barsGroup.linkRemove();\n\n    that._animationSettings && that._barsGroup.stopAnimation();\n\n    that._barsGroup.clear();\n  },\n  _renderContent: function _renderContent() {\n    var that = this;\n    var labelOptions = that.option(\"label\");\n    var text;\n    var bBox;\n    var context = that._context;\n\n    that._barsGroup.linkAppend();\n\n    context.textEnabled = void 0 === labelOptions || labelOptions && (!(\"visible\" in labelOptions) || labelOptions.visible);\n\n    if (context.textEnabled) {\n      context.textColor = labelOptions && labelOptions.font && labelOptions.font.color || null;\n      labelOptions = _extend(true, {}, that._themeManager.theme().label, labelOptions);\n      context.formatOptions = {\n        format: void 0 !== labelOptions.format ? labelOptions.format : that._defaultFormatOptions,\n        customizeText: labelOptions.customizeText\n      };\n      context.textOptions = {\n        align: \"center\"\n      };\n      context.fontStyles = _patchFontOptions(_extend({}, that._themeManager.theme().label.font, labelOptions.font, {\n        color: null\n      }));\n      that._textIndent = labelOptions.indent > 0 ? _Number(labelOptions.indent) : 0;\n      context.lineWidth = labelOptions.connectorWidth > 0 ? _Number(labelOptions.connectorWidth) : 0;\n      context.lineColor = labelOptions.connectorColor || null;\n      text = that._renderer.text(_getSampleText(that._translator, context.formatOptions), 0, 0).attr(context.textOptions).css(context.fontStyles).append(that._barsGroup);\n      bBox = text.getBBox();\n      text.remove();\n      context.textY = bBox.y;\n      context.textWidth = bBox.width;\n      context.textHeight = bBox.height;\n    }\n\n    dxCircularGauge.prototype._applyMainLayout.call(that);\n\n    that._renderBars();\n  },\n  _measureMainElements: function _measureMainElements() {\n    var result = {\n      maxRadius: this._area.radius\n    };\n\n    if (this._context.textEnabled) {\n      result.horizontalMargin = this._context.textWidth;\n      result.verticalMargin = this._context.textHeight;\n      result.inverseHorizontalMargin = this._context.textWidth / 2;\n      result.inverseVerticalMargin = this._context.textHeight / 2;\n    }\n\n    return result;\n  },\n  _renderBars: function _renderBars() {\n    var that = this;\n\n    var options = _extend({}, that._themeManager.theme(), that.option());\n\n    var relativeInnerRadius;\n    var radius;\n    var area = that._area;\n    relativeInnerRadius = options.relativeInnerRadius > 0 && options.relativeInnerRadius < 1 ? _Number(options.relativeInnerRadius) : .1;\n    radius = area.radius;\n\n    if (that._context.textEnabled) {\n      that._textIndent = _round(_min(that._textIndent, radius / 2));\n      radius -= that._textIndent;\n    }\n\n    that._outerRadius = _floor(radius);\n    that._innerRadius = _floor(radius * relativeInnerRadius);\n    that._barSpacing = options.barSpacing > 0 ? _Number(options.barSpacing) : 0;\n\n    _extend(that._context, {\n      backgroundColor: options.backgroundColor,\n      x: area.x,\n      y: area.y,\n      startAngle: area.startCoord,\n      endAngle: area.endCoord,\n      baseAngle: that._translator.translate(that._baseValue)\n    });\n\n    that._arrangeBars();\n  },\n  _arrangeBars: function _arrangeBars() {\n    var that = this;\n    var radius = that._outerRadius - that._innerRadius;\n    var context = that._context;\n    var spacing;\n    var colors;\n    var unitOffset;\n    var i;\n    var count = that._bars.length;\n\n    that._beginValueChanging();\n\n    context.barSize = count > 0 ? _max((radius - (count - 1) * that._barSpacing) / count, 1) : 0;\n    spacing = count > 1 ? _max(_min((radius - count * context.barSize) / (count - 1), that._barSpacing), 0) : 0;\n\n    var _count = _min(_floor((radius + spacing) / context.barSize), count);\n\n    that._setBarsCount(count);\n\n    radius = that._outerRadius;\n    context.textRadius = radius;\n    context.textIndent = that._textIndent;\n\n    that._palette.reset();\n\n    unitOffset = context.barSize + spacing;\n    colors = that._palette.generateColors(_count);\n\n    for (i = 0; i < _count; ++i, radius -= unitOffset) {\n      that._bars[i].arrange({\n        radius: radius,\n        color: colors[i]\n      });\n    }\n\n    for (var _i = _count; _i < count; _i++) {\n      that._bars[_i].hide();\n    }\n\n    if (that._animationSettings && !that._noAnimation) {\n      that._animateBars();\n    } else {\n      that._updateBars();\n    }\n\n    that._endValueChanging();\n  },\n  _setBarsCount: function _setBarsCount() {\n    var that = this;\n\n    if (that._bars.length > 0) {\n      if (that._dummyBackground) {\n        that._dummyBackground.dispose();\n\n        that._dummyBackground = null;\n      }\n    } else {\n      if (!that._dummyBackground) {\n        that._dummyBackground = that._renderer.arc().attr({\n          \"stroke-linejoin\": \"round\"\n        });\n      }\n\n      that._dummyBackground.attr({\n        x: that._context.x,\n        y: that._context.y,\n        outerRadius: that._outerRadius,\n        innerRadius: that._innerRadius,\n        startAngle: that._context.endAngle,\n        endAngle: that._context.startAngle,\n        fill: that._context.backgroundColor\n      }).append(that._barsGroup);\n    }\n  },\n  _updateBars: function _updateBars() {\n    this._bars.forEach(function (bar) {\n      return bar.applyValue();\n    });\n\n    this._checkOverlap();\n  },\n  _checkOverlap: function _checkOverlap() {\n    var that = this;\n    var bars = that._bars;\n\n    var overlapStrategy = _normalizeEnum(that._getOption(\"resolveLabelOverlapping\", true));\n\n    if (\"none\" === overlapStrategy) {\n      return;\n    }\n\n    var sortedBars = bars.concat().sort(function (a, b) {\n      return a.getValue() - b.getValue();\n    });\n    var currentIndex = 0;\n    var nextIndex = 1;\n\n    while (currentIndex < sortedBars.length && nextIndex < sortedBars.length) {\n      var current = sortedBars[currentIndex];\n      var next = sortedBars[nextIndex];\n\n      if (current.checkIntersect(next)) {\n        next.hideLabel();\n        nextIndex++;\n      } else {\n        currentIndex = nextIndex;\n        nextIndex = currentIndex + 1;\n      }\n    }\n  },\n  _animateBars: function _animateBars() {\n    var that = this;\n    var i;\n    var ii = that._bars.length;\n\n    if (ii > 0) {\n      for (i = 0; i < ii; ++i) {\n        that._bars[i].beginAnimation();\n      }\n\n      that._barsGroup.animate({\n        _: 0\n      }, that._animationSettings);\n    }\n  },\n  _buildNodes: function _buildNodes() {\n    var that = this;\n    var options = that._options;\n    that._palette = that._themeManager.createPalette(options.palette, {\n      useHighlight: true,\n      extensionMode: options.paletteExtensionMode\n    });\n\n    that._palette.reset();\n\n    that._bars = that._bars || [];\n    that._animationSettings && that._barsGroup.stopAnimation();\n\n    var barValues = that._values.filter(_isFinite);\n\n    var count = barValues.length;\n\n    if (that._bars.length > count) {\n      var ii = that._bars.length;\n\n      for (var i = count; i < ii; ++i) {\n        that._bars[i].dispose();\n      }\n\n      that._bars.splice(count, ii - count);\n    } else {\n      if (that._bars.length < count) {\n        for (var _i2 = that._bars.length; _i2 < count; ++_i2) {\n          that._bars.push(new BarWrapper(_i2, that._context));\n        }\n      }\n    }\n\n    that._bars.forEach(function (bar, index) {\n      bar.update({\n        color: that._palette.getNextColor(count),\n        value: barValues[index]\n      });\n    });\n  },\n  _updateValues: function _updateValues(values) {\n    var that = this;\n    var list = _isArray(values) && values || _isFinite(values) && [values] || [];\n    var i;\n    var ii = list.length;\n    var value;\n    that._values.length = ii;\n\n    for (i = 0; i < ii; ++i) {\n      value = list[i];\n      that._values[i] = value = _Number(_isFinite(value) ? value : that._values[i]);\n    }\n\n    if (!that._resizing) {\n      if (!_compareArrays(that._values, that.option(OPTION_VALUES))) {\n        that.option(OPTION_VALUES, that._values.slice());\n      }\n    }\n\n    this._change([\"NODES\"]);\n  },\n  values: function values(arg) {\n    if (void 0 !== arg) {\n      this._updateValues(arg);\n\n      return this;\n    } else {\n      return this._values.slice(0);\n    }\n  },\n  _optionChangesMap: {\n    backgroundColor: \"MOSTLY_TOTAL\",\n    relativeInnerRadius: \"MOSTLY_TOTAL\",\n    barSpacing: \"MOSTLY_TOTAL\",\n    label: \"MOSTLY_TOTAL\",\n    resolveLabelOverlapping: \"MOSTLY_TOTAL\",\n    palette: \"MOSTLY_TOTAL\",\n    paletteExtensionMode: \"MOSTLY_TOTAL\",\n    values: \"VALUES\"\n  },\n  _change_VALUES: function _change_VALUES() {\n    this._updateValues(this.option(OPTION_VALUES));\n  },\n  _factory: objectUtils.clone(dxBaseGauge.prototype._factory),\n  _optionChangesOrder: [\"VALUES\", \"NODES\"],\n  _initialChanges: [\"VALUES\"],\n  _change_NODES: function _change_NODES() {\n    this._buildNodes();\n  },\n  _change_MOSTLY_TOTAL: function _change_MOSTLY_TOTAL() {\n    this._change([\"NODES\"]);\n\n    this.callBase();\n  },\n  _proxyData: [],\n  _getLegendData: function _getLegendData() {\n    var that = this;\n    var formatOptions = {};\n    var options = that._options;\n    var labelFormatOptions = (options.label || {}).format;\n    var legendFormatOptions = (options.legend || {}).itemTextFormat;\n\n    if (legendFormatOptions) {\n      formatOptions.format = legendFormatOptions;\n    } else {\n      formatOptions.format = labelFormatOptions || that._defaultFormatOptions;\n    }\n\n    return (this._bars || []).map(function (b) {\n      return {\n        id: b.index,\n        item: {\n          value: b.getValue(),\n          color: b.getColor(),\n          index: b.index\n        },\n        text: _formatValue(b.getValue(), formatOptions),\n        visible: true,\n        states: {\n          normal: {\n            fill: b.getColor()\n          }\n        }\n      };\n    });\n  }\n});\n\nvar BarWrapper = function BarWrapper(index, context) {\n  var that = this;\n  that._context = context;\n  that._tracker = context.renderer.arc().attr({\n    \"stroke-linejoin\": \"round\"\n  });\n  that.index = index;\n};\n\n_extend(BarWrapper.prototype, {\n  dispose: function dispose() {\n    var that = this;\n\n    that._background.dispose();\n\n    that._bar.dispose();\n\n    if (that._context.textEnabled) {\n      that._line.dispose();\n\n      that._text.dispose();\n    }\n\n    that._context.tracker.detach(that._tracker);\n\n    that._context = that._settings = that._background = that._bar = that._line = that._text = that._tracker = null;\n    return that;\n  },\n  arrange: function arrange(options) {\n    var that = this;\n    var context = that._context;\n    this._visible = true;\n    context.tracker.attach(that._tracker, that, {\n      index: that.index\n    });\n    that._background = context.renderer.arc().attr({\n      \"stroke-linejoin\": \"round\",\n      fill: context.backgroundColor\n    }).append(context.group);\n    that._settings = that._settings || {\n      x: context.x,\n      y: context.y,\n      startAngle: context.baseAngle,\n      endAngle: context.baseAngle\n    };\n    that._bar = context.renderer.arc().attr(_extend({\n      \"stroke-linejoin\": \"round\"\n    }, that._settings)).append(context.group);\n\n    if (context.textEnabled) {\n      that._line = context.renderer.path([], \"line\").attr({\n        \"stroke-width\": context.lineWidth\n      }).append(context.group);\n      that._text = context.renderer.text().css(context.fontStyles).attr(context.textOptions).append(context.group);\n    }\n\n    that._angle = isFinite(that._angle) ? that._angle : context.baseAngle;\n    that._settings.outerRadius = options.radius;\n    that._settings.innerRadius = options.radius - context.barSize;\n    that._settings.x = context.x;\n    that._settings.y = context.y;\n\n    that._background.attr(_extend({}, that._settings, {\n      startAngle: context.endAngle,\n      endAngle: context.startAngle,\n      fill: that._context.backgroundColor\n    }));\n\n    that._bar.attr({\n      x: context.x,\n      y: context.y,\n      outerRadius: that._settings.outerRadius,\n      innerRadius: that._settings.innerRadius,\n      fill: that._color\n    });\n\n    that._tracker.attr(that._settings);\n\n    if (context.textEnabled) {\n      that._line.attr({\n        points: [context.x, context.y - that._settings.innerRadius, context.x, context.y - context.textRadius - context.textIndent],\n        stroke: context.lineColor || that._color\n      }).sharp();\n\n      that._text.css({\n        fill: context.textColor || that._color\n      });\n    }\n\n    return that;\n  },\n  getTooltipParameters: function getTooltipParameters() {\n    var that = this;\n\n    var cosSin = _getCosAndSin((that._angle + that._context.baseAngle) / 2);\n\n    return {\n      x: _round(that._context.x + (that._settings.outerRadius + that._settings.innerRadius) / 2 * cosSin.cos),\n      y: _round(that._context.y - (that._settings.outerRadius + that._settings.innerRadius) / 2 * cosSin.sin),\n      offset: 0,\n      color: that._color,\n      value: that._value\n    };\n  },\n  setAngle: function setAngle(angle) {\n    var that = this;\n    var context = that._context;\n    var settings = that._settings;\n    var cosSin;\n    that._angle = angle;\n    setAngles(settings, context.baseAngle, angle);\n\n    that._bar.attr(settings);\n\n    that._tracker.attr(settings);\n\n    if (context.textEnabled) {\n      cosSin = _getCosAndSin(angle);\n      var indent = context.textIndent;\n      var radius = context.textRadius + indent;\n      var x = context.x + radius * cosSin.cos;\n      var y = context.y - radius * cosSin.sin;\n      var halfWidth = .5 * context.textWidth;\n      var textHeight = context.textHeight;\n      var textY = context.textY;\n\n      if (_abs(x - context.x) > indent) {\n        x += x < context.x ? -halfWidth : halfWidth;\n      }\n\n      if (_abs(y - context.y) <= indent) {\n        y -= textY + .5 * textHeight;\n      } else {\n        y -= y < context.y ? textY + textHeight : textY;\n      }\n\n      var text = _formatValue(that._value, context.formatOptions, {\n        index: that.index\n      });\n\n      var visibility = \"\" === text ? \"hidden\" : null;\n\n      that._text.attr({\n        text: text,\n        x: x,\n        y: y,\n        visibility: visibility\n      });\n\n      that._line.attr({\n        visibility: visibility\n      });\n\n      that._line.rotate(_convertAngleToRendererSpace(angle), context.x, context.y);\n    }\n\n    return that;\n  },\n  hideLabel: function hideLabel() {\n    this._text.attr({\n      visibility: \"hidden\"\n    });\n\n    this._line.attr({\n      visibility: \"hidden\"\n    });\n  },\n  checkIntersect: function checkIntersect(anotherBar) {\n    var coords = this.calculateLabelCoords();\n    var anotherCoords = anotherBar.calculateLabelCoords();\n\n    if (!coords || !anotherCoords) {\n      return false;\n    }\n\n    var width = Math.max(0, Math.min(coords.bottomRight.x, anotherCoords.bottomRight.x) - Math.max(coords.topLeft.x, anotherCoords.topLeft.x));\n    var height = Math.max(0, Math.min(coords.bottomRight.y, anotherCoords.bottomRight.y) - Math.max(coords.topLeft.y, anotherCoords.topLeft.y));\n    return width * height !== 0;\n  },\n  calculateLabelCoords: function calculateLabelCoords() {\n    if (!this._text) {\n      return;\n    }\n\n    var box = this._text.getBBox();\n\n    return {\n      topLeft: {\n        x: box.x,\n        y: box.y\n      },\n      bottomRight: {\n        x: box.x + box.width,\n        y: box.y + box.height\n      }\n    };\n  },\n  _processValue: function _processValue(value) {\n    return this._context.translator.translate(this._context.translator.adjust(value));\n  },\n  applyValue: function applyValue() {\n    if (!this._visible) {\n      return this;\n    }\n\n    return this.setAngle(this._processValue(this.getValue()));\n  },\n  update: function update(_ref) {\n    var color = _ref.color,\n        value = _ref.value;\n    this._color = color;\n    this._value = value;\n  },\n  hide: function hide() {\n    this._visible = false;\n  },\n  getColor: function getColor() {\n    return this._color;\n  },\n  getValue: function getValue() {\n    return this._value;\n  },\n  beginAnimation: function beginAnimation() {\n    if (!this._visible) {\n      return this;\n    }\n\n    var that = this;\n\n    var angle = this._processValue(this.getValue());\n\n    if (!compareFloats(that._angle, angle)) {\n      that._start = that._angle;\n      that._delta = angle - that._angle;\n\n      that._tracker.attr({\n        visibility: \"hidden\"\n      });\n\n      if (that._context.textEnabled) {\n        that._line.attr({\n          visibility: \"hidden\"\n        });\n\n        that._text.attr({\n          visibility: \"hidden\"\n        });\n      }\n    } else {\n      that.animate = _noop;\n      that.setAngle(that._angle);\n    }\n  },\n  animate: function animate(pos) {\n    if (!this._visible) {\n      return this;\n    }\n\n    var that = this;\n    that._angle = that._start + that._delta * pos;\n    setAngles(that._settings, that._context.baseAngle, that._angle);\n\n    that._bar.attr(that._settings);\n  },\n  endAnimation: function endAnimation() {\n    var that = this;\n\n    if (void 0 !== that._delta) {\n      if (compareFloats(that._angle, that._start + that._delta)) {\n        that._tracker.attr({\n          visibility: null\n        });\n\n        that.setAngle(that._angle);\n      }\n    } else {\n      delete that.animate;\n    }\n\n    delete that._start;\n    delete that._delta;\n  }\n});\n\nfunction setAngles(target, angle1, angle2) {\n  target.startAngle = angle1 < angle2 ? angle1 : angle2;\n  target.endAngle = angle1 < angle2 ? angle2 : angle1;\n}\n\nfunction compareFloats(value1, value2) {\n  return _abs(value1 - value2) < 1e-4;\n}\n\nregisterComponent(\"dxBarGauge\", dxBarGauge);\nexports.dxBarGauge = dxBarGauge;\ndxBarGauge.addPlugin(require(\"../components/legend\").plugin);","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/gauges/bar_gauge.js"],"names":["PI_DIV_180","Math","PI","_abs","abs","_round","round","_floor","floor","_min","min","_max","max","registerComponent","require","objectUtils","commonUtils","extend","_normalizeEnum","normalizeEnum","baseGaugeModule","dxBaseGauge","_getSampleText","getSampleText","_formatValue","formatValue","_compareArrays","compareArrays","dxCircularGauge","_isArray","Array","isArray","vizUtils","_convertAngleToRendererSpace","convertAngleToRendererSpace","_getCosAndSin","getCosAndSin","_patchFontOptions","patchFontOptions","_Number","Number","_isFinite","isFinite","_noop","noop","_extend","OPTION_VALUES","dxBarGauge","inherit","_rootClass","_themeSection","_fontFields","_initCore","that","callBase","apply","arguments","_barsGroup","_renderer","g","attr","linkOn","root","_values","_context","renderer","translator","_translator","tracker","_tracker","group","_animateStep","pos","bars","_bars","i","ii","length","animate","_animateComplete","forEach","bar","endAnimation","_checkOverlap","_disposeCore","linkOff","_setupDomainCore","startValue","option","endValue","setDomain","_baseValue","adjust","_getDefaultSize","width","height","_setupCodomain","prototype","_getApproximateScreenRange","sides","_area","_canvas","right","left","down","up","r","getCodomainRange","_setupAnimationSettings","_animationSettings","step","complete","_cleanContent","linkRemove","stopAnimation","clear","_renderContent","labelOptions","text","bBox","context","linkAppend","textEnabled","visible","textColor","font","color","_themeManager","theme","label","formatOptions","format","_defaultFormatOptions","customizeText","textOptions","align","fontStyles","_textIndent","indent","lineWidth","connectorWidth","lineColor","connectorColor","css","append","getBBox","remove","textY","y","textWidth","textHeight","_applyMainLayout","call","_renderBars","_measureMainElements","result","maxRadius","radius","horizontalMargin","verticalMargin","inverseHorizontalMargin","inverseVerticalMargin","options","relativeInnerRadius","area","_outerRadius","_innerRadius","_barSpacing","barSpacing","backgroundColor","x","startAngle","startCoord","endAngle","endCoord","baseAngle","translate","_arrangeBars","spacing","colors","unitOffset","count","_beginValueChanging","barSize","_count","_setBarsCount","textRadius","textIndent","_palette","reset","generateColors","arrange","_i","hide","_noAnimation","_animateBars","_updateBars","_endValueChanging","_dummyBackground","dispose","arc","outerRadius","innerRadius","fill","applyValue","overlapStrategy","_getOption","sortedBars","concat","sort","a","b","getValue","currentIndex","nextIndex","current","next","checkIntersect","hideLabel","beginAnimation","_","_buildNodes","_options","createPalette","palette","useHighlight","extensionMode","paletteExtensionMode","barValues","filter","splice","_i2","push","BarWrapper","index","update","getNextColor","value","_updateValues","values","list","_resizing","slice","_change","arg","_optionChangesMap","resolveLabelOverlapping","_change_VALUES","_factory","clone","_optionChangesOrder","_initialChanges","_change_NODES","_change_MOSTLY_TOTAL","_proxyData","_getLegendData","labelFormatOptions","legendFormatOptions","legend","itemTextFormat","map","id","item","getColor","states","normal","_background","_bar","_line","_text","detach","_settings","_visible","attach","path","_angle","_color","points","stroke","sharp","getTooltipParameters","cosSin","cos","sin","offset","_value","setAngle","angle","settings","setAngles","halfWidth","visibility","rotate","anotherBar","coords","calculateLabelCoords","anotherCoords","bottomRight","topLeft","box","_processValue","_ref","compareFloats","_start","_delta","target","angle1","angle2","value1","value2","exports","addPlugin","plugin"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/gauges/bar_gauge.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar PI_DIV_180 = Math.PI / 180;\r\nvar _abs = Math.abs;\r\nvar _round = Math.round;\r\nvar _floor = Math.floor;\r\nvar _min = Math.min;\r\nvar _max = Math.max;\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar objectUtils = require(\"../../core/utils/object\");\r\nvar commonUtils = require(\"../../core/utils/common\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar _normalizeEnum = require(\"../core/utils\").normalizeEnum;\r\nvar baseGaugeModule = require(\"./base_gauge\");\r\nvar dxBaseGauge = baseGaugeModule.dxBaseGauge;\r\nvar _getSampleText = baseGaugeModule.getSampleText;\r\nvar _formatValue = baseGaugeModule.formatValue;\r\nvar _compareArrays = baseGaugeModule.compareArrays;\r\nvar dxCircularGauge = require(\"./circular_gauge\");\r\nvar _isArray = Array.isArray;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar _convertAngleToRendererSpace = vizUtils.convertAngleToRendererSpace;\r\nvar _getCosAndSin = vizUtils.getCosAndSin;\r\nvar _patchFontOptions = vizUtils.patchFontOptions;\r\nvar _Number = Number;\r\nvar _isFinite = isFinite;\r\nvar _noop = commonUtils.noop;\r\nvar _extend = extend;\r\nvar OPTION_VALUES = \"values\";\r\nvar dxBarGauge = dxBaseGauge.inherit({\r\n    _rootClass: \"dxbg-bar-gauge\",\r\n    _themeSection: \"barGauge\",\r\n    _fontFields: [\"label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\r\n    _initCore: function() {\r\n        var that = this;\r\n        that.callBase.apply(that, arguments);\r\n        that._barsGroup = that._renderer.g().attr({\r\n            \"class\": \"dxbg-bars\"\r\n        }).linkOn(that._renderer.root, \"bars\");\r\n        that._values = [];\r\n        that._context = {\r\n            renderer: that._renderer,\r\n            translator: that._translator,\r\n            tracker: that._tracker,\r\n            group: that._barsGroup\r\n        };\r\n        that._animateStep = function(pos) {\r\n            var bars = that._bars;\r\n            var i;\r\n            var ii;\r\n            for (i = 0, ii = bars.length; i < ii; ++i) {\r\n                bars[i].animate(pos)\r\n            }\r\n        };\r\n        that._animateComplete = function() {\r\n            that._bars.forEach(function(bar) {\r\n                return bar.endAnimation()\r\n            });\r\n            that._checkOverlap()\r\n        }\r\n    },\r\n    _disposeCore: function() {\r\n        var that = this;\r\n        that._barsGroup.linkOff();\r\n        that._barsGroup = that._values = that._context = that._animateStep = that._animateComplete = null;\r\n        that.callBase.apply(that, arguments)\r\n    },\r\n    _setupDomainCore: function() {\r\n        var that = this;\r\n        var startValue = that.option(\"startValue\");\r\n        var endValue = that.option(\"endValue\");\r\n        _isFinite(startValue) || (startValue = 0);\r\n        _isFinite(endValue) || (endValue = 100);\r\n        that._translator.setDomain(startValue, endValue);\r\n        that._baseValue = that._translator.adjust(that.option(\"baseValue\"));\r\n        _isFinite(that._baseValue) || (that._baseValue = startValue < endValue ? startValue : endValue)\r\n    },\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: 300,\r\n            height: 300\r\n        }\r\n    },\r\n    _setupCodomain: dxCircularGauge.prototype._setupCodomain,\r\n    _getApproximateScreenRange: function() {\r\n        var that = this;\r\n        var sides = that._area.sides;\r\n        var width = that._canvas.width / (sides.right - sides.left);\r\n        var height = that._canvas.height / (sides.down - sides.up);\r\n        var r = width < height ? width : height;\r\n        return -that._translator.getCodomainRange() * r * PI_DIV_180\r\n    },\r\n    _setupAnimationSettings: function() {\r\n        var that = this;\r\n        that.callBase.apply(that, arguments);\r\n        if (that._animationSettings) {\r\n            that._animationSettings.step = that._animateStep;\r\n            that._animationSettings.complete = that._animateComplete\r\n        }\r\n    },\r\n    _cleanContent: function() {\r\n        var that = this;\r\n        that._barsGroup.linkRemove();\r\n        that._animationSettings && that._barsGroup.stopAnimation();\r\n        that._barsGroup.clear()\r\n    },\r\n    _renderContent: function() {\r\n        var that = this;\r\n        var labelOptions = that.option(\"label\");\r\n        var text;\r\n        var bBox;\r\n        var context = that._context;\r\n        that._barsGroup.linkAppend();\r\n        context.textEnabled = void 0 === labelOptions || labelOptions && (!(\"visible\" in labelOptions) || labelOptions.visible);\r\n        if (context.textEnabled) {\r\n            context.textColor = labelOptions && labelOptions.font && labelOptions.font.color || null;\r\n            labelOptions = _extend(true, {}, that._themeManager.theme().label, labelOptions);\r\n            context.formatOptions = {\r\n                format: void 0 !== labelOptions.format ? labelOptions.format : that._defaultFormatOptions,\r\n                customizeText: labelOptions.customizeText\r\n            };\r\n            context.textOptions = {\r\n                align: \"center\"\r\n            };\r\n            context.fontStyles = _patchFontOptions(_extend({}, that._themeManager.theme().label.font, labelOptions.font, {\r\n                color: null\r\n            }));\r\n            that._textIndent = labelOptions.indent > 0 ? _Number(labelOptions.indent) : 0;\r\n            context.lineWidth = labelOptions.connectorWidth > 0 ? _Number(labelOptions.connectorWidth) : 0;\r\n            context.lineColor = labelOptions.connectorColor || null;\r\n            text = that._renderer.text(_getSampleText(that._translator, context.formatOptions), 0, 0).attr(context.textOptions).css(context.fontStyles).append(that._barsGroup);\r\n            bBox = text.getBBox();\r\n            text.remove();\r\n            context.textY = bBox.y;\r\n            context.textWidth = bBox.width;\r\n            context.textHeight = bBox.height\r\n        }\r\n        dxCircularGauge.prototype._applyMainLayout.call(that);\r\n        that._renderBars()\r\n    },\r\n    _measureMainElements: function() {\r\n        var result = {\r\n            maxRadius: this._area.radius\r\n        };\r\n        if (this._context.textEnabled) {\r\n            result.horizontalMargin = this._context.textWidth;\r\n            result.verticalMargin = this._context.textHeight;\r\n            result.inverseHorizontalMargin = this._context.textWidth / 2;\r\n            result.inverseVerticalMargin = this._context.textHeight / 2\r\n        }\r\n        return result\r\n    },\r\n    _renderBars: function() {\r\n        var that = this;\r\n        var options = _extend({}, that._themeManager.theme(), that.option());\r\n        var relativeInnerRadius;\r\n        var radius;\r\n        var area = that._area;\r\n        relativeInnerRadius = options.relativeInnerRadius > 0 && options.relativeInnerRadius < 1 ? _Number(options.relativeInnerRadius) : .1;\r\n        radius = area.radius;\r\n        if (that._context.textEnabled) {\r\n            that._textIndent = _round(_min(that._textIndent, radius / 2));\r\n            radius -= that._textIndent\r\n        }\r\n        that._outerRadius = _floor(radius);\r\n        that._innerRadius = _floor(radius * relativeInnerRadius);\r\n        that._barSpacing = options.barSpacing > 0 ? _Number(options.barSpacing) : 0;\r\n        _extend(that._context, {\r\n            backgroundColor: options.backgroundColor,\r\n            x: area.x,\r\n            y: area.y,\r\n            startAngle: area.startCoord,\r\n            endAngle: area.endCoord,\r\n            baseAngle: that._translator.translate(that._baseValue)\r\n        });\r\n        that._arrangeBars()\r\n    },\r\n    _arrangeBars: function() {\r\n        var that = this;\r\n        var radius = that._outerRadius - that._innerRadius;\r\n        var context = that._context;\r\n        var spacing;\r\n        var colors;\r\n        var unitOffset;\r\n        var i;\r\n        var count = that._bars.length;\r\n        that._beginValueChanging();\r\n        context.barSize = count > 0 ? _max((radius - (count - 1) * that._barSpacing) / count, 1) : 0;\r\n        spacing = count > 1 ? _max(_min((radius - count * context.barSize) / (count - 1), that._barSpacing), 0) : 0;\r\n        var _count = _min(_floor((radius + spacing) / context.barSize), count);\r\n        that._setBarsCount(count);\r\n        radius = that._outerRadius;\r\n        context.textRadius = radius;\r\n        context.textIndent = that._textIndent;\r\n        that._palette.reset();\r\n        unitOffset = context.barSize + spacing;\r\n        colors = that._palette.generateColors(_count);\r\n        for (i = 0; i < _count; ++i, radius -= unitOffset) {\r\n            that._bars[i].arrange({\r\n                radius: radius,\r\n                color: colors[i]\r\n            })\r\n        }\r\n        for (var _i = _count; _i < count; _i++) {\r\n            that._bars[_i].hide()\r\n        }\r\n        if (that._animationSettings && !that._noAnimation) {\r\n            that._animateBars()\r\n        } else {\r\n            that._updateBars()\r\n        }\r\n        that._endValueChanging()\r\n    },\r\n    _setBarsCount: function() {\r\n        var that = this;\r\n        if (that._bars.length > 0) {\r\n            if (that._dummyBackground) {\r\n                that._dummyBackground.dispose();\r\n                that._dummyBackground = null\r\n            }\r\n        } else {\r\n            if (!that._dummyBackground) {\r\n                that._dummyBackground = that._renderer.arc().attr({\r\n                    \"stroke-linejoin\": \"round\"\r\n                })\r\n            }\r\n            that._dummyBackground.attr({\r\n                x: that._context.x,\r\n                y: that._context.y,\r\n                outerRadius: that._outerRadius,\r\n                innerRadius: that._innerRadius,\r\n                startAngle: that._context.endAngle,\r\n                endAngle: that._context.startAngle,\r\n                fill: that._context.backgroundColor\r\n            }).append(that._barsGroup)\r\n        }\r\n    },\r\n    _updateBars: function() {\r\n        this._bars.forEach(function(bar) {\r\n            return bar.applyValue()\r\n        });\r\n        this._checkOverlap()\r\n    },\r\n    _checkOverlap: function() {\r\n        var that = this;\r\n        var bars = that._bars;\r\n        var overlapStrategy = _normalizeEnum(that._getOption(\"resolveLabelOverlapping\", true));\r\n        if (\"none\" === overlapStrategy) {\r\n            return\r\n        }\r\n        var sortedBars = bars.concat().sort(function(a, b) {\r\n            return a.getValue() - b.getValue()\r\n        });\r\n        var currentIndex = 0;\r\n        var nextIndex = 1;\r\n        while (currentIndex < sortedBars.length && nextIndex < sortedBars.length) {\r\n            var current = sortedBars[currentIndex];\r\n            var next = sortedBars[nextIndex];\r\n            if (current.checkIntersect(next)) {\r\n                next.hideLabel();\r\n                nextIndex++\r\n            } else {\r\n                currentIndex = nextIndex;\r\n                nextIndex = currentIndex + 1\r\n            }\r\n        }\r\n    },\r\n    _animateBars: function() {\r\n        var that = this;\r\n        var i;\r\n        var ii = that._bars.length;\r\n        if (ii > 0) {\r\n            for (i = 0; i < ii; ++i) {\r\n                that._bars[i].beginAnimation()\r\n            }\r\n            that._barsGroup.animate({\r\n                _: 0\r\n            }, that._animationSettings)\r\n        }\r\n    },\r\n    _buildNodes: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        that._palette = that._themeManager.createPalette(options.palette, {\r\n            useHighlight: true,\r\n            extensionMode: options.paletteExtensionMode\r\n        });\r\n        that._palette.reset();\r\n        that._bars = that._bars || [];\r\n        that._animationSettings && that._barsGroup.stopAnimation();\r\n        var barValues = that._values.filter(_isFinite);\r\n        var count = barValues.length;\r\n        if (that._bars.length > count) {\r\n            var ii = that._bars.length;\r\n            for (var i = count; i < ii; ++i) {\r\n                that._bars[i].dispose()\r\n            }\r\n            that._bars.splice(count, ii - count)\r\n        } else {\r\n            if (that._bars.length < count) {\r\n                for (var _i2 = that._bars.length; _i2 < count; ++_i2) {\r\n                    that._bars.push(new BarWrapper(_i2, that._context))\r\n                }\r\n            }\r\n        }\r\n        that._bars.forEach(function(bar, index) {\r\n            bar.update({\r\n                color: that._palette.getNextColor(count),\r\n                value: barValues[index]\r\n            })\r\n        })\r\n    },\r\n    _updateValues: function(values) {\r\n        var that = this;\r\n        var list = _isArray(values) && values || _isFinite(values) && [values] || [];\r\n        var i;\r\n        var ii = list.length;\r\n        var value;\r\n        that._values.length = ii;\r\n        for (i = 0; i < ii; ++i) {\r\n            value = list[i];\r\n            that._values[i] = value = _Number(_isFinite(value) ? value : that._values[i])\r\n        }\r\n        if (!that._resizing) {\r\n            if (!_compareArrays(that._values, that.option(OPTION_VALUES))) {\r\n                that.option(OPTION_VALUES, that._values.slice())\r\n            }\r\n        }\r\n        this._change([\"NODES\"])\r\n    },\r\n    values: function(arg) {\r\n        if (void 0 !== arg) {\r\n            this._updateValues(arg);\r\n            return this\r\n        } else {\r\n            return this._values.slice(0)\r\n        }\r\n    },\r\n    _optionChangesMap: {\r\n        backgroundColor: \"MOSTLY_TOTAL\",\r\n        relativeInnerRadius: \"MOSTLY_TOTAL\",\r\n        barSpacing: \"MOSTLY_TOTAL\",\r\n        label: \"MOSTLY_TOTAL\",\r\n        resolveLabelOverlapping: \"MOSTLY_TOTAL\",\r\n        palette: \"MOSTLY_TOTAL\",\r\n        paletteExtensionMode: \"MOSTLY_TOTAL\",\r\n        values: \"VALUES\"\r\n    },\r\n    _change_VALUES: function() {\r\n        this._updateValues(this.option(OPTION_VALUES))\r\n    },\r\n    _factory: objectUtils.clone(dxBaseGauge.prototype._factory),\r\n    _optionChangesOrder: [\"VALUES\", \"NODES\"],\r\n    _initialChanges: [\"VALUES\"],\r\n    _change_NODES: function() {\r\n        this._buildNodes()\r\n    },\r\n    _change_MOSTLY_TOTAL: function() {\r\n        this._change([\"NODES\"]);\r\n        this.callBase()\r\n    },\r\n    _proxyData: [],\r\n    _getLegendData: function() {\r\n        var that = this;\r\n        var formatOptions = {};\r\n        var options = that._options;\r\n        var labelFormatOptions = (options.label || {}).format;\r\n        var legendFormatOptions = (options.legend || {}).itemTextFormat;\r\n        if (legendFormatOptions) {\r\n            formatOptions.format = legendFormatOptions\r\n        } else {\r\n            formatOptions.format = labelFormatOptions || that._defaultFormatOptions\r\n        }\r\n        return (this._bars || []).map(function(b) {\r\n            return {\r\n                id: b.index,\r\n                item: {\r\n                    value: b.getValue(),\r\n                    color: b.getColor(),\r\n                    index: b.index\r\n                },\r\n                text: _formatValue(b.getValue(), formatOptions),\r\n                visible: true,\r\n                states: {\r\n                    normal: {\r\n                        fill: b.getColor()\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n});\r\nvar BarWrapper = function(index, context) {\r\n    var that = this;\r\n    that._context = context;\r\n    that._tracker = context.renderer.arc().attr({\r\n        \"stroke-linejoin\": \"round\"\r\n    });\r\n    that.index = index\r\n};\r\n_extend(BarWrapper.prototype, {\r\n    dispose: function() {\r\n        var that = this;\r\n        that._background.dispose();\r\n        that._bar.dispose();\r\n        if (that._context.textEnabled) {\r\n            that._line.dispose();\r\n            that._text.dispose()\r\n        }\r\n        that._context.tracker.detach(that._tracker);\r\n        that._context = that._settings = that._background = that._bar = that._line = that._text = that._tracker = null;\r\n        return that\r\n    },\r\n    arrange: function(options) {\r\n        var that = this;\r\n        var context = that._context;\r\n        this._visible = true;\r\n        context.tracker.attach(that._tracker, that, {\r\n            index: that.index\r\n        });\r\n        that._background = context.renderer.arc().attr({\r\n            \"stroke-linejoin\": \"round\",\r\n            fill: context.backgroundColor\r\n        }).append(context.group);\r\n        that._settings = that._settings || {\r\n            x: context.x,\r\n            y: context.y,\r\n            startAngle: context.baseAngle,\r\n            endAngle: context.baseAngle\r\n        };\r\n        that._bar = context.renderer.arc().attr(_extend({\r\n            \"stroke-linejoin\": \"round\"\r\n        }, that._settings)).append(context.group);\r\n        if (context.textEnabled) {\r\n            that._line = context.renderer.path([], \"line\").attr({\r\n                \"stroke-width\": context.lineWidth\r\n            }).append(context.group);\r\n            that._text = context.renderer.text().css(context.fontStyles).attr(context.textOptions).append(context.group)\r\n        }\r\n        that._angle = isFinite(that._angle) ? that._angle : context.baseAngle;\r\n        that._settings.outerRadius = options.radius;\r\n        that._settings.innerRadius = options.radius - context.barSize;\r\n        that._settings.x = context.x;\r\n        that._settings.y = context.y;\r\n        that._background.attr(_extend({}, that._settings, {\r\n            startAngle: context.endAngle,\r\n            endAngle: context.startAngle,\r\n            fill: that._context.backgroundColor\r\n        }));\r\n        that._bar.attr({\r\n            x: context.x,\r\n            y: context.y,\r\n            outerRadius: that._settings.outerRadius,\r\n            innerRadius: that._settings.innerRadius,\r\n            fill: that._color\r\n        });\r\n        that._tracker.attr(that._settings);\r\n        if (context.textEnabled) {\r\n            that._line.attr({\r\n                points: [context.x, context.y - that._settings.innerRadius, context.x, context.y - context.textRadius - context.textIndent],\r\n                stroke: context.lineColor || that._color\r\n            }).sharp();\r\n            that._text.css({\r\n                fill: context.textColor || that._color\r\n            })\r\n        }\r\n        return that\r\n    },\r\n    getTooltipParameters: function() {\r\n        var that = this;\r\n        var cosSin = _getCosAndSin((that._angle + that._context.baseAngle) / 2);\r\n        return {\r\n            x: _round(that._context.x + (that._settings.outerRadius + that._settings.innerRadius) / 2 * cosSin.cos),\r\n            y: _round(that._context.y - (that._settings.outerRadius + that._settings.innerRadius) / 2 * cosSin.sin),\r\n            offset: 0,\r\n            color: that._color,\r\n            value: that._value\r\n        }\r\n    },\r\n    setAngle: function(angle) {\r\n        var that = this;\r\n        var context = that._context;\r\n        var settings = that._settings;\r\n        var cosSin;\r\n        that._angle = angle;\r\n        setAngles(settings, context.baseAngle, angle);\r\n        that._bar.attr(settings);\r\n        that._tracker.attr(settings);\r\n        if (context.textEnabled) {\r\n            cosSin = _getCosAndSin(angle);\r\n            var indent = context.textIndent;\r\n            var radius = context.textRadius + indent;\r\n            var x = context.x + radius * cosSin.cos;\r\n            var y = context.y - radius * cosSin.sin;\r\n            var halfWidth = .5 * context.textWidth;\r\n            var textHeight = context.textHeight;\r\n            var textY = context.textY;\r\n            if (_abs(x - context.x) > indent) {\r\n                x += x < context.x ? -halfWidth : halfWidth\r\n            }\r\n            if (_abs(y - context.y) <= indent) {\r\n                y -= textY + .5 * textHeight\r\n            } else {\r\n                y -= y < context.y ? textY + textHeight : textY\r\n            }\r\n            var text = _formatValue(that._value, context.formatOptions, {\r\n                index: that.index\r\n            });\r\n            var visibility = \"\" === text ? \"hidden\" : null;\r\n            that._text.attr({\r\n                text: text,\r\n                x: x,\r\n                y: y,\r\n                visibility: visibility\r\n            });\r\n            that._line.attr({\r\n                visibility: visibility\r\n            });\r\n            that._line.rotate(_convertAngleToRendererSpace(angle), context.x, context.y)\r\n        }\r\n        return that\r\n    },\r\n    hideLabel: function() {\r\n        this._text.attr({\r\n            visibility: \"hidden\"\r\n        });\r\n        this._line.attr({\r\n            visibility: \"hidden\"\r\n        })\r\n    },\r\n    checkIntersect: function(anotherBar) {\r\n        var coords = this.calculateLabelCoords();\r\n        var anotherCoords = anotherBar.calculateLabelCoords();\r\n        if (!coords || !anotherCoords) {\r\n            return false\r\n        }\r\n        var width = Math.max(0, Math.min(coords.bottomRight.x, anotherCoords.bottomRight.x) - Math.max(coords.topLeft.x, anotherCoords.topLeft.x));\r\n        var height = Math.max(0, Math.min(coords.bottomRight.y, anotherCoords.bottomRight.y) - Math.max(coords.topLeft.y, anotherCoords.topLeft.y));\r\n        return width * height !== 0\r\n    },\r\n    calculateLabelCoords: function() {\r\n        if (!this._text) {\r\n            return\r\n        }\r\n        var box = this._text.getBBox();\r\n        return {\r\n            topLeft: {\r\n                x: box.x,\r\n                y: box.y\r\n            },\r\n            bottomRight: {\r\n                x: box.x + box.width,\r\n                y: box.y + box.height\r\n            }\r\n        }\r\n    },\r\n    _processValue: function(value) {\r\n        return this._context.translator.translate(this._context.translator.adjust(value))\r\n    },\r\n    applyValue: function() {\r\n        if (!this._visible) {\r\n            return this\r\n        }\r\n        return this.setAngle(this._processValue(this.getValue()))\r\n    },\r\n    update: function(_ref) {\r\n        var color = _ref.color,\r\n            value = _ref.value;\r\n        this._color = color;\r\n        this._value = value\r\n    },\r\n    hide: function() {\r\n        this._visible = false\r\n    },\r\n    getColor: function() {\r\n        return this._color\r\n    },\r\n    getValue: function() {\r\n        return this._value\r\n    },\r\n    beginAnimation: function() {\r\n        if (!this._visible) {\r\n            return this\r\n        }\r\n        var that = this;\r\n        var angle = this._processValue(this.getValue());\r\n        if (!compareFloats(that._angle, angle)) {\r\n            that._start = that._angle;\r\n            that._delta = angle - that._angle;\r\n            that._tracker.attr({\r\n                visibility: \"hidden\"\r\n            });\r\n            if (that._context.textEnabled) {\r\n                that._line.attr({\r\n                    visibility: \"hidden\"\r\n                });\r\n                that._text.attr({\r\n                    visibility: \"hidden\"\r\n                })\r\n            }\r\n        } else {\r\n            that.animate = _noop;\r\n            that.setAngle(that._angle)\r\n        }\r\n    },\r\n    animate: function(pos) {\r\n        if (!this._visible) {\r\n            return this\r\n        }\r\n        var that = this;\r\n        that._angle = that._start + that._delta * pos;\r\n        setAngles(that._settings, that._context.baseAngle, that._angle);\r\n        that._bar.attr(that._settings)\r\n    },\r\n    endAnimation: function() {\r\n        var that = this;\r\n        if (void 0 !== that._delta) {\r\n            if (compareFloats(that._angle, that._start + that._delta)) {\r\n                that._tracker.attr({\r\n                    visibility: null\r\n                });\r\n                that.setAngle(that._angle)\r\n            }\r\n        } else {\r\n            delete that.animate\r\n        }\r\n        delete that._start;\r\n        delete that._delta\r\n    }\r\n});\r\n\r\nfunction setAngles(target, angle1, angle2) {\r\n    target.startAngle = angle1 < angle2 ? angle1 : angle2;\r\n    target.endAngle = angle1 < angle2 ? angle2 : angle1\r\n}\r\n\r\nfunction compareFloats(value1, value2) {\r\n    return _abs(value1 - value2) < 1e-4\r\n}\r\nregisterComponent(\"dxBarGauge\", dxBarGauge);\r\nexports.dxBarGauge = dxBarGauge;\r\ndxBarGauge.addPlugin(require(\"../components/legend\").plugin);\r\n"]},"metadata":{},"sourceType":"script"}