{"ast":null,"code":"/**\r\n * DevExtreme (ui/html_editor/modules/toolbar.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _quill_importer = require(\"../quill_importer\");\n\nvar _renderer = require(\"../../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _toolbar = require(\"../../toolbar\");\n\nvar _toolbar2 = _interopRequireDefault(_toolbar);\n\nrequire(\"../../select_box\");\n\nrequire(\"../../color_box/color_view\");\n\nvar _widget_collector = require(\"./widget_collector\");\n\nvar _widget_collector2 = _interopRequireDefault(_widget_collector);\n\nvar _iterator = require(\"../../../core/utils/iterator\");\n\nvar _type = require(\"../../../core/utils/type\");\n\nvar _extend = require(\"../../../core/utils/extend\");\n\nvar _message = require(\"../../../localization/message\");\n\nvar _inflector = require(\"../../../core/utils/inflector\");\n\nvar _events_engine = require(\"../../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../../events/utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar BaseModule = (0, _quill_importer.getQuill)().import(\"core/module\");\nvar TOOLBAR_WRAPPER_CLASS = \"dx-htmleditor-toolbar-wrapper\";\nvar TOOLBAR_CLASS = \"dx-htmleditor-toolbar\";\nvar TOOLBAR_FORMAT_WIDGET_CLASS = \"dx-htmleditor-toolbar-format\";\nvar TOOLBAR_SEPARATOR_CLASS = \"dx-htmleditor-toolbar-separator\";\nvar TOOLBAR_MENU_SEPARATOR_CLASS = \"dx-htmleditor-toolbar-menu-separator\";\nvar ACTIVE_FORMAT_CLASS = \"dx-format-active\";\nvar BOX_ITEM_CONTENT_CLASS = \"dx-box-item-content\";\nvar ICON_CLASS = \"dx-icon\";\nvar SELECTION_CHANGE_EVENT = \"selection-change\";\nvar DIALOG_COLOR_CAPTION = \"dxHtmlEditor-dialogColorCaption\";\nvar DIALOG_BACKGROUND_CAPTION = \"dxHtmlEditor-dialogBackgroundCaption\";\nvar DIALOG_LINK_CAPTION = \"dxHtmlEditor-dialogLinkCaption\";\nvar DIALOG_LINK_FIELD_URL = \"dxHtmlEditor-dialogLinkUrlField\";\nvar DIALOG_LINK_FIELD_TEXT = \"dxHtmlEditor-dialogLinkTextField\";\nvar DIALOG_LINK_FIELD_TARGET = \"dxHtmlEditor-dialogLinkTargetField\";\nvar DIALOG_LINK_FIELD_TARGET_CLASS = \"dx-formdialog-field-target\";\nvar DIALOG_IMAGE_CAPTION = \"dxHtmlEditor-dialogImageCaption\";\nvar DIALOG_IMAGE_FIELD_URL = \"dxHtmlEditor-dialogImageUrlField\";\nvar DIALOG_IMAGE_FIELD_ALT = \"dxHtmlEditor-dialogImageAltField\";\nvar DIALOG_IMAGE_FIELD_WIDTH = \"dxHtmlEditor-dialogImageWidthField\";\nvar DIALOG_IMAGE_FIELD_HEIGHT = \"dxHtmlEditor-dialogImageHeightField\";\nvar USER_ACTION = \"user\";\nvar SILENT_ACTION = \"silent\";\nvar HEADING_TEXT = (0, _message.format)(\"dxHtmlEditor-heading\");\nvar NORMAL_TEXT = (0, _message.format)(\"dxHtmlEditor-normalText\");\n\nvar ToolbarModule = function (_BaseModule) {\n  _inherits(ToolbarModule, _BaseModule);\n\n  function ToolbarModule(quill, options) {\n    var _this;\n\n    _classCallCheck(this, ToolbarModule);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ToolbarModule).call(this, quill, options));\n    _this._editorInstance = options.editorInstance;\n    _this._toolbarWidgets = new _widget_collector2.default();\n    _this._formatHandlers = _this._getFormatHandlers();\n\n    if ((0, _type.isDefined)(options.items)) {\n      _this._addCallbacks();\n\n      _this._renderToolbar();\n\n      _this.quill.on(\"editor-change\", function (eventName) {\n        var isSelectionChanged = eventName === SELECTION_CHANGE_EVENT;\n\n        _this._updateToolbar(isSelectionChanged);\n      });\n    }\n\n    return _this;\n  }\n\n  _createClass(ToolbarModule, [{\n    key: \"_addCallbacks\",\n    value: function value() {\n      this._editorInstance.addCleanCallback(this.clean.bind(this));\n\n      this._editorInstance.addContentInitializedCallback(this.updateHistoryWidgets.bind(this));\n    }\n  }, {\n    key: \"_updateToolbar\",\n    value: function value(isSelectionChanged) {\n      this.updateFormatWidgets(isSelectionChanged);\n      this.updateHistoryWidgets();\n    }\n  }, {\n    key: \"_getDefaultClickHandler\",\n    value: function value(formatName) {\n      var _this2 = this;\n\n      return function (e) {\n        var formats = _this2.quill.getFormat();\n\n        var value = formats[formatName];\n        var newValue = !((0, _type.isBoolean)(value) ? value : (0, _type.isDefined)(value));\n\n        _this2.quill.format(formatName, newValue, USER_ACTION);\n\n        _this2._updateFormatWidget(formatName, newValue, formats);\n      };\n    }\n  }, {\n    key: \"_updateFormatWidget\",\n    value: function value(formatName, isApplied, formats) {\n      var widget = this._toolbarWidgets.getByName(formatName);\n\n      if (!widget) {\n        return;\n      }\n\n      if (isApplied) {\n        this._markActiveFormatWidget(formatName, widget, formats);\n      } else {\n        this._resetFormatWidget(formatName, widget);\n\n        if (Object.prototype.hasOwnProperty.call(formatName)) {\n          delete formats[formatName];\n        }\n      }\n\n      this._toggleClearFormatting(isApplied || !(0, _type.isEmptyObject)(formats));\n    }\n  }, {\n    key: \"_getFormatHandlers\",\n    value: function value() {\n      var _this3 = this;\n\n      return {\n        clear: function clear(e) {\n          var range = _this3.quill.getSelection();\n\n          if (range) {\n            _this3.quill.removeFormat(range);\n\n            _this3.updateFormatWidgets();\n          }\n        },\n        link: this._prepareLinkHandler(),\n        image: this._prepareImageHandler(),\n        color: this._prepareColorClickHandler(\"color\"),\n        background: this._prepareColorClickHandler(\"background\"),\n        orderedList: this._prepareShortcutHandler(\"list\", \"ordered\"),\n        bulletList: this._prepareShortcutHandler(\"list\", \"bullet\"),\n        alignLeft: this._prepareShortcutHandler(\"align\", \"left\"),\n        alignCenter: this._prepareShortcutHandler(\"align\", \"center\"),\n        alignRight: this._prepareShortcutHandler(\"align\", \"right\"),\n        alignJustify: this._prepareShortcutHandler(\"align\", \"justify\"),\n        codeBlock: this._getDefaultClickHandler(\"code-block\"),\n        undo: function undo() {\n          _this3.quill.history.undo();\n        },\n        redo: function redo() {\n          _this3.quill.history.redo();\n        },\n        increaseIndent: function increaseIndent() {\n          _this3.quill.format(\"indent\", \"+1\", USER_ACTION);\n        },\n        decreaseIndent: function decreaseIndent() {\n          _this3.quill.format(\"indent\", \"-1\", USER_ACTION);\n        },\n        superscript: this._prepareShortcutHandler(\"script\", \"super\"),\n        subscript: this._prepareShortcutHandler(\"script\", \"sub\")\n      };\n    }\n  }, {\n    key: \"_prepareShortcutHandler\",\n    value: function value(formatName, shortcutValue) {\n      var _this4 = this;\n\n      return function () {\n        var formats = _this4.quill.getFormat();\n\n        var value = formats[formatName] === shortcutValue ? false : shortcutValue;\n\n        _this4.quill.format(formatName, value, USER_ACTION);\n\n        _this4.updateFormatWidgets(true);\n      };\n    }\n  }, {\n    key: \"_prepareLinkHandler\",\n    value: function value() {\n      var _this5 = this;\n\n      return function () {\n        _this5.quill.focus();\n\n        var selection = _this5.quill.getSelection();\n\n        var hasEmbedContent = _this5._hasEmbedContent(selection);\n\n        var formats = selection ? _this5.quill.getFormat() : {};\n        var formData = {\n          href: formats.link || \"\",\n          text: selection && !hasEmbedContent ? _this5.quill.getText(selection) : \"\",\n          target: Object.prototype.hasOwnProperty.call(formats, \"target\") ? !!formats.target : true\n        };\n\n        _this5._editorInstance.formDialogOption(\"title\", (0, _message.format)(DIALOG_LINK_CAPTION));\n\n        var promise = _this5._editorInstance.showFormDialog({\n          formData: formData,\n          items: _this5._getLinkFormItems(selection)\n        });\n\n        promise.done(function (formData) {\n          if (selection && !hasEmbedContent) {\n            var text = formData.text || formData.href;\n            var index = selection.index,\n                length = selection.length;\n            formData.text = void 0;\n            length && _this5.quill.deleteText(index, length, SILENT_ACTION);\n\n            _this5.quill.insertText(index, text, \"link\", formData, USER_ACTION);\n\n            _this5.quill.setSelection(index + text.length, 0, USER_ACTION);\n          } else {\n            formData.text = !selection && !formData.text ? formData.href : formData.text;\n\n            _this5.quill.format(\"link\", formData, USER_ACTION);\n          }\n        });\n        promise.fail(function () {\n          _this5.quill.focus();\n        });\n      };\n    }\n  }, {\n    key: \"_hasEmbedContent\",\n    value: function value(selection) {\n      return !!selection && this.quill.getText(selection).trim().length < selection.length;\n    }\n  }, {\n    key: \"_getLinkFormItems\",\n    value: function value(selection) {\n      return [{\n        dataField: \"href\",\n        label: {\n          text: (0, _message.format)(DIALOG_LINK_FIELD_URL)\n        }\n      }, {\n        dataField: \"text\",\n        label: {\n          text: (0, _message.format)(DIALOG_LINK_FIELD_TEXT)\n        },\n        visible: !this._hasEmbedContent(selection)\n      }, {\n        dataField: \"target\",\n        editorType: \"dxCheckBox\",\n        editorOptions: {\n          text: (0, _message.format)(DIALOG_LINK_FIELD_TARGET)\n        },\n        cssClass: DIALOG_LINK_FIELD_TARGET_CLASS,\n        label: {\n          visible: false\n        }\n      }];\n    }\n  }, {\n    key: \"_prepareImageHandler\",\n    value: function value() {\n      var _this6 = this;\n\n      return function () {\n        var formData = _this6.quill.getFormat();\n\n        var isUpdateDialog = Object.prototype.hasOwnProperty.call(formData, \"imageSrc\");\n        var defaultIndex = _this6._defaultPasteIndex;\n\n        if (isUpdateDialog) {\n          var _this6$quill$getForma = _this6.quill.getFormat(defaultIndex - 1, 1),\n              imageSrc = _this6$quill$getForma.imageSrc;\n\n          formData.src = formData.imageSrc;\n          delete formData.imageSrc;\n\n          if (!imageSrc || 0 === defaultIndex) {\n            _this6.quill.setSelection(defaultIndex + 1, 0, SILENT_ACTION);\n          }\n        }\n\n        var formatIndex = _this6._embedFormatIndex;\n\n        _this6._editorInstance.formDialogOption(\"title\", (0, _message.format)(DIALOG_IMAGE_CAPTION));\n\n        var promise = _this6._editorInstance.showFormDialog({\n          formData: formData,\n          items: _this6._imageFormItems\n        });\n\n        promise.done(function (formData) {\n          var index = defaultIndex;\n\n          if (isUpdateDialog) {\n            index = formatIndex;\n\n            _this6.quill.deleteText(index, 1, SILENT_ACTION);\n          }\n\n          _this6.quill.insertEmbed(index, \"extendedImage\", formData, USER_ACTION);\n\n          _this6.quill.setSelection(index + 1, 0, USER_ACTION);\n        }).always(function () {\n          _this6.quill.focus();\n        });\n      };\n    }\n  }, {\n    key: \"_renderToolbar\",\n    value: function value() {\n      var _this7 = this;\n\n      var container = this.options.container || this._getContainer();\n\n      this._$toolbar = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_CLASS).appendTo(container);\n      this._$toolbarContainer = (0, _renderer2.default)(container).addClass(TOOLBAR_WRAPPER_CLASS);\n\n      _events_engine2.default.on(this._$toolbarContainer, (0, _utils.addNamespace)(\"mousedown\", this._editorInstance.NAME), function (e) {\n        e.preventDefault();\n      });\n\n      this.toolbarInstance = this._editorInstance._createComponent(this._$toolbar, _toolbar2.default, this.toolbarConfig);\n\n      this._editorInstance.on(\"optionChanged\", function (_ref) {\n        var name = _ref.name;\n\n        if (\"readOnly\" === name || \"disabled\" === name) {\n          _this7.toolbarInstance.option(\"disabled\", _this7.isInteractionDisabled);\n        }\n      });\n    }\n  }, {\n    key: \"clean\",\n    value: function value() {\n      this._toolbarWidgets.clear();\n\n      if (this._$toolbarContainer) {\n        this._$toolbarContainer.empty().removeClass(TOOLBAR_WRAPPER_CLASS);\n      }\n    }\n  }, {\n    key: \"repaint\",\n    value: function value() {\n      this.toolbarInstance && this.toolbarInstance.repaint();\n    }\n  }, {\n    key: \"_getContainer\",\n    value: function value() {\n      var $container = (0, _renderer2.default)(\"<div>\");\n\n      this._editorInstance.$element().prepend($container);\n\n      return $container;\n    }\n  }, {\n    key: \"_prepareToolbarItems\",\n    value: function value() {\n      var _this8 = this;\n\n      var resultItems = [];\n      (0, _iterator.each)(this.options.items, function (index, item) {\n        var newItem;\n\n        if ((0, _type.isObject)(item)) {\n          newItem = _this8._handleObjectItem(item);\n        } else {\n          if ((0, _type.isString)(item)) {\n            var buttonItemConfig = _this8._prepareButtonItemConfig(item);\n\n            newItem = _this8._getToolbarItem(buttonItemConfig);\n          }\n        }\n\n        if (newItem) {\n          resultItems.push(newItem);\n        }\n      });\n      return resultItems;\n    }\n  }, {\n    key: \"_handleObjectItem\",\n    value: function value(item) {\n      if (item.formatName && item.formatValues && this._isAcceptableItem(\"dxSelectBox\")) {\n        var selectItemConfig = this._prepareSelectItemConfig(item);\n\n        return this._getToolbarItem(selectItemConfig);\n      } else {\n        if (item.formatName && this._isAcceptableItem(\"dxButton\")) {\n          var defaultButtonItemConfig = this._prepareButtonItemConfig(item.formatName);\n\n          var buttonItemConfig = (0, _extend.extend)(true, defaultButtonItemConfig, item);\n          return this._getToolbarItem(buttonItemConfig);\n        } else {\n          return this._getToolbarItem(item);\n        }\n      }\n    }\n  }, {\n    key: \"_isAcceptableItem\",\n    value: function value(item, acceptableWidgetName) {\n      return !item.widget || item.widget === acceptableWidgetName;\n    }\n  }, {\n    key: \"_prepareButtonItemConfig\",\n    value: function value(formatName) {\n      var iconName = \"clear\" === formatName ? \"clearformat\" : formatName;\n      var buttonText = (0, _inflector.titleize)(formatName);\n      return {\n        widget: \"dxButton\",\n        formatName: formatName,\n        options: {\n          hint: buttonText,\n          text: buttonText,\n          icon: iconName.toLowerCase(),\n          onClick: this._formatHandlers[formatName] || this._getDefaultClickHandler(formatName),\n          stylingMode: \"text\"\n        },\n        showText: \"inMenu\"\n      };\n    }\n  }, {\n    key: \"_prepareSelectItemConfig\",\n    value: function value(item) {\n      var _this9 = this;\n\n      return (0, _extend.extend)(true, {\n        widget: \"dxSelectBox\",\n        formatName: item.formatName,\n        options: {\n          stylingMode: \"filled\",\n          dataSource: item.formatValues,\n          placeholder: (0, _inflector.titleize)(item.formatName),\n          onValueChanged: function onValueChanged(e) {\n            if (!_this9._isReset) {\n              _this9.quill.format(item.formatName, e.value, USER_ACTION);\n\n              _this9._setValueSilent(e.component, e.value);\n            }\n          }\n        }\n      }, item);\n    }\n  }, {\n    key: \"_prepareColorClickHandler\",\n    value: function value(formatName) {\n      var _this10 = this;\n\n      return function () {\n        var formData = _this10.quill.getFormat();\n\n        var caption = \"color\" === formatName ? DIALOG_COLOR_CAPTION : DIALOG_BACKGROUND_CAPTION;\n\n        _this10._editorInstance.formDialogOption(\"title\", (0, _message.format)(caption));\n\n        var promise = _this10._editorInstance.showFormDialog({\n          formData: formData,\n          items: [{\n            dataField: formatName,\n            editorType: \"dxColorView\",\n            editorOptions: {\n              onContentReady: function onContentReady(e) {\n                (0, _renderer2.default)(e.element).closest(\".\".concat(BOX_ITEM_CONTENT_CLASS)).css(\"flexBasis\", \"auto\");\n              },\n              focusStateEnabled: false\n            },\n            label: {\n              visible: false\n            }\n          }]\n        });\n\n        promise.done(function (formData) {\n          _this10.quill.format(formatName, formData[formatName], USER_ACTION);\n        });\n        promise.fail(function () {\n          _this10.quill.focus();\n        });\n      };\n    }\n  }, {\n    key: \"_getToolbarItem\",\n    value: function value(item) {\n      var _this11 = this;\n\n      var baseItem = {\n        options: {\n          onInitialized: function onInitialized(e) {\n            if (item.formatName) {\n              e.component.$element().addClass(TOOLBAR_FORMAT_WIDGET_CLASS);\n              e.component.$element().toggleClass(\"dx-\".concat(item.formatName.toLowerCase(), \"-format\"), !!item.formatName);\n\n              _this11._toolbarWidgets.add(item.formatName, e.component);\n            }\n          }\n        }\n      };\n      return (0, _extend.extend)(true, {\n        location: \"before\",\n        locateInMenu: \"auto\"\n      }, this._getDefaultConfig(item.formatName), item, baseItem);\n    }\n  }, {\n    key: \"_getDefaultItemsConfig\",\n    value: function value() {\n      return {\n        header: {\n          options: {\n            displayExpr: function displayExpr(item) {\n              var isHeaderValue = (0, _type.isDefined)(item) && false !== item;\n              return isHeaderValue ? \"\".concat(HEADING_TEXT, \" \").concat(item) : NORMAL_TEXT;\n            }\n          }\n        },\n        clear: {\n          options: {\n            disabled: true\n          }\n        },\n        undo: {\n          options: {\n            disabled: true\n          }\n        },\n        redo: {\n          options: {\n            disabled: true\n          }\n        },\n        separator: {\n          template: function template(data, index, element) {\n            (0, _renderer2.default)(element).addClass(TOOLBAR_SEPARATOR_CLASS);\n          },\n          menuItemTemplate: function menuItemTemplate(data, index, element) {\n            (0, _renderer2.default)(element).addClass(TOOLBAR_MENU_SEPARATOR_CLASS);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"_getDefaultConfig\",\n    value: function value(formatName) {\n      return this._getDefaultItemsConfig()[formatName];\n    }\n  }, {\n    key: \"updateHistoryWidgets\",\n    value: function value() {\n      var historyModule = this.quill.history;\n\n      if (!historyModule) {\n        return;\n      }\n\n      var undoOps = historyModule.stack.undo;\n      var redoOps = historyModule.stack.redo;\n\n      this._updateHistoryWidget(this._toolbarWidgets.getByName(\"undo\"), undoOps);\n\n      this._updateHistoryWidget(this._toolbarWidgets.getByName(\"redo\"), redoOps);\n    }\n  }, {\n    key: \"_updateHistoryWidget\",\n    value: function value(widget, operations) {\n      if (!widget) {\n        return;\n      }\n\n      widget.option(\"disabled\", !operations.length);\n    }\n  }, {\n    key: \"updateFormatWidgets\",\n    value: function value(isResetRequired) {\n      var selection = this.quill.getSelection();\n\n      if (!selection) {\n        return;\n      }\n\n      var formats = this.quill.getFormat(selection);\n      var hasFormats = !(0, _type.isEmptyObject)(formats);\n\n      if (!hasFormats || isResetRequired) {\n        this._resetFormatWidgets();\n      }\n\n      for (var formatName in formats) {\n        var widgetName = this._getFormatWidgetName(formatName, formats);\n\n        var formatWidget = this._toolbarWidgets.getByName(widgetName) || this._toolbarWidgets.getByName(formatName);\n\n        if (!formatWidget) {\n          continue;\n        }\n\n        this._markActiveFormatWidget(formatName, formatWidget, formats);\n      }\n\n      this._toggleClearFormatting(hasFormats);\n    }\n  }, {\n    key: \"_markActiveFormatWidget\",\n    value: function value(name, widget, formats) {\n      if (this._isColorFormat(name)) {\n        this._updateColorWidget(name, formats[name]);\n      }\n\n      if (\"value\" in widget.option()) {\n        this._setValueSilent(widget, formats[name]);\n      } else {\n        widget.$element().addClass(ACTIVE_FORMAT_CLASS);\n      }\n    }\n  }, {\n    key: \"_toggleClearFormatting\",\n    value: function value(hasFormats) {\n      var clearWidget = this._toolbarWidgets.getByName(\"clear\");\n\n      if (clearWidget) {\n        clearWidget.option(\"disabled\", !hasFormats);\n      }\n    }\n  }, {\n    key: \"_isColorFormat\",\n    value: function value(formatName) {\n      return \"color\" === formatName || \"background\" === formatName;\n    }\n  }, {\n    key: \"_updateColorWidget\",\n    value: function value(formatName, color) {\n      var formatWidget = this._toolbarWidgets.getByName(formatName);\n\n      if (!formatWidget) {\n        return;\n      }\n\n      formatWidget.$element().find(\".\".concat(ICON_CLASS)).css(\"borderBottomColor\", color || \"transparent\");\n    }\n  }, {\n    key: \"_getFormatWidgetName\",\n    value: function value(formatName, formats) {\n      var widgetName;\n\n      switch (formatName) {\n        case \"align\":\n          widgetName = formatName + (0, _inflector.titleize)(formats[formatName]);\n          break;\n\n        case \"list\":\n          widgetName = formats[formatName] + (0, _inflector.titleize)(formatName);\n          break;\n\n        case \"code-block\":\n          widgetName = \"codeBlock\";\n          break;\n\n        case \"script\":\n          widgetName = formats[formatName] + formatName;\n          break;\n\n        case \"imageSrc\":\n          widgetName = \"image\";\n          break;\n\n        default:\n          widgetName = formatName;\n      }\n\n      return widgetName;\n    }\n  }, {\n    key: \"_setValueSilent\",\n    value: function value(widget, _value) {\n      this._isReset = true;\n      widget.option(\"value\", _value);\n      this._isReset = false;\n    }\n  }, {\n    key: \"_resetFormatWidgets\",\n    value: function value() {\n      var _this12 = this;\n\n      this._toolbarWidgets.each(function (name, widget) {\n        _this12._resetFormatWidget(name, widget);\n      });\n    }\n  }, {\n    key: \"_resetFormatWidget\",\n    value: function value(name, widget) {\n      widget.$element().removeClass(ACTIVE_FORMAT_CLASS);\n\n      if (this._isColorFormat(name)) {\n        this._updateColorWidget(name);\n      }\n\n      if (\"clear\" === name) {\n        widget.option(\"disabled\", true);\n      }\n\n      if (\"dxSelectBox\" === widget.NAME) {\n        this._setValueSilent(widget, null);\n      }\n    }\n  }, {\n    key: \"addClickHandler\",\n    value: function value(formatName, handler) {\n      this._formatHandlers[formatName] = handler;\n\n      var formatWidget = this._toolbarWidgets.getByName(formatName);\n\n      if (formatWidget && \"dxButton\" === formatWidget.NAME) {\n        formatWidget.option(\"onClick\", handler);\n      }\n    }\n  }, {\n    key: \"_embedFormatIndex\",\n    get: function get() {\n      var selection = this.quill.getSelection();\n\n      if (selection) {\n        if (selection.length) {\n          return selection.index;\n        } else {\n          return selection.index - 1;\n        }\n      } else {\n        return this.quill.getLength();\n      }\n    }\n  }, {\n    key: \"_defaultPasteIndex\",\n    get: function get() {\n      var selection = this.quill.getSelection();\n      return selection && selection.index || this.quill.getLength();\n    }\n  }, {\n    key: \"_imageFormItems\",\n    get: function get() {\n      return [{\n        dataField: \"src\",\n        label: {\n          text: (0, _message.format)(DIALOG_IMAGE_FIELD_URL)\n        }\n      }, {\n        dataField: \"width\",\n        label: {\n          text: (0, _message.format)(DIALOG_IMAGE_FIELD_WIDTH)\n        }\n      }, {\n        dataField: \"height\",\n        label: {\n          text: (0, _message.format)(DIALOG_IMAGE_FIELD_HEIGHT)\n        }\n      }, {\n        dataField: \"alt\",\n        label: {\n          text: (0, _message.format)(DIALOG_IMAGE_FIELD_ALT)\n        }\n      }];\n    }\n  }, {\n    key: \"toolbarConfig\",\n    get: function get() {\n      return {\n        dataSource: this._prepareToolbarItems(),\n        disabled: this.isInteractionDisabled,\n        menuContainer: this._$toolbarContainer\n      };\n    }\n  }, {\n    key: \"isInteractionDisabled\",\n    get: function get() {\n      return this._editorInstance.option(\"readOnly\") || this._editorInstance.option(\"disabled\");\n    }\n  }]);\n\n  return ToolbarModule;\n}(BaseModule);\n\nexports.default = ToolbarModule;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/html_editor/modules/toolbar.js"],"names":["Object","defineProperty","exports","value","_quill_importer","require","_renderer","_renderer2","_interopRequireDefault","_toolbar","_toolbar2","_widget_collector","_widget_collector2","_iterator","_type","_extend","_message","_inflector","_events_engine","_events_engine2","_utils","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","BaseModule","getQuill","import","TOOLBAR_WRAPPER_CLASS","TOOLBAR_CLASS","TOOLBAR_FORMAT_WIDGET_CLASS","TOOLBAR_SEPARATOR_CLASS","TOOLBAR_MENU_SEPARATOR_CLASS","ACTIVE_FORMAT_CLASS","BOX_ITEM_CONTENT_CLASS","ICON_CLASS","SELECTION_CHANGE_EVENT","DIALOG_COLOR_CAPTION","DIALOG_BACKGROUND_CAPTION","DIALOG_LINK_CAPTION","DIALOG_LINK_FIELD_URL","DIALOG_LINK_FIELD_TEXT","DIALOG_LINK_FIELD_TARGET","DIALOG_LINK_FIELD_TARGET_CLASS","DIALOG_IMAGE_CAPTION","DIALOG_IMAGE_FIELD_URL","DIALOG_IMAGE_FIELD_ALT","DIALOG_IMAGE_FIELD_WIDTH","DIALOG_IMAGE_FIELD_HEIGHT","USER_ACTION","SILENT_ACTION","HEADING_TEXT","format","NORMAL_TEXT","ToolbarModule","_BaseModule","quill","options","_this","_editorInstance","editorInstance","_toolbarWidgets","default","_formatHandlers","_getFormatHandlers","isDefined","items","_addCallbacks","_renderToolbar","on","eventName","isSelectionChanged","_updateToolbar","addCleanCallback","clean","bind","addContentInitializedCallback","updateHistoryWidgets","updateFormatWidgets","formatName","_this2","e","formats","getFormat","newValue","isBoolean","_updateFormatWidget","isApplied","widget","getByName","_markActiveFormatWidget","_resetFormatWidget","hasOwnProperty","_toggleClearFormatting","isEmptyObject","_this3","clear","range","getSelection","removeFormat","link","_prepareLinkHandler","image","_prepareImageHandler","color","_prepareColorClickHandler","background","orderedList","_prepareShortcutHandler","bulletList","alignLeft","alignCenter","alignRight","alignJustify","codeBlock","_getDefaultClickHandler","undo","history","redo","increaseIndent","decreaseIndent","superscript","subscript","shortcutValue","_this4","_this5","focus","selection","hasEmbedContent","_hasEmbedContent","formData","href","text","getText","formDialogOption","promise","showFormDialog","_getLinkFormItems","done","index","deleteText","insertText","setSelection","fail","trim","dataField","label","visible","editorType","editorOptions","cssClass","_this6","isUpdateDialog","defaultIndex","_defaultPasteIndex","_this6$quill$getForma","imageSrc","src","formatIndex","_embedFormatIndex","_imageFormItems","insertEmbed","always","_this7","container","_getContainer","_$toolbar","addClass","appendTo","_$toolbarContainer","addNamespace","NAME","preventDefault","toolbarInstance","_createComponent","toolbarConfig","_ref","name","option","isInteractionDisabled","empty","removeClass","repaint","$container","$element","prepend","_this8","resultItems","each","item","newItem","isObject","_handleObjectItem","isString","buttonItemConfig","_prepareButtonItemConfig","_getToolbarItem","push","formatValues","_isAcceptableItem","selectItemConfig","_prepareSelectItemConfig","defaultButtonItemConfig","extend","acceptableWidgetName","iconName","buttonText","titleize","hint","icon","toLowerCase","onClick","stylingMode","showText","_this9","dataSource","placeholder","onValueChanged","_isReset","_setValueSilent","component","_this10","caption","onContentReady","element","closest","concat","css","focusStateEnabled","_this11","baseItem","onInitialized","toggleClass","add","location","locateInMenu","_getDefaultConfig","header","displayExpr","isHeaderValue","disabled","separator","template","data","menuItemTemplate","_getDefaultItemsConfig","historyModule","undoOps","stack","redoOps","_updateHistoryWidget","operations","isResetRequired","hasFormats","_resetFormatWidgets","widgetName","_getFormatWidgetName","formatWidget","_isColorFormat","_updateColorWidget","clearWidget","find","_this12","handler","get","getLength","_prepareToolbarItems","menuContainer"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/html_editor/modules/toolbar.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nvar _quill_importer = require(\"../quill_importer\");\r\nvar _renderer = require(\"../../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _toolbar = require(\"../../toolbar\");\r\nvar _toolbar2 = _interopRequireDefault(_toolbar);\r\nrequire(\"../../select_box\");\r\nrequire(\"../../color_box/color_view\");\r\nvar _widget_collector = require(\"./widget_collector\");\r\nvar _widget_collector2 = _interopRequireDefault(_widget_collector);\r\nvar _iterator = require(\"../../../core/utils/iterator\");\r\nvar _type = require(\"../../../core/utils/type\");\r\nvar _extend = require(\"../../../core/utils/extend\");\r\nvar _message = require(\"../../../localization/message\");\r\nvar _inflector = require(\"../../../core/utils/inflector\");\r\nvar _events_engine = require(\"../../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _utils = require(\"../../../events/utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar BaseModule = (0, _quill_importer.getQuill)().import(\"core/module\");\r\nvar TOOLBAR_WRAPPER_CLASS = \"dx-htmleditor-toolbar-wrapper\";\r\nvar TOOLBAR_CLASS = \"dx-htmleditor-toolbar\";\r\nvar TOOLBAR_FORMAT_WIDGET_CLASS = \"dx-htmleditor-toolbar-format\";\r\nvar TOOLBAR_SEPARATOR_CLASS = \"dx-htmleditor-toolbar-separator\";\r\nvar TOOLBAR_MENU_SEPARATOR_CLASS = \"dx-htmleditor-toolbar-menu-separator\";\r\nvar ACTIVE_FORMAT_CLASS = \"dx-format-active\";\r\nvar BOX_ITEM_CONTENT_CLASS = \"dx-box-item-content\";\r\nvar ICON_CLASS = \"dx-icon\";\r\nvar SELECTION_CHANGE_EVENT = \"selection-change\";\r\nvar DIALOG_COLOR_CAPTION = \"dxHtmlEditor-dialogColorCaption\";\r\nvar DIALOG_BACKGROUND_CAPTION = \"dxHtmlEditor-dialogBackgroundCaption\";\r\nvar DIALOG_LINK_CAPTION = \"dxHtmlEditor-dialogLinkCaption\";\r\nvar DIALOG_LINK_FIELD_URL = \"dxHtmlEditor-dialogLinkUrlField\";\r\nvar DIALOG_LINK_FIELD_TEXT = \"dxHtmlEditor-dialogLinkTextField\";\r\nvar DIALOG_LINK_FIELD_TARGET = \"dxHtmlEditor-dialogLinkTargetField\";\r\nvar DIALOG_LINK_FIELD_TARGET_CLASS = \"dx-formdialog-field-target\";\r\nvar DIALOG_IMAGE_CAPTION = \"dxHtmlEditor-dialogImageCaption\";\r\nvar DIALOG_IMAGE_FIELD_URL = \"dxHtmlEditor-dialogImageUrlField\";\r\nvar DIALOG_IMAGE_FIELD_ALT = \"dxHtmlEditor-dialogImageAltField\";\r\nvar DIALOG_IMAGE_FIELD_WIDTH = \"dxHtmlEditor-dialogImageWidthField\";\r\nvar DIALOG_IMAGE_FIELD_HEIGHT = \"dxHtmlEditor-dialogImageHeightField\";\r\nvar USER_ACTION = \"user\";\r\nvar SILENT_ACTION = \"silent\";\r\nvar HEADING_TEXT = (0, _message.format)(\"dxHtmlEditor-heading\");\r\nvar NORMAL_TEXT = (0, _message.format)(\"dxHtmlEditor-normalText\");\r\nvar ToolbarModule = function(_BaseModule) {\r\n    _inherits(ToolbarModule, _BaseModule);\r\n\r\n    function ToolbarModule(quill, options) {\r\n        var _this;\r\n        _classCallCheck(this, ToolbarModule);\r\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(ToolbarModule).call(this, quill, options));\r\n        _this._editorInstance = options.editorInstance;\r\n        _this._toolbarWidgets = new _widget_collector2.default;\r\n        _this._formatHandlers = _this._getFormatHandlers();\r\n        if ((0, _type.isDefined)(options.items)) {\r\n            _this._addCallbacks();\r\n            _this._renderToolbar();\r\n            _this.quill.on(\"editor-change\", function(eventName) {\r\n                var isSelectionChanged = eventName === SELECTION_CHANGE_EVENT;\r\n                _this._updateToolbar(isSelectionChanged)\r\n            })\r\n        }\r\n        return _this\r\n    }\r\n    _createClass(ToolbarModule, [{\r\n        key: \"_addCallbacks\",\r\n        value: function() {\r\n            this._editorInstance.addCleanCallback(this.clean.bind(this));\r\n            this._editorInstance.addContentInitializedCallback(this.updateHistoryWidgets.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_updateToolbar\",\r\n        value: function(isSelectionChanged) {\r\n            this.updateFormatWidgets(isSelectionChanged);\r\n            this.updateHistoryWidgets()\r\n        }\r\n    }, {\r\n        key: \"_getDefaultClickHandler\",\r\n        value: function(formatName) {\r\n            var _this2 = this;\r\n            return function(e) {\r\n                var formats = _this2.quill.getFormat();\r\n                var value = formats[formatName];\r\n                var newValue = !((0, _type.isBoolean)(value) ? value : (0, _type.isDefined)(value));\r\n                _this2.quill.format(formatName, newValue, USER_ACTION);\r\n                _this2._updateFormatWidget(formatName, newValue, formats)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateFormatWidget\",\r\n        value: function(formatName, isApplied, formats) {\r\n            var widget = this._toolbarWidgets.getByName(formatName);\r\n            if (!widget) {\r\n                return\r\n            }\r\n            if (isApplied) {\r\n                this._markActiveFormatWidget(formatName, widget, formats)\r\n            } else {\r\n                this._resetFormatWidget(formatName, widget);\r\n                if (Object.prototype.hasOwnProperty.call(formatName)) {\r\n                    delete formats[formatName]\r\n                }\r\n            }\r\n            this._toggleClearFormatting(isApplied || !(0, _type.isEmptyObject)(formats))\r\n        }\r\n    }, {\r\n        key: \"_getFormatHandlers\",\r\n        value: function() {\r\n            var _this3 = this;\r\n            return {\r\n                clear: function(e) {\r\n                    var range = _this3.quill.getSelection();\r\n                    if (range) {\r\n                        _this3.quill.removeFormat(range);\r\n                        _this3.updateFormatWidgets()\r\n                    }\r\n                },\r\n                link: this._prepareLinkHandler(),\r\n                image: this._prepareImageHandler(),\r\n                color: this._prepareColorClickHandler(\"color\"),\r\n                background: this._prepareColorClickHandler(\"background\"),\r\n                orderedList: this._prepareShortcutHandler(\"list\", \"ordered\"),\r\n                bulletList: this._prepareShortcutHandler(\"list\", \"bullet\"),\r\n                alignLeft: this._prepareShortcutHandler(\"align\", \"left\"),\r\n                alignCenter: this._prepareShortcutHandler(\"align\", \"center\"),\r\n                alignRight: this._prepareShortcutHandler(\"align\", \"right\"),\r\n                alignJustify: this._prepareShortcutHandler(\"align\", \"justify\"),\r\n                codeBlock: this._getDefaultClickHandler(\"code-block\"),\r\n                undo: function() {\r\n                    _this3.quill.history.undo()\r\n                },\r\n                redo: function() {\r\n                    _this3.quill.history.redo()\r\n                },\r\n                increaseIndent: function() {\r\n                    _this3.quill.format(\"indent\", \"+1\", USER_ACTION)\r\n                },\r\n                decreaseIndent: function() {\r\n                    _this3.quill.format(\"indent\", \"-1\", USER_ACTION)\r\n                },\r\n                superscript: this._prepareShortcutHandler(\"script\", \"super\"),\r\n                subscript: this._prepareShortcutHandler(\"script\", \"sub\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_prepareShortcutHandler\",\r\n        value: function(formatName, shortcutValue) {\r\n            var _this4 = this;\r\n            return function() {\r\n                var formats = _this4.quill.getFormat();\r\n                var value = formats[formatName] === shortcutValue ? false : shortcutValue;\r\n                _this4.quill.format(formatName, value, USER_ACTION);\r\n                _this4.updateFormatWidgets(true)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_prepareLinkHandler\",\r\n        value: function() {\r\n            var _this5 = this;\r\n            return function() {\r\n                _this5.quill.focus();\r\n                var selection = _this5.quill.getSelection();\r\n                var hasEmbedContent = _this5._hasEmbedContent(selection);\r\n                var formats = selection ? _this5.quill.getFormat() : {};\r\n                var formData = {\r\n                    href: formats.link || \"\",\r\n                    text: selection && !hasEmbedContent ? _this5.quill.getText(selection) : \"\",\r\n                    target: Object.prototype.hasOwnProperty.call(formats, \"target\") ? !!formats.target : true\r\n                };\r\n                _this5._editorInstance.formDialogOption(\"title\", (0, _message.format)(DIALOG_LINK_CAPTION));\r\n                var promise = _this5._editorInstance.showFormDialog({\r\n                    formData: formData,\r\n                    items: _this5._getLinkFormItems(selection)\r\n                });\r\n                promise.done(function(formData) {\r\n                    if (selection && !hasEmbedContent) {\r\n                        var text = formData.text || formData.href;\r\n                        var index = selection.index,\r\n                            length = selection.length;\r\n                        formData.text = void 0;\r\n                        length && _this5.quill.deleteText(index, length, SILENT_ACTION);\r\n                        _this5.quill.insertText(index, text, \"link\", formData, USER_ACTION);\r\n                        _this5.quill.setSelection(index + text.length, 0, USER_ACTION)\r\n                    } else {\r\n                        formData.text = !selection && !formData.text ? formData.href : formData.text;\r\n                        _this5.quill.format(\"link\", formData, USER_ACTION)\r\n                    }\r\n                });\r\n                promise.fail(function() {\r\n                    _this5.quill.focus()\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hasEmbedContent\",\r\n        value: function(selection) {\r\n            return !!selection && this.quill.getText(selection).trim().length < selection.length\r\n        }\r\n    }, {\r\n        key: \"_getLinkFormItems\",\r\n        value: function(selection) {\r\n            return [{\r\n                dataField: \"href\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_LINK_FIELD_URL)\r\n                }\r\n            }, {\r\n                dataField: \"text\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_LINK_FIELD_TEXT)\r\n                },\r\n                visible: !this._hasEmbedContent(selection)\r\n            }, {\r\n                dataField: \"target\",\r\n                editorType: \"dxCheckBox\",\r\n                editorOptions: {\r\n                    text: (0, _message.format)(DIALOG_LINK_FIELD_TARGET)\r\n                },\r\n                cssClass: DIALOG_LINK_FIELD_TARGET_CLASS,\r\n                label: {\r\n                    visible: false\r\n                }\r\n            }]\r\n        }\r\n    }, {\r\n        key: \"_prepareImageHandler\",\r\n        value: function() {\r\n            var _this6 = this;\r\n            return function() {\r\n                var formData = _this6.quill.getFormat();\r\n                var isUpdateDialog = Object.prototype.hasOwnProperty.call(formData, \"imageSrc\");\r\n                var defaultIndex = _this6._defaultPasteIndex;\r\n                if (isUpdateDialog) {\r\n                    var _this6$quill$getForma = _this6.quill.getFormat(defaultIndex - 1, 1),\r\n                        imageSrc = _this6$quill$getForma.imageSrc;\r\n                    formData.src = formData.imageSrc;\r\n                    delete formData.imageSrc;\r\n                    if (!imageSrc || 0 === defaultIndex) {\r\n                        _this6.quill.setSelection(defaultIndex + 1, 0, SILENT_ACTION)\r\n                    }\r\n                }\r\n                var formatIndex = _this6._embedFormatIndex;\r\n                _this6._editorInstance.formDialogOption(\"title\", (0, _message.format)(DIALOG_IMAGE_CAPTION));\r\n                var promise = _this6._editorInstance.showFormDialog({\r\n                    formData: formData,\r\n                    items: _this6._imageFormItems\r\n                });\r\n                promise.done(function(formData) {\r\n                    var index = defaultIndex;\r\n                    if (isUpdateDialog) {\r\n                        index = formatIndex;\r\n                        _this6.quill.deleteText(index, 1, SILENT_ACTION)\r\n                    }\r\n                    _this6.quill.insertEmbed(index, \"extendedImage\", formData, USER_ACTION);\r\n                    _this6.quill.setSelection(index + 1, 0, USER_ACTION)\r\n                }).always(function() {\r\n                    _this6.quill.focus()\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderToolbar\",\r\n        value: function() {\r\n            var _this7 = this;\r\n            var container = this.options.container || this._getContainer();\r\n            this._$toolbar = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_CLASS).appendTo(container);\r\n            this._$toolbarContainer = (0, _renderer2.default)(container).addClass(TOOLBAR_WRAPPER_CLASS);\r\n            _events_engine2.default.on(this._$toolbarContainer, (0, _utils.addNamespace)(\"mousedown\", this._editorInstance.NAME), function(e) {\r\n                e.preventDefault()\r\n            });\r\n            this.toolbarInstance = this._editorInstance._createComponent(this._$toolbar, _toolbar2.default, this.toolbarConfig);\r\n            this._editorInstance.on(\"optionChanged\", function(_ref) {\r\n                var name = _ref.name;\r\n                if (\"readOnly\" === name || \"disabled\" === name) {\r\n                    _this7.toolbarInstance.option(\"disabled\", _this7.isInteractionDisabled)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"clean\",\r\n        value: function() {\r\n            this._toolbarWidgets.clear();\r\n            if (this._$toolbarContainer) {\r\n                this._$toolbarContainer.empty().removeClass(TOOLBAR_WRAPPER_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"repaint\",\r\n        value: function() {\r\n            this.toolbarInstance && this.toolbarInstance.repaint()\r\n        }\r\n    }, {\r\n        key: \"_getContainer\",\r\n        value: function() {\r\n            var $container = (0, _renderer2.default)(\"<div>\");\r\n            this._editorInstance.$element().prepend($container);\r\n            return $container\r\n        }\r\n    }, {\r\n        key: \"_prepareToolbarItems\",\r\n        value: function() {\r\n            var _this8 = this;\r\n            var resultItems = [];\r\n            (0, _iterator.each)(this.options.items, function(index, item) {\r\n                var newItem;\r\n                if ((0, _type.isObject)(item)) {\r\n                    newItem = _this8._handleObjectItem(item)\r\n                } else {\r\n                    if ((0, _type.isString)(item)) {\r\n                        var buttonItemConfig = _this8._prepareButtonItemConfig(item);\r\n                        newItem = _this8._getToolbarItem(buttonItemConfig)\r\n                    }\r\n                }\r\n                if (newItem) {\r\n                    resultItems.push(newItem)\r\n                }\r\n            });\r\n            return resultItems\r\n        }\r\n    }, {\r\n        key: \"_handleObjectItem\",\r\n        value: function(item) {\r\n            if (item.formatName && item.formatValues && this._isAcceptableItem(\"dxSelectBox\")) {\r\n                var selectItemConfig = this._prepareSelectItemConfig(item);\r\n                return this._getToolbarItem(selectItemConfig)\r\n            } else {\r\n                if (item.formatName && this._isAcceptableItem(\"dxButton\")) {\r\n                    var defaultButtonItemConfig = this._prepareButtonItemConfig(item.formatName);\r\n                    var buttonItemConfig = (0, _extend.extend)(true, defaultButtonItemConfig, item);\r\n                    return this._getToolbarItem(buttonItemConfig)\r\n                } else {\r\n                    return this._getToolbarItem(item)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isAcceptableItem\",\r\n        value: function(item, acceptableWidgetName) {\r\n            return !item.widget || item.widget === acceptableWidgetName\r\n        }\r\n    }, {\r\n        key: \"_prepareButtonItemConfig\",\r\n        value: function(formatName) {\r\n            var iconName = \"clear\" === formatName ? \"clearformat\" : formatName;\r\n            var buttonText = (0, _inflector.titleize)(formatName);\r\n            return {\r\n                widget: \"dxButton\",\r\n                formatName: formatName,\r\n                options: {\r\n                    hint: buttonText,\r\n                    text: buttonText,\r\n                    icon: iconName.toLowerCase(),\r\n                    onClick: this._formatHandlers[formatName] || this._getDefaultClickHandler(formatName),\r\n                    stylingMode: \"text\"\r\n                },\r\n                showText: \"inMenu\"\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_prepareSelectItemConfig\",\r\n        value: function(item) {\r\n            var _this9 = this;\r\n            return (0, _extend.extend)(true, {\r\n                widget: \"dxSelectBox\",\r\n                formatName: item.formatName,\r\n                options: {\r\n                    stylingMode: \"filled\",\r\n                    dataSource: item.formatValues,\r\n                    placeholder: (0, _inflector.titleize)(item.formatName),\r\n                    onValueChanged: function(e) {\r\n                        if (!_this9._isReset) {\r\n                            _this9.quill.format(item.formatName, e.value, USER_ACTION);\r\n                            _this9._setValueSilent(e.component, e.value)\r\n                        }\r\n                    }\r\n                }\r\n            }, item)\r\n        }\r\n    }, {\r\n        key: \"_prepareColorClickHandler\",\r\n        value: function(formatName) {\r\n            var _this10 = this;\r\n            return function() {\r\n                var formData = _this10.quill.getFormat();\r\n                var caption = \"color\" === formatName ? DIALOG_COLOR_CAPTION : DIALOG_BACKGROUND_CAPTION;\r\n                _this10._editorInstance.formDialogOption(\"title\", (0, _message.format)(caption));\r\n                var promise = _this10._editorInstance.showFormDialog({\r\n                    formData: formData,\r\n                    items: [{\r\n                        dataField: formatName,\r\n                        editorType: \"dxColorView\",\r\n                        editorOptions: {\r\n                            onContentReady: function(e) {\r\n                                (0, _renderer2.default)(e.element).closest(\".\".concat(BOX_ITEM_CONTENT_CLASS)).css(\"flexBasis\", \"auto\")\r\n                            },\r\n                            focusStateEnabled: false\r\n                        },\r\n                        label: {\r\n                            visible: false\r\n                        }\r\n                    }]\r\n                });\r\n                promise.done(function(formData) {\r\n                    _this10.quill.format(formatName, formData[formatName], USER_ACTION)\r\n                });\r\n                promise.fail(function() {\r\n                    _this10.quill.focus()\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getToolbarItem\",\r\n        value: function(item) {\r\n            var _this11 = this;\r\n            var baseItem = {\r\n                options: {\r\n                    onInitialized: function(e) {\r\n                        if (item.formatName) {\r\n                            e.component.$element().addClass(TOOLBAR_FORMAT_WIDGET_CLASS);\r\n                            e.component.$element().toggleClass(\"dx-\".concat(item.formatName.toLowerCase(), \"-format\"), !!item.formatName);\r\n                            _this11._toolbarWidgets.add(item.formatName, e.component)\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            return (0, _extend.extend)(true, {\r\n                location: \"before\",\r\n                locateInMenu: \"auto\"\r\n            }, this._getDefaultConfig(item.formatName), item, baseItem)\r\n        }\r\n    }, {\r\n        key: \"_getDefaultItemsConfig\",\r\n        value: function() {\r\n            return {\r\n                header: {\r\n                    options: {\r\n                        displayExpr: function(item) {\r\n                            var isHeaderValue = (0, _type.isDefined)(item) && false !== item;\r\n                            return isHeaderValue ? \"\".concat(HEADING_TEXT, \" \").concat(item) : NORMAL_TEXT\r\n                        }\r\n                    }\r\n                },\r\n                clear: {\r\n                    options: {\r\n                        disabled: true\r\n                    }\r\n                },\r\n                undo: {\r\n                    options: {\r\n                        disabled: true\r\n                    }\r\n                },\r\n                redo: {\r\n                    options: {\r\n                        disabled: true\r\n                    }\r\n                },\r\n                separator: {\r\n                    template: function(data, index, element) {\r\n                        (0, _renderer2.default)(element).addClass(TOOLBAR_SEPARATOR_CLASS)\r\n                    },\r\n                    menuItemTemplate: function(data, index, element) {\r\n                        (0, _renderer2.default)(element).addClass(TOOLBAR_MENU_SEPARATOR_CLASS)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDefaultConfig\",\r\n        value: function(formatName) {\r\n            return this._getDefaultItemsConfig()[formatName]\r\n        }\r\n    }, {\r\n        key: \"updateHistoryWidgets\",\r\n        value: function() {\r\n            var historyModule = this.quill.history;\r\n            if (!historyModule) {\r\n                return\r\n            }\r\n            var undoOps = historyModule.stack.undo;\r\n            var redoOps = historyModule.stack.redo;\r\n            this._updateHistoryWidget(this._toolbarWidgets.getByName(\"undo\"), undoOps);\r\n            this._updateHistoryWidget(this._toolbarWidgets.getByName(\"redo\"), redoOps)\r\n        }\r\n    }, {\r\n        key: \"_updateHistoryWidget\",\r\n        value: function(widget, operations) {\r\n            if (!widget) {\r\n                return\r\n            }\r\n            widget.option(\"disabled\", !operations.length)\r\n        }\r\n    }, {\r\n        key: \"updateFormatWidgets\",\r\n        value: function(isResetRequired) {\r\n            var selection = this.quill.getSelection();\r\n            if (!selection) {\r\n                return\r\n            }\r\n            var formats = this.quill.getFormat(selection);\r\n            var hasFormats = !(0, _type.isEmptyObject)(formats);\r\n            if (!hasFormats || isResetRequired) {\r\n                this._resetFormatWidgets()\r\n            }\r\n            for (var formatName in formats) {\r\n                var widgetName = this._getFormatWidgetName(formatName, formats);\r\n                var formatWidget = this._toolbarWidgets.getByName(widgetName) || this._toolbarWidgets.getByName(formatName);\r\n                if (!formatWidget) {\r\n                    continue\r\n                }\r\n                this._markActiveFormatWidget(formatName, formatWidget, formats)\r\n            }\r\n            this._toggleClearFormatting(hasFormats)\r\n        }\r\n    }, {\r\n        key: \"_markActiveFormatWidget\",\r\n        value: function(name, widget, formats) {\r\n            if (this._isColorFormat(name)) {\r\n                this._updateColorWidget(name, formats[name])\r\n            }\r\n            if (\"value\" in widget.option()) {\r\n                this._setValueSilent(widget, formats[name])\r\n            } else {\r\n                widget.$element().addClass(ACTIVE_FORMAT_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_toggleClearFormatting\",\r\n        value: function(hasFormats) {\r\n            var clearWidget = this._toolbarWidgets.getByName(\"clear\");\r\n            if (clearWidget) {\r\n                clearWidget.option(\"disabled\", !hasFormats)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isColorFormat\",\r\n        value: function(formatName) {\r\n            return \"color\" === formatName || \"background\" === formatName\r\n        }\r\n    }, {\r\n        key: \"_updateColorWidget\",\r\n        value: function(formatName, color) {\r\n            var formatWidget = this._toolbarWidgets.getByName(formatName);\r\n            if (!formatWidget) {\r\n                return\r\n            }\r\n            formatWidget.$element().find(\".\".concat(ICON_CLASS)).css(\"borderBottomColor\", color || \"transparent\")\r\n        }\r\n    }, {\r\n        key: \"_getFormatWidgetName\",\r\n        value: function(formatName, formats) {\r\n            var widgetName;\r\n            switch (formatName) {\r\n                case \"align\":\r\n                    widgetName = formatName + (0, _inflector.titleize)(formats[formatName]);\r\n                    break;\r\n                case \"list\":\r\n                    widgetName = formats[formatName] + (0, _inflector.titleize)(formatName);\r\n                    break;\r\n                case \"code-block\":\r\n                    widgetName = \"codeBlock\";\r\n                    break;\r\n                case \"script\":\r\n                    widgetName = formats[formatName] + formatName;\r\n                    break;\r\n                case \"imageSrc\":\r\n                    widgetName = \"image\";\r\n                    break;\r\n                default:\r\n                    widgetName = formatName\r\n            }\r\n            return widgetName\r\n        }\r\n    }, {\r\n        key: \"_setValueSilent\",\r\n        value: function(widget, value) {\r\n            this._isReset = true;\r\n            widget.option(\"value\", value);\r\n            this._isReset = false\r\n        }\r\n    }, {\r\n        key: \"_resetFormatWidgets\",\r\n        value: function() {\r\n            var _this12 = this;\r\n            this._toolbarWidgets.each(function(name, widget) {\r\n                _this12._resetFormatWidget(name, widget)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_resetFormatWidget\",\r\n        value: function(name, widget) {\r\n            widget.$element().removeClass(ACTIVE_FORMAT_CLASS);\r\n            if (this._isColorFormat(name)) {\r\n                this._updateColorWidget(name)\r\n            }\r\n            if (\"clear\" === name) {\r\n                widget.option(\"disabled\", true)\r\n            }\r\n            if (\"dxSelectBox\" === widget.NAME) {\r\n                this._setValueSilent(widget, null)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"addClickHandler\",\r\n        value: function(formatName, handler) {\r\n            this._formatHandlers[formatName] = handler;\r\n            var formatWidget = this._toolbarWidgets.getByName(formatName);\r\n            if (formatWidget && \"dxButton\" === formatWidget.NAME) {\r\n                formatWidget.option(\"onClick\", handler)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_embedFormatIndex\",\r\n        get: function() {\r\n            var selection = this.quill.getSelection();\r\n            if (selection) {\r\n                if (selection.length) {\r\n                    return selection.index\r\n                } else {\r\n                    return selection.index - 1\r\n                }\r\n            } else {\r\n                return this.quill.getLength()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_defaultPasteIndex\",\r\n        get: function() {\r\n            var selection = this.quill.getSelection();\r\n            return selection && selection.index || this.quill.getLength()\r\n        }\r\n    }, {\r\n        key: \"_imageFormItems\",\r\n        get: function() {\r\n            return [{\r\n                dataField: \"src\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_IMAGE_FIELD_URL)\r\n                }\r\n            }, {\r\n                dataField: \"width\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_IMAGE_FIELD_WIDTH)\r\n                }\r\n            }, {\r\n                dataField: \"height\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_IMAGE_FIELD_HEIGHT)\r\n                }\r\n            }, {\r\n                dataField: \"alt\",\r\n                label: {\r\n                    text: (0, _message.format)(DIALOG_IMAGE_FIELD_ALT)\r\n                }\r\n            }]\r\n        }\r\n    }, {\r\n        key: \"toolbarConfig\",\r\n        get: function() {\r\n            return {\r\n                dataSource: this._prepareToolbarItems(),\r\n                disabled: this.isInteractionDisabled,\r\n                menuContainer: this._$toolbarContainer\r\n            }\r\n        }\r\n    }, {\r\n        key: \"isInteractionDisabled\",\r\n        get: function() {\r\n            return this._editorInstance.option(\"readOnly\") || this._editorInstance.option(\"disabled\")\r\n        }\r\n    }]);\r\n    return ToolbarModule\r\n}(BaseModule);\r\nexports.default = ToolbarModule;\r\n"]},"metadata":{},"sourceType":"script"}