{"ast":null,"code":"/**\r\n * DevExtreme (ui/gantt/ui.gantt.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _ui = require(\"../widget/ui.widget\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _data2 = _interopRequireDefault(_data);\n\nvar _uiGantt = require(\"./ui.gantt.view\");\n\nvar _uiGantt2 = require(\"./ui.gantt.contextmenu\");\n\nvar _uiGantt3 = _interopRequireDefault(_uiGantt2);\n\nvar _tree_list = require(\"../tree_list\");\n\nvar _tree_list2 = _interopRequireDefault(_tree_list);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _uiGanttData = require(\"./ui.gantt.data.option\");\n\nvar _uiGanttData2 = _interopRequireDefault(_uiGanttData);\n\nvar _splitter = require(\"../splitter\");\n\nvar _splitter2 = _interopRequireDefault(_splitter);\n\nvar _uiGantt4 = require(\"./ui.gantt.dialogs\");\n\nvar _load_panel = require(\"../load_panel\");\n\nvar _load_panel2 = _interopRequireDefault(_load_panel);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar GANTT_CLASS = \"dx-gantt\";\nvar GANTT_VIEW_CLASS = \"dx-gantt-view\";\nvar GANTT_COLLAPSABLE_ROW = \"dx-gantt-collapsable-row\";\nvar GANTT_TREE_LIST_WRAPPER = \"dx-gantt-treelist-wrapper\";\nvar GANTT_TASKS = \"tasks\";\nvar GANTT_DEPENDENCIES = \"dependencies\";\nvar GANTT_RESOURCES = \"resources\";\nvar GANTT_RESOURCE_ASSIGNMENTS = \"resourceAssignments\";\nvar GANTT_DEFAULT_ROW_HEIGHT = 34;\n\nvar Gantt = function (_Widget) {\n  _inherits(Gantt, _Widget);\n\n  function Gantt() {\n    _classCallCheck(this, Gantt);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Gantt).apply(this, arguments));\n  }\n\n  _createClass(Gantt, [{\n    key: \"_initMarkup\",\n    value: function value() {\n      _get(_getPrototypeOf(Gantt.prototype), \"_initMarkup\", this).call(this);\n\n      this.$element().addClass(GANTT_CLASS);\n      this._$treeListWrapper = (0, _renderer2.default)(\"<div>\").addClass(GANTT_TREE_LIST_WRAPPER).appendTo(this.$element());\n      this._$treeList = (0, _renderer2.default)(\"<div>\").appendTo(this._$treeListWrapper);\n      this._$splitter = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n      this._$ganttView = (0, _renderer2.default)(\"<div>\").addClass(GANTT_VIEW_CLASS).appendTo(this.$element());\n      this._$dialog = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n      this._$loadPanel = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n      this._$contextMenu = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n\n      this._refreshDataSource(GANTT_TASKS);\n\n      this._refreshDataSource(GANTT_DEPENDENCIES);\n\n      this._refreshDataSource(GANTT_RESOURCES);\n\n      this._refreshDataSource(GANTT_RESOURCE_ASSIGNMENTS);\n    }\n  }, {\n    key: \"_renderContent\",\n    value: function value() {\n      this._renderTreeList();\n\n      this._renderSplitter();\n\n      this._renderBars();\n    }\n  }, {\n    key: \"_renderTreeList\",\n    value: function value() {\n      var _this = this;\n\n      var _this$option = this.option(GANTT_TASKS),\n          keyExpr = _this$option.keyExpr,\n          parentIdExpr = _this$option.parentIdExpr;\n\n      this._treeList = this._createComponent(this._$treeList, _tree_list2.default, {\n        dataSource: this._tasksRaw,\n        keyExpr: keyExpr,\n        parentIdExpr: parentIdExpr,\n        columns: this.option(\"columns\"),\n        columnResizingMode: \"nextColumn\",\n        height: \"100%\",\n        width: this.option(\"taskListWidth\"),\n        selection: {\n          mode: this._getSelectionMode(this.option(\"allowSelection\"))\n        },\n        selectedRowKeys: this._getArrayFromOneElement(this.option(\"selectedRowKey\")),\n        sorting: {\n          mode: \"none\"\n        },\n        scrolling: {\n          showScrollbar: \"onHover\",\n          mode: \"virtual\"\n        },\n        allowColumnResizing: true,\n        autoExpandAll: true,\n        showRowLines: this.option(\"showRowLines\"),\n        onContentReady: function onContentReady(e) {\n          _this._onTreeListContentReady(e);\n        },\n        onSelectionChanged: function onSelectionChanged(e) {\n          _this._onTreeListSelectionChanged(e);\n        },\n        onRowCollapsed: function onRowCollapsed(e) {\n          return _this._ganttView.changeTaskExpanded(e.key, false);\n        },\n        onRowExpanded: function onRowExpanded(e) {\n          return _this._ganttView.changeTaskExpanded(e.key, true);\n        },\n        onRowPrepared: function onRowPrepared(e) {\n          _this._onTreeListRowPrepared(e);\n        },\n        onContextMenuPreparing: function onContextMenuPreparing(e) {\n          _this._onTreeListContextMenuPreparing(e);\n        },\n        onRowDblClick: function onRowDblClick() {\n          _this._onTreeListRowDblClick();\n        }\n      });\n    }\n  }, {\n    key: \"_renderSplitter\",\n    value: function value() {\n      this._splitter = this._createComponent(this._$splitter, _splitter2.default, {\n        container: this.$element(),\n        leftElement: this._$treeListWrapper,\n        rightElement: this._$ganttView,\n        onApplyPanelSize: this._onApplyPanelSize.bind(this)\n      });\n\n      this._setInnerElementsWidth();\n\n      this._splitter.option(\"initialLeftPanelWidth\", this.option(\"taskListWidth\"));\n    }\n  }, {\n    key: \"_renderBars\",\n    value: function value() {\n      this._contextMenuBar = new _uiGantt3.default(this._$contextMenu, this);\n      this._bars = [this._contextMenuBar];\n    }\n  }, {\n    key: \"_initGanttView\",\n    value: function value() {\n      if (this._ganttView) {\n        return;\n      }\n\n      this._ganttView = this._createComponent(this._$ganttView, _uiGantt.GanttView, {\n        width: \"100%\",\n        height: this._treeList._$element.get(0).offsetHeight,\n        rowHeight: this._getTreeListRowHeight(),\n        headerHeight: this._getTreeListHeaderHeight(),\n        tasks: this._tasks,\n        dependencies: this._dependencies,\n        resources: this._resources,\n        resourceAssignments: this._resourceAssignments,\n        allowSelection: this.option(\"allowSelection\"),\n        selectedRowKey: this.option(\"selectedRowKey\"),\n        showResources: this.option(\"showResources\"),\n        taskTitlePosition: this.option(\"taskTitlePosition\"),\n        showRowLines: this.option(\"showRowLines\"),\n        scaleType: this.option(\"scaleType\"),\n        editing: this.option(\"editing\"),\n        bars: this._bars,\n        onSelectionChanged: this._onGanttViewSelectionChanged.bind(this),\n        onScroll: this._onGanttViewScroll.bind(this),\n        onDialogShowing: this._showDialog.bind(this),\n        onPopupMenuShowing: this._showPopupMenu.bind(this),\n        modelChangesListener: this._createModelChangesListener()\n      });\n\n      this._fireContentReadyAction();\n    }\n  }, {\n    key: \"_onApplyPanelSize\",\n    value: function value(e) {\n      this._setInnerElementsWidth(e);\n    }\n  }, {\n    key: \"_onTreeListContentReady\",\n    value: function value(e) {\n      if (e.component.getDataSource()) {\n        this._initGanttView();\n\n        this._initScrollSync(e.component);\n      }\n    }\n  }, {\n    key: \"_onTreeListRowPrepared\",\n    value: function value(e) {\n      if (\"data\" === e.rowType && e.node.children.length > 0) {\n        (0, _renderer2.default)(e.rowElement).addClass(GANTT_COLLAPSABLE_ROW);\n      }\n    }\n  }, {\n    key: \"_onTreeListContextMenuPreparing\",\n    value: function value(e) {\n      if (e.row && \"data\" === e.row.rowType) {\n        this._setTreeListOption(\"selectedRowKeys\", [e.row.data.id]);\n\n        e.items = [];\n\n        this._showPopupMenu({\n          position: {\n            x: e.event.clientX,\n            y: e.event.clientY\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_onTreeListRowDblClick\",\n    value: function value() {\n      this._ganttView._ganttViewCore.commandManager.showTaskEditDialog.execute();\n    }\n  }, {\n    key: \"_onTreeListSelectionChanged\",\n    value: function value(e) {\n      var selectedRowKey = e.currentSelectedRowKeys[0];\n\n      this._setGanttViewOption(\"selectedRowKey\", selectedRowKey);\n\n      this.option(\"selectedRowKey\", selectedRowKey);\n\n      this._raiseSelectionChangedAction(selectedRowKey);\n    }\n  }, {\n    key: \"_onGanttViewSelectionChanged\",\n    value: function value(e) {\n      this._setTreeListOption(\"selectedRowKeys\", this._getArrayFromOneElement(e.id));\n    }\n  }, {\n    key: \"_onGanttViewScroll\",\n    value: function value(e) {\n      var treeListScrollable = this._treeList.getScrollable();\n\n      if (treeListScrollable) {\n        var diff = e.scrollTop - treeListScrollable.scrollTop();\n\n        if (0 !== diff) {\n          treeListScrollable.scrollBy({\n            left: 0,\n            top: diff\n          });\n        }\n      }\n    }\n  }, {\n    key: \"_onTreeListScroll\",\n    value: function value(treeListScrollView) {\n      var ganttViewTaskAreaContainer = this._ganttView.getTaskAreaContainer();\n\n      if (ganttViewTaskAreaContainer.scrollTop !== treeListScrollView.component.scrollTop()) {\n        ganttViewTaskAreaContainer.scrollTop = treeListScrollView.component.scrollTop();\n      }\n    }\n  }, {\n    key: \"_initScrollSync\",\n    value: function value(treeList) {\n      var _this2 = this;\n\n      var treeListScrollable = treeList.getScrollable();\n\n      if (treeListScrollable) {\n        treeListScrollable.off(\"scroll\");\n        treeListScrollable.on(\"scroll\", function (e) {\n          _this2._onTreeListScroll(e);\n        });\n      }\n    }\n  }, {\n    key: \"_getTreeListRowHeight\",\n    value: function value() {\n      var $row = this._treeList._$element.find(\".dx-data-row\");\n\n      var height = $row.length ? $row.last().get(0).getBoundingClientRect().height : GANTT_DEFAULT_ROW_HEIGHT;\n      return height ? height : GANTT_DEFAULT_ROW_HEIGHT;\n    }\n  }, {\n    key: \"_getTreeListHeaderHeight\",\n    value: function value() {\n      return this._treeList._$element.find(\".dx-treelist-headers\").get(0).getBoundingClientRect().height;\n    }\n  }, {\n    key: \"_setInnerElementsWidth\",\n    value: function value(widths) {\n      if (!(0, _window.hasWindow)()) {\n        return;\n      }\n\n      if (!widths) {\n        widths = this._getPanelsWidthByOption();\n      }\n\n      var leftPanelWidth = widths.leftPanelWidth;\n      var rightPanelWidth = widths.rightPanelWidth;\n\n      this._$treeListWrapper.width(leftPanelWidth);\n\n      var isPercentage = _type2.default.isString(leftPanelWidth) && \"%\" === leftPanelWidth.slice(-1);\n\n      this._$treeList.width(isPercentage ? \"100%\" : leftPanelWidth);\n\n      this._splitter.setSplitterPositionLeft(leftPanelWidth);\n\n      this._$ganttView.width(rightPanelWidth);\n\n      this._setGanttViewOption(\"width\", this._$ganttView.width());\n    }\n  }, {\n    key: \"_getPanelsWidthByOption\",\n    value: function value() {\n      return {\n        leftPanelWidth: this.option(\"taskListWidth\"),\n        rightPanelWidth: this._$element.width() - this.option(\"taskListWidth\")\n      };\n    }\n  }, {\n    key: \"_setGanttViewOption\",\n    value: function value(optionName, _value) {\n      this._ganttView && this._ganttView.option(optionName, _value);\n    }\n  }, {\n    key: \"_setTreeListOption\",\n    value: function value(optionName, _value2) {\n      this._treeList && this._treeList.option(optionName, _value2);\n    }\n  }, {\n    key: \"_refreshDataSource\",\n    value: function value(name) {\n      var _this3 = this;\n\n      var dataOption = this[\"_\".concat(name, \"Option\")];\n\n      if (dataOption) {\n        dataOption._disposeDataSource();\n\n        delete this[\"_\".concat(name, \"Option\")];\n        delete this[\"_\".concat(name)];\n      }\n\n      if (this.option(\"\".concat(name, \".dataSource\"))) {\n        dataOption = new _uiGanttData2.default(name, this._getLoadPanel(), function (name, data) {\n          _this3._dataSourceChanged(name, data);\n        });\n        dataOption.option(\"dataSource\", this._getSpecificDataSourceOption(name));\n\n        dataOption._refreshDataSource();\n\n        this[\"_\".concat(name, \"Option\")] = dataOption;\n      }\n    }\n  }, {\n    key: \"_getSpecificDataSourceOption\",\n    value: function value(name) {\n      var dataSource = this.option(\"\".concat(name, \".dataSource\"));\n\n      if (Array.isArray(dataSource)) {\n        return {\n          store: {\n            type: \"array\",\n            data: dataSource,\n            key: this.option(\"\".concat(name, \".keyExpr\"))\n          }\n        };\n      }\n\n      return dataSource;\n    }\n  }, {\n    key: \"_compileGettersByOption\",\n    value: function value(optionName) {\n      var getters = {};\n      var optionValue = this.option(optionName);\n\n      for (var field in optionValue) {\n        var exprMatches = field.match(/(\\w*)Expr/);\n\n        if (exprMatches) {\n          getters[exprMatches[1]] = _data2.default.compileGetter(optionValue[exprMatches[0]]);\n        }\n      }\n\n      return getters;\n    }\n  }, {\n    key: \"_compileSettersByOption\",\n    value: function value(optionName) {\n      var setters = {};\n      var optionValue = this.option(optionName);\n\n      for (var field in optionValue) {\n        var exprMatches = field.match(/(\\w*)Expr/);\n\n        if (exprMatches) {\n          setters[exprMatches[1]] = _data2.default.compileSetter(optionValue[exprMatches[0]]);\n        }\n      }\n\n      return setters;\n    }\n  }, {\n    key: \"_getStoreObject\",\n    value: function value(optionName, modelObject) {\n      var setters = this._compileSettersByOption(optionName);\n\n      return Object.keys(setters).reduce(function (previous, key) {\n        if (\"key\" !== key) {\n          setters[key](previous, modelObject[key]);\n        }\n\n        return previous;\n      }, {});\n    }\n  }, {\n    key: \"_prepareMapHandler\",\n    value: function value(getters) {\n      return function (data) {\n        return Object.keys(getters).reduce(function (previous, key) {\n          var resultKey = \"key\" === key ? \"id\" : key;\n          previous[resultKey] = getters[key](data);\n          return previous;\n        }, {});\n      };\n    }\n  }, {\n    key: \"_dataSourceChanged\",\n    value: function value(dataSourceName, data) {\n      var getters = this._compileGettersByOption(dataSourceName);\n\n      var mappedData = data.map(this._prepareMapHandler(getters));\n      this[\"_\".concat(dataSourceName)] = mappedData;\n\n      this._setGanttViewOption(dataSourceName, mappedData);\n\n      if (dataSourceName === GANTT_TASKS) {\n        this._tasksRaw = data;\n\n        this._setTreeListOption(\"dataSource\", data);\n      }\n    }\n  }, {\n    key: \"_createModelChangesListener\",\n    value: function value() {\n      var _this4 = this;\n\n      return {\n        NotifyTaskCreated: function NotifyTaskCreated(task, callback) {\n          _this4._onRecordInserted(GANTT_TASKS, task, callback);\n        },\n        NotifyTaskRemoved: function NotifyTaskRemoved(taskId) {\n          _this4._onRecordRemoved(GANTT_TASKS, taskId);\n        },\n        NotifyTaskTitleChanged: function NotifyTaskTitleChanged(taskId, newValue) {\n          _this4._onRecordUpdated(GANTT_TASKS, taskId, \"title\", newValue);\n        },\n        NotifyTaskDescriptionChanged: function NotifyTaskDescriptionChanged(taskId, newValue) {\n          _this4._onRecordUpdated(GANTT_TASKS, taskId, \"description\", newValue);\n        },\n        NotifyTaskStartChanged: function NotifyTaskStartChanged(taskId, newValue) {\n          _this4._onRecordUpdated(GANTT_TASKS, taskId, \"start\", newValue);\n        },\n        NotifyTaskEndChanged: function NotifyTaskEndChanged(taskId, newValue) {\n          _this4._onRecordUpdated(GANTT_TASKS, taskId, \"end\", newValue);\n        },\n        NotifyTaskProgressChanged: function NotifyTaskProgressChanged(taskId, newValue) {\n          _this4._onRecordUpdated(GANTT_TASKS, taskId, \"progress\", newValue);\n        },\n        NotifyDependencyInserted: function NotifyDependencyInserted(dependency, callback) {\n          _this4._onRecordInserted(GANTT_DEPENDENCIES, dependency, callback);\n        },\n        NotifyDependencyRemoved: function NotifyDependencyRemoved(dependencyId) {\n          _this4._onRecordRemoved(GANTT_DEPENDENCIES, dependencyId);\n        },\n        NotifyResourceCreated: function NotifyResourceCreated(resource, callback) {\n          _this4._onRecordInserted(GANTT_RESOURCES, resource, callback);\n        },\n        NotifyResourceRemoved: function NotifyResourceRemoved(resource) {\n          _this4._onRecordRemoved(GANTT_RESOURCES, resource);\n        },\n        NotifyResourceAssigned: function NotifyResourceAssigned(assignment, callback) {\n          _this4._onRecordInserted(GANTT_RESOURCE_ASSIGNMENTS, assignment, callback);\n        },\n        NotifyResourceUnassigned: function NotifyResourceUnassigned(assignmentId) {\n          _this4._onRecordRemoved(GANTT_RESOURCE_ASSIGNMENTS, assignmentId);\n        }\n      };\n    }\n  }, {\n    key: \"_onRecordInserted\",\n    value: function value(optionName, record, callback) {\n      var _this5 = this;\n\n      var dataOption = this[\"_\".concat(optionName, \"Option\")];\n\n      if (dataOption) {\n        var data = this._getStoreObject(optionName, record);\n\n        dataOption.insert(data, function (response) {\n          var keyGetter = _data2.default.compileGetter(_this5.option(\"\".concat(optionName, \".keyExpr\")));\n\n          var insertedId = keyGetter(response);\n          callback(insertedId);\n\n          if (optionName === GANTT_TASKS) {\n            _this5._updateTreeListDataSource();\n\n            var parentId = record.parentId;\n\n            if (void 0 !== parentId) {\n              var expandedRowKeys = _this5._treeList.option(\"expandedRowKeys\");\n\n              expandedRowKeys.push(parentId);\n\n              _this5._treeList.option(\"expandedRowKeys\", expandedRowKeys);\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_onRecordRemoved\",\n    value: function value(optionName, key) {\n      var _this6 = this;\n\n      var dataOption = this[\"_\".concat(optionName, \"Option\")];\n\n      if (dataOption) {\n        dataOption.remove(key, function () {\n          if (optionName === GANTT_TASKS) {\n            _this6._updateTreeListDataSource();\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_onRecordUpdated\",\n    value: function value(optionName, key, fieldName, _value3) {\n      var _this7 = this;\n\n      var dataOption = this[\"_\".concat(optionName, \"Option\")];\n\n      if (dataOption) {\n        var setter = _data2.default.compileSetter(this.option(\"\".concat(optionName, \".\").concat(fieldName, \"Expr\")));\n\n        var data = {};\n        setter(data, _value3);\n        dataOption.update(key, data, function () {\n          if (optionName === GANTT_TASKS) {\n            _this7._updateTreeListDataSource();\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_updateTreeListDataSource\",\n    value: function value() {\n      var storeArray = this._tasksOption._getStore()._array;\n\n      this._setTreeListOption(\"dataSource\", storeArray ? storeArray : this.option(\"tasks.dataSource\"));\n    }\n  }, {\n    key: \"_getLoadPanel\",\n    value: function value() {\n      if (!this._loadPanel) {\n        this._loadPanel = this._createComponent(this._$loadPanel, _load_panel2.default, {\n          position: {\n            of: this.$element()\n          }\n        });\n      }\n\n      return this._loadPanel;\n    }\n  }, {\n    key: \"_createSelectionChangedAction\",\n    value: function value() {\n      this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\");\n    }\n  }, {\n    key: \"_raiseSelectionChangedAction\",\n    value: function value(selectedRowKey) {\n      if (!this._selectionChangedAction) {\n        this._createSelectionChangedAction();\n      }\n\n      this._selectionChangedAction({\n        selectedRowKey: selectedRowKey\n      });\n    }\n  }, {\n    key: \"_getSelectionMode\",\n    value: function value(allowSelection) {\n      return allowSelection ? \"single\" : \"none\";\n    }\n  }, {\n    key: \"_getArrayFromOneElement\",\n    value: function value(element) {\n      return void 0 === element || null === element ? [] : [element];\n    }\n  }, {\n    key: \"_showDialog\",\n    value: function value(e) {\n      if (!this._dialogInstance) {\n        this._dialogInstance = new _uiGantt4.GanttDialog(this, this._$dialog);\n      }\n\n      this._dialogInstance.show(e.name, e.parameters, e.callback, this.option(\"editing\"));\n    }\n  }, {\n    key: \"_showPopupMenu\",\n    value: function value(e) {\n      this._ganttView.getBarManager().updateContextMenu();\n\n      this._contextMenuBar.show(e.position);\n    }\n  }, {\n    key: \"_executeCoreCommand\",\n    value: function value(id) {\n      this._ganttView.executeCoreCommand(id);\n    }\n  }, {\n    key: \"_clean\",\n    value: function value() {\n      delete this._ganttView;\n      delete this._dialogInstance;\n\n      _get(_getPrototypeOf(Gantt.prototype), \"_clean\", this).call(this);\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(Gantt.prototype), \"_getDefaultOptions\", this).call(this), {\n        tasks: {\n          dataSource: null,\n          keyExpr: \"id\",\n          parentIdExpr: \"parentId\",\n          startExpr: \"start\",\n          endExpr: \"end\",\n          progressExpr: \"progress\",\n          titleExpr: \"title\"\n        },\n        dependencies: {\n          dataSource: null,\n          keyExpr: \"id\",\n          predecessorIdExpr: \"predecessorId\",\n          successorIdExpr: \"successorId\",\n          typeExpr: \"type\"\n        },\n        resources: {\n          dataSource: null,\n          keyExpr: \"id\",\n          textExpr: \"text\"\n        },\n        resourceAssignments: {\n          dataSource: null,\n          keyExpr: \"id\",\n          taskIdExpr: \"taskId\",\n          resourceIdExpr: \"resourceId\"\n        },\n        columns: void 0,\n        taskListWidth: 300,\n        showResources: true,\n        taskTitlePosition: \"inside\",\n        selectedRowKey: void 0,\n        onSelectionChanged: null,\n        allowSelection: true,\n        showRowLines: true,\n        scaleType: \"auto\",\n        editing: {\n          enabled: false,\n          allowTaskAdding: true,\n          allowTaskDeleting: true,\n          allowTaskUpdating: true,\n          allowDependencyAdding: true,\n          allowDependencyDeleting: true,\n          allowDependencyUpdating: true,\n          allowResourceAdding: true,\n          allowResourceDeleting: true,\n          allowResourceUpdating: true\n        }\n      });\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function value(args) {\n      switch (args.name) {\n        case \"tasks\":\n          this._refreshDataSource(GANTT_TASKS);\n\n          break;\n\n        case \"dependencies\":\n          this._refreshDataSource(GANTT_DEPENDENCIES);\n\n          break;\n\n        case \"resources\":\n          this._refreshDataSource(GANTT_RESOURCES);\n\n          break;\n\n        case \"resourceAssignments\":\n          this._refreshDataSource(GANTT_RESOURCE_ASSIGNMENTS);\n\n          break;\n\n        case \"columns\":\n          this._setTreeListOption(\"columns\", this.option(args.name));\n\n          break;\n\n        case \"taskListWidth\":\n          this._setInnerElementsWidth();\n\n          break;\n\n        case \"showResources\":\n          this._setGanttViewOption(\"showResources\", args.value);\n\n          break;\n\n        case \"taskTitlePosition\":\n          this._setGanttViewOption(\"taskTitlePosition\", args.value);\n\n          break;\n\n        case \"selectedRowKey\":\n          this._setTreeListOption(\"selectedRowKeys\", this._getArrayFromOneElement(args.value));\n\n          break;\n\n        case \"onSelectionChanged\":\n          this._createSelectionChangedAction();\n\n          break;\n\n        case \"allowSelection\":\n          this._setTreeListOption(\"selection.mode\", this._getSelectionMode(args.value));\n\n          this._setGanttViewOption(\"allowSelection\", args.value);\n\n          break;\n\n        case \"showRowLines\":\n          this._setTreeListOption(\"showRowLines\", args.value);\n\n          this._setGanttViewOption(\"showRowLines\", args.value);\n\n          break;\n\n        case \"scaleType\":\n          this._setGanttViewOption(\"scaleType\", args.value);\n\n          break;\n\n        case \"editing\":\n          this._setGanttViewOption(\"editing\", this.option(args.name));\n\n          break;\n\n        default:\n          _get(_getPrototypeOf(Gantt.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }]);\n\n  return Gantt;\n}(_ui2.default);\n\n(0, _component_registrator2.default)(\"dxGantt\", Gantt);\nmodule.exports = Gantt;","map":null,"metadata":{},"sourceType":"script"}