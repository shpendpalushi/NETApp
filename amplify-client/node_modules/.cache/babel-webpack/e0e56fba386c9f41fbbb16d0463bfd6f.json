{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/file_provider/array.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _array = require(\"../../../core/utils/array\");\n\nvar _common = require(\"../../../core/utils/common\");\n\nvar _data = require(\"../../../core/utils/data\");\n\nvar _guid = require(\"../../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _type = require(\"../../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _errors = require(\"../../../data/errors\");\n\nvar _file_provider = require(\"./file_provider\");\n\nvar _uiFile_manager = require(\"../ui.file_manager.common\");\n\nvar _uiFile_manager2 = require(\"../ui.file_manager.utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar ArrayFileProvider = function (_FileProvider) {\n  _inherits(ArrayFileProvider, _FileProvider);\n\n  function ArrayFileProvider(options) {\n    var _this;\n\n    _classCallCheck(this, ArrayFileProvider);\n\n    options = (0, _common.ensureDefined)(options, {});\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ArrayFileProvider).call(this, options));\n    var initialArray = options.data;\n\n    if (initialArray && !Array.isArray(initialArray)) {\n      throw _errors.errors.Error(\"E4006\");\n    }\n\n    var itemsExpr = options.itemsExpr || \"items\";\n    _this._subFileItemsGetter = (0, _data.compileGetter)(itemsExpr);\n    _this._subFileItemsSetter = _this._getSetter(itemsExpr);\n\n    var nameExpr = _this._getNameExpr(options);\n\n    _this._nameSetter = _this._getSetter(nameExpr);\n\n    var isDirExpr = _this._getIsDirExpr(options);\n\n    _this._getIsDirSetter = _this._getSetter(isDirExpr);\n\n    var keyExpr = _this._getKeyExpr(options);\n\n    _this._keySetter = _this._getSetter(keyExpr);\n    _this._data = initialArray || [];\n    return _this;\n  }\n\n  _createClass(ArrayFileProvider, [{\n    key: \"getItems\",\n    value: function value(pathInfo) {\n      return this._getItems(pathInfo);\n    }\n  }, {\n    key: \"renameItem\",\n    value: function value(item, name) {\n      if (!item) {\n        return;\n      }\n\n      this._nameSetter(item.dataItem, name);\n\n      item.name = name;\n      item.key = this._ensureDataObjectKey(item.dataItem);\n    }\n  }, {\n    key: \"createFolder\",\n    value: function value(parentDir, name) {\n      if (!this._isFileItemExists(parentDir) || this._isDirGetter(parentDir.fileItem)) {\n        throw {\n          errorId: _uiFile_manager.ErrorCode.DirectoryNotFound,\n          fileItem: parentDir\n        };\n      }\n\n      var newDir = {};\n\n      this._nameSetter(newDir, name);\n\n      this._getIsDirSetter(newDir, true);\n\n      this._keySetter(newDir, String(new _guid2.default()));\n\n      var array = this._getDirectoryDataItems(parentDir.dataItem);\n\n      array.push(newDir);\n\n      this._updateHasSubDirs(parentDir);\n    }\n  }, {\n    key: \"deleteItems\",\n    value: function value(items) {\n      var _this2 = this;\n\n      items.forEach(function (item) {\n        return _this2._deleteItem(item);\n      });\n    }\n  }, {\n    key: \"moveItems\",\n    value: function value(items, destinationDir) {\n      var _this3 = this;\n\n      var array = this._getDirectoryDataItems(destinationDir.dataItem);\n\n      items.forEach(function (item) {\n        _this3._checkAbilityToMoveOrCopyItem(item, destinationDir);\n\n        _this3._deleteItem(item);\n\n        array.push(item.dataItem);\n      });\n\n      this._updateHasSubDirs(destinationDir);\n    }\n  }, {\n    key: \"copyItems\",\n    value: function value(items, destinationDir) {\n      var _this4 = this;\n\n      var array = this._getDirectoryDataItems(destinationDir.dataItem);\n\n      items.forEach(function (item) {\n        _this4._checkAbilityToMoveOrCopyItem(item, destinationDir);\n\n        var copiedItem = _this4._createCopy(item.dataItem);\n\n        array.push(copiedItem);\n      });\n\n      this._updateHasSubDirs(destinationDir);\n    }\n  }, {\n    key: \"_checkAbilityToMoveOrCopyItem\",\n    value: function value(item, destinationDir) {\n      var _this5 = this;\n\n      var itemKey = this._getKeyFromDataObject(item.dataItem, item.parentPath);\n\n      var pathInfo = destinationDir.getFullPathInfo();\n      var currentPath = \"\";\n      pathInfo.forEach(function (info) {\n        currentPath = (0, _uiFile_manager2.pathCombine)(currentPath, info.name);\n\n        var pathKey = _this5._getDataObjectKey(info.key, currentPath);\n\n        if (pathKey === itemKey) {\n          throw {\n            errorId: _uiFile_manager.ErrorCode.Other,\n            fileItem: item\n          };\n        }\n      });\n    }\n  }, {\n    key: \"_createCopy\",\n    value: function value(dataObj) {\n      var _this6 = this;\n\n      var copyObj = {};\n\n      this._nameSetter(copyObj, this._nameGetter(dataObj));\n\n      this._getIsDirSetter(copyObj, this._isDirGetter(dataObj));\n\n      var items = this._subFileItemsGetter(dataObj);\n\n      if (Array.isArray(items)) {\n        var itemsCopy = [];\n        items.forEach(function (childItem) {\n          var childCopy = _this6._createCopy(childItem);\n\n          itemsCopy.push(childCopy);\n        });\n\n        this._subFileItemsSetter(copyObj, itemsCopy);\n      }\n\n      return copyObj;\n    }\n  }, {\n    key: \"_deleteItem\",\n    value: function value(fileItem) {\n      var fileItemObj = this._findFileItemObj(fileItem.getFullPathInfo());\n\n      if (!fileItemObj) {\n        throw {\n          errorId: fileItem.isDirectory ? _uiFile_manager.ErrorCode.DirectoryNotFound : _uiFile_manager.ErrorCode.FileNotFound,\n          fileItem: fileItem\n        };\n      }\n\n      var parentDirDataObj = this._findFileItemObj(fileItem.pathInfo);\n\n      var array = this._getDirectoryDataItems(parentDirDataObj);\n\n      var index = array.indexOf(fileItemObj);\n      array.splice(index, 1);\n    }\n  }, {\n    key: \"_getDirectoryDataItems\",\n    value: function value(directoryDataObj) {\n      if (!directoryDataObj) {\n        return this._data;\n      }\n\n      var dataItems = this._subFileItemsGetter(directoryDataObj);\n\n      if (!Array.isArray(dataItems)) {\n        dataItems = [];\n\n        this._subFileItemsSetter(directoryDataObj, dataItems);\n      }\n\n      return dataItems;\n    }\n  }, {\n    key: \"_getItems\",\n    value: function value(pathInfo) {\n      var parentDirKey = pathInfo && pathInfo.length > 0 ? pathInfo[pathInfo.length - 1].key : null;\n      var dirFileObjects = this._data;\n\n      if (parentDirKey) {\n        var directoryEntry = this._findFileItemObj(pathInfo);\n\n        dirFileObjects = directoryEntry && this._subFileItemsGetter(directoryEntry) || [];\n      }\n\n      this._ensureKeysForDuplicateNameItems(dirFileObjects);\n\n      return this._convertDataObjectsToFileItems(dirFileObjects, pathInfo);\n    }\n  }, {\n    key: \"_ensureKeysForDuplicateNameItems\",\n    value: function value(dataObjects) {\n      var _this7 = this;\n\n      var names = {};\n      dataObjects.forEach(function (obj) {\n        var name = _this7._nameGetter(obj);\n\n        if (names[name]) {\n          _this7._ensureDataObjectKey(obj);\n        } else {\n          names[name] = true;\n        }\n      });\n    }\n  }, {\n    key: \"_findFileItemObj\",\n    value: function value(pathInfo) {\n      var _this8 = this;\n\n      if (!Array.isArray(pathInfo)) {\n        pathInfo = [];\n      }\n\n      var currentPath = \"\";\n      var fileItemObj = null;\n      var fileItemObjects = this._data;\n\n      var _loop = function _loop(i) {\n        fileItemObj = (0, _array.find)(fileItemObjects, function (item) {\n          var hasCorrectFileItemType = _this8._isDirGetter(item) || i === pathInfo.length - 1;\n          return _this8._getKeyFromDataObject(item, currentPath) === pathInfo[i].key && _this8._nameGetter(item) === pathInfo[i].name && hasCorrectFileItemType;\n        });\n\n        if (fileItemObj) {\n          currentPath = (0, _uiFile_manager2.pathCombine)(currentPath, _this8._nameGetter(fileItemObj));\n          fileItemObjects = _this8._subFileItemsGetter(fileItemObj);\n        }\n      };\n\n      for (var i = 0; i < pathInfo.length && (0 === i || fileItemObj); i++) {\n        _loop(i);\n      }\n\n      return fileItemObj;\n    }\n  }, {\n    key: \"_getKeyFromDataObject\",\n    value: function value(dataObj, defaultKeyPrefix) {\n      var key = this._keyGetter(dataObj);\n\n      var relativeName = (0, _uiFile_manager2.pathCombine)(defaultKeyPrefix, this._nameGetter(dataObj));\n      return this._getDataObjectKey(key, relativeName);\n    }\n  }, {\n    key: \"_getDataObjectKey\",\n    value: function value(key, relativeName) {\n      return key ? key : relativeName;\n    }\n  }, {\n    key: \"_ensureDataObjectKey\",\n    value: function value(dataObj) {\n      var key = this._keyGetter(dataObj);\n\n      if (!key) {\n        key = String(new _guid2.default());\n\n        this._keySetter(dataObj, key);\n      }\n\n      return key;\n    }\n  }, {\n    key: \"_updateHasSubDirs\",\n    value: function value(dir) {\n      if (dir && !dir.isRoot) {\n        dir.hasSubDirs = this._hasSubDirs(dir.dataItem);\n      }\n    }\n  }, {\n    key: \"_hasSubDirs\",\n    value: function value(dataObj) {\n      var subItems = (0, _common.ensureDefined)(this._subFileItemsGetter(dataObj), []);\n\n      if (!Array.isArray(subItems)) {\n        return true;\n      }\n\n      for (var i = 0; i < subItems.length; i++) {\n        if (true === this._isDirGetter(subItems[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_getSetter\",\n    value: function value(expr) {\n      return _type2.default.isFunction(expr) ? expr : (0, _data.compileSetter)(expr);\n    }\n  }, {\n    key: \"_isFileItemExists\",\n    value: function value(fileItem) {\n      return fileItem.isDirectory && fileItem.isRoot || !!this._findFileItemObj(fileItem.getFullPathInfo());\n    }\n  }]);\n\n  return ArrayFileProvider;\n}(_file_provider.FileProvider);\n\nmodule.exports = ArrayFileProvider;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/file_manager/file_provider/array.js"],"names":["_array","require","_common","_data","_guid","_guid2","_interopRequireDefault","_type","_type2","_errors","_file_provider","_uiFile_manager","_uiFile_manager2","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","ArrayFileProvider","_FileProvider","options","_this","ensureDefined","initialArray","data","Array","isArray","errors","Error","itemsExpr","_subFileItemsGetter","compileGetter","_subFileItemsSetter","_getSetter","nameExpr","_getNameExpr","_nameSetter","isDirExpr","_getIsDirExpr","_getIsDirSetter","keyExpr","_getKeyExpr","_keySetter","pathInfo","_getItems","item","name","dataItem","_ensureDataObjectKey","parentDir","_isFileItemExists","_isDirGetter","fileItem","errorId","ErrorCode","DirectoryNotFound","newDir","String","default","array","_getDirectoryDataItems","push","_updateHasSubDirs","items","_this2","forEach","_deleteItem","destinationDir","_this3","_checkAbilityToMoveOrCopyItem","_this4","copiedItem","_createCopy","_this5","itemKey","_getKeyFromDataObject","parentPath","getFullPathInfo","currentPath","info","pathCombine","pathKey","_getDataObjectKey","Other","dataObj","_this6","copyObj","_nameGetter","itemsCopy","childItem","childCopy","fileItemObj","_findFileItemObj","isDirectory","FileNotFound","parentDirDataObj","index","indexOf","splice","directoryDataObj","dataItems","parentDirKey","dirFileObjects","directoryEntry","_ensureKeysForDuplicateNameItems","_convertDataObjectsToFileItems","dataObjects","_this7","names","_this8","fileItemObjects","_loop","find","hasCorrectFileItemType","defaultKeyPrefix","_keyGetter","relativeName","dir","isRoot","hasSubDirs","_hasSubDirs","subItems","expr","isFunction","compileSetter","FileProvider","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_manager/file_provider/array.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _array = require(\"../../../core/utils/array\");\r\nvar _common = require(\"../../../core/utils/common\");\r\nvar _data = require(\"../../../core/utils/data\");\r\nvar _guid = require(\"../../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _type = require(\"../../../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _errors = require(\"../../../data/errors\");\r\nvar _file_provider = require(\"./file_provider\");\r\nvar _uiFile_manager = require(\"../ui.file_manager.common\");\r\nvar _uiFile_manager2 = require(\"../ui.file_manager.utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar ArrayFileProvider = function(_FileProvider) {\r\n    _inherits(ArrayFileProvider, _FileProvider);\r\n\r\n    function ArrayFileProvider(options) {\r\n        var _this;\r\n        _classCallCheck(this, ArrayFileProvider);\r\n        options = (0, _common.ensureDefined)(options, {});\r\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(ArrayFileProvider).call(this, options));\r\n        var initialArray = options.data;\r\n        if (initialArray && !Array.isArray(initialArray)) {\r\n            throw _errors.errors.Error(\"E4006\")\r\n        }\r\n        var itemsExpr = options.itemsExpr || \"items\";\r\n        _this._subFileItemsGetter = (0, _data.compileGetter)(itemsExpr);\r\n        _this._subFileItemsSetter = _this._getSetter(itemsExpr);\r\n        var nameExpr = _this._getNameExpr(options);\r\n        _this._nameSetter = _this._getSetter(nameExpr);\r\n        var isDirExpr = _this._getIsDirExpr(options);\r\n        _this._getIsDirSetter = _this._getSetter(isDirExpr);\r\n        var keyExpr = _this._getKeyExpr(options);\r\n        _this._keySetter = _this._getSetter(keyExpr);\r\n        _this._data = initialArray || [];\r\n        return _this\r\n    }\r\n    _createClass(ArrayFileProvider, [{\r\n        key: \"getItems\",\r\n        value: function(pathInfo) {\r\n            return this._getItems(pathInfo)\r\n        }\r\n    }, {\r\n        key: \"renameItem\",\r\n        value: function(item, name) {\r\n            if (!item) {\r\n                return\r\n            }\r\n            this._nameSetter(item.dataItem, name);\r\n            item.name = name;\r\n            item.key = this._ensureDataObjectKey(item.dataItem)\r\n        }\r\n    }, {\r\n        key: \"createFolder\",\r\n        value: function(parentDir, name) {\r\n            if (!this._isFileItemExists(parentDir) || this._isDirGetter(parentDir.fileItem)) {\r\n                throw {\r\n                    errorId: _uiFile_manager.ErrorCode.DirectoryNotFound,\r\n                    fileItem: parentDir\r\n                }\r\n            }\r\n            var newDir = {};\r\n            this._nameSetter(newDir, name);\r\n            this._getIsDirSetter(newDir, true);\r\n            this._keySetter(newDir, String(new _guid2.default));\r\n            var array = this._getDirectoryDataItems(parentDir.dataItem);\r\n            array.push(newDir);\r\n            this._updateHasSubDirs(parentDir)\r\n        }\r\n    }, {\r\n        key: \"deleteItems\",\r\n        value: function(items) {\r\n            var _this2 = this;\r\n            items.forEach(function(item) {\r\n                return _this2._deleteItem(item)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"moveItems\",\r\n        value: function(items, destinationDir) {\r\n            var _this3 = this;\r\n            var array = this._getDirectoryDataItems(destinationDir.dataItem);\r\n            items.forEach(function(item) {\r\n                _this3._checkAbilityToMoveOrCopyItem(item, destinationDir);\r\n                _this3._deleteItem(item);\r\n                array.push(item.dataItem)\r\n            });\r\n            this._updateHasSubDirs(destinationDir)\r\n        }\r\n    }, {\r\n        key: \"copyItems\",\r\n        value: function(items, destinationDir) {\r\n            var _this4 = this;\r\n            var array = this._getDirectoryDataItems(destinationDir.dataItem);\r\n            items.forEach(function(item) {\r\n                _this4._checkAbilityToMoveOrCopyItem(item, destinationDir);\r\n                var copiedItem = _this4._createCopy(item.dataItem);\r\n                array.push(copiedItem)\r\n            });\r\n            this._updateHasSubDirs(destinationDir)\r\n        }\r\n    }, {\r\n        key: \"_checkAbilityToMoveOrCopyItem\",\r\n        value: function(item, destinationDir) {\r\n            var _this5 = this;\r\n            var itemKey = this._getKeyFromDataObject(item.dataItem, item.parentPath);\r\n            var pathInfo = destinationDir.getFullPathInfo();\r\n            var currentPath = \"\";\r\n            pathInfo.forEach(function(info) {\r\n                currentPath = (0, _uiFile_manager2.pathCombine)(currentPath, info.name);\r\n                var pathKey = _this5._getDataObjectKey(info.key, currentPath);\r\n                if (pathKey === itemKey) {\r\n                    throw {\r\n                        errorId: _uiFile_manager.ErrorCode.Other,\r\n                        fileItem: item\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createCopy\",\r\n        value: function(dataObj) {\r\n            var _this6 = this;\r\n            var copyObj = {};\r\n            this._nameSetter(copyObj, this._nameGetter(dataObj));\r\n            this._getIsDirSetter(copyObj, this._isDirGetter(dataObj));\r\n            var items = this._subFileItemsGetter(dataObj);\r\n            if (Array.isArray(items)) {\r\n                var itemsCopy = [];\r\n                items.forEach(function(childItem) {\r\n                    var childCopy = _this6._createCopy(childItem);\r\n                    itemsCopy.push(childCopy)\r\n                });\r\n                this._subFileItemsSetter(copyObj, itemsCopy)\r\n            }\r\n            return copyObj\r\n        }\r\n    }, {\r\n        key: \"_deleteItem\",\r\n        value: function(fileItem) {\r\n            var fileItemObj = this._findFileItemObj(fileItem.getFullPathInfo());\r\n            if (!fileItemObj) {\r\n                throw {\r\n                    errorId: fileItem.isDirectory ? _uiFile_manager.ErrorCode.DirectoryNotFound : _uiFile_manager.ErrorCode.FileNotFound,\r\n                    fileItem: fileItem\r\n                }\r\n            }\r\n            var parentDirDataObj = this._findFileItemObj(fileItem.pathInfo);\r\n            var array = this._getDirectoryDataItems(parentDirDataObj);\r\n            var index = array.indexOf(fileItemObj);\r\n            array.splice(index, 1)\r\n        }\r\n    }, {\r\n        key: \"_getDirectoryDataItems\",\r\n        value: function(directoryDataObj) {\r\n            if (!directoryDataObj) {\r\n                return this._data\r\n            }\r\n            var dataItems = this._subFileItemsGetter(directoryDataObj);\r\n            if (!Array.isArray(dataItems)) {\r\n                dataItems = [];\r\n                this._subFileItemsSetter(directoryDataObj, dataItems)\r\n            }\r\n            return dataItems\r\n        }\r\n    }, {\r\n        key: \"_getItems\",\r\n        value: function(pathInfo) {\r\n            var parentDirKey = pathInfo && pathInfo.length > 0 ? pathInfo[pathInfo.length - 1].key : null;\r\n            var dirFileObjects = this._data;\r\n            if (parentDirKey) {\r\n                var directoryEntry = this._findFileItemObj(pathInfo);\r\n                dirFileObjects = directoryEntry && this._subFileItemsGetter(directoryEntry) || []\r\n            }\r\n            this._ensureKeysForDuplicateNameItems(dirFileObjects);\r\n            return this._convertDataObjectsToFileItems(dirFileObjects, pathInfo)\r\n        }\r\n    }, {\r\n        key: \"_ensureKeysForDuplicateNameItems\",\r\n        value: function(dataObjects) {\r\n            var _this7 = this;\r\n            var names = {};\r\n            dataObjects.forEach(function(obj) {\r\n                var name = _this7._nameGetter(obj);\r\n                if (names[name]) {\r\n                    _this7._ensureDataObjectKey(obj)\r\n                } else {\r\n                    names[name] = true\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_findFileItemObj\",\r\n        value: function(pathInfo) {\r\n            var _this8 = this;\r\n            if (!Array.isArray(pathInfo)) {\r\n                pathInfo = []\r\n            }\r\n            var currentPath = \"\";\r\n            var fileItemObj = null;\r\n            var fileItemObjects = this._data;\r\n            var _loop = function(i) {\r\n                fileItemObj = (0, _array.find)(fileItemObjects, function(item) {\r\n                    var hasCorrectFileItemType = _this8._isDirGetter(item) || i === pathInfo.length - 1;\r\n                    return _this8._getKeyFromDataObject(item, currentPath) === pathInfo[i].key && _this8._nameGetter(item) === pathInfo[i].name && hasCorrectFileItemType\r\n                });\r\n                if (fileItemObj) {\r\n                    currentPath = (0, _uiFile_manager2.pathCombine)(currentPath, _this8._nameGetter(fileItemObj));\r\n                    fileItemObjects = _this8._subFileItemsGetter(fileItemObj)\r\n                }\r\n            };\r\n            for (var i = 0; i < pathInfo.length && (0 === i || fileItemObj); i++) {\r\n                _loop(i)\r\n            }\r\n            return fileItemObj\r\n        }\r\n    }, {\r\n        key: \"_getKeyFromDataObject\",\r\n        value: function(dataObj, defaultKeyPrefix) {\r\n            var key = this._keyGetter(dataObj);\r\n            var relativeName = (0, _uiFile_manager2.pathCombine)(defaultKeyPrefix, this._nameGetter(dataObj));\r\n            return this._getDataObjectKey(key, relativeName)\r\n        }\r\n    }, {\r\n        key: \"_getDataObjectKey\",\r\n        value: function(key, relativeName) {\r\n            return key ? key : relativeName\r\n        }\r\n    }, {\r\n        key: \"_ensureDataObjectKey\",\r\n        value: function(dataObj) {\r\n            var key = this._keyGetter(dataObj);\r\n            if (!key) {\r\n                key = String(new _guid2.default);\r\n                this._keySetter(dataObj, key)\r\n            }\r\n            return key\r\n        }\r\n    }, {\r\n        key: \"_updateHasSubDirs\",\r\n        value: function(dir) {\r\n            if (dir && !dir.isRoot) {\r\n                dir.hasSubDirs = this._hasSubDirs(dir.dataItem)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hasSubDirs\",\r\n        value: function(dataObj) {\r\n            var subItems = (0, _common.ensureDefined)(this._subFileItemsGetter(dataObj), []);\r\n            if (!Array.isArray(subItems)) {\r\n                return true\r\n            }\r\n            for (var i = 0; i < subItems.length; i++) {\r\n                if (true === this._isDirGetter(subItems[i])) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_getSetter\",\r\n        value: function(expr) {\r\n            return _type2.default.isFunction(expr) ? expr : (0, _data.compileSetter)(expr)\r\n        }\r\n    }, {\r\n        key: \"_isFileItemExists\",\r\n        value: function(fileItem) {\r\n            return fileItem.isDirectory && fileItem.isRoot || !!this._findFileItemObj(fileItem.getFullPathInfo())\r\n        }\r\n    }]);\r\n    return ArrayFileProvider\r\n}(_file_provider.FileProvider);\r\nmodule.exports = ArrayFileProvider;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}