{"ast":null,"code":"/**\r\n * DevExtreme (viz/series/points/candlestick_point.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _extend = require(\"../../../core/utils/extend\").extend;\n\nvar symbolPoint = require(\"./symbol_point\");\n\nvar barPoint = require(\"./bar_point\");\n\nvar _math = Math;\nvar _abs = _math.abs;\nvar _min = _math.min;\nvar _max = _math.max;\nvar _round = _math.round;\nvar DEFAULT_FINANCIAL_TRACKER_MARGIN = 2;\nmodule.exports = _extend({}, barPoint, {\n  _getContinuousPoints: function _getContinuousPoints(openCoord, closeCoord) {\n    var that = this;\n    var x = that.x;\n    var createPoint = that._options.rotated ? function (x, y) {\n      return [y, x];\n    } : function (x, y) {\n      return [x, y];\n    };\n    var width = that.width;\n    var highCoord = that.highY;\n    var max = _abs(highCoord - openCoord) < _abs(highCoord - closeCoord) ? openCoord : closeCoord;\n    var min = max === closeCoord ? openCoord : closeCoord;\n    var points;\n\n    if (min === max) {\n      points = [].concat(createPoint(x, that.highY)).concat(createPoint(x, that.lowY)).concat(createPoint(x, that.closeY)).concat(createPoint(x - width / 2, that.closeY)).concat(createPoint(x + width / 2, that.closeY)).concat(createPoint(x, that.closeY));\n    } else {\n      points = [].concat(createPoint(x, that.highY)).concat(createPoint(x, max)).concat(createPoint(x + width / 2, max)).concat(createPoint(x + width / 2, min)).concat(createPoint(x, min)).concat(createPoint(x, that.lowY)).concat(createPoint(x, min)).concat(createPoint(x - width / 2, min)).concat(createPoint(x - width / 2, max)).concat(createPoint(x, max));\n    }\n\n    return points;\n  },\n  _getCrockPoints: function _getCrockPoints(y) {\n    var that = this;\n    var x = that.x;\n    var createPoint = that._options.rotated ? function (x, y) {\n      return [y, x];\n    } : function (x, y) {\n      return [x, y];\n    };\n    return [].concat(createPoint(x, that.highY)).concat(createPoint(x, that.lowY)).concat(createPoint(x, y)).concat(createPoint(x - that.width / 2, y)).concat(createPoint(x + that.width / 2, y)).concat(createPoint(x, y));\n  },\n  _getPoints: function _getPoints() {\n    var that = this;\n    var points;\n    var closeCoord = that.closeY;\n    var openCoord = that.openY;\n\n    if (null !== closeCoord && null !== openCoord) {\n      points = that._getContinuousPoints(openCoord, closeCoord);\n    } else {\n      if (openCoord === closeCoord) {\n        points = [that.x, that.highY, that.x, that.lowY];\n      } else {\n        points = that._getCrockPoints(null !== openCoord ? openCoord : closeCoord);\n      }\n    }\n\n    return points;\n  },\n  getColor: function getColor() {\n    var that = this;\n    return that._isReduction ? that._options.reduction.color : that._styles.normal.stroke || that.series.getColor();\n  },\n  _drawMarkerInGroup: function _drawMarkerInGroup(group, attributes, renderer) {\n    var that = this;\n    that.graphic = renderer.path(that._getPoints(), \"area\").attr({\n      \"stroke-linecap\": \"square\"\n    }).attr(attributes).data({\n      \"chart-data-point\": that\n    }).sharp().append(group);\n  },\n  _fillStyle: function _fillStyle() {\n    var that = this;\n    var styles = that._options.styles;\n\n    if (that._isReduction && that._isPositive) {\n      that._styles = styles.reductionPositive;\n    } else {\n      if (that._isReduction) {\n        that._styles = styles.reduction;\n      } else {\n        if (that._isPositive) {\n          that._styles = styles.positive;\n        } else {\n          that._styles = styles;\n        }\n      }\n    }\n  },\n  _getMinTrackerWidth: function _getMinTrackerWidth() {\n    return 2 + 2 * this._styles.normal[\"stroke-width\"];\n  },\n  correctCoordinates: function correctCoordinates(correctOptions) {\n    var minWidth = this._getMinTrackerWidth();\n\n    var maxWidth = 10;\n    var width = correctOptions.width;\n    width = width < minWidth ? minWidth : width > maxWidth ? maxWidth : width;\n    this.width = width + width % 2;\n    this.xCorrection = correctOptions.offset;\n  },\n  _getMarkerGroup: function _getMarkerGroup(group) {\n    var that = this;\n    var markerGroup;\n\n    if (that._isReduction && that._isPositive) {\n      markerGroup = group.reductionPositiveMarkersGroup;\n    } else {\n      if (that._isReduction) {\n        markerGroup = group.reductionMarkersGroup;\n      } else {\n        if (that._isPositive) {\n          markerGroup = group.defaultPositiveMarkersGroup;\n        } else {\n          markerGroup = group.defaultMarkersGroup;\n        }\n      }\n    }\n\n    return markerGroup;\n  },\n  _drawMarker: function _drawMarker(renderer, group) {\n    this._drawMarkerInGroup(this._getMarkerGroup(group), this._getStyle(), renderer);\n  },\n  _getSettingsForTracker: function _getSettingsForTracker() {\n    var that = this;\n    var highY = that.highY;\n    var lowY = that.lowY;\n    var rotated = that._options.rotated;\n    var x;\n    var y;\n    var width;\n    var height;\n\n    if (highY === lowY) {\n      highY = rotated ? highY + DEFAULT_FINANCIAL_TRACKER_MARGIN : highY - DEFAULT_FINANCIAL_TRACKER_MARGIN;\n      lowY = rotated ? lowY - DEFAULT_FINANCIAL_TRACKER_MARGIN : lowY + DEFAULT_FINANCIAL_TRACKER_MARGIN;\n    }\n\n    if (rotated) {\n      x = _min(lowY, highY);\n      y = that.x - that.width / 2;\n      width = _abs(lowY - highY);\n      height = that.width;\n    } else {\n      x = that.x - that.width / 2;\n      y = _min(lowY, highY);\n      width = that.width;\n      height = _abs(lowY - highY);\n    }\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  },\n  _getGraphicBBox: function _getGraphicBBox() {\n    var that = this;\n    var rotated = that._options.rotated;\n    var x = that.x;\n    var width = that.width;\n    var lowY = that.lowY;\n    var highY = that.highY;\n    return {\n      x: !rotated ? x - _round(width / 2) : lowY,\n      y: !rotated ? highY : x - _round(width / 2),\n      width: !rotated ? width : highY - lowY,\n      height: !rotated ? lowY - highY : width\n    };\n  },\n  getTooltipParams: function getTooltipParams(location) {\n    var that = this;\n\n    if (that.graphic) {\n      var minValue = _min(that.lowY, that.highY);\n\n      var maxValue = _max(that.lowY, that.highY);\n\n      var visibleArea = that._getVisibleArea();\n\n      var rotated = that._options.rotated;\n      var minVisible = rotated ? visibleArea.minX : visibleArea.minY;\n      var maxVisible = rotated ? visibleArea.maxX : visibleArea.maxY;\n\n      var min = _max(minVisible, minValue);\n\n      var max = _min(maxVisible, maxValue);\n\n      var centerCoord = that.getCenterCoord();\n\n      if (\"edge\" === location) {\n        centerCoord[rotated ? \"x\" : \"y\"] = rotated ? max : min;\n      }\n\n      centerCoord.offset = 0;\n      return centerCoord;\n    }\n  },\n  getCenterCoord: function getCenterCoord() {\n    if (this.graphic) {\n      var that = this;\n      var x;\n      var y;\n\n      var minValue = _min(that.lowY, that.highY);\n\n      var maxValue = _max(that.lowY, that.highY);\n\n      var visibleArea = that._getVisibleArea();\n\n      var rotated = that._options.rotated;\n      var minVisible = rotated ? visibleArea.minX : visibleArea.minY;\n      var maxVisible = rotated ? visibleArea.maxX : visibleArea.maxY;\n\n      var min = _max(minVisible, minValue);\n\n      var max = _min(maxVisible, maxValue);\n\n      var center = min + (max - min) / 2;\n\n      if (rotated) {\n        y = that.x;\n        x = center;\n      } else {\n        x = that.x;\n        y = center;\n      }\n\n      return {\n        x: x,\n        y: y\n      };\n    }\n  },\n  hasValue: function hasValue() {\n    return null !== this.highValue && null !== this.lowValue;\n  },\n  hasCoords: function hasCoords() {\n    return null !== this.x && null !== this.lowY && null !== this.highY;\n  },\n  _translate: function _translate() {\n    var that = this;\n    var rotated = that._options.rotated;\n\n    var valTranslator = that._getValTranslator();\n\n    var centerValue;\n\n    var x = that._getArgTranslator().translate(that.argument);\n\n    that.vx = that.vy = that.x = null === x ? x : x + (that.xCorrection || 0);\n    that.openY = null !== that.openValue ? valTranslator.translate(that.openValue) : null;\n    that.highY = valTranslator.translate(that.highValue);\n    that.lowY = valTranslator.translate(that.lowValue);\n    that.closeY = null !== that.closeValue ? valTranslator.translate(that.closeValue) : null;\n    centerValue = _min(that.lowY, that.highY) + _abs(that.lowY - that.highY) / 2;\n\n    that._calculateVisibility(!rotated ? that.x : centerValue, !rotated ? centerValue : that.x);\n  },\n  getCrosshairData: function getCrosshairData(x, y) {\n    var that = this;\n    var rotated = that._options.rotated;\n    var origY = rotated ? x : y;\n    var yValue;\n    var argument = that.argument;\n    var coords;\n    var coord = \"low\";\n\n    if (_abs(that.lowY - origY) < _abs(that.closeY - origY)) {\n      yValue = that.lowY;\n    } else {\n      yValue = that.closeY;\n      coord = \"close\";\n    }\n\n    if (_abs(yValue - origY) >= _abs(that.openY - origY)) {\n      yValue = that.openY;\n      coord = \"open\";\n    }\n\n    if (_abs(yValue - origY) >= _abs(that.highY - origY)) {\n      yValue = that.highY;\n      coord = \"high\";\n    }\n\n    if (rotated) {\n      coords = {\n        y: that.vy,\n        x: yValue,\n        xValue: that[coord + \"Value\"],\n        yValue: argument\n      };\n    } else {\n      coords = {\n        x: that.vx,\n        y: yValue,\n        xValue: argument,\n        yValue: that[coord + \"Value\"]\n      };\n    }\n\n    coords.axis = that.series.axis;\n    return coords;\n  },\n  _updateData: function _updateData(data) {\n    var that = this;\n    var label = that._label;\n    var reductionColor = this._options.reduction.color;\n    that.value = that.initialValue = data.reductionValue;\n    that.originalValue = data.value;\n    that.lowValue = that.originalLowValue = data.lowValue;\n    that.highValue = that.originalHighValue = data.highValue;\n    that.openValue = that.originalOpenValue = data.openValue;\n    that.closeValue = that.originalCloseValue = data.closeValue;\n    that._isPositive = data.openValue < data.closeValue;\n    that._isReduction = data.isReduction;\n\n    if (that._isReduction) {\n      label.setColor(reductionColor);\n    }\n  },\n  _updateMarker: function _updateMarker(animationEnabled, style, group) {\n    var that = this;\n    var graphic = that.graphic;\n    graphic.attr({\n      points: that._getPoints()\n    }).smartAttr(style).sharp();\n    group && graphic.append(that._getMarkerGroup(group));\n  },\n  _getLabelFormatObject: function _getLabelFormatObject() {\n    var that = this;\n    return {\n      openValue: that.openValue,\n      highValue: that.highValue,\n      lowValue: that.lowValue,\n      closeValue: that.closeValue,\n      reductionValue: that.initialValue,\n      argument: that.initialArgument,\n      value: that.initialValue,\n      seriesName: that.series.name,\n      originalOpenValue: that.originalOpenValue,\n      originalCloseValue: that.originalCloseValue,\n      originalLowValue: that.originalLowValue,\n      originalHighValue: that.originalHighValue,\n      originalArgument: that.originalArgument,\n      point: that\n    };\n  },\n  _getFormatObject: function _getFormatObject(tooltip) {\n    var that = this;\n    var highValue = tooltip.formatValue(that.highValue);\n    var openValue = tooltip.formatValue(that.openValue);\n    var closeValue = tooltip.formatValue(that.closeValue);\n    var lowValue = tooltip.formatValue(that.lowValue);\n    var symbolMethods = symbolPoint;\n\n    var formatObject = symbolMethods._getFormatObject.call(that, tooltip);\n\n    return _extend({}, formatObject, {\n      valueText: \"h: \" + highValue + (\"\" !== openValue ? \" o: \" + openValue : \"\") + (\"\" !== closeValue ? \" c: \" + closeValue : \"\") + \" l: \" + lowValue,\n      highValueText: highValue,\n      openValueText: openValue,\n      closeValueText: closeValue,\n      lowValueText: lowValue\n    });\n  },\n  getMaxValue: function getMaxValue() {\n    return this.highValue;\n  },\n  getMinValue: function getMinValue() {\n    return this.lowValue;\n  }\n});","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/series/points/candlestick_point.js"],"names":["_extend","require","extend","symbolPoint","barPoint","_math","Math","_abs","abs","_min","min","_max","max","_round","round","DEFAULT_FINANCIAL_TRACKER_MARGIN","module","exports","_getContinuousPoints","openCoord","closeCoord","that","x","createPoint","_options","rotated","y","width","highCoord","highY","points","concat","lowY","closeY","_getCrockPoints","_getPoints","openY","getColor","_isReduction","reduction","color","_styles","normal","stroke","series","_drawMarkerInGroup","group","attributes","renderer","graphic","path","attr","data","sharp","append","_fillStyle","styles","_isPositive","reductionPositive","positive","_getMinTrackerWidth","correctCoordinates","correctOptions","minWidth","maxWidth","xCorrection","offset","_getMarkerGroup","markerGroup","reductionPositiveMarkersGroup","reductionMarkersGroup","defaultPositiveMarkersGroup","defaultMarkersGroup","_drawMarker","_getStyle","_getSettingsForTracker","height","_getGraphicBBox","getTooltipParams","location","minValue","maxValue","visibleArea","_getVisibleArea","minVisible","minX","minY","maxVisible","maxX","maxY","centerCoord","getCenterCoord","center","hasValue","highValue","lowValue","hasCoords","_translate","valTranslator","_getValTranslator","centerValue","_getArgTranslator","translate","argument","vx","vy","openValue","closeValue","_calculateVisibility","getCrosshairData","origY","yValue","coords","coord","xValue","axis","_updateData","label","_label","reductionColor","value","initialValue","reductionValue","originalValue","originalLowValue","originalHighValue","originalOpenValue","originalCloseValue","isReduction","setColor","_updateMarker","animationEnabled","style","smartAttr","_getLabelFormatObject","initialArgument","seriesName","name","originalArgument","point","_getFormatObject","tooltip","formatValue","symbolMethods","formatObject","call","valueText","highValueText","openValueText","closeValueText","lowValueText","getMaxValue","getMinValue"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/series/points/candlestick_point.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _extend = require(\"../../../core/utils/extend\").extend;\r\nvar symbolPoint = require(\"./symbol_point\");\r\nvar barPoint = require(\"./bar_point\");\r\nvar _math = Math;\r\nvar _abs = _math.abs;\r\nvar _min = _math.min;\r\nvar _max = _math.max;\r\nvar _round = _math.round;\r\nvar DEFAULT_FINANCIAL_TRACKER_MARGIN = 2;\r\nmodule.exports = _extend({}, barPoint, {\r\n    _getContinuousPoints: function(openCoord, closeCoord) {\r\n        var that = this;\r\n        var x = that.x;\r\n        var createPoint = that._options.rotated ? function(x, y) {\r\n            return [y, x]\r\n        } : function(x, y) {\r\n            return [x, y]\r\n        };\r\n        var width = that.width;\r\n        var highCoord = that.highY;\r\n        var max = _abs(highCoord - openCoord) < _abs(highCoord - closeCoord) ? openCoord : closeCoord;\r\n        var min = max === closeCoord ? openCoord : closeCoord;\r\n        var points;\r\n        if (min === max) {\r\n            points = [].concat(createPoint(x, that.highY)).concat(createPoint(x, that.lowY)).concat(createPoint(x, that.closeY)).concat(createPoint(x - width / 2, that.closeY)).concat(createPoint(x + width / 2, that.closeY)).concat(createPoint(x, that.closeY))\r\n        } else {\r\n            points = [].concat(createPoint(x, that.highY)).concat(createPoint(x, max)).concat(createPoint(x + width / 2, max)).concat(createPoint(x + width / 2, min)).concat(createPoint(x, min)).concat(createPoint(x, that.lowY)).concat(createPoint(x, min)).concat(createPoint(x - width / 2, min)).concat(createPoint(x - width / 2, max)).concat(createPoint(x, max))\r\n        }\r\n        return points\r\n    },\r\n    _getCrockPoints: function(y) {\r\n        var that = this;\r\n        var x = that.x;\r\n        var createPoint = that._options.rotated ? function(x, y) {\r\n            return [y, x]\r\n        } : function(x, y) {\r\n            return [x, y]\r\n        };\r\n        return [].concat(createPoint(x, that.highY)).concat(createPoint(x, that.lowY)).concat(createPoint(x, y)).concat(createPoint(x - that.width / 2, y)).concat(createPoint(x + that.width / 2, y)).concat(createPoint(x, y))\r\n    },\r\n    _getPoints: function() {\r\n        var that = this;\r\n        var points;\r\n        var closeCoord = that.closeY;\r\n        var openCoord = that.openY;\r\n        if (null !== closeCoord && null !== openCoord) {\r\n            points = that._getContinuousPoints(openCoord, closeCoord)\r\n        } else {\r\n            if (openCoord === closeCoord) {\r\n                points = [that.x, that.highY, that.x, that.lowY]\r\n            } else {\r\n                points = that._getCrockPoints(null !== openCoord ? openCoord : closeCoord)\r\n            }\r\n        }\r\n        return points\r\n    },\r\n    getColor: function() {\r\n        var that = this;\r\n        return that._isReduction ? that._options.reduction.color : that._styles.normal.stroke || that.series.getColor()\r\n    },\r\n    _drawMarkerInGroup: function(group, attributes, renderer) {\r\n        var that = this;\r\n        that.graphic = renderer.path(that._getPoints(), \"area\").attr({\r\n            \"stroke-linecap\": \"square\"\r\n        }).attr(attributes).data({\r\n            \"chart-data-point\": that\r\n        }).sharp().append(group)\r\n    },\r\n    _fillStyle: function() {\r\n        var that = this;\r\n        var styles = that._options.styles;\r\n        if (that._isReduction && that._isPositive) {\r\n            that._styles = styles.reductionPositive\r\n        } else {\r\n            if (that._isReduction) {\r\n                that._styles = styles.reduction\r\n            } else {\r\n                if (that._isPositive) {\r\n                    that._styles = styles.positive\r\n                } else {\r\n                    that._styles = styles\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _getMinTrackerWidth: function() {\r\n        return 2 + 2 * this._styles.normal[\"stroke-width\"]\r\n    },\r\n    correctCoordinates: function(correctOptions) {\r\n        var minWidth = this._getMinTrackerWidth();\r\n        var maxWidth = 10;\r\n        var width = correctOptions.width;\r\n        width = width < minWidth ? minWidth : width > maxWidth ? maxWidth : width;\r\n        this.width = width + width % 2;\r\n        this.xCorrection = correctOptions.offset\r\n    },\r\n    _getMarkerGroup: function(group) {\r\n        var that = this;\r\n        var markerGroup;\r\n        if (that._isReduction && that._isPositive) {\r\n            markerGroup = group.reductionPositiveMarkersGroup\r\n        } else {\r\n            if (that._isReduction) {\r\n                markerGroup = group.reductionMarkersGroup\r\n            } else {\r\n                if (that._isPositive) {\r\n                    markerGroup = group.defaultPositiveMarkersGroup\r\n                } else {\r\n                    markerGroup = group.defaultMarkersGroup\r\n                }\r\n            }\r\n        }\r\n        return markerGroup\r\n    },\r\n    _drawMarker: function(renderer, group) {\r\n        this._drawMarkerInGroup(this._getMarkerGroup(group), this._getStyle(), renderer)\r\n    },\r\n    _getSettingsForTracker: function() {\r\n        var that = this;\r\n        var highY = that.highY;\r\n        var lowY = that.lowY;\r\n        var rotated = that._options.rotated;\r\n        var x;\r\n        var y;\r\n        var width;\r\n        var height;\r\n        if (highY === lowY) {\r\n            highY = rotated ? highY + DEFAULT_FINANCIAL_TRACKER_MARGIN : highY - DEFAULT_FINANCIAL_TRACKER_MARGIN;\r\n            lowY = rotated ? lowY - DEFAULT_FINANCIAL_TRACKER_MARGIN : lowY + DEFAULT_FINANCIAL_TRACKER_MARGIN\r\n        }\r\n        if (rotated) {\r\n            x = _min(lowY, highY);\r\n            y = that.x - that.width / 2;\r\n            width = _abs(lowY - highY);\r\n            height = that.width\r\n        } else {\r\n            x = that.x - that.width / 2;\r\n            y = _min(lowY, highY);\r\n            width = that.width;\r\n            height = _abs(lowY - highY)\r\n        }\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            width: width,\r\n            height: height\r\n        }\r\n    },\r\n    _getGraphicBBox: function() {\r\n        var that = this;\r\n        var rotated = that._options.rotated;\r\n        var x = that.x;\r\n        var width = that.width;\r\n        var lowY = that.lowY;\r\n        var highY = that.highY;\r\n        return {\r\n            x: !rotated ? x - _round(width / 2) : lowY,\r\n            y: !rotated ? highY : x - _round(width / 2),\r\n            width: !rotated ? width : highY - lowY,\r\n            height: !rotated ? lowY - highY : width\r\n        }\r\n    },\r\n    getTooltipParams: function(location) {\r\n        var that = this;\r\n        if (that.graphic) {\r\n            var minValue = _min(that.lowY, that.highY);\r\n            var maxValue = _max(that.lowY, that.highY);\r\n            var visibleArea = that._getVisibleArea();\r\n            var rotated = that._options.rotated;\r\n            var minVisible = rotated ? visibleArea.minX : visibleArea.minY;\r\n            var maxVisible = rotated ? visibleArea.maxX : visibleArea.maxY;\r\n            var min = _max(minVisible, minValue);\r\n            var max = _min(maxVisible, maxValue);\r\n            var centerCoord = that.getCenterCoord();\r\n            if (\"edge\" === location) {\r\n                centerCoord[rotated ? \"x\" : \"y\"] = rotated ? max : min\r\n            }\r\n            centerCoord.offset = 0;\r\n            return centerCoord\r\n        }\r\n    },\r\n    getCenterCoord: function() {\r\n        if (this.graphic) {\r\n            var that = this;\r\n            var x;\r\n            var y;\r\n            var minValue = _min(that.lowY, that.highY);\r\n            var maxValue = _max(that.lowY, that.highY);\r\n            var visibleArea = that._getVisibleArea();\r\n            var rotated = that._options.rotated;\r\n            var minVisible = rotated ? visibleArea.minX : visibleArea.minY;\r\n            var maxVisible = rotated ? visibleArea.maxX : visibleArea.maxY;\r\n            var min = _max(minVisible, minValue);\r\n            var max = _min(maxVisible, maxValue);\r\n            var center = min + (max - min) / 2;\r\n            if (rotated) {\r\n                y = that.x;\r\n                x = center\r\n            } else {\r\n                x = that.x;\r\n                y = center\r\n            }\r\n            return {\r\n                x: x,\r\n                y: y\r\n            }\r\n        }\r\n    },\r\n    hasValue: function() {\r\n        return null !== this.highValue && null !== this.lowValue\r\n    },\r\n    hasCoords: function() {\r\n        return null !== this.x && null !== this.lowY && null !== this.highY\r\n    },\r\n    _translate: function() {\r\n        var that = this;\r\n        var rotated = that._options.rotated;\r\n        var valTranslator = that._getValTranslator();\r\n        var centerValue;\r\n        var x = that._getArgTranslator().translate(that.argument);\r\n        that.vx = that.vy = that.x = null === x ? x : x + (that.xCorrection || 0);\r\n        that.openY = null !== that.openValue ? valTranslator.translate(that.openValue) : null;\r\n        that.highY = valTranslator.translate(that.highValue);\r\n        that.lowY = valTranslator.translate(that.lowValue);\r\n        that.closeY = null !== that.closeValue ? valTranslator.translate(that.closeValue) : null;\r\n        centerValue = _min(that.lowY, that.highY) + _abs(that.lowY - that.highY) / 2;\r\n        that._calculateVisibility(!rotated ? that.x : centerValue, !rotated ? centerValue : that.x)\r\n    },\r\n    getCrosshairData: function(x, y) {\r\n        var that = this;\r\n        var rotated = that._options.rotated;\r\n        var origY = rotated ? x : y;\r\n        var yValue;\r\n        var argument = that.argument;\r\n        var coords;\r\n        var coord = \"low\";\r\n        if (_abs(that.lowY - origY) < _abs(that.closeY - origY)) {\r\n            yValue = that.lowY\r\n        } else {\r\n            yValue = that.closeY;\r\n            coord = \"close\"\r\n        }\r\n        if (_abs(yValue - origY) >= _abs(that.openY - origY)) {\r\n            yValue = that.openY;\r\n            coord = \"open\"\r\n        }\r\n        if (_abs(yValue - origY) >= _abs(that.highY - origY)) {\r\n            yValue = that.highY;\r\n            coord = \"high\"\r\n        }\r\n        if (rotated) {\r\n            coords = {\r\n                y: that.vy,\r\n                x: yValue,\r\n                xValue: that[coord + \"Value\"],\r\n                yValue: argument\r\n            }\r\n        } else {\r\n            coords = {\r\n                x: that.vx,\r\n                y: yValue,\r\n                xValue: argument,\r\n                yValue: that[coord + \"Value\"]\r\n            }\r\n        }\r\n        coords.axis = that.series.axis;\r\n        return coords\r\n    },\r\n    _updateData: function(data) {\r\n        var that = this;\r\n        var label = that._label;\r\n        var reductionColor = this._options.reduction.color;\r\n        that.value = that.initialValue = data.reductionValue;\r\n        that.originalValue = data.value;\r\n        that.lowValue = that.originalLowValue = data.lowValue;\r\n        that.highValue = that.originalHighValue = data.highValue;\r\n        that.openValue = that.originalOpenValue = data.openValue;\r\n        that.closeValue = that.originalCloseValue = data.closeValue;\r\n        that._isPositive = data.openValue < data.closeValue;\r\n        that._isReduction = data.isReduction;\r\n        if (that._isReduction) {\r\n            label.setColor(reductionColor)\r\n        }\r\n    },\r\n    _updateMarker: function(animationEnabled, style, group) {\r\n        var that = this;\r\n        var graphic = that.graphic;\r\n        graphic.attr({\r\n            points: that._getPoints()\r\n        }).smartAttr(style).sharp();\r\n        group && graphic.append(that._getMarkerGroup(group))\r\n    },\r\n    _getLabelFormatObject: function() {\r\n        var that = this;\r\n        return {\r\n            openValue: that.openValue,\r\n            highValue: that.highValue,\r\n            lowValue: that.lowValue,\r\n            closeValue: that.closeValue,\r\n            reductionValue: that.initialValue,\r\n            argument: that.initialArgument,\r\n            value: that.initialValue,\r\n            seriesName: that.series.name,\r\n            originalOpenValue: that.originalOpenValue,\r\n            originalCloseValue: that.originalCloseValue,\r\n            originalLowValue: that.originalLowValue,\r\n            originalHighValue: that.originalHighValue,\r\n            originalArgument: that.originalArgument,\r\n            point: that\r\n        }\r\n    },\r\n    _getFormatObject: function(tooltip) {\r\n        var that = this;\r\n        var highValue = tooltip.formatValue(that.highValue);\r\n        var openValue = tooltip.formatValue(that.openValue);\r\n        var closeValue = tooltip.formatValue(that.closeValue);\r\n        var lowValue = tooltip.formatValue(that.lowValue);\r\n        var symbolMethods = symbolPoint;\r\n        var formatObject = symbolMethods._getFormatObject.call(that, tooltip);\r\n        return _extend({}, formatObject, {\r\n            valueText: \"h: \" + highValue + (\"\" !== openValue ? \" o: \" + openValue : \"\") + (\"\" !== closeValue ? \" c: \" + closeValue : \"\") + \" l: \" + lowValue,\r\n            highValueText: highValue,\r\n            openValueText: openValue,\r\n            closeValueText: closeValue,\r\n            lowValueText: lowValue\r\n        })\r\n    },\r\n    getMaxValue: function() {\r\n        return this.highValue\r\n    },\r\n    getMinValue: function() {\r\n        return this.lowValue\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"script"}