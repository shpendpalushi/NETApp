{"ast":null,"code":"/*!\r\n * DevExpress Diagram (dx-diagram)\r\n * Version: 0.1.53\r\n * Build date: Thu Jan 09 2020\r\n * \r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExpress licensing here: https://www.devexpress.com/Support/EULAs\r\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define([], factory);else if (typeof exports === 'object') exports[\"diagram\"] = factory();else root[\"DevExpress\"] = root[\"DevExpress\"] || {}, root[\"DevExpress\"][\"diagram\"] = factory();\n})(window, function () {\n  return (\n    /******/\n    function (modules) {\n      // webpackBootstrap\n\n      /******/\n      // The module cache\n\n      /******/\n      var installedModules = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n\n        /******/\n        // Check if module is in cache\n\n        /******/\n        if (installedModules[moduleId]) {\n          /******/\n          return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = installedModules[moduleId] = {\n          /******/\n          i: moduleId,\n\n          /******/\n          l: false,\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Flag the module as loaded\n\n        /******/\n\n        module.l = true;\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /******/\n\n      /******/\n      // expose the modules object (__webpack_modules__)\n\n      /******/\n\n\n      __webpack_require__.m = modules;\n      /******/\n\n      /******/\n      // expose the module cache\n\n      /******/\n\n      __webpack_require__.c = installedModules;\n      /******/\n\n      /******/\n      // define getter function for harmony exports\n\n      /******/\n\n      __webpack_require__.d = function (exports, name, getter) {\n        /******/\n        if (!__webpack_require__.o(exports, name)) {\n          /******/\n          Object.defineProperty(exports, name, {\n            enumerable: true,\n            get: getter\n          });\n          /******/\n        }\n        /******/\n\n      };\n      /******/\n\n      /******/\n      // define __esModule on exports\n\n      /******/\n\n\n      __webpack_require__.r = function (exports) {\n        /******/\n        if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n          /******/\n          Object.defineProperty(exports, Symbol.toStringTag, {\n            value: 'Module'\n          });\n          /******/\n        }\n        /******/\n\n\n        Object.defineProperty(exports, '__esModule', {\n          value: true\n        });\n        /******/\n      };\n      /******/\n\n      /******/\n      // create a fake namespace object\n\n      /******/\n      // mode & 1: value is a module id, require it\n\n      /******/\n      // mode & 2: merge all properties of value into the ns\n\n      /******/\n      // mode & 4: return value when already ns object\n\n      /******/\n      // mode & 8|1: behave like require\n\n      /******/\n\n\n      __webpack_require__.t = function (value, mode) {\n        /******/\n        if (mode & 1) value = __webpack_require__(value);\n        /******/\n\n        if (mode & 8) return value;\n        /******/\n\n        if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n        /******/\n\n        var ns = Object.create(null);\n        /******/\n\n        __webpack_require__.r(ns);\n        /******/\n\n\n        Object.defineProperty(ns, 'default', {\n          enumerable: true,\n          value: value\n        });\n        /******/\n\n        if (mode & 2 && typeof value != 'string') for (var key in value) {\n          __webpack_require__.d(ns, key, function (key) {\n            return value[key];\n          }.bind(null, key));\n        }\n        /******/\n\n        return ns;\n        /******/\n      };\n      /******/\n\n      /******/\n      // getDefaultExport function for compatibility with non-harmony modules\n\n      /******/\n\n\n      __webpack_require__.n = function (module) {\n        /******/\n        var getter = module && module.__esModule ?\n        /******/\n        function getDefault() {\n          return module['default'];\n        } :\n        /******/\n        function getModuleExports() {\n          return module;\n        };\n        /******/\n\n        __webpack_require__.d(getter, 'a', getter);\n        /******/\n\n\n        return getter;\n        /******/\n      };\n      /******/\n\n      /******/\n      // Object.prototype.hasOwnProperty.call\n\n      /******/\n\n\n      __webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n\n      /******/\n      // __webpack_public_path__\n\n      /******/\n\n\n      __webpack_require__.p = \"\";\n      /******/\n\n      /******/\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n\n      return __webpack_require__(__webpack_require__.s = 8);\n      /******/\n    }(\n    /************************************************************************/\n\n    /******/\n    [\n    /* 0 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Size =\n      /** @class */\n      function () {\n        function Size(width, height) {\n          this.width = width;\n          this.height = height;\n        }\n\n        Size.prototype.clone = function () {\n          return new Size(this.width, this.height);\n        };\n\n        Size.prototype.toString = function () {\n          return JSON.stringify(this);\n        };\n\n        Size.prototype.offset = function (offsetX, offsetY) {\n          if (offsetX === void 0) {\n            offsetX = 0;\n          }\n\n          if (offsetY === void 0) {\n            offsetY = 0;\n          }\n\n          return new Size(Math.max(0, this.width + offsetX), Math.max(0, this.height + offsetY));\n        };\n\n        Size.prototype.multiply = function (multiplierW, multiplierH) {\n          if (multiplierW === void 0) {\n            multiplierW = 1;\n          }\n\n          if (multiplierH === void 0) {\n            multiplierH = multiplierW;\n          }\n\n          return new Size(this.width * multiplierW, this.height * multiplierH);\n        };\n\n        Size.prototype.equals = function (size) {\n          return size.width === this.width && size.height === this.height;\n        };\n\n        Size.prototype.transform = function (func) {\n          return new Size(func(this.width), func(this.height));\n        };\n\n        return Size;\n      }();\n\n      exports.Size = Size;\n\n      var Point =\n      /** @class */\n      function () {\n        function Point(x, y) {\n          this.x = x;\n          this.y = y;\n        }\n\n        Point.prototype.clone = function () {\n          return new Point(this.x, this.y);\n        };\n\n        Point.prototype.toString = function () {\n          return JSON.stringify(this);\n        };\n\n        Point.prototype.offset = function (offsetX, offsetY) {\n          if (offsetX === void 0) {\n            offsetX = 0;\n          }\n\n          if (offsetY === void 0) {\n            offsetY = 0;\n          }\n\n          return new Point(this.x + offsetX, this.y + offsetY);\n        };\n\n        Point.prototype.multiply = function (multiplierX, multiplierY) {\n          if (multiplierX === void 0) {\n            multiplierX = 1;\n          }\n\n          if (multiplierY === void 0) {\n            multiplierY = multiplierX;\n          }\n\n          return new Point(this.x * multiplierX, this.y * multiplierY);\n        };\n\n        Point.prototype.equals = function (pt) {\n          return pt.x === this.x && pt.y === this.y;\n        };\n\n        Point.prototype.transform = function (func) {\n          return new Point(func(this.x), func(this.y));\n        };\n\n        Point.empty = function () {\n          return new Point(0, 0);\n        };\n\n        Point.plus = function (a, b) {\n          return new Point(a.x + b.x, a.y + b.y);\n        };\n\n        Point.minus = function (a, b) {\n          return new Point(a.x - b.x, a.y - b.y);\n        };\n\n        return Point;\n      }();\n\n      exports.Point = Point;\n\n      var Offset =\n      /** @class */\n      function () {\n        function Offset(left, top, right, bottom) {\n          this.left = left;\n          this.top = top;\n          this.right = right;\n          this.bottom = bottom;\n        }\n\n        Object.defineProperty(Offset.prototype, \"horizontal\", {\n          get: function get() {\n            return this.left + this.right;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Offset.prototype, \"vertical\", {\n          get: function get() {\n            return this.top + this.bottom;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Offset.prototype.clone = function () {\n          return new Offset(this.left, this.top, this.right, this.bottom);\n        };\n\n        Offset.prototype.transform = function (func) {\n          return new Offset(func(this.left), func(this.top), func(this.right), func(this.bottom));\n        };\n\n        Offset.prototype.offset = function (offset, increase) {\n          var clone = this.clone();\n\n          if (increase) {\n            clone.left += offset.left;\n            clone.right += offset.right;\n            clone.top += offset.top;\n            clone.bottom += offset.bottom;\n          } else {\n            clone.left -= offset.left;\n            clone.right -= offset.right;\n            clone.top -= offset.top;\n            clone.bottom -= offset.bottom;\n          }\n\n          return clone;\n        };\n\n        Offset.prototype.multiply = function (multiplierX, multiplierY) {\n          if (multiplierX === void 0) {\n            multiplierX = 1;\n          }\n\n          if (multiplierY === void 0) {\n            multiplierY = multiplierX;\n          }\n\n          return new Offset(this.left * multiplierX, this.top * multiplierY, this.right * multiplierX, this.bottom * multiplierY);\n        };\n\n        Offset.prototype.isEmpty = function () {\n          return this.left === 0 && this.right === 0 && this.top === 0 && this.bottom === 0;\n        };\n\n        Offset.prototype.equals = function (offset) {\n          return this.left === offset.left && this.top === offset.top && this.right === offset.right && this.bottom === offset.bottom;\n        };\n\n        Offset.prototype.toString = function () {\n          return \"left: \" + this.left + \" top: \" + this.top + \" right: \" + this.right + \" bottom: \" + this.bottom;\n        };\n\n        Offset.empty = function () {\n          return new Offset(0, 0, 0, 0);\n        };\n\n        Offset.fromNumber = function (offset) {\n          return new Offset(offset, offset, offset, offset);\n        };\n\n        Offset.fromSide = function (horizontal, vertical) {\n          return new Offset(horizontal, vertical, horizontal, vertical);\n        };\n\n        return Offset;\n      }();\n\n      exports.Offset = Offset;\n\n      var Rectangle =\n      /** @class */\n      function () {\n        function Rectangle(position, size) {\n          this.position = position;\n          this.size = size;\n        }\n\n        Object.defineProperty(Rectangle.prototype, \"left\", {\n          get: function get() {\n            return this.position.x;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Rectangle.prototype, \"top\", {\n          get: function get() {\n            return this.position.y;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Rectangle.prototype, \"right\", {\n          get: function get() {\n            return this.position.x + this.size.width;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Rectangle.prototype, \"bottom\", {\n          get: function get() {\n            return this.position.y + this.size.height;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Rectangle.prototype, \"center\", {\n          get: function get() {\n            return new Point(this.position.x + this.size.width / 2, this.position.y + this.size.height / 2);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Rectangle.prototype, \"width\", {\n          get: function get() {\n            return this.size.width;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Rectangle.prototype, \"height\", {\n          get: function get() {\n            return this.size.height;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Rectangle.prototype.clone = function () {\n          return new Rectangle(this.position.clone(), this.size.clone());\n        };\n\n        Rectangle.prototype.toString = function () {\n          return JSON.stringify(this);\n        };\n\n        Rectangle.prototype.contains = function (point) {\n          return this.left <= point.x && point.x <= this.right && this.top <= point.y && point.y <= this.bottom;\n        };\n\n        Rectangle.prototype.intersectX = function (rect) {\n          if (this.left > rect.right || rect.left > this.right) return false;\n          return true;\n        };\n\n        Rectangle.prototype.intersectY = function (rect) {\n          if (this.top > rect.bottom || rect.top > this.bottom) return false;\n          return true;\n        };\n\n        Rectangle.prototype.intersect = function (rect) {\n          return this.intersectX(rect) && this.intersectY(rect);\n        };\n\n        Rectangle.prototype.inflate = function (deltaX, deltaY) {\n          deltaY = deltaY === undefined ? deltaX : deltaY;\n          return new Rectangle(this.position.offset(-deltaX, -deltaY), this.size.offset(2 * deltaX, 2 * deltaY));\n        };\n\n        Rectangle.prototype.resize = function (deltaX, deltaY) {\n          return new Rectangle(this.position, this.size.offset(deltaX, deltaY));\n        };\n\n        Rectangle.prototype.offset = function (offsetX, offsetY) {\n          return new Rectangle(this.position.offset(offsetX, offsetY), this.size);\n        };\n\n        Rectangle.prototype.multiply = function (multiplier) {\n          return new Rectangle(this.position.multiply(multiplier), this.size.multiply(multiplier));\n        };\n\n        Rectangle.prototype.equals = function (rect) {\n          return this.left === rect.left && this.top === rect.top && this.width === rect.width && this.height === rect.height;\n        };\n\n        Rectangle.prototype.transform = function (func) {\n          return new Rectangle(this.position.transform(func), this.size.transform(func));\n        };\n\n        Rectangle.create = function (x, y, width, height) {\n          return new Rectangle(new Point(x, y), new Size(width, height));\n        };\n\n        Rectangle.createByPoints = function (point1, point2) {\n          return Rectangle.createByPositions(point1.x, point1.y, point2.x, point2.y);\n        };\n\n        Rectangle.createByPositions = function (x1, y1, x2, y2) {\n          var x = Math.min(x1, x2);\n          var y = Math.min(y1, y2);\n          var width = Math.abs(x2 - x1);\n          var height = Math.abs(y2 - y1);\n          return Rectangle.create(x, y, width, height);\n        };\n\n        return Rectangle;\n      }();\n\n      exports.Rectangle = Rectangle;\n\n      var Segment =\n      /** @class */\n      function () {\n        function Segment(startPoint, endPoint) {\n          this.startPoint = startPoint;\n          this.endPoint = endPoint;\n        }\n\n        Object.defineProperty(Segment.prototype, \"distance\", {\n          get: function get() {\n            return GeometryUtils.getDistance(this.startPoint, this.endPoint);\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Segment.prototype.intersect = function (segment) {\n          if (this.startPoint.equals(segment.startPoint) || this.endPoint.equals(segment.startPoint) || this.startPoint.equals(segment.endPoint) || this.endPoint.equals(segment.endPoint)) return true;\n          return this.intersectCore(segment) && segment.intersectCore(this);\n        };\n\n        Segment.prototype.intersectRect = function (rectangle) {\n          var ltPt = rectangle.position,\n              lbPt = new Point(rectangle.left, rectangle.bottom),\n              rtPt = new Point(rectangle.right, rectangle.top),\n              rbPt = new Point(rectangle.right, rectangle.bottom);\n          return rectangle.contains(this.startPoint) || rectangle.contains(this.endPoint) || this.intersect(new Segment(ltPt, lbPt)) || this.intersect(new Segment(lbPt, rbPt)) || this.intersect(new Segment(rbPt, rtPt)) || this.intersect(new Segment(rtPt, ltPt));\n        };\n\n        Segment.prototype.intersectCore = function (segment) {\n          if (this.startPoint.x === this.endPoint.x) {\n            if (this.startPoint.x - segment.endPoint.x !== 0) return (this.startPoint.x - segment.startPoint.x) / (this.startPoint.x - segment.endPoint.x) <= 0;\n            if (segment.endPoint.y - this.endPoint.y !== 0) return (segment.endPoint.y - this.startPoint.y) / (segment.endPoint.y - this.endPoint.y) <= 0;\n          }\n\n          if (this.startPoint.y === this.endPoint.y) {\n            if (this.startPoint.y - segment.endPoint.y !== 0) return (this.startPoint.y - segment.startPoint.y) / (this.startPoint.y - segment.endPoint.y) <= 0;\n            if (segment.endPoint.x - this.endPoint.x !== 0) return (segment.endPoint.x - this.startPoint.x) / (segment.endPoint.x - this.endPoint.x) <= 0;\n          }\n\n          var tg = (this.endPoint.y - this.startPoint.y) / (this.endPoint.x - this.startPoint.x);\n          var y1 = this.startPoint.y + (segment.startPoint.x - this.startPoint.x) * tg;\n          var y2 = this.startPoint.y + (segment.endPoint.x - this.startPoint.x) * tg;\n          var dy1 = segment.startPoint.y - y1;\n          var dy2 = segment.endPoint.y - y2;\n\n          if (dy1 === 0 && dy2 === 0) {\n            return (this.startPoint.y - y1) / (this.endPoint.y - y1) <= 0 || (this.startPoint.y - y2) / (this.endPoint.y - y2) <= 0;\n          }\n\n          return dy1 === 0 || dy2 === 0 || dy1 / dy2 < 0;\n        };\n\n        Segment.create = function (x1, y1, x2, y2) {\n          return new Segment(new Point(x1, y1), new Point(x2, y2));\n        };\n\n        Segment.createByPoints = function (point1, point2) {\n          return Segment.create(point1.x, point1.y, point2.x, point2.y);\n        };\n\n        return Segment;\n      }();\n\n      exports.Segment = Segment;\n\n      var EventDispatcher =\n      /** @class */\n      function () {\n        function EventDispatcher() {\n          this.listeners = [];\n        }\n\n        EventDispatcher.prototype.add = function (listener) {\n          if (!listener) throw new Error(\"Not Implemented\");\n          if (!this.hasEventListener(listener)) this.listeners.push(listener);\n        };\n\n        EventDispatcher.prototype.remove = function (listener) {\n          for (var i = 0, currentListener; currentListener = this.listeners[i]; i++) {\n            if (currentListener === listener) {\n              this.listeners.splice(i, 1);\n              break;\n            }\n          }\n        };\n\n        EventDispatcher.prototype.raise = function (funcName) {\n          var args = [];\n\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n\n          for (var i = 0, listener; listener = this.listeners[i]; i++) {\n            listener[funcName].apply(listener, args);\n          }\n        };\n\n        EventDispatcher.prototype.raise1 = function (action) {\n          for (var i = 0, listener; listener = this.listeners[i]; i++) {\n            action(listener);\n          }\n        };\n\n        EventDispatcher.prototype.hasEventListener = function (listener) {\n          for (var i = 0, l = this.listeners.length; i < l; i++) {\n            if (this.listeners[i] === listener) return true;\n          }\n\n          return false;\n        };\n\n        return EventDispatcher;\n      }();\n\n      exports.EventDispatcher = EventDispatcher;\n\n      var Utils =\n      /** @class */\n      function () {\n        function Utils() {} //http://workservices01/OpenWiki/ow.asp?ASPxRichEdit_BinarySearch#preview\n        // BINARY INDEX \n        // Input array [4, 8, 10]\n        // find       binaryIndexOf normedBinaryIndexOf\n        // (-inf, 3]     -1            -1\n        // 4              0             0\n        // [5, 7]        -2             0\n        // 8              1             1\n        // 9             -3             1\n        // 10             2             2\n        // [11, +inf)    -4             2\n        // case array.length == 0, then return -1\n        // don't touch default value  = -2! In some case binaryIndexOf call as ([], ()=>.., 0, [].length - 1)\n\n\n        Utils.binaryIndexOf = function (array, comparer, minIndex, maxIndex) {\n          if (minIndex === void 0) {\n            minIndex = 0;\n          }\n\n          if (maxIndex === void 0) {\n            maxIndex = -2;\n          }\n\n          var findFromZeroPosition = minIndex == 0;\n          if (maxIndex == -2) maxIndex = array.length - 1;\n\n          while (minIndex <= maxIndex) {\n            var currentIndex = minIndex + (maxIndex - minIndex >> 1);\n            var compare = comparer(array[currentIndex]);\n            if (compare < 0) minIndex = currentIndex + 1;else if (compare > 0) maxIndex = currentIndex - 1;else return currentIndex;\n          }\n\n          return findFromZeroPosition ? ~minIndex : -1;\n        };\n\n        Utils.normedBinaryIndexOf = function (array, comparer, minIndex, maxIndex) {\n          if (minIndex === void 0) {\n            minIndex = 0;\n          }\n\n          if (maxIndex === void 0) {\n            maxIndex = -2;\n          }\n\n          var index = Utils.binaryIndexOf(array, comparer, minIndex, maxIndex);\n          return Utils.binaryIndexNormalizator(index);\n        };\n\n        Utils.binaryIndexNormalizator = function (index) {\n          return index < 0 ? ~index - 1 : index;\n        };\n\n        return Utils;\n      }();\n\n      exports.Utils = Utils;\n\n      var GeometryUtils =\n      /** @class */\n      function () {\n        function GeometryUtils() {}\n\n        GeometryUtils.getCommonRectangle = function (rects) {\n          if (!rects.length) return Rectangle.create(0, 0, 0, 0);\n          var minX = Number.MAX_VALUE;\n          var maxX = -Number.MAX_VALUE;\n          var minY = Number.MAX_VALUE;\n          var maxY = -Number.MAX_VALUE;\n          rects.forEach(function (rect) {\n            minX = Math.min(minX, rect.left);\n            maxX = Math.max(maxX, rect.right);\n            minY = Math.min(minY, rect.top);\n            maxY = Math.max(maxY, rect.bottom);\n          });\n          return Rectangle.create(minX, minY, maxX - minX, maxY - minY);\n        };\n\n        GeometryUtils.findFreeSpace = function (rects, size, exact, targetRect) {\n          var xs = [targetRect ? targetRect.left : 0],\n              xshash;\n          var ys = [targetRect ? targetRect.top : 0];\n          rects.forEach(function (r) {\n            xs.push(r.left);\n            xs.push(r.right);\n            ys.push(r.top);\n            ys.push(r.bottom);\n          });\n          xs = xs.sort(function (a, b) {\n            return a - b;\n          }).reduce(function (acc, v, index) {\n            return xs[index - 1] !== v && acc.push(v) && acc || acc;\n          }, []); // magic for distinct\n\n          ys = ys.sort(function (a, b) {\n            return a - b;\n          }).reduce(function (acc, v, index) {\n            return ys[index - 1] !== v && acc.push(v) && acc || acc;\n          }, []);\n          var matrix = ys.map(function (y) {\n            return xs.map(function (x, i) {\n              return xs[i + 1] - x;\n            });\n          });\n\n          var _loop_1 = function _loop_1(i, rect) {\n            var xi0 = Utils.binaryIndexOf(xs, function (a) {\n              return a - rect.left;\n            });\n            var xi1 = Utils.binaryIndexOf(xs, function (a) {\n              return a - rect.right;\n            });\n            var yi0 = Utils.binaryIndexOf(ys, function (a) {\n              return a - rect.top;\n            });\n            var yi1 = Utils.binaryIndexOf(ys, function (a) {\n              return a - rect.bottom;\n            });\n\n            for (var y = yi0; y < yi1; y++) {\n              for (var x = xi0; x < xi1; x++) {\n                matrix[y][x] *= -1;\n              }\n            }\n          };\n\n          for (var i = 0, rect = void 0; rect = rects[i]; i++) {\n            _loop_1(i, rect);\n          }\n\n          for (var yi = 0; yi < ys.length; yi++) {\n            for (var xi = 0; xi < xs.length - 1; xi++) {\n              var checkResult = this.checkRect(matrix, ys, xs, yi, xi, size, exact);\n              if (checkResult > 0) xi = checkResult;else if (checkResult === 0) return new Point(xs[xi], ys[yi]);\n            }\n          }\n\n          return null;\n        };\n\n        GeometryUtils.checkRect = function (matrix, ys, xs, yimin, ximin, size, exact) {\n          var height = 0;\n          var width = 0;\n          var ximax = xs.length - 2;\n\n          for (var yi = yimin; yi < ys.length; yi++) {\n            height = ys[yi + 1] - ys[yimin];\n\n            for (var xi = ximin; xi <= ximax; xi++) {\n              if (matrix[yi][xi] < 0) return xi === 0 ? -1 : xi; // move left?\n\n              width = xs[xi + 1] - xs[ximin];\n\n              if (size.width <= width || !exact && xi === xs.length - 2 && size.width / 2 <= width) {\n                if (size.height <= height || !exact && yi === ys.length - 2 && size.height / 2 <= height) return 0;\n                ximax = xi;\n              }\n            }\n          }\n        };\n\n        GeometryUtils.getArrowPoints = function (point, directionPoint, arrowHeight, arrowWidth) {\n          if (point.x === directionPoint.x && point.y === directionPoint.y) return {\n            point1: point.clone(),\n            point2: point.clone()\n          };\n          var catX = directionPoint.x - point.x;\n          var catY = directionPoint.y - point.y;\n          var hypotenuse = Math.sqrt(Math.pow(catX, 2) + Math.pow(catY, 2));\n          var cos = catX / hypotenuse;\n          var sin = catY / hypotenuse;\n          var x1 = point.x + arrowHeight * cos + arrowWidth * sin;\n          var y1 = point.y + arrowHeight * sin - arrowWidth * cos;\n          var x2 = point.x + arrowHeight * cos - arrowWidth * sin;\n          var y2 = point.y + arrowHeight * sin + arrowWidth * cos;\n          return {\n            point1: new Point(x1, y1),\n            point2: new Point(x2, y2)\n          };\n        };\n\n        GeometryUtils.removeUnnecessaryLinePoints = function (points, removeCallback, checkCallback) {\n          if (checkCallback === void 0) {\n            checkCallback = function checkCallback(pt) {\n              return pt !== undefined;\n            };\n          }\n\n          this.removeDuplicatedPoints(points, removeCallback, checkCallback);\n          this.removeOneLinePoints(points, removeCallback, checkCallback);\n          this.removeBackwardPoints(points, removeCallback, checkCallback);\n        };\n\n        GeometryUtils.removeBackwardPoints = function (points, removeCallback, checkCallback) {\n          if (checkCallback === void 0) {\n            checkCallback = function checkCallback(pt) {\n              return pt !== undefined;\n            };\n          }\n\n          var index = 0;\n          var point;\n\n          while (point = points[index]) {\n            if (points.length <= 2) break;\n            var nextPoint = this.getNextPoint(points, index, true, checkCallback);\n            var prevPoint = this.getNextPoint(points, index, false, checkCallback);\n\n            if (prevPoint && nextPoint) {\n              if (point.x == prevPoint.x && point.x == nextPoint.x) {\n                if (point.y > prevPoint.y && point.y > nextPoint.y || point.y < prevPoint.y && point.y < nextPoint.y) {\n                  if (removeCallback(points[index], index)) continue;\n                }\n              }\n\n              if (point.y == prevPoint.y && point.y == nextPoint.y) {\n                if (point.x > prevPoint.x && point.x > nextPoint.x || point.x < prevPoint.x && point.x < nextPoint.x) {\n                  if (removeCallback(points[index], index)) continue;\n                }\n              }\n            }\n\n            index++;\n          }\n        };\n\n        GeometryUtils.removeOneLinePoints = function (points, removeCallback, checkCallback) {\n          if (checkCallback === void 0) {\n            checkCallback = function checkCallback(pt) {\n              return pt !== undefined;\n            };\n          }\n\n          var index = 0;\n          var point;\n\n          while (point = points[index]) {\n            if (points.length <= 2) break;\n            var nextPoint = this.getNextPoint(points, index, true, checkCallback);\n            var prevPoint = this.getNextPoint(points, index, false, checkCallback);\n\n            if (prevPoint && nextPoint) {\n              if (point.x == prevPoint.x && point.x == nextPoint.x || point.y == prevPoint.y && point.y == nextPoint.y) {\n                if (removeCallback(points[index], index)) continue;\n              }\n\n              var tg = (nextPoint.y - prevPoint.y) / (nextPoint.x - prevPoint.x);\n\n              if (nextPoint.y - points[index].y == (nextPoint.x - points[index].x) * tg) {\n                if (removeCallback(points[index], index)) continue;\n              }\n            }\n\n            index++;\n          }\n        };\n\n        GeometryUtils.removeDuplicatedPoints = function (points, removeCallback, checkCallback) {\n          if (checkCallback === void 0) {\n            checkCallback = function checkCallback(pt) {\n              return pt !== undefined;\n            };\n          }\n\n          var index = 0;\n          var point;\n\n          while (point = points[index]) {\n            if (points.length <= 2) break;\n            var nextPoint = this.getNextPoint(points, index, true, checkCallback);\n\n            if (nextPoint) {\n              if (point.x == nextPoint.x && point.y == nextPoint.y) {\n                var indexToRemove = index + 1;\n                if (indexToRemove === points.length - 1) indexToRemove--;\n                if (removeCallback(points[indexToRemove], indexToRemove)) continue;\n              }\n            }\n\n            index++;\n          }\n        };\n\n        GeometryUtils.getNextPoint = function (points, index, direction, checkCallback) {\n          var result;\n          var newIndex = index + (direction ? 1 : -1);\n\n          while (result = points[newIndex]) {\n            if (checkCallback(result)) return result;\n            newIndex = newIndex + (direction ? 1 : -1);\n          }\n        };\n\n        GeometryUtils.getDistance = function (a, b) {\n          return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n        };\n\n        GeometryUtils.getPathLength = function (points) {\n          var length = 0;\n          var prevPt;\n          points.forEach(function (pt) {\n            if (prevPt !== undefined) {\n              var lineLength = GeometryUtils.getDistance(pt, prevPt);\n              length += lineLength;\n            }\n\n            prevPt = pt;\n          });\n          return length;\n        };\n\n        GeometryUtils.getPathPointByPosition = function (points, relativePosition) {\n          if (!points.length) throw new Error(\"Invalid points\");\n          if (0 > relativePosition || relativePosition > 1) throw new Error(\"Invalid relative position\");\n          var length = this.getPathLength(points);\n          if (points.length <= 2 && length === 0) return points[0];\n          var targetLength = length * relativePosition;\n          var currentLength = 0;\n\n          for (var i = 1; i < points.length; i++) {\n            var lineLength = GeometryUtils.getDistance(points[i], points[i - 1]);\n\n            if (currentLength + lineLength >= targetLength) {\n              var delta = targetLength - currentLength;\n              var cos = (points[i].x - points[i - 1].x) / lineLength;\n              var sin = (points[i].y - points[i - 1].y) / lineLength;\n              return new Point(points[i - 1].x + cos * delta, points[i - 1].y + sin * delta);\n            }\n\n            currentLength += lineLength;\n          }\n\n          ;\n          return points[points.length - 1];\n        };\n\n        GeometryUtils.getLineAngle = function (beginPoint, endPoint) {\n          return Math.atan2(endPoint.y - beginPoint.y, endPoint.x - beginPoint.x);\n        };\n\n        GeometryUtils.getTriangleBeginAngle = function (beginPoint, endPoint, point) {\n          var lineAngle = this.getLineAngle(beginPoint, endPoint);\n          var beginPointAngle = this.getLineAngle(beginPoint, point);\n          return Math.abs(beginPointAngle - lineAngle);\n        };\n\n        GeometryUtils.getTriangleEndAngle = function (beginPoint, endPoint, point) {\n          var lineAngle = this.getLineAngle(beginPoint, endPoint);\n          var endPointAngle = this.getLineAngle(point, endPoint);\n          return Math.abs(lineAngle - endPointAngle);\n        };\n\n        GeometryUtils.getPathPointByPoint = function (points, point) {\n          if (!points.length) throw new Error(\"Invalid points\");\n          if (points.length === 1) return points[0];\n          var distance = Number.MAX_VALUE;\n          var result;\n\n          for (var i = 1; i < points.length; i++) {\n            var beginPoint = points[i - 1];\n            var endPoint = points[i];\n\n            if (point.equals(beginPoint)) {\n              result = beginPoint.clone();\n              break;\n            }\n\n            if (point.equals(endPoint)) {\n              result = endPoint.clone();\n              break;\n            }\n\n            var beginAngle = this.getTriangleBeginAngle(beginPoint, endPoint, point);\n            var endAngle = this.getTriangleEndAngle(beginPoint, endPoint, point);\n            var beginDistance = GeometryUtils.getDistance(point, beginPoint);\n            var endDistance = GeometryUtils.getDistance(point, endPoint);\n            var orthOffset = beginDistance * Math.sin(beginAngle);\n            var currentDistance = void 0;\n            if (Math.PI / 2 <= beginAngle && beginAngle <= Math.PI * 3 / 2) currentDistance = beginDistance;else if (Math.PI / 2 <= endAngle && endAngle <= Math.PI * 3 / 2) currentDistance = endDistance;else currentDistance = Math.abs(orthOffset);\n\n            if (currentDistance < distance) {\n              distance = currentDistance;\n              if (Math.PI / 2 <= beginAngle && beginAngle <= Math.PI * 3 / 2) result = beginPoint.clone();else if (Math.PI / 2 <= endAngle && endAngle <= Math.PI * 3 / 2) result = endPoint.clone();else {\n                var round = Math.fround || Math.round;\n                var lineAngle = this.getLineAngle(beginPoint, endPoint);\n                var offsetX = round(Math.abs(orthOffset * Math.sin(lineAngle)));\n                var offsetY = round(Math.abs(orthOffset * Math.cos(lineAngle)));\n                var isAbove = point.y - beginPoint.y < round((point.x - beginPoint.x) * Math.tan(lineAngle));\n\n                if (0 <= lineAngle && lineAngle <= Math.PI / 2) {\n                  offsetX *= isAbove ? -1 : 1;\n                  offsetY *= isAbove ? 1 : -1;\n                } else if (Math.PI / 2 <= lineAngle && lineAngle <= Math.PI) {\n                  offsetX *= isAbove ? 1 : -1;\n                  offsetY *= isAbove ? 1 : -1;\n                } else if (0 >= lineAngle && lineAngle >= -Math.PI / 2) {\n                  offsetX *= isAbove ? 1 : -1;\n                  offsetY *= isAbove ? 1 : -1;\n                } else if (-Math.PI / 2 >= lineAngle && lineAngle >= -Math.PI) {\n                  offsetX *= isAbove ? -1 : 1;\n                  offsetY *= isAbove ? 1 : -1;\n                }\n\n                result = point.offset(offsetX, offsetY);\n              }\n            }\n          }\n\n          ;\n          return result;\n        };\n\n        GeometryUtils.getPathPositionByPoint = function (points, point, maxPositionCount) {\n          if (maxPositionCount === void 0) {\n            maxPositionCount = 100;\n          }\n\n          point = this.getPathPointByPoint(points, point);\n          var length = this.getPathLength(points);\n          var currentLength = 0;\n\n          for (var i = 1; i < points.length; i++) {\n            var beginPoint = points[i - 1];\n            var endPoint = points[i];\n            var lineLength = GeometryUtils.getDistance(endPoint, beginPoint);\n            var angle = Math.atan((endPoint.y - beginPoint.y) / (endPoint.x - beginPoint.x));\n            var round = Math.fround || Math.round;\n\n            if (point.x === endPoint.x && point.x === beginPoint.x || point.y === endPoint.y && point.y === beginPoint.y || round(point.y - beginPoint.y) === round((point.x - beginPoint.x) * Math.tan(angle))) {\n              if (Math.sin(angle) !== 0) currentLength += Math.abs((point.y - beginPoint.y) / Math.sin(angle));else currentLength += Math.abs(point.x - beginPoint.x);\n              return Math.round(currentLength * maxPositionCount / length) / maxPositionCount;\n            }\n\n            currentLength += lineLength;\n          }\n\n          ;\n          return 1;\n        };\n\n        GeometryUtils.arePointsEqual = function (points1, points2) {\n          var count1 = points1.length;\n          var count2 = points2.length;\n          if (count1 != count2) return false;\n\n          for (var i = 0; i < count1; i++) {\n            if (!points1[i].equals(points2[i])) return false;\n          }\n\n          return true;\n        };\n\n        return GeometryUtils;\n      }();\n\n      exports.GeometryUtils = GeometryUtils;\n      /***/\n    },\n    /* 1 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeCategories =\n      /** @class */\n      function () {\n        function ShapeCategories() {}\n\n        ShapeCategories.General = \"general\";\n        ShapeCategories.Flowchart = \"flowchart\";\n        ShapeCategories.OrgChart = \"orgChart\";\n        ShapeCategories.Containers = \"containers\";\n        ShapeCategories.Custom = \"custom\";\n        return ShapeCategories;\n      }();\n\n      exports.ShapeCategories = ShapeCategories;\n\n      var ShapeTypes =\n      /** @class */\n      function () {\n        function ShapeTypes() {} // Standard\n\n\n        ShapeTypes.Text = \"text\";\n        ShapeTypes.Rectangle = \"rectangle\";\n        ShapeTypes.Ellipse = \"ellipse\";\n        ShapeTypes.Cross = \"cross\";\n        ShapeTypes.Triangle = \"triangle\";\n        ShapeTypes.Diamond = \"diamond\";\n        ShapeTypes.Heart = \"heart\";\n        ShapeTypes.Pentagon = \"pentagon\";\n        ShapeTypes.Hexagon = \"hexagon\";\n        ShapeTypes.Octagon = \"octagon\";\n        ShapeTypes.Star = \"star\";\n        ShapeTypes.ArrowLeft = \"arrowLeft\";\n        ShapeTypes.ArrowTop = \"arrowTop\";\n        ShapeTypes.ArrowRight = \"arrowRight\";\n        ShapeTypes.ArrowBottom = \"arrowBottom\";\n        ShapeTypes.ArrowNorthSouth = \"arrowNorthSouth\";\n        ShapeTypes.ArrowEastWest = \"arrowEastWest\"; // Flowchart\n\n        ShapeTypes.Process = \"process\";\n        ShapeTypes.Decision = \"decision\";\n        ShapeTypes.Terminator = \"terminator\";\n        ShapeTypes.PredefinedProcess = \"predefinedProcess\";\n        ShapeTypes.Document = \"document\";\n        ShapeTypes.MultipleDocuments = \"multipleDocuments\";\n        ShapeTypes.ManualInput = \"manualInput\";\n        ShapeTypes.Preparation = \"preparation\";\n        ShapeTypes.Data = \"data\";\n        ShapeTypes.Database = \"database\";\n        ShapeTypes.HardDisk = \"hardDisk\";\n        ShapeTypes.InternalStorage = \"internalStorage\";\n        ShapeTypes.PaperTape = \"paperTape\";\n        ShapeTypes.ManualOperation = \"manualOperation\";\n        ShapeTypes.Delay = \"delay\";\n        ShapeTypes.StoredData = \"storedData\";\n        ShapeTypes.Display = \"display\";\n        ShapeTypes.Merge = \"merge\";\n        ShapeTypes.Or = \"or\";\n        ShapeTypes.SummingJunction = \"summingJunction\"; // Containers\n\n        ShapeTypes.VerticalContainer = \"verticalContainer\";\n        ShapeTypes.HorizontalContainer = \"horizontalContainer\"; // Shapes with images\n\n        ShapeTypes.CardWithImageOnLeft = \"cardWithImageOnLeft\";\n        ShapeTypes.CardWithImageOnTop = \"cardWithImageOnTop\";\n        ShapeTypes.CardWithImageOnRight = \"cardWithImageOnRight\";\n        return ShapeTypes;\n      }();\n\n      exports.ShapeTypes = ShapeTypes;\n      var ShapeType;\n\n      (function (ShapeType) {\n        ShapeType[ShapeType[\"text\"] = 0] = \"text\";\n        ShapeType[ShapeType[\"rectangle\"] = 1] = \"rectangle\";\n        ShapeType[ShapeType[\"ellipse\"] = 2] = \"ellipse\";\n        ShapeType[ShapeType[\"cross\"] = 3] = \"cross\";\n        ShapeType[ShapeType[\"triangle\"] = 4] = \"triangle\";\n        ShapeType[ShapeType[\"diamond\"] = 5] = \"diamond\";\n        ShapeType[ShapeType[\"heart\"] = 6] = \"heart\";\n        ShapeType[ShapeType[\"pentagon\"] = 7] = \"pentagon\";\n        ShapeType[ShapeType[\"hexagon\"] = 8] = \"hexagon\";\n        ShapeType[ShapeType[\"octagon\"] = 9] = \"octagon\";\n        ShapeType[ShapeType[\"star\"] = 10] = \"star\";\n        ShapeType[ShapeType[\"arrowLeft\"] = 11] = \"arrowLeft\";\n        ShapeType[ShapeType[\"arrowTop\"] = 12] = \"arrowTop\";\n        ShapeType[ShapeType[\"arrowRight\"] = 13] = \"arrowRight\";\n        ShapeType[ShapeType[\"arrowBottom\"] = 14] = \"arrowBottom\";\n        ShapeType[ShapeType[\"arrowNorthSouth\"] = 15] = \"arrowNorthSouth\";\n        ShapeType[ShapeType[\"arrowEastWest\"] = 16] = \"arrowEastWest\"; // Flowchart\n\n        ShapeType[ShapeType[\"process\"] = 17] = \"process\";\n        ShapeType[ShapeType[\"decision\"] = 18] = \"decision\";\n        ShapeType[ShapeType[\"terminator\"] = 19] = \"terminator\";\n        ShapeType[ShapeType[\"predefinedProcess\"] = 20] = \"predefinedProcess\";\n        ShapeType[ShapeType[\"document\"] = 21] = \"document\";\n        ShapeType[ShapeType[\"multipleDocuments\"] = 22] = \"multipleDocuments\";\n        ShapeType[ShapeType[\"manualInput\"] = 23] = \"manualInput\";\n        ShapeType[ShapeType[\"preparation\"] = 24] = \"preparation\";\n        ShapeType[ShapeType[\"data\"] = 25] = \"data\";\n        ShapeType[ShapeType[\"database\"] = 26] = \"database\";\n        ShapeType[ShapeType[\"hardDisk\"] = 27] = \"hardDisk\";\n        ShapeType[ShapeType[\"internalStorage\"] = 28] = \"internalStorage\";\n        ShapeType[ShapeType[\"paperTape\"] = 29] = \"paperTape\";\n        ShapeType[ShapeType[\"manualOperation\"] = 30] = \"manualOperation\";\n        ShapeType[ShapeType[\"delay\"] = 31] = \"delay\";\n        ShapeType[ShapeType[\"storedData\"] = 32] = \"storedData\";\n        ShapeType[ShapeType[\"display\"] = 33] = \"display\";\n        ShapeType[ShapeType[\"merge\"] = 34] = \"merge\";\n        ShapeType[ShapeType[\"or\"] = 35] = \"or\";\n        ShapeType[ShapeType[\"summingJunction\"] = 36] = \"summingJunction\"; // Containers\n\n        ShapeType[ShapeType[\"verticalContainer\"] = 37] = \"verticalContainer\";\n        ShapeType[ShapeType[\"horizontalContainer\"] = 38] = \"horizontalContainer\"; // Shapes with images\n\n        ShapeType[ShapeType[\"cardWithImageOnLeft\"] = 39] = \"cardWithImageOnLeft\";\n        ShapeType[ShapeType[\"cardWithImageOnTop\"] = 40] = \"cardWithImageOnTop\";\n        ShapeType[ShapeType[\"cardWithImageOnRight\"] = 41] = \"cardWithImageOnRight\";\n      })(ShapeType = exports.ShapeType || (exports.ShapeType = {}));\n      /***/\n\n    },\n    /* 2 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics = function extendStatics(d, b) {\n          _extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var PathPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitive, _super);\n\n        function PathPrimitive(commands, style, className, clipPathId, onApplyProperties) {\n          var _this = _super.call(this, style, className, clipPathId, onApplyProperties) || this;\n\n          _this.commands = commands;\n          return _this;\n        }\n\n        PathPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"path\");\n        };\n\n        PathPrimitive.prototype.applyElementProperties = function (element) {\n          element.setAttribute(\"d\", this.commands.map(function (c) {\n            return c.toString();\n          }).join(\" \"));\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        return PathPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.PathPrimitive = PathPrimitive;\n\n      var PathPrimitiveCommand =\n      /** @class */\n      function () {\n        function PathPrimitiveCommand() {}\n\n        PathPrimitiveCommand.prototype.getUnitVaue = function (value) {\n          return typeof value === \"number\" ? UnitConverter_1.UnitConverter.twipsToPixels(value).toString() : value;\n        };\n\n        return PathPrimitiveCommand;\n      }();\n\n      exports.PathPrimitiveCommand = PathPrimitiveCommand;\n\n      var PathPrimitiveMoveToCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveMoveToCommand, _super);\n\n        function PathPrimitiveMoveToCommand(x, y) {\n          var _this = _super.call(this) || this;\n\n          _this.x = x;\n          _this.y = y;\n          return _this;\n        }\n\n        PathPrimitiveMoveToCommand.prototype.toString = function () {\n          return \"M \" + this.getUnitVaue(this.x) + \" \" + this.getUnitVaue(this.y);\n        };\n\n        return PathPrimitiveMoveToCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveMoveToCommand = PathPrimitiveMoveToCommand;\n\n      var PathPrimitiveLineToCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveLineToCommand, _super);\n\n        function PathPrimitiveLineToCommand(x, y) {\n          var _this = _super.call(this) || this;\n\n          _this.x = x;\n          _this.y = y;\n          return _this;\n        }\n\n        PathPrimitiveLineToCommand.prototype.toString = function () {\n          return \"L \" + this.getUnitVaue(this.x) + \" \" + this.getUnitVaue(this.y);\n        };\n\n        return PathPrimitiveLineToCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveLineToCommand = PathPrimitiveLineToCommand;\n\n      var PathPrimitiveCubicCurveToCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveCubicCurveToCommand, _super);\n\n        function PathPrimitiveCubicCurveToCommand(x1, y1, x2, y2, x3, y3) {\n          var _this = _super.call(this) || this;\n\n          _this.x1 = x1;\n          _this.y1 = y1;\n          _this.x2 = x2;\n          _this.y2 = y2;\n          _this.x3 = x3;\n          _this.y3 = y3;\n          return _this;\n        }\n\n        PathPrimitiveCubicCurveToCommand.prototype.toString = function () {\n          return \"C \" + this.getUnitVaue(this.x1) + \" \" + this.getUnitVaue(this.y1) + \",\" + this.getUnitVaue(this.x2) + \" \" + this.getUnitVaue(this.y2) + \",\" + this.getUnitVaue(this.x3) + \" \" + this.getUnitVaue(this.y3);\n        };\n\n        return PathPrimitiveCubicCurveToCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveCubicCurveToCommand = PathPrimitiveCubicCurveToCommand;\n\n      var PathPrimitiveQuadraticCurveToCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveQuadraticCurveToCommand, _super);\n\n        function PathPrimitiveQuadraticCurveToCommand(x1, y1, x2, y2) {\n          var _this = _super.call(this) || this;\n\n          _this.x1 = x1;\n          _this.y1 = y1;\n          _this.x2 = x2;\n          _this.y2 = y2;\n          return _this;\n        }\n\n        PathPrimitiveQuadraticCurveToCommand.prototype.toString = function () {\n          return \"Q \" + this.getUnitVaue(this.x1) + \" \" + this.getUnitVaue(this.y1) + \",\" + this.getUnitVaue(this.x2) + \" \" + this.getUnitVaue(this.y2);\n        };\n\n        return PathPrimitiveQuadraticCurveToCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveQuadraticCurveToCommand = PathPrimitiveQuadraticCurveToCommand;\n\n      var PathPrimitiveArcToCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveArcToCommand, _super);\n\n        function PathPrimitiveArcToCommand(rx, ry, xAxisRotation, largeArcFlag, sweepFag, x, y) {\n          var _this = _super.call(this) || this;\n\n          _this.rx = rx;\n          _this.ry = ry;\n          _this.xAxisRotation = xAxisRotation;\n          _this.largeArcFlag = largeArcFlag;\n          _this.sweepFag = sweepFag;\n          _this.x = x;\n          _this.y = y;\n          return _this;\n        }\n\n        PathPrimitiveArcToCommand.prototype.toString = function () {\n          return \"A \" + this.getUnitVaue(this.rx) + \" \" + this.getUnitVaue(this.ry) + \" \" + this.getUnitVaue(this.xAxisRotation) + \" \" + (this.largeArcFlag ? \"1\" : \"0\") + \" \" + (this.sweepFag ? \"1\" : \"0\") + this.getUnitVaue(this.x) + \",\" + this.getUnitVaue(this.y);\n        };\n\n        return PathPrimitiveArcToCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveArcToCommand = PathPrimitiveArcToCommand;\n\n      var PathPrimitiveClosePathCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveClosePathCommand, _super);\n\n        function PathPrimitiveClosePathCommand() {\n          return _super.call(this) || this;\n        }\n\n        PathPrimitiveClosePathCommand.prototype.toString = function () {\n          return \"z\";\n        };\n\n        return PathPrimitiveClosePathCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveClosePathCommand = PathPrimitiveClosePathCommand;\n      /***/\n    },\n    /* 3 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics2 = function extendStatics(d, b) {\n          _extendStatics2 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics2(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics2(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem =\n      /** @class */\n      function () {\n        function HistoryItem() {\n          this.uniqueId = -1;\n        }\n\n        HistoryItem.prototype.changeModified = function () {\n          return true;\n        };\n\n        HistoryItem.prototype.getName = function () {\n          return this.constructor.name;\n        };\n\n        return HistoryItem;\n      }();\n\n      exports.HistoryItem = HistoryItem;\n\n      var CompositionHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(CompositionHistoryItem, _super);\n\n        function CompositionHistoryItem() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.historyItems = [];\n          return _this;\n        }\n\n        CompositionHistoryItem.prototype.changeModified = function () {\n          var item;\n\n          for (var i = 0; item = this.historyItems[i]; i++) {\n            if (item.changeModified()) return true;\n          }\n\n          return false;\n        };\n\n        CompositionHistoryItem.prototype.redo = function (manipulator) {\n          var item;\n\n          for (var i = 0; item = this.historyItems[i]; i++) {\n            item.redo(manipulator);\n          }\n        };\n\n        CompositionHistoryItem.prototype.undo = function (manipulator) {\n          var item;\n\n          for (var i = this.historyItems.length - 1; item = this.historyItems[i]; i--) {\n            item.undo(manipulator);\n          }\n        };\n\n        CompositionHistoryItem.prototype.add = function (historyItem) {\n          if (historyItem == null) throw new Error(\"cannot be null\");\n          this.historyItems.push(historyItem);\n        };\n\n        return CompositionHistoryItem;\n      }(HistoryItem);\n\n      exports.CompositionHistoryItem = CompositionHistoryItem;\n      /***/\n    },\n    /* 4 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Style_1 = __webpack_require__(27);\n\n      var ConnectionPointSide;\n\n      (function (ConnectionPointSide) {\n        ConnectionPointSide[ConnectionPointSide[\"Undefined\"] = -1] = \"Undefined\";\n        ConnectionPointSide[ConnectionPointSide[\"North\"] = 0] = \"North\";\n        ConnectionPointSide[ConnectionPointSide[\"East\"] = 1] = \"East\";\n        ConnectionPointSide[ConnectionPointSide[\"South\"] = 2] = \"South\";\n        ConnectionPointSide[ConnectionPointSide[\"West\"] = 3] = \"West\";\n      })(ConnectionPointSide = exports.ConnectionPointSide || (exports.ConnectionPointSide = {}));\n\n      ;\n      exports.DEFAULT_ZINDEX = 0;\n\n      var DiagramItem =\n      /** @class */\n      function () {\n        function DiagramItem() {\n          this.key = undefined;\n          this.dataKey = undefined;\n          this.attachedConnectors = [];\n          this.zIndex = exports.DEFAULT_ZINDEX;\n          this.locked = false;\n          this.container = undefined;\n          this.containerLocked = false;\n          this.style = new Style_1.Style();\n          this.styleText = new Style_1.StyleText();\n        }\n\n        DiagramItem.prototype.assign = function (item) {\n          item.key = this.key;\n          item.dataKey = this.dataKey;\n          item.locked = this.locked;\n          item.attachedConnectors = this.attachedConnectors.slice();\n          item.style = this.style.clone();\n          item.styleText = this.styleText.clone();\n          item.zIndex = this.zIndex;\n          item.container = this.container;\n          item.containerLocked = this.containerLocked;\n        };\n\n        DiagramItem.prototype.invalidatePrimitives = function () {\n          this.primitives && this.primitives.forEach(function (element) {\n            element.dispose();\n          });\n          delete this.primitives;\n          delete this.selectorPrimitives;\n        };\n\n        DiagramItem.prototype.getPrimitives = function () {\n          if (!this.primitives) this.primitives = this.createPrimitives();\n          return this.primitives;\n        };\n\n        DiagramItem.prototype.getSelectorPrimitives = function () {\n          if (!this.selectorPrimitives) this.selectorPrimitives = this.createSelectorPrimitives();\n          return this.selectorPrimitives;\n        };\n\n        DiagramItem.prototype.getConnectionPointPosition = function (index, targetPoint) {\n          return this.getConnectionPoint(index, targetPoint).toPoint();\n        };\n\n        DiagramItem.prototype.getConnectionPoint = function (index, targetPoint) {\n          if (index < 0 && targetPoint) index = this.getNearestConnectionPoint(targetPoint);\n          var connectionPoints = this.getConnectionPoints();\n          return connectionPoints[index] || connectionPoints[0];\n        };\n\n        DiagramItem.prototype.getNearestConnectionPoint = function (targetPoint) {\n          var distance = Number.MAX_VALUE;\n          var result;\n          this.getConnectionPoints().forEach(function (pt, index) {\n            var ptDistance = Utils_1.GeometryUtils.getDistance(pt, targetPoint);\n\n            if (ptDistance < distance) {\n              distance = ptDistance;\n              result = index;\n            }\n          });\n          return result;\n        };\n\n        DiagramItem.prototype.getConnectionPointIndex = function (side) {\n          var points = this.getConnectionPoints();\n          return points.reduce(function (prevIndex, pt, index) {\n            if (side === ConnectionPointSide.North && pt.y < points[prevIndex].y) return index;\n            if (side === ConnectionPointSide.South && pt.y > points[prevIndex].y) return index;\n            if (side === ConnectionPointSide.West && pt.x < points[prevIndex].x) return index;\n            if (side === ConnectionPointSide.East && pt.x > points[prevIndex].x) return index;\n            return prevIndex;\n          }, 0);\n        };\n\n        DiagramItem.prototype.getConnectionPointSideByIndex = function (index, targetPoint) {\n          var point = this.getConnectionPoint(index, targetPoint);\n          return this.getConnectionPointSide(point, targetPoint);\n        };\n\n        DiagramItem.prototype.getConnectionPointIndexForSide = function (side) {\n          return side;\n        };\n\n        Object.defineProperty(DiagramItem.prototype, \"enableText\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramItem.prototype, \"allowEditText\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramItem.prototype, \"enableChildren\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramItem.prototype, \"isLocked\", {\n          get: function get() {\n            return this.locked || this.containerLocked;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        DiagramItem.prototype.intersectedByRect = function (rect) {\n          return this.rectangle.intersect(rect);\n        };\n\n        return DiagramItem;\n      }();\n\n      exports.DiagramItem = DiagramItem;\n      /***/\n    },\n    /* 5 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics3 = function extendStatics(d, b) {\n          _extendStatics3 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics3(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics3(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var LinePrimitive_1 = __webpack_require__(80);\n\n      var ConnectorPointsCalculator_1 = __webpack_require__(143);\n\n      var ConnectorPointsOrthogonalCalculator_1 = __webpack_require__(144);\n\n      var ConnectorProperties_1 = __webpack_require__(24);\n\n      var ConnectorTexts_1 = __webpack_require__(150);\n\n      var TextPrimitive_1 = __webpack_require__(64);\n\n      var Event_1 = __webpack_require__(10);\n\n      var Utils_2 = __webpack_require__(15);\n\n      var CanvasManagerBase_1 = __webpack_require__(33);\n\n      var NativeItem_1 = __webpack_require__(63);\n\n      var ConnectorPosition;\n\n      (function (ConnectorPosition) {\n        ConnectorPosition[ConnectorPosition[\"Begin\"] = 0] = \"Begin\";\n        ConnectorPosition[ConnectorPosition[\"End\"] = 1] = \"End\";\n      })(ConnectorPosition = exports.ConnectorPosition || (exports.ConnectorPosition = {}));\n\n      exports.CONNECTOR_DEFAULT_TEXT_POSITION = 0.5;\n\n      var Connector =\n      /** @class */\n      function (_super) {\n        __extends(Connector, _super);\n\n        function Connector(points) {\n          var _this = _super.call(this) || this;\n\n          _this.beginConnectionPointIndex = -1;\n          _this.endConnectionPointIndex = -1;\n          _this.properties = new ConnectorProperties_1.ConnectorProperties();\n          _this.points = points.map(function (pt) {\n            return pt.clone();\n          });\n          if (points.length < 2) throw Error(\"Points count should be greater than 1\");\n          _this.texts = new ConnectorTexts_1.ConnectorTexts();\n          return _this;\n        }\n\n        Connector.prototype.assign = function (item) {\n          _super.prototype.assign.call(this, item);\n\n          item.beginItem = this.beginItem;\n          item.beginConnectionPointIndex = this.beginConnectionPointIndex;\n          item.endItem = this.endItem;\n          item.endConnectionPointIndex = this.endConnectionPointIndex;\n          item.properties = this.properties.clone();\n          item.texts = this.texts.clone();\n        };\n\n        Connector.prototype.clone = function () {\n          var clone = new Connector(this.points);\n          this.assign(clone);\n          return clone;\n        };\n\n        Connector.prototype.getRenderPoints = function (keepSkipped) {\n          if (keepSkipped === void 0) {\n            keepSkipped = false;\n          }\n\n          if (this.renderPoints === undefined) {\n            this.renderPoints = this.getCalculator().getPoints();\n            this.renderPointsWithoutSkipped = this.renderPoints.filter(function (pt) {\n              return !pt.skipped;\n            });\n          }\n\n          return keepSkipped ? this.renderPoints : this.renderPointsWithoutSkipped;\n        };\n\n        Connector.prototype.getText = function (position) {\n          if (position === void 0) {\n            position = exports.CONNECTOR_DEFAULT_TEXT_POSITION;\n          }\n\n          var textObj = this.texts.get(position);\n          return textObj ? textObj.value : \"\";\n        };\n\n        Connector.prototype.setText = function (text, position) {\n          if (position === void 0) {\n            position = exports.CONNECTOR_DEFAULT_TEXT_POSITION;\n          }\n\n          if (!text || text === \"\") this.texts.remove(position);else this.texts.set(position, new ConnectorTexts_1.ConnectorText(position, text));\n        };\n\n        Connector.prototype.getTextPoint = function (position) {\n          var points = this.getRenderPoints();\n          return Utils_1.GeometryUtils.getPathPointByPosition(points, position);\n        };\n\n        Connector.prototype.getTextPositionByPoint = function (point) {\n          var points = this.getRenderPoints();\n          var length = Utils_1.GeometryUtils.getPathLength(points);\n          var pos = Utils_1.GeometryUtils.getPathPositionByPoint(points, point);\n          var minTextHeight = UnitConverter_1.UnitConverter.pointsToTwips(parseInt(this.styleText[\"font-size\"]));\n          if (minTextHeight > pos * length) return minTextHeight / length;\n          if (minTextHeight > length - pos * length) return (length - minTextHeight) / length;\n          return pos;\n        };\n\n        Connector.prototype.getTextRectangle = function (position) {\n          return new Utils_1.Rectangle(this.getTextPoint(position), new Utils_1.Size(0, 0));\n        };\n\n        Connector.prototype.getCalculator = function () {\n          return this.properties.lineOption === ConnectorProperties_1.ConnectorLineOption.Straight ? new ConnectorPointsCalculator_1.ConnectorPointsCalculator(this) : new ConnectorPointsOrthogonalCalculator_1.ConnectorPointsOrthogonalCalculator(this);\n        };\n\n        Connector.prototype.invalidateRenderPoints = function () {\n          delete this.renderPoints;\n          delete this.renderPointsWithoutSkipped;\n          this.invalidatePrimitives();\n        };\n\n        Connector.prototype.createPrimitives = function () {\n          var _this = this;\n\n          var result = [];\n          var points = this.getRenderPoints();\n          points.forEach(function (pt, index) {\n            if (index > 0) result.push(_this.createSegmentPrimitive(points[index - 1], pt, _this.style, null));\n          });\n\n          if (points.length > 1) {\n            if (this.properties.startLineEnding !== ConnectorProperties_1.ConnectorLineEnding.None) result = result.concat(this.createLineEndingPrimitives(points[0], points[1]));\n            if (this.properties.endLineEnding !== ConnectorProperties_1.ConnectorLineEnding.None) result = result.concat(this.createLineEndingPrimitives(points[points.length - 1], points[points.length - 2]));\n          }\n\n          return result.concat(this.createTextPrimitives());\n        };\n\n        Connector.prototype.createSelectorPrimitives = function () {\n          var _this = this;\n\n          var result = [];\n          var points = this.getRenderPoints();\n          points.forEach(function (pt, index) {\n            if (index > 0) result.push(_this.createSegmentPrimitive(points[index - 1], pt, null, \"selector\"));\n          });\n          return result;\n        };\n\n        Connector.prototype.createTextPrimitives = function () {\n          var _this = this;\n\n          if (!this.enableText) return [];\n          var result = [];\n          this.texts.forEach(function (textObj) {\n            var text = _this.getText(textObj.position);\n\n            if (text && text !== \"\") {\n              var pt = _this.getTextPoint(textObj.position);\n\n              result = result.concat([new TextPrimitive_1.TextPrimitive(pt.x, pt.y, text, undefined, _this.styleText, true, null, CanvasManagerBase_1.PAGE_BG_TEXTFLOOR_FILTER_ID, false, function (el) {\n                Utils_2.RenderUtils.setElementEventData(el, Event_1.MouseEventElementType.ConnectorText, _this.key, textObj.position);\n              })]);\n            }\n          });\n          return result;\n        };\n\n        Connector.prototype.createSegmentPrimitive = function (point1, point2, style, className) {\n          return new LinePrimitive_1.LinePrimitive(point1.x, point1.y, point2.x, point2.y, style, className);\n        };\n\n        Connector.prototype.createLineEndingPrimitives = function (point, directionPoint) {\n          var arrowHeight = Connector.arrowHeight;\n\n          if (point.x === directionPoint.x) {\n            var distance = Math.abs(point.y - directionPoint.y);\n            if (distance < arrowHeight) arrowHeight = distance;\n          }\n\n          if (point.y === directionPoint.y) {\n            var distance = Math.abs(point.x - directionPoint.x);\n            if (distance < arrowHeight) arrowHeight = distance;\n          }\n\n          var arrowPoints = Utils_1.GeometryUtils.getArrowPoints(point, directionPoint, arrowHeight, Connector.arrowWidth);\n          return [new LinePrimitive_1.LinePrimitive(arrowPoints.point1.x, arrowPoints.point1.y, point.x, point.y, this.style), new LinePrimitive_1.LinePrimitive(arrowPoints.point2.x, arrowPoints.point2.y, point.x, point.y, this.style)];\n        };\n\n        Connector.prototype.getExtremeItem = function (position) {\n          if (position === ConnectorPosition.Begin) return this.beginItem;\n          if (position === ConnectorPosition.End) return this.endItem;\n          return null;\n        };\n\n        Connector.prototype.getExtremeConnectionPointIndex = function (position) {\n          if (position === ConnectorPosition.Begin) return this.beginConnectionPointIndex;\n          if (position === ConnectorPosition.End) return this.endConnectionPointIndex;\n          return -1;\n        };\n\n        Object.defineProperty(Connector.prototype, \"rectangle\", {\n          get: function get() {\n            var points = this.getRenderPoints();\n            var xarr = points.map(function (p) {\n              return p.x;\n            });\n            var yarr = points.map(function (p) {\n              return p.y;\n            });\n            var minX = xarr.reduce(function (prev, cur) {\n              return Math.min(prev, cur);\n            }, Number.MAX_VALUE);\n            var maxX = xarr.reduce(function (prev, cur) {\n              return Math.max(prev, cur);\n            }, -Number.MAX_VALUE);\n            var minY = yarr.reduce(function (prev, cur) {\n              return Math.min(prev, cur);\n            }, Number.MAX_VALUE);\n            var maxY = yarr.reduce(function (prev, cur) {\n              return Math.max(prev, cur);\n            }, -Number.MAX_VALUE);\n            return Utils_1.Rectangle.create(minX, minY, maxX - minX, maxY - minY);\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Connector.prototype.getMinX = function () {\n          var points = this.getRenderPoints();\n          var xarr = points.map(function (p) {\n            return p.x;\n          });\n          return xarr.reduce(function (prev, cur) {\n            return Math.min(prev, cur);\n          }, Number.MAX_VALUE);\n        };\n\n        Connector.prototype.getMinY = function () {\n          var points = this.getRenderPoints();\n          var yarr = points.map(function (p) {\n            return p.y;\n          });\n          return yarr.reduce(function (prev, cur) {\n            return Math.min(prev, cur);\n          }, Number.MAX_VALUE);\n        };\n\n        Connector.prototype.getConnectionPoints = function () {\n          return [];\n        };\n\n        Connector.prototype.getConnectionPointsForSelection = function () {\n          return [];\n        };\n\n        Connector.prototype.getConnectionPointSide = function (point, targetPoint) {\n          return DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        Connector.prototype.getConnectionPointForSelectionSide = function (point) {\n          return DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        Connector.prototype.getSegments = function () {\n          var points = this.getRenderPoints();\n          var result = [];\n          points.forEach(function (pt, index) {\n            if (index > 0) result.push(Utils_1.Segment.createByPoints(points[index - 1], pt));\n          });\n          return result;\n        };\n\n        Connector.prototype.intersectedByRect = function (rect) {\n          var result = false;\n          this.getSegments().forEach(function (s) {\n            if (s.intersectRect(rect)) {\n              result = true;\n              return;\n            }\n          });\n          return result;\n        };\n\n        Connector.prototype.toNative = function () {\n          var item = new NativeItem_1.NativeConnector(this.key, this.dataKey);\n          item.fromKey = this.beginItem && this.beginItem.dataKey;\n          item.toKey = this.endItem && this.endItem.dataKey;\n          item.texts = this.texts.map(function (t) {\n            return t;\n          }).sort(function (a, b) {\n            return a.position - b.position;\n          }).map(function (a) {\n            return a.value;\n          });\n          return item;\n        };\n\n        Connector.arrowHeight = UnitConverter_1.UnitConverter.pixelsToTwips(8);\n        Connector.arrowWidth = UnitConverter_1.UnitConverter.pixelsToTwips(2);\n        Connector.minOffset = UnitConverter_1.UnitConverter.pixelsToTwips(18);\n        Connector.minTextHeight = UnitConverter_1.UnitConverter.pixelsToTwips(12);\n        return Connector;\n      }(DiagramItem_1.DiagramItem);\n\n      exports.Connector = Connector;\n      /***/\n    },\n    /* 6 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MoveShapeHistoryItem_1 = __webpack_require__(131);\n\n      var AddConnectionHistoryItem_1 = __webpack_require__(37);\n\n      var MoveConnectorPointHistoryItem_1 = __webpack_require__(50);\n\n      var ModelResizeHistoryItem_1 = __webpack_require__(151);\n\n      var UpdatePositionsOnPageResizeHistoryItem_1 = __webpack_require__(152);\n\n      var Model_1 = __webpack_require__(19);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var DeleteConnectorPointHistoryItem_1 = __webpack_require__(153);\n\n      var ResizeShapeHistoryItem_1 = __webpack_require__(154);\n\n      var DeleteConnectionHistoryItem_1 = __webpack_require__(90);\n\n      var DeleteShapeHistoryItem_1 = __webpack_require__(91);\n\n      var DeleteConnectorHistoryItem_1 = __webpack_require__(155);\n\n      var SetSelectionHistoryItem_1 = __webpack_require__(44);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var ConnectorProperties_1 = __webpack_require__(24);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var AddShapeHistoryItem_1 = __webpack_require__(51);\n\n      var AddConnectorHistoryItem_1 = __webpack_require__(52);\n\n      var Graph_1 = __webpack_require__(53);\n\n      var Base_1 = __webpack_require__(17);\n\n      var InsertToContainerHistoryItem_1 = __webpack_require__(192);\n\n      var RemoveFromContainerHistoryItem_1 = __webpack_require__(193);\n\n      var ChangeShapeParametersHistoryItem_1 = __webpack_require__(102);\n\n      var ChangeStyleHistoryItem_1 = __webpack_require__(46);\n\n      var ChangeStyleTextHistoryItem_1 = __webpack_require__(36);\n\n      var ChangeConnectorTextHistoryItem_1 = __webpack_require__(54);\n\n      var ChangeConnectorPropertyHistoryItem_1 = __webpack_require__(55);\n\n      var ChangeLockedHistoryItem_1 = __webpack_require__(104);\n\n      var ChangeContainerLockedHistoryItem_1 = __webpack_require__(194);\n\n      var GraphInfo_1 = __webpack_require__(195);\n\n      var Structures_1 = __webpack_require__(31);\n\n      var ModelUtils =\n      /** @class */\n      function () {\n        function ModelUtils() {}\n\n        ModelUtils.setShapePosition = function (history, model, shape, newPosition) {\n          if (!shape.position.equals(newPosition)) history.addAndRedo(new MoveShapeHistoryItem_1.MoveShapeHistoryItem(shape.key, newPosition));\n        };\n\n        ModelUtils.setShapeSize = function (history, model, shape, newPosition, newSize) {\n          if (!shape.size.equals(newSize) || !shape.position.equals(newPosition)) history.addAndRedo(new ResizeShapeHistoryItem_1.ResizeShapeHistoryItem(shape.key, newPosition, newSize));\n        };\n\n        ModelUtils.setConnectorPoint = function (history, model, connector, pointIndex, newPosition) {\n          if (!connector.points[pointIndex].equals(newPosition)) history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(connector.key, pointIndex, newPosition));\n        };\n\n        ModelUtils.updateConnectorAttachedPoints = function (history, model, connector) {\n          history.beginTransaction();\n          var beginContainer = connector.beginItem && model.findItemCollapsedContainer(connector.beginItem);\n          var beginAttachedToContainer = beginContainer && (!connector.endItem || !model.isContainerItem(beginContainer, connector.endItem));\n          var endContainer = connector.endItem && model.findItemCollapsedContainer(connector.endItem);\n          var endAttachedToContainer = endContainer && (!connector.beginItem || !model.isContainerItem(endContainer, connector.beginItem));\n          if (beginAttachedToContainer) this.updateConnectorBeginPoint(history, connector, beginContainer, endAttachedToContainer && endContainer || connector.endItem, function (index) {\n            return beginContainer.getConnectionPointIndexForItem(connector.beginItem, index);\n          });else this.updateConnectorBeginPoint(history, connector, connector.beginItem, endAttachedToContainer && endContainer || connector.endItem);\n          if (endAttachedToContainer) this.updateConnectorEndPoint(history, connector, endContainer, function (index) {\n            return endContainer.getConnectionPointIndexForItem(connector.beginItem, index);\n          });else this.updateConnectorEndPoint(history, connector, connector.endItem);\n          history.endTransaction();\n        };\n\n        ModelUtils.updateConnectorBeginPoint = function (history, connector, beginItem, endItem, getConnectionPointIndex) {\n          if (beginItem) {\n            var connectionPointIndex = getConnectionPointIndex !== undefined ? getConnectionPointIndex(connector.beginConnectionPointIndex) : connector.beginConnectionPointIndex;\n            var targetPoint = connector.points[1];\n\n            if (endItem && connector.points.length === 2) {\n              if (connector.endConnectionPointIndex !== -1) targetPoint = endItem.getConnectionPointPosition(connector.endConnectionPointIndex, Utils_1.Point.empty());else targetPoint = endItem.rectangle.center;\n            }\n\n            var pt = beginItem.getConnectionPointPosition(connectionPointIndex, targetPoint);\n            if (!connector.points[0].equals(pt)) history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(connector.key, 0, pt));\n          }\n        };\n\n        ModelUtils.updateConnectorEndPoint = function (history, connector, endItem, getConnectionPointIndex) {\n          if (endItem) {\n            var connectionPointIndex = getConnectionPointIndex !== undefined ? getConnectionPointIndex(connector.endConnectionPointIndex) : connector.endConnectionPointIndex;\n            var pt = endItem.getConnectionPointPosition(connectionPointIndex, connector.points[connector.points.length - 2]);\n            if (!connector.points[connector.points.length - 1].equals(pt)) history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(connector.key, connector.points.length - 1, pt));\n          }\n        };\n\n        ModelUtils.updateContainerConnectorsAttachedPoints = function (history, model, rootContainer, container) {\n          var _this = this;\n\n          if (container === void 0) {\n            container = rootContainer;\n          }\n\n          history.beginTransaction();\n          var children = model.getChildren(container);\n          children.forEach(function (child) {\n            if (child instanceof Shape_1.Shape) {\n              child.attachedConnectors.forEach(function (connector) {\n                var beginItemInContainer = connector.beginItem && model.isContainerItem(container, connector.beginItem);\n                var endItemInContainer = connector.endItem && model.isContainerItem(container, connector.endItem);\n\n                if (beginItemInContainer && !endItemInContainer) {\n                  var collapsedContainer = model.findItemTopCollapsedContainer(connector.beginItem);\n                  var endCollapsedContainer = connector.endItem && model.findItemTopCollapsedContainer(connector.endItem);\n                  if (!collapsedContainer) _this.updateConnectorBeginPoint(history, connector, connector.beginItem, endCollapsedContainer || connector.endItem);else {\n                    _this.updateConnectorBeginPoint(history, connector, collapsedContainer, endCollapsedContainer || connector.endItem, function (index) {\n                      return rootContainer.getConnectionPointIndexForItem(connector.beginItem, index);\n                    });\n                  }\n                }\n\n                if (endItemInContainer && !beginItemInContainer) {\n                  var collapsedContainer = model.findItemTopCollapsedContainer(connector.endItem);\n                  if (!collapsedContainer) _this.updateConnectorEndPoint(history, connector, connector.endItem);else {\n                    _this.updateConnectorEndPoint(history, connector, collapsedContainer, function (index) {\n                      return rootContainer.getConnectionPointIndexForItem(connector.endItem, index);\n                    });\n                  }\n                }\n              });\n\n              _this.updateContainerConnectorsAttachedPoints(history, model, rootContainer, child);\n            }\n          });\n          history.endTransaction();\n        };\n\n        ModelUtils.getConnectorsWithoutBeginItemInfo = function (model) {\n          var connectors = model.findConnectorsWithoutBeginItem();\n          return connectors.map(function (c) {\n            return {\n              connector: c,\n              point: c.points[0].clone()\n            };\n          });\n        };\n\n        ModelUtils.getConnectorsWithoutEndItemInfo = function (model) {\n          var connectors = model.findConnectorsWithoutEndItem();\n          return connectors.map(function (c) {\n            return {\n              connector: c,\n              point: c.points[c.points.length - 1].clone()\n            };\n          });\n        };\n\n        ModelUtils.updateShapeAttachedConnectors = function (history, model, shape) {\n          shape.attachedConnectors.forEach(function (connector) {\n            ModelUtils.removeConnectorIntermediatePoints(history, connector);\n            ModelUtils.updateConnectorAttachedPoints(history, model, connector);\n          });\n        };\n\n        ModelUtils.updateMovingShapeConnections = function (history, shape, beginPointsInfo, endPointsInfo, resetTargetCallback, updateTargetCallback) {\n          var _this = this;\n\n          resetTargetCallback();\n          beginPointsInfo.forEach(function (pi) {\n            var connectionPointIndex = _this.getMovingShapeConnectionPointIndex(shape, pi.point);\n\n            if (shape.rectangle.contains(pi.point) || connectionPointIndex > -1) {\n              updateTargetCallback(shape, connectionPointIndex);\n              if (connectionPointIndex !== pi.connector.beginConnectionPointIndex && pi.connector.beginItem) history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(pi.connector, Connector_1.ConnectorPosition.Begin));\n              history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(pi.connector, shape, connectionPointIndex, Connector_1.ConnectorPosition.Begin));\n            } else if (pi.connector.beginItem) {\n              history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(pi.connector, Connector_1.ConnectorPosition.Begin));\n              history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(pi.connector.key, 0, pi.point));\n            }\n          });\n          endPointsInfo.forEach(function (pi) {\n            var connectionPointIndex = _this.getMovingShapeConnectionPointIndex(shape, pi.point);\n\n            if (shape.rectangle.contains(pi.point) || connectionPointIndex > -1) {\n              updateTargetCallback(shape, connectionPointIndex);\n              if (connectionPointIndex !== pi.connector.endConnectionPointIndex && pi.connector.endItem) history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(pi.connector, Connector_1.ConnectorPosition.End));\n              history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(pi.connector, shape, connectionPointIndex, Connector_1.ConnectorPosition.End));\n            } else if (pi.connector.endItem) {\n              history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(pi.connector, Connector_1.ConnectorPosition.End));\n              history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(pi.connector.key, pi.connector.points.length - 1, pi.point));\n            }\n          });\n        };\n\n        ModelUtils.getMovingShapeConnectionPointIndex = function (shape, point) {\n          var _this = this;\n\n          var connectionPointIndex = -1;\n          shape.getConnectionPoints().forEach(function (pt, index) {\n            if (Utils_1.GeometryUtils.getDistance(point, pt) < _this.connectionPointActionSize) connectionPointIndex = index;\n          });\n          return connectionPointIndex;\n        };\n\n        ModelUtils.removeUnnecessaryConnectorPoints = function (history, connector, exceptPoints, removeCallback) {\n          history.beginTransaction();\n          Utils_1.GeometryUtils.removeUnnecessaryLinePoints(connector.points, function (pt, index) {\n            var needRemove = true;\n\n            if (exceptPoints) {\n              exceptPoints.forEach(function (ept) {\n                if (ept && ept.equals(pt)) {\n                  needRemove = false;\n                  return;\n                }\n              });\n            }\n\n            if (needRemove) {\n              history.addAndRedo(new DeleteConnectorPointHistoryItem_1.DeleteConnectorPointHistoryItem(connector.key, index));\n              if (removeCallback !== undefined) removeCallback(index);\n              return true;\n            }\n          });\n          history.endTransaction();\n        };\n\n        ModelUtils.removeConnectorIntermediatePoints = function (history, connector) {\n          if (connector.properties.lineOption !== ConnectorProperties_1.ConnectorLineOption.Orthogonal || connector.points.length <= 2) return;\n          history.beginTransaction();\n          var removePoints = false;\n          if (this.isShapeIntersectConnectorPointsLine(connector.beginItem, connector)) removePoints = true;\n          if (this.isShapeIntersectConnectorPointsLine(connector.endItem, connector)) removePoints = true;\n\n          if (removePoints) {\n            while (connector.points.length > 2) {\n              history.addAndRedo(new DeleteConnectorPointHistoryItem_1.DeleteConnectorPointHistoryItem(connector.key, 1));\n            }\n          }\n\n          history.endTransaction();\n        };\n\n        ModelUtils.isShapeIntersectConnectorPointsLine = function (shape, connector) {\n          if (!shape) return false;\n          var offset = Connector_1.Connector.minOffset - UnitConverter_1.UnitConverter.pixelsToTwips(1);\n          var rect = shape.rectangle.inflate(offset, offset);\n          var prevPt;\n\n          for (var i = 1; i < connector.points.length - 1; i++) {\n            if (prevPt !== undefined) {\n              if (prevPt.x === connector.points[i].x) {\n                if (rect.left <= prevPt.x && prevPt.x <= rect.right) return true;\n              }\n\n              if (prevPt.y === connector.points[i].y) {\n                if (rect.top <= prevPt.y && prevPt.y <= rect.bottom) return true;\n              }\n            }\n\n            prevPt = connector.points[i];\n          }\n\n          return false;\n        };\n\n        ModelUtils.getSnappedPos = function (model, gridSize, pos, isHorizontal) {\n          var snapOffset = isHorizontal ? model.snapStartPoint.x : model.snapStartPoint.y;\n          return Math.round((pos - snapOffset) / gridSize) * gridSize + snapOffset;\n        };\n\n        ModelUtils.tryUpdateModelSize = function (history, model, processPoints) {\n          var offset = history.modelManipulator.getModelSizeUpdateOffset();\n\n          if (!offset.isEmpty()) {\n            history.addAndRedo(new ModelResizeHistoryItem_1.ModelResizeHistoryItem(offset));\n\n            if (offset.left || offset.top) {\n              history.addAndRedo(new UpdatePositionsOnPageResizeHistoryItem_1.UpdatePositionsOnPageResizeHistoryItem(offset.left, offset.top));\n              if (processPoints !== undefined) processPoints(offset.left, offset.top);\n            }\n\n            history.modelManipulator.raiseModelRectangleChanged(model.getRectangle(true));\n          }\n        };\n\n        ModelUtils.deleteItems = function (history, model, selection, items, deleteLocked) {\n          history.beginTransaction();\n          this.deleteItemsCore(history, model, items, deleteLocked);\n          this.tryUpdateModelSize(history, model);\n          history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(selection, []));\n          history.endTransaction();\n        };\n\n        ModelUtils.deleteItemsCore = function (history, model, items, deleteLocked) {\n          var _this = this;\n\n          items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) {\n              var children = model.getChildren(item);\n\n              if (children.length) {\n                children.forEach(function (child) {\n                  history.addAndRedo(new RemoveFromContainerHistoryItem_1.RemoveFromContainerHistoryItem(child));\n\n                  _this.updateAttachedConnectorsContainer(history, model, child);\n                });\n\n                _this.deleteItemsCore(history, model, children.filter(function (child) {\n                  return !child.locked || deleteLocked;\n                }), deleteLocked);\n              }\n\n              if (model.findItem(item.key)) _this.deleteShape(history, item);\n            }\n\n            if (item instanceof Connector_1.Connector) {\n              if (model.findItem(item.key)) _this.deleteConnector(history, item);\n            }\n          });\n        };\n\n        ModelUtils.deleteShape = function (history, shape) {\n          while (shape.attachedConnectors.length > 0) {\n            var connector = shape.attachedConnectors[0];\n            history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(connector, connector.beginItem === shape ? Connector_1.ConnectorPosition.Begin : Connector_1.ConnectorPosition.End));\n          }\n\n          history.addAndRedo(new DeleteShapeHistoryItem_1.DeleteShapeHistoryItem(shape.key));\n        };\n\n        ModelUtils.deleteConnector = function (history, connector) {\n          if (connector.beginItem) history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(connector, Connector_1.ConnectorPosition.Begin));\n          if (connector.endItem) history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(connector, Connector_1.ConnectorPosition.End));\n          history.addAndRedo(new DeleteConnectorHistoryItem_1.DeleteConnectorHistoryItem(connector.key));\n        };\n\n        ModelUtils.deleteAllItems = function (history, model, selection) {\n          this.deleteItems(history, model, selection, model.items.slice(), true);\n        };\n\n        ModelUtils.deleteSelection = function (history, model, selection) {\n          this.deleteItems(history, model, selection, selection.getSelectedItems());\n        };\n\n        ModelUtils.changeChildrenContainerLocked = function (history, model, item, locked) {\n          var _this = this;\n\n          if (item instanceof Shape_1.Shape) {\n            var items = model.getChildren(item);\n            items.forEach(function (item) {\n              history.addAndRedo(new ChangeContainerLockedHistoryItem_1.ChangeContainerLockedHistoryItem(item, locked));\n\n              _this.changeChildrenContainerLocked(history, model, item, locked);\n            });\n          }\n        };\n\n        ModelUtils.changeSelectionLocked = function (history, model, selection, locked) {\n          var _this = this;\n\n          history.beginTransaction();\n          var items = selection.getSelectedItems(true);\n          items.forEach(function (item) {\n            history.addAndRedo(new ChangeLockedHistoryItem_1.ChangeLockedHistoryItem(item, locked));\n\n            _this.changeChildrenContainerLocked(history, model, item, locked);\n          });\n          history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(selection, selection.getKeys())); // Update canvas\n\n          history.endTransaction();\n        };\n\n        ModelUtils.copyStylesToItem = function (history, model, fromItem, newItemKey) {\n          var toItem = model.findItem(newItemKey);\n          fromItem.styleText.forEach(function (propertyName) {\n            if (fromItem.styleText[propertyName] !== toItem.styleText[propertyName]) history.addAndRedo(new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(newItemKey, propertyName, fromItem.styleText[propertyName]));\n          });\n          fromItem.style.forEach(function (propertyName) {\n            if (fromItem.style[propertyName] !== toItem.style[propertyName]) history.addAndRedo(new ChangeStyleHistoryItem_1.ChangeStyleHistoryItem(newItemKey, propertyName, fromItem.style[propertyName]));\n          });\n        }; // Cloning\n\n\n        ModelUtils.cloneShapeToOffset = function (history, model, shape, dx, dy) {\n          history.beginTransaction();\n          var newPosition = shape.position.offset(dx, dy);\n          var addHistoryItem = new AddShapeHistoryItem_1.AddShapeHistoryItem(shape.description.key, newPosition, shape.text);\n          history.addAndRedo(addHistoryItem);\n          var newKey = addHistoryItem.shapeKey;\n          history.addAndRedo(new ResizeShapeHistoryItem_1.ResizeShapeHistoryItem(newKey, newPosition, shape.size.clone()));\n          history.addAndRedo(new ChangeShapeParametersHistoryItem_1.ChangeShapeParametersHistoryItem(newKey, shape.parameters.clone()));\n          this.copyStylesToItem(history, model, shape, newKey);\n          history.endTransaction();\n          return newKey;\n        };\n\n        ModelUtils.cloneConnectorToOffset = function (history, model, connector, beginItemKey, endItemKey, dx, dy) {\n          history.beginTransaction();\n          var newPoints = connector.points.map(function (p) {\n            return p.offset(dx, dy);\n          });\n          var addHistoryItem = new AddConnectorHistoryItem_1.AddConnectorHistoryItem(newPoints);\n          history.addAndRedo(addHistoryItem);\n          var newKey = addHistoryItem.connectorKey;\n          var newConnector = model.findConnector(newKey);\n          connector.properties.forEach(function (propertyName) {\n            if (connector.properties[propertyName] !== newConnector.properties[propertyName]) history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(newKey, propertyName, connector.properties[propertyName]));\n          });\n\n          if (beginItemKey) {\n            var from = model.findShape(beginItemKey);\n            history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(newConnector, from, connector.beginConnectionPointIndex, Connector_1.ConnectorPosition.Begin));\n          }\n\n          if (endItemKey) {\n            var to = model.findShape(endItemKey);\n            history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(newConnector, to, connector.endConnectionPointIndex, Connector_1.ConnectorPosition.End));\n          }\n\n          var newTexts = connector.texts.clone();\n          newTexts.forEach(function (connectorText) {\n            history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(newConnector, connectorText.position, connectorText.value));\n          });\n          this.copyStylesToItem(history, model, connector, newKey);\n          history.endTransaction();\n          return newKey;\n        };\n\n        ModelUtils.cloneSelectionToOffset = function (history, model, selection, dx, dy) {\n          var _this = this;\n\n          history.beginTransaction();\n          var newShapes = {};\n          var ids = [];\n          selection.getSelectedShapes().forEach(function (shape) {\n            var newKey = _this.cloneShapeToOffset(history, model, shape, dx, dy);\n\n            newShapes[shape.key] = newKey;\n            ids.push(newKey);\n          });\n          selection.getSelectedConnectors().forEach(function (connector) {\n            var beginItemKey = connector.beginItem ? newShapes[connector.beginItem.key] : null;\n            var endItemKey = connector.endItem ? newShapes[connector.endItem.key] : null;\n\n            var newKey = _this.cloneConnectorToOffset(history, model, connector, beginItemKey, endItemKey, dx, dy);\n\n            ids.push(newKey);\n          });\n          history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(selection, ids));\n          ModelUtils.tryUpdateModelSize(history, model);\n          history.endTransaction();\n        }; // Containers\n\n\n        ModelUtils.findContainerByEventKey = function (model, selection, key) {\n          var container = model.findContainer(key);\n          if (container) return container;else {\n            var shape = model.findShape(key);\n            if (shape && shape.container && !selection.hasKey(shape.key)) return shape.container;\n          }\n        };\n\n        ModelUtils.canInsertToContainer = function (model, item, container) {\n          if (item === container) return false;\n\n          if (item instanceof Shape_1.Shape) {\n            if (model.findChild(item, container.key)) return false;\n          }\n\n          return true;\n        };\n\n        ModelUtils.canInsertSelectionToContainer = function (model, selection, container) {\n          var result = true;\n          selection.getSelectedItems().forEach(function (item) {\n            if (item === container) {\n              result = false;\n              return;\n            }\n\n            if (item instanceof Shape_1.Shape) {\n              if (model.findChild(item, container.key)) {\n                result = false;\n                return;\n              }\n            }\n          });\n          return result;\n        };\n\n        ModelUtils.insertToContainer = function (history, model, item, container) {\n          if (!container.enableChildren) throw Error(\"Inpossible to add children to non-container shape.\");\n          if (!this.canInsertToContainer(model, item, container)) return;\n          var oldContainer = item.container;\n\n          if (oldContainer !== container) {\n            history.beginTransaction();\n            if (oldContainer) history.addAndRedo(new RemoveFromContainerHistoryItem_1.RemoveFromContainerHistoryItem(item));\n            history.addAndRedo(new InsertToContainerHistoryItem_1.InsertToContainerHistoryItem(item, container));\n            this.updateAttachedConnectorsContainer(history, model, item);\n            history.endTransaction();\n          }\n        };\n\n        ModelUtils.removeFromContainer = function (history, model, item) {\n          if (item.container) {\n            history.beginTransaction();\n            history.addAndRedo(new RemoveFromContainerHistoryItem_1.RemoveFromContainerHistoryItem(item));\n            this.updateAttachedConnectorsContainer(history, model, item);\n            history.endTransaction();\n          }\n        };\n\n        ModelUtils.insertSelectionToContainer = function (history, model, selection, container) {\n          var _this = this;\n\n          history.beginTransaction();\n          var selectedItems = selection.getSelectedItems();\n          var items = selectedItems.filter(function (item) {\n            return !item.container || selectedItems.indexOf(item.container) === -1;\n          });\n          items.forEach(function (item) {\n            _this.insertToContainer(history, model, item, container);\n          });\n          history.endTransaction();\n        };\n\n        ModelUtils.removeSelectionFromContainer = function (history, model, selection) {\n          var _this = this;\n\n          history.beginTransaction();\n          selection.getSelectedItems().forEach(function (item) {\n            if (item.container && !selection.hasKey(item.container.key)) {\n              history.addAndRedo(new RemoveFromContainerHistoryItem_1.RemoveFromContainerHistoryItem(item));\n\n              _this.updateAttachedConnectorsContainer(history, model, item);\n            }\n          });\n          history.endTransaction();\n        };\n\n        ModelUtils.getConnectorContainer = function (connector) {\n          if (connector.beginItem && connector.endItem && connector.beginItem.container === connector.endItem.container) return connector.beginItem.container;\n        };\n\n        ModelUtils.updateAttachedConnectorsContainer = function (history, model, item) {\n          var _this = this;\n\n          history.beginTransaction();\n          item.attachedConnectors.forEach(function (connector) {\n            _this.updateConnectorContainer(history, model, connector);\n          });\n          history.endTransaction();\n        };\n\n        ModelUtils.updateConnectorContainer = function (history, model, connector) {\n          var container = this.getConnectorContainer(connector);\n\n          if (container) {\n            history.addAndRedo(new InsertToContainerHistoryItem_1.InsertToContainerHistoryItem(connector, container));\n          } else if (connector.container) {\n            history.addAndRedo(new RemoveFromContainerHistoryItem_1.RemoveFromContainerHistoryItem(connector));\n          }\n        }; // Layout\n\n\n        ModelUtils.applyLayout = function (history, model, container, graph, layout, nonGraphItems, settings, snapToGrid, gridSize) {\n          history.beginTransaction();\n          var occupiedRectangles = this.getOccupiedRectangles(nonGraphItems, container);\n          layout = this.offsetLayoutToFreeSpace(layout, container && container.clientRectangle, occupiedRectangles, settings.columnSpacing);\n          if (snapToGrid) this.adjustLayoutToSnapGrid(model, layout, gridSize);\n          if (container) this.resizeContainerOnLayout(history, model, layout, container, settings.columnSpacing);\n          this.applyLayoutToNodes(history, model, layout, graph.edges.map(function (e) {\n            return model.findConnector(e.key);\n          }));\n          this.applyLayoutToConnectors(history, model, layout, graph.edges.map(function (e) {\n            return model.findConnector(e.key);\n          }));\n          history.endTransaction();\n        };\n\n        ModelUtils.getNonGraphItems = function (model, container, nodeKeyMap, shapes, connectors) {\n          var allItems = container ? model.getChildren(container) : model.items.filter(function (item) {\n            return !item.container;\n          });\n          return allItems.filter(function (item) {\n            if (item instanceof Connector_1.Connector) {\n              return (!item.beginItem || !nodeKeyMap[item.beginItem.key]) && (!item.endItem || !nodeKeyMap[item.endItem.key]) && connectors.indexOf(item) === -1;\n            }\n\n            if (item instanceof Shape_1.Shape) {\n              return !nodeKeyMap[item.key] && shapes.indexOf(item) === -1;\n            }\n          });\n        };\n\n        ModelUtils.getOccupiedRectangles = function (nonGraphItems, container) {\n          var occupiedRectangles = nonGraphItems.map(function (i) {\n            return i.rectangle;\n          });\n\n          if (container && occupiedRectangles.length) {\n            var rect = container.clientRectangle;\n            occupiedRectangles.push(Utils_1.Rectangle.create(rect.right, rect.top, 1, 1));\n            occupiedRectangles.push(Utils_1.Rectangle.create(rect.right, rect.bottom, 1, 1));\n          }\n\n          return occupiedRectangles;\n        };\n\n        ModelUtils.offsetLayoutToFreeSpace = function (layout, containerRect, occupiedRectangles, spacing) {\n          var graphItemRect = layout.getRectangle(true);\n          var freePoint = Utils_1.GeometryUtils.findFreeSpace(occupiedRectangles, graphItemRect.size.offset(spacing, spacing), false, containerRect);\n\n          if (freePoint) {\n            var x = freePoint.x + spacing;\n            var y = freePoint.y + spacing;\n            return layout.offsetNodes(x, y);\n          }\n\n          var maxX = occupiedRectangles && occupiedRectangles.length ? occupiedRectangles.reduce(function (max, rect) {\n            return rect.right > max ? rect.right : max;\n          }, 0) : containerRect ? containerRect.left : 0;\n          var minY = containerRect ? containerRect.top : Math.max(0, graphItemRect.top);\n          return layout.offsetNodes(maxX + spacing, minY + spacing);\n        };\n\n        ModelUtils.resizeContainerOnLayout = function (history, model, layout, container, spacing) {\n          var rect = layout.getRectangle(true);\n          var width = container.rectangle.width;\n          if (container.rectangle.right < rect.right + spacing) width += rect.right + spacing - container.rectangle.right;\n          var height = container.rectangle.height;\n          if (container.rectangle.bottom < rect.bottom + spacing) height += rect.bottom + spacing - container.rectangle.bottom;\n          ModelUtils.setShapeSize(history, model, container, container.position, new Utils_1.Size(width, height));\n        };\n\n        ModelUtils.applyLayoutToNodes = function (history, model, layout, connectors) {\n          var _this = this;\n\n          var connectorsSet = connectors.reduce(function (acc, c) {\n            return acc[c.key] = true && acc;\n          }, {});\n          layout.forEachNode(function (nl, nk) {\n            var shape = model.findShape(nk);\n\n            _this.applyLayoutToNode(history, model, shape, nl.position, connectorsSet);\n          });\n        };\n\n        ModelUtils.applyLayoutToNode = function (history, model, shape, position, connectorsSet) {\n          var _this = this;\n\n          var delta = position.offset(-shape.position.x, -shape.position.y);\n          ModelUtils.setShapePosition(history, model, shape, position);\n\n          if (delta.x !== 0 || delta.y !== 0) {\n            shape.attachedConnectors.filter(function (c) {\n              return !connectorsSet[c.key];\n            }).forEach(function (connector) {\n              ModelUtils.updateConnectorAttachedPoints(history, model, connector);\n              var beginPointIndex = connector.beginItem ? 1 : 0;\n              var endPointIndex = connector.endItem ? connector.points.length - 2 : connector.points.length - 1;\n\n              for (var i = beginPointIndex; i <= endPointIndex; i++) {\n                history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(connector.key, i, connector.points[i].offset(delta.x, delta.y)));\n              }\n            });\n            model.getChildren(shape).forEach(function (child) {\n              if (child instanceof Shape_1.Shape) {\n                var childPosition = child.position.offset(delta.x, delta.y);\n\n                _this.applyLayoutToNode(history, model, child, childPosition, connectorsSet);\n              }\n            });\n          }\n        };\n\n        ModelUtils.applyLayoutToConnectors = function (history, model, layout, connectors) {\n          var _this = this;\n\n          connectors.filter(function (c) {\n            return c.beginItem && c.endItem;\n          }).forEach(function (connector) {\n            var edgeLayout = layout.edgeToPosition[connector.key];\n\n            if (edgeLayout) {\n              var beginIndex = connector.beginItem.getConnectionPointIndexForSide(edgeLayout.beginIndex);\n              if (beginIndex !== connector.beginConnectionPointIndex) history.addAndRedo(new AddConnectionHistoryItem_1.SetConnectionPointIndexHistoryItem(connector, beginIndex, Connector_1.ConnectorPosition.Begin));\n              var endIndex = connector.endItem.getConnectionPointIndexForSide(edgeLayout.endIndex);\n              if (endIndex !== connector.endConnectionPointIndex) history.addAndRedo(new AddConnectionHistoryItem_1.SetConnectionPointIndexHistoryItem(connector, endIndex, Connector_1.ConnectorPosition.End));\n            }\n\n            _this.updateConnectorAttachedPoints(history, model, connector);\n\n            if (edgeLayout) {\n              while (connector.points.length > 2) {\n                history.addAndRedo(new DeleteConnectorPointHistoryItem_1.DeleteConnectorPointHistoryItem(connector.key, 1));\n              }\n            }\n          });\n        };\n\n        ModelUtils.adjustLayoutToSnapGrid = function (model, layout, gridSize) {\n          var _this = this;\n\n          layout.nodeKeys.forEach(function (key) {\n            layout.nodeToLayout[key].position.x = _this.getSnappedPos(model, gridSize, layout.nodeToLayout[key].position.x, true);\n            layout.nodeToLayout[key].position.y = _this.getSnappedPos(model, gridSize, layout.nodeToLayout[key].position.y, false);\n          });\n        };\n\n        ModelUtils.getGraphInfoByItems = function (model, shapes, connectors, skipLocked) {\n          if (skipLocked === void 0) {\n            skipLocked = false;\n          }\n\n          var itemsByContainerKey = {};\n          var items = [].concat(shapes).concat(connectors);\n          items.forEach(function (item) {\n            var containerKey = item.container && item.container.key;\n            if (!itemsByContainerKey[containerKey]) itemsByContainerKey[containerKey] = [];\n            itemsByContainerKey[containerKey].push(item);\n          });\n          var result = [];\n\n          for (var key in itemsByContainerKey) {\n            if (!itemsByContainerKey.hasOwnProperty(key)) continue;\n            var container = key && model.findContainer(key);\n\n            if (!container || container.expanded) {\n              var containerKey = container && container.key;\n              var graph = this.getGraphByItems(model, itemsByContainerKey[key], containerKey, skipLocked);\n              if (graph.nodes.length > 1) result.push(new GraphInfo_1.GraphInfo(container, graph));\n            }\n          }\n\n          return result;\n        };\n\n        ModelUtils.getGraphByItems = function (model, items, containerKey, skipLocked) {\n          var _this = this;\n\n          var graph = new Graph_1.Graph([], []);\n          var knownIds = {};\n          items.forEach(function (item) {\n            _this.extendByConnectedComponents(item, graph, containerKey, knownIds, skipLocked);\n          });\n          graph.nodes = graph.nodes.sort(function (a, b) {\n            return model.getItemIndex(model.findShape(a)) - model.getItemIndex(model.findShape(b));\n          });\n          return graph;\n        };\n\n        ModelUtils.extendByConnectedComponents = function (item, graph, containerKey, knownIds, skipLocked) {\n          var _this = this;\n\n          if (!item || skipLocked && item.locked || knownIds[item.key]) return;\n          knownIds[item.key] = true;\n\n          if (item instanceof Connector_1.Connector && (item.container && item.container.key) === containerKey && item.beginItem && (!item.beginItem.locked || !skipLocked) && item.endItem && (!item.endItem.locked || !skipLocked) && item.beginItem !== item.endItem) {\n            graph.addEdge(new Structures_1.Edge(item.key, item.beginItem && item.beginItem.key, item.endItem && item.endItem.key));\n            this.extendByConnectedComponents(item.beginItem, graph, containerKey, knownIds, skipLocked);\n            this.extendByConnectedComponents(item.endItem, graph, containerKey, knownIds, skipLocked);\n          } else if (item instanceof Shape_1.Shape && (item.container && item.container.key) === containerKey) {\n            graph.addNode(item);\n            item.attachedConnectors.forEach(function (c) {\n              return _this.extendByConnectedComponents(c, graph, containerKey, knownIds, skipLocked);\n            });\n          }\n        }; // Units\n\n\n        ModelUtils.getlUnitValue = function (units, twipsValue) {\n          switch (units) {\n            case Model_1.DiagramUnit.Cm:\n              return UnitConverter_1.UnitConverter.twipsToCentimeters(twipsValue);\n\n            case Model_1.DiagramUnit.In:\n              return UnitConverter_1.UnitConverter.twipsToInches(twipsValue);\n\n            case Model_1.DiagramUnit.Px:\n              return UnitConverter_1.UnitConverter.twipsToPixels(twipsValue);\n          }\n        };\n\n        ModelUtils.getUnitText = function (units, unitItems, formatUnit, twipsValue, fractionDigits) {\n          if (fractionDigits === void 0) {\n            fractionDigits = 2;\n          }\n\n          var unitItemText = unitItems[units] ? \" \" + unitItems[units] : \"\";\n          var unitValue = this.getlUnitValue(units, twipsValue);\n\n          switch (units) {\n            case Model_1.DiagramUnit.Cm:\n              return formatUnit(+unitValue.toFixed(fractionDigits)) + unitItemText;\n\n            case Model_1.DiagramUnit.In:\n              return formatUnit(+unitValue.toFixed(fractionDigits)) + unitItemText;\n\n            case Model_1.DiagramUnit.Px:\n              return formatUnit(+unitValue.toFixed(0)) + unitItemText;\n          }\n        };\n\n        ModelUtils.getTwipsValue = function (units, value) {\n          switch (units) {\n            case Model_1.DiagramUnit.Cm:\n              return UnitConverter_1.UnitConverter.centimetersToTwips(value);\n\n            case Model_1.DiagramUnit.In:\n              return UnitConverter_1.UnitConverter.inchesToTwips(value);\n\n            case Model_1.DiagramUnit.Px:\n              return UnitConverter_1.UnitConverter.pixelsToTwips(value);\n          }\n        }; // Key generation\n\n\n        ModelUtils.getNextItemKey = function (keys, checkKey, baseKey) {\n          if (!keys.length && baseKey === undefined) return \"0\";\n\n          for (var i = keys.length - 1; i >= 0; i--) {\n            baseKey = baseKey || keys[i];\n            if (baseKey !== undefined && baseKey !== null) break;\n          }\n\n          var key = this.generateNextItemKey(baseKey || \"0\");\n\n          while (!checkKey(key)) {\n            key = this.generateNextItemKey(key);\n          }\n\n          return key;\n        };\n\n        ModelUtils.generateNextItemKey = function (key) {\n          for (var i = key.length - 1; i >= 0; i--) {\n            if (!this.isDigit(key[i])) {\n              if (i === key.length - 1) key = key + \"0\";\n              break;\n            }\n\n            var code = key.charCodeAt(i);\n            var char = String.fromCharCode(code + 1);\n\n            if (char > \"9\") {\n              char = \"0\";\n              if (i === 0 || !this.isDigit(key[i - 1])) char = \"1\" + char;\n            }\n\n            key = key.substr(0, i) + char + key.substr(i + 1);\n            if (char !== \"0\" && char !== \"10\") break;else if (char === \"10\") i--;\n          }\n\n          return key;\n        };\n\n        ModelUtils.isDigit = function (char) {\n          return \"0\" <= char && char <= \"9\";\n        };\n\n        ModelUtils.getGuidItemKey = function () {\n          return Base_1.CreateGuid();\n        };\n\n        ModelUtils.connectionPointActionSize = UnitConverter_1.UnitConverter.pixelsToTwips(8);\n        return ModelUtils;\n      }();\n\n      exports.ModelUtils = ModelUtils;\n      /***/\n    },\n    /* 7 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics4 = function extendStatics(d, b) {\n          _extendStatics4 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics4(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics4(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var CommandBase_1 = __webpack_require__(197);\n\n      var CommandStates_1 = __webpack_require__(198);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var SimpleCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(SimpleCommandBase, _super);\n\n        function SimpleCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        SimpleCommandBase.prototype.getState = function () {\n          return new CommandStates_1.SimpleCommandState(this.isEnabled(), this.getValue(), this.getDefaultValue(), this.getItems(), this.isVisible());\n        };\n\n        SimpleCommandBase.prototype.isVisible = function () {\n          return true;\n        };\n\n        SimpleCommandBase.prototype.isEnabled = function () {\n          return !this.control.settings.readOnly || this.isEnabledInReadOnlyMode();\n        };\n\n        SimpleCommandBase.prototype.isEnabledInReadOnlyMode = function () {\n          return false;\n        };\n\n        SimpleCommandBase.prototype.getValue = function () {\n          return undefined;\n        };\n\n        SimpleCommandBase.prototype.getDefaultValue = function () {\n          return undefined;\n        };\n\n        SimpleCommandBase.prototype.getItems = function () {\n          return undefined;\n        };\n\n        SimpleCommandBase.prototype.getModelUnit = function (value) {\n          return ModelUtils_1.ModelUtils.getlUnitValue(this.control.model.units, value);\n        };\n\n        SimpleCommandBase.prototype.getModelUnitText = function (value) {\n          return ModelUtils_1.ModelUtils.getUnitText(this.control.model.units, this.control.settings.unitItems, this.control.settings.formatUnit, value);\n        };\n\n        SimpleCommandBase.prototype.getModelUnitTwipsValue = function (value) {\n          return ModelUtils_1.ModelUtils.getTwipsValue(this.control.model.units, value);\n        };\n\n        SimpleCommandBase.prototype.getViewUnit = function (value) {\n          return ModelUtils_1.ModelUtils.getlUnitValue(this.control.settings.viewUnits, value);\n        };\n\n        SimpleCommandBase.prototype.getViewUnitText = function (value) {\n          return ModelUtils_1.ModelUtils.getUnitText(this.control.settings.viewUnits, this.control.settings.unitItems, this.control.settings.formatUnit, value);\n        };\n\n        SimpleCommandBase.prototype.getViewUnitTwipsValue = function (value) {\n          return ModelUtils_1.ModelUtils.getTwipsValue(this.control.settings.viewUnits, value);\n        };\n\n        return SimpleCommandBase;\n      }(CommandBase_1.CommandBase);\n\n      exports.SimpleCommandBase = SimpleCommandBase;\n      /***/\n    },\n    /* 8 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var CommandManager_1 = __webpack_require__(48);\n\n      exports.DiagramCommand = CommandManager_1.DiagramCommand;\n\n      var Diagram_1 = __webpack_require__(261);\n\n      exports.DiagramControl = Diagram_1.DiagramControl;\n\n      var Utils_1 = __webpack_require__(0);\n\n      exports.EventDispatcher = Utils_1.EventDispatcher;\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      exports.ShapeTypes = ShapeTypes_1.ShapeTypes;\n      exports.ShapeCategories = ShapeTypes_1.ShapeCategories;\n      exports.ShapeType = ShapeTypes_1.ShapeType;\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      exports.UnitConverter = UnitConverter_1.UnitConverter;\n\n      var Browser_1 = __webpack_require__(23);\n\n      exports.Browser = Browser_1.Browser;\n\n      var DiagramSettings_1 = __webpack_require__(35);\n\n      exports.AutoZoomMode = DiagramSettings_1.AutoZoomMode;\n\n      var DataLayoutParameters_1 = __webpack_require__(115);\n\n      exports.DataLayoutType = DataLayoutParameters_1.DataLayoutType;\n\n      var LayoutSettings_1 = __webpack_require__(22);\n\n      exports.DataLayoutOrientation = LayoutSettings_1.DataLayoutOrientation;\n\n      __webpack_require__(305);\n\n      var Model_1 = __webpack_require__(19);\n\n      exports.DiagramUnit = Model_1.DiagramUnit;\n      exports.PageOrientation = Model_1.PageOrientation;\n\n      var ConnectorProperties_1 = __webpack_require__(24);\n\n      exports.ConnectorLineEnding = ConnectorProperties_1.ConnectorLineEnding;\n      exports.ConnectorLineOption = ConnectorProperties_1.ConnectorLineOption;\n\n      var Color_1 = __webpack_require__(38);\n\n      exports.ColorHelper = Color_1.ColorHelper;\n\n      var NativeItem_1 = __webpack_require__(63);\n\n      exports.NativeShape = NativeItem_1.NativeShape;\n      exports.NativeConnector = NativeItem_1.NativeConnector;\n      /***/\n    },\n    /* 9 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var TextPrimitive_1 = __webpack_require__(64);\n\n      var ClipPathPrimitive_1 = __webpack_require__(41);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var Utils_2 = __webpack_require__(15);\n\n      var ConnectionPoint_1 = __webpack_require__(34);\n\n      exports.ShapeDefaultDimension = 1440;\n      exports.ShapeDefaultSize = new Utils_1.Size(exports.ShapeDefaultDimension, exports.ShapeDefaultDimension);\n\n      var ShapeDescription =\n      /** @class */\n      function () {\n        function ShapeDescription(title, defaultText, defaultSize, defaultImageUrl) {\n          if (defaultSize === void 0) {\n            defaultSize = exports.ShapeDefaultSize.clone();\n          }\n\n          this.title = title;\n          this.defaultText = defaultText;\n          this.defaultSize = defaultSize;\n          this.defaultImageUrl = defaultImageUrl;\n          this.connectionPoints = this.createConnectionPoints();\n          this.connectionPointsWhileSelected = this.createConnectionPointsForSelection();\n        }\n\n        Object.defineProperty(ShapeDescription.prototype, \"enableText\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"allowEditText\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"enableImage\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"allowEditImage\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"enableChildren\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ShapeDescription.prototype.getConnectionPoints = function () {\n          return this.connectionPoints;\n        };\n\n        ShapeDescription.prototype.createConnectionPoints = function () {\n          return [new ConnectionPoint_1.ConnectionPoint(0.5, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(1, 0.5, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(0.5, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0, 0.5, DiagramItem_1.ConnectionPointSide.West)];\n        };\n\n        ShapeDescription.prototype.getConnectionPointsForSelection = function () {\n          return this.connectionPointsWhileSelected;\n        };\n\n        ShapeDescription.prototype.createConnectionPointsForSelection = function () {\n          return [new ConnectionPoint_1.ConnectionPoint(0.5, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(1, 0.5, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(0.5, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0, 0.5, DiagramItem_1.ConnectionPointSide.West)];\n        };\n\n        ShapeDescription.prototype.processConnectionPoint = function (shape, point) {};\n\n        ShapeDescription.prototype.getConnectionPointIndexForItem = function (item, connectionPointIndex) {\n          return connectionPointIndex;\n        };\n\n        ShapeDescription.prototype.getConnectionPointIndexForSide = function (side) {\n          return side;\n        };\n\n        ShapeDescription.prototype.createParameters = function (parameters) {};\n\n        ShapeDescription.prototype.normalizeParameters = function (shape, parameters) {};\n\n        ShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          throw Error(\"Not implemented\");\n        };\n\n        ShapeDescription.prototype.changeParameterValue = function (parameters, key, change) {\n          var p = parameters.get(key);\n          p.value = change(p);\n        };\n\n        ShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [];\n        };\n\n        ShapeDescription.prototype.getExpandedSize = function (size, expandedSize) {\n          return size;\n        };\n\n        ShapeDescription.prototype.getCollapsedSize = function (size) {\n          return size;\n        };\n\n        ShapeDescription.prototype.getToolboxHeightToWidthRatio = function (width, height) {\n          return height / width;\n        };\n\n        ShapeDescription.prototype.allowResizeHorizontally = function (shape) {\n          return true;\n        };\n\n        ShapeDescription.prototype.allowResizeVertically = function (shape) {\n          return true;\n        };\n\n        ShapeDescription.prototype.createPrimitives = function (shape, forToolbox) {\n          var primitives = [];\n          primitives = primitives.concat(this.createShapePrimitives(shape, forToolbox));\n          if (this.enableImage) primitives = primitives.concat(this.createImagePrimitives(shape, forToolbox));\n          if (this.enableText) primitives = primitives.concat(this.createTextPrimitives(shape, forToolbox));\n          return primitives;\n        };\n\n        ShapeDescription.prototype.createImagePrimitives = function (shape, forToolbox) {\n          return [];\n        };\n\n        ShapeDescription.prototype.createTextPrimitives = function (shape, forToolbox) {\n          if (shape.text === undefined || shape.text === \"\") return [];\n          var rect = this.getTextRectangle(shape.rectangle, shape.parameters);\n          var clipPathId = !forToolbox && Utils_2.RenderUtils.generateSvgElementId(\"clipText\");\n          var textPoint = this.getTextPosition(rect, shape.styleText[\"text-anchor\"]);\n          return [].concat([new TextPrimitive_1.TextPrimitive(textPoint.x, textPoint.y, shape.text, rect.width, shape.styleText, false, clipPathId, undefined, this.getTextRotated()), new ClipPathPrimitive_1.ClipPathPrimitive(clipPathId, [new RectaglePrimitive_1.RectanglePrimitive(rect.left, rect.top, rect.width, rect.height)])]);\n        };\n\n        ShapeDescription.prototype.getTextRotated = function () {\n          return false;\n        };\n\n        ShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          return rect;\n        };\n\n        ShapeDescription.prototype.getClientRectangle = function (rect) {\n          return rect;\n        };\n\n        ShapeDescription.prototype.getTextEditRectangle = function (rect, parameters) {\n          return this.getTextRectangle(rect, parameters);\n        };\n\n        ShapeDescription.prototype.createSelectorPrimitives = function (shape) {\n          return [new RectaglePrimitive_1.RectanglePrimitive(shape.position.x, shape.position.y, shape.size.width, shape.size.height, null, \"selector\")];\n        };\n\n        ShapeDescription.prototype.getTextPosition = function (rect, textAnchor) {\n          var result = new Utils_1.Point(rect.left, rect.top + rect.height / 2);\n          if (!textAnchor || textAnchor === \"middle\") result.x = rect.left + rect.width / 2;else if (textAnchor === \"end\") result.x = rect.left + rect.width - ShapeDescription.textSpacing;else if (textAnchor === \"start\") result.x = rect.left + ShapeDescription.textSpacing;\n          return result;\n        };\n\n        ShapeDescription.textSpacing = UnitConverter_1.UnitConverter.pixelsToTwips(2);\n        return ShapeDescription;\n      }();\n\n      exports.ShapeDescription = ShapeDescription;\n      /***/\n    },\n    /* 10 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics5 = function extendStatics(d, b) {\n          _extendStatics5 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics5(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics5(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var MouseButton;\n\n      (function (MouseButton) {\n        MouseButton[MouseButton[\"None\"] = 0] = \"None\";\n        MouseButton[MouseButton[\"Left\"] = 1] = \"Left\";\n        MouseButton[MouseButton[\"Right\"] = 2] = \"Right\";\n        MouseButton[MouseButton[\"Middle\"] = 4] = \"Middle\";\n      })(MouseButton = exports.MouseButton || (exports.MouseButton = {}));\n\n      var MouseEventElementType;\n\n      (function (MouseEventElementType) {\n        MouseEventElementType[MouseEventElementType[\"Background\"] = 0] = \"Background\";\n        MouseEventElementType[MouseEventElementType[\"Document\"] = 1] = \"Document\";\n        MouseEventElementType[MouseEventElementType[\"Undefined\"] = 2] = \"Undefined\";\n        MouseEventElementType[MouseEventElementType[\"Connector\"] = 3] = \"Connector\";\n        MouseEventElementType[MouseEventElementType[\"ConnectorPoint\"] = 4] = \"ConnectorPoint\";\n        MouseEventElementType[MouseEventElementType[\"ConnectorSide\"] = 5] = \"ConnectorSide\";\n        MouseEventElementType[MouseEventElementType[\"ConnectorOrthogonalSide\"] = 6] = \"ConnectorOrthogonalSide\";\n        MouseEventElementType[MouseEventElementType[\"ConnectorText\"] = 7] = \"ConnectorText\";\n        MouseEventElementType[MouseEventElementType[\"Shape\"] = 8] = \"Shape\";\n        MouseEventElementType[MouseEventElementType[\"ShapeResizeBox\"] = 9] = \"ShapeResizeBox\";\n        MouseEventElementType[MouseEventElementType[\"ShapeParameterBox\"] = 10] = \"ShapeParameterBox\";\n        MouseEventElementType[MouseEventElementType[\"SelectionRect\"] = 11] = \"SelectionRect\";\n        MouseEventElementType[MouseEventElementType[\"ShapeConnectionPoint\"] = 12] = \"ShapeConnectionPoint\";\n        MouseEventElementType[MouseEventElementType[\"ShapeExpandButton\"] = 13] = \"ShapeExpandButton\";\n      })(MouseEventElementType = exports.MouseEventElementType || (exports.MouseEventElementType = {}));\n\n      var MouseEventSource =\n      /** @class */\n      function () {\n        function MouseEventSource(type, key, value) {\n          this.type = type;\n          this.key = key;\n          this.value = value;\n        }\n\n        return MouseEventSource;\n      }();\n\n      exports.MouseEventSource = MouseEventSource;\n      var ResizeEventSource;\n\n      (function (ResizeEventSource) {\n        ResizeEventSource[ResizeEventSource[\"Undefined\"] = 0] = \"Undefined\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_NW\"] = 1] = \"ResizeBox_NW\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_NE\"] = 2] = \"ResizeBox_NE\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_SE\"] = 3] = \"ResizeBox_SE\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_SW\"] = 4] = \"ResizeBox_SW\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_N\"] = 5] = \"ResizeBox_N\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_E\"] = 6] = \"ResizeBox_E\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_S\"] = 7] = \"ResizeBox_S\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_W\"] = 8] = \"ResizeBox_W\";\n      })(ResizeEventSource = exports.ResizeEventSource || (exports.ResizeEventSource = {}));\n\n      var DiagramEvent =\n      /** @class */\n      function () {\n        function DiagramEvent(modifiers) {\n          this.modifiers = modifiers;\n        }\n\n        return DiagramEvent;\n      }();\n\n      exports.DiagramEvent = DiagramEvent;\n\n      var DiagramFocusEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramFocusEvent, _super);\n\n        function DiagramFocusEvent(inputText) {\n          var _this = _super.call(this, KeyCode_1.ModifierKey.None) || this;\n\n          _this.inputText = inputText;\n          return _this;\n        }\n\n        return DiagramFocusEvent;\n      }(DiagramEvent);\n\n      exports.DiagramFocusEvent = DiagramFocusEvent;\n\n      var DiagramMouseEventTouch =\n      /** @class */\n      function () {\n        function DiagramMouseEventTouch(offsetPoint, modelPoint) {\n          this.offsetPoint = offsetPoint;\n          this.modelPoint = modelPoint;\n        }\n\n        return DiagramMouseEventTouch;\n      }();\n\n      exports.DiagramMouseEventTouch = DiagramMouseEventTouch;\n\n      var DiagramMouseEventBase =\n      /** @class */\n      function (_super) {\n        __extends(DiagramMouseEventBase, _super);\n\n        function DiagramMouseEventBase(modifiers, offsetPoint, modelPoint, source) {\n          var _this = _super.call(this, modifiers) || this;\n\n          _this.offsetPoint = offsetPoint;\n          _this.modelPoint = modelPoint;\n          _this.source = source;\n          return _this;\n        }\n\n        return DiagramMouseEventBase;\n      }(DiagramEvent);\n\n      exports.DiagramMouseEventBase = DiagramMouseEventBase;\n\n      var DiagramMouseEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramMouseEvent, _super);\n\n        function DiagramMouseEvent(modifiers, button, offsetPoint, modelPoint, source, touches) {\n          if (touches === void 0) {\n            touches = [];\n          }\n\n          var _this = _super.call(this, modifiers, offsetPoint, modelPoint, source) || this;\n\n          _this.button = button;\n          _this.touches = touches;\n          _this.scrollX = 0;\n          _this.scrollY = 0;\n          return _this;\n        }\n\n        return DiagramMouseEvent;\n      }(DiagramMouseEventBase);\n\n      exports.DiagramMouseEvent = DiagramMouseEvent;\n\n      var DiagramWheelEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramWheelEvent, _super);\n\n        function DiagramWheelEvent(modifiers, deltaX, deltaY, offsetPoint, modelPoint, source) {\n          var _this = _super.call(this, modifiers, offsetPoint, modelPoint, source) || this;\n\n          _this.deltaX = deltaX;\n          _this.deltaY = deltaY;\n          return _this;\n        }\n\n        return DiagramWheelEvent;\n      }(DiagramMouseEventBase);\n\n      exports.DiagramWheelEvent = DiagramWheelEvent;\n\n      var DiagramContextMenuEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramContextMenuEvent, _super);\n\n        function DiagramContextMenuEvent(modifiers, eventPoint, modelPoint) {\n          var _this = _super.call(this, modifiers) || this;\n\n          _this.eventPoint = eventPoint;\n          _this.modelPoint = modelPoint;\n          return _this;\n        }\n\n        return DiagramContextMenuEvent;\n      }(DiagramEvent);\n\n      exports.DiagramContextMenuEvent = DiagramContextMenuEvent;\n\n      var DiagramKeyboardEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramKeyboardEvent, _super);\n\n        function DiagramKeyboardEvent(modifiers, keyCode, inputText) {\n          var _this = _super.call(this, modifiers) || this;\n\n          _this.keyCode = keyCode;\n          _this.inputText = inputText;\n          return _this;\n        }\n\n        DiagramKeyboardEvent.prototype.getShortcutCode = function () {\n          return this.modifiers | this.keyCode;\n        };\n\n        return DiagramKeyboardEvent;\n      }(DiagramEvent);\n\n      exports.DiagramKeyboardEvent = DiagramKeyboardEvent;\n\n      var DiagramClipboardEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramClipboardEvent, _super);\n\n        function DiagramClipboardEvent(clipboardData) {\n          var _this = _super.call(this, KeyCode_1.ModifierKey.None) || this;\n\n          _this.clipboardData = clipboardData;\n          return _this;\n        }\n\n        return DiagramClipboardEvent;\n      }(DiagramEvent);\n\n      exports.DiagramClipboardEvent = DiagramClipboardEvent;\n      /***/\n    },\n    /* 11 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics6 = function extendStatics(d, b) {\n          _extendStatics6 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics6(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics6(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeParameters_1 = __webpack_require__(29);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ConnectionPoint_1 = __webpack_require__(34);\n\n      var ImageInfo_1 = __webpack_require__(40);\n\n      var NativeItem_1 = __webpack_require__(63);\n\n      var Shape =\n      /** @class */\n      function (_super) {\n        __extends(Shape, _super);\n\n        function Shape(description, position) {\n          var _this = _super.call(this) || this;\n\n          _this.description = description; // Containers\n\n          _this.childKeys = [];\n          _this.expanded = true;\n          _this.expandedSize = undefined;\n          if (!description) throw Error(\"Shape type is incorrect\");\n          _this.position = position.clone();\n          _this.size = description.defaultSize.clone();\n          _this.text = description.defaultText;\n          _this.image = new ImageInfo_1.ImageInfo(description.defaultImageUrl);\n          _this.parameters = new ShapeParameters_1.ShapeParameters();\n          description.createParameters(_this.parameters);\n          return _this;\n        }\n\n        Shape.prototype.assign = function (item) {\n          _super.prototype.assign.call(this, item);\n\n          item.size = this.size.clone();\n          item.text = this.text;\n          item.image = this.image.clone();\n          item.parameters = this.parameters.clone();\n          item.childKeys = this.childKeys.slice();\n          item.expanded = this.expanded;\n          if (this.expandedSize) item.expandedSize = this.expandedSize.clone();\n        };\n\n        Shape.prototype.clone = function () {\n          var clone = new Shape(this.description, this.position.clone());\n          this.assign(clone);\n          return clone;\n        };\n\n        Object.defineProperty(Shape.prototype, \"enableText\", {\n          get: function get() {\n            return this.description.enableText;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"allowEditText\", {\n          get: function get() {\n            return this.description.allowEditText;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"enableChildren\", {\n          get: function get() {\n            return this.description.enableChildren;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"enableImage\", {\n          get: function get() {\n            return this.description.enableImage;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"allowEditImage\", {\n          get: function get() {\n            return this.description.allowEditImage;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Shape.prototype.createPrimitives = function () {\n          return this.description.createPrimitives(this);\n        };\n\n        Shape.prototype.createSelectorPrimitives = function () {\n          return this.description.createSelectorPrimitives(this);\n        };\n\n        Shape.prototype.normalizeX = function (x) {\n          return Math.max(this.position.x, Math.min(x, this.position.x + this.size.width));\n        };\n\n        Shape.prototype.normalizeY = function (y) {\n          return Math.max(this.position.y, Math.min(y, this.position.y + this.size.height));\n        };\n\n        Shape.prototype.getConnectionPoints = function () {\n          var _this = this;\n\n          var result = this.description.getConnectionPoints().map(function (pt) {\n            var point = new ConnectionPoint_1.ConnectionPoint(_this.position.x + pt.x * _this.size.width, _this.position.y + pt.y * _this.size.height, pt.side);\n\n            _this.description.processConnectionPoint(_this, point);\n\n            return point;\n          });\n          return result;\n        };\n\n        Shape.prototype.getConnectionPointsForSelection = function () {\n          var _this = this;\n\n          var result = this.description.getConnectionPointsForSelection().map(function (pt) {\n            var point = new ConnectionPoint_1.ConnectionPoint(_this.position.x + pt.x * _this.size.width, _this.position.y + pt.y * _this.size.height, pt.side);\n            return point;\n          });\n          return result;\n        };\n\n        Shape.prototype.getConnectionPointSide = function (point, targetPoint) {\n          if (point.side !== DiagramItem_1.ConnectionPointSide.Undefined) return point.side;\n          return this.getConnectionPointSideByGeometry(point);\n        };\n\n        Shape.prototype.getConnectionPointForSelectionSide = function (point) {\n          if (point.side !== DiagramItem_1.ConnectionPointSide.Undefined) return point.side;\n          return this.getConnectionPointSideByGeometry(point);\n        };\n\n        Shape.prototype.getConnectionPointSideByGeometry = function (point) {\n          var pt = point.offset(-this.position.x, -this.position.y).multiply(1 / this.size.width, 1 / this.size.height);\n\n          if (pt.x >= pt.y && (pt.x > 0 || pt.y > 0)) {\n            if (pt.x < 0.5 || 1 - pt.x >= pt.y) return DiagramItem_1.ConnectionPointSide.North;\n            return DiagramItem_1.ConnectionPointSide.East;\n          } else {\n            if (pt.x > 0.5 || 1 - pt.x <= pt.y) return DiagramItem_1.ConnectionPointSide.South;\n            return DiagramItem_1.ConnectionPointSide.West;\n          }\n        };\n\n        Shape.prototype.getConnectionPointIndexForItem = function (item, connectionPointIndex) {\n          return this.description.getConnectionPointIndexForItem(item, connectionPointIndex);\n        };\n\n        Shape.prototype.getConnectionPointIndexForSide = function (side) {\n          return this.description.getConnectionPointIndexForSide(side);\n        };\n\n        Shape.prototype.toggleExpandedSize = function () {\n          if (!this.expanded) {\n            this.expandedSize = this.size.clone();\n            this.size = this.getCollapsedSize();\n          } else {\n            this.size = this.getExpandedSize();\n            this.expandedSize = undefined;\n          }\n        };\n\n        Shape.prototype.getExpandedSize = function () {\n          return this.description.getExpandedSize(this.size, this.expandedSize);\n        };\n\n        Shape.prototype.getCollapsedSize = function () {\n          return this.description.getCollapsedSize(this.size);\n        };\n\n        Shape.prototype.getToolboxHeightToWidthRatio = function () {\n          return this.description.getToolboxHeightToWidthRatio(this.size.width, this.size.height);\n        };\n\n        Object.defineProperty(Shape.prototype, \"allowResizeHorizontally\", {\n          get: function get() {\n            return this.description.allowResizeHorizontally(this);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"allowResizeVertically\", {\n          get: function get() {\n            return this.description.allowResizeVertically(this);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"rectangle\", {\n          get: function get() {\n            return new Utils_1.Rectangle(this.position, this.size);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"clientRectangle\", {\n          get: function get() {\n            return this.description.getClientRectangle(this.rectangle);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"textRectangle\", {\n          get: function get() {\n            return this.description.getTextRectangle(this.rectangle, this.parameters);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"textEditRectangle\", {\n          get: function get() {\n            return this.description.getTextEditRectangle(this.rectangle, this.parameters);\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Shape.prototype.toNative = function () {\n          var item = new NativeItem_1.NativeShape(this.key, this.dataKey);\n          item.type = this.description.key;\n          item.text = this.text;\n          return item;\n        };\n\n        Shape.lineWidth = UnitConverter_1.UnitConverter.pixelsToTwips(2);\n        return Shape;\n      }(DiagramItem_1.DiagramItem);\n\n      exports.Shape = Shape;\n      /***/\n    },\n    /* 12 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Event_1 = __webpack_require__(10);\n\n      var Evt_1 = __webpack_require__(39);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Base_1 = __webpack_require__(17);\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var Browser_1 = __webpack_require__(23);\n\n      var Utils_2 = __webpack_require__(15);\n\n      var TouchUIHelper_1 = __webpack_require__(62);\n\n      var CanvasItemsManager_1 = __webpack_require__(82);\n\n      var ScrollView_1 = __webpack_require__(135);\n\n      var DiagramSettings_1 = __webpack_require__(35);\n\n      var InputManager_1 = __webpack_require__(136);\n\n      var CanvasPageManager_1 = __webpack_require__(137);\n\n      var CanvasViewManager_1 = __webpack_require__(139);\n\n      var CanvasSelectionManager_1 = __webpack_require__(87);\n\n      var ScrollController_1 = __webpack_require__(142);\n\n      exports.svgNS = \"http://www.w3.org/2000/svg\";\n      var PADDING_NORMALIZATION_TIMEOUT = 500,\n          READONLY_CSSCLASS = \"dxdi-read-only\";\n      exports.LONG_TOUCH_TIMEOUT = 500, exports.DBL_CLICK_TIMEOUT = 500;\n\n      var RenderManager =\n      /** @class */\n      function () {\n        function RenderManager(parent, events, settings) {\n          this.moveLocked = false;\n          this.normalizationRequired = false;\n          this.lastClickElement = undefined;\n          this.longTouchTimer = undefined;\n          this.dblTouchTimer = undefined;\n          var mainElement = RenderManager.createMainElement(parent);\n          var svgElement = RenderManager.createSvgElement(mainElement);\n          this.scroll = settings.scrollView || new ScrollView_1.NativeScrollView(mainElement);\n          this.scroll.onScroll.add(this);\n          this.autoScroll = new ScrollController_1.AutoScrollController(this.scroll, mainElement);\n          this.view = new CanvasViewManager_1.CanvasViewManager(this.scroll, svgElement, settings.modelSize, settings.zoomLevel, settings.autoZoom, settings.simpleView, settings.rectangle);\n          this.input = new InputManager_1.InputManager(parent, mainElement, this.view, events, settings.zoomLevel);\n          this.items = new CanvasItemsManager_1.CanvasItemsManager(this.view.canvasElement, settings.zoomLevel);\n          this.page = new CanvasPageManager_1.CanvasPageManager(this.view.pageElement, settings);\n          this.selection = new CanvasSelectionManager_1.CanvasSelectionManager(this.view.canvasElement, settings.zoomLevel, settings.readOnly);\n          this.view.onViewChanged.add(this.page);\n          this.view.onViewChanged.add(this.items);\n          this.view.onViewChanged.add(this.selection);\n          this.view.onViewChanged.add(this.input);\n          this.attachEvents(svgElement);\n          this.mainElement = mainElement;\n          this.svgElement = svgElement;\n          this.events = events;\n        }\n\n        RenderManager.prototype.dispose = function () {\n          this.detachEvents(this.svgElement);\n          this.scroll.dispose();\n          this.input.dispose();\n        };\n\n        RenderManager.prototype.replaceParent = function (parent) {\n          if (this.mainElement && this.mainElement.parentNode !== parent) parent.appendChild(this.mainElement);\n          this.input.replaceParent(parent);\n        };\n\n        RenderManager.prototype.update = function (saveScrollPosition) {\n          this.view.update({\n            horizontal: !saveScrollPosition,\n            vertical: !saveScrollPosition\n          });\n          this.page.redraw();\n        };\n\n        RenderManager.prototype.clear = function () {\n          this.items.clear();\n          this.selection.clear();\n        };\n\n        RenderManager.prototype.attachEvents = function (svgElement) {\n          this.onMouseDownHandler = this.onMouseDown.bind(this);\n          this.onMouseEnterHandler = this.onMouseEnter.bind(this);\n          this.onMouseLeaveHandler = this.onMouseLeave.bind(this);\n          this.onMouseWheelHandler = this.onMouseWheel.bind(this);\n          this.onMouseDblClickHandler = this.onMouseDblClick.bind(this);\n          this.onContextMenuHandler = this.onContextMenu.bind(this);\n          this.onMouseMoveHandler = this.onMouseMove.bind(this);\n          this.onMouseUpHandler = this.onMouseUp.bind(this);\n          this.onWindowResizelHandler = this.onWindowResize.bind(this);\n          this.onMouseClickHandler = this.onMouseClick.bind(this);\n          svgElement.addEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseDownEventName, this.onMouseDownHandler);\n          svgElement.addEventListener(\"mouseenter\", this.onMouseEnterHandler);\n          svgElement.addEventListener(\"mouseleave\", this.onMouseLeaveHandler);\n          svgElement.addEventListener(\"wheel\", this.onMouseWheelHandler);\n          svgElement.addEventListener(\"dblclick\", this.onMouseDblClickHandler);\n          svgElement.addEventListener(\"click\", this.onMouseClickHandler);\n          svgElement.addEventListener(\"contextmenu\", this.onContextMenuHandler);\n          document.addEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseMoveEventName, this.onMouseMoveHandler);\n          document.addEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseUpEventName, this.onMouseUpHandler);\n          window.addEventListener(\"resize\", this.onWindowResizelHandler);\n        };\n\n        RenderManager.prototype.detachEvents = function (svgElement) {\n          svgElement.removeEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseDownEventName, this.onMouseDownHandler);\n          svgElement.removeEventListener(\"mouseenter\", this.onMouseEnterHandler);\n          svgElement.removeEventListener(\"mouseleave\", this.onMouseLeaveHandler);\n          svgElement.removeEventListener(\"wheel\", this.onMouseWheelHandler);\n          svgElement.removeEventListener(\"dblclick\", this.onMouseDblClickHandler);\n          svgElement.removeEventListener(\"contextmenu\", this.onContextMenuHandler);\n          svgElement.removeEventListener(\"click\", this.onMouseClickHandler);\n          document.removeEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseMoveEventName, this.onMouseMoveHandler);\n          document.removeEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseUpEventName, this.onMouseUpHandler);\n          window.removeEventListener(\"resize\", this.onWindowResizelHandler);\n        };\n\n        RenderManager.prototype.onMouseDown = function (evt) {\n          var _this = this;\n\n          this.lockMouseMove();\n          this.input.lockFocus();\n          this.autoScroll.onMouseDown(evt);\n          Utils_2.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n            return _this.events.onMouseDown(e);\n          });\n          this.input.captureFocus();\n          if (Browser_1.Browser.TouchUI) this.processTouchDown(evt);\n          var srcElement = Evt_1.Evt.GetEventSource(evt);\n          var tagName = srcElement && srcElement.tagName;\n          if (Browser_1.Browser.TouchUI || tagName.toLowerCase() === \"img\" || tagName.toLowerCase() === \"image\") // prevent dragging\n            return Evt_1.Evt.PreventEventAndBubble(evt);\n        };\n\n        RenderManager.prototype.onMouseMove = function (evt) {\n          var _this = this;\n\n          if (this.moveLocked) return;\n          this.tryFinishNormalization(evt);\n          this.autoScroll.onMouseMove(evt, function () {\n            return _this.onMouseMoveCore(evt);\n          });\n          this.onMouseMoveCore(evt);\n          Browser_1.Browser.IE && this.lockMouseMove();\n\n          if (Browser_1.Browser.TouchUI) {\n            this.processTouchMove(evt);\n            return Evt_1.Evt.PreventEventAndBubble(evt);\n          }\n        };\n\n        RenderManager.prototype.onMouseMoveCore = function (evt) {\n          var _this = this;\n\n          Utils_2.raiseEvent(evt, this.createDiagramMouseEvent(evt, Browser_1.Browser.TouchUI), function (e) {\n            return _this.events.onMouseMove(e);\n          });\n        };\n\n        RenderManager.prototype.onMouseUp = function (evt) {\n          var _this = this;\n\n          this.lockMouseMove();\n          this.tryFinishNormalization(evt);\n          var needCaptureFocus = Base_1.GetIsParent(this.mainElement, Evt_1.Evt.GetEventSource(evt));\n          Utils_2.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n            return _this.events.onMouseUp(e);\n          });\n          this.autoScroll.onMouseUp(evt);\n          if (needCaptureFocus) this.input.captureFocus();\n          if (Browser_1.Browser.TouchUI) this.processTouchUp(evt);\n        };\n\n        RenderManager.prototype.onMouseEnter = function (evt) {\n          var _this = this;\n\n          this.autoScroll.onMouseEnter(evt);\n          this.tryFinishNormalization(evt);\n          Utils_2.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n            return _this.events.onMouseEnter(e);\n          });\n        };\n\n        RenderManager.prototype.onMouseLeave = function (evt) {\n          var _this = this;\n\n          Utils_2.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n            return _this.events.onMouseLeave(e);\n          });\n        };\n\n        RenderManager.prototype.onMouseDblClick = function (evt) {\n          var _this = this;\n\n          Utils_2.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n            return _this.events.onDblClick(e);\n          });\n        };\n\n        RenderManager.prototype.onMouseClick = function (evt) {\n          var _this = this;\n\n          Utils_2.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n            return _this.events.onClick(e);\n          });\n        };\n\n        RenderManager.prototype.onContextMenu = function (evt) {\n          var _this = this;\n\n          Utils_2.raiseEvent(evt, this.createDiagramContextMenuEvent(evt), function (e) {\n            return _this.events.onContextMenu(e);\n          });\n          this.input.captureFocus();\n          return Evt_1.Evt.PreventEventAndBubble(evt);\n        };\n\n        RenderManager.prototype.processTouchDown = function (evt) {\n          var _this = this;\n\n          this.resetLongTouch();\n          this.longTouchTimer = setTimeout(function () {\n            Utils_2.raiseEvent(evt, _this.createDiagramMouseEvent(evt), function (e) {\n              return _this.events.onLongTouch(e);\n            });\n\n            _this.resetLongTouch();\n\n            _this.resetDblClick();\n          }, exports.LONG_TOUCH_TIMEOUT);\n        };\n\n        RenderManager.prototype.processTouchMove = function (evt) {\n          this.resetLongTouch();\n          this.resetDblClick();\n        };\n\n        RenderManager.prototype.processTouchUp = function (evt) {\n          var _this = this;\n\n          if (this.longTouchTimer !== undefined) {\n            Utils_2.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n              return _this.events.onClick(e);\n            });\n            var element = Evt_1.Evt.GetEventSource(evt);\n\n            if (this.dblTouchTimer !== undefined && this.lastClickElement === element) {\n              Utils_2.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n                return _this.events.onDblClick(e);\n              });\n              this.resetDblClick();\n            } else {\n              this.resetDblClick();\n              this.dblTouchTimer = setTimeout(function () {\n                return _this.dblTouchTimer = undefined;\n              }, exports.DBL_CLICK_TIMEOUT);\n            }\n\n            this.lastClickElement = element;\n          }\n\n          this.resetLongTouch();\n        };\n\n        RenderManager.prototype.resetLongTouch = function () {\n          if (this.longTouchTimer !== undefined) clearTimeout(this.longTouchTimer);\n          this.longTouchTimer = undefined;\n        };\n\n        RenderManager.prototype.resetDblClick = function () {\n          if (this.dblTouchTimer !== undefined) clearTimeout(this.dblTouchTimer);\n          this.dblTouchTimer = undefined;\n        };\n\n        RenderManager.prototype.onWindowResize = function () {\n          var resetTo = {\n            horizontal: false,\n            vertical: false\n          };\n\n          if (this.view.autoZoom !== DiagramSettings_1.AutoZoomMode.Disabled) {\n            resetTo.horizontal = true;\n            resetTo.vertical = true;\n          } else resetTo = this.view.checkFitToCanvas();\n\n          this.view.update(resetTo);\n        };\n\n        RenderManager.prototype.onMouseWheel = function (evt) {\n          var _this = this;\n\n          Utils_2.raiseEvent(evt, this.createDiagramWheelEvent(evt), function (e) {\n            return _this.events.onMouseWheel(e);\n          });\n        };\n\n        RenderManager.prototype.notifyModelSizeChanged = function (size, offset) {\n          this.view.notifyModelSizeChanged(size, offset);\n        };\n\n        RenderManager.prototype.notifyModelRectangleChanged = function (rectangle) {\n          this.view.notifyModelRectangleChanged(rectangle);\n        };\n\n        RenderManager.prototype.notifyReadOnlyChanged = function (readOnly) {\n          Base_1.ToggleElementClassName(this.mainElement, READONLY_CSSCLASS, readOnly);\n        };\n\n        RenderManager.prototype.notifyDragStart = function (itemKeys) {};\n\n        RenderManager.prototype.notifyDragEnd = function (itemKeys) {};\n\n        RenderManager.prototype.notifyDragScrollStart = function () {\n          this.autoScroll.onDragScrollStart();\n        };\n\n        RenderManager.prototype.notifyDragScrollEnd = function () {\n          this.autoScroll.onDragScrollEnd();\n        };\n\n        RenderManager.prototype.createDiagramMouseEvent = function (evt, findEventSourceByPosition) {\n          var modifiers = KeyCode_1.getKeyModifiers(evt);\n          var button = isLeftButtonPressed(evt) ? Event_1.MouseButton.Left : Event_1.MouseButton.Right;\n          var offsetPoint = this.getOffsetPointByEvent(evt);\n          var modelPoint = this.getModelPoint(offsetPoint);\n          var eventSource = this.getEventSource(evt, findEventSourceByPosition);\n          var touches = this.createDiagramMouseEventTouches(evt);\n          return new Event_1.DiagramMouseEvent(modifiers, button, offsetPoint, modelPoint, eventSource, touches);\n        };\n\n        RenderManager.prototype.createDiagramMouseEventTouches = function (evt) {\n          var touches = [];\n\n          if (evt[\"touches\"]) {\n            for (var i = 0; i < evt[\"touches\"].length; i++) {\n              var x = evt[\"touches\"][i].clientX;\n              var y = evt[\"touches\"][i].clientY;\n              var offsetPoint = this.getOffsetPointByEventPoint(x, y);\n              var modelPoint = this.getModelPoint(offsetPoint);\n              touches.push(new Event_1.DiagramMouseEventTouch(offsetPoint, modelPoint));\n            }\n          }\n\n          return touches;\n        };\n\n        RenderManager.prototype.createDiagramContextMenuEvent = function (evt, findEventSourceByPosition) {\n          var modifiers = KeyCode_1.getKeyModifiers(evt);\n          var eventPoint = new Utils_1.Point(evt.pageX, evt.pageY);\n          var offsetPoint = this.getOffsetPointByEvent(evt);\n          var modelPoint = this.getModelPoint(offsetPoint);\n          return new Event_1.DiagramContextMenuEvent(modifiers, eventPoint, modelPoint);\n        };\n\n        RenderManager.prototype.createDiagramWheelEvent = function (evt) {\n          var modifiers = KeyCode_1.getKeyModifiers(evt);\n          var offsetPoint = this.getOffsetPointByEvent(evt);\n          var modelPoint = this.view.getModelPoint(offsetPoint);\n          var eventSource = this.getEventSource(evt);\n          return new Event_1.DiagramWheelEvent(modifiers, evt.deltaX, evt.deltaY, offsetPoint, modelPoint, eventSource);\n        };\n\n        RenderManager.prototype.getEventSource = function (evt, findByPosition) {\n          var element = Evt_1.Evt.GetEventSource(evt, findByPosition);\n\n          while (element && !this.isDocumentContainer(element)) {\n            var src_1 = Utils_2.RenderUtils.getElementEventData(element);\n            if (src_1 !== undefined) return src_1;\n            element = element.parentNode;\n          }\n\n          var src = new Event_1.MouseEventSource();\n          if (element && this.isDocumentContainer(element)) src.type = Event_1.MouseEventElementType.Background;\n          return src;\n        };\n\n        RenderManager.prototype.isDocumentContainer = function (element) {\n          return Base_1.ElementHasCssClass(element, \"dxdi-control\");\n        };\n\n        RenderManager.prototype.lockMouseMove = function () {\n          var _this = this;\n\n          this.moveLocked = true;\n          setTimeout(function () {\n            return _this.moveLocked = false;\n          }, 10); // because chrome raises 2 events on click: buttonDown and move.\n        };\n\n        RenderManager.prototype.getModelPoint = function (offsetPoint) {\n          return this.view.getModelPoint(offsetPoint);\n        };\n\n        RenderManager.prototype.getOffsetPointByEvent = function (evt) {\n          var clientX = Evt_1.Evt.GetEventX(evt);\n          var clientY = Evt_1.Evt.GetEventY(evt);\n          return this.getOffsetPointByEventPoint(clientX, clientY);\n        };\n\n        RenderManager.prototype.getOffsetPointByEventPoint = function (clientX, clientY) {\n          var mainElementX = Base_1.GetAbsolutePositionX(this.mainElement);\n          var mainElementY = Base_1.GetAbsolutePositionY(this.mainElement);\n          return new Utils_1.Point(clientX - mainElementX, clientY - mainElementY);\n        };\n\n        RenderManager.prototype.getModelPointByEventPoint = function (clientX, clientY) {\n          var offsetPoint = this.getOffsetPointByEventPoint(clientX, clientY);\n          return this.view.getModelPoint(offsetPoint);\n        };\n\n        RenderManager.prototype.getEventPointByModelPoint = function (point) {\n          var pos = this.view.getAbsolutePoint(point);\n          return new Utils_1.Point(Base_1.GetAbsolutePositionX(this.mainElement) + pos.x, Base_1.GetAbsolutePositionY(this.mainElement) + pos.y);\n        };\n\n        RenderManager.prototype.notifyScrollChanged = function () {\n          var _this = this;\n\n          if (!this.normalizationRequired) {\n            setTimeout(function () {\n              _this.normalizationRequired = true;\n            }, PADDING_NORMALIZATION_TIMEOUT);\n          }\n        };\n\n        RenderManager.prototype.tryFinishNormalization = function (evt) {\n          if (!this.normalizationRequired) return;\n\n          if (!Evt_1.Evt.IsLeftButtonPressed(evt)) {\n            this.normalizationRequired = false; //this.view.tryNormalizePaddings();\n          }\n        };\n\n        RenderManager.createSvgElement = function (parent, forExport) {\n          if (forExport === void 0) {\n            forExport = false;\n          }\n\n          var svgElement = document.createElementNS(exports.svgNS, \"svg\");\n          svgElement.className.baseVal = \"dxdi-canvas\" + (forExport ? \" export\" : \"\");\n          parent && parent.appendChild(svgElement);\n          return svgElement;\n        };\n\n        RenderManager.createMainElement = function (parent) {\n          var element = document.createElement(\"div\");\n          element.setAttribute(\"class\", \"dxdi-control\");\n          parent.appendChild(element);\n          return element;\n        };\n\n        return RenderManager;\n      }();\n\n      exports.RenderManager = RenderManager;\n\n      function isLeftButtonPressed(evt) {\n        return !Browser_1.Browser.MSTouchUI ? Evt_1.Evt.IsLeftButtonPressed(evt) : evt.button != 2;\n      }\n      /***/\n\n    },\n    /* 13 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics7 = function extendStatics(d, b) {\n          _extendStatics7 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics7(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics7(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      var RichEditUnit;\n\n      (function (RichEditUnit) {\n        RichEditUnit[RichEditUnit[\"Centimeter\"] = 0] = \"Centimeter\";\n        RichEditUnit[RichEditUnit[\"Inch\"] = 1] = \"Inch\";\n      })(RichEditUnit = exports.RichEditUnit || (exports.RichEditUnit = {}));\n\n      var UnitConverter =\n      /** @class */\n      function () {\n        function UnitConverter() {}\n\n        UnitConverter.getConverter = function (unit) {\n          switch (unit) {\n            case RichEditUnit.Centimeter:\n              return new UIUnitConverterCentimeter();\n\n            case RichEditUnit.Inch:\n              return new UIUnitConverterInch();\n\n            default:\n              throw new Error();\n          }\n        }; // LAYOUT - PIXELS\n        // MODEL  - TWIPS\n        // FORMS  - CENTIMETERS / INCHES\n        // FONT   - POINTS\n        // BORDER WIDTH ON UI - POINTS\n        // TO TWIPS (round and no round version)\n\n\n        UnitConverter.pixelsToTwips = function (value) {\n          return Math.round(UnitConverter.pixelsToTwipsF(value));\n        };\n\n        UnitConverter.inchesToTwips = function (value) {\n          return Math.round(UnitConverter.inchesToTwipsF(value));\n        };\n\n        UnitConverter.pointsToTwips = function (value) {\n          return Math.round(UnitConverter.pointsToTwipsF(value));\n        };\n\n        UnitConverter.picasToTwips = function (value) {\n          return Math.round(value * 1440 / UnitConverter.PICAS_PER_INCH);\n        };\n\n        UnitConverter.centimetersToTwips = function (value) {\n          return Math.round(UnitConverter.centimetersToTwipsF(value));\n        };\n\n        UnitConverter.pixelsToTwipsF = function (value) {\n          return value * 1440 / UnitConverter.DPI;\n        };\n\n        UnitConverter.inchesToTwipsF = function (value) {\n          return value * 1440;\n        };\n\n        UnitConverter.pointsToTwipsF = function (value) {\n          return value * 20;\n        };\n\n        UnitConverter.centimetersToTwipsF = function (value) {\n          return value * 1440 / UnitConverter.CENTIMETERS_PER_INCH;\n        };\n\n        UnitConverter.modelUnitsToDegrees = function (value) {\n          return value / 60000;\n        };\n\n        UnitConverter.modelUnitsToRadians = function (value) {\n          return value / 60000 * Math.PI / 180;\n        };\n\n        UnitConverter.degreesToModelUnits = function (value) {\n          return value * 60000;\n        };\n\n        UnitConverter.radiansToModelUnits = function (value) {\n          return value * 60000 / Math.PI * 180;\n        };\n\n        UnitConverter.radiansToDegrees = function (value) {\n          return value / Math.PI * 180;\n        };\n\n        UnitConverter.fdToModelUnits = function (value) {\n          return Math.round(value * 1875 / 2048);\n        };\n\n        UnitConverter.emuToTwips = function (val) {\n          return val / 635;\n        }; // TO PIXELS (round)\n\n\n        UnitConverter.twipsToPixels = function (value) {\n          return Math.round(UnitConverter.twipsToPixelsF(value));\n        };\n\n        UnitConverter.inchesToPixels = function (value) {\n          return Math.round(UnitConverter.DPI * value);\n        };\n\n        UnitConverter.centimeterToPixel = function (value) {\n          return Math.round(value / (UnitConverter.CENTIMETERS_PER_INCH / UnitConverter.DPI));\n        };\n\n        UnitConverter.pointsToPixels = function (value) {\n          return Math.round(value * UnitConverter.DPI / 72);\n        }; // TO PIXELS (no round)\n\n\n        UnitConverter.pointsToPixelsF = function (value) {\n          return value * UnitConverter.DPI / 72;\n        };\n\n        UnitConverter.twipsToPixelsF = function (value) {\n          return value * UnitConverter.DPI / 1440;\n        }; // TO POINTS (round)\n\n\n        UnitConverter.pixelsToPoints = function (value) {\n          return Math.round(value * 72 / UnitConverter.DPI);\n        };\n\n        UnitConverter.twipsToPoints = function (value) {\n          return Math.round(this.twipsToPointsF(value));\n        }; // TO POINTS (no round)\n\n\n        UnitConverter.twipsToPointsF = function (value) {\n          return value / 20;\n        }; // TO INCHES (no round)\n\n\n        UnitConverter.twipsToInches = function (value) {\n          return value / 1440;\n        };\n\n        UnitConverter.pixelsToInches = function (value) {\n          return value / UnitConverter.DPI;\n        }; // TO CENTIMETERS (no round)\n\n\n        UnitConverter.twipsToCentimeters = function (value) {\n          return value * UnitConverter.CENTIMETERS_PER_INCH / 1440;\n        };\n\n        UnitConverter.pixelToCentimeters = function (value) {\n          return value * UnitConverter.CENTIMETERS_PER_INCH / UnitConverter.DPI;\n        }; // ANOTHER\n\n\n        UnitConverter.hundredthsOfMillimeterToModelUnits = function (value) {\n          return 15 * value / 127;\n        };\n\n        UnitConverter.twipsToEmu = function (val) {\n          return val * 635;\n        };\n\n        UnitConverter.twipsToDegree = function (value) {\n          return value / 60000;\n        };\n\n        UnitConverter.DPI = 96;\n        UnitConverter.CENTIMETERS_PER_INCH = 2.54;\n        UnitConverter.PICAS_PER_INCH = 6;\n        return UnitConverter;\n      }();\n\n      exports.UnitConverter = UnitConverter;\n\n      var UIUnitConverterCentimeter =\n      /** @class */\n      function (_super) {\n        __extends(UIUnitConverterCentimeter, _super);\n\n        function UIUnitConverterCentimeter() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        UIUnitConverterCentimeter.prototype.getUnits = function () {\n          return RichEditUnit.Centimeter;\n        };\n\n        UIUnitConverterCentimeter.prototype.twipsToUI = function (value) {\n          return UnitConverter.twipsToCentimeters(value);\n        };\n\n        UIUnitConverterCentimeter.prototype.UIToTwips = function (value) {\n          return UnitConverter.centimetersToTwips(value);\n        };\n\n        return UIUnitConverterCentimeter;\n      }(UnitConverter);\n\n      exports.UIUnitConverterCentimeter = UIUnitConverterCentimeter;\n\n      var UIUnitConverterInch =\n      /** @class */\n      function (_super) {\n        __extends(UIUnitConverterInch, _super);\n\n        function UIUnitConverterInch() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        UIUnitConverterInch.prototype.getUnits = function () {\n          return RichEditUnit.Inch;\n        };\n\n        UIUnitConverterInch.prototype.twipsToUI = function (value) {\n          return UnitConverter.twipsToInches(value);\n        };\n\n        UIUnitConverterInch.prototype.UIToTwips = function (value) {\n          return UnitConverter.inchesToTwips(value);\n        };\n\n        return UIUnitConverterInch;\n      }(UnitConverter);\n\n      exports.UIUnitConverterInch = UIUnitConverterInch;\n      /***/\n    },\n    /* 14 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics8 = function extendStatics(d, b) {\n          _extendStatics8 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics8(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics8(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var RectangleShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(RectangleShapeDescription, _super);\n\n        function RectangleShapeDescription(title, defaultText, defaultSize) {\n          if (title === void 0) {\n            title = \"Rectangle\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          if (defaultSize === void 0) {\n            defaultSize = new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.75);\n          }\n\n          return _super.call(this, title, defaultText, defaultSize) || this;\n        }\n\n        Object.defineProperty(RectangleShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Rectangle;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        RectangleShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var _a = shape.rectangle,\n              left = _a.left,\n              top = _a.top,\n              width = _a.width,\n              height = _a.height;\n          return [new RectaglePrimitive_1.RectanglePrimitive(left, top, width, height, shape.style)];\n        };\n\n        return RectangleShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.RectangleShapeDescription = RectangleShapeDescription;\n      /***/\n    },\n    /* 15 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Event_1 = __webpack_require__(10);\n\n      var __1 = __webpack_require__(8);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Base_1 = __webpack_require__(17);\n\n      var Browser_1 = __webpack_require__(23);\n\n      var RenderUtils =\n      /** @class */\n      function () {\n        function RenderUtils() {}\n\n        RenderUtils.updateSvgElementSize = function (svgElement, width, height, forExport) {\n          svgElement.style.width = width + \"px\";\n          svgElement.style.height = height + \"px\";\n          svgElement.setAttribute(\"viewBox\", \"0 0 \" + width + \" \" + height);\n\n          if (forExport) {\n            svgElement.setAttribute(\"width\", width.toString());\n            svgElement.setAttribute(\"height\", height.toString());\n          }\n        };\n\n        RenderUtils.removeContent = function (element) {\n          while (element.firstChild) {\n            element.removeChild(element.firstChild);\n          }\n        };\n\n        RenderUtils.setElementEventData = function (element, type, key, value) {\n          if (type === Event_1.MouseEventElementType.Undefined) return;\n          element.setAttribute(\"data-type\", type.toString());\n          if (key !== undefined) element.setAttribute(\"data-key\", key.toString());\n          if (value !== undefined) element.setAttribute(\"data-value\", value.toString());\n        };\n\n        RenderUtils.getElementEventData = function (element) {\n          if (element.getAttribute && element.getAttribute(\"data-type\")) {\n            return new Event_1.MouseEventSource(parseInt(element.getAttribute(\"data-type\")), element.getAttribute(\"data-key\"), element.getAttribute(\"data-value\"));\n          }\n\n          var className = element.getAttribute && element.getAttribute(\"class\");\n          if (className === \"dxdi-page\" || className === \"dxdi-main\") return new Event_1.MouseEventSource(Event_1.MouseEventElementType.Document);\n        };\n\n        RenderUtils.getHtmlElementStylePropertyName = function (propertyName) {\n          switch (propertyName) {\n            case \"fill\":\n              return \"color\";\n\n            case \"text-anchor\":\n              return \"text-align\";\n          }\n\n          return propertyName;\n        };\n\n        RenderUtils.getStylePropertyValue = function (propertyName, propertyValue, reverseTextAnchor) {\n          if (reverseTextAnchor === void 0) {\n            reverseTextAnchor = false;\n          }\n\n          if (propertyName === \"text-anchor\" && reverseTextAnchor) {\n            if (propertyValue === \"start\") return \"end\";\n            if (propertyValue === \"end\") return \"start\";\n          }\n\n          return propertyValue;\n        };\n\n        RenderUtils.applyStyleToElement = function (style, element, reverseTextAnchor) {\n          var _this = this;\n\n          if (reverseTextAnchor === void 0) {\n            reverseTextAnchor = false;\n          }\n\n          var defaultStyle = style.getDefaultInstance();\n          style.forEach(function (propertyName) {\n            var propertyValue = style[propertyName];\n            var elPropertyName = element instanceof HTMLElement ? _this.getHtmlElementStylePropertyName(propertyName) : propertyName;\n            if (propertyValue !== undefined && propertyValue !== \"\" && propertyValue !== defaultStyle[propertyName]) element.style.setProperty(elPropertyName, _this.getStylePropertyValue(propertyName, propertyValue, reverseTextAnchor));else element.style.setProperty(elPropertyName, \"\");\n          });\n        };\n\n        RenderUtils.generateSvgElementId = function (prefix) {\n          return prefix + \"_\" + Base_1.CreateGuid();\n        };\n\n        RenderUtils.getSvgTextRectangle = function (textEl, lineWidth) {\n          if (lineWidth === void 0) {\n            lineWidth = 0;\n          }\n\n          var bBox;\n\n          try {\n            bBox = textEl.getBBox();\n          } catch (_a) {} // TODO make measure in another way because of FF error\n\n\n          if (bBox) {\n            var x = __1.UnitConverter.pixelsToTwips(Math.round(bBox.x)) - lineWidth;\n            var y = __1.UnitConverter.pixelsToTwips(Math.round(bBox.y)) - lineWidth;\n            var width = __1.UnitConverter.pixelsToTwips(Math.round(bBox.width)) + 2 * lineWidth;\n            var height = __1.UnitConverter.pixelsToTwips(Math.round(bBox.height)) + 2 * lineWidth;\n            return Utils_1.Rectangle.create(x, y, width, height);\n          }\n\n          return Utils_1.Rectangle.create(0, 0, 0, 0);\n        };\n\n        RenderUtils.getUrlPathById = function (id) {\n          if (Browser_1.Browser.Safari) return \"url(\" + location.protocol + \"//\" + location.host + location.pathname + \"#\" + id + \")\";\n          return \"url(#\" + id + \")\";\n        };\n\n        return RenderUtils;\n      }();\n\n      exports.RenderUtils = RenderUtils;\n\n      function raiseEvent(evt, _evt, raiseFunc) {\n        raiseFunc(_evt);\n        if (_evt.preventDefault) evt.preventDefault();\n      }\n\n      exports.raiseEvent = raiseEvent;\n      /***/\n    },\n    /* 16 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      var ModifierKey;\n\n      (function (ModifierKey) {\n        ModifierKey[ModifierKey[\"None\"] = 0] = \"None\";\n        ModifierKey[ModifierKey[\"Ctrl\"] = 65536] = \"Ctrl\";\n        ModifierKey[ModifierKey[\"Shift\"] = 262144] = \"Shift\";\n        ModifierKey[ModifierKey[\"Alt\"] = 1048576] = \"Alt\";\n        ModifierKey[ModifierKey[\"Meta\"] = 16777216] = \"Meta\";\n      })(ModifierKey = exports.ModifierKey || (exports.ModifierKey = {}));\n\n      var KeyCode;\n\n      (function (KeyCode) {\n        KeyCode[KeyCode[\"Backspace\"] = 8] = \"Backspace\";\n        KeyCode[KeyCode[\"Tab\"] = 9] = \"Tab\";\n        KeyCode[KeyCode[\"Enter\"] = 13] = \"Enter\";\n        KeyCode[KeyCode[\"Pause\"] = 19] = \"Pause\";\n        KeyCode[KeyCode[\"CapsLock\"] = 20] = \"CapsLock\";\n        KeyCode[KeyCode[\"Esc\"] = 27] = \"Esc\";\n        KeyCode[KeyCode[\"Space\"] = 32] = \"Space\";\n        KeyCode[KeyCode[\"PageUp\"] = 33] = \"PageUp\";\n        KeyCode[KeyCode[\"PageDown\"] = 34] = \"PageDown\";\n        KeyCode[KeyCode[\"End\"] = 35] = \"End\";\n        KeyCode[KeyCode[\"Home\"] = 36] = \"Home\";\n        KeyCode[KeyCode[\"Left\"] = 37] = \"Left\";\n        KeyCode[KeyCode[\"Up\"] = 38] = \"Up\";\n        KeyCode[KeyCode[\"Right\"] = 39] = \"Right\";\n        KeyCode[KeyCode[\"Down\"] = 40] = \"Down\";\n        KeyCode[KeyCode[\"Insert\"] = 45] = \"Insert\";\n        KeyCode[KeyCode[\"Delete\"] = 46] = \"Delete\";\n        KeyCode[KeyCode[\"Key_0\"] = 48] = \"Key_0\";\n        KeyCode[KeyCode[\"Key_1\"] = 49] = \"Key_1\";\n        KeyCode[KeyCode[\"Key_2\"] = 50] = \"Key_2\";\n        KeyCode[KeyCode[\"Key_3\"] = 51] = \"Key_3\";\n        KeyCode[KeyCode[\"Key_4\"] = 52] = \"Key_4\";\n        KeyCode[KeyCode[\"Key_5\"] = 53] = \"Key_5\";\n        KeyCode[KeyCode[\"Key_6\"] = 54] = \"Key_6\";\n        KeyCode[KeyCode[\"Key_7\"] = 55] = \"Key_7\";\n        KeyCode[KeyCode[\"Key_8\"] = 56] = \"Key_8\";\n        KeyCode[KeyCode[\"Key_9\"] = 57] = \"Key_9\";\n        KeyCode[KeyCode[\"Key_a\"] = 65] = \"Key_a\";\n        KeyCode[KeyCode[\"Key_b\"] = 66] = \"Key_b\";\n        KeyCode[KeyCode[\"Key_c\"] = 67] = \"Key_c\";\n        KeyCode[KeyCode[\"Key_d\"] = 68] = \"Key_d\";\n        KeyCode[KeyCode[\"Key_e\"] = 69] = \"Key_e\";\n        KeyCode[KeyCode[\"Key_f\"] = 70] = \"Key_f\";\n        KeyCode[KeyCode[\"Key_g\"] = 71] = \"Key_g\";\n        KeyCode[KeyCode[\"Key_h\"] = 72] = \"Key_h\";\n        KeyCode[KeyCode[\"Key_i\"] = 73] = \"Key_i\";\n        KeyCode[KeyCode[\"Key_j\"] = 74] = \"Key_j\";\n        KeyCode[KeyCode[\"Key_k\"] = 75] = \"Key_k\";\n        KeyCode[KeyCode[\"Key_l\"] = 76] = \"Key_l\";\n        KeyCode[KeyCode[\"Key_m\"] = 77] = \"Key_m\";\n        KeyCode[KeyCode[\"Key_n\"] = 78] = \"Key_n\";\n        KeyCode[KeyCode[\"Key_o\"] = 79] = \"Key_o\";\n        KeyCode[KeyCode[\"Key_p\"] = 80] = \"Key_p\";\n        KeyCode[KeyCode[\"Key_q\"] = 81] = \"Key_q\";\n        KeyCode[KeyCode[\"Key_r\"] = 82] = \"Key_r\";\n        KeyCode[KeyCode[\"Key_s\"] = 83] = \"Key_s\";\n        KeyCode[KeyCode[\"Key_t\"] = 84] = \"Key_t\";\n        KeyCode[KeyCode[\"Key_u\"] = 85] = \"Key_u\";\n        KeyCode[KeyCode[\"Key_v\"] = 86] = \"Key_v\";\n        KeyCode[KeyCode[\"Key_w\"] = 87] = \"Key_w\";\n        KeyCode[KeyCode[\"Key_x\"] = 88] = \"Key_x\";\n        KeyCode[KeyCode[\"Key_y\"] = 89] = \"Key_y\";\n        KeyCode[KeyCode[\"Key_z\"] = 90] = \"Key_z\";\n        KeyCode[KeyCode[\"Windows\"] = 91] = \"Windows\";\n        KeyCode[KeyCode[\"ContextMenu\"] = 93] = \"ContextMenu\";\n        KeyCode[KeyCode[\"Numpad_0\"] = 96] = \"Numpad_0\";\n        KeyCode[KeyCode[\"Numpad_1\"] = 97] = \"Numpad_1\";\n        KeyCode[KeyCode[\"Numpad_2\"] = 98] = \"Numpad_2\";\n        KeyCode[KeyCode[\"Numpad_3\"] = 99] = \"Numpad_3\";\n        KeyCode[KeyCode[\"Numpad_4\"] = 100] = \"Numpad_4\";\n        KeyCode[KeyCode[\"Numpad_5\"] = 101] = \"Numpad_5\";\n        KeyCode[KeyCode[\"Numpad_6\"] = 102] = \"Numpad_6\";\n        KeyCode[KeyCode[\"Numpad_7\"] = 103] = \"Numpad_7\";\n        KeyCode[KeyCode[\"Numpad_8\"] = 104] = \"Numpad_8\";\n        KeyCode[KeyCode[\"Numpad_9\"] = 105] = \"Numpad_9\";\n        KeyCode[KeyCode[\"Multiply\"] = 106] = \"Multiply\";\n        KeyCode[KeyCode[\"Add\"] = 107] = \"Add\";\n        KeyCode[KeyCode[\"Subtract\"] = 109] = \"Subtract\";\n        KeyCode[KeyCode[\"Decimal\"] = 110] = \"Decimal\";\n        KeyCode[KeyCode[\"Divide\"] = 111] = \"Divide\";\n        KeyCode[KeyCode[\"F1\"] = 112] = \"F1\";\n        KeyCode[KeyCode[\"F2\"] = 113] = \"F2\";\n        KeyCode[KeyCode[\"F3\"] = 114] = \"F3\";\n        KeyCode[KeyCode[\"F4\"] = 115] = \"F4\";\n        KeyCode[KeyCode[\"F5\"] = 116] = \"F5\";\n        KeyCode[KeyCode[\"F6\"] = 117] = \"F6\";\n        KeyCode[KeyCode[\"F7\"] = 118] = \"F7\";\n        KeyCode[KeyCode[\"F8\"] = 119] = \"F8\";\n        KeyCode[KeyCode[\"F9\"] = 120] = \"F9\";\n        KeyCode[KeyCode[\"F10\"] = 121] = \"F10\";\n        KeyCode[KeyCode[\"F11\"] = 122] = \"F11\";\n        KeyCode[KeyCode[\"F12\"] = 123] = \"F12\";\n        KeyCode[KeyCode[\"NumLock\"] = 144] = \"NumLock\";\n        KeyCode[KeyCode[\"ScrollLock\"] = 145] = \"ScrollLock\";\n        KeyCode[KeyCode[\"Semicolon\"] = 186] = \"Semicolon\";\n        KeyCode[KeyCode[\"Equals\"] = 187] = \"Equals\";\n        KeyCode[KeyCode[\"Comma\"] = 188] = \"Comma\";\n        KeyCode[KeyCode[\"Dash\"] = 189] = \"Dash\";\n        KeyCode[KeyCode[\"Period\"] = 190] = \"Period\";\n        KeyCode[KeyCode[\"ForwardSlash\"] = 191] = \"ForwardSlash\";\n        KeyCode[KeyCode[\"GraveAccent\"] = 192] = \"GraveAccent\";\n        KeyCode[KeyCode[\"OpenBracket\"] = 219] = \"OpenBracket\";\n        KeyCode[KeyCode[\"BackSlash\"] = 220] = \"BackSlash\";\n        KeyCode[KeyCode[\"CloseBracket\"] = 221] = \"CloseBracket\";\n        KeyCode[KeyCode[\"SingleQuote\"] = 222] = \"SingleQuote\";\n      })(KeyCode = exports.KeyCode || (exports.KeyCode = {}));\n\n      function getKeyModifiers(evt) {\n        var result = 0;\n        if (evt.altKey) result |= ModifierKey.Alt;\n        if (evt.ctrlKey) result |= ModifierKey.Ctrl;\n        if (evt.shiftKey) result |= ModifierKey.Shift;\n        if (evt.metaKey) result |= ModifierKey.Meta;\n        return result;\n      }\n\n      exports.getKeyModifiers = getKeyModifiers;\n      /***/\n    },\n    /* 17 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Browser_1 = __webpack_require__(23);\n\n      var Data_1 = __webpack_require__(81);\n\n      var Str_1 = __webpack_require__(133);\n\n      var Attr_1 = __webpack_require__(134);\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var Evt_1 = __webpack_require__(39);\n\n      function IsExists(obj) {\n        return typeof obj != \"undefined\" && obj != null;\n      }\n\n      exports.IsExists = IsExists;\n\n      function IsNumber(str) {\n        return !isNaN(parseFloat(str)) && isFinite(str);\n      }\n\n      exports.IsNumber = IsNumber;\n      ;\n\n      function SetStyles(element, styles, makeImportant) {\n        if (IsExists(styles.cssText)) element.style.cssText = styles.cssText;\n        if (IsExists(styles.className)) element.className = styles.className;\n\n        for (var property in styles) {\n          if (!styles.hasOwnProperty(property)) continue;\n          var value = styles[property];\n\n          switch (property) {\n            case \"cssText\":\n            case \"className\":\n              break;\n\n            case \"float\":\n              SetElementFloat(element, value);\n              break;\n\n            case \"opacity\":\n              SetElementOpacity(element, value);\n              break;\n\n            case \"zIndex\":\n              SetStylesCore(element, property, value, makeImportant);\n              break;\n\n            /*jshint -W086 */\n\n            case \"fontWeight\":\n              if (Browser_1.Browser.IE && Browser_1.Browser.Version < 9 && typeof styles[property] == \"number\") value = styles[property].toString();\n\n            default:\n              SetStylesCore(element, property, value + (typeof value == \"number\" ? \"px\" : \"\"), makeImportant);\n\n            /*jshint +W086 */\n          }\n        }\n      }\n\n      exports.SetStyles = SetStyles;\n      ;\n\n      function SetStylesCore(element, property, value, makeImportant) {\n        if (makeImportant) {\n          var index = property.search(\"[A-Z]\");\n          if (index != -1) property = property.replace(property.charAt(index), \"-\" + property.charAt(index).toLowerCase());\n          if (element.style.setProperty) element.style.setProperty(property, value, \"important\");else element.style.cssText += \";\" + property + \":\" + value + \"!important\";\n        } else element.style[property] = value;\n      }\n\n      exports.SetStylesCore = SetStylesCore;\n\n      function GetDocumentScrollTop() {\n        var isScrollBodyIE = Browser_1.Browser.IE && GetCurrentStyle(document.body).overflow == \"hidden\" && document.body.scrollTop > 0;\n\n        if (Browser_1.Browser.WebKitFamily || Browser_1.Browser.Edge || isScrollBodyIE) {\n          if (Browser_1.Browser.MacOSMobilePlatform) //B157267\n            return window.pageYOffset;\n          if (Browser_1.Browser.WebKitFamily) return document.documentElement.scrollTop || document.body.scrollTop;\n          return document.body.scrollTop;\n        } else return document.documentElement.scrollTop;\n      }\n\n      exports.GetDocumentScrollTop = GetDocumentScrollTop;\n\n      function CloneObject(srcObject) {\n        if (typeof srcObject != 'object' || srcObject == null) return srcObject;\n        var newObject = {};\n        /* jshint ignore:start */\n\n        for (var i in srcObject) {\n          newObject[i] = srcObject[i];\n        }\n        /* jshint ignore:end */\n\n\n        return newObject;\n      }\n\n      exports.CloneObject = CloneObject;\n\n      function GetCurrentStyle(element) {\n        if (element.currentStyle) return element.currentStyle;else if (document.defaultView && document.defaultView.getComputedStyle) {\n          var result = document.defaultView.getComputedStyle(element, null);\n\n          if (!result && Browser_1.Browser.Firefox && window.frameElement) {\n            var changes = [];\n            var curElement = window.frameElement;\n\n            while (!(result = document.defaultView.getComputedStyle(element, null))) {\n              changes.push([curElement, curElement.style.display]);\n              SetStylesCore(curElement, \"display\", \"block\", true);\n              curElement = curElement.tagName == \"BODY\" ? curElement.ownerDocument.defaultView.frameElement : curElement.parentNode;\n            }\n\n            result = CloneObject(result);\n\n            for (var ch, i = 0; ch = changes[i]; i++) {\n              SetStylesCore(ch[0], \"display\", ch[1], false);\n            }\n\n            document.body.offsetWidth; //T334387\n          }\n\n          return result;\n        }\n        return window.getComputedStyle(element, null);\n      }\n\n      exports.GetCurrentStyle = GetCurrentStyle;\n\n      function GetDocumentScrollLeft() {\n        var isScrollBodyIE = Browser_1.Browser.IE && GetCurrentStyle(document.body).overflow == \"hidden\" && document.body.scrollLeft > 0;\n        if (Browser_1.Browser.Edge || isScrollBodyIE) return document.body ? document.body.scrollLeft : document.documentElement.scrollLeft;\n        if (Browser_1.Browser.WebKitFamily) return document.documentElement.scrollLeft || document.body.scrollLeft;\n        return document.documentElement.scrollLeft;\n      }\n\n      exports.GetDocumentScrollLeft = GetDocumentScrollLeft;\n      exports.focusedElement = null;\n\n      function GetFocusedElement() {\n        var activeElement = GetActiveElement();\n        return activeElement ? activeElement : exports.focusedElement;\n      }\n\n      exports.GetFocusedElement = GetFocusedElement;\n\n      function GetActiveElement() {\n        try {\n          return document.activeElement;\n        } catch (e) {\n          return null;\n        }\n      }\n\n      exports.GetActiveElement = GetActiveElement;\n      ;\n\n      function focusCore(element, selectAction) {\n        try {\n          element.focus();\n          if (Browser_1.Browser.IE && document.activeElement != element) element.focus(); // Q339238\n\n          if (selectAction) {\n            var currentSelection = Selection.GetInfo(element); // apply selection only if there is no selection present already\n\n            if (currentSelection.startPos == currentSelection.endPos) {\n              switch (selectAction) {\n                case \"start\":\n                  Selection.SetCaretPosition(element, 0);\n                  break;\n\n                case \"all\":\n                  Selection.Set(element);\n                  break;\n              }\n            }\n          }\n        } catch (e) {}\n      }\n\n      function SetFocus(element, selectAction) {\n        if (Browser_1.Browser.MacOSMobilePlatform) // Q471191\n          focusCore(element, selectAction);else {\n          window.setTimeout(function () {\n            focusCore(element, selectAction);\n          }, 100);\n        }\n      }\n\n      exports.SetFocus = SetFocus;\n\n      function GetIsParent(parentElement, element) {\n        if (!parentElement || !element) return false;\n\n        while (element) {\n          if (element === parentElement) return true;\n          if (element.tagName === \"BODY\") return false;\n          element = element.parentNode;\n        }\n\n        return false;\n      }\n\n      exports.GetIsParent = GetIsParent;\n\n      function ElementContainsCssClass(element, className) {\n        //B187659\n        try {\n          if (!element.className) return false;\n          return element.className.indexOf(className) != -1;\n        } catch (e) {\n          return false;\n        }\n      }\n\n      exports.ElementContainsCssClass = ElementContainsCssClass;\n\n      function AddClassNameToElement(element, className) {\n        if (!element || typeof className !== \"string\") return;\n        className = className.trim();\n        if (!ElementHasCssClass(element, className) && className !== \"\") element.className = element.className === \"\" ? className : element.className + \" \" + className;\n      }\n\n      exports.AddClassNameToElement = AddClassNameToElement;\n\n      function ElementHasCssClass(element, className) {\n        //B220674\n        try {\n          var elementClasses;\n          var classList = element.classList;\n\n          if (!classList) {\n            if (!element.className) return false;\n            elementClasses = element.className.split(\" \");\n          }\n\n          var classNames = className.split(\" \");\n\n          for (var i = classNames.length - 1; i >= 0; i--) {\n            if (classList) {\n              if (!classList.contains(classNames[i])) return false;\n              continue;\n            }\n\n            if (Data_1.Data.ArrayIndexOf(elementClasses, classNames[i]) < 0) return false;\n          }\n\n          return true;\n        } catch (e) {\n          return false;\n        }\n      }\n\n      exports.ElementHasCssClass = ElementHasCssClass;\n\n      function RemoveClassNameFromElement(element, className) {\n        if (!element) return;\n        var updClassName = \" \" + element.className + \" \";\n        var newClassName = updClassName.replace(\" \" + className + \" \", \" \");\n        if (updClassName.length != newClassName.length) element.className = Str_1.Str.Trim(newClassName);\n      }\n\n      exports.RemoveClassNameFromElement = RemoveClassNameFromElement;\n\n      function ToggleElementClassName(element, className, toggle) {\n        if (!element) return;\n        if (toggle === false || toggle === undefined && ElementHasCssClass(element, className)) RemoveClassNameFromElement(element, className);else if (toggle === true || toggle === undefined && !ElementHasCssClass(element, className)) AddClassNameToElement(element, className);\n      }\n\n      exports.ToggleElementClassName = ToggleElementClassName;\n\n      function GetAbsolutePositionY(element) {\n        if (Browser_1.Browser.IE) return getAbsolutePositionY_IE(element);else if (Browser_1.Browser.Firefox && Browser_1.Browser.Version >= 3) return getAbsolutePositionY_FF3(element);else if (Browser_1.Browser.Opera) return getAbsolutePositionY_Opera(element);else if (Browser_1.Browser.NetscapeFamily && (!Browser_1.Browser.Firefox || Browser_1.Browser.Version < 3)) return getAbsolutePositionY_NS(element);else if (Browser_1.Browser.WebKitFamily || Browser_1.Browser.Edge) return getAbsolutePositionY_FF3(element);else return getAbsolutePositionY_Other(element);\n      }\n\n      exports.GetAbsolutePositionY = GetAbsolutePositionY;\n\n      function getAbsolutePositionY_Opera(curEl) {\n        var isFirstCycle = true;\n        if (curEl && curEl.tagName == \"TR\" && curEl.cells.length > 0) curEl = curEl.cells[0];\n        var pos = getAbsoluteScrollOffset_OperaFF(curEl, false);\n\n        while (curEl != null) {\n          pos += curEl.offsetTop;\n          if (!isFirstCycle) pos -= curEl.scrollTop;\n          curEl = curEl.offsetParent;\n          isFirstCycle = false;\n        }\n\n        pos += document.body.scrollTop;\n        return pos;\n      }\n\n      function getAbsolutePositionY_IE(element) {\n        if (element == null || Browser_1.Browser.IE && element.parentNode == null) return 0; // B96664\n\n        return element.getBoundingClientRect().top + GetDocumentScrollTop();\n      }\n\n      function getAbsolutePositionY_FF3(element) {\n        if (element == null) return 0;\n        var y = element.getBoundingClientRect().top + GetDocumentScrollTop();\n        return Math.round(y);\n      }\n\n      function getAbsolutePositionY_NS(curEl) {\n        var pos = getAbsoluteScrollOffset_OperaFF(curEl, false);\n        var isFirstCycle = true;\n\n        while (curEl != null) {\n          pos += curEl.offsetTop;\n          if (!isFirstCycle && curEl.offsetParent != null) pos -= curEl.scrollTop;\n\n          if (!isFirstCycle && Browser_1.Browser.Firefox) {\n            var style = GetCurrentStyle(curEl);\n            if (curEl.tagName == \"DIV\" && style.overflow != \"visible\") pos += PxToInt(style.borderTopWidth);\n          }\n\n          isFirstCycle = false;\n          curEl = curEl.offsetParent;\n        }\n\n        return pos;\n      }\n\n      function getAbsolutePositionY_Other(curEl) {\n        var pos = 0;\n        var isFirstCycle = true;\n\n        while (curEl != null) {\n          pos += curEl.offsetTop;\n          if (!isFirstCycle && curEl.offsetParent != null) pos -= curEl.scrollTop;\n          isFirstCycle = false;\n          curEl = curEl.offsetParent;\n        }\n\n        return pos;\n      }\n\n      function getAbsoluteScrollOffset_OperaFF(curEl, isX) {\n        var pos = 0;\n        var isFirstCycle = true;\n\n        while (curEl != null) {\n          if (curEl.tagName == \"BODY\") break;\n          var style = GetCurrentStyle(curEl);\n          if (style.position == \"absolute\") break;\n          if (!isFirstCycle && curEl.tagName == \"DIV\" && (style.position == \"\" || style.position == \"static\")) pos -= isX ? curEl.scrollLeft : curEl.scrollTop;\n          curEl = curEl.parentNode;\n          isFirstCycle = false;\n        }\n\n        return pos;\n      }\n\n      function PxToInt(px) {\n        return pxToNumber(px, parseInt);\n      }\n\n      exports.PxToInt = PxToInt;\n      ;\n\n      function PxToFloat(px) {\n        return pxToNumber(px, parseFloat);\n      }\n\n      exports.PxToFloat = PxToFloat;\n      ;\n\n      function pxToNumber(px, parseFunction) {\n        var result = 0;\n\n        if (px != null && px != \"\") {\n          try {\n            var indexOfPx = px.indexOf(\"px\");\n            if (indexOfPx > -1) result = parseFunction(px.substr(0, indexOfPx));\n          } catch (e) {}\n        }\n\n        return result;\n      } //function GetAbsolutePositionX(element: HTMLElement): number;\n\n\n      function GetAbsolutePositionX(element) {\n        if (Browser_1.Browser.IE) return getAbsolutePositionX_IE(element);else if (Browser_1.Browser.Firefox && Browser_1.Browser.Version >= 3) return getAbsolutePositionX_FF3(element);else if (Browser_1.Browser.Opera) return getAbsolutePositionX_Opera(element);else if (Browser_1.Browser.NetscapeFamily && (!Browser_1.Browser.Firefox || Browser_1.Browser.Version < 3)) return getAbsolutePositionX_NS(element);else if (Browser_1.Browser.WebKitFamily || Browser_1.Browser.Edge) return getAbsolutePositionX_FF3(element);else return getAbsolutePositionX_Other(element);\n      }\n\n      exports.GetAbsolutePositionX = GetAbsolutePositionX;\n\n      function getAbsolutePositionX_Opera(curEl) {\n        var isFirstCycle = true;\n        var pos = getAbsoluteScrollOffset_OperaFF(curEl, true);\n\n        while (curEl != null) {\n          pos += curEl.offsetLeft;\n          if (!isFirstCycle) pos -= curEl.scrollLeft;\n          curEl = curEl.offsetParent;\n          isFirstCycle = false;\n        }\n\n        pos += document.body.scrollLeft;\n        return pos;\n      }\n\n      function getAbsolutePositionX_IE(element) {\n        if (element == null || Browser_1.Browser.IE && element.parentNode == null) return 0; // B96664\n\n        return element.getBoundingClientRect().left + GetDocumentScrollLeft();\n      }\n\n      function getAbsolutePositionX_FF3(element) {\n        if (element == null) return 0;\n        var x = element.getBoundingClientRect().left + GetDocumentScrollLeft();\n        return Math.round(x);\n      }\n\n      function getAbsolutePositionX_NS(curEl) {\n        var pos = getAbsoluteScrollOffset_OperaFF(curEl, true);\n        var isFirstCycle = true;\n\n        while (curEl != null) {\n          pos += curEl.offsetLeft;\n          if (!isFirstCycle && curEl.offsetParent != null) pos -= curEl.scrollLeft;\n\n          if (!isFirstCycle && Browser_1.Browser.Firefox) {\n            var style = GetCurrentStyle(curEl);\n            if (curEl.tagName == \"DIV\" && style.overflow != \"visible\") pos += PxToInt(style.borderLeftWidth);\n          }\n\n          isFirstCycle = false;\n          curEl = curEl.offsetParent;\n        }\n\n        return pos;\n      }\n\n      function getAbsolutePositionX_Other(curEl) {\n        var pos = 0;\n        var isFirstCycle = true;\n\n        while (curEl != null) {\n          pos += curEl.offsetLeft;\n          if (!isFirstCycle && curEl.offsetParent != null) pos -= curEl.scrollLeft;\n          isFirstCycle = false;\n          curEl = curEl.offsetParent;\n        }\n\n        return pos;\n      }\n\n      function SetAbsoluteX(element, x) {\n        element.style.left = prepareClientPosForElement(x, element, true) + \"px\";\n      }\n\n      exports.SetAbsoluteX = SetAbsoluteX;\n      ;\n\n      function SetAbsoluteY(element, y) {\n        element.style.top = prepareClientPosForElement(y, element, false) + \"px\";\n      }\n\n      exports.SetAbsoluteY = SetAbsoluteY;\n      ;\n\n      function prepareClientPosForElement(pos, element, isX) {\n        pos -= getPositionElementOffset(element, isX);\n        return pos;\n      }\n\n      ;\n\n      function getPositionElementOffset(element, isX) {\n        var div = createElementMock(element);\n        if (div.style.position == \"static\") div.style.position = \"absolute\";\n        element.parentNode.appendChild(div);\n        var realPos = isX ? GetAbsolutePositionX(div) : GetAbsolutePositionY(div);\n        element.parentNode.removeChild(div);\n        return Math.round(realPos);\n      }\n\n      ;\n\n      function createElementMock(element) {\n        var div = document.createElement('DIV');\n        div.style.top = \"0px\";\n        div.style.left = \"0px\";\n        div.style.visibility = \"hidden\";\n        div.style.position = GetCurrentStyle(element).position;\n        return div;\n      }\n\n      function IsPercentageSize(size) {\n        return size && size.indexOf('%') != -1;\n      }\n\n      exports.IsPercentageSize = IsPercentageSize;\n      ;\n\n      function GetChildNodes(parent, predicate) {\n        return RetrieveByPredicate(parent.childNodes, predicate);\n      }\n\n      exports.GetChildNodes = GetChildNodes;\n      ;\n\n      function GetNodes(parent, predicate) {\n        var c = parent.all || parent.getElementsByTagName('*');\n        return RetrieveByPredicate(c, predicate);\n      }\n\n      exports.GetNodes = GetNodes;\n      ;\n\n      function RetrieveByPredicate(scourceCollection, predicate) {\n        var result = [];\n\n        for (var i = 0; i < scourceCollection.length; i++) {\n          var element = scourceCollection[i];\n          if (!predicate || predicate(element)) result.push(element);\n        }\n\n        return result;\n      }\n\n      exports.RetrieveByPredicate = RetrieveByPredicate;\n      ;\n\n      function GetChildNodesByClassName(parent, className) {\n        if (!parent) return [];\n\n        if (parent.querySelectorAll) {\n          var children = parent.querySelectorAll('.' + className);\n          return nodeListToArray(children, function (element) {\n            return element.parentNode === parent;\n          });\n        }\n\n        return GetChildNodes(parent, function (elem) {\n          return elem.className && ElementHasCssClass(elem, className);\n        });\n      }\n\n      exports.GetChildNodesByClassName = GetChildNodesByClassName;\n\n      function nodeListToArray(nodeList, filter) {\n        var result = [];\n\n        for (var i = 0, element; element = nodeList[i]; i++) {\n          if (filter && !filter(element)) continue;\n          result.push(element);\n        }\n\n        return result;\n      }\n\n      function GetNodesByClassName(parent, className) {\n        if (parent.querySelectorAll) {\n          var children = parent.querySelectorAll('.' + className);\n          return nodeListToArray(children, null);\n        }\n\n        return GetNodes(parent, function (elem) {\n          return elem.className && ElementHasCssClass(elem, className);\n        });\n      }\n\n      exports.GetNodesByClassName = GetNodesByClassName;\n\n      function GetParentByClassName(element, className) {\n        while (element != null) {\n          if (element.tagName == \"BODY\" || element.nodeName == \"#document\") return null;\n          if (ElementContainsCssClass(element, className)) return element;\n          element = element.parentNode;\n        }\n\n        return null;\n      }\n\n      exports.GetParentByClassName = GetParentByClassName;\n\n      function GetParentByTagName(element, tagName) {\n        tagName = tagName.toUpperCase();\n\n        while (element) {\n          if (element.tagName === \"BODY\") return null;\n          if (element.tagName === tagName) return element;\n          element = element.parentNode;\n        }\n\n        return null;\n      }\n\n      exports.GetParentByTagName = GetParentByTagName;\n      var html2PlainTextFilter = null;\n\n      function setInnerHtmlInternal(el, trustedHtmlString) {\n        el.innerHTML = trustedHtmlString;\n      }\n\n      exports.setInnerHtmlInternal = setInnerHtmlInternal;\n\n      function SetElementDisplay(element, value, checkCurrentStyle, makeInline) {\n        if (!element) return;\n        if (typeof value === \"string\") element.style.display = value;else if (!value) element.style.display = \"none\";else {\n          element.style.display = \"\";\n\n          if (checkCurrentStyle && GetCurrentStyle(element).display === \"none\") {\n            var displayAddon = makeInline ? \"inline-\" : \"\";\n\n            switch (element.tagName) {\n              case \"TABLE\":\n                {\n                  element.style.display = displayAddon + \"table\";\n                  break;\n                }\n\n              default:\n                {\n                  element.style.display = displayAddon + \"block\";\n                  break;\n                }\n            }\n          }\n        }\n      }\n\n      exports.SetElementDisplay = SetElementDisplay;\n\n      function GetInnerText(container) {\n        if (Browser_1.Browser.Safari && Browser_1.Browser.MajorVersion <= 5) {\n          var filter = getHtml2PlainTextFilter();\n          setInnerHtmlInternal(filter, container.innerHTML);\n          SetElementDisplay(filter, true, false, false);\n          var innerText = filter.innerText;\n          SetElementDisplay(filter, false, false, false);\n          return innerText;\n        } else if (Browser_1.Browser.NetscapeFamily || Browser_1.Browser.WebKitFamily || Browser_1.Browser.IE && Browser_1.Browser.Version >= 9 || Browser_1.Browser.Edge) {\n          return container.textContent;\n        } else return container.innerText;\n      }\n\n      exports.GetInnerText = GetInnerText;\n\n      function getHtml2PlainTextFilter() {\n        if (html2PlainTextFilter == null) {\n          html2PlainTextFilter = document.createElement(\"DIV\");\n          html2PlainTextFilter.style.width = \"0\";\n          html2PlainTextFilter.style.height = \"0\";\n          html2PlainTextFilter.style.overflow = \"visible\";\n          SetElementDisplay(html2PlainTextFilter, false, false, false);\n          document.body.appendChild(html2PlainTextFilter);\n        }\n\n        return html2PlainTextFilter;\n      }\n\n      var verticalScrollBarWidth;\n\n      function GetVerticalScrollBarWidth() {\n        if (typeof verticalScrollBarWidth == \"undefined\") {\n          var container = document.createElement(\"DIV\");\n          container.style.cssText = \"position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box\";\n          document.body.appendChild(container);\n          var child = document.createElement(\"P\");\n          container.appendChild(child);\n          child.style.cssText = \"width: 100%; height: 200px;\";\n          var widthWithoutScrollBar = child.offsetWidth;\n          container.style.overflow = \"scroll\";\n          var widthWithScrollBar = child.offsetWidth;\n          if (widthWithoutScrollBar == widthWithScrollBar) widthWithScrollBar = container.clientWidth;\n          verticalScrollBarWidth = widthWithoutScrollBar - widthWithScrollBar;\n          document.body.removeChild(container);\n        }\n\n        return verticalScrollBarWidth;\n      }\n\n      exports.GetVerticalScrollBarWidth = GetVerticalScrollBarWidth;\n\n      function GetHorizontalBordersWidth(element, style) {\n        if (!IsExists(style)) style = Browser_1.Browser.IE && window.getComputedStyle ? window.getComputedStyle(element) : GetCurrentStyle(element);\n        var res = 0;\n        if (style.borderLeftStyle != \"none\") res += PxToFloat(style.borderLeftWidth);\n        if (style.borderRightStyle != \"none\") res += PxToFloat(style.borderRightWidth);\n        return res;\n      }\n\n      exports.GetHorizontalBordersWidth = GetHorizontalBordersWidth;\n\n      function GetVerticalBordersWidth(element, style) {\n        if (!IsExists(style)) style = Browser_1.Browser.IE && Browser_1.Browser.MajorVersion != 9 && window.getComputedStyle ? window.getComputedStyle(element) : GetCurrentStyle(element);\n        var res = 0;\n        if (style.borderTopStyle != \"none\") res += PxToFloat(style.borderTopWidth);\n        if (style.borderBottomStyle != \"none\") res += PxToFloat(style.borderBottomWidth);\n        return res;\n      }\n\n      exports.GetVerticalBordersWidth = GetVerticalBordersWidth;\n\n      function SetElementVisibility(element, value) {\n        if (!element) return;\n        if (typeof value === \"string\") element.style.visibility = value;else element.style.visibility = value ? \"visible\" : \"hidden\";\n      }\n\n      exports.SetElementVisibility = SetElementVisibility;\n      ;\n\n      function SetElementFloat(element, value) {\n        if (IsExists(element.style.cssFloat)) element.style.cssFloat = value;else if (IsExists(element.style.styleFloat)) element.style.styleFloat = value;else Attr_1.Attr.SetAttribute(element.style, \"float\", value);\n      }\n\n      exports.SetElementFloat = SetElementFloat;\n      ;\n\n      function SetElementOpacity(element, value) {\n        var useOpacityStyle = !Browser_1.Browser.IE || Browser_1.Browser.Version > 8;\n\n        if (useOpacityStyle) {\n          element.style.opacity = value;\n        } else {\n          if (typeof element.filters === \"object\" && element.filters[\"DXImageTransform.Microsoft.Alpha\"]) element.filters.item(\"DXImageTransform.Microsoft.Alpha\").Opacity = value * 100;else element.style.filter = \"alpha(opacity=\" + value * 100 + \")\";\n        }\n      }\n\n      exports.SetElementOpacity = SetElementOpacity;\n\n      function CreateGuid() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n          var r = Math.random() * 16 | 0; // trunc fractional part\n\n          var v = c == 'x' ? r : r & 0x3 | 0x8;\n          return v.toString(16);\n        });\n      }\n\n      exports.CreateGuid = CreateGuid;\n\n      function IsUrlContainsClientScript(url) {\n        return url.toLowerCase().indexOf(\"javascript:\") !== -1;\n      }\n\n      exports.IsUrlContainsClientScript = IsUrlContainsClientScript;\n\n      function IsExistsElement(element) {\n        return element && IsValidElement(element);\n      }\n\n      exports.IsExistsElement = IsExistsElement;\n\n      function IsValidElement(element) {\n        if (!element) return false;\n\n        if (!(Browser_1.Browser.Firefox && Browser_1.Browser.Version < 4)) {\n          if (element.ownerDocument && element.ownerDocument.body && element.ownerDocument.body.compareDocumentPosition) return element.ownerDocument.body.compareDocumentPosition(element) % 2 === 0;\n        }\n\n        if (!Browser_1.Browser.Opera && !(Browser_1.Browser.IE && Browser_1.Browser.Version < 9) && element.offsetParent && element.parentNode.tagName) return true;\n\n        while (element != null) {\n          if (element.tagName == \"BODY\") return true;\n          element = element.parentNode;\n        }\n\n        return false;\n      }\n\n      exports.IsValidElement = IsValidElement;\n\n      function IsInteractiveControl(element) {\n        return Data_1.Data.ArrayIndexOf([\"A\", \"INPUT\", \"SELECT\", \"OPTION\", \"TEXTAREA\", \"BUTTON\", \"IFRAME\"], element.tagName) > -1;\n      }\n\n      exports.IsInteractiveControl = IsInteractiveControl;\n\n      function IsActionElement(element) {\n        if (!IsExistsElement(element)) return false;\n        var tabIndex = parseInt(Attr_1.Attr.GetAttribute(element, Attr_1.Attr.GetTabIndexAttributeName()));\n        var hasTabIndex = !isNaN(tabIndex);\n        var hasNonNegativeTabIndex = hasTabIndex && tabIndex > -1;\n        var hasNegativeTabIndex = hasTabIndex && tabIndex < 0;\n        var tagName = element.tagName;\n        var focusableElementTags = [\"BUTTON\", \"SELECT\", \"TEXTAREA\", \"OPTION\", \"IFRAME\"];\n        var isFocusableCore = IsFocusable(element);\n        var isFocusableTag = focusableElementTags.indexOf(tagName) !== -1;\n        var isFocusableLink = tagName === \"A\" && (!!element.href || hasNonNegativeTabIndex);\n        var isFocusableInput = tagName === \"INPUT\" && element.type.toLowerCase() !== \"hidden\";\n        var isFocusableByTabIndex = tagName !== \"INPUT\" && hasNonNegativeTabIndex;\n        var isEditableDiv = tagName == \"DIV\" && element.contentEditable === \"true\";\n        return isFocusableCore && !hasNegativeTabIndex && (isFocusableTag || isFocusableLink || isFocusableInput || isFocusableByTabIndex || isEditableDiv);\n      }\n\n      exports.IsActionElement = IsActionElement;\n\n      function IsFocusable(element, skipContainerVisibilityCheck) {\n        if (skipContainerVisibilityCheck === void 0) {\n          skipContainerVisibilityCheck = function skipContainerVisibilityCheck() {\n            return false;\n          };\n        }\n\n        var current = element;\n\n        while (current && current.nodeType == 1) {\n          if (current == element || !skipContainerVisibilityCheck(current)) {\n            var tagName = current.tagName.toUpperCase();\n            if (tagName == \"BODY\") return true;\n            var disabledElementTags = [\"INPUT\", \"BUTTON\", \"TEXTAREA\", \"SELECT\", \"OPTION\"];\n            if (disabledElementTags.indexOf(tagName) !== -1 && current.disabled || !GetElementDisplay(current, false) || !GetElementVisibility(current, false)) return false;\n          }\n\n          current = current.parentNode;\n        }\n\n        return true;\n      }\n\n      exports.IsFocusable = IsFocusable;\n\n      function GetElementDisplay(element, isCurrentStyle) {\n        if (isCurrentStyle) return GetCurrentStyle(element).display != \"none\";\n        return element.style.display != \"none\";\n      }\n\n      exports.GetElementDisplay = GetElementDisplay;\n\n      function GetElementVisibility(element, isCurrentStyle) {\n        if (isCurrentStyle) return GetCurrentStyle(element).visibility != \"hidden\";\n        return element.style.visibility != \"hidden\";\n      }\n\n      exports.GetElementVisibility = GetElementVisibility;\n\n      function GetClearClientHeight(element) {\n        return element.offsetHeight - GetTopBottomBordersAndPaddingsSummaryValue(element);\n      }\n\n      exports.GetClearClientHeight = GetClearClientHeight;\n\n      function GetTopBottomBordersAndPaddingsSummaryValue(element, currentStyle) {\n        return GetTopBottomPaddings(element, currentStyle) + GetVerticalBordersWidth(element, currentStyle);\n      }\n\n      exports.GetTopBottomBordersAndPaddingsSummaryValue = GetTopBottomBordersAndPaddingsSummaryValue;\n      ;\n\n      function GetTopBottomPaddings(element, style) {\n        var currentStyle = style ? style : GetCurrentStyle(element);\n        return PxToInt(currentStyle.paddingTop) + PxToInt(currentStyle.paddingBottom);\n      }\n\n      exports.GetTopBottomPaddings = GetTopBottomPaddings;\n      ;\n\n      function ParseShortcutString(shortcutString) {\n        if (!shortcutString) return 0;\n        var isCtrlKey = false;\n        var isShiftKey = false;\n        var isAltKey = false;\n        var isMetaKey = false;\n        var keyCode = null;\n        var shcKeys = shortcutString.toString().split(\"+\");\n\n        if (shcKeys.length > 0) {\n          for (var i = 0; i < shcKeys.length; i++) {\n            var key = Str_1.Str.Trim(shcKeys[i].toUpperCase());\n\n            switch (key) {\n              case \"CONTROL\":\n              case \"CONTROLKEY\":\n              case \"CTRL\":\n                isCtrlKey = true;\n                break;\n\n              case \"SHIFT\":\n              case \"SHIFTKEY\":\n                isShiftKey = true;\n                break;\n\n              case \"ALT\":\n                isAltKey = true;\n                break;\n\n              case \"CMD\":\n                isMetaKey = true;\n                break;\n\n              case \"F1\":\n                keyCode = KeyCode_1.KeyCode.F1;\n                break;\n\n              case \"F2\":\n                keyCode = KeyCode_1.KeyCode.F2;\n                break;\n\n              case \"F3\":\n                keyCode = KeyCode_1.KeyCode.F3;\n                break;\n\n              case \"F4\":\n                keyCode = KeyCode_1.KeyCode.F4;\n                break;\n\n              case \"F5\":\n                keyCode = KeyCode_1.KeyCode.F5;\n                break;\n\n              case \"F6\":\n                keyCode = KeyCode_1.KeyCode.F6;\n                break;\n\n              case \"F7\":\n                keyCode = KeyCode_1.KeyCode.F7;\n                break;\n\n              case \"F8\":\n                keyCode = KeyCode_1.KeyCode.F8;\n                break;\n\n              case \"F9\":\n                keyCode = KeyCode_1.KeyCode.F9;\n                break;\n\n              case \"F10\":\n                keyCode = KeyCode_1.KeyCode.F10;\n                break;\n\n              case \"F11\":\n                keyCode = KeyCode_1.KeyCode.F11;\n                break;\n\n              case \"F12\":\n                keyCode = KeyCode_1.KeyCode.F12;\n                break;\n\n              case \"RETURN\":\n              case \"ENTER\":\n                keyCode = KeyCode_1.KeyCode.Enter;\n                break;\n\n              case \"HOME\":\n                keyCode = KeyCode_1.KeyCode.Home;\n                break;\n\n              case \"END\":\n                keyCode = KeyCode_1.KeyCode.End;\n                break;\n\n              case \"LEFT\":\n                keyCode = KeyCode_1.KeyCode.Left;\n                break;\n\n              case \"RIGHT\":\n                keyCode = KeyCode_1.KeyCode.Right;\n                break;\n\n              case \"UP\":\n                keyCode = KeyCode_1.KeyCode.Up;\n                break;\n\n              case \"DOWN\":\n                keyCode = KeyCode_1.KeyCode.Down;\n                break;\n\n              case \"PAGEUP\":\n                keyCode = KeyCode_1.KeyCode.PageUp;\n                break;\n\n              case \"PAGEDOWN\":\n                keyCode = KeyCode_1.KeyCode.PageDown;\n                break;\n\n              case \"SPACE\":\n                keyCode = KeyCode_1.KeyCode.Space;\n                break;\n\n              case \"TAB\":\n                keyCode = KeyCode_1.KeyCode.Tab;\n                break;\n\n              case \"BACKSPACE\":\n              case \"BACK\":\n                keyCode = KeyCode_1.KeyCode.Backspace;\n                break;\n\n              case \"CONTEXT\":\n                keyCode = KeyCode_1.KeyCode.ContextMenu;\n                break;\n\n              case \"ESCAPE\":\n              case \"ESC\":\n                keyCode = KeyCode_1.KeyCode.Esc;\n                break;\n\n              case \"DELETE\":\n              case \"DEL\":\n                keyCode = KeyCode_1.KeyCode.Delete;\n                break;\n\n              case \"INSERT\":\n              case \"INS\":\n                keyCode = KeyCode_1.KeyCode.Insert;\n                break;\n\n              case \"PLUS\":\n                keyCode = \"+\".charCodeAt(0);\n                break;\n\n              default:\n                keyCode = key.charCodeAt(0);\n                break;\n            }\n          }\n        } else ShowErrorAlert(\"Invalid shortcut\");\n\n        return GetShortcutCode(keyCode, isCtrlKey, isShiftKey, isAltKey, isMetaKey);\n      }\n\n      exports.ParseShortcutString = ParseShortcutString;\n\n      function ShowErrorAlert(message) {\n        message = Str_1.Str.DecodeHtmlViaTextArea(message);\n        if (IsExists(message) && message !== \"\") alert(message);\n      }\n\n      exports.ShowErrorAlert = ShowErrorAlert;\n      ;\n\n      function GetShortcutCode(keyCode, isCtrlKey, isShiftKey, isAltKey, isMetaKey) {\n        var value = keyCode;\n        value |= isCtrlKey ? KeyCode_1.ModifierKey.Ctrl : 0;\n        value |= isShiftKey ? KeyCode_1.ModifierKey.Shift : 0;\n        value |= isAltKey ? KeyCode_1.ModifierKey.Alt : 0;\n        value |= isMetaKey ? KeyCode_1.ModifierKey.Meta : 0;\n        return value;\n      }\n\n      exports.GetShortcutCode = GetShortcutCode;\n      ;\n\n      function GetShortcutCodeByEvent(evt) {\n        return GetShortcutCode(Evt_1.Evt.GetKeyCode(evt), evt.ctrlKey, evt.shiftKey, evt.altKey, Browser_1.Browser.MacOSPlatform ? evt.metaKey : false);\n      }\n\n      exports.GetShortcutCodeByEvent = GetShortcutCodeByEvent;\n      ;\n      /***/\n    },\n    /* 18 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var Utils_1 = __webpack_require__(15);\n\n      var SvgPrimitive =\n      /** @class */\n      function () {\n        function SvgPrimitive(style, className, clipPathId, onApplyProperties) {\n          this.style = style;\n          this.className = className;\n          this.clipPathId = clipPathId;\n          this.onApplyProperties = onApplyProperties;\n          this.children = [];\n        }\n\n        SvgPrimitive.prototype.createElement = function () {\n          var el = this.createMainElement();\n          this.createChildElements(el);\n          return el;\n        };\n\n        SvgPrimitive.prototype.createChildElements = function (parent) {\n          for (var i = 0; i < this.children.length; i++) {\n            parent.appendChild(this.children[i].createElement());\n          }\n        };\n\n        SvgPrimitive.prototype.applyElementProperties = function (element) {\n          this.applyElementStyleProperties(element);\n          if (this.className) element.setAttribute(\"class\", this.className);\n\n          if (typeof this.clipPathId === \"string\") {\n            if (this.clipPathId) element.setAttribute(\"clip-path\", Utils_1.RenderUtils.getUrlPathById(this.clipPathId));else element.removeAttribute(\"clip-path\");\n          }\n\n          if (this.onApplyProperties) this.onApplyProperties(element);\n          this.applyChildrenProperties(element);\n        };\n\n        SvgPrimitive.prototype.applyChildrenProperties = function (element) {\n          for (var i = 0; i < this.children.length; i++) {\n            this.children[i].applyElementProperties(element.childNodes[i]);\n          }\n        };\n\n        SvgPrimitive.prototype.applyElementStyleProperties = function (element) {\n          this.applyElementStylePropertiesCore(element);\n        };\n\n        SvgPrimitive.prototype.applyElementStylePropertiesCore = function (element, reverseTextAnchor) {\n          if (reverseTextAnchor === void 0) {\n            reverseTextAnchor = false;\n          }\n\n          if (this.style) Utils_1.RenderUtils.applyStyleToElement(this.style, element, reverseTextAnchor);\n        };\n\n        SvgPrimitive.prototype.setUnitAttribute = function (element, key, value) {\n          if (value === undefined || value === null) return;\n          var valueStr = typeof value === \"number\" ? UnitConverter_1.UnitConverter.twipsToPixels(value).toString() : value;\n          element.setAttribute(key, valueStr);\n        };\n\n        SvgPrimitive.prototype.dispose = function () {\n          if (this.children) this.children.forEach(function (primitive) {\n            return primitive.dispose();\n          });\n        };\n\n        return SvgPrimitive;\n      }();\n\n      exports.SvgPrimitive = SvgPrimitive;\n      /***/\n    },\n    /* 19 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var ImageCache_1 = __webpack_require__(49);\n\n      var Color_1 = __webpack_require__(38);\n\n      var DiagramUnit;\n\n      (function (DiagramUnit) {\n        DiagramUnit[DiagramUnit[\"In\"] = 0] = \"In\";\n        DiagramUnit[DiagramUnit[\"Cm\"] = 1] = \"Cm\";\n        DiagramUnit[DiagramUnit[\"Px\"] = 2] = \"Px\";\n      })(DiagramUnit = exports.DiagramUnit || (exports.DiagramUnit = {}));\n\n      var PageOrientation;\n\n      (function (PageOrientation) {\n        PageOrientation[PageOrientation[\"Portrait\"] = 0] = \"Portrait\";\n        PageOrientation[PageOrientation[\"Landscape\"] = 1] = \"Landscape\";\n      })(PageOrientation = exports.PageOrientation || (exports.PageOrientation = {}));\n\n      var DiagramModel =\n      /** @class */\n      function () {\n        function DiagramModel(pageSize) {\n          if (pageSize === void 0) {\n            pageSize = new Utils_1.Size(8391, 11906);\n          }\n\n          this.items = [];\n          this.itemIndexByKey = {};\n          this.pageSize = new Utils_1.Size(8391, 11906);\n          this.pageLandscape = false;\n          this.pageColor = DiagramModel.defaultPageColor;\n          this.units = DiagramUnit.In;\n          this.snapStartPoint = new Utils_1.Point(0, 0);\n          this.pageSize = pageSize;\n          this.size = this.pageSize.clone();\n          this.rectangle = new Utils_1.Rectangle(new Utils_1.Point(0, 0), new Utils_1.Size(0, 0));\n        }\n\n        Object.defineProperty(DiagramModel.prototype, \"pageWidth\", {\n          get: function get() {\n            return this.pageLandscape ? this.pageSize.height : this.pageSize.width;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramModel.prototype, \"pageHeight\", {\n          get: function get() {\n            return this.pageLandscape ? this.pageSize.width : this.pageSize.height;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        DiagramModel.prototype.getRectangle = function (forceUpdate) {\n          if (forceUpdate) this.rectangle = Utils_1.GeometryUtils.getCommonRectangle(this.items.map(function (i) {\n            return i.rectangle;\n          }));\n          return this.rectangle;\n        };\n\n        DiagramModel.getRectangle = function (items) {\n          return Utils_1.GeometryUtils.getCommonRectangle(items.map(function (i) {\n            return i.rectangle;\n          }));\n        };\n\n        DiagramModel.prototype.pushItem = function (item) {\n          var index = this.items.push(item);\n          this.itemIndexByKey[item.key] = index - 1;\n          if (item instanceof Shape_1.Shape && !item.image.isEmpty) this.cacheShapeImage(item);\n        };\n\n        DiagramModel.prototype.removeItem = function (item) {\n          var index = this.getItemIndex(item);\n          delete this.itemIndexByKey[item.key];\n          this.items.splice(index, 1);\n          this.updateIndicesHash(index);\n        };\n\n        DiagramModel.prototype.updateIndicesHash = function (startIndex) {\n          for (var i = startIndex; i < this.items.length; i++) {\n            this.itemIndexByKey[this.items[i].key] = i;\n          }\n        };\n\n        DiagramModel.prototype.getItemIndex = function (item) {\n          return this.itemIndexByKey[item.key];\n        };\n\n        DiagramModel.prototype.findShape = function (key) {\n          var shape = this.findItem(key);\n          return shape instanceof Shape_1.Shape ? shape : undefined;\n        };\n\n        DiagramModel.prototype.findShapesCore = function (callback) {\n          var shapes;\n          shapes = [];\n          this.items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) {\n              if (callback(item)) {\n                shapes.push(item);\n                return;\n              }\n            }\n          });\n          return shapes;\n        };\n\n        DiagramModel.prototype.findShapeCore = function (callback) {\n          var shape;\n          this.items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) {\n              if (callback(item)) {\n                shape = item;\n                return;\n              }\n            }\n          });\n          return shape;\n        };\n\n        DiagramModel.prototype.findShapeAtPosition = function (position) {\n          return this.findShapeCore(function (shape) {\n            return shape.position.equals(position);\n          });\n        };\n\n        DiagramModel.prototype.findShapeByDataKey = function (key) {\n          return this.findShapeCore(function (shape) {\n            return shape.dataKey === key;\n          });\n        };\n\n        DiagramModel.prototype.findShapesByImageUrl = function (imageUrl) {\n          return this.findShapesCore(function (shape) {\n            return shape.image.url === imageUrl;\n          });\n        };\n\n        DiagramModel.prototype.cacheShapeImage = function (shape) {\n          var cacheImageInfo = ImageCache_1.ImageCache.instance.createUnloadedInfoByShapeImageInfo(shape.image);\n          if (cacheImageInfo.isLoaded) shape.image.loadBase64Content(cacheImageInfo.base64);\n        };\n\n        DiagramModel.prototype.loadAllImages = function (imageLoader) {\n          ImageCache_1.ImageCache.instance.loadAllImages(imageLoader);\n        };\n\n        DiagramModel.prototype.findContainer = function (key) {\n          var shape = this.findShape(key);\n          return shape && shape.enableChildren ? shape : undefined;\n        };\n\n        DiagramModel.prototype.getChildren = function (container) {\n          var _this = this;\n\n          return container.childKeys.map(function (key) {\n            return _this.findItem(key);\n          }).filter(function (item) {\n            return item;\n          });\n        };\n\n        DiagramModel.prototype.findChild = function (container, key, recursive) {\n          var _this = this;\n\n          if (recursive === void 0) {\n            recursive = true;\n          }\n\n          var result;\n          container.childKeys.forEach(function (childKey) {\n            if (result) return;\n\n            var child = _this.findItem(childKey);\n\n            if (childKey === key) {\n              result = child;\n              return;\n            }\n\n            if (recursive && child instanceof Shape_1.Shape) {\n              result = _this.findChild(child, key, recursive);\n              if (result) return;\n            }\n          });\n          return result;\n        };\n\n        DiagramModel.prototype.findItemContainerCore = function (item, callback) {\n          var container = item.container;\n\n          while (container) {\n            if (!callback || callback(container)) break;\n            container = container.container;\n          }\n\n          return container;\n        };\n\n        DiagramModel.prototype.findItemContainer = function (item) {\n          return this.findItemContainerCore(item);\n        };\n\n        DiagramModel.prototype.findItemCollapsedContainer = function (item) {\n          return this.findItemContainerCore(item, function (c) {\n            return !c.expanded;\n          });\n        };\n\n        DiagramModel.prototype.findItemTopCollapsedContainer = function (item) {\n          var container = item.container;\n          var collapsedContainer;\n\n          while (container) {\n            if (!container.expanded) collapsedContainer = container;\n            container = container.container;\n          }\n\n          return collapsedContainer;\n        };\n\n        DiagramModel.prototype.isContainerItem = function (container, item) {\n          return this.findItemContainerCore(item, function (c) {\n            return c.key === container.key;\n          }) !== undefined;\n        };\n\n        DiagramModel.prototype.findConnector = function (key) {\n          var connector = this.findItem(key);\n          return connector instanceof Connector_1.Connector ? connector : undefined;\n        };\n\n        DiagramModel.prototype.findConnectorCore = function (callback) {\n          var connector;\n          this.items.forEach(function (item) {\n            if (item instanceof Connector_1.Connector) {\n              if (callback(item)) {\n                connector = item;\n                return;\n              }\n            }\n          });\n          return connector;\n        };\n\n        DiagramModel.prototype.findConnectorAtPoints = function (points) {\n          return this.findConnectorCore(function (connector) {\n            return Utils_1.GeometryUtils.arePointsEqual(connector.points, points);\n          });\n        };\n\n        DiagramModel.prototype.findConnectorByDataKey = function (key) {\n          return this.findConnectorCore(function (connector) {\n            return connector.dataKey === key;\n          });\n        };\n\n        DiagramModel.prototype.findConnectorsCore = function (callback) {\n          var result = [];\n          this.items.forEach(function (item) {\n            if (item instanceof Connector_1.Connector) {\n              if (callback(item)) {\n                result.push(item);\n                return;\n              }\n            }\n          });\n          return result;\n        };\n\n        DiagramModel.prototype.findConnectorsWithoutBeginItem = function () {\n          return this.findConnectorsCore(function (connector) {\n            return !connector.beginItem;\n          });\n        };\n\n        DiagramModel.prototype.findConnectorsWithoutEndItem = function () {\n          return this.findConnectorsCore(function (connector) {\n            return !connector.endItem;\n          });\n        };\n\n        DiagramModel.prototype.findItem = function (key) {\n          return this.items[this.itemIndexByKey[key]];\n        };\n\n        DiagramModel.isIntersectedItems = function (item1, item2) {\n          var result = false;\n          if (item1 instanceof Shape_1.Shape) result = item2.intersectedByRect(item1.rectangle);else if (item1 instanceof Connector_1.Connector) {\n            item1.getSegments().forEach(function (s1) {\n              if (item2 instanceof Shape_1.Shape) result = result || s1.intersectRect(item2.rectangle);else if (item2 instanceof Connector_1.Connector) {\n                item2.getSegments().forEach(function (s2) {\n                  result = result || s1.intersect(s2);\n                });\n              }\n            });\n          }\n          return result;\n        };\n\n        DiagramModel.prototype.getIntersectItems = function (item) {\n          var result = [];\n          this.items.forEach(function (i) {\n            if (i.container !== item.container) return;\n            if (item !== i && (!(i instanceof Connector_1.Connector) || item.attachedConnectors.indexOf(i) === -1) && DiagramModel.isIntersectedItems(i, item)) result.push(i);\n          });\n          return result;\n        };\n\n        DiagramModel.prototype.getIntersectItemsMinZIndex = function (item) {\n          var items = this.getIntersectItems(item);\n          return items.map(function (i) {\n            return i.zIndex;\n          }).reduce(function (prev, cur) {\n            return Math.min(prev, cur);\n          }, Number.MAX_VALUE);\n        };\n\n        DiagramModel.prototype.getIntersectItemsMaxZIndex = function (item) {\n          var items = this.getIntersectItems(item);\n          return items.map(function (i) {\n            return i.zIndex;\n          }).reduce(function (prev, cur) {\n            return Math.max(prev, cur);\n          }, -Number.MAX_VALUE);\n        };\n\n        DiagramModel.prototype.iterateItems = function (callback) {\n          this.items.forEach(callback);\n        };\n\n        DiagramModel.prototype.invalidateItems = function () {\n          this.iterateItems(function (item) {\n            item.invalidatePrimitives();\n            if (item instanceof Connector_1.Connector) item.invalidateRenderPoints();\n          });\n        };\n\n        DiagramModel.prototype.getNextKey = function (baseKey) {\n          var _this = this;\n\n          return ModelUtils_1.ModelUtils.getNextItemKey(this.items.map(function (item) {\n            return item.key;\n          }), function (key) {\n            return _this.itemIndexByKey[key] === undefined;\n          }, baseKey);\n        };\n\n        DiagramModel.defaultPageColor = Color_1.ColorHelper.LIGHT_COLOR;\n        return DiagramModel;\n      }();\n\n      exports.DiagramModel = DiagramModel;\n      /***/\n    },\n    /* 20 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics9 = function extendStatics(d, b) {\n          _extendStatics9 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics9(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics9(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var RectanglePrimitive =\n      /** @class */\n      function (_super) {\n        __extends(RectanglePrimitive, _super);\n\n        function RectanglePrimitive(x, y, width, height, style, className, clipPathId, onApplyProperties) {\n          var _this = _super.call(this, style, className, clipPathId, onApplyProperties) || this;\n\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          return _this;\n        }\n\n        RectanglePrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"rect\");\n        };\n\n        RectanglePrimitive.prototype.applyElementProperties = function (element) {\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          this.setUnitAttribute(element, \"width\", this.width);\n          this.setUnitAttribute(element, \"height\", this.height);\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        return RectanglePrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.RectanglePrimitive = RectanglePrimitive;\n      /***/\n    },\n    /* 21 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeParameterPoint =\n      /** @class */\n      function () {\n        function ShapeParameterPoint(key, point) {\n          this.key = key;\n          this.point = point;\n        }\n\n        return ShapeParameterPoint;\n      }();\n\n      exports.ShapeParameterPoint = ShapeParameterPoint;\n      /***/\n    },\n    /* 22 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics10 = function extendStatics(d, b) {\n          _extendStatics10 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics10(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics10(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Connector_1 = __webpack_require__(5);\n\n      var LayoutSettings =\n      /** @class */\n      function () {\n        function LayoutSettings(gridSize) {\n          this.orientation = DataLayoutOrientation.Vertical;\n          this.direction = LogicalDirectionKind.Forward;\n          this.componentSpacing = gridSize && gridSize * 2 > 720 ? gridSize * 2 : 720;\n          this.columnSpacing = gridSize && gridSize * 2 > Connector_1.Connector.minOffset ? gridSize * 2 : Connector_1.Connector.minOffset;\n          this.layerSpacing = this.columnSpacing * 2;\n        }\n\n        return LayoutSettings;\n      }();\n\n      exports.LayoutSettings = LayoutSettings;\n\n      var TreeLayoutSettings =\n      /** @class */\n      function (_super) {\n        __extends(TreeLayoutSettings, _super);\n\n        function TreeLayoutSettings(gridSize) {\n          var _this = _super.call(this, gridSize) || this;\n\n          _this.alignment = Alignment.Center;\n          _this.subTreeColumnSpacing = _this.componentSpacing / 2;\n          return _this;\n        }\n\n        return TreeLayoutSettings;\n      }(LayoutSettings);\n\n      exports.TreeLayoutSettings = TreeLayoutSettings;\n      var LogicalDirectionKind;\n\n      (function (LogicalDirectionKind) {\n        LogicalDirectionKind[LogicalDirectionKind[\"Backward\"] = 0] = \"Backward\";\n        LogicalDirectionKind[LogicalDirectionKind[\"Forward\"] = 1] = \"Forward\";\n      })(LogicalDirectionKind = exports.LogicalDirectionKind || (exports.LogicalDirectionKind = {}));\n\n      var DataLayoutOrientation;\n\n      (function (DataLayoutOrientation) {\n        DataLayoutOrientation[DataLayoutOrientation[\"Horizontal\"] = 0] = \"Horizontal\";\n        DataLayoutOrientation[DataLayoutOrientation[\"Vertical\"] = 1] = \"Vertical\";\n      })(DataLayoutOrientation = exports.DataLayoutOrientation || (exports.DataLayoutOrientation = {}));\n\n      var Alignment;\n\n      (function (Alignment) {\n        Alignment[Alignment[\"Left\"] = 0] = \"Left\";\n        Alignment[Alignment[\"Center\"] = 1] = \"Center\";\n      })(Alignment = exports.Alignment || (exports.Alignment = {}));\n      /***/\n\n    },\n    /* 23 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Browser =\n      /** @class */\n      function () {\n        function Browser() {}\n\n        Browser.IdentUserAgent = function (userAgent, ignoreDocumentMode) {\n          if (ignoreDocumentMode === void 0) {\n            ignoreDocumentMode = false;\n          }\n\n          var browserTypesOrderedList = [\"Mozilla\", \"IE\", \"Firefox\", \"Netscape\", \"Safari\", \"Chrome\", \"Opera\", \"Opera10\", \"Edge\"];\n          var defaultBrowserType = \"IE\";\n          var defaultPlatform = \"Win\";\n          var defaultVersions = {\n            Safari: 2,\n            Chrome: 0.1,\n            Mozilla: 1.9,\n            Netscape: 8,\n            Firefox: 2,\n            Opera: 9,\n            IE: 6,\n            Edge: 12\n          };\n\n          if (!userAgent || userAgent.length == 0) {\n            Browser.fillUserAgentInfo(browserTypesOrderedList, defaultBrowserType, defaultVersions[defaultBrowserType], defaultPlatform);\n            return;\n          }\n\n          userAgent = userAgent.toLowerCase();\n          Browser.indentPlatformMajorVersion(userAgent);\n\n          try {\n            var platformIdentStrings = {\n              \"Windows\": \"Win\",\n              \"Macintosh\": \"Mac\",\n              \"Mac OS\": \"Mac\",\n              \"Mac_PowerPC\": \"Mac\",\n              \"cpu os\": \"MacMobile\",\n              \"cpu iphone os\": \"MacMobile\",\n              \"Android\": \"Android\",\n              \"!Windows Phone\": \"WinPhone\",\n              \"!WPDesktop\": \"WinPhone\",\n              \"!ZuneWP\": \"WinPhone\"\n            };\n            var optSlashOrSpace = \"(?:/|\\\\s*)?\";\n            var versionString = \"(\\\\d+)(?:\\\\.((?:\\\\d+?[1-9])|\\\\d)0*?)?\";\n            var optVersion = \"(?:\" + versionString + \")?\";\n            var patterns = {\n              Safari: \"applewebkit(?:.*?(?:version/\" + versionString + \"[\\\\.\\\\w\\\\d]*?(?:\\\\s+mobile\\/\\\\S*)?\\\\s+safari))?\",\n              Chrome: \"(?:chrome|crios)(?!frame)\" + optSlashOrSpace + optVersion,\n              Mozilla: \"mozilla(?:.*rv:\" + optVersion + \".*Gecko)?\",\n              Netscape: \"(?:netscape|navigator)\\\\d*/?\\\\s*\" + optVersion,\n              Firefox: \"firefox\" + optSlashOrSpace + optVersion,\n              Opera: \"(?:opera|\\sopr)\" + optSlashOrSpace + optVersion,\n              Opera10: \"opera.*\\\\s*version\" + optSlashOrSpace + optVersion,\n              IE: \"msie\\\\s*\" + optVersion,\n              Edge: \"edge\" + optSlashOrSpace + optVersion\n            };\n            var browserType;\n            var version = -1;\n\n            for (var i = 0; i < browserTypesOrderedList.length; i++) {\n              var browserTypeCandidate = browserTypesOrderedList[i];\n              var regExp = new RegExp(patterns[browserTypeCandidate], \"i\");\n              if (regExp.compile) regExp.compile(patterns[browserTypeCandidate], \"i\");\n              var matches = regExp.exec(userAgent);\n\n              if (matches && matches.index >= 0) {\n                if (browserType == \"IE\" && version >= 11 && browserTypeCandidate == \"Safari\") // WinPhone8.1 update\n                  continue;\n                browserType = browserTypeCandidate;\n                if (browserType == \"Opera10\") browserType = \"Opera\";\n                var tridentPattern = \"trident\" + optSlashOrSpace + optVersion;\n                version = Browser.GetBrowserVersion(userAgent, matches, tridentPattern, Browser.getIECompatibleVersionString());\n                if (browserType == \"Mozilla\" && version >= 11) browserType = \"IE\";\n              }\n            }\n\n            if (!browserType) browserType = defaultBrowserType;\n            var browserVersionDetected = version != -1;\n            if (!browserVersionDetected) version = defaultVersions[browserType];\n            var platform;\n            var minOccurenceIndex = Number.MAX_VALUE;\n\n            for (var identStr in platformIdentStrings) {\n              if (!platformIdentStrings.hasOwnProperty(identStr)) continue;\n              var importantIdent = identStr.substr(0, 1) == \"!\";\n              var occurenceIndex = userAgent.indexOf((importantIdent ? identStr.substr(1) : identStr).toLowerCase());\n\n              if (occurenceIndex >= 0 && (occurenceIndex < minOccurenceIndex || importantIdent)) {\n                minOccurenceIndex = importantIdent ? 0 : occurenceIndex;\n                platform = platformIdentStrings[identStr];\n              }\n            }\n\n            var samsungPattern = \"SM-[A-Z]\";\n            var m = userAgent.toUpperCase().match(samsungPattern);\n            var isSamsungAndroidDevice = m && m.length > 0;\n            if (platform == \"WinPhone\" && version < 9) version = Math.floor(Browser.getVersionFromTrident(userAgent, \"trident\" + optSlashOrSpace + optVersion));\n            if (!ignoreDocumentMode && browserType == \"IE\" && version > 7 && document.documentMode < version) version = document.documentMode;\n            if (platform == \"WinPhone\") version = Math.max(9, version);\n            if (!platform) platform = defaultPlatform;\n            if (platform == platformIdentStrings[\"cpu os\"] && !browserVersionDetected) // Terra browser\n              version = 4;\n            Browser.fillUserAgentInfo(browserTypesOrderedList, browserType, version, platform, isSamsungAndroidDevice);\n          } catch (e) {\n            Browser.fillUserAgentInfo(browserTypesOrderedList, defaultBrowserType, defaultVersions[defaultBrowserType], defaultPlatform);\n          }\n        };\n\n        Browser.GetBrowserVersion = function (userAgent, matches, tridentPattern, ieCompatibleVersionString) {\n          var version = Browser.getVersionFromMatches(matches);\n\n          if (ieCompatibleVersionString) {\n            var versionFromTrident = Browser.getVersionFromTrident(userAgent, tridentPattern);\n            if (ieCompatibleVersionString === \"edge\" || parseInt(ieCompatibleVersionString) === versionFromTrident) return versionFromTrident;\n          }\n\n          return version;\n        };\n\n        Browser.getIECompatibleVersionString = function () {\n          if (document.compatible) {\n            for (var i = 0; i < document.compatible.length; i++) {\n              if (document.compatible[i].userAgent === \"IE\" && document.compatible[i].version) return document.compatible[i].version.toLowerCase();\n            }\n          }\n\n          return \"\";\n        };\n\n        Browser.isTouchEnabled = function () {\n          return \"ontouchstart\" in window || navigator[\"maxTouchPoints\"] > 0 || navigator[\"msMaxTouchPoints\"] > 0;\n        };\n\n        Browser.fillUserAgentInfo = function (browserTypesOrderedList, browserType, version, platform, isSamsungAndroidDevice) {\n          if (isSamsungAndroidDevice === void 0) {\n            isSamsungAndroidDevice = false;\n          }\n\n          for (var i = 0; i < browserTypesOrderedList.length; i++) {\n            var type = browserTypesOrderedList[i];\n            Browser[type] = type == browserType;\n          }\n\n          Browser.Version = Math.floor(10.0 * version) / 10.0;\n          Browser.MajorVersion = Math.floor(Browser.Version);\n          Browser.WindowsPlatform = platform == \"Win\" || platform == \"WinPhone\";\n          Browser.MacOSPlatform = platform == \"Mac\";\n          Browser.MacOSMobilePlatform = platform == \"MacMobile\" || platform == \"Mac\" && Browser.isTouchEnabled();\n          Browser.AndroidMobilePlatform = platform == \"Android\";\n          Browser.WindowsPhonePlatform = platform == \"WinPhone\";\n          Browser.WebKitFamily = Browser.Safari || Browser.Chrome || Browser.Opera && Browser.MajorVersion >= 15;\n          Browser.NetscapeFamily = Browser.Netscape || Browser.Mozilla || Browser.Firefox;\n          Browser.HardwareAcceleration = Browser.IE && Browser.MajorVersion >= 9 || Browser.Firefox && Browser.MajorVersion >= 4 || Browser.AndroidMobilePlatform && Browser.Chrome || Browser.Chrome && Browser.MajorVersion >= 37 || Browser.Safari && !Browser.WindowsPlatform || Browser.Edge || Browser.Opera && Browser.MajorVersion >= 46;\n          Browser.WebKitTouchUI = Browser.MacOSMobilePlatform || Browser.AndroidMobilePlatform;\n          var isIETouchUI = Browser.IE && Browser.MajorVersion > 9 && Browser.WindowsPlatform && Browser.UserAgent.toLowerCase().indexOf(\"touch\") >= 0;\n          Browser.MSTouchUI = isIETouchUI || Browser.Edge && !!window.navigator.maxTouchPoints;\n          Browser.TouchUI = Browser.WebKitTouchUI || Browser.MSTouchUI;\n          Browser.MobileUI = Browser.WebKitTouchUI || Browser.WindowsPhonePlatform;\n          Browser.AndroidDefaultBrowser = Browser.AndroidMobilePlatform && !Browser.Chrome;\n          Browser.AndroidChromeBrowser = Browser.AndroidMobilePlatform && Browser.Chrome;\n          if (isSamsungAndroidDevice) Browser.SamsungAndroidDevice = isSamsungAndroidDevice;\n\n          if (Browser.MSTouchUI) {\n            var isARMArchitecture = Browser.UserAgent.toLowerCase().indexOf(\"arm;\") > -1;\n            Browser.VirtualKeyboardSupported = isARMArchitecture || Browser.WindowsPhonePlatform;\n          } else {\n            Browser.VirtualKeyboardSupported = Browser.WebKitTouchUI;\n          }\n\n          Browser.fillDocumentElementBrowserTypeClassNames(browserTypesOrderedList);\n        };\n\n        Browser.indentPlatformMajorVersion = function (userAgent) {\n          var regex = /(?:(?:windows nt|macintosh|mac os|cpu os|cpu iphone os|android|windows phone|linux) )(\\d+)(?:[-0-9_.])*/;\n          var matches = regex.exec(userAgent);\n          if (matches) Browser.PlaformMajorVersion = matches[1];\n        };\n\n        Browser.prototype.GetBrowserVersion = function (userAgent, matches, tridentPattern, ieCompatibleVersionString) {\n          var version = Browser.getVersionFromMatches(matches);\n\n          if (ieCompatibleVersionString) {\n            var versionFromTrident = Browser.getVersionFromTrident(userAgent, tridentPattern);\n            if (ieCompatibleVersionString === \"edge\" || parseInt(ieCompatibleVersionString) === versionFromTrident) return versionFromTrident;\n          }\n\n          return version;\n        };\n\n        Browser.getVersionFromMatches = function (matches) {\n          var result = -1;\n          var versionStr = \"\";\n\n          if (matches[1]) {\n            versionStr += matches[1];\n            if (matches[2]) versionStr += \".\" + matches[2];\n          }\n\n          if (versionStr != \"\") {\n            result = parseFloat(versionStr);\n            if (isNaN(result)) result = -1;\n          }\n\n          return result;\n        };\n\n        Browser.getVersionFromTrident = function (userAgent, tridentPattern) {\n          var tridentDiffFromVersion = 4;\n          var matches = new RegExp(tridentPattern, \"i\").exec(userAgent);\n          return Browser.getVersionFromMatches(matches) + tridentDiffFromVersion;\n        };\n\n        Browser.fillDocumentElementBrowserTypeClassNames = function (browserTypesOrderedList) {\n          var documentElementClassName = \"\";\n          var browserTypeslist = browserTypesOrderedList.concat([\"WindowsPlatform\", \"MacOSPlatform\", \"MacOSMobilePlatform\", \"AndroidMobilePlatform\", \"WindowsPhonePlatform\", \"WebKitFamily\", \"WebKitTouchUI\", \"MSTouchUI\", \"TouchUI\", \"AndroidDefaultBrowser\"]);\n\n          for (var i = 0; i < browserTypeslist.length; i++) {\n            var type = browserTypeslist[i];\n            if (Browser[type]) documentElementClassName += \"dx\" + type + \" \";\n          }\n\n          documentElementClassName += \"dxBrowserVersion-\" + Browser.MajorVersion;\n\n          if (document && document.documentElement) {\n            if (document.documentElement.className != \"\") documentElementClassName = \" \" + documentElementClassName;\n            document.documentElement.className += documentElementClassName;\n            Browser.Info = documentElementClassName;\n          }\n        };\n\n        Browser.UserAgent = window.navigator.userAgent.toLowerCase();\n        Browser._foo = Browser.IdentUserAgent(Browser.UserAgent); // to init\n\n        return Browser;\n      }();\n\n      exports.Browser = Browser;\n      /***/\n    },\n    /* 24 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      var ConnectorLineOption;\n\n      (function (ConnectorLineOption) {\n        ConnectorLineOption[ConnectorLineOption[\"Straight\"] = 0] = \"Straight\";\n        ConnectorLineOption[ConnectorLineOption[\"Orthogonal\"] = 1] = \"Orthogonal\";\n      })(ConnectorLineOption = exports.ConnectorLineOption || (exports.ConnectorLineOption = {}));\n\n      var ConnectorLineEnding;\n\n      (function (ConnectorLineEnding) {\n        ConnectorLineEnding[ConnectorLineEnding[\"None\"] = 0] = \"None\";\n        ConnectorLineEnding[ConnectorLineEnding[\"Arrow\"] = 1] = \"Arrow\";\n      })(ConnectorLineEnding = exports.ConnectorLineEnding || (exports.ConnectorLineEnding = {}));\n\n      exports.DEFAULT_CONNECTOR_LINEOPTION = ConnectorLineOption.Orthogonal;\n      exports.DEFAULT_CONNECTOR_STARTLINEENDING = ConnectorLineEnding.None;\n      exports.DEFAULT_CONNECTOR_ENDLINEENDING = ConnectorLineEnding.Arrow;\n\n      var ConnectorProperties =\n      /** @class */\n      function () {\n        function ConnectorProperties() {\n          this.lineOption = exports.DEFAULT_CONNECTOR_LINEOPTION;\n          this.startLineEnding = exports.DEFAULT_CONNECTOR_STARTLINEENDING;\n          this.endLineEnding = exports.DEFAULT_CONNECTOR_ENDLINEENDING;\n        }\n\n        ConnectorProperties.prototype.clone = function () {\n          var clone = new ConnectorProperties();\n          clone.lineOption = this.lineOption;\n          clone.startLineEnding = this.startLineEnding;\n          clone.endLineEnding = this.endLineEnding;\n          return clone;\n        };\n\n        ConnectorProperties.prototype.forEach = function (callback) {\n          for (var propertyName in this) {\n            if (this.hasOwnProperty(propertyName)) callback(propertyName);\n          }\n        };\n\n        ConnectorProperties.prototype.toObject = function () {\n          var result = {};\n          var modified = false;\n\n          if (this.lineOption !== exports.DEFAULT_CONNECTOR_LINEOPTION) {\n            result[\"lineOption\"] = this.lineOption;\n            modified = true;\n          }\n\n          if (this.startLineEnding !== exports.DEFAULT_CONNECTOR_STARTLINEENDING) {\n            result[\"startLineEnding\"] = this.startLineEnding;\n            modified = true;\n          }\n\n          if (this.endLineEnding !== exports.DEFAULT_CONNECTOR_ENDLINEENDING) {\n            result[\"endLineEnding\"] = this.endLineEnding;\n            modified = true;\n          }\n\n          return modified ? result : null;\n        };\n\n        ConnectorProperties.prototype.fromObject = function (obj) {\n          if (typeof obj[\"lineOption\"] === \"number\") this.lineOption = obj[\"lineOption\"];\n          if (typeof obj[\"startLineEnding\"] === \"number\") this.startLineEnding = obj[\"startLineEnding\"];\n          if (typeof obj[\"endLineEnding\"] === \"number\") this.endLineEnding = obj[\"endLineEnding\"];\n        };\n\n        return ConnectorProperties;\n      }();\n\n      exports.ConnectorProperties = ConnectorProperties;\n      /***/\n    },\n    /* 25 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ProcessShapeDescription_1 = __webpack_require__(156);\n\n      var DecisionShapeDescription_1 = __webpack_require__(157);\n\n      var ManualInputShapeDescription_1 = __webpack_require__(158);\n\n      var DataShapeDescription_1 = __webpack_require__(159);\n\n      var TerminatorShapeDescription_1 = __webpack_require__(160);\n\n      var PredefinedProcessShapeDescription_1 = __webpack_require__(161);\n\n      var ArrowNorthSouthShapeDescription_1 = __webpack_require__(162);\n\n      var ArrowRightShapeDescription_1 = __webpack_require__(163);\n\n      var ArrowTopShapeDescription_1 = __webpack_require__(164);\n\n      var CrossShapeDescription_1 = __webpack_require__(165);\n\n      var DiamondShapeDescription_1 = __webpack_require__(92);\n\n      var EllipseShapeDescription_1 = __webpack_require__(67);\n\n      var HeartShapeDescription_1 = __webpack_require__(166);\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var TextShapeDescription_1 = __webpack_require__(93);\n\n      var PentagonShapeDescription_1 = __webpack_require__(94);\n\n      var HexagonShapeDescription_1 = __webpack_require__(95);\n\n      var OctagonShapeDescription_1 = __webpack_require__(167);\n\n      var StarShapeDescription_1 = __webpack_require__(168);\n\n      var ArrowBottomShapeDescription_1 = __webpack_require__(169);\n\n      var ArrowEastWestShapeDescription_1 = __webpack_require__(170);\n\n      var ArrowLeftShapeDescription_1 = __webpack_require__(171);\n\n      var TriangleShapeDescription_1 = __webpack_require__(96);\n\n      var DocumentShapeDescription_1 = __webpack_require__(97);\n\n      var MultipleDocumentsShapeDescription_1 = __webpack_require__(172);\n\n      var PreparationShapeDescription_1 = __webpack_require__(173);\n\n      var HardDiskShapeDescription_1 = __webpack_require__(174);\n\n      var DatabaseShapeDescription_1 = __webpack_require__(175);\n\n      var InternalStorageShapeDescription_1 = __webpack_require__(176);\n\n      var PaperTapeShapeDescription_1 = __webpack_require__(177);\n\n      var ManualOperationShapeDescription_1 = __webpack_require__(178);\n\n      var DelayShapeDescription_1 = __webpack_require__(179);\n\n      var StoredDataShapeDescription_1 = __webpack_require__(180);\n\n      var MergeShapeDescription_1 = __webpack_require__(181);\n\n      var DisplayShapeDescription_1 = __webpack_require__(182);\n\n      var OrShapeDescription_1 = __webpack_require__(183);\n\n      var SummingJunctionShapeDescription_1 = __webpack_require__(184);\n\n      var CustomShapeDescription_1 = __webpack_require__(185);\n\n      var VerticalContainerDescription_1 = __webpack_require__(186);\n\n      var HorizontalContainerDescription_1 = __webpack_require__(187);\n\n      var CardWithImageOnLeftDescription_1 = __webpack_require__(188);\n\n      var CardWithImageOnRightDescription_1 = __webpack_require__(190);\n\n      var CardWithImageOnTopDescription_1 = __webpack_require__(191);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ShapeDescriptionManager =\n      /** @class */\n      function () {\n        function ShapeDescriptionManager() {}\n\n        ShapeDescriptionManager.get = function (type) {\n          return this.descriptions[type];\n        };\n\n        ShapeDescriptionManager.rectangle = function () {\n          return this.descriptions[ShapeTypes_1.ShapeTypes.Rectangle];\n        };\n\n        ShapeDescriptionManager.getTypesByCategory = function (category) {\n          return this.descriptionTypes[category];\n        };\n\n        ShapeDescriptionManager.getCategoryByType = function (type) {\n          return this.descriptionCategories[type];\n        };\n\n        ShapeDescriptionManager.getCategoryByDescription = function (description) {\n          return ShapeDescriptionManager.getCategoryByType(description.key);\n        };\n\n        ShapeDescriptionManager.register = function (description, category, type) {\n          if (type === void 0) {\n            type = description.key;\n          }\n\n          if (this.descriptions[type] !== undefined) throw Error(\"Description key is duplicated\");\n          this.descriptions[type] = description;\n          if (!this.descriptionTypes[category]) this.descriptionTypes[category] = [];\n          this.descriptionTypes[category].push(type);\n          this.descriptionCategories[type] = category;\n        };\n\n        ShapeDescriptionManager.registerCustomShape = function (shape) {\n          if (shape.type === undefined) throw Error(\"Custom shape type is not defined\");\n          if (this.descriptions[shape.type] !== undefined) throw Error(\"Custom shape type is duplicated\");\n          var baseDescription = shape.baseType && this.descriptions[shape.baseType];\n          this.register(new CustomShapeDescription_1.CustomShapeDescription(shape, baseDescription), shape.category || ShapeTypes_1.ShapeCategories.Custom);\n        };\n\n        ShapeDescriptionManager.unregisterCustomShape = function (shapeType) {\n          var description = this.descriptions[shapeType];\n\n          if (description instanceof CustomShapeDescription_1.CustomShapeDescription) {\n            var category = this.descriptionCategories[shapeType];\n            delete this.descriptions[shapeType];\n            delete this.descriptionCategories[shapeType];\n            var index = this.descriptionTypes[category].indexOf(shapeType);\n            this.descriptionTypes[category].splice(index, 1);\n            if (this.descriptionTypes[category].length === 0) delete this.descriptionTypes[category];\n          }\n        };\n\n        ShapeDescriptionManager.descriptions = {};\n        ShapeDescriptionManager.descriptionTypes = {};\n        ShapeDescriptionManager.descriptionCategories = {};\n        return ShapeDescriptionManager;\n      }();\n\n      exports.ShapeDescriptionManager = ShapeDescriptionManager;\n      ShapeDescriptionManager.register(new TextShapeDescription_1.TextShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new RectangleShapeDescription_1.RectangleShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new EllipseShapeDescription_1.EllipseShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new CrossShapeDescription_1.CrossShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new TriangleShapeDescription_1.TriangleShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new DiamondShapeDescription_1.DiamondShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new HeartShapeDescription_1.HeartShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new PentagonShapeDescription_1.PentagonShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new HexagonShapeDescription_1.HexagonShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new OctagonShapeDescription_1.OctagonShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new StarShapeDescription_1.StarShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new ArrowTopShapeDescription_1.ArrowTopShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new ArrowBottomShapeDescription_1.ArrowBottomShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new ArrowLeftShapeDescription_1.ArrowLeftShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new ArrowRightShapeDescription_1.ArrowRightShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new ArrowNorthSouthShapeDescription_1.ArrowNorthSouthShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new ArrowEastWestShapeDescription_1.ArrowEastWestShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n      ShapeDescriptionManager.register(new ProcessShapeDescription_1.ProcessShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new DecisionShapeDescription_1.DecisionShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new TerminatorShapeDescription_1.TerminatorShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new PredefinedProcessShapeDescription_1.PredefinedProcessShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new DocumentShapeDescription_1.DocumentShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new MultipleDocumentsShapeDescription_1.MultipleDocumentsShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new ManualInputShapeDescription_1.ManualInputShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new PreparationShapeDescription_1.PreparationShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new DataShapeDescription_1.DataShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new DatabaseShapeDescription_1.DatabaseShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new HardDiskShapeDescription_1.HardDiskShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new InternalStorageShapeDescription_1.InternalStorageShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new PaperTapeShapeDescription_1.PaperTapeShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new ManualOperationShapeDescription_1.ManualOperationShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new DelayShapeDescription_1.DelayShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new StoredDataShapeDescription_1.StoredDataShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new DisplayShapeDescription_1.DisplayShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new MergeShapeDescription_1.MergeShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new OrShapeDescription_1.OrShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new SummingJunctionShapeDescription_1.SummingJunctionShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n      ShapeDescriptionManager.register(new CardWithImageOnLeftDescription_1.CardWithImageOnLeftDescription(), ShapeTypes_1.ShapeCategories.OrgChart);\n      ShapeDescriptionManager.register(new CardWithImageOnRightDescription_1.CardWithImageOnRightDescription(), ShapeTypes_1.ShapeCategories.OrgChart);\n      ShapeDescriptionManager.register(new CardWithImageOnTopDescription_1.CardWithImageOnTopDescription(), ShapeTypes_1.ShapeCategories.OrgChart);\n      ShapeDescriptionManager.register(new VerticalContainerDescription_1.VerticalContainerDescription(), ShapeTypes_1.ShapeCategories.Containers);\n      ShapeDescriptionManager.register(new HorizontalContainerDescription_1.HorizontalContainerDescription(), ShapeTypes_1.ShapeCategories.Containers);\n      /***/\n    },\n    /* 26 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics11 = function extendStatics(d, b) {\n          _extendStatics11 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics11(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics11(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerStateBase_1 = __webpack_require__(32);\n\n      var Event_1 = __webpack_require__(10);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var MouseHandlerDraggingState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDraggingState, _super);\n\n        function MouseHandlerDraggingState(handler, history) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.history = history;\n          return _this;\n        }\n\n        MouseHandlerDraggingState.prototype.onMouseDown = function (evt) {\n          this.mouseDownPoint = evt.modelPoint.clone();\n        };\n\n        MouseHandlerDraggingState.prototype.onMouseMove = function (evt) {\n          if (evt.button !== Event_1.MouseButton.Left) {\n            this.cancelChanges();\n            this.handler.switchToDefaultState();\n          } else if (!this.mouseDownPoint || Math.abs(this.mouseDownPoint.x - evt.modelPoint.x) > MouseHandlerDraggingState.dragStartLimit || Math.abs(this.mouseDownPoint.y - evt.modelPoint.y) > MouseHandlerDraggingState.dragStartLimit) {\n            this.onApplyChanges(evt);\n            if (!this.modified) this.handler.raiseDragStart(this.getDraggingElementKeys());\n            this.modified = true;\n            this.mouseDownPoint = undefined;\n          }\n        };\n\n        MouseHandlerDraggingState.prototype.cancelChanges = function () {\n          this.history.undoTransaction();\n          if (this.modified) this.handler.raiseDragEnd(this.getDraggingElementKeys());\n          this.modified = false;\n        };\n\n        MouseHandlerDraggingState.prototype.onMouseUp = function (evt) {\n          this.mouseDownPoint = undefined;\n          this.handler.switchToDefaultState();\n        };\n\n        MouseHandlerDraggingState.prototype.start = function () {\n          this.history.beginTransaction();\n        };\n\n        MouseHandlerDraggingState.prototype.finish = function () {\n          if (this.modified) {\n            this.onFinishWithChanges();\n            this.modified = false;\n            this.history.endTransaction();\n            this.handler.raiseDragEnd(this.getDraggingElementKeys());\n          } else this.history.endTransaction();\n        };\n\n        MouseHandlerDraggingState.prototype.onFinishWithChanges = function () {};\n\n        MouseHandlerDraggingState.prototype.getSnappedPoint = function (evt, point) {\n          return this.handler.getSnappedPoint(evt, point);\n        };\n\n        MouseHandlerDraggingState.dragStartLimit = UnitConverter_1.UnitConverter.pixelsToTwips(4);\n        return MouseHandlerDraggingState;\n      }(MouseHandlerStateBase_1.MouseHandlerCancellableState);\n\n      exports.MouseHandlerDraggingState = MouseHandlerDraggingState;\n      /***/\n    },\n    /* 27 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics12 = function extendStatics(d, b) {\n          _extendStatics12 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics12(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics12(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Color_1 = __webpack_require__(38);\n\n      var Svg_1 = __webpack_require__(79);\n\n      var StyleBase =\n      /** @class */\n      function () {\n        function StyleBase() {}\n\n        StyleBase.prototype.clone = function () {\n          var _this = this;\n\n          var style = this.createInstance();\n          this.forEach(function (propertyName) {\n            style[propertyName] = _this[propertyName];\n          });\n          return style;\n        };\n\n        StyleBase.prototype.forEach = function (callback) {\n          for (var propertyName in this) {\n            if (this.hasOwnProperty(propertyName)) callback(propertyName);\n          }\n        };\n\n        StyleBase.prototype.toObject = function () {\n          var _this = this;\n\n          var result = {};\n          var modified = false;\n          var defaultStyle = this.getDefaultInstance();\n          this.forEach(function (key) {\n            if (_this[key] !== defaultStyle[key]) {\n              result[key] = _this[key];\n              modified = true;\n            }\n          });\n          return modified ? result : null;\n        };\n\n        StyleBase.prototype.fromObject = function (obj) {\n          for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              if (this[key] !== undefined) {\n                var value = Svg_1.isColorProperty(key) ? Color_1.ColorHelper.stringToHash(obj[key]) : obj[key];\n                this[key] = value;\n              }\n            }\n          }\n        };\n\n        return StyleBase;\n      }();\n\n      exports.StyleBase = StyleBase;\n\n      var EmptyStyle =\n      /** @class */\n      function (_super) {\n        __extends(EmptyStyle, _super);\n\n        function EmptyStyle(styles) {\n          var _this = _super.call(this) || this;\n\n          if (styles) Object.keys(styles).forEach(function (k) {\n            return _this[k] = styles[k];\n          });\n          return _this;\n        }\n\n        EmptyStyle.prototype.createInstance = function () {\n          return new EmptyStyle();\n        };\n\n        EmptyStyle.prototype.getDefaultInstance = function () {\n          return Style.defaultInstace;\n        };\n\n        return EmptyStyle;\n      }(StyleBase);\n\n      exports.EmptyStyle = EmptyStyle;\n\n      var Style =\n      /** @class */\n      function (_super) {\n        __extends(Style, _super);\n\n        function Style() {\n          var _this = _super.call(this) || this; // Default values must be the same with css\n\n\n          _this[\"fill\"] = \"#ffffff\";\n          _this[\"stroke\"] = \"#000000\";\n          return _this;\n        }\n\n        Style.prototype.createInstance = function () {\n          return new Style();\n        };\n\n        Style.prototype.getDefaultInstance = function () {\n          return Style.defaultInstace;\n        };\n\n        Style.defaultInstace = new Style();\n        return Style;\n      }(StyleBase);\n\n      exports.Style = Style;\n\n      var StyleText =\n      /** @class */\n      function (_super) {\n        __extends(StyleText, _super);\n\n        function StyleText() {\n          var _this = _super.call(this) || this; // Default values must be the same with css\n\n\n          _this[\"fill\"] = \"#000000\";\n          _this[\"font-family\"] = \"Arial\";\n          _this[\"font-size\"] = \"10pt\";\n          _this[\"font-weight\"] = \"\";\n          _this[\"font-style\"] = \"\";\n          _this[\"text-decoration\"] = \"\";\n          _this[\"text-anchor\"] = \"middle\";\n          return _this;\n        }\n\n        StyleText.prototype.createInstance = function () {\n          return new StyleText();\n        };\n\n        StyleText.prototype.getDefaultInstance = function () {\n          return StyleText.defaultInstace;\n        };\n\n        StyleText.defaultInstace = new StyleText();\n        return StyleText;\n      }(StyleBase);\n\n      exports.StyleText = StyleText;\n      /***/\n    },\n    /* 28 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics13 = function extendStatics(d, b) {\n          _extendStatics13 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics13(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics13(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var GroupPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(GroupPrimitive, _super);\n\n        function GroupPrimitive(children, className, zIndex, clipPathId, onApplyProperties, onBeforeDispose) {\n          var _this = _super.call(this, null, className, clipPathId, onApplyProperties) || this;\n\n          _this.zIndex = zIndex;\n          _this.onBeforeDispose = onBeforeDispose;\n          _this.children = children;\n          return _this;\n        }\n\n        GroupPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"g\");\n        };\n\n        GroupPrimitive.prototype.applyElementProperties = function (element) {\n          if (this.zIndex || this.zIndex === 0) element.style.setProperty(\"z-index\", this.zIndex.toString());\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        GroupPrimitive.prototype.dispose = function () {\n          if (this.onBeforeDispose) this.onBeforeDispose();\n\n          _super.prototype.dispose.call(this);\n        };\n\n        return GroupPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.GroupPrimitive = GroupPrimitive;\n      /***/\n    },\n    /* 29 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeParameter =\n      /** @class */\n      function () {\n        function ShapeParameter(key, value) {\n          this.key = key;\n          this.value = value;\n        }\n\n        return ShapeParameter;\n      }();\n\n      exports.ShapeParameter = ShapeParameter;\n\n      var ShapeParameters =\n      /** @class */\n      function () {\n        function ShapeParameters() {\n          this.items = {};\n        }\n\n        ShapeParameters.prototype.add = function (parameter) {\n          this.items[parameter.key] = parameter;\n        };\n\n        ShapeParameters.prototype.addRange = function (parameters) {\n          for (var i = 0; i < parameters.length; i++) {\n            this.add(parameters[i]);\n          }\n        };\n\n        ShapeParameters.prototype.get = function (key) {\n          return this.items[key];\n        };\n\n        ShapeParameters.prototype.forEach = function (callback) {\n          for (var key in this.items) {\n            if (this.items.hasOwnProperty(key)) callback(this.items[key]);\n          }\n        };\n\n        ShapeParameters.prototype.clone = function () {\n          var result = new ShapeParameters();\n          this.forEach(function (p) {\n            result.add(new ShapeParameter(p.key, p.value));\n          });\n          return result;\n        };\n\n        ShapeParameters.prototype.toObject = function () {\n          var result = {};\n          var modified = false;\n          this.forEach(function (p) {\n            result[p.key] = {\n              'value': p.value\n            };\n            modified = true;\n          });\n          return modified ? result : null;\n        };\n\n        ShapeParameters.prototype.fromObject = function (obj) {\n          this.forEach(function (p) {\n            var paramObj = obj[p.key];\n\n            if (paramObj) {\n              if (typeof paramObj[\"value\"] === \"number\") p.value = paramObj[\"value\"];\n            }\n          });\n        };\n\n        return ShapeParameters;\n      }();\n\n      exports.ShapeParameters = ShapeParameters;\n      /***/\n    },\n    /* 30 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics14 = function extendStatics(d, b) {\n          _extendStatics14 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics14(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics14(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ConnectorRenderPoint =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorRenderPoint, _super);\n\n        function ConnectorRenderPoint(x, y, pointIndex, skipped) {\n          if (pointIndex === void 0) {\n            pointIndex = -1;\n          }\n\n          if (skipped === void 0) {\n            skipped = false;\n          }\n\n          var _this = _super.call(this, x, y) || this;\n\n          _this.pointIndex = pointIndex;\n          _this.skipped = skipped;\n          return _this;\n        }\n\n        ConnectorRenderPoint.prototype.offset = function (offsetX, offsetY) {\n          if (offsetX === void 0) {\n            offsetX = 0;\n          }\n\n          if (offsetY === void 0) {\n            offsetY = 0;\n          }\n\n          return new ConnectorRenderPoint(this.x + offsetX, this.y + offsetY);\n        };\n\n        ConnectorRenderPoint.prototype.multiply = function (multiplierX, multiplierY) {\n          if (multiplierX === void 0) {\n            multiplierX = 1;\n          }\n\n          if (multiplierY === void 0) {\n            multiplierY = multiplierX;\n          }\n\n          return new ConnectorRenderPoint(this.x * multiplierX, this.y * multiplierY);\n        };\n\n        ConnectorRenderPoint.prototype.clone = function () {\n          return new ConnectorRenderPoint(this.x, this.y, this.pointIndex);\n        };\n\n        return ConnectorRenderPoint;\n      }(Utils_1.Point);\n\n      exports.ConnectorRenderPoint = ConnectorRenderPoint;\n      /***/\n    },\n    /* 31 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Edge =\n      /** @class */\n      function () {\n        function Edge(key, from, to, weight) {\n          if (weight === void 0) {\n            weight = 1;\n          }\n\n          this.weight = weight;\n          this.key = key;\n          this.from = from;\n          this.to = to;\n        }\n\n        Edge.prototype.getHashKey = function () {\n          return this.from + \"_\" + this.to;\n        };\n\n        Edge.prototype.reverse = function () {\n          return new Edge(this.key, this.to, this.from, this.weight);\n        };\n\n        return Edge;\n      }();\n\n      exports.Edge = Edge;\n\n      var PositionInfo =\n      /** @class */\n      function () {\n        function PositionInfo(item, position) {\n          this.item = item;\n          this.position = position;\n        }\n\n        return PositionInfo;\n      }();\n\n      exports.PositionInfo = PositionInfo;\n      var ConnectionMode;\n\n      (function (ConnectionMode) {\n        ConnectionMode[ConnectionMode[\"Outgoing\"] = 1] = \"Outgoing\";\n        ConnectionMode[ConnectionMode[\"Incoming\"] = 2] = \"Incoming\";\n        ConnectionMode[ConnectionMode[\"OutgoingAndIncoming\"] = 3] = \"OutgoingAndIncoming\";\n      })(ConnectionMode = exports.ConnectionMode || (exports.ConnectionMode = {}));\n      /***/\n\n    },\n    /* 32 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics15 = function extendStatics(d, b) {\n          _extendStatics15 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics15(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics15(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var MouseHandlerStateBase =\n      /** @class */\n      function () {\n        function MouseHandlerStateBase(handler) {\n          this.handler = handler;\n        }\n\n        MouseHandlerStateBase.prototype.start = function () {};\n\n        MouseHandlerStateBase.prototype.finish = function () {};\n\n        MouseHandlerStateBase.prototype.onMouseClick = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onMouseDblClick = function (_evt) {\n          this.handler.switchToDefaultState();\n        };\n\n        MouseHandlerStateBase.prototype.onMouseDown = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onMouseUp = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onMouseMove = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onMouseWheel = function (_evt) {\n          return false;\n        };\n\n        MouseHandlerStateBase.prototype.onDragStart = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onDragEnd = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onShortcut = function (_shortcutCode) {\n          return false;\n        };\n\n        return MouseHandlerStateBase;\n      }();\n\n      exports.MouseHandlerStateBase = MouseHandlerStateBase;\n\n      var MouseHandlerCancellableState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerCancellableState, _super);\n\n        function MouseHandlerCancellableState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerCancellableState.prototype.onShortcut = function (code) {\n          if (code === KeyCode_1.KeyCode.Esc) {\n            this.cancelChanges();\n            this.handler.switchToDefaultState();\n            return true;\n          }\n\n          return false;\n        };\n\n        return MouseHandlerCancellableState;\n      }(MouseHandlerStateBase);\n\n      exports.MouseHandlerCancellableState = MouseHandlerCancellableState;\n      /***/\n    },\n    /* 33 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var TextFilterPrimitive_1 = __webpack_require__(84);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      exports.PAGE_BG_TEXTFLOOR_FILTER_ID = \"page-text-flood\";\n\n      var CanvasManagerBase =\n      /** @class */\n      function () {\n        function CanvasManagerBase(actualZoom) {\n          this.elements = {};\n          this.actualZoom = actualZoom;\n        }\n\n        CanvasManagerBase.prototype.createAndChangePrimitivesElements = function (primitives, parent) {\n          var _this = this;\n\n          primitives.forEach(function (primitive) {\n            _this.createAndChangePrimitiveElement(primitive, parent);\n          });\n        };\n\n        CanvasManagerBase.prototype.changePrimitivesElements = function (primitives, parent) {\n          var _this = this;\n\n          primitives.forEach(function (primitive, index) {\n            var element = parent.childNodes[index];\n\n            _this.changePrimitiveElement(primitive, element);\n          });\n        };\n\n        CanvasManagerBase.prototype.createPrimitiveElement = function (primitive, parent, sibling) {\n          var element = primitive.createElement();\n\n          if (parent != null) {\n            if (sibling !== undefined) parent.insertBefore(element, sibling);else parent.appendChild(element);\n          }\n\n          return element;\n        };\n\n        CanvasManagerBase.prototype.createAndChangePrimitiveElement = function (primitive, parent, sibling) {\n          var element = this.createPrimitiveElement(primitive, parent, sibling);\n          this.changePrimitiveElement(primitive, element);\n          return element;\n        };\n\n        CanvasManagerBase.prototype.changePrimitiveElement = function (primitive, element) {\n          primitive.applyElementProperties(element);\n        };\n\n        CanvasManagerBase.prototype.getOrCreateElement = function (key, primitive, parent, sibling) {\n          var element = key && this.elements[key] || (this.elements[key] = this.createPrimitiveElement(primitive, parent, sibling));\n          this.changePrimitiveElement(primitive, element);\n          return element;\n        };\n\n        CanvasManagerBase.prototype.createTextFloodFilter = function (key, parent, pageColor) {\n          this.getOrCreateElement(key, new TextFilterPrimitive_1.TextFloodFilterPrimitive(exports.PAGE_BG_TEXTFLOOR_FILTER_ID, pageColor), parent);\n        };\n\n        CanvasManagerBase.prototype.getAbsoluteSize = function (modelSize) {\n          return modelSize.transform(UnitConverter_1.UnitConverter.twipsToPixelsF).multiply(this.actualZoom);\n        };\n\n        return CanvasManagerBase;\n      }();\n\n      exports.CanvasManagerBase = CanvasManagerBase;\n      /***/\n    },\n    /* 34 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics16 = function extendStatics(d, b) {\n          _extendStatics16 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics16(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics16(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ConnectionPoint =\n      /** @class */\n      function (_super) {\n        __extends(ConnectionPoint, _super);\n\n        function ConnectionPoint(x, y, side) {\n          if (side === void 0) {\n            side = DiagramItem_1.ConnectionPointSide.Undefined;\n          }\n\n          var _this = _super.call(this, x, y) || this;\n\n          _this.side = side;\n          return _this;\n        }\n\n        ConnectionPoint.prototype.offset = function (offsetX, offsetY) {\n          if (offsetX === void 0) {\n            offsetX = 0;\n          }\n\n          if (offsetY === void 0) {\n            offsetY = 0;\n          }\n\n          return new ConnectionPoint(this.x + offsetX, this.y + offsetY);\n        };\n\n        ConnectionPoint.prototype.multiply = function (multiplierX, multiplierY) {\n          if (multiplierX === void 0) {\n            multiplierX = 1;\n          }\n\n          if (multiplierY === void 0) {\n            multiplierY = multiplierX;\n          }\n\n          return new ConnectionPoint(this.x * multiplierX, this.y * multiplierY);\n        };\n\n        ConnectionPoint.prototype.clone = function () {\n          return new ConnectionPoint(this.x, this.y, this.side);\n        };\n\n        ConnectionPoint.prototype.toPoint = function () {\n          return new Utils_1.Point(this.x, this.y);\n        };\n\n        return ConnectionPoint;\n      }(Utils_1.Point);\n\n      exports.ConnectionPoint = ConnectionPoint;\n      /***/\n    },\n    /* 35 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _1 = __webpack_require__(8);\n\n      var Model_1 = __webpack_require__(19);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var DiagramSettings =\n      /** @class */\n      function () {\n        function DiagramSettings() {\n          this.onZoomChanged = new _1.EventDispatcher();\n          this.onViewChanged = new _1.EventDispatcher();\n          this.onReadOnlyChanged = new _1.EventDispatcher();\n          this._zoomLevel = 1;\n          this._zoomLevelItems = [0.5, 0.75, 1, 1.25, 1.5, 2, 3];\n          this._simpleView = false;\n          this._fullscreen = false;\n          this._readOnly = false;\n          this._autoZoom = AutoZoomMode.Disabled;\n          this._snapToGrid = true;\n          this._showGrid = true;\n          this._gridSize = 180;\n          this._gridSizeItems = [90, 180, 360, 720];\n          this._pageSizeItems = [{\n            size: new Utils_1.Size(12240, 15840),\n            text: \"US-Letter ({width} x {height})\"\n          }, {\n            size: new Utils_1.Size(12240, 20160),\n            text: \"US-Legal ({width} x {height})\"\n          }, {\n            size: new Utils_1.Size(15817, 24491),\n            text: \"US-Tabloid ({width} x {height})\"\n          }, {\n            size: new Utils_1.Size(47679, 67408),\n            text: \"A0 ({width} x {height})\"\n          }, {\n            size: new Utils_1.Size(33676, 47679),\n            text: \"A1 ({width} x {height})\"\n          }, {\n            size: new Utils_1.Size(23811, 33676),\n            text: \"A2 ({width} x {height})\"\n          }, {\n            size: new Utils_1.Size(16838, 23811),\n            text: \"A3 ({width} x {height})\"\n          }, {\n            size: new Utils_1.Size(11906, 16838),\n            text: \"A4 ({width} x {height})\"\n          }, {\n            size: new Utils_1.Size(8391, 11906),\n            text: \"A5 ({width} x {height})\"\n          }, {\n            size: new Utils_1.Size(5953, 8391),\n            text: \"A6 ({width} x {height})\"\n          }, {\n            size: new Utils_1.Size(4195, 5953),\n            text: \"A7 ({width} x {height})\"\n          }];\n          this._viewUnits = Model_1.DiagramUnit.In;\n          this.unitItems = {};\n\n          this.formatUnit = function (value) {\n            return value.toString();\n          };\n\n          this.unitItems[Model_1.DiagramUnit.In] = \"in\";\n          this.unitItems[Model_1.DiagramUnit.Cm] = \"cm\";\n          this.unitItems[Model_1.DiagramUnit.Px] = \"px\";\n        }\n\n        Object.defineProperty(DiagramSettings.prototype, \"zoomLevel\", {\n          get: function get() {\n            return this._zoomLevel;\n          },\n          set: function set(value) {\n            var _this = this;\n\n            value = DiagramSettings.correctZoomLevel(value);\n\n            if (value !== this._zoomLevel) {\n              this._zoomLevel = value;\n              this.onZoomChanged.raise1(function (listener) {\n                return listener.notifyZoomChanged(value, _this._autoZoom);\n              });\n            }\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"zoomLevelItems\", {\n          get: function get() {\n            return this._zoomLevelItems;\n          },\n          set: function set(value) {\n            value = value.map(function (l) {\n              return DiagramSettings.correctZoomLevel(l);\n            });\n\n            if (value !== this._zoomLevelItems) {\n              this._zoomLevelItems = value;\n            }\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"autoZoom\", {\n          get: function get() {\n            return this._autoZoom;\n          },\n          set: function set(value) {\n            var _this = this;\n\n            if (value !== this._autoZoom) {\n              this._autoZoom = value;\n              this.onZoomChanged.raise1(function (l) {\n                return l.notifyZoomChanged(_this._zoomLevel, value);\n              });\n            }\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"simpleView\", {\n          get: function get() {\n            return this._simpleView;\n          },\n          set: function set(value) {\n            if (value !== this._simpleView) {\n              this._simpleView = value;\n              this.onViewChanged.raise1(function (listener) {\n                return listener.notifyViewChanged(value);\n              });\n            }\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"readOnly\", {\n          get: function get() {\n            return this._readOnly;\n          },\n          set: function set(value) {\n            if (value !== this._readOnly) {\n              this._readOnly = value;\n              this.onReadOnlyChanged.raise1(function (listener) {\n                return listener.notifyReadOnlyChanged(value);\n              });\n            }\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"fullscreen\", {\n          get: function get() {\n            return this._fullscreen;\n          },\n          set: function set(value) {\n            this._fullscreen = value;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"snapToGrid\", {\n          get: function get() {\n            return this._snapToGrid;\n          },\n          set: function set(value) {\n            this._snapToGrid = value;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"showGrid\", {\n          get: function get() {\n            return this._showGrid;\n          },\n          set: function set(value) {\n            var _this = this;\n\n            if (value !== this._showGrid) {\n              this._showGrid = value;\n              this.onViewChanged.raise1(function (l) {\n                return l.notifyGridChanged(_this.showGrid, _this.gridSize);\n              });\n            }\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"gridSize\", {\n          get: function get() {\n            return this._gridSize;\n          },\n          set: function set(value) {\n            var _this = this;\n\n            if (value !== this._gridSize) {\n              this._gridSize = value;\n              this.onViewChanged.raise1(function (l) {\n                return l.notifyGridChanged(_this.showGrid, _this.gridSize);\n              });\n            }\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"gridSizeItems\", {\n          get: function get() {\n            return this._gridSizeItems;\n          },\n          set: function set(value) {\n            if (value !== this._gridSizeItems) {\n              this._gridSizeItems = value;\n            }\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"pageSizeItems\", {\n          get: function get() {\n            return this._pageSizeItems;\n          },\n          set: function set(value) {\n            if (value !== this._pageSizeItems) {\n              this._pageSizeItems = value;\n            }\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"viewUnits\", {\n          get: function get() {\n            return this._viewUnits;\n          },\n          set: function set(value) {\n            this._viewUnits = value;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        DiagramSettings.correctZoomLevel = function (level) {\n          return Math.min(10, Math.max(level, 0.01));\n        };\n\n        return DiagramSettings;\n      }();\n\n      exports.DiagramSettings = DiagramSettings;\n      var AutoZoomMode;\n\n      (function (AutoZoomMode) {\n        AutoZoomMode[AutoZoomMode[\"Disabled\"] = 0] = \"Disabled\";\n        AutoZoomMode[AutoZoomMode[\"FitContent\"] = 1] = \"FitContent\";\n        AutoZoomMode[AutoZoomMode[\"FitToWidth\"] = 2] = \"FitToWidth\";\n      })(AutoZoomMode = exports.AutoZoomMode || (exports.AutoZoomMode = {}));\n      /***/\n\n    },\n    /* 36 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics17 = function extendStatics(d, b) {\n          _extendStatics17 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics17(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics17(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeStyleHistoryItemBase_1 = __webpack_require__(103);\n\n      var ChangeStyleTextHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStyleTextHistoryItem, _super);\n\n        function ChangeStyleTextHistoryItem(itemKey, styleProperty, styleValue) {\n          return _super.call(this, itemKey, styleProperty, styleValue) || this;\n        }\n\n        ChangeStyleTextHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldStyleValue = item.styleText[this.styleProperty];\n          manipulator.changeStyleText(item, this.styleProperty, this.styleValue);\n        };\n\n        ChangeStyleTextHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeStyleText(item, this.styleProperty, this.oldStyleValue);\n        };\n\n        return ChangeStyleTextHistoryItem;\n      }(ChangeStyleHistoryItemBase_1.ChangeStyleHistoryItemBase);\n\n      exports.ChangeStyleTextHistoryItem = ChangeStyleTextHistoryItem;\n      /***/\n    },\n    /* 37 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics18 = function extendStatics(d, b) {\n          _extendStatics18 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics18(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics18(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var AddConnectionHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(AddConnectionHistoryItem, _super);\n\n        function AddConnectionHistoryItem(connector, item, connectionPointIndex, position) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connector.key;\n          _this.itemKey = item.key;\n          _this.connectionPointIndex = connectionPointIndex;\n          _this.position = position;\n          return _this;\n        }\n\n        AddConnectionHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.addConnection(connector, item, this.connectionPointIndex, this.position);\n        };\n\n        AddConnectionHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.deleteConnection(connector, this.position);\n        };\n\n        return AddConnectionHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.AddConnectionHistoryItem = AddConnectionHistoryItem;\n\n      var SetConnectionPointIndexHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(SetConnectionPointIndexHistoryItem, _super);\n\n        function SetConnectionPointIndexHistoryItem(connector, connectionPointIndex, position) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connector.key;\n          _this.connectionPointIndex = connectionPointIndex;\n          _this.position = position;\n          return _this;\n        }\n\n        SetConnectionPointIndexHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldConnectionPointIndex = this.position === Connector_1.ConnectorPosition.Begin ? connector.beginConnectionPointIndex : connector.endConnectionPointIndex;\n          manipulator.setConnectionPointIndex(connector, this.connectionPointIndex, this.position);\n        };\n\n        SetConnectionPointIndexHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.setConnectionPointIndex(connector, this.oldConnectionPointIndex, this.position);\n        };\n\n        return SetConnectionPointIndexHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.SetConnectionPointIndexHistoryItem = SetConnectionPointIndexHistoryItem;\n      /***/\n    },\n    /* 38 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var StringUtils_1 = __webpack_require__(132);\n\n      var ColorHelper =\n      /** @class */\n      function () {\n        function ColorHelper() {}\n\n        ColorHelper.constructFromArgbNumber = function (alpha, red, green, blue) {\n          return alpha << 24 | red << 16 | green << 8 | blue;\n        };\n\n        ColorHelper.getPredefinedColor = function (color) {\n          return ColorHelper.hashToColor(color, 0);\n        };\n\n        ColorHelper.isGray = function (color) {\n          var red = ColorHelper.getRed(color);\n          return red == ColorHelper.getGreen(color) && red == ColorHelper.getBlue(color);\n        };\n\n        ColorHelper.getAlpha = function (color) {\n          return color >> 24 & 255;\n        };\n\n        ColorHelper.getRed = function (color) {\n          return color >> 16 & 255;\n        };\n\n        ColorHelper.getGreen = function (color) {\n          return color >> 8 & 255;\n        };\n\n        ColorHelper.getBlue = function (color) {\n          return color & 255;\n        };\n\n        ColorHelper.redPartToString = function (color) {\n          var redStr = ColorHelper.getRed(color).toString(16);\n          return redStr.length > 1 ? redStr : \"0\" + redStr;\n        };\n\n        ColorHelper.greenPartToString = function (color) {\n          var greenStr = ColorHelper.getGreen(color).toString(16);\n          return greenStr.length > 1 ? greenStr : \"0\" + greenStr;\n        };\n\n        ColorHelper.bluePartToString = function (color) {\n          var blueStr = ColorHelper.getBlue(color).toString(16);\n          return blueStr.length > 1 ? blueStr : \"0\" + blueStr;\n        };\n\n        ColorHelper.colorToHash = function (color) {\n          return \"#\" + ColorHelper.redPartToString(color) + ColorHelper.greenPartToString(color) + ColorHelper.bluePartToString(color);\n        }; // static anyToColor(value: any, defaultValue: number): number {\n        //     if (typeof value === \"number\" && !isNaN(value))\n        //         return value;\n        //     if (typeof value === \"string\") {\n        //         var intValue = parseInt(value);\n        //         return !isNaN(intValue) && value == <any>intValue ? intValue : ColorHelper.hashToColor(value);\n        //     }\n        //     return defaultValue;\n        // }\n\n\n        ColorHelper.hashToColor = function (hash, alpha) {\n          if (alpha === void 0) {\n            alpha = 255;\n          }\n\n          hash = hash.charAt(0) == \"#\" ? hash.substr(1) : hash;\n          if (hash.length === 3) hash = StringUtils_1.StringUtils.repeat(hash.charAt(0), 2) + StringUtils_1.StringUtils.repeat(hash.charAt(1), 2) + StringUtils_1.StringUtils.repeat(hash.charAt(2), 2);\n          return parseInt(hash, 16) | alpha << 24;\n        };\n\n        ColorHelper.getActualForeColor = function (foreColor, backColor) {\n          if (foreColor == ColorHelper.AUTOMATIC_COLOR) {\n            var backColorIsLight = backColor == ColorHelper.AUTOMATIC_COLOR || backColor == ColorHelper.NO_COLOR || ColorHelper.calculateLumaY(backColor) >= ColorHelper.DEFAULT_BOUNDARY_LUMA;\n            foreColor = backColorIsLight ? ColorHelper.DARK_COLOR : ColorHelper.LIGHT_COLOR;\n          }\n\n          return ColorHelper.getCssString(foreColor, true);\n        };\n\n        ColorHelper.getCssString = function (color, isAutoColorTranslateToDark) {\n          if (color == ColorHelper.AUTOMATIC_COLOR) return ColorHelper.colorToHash(isAutoColorTranslateToDark ? ColorHelper.DARK_COLOR : ColorHelper.LIGHT_COLOR);\n          return ColorHelper.getCssStringInternal(color);\n        };\n\n        ColorHelper.stringToHash = function (color) {\n          return this.colorToHash(this.stringToColor(color));\n        };\n\n        ColorHelper.stringToColor = function (color) {\n          var foreColorMatchesRGB = this.getRGBAByString(color);\n          var hashColor = \"\";\n\n          if (foreColorMatchesRGB) {\n            return (foreColorMatchesRGB[0] & 255) << 16 | (foreColorMatchesRGB[1] & 255) << 8 | foreColorMatchesRGB[2] & 255 | ((foreColorMatchesRGB.length > 3 ? foreColorMatchesRGB[3] : 255) & 255) << 24;\n          } else {\n            if (/^#([0-9a-f]{6})$/i.test(color) || /^#([0-9a-f]{3})$/i.test(color)) hashColor = color;else if (/^[a-z]+$/i.test(color)) hashColor = ColorHelper.colorNames[color.toLowerCase()];\n          }\n\n          if (hashColor) return ColorHelper.hashToColor(hashColor);\n          return null;\n        };\n\n        ColorHelper.getRGBAByString = function (color) {\n          var matchesRGBA = color.replace(/ +/g, '').match(/(rgba?)|(\\d+(\\.\\d+)?%?)|(\\.\\d+)/g);\n\n          if (matchesRGBA && matchesRGBA.length > 3) {\n            var i = 0,\n                itm;\n            var result = [];\n\n            while (i < matchesRGBA.length - 1) {\n              itm = matchesRGBA[++i];\n              if (itm.indexOf('%') != -1) itm = Math.round(parseFloat(itm) * 2.55);else itm = parseInt(itm);\n              if (itm < 0 || itm > 255) return null;\n              result.push(itm);\n            }\n\n            if (color.indexOf('rgba') === 0) {\n              if (isNaN(result[3]) || result[3] < 0 || result[3] > 1) return null;else if (result[3] <= 1) result[3] = Math.round(result[3] * 255);\n            } else if (result[3]) return null;\n\n            return result;\n          }\n\n          return null;\n        };\n\n        ColorHelper.IsDarkColor = function (color) {\n          return ColorHelper.calculateLumaY(color) < ColorHelper.DEFAULT_BOUNDARY_LUMA;\n        };\n\n        ColorHelper.getCssStringInternal = function (color) {\n          var alpfa = ColorHelper.getAlpha(color);\n\n          switch (alpfa) {\n            case 0:\n              return \"transparent\";\n\n            case 255:\n              return ColorHelper.colorToHash(color);\n\n            default:\n              return \"rgba(\" + ColorHelper.getRed(color) + \",\" + ColorHelper.getGreen(color) + \",\" + ColorHelper.getBlue(color) + \",\" + alpfa / 255 + \")\";\n          }\n        };\n\n        ColorHelper.isEmptyBgColor = function (color) {\n          return color === this.AUTOMATIC_COLOR || color === this.NO_COLOR;\n        };\n\n        ColorHelper.calculateLumaY = function (color) {\n          //ITU 601:\n          //Y' = 0.299 * R + 0.587 * G + 0.114 * B\n          //Word boundary: 60.762 (possible not very accurate). All tests based on MSWord results\n          //y = Y' * 65536\n          return ColorHelper.DEFAULT_BOUNDARY_LUMA_RED * ColorHelper.getRed(color) + ColorHelper.DEFAULT_BOUNDARY_LUMA_GREEN * ColorHelper.getGreen(color) + ColorHelper.DEFAULT_BOUNDARY_LUMA_BLUE * ColorHelper.getBlue(color);\n        };\n\n        ColorHelper.colorNames = {\n          aliceblue: '#f0f8ff',\n          antiquewhite: '#faebd7',\n          aqua: '#00ffff',\n          aquamarine: '#7fffd4',\n          azure: '#f0ffff',\n          beige: '#f5f5dc',\n          bisque: '#ffe4c4',\n          black: '#000000',\n          blanchedalmond: '#ffebcd',\n          blue: '#0000ff',\n          blueviolet: '#8a2be2',\n          brown: '#a52a2a',\n          burlywood: '#deb887',\n          cadetblue: '#5f9ea0',\n          chartreuse: '#7fff00',\n          chocolate: '#d2691e',\n          coral: '#ff7f50',\n          cornflowerblue: '#6495ed',\n          cornsilk: '#fff8dc',\n          crimson: '#dc143c',\n          cyan: '#00ffff',\n          darkblue: '#00008b',\n          darkcyan: '#008b8b',\n          darkgoldenrod: '#b8860b',\n          darkgray: '#a9a9a9',\n          darkgreen: '#006400',\n          darkkhaki: '#bdb76b',\n          darkmagenta: '#8b008b',\n          darkolivegreen: '#556b2f',\n          darkorange: '#ff8c00',\n          darkorchid: '#9932cc',\n          darkred: '#8b0000',\n          darksalmon: '#e9967a',\n          darkseagreen: '#8fbc8f',\n          darkslateblue: '#483d8b',\n          darkslategray: '#2f4f4f',\n          darkturquoise: '#00ced1',\n          darkviolet: '#9400d3',\n          deeppink: '#ff1493',\n          deepskyblue: '#00bfff',\n          dimgray: '#696969',\n          dodgerblue: '#1e90ff',\n          feldspar: '#d19275',\n          firebrick: '#b22222',\n          floralwhite: '#fffaf0',\n          forestgreen: '#228b22',\n          fuchsia: '#ff00ff',\n          gainsboro: '#dcdcdc',\n          ghostwhite: '#f8f8ff',\n          gold: '#ffd700',\n          goldenrod: '#daa520',\n          gray: '#808080',\n          green: '#00ff00',\n\n          /* in winFroms green = 008000 */\n          greenyellow: '#adff2f',\n          honeydew: '#f0fff0',\n          hotpink: '#ff69b4',\n          indianred: '#cd5c5c',\n          indigo: '#4b0082',\n          ivory: '#fffff0',\n          khaki: '#f0e68c',\n          lavender: '#e6e6fa',\n          lavenderblush: '#fff0f5',\n          lawngreen: '#7cfc00',\n          lemonchiffon: '#fffacd',\n          lightblue: '#add8e6',\n          lightcoral: '#f08080',\n          lightcyan: '#e0ffff',\n          lightgoldenrodyellow: '#fafad2',\n          lightgray: '#d3d3d3',\n          lightgreen: '#90ee90',\n          lightpink: '#ffb6c1',\n          lightsalmon: '#ffa07a',\n          lightseagreen: '#20b2aa',\n          lightskyblue: '#87cefa',\n          lightslateblue: '#8470ff',\n          lightslategray: '#778899',\n          lightsteelblue: '#b0c4de',\n          lightyellow: '#ffffe0',\n          lime: '#00ff00',\n          limegreen: '#32cd32',\n          linen: '#faf0e6',\n          magenta: '#ff00ff',\n          maroon: '#800000',\n          mediumaquamarine: '#66cdaa',\n          mediumblue: '#0000cd',\n          mediumorchid: '#ba55d3',\n          mediumpurple: '#9370d8',\n          mediumseagreen: '#3cb371',\n          mediumslateblue: '#7b68ee',\n          mediumspringgreen: '#00fa9a',\n          mediumturquoise: '#48d1cc',\n          mediumvioletred: '#c71585',\n          midnightblue: '#191970',\n          mintcream: '#f5fffa',\n          mistyrose: '#ffe4e1',\n          moccasin: '#ffe4b5',\n          navajowhite: '#ffdead',\n          navy: '#000080',\n          oldlace: '#fdf5e6',\n          olive: '#808000',\n          olivedrab: '#6b8e23',\n          orange: '#ffa500',\n          orangered: '#ff4500',\n          orchid: '#da70d6',\n          palegoldenrod: '#eee8aa',\n          palegreen: '#98fb98',\n          paleturquoise: '#afeeee',\n          palevioletred: '#d87093',\n          papayawhip: '#ffefd5',\n          peachpuff: '#ffdab9',\n          peru: '#cd853f',\n          pink: '#ffc0cb',\n          plum: '#dda0dd',\n          powderblue: '#b0e0e6',\n          purple: '#800080',\n          red: '#ff0000',\n          rosybrown: '#bc8f8f',\n          royalblue: '#4169e1',\n          saddlebrown: '#8b4513',\n          salmon: '#fa8072',\n          sandybrown: '#f4a460',\n          seagreen: '#2e8b57',\n          seashell: '#fff5ee',\n          sienna: '#a0522d',\n          silver: '#c0c0c0',\n          skyblue: '#87ceeb',\n          slateblue: '#6a5acd',\n          slategray: '#708090',\n          snow: '#fffafa',\n          springgreen: '#00ff7f',\n          steelblue: '#4682b4',\n          tan: '#d2b48c',\n          teal: '#008080',\n          thistle: '#d8bfd8',\n          tomato: '#ff6347',\n          turquoise: '#40e0d0',\n          violet: '#ee82ee',\n          violetred: '#d02090',\n          wheat: '#f5deb3',\n          white: '#ffffff',\n          whitesmoke: '#f5f5f5',\n          yellow: '#ffff00',\n          yellowgreen: '#9acd32',\n          windowtext: '#000000'\n        }; //ITU 601:\n        //Y' = 0.299 * R + 0.587 * G + 0.114 * B\n\n        ColorHelper.DEFAULT_BOUNDARY_LUMA = 60.762 * 65536; // exeprimental value;\n\n        ColorHelper.DEFAULT_BOUNDARY_LUMA_RED = 0.299 * 65536;\n        ColorHelper.DEFAULT_BOUNDARY_LUMA_BLUE = 0.114 * 65536;\n        ColorHelper.DEFAULT_BOUNDARY_LUMA_GREEN = 0.587 * 65536;\n        ColorHelper.DARK_COLOR = -16777216; // FFFFFFFFFF000000\n\n        ColorHelper.LIGHT_COLOR = -1; // FFFFFFFFFFFFFFFF\n\n        ColorHelper.BLACK_COLOR = -16777216; // FFFFFFFFFF000000 // todo delete\n        // here need get color, that different from back color. (back color that table, paragraph, box back colors)\n\n        ColorHelper.AUTOMATIC_COLOR = 0; // for text color, text strikeout, text underline. Character back color don't affect fore color, bot paragraph - affect\n\n        ColorHelper.NO_COLOR = 16777215; // 00000000FFFFFF for back color\n\n        return ColorHelper;\n      }();\n\n      exports.ColorHelper = ColorHelper;\n      /***/\n    },\n    /* 39 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Browser_1 = __webpack_require__(23);\n\n      var TouchUIHelper_1 = __webpack_require__(62);\n\n      var Base_1 = __webpack_require__(17);\n\n      var Evt =\n      /** @class */\n      function () {\n        function Evt() {}\n\n        Evt.GetEvent = function (evt) {\n          return typeof event != \"undefined\" && event != null && Browser_1.Browser.IE ? event : evt;\n        };\n\n        Evt.AttachEventToElement = function (element, eventName, handler, onlyBubbling) {\n          if (onlyBubbling === void 0) {\n            onlyBubbling = false;\n          }\n\n          if (element.addEventListener) element.addEventListener(eventName, handler, !onlyBubbling);else element.attachEvent(\"on\" + eventName, handler);\n        };\n\n        Evt.AttachEventToDocument = function (eventName, handler) {\n          var attachingAllowed = TouchUIHelper_1.TouchUIHelper.onEventAttachingToDocument(eventName, handler);\n          if (attachingAllowed) Evt.AttachEventToElement(document, eventName, handler);\n        };\n\n        Evt.PreventEvent = function (evt) {\n          if (evt.preventDefault) evt.preventDefault();else evt.returnValue = false;\n          return false;\n        };\n\n        Evt.GetKeyCode = function (evt) {\n          return Browser_1.Browser.NetscapeFamily || Browser_1.Browser.Opera ? evt.which : evt.keyCode;\n        };\n\n        Evt.GetEventSource = function (evt, findByPosition) {\n          if (!Base_1.IsExists(evt)) return null;\n          if (findByPosition && document.elementFromPoint && Evt.GetEventX(evt) !== undefined && Evt.GetEventY(evt) !== undefined) return document.elementFromPoint(Evt.GetEventX(evt), Evt.GetEventY(evt));\n          return evt.srcElement ? evt.srcElement : evt.target;\n        };\n\n        Evt.GetMouseWheelEventName = function () {\n          if (Browser_1.Browser.Safari) return \"mousewheel\";\n          if (Browser_1.Browser.NetscapeFamily && Browser_1.Browser.MajorVersion < 17) return \"DOMMouseScroll\";\n          return \"wheel\";\n        };\n\n        Evt.IsLeftButtonPressed = function (evt) {\n          if (TouchUIHelper_1.TouchUIHelper.isTouchEvent(evt)) return true;\n          evt = Evt.GetEvent(evt);\n          if (!evt) return false;\n\n          if (Browser_1.Browser.IE && Browser_1.Browser.Version < 11) {\n            if (Browser_1.Browser.MSTouchUI) return true;\n            return evt.button % 2 == 1; // B213431\n          } else if (Browser_1.Browser.WebKitFamily) {\n            if (evt.type === \"pointermove\") return evt.buttons === 1;\n            return evt.which == 1;\n          } else if (Browser_1.Browser.NetscapeFamily || Browser_1.Browser.Edge || Browser_1.Browser.IE && Browser_1.Browser.Version >= 11) {\n            if (evt.type === TouchUIHelper_1.TouchUIHelper.touchMouseMoveEventName) return evt.buttons === 1;\n            return evt.which == 1;\n          } else if (Browser_1.Browser.Opera) return evt.button == 0;\n\n          return true;\n        };\n\n        Evt.PreventEventAndBubble = function (evt) {\n          Evt.PreventEvent(evt);\n          if (evt.stopPropagation) evt.stopPropagation();\n          evt.cancelBubble = true;\n          return false;\n        };\n\n        Evt.clientEventRequiresDocScrollCorrection = function () {\n          var isSafariVerLess3 = Browser_1.Browser.Safari && Browser_1.Browser.Version < 3,\n              isMacOSMobileVerLess51 = Browser_1.Browser.MacOSMobilePlatform && Browser_1.Browser.Version < 5.1;\n          return Browser_1.Browser.AndroidDefaultBrowser || Browser_1.Browser.AndroidChromeBrowser || !(isSafariVerLess3 || isMacOSMobileVerLess51);\n        };\n\n        Evt.GetEventX = function (evt) {\n          if (TouchUIHelper_1.TouchUIHelper.isTouchEvent(evt)) return TouchUIHelper_1.TouchUIHelper.getEventX(evt);\n          return evt.clientX + (Evt.clientEventRequiresDocScrollCorrection() ? Base_1.GetDocumentScrollLeft() : 0);\n        };\n\n        Evt.GetEventY = function (evt) {\n          if (TouchUIHelper_1.TouchUIHelper.isTouchEvent(evt)) return TouchUIHelper_1.TouchUIHelper.getEventY(evt);\n          return evt.clientY + (Evt.clientEventRequiresDocScrollCorrection() ? Base_1.GetDocumentScrollTop() : 0);\n        };\n\n        Evt.CancelBubble = function (evt) {\n          evt.cancelBubble = true;\n          return false;\n        };\n\n        return Evt;\n      }();\n\n      exports.Evt = Evt;\n      /***/\n    },\n    /* 40 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Base64_1 = __webpack_require__(86);\n\n      var ImageInfo =\n      /** @class */\n      function () {\n        function ImageInfo(imageUrlOrBase64) {\n          this.url = undefined;\n          this.base64 = undefined;\n\n          if (imageUrlOrBase64) {\n            if (Base64_1.Base64Utils.checkPrependDataUrl(imageUrlOrBase64)) this.base64 = imageUrlOrBase64;else this.url = imageUrlOrBase64;\n          }\n\n          this.loadFailed = false;\n        }\n\n        ImageInfo.prototype.clone = function () {\n          var result = new ImageInfo();\n          result.url = this.url;\n          result.base64 = this.base64;\n          return result;\n        };\n\n        Object.defineProperty(ImageInfo.prototype, \"isEmpty\", {\n          get: function get() {\n            return this.url === undefined && this.base64 === undefined;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ImageInfo.prototype, \"unableToLoad\", {\n          get: function get() {\n            return this.loadFailed;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ImageInfo.prototype, \"renderUrl\", {\n          get: function get() {\n            return this.base64 || \"\";\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ImageInfo.prototype, \"exportUrl\", {\n          get: function get() {\n            return this.base64 ? this.base64 : this.url;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ImageInfo, \"transparentOnePixelImage\", {\n          get: function get() {\n            return this.transparentWhiteImage1_1;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ImageInfo.prototype.loadBase64Content = function (base64Content) {\n          this.base64 = Base64_1.Base64Utils.normalize(base64Content);\n        };\n\n        ImageInfo.prototype.setUnableToLoadFlag = function () {\n          this.loadFailed = true;\n        };\n\n        ImageInfo.transparentWhiteImage1_1 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAANSURBVBhXY/j///9/AAn7A/0FQ0XKAAAAAElFTkSuQmCC';\n        return ImageInfo;\n      }();\n\n      exports.ImageInfo = ImageInfo;\n      /***/\n    },\n    /* 41 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics19 = function extendStatics(d, b) {\n          _extendStatics19 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics19(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics19(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var ClipPathPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(ClipPathPrimitive, _super);\n\n        function ClipPathPrimitive(id, children) {\n          var _this = _super.call(this) || this;\n\n          _this.id = id;\n          _this.children = children;\n          return _this;\n        }\n\n        ClipPathPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"clipPath\");\n        };\n\n        ClipPathPrimitive.prototype.applyElementProperties = function (element) {\n          if (this.id) element.setAttribute(\"id\", this.id);\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        return ClipPathPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.ClipPathPrimitive = ClipPathPrimitive;\n      /***/\n    },\n    /* 42 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics20 = function extendStatics(d, b) {\n          _extendStatics20 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics20(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics20(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var EllipsePrimitive =\n      /** @class */\n      function (_super) {\n        __extends(EllipsePrimitive, _super);\n\n        function EllipsePrimitive(cx, cy, rx, ry, style, className) {\n          var _this = _super.call(this, style, className) || this;\n\n          _this.cx = cx;\n          _this.cy = cy;\n          _this.rx = rx;\n          _this.ry = ry;\n          return _this;\n        }\n\n        EllipsePrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"ellipse\");\n        };\n\n        EllipsePrimitive.prototype.applyElementProperties = function (element) {\n          this.setUnitAttribute(element, \"cx\", this.cx);\n          this.setUnitAttribute(element, \"cy\", this.cy);\n          this.setUnitAttribute(element, \"rx\", this.rx);\n          this.setUnitAttribute(element, \"ry\", this.ry);\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        return EllipsePrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.EllipsePrimitive = EllipsePrimitive;\n      /***/\n    },\n    /* 43 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var ConnectorPointsOrthogonalSideCalculatorBase =\n      /** @class */\n      function () {\n        function ConnectorPointsOrthogonalSideCalculatorBase(parent) {\n          this.parent = parent;\n        }\n\n        Object.defineProperty(ConnectorPointsOrthogonalSideCalculatorBase.prototype, \"connector\", {\n          get: function get() {\n            return this.parent.connector;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorPointsOrthogonalSideCalculatorBase.prototype, \"beginRect\", {\n          get: function get() {\n            return this.parent.beginRect;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorPointsOrthogonalSideCalculatorBase.prototype, \"endRect\", {\n          get: function get() {\n            return this.parent.endRect;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.getBeginOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          originPoint = this.getCorrectOriginPoint(originPoint, originRect);\n\n          if (targetSide !== DiagramItem_1.ConnectionPointSide.Undefined) {\n            if (this.isBeginEndSame()) return this.getSameShapeOffsetPoints(targetSide, originPoint, targetPoint, originRect);else if (this.isBeginEndOverlappedPoints(originPoint, targetPoint)) return this.getOverlappedPointsOffsetPoints(targetSide, originPoint, targetPoint, originRect);else if (this.isBeginEndOverlapped()) return this.getBeginOverlappedShapeOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n          } else if (this.isOriginRectContainsTargetPoint(originRect, targetPoint)) return this.getOverlappedPointsOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n\n          if (this.isOnSidePoint(originPoint, targetPoint)) return this.getBeginOnSideOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n          return this.getBeginOffSideOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.getEndOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          originPoint = this.getCorrectOriginPoint(originPoint, originRect);\n\n          if (targetSide !== DiagramItem_1.ConnectionPointSide.Undefined) {\n            if (this.isBeginEndSame()) return this.getSameShapeOffsetPoints(targetSide, originPoint, targetPoint, originRect);else if (this.isBeginEndOverlappedPoints(targetPoint, originPoint)) return this.getOverlappedPointsOffsetPoints(targetSide, originPoint, targetPoint, originRect);else if (this.isBeginEndOverlapped()) return this.getEndOverlappedShapeOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n          } else if (this.isOriginRectContainsTargetPoint(originRect, targetPoint)) return this.getOverlappedPointsOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n\n          if (this.isOnSidePoint(originPoint, targetPoint)) return this.getEndOnSideOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n          return this.getEndOffSideOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.getSide = function (originPoint, targetPoint) {\n          var diffX = Math.abs(targetPoint.x - originPoint.x);\n          var diffY = Math.abs(targetPoint.y - originPoint.y);\n\n          if (diffX > diffY) {\n            if (targetPoint.x > originPoint.x) return DiagramItem_1.ConnectionPointSide.East;else return DiagramItem_1.ConnectionPointSide.West;\n          } else {\n            if (targetPoint.y > originPoint.y) return DiagramItem_1.ConnectionPointSide.South;else return DiagramItem_1.ConnectionPointSide.North;\n          }\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.getSideCalculator = function (originPoint, targetPoint) {\n          return this.parent.getSideCalculator(this.getSide(originPoint, targetPoint));\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.getMinOffset = function () {\n          return Connector_1.Connector.minOffset;\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isBeginEndSame = function () {\n          return this.connector.beginItem === this.connector.endItem;\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isBeginEndOverlapped = function () {\n          return this.beginRect && this.endRect && this.beginRect.intersect(this.endRect);\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isBeginEndOverlappedX = function () {\n          return this.beginRect && this.endRect && this.beginRect.intersectX(this.endRect);\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isBeginEndOverlappedY = function () {\n          return this.beginRect && this.endRect && this.beginRect.intersectY(this.endRect);\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isBeginEndOverlappedPoints = function (beginPoint, endPoint) {\n          return this.beginRect && this.endRect && (this.beginRect.contains(endPoint) || this.endRect.contains(beginPoint));\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isOriginRectContainsTargetPoint = function (originRect, targetPoint) {\n          return originRect && originRect.contains(targetPoint);\n        };\n\n        return ConnectorPointsOrthogonalSideCalculatorBase;\n      }();\n\n      exports.ConnectorPointsOrthogonalSideCalculatorBase = ConnectorPointsOrthogonalSideCalculatorBase;\n      /***/\n    },\n    /* 44 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics21 = function extendStatics(d, b) {\n          _extendStatics21 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics21(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics21(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var SetSelectionHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(SetSelectionHistoryItem, _super);\n\n        function SetSelectionHistoryItem(selection, selectedKeys) {\n          var _this = _super.call(this) || this;\n\n          _this.selectedKeys = selectedKeys;\n          _this.selection = selection;\n          return _this;\n        }\n\n        SetSelectionHistoryItem.prototype.redo = function () {\n          this.oldSelection = this.selection.getKeys().slice(0);\n          this.selection.set(this.selectedKeys);\n        };\n\n        SetSelectionHistoryItem.prototype.undo = function () {\n          this.selection.set(this.oldSelection);\n        };\n\n        return SetSelectionHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.SetSelectionHistoryItem = SetSelectionHistoryItem;\n      /***/\n    },\n    /* 45 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics22 = function extendStatics(d, b) {\n          _extendStatics22 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics22(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics22(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var ImagePrimitive_1 = __webpack_require__(98);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var GroupPrimitive_1 = __webpack_require__(28);\n\n      var Utils_2 = __webpack_require__(15);\n\n      var ClipPathPrimitive_1 = __webpack_require__(41);\n\n      var ShapeImageIndicator_1 = __webpack_require__(99);\n\n      exports.ShapeDefaultDimension = 1440;\n      exports.ShapeDefaultSize = new Utils_1.Size(exports.ShapeDefaultDimension, exports.ShapeDefaultDimension);\n      exports.SHAPE_IMAGE_CLASSNAMES = {\n        IMAGE: \"dxdi-image\",\n        IMAGE_PLACEHOLDER: \"dxdi-image-placeholder\",\n        LOADING_INDICATOR: \"dxdi-spinner\",\n        USER_PIC: \"dxdi-user\",\n        WARNING_MARK: \"dxdi-warning\"\n      };\n\n      var ShapeWithImageDescription =\n      /** @class */\n      function (_super) {\n        __extends(ShapeWithImageDescription, _super);\n\n        function ShapeWithImageDescription(title, defaultText, defaultSize, defaultImageUrl) {\n          if (defaultSize === void 0) {\n            defaultSize = exports.ShapeDefaultSize.clone();\n          }\n\n          var _this = _super.call(this, title, defaultText, defaultSize, defaultImageUrl) || this;\n\n          _this.title = title;\n          _this.defaultText = defaultText;\n          _this.defaultSize = defaultSize;\n          _this.defaultImageUrl = defaultImageUrl;\n          _this.defaultIconSize = 480;\n          return _this;\n        }\n\n        Object.defineProperty(ShapeWithImageDescription.prototype, \"enableImage\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ShapeWithImageDescription.getImageMargins = function (forToolbox) {\n          return UnitConverter_1.UnitConverter.pixelsToTwips(3);\n        };\n\n        ShapeWithImageDescription.prototype.createImagePrimitives = function (shape, forToolbox) {\n          if (!this.enableImage) return [];\n          var rect = this.getImagePlacementRectangle(shape.rectangle, forToolbox);\n          if (forToolbox) return this.createImagePlaceholder(rect);\n          var imagePrimitives = [];\n          if (shape.image.isEmpty || shape.image.unableToLoad) imagePrimitives = imagePrimitives.concat(this.createEmptyImagePrimitives(rect, shape.image.unableToLoad));else if (shape.image.renderUrl === \"\") imagePrimitives = imagePrimitives.concat(this.createLoadingImagePrimitives(rect));else imagePrimitives = imagePrimitives.concat(this.createLoadedImagePrimitives(rect, shape.image.renderUrl));\n\n          if (shape.image.renderUrl === \"\") {\n            var clipPathId = Utils_2.RenderUtils.generateSvgElementId(\"clipImage\");\n            return [].concat([new GroupPrimitive_1.GroupPrimitive(imagePrimitives, exports.SHAPE_IMAGE_CLASSNAMES.IMAGE, undefined, clipPathId), new ClipPathPrimitive_1.ClipPathPrimitive(clipPathId, [new RectaglePrimitive_1.RectanglePrimitive(rect.left, rect.top, rect.width, rect.height)])]);\n          } else return imagePrimitives;\n        };\n\n        ShapeWithImageDescription.prototype.createImagePlaceholder = function (rect) {\n          return [];\n        };\n\n        ShapeWithImageDescription.prototype.createLoadedImagePrimitives = function (rect, imageUrl) {\n          return [new ImagePrimitive_1.ImagePrimitive(rect.left, rect.top, rect.width, rect.height, imageUrl, ShapeWithImageDescription.imageScalingRule, undefined, exports.SHAPE_IMAGE_CLASSNAMES.IMAGE)];\n        };\n\n        ShapeWithImageDescription.prototype.createLoadingImagePrimitives = function (rect) {\n          var loadingRect = this.getIconPlacementRectangle(rect);\n          return [ShapeImageIndicator_1.ShapeImageIndicator.createLoadingIndicatorPrimitives(loadingRect.left, loadingRect.top, this.defaultIconSize, UnitConverter_1.UnitConverter.pixelsToTwips(5), exports.SHAPE_IMAGE_CLASSNAMES.LOADING_INDICATOR)];\n        };\n\n        ShapeWithImageDescription.prototype.createEmptyImagePrimitives = function (rect, showWarning) {\n          var loadingRect = this.getIconPlacementRectangle(rect);\n          var primitives = [];\n          primitives = primitives.concat(this.createEmptyImagePrimitive(loadingRect));\n          if (showWarning) primitives = primitives.concat(this.createWarningPrimitive(loadingRect));\n          return primitives;\n        };\n\n        ShapeWithImageDescription.prototype.createEmptyImagePrimitive = function (rect) {\n          return new GroupPrimitive_1.GroupPrimitive([]);\n        };\n\n        ShapeWithImageDescription.prototype.createWarningPrimitive = function (rect) {\n          return new GroupPrimitive_1.GroupPrimitive([]);\n        };\n\n        ShapeWithImageDescription.prototype.getIconPlacementRectangle = function (rect) {\n          var iconRect = new Utils_1.Rectangle(new Utils_1.Point(rect.left, rect.top), new Utils_1.Size(this.defaultIconSize, this.defaultIconSize));\n          if (iconRect.width < rect.width) iconRect.position.x = rect.left + (rect.width - iconRect.width) / 2;\n          if (iconRect.height < rect.height) iconRect.position.y = rect.top + (rect.height - iconRect.height) / 2;\n          return iconRect;\n        };\n\n        ShapeWithImageDescription.prototype.getImagePlacementRectangle = function (rect, forToolbox) {\n          var imageSize = this.getImageSize(rect, forToolbox);\n          var imageRectangle = Utils_1.Rectangle.create(rect.left, rect.top, imageSize.width, imageSize.height);\n          var textBlockOffset = this.getTextBlockOffset(rect, forToolbox);\n          if (textBlockOffset.right > 0) imageRectangle.position.x = rect.right - textBlockOffset.right - ShapeWithImageDescription.getImageMargins(forToolbox);else if (textBlockOffset.left > 0) imageRectangle.position.x += ShapeWithImageDescription.getImageMargins(forToolbox);\n          if (textBlockOffset.bottom > 0) imageRectangle.position.y = rect.bottom - textBlockOffset.bottom - ShapeWithImageDescription.getImageMargins(forToolbox);else imageRectangle.position.y += ShapeWithImageDescription.getImageMargins(forToolbox);\n          if (textBlockOffset.top > 0 || textBlockOffset.bottom > 0) imageRectangle.position.x = imageRectangle.left + (rect.width - imageRectangle.width) / 2;\n          return imageRectangle;\n        };\n\n        ShapeWithImageDescription.prototype.getImageSize = function (rect, forToolbox) {\n          var imageSize = this.getRawImageSize(rect, forToolbox);\n          return this.correctImageSize(imageSize);\n        };\n\n        ShapeWithImageDescription.prototype.getRawImageSize = function (rect, forToolbox) {\n          return new Utils_1.Size(0, 0);\n        };\n\n        ShapeWithImageDescription.prototype.correctImageSize = function (imageSize) {\n          imageSize.width = Math.max(imageSize.width, 0);\n          imageSize.height = Math.max(imageSize.height, 0);\n          return imageSize;\n        };\n\n        ShapeWithImageDescription.prototype.getTextBlockOffset = function (rect, forToolbox) {\n          return Utils_1.Offset.empty();\n        };\n\n        ShapeWithImageDescription.imageScalingRule = \"xMidYMid meet\";\n        return ShapeWithImageDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.ShapeWithImageDescription = ShapeWithImageDescription;\n      /***/\n    },\n    /* 46 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics23 = function extendStatics(d, b) {\n          _extendStatics23 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics23(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics23(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeStyleHistoryItemBase_1 = __webpack_require__(103);\n\n      var ChangeStyleHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStyleHistoryItem, _super);\n\n        function ChangeStyleHistoryItem(itemKey, styleProperty, styleValue) {\n          return _super.call(this, itemKey, styleProperty, styleValue) || this;\n        }\n\n        ChangeStyleHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldStyleValue = item.style[this.styleProperty];\n          manipulator.changeStyle(item, this.styleProperty, this.styleValue);\n        };\n\n        ChangeStyleHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeStyle(item, this.styleProperty, this.oldStyleValue);\n        };\n\n        return ChangeStyleHistoryItem;\n      }(ChangeStyleHistoryItemBase_1.ChangeStyleHistoryItemBase);\n\n      exports.ChangeStyleHistoryItem = ChangeStyleHistoryItem;\n      /***/\n    },\n    /* 47 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics24 = function extendStatics(d, b) {\n          _extendStatics24 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics24(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics24(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ExportImportCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(ExportImportCommandBase, _super);\n\n        function ExportImportCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportImportCommandBase.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        return ExportImportCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ExportImportCommandBase = ExportImportCommandBase;\n      /***/\n    },\n    /* 48 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DeleteCommand_1 = __webpack_require__(130);\n\n      var UndoCommand_1 = __webpack_require__(199);\n\n      var RedoCommand_1 = __webpack_require__(200);\n\n      var ImportCommand_1 = __webpack_require__(201);\n\n      var ExportCommand_1 = __webpack_require__(202);\n\n      var ToggleFontBoldCommand_1 = __webpack_require__(203);\n\n      var ToggleFontItalicCommand_1 = __webpack_require__(204);\n\n      var ToggleFontUnderlineCommand_1 = __webpack_require__(205);\n\n      var ChangeFontNameCommand_1 = __webpack_require__(206);\n\n      var ChangeFontSizeCommand_1 = __webpack_require__(207);\n\n      var ChangeFontColorCommand_1 = __webpack_require__(208);\n\n      var ChangeFillColorCommand_1 = __webpack_require__(209);\n\n      var ChangeStrokeColorCommand_1 = __webpack_require__(210);\n\n      var ChangeTextAlignCommand_1 = __webpack_require__(211);\n\n      var ChangeConnectorLineEndingCommand_1 = __webpack_require__(212);\n\n      var ChangeConnectorLineOptionCommand_1 = __webpack_require__(213);\n\n      var SelectAllCommand_1 = __webpack_require__(214);\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var AutoLayoutTreeVerticalCommand_1 = __webpack_require__(215);\n\n      var ChangeSnapToGridCommand_1 = __webpack_require__(217);\n\n      var ChangeGridSizeCommand_1 = __webpack_require__(218);\n\n      var ChangePageLandscapeCommand_1 = __webpack_require__(219);\n\n      var ChangePageSizeCommand_1 = __webpack_require__(221);\n\n      var ExportPngCommand_1 = __webpack_require__(223);\n\n      var ExportSvgCommand_1 = __webpack_require__(225);\n\n      var ExportJpgCommand_1 = __webpack_require__(226);\n\n      var CopySelectionCommand_1 = __webpack_require__(227);\n\n      var CutSelectionCommand_1 = __webpack_require__(228);\n\n      var PasteSelectionCommand_1 = __webpack_require__(229);\n\n      var ImportBPMNCommand_1 = __webpack_require__(232);\n\n      var SendToBackCommand_1 = __webpack_require__(234);\n\n      var BringToFrontCommand_1 = __webpack_require__(235);\n\n      var AutoLayoutLayeredHorizontalCommand_1 = __webpack_require__(236);\n\n      var MoveCommands_1 = __webpack_require__(237);\n\n      var ChangeZoomLevelCommand_1 = __webpack_require__(238);\n\n      var BindDocumentCommand_1 = __webpack_require__(239);\n\n      var UnbindDocumentCommand_1 = __webpack_require__(241);\n\n      var AutoLayoutTreeHorizontalCommand_1 = __webpack_require__(242);\n\n      var AutoLayoutLayeredVerticalCommand_1 = __webpack_require__(243);\n\n      var LockCommand_1 = __webpack_require__(244);\n\n      var UnlockCommand_1 = __webpack_require__(245);\n\n      var CloneCommand_1 = __webpack_require__(246);\n\n      var ChangeUnitsCommand_1 = __webpack_require__(247);\n\n      var ChangePageColorCommand_1 = __webpack_require__(249);\n\n      var ChangeShowGridCommand_1 = __webpack_require__(251);\n\n      var ToggleFullscreenCommand_1 = __webpack_require__(252);\n\n      var ToggleSimpleViewCommand_1 = __webpack_require__(253);\n\n      var ToggleReadOnlyCommand_1 = __webpack_require__(254);\n\n      var EditShapeImageCommand_1 = __webpack_require__(255);\n\n      var PasteSelectionInPosition_1 = __webpack_require__(256);\n\n      var ImportXMLCommand_1 = __webpack_require__(257);\n\n      var InsertShapeImageCommand_1 = __webpack_require__(259);\n\n      var DeleteShapeImageCommand_1 = __webpack_require__(260);\n\n      var DiagramCommand;\n\n      (function (DiagramCommand) {\n        DiagramCommand[DiagramCommand[\"Undo\"] = 0] = \"Undo\";\n        DiagramCommand[DiagramCommand[\"Redo\"] = 1] = \"Redo\";\n        DiagramCommand[DiagramCommand[\"Cut\"] = 2] = \"Cut\";\n        DiagramCommand[DiagramCommand[\"Copy\"] = 3] = \"Copy\";\n        DiagramCommand[DiagramCommand[\"Paste\"] = 4] = \"Paste\";\n        DiagramCommand[DiagramCommand[\"PasteInPosition\"] = 5] = \"PasteInPosition\";\n        DiagramCommand[DiagramCommand[\"SelectAll\"] = 6] = \"SelectAll\";\n        DiagramCommand[DiagramCommand[\"Delete\"] = 7] = \"Delete\";\n        DiagramCommand[DiagramCommand[\"Import\"] = 8] = \"Import\";\n        DiagramCommand[DiagramCommand[\"ImportBPMN\"] = 9] = \"ImportBPMN\";\n        DiagramCommand[DiagramCommand[\"Export\"] = 10] = \"Export\";\n        DiagramCommand[DiagramCommand[\"ExportSvg\"] = 11] = \"ExportSvg\";\n        DiagramCommand[DiagramCommand[\"ExportPng\"] = 12] = \"ExportPng\";\n        DiagramCommand[DiagramCommand[\"ExportJpg\"] = 13] = \"ExportJpg\";\n        DiagramCommand[DiagramCommand[\"BindDocument\"] = 14] = \"BindDocument\";\n        DiagramCommand[DiagramCommand[\"UnbindDocument\"] = 15] = \"UnbindDocument\";\n        DiagramCommand[DiagramCommand[\"Bold\"] = 16] = \"Bold\";\n        DiagramCommand[DiagramCommand[\"Italic\"] = 17] = \"Italic\";\n        DiagramCommand[DiagramCommand[\"Underline\"] = 18] = \"Underline\";\n        DiagramCommand[DiagramCommand[\"FontName\"] = 19] = \"FontName\";\n        DiagramCommand[DiagramCommand[\"FontSize\"] = 20] = \"FontSize\";\n        DiagramCommand[DiagramCommand[\"FontColor\"] = 21] = \"FontColor\";\n        DiagramCommand[DiagramCommand[\"FillColor\"] = 22] = \"FillColor\";\n        DiagramCommand[DiagramCommand[\"StrokeColor\"] = 23] = \"StrokeColor\";\n        DiagramCommand[DiagramCommand[\"TextLeftAlign\"] = 24] = \"TextLeftAlign\";\n        DiagramCommand[DiagramCommand[\"TextCenterAlign\"] = 25] = \"TextCenterAlign\";\n        DiagramCommand[DiagramCommand[\"TextRightAlign\"] = 26] = \"TextRightAlign\";\n        DiagramCommand[DiagramCommand[\"ConnectorLineOption\"] = 27] = \"ConnectorLineOption\";\n        DiagramCommand[DiagramCommand[\"ConnectorStartLineEnding\"] = 28] = \"ConnectorStartLineEnding\";\n        DiagramCommand[DiagramCommand[\"ConnectorEndLineEnding\"] = 29] = \"ConnectorEndLineEnding\";\n        DiagramCommand[DiagramCommand[\"BringToFront\"] = 30] = \"BringToFront\";\n        DiagramCommand[DiagramCommand[\"SendToBack\"] = 31] = \"SendToBack\";\n        DiagramCommand[DiagramCommand[\"MoveLeft\"] = 32] = \"MoveLeft\";\n        DiagramCommand[DiagramCommand[\"MoveStepLeft\"] = 33] = \"MoveStepLeft\";\n        DiagramCommand[DiagramCommand[\"MoveRight\"] = 34] = \"MoveRight\";\n        DiagramCommand[DiagramCommand[\"MoveStepRight\"] = 35] = \"MoveStepRight\";\n        DiagramCommand[DiagramCommand[\"MoveUp\"] = 36] = \"MoveUp\";\n        DiagramCommand[DiagramCommand[\"MoveStepUp\"] = 37] = \"MoveStepUp\";\n        DiagramCommand[DiagramCommand[\"MoveDown\"] = 38] = \"MoveDown\";\n        DiagramCommand[DiagramCommand[\"MoveStepDown\"] = 39] = \"MoveStepDown\";\n        DiagramCommand[DiagramCommand[\"CloneLeft\"] = 40] = \"CloneLeft\";\n        DiagramCommand[DiagramCommand[\"CloneRight\"] = 41] = \"CloneRight\";\n        DiagramCommand[DiagramCommand[\"CloneUp\"] = 42] = \"CloneUp\";\n        DiagramCommand[DiagramCommand[\"CloneDown\"] = 43] = \"CloneDown\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutTree\"] = 44] = \"AutoLayoutTree\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutFlow\"] = 45] = \"AutoLayoutFlow\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutTreeVertical\"] = 46] = \"AutoLayoutTreeVertical\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutTreeHorizontal\"] = 47] = \"AutoLayoutTreeHorizontal\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutLayeredVertical\"] = 48] = \"AutoLayoutLayeredVertical\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutLayeredHorizontal\"] = 49] = \"AutoLayoutLayeredHorizontal\";\n        DiagramCommand[DiagramCommand[\"Lock\"] = 50] = \"Lock\";\n        DiagramCommand[DiagramCommand[\"Unlock\"] = 51] = \"Unlock\";\n        DiagramCommand[DiagramCommand[\"Units\"] = 52] = \"Units\";\n        DiagramCommand[DiagramCommand[\"ViewUnits\"] = 53] = \"ViewUnits\";\n        DiagramCommand[DiagramCommand[\"PageSize\"] = 54] = \"PageSize\";\n        DiagramCommand[DiagramCommand[\"PageLandscape\"] = 55] = \"PageLandscape\";\n        DiagramCommand[DiagramCommand[\"PageColor\"] = 56] = \"PageColor\";\n        DiagramCommand[DiagramCommand[\"GridSize\"] = 57] = \"GridSize\";\n        DiagramCommand[DiagramCommand[\"ShowGrid\"] = 58] = \"ShowGrid\";\n        DiagramCommand[DiagramCommand[\"SnapToGrid\"] = 59] = \"SnapToGrid\";\n        DiagramCommand[DiagramCommand[\"ZoomLevel\"] = 60] = \"ZoomLevel\";\n        DiagramCommand[DiagramCommand[\"Fullscreen\"] = 61] = \"Fullscreen\";\n        DiagramCommand[DiagramCommand[\"ToggleSimpleView\"] = 62] = \"ToggleSimpleView\";\n        DiagramCommand[DiagramCommand[\"ToggleReadOnly\"] = 63] = \"ToggleReadOnly\";\n        DiagramCommand[DiagramCommand[\"EditShapeImage\"] = 64] = \"EditShapeImage\";\n        DiagramCommand[DiagramCommand[\"FitToScreen\"] = 65] = \"FitToScreen\";\n        DiagramCommand[DiagramCommand[\"SwitchAutoZoom\"] = 66] = \"SwitchAutoZoom\";\n        DiagramCommand[DiagramCommand[\"ToggleAutoZoom\"] = 67] = \"ToggleAutoZoom\";\n        DiagramCommand[DiagramCommand[\"FitToWidth\"] = 68] = \"FitToWidth\";\n        DiagramCommand[DiagramCommand[\"ZoomLevelItems\"] = 69] = \"ZoomLevelItems\";\n        DiagramCommand[DiagramCommand[\"GridSizeItems\"] = 70] = \"GridSizeItems\";\n        DiagramCommand[DiagramCommand[\"PageSizeItems\"] = 71] = \"PageSizeItems\";\n        DiagramCommand[DiagramCommand[\"ImportXML\"] = 72] = \"ImportXML\";\n        DiagramCommand[DiagramCommand[\"InsertShapeImage\"] = 73] = \"InsertShapeImage\";\n        DiagramCommand[DiagramCommand[\"DeleteShapeImage\"] = 74] = \"DeleteShapeImage\";\n      })(DiagramCommand = exports.DiagramCommand || (exports.DiagramCommand = {}));\n\n      var CommandManager =\n      /** @class */\n      function () {\n        function CommandManager(control) {\n          this.commands = {};\n          this.shortcutsToCommand = {};\n          this.lastCommandsChain = [];\n          this.executingCommandsChain = [];\n          this.executingCommandCounter = 0;\n          this.isPublicApiCall = false;\n          this.createCommand(control, DiagramCommand.Undo, UndoCommand_1.UndoCommand, KeyCode_1.ModifierKey.Ctrl | KeyCode_1.KeyCode.Key_z, KeyCode_1.ModifierKey.Meta | KeyCode_1.KeyCode.Key_z);\n          this.createCommand(control, DiagramCommand.Redo, RedoCommand_1.RedoCommand, KeyCode_1.ModifierKey.Ctrl | KeyCode_1.KeyCode.Key_y, KeyCode_1.ModifierKey.Ctrl | KeyCode_1.ModifierKey.Shift | KeyCode_1.KeyCode.Key_z, KeyCode_1.ModifierKey.Meta | KeyCode_1.ModifierKey.Shift | KeyCode_1.KeyCode.Key_z);\n          this.createCommand(control, DiagramCommand.Cut, CutSelectionCommand_1.CutSelectionCommand, KeyCode_1.KeyCode.Key_x | KeyCode_1.ModifierKey.Ctrl, KeyCode_1.KeyCode.Key_x | KeyCode_1.ModifierKey.Meta);\n          this.createCommand(control, DiagramCommand.Copy, CopySelectionCommand_1.CopySelectionCommand, KeyCode_1.KeyCode.Key_c | KeyCode_1.ModifierKey.Ctrl, KeyCode_1.KeyCode.Key_c | KeyCode_1.ModifierKey.Meta);\n          this.createCommand(control, DiagramCommand.Paste, PasteSelectionCommand_1.PasteSelectionCommand);\n          this.createCommand(control, DiagramCommand.PasteInPosition, PasteSelectionInPosition_1.PasteSelectionInPositionCommand);\n          this.createCommand(control, DiagramCommand.SelectAll, SelectAllCommand_1.SelectAllCommand, KeyCode_1.KeyCode.Key_a | KeyCode_1.ModifierKey.Ctrl, KeyCode_1.KeyCode.Key_a | KeyCode_1.ModifierKey.Meta);\n          this.createCommand(control, DiagramCommand.Delete, DeleteCommand_1.DeleteCommand, KeyCode_1.KeyCode.Delete, KeyCode_1.KeyCode.Backspace);\n          this.createCommand(control, DiagramCommand.Import, ImportCommand_1.ImportCommand);\n          this.createCommand(control, DiagramCommand.ImportBPMN, ImportBPMNCommand_1.ImportBPMNCommand);\n          this.createCommand(control, DiagramCommand.ImportXML, ImportXMLCommand_1.ImportXMLCommand);\n          this.createCommand(control, DiagramCommand.Export, ExportCommand_1.ExportCommand);\n          this.createCommand(control, DiagramCommand.ExportSvg, ExportSvgCommand_1.ExportSvgCommand);\n          this.createCommand(control, DiagramCommand.ExportPng, ExportPngCommand_1.ExportPngCommand);\n          this.createCommand(control, DiagramCommand.ExportJpg, ExportJpgCommand_1.ExportJpgCommand);\n          this.createCommand(control, DiagramCommand.BindDocument, BindDocumentCommand_1.BindDocumentCommand);\n          this.createCommand(control, DiagramCommand.UnbindDocument, UnbindDocumentCommand_1.UnbindDocumentCommand);\n          this.createCommand(control, DiagramCommand.Bold, ToggleFontBoldCommand_1.ToggleFontBoldCommand, KeyCode_1.ModifierKey.Ctrl | KeyCode_1.KeyCode.Key_b, KeyCode_1.ModifierKey.Meta | KeyCode_1.KeyCode.Key_b);\n          this.createCommand(control, DiagramCommand.Italic, ToggleFontItalicCommand_1.ToggleFontItalicCommand, KeyCode_1.ModifierKey.Ctrl | KeyCode_1.KeyCode.Key_i, KeyCode_1.ModifierKey.Meta | KeyCode_1.KeyCode.Key_i);\n          this.createCommand(control, DiagramCommand.Underline, ToggleFontUnderlineCommand_1.ToggleFontUnderlineCommand, KeyCode_1.ModifierKey.Ctrl | KeyCode_1.KeyCode.Key_u, KeyCode_1.ModifierKey.Meta | KeyCode_1.KeyCode.Key_u);\n          this.createCommand(control, DiagramCommand.FontName, ChangeFontNameCommand_1.ChangeFontNameCommand);\n          this.createCommand(control, DiagramCommand.FontSize, ChangeFontSizeCommand_1.ChangeFontSizeCommand);\n          this.createCommand(control, DiagramCommand.FontColor, ChangeFontColorCommand_1.ChangeFontColorCommand);\n          this.createCommand(control, DiagramCommand.FillColor, ChangeFillColorCommand_1.ChangeFillColorCommand);\n          this.createCommand(control, DiagramCommand.StrokeColor, ChangeStrokeColorCommand_1.ChangeStrokeColorCommand);\n          this.createCommand(control, DiagramCommand.TextLeftAlign, ChangeTextAlignCommand_1.TextLeftAlignCommand);\n          this.createCommand(control, DiagramCommand.TextCenterAlign, ChangeTextAlignCommand_1.TextCenterAlignCommand);\n          this.createCommand(control, DiagramCommand.TextRightAlign, ChangeTextAlignCommand_1.TextRightAlignCommand);\n          this.createCommand(control, DiagramCommand.ConnectorLineOption, ChangeConnectorLineOptionCommand_1.ChangeConnectorLineOptionCommand);\n          this.createCommand(control, DiagramCommand.ConnectorStartLineEnding, ChangeConnectorLineEndingCommand_1.ChangeConnectorStartLineEndingCommand);\n          this.createCommand(control, DiagramCommand.ConnectorEndLineEnding, ChangeConnectorLineEndingCommand_1.ChangeConnectorEndLineEndingCommand);\n          this.createCommand(control, DiagramCommand.BringToFront, BringToFrontCommand_1.BringToFrontCommand);\n          this.createCommand(control, DiagramCommand.SendToBack, SendToBackCommand_1.SendToBackCommand);\n          this.createCommand(control, DiagramCommand.MoveLeft, MoveCommands_1.MoveLeftCommand, KeyCode_1.ModifierKey.Shift | KeyCode_1.KeyCode.Left);\n          this.createCommand(control, DiagramCommand.MoveStepLeft, MoveCommands_1.MoveStepLeftCommand, KeyCode_1.KeyCode.Left);\n          this.createCommand(control, DiagramCommand.MoveRight, MoveCommands_1.MoveRightCommand, KeyCode_1.ModifierKey.Shift | KeyCode_1.KeyCode.Right);\n          this.createCommand(control, DiagramCommand.MoveStepRight, MoveCommands_1.MoveStepRightCommand, KeyCode_1.KeyCode.Right);\n          this.createCommand(control, DiagramCommand.MoveUp, MoveCommands_1.MoveUpCommand, KeyCode_1.ModifierKey.Shift | KeyCode_1.KeyCode.Up);\n          this.createCommand(control, DiagramCommand.MoveStepUp, MoveCommands_1.MoveStepUpCommand, KeyCode_1.KeyCode.Up);\n          this.createCommand(control, DiagramCommand.MoveDown, MoveCommands_1.MoveDownCommand, KeyCode_1.ModifierKey.Shift | KeyCode_1.KeyCode.Down);\n          this.createCommand(control, DiagramCommand.MoveStepDown, MoveCommands_1.MoveStepDownCommand, KeyCode_1.KeyCode.Down);\n          this.createCommand(control, DiagramCommand.CloneLeft, CloneCommand_1.CloneLeftCommand, KeyCode_1.ModifierKey.Ctrl | KeyCode_1.ModifierKey.Shift | KeyCode_1.KeyCode.Left);\n          this.createCommand(control, DiagramCommand.CloneRight, CloneCommand_1.CloneRightCommand, KeyCode_1.ModifierKey.Ctrl | KeyCode_1.ModifierKey.Shift | KeyCode_1.KeyCode.Right);\n          this.createCommand(control, DiagramCommand.CloneUp, CloneCommand_1.CloneUpCommand, KeyCode_1.ModifierKey.Ctrl | KeyCode_1.ModifierKey.Shift | KeyCode_1.KeyCode.Up);\n          this.createCommand(control, DiagramCommand.CloneDown, CloneCommand_1.CloneDownCommand, KeyCode_1.ModifierKey.Ctrl | KeyCode_1.ModifierKey.Shift | KeyCode_1.KeyCode.Down);\n          this.createCommand(control, DiagramCommand.Lock, LockCommand_1.LockCommand);\n          this.createCommand(control, DiagramCommand.Unlock, UnlockCommand_1.UnLockCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutTree, AutoLayoutTreeVerticalCommand_1.AutoLayoutTreeVerticalCommand); // TODO: remove after, need for BC\n\n          this.createCommand(control, DiagramCommand.AutoLayoutFlow, AutoLayoutLayeredHorizontalCommand_1.AutoLayoutLayeredHorizontalCommand); // TODO: remove after, need for BC\n\n          this.createCommand(control, DiagramCommand.Units, ChangeUnitsCommand_1.ChangeUnitsCommand);\n          this.createCommand(control, DiagramCommand.ViewUnits, ChangeUnitsCommand_1.ChangeViewUnitsCommand);\n          this.createCommand(control, DiagramCommand.PageSize, ChangePageSizeCommand_1.ChangePageSizeCommand);\n          this.createCommand(control, DiagramCommand.PageLandscape, ChangePageLandscapeCommand_1.ChangePageLandscapeCommand);\n          this.createCommand(control, DiagramCommand.PageColor, ChangePageColorCommand_1.ChangePageColorCommand);\n          this.createCommand(control, DiagramCommand.GridSize, ChangeGridSizeCommand_1.ChangeGridSizeCommand);\n          this.createCommand(control, DiagramCommand.ShowGrid, ChangeShowGridCommand_1.ChangeShowGridCommand);\n          this.createCommand(control, DiagramCommand.SnapToGrid, ChangeSnapToGridCommand_1.ChangeSnapToGridCommand);\n          this.createCommand(control, DiagramCommand.ZoomLevel, ChangeZoomLevelCommand_1.ChangeZoomLevelCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutTreeVertical, AutoLayoutTreeVerticalCommand_1.AutoLayoutTreeVerticalCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutTreeHorizontal, AutoLayoutTreeHorizontalCommand_1.AutoLayoutTreeHorizontalCommand); // Not Implemented\n\n          this.createCommand(control, DiagramCommand.AutoLayoutLayeredVertical, AutoLayoutLayeredVerticalCommand_1.AutoLayoutLayeredVerticalCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutLayeredHorizontal, AutoLayoutLayeredHorizontalCommand_1.AutoLayoutLayeredHorizontalCommand);\n          this.createCommand(control, DiagramCommand.Fullscreen, ToggleFullscreenCommand_1.ToggleFullscreenCommand, KeyCode_1.KeyCode.F11);\n          this.createCommand(control, DiagramCommand.ToggleSimpleView, ToggleSimpleViewCommand_1.ToggleSimpleViewCommand);\n          this.createCommand(control, DiagramCommand.ToggleReadOnly, ToggleReadOnlyCommand_1.ToggleReadOnlyCommand);\n          this.createCommand(control, DiagramCommand.InsertShapeImage, InsertShapeImageCommand_1.InsertShapeImageCommand);\n          this.createCommand(control, DiagramCommand.EditShapeImage, EditShapeImageCommand_1.EditShapeImageCommand);\n          this.createCommand(control, DiagramCommand.DeleteShapeImage, DeleteShapeImageCommand_1.DeleteShapeImageCommand);\n          this.createCommand(control, DiagramCommand.FitToScreen, ChangeZoomLevelCommand_1.FitToScreenCommand);\n          this.createCommand(control, DiagramCommand.FitToWidth, ChangeZoomLevelCommand_1.FitToWidthCommand);\n          this.createCommand(control, DiagramCommand.SwitchAutoZoom, ChangeZoomLevelCommand_1.SwitchAutoZoomCommand);\n          this.createCommand(control, DiagramCommand.ToggleAutoZoom, ChangeZoomLevelCommand_1.ToggleAutoZoomCommand);\n          this.createCommand(control, DiagramCommand.ZoomLevelItems, ChangeZoomLevelCommand_1.ChangeZoomLevelItemsCommand);\n          this.createCommand(control, DiagramCommand.GridSizeItems, ChangeGridSizeCommand_1.ChangeGridSizeItemsCommand);\n          this.createCommand(control, DiagramCommand.PageSizeItems, ChangePageSizeCommand_1.ChangePageSizeItemsCommand);\n        }\n\n        CommandManager.prototype.getCommand = function (key) {\n          return this.commands[key];\n        };\n\n        CommandManager.prototype.beforeExecuting = function (command) {\n          this.executingCommandsChain.push(command);\n          this.executingCommandCounter++;\n        };\n\n        CommandManager.prototype.afterExecuting = function () {\n          this.executingCommandCounter--;\n\n          if (this.executingCommandCounter === 0) {\n            this.lastCommandsChain = this.executingCommandsChain;\n            this.executingCommandsChain = [];\n          }\n        };\n\n        CommandManager.prototype.assertLastExecutedCommandsChain = function (checkLength) {\n          var types = [];\n\n          for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n          }\n\n          if (checkLength && this.lastCommandsChain.length !== types.length) return false;\n\n          for (var i = 0, type; type = types[i]; i++) {\n            if (!this.lastCommandsChain[i] || !(this.lastCommandsChain[i] instanceof type)) return false;\n          }\n\n          return true;\n        };\n\n        CommandManager.prototype.processShortcut = function (code) {\n          var command = this.shortcutsToCommand[code];\n          if (command) return command.execute();\n          return false;\n        };\n\n        CommandManager.prototype.processPaste = function (clipboardData) {\n          var command = this.getCommand(DiagramCommand.Paste);\n          if (command && command.isEnabled()) command.performPaste(clipboardData);\n          return true;\n        }; // ISelectionChangesListener\n\n\n        CommandManager.prototype.notifySelectionChanged = function (_selection) {\n          this.lastCommandsChain = [];\n        };\n\n        CommandManager.prototype.notifyScrollPositionChanged = function () {};\n\n        CommandManager.prototype.createCommand = function (control, commandId, commandType) {\n          var shortcuts = [];\n\n          for (var _i = 3; _i < arguments.length; _i++) {\n            shortcuts[_i - 3] = arguments[_i];\n          }\n\n          this.commands[commandId] = new commandType(control);\n\n          for (var i = 0; i < shortcuts.length; i++) {\n            var shortcut = shortcuts[i];\n            if (typeof shortcut === \"number\") this.shortcutsToCommand[shortcut] = this.commands[commandId];\n          }\n        };\n\n        return CommandManager;\n      }();\n\n      exports.CommandManager = CommandManager;\n      /***/\n    },\n    /* 49 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Base64_1 = __webpack_require__(86);\n\n      var ImageInfo_1 = __webpack_require__(40);\n\n      var CacheImageInfo =\n      /** @class */\n      function () {\n        function CacheImageInfo(base64, actualId, imageUrl, referenceInfo, isLoaded) {\n          this._base64 = base64 !== undefined ? Base64_1.Base64Utils.normalize(base64) : undefined;\n          this.actualId = actualId;\n          this._referenceInfo = referenceInfo;\n          this._isLoaded = isLoaded !== undefined ? isLoaded : false;\n          this.imageUrl = imageUrl;\n        }\n\n        Object.defineProperty(CacheImageInfo.prototype, \"isLoaded\", {\n          get: function get() {\n            return this._referenceInfo ? this._referenceInfo._isLoaded : this._isLoaded;\n          },\n          set: function set(val) {\n            this._isLoaded = val;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(CacheImageInfo.prototype, \"base64\", {\n          get: function get() {\n            return this._base64;\n          },\n          set: function set(val) {\n            this._base64 = Base64_1.Base64Utils.normalize(val);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(CacheImageInfo.prototype, \"referenceInfo\", {\n          get: function get() {\n            return this._referenceInfo;\n          },\n          set: function set(val) {\n            this._referenceInfo = val;\n            this._base64 = undefined;\n            this._isLoaded = undefined;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        return CacheImageInfo;\n      }();\n\n      exports.CacheImageInfo = CacheImageInfo;\n\n      var ImageCache =\n      /** @class */\n      function () {\n        function ImageCache() {\n          this.emptyImageId = 0;\n          this.lastActualId = 0;\n          this.cache = [];\n          var emptyImage = this.createUnloadedInfoByBase64(ImageInfo_1.ImageInfo.transparentOnePixelImage);\n          emptyImage.isLoaded = true;\n        }\n\n        ImageCache.prototype.reset = function () {\n          this.cache.splice(1);\n          this.lastActualId = 1;\n        };\n\n        Object.defineProperty(ImageCache.prototype, \"emptyImage\", {\n          get: function get() {\n            return this.cache[this.emptyImageId];\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ImageCache.prototype.getImageData = function (id) {\n          return this.cache[id];\n        };\n\n        ImageCache.prototype.createUnloadedInfoByUrl = function (imageUrl) {\n          var info = this.findInfoByUrl(imageUrl);\n          if (info) return info;\n          return this.registerImageData(new CacheImageInfo(undefined, this.getNextActualId(), imageUrl));\n        };\n\n        ImageCache.prototype.createUnloadedInfoByBase64 = function (base64) {\n          var info = this.findInfoByBase64(base64);\n          if (info) return info;\n          return this.registerImageData(new CacheImageInfo(base64, this.getNextActualId()));\n        };\n\n        ImageCache.prototype.createUnloadedInfoByShapeImageInfo = function (imageInfo) {\n          var data = imageInfo.exportUrl;\n          return Base64_1.Base64Utils.checkPrependDataUrl(data) ? this.createUnloadedInfoByBase64(data) : this.createUnloadedInfoByUrl(data);\n        };\n\n        ImageCache.prototype.registerImageData = function (data) {\n          var existingData = this.cache[data.actualId];\n          if (!existingData) existingData = data;\n          if (data.actualId !== undefined) this.cache[data.actualId] = existingData;\n          return existingData;\n        };\n\n        ImageCache.prototype.loadAllImages = function (loader) {\n          var _this = this;\n\n          this.cache.forEach(function (cacheInfo) {\n            if (_this.emptyImageId != cacheInfo.actualId && !cacheInfo.isLoaded) loader.load(cacheInfo);\n          });\n        };\n\n        ImageCache.prototype.finalizeLoading = function (existingInfo, loadedInfo) {\n          existingInfo.isLoaded = true;\n          if (existingInfo.referenceInfo) return;\n\n          if (loadedInfo.base64) {\n            var base64_1 = Base64_1.Base64Utils.normalize(loadedInfo.base64);\n            this.cache.forEach(function (cacheElem) {\n              var isReference = cacheElem.base64 == base64_1 && cacheElem !== existingInfo && cacheElem.isLoaded;\n              if (isReference) existingInfo.referenceInfo = cacheElem.referenceInfo ? cacheElem.referenceInfo : cacheElem;\n              return isReference;\n            });\n            existingInfo.base64 = base64_1;\n          }\n        };\n\n        ImageCache.prototype.getNextActualId = function () {\n          return this.lastActualId++;\n        };\n\n        ImageCache.prototype.findInfoByBase64 = function (base64) {\n          base64 = Base64_1.Base64Utils.normalize(base64);\n          return this.findInfoCore(function (cacheImageInfo) {\n            return cacheImageInfo.base64 === base64;\n          });\n        };\n\n        ImageCache.prototype.findInfoByUrl = function (imageUrl) {\n          return this.findInfoCore(function (cacheImageInfo) {\n            return cacheImageInfo.imageUrl === imageUrl;\n          });\n        };\n\n        ImageCache.prototype.findInfoCore = function (callback) {\n          var cacheInfo;\n          this.cache.forEach(function (item) {\n            if (callback(item)) cacheInfo = item;\n          });\n          return cacheInfo;\n        };\n\n        ImageCache.instance = new ImageCache();\n        return ImageCache;\n      }();\n\n      exports.ImageCache = ImageCache;\n      /***/\n    },\n    /* 50 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics25 = function extendStatics(d, b) {\n          _extendStatics25 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics25(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics25(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var MoveConnectorPointHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(MoveConnectorPointHistoryItem, _super);\n\n        function MoveConnectorPointHistoryItem(connectorKey, pointIndex, point) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.pointIndex = pointIndex;\n          _this.point = point;\n          return _this;\n        }\n\n        MoveConnectorPointHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldPoint = connector.points[this.pointIndex].clone();\n          manipulator.moveConnectorPoint(connector, this.pointIndex, this.point);\n        };\n\n        MoveConnectorPointHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.moveConnectorPoint(connector, this.pointIndex, this.oldPoint);\n        };\n\n        return MoveConnectorPointHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.MoveConnectorPointHistoryItem = MoveConnectorPointHistoryItem;\n      /***/\n    },\n    /* 51 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics26 = function extendStatics(d, b) {\n          _extendStatics26 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics26(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics26(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(25);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var AddShapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(AddShapeHistoryItem, _super);\n\n        function AddShapeHistoryItem(shapeType, position, text, dataKey) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeType = shapeType;\n          _this.position = position;\n          _this.text = text;\n          _this.dataKey = dataKey;\n          return _this;\n        }\n\n        AddShapeHistoryItem.prototype.redo = function (manipulator) {\n          var shape = new Shape_1.Shape(ShapeDescriptionManager_1.ShapeDescriptionManager.get(this.shapeType), this.position);\n          if (typeof this.text === \"string\") shape.text = this.text;\n          if (this.dataKey !== undefined) shape.dataKey = this.dataKey;\n          manipulator.addShape(shape, this.shapeKey);\n          this.shapeKey = shape.key;\n        };\n\n        AddShapeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.deleteShape(manipulator.model.findShape(this.shapeKey));\n        };\n\n        return AddShapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.AddShapeHistoryItem = AddShapeHistoryItem;\n      /***/\n    },\n    /* 52 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics27 = function extendStatics(d, b) {\n          _extendStatics27 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics27(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics27(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var AddConnectorHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(AddConnectorHistoryItem, _super);\n\n        function AddConnectorHistoryItem(points, dataKey) {\n          var _this = _super.call(this) || this;\n\n          _this.points = points;\n          _this.dataKey = dataKey;\n          return _this;\n        }\n\n        AddConnectorHistoryItem.prototype.redo = function (manipulator) {\n          var connector = new Connector_1.Connector(this.points);\n          if (this.dataKey !== undefined) connector.dataKey = this.dataKey;\n          manipulator.addConnector(connector, this.connectorKey);\n          this.connectorKey = connector.key;\n        };\n\n        AddConnectorHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.deleteConnector(connector);\n        };\n\n        return AddConnectorHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.AddConnectorHistoryItem = AddConnectorHistoryItem;\n      /***/\n    },\n    /* 53 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics28 = function extendStatics(d, b) {\n          _extendStatics28 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics28(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics28(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Structures_1 = __webpack_require__(31);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ListUtils_1 = __webpack_require__(70);\n\n      var GraphBase =\n      /** @class */\n      function () {\n        function GraphBase(nodes, edges) {\n          this.nodeMap = {};\n          this.edgeMap = {};\n          this.nodes = [];\n          this.edges = [];\n          this.onInit();\n          nodes.forEach(this.addNode.bind(this));\n          edges.forEach(this.addEdge.bind(this));\n        }\n\n        Object.defineProperty(GraphBase.prototype, \"items\", {\n          get: function get() {\n            return this.nodes.map(this.getNode.bind(this));\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        GraphBase.prototype.onInit = function () {};\n\n        GraphBase.prototype.addEdge = function (edge) {\n          this.edgeMap[edge.key] = edge;\n          this.edges.push(edge);\n        };\n\n        GraphBase.prototype.addNode = function (node) {\n          this.nodeMap[node.key] = node;\n          this.nodes.push(node.key);\n        };\n\n        GraphBase.prototype.getNode = function (key) {\n          return this.nodeMap[key];\n        };\n\n        GraphBase.prototype.getEdge = function (key) {\n          return this.edgeMap[key];\n        };\n\n        GraphBase.prototype.isEmpty = function () {\n          return !this.nodes.length && !this.edges.length;\n        };\n\n        GraphBase.prototype.getAdjacentEdges = function (nodeKey, connectionMode) {\n          if (connectionMode === void 0) {\n            connectionMode = Structures_1.ConnectionMode.OutgoingAndIncoming;\n          }\n\n          return this.edges.filter(function (e) {\n            return connectionMode & Structures_1.ConnectionMode.Incoming && e.to === nodeKey || connectionMode & Structures_1.ConnectionMode.Outgoing && e.from === nodeKey;\n          });\n        };\n\n        return GraphBase;\n      }();\n\n      var Graph =\n      /** @class */\n      function (_super) {\n        __extends(Graph, _super);\n\n        function Graph() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Graph.prototype.cast = function (castNode, castEdge) {\n          var _this = this;\n\n          var newNodes = this.nodes.map(function (nk) {\n            return castNode(_this.getNode(nk));\n          });\n          var newEdges = this.edges.map(function (e) {\n            return castEdge ? castEdge(e) : e;\n          });\n          return new Graph(newNodes, newEdges);\n        };\n\n        Graph.prototype.getConnectedComponents = function () {\n          var iterator = this.createIterator(Structures_1.ConnectionMode.OutgoingAndIncoming);\n          iterator.visitEachEdgeOnce = true;\n          var components = [];\n\n          var _loop_1 = function _loop_1(i) {\n            var nodes = [];\n            var edges = [];\n\n            iterator.onNode = function (n) {\n              return nodes.push(n);\n            };\n\n            iterator.onEdge = function (e) {\n              return edges.push(e);\n            };\n\n            iterator.iterate(this_1.nodes[i]);\n            if (nodes.length) components.push(new Graph(nodes, edges));\n          };\n\n          var this_1 = this;\n\n          for (var i = 0; i < this.nodes.length; i++) {\n            _loop_1(i);\n          }\n\n          return components;\n        };\n\n        Graph.prototype.createIterator = function (connectionMode) {\n          var iterator = new GraphIterator(this, connectionMode);\n\n          iterator.comparer = function (a, b) {\n            return a.weight - b.weight;\n          };\n\n          return iterator;\n        };\n\n        Graph.prototype.getSpanningGraph = function (rootKey, connectionMode, edgeWeightFunc) {\n          var _this = this;\n\n          if (edgeWeightFunc === void 0) {\n            edgeWeightFunc = undefined;\n          }\n\n          if (!this.nodes.length) return new Graph([], []);\n          if (!edgeWeightFunc) edgeWeightFunc = function edgeWeightFunc(e) {\n            return e.weight;\n          };\n          var sortedAdjacentEdges = [];\n          var spanningTreeNodesSet = new ListUtils_1.HashSet();\n          var spanningTreeEdgesSet = new ListUtils_1.HashSet([], function (e) {\n            return e.getHashKey();\n          });\n          this.addNodeToSpanningGraph(rootKey, connectionMode, sortedAdjacentEdges, spanningTreeNodesSet, spanningTreeEdgesSet, edgeWeightFunc);\n\n          while (sortedAdjacentEdges.length && spanningTreeNodesSet.length !== this.nodes.length) {\n            var minWeighedEdge = sortedAdjacentEdges.shift();\n            spanningTreeEdgesSet.tryPush(minWeighedEdge);\n            var node = spanningTreeNodesSet.contains(minWeighedEdge.from) ? minWeighedEdge.to : minWeighedEdge.from;\n            this.addNodeToSpanningGraph(node, connectionMode, sortedAdjacentEdges, spanningTreeNodesSet, spanningTreeEdgesSet, edgeWeightFunc);\n            sortedAdjacentEdges = sortedAdjacentEdges.filter(function (e) {\n              return !spanningTreeNodesSet.contains(e.from) || !spanningTreeNodesSet.contains(e.to);\n            });\n          }\n\n          return new Graph(spanningTreeNodesSet.list().map(function (nk) {\n            return _this.getNode(nk);\n          }), spanningTreeEdgesSet.list());\n        };\n\n        Graph.prototype.addNodeToSpanningGraph = function (nodeKey, connectionMode, adjacentEdges, spanningTreeNodesSet, spanningTreeEdgesSet, edgeWeightFunc) {\n          spanningTreeNodesSet.tryPush(nodeKey);\n          this.getAdjacentEdges(nodeKey, connectionMode).filter(function (e) {\n            return !spanningTreeEdgesSet.contains(e);\n          }).forEach(function (e) {\n            var weight = edgeWeightFunc(e);\n            var pos = Utils_1.Utils.binaryIndexOf(adjacentEdges, function (a) {\n              return a.weight - weight;\n            });\n            pos = pos < 0 ? ~pos : pos;\n\n            while (pos < adjacentEdges.length && edgeWeightFunc(adjacentEdges[pos]) === weight) {\n              pos++;\n            }\n\n            adjacentEdges.splice(pos, 0, new Structures_1.Edge(e.key, e.from, e.to, weight));\n          });\n        };\n\n        Graph.create = function (shapes, connectors) {\n          var nodes = shapes;\n          var edges = connectors.filter(function (i) {\n            return i.beginItem && i.endItem instanceof Shape_1.Shape && i.endItem && i.endItem instanceof Shape_1.Shape && i.beginItem !== i.endItem;\n          }) // TBD: ShapeItem?\n          .map(function (i) {\n            return new Structures_1.Edge(i.key, i.beginItem && i.beginItem.key, i.endItem && i.endItem.key);\n          });\n          return new Graph(nodes, edges);\n        };\n\n        return Graph;\n      }(GraphBase);\n\n      exports.Graph = Graph;\n\n      var FastGraph =\n      /** @class */\n      function (_super) {\n        __extends(FastGraph, _super);\n\n        function FastGraph() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        FastGraph.prototype.onInit = function () {\n          this.parentToChildren = {};\n          this.childToParents = {};\n        };\n\n        FastGraph.prototype.addEdge = function (edge) {\n          _super.prototype.addEdge.call(this, edge);\n\n          (this.parentToChildren[edge.from] || (this.parentToChildren[edge.from] = [])).push(edge.to);\n          (this.childToParents[edge.to] || (this.childToParents[edge.to] = [])).push(edge.from);\n        };\n\n        FastGraph.prototype.getChildren = function (parent) {\n          return this.parentToChildren[parent] || [];\n        };\n\n        FastGraph.prototype.getParents = function (child) {\n          return this.childToParents[child] || [];\n        };\n\n        FastGraph.prototype.createIterator = function (connectionMode) {\n          return new GraphIterator(this, connectionMode);\n        };\n\n        return FastGraph;\n      }(GraphBase);\n\n      exports.FastGraph = FastGraph;\n\n      var GraphIterator =\n      /** @class */\n      function () {\n        function GraphIterator(graph, connectionMode) {\n          if (connectionMode === void 0) {\n            connectionMode = Structures_1.ConnectionMode.OutgoingAndIncoming;\n          }\n\n          this.graph = graph;\n          this.connectionMode = connectionMode;\n          this.visitEachEdgeOnce = true;\n          this.visitEachNodeOnce = true;\n          this.visitedNodes = {};\n          this.visitedEdges = {};\n        }\n\n        GraphIterator.prototype.iterate = function (nodeKey) {\n          if (!this.visitEachNodeOnce && !this.visitEachEdgeOnce && !this.skipNode) throw \"skipNode or visitEachNodeOnce or visitEachEdgeOnce must be set to avoid SOF\";\n          this.iterateCore(nodeKey);\n        };\n\n        GraphIterator.prototype.iterateCore = function (nodeKey) {\n          var _this = this;\n\n          var node = this.graph.getNode(nodeKey);\n          if (!node || this.skipNode && this.skipNode(node) || this.visitEachNodeOnce && this.isNodeVisited(nodeKey)) return;\n          this.visitedNodes[nodeKey] = true;\n          this.onNode && this.onNode(node);\n          var edges = this.graph.getAdjacentEdges(nodeKey, this.connectionMode);\n          if (this.skipEdge) edges = edges.filter(function (e) {\n            return !_this.skipEdge(e);\n          });\n\n          if (this.connectionMode & Structures_1.ConnectionMode.Outgoing) {\n            var outgoing = edges.filter(function (e) {\n              return e.from === nodeKey;\n            });\n            if (this.comparer) outgoing.sort(this.comparer);\n            outgoing.forEach(function (e) {\n              if (_this.visitEachEdgeOnce && _this.visitedEdges[e.key]) return;\n              _this.visitedEdges[e.key] = true;\n              _this.onEdge && _this.onEdge(e, true);\n\n              _this.iterateCore(e.to);\n\n              _this.onAfterEdge && _this.onAfterEdge(e, true);\n            });\n          }\n\n          this.onAllEdges && this.onAllEdges(node, true);\n\n          if (this.connectionMode & Structures_1.ConnectionMode.Incoming) {\n            var incoming = edges.filter(function (e) {\n              return e.to === nodeKey;\n            });\n            if (this.comparer) incoming.sort(this.comparer);\n            incoming.forEach(function (e) {\n              if (_this.visitEachEdgeOnce && _this.visitedEdges[e.key]) return;\n              _this.visitedEdges[e.key] = true;\n              _this.onEdge && _this.onEdge(e, false);\n\n              _this.iterateCore(e.from);\n\n              _this.onAfterEdge && _this.onAfterEdge(e, false);\n            });\n          }\n\n          this.onAllEdges && this.onAllEdges(node, false);\n        };\n\n        GraphIterator.prototype.isNodeVisited = function (nodeKey) {\n          return !!this.visitedNodes[nodeKey];\n        };\n\n        GraphIterator.prototype.isEdgeVisited = function (edgeKey) {\n          return !!this.visitedEdges[edgeKey];\n        };\n\n        return GraphIterator;\n      }();\n\n      exports.GraphIterator = GraphIterator;\n      /***/\n    },\n    /* 54 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics29 = function extendStatics(d, b) {\n          _extendStatics29 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics29(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics29(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangeConnectorTextHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorTextHistoryItem, _super);\n\n        function ChangeConnectorTextHistoryItem(connector, position, text) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connector.key;\n          _this.text = text;\n          _this.position = position;\n          return _this;\n        }\n\n        ChangeConnectorTextHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldText = connector.getText(this.position);\n          manipulator.changeConnectorText(connector, this.text, this.position);\n        };\n\n        ChangeConnectorTextHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.changeConnectorText(connector, this.oldText, this.position);\n        };\n\n        return ChangeConnectorTextHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeConnectorTextHistoryItem = ChangeConnectorTextHistoryItem;\n      /***/\n    },\n    /* 55 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics30 = function extendStatics(d, b) {\n          _extendStatics30 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics30(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics30(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangeConnectorPropertyHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorPropertyHistoryItem, _super);\n\n        function ChangeConnectorPropertyHistoryItem(connectorKey, propertyName, value) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.propertyName = propertyName;\n          _this.value = value;\n          return _this;\n        }\n\n        ChangeConnectorPropertyHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldValue = connector.properties[this.propertyName];\n          manipulator.changeConnectorProperty(connector, this.propertyName, this.value);\n        };\n\n        ChangeConnectorPropertyHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.changeConnectorProperty(connector, this.propertyName, this.oldValue);\n        };\n\n        return ChangeConnectorPropertyHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeConnectorPropertyHistoryItem = ChangeConnectorPropertyHistoryItem;\n      /***/\n    },\n    /* 56 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var NodeInfo =\n      /** @class */\n      function () {\n        function NodeInfo(key, margin, size, connectionPoints) {\n          if (connectionPoints === void 0) {\n            connectionPoints = [];\n          }\n\n          this.key = key;\n          this.margin = margin;\n          this.size = size;\n          this.connectionPoints = connectionPoints;\n        }\n\n        return NodeInfo;\n      }();\n\n      exports.NodeInfo = NodeInfo;\n\n      var NodeLayout =\n      /** @class */\n      function () {\n        function NodeLayout(info, position) {\n          this.info = info;\n          this.position = position;\n        }\n\n        Object.defineProperty(NodeLayout.prototype, \"key\", {\n          get: function get() {\n            return this.info.key;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(NodeLayout.prototype, \"rectangle\", {\n          get: function get() {\n            return new Utils_1.Rectangle(this.position, this.info.size);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        return NodeLayout;\n      }();\n\n      exports.NodeLayout = NodeLayout;\n\n      var EdgeLayout =\n      /** @class */\n      function () {\n        function EdgeLayout(key, beginIndex, endIndex) {\n          this.key = key;\n          this.beginIndex = beginIndex;\n          this.endIndex = endIndex;\n        }\n\n        return EdgeLayout;\n      }();\n\n      exports.EdgeLayout = EdgeLayout;\n\n      var Margin =\n      /** @class */\n      function () {\n        function Margin(top, right, bottom, left) {\n          if (right === void 0) {\n            right = top;\n          }\n\n          if (bottom === void 0) {\n            bottom = top;\n          }\n\n          if (left === void 0) {\n            left = top;\n          }\n\n          this.top = top;\n          this.right = right;\n          this.bottom = bottom;\n          this.left = left;\n        }\n\n        Margin.empty = function () {\n          return new Margin(0);\n        };\n\n        return Margin;\n      }();\n\n      exports.Margin = Margin;\n      /***/\n    },\n    /* 57 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var Exporter =\n      /** @class */\n      function () {\n        function Exporter() {}\n\n        Exporter.prototype.export = function (model) {\n          var obj = {\n            page: {},\n            connectors: [],\n            shapes: []\n          };\n          obj.page = {\n            \"width\": model.size.width,\n            \"height\": model.size.height,\n            \"pageColor\": model.pageColor,\n            \"pageWidth\": model.pageSize.width,\n            \"pageHeight\": model.pageSize.height,\n            \"pageLandscape\": model.pageLandscape,\n            \"units\": model.units\n          };\n          this.exportItemsCore(model.items, obj);\n          return JSON.stringify(obj);\n        };\n\n        Exporter.prototype.exportItems = function (items) {\n          var obj = {\n            connectors: [],\n            shapes: []\n          };\n          this.exportItemsCore(items, obj);\n          return JSON.stringify(obj);\n        };\n\n        Exporter.prototype.exportItemsCore = function (items, obj) {\n          var _this = this;\n\n          items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) {\n              obj.shapes.push(_this.exportShape(item));\n            } else if (item instanceof Connector_1.Connector) {\n              var connectorObj = _this.exportConnector(item);\n\n              if (item.beginItem) {\n                connectorObj[\"beginItemKey\"] = item.beginItem.key;\n                connectorObj[\"beginConnectionPointIndex\"] = item.beginConnectionPointIndex;\n              }\n\n              if (item.endItem) {\n                connectorObj[\"endItemKey\"] = item.endItem.key;\n                connectorObj[\"endConnectionPointIndex\"] = item.endConnectionPointIndex;\n              }\n\n              obj.connectors.push(connectorObj);\n            }\n          });\n        };\n\n        Exporter.prototype.exportItem = function (item) {\n          return {\n            \"key\": item.key,\n            \"dataKey\": item.dataKey,\n            \"locked\": item.locked,\n            \"zIndex\": item.zIndex\n          };\n        };\n\n        Exporter.prototype.exportShape = function (shape) {\n          var result = this.exportItem(shape);\n          result[\"type\"] = shape.description.key;\n          result[\"text\"] = shape.text;\n          if (!shape.image.isEmpty) result[\"imageUrl\"] = shape.image.exportUrl;\n          result[\"x\"] = shape.position.x;\n          result[\"y\"] = shape.position.y;\n          result[\"width\"] = shape.size.width;\n          result[\"height\"] = shape.size.height;\n          var paramsObj = shape.parameters.toObject();\n          if (paramsObj) result[\"parameters\"] = paramsObj;\n          var styleObj = shape.style.toObject();\n          if (styleObj) result[\"style\"] = styleObj;\n          var styleTextObj = shape.styleText.toObject();\n          if (styleTextObj) result[\"styleText\"] = styleTextObj;\n          if (shape.childKeys.length) result[\"childKeys\"] = shape.childKeys.slice();\n          if (!shape.expanded) result[\"expanded\"] = false;\n\n          if (shape.expandedSize) {\n            result[\"expandedWidth\"] = shape.expandedSize.width;\n            result[\"expandedHeight\"] = shape.expandedSize.height;\n          }\n\n          return result;\n        };\n\n        Exporter.prototype.exportConnector = function (connector) {\n          var result = this.exportItem(connector);\n          result[\"points\"] = connector.points.map(function (p) {\n            return {\n              \"x\": p.x,\n              \"y\": p.y\n            };\n          });\n          var textObj = connector.texts.toObject();\n          if (textObj) result[\"texts\"] = textObj;\n          var propsObj = connector.properties.toObject();\n          if (propsObj) result[\"properties\"] = propsObj;\n          var styleObj = connector.style.toObject();\n          if (styleObj) result[\"style\"] = styleObj;\n          var styleTextObj = connector.styleText.toObject();\n          if (styleTextObj) result[\"styleText\"] = styleTextObj;\n          return result;\n        }; // Images\n\n\n        Exporter.prototype.exportSvg = function (modelSize, pageColor, exportManager, callback) {\n          exportManager.exportSvgImage(modelSize, pageColor, callback);\n        };\n\n        Exporter.prototype.exportPng = function (modelSize, pageColor, exportManager, callback) {\n          exportManager.exportPngImage(modelSize, pageColor, callback);\n        };\n\n        Exporter.prototype.exportJpg = function (modelSize, pageColor, exportManager, callback) {\n          exportManager.exportJpgImage(modelSize, pageColor, callback);\n        };\n\n        return Exporter;\n      }();\n\n      exports.Exporter = Exporter;\n      /***/\n    },\n    /* 58 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics31 = function extendStatics(d, b) {\n          _extendStatics31 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics31(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics31(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var StylePropertyCommandBase_1 = __webpack_require__(107);\n\n      var ChangeStyleTextHistoryItem_1 = __webpack_require__(36);\n\n      var Style_1 = __webpack_require__(27);\n\n      var ToggleStyleTextPropertyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleStyleTextPropertyCommand, _super);\n\n        function ToggleStyleTextPropertyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleStyleTextPropertyCommand.prototype.getValue = function () {\n          var value = this.control.selection.inputPosition.getStyleTextPropertyValue(this.getStyleProperty());\n          return value === this.getStylePropertyValue();\n        };\n\n        ToggleStyleTextPropertyCommand.prototype.executeCore = function (state) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var styleProperty = this.getStyleProperty();\n          var styleValue = state.value ? Style_1.StyleText.defaultInstace[styleProperty] : this.getStylePropertyValue();\n          var items = this.control.selection.getSelectedItems();\n          items.forEach(function (item) {\n            _this.control.history.addAndRedo(new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(item.key, styleProperty, styleValue));\n          });\n          this.control.selection.inputPosition.setStyleTextPropertyValue(this.getStyleProperty(), styleValue);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        ToggleStyleTextPropertyCommand.prototype.getStyleObj = function (item) {\n          return item.styleText;\n        };\n\n        ToggleStyleTextPropertyCommand.prototype.getDefaultStyleObj = function () {\n          return new Style_1.StyleText();\n        };\n\n        return ToggleStyleTextPropertyCommand;\n      }(StylePropertyCommandBase_1.StylePropertyCommandBase);\n\n      exports.ToggleStyleTextPropertyCommand = ToggleStyleTextPropertyCommand;\n      /***/\n    },\n    /* 59 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics32 = function extendStatics(d, b) {\n          _extendStatics32 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics32(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics32(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var AutoLayoutCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutCommandBase, _super);\n\n        function AutoLayoutCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutCommandBase.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !this.control.selection.isEmpty();\n        };\n\n        AutoLayoutCommandBase.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var shapes = this.control.selection.getSelectedShapes(false, true);\n          var connectors = this.control.selection.getSelectedConnectors(false, true);\n          var graphInfo = ModelUtils_1.ModelUtils.getGraphInfoByItems(this.control.model, shapes, connectors, true);\n          var settings = this.createLayoutSettings();\n          graphInfo.forEach(function (info) {\n            var layout = _this.createLayout(settings, info.graph);\n\n            var nonGraphItems = ModelUtils_1.ModelUtils.getNonGraphItems(_this.control.model, info.container, layout.nodeToLayout, shapes, connectors);\n            ModelUtils_1.ModelUtils.applyLayout(_this.control.history, _this.control.model, info.container, info.graph, layout, nonGraphItems, settings, _this.control.settings.snapToGrid, _this.control.settings.gridSize);\n          });\n          ModelUtils_1.ModelUtils.tryUpdateModelSize(this.control.history, this.control.model);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        return AutoLayoutCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.AutoLayoutCommandBase = AutoLayoutCommandBase;\n      /***/\n    },\n    /* 60 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics33 = function extendStatics(d, b) {\n          _extendStatics33 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics33(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics33(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ChangePagePropertyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangePagePropertyCommand, _super);\n\n        function ChangePagePropertyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangePagePropertyCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var items = this.createHistoryItems(parameter);\n          items.forEach(function (item) {\n            _this.control.history.addAndRedo(item);\n          });\n          ModelUtils_1.ModelUtils.tryUpdateModelSize(this.control.history, this.control.model);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        ChangePagePropertyCommand.prototype.getItems = function () {\n          return null;\n        };\n\n        return ChangePagePropertyCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangePagePropertyCommand = ChangePagePropertyCommand;\n      /***/\n    },\n    /* 61 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics34 = function extendStatics(d, b) {\n          _extendStatics34 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics34(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics34(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var BaseBuilder_1 = __webpack_require__(112);\n\n      var Graph_1 = __webpack_require__(53);\n\n      var NodeLayout_1 = __webpack_require__(56);\n\n      var Structures_1 = __webpack_require__(31);\n\n      var ListUtils_1 = __webpack_require__(70);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var LayoutSettings_1 = __webpack_require__(22);\n\n      var GraphLayout_1 = __webpack_require__(111);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var CycleRemover_1 = __webpack_require__(113);\n\n      var SugiyamaLayoutBuilder =\n      /** @class */\n      function (_super) {\n        __extends(SugiyamaLayoutBuilder, _super);\n\n        function SugiyamaLayoutBuilder() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        SugiyamaLayoutBuilder.prototype.build = function () {\n          var _this = this;\n\n          var offset = 0;\n          var layout = new GraphLayout_1.GraphLayout();\n          var nodeOrderer = new SugiyamaNodesOrderer();\n          this.graph.getConnectedComponents().forEach(function (component) {\n            var acyclicGraphInfo = CycleRemover_1.CycleRemover.removeCycles(component);\n            var layers = SugiyamaLayerDistributor.getLayers(acyclicGraphInfo.graph);\n            var orderedGraph = nodeOrderer.orderNodes(acyclicGraphInfo.graph, layers);\n            var removedEdges = Object.keys(acyclicGraphInfo.removedEdges).map(function (ek) {\n              return component.getEdge(ek);\n            });\n            var coordinatedGraph = nodeOrderer.assignAbsCoordinates(orderedGraph);\n\n            var componentLayout = _this.createInfoGraphLayout(coordinatedGraph, acyclicGraphInfo.reversedEdges, removedEdges);\n\n            layout.extend(_this.setComponentOffset(componentLayout, offset));\n            offset += _this.getComponentOffset(componentLayout);\n          });\n          return layout;\n        }; // Order Nodes\n\n\n        SugiyamaLayoutBuilder.prototype.createInfoGraphLayout = function (coordinatedGraph, reversedEdges, removedEdges) {\n          var _this = this;\n\n          var currentPosition = new Utils_1.Point(0, 0);\n          var items = coordinatedGraph.items;\n          var sortedLayers = new ListUtils_1.HashSet(items.map(function (n) {\n            return n.layer;\n          }).sort());\n          var absOffsetInfo = this.getAbsOffsetInfo(coordinatedGraph.items);\n          var positions = {};\n          var totalDepth = 0;\n          var leftEdge = Number.MAX_SAFE_INTEGER || Number.MAX_VALUE;\n          var rightEdge = Number.MIN_SAFE_INTEGER || Number.MAX_VALUE;\n\n          var _loop_1 = function _loop_1(i) {\n            var layer = sortedLayers.item(i);\n            var maxDepthLayer = 0;\n            items.filter(function (n) {\n              return n.layer === layer;\n            }).sort(function (a, b) {\n              return a.position - b.position;\n            }).forEach(function (n) {\n              var depthNodeSize = _this.getDepthNodeSize(n);\n\n              var directionOffset = _this.chooseDirectionValue(0, depthNodeSize);\n\n              var absPosition = _this.getAbsPosition(n.position, _this.getBreadthNodeSize(n), absOffsetInfo);\n\n              currentPosition = _this.setBreadth(currentPosition, absPosition);\n\n              var nodePosition = _this.setDepthOffset(currentPosition, -directionOffset);\n\n              positions[n.key] = nodePosition;\n              if (n.isDummy) return;\n              var breadth = _this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal ? nodePosition.y : nodePosition.x;\n              leftEdge = Math.min(leftEdge, breadth);\n              rightEdge = Math.max(rightEdge, breadth + _this.getBreadthNodeSize(n));\n              maxDepthLayer = Math.max(maxDepthLayer, _this.getDepthNodeSize(n));\n            });\n            totalDepth += maxDepthLayer;\n            currentPosition = this_1.setBreadth(currentPosition, 0);\n            currentPosition = this_1.setDepthOffset(currentPosition, this_1.getDirectionValue(maxDepthLayer + this_1.settings.layerSpacing));\n          };\n\n          var this_1 = this;\n\n          for (var i = 0; i < sortedLayers.length; i++) {\n            _loop_1(i);\n          }\n\n          totalDepth += (sortedLayers.length - 1) * this.settings.layerSpacing;\n          var layout = new GraphLayout_1.GraphLayout();\n          this.createNodesLayout(coordinatedGraph, layout, leftEdge, totalDepth, positions);\n          this.createEdgesLayout(coordinatedGraph, layout, reversedEdges, removedEdges);\n          return layout; //this.getDummyEdgesRoutes(infoGraph);\n        };\n\n        SugiyamaLayoutBuilder.prototype.createNodesLayout = function (infoGraph, layout, leftEdge, totalDepth, positions) {\n          var _this = this;\n\n          var offset = this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? new Utils_1.Point(-leftEdge, this.chooseDirectionValue(0, totalDepth)) : new Utils_1.Point(this.chooseDirectionValue(0, totalDepth), -leftEdge);\n          infoGraph.items.forEach(function (n) {\n            if (!n.isDummy) {\n              var node = _this.graph.getNode(n.key);\n\n              layout.addNode(new NodeLayout_1.NodeLayout(node, positions[n.key].offset(offset.x, offset.y)));\n            }\n          });\n        };\n\n        SugiyamaLayoutBuilder.prototype.createEdgesLayout = function (infoGraph, layout, reversedEdges, removedEdges) {\n          var DIRECT = this.getDirectEdgeLayout();\n          var TOP_TO_BOTTOM = this.getDiffLevelEdgeLayout(true);\n          var BOTTOM_TO_TOP = this.getDiffLevelEdgeLayout(false);\n          var TOP_TO_TOP = this.getSameLevelEdgeLayout(true);\n          var BOTTOM_TO_BOTTOM = this.getSameLevelEdgeLayout(false);\n          var occupied = {};\n          infoGraph.edges.filter(function (e) {\n            return !e.isDummy;\n          }).concat(removedEdges.map(function (e) {\n            return new EdgeOnLayer(e.key, false, e.from, e.to);\n          })).sort(function (a, b) {\n            return infoGraph.getNode(a.originFrom).layer - infoGraph.getNode(b.originFrom).layer || infoGraph.getNode(a.to).layer - infoGraph.getNode(b.to).layer;\n          }).forEach(function (e) {\n            var isReversed = reversedEdges[e.key];\n            var from = infoGraph.getNode(isReversed ? e.to : e.originFrom);\n            var to = infoGraph.getNode(isReversed ? e.originFrom : e.to);\n            if (to.layer - from.layer === 1) layout.addEdge(new NodeLayout_1.EdgeLayout(e.key, DIRECT.from, DIRECT.to));else {\n              var candidates_1 = [];\n\n              if (to.position - from.position >= 1) {\n                candidates_1.push(TOP_TO_BOTTOM);\n                candidates_1.push({\n                  from: DIRECT.from,\n                  to: TOP_TO_BOTTOM.to\n                });\n                candidates_1.push({\n                  from: TOP_TO_BOTTOM.from,\n                  to: DIRECT.to\n                });\n              } else if (to.position - from.position <= -1) {\n                candidates_1.push(BOTTOM_TO_TOP);\n                candidates_1.push({\n                  from: DIRECT.from,\n                  to: BOTTOM_TO_TOP.to\n                });\n                candidates_1.push({\n                  from: BOTTOM_TO_TOP.from,\n                  to: DIRECT.to\n                });\n              } else {\n                var oneliner = from.position === to.position && to.position === 0 ? [TOP_TO_TOP, BOTTOM_TO_BOTTOM] : [BOTTOM_TO_BOTTOM, TOP_TO_TOP];\n                oneliner.forEach(function (c) {\n                  return candidates_1.push(c);\n                });\n                oneliner.forEach(function (c) {\n                  candidates_1.push({\n                    from: c.from,\n                    to: DIRECT.to\n                  });\n                  candidates_1.push({\n                    from: DIRECT.from,\n                    to: c.to\n                  });\n                });\n              }\n\n              candidates_1.push(DIRECT);\n\n              for (var i = 0, candidate = void 0; candidate = candidates_1[i]; i++) {\n                var fromKey = from.key + \"_\" + candidate.from;\n                var toKey = to.key + \"_\" + candidate.to;\n\n                if (occupied[fromKey] !== Connector_1.ConnectorPosition.End && occupied[toKey] !== Connector_1.ConnectorPosition.Begin) {\n                  layout.addEdge(new NodeLayout_1.EdgeLayout(e.key, candidate.from, candidate.to));\n                  occupied[fromKey] = Connector_1.ConnectorPosition.Begin;\n                  occupied[toKey] = Connector_1.ConnectorPosition.End;\n                  break;\n                }\n              }\n            }\n          });\n        };\n\n        SugiyamaLayoutBuilder.prototype.getDirectEdgeLayout = function () {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal) return this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward ? {\n            from: 1,\n            to: 3\n          } : {\n            from: 3,\n            to: 1\n          };\n          return this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward ? {\n            from: 2,\n            to: 0\n          } : {\n            from: 0,\n            to: 2\n          };\n        };\n\n        SugiyamaLayoutBuilder.prototype.getDiffLevelEdgeLayout = function (topToBottom) {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal) return topToBottom ? {\n            from: 2,\n            to: 0\n          } : {\n            from: 0,\n            to: 2\n          };\n          return topToBottom ? {\n            from: 3,\n            to: 1\n          } : {\n            from: 1,\n            to: 3\n          };\n        };\n\n        SugiyamaLayoutBuilder.prototype.getSameLevelEdgeLayout = function (topToBottom) {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal) return topToBottom ? {\n            from: 0,\n            to: 0\n          } : {\n            from: 2,\n            to: 2\n          };\n          return topToBottom ? {\n            from: 3,\n            to: 3\n          } : {\n            from: 1,\n            to: 1\n          };\n        }; // private getDummyEdgesRoutes(infoGraph: FastGraph<NodeOnLayer, EdgeOnLayer>): {[nodeKey: string]: NodeOnLayer[]} {\n        //     let resultRoutes: {[nodeKey: string]: NodeOnLayer[]} = {};\n        //     let dummyEdgeRoutes: {[edgeHash: string]: NodeOnLayer[]} = {};\n        //     infoGraph.edges\n        //         .filter(e => !infoGraph.getNode(e.from).isDummy && infoGraph.getNode(e.to).isDummy)\n        //         .forEach(rootEdge => {\n        //             let edgeHash = rootEdge.getHashCode();\n        //             dummyEdgeRoutes[edgeHash] = [];\n        //             let iterator = infoGraph.createIterator(ConnectionMode.Outgoing);\n        //             iterator.visitEachEdgeOnce = false;\n        //             iterator.onNode = (n) => dummyEdgeRoutes[edgeHash].push(n);\n        //             iterator.skipNode = (n) => !n.isDummy;\n        //             iterator.skipEdge = (e) => false;\n        //             iterator.onEdge = (e, out) => {\n        //                 if(!infoGraph.getNode(e.to).isDummy)\n        //                     resultRoutes[new EdgeOnLayer(e.key, e.isDummy, rootEdge.from, e.to).getHashCode()] = dummyEdgeRoutes[edgeHash];\n        //             };\n        //             iterator.iterate(rootEdge.to);\n        //         });\n        //     return resultRoutes;\n        // }\n\n\n        SugiyamaLayoutBuilder.prototype.getAbsOffsetInfo = function (nodesInfos) {\n          var _this = this;\n\n          var absOffsetMatrix = {};\n\n          var addCell = function addCell(n, intAbsCoord) {\n            if (absOffsetMatrix[intAbsCoord] === undefined) absOffsetMatrix[intAbsCoord] = _this.getBreadthNodeSize(n);\n            absOffsetMatrix[intAbsCoord] = Math.max(absOffsetMatrix[intAbsCoord], _this.getBreadthNodeSize(n));\n          };\n\n          nodesInfos.forEach(function (n) {\n            var intAbsCoord = trunc(n.position);\n            addCell(n, intAbsCoord);\n            if (absOffsetMatrix[intAbsCoord] % 1 !== 0) addCell(n, intAbsCoord + 1);\n          });\n          var absOffsetInfo = {};\n          var leftOffset = 0;\n          Object.keys(absOffsetMatrix).sort().forEach(function (coord) {\n            absOffsetInfo[coord] = {\n              leftOffset: leftOffset,\n              width: absOffsetMatrix[coord]\n            };\n            leftOffset += absOffsetMatrix[coord] + _this.settings.columnSpacing;\n          });\n          return absOffsetInfo;\n        };\n\n        SugiyamaLayoutBuilder.prototype.setBreadth = function (position, breadthPosition) {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical) return new Utils_1.Point(breadthPosition, position.y);\n          return new Utils_1.Point(position.x, breadthPosition);\n        };\n\n        SugiyamaLayoutBuilder.prototype.setDepthOffset = function (position, offset) {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal) return new Utils_1.Point(position.x + offset, position.y);\n          return new Utils_1.Point(position.x, position.y + offset);\n        };\n\n        SugiyamaLayoutBuilder.prototype.getAbsPosition = function (absCoordinate, itemSize, absoluteOffsetInfo) {\n          var intAbsCoord = trunc(absCoordinate);\n          var absLeftOffset = absoluteOffsetInfo[intAbsCoord].leftOffset;\n          var cellWidth = absoluteOffsetInfo[intAbsCoord].width;\n          if (absCoordinate % 1 === 0) return absLeftOffset + (cellWidth - itemSize) / 2;\n          return absLeftOffset + cellWidth - (itemSize - this.settings.columnSpacing) / 2;\n        };\n\n        SugiyamaLayoutBuilder.prototype.getBreadthNodeSize = function (node) {\n          return node.isDummy ? 0 : this.getBreadthNodeSizeCore(this.graph.getNode(node.key));\n        };\n\n        SugiyamaLayoutBuilder.prototype.getDepthNodeSize = function (node) {\n          return node.isDummy ? 0 : this.getDepthNodeSizeCore(this.graph.getNode(node.key));\n        };\n\n        return SugiyamaLayoutBuilder;\n      }(BaseBuilder_1.LayoutBuilder);\n\n      exports.SugiyamaLayoutBuilder = SugiyamaLayoutBuilder;\n\n      var SugiyamaLayerDistributor =\n      /** @class */\n      function () {\n        function SugiyamaLayerDistributor() {}\n\n        SugiyamaLayerDistributor.getLayers = function (acyclicGraph) {\n          var feasibleTree = this.getFeasibleTree(acyclicGraph);\n          return this.calcNodesLayers(feasibleTree);\n        };\n\n        SugiyamaLayerDistributor.getFeasibleTree = function (graph) {\n          var layers = this.initLayerAssignment(graph);\n          return graph.getSpanningGraph(graph.nodes[0], Structures_1.ConnectionMode.OutgoingAndIncoming, function (e) {\n            return layers[e.to] - layers[e.from];\n          });\n        };\n\n        SugiyamaLayerDistributor.initLayerAssignment = function (graph) {\n          var layers = {};\n          var currentLayer = 0;\n          var actualAssignedNodes = {};\n          var assigningNodes = graph.nodes.filter(function (n) {\n            return !graph.getAdjacentEdges(n, Structures_1.ConnectionMode.Incoming).length;\n          });\n\n          var _loop_2 = function _loop_2() {\n            assigningNodes.forEach(function (n) {\n              layers[n] = currentLayer;\n              actualAssignedNodes[n] = true;\n            });\n            Object.keys(actualAssignedNodes).forEach(function (n) {\n              if (graph.getAdjacentEdges(n, Structures_1.ConnectionMode.Outgoing).filter(function (e) {\n                return layers[e.to] === undefined;\n              }).length === 0) delete actualAssignedNodes[n];\n            });\n            var assigningNodesSet = {};\n            Object.keys(actualAssignedNodes).forEach(function (n) {\n              graph.getAdjacentEdges(n, Structures_1.ConnectionMode.Outgoing).map(function (e) {\n                return e.to;\n              }).filter(function (n) {\n                return layers[n] === undefined && graph.getAdjacentEdges(n, Structures_1.ConnectionMode.Incoming).reduce(function (acc, e) {\n                  return acc && layers[e.from] !== undefined;\n                }, true);\n              }).forEach(function (n) {\n                return assigningNodesSet[n] = true;\n              });\n            });\n            assigningNodes = Object.keys(assigningNodesSet);\n            currentLayer++;\n          };\n\n          while (assigningNodes.length) {\n            _loop_2();\n          }\n\n          return layers;\n        };\n\n        SugiyamaLayerDistributor.calcNodesLayers = function (graph) {\n          var layers = {};\n          var minLayer = Number.MAX_SAFE_INTEGER || Number.MAX_VALUE;\n          var currentLevel = 0;\n          var iterator = graph.createIterator(Structures_1.ConnectionMode.OutgoingAndIncoming);\n          iterator.visitEachEdgeOnce = false;\n\n          iterator.onNode = function (n) {\n            layers[n.key] = currentLevel;\n            minLayer = Math.min(minLayer, currentLevel);\n          };\n\n          iterator.skipNode = function (n) {\n            return layers[n.key] !== undefined;\n          };\n\n          iterator.skipEdge = function (e) {\n            return layers[e.from] !== undefined && layers[e.to] !== undefined;\n          };\n\n          iterator.onEdge = function (e, out) {\n            if (out) currentLevel = layers[e.from] + 1;else currentLevel = layers[e.to] - 1;\n          };\n\n          iterator.iterate(graph.nodes[0]);\n\n          for (var key in layers) {\n            if (!layers.hasOwnProperty(key)) continue;\n            layers[key] -= minLayer;\n          }\n\n          return layers;\n        };\n\n        return SugiyamaLayerDistributor;\n      }();\n\n      exports.SugiyamaLayerDistributor = SugiyamaLayerDistributor;\n\n      var SugiyamaNodesOrderer =\n      /** @class */\n      function () {\n        function SugiyamaNodesOrderer() {\n          this.idCounter = -10000;\n        }\n\n        SugiyamaNodesOrderer.prototype.orderNodes = function (graph, layers) {\n          var maxIteration = 14; //magic number - http://www.graphviz.org/Documentation/TSE93.pdf PAGE (14)\n\n          var currentIteration = 1;\n          var graphInfo = this.initGraphInfo(graph, layers);\n          var nodeInfos = graphInfo.items;\n          var orderInfo = this.initOrder(nodeInfos);\n          var bestNodesPositions = this.getNodeToPositionMap(nodeInfos);\n          var bestCrossCount = this.getCrossCount(orderInfo, graphInfo);\n          var isParentToChildren = true;\n\n          while (currentIteration < maxIteration && bestCrossCount != 0) {\n            orderInfo = this.getNodesOrder(orderInfo, graphInfo, isParentToChildren);\n            var crossCount = this.getCrossCount(orderInfo, graphInfo);\n\n            if (crossCount < bestCrossCount) {\n              bestNodesPositions = this.getNodeToPositionMap(graphInfo.items);\n              bestCrossCount = crossCount;\n            }\n\n            isParentToChildren = !isParentToChildren;\n            currentIteration++;\n          } //transpose() procedure doesn`t implement.\n          //http://www.graphviz.org/Documentation/TSE93.pdf PAGE(16)\n\n\n          graphInfo.items.forEach(function (n) {\n            return n.position = bestNodesPositions[n.key];\n          });\n          return graphInfo;\n        };\n\n        SugiyamaNodesOrderer.prototype.getNodesOrder = function (current, graph, isParentToChildren) {\n          var _this = this;\n\n          var order = {};\n\n          var _loop_3 = function _loop_3(layer) {\n            if (!current.hasOwnProperty(layer)) return \"continue\";\n            var nodePositions = {};\n            current[layer].forEach(function (ni) {\n              var adjacentNodesPositions = (isParentToChildren ? graph.getChildren(ni.key) : graph.getParents(ni.key)).map(function (nk) {\n                return graph.getNode(nk).position;\n              });\n              nodePositions[ni.key] = _this.getNodePosition(adjacentNodesPositions);\n            });\n            order[layer] = this_2.sortNodes(nodePositions, graph);\n          };\n\n          var this_2 = this;\n\n          for (var layer in current) {\n            _loop_3(layer);\n          }\n\n          return order;\n        };\n\n        SugiyamaNodesOrderer.prototype.sortNodes = function (nodePositions, graph) {\n          return Object.keys(nodePositions).sort(function (a, b) {\n            return nodePositions[a] - nodePositions[b];\n          }).map(function (nk, index) {\n            var node = graph.getNode(nk);\n            node.position = index;\n            return node;\n          });\n        };\n\n        SugiyamaNodesOrderer.prototype.getNodePosition = function (adjacentNodesPositions) {\n          adjacentNodesPositions = adjacentNodesPositions.sort();\n          if (!adjacentNodesPositions.length) return 0;\n          var medianIndex = Math.floor(adjacentNodesPositions.length / 2);\n          if (adjacentNodesPositions.length === 2 || adjacentNodesPositions.length % 2 === 1) return adjacentNodesPositions[medianIndex];\n          var leftMedianPosition = adjacentNodesPositions[medianIndex - 1] - adjacentNodesPositions[0];\n          var rightMedianPosition = adjacentNodesPositions[adjacentNodesPositions.length - 1] - adjacentNodesPositions[medianIndex];\n          return Math.floor((adjacentNodesPositions[medianIndex - 1] * rightMedianPosition + adjacentNodesPositions[medianIndex] * leftMedianPosition) / (leftMedianPosition + rightMedianPosition));\n        };\n\n        SugiyamaNodesOrderer.prototype.initOrder = function (nodeInfos) {\n          var result = {};\n          nodeInfos.forEach(function (ni) {\n            return (result[ni.layer] || (result[ni.layer] = [])).push(ni);\n          });\n          return result;\n        };\n\n        SugiyamaNodesOrderer.prototype.getCrossCount = function (orderInfo, graph) {\n          var count = 0;\n\n          var _loop_4 = function _loop_4(layer) {\n            if (!orderInfo.hasOwnProperty(layer)) return \"continue\";\n            var viewedAdjacentNodesPositions = [];\n            orderInfo[layer].forEach(function (n) {\n              var positions = graph.getChildren(n.key).map(function (c) {\n                return graph.getNode(c).position;\n              });\n              positions.forEach(function (p) {\n                count += viewedAdjacentNodesPositions.filter(function (vp) {\n                  return p < vp;\n                }).length;\n              });\n              viewedAdjacentNodesPositions.push.apply(viewedAdjacentNodesPositions, positions);\n            });\n          };\n\n          for (var layer in orderInfo) {\n            _loop_4(layer);\n          }\n\n          return count;\n        };\n\n        SugiyamaNodesOrderer.prototype.initGraphInfo = function (graph, layers) {\n          var _this = this;\n\n          var countNodesOnLayer = {};\n          var nodesInfoMap = {};\n          var nodeInfos = [];\n          var edgeInfos = [];\n          graph.nodes.forEach(function (n) {\n            var layer = layers[n];\n            if (countNodesOnLayer[layer] === undefined) countNodesOnLayer[layer] = 0;\n            var info = new NodeOnLayer(n, false, layer, countNodesOnLayer[layer]++);\n            nodesInfoMap[n] = info;\n            nodeInfos.push(info);\n          });\n          graph.edges.forEach(function (e) {\n            var span = layers[e.to] - layers[e.from];\n\n            if (span > 1) {\n              var prevNodeInfo = nodesInfoMap[e.from];\n\n              for (var delta = 1; delta < span; delta++) {\n                var dNodeInfo = new NodeOnLayer(_this.createDummyID(), true, layers[e.from] + delta, countNodesOnLayer[layers[e.from] + delta]++);\n                edgeInfos.push(new EdgeOnLayer(_this.createDummyID(), true, prevNodeInfo.key, dNodeInfo.key));\n                nodeInfos.push(dNodeInfo);\n                prevNodeInfo = dNodeInfo;\n              }\n\n              edgeInfos.push(new EdgeOnLayer(e.key, false, prevNodeInfo.key, nodesInfoMap[e.to].key, nodesInfoMap[e.from].key));\n            } else edgeInfos.push(new EdgeOnLayer(e.key, false, nodesInfoMap[e.from].key, nodesInfoMap[e.to].key));\n          });\n          return new Graph_1.FastGraph(nodeInfos, edgeInfos);\n        };\n\n        SugiyamaNodesOrderer.prototype.createDummyID = function () {\n          return \"dummy_\" + --this.idCounter;\n        };\n\n        SugiyamaNodesOrderer.prototype.getNodeToPositionMap = function (nodeInfos) {\n          return nodeInfos.reduce(function (acc, ni) {\n            acc[ni.key] = ni.position;\n            return acc;\n          }, {});\n        }; // absolute positioning\n\n\n        SugiyamaNodesOrderer.prototype.assignAbsCoordinates = function (graph) {\n          var absCoordinates = this.getAbsCoodinate(graph);\n          return new Graph_1.FastGraph(graph.items.map(function (n) {\n            return new NodeOnLayer(n.key, n.isDummy, n.layer, absCoordinates[n.key]);\n          }), graph.edges.slice(0));\n        };\n\n        SugiyamaNodesOrderer.prototype.getAbsCoodinate = function (graph) {\n          var _this = this;\n\n          var orderInfo = graph.items.reduce(function (acc, n) {\n            acc[n.layer] = acc[n.layer] || [];\n            var pos = Utils_1.Utils.binaryIndexOf(acc[n.layer], function (ni) {\n              return ni.position - n.position;\n            });\n            acc[n.layer].splice(pos < 0 ? ~pos : pos, 0, n);\n            return acc;\n          }, {});\n          var medianPositions = [MedianAlignmentMode.TopLeft, MedianAlignmentMode.TopRight, MedianAlignmentMode.BottomLeft, MedianAlignmentMode.BottomRight].map(function (alignment) {\n            return _this.getPositionByMedian(graph, alignment, orderInfo);\n          });\n          var nodeToPosition = {};\n          graph.items.forEach(function (n) {\n            var posList = medianPositions.map(function (positions) {\n              return positions[n.key];\n            }).sort();\n            nodeToPosition[n.key] = (posList[1] + posList[2]) / 2;\n          });\n          return nodeToPosition;\n        };\n\n        SugiyamaNodesOrderer.prototype.getPositionByMedian = function (graph, alignment, orderInfo) {\n          var nodeInfos = graph.items;\n          var positions = this.getNodeToPositionMap(nodeInfos);\n          var medians = this.getMedians(graph, nodeInfos, alignment);\n          medians = this.resolveMedianConflicts(graph, orderInfo, medians, alignment);\n          this.getSortedBlocks(graph, nodeInfos, medians, alignment).forEach(function (block) {\n            var maxPos = block.reduce(function (acc, n) {\n              return positions[n.key] > acc ? positions[n.key] : acc;\n            }, -2);\n            block.forEach(function (n) {\n              var delta = maxPos - positions[n.key];\n\n              if (delta > 0) {\n                orderInfo[n.layer].filter(function (ln) {\n                  return ln.position > n.position;\n                }).forEach(function (ln) {\n                  return positions[ln.key] += delta;\n                });\n              }\n\n              positions[n.key] = maxPos;\n            });\n          });\n          return positions;\n        };\n\n        SugiyamaNodesOrderer.prototype.getSortedBlocks = function (graph, nodeInfos, medians, alignment) {\n          var blocks = [];\n          var isBottom = alignment === MedianAlignmentMode.BottomLeft || alignment === MedianAlignmentMode.BottomRight;\n          var allNodesInfo = new ListUtils_1.HashSet(nodeInfos.slice(0).sort(function (a, b) {\n            return isBottom ? a.layer - b.layer : b.layer - a.layer;\n          }), function (n) {\n            return n.key;\n          });\n\n          while (allNodesInfo.length) {\n            var firstNode = allNodesInfo.item(0);\n            var block = this.getBlock(graph, firstNode, medians, alignment);\n            blocks.push(block);\n            block.forEach(function (n) {\n              return allNodesInfo.remove(n);\n            });\n          }\n\n          blocks.sort(function (x, y) {\n            var xMinNodeInfo = x.reduce(function (min, n) {\n              return n.position < min.position ? n : min;\n            }, x[0]);\n            var yOnMinXLayer = y.filter(function (n) {\n              return n.layer == xMinNodeInfo.layer;\n            })[0];\n            if (yOnMinXLayer) return xMinNodeInfo.position - yOnMinXLayer.position;\n            var yMinNodeInfo = y.reduce(function (min, n) {\n              return n.position < min.position ? n : min;\n            }, y[0]);\n            var xOnMinXLayer = x.filter(function (n) {\n              return n.layer == yMinNodeInfo.layer;\n            })[0];\n            if (xOnMinXLayer) return xOnMinXLayer.position - yMinNodeInfo.position;\n            return xMinNodeInfo.layer - yMinNodeInfo.layer;\n          });\n          return blocks;\n        };\n\n        SugiyamaNodesOrderer.prototype.getBlock = function (graph, root, medians, alignment) {\n          var block = [];\n          var median = null;\n\n          do {\n            if (median) root = alignment === MedianAlignmentMode.TopLeft || alignment === MedianAlignmentMode.TopRight ? graph.getNode(median.from) : graph.getNode(median.to);\n            block.push(root);\n            median = medians[root.key];\n          } while (median);\n\n          return block;\n        };\n\n        SugiyamaNodesOrderer.prototype.resolveMedianConflicts = function (graph, layers, medians, alignment) {\n          var _this = this;\n\n          var filteredMedians = {};\n\n          var _loop_5 = function _loop_5(layer) {\n            var minPos = undefined,\n                maxPos = undefined;\n            if (!layers.hasOwnProperty(layer)) return \"continue\";\n            var nodeInfos = layers[layer];\n            if (alignment === MedianAlignmentMode.TopRight || alignment === MedianAlignmentMode.BottomRight) nodeInfos = nodeInfos.slice(0).sort(function (a, b) {\n              return b.position - a.position;\n            }); // sorted descending\n\n            nodeInfos.forEach(function (n) {\n              var median = medians[n.key];\n              if (!median) filteredMedians[n.key] = null;else {\n                var medianItemKey = alignment === MedianAlignmentMode.TopLeft || alignment === MedianAlignmentMode.TopRight ? median.from : median.to;\n                var medianPosition = graph.getNode(medianItemKey).position;\n                if (_this.checkMedianConfict(minPos, maxPos, medianPosition, alignment)) filteredMedians[n.key] = null;else {\n                  minPos = minPos === undefined ? medianPosition : Math.min(minPos, medianPosition);\n                  maxPos = maxPos === undefined ? medianPosition : Math.max(maxPos, medianPosition);\n                  filteredMedians[n.key] = median;\n                }\n              }\n            });\n          };\n\n          for (var layer in layers) {\n            _loop_5(layer);\n          }\n\n          return filteredMedians;\n        };\n\n        SugiyamaNodesOrderer.prototype.checkMedianConfict = function (min, max, medianPosition, alignment) {\n          if (min === undefined || max === undefined) return false;\n          if (alignment === MedianAlignmentMode.TopLeft || alignment === MedianAlignmentMode.BottomLeft) return max >= medianPosition;\n          return min <= medianPosition;\n        };\n\n        SugiyamaNodesOrderer.prototype.getMedians = function (graph, nodeInfos, alignment) {\n          var _this = this;\n\n          var medians = {};\n          nodeInfos.forEach(function (n) {\n            var actualAdjacentEdges = _this.getActualAdjacentEdges(graph, n, alignment);\n\n            var medianPosition = _this.getMedianPosition(actualAdjacentEdges.length, alignment);\n\n            medians[n.key] = actualAdjacentEdges[medianPosition];\n          });\n          return medians;\n        };\n\n        SugiyamaNodesOrderer.prototype.getMedianPosition = function (length, alignment) {\n          if (length === 0) return -1;\n          if (length % 2 !== 0) return Math.floor(length / 2);\n          if (alignment === MedianAlignmentMode.TopLeft || alignment === MedianAlignmentMode.BottomLeft) return Math.floor(length / 2) - 1;\n          if (alignment === MedianAlignmentMode.TopRight || alignment === MedianAlignmentMode.BottomRight) return Math.floor(length / 2);\n          throw new Error(\"Invalid Operation\");\n        };\n\n        SugiyamaNodesOrderer.prototype.getActualAdjacentEdges = function (graph, node, alignment) {\n          if (alignment === MedianAlignmentMode.TopLeft || alignment === MedianAlignmentMode.TopRight) return graph.getAdjacentEdges(node.key, Structures_1.ConnectionMode.Incoming).sort(function (a, b) {\n            return graph.getNode(a.from).position - graph.getNode(b.from).position;\n          });\n          return graph.getAdjacentEdges(node.key, Structures_1.ConnectionMode.Outgoing).sort(function (a, b) {\n            return graph.getNode(a.to).position - graph.getNode(b.to).position;\n          });\n        };\n\n        return SugiyamaNodesOrderer;\n      }();\n\n      exports.SugiyamaNodesOrderer = SugiyamaNodesOrderer;\n\n      var NodeOnLayer =\n      /** @class */\n      function () {\n        function NodeOnLayer(key, isDummy, layer, position) {\n          this.key = key;\n          this.isDummy = isDummy;\n          this.layer = layer;\n          this.position = position;\n        }\n\n        NodeOnLayer.prototype.getHashCode = function () {\n          return this.key.toString();\n        };\n\n        return NodeOnLayer;\n      }();\n\n      exports.NodeOnLayer = NodeOnLayer;\n\n      var EdgeOnLayer =\n      /** @class */\n      function () {\n        function EdgeOnLayer(key, isDummy, from, to, originFrom) {\n          this.key = key;\n          this.isDummy = isDummy;\n          this.from = from;\n          this.to = to;\n          this._originFrom = originFrom;\n        }\n\n        EdgeOnLayer.prototype.getHashCode = function () {\n          return this.from + \"-\" + this.to;\n        };\n\n        Object.defineProperty(EdgeOnLayer.prototype, \"originFrom\", {\n          get: function get() {\n            return this._originFrom !== undefined ? this._originFrom : this.from;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        return EdgeOnLayer;\n      }();\n\n      exports.EdgeOnLayer = EdgeOnLayer;\n      var MedianAlignmentMode;\n\n      (function (MedianAlignmentMode) {\n        MedianAlignmentMode[MedianAlignmentMode[\"TopLeft\"] = 0] = \"TopLeft\";\n        MedianAlignmentMode[MedianAlignmentMode[\"TopRight\"] = 1] = \"TopRight\";\n        MedianAlignmentMode[MedianAlignmentMode[\"BottomLeft\"] = 2] = \"BottomLeft\";\n        MedianAlignmentMode[MedianAlignmentMode[\"BottomRight\"] = 3] = \"BottomRight\";\n      })(MedianAlignmentMode || (MedianAlignmentMode = {}));\n\n      function trunc(val) {\n        if (Math.trunc) return Math.trunc(val);\n        if (!isFinite(val)) return val;\n        return val - val % 1 || (val < 0 ? -0 : val === 0 ? val : 0);\n      }\n      /***/\n\n    },\n    /* 62 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Browser_1 = __webpack_require__(23);\n\n      var Base_1 = __webpack_require__(17);\n\n      var TouchUIHelper =\n      /** @class */\n      function () {\n        function TouchUIHelper() {}\n\n        TouchUIHelper.onEventAttachingToDocument = function (eventName, func) {\n          if (Browser_1.Browser.MacOSMobilePlatform && TouchUIHelper.isTouchEventName(eventName)) {\n            if (!TouchUIHelper.documentTouchHandlers[eventName]) TouchUIHelper.documentTouchHandlers[eventName] = [];\n            TouchUIHelper.documentTouchHandlers[eventName].push(func);\n            return TouchUIHelper.documentEventAttachingAllowed;\n          }\n\n          return true;\n        };\n\n        TouchUIHelper.isTouchEventName = function (eventName) {\n          return Browser_1.Browser.WebKitTouchUI && (eventName.indexOf(\"touch\") > -1 || eventName.indexOf(\"gesture\") > -1);\n        };\n\n        TouchUIHelper.isTouchEvent = function (evt) {\n          if (!evt) return false;\n          return Browser_1.Browser.WebKitTouchUI && Base_1.IsExists(evt.changedTouches);\n        };\n\n        TouchUIHelper.getEventX = function (evt) {\n          return Browser_1.Browser.IE ? evt.pageX : evt.changedTouches[0].pageX;\n        };\n\n        TouchUIHelper.getEventY = function (evt) {\n          return Browser_1.Browser.IE ? evt.pageY : evt.changedTouches[0].pageY;\n        };\n\n        TouchUIHelper.touchMouseDownEventName = Browser_1.Browser.WebKitTouchUI ? \"touchstart\" : Browser_1.Browser.Edge && Browser_1.Browser.MSTouchUI && window.PointerEvent ? \"pointerdown\" : \"mousedown\";\n        TouchUIHelper.touchMouseUpEventName = Browser_1.Browser.WebKitTouchUI ? \"touchend\" : Browser_1.Browser.Edge && Browser_1.Browser.MSTouchUI && window.PointerEvent ? \"pointerup\" : \"mouseup\";\n        TouchUIHelper.touchMouseMoveEventName = Browser_1.Browser.WebKitTouchUI ? \"touchmove\" : Browser_1.Browser.Edge && Browser_1.Browser.MSTouchUI && window.PointerEvent ? \"pointermove\" : \"mousemove\";\n        TouchUIHelper.msTouchDraggableClassName = \"dxMSTouchDraggable\";\n        TouchUIHelper.documentTouchHandlers = {};\n        TouchUIHelper.documentEventAttachingAllowed = true;\n        return TouchUIHelper;\n      }();\n\n      exports.TouchUIHelper = TouchUIHelper; //export class TouchUIHelper {\n      //    isGesture: false;\n      //    isMouseEventFromScrolling: false;\n      //    isNativeScrollingAllowed: true;\n      //    clickSensetivity: 10;\n      //    documentTouchHandlers: {};\n      //    documentEventAttachingAllowed: true;\n      //    isTouchEvent(evt) {\n      //        if (!evt)\n      //            return false;\n      //        return ASPx.Browser.WebKitTouchUI && ASPx.IsExists(evt.changedTouches);\n      //    }\n      //    getEventX(evt) {\n      //        return ASPx.Browser.IE ? evt.pageX : evt.changedTouches[0].pageX;\n      //    }\n      //    getEventY (evt) {\n      //        return ASPx.Browser.IE ? evt.pageY : evt.changedTouches[0].pageY;\n      //    }\n      //    getWebkitMajorVersion() {\n      //        if (!this.webkitMajorVersion) {\n      //            var regExp = new RegExp(\"applewebkit/(\\\\d+)\", \"i\");\n      //            var matches = regExp.exec(ASPx.Browser.UserAgent);\n      //            if (matches && matches.index >= 1)\n      //                this.webkitMajorVersion = matches[1];\n      //        }\n      //        return this.webkitMajorVersion;\n      //    }\n      //    getIsLandscapeOrientation() {\n      //        if (ASPx.Browser.MacOSMobilePlatform || ASPx.Browser.AndroidMobilePlatform)\n      //            return Math.abs(window.orientation) == 90;\n      //        return ASPx.GetDocumentClientWidth() > ASPx.GetDocumentClientHeight();\n      //    }\n      //    nativeScrollingSupported() {\n      //        var allowedSafariVersion = ASPx.Browser.Version >= 5.1 && ASPx.Browser.Version < 8; //T250059\n      //        var allowedWebKitVersion = this.getWebkitMajorVersion() > 533 && (ASPx.Browser.Chrome || this.getWebkitMajorVersion() < 600);\n      //        return (ASPx.Browser.MacOSMobilePlatform && (allowedSafariVersion || allowedWebKitVersion))\n      //            || (ASPx.Browser.AndroidMobilePlatform && ASPx.Browser.PlaformMajorVersion >= 3) || (ASPx.Browser.MSTouchUI && (!ASPx.Browser.WindowsPhonePlatform || !ASPx.Browser.IE));\n      //    }\n      //    makeScrollableIfRequired(element, options) {\n      //        if (ASPx.Browser.WebKitTouchUI && element) {\n      //            var overflow = ASPx.GetCurrentStyle(element).overflow;\n      //            if (element.tagName == \"DIV\" && overflow != \"hidden\" && overflow != \"visible\") {\n      //                return this.MakeScrollable(element);\n      //            }\n      //        }\n      //    }\n      //    preventScrollOnEvent(evt) {\n      //    }\n      //    handleFastTapIfRequired(evt, action, preventCommonClickEvents) {\n      //        if (ASPx.Browser.WebKitTouchUI && evt.type == 'touchstart' && action) {\n      //            this.FastTapHelper.HandleFastTap(evt, action, preventCommonClickEvents);\n      //            return true;\n      //        }\n      //        return false;\n      //    }\n      //    ensureDocumentSizesCorrect () {\n      //        return (document.documentElement.clientWidth - document.documentElement.clientHeight) / (screen.width - screen.height) > 0;\n      //    }\n      //    ensureOrientationChanged(onOrientationChangedFunction) {\n      //        if (ASPxClientUtils.iOSPlatform || this.ensureDocumentSizesCorrect())\n      //            onOrientationChangedFunction();\n      //        else {\n      //            window.setTimeout(function () {\n      //                this.ensureOrientationChanged(onOrientationChangedFunction);\n      //            }.aspxBind(this), 100);\n      //        }\n      //    }\n      //    onEventAttachingToDocument(eventName, func) {\n      //        if (ASPx.Browser.MacOSMobilePlatform && this.isTouchEventName(eventName)) {\n      //            if (!this.documentTouchHandlers[eventName])\n      //                this.documentTouchHandlers[eventName] = [];\n      //            this.documentTouchHandlers[eventName].push(func);\n      //            return this.documentEventAttachingAllowed;\n      //        }\n      //        return true;\n      //    }\n      //    onEventDettachedFromDocument(eventName, func) {\n      //        if (ASPx.Browser.MacOSMobilePlatform && this.isTouchEventName(eventName)) {\n      //            var handlers = this.documentTouchHandlers[eventName];\n      //            if (handlers)\n      //                ASPx.Data.ArrayRemove(handlers, func);\n      //        }\n      //    }\n      //    processDocumentTouchEventHandlers(proc) {\n      //        var touchEventNames = [\"touchstart\", \"touchend\", \"touchmove\", \"gesturestart\", \"gestureend\"];\n      //        for (var i = 0; i < touchEventNames.length; i++) {\n      //            var eventName = touchEventNames[i];\n      //            var handlers = this.documentTouchHandlers[eventName];\n      //            if (handlers) {\n      //                for (var j = 0; j < handlers.length; j++) {\n      //                    proc(eventName, handlers[j]);\n      //                }\n      //            }\n      //        }\n      //    }\n      //    removeDocumentTouchEventHandlers() {\n      //        if (ASPx.Browser.MacOSMobilePlatform) {\n      //            this.documentEventAttachingAllowed = false;\n      //            this.processDocumentTouchEventHandlers(ASPx.Evt.DetachEventFromDocumentCore);\n      //        }\n      //    }\n      //    restoreDocumentTouchEventHandlers () {\n      //        if (ASPx.Browser.MacOSMobilePlatform) {\n      //            this.documentEventAttachingAllowed = true;\n      //            this.processDocumentTouchEventHandlers(ASPx.Evt.AttachEventToDocumentCore);\n      //        }\n      //    }\n      //    IsNativeScrolling() {\n      //        return TouchUIHelper.nativeScrollingSupported() && TouchUIHelper.isNativeScrollingAllowed;\n      //    }\n      //    pointerEnabled: !!(window.PointerEvent || window.MSPointerEvent);\n      //    pointerDownEventName: window.PointerEvent ? \"pointerdown\" : \"MSPointerDown\",\n      //            pointerUpEventName: window.PointerEvent ? \"pointerup\" : \"MSPointerUp\",\n      //                pointerCancelEventName: window.PointerEvent ? \"pointercancel\" : \"MSPointerCancel\",\n      //                    pointerMoveEventName: window.PointerEvent ? \"pointermove\" : \"MSPointerMove\",\n      //                        pointerOverEventName: window.PointerEvent ? \"pointerover\" : \"MSPointerOver\",\n      //                            pointerOutEventName: window.PointerEvent ? \"pointerout\" : \"MSPointerOut\",\n      //                                pointerType: {\n      //        Touch: (ASPx.Browser.IE && ASPx.Browser.Version == 10) ? 2 : \"touch\",\n      //            Pen: (ASPx.Browser.IE && ASPx.Browser.Version == 10) ? 3 : \"pen\",\n      //                Mouse: (ASPx.Browser.IE && ASPx.Browser.Version == 10) ? 4 : \"mouse\"\n      //    }\n      //    msGestureEnabled: !!(window.PointerEvent || window.MSPointerEvent) && typeof (MSGesture) != \"undefined\";\n      //    msTouchCreateGesturesWrapper(element, onTap) {\n      //        if (!TouchUIHelper.msGestureEnabled)\n      //            return;\n      //        var gesture = new MSGesture();\n      //        gesture.target = element;\n      //        ASPx.Evt.AttachEventToElement(element, TouchUIHelper.pointerDownEventName, function (evt) {\n      //            gesture.addPointer(evt.pointerId);\n      //        });\n      //        ASPx.Evt.AttachEventToElement(element, TouchUIHelper.pointerUpEventName, function (evt) {\n      //            gesture.stop();\n      //        });\n      //        if (onTap)\n      //            ASPx.Evt.AttachEventToElement(element, \"MSGestureTap\", onTap);\n      //        return gesture;\n      //    }\n      //}\n\n      /***/\n    },\n    /* 63 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics35 = function extendStatics(d, b) {\n          _extendStatics35 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics35(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics35(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var NativeItem =\n      /** @class */\n      function () {\n        function NativeItem(id, key) {\n          this.id = id;\n          this.key = key;\n        }\n\n        return NativeItem;\n      }();\n\n      exports.NativeItem = NativeItem;\n\n      var NativeShape =\n      /** @class */\n      function (_super) {\n        __extends(NativeShape, _super);\n\n        function NativeShape() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        return NativeShape;\n      }(NativeItem);\n\n      exports.NativeShape = NativeShape;\n\n      var NativeConnector =\n      /** @class */\n      function (_super) {\n        __extends(NativeConnector, _super);\n\n        function NativeConnector() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        return NativeConnector;\n      }(NativeItem);\n\n      exports.NativeConnector = NativeConnector;\n      /***/\n    },\n    /* 64 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics36 = function extendStatics(d, b) {\n          _extendStatics36 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics36(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics36(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var Utils_1 = __webpack_require__(15);\n\n      var TextPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(TextPrimitive, _super);\n\n        function TextPrimitive(x, y, text, width, style, reverseTextAhchor, clipPathId, filterId, rotated, onApplyProperties) {\n          var _this = _super.call(this, style, \"\", clipPathId, onApplyProperties) || this;\n\n          _this.x = x;\n          _this.y = y;\n          _this.text = text;\n          _this.width = width;\n          _this.reverseTextAhchor = reverseTextAhchor;\n          _this.rotated = rotated;\n          _this.filterId = filterId;\n          _this.textSegmens = _this.text.split(\"\\n\").filter(function (s) {\n            return s;\n          });\n          return _this;\n        }\n\n        TextPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"text\");\n        };\n\n        TextPrimitive.prototype.applyElementProperties = function (element) {\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          if (this.filterId) element.setAttribute(\"filter\", Utils_1.RenderUtils.getUrlPathById(this.filterId));\n\n          _super.prototype.applyElementProperties.call(this, element);\n\n          if (element.getAttribute(\"appliedText\") !== this.text || element.getAttribute(\"appliedWidth\") !== (this.width && this.width.toString())) {\n            this.createTSpanElements(element);\n            element.setAttribute(\"appliedText\", this.text);\n            element.setAttribute(\"appliedWidth\", this.width && this.width.toString());\n          } else this.prepareTSpanElements(element);\n\n          if (this.rotated) {\n            element.setAttribute(\"class\", \"rotated\");\n            element.style.setProperty(\"transform-origin\", (typeof this.x === \"number\" ? UnitConverter_1.UnitConverter.twipsToPixels(this.x) + \"px\" : this.x) + \" \" + (typeof this.y === \"number\" ? UnitConverter_1.UnitConverter.twipsToPixels(this.y) + \"px\" : this.y));\n          }\n        };\n\n        TextPrimitive.prototype.createTSpanElements = function (element) {\n          var _this = this;\n\n          Utils_1.RenderUtils.removeContent(element);\n          this.textSegmens.forEach(function (txt, index) {\n            var tSpan = _this.createTSpanElement(element);\n\n            if (_this.width) {\n              var words = txt.split(\" \");\n              var line = \"\",\n                  prevLine = \"\";\n\n              for (var i = 0; i < words.length; i++) {\n                line += (line.length ? \" \" : \"\") + words[i];\n                tSpan.textContent = line;\n                var lineWidth = Utils_1.RenderUtils.getSvgTextRectangle(element).width;\n\n                if (lineWidth >= _this.width && prevLine !== \"\") {\n                  tSpan.textContent = prevLine;\n                  prevLine = line = words[i];\n                  tSpan = _this.createTSpanElement(element);\n                  tSpan.textContent = line;\n                } else {\n                  prevLine = line;\n                }\n              }\n            } else {\n              tSpan.textContent = txt;\n            }\n          });\n          var firstTSpan = element.firstChild;\n          if (firstTSpan) this.prepareFirstTSpanElement(firstTSpan, element.childNodes.length);\n        };\n\n        TextPrimitive.prototype.createTSpanElement = function (parent) {\n          var tSpan = document.createElementNS(RenderManager_1.svgNS, \"tspan\");\n          parent.appendChild(tSpan);\n          this.prepareTSpanElement(tSpan);\n          return tSpan;\n        };\n\n        TextPrimitive.prototype.prepareTSpanElements = function (element) {\n          for (var i = 0; i < element.childNodes.length; i++) {\n            var tSpan = element.childNodes[i];\n            this.prepareTSpanElement(tSpan);\n          }\n\n          var firstTSpan = element.firstChild;\n          if (firstTSpan) this.prepareFirstTSpanElement(firstTSpan, element.childNodes.length);\n        };\n\n        TextPrimitive.prototype.prepareTSpanElement = function (tSpan) {\n          this.setUnitAttribute(tSpan, \"x\", this.x);\n          tSpan.setAttribute(\"dy\", \"1.05em\");\n        };\n\n        TextPrimitive.prototype.prepareFirstTSpanElement = function (tSpan, lineCount) {\n          var dy = -((lineCount - 1) / 2) + TextPrimitive.baselineCorrection;\n          tSpan.setAttribute(\"dy\", dy.toFixed(2) + \"em\");\n        };\n\n        TextPrimitive.prototype.applyElementStyleProperties = function (element) {\n          this.applyElementStylePropertiesCore(element, this.reverseTextAhchor);\n        };\n\n        TextPrimitive.baselineCorrection = 0.35;\n        return TextPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.TextPrimitive = TextPrimitive;\n      /***/\n    },\n    /* 65 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics37 = function extendStatics(d, b) {\n          _extendStatics37 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics37(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics37(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeParameters_1 = __webpack_require__(29);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      exports.ArrowVerticalTriangleHeightParameterName = \"th\";\n      exports.ArrowVerticalLineWidthParameterName = \"lw\";\n\n      var ArrowVerticalShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowVerticalShapeDescription, _super);\n\n        function ArrowVerticalShapeDescription(title) {\n          return _super.call(this, title, \"\", new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension * 0.375, ShapeDescription_1.ShapeDefaultDimension)) || this;\n        }\n\n        ArrowVerticalShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.addRange([new ShapeParameters_1.ShapeParameter(exports.ArrowVerticalTriangleHeightParameterName, Math.sqrt(Math.pow(this.defaultSize.width, 2) - Math.pow(this.defaultSize.width / 2, 2))), new ShapeParameters_1.ShapeParameter(exports.ArrowVerticalLineWidthParameterName, this.defaultSize.width / 3)]);\n        };\n\n        ArrowVerticalShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, exports.ArrowVerticalTriangleHeightParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.height, p.value));\n          });\n          this.changeParameterValue(parameters, exports.ArrowVerticalLineWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.width, p.value));\n          });\n        };\n\n        ArrowVerticalShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var delta = (shape.size.width - shape.parameters.get(exports.ArrowVerticalLineWidthParameterName).value) / 2;\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.East) point.x -= delta;else if (side === DiagramItem_1.ConnectionPointSide.West) point.x += delta;\n        };\n\n        return ArrowVerticalShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.ArrowVerticalShapeDescription = ArrowVerticalShapeDescription;\n      /***/\n    },\n    /* 66 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics38 = function extendStatics(d, b) {\n          _extendStatics38 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics38(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics38(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeParameters_1 = __webpack_require__(29);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      exports.ArrowVerticalTriangleWidthParameterName = \"tw\";\n      exports.ArrowVerticalLineHeightParameterName = \"lh\";\n\n      var ArrowHorizontalShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowHorizontalShapeDescription, _super);\n\n        function ArrowHorizontalShapeDescription(title) {\n          return _super.call(this, title, \"\", new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.375)) || this;\n        }\n\n        ArrowHorizontalShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.addRange([new ShapeParameters_1.ShapeParameter(exports.ArrowVerticalTriangleWidthParameterName, Math.sqrt(Math.pow(this.defaultSize.height, 2) - Math.pow(this.defaultSize.height / 2, 2))), new ShapeParameters_1.ShapeParameter(exports.ArrowVerticalLineHeightParameterName, this.defaultSize.height / 3)]);\n        };\n\n        ArrowHorizontalShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, exports.ArrowVerticalTriangleWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.width, p.value));\n          });\n          this.changeParameterValue(parameters, exports.ArrowVerticalLineHeightParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.height, p.value));\n          });\n        };\n\n        ArrowHorizontalShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var delta = (shape.size.height - shape.parameters.get(exports.ArrowVerticalLineHeightParameterName).value) / 2;\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.North) point.y += delta;else if (side === DiagramItem_1.ConnectionPointSide.South) point.y -= delta;\n        };\n\n        return ArrowHorizontalShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.ArrowHorizontalShapeDescription = ArrowHorizontalShapeDescription;\n      /***/\n    },\n    /* 67 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics39 = function extendStatics(d, b) {\n          _extendStatics39 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics39(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics39(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var EllipsePrimitive_1 = __webpack_require__(42);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var EllipseShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(EllipseShapeDescription, _super);\n\n        function EllipseShapeDescription(title, defaultText) {\n          if (title === void 0) {\n            title = \"Ellipse\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          return _super.call(this, title, defaultText, new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.75)) || this;\n        }\n\n        Object.defineProperty(EllipseShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Ellipse;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        EllipseShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var width = rect.width,\n              height = rect.height;\n          var _a = rect.center,\n              cx = _a.x,\n              cy = _a.y;\n          return [new EllipsePrimitive_1.EllipsePrimitive(cx, cy, width / 2, height / 2, shape.style)];\n        };\n\n        return EllipseShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.EllipseShapeDescription = EllipseShapeDescription;\n      /***/\n    },\n    /* 68 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics40 = function extendStatics(d, b) {\n          _extendStatics40 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics40(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics40(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var PolygonShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(PolygonShapeDescription, _super);\n\n        function PolygonShapeDescription(title, defaultText) {\n          var _this = _super.call(this, title, defaultText) || this;\n\n          _this.defaultSize.height = _this.calculateHeight(ShapeDescription_1.ShapeDefaultDimension);\n          return _this;\n        }\n\n        Object.defineProperty(PolygonShapeDescription.prototype, \"angle\", {\n          get: function get() {\n            return Math.PI * (this.angleCount - 2) / this.angleCount;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        return PolygonShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.PolygonShapeDescription = PolygonShapeDescription;\n      /***/\n    },\n    /* 69 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics41 = function extendStatics(d, b) {\n          _extendStatics41 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics41(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics41(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeWithImageDescription_1 = __webpack_require__(45);\n\n      var RoundedRectanglePrimitive_1 = __webpack_require__(189);\n\n      var __1 = __webpack_require__(8);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var GroupPrimitive_1 = __webpack_require__(28);\n\n      var ShapeImageIndicator_1 = __webpack_require__(99);\n\n      var CardBaseDescription =\n      /** @class */\n      function (_super) {\n        __extends(CardBaseDescription, _super);\n\n        function CardBaseDescription(title, defaultText, defaultSize) {\n          if (title === void 0) {\n            title = \"Card Base\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          if (defaultSize === void 0) {\n            defaultSize = new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension, 26 / 46 * ShapeDescription_1.ShapeDefaultDimension);\n          }\n\n          return _super.call(this, title, defaultText, defaultSize) || this;\n        }\n\n        CardBaseDescription.getTextMargins = function () {\n          return ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins();\n        };\n\n        CardBaseDescription.prototype.createShapePrimitives = function (shape, forToolbox) {\n          var _a = shape.rectangle,\n              left = _a.left,\n              top = _a.top,\n              width = _a.width,\n              height = _a.height;\n          return [new RoundedRectanglePrimitive_1.RoundedRectanglePrimitive(left, top, width, height, forToolbox ? 30 : 60, forToolbox ? 30 : 60, shape.style)];\n        };\n\n        CardBaseDescription.prototype.createImagePlaceholder = function (rect) {\n          return [new RoundedRectanglePrimitive_1.RoundedRectanglePrimitive(rect.left, rect.top, rect.width, rect.height, __1.UnitConverter.pixelsToTwips(2), __1.UnitConverter.pixelsToTwips(2), undefined, ShapeWithImageDescription_1.SHAPE_IMAGE_CLASSNAMES.IMAGE_PLACEHOLDER)];\n        };\n\n        CardBaseDescription.prototype.createEmptyImagePrimitive = function (rect) {\n          return ShapeImageIndicator_1.ShapeImageIndicator.createUserIconPrimitives(rect.left, rect.top, this.defaultIconSize, __1.UnitConverter.pixelsToTwips(1), ShapeWithImageDescription_1.SHAPE_IMAGE_CLASSNAMES.USER_PIC);\n        };\n\n        CardBaseDescription.prototype.createWarningPrimitive = function (rect) {\n          return ShapeImageIndicator_1.ShapeImageIndicator.createWarningIconPrimitives(rect.left + this.defaultIconSize / 2, rect.top + this.defaultIconSize / 2, this.defaultIconSize / 2, ShapeWithImageDescription_1.SHAPE_IMAGE_CLASSNAMES.WARNING_MARK);\n        };\n\n        CardBaseDescription.prototype.getTextRectangle = function (rect, parameters) {\n          var textRectangle = rect.clone();\n          var textBlockOffset = this.getTextBlockOffset(rect);\n          if (textBlockOffset.left > 0) textRectangle.position.x = textRectangle.left + textBlockOffset.left + CardBaseDescription.getTextMargins();\n          if (textBlockOffset.top > 0) textRectangle.position.y = textRectangle.top + textBlockOffset.top + CardBaseDescription.getTextMargins();\n          textRectangle.size.width = textRectangle.width - textBlockOffset.right - textBlockOffset.left - CardBaseDescription.getTextMargins() * 2;\n          textRectangle.size.height = textRectangle.height - textBlockOffset.bottom - textBlockOffset.top - CardBaseDescription.getTextMargins() * 2;\n          textRectangle.position.x += CardBaseDescription.getTextMargins();\n          textRectangle.position.y += CardBaseDescription.getTextMargins();\n          if (textBlockOffset.left > 0 || textBlockOffset.right > 0) textRectangle.size.width = Math.max(textRectangle.width - CardBaseDescription.getTextMargins(), 0);\n          if (textBlockOffset.top > 0 || textBlockOffset.bottom > 0) textRectangle.size.height = Math.max(textRectangle.height - CardBaseDescription.getTextMargins(), 0);\n          return textRectangle;\n        };\n\n        CardBaseDescription.prototype.createTextPrimitives = function (shape, forToolbox) {\n          if (forToolbox) return this.createGraphicalTextRepresentation(shape.rectangle);else return _super.prototype.createTextPrimitives.call(this, shape, forToolbox);\n        };\n\n        CardBaseDescription.prototype.createGraphicalTextRepresentation = function (rect) {\n          var textRect = Utils_1.Rectangle.create(0, 0, 0, 0);\n          var textBlockOffset = this.getTextBlockOffset(rect, true);\n\n          if (textBlockOffset.left > 0 || textBlockOffset.right > 0) {\n            var horizontalShift = textBlockOffset.left > 0 ? rect.width / 2 : 0;\n            textRect.position.x = rect.left + horizontalShift + 1.5 * ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins(true);\n            textRect.position.y = rect.top + 2.5 * ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins(true);\n            textRect.size.width = (textBlockOffset.left || textBlockOffset.right) - 2 * ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins(true);\n            textRect.size.height = rect.height - 4 * ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins(true);\n          } else {\n            var verticalShift = textBlockOffset.top > 0 ? rect.height / 2 : 0;\n            textRect.position.x = rect.left + rect.width / 2 - (rect.width / 2 + 1) / 2;\n            textRect.position.y = rect.top + verticalShift + 1.5 * ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins(true);\n            textRect.size.width = rect.width / 2 + 1;\n            textRect.size.height = (textBlockOffset.top || textBlockOffset.bottom) - 2 * ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins(true);\n          }\n\n          return this.createTextRepresentationPrimitives(textRect);\n        };\n\n        CardBaseDescription.prototype.createTextRepresentationPrimitives = function (rect) {\n          var lineHeight = __1.UnitConverter.pixelsToTwips(__1.UnitConverter.twipsToPixels(rect.height / 3));\n\n          return [new GroupPrimitive_1.GroupPrimitive([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.left, rect.top), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.left + rect.width, rect.top)]), new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.left, rect.top + lineHeight), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.left + rect.width, rect.top + lineHeight)]), new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.left, rect.top + lineHeight * 2), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.left + rect.width * 0.66, rect.top + lineHeight * 2)])], \"dxdi-shape-text\")];\n        };\n\n        return CardBaseDescription;\n      }(ShapeWithImageDescription_1.ShapeWithImageDescription);\n\n      exports.CardBaseDescription = CardBaseDescription;\n      /***/\n    },\n    /* 70 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HashSet =\n      /** @class */\n      function () {\n        function HashSet(list, getHashCode) {\n          if (list === void 0) {\n            list = [];\n          }\n\n          if (getHashCode === void 0) {\n            getHashCode = function getHashCode(item) {\n              return item.toString();\n            };\n          }\n\n          var _this = this;\n\n          this.items = [];\n          this.map = {};\n          this.getHashCode = getHashCode;\n          list.forEach(function (i) {\n            return _this.tryPush(i);\n          });\n        }\n\n        HashSet.prototype.tryPush = function (item) {\n          var code = this.getHashCode(item);\n\n          if (this.map[code] === undefined) {\n            this.map[code] = this.items.push(item) - 1;\n            return true;\n          }\n\n          return false;\n        };\n\n        HashSet.prototype.contains = function (item) {\n          return this.map[this.getHashCode(item)] !== undefined;\n        };\n\n        HashSet.prototype.forEach = function (callback) {\n          this.items.forEach(callback);\n        };\n\n        HashSet.prototype.filter = function (predicate) {\n          return this.items.filter(predicate);\n        };\n\n        HashSet.prototype.list = function () {\n          return this.items.slice(0);\n        };\n\n        HashSet.prototype.item = function (index) {\n          return this.items[index];\n        };\n\n        HashSet.prototype.first = function () {\n          return this.items[0];\n        };\n\n        HashSet.prototype.remove = function (item) {\n          var code = this.getHashCode(item);\n          var index = this.map[code];\n\n          if (typeof index === \"number\") {\n            delete this.map[code];\n            this.items.splice(index, 1);\n\n            for (var i = index; i < this.items.length; i++) {\n              this.map[this.getHashCode(this.items[i])]--;\n            }\n          } else throw \"Item not found\";\n        };\n\n        Object.defineProperty(HashSet.prototype, \"length\", {\n          get: function get() {\n            return this.items.length;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        return HashSet;\n      }();\n\n      exports.HashSet = HashSet;\n      /***/\n    },\n    /* 71 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ImportUtils =\n      /** @class */\n      function () {\n        function ImportUtils() {}\n\n        ImportUtils.parseJSON = function (json) {\n          if (!json || json === \"\") return {};\n\n          try {\n            return JSON.parse(json);\n          } catch (_a) {\n            return {};\n          }\n        };\n\n        ImportUtils.createDocument = function (xml) {\n          var parser = new DOMParser();\n          return parser.parseFromString(xml, \"application/xml\");\n        };\n\n        return ImportUtils;\n      }();\n\n      exports.ImportUtils = ImportUtils;\n      /***/\n    },\n    /* 72 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics42 = function extendStatics(d, b) {\n          _extendStatics42 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics42(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics42(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeStylePropertyCommandBase_1 = __webpack_require__(108);\n\n      var ChangeStyleTextHistoryItem_1 = __webpack_require__(36);\n\n      var Style_1 = __webpack_require__(27);\n\n      var ChangeStyleTextPropertyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStyleTextPropertyCommand, _super);\n\n        function ChangeStyleTextPropertyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeStyleTextPropertyCommand.prototype.getValue = function () {\n          return this.control.selection.inputPosition.getStyleTextPropertyValue(this.getStyleProperty());\n        };\n\n        ChangeStyleTextPropertyCommand.prototype.getStyleObj = function (item) {\n          return item.styleText;\n        };\n\n        ChangeStyleTextPropertyCommand.prototype.getDefaultStyleObj = function () {\n          return new Style_1.StyleText();\n        };\n\n        ChangeStyleTextPropertyCommand.prototype.createHistoryItem = function (item, styleProperty, styleValue) {\n          return new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(item.key, styleProperty, styleValue);\n        };\n\n        ChangeStyleTextPropertyCommand.prototype.updateInputPosition = function (value) {\n          this.control.selection.inputPosition.setStyleTextPropertyValue(this.getStyleProperty(), value);\n        };\n\n        return ChangeStyleTextPropertyCommand;\n      }(ChangeStylePropertyCommandBase_1.ChangeStylePropertyCommandBase);\n\n      exports.ChangeStyleTextPropertyCommand = ChangeStyleTextPropertyCommand;\n      /***/\n    },\n    /* 73 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics43 = function extendStatics(d, b) {\n          _extendStatics43 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics43(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics43(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var GraphLayout_1 = __webpack_require__(111);\n\n      var Tree_1 = __webpack_require__(216);\n\n      var NodeLayout_1 = __webpack_require__(56);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var BaseBuilder_1 = __webpack_require__(112);\n\n      var Structures_1 = __webpack_require__(31);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var LayoutSettings_1 = __webpack_require__(22);\n\n      var CycleRemover_1 = __webpack_require__(113);\n\n      var TreeLayoutBuilder =\n      /** @class */\n      function (_super) {\n        __extends(TreeLayoutBuilder, _super);\n\n        function TreeLayoutBuilder() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        TreeLayoutBuilder.prototype.build = function () {\n          var _this = this;\n\n          var layout = new GraphLayout_1.GraphLayout();\n          var offset = 0;\n          this.graph.getConnectedComponents().forEach(function (c) {\n            var acyclicGraphInfo = CycleRemover_1.CycleRemover.removeCycles(c);\n            var tree = Tree_1.Tree.createSpanningTree(acyclicGraphInfo.graph);\n            var removedEdges = Object.keys(acyclicGraphInfo.removedEdges).map(function (ek) {\n              return c.getEdge(ek);\n            });\n\n            var componentLayout = _this.processTree(tree, acyclicGraphInfo.reversedEdges, removedEdges);\n\n            acyclicGraphInfo.graph.edges.filter(function (e) {\n              return !(e.key in componentLayout.edgeToPosition);\n            }).concat(removedEdges).forEach(function (e) {\n              var beginIndex = _this.isVertical() ? DiagramItem_1.ConnectionPointSide.East : DiagramItem_1.ConnectionPointSide.South;\n              var endIndex = _this.isVertical() ? DiagramItem_1.ConnectionPointSide.West : DiagramItem_1.ConnectionPointSide.North;\n              layout.addEdge(new NodeLayout_1.EdgeLayout(e.key, beginIndex, endIndex));\n            });\n            layout.extend(_this.setComponentOffset(componentLayout, offset));\n            offset += _this.getComponentOffset(componentLayout);\n          });\n          return layout;\n        };\n\n        TreeLayoutBuilder.prototype.processTree = function (tree, reversedEdges, removedEdges) {\n          var layout = new GraphLayout_1.GraphLayout();\n          var rootLayout = new NodeLayout_1.NodeLayout(tree.root, new Utils_1.Point(tree.root.margin.left, tree.root.margin.top));\n          layout.addNode(rootLayout);\n          this.processChildren(rootLayout, tree, layout, 0, reversedEdges, removedEdges);\n          if (this.settings.alignment === LayoutSettings_1.Alignment.Center) this.processParents(layout, rootLayout, tree);\n          return layout;\n        };\n\n        TreeLayoutBuilder.prototype.processChildren = function (parent, tree, layout, nearbyPoint, reversedEdges, removedEdges) {\n          var _this = this;\n\n          var children = tree.getChildren(parent.info);\n          var edges = this.graph.getAdjacentEdges(parent.key, Structures_1.ConnectionMode.Outgoing);\n          var distantPoint = nearbyPoint;\n          var prevSiblingLayout;\n\n          var _loop_1 = function _loop_1(child, i) {\n            var nearbyMargin = this_1.isVertical() ? child.margin.left : child.margin.top;\n\n            if (prevSiblingLayout) {\n              var prevSiblingDistantPoint = this_1.getChangingCoordinateForLayer(prevSiblingLayout.position) + this_1.getSizeMeasurement(prevSiblingLayout.info.size);\n              var actualNearbyMargin = distantPoint - prevSiblingDistantPoint;\n              nearbyMargin = Math.max(0, nearbyMargin - actualNearbyMargin);\n              nearbyMargin += this_1.settings.columnSpacing;\n            }\n\n            var layerStartingPoint = this_1.isVertical() ? Math.max(parent.info.margin.bottom, child.margin.top) : Math.max(parent.info.margin.right, child.margin.left);\n            var nodePosition = this_1.isVertical() ? new Utils_1.Point(distantPoint + nearbyMargin, parent.position.y + parent.info.size.height + layerStartingPoint + this_1.settings.layerSpacing) : new Utils_1.Point(parent.position.x + parent.info.size.width + layerStartingPoint + this_1.settings.layerSpacing, distantPoint + nearbyMargin);\n            var childLayout = new NodeLayout_1.NodeLayout(child, nodePosition);\n            var currentDistantPoint = this_1.getChangingCoordinateForLayer(childLayout.position) + this_1.getSizeMeasurement(childLayout.info.size);\n            var nextLvlDistantPoint = this_1.processChildren(childLayout, tree, layout, distantPoint, reversedEdges, removedEdges);\n            distantPoint = Math.max(currentDistantPoint, nextLvlDistantPoint);\n            layout.addNode(childLayout);\n            edges.filter(function (e) {\n              return e.to === child.key;\n            }).forEach(function (e) {\n              var beginIndex = _this.isVertical() ? DiagramItem_1.ConnectionPointSide.South : DiagramItem_1.ConnectionPointSide.East;\n              var endIndex = _this.isVertical() ? DiagramItem_1.ConnectionPointSide.North : DiagramItem_1.ConnectionPointSide.West;\n              if (!reversedEdges[e.key]) layout.addEdge(new NodeLayout_1.EdgeLayout(e.key, beginIndex, endIndex));else layout.addEdge(new NodeLayout_1.EdgeLayout(e.key, endIndex, beginIndex));\n            });\n            prevSiblingLayout = childLayout;\n          };\n\n          var this_1 = this;\n\n          for (var child = void 0, i = 0; child = children[i]; i++) {\n            _loop_1(child, i);\n          }\n\n          return distantPoint + this.settings.subTreeColumnSpacing;\n        };\n\n        TreeLayoutBuilder.prototype.processParents = function (layout, parent, tree, parentNextSibling) {\n          var children = tree.getChildren(parent.info);\n\n          for (var child = void 0, i = children.length - 1; child = children[i]; i--) {\n            this.processParents(layout, layout.nodeToLayout[child.key], tree, children[i + 1]);\n          }\n\n          if (children.length) {\n            var nearbyPoint = this.getChangingCoordinateForLayer(layout.nodeToLayout[children[0].key].position);\n            var distantPoint = this.getRectangleDistantEdge(layout.nodeToLayout[children[children.length - 1].key].rectangle);\n            var position = nearbyPoint + (distantPoint - nearbyPoint) / 2 - this.getSizeMeasurement(parent.info.size) / 2;\n            position = Math.max(this.getChangingCoordinateForLayer(parent.position), this.correctByMargin(position, parent, parentNextSibling && layout.nodeToLayout[parentNextSibling.key]));\n            if (this.isVertical()) parent.position.x = position;else parent.position.y = position;\n          }\n        };\n\n        TreeLayoutBuilder.prototype.getChangingCoordinateForLayer = function (point) {\n          return this.isVertical() ? point.x : point.y;\n        };\n\n        TreeLayoutBuilder.prototype.getRectangleDistantEdge = function (rectangle) {\n          return this.isVertical() ? rectangle.right : rectangle.bottom;\n        };\n\n        TreeLayoutBuilder.prototype.getSizeMeasurement = function (size) {\n          return this.isVertical() ? size.width : size.height;\n        };\n\n        TreeLayoutBuilder.prototype.correctByMargin = function (position, element, distant) {\n          if (distant) {\n            var distantPoint = this.isVertical() ? Math.max(distant.info.margin.left, element.info.margin.right) : Math.max(distant.info.margin.top, element.info.margin.bottom);\n            position = Math.min(position, this.getChangingCoordinateForLayer(distant.position) - distantPoint - this.getSizeMeasurement(element.info.size));\n          }\n\n          return position;\n        };\n\n        TreeLayoutBuilder.prototype.isVertical = function () {\n          return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical;\n        };\n\n        return TreeLayoutBuilder;\n      }(BaseBuilder_1.LayoutBuilder);\n\n      exports.TreeLayoutBuilder = TreeLayoutBuilder;\n      /***/\n    },\n    /* 74 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics44 = function extendStatics(d, b) {\n          _extendStatics44 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics44(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics44(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var CanvasItemsManager_1 = __webpack_require__(82);\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var CanvasExportManager_1 = __webpack_require__(224);\n\n      var ExportImportCommandBase_1 = __webpack_require__(47);\n\n      var Exporter_1 = __webpack_require__(57);\n\n      var ExportImageCommand =\n      /** @class */\n      function (_super) {\n        __extends(ExportImageCommand, _super);\n\n        function ExportImageCommand(control) {\n          var _this = _super.call(this, control) || this;\n\n          _this.exporter = new Exporter_1.Exporter();\n          return _this;\n        }\n\n        ExportImageCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          try {\n            var exportManager = this.getExportManager();\n            var exportFunc = this.getExportFunc();\n            exportFunc(this.control.model.size.clone(), this.control.model.pageColor, exportManager, function (url) {\n              parameter(url, _this.getExtension());\n\n              _this.tryDispose();\n            });\n          } catch (e) {\n            this.tryDispose();\n            throw e;\n          }\n\n          return true;\n        };\n\n        ExportImageCommand.prototype.getExportManager = function () {\n          var itemsManager = this.control.render && this.control.render.items || this.createItemsManager();\n          return this.exportManager || (this.exportManager = new CanvasExportManager_1.CanvasExportManager(itemsManager.itemsContainer));\n        };\n\n        ExportImageCommand.prototype.createItemsManager = function () {\n          this.svgElement = RenderManager_1.RenderManager.createSvgElement(document.body, true);\n          var canvasManager = new CanvasItemsManager_1.CanvasItemsManager(this.svgElement, 1);\n          this.control.modelManipulator.onModelChanged.add(canvasManager);\n          this.control.modelManipulator.onLoad();\n          return canvasManager;\n        };\n\n        ExportImageCommand.prototype.tryDispose = function () {\n          if (this.svgElement) {\n            document.body.removeChild(this.svgElement);\n            delete this.svgElement;\n            this.exportManager = undefined;\n          }\n        };\n\n        return ExportImageCommand;\n      }(ExportImportCommandBase_1.ExportImportCommandBase);\n\n      exports.ExportImageCommand = ExportImageCommand;\n      /***/\n    },\n    /* 75 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics45 = function extendStatics(d, b) {\n          _extendStatics45 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics45(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics45(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ClipboardCommand =\n      /** @class */\n      function (_super) {\n        __extends(ClipboardCommand, _super);\n\n        function ClipboardCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ClipboardCommand.prototype.setClipboardData = function (data) {\n          if (this.control.render) this.control.render.input.setClipboardData(data);\n          ClipboardCommand.clipboardData = data;\n        };\n\n        ClipboardCommand.prototype.getClipboardData = function (callback) {\n          if (this.control.render && this.isPasteSupportedByBrowser()) this.control.render.input.getClipboardData(callback);else callback(ClipboardCommand.clipboardData);\n        };\n\n        ClipboardCommand.prototype.isPasteSupportedByBrowser = function () {\n          return this.control.render && this.control.render.input.isPasteSupportedByBrowser();\n        };\n\n        return ClipboardCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ClipboardCommand = ClipboardCommand;\n      /***/\n    },\n    /* 76 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics46 = function extendStatics(d, b) {\n          _extendStatics46 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics46(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics46(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangeZindexHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZindexHistoryItem, _super);\n\n        function ChangeZindexHistoryItem(item, zIndex) {\n          var _this = _super.call(this) || this;\n\n          _this.itemKey = item.key;\n          _this.zIndex = zIndex;\n          return _this;\n        }\n\n        ChangeZindexHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldZIndex = item.zIndex;\n          manipulator.changeZIndex(item, this.zIndex);\n        };\n\n        ChangeZindexHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeZIndex(item, this.oldZIndex);\n        };\n\n        return ChangeZindexHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeZindexHistoryItem = ChangeZindexHistoryItem;\n      /***/\n    },\n    /* 77 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics47 = function extendStatics(d, b) {\n          _extendStatics47 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics47(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics47(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeShapeImageHistoryItem_1 = __webpack_require__(117);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var EditShapeImageCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(EditShapeImageCommandBase, _super);\n\n        function EditShapeImageCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        EditShapeImageCommandBase.prototype.isEnabled = function () {\n          var selectedShape = this.getSelectedShape();\n          return _super.prototype.isEnabled.call(this) && selectedShape && !selectedShape.locked && selectedShape.enableImage && selectedShape.allowEditImage;\n        };\n\n        EditShapeImageCommandBase.prototype.getValue = function () {\n          var selectedShape = this.getSelectedShape();\n          var imageUrl = selectedShape ? selectedShape.image.exportUrl : undefined;\n          return imageUrl;\n        };\n\n        EditShapeImageCommandBase.prototype.getSelectedShape = function () {\n          var selectedShapes = this.control.selection.getSelectedShapes(true);\n          return selectedShapes.length === 1 ? selectedShapes[0] : undefined;\n        };\n\n        EditShapeImageCommandBase.prototype.executeCore = function (state, parameter) {\n          this.control.history.beginTransaction();\n          var selectedUnlockedShapes = this.control.selection.getSelectedShapes(false);\n          this.control.history.addAndRedo(new ChangeShapeImageHistoryItem_1.ChangeShapeImageHistoryItem(selectedUnlockedShapes[0], parameter));\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        return EditShapeImageCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.EditShapeImageCommandBase = EditShapeImageCommandBase;\n      /***/\n    },\n    /* 78 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics48 = function extendStatics(d, b) {\n          _extendStatics48 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics48(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics48(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var MouseHandlerMoveShapeStateBase_1 = __webpack_require__(121);\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var MouseHandlerMoveClonedShapeState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveClonedShapeState, _super);\n\n        function MouseHandlerMoveClonedShapeState(handler, history, model, selection, visualizerManager, moveStartPoint) {\n          var _this = _super.call(this, handler, history, model, selection, visualizerManager) || this;\n\n          _this.moveStartPoint = moveStartPoint;\n          return _this;\n        }\n\n        MouseHandlerMoveClonedShapeState.prototype.onMouseDown = function (evt) {\n          var dx = this.moveStartPoint ? evt.modelPoint.x - this.moveStartPoint.x : 0;\n          var dy = this.moveStartPoint ? evt.modelPoint.y - this.moveStartPoint.y : 0;\n          ModelUtils_1.ModelUtils.cloneSelectionToOffset(this.history, this.model, this.selection, dx, dy);\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerMoveClonedShapeState.isMoveClonedShapeEvent = function (evt) {\n          return evt.modifiers & KeyCode_1.ModifierKey.Ctrl && evt.modifiers & KeyCode_1.ModifierKey.Shift;\n        };\n\n        return MouseHandlerMoveClonedShapeState;\n      }(MouseHandlerMoveShapeStateBase_1.MouseHandlerMoveShapeStateBase);\n\n      exports.MouseHandlerMoveClonedShapeState = MouseHandlerMoveClonedShapeState;\n      /***/\n    },\n    /* 79 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      var COLOR_PROPERTIES = {\n        \"stroke\": true,\n        \"fill\": true\n      };\n\n      function isColorProperty(propName) {\n        return COLOR_PROPERTIES[propName];\n      }\n\n      exports.isColorProperty = isColorProperty;\n      /***/\n    },\n    /* 80 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics49 = function extendStatics(d, b) {\n          _extendStatics49 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics49(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics49(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var LinePrimitive =\n      /** @class */\n      function (_super) {\n        __extends(LinePrimitive, _super);\n\n        function LinePrimitive(x1, y1, x2, y2, style, className, clipPathId, onApplyProperties) {\n          var _this = _super.call(this, style, className, clipPathId, onApplyProperties) || this;\n\n          _this.x1 = x1;\n          _this.y1 = y1;\n          _this.x2 = x2;\n          _this.y2 = y2;\n          return _this;\n        }\n\n        LinePrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"line\");\n        };\n\n        LinePrimitive.prototype.applyElementProperties = function (element) {\n          this.setUnitAttribute(element, \"x1\", this.x1);\n          this.setUnitAttribute(element, \"y1\", this.y1);\n          this.setUnitAttribute(element, \"x2\", this.x2);\n          this.setUnitAttribute(element, \"y2\", this.y2);\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        return LinePrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.LinePrimitive = LinePrimitive;\n      /***/\n    },\n    /* 81 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Base_1 = __webpack_require__(17);\n\n      var Data =\n      /** @class */\n      function () {\n        function Data() {}\n\n        Data.ArrayInsert = function (array, element, position) {\n          if (0 <= position && position < array.length) {\n            for (var i = array.length; i > position; i--) {\n              array[i] = array[i - 1];\n            }\n\n            array[position] = element;\n          } else array.push(element);\n        };\n\n        Data.ArrayRemove = function (array, element) {\n          var index = Data.ArrayIndexOf(array, element);\n          if (index > -1) Data.ArrayRemoveAt(array, index);\n        };\n\n        Data.ArrayRemoveAt = function (array, index) {\n          if (index >= 0 && index < array.length) {\n            for (var i = index; i < array.length - 1; i++) {\n              array[i] = array[i + 1];\n            }\n\n            array.pop();\n          }\n        };\n\n        Data.ArrayClear = function (array) {\n          while (array.length > 0) {\n            array.pop();\n          }\n        };\n\n        Data.ArrayIndexOf = function (array, element, comparer) {\n          if (!comparer) {\n            for (var i = 0; i < array.length; i++) {\n              if (array[i] == element) return i;\n            }\n          } else {\n            for (var i = 0; i < array.length; i++) {\n              if (comparer(array[i], element)) return i;\n            }\n          }\n\n          return -1;\n        };\n\n        Data.ArrayContains = function (array, element) {\n          return Data.ArrayIndexOf(array, element) >= 0;\n        };\n\n        Data.ArrayEqual = function (array1, array2) {\n          var count1 = array1.length;\n          var count2 = array2.length;\n          if (count1 != count2) return false;\n\n          for (var i = 0; i < count1; i++) {\n            if (array1[i] != array2[i]) return false;\n          }\n\n          return true;\n        };\n\n        Data.ArraySame = function (array1, array2) {\n          if (array1.length !== array2.length) return false;\n          return array1.every(function (elem) {\n            return Data.ArrayContains(array2, elem);\n          });\n        };\n\n        Data.ArrayGetIntegerEdgeValues = function (array) {\n          var arrayToSort = Data.CollectionToArray(array);\n          Data.ArrayIntegerAscendingSort(arrayToSort);\n          return {\n            start: arrayToSort[0],\n            end: arrayToSort[arrayToSort.length - 1]\n          };\n        };\n\n        Data.ArrayIntegerAscendingSort = function (array) {\n          Data.ArrayIntegerSort(array, false);\n        };\n\n        Data.ArrayIntegerSort = function (array, desc) {\n          array.sort(function (i1, i2) {\n            var res = 0;\n            if (i1 > i2) res = 1;else if (i1 < i2) res = -1;\n            if (desc) res *= -1;\n            return res;\n          });\n        };\n\n        Data.CollectionsUnionToArray = function (firstCollection, secondCollection) {\n          var result = [];\n          var firstCollectionLength = firstCollection.length;\n          var secondCollectionLength = secondCollection.length;\n\n          for (var i = 0; i < firstCollectionLength + secondCollectionLength; i++) {\n            if (i < firstCollectionLength) result.push(firstCollection[i]);else result.push(secondCollection[i - firstCollectionLength]);\n          }\n\n          return result;\n        };\n\n        Data.CollectionToArray = function (collection) {\n          var array = [];\n\n          for (var i = 0; i < collection.length; i++) {\n            array.push(collection[i]);\n          }\n\n          return array;\n        };\n\n        Data.CreateHashTableFromArray = function (array) {\n          var hash = [];\n\n          for (var i = 0; i < array.length; i++) {\n            hash[array[i]] = 1;\n          }\n\n          return hash;\n        };\n\n        Data.CreateIndexHashTableFromArray = function (array) {\n          var hash = [];\n\n          for (var i = 0; i < array.length; i++) {\n            hash[array[i]] = i;\n          }\n\n          return hash;\n        };\n\n        Data.ArrayToHash = function (array, getKeyFunc, getValueFunc) {\n          if (!(array instanceof Array)) return {};\n          return array.reduce(function (map, element, index) {\n            var key = getKeyFunc(element, index);\n            var value = getValueFunc(element, index);\n            map[key] = value;\n            return map;\n          }, {});\n        };\n\n        Data.Sum = function (array, getValueFunc) {\n          if (!(array instanceof Array)) return 0;\n          return array.reduce(function (prevValue, item) {\n            var value = getValueFunc ? getValueFunc(item) : item;\n            if (!Base_1.IsNumber(value)) value = 0;\n            return prevValue + value;\n          }, 0);\n        };\n\n        Data.Min = function (array, getValueFunc) {\n          return Data.CalculateArrayMinMax(array, getValueFunc, false);\n        };\n\n        ;\n\n        Data.Max = function (array, getValueFunc) {\n          return Data.CalculateArrayMinMax(array, getValueFunc, true);\n        };\n\n        ;\n\n        Data.NearestLeftBinarySearchComparer = function (array, index, value) {\n          var arrayElement = array[index];\n          var leftPoint = arrayElement < value;\n          var lastLeftPoint = leftPoint && index == array.length - 1;\n          var nearestLeftPoint = lastLeftPoint || leftPoint && array[index + 1] >= value;\n          if (nearestLeftPoint) return 0;else return arrayElement < value ? -1 : 1;\n        };\n\n        Data.ArrayBinarySearch = function (array, value, binarySearchComparer, startIndex, length) {\n          if (!binarySearchComparer) binarySearchComparer = Data.defaultBinarySearchComparer;\n          if (!Base_1.IsExists(startIndex)) startIndex = 0;\n          if (!Base_1.IsExists(length)) length = array.length - startIndex;\n          var endIndex = startIndex + length - 1;\n\n          while (startIndex <= endIndex) {\n            var middle = startIndex + (endIndex - startIndex >> 1);\n            var compareResult = binarySearchComparer(array, middle, value);\n            if (compareResult == 0) return middle;\n            if (compareResult < 0) startIndex = middle + 1;else endIndex = middle - 1;\n          }\n\n          return -(startIndex + 1);\n        };\n\n        Data.ArrayFlatten = function (arrayOfArrays) {\n          return [].concat.apply([], arrayOfArrays);\n        };\n\n        Data.GetDistinctArray = function (array) {\n          var resultArray = [];\n\n          for (var i = 0; i < array.length; i++) {\n            var currentEntry = array[i];\n\n            if (Data.ArrayIndexOf(resultArray, currentEntry) == -1) {\n              resultArray.push(currentEntry);\n            }\n          }\n\n          return resultArray;\n        };\n\n        Data.ForEach = function (arr, callback) {\n          if (Array.prototype.forEach) {\n            Array.prototype.forEach.call(arr, callback);\n          } else {\n            for (var i = 0, len = arr.length; i < len; i++) {\n              callback(arr[i], i, arr);\n            }\n          }\n        };\n\n        Data.MergeHashTables = function (target, object) {\n          if (!object || typeof object == \"string\") return target;\n          if (!target) target = {};\n\n          for (var key in object) {\n            if (key && !(key in target)) target[key] = object[key];\n          }\n\n          return target;\n        };\n\n        Data.Range = function (count, start) {\n          count = parseInt(count) || 0;\n          start = parseInt(start) || 0;\n          if (count < 0) count = 0;\n          if (start < 0) start = 0;\n          return Array.apply(null, Array(count)).map(function (_val, i) {\n            return start + i;\n          });\n        };\n\n        Data.CalculateArrayMinMax = function (array, getValueFunc, isMax) {\n          if (!(array instanceof Array)) return 0;\n          var startValue = isMax ? Number.NEGATIVE_INFINITY : Number.POSITIVE_INFINITY;\n          return array.reduce(function (prevValue, item) {\n            var value = getValueFunc ? getValueFunc(item) : item;\n            if (!Base_1.IsNumber(value)) value = startValue;\n            var func = isMax ? Math.max : Math.min;\n            return func(value, prevValue);\n          }, startValue);\n        };\n\n        Data.defaultBinarySearchComparer = function (array, index, value) {\n          var arrayElement = array[index];\n          if (arrayElement == value) return 0;else return arrayElement < value ? -1 : 1;\n        };\n\n        return Data;\n      }();\n\n      exports.Data = Data;\n      /***/\n    },\n    /* 82 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics50 = function extendStatics(d, b) {\n          _extendStatics50 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics50(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics50(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ModelChange_1 = __webpack_require__(83);\n\n      var Event_1 = __webpack_require__(10);\n\n      var GroupPrimitive_1 = __webpack_require__(28);\n\n      var Utils_1 = __webpack_require__(15);\n\n      var CanvasManagerBase_1 = __webpack_require__(33);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var CanvasItemsManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasItemsManager, _super);\n\n        function CanvasItemsManager(viewElement, zoomLevel) {\n          var _this = _super.call(this, zoomLevel) || this;\n\n          _this.itemSelectorGroupContainers = {};\n          _this.itemSelectorElements = {};\n          _this.itemGroupContainers = {};\n          _this.itemElements = {};\n          _this.itemChildElements = {};\n          _this.pendingChanges = {};\n          _this.updatesLock = 0;\n\n          _this.initializeContainerElements(viewElement);\n\n          return _this;\n        }\n\n        CanvasItemsManager.prototype.initializeContainerElements = function (view) {\n          this.itemSelectorsContainer = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null), view);\n          this.itemsContainer = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null), view);\n        };\n\n        CanvasItemsManager.prototype.clear = function () {\n          Utils_1.RenderUtils.removeContent(this.itemSelectorsContainer);\n          Utils_1.RenderUtils.removeContent(this.itemsContainer);\n          this.itemSelectorGroupContainers = {};\n          this.itemSelectorElements = {};\n          this.itemGroupContainers = {};\n          this.itemElements = {};\n          this.itemChildElements = {};\n        };\n\n        CanvasItemsManager.prototype.beginUpdate = function () {\n          this.updatesLock++;\n        };\n\n        CanvasItemsManager.prototype.endUpdate = function () {\n          this.updatesLock--;\n          if (this.updatesLock === 0) this.applyPendingChanges();\n        };\n\n        CanvasItemsManager.prototype.getPendingChanges = function () {\n          var _this = this;\n\n          return Object.keys(this.pendingChanges).map(function (key) {\n            return _this.pendingChanges[key];\n          });\n        };\n\n        CanvasItemsManager.prototype.applyPendingChanges = function () {\n          var changes = this.getPendingChanges();\n\n          while (changes.length) {\n            var changesCount = changes.length;\n            this.applyPendingChangesCore(changes);\n            changes = this.getPendingChanges();\n            if (changesCount === changes.length) break;\n          }\n\n          this.pendingChanges = {};\n        };\n\n        CanvasItemsManager.prototype.applyPendingChangesCore = function (changes) {\n          var _this = this;\n\n          changes.forEach(function (change) {\n            if (_this.applyChange(change)) delete _this.pendingChanges[change.item.key];\n          });\n        };\n\n        CanvasItemsManager.prototype.applyChange = function (change) {\n          var item = change.item;\n          var itemParent = this.getItemParent(item.zIndex, item.container && item.container.key);\n          if (!itemParent) return false;\n          if (item instanceof Shape_1.Shape) this.applyShapeChange(item, change.type);else if (item instanceof Connector_1.Connector) this.applyConnectorChange(item, change.type);\n          return true;\n        };\n\n        CanvasItemsManager.prototype.postponeChanges = function (changes) {\n          var _this = this;\n\n          changes.forEach(function (change) {\n            if (!_this.pendingChanges[change.key]) _this.pendingChanges[change.key] = change;else {\n              if (change.type === ModelChange_1.ItemChangeType.Create || change.type === ModelChange_1.ItemChangeType.Remove) _this.pendingChanges[change.key] = change;else if (change.type === ModelChange_1.ItemChangeType.UpdateStructure) {\n                if (_this.pendingChanges[change.key].type === ModelChange_1.ItemChangeType.Update) _this.pendingChanges[change.key] = change;\n              }\n            }\n          });\n        }; // Notifications\n\n\n        CanvasItemsManager.prototype.notifyModelChanged = function (changes) {\n          var _this = this;\n\n          if (this.updatesLock === 0) {\n            changes.forEach(function (change) {\n              _this.applyChange(change);\n            });\n          } else this.postponeChanges(changes);\n        };\n\n        CanvasItemsManager.prototype.notifyPageColorChanged = function (color) {};\n\n        CanvasItemsManager.prototype.notifyPageSizeChanged = function (pageSize, pageLandscape) {};\n\n        CanvasItemsManager.prototype.notifyDragStart = function (itemKeys) {\n          var _this = this;\n\n          itemKeys.forEach(function (itemKey) {\n            if (_this.itemElements[itemKey]) _this.itemElements[itemKey].style.pointerEvents = \"none\";\n            if (_this.itemChildElements[itemKey]) _this.itemChildElements[itemKey].style.pointerEvents = \"none\";\n            if (_this.itemSelectorElements[itemKey]) _this.itemSelectorElements[itemKey].style.display = \"none\";\n          });\n        };\n\n        CanvasItemsManager.prototype.notifyDragEnd = function (itemKeys) {\n          var _this = this;\n\n          itemKeys.forEach(function (itemKey) {\n            if (_this.itemElements[itemKey]) _this.itemElements[itemKey].style.pointerEvents = \"\";\n            if (_this.itemChildElements[itemKey]) _this.itemChildElements[itemKey].style.pointerEvents = \"\";\n            if (_this.itemSelectorElements[itemKey]) _this.itemSelectorElements[itemKey].style.display = \"\";\n          });\n        };\n\n        CanvasItemsManager.prototype.notifyDragScrollStart = function () {};\n\n        CanvasItemsManager.prototype.notifyDragScrollEnd = function () {};\n\n        CanvasItemsManager.prototype.notifyTextInputStart = function (item, text, position, size) {\n          var element = this.itemElements[item.key];\n          var className = element.getAttribute(\"class\");\n          element.setAttribute(\"class\", className + \" text-input\");\n        };\n\n        CanvasItemsManager.prototype.notifyTextInputEnd = function (item) {\n          var element = this.itemElements[item.key];\n          var className = element.getAttribute(\"class\");\n          element.setAttribute(\"class\", className.replace(\" text-input\", \"\"));\n        };\n\n        CanvasItemsManager.prototype.notifyActualZoomChanged = function (actualZoom) {\n          var scale = \"scale(\" + actualZoom + \")\";\n          this.itemsContainer.setAttribute('transform', scale);\n          this.itemSelectorsContainer.setAttribute('transform', scale);\n          this.actualZoom = actualZoom;\n        };\n\n        CanvasItemsManager.prototype.notifyViewAdjusted = function (canvasOffset) {}; // Drawing\n\n\n        CanvasItemsManager.prototype.applyShapeChange = function (shape, type) {\n          var key = shape.key;\n          var containerKey = shape.container && shape.container.key;\n          var itemSelectorParent = this.getItemSelectorGroupContainer(shape.zIndex, containerKey);\n          var itemParent = this.getItemGroupContainer(shape.zIndex, containerKey);\n          var className = \"shape\";\n          if (shape.enableChildren) className += \" container\";\n\n          switch (type) {\n            case ModelChange_1.ItemChangeType.Create:\n              this.itemSelectorElements[key] = this.createItemElements(key, shape.getSelectorPrimitives(), itemSelectorParent, className, Event_1.MouseEventElementType.Shape);\n              this.itemElements[key] = this.createItemElements(key, shape.getPrimitives(), itemParent, className, Event_1.MouseEventElementType.Shape);\n\n              if (shape.enableChildren) {\n                this.itemChildElements[key] = this.createItemElements(key, [], itemParent, \"container-children\", Event_1.MouseEventElementType.Undefined);\n                this.changeItemChildrenVisibility(this.itemChildElements[key], shape.expanded);\n              }\n\n              break;\n\n            case ModelChange_1.ItemChangeType.Remove:\n              this.removeItemElements(this.itemSelectorElements[key]);\n              delete this.itemSelectorElements[key];\n              this.removeItemElements(this.itemElements[key]);\n              delete this.itemElements[key];\n\n              if (this.itemChildElements[key]) {\n                this.removeItemElements(this.itemChildElements[key]);\n                delete this.itemChildElements[key];\n                delete this.itemGroupContainers[key];\n                delete this.itemSelectorGroupContainers[key];\n              }\n\n              break;\n\n            case ModelChange_1.ItemChangeType.UpdateStructure:\n            case ModelChange_1.ItemChangeType.Update:\n              this.changeItemElements(shape.getSelectorPrimitives(), this.itemSelectorElements[key], type === ModelChange_1.ItemChangeType.UpdateStructure);\n              this.changeItemElements(shape.getPrimitives(), this.itemElements[key], type === ModelChange_1.ItemChangeType.UpdateStructure);\n\n              if (this.itemChildElements[key]) {\n                this.changeItemChildrenVisibility(this.itemChildElements[key], shape.expanded);\n              }\n\n              if (itemSelectorParent !== (this.itemSelectorElements[key] && this.itemSelectorElements[key].parentNode)) this.moveItemElements(itemSelectorParent, this.itemSelectorElements[key]);\n              if (itemParent !== (this.itemElements[key] && this.itemElements[key].parentNode)) this.moveItemElements(itemParent, this.itemElements[key]);\n              if (this.itemChildElements[key] && itemParent !== this.itemChildElements[key].parentNode) this.moveItemElements(itemParent, this.itemChildElements[key]);\n              break;\n          }\n        };\n\n        CanvasItemsManager.prototype.applyConnectorChange = function (connector, type) {\n          var key = connector.key;\n          var containerKey = connector.container && connector.container.key;\n          var itemSelectorParent = this.getItemSelectorGroupContainer(connector.zIndex, containerKey);\n          var itemParent = this.getItemGroupContainer(connector.zIndex, containerKey);\n          var className = \"connector\";\n\n          switch (type) {\n            case ModelChange_1.ItemChangeType.Create:\n              this.itemSelectorElements[key] = this.createItemElements(key, connector.getSelectorPrimitives(), itemSelectorParent, className, Event_1.MouseEventElementType.Connector);\n              this.itemElements[key] = this.createItemElements(key, connector.getPrimitives(), itemParent, className, Event_1.MouseEventElementType.Connector);\n              break;\n\n            case ModelChange_1.ItemChangeType.Remove:\n              this.removeItemElements(this.itemSelectorElements[key]);\n              delete this.itemSelectorElements[key];\n              this.removeItemElements(this.itemElements[key]);\n              delete this.itemElements[key];\n              break;\n\n            case ModelChange_1.ItemChangeType.UpdateStructure:\n            case ModelChange_1.ItemChangeType.Update:\n              this.changeItemElements(connector.getSelectorPrimitives(), this.itemSelectorElements[key], type === ModelChange_1.ItemChangeType.UpdateStructure);\n              this.changeItemElements(connector.getPrimitives(), this.itemElements[key], type === ModelChange_1.ItemChangeType.UpdateStructure);\n              if (itemSelectorParent !== (this.itemSelectorElements[key] && this.itemSelectorElements[key].parentNode)) this.moveItemElements(itemSelectorParent, this.itemSelectorElements[key]);\n              if (itemParent !== (this.itemElements[key] && this.itemElements[key].parentNode)) this.moveItemElements(itemParent, this.itemElements[key]);\n              break;\n          }\n        };\n\n        CanvasItemsManager.prototype.createItemElements = function (key, primitives, parent, className, type) {\n          var gEl = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], className), parent);\n          Utils_1.RenderUtils.setElementEventData(gEl, type, key);\n          this.createAndChangePrimitivesElements(primitives, gEl);\n          return gEl;\n        };\n\n        CanvasItemsManager.prototype.changeItemElements = function (primitives, element, updateStructure) {\n          if (updateStructure === void 0) {\n            updateStructure = false;\n          }\n\n          if (updateStructure) {\n            Utils_1.RenderUtils.removeContent(element);\n            this.createAndChangePrimitivesElements(primitives, element);\n          } else this.changePrimitivesElements(primitives, element);\n        };\n\n        CanvasItemsManager.prototype.removeItemElements = function (element) {\n          if (element && element.parentNode) element.parentNode.removeChild(element);\n        };\n\n        CanvasItemsManager.prototype.moveItemElements = function (parent, element, sibling) {\n          if (element && parent) {\n            if (sibling) parent.insertBefore(element, sibling);else parent.appendChild(element);\n          }\n        };\n\n        CanvasItemsManager.prototype.changeItemChildrenVisibility = function (element, expanded) {\n          element.style.display = expanded ? \"\" : \"none\";\n        };\n\n        CanvasItemsManager.prototype.getItemGroupContainerKey = function (zIndex, parentContainerKey) {\n          return parentContainerKey !== undefined ? zIndex + \"_\" + parentContainerKey : zIndex.toString();\n        };\n\n        CanvasItemsManager.prototype.getItemGroupContainer = function (zIndex, parentContainerKey) {\n          var parent = parentContainerKey !== undefined ? this.getItemParent(zIndex, parentContainerKey) : this.itemsContainer;\n          var key = parentContainerKey || \"Main\";\n\n          if (this.itemGroupContainers[key] === undefined || this.itemGroupContainers[key][zIndex] === undefined) {\n            if (this.itemGroupContainers[key] === undefined) this.itemGroupContainers[key] = [];\n            this.itemGroupContainers[key][zIndex] = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null, zIndex), parent, this.itemGroupContainers[key][zIndex + 1]);\n          }\n\n          return this.itemGroupContainers[key][zIndex];\n        };\n\n        CanvasItemsManager.prototype.getItemSelectorGroupContainer = function (zIndex, parentContainerKey) {\n          var parent = parentContainerKey !== undefined ? this.getItemSelectorParent(zIndex, parentContainerKey) : this.itemSelectorsContainer;\n          var key = parentContainerKey || \"Main\";\n\n          if (this.itemSelectorGroupContainers[key] === undefined || this.itemSelectorGroupContainers[key][zIndex] === undefined) {\n            if (this.itemSelectorGroupContainers[key] === undefined) this.itemSelectorGroupContainers[key] = [];\n            this.itemSelectorGroupContainers[key][zIndex] = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null, zIndex), parent, this.itemSelectorGroupContainers[key][zIndex + 1]);\n          }\n\n          return this.itemSelectorGroupContainers[key][zIndex];\n        };\n\n        CanvasItemsManager.prototype.getItemParent = function (zIndex, parentContainerKey) {\n          return parentContainerKey !== undefined ? this.itemChildElements[parentContainerKey] : this.getItemGroupContainer(zIndex);\n        };\n\n        CanvasItemsManager.prototype.getItemSelectorParent = function (zIndex, parentContainerKey) {\n          return parentContainerKey !== undefined ? this.itemChildElements[parentContainerKey] : this.getItemSelectorGroupContainer(zIndex);\n        };\n\n        return CanvasItemsManager;\n      }(CanvasManagerBase_1.CanvasManagerBase);\n\n      exports.CanvasItemsManager = CanvasItemsManager;\n      /***/\n    },\n    /* 83 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      var ItemChangeType;\n\n      (function (ItemChangeType) {\n        ItemChangeType[ItemChangeType[\"Create\"] = 0] = \"Create\";\n        ItemChangeType[ItemChangeType[\"Update\"] = 1] = \"Update\";\n        ItemChangeType[ItemChangeType[\"UpdateStructure\"] = 2] = \"UpdateStructure\";\n        ItemChangeType[ItemChangeType[\"Remove\"] = 3] = \"Remove\";\n      })(ItemChangeType = exports.ItemChangeType || (exports.ItemChangeType = {}));\n\n      var ItemChange =\n      /** @class */\n      function () {\n        function ItemChange(item, type) {\n          this.item = item;\n          this.type = type;\n        }\n\n        Object.defineProperty(ItemChange.prototype, \"key\", {\n          get: function get() {\n            return this.item.key;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        return ItemChange;\n      }();\n\n      exports.ItemChange = ItemChange;\n      /***/\n    },\n    /* 84 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics51 = function extendStatics(d, b) {\n          _extendStatics51 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics51(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics51(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var FilterPrimitive_1 = __webpack_require__(85);\n\n      var Model_1 = __webpack_require__(19);\n\n      var __1 = __webpack_require__(8);\n\n      var TextFilterPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(TextFilterPrimitive, _super);\n\n        function TextFilterPrimitive(id, x, y, width, height) {\n          if (x === void 0) {\n            x = \"-0.05\";\n          }\n\n          if (y === void 0) {\n            y = \"-0.05\";\n          }\n\n          if (width === void 0) {\n            width = \"1.1\";\n          }\n\n          if (height === void 0) {\n            height = \"1.1\";\n          }\n\n          var _this = _super.call(this, id, x, y, width, height) || this;\n\n          _this.id = id;\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          return _this;\n        }\n\n        TextFilterPrimitive.prototype.createChildElements = function (parent) {\n          var feFlood = document.createElementNS(RenderManager_1.svgNS, \"feFlood\");\n          parent.appendChild(feFlood);\n          var feComposite = document.createElementNS(RenderManager_1.svgNS, \"feComposite\");\n          feComposite.setAttribute(\"in\", \"SourceGraphic\");\n          feComposite.setAttribute(\"operator\", \"atop\");\n          parent.appendChild(feComposite);\n        };\n\n        return TextFilterPrimitive;\n      }(FilterPrimitive_1.FilterPrimitive);\n\n      exports.TextFilterPrimitive = TextFilterPrimitive;\n\n      var TextFloodFilterPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(TextFloodFilterPrimitive, _super);\n\n        function TextFloodFilterPrimitive(id, floodColor, x, y, width, height) {\n          if (x === void 0) {\n            x = \"-0.05\";\n          }\n\n          if (y === void 0) {\n            y = \"-0.05\";\n          }\n\n          if (width === void 0) {\n            width = \"1.1\";\n          }\n\n          if (height === void 0) {\n            height = \"1.1\";\n          }\n\n          var _this = _super.call(this, id, x, y, width, height) || this;\n\n          _this.id = id;\n          _this.floodColor = floodColor;\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          return _this;\n        }\n\n        TextFloodFilterPrimitive.prototype.applyChildrenProperties = function (element) {\n          for (var child = void 0, i = 0; child = element.childNodes[i]; i++) {\n            if (child.nodeName && child.nodeName.toUpperCase() === \"FEFLOOD\") {\n              this.prepareFEFloodNode(child);\n              break;\n            }\n          }\n        };\n\n        TextFloodFilterPrimitive.prototype.prepareFEFloodNode = function (node) {\n          var colorHash = __1.ColorHelper.colorToHash(this.floodColor);\n\n          node.setAttribute(\"flood-color\", colorHash);\n          node.setAttribute(\"class\", \"text-filter-flood\");\n          if (this.floodColor !== Model_1.DiagramModel.defaultPageColor) node.style.setProperty(\"flood-color\", colorHash);\n        };\n\n        return TextFloodFilterPrimitive;\n      }(TextFilterPrimitive);\n\n      exports.TextFloodFilterPrimitive = TextFloodFilterPrimitive;\n      /***/\n    },\n    /* 85 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics52 = function extendStatics(d, b) {\n          _extendStatics52 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics52(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics52(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var FilterPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(FilterPrimitive, _super);\n\n        function FilterPrimitive(id, x, y, width, height) {\n          var _this = _super.call(this) || this;\n\n          _this.id = id;\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          return _this;\n        }\n\n        FilterPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"filter\");\n        };\n\n        FilterPrimitive.prototype.applyElementProperties = function (element) {\n          if (this.id) element.setAttribute(\"id\", this.id);\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          this.setUnitAttribute(element, \"width\", this.width);\n          this.setUnitAttribute(element, \"height\", this.height);\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        return FilterPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.FilterPrimitive = FilterPrimitive;\n      /***/\n    },\n    /* 86 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Base64Utils =\n      /** @class */\n      function () {\n        function Base64Utils() {}\n\n        Base64Utils.normalize = function (base64, mimeType) {\n          if (mimeType === void 0) {\n            mimeType = \"image/png\";\n          }\n\n          if (!Base64Utils.checkPrependDataUrl(base64)) base64 = Base64Utils.prepend(base64, mimeType);\n          return base64;\n        };\n\n        Base64Utils.prepend = function (base64, mimeType) {\n          if (mimeType === void 0) {\n            mimeType = \"image/png\";\n          }\n\n          return \"data:\" + mimeType + \";base64,\" + base64;\n        };\n\n        Base64Utils.checkPrependDataUrl = function (base64) {\n          return Base64Utils.dataUrl.test(base64);\n        };\n\n        Base64Utils.dataUrl = /data:(.*)(;(.*))?(;base64)?,/;\n        return Base64Utils;\n      }();\n\n      exports.Base64Utils = Base64Utils;\n      /***/\n    },\n    /* 87 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics53 = function extendStatics(d, b) {\n          _extendStatics53 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics53(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics53(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var CanvasManagerBase_1 = __webpack_require__(33);\n\n      var GroupPrimitive_1 = __webpack_require__(28);\n\n      var Utils_1 = __webpack_require__(15);\n\n      var Event_1 = __webpack_require__(10);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var Utils_2 = __webpack_require__(0);\n\n      var ExtensionLinesVisualizer_1 = __webpack_require__(88);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var ConnectorProperties_1 = __webpack_require__(24);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var TextPrimitive_1 = __webpack_require__(64);\n\n      var MaskPrimitive_1 = __webpack_require__(141);\n\n      var TextFilterPrimitive_1 = __webpack_require__(84);\n\n      var EllipsePrimitive_1 = __webpack_require__(42);\n\n      var LinePrimitive_1 = __webpack_require__(80);\n\n      var __1 = __webpack_require__(8);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var MULTIPLE_SELECTION_KEY = \"-1\";\n      exports.SELECTION_ELEMENT_CLASSNAMES = {\n        SELECTION_RECTANGLE: \"selection-rect\",\n        CONNECTION_POINT: \"connection-point\",\n        ACTIVE: \"active\",\n        CONTAINER_TARGET: \"container-target\",\n        CONNECTION_TARGET: \"connection-target\",\n        EXTENSION_LINE: \"extension-line\",\n        CONNECTION_MARK: \"connection-mark\",\n        SELECTION_MARK: \"selection-mark\",\n        LOCKED_SELECTION_MARK: \"locked-selection-mark\",\n        ITEMS_SELECTION_RECT: \"items-selection-rect\",\n        CONNECTOR_MULTI_SELECTION: \"connector-multi-selection\",\n        CONNECTOR_SELECTION: \"connector-selection\",\n        CONNECTOR_POINT_MARK: \"connector-point-mark\",\n        CONNECTOR_SELECTION_MASK: \"connector-selection-mask\",\n        CONNECTOR_SIDE_MARK: \"connector-side-mark\",\n        ITEM_SELECTION_RECT: \"item-selection-rect\",\n        ITEM_MULTI_SELECTION: \"item-multi-selection-rect\"\n      };\n\n      var CanvasSelectionManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasSelectionManager, _super);\n\n        function CanvasSelectionManager(parent, zoomLevel, readOnly) {\n          var _this = _super.call(this, zoomLevel) || this;\n\n          _this.readOnly = readOnly;\n          _this.connectionPointElements = [];\n          _this.extensionLineElements = [];\n          _this.selectionMap = {};\n\n          _this.initializeContainerElements(parent);\n\n          return _this;\n        }\n\n        CanvasSelectionManager.prototype.initializeContainerElements = function (parent) {\n          this.itemSelectionContainer = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null), parent);\n          this.visualizersContainer = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null), parent);\n          this.selectionMarksContainer = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null), parent);\n        };\n\n        CanvasSelectionManager.prototype.clear = function () {\n          Utils_1.RenderUtils.removeContent(this.itemSelectionContainer);\n          Utils_1.RenderUtils.removeContent(this.selectionMarksContainer);\n          Utils_1.RenderUtils.removeContent(this.visualizersContainer);\n          this.selectionRectElement = undefined;\n          this.resizeInfoElement = undefined;\n          this.connectionPointElements = [];\n          this.connectionTargetElement = undefined;\n          this.containerTargetElement = undefined;\n          this.extensionLineElements = [];\n          this.selectionMap = {};\n        };\n\n        CanvasSelectionManager.prototype.showSelectionRect = function (rect) {\n          var primitive = new RectaglePrimitive_1.RectanglePrimitive(rect.left, rect.top, rect.size.width, rect.size.height, null, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_RECTANGLE);\n          var rectEl = this.getSelectionRectElement(primitive);\n          this.changePrimitiveElement(primitive, rectEl);\n        };\n\n        CanvasSelectionManager.prototype.hideSelectionRect = function () {\n          if (this.selectionRectElement !== undefined) this.selectionRectElement.style.display = \"none\";\n        };\n\n        CanvasSelectionManager.prototype.getSelectionRectElement = function (primitive) {\n          if (this.selectionRectElement !== undefined) this.selectionRectElement.style.display = \"\";else this.selectionRectElement = this.createPrimitiveElement(primitive, this.visualizersContainer);\n          return this.selectionRectElement;\n        };\n\n        CanvasSelectionManager.prototype.showResizeInfo = function (point, text) {\n          var rectPrimitive = new RectaglePrimitive_1.RectanglePrimitive(point.x, point.y, 0, 0);\n          var primitive = new GroupPrimitive_1.GroupPrimitive([rectPrimitive, new TextPrimitive_1.TextPrimitive(point.x, point.y, text)], \"resize-info\");\n          var groupEl = this.getResizeInfoElement(primitive);\n          this.changePrimitiveElement(primitive, groupEl);\n          var textRect = Utils_1.RenderUtils.getSvgTextRectangle(groupEl.childNodes[1], CanvasSelectionManager.resizeInfoLineWidth).inflate(CanvasSelectionManager.resizeInfoTextOffset, CanvasSelectionManager.resizeInfoTextOffset);\n          rectPrimitive.x = textRect.left;\n          rectPrimitive.y = textRect.top;\n          rectPrimitive.width = textRect.width;\n          rectPrimitive.height = textRect.height;\n          this.changePrimitiveElement(primitive, groupEl);\n        };\n\n        CanvasSelectionManager.prototype.hideResizeInfo = function () {\n          if (this.resizeInfoElement !== undefined) this.resizeInfoElement.style.display = \"none\";\n        };\n\n        CanvasSelectionManager.prototype.getResizeInfoElement = function (primitive) {\n          if (this.resizeInfoElement !== undefined) this.resizeInfoElement.style.display = \"\";else this.resizeInfoElement = this.createPrimitiveElement(primitive, this.visualizersContainer);\n          return this.resizeInfoElement;\n        };\n\n        CanvasSelectionManager.prototype.showConnectionPoint = function (index, point, side, key, value, active) {\n          this.showConnectionPointCore(index * 2, point.x, point.y, CanvasSelectionManager.connectionPointLargeSize, CanvasSelectionManager.connectionPointLargeSize, Event_1.MouseEventElementType.ShapeConnectionPoint, key, value, exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_POINT + \" selector\");\n          this.showConnectionPointCore(index * 2 + 1, point.x, point.y, CanvasSelectionManager.connectionPointSmallSize, CanvasSelectionManager.connectionPointSmallSize, Event_1.MouseEventElementType.ShapeConnectionPoint, key, value, exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_POINT + (active ? \" \" + exports.SELECTION_ELEMENT_CLASSNAMES.ACTIVE : \"\"));\n        };\n\n        CanvasSelectionManager.prototype.showConnectionPointCore = function (index, cx, cy, rx, ry, type, key, value, className) {\n          var primitive = new EllipsePrimitive_1.EllipsePrimitive(cx, cy, rx, ry, null, className);\n          var ellEl = this.getConnectionPointElement(primitive, index);\n          this.changePrimitiveElement(primitive, ellEl);\n          Utils_1.RenderUtils.setElementEventData(ellEl, type, key, value);\n        };\n\n        CanvasSelectionManager.prototype.hideConnectionPoints = function () {\n          for (var i = 0; i < this.connectionPointElements.length; i++) {\n            this.connectionPointElements[i].style.display = \"none\";\n          }\n        };\n\n        CanvasSelectionManager.prototype.getConnectionPointElement = function (primitive, index) {\n          var ellEl = this.connectionPointElements[index];\n          if (ellEl !== undefined) ellEl.style.display = \"\";else {\n            ellEl = this.createPrimitiveElement(primitive, this.visualizersContainer);\n            this.connectionPointElements[index] = ellEl;\n          }\n          return ellEl;\n        };\n\n        CanvasSelectionManager.prototype.showContainerTarget = function (index, targetRect) {\n          var primitive = new RectaglePrimitive_1.RectanglePrimitive(targetRect.left, targetRect.top, targetRect.width, targetRect.height, null, exports.SELECTION_ELEMENT_CLASSNAMES.CONTAINER_TARGET);\n          var rectEl = this.getContainerTargetElement(primitive, index);\n          this.changePrimitiveElement(primitive, rectEl);\n        };\n\n        CanvasSelectionManager.prototype.hideContainerTarget = function () {\n          if (this.containerTargetElement) this.containerTargetElement.style.display = \"none\";\n        };\n\n        CanvasSelectionManager.prototype.getContainerTargetElement = function (primitive, index) {\n          if (this.containerTargetElement !== undefined) this.containerTargetElement.style.display = \"\";else {\n            this.containerTargetElement = this.createPrimitiveElement(primitive, this.itemSelectionContainer);\n          }\n          return this.containerTargetElement;\n        };\n\n        CanvasSelectionManager.prototype.showConnectionTarget = function (index, targetRect) {\n          var primitive = new RectaglePrimitive_1.RectanglePrimitive(targetRect.left, targetRect.top, targetRect.width, targetRect.height, null, exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_TARGET);\n          var rectEl = this.getConnectionTargetElement(primitive, index);\n          this.changePrimitiveElement(primitive, rectEl);\n        };\n\n        CanvasSelectionManager.prototype.hideConnectionTarget = function () {\n          if (this.connectionTargetElement) this.connectionTargetElement.style.display = \"none\";\n        };\n\n        CanvasSelectionManager.prototype.getConnectionTargetElement = function (primitive, index) {\n          if (this.connectionTargetElement !== undefined) this.connectionTargetElement.style.display = \"\";else {\n            this.connectionTargetElement = this.createPrimitiveElement(primitive, this.itemSelectionContainer);\n          }\n          return this.connectionTargetElement;\n        };\n\n        CanvasSelectionManager.prototype.showExtensionLine = function (index, type, startPoint, endPoint, text) {\n          var className = exports.SELECTION_ELEMENT_CLASSNAMES.EXTENSION_LINE;\n          if (type === ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterAfter || type === ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterBefore || type === ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterAbove || type === ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterBelow) className += \" center\";\n          if (type === ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterToPageCenter || type === ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterToPageCenter || type === ExtensionLinesVisualizer_1.ExtensionLineType.LeftToPageCenter || type === ExtensionLinesVisualizer_1.ExtensionLineType.RightToPageCenter || type === ExtensionLinesVisualizer_1.ExtensionLineType.TopToPageCenter || type === ExtensionLinesVisualizer_1.ExtensionLineType.BottomToPageCenter) className += \" page\";\n          var x1_1 = 0,\n              y1_1 = 0,\n              x1_2 = 0,\n              y1_2 = 0,\n              x2_1 = 0,\n              y2_1 = 0,\n              x2_2 = 0,\n              y2_2 = 0;\n\n          if (startPoint.y === endPoint.y) {\n            x1_1 = startPoint.x;\n            y1_1 = startPoint.y - CanvasSelectionManager.extensionLineEndingSize;\n            x1_2 = startPoint.x;\n            y1_2 = startPoint.y + CanvasSelectionManager.extensionLineEndingSize;\n            x2_1 = endPoint.x;\n            y2_1 = startPoint.y - CanvasSelectionManager.extensionLineEndingSize;\n            x2_2 = endPoint.x;\n            y2_2 = startPoint.y + CanvasSelectionManager.extensionLineEndingSize;\n          } else if (startPoint.x === endPoint.x) {\n            x1_1 = startPoint.x - CanvasSelectionManager.extensionLineEndingSize;\n            y1_1 = startPoint.y;\n            x1_2 = startPoint.x + CanvasSelectionManager.extensionLineEndingSize;\n            y1_2 = startPoint.y;\n            x2_1 = startPoint.x - CanvasSelectionManager.extensionLineEndingSize;\n            y2_1 = endPoint.y;\n            x2_2 = startPoint.x + CanvasSelectionManager.extensionLineEndingSize;\n            y2_2 = endPoint.y;\n          }\n\n          var linePrimitives = [new LinePrimitive_1.LinePrimitive(startPoint.x, startPoint.y, endPoint.x, endPoint.y), new LinePrimitive_1.LinePrimitive(x1_1, y1_1, x1_2, y1_2), new LinePrimitive_1.LinePrimitive(x2_1, y2_1, x2_2, y2_2), new TextPrimitive_1.TextPrimitive((endPoint.x + startPoint.x) / 2, (endPoint.y + startPoint.y) / 2, text, undefined, null, false, null, CanvasManagerBase_1.PAGE_BG_TEXTFLOOR_FILTER_ID, false, function (el) {\n            el.style.display = text && text !== \"\" ? \"inherit\" : \"none\";\n          })];\n          var primitive = new GroupPrimitive_1.GroupPrimitive(linePrimitives, className);\n          var ellEl = this.getExtensionLineElement(primitive, index);\n          this.changePrimitiveElement(primitive, ellEl);\n        };\n\n        CanvasSelectionManager.prototype.hideExtensionLines = function () {\n          for (var i = 0; i < this.extensionLineElements.length; i++) {\n            if (this.extensionLineElements[i]) this.extensionLineElements[i].style.display = \"none\";\n          }\n        };\n\n        CanvasSelectionManager.prototype.getExtensionLineElement = function (primitive, index) {\n          var ellEl = this.extensionLineElements[index];\n          if (ellEl !== undefined) ellEl.style.display = \"\";else {\n            ellEl = this.createPrimitiveElement(primitive, this.visualizersContainer);\n            this.extensionLineElements[index] = ellEl;\n          }\n          return ellEl;\n        };\n\n        CanvasSelectionManager.prototype.getOrCreateShapeSelection = function (shape, usedItems) {\n          var element = this.selectionMap[shape.key];\n\n          if (!element) {\n            element = new ShapeSelectionElement(this.itemSelectionContainer, this.selectionMarksContainer, this.actualZoom, this.readOnly, shape.key, shape.isLocked, shape.rectangle, shape.allowResizeHorizontally, shape.allowResizeVertically, shape.description.getParameterPoints(shape));\n            this.selectionMap[shape.key] = element;\n          }\n\n          usedItems && (usedItems[shape.key] = true);\n          return element;\n        };\n\n        CanvasSelectionManager.prototype.getOrCreateConnectorSelection = function (connector, usedItems) {\n          var element = this.selectionMap[connector.key];\n\n          if (!element) {\n            element = new ConnectorSelectionElement(this.itemSelectionContainer, this.selectionMarksContainer, this.actualZoom, this.readOnly, connector.key, connector.isLocked, connector.rectangle, connector.getRenderPoints(), connector.styleText, connector.enableText, connector.texts.map(function (t) {\n              return {\n                text: connector.getText(t.position),\n                point: connector.getTextPoint(t.position)\n              };\n            }), connector.points, connector.properties.lineOption);\n            this.selectionMap[connector.key] = element;\n          }\n\n          usedItems && (usedItems[connector.key] = true);\n          return element;\n        };\n\n        CanvasSelectionManager.prototype.getOrCreateMultipleSelection = function (usedItems) {\n          var element = this.selectionMap[MULTIPLE_SELECTION_KEY];\n\n          if (!element) {\n            element = new MultipleSelectionElement(this.itemSelectionContainer, this.selectionMarksContainer, this.actualZoom, this.readOnly);\n            this.selectionMap[MULTIPLE_SELECTION_KEY] = element;\n          }\n\n          usedItems[MULTIPLE_SELECTION_KEY] = true;\n          return element;\n        };\n\n        CanvasSelectionManager.prototype.getMultipleSelection = function () {\n          return this.selectionMap[MULTIPLE_SELECTION_KEY];\n        };\n\n        CanvasSelectionManager.prototype.updateShapeSelection = function (shape, multipleSelection) {\n          if (shape.key in this.selectionMap) {\n            var rect = shape.rectangle;\n            this.getOrCreateShapeSelection(shape).onModelChanged(shape.isLocked, rect, shape.allowResizeHorizontally, shape.allowResizeVertically, shape.description.getParameterPoints(shape));\n            multipleSelection && multipleSelection.onModelItemChanged(shape.key, rect);\n          }\n        };\n\n        CanvasSelectionManager.prototype.updateConnectorSelection = function (connector, multipleSelection) {\n          if (connector.key in this.selectionMap) {\n            var rect = connector.rectangle;\n            this.getOrCreateConnectorSelection(connector).onModelChanged(connector.isLocked, rect, connector.getRenderPoints(), connector.styleText, connector.enableText, connector.texts.map(function (t) {\n              return {\n                text: connector.getText(t.position),\n                point: connector.getTextPoint(t.position)\n              };\n            }), connector.points, connector.properties.lineOption);\n            multipleSelection && multipleSelection.onModelItemChanged(connector.key, rect);\n          }\n        };\n\n        CanvasSelectionManager.prototype.hideOutdatedSelection = function (updated) {\n          var _this = this;\n\n          Object.keys(this.selectionMap).filter(function (k) {\n            return !updated[k];\n          }).forEach(function (k) {\n            _this.selectionMap[k].destroy();\n\n            delete _this.selectionMap[k];\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifySelectionChanged = function (selection) {\n          var _this = this;\n\n          var items = selection.getSelectedItems(true);\n          var changedItems = {};\n          var isMultipleSelection = items.length > 1;\n          var shapes = selection.getSelectedShapes(true);\n          var connectors = selection.getSelectedConnectors(true);\n          shapes.forEach(function (shape) {\n            return _this.getOrCreateShapeSelection(shape, changedItems).onSelectionChanged(isMultipleSelection);\n          });\n          connectors.forEach(function (connector) {\n            return _this.getOrCreateConnectorSelection(connector, changedItems).onSelectionChanged(isMultipleSelection);\n          });\n          if (isMultipleSelection) this.getOrCreateMultipleSelection(changedItems).onSelectionChanged(!!shapes.length, items);\n          this.hideOutdatedSelection(changedItems);\n        };\n\n        CanvasSelectionManager.prototype.notifyModelChanged = function (changes) {\n          var _this = this;\n\n          var multipleSelection = this.getMultipleSelection();\n          changes.forEach(function (change) {\n            if (change.item instanceof Shape_1.Shape) _this.updateShapeSelection(change.item, multipleSelection);else if (change.item instanceof Connector_1.Connector) _this.updateConnectorSelection(change.item, multipleSelection);\n          });\n          multipleSelection && multipleSelection.onModelChanged();\n        };\n\n        CanvasSelectionManager.prototype.notifyPageColorChanged = function (color) {};\n\n        CanvasSelectionManager.prototype.notifyPageSizeChanged = function (pageSize, pageLandscape) {};\n\n        CanvasSelectionManager.prototype.notifyActualZoomChanged = function (actualZoom) {\n          var _this = this;\n\n          Object.keys(this.selectionMap).forEach(function (k) {\n            return _this.selectionMap[k].notifyZoomChanged(actualZoom);\n          });\n          this.actualZoom = actualZoom;\n        };\n\n        CanvasSelectionManager.prototype.notifyViewAdjusted = function (canvasOffset) {};\n\n        CanvasSelectionManager.prototype.notifyReadOnlyChanged = function (readOnly) {\n          var _this = this;\n\n          this.readOnly = readOnly;\n          Object.keys(this.selectionMap).forEach(function (k) {\n            return _this.selectionMap[k].notifyReadOnlyChanged(readOnly);\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifySelectionRectShow = function (rect) {\n          this.showSelectionRect(rect.multiply(this.actualZoom));\n        };\n\n        CanvasSelectionManager.prototype.notifySelectionRectHide = function () {\n          this.hideSelectionRect();\n        };\n\n        CanvasSelectionManager.prototype.notifyResizeInfoShow = function (point, text) {\n          this.showResizeInfo(point.multiply(this.actualZoom), text);\n        };\n\n        CanvasSelectionManager.prototype.notifyResizeInfoHide = function () {\n          this.hideResizeInfo();\n        };\n\n        CanvasSelectionManager.prototype.notifyConnectionPointsShow = function (key, points, activePointIndex, showOutside) {\n          var _this = this;\n\n          this.hideConnectionPoints();\n          points.forEach(function (p, index) {\n            var point = p.point.multiply(_this.actualZoom);\n\n            if (showOutside) {\n              switch (p.side) {\n                case DiagramItem_1.ConnectionPointSide.North:\n                  point.y -= CanvasSelectionManager.connectionPointShift;\n                  break;\n\n                case DiagramItem_1.ConnectionPointSide.South:\n                  point.y += CanvasSelectionManager.connectionPointShift;\n                  break;\n\n                case DiagramItem_1.ConnectionPointSide.East:\n                  point.x += CanvasSelectionManager.connectionPointShift;\n                  break;\n\n                case DiagramItem_1.ConnectionPointSide.West:\n                  point.x -= CanvasSelectionManager.connectionPointShift;\n                  break;\n              }\n            }\n\n            _this.showConnectionPoint(index, point, p.side, key, index, index === activePointIndex);\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifyConnectionPointsHide = function () {\n          this.hideConnectionPoints();\n        };\n\n        CanvasSelectionManager.prototype.notifyConnectionTargetShow = function (key, targetRect) {\n          var rect = CanvasSelectionManager.correctShapeSelectionRect(targetRect.multiply(this.actualZoom), CanvasSelectionManager.connectionTargetBorderWidth, this.actualZoom);\n          this.showConnectionTarget(0, rect);\n        };\n\n        CanvasSelectionManager.prototype.notifyConnectionTargetHide = function () {\n          this.hideConnectionTarget();\n        };\n\n        CanvasSelectionManager.prototype.notifyContainerTargetShow = function (key, targetRect) {\n          var rect = CanvasSelectionManager.correctShapeSelectionRect(targetRect.multiply(this.actualZoom), CanvasSelectionManager.connectionTargetBorderWidth, this.actualZoom);\n          this.showContainerTarget(0, rect);\n        };\n\n        CanvasSelectionManager.prototype.notifyContainerTargetHide = function () {\n          this.hideContainerTarget();\n        };\n\n        CanvasSelectionManager.prototype.notifyExtensionLinesShow = function (lines) {\n          var _this = this;\n\n          this.hideExtensionLines();\n          lines.forEach(function (line, index) {\n            _this.showExtensionLine(index, line.type, line.segment.startPoint.multiply(_this.actualZoom), line.segment.endPoint.multiply(_this.actualZoom), line.text);\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifyExtensionLinesHide = function () {\n          this.hideExtensionLines();\n        };\n\n        CanvasSelectionManager.prototype.notifyDragStart = function (itemKeys) {\n          this.selectionMarksContainer.style.display = \"none\";\n        };\n\n        CanvasSelectionManager.prototype.notifyDragEnd = function (itemKeys) {\n          this.selectionMarksContainer.style.display = \"\";\n        };\n\n        CanvasSelectionManager.prototype.notifyDragScrollStart = function () {};\n\n        CanvasSelectionManager.prototype.notifyDragScrollEnd = function () {};\n\n        CanvasSelectionManager.prototype.notifyTextInputStart = function (item, text, position, size) {\n          this.visualizersContainer.style.display = \"none\";\n        };\n\n        CanvasSelectionManager.prototype.notifyTextInputEnd = function (item) {\n          this.visualizersContainer.style.display = \"\";\n        };\n\n        CanvasSelectionManager.correctShapeSelectionRect = function (rect, lineWidth, zoomLevel) {\n          var corr = Math.ceil(Shape_1.Shape.lineWidth / 2 * zoomLevel);\n          rect = rect.inflate(corr, corr);\n          var lwCorr = Math.floor(lineWidth / 2);\n          rect.position.x -= lwCorr;\n          rect.position.y -= lwCorr;\n          rect.size.width += lineWidth;\n          rect.size.height += lineWidth;\n          return rect;\n        };\n\n        CanvasSelectionManager.selectionMarkSize = UnitConverter_1.UnitConverter.pixelsToTwips(10);\n        CanvasSelectionManager.lockedSelectionMarkSize = UnitConverter_1.UnitConverter.pixelsToTwips(8);\n        CanvasSelectionManager.selectionRectLineWidth = UnitConverter_1.UnitConverter.pixelsToTwips(1);\n        CanvasSelectionManager.multiSelectionRectLineWidth = UnitConverter_1.UnitConverter.pixelsToTwips(1);\n        CanvasSelectionManager.connectionPointSmallSize = UnitConverter_1.UnitConverter.pixelsToTwips(5);\n        CanvasSelectionManager.connectionPointLargeSize = UnitConverter_1.UnitConverter.pixelsToTwips(12);\n        CanvasSelectionManager.connectionPointShift = UnitConverter_1.UnitConverter.pixelsToTwips(16);\n        CanvasSelectionManager.connectionTargetBorderWidth = UnitConverter_1.UnitConverter.pixelsToTwips(2);\n        CanvasSelectionManager.connectorSelectionLineWidth = UnitConverter_1.UnitConverter.pixelsToTwips(1);\n        CanvasSelectionManager.connectorSelectionWidth = UnitConverter_1.UnitConverter.pixelsToTwips(6);\n        CanvasSelectionManager.geomertyMarkSize = UnitConverter_1.UnitConverter.pixelsToTwips(8);\n        CanvasSelectionManager.connectorPointMarkSize = UnitConverter_1.UnitConverter.pixelsToTwips(6);\n        CanvasSelectionManager.connectorSideMarkSize = UnitConverter_1.UnitConverter.pixelsToTwips(6);\n        CanvasSelectionManager.extensionLineWidth = UnitConverter_1.UnitConverter.pixelsToTwips(1);\n        CanvasSelectionManager.extensionLineOffset = UnitConverter_1.UnitConverter.pixelsToTwips(1);\n        CanvasSelectionManager.extensionLineEndingSize = UnitConverter_1.UnitConverter.pixelsToTwips(6);\n        CanvasSelectionManager.resizeInfoOffset = UnitConverter_1.UnitConverter.pixelsToTwips(16);\n        CanvasSelectionManager.resizeInfoTextOffset = UnitConverter_1.UnitConverter.pixelsToTwips(2);\n        CanvasSelectionManager.resizeInfoLineWidth = UnitConverter_1.UnitConverter.pixelsToTwips(1);\n        return CanvasSelectionManager;\n      }(CanvasManagerBase_1.CanvasManagerBase);\n\n      exports.CanvasSelectionManager = CanvasSelectionManager;\n\n      var CanvasElement =\n      /** @class */\n      function () {\n        function CanvasElement(rectsContainer, marksContainer, key, zoomLevel, readOnly) {\n          this.rectsContainer = rectsContainer;\n          this.marksContainer = marksContainer;\n          this.key = key;\n          this.zoomLevel = zoomLevel;\n          this.readOnly = readOnly;\n          this.elements = {};\n          this.updatedElements = {};\n        }\n\n        CanvasElement.prototype.notifyZoomChanged = function (zoom) {\n          if (this.zoomLevel !== zoom) {\n            this.zoomLevel = zoom;\n            this.redraw();\n          }\n        };\n\n        CanvasElement.prototype.notifyReadOnlyChanged = function (readOnly) {\n          this.readOnly = readOnly;\n          this.redraw();\n        };\n\n        CanvasElement.prototype.destroy = function () {\n          var _this = this;\n\n          Object.keys(this.elements).forEach(function (key) {\n            _this.elements[key].parentNode.removeChild(_this.elements[key]);\n\n            delete _this.elements[key];\n          });\n        };\n\n        CanvasElement.prototype.redraw = function () {\n          var _this = this;\n\n          this.updatedElements = {};\n          this.redrawCore();\n          Object.keys(this.elements).filter(function (key) {\n            return !_this.updatedElements[key];\n          }).forEach(function (key) {\n            _this.elements[key].parentNode.removeChild(_this.elements[key]);\n\n            delete _this.elements[key];\n          });\n          this.updatedElements = {};\n        };\n\n        CanvasElement.prototype.drawSelectionMarks = function (rect, allowResizeHorizontally, allowResizeVertically) {\n          if (this.readOnly) return;\n          var hasEWMarks = allowResizeHorizontally && rect.height > CanvasSelectionManager.selectionMarkSize * 3;\n          var hasNSMarks = allowResizeVertically && rect.width > CanvasSelectionManager.selectionMarkSize * 3;\n          var hasCornerMarks = allowResizeHorizontally || allowResizeVertically;\n          if (hasCornerMarks) this.drawSelectionMark(0, new Utils_2.Point(rect.left, rect.top), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_NW, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasNSMarks && !__1.Browser.TouchUI) this.drawSelectionMark(1, new Utils_2.Point(rect.left + rect.size.width / 2, rect.top), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_N, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasCornerMarks) this.drawSelectionMark(2, new Utils_2.Point(rect.right, rect.top), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_NE, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasEWMarks && !__1.Browser.TouchUI) this.drawSelectionMark(3, new Utils_2.Point(rect.right, rect.top + rect.size.height / 2), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_E, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasCornerMarks) this.drawSelectionMark(4, new Utils_2.Point(rect.right, rect.bottom), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_SE, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasNSMarks && !__1.Browser.TouchUI) this.drawSelectionMark(5, new Utils_2.Point(rect.left + rect.size.width / 2, rect.bottom), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_S, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasCornerMarks) this.drawSelectionMark(6, new Utils_2.Point(rect.left, rect.bottom), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_SW, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasEWMarks && !__1.Browser.TouchUI) this.drawSelectionMark(7, new Utils_2.Point(rect.left, rect.top + rect.size.height / 2), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_W, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n        };\n\n        CanvasElement.prototype.drawSelectionMark = function (index, point, size, type, value, className) {\n          var _this = this;\n\n          this.getOrCreateElement(\"SM\" + index, new RectaglePrimitive_1.RectanglePrimitive(point.x - size / 2, point.y - size / 2, size, size, null, className, undefined, function (el) {\n            Utils_1.RenderUtils.setElementEventData(el, type, _this.key, value);\n          }), this.marksContainer);\n        };\n\n        CanvasElement.prototype.drawSelectionRect = function (rectangle, type, className) {\n          var primitive = new RectaglePrimitive_1.RectanglePrimitive(rectangle.left, rectangle.top, rectangle.width, rectangle.height, null, className, undefined, function (el) {\n            Utils_1.RenderUtils.setElementEventData(el, type, \"-1\", -1);\n          });\n          this.getOrCreateElement(\"shapeSelection\", primitive, this.rectsContainer);\n        };\n\n        CanvasElement.prototype.getOrCreateElement = function (cacheKey, primitive, container) {\n          var element = this.elements[cacheKey];\n\n          if (!element) {\n            element = primitive.createElement();\n            this.elements[cacheKey] = element;\n            container.appendChild(element);\n          }\n\n          this.updatedElements[cacheKey] = true;\n          primitive.applyElementProperties(element);\n          return element;\n        };\n\n        return CanvasElement;\n      }();\n\n      var ItemSelectionElement =\n      /** @class */\n      function (_super) {\n        __extends(ItemSelectionElement, _super);\n\n        function ItemSelectionElement(rectsContainer, marksContainer, key, zoomLevel, readOnly, isLocked, rectangle) {\n          var _this = _super.call(this, rectsContainer, marksContainer, key, zoomLevel, readOnly) || this;\n\n          _this.isLocked = isLocked;\n          _this.rectangle = rectangle;\n          return _this;\n        }\n\n        ItemSelectionElement.prototype.onSelectionChanged = function (isMultipleSelection) {\n          if (this.isMultipleSelection !== isMultipleSelection) {\n            this.isMultipleSelection = isMultipleSelection;\n            this.redraw();\n          }\n        };\n\n        ItemSelectionElement.prototype.redrawCore = function () {\n          var rect = this.rectangle.multiply(this.zoomLevel);\n          if (this.isLockedRender()) this.drawLockedSelection(rect);else this.drawUnlockedSelection(rect);\n        };\n\n        ItemSelectionElement.prototype.isLockedRender = function () {\n          return this.isLocked && !this.readOnly;\n        };\n\n        ItemSelectionElement.prototype.drawLockedSelection = function (rect) {\n          this.drawLockedSelectionMark(0, new Utils_2.Point(rect.left, rect.top), CanvasSelectionManager.lockedSelectionMarkSize, exports.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK);\n          this.drawLockedSelectionMark(1, new Utils_2.Point(rect.right, rect.top), CanvasSelectionManager.lockedSelectionMarkSize, exports.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK);\n          this.drawLockedSelectionMark(2, new Utils_2.Point(rect.right, rect.bottom), CanvasSelectionManager.lockedSelectionMarkSize, exports.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK);\n          this.drawLockedSelectionMark(3, new Utils_2.Point(rect.left, rect.bottom), CanvasSelectionManager.lockedSelectionMarkSize, exports.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK);\n        };\n\n        ItemSelectionElement.prototype.drawLockedSelectionMark = function (index, point, size, className) {\n          var primitive = new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(point.x - size / 2, point.y - size / 2), new PathPrimitive_1.PathPrimitiveLineToCommand(point.x + size / 2, point.y + size / 2), new PathPrimitive_1.PathPrimitiveMoveToCommand(point.x + size / 2, point.y - size / 2), new PathPrimitive_1.PathPrimitiveLineToCommand(point.x - size / 2, point.y + size / 2)], null, className);\n          this.getOrCreateElement(\"LSM\" + index, primitive, this.marksContainer);\n        };\n\n        return ItemSelectionElement;\n      }(CanvasElement);\n\n      var MultipleSelectionElement =\n      /** @class */\n      function (_super) {\n        __extends(MultipleSelectionElement, _super);\n\n        function MultipleSelectionElement(rectsContainer, marksContainer, zoomLevel, readOnly) {\n          var _this = _super.call(this, rectsContainer, marksContainer, \"-1\", zoomLevel, readOnly) || this;\n\n          _this.items = {};\n          return _this;\n        }\n\n        MultipleSelectionElement.prototype.onModelItemChanged = function (itemKey, rectangle) {\n          if (itemKey in this.items) this.items[itemKey] = rectangle;\n        };\n\n        MultipleSelectionElement.prototype.onModelChanged = function () {\n          this.redraw();\n        };\n\n        MultipleSelectionElement.prototype.onSelectionChanged = function (containsShapes, items) {\n          var _this = this;\n\n          this.containsShapes = containsShapes;\n          this.items = {};\n          items.forEach(function (i) {\n            return _this.items[i.key] = i.rectangle;\n          });\n          this.redraw();\n        };\n\n        MultipleSelectionElement.prototype.redrawCore = function () {\n          var _this = this;\n\n          var rectangle = Utils_2.GeometryUtils.getCommonRectangle(Object.keys(this.items).map(function (key) {\n            return _this.items[key];\n          }));\n          var rect = CanvasSelectionManager.correctShapeSelectionRect(rectangle.multiply(this.zoomLevel), CanvasSelectionManager.selectionRectLineWidth, this.zoomLevel);\n          this.drawSelectionRect(rect, Event_1.MouseEventElementType.SelectionRect, exports.SELECTION_ELEMENT_CLASSNAMES.ITEMS_SELECTION_RECT);\n          if (this.containsShapes) this.drawSelectionMarks(rect, true, true);\n        };\n\n        return MultipleSelectionElement;\n      }(CanvasElement);\n\n      var ShapeSelectionElement =\n      /** @class */\n      function (_super) {\n        __extends(ShapeSelectionElement, _super);\n\n        function ShapeSelectionElement(rectsContainer, marksContainer, zoomLevel, readOnly, key, isLocked, rectangle, allowResizeHorizontally, allowResizeVertically, shapeParameterPoints) {\n          var _this = _super.call(this, rectsContainer, marksContainer, key, zoomLevel, readOnly, isLocked, rectangle) || this;\n\n          _this.allowResizeHorizontally = allowResizeHorizontally;\n          _this.allowResizeVertically = allowResizeVertically;\n          _this.shapeParameterPoints = shapeParameterPoints;\n          return _this;\n        }\n\n        ShapeSelectionElement.prototype.onModelChanged = function (isLocked, rectangle, allowResizeHorizontally, allowResizeVertically, shapeParameterPoints) {\n          this.isLocked = isLocked;\n          this.rectangle = rectangle;\n          this.allowResizeHorizontally = allowResizeHorizontally;\n          this.allowResizeVertically = allowResizeVertically;\n          this.shapeParameterPoints = shapeParameterPoints;\n          this.redraw();\n        };\n\n        ShapeSelectionElement.prototype.drawUnlockedSelection = function (rect) {\n          var shapeRect = CanvasSelectionManager.correctShapeSelectionRect(rect, CanvasSelectionManager.selectionRectLineWidth, this.zoomLevel);\n          this.drawSelectionRect(shapeRect, Event_1.MouseEventElementType.SelectionRect, this.isMultipleSelection ? exports.SELECTION_ELEMENT_CLASSNAMES.ITEM_MULTI_SELECTION : exports.SELECTION_ELEMENT_CLASSNAMES.ITEM_SELECTION_RECT);\n          if (!this.isMultipleSelection) this.drawSelectionMarks(rect, this.allowResizeHorizontally, this.allowResizeVertically);\n          this.drawShapeParameterPoints();\n        };\n\n        ShapeSelectionElement.prototype.drawShapeParameterPoints = function () {\n          var _this = this;\n\n          if (this.readOnly) return;\n          this.shapeParameterPoints.forEach(function (pp, index) {\n            var point = pp.point.multiply(_this.zoomLevel);\n\n            _this.drawShapeParameterPoint(point, index, pp.key);\n          });\n        };\n\n        ShapeSelectionElement.prototype.drawShapeParameterPoint = function (point, index, pointKey) {\n          var _this = this;\n\n          var size = CanvasSelectionManager.geomertyMarkSize;\n          var primitive = new RectaglePrimitive_1.RectanglePrimitive(point.x - size / 2, point.y - size / 2, size, size, null, \"geometry-mark\", undefined, function (el) {\n            Utils_1.RenderUtils.setElementEventData(el, Event_1.MouseEventElementType.ShapeParameterBox, _this.key, pointKey);\n          });\n          this.getOrCreateElement(\"pp\" + index.toString(), primitive, this.marksContainer);\n        };\n\n        return ShapeSelectionElement;\n      }(ItemSelectionElement);\n\n      var ConnectorSelectionElement =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorSelectionElement, _super);\n\n        function ConnectorSelectionElement(rectsContainer, marksContainer, zoomLevel, readOnly, key, isLocked, rectangle, renderPoints, styleText, enableText, texts, points, lineType) {\n          var _this = _super.call(this, rectsContainer, marksContainer, key, zoomLevel, readOnly, isLocked, rectangle) || this;\n\n          _this.renderPoints = renderPoints;\n          _this.styleText = styleText;\n          _this.enableText = enableText;\n          _this.texts = texts;\n          _this.points = points;\n          _this.lineType = lineType;\n          return _this;\n        }\n\n        ConnectorSelectionElement.prototype.onModelChanged = function (isLocked, rectangle, renderPoints, styleText, enableText, texts, points, lineType) {\n          this.isLocked = isLocked;\n          this.rectangle = rectangle;\n          this.renderPoints = renderPoints;\n          this.styleText = styleText;\n          this.enableText = enableText;\n          this.texts = texts;\n          this.points = points;\n          this.lineType = lineType;\n          this.redraw();\n        };\n\n        ConnectorSelectionElement.prototype.drawUnlockedSelection = function (rect) {\n          this.drawConnectorSelection(this.isMultipleSelection ? exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_MULTI_SELECTION : exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_SELECTION);\n          if (!this.isMultipleSelection && !this.readOnly) this.drawConnectorSelectionMarks();\n        };\n\n        ConnectorSelectionElement.prototype.drawConnectorSelection = function (className) {\n          var _this = this;\n\n          var points = this.renderPoints;\n          var pathCommands = [];\n          var prevPt, firstPt, lastPt;\n          var difX = 0,\n              difY = 0;\n          points.forEach(function (pt) {\n            pt = pt.multiply(_this.zoomLevel);\n\n            if (prevPt === undefined) {\n              firstPt = pt;\n              pathCommands.push(new PathPrimitive_1.PathPrimitiveMoveToCommand(pt.x, pt.y));\n            } else {\n              pathCommands.push(new PathPrimitive_1.PathPrimitiveLineToCommand(pt.x, pt.y));\n              difX = Math.max(difX, Math.abs(prevPt.x - pt.x));\n              difY = Math.max(difY, Math.abs(prevPt.y - pt.y));\n            }\n\n            prevPt = pt;\n          });\n          lastPt = prevPt;\n\n          if (difX < CanvasSelectionManager.connectorSelectionLineWidth || difY < CanvasSelectionManager.connectorSelectionLineWidth) {\n            // Increase mask size\n            var offsetX = difX < CanvasSelectionManager.connectorSelectionLineWidth ? CanvasSelectionManager.connectorSelectionLineWidth : 0;\n            var offsetY = difY < CanvasSelectionManager.connectorSelectionLineWidth ? CanvasSelectionManager.connectorSelectionLineWidth : 0;\n            pathCommands.push(new PathPrimitive_1.PathPrimitiveLineToCommand(lastPt.x - offsetX, lastPt.y - offsetY));\n          }\n\n          var maskId = Utils_1.RenderUtils.generateSvgElementId(\"maskSel\");\n          var cliPathId = Utils_1.RenderUtils.generateSvgElementId(\"clipSel\");\n          var primitive = new GroupPrimitive_1.GroupPrimitive([new PathPrimitive_1.PathPrimitive(pathCommands, null, className, cliPathId, function (el) {\n            el.setAttribute(\"mask\", Utils_1.RenderUtils.getUrlPathById(maskId));\n          }), new MaskPrimitive_1.MaskPrimitive(maskId, [new RectaglePrimitive_1.RectanglePrimitive(\"0\", \"0\", \"100%\", \"100%\", null, \"background\"), new PathPrimitive_1.PathPrimitive(pathCommands), new RectaglePrimitive_1.RectanglePrimitive(firstPt.x - CanvasSelectionManager.connectorSelectionWidth / 2, firstPt.y - CanvasSelectionManager.connectorSelectionWidth / 2, CanvasSelectionManager.connectorSelectionWidth, CanvasSelectionManager.connectorSelectionWidth), new RectaglePrimitive_1.RectanglePrimitive(lastPt.x - CanvasSelectionManager.connectorSelectionWidth / 2, lastPt.y - CanvasSelectionManager.connectorSelectionWidth / 2, CanvasSelectionManager.connectorSelectionWidth, CanvasSelectionManager.connectorSelectionWidth), new GroupPrimitive_1.GroupPrimitive([])], exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_SELECTION_MASK, \"-1000%\", \"-1000%\", \"2100%\", \"2100%\")]);\n          var csElement = this.getOrCreateElement(\"CS\", primitive, this.rectsContainer);\n          this.drawConnectorTextsSelection(csElement, csElement.querySelector(\"g\"), className, maskId);\n        };\n\n        ConnectorSelectionElement.prototype.drawConnectorTextsSelection = function (parent, maskParent, className, maskId) {\n          var _this = this;\n\n          var textRects = [];\n\n          if (maskParent && this.enableText) {\n            this.texts.forEach(function (textObj, index) {\n              if (textObj.text) {\n                var filterId = Utils_1.RenderUtils.generateSvgElementId(\"filterSel\");\n                var textPrimitive = new GroupPrimitive_1.GroupPrimitive([new TextPrimitive_1.TextPrimitive(textObj.point.x, textObj.point.y, textObj.text, undefined, _this.styleText, true, null, filterId), new TextFilterPrimitive_1.TextFilterPrimitive(filterId)]);\n\n                var gTextEl = _this.getOrCreateElement(\"FSE\" + index, textPrimitive, maskParent);\n\n                var textEl = gTextEl.querySelector(\"text\");\n                var textRect = Utils_1.RenderUtils.getSvgTextRectangle(textEl, CanvasSelectionManager.connectorSelectionLineWidth);\n                if (textRect) textRects.push(textRect.multiply(_this.zoomLevel));\n              }\n            });\n          }\n\n          for (var i = 0; i < textRects.length; i++) {\n            var textRectPrimitive = new RectaglePrimitive_1.RectanglePrimitive(textRects[i].left, textRects[i].top, textRects[i].width, textRects[i].height, null, className + \" text\", null);\n            this.getOrCreateElement(\"TR\" + i, textRectPrimitive, parent);\n          }\n        };\n\n        ConnectorSelectionElement.prototype.drawConnectorSelectionMarks = function () {\n          var _this = this;\n\n          var pointsCount = this.points.length - 1;\n          this.points.forEach(function (pt, index) {\n            var isEdgePoint = index === 0 || index === pointsCount;\n            var className = isEdgePoint ? exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK : exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_POINT_MARK;\n            var markSize = isEdgePoint ? CanvasSelectionManager.selectionMarkSize : CanvasSelectionManager.connectorPointMarkSize;\n\n            if (isEdgePoint || _this.lineType === ConnectorProperties_1.ConnectorLineOption.Straight) {\n              _this.drawSelectionMark(index, pt.multiply(_this.zoomLevel), markSize, Event_1.MouseEventElementType.ConnectorPoint, index, className);\n            } else {\n              _this.drawSelectionMark(index, pt.multiply(_this.zoomLevel), markSize, Event_1.MouseEventElementType.Undefined, -1, className + \" disabled\");\n            }\n          });\n          this.drawConnectorSideMarks();\n        };\n\n        ConnectorSelectionElement.prototype.drawConnectorSideMarks = function () {\n          var _this = this;\n\n          var type = this.lineType === ConnectorProperties_1.ConnectorLineOption.Straight ? Event_1.MouseEventElementType.ConnectorSide : Event_1.MouseEventElementType.ConnectorOrthogonalSide;\n          var prevPt, prevPtIndex;\n          this.renderPoints.filter(function (rp) {\n            return !rp.skipped;\n          }).forEach(function (pt, index) {\n            if (pt.skipped) return;\n\n            if (prevPt !== undefined) {\n              if (_this.canDrawConnectorSideMark(pt, prevPt)) {\n                var classNameSuffix = _this.lineType === ConnectorProperties_1.ConnectorLineOption.Orthogonal ? pt.x - prevPt.x === 0 ? \"vertical\" : \"horizontal\" : \"\";\n\n                _this.drawSelectionMark(_this.points.length + index - 1, new Utils_2.Point(prevPt.x + (pt.x - prevPt.x) / 2, prevPt.y + (pt.y - prevPt.y) / 2).multiply(_this.zoomLevel), CanvasSelectionManager.connectorSideMarkSize, type, prevPtIndex + \"_\" + index, exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_SIDE_MARK + \" \" + classNameSuffix);\n              }\n            }\n\n            prevPt = pt;\n            prevPtIndex = index;\n          });\n        };\n\n        ConnectorSelectionElement.prototype.canDrawConnectorSideMark = function (point1, point2) {\n          if (this.lineType === ConnectorProperties_1.ConnectorLineOption.Straight) {\n            var minSize = CanvasSelectionManager.selectionMarkSize + CanvasSelectionManager.connectorSideMarkSize;\n            return Utils_2.GeometryUtils.getDistance(point1, point2) > minSize;\n          }\n\n          if (this.lineType === ConnectorProperties_1.ConnectorLineOption.Orthogonal) {\n            return (point1.x - point2.x === 0 || Math.abs(point1.x - point2.x) > Connector_1.Connector.minOffset) && (point1.y - point2.y === 0 || Math.abs(point1.y - point2.y) > Connector_1.Connector.minOffset);\n          }\n\n          return false;\n        };\n\n        return ConnectorSelectionElement;\n      }(ItemSelectionElement);\n      /***/\n\n    },\n    /* 88 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      var ExtensionLineType;\n\n      (function (ExtensionLineType) {\n        ExtensionLineType[ExtensionLineType[\"LeftToLeftAbove\"] = 0] = \"LeftToLeftAbove\";\n        ExtensionLineType[ExtensionLineType[\"LeftToLeftBelow\"] = 1] = \"LeftToLeftBelow\";\n        ExtensionLineType[ExtensionLineType[\"RightToRightAbove\"] = 2] = \"RightToRightAbove\";\n        ExtensionLineType[ExtensionLineType[\"RightToRightBelow\"] = 3] = \"RightToRightBelow\";\n        ExtensionLineType[ExtensionLineType[\"LeftToRightAbove\"] = 4] = \"LeftToRightAbove\";\n        ExtensionLineType[ExtensionLineType[\"LeftToRightBelow\"] = 5] = \"LeftToRightBelow\";\n        ExtensionLineType[ExtensionLineType[\"RightToLeftAbove\"] = 6] = \"RightToLeftAbove\";\n        ExtensionLineType[ExtensionLineType[\"RightToLeftBelow\"] = 7] = \"RightToLeftBelow\";\n        ExtensionLineType[ExtensionLineType[\"TopToTopBefore\"] = 8] = \"TopToTopBefore\";\n        ExtensionLineType[ExtensionLineType[\"TopToTopAfter\"] = 9] = \"TopToTopAfter\";\n        ExtensionLineType[ExtensionLineType[\"BottomToBottomBefore\"] = 10] = \"BottomToBottomBefore\";\n        ExtensionLineType[ExtensionLineType[\"BottomToBottomAfter\"] = 11] = \"BottomToBottomAfter\";\n        ExtensionLineType[ExtensionLineType[\"TopToBottomBefore\"] = 12] = \"TopToBottomBefore\";\n        ExtensionLineType[ExtensionLineType[\"TopToBottomAfter\"] = 13] = \"TopToBottomAfter\";\n        ExtensionLineType[ExtensionLineType[\"BottomToTopBefore\"] = 14] = \"BottomToTopBefore\";\n        ExtensionLineType[ExtensionLineType[\"BottomToTopAfter\"] = 15] = \"BottomToTopAfter\";\n        ExtensionLineType[ExtensionLineType[\"HorizontalCenterAbove\"] = 16] = \"HorizontalCenterAbove\";\n        ExtensionLineType[ExtensionLineType[\"HorizontalCenterBelow\"] = 17] = \"HorizontalCenterBelow\";\n        ExtensionLineType[ExtensionLineType[\"VerticalCenterBefore\"] = 18] = \"VerticalCenterBefore\";\n        ExtensionLineType[ExtensionLineType[\"VerticalCenterAfter\"] = 19] = \"VerticalCenterAfter\";\n        ExtensionLineType[ExtensionLineType[\"VerticalCenterToPageCenter\"] = 20] = \"VerticalCenterToPageCenter\";\n        ExtensionLineType[ExtensionLineType[\"HorizontalCenterToPageCenter\"] = 21] = \"HorizontalCenterToPageCenter\";\n        ExtensionLineType[ExtensionLineType[\"LeftToPageCenter\"] = 22] = \"LeftToPageCenter\";\n        ExtensionLineType[ExtensionLineType[\"RightToPageCenter\"] = 23] = \"RightToPageCenter\";\n        ExtensionLineType[ExtensionLineType[\"TopToPageCenter\"] = 24] = \"TopToPageCenter\";\n        ExtensionLineType[ExtensionLineType[\"BottomToPageCenter\"] = 25] = \"BottomToPageCenter\";\n      })(ExtensionLineType = exports.ExtensionLineType || (exports.ExtensionLineType = {}));\n\n      var ExtensionLine =\n      /** @class */\n      function () {\n        function ExtensionLine(type, segment, text) {\n          this.type = type;\n          this.segment = segment;\n          this.text = text;\n        }\n\n        return ExtensionLine;\n      }();\n\n      exports.ExtensionLine = ExtensionLine;\n\n      var ExtensionLinesVisualizer =\n      /** @class */\n      function () {\n        function ExtensionLinesVisualizer(dispatcher) {\n          this.dispatcher = dispatcher;\n          this.lines = [];\n          this.lineIndexByType = {};\n        }\n\n        ExtensionLinesVisualizer.prototype.addSegment = function (type, segment, text) {\n          var curIndex = this.lineIndexByType[type];\n\n          if (curIndex === undefined) {\n            var line = new ExtensionLine(type, segment, text);\n            var index = this.lines.push(line);\n            this.lineIndexByType[line.type] = index - 1;\n            this.raiseShow();\n          } else if (segment.distance < this.lines[curIndex].segment.distance) {\n            var line = new ExtensionLine(type, segment, text);\n            this.lines.splice(curIndex, 1, line);\n            this.raiseShow();\n          }\n        };\n\n        ExtensionLinesVisualizer.prototype.update = function () {\n          this.raiseShow();\n        };\n\n        ExtensionLinesVisualizer.prototype.reset = function () {\n          if (this.lines.length) {\n            this.lines = [];\n            this.lineIndexByType = {};\n            this.raiseHide();\n          }\n        };\n\n        ExtensionLinesVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          this.dispatcher.raise1(function (l) {\n            return l.notifyExtensionLinesShow(_this.lines);\n          });\n        };\n\n        ExtensionLinesVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifyExtensionLinesHide();\n          });\n        };\n\n        return ExtensionLinesVisualizer;\n      }();\n\n      exports.ExtensionLinesVisualizer = ExtensionLinesVisualizer;\n      /***/\n    },\n    /* 89 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ConnectorPointsCalculatorBase =\n      /** @class */\n      function () {\n        function ConnectorPointsCalculatorBase(connector) {\n          this.connector = connector;\n        }\n\n        return ConnectorPointsCalculatorBase;\n      }();\n\n      exports.ConnectorPointsCalculatorBase = ConnectorPointsCalculatorBase;\n      /***/\n    },\n    /* 90 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics54 = function extendStatics(d, b) {\n          _extendStatics54 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics54(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics54(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var DeleteConnectionHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(DeleteConnectionHistoryItem, _super);\n\n        function DeleteConnectionHistoryItem(connector, position) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connector.key;\n          _this.position = position;\n          _this.itemKey = connector.getExtremeItem(_this.position).key;\n          return _this;\n        }\n\n        DeleteConnectionHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldConnectionPointIndex = this.position === Connector_1.ConnectorPosition.Begin ? connector.beginConnectionPointIndex : connector.endConnectionPointIndex;\n          manipulator.deleteConnection(connector, this.position);\n        };\n\n        DeleteConnectionHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.addConnection(connector, item, this.oldConnectionPointIndex, this.position);\n        };\n\n        return DeleteConnectionHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.DeleteConnectionHistoryItem = DeleteConnectionHistoryItem;\n      /***/\n    },\n    /* 91 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics55 = function extendStatics(d, b) {\n          _extendStatics55 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics55(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics55(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var DeleteShapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(DeleteShapeHistoryItem, _super);\n\n        function DeleteShapeHistoryItem(shapeKey) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = shapeKey;\n          return _this;\n        }\n\n        DeleteShapeHistoryItem.prototype.redo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          this.shape = shape.clone();\n          manipulator.deleteShape(shape);\n        };\n\n        DeleteShapeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.addShape(this.shape, this.shape.key);\n        };\n\n        return DeleteShapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.DeleteShapeHistoryItem = DeleteShapeHistoryItem;\n      /***/\n    },\n    /* 92 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics56 = function extendStatics(d, b) {\n          _extendStatics56 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics56(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics56(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var DiamondShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DiamondShapeDescription, _super);\n\n        function DiamondShapeDescription(title, defaultText, defaultSize) {\n          if (title === void 0) {\n            title = \"Diamond\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          if (defaultSize === void 0) {\n            defaultSize = ShapeDescription_1.ShapeDefaultSize.clone();\n          }\n\n          return _super.call(this, title, defaultText, defaultSize) || this;\n        }\n\n        Object.defineProperty(DiamondShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Diamond;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        DiamondShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom;\n          var _a = rect.center,\n              cx = _a.x,\n              cy = _a.y;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(cx, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, cy), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        return DiamondShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.DiamondShapeDescription = DiamondShapeDescription;\n      /***/\n    },\n    /* 93 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics57 = function extendStatics(d, b) {\n          _extendStatics57 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics57(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics57(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var TextShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(TextShapeDescription, _super);\n\n        function TextShapeDescription() {\n          return _super.call(this, \"Text\", \"Text\", new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.5)) || this;\n        }\n\n        Object.defineProperty(TextShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Text;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        TextShapeDescription.prototype.createShapePrimitives = function (shape, forToolbox) {\n          return [];\n        };\n\n        return TextShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.TextShapeDescription = TextShapeDescription;\n      /***/\n    },\n    /* 94 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics58 = function extendStatics(d, b) {\n          _extendStatics58 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics58(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics58(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PolygonShapeDescription_1 = __webpack_require__(68);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var PentagonShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(PentagonShapeDescription, _super);\n\n        function PentagonShapeDescription(title, defaultText) {\n          if (title === void 0) {\n            title = \"Pentagon\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          var _this = _super.call(this, title, defaultText) || this;\n\n          _this.defaultRatio = _this.defaultSize.height / _this.defaultSize.width;\n          return _this;\n        }\n\n        Object.defineProperty(PentagonShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Pentagon;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(PentagonShapeDescription.prototype, \"angleCount\", {\n          get: function get() {\n            return 5;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        PentagonShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var ratio = height / width / this.defaultRatio;\n          var angle = Math.PI - this.angle;\n          var py = width / 2 * Math.tan(angle / 2) * ratio;\n          var y = top + py;\n          var px = (height - py) / Math.tan(angle) / ratio;\n          var x1 = left + px;\n          var x2 = right - px;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, y), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, y), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        PentagonShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var side = shape.getConnectionPointSide(point);\n\n          if (side === DiagramItem_1.ConnectionPointSide.East || side === DiagramItem_1.ConnectionPointSide.West) {\n            var rect = shape.rectangle;\n            var top_1 = rect.top,\n                width = rect.width,\n                height = rect.height;\n            var ratio = height / width / this.defaultRatio;\n            var angle = Math.PI - this.angle;\n            var py = width / 2 * Math.tan(angle / 2) * ratio;\n            var y = top_1 + py;\n            if (side === DiagramItem_1.ConnectionPointSide.East) point.y = y;else if (side === DiagramItem_1.ConnectionPointSide.West) point.y = y;\n          }\n        };\n\n        PentagonShapeDescription.prototype.calculateHeight = function (width) {\n          var angle = Math.PI - this.angle;\n          var h1 = width / 2 * Math.tan(angle / 2);\n          var side = width / 2 / Math.cos(angle / 2);\n          var h2 = side * Math.sin(angle);\n          return h1 + h2;\n        };\n\n        return PentagonShapeDescription;\n      }(PolygonShapeDescription_1.PolygonShapeDescription);\n\n      exports.PentagonShapeDescription = PentagonShapeDescription;\n      /***/\n    },\n    /* 95 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics59 = function extendStatics(d, b) {\n          _extendStatics59 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics59(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics59(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PolygonShapeDescription_1 = __webpack_require__(68);\n\n      var HexagonShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(HexagonShapeDescription, _super);\n\n        function HexagonShapeDescription(title, defaultText) {\n          if (title === void 0) {\n            title = \"Hexagon\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          return _super.call(this, title, defaultText) || this;\n        }\n\n        Object.defineProperty(HexagonShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Hexagon;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(HexagonShapeDescription.prototype, \"angleCount\", {\n          get: function get() {\n            return 6;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        HexagonShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cy = rect.center.y;\n          var angle = Math.PI - this.angle;\n          var sideX = width / (1 + 2 * Math.cos(angle));\n          var x1 = left + (width - sideX) / 2;\n          var x2 = x1 + sideX;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, cy), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        HexagonShapeDescription.prototype.calculateHeight = function (width) {\n          var angle = Math.PI - this.angle;\n          var sideX = width / (1 + 2 * Math.cos(angle));\n          return 2 * sideX * Math.sin(angle);\n        };\n\n        return HexagonShapeDescription;\n      }(PolygonShapeDescription_1.PolygonShapeDescription);\n\n      exports.HexagonShapeDescription = HexagonShapeDescription;\n      /***/\n    },\n    /* 96 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics60 = function extendStatics(d, b) {\n          _extendStatics60 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics60(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics60(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ConnectionPoint_1 = __webpack_require__(34);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var TriangleShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(TriangleShapeDescription, _super);\n\n        function TriangleShapeDescription(title, defaultText) {\n          if (title === void 0) {\n            title = \"Triangle\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          var _this = _super.call(this, title, defaultText) || this;\n\n          _this.defaultSize.height = _this.calculateHeight(ShapeDescription_1.ShapeDefaultDimension);\n          return _this;\n        }\n\n        Object.defineProperty(TriangleShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Triangle;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        TriangleShapeDescription.prototype.createConnectionPoints = function () {\n          return [new ConnectionPoint_1.ConnectionPoint(0.5, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(0.75, 0.5, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(0.5, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0.25, 0.5, DiagramItem_1.ConnectionPointSide.West)];\n        };\n\n        TriangleShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.center.x, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        TriangleShapeDescription.prototype.calculateHeight = function (width) {\n          return Math.sqrt(Math.pow(width, 2) - Math.pow(width / 2, 2));\n        };\n\n        TriangleShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          return rect.resize(0, -rect.width * 0.25).offset(0, rect.width * 0.25);\n        };\n\n        return TriangleShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.TriangleShapeDescription = TriangleShapeDescription;\n      /***/\n    },\n    /* 97 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics61 = function extendStatics(d, b) {\n          _extendStatics61 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics61(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics61(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var DocumentShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DocumentShapeDescription, _super);\n\n        function DocumentShapeDescription(title, defaultText) {\n          if (title === void 0) {\n            title = \"Document\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"Document\";\n          }\n\n          return _super.call(this, title, defaultText) || this;\n        }\n\n        Object.defineProperty(DocumentShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Document;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        DocumentShapeDescription.prototype.createShapePrimitives = function (shape) {\n          return this.createDocumentPrimitives(shape.rectangle, shape.style);\n        };\n\n        DocumentShapeDescription.prototype.createDocumentPrimitives = function (rect, style) {\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var dy = height * DocumentShapeDescription.curveOffsetRatio;\n          var primitives = [];\n          return primitives.concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right - width * 0.25, bottom - 2 * dy, cx, bottom - dy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left + width * 0.25, bottom + dy, left, bottom - dy), new PathPrimitive_1.PathPrimitiveClosePathCommand()], style)]);\n        };\n\n        DocumentShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.South) point.y -= shape.size.height * DocumentShapeDescription.curveOffsetRatio;\n        };\n\n        DocumentShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          return rect.resize(0, -rect.height * DocumentShapeDescription.curveOffsetRatio);\n        };\n\n        DocumentShapeDescription.curveOffsetRatio = 0.1;\n        return DocumentShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.DocumentShapeDescription = DocumentShapeDescription;\n      /***/\n    },\n    /* 98 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics62 = function extendStatics(d, b) {\n          _extendStatics62 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics62(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics62(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var ImagePrimitive =\n      /** @class */\n      function (_super) {\n        __extends(ImagePrimitive, _super);\n\n        function ImagePrimitive(x, y, width, height, url, preserveAspectRatio, style, className) {\n          if (preserveAspectRatio === void 0) {\n            preserveAspectRatio = \"none\";\n          }\n\n          var _this = _super.call(this, style, className) || this;\n\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          _this.url = url;\n          _this.preserveAspectRatio = preserveAspectRatio;\n          return _this;\n        }\n\n        ImagePrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"image\");\n        };\n\n        ImagePrimitive.prototype.applyElementProperties = function (element) {\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          this.setUnitAttribute(element, \"width\", this.width);\n          this.setUnitAttribute(element, \"height\", this.height);\n          this.setUnitAttribute(element, \"href\", this.url);\n          this.setUnitAttribute(element, \"preserveAspectRatio\", this.preserveAspectRatio);\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        return ImagePrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.ImagePrimitive = ImagePrimitive;\n      /***/\n    },\n    /* 99 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var EllipsePrimitive_1 = __webpack_require__(42);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var __1 = __webpack_require__(8);\n\n      var GroupPrimitive_1 = __webpack_require__(28);\n\n      var Browser_1 = __webpack_require__(23);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var ShapeImageIndicator =\n      /** @class */\n      function () {\n        function ShapeImageIndicator(x, y, size, borderThickness, className) {\n          this.x = x;\n          this.y = y;\n          this.size = size;\n          this.borderThickness = borderThickness;\n          this.className = className;\n          this.animationStarted = false;\n        }\n\n        ShapeImageIndicator.createLoadingIndicatorPrimitives = function (x, y, r, borderThickness, className) {\n          var indicator = new ShapeImageIndicator(x, y, r, borderThickness, className);\n          return indicator.createLoadingIndicatorPrimitive();\n        };\n\n        ShapeImageIndicator.createUserIconPrimitives = function (x, y, r, borderThickness, className) {\n          var indicator = new ShapeImageIndicator(x, y, r, borderThickness, className);\n          return indicator.createUserIconPrimitive();\n        };\n\n        ShapeImageIndicator.createWarningIconPrimitives = function (x, y, size, className) {\n          var indicator = new ShapeImageIndicator(x, y, size, undefined, className);\n          return indicator.createWarningIconPrimitive();\n        };\n\n        ShapeImageIndicator.prototype.rotate = function (element, centerX, centerY, timestamp) {\n          if (!this.animationStarted) return;\n          var angle = Math.round(timestamp) % 1080 / 3;\n          var transformAttributeValue = \"rotate(\" + angle + \" \" + centerX + \" \" + centerY + \")\";\n          element.setAttribute(\"transform\", transformAttributeValue);\n          this.animationRequestId = requestAnimationFrame(function (timestamp) {\n            this.rotate(element, centerX, centerY, timestamp);\n          }.bind(this));\n        };\n\n        ShapeImageIndicator.prototype.onApplyLoadingIndicatorElementProperties = function (element) {\n          var _a = [__1.UnitConverter.twipsToPixelsF(this.x + this.size / 2), __1.UnitConverter.twipsToPixelsF(this.y + this.size / 2)],\n              centerX = _a[0],\n              centerY = _a[1];\n\n          if (Browser_1.Browser.IE) {\n            this.animationRequestId = requestAnimationFrame(function (timestamp) {\n              this.rotate(element, centerX, centerY, timestamp);\n            }.bind(this));\n            this.animationStarted = true;\n          } else {\n            element.style.setProperty(\"transform-origin\", centerX + \"px \" + centerY + \"px\");\n          }\n        };\n\n        ShapeImageIndicator.prototype.center = function () {\n          return [__1.UnitConverter.twipsToPixelsF(this.x + this.size / 2), __1.UnitConverter.twipsToPixelsF(this.y + this.size / 2)];\n        };\n\n        ShapeImageIndicator.prototype.createLoadingIndicatorPrimitive = function () {\n          var _a = this.center(),\n              centerX = _a[0],\n              centerY = _a[1],\n              radius = __1.UnitConverter.twipsToPixelsF(this.size / 2 - this.borderThickness / 2);\n\n          return new GroupPrimitive_1.GroupPrimitive([new EllipsePrimitive_1.EllipsePrimitive(centerX + \"\", centerY + \"\", radius + \"\", radius + \"\"), new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(centerX + radius + \"\", centerY + \"\"), new PathPrimitive_1.PathPrimitiveArcToCommand(radius + \"\", radius + \"\", 0, false, false, centerX + \"\", centerY - radius + \"\")])], this.className, undefined, undefined, this.onApplyLoadingIndicatorElementProperties.bind(this), this.onBeforeDispose.bind(this));\n        };\n\n        ShapeImageIndicator.prototype.createUserIconPrimitive = function () {\n          var _a = this.center(),\n              centerX = _a[0],\n              centerY = _a[1],\n              radius = __1.UnitConverter.twipsToPixelsF(this.size / 2 - this.borderThickness / 2),\n              sizeInPixels = __1.UnitConverter.twipsToPixelsF(this.size);\n\n          return new GroupPrimitive_1.GroupPrimitive([new EllipsePrimitive_1.EllipsePrimitive(centerX + \"\", centerY + \"\", radius + \"\", radius + \"\", undefined, \"dxdi-background\"), new EllipsePrimitive_1.EllipsePrimitive(centerX + \"\", centerY - sizeInPixels / 8 + \"\", sizeInPixels / 8 + \"\", sizeInPixels / 8 + \"\"), new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(centerX + \"\", centerY + sizeInPixels / 16 + \"\"), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(centerX + 0.1375 * sizeInPixels + \"\", centerY + sizeInPixels / 16 + \"\", centerX + sizeInPixels / 4 + \"\", centerY + 0.11875 * sizeInPixels + \"\", centerX + sizeInPixels / 4 + \"\", centerY + 0.1875 * sizeInPixels + \"\"), new PathPrimitive_1.PathPrimitiveLineToCommand(centerX + sizeInPixels / 4 + \"\", centerY + sizeInPixels / 4 + \"\"), new PathPrimitive_1.PathPrimitiveLineToCommand(centerX - sizeInPixels / 4 + \"\", centerY + sizeInPixels / 4 + \"\"), new PathPrimitive_1.PathPrimitiveLineToCommand(centerX - sizeInPixels / 4 + \"\", centerY + 0.1875 * sizeInPixels + \"\"), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(centerX - sizeInPixels / 4 + \"\", centerY + 0.11875 * sizeInPixels + \"\", centerX - 0.1375 * sizeInPixels + \"\", centerY + sizeInPixels / 16 + \"\", centerX + \"\", centerY + sizeInPixels / 16 + \"\"), new PathPrimitive_1.PathPrimitiveClosePathCommand()])], this.className);\n        };\n\n        ShapeImageIndicator.prototype.createWarningIconPrimitive = function () {\n          var _a = this.center(),\n              centerX = _a[0],\n              centerY = _a[1],\n              radius = __1.UnitConverter.twipsToPixelsF(this.size / 2) - 1,\n              exclamationLineWidth = __1.UnitConverter.twipsToPixelsF(this.size / 8);\n\n          return new GroupPrimitive_1.GroupPrimitive([new EllipsePrimitive_1.EllipsePrimitive(centerX + \"\", centerY + \"\", radius + \"\", radius + \"\"), new RectaglePrimitive_1.RectanglePrimitive(centerX - exclamationLineWidth / 2 + 0.5 + \"\", centerY + radius - __1.UnitConverter.twipsToPixelsF(this.size / 4) + \"\", exclamationLineWidth + \"\", exclamationLineWidth + \"\"), new RectaglePrimitive_1.RectanglePrimitive(centerX - exclamationLineWidth / 2 + 0.5 + \"\", centerY - radius + __1.UnitConverter.twipsToPixelsF(this.size / 4) - exclamationLineWidth + \"\", exclamationLineWidth + \"\", radius + \"\")], this.className);\n        };\n\n        ShapeImageIndicator.prototype.onBeforeDispose = function () {\n          if (this.animationRequestId) cancelAnimationFrame(this.animationRequestId);\n          this.animationStarted = false;\n        };\n\n        return ShapeImageIndicator;\n      }();\n\n      exports.ShapeImageIndicator = ShapeImageIndicator;\n      /***/\n    },\n    /* 100 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ImageCache_1 = __webpack_require__(49);\n\n      var ImageLoader =\n      /** @class */\n      function () {\n        function ImageLoader(loadedCallback) {\n          this.loadedCallback = loadedCallback;\n        }\n\n        ImageLoader.prototype.load = function (data) {\n          if (data.isLoaded) {\n            this.loadedCallback(data);\n            return;\n          }\n\n          this.loadInner(data);\n        };\n\n        ImageLoader.prototype.loadInner = function (data) {\n          var _this = this;\n\n          if (data.imageUrl) this.loadPictureByUrl(data, function () {\n            return _this.finalizeLoading(data, data);\n          });else if (data.base64) this.loadPictureByBase64(data, function () {\n            return _this.finalizeLoading(data, data);\n          });\n          return data;\n        };\n\n        ImageLoader.prototype.finalizeLoading = function (loadedData, existingInfo) {\n          if (!existingInfo) existingInfo = ImageCache_1.ImageCache.instance.getImageData(loadedData.actualId);\n          if (!existingInfo.isLoaded) ImageCache_1.ImageCache.instance.finalizeLoading(existingInfo, loadedData);\n          this.loadedCallback(existingInfo);\n        };\n\n        ImageLoader.prototype.loadPictureByBase64 = function (data, imageLoaded) {\n          var img = new Image();\n\n          img.onload = function () {\n            imageLoaded(data);\n          };\n\n          img.src = data.base64;\n        };\n\n        ImageLoader.prototype.loadPictureByUrl = function (data, imageLoaded) {\n          var _this = this;\n\n          var xhr = new XMLHttpRequest();\n\n          try {\n            xhr.onload = function () {\n              var reader = new FileReader();\n\n              reader.onloadend = function () {\n                data.base64 = reader.result;\n\n                _this.loadPictureByBase64(data, function (data) {\n                  return imageLoaded(data);\n                });\n              };\n\n              reader.readAsDataURL(xhr.response);\n            }; // Access to XMLHttpRequest at 'https://url.jpg' from origin 'http://myurl' has been blocked by CORS policy: \n            // No 'Access-Control-Allow-Origin' header is present on the requested resource.\n\n\n            xhr.onerror = function ()\n            /*this: XMLHttpRequest*/\n            {\n              return imageLoaded(data);\n            };\n\n            xhr.onloadend = function () {\n              if (xhr.status === 404) imageLoaded(data);\n            };\n\n            xhr.open('GET', data.imageUrl, true);\n            xhr.responseType = 'blob';\n            xhr.send();\n          } catch (_a) {}\n        };\n\n        return ImageLoader;\n      }();\n\n      exports.ImageLoader = ImageLoader;\n      /***/\n    },\n    /* 101 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics63 = function extendStatics(d, b) {\n          _extendStatics63 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics63(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics63(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var Utils_2 = __webpack_require__(15);\n\n      var Event_1 = __webpack_require__(10);\n\n      var GroupPrimitive_1 = __webpack_require__(28);\n\n      var ConnectionPoint_1 = __webpack_require__(34);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ContainerDescription =\n      /** @class */\n      function (_super) {\n        __extends(ContainerDescription, _super);\n\n        function ContainerDescription(title, defaultText, defaultSize) {\n          if (title === void 0) {\n            title = \"Container\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          if (defaultSize === void 0) {\n            defaultSize = new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension * 2, ShapeDescription_1.ShapeDefaultDimension * 1.5);\n          }\n\n          return _super.call(this, title, defaultText, defaultSize) || this;\n        }\n\n        Object.defineProperty(ContainerDescription.prototype, \"enableChildren\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ContainerDescription.prototype.createConnectionPoints = function () {\n          return [new ConnectionPoint_1.ConnectionPoint(0.25, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(0.5, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(0.75, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(1, 0.25, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(1, 0.5, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(1, 0.75, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(0.75, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0.5, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0.25, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0, 0.75, DiagramItem_1.ConnectionPointSide.West), new ConnectionPoint_1.ConnectionPoint(0, 0.5, DiagramItem_1.ConnectionPointSide.West), new ConnectionPoint_1.ConnectionPoint(0, 0.25, DiagramItem_1.ConnectionPointSide.West)];\n        };\n\n        ContainerDescription.prototype.getConnectionPointIndexForItem = function (item, connectionPointIndex) {\n          var shapeConnectionPoints = item.getConnectionPoints();\n          if (shapeConnectionPoints.length === 4) return connectionPointIndex * 3 + 1;\n          return connectionPointIndex;\n        };\n\n        ContainerDescription.prototype.getConnectionPointIndexForSide = function (side) {\n          return side * 3 + 1;\n        };\n\n        ContainerDescription.prototype.createShapePrimitives = function (shape, forToolbox) {\n          var _a = shape.rectangle,\n              left = _a.left,\n              top = _a.top,\n              width = _a.width,\n              height = _a.height;\n          var primitives = [];\n\n          if (shape.expanded) {\n            primitives = primitives.concat([new RectaglePrimitive_1.RectanglePrimitive(left, top, width, height, shape.style)]);\n          }\n\n          return primitives.concat(this.createHeaderPrimitives(shape, forToolbox));\n        };\n\n        ContainerDescription.prototype.createExpandButtonPrimitives = function (shape, rect) {\n          var commands = [new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.left + rect.width * ((1 - ContainerDescription.expandButtonSignRatio) / 2), rect.center.y), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.left + rect.width * ((1 - ContainerDescription.expandButtonSignRatio) / 2 + ContainerDescription.expandButtonSignRatio), rect.center.y)];\n\n          if (!shape.expanded) {\n            commands = commands.concat([new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.center.x, rect.top + rect.height * ((1 - ContainerDescription.expandButtonSignRatio) / 2)), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.center.x, rect.top + rect.height * ((1 - ContainerDescription.expandButtonSignRatio) / 2 + ContainerDescription.expandButtonSignRatio))]);\n          }\n\n          var buttonRect = rect.inflate(-rect.width * (1 - ContainerDescription.expandButtonRectRatio) / 2, -rect.height * (1 - ContainerDescription.expandButtonRectRatio) / 2);\n          return [new GroupPrimitive_1.GroupPrimitive([new RectaglePrimitive_1.RectanglePrimitive(buttonRect.left, buttonRect.top, buttonRect.width, buttonRect.height, shape.style), new PathPrimitive_1.PathPrimitive(commands, shape.style)], \"shape-expand-btn\", null, null, function (el) {\n            Utils_2.RenderUtils.setElementEventData(el, Event_1.MouseEventElementType.ShapeExpandButton, shape.key);\n          })];\n        };\n\n        ContainerDescription.headerSize = 360;\n        ContainerDescription.headerToolboxSizeRatio = 0.2;\n        ContainerDescription.expandButtonRectRatio = 0.5;\n        ContainerDescription.expandButtonSignRatio = 0.3;\n        return ContainerDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.ContainerDescription = ContainerDescription;\n      /***/\n    },\n    /* 102 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics64 = function extendStatics(d, b) {\n          _extendStatics64 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics64(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics64(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangeShapeParametersHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeShapeParametersHistoryItem, _super);\n\n        function ChangeShapeParametersHistoryItem(shapeKey, parameters) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = shapeKey;\n          _this.parameters = parameters;\n          return _this;\n        }\n\n        ChangeShapeParametersHistoryItem.prototype.redo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          this.oldParameters = shape.parameters.clone();\n          manipulator.changeShapeParameters(shape, this.parameters);\n        };\n\n        ChangeShapeParametersHistoryItem.prototype.undo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          manipulator.changeShapeParameters(shape, this.oldParameters);\n        };\n\n        return ChangeShapeParametersHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeShapeParametersHistoryItem = ChangeShapeParametersHistoryItem;\n      /***/\n    },\n    /* 103 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics65 = function extendStatics(d, b) {\n          _extendStatics65 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics65(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics65(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangeStyleHistoryItemBase =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStyleHistoryItemBase, _super);\n\n        function ChangeStyleHistoryItemBase(itemKey, styleProperty, styleValue) {\n          var _this = _super.call(this) || this;\n\n          _this.itemKey = itemKey;\n          _this.styleProperty = styleProperty;\n          _this.styleValue = styleValue;\n          return _this;\n        }\n\n        ChangeStyleHistoryItemBase.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldStyleValue = item.style[this.styleProperty];\n          manipulator.changeStyle(item, this.styleProperty, this.styleValue);\n        };\n\n        ChangeStyleHistoryItemBase.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeStyle(item, this.styleProperty, this.oldStyleValue);\n        };\n\n        return ChangeStyleHistoryItemBase;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeStyleHistoryItemBase = ChangeStyleHistoryItemBase;\n      /***/\n    },\n    /* 104 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics66 = function extendStatics(d, b) {\n          _extendStatics66 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics66(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics66(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangeLockedHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeLockedHistoryItem, _super);\n\n        function ChangeLockedHistoryItem(item, locked) {\n          var _this = _super.call(this) || this;\n\n          _this.itemKey = item.key;\n          _this.locked = locked;\n          return _this;\n        }\n\n        ChangeLockedHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldLocked = item.locked;\n          manipulator.changeLocked(item, this.locked);\n        };\n\n        ChangeLockedHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeLocked(item, this.oldLocked);\n        };\n\n        return ChangeLockedHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeLockedHistoryItem = ChangeLockedHistoryItem;\n      /***/\n    },\n    /* 105 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics67 = function extendStatics(d, b) {\n          _extendStatics67 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics67(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics67(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(25);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ImageInfo_1 = __webpack_require__(40);\n\n      var ImporterBase_1 = __webpack_require__(106);\n\n      var ImportUtils_1 = __webpack_require__(71);\n\n      var __1 = __webpack_require__(8);\n\n      var Importer =\n      /** @class */\n      function (_super) {\n        __extends(Importer, _super);\n\n        function Importer(json) {\n          var _this = _super.call(this) || this;\n\n          _this.obj = ImportUtils_1.ImportUtils.parseJSON(json);\n          return _this;\n        }\n\n        Importer.prototype.getObject = function () {\n          return this.obj;\n        };\n\n        Importer.prototype.getPageObject = function (obj) {\n          return obj[\"page\"];\n        };\n\n        Importer.prototype.getShapeObjects = function (obj) {\n          return obj[\"shapes\"];\n        };\n\n        Importer.prototype.getConnectorObjects = function (obj) {\n          return obj[\"connectors\"];\n        };\n\n        Importer.prototype.importPageSettings = function (model, pageObj) {\n          if (!pageObj) return;\n          this.assert(pageObj[\"width\"], \"number\");\n          this.assert(pageObj[\"height\"], \"number\");\n          if (typeof pageObj[\"width\"] === \"number\") model.size.width = pageObj[\"width\"];\n          if (typeof pageObj[\"height\"] === \"number\") model.size.height = pageObj[\"height\"];\n          if (typeof pageObj[\"pageColor\"] === \"number\") model.pageColor = pageObj[\"pageColor\"];else if (typeof pageObj[\"pageColor\"] === \"string\") model.pageColor = __1.ColorHelper.stringToColor(pageObj[\"pageColor\"]);\n          if (typeof pageObj[\"pageWidth\"] === \"number\") model.pageSize.width = pageObj[\"pageWidth\"];\n          if (typeof pageObj[\"pageHeight\"] === \"number\") model.pageSize.height = pageObj[\"pageHeight\"];\n          if (typeof pageObj[\"pageLandscape\"] === \"boolean\") model.pageLandscape = pageObj[\"pageLandscape\"];\n          if (typeof pageObj[\"units\"] === \"number\") model.units = pageObj[\"units\"];\n        };\n\n        Importer.prototype.importShape = function (shapeObj) {\n          this.assert(shapeObj[\"key\"], \"string\");\n          this.assert(shapeObj[\"x\"], \"number\");\n          this.assert(shapeObj[\"y\"], \"number\");\n          this.assert(shapeObj[\"type\"], \"string\");\n          var shapeType = shapeObj[\"type\"];\n          var description = ShapeDescriptionManager_1.ShapeDescriptionManager.get(shapeType);\n          var position = new Utils_1.Point(shapeObj[\"x\"], shapeObj[\"y\"]);\n          var shape = new Shape_1.Shape(description || ShapeDescriptionManager_1.ShapeDescriptionManager.get(ShapeTypes_1.ShapeTypes.Rectangle), position);\n          shape.key = shapeObj[\"key\"];\n          if (typeof shapeObj[\"dataKey\"] === \"string\" || typeof shapeObj[\"dataKey\"] === \"number\") shape.dataKey = shapeObj[\"dataKey\"];\n          if (typeof shapeObj[\"locked\"] === \"boolean\") shape.locked = shapeObj[\"locked\"];\n          if (typeof shapeObj[\"width\"] === \"number\") shape.size.width = shapeObj[\"width\"];\n          if (typeof shapeObj[\"height\"] === \"number\") shape.size.height = shapeObj[\"height\"];\n          if (typeof shapeObj[\"text\"] === \"string\") shape.text = shapeObj[\"text\"];\n          if (typeof shapeObj[\"imageUrl\"] === \"string\") shape.image = new ImageInfo_1.ImageInfo(shapeObj[\"imageUrl\"]);\n\n          if (shapeObj[\"parameters\"]) {\n            shape.parameters.fromObject(shapeObj[\"parameters\"]);\n            shape.description.normalizeParameters(shape, shape.parameters);\n          }\n\n          if (shapeObj[\"style\"]) shape.style.fromObject(shapeObj[\"style\"]);\n          if (shapeObj[\"styleText\"]) shape.styleText.fromObject(shapeObj[\"styleText\"]);\n          if (typeof shapeObj[\"zIndex\"] === \"number\") shape.zIndex = shapeObj[\"zIndex\"];\n          if (Array.isArray(shapeObj[\"childKeys\"])) shape.childKeys = shapeObj[\"childKeys\"].slice();\n          if (typeof shapeObj[\"expanded\"] === \"boolean\") shape.expanded = shapeObj[\"expanded\"];\n          if (typeof shapeObj[\"expandedWidth\"] === \"number\" && typeof shapeObj[\"expandedHeight\"] === \"number\") shape.expandedSize = new Utils_1.Size(shapeObj[\"expandedWidth\"], shapeObj[\"expandedHeight\"]);\n          return shape;\n        };\n\n        Importer.prototype.importShapeChildren = function (shapeObj, shape) {\n          return [];\n        };\n\n        Importer.prototype.importConnector = function (connectorObj) {\n          var _this = this;\n\n          this.assert(connectorObj[\"key\"], \"string\");\n          if (!Array.isArray(connectorObj[\"points\"])) throw Error(\"Invalid Format\");\n          var points = connectorObj[\"points\"].map(function (pt) {\n            _this.assert(pt[\"x\"], \"number\");\n\n            _this.assert(pt[\"y\"], \"number\");\n\n            return new Utils_1.Point(pt[\"x\"], pt[\"y\"]);\n          });\n          var connector = new Connector_1.Connector(points);\n          connector.key = connectorObj[\"key\"];\n          if (typeof connectorObj[\"dataKey\"] === \"string\" || typeof connectorObj[\"dataKey\"] === \"number\") connector.dataKey = connectorObj[\"dataKey\"];\n          if (typeof connectorObj[\"locked\"] === \"boolean\") connector.locked = connectorObj[\"locked\"];\n          connector.endConnectionPointIndex = typeof connectorObj[\"endConnectionPointIndex\"] === \"number\" ? connectorObj[\"endConnectionPointIndex\"] : -1;\n          connector.beginConnectionPointIndex = typeof connectorObj[\"beginConnectionPointIndex\"] === \"number\" ? connectorObj[\"beginConnectionPointIndex\"] : -1;\n          if (connectorObj[\"endItemKey\"] !== undefined) this.assert(connectorObj[\"endItemKey\"], \"string\");\n          if (connectorObj[\"beginItemKey\"] !== undefined) this.assert(connectorObj[\"beginItemKey\"], \"string\");\n          connector[\"endItemKey\"] = connectorObj[\"endItemKey\"];\n          connector[\"beginItemKey\"] = connectorObj[\"beginItemKey\"];\n          if (connectorObj[\"texts\"]) connector.texts.fromObject(connectorObj[\"texts\"]);\n          if (connectorObj[\"properties\"]) connector.properties.fromObject(connectorObj[\"properties\"]);\n          if (connectorObj[\"style\"]) connector.style.fromObject(connectorObj[\"style\"]);\n          if (connectorObj[\"styleText\"]) connector.styleText.fromObject(connectorObj[\"styleText\"]);\n          if (typeof connectorObj[\"zIndex\"] === \"number\") connector.zIndex = connectorObj[\"zIndex\"];\n          return connector;\n        };\n\n        return Importer;\n      }(ImporterBase_1.ImporterBase);\n\n      exports.Importer = Importer;\n      /***/\n    },\n    /* 106 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Model_1 = __webpack_require__(19);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var ImporterBase =\n      /** @class */\n      function () {\n        function ImporterBase() {}\n\n        ImporterBase.prototype.import = function () {\n          var model = new Model_1.DiagramModel();\n          var obj = this.getObject();\n          this.importPageSettings(model, this.getPageObject(obj));\n          var shapes = this.importShapes(this.getShapeObjects(obj));\n\n          for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            if (model.findItem(shape.key)) throw Error(\"Item key is duplicated\");\n            model.pushItem(shape);\n          }\n\n          var connectors = this.importConnectors(this.getConnectorObjects(obj));\n\n          for (var i = 0; i < connectors.length; i++) {\n            var connector = connectors[i];\n            connector.endItem = model.findItem(connector[\"endItemKey\"]) || undefined;\n            delete connector[\"endItemKey\"];\n            connector.beginItem = model.findItem(connector[\"beginItemKey\"]) || undefined;\n            delete connector[\"beginItemKey\"];\n            if (model.findItem(connector.key)) throw Error(\"Item key is duplicated\");\n            model.pushItem(connector);\n            this.updateConnections(connector);\n          }\n\n          model.items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) {\n              item.childKeys.forEach(function (childKey) {\n                var child = model.findItem(childKey);\n\n                if (child) {\n                  child.container = item;\n                  child.containerLocked = item.locked;\n                }\n              });\n            }\n          });\n          return model;\n        };\n\n        ImporterBase.prototype.importItems = function (model) {\n          var result = [];\n          var obj = this.getObject();\n          var itemHash = {};\n          var shapes = this.importShapes(this.getShapeObjects(obj));\n          var key;\n\n          for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            var oldKey = shape.key;\n            key = model.getNextKey(key);\n            shape.key = key;\n            itemHash[oldKey] = shape;\n            result.push(shape);\n          }\n\n          var connectors = this.importConnectors(this.getConnectorObjects(obj));\n\n          for (var i = 0; i < connectors.length; i++) {\n            var connector = connectors[i];\n            var oldKey = connector.key;\n            key = model.getNextKey(key);\n            connector.key = key;\n            itemHash[oldKey] = connector;\n            var endItemKey = connector[\"endItemKey\"];\n            connector.endItem = itemHash[endItemKey];\n            delete connector[\"endItemKey\"];\n            var beginItemKey = connector[\"beginItemKey\"];\n            connector.beginItem = itemHash[beginItemKey];\n            delete connector[\"beginItemKey\"];\n            result.push(connector);\n            this.updateConnections(connector);\n          }\n\n          result.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) {\n              item.childKeys.forEach(function (childKey) {\n                var child = itemHash[childKey];\n\n                if (child) {\n                  child.container = item;\n                  child.containerLocked = item.locked;\n                }\n              });\n              item.childKeys = item.childKeys.map(function (childKey) {\n                return itemHash[childKey] && itemHash[childKey].key;\n              }).filter(function (childKey) {\n                return childKey;\n              });\n            }\n          });\n          return result;\n        };\n\n        ImporterBase.prototype.importItemsData = function (model) {\n          var obj = this.getObject();\n          var shapes = this.importShapes(this.getShapeObjects(obj));\n\n          for (var i = 0; i < shapes.length; i++) {\n            var srcShape = shapes[i];\n            var destShape = void 0;\n            if (srcShape.dataKey !== undefined) destShape = model.findShapeByDataKey(srcShape.dataKey);\n            if (!destShape) destShape = model.findShape(srcShape.key);\n\n            if (destShape) {\n              destShape.dataKey = srcShape.dataKey;\n              destShape.locked = srcShape.locked;\n              destShape.position = srcShape.position.clone();\n              destShape.expanded = srcShape.expanded;\n              if (srcShape.expandedSize) destShape.expandedSize = srcShape.expandedSize.clone();\n              destShape.size = srcShape.size.clone();\n              destShape.parameters = srcShape.parameters.clone();\n              destShape.style = srcShape.style.clone();\n              destShape.styleText = srcShape.styleText.clone();\n              destShape.zIndex = srcShape.zIndex;\n              destShape.text = srcShape.text;\n              destShape.description = srcShape.description;\n              destShape.image = srcShape.image.clone();\n            }\n          }\n\n          var connectors = this.importConnectors(this.getConnectorObjects(obj));\n\n          for (var i = 0; i < connectors.length; i++) {\n            var srcConnector = connectors[i];\n            var destConnector = void 0;\n            if (srcConnector.dataKey !== undefined) destConnector = model.findConnectorByDataKey(srcConnector.dataKey);\n            if (!destConnector) destConnector = model.findConnector(srcConnector.key);\n\n            if (destConnector) {\n              destConnector.dataKey = srcConnector.dataKey;\n              destConnector.locked = srcConnector.locked;\n              destConnector.points = srcConnector.points.slice();\n              destConnector.properties = srcConnector.properties.clone();\n              destConnector.style = srcConnector.style.clone();\n              destConnector.endConnectionPointIndex = srcConnector.endConnectionPointIndex;\n              destConnector.beginConnectionPointIndex = srcConnector.beginConnectionPointIndex;\n              destConnector.texts = srcConnector.texts.clone();\n              destConnector.styleText = srcConnector.styleText.clone();\n              destConnector.zIndex = srcConnector.zIndex;\n            }\n          }\n        };\n\n        ImporterBase.prototype.importShapes = function (shapeObjs) {\n          var result = [];\n          if (!shapeObjs) return result;\n          if (!Array.isArray(shapeObjs)) throw Error(\"Invalid Format\");\n\n          for (var i = 0; i < shapeObjs.length; i++) {\n            var shapeObj = shapeObjs[i];\n            var shape = this.importShape(shapeObj);\n            result.push(shape);\n            result = result.concat(this.importShapeChildren(shapeObj, shape));\n          }\n\n          return result;\n        };\n\n        ImporterBase.prototype.importConnectors = function (connectorObjs) {\n          var result = [];\n          if (!connectorObjs) return result;\n          if (!Array.isArray(connectorObjs)) throw Error(\"Invalid Format\");\n\n          for (var i = 0; i < connectorObjs.length; i++) {\n            var shapeObj = connectorObjs[i];\n            result.push(this.importConnector(shapeObj));\n          }\n\n          return result;\n        };\n\n        ImporterBase.prototype.updateConnections = function (connector) {\n          if (connector.endItem) {\n            if (connector.endItem instanceof Shape_1.Shape) {\n              connector.endItem.attachedConnectors.push(connector);\n              connector.points[connector.points.length - 1] = connector.endItem.getConnectionPointPosition(connector.endConnectionPointIndex, connector.points[connector.points.length - 2]);\n            } else {\n              connector.endItem = undefined;\n              connector.endConnectionPointIndex = -1;\n            }\n          }\n\n          if (connector.beginItem) {\n            if (connector.beginItem instanceof Shape_1.Shape) {\n              connector.beginItem.attachedConnectors.push(connector);\n              connector.points[0] = connector.beginItem.getConnectionPointPosition(connector.beginConnectionPointIndex, connector.points[1]);\n            } else {\n              connector.beginItem = undefined;\n              connector.beginConnectionPointIndex = -1;\n            }\n          }\n        };\n\n        ImporterBase.prototype.assert = function (value, type) {\n          if (value === undefined) throw Error(\"Invalid Format\");\n          if (type !== undefined && typeof value !== type) throw Error(\"Invalid Format\");\n        };\n\n        return ImporterBase;\n      }();\n\n      exports.ImporterBase = ImporterBase;\n      /***/\n    },\n    /* 107 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics68 = function extendStatics(d, b) {\n          _extendStatics68 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics68(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics68(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var StylePropertyCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(StylePropertyCommandBase, _super);\n\n        function StylePropertyCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        return StylePropertyCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.StylePropertyCommandBase = StylePropertyCommandBase;\n      /***/\n    },\n    /* 108 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics69 = function extendStatics(d, b) {\n          _extendStatics69 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics69(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics69(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var StylePropertyCommandBase_1 = __webpack_require__(107);\n\n      var ChangeStylePropertyCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStylePropertyCommandBase, _super);\n\n        function ChangeStylePropertyCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeStylePropertyCommandBase.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var items = this.control.selection.getSelectedItems();\n          parameter = this.processParameter(parameter);\n          items.forEach(function (item) {\n            var styleProperty = _this.getStyleProperty();\n\n            _this.control.history.addAndRedo(_this.createHistoryItem(item, styleProperty, parameter));\n          });\n          this.updateInputPosition(parameter);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        ChangeStylePropertyCommandBase.prototype.getDefaultValue = function () {\n          return this.getDefaultStyleObj()[this.getStyleProperty()];\n        };\n\n        ChangeStylePropertyCommandBase.prototype.processParameter = function (parameter) {\n          return parameter;\n        };\n\n        return ChangeStylePropertyCommandBase;\n      }(StylePropertyCommandBase_1.StylePropertyCommandBase);\n\n      exports.ChangeStylePropertyCommandBase = ChangeStylePropertyCommandBase;\n      /***/\n    },\n    /* 109 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics70 = function extendStatics(d, b) {\n          _extendStatics70 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics70(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics70(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeStylePropertyCommandBase_1 = __webpack_require__(108);\n\n      var ChangeStyleHistoryItem_1 = __webpack_require__(46);\n\n      var Style_1 = __webpack_require__(27);\n\n      var ChangeStylePropertyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStylePropertyCommand, _super);\n\n        function ChangeStylePropertyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeStylePropertyCommand.prototype.getValue = function () {\n          return this.control.selection.inputPosition.getStylePropertyValue(this.getStyleProperty());\n        };\n\n        ChangeStylePropertyCommand.prototype.getStyleObj = function (item) {\n          return item.style;\n        };\n\n        ChangeStylePropertyCommand.prototype.getDefaultStyleObj = function () {\n          return new Style_1.Style();\n        };\n\n        ChangeStylePropertyCommand.prototype.createHistoryItem = function (item, styleProperty, styleValue) {\n          return new ChangeStyleHistoryItem_1.ChangeStyleHistoryItem(item.key, styleProperty, styleValue);\n        };\n\n        ChangeStylePropertyCommand.prototype.updateInputPosition = function (value) {\n          this.control.selection.inputPosition.setStylePropertyValue(this.getStyleProperty(), value);\n        };\n\n        return ChangeStylePropertyCommand;\n      }(ChangeStylePropertyCommandBase_1.ChangeStylePropertyCommandBase);\n\n      exports.ChangeStylePropertyCommand = ChangeStylePropertyCommand;\n      /***/\n    },\n    /* 110 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics71 = function extendStatics(d, b) {\n          _extendStatics71 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics71(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics71(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeConnectorPropertyHistoryItem_1 = __webpack_require__(55);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ChangeConnectorPropertyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorPropertyCommand, _super);\n\n        function ChangeConnectorPropertyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeConnectorPropertyCommand.prototype.getValue = function () {\n          return this.control.selection.inputPosition.getConnectorPropertyValue(this.getPropertyName());\n        };\n\n        ChangeConnectorPropertyCommand.prototype.getDefaultValue = function () {\n          return this.getPropertyDefaultValue();\n        };\n\n        ChangeConnectorPropertyCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var connectors = this.control.selection.getSelectedConnectors();\n          connectors.forEach(function (connector) {\n            var propertyName = _this.getPropertyName();\n\n            _this.control.history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(connector.key, propertyName, parameter));\n          });\n          this.control.selection.inputPosition.setConnectorPropertyValue(this.getPropertyName(), parameter);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        return ChangeConnectorPropertyCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeConnectorPropertyCommand = ChangeConnectorPropertyCommand;\n      /***/\n    },\n    /* 111 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var NodeLayout_1 = __webpack_require__(56);\n\n      var GraphLayout =\n      /** @class */\n      function () {\n        function GraphLayout() {\n          this.nodeKeys = [];\n          this.nodeToLayout = {};\n          this.edgeToPosition = {};\n        }\n\n        GraphLayout.prototype.forEachNode = function (callback) {\n          var _this = this;\n\n          this.nodeKeys.forEach(function (nk) {\n            return callback(_this.nodeToLayout[nk], nk);\n          });\n        };\n\n        GraphLayout.prototype.addNode = function (nodeLayout) {\n          if (this.nodeToLayout[nodeLayout.key]) throw Error(\"Node layout is already registered\");\n          this.nodeKeys.push(nodeLayout.key);\n          this.nodeToLayout[nodeLayout.key] = nodeLayout;\n        };\n\n        GraphLayout.prototype.addEdge = function (edgeLayout) {\n          if (this.edgeToPosition[edgeLayout.key]) throw Error(\"Edge layout is already registered\");\n          this.edgeToPosition[edgeLayout.key] = edgeLayout;\n        };\n\n        GraphLayout.prototype.getRectangle = function (includeMargins) {\n          var _this = this;\n\n          return Utils_1.GeometryUtils.getCommonRectangle(this.nodeKeys.map(function (nk) {\n            return _this.nodeToLayout[nk].rectangle;\n          }));\n        };\n\n        GraphLayout.prototype.offsetNodes = function (deltaX, deltaY) {\n          var _this = this;\n\n          if (deltaX === void 0) {\n            deltaX = 0;\n          }\n\n          if (deltaY === void 0) {\n            deltaY = 0;\n          }\n\n          var layout = new GraphLayout();\n          this.nodeKeys.forEach(function (nk) {\n            var nl = _this.nodeToLayout[nk];\n            layout.addNode(new NodeLayout_1.NodeLayout(nl.info, nl.position.offset(deltaX, deltaY)));\n          });\n          layout.copyEdges(this);\n          return layout;\n        };\n\n        GraphLayout.prototype.extend = function (layout) {\n          var _this = this;\n\n          layout.forEachNode(function (nl) {\n            return _this.addNode(nl);\n          });\n          this.copyEdges(layout);\n        };\n\n        GraphLayout.prototype.copyEdges = function (source) {\n          var _this = this;\n\n          Object.keys(source.edgeToPosition).forEach(function (e) {\n            var edge = source.edgeToPosition[e];\n\n            _this.addEdge(new NodeLayout_1.EdgeLayout(edge.key, edge.beginIndex, edge.endIndex));\n          });\n        };\n\n        return GraphLayout;\n      }();\n\n      exports.GraphLayout = GraphLayout;\n      /***/\n    },\n    /* 112 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var LayoutSettings_1 = __webpack_require__(22);\n\n      var LayoutBuilder =\n      /** @class */\n      function () {\n        function LayoutBuilder(settings, graph) {\n          this.settings = settings;\n          this.graph = graph;\n        }\n\n        LayoutBuilder.prototype.getBreadthNodeSizeCore = function (node) {\n          return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? node.size.width + node.margin.left + node.margin.right : node.size.height + node.margin.top + node.margin.bottom;\n        };\n\n        LayoutBuilder.prototype.getDepthNodeSizeCore = function (node) {\n          return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal ? node.size.width + node.margin.left + node.margin.right : node.size.height + node.margin.top + node.margin.bottom;\n        };\n\n        LayoutBuilder.prototype.chooseDirectionValue = function (near, far) {\n          return this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward ? near : far;\n        };\n\n        LayoutBuilder.prototype.getDirectionValue = function (value) {\n          return this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward ? value : -value;\n        };\n\n        LayoutBuilder.prototype.getComponentOffset = function (graphLayout) {\n          var rect = graphLayout.getRectangle(true);\n          var offset = this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? rect.width : rect.height;\n          return offset + this.settings.componentSpacing;\n        };\n\n        LayoutBuilder.prototype.setComponentOffset = function (graphLayout, offset) {\n          return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? graphLayout.offsetNodes(offset) : graphLayout.offsetNodes(0, offset);\n        };\n\n        return LayoutBuilder;\n      }();\n\n      exports.LayoutBuilder = LayoutBuilder;\n      /***/\n    },\n    /* 113 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Graph_1 = __webpack_require__(53);\n\n      var Structures_1 = __webpack_require__(31);\n\n      var ListUtils_1 = __webpack_require__(70);\n\n      var CycleRemover =\n      /** @class */\n      function () {\n        function CycleRemover() {}\n\n        CycleRemover.removeCycles = function (graph) {\n          var feedbackSet = this.getFeedbackSet(graph);\n          return this.reverseEdges(graph, feedbackSet);\n        };\n\n        CycleRemover.getFeedbackSet = function (graph) {\n          var _this = this;\n\n          var feedbackSet = {};\n          var nonTrivialStronglyConnectedComponents = this.getNonTrivialStronglyConnectedComponents(graph);\n\n          while (nonTrivialStronglyConnectedComponents.length) {\n            nonTrivialStronglyConnectedComponents.forEach(function (g) {\n              var maxCyclicEdges = _this.getMaxCyclicEdges(g);\n\n              maxCyclicEdges.forEach(function (e) {\n                return delete feedbackSet[e.reverse().getHashKey()];\n              });\n              maxCyclicEdges.forEach(function (e) {\n                return feedbackSet[e.getHashKey()] = true;\n              });\n            });\n            nonTrivialStronglyConnectedComponents = this.getNonTrivialStronglyConnectedComponents(this.reverseEdges(graph, feedbackSet).graph);\n          }\n\n          return feedbackSet;\n        };\n\n        CycleRemover.getMaxCyclicEdges = function (graph) {\n          var black = {};\n          var gray = {};\n          var edgeCycleCount = {};\n          var visitedEdges = [];\n          var cycles = [];\n          var iterator = graph.createIterator(Structures_1.ConnectionMode.Outgoing);\n          iterator.visitEachEdgeOnce = false;\n\n          iterator.onNode = function (n) {\n            gray[n.key] = true;\n          };\n\n          iterator.skipNode = function (n) {\n            if (gray[n.key]) {\n              var cycle = [];\n\n              for (var i = 0; i < visitedEdges.length; i++) {\n                var e = visitedEdges[i];\n                if (edgeCycleCount[e.key] === undefined) edgeCycleCount[e.key] = 0;\n                edgeCycleCount[e.key]++;\n                cycle.push(e);\n                if (e.from === n.key) break;\n              }\n\n              cycles.push(cycle);\n            }\n\n            return gray[n.key] || black[n.key];\n          };\n\n          iterator.skipEdge = function (e) {\n            return false;\n          };\n\n          iterator.onEdge = function (e) {\n            visitedEdges.splice(0, 0, e);\n          };\n\n          iterator.onAfterEdge = function (e) {\n            visitedEdges.splice(0, 1);\n          };\n\n          iterator.onAllEdges = function (e) {\n            black[e.key] = true;\n            gray[e.key] = false;\n          };\n\n          iterator.iterate(graph.nodes[0]);\n          var edgeSet = new ListUtils_1.HashSet([], function (e) {\n            return e.key;\n          });\n          cycles.forEach(function (c) {\n            edgeSet.tryPush(c.reduce(function (max, curr) {\n              return edgeCycleCount[curr.key] > edgeCycleCount[max.key] ? curr : max;\n            }, c[0]));\n          });\n          return edgeSet.list();\n        };\n\n        CycleRemover.reverseEdges = function (graph, feedbackSet) {\n          var edges = new ListUtils_1.HashSet([], function (e) {\n            return e.getHashKey();\n          });\n          var reversedEdges = {};\n          var removedEdges = {};\n          graph.edges.forEach(function (e) {\n            if (feedbackSet[e.getHashKey()]) {\n              e = e.reverse();\n              reversedEdges[e.key] = true;\n            }\n\n            if (!edges.tryPush(e)) {\n              removedEdges[e.key] = true;\n              delete reversedEdges[e.key];\n            }\n          });\n          return {\n            graph: new Graph_1.Graph(graph.nodes.map(function (n) {\n              return graph.getNode(n);\n            }), edges.list()),\n            reversedEdges: reversedEdges,\n            removedEdges: removedEdges\n          };\n        };\n\n        CycleRemover.getNonTrivialStronglyConnectedComponents = function (graph) {\n          return this.getStronglyConnectedComponents(graph).filter(function (g) {\n            return g.edges.length;\n          });\n        };\n\n        CycleRemover.getStronglyConnectedComponents = function (graph) {\n          var _this = this; // Tarjan algorithm\n          // https://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm\n\n\n          var nodesStack = [];\n          var index = 0;\n          var lowIndex = {};\n          var lowLink = {};\n          var onStack = {};\n          var components = [];\n          var visitedNodes = {};\n\n          for (var i = 0; i < graph.nodes.length; i++) {\n            var nodeKey = graph.nodes[i];\n            var iterator = graph.createIterator(Structures_1.ConnectionMode.Outgoing);\n            iterator.visitEachEdgeOnce = false;\n            iterator.visitEachNodeOnce = false;\n\n            iterator.onNode = function (n) {\n              visitedNodes[n.key] = true;\n              nodesStack.push(n);\n              onStack[n.key] = true;\n              lowLink[n.key] = index;\n              lowIndex[n.key] = index;\n              index++;\n            };\n\n            iterator.skipNode = function (n) {\n              return visitedNodes[n.key];\n            };\n\n            iterator.skipEdge = function (e) {\n              var isVisited = visitedNodes[e.to];\n              if (isVisited && onStack[e.to]) lowLink[e.from] = Math.min(lowLink[e.from], lowIndex[e.to]);\n              return isVisited;\n            };\n\n            iterator.onAfterEdge = function (e) {\n              lowLink[e.from] = Math.min(lowLink[e.from], lowLink[e.to]);\n            };\n\n            iterator.onAllEdges = function (n, outgoing) {\n              if (outgoing && lowLink[n.key] === lowIndex[n.key]) components.push(_this.getStronglyConnectedComponent(graph, n, nodesStack, onStack));\n            };\n\n            iterator.iterate(nodeKey);\n          }\n\n          return components;\n        };\n\n        CycleRemover.getStronglyConnectedComponent = function (graph, root, nodesStack, onStack) {\n          var itemsMap = {};\n          var nodes = [];\n          var edges = [];\n          var topStackNode;\n\n          do {\n            topStackNode = nodesStack.pop();\n            if (!itemsMap[topStackNode.key]) nodes.push(topStackNode);\n            itemsMap[topStackNode.key] = true;\n            onStack[topStackNode.key] = false;\n          } while (topStackNode !== root);\n\n          nodes.forEach(function (n) {\n            var aEdges = graph.getAdjacentEdges(n.key, Structures_1.ConnectionMode.Outgoing);\n            edges.push.apply(edges, aEdges.filter(function (e) {\n              return !itemsMap[e.key] && itemsMap[e.to];\n            }));\n            aEdges.forEach(function (e) {\n              return itemsMap[e.key] = true;\n            });\n          });\n          return new Graph_1.Graph(nodes, edges);\n        };\n\n        return CycleRemover;\n      }();\n\n      exports.CycleRemover = CycleRemover;\n      /***/\n    },\n    /* 114 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics72 = function extendStatics(d, b) {\n          _extendStatics72 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics72(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics72(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ClipboardCommand_1 = __webpack_require__(75);\n\n      var Importer_1 = __webpack_require__(105);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var ImportShapeHistoryItem_1 = __webpack_require__(230);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var ImportConnectorHistoryItem_1 = __webpack_require__(231);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var SetSelectionHistoryItem_1 = __webpack_require__(44);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var PasteSelectionCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(PasteSelectionCommandBase, _super);\n\n        function PasteSelectionCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        PasteSelectionCommandBase.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && (this.isPasteSupportedByBrowser() || ClipboardCommand_1.ClipboardCommand.clipboardData !== undefined);\n        };\n\n        PasteSelectionCommandBase.prototype.isVisible = function () {\n          return this.isPasteSupportedByBrowser() || ClipboardCommand_1.ClipboardCommand.clipboardData !== undefined;\n        };\n\n        PasteSelectionCommandBase.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.getClipboardData(function (data) {\n            _this.performPaste(data, parameter);\n          });\n          return true;\n        };\n\n        PasteSelectionCommandBase.prototype.performPaste = function (data, parameter) {\n          this.control.beginUpdate(true);\n          this.control.history.beginTransaction();\n          var ids = [];\n          var importer = new Importer_1.Importer(data);\n          var items = importer.importItems(this.control.model);\n          this.calculateSelectionOffset(items, parameter);\n\n          for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n\n            if (item instanceof Shape_1.Shape) {\n              item.position = this.getShapeNewPosition(item.position);\n              this.control.history.addAndRedo(new ImportShapeHistoryItem_1.ImportShapeHistoryItem(item));\n            } else if (item instanceof Connector_1.Connector) {\n              this.changeConnectorPoints(item);\n              this.control.history.addAndRedo(new ImportConnectorHistoryItem_1.ImportConnectorHistoryItem(item));\n            }\n\n            var containerKey = item.container && item.container.key;\n            if (!containerKey || ids.indexOf(containerKey) === -1) ids.push(item.key);\n          }\n\n          ModelUtils_1.ModelUtils.tryUpdateModelSize(this.control.history, this.control.model);\n          this.control.history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(this.control.selection, ids));\n          this.control.history.endTransaction();\n          this.control.endUpdate(true);\n        };\n\n        PasteSelectionCommandBase.prototype.calculateSelectionOffset = function (items, position) {};\n\n        PasteSelectionCommandBase.getShapeNewPosition = function (model, position) {\n          while (model.findShapeAtPosition(position)) {\n            position = position.offset(PasteSelectionCommandBase.positionOffset, PasteSelectionCommandBase.positionOffset);\n          }\n\n          return position;\n        };\n\n        PasteSelectionCommandBase.changeConnectorPoints = function (model, connector) {\n          while (model.findConnectorAtPoints(connector.points)) {\n            connector.points.forEach(function (pt) {\n              pt.x += PasteSelectionCommandBase.positionOffset;\n              pt.y += PasteSelectionCommandBase.positionOffset;\n            });\n          }\n        };\n\n        PasteSelectionCommandBase.positionOffset = UnitConverter_1.UnitConverter.pixelsToTwips(10);\n        return PasteSelectionCommandBase;\n      }(ClipboardCommand_1.ClipboardCommand);\n\n      exports.PasteSelectionCommandBase = PasteSelectionCommandBase;\n      /***/\n    },\n    /* 115 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var LayoutSettings_1 = __webpack_require__(22);\n\n      var WideTree_1 = __webpack_require__(73);\n\n      var Sugiyama_1 = __webpack_require__(61);\n\n      var DataLayoutType;\n\n      (function (DataLayoutType) {\n        DataLayoutType[DataLayoutType[\"Tree\"] = 0] = \"Tree\";\n        DataLayoutType[DataLayoutType[\"Sugiyama\"] = 1] = \"Sugiyama\";\n      })(DataLayoutType = exports.DataLayoutType || (exports.DataLayoutType = {}));\n\n      var DataLayoutParameters =\n      /** @class */\n      function () {\n        function DataLayoutParameters(parameter) {\n          this.layoutType = parameter !== undefined && parameter.type || DataLayoutType.Tree;\n          this.layoutSettings = this.layoutType === DataLayoutType.Sugiyama ? new LayoutSettings_1.LayoutSettings() : new LayoutSettings_1.TreeLayoutSettings();\n          if (parameter !== undefined && parameter.orientation !== undefined) this.layoutSettings.orientation = parameter.orientation;\n        }\n\n        DataLayoutParameters.prototype.getLayoutBuilder = function (graph) {\n          return this.layoutType === DataLayoutType.Tree ? new WideTree_1.TreeLayoutBuilder(this.layoutSettings, graph) : new Sugiyama_1.SugiyamaLayoutBuilder(this.layoutSettings, graph);\n        };\n\n        return DataLayoutParameters;\n      }();\n\n      exports.DataLayoutParameters = DataLayoutParameters;\n      /***/\n    },\n    /* 116 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics73 = function extendStatics(d, b) {\n          _extendStatics73 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics73(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics73(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ChangeLockedCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeLockedCommand, _super);\n\n        function ChangeLockedCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeLockedCommand.prototype.isEnabled = function () {\n          var _this = this;\n\n          var items = this.control.selection.getSelectedItems(true);\n          var enabled = false;\n          items.forEach(function (item) {\n            if (item.locked !== _this.getLockState()) enabled = true;\n          });\n          return _super.prototype.isEnabled.call(this) && enabled;\n        };\n\n        ChangeLockedCommand.prototype.executeCore = function (state, parameter) {\n          ModelUtils_1.ModelUtils.changeSelectionLocked(this.control.history, this.control.model, this.control.selection, this.getLockState());\n          return true;\n        };\n\n        return ChangeLockedCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeLockedCommand = ChangeLockedCommand;\n      /***/\n    },\n    /* 117 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics74 = function extendStatics(d, b) {\n          _extendStatics74 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics74(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics74(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ImageInfo_1 = __webpack_require__(40);\n\n      var ChangeShapeImageHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeShapeImageHistoryItem, _super);\n\n        function ChangeShapeImageHistoryItem(item, imageUrl) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = item.key;\n          _this.imageUrl = imageUrl;\n          return _this;\n        }\n\n        ChangeShapeImageHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findShape(this.shapeKey);\n          this.oldImage = item.image;\n          manipulator.changeShapeImage(item, new ImageInfo_1.ImageInfo(this.imageUrl));\n        };\n\n        ChangeShapeImageHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findShape(this.shapeKey);\n          manipulator.changeShapeImage(item, this.oldImage);\n        };\n\n        return ChangeShapeImageHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeShapeImageHistoryItem = ChangeShapeImageHistoryItem;\n      /***/\n    },\n    /* 118 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics75 = function extendStatics(d, b) {\n          _extendStatics75 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics75(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics75(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Event_1 = __webpack_require__(10);\n\n      var MouseHandlerMoveConnectorPointState_1 = __webpack_require__(265);\n\n      var MouseHandlerResizeShapeState_1 = __webpack_require__(266);\n\n      var MouseHandlerMoveConnectorSideState_1 = __webpack_require__(267);\n\n      var MouseHandlerDragParameterPointState_1 = __webpack_require__(268);\n\n      var MouseHandlerCreateConnectorState_1 = __webpack_require__(269);\n\n      var MouseHandlerMoveConnectorOrthogonalSideState_1 = __webpack_require__(270);\n\n      var MouseHandlerToolboxDraggingState_1 = __webpack_require__(271);\n\n      var MouseHandlerMoveConnectorTextState_1 = __webpack_require__(272);\n\n      var MouseHandlerMoveClonedShapeState_1 = __webpack_require__(78);\n\n      var MouseHandlerDefaultStateBase_1 = __webpack_require__(122);\n\n      var MouseHandlerMoveShapeState_1 = __webpack_require__(278);\n\n      var MouseHandlerDefaultState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDefaultState, _super);\n\n        function MouseHandlerDefaultState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerDefaultState.prototype.finish = function () {\n          this.visualizerManager.resetConnectionPoints();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerDefaultState.prototype.onMouseDownCore = function (evt) {\n          if (evt.source.type === Event_1.MouseEventElementType.ConnectorText) {\n            var connectorKey = evt.source.key;\n            this.modifySelection(evt, connectorKey);\n            this.handler.switchState(new MouseHandlerMoveConnectorTextState_1.MouseHandlerMoveConnectorTextState(this.handler, this.history, this.model));\n          } else if (evt.source.type === Event_1.MouseEventElementType.ShapeResizeBox) this.handler.switchState(new MouseHandlerResizeShapeState_1.MouseHandlerResizeShapeState(this.handler, this.history, this.model, this.selection, this.visualizerManager));else if (evt.source.type === Event_1.MouseEventElementType.ShapeParameterBox) this.handler.switchState(new MouseHandlerDragParameterPointState_1.MouseHandlerDragParameterPointState(this.handler, this.history, this.model));else if (evt.source.type === Event_1.MouseEventElementType.ConnectorPoint) this.handler.switchState(new MouseHandlerMoveConnectorPointState_1.MouseHandlerMoveConnectorPointState(this.handler, this.history, this.model, this.visualizerManager));else if (evt.source.type === Event_1.MouseEventElementType.ConnectorSide) this.handler.switchState(new MouseHandlerMoveConnectorSideState_1.MouseHandlerMoveConnectorSideState(this.handler, this.history, this.model));else if (evt.source.type === Event_1.MouseEventElementType.ConnectorOrthogonalSide) this.handler.switchState(new MouseHandlerMoveConnectorOrthogonalSideState_1.MouseHandlerMoveConnectorOrthogonalSideState(this.handler, this.history, this.model));else if (evt.source.type === Event_1.MouseEventElementType.ShapeConnectionPoint) this.handler.switchState(new MouseHandlerCreateConnectorState_1.MouseHandlerCreateConnectorState(this.handler, this.history, this.model, this.visualizerManager, this.selection));else _super.prototype.onMouseDownCore.call(this, evt);\n        };\n\n        MouseHandlerDefaultState.prototype.onShapeMouseDown = function (evt) {\n          var shapeKey = evt.source.key;\n\n          if (MouseHandlerMoveClonedShapeState_1.MouseHandlerMoveClonedShapeState.isMoveClonedShapeEvent(evt)) {\n            this.selection.add(shapeKey);\n            this.handler.switchToMoveClonedShapeState();\n          } else {\n            this.modifySelection(evt, shapeKey);\n            this.handler.switchState(new MouseHandlerMoveShapeState_1.MouseHandlerMoveShapeState(this.handler, this.history, this.model, this.selection, this.visualizerManager));\n          }\n\n          this.handler.state.onMouseDown(evt);\n        };\n\n        MouseHandlerDefaultState.prototype.onDragStart = function (evt) {\n          this.handler.switchState(new MouseHandlerToolboxDraggingState_1.MouseHandlerBeforeToolboxDraggingState(this.handler, this.history, this.model, this.selection, this.visualizerManager));\n          this.handler.state.onDragStart(evt);\n        };\n\n        MouseHandlerDefaultState.prototype.onMouseMoveCore = function (evt) {\n          this.updateConnectionsOnMouseMove(evt);\n\n          _super.prototype.onMouseMoveCore.call(this, evt);\n        };\n\n        MouseHandlerDefaultState.prototype.updateConnectionsOnMouseMove = function (evt) {\n          var item = this.model.findItem(evt.source.key);\n          this.visualizerManager.updateConnections(item, evt.source.type, evt.source.value);\n        };\n\n        MouseHandlerDefaultState.prototype.canDragObjectOnMouseDown = function (key) {\n          return true;\n        };\n\n        MouseHandlerDefaultState.prototype.canClearSelectionOnMouseDown = function () {\n          return false;\n        };\n\n        MouseHandlerDefaultState.prototype.processOnMouseMoveAfterLimit = function (evt) {\n          this.startSelection(evt);\n        };\n\n        MouseHandlerDefaultState.prototype.canSelectOnMouseUp = function (key) {\n          return true;\n        };\n\n        MouseHandlerDefaultState.prototype.canClearSelectionOnMouseUp = function () {\n          return true;\n        };\n\n        return MouseHandlerDefaultState;\n      }(MouseHandlerDefaultStateBase_1.MouseHandlerDefaultStateBase);\n\n      exports.MouseHandlerDefaultState = MouseHandlerDefaultState;\n      /***/\n    },\n    /* 119 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics76 = function extendStatics(d, b) {\n          _extendStatics76 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics76(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics76(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Connector_1 = __webpack_require__(5);\n\n      var Event_1 = __webpack_require__(10);\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(26);\n\n      var DeleteConnectionHistoryItem_1 = __webpack_require__(90);\n\n      var AddConnectionHistoryItem_1 = __webpack_require__(37);\n\n      var MoveConnectorPointHistoryItem_1 = __webpack_require__(50);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var MouseHandlerMoveConnectorPointStateBase =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorPointStateBase, _super);\n\n        function MouseHandlerMoveConnectorPointStateBase(handler, history, model, visualizerManager) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          _this.visualizerManager = visualizerManager;\n          return _this;\n        }\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.finish = function () {\n          this.visualizerManager.resetConnectionTarget();\n          this.visualizerManager.resetConnectionPoints();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.onMouseMove = function (evt) {\n          _super.prototype.onMouseMove.call(this, evt);\n\n          if (this.connector) {\n            var item = this.connector.getExtremeItem(this.pointPosition);\n            this.visualizerManager.setConnectionTarget(item, evt.source.type);\n            var pointIndex = this.connector.getExtremeConnectionPointIndex(this.pointPosition);\n            if (!item && this.oppositeConnectionPointIndex !== -1) item = this.model.findItem(evt.source.key);\n            this.visualizerManager.setConnectionPoints(item, evt.source.type, pointIndex, true);\n          }\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.onApplyChanges = function (evt) {\n          var point = this.getSnappedPoint(evt, evt.modelPoint);\n\n          if (this.pointPosition !== undefined) {\n            if (this.oppositePointPosition === undefined) {\n              this.oppositePointPosition = this.getOppositePointPosition();\n              this.oppositeItem = this.connector.getExtremeItem(this.oppositePointPosition);\n              this.oppositeConnectionPointIndex = this.connector.getExtremeConnectionPointIndex(this.oppositePointPosition);\n            }\n\n            var item = this.model.findItem(evt.source.key);\n            var connectionPointIndex = -1;\n            if (evt.source.type === Event_1.MouseEventElementType.ShapeConnectionPoint) connectionPointIndex = parseInt(evt.source.value);\n\n            if (item && !item.isLocked && (evt.source.type === Event_1.MouseEventElementType.Shape || evt.source.type === Event_1.MouseEventElementType.ShapeConnectionPoint) && (this.connector.getExtremeItem(this.oppositePointPosition) !== item || connectionPointIndex !== -1 && this.oppositeConnectionPointIndex !== -1 && connectionPointIndex !== this.oppositeConnectionPointIndex)) {\n              if (this.connector.getExtremeItem(this.pointPosition) !== item || this.connector.getExtremeConnectionPointIndex(this.pointPosition) !== connectionPointIndex) {\n                if (this.connector.getExtremeItem(this.pointPosition)) this.history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(this.connector, this.pointPosition));\n                this.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(this.connector, item, connectionPointIndex, this.pointPosition));\n                if (this.oppositeItem) this.updateOppositeItemConnectionPointIndex(connectionPointIndex);\n              }\n\n              point = item.getConnectionPointPosition(connectionPointIndex, this.connector.points[this.pointIndex + (this.pointPosition === Connector_1.ConnectorPosition.End ? -1 : 1)]);\n              this.visualizerManager.setConnectionPointIndex(connectionPointIndex);\n            } else if (this.connector.getExtremeItem(this.pointPosition)) {\n              this.history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(this.connector, this.pointPosition));\n              if (this.oppositeItem) this.updateOppositeItemConnectionPointIndex(this.oppositeConnectionPointIndex);\n            }\n          }\n\n          this.history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(this.connector.key, this.pointIndex, point));\n          ModelUtils_1.ModelUtils.updateConnectorAttachedPoints(this.history, this.model, this.connector);\n          this.handler.tryUpdateModelSize();\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.updateOppositeItemConnectionPointIndex = function (connectionPointIndex) {\n          this.history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(this.connector, this.oppositePointPosition));\n          this.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(this.connector, this.oppositeItem, connectionPointIndex === -1 ? -1 : this.oppositeConnectionPointIndex, this.oppositePointPosition));\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.onFinishWithChanges = function () {\n          ModelUtils_1.ModelUtils.updateConnectorContainer(this.history, this.model, this.connector);\n          ModelUtils_1.ModelUtils.removeUnnecessaryConnectorPoints(this.history, this.connector);\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.getDraggingElementKeys = function () {\n          return this.connector ? [this.connector.key] : [];\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.getOppositePointPosition = function () {\n          return this.pointPosition === Connector_1.ConnectorPosition.Begin ? Connector_1.ConnectorPosition.End : Connector_1.ConnectorPosition.Begin;\n        };\n\n        return MouseHandlerMoveConnectorPointStateBase;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerMoveConnectorPointStateBase = MouseHandlerMoveConnectorPointStateBase;\n      /***/\n    },\n    /* 120 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics77 = function extendStatics(d, b) {\n          _extendStatics77 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics77(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics77(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var AddConnectorPointHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(AddConnectorPointHistoryItem, _super);\n\n        function AddConnectorPointHistoryItem(connectorKey, pointIndex, point) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.pointIndex = pointIndex;\n          _this.point = point;\n          return _this;\n        }\n\n        AddConnectorPointHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.addConnectorPoint(connector, this.pointIndex, this.point.clone());\n        };\n\n        AddConnectorPointHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.deleteConnectorPoint(connector, this.pointIndex);\n        };\n\n        return AddConnectorPointHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.AddConnectorPointHistoryItem = AddConnectorPointHistoryItem;\n      /***/\n    },\n    /* 121 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics78 = function extendStatics(d, b) {\n          _extendStatics78 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics78(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics78(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Event_1 = __webpack_require__(10);\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(26);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var MouseHandlerMoveShapeStateBase =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveShapeStateBase, _super);\n\n        function MouseHandlerMoveShapeStateBase(handler, history, model, selection, visualizerManager) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          _this.startScrollLeft = 0;\n          _this.startScrollTop = 0;\n          return _this;\n        }\n\n        MouseHandlerMoveShapeStateBase.prototype.finish = function () {\n          this.visualizerManager.resetExtensionLines();\n          this.visualizerManager.resetContainerTarget();\n          this.visualizerManager.resetConnectionTarget();\n          this.visualizerManager.resetConnectionPoints();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerMoveShapeStateBase.prototype.onMouseDown = function (evt) {\n          this.startPoint = evt.modelPoint;\n          this.shapes = this.selection.getSelectedShapes(false, true);\n          this.connectors = this.selection.getSelectedConnectors(false, true);\n\n          if (this.shapes.length === 0) {\n            this.handler.switchToDefaultState();\n            return;\n          }\n\n          this.startShapePositions = this.shapes.map(function (shape) {\n            return shape.position.clone();\n          });\n          this.startConnectorPoints = this.connectors.map(function (c) {\n            return c.points.map(function (p) {\n              return p.clone();\n            });\n          });\n          this.connectorsWithoutBeginItemInfo = ModelUtils_1.ModelUtils.getConnectorsWithoutBeginItemInfo(this.model);\n          this.connectorsWithoutEndItemInfo = ModelUtils_1.ModelUtils.getConnectorsWithoutEndItemInfo(this.model);\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerMoveShapeStateBase.prototype.onMouseMove = function (evt) {\n          _super.prototype.onMouseMove.call(this, evt);\n\n          this.visualizerManager.setExtensionLines(this.selection.getSelectedShapes(false, true));\n          var container = ModelUtils_1.ModelUtils.findContainerByEventKey(this.model, this.selection, evt.source.key);\n          if (container && ModelUtils_1.ModelUtils.canInsertSelectionToContainer(this.model, this.selection, container)) this.visualizerManager.setContainerTarget(container, evt.source.type);else this.visualizerManager.resetContainerTarget();\n        };\n\n        MouseHandlerMoveShapeStateBase.prototype.onApplyChanges = function (evt) {\n          var _this = this;\n\n          this.shapes.forEach(function (shape, index) {\n            var pos = _this.getPosition(evt, _this.startShapePositions[index]);\n\n            ModelUtils_1.ModelUtils.setShapePosition(_this.history, _this.model, shape, pos);\n            ModelUtils_1.ModelUtils.updateMovingShapeConnections(_this.history, shape, _this.connectorsWithoutBeginItemInfo, _this.connectorsWithoutEndItemInfo, function () {\n              _this.visualizerManager.resetConnectionTarget();\n\n              _this.visualizerManager.resetConnectionPoints();\n            }, function (shape, connectionPointIndex) {\n              _this.visualizerManager.setConnectionTarget(shape, Event_1.MouseEventElementType.Shape);\n\n              _this.visualizerManager.setConnectionPoints(shape, Event_1.MouseEventElementType.Shape, connectionPointIndex, true);\n            });\n            ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(_this.history, _this.model, shape);\n          });\n          this.connectors.forEach(function (connector, index) {\n            var delta = _this.startShapePositions[0].offset(-_this.shapes[0].position.x, -_this.shapes[0].position.y);\n\n            if (delta.x !== 0 || delta.y !== 0) {\n              var startPtIndex = connector.beginItem ? 1 : 0;\n              var endPtIndex = connector.endItem ? connector.points.length - 2 : connector.points.length - 1;\n\n              for (var i = startPtIndex; i <= endPtIndex; i++) {\n                ModelUtils_1.ModelUtils.setConnectorPoint(_this.history, _this.model, connector, i, _this.startConnectorPoints[index][i].offset(-delta.x, -delta.y));\n              }\n            }\n          });\n          var container = ModelUtils_1.ModelUtils.findContainerByEventKey(this.model, this.selection, evt.source.key);\n          if (container && ModelUtils_1.ModelUtils.canInsertSelectionToContainer(this.model, this.selection, container)) ModelUtils_1.ModelUtils.insertSelectionToContainer(this.history, this.model, this.selection, container);else ModelUtils_1.ModelUtils.removeSelectionFromContainer(this.history, this.model, this.selection);\n          this.handler.tryUpdateModelSize(function (offsetLeft, offsetTop) {\n            _this.connectorsWithoutBeginItemInfo.forEach(function (pi) {\n              pi.point.x += offsetLeft;\n              pi.point.y += offsetTop;\n            });\n\n            _this.connectorsWithoutEndItemInfo.forEach(function (pi) {\n              pi.point.x += offsetLeft;\n              pi.point.y += offsetTop;\n            });\n          });\n        };\n\n        MouseHandlerMoveShapeStateBase.prototype.getDraggingElementKeys = function () {\n          return this.shapes.map(function (shape) {\n            return shape.key;\n          });\n        };\n\n        MouseHandlerMoveShapeStateBase.prototype.getXPosition = function (evt, baseX) {\n          return baseX + evt.modelPoint.x - this.startPoint.x;\n        };\n\n        MouseHandlerMoveShapeStateBase.prototype.getYPosition = function (evt, baseY) {\n          return baseY + evt.modelPoint.y - this.startPoint.y;\n        };\n\n        MouseHandlerMoveShapeStateBase.prototype.getPosition = function (evt, basePoint) {\n          return new Utils_1.Point(this.handler.getSnappedPos(evt, this.getXPosition(evt, basePoint.x), true), this.handler.getSnappedPos(evt, this.getYPosition(evt, basePoint.y), false));\n        };\n\n        return MouseHandlerMoveShapeStateBase;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerMoveShapeStateBase = MouseHandlerMoveShapeStateBase;\n      /***/\n    },\n    /* 122 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics79 = function extendStatics(d, b) {\n          _extendStatics79 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics79(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics79(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerStateBase_1 = __webpack_require__(32);\n\n      var Event_1 = __webpack_require__(10);\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var MouseHandlerToggleShapeExpandedState_1 = __webpack_require__(274);\n\n      var MouseHandlerSelectionState_1 = __webpack_require__(276);\n\n      var MouseHandlerZoomOnWheelState_1 = __webpack_require__(277);\n\n      var MouseHandlerScrollingState_1 = __webpack_require__(123);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var MouseHandlerDefaultStateBase =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDefaultStateBase, _super);\n\n        function MouseHandlerDefaultStateBase(handler, history, selection, model, view, visualizerManager, settings, bars) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.history = history;\n          _this.selection = selection;\n          _this.model = model;\n          _this.view = view;\n          _this.visualizerManager = visualizerManager;\n          _this.settings = settings;\n          _this.bars = bars;\n          return _this;\n        }\n\n        MouseHandlerDefaultStateBase.prototype.onMouseDown = function (evt) {\n          this.onMouseDownCore(evt);\n          if (this.handler.state !== this) this.handler.state.onMouseDown(evt);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseDownCore = function (evt) {\n          if (evt.modifiers === KeyCode_1.ModifierKey.Ctrl) this.startScrolling(evt);else if (evt.source.type === Event_1.MouseEventElementType.Shape && this.canDragObjectOnMouseDown(evt.source.key)) this.onShapeMouseDown(evt);else if (evt.source.type === Event_1.MouseEventElementType.Connector && this.canDragObjectOnMouseDown(evt.source.key)) this.onConnectorMouseDown(evt);else if (evt.source.type === Event_1.MouseEventElementType.ShapeExpandButton) this.onShapeExpandBtnMouseDown(evt);else {\n            if (evt.source.type !== Event_1.MouseEventElementType.Shape && evt.source.type !== Event_1.MouseEventElementType.Connector && this.canClearSelectionOnMouseDown()) this.clearSelection();\n            this.startPoint = evt.modelPoint;\n          }\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseMove = function (evt) {\n          this.onMouseMoveCore(evt);\n\n          if (this.handler.state !== this) {\n            this.handler.state.onMouseDown(this.handler.mouseDownEvent);\n            this.handler.state.onMouseMove(evt);\n          }\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseMoveCore = function (evt) {\n          if (this.startPoint && (Math.abs(this.startPoint.x - evt.modelPoint.x) > MouseHandlerDefaultStateBase.startLimit || Math.abs(this.startPoint.y - evt.modelPoint.y) > MouseHandlerDefaultStateBase.startLimit)) {\n            this.processOnMouseMoveAfterLimit(evt);\n            this.startPoint = undefined;\n          }\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseUp = function (evt) {\n          this.onMouseUpCore(evt);\n          if (this.handler.state !== this) this.handler.state.onMouseUp(evt);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseUpCore = function (evt) {\n          if (evt.source.type === Event_1.MouseEventElementType.Shape && this.canSelectOnMouseUp(evt.source.key)) this.modifySelection(evt, evt.source.key);else if (evt.source.type === Event_1.MouseEventElementType.Connector && this.canSelectOnMouseUp(evt.source.key)) this.modifySelection(evt, evt.source.key);else if (evt.source.type === Event_1.MouseEventElementType.ShapeExpandButton && this.canSelectOnMouseUp(evt.source.key)) this.modifySelection(evt, evt.source.key);else if (this.startPoint && this.canClearSelectionOnMouseUp()) this.clearSelection();\n          this.startPoint = undefined;\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseWheel = function (evt) {\n          if (evt.modifiers & KeyCode_1.ModifierKey.Ctrl) {\n            this.handler.switchState(new MouseHandlerZoomOnWheelState_1.MouseHandlerZoomOnWheelState(this.handler, this.settings, this.view, this.bars));\n            this.handler.state.onMouseWheel(evt);\n            return true;\n          }\n\n          return false;\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onLongTouch = function (evt) {\n          this.modifySelection(evt, evt.source.key, true);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onConnectorMouseDown = function (evt) {\n          this.modifySelection(evt, evt.source.key);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onShapeMouseDown = function (evt) {\n          this.modifySelection(evt, evt.source.key);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onShapeExpandBtnMouseDown = function (evt) {\n          this.modifySelection(evt, evt.source.key);\n          this.handler.switchState(new MouseHandlerToggleShapeExpandedState_1.MouseHandlerToggleShapeExpandedState(this.handler, this.history, this.model));\n        };\n\n        MouseHandlerDefaultStateBase.prototype.finish = function () {\n          this.startPoint = undefined;\n        };\n\n        MouseHandlerDefaultStateBase.prototype.startSelection = function (evt) {\n          this.handler.switchState(new MouseHandlerSelectionState_1.MouseHandlerSelectionState(this.handler, this.selection, this.visualizerManager));\n        };\n\n        MouseHandlerDefaultStateBase.prototype.startScrolling = function (evt) {\n          this.handler.switchState(new MouseHandlerScrollingState_1.MouseHandlerScrollingState(this.handler, this.view, this.selection));\n        };\n\n        MouseHandlerDefaultStateBase.prototype.modifySelection = function (evt, key, forceMultipleSelection) {\n          if (this.isMultipleSelectionModifier(evt) || forceMultipleSelection) {\n            if (this.selection.hasKey(key)) this.selection.remove(key);else this.selection.add(key);\n          } else if (!this.selection.hasKey(key)) this.selection.set([key]);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.clearSelection = function () {\n          this.selection.set([]);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.inSelection = function (key) {\n          return this.selection.hasKey(key);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.isMultipleSelectionModifier = function (evt) {\n          return evt.modifiers & KeyCode_1.ModifierKey.Ctrl || evt.modifiers & KeyCode_1.ModifierKey.Shift;\n        };\n\n        MouseHandlerDefaultStateBase.startLimit = UnitConverter_1.UnitConverter.pixelsToTwips(1);\n        return MouseHandlerDefaultStateBase;\n      }(MouseHandlerStateBase_1.MouseHandlerStateBase);\n\n      exports.MouseHandlerDefaultStateBase = MouseHandlerDefaultStateBase;\n      /***/\n    },\n    /* 123 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics80 = function extendStatics(d, b) {\n          _extendStatics80 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics80(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics80(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerStateBase_1 = __webpack_require__(32);\n\n      var Event_1 = __webpack_require__(10);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var MouseHandlerScrollingState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerScrollingState, _super);\n\n        function MouseHandlerScrollingState(handler, view, selection) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.view = view;\n          _this.selection = selection;\n          _this.lastOffset = new Utils_1.Point(0, 0);\n          return _this;\n        }\n\n        MouseHandlerScrollingState.prototype.onMouseDown = function (evt) {\n          evt.preventDefault = true;\n          this.startPoint = this.getPointByEvent(evt);\n        };\n\n        MouseHandlerScrollingState.prototype.onMouseMove = function (evt) {\n          if (evt.button !== Event_1.MouseButton.Left) {\n            this.handler.switchToDefaultState();\n            return;\n          }\n\n          var prevPoint = this.currentPoint || this.startPoint;\n          evt.preventDefault = true;\n          var point = this.getPointByEvent(evt);\n          var actualOffset = this.view.scrollBy(new Utils_1.Point(point.x - prevPoint.x, point.y - prevPoint.y));\n          this.lastOffset = this.lastOffset.offset(actualOffset.x, actualOffset.y);\n          this.currentPoint = point;\n        };\n\n        MouseHandlerScrollingState.prototype.onMouseUp = function (evt) {\n          this.handler.switchToDefaultState();\n        };\n\n        MouseHandlerScrollingState.prototype.cancelChanges = function () {\n          if (this.currentPoint) this.view.scrollBy(this.lastOffset.multiply(-1));\n        };\n\n        MouseHandlerScrollingState.prototype.start = function () {\n          this.handler.raiseDragScrollStart();\n\n          _super.prototype.start.call(this);\n        };\n\n        MouseHandlerScrollingState.prototype.finish = function () {\n          this.handler.raiseDragScrollEnd();\n          if (!this.currentPoint || !this.startPoint || this.currentPoint.equals(this.startPoint)) this.selection.set([]);\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerScrollingState.prototype.getPointByEvent = function (evt) {\n          return evt.offsetPoint;\n        };\n\n        return MouseHandlerScrollingState;\n      }(MouseHandlerStateBase_1.MouseHandlerCancellableState);\n\n      exports.MouseHandlerScrollingState = MouseHandlerScrollingState;\n      /***/\n    },\n    /* 124 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics81 = function extendStatics(d, b) {\n          _extendStatics81 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics81(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics81(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerDefaultStateBase_1 = __webpack_require__(122);\n\n      var MouseHandlerDefaultReadOnlyState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDefaultReadOnlyState, _super);\n\n        function MouseHandlerDefaultReadOnlyState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerDefaultReadOnlyState.prototype.canDragObjectOnMouseDown = function (key) {\n          return false;\n        };\n\n        MouseHandlerDefaultReadOnlyState.prototype.canClearSelectionOnMouseDown = function () {\n          return false;\n        };\n\n        MouseHandlerDefaultReadOnlyState.prototype.processOnMouseMoveAfterLimit = function (evt) {\n          this.startSelection(evt);\n        };\n\n        MouseHandlerDefaultReadOnlyState.prototype.canSelectOnMouseUp = function (key) {\n          return true;\n        };\n\n        MouseHandlerDefaultReadOnlyState.prototype.canClearSelectionOnMouseUp = function () {\n          return true;\n        };\n\n        return MouseHandlerDefaultReadOnlyState;\n      }(MouseHandlerDefaultStateBase_1.MouseHandlerDefaultStateBase);\n\n      exports.MouseHandlerDefaultReadOnlyState = MouseHandlerDefaultReadOnlyState;\n      /***/\n    },\n    /* 125 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var __1 = __webpack_require__(8);\n\n      var ContextMenuHandler =\n      /** @class */\n      function () {\n        function ContextMenuHandler() {\n          this.contextMenuVisible = false;\n          this.onVisibilityChanged = new __1.EventDispatcher();\n        }\n\n        ContextMenuHandler.prototype.onMouseDown = function (evt) {};\n\n        ContextMenuHandler.prototype.onMouseUp = function (evt) {\n          this.hideContextMenu();\n        };\n\n        ContextMenuHandler.prototype.onContextMenu = function (evt) {\n          this.showContextMenu(evt.eventPoint, evt.modelPoint);\n        };\n\n        ContextMenuHandler.prototype.onFocus = function (evt) {};\n\n        ContextMenuHandler.prototype.onBlur = function (evt) {};\n\n        ContextMenuHandler.prototype.onTextInputFocus = function (evt) {};\n\n        ContextMenuHandler.prototype.onTextInputBlur = function (evt) {};\n\n        ContextMenuHandler.prototype.onLongTouch = function (evt) {};\n\n        ContextMenuHandler.prototype.showContextMenu = function (eventPoint, modelPoint) {\n          this.onVisibilityChanged.raise1(function (l) {\n            return l.notifyShowContextMenu(eventPoint, modelPoint);\n          });\n          this.contextMenuVisible = true;\n        };\n\n        ContextMenuHandler.prototype.hideContextMenu = function () {\n          if (this.contextMenuVisible) {\n            this.onVisibilityChanged.raise1(function (l) {\n              return l.notifyHideContextMenu();\n            });\n            this.contextMenuVisible = false;\n          }\n        };\n\n        ContextMenuHandler.prototype.notifyDragStart = function (itemKeys) {};\n\n        ContextMenuHandler.prototype.notifyDragEnd = function (itemKeys) {};\n\n        ContextMenuHandler.prototype.notifyDragScrollStart = function () {};\n\n        ContextMenuHandler.prototype.notifyDragScrollEnd = function () {};\n\n        return ContextMenuHandler;\n      }();\n\n      exports.ContextMenuHandler = ContextMenuHandler;\n      /***/\n    },\n    /* 126 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ConnectionTargetVisualizer_1 = __webpack_require__(286);\n\n      var ContainerTargetVisualizer_1 = __webpack_require__(287);\n\n      var ExtensionLinesVisualizer_1 = __webpack_require__(88);\n\n      var __1 = __webpack_require__(8);\n\n      var Model_1 = __webpack_require__(19);\n\n      var Event_1 = __webpack_require__(10);\n\n      var ConnectionPointsVisualizer_1 = __webpack_require__(288);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var CanvasSelectionManager_1 = __webpack_require__(87);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var ResizeInfoVisualizer_1 = __webpack_require__(289);\n\n      var SelectionRectVisualizer_1 = __webpack_require__(290);\n\n      var VisualizerManager =\n      /** @class */\n      function () {\n        function VisualizerManager(selection, model, eventManager, settings, readOnly) {\n          if (readOnly === void 0) {\n            readOnly = settings.readOnly;\n          }\n\n          this.selection = selection;\n          this.model = model;\n          this.eventManager = eventManager;\n          this.settings = settings;\n          this.readOnly = readOnly;\n          this.onVisualizersUpdate = new __1.EventDispatcher();\n          this.connectionPointsVisualizer = new ConnectionPointsVisualizer_1.ConnectionPointsVisualizer(this.onVisualizersUpdate);\n          this.connectionPointsVisualizer = new ConnectionPointsVisualizer_1.ConnectionPointsVisualizer(this.onVisualizersUpdate);\n          this.connectionTargetVisualizer = new ConnectionTargetVisualizer_1.ConnectionTargetVisualizer(this.onVisualizersUpdate);\n          this.containerTargetVisualizer = new ContainerTargetVisualizer_1.ContainerTargetVisualizer(this.onVisualizersUpdate);\n          this.extensionLinesVisualizer = new ExtensionLinesVisualizer_1.ExtensionLinesVisualizer(this.onVisualizersUpdate);\n          this.resizeInfoVisualizer = new ResizeInfoVisualizer_1.ResizeInfoVisualizer(this.onVisualizersUpdate);\n          this.selectionRectangleVisualizer = new SelectionRectVisualizer_1.SelectionRectVisualizer(this.onVisualizersUpdate);\n        }\n\n        VisualizerManager.prototype.initialize = function (model) {\n          this.model = model;\n        };\n\n        VisualizerManager.prototype.onMouseDown = function (evt) {};\n\n        VisualizerManager.prototype.onMouseUp = function (evt) {};\n\n        VisualizerManager.prototype.onMouseEnter = function (evt) {};\n\n        VisualizerManager.prototype.onMouseLeave = function (evt) {\n          this.resetConnectionPoints();\n          this.resetConnectionTarget();\n          this.resetExtensionLines();\n          this.resetContainerTarget();\n          this.resetResizeInfo();\n          this.resetSelectionRectangle();\n        };\n\n        VisualizerManager.prototype.onBlur = function (evt) {};\n\n        VisualizerManager.prototype.onFocus = function (evt) {};\n\n        VisualizerManager.prototype.updateConnections = function (item, type, value) {\n          var pointIndex = -1;\n          if (value && type === Event_1.MouseEventElementType.ShapeConnectionPoint) pointIndex = parseInt(value);\n          this.setConnectionPoints(item, type, pointIndex);\n        };\n\n        VisualizerManager.prototype.setConnectionPoints = function (item, type, pointIndex, preventShowOutside) {\n          if (!this.eventManager.isFocused()) return;\n\n          if (item && !item.isLocked && (type === Event_1.MouseEventElementType.Shape || type === Event_1.MouseEventElementType.ShapeResizeBox || type === Event_1.MouseEventElementType.ShapeConnectionPoint) && item !== undefined) {\n            var key = item.key;\n            var isSelected_1 = this.selection.hasKey(key);\n            var points = isSelected_1 ? item.getConnectionPointsForSelection() : item.getConnectionPoints();\n            this.connectionPointsVisualizer.setPoints(key, points.map(function (pt) {\n              return new ConnectionPointsVisualizer_1.ConnectionPointInfo(pt, isSelected_1 ? item.getConnectionPointForSelectionSide(pt) : item.getConnectionPointSide(pt));\n            }), pointIndex, isSelected_1 && !preventShowOutside);\n          } else this.connectionPointsVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setConnectionPointIndex = function (index) {\n          this.connectionPointsVisualizer.setPointIndex(index);\n        };\n\n        VisualizerManager.prototype.updateConnectionPoints = function () {\n          var item = this.model.findItem(this.connectionPointsVisualizer.getKey());\n          if (item !== undefined) this.connectionPointsVisualizer.update();else this.connectionPointsVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.resetConnectionPoints = function () {\n          this.connectionPointsVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setConnectionTarget = function (item, type) {\n          if (item && !item.isLocked && (type === Event_1.MouseEventElementType.Shape || type === Event_1.MouseEventElementType.ShapeConnectionPoint)) {\n            this.connectionTargetVisualizer.setTargetRect(item.key, item.rectangle);\n          } else this.connectionTargetVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.resetConnectionTarget = function () {\n          this.connectionTargetVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setContainerTarget = function (item, type) {\n          if (item && !item.isLocked && type === Event_1.MouseEventElementType.Shape && item.enableChildren) this.containerTargetVisualizer.setTargetRect(item.key, item.rectangle);else this.containerTargetVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.resetContainerTarget = function () {\n          this.containerTargetVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setExtensionLines = function (items) {\n          var _this = this;\n\n          if (!this.eventManager.isFocused()) return;\n          this.extensionLinesVisualizer.reset();\n          var rect = Model_1.DiagramModel.getRectangle(items.filter(function (item) {\n            return item;\n          }));\n          this.addPageExtensionLines(rect);\n          this.model.items.forEach(function (item) {\n            if (items.indexOf(item) > -1) return;\n            if (item instanceof Shape_1.Shape) _this.addShapeExtensionLines(item, rect);\n          });\n        };\n\n        VisualizerManager.prototype.addPageExtensionLines = function (rect) {\n          var horPages = Math.round(this.model.size.width / this.model.pageWidth);\n          var verPages = Math.round(this.model.size.height / this.model.pageHeight);\n\n          for (var i = 0; i < horPages; i++) {\n            for (var j = 0; j < verPages; j++) {\n              var center = new Utils_1.Point(i * this.model.pageWidth + this.model.pageWidth / 2, j * this.model.pageHeight + this.model.pageHeight / 2);\n\n              if (Math.abs(rect.center.x - center.x) < this.settings.gridSize / 2) {\n                var segment = new Utils_1.Segment(new Utils_1.Point(rect.center.x, 0), new Utils_1.Point(rect.center.x, this.model.size.height));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterToPageCenter, segment, \"\");\n              }\n\n              if (Math.abs(rect.center.y - center.y) < this.settings.gridSize / 2) {\n                var segment = new Utils_1.Segment(new Utils_1.Point(0, rect.center.y), new Utils_1.Point(this.model.size.width, rect.center.y));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterToPageCenter, segment, \"\");\n              }\n\n              if (Math.abs(rect.left - center.x) < this.settings.gridSize / 2) {\n                var segment = new Utils_1.Segment(new Utils_1.Point(rect.left, 0), new Utils_1.Point(rect.left, this.model.size.height));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.LeftToPageCenter, segment, \"\");\n              }\n\n              if (Math.abs(rect.top - center.y) < this.settings.gridSize / 2) {\n                var segment = new Utils_1.Segment(new Utils_1.Point(0, rect.top), new Utils_1.Point(this.model.size.width, rect.top));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.TopToPageCenter, segment, \"\");\n              }\n\n              if (Math.abs(rect.right - center.x) < this.settings.gridSize / 2) {\n                var segment = new Utils_1.Segment(new Utils_1.Point(rect.right, 0), new Utils_1.Point(rect.right, this.model.size.height));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.RightToPageCenter, segment, \"\");\n              }\n\n              if (Math.abs(rect.bottom - center.y) < this.settings.gridSize / 2) {\n                var segment = new Utils_1.Segment(new Utils_1.Point(0, rect.bottom), new Utils_1.Point(this.model.size.width, rect.bottom));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.BottomToPageCenter, segment, \"\");\n              }\n            }\n          }\n        };\n\n        VisualizerManager.prototype.addShapeExtensionLines = function (shape, rect) {\n          var sRect = shape.rectangle;\n          var lwCor = Shape_1.Shape.lineWidth - CanvasSelectionManager_1.CanvasSelectionManager.extensionLineWidth;\n          var showDistance = true;\n          var x1, y1, x2, y2;\n\n          if (rect.right < sRect.left) {\n            x1 = rect.right + lwCor + CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n            x2 = sRect.left - CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n          } else if (rect.left > sRect.right) {\n            x1 = rect.left - CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n            x2 = sRect.right + lwCor + CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n          }\n\n          if (rect.bottom < sRect.top) {\n            y1 = rect.bottom + lwCor + CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n            y2 = sRect.top - CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n          } else if (rect.top > sRect.bottom) {\n            y1 = rect.top - CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n            y2 = sRect.bottom + lwCor + CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n          }\n\n          if (x1 != undefined && x2 !== undefined) {\n            if (rect.center.y === sRect.center.y) {\n              var segment = new Utils_1.Segment(new Utils_1.Point(x1, rect.center.y), new Utils_1.Point(x2, sRect.center.y));\n              this.extensionLinesVisualizer.addSegment(x1 > x2 ? ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterAfter : ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterBefore, segment, showDistance ? this.getViewUnitText(segment.distance) : \"\");\n              showDistance = false;\n            }\n\n            if (rect.top === sRect.top) {\n              var segment = new Utils_1.Segment(new Utils_1.Point(x1, rect.top), new Utils_1.Point(x2, sRect.top));\n              this.extensionLinesVisualizer.addSegment(x1 > x2 ? ExtensionLinesVisualizer_1.ExtensionLineType.TopToTopAfter : ExtensionLinesVisualizer_1.ExtensionLineType.TopToTopBefore, segment, showDistance ? this.getViewUnitText(segment.distance) : \"\");\n            }\n\n            if (rect.bottom === sRect.bottom) {\n              var segment = new Utils_1.Segment(new Utils_1.Point(x1, rect.bottom + lwCor), new Utils_1.Point(x2, sRect.bottom + lwCor));\n              this.extensionLinesVisualizer.addSegment(x1 > x2 ? ExtensionLinesVisualizer_1.ExtensionLineType.BottomToBottomAfter : ExtensionLinesVisualizer_1.ExtensionLineType.BottomToBottomBefore, segment, showDistance ? this.getViewUnitText(segment.distance) : \"\");\n            }\n\n            if (rect.top === sRect.bottom) {\n              var segment = new Utils_1.Segment(new Utils_1.Point(x1, rect.top), new Utils_1.Point(x2, sRect.bottom + lwCor));\n              this.extensionLinesVisualizer.addSegment(x1 > x2 ? ExtensionLinesVisualizer_1.ExtensionLineType.TopToBottomAfter : ExtensionLinesVisualizer_1.ExtensionLineType.TopToBottomBefore, segment, showDistance ? this.getViewUnitText(segment.distance) : \"\");\n            }\n\n            if (rect.bottom === sRect.top) {\n              var segment = new Utils_1.Segment(new Utils_1.Point(x1, rect.bottom + lwCor), new Utils_1.Point(x2, sRect.top));\n              this.extensionLinesVisualizer.addSegment(x1 > x2 ? ExtensionLinesVisualizer_1.ExtensionLineType.BottomToTopAfter : ExtensionLinesVisualizer_1.ExtensionLineType.BottomToTopBefore, segment, showDistance ? this.getViewUnitText(segment.distance) : \"\");\n            }\n          }\n\n          if (y1 != undefined && y2 !== undefined) {\n            if (rect.center.x === sRect.center.x) {\n              var segment = new Utils_1.Segment(new Utils_1.Point(rect.center.x, y1), new Utils_1.Point(sRect.center.x, y2));\n              this.extensionLinesVisualizer.addSegment(y1 > y2 ? ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterBelow : ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterAbove, segment, showDistance ? this.getViewUnitText(segment.distance) : \"\");\n              showDistance = false;\n            }\n\n            if (rect.left === sRect.left) {\n              var segment = new Utils_1.Segment(new Utils_1.Point(rect.left, y1), new Utils_1.Point(sRect.left, y2));\n              this.extensionLinesVisualizer.addSegment(y1 > y2 ? ExtensionLinesVisualizer_1.ExtensionLineType.LeftToLeftBelow : ExtensionLinesVisualizer_1.ExtensionLineType.LeftToLeftAbove, segment, showDistance ? this.getViewUnitText(segment.distance) : \"\");\n            }\n\n            if (rect.right === sRect.right) {\n              var segment = new Utils_1.Segment(new Utils_1.Point(rect.right + lwCor, y1), new Utils_1.Point(sRect.right + lwCor, y2));\n              this.extensionLinesVisualizer.addSegment(y1 > y2 ? ExtensionLinesVisualizer_1.ExtensionLineType.RightToRightBelow : ExtensionLinesVisualizer_1.ExtensionLineType.RightToRightAbove, segment, showDistance ? this.getViewUnitText(segment.distance) : \"\");\n            }\n\n            if (rect.left === sRect.right) {\n              var segment = new Utils_1.Segment(new Utils_1.Point(rect.left, y1), new Utils_1.Point(sRect.right + lwCor, y2));\n              this.extensionLinesVisualizer.addSegment(y1 > y2 ? ExtensionLinesVisualizer_1.ExtensionLineType.LeftToRightBelow : ExtensionLinesVisualizer_1.ExtensionLineType.LeftToRightAbove, segment, showDistance ? this.getViewUnitText(segment.distance) : \"\");\n            }\n\n            if (rect.right === sRect.left) {\n              var segment = new Utils_1.Segment(new Utils_1.Point(rect.right + lwCor, y1), new Utils_1.Point(sRect.left, y2));\n              this.extensionLinesVisualizer.addSegment(y1 > y2 ? ExtensionLinesVisualizer_1.ExtensionLineType.RightToLeftBelow : ExtensionLinesVisualizer_1.ExtensionLineType.RightToLeftAbove, segment, showDistance ? this.getViewUnitText(segment.distance) : \"\");\n            }\n          }\n        };\n\n        VisualizerManager.prototype.resetExtensionLines = function () {\n          this.extensionLinesVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setResizeInfo = function (items) {\n          var rect = Model_1.DiagramModel.getRectangle(items);\n          var point = new Utils_1.Point(rect.center.x, rect.bottom + CanvasSelectionManager_1.CanvasSelectionManager.resizeInfoOffset);\n          var text = this.getViewUnitText(rect.width) + \" x \" + this.getViewUnitText(rect.height);\n          this.resizeInfoVisualizer.set(point, text);\n        };\n\n        VisualizerManager.prototype.resetResizeInfo = function () {\n          this.resizeInfoVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setSelectionRectangle = function (rect) {\n          this.selectionRectangleVisualizer.setRectangle(rect);\n        };\n\n        VisualizerManager.prototype.resetSelectionRectangle = function () {\n          this.selectionRectangleVisualizer.reset();\n        }; // utils\n\n\n        VisualizerManager.prototype.getViewUnitText = function (value) {\n          return ModelUtils_1.ModelUtils.getUnitText(this.settings.viewUnits, this.settings.unitItems, this.settings.formatUnit, value);\n        };\n\n        VisualizerManager.prototype.notifyReadOnlyChanged = function (readOnly) {\n          this.readOnly = readOnly;\n        };\n\n        VisualizerManager.prototype.notifyDragStart = function (itemKeys) {};\n\n        VisualizerManager.prototype.notifyDragEnd = function (itemKeys) {};\n\n        VisualizerManager.prototype.notifyDragScrollStart = function () {};\n\n        VisualizerManager.prototype.notifyDragScrollEnd = function () {};\n\n        return VisualizerManager;\n      }();\n\n      exports.VisualizerManager = VisualizerManager;\n      /***/\n    },\n    /* 127 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var TargetVisualizerBase =\n      /** @class */\n      function () {\n        function TargetVisualizerBase(dispatcher) {\n          this.dispatcher = dispatcher;\n        }\n\n        TargetVisualizerBase.prototype.getKey = function () {\n          return this.key;\n        };\n\n        TargetVisualizerBase.prototype.setTargetRect = function (key, targetRect) {\n          if (this.key !== key) {\n            this.key = key;\n            this.targetRect = targetRect;\n            this.raiseShow();\n          }\n        };\n\n        TargetVisualizerBase.prototype.reset = function () {\n          if (this.key !== \"-1\") {\n            this.key = \"-1\";\n            this.targetRect = undefined;\n            this.raiseHide();\n          }\n        };\n\n        return TargetVisualizerBase;\n      }();\n\n      exports.TargetVisualizerBase = TargetVisualizerBase;\n      /***/\n    },\n    /* 128 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var BatchUpdatableObject =\n      /** @class */\n      function () {\n        function BatchUpdatableObject() {\n          this.suspendUpdateCount = 0;\n          this.occurredEvents = 0;\n        }\n\n        BatchUpdatableObject.prototype.beginUpdate = function () {\n          if (this.suspendUpdateCount === 0) this.onUpdateLocked();\n          if (this.suspendUpdateCount < 0) this.suspendUpdateCount--;else this.suspendUpdateCount++;\n        };\n\n        BatchUpdatableObject.prototype.endUpdate = function () {\n          if (this.suspendUpdateCount < 0) this.suspendUpdateCount++;else if (this.suspendUpdateCount > 0) this.suspendUpdateCount--;\n\n          if (!this.isUpdateLocked()) {\n            var occurredEvents = this.occurredEvents;\n            this.occurredEvents = 0;\n            this.onUpdateUnlocked(occurredEvents);\n          }\n        };\n\n        BatchUpdatableObject.prototype.suspendUpdate = function () {\n          if (this.suspendUpdateCount > 0) {\n            this.suspendUpdateCount *= -1;\n            var occurredEvents = this.occurredEvents;\n            this.occurredEvents = 0;\n            this.onUpdateUnlocked(occurredEvents);\n          }\n        };\n\n        BatchUpdatableObject.prototype.continueUpdate = function () {\n          if (this.suspendUpdateCount < 0) this.suspendUpdateCount *= -1;\n        };\n\n        BatchUpdatableObject.prototype.isUpdateLocked = function () {\n          return this.suspendUpdateCount > 0;\n        };\n\n        BatchUpdatableObject.prototype.onUpdateLocked = function () {};\n\n        BatchUpdatableObject.prototype.registerOccurredEvent = function (eventMask) {\n          this.occurredEvents |= eventMask;\n        };\n\n        return BatchUpdatableObject;\n      }();\n\n      exports.BatchUpdatableObject = BatchUpdatableObject;\n      /***/\n    },\n    /* 129 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Evt_1 = __webpack_require__(39);\n\n      var Base_1 = __webpack_require__(17);\n\n      var TouchUIHelper_1 = __webpack_require__(62);\n\n      var __1 = __webpack_require__(8);\n\n      var DRAGGING_OFFSET = 4,\n          TOOLBOX_CSSCLASS = \"dxdi-toolbox\",\n          DRAG_CAPTURED_CSSCLASS = \"dxdi-tb-drag-captured\";\n\n      var Toolbox =\n      /** @class */\n      function () {\n        function Toolbox(parent, readonly, options) {\n          this.readonly = readonly;\n          this.options = options;\n          this.onDragOperation = new Utils_1.EventDispatcher();\n          if (!parent) return;\n          this.mainElement = this.createMainElement(parent);\n          this.attachHandlers(this.mainElement);\n        }\n\n        Toolbox.prototype.dispose = function () {\n          this.detachHandlers(this.mainElement);\n        };\n\n        Toolbox.prototype.createMainElement = function (parent) {\n          var element = document.createElement(\"div\");\n          element.setAttribute(\"class\", TOOLBOX_CSSCLASS);\n          parent.appendChild(element);\n          return element;\n        };\n\n        Toolbox.prototype.attachHandlers = function (element) {\n          this.onMouseDownHandler = this.onMouseDown.bind(this);\n          this.onMouseMoveHandler = this.onMouseMove.bind(this);\n          this.onMouseUpHandler = this.onMouseUp.bind(this);\n          element.addEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseDownEventName, this.onMouseDownHandler);\n          document.addEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseMoveEventName, this.onMouseMoveHandler);\n          document.addEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseUpEventName, this.onMouseUpHandler);\n        };\n\n        Toolbox.prototype.detachHandlers = function (element) {\n          element.removeEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseDownEventName, this.onMouseDownHandler);\n          document.removeEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseMoveEventName, this.onMouseMoveHandler);\n          document.removeEventListener(TouchUIHelper_1.TouchUIHelper.touchMouseUpEventName, this.onMouseUpHandler);\n        };\n\n        Toolbox.prototype.render = function (filter) {\n          if (this.mainElement.childNodes) this.mainElement.innerHTML = \"\";\n          var shapeTypes = filter ? this.options.shapeTypes.filter(filter) : this.options.shapeTypes;\n          if (shapeTypes.length) this.createElements(this.mainElement, shapeTypes);\n          return !!shapeTypes.length;\n        };\n\n        Toolbox.prototype.createDraggingObject = function (srcElement) {\n          var shapeType = this.getDragShapeType(srcElement);\n\n          if (shapeType !== undefined) {\n            var evt = new DiagramDraggingEvent();\n            evt.data = shapeType;\n            return new ToolboxDraggingObject(evt);\n          }\n\n          return undefined;\n        };\n\n        Toolbox.prototype.getDragShapeType = function (element) {\n          while (element && !Base_1.ElementHasCssClass(element, TOOLBOX_CSSCLASS)) {\n            if (element.getAttribute(\"data-tb-type\")) return element.getAttribute(\"data-tb-type\");\n            element = element.parentNode;\n          }\n\n          return undefined;\n        };\n\n        Toolbox.prototype.onMouseDown = function (evt) {\n          if (this.readonly) return;\n          this.mouseDownPoint = new Utils_1.Point(Evt_1.Evt.GetEventX(evt), Evt_1.Evt.GetEventY(evt));\n          this.draggingObject = this.createDraggingObject(evt.target);\n\n          if (this.draggingObject) {\n            this.draggingObject.evt.onFinishDragging = this.finishDragging.bind(this);\n            this.draggingObject.evt.onCaptured = this.capture.bind(this);\n            this.onDragStart();\n          }\n\n          var srcElement = Evt_1.Evt.GetEventSource(evt);\n          var tagName = srcElement && srcElement.tagName;\n          if (__1.Browser.TouchUI || tagName.toLowerCase() === \"img\" || tagName.toLowerCase() === \"image\") // prevent dragging\n            return Evt_1.Evt.PreventEventAndBubble(evt);\n        };\n\n        Toolbox.prototype.onMouseMove = function (evt) {\n          if (!Evt_1.Evt.IsLeftButtonPressed(evt)) this.finishDragging();else if (this.draggingObject) {\n            if (!this.draggingObject.element && (Math.abs(Evt_1.Evt.GetEventX(evt) - this.mouseDownPoint.x) > DRAGGING_OFFSET || Math.abs(Evt_1.Evt.GetEventY(evt) - this.mouseDownPoint.y) > DRAGGING_OFFSET)) {\n              this.draggingObject.element = this.createDraggingElement(this.draggingObject);\n              if (this.draggingObject.captured !== undefined) this.capture(this.draggingObject.captured, true);\n            }\n\n            if (this.draggingObject.element) this.updateDraggingElementPosition(evt);\n          }\n          if (__1.Browser.TouchUI) return Evt_1.Evt.PreventEventAndBubble(evt);\n        };\n\n        Toolbox.prototype.onMouseUp = function (evt) {\n          this.finishDragging();\n        };\n\n        Toolbox.prototype.updateDraggingElementPosition = function (evt) {\n          var element = this.draggingObject.element;\n          var xPos = Evt_1.Evt.GetEventX(evt) - element.offsetWidth / 2;\n          var yPos = Evt_1.Evt.GetEventY(evt) - element.offsetHeight / 2;\n          Base_1.SetAbsoluteX(element, xPos);\n          Base_1.SetAbsoluteY(element, yPos);\n        };\n\n        Toolbox.prototype.finishDragging = function () {\n          if (this.draggingObject) {\n            this.onDragEnd();\n            var element = this.draggingObject.element;\n            if (element) element.parentNode.removeChild(element);\n            delete this.draggingObject;\n          }\n        };\n\n        Toolbox.prototype.capture = function (captured, forced) {\n          if (this.draggingObject && (this.draggingObject.captured !== captured || forced)) {\n            this.draggingObject.captured = captured;\n            if (this.draggingObject.element) Base_1.ToggleElementClassName(this.draggingObject.element, DRAG_CAPTURED_CSSCLASS, captured);\n          }\n        };\n\n        Toolbox.prototype.onDragEnd = function () {\n          this.onDragOperation.raise(\"notifyToolboxDragEnd\");\n        };\n\n        Toolbox.prototype.onDragStart = function () {\n          this.onDragOperation.raise(\"notifyToolboxDragStart\");\n        };\n\n        Toolbox.prototype.notifyReadOnlyChanged = function (readOnly) {\n          this.readonly = readOnly;\n        };\n\n        return Toolbox;\n      }();\n\n      exports.Toolbox = Toolbox;\n\n      var ToolboxDraggingObject =\n      /** @class */\n      function () {\n        function ToolboxDraggingObject(evt) {\n          this.evt = evt;\n        }\n\n        return ToolboxDraggingObject;\n      }();\n\n      exports.ToolboxDraggingObject = ToolboxDraggingObject;\n\n      var DiagramDraggingEvent =\n      /** @class */\n      function () {\n        function DiagramDraggingEvent() {}\n\n        return DiagramDraggingEvent;\n      }();\n\n      exports.DiagramDraggingEvent = DiagramDraggingEvent;\n      /***/\n    },\n    /* 130 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics82 = function extendStatics(d, b) {\n          _extendStatics82 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics82(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics82(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var DeleteCommand =\n      /** @class */\n      function (_super) {\n        __extends(DeleteCommand, _super);\n\n        function DeleteCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        DeleteCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !this.control.selection.isEmpty();\n        };\n\n        DeleteCommand.prototype.executeCore = function (state) {\n          ModelUtils_1.ModelUtils.deleteSelection(this.control.history, this.control.model, this.control.selection);\n          return true;\n        };\n\n        return DeleteCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.DeleteCommand = DeleteCommand;\n      /***/\n    },\n    /* 131 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics83 = function extendStatics(d, b) {\n          _extendStatics83 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics83(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics83(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var MoveShapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(MoveShapeHistoryItem, _super);\n\n        function MoveShapeHistoryItem(shapeKey, position) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = shapeKey;\n          _this.position = position;\n          return _this;\n        }\n\n        MoveShapeHistoryItem.prototype.redo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          this.oldPosition = shape.position.clone();\n          manipulator.moveShape(shape, this.position);\n        };\n\n        MoveShapeHistoryItem.prototype.undo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          manipulator.moveShape(shape, this.oldPosition);\n        };\n\n        return MoveShapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.MoveShapeHistoryItem = MoveShapeHistoryItem;\n      /***/\n    },\n    /* 132 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var StringUtils =\n      /** @class */\n      function () {\n        function StringUtils() {} // to compare with ignore case use ~StrUtils.strCompare\n\n\n        StringUtils.stringCompare = function (a, b) {\n          return a == b ? 0 : a > b ? 1 : -1;\n        };\n\n        StringUtils.stringHashCode = function (str) {\n          var hash = 0;\n          if (str.length === 0) return hash;\n          var strLen = str.length;\n\n          for (var i = 0; i < strLen; i++) {\n            hash = (hash << 5) - hash + str.charCodeAt(i);\n            hash |= 0; // Convert to 32bit integer\n          }\n\n          return hash;\n        };\n\n        ;\n\n        StringUtils.endsAt = function (str, template) {\n          var strInd = str.length - 1;\n          var tmplInd = template.length - 1;\n          var strStartInd = strInd - tmplInd;\n          if (strStartInd < 0) return false;\n\n          for (; strInd >= strStartInd; strInd--, tmplInd--) {\n            if (str[strInd] != template[tmplInd]) return false;\n          }\n\n          return true;\n        };\n\n        StringUtils.startsAt = function (str, template) {\n          return str.substr(0, template.length) == template;\n        };\n\n        StringUtils.stringInLowerCase = function (str) {\n          return str.toLowerCase() == str;\n        };\n\n        StringUtils.stringInUpperCase = function (str) {\n          return str.toUpperCase() == str;\n        };\n\n        StringUtils.inStringAtLeastOneSymbolInUpperCase = function (str) {\n          for (var i = 0, char; char = str[i]; i++) {\n            if (StringUtils.stringInUpperCase(char) && !StringUtils.stringInLowerCase(char)) return true;\n          }\n\n          return false;\n        };\n\n        StringUtils.getSymbolFromEnd = function (text, posFromEnd) {\n          return text[text.length - posFromEnd];\n        };\n\n        StringUtils.stringTrim = function (str, trimChars) {\n          if (trimChars === void 0) {\n            trimChars = [\"\\\\s\"];\n          }\n\n          var joinedChars = trimChars.join(\"\");\n          return str.replace(new RegExp(\"(^[\" + joinedChars + \"]*)|([\" + joinedChars + \"]*$)\", 'g'), '');\n        };\n\n        StringUtils.stringTrimStart = function (str) {\n          return str.replace(/(^\\s*)/g, '');\n        };\n\n        StringUtils.stringTrimEnd = function (str, trimChar) {\n          if (trimChar === void 0) {\n            trimChar = \"\\\\s\";\n          }\n\n          return str.replace(new RegExp(trimChar + \"*$\"), '');\n        }; //todo and test it\n\n\n        StringUtils.stringCustomTrim = function (str, trimChars) {\n          for (var _i = 0, trimChars_1 = trimChars; _i < trimChars_1.length; _i++) {\n            var template = trimChars_1[_i];\n            str = str.replace(new RegExp(\"(^\" + template + \"*)|(\" + template + \"*)$\", \"g\"), '');\n          }\n\n          return str;\n        }; // mergeStringNTimes(\"&nbsp;\", 1) = \"&nbsp;\"\n        // mergeStringNTimes(\"&nbsp;\", 3) = \"&nbsp;&nbsp;&nbsp;\"\n\n\n        StringUtils.mergeStringNTimes = function (str, times) {\n          return new Array(times <= 0 ? 0 : times + 1).join(str);\n        };\n\n        StringUtils.getDecimalSeparator = function () {\n          return 1.1.toLocaleString().substr(1, 1);\n        };\n\n        StringUtils.strCompare = function (a, b, ignoreCase) {\n          if (ignoreCase === void 0) {\n            ignoreCase = false;\n          }\n\n          if (ignoreCase) {\n            a = a.toLowerCase();\n            b = b.toLowerCase();\n          }\n\n          return a == b ? 0 : a > b ? 1 : -1;\n        };\n\n        StringUtils.repeat = function (str, count) {\n          var result = \"\";\n\n          for (var i = 1; i <= count; i++) {\n            result += str;\n          }\n\n          return result;\n        };\n\n        StringUtils.isNullOrEmpty = function (str) {\n          return !str || !str.length;\n        };\n\n        StringUtils.padLeft = function (str, totalWidth, paddingChar) {\n          return StringUtils.mergeStringNTimes(paddingChar, Math.max(0, totalWidth - str.length)) + str;\n        };\n\n        return StringUtils;\n      }();\n\n      exports.StringUtils = StringUtils;\n      /***/\n    },\n    /* 133 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Base_1 = __webpack_require__(17);\n\n      var Str =\n      /** @class */\n      function () {\n        function Str() {}\n\n        Str.TrimStart = function (str) {\n          return Str.trimInternal(str, true, false);\n        };\n\n        Str.TrimEnd = function (str) {\n          return Str.trimInternal(str, false, true);\n        };\n\n        Str.Trim = function (str) {\n          return Str.trimInternal(str, true, true);\n        };\n\n        Str.EncodeHtml = function (html) {\n          return Str.ApplyReplacement(html, [[/&amp;/g, '&ampx;'], [/&/g, '&amp;'], [/&quot;/g, '&quotx;'], [/\"/g, '&quot;'], [/&lt;/g, '&ltx;'], [/</g, '&lt;'], [/&gt;/g, '&gtx;'], [/>/g, '&gt;']]);\n        };\n\n        Str.trimInternal = function (source, trimStart, trimEnd) {\n          var len = source.length;\n          if (!len) return source;\n\n          if (len < 0xBABA1) {\n            // B181394        \n            var result = source;\n\n            if (trimStart) {\n              result = result.replace(/^\\s+/, \"\");\n            }\n\n            if (trimEnd) {\n              result = result.replace(/\\s+$/, \"\");\n            }\n\n            return result;\n          } else {\n            var start = 0;\n\n            if (trimEnd) {\n              while (len > 0 && Str.whiteSpaces[source.charCodeAt(len - 1)]) {\n                len--;\n              }\n            }\n\n            if (trimStart && len > 0) {\n              while (start < len && Str.whiteSpaces[source.charCodeAt(start)]) {\n                start++;\n              }\n            }\n\n            return source.substring(start, len);\n          }\n        };\n\n        Str.ApplyReplacement = function (text, replecementTable) {\n          //if (typeof (text) != \"string\")\n          //    text = text.toString();\n          for (var i = 0; i < replecementTable.length; i++) {\n            var replacement = replecementTable[i];\n            text = text.replace(replacement[0], replacement[1]);\n          }\n\n          return text;\n        };\n\n        Str.DecodeHtmlViaTextArea = function (html) {\n          var textArea = document.createElement(\"TEXTAREA\");\n          Base_1.setInnerHtmlInternal(textArea, html);\n          return textArea.value;\n        };\n\n        Str.whiteSpaces = {\n          0x0009: 1,\n          0x000a: 1,\n          0x000b: 1,\n          0x000c: 1,\n          0x000d: 1,\n          0x0020: 1,\n          0x0085: 1,\n          0x00a0: 1,\n          0x1680: 1,\n          0x180e: 1,\n          0x2000: 1,\n          0x2001: 1,\n          0x2002: 1,\n          0x2003: 1,\n          0x2004: 1,\n          0x2005: 1,\n          0x2006: 1,\n          0x2007: 1,\n          0x2008: 1,\n          0x2009: 1,\n          0x200a: 1,\n          0x200b: 1,\n          0x2028: 1,\n          0x2029: 1,\n          0x202f: 1,\n          0x205f: 1,\n          0x3000: 1\n        };\n        return Str;\n      }();\n\n      exports.Str = Str;\n      /***/\n    },\n    /* 134 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Browser_1 = __webpack_require__(23);\n\n      var Attr =\n      /** @class */\n      function () {\n        function Attr() {}\n\n        Attr.SetAttribute = function (obj, attrName, value) {\n          if (obj.setAttribute) {\n            if (Attr.isSourceResetRequired() && attrName.toLowerCase() === \"src\") // T481593\n              obj.setAttribute(attrName, \"\");\n            obj.setAttribute(attrName, value);\n          } else if (obj.setProperty) obj.setProperty(attrName, value, \"\");\n        };\n\n        Attr.GetAttribute = function (obj, attrName) {\n          if (obj.getAttribute) return obj.getAttribute(attrName);else if (obj.getPropertyValue) {\n            if (Browser_1.Browser.Firefox) {\n              //T644613\n              try {\n                return obj.getPropertyValue(attrName);\n              } catch (e) {\n                return obj[attrName];\n              }\n            }\n\n            return obj.getPropertyValue(attrName);\n          }\n          return null;\n        };\n\n        Attr.GetTabIndexAttributeName = function () {\n          return Browser_1.Browser.IE ? \"tabIndex\" : \"tabindex\";\n        };\n\n        Attr.ChangeStyleAttribute = function (obj, attrName, newValue) {\n          Attr.ChangeAttributeExtended(obj.style, attrName, obj, \"saved\" + attrName, newValue);\n        };\n\n        Attr.ChangeAttributeExtended = function (obj, attrName, savedObj, savedAttrName, newValue) {\n          Attr.SaveAttribute(obj, attrName, savedObj, savedAttrName);\n          Attr.SetAttribute(obj, attrName, newValue);\n        };\n\n        Attr.SaveAttribute = function (obj, attrName, savedObj, savedAttrName) {\n          if (!Attr.IsExistsAttribute(savedObj, savedAttrName)) {\n            var oldValue = Attr.IsExistsAttribute(obj, attrName) ? Attr.GetAttribute(obj, attrName) : Attr.EmptyObject;\n            Attr.SetAttribute(savedObj, savedAttrName, oldValue);\n          }\n        };\n\n        Attr.RestoreAttributeExtended = function (obj, attrName, savedObj, savedAttrName) {\n          if (Attr.IsExistsAttribute(savedObj, savedAttrName)) {\n            var oldValue = Attr.GetAttribute(savedObj, savedAttrName);\n            if (oldValue != Attr.EmptyObject) Attr.SetAttribute(obj, attrName, oldValue);else Attr.RemoveAttribute(obj, attrName);\n            Attr.RemoveAttribute(savedObj, savedAttrName);\n            return true;\n          }\n\n          return false;\n        };\n\n        Attr.RemoveAttribute = function (obj, attrName) {\n          if (obj.removeAttribute) obj.removeAttribute(attrName);else if (obj.removeProperty) obj.removeProperty(attrName);\n        };\n\n        Attr.IsExistsAttribute = function (obj, attrName) {\n          var value = Attr.GetAttribute(obj, attrName);\n          return value != null && value !== \"\";\n        };\n\n        Attr.isSourceResetRequired = function () {\n          return Browser_1.Browser.IE && Browser_1.Browser.MajorVersion >= 11;\n        };\n\n        Attr.EmptyObject = {};\n\n        Attr.RestoreStyleAttribute = function (obj, attrName) {\n          return Attr.RestoreAttributeExtended(obj.style, attrName, obj, \"saved\" + attrName);\n        };\n\n        return Attr;\n      }();\n\n      exports.Attr = Attr;\n      /***/\n    },\n    /* 135 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Base_1 = __webpack_require__(17);\n\n      var NativeScrollView =\n      /** @class */\n      function () {\n        function NativeScrollView(mainElement) {\n          this.onScroll = new Utils_1.EventDispatcher();\n          this.scrollBarWidth = Base_1.GetVerticalScrollBarWidth();\n          this.mainElement = mainElement;\n          this.attachEvents();\n        }\n\n        NativeScrollView.prototype.dispose = function () {\n          this.detachEvents();\n        };\n\n        NativeScrollView.prototype.attachEvents = function () {\n          var _this = this;\n\n          this.onScrollHandler = function () {\n            return _this.onScroll.raise1(function (l) {\n              return l.notifyScrollChanged();\n            });\n          };\n\n          this.mainElement.addEventListener(\"scroll\", this.onScrollHandler);\n        };\n\n        NativeScrollView.prototype.detachEvents = function () {\n          this.mainElement.removeEventListener(\"scroll\", this.onScrollHandler);\n        };\n\n        NativeScrollView.prototype.setScroll = function (left, top) {\n          this.mainElement.style.overflow = \"scroll\";\n          this.mainElement.scrollLeft = left;\n          this.mainElement.scrollTop = top;\n          this.mainElement.style.overflow = \"\";\n        };\n\n        NativeScrollView.prototype.offsetScroll = function (left, top) {\n          if (left) this.mainElement.scrollLeft += left;\n          if (top) this.mainElement.scrollTop += top;\n        };\n\n        NativeScrollView.prototype.getScroll = function () {\n          return new Utils_1.Point(this.mainElement.scrollLeft, this.mainElement.scrollTop);\n        };\n\n        NativeScrollView.prototype.getSize = function () {\n          var boundingRect = this.mainElement.getBoundingClientRect();\n          return new Utils_1.Size(Math.floor(boundingRect.width), Math.floor(boundingRect.height));\n        };\n\n        NativeScrollView.prototype.getScrollBarWidth = function () {\n          return this.scrollBarWidth;\n        };\n\n        NativeScrollView.prototype.getScrollSize = function () {\n          return new Utils_1.Size(this.mainElement.scrollWidth, this.mainElement.scrollHeight);\n        };\n\n        return NativeScrollView;\n      }();\n\n      exports.NativeScrollView = NativeScrollView;\n      /***/\n    },\n    /* 136 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Base_1 = __webpack_require__(17);\n\n      var __1 = __webpack_require__(8);\n\n      var Utils_1 = __webpack_require__(15);\n\n      var Event_1 = __webpack_require__(10);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var Evt_1 = __webpack_require__(39);\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var InputManager =\n      /** @class */\n      function () {\n        function InputManager(parent, mainElement, layoutPointResolver, eventManager, actualZoom) {\n          this.mainElement = mainElement;\n          this.layoutPointResolver = layoutPointResolver;\n          this.eventManager = eventManager;\n          this.actualZoom = actualZoom;\n          this.focused = false;\n          this.focusLocked = false;\n          this.createInputElements(parent);\n        }\n\n        InputManager.prototype.dispose = function () {\n          this.detachInputElementEvents();\n          this.detachTextInputElementEvents();\n        };\n\n        InputManager.prototype.isFocused = function () {\n          return this.focused;\n        };\n\n        InputManager.prototype.captureFocus = function (inputElement, selectAll) {\n          var element = inputElement || this.inputElement;\n          element.focus({\n            preventScroll: true\n          });\n\n          if (selectAll) {\n            window.setTimeout(function () {\n              if (window.getSelection) {\n                // doesn't work in unit tests, see https://github.com/jsdom/jsdom/issues/317\n                var selection = window.getSelection();\n                var range = document.createRange();\n                range.selectNodeContents(element);\n                selection.removeAllRanges();\n                selection.addRange(range);\n              }\n            }, 100);\n          }\n        };\n\n        InputManager.prototype.setClipboardData = function (data) {\n          this.clipboardInputElement.value = data;\n          this.clipboardInputElement.focus({\n            preventScroll: true\n          });\n          this.clipboardInputElement.select();\n          document.execCommand('copy');\n          this.captureFocus();\n        };\n\n        InputManager.prototype.getClipboardData = function (callback) {\n          var _this = this;\n\n          if (navigator && navigator[\"clipboard\"]) {\n            navigator[\"clipboard\"].readText().then(function (clipText) {\n              callback(clipText);\n\n              _this.captureFocus();\n            }).catch(function () {\n              callback(\"\");\n\n              _this.captureFocus();\n            });\n          } else if (__1.Browser.IE) {\n            this.clipboardInputElement.value = \"\";\n            this.clipboardInputElement.focus({\n              preventScroll: true\n            });\n            this.clipboardInputElement.select();\n            document.execCommand('Paste');\n            callback(this.clipboardInputElement.value);\n            this.captureFocus();\n          }\n        };\n\n        InputManager.prototype.isPasteSupportedByBrowser = function () {\n          return __1.Browser.IE || __1.Browser.WebKitFamily && navigator && navigator[\"clipboard\"] !== undefined;\n        };\n\n        InputManager.prototype.createInputElements = function (parent) {\n          this.createInputElement(parent);\n          this.createTextInputElement(parent);\n          this.createClipboardInputElement(parent);\n        };\n\n        InputManager.prototype.setInputElementFocusHandlerMode = function () {\n          this.textInputElementContainer.setAttribute(\"class\", \"dxdi-text-input-container\");\n          this.captureFocus();\n        };\n\n        InputManager.prototype.setInputElementTextInputMode = function (text, position, size, style, className) {\n          this.textInputElementContainer.setAttribute(\"class\", \"dxdi-text-input-container \" + className);\n          this.textInputElement.innerText = text;\n          if (__1.Browser.Firefox && (!text || text === \"\")) this.textInputElement.innerHTML = \"&nbsp;\";\n          this.setTextInputElementBounds(position, size);\n          this.setTextInputElementStyle(style);\n          this.captureFocus(this.textInputElement, true);\n        };\n\n        InputManager.prototype.setTextInputElementBounds = function (position, size) {\n          var abs = this.layoutPointResolver.getAbsolutePoint(position);\n          size = size && size.transform(__1.UnitConverter.twipsToPixels);\n          Base_1.SetAbsoluteX(this.textInputElementContainer, Base_1.GetAbsolutePositionX(this.mainElement) + abs.x);\n          Base_1.SetAbsoluteY(this.textInputElementContainer, Base_1.GetAbsolutePositionY(this.mainElement) + abs.y);\n          this.textInputElementContainer.style.width = size !== undefined ? size.width + \"px\" : \"0px\";\n          this.textInputElementContainer.style.height = size !== undefined ? size.height + \"px\" : \"0px\";\n          this.textInputElementContainer.style.transform = \"scale(\" + this.actualZoom + \")\";\n          this.textInputElement.style.width = size !== undefined ? size.width + \"px\" : \"\";\n          this.textInputElement.style.height = size !== undefined ? size.height + \"px\" : \"auto\";\n        };\n\n        InputManager.prototype.setTextInputElementStyle = function (style) {\n          Utils_1.RenderUtils.applyStyleToElement(style, this.textInputElement);\n        };\n\n        InputManager.prototype.createInputElement = function (parent) {\n          this.inputElement = document.createElement(\"textarea\");\n          this.inputElement.readOnly = true;\n          this.inputElement.setAttribute(\"class\", \"dxdi-focus-input\");\n          this.attachInputElementEvents();\n          parent.appendChild(this.inputElement);\n        };\n\n        InputManager.prototype.attachInputElementEvents = function () {\n          this.onInputBlurHandler = this.onInputBlur.bind(this);\n          this.onInputFocusHandler = this.onInputFocus.bind(this);\n          this.onInputKeyDownHandler = this.onInputKeyDown.bind(this);\n          this.onPasteHandler = this.onPaste.bind(this);\n          this.inputElement.addEventListener(\"blur\", this.onInputBlurHandler);\n          this.inputElement.addEventListener(\"focus\", this.onInputFocusHandler);\n          this.inputElement.addEventListener(\"keydown\", this.onInputKeyDownHandler);\n          this.inputElement.addEventListener(\"paste\", this.onPasteHandler);\n        };\n\n        InputManager.prototype.detachInputElementEvents = function () {\n          this.inputElement.removeEventListener(\"blur\", this.onInputBlurHandler);\n          this.inputElement.removeEventListener(\"focus\", this.onInputFocusHandler);\n          this.inputElement.removeEventListener(\"keydown\", this.onInputKeyDownHandler);\n          this.inputElement.removeEventListener(\"paste\", this.onPasteHandler);\n        };\n\n        InputManager.prototype.createTextInputElement = function (parent) {\n          this.textInputElementContainer = document.createElement(\"div\");\n          this.textInputElementContainer.setAttribute(\"class\", \"dxdi-text-input-container\");\n          parent.appendChild(this.textInputElementContainer);\n          this.textInputElement = document.createElement(\"div\");\n          this.textInputElement.setAttribute(\"class\", \"dxdi-text-input\");\n          this.textInputElement.setAttribute(\"contenteditable\", \"true\");\n          this.attachTextInputElementEvents();\n          this.textInputElementContainer.appendChild(this.textInputElement);\n        };\n\n        InputManager.prototype.attachTextInputElementEvents = function () {\n          this.onTextInputBlurHandler = this.onTextInputBlur.bind(this);\n          this.onTextInputFocusHandler = this.onTextInputFocus.bind(this);\n          this.onTextInputKeyDownHandler = this.onTextInputKeyDown.bind(this);\n          this.textInputElement.addEventListener(\"blur\", this.onTextInputBlurHandler);\n          this.textInputElement.addEventListener(\"focus\", this.onTextInputFocusHandler);\n          this.textInputElement.addEventListener(\"keydown\", this.onTextInputKeyDownHandler);\n        };\n\n        InputManager.prototype.detachTextInputElementEvents = function () {\n          this.textInputElement.removeEventListener(\"blur\", this.onTextInputBlurHandler);\n          this.textInputElement.removeEventListener(\"focus\", this.onTextInputFocusHandler);\n          this.textInputElement.removeEventListener(\"keydown\", this.onTextInputKeyDownHandler);\n        };\n\n        InputManager.prototype.createClipboardInputElement = function (parent) {\n          this.clipboardInputElement = document.createElement(\"textarea\");\n          this.clipboardInputElement.setAttribute(\"class\", \"dxdi-clipboard-input\");\n          parent.appendChild(this.clipboardInputElement);\n        };\n\n        InputManager.prototype.blurControl = function () {\n          if (!this.focusLocked) {\n            this.focused = false;\n            Base_1.RemoveClassNameFromElement(this.mainElement, \"focused\");\n          }\n        };\n\n        InputManager.prototype.focusControl = function () {\n          this.focused = true;\n          this.focusLocked = false;\n          Base_1.AddClassNameToElement(this.mainElement, \"focused\");\n        };\n\n        InputManager.prototype.onInputBlur = function (evt) {\n          var _this = this;\n\n          this.blurControl();\n          Utils_1.raiseEvent(evt, this.getDiagramFocusEvent(evt), function (e) {\n            return _this.eventManager.onBlur(e);\n          });\n        };\n\n        InputManager.prototype.onInputFocus = function (evt) {\n          var _this = this;\n\n          this.focusControl();\n          Utils_1.raiseEvent(evt, this.getDiagramFocusEvent(evt), function (e) {\n            return _this.eventManager.onFocus(e);\n          });\n        };\n\n        InputManager.prototype.onInputKeyDown = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.getDiagramKeyboardEvent(evt), function (e) {\n            return _this.eventManager.onKeyDown(e);\n          });\n        };\n\n        InputManager.prototype.onTextInputBlur = function (evt) {\n          var _this = this;\n\n          this.blurControl();\n          Utils_1.raiseEvent(evt, this.getDiagramFocusEvent(evt), function (e) {\n            return _this.eventManager.onTextInputBlur(e);\n          });\n        };\n\n        InputManager.prototype.onTextInputFocus = function (evt) {\n          var _this = this;\n\n          this.focusControl();\n          Utils_1.raiseEvent(evt, this.getDiagramFocusEvent(evt), function (e) {\n            return _this.eventManager.onTextInputFocus(e);\n          });\n        };\n\n        InputManager.prototype.onTextInputKeyDown = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.getDiagramKeyboardEvent(evt), function (e) {\n            return _this.eventManager.onTextInputKeyDown(e);\n          });\n        };\n\n        InputManager.prototype.getDiagramKeyboardEvent = function (evt) {\n          return new Event_1.DiagramKeyboardEvent(KeyCode_1.getKeyModifiers(evt), Evt_1.Evt.GetKeyCode(evt), Evt_1.Evt.GetEventSource(evt).innerText); // TODO: check it\n        };\n\n        InputManager.prototype.lockFocus = function () {\n          var _this = this;\n\n          this.focusLocked = true;\n          setTimeout(function () {\n            return _this.focusLocked = false;\n          }, 10);\n        };\n\n        InputManager.prototype.replaceParent = function (parent) {\n          if (this.inputElement && this.inputElement.parentNode !== parent) parent.appendChild(this.inputElement);\n          if (this.textInputElementContainer && this.textInputElementContainer.parentNode !== parent) parent.appendChild(this.textInputElementContainer);\n          if (this.clipboardInputElement && this.clipboardInputElement.parentNode !== parent) parent.appendChild(this.clipboardInputElement);\n        };\n\n        InputManager.prototype.getDiagramFocusEvent = function (evt) {\n          return new Event_1.DiagramFocusEvent(evt.target.innerText);\n        };\n\n        InputManager.prototype.onPaste = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.getDiagramClipboardEvent(evt), function (e) {\n            return _this.eventManager.onPaste(e);\n          });\n        };\n\n        InputManager.prototype.getDiagramClipboardEvent = function (evt) {\n          var clipboardData;\n          if (evt.clipboardData !== undefined) clipboardData = evt.clipboardData.getData('text/plain');else clipboardData = window[\"clipboardData\"].getData('Text');\n          return new Event_1.DiagramClipboardEvent(clipboardData);\n        };\n\n        InputManager.prototype.notifyViewAdjusted = function (canvasOffset) {};\n\n        InputManager.prototype.notifyActualZoomChanged = function (actualZoom) {\n          this.actualZoom = actualZoom;\n        };\n\n        InputManager.prototype.notifyTextInputStart = function (item, text, position, size) {\n          var className = \"\";\n          if (item instanceof Shape_1.Shape) className = \"shape-text\";else if (item instanceof Connector_1.Connector) className = \"connector-text\";\n          this.setInputElementTextInputMode(text, position, size, item.styleText, className);\n        };\n\n        InputManager.prototype.notifyTextInputEnd = function (item) {\n          this.setInputElementFocusHandlerMode();\n        };\n\n        return InputManager;\n      }();\n\n      exports.InputManager = InputManager;\n      /***/\n    },\n    /* 137 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics84 = function extendStatics(d, b) {\n          _extendStatics84 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics84(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics84(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var __1 = __webpack_require__(8);\n\n      var Style_1 = __webpack_require__(27);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var PatternPrimitive_1 = __webpack_require__(138);\n\n      var ClipPathPrimitive_1 = __webpack_require__(41);\n\n      var CanvasManagerBase_1 = __webpack_require__(33);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Utils_2 = __webpack_require__(15);\n\n      var GRID_PAGES_LINEWIDTH = 2;\n\n      var CanvasPageManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasPageManager, _super);\n\n        function CanvasPageManager(parent, settings) {\n          var _this = _super.call(this, settings.zoomLevel) || this;\n\n          _this.snapPoint = new Utils_1.Point(0, 0);\n          _this.gridPatternId = Utils_2.RenderUtils.generateSvgElementId(\"gridPattern\");\n          _this.pagesGridPatternId = Utils_2.RenderUtils.generateSvgElementId(\"pagesGridPattern\");\n          _this.pagesGridClipId = Utils_2.RenderUtils.generateSvgElementId(\"pagesGridClip\");\n          _this.pageColor = settings.pageColor;\n          _this.modelSize = settings.modelSize;\n          _this.simpleView = settings.simpleView;\n          _this.gridSize = settings.gridSize;\n          _this.gridVisible = settings.gridVisible;\n          _this.pageSize = settings.pageLandscape ? new Utils_1.Size(settings.pageSize.height, settings.pageSize.width) : settings.pageSize;\n          _this.canvasViewOffset = new Utils_1.Point(0, 0);\n\n          _this.initContainers(parent);\n\n          return _this;\n        }\n\n        CanvasPageManager.prototype.initContainers = function (parent) {\n          this.backgroundContainer = parent;\n        };\n\n        CanvasPageManager.prototype.redraw = function () {\n          this.redrawPage(this.pageColor);\n          this.redrawGrid();\n        };\n\n        CanvasPageManager.prototype.redrawPage = function (color) {\n          var style = new Style_1.Style();\n          style[\"fill\"] = __1.ColorHelper.colorToHash(color);\n          this.getOrCreateElement(\"page-bg\", new RectaglePrimitive_1.RectanglePrimitive(0, 0, \"100%\", \"100%\", style, \"page\"), this.backgroundContainer);\n          this.createTextFloodFilter(\"page-bg-textflood-filter\", this.backgroundContainer, color);\n        };\n\n        CanvasPageManager.prototype.redrawGrid = function () {\n          this.updateGridElements(this.gridVisible, __1.UnitConverter.twipsToPixelsF(this.gridSize) * this.actualZoom);\n          this.updatePagesGridElements(this.simpleView, this.getAbsoluteSize(this.pageSize));\n        };\n\n        CanvasPageManager.prototype.getGridRectElement = function (primitive) {\n          if (this.gridRectElement === undefined) this.gridRectElement = this.createPrimitiveElement(primitive, this.backgroundContainer);\n          return this.gridRectElement;\n        };\n\n        CanvasPageManager.prototype.getGridPatternElement = function (primitive) {\n          if (this.gridPatternElement === undefined) this.gridPatternElement = this.createPrimitiveElement(primitive, this.backgroundContainer);\n          return this.gridPatternElement;\n        };\n\n        CanvasPageManager.prototype.updateGridElements = function (visible, absGridSize) {\n          var _this = this;\n\n          var gridRectPrimitive = new RectaglePrimitive_1.RectanglePrimitive(\"0\", \"0\", \"100%\", \"100%\", null, \"grid\", null, function (element) {\n            element.style.setProperty(\"fill\", Utils_2.RenderUtils.getUrlPathById(_this.gridPatternId));\n          });\n          var rectEl = this.getGridRectElement(gridRectPrimitive);\n          if (!visible) rectEl.style.display = \"none\";else {\n            rectEl.style.display = \"\";\n            this.changePrimitiveElement(gridRectPrimitive, rectEl);\n            var sizes = [0, 1, 2, 3, 4].map(function (i) {\n              return Math.round(absGridSize * i);\n            });\n            var outerPathCommands = [new PathPrimitive_1.PathPrimitiveMoveToCommand(sizes[4].toString(), \"0\"), new PathPrimitive_1.PathPrimitiveLineToCommand(sizes[4].toString(), sizes[4].toString()), new PathPrimitive_1.PathPrimitiveLineToCommand(\"0\", sizes[4].toString())];\n            var innerPathCommands = [];\n\n            for (var i = 1; i <= 3; i++) {\n              innerPathCommands.push(new PathPrimitive_1.PathPrimitiveMoveToCommand(sizes[i].toString(), \"0\"));\n              innerPathCommands.push(new PathPrimitive_1.PathPrimitiveLineToCommand(sizes[i].toString(), sizes[4].toString()));\n            }\n\n            for (var i = 1; i <= 3; i++) {\n              innerPathCommands.push(new PathPrimitive_1.PathPrimitiveMoveToCommand(\"0\", sizes[i].toString()));\n              innerPathCommands.push(new PathPrimitive_1.PathPrimitiveLineToCommand(sizes[4].toString(), sizes[i].toString()));\n            }\n\n            var commonSize = absGridSize * 4;\n            var canvasViewOffset = this.simpleView ? this.canvasViewOffset : Utils_1.Point.empty();\n            var gridPatternPrimitive = new PatternPrimitive_1.PatternPrimitive(this.gridPatternId, [new PathPrimitive_1.PathPrimitive(outerPathCommands, null, \"grid-outer-line\"), new PathPrimitive_1.PathPrimitive(innerPathCommands, null, \"grid-inner-line\")], (((canvasViewOffset.x + this.snapPoint.x) % commonSize - commonSize) % commonSize).toString(), (((canvasViewOffset.y + this.snapPoint.y) % commonSize - commonSize) % commonSize).toString(), commonSize.toString(), commonSize.toString());\n            this.changePrimitiveElement(gridPatternPrimitive, this.getGridPatternElement(gridPatternPrimitive));\n          }\n        };\n\n        CanvasPageManager.prototype.getPagesGridRectElement = function (primitive) {\n          return this.getOrCreateElement(\"grid-pages-rect\", primitive, this.backgroundContainer);\n        };\n\n        CanvasPageManager.prototype.getPagesGridClipPathElement = function (primitive) {\n          if (this.pagesGridClipPathElement === undefined) this.pagesGridClipPathElement = this.createPrimitiveElement(primitive, this.backgroundContainer);\n          return this.pagesGridClipPathElement;\n        };\n\n        CanvasPageManager.prototype.getPagesGridPatternElement = function (primitive) {\n          if (this.pagesGridPatternElement === undefined) this.pagesGridPatternElement = this.createPrimitiveElement(primitive, this.backgroundContainer);\n          return this.pagesGridPatternElement;\n        };\n\n        CanvasPageManager.prototype.updatePagesGridElements = function (simpleView, pageAbsSize) {\n          var _this = this;\n\n          var rectPrimitive = new RectaglePrimitive_1.RectanglePrimitive(\"0\", \"0\", \"100%\", \"100%\", null, \"grid-page\", this.pagesGridClipId, function (element) {\n            element.style.setProperty(\"fill\", Utils_2.RenderUtils.getUrlPathById(_this.pagesGridPatternId));\n            element.style.setProperty(\"display\", simpleView ? \"none\" : \"\");\n          });\n          this.getPagesGridRectElement(rectPrimitive);\n\n          if (!simpleView) {\n            var modelSize = this.modelSize.multiply(this.actualZoom);\n            var pageGridPathCommands = [new PathPrimitive_1.PathPrimitiveMoveToCommand((pageAbsSize.width - GRID_PAGES_LINEWIDTH / 2).toString(), \"0\"), new PathPrimitive_1.PathPrimitiveLineToCommand((pageAbsSize.width - GRID_PAGES_LINEWIDTH / 2).toString(), (pageAbsSize.height - GRID_PAGES_LINEWIDTH / 2).toString()), new PathPrimitive_1.PathPrimitiveLineToCommand(\"0\", (pageAbsSize.height - GRID_PAGES_LINEWIDTH / 2).toString())];\n            var pagesGridPatternPrimitive = new PatternPrimitive_1.PatternPrimitive(this.pagesGridPatternId, [new PathPrimitive_1.PathPrimitive(pageGridPathCommands, null, \"pages-grid-line\")], 0, 0, pageAbsSize.width.toString(), pageAbsSize.height.toString());\n            this.changePrimitiveElement(pagesGridPatternPrimitive, this.getPagesGridPatternElement(pagesGridPatternPrimitive));\n            var pagesGridClipPathPrimitive = new ClipPathPrimitive_1.ClipPathPrimitive(this.pagesGridClipId, [new RectaglePrimitive_1.RectanglePrimitive(0, 0, (__1.UnitConverter.twipsToPixelsF(modelSize.width) - GRID_PAGES_LINEWIDTH * 2).toString(), (__1.UnitConverter.twipsToPixelsF(modelSize.height) - GRID_PAGES_LINEWIDTH * 2).toString())]);\n            this.changePrimitiveElement(pagesGridClipPathPrimitive, this.getPagesGridClipPathElement(pagesGridClipPathPrimitive));\n          }\n        };\n\n        CanvasPageManager.prototype.notifyModelSizeChanged = function (size, offset) {\n          this.modelSize = size.clone();\n          this.redraw();\n        };\n\n        CanvasPageManager.prototype.notifyModelRectangleChanged = function (rectangle) {};\n\n        CanvasPageManager.prototype.notifySnapPointPositionChanged = function (point) {\n          this.snapPoint = point.transform(__1.UnitConverter.twipsToPixelsF);\n          this.redrawGrid();\n        };\n\n        CanvasPageManager.prototype.notifyPageColorChanged = function (color) {\n          this.pageColor = color;\n          this.redrawPage(this.pageColor);\n        };\n\n        CanvasPageManager.prototype.notifyModelChanged = function (changes) {};\n\n        CanvasPageManager.prototype.notifyPageSizeChanged = function (pageSize, pageLandscape) {\n          this.pageSize = pageLandscape ? new Utils_1.Size(pageSize.height, pageSize.width) : pageSize.clone();\n          this.redraw();\n        };\n\n        CanvasPageManager.prototype.notifyActualZoomChanged = function (actualZoom) {\n          this.actualZoom = actualZoom;\n          this.redraw();\n        };\n\n        CanvasPageManager.prototype.notifyViewAdjusted = function (canvasViewOffset) {\n          if (!this.canvasViewOffset.equals(canvasViewOffset)) {\n            this.canvasViewOffset = canvasViewOffset;\n            if (this.simpleView) this.redraw();\n          }\n        };\n\n        CanvasPageManager.prototype.notifyViewChanged = function (simpleView) {\n          this.simpleView = simpleView;\n          this.redraw();\n        };\n\n        CanvasPageManager.prototype.notifyGridChanged = function (showGrid, gridSize) {\n          this.gridVisible = showGrid;\n          this.gridSize = gridSize;\n          this.redraw();\n        };\n\n        return CanvasPageManager;\n      }(CanvasManagerBase_1.CanvasManagerBase);\n\n      exports.CanvasPageManager = CanvasPageManager;\n      /***/\n    },\n    /* 138 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics85 = function extendStatics(d, b) {\n          _extendStatics85 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics85(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics85(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var PatternPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(PatternPrimitive, _super);\n\n        function PatternPrimitive(id, children, x, y, width, height) {\n          var _this = _super.call(this) || this;\n\n          _this.id = id;\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          _this.children = children;\n          return _this;\n        }\n\n        PatternPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"pattern\");\n        };\n\n        PatternPrimitive.prototype.applyElementProperties = function (element) {\n          if (this.id) element.setAttribute(\"id\", this.id);\n          element.setAttribute(\"patternUnits\", \"userSpaceOnUse\");\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          this.setUnitAttribute(element, \"width\", this.width);\n          this.setUnitAttribute(element, \"height\", this.height);\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        return PatternPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.PatternPrimitive = PatternPrimitive;\n      /***/\n    },\n    /* 139 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics86 = function extendStatics(d, b) {\n          _extendStatics86 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics86(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics86(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var CanvasManagerBase_1 = __webpack_require__(33);\n\n      var DiagramSettings_1 = __webpack_require__(35);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var __1 = __webpack_require__(8);\n\n      var GroupPrimitive_1 = __webpack_require__(28);\n\n      var ClipPathPrimitive_1 = __webpack_require__(41);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var Utils_2 = __webpack_require__(15);\n\n      var ShadowFilterPrimitive_1 = __webpack_require__(140);\n\n      var Style_1 = __webpack_require__(27);\n\n      exports.CANVAS_MIN_PADDING = 12;\n      exports.CROP_OFFSET = 40;\n      var DRAG_SCROLL_CSSCLASS = \"dxdi-drag-scroll\",\n          DRAG_ITEM_CSSCLASS = \"dxdi-drag-item\";\n\n      var CanvasViewManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasViewManager, _super);\n\n        function CanvasViewManager(scroll, svgElement, modelSize, fixedZoomLevel, autoZoom, simpleView, rectangle) {\n          var _this = _super.call(this, fixedZoomLevel) || this;\n\n          _this.scroll = scroll;\n          _this.svgElement = svgElement;\n          _this.paddings = new Utils_1.Offset(0, 0, 0, 0);\n          _this.crop = Utils_1.Offset.empty();\n          _this.lockAutoZoom = false;\n          _this.pageClipPathId = Utils_2.RenderUtils.generateSvgElementId(\"page-clip\");\n          _this.pageShadowId = Utils_2.RenderUtils.generateSvgElementId(\"page-shadow\");\n          _this.onViewChanged = new __1.EventDispatcher();\n          modelSize = modelSize.transform(__1.UnitConverter.twipsToPixelsF);\n          _this.modelSize = modelSize;\n          _this.simpleView = simpleView;\n          _this.fixedZoomLevel = fixedZoomLevel;\n          _this.autoZoom = autoZoom;\n          _this.crop = _this.rectangleToCrop(rectangle, modelSize);\n\n          _this.updateElements(modelSize.multiply(fixedZoomLevel), Utils_1.Point.empty(), simpleView); // TODO: remove?\n\n\n          _this.getOrCreateElement(\"shadow\", new ShadowFilterPrimitive_1.ShadowFilterPrimitive(_this.pageShadowId), _this.svgElement);\n\n          return _this;\n        }\n\n        CanvasViewManager.prototype.update = function (toReset) {\n          if (toReset) this.reset(toReset.horizontal, toReset.vertical);else this.adjust(this.modelSize, this.fixedZoomLevel, this.autoZoom, this.simpleView, this.crop, Utils_1.Offset.empty());\n        };\n\n        CanvasViewManager.prototype.reset = function (horizontal, vertical) {\n          if (horizontal === void 0) {\n            horizontal = true;\n          }\n\n          if (vertical === void 0) {\n            vertical = true;\n          }\n\n          this.adjust(this.modelSize, this.fixedZoomLevel, this.autoZoom, this.simpleView, this.crop, undefined, {\n            horizontal: horizontal,\n            vertical: vertical\n          });\n        };\n\n        CanvasViewManager.prototype.notifyModelSizeChanged = function (size, offset) {\n          size = size.transform(__1.UnitConverter.twipsToPixelsF);\n          this.adjust(size, this.fixedZoomLevel, this.autoZoom, this.simpleView, this.crop, offset && offset.transform(__1.UnitConverter.twipsToPixelsF));\n          this.modelSize = size;\n        };\n\n        CanvasViewManager.prototype.notifyModelRectangleChanged = function (rectangle) {\n          var crop = this.rectangleToCrop(rectangle, this.modelSize, this.crop);\n\n          if (!this.crop || !this.crop.equals(crop)) {\n            if (this.simpleView) this.adjust(this.modelSize, this.fixedZoomLevel, this.autoZoom, this.simpleView, crop, Utils_1.Offset.empty());\n            this.crop = crop;\n          }\n        };\n\n        CanvasViewManager.prototype.notifySnapPointPositionChanged = function (point) {};\n\n        CanvasViewManager.prototype.notifyZoomChanged = function (fixedZoomLevel, autoZoom) {\n          this.adjust(this.modelSize, fixedZoomLevel, autoZoom, this.simpleView, this.crop, undefined, {\n            horizontal: false,\n            vertical: false\n          });\n          this.fixedZoomLevel = fixedZoomLevel;\n          this.autoZoom = autoZoom;\n        };\n\n        CanvasViewManager.prototype.notifyViewChanged = function (simpleView) {\n          this.adjust(this.modelSize, this.fixedZoomLevel, this.autoZoom, simpleView, this.crop);\n          this.simpleView = simpleView;\n        };\n\n        CanvasViewManager.prototype.notifyGridChanged = function (showGrid, gridSize) {};\n\n        CanvasViewManager.prototype.notifyDragStart = function (itemKeys) {\n          this.lockAutoZoom = true;\n          var className = this.svgElement.getAttribute(\"class\") + \" \" + DRAG_ITEM_CSSCLASS;\n          this.svgElement.setAttribute(\"class\", className);\n        };\n\n        CanvasViewManager.prototype.notifyDragEnd = function (itemKeys) {\n          this.lockAutoZoom = false;\n          var className = this.svgElement.getAttribute(\"class\").replace(\" \" + DRAG_ITEM_CSSCLASS, \"\");\n          this.svgElement.setAttribute(\"class\", className);\n          if (this.autoZoom) this.update({\n            horizontal: true,\n            vertical: true\n          });\n        };\n\n        CanvasViewManager.prototype.notifyDragScrollStart = function () {\n          var className = this.svgElement.getAttribute(\"class\") + \" \" + DRAG_SCROLL_CSSCLASS;\n          this.svgElement.setAttribute(\"class\", className);\n        };\n\n        CanvasViewManager.prototype.notifyDragScrollEnd = function () {\n          var className = this.svgElement.getAttribute(\"class\").replace(\" \" + DRAG_SCROLL_CSSCLASS, \"\");\n          this.svgElement.setAttribute(\"class\", className);\n        };\n\n        CanvasViewManager.prototype.checkFitToCanvas = function () {\n          var scrollSize = this.scroll.getScrollBarWidth();\n          var containerSize = this.scroll.getSize().offset(-exports.CANVAS_MIN_PADDING * 2, -exports.CANVAS_MIN_PADDING * 2);\n          var modelAbsSize = this.getActualModelSizeWithoutZoom(this.modelSize, this.simpleView, this.crop).multiply(this.actualZoom);\n          var scrollbars = this.checkScrollBars(containerSize, scrollSize, modelAbsSize, Utils_1.Offset.empty());\n          containerSize = containerSize.offset(scrollbars.vertical ? -scrollSize : 0, scrollbars.horizontal ? -scrollSize : 0);\n          return {\n            vertical: containerSize.height >= modelAbsSize.height,\n            horizontal: containerSize.width >= modelAbsSize.width\n          };\n        };\n\n        CanvasViewManager.prototype.rectangleToCrop = function (rectangle, modelSize, oldCrop) {\n          var absRectangle = rectangle.transform(__1.UnitConverter.twipsToPixelsF);\n          return new Utils_1.Offset(this.correctCrop(absRectangle.left), this.correctCrop(absRectangle.top), this.correctCrop(modelSize.width - absRectangle.right), this.correctCrop(modelSize.height - absRectangle.bottom));\n        };\n\n        CanvasViewManager.prototype.correctCrop = function (newVal) {\n          return exports.CROP_OFFSET * Math.floor(newVal / exports.CROP_OFFSET);\n        };\n\n        CanvasViewManager.prototype.setActualZoom = function (actualZoom) {\n          if (this.actualZoom !== actualZoom) {\n            this.actualZoom = actualZoom;\n            this.onViewChanged.raise1(function (l) {\n              return l.notifyActualZoomChanged(actualZoom);\n            });\n          }\n        };\n\n        CanvasViewManager.prototype.getActualAutoZoomLevel = function (autoZoom) {\n          if (autoZoom === DiagramSettings_1.AutoZoomMode.Disabled) return this.actualZoom;\n          var containerSize = this.scroll.getSize();\n          var scrollbarWidth = this.scroll.getScrollBarWidth();\n          var actualModelSizeWithoutZoom = this.getActualModelSizeWithoutZoom(this.modelSize, this.simpleView, this.crop);\n          return this.getActualAutoZoom(containerSize, scrollbarWidth, actualModelSizeWithoutZoom, autoZoom);\n        };\n\n        CanvasViewManager.prototype.getActualZoom = function (containerSize, scrollbarWidth, actualModelSizeWithoutZoom, fixedZoom, autoZoom) {\n          return this.lockAutoZoom ? this.actualZoom : autoZoom === DiagramSettings_1.AutoZoomMode.Disabled ? fixedZoom : this.getActualAutoZoom(containerSize, scrollbarWidth, actualModelSizeWithoutZoom, autoZoom);\n        };\n\n        CanvasViewManager.prototype.getActualAutoZoom = function (containerSize, scrollbarWidth, actualModelSizeWithoutZoom, autoZoom) {\n          if (autoZoom === DiagramSettings_1.AutoZoomMode.FitContent) {\n            return Math.min((containerSize.width - exports.CANVAS_MIN_PADDING * 2) / actualModelSizeWithoutZoom.width, (containerSize.height - exports.CANVAS_MIN_PADDING * 2) / actualModelSizeWithoutZoom.height, 1);\n          }\n\n          return Math.min((containerSize.width - exports.CANVAS_MIN_PADDING * 2 - scrollbarWidth) / actualModelSizeWithoutZoom.width, 1);\n        };\n\n        CanvasViewManager.prototype.tryNormalizePaddings = function () {\n          var scroll = this.scroll.getScroll();\n          var containerSize = this.scroll.getSize();\n          var scrollbarWidth = this.scroll.getScrollBarWidth();\n          var actualModelSize = this.getActualModelSizeWithoutZoom(this.modelSize, this.simpleView, this.crop).multiply(this.actualZoom);\n          var translate = new Utils_1.Point(this.paddings.left, this.paddings.top);\n          var currentTail = new Utils_1.Size(this.paddings.right, this.paddings.bottom);\n          var tail = this.getTailSpace(translate, scroll, actualModelSize, containerSize, scrollbarWidth);\n          if (!tail.equals(currentTail)) this.applyChanges(new Utils_1.Offset(translate.x, translate.y, tail.width, tail.height), actualModelSize, this.simpleView, this.crop);\n        };\n\n        CanvasViewManager.prototype.scrollBy = function (offset) {\n          var _a, _b, _c;\n\n          var scroll = this.scroll.getScroll();\n          var containerSize = this.scroll.getSize();\n          var scrollbarWidth = this.scroll.getScrollBarWidth();\n          var actualModelSize = this.getActualModelSizeWithoutZoom(this.modelSize, this.simpleView, this.crop).multiply(this.actualZoom);\n          var scrollbars = this.checkScrollBars(containerSize, scrollbarWidth, actualModelSize, this.paddings);\n          var translate = new Utils_1.Point(this.paddings.left, this.paddings.top);\n          var tail = new Utils_1.Size(this.paddings.right, this.paddings.bottom);\n          _a = this.changeScrollByOffset(translate, scroll, tail, actualModelSize, offset, containerSize, scrollbars), scroll = _a.scroll, offset = _a.offset;\n          _b = this.changeTranslateByOffset(translate, tail, offset, scrollbars), translate = _b.translate, offset = _b.offset;\n          _c = this.cropHiddenHead(translate, scroll), translate = _c.translate, scroll = _c.scroll;\n          tail = this.getTailSpace(translate, scroll, actualModelSize, containerSize, scrollbarWidth);\n          this.applyChanges(new Utils_1.Offset(translate.x, translate.y, tail.width, tail.height), actualModelSize, this.simpleView, this.crop, scroll);\n          return offset;\n        };\n\n        CanvasViewManager.prototype.changeScrollByOffset = function (curTranslate, curScroll, curTail, modelSize, curOffset, containerSize, scrollbars) {\n          var scroll = curScroll.clone();\n          var offset = curOffset.clone();\n          if (curOffset.x && scrollbars.horizontal) scroll.x -= offset.x = -this.getScrollDeltaByOffset(curOffset.x, curScroll.x, curTranslate.x + modelSize.width + curTail.width, containerSize.width, scrollbars.vertical);\n          if (curOffset.y && scrollbars.vertical) scroll.y -= offset.y = -this.getScrollDeltaByOffset(curOffset.y, curScroll.y, curTranslate.y + modelSize.height + curTail.height, containerSize.height, scrollbars.horizontal);\n          return {\n            scroll: scroll,\n            offset: offset\n          };\n        };\n\n        CanvasViewManager.prototype.changeTranslateByOffset = function (curTranslate, curTail, curOffset, scrollbars) {\n          var translate = curTranslate.clone();\n          var offset = curOffset.clone();\n          if (curOffset.x && !scrollbars.horizontal) translate.x += offset.x = this.getTranslateDeltaByOffset(curOffset.x, translate.x, curTail.width);\n          if (curOffset.y && !scrollbars.vertical) translate.y += offset.y = this.getTranslateDeltaByOffset(curOffset.y, translate.y, curTail.height);\n          return {\n            translate: translate,\n            offset: offset\n          };\n        };\n\n        CanvasViewManager.prototype.getScrollDeltaByOffset = function (offset, scroll, commonWidth, containerWidth, hasScrollbar) {\n          if (offset > 0) return -Math.min(scroll, offset);\n          var maxScroll = commonWidth - (containerWidth - (hasScrollbar ? this.scroll.getScrollBarWidth() : 0));\n          return Math.min(maxScroll - scroll, -offset);\n        };\n\n        CanvasViewManager.prototype.getTranslateDeltaByOffset = function (offset, headPadding, tailPadding) {\n          if (!offset) return 0;\n          return offset < 0 ? -Math.min(headPadding - exports.CANVAS_MIN_PADDING, -offset) : Math.min(tailPadding - exports.CANVAS_MIN_PADDING, offset);\n        };\n\n        CanvasViewManager.prototype.getActualModelSizeWithoutZoom = function (originModelSize, simpleView, crop) {\n          return simpleView && crop ? originModelSize.offset(-crop.horizontal, -crop.vertical) : originModelSize;\n        };\n\n        CanvasViewManager.prototype.setScrollTo = function (modelPoint, offsetPoint) {\n          var containerSize = this.scroll.getSize();\n          var shift = this.getVisibileAreaAbsShift();\n          var absPoint = modelPoint.transform(__1.UnitConverter.twipsToPixelsF).multiply(this.actualZoom).offset(shift.x, shift.y);\n          var scroll = this.scroll.getScroll();\n\n          if (!offsetPoint) {\n            if (absPoint.x < 0) scroll.x += absPoint.x - exports.CANVAS_MIN_PADDING;\n            if (absPoint.y < 0) scroll.y += absPoint.y - exports.CANVAS_MIN_PADDING;\n            if (absPoint.x > containerSize.width) scroll.x += absPoint.x - containerSize.width + exports.CANVAS_MIN_PADDING;\n            if (absPoint.y > containerSize.height) scroll.y += absPoint.y - containerSize.height + exports.CANVAS_MIN_PADDING;\n          } else {\n            scroll.x += absPoint.x - offsetPoint.x;\n            scroll.y += absPoint.y - offsetPoint.y;\n          }\n\n          var modelAbsSize = this.modelSize.multiply(this.actualZoom);\n          scroll.x = Math.max(0, Math.min(scroll.x, modelAbsSize.width + this.paddings.horizontal - containerSize.width));\n          scroll.y = Math.max(0, Math.min(scroll.y, modelAbsSize.height + this.paddings.vertical - containerSize.height));\n          this.scroll.setScroll(scroll.x, scroll.y);\n        };\n\n        CanvasViewManager.prototype.updateElements = function (modelAbsSize, translate, simpleView) {\n          this.updatePageElement(modelAbsSize, translate, simpleView);\n          this.updateCanvasElement(translate);\n        };\n\n        CanvasViewManager.prototype.updateCanvasElement = function (translate) {\n          this.canvasElement = this.getOrCreateElement(\"dxdi-main\", new GroupPrimitive_1.GroupPrimitive([], \"dxdi-main\", null, null, function (el) {\n            el.setAttribute(\"transform\", \"translate(\" + Math.round(translate.x) + \", \" + Math.round(translate.y) + \")\");\n          }), this.svgElement);\n        };\n\n        CanvasViewManager.prototype.updatePageElement = function (modelAbsSize, translate, simpleView) {\n          if (!simpleView) {\n            this.getOrCreateElement(\"pageShadowRect\", new RectaglePrimitive_1.RectanglePrimitive(translate.x.toString(), translate.y.toString(), modelAbsSize.width.toString(), modelAbsSize.height.toString(), new Style_1.EmptyStyle({\n              \"filter\": Utils_2.RenderUtils.getUrlPathById(this.pageShadowId)\n            }), \"dxdi-page-shadow\"), this.svgElement);\n          }\n\n          this.pageElement = this.getOrCreateElement(\"page\", new GroupPrimitive_1.GroupPrimitive([], \"dxdi-page\", null, !simpleView ? this.pageClipPathId : \"\", function (el) {\n            el.setAttribute(\"transform\", \"translate(\" + (simpleView ? 0 : Math.round(translate.x)) + \", \" + (simpleView ? 0 : Math.round(translate.y)) + \")\");\n          }), this.svgElement);\n          this.getOrCreateElement(\"pageClip\", this.createPageClipPathPrimitive(modelAbsSize), this.svgElement);\n        };\n\n        CanvasViewManager.prototype.createPageClipPathPrimitive = function (modelAbsSize) {\n          var children = [];\n          children.push(new RectaglePrimitive_1.RectanglePrimitive(0, 0, modelAbsSize.width.toString(), modelAbsSize.height.toString()));\n          return new ClipPathPrimitive_1.ClipPathPrimitive(this.pageClipPathId, children);\n        };\n\n        CanvasViewManager.prototype.adjust = function (newModelSize, fixedZoomLevel, autoZoom, simpleView, crop, offset, toReset) {\n          var containerSize = this.scroll.getSize();\n          var actualModelSizeWithoutZoom = this.getActualModelSizeWithoutZoom(newModelSize, simpleView, crop);\n\n          if (!this.lockAutoZoom && (autoZoom || !offset || !this.modelSize)) {\n            var scrollbarWidth = this.scroll.getScrollBarWidth();\n            var actualZoom = this.getActualZoom(containerSize, scrollbarWidth, actualModelSizeWithoutZoom, fixedZoomLevel, autoZoom);\n            if (autoZoom && actualZoom === this.actualZoom) this.resizeView(actualModelSizeWithoutZoom, actualZoom, containerSize, simpleView, crop, offset || Utils_1.Offset.empty());else {\n              this.resetView(actualModelSizeWithoutZoom, actualZoom, containerSize, simpleView, crop, toReset);\n              this.setActualZoom(actualZoom);\n            }\n          } else this.resizeView(actualModelSizeWithoutZoom, this.actualZoom, containerSize, simpleView, crop, offset);\n        };\n\n        CanvasViewManager.prototype.resetView = function (actualModelSizeWithoutZoom, actualZoom, containerSize, simpleView, cropWithoutZoom, toReset) {\n          var actualModelSize = actualModelSizeWithoutZoom.multiply(actualZoom);\n          var paddings = Utils_1.Offset.fromNumber(exports.CANVAS_MIN_PADDING);\n          toReset = toReset || {\n            horizontal: true,\n            vertical: true\n          };\n\n          if (!toReset.horizontal && this.paddings) {\n            paddings.left = this.paddings.left;\n            paddings.right = this.paddings.right;\n          }\n\n          if (!toReset.vertical && this.paddings) {\n            paddings.top = this.paddings.top;\n            paddings.bottom = this.paddings.bottom;\n          }\n\n          var scrollbars = this.checkScrollBars(containerSize, this.scroll.getScrollBarWidth(), actualModelSize, paddings);\n          var scrollBarWidth = this.scroll.getScrollBarWidth();\n          var scroll = toReset.horizontal || toReset.vertical ? this.scroll.getScroll() : undefined;\n\n          if (toReset.horizontal) {\n            var paddingsH = Math.max((containerSize.width - (scrollbars.vertical ? scrollBarWidth : 0) - actualModelSize.width) / 2, exports.CANVAS_MIN_PADDING);\n            paddings.left = paddingsH;\n            paddings.right = paddingsH;\n            scroll.x = 0;\n          }\n\n          if (toReset.vertical) {\n            var paddingsV = Math.max((containerSize.height - (scrollbars.horizontal ? scrollBarWidth : 0) - actualModelSize.height) / 2, exports.CANVAS_MIN_PADDING);\n            paddings.top = paddingsV;\n            paddings.bottom = paddingsV;\n            scroll.y = 0;\n          }\n\n          this.applyChanges(paddings, actualModelSize, simpleView, cropWithoutZoom.multiply(actualZoom), scroll);\n        };\n\n        CanvasViewManager.prototype.resizeView = function (actualModelSizeWithoutZoom, actualZoom, containerSize, simpleView, cropWithoutZoom, offset) {\n          var _a, _b;\n\n          var oldZoom = this.actualZoom;\n          var oldCrop = this.simpleView && this.crop ? this.crop.multiply(oldZoom) : Utils_1.Offset.empty();\n          var actualModelSize = actualModelSizeWithoutZoom.multiply(actualZoom);\n          offset = offset.multiply(actualZoom);\n          var newCrop = simpleView && cropWithoutZoom ? cropWithoutZoom.multiply(actualZoom) : Utils_1.Offset.empty();\n          var translate = new Utils_1.Point(this.paddings.left, this.paddings.top),\n              scroll = this.scroll.getScroll();\n          _a = this.applyOffset(translate, scroll, oldCrop, newCrop, offset), translate = _a.translate, scroll = _a.scroll;\n          _b = this.cropHiddenHead(translate, scroll), translate = _b.translate, scroll = _b.scroll;\n          var tailSpace = this.getTailSpace(translate, scroll, actualModelSize, containerSize, this.scroll.getScrollBarWidth());\n          var newPaddings = new Utils_1.Offset(translate.x, translate.y, tailSpace.width, tailSpace.height);\n          this.applyChanges(newPaddings, actualModelSize, simpleView, newCrop, scroll);\n        };\n\n        CanvasViewManager.prototype.applyChanges = function (paddings, actualModelSize, simpleView, crop, scroll) {\n          var translate = new Utils_1.Point(paddings.left, paddings.top);\n          if (simpleView && crop) translate = translate.offset(-crop.left, -crop.top);\n          this.updateElements(actualModelSize, translate, simpleView);\n          this.setSvgSize(actualModelSize.width + paddings.horizontal, actualModelSize.height + paddings.vertical);\n          this.onViewChanged.raise1(function (l) {\n            return l.notifyViewAdjusted(new Utils_1.Point(translate.x, translate.y));\n          });\n          scroll && this.scroll.setScroll(scroll.x, scroll.y);\n          this.paddings = paddings;\n        };\n\n        CanvasViewManager.prototype.applyOffset = function (curTranslate, curScroll, oldCrop, newCrop, modelOffset) {\n          var translate = curTranslate.clone();\n          var scroll = curScroll.clone();\n          var offset = this.getActualOffset(oldCrop, newCrop, modelOffset);\n\n          if (offset.left) {\n            translate.x = Math.max(exports.CANVAS_MIN_PADDING, translate.x - offset.left);\n            scroll.x += offset.left - (curTranslate.x - translate.x);\n          }\n\n          if (offset.top) {\n            translate.y = Math.max(exports.CANVAS_MIN_PADDING, translate.y - offset.top);\n            scroll.y += offset.top - (curTranslate.y - translate.y);\n          }\n\n          return {\n            translate: translate,\n            scroll: scroll\n          };\n        };\n\n        CanvasViewManager.prototype.cropHiddenHead = function (curTranslate, curScroll) {\n          var scroll = curScroll.clone();\n          var translate = curTranslate.clone();\n\n          if (scroll.x && translate.x > exports.CANVAS_MIN_PADDING) {\n            var delta = translate.x - Math.max(exports.CANVAS_MIN_PADDING, translate.x - scroll.x);\n            translate.x -= delta;\n            scroll.x -= delta;\n          }\n\n          if (scroll.y && translate.y > exports.CANVAS_MIN_PADDING) {\n            var delta = translate.y - Math.max(exports.CANVAS_MIN_PADDING, translate.y - scroll.y);\n            translate.y -= delta;\n            scroll.y -= delta;\n          }\n\n          return {\n            translate: translate,\n            scroll: scroll\n          };\n        };\n\n        CanvasViewManager.prototype.getTailSpace = function (curTranslate, curScroll, newModelAbsSize, containerSize, scrollbarWidth) {\n          var translate = curTranslate.clone();\n          var scroll = curScroll.clone();\n          var right = Math.max(containerSize.width + scroll.x - (translate.x + newModelAbsSize.width), exports.CANVAS_MIN_PADDING);\n          var bottom = Math.max(containerSize.height + scroll.y - (translate.y + newModelAbsSize.height), exports.CANVAS_MIN_PADDING);\n          var scrollbars = this.checkScrollBars(containerSize, scrollbarWidth, newModelAbsSize, new Utils_1.Offset(translate.x, translate.y, right, bottom));\n          if (scrollbars.vertical) right = Math.max(exports.CANVAS_MIN_PADDING, right - scrollbarWidth);\n          if (scrollbars.horizontal) bottom = Math.max(exports.CANVAS_MIN_PADDING, bottom - scrollbarWidth);\n          return new Utils_1.Size(right, bottom);\n        };\n\n        CanvasViewManager.prototype.getActualOffset = function (oldCrop, newCrop, docOffset) {\n          return new Utils_1.Offset(-(newCrop.left - oldCrop.left) + docOffset.left, -(newCrop.top - oldCrop.top) + docOffset.top, -(newCrop.right - oldCrop.right) + docOffset.right, -(newCrop.bottom - oldCrop.bottom) + docOffset.bottom);\n        };\n\n        CanvasViewManager.prototype.checkScrollBars = function (containerSize, scrollBarWidth, modelAbsSize, paddings) {\n          var hasHorizontalScroll = containerSize.width < modelAbsSize.width + paddings.horizontal;\n          var hasVerticalScroll = containerSize.height < modelAbsSize.height + paddings.vertical;\n          if (hasHorizontalScroll && !hasVerticalScroll) hasVerticalScroll = containerSize.height - scrollBarWidth < modelAbsSize.height + paddings.vertical;\n          if (hasVerticalScroll && !hasHorizontalScroll) hasHorizontalScroll = containerSize.width - scrollBarWidth < modelAbsSize.width + paddings.horizontal;\n          return {\n            horizontal: hasHorizontalScroll,\n            vertical: hasVerticalScroll\n          };\n        };\n\n        CanvasViewManager.prototype.setSvgSize = function (width, height) {\n          Utils_2.RenderUtils.updateSvgElementSize(this.svgElement, width, height);\n        };\n\n        CanvasViewManager.prototype.getVisibileAreaAbsShift = function () {\n          var scroll = this.scroll.getScroll();\n          var paddings = this.paddings.clone();\n          var simpleView = this.simpleView;\n          var cropLeft = simpleView && this.crop ? this.crop.left * this.actualZoom : 0;\n          var cropTop = simpleView && this.crop ? this.crop.top * this.actualZoom : 0;\n          return new Utils_1.Point(paddings.left - cropLeft - scroll.x, paddings.top - cropTop - scroll.y);\n        };\n        /* ILayoutPointResolver */\n\n\n        CanvasViewManager.prototype.getModelPoint = function (absolutePoint, checkScrollArea) {\n          var shift = this.getVisibileAreaAbsShift();\n          var modelPoint = absolutePoint.offset(-shift.x, -shift.y).multiply(1 / this.actualZoom);\n\n          if (checkScrollArea) {\n            var scrollSize = this.scroll.getSize();\n            if (absolutePoint.x < 0 || absolutePoint.y < 0 || absolutePoint.x > scrollSize.width || absolutePoint.y > scrollSize.height) return null;\n            if (modelPoint.x < 0 || modelPoint.y < 0) return null;\n            if (modelPoint.x > this.modelSize.width || modelPoint.y > this.modelSize.height) return null;\n          }\n\n          return modelPoint.transform(__1.UnitConverter.pixelsToTwips);\n        };\n\n        CanvasViewManager.prototype.getAbsolutePoint = function (modelPoint, checkScrollArea) {\n          var shift = this.getVisibileAreaAbsShift();\n          var absPoint = modelPoint.transform(__1.UnitConverter.twipsToPixelsF).multiply(this.actualZoom).offset(shift.x, shift.y);\n\n          if (checkScrollArea) {\n            if (absPoint.x < 0 || absPoint.y < 0) return null;\n            var scrollSize = this.scroll.getSize();\n            if (absPoint.x > scrollSize.width || absPoint.y > scrollSize.height) return null;\n          }\n\n          return absPoint;\n        };\n\n        return CanvasViewManager;\n      }(CanvasManagerBase_1.CanvasManagerBase);\n\n      exports.CanvasViewManager = CanvasViewManager;\n      /***/\n    },\n    /* 140 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics87 = function extendStatics(d, b) {\n          _extendStatics87 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics87(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics87(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var FilterPrimitive_1 = __webpack_require__(85);\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var ShadowFilterPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(ShadowFilterPrimitive, _super);\n\n        function ShadowFilterPrimitive() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ShadowFilterPrimitive.prototype.createChildElements = function (parent) {\n          var feGaussianBlur = document.createElementNS(RenderManager_1.svgNS, \"feGaussianBlur\");\n          feGaussianBlur.setAttribute(\"in\", \"SourceGraphic\");\n          feGaussianBlur.setAttribute(\"stdDeviation\", \"4.6\");\n          parent.appendChild(feGaussianBlur);\n          var feOffset = document.createElementNS(RenderManager_1.svgNS, \"feOffset\");\n          feOffset.setAttribute(\"dx\", \"0\");\n          feOffset.setAttribute(\"dy\", \"0\");\n          parent.appendChild(feOffset);\n          var feMerge = document.createElementNS(RenderManager_1.svgNS, \"feMerge\");\n          parent.appendChild(feMerge);\n          var feMergeNode1 = document.createElementNS(RenderManager_1.svgNS, \"feMergeNode\");\n          feMerge.appendChild(feMergeNode1);\n          var feMergeNode2 = document.createElementNS(RenderManager_1.svgNS, \"feMergeNode\");\n          feMergeNode2.setAttribute(\"in\", \"SourceGraphic\");\n          feMerge.appendChild(feMergeNode2);\n        };\n\n        return ShadowFilterPrimitive;\n      }(FilterPrimitive_1.FilterPrimitive);\n\n      exports.ShadowFilterPrimitive = ShadowFilterPrimitive;\n      /***/\n    },\n    /* 141 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics88 = function extendStatics(d, b) {\n          _extendStatics88 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics88(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics88(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Primitive_1 = __webpack_require__(18);\n\n      var MaskPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(MaskPrimitive, _super);\n\n        function MaskPrimitive(id, children, className, x, y, width, height) {\n          var _this = _super.call(this, null, className) || this;\n\n          _this.id = id;\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          _this.children = children;\n          return _this;\n        }\n\n        MaskPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"mask\");\n        };\n\n        MaskPrimitive.prototype.applyElementProperties = function (element) {\n          if (this.id) element.setAttribute(\"id\", this.id);\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          this.setUnitAttribute(element, \"width\", this.width);\n          this.setUnitAttribute(element, \"height\", this.height);\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        return MaskPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.MaskPrimitive = MaskPrimitive;\n      /***/\n    },\n    /* 142 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Evt_1 = __webpack_require__(39);\n\n      var Base_1 = __webpack_require__(17);\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var SCROLL_EDGE = 40,\n          SCROLL_RATIO = 5,\n          SCROLL_MAXOFFSET = 5,\n          SCROLL_DELAY = 50;\n\n      var AutoScrollController =\n      /** @class */\n      function () {\n        function AutoScrollController(scroll, mainElement) {\n          this.scroll = scroll;\n          this.mainElement = mainElement;\n          this.leftButtonPressed = false;\n          this.scrollDragging = false;\n          this.scrollTimer = -1;\n          this.scrollBarWidth = Base_1.GetVerticalScrollBarWidth();\n        }\n\n        AutoScrollController.prototype.onMouseMove = function (evt, raiseMouseMoveFunc) {\n          this.clearScrollTimer();\n          if (!Evt_1.Evt.IsLeftButtonPressed(evt)) this.leftButtonPressed = false;\n          if (this.canAutoScroll()) this.changeScrollPosition(evt, raiseMouseMoveFunc, false);\n        };\n\n        AutoScrollController.prototype.onMouseDown = function (evt) {\n          this.leftButtonPressed = !!Evt_1.Evt.IsLeftButtonPressed(evt);\n        };\n\n        AutoScrollController.prototype.onMouseUp = function (evt) {\n          this.clearScrollTimer();\n          this.leftButtonPressed = false;\n        };\n\n        AutoScrollController.prototype.onMouseEnter = function (evt) {\n          var _this = this;\n\n          if (Evt_1.Evt.IsLeftButtonPressed(evt)) {\n            setTimeout(function () {\n              _this.leftButtonPressed = true;\n            }, 500);\n          }\n        };\n\n        AutoScrollController.prototype.onDragScrollStart = function () {\n          this.scrollDragging = true;\n        };\n\n        AutoScrollController.prototype.onDragScrollEnd = function () {\n          this.scrollDragging = false;\n        };\n\n        AutoScrollController.prototype.canAutoScroll = function () {\n          return this.leftButtonPressed && !this.scrollDragging;\n        };\n\n        AutoScrollController.prototype.changeScrollPosition = function (evt, raiseMouseMoveFunc, raiseMouseMove) {\n          var _this = this;\n\n          var x = evt.pageX - Base_1.GetAbsolutePositionX(this.mainElement);\n          var y = evt.pageY - Base_1.GetAbsolutePositionY(this.mainElement);\n          var size = this.scroll.getSize();\n          var scrollSize = this.scroll.getScrollSize();\n          var width = size.width;\n          if (size.width < scrollSize.width) width -= this.scrollBarWidth;\n          var height = size.height;\n          if (size.height < scrollSize.height) height -= this.scrollBarWidth;\n          var changed = false;\n\n          if (x <= SCROLL_EDGE) {\n            this.scroll.offsetScroll(-this.getScrollingOffset(x), 0);\n            changed = true;\n          } else if (width - SCROLL_EDGE <= x) {\n            this.scroll.offsetScroll(this.getScrollingOffset(width - x), 0);\n            changed = true;\n          }\n\n          if (y <= SCROLL_EDGE) {\n            this.scroll.offsetScroll(0, -this.getScrollingOffset(y));\n            changed = true;\n          } else if (height - SCROLL_EDGE <= y) {\n            this.scroll.offsetScroll(0, this.getScrollingOffset(height - y));\n            changed = true;\n          }\n\n          if (changed) this.scrollTimer = window.setTimeout(function () {\n            return _this.changeScrollPosition(evt, raiseMouseMoveFunc, true);\n          }, SCROLL_DELAY);\n          if (raiseMouseMove) raiseMouseMoveFunc();\n        };\n\n        AutoScrollController.prototype.clearScrollTimer = function () {\n          if (this.scrollTimer > -1) {\n            window.clearTimeout(this.scrollTimer);\n            this.scrollTimer = -1;\n          }\n        };\n\n        AutoScrollController.prototype.getScrollingOffset = function (edgeOffset) {\n          var offset = Math.pow((SCROLL_EDGE - edgeOffset) / SCROLL_RATIO, 2);\n          return Math.min(offset, SCROLL_MAXOFFSET);\n        };\n\n        AutoScrollController.createMainElement = function (parent) {\n          var element = document.createElement(\"div\");\n          element.setAttribute(\"class\", \"dxdi-control\");\n          parent.appendChild(element);\n          return element;\n        };\n\n        AutoScrollController.createSvgElement = function (parent, forExport) {\n          if (forExport === void 0) {\n            forExport = false;\n          }\n\n          var svgElement = document.createElementNS(RenderManager_1.svgNS, \"svg\");\n          svgElement.className.baseVal = \"dxdi-canvas\" + (forExport ? \" export\" : \"\");\n          parent.appendChild(svgElement);\n          return svgElement;\n        };\n\n        return AutoScrollController;\n      }();\n\n      exports.AutoScrollController = AutoScrollController;\n      /***/\n    },\n    /* 143 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics89 = function extendStatics(d, b) {\n          _extendStatics89 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics89(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics89(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ConnectorPointsCalculatorBase_1 = __webpack_require__(89);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(30);\n\n      var ConnectorPointsCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsCalculator, _super);\n\n        function ConnectorPointsCalculator() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ConnectorPointsCalculator.prototype.getPoints = function () {\n          return this.connector.points.map(function (pt, index) {\n            return new ConnectorRenderPoint_1.ConnectorRenderPoint(pt.x, pt.y, index);\n          });\n        };\n\n        return ConnectorPointsCalculator;\n      }(ConnectorPointsCalculatorBase_1.ConnectorPointsCalculatorBase);\n\n      exports.ConnectorPointsCalculator = ConnectorPointsCalculator;\n      /***/\n    },\n    /* 144 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics90 = function extendStatics(d, b) {\n          _extendStatics90 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics90(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics90(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ConnectorPointsCalculatorBase_1 = __webpack_require__(89);\n\n      var ConnectorPointsOrthogonalUndefinedSideCalculator_1 = __webpack_require__(145);\n\n      var ConnectorPointsOrthogonalSouthSideCalculator_1 = __webpack_require__(146);\n\n      var ConnectorPointsOrthogonalNorthSideCalculator_1 = __webpack_require__(147);\n\n      var ConnectorPointsOrthogonalEastSideCalculator_1 = __webpack_require__(148);\n\n      var ConnectorPointsOrthogonalWestSideCalculator_1 = __webpack_require__(149);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(30);\n\n      var ConnectorPointsOrthogonalCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalCalculator, _super);\n\n        function ConnectorPointsOrthogonalCalculator(connector) {\n          var _this = _super.call(this, connector) || this;\n\n          _this.sideCalculators = {};\n          _this.sideCalculators[DiagramItem_1.ConnectionPointSide.Undefined] = new ConnectorPointsOrthogonalUndefinedSideCalculator_1.ConnectorPointsOrthogonalUndefinedSideCalculator(_this);\n          _this.sideCalculators[DiagramItem_1.ConnectionPointSide.South] = new ConnectorPointsOrthogonalSouthSideCalculator_1.ConnectorPointsOrthogonalSouthSideCalculator(_this);\n          _this.sideCalculators[DiagramItem_1.ConnectionPointSide.North] = new ConnectorPointsOrthogonalNorthSideCalculator_1.ConnectorPointsOrthogonalNorthSideCalculator(_this);\n          _this.sideCalculators[DiagramItem_1.ConnectionPointSide.East] = new ConnectorPointsOrthogonalEastSideCalculator_1.ConnectorPointsOrthogonalEastSideCalculator(_this);\n          _this.sideCalculators[DiagramItem_1.ConnectionPointSide.West] = new ConnectorPointsOrthogonalWestSideCalculator_1.ConnectorPointsOrthogonalWestSideCalculator(_this);\n          return _this;\n        }\n\n        Object.defineProperty(ConnectorPointsOrthogonalCalculator.prototype, \"beginRect\", {\n          get: function get() {\n            return this.connector.beginItem ? this.connector.beginItem.rectangle : undefined;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorPointsOrthogonalCalculator.prototype, \"endRect\", {\n          get: function get() {\n            return this.connector.endItem ? this.connector.endItem.rectangle : undefined;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ConnectorPointsOrthogonalCalculator.prototype.getPoints = function () {\n          var points = this.connector.points.map(function (pt, index) {\n            return new ConnectorRenderPoint_1.ConnectorRenderPoint(pt.x, pt.y, index);\n          });\n          this.removeUnnecessaryLinePoints(points);\n          var beginIndex = 0,\n              endIndex = points.length - 1;\n          var beginSide = this.getPointSide(points, 0);\n          var beginNextSide = this.getPointSide(points, 1);\n          var endSide = this.getPointSide(points, points.length - 1);\n          var endPrevSide = this.getPointSide(points, points.length - 1 - 1);\n          var beginSideCalculator = this.getSideCalculator(beginSide);\n          var endSideCalculator = this.getSideCalculator(endSide);\n          var originRect = this.beginRect;\n          var originPoint = beginSideCalculator.getCorrectOriginPoint(points[beginIndex], originRect);\n          var targetPoint = points[beginIndex + 1];\n\n          if (points.length === 2 && beginSideCalculator.isOnSidePoint(originPoint, targetPoint) && beginSideCalculator.isDirectConnectionAllowed(beginNextSide, originPoint, targetPoint)) {\n            var directConnectionPoints = beginSideCalculator.getDirectConnectionPoints(originPoint, targetPoint);\n            directConnectionPoints.forEach(function (pt) {\n              points.splice(beginIndex + 1, 0, pt);\n              beginIndex++;\n              endIndex++;\n            });\n          } else {\n            var bOffsetPoints = beginSideCalculator.getBeginOffsetPoints(beginNextSide, points[beginIndex], points[beginIndex + 1], this.beginRect);\n            bOffsetPoints.forEach(function (pt) {\n              points.splice(beginIndex + 1, 0, pt);\n            });\n            beginIndex += bOffsetPoints.length;\n            endIndex += bOffsetPoints.length;\n            var eOffsetPoints = endSideCalculator.getEndOffsetPoints(endPrevSide, points[endIndex], points[endIndex - 1], this.endRect);\n            eOffsetPoints.forEach(function (pt, index) {\n              points.splice(endIndex + index, 0, pt);\n            });\n\n            for (var index = beginIndex; index < endIndex; index++) {\n              var nextIndex = index + 1;\n              var middlePoint = this.getMiddlePoint(points[index], points[index - 1], index - 1 === 0, points[nextIndex], points[nextIndex + 1], nextIndex + 1 === points.length - 1);\n\n              if (middlePoint !== undefined) {\n                points.splice(index + 1, 0, middlePoint);\n                index++;\n                endIndex++;\n              }\n            }\n          }\n\n          this.removeUnnecessaryLinePoints(points);\n          return points;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.getSideCalculator = function (side) {\n          return this.sideCalculators[side];\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.getPointSide = function (points, index) {\n          if (index === 0 && this.connector.beginItem) {\n            var connectionPointIndex = this.connector.beginConnectionPointIndex;\n            return this.connector.beginItem.getConnectionPointSideByIndex(connectionPointIndex, points[1]);\n          }\n\n          if (index === points.length - 1 && this.connector.endItem) {\n            var connectionPointIndex = this.connector.endConnectionPointIndex;\n            return this.connector.endItem.getConnectionPointSideByIndex(connectionPointIndex, points[points.length - 2]);\n          }\n\n          return DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.getMiddlePoints = function (point1, point2) {\n          if (point1.x === point2.x || point1.y === point2.y) return [];\n          return [new ConnectorRenderPoint_1.ConnectorRenderPoint(point1.x, point2.y), new ConnectorRenderPoint_1.ConnectorRenderPoint(point2.x, point1.y)];\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.getMiddlePoint = function (point1, directionPoint1, nextToBegin, point2, directionPoint2, nextToEnd) {\n          var _this = this;\n\n          var point;\n          var points = this.getMiddlePoints(point1, point2);\n          points.forEach(function (pt) {\n            var rect1 = _this.createPointsRect(point1, pt);\n\n            var rect2 = _this.createPointsRect(pt, point2);\n\n            var itemRect1 = _this.connector.beginItem ? _this.connector.beginItem.rectangle : undefined;\n            var itemRect2 = _this.connector.endItem ? _this.connector.endItem.rectangle : undefined;\n\n            if (itemRect1) {\n              if (itemRect1.intersect(rect1) || itemRect1.intersect(rect2)) return;\n            }\n\n            if (itemRect2) {\n              if (itemRect2.intersect(rect1) || itemRect2.intersect(rect2)) return;\n            }\n\n            if ((!_this.isReturnPoint(pt, point1, directionPoint1) || _this.isIntermediatePoints(point1, directionPoint1)) && (!_this.isReturnPoint(pt, point2, directionPoint2) || _this.isIntermediatePoints(point2, directionPoint2))) {\n              if (point === undefined) point = pt;else if (_this.isPriorMiddlePoint(pt, point1, directionPoint1, point2, directionPoint2)) point = pt;\n            }\n          });\n          if (point === undefined && points.length > 0) point = points[0];\n          return point;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.createPointsRect = function (point1, point2) {\n          var result = Utils_1.Rectangle.createByPoints(point1, point2);\n          if (result.width > 0) result = result.inflate(-1, 0);\n          if (result.height > 0) result = result.inflate(0, -1);\n          return result;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.isPriorMiddlePoint = function (point, point1, directionPoint1, point2, directionPoint2) {\n          if (directionPoint1) {\n            if (point.x === directionPoint1.x || point.y === directionPoint1.y) return true;\n          }\n\n          if (directionPoint2) {\n            if (point.x === directionPoint2.x || point.y === directionPoint2.y) return true;\n          }\n\n          return false;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.isReturnPoint = function (point, point1, point2) {\n          if (point1 !== undefined && point2 !== undefined) {\n            if (point.x === point2.x) if (point1.y < point.y && point.y < point2.y || point1.y > point.y && point.y > point2.y) return true;\n            if (point.y === point2.y) if (point1.x < point.x && point.x < point2.x || point1.x > point.x && point.x > point2.x) return true;\n          }\n\n          return false;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.isIntermediatePoints = function (point1, point2) {\n          return 0 < point1.pointIndex && point1.pointIndex < this.connector.points.length - 1 && 0 < point2.pointIndex && point2.pointIndex < this.connector.points.length - 1;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.removeUnnecessaryLinePoints = function (points) {\n          Utils_1.GeometryUtils.removeUnnecessaryLinePoints(points, function (pt, index) {\n            if (pt.pointIndex === -1) {\n              points.splice(index, 1);\n              return true;\n            } else {\n              pt.skipped = true;\n              return false;\n            }\n          }, function (pt) {\n            return pt !== undefined && !pt.skipped;\n          });\n        };\n\n        return ConnectorPointsOrthogonalCalculator;\n      }(ConnectorPointsCalculatorBase_1.ConnectorPointsCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalCalculator = ConnectorPointsOrthogonalCalculator;\n      /***/\n    },\n    /* 145 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics91 = function extendStatics(d, b) {\n          _extendStatics91 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics91(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics91(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ConnectorPointsOrthogonalSideCalculatorBase_1 = __webpack_require__(43);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(30);\n\n      var ConnectorPointsOrthogonalUndefinedSideCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalUndefinedSideCalculator, _super);\n\n        function ConnectorPointsOrthogonalUndefinedSideCalculator(parent) {\n          return _super.call(this, parent) || this;\n        }\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getCorrectOriginPoint = function (originPoint, originRect) {\n          return originPoint;\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getSameShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getOverlappedPointsOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getBeginOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getEndOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getBeginOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getEndOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getBeginOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getEndOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.isOnSidePoint = function (originPoint, targetPoint) {\n          return true;\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.isDirectConnectionAllowed = function (targetSide, originPoint, targetPoint) {\n          var calculator = this.getSideCalculator(originPoint, targetPoint);\n          if (calculator !== undefined) return calculator.isDirectConnectionAllowed(targetSide, originPoint, targetPoint);\n          return true;\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getDirectConnectionPoints = function (originPoint, targetPoint) {\n          var diffX = Math.abs(targetPoint.x - originPoint.x);\n          var diffY = Math.abs(targetPoint.y - originPoint.y);\n\n          if (diffX > diffY) {\n            var minX = Math.min(originPoint.x, targetPoint.x);\n            var cx = minX + diffX / 2;\n            return [new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, originPoint.y), new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, targetPoint.y)];\n          } else {\n            var minY = Math.min(originPoint.y, targetPoint.y);\n            var cy = minY + diffY / 2;\n            return [new ConnectorRenderPoint_1.ConnectorRenderPoint(originPoint.x, cy), new ConnectorRenderPoint_1.ConnectorRenderPoint(targetPoint.x, cy)];\n          }\n        };\n\n        return ConnectorPointsOrthogonalUndefinedSideCalculator;\n      }(ConnectorPointsOrthogonalSideCalculatorBase_1.ConnectorPointsOrthogonalSideCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalUndefinedSideCalculator = ConnectorPointsOrthogonalUndefinedSideCalculator;\n      /***/\n    },\n    /* 146 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics92 = function extendStatics(d, b) {\n          _extendStatics92 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics92(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics92(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ConnectorPointsOrthogonalSideCalculatorBase_1 = __webpack_require__(43);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(30);\n\n      var ConnectorPointsOrthogonalSouthSideCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalSouthSideCalculator, _super);\n\n        function ConnectorPointsOrthogonalSouthSideCalculator(parent) {\n          return _super.call(this, parent) || this;\n        }\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getCorrectOriginPoint = function (originPoint, originRect) {\n          if (originPoint.y < originRect.bottom) originPoint = originPoint.offset(0, originRect.bottom - originPoint.y);\n          return originPoint;\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getSameShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n            case DiagramItem_1.ConnectionPointSide.West:\n            case DiagramItem_1.ConnectionPointSide.South:\n              return [originPoint.offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset());\n          }\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getOverlappedPointsOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.South:\n              return [originPoint.offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return [originPoint.offset(0, -this.getMinOffset())];\n          }\n\n          return [];\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getBeginOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (originPoint.y < targetPoint.y) {\n                if (originPoint.x > targetPoint.x) return [];else return [originPoint.offset(0, this.getMinOffset())];\n              }\n\n              if (originPoint.y > this.endRect.bottom) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              return [originPoint.offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (originPoint.y < targetPoint.y) {\n                if (originPoint.x < targetPoint.x) return [];else return [originPoint.offset(0, this.getMinOffset())];\n              }\n\n              if (originPoint.y > this.endRect.bottom) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              return [originPoint.offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return [originPoint.offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), originPoint.x < targetPoint.x);\n          }\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getEndOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (targetPoint.y < originPoint.y) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              if (originPoint.x < targetPoint.x) return [originPoint.offset(0, this.getMinOffset())];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (targetPoint.y < originPoint.y) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              if (originPoint.x > targetPoint.x) return [originPoint.offset(0, this.getMinOffset())];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return [originPoint.offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              var offset = this.getMinOffset();\n              if (this.beginRect.bottom > originPoint.y) offset += this.beginRect.bottom - originPoint.y;\n              return [originPoint.offset(0, offset)];\n          }\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getBeginOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.offset(0, this.getScaleableOffsetY(originPoint, targetPoint, false))];\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getEndOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.offset(0, this.getScaleableOffsetY(originPoint, targetPoint, true))];\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getBeginOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, true);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.Undefined:\n            case DiagramItem_1.ConnectionPointSide.North:\n              return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n          }\n\n          return [originPoint.offset(0, this.getScaleableOffsetY(originPoint, targetPoint, false))];\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getEndOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          if (targetSide === DiagramItem_1.ConnectionPointSide.Undefined) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true);else if (this.isBeginEndOverlappedX()) {\n            var direction = this.beginRect.center.x > this.endRect.center.x;\n            return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true, direction);\n          }\n          return [originPoint.offset(0, this.getScaleableOffsetY(originPoint, targetPoint, true))];\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getAsideOffsetPoints = function (originPoint, targetPoint, originRect, offset, asideOffset, direction) {\n          var points = [];\n\n          if (originRect !== undefined) {\n            if (direction === undefined) direction = targetPoint.x < originPoint.x;\n            if (direction) points.push(originPoint.offset(-(originPoint.x - originRect.left + asideOffset), offset));else points.push(originPoint.offset(originRect.right - originPoint.x + asideOffset, offset));\n          }\n\n          points.push(originPoint.offset(0, offset));\n          return points;\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getScaleableAsideOffsetPoints = function (originPoint, targetPoint, originRect, isEnd, direction) {\n          var offset = this.getScaleableOffsetY(originPoint, targetPoint, isEnd);\n          var asideOffset = this.getScaleableOffsetX(originPoint, targetPoint, isEnd);\n          return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, offset, asideOffset, direction);\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getScaleableOffsetX = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            if (!isEnd && !this.isBeginEndOverlappedX()) {\n              var distance = void 0;\n              if (targetPoint.x < originPoint.x) distance = this.beginRect.left - this.endRect.right;else distance = this.endRect.left - this.beginRect.right;\n              if (distance < this.getMinOffset() * 2) return distance / 2;\n            }\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getScaleableOffsetY = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            var distance = isEnd ? this.beginRect.top - originPoint.y : this.endRect.top - originPoint.y;\n            if (distance > 0 && distance < this.getMinOffset() * 2) return distance / 2;\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.isOnSidePoint = function (originPoint, targetPoint) {\n          return targetPoint.y > originPoint.y;\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.isDirectConnectionAllowed = function (targetSide, originPoint, targetPoint) {\n          return targetSide === DiagramItem_1.ConnectionPointSide.North || targetSide === DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getDirectConnectionPoints = function (originPoint, targetPoint) {\n          var cy = originPoint.y + (targetPoint.y - originPoint.y) / 2;\n          return [new ConnectorRenderPoint_1.ConnectorRenderPoint(originPoint.x, cy), new ConnectorRenderPoint_1.ConnectorRenderPoint(targetPoint.x, cy)];\n        };\n\n        return ConnectorPointsOrthogonalSouthSideCalculator;\n      }(ConnectorPointsOrthogonalSideCalculatorBase_1.ConnectorPointsOrthogonalSideCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalSouthSideCalculator = ConnectorPointsOrthogonalSouthSideCalculator;\n      /***/\n    },\n    /* 147 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics93 = function extendStatics(d, b) {\n          _extendStatics93 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics93(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics93(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ConnectorPointsOrthogonalSideCalculatorBase_1 = __webpack_require__(43);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(30);\n\n      var ConnectorPointsOrthogonalNorthSideCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalNorthSideCalculator, _super);\n\n        function ConnectorPointsOrthogonalNorthSideCalculator(parent) {\n          return _super.call(this, parent) || this;\n        }\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getCorrectOriginPoint = function (originPoint, originRect) {\n          if (originPoint.y > originRect.top) originPoint = originPoint.offset(0, originRect.top - originPoint.y);\n          return originPoint;\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getSameShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n            case DiagramItem_1.ConnectionPointSide.West:\n            case DiagramItem_1.ConnectionPointSide.North:\n              return [originPoint.offset(0, -this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset());\n          }\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getOverlappedPointsOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.South:\n              return [originPoint.offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return [originPoint.offset(0, -this.getMinOffset())];\n          }\n\n          return [];\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getBeginOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (originPoint.y > targetPoint.y) {\n                if (originPoint.x > targetPoint.x) return [];else return [originPoint.offset(0, -this.getMinOffset())];\n              }\n\n              if (originPoint.y < this.endRect.top) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              return [originPoint.offset(0, -this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (originPoint.y > targetPoint.y) {\n                if (originPoint.x < targetPoint.x) return [];else return [originPoint.offset(0, -this.getMinOffset())];\n              }\n\n              if (originPoint.y < this.endRect.top) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              return [originPoint.offset(0, -this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return [originPoint.offset(0, -this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), originPoint.x < targetPoint.x);\n          }\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getEndOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (targetPoint.y > originPoint.y) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              if (originPoint.x < targetPoint.x) return [originPoint.offset(0, -this.getMinOffset())];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (targetPoint.y > originPoint.y) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              if (originPoint.x > targetPoint.x) return [originPoint.offset(0, -this.getMinOffset())];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return [originPoint.offset(0, -this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              var offset = -this.getMinOffset();\n              if (this.beginRect.top < originPoint.y) offset -= originPoint.y - this.beginRect.top;\n              return [originPoint.offset(0, offset)];\n          }\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getBeginOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.offset(0, -this.getScaleableOffsetY(originPoint, targetPoint, false))];\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getEndOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.offset(0, -this.getScaleableOffsetY(originPoint, targetPoint, true))];\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getBeginOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, true);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.Undefined:\n            case DiagramItem_1.ConnectionPointSide.South:\n              return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n          }\n\n          return [originPoint.offset(0, -this.getScaleableOffsetY(originPoint, targetPoint, false))];\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getEndOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          if (targetSide === DiagramItem_1.ConnectionPointSide.Undefined) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true);else if (this.isBeginEndOverlappedX()) {\n            var direction = this.beginRect.center.x > this.endRect.center.x;\n            return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true, direction);\n          }\n          return [originPoint.offset(0, -this.getScaleableOffsetY(originPoint, targetPoint, true))];\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getAsideOffsetPoints = function (originPoint, targetPoint, originRect, offset, asideOffset, direction) {\n          var points = [];\n\n          if (originRect !== undefined) {\n            if (direction === undefined) direction = targetPoint.x < originPoint.x;\n            if (direction) points.push(originPoint.offset(-(originPoint.x - originRect.left + asideOffset), -offset));else points.push(originPoint.offset(originRect.right - originPoint.x + asideOffset, -offset));\n          }\n\n          points.push(originPoint.offset(0, -offset));\n          return points;\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getScaleableAsideOffsetPoints = function (originPoint, targetPoint, originRect, isEnd, direction) {\n          var offset = this.getScaleableOffsetY(originPoint, targetPoint, isEnd);\n          var asideOffset = this.getScaleableOffsetX(originPoint, targetPoint, isEnd);\n          return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, offset, asideOffset, direction);\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getScaleableOffsetX = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            if (!isEnd && !this.isBeginEndOverlappedX()) {\n              var distance = void 0;\n              if (targetPoint.x < originPoint.x) distance = this.beginRect.left - this.endRect.right;else distance = this.endRect.left - this.beginRect.right;\n              if (distance < this.getMinOffset() * 2) return distance / 2;\n            }\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getScaleableOffsetY = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            var distance = isEnd ? originPoint.y - this.beginRect.bottom : originPoint.y - this.endRect.bottom;\n            if (distance > 0 && distance < this.getMinOffset() * 2) return distance / 2;\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.isOnSidePoint = function (originPoint, targetPoint) {\n          return targetPoint.y < originPoint.y;\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.isDirectConnectionAllowed = function (targetSide, originPoint, targetPoint) {\n          return targetSide === DiagramItem_1.ConnectionPointSide.South || targetSide === DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getDirectConnectionPoints = function (originPoint, targetPoint) {\n          var cy = targetPoint.y + (originPoint.y - targetPoint.y) / 2;\n          return [new ConnectorRenderPoint_1.ConnectorRenderPoint(originPoint.x, cy), new ConnectorRenderPoint_1.ConnectorRenderPoint(targetPoint.x, cy)];\n        };\n\n        return ConnectorPointsOrthogonalNorthSideCalculator;\n      }(ConnectorPointsOrthogonalSideCalculatorBase_1.ConnectorPointsOrthogonalSideCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalNorthSideCalculator = ConnectorPointsOrthogonalNorthSideCalculator;\n      /***/\n    },\n    /* 148 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics94 = function extendStatics(d, b) {\n          _extendStatics94 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics94(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics94(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ConnectorPointsOrthogonalSideCalculatorBase_1 = __webpack_require__(43);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(30);\n\n      var ConnectorPointsOrthogonalEastSideCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalEastSideCalculator, _super);\n\n        function ConnectorPointsOrthogonalEastSideCalculator(parent) {\n          return _super.call(this, parent) || this;\n        }\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getCorrectOriginPoint = function (originPoint, originRect) {\n          if (originPoint.x < originRect.right) originPoint = originPoint.offset(originRect.right - originPoint.x, 0);\n          return originPoint;\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getSameShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.North:\n            case DiagramItem_1.ConnectionPointSide.South:\n            case DiagramItem_1.ConnectionPointSide.East:\n              return [originPoint.offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset());\n          }\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getOverlappedPointsOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              return [originPoint.offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return [originPoint.offset(-this.getMinOffset(), 0)];\n          }\n\n          return [];\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getBeginOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (originPoint.x < targetPoint.x) {\n                if (originPoint.y < targetPoint.y) return [];else return [originPoint.offset(this.getMinOffset(), 0)];\n              }\n\n              if (originPoint.x > this.endRect.right) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              return [originPoint.offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (originPoint.x < targetPoint.x) {\n                if (originPoint.y > targetPoint.y) return [];else return [originPoint.offset(this.getMinOffset(), 0)];\n              }\n\n              if (originPoint.x > this.endRect.right) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              return [originPoint.offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              return [originPoint.offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), originPoint.y < targetPoint.y);\n          }\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getEndOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              return [originPoint.offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              var offset = this.getMinOffset();\n              if (this.beginRect.right > originPoint.x) offset += this.beginRect.right - originPoint.x;\n              return [originPoint.offset(offset, 0)];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (targetPoint.x < originPoint.x) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              if (originPoint.y > targetPoint.y) return [originPoint.offset(this.getMinOffset(), 0)];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (targetPoint.x < originPoint.x) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              if (originPoint.y < targetPoint.y) return [originPoint.offset(this.getMinOffset(), 0)];\n              return [];\n          }\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getBeginOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.offset(this.getScaleableOffsetX(originPoint, targetPoint, false), 0)];\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getEndOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.offset(this.getScaleableOffsetX(originPoint, targetPoint, true), 0)];\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getBeginOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, true);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.Undefined:\n            case DiagramItem_1.ConnectionPointSide.West:\n              return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n          }\n\n          return [originPoint.offset(this.getScaleableOffsetX(originPoint, targetPoint, false), 0)];\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getEndOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          if (targetSide === DiagramItem_1.ConnectionPointSide.Undefined) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true);else if (this.isBeginEndOverlappedY()) {\n            var direction = this.beginRect.center.y > this.endRect.center.y;\n            return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true, direction);\n          }\n          return [originPoint.offset(this.getScaleableOffsetX(originPoint, targetPoint, true), 0)];\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getAsideOffsetPoints = function (originPoint, targetPoint, originRect, offset, asideOffset, direction) {\n          var points = [];\n\n          if (originRect !== undefined) {\n            if (direction === undefined) direction = targetPoint.y < originPoint.y;\n            if (direction) points.push(originPoint.offset(offset, -(originPoint.y - originRect.top + asideOffset)));else points.push(originPoint.offset(offset, originRect.bottom - originPoint.y + asideOffset));\n          }\n\n          points.push(originPoint.offset(offset, 0));\n          return points;\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getScaleableAsideOffsetPoints = function (originPoint, targetPoint, originRect, isEnd, direction) {\n          var offset = this.getScaleableOffsetX(originPoint, targetPoint, isEnd);\n          var asideOffset = this.getScaleableOffsetY(originPoint, targetPoint, isEnd);\n          return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, offset, asideOffset, direction);\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getScaleableOffsetX = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            var distance = isEnd ? this.beginRect.left - originPoint.x : this.endRect.left - originPoint.x;\n            if (distance > 0 && distance < this.getMinOffset() * 2) return distance / 2;\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getScaleableOffsetY = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            if (!isEnd && !this.isBeginEndOverlappedY()) {\n              var distance = void 0;\n              if (targetPoint.y < originPoint.y) distance = this.beginRect.top - this.endRect.bottom;else distance = this.endRect.top - this.beginRect.bottom;\n              if (distance < this.getMinOffset() * 2) return distance / 2;\n            }\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.isOnSidePoint = function (originPoint, targetPoint) {\n          return targetPoint.x > originPoint.x;\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.isDirectConnectionAllowed = function (targetSide, originPoint, targetPoint) {\n          return targetSide === DiagramItem_1.ConnectionPointSide.West || targetSide === DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getDirectConnectionPoints = function (originPoint, targetPoint) {\n          var cx = originPoint.x + (targetPoint.x - originPoint.x) / 2;\n          return [new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, originPoint.y), new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, targetPoint.y)];\n        };\n\n        return ConnectorPointsOrthogonalEastSideCalculator;\n      }(ConnectorPointsOrthogonalSideCalculatorBase_1.ConnectorPointsOrthogonalSideCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalEastSideCalculator = ConnectorPointsOrthogonalEastSideCalculator;\n      /***/\n    },\n    /* 149 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics95 = function extendStatics(d, b) {\n          _extendStatics95 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics95(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics95(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ConnectorPointsOrthogonalSideCalculatorBase_1 = __webpack_require__(43);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(30);\n\n      var ConnectorPointsOrthogonalWestSideCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalWestSideCalculator, _super);\n\n        function ConnectorPointsOrthogonalWestSideCalculator(parent) {\n          return _super.call(this, parent) || this;\n        }\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getCorrectOriginPoint = function (originPoint, originRect) {\n          if (originPoint.x > originRect.left) originPoint = originPoint.offset(originRect.left - originPoint.x, 0);\n          return originPoint;\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getSameShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.North:\n            case DiagramItem_1.ConnectionPointSide.South:\n            case DiagramItem_1.ConnectionPointSide.West:\n              return [originPoint.offset(-this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset());\n          }\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getOverlappedPointsOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              return [originPoint.offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return [originPoint.offset(-this.getMinOffset(), 0)];\n          }\n\n          return [];\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getBeginOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (originPoint.x > targetPoint.x) {\n                if (originPoint.y < targetPoint.y) return [];else return [originPoint.offset(-this.getMinOffset(), 0)];\n              }\n\n              if (originPoint.x < this.endRect.left) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              return [originPoint.offset(-this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (originPoint.x > targetPoint.x) {\n                if (originPoint.y > targetPoint.y) return [];else return [originPoint.offset(-this.getMinOffset(), 0)];\n              }\n\n              if (originPoint.x < this.endRect.left) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              return [originPoint.offset(-this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return [originPoint.offset(-this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), originPoint.y < targetPoint.y);\n          }\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getEndOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              var offset = -this.getMinOffset();\n              if (this.beginRect.left < originPoint.x) offset -= originPoint.x - this.beginRect.left;\n              return [originPoint.offset(offset, 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return [originPoint.offset(-this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (targetPoint.x > originPoint.x) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              if (originPoint.y > targetPoint.y) return [originPoint.offset(-this.getMinOffset(), 0)];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (targetPoint.x > originPoint.x) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              if (originPoint.y < targetPoint.y) return [originPoint.offset(-this.getMinOffset(), 0)];\n              return [];\n          }\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getBeginOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.offset(-this.getScaleableOffsetX(originPoint, targetPoint, false), 0)];\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getEndOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.offset(-this.getScaleableOffsetX(originPoint, targetPoint, true), 0)];\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getBeginOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, true);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.Undefined:\n            case DiagramItem_1.ConnectionPointSide.East:\n              return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n          }\n\n          return [originPoint.offset(-this.getScaleableOffsetX(originPoint, targetPoint, false), 0)];\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getEndOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          if (targetSide === DiagramItem_1.ConnectionPointSide.Undefined) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true);else if (this.isBeginEndOverlappedY()) {\n            var direction = this.beginRect.center.y > this.endRect.center.y;\n            return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true, direction);\n          }\n          return [originPoint.offset(-this.getScaleableOffsetX(originPoint, targetPoint, true), 0)];\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getAsideOffsetPoints = function (originPoint, targetPoint, originRect, offset, asideOffset, direction) {\n          var points = [];\n\n          if (originRect !== undefined) {\n            if (direction === undefined) direction = targetPoint.y < originPoint.y;\n            if (direction) points.push(originPoint.offset(-offset, -(originPoint.y - originRect.top + asideOffset)));else points.push(originPoint.offset(-offset, originRect.bottom - originPoint.y + asideOffset));\n          }\n\n          points.push(originPoint.offset(-offset, 0));\n          return points;\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getScaleableAsideOffsetPoints = function (originPoint, targetPoint, originRect, isEnd, direction) {\n          var offset = this.getScaleableOffsetX(originPoint, targetPoint, isEnd);\n          var asideOffset = this.getScaleableOffsetY(originPoint, targetPoint, isEnd);\n          return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, offset, asideOffset, direction);\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getScaleableOffsetX = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            var distance = isEnd ? originPoint.x - this.beginRect.right : originPoint.x - this.endRect.right;\n            if (distance > 0 && distance < this.getMinOffset() * 2) return distance / 2;\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getScaleableOffsetY = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            if (!isEnd && !this.isBeginEndOverlappedY()) {\n              var distance = void 0;\n              if (targetPoint.y < originPoint.y) distance = this.beginRect.top - this.endRect.bottom;else distance = this.endRect.top - this.beginRect.bottom;\n              if (distance < this.getMinOffset() * 2) return distance / 2;\n            }\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.isOnSidePoint = function (originPoint, targetPoint) {\n          return targetPoint.x < originPoint.x;\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.isDirectConnectionAllowed = function (targetSide, originPoint, targetPoint) {\n          return targetSide === DiagramItem_1.ConnectionPointSide.East || targetSide === DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getDirectConnectionPoints = function (originPoint, targetPoint) {\n          var cx = targetPoint.x + (originPoint.x - targetPoint.x) / 2;\n          return [new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, originPoint.y), new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, targetPoint.y)];\n        };\n\n        return ConnectorPointsOrthogonalWestSideCalculator;\n      }(ConnectorPointsOrthogonalSideCalculatorBase_1.ConnectorPointsOrthogonalSideCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalWestSideCalculator = ConnectorPointsOrthogonalWestSideCalculator;\n      /***/\n    },\n    /* 150 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ConnectorText =\n      /** @class */\n      function () {\n        function ConnectorText(position, value) {\n          this.position = position;\n          this.value = value;\n        }\n\n        return ConnectorText;\n      }();\n\n      exports.ConnectorText = ConnectorText;\n\n      var ConnectorTexts =\n      /** @class */\n      function () {\n        function ConnectorTexts() {\n          this.items = {};\n        }\n\n        ConnectorTexts.prototype.get = function (position) {\n          return this.items[position];\n        };\n\n        ConnectorTexts.prototype.set = function (position, text) {\n          this.items[position] = text;\n        };\n\n        ConnectorTexts.prototype.remove = function (position) {\n          delete this.items[position];\n        };\n\n        ConnectorTexts.prototype.map = function (callback) {\n          var list = [];\n          this.forEach(function (t) {\n            return list.push(callback(t));\n          });\n          return list;\n        };\n\n        ConnectorTexts.prototype.forEach = function (callback) {\n          for (var key in this.items) {\n            if (this.items.hasOwnProperty(key)) callback(this.items[key]);\n          }\n        };\n\n        ConnectorTexts.prototype.clone = function () {\n          var result = new ConnectorTexts();\n          this.forEach(function (t) {\n            result.set(t.position, new ConnectorText(t.position, t.value));\n          });\n          return result;\n        };\n\n        ConnectorTexts.prototype.toObject = function () {\n          var result = {};\n          var modified = false;\n          this.forEach(function (t) {\n            result[t.position] = t.value;\n            modified = true;\n          });\n          return modified ? result : null;\n        };\n\n        ConnectorTexts.prototype.fromObject = function (obj) {\n          for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              var position = parseFloat(key);\n\n              if (!isNaN(position) && typeof obj[key] === \"string\") {\n                this.set(position, new ConnectorText(position, obj[key]));\n              }\n            }\n          }\n        };\n\n        return ConnectorTexts;\n      }();\n\n      exports.ConnectorTexts = ConnectorTexts;\n      /***/\n    },\n    /* 151 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics96 = function extendStatics(d, b) {\n          _extendStatics96 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics96(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics96(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ModelResizeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ModelResizeHistoryItem, _super);\n\n        function ModelResizeHistoryItem(offset) {\n          var _this = _super.call(this) || this;\n\n          _this.offset = offset;\n          return _this;\n        }\n\n        ModelResizeHistoryItem.prototype.redo = function (manipulator) {\n          this.oldSize = manipulator.model.size.clone();\n          this.backOffset = new Utils_1.Offset(-this.offset.left, -this.offset.top, -this.offset.right, -this.offset.bottom);\n          var newWidth = Math.max(this.oldSize.width + this.offset.left + this.offset.right, manipulator.model.pageWidth);\n          var newHeight = Math.max(this.oldSize.height + this.offset.top + this.offset.bottom, manipulator.model.pageHeight);\n          manipulator.changeModelSize(new Utils_1.Size(newWidth, newHeight), this.offset);\n        };\n\n        ModelResizeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.changeModelSize(this.oldSize, this.backOffset);\n        };\n\n        return ModelResizeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ModelResizeHistoryItem = ModelResizeHistoryItem;\n      /***/\n    },\n    /* 152 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics97 = function extendStatics(d, b) {\n          _extendStatics97 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics97(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics97(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var UpdatePositionsOnPageResizeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(UpdatePositionsOnPageResizeHistoryItem, _super);\n\n        function UpdatePositionsOnPageResizeHistoryItem(offsetX, offsetY) {\n          var _this = _super.call(this) || this;\n\n          _this.offsetX = offsetX;\n          _this.offsetY = offsetY;\n          return _this;\n        }\n\n        UpdatePositionsOnPageResizeHistoryItem.prototype.redo = function (manipulator) {\n          var _this = this;\n\n          manipulator.model.iterateItems(function (item) {\n            if (item instanceof Shape_1.Shape) manipulator.moveShape(item, item.position.offset(_this.offsetX, _this.offsetY));\n            if (item instanceof Connector_1.Connector) item.points.forEach(function (p, index) {\n              return manipulator.moveConnectorPoint(item, index, p.offset(_this.offsetX, _this.offsetY));\n            });\n          });\n        };\n\n        UpdatePositionsOnPageResizeHistoryItem.prototype.undo = function (manipulator) {\n          var _this = this;\n\n          manipulator.model.iterateItems(function (item) {\n            if (item instanceof Shape_1.Shape) manipulator.moveShape(item, item.position.offset(-_this.offsetX, -_this.offsetY));\n            if (item instanceof Connector_1.Connector) item.points.forEach(function (p, index) {\n              return manipulator.moveConnectorPoint(item, index, p.offset(-_this.offsetX, -_this.offsetY));\n            });\n          });\n        };\n\n        return UpdatePositionsOnPageResizeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.UpdatePositionsOnPageResizeHistoryItem = UpdatePositionsOnPageResizeHistoryItem;\n      /***/\n    },\n    /* 153 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics98 = function extendStatics(d, b) {\n          _extendStatics98 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics98(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics98(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var DeleteConnectorPointHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(DeleteConnectorPointHistoryItem, _super);\n\n        function DeleteConnectorPointHistoryItem(connectorKey, pointIndex) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.pointIndex = pointIndex;\n          return _this;\n        }\n\n        DeleteConnectorPointHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.point = connector.points[this.pointIndex].clone();\n          manipulator.deleteConnectorPoint(connector, this.pointIndex);\n        };\n\n        DeleteConnectorPointHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.addConnectorPoint(connector, this.pointIndex, this.point);\n        };\n\n        return DeleteConnectorPointHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.DeleteConnectorPointHistoryItem = DeleteConnectorPointHistoryItem;\n      /***/\n    },\n    /* 154 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics99 = function extendStatics(d, b) {\n          _extendStatics99 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics99(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics99(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ResizeShapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ResizeShapeHistoryItem, _super);\n\n        function ResizeShapeHistoryItem(shapeKey, position, size) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = shapeKey;\n          _this.position = position;\n          _this.size = size;\n          return _this;\n        }\n\n        ResizeShapeHistoryItem.prototype.redo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          this.oldPosition = shape.position.clone();\n          this.oldSize = shape.size.clone();\n          manipulator.resizeShape(shape, this.position, this.size);\n        };\n\n        ResizeShapeHistoryItem.prototype.undo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          manipulator.resizeShape(shape, this.oldPosition, this.oldSize);\n        };\n\n        return ResizeShapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ResizeShapeHistoryItem = ResizeShapeHistoryItem;\n      /***/\n    },\n    /* 155 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics100 = function extendStatics(d, b) {\n          _extendStatics100 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics100(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics100(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var DeleteConnectorHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(DeleteConnectorHistoryItem, _super);\n\n        function DeleteConnectorHistoryItem(connectorKey) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          return _this;\n        }\n\n        DeleteConnectorHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.connector = connector.clone();\n          manipulator.deleteConnector(connector);\n        };\n\n        DeleteConnectorHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.addConnector(this.connector, this.connector.key);\n        };\n\n        return DeleteConnectorHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.DeleteConnectorHistoryItem = DeleteConnectorHistoryItem;\n      /***/\n    },\n    /* 156 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics101 = function extendStatics(d, b) {\n          _extendStatics101 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics101(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics101(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ProcessShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ProcessShapeDescription, _super);\n\n        function ProcessShapeDescription() {\n          return _super.call(this, \"Process\", \"Process\") || this;\n        }\n\n        Object.defineProperty(ProcessShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Process;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        return ProcessShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.ProcessShapeDescription = ProcessShapeDescription;\n      /***/\n    },\n    /* 157 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics102 = function extendStatics(d, b) {\n          _extendStatics102 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics102(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics102(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DiamondShapeDescription_1 = __webpack_require__(92);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var DecisionShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DecisionShapeDescription, _super);\n\n        function DecisionShapeDescription() {\n          return _super.call(this, \"Decision\", \"Decision\", new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.75)) || this;\n        }\n\n        Object.defineProperty(DecisionShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Decision;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        return DecisionShapeDescription;\n      }(DiamondShapeDescription_1.DiamondShapeDescription);\n\n      exports.DecisionShapeDescription = DecisionShapeDescription;\n      /***/\n    },\n    /* 158 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics103 = function extendStatics(d, b) {\n          _extendStatics103 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics103(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics103(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ManualInputShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ManualInputShapeDescription, _super);\n\n        function ManualInputShapeDescription() {\n          return _super.call(this, \"Manual Input\", \"Manual Input\") || this;\n        }\n\n        Object.defineProperty(ManualInputShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ManualInput;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ManualInputShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var _a = shape.rectangle,\n              left = _a.left,\n              top = _a.top,\n              right = _a.right,\n              bottom = _a.bottom,\n              width = _a.width,\n              height = _a.height;\n          var y1 = top + height * ManualInputShapeDescription.slopeHeightRatio;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ManualInputShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.North) point.y += ManualInputShapeDescription.slopeHeightRatio / 2 * shape.size.height;\n        };\n\n        ManualInputShapeDescription.slopeHeightRatio = 0.1;\n        return ManualInputShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.ManualInputShapeDescription = ManualInputShapeDescription;\n      /***/\n    },\n    /* 159 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics104 = function extendStatics(d, b) {\n          _extendStatics104 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics104(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics104(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var DataShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DataShapeDescription, _super);\n\n        function DataShapeDescription() {\n          return _super.call(this, \"Data\", \"Data\") || this;\n        }\n\n        Object.defineProperty(DataShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Data;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        DataShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var _a = shape.rectangle,\n              left = _a.left,\n              top = _a.top,\n              right = _a.right,\n              bottom = _a.bottom,\n              width = _a.width,\n              height = _a.height;\n          var px = Math.min(Math.max(0, height / Math.tan(DataShapeDescription.slopeAngle)), width);\n          var x1 = left + px;\n          var x2 = right - px;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        DataShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var offset = shape.size.height / Math.tan(DataShapeDescription.slopeAngle);\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.East) point.x -= offset / 2;else if (side === DiagramItem_1.ConnectionPointSide.West) point.x += offset / 2;\n        };\n\n        DataShapeDescription.slopeAngle = 81 * Math.PI / 180;\n        return DataShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.DataShapeDescription = DataShapeDescription;\n      /***/\n    },\n    /* 160 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics105 = function extendStatics(d, b) {\n          _extendStatics105 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics105(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics105(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var TerminatorShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(TerminatorShapeDescription, _super);\n\n        function TerminatorShapeDescription() {\n          return _super.call(this, \"Terminator\", \"Terminator\", new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.5)) || this;\n        }\n\n        Object.defineProperty(TerminatorShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Terminator;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        TerminatorShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cy = rect.center.y;\n          var x1 = left + width * TerminatorShapeDescription.curveWidthRatio;\n          var x2 = left + width * (1 - TerminatorShapeDescription.curveWidthRatio);\n          var ratio = height / width;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, top), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right, top, right, cy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right, bottom, x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left, bottom, left, cy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left, top, x1, top), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        TerminatorShapeDescription.curveWidthRatio = 0.3;\n        return TerminatorShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.TerminatorShapeDescription = TerminatorShapeDescription;\n      /***/\n    },\n    /* 161 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics106 = function extendStatics(d, b) {\n          _extendStatics106 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics106(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics106(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ShapeParameters_1 = __webpack_require__(29);\n\n      var ShapeParameterPoint_1 = __webpack_require__(21);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      exports.PredefinedProcessEdgeParameterName = \"e\";\n\n      var PredefinedProcessShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(PredefinedProcessShapeDescription, _super);\n\n        function PredefinedProcessShapeDescription() {\n          return _super.call(this, \"Predefined Process\", \"Predefined\\nProcess\") || this;\n        }\n\n        Object.defineProperty(PredefinedProcessShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.PredefinedProcess;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        PredefinedProcessShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var x1 = left + shape.parameters.get(exports.PredefinedProcessEdgeParameterName).value;\n          var x2 = right - shape.parameters.get(exports.PredefinedProcessEdgeParameterName).value;\n\n          var primitives = _super.prototype.createShapePrimitives.call(this, shape);\n\n          return primitives.concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveMoveToCommand(x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom)], shape.style)]);\n        };\n\n        PredefinedProcessShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.add(new ShapeParameters_1.ShapeParameter(exports.PredefinedProcessEdgeParameterName, this.defaultSize.width * 0.1));\n        };\n\n        PredefinedProcessShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, exports.PredefinedProcessEdgeParameterName, function (p) {\n            return Math.max(PredefinedProcessShapeDescription.minEdge, Math.min(shape.size.width * 0.3, p.value));\n          });\n        };\n\n        PredefinedProcessShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, exports.PredefinedProcessEdgeParameterName, function (p) {\n            return p.value + deltaX;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        PredefinedProcessShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new Utils_1.Point(shape.normalizeX(shape.position.x + shape.parameters.get(exports.PredefinedProcessEdgeParameterName).value), shape.position.y))];\n        };\n\n        PredefinedProcessShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          var dx = parameters.get(exports.PredefinedProcessEdgeParameterName).value;\n          return rect.resize(-2 * dx, 0).offset(dx, 0);\n        };\n\n        PredefinedProcessShapeDescription.minEdge = 72;\n        return PredefinedProcessShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.PredefinedProcessShapeDescription = PredefinedProcessShapeDescription;\n      /***/\n    },\n    /* 162 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics107 = function extendStatics(d, b) {\n          _extendStatics107 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics107(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics107(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Shape_1 = __webpack_require__(11);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeParameterPoint_1 = __webpack_require__(21);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ArrowVerticalShapeDescription_1 = __webpack_require__(65);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ArrowNorthSouthShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowNorthSouthShapeDescription, _super);\n\n        function ArrowNorthSouthShapeDescription() {\n          return _super.call(this, \"North-South Arrow\") || this;\n        }\n\n        Object.defineProperty(ArrowNorthSouthShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowNorthSouth;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ArrowNorthSouthShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var p1dx = (width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2;\n          var p0dy = shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value;\n          var p1x1 = shape.normalizeX(left + p1dx);\n          var p0y1 = shape.normalizeY(top + p0dy);\n          var p1x2 = shape.normalizeX(right - p1dx);\n          var p0y2 = shape.normalizeY(bottom - p0dy);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, p0y2), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p0y2), new PathPrimitive_1.PathPrimitiveLineToCommand(cx, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p0y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x1, p0y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x1, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p0y1), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowNorthSouthShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.height / 2 - 2 * Shape_1.Shape.lineWidth, p.value));\n          });\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.width, p.value));\n          });\n        };\n\n        ArrowNorthSouthShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName, function (p) {\n            return p.value + deltaY;\n          });\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName, function (p) {\n            return p.value - deltaX * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowNorthSouthShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new Utils_1.Point(shape.normalizeX(shape.position.x + (shape.size.width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2), shape.normalizeY(shape.position.y + shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value)))];\n        };\n\n        return ArrowNorthSouthShapeDescription;\n      }(ArrowVerticalShapeDescription_1.ArrowVerticalShapeDescription);\n\n      exports.ArrowNorthSouthShapeDescription = ArrowNorthSouthShapeDescription;\n      /***/\n    },\n    /* 163 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics108 = function extendStatics(d, b) {\n          _extendStatics108 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics108(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics108(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ArrowHorizontalShapeDescription_1 = __webpack_require__(66);\n\n      var ShapeParameterPoint_1 = __webpack_require__(21);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ArrowRightShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowRightShapeDescription, _super);\n\n        function ArrowRightShapeDescription() {\n          return _super.call(this, \"Right Arrow\") || this;\n        }\n\n        Object.defineProperty(ArrowRightShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowRight;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ArrowRightShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cy = rect.center.y;\n          var p0dx = width - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value;\n          var p1dy = (height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2;\n          var p0x1 = shape.normalizeX(left + p0dx);\n          var p1y1 = shape.normalizeY(top + p1dy);\n          var p1y2 = shape.normalizeY(bottom - p1dy);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p1y2), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowRightShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName, function (p) {\n            return p.value - deltaX;\n          });\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName, function (p) {\n            return p.value - deltaY * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowRightShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new Utils_1.Point(shape.normalizeX(shape.position.x + shape.size.width - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value), shape.normalizeY(shape.position.y + (shape.size.height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2)))];\n        };\n\n        ArrowRightShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var triangleWidth = shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value;\n\n          if (point.x > shape.position.x + shape.size.width - triangleWidth) {\n            var tg = shape.size.height / 2 / triangleWidth;\n            var delta = (point.x - (shape.position.x + shape.size.width - triangleWidth)) * tg;\n            var side = shape.getConnectionPointSide(point);\n            if (side === DiagramItem_1.ConnectionPointSide.North) point.y += delta;else if (side === DiagramItem_1.ConnectionPointSide.South) point.y -= delta;\n          } else _super.prototype.processConnectionPoint.call(this, shape, point);\n        };\n\n        return ArrowRightShapeDescription;\n      }(ArrowHorizontalShapeDescription_1.ArrowHorizontalShapeDescription);\n\n      exports.ArrowRightShapeDescription = ArrowRightShapeDescription;\n      /***/\n    },\n    /* 164 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics109 = function extendStatics(d, b) {\n          _extendStatics109 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics109(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics109(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeParameterPoint_1 = __webpack_require__(21);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ArrowVerticalShapeDescription_1 = __webpack_require__(65);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ArrowTopShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowTopShapeDescription, _super);\n\n        function ArrowTopShapeDescription() {\n          return _super.call(this, \"Top Arrow\") || this;\n        }\n\n        Object.defineProperty(ArrowTopShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowTop;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ArrowTopShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var p1dx = (width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2;\n          var p0dy = shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value;\n          var p1x1 = shape.normalizeX(left + p1dx);\n          var p0y1 = shape.normalizeY(top + p0dy);\n          var p1x2 = shape.normalizeX(right - p1dx);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x1, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p0y1), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowTopShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName, function (p) {\n            return p.value + deltaY;\n          });\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName, function (p) {\n            return p.value - deltaX * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowTopShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new Utils_1.Point(shape.normalizeX(shape.position.x + (shape.size.width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2), shape.normalizeY(shape.position.y + shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value)))];\n        };\n\n        ArrowTopShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var triangleHeight = shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value;\n\n          if (point.y < shape.position.y + triangleHeight) {\n            var tg = shape.size.width / 2 / triangleHeight;\n            var delta = (shape.position.y + triangleHeight - point.y) * tg;\n            var side = shape.getConnectionPointSide(point);\n            if (side === DiagramItem_1.ConnectionPointSide.East) point.x -= delta;else if (side === DiagramItem_1.ConnectionPointSide.West) point.x += delta;\n          } else _super.prototype.processConnectionPoint.call(this, shape, point);\n        };\n\n        return ArrowTopShapeDescription;\n      }(ArrowVerticalShapeDescription_1.ArrowVerticalShapeDescription);\n\n      exports.ArrowTopShapeDescription = ArrowTopShapeDescription;\n      /***/\n    },\n    /* 165 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics110 = function extendStatics(d, b) {\n          _extendStatics110 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics110(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics110(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeParameters_1 = __webpack_require__(29);\n\n      var ShapeParameterPoint_1 = __webpack_require__(21);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      exports.CrossHorizontalWidthParameterName = \"chw\";\n      exports.CrossVerticalWidthParameterName = \"cvw\";\n\n      var CrossShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(CrossShapeDescription, _super);\n\n        function CrossShapeDescription() {\n          return _super.call(this, \"Cross\", \"\") || this;\n        }\n\n        Object.defineProperty(CrossShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Cross;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        CrossShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var p0dx = (width - shape.parameters.get(exports.CrossHorizontalWidthParameterName).value) / 2;\n          var p1dy = (height - shape.parameters.get(exports.CrossVerticalWidthParameterName).value) / 2;\n          var p0x1 = shape.normalizeX(left + p0dx);\n          var p1y1 = shape.normalizeY(top + p1dy);\n          var p0x2 = shape.normalizeX(right - p0dx);\n          var p1y2 = shape.normalizeY(bottom - p1dy);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p1y2), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        CrossShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.addRange([new ShapeParameters_1.ShapeParameter(exports.CrossHorizontalWidthParameterName, this.defaultSize.width * 0.2), new ShapeParameters_1.ShapeParameter(exports.CrossVerticalWidthParameterName, this.defaultSize.height * 0.2)]);\n        };\n\n        CrossShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, exports.CrossHorizontalWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.width, p.value));\n          });\n          this.changeParameterValue(parameters, exports.CrossVerticalWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.height, p.value));\n          });\n        };\n\n        CrossShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, exports.CrossHorizontalWidthParameterName, function (p) {\n            return p.value - deltaX * 2;\n          });\n          this.changeParameterValue(parameters, exports.CrossVerticalWidthParameterName, function (p) {\n            return p.value - deltaY * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        CrossShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new Utils_1.Point(shape.normalizeX(shape.position.x + (shape.size.width - shape.parameters.get(exports.CrossHorizontalWidthParameterName).value) / 2), shape.normalizeY(shape.position.y + (shape.size.height - shape.parameters.get(exports.CrossVerticalWidthParameterName).value) / 2)))];\n        };\n\n        return CrossShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.CrossShapeDescription = CrossShapeDescription;\n      /***/\n    },\n    /* 166 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics111 = function extendStatics(d, b) {\n          _extendStatics111 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics111(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics111(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ConnectionPoint_1 = __webpack_require__(34);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var HeartShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(HeartShapeDescription, _super);\n\n        function HeartShapeDescription() {\n          return _super.call(this, \"Heart\", \"\") || this;\n        }\n\n        Object.defineProperty(HeartShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Heart;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        HeartShapeDescription.prototype.createConnectionPoints = function () {\n          return [new ConnectionPoint_1.ConnectionPoint(0.5, 0.15, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(1, 0.25, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(0.5, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0, 0.25, DiagramItem_1.ConnectionPointSide.West)];\n        };\n\n        HeartShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(right - width * 0.25, top), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(right - width * 0.15, top, right, top + height * 0.1, right, top + height * 0.25), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(right, top + height * 0.3, right - width * 0.02, top + height * 0.35, right - width * 0.05, top + height * 0.4), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.center.x, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left + width * 0.05, top + height * 0.4), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(left + width * 0.02, top + height * 0.35, left, top + height * 0.3, left, top + height * 0.25), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(left, top + height * 0.1, left + width * 0.15, top, left + width * 0.25, top), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(left + width * 0.3, top, left + width * 0.45, top + height * 0.03, left + width * 0.5, top + height * 0.15), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(right - width * 0.45, top + height * 0.03, right - width * 0.3, top, right - width * 0.25, top), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        return HeartShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.HeartShapeDescription = HeartShapeDescription;\n      /***/\n    },\n    /* 167 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics112 = function extendStatics(d, b) {\n          _extendStatics112 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics112(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics112(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PolygonShapeDescription_1 = __webpack_require__(68);\n\n      var OctagonShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(OctagonShapeDescription, _super);\n\n        function OctagonShapeDescription() {\n          return _super.call(this, \"Octagon\", \"\") || this;\n        }\n\n        Object.defineProperty(OctagonShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Octagon;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(OctagonShapeDescription.prototype, \"angleCount\", {\n          get: function get() {\n            return 8;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        OctagonShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var angle = Math.PI - this.angle;\n          var sideX = width / (1 + 2 * Math.cos(angle));\n          var sideY = height / (1 + 2 * Math.cos(angle));\n          var x1 = left + (width - sideX) / 2;\n          var x2 = x1 + sideX;\n          var y1 = top + (height - sideY) / 2;\n          var y2 = y1 + sideY;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, y2), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, y2), new PathPrimitive_1.PathPrimitiveLineToCommand(left, y1), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        OctagonShapeDescription.prototype.calculateHeight = function (width) {\n          return width;\n        };\n\n        return OctagonShapeDescription;\n      }(PolygonShapeDescription_1.PolygonShapeDescription);\n\n      exports.OctagonShapeDescription = OctagonShapeDescription;\n      /***/\n    },\n    /* 168 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics113 = function extendStatics(d, b) {\n          _extendStatics113 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics113(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics113(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PentagonShapeDescription_1 = __webpack_require__(94);\n\n      var ShapeParameters_1 = __webpack_require__(29);\n\n      var ShapeParameterPoint_1 = __webpack_require__(21);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      exports.StarConvexParameterName = \"sc\";\n\n      var StarShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(StarShapeDescription, _super);\n\n        function StarShapeDescription() {\n          return _super.call(this, \"Star\", \"\") || this;\n        }\n\n        Object.defineProperty(StarShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Star;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        StarShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          bottom = this.getActualBottom(top, bottom, width, height);\n          var cx = rect.center.x;\n          var cy = top + (bottom - top) / 2;\n          var ratio = height / width;\n          var angle = Math.PI - this.angle;\n          var py = width / 2 * Math.tan(angle / 2) * ratio;\n          var y = top + py;\n          var px = (height - py) / Math.tan(angle) / ratio;\n          var x1 = left + px;\n          var x2 = right - px;\n          var pDistance = shape.parameters.get(exports.StarConvexParameterName).value;\n          var distance = this.getInnerPointDistance(cx, cx, right, cy, top, y);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(this.getInnerPointPos(cx, cx, right, pDistance, distance), this.getInnerPointPos(cy, top, y, pDistance, distance)), new PathPrimitive_1.PathPrimitiveLineToCommand(right, y), new PathPrimitive_1.PathPrimitiveLineToCommand(this.getInnerPointPos(cx, right, x2, pDistance, distance), this.getInnerPointPos(cy, y, bottom, pDistance, distance)), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(this.getInnerPointPos(cx, x2, x1, pDistance, distance), this.getInnerPointPos(cy, bottom, bottom, pDistance, distance)), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(this.getInnerPointPos(cx, x1, left, pDistance, distance), this.getInnerPointPos(cy, bottom, y, pDistance, distance)), new PathPrimitive_1.PathPrimitiveLineToCommand(left, y), new PathPrimitive_1.PathPrimitiveLineToCommand(this.getInnerPointPos(cx, left, cx, pDistance, distance), this.getInnerPointPos(cy, y, top, pDistance, distance)), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        StarShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.addRange([new ShapeParameters_1.ShapeParameter(exports.StarConvexParameterName, 300)]);\n        };\n\n        StarShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          var rect = shape.rectangle;\n          var top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          bottom = this.getActualBottom(top, bottom, width, height);\n          var cx = rect.center.x;\n          var cy = top + (bottom - top) / 2;\n          var ratio = height / width;\n          var angle = Math.PI - this.angle;\n          var py = width / 2 * Math.tan(angle / 2) * ratio;\n          var y = top + py;\n          var distance = this.getInnerPointDistance(cx, cx, right, cy, top, y);\n          this.changeParameterValue(parameters, exports.StarConvexParameterName, function (p) {\n            return Math.max(0, Math.min(distance, p.value));\n          });\n        };\n\n        StarShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          var distance = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n          if (deltaX < 0 || deltaY > 0) distance = -distance;\n          this.changeParameterValue(parameters, exports.StarConvexParameterName, function (p) {\n            return p.value + distance;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        StarShapeDescription.prototype.getParameterPoints = function (shape) {\n          var rect = shape.rectangle;\n          var top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          bottom = this.getActualBottom(top, bottom, width, height);\n          var cx = rect.center.x;\n          var cy = top + (bottom - top) / 2;\n          var ratio = height / width;\n          var angle = Math.PI - this.angle;\n          var py = width / 2 * Math.tan(angle / 2) * ratio;\n          var y = top + py;\n          var pDistance = shape.parameters.get(exports.StarConvexParameterName).value;\n          var distance = this.getInnerPointDistance(cx, cx, right, cy, top, y);\n          var innerPointX = this.getInnerPointPos(cx, cx, right, pDistance, distance);\n          var innerPointY = this.getInnerPointPos(cy, top, y, pDistance, distance);\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new Utils_1.Point(innerPointX, innerPointY))];\n        };\n\n        StarShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          _super.prototype.processConnectionPoint.call(this, shape, point);\n\n          var side = shape.getConnectionPointSide(point);\n\n          if (side === DiagramItem_1.ConnectionPointSide.South) {\n            var rect = shape.rectangle;\n            var top_1 = rect.top,\n                right = rect.right,\n                bottom = rect.bottom,\n                width = rect.width,\n                height = rect.height;\n            bottom = this.getActualBottom(top_1, bottom, width, height);\n            var cx = rect.center.x;\n            var cy = top_1 + (bottom - top_1) / 2;\n            var ratio = height / width;\n            var angle = Math.PI - this.angle;\n            var py = width / 2 * Math.tan(angle / 2) * ratio;\n            var y = top_1 + py;\n            var pDistance = shape.parameters.get(exports.StarConvexParameterName).value;\n            var distance = this.getInnerPointDistance(cx, cx, right, cy, top_1, y);\n            point.y = this.getInnerPointPos(cy, bottom, bottom, pDistance, distance);\n          }\n        };\n\n        StarShapeDescription.prototype.getInnerPointDistanceByAxis = function (center, edge1, edge2) {\n          var edgeX = Math.min(edge1, edge2) + Math.abs(edge1 - edge2) / 2;\n          return edgeX - center;\n        };\n\n        StarShapeDescription.prototype.getInnerPointPos = function (center, edge1, edge2, pDistance, distance) {\n          var ratio = Math.min(1, pDistance / distance);\n          return center + this.getInnerPointDistanceByAxis(center, edge1, edge2) * ratio;\n        };\n\n        StarShapeDescription.prototype.getInnerPointDistance = function (centerX, edgeX1, edgeX2, centerY, edgeY1, edgeY2) {\n          var disX = this.getInnerPointDistanceByAxis(centerX, edgeX1, edgeX2);\n          var disY = this.getInnerPointDistanceByAxis(centerY, edgeY1, edgeY2);\n          return Math.sqrt(Math.pow(disX, 2) + Math.pow(disY, 2));\n        };\n\n        StarShapeDescription.prototype.getActualBottom = function (top, bottom, width, height) {\n          var result = top + _super.prototype.calculateHeight.call(this, width) * height / width;\n          return result < bottom ? result : bottom;\n        };\n\n        StarShapeDescription.prototype.calculateHeight = function (width) {\n          return width;\n        };\n\n        return StarShapeDescription;\n      }(PentagonShapeDescription_1.PentagonShapeDescription);\n\n      exports.StarShapeDescription = StarShapeDescription;\n      /***/\n    },\n    /* 169 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics114 = function extendStatics(d, b) {\n          _extendStatics114 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics114(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics114(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ShapeParameterPoint_1 = __webpack_require__(21);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ArrowVerticalShapeDescription_1 = __webpack_require__(65);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ArrowBottomShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowBottomShapeDescription, _super);\n\n        function ArrowBottomShapeDescription() {\n          return _super.call(this, \"Bottom Arrow\") || this;\n        }\n\n        Object.defineProperty(ArrowBottomShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowBottom;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ArrowBottomShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var p1dx = (width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2;\n          var p0dy = height - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value;\n          var p1x1 = shape.normalizeX(left + p1dx);\n          var p0y1 = shape.normalizeY(top + p0dy);\n          var p1x2 = shape.normalizeX(right - p1dx);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(p1x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(cx, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x1, p0y1), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowBottomShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName, function (p) {\n            return p.value - deltaY;\n          });\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName, function (p) {\n            return p.value - deltaX * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowBottomShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new Utils_1.Point(shape.normalizeX(shape.position.x + (shape.size.width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2), shape.normalizeY(shape.position.y + shape.size.height - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value)))];\n        };\n\n        ArrowBottomShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var triangleHeight = shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value;\n\n          if (point.y > shape.position.y + shape.size.height - triangleHeight) {\n            var tg = shape.size.width / 2 / triangleHeight;\n            var delta = (point.y - (shape.position.y + shape.size.height - triangleHeight)) * tg;\n            var side = shape.getConnectionPointSide(point);\n            if (side === DiagramItem_1.ConnectionPointSide.East) point.x -= delta;else if (side === DiagramItem_1.ConnectionPointSide.West) point.x += delta;\n          } else _super.prototype.processConnectionPoint.call(this, shape, point);\n        };\n\n        return ArrowBottomShapeDescription;\n      }(ArrowVerticalShapeDescription_1.ArrowVerticalShapeDescription);\n\n      exports.ArrowBottomShapeDescription = ArrowBottomShapeDescription;\n      /***/\n    },\n    /* 170 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics115 = function extendStatics(d, b) {\n          _extendStatics115 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics115(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics115(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Shape_1 = __webpack_require__(11);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ArrowHorizontalShapeDescription_1 = __webpack_require__(66);\n\n      var ShapeParameterPoint_1 = __webpack_require__(21);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ArrowEastWestShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowEastWestShapeDescription, _super);\n\n        function ArrowEastWestShapeDescription() {\n          return _super.call(this, \"East-West Arrow\") || this;\n        }\n\n        Object.defineProperty(ArrowEastWestShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowEastWest;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ArrowEastWestShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cy = rect.center.y;\n          var p0dx = shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value;\n          var p1dy = (height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2;\n          var p0x1 = shape.normalizeX(left + p0dx);\n          var p1y1 = shape.normalizeY(top + p1dy);\n          var p0x2 = shape.normalizeX(right - p0dx);\n          var p1y2 = shape.normalizeY(bottom - p1dy);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowEastWestShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.width / 2 - 2 * Shape_1.Shape.lineWidth, p.value));\n          });\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.height, p.value));\n          });\n        };\n\n        ArrowEastWestShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName, function (p) {\n            return p.value + deltaX;\n          });\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName, function (p) {\n            return p.value - deltaY * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowEastWestShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new Utils_1.Point(shape.normalizeX(shape.position.x + shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value), shape.normalizeY(shape.position.y + (shape.size.height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2)))];\n        };\n\n        return ArrowEastWestShapeDescription;\n      }(ArrowHorizontalShapeDescription_1.ArrowHorizontalShapeDescription);\n\n      exports.ArrowEastWestShapeDescription = ArrowEastWestShapeDescription;\n      /***/\n    },\n    /* 171 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics116 = function extendStatics(d, b) {\n          _extendStatics116 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics116(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics116(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var ArrowHorizontalShapeDescription_1 = __webpack_require__(66);\n\n      var ShapeParameterPoint_1 = __webpack_require__(21);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ArrowLeftShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowLeftShapeDescription, _super);\n\n        function ArrowLeftShapeDescription() {\n          return _super.call(this, \"Left Arrow\") || this;\n        }\n\n        Object.defineProperty(ArrowLeftShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowLeft;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ArrowLeftShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cy = rect.center.y;\n          var p0dx = shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value;\n          var p1dy = (height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2;\n          var p0x1 = shape.normalizeX(left + p0dx);\n          var p1y1 = shape.normalizeY(top + p1dy);\n          var p1y2 = shape.normalizeY(bottom - p1dy);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowLeftShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName, function (p) {\n            return p.value + deltaX;\n          });\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName, function (p) {\n            return p.value - deltaY * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowLeftShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new Utils_1.Point(shape.normalizeX(shape.position.x + shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value), shape.normalizeY(shape.position.y + (shape.size.height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2)))];\n        };\n\n        ArrowLeftShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var triangleWidth = shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value;\n\n          if (point.x < shape.position.x + triangleWidth) {\n            var tg = shape.size.height / 2 / triangleWidth;\n            var delta = (shape.position.x + triangleWidth - point.x) * tg;\n            var side = shape.getConnectionPointSide(point);\n            if (side === DiagramItem_1.ConnectionPointSide.North) point.y += delta;else if (side === DiagramItem_1.ConnectionPointSide.South) point.y -= delta;\n          } else _super.prototype.processConnectionPoint.call(this, shape, point);\n        };\n\n        return ArrowLeftShapeDescription;\n      }(ArrowHorizontalShapeDescription_1.ArrowHorizontalShapeDescription);\n\n      exports.ArrowLeftShapeDescription = ArrowLeftShapeDescription;\n      /***/\n    },\n    /* 172 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics117 = function extendStatics(d, b) {\n          _extendStatics117 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics117(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics117(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var DocumentShapeDescription_1 = __webpack_require__(97);\n\n      var ClipPathPrimitive_1 = __webpack_require__(41);\n\n      var Utils_1 = __webpack_require__(15);\n\n      var MultipleDocumentsShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(MultipleDocumentsShapeDescription, _super);\n\n        function MultipleDocumentsShapeDescription() {\n          return _super.call(this, \"Multiple Documents\", \"Multiple\\nDocuments\") || this;\n        }\n\n        Object.defineProperty(MultipleDocumentsShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.MultipleDocuments;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        MultipleDocumentsShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var _a = shape.rectangle,\n              left = _a.left,\n              top = _a.top,\n              right = _a.right,\n              bottom = _a.bottom,\n              width = _a.width,\n              height = _a.height;\n          var documentOffsetX = width * MultipleDocumentsShapeDescription.documentsOffsetRatio;\n          var documentOffsetY = height * MultipleDocumentsShapeDescription.documentsOffsetRatio;\n          rect = rect.inflate(-documentOffsetX, -documentOffsetY).offset(-documentOffsetX, -documentOffsetY);\n          var rect1 = rect.offset(documentOffsetX, documentOffsetY);\n          var rect2 = rect.offset(2 * documentOffsetX, 2 * documentOffsetY);\n          var clipPathId = Utils_1.RenderUtils.generateSvgElementId(\"clipRect\");\n          var primitives = [];\n          return primitives.concat(this.createDocumentPrimitives(rect, shape.style, clipPathId + \"1\", rect1)).concat(this.createDocumentPrimitives(rect1, shape.style, clipPathId + \"2\", rect2)).concat(this.createDocumentPrimitives(rect2, shape.style));\n        };\n\n        MultipleDocumentsShapeDescription.prototype.createDocumentPrimitives = function (rect, style, clipPathId, clipRect) {\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var dy = height * DocumentShapeDescription_1.DocumentShapeDescription.curveOffsetRatio;\n          var primitives = [];\n          primitives = primitives.concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right - width * 0.25, bottom - 2 * dy, cx, bottom - dy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left + width * 0.25, bottom + dy, left, bottom - dy), new PathPrimitive_1.PathPrimitiveClosePathCommand()], style, undefined, clipRect && clipPathId)]);\n\n          if (clipRect && clipPathId) {\n            primitives = primitives.concat([new ClipPathPrimitive_1.ClipPathPrimitive(clipPathId, [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left - Shape_1.Shape.lineWidth, top - Shape_1.Shape.lineWidth), new PathPrimitive_1.PathPrimitiveLineToCommand(right + Shape_1.Shape.lineWidth, top - Shape_1.Shape.lineWidth), new PathPrimitive_1.PathPrimitiveLineToCommand(right + Shape_1.Shape.lineWidth, clipRect.top), new PathPrimitive_1.PathPrimitiveLineToCommand(clipRect.left, clipRect.top), new PathPrimitive_1.PathPrimitiveLineToCommand(clipRect.left, bottom + Shape_1.Shape.lineWidth), new PathPrimitive_1.PathPrimitiveLineToCommand(left - Shape_1.Shape.lineWidth, bottom + Shape_1.Shape.lineWidth), new PathPrimitive_1.PathPrimitiveClosePathCommand()])])]);\n          }\n\n          return primitives;\n        };\n\n        MultipleDocumentsShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          var documentOffsetX = rect.width * MultipleDocumentsShapeDescription.documentsOffsetRatio;\n          var documentOffsetY = rect.height * MultipleDocumentsShapeDescription.documentsOffsetRatio;\n          rect = rect.inflate(-documentOffsetX, -documentOffsetY).offset(-documentOffsetX, -documentOffsetY);\n          var innerRect = rect.offset(2 * documentOffsetX, 2 * documentOffsetY);\n          return innerRect.resize(0, -rect.height * DocumentShapeDescription_1.DocumentShapeDescription.curveOffsetRatio);\n        };\n\n        MultipleDocumentsShapeDescription.documentsOffsetRatio = 0.1;\n        return MultipleDocumentsShapeDescription;\n      }(DocumentShapeDescription_1.DocumentShapeDescription);\n\n      exports.MultipleDocumentsShapeDescription = MultipleDocumentsShapeDescription;\n      /***/\n    },\n    /* 173 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics118 = function extendStatics(d, b) {\n          _extendStatics118 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics118(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics118(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var HexagonShapeDescription_1 = __webpack_require__(95);\n\n      var PreparationShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(PreparationShapeDescription, _super);\n\n        function PreparationShapeDescription() {\n          var _this = _super.call(this, \"Preparation\", \"Preparation\") || this;\n\n          _this.defaultSize = new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.75);\n          return _this;\n        }\n\n        Object.defineProperty(PreparationShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Preparation;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        return PreparationShapeDescription;\n      }(HexagonShapeDescription_1.HexagonShapeDescription);\n\n      exports.PreparationShapeDescription = PreparationShapeDescription;\n      /***/\n    },\n    /* 174 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics119 = function extendStatics(d, b) {\n          _extendStatics119 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics119(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics119(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var EllipsePrimitive_1 = __webpack_require__(42);\n\n      var HardDiskShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(HardDiskShapeDescription, _super);\n\n        function HardDiskShapeDescription() {\n          return _super.call(this, \"Hard Disk\", \"Hard Disk\") || this;\n        }\n\n        Object.defineProperty(HardDiskShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.HardDisk;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        HardDiskShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cy = rect.center.y;\n          var dx = width * HardDiskShapeDescription.arcWidthRatio;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(right - dx / 2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(left + dx / 2, top), new PathPrimitive_1.PathPrimitiveArcToCommand(dx / 2, (bottom - top) / 2, 0, false, false, left + dx / 2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(right - dx / 2, bottom)], shape.style), new EllipsePrimitive_1.EllipsePrimitive(right - dx / 2, cy, dx / 2, (bottom - top) / 2, shape.style)];\n        };\n\n        HardDiskShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          var dx = rect.width * HardDiskShapeDescription.arcWidthRatio;\n          return rect.resize(-dx, 0);\n        };\n\n        HardDiskShapeDescription.arcWidthRatio = 0.2;\n        return HardDiskShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.HardDiskShapeDescription = HardDiskShapeDescription;\n      /***/\n    },\n    /* 175 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics120 = function extendStatics(d, b) {\n          _extendStatics120 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics120(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics120(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var EllipsePrimitive_1 = __webpack_require__(42);\n\n      var DatabaseShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DatabaseShapeDescription, _super);\n\n        function DatabaseShapeDescription() {\n          var _this = _super.call(this, \"Database\", \"Database\") || this;\n\n          _this.defaultSize.width = _this.defaultSize.height;\n          return _this;\n        }\n\n        Object.defineProperty(DatabaseShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Database;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        DatabaseShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var dy = height * DatabaseShapeDescription.arcWidthRatio;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(right, top + dy / 2), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom - dy / 2), new PathPrimitive_1.PathPrimitiveArcToCommand((right - left) / 2, dy / 2, 0, false, true, left, bottom - dy / 2), new PathPrimitive_1.PathPrimitiveLineToCommand(left, top + dy / 2)], shape.style), new EllipsePrimitive_1.EllipsePrimitive(cx, top + dy / 2, (right - left) / 2, dy / 2, shape.style)];\n        };\n\n        DatabaseShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          var dy = rect.height * DatabaseShapeDescription.arcWidthRatio;\n          return rect.resize(0, -dy).offset(0, dy);\n        };\n\n        DatabaseShapeDescription.arcWidthRatio = 0.2;\n        return DatabaseShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.DatabaseShapeDescription = DatabaseShapeDescription;\n      /***/\n    },\n    /* 176 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics121 = function extendStatics(d, b) {\n          _extendStatics121 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics121(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics121(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ShapeParameters_1 = __webpack_require__(29);\n\n      var ShapeParameterPoint_1 = __webpack_require__(21);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      exports.InternalStorageHorizontalEdgeParameterName = \"he\";\n      exports.InternalStorageVerticalEdgeParameterName = \"ve\";\n\n      var InternalStorageShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(InternalStorageShapeDescription, _super);\n\n        function InternalStorageShapeDescription() {\n          return _super.call(this, \"Internal Storage\", \"Internal\\nStorage\") || this;\n        }\n\n        Object.defineProperty(InternalStorageShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.InternalStorage;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        InternalStorageShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var x = left + shape.parameters.get(exports.InternalStorageHorizontalEdgeParameterName).value;\n          var y = top + shape.parameters.get(exports.InternalStorageVerticalEdgeParameterName).value;\n\n          var primitives = _super.prototype.createShapePrimitives.call(this, shape);\n\n          return primitives.concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x, bottom), new PathPrimitive_1.PathPrimitiveMoveToCommand(left, y), new PathPrimitive_1.PathPrimitiveLineToCommand(right, y)], shape.style)]);\n        };\n\n        InternalStorageShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.addRange([new ShapeParameters_1.ShapeParameter(exports.InternalStorageHorizontalEdgeParameterName, this.defaultSize.width * 0.1), new ShapeParameters_1.ShapeParameter(exports.InternalStorageVerticalEdgeParameterName, this.defaultSize.width * 0.1)]);\n        };\n\n        InternalStorageShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, exports.InternalStorageHorizontalEdgeParameterName, function (p) {\n            return Math.max(InternalStorageShapeDescription.minEdge, Math.min(shape.size.width * 0.3, p.value));\n          });\n          this.changeParameterValue(parameters, exports.InternalStorageVerticalEdgeParameterName, function (p) {\n            return Math.max(InternalStorageShapeDescription.minEdge, Math.min(shape.size.height * 0.3, p.value));\n          });\n        };\n\n        InternalStorageShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, exports.InternalStorageHorizontalEdgeParameterName, function (p) {\n            return p.value + deltaX;\n          });\n          this.changeParameterValue(parameters, exports.InternalStorageVerticalEdgeParameterName, function (p) {\n            return p.value + deltaY;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        InternalStorageShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new Utils_1.Point(shape.normalizeX(shape.position.x + shape.parameters.get(exports.InternalStorageHorizontalEdgeParameterName).value), shape.normalizeY(shape.position.y + shape.parameters.get(exports.InternalStorageVerticalEdgeParameterName).value)))];\n        };\n\n        InternalStorageShapeDescription.minEdge = 72;\n        return InternalStorageShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.InternalStorageShapeDescription = InternalStorageShapeDescription;\n      /***/\n    },\n    /* 177 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics122 = function extendStatics(d, b) {\n          _extendStatics122 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics122(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics122(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var PaperTapeShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(PaperTapeShapeDescription, _super);\n\n        function PaperTapeShapeDescription(title, defaultText) {\n          if (title === void 0) {\n            title = \"Paper Tape\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"Paper Tape\";\n          }\n\n          return _super.call(this, title, defaultText) || this;\n        }\n\n        Object.defineProperty(PaperTapeShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.PaperTape;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        PaperTapeShapeDescription.prototype.createShapePrimitives = function (shape) {\n          return this.createDocumentPrimitives(shape.rectangle, shape.style);\n        };\n\n        PaperTapeShapeDescription.prototype.createDocumentPrimitives = function (rect, style) {\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var dy = height * PaperTapeShapeDescription.curveOffsetRatio;\n          var primitives = [];\n          return primitives.concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left + width * 0.25, top + 2 * dy, cx, top + dy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right - width * 0.25, top - dy, right, top + dy), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right - width * 0.25, bottom - 2 * dy, cx, bottom - dy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left + width * 0.25, bottom + dy, left, bottom - dy), new PathPrimitive_1.PathPrimitiveClosePathCommand()], style)]);\n        };\n\n        PaperTapeShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.North) point.y += shape.size.height * PaperTapeShapeDescription.curveOffsetRatio;\n          if (side === DiagramItem_1.ConnectionPointSide.South) point.y -= shape.size.height * PaperTapeShapeDescription.curveOffsetRatio;\n        };\n\n        PaperTapeShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          return rect.inflate(0, -rect.height * PaperTapeShapeDescription.curveOffsetRatio);\n        };\n\n        PaperTapeShapeDescription.curveOffsetRatio = 0.1;\n        return PaperTapeShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.PaperTapeShapeDescription = PaperTapeShapeDescription;\n      /***/\n    },\n    /* 178 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics123 = function extendStatics(d, b) {\n          _extendStatics123 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics123(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics123(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ManualOperationShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ManualOperationShapeDescription, _super);\n\n        function ManualOperationShapeDescription() {\n          return _super.call(this, \"Manual Operation\", \"Manual\\nOperation\") || this;\n        }\n\n        Object.defineProperty(ManualOperationShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ManualOperation;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ManualOperationShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var _a = shape.rectangle,\n              left = _a.left,\n              top = _a.top,\n              right = _a.right,\n              bottom = _a.bottom,\n              width = _a.width,\n              height = _a.height;\n          var px = Math.min(Math.max(0, height / Math.tan(ManualOperationShapeDescription.slopeAngle)), width);\n          var cx = rect.center.x;\n          var x1 = Math.min(left + px, cx);\n          var x2 = Math.max(right - px, cx);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ManualOperationShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var offset = shape.size.height / Math.tan(ManualOperationShapeDescription.slopeAngle);\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.East) point.x -= offset / 2;else if (side === DiagramItem_1.ConnectionPointSide.West) point.x += offset / 2;\n        };\n\n        ManualOperationShapeDescription.slopeAngle = 81 * Math.PI / 180;\n        return ManualOperationShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.ManualOperationShapeDescription = ManualOperationShapeDescription;\n      /***/\n    },\n    /* 179 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics124 = function extendStatics(d, b) {\n          _extendStatics124 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics124(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics124(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var DelayShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DelayShapeDescription, _super);\n\n        function DelayShapeDescription() {\n          var _this = _super.call(this, \"Delay\", \"Delay\") || this;\n\n          _this.defaultSize.width = _this.defaultSize.height;\n          return _this;\n        }\n\n        Object.defineProperty(DelayShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Delay;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        DelayShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom;\n          var cx = rect.center.x;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveLineToCommand(cx, top), new PathPrimitive_1.PathPrimitiveArcToCommand((right - left) / 2, (bottom - top) / 2, 0, false, true, cx, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        DelayShapeDescription.arcWidthRatio = 0.2;\n        return DelayShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.DelayShapeDescription = DelayShapeDescription;\n      /***/\n    },\n    /* 180 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics125 = function extendStatics(d, b) {\n          _extendStatics125 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics125(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics125(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var StoredDataShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(StoredDataShapeDescription, _super);\n\n        function StoredDataShapeDescription() {\n          return _super.call(this, \"Stored Data\", \"Stored Data\") || this;\n        }\n\n        Object.defineProperty(StoredDataShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.StoredData;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        StoredDataShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cy = rect.center.y;\n          var dx = width * StoredDataShapeDescription.arcWidthRatio;\n          var primitives = [];\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(left + dx / 2, top), new PathPrimitive_1.PathPrimitiveArcToCommand(dx / 2, (bottom - top) / 2, 0, false, false, left + dx / 2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveArcToCommand(dx / 2, (bottom - top) / 2, 0, false, true, right, top)], shape.style)];\n        };\n\n        StoredDataShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          var dx = rect.width * StoredDataShapeDescription.arcWidthRatio;\n          return rect.resize(-dx, 0);\n        };\n\n        StoredDataShapeDescription.arcWidthRatio = 0.2;\n        return StoredDataShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.StoredDataShapeDescription = StoredDataShapeDescription;\n      /***/\n    },\n    /* 181 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics126 = function extendStatics(d, b) {\n          _extendStatics126 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics126(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics126(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var TriangleShapeDescription_1 = __webpack_require__(96);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var MergeShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(MergeShapeDescription, _super);\n\n        function MergeShapeDescription() {\n          return _super.call(this, \"Merge\", \"Merge\") || this;\n        }\n\n        Object.defineProperty(MergeShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Merge;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        MergeShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.center.x, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        MergeShapeDescription.prototype.calculateHeight = function (width) {\n          return width * 0.75;\n        };\n\n        MergeShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          return rect.resize(0, -rect.width * 0.25);\n        };\n\n        return MergeShapeDescription;\n      }(TriangleShapeDescription_1.TriangleShapeDescription);\n\n      exports.MergeShapeDescription = MergeShapeDescription;\n      /***/\n    },\n    /* 182 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics127 = function extendStatics(d, b) {\n          _extendStatics127 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics127(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics127(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RectangleShapeDescription_1 = __webpack_require__(14);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var DisplayShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DisplayShapeDescription, _super);\n\n        function DisplayShapeDescription() {\n          return _super.call(this, \"Display\", \"Display\") || this;\n        }\n\n        Object.defineProperty(DisplayShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Display;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        DisplayShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cy = rect.center.y;\n          var dx = width * DisplayShapeDescription.arcWidthRatio;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(right - dx / 2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(left + dx / 2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(left, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(left + dx / 2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(right - dx / 2, bottom), new PathPrimitive_1.PathPrimitiveArcToCommand(dx / 2, (bottom - top) / 2, 0, false, false, right - dx / 2, top)], shape.style)];\n        };\n\n        DisplayShapeDescription.arcWidthRatio = 0.2;\n        return DisplayShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.DisplayShapeDescription = DisplayShapeDescription;\n      /***/\n    },\n    /* 183 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics128 = function extendStatics(d, b) {\n          _extendStatics128 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics128(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics128(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var EllipseShapeDescription_1 = __webpack_require__(67);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var OrShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(OrShapeDescription, _super);\n\n        function OrShapeDescription() {\n          var _this = _super.call(this, \"Or\", \"\") || this;\n\n          _this.defaultSize = new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension * 0.5, ShapeDescription_1.ShapeDefaultDimension * 0.5);\n          return _this;\n        }\n\n        Object.defineProperty(OrShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Or;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(OrShapeDescription.prototype, \"enableText\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        OrShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom;\n          var _a = rect.center,\n              cx = _a.x,\n              cy = _a.y;\n          var primitives = [];\n          return primitives.concat(_super.prototype.createShapePrimitives.call(this, shape)).concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(cx, bottom), new PathPrimitive_1.PathPrimitiveMoveToCommand(left, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(right, cy)], shape.style)]);\n        };\n\n        return OrShapeDescription;\n      }(EllipseShapeDescription_1.EllipseShapeDescription);\n\n      exports.OrShapeDescription = OrShapeDescription;\n      /***/\n    },\n    /* 184 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics129 = function extendStatics(d, b) {\n          _extendStatics129 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics129(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics129(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var EllipseShapeDescription_1 = __webpack_require__(67);\n\n      var PathPrimitive_1 = __webpack_require__(2);\n\n      var SummingJunctionShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(SummingJunctionShapeDescription, _super);\n\n        function SummingJunctionShapeDescription() {\n          var _this = _super.call(this, \"Summing Junction\", \"\") || this;\n\n          _this.defaultSize = new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension * 0.5, ShapeDescription_1.ShapeDefaultDimension * 0.5);\n          return _this;\n        }\n\n        Object.defineProperty(SummingJunctionShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.SummingJunction;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(SummingJunctionShapeDescription.prototype, \"enableText\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        SummingJunctionShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var _a = rect.center,\n              cx = _a.x,\n              cy = _a.y;\n          var rx = width / 2;\n          var ry = height / 2;\n          var angle = Math.atan(ry / rx);\n          var ex = 1 / Math.sqrt(1 / Math.pow(rx, 2) + Math.pow(Math.tan(angle), 2) / Math.pow(ry, 2));\n          var ey = ex * Math.tan(angle);\n          var primitives = [];\n          return primitives.concat(_super.prototype.createShapePrimitives.call(this, shape)).concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx - ex, cy - ey), new PathPrimitive_1.PathPrimitiveLineToCommand(cx + ex, cy + ey), new PathPrimitive_1.PathPrimitiveMoveToCommand(cx - ex, cy + ey), new PathPrimitive_1.PathPrimitiveLineToCommand(cx + ex, cy - ey)], shape.style)]);\n        };\n\n        return SummingJunctionShapeDescription;\n      }(EllipseShapeDescription_1.EllipseShapeDescription);\n\n      exports.SummingJunctionShapeDescription = SummingJunctionShapeDescription;\n      /***/\n    },\n    /* 185 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics130 = function extendStatics(d, b) {\n          _extendStatics130 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics130(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics130(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ImagePrimitive_1 = __webpack_require__(98);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ConnectionPoint_1 = __webpack_require__(34);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var ShapeWithImageDescription_1 = __webpack_require__(45);\n\n      var ImageInfo_1 = __webpack_require__(40);\n\n      var ImageCache_1 = __webpack_require__(49);\n\n      var ImageLoader_1 = __webpack_require__(100);\n\n      var CustomShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(CustomShapeDescription, _super);\n\n        function CustomShapeDescription(properties, baseDescription) {\n          var _this = _super.call(this, properties.title || baseDescription && baseDescription.title, properties.defaultText || baseDescription && baseDescription.defaultText, new Utils_1.Size(properties.defaultWidth || baseDescription && baseDescription.defaultSize.width || 1440, properties.defaultHeight || baseDescription && baseDescription.defaultSize.height || 1440), properties.defaultImageUrl || baseDescription && baseDescription.defaultImageUrl) || this;\n\n          _this.properties = properties;\n          _this.baseDescription = baseDescription;\n          _this.imageLoader = new ImageLoader_1.ImageLoader(_this.updateSvgImage.bind(_this));\n          _this.connectionPoints = _this.createConnectionPoints();\n          _this.svgImage = new ImageInfo_1.ImageInfo(properties.svgUrl);\n          var cachedImage = ImageCache_1.ImageCache.instance.createUnloadedInfoByShapeImageInfo(_this.svgImage);\n\n          _this.imageLoader.load(cachedImage);\n\n          return _this;\n        }\n\n        Object.defineProperty(CustomShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return this.properties.type;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"allowEditText\", {\n          get: function get() {\n            return this.properties.allowEditText !== false;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"allowEditImage\", {\n          get: function get() {\n            return this.properties.allowEditImage === true;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        CustomShapeDescription.prototype.createConnectionPoints = function () {\n          if (this.properties && this.properties.connectionPoints && this.properties.connectionPoints.length) return this.properties.connectionPoints.map(function (ptObj) {\n            if (ptObj && typeof ptObj[\"x\"] === \"number\" && typeof ptObj[\"y\"] === \"number\") {\n              var side = typeof ptObj[\"side\"] === \"number\" ? ptObj[\"side\"] : DiagramItem_1.ConnectionPointSide.Undefined;\n              return new ConnectionPoint_1.ConnectionPoint(ptObj[\"x\"], ptObj[\"y\"], side);\n            }\n          }).filter(function (pt) {\n            return pt;\n          });\n          return _super.prototype.createConnectionPoints.call(this);\n        };\n\n        CustomShapeDescription.prototype.createImagePrimitives = function (shape, forToolbox) {\n          if (this.baseDescription) return this.baseDescription.createImagePrimitives(shape, forToolbox);\n          return _super.prototype.createImagePrimitives.call(this, shape, forToolbox);\n        };\n\n        CustomShapeDescription.prototype.createShapePrimitives = function (shape, forToolbox) {\n          if (this.baseDescription) return this.baseDescription.createShapePrimitives(shape, forToolbox);else {\n            var _a = shape.rectangle,\n                left = _a.left,\n                top_1 = _a.top,\n                width = _a.width,\n                height = _a.height;\n            return [new ImagePrimitive_1.ImagePrimitive(left + (this.properties.svgLeft && !forToolbox ? this.properties.svgLeft * width : 0), top_1 + (this.properties.svgTop && !forToolbox ? this.properties.svgTop * height : 0), this.properties.svgWidth && !forToolbox ? this.properties.svgWidth * width : width, this.properties.svgHeight && !forToolbox ? this.properties.svgHeight * height : height, this.svgImage.exportUrl)];\n          }\n        };\n\n        CustomShapeDescription.prototype.createParameters = function (parameters) {\n          if (this.baseDescription) return this.baseDescription.createParameters(parameters);else return _super.prototype.createParameters.call(this, parameters);\n        };\n\n        CustomShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          if (this.baseDescription) this.baseDescription.normalizeParameters(shape, parameters);else _super.prototype.normalizeParameters.call(this, shape, parameters);\n        };\n\n        CustomShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          if (this.baseDescription) this.baseDescription.modifyParameters(shape, parameters, deltaX, deltaY);else _super.prototype.modifyParameters.call(this, shape, parameters, deltaX, deltaY);\n        };\n\n        CustomShapeDescription.prototype.getParameterPoints = function (shape) {\n          if (this.baseDescription) return this.baseDescription.getParameterPoints(shape);else return _super.prototype.getParameterPoints.call(this, shape);\n        };\n\n        CustomShapeDescription.prototype.getTextRectangle = function (rect, parameters) {\n          var left = rect.left,\n              top = rect.top,\n              width = rect.width,\n              height = rect.height;\n          return Utils_1.Rectangle.create(left + (this.properties.textLeft ? this.properties.textLeft * width : 0), top + (this.properties.textTop ? this.properties.textTop * height : 0), this.properties.textWidth ? this.properties.textWidth * width : width, this.properties.textHeight ? this.properties.textHeight * height : height);\n        };\n\n        CustomShapeDescription.prototype.getRawImageSize = function (rect) {\n          var left = rect.left,\n              top = rect.top,\n              width = rect.width,\n              height = rect.height;\n          return new Utils_1.Size(this.properties.imageWidth ? this.properties.imageWidth * width : width, this.properties.imageHeight ? this.properties.imageHeight * height : height);\n        };\n\n        CustomShapeDescription.prototype.getImagePlacementRectangle = function (rect, forToolbox) {\n          var left = rect.left,\n              top = rect.top,\n              width = rect.width,\n              height = rect.height;\n          return Utils_1.Rectangle.create(left + (this.properties.imageLeft && !forToolbox ? this.properties.imageLeft * width : 0), top + (this.properties.imageTop && !forToolbox ? this.properties.imageTop * height : 0), this.properties.imageWidth && !forToolbox ? this.properties.imageWidth * width : 0, this.properties.imageHeight && !forToolbox ? this.properties.imageHeight * height : 0);\n        };\n\n        CustomShapeDescription.prototype.updateSvgImage = function (cacheImageInfo) {\n          if (cacheImageInfo.base64) this.svgImage.loadBase64Content(cacheImageInfo.base64);else this.svgImage.setUnableToLoadFlag();\n        };\n\n        return CustomShapeDescription;\n      }(ShapeWithImageDescription_1.ShapeWithImageDescription);\n\n      exports.CustomShapeDescription = CustomShapeDescription;\n      /***/\n    },\n    /* 186 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics131 = function extendStatics(d, b) {\n          _extendStatics131 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics131(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics131(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ContainerDescription_1 = __webpack_require__(101);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var VerticalContainerDescription =\n      /** @class */\n      function (_super) {\n        __extends(VerticalContainerDescription, _super);\n\n        function VerticalContainerDescription(title, defaultText, defaultSize) {\n          if (title === void 0) {\n            title = \"Vertical Container\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"Container\";\n          }\n\n          if (defaultSize === void 0) {\n            defaultSize = new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension * 2, ShapeDescription_1.ShapeDefaultDimension * 1.5);\n          }\n\n          return _super.call(this, title, defaultText, defaultSize) || this;\n        }\n\n        Object.defineProperty(VerticalContainerDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.VerticalContainer;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        VerticalContainerDescription.prototype.getExpandedSize = function (size, expandedSize) {\n          return new Utils_1.Size(size.width, expandedSize.height);\n        };\n\n        VerticalContainerDescription.prototype.getCollapsedSize = function (size) {\n          return new Utils_1.Size(size.width, ContainerDescription_1.ContainerDescription.headerSize);\n        };\n\n        VerticalContainerDescription.prototype.allowResizeVertically = function (shape) {\n          return shape.expanded;\n        };\n\n        VerticalContainerDescription.prototype.createHeaderPrimitives = function (shape, forToolbox) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              width = rect.width;\n          var headerSize = this.getHeaderSize(rect, forToolbox);\n          var primitives = [];\n          primitives = primitives.concat([new RectaglePrimitive_1.RectanglePrimitive(left, top, width, headerSize, shape.style)]);\n\n          if (!forToolbox) {\n            primitives = primitives.concat(this.createExpandButtonPrimitives(shape, Utils_1.Rectangle.create(left, top, headerSize, headerSize)));\n          }\n\n          return primitives;\n        };\n\n        VerticalContainerDescription.prototype.getClientRectangle = function (rect) {\n          var headerSize = this.getHeaderSize(rect);\n          return new Utils_1.Rectangle(new Utils_1.Point(rect.left, rect.top + headerSize), new Utils_1.Size(rect.width, rect.height - headerSize));\n        };\n\n        VerticalContainerDescription.prototype.getTextRectangle = function (rect, parameters) {\n          var headerSize = this.getHeaderSize(rect);\n          return new Utils_1.Rectangle(new Utils_1.Point(rect.left + headerSize, rect.top), new Utils_1.Size(rect.width - headerSize, headerSize));\n        };\n\n        VerticalContainerDescription.prototype.getHeaderSize = function (rect, forToolbox) {\n          return forToolbox ? rect.height * ContainerDescription_1.ContainerDescription.headerToolboxSizeRatio : ContainerDescription_1.ContainerDescription.headerSize;\n        };\n\n        return VerticalContainerDescription;\n      }(ContainerDescription_1.ContainerDescription);\n\n      exports.VerticalContainerDescription = VerticalContainerDescription;\n      /***/\n    },\n    /* 187 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics132 = function extendStatics(d, b) {\n          _extendStatics132 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics132(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics132(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ContainerDescription_1 = __webpack_require__(101);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var HorizontalContainerDescription =\n      /** @class */\n      function (_super) {\n        __extends(HorizontalContainerDescription, _super);\n\n        function HorizontalContainerDescription(title, defaultText, defaultSize) {\n          if (title === void 0) {\n            title = \"Horizontal Container\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"Container\";\n          }\n\n          if (defaultSize === void 0) {\n            defaultSize = new Utils_1.Size(ShapeDescription_1.ShapeDefaultDimension * 2, ShapeDescription_1.ShapeDefaultDimension * 1.5);\n          }\n\n          return _super.call(this, title, defaultText, defaultSize) || this;\n        }\n\n        Object.defineProperty(HorizontalContainerDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.HorizontalContainer;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        HorizontalContainerDescription.prototype.getExpandedSize = function (size, expandedSize) {\n          return new Utils_1.Size(expandedSize.width, size.height);\n        };\n\n        HorizontalContainerDescription.prototype.getCollapsedSize = function (size) {\n          return new Utils_1.Size(ContainerDescription_1.ContainerDescription.headerSize, size.height);\n        };\n\n        HorizontalContainerDescription.prototype.allowResizeHorizontally = function (shape) {\n          return shape.expanded;\n        };\n\n        HorizontalContainerDescription.prototype.createHeaderPrimitives = function (shape, forToolbox) {\n          var rect = shape.rectangle;\n          var left = rect.left,\n              top = rect.top,\n              height = rect.height;\n          var headerSize = this.getHeaderSize(rect, forToolbox);\n          var primitives = [];\n          primitives = primitives.concat([new RectaglePrimitive_1.RectanglePrimitive(left, top, headerSize, height, shape.style)]);\n\n          if (!forToolbox) {\n            primitives = primitives.concat(this.createExpandButtonPrimitives(shape, Utils_1.Rectangle.create(left, top, headerSize, headerSize)));\n          }\n\n          return primitives;\n        };\n\n        HorizontalContainerDescription.prototype.getClientRectangle = function (rect) {\n          var headerSize = this.getHeaderSize(rect);\n          return new Utils_1.Rectangle(new Utils_1.Point(rect.left + headerSize, rect.top), new Utils_1.Size(rect.width - headerSize, rect.height));\n        };\n\n        HorizontalContainerDescription.prototype.getTextRectangle = function (rect, parameters) {\n          var headerSize = this.getHeaderSize(rect);\n          return new Utils_1.Rectangle(new Utils_1.Point(rect.left, rect.top + headerSize), new Utils_1.Size(headerSize, rect.height - headerSize));\n        };\n\n        HorizontalContainerDescription.prototype.getTextEditRectangle = function (rect) {\n          return new Utils_1.Rectangle(rect.position, new Utils_1.Size(rect.width, this.getHeaderSize(rect)));\n        };\n\n        HorizontalContainerDescription.prototype.getTextRotated = function () {\n          return true;\n        };\n\n        HorizontalContainerDescription.prototype.getHeaderSize = function (rect, forToolbox) {\n          return forToolbox ? rect.height * ContainerDescription_1.ContainerDescription.headerToolboxSizeRatio : ContainerDescription_1.ContainerDescription.headerSize;\n        };\n\n        return HorizontalContainerDescription;\n      }(ContainerDescription_1.ContainerDescription);\n\n      exports.HorizontalContainerDescription = HorizontalContainerDescription;\n      /***/\n    },\n    /* 188 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics133 = function extendStatics(d, b) {\n          _extendStatics133 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics133(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics133(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var CardBaseDescription_1 = __webpack_require__(69);\n\n      var ShapeWithImageDescription_1 = __webpack_require__(45);\n\n      var CardWithImageOnLeftDescription =\n      /** @class */\n      function (_super) {\n        __extends(CardWithImageOnLeftDescription, _super);\n\n        function CardWithImageOnLeftDescription(title, defaultText, defaultSize) {\n          if (title === void 0) {\n            title = \"Card with Image on the Left\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          if (defaultSize === void 0) {\n            defaultSize = new Utils_1.Size(1.5 * ShapeDescription_1.ShapeDefaultDimension, 0.5 * ShapeDescription_1.ShapeDefaultDimension);\n          }\n\n          return _super.call(this, title, defaultText, defaultSize) || this;\n        }\n\n        Object.defineProperty(CardWithImageOnLeftDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.CardWithImageOnLeft;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        CardWithImageOnLeftDescription.prototype.getToolboxHeightToWidthRatio = function (width, height) {\n          return 26 / 46;\n        };\n\n        CardWithImageOnLeftDescription.prototype.getRawImageSize = function (rect, forToolbox) {\n          var imageSize = Math.min(rect.height, rect.width) - 2 * ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins(forToolbox);\n          return new Utils_1.Size(imageSize, imageSize);\n        };\n\n        CardWithImageOnLeftDescription.prototype.getTextBlockOffset = function (rect, forToolbox) {\n          return new Utils_1.Offset(this.getImageSize(rect, forToolbox).width, 0, 0, 0);\n        };\n\n        return CardWithImageOnLeftDescription;\n      }(CardBaseDescription_1.CardBaseDescription);\n\n      exports.CardWithImageOnLeftDescription = CardWithImageOnLeftDescription;\n      /***/\n    },\n    /* 189 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics134 = function extendStatics(d, b) {\n          _extendStatics134 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics134(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics134(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var RectaglePrimitive_1 = __webpack_require__(20);\n\n      var RoundedRectanglePrimitive =\n      /** @class */\n      function (_super) {\n        __extends(RoundedRectanglePrimitive, _super);\n\n        function RoundedRectanglePrimitive(x, y, width, height, rx, ry, style, className, clipPathId, onApplyProperties) {\n          if (rx === void 0) {\n            rx = 0;\n          }\n\n          if (ry === void 0) {\n            ry = 0;\n          }\n\n          var _this = _super.call(this, x, y, width, height, style, className, clipPathId, onApplyProperties) || this;\n\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          _this.rx = rx;\n          _this.ry = ry;\n          return _this;\n        }\n\n        RoundedRectanglePrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderManager_1.svgNS, \"rect\");\n        };\n\n        RoundedRectanglePrimitive.prototype.applyElementProperties = function (element) {\n          this.setUnitAttribute(element, \"rx\", this.rx);\n          this.setUnitAttribute(element, \"ry\", this.ry);\n\n          _super.prototype.applyElementProperties.call(this, element);\n        };\n\n        return RoundedRectanglePrimitive;\n      }(RectaglePrimitive_1.RectanglePrimitive);\n\n      exports.RoundedRectanglePrimitive = RoundedRectanglePrimitive;\n      /***/\n    },\n    /* 190 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics135 = function extendStatics(d, b) {\n          _extendStatics135 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics135(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics135(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var CardBaseDescription_1 = __webpack_require__(69);\n\n      var ShapeWithImageDescription_1 = __webpack_require__(45);\n\n      var CardWithImageOnRightDescription =\n      /** @class */\n      function (_super) {\n        __extends(CardWithImageOnRightDescription, _super);\n\n        function CardWithImageOnRightDescription(title, defaultText, defaultSize) {\n          if (title === void 0) {\n            title = \"Card with Image on the Right\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          if (defaultSize === void 0) {\n            defaultSize = new Utils_1.Size(1.5 * ShapeDescription_1.ShapeDefaultDimension, 0.5 * ShapeDescription_1.ShapeDefaultDimension);\n          }\n\n          return _super.call(this, title, defaultText, defaultSize) || this;\n        }\n\n        Object.defineProperty(CardWithImageOnRightDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.CardWithImageOnRight;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        CardWithImageOnRightDescription.prototype.getToolboxHeightToWidthRatio = function (width, height) {\n          return 26 / 46;\n        };\n\n        CardWithImageOnRightDescription.prototype.getRawImageSize = function (rect, forToolbox) {\n          var imageSize = Math.min(rect.height, rect.width) - 2 * ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins(forToolbox);\n          return new Utils_1.Size(imageSize, imageSize);\n        };\n\n        CardWithImageOnRightDescription.prototype.getTextBlockOffset = function (rect, forToolbox) {\n          return new Utils_1.Offset(0, 0, this.getImageSize(rect, forToolbox).width, 0);\n        };\n\n        return CardWithImageOnRightDescription;\n      }(CardBaseDescription_1.CardBaseDescription);\n\n      exports.CardWithImageOnRightDescription = CardWithImageOnRightDescription;\n      /***/\n    },\n    /* 191 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics136 = function extendStatics(d, b) {\n          _extendStatics136 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics136(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics136(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeDescription_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var CardBaseDescription_1 = __webpack_require__(69);\n\n      var ShapeWithImageDescription_1 = __webpack_require__(45);\n\n      var CardWithImageOnTopDescription =\n      /** @class */\n      function (_super) {\n        __extends(CardWithImageOnTopDescription, _super);\n\n        function CardWithImageOnTopDescription(title, defaultText, defaultSize) {\n          if (title === void 0) {\n            title = \"Card with Image on the Top\";\n          }\n\n          if (defaultText === void 0) {\n            defaultText = \"\";\n          }\n\n          if (defaultSize === void 0) {\n            defaultSize = new Utils_1.Size(32 / 40 * ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension);\n          }\n\n          return _super.call(this, title, defaultText, defaultSize) || this;\n        }\n\n        Object.defineProperty(CardWithImageOnTopDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.CardWithImageOnTop;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        CardWithImageOnTopDescription.prototype.getRawImageSize = function (rect, forToolbox) {\n          var imageSize = Math.min(rect.width / 2 + 1, rect.height - ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins(forToolbox) * 2);\n          return new Utils_1.Size(imageSize, imageSize);\n        };\n\n        CardWithImageOnTopDescription.prototype.getTextBlockOffset = function (rect, forToolbox) {\n          return new Utils_1.Offset(0, this.getImageSize(rect).height + ShapeWithImageDescription_1.ShapeWithImageDescription.getImageMargins(forToolbox), 0, 0);\n        };\n\n        return CardWithImageOnTopDescription;\n      }(CardBaseDescription_1.CardBaseDescription);\n\n      exports.CardWithImageOnTopDescription = CardWithImageOnTopDescription;\n      /***/\n    },\n    /* 192 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics137 = function extendStatics(d, b) {\n          _extendStatics137 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics137(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics137(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var InsertToContainerHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(InsertToContainerHistoryItem, _super);\n\n        function InsertToContainerHistoryItem(item, container) {\n          var _this = _super.call(this) || this;\n\n          _this.containerKey = container.key;\n          _this.itemKey = item.key;\n          return _this;\n        }\n\n        InsertToContainerHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          var container = manipulator.model.findShape(this.containerKey);\n          manipulator.insertToContainer(item, container);\n        };\n\n        InsertToContainerHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.removeFromContainer(item);\n        };\n\n        return InsertToContainerHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.InsertToContainerHistoryItem = InsertToContainerHistoryItem;\n      /***/\n    },\n    /* 193 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics138 = function extendStatics(d, b) {\n          _extendStatics138 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics138(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics138(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var RemoveFromContainerHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(RemoveFromContainerHistoryItem, _super);\n\n        function RemoveFromContainerHistoryItem(item) {\n          var _this = _super.call(this) || this;\n\n          _this.itemKey = item.key;\n          return _this;\n        }\n\n        RemoveFromContainerHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.containerKey = item.container && item.container.key;\n          manipulator.removeFromContainer(item);\n        };\n\n        RemoveFromContainerHistoryItem.prototype.undo = function (manipulator) {\n          var container = manipulator.model.findContainer(this.containerKey);\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.insertToContainer(item, container);\n        };\n\n        return RemoveFromContainerHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.RemoveFromContainerHistoryItem = RemoveFromContainerHistoryItem;\n      /***/\n    },\n    /* 194 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics139 = function extendStatics(d, b) {\n          _extendStatics139 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics139(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics139(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangeContainerLockedHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeContainerLockedHistoryItem, _super);\n\n        function ChangeContainerLockedHistoryItem(item, locked) {\n          var _this = _super.call(this) || this;\n\n          _this.itemKey = item.key;\n          _this.containerLocked = locked;\n          return _this;\n        }\n\n        ChangeContainerLockedHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldContainerLocked = item.containerLocked;\n          manipulator.changeContainerLocked(item, this.containerLocked);\n        };\n\n        ChangeContainerLockedHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeContainerLocked(item, this.oldContainerLocked);\n        };\n\n        return ChangeContainerLockedHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeContainerLockedHistoryItem = ChangeContainerLockedHistoryItem;\n      /***/\n    },\n    /* 195 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var LayoutUtils_1 = __webpack_require__(196);\n\n      var GraphInfo =\n      /** @class */\n      function () {\n        function GraphInfo(container, sourceGraph) {\n          this.container = container;\n          this.sourceGraph = sourceGraph;\n        }\n\n        Object.defineProperty(GraphInfo.prototype, \"graph\", {\n          get: function get() {\n            return this._graph || (this._graph = this.getNodeInfoGraph());\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        GraphInfo.prototype.getNodeInfoGraph = function () {\n          return this.sourceGraph.cast(LayoutUtils_1.LayoutUtils.shapeToLayout);\n        };\n\n        return GraphInfo;\n      }();\n\n      exports.GraphInfo = GraphInfo;\n      /***/\n    },\n    /* 196 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Connector_1 = __webpack_require__(5);\n\n      var NodeLayout_1 = __webpack_require__(56);\n\n      var LayoutUtils =\n      /** @class */\n      function () {\n        function LayoutUtils() {}\n\n        LayoutUtils.shapeToLayout = function (shape) {\n          var margin = new NodeLayout_1.Margin(0);\n          var shapeRect = shape.rectangle;\n          shape.attachedConnectors.filter(function (c) {\n            return !c.beginItem || !c.endItem;\n          }).forEach(function (c) {\n            var connRect = c.rectangle;\n            margin.left = Math.max(margin.left, shapeRect.left - connRect.left + Connector_1.Connector.minOffset);\n            margin.right = Math.max(margin.right, connRect.right - shapeRect.right + Connector_1.Connector.minOffset);\n            margin.top = Math.max(margin.top, shapeRect.top - connRect.top + Connector_1.Connector.minOffset);\n            margin.bottom = Math.max(margin.bottom, connRect.bottom - shapeRect.bottom + Connector_1.Connector.minOffset);\n          });\n          var layout = new NodeLayout_1.NodeInfo(shape.key, margin, shape.size.clone());\n          layout.connectionPoints = shape.description.getConnectionPoints();\n          return layout;\n        };\n\n        return LayoutUtils;\n      }();\n\n      exports.LayoutUtils = LayoutUtils;\n      /***/\n    },\n    /* 197 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var CommandBase =\n      /** @class */\n      function () {\n        function CommandBase(control) {\n          this.control = control;\n        }\n\n        CommandBase.prototype.execute = function (parameter) {\n          var state = this.getState();\n          if (!state.enabled) return false;\n          this.control.beginUpdate();\n          var executed = this.executeCore(state, parameter);\n          this.control.endUpdate();\n          return executed;\n        };\n\n        CommandBase.prototype.updateControlState = function () {\n          if (!this.lockUIUpdating()) {\n            this.control.barManager.updateItemsState();\n          }\n        };\n\n        CommandBase.prototype.lockUIUpdating = function () {\n          return false;\n        };\n\n        return CommandBase;\n      }();\n\n      exports.CommandBase = CommandBase;\n      /***/\n    },\n    /* 198 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandState =\n      /** @class */\n      function () {\n        function SimpleCommandState(enabled, value, defaultValue, items, visible) {\n          this.visible = true;\n          this.denyUpdateValue = false;\n          this.enabled = enabled;\n          this.value = value;\n          this.items = items;\n          this.visible = visible;\n          this.defaultValue = defaultValue;\n        }\n\n        return SimpleCommandState;\n      }();\n\n      exports.SimpleCommandState = SimpleCommandState;\n      /***/\n    },\n    /* 199 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics140 = function extendStatics(d, b) {\n          _extendStatics140 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics140(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics140(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var UndoCommand =\n      /** @class */\n      function (_super) {\n        __extends(UndoCommand, _super);\n\n        function UndoCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        UndoCommand.prototype.executeCore = function (state) {\n          this.control.beginUpdate(true);\n          this.control.history.undo();\n          this.control.endUpdate(true);\n          return true;\n        };\n\n        UndoCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && this.control.history.canUndo();\n        };\n\n        return UndoCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.UndoCommand = UndoCommand;\n      /***/\n    },\n    /* 200 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics141 = function extendStatics(d, b) {\n          _extendStatics141 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics141(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics141(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var RedoCommand =\n      /** @class */\n      function (_super) {\n        __extends(RedoCommand, _super);\n\n        function RedoCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        RedoCommand.prototype.executeCore = function (state) {\n          this.control.beginUpdate(true);\n          this.control.history.redo();\n          this.control.endUpdate(true);\n          return true;\n        };\n\n        RedoCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && this.control.history.canRedo();\n        };\n\n        return RedoCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.RedoCommand = RedoCommand;\n      /***/\n    },\n    /* 201 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics142 = function extendStatics(d, b) {\n          _extendStatics142 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics142(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics142(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Importer_1 = __webpack_require__(105);\n\n      var ExportImportCommandBase_1 = __webpack_require__(47);\n\n      var ImportCommand =\n      /** @class */\n      function (_super) {\n        __extends(ImportCommand, _super);\n\n        function ImportCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ImportCommand.prototype.executeCore = function (state, parameter) {\n          var data = parameter[\"data\"] ? parameter[\"data\"] : parameter;\n          var importer = new Importer_1.Importer(data);\n\n          if (parameter[\"keepExistingItems\"] === true) {\n            importer.importItemsData(this.control.model);\n            this.control.importItemsData();\n          } else {\n            var model = importer.import();\n            this.control.importModel(model);\n          }\n\n          return true;\n        };\n\n        return ImportCommand;\n      }(ExportImportCommandBase_1.ExportImportCommandBase);\n\n      exports.ImportCommand = ImportCommand;\n      /***/\n    },\n    /* 202 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics143 = function extendStatics(d, b) {\n          _extendStatics143 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics143(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics143(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Exporter_1 = __webpack_require__(57);\n\n      var ExportImportCommandBase_1 = __webpack_require__(47);\n\n      var ExportCommand =\n      /** @class */\n      function (_super) {\n        __extends(ExportCommand, _super);\n\n        function ExportCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportCommand.prototype.executeCore = function (state, parameter) {\n          var exporter = new Exporter_1.Exporter();\n          var data = exporter.export(this.control.model);\n          parameter(data);\n          return true;\n        };\n\n        return ExportCommand;\n      }(ExportImportCommandBase_1.ExportImportCommandBase);\n\n      exports.ExportCommand = ExportCommand;\n      /***/\n    },\n    /* 203 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics144 = function extendStatics(d, b) {\n          _extendStatics144 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics144(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics144(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ToggleStyleTextPropertyCommand_1 = __webpack_require__(58);\n\n      var ToggleFontBoldCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleFontBoldCommand, _super);\n\n        function ToggleFontBoldCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleFontBoldCommand.prototype.getStyleProperty = function () {\n          return \"font-weight\";\n        };\n\n        ToggleFontBoldCommand.prototype.getStylePropertyValue = function () {\n          return \"bold\";\n        };\n\n        return ToggleFontBoldCommand;\n      }(ToggleStyleTextPropertyCommand_1.ToggleStyleTextPropertyCommand);\n\n      exports.ToggleFontBoldCommand = ToggleFontBoldCommand;\n      /***/\n    },\n    /* 204 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics145 = function extendStatics(d, b) {\n          _extendStatics145 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics145(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics145(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ToggleStyleTextPropertyCommand_1 = __webpack_require__(58);\n\n      var ToggleFontItalicCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleFontItalicCommand, _super);\n\n        function ToggleFontItalicCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleFontItalicCommand.prototype.getStyleProperty = function () {\n          return \"font-style\";\n        };\n\n        ToggleFontItalicCommand.prototype.getStylePropertyValue = function () {\n          return \"italic\";\n        };\n\n        return ToggleFontItalicCommand;\n      }(ToggleStyleTextPropertyCommand_1.ToggleStyleTextPropertyCommand);\n\n      exports.ToggleFontItalicCommand = ToggleFontItalicCommand;\n      /***/\n    },\n    /* 205 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics146 = function extendStatics(d, b) {\n          _extendStatics146 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics146(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics146(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ToggleStyleTextPropertyCommand_1 = __webpack_require__(58);\n\n      var ToggleFontUnderlineCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleFontUnderlineCommand, _super);\n\n        function ToggleFontUnderlineCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleFontUnderlineCommand.prototype.getStyleProperty = function () {\n          return \"text-decoration\";\n        };\n\n        ToggleFontUnderlineCommand.prototype.getStylePropertyValue = function () {\n          return \"underline\";\n        };\n\n        return ToggleFontUnderlineCommand;\n      }(ToggleStyleTextPropertyCommand_1.ToggleStyleTextPropertyCommand);\n\n      exports.ToggleFontUnderlineCommand = ToggleFontUnderlineCommand;\n      /***/\n    },\n    /* 206 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics147 = function extendStatics(d, b) {\n          _extendStatics147 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics147(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics147(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeStyleTextPropertyCommand_1 = __webpack_require__(72);\n\n      var ChangeFontNameCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeFontNameCommand, _super);\n\n        function ChangeFontNameCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeFontNameCommand.prototype.getStyleProperty = function () {\n          return \"font-family\";\n        };\n\n        return ChangeFontNameCommand;\n      }(ChangeStyleTextPropertyCommand_1.ChangeStyleTextPropertyCommand);\n\n      exports.ChangeFontNameCommand = ChangeFontNameCommand;\n      /***/\n    },\n    /* 207 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics148 = function extendStatics(d, b) {\n          _extendStatics148 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics148(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics148(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeStyleTextPropertyCommand_1 = __webpack_require__(72);\n\n      var ChangeFontSizeCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeFontSizeCommand, _super);\n\n        function ChangeFontSizeCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeFontSizeCommand.prototype.getStyleProperty = function () {\n          return \"font-size\";\n        };\n\n        return ChangeFontSizeCommand;\n      }(ChangeStyleTextPropertyCommand_1.ChangeStyleTextPropertyCommand);\n\n      exports.ChangeFontSizeCommand = ChangeFontSizeCommand;\n      /***/\n    },\n    /* 208 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics149 = function extendStatics(d, b) {\n          _extendStatics149 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics149(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics149(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeStyleTextPropertyCommand_1 = __webpack_require__(72);\n\n      var __1 = __webpack_require__(8);\n\n      var ChangeFontColorCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeFontColorCommand, _super);\n\n        function ChangeFontColorCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeFontColorCommand.prototype.processParameter = function (parameter) {\n          return __1.ColorHelper.stringToHash(parameter);\n        };\n\n        ChangeFontColorCommand.prototype.getStyleProperty = function () {\n          return \"fill\";\n        };\n\n        return ChangeFontColorCommand;\n      }(ChangeStyleTextPropertyCommand_1.ChangeStyleTextPropertyCommand);\n\n      exports.ChangeFontColorCommand = ChangeFontColorCommand;\n      /***/\n    },\n    /* 209 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics150 = function extendStatics(d, b) {\n          _extendStatics150 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics150(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics150(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeStylePropertyCommand_1 = __webpack_require__(109);\n\n      var __1 = __webpack_require__(8);\n\n      var ChangeFillColorCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeFillColorCommand, _super);\n\n        function ChangeFillColorCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeFillColorCommand.prototype.processParameter = function (parameter) {\n          return __1.ColorHelper.stringToHash(parameter);\n        };\n\n        ChangeFillColorCommand.prototype.getStyleProperty = function () {\n          return \"fill\";\n        };\n\n        return ChangeFillColorCommand;\n      }(ChangeStylePropertyCommand_1.ChangeStylePropertyCommand);\n\n      exports.ChangeFillColorCommand = ChangeFillColorCommand;\n      /***/\n    },\n    /* 210 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics151 = function extendStatics(d, b) {\n          _extendStatics151 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics151(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics151(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeStylePropertyCommand_1 = __webpack_require__(109);\n\n      var __1 = __webpack_require__(8);\n\n      var ChangeStrokeColorCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStrokeColorCommand, _super);\n\n        function ChangeStrokeColorCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeStrokeColorCommand.prototype.processParameter = function (parameter) {\n          return __1.ColorHelper.stringToHash(parameter);\n        };\n\n        ChangeStrokeColorCommand.prototype.getStyleProperty = function () {\n          return \"stroke\";\n        };\n\n        return ChangeStrokeColorCommand;\n      }(ChangeStylePropertyCommand_1.ChangeStylePropertyCommand);\n\n      exports.ChangeStrokeColorCommand = ChangeStrokeColorCommand;\n      /***/\n    },\n    /* 211 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics152 = function extendStatics(d, b) {\n          _extendStatics152 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics152(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics152(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ToggleStyleTextPropertyCommand_1 = __webpack_require__(58);\n\n      var ChangeTextAlignCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeTextAlignCommand, _super);\n\n        function ChangeTextAlignCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeTextAlignCommand.prototype.getStyleProperty = function () {\n          return \"text-anchor\";\n        };\n\n        return ChangeTextAlignCommand;\n      }(ToggleStyleTextPropertyCommand_1.ToggleStyleTextPropertyCommand);\n\n      exports.ChangeTextAlignCommand = ChangeTextAlignCommand;\n\n      var TextLeftAlignCommand =\n      /** @class */\n      function (_super) {\n        __extends(TextLeftAlignCommand, _super);\n\n        function TextLeftAlignCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        TextLeftAlignCommand.prototype.getStylePropertyValue = function () {\n          return \"start\";\n        };\n\n        return TextLeftAlignCommand;\n      }(ChangeTextAlignCommand);\n\n      exports.TextLeftAlignCommand = TextLeftAlignCommand;\n\n      var TextCenterAlignCommand =\n      /** @class */\n      function (_super) {\n        __extends(TextCenterAlignCommand, _super);\n\n        function TextCenterAlignCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        TextCenterAlignCommand.prototype.getStylePropertyValue = function () {\n          return \"middle\";\n        };\n\n        return TextCenterAlignCommand;\n      }(ChangeTextAlignCommand);\n\n      exports.TextCenterAlignCommand = TextCenterAlignCommand;\n\n      var TextRightAlignCommand =\n      /** @class */\n      function (_super) {\n        __extends(TextRightAlignCommand, _super);\n\n        function TextRightAlignCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        TextRightAlignCommand.prototype.getStylePropertyValue = function () {\n          return \"end\";\n        };\n\n        return TextRightAlignCommand;\n      }(ChangeTextAlignCommand);\n\n      exports.TextRightAlignCommand = TextRightAlignCommand;\n      /***/\n    },\n    /* 212 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics153 = function extendStatics(d, b) {\n          _extendStatics153 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics153(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics153(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeConnectorPropertyCommand_1 = __webpack_require__(110);\n\n      var ConnectorProperties_1 = __webpack_require__(24);\n\n      var ChangeConnectorStartLineEndingCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorStartLineEndingCommand, _super);\n\n        function ChangeConnectorStartLineEndingCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeConnectorStartLineEndingCommand.prototype.getPropertyName = function () {\n          return \"startLineEnding\";\n        };\n\n        ChangeConnectorStartLineEndingCommand.prototype.getPropertyDefaultValue = function () {\n          return ConnectorProperties_1.ConnectorLineEnding.None;\n        };\n\n        return ChangeConnectorStartLineEndingCommand;\n      }(ChangeConnectorPropertyCommand_1.ChangeConnectorPropertyCommand);\n\n      exports.ChangeConnectorStartLineEndingCommand = ChangeConnectorStartLineEndingCommand;\n\n      var ChangeConnectorEndLineEndingCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorEndLineEndingCommand, _super);\n\n        function ChangeConnectorEndLineEndingCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeConnectorEndLineEndingCommand.prototype.getPropertyName = function () {\n          return \"endLineEnding\";\n        };\n\n        ChangeConnectorEndLineEndingCommand.prototype.getPropertyDefaultValue = function () {\n          return ConnectorProperties_1.ConnectorLineEnding.Arrow;\n        };\n\n        return ChangeConnectorEndLineEndingCommand;\n      }(ChangeConnectorPropertyCommand_1.ChangeConnectorPropertyCommand);\n\n      exports.ChangeConnectorEndLineEndingCommand = ChangeConnectorEndLineEndingCommand;\n      /***/\n    },\n    /* 213 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics154 = function extendStatics(d, b) {\n          _extendStatics154 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics154(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics154(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeConnectorPropertyCommand_1 = __webpack_require__(110);\n\n      var ConnectorProperties_1 = __webpack_require__(24);\n\n      var ChangeConnectorLineOptionCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorLineOptionCommand, _super);\n\n        function ChangeConnectorLineOptionCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeConnectorLineOptionCommand.prototype.getPropertyName = function () {\n          return \"lineOption\";\n        };\n\n        ChangeConnectorLineOptionCommand.prototype.getPropertyDefaultValue = function () {\n          return ConnectorProperties_1.ConnectorLineOption.Straight;\n        };\n\n        return ChangeConnectorLineOptionCommand;\n      }(ChangeConnectorPropertyCommand_1.ChangeConnectorPropertyCommand);\n\n      exports.ChangeConnectorLineOptionCommand = ChangeConnectorLineOptionCommand;\n      /***/\n    },\n    /* 214 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics155 = function extendStatics(d, b) {\n          _extendStatics155 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics155(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics155(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var SelectAllCommand =\n      /** @class */\n      function (_super) {\n        __extends(SelectAllCommand, _super);\n\n        function SelectAllCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        SelectAllCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        SelectAllCommand.prototype.executeCore = function (state, parameter) {\n          var itemKeys = [];\n          this.control.model.iterateItems(function (i) {\n            return itemKeys.push(i.key);\n          });\n          this.control.selection.set(itemKeys);\n          return true;\n        };\n\n        return SelectAllCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.SelectAllCommand = SelectAllCommand;\n      /***/\n    },\n    /* 215 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics156 = function extendStatics(d, b) {\n          _extendStatics156 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics156(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics156(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var AutoLayoutCommandBase_1 = __webpack_require__(59);\n\n      var WideTree_1 = __webpack_require__(73);\n\n      var LayoutSettings_1 = __webpack_require__(22);\n\n      var AutoLayoutTreeVerticalCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutTreeVerticalCommand, _super);\n\n        function AutoLayoutTreeVerticalCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutTreeVerticalCommand.prototype.createLayoutSettings = function () {\n          var gridSize = this.control.settings.snapToGrid ? this.control.settings.gridSize : undefined;\n          var settings = new LayoutSettings_1.TreeLayoutSettings(gridSize);\n          settings.orientation = LayoutSettings_1.DataLayoutOrientation.Vertical;\n          return settings;\n        };\n\n        AutoLayoutTreeVerticalCommand.prototype.createLayout = function (settings, graph) {\n          return new WideTree_1.TreeLayoutBuilder(settings, graph).build();\n        };\n\n        return AutoLayoutTreeVerticalCommand;\n      }(AutoLayoutCommandBase_1.AutoLayoutCommandBase);\n\n      exports.AutoLayoutTreeVerticalCommand = AutoLayoutTreeVerticalCommand;\n      /***/\n    },\n    /* 216 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Structures_1 = __webpack_require__(31);\n\n      var Tree =\n      /** @class */\n      function () {\n        function Tree(root, parentToChildren) {\n          var _this = this;\n\n          this.childToParent = {};\n          this.root = root;\n          this.parentToChildren = parentToChildren;\n\n          var _loop_1 = function _loop_1(key) {\n            if (!parentToChildren.hasOwnProperty(key)) return \"continue\";\n            parentToChildren[key].forEach(function (c) {\n              return _this.childToParent[c.key] = key;\n            });\n          };\n\n          for (var key in parentToChildren) {\n            _loop_1(key);\n          }\n        }\n\n        Tree.prototype.getChildren = function (node) {\n          return node && this.parentToChildren[node.key] ? this.parentToChildren[node.key] : [];\n        };\n\n        Tree.prototype.hasChildren = function (node) {\n          return this.parentToChildren[node.key] && this.parentToChildren[node.key].length > 0;\n        };\n\n        Tree.prototype.iterate = function (callback) {\n          this.iterateCore(this.root, 0, callback);\n        };\n\n        Tree.createSpanningTree = function (component) {\n          var rootKey = Tree.findRoot(component);\n          var iterator = component.createIterator(Structures_1.ConnectionMode.Outgoing);\n          var parentToChildren = {};\n\n          iterator.skipEdge = function (e) {\n            return e.to === undefined || iterator.isNodeVisited(e.to);\n          };\n\n          iterator.onNode = function (n) {\n            return parentToChildren[n.key] = [];\n          };\n\n          iterator.onEdge = function (e) {\n            var node = component.getNode(e.to);\n            node && parentToChildren[e.from].push(node);\n          };\n\n          iterator.iterate(rootKey);\n          return new Tree(component.getNode(rootKey), parentToChildren);\n        };\n\n        Tree.prototype.iterateCore = function (node, level, callback) {\n          var _this = this;\n\n          callback(node, level);\n          this.getChildren(node).forEach(function (n) {\n            return _this.iterateCore(n, level + 1, callback);\n          });\n        };\n\n        Tree.findRoot = function (component) {\n          return component.nodes.reduce(function (aggregator, cur) {\n            var edges = component.getAdjacentEdges(cur);\n            var inc = edges.filter(function (l) {\n              return l.to === cur;\n            }).length;\n            var out = edges.filter(function (l) {\n              return l.from === cur;\n            }).length;\n\n            if (aggregator.candidate === undefined || inc === 0 && aggregator.inc > 0 || aggregator.inc !== 0 && aggregator.out - aggregator.inc < out - inc) {\n              aggregator.candidate = cur;\n              aggregator.inc = inc;\n              aggregator.out = out;\n            }\n\n            return aggregator;\n          }, {\n            inc: -1,\n            out: -1,\n            candidate: undefined\n          }).candidate;\n        };\n\n        return Tree;\n      }();\n\n      exports.Tree = Tree;\n      /***/\n    },\n    /* 217 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics157 = function extendStatics(d, b) {\n          _extendStatics157 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics157(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics157(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ChangeSnapToGridCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeSnapToGridCommand, _super);\n\n        function ChangeSnapToGridCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeSnapToGridCommand.prototype.executeCore = function (state, parameter) {\n          var newValue = parameter === undefined ? !this.control.settings.snapToGrid : !!parameter;\n\n          if (this.control.settings.snapToGrid !== newValue) {\n            this.control.settings.snapToGrid = newValue;\n            return true;\n          }\n\n          return false;\n        };\n\n        ChangeSnapToGridCommand.prototype.getValue = function () {\n          return this.control.settings.snapToGrid;\n        };\n\n        return ChangeSnapToGridCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeSnapToGridCommand = ChangeSnapToGridCommand;\n      /***/\n    },\n    /* 218 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics158 = function extendStatics(d, b) {\n          _extendStatics158 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics158(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics158(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ChangeGridSizeCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeGridSizeCommand, _super);\n\n        function ChangeGridSizeCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeGridSizeCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeGridSizeCommand.prototype.getValue = function () {\n          return this.getModelUnit(this.control.settings.gridSize);\n        };\n\n        ChangeGridSizeCommand.prototype.executeCore = function (state, parameter) {\n          this.control.settings.gridSize = this.getModelUnitTwipsValue(parameter);\n          return true;\n        };\n\n        ChangeGridSizeCommand.prototype.getItems = function () {\n          var _this = this;\n\n          return this.control.settings.gridSizeItems.map(function (s) {\n            return {\n              value: _this.getModelUnit(s),\n              text: _this.getViewUnitText(s)\n            };\n          });\n        };\n\n        return ChangeGridSizeCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeGridSizeCommand = ChangeGridSizeCommand;\n\n      var ChangeGridSizeItemsCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeGridSizeItemsCommand, _super);\n\n        function ChangeGridSizeItemsCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeGridSizeItemsCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeGridSizeItemsCommand.prototype.getValue = function () {\n          var _this = this;\n\n          return this.control.settings.gridSizeItems.map(function (s) {\n            return _this.getModelUnit(s);\n          });\n        };\n\n        ChangeGridSizeItemsCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.settings.gridSizeItems = parameter.map(function (s) {\n            return _this.getModelUnitTwipsValue(s);\n          });\n          return true;\n        };\n\n        return ChangeGridSizeItemsCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeGridSizeItemsCommand = ChangeGridSizeItemsCommand;\n      /***/\n    },\n    /* 219 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics159 = function extendStatics(d, b) {\n          _extendStatics159 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics159(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics159(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangePagePropertyCommand_1 = __webpack_require__(60);\n\n      var ChangePageLandscapeHistoryItem_1 = __webpack_require__(220);\n\n      var ChangePageLandscapeCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageLandscapeCommand, _super);\n\n        function ChangePageLandscapeCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangePageLandscapeCommand.prototype.getValue = function () {\n          return this.control.model.pageLandscape;\n        };\n\n        ChangePageLandscapeCommand.prototype.createHistoryItems = function (parameter) {\n          return [new ChangePageLandscapeHistoryItem_1.ChangePageLandscapeHistoryItem(parameter)];\n        };\n\n        return ChangePageLandscapeCommand;\n      }(ChangePagePropertyCommand_1.ChangePagePropertyCommand);\n\n      exports.ChangePageLandscapeCommand = ChangePageLandscapeCommand;\n      /***/\n    },\n    /* 220 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics160 = function extendStatics(d, b) {\n          _extendStatics160 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics160(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics160(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangePageLandscapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageLandscapeHistoryItem, _super);\n\n        function ChangePageLandscapeHistoryItem(value) {\n          var _this = _super.call(this) || this;\n\n          _this.value = value;\n          return _this;\n        }\n\n        ChangePageLandscapeHistoryItem.prototype.redo = function (manipulator) {\n          this.oldValue = manipulator.model.pageLandscape;\n          manipulator.changePageLandscape(this.value);\n        };\n\n        ChangePageLandscapeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.changePageLandscape(this.oldValue);\n        };\n\n        return ChangePageLandscapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangePageLandscapeHistoryItem = ChangePageLandscapeHistoryItem;\n      /***/\n    },\n    /* 221 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics161 = function extendStatics(d, b) {\n          _extendStatics161 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics161(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics161(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangePagePropertyCommand_1 = __webpack_require__(60);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ChangePageSizeHistoryItem_1 = __webpack_require__(222);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ChangePageSizeCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageSizeCommand, _super);\n\n        function ChangePageSizeCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangePageSizeCommand.prototype.getValue = function () {\n          return this.getModelUnitSize(this.control.model.pageSize);\n        };\n\n        ChangePageSizeCommand.prototype.createHistoryItems = function (parameter) {\n          return [new ChangePageSizeHistoryItem_1.ChangePageSizeHistoryItem(new Utils_1.Size(this.getModelUnitTwipsValue(parameter.width), this.getModelUnitTwipsValue(parameter.height)))];\n        };\n\n        ChangePageSizeCommand.prototype.getItems = function () {\n          var _this = this;\n\n          return this.control.settings.pageSizeItems.map(function (i) {\n            return {\n              value: _this.getModelUnitSize(i.size),\n              text: i.text.replace(\"{width}\", _this.getViewUnitText(i.size.width)).replace(\"{height}\", _this.getViewUnitText(i.size.height))\n            };\n          });\n        };\n\n        ChangePageSizeCommand.prototype.getModelUnitSize = function (size) {\n          return new Utils_1.Size(this.getModelUnit(size.width), this.getModelUnit(size.height));\n        };\n\n        return ChangePageSizeCommand;\n      }(ChangePagePropertyCommand_1.ChangePagePropertyCommand);\n\n      exports.ChangePageSizeCommand = ChangePageSizeCommand;\n\n      var ChangePageSizeItemsCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageSizeItemsCommand, _super);\n\n        function ChangePageSizeItemsCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangePageSizeItemsCommand.prototype.isEnabled = function () {\n          return true;\n        };\n\n        ChangePageSizeItemsCommand.prototype.getValue = function () {\n          var _this = this;\n\n          return this.control.settings.pageSizeItems.map(function (i) {\n            return {\n              size: new Utils_1.Size(_this.getModelUnit(i.width), _this.getModelUnit(i.height)),\n              text: i.text\n            };\n          });\n        };\n\n        ChangePageSizeItemsCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.settings.pageSizeItems = parameter.map(function (i) {\n            return {\n              size: new Utils_1.Size(_this.getModelUnitTwipsValue(i.width), _this.getModelUnitTwipsValue(i.height)),\n              text: i.text\n            };\n          });\n          return true;\n        };\n\n        return ChangePageSizeItemsCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangePageSizeItemsCommand = ChangePageSizeItemsCommand;\n      /***/\n    },\n    /* 222 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics162 = function extendStatics(d, b) {\n          _extendStatics162 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics162(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics162(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangePageSizeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageSizeHistoryItem, _super);\n\n        function ChangePageSizeHistoryItem(size) {\n          var _this = _super.call(this) || this;\n\n          _this.size = size;\n          return _this;\n        }\n\n        ChangePageSizeHistoryItem.prototype.redo = function (manipulator) {\n          this.oldSize = manipulator.model.pageSize;\n          manipulator.changePageSize(this.size);\n        };\n\n        ChangePageSizeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.changePageSize(this.oldSize);\n        };\n\n        return ChangePageSizeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangePageSizeHistoryItem = ChangePageSizeHistoryItem;\n      /***/\n    },\n    /* 223 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics163 = function extendStatics(d, b) {\n          _extendStatics163 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics163(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics163(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ExportImageCommand_1 = __webpack_require__(74);\n\n      var ExportPngCommand =\n      /** @class */\n      function (_super) {\n        __extends(ExportPngCommand, _super);\n\n        function ExportPngCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportPngCommand.prototype.getExtension = function () {\n          return \"png\";\n        };\n\n        ExportPngCommand.prototype.getExportFunc = function () {\n          return this.exporter.exportPng;\n        };\n\n        return ExportPngCommand;\n      }(ExportImageCommand_1.ExportImageCommand);\n\n      exports.ExportPngCommand = ExportPngCommand;\n      /***/\n    },\n    /* 224 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics164 = function extendStatics(d, b) {\n          _extendStatics164 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics164(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics164(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Browser_1 = __webpack_require__(23);\n\n      var Utils_1 = __webpack_require__(15);\n\n      var CanvasManagerBase_1 = __webpack_require__(33);\n\n      var __1 = __webpack_require__(8);\n\n      var EXPORT_IMAGE_QUALITY = 1;\n\n      var CanvasExportManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasExportManager, _super);\n\n        function CanvasExportManager(itemsContainer) {\n          var _this = _super.call(this, 1) || this;\n\n          _this.itemsContainer = itemsContainer;\n          return _this;\n        }\n\n        CanvasExportManager.prototype.getSvgImage = function (modelSize, pageColor) {\n          var svgEl = RenderManager_1.RenderManager.createSvgElement(null, true);\n          var modelAbsSize = modelSize.transform(UnitConverter_1.UnitConverter.twipsToPixelsF);\n          Utils_1.RenderUtils.updateSvgElementSize(svgEl, modelAbsSize.width, modelAbsSize.height, true);\n          svgEl.style.backgroundColor = __1.ColorHelper.colorToHash(pageColor);\n          this.createTextFloodFilter(undefined, svgEl, pageColor);\n          var exportCssRules = this.getExportCssRules();\n          var useCssRules = exportCssRules && !Browser_1.Browser.IE;\n\n          if (useCssRules) {\n            var style = document.createElementNS(RenderManager_1.svgNS, \"style\");\n            style.innerHTML = exportCssRules;\n            svgEl.appendChild(style);\n          }\n\n          for (var i = 0; i < this.itemsContainer.childNodes.length; i++) {\n            var node = this.itemsContainer.childNodes[i].cloneNode(true);\n\n            if (!useCssRules) {\n              this.inlineStyle(node, this.itemsContainer.childNodes[i]);\n            }\n\n            svgEl.appendChild(node);\n          }\n\n          return svgEl;\n        };\n\n        CanvasExportManager.prototype.getSvgImageUrl = function (modelSize, pageColor) {\n          var svgEl = this.getSvgImage(modelSize, pageColor);\n          return this.getSvgBase64String(svgEl);\n        };\n\n        CanvasExportManager.prototype.getSvgString = function (svgElement) {\n          return new XMLSerializer().serializeToString(svgElement);\n        };\n\n        CanvasExportManager.prototype.getSvgBase64String = function (svgElement) {\n          var xml = this.getSvgString(svgElement);\n          return CanvasExportManager.base64Start + this.getBase64EncodeUnicode(xml);\n        };\n\n        CanvasExportManager.prototype.getBase64EncodeUnicode = function (s) {\n          return btoa(encodeURIComponent(s).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n            return String.fromCharCode(parseInt(\"0x\" + p1, 16));\n          }));\n        };\n\n        CanvasExportManager.prototype.getExportCssRules = function () {\n          for (var i = 0; i < document.styleSheets.length; i++) {\n            var rules = this.getRules(document.styleSheets[i]);\n\n            if (rules) {\n              var cssText = \"\";\n\n              for (var j = 0; j < rules.length; j++) {\n                var rule = rules[j];\n                var selectorText = this.isCSSStyleRule(rule) ? rule.selectorText : null;\n                if (selectorText && this.checkSelector(selectorText)) cssText += rule.cssText + \"\\n\";\n              }\n\n              if (cssText.length > 0) return \"\\n\" + cssText;\n            }\n          }\n        };\n\n        CanvasExportManager.prototype.checkSelector = function (selectorText) {\n          for (var i = 0; i < CanvasExportManager.exportStyleRules.length; i++) {\n            if (selectorText.indexOf(CanvasExportManager.exportStyleRules[i]) === 0) return true;\n          }\n\n          return false;\n        };\n\n        CanvasExportManager.prototype.getRules = function (styleSheet) {\n          try {\n            return this.isCSSStyleSheet(styleSheet) ? styleSheet.rules || styleSheet.cssRules : null;\n          } catch (_a) {} // Catch access dinied exception\n\n        };\n\n        CanvasExportManager.prototype.isCSSStyleSheet = function (stylesheet) {\n          return stylesheet.rules !== undefined;\n        };\n\n        CanvasExportManager.prototype.isCSSStyleRule = function (rule) {\n          return rule.selectorText !== undefined;\n        };\n\n        CanvasExportManager.prototype.inlineStyle = function (destNode, srcNode) {\n          for (var i = 0; i < destNode.childNodes.length; i++) {\n            var child = destNode.childNodes[i];\n            if (!child.tagName) continue;\n            if (child.tagName === \"g\") this.inlineStyle(child, srcNode.childNodes[i]);else if (child.style) {\n              var style = window.getComputedStyle(srcNode.childNodes[i]);\n\n              if (style !== undefined) {\n                for (var index = 0; index < CanvasExportManager.exportStyleAttributes.length; index++) {\n                  var styleProperty = CanvasExportManager.exportStyleAttributes[index];\n                  child.style.setProperty(styleProperty, style.getPropertyValue(styleProperty));\n                }\n              }\n            }\n          }\n        };\n\n        CanvasExportManager.prototype.exportSvgImage = function (modelSize, pageColor, callback) {\n          callback(this.getSvgImageUrl(modelSize, pageColor));\n        };\n\n        CanvasExportManager.prototype.exportBinaryImage = function (modelSize, pageColor, mimeType, callback) {\n          var modelAbsSize = this.getAbsoluteSize(modelSize);\n          var canvasEl = document.createElement('canvas');\n          canvasEl.width = modelAbsSize.width;\n          canvasEl.height = modelAbsSize.height;\n          var ctx = canvasEl.getContext(\"2d\");\n          ctx.fillStyle = __1.ColorHelper.colorToHash(pageColor);\n          ctx.fillRect(0, 0, modelAbsSize.width, modelAbsSize.height);\n\n          if (Browser_1.Browser.IE && typeof window[\"canvg\"] === \"function\") {\n            var svgEl = this.getSvgImage(modelSize, pageColor);\n            var svgStr = this.getSvgString(svgEl);\n            ctx[\"drawSvg\"](svgStr, 0, 0, null, null, {\n              renderCallback: function renderCallback() {\n                callback(canvasEl.toDataURL(mimeType, EXPORT_IMAGE_QUALITY));\n              }\n            });\n          } else {\n            var imgEl = new Image();\n            imgEl.width = modelAbsSize.width;\n            imgEl.height = modelAbsSize.height;\n            imgEl.setAttribute('crossOrigin', 'anonymous');\n\n            imgEl.onload = function () {\n              ctx.drawImage(imgEl, 0, 0);\n              callback(canvasEl.toDataURL(mimeType, EXPORT_IMAGE_QUALITY));\n            };\n\n            imgEl.src = this.getSvgImageUrl(modelSize, pageColor);\n          }\n        };\n\n        CanvasExportManager.prototype.exportPngImage = function (modelSize, pageColor, callback) {\n          this.exportBinaryImage(modelSize, pageColor, \"image/png\", callback);\n        };\n\n        CanvasExportManager.prototype.exportJpgImage = function (modelSize, pageColor, callback) {\n          this.exportBinaryImage(modelSize, pageColor, \"image/jpeg\", callback);\n        };\n\n        CanvasExportManager.prototype.notifyModelChanged = function (changes) {};\n\n        CanvasExportManager.prototype.notifyPageColorChanged = function (color) {};\n\n        CanvasExportManager.prototype.notifyPageSizeChanged = function (pageSize, pageLandscape) {};\n\n        CanvasExportManager.base64Start = 'data:image/svg+xml;base64,';\n        CanvasExportManager.exportStyleRules = [\".dxdi-canvas .shape \", \".dxdi-canvas .connector \", \".dxdi-canvas text\", \".dxdi-canvas.export\"];\n        CanvasExportManager.exportStyleAttributes = [\"fill\", \"stroke\", \"stroke-width\", \"shape-rendering\", \"font-family\", \"font-size\", \"font-weight\", \"font-style\", \"text-decoration\", \"text-anchor\"];\n        return CanvasExportManager;\n      }(CanvasManagerBase_1.CanvasManagerBase);\n\n      exports.CanvasExportManager = CanvasExportManager;\n      /***/\n    },\n    /* 225 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics165 = function extendStatics(d, b) {\n          _extendStatics165 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics165(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics165(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ExportImageCommand_1 = __webpack_require__(74);\n\n      var ExportSvgCommand =\n      /** @class */\n      function (_super) {\n        __extends(ExportSvgCommand, _super);\n\n        function ExportSvgCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportSvgCommand.prototype.getExtension = function () {\n          return \"svg\";\n        };\n\n        ExportSvgCommand.prototype.getExportFunc = function () {\n          return this.exporter.exportSvg;\n        };\n\n        return ExportSvgCommand;\n      }(ExportImageCommand_1.ExportImageCommand);\n\n      exports.ExportSvgCommand = ExportSvgCommand;\n      /***/\n    },\n    /* 226 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics166 = function extendStatics(d, b) {\n          _extendStatics166 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics166(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics166(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ExportImageCommand_1 = __webpack_require__(74);\n\n      var ExportJpgCommand =\n      /** @class */\n      function (_super) {\n        __extends(ExportJpgCommand, _super);\n\n        function ExportJpgCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportJpgCommand.prototype.getExtension = function () {\n          return \"jpg\";\n        };\n\n        ExportJpgCommand.prototype.getExportFunc = function () {\n          return this.exporter.exportJpg;\n        };\n\n        return ExportJpgCommand;\n      }(ExportImageCommand_1.ExportImageCommand);\n\n      exports.ExportJpgCommand = ExportJpgCommand;\n      /***/\n    },\n    /* 227 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics167 = function extendStatics(d, b) {\n          _extendStatics167 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics167(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics167(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Exporter_1 = __webpack_require__(57);\n\n      var ClipboardCommand_1 = __webpack_require__(75);\n\n      var CopySelectionCommand =\n      /** @class */\n      function (_super) {\n        __extends(CopySelectionCommand, _super);\n\n        function CopySelectionCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CopySelectionCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !this.control.selection.isEmpty(true);\n        };\n\n        CopySelectionCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        CopySelectionCommand.prototype.executeCore = function (state) {\n          var exporter = new Exporter_1.Exporter();\n          var data = exporter.exportItems(this.control.selection.getSelectedItems(true, true));\n          this.setClipboardData(data);\n          return true;\n        };\n\n        return CopySelectionCommand;\n      }(ClipboardCommand_1.ClipboardCommand);\n\n      exports.CopySelectionCommand = CopySelectionCommand;\n      /***/\n    },\n    /* 228 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics168 = function extendStatics(d, b) {\n          _extendStatics168 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics168(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics168(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Exporter_1 = __webpack_require__(57);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var ClipboardCommand_1 = __webpack_require__(75);\n\n      var CutSelectionCommand =\n      /** @class */\n      function (_super) {\n        __extends(CutSelectionCommand, _super);\n\n        function CutSelectionCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CutSelectionCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !this.control.selection.isEmpty();\n        };\n\n        CutSelectionCommand.prototype.executeCore = function (state) {\n          var exporter = new Exporter_1.Exporter();\n          var data = exporter.exportItems(this.control.selection.getSelectedItems(true, true));\n          this.setClipboardData(data);\n          ModelUtils_1.ModelUtils.deleteSelection(this.control.history, this.control.model, this.control.selection);\n          return true;\n        };\n\n        return CutSelectionCommand;\n      }(ClipboardCommand_1.ClipboardCommand);\n\n      exports.CutSelectionCommand = CutSelectionCommand;\n      /***/\n    },\n    /* 229 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics169 = function extendStatics(d, b) {\n          _extendStatics169 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics169(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics169(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var PasteSelectoinCommandBase_1 = __webpack_require__(114);\n\n      var PasteSelectionCommand =\n      /** @class */\n      function (_super) {\n        __extends(PasteSelectionCommand, _super);\n\n        function PasteSelectionCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        PasteSelectionCommand.prototype.getShapeNewPosition = function (position) {\n          return PasteSelectoinCommandBase_1.PasteSelectionCommandBase.getShapeNewPosition(this.control.model, position);\n        };\n\n        PasteSelectionCommand.prototype.changeConnectorPoints = function (connector) {\n          PasteSelectoinCommandBase_1.PasteSelectionCommandBase.changeConnectorPoints(this.control.model, connector);\n        };\n\n        return PasteSelectionCommand;\n      }(PasteSelectoinCommandBase_1.PasteSelectionCommandBase);\n\n      exports.PasteSelectionCommand = PasteSelectionCommand;\n      /***/\n    },\n    /* 230 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics170 = function extendStatics(d, b) {\n          _extendStatics170 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics170(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics170(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ImportShapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ImportShapeHistoryItem, _super);\n\n        function ImportShapeHistoryItem(shape) {\n          var _this = _super.call(this) || this;\n\n          _this.shape = shape;\n          return _this;\n        }\n\n        ImportShapeHistoryItem.prototype.redo = function (manipulator) {\n          this.shapeKey = this.shape.key;\n          manipulator.insertShape(this.shape);\n        };\n\n        ImportShapeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.removeShape(manipulator.model.findShape(this.shapeKey));\n        };\n\n        return ImportShapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ImportShapeHistoryItem = ImportShapeHistoryItem;\n      /***/\n    },\n    /* 231 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics171 = function extendStatics(d, b) {\n          _extendStatics171 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics171(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics171(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ImportConnectorHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ImportConnectorHistoryItem, _super);\n\n        function ImportConnectorHistoryItem(connector) {\n          var _this = _super.call(this) || this;\n\n          _this.connector = connector;\n          return _this;\n        }\n\n        ImportConnectorHistoryItem.prototype.redo = function (manipulator) {\n          this.connectorKey = this.connector.key;\n          manipulator.insertConnector(this.connector);\n        };\n\n        ImportConnectorHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.removeConnector(connector);\n        };\n\n        return ImportConnectorHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ImportConnectorHistoryItem = ImportConnectorHistoryItem;\n      /***/\n    },\n    /* 232 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics172 = function extendStatics(d, b) {\n          _extendStatics172 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics172(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics172(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var BPMNImporter_1 = __webpack_require__(233);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var AddShapeHistoryItem_1 = __webpack_require__(51);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var AddConnectorHistoryItem_1 = __webpack_require__(52);\n\n      var AddConnectionHistoryItem_1 = __webpack_require__(37);\n\n      var Sugiyama_1 = __webpack_require__(61);\n\n      var LayoutSettings_1 = __webpack_require__(22);\n\n      var ExportImportCommandBase_1 = __webpack_require__(47);\n\n      var ImportBPMNCommand =\n      /** @class */\n      function (_super) {\n        __extends(ImportBPMNCommand, _super);\n\n        function ImportBPMNCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ImportBPMNCommand.prototype.executeCore = function (state, parameter) {\n          var importer = new BPMNImporter_1.BPMNImporter(parameter);\n          var graph = importer.import();\n          this.updateModel(graph);\n          return true;\n        };\n\n        ImportBPMNCommand.prototype.updateModel = function (graph) {\n          var _this = this;\n\n          var externalKeyToModelKey = {};\n          var shapes = [];\n          var connectors = [];\n          this.control.history.beginTransaction();\n          graph.items.forEach(function (node) {\n            var insert = new AddShapeHistoryItem_1.AddShapeHistoryItem(node.type, new Utils_1.Point(0, 0), node.text, node.key);\n\n            _this.control.history.addAndRedo(insert);\n\n            externalKeyToModelKey[node.key] = insert.shapeKey;\n\n            var shape = _this.control.model.findShape(insert.shapeKey);\n\n            shapes.push(shape);\n          });\n          graph.edges.forEach(function (edge) {\n            var from = _this.control.model.findShape(externalKeyToModelKey[edge.from]);\n\n            var to = _this.control.model.findShape(externalKeyToModelKey[edge.to]);\n\n            var insert = new AddConnectorHistoryItem_1.AddConnectorHistoryItem([from.getConnectionPointPosition(0), to.getConnectionPointPosition(0)]);\n\n            _this.control.history.addAndRedo(insert);\n\n            var connector = _this.control.model.findConnector(insert.connectorKey);\n\n            _this.control.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(connector, from, 0, Connector_1.ConnectorPosition.Begin));\n\n            _this.control.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(connector, to, 0, Connector_1.ConnectorPosition.End));\n\n            connectors.push(connector);\n          });\n          var settings = new LayoutSettings_1.LayoutSettings();\n          var graphInfo = ModelUtils_1.ModelUtils.getGraphInfoByItems(this.control.model, shapes, connectors);\n          graphInfo.forEach(function (info) {\n            var layout = new Sugiyama_1.SugiyamaLayoutBuilder(settings, info.graph).build();\n            var nonGraphItems = ModelUtils_1.ModelUtils.getNonGraphItems(_this.control.model, info.container, layout.nodeToLayout, shapes, connectors);\n            ModelUtils_1.ModelUtils.applyLayout(_this.control.history, _this.control.model, undefined, info.graph, layout, nonGraphItems, settings, _this.control.settings.snapToGrid, _this.control.settings.gridSize);\n          });\n          ModelUtils_1.ModelUtils.tryUpdateModelSize(this.control.history, this.control.model);\n          this.control.history.endTransaction();\n        };\n\n        return ImportBPMNCommand;\n      }(ExportImportCommandBase_1.ExportImportCommandBase);\n\n      exports.ImportBPMNCommand = ImportBPMNCommand;\n      /***/\n    },\n    /* 233 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics173 = function extendStatics(d, b) {\n          _extendStatics173 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics173(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics173(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Graph_1 = __webpack_require__(53);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var Structures_1 = __webpack_require__(31);\n\n      var ImportUtils_1 = __webpack_require__(71);\n\n      var BPMNImporter =\n      /** @class */\n      function () {\n        function BPMNImporter(xml) {\n          this.doc = ImportUtils_1.ImportUtils.createDocument(xml);\n          this.graph = new Graph_1.Graph([], []);\n        }\n\n        BPMNImporter.prototype.import = function () {\n          for (var child = void 0, i = 0; child = this.doc.children[i]; i++) {\n            if (child.nodeName.toUpperCase() === \"DEFINITIONS\") this.onDefinitionsElement(child);\n          }\n\n          this.validate();\n          return this.graph;\n        };\n\n        BPMNImporter.prototype.validate = function () {\n          var nodesMap = {};\n          this.graph.nodes.forEach(function (n) {\n            return nodesMap[n] = true;\n          });\n\n          for (var i = 0, edge = void 0; edge = this.graph.edges[i]; i++) {\n            if (!nodesMap[edge.from] || !nodesMap[edge.to]) {\n              this.graph.edges.splice(i, 1);\n              i--;\n            }\n          }\n        };\n\n        BPMNImporter.prototype.onDefinitionsElement = function (element) {\n          this.dataSourceKey = element.getAttribute(\"id\");\n\n          for (var child = void 0, i = 0; child = element.children[i]; i++) {\n            if (child.nodeName.toUpperCase() === \"PROCESS\") this.onProcessElement(child);\n          }\n        };\n\n        BPMNImporter.prototype.onProcessElement = function (element) {\n          for (var child = void 0, i = 0; child = element.children[i]; i++) {\n            switch (child.nodeName.toUpperCase()) {\n              case \"STARTEVENT\":\n                this.onStartEventElement(child);\n                break;\n\n              case \"SEQUENCEFLOW\":\n                this.onSequenceFlowElement(child);\n                break;\n\n              case \"SCRIPTTASK\":\n                this.onScriptTaskElement(child);\n                break;\n\n              case \"USERTASK\":\n                this.onUserTaskElement(child);\n                break;\n\n              case \"SERVICETASK\":\n                this.onServiceTaskElement(child);\n                break;\n\n              case \"SENDTASK\":\n                this.onSendTaskElement(child);\n                break;\n\n              case \"EXCLUSIVEGATEWAY\":\n                this.onExclusiveGateway(child);\n                break;\n\n              case \"ENDEVENT\":\n                this.onEndEventGateway(child);\n                break;\n            }\n          }\n        };\n\n        BPMNImporter.prototype.onStartEventElement = function (element) {\n          var node = this.createNode(element);\n          node.type = ShapeTypes_1.ShapeTypes.Ellipse;\n          node.text = element.getAttribute(\"name\");\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onSequenceFlowElement = function (element) {\n          var fromKey = element.getAttribute(\"sourceRef\");\n          var toKey = element.getAttribute(\"targetRef\");\n          var edge = this.createEdge(element, fromKey, toKey);\n          if (element.hasAttribute(\"name\")) edge.text = element.getAttribute(\"name\");\n          this.graph.addEdge(edge);\n        };\n\n        BPMNImporter.prototype.onScriptTaskElement = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onUserTaskElement = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onServiceTaskElement = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onSendTaskElement = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onExclusiveGateway = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          node.type = ShapeTypes_1.ShapeTypes.Decision;\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onEndEventGateway = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          node.type = ShapeTypes_1.ShapeTypes.Ellipse;\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.createNode = function (element) {\n          return new BPMNNode(this.dataSourceKey, element.getAttribute(\"id\"));\n        };\n\n        BPMNImporter.prototype.createEdge = function (element, fromKey, toKey) {\n          return new BPMNEdge(this.dataSourceKey, element.getAttribute(\"id\"), fromKey, toKey);\n        };\n\n        return BPMNImporter;\n      }();\n\n      exports.BPMNImporter = BPMNImporter;\n\n      var BPMNNode =\n      /** @class */\n      function () {\n        function BPMNNode(sourceKey, key) {\n          this.sourceKey = sourceKey;\n          this.key = key;\n          this.type = ShapeTypes_1.ShapeTypes.Rectangle;\n        }\n\n        return BPMNNode;\n      }();\n\n      exports.BPMNNode = BPMNNode;\n\n      var BPMNEdge =\n      /** @class */\n      function (_super) {\n        __extends(BPMNEdge, _super);\n\n        function BPMNEdge(sourceKey, key, fromKey, toKey) {\n          var _this = _super.call(this, key, fromKey, toKey) || this;\n\n          _this.sourceKey = sourceKey;\n          return _this;\n        }\n\n        return BPMNEdge;\n      }(Structures_1.Edge);\n      /***/\n\n    },\n    /* 234 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics174 = function extendStatics(d, b) {\n          _extendStatics174 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics174(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics174(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeZindexHistoryItem_1 = __webpack_require__(76);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var SendToBackCommand =\n      /** @class */\n      function (_super) {\n        __extends(SendToBackCommand, _super);\n\n        function SendToBackCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        SendToBackCommand.prototype.isEnabled = function () {\n          var items = this.control.selection.getSelectedItems();\n          return _super.prototype.isEnabled.call(this) && items.length > 0 && this.needSendToBack(items);\n        };\n\n        SendToBackCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var items = this.control.selection.getSelectedItems();\n          items.forEach(function (item) {\n            var newZIndex = _this.control.model.getIntersectItemsMinZIndex(item) - 1;\n\n            _this.control.history.addAndRedo(new ChangeZindexHistoryItem_1.ChangeZindexHistoryItem(item, newZIndex));\n          });\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        SendToBackCommand.prototype.needSendToBack = function (items) {\n          var _this = this;\n\n          var _loop_1 = function _loop_1(i) {\n            var zIndex = this_1.control.model.getIntersectItemsMinZIndex(items[i]);\n            if (zIndex < items[i].zIndex) return {\n              value: true\n            };\n\n            if (zIndex === items[i].zIndex) {\n              var result_1 = false;\n              var sameZIndexItems = this_1.control.model.getIntersectItems(items[i]).filter(function (item) {\n                return item.zIndex === items[i].zIndex;\n              });\n              sameZIndexItems.forEach(function (item) {\n                if (_this.control.model.getItemIndex(item) < _this.control.model.getItemIndex(items[i])) {\n                  result_1 = true;\n                  return;\n                }\n              });\n              return {\n                value: result_1\n              };\n            }\n          };\n\n          var this_1 = this;\n\n          for (var i = 0; i < items.length; i++) {\n            var state_1 = _loop_1(i);\n\n            if (typeof state_1 === \"object\") return state_1.value;\n          }\n\n          return false;\n        };\n\n        return SendToBackCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.SendToBackCommand = SendToBackCommand;\n      /***/\n    },\n    /* 235 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics175 = function extendStatics(d, b) {\n          _extendStatics175 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics175(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics175(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeZindexHistoryItem_1 = __webpack_require__(76);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var BringToFrontCommand =\n      /** @class */\n      function (_super) {\n        __extends(BringToFrontCommand, _super);\n\n        function BringToFrontCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        BringToFrontCommand.prototype.isEnabled = function () {\n          var items = this.control.selection.getSelectedItems();\n          return _super.prototype.isEnabled.call(this) && items.length > 0 && this.needBringToFront(items);\n        };\n\n        BringToFrontCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var items = this.control.selection.getSelectedItems();\n          items.forEach(function (item) {\n            var newZIndex = _this.control.model.getIntersectItemsMaxZIndex(item) + 1;\n\n            _this.control.history.addAndRedo(new ChangeZindexHistoryItem_1.ChangeZindexHistoryItem(item, newZIndex));\n          });\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        BringToFrontCommand.prototype.needBringToFront = function (items) {\n          var _this = this;\n\n          var _loop_1 = function _loop_1(i) {\n            var zIndex = this_1.control.model.getIntersectItemsMaxZIndex(items[i]);\n            if (zIndex > items[i].zIndex) return {\n              value: true\n            };\n\n            if (zIndex === items[i].zIndex) {\n              var result_1 = false;\n              var sameZIndexItems = this_1.control.model.getIntersectItems(items[i]).filter(function (item) {\n                return item.zIndex === items[i].zIndex;\n              });\n              sameZIndexItems.forEach(function (item) {\n                if (_this.control.model.getItemIndex(item) > _this.control.model.getItemIndex(items[i])) {\n                  result_1 = true;\n                  return;\n                }\n              });\n              return {\n                value: result_1\n              };\n            }\n          };\n\n          var this_1 = this;\n\n          for (var i = 0; i < items.length; i++) {\n            var state_1 = _loop_1(i);\n\n            if (typeof state_1 === \"object\") return state_1.value;\n          }\n\n          return false;\n        };\n\n        return BringToFrontCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.BringToFrontCommand = BringToFrontCommand;\n      /***/\n    },\n    /* 236 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics176 = function extendStatics(d, b) {\n          _extendStatics176 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics176(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics176(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var AutoLayoutCommandBase_1 = __webpack_require__(59);\n\n      var Sugiyama_1 = __webpack_require__(61);\n\n      var LayoutSettings_1 = __webpack_require__(22);\n\n      var AutoLayoutLayeredHorizontalCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutLayeredHorizontalCommand, _super);\n\n        function AutoLayoutLayeredHorizontalCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutLayeredHorizontalCommand.prototype.createLayoutSettings = function () {\n          var settings = new LayoutSettings_1.LayoutSettings();\n          settings.orientation = LayoutSettings_1.DataLayoutOrientation.Horizontal;\n          return settings;\n        };\n\n        AutoLayoutLayeredHorizontalCommand.prototype.createLayout = function (settings, graph) {\n          return new Sugiyama_1.SugiyamaLayoutBuilder(settings, graph).build();\n        };\n\n        return AutoLayoutLayeredHorizontalCommand;\n      }(AutoLayoutCommandBase_1.AutoLayoutCommandBase);\n\n      exports.AutoLayoutLayeredHorizontalCommand = AutoLayoutLayeredHorizontalCommand;\n      /***/\n    },\n    /* 237 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics177 = function extendStatics(d, b) {\n          _extendStatics177 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics177(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics177(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var MoveCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveCommand, _super);\n\n        function MoveCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !this.control.selection.isEmpty();\n        };\n\n        MoveCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var shapes = this.control.selection.getSelectedShapes();\n          shapes.forEach(function (shape, index) {\n            var pos = _this.getPosition(shape.position);\n\n            ModelUtils_1.ModelUtils.setShapePosition(_this.control.history, _this.control.model, shape, pos);\n            ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(_this.control.history, _this.control.model, shape);\n          });\n          var connectors = this.control.selection.getSelectedConnectors();\n          connectors.forEach(function (connector, index) {\n            var startPtIndex = connector.beginItem ? 1 : 0;\n            var endPtIndex = connector.endItem ? connector.points.length - 2 : connector.points.length - 1;\n\n            for (var i = startPtIndex; i <= endPtIndex; i++) {\n              var pos = _this.getPosition(connector.points[i]);\n\n              ModelUtils_1.ModelUtils.setConnectorPoint(_this.control.history, _this.control.model, connector, i, pos);\n            }\n          });\n          ModelUtils_1.ModelUtils.tryUpdateModelSize(this.control.history, this.control.model);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        return MoveCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.MoveCommand = MoveCommand;\n\n      var MoveLeftCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveLeftCommand, _super);\n\n        function MoveLeftCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveLeftCommand.prototype.getPosition = function (position) {\n          return position.offset(-UnitConverter_1.UnitConverter.pixelsToTwips(1), 0);\n        };\n\n        return MoveLeftCommand;\n      }(MoveCommand);\n\n      exports.MoveLeftCommand = MoveLeftCommand;\n\n      var MoveStepLeftCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveStepLeftCommand, _super);\n\n        function MoveStepLeftCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveStepLeftCommand.prototype.getPosition = function (position) {\n          if (this.control.settings.snapToGrid) return new Utils_1.Point(ModelUtils_1.ModelUtils.getSnappedPos(this.control.model, this.control.settings.gridSize, position.x - (this.control.settings.gridSize / 2 + 2), true), position.y);else return position.offset(-this.control.settings.gridSize, 0);\n        };\n\n        return MoveStepLeftCommand;\n      }(MoveCommand);\n\n      exports.MoveStepLeftCommand = MoveStepLeftCommand;\n\n      var MoveRightCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveRightCommand, _super);\n\n        function MoveRightCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveRightCommand.prototype.getPosition = function (position) {\n          return position.offset(UnitConverter_1.UnitConverter.pixelsToTwips(1), 0);\n        };\n\n        return MoveRightCommand;\n      }(MoveCommand);\n\n      exports.MoveRightCommand = MoveRightCommand;\n\n      var MoveStepRightCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveStepRightCommand, _super);\n\n        function MoveStepRightCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveStepRightCommand.prototype.getPosition = function (position) {\n          if (this.control.settings.snapToGrid) return new Utils_1.Point(ModelUtils_1.ModelUtils.getSnappedPos(this.control.model, this.control.settings.gridSize, position.x + (this.control.settings.gridSize / 2 + 2), true), position.y);else return position.offset(this.control.settings.gridSize, 0);\n        };\n\n        return MoveStepRightCommand;\n      }(MoveCommand);\n\n      exports.MoveStepRightCommand = MoveStepRightCommand;\n\n      var MoveUpCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveUpCommand, _super);\n\n        function MoveUpCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveUpCommand.prototype.getPosition = function (position) {\n          return position.offset(0, -UnitConverter_1.UnitConverter.pixelsToTwips(1));\n        };\n\n        return MoveUpCommand;\n      }(MoveCommand);\n\n      exports.MoveUpCommand = MoveUpCommand;\n\n      var MoveStepUpCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveStepUpCommand, _super);\n\n        function MoveStepUpCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveStepUpCommand.prototype.getPosition = function (position) {\n          if (this.control.settings.snapToGrid) return new Utils_1.Point(position.x, ModelUtils_1.ModelUtils.getSnappedPos(this.control.model, this.control.settings.gridSize, position.y - (this.control.settings.gridSize / 2 + 2), false));else return position.offset(0, -this.control.settings.gridSize);\n        };\n\n        return MoveStepUpCommand;\n      }(MoveCommand);\n\n      exports.MoveStepUpCommand = MoveStepUpCommand;\n\n      var MoveDownCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveDownCommand, _super);\n\n        function MoveDownCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveDownCommand.prototype.getPosition = function (position) {\n          return position.offset(0, UnitConverter_1.UnitConverter.pixelsToTwips(1));\n        };\n\n        return MoveDownCommand;\n      }(MoveCommand);\n\n      exports.MoveDownCommand = MoveDownCommand;\n\n      var MoveStepDownCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveStepDownCommand, _super);\n\n        function MoveStepDownCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveStepDownCommand.prototype.getPosition = function (position) {\n          if (this.control.settings.snapToGrid) return new Utils_1.Point(position.x, ModelUtils_1.ModelUtils.getSnappedPos(this.control.model, this.control.settings.gridSize, position.y + (this.control.settings.gridSize / 2 + 2), false));else return position.offset(0, this.control.settings.gridSize);\n        };\n\n        return MoveStepDownCommand;\n      }(MoveCommand);\n\n      exports.MoveStepDownCommand = MoveStepDownCommand;\n      /***/\n    },\n    /* 238 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics178 = function extendStatics(d, b) {\n          _extendStatics178 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics178(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics178(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var DiagramSettings_1 = __webpack_require__(35);\n\n      var ChangeZoomLevelCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelCommand, _super);\n\n        function ChangeZoomLevelCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeZoomLevelCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeZoomLevelCommand.prototype.getValue = function () {\n          return this.control.view.getZoom();\n        };\n\n        ChangeZoomLevelCommand.prototype.executeCore = function (state, parameter) {\n          this.control.settings.zoomLevel = parameter;\n          this.control.settings.autoZoom = DiagramSettings_1.AutoZoomMode.Disabled;\n          this.control.updateLayout(true);\n          return true;\n        };\n\n        ChangeZoomLevelCommand.prototype.getItems = function () {\n          return this.control.settings.zoomLevelItems.map(function (l) {\n            return {\n              value: l,\n              text: l * 100 + \"%\"\n            };\n          });\n        };\n\n        return ChangeZoomLevelCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeZoomLevelCommand = ChangeZoomLevelCommand;\n\n      var ChangeZoomLevelItemsCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelItemsCommand, _super);\n\n        function ChangeZoomLevelItemsCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeZoomLevelItemsCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeZoomLevelItemsCommand.prototype.getValue = function () {\n          return this.control.settings.zoomLevelItems;\n        };\n\n        ChangeZoomLevelItemsCommand.prototype.executeCore = function (state, parameter) {\n          this.control.settings.zoomLevelItems = parameter;\n          return true;\n        };\n\n        return ChangeZoomLevelItemsCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeZoomLevelItemsCommand = ChangeZoomLevelItemsCommand;\n\n      var FitZoomCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(FitZoomCommandBase, _super);\n\n        function FitZoomCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        FitZoomCommandBase.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !!this.control.render;\n        };\n\n        FitZoomCommandBase.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        FitZoomCommandBase.prototype.executeCore = function (state) {\n          var zoomLevel = this.getZoomLevel();\n          this.control.settings.zoomLevel = zoomLevel;\n          this.control.settings.autoZoom = DiagramSettings_1.AutoZoomMode.Disabled;\n          return true;\n        };\n\n        return FitZoomCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      var FitToScreenCommand =\n      /** @class */\n      function (_super) {\n        __extends(FitToScreenCommand, _super);\n\n        function FitToScreenCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        FitToScreenCommand.prototype.getZoomLevel = function () {\n          return this.control.render.view.getActualAutoZoomLevel(DiagramSettings_1.AutoZoomMode.FitContent);\n        };\n\n        return FitToScreenCommand;\n      }(FitZoomCommandBase);\n\n      exports.FitToScreenCommand = FitToScreenCommand;\n\n      var FitToWidthCommand =\n      /** @class */\n      function (_super) {\n        __extends(FitToWidthCommand, _super);\n\n        function FitToWidthCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        FitToWidthCommand.prototype.getZoomLevel = function () {\n          return this.control.render.view.getActualAutoZoomLevel(DiagramSettings_1.AutoZoomMode.FitToWidth);\n        };\n\n        return FitToWidthCommand;\n      }(FitZoomCommandBase);\n\n      exports.FitToWidthCommand = FitToWidthCommand;\n\n      var SwitchAutoZoomCommand =\n      /** @class */\n      function (_super) {\n        __extends(SwitchAutoZoomCommand, _super);\n\n        function SwitchAutoZoomCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        SwitchAutoZoomCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !!this.control.render;\n        };\n\n        SwitchAutoZoomCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        SwitchAutoZoomCommand.prototype.getValue = function () {\n          return this.control.settings.autoZoom;\n        };\n\n        SwitchAutoZoomCommand.prototype.executeCore = function (state, value) {\n          value = parseInt(value);\n          if (this.control.settings.autoZoom === value) return false;\n          if (value === DiagramSettings_1.AutoZoomMode.Disabled) this.control.settings.zoomLevel = this.control.view.getZoom();\n          this.control.settings.autoZoom = value;\n          return true;\n        };\n\n        return SwitchAutoZoomCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.SwitchAutoZoomCommand = SwitchAutoZoomCommand;\n\n      var ToggleAutoZoomCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleAutoZoomCommand, _super);\n\n        function ToggleAutoZoomCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleAutoZoomCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !!this.control.render;\n        };\n\n        ToggleAutoZoomCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ToggleAutoZoomCommand.prototype.getValue = function () {\n          return this.control.settings.autoZoom;\n        };\n\n        ToggleAutoZoomCommand.prototype.executeCore = function (state, value) {\n          var newValue;\n          if (value === undefined) newValue = this.control.settings.autoZoom === DiagramSettings_1.AutoZoomMode.Disabled ? DiagramSettings_1.AutoZoomMode.FitContent : DiagramSettings_1.AutoZoomMode.Disabled;else newValue = value ? DiagramSettings_1.AutoZoomMode.FitContent : DiagramSettings_1.AutoZoomMode.Disabled;\n          if (this.control.settings.autoZoom === newValue) return false;\n          if (!newValue) this.control.settings.zoomLevel = this.control.view.getZoom();\n          this.control.settings.autoZoom = newValue;\n          return true;\n        };\n\n        return ToggleAutoZoomCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ToggleAutoZoomCommand = ToggleAutoZoomCommand;\n      /***/\n    },\n    /* 239 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics179 = function extendStatics(d, b) {\n          _extendStatics179 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics179(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics179(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var ImportDataCommandBase_1 = __webpack_require__(240);\n\n      var DataLayoutParameters_1 = __webpack_require__(115);\n\n      var BindDocumentCommand =\n      /** @class */\n      function (_super) {\n        __extends(BindDocumentCommand, _super);\n\n        function BindDocumentCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        BindDocumentCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        BindDocumentCommand.prototype.performImportData = function (parameter) {\n          var dataSource = this.control.createDocumentDataSource(parameter.nodeDataSource, parameter.edgeDataSource, parameter.nodeDataImporter, parameter.edgeDataImporter);\n          var layoutParameters = parameter.layoutParameters ? new DataLayoutParameters_1.DataLayoutParameters(parameter.layoutParameters) : undefined;\n          this.control.history.beginTransaction();\n          ModelUtils_1.ModelUtils.deleteAllItems(this.control.history, this.control.model, this.control.selection);\n          this.createItems(dataSource, layoutParameters);\n          this.control.history.endTransaction();\n          this.control.history.clear();\n        };\n\n        return BindDocumentCommand;\n      }(ImportDataCommandBase_1.ImportDataCommandBase);\n\n      exports.BindDocumentCommand = BindDocumentCommand;\n      /***/\n    },\n    /* 240 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics180 = function extendStatics(d, b) {\n          _extendStatics180 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics180(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics180(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ImportDataCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(ImportDataCommandBase, _super);\n\n        function ImportDataCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ImportDataCommandBase.prototype.executeCore = function (state, parameter) {\n          if (!parameter || !Array.isArray(parameter.nodeDataSource)) throw Error(\"Format exception\");\n          this.performImportData(parameter);\n          this.control.updateLayout(true);\n          return true;\n        };\n\n        ImportDataCommandBase.prototype.createItems = function (dataSource, layoutParameters) {\n          dataSource.createModelItems(this.control.history, this.control.model, this.control.selection, layoutParameters, this.control.settings.snapToGrid, this.control.settings.gridSize);\n        };\n\n        return ImportDataCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ImportDataCommandBase = ImportDataCommandBase;\n      /***/\n    },\n    /* 241 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics181 = function extendStatics(d, b) {\n          _extendStatics181 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics181(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics181(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var UnbindDocumentCommand =\n      /** @class */\n      function (_super) {\n        __extends(UnbindDocumentCommand, _super);\n\n        function UnbindDocumentCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        UnbindDocumentCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        UnbindDocumentCommand.prototype.executeCore = function (state) {\n          this.control.deleteDocumentDataSource();\n          ModelUtils_1.ModelUtils.deleteAllItems(this.control.history, this.control.model, this.control.selection);\n          this.control.history.clear();\n          return true;\n        };\n\n        return UnbindDocumentCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.UnbindDocumentCommand = UnbindDocumentCommand;\n      /***/\n    },\n    /* 242 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics182 = function extendStatics(d, b) {\n          _extendStatics182 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics182(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics182(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var AutoLayoutCommandBase_1 = __webpack_require__(59);\n\n      var WideTree_1 = __webpack_require__(73);\n\n      var LayoutSettings_1 = __webpack_require__(22);\n\n      var AutoLayoutTreeHorizontalCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutTreeHorizontalCommand, _super);\n\n        function AutoLayoutTreeHorizontalCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutTreeHorizontalCommand.prototype.createLayoutSettings = function () {\n          var gridSize = this.control.settings.snapToGrid ? this.control.settings.gridSize : undefined;\n          var settings = new LayoutSettings_1.TreeLayoutSettings(gridSize);\n          settings.orientation = LayoutSettings_1.DataLayoutOrientation.Horizontal;\n          return settings;\n        };\n\n        AutoLayoutTreeHorizontalCommand.prototype.createLayout = function (settings, graph) {\n          return new WideTree_1.TreeLayoutBuilder(settings, graph).build();\n        };\n\n        return AutoLayoutTreeHorizontalCommand;\n      }(AutoLayoutCommandBase_1.AutoLayoutCommandBase);\n\n      exports.AutoLayoutTreeHorizontalCommand = AutoLayoutTreeHorizontalCommand;\n      /***/\n    },\n    /* 243 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics183 = function extendStatics(d, b) {\n          _extendStatics183 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics183(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics183(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var AutoLayoutCommandBase_1 = __webpack_require__(59);\n\n      var Sugiyama_1 = __webpack_require__(61);\n\n      var LayoutSettings_1 = __webpack_require__(22);\n\n      var AutoLayoutLayeredVerticalCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutLayeredVerticalCommand, _super);\n\n        function AutoLayoutLayeredVerticalCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutLayeredVerticalCommand.prototype.createLayoutSettings = function () {\n          var settings = new LayoutSettings_1.LayoutSettings();\n          settings.orientation = LayoutSettings_1.DataLayoutOrientation.Vertical;\n          return settings;\n        };\n\n        AutoLayoutLayeredVerticalCommand.prototype.createLayout = function (settings, graph) {\n          return new Sugiyama_1.SugiyamaLayoutBuilder(settings, graph).build();\n        };\n\n        return AutoLayoutLayeredVerticalCommand;\n      }(AutoLayoutCommandBase_1.AutoLayoutCommandBase);\n\n      exports.AutoLayoutLayeredVerticalCommand = AutoLayoutLayeredVerticalCommand;\n      /***/\n    },\n    /* 244 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics184 = function extendStatics(d, b) {\n          _extendStatics184 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics184(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics184(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeLockedCommand_1 = __webpack_require__(116);\n\n      var LockCommand =\n      /** @class */\n      function (_super) {\n        __extends(LockCommand, _super);\n\n        function LockCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        LockCommand.prototype.getLockState = function () {\n          return true;\n        };\n\n        return LockCommand;\n      }(ChangeLockedCommand_1.ChangeLockedCommand);\n\n      exports.LockCommand = LockCommand;\n      /***/\n    },\n    /* 245 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics185 = function extendStatics(d, b) {\n          _extendStatics185 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics185(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics185(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeLockedCommand_1 = __webpack_require__(116);\n\n      var UnLockCommand =\n      /** @class */\n      function (_super) {\n        __extends(UnLockCommand, _super);\n\n        function UnLockCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        UnLockCommand.prototype.getLockState = function () {\n          return false;\n        };\n\n        return UnLockCommand;\n      }(ChangeLockedCommand_1.ChangeLockedCommand);\n\n      exports.UnLockCommand = UnLockCommand;\n      /***/\n    },\n    /* 246 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics186 = function extendStatics(d, b) {\n          _extendStatics186 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics186(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics186(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Model_1 = __webpack_require__(19);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var CloneCommand =\n      /** @class */\n      function (_super) {\n        __extends(CloneCommand, _super);\n\n        function CloneCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CloneCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !this.control.selection.isEmpty();\n        };\n\n        CloneCommand.prototype.executeCore = function (state, parameter) {\n          var selectionRect = Model_1.DiagramModel.getRectangle(this.control.selection.getSelectedItems());\n          ModelUtils_1.ModelUtils.cloneSelectionToOffset(this.control.history, this.control.model, this.control.selection, this.getOffsetX(selectionRect), this.getOffsetY(selectionRect));\n          return true;\n        };\n\n        CloneCommand.prototype.getOffsetX = function (selectionRect) {\n          return 0;\n        };\n\n        ;\n\n        CloneCommand.prototype.getOffsetY = function (selectionRect) {\n          return 0;\n        };\n\n        ;\n        return CloneCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.CloneCommand = CloneCommand;\n\n      var CloneLeftCommand =\n      /** @class */\n      function (_super) {\n        __extends(CloneLeftCommand, _super);\n\n        function CloneLeftCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CloneLeftCommand.prototype.getOffsetX = function (selectionRect) {\n          return -selectionRect.width;\n        };\n\n        ;\n        return CloneLeftCommand;\n      }(CloneCommand);\n\n      exports.CloneLeftCommand = CloneLeftCommand;\n\n      var CloneRightCommand =\n      /** @class */\n      function (_super) {\n        __extends(CloneRightCommand, _super);\n\n        function CloneRightCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CloneRightCommand.prototype.getOffsetX = function (selectionRect) {\n          return selectionRect.width;\n        };\n\n        ;\n        return CloneRightCommand;\n      }(CloneCommand);\n\n      exports.CloneRightCommand = CloneRightCommand;\n\n      var CloneUpCommand =\n      /** @class */\n      function (_super) {\n        __extends(CloneUpCommand, _super);\n\n        function CloneUpCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CloneUpCommand.prototype.getOffsetY = function (selectionRect) {\n          return -selectionRect.height;\n        };\n\n        ;\n        return CloneUpCommand;\n      }(CloneCommand);\n\n      exports.CloneUpCommand = CloneUpCommand;\n\n      var CloneDownCommand =\n      /** @class */\n      function (_super) {\n        __extends(CloneDownCommand, _super);\n\n        function CloneDownCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CloneDownCommand.prototype.getOffsetY = function (selectionRect) {\n          return selectionRect.height;\n        };\n\n        ;\n        return CloneDownCommand;\n      }(CloneCommand);\n\n      exports.CloneDownCommand = CloneDownCommand;\n      /***/\n    },\n    /* 247 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics187 = function extendStatics(d, b) {\n          _extendStatics187 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics187(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics187(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangePagePropertyCommand_1 = __webpack_require__(60);\n\n      var ChangePagePropertyHistoryItem_1 = __webpack_require__(248);\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ChangeUnitsCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeUnitsCommand, _super);\n\n        function ChangeUnitsCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeUnitsCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeUnitsCommand.prototype.getValue = function () {\n          return this.control.model.units;\n        };\n\n        ChangeUnitsCommand.prototype.createHistoryItems = function (parameter) {\n          return [new ChangePagePropertyHistoryItem_1.ChangeUnitsHistoryItem(parameter)];\n        };\n\n        ChangeUnitsCommand.prototype.getItems = function () {\n          var _this = this;\n\n          return Object.keys(this.control.settings.unitItems).map(function (key) {\n            return {\n              value: parseInt(key),\n              text: _this.control.settings.unitItems[key]\n            };\n          });\n        };\n\n        return ChangeUnitsCommand;\n      }(ChangePagePropertyCommand_1.ChangePagePropertyCommand);\n\n      exports.ChangeUnitsCommand = ChangeUnitsCommand;\n\n      var ChangeViewUnitsCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeViewUnitsCommand, _super);\n\n        function ChangeViewUnitsCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeViewUnitsCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeViewUnitsCommand.prototype.getValue = function () {\n          return this.control.settings.viewUnits;\n        };\n\n        ChangeViewUnitsCommand.prototype.executeCore = function (state, parameter) {\n          this.control.settings.viewUnits = parameter;\n          return true;\n        };\n\n        ChangeViewUnitsCommand.prototype.getItems = function () {\n          var _this = this;\n\n          return Object.keys(this.control.settings.unitItems).map(function (key) {\n            return {\n              value: parseInt(key),\n              text: _this.control.settings.unitItems[key]\n            };\n          });\n        };\n\n        return ChangeViewUnitsCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeViewUnitsCommand = ChangeViewUnitsCommand;\n      /***/\n    },\n    /* 248 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics188 = function extendStatics(d, b) {\n          _extendStatics188 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics188(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics188(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangePagePropertyHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangePagePropertyHistoryItem, _super);\n\n        function ChangePagePropertyHistoryItem(value) {\n          var _this = _super.call(this) || this;\n\n          _this.value = value;\n          return _this;\n        }\n\n        ChangePagePropertyHistoryItem.prototype.redo = function (manipulator) {\n          var _this = this;\n\n          this.oldValue = this.getValue(manipulator.model);\n          manipulator.changePageProperty(function (m) {\n            return _this.setValue(m, _this.value);\n          });\n        };\n\n        ChangePagePropertyHistoryItem.prototype.undo = function (manipulator) {\n          var _this = this;\n\n          manipulator.changePageProperty(function (m) {\n            return _this.setValue(m, _this.oldValue);\n          });\n        };\n\n        return ChangePagePropertyHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      var ChangeUnitsHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeUnitsHistoryItem, _super);\n\n        function ChangeUnitsHistoryItem() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.setValue = function (model, value) {\n            return model.units = value;\n          };\n\n          _this.getValue = function (model) {\n            return model.units;\n          };\n\n          return _this;\n        }\n\n        return ChangeUnitsHistoryItem;\n      }(ChangePagePropertyHistoryItem);\n\n      exports.ChangeUnitsHistoryItem = ChangeUnitsHistoryItem;\n      /***/\n    },\n    /* 249 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics189 = function extendStatics(d, b) {\n          _extendStatics189 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics189(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics189(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangePagePropertyCommand_1 = __webpack_require__(60);\n\n      var ChangePageColorHistoryItem_1 = __webpack_require__(250);\n\n      var __1 = __webpack_require__(8);\n\n      var Model_1 = __webpack_require__(19);\n\n      var ChangePageColorCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageColorCommand, _super);\n\n        function ChangePageColorCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangePageColorCommand.prototype.getValue = function () {\n          return __1.ColorHelper.colorToHash(this.control.model.pageColor);\n        };\n\n        ChangePageColorCommand.prototype.getDefaultValue = function () {\n          return __1.ColorHelper.colorToHash(Model_1.DiagramModel.defaultPageColor);\n        };\n\n        ChangePageColorCommand.prototype.createHistoryItems = function (parameter) {\n          return [new ChangePageColorHistoryItem_1.ChangePageColorHistoryItem(__1.ColorHelper.stringToColor(parameter))];\n        };\n\n        return ChangePageColorCommand;\n      }(ChangePagePropertyCommand_1.ChangePagePropertyCommand);\n\n      exports.ChangePageColorCommand = ChangePageColorCommand;\n      /***/\n    },\n    /* 250 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics190 = function extendStatics(d, b) {\n          _extendStatics190 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics190(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics190(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangePageColorHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageColorHistoryItem, _super);\n\n        function ChangePageColorHistoryItem(value) {\n          var _this = _super.call(this) || this;\n\n          _this.value = value;\n          return _this;\n        }\n\n        ChangePageColorHistoryItem.prototype.redo = function (manipulator) {\n          this.oldValue = manipulator.model.pageColor;\n          manipulator.changePageColor(this.value);\n        };\n\n        ChangePageColorHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.changePageColor(this.oldValue);\n        };\n\n        return ChangePageColorHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangePageColorHistoryItem = ChangePageColorHistoryItem;\n      /***/\n    },\n    /* 251 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics191 = function extendStatics(d, b) {\n          _extendStatics191 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics191(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics191(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ChangeShowGridCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeShowGridCommand, _super);\n\n        function ChangeShowGridCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeShowGridCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeShowGridCommand.prototype.executeCore = function (state, parameter) {\n          var newValue = parameter === undefined ? !this.control.settings.showGrid : !!parameter;\n\n          if (this.control.settings.showGrid !== newValue) {\n            this.control.settings.showGrid = newValue;\n            return true;\n          }\n\n          return false;\n        };\n\n        ChangeShowGridCommand.prototype.getValue = function () {\n          return this.control.settings.showGrid;\n        };\n\n        return ChangeShowGridCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeShowGridCommand = ChangeShowGridCommand;\n      /***/\n    },\n    /* 252 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics192 = function extendStatics(d, b) {\n          _extendStatics192 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics192(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics192(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ToggleFullscreenCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleFullscreenCommand, _super);\n\n        function ToggleFullscreenCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleFullscreenCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ToggleFullscreenCommand.prototype.getValue = function () {\n          return this.control.settings.fullscreen;\n        };\n\n        ToggleFullscreenCommand.prototype.executeCore = function (state, parameter) {\n          var newValue = typeof parameter === \"boolean\" ? parameter : !state.value;\n\n          if (this.control.settings.fullscreen !== newValue) {\n            this.control.settings.fullscreen = !state.value;\n            this.control.notifyToggleFullscreen(this.control.settings.fullscreen);\n          }\n\n          return true;\n        };\n\n        return ToggleFullscreenCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ToggleFullscreenCommand = ToggleFullscreenCommand;\n      /***/\n    },\n    /* 253 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics193 = function extendStatics(d, b) {\n          _extendStatics193 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics193(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics193(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ToggleSimpleViewCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleSimpleViewCommand, _super);\n\n        function ToggleSimpleViewCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleSimpleViewCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ToggleSimpleViewCommand.prototype.getValue = function () {\n          return this.control.settings.simpleView;\n        };\n\n        ToggleSimpleViewCommand.prototype.executeCore = function (state, parameter) {\n          if (typeof parameter === \"boolean\") this.control.settings.simpleView = parameter;else if (parameter === undefined) this.control.settings.simpleView = !state.value;\n          this.control.updateLayout(true);\n          return true;\n        };\n\n        return ToggleSimpleViewCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ToggleSimpleViewCommand = ToggleSimpleViewCommand;\n      /***/\n    },\n    /* 254 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics194 = function extendStatics(d, b) {\n          _extendStatics194 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics194(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics194(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SimpleCommandBase_1 = __webpack_require__(7);\n\n      var ToggleReadOnlyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleReadOnlyCommand, _super);\n\n        function ToggleReadOnlyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleReadOnlyCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ToggleReadOnlyCommand.prototype.getValue = function () {\n          return this.control.settings.readOnly;\n        };\n\n        ToggleReadOnlyCommand.prototype.executeCore = function (state, parameter) {\n          if (typeof parameter === \"boolean\") this.control.settings.readOnly = parameter;else if (parameter === undefined) this.control.settings.readOnly = !state.value;\n          return true;\n        };\n\n        return ToggleReadOnlyCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ToggleReadOnlyCommand = ToggleReadOnlyCommand;\n      /***/\n    },\n    /* 255 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics195 = function extendStatics(d, b) {\n          _extendStatics195 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics195(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics195(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var EditShapeImageCommandBase_1 = __webpack_require__(77);\n\n      var EditShapeImageCommand =\n      /** @class */\n      function (_super) {\n        __extends(EditShapeImageCommand, _super);\n\n        function EditShapeImageCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        EditShapeImageCommand.prototype.isEnabled = function () {\n          var selectedShape = this.getSelectedShape();\n          return _super.prototype.isEnabled.call(this) && !selectedShape.image.isEmpty;\n        };\n\n        return EditShapeImageCommand;\n      }(EditShapeImageCommandBase_1.EditShapeImageCommandBase);\n\n      exports.EditShapeImageCommand = EditShapeImageCommand;\n      /***/\n    },\n    /* 256 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics196 = function extendStatics(d, b) {\n          _extendStatics196 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics196(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics196(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var PasteSelectoinCommandBase_1 = __webpack_require__(114);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var PasteSelectionInPositionCommand =\n      /** @class */\n      function (_super) {\n        __extends(PasteSelectionInPositionCommand, _super);\n\n        function PasteSelectionInPositionCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        PasteSelectionInPositionCommand.prototype.calculateSelectionOffset = function (items, position) {\n          var selectionPos = items.reduce(function (min, i) {\n            return {\n              x: Math.min(min.x, i instanceof Shape_1.Shape ? i.position.x : i instanceof Connector_1.Connector ? i.getMinX() : Number.MAX_VALUE),\n              y: Math.min(min.y, i instanceof Shape_1.Shape ? i.position.y : i instanceof Connector_1.Connector ? i.getMinY() : Number.MAX_VALUE)\n            };\n          }, {\n            x: Number.MAX_VALUE,\n            y: Number.MAX_VALUE\n          });\n          var newSelectionPos = this.control.render.getModelPointByEventPoint(position.x, position.y);\n          this.offsetX = newSelectionPos.x - selectionPos.x;\n          this.offsetY = newSelectionPos.y - selectionPos.y;\n        };\n\n        PasteSelectionInPositionCommand.prototype.getShapeNewPosition = function (position) {\n          var newPosition = position.offset(this.offsetX, this.offsetY);\n          return PasteSelectoinCommandBase_1.PasteSelectionCommandBase.getShapeNewPosition(this.control.model, newPosition);\n        };\n\n        PasteSelectionInPositionCommand.prototype.changeConnectorPoints = function (connector) {\n          var _this = this;\n\n          connector.points.forEach(function (pt) {\n            pt.x += _this.offsetX;\n            pt.y += _this.offsetY;\n          });\n          PasteSelectoinCommandBase_1.PasteSelectionCommandBase.changeConnectorPoints(this.control.model, connector);\n        };\n\n        return PasteSelectionInPositionCommand;\n      }(PasteSelectoinCommandBase_1.PasteSelectionCommandBase);\n\n      exports.PasteSelectionInPositionCommand = PasteSelectionInPositionCommand;\n      /***/\n    },\n    /* 257 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics197 = function extendStatics(d, b) {\n          _extendStatics197 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics197(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics197(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var XMLImporter_1 = __webpack_require__(258);\n\n      var ExportImportCommandBase_1 = __webpack_require__(47);\n\n      var ImportXMLCommand =\n      /** @class */\n      function (_super) {\n        __extends(ImportXMLCommand, _super);\n\n        function ImportXMLCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ImportXMLCommand.prototype.executeCore = function (state, parameter) {\n          var importer = new XMLImporter_1.XmlImporter(parameter);\n          var model = importer.import();\n          this.control.importModel(model);\n          return true;\n        };\n\n        return ImportXMLCommand;\n      }(ExportImportCommandBase_1.ExportImportCommandBase);\n\n      exports.ImportXMLCommand = ImportXMLCommand;\n      /***/\n    },\n    /* 258 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics198 = function extendStatics(d, b) {\n          _extendStatics198 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics198(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics198(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Connector_1 = __webpack_require__(5);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var ImporterBase_1 = __webpack_require__(106);\n\n      var __1 = __webpack_require__(8);\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(25);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ImportUtils_1 = __webpack_require__(71);\n\n      var Color_1 = __webpack_require__(38);\n\n      var XmlImporter =\n      /** @class */\n      function (_super) {\n        __extends(XmlImporter, _super);\n\n        function XmlImporter(xml) {\n          var _this = _super.call(this) || this;\n\n          _this.doc = ImportUtils_1.ImportUtils.createDocument(xml);\n          return _this;\n        }\n\n        XmlImporter.prototype.getObject = function () {\n          return this.doc;\n        };\n\n        XmlImporter.prototype.getPageObject = function (obj) {\n          var pageElements = this.doc.querySelectorAll(\"[ItemKind='DiagramRoot']\");\n          return pageElements && pageElements[0];\n        };\n\n        XmlImporter.prototype.getShapeObjects = function (obj) {\n          var shapeObjs = [];\n          this.doc.querySelectorAll(\"[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramShape']\").forEach(function (obj) {\n            shapeObjs.push(obj);\n          });\n          this.doc.querySelectorAll(\"[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramContainer']\").forEach(function (obj) {\n            shapeObjs.push(obj);\n          });\n          return shapeObjs;\n        };\n\n        XmlImporter.prototype.getConnectorObjects = function (obj) {\n          var connectorObjs = [];\n          this.doc.querySelectorAll(\"[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramConnector']\").forEach(function (obj) {\n            connectorObjs.push(obj);\n          });\n          return connectorObjs;\n        };\n\n        XmlImporter.prototype.importPageSettings = function (model, pageObj) {\n          if (!pageObj) return;\n          var pageSizeAttr = pageObj.getAttribute(\"PageSize\");\n          var pageSize = this.getSize(pageSizeAttr);\n\n          if (pageSize) {\n            model.size = pageSize.clone();\n            model.pageSize = pageSize.clone();\n          }\n        };\n\n        XmlImporter.prototype.importShape = function (shapeObj) {\n          var positionAttr = shapeObj.getAttribute(\"Position\");\n          var position = this.getPoint(positionAttr);\n          var shapeAttr = shapeObj.getAttribute(\"Shape\");\n          var shapeType = this.getShapeType(shapeAttr);\n          var description = ShapeDescriptionManager_1.ShapeDescriptionManager.get(shapeType);\n          var shape = new Shape_1.Shape(description || ShapeDescriptionManager_1.ShapeDescriptionManager.get(ShapeTypes_1.ShapeTypes.Rectangle), position);\n          shape.key = this.getItemKey(shapeObj);\n          var sizeAttr = shapeObj.getAttribute(\"Size\");\n          var size = this.getSize(sizeAttr);\n          if (size) shape.size = size;\n          var contentAttr = shapeObj.getAttribute(\"Content\");\n          if (typeof contentAttr === \"string\") shape.text = contentAttr;else {\n            var headerAttr = shapeObj.getAttribute(\"Header\");\n            if (typeof headerAttr === \"string\") shape.text = headerAttr;\n          }\n          this.importStyle(shapeObj, shape);\n          return shape;\n        };\n\n        XmlImporter.prototype.importShapeChildren = function (shapeObj, shape) {\n          var childShapeObjs = [];\n          shapeObj.setAttribute(\"dxDiagram\", \"\");\n          this.doc.querySelectorAll(\"[dxDiagram] > Children > [ItemKind='DiagramShape']\").forEach(function (obj) {\n            childShapeObjs.push(obj);\n          });\n          this.doc.querySelectorAll(\"[dxDiagram] > Children > [ItemKind='DiagramContainer']\").forEach(function (obj) {\n            childShapeObjs.push(obj);\n          });\n          shapeObj.removeAttribute(\"dxDiagram\");\n          var result = [];\n          if (!childShapeObjs) return result;\n\n          for (var i = 0; i < childShapeObjs.length; i++) {\n            var childShapeObj = childShapeObjs[i];\n            var childShape = this.importShape(childShapeObj);\n            childShape.key = shape.key + \",\" + childShape.key;\n            var rect = shape.clientRectangle;\n            childShape.position = childShape.position.offset(rect.left, rect.top);\n            shape.childKeys.push(childShape.key);\n            result.push(childShape);\n            result = result.concat(this.importShapeChildren(childShapeObj, childShape));\n          }\n\n          return result;\n        };\n\n        XmlImporter.prototype.importConnector = function (connectorObj) {\n          var _this = this;\n\n          var points = [];\n          var beginPointAttr = connectorObj.getAttribute(\"BeginPoint\");\n          var beginPoint = this.getPoint(beginPointAttr);\n          if (beginPoint) points.push(beginPoint);\n          var pointsAttr = connectorObj.getAttribute(\"Points\");\n          pointsAttr.split(\" \").forEach(function (pointAttr) {\n            var point = _this.getPoint(pointAttr);\n\n            if (point) points.push(point);\n          });\n          var endPointAttr = connectorObj.getAttribute(\"EndPoint\");\n          var endPoint = this.getPoint(endPointAttr);\n          if (endPoint) points.push(endPoint);\n          var connector = new Connector_1.Connector(points);\n          connector.key = this.getItemKey(connectorObj);\n          var endItemPointIndexAttr = connectorObj.getAttribute(\"EndItemPointIndex\");\n          var endItemPointIndex = parseInt(endItemPointIndexAttr);\n          connector.endConnectionPointIndex = !isNaN(endItemPointIndex) ? endItemPointIndex : -1;\n          var beginItemPointIndexAttr = connectorObj.getAttribute(\"BeginItemPointIndex\");\n          var beginItemPointIndex = parseInt(beginItemPointIndexAttr);\n          connector.beginConnectionPointIndex = !isNaN(beginItemPointIndex) ? beginItemPointIndex : -1;\n          var endItemAttr = connectorObj.getAttribute(\"EndItem\");\n          if (endItemAttr !== undefined) this.assert(endItemAttr, \"string\");\n          var beginItemAttr = connectorObj.getAttribute(\"BeginItem\");\n          if (beginItemAttr !== undefined) this.assert(beginItemAttr, \"string\");\n          connector[\"endItemKey\"] = endItemAttr;\n          connector[\"beginItemKey\"] = beginItemAttr;\n          var contentAttr = connectorObj.getAttribute(\"Content\");\n          if (typeof contentAttr === \"string\") connector.setText(contentAttr);\n          this.importStyle(connectorObj, connector);\n          return connector;\n        };\n\n        XmlImporter.prototype.importStyle = function (obj, item) {\n          var backgroundAttr = obj.getAttribute(\"Background\");\n          if (typeof backgroundAttr === \"string\") item.style[\"fill\"] = this.getColor(backgroundAttr);\n          var strokeAttr = obj.getAttribute(\"Stroke\");\n          if (typeof strokeAttr === \"string\") item.style[\"stroke\"] = this.getColor(strokeAttr);\n          var foregroundAttr = obj.getAttribute(\"Foreground\");\n          if (typeof foregroundAttr === \"string\") item.styleText[\"fill\"] = this.getColor(foregroundAttr);\n          var fontFamilyAttr = obj.getAttribute(\"FontFamily\");\n          if (typeof fontFamilyAttr === \"string\") item.styleText[\"font-family\"] = fontFamilyAttr;\n          var fontSizeAttr = obj.getAttribute(\"FontSize\");\n          if (typeof fontSizeAttr === \"string\") item.styleText[\"font-size\"] = fontSizeAttr;\n          var fontWeightAttr = obj.getAttribute(\"FontWeight\");\n          if (fontWeightAttr === \"Bold\") item.styleText[\"font-weight\"] = \"bold\";\n          var fontStyleAttr = obj.getAttribute(\"FontStyle\");\n          if (fontStyleAttr === \"Italic\") item.styleText[\"font-style\"] = \"italic\";\n          var textDecorationsAttr = obj.getAttribute(\"TextDecorations\");\n          if (textDecorationsAttr === \"Underline\") item.styleText[\"text-decoration\"] = \"underline\";\n          var textAlignmentAttr = obj.getAttribute(\"TextAlignment\");\n          if (textAlignmentAttr === \"Left\") item.styleText[\"text-anchor\"] = \"start\";else if (textAlignmentAttr === \"Right\") item.styleText[\"text-anchor\"] = \"end\";else if (textAlignmentAttr === \"Right\") item.styleText[\"text-anchor\"] = \"middle\";\n        };\n\n        XmlImporter.prototype.getShapeType = function (shapeAttr) {\n          if (XmlImporter.shapeTypes[shapeAttr]) return XmlImporter.shapeTypes[shapeAttr];\n          if (shapeAttr && shapeAttr.toLowerCase().indexOf(\"container\") > -1) return ShapeTypes_1.ShapeTypes.VerticalContainer;\n          return ShapeTypes_1.ShapeTypes.Rectangle;\n        };\n\n        XmlImporter.prototype.getItemKey = function (obj) {\n          return (parseInt(obj.tagName.replace(\"Item\", \"\")) - 1).toString();\n        };\n\n        XmlImporter.prototype.getNumbers = function (s) {\n          var parts = s.split(\",\");\n          return parts && parts.length ? parts.map(function (part) {\n            return +part;\n          }) : [];\n        };\n\n        XmlImporter.prototype.getSize = function (attrValue) {\n          if (attrValue) {\n            var numbers = this.getNumbers(attrValue);\n\n            if (numbers.length >= 2) {\n              this.assert(numbers[0], \"number\");\n              this.assert(numbers[1], \"number\");\n              return new Utils_1.Size(__1.UnitConverter.pixelsToTwips(numbers[0]), __1.UnitConverter.pixelsToTwips(numbers[1]));\n            }\n          }\n        };\n\n        XmlImporter.prototype.getPoint = function (attrValue) {\n          if (attrValue) {\n            var numbers = this.getNumbers(attrValue);\n\n            if (numbers.length >= 2) {\n              this.assert(numbers[0], \"number\");\n              this.assert(numbers[1], \"number\");\n              return new Utils_1.Point(__1.UnitConverter.pixelsToTwips(numbers[0]), __1.UnitConverter.pixelsToTwips(numbers[1]));\n            }\n          }\n        };\n\n        XmlImporter.prototype.getColor = function (attrValue) {\n          attrValue = attrValue.charAt(0) == \"#\" ? attrValue.substr(1) : attrValue;\n          var color = parseInt(attrValue, 16);\n          return !isNaN(color) ? Color_1.ColorHelper.colorToHash(color) : undefined;\n        };\n\n        XmlImporter.shapeTypes = {\n          \"BasicShapes.Rectangle\": ShapeTypes_1.ShapeTypes.Rectangle,\n          \"BasicShapes.Ellipse\": ShapeTypes_1.ShapeTypes.Ellipse,\n          \"BasicShapes.Triangle\": ShapeTypes_1.ShapeTypes.Triangle,\n          \"BasicShapes.Pentagon\": ShapeTypes_1.ShapeTypes.Pentagon,\n          \"BasicShapes.Hexagon\": ShapeTypes_1.ShapeTypes.Hexagon,\n          \"BasicShapes.Octagon\": ShapeTypes_1.ShapeTypes.Octagon,\n          \"BasicShapes.Diamond\": ShapeTypes_1.ShapeTypes.Diamond,\n          \"BasicShapes.Cross\": ShapeTypes_1.ShapeTypes.Cross,\n          \"BasicShapes.Star5\": ShapeTypes_1.ShapeTypes.Star,\n          \"BasicFlowchartShapes.StartEnd\": ShapeTypes_1.ShapeTypes.Terminator,\n          \"BasicFlowchartShapes.Data\": ShapeTypes_1.ShapeTypes.Data,\n          \"BasicFlowchartShapes.Database\": ShapeTypes_1.ShapeTypes.Database,\n          \"BasicFlowchartShapes.ExternalData\": ShapeTypes_1.ShapeTypes.StoredData,\n          \"BasicFlowchartShapes.Process\": ShapeTypes_1.ShapeTypes.Process,\n          \"BasicFlowchartShapes.Decision\": ShapeTypes_1.ShapeTypes.Decision,\n          \"BasicFlowchartShapes.Subprocess\": ShapeTypes_1.ShapeTypes.PredefinedProcess,\n          \"BasicFlowchartShapes.Document\": ShapeTypes_1.ShapeTypes.Document,\n          \"BasicFlowchartShapes.Custom1\": ShapeTypes_1.ShapeTypes.ManualInput,\n          \"BasicFlowchartShapes.Custom2\": ShapeTypes_1.ShapeTypes.ManualOperation,\n          \"ArrowShapes.SimpleArrow\": ShapeTypes_1.ShapeTypes.ArrowLeft,\n          \"ArrowShapes.SimpleDoubleArrow\": ShapeTypes_1.ShapeTypes.ArrowEastWest\n        };\n        return XmlImporter;\n      }(ImporterBase_1.ImporterBase);\n\n      exports.XmlImporter = XmlImporter;\n      /***/\n    },\n    /* 259 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics199 = function extendStatics(d, b) {\n          _extendStatics199 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics199(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics199(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var EditShapeImageCommandBase_1 = __webpack_require__(77);\n\n      var InsertShapeImageCommand =\n      /** @class */\n      function (_super) {\n        __extends(InsertShapeImageCommand, _super);\n\n        function InsertShapeImageCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        InsertShapeImageCommand.prototype.isEnabled = function () {\n          var selectedShape = this.getSelectedShape();\n          return _super.prototype.isEnabled.call(this) && selectedShape.image.isEmpty;\n        };\n\n        return InsertShapeImageCommand;\n      }(EditShapeImageCommandBase_1.EditShapeImageCommandBase);\n\n      exports.InsertShapeImageCommand = InsertShapeImageCommand;\n      /***/\n    },\n    /* 260 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics200 = function extendStatics(d, b) {\n          _extendStatics200 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics200(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics200(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var EditShapeImageCommandBase_1 = __webpack_require__(77);\n\n      var DeleteShapeImageCommand =\n      /** @class */\n      function (_super) {\n        __extends(DeleteShapeImageCommand, _super);\n\n        function DeleteShapeImageCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        DeleteShapeImageCommand.prototype.isEnabled = function () {\n          var selectedShape = this.getSelectedShape();\n          return _super.prototype.isEnabled.call(this) && !selectedShape.image.isEmpty;\n        };\n\n        DeleteShapeImageCommand.prototype.executeCore = function (state, parameter) {\n          return _super.prototype.executeCore.call(this, state, undefined);\n        };\n\n        return DeleteShapeImageCommand;\n      }(EditShapeImageCommandBase_1.EditShapeImageCommandBase);\n\n      exports.DeleteShapeImageCommand = DeleteShapeImageCommand;\n      /***/\n    },\n    /* 261 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ModelManipulator_1 = __webpack_require__(262);\n\n      var CommandManager_1 = __webpack_require__(48);\n\n      var EventManager_1 = __webpack_require__(263);\n\n      var Model_1 = __webpack_require__(19);\n\n      var Selection_1 = __webpack_require__(292);\n\n      var History_1 = __webpack_require__(294);\n\n      var BarManager_1 = __webpack_require__(295);\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(25);\n\n      var DocumentDataSource_1 = __webpack_require__(296);\n\n      var DiagramSettings_1 = __webpack_require__(35);\n\n      var ViewController_1 = __webpack_require__(300);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var ToolboxManager_1 = __webpack_require__(301);\n\n      var _1 = __webpack_require__(8);\n\n      var ApiController_1 = __webpack_require__(304);\n\n      var DiagramControl =\n      /** @class */\n      function () {\n        function DiagramControl() {\n          this.processDataChangesNeeded = false;\n          this.settings = new DiagramSettings_1.DiagramSettings();\n          this.model = new Model_1.DiagramModel();\n          this.selection = new Selection_1.Selection(this.model);\n          this.modelManipulator = new ModelManipulator_1.ModelManipulator(this.model);\n          this.history = new History_1.History(this.modelManipulator);\n          this.onNativeAction = new _1.EventDispatcher();\n          this.view = new ViewController_1.ViewController(this.settings);\n          this.commandManager = new CommandManager_1.CommandManager(this);\n          this.barManager = new BarManager_1.BarManager(this);\n          this.eventManager = new EventManager_1.EventManager(this);\n          this.selection.onChanged.add(this.barManager);\n          this.selection.onChanged.add(this);\n          this.modelManipulator.onLoad();\n          this.history.onChanged.add(this);\n          this.toolboxManager = new ToolboxManager_1.ToolboxManager(this.settings.readOnly);\n          this.settings.onReadOnlyChanged.add(this.toolboxManager);\n          this.apiController = new ApiController_1.ApiController(this.onNativeAction, this.selection, this.model);\n        }\n\n        DiagramControl.prototype.dispose = function () {\n          this.toolboxManager.dispose();\n          if (this.render) this.render.dispose();\n        };\n\n        DiagramControl.prototype.createDocument = function (parent) {\n          if (this.render) this.render.replaceParent(parent);else {\n            this.render = new RenderManager_1.RenderManager(parent, this.eventManager, {\n              pageColor: this.model.pageColor,\n              modelSize: this.model.size,\n              pageLandscape: this.model.pageLandscape,\n              pageSize: this.model.pageSize,\n              simpleView: this.settings.simpleView,\n              readOnly: this.settings.readOnly,\n              gridSize: this.settings.gridSize,\n              gridVisible: this.settings.showGrid,\n              zoomLevel: this.settings.zoomLevel,\n              autoZoom: this.settings.autoZoom,\n              rectangle: this.model.getRectangle(true)\n            });\n            this.settings.onZoomChanged.add(this.render.view);\n            this.settings.onViewChanged.add(this.render.page);\n            this.settings.onViewChanged.add(this.render.view);\n            this.settings.onReadOnlyChanged.add(this.eventManager.mouseHandler);\n            this.settings.onReadOnlyChanged.add(this.eventManager.visualizersManager);\n            this.settings.onReadOnlyChanged.add(this.render);\n            this.settings.onReadOnlyChanged.add(this.render.selection);\n            this.eventManager.onTextInputOperation.add(this.render.input);\n            this.eventManager.onTextInputOperation.add(this.render.items);\n            this.eventManager.onTextInputOperation.add(this.render.selection);\n            this.eventManager.onMouseOperation.add(this.render.items);\n            this.eventManager.onMouseOperation.add(this.render.selection);\n            this.eventManager.onMouseOperation.add(this.render.view);\n            this.eventManager.onMouseOperation.add(this.render);\n            this.eventManager.onVisualizersUpdate.add(this.render.selection);\n            this.modelManipulator.onModelSizeChanged.add(this.render.view);\n            this.modelManipulator.onModelSizeChanged.add(this.render.page);\n            this.modelManipulator.onModelChanged.add(this.render.items);\n            this.modelManipulator.onModelChanged.add(this.render.page);\n            this.modelManipulator.onModelChanged.add(this.render.selection);\n            this.selection.onChanged.add(this.render.selection);\n            this.render.update(false);\n            this.modelManipulator.onLoad();\n            this.view.initialize(this.render.view);\n            this.selection.onLoad();\n          }\n        };\n\n        DiagramControl.prototype.createToolbox = function (parent, shapeIconSize, shapeIconSpacing, shapeIconAttributes, shapes, renderAsText) {\n          var toolbox = this.toolboxManager.create(parent, shapeIconSize, shapeIconSpacing, shapeIconAttributes, shapes, renderAsText);\n          this.settings.onReadOnlyChanged.add(toolbox);\n          toolbox.onDragOperation.add(this);\n          this.eventManager.registerToolbox(toolbox);\n        };\n\n        DiagramControl.prototype.applyToolboxFilter = function (shapeSubstring, filteringToolboxes) {\n          return this.toolboxManager.applyFilter(shapeSubstring, filteringToolboxes);\n        };\n\n        DiagramControl.prototype.updateLayout = function (resetScroll) {\n          if (resetScroll === void 0) {\n            resetScroll = false;\n          }\n\n          this.render && this.render.update(!resetScroll);\n        };\n\n        DiagramControl.prototype.captureFocus = function () {\n          this.render && this.render.input.captureFocus();\n        };\n\n        DiagramControl.prototype.isFocused = function () {\n          return !this.render || this.render.input.isFocused();\n        };\n\n        DiagramControl.prototype.addCustomShapes = function (shapes) {\n          var _this = this;\n\n          shapes.forEach(function (shape) {\n            if (shape.defaultWidth) shape.defaultWidth = ModelUtils_1.ModelUtils.getTwipsValue(_this.model.units, shape.defaultWidth);\n            if (shape.defaultHeight) shape.defaultHeight = ModelUtils_1.ModelUtils.getTwipsValue(_this.model.units, shape.defaultHeight);\n            ShapeDescriptionManager_1.ShapeDescriptionManager.registerCustomShape(shape);\n          });\n        };\n\n        DiagramControl.prototype.removeCustomShapes = function (shapeTypes) {\n          shapeTypes.forEach(function (shapeType) {\n            ShapeDescriptionManager_1.ShapeDescriptionManager.unregisterCustomShape(shapeType);\n          });\n        };\n\n        DiagramControl.prototype.importModel = function (model) {\n          this.model = model;\n          this.apiController.model = model;\n          this.importData();\n        };\n\n        DiagramControl.prototype.importItemsData = function () {\n          this.model.invalidateItems();\n          this.importData();\n        };\n\n        DiagramControl.prototype.importData = function () {\n          this.render && this.render.clear();\n          this.selection.initialize(this.model);\n          this.modelManipulator.load(this.model);\n          this.history.clear();\n          this.eventManager.initialize();\n          this.modelManipulator.onLoad();\n        };\n\n        DiagramControl.prototype.createDocumentDataSource = function (nodeDataSource, edgeDataSource, nodeDataImporter, edgeDataImporter) {\n          this.documentDataSource = new DocumentDataSource_1.DocumentDataSource(this, nodeDataSource, edgeDataSource, nodeDataImporter, edgeDataImporter);\n          return this.documentDataSource;\n        };\n\n        DiagramControl.prototype.deleteDocumentDataSource = function () {\n          delete this.documentDataSource;\n        };\n\n        DiagramControl.prototype.beginUpdate = function (lockUpdateCanvas) {\n          this.barManager.beginUpdate();\n          if (lockUpdateCanvas && this.render) this.render.items.beginUpdate();\n          this.apiController.beginUpdate();\n        };\n\n        DiagramControl.prototype.endUpdate = function (lockUpdateCanvas) {\n          if (lockUpdateCanvas && this.render) this.render.items.endUpdate();\n          this.barManager.endUpdate();\n          this.apiController.endUpdate();\n        };\n\n        DiagramControl.prototype.notifyEdgeInserted = function (data, callback, errorCallback) {\n          if (this.onEdgeInserted) this.onEdgeInserted(data, callback, errorCallback);\n        };\n\n        DiagramControl.prototype.notifyEdgeUpdated = function (key, data, callback, errorCallback) {\n          if (this.onEdgeUpdated) this.onEdgeUpdated(key, data, callback, errorCallback);\n        };\n\n        DiagramControl.prototype.notifyEdgeRemoved = function (key, data, callback, errorCallback) {\n          if (this.onEdgeUpdated) this.onEdgeRemoved(key, data, callback, errorCallback);\n        };\n\n        DiagramControl.prototype.notifyNodeInserted = function (data, callback, errorCallback) {\n          if (this.onNodeInserted) this.onNodeInserted(data, callback, errorCallback);\n        };\n\n        DiagramControl.prototype.notifyNodeUpdated = function (key, data, callback, errorCallback) {\n          if (this.onNodeUpdated) this.onNodeUpdated(key, data, callback, errorCallback);\n        };\n\n        DiagramControl.prototype.notifyNodeRemoved = function (key, data, callback, errorCallback) {\n          if (this.onNodeRemoved) this.onNodeRemoved(key, data, callback, errorCallback);\n        };\n\n        DiagramControl.prototype.notifySelectionChanged = function (selection) {\n          this.apiController.onSelectionChanged();\n        };\n\n        DiagramControl.prototype.checkProcessDataChanges = function () {\n          if (this.documentDataSource.isUpdateLocked()) {\n            this.processDataChangesNeeded = true;\n            return;\n          }\n\n          this.processDataChanges();\n        };\n\n        DiagramControl.prototype.processDataChanges = function (force) {\n          if (force === void 0) {\n            force = true;\n          }\n\n          if (force || this.processDataChangesNeeded) {\n            this.documentDataSource.updateItemsByModel(this.model);\n            this.processDataChangesNeeded = false;\n          }\n\n          if (!this.documentDataSource.isUpdateLocked()) this.raiseOnChanged();\n        };\n\n        DiagramControl.prototype.notifyHistoryChanged = function () {\n          if (this.settings.readOnly) return;\n          if (this.documentDataSource) this.checkProcessDataChanges();else this.raiseOnChanged();\n        };\n\n        DiagramControl.prototype.raiseOnChanged = function () {\n          if (this.onChanged) this.onChanged();\n        };\n\n        DiagramControl.prototype.notifyToolboxDragStart = function () {\n          if (this.onToolboxDragStart) this.onToolboxDragStart();\n        };\n\n        DiagramControl.prototype.notifyToolboxDragEnd = function () {\n          if (this.onToolboxDragEnd) this.onToolboxDragEnd();\n        };\n\n        DiagramControl.prototype.notifyToggleFullscreen = function (value) {\n          if (this.onToggleFullscreen) this.onToggleFullscreen(value);\n        };\n\n        DiagramControl.prototype.notifyShowContextMenu = function (eventPoint, modelPoint) {\n          if (this.onShowContextMenu && this.render) {\n            var selection = void 0;\n            var selectedItems = this.selection.getSelectedItems(true);\n\n            if (selectedItems.length > 0) {\n              var rect = Model_1.DiagramModel.getRectangle(this.selection.getSelectedItems(true));\n              var pos = this.render.getEventPointByModelPoint(rect.position);\n              var size = this.render.view.getAbsoluteSize(rect.size);\n              selection = {\n                x: pos.x,\n                y: pos.y,\n                width: size.width,\n                height: size.height\n              };\n            }\n\n            if (eventPoint) this.onShowContextMenu(eventPoint.x, eventPoint.y, selection);else if (modelPoint) {\n              var point = this.render.getEventPointByModelPoint(modelPoint);\n              this.onShowContextMenu(point.x, point.y, selection);\n            }\n          }\n        };\n\n        DiagramControl.prototype.notifyHideContextMenu = function () {\n          if (this.onHideContextMenu && this.render) this.onHideContextMenu();\n        };\n\n        return DiagramControl;\n      }();\n\n      exports.DiagramControl = DiagramControl;\n      /***/\n    },\n    /* 262 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ModelChange_1 = __webpack_require__(83);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var ImageCache_1 = __webpack_require__(49);\n\n      var ImageLoader_1 = __webpack_require__(100);\n\n      var ModelManipulator =\n      /** @class */\n      function () {\n        function ModelManipulator(model) {\n          this.onModelChanged = new Utils_1.EventDispatcher();\n          this.onModelSizeChanged = new Utils_1.EventDispatcher();\n          this.model = model;\n          this.imageLoader = new ImageLoader_1.ImageLoader(this.updateShapeImage.bind(this));\n        }\n\n        ModelManipulator.prototype.load = function (model) {\n          this.model = model;\n          this.model.loadAllImages(this.imageLoader);\n          this.updateModelSize();\n          this.raisePageSizeChanged(model.pageSize.clone(), model.pageLandscape);\n          this.raiseModelSizeChanged(model.size.clone());\n          this.raisePageColorChanged(model.pageColor);\n          this.raiseModelRectangleChanged(Utils_1.GeometryUtils.getCommonRectangle(model.items.map(function (i) {\n            return i.rectangle;\n          })));\n        };\n\n        ModelManipulator.prototype.onLoad = function () {\n          var changes = [];\n          this.model.iterateItems(function (item) {\n            changes.push(new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.Create));\n          });\n          this.raiseModelChanged(changes);\n        }; // Items\n\n\n        ModelManipulator.prototype.insertToContainer = function (item, container) {\n          if (item.container && container && item.container.key !== container.key) throw Error(\"To insert an item to a container it's necessary to remove it from the current container.\");\n\n          if (container) {\n            container.childKeys.push(item.key);\n            item.container = container;\n            this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.Update)]);\n          }\n        };\n\n        ModelManipulator.prototype.removeFromContainer = function (item) {\n          if (item.container) {\n            var index = item.container.childKeys.indexOf(item.key);\n            item.container.childKeys.splice(index, 1);\n            item.container = undefined;\n            this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.Update)]);\n          }\n        };\n\n        ModelManipulator.prototype.changeStyle = function (item, styleProperty, styleValue) {\n          this.changeStyleCore(item, item.style, styleProperty, styleValue);\n        };\n\n        ModelManipulator.prototype.changeStyleText = function (item, styleProperty, styleValue) {\n          this.changeStyleCore(item, item.styleText, styleProperty, styleValue);\n        };\n\n        ModelManipulator.prototype.changeStyleCore = function (item, styleObj, styleProperty, styleValue) {\n          if (styleValue !== undefined) styleObj[styleProperty] = styleValue;else delete styleObj[styleProperty];\n          item.invalidatePrimitives();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.Update)]);\n        };\n\n        ModelManipulator.prototype.changeZIndex = function (item, zIndex) {\n          item.zIndex = zIndex;\n          this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.Update)]);\n        };\n\n        ModelManipulator.prototype.changeLocked = function (item, locked) {\n          item.locked = locked;\n          this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.Update)]);\n        };\n\n        ModelManipulator.prototype.changeContainerLocked = function (item, locked) {\n          item.containerLocked = locked;\n          this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.Update)]);\n        }; // Shapes\n\n\n        ModelManipulator.prototype.addShape = function (shape, key) {\n          if (shape.attachedConnectors.length) throw Error(\"A creating shape should not contain existing connectors.\");\n          shape.key = key !== undefined ? key : this.model.getNextKey();\n          return this.insertShape(shape);\n        };\n\n        ModelManipulator.prototype.insertShape = function (shape) {\n          this.model.pushItem(shape);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.Create)]);\n          this.model.loadAllImages(this.imageLoader);\n          return shape;\n        };\n\n        ModelManipulator.prototype.resizeShape = function (shape, position, size) {\n          shape.position = position;\n          shape.size = size;\n          shape.invalidatePrimitives();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.Update)]);\n        };\n\n        ModelManipulator.prototype.moveShape = function (shape, position) {\n          shape.position = position;\n          shape.invalidatePrimitives();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.Update)]);\n        };\n\n        ModelManipulator.prototype.changeShapeParameters = function (shape, parameters) {\n          shape.parameters.forEach(function (p) {\n            var parameter = parameters.get(p.key);\n            if (parameter) p.value = parameter.value;\n          });\n          shape.invalidatePrimitives();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.Update)]);\n        };\n\n        ModelManipulator.prototype.changeShapeText = function (shape, text) {\n          shape.text = text;\n          shape.invalidatePrimitives();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.changeShapeImage = function (shape, image) {\n          shape.image = image;\n          var cachedImage = ImageCache_1.ImageCache.instance.createUnloadedInfoByShapeImageInfo(image);\n          this.imageLoader.load(cachedImage);\n          shape.invalidatePrimitives();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.changeShapeExpanded = function (shape, expanded) {\n          shape.expanded = expanded;\n          shape.toggleExpandedSize();\n          shape.invalidatePrimitives();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.deleteShape = function (shape) {\n          if (shape.attachedConnectors.length) throw Error(\"A removing shape should not contain existing connectors.\");\n          this.removeShape(shape);\n        };\n\n        ModelManipulator.prototype.removeShape = function (shape) {\n          this.model.removeItem(shape);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.Remove)]);\n        };\n\n        ModelManipulator.prototype.updateShapeImage = function (cacheImageInfo) {\n          if (!cacheImageInfo.imageUrl) return;\n          var shapes = this.model.findShapesByImageUrl(cacheImageInfo.imageUrl);\n          var changes = [];\n          shapes.forEach(function (shape) {\n            if (cacheImageInfo.base64) shape.image.loadBase64Content(cacheImageInfo.base64);else shape.image.setUnableToLoadFlag();\n            shape.invalidatePrimitives();\n            changes.push(new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.UpdateStructure));\n          });\n          if (changes.length > 0) this.raiseModelChanged(changes);\n        }; // Connectors\n\n\n        ModelManipulator.prototype.addConnector = function (connector, key) {\n          if (connector.beginItem || connector.endItem) throw Error(\"Creating connector should not contain begin/end items\");\n          connector.key = key !== undefined ? key : this.model.getNextKey();\n          ;\n          return this.insertConnector(connector);\n        };\n\n        ModelManipulator.prototype.insertConnector = function (connector) {\n          this.model.pushItem(connector);\n          connector.invalidateRenderPoints();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.Create)]);\n          return connector;\n        };\n\n        ModelManipulator.prototype.deleteConnector = function (connector) {\n          if (connector.beginItem || connector.endItem) throw Error(\"Creating connector should not contain begin/end items\");\n          this.removeConnector(connector);\n        };\n\n        ModelManipulator.prototype.removeConnector = function (connector) {\n          this.model.removeItem(connector);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.Remove)]);\n        };\n\n        ModelManipulator.prototype.moveConnectorPoint = function (connector, pointIndex, point) {\n          connector.points[pointIndex] = point;\n          connector.invalidateRenderPoints();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.addConnectorPoint = function (connector, pointIndex, point) {\n          connector.points.splice(pointIndex, 0, point);\n          connector.invalidateRenderPoints();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.deleteConnectorPoint = function (connector, pointIndex) {\n          connector.points.splice(pointIndex, 1);\n          connector.invalidateRenderPoints();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.addConnection = function (connector, item, connectionPointIndex, position) {\n          var existingItem = connector.getExtremeItem(position);\n          var existingConnectionPointIndex = connector.getExtremeConnectionPointIndex(position);\n          if (existingItem === item && existingConnectionPointIndex === connectionPointIndex) return;else if (existingItem) throw Error(\"Connector is already connected\");\n          item.attachedConnectors.push(connector);\n\n          if (position === Connector_1.ConnectorPosition.Begin) {\n            connector.beginItem = item;\n            connector.beginConnectionPointIndex = connectionPointIndex;\n          } else {\n            connector.endItem = item;\n            connector.endConnectionPointIndex = connectionPointIndex;\n          }\n\n          connector.invalidateRenderPoints();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.setConnectionPointIndex = function (connector, connectionPointIndex, position) {\n          if (!connector.getExtremeItem(position)) throw Error(\"Connection should be connected\");\n          if (position === Connector_1.ConnectorPosition.Begin) connector.beginConnectionPointIndex = connectionPointIndex;else connector.endConnectionPointIndex = connectionPointIndex;\n          connector.invalidateRenderPoints();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.deleteConnection = function (connector, position) {\n          var item = connector.getExtremeItem(position);\n          if (!item) return;\n          item.attachedConnectors.splice(item.attachedConnectors.indexOf(connector), 1);\n\n          if (position === Connector_1.ConnectorPosition.Begin) {\n            connector.beginItem = null;\n            connector.beginConnectionPointIndex = -1;\n          } else {\n            connector.endItem = null;\n            connector.endConnectionPointIndex = -1;\n          }\n\n          connector.invalidateRenderPoints();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.changeConnectorProperty = function (connector, propertyName, value) {\n          connector.properties[propertyName] = value;\n          connector.invalidateRenderPoints();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.changeConnectorText = function (connector, text, position) {\n          connector.setText(text, position);\n          connector.invalidatePrimitives();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.changeConnectorTextPosition = function (connector, position, newPosition) {\n          var text = connector.getText(position);\n          connector.setText(null, position);\n          connector.setText(text, newPosition);\n          connector.invalidatePrimitives();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.Update)]);\n        }; // Model\n\n\n        ModelManipulator.prototype.changeModelSize = function (size, offset) {\n          this.model.size.width = size.width;\n          this.model.size.height = size.height;\n          this.raiseModelSizeChanged(this.model.size.clone(), offset);\n\n          if (offset.left || offset.top) {\n            this.model.snapStartPoint = this.model.snapStartPoint.offset(offset.left, offset.top);\n            this.raiseSnapPointChange(this.model.snapStartPoint);\n          }\n        };\n\n        ModelManipulator.prototype.changePageSize = function (value) {\n          if (!this.model.pageSize.equals(value)) {\n            this.model.pageSize = value;\n            this.model.size = new Utils_1.Size(this.model.pageWidth, this.model.pageHeight);\n            this.raiseModelSizeChanged(this.model.size.clone());\n            this.raisePageSizeChanged(this.model.pageSize, this.model.pageLandscape);\n          }\n        };\n\n        ModelManipulator.prototype.changePageLandscape = function (value) {\n          if (this.model.pageLandscape !== value) {\n            this.model.pageLandscape = value;\n\n            if (this.model.pageSize.width !== this.model.pageSize.height) {\n              this.model.size = new Utils_1.Size(this.model.pageWidth, this.model.pageHeight);\n              this.raiseModelSizeChanged(this.model.size.clone());\n              this.raisePageSizeChanged(this.model.pageSize, this.model.pageLandscape);\n            }\n          }\n        };\n\n        ModelManipulator.prototype.changePageColor = function (value) {\n          if (this.model.pageColor !== value) {\n            this.model.pageColor = value;\n            this.raisePageColorChanged(value);\n          }\n        };\n\n        ModelManipulator.prototype.changePageProperty = function (apply) {\n          apply(this.model);\n        };\n\n        ModelManipulator.prototype.getModelSizeUpdateOffset = function () {\n          var oldRectangle = this.model.getRectangle(false);\n          var newRectangle = this.model.getRectangle(true);\n          if (!newRectangle.equals(oldRectangle)) this.raiseModelRectangleChanged(newRectangle);\n          var leftPageOffset = -Math.floor(newRectangle.left / this.model.pageWidth);\n          var topPageOffset = -Math.floor(newRectangle.top / this.model.pageHeight);\n          var rightPageOffset = -Math.floor((this.model.size.width - newRectangle.right) / this.model.pageWidth);\n          var bottomPageOffset = -Math.floor((this.model.size.height - newRectangle.bottom) / this.model.pageHeight);\n          return new Utils_1.Offset(leftPageOffset * this.model.pageWidth, topPageOffset * this.model.pageHeight, rightPageOffset * this.model.pageWidth, bottomPageOffset * this.model.pageHeight);\n        };\n\n        ModelManipulator.prototype.updateModelSize = function () {\n          var offset = this.getModelSizeUpdateOffset();\n\n          if (!offset.isEmpty()) {\n            var newWidth = Math.max(this.model.size.width + offset.left + offset.right, this.model.pageWidth);\n            var newHeight = Math.max(this.model.size.height + offset.top + offset.bottom, this.model.pageHeight);\n            this.model.size = new Utils_1.Size(newWidth, newHeight);\n          }\n        };\n\n        ModelManipulator.prototype.raiseModelChanged = function (changes) {\n          this.onModelChanged.raise1(function (l) {\n            return l.notifyModelChanged(changes);\n          });\n        };\n\n        ModelManipulator.prototype.raisePageColorChanged = function (color) {\n          this.onModelChanged.raise1(function (l) {\n            return l.notifyPageColorChanged(color);\n          });\n        };\n\n        ModelManipulator.prototype.raisePageSizeChanged = function (pageSize, pageLandscape) {\n          this.onModelChanged.raise1(function (l) {\n            return l.notifyPageSizeChanged(pageSize, pageLandscape);\n          });\n        };\n\n        ModelManipulator.prototype.raiseModelSizeChanged = function (size, offset) {\n          this.onModelSizeChanged.raise1(function (l) {\n            return l.notifyModelSizeChanged(size, offset);\n          });\n        };\n\n        ModelManipulator.prototype.raiseModelRectangleChanged = function (rectangle) {\n          this.onModelSizeChanged.raise1(function (l) {\n            return l.notifyModelRectangleChanged(rectangle);\n          });\n        };\n\n        ModelManipulator.prototype.raiseSnapPointChange = function (point) {\n          this.onModelSizeChanged.raise1(function (l) {\n            return l.notifySnapPointPositionChanged(point);\n          });\n        };\n\n        return ModelManipulator;\n      }();\n\n      exports.ModelManipulator = ModelManipulator;\n      /***/\n    },\n    /* 263 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandler_1 = __webpack_require__(264);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var TextInputHandler_1 = __webpack_require__(283);\n\n      var ContextMenuHandler_1 = __webpack_require__(125);\n\n      var __1 = __webpack_require__(8);\n\n      var ContextMenuTouchHandler_1 = __webpack_require__(285);\n\n      var VisualizersManager_1 = __webpack_require__(126);\n\n      var VisualizersTouchManager_1 = __webpack_require__(291);\n\n      var EventManager =\n      /** @class */\n      function () {\n        function EventManager(control) {\n          this.onMouseOperation = new Utils_1.EventDispatcher();\n          this.onTextInputOperation = new Utils_1.EventDispatcher();\n          this.toolboxes = [];\n          this.control = control;\n          this.visualizersManager = __1.Browser.TouchUI ? new VisualizersTouchManager_1.VisualizerTouchManager(control.selection, control.model, this, control.settings) : new VisualizersManager_1.VisualizerManager(control.selection, control.model, this, control.settings);\n          this.onMouseOperation.add(this.visualizersManager);\n          this.mouseHandler = new MouseHandler_1.MouseHandler(control.history, control.selection, control.model, this, control.settings.readOnly, control.view, this.visualizersManager, control.settings, control.barManager, control.onNativeAction);\n          this.textInputHandler = new TextInputHandler_1.TextInputHandler(control);\n          this.contextMenuHandler = __1.Browser.TouchUI ? new ContextMenuTouchHandler_1.ContextMenuTouchHandler(control.selection) : new ContextMenuHandler_1.ContextMenuHandler();\n          this.contextMenuHandler.onVisibilityChanged.add(control);\n          this.onMouseOperation.add(this.contextMenuHandler);\n        }\n\n        Object.defineProperty(EventManager.prototype, \"onVisualizersUpdate\", {\n          get: function get() {\n            return this.visualizersManager.onVisualizersUpdate;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        EventManager.prototype.registerToolbox = function (toolbox) {\n          this.toolboxes.push(toolbox);\n        };\n\n        EventManager.prototype.initialize = function () {\n          this.visualizersManager.initialize(this.control.model);\n          this.mouseHandler.initialize(this.control.model);\n        };\n\n        EventManager.prototype.onMouseDown = function (evt) {\n          this.mouseHandler.onMouseDown(evt);\n          this.contextMenuHandler.onMouseDown(evt);\n          this.visualizersManager.onMouseDown(evt);\n        };\n\n        EventManager.prototype.onMouseMove = function (evt) {\n          this.processDragging(evt);\n          this.mouseHandler.onMouseMove(evt);\n        };\n\n        EventManager.prototype.onMouseUp = function (evt) {\n          this.mouseHandler.onMouseUp(evt);\n          this.contextMenuHandler.onMouseUp(evt);\n          this.visualizersManager.onMouseUp(evt);\n          this.processDragging(evt);\n        };\n\n        EventManager.prototype.onMouseEnter = function (evt) {\n          this.visualizersManager.onMouseEnter(evt);\n        };\n\n        EventManager.prototype.onMouseLeave = function (evt) {\n          this.visualizersManager.onMouseLeave(evt);\n        };\n\n        EventManager.prototype.onDblClick = function (evt) {\n          this.mouseHandler.onMouseDblClick(evt);\n          this.textInputHandler.onDblClick(evt);\n        };\n\n        EventManager.prototype.onClick = function (evt) {\n          this.mouseHandler.onMouseClick(evt);\n        };\n\n        EventManager.prototype.onContextMenu = function (evt) {\n          this.contextMenuHandler.onContextMenu(evt);\n        };\n\n        EventManager.prototype.onLongTouch = function (evt) {\n          this.mouseHandler.onLongTouch(evt);\n          this.contextMenuHandler.onLongTouch(evt);\n        };\n\n        EventManager.prototype.onBlur = function (evt) {\n          this.contextMenuHandler.onBlur(evt);\n          this.visualizersManager.onBlur(evt);\n        };\n\n        EventManager.prototype.onFocus = function (evt) {\n          this.contextMenuHandler.onFocus(evt);\n          this.visualizersManager.onFocus(evt);\n        };\n\n        EventManager.prototype.onKeyDown = function (evt) {\n          var scCode = evt.getShortcutCode();\n\n          if (this.onShortcut(scCode)) {\n            this.visualizersManager.updateConnectionPoints();\n            evt.preventDefault = true;\n          }\n        };\n\n        EventManager.prototype.onTextInputBlur = function (evt) {\n          this.textInputHandler.onBlur(evt);\n          this.contextMenuHandler.onTextInputBlur(evt);\n        };\n\n        EventManager.prototype.onTextInputFocus = function (evt) {\n          this.textInputHandler.onFocus(evt);\n          this.contextMenuHandler.onTextInputFocus(evt);\n        };\n\n        EventManager.prototype.onTextInputKeyDown = function (evt) {\n          this.textInputHandler.onKeyDown(evt);\n        };\n\n        EventManager.prototype.onShortcut = function (code) {\n          if (this.control.commandManager.processShortcut(code)) return true;\n          if (this.mouseHandler.onShortcut(code)) return true;\n        };\n\n        EventManager.prototype.onPaste = function (evt) {\n          if (!this.textInputHandler.isTextInputActive() && this.control.commandManager.processPaste(evt.clipboardData)) {\n            this.visualizersManager.updateConnectionPoints();\n            evt.preventDefault = true;\n          }\n        };\n\n        EventManager.prototype.onMouseWheel = function (evt) {\n          if (this.mouseHandler.onWheel(evt)) evt.preventDefault = true;\n        };\n\n        EventManager.prototype.isFocused = function () {\n          return this.control.isFocused();\n        };\n\n        EventManager.prototype.processDragging = function (evt) {\n          var draggingEvt = this.getDraggingEvent();\n\n          if (draggingEvt && !this.draggingEvent) {\n            this.draggingEvent = draggingEvt;\n            this.mouseHandler.onDragStart(this.draggingEvent);\n            this.control.captureFocus();\n          } else if (!draggingEvt && this.draggingEvent) {\n            delete this.draggingEvent;\n            this.mouseHandler.onDragEnd(evt);\n          }\n        };\n\n        EventManager.prototype.getDraggingEvent = function () {\n          return this.toolboxes.filter(function (t) {\n            return t.draggingObject;\n          }).map(function (t) {\n            return t.draggingObject.evt;\n          })[0];\n        };\n\n        EventManager.prototype.onDocumentDragStart = function (itemKeys) {\n          this.control.beginUpdate();\n          this.control.captureFocus();\n          this.onMouseOperation.raise(\"notifyDragStart\", itemKeys);\n        };\n\n        EventManager.prototype.onDocumentDragEnd = function (itemKeys) {\n          this.onMouseOperation.raise(\"notifyDragEnd\", itemKeys);\n          this.control.endUpdate();\n        };\n\n        EventManager.prototype.onDocumentDragScrollStart = function () {\n          this.onMouseOperation.raise1(function (l) {\n            return l.notifyDragScrollStart();\n          });\n        };\n\n        EventManager.prototype.onDocumentDragScrollEnd = function () {\n          this.onMouseOperation.raise1(function (l) {\n            return l.notifyDragScrollEnd();\n          });\n        };\n\n        EventManager.prototype.onDocumentClick = function (itemKeys) {\n          this.control.beginUpdate();\n          this.control.endUpdate();\n        };\n\n        EventManager.prototype.raiseTextInputStart = function (item, text, position, size) {\n          this.onTextInputOperation.raise(\"notifyTextInputStart\", item, text, position, size);\n        };\n\n        EventManager.prototype.raiseTextInputEnd = function (item) {\n          this.onTextInputOperation.raise(\"notifyTextInputEnd\", item);\n        };\n\n        return EventManager;\n      }();\n\n      exports.EventManager = EventManager;\n      /***/\n    },\n    /* 264 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerDefaultState_1 = __webpack_require__(118);\n\n      var Event_1 = __webpack_require__(10);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var MouseHandlerMoveClonedShapeState_1 = __webpack_require__(78);\n\n      var __1 = __webpack_require__(8);\n\n      var MouseHandlerDefaultReadOnlyTouchState_1 = __webpack_require__(280);\n\n      var MouseHandlerDefaultReadOnlyState_1 = __webpack_require__(124);\n\n      var MouseHandlerDefaultTouchState_1 = __webpack_require__(281);\n\n      var MouseHandler =\n      /** @class */\n      function () {\n        function MouseHandler(history, selection, model, eventManager, readOnly, view, visualizerManager, settings, bars, nativeActions) {\n          this.history = history;\n          this.selection = selection;\n          this.model = model;\n          this.eventManager = eventManager;\n          this.readOnly = readOnly;\n          this.view = view;\n          this.visualizerManager = visualizerManager;\n          this.settings = settings;\n          this.bars = bars;\n          this.nativeActions = nativeActions;\n          this.initialize(model);\n        }\n\n        MouseHandler.prototype.initialize = function (model) {\n          this.model = model;\n          this.initializeDefaultState();\n        };\n\n        MouseHandler.prototype.initializeDefaultState = function () {\n          this.defaultState = this.readOnly ? __1.Browser.TouchUI ? new MouseHandlerDefaultReadOnlyTouchState_1.MouseHandlerDefaultReadOnlyTouchState(this, this.history, this.selection, this.model, this.view, this.visualizerManager, this.settings, this.bars) : new MouseHandlerDefaultReadOnlyState_1.MouseHandlerDefaultReadOnlyState(this, this.history, this.selection, this.model, this.view, this.visualizerManager, this.settings, this.bars) : __1.Browser.TouchUI ? new MouseHandlerDefaultTouchState_1.MouseHandlerDefaultTouchState(this, this.history, this.selection, this.model, this.view, this.visualizerManager, this.settings, this.bars) : new MouseHandlerDefaultState_1.MouseHandlerDefaultState(this, this.history, this.selection, this.model, this.view, this.visualizerManager, this.settings, this.bars);\n          this.switchToDefaultState();\n        };\n\n        MouseHandler.prototype.onMouseDown = function (evt) {\n          this.mouseDownEvent = evt;\n          this.state.onMouseDown(evt);\n        };\n\n        MouseHandler.prototype.onMouseMove = function (evt) {\n          this.state.onMouseMove(evt);\n        };\n\n        MouseHandler.prototype.onMouseUp = function (evt) {\n          this.state.onMouseUp(evt);\n        };\n\n        MouseHandler.prototype.onMouseDblClick = function (evt) {\n          this.state.onMouseDblClick(evt);\n          this.tryRaiseUserAction(evt, function (l, item) {\n            return l.notifyItemDblClick(item);\n          });\n        };\n\n        MouseHandler.prototype.onMouseClick = function (evt) {\n          this.state.onMouseClick(evt);\n          this.tryRaiseUserAction(evt, function (l, item) {\n            return l.notifyItemClick(item);\n          });\n        };\n\n        MouseHandler.prototype.onLongTouch = function (evt) {\n          if (!evt.touches || evt.touches.length > 1) return;\n          var key = evt.source.key;\n          if (key === undefined) this.selection.clear();else if (this.selection.hasKey(key)) this.selection.remove(key);else this.selection.add(key);\n        };\n\n        MouseHandler.prototype.onShortcut = function (code) {\n          return this.state.onShortcut(code);\n        };\n\n        MouseHandler.prototype.onWheel = function (evt) {\n          return this.state.onMouseWheel(evt);\n        };\n\n        MouseHandler.prototype.onDragStart = function (evt) {\n          this.state.onDragStart(evt);\n        };\n\n        MouseHandler.prototype.onDragEnd = function (evt) {\n          this.state.onDragEnd(evt);\n        }; // utils\n\n\n        MouseHandler.prototype.getSnappedPos = function (evt, pos, isHorizontal) {\n          if (!this.settings.snapToGrid || evt.modifiers & KeyCode_1.ModifierKey.Ctrl) return pos;\n          return ModelUtils_1.ModelUtils.getSnappedPos(this.model, this.settings.gridSize, pos, isHorizontal);\n        };\n\n        MouseHandler.prototype.getSnappedPoint = function (evt, point, additionalSnappedPoint) {\n          var x = this.getSnappedPos(evt, point.x, true);\n          var y = this.getSnappedPos(evt, point.y, false);\n          if (additionalSnappedPoint === undefined) return new Utils_1.Point(x, y);else {\n            if (Math.pow(point.x - x, 2) + Math.pow(point.y - y, 2) < Math.pow(point.x - additionalSnappedPoint.x, 2) + Math.pow(point.y - additionalSnappedPoint.y, 2)) return new Utils_1.Point(x, y);else return additionalSnappedPoint;\n          }\n        };\n\n        MouseHandler.prototype.tryUpdateModelSize = function (processPoints) {\n          ModelUtils_1.ModelUtils.tryUpdateModelSize(this.history, this.model, processPoints);\n        };\n\n        MouseHandler.prototype.raiseDragStart = function (keys) {\n          this.eventManager.onDocumentDragStart(keys);\n        };\n\n        MouseHandler.prototype.raiseDragEnd = function (keys) {\n          this.eventManager.onDocumentDragEnd(keys);\n        };\n\n        MouseHandler.prototype.raiseDragScrollStart = function () {\n          this.eventManager.onDocumentDragScrollStart();\n        };\n\n        MouseHandler.prototype.raiseDragScrollEnd = function () {\n          this.eventManager.onDocumentDragScrollEnd();\n        };\n\n        MouseHandler.prototype.raiseClick = function (keys) {\n          this.eventManager.onDocumentClick(keys);\n        };\n\n        MouseHandler.prototype.tryRaiseUserAction = function (evt, callEvent) {\n          if (this.isUserAction(evt)) {\n            var item = this.model.findItem(evt.source.key);\n            item && this.nativeActions.raise1(function (l) {\n              return callEvent(l, item.toNative());\n            });\n          }\n        };\n\n        MouseHandler.prototype.isUserAction = function (evt) {\n          return evt.source && (evt.source.type === Event_1.MouseEventElementType.Shape || evt.source.type === Event_1.MouseEventElementType.Connector);\n        }; // switch state\n\n\n        MouseHandler.prototype.switchToDefaultState = function () {\n          this.switchState(this.defaultState);\n        };\n\n        MouseHandler.prototype.switchToMoveClonedShapeState = function (startPoint) {\n          this.switchState(new MouseHandlerMoveClonedShapeState_1.MouseHandlerMoveClonedShapeState(this, this.history, this.model, this.selection, this.visualizerManager, startPoint));\n        };\n\n        MouseHandler.prototype.switchState = function (state) {\n          if (this.state) this.state.finish();\n          this.state = state;\n          this.state.start();\n        };\n\n        MouseHandler.prototype.notifyReadOnlyChanged = function (readOnly) {\n          this.readOnly = readOnly;\n          this.initializeDefaultState();\n        };\n\n        return MouseHandler;\n      }();\n\n      exports.MouseHandler = MouseHandler;\n      /***/\n    },\n    /* 265 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics201 = function extendStatics(d, b) {\n          _extendStatics201 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics201(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics201(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerMoveConnectorPointStateBase_1 = __webpack_require__(119);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var ConnectorProperties_1 = __webpack_require__(24);\n\n      var MouseHandlerMoveConnectorPointState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorPointState, _super);\n\n        function MouseHandlerMoveConnectorPointState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerMoveConnectorPointState.prototype.onMouseDown = function (evt) {\n          this.connector = this.model.findConnector(evt.source.key);\n          this.pointIndex = parseInt(evt.source.value);\n\n          if (this.pointIndex === 0) {\n            this.pointPosition = Connector_1.ConnectorPosition.Begin;\n          } else if (this.pointIndex === this.connector.points.length - 1) {\n            this.pointPosition = Connector_1.ConnectorPosition.End;\n          }\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerMoveConnectorPointState.prototype.onApplyChanges = function (evt) {\n          if (this.connector.properties.lineOption !== ConnectorProperties_1.ConnectorLineOption.Orthogonal || this.pointIndex === 0 || this.pointIndex === this.connector.points.length - 1) _super.prototype.onApplyChanges.call(this, evt);\n        };\n\n        MouseHandlerMoveConnectorPointState.prototype.onFinishWithChanges = function () {\n          _super.prototype.onFinishWithChanges.call(this);\n\n          ModelUtils_1.ModelUtils.removeUnnecessaryConnectorPoints(this.history, this.connector);\n        };\n\n        MouseHandlerMoveConnectorPointState.prototype.getSnappedPoint = function (evt, point) {\n          var points = this.connector.points;\n          var index = this.pointIndex;\n\n          if (0 < index && index < points.length - 1) {\n            var tg = (points[index + 1].y - points[index - 1].y) / (points[index + 1].x - points[index - 1].x);\n            var x = point.x;\n            var y = points[index + 1].y - (points[index + 1].x - x) * tg;\n            return this.handler.getSnappedPoint(evt, point, new Utils_1.Point(x, y));\n          }\n\n          return this.handler.getSnappedPoint(evt, point);\n        };\n\n        return MouseHandlerMoveConnectorPointState;\n      }(MouseHandlerMoveConnectorPointStateBase_1.MouseHandlerMoveConnectorPointStateBase);\n\n      exports.MouseHandlerMoveConnectorPointState = MouseHandlerMoveConnectorPointState;\n      /***/\n    },\n    /* 266 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics202 = function extendStatics(d, b) {\n          _extendStatics202 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics202(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics202(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Event_1 = __webpack_require__(10);\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(26);\n\n      var Model_1 = __webpack_require__(19);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var MouseHandlerResizeShapeState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerResizeShapeState, _super);\n\n        function MouseHandlerResizeShapeState(handler, history, model, selection, visualizerManager) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          _this.startScrollLeft = 0;\n          _this.startScrollTop = 0;\n          _this.rotation = 0;\n          return _this;\n        }\n\n        MouseHandlerResizeShapeState.prototype.start = function () {\n          _super.prototype.start.call(this);\n        };\n\n        MouseHandlerResizeShapeState.prototype.finish = function () {\n          this.visualizerManager.resetResizeInfo();\n          this.visualizerManager.resetExtensionLines();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerResizeShapeState.prototype.onMouseDown = function (evt) {\n          var source = parseInt(evt.source.value);\n          this.resizeEventSource = source;\n          this.startPoint = evt.modelPoint;\n          this.lockH = source == Event_1.ResizeEventSource.ResizeBox_S || source == Event_1.ResizeEventSource.ResizeBox_N;\n          this.lockV = source == Event_1.ResizeEventSource.ResizeBox_E || source == Event_1.ResizeEventSource.ResizeBox_W;\n          this.sideH = source == Event_1.ResizeEventSource.ResizeBox_E || source == Event_1.ResizeEventSource.ResizeBox_NE || source == Event_1.ResizeEventSource.ResizeBox_SE;\n          this.sideV = source == Event_1.ResizeEventSource.ResizeBox_SE || source == Event_1.ResizeEventSource.ResizeBox_S || source == Event_1.ResizeEventSource.ResizeBox_SW;\n          this.shapes = this.selection.getSelectedShapes();\n\n          if (this.shapes.length === 0) {\n            this.handler.switchToDefaultState();\n            return;\n          }\n\n          this.connectors = this.selection.getSelectedConnectors();\n          this.startRectangle = Model_1.DiagramModel.getRectangle(this.shapes);\n          this.startShapeSizes = this.shapes.map(function (shape) {\n            return shape.size.clone();\n          });\n          this.startShapePositions = this.shapes.map(function (shape) {\n            return shape.position.clone();\n          });\n          this.startConnectorPoints = this.connectors.map(function (c) {\n            return c.points.map(function (p) {\n              return p.clone();\n            });\n          });\n          this.lockAspectRatio = !!(evt.modifiers & KeyCode_1.ModifierKey.Shift);\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerResizeShapeState.prototype.onMouseMove = function (evt) {\n          _super.prototype.onMouseMove.call(this, evt);\n\n          var shapes = this.selection.getSelectedShapes();\n          this.visualizerManager.setExtensionLines(shapes);\n        };\n\n        MouseHandlerResizeShapeState.prototype.onApplyChanges = function (evt) {\n          var _this = this;\n\n          var rectangle = Model_1.DiagramModel.getRectangle(this.shapes);\n          var size = this.getSize(evt, rectangle.position, this.startRectangle.size);\n          var pos = this.getPosition(evt, size, this.startRectangle.size, this.startRectangle.position);\n          var ratioX = size.width / this.startRectangle.width;\n          var ratioY = size.height / this.startRectangle.height;\n          this.shapes.forEach(function (shape, index) {\n            var shapeSize = new Utils_1.Size(_this.startShapeSizes[index].width * (shape.allowResizeHorizontally ? ratioX : 1), _this.startShapeSizes[index].height * (shape.allowResizeVertically ? ratioY : 1));\n            var shapePos = new Utils_1.Point(shape.allowResizeHorizontally ? pos.x + (_this.startShapePositions[index].x - _this.startRectangle.left) * ratioX : _this.startShapePositions[index].x, shape.allowResizeVertically ? pos.y + (_this.startShapePositions[index].y - _this.startRectangle.top) * ratioY : _this.startShapePositions[index].y);\n            ModelUtils_1.ModelUtils.setShapeSize(_this.history, _this.model, shape, shapePos, shapeSize);\n          });\n          this.connectors.forEach(function (connector, index) {\n            var startPtIndex = connector.beginItem ? 1 : 0;\n            var endPtIndex = connector.endItem ? connector.points.length - 2 : connector.points.length - 1;\n\n            for (var i = startPtIndex; i <= endPtIndex; i++) {\n              var connectorPtPos = new Utils_1.Point(pos.x + (_this.startConnectorPoints[index][i].x - _this.startRectangle.left) * ratioX, pos.y + (_this.startConnectorPoints[index][i].y - _this.startRectangle.top) * ratioY);\n              ModelUtils_1.ModelUtils.setConnectorPoint(_this.history, _this.model, connector, i, connectorPtPos);\n            }\n          });\n          var shapes = this.selection.getSelectedShapes(false, true);\n          shapes.forEach(function (shape) {\n            ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(_this.history, _this.model, shape);\n          });\n          this.tryUpdateModelSize();\n          this.visualizerManager.setResizeInfo(this.shapes);\n        };\n\n        MouseHandlerResizeShapeState.prototype.tryUpdateModelSize = function () {\n          var _this = this;\n\n          this.handler.tryUpdateModelSize(function (offsetLeft, offsetTop) {\n            _this.startShapePositions.forEach(function (pt) {\n              pt.x += offsetLeft;\n              pt.y += offsetTop;\n            });\n\n            _this.startConnectorPoints.forEach(function (connector) {\n              connector.forEach(function (pt) {\n                pt.x += offsetLeft;\n                pt.y += offsetTop;\n              });\n            });\n\n            _this.startRectangle.position.x += offsetLeft;\n            _this.startRectangle.position.y += offsetTop;\n            _this.startPoint.x += offsetLeft;\n            _this.startPoint.y += offsetTop;\n          });\n        };\n\n        MouseHandlerResizeShapeState.prototype.getDraggingElementKeys = function () {\n          return this.shapes.map(function (shape) {\n            return shape.key;\n          });\n        };\n\n        MouseHandlerResizeShapeState.prototype.getSize = function (evt, position, startSize) {\n          var absDeltaX = evt.modelPoint.x - (this.startScrollLeft - evt.scrollX) - this.startPoint.x;\n          var absDeltaY = evt.modelPoint.y - (this.startScrollTop - evt.scrollY) - this.startPoint.y;\n          var deltaX = absDeltaX * Math.cos(this.rotation) - -absDeltaY * Math.sin(this.rotation);\n          var deltaY = -(absDeltaX * Math.sin(this.rotation) + -absDeltaY * Math.cos(this.rotation));\n          var newWidth, newHeight;\n          deltaY = !this.sideV && deltaY > 0 ? Math.min(startSize.height + 1, deltaY) : deltaY;\n          deltaX = !this.sideH && deltaX > 0 ? Math.min(startSize.width + 1, deltaX) : deltaX;\n\n          if (!this.lockH && !this.lockV && this.lockAspectRatio) {\n            if (Math.abs(deltaX) > Math.abs(deltaY)) {\n              newWidth = this.sideH ? Math.max(MouseHandlerResizeShapeState.minSize, startSize.width + deltaX) : startSize.width - deltaX;\n              newHeight = startSize.height * (newWidth / startSize.width);\n            } else {\n              newHeight = this.sideV ? Math.max(MouseHandlerResizeShapeState.minSize, startSize.height + deltaY) : startSize.height - deltaY;\n              newWidth = startSize.width * (newHeight / startSize.height);\n            }\n          } else {\n            deltaX = this.lockH ? 0 : deltaX;\n            deltaY = this.lockV ? 0 : deltaY;\n            newWidth = Math.max(MouseHandlerResizeShapeState.minSize, this.sideH ? startSize.width + deltaX : startSize.width - deltaX);\n            newHeight = Math.max(MouseHandlerResizeShapeState.minSize, this.sideV ? startSize.height + deltaY : startSize.height - deltaY);\n          }\n\n          if (!this.lockH) newWidth = this.handler.getSnappedPos(evt, position.x + newWidth, true) - position.x;\n          if (!this.lockV) newHeight = this.handler.getSnappedPos(evt, position.y + newHeight, false) - position.y;\n          return new Utils_1.Size(newWidth, newHeight);\n        };\n\n        MouseHandlerResizeShapeState.prototype.getPosition = function (evt, size, startSize, startPosition) {\n          var x = startPosition.x;\n          var y = startPosition.y;\n\n          if (this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_N || this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_NE || this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_NW) {\n            y += startSize.height - size.height;\n            var snappedY = this.handler.getSnappedPos(evt, y, false);\n            size.height += y - snappedY;\n            y = snappedY;\n          }\n\n          if (this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_W || this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_NW || this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_SW) {\n            x += startSize.width - size.width;\n            var snappedX = this.handler.getSnappedPos(evt, x, true);\n            size.width += x - snappedX;\n            x = snappedX;\n          }\n\n          return new Utils_1.Point(x, y);\n        };\n\n        MouseHandlerResizeShapeState.minSize = 360;\n        return MouseHandlerResizeShapeState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerResizeShapeState = MouseHandlerResizeShapeState;\n      /***/\n    },\n    /* 267 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics203 = function extendStatics(d, b) {\n          _extendStatics203 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics203(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics203(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(26);\n\n      var AddConnectorPointHistoryItem_1 = __webpack_require__(120);\n\n      var MoveConnectorPointHistoryItem_1 = __webpack_require__(50);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var MouseHandlerMoveConnectorSideState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorSideState, _super);\n\n        function MouseHandlerMoveConnectorSideState(handler, history, model) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          return _this;\n        }\n\n        MouseHandlerMoveConnectorSideState.prototype.onMouseDown = function (evt) {\n          this.startPoint = evt.modelPoint;\n          this.connectorKey = evt.source.key;\n          this.pointIndex = parseInt(evt.source.value) + 1;\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerMoveConnectorSideState.prototype.onApplyChanges = function (evt) {\n          var point = this.getSnappedPoint(evt, evt.modelPoint);\n\n          if (!this.pointCreated) {\n            this.history.addAndRedo(new AddConnectorPointHistoryItem_1.AddConnectorPointHistoryItem(this.connectorKey, this.pointIndex, point));\n            this.pointCreated = true;\n          } else {\n            this.history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(this.connectorKey, this.pointIndex, point));\n          }\n\n          this.handler.tryUpdateModelSize();\n        };\n\n        MouseHandlerMoveConnectorSideState.prototype.onFinishWithChanges = function () {\n          ModelUtils_1.ModelUtils.removeUnnecessaryConnectorPoints(this.history, this.model.findConnector(this.connectorKey));\n        };\n\n        MouseHandlerMoveConnectorSideState.prototype.getDraggingElementKeys = function () {\n          return [this.connectorKey];\n        };\n\n        return MouseHandlerMoveConnectorSideState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerMoveConnectorSideState = MouseHandlerMoveConnectorSideState;\n      /***/\n    },\n    /* 268 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics204 = function extendStatics(d, b) {\n          _extendStatics204 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics204(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics204(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(26);\n\n      var ChangeShapeParametersHistoryItem_1 = __webpack_require__(102);\n\n      var MouseHandlerDragParameterPointState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDragParameterPointState, _super);\n\n        function MouseHandlerDragParameterPointState(handler, history, model) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          _this.startScrollLeft = 0;\n          _this.startScrollTop = 0;\n          return _this;\n        }\n\n        MouseHandlerDragParameterPointState.prototype.onMouseDown = function (evt) {\n          this.startPoint = evt.modelPoint;\n          this.shape = this.model.findShape(evt.source.key);\n          this.parameterPointKey = evt.source.value;\n          this.startParameters = this.shape.parameters.clone();\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerDragParameterPointState.prototype.onApplyChanges = function (evt) {\n          var offsetX = this.handler.getSnappedPos(evt, evt.modelPoint.x - this.startPoint.x, true);\n          var offsetY = this.handler.getSnappedPos(evt, evt.modelPoint.y - this.startPoint.y, false);\n          var parameters = this.startParameters.clone();\n          this.shape.description.modifyParameters(this.shape, parameters, offsetX, offsetY);\n          this.history.addAndRedo(new ChangeShapeParametersHistoryItem_1.ChangeShapeParametersHistoryItem(this.shape.key, parameters));\n        };\n\n        MouseHandlerDragParameterPointState.prototype.getDraggingElementKeys = function () {\n          return [this.shape.key];\n        };\n\n        return MouseHandlerDragParameterPointState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerDragParameterPointState = MouseHandlerDragParameterPointState;\n      /***/\n    },\n    /* 269 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics205 = function extendStatics(d, b) {\n          _extendStatics205 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics205(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics205(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Connector_1 = __webpack_require__(5);\n\n      var AddConnectionHistoryItem_1 = __webpack_require__(37);\n\n      var AddConnectorHistoryItem_1 = __webpack_require__(52);\n\n      var MouseHandlerMoveConnectorPointStateBase_1 = __webpack_require__(119);\n\n      var SetSelectionHistoryItem_1 = __webpack_require__(44);\n\n      var ChangeConnectorPropertyHistoryItem_1 = __webpack_require__(55);\n\n      var ChangeStyleHistoryItem_1 = __webpack_require__(46);\n\n      var ChangeStyleTextHistoryItem_1 = __webpack_require__(36);\n\n      var MouseHandlerCreateConnectorState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerCreateConnectorState, _super);\n\n        function MouseHandlerCreateConnectorState(handler, history, model, visualizerManager, selection, connectionPointIndex) {\n          var _this = _super.call(this, handler, history, model, visualizerManager) || this;\n\n          _this.selection = selection;\n          _this.connectionPointIndex = connectionPointIndex;\n          return _this;\n        }\n\n        MouseHandlerCreateConnectorState.prototype.onMouseDown = function (evt) {\n          if (this.connectionPointIndex === undefined) this.connectionPointIndex = parseInt(evt.source.value);\n          this.connectedItem = this.model.findItem(evt.source.key);\n          this.pointIndex = 1;\n          this.pointPosition = Connector_1.ConnectorPosition.End;\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerCreateConnectorState.prototype.onApplyChanges = function (evt) {\n          var _this = this;\n\n          var point = this.getSnappedPoint(evt, evt.modelPoint);\n\n          if (!this.connector) {\n            var historyItem = new AddConnectorHistoryItem_1.AddConnectorHistoryItem([this.connectedItem.getConnectionPointPosition(this.connectionPointIndex, point), point]);\n            this.history.addAndRedo(historyItem);\n            this.connector = this.model.findConnector(historyItem.connectorKey);\n            this.connector.properties.forEach(function (propertyName) {\n              _this.history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(_this.connector.key, propertyName, _this.selection.inputPosition.getConnectorPropertyDefaultValue(propertyName)));\n            });\n            this.connector.style.forEach(function (propertyName) {\n              _this.history.addAndRedo(new ChangeStyleHistoryItem_1.ChangeStyleHistoryItem(_this.connector.key, propertyName, _this.selection.inputPosition.getStylePropertyDefaultValue(propertyName)));\n            });\n            this.connector.styleText.forEach(function (propertyName) {\n              _this.history.addAndRedo(new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(_this.connector.key, propertyName, _this.selection.inputPosition.getStyleTextPropertyDefaultValue(propertyName)));\n            });\n            this.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(this.connector, this.connectedItem, this.connectionPointIndex, Connector_1.ConnectorPosition.Begin));\n          } else _super.prototype.onApplyChanges.call(this, evt);\n        };\n\n        MouseHandlerCreateConnectorState.prototype.onFinishWithChanges = function () {\n          _super.prototype.onFinishWithChanges.call(this);\n\n          this.history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(this.selection, [this.connector.key]));\n        };\n\n        return MouseHandlerCreateConnectorState;\n      }(MouseHandlerMoveConnectorPointStateBase_1.MouseHandlerMoveConnectorPointStateBase);\n\n      exports.MouseHandlerCreateConnectorState = MouseHandlerCreateConnectorState;\n      /***/\n    },\n    /* 270 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics206 = function extendStatics(d, b) {\n          _extendStatics206 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics206(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics206(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(26);\n\n      var AddConnectorPointHistoryItem_1 = __webpack_require__(120);\n\n      var MoveConnectorPointHistoryItem_1 = __webpack_require__(50);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var DiagramItem_1 = __webpack_require__(4);\n\n      var MouseHandlerMoveConnectorOrthogonalSideState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorOrthogonalSideState, _super);\n\n        function MouseHandlerMoveConnectorOrthogonalSideState(handler, history, model) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          return _this;\n        }\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.onMouseDown = function (evt) {\n          this.startPoint = evt.modelPoint;\n          this.connector = this.model.findConnector(evt.source.key);\n          var renderPointIndexes = evt.source.value.split(\"_\");\n          var renderPointIndex1 = parseInt(renderPointIndexes[0]);\n          var renderPointIndex2 = parseInt(renderPointIndexes[1]);\n          var points = this.connector.getRenderPoints(true);\n          this.renderPoint1 = points[renderPointIndex1].clone();\n          this.renderPoint2 = points[renderPointIndex2].clone();\n          this.isVerticalOrientation = this.renderPoint1.x === this.renderPoint2.x;\n\n          if (this.renderPoint1.pointIndex !== -1) {\n            this.pointIndex1 = this.renderPoint1.pointIndex;\n\n            if (this.pointIndex1 === 0) {\n              this.pointIndex1++;\n              this.correctEdgePoint(this.renderPoint1, this.renderPoint2, this.connector.beginItem, this.connector.beginConnectionPointIndex);\n            } else this.point1 = this.connector.points[this.pointIndex1];\n          } else this.pointIndex1 = this.findPointIndex(points, renderPointIndex1, false) + 1;\n\n          if (this.renderPoint2.pointIndex !== -1) {\n            this.pointIndex2 = this.renderPoint2.pointIndex;\n\n            if (this.pointIndex2 === this.connector.points.length - 1) {\n              this.correctEdgePoint(this.renderPoint2, this.renderPoint1, this.connector.endItem, this.connector.endConnectionPointIndex);\n            } else this.point2 = this.connector.points[this.pointIndex2];\n          } else this.pointIndex2 = this.findPointIndex(points, renderPointIndex2, true);\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.onApplyChanges = function (evt) {\n          var _this = this;\n\n          if (!this.pointCreated) {\n            var createdPoint1 = void 0,\n                createdPoint2 = void 0;\n\n            if (this.point1 === undefined) {\n              this.point1 = new Utils_1.Point(this.renderPoint1.x, this.renderPoint1.y);\n              this.history.addAndRedo(new AddConnectorPointHistoryItem_1.AddConnectorPointHistoryItem(this.connector.key, this.pointIndex1, this.point1));\n              createdPoint1 = this.point1;\n              this.pointIndex2++;\n            }\n\n            if (this.point2 === undefined) {\n              this.point2 = new Utils_1.Point(this.renderPoint2.x, this.renderPoint2.y);\n              this.history.addAndRedo(new AddConnectorPointHistoryItem_1.AddConnectorPointHistoryItem(this.connector.key, this.pointIndex2, this.point2));\n              createdPoint2 = this.point2;\n            }\n\n            ModelUtils_1.ModelUtils.removeUnnecessaryConnectorPoints(this.history, this.connector, [createdPoint1, createdPoint2], function (index) {\n              if (index < _this.pointIndex1) _this.pointIndex1--;\n              if (index < _this.pointIndex2) _this.pointIndex2--;\n            });\n            this.pointCreated = true;\n          }\n\n          var point = this.getSnappedPoint(evt, evt.modelPoint);\n\n          if (this.isVerticalOrientation) {\n            this.point1.x = point.x;\n            this.point2.x = point.x;\n          } else {\n            this.point1.y = point.y;\n            this.point2.y = point.y;\n          }\n\n          this.history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(this.connector.key, this.pointIndex1, this.point1));\n          this.history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(this.connector.key, this.pointIndex2, this.point2));\n          this.handler.tryUpdateModelSize();\n        };\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.onFinishWithChanges = function () {\n          ModelUtils_1.ModelUtils.removeUnnecessaryConnectorPoints(this.history, this.connector);\n        };\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.findPointIndex = function (points, index, direction) {\n          var point;\n\n          while (point = points[index]) {\n            if (point.pointIndex !== -1) return point.pointIndex;\n            index += direction ? 1 : -1;\n          }\n        };\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.correctEdgePoint = function (point, directionPoint, item, connectionPointIndex) {\n          var offset = 0;\n\n          if (item !== undefined) {\n            var side = item.getConnectionPointSideByIndex(connectionPointIndex);\n            var rect = item.rectangle;\n            offset = Connector_1.Connector.minOffset;\n\n            switch (side) {\n              case DiagramItem_1.ConnectionPointSide.South:\n                offset += rect.bottom - point.y;\n                break;\n\n              case DiagramItem_1.ConnectionPointSide.North:\n                offset += point.y - rect.top;\n                break;\n\n              case DiagramItem_1.ConnectionPointSide.East:\n                offset += rect.right - point.x;\n                break;\n\n              case DiagramItem_1.ConnectionPointSide.West:\n                offset += point.x - rect.left;\n                break;\n            }\n          }\n\n          if (this.isVerticalOrientation) {\n            if (point.y > directionPoint.y) point.y -= Math.min(offset, point.y - directionPoint.y);else point.y += Math.min(offset, directionPoint.y - point.y);\n          } else {\n            if (point.x > directionPoint.x) point.x -= Math.min(offset, point.x - directionPoint.x);else point.x += Math.min(offset, directionPoint.x - point.x);\n          }\n        };\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.getDraggingElementKeys = function () {\n          return [this.connector.key];\n        };\n\n        return MouseHandlerMoveConnectorOrthogonalSideState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerMoveConnectorOrthogonalSideState = MouseHandlerMoveConnectorOrthogonalSideState;\n      /***/\n    },\n    /* 271 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics207 = function extendStatics(d, b) {\n          _extendStatics207 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics207(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics207(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Event_1 = __webpack_require__(10);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(25);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var AddShapeHistoryItem_1 = __webpack_require__(51);\n\n      var SetSelectionHistoryItem_1 = __webpack_require__(44);\n\n      var ChangeStyleHistoryItem_1 = __webpack_require__(46);\n\n      var ChangeStyleTextHistoryItem_1 = __webpack_require__(36);\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(26);\n\n      var DeleteShapeHistoryItem_1 = __webpack_require__(91);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var MouseHandlerStateBase_1 = __webpack_require__(32);\n\n      var NON_DOCUMENT_TIMER = 500;\n      var LOCK_UPDATEPAGESIZE_TIMER = 300;\n\n      var MouseHandlerBeforeToolboxDraggingState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerBeforeToolboxDraggingState, _super);\n\n        function MouseHandlerBeforeToolboxDraggingState(handler, history, model, selection, visualizerManager) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.history = history;\n          _this.model = model;\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          _this.isModelEmpty = model.items.length === 0;\n          return _this;\n        }\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.cancelChanges = function () {\n          this.tryRemoveTimer();\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.onDragStart = function (evt) {\n          this.dragging = evt;\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.onDragEnd = function (evt) {\n          this.cancelChanges();\n          this.handler.switchToDefaultState();\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.onMouseMove = function (evt) {\n          var _this = this;\n\n          if (evt.source.type > Event_1.MouseEventElementType.Background) {\n            this.tryRemoveTimer();\n            this.switchToDraggingState(evt, false);\n          } else if (evt.source.type === Event_1.MouseEventElementType.Background && !this.isModelEmpty) {\n            this.savedEvt = evt;\n            if (this.nonPageAreaTimer === undefined) this.nonPageAreaTimer = setTimeout(function () {\n              return _this.switchToDraggingState(_this.savedEvt, true);\n            }, NON_DOCUMENT_TIMER);\n          } else if (this.nonPageAreaTimer !== undefined) this.tryRemoveTimer();\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.switchToDraggingState = function (evt, skipLockUpdatePageSize) {\n          this.handler.switchState(new MouseHandlerToolboxDraggingState(this.handler, this.history, this.model, this.selection, this.visualizerManager, skipLockUpdatePageSize));\n          this.handler.state.onDragStart(this.dragging);\n          this.handler.state.onMouseMove(evt);\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.tryRemoveTimer = function () {\n          if (this.nonPageAreaTimer !== undefined) {\n            clearTimeout(this.nonPageAreaTimer);\n            delete this.nonPageAreaTimer;\n          }\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.finish = function () {\n          this.tryRemoveTimer();\n        };\n\n        return MouseHandlerBeforeToolboxDraggingState;\n      }(MouseHandlerStateBase_1.MouseHandlerCancellableState);\n\n      exports.MouseHandlerBeforeToolboxDraggingState = MouseHandlerBeforeToolboxDraggingState;\n\n      var MouseHandlerToolboxDraggingState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerToolboxDraggingState, _super);\n\n        function MouseHandlerToolboxDraggingState(handler, history, model, selection, visualizerManager, skipLockUpdatePageSize) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n\n          if (!skipLockUpdatePageSize) {\n            _this.updatePageSizeTimer = setTimeout(function () {\n              _this.handler.tryUpdateModelSize();\n\n              delete _this.updatePageSizeTimer;\n            }, LOCK_UPDATEPAGESIZE_TIMER);\n          }\n\n          return _this;\n        }\n\n        MouseHandlerToolboxDraggingState.prototype.onMouseMove = function (evt) {\n          _super.prototype.onMouseMove.call(this, evt);\n\n          var shape = this.model.findShape(this.shapeKey);\n\n          if (shape) {\n            this.visualizerManager.setExtensionLines([shape]);\n            var container = ModelUtils_1.ModelUtils.findContainerByEventKey(this.model, this.selection, evt.source.key);\n            if (container && ModelUtils_1.ModelUtils.canInsertToContainer(this.model, shape, container)) this.visualizerManager.setContainerTarget(container, evt.source.type);else this.visualizerManager.resetContainerTarget();\n          }\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.getDraggingElementKeys = function () {\n          return this.shapeKey === undefined ? [] : [this.shapeKey];\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.onApplyChanges = function (evt) {\n          var _this = this;\n\n          if (evt.source.type === undefined) {\n            this.dragging.onCaptured(false);\n\n            if (this.shapeKey !== undefined && !this.deleteHistoryItem) {\n              this.deleteHistoryItem = new DeleteShapeHistoryItem_1.DeleteShapeHistoryItem(this.shapeKey);\n              this.history.addAndRedo(this.deleteHistoryItem);\n            }\n\n            return;\n          }\n\n          this.dragging.onCaptured(true);\n\n          if (this.shapeKey === undefined) {\n            this.startPoint = evt.modelPoint;\n            this.shapeKey = this.insertToolboxItem(evt);\n          }\n\n          if (this.deleteHistoryItem) {\n            this.history.undoTransactionTo(this.deleteHistoryItem);\n            delete this.deleteHistoryItem;\n          }\n\n          var pos = this.getPosition(evt, this.startShapePosition);\n          var shape = this.model.findShape(this.shapeKey);\n          ModelUtils_1.ModelUtils.setShapePosition(this.history, this.model, shape, pos);\n          ModelUtils_1.ModelUtils.updateMovingShapeConnections(this.history, shape, this.connectorsWithoutBeginItemInfo, this.connectorsWithoutEndItemInfo, function () {\n            _this.visualizerManager.resetConnectionTarget();\n\n            _this.visualizerManager.resetConnectionPoints();\n          }, function (shape, connectionPointIndex) {\n            _this.visualizerManager.setConnectionTarget(shape, Event_1.MouseEventElementType.Shape);\n\n            _this.visualizerManager.setConnectionPoints(shape, Event_1.MouseEventElementType.Shape, connectionPointIndex, true);\n          });\n          ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(this.history, this.model, shape);\n          var container = ModelUtils_1.ModelUtils.findContainerByEventKey(this.model, this.selection, evt.source.key);\n          if (shape && container && ModelUtils_1.ModelUtils.canInsertToContainer(this.model, shape, container)) ModelUtils_1.ModelUtils.insertToContainer(this.history, this.model, shape, container);else ModelUtils_1.ModelUtils.removeFromContainer(this.history, this.model, shape);\n\n          if (this.updatePageSizeTimer === undefined) {\n            this.handler.tryUpdateModelSize(function (offsetLeft, offsetTop) {\n              _this.connectorsWithoutBeginItemInfo.forEach(function (pi) {\n                pi.point.x += offsetLeft;\n                pi.point.y += offsetTop;\n              });\n\n              _this.connectorsWithoutEndItemInfo.forEach(function (pi) {\n                pi.point.x += offsetLeft;\n                pi.point.y += offsetTop;\n              });\n            });\n          }\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.onFinishWithChanges = function () {\n          this.history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(this.selection, [this.shapeKey]));\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.onDragStart = function (evt) {\n          this.dragging = evt;\n          this.connectorsWithoutBeginItemInfo = ModelUtils_1.ModelUtils.getConnectorsWithoutBeginItemInfo(this.model);\n          this.connectorsWithoutEndItemInfo = ModelUtils_1.ModelUtils.getConnectorsWithoutEndItemInfo(this.model);\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.onDragEnd = function (evt) {\n          if (this.shapeKey !== undefined && evt.source.type === undefined) this.cancelChanges();\n          this.handler.switchToDefaultState();\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.finish = function () {\n          this.visualizerManager.resetExtensionLines();\n          this.visualizerManager.resetContainerTarget();\n          this.visualizerManager.resetConnectionTarget();\n          this.visualizerManager.resetConnectionPoints();\n          this.dragging.onFinishDragging();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.updateShapeProperties = function (itemKey) {\n          var _this = this;\n\n          this.selection.inputPosition.stylePropertiesDefault.forEach(function (propertyName) {\n            _this.history.addAndRedo(new ChangeStyleHistoryItem_1.ChangeStyleHistoryItem(itemKey, propertyName, _this.selection.inputPosition.getStylePropertyDefaultValue(propertyName)));\n          });\n          this.selection.inputPosition.styleTextPropertiesDefault.forEach(function (propertyName) {\n            _this.history.addAndRedo(new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(itemKey, propertyName, _this.selection.inputPosition.getStyleTextPropertyValue(propertyName)));\n          });\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.insertToolboxItem = function (evt) {\n          var description = ShapeDescriptionManager_1.ShapeDescriptionManager.get(this.dragging.data);\n          this.startShapePosition = this.getSnappedPoint(evt, new Utils_1.Point(evt.modelPoint.x - description.defaultSize.width / 2, evt.modelPoint.y - description.defaultSize.height / 2));\n          var historyItem = new AddShapeHistoryItem_1.AddShapeHistoryItem(this.dragging.data, this.startShapePosition);\n          this.history.addAndRedo(historyItem);\n          this.updateShapeProperties(historyItem.shapeKey);\n          return historyItem.shapeKey;\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.getPosition = function (evt, basePoint) {\n          return this.getSnappedPoint(evt, new Utils_1.Point(basePoint.x + evt.modelPoint.x - this.startPoint.x, basePoint.y + evt.modelPoint.y - this.startPoint.y));\n        };\n\n        return MouseHandlerToolboxDraggingState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerToolboxDraggingState = MouseHandlerToolboxDraggingState;\n      /***/\n    },\n    /* 272 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics208 = function extendStatics(d, b) {\n          _extendStatics208 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics208(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics208(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(26);\n\n      var ChangeConnectorTextPositionHistoryItem_1 = __webpack_require__(273);\n\n      var ChangeConnectorTextHistoryItem_1 = __webpack_require__(54);\n\n      var MouseHandlerMoveConnectorTextState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorTextState, _super);\n\n        function MouseHandlerMoveConnectorTextState(handler, history, model) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          return _this;\n        }\n\n        MouseHandlerMoveConnectorTextState.prototype.onMouseDown = function (evt) {\n          this.connector = this.model.findConnector(evt.source.key);\n          this.position = parseFloat(evt.source.value);\n          this.text = this.connector.getText(this.position);\n          this.savedText = \"\";\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerMoveConnectorTextState.prototype.onApplyChanges = function (evt) {\n          var newPosition = this.connector.getTextPositionByPoint(evt.modelPoint);\n\n          if (newPosition != this.position) {\n            var text = this.connector.getText(newPosition);\n\n            if (text !== \"\" && text !== this.text) {\n              this.history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(this.connector, newPosition, \"\"));\n              this.savedText = text;\n            }\n\n            this.history.addAndRedo(new ChangeConnectorTextPositionHistoryItem_1.ChangeConnectorTextPositionHistoryItem(this.connector, this.position, newPosition));\n\n            if (this.savedText !== \"\" && this.savedText !== text) {\n              this.history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(this.connector, this.position, this.savedText));\n              this.savedText = \"\";\n            }\n\n            this.position = newPosition;\n          }\n        };\n\n        MouseHandlerMoveConnectorTextState.prototype.getDraggingElementKeys = function () {\n          return [this.connector.key];\n        };\n\n        return MouseHandlerMoveConnectorTextState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerMoveConnectorTextState = MouseHandlerMoveConnectorTextState;\n      /***/\n    },\n    /* 273 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics209 = function extendStatics(d, b) {\n          _extendStatics209 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics209(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics209(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangeConnectorTextPositionHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorTextPositionHistoryItem, _super);\n\n        function ChangeConnectorTextPositionHistoryItem(connector, position, newPosition) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connector.key;\n          _this.position = position;\n          _this.newPosition = newPosition;\n          return _this;\n        }\n\n        ChangeConnectorTextPositionHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.changeConnectorTextPosition(connector, this.position, this.newPosition);\n        };\n\n        ChangeConnectorTextPositionHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.changeConnectorTextPosition(connector, this.newPosition, this.position);\n        };\n\n        return ChangeConnectorTextPositionHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeConnectorTextPositionHistoryItem = ChangeConnectorTextPositionHistoryItem;\n      /***/\n    },\n    /* 274 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics210 = function extendStatics(d, b) {\n          _extendStatics210 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics210(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics210(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerStateBase_1 = __webpack_require__(32);\n\n      var ToggleShapeExpandedHistoryItem_1 = __webpack_require__(275);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var MouseHandlerToggleShapeExpandedState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerToggleShapeExpandedState, _super);\n\n        function MouseHandlerToggleShapeExpandedState(handler, history, model) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.history = history;\n          _this.model = model;\n          return _this;\n        }\n\n        MouseHandlerToggleShapeExpandedState.prototype.onMouseUp = function (evt) {\n          var shape = this.model.findShape(evt.source.key);\n\n          if (shape) {\n            this.history.beginTransaction();\n            this.history.addAndRedo(new ToggleShapeExpandedHistoryItem_1.ToggleShapeExpandedHistoryItem(shape));\n            ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(this.history, this.model, shape);\n            ModelUtils_1.ModelUtils.updateContainerConnectorsAttachedPoints(this.history, this.model, shape);\n            this.handler.tryUpdateModelSize();\n            this.history.endTransaction();\n            this.handler.raiseClick([shape.key]);\n          }\n\n          this.handler.switchToDefaultState();\n        };\n\n        return MouseHandlerToggleShapeExpandedState;\n      }(MouseHandlerStateBase_1.MouseHandlerStateBase);\n\n      exports.MouseHandlerToggleShapeExpandedState = MouseHandlerToggleShapeExpandedState;\n      /***/\n    },\n    /* 275 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics211 = function extendStatics(d, b) {\n          _extendStatics211 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics211(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics211(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ToggleShapeExpandedHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ToggleShapeExpandedHistoryItem, _super);\n\n        function ToggleShapeExpandedHistoryItem(shape) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = shape.key;\n          _this.expanded = shape.expanded;\n          return _this;\n        }\n\n        ToggleShapeExpandedHistoryItem.prototype.redo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          manipulator.changeShapeExpanded(shape, !this.expanded);\n        };\n\n        ToggleShapeExpandedHistoryItem.prototype.undo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          manipulator.changeShapeExpanded(shape, this.expanded);\n        };\n\n        return ToggleShapeExpandedHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ToggleShapeExpandedHistoryItem = ToggleShapeExpandedHistoryItem;\n      /***/\n    },\n    /* 276 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics212 = function extendStatics(d, b) {\n          _extendStatics212 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics212(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics212(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Event_1 = __webpack_require__(10);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var MouseHandlerStateBase_1 = __webpack_require__(32);\n\n      var MouseHandlerSelectionState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerSelectionState, _super);\n\n        function MouseHandlerSelectionState(handler, selection, visualizerManager) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          return _this;\n        }\n\n        MouseHandlerSelectionState.prototype.finish = function () {\n          this.handler.raiseDragEnd([]);\n          this.visualizerManager.resetSelectionRectangle();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerSelectionState.prototype.cancelChanges = function () {};\n\n        MouseHandlerSelectionState.prototype.onMouseDown = function (evt) {\n          this.startPoint = evt.modelPoint;\n          this.handler.raiseDragStart([]);\n        };\n\n        MouseHandlerSelectionState.prototype.onMouseMove = function (evt) {\n          if (evt.button !== Event_1.MouseButton.Left) {\n            this.handler.switchToDefaultState();\n          } else {\n            this.rectangle = Utils_1.Rectangle.createByPoints(this.startPoint, evt.modelPoint);\n            this.visualizerManager.setSelectionRectangle(this.rectangle);\n          }\n        };\n\n        MouseHandlerSelectionState.prototype.onMouseUp = function (evt) {\n          if (this.rectangle !== undefined) this.selection.selectRect(this.rectangle);else this.selection.set([]);\n          this.rectangle = undefined;\n          this.handler.switchToDefaultState();\n        };\n\n        return MouseHandlerSelectionState;\n      }(MouseHandlerStateBase_1.MouseHandlerCancellableState);\n\n      exports.MouseHandlerSelectionState = MouseHandlerSelectionState;\n      /***/\n    },\n    /* 277 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics213 = function extendStatics(d, b) {\n          _extendStatics213 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics213(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics213(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerStateBase_1 = __webpack_require__(32);\n\n      var Event_1 = __webpack_require__(10);\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var __1 = __webpack_require__(8);\n\n      var CommandManager_1 = __webpack_require__(48);\n\n      var MouseHandlerZoomOnWheelState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerZoomOnWheelState, _super);\n\n        function MouseHandlerZoomOnWheelState(handler, settings, view, bars) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.settings = settings;\n          _this.view = view;\n          _this.bars = bars;\n          return _this;\n        }\n\n        MouseHandlerZoomOnWheelState.prototype.onMouseWheel = function (evt) {\n          if (!this.trySwitchToDefault(evt)) {\n            this.settings.zoomLevel = this.view.getNextStepZoom(evt.deltaY < 0);\n            this.bars.updateItemsState([CommandManager_1.DiagramCommand.ZoomLevel]);\n            if (evt.source.type === Event_1.MouseEventElementType.Background) this.view.resetScroll();else {\n              this.view.scrollTo(evt.modelPoint, evt.offsetPoint);\n              this.view.normalize();\n            }\n            evt.preventDefault = true;\n            return true;\n          } else return this.handler.state.onMouseWheel(evt);\n        };\n\n        MouseHandlerZoomOnWheelState.prototype.onMouseUp = function (evt) {\n          this.handler.switchToDefaultState();\n          this.handler.state.onMouseUp(evt);\n        };\n\n        MouseHandlerZoomOnWheelState.prototype.onMouseDown = function (evt) {\n          this.handler.switchToDefaultState();\n          this.handler.state.onMouseDown(evt);\n        };\n\n        MouseHandlerZoomOnWheelState.prototype.onMouseMove = function (evt) {\n          this.trySwitchToDefault(evt) && this.handler.state.onMouseMove(evt);\n        };\n\n        MouseHandlerZoomOnWheelState.prototype.trySwitchToDefault = function (evt) {\n          if (!(evt.modifiers & KeyCode_1.ModifierKey.Ctrl)) {\n            this.handler.switchToDefaultState();\n            return true;\n          }\n        };\n\n        MouseHandlerZoomOnWheelState.prototype.start = function () {\n          _super.prototype.start.call(this);\n\n          this.settings.zoomLevel = this.view.getZoom();\n\n          if (this.settings.autoZoom !== __1.AutoZoomMode.Disabled) {\n            this.settings.autoZoom = __1.AutoZoomMode.Disabled;\n            this.bars.updateItemsState([CommandManager_1.DiagramCommand.SwitchAutoZoom, CommandManager_1.DiagramCommand.ToggleAutoZoom]);\n          }\n        };\n\n        return MouseHandlerZoomOnWheelState;\n      }(MouseHandlerStateBase_1.MouseHandlerStateBase);\n\n      exports.MouseHandlerZoomOnWheelState = MouseHandlerZoomOnWheelState;\n      /***/\n    },\n    /* 278 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics214 = function extendStatics(d, b) {\n          _extendStatics214 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics214(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics214(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerMoveClonedShapeState_1 = __webpack_require__(78);\n\n      var MouseHandlerMoveShapeOrthogonallyState_1 = __webpack_require__(279);\n\n      var MouseHandlerMoveShapeState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveShapeState, _super);\n\n        function MouseHandlerMoveShapeState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerMoveShapeState.prototype.onMouseMove = function (evt) {\n          _super.prototype.onMouseMove.call(this, evt);\n\n          this.switchToMoveClonedShapeState(evt);\n        };\n\n        MouseHandlerMoveShapeState.prototype.switchToMoveClonedShapeState = function (evt) {\n          if (MouseHandlerMoveClonedShapeState_1.MouseHandlerMoveClonedShapeState.isMoveClonedShapeEvent(evt)) {\n            this.cancelChanges();\n            this.handler.switchToMoveClonedShapeState(this.startPoint);\n            this.handler.onMouseDown(evt);\n          }\n        };\n\n        return MouseHandlerMoveShapeState;\n      }(MouseHandlerMoveShapeOrthogonallyState_1.MouseHandlerMoveShapeOrthogonallyState);\n\n      exports.MouseHandlerMoveShapeState = MouseHandlerMoveShapeState;\n      /***/\n    },\n    /* 279 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics215 = function extendStatics(d, b) {\n          _extendStatics215 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics215(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics215(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var MouseHandlerMoveShapeStateBase_1 = __webpack_require__(121);\n\n      var MouseHandlerMoveShapeOrthogonallyState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveShapeOrthogonallyState, _super);\n\n        function MouseHandlerMoveShapeOrthogonallyState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerMoveShapeOrthogonallyState.prototype.onApplyChanges = function (evt) {\n          this.calculateFixedPosition(evt);\n\n          _super.prototype.onApplyChanges.call(this, evt);\n        };\n\n        MouseHandlerMoveShapeOrthogonallyState.prototype.getXPosition = function (evt, baseX) {\n          return this.fixedX ? baseX : _super.prototype.getXPosition.call(this, evt, baseX);\n        };\n\n        MouseHandlerMoveShapeOrthogonallyState.prototype.getYPosition = function (evt, baseY) {\n          return this.fixedY ? baseY : _super.prototype.getYPosition.call(this, evt, baseY);\n        };\n\n        MouseHandlerMoveShapeOrthogonallyState.prototype.calculateFixedPosition = function (evt) {\n          this.fixedX = false;\n          this.fixedY = false;\n\n          if (evt.modifiers & KeyCode_1.ModifierKey.Shift) {\n            var dx = Math.abs(this.startPoint.x - evt.modelPoint.x);\n            var dy = Math.abs(this.startPoint.y - evt.modelPoint.y);\n            if (dx < dy) this.fixedX = true;else this.fixedY = true;\n          }\n        };\n\n        return MouseHandlerMoveShapeOrthogonallyState;\n      }(MouseHandlerMoveShapeStateBase_1.MouseHandlerMoveShapeStateBase);\n\n      exports.MouseHandlerMoveShapeOrthogonallyState = MouseHandlerMoveShapeOrthogonallyState;\n      /***/\n    },\n    /* 280 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics216 = function extendStatics(d, b) {\n          _extendStatics216 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics216(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics216(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerDefaultReadOnlyState_1 = __webpack_require__(124);\n\n      var MouseHandlerDefaultReadOnlyTouchState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDefaultReadOnlyTouchState, _super);\n\n        function MouseHandlerDefaultReadOnlyTouchState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.canDragObjectOnMouseDown = function (key) {\n          return false;\n        };\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.canClearSelectionOnMouseDown = function () {\n          return true;\n        };\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.processOnMouseMoveAfterLimit = function (evt) {\n          this.startScrolling(evt);\n        };\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.canSelectOnMouseUp = function (key) {\n          return !this.inSelection(key);\n        };\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.canClearSelectionOnMouseUp = function () {\n          return false;\n        };\n\n        return MouseHandlerDefaultReadOnlyTouchState;\n      }(MouseHandlerDefaultReadOnlyState_1.MouseHandlerDefaultReadOnlyState);\n\n      exports.MouseHandlerDefaultReadOnlyTouchState = MouseHandlerDefaultReadOnlyTouchState;\n      /***/\n    },\n    /* 281 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics217 = function extendStatics(d, b) {\n          _extendStatics217 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics217(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics217(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var MouseHandlerDefaultState_1 = __webpack_require__(118);\n\n      var MouseHandlerZoomOnPinchState_1 = __webpack_require__(282);\n\n      var MouseHandlerDefaultTouchState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDefaultTouchState, _super);\n\n        function MouseHandlerDefaultTouchState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerDefaultTouchState.prototype.updateConnectionsOnMouseMove = function (evt) {};\n\n        MouseHandlerDefaultTouchState.prototype.canDragObjectOnMouseDown = function (key) {\n          return this.inSelection(key);\n        };\n\n        MouseHandlerDefaultTouchState.prototype.canClearSelectionOnMouseDown = function () {\n          return true;\n        };\n\n        MouseHandlerDefaultTouchState.prototype.processOnMouseMoveAfterLimit = function (evt) {\n          if (evt.touches.length > 1) this.startZooming(evt);else this.startScrolling(evt);\n        };\n\n        MouseHandlerDefaultTouchState.prototype.startZooming = function (evt) {\n          this.handler.switchState(new MouseHandlerZoomOnPinchState_1.MouseHandlerZoomOnPinchState(this.handler, this.selection, this.settings, this.view, this.bars));\n        };\n\n        MouseHandlerDefaultTouchState.prototype.canSelectOnMouseUp = function (key) {\n          return !this.inSelection(key);\n        };\n\n        MouseHandlerDefaultTouchState.prototype.canClearSelectionOnMouseUp = function () {\n          return false;\n        };\n\n        return MouseHandlerDefaultTouchState;\n      }(MouseHandlerDefaultState_1.MouseHandlerDefaultState);\n\n      exports.MouseHandlerDefaultTouchState = MouseHandlerDefaultTouchState;\n      /***/\n    },\n    /* 282 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics218 = function extendStatics(d, b) {\n          _extendStatics218 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics218(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics218(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DiagramSettings_1 = __webpack_require__(35);\n\n      var CommandManager_1 = __webpack_require__(48);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var MouseHandlerScrollingState_1 = __webpack_require__(123);\n\n      var PINCH_CHANGE_DISTANCE = 1;\n\n      var MouseHandlerZoomOnPinchState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerZoomOnPinchState, _super);\n\n        function MouseHandlerZoomOnPinchState(handler, selection, settings, view, bars) {\n          var _this = _super.call(this, handler, view, selection) || this;\n\n          _this.selection = selection;\n          _this.settings = settings;\n          _this.view = view;\n          _this.bars = bars;\n          return _this;\n        }\n\n        MouseHandlerZoomOnPinchState.prototype.onMouseDown = function (evt) {\n          _super.prototype.onMouseDown.call(this, evt);\n\n          if (evt.touches.length > 1) {\n            this.startDistance = this.getTouchDistance(evt);\n            this.startZoomLevel = this.settings.zoomLevel;\n            this.prevDistance = this.startDistance;\n          }\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.onMouseMove = function (evt) {\n          if (evt.touches.length > 1) {\n            var distance = this.getTouchDistance(evt);\n\n            if (Math.abs(this.prevDistance - distance) > PINCH_CHANGE_DISTANCE) {\n              this.settings.zoomLevel = this.startZoomLevel * (distance / this.startDistance);\n              this.bars.updateItemsState([CommandManager_1.DiagramCommand.ZoomLevel]);\n              this.view.scrollTo(this.getMiddleLayoutPoint(evt), this.getMiddleAbsPoint(evt));\n              this.view.normalize();\n              this.prevDistance = distance;\n            }\n          }\n\n          _super.prototype.onMouseMove.call(this, evt);\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.onMouseUp = function (evt) {\n          if (evt.touches.length === 0) {\n            setTimeout(function () {\n              this.handler.switchToDefaultState();\n            }.bind(this), 1);\n          }\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.start = function () {\n          _super.prototype.start.call(this);\n\n          this.settings.zoomLevel = this.view.getZoom();\n\n          if (this.settings.autoZoom !== DiagramSettings_1.AutoZoomMode.Disabled) {\n            this.settings.autoZoom = DiagramSettings_1.AutoZoomMode.Disabled;\n            this.bars.updateItemsState([CommandManager_1.DiagramCommand.SwitchAutoZoom, CommandManager_1.DiagramCommand.ToggleAutoZoom]);\n          }\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.getTouchDistance = function (evt) {\n          var pt0 = new Utils_1.Point(evt.touches[0].offsetPoint.x, evt.touches[0].offsetPoint.y);\n          var pt1 = new Utils_1.Point(evt.touches[1].offsetPoint.x, evt.touches[1].offsetPoint.y);\n          return Utils_1.GeometryUtils.getDistance(pt0, pt1);\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.getPointByEvent = function (evt) {\n          return this.getMiddleAbsPoint(evt);\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.getMiddleAbsPoint = function (evt) {\n          if (evt.touches.length > 1) return MouseHandlerZoomOnPinchState.getMiddlePointByEvent(evt, function (touch) {\n            return touch.offsetPoint;\n          });\n          return evt.offsetPoint;\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.getMiddleLayoutPoint = function (evt) {\n          if (evt.touches.length > 1) return MouseHandlerZoomOnPinchState.getMiddlePointByEvent(evt, function (touch) {\n            return touch.modelPoint;\n          });\n          return evt.modelPoint;\n        };\n\n        MouseHandlerZoomOnPinchState.getMiddlePointByEvent = function (evt, getPoint) {\n          if (evt.touches.length > 1) {\n            return new Utils_1.Point((getPoint(evt.touches[0]).x + getPoint(evt.touches[1]).x) / 2, (getPoint(evt.touches[0]).y + getPoint(evt.touches[1]).y) / 2);\n          }\n        };\n\n        return MouseHandlerZoomOnPinchState;\n      }(MouseHandlerScrollingState_1.MouseHandlerScrollingState);\n\n      exports.MouseHandlerZoomOnPinchState = MouseHandlerZoomOnPinchState;\n      /***/\n    },\n    /* 283 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ChangeShapeTextHistoryItem_1 = __webpack_require__(284);\n\n      var Event_1 = __webpack_require__(10);\n\n      var KeyCode_1 = __webpack_require__(16);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var ChangeConnectorTextHistoryItem_1 = __webpack_require__(54);\n\n      var TextInputHandler =\n      /** @class */\n      function () {\n        function TextInputHandler(control) {\n          this.control = control;\n        }\n\n        TextInputHandler.prototype.startTextInput = function (item, position) {\n          if (item.isLocked || !item.enableText || !item.allowEditText || this.control.settings.readOnly) return;\n          this.control.beginUpdate();\n          this.textInputItem = item;\n\n          if (this.textInputItem instanceof Shape_1.Shape) {\n            var textRect = this.textInputItem.textEditRectangle;\n            this.control.eventManager.raiseTextInputStart(this.textInputItem, this.textInputItem.text, textRect.position, textRect.size);\n          }\n\n          if (this.textInputItem instanceof Connector_1.Connector) {\n            this.textInputPosition = position;\n            this.control.eventManager.raiseTextInputStart(this.textInputItem, this.textInputItem.getText(this.textInputPosition), this.textInputItem.getTextPoint(this.textInputPosition));\n          }\n        };\n\n        TextInputHandler.prototype.endTextInput = function () {\n          var textInputItem = this.textInputItem;\n          delete this.textInputItem;\n          this.control.eventManager.raiseTextInputEnd(textInputItem);\n          this.control.endUpdate();\n        };\n\n        TextInputHandler.prototype.applyTextInput = function (text) {\n          var textInputItem = this.textInputItem;\n          var textInputPosition = this.textInputPosition; // call this first to be able measure text on changes\n\n          this.endTextInput();\n\n          if (textInputItem instanceof Shape_1.Shape) {\n            if (textInputItem.text !== text) this.control.history.addAndRedo(new ChangeShapeTextHistoryItem_1.ChangeShapeTextHistoryItem(textInputItem, text));\n          } else if (textInputItem instanceof Connector_1.Connector) {\n            if (textInputItem.getText(textInputPosition) !== text) this.control.history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(textInputItem, textInputPosition, text));\n          }\n        };\n\n        TextInputHandler.prototype.cancelTextInput = function () {\n          this.endTextInput();\n        };\n\n        TextInputHandler.prototype.isTextInputActive = function () {\n          return this.textInputItem !== undefined;\n        };\n\n        TextInputHandler.prototype.processDblClick = function (evt) {\n          if (evt.source.type === Event_1.MouseEventElementType.Shape) {\n            var shape = this.control.model.findShape(evt.source.key);\n            this.startTextInput(shape);\n          } else if (evt.source.type === Event_1.MouseEventElementType.Connector) {\n            var connector = this.control.model.findConnector(evt.source.key);\n            var position = connector.getTextPositionByPoint(evt.modelPoint);\n            this.startTextInput(connector, position);\n          } else if (evt.source.type === Event_1.MouseEventElementType.ConnectorText) {\n            var connector = this.control.model.findConnector(evt.source.key);\n            var position = parseFloat(evt.source.value);\n            this.startTextInput(connector, position);\n          }\n        };\n\n        TextInputHandler.prototype.onDblClick = function (evt) {\n          this.processDblClick(evt);\n        };\n\n        TextInputHandler.prototype.onKeyDown = function (evt) {\n          if (!this.isTextInputActive()) return;\n\n          if (evt.keyCode === 13 && evt.modifiers & KeyCode_1.ModifierKey.Ctrl) {\n            evt.preventDefault = true;\n            this.applyTextInput(evt.inputText);\n          }\n\n          if (evt.keyCode === 27) this.cancelTextInput();\n        };\n\n        TextInputHandler.prototype.onBlur = function (evt) {\n          if (this.isTextInputActive()) this.applyTextInput(evt.inputText);\n        };\n\n        TextInputHandler.prototype.onFocus = function (evt) {};\n\n        return TextInputHandler;\n      }();\n\n      exports.TextInputHandler = TextInputHandler;\n      /***/\n    },\n    /* 284 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics219 = function extendStatics(d, b) {\n          _extendStatics219 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics219(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics219(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var ChangeShapeTextHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeShapeTextHistoryItem, _super);\n\n        function ChangeShapeTextHistoryItem(item, text) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = item.key;\n          _this.text = text;\n          return _this;\n        }\n\n        ChangeShapeTextHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findShape(this.shapeKey);\n          this.oldText = item.text;\n          manipulator.changeShapeText(item, this.text);\n        };\n\n        ChangeShapeTextHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findShape(this.shapeKey);\n          manipulator.changeShapeText(item, this.oldText);\n        };\n\n        return ChangeShapeTextHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeShapeTextHistoryItem = ChangeShapeTextHistoryItem;\n      /***/\n    },\n    /* 285 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics220 = function extendStatics(d, b) {\n          _extendStatics220 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics220(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics220(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Event_1 = __webpack_require__(10);\n\n      var Model_1 = __webpack_require__(19);\n\n      var ContextMenuHandler_1 = __webpack_require__(125);\n\n      var ContextMenuTouchHandler =\n      /** @class */\n      function (_super) {\n        __extends(ContextMenuTouchHandler, _super);\n\n        function ContextMenuTouchHandler(selection) {\n          var _this = _super.call(this) || this;\n\n          _this.selection = selection;\n\n          _this.selection.onChanged.add(_this);\n\n          return _this;\n        }\n\n        ContextMenuTouchHandler.prototype.onMouseDown = function (evt) {};\n\n        ContextMenuTouchHandler.prototype.onMouseUp = function (evt) {};\n\n        ContextMenuTouchHandler.prototype.onFocus = function (evt) {\n          setTimeout(function () {\n            this.showContextMenuAtSelection();\n          }.bind(this), 1);\n        };\n\n        ContextMenuTouchHandler.prototype.onBlur = function (evt) {\n          setTimeout(function () {\n            if (!this.isLongTouch) this.hideContextMenu();\n          }.bind(this), 1);\n        };\n\n        ContextMenuTouchHandler.prototype.onTextInputFocus = function (evt) {\n          setTimeout(function () {\n            this.hideContextMenu();\n          }.bind(this), 1);\n        };\n\n        ContextMenuTouchHandler.prototype.onTextInputBlur = function (evt) {\n          setTimeout(function () {\n            this.showContextMenuAtSelection();\n          }.bind(this), 1);\n        };\n\n        ContextMenuTouchHandler.prototype.onLongTouch = function (evt) {\n          if (evt.source.type === Event_1.MouseEventElementType.Document) this.showContextMenuAtEmptySelection(evt.modelPoint);\n        };\n\n        ContextMenuTouchHandler.prototype.getSelectedItems = function () {\n          return this.selection.getSelectedItems(true);\n        };\n\n        ContextMenuTouchHandler.prototype.showContextMenuAtSelection = function () {\n          var items = this.getSelectedItems();\n          if (items.length !== 0) this.showContextMenu(undefined, Model_1.DiagramModel.getRectangle(items).position);\n        };\n\n        ContextMenuTouchHandler.prototype.showContextMenuAtEmptySelection = function (point) {\n          var items = this.getSelectedItems();\n          if (items.length === 0) this.showContextMenu(undefined, point);\n        };\n\n        ContextMenuTouchHandler.prototype.notifySelectionChanged = function (selection) {\n          var items = this.getSelectedItems();\n          if (items.length !== 0) this.showContextMenuAtSelection();else this.hideContextMenu();\n        };\n\n        ContextMenuTouchHandler.prototype.notifyDragStart = function (itemKeys) {\n          this.hideContextMenu();\n        };\n\n        ContextMenuTouchHandler.prototype.notifyDragEnd = function (itemKeys) {\n          this.showContextMenuAtSelection();\n        };\n\n        return ContextMenuTouchHandler;\n      }(ContextMenuHandler_1.ContextMenuHandler);\n\n      exports.ContextMenuTouchHandler = ContextMenuTouchHandler;\n      /***/\n    },\n    /* 286 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics221 = function extendStatics(d, b) {\n          _extendStatics221 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics221(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics221(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var TargetVisualizerBase_1 = __webpack_require__(127);\n\n      var ConnectionTargetVisualizer =\n      /** @class */\n      function (_super) {\n        __extends(ConnectionTargetVisualizer, _super);\n\n        function ConnectionTargetVisualizer(dispatcher) {\n          return _super.call(this, dispatcher) || this;\n        }\n\n        ConnectionTargetVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          this.dispatcher.raise1(function (l) {\n            return l.notifyConnectionTargetShow(_this.key, _this.targetRect);\n          });\n        };\n\n        ConnectionTargetVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifyConnectionTargetHide();\n          });\n        };\n\n        return ConnectionTargetVisualizer;\n      }(TargetVisualizerBase_1.TargetVisualizerBase);\n\n      exports.ConnectionTargetVisualizer = ConnectionTargetVisualizer;\n      /***/\n    },\n    /* 287 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics222 = function extendStatics(d, b) {\n          _extendStatics222 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics222(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics222(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var TargetVisualizerBase_1 = __webpack_require__(127);\n\n      var ContainerTargetVisualizer =\n      /** @class */\n      function (_super) {\n        __extends(ContainerTargetVisualizer, _super);\n\n        function ContainerTargetVisualizer(dispatcher) {\n          return _super.call(this, dispatcher) || this;\n        }\n\n        ContainerTargetVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          this.dispatcher.raise1(function (l) {\n            return l.notifyContainerTargetShow(_this.key, _this.targetRect);\n          });\n        };\n\n        ContainerTargetVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifyContainerTargetHide();\n          });\n        };\n\n        return ContainerTargetVisualizer;\n      }(TargetVisualizerBase_1.TargetVisualizerBase);\n\n      exports.ContainerTargetVisualizer = ContainerTargetVisualizer;\n      /***/\n    },\n    /* 288 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ConnectionPointInfo =\n      /** @class */\n      function () {\n        function ConnectionPointInfo(point, side) {\n          this.point = point;\n          this.side = side;\n        }\n\n        return ConnectionPointInfo;\n      }();\n\n      exports.ConnectionPointInfo = ConnectionPointInfo;\n\n      var ConnectionPointsVisualizer =\n      /** @class */\n      function () {\n        function ConnectionPointsVisualizer(dispatcher) {\n          this.dispatcher = dispatcher;\n        }\n\n        ConnectionPointsVisualizer.prototype.getKey = function () {\n          return this.key;\n        };\n\n        ConnectionPointsVisualizer.prototype.setPoints = function (key, points, pointIndex, isSelected) {\n          if (this.key !== key || this.pointIndex !== pointIndex) {\n            this.key = key;\n            this.isSelected = isSelected;\n            this.points = points;\n            this.pointIndex = pointIndex;\n            this.raiseShow();\n          }\n        };\n\n        ConnectionPointsVisualizer.prototype.setPointIndex = function (pointIndex) {\n          if (0 <= pointIndex && pointIndex < this.points.length && this.pointIndex !== pointIndex) {\n            this.pointIndex = pointIndex;\n            this.raiseShow();\n          }\n        };\n\n        ConnectionPointsVisualizer.prototype.update = function () {\n          this.raiseShow();\n        };\n\n        ConnectionPointsVisualizer.prototype.reset = function () {\n          if (this.key !== \"-1\") {\n            this.key = \"-1\";\n            this.isSelected = false;\n            this.points = [];\n            this.pointIndex = -1;\n            this.raiseHide();\n          }\n        };\n\n        ConnectionPointsVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          this.dispatcher.raise1(function (l) {\n            return l.notifyConnectionPointsShow(_this.key, _this.points, _this.pointIndex, _this.isSelected);\n          });\n        };\n\n        ConnectionPointsVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifyConnectionPointsHide();\n          });\n        };\n\n        return ConnectionPointsVisualizer;\n      }();\n\n      exports.ConnectionPointsVisualizer = ConnectionPointsVisualizer;\n      /***/\n    },\n    /* 289 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ResizeInfoVisualizer =\n      /** @class */\n      function () {\n        function ResizeInfoVisualizer(dispatcher) {\n          this.dispatcher = dispatcher;\n        }\n\n        ResizeInfoVisualizer.prototype.set = function (point, text) {\n          this.point = point;\n          this.text = text;\n          this.raiseShow();\n        };\n\n        ResizeInfoVisualizer.prototype.reset = function () {\n          if (this.point !== undefined) {\n            this.point = undefined;\n            this.text = undefined;\n            this.raiseHide();\n          }\n        };\n\n        ResizeInfoVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          this.dispatcher.raise1(function (l) {\n            return l.notifyResizeInfoShow(_this.point, _this.text);\n          });\n        };\n\n        ResizeInfoVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifyResizeInfoHide();\n          });\n        };\n\n        return ResizeInfoVisualizer;\n      }();\n\n      exports.ResizeInfoVisualizer = ResizeInfoVisualizer;\n      /***/\n    },\n    /* 290 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SelectionRectVisualizer =\n      /** @class */\n      function () {\n        function SelectionRectVisualizer(dispatcher) {\n          this.dispatcher = dispatcher;\n        }\n\n        SelectionRectVisualizer.prototype.setRectangle = function (rect) {\n          this.rect = rect;\n          this.raiseShow();\n        };\n\n        SelectionRectVisualizer.prototype.reset = function () {\n          this.rect = undefined;\n          this.raiseHide();\n        };\n\n        SelectionRectVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          this.dispatcher.raise1(function (l) {\n            return l.notifySelectionRectShow(_this.rect);\n          });\n        };\n\n        SelectionRectVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifySelectionRectHide();\n          });\n        };\n\n        return SelectionRectVisualizer;\n      }();\n\n      exports.SelectionRectVisualizer = SelectionRectVisualizer;\n      /***/\n    },\n    /* 291 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics223 = function extendStatics(d, b) {\n          _extendStatics223 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics223(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics223(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var VisualizersManager_1 = __webpack_require__(126);\n\n      var Event_1 = __webpack_require__(10);\n\n      var VisualizerTouchManager =\n      /** @class */\n      function (_super) {\n        __extends(VisualizerTouchManager, _super);\n\n        function VisualizerTouchManager(selection, model, eventManager, settings, readOnly) {\n          if (readOnly === void 0) {\n            readOnly = settings.readOnly;\n          }\n\n          var _this = _super.call(this, selection, model, eventManager, settings, readOnly) || this;\n\n          selection.onChanged.add(_this);\n          return _this;\n        }\n\n        VisualizerTouchManager.prototype.onBlur = function (evt) {\n          setTimeout(function () {\n            this.hideConnections();\n          }.bind(this), 1);\n        };\n\n        VisualizerTouchManager.prototype.onFocus = function (evt) {\n          setTimeout(function () {\n            this.showConnections();\n          }.bind(this), 1);\n        };\n\n        VisualizerTouchManager.prototype.hideConnections = function () {\n          if (this.readOnly) return;\n          this.resetConnectionPoints();\n        };\n\n        VisualizerTouchManager.prototype.showConnections = function () {\n          if (this.readOnly) return;\n\n          if (this.needShowConnections()) {\n            var shapes = this.selection.getSelectedShapes();\n            this.setConnectionPoints(shapes[0], Event_1.MouseEventElementType.ShapeConnectionPoint, -1);\n          }\n        };\n\n        VisualizerTouchManager.prototype.needShowConnections = function () {\n          var items = this.selection.getSelectedItems();\n          var shapes = this.selection.getSelectedShapes();\n          return items.length === 1 && shapes.length === 1;\n        };\n\n        VisualizerTouchManager.prototype.notifySelectionChanged = function (selection) {\n          if (this.needShowConnections()) this.showConnections();else this.hideConnections();\n        };\n\n        VisualizerTouchManager.prototype.notifyDragStart = function (itemKeys) {\n          this.hideConnections();\n        };\n\n        VisualizerTouchManager.prototype.notifyDragEnd = function (itemKeys) {\n          this.showConnections();\n        };\n\n        return VisualizerTouchManager;\n      }(VisualizersManager_1.VisualizerManager);\n\n      exports.VisualizerTouchManager = VisualizerTouchManager;\n      /***/\n    },\n    /* 292 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Utils_1 = __webpack_require__(0);\n\n      var InputPosition_1 = __webpack_require__(293);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var Selection =\n      /** @class */\n      function () {\n        function Selection(model) {\n          this.onChanged = new Utils_1.EventDispatcher();\n          this.inputPosition = new InputPosition_1.InputPosition(this);\n          this.onChanged.add(this.inputPosition);\n          this.initialize(model);\n        }\n\n        Selection.prototype.initialize = function (model) {\n          this.model = model;\n          this.keys = [];\n          this.inputPosition.initialize();\n        };\n\n        Selection.prototype.add = function (key) {\n          if (this.keys.indexOf(key) < 0) {\n            // binarySearch\n            this.keys.push(key);\n            this.raiseSelectionChanged();\n          }\n        };\n\n        Selection.prototype.remove = function (key) {\n          if (this.keys.indexOf(key) >= 0) {\n            // binarySearch\n            this.keys.splice(this.keys.indexOf(key), 1);\n            this.raiseSelectionChanged();\n          }\n        };\n\n        Selection.prototype.clear = function () {\n          this.keys = [];\n          this.raiseSelectionChanged();\n        };\n\n        Selection.prototype.set = function (keys) {\n          this.keys = keys;\n          this.raiseSelectionChanged();\n        };\n\n        Selection.prototype.getKeys = function () {\n          return this.keys;\n        };\n\n        Selection.prototype.getKey = function (index) {\n          return this.keys[index];\n        };\n\n        Selection.prototype.getSelectedItemsInsideContainers = function (items) {\n          var _this = this;\n\n          var result = items.slice();\n          items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) {\n              var children = _this.getSelectedItemsInsideContainers(_this.model.getChildren(item));\n\n              children.forEach(function (child) {\n                if (result.indexOf(child) === -1 && !_this.hasKey(child.key)) result.push(child);\n              });\n            }\n          });\n          return result;\n        };\n\n        Selection.prototype.getSelectedItemsCore = function (includeLocked) {\n          var _this = this;\n\n          return this.keys.map(function (key) {\n            return _this.model.findItem(key);\n          }).filter(function (conn) {\n            return conn && (includeLocked || !conn.isLocked);\n          });\n        };\n\n        Selection.prototype.getSelectedItems = function (includeLocked, includeInsideContainers) {\n          if (includeInsideContainers) return this.getSelectedItemsInsideContainers(this.getSelectedItemsCore(includeLocked));\n          return this.getSelectedItemsCore(includeLocked);\n        };\n\n        Selection.prototype.getSelectedShapes = function (includeLocked, includeInsideContainers) {\n          var _this = this;\n\n          if (includeInsideContainers) {\n            var items = this.getSelectedItemsCore(includeLocked);\n            return this.getSelectedItemsInsideContainers(items).map(function (item) {\n              return item instanceof Shape_1.Shape ? item : undefined;\n            }).filter(function (shape) {\n              return shape;\n            });\n          } else return this.keys.map(function (key) {\n            return _this.model.findShape(key);\n          }).filter(function (conn) {\n            return conn && (includeLocked || !conn.isLocked);\n          });\n        };\n\n        Selection.prototype.getSelectedConnectors = function (includeLocked, includeInsideContainers) {\n          var _this = this;\n\n          if (includeInsideContainers) {\n            var items = this.keys.map(function (key) {\n              return _this.model.findItem(key);\n            });\n            return this.getSelectedItemsInsideContainers(items).map(function (item) {\n              return item instanceof Connector_1.Connector ? item : undefined;\n            }).filter(function (connector) {\n              return connector;\n            });\n          } else return this.keys.map(function (key) {\n            return _this.model.findConnector(key);\n          }).filter(function (conn) {\n            return conn && (includeLocked || !conn.isLocked);\n          });\n        };\n\n        Selection.prototype.hasKey = function (key) {\n          return this.keys.indexOf(key) >= 0;\n        };\n\n        Selection.prototype.isEmpty = function (includeLocked) {\n          return !this.getSelectedItems(includeLocked).length;\n        };\n\n        Selection.prototype.selectRect = function (rect) {\n          var keys = [];\n          this.model.iterateItems(function (item) {\n            if (item.intersectedByRect(rect)) keys.push(item.key);\n          });\n          this.set(keys);\n          this.raiseSelectionChanged();\n        };\n\n        Selection.prototype.onLoad = function () {\n          this.raiseSelectionChanged();\n        };\n\n        Selection.prototype.raiseSelectionChanged = function () {\n          this.onChanged.raise(\"notifySelectionChanged\", this);\n        };\n\n        return Selection;\n      }();\n\n      exports.Selection = Selection;\n      /***/\n    },\n    /* 293 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ConnectorProperties_1 = __webpack_require__(24);\n\n      var Style_1 = __webpack_require__(27);\n\n      var InputPosition =\n      /** @class */\n      function () {\n        function InputPosition(selection) {\n          this.selection = selection;\n          this.initialize();\n        }\n\n        InputPosition.prototype.initialize = function () {\n          this.reset();\n          this.connectorPropertiesDefault = new ConnectorProperties_1.ConnectorProperties();\n          this.stylePropertiesDefault = new Style_1.Style();\n          this.styleTextPropertiesDefault = new Style_1.StyleText();\n        };\n\n        InputPosition.prototype.reset = function () {\n          this.connectorPropertiesCurrent = null;\n          this.stylePropertiesCurrent = null;\n          this.styleTextPropertiesCurrent = null;\n        }; // Connectors\n\n\n        InputPosition.prototype.getConnectorProperties = function () {\n          if (!this.connectorPropertiesCurrent) {\n            this.connectorPropertiesCurrent = this.connectorPropertiesDefault.clone();\n            this.updateConnectorProperties(this.connectorPropertiesCurrent);\n          }\n\n          return this.connectorPropertiesCurrent;\n        };\n\n        InputPosition.prototype.getConnectorPropertyValue = function (propertyName) {\n          return this.getConnectorProperties()[propertyName];\n        };\n\n        InputPosition.prototype.getConnectorPropertyDefaultValue = function (propertyName) {\n          return this.connectorPropertiesDefault[propertyName];\n        };\n\n        InputPosition.prototype.setConnectorPropertyValue = function (propertyName, value) {\n          this.getConnectorProperties()[propertyName] = value;\n          this.connectorPropertiesDefault[propertyName] = value;\n        };\n\n        InputPosition.prototype.updateConnectorProperties = function (properties) {\n          var _this = this;\n\n          var connectors = this.selection.getSelectedConnectors();\n          properties.forEach(function (propertyName) {\n            _this.updatePropertyValue(properties, connectors, function (item) {\n              return item[\"properties\"];\n            }, propertyName);\n          });\n        }; // Style\n\n\n        InputPosition.prototype.getStyleProperties = function () {\n          if (!this.stylePropertiesCurrent) {\n            this.stylePropertiesCurrent = this.stylePropertiesDefault.clone();\n            this.updateStyleProperties(this.stylePropertiesCurrent, \"style\");\n          }\n\n          return this.stylePropertiesCurrent;\n        };\n\n        InputPosition.prototype.getStyleTextProperties = function () {\n          if (!this.styleTextPropertiesCurrent) {\n            this.styleTextPropertiesCurrent = this.styleTextPropertiesDefault.clone();\n            this.updateStyleProperties(this.styleTextPropertiesCurrent, \"styleText\");\n          }\n\n          return this.styleTextPropertiesCurrent;\n        };\n\n        InputPosition.prototype.getStylePropertyValue = function (propertyName) {\n          return this.getStyleProperties()[propertyName];\n        };\n\n        InputPosition.prototype.getStylePropertyDefaultValue = function (propertyName) {\n          return this.stylePropertiesDefault[propertyName];\n        };\n\n        InputPosition.prototype.getStyleTextPropertyValue = function (propertyName) {\n          return this.getStyleTextProperties()[propertyName];\n        };\n\n        InputPosition.prototype.getStyleTextPropertyDefaultValue = function (propertyName) {\n          return this.styleTextPropertiesDefault[propertyName];\n        };\n\n        InputPosition.prototype.setStylePropertyValue = function (propertyName, value) {\n          this.getStyleProperties()[propertyName] = value;\n          this.stylePropertiesDefault[propertyName] = value;\n        };\n\n        InputPosition.prototype.setStyleTextPropertyValue = function (propertyName, value) {\n          this.getStyleTextProperties()[propertyName] = value;\n          this.styleTextPropertiesDefault[propertyName] = value;\n        };\n\n        InputPosition.prototype.updateStyleProperties = function (style, stylePropertyName) {\n          var _this = this;\n\n          var items = this.selection.getSelectedItems();\n          style.forEach(function (propertyName) {\n            _this.updatePropertyValue(style, items, function (item) {\n              return item[stylePropertyName];\n            }, propertyName);\n          });\n        };\n\n        InputPosition.prototype.updatePropertyValue = function (destObj, items, getSrcObj, propertyName) {\n          var value = undefined;\n          var valueAssigned = false;\n          items.forEach(function (item) {\n            var obj = getSrcObj(item);\n            var propertyValue = obj[propertyName];\n\n            if (value === undefined && propertyValue != undefined) {\n              value = propertyValue;\n              valueAssigned = true;\n            } else if (valueAssigned && value !== propertyValue) {\n              value = undefined;\n              return;\n            }\n          });\n          if (valueAssigned) destObj[propertyName] = value;\n        };\n\n        InputPosition.prototype.notifySelectionChanged = function (selection) {\n          this.reset();\n        };\n\n        return InputPosition;\n      }();\n\n      exports.InputPosition = InputPosition;\n      /***/\n    },\n    /* 294 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var HistoryItem_1 = __webpack_require__(3);\n\n      var __1 = __webpack_require__(8);\n\n      var History =\n      /** @class */\n      function () {\n        function History(modelManipulator) {\n          this.historyItems = [];\n          this.currentIndex = -1;\n          this.incrementalId = -1;\n          this.transactionLevel = -1;\n          this.unmodifiedIndex = -1; // need for async actions\n\n          this.currTransactionId = 0;\n          this.onChanged = new __1.EventDispatcher();\n          this.modelManipulator = modelManipulator;\n        }\n\n        History.prototype.isModified = function () {\n          if (this.unmodifiedIndex == this.currentIndex) return false;\n          var startIndex = Math.min(this.unmodifiedIndex, this.currentIndex);\n          var endIndex = Math.max(this.unmodifiedIndex, this.currentIndex);\n\n          for (var i = startIndex + 1; i <= endIndex; i++) {\n            if (this.historyItems[i].changeModified()) return true;\n          }\n\n          return false;\n        };\n\n        History.prototype.undo = function () {\n          if (!this.canUndo()) return;\n          this.historyItems[this.currentIndex].undo(this.modelManipulator);\n          this.currentIndex--;\n          this.raiseChanged();\n        };\n\n        History.prototype.redo = function () {\n          if (!this.canRedo()) return;\n          this.currentIndex++;\n          this.historyItems[this.currentIndex].redo(this.modelManipulator);\n          this.raiseChanged();\n        };\n\n        History.prototype.canUndo = function () {\n          return this.currentIndex >= 0;\n        };\n\n        History.prototype.canRedo = function () {\n          return this.currentIndex < this.historyItems.length - 1;\n        };\n\n        History.prototype.beginTransaction = function () {\n          this.transactionLevel++;\n          if (this.transactionLevel == 0) this.transaction = new HistoryItem_1.CompositionHistoryItem();\n          var id = this.currTransactionId++;\n          return id;\n        };\n\n        History.prototype.endTransaction = function () {\n          if (--this.transactionLevel >= 0) return;\n          var transactionLength = this.transaction.historyItems.length;\n          if (transactionLength > 1) this.addInternal(this.transaction);else if (transactionLength == 1) this.addInternal(this.transaction.historyItems.pop());\n          if (transactionLength > 0) this.raiseChanged();\n          delete this.transaction;\n        };\n\n        History.prototype.addAndRedo = function (historyItem) {\n          this.add(historyItem);\n          historyItem.redo(this.modelManipulator);\n          this.raiseChanged();\n        };\n\n        History.prototype.add = function (historyItem) {\n          if (this.transactionLevel >= 0) this.transaction.add(historyItem);else this.addInternal(historyItem);\n        };\n\n        History.prototype.addInternal = function (historyItem) {\n          if (this.currentIndex < this.historyItems.length - 1) {\n            this.historyItems.splice(this.currentIndex + 1);\n            this.unmodifiedIndex = Math.min(this.unmodifiedIndex, this.currentIndex);\n          }\n\n          this.historyItems.push(historyItem);\n          this.currentIndex++;\n          this.deleteOldItems();\n        };\n\n        History.prototype.deleteOldItems = function () {\n          var exceedItemsCount = this.historyItems.length - History.MAX_HISTORY_ITEM_COUNT;\n\n          if (exceedItemsCount > 0 && this.currentIndex > exceedItemsCount) {\n            this.historyItems.splice(0, exceedItemsCount);\n            this.currentIndex -= exceedItemsCount;\n          }\n        };\n\n        History.prototype.getNextId = function () {\n          this.incrementalId++;\n          return this.incrementalId;\n        };\n\n        History.prototype.clear = function () {\n          this.currentIndex = -1;\n          this.unmodifiedIndex = -1;\n          this.incrementalId = -1;\n          this.historyItems = [];\n          delete this.transaction;\n          this.transactionLevel = -1;\n        };\n\n        History.prototype.resetModified = function () {\n          this.unmodifiedIndex = this.currentIndex;\n        };\n\n        History.prototype.getCurrentItemId = function () {\n          if (this.currentIndex == -1) return -1;\n          var currentItem = this.historyItems[this.currentIndex];\n          if (currentItem.uniqueId == -1) currentItem.uniqueId = this.getNextId();\n          return currentItem.uniqueId;\n        };\n\n        History.prototype.undoTransaction = function () {\n          var items = this.transaction.historyItems;\n\n          while (items.length) {\n            items.pop().undo(this.modelManipulator);\n          }\n\n          this.raiseChanged();\n        };\n\n        History.prototype.undoTransactionTo = function (item) {\n          var items = this.transaction.historyItems;\n\n          while (items.length) {\n            var ti = items.pop();\n            ti.undo(this.modelManipulator);\n            if (ti === item) return;\n          }\n\n          this.raiseChanged();\n        };\n\n        History.prototype.raiseChanged = function () {\n          if (this.transactionLevel === -1) this.onChanged.raise(\"notifyHistoryChanged\");\n        };\n\n        History.MAX_HISTORY_ITEM_COUNT = 100;\n        return History;\n      }();\n\n      exports.History = History;\n      /***/\n    },\n    /* 295 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics224 = function extendStatics(d, b) {\n          _extendStatics224 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics224(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics224(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var BatchUpdatableObject_1 = __webpack_require__(128);\n\n      var BarManager =\n      /** @class */\n      function (_super) {\n        __extends(BarManager, _super);\n\n        function BarManager(control) {\n          var _this = _super.call(this) || this;\n\n          _this.bars = [];\n          _this.control = control;\n          return _this;\n        }\n\n        BarManager.prototype.registerBar = function (bar) {\n          this.bars.push(bar);\n          bar.onChanged.add(this);\n          this.updateBarItemsState(bar);\n        };\n\n        BarManager.prototype.updateItemsState = function (queryCommands) {\n          if (this.isUpdateLocked()) return;\n\n          for (var i = 0, bar; bar = this.bars[i]; i++) {\n            this.updateBarItemsState(bar, queryCommands);\n          }\n        };\n\n        BarManager.prototype.updateBarItemsState = function (bar, queryCommands) {\n          if (this.isUpdateLocked()) return;\n\n          if (bar.isVisible()) {\n            var commandKeys = void 0;\n\n            if (queryCommands) {\n              var knownCommandKeys_1 = bar.getCommandKeys().reduce(function (hash, cmd) {\n                hash[cmd] = true;\n                return hash;\n              }, {});\n              commandKeys = queryCommands.filter(function (cmd) {\n                return knownCommandKeys_1[cmd];\n              });\n            } else commandKeys = bar.getCommandKeys();\n\n            var length_1 = commandKeys.length;\n\n            for (var j = 0; j < length_1; j++) {\n              this.updateBarItem(bar, commandKeys[j]);\n            }\n          }\n        };\n\n        BarManager.prototype.updateBarItem = function (bar, commandKey) {\n          var command = this.control.commandManager.getCommand(commandKey);\n\n          if (command) {\n            var commandState = command.getState();\n            bar.setItemVisible(commandKey, commandState.visible);\n\n            if (commandState.visible) {\n              bar.setItemEnabled(commandKey, commandState.enabled);\n\n              if (!commandState.denyUpdateValue) {\n                var itemValue = this.getItemValue(commandState.value);\n                if (commandState.items) bar.setItemSubItems(commandKey, commandState.items);\n                bar.setItemValue(commandKey, itemValue, this.getDefaultItemValue(commandState.defaultValue));\n              }\n            }\n          }\n        };\n\n        BarManager.prototype.setEnabled = function (enabled) {\n          for (var i = 0, bar; bar = this.bars[i]; i++) {\n            bar.setEnabled(enabled);\n          }\n        };\n\n        BarManager.prototype.notifyBarCommandExecuted = function (commandID, parameter) {\n          var executeResult = this.control.commandManager.getCommand(commandID).execute(parameter);\n          if (!executeResult) this.updateItemsState([commandID]);\n        };\n\n        BarManager.prototype.notifyBarUpdateRequested = function () {\n          this.updateItemsState();\n        }; // ISelectionChangesListener\n\n\n        BarManager.prototype.notifySelectionChanged = function (_selection) {\n          this.updateItemsState();\n        };\n\n        BarManager.prototype.onUpdateUnlocked = function (occurredEvents) {\n          this.updateItemsState(); // TODO\n        };\n\n        BarManager.prototype.getItemValue = function (value) {\n          return value;\n        };\n\n        BarManager.prototype.getDefaultItemValue = function (value) {\n          return value;\n        };\n\n        return BarManager;\n      }(BatchUpdatableObject_1.BatchUpdatableObject);\n\n      exports.BarManager = BarManager;\n      /***/\n    },\n    /* 296 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics225 = function extendStatics(d, b) {\n          _extendStatics225 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics225(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics225(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var DataSource_1 = __webpack_require__(297);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var Data_1 = __webpack_require__(81);\n\n      var DocumentDataSource =\n      /** @class */\n      function (_super) {\n        __extends(DocumentDataSource, _super);\n\n        function DocumentDataSource(changesListener, nodeDataSource, edgeDataSource, nodeDataImporter, edgeDataImporter) {\n          var _this = _super.call(this, \"Document\", nodeDataSource, edgeDataSource, nodeDataImporter, edgeDataImporter) || this;\n\n          _this.changesListener = changesListener;\n          _this.updateLockCount = 0;\n          return _this;\n        }\n\n        DocumentDataSource.prototype.createModelItems = function (history, model, selection, layoutParameters, snapToGrid, gridSize) {\n          DataSource_1.DataSource.createModelItems(history, model, selection, this, layoutParameters, true, false, snapToGrid, gridSize);\n        };\n\n        DocumentDataSource.prototype.updateItemsByModel = function (model) {\n          var _this = this;\n\n          this.deleteNodes(model);\n          this.deleteEdges(model);\n          model.items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) _this.updateNode(model, item);\n            if (item instanceof Connector_1.Connector) _this.updateEdge(model, item);\n          });\n        };\n\n        DocumentDataSource.prototype.isItemObjectModified = function (item, itemObj, importer) {\n          var modified = importer.setLocked && itemObj.locked !== item.locked || importer.setZIndex && itemObj.zIndex !== item.zIndex;\n\n          if (!modified && importer.setStyle) {\n            var defaultStyle_1 = item.style.getDefaultInstance();\n            item.style.forEach(function (key) {\n              if (item.style[key] !== defaultStyle_1[key] && item.style[key] !== itemObj.style[key]) modified = true;\n            });\n          }\n\n          if (!modified && importer.setStyleText) {\n            var defaultTextStyle_1 = item.styleText.getDefaultInstance();\n            item.styleText.forEach(function (key) {\n              if (item.styleText[key] !== defaultTextStyle_1[key] && item.styleText[key] !== itemObj.styleText[key]) modified = true;\n            });\n          }\n\n          return modified;\n        };\n\n        DocumentDataSource.prototype.updateItemObjectProperties = function (itemObj, item, importer) {\n          if (importer.setLocked) {\n            itemObj.locked = item.locked;\n            if (itemObj.dataObj && itemObj.locked !== undefined) importer.setLocked(itemObj.dataObj, item.locked);\n          }\n\n          if (importer.setStyle) {\n            var styleObj = item.style.toObject();\n            itemObj.style = styleObj;\n            if (itemObj.dataObj && itemObj.style !== undefined) importer.setStyle(itemObj.dataObj, styleObj);\n          }\n\n          if (importer.setStyleText) {\n            var styleTextObj = item.styleText.toObject();\n            itemObj.styleText = styleTextObj;\n            if (itemObj.dataObj && itemObj.styleText !== undefined) importer.setStyleText(itemObj.dataObj, styleTextObj);\n          }\n\n          if (importer.setZIndex) {\n            itemObj.zIndex = item.zIndex;\n            if (itemObj.dataObj && itemObj.zIndex !== undefined) importer.setZIndex(itemObj.dataObj, item.zIndex);\n          }\n        };\n\n        DocumentDataSource.prototype.deleteItems = function (dataSourceItems, findItem, getParentArray, callback) {\n          var items = dataSourceItems.slice();\n          items.forEach(function (item) {\n            if (item.key && !findItem(item.key)) {\n              var parentArray = getParentArray(item);\n              var index = parentArray.indexOf(item.dataObj);\n              parentArray.splice(index, 1);\n              callback(item, index > -1);\n            }\n          });\n        }; // Nodes\n\n\n        DocumentDataSource.prototype.updateNode = function (model, shape) {\n          var _this = this;\n\n          var nodeObj = this.findNode(shape.dataKey);\n\n          if (!nodeObj) {\n            var dataObj = {};\n            nodeObj = this.addNodeInternal(dataObj, shape.description.key, shape.text);\n            this.nodeDataSource.push(nodeObj.dataObj);\n            this.nodeDataImporter.setKey(dataObj, nodeObj.key);\n            this.updateNodeObjectProperties(shape, nodeObj, model.units);\n            this.updateNodeObjectConnectedProperties(shape, nodeObj);\n            this.updateNodeObjectKey(shape, nodeObj, nodeObj.dataObj);\n            this.beginChangesNotification();\n            this.changesListener.notifyNodeInserted.call(this.changesListener, nodeObj.dataObj, function (data) {\n              _this.updateNodeObjectKey(shape, nodeObj, data);\n\n              _this.endChangesNotification();\n            }, function (error) {\n              _this.endChangesNotification();\n            });\n          } else {\n            if (this.isNodeObjectModified(shape, nodeObj, model.units)) {\n              this.updateNodeObjectProperties(shape, nodeObj, model.units);\n              this.updateNodeObjectConnectedProperties(shape, nodeObj);\n              this.beginChangesNotification();\n              this.changesListener.notifyNodeUpdated.call(this.changesListener, this.nodeDataImporter.getKey(nodeObj.dataObj || nodeObj.key), nodeObj.dataObj, function (key, data) {\n                _this.endChangesNotification();\n              }, function (error) {\n                _this.endChangesNotification();\n              });\n            } else this.updateNodeObjectConnectedProperties(shape, nodeObj, this.changesListener);\n          }\n        };\n\n        DocumentDataSource.prototype.isNodeObjectModified = function (shape, nodeObj, units) {\n          return this.isItemObjectModified(shape, nodeObj, this.nodeDataImporter) || nodeObj.type !== shape.description.key && !(nodeObj.type === undefined && shape.description.key === ShapeTypes_1.ShapeTypes.Rectangle) || !this.compareStrings(nodeObj.text, shape.text) || this.nodeDataImporter.setImage && nodeObj.image !== shape.image.url || this.nodeDataImporter.setLeft && nodeObj.left !== ModelUtils_1.ModelUtils.getlUnitValue(units, shape.position.x) || this.nodeDataImporter.setTop && nodeObj.top !== ModelUtils_1.ModelUtils.getlUnitValue(units, shape.position.y) || this.nodeDataImporter.setWidth && nodeObj.width !== ModelUtils_1.ModelUtils.getlUnitValue(units, shape.size.width) || this.nodeDataImporter.setHeight && nodeObj.height !== ModelUtils_1.ModelUtils.getlUnitValue(units, shape.size.height);\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectProperties = function (shape, nodeObj, units) {\n          this.updateItemObjectProperties(nodeObj, shape, this.nodeDataImporter);\n\n          if (this.nodeDataImporter.setType) {\n            nodeObj.type = shape.description.key;\n            this.nodeDataImporter.setType(nodeObj.dataObj, shape.description.key);\n          }\n\n          if (this.nodeDataImporter.setText) {\n            nodeObj.text = shape.text;\n            this.nodeDataImporter.setText(nodeObj.dataObj, shape.text);\n          }\n\n          if (this.nodeDataImporter.setImage) {\n            nodeObj.image = shape.image.url;\n            this.nodeDataImporter.setImage(nodeObj.dataObj, shape.image.url);\n          }\n\n          if (this.nodeDataImporter.setLeft) {\n            var left = ModelUtils_1.ModelUtils.getlUnitValue(units, shape.position.x);\n            nodeObj.left = left;\n            this.nodeDataImporter.setLeft(nodeObj.dataObj, left);\n          }\n\n          if (this.nodeDataImporter.setTop) {\n            var top_1 = ModelUtils_1.ModelUtils.getlUnitValue(units, shape.position.y);\n            nodeObj.top = top_1;\n            this.nodeDataImporter.setTop(nodeObj.dataObj, top_1);\n          }\n\n          if (this.nodeDataImporter.setWidth) {\n            var width = ModelUtils_1.ModelUtils.getlUnitValue(units, shape.size.width);\n            nodeObj.width = width;\n            this.nodeDataImporter.setWidth(nodeObj.dataObj, width);\n          }\n\n          if (this.nodeDataImporter.setHeight) {\n            var height = ModelUtils_1.ModelUtils.getlUnitValue(units, shape.size.height);\n            nodeObj.height = height;\n            this.nodeDataImporter.setHeight(nodeObj.dataObj, height);\n          }\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectConnectedProperties = function (shape, nodeObj, changesListener) {\n          if (this.useNodeParentId && this.nodeDataImporter.setParentKey !== undefined) {\n            var parentKey = this.getParentShapeKey(shape);\n            var parentItem = this.findNode(parentKey);\n            this.updateNodeObjectParentKey(nodeObj, parentItem, changesListener);\n          }\n\n          if (this.useNodeContainerId && this.nodeDataImporter.setContainerKey !== undefined) {\n            var containerKey = this.getContainerShapeKey(shape);\n            var containerItem = this.findNode(containerKey);\n            this.updateNodeObjectContainerKey(nodeObj, containerItem, changesListener);\n          }\n\n          if (this.useNodeItems && this.nodeDataImporter.setItems !== undefined) {\n            var parentKey = this.getParentShapeKey(shape);\n            var parentItem = this.findNode(parentKey);\n            this.updateNodeObjectItems(nodeObj, parentItem, changesListener);\n          }\n\n          if (this.useNodeChildren && this.nodeDataImporter.setChildren !== undefined) {\n            var containerKey = this.getContainerShapeKey(shape);\n            var containerItem = this.findNode(containerKey);\n            this.updateNodeObjectChildren(nodeObj, containerItem, changesListener);\n          }\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectParentKey = function (nodeObj, parentNodeObj, changesListener) {\n          var _this = this;\n\n          var parentKey = this.nodeDataImporter.getParentKey(nodeObj.dataObj);\n          var newParentKey = parentNodeObj ? this.nodeDataImporter.getKey(parentNodeObj.dataObj) : undefined;\n\n          if (parentKey !== newParentKey && !(this.isRootParentKey(parentKey) && this.isRootParentKey(newParentKey))) {\n            this.nodeDataImporter.setParentKey(nodeObj.dataObj, newParentKey);\n\n            if (changesListener) {\n              this.beginChangesNotification();\n              changesListener.notifyNodeUpdated.call(changesListener, this.nodeDataImporter.getKey(nodeObj.dataObj) || nodeObj.key, nodeObj.dataObj, function (key, data) {\n                _this.endChangesNotification();\n              }, function (error) {\n                _this.endChangesNotification();\n              });\n            }\n          }\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectContainerKey = function (nodeObj, containerNodeObj, changesListener) {\n          var _this = this;\n\n          var containerKey = this.nodeDataImporter.getContainerKey(nodeObj.dataObj);\n          var newContainerKey = containerNodeObj ? this.nodeDataImporter.getKey(containerNodeObj.dataObj) : undefined;\n\n          if (containerKey !== newContainerKey && !(this.isRootParentKey(containerKey) && this.isRootParentKey(newContainerKey))) {\n            this.nodeDataImporter.setContainerKey(nodeObj.dataObj, newContainerKey);\n\n            if (changesListener) {\n              this.beginChangesNotification();\n              changesListener.notifyNodeUpdated.call(changesListener, this.nodeDataImporter.getKey(nodeObj.dataObj) || nodeObj.key, nodeObj.dataObj, function (key, data) {\n                _this.endChangesNotification();\n              }, function (error) {\n                _this.endChangesNotification();\n              });\n            }\n          }\n        };\n\n        DocumentDataSource.prototype.isRootParentKey = function (key) {\n          return key === undefined || key === null || !this.findNode(key);\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectItems = function (nodeObj, parentNodeObj, changesListener) {\n          var _this = this;\n\n          if (parentNodeObj && nodeObj.parentDataObj !== parentNodeObj.dataObj || !parentNodeObj && nodeObj.parentDataObj) {\n            if (!parentNodeObj || !this.checkNodeCyrcleItems(nodeObj.dataObj, parentNodeObj.dataObj)) {\n              var oldItemsArray = nodeObj.parentDataObj ? this.nodeDataImporter.getItems(nodeObj.parentDataObj) : this.nodeDataSource;\n              var index = oldItemsArray.indexOf(nodeObj.dataObj);\n              oldItemsArray.splice(index, 1);\n              var itemsArray = parentNodeObj ? this.nodeDataImporter.getItems(parentNodeObj.dataObj) : this.nodeDataSource;\n              if (!itemsArray) this.nodeDataImporter.setItems(parentNodeObj.dataObj, [nodeObj.dataObj]);else itemsArray.push(nodeObj.dataObj);\n              nodeObj.parentDataObj = parentNodeObj && parentNodeObj.dataObj;\n\n              if (changesListener) {\n                this.beginChangesNotification();\n                changesListener.notifyNodeUpdated.call(changesListener, this.nodeDataImporter.getKey(nodeObj.dataObj) || nodeObj.key, nodeObj.dataObj, function (key, data) {\n                  _this.endChangesNotification();\n                }, function (error) {\n                  _this.endChangesNotification();\n                });\n              }\n            }\n          }\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectChildren = function (nodeObj, containerNodeObj, changesListener) {\n          var _this = this;\n\n          if (containerNodeObj && nodeObj.containerDataObj !== containerNodeObj.dataObj || !containerNodeObj && nodeObj.containerDataObj) {\n            var oldChildrenArray = nodeObj.containerDataObj ? this.nodeDataImporter.getChildren(nodeObj.containerDataObj) : this.nodeDataSource;\n            var index = oldChildrenArray.indexOf(nodeObj.dataObj);\n            oldChildrenArray.splice(index, 1);\n            var childrenArray = containerNodeObj ? this.nodeDataImporter.getChildren(containerNodeObj.dataObj) : this.nodeDataSource;\n            if (!childrenArray) this.nodeDataImporter.setChildren(containerNodeObj.dataObj, [nodeObj.dataObj]);else childrenArray.push(nodeObj.dataObj);\n            nodeObj.containerDataObj = containerNodeObj && containerNodeObj.dataObj;\n\n            if (changesListener) {\n              this.beginChangesNotification();\n              changesListener.notifyNodeUpdated.call(changesListener, this.nodeDataImporter.getKey(nodeObj.dataObj) || nodeObj.key, nodeObj.dataObj, function (key, data) {\n                _this.endChangesNotification();\n              }, function (error) {\n                _this.endChangesNotification();\n              });\n            }\n          }\n        };\n\n        DocumentDataSource.prototype.checkNodeCyrcleItems = function (nodeDataObj, parentDataObjCandidate) {\n          var _this = this;\n\n          var result = false;\n          var items = this.nodeDataImporter.getItems(nodeDataObj);\n\n          if (items) {\n            items.forEach(function (childDataObj) {\n              result = result || childDataObj === parentDataObjCandidate || _this.checkNodeCyrcleItems(childDataObj, parentDataObjCandidate);\n            });\n          }\n\n          return result;\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectKey = function (shape, nodeObj, dataObj) {\n          var key = this.nodeDataImporter.getKey(dataObj);\n\n          if (key !== undefined && key !== null && key !== nodeObj.key) {\n            nodeObj.key = key;\n            delete this.nodeKeyMap[nodeObj.key];\n            this.nodeKeyMap[key] = nodeObj.key;\n          }\n\n          shape.dataKey = nodeObj.key;\n\n          if (nodeObj.dataObj !== dataObj) {\n            var parentArray = this.getNodeArray(nodeObj);\n            var index = parentArray.indexOf(nodeObj.dataObj);\n            parentArray.splice(index, 1, dataObj);\n            nodeObj.dataObj = dataObj;\n          }\n        };\n\n        DocumentDataSource.prototype.deleteNodes = function (model) {\n          var _this = this;\n\n          this.deleteItems(this.nodes, function (key) {\n            return model.findShapeByDataKey(key);\n          }, function (item) {\n            return _this.getNodeArray(item);\n          }, function (item, dataModified) {\n            var key = item.dataObj && _this.nodeDataImporter.getKey(item.dataObj) || item.key;\n            var dataKey = _this.nodeKeyMap[key];\n            if (dataKey) delete _this.nodeKeyMap[key];\n\n            var nodeObj = _this.findNode(dataKey);\n\n            if (nodeObj) _this.nodes.splice(_this.nodes.indexOf(nodeObj), 1);\n\n            if (dataModified) {\n              _this.beginChangesNotification();\n\n              _this.changesListener.notifyNodeRemoved.call(_this.changesListener, key, item.dataObj, function (key, data) {\n                _this.endChangesNotification();\n              }, function (error) {\n                _this.endChangesNotification();\n              });\n            }\n          });\n        };\n\n        DocumentDataSource.prototype.getParentShapeKey = function (shape) {\n          var parentKey;\n\n          for (var i = 0; i < shape.attachedConnectors.length; i++) {\n            if (shape.attachedConnectors[i].endItem === shape) {\n              var parentShape = shape.attachedConnectors[i].beginItem;\n              parentKey = parentShape && parentShape.dataKey;\n              break;\n            }\n          }\n\n          return parentKey;\n        };\n\n        DocumentDataSource.prototype.getNodeArray = function (item) {\n          var items;\n          if (this.useNodeItems && item.parentDataObj) items = this.nodeDataImporter.getItems(item.parentDataObj);else if (item.containerDataObj) items = this.nodeDataImporter.getChildren(item.containerDataObj);\n          return items || this.nodeDataSource;\n        };\n\n        DocumentDataSource.prototype.getContainerShapeKey = function (shape) {\n          return shape.container && shape.container.dataKey;\n        }; // Edges\n\n\n        DocumentDataSource.prototype.updateEdge = function (model, connector) {\n          var _this = this;\n\n          var beginDataKey = connector.beginItem ? connector.beginItem.dataKey : undefined;\n          var endDataKey = connector.endItem ? connector.endItem.dataKey : undefined;\n          var edgeObj = this.findEdge(connector.dataKey);\n\n          if (!edgeObj) {\n            var dataObj = this.useEdgesArray() ? {} : undefined;\n            edgeObj = this.addEdgeInternal(dataObj, beginDataKey, endDataKey);\n\n            if (dataObj) {\n              this.edgeDataImporter.setKey(dataObj, edgeObj.key);\n              this.edgeDataSource.push(edgeObj.dataObj);\n            }\n\n            this.updateEdgeObjectProperties(connector, edgeObj, model.units);\n            this.updateEdgeObjectKey(connector, edgeObj, edgeObj.dataObj);\n\n            if (dataObj) {\n              this.beginChangesNotification();\n              this.changesListener.notifyEdgeInserted.call(this.changesListener, edgeObj.dataObj, function (data) {\n                _this.updateEdgeObjectKey(connector, edgeObj, data);\n\n                _this.endChangesNotification();\n              }, function (error) {\n                _this.endChangesNotification();\n              });\n            }\n          } else {\n            if (this.isEdgeObjectModified(connector, edgeObj, model.units)) {\n              this.updateEdgeObjectProperties(connector, edgeObj, model.units);\n\n              if (edgeObj.dataObj) {\n                this.beginChangesNotification();\n                this.changesListener.notifyEdgeUpdated.call(this.changesListener, this.edgeDataImporter.getKey(edgeObj.dataObj) || edgeObj.key, edgeObj.dataObj, function (key, data) {\n                  _this.endChangesNotification();\n                }, function (error) {\n                  _this.endChangesNotification();\n                });\n              }\n            }\n          }\n        };\n\n        DocumentDataSource.prototype.isEdgeObjectModified = function (connector, edgeObj, units) {\n          return this.isItemObjectModified(connector, edgeObj, this.edgeDataImporter) || edgeObj.from !== (connector.beginItem ? connector.beginItem.dataKey : undefined) || edgeObj.to !== (connector.endItem ? connector.endItem.dataKey : undefined) || this.edgeDataImporter.setFromPointIndex && edgeObj.fromPointIndex !== connector.beginConnectionPointIndex || this.edgeDataImporter.setToPointIndex && edgeObj.toPointIndex !== connector.endConnectionPointIndex || this.edgeDataImporter.setPoints && (!edgeObj.points || !Data_1.Data.ArrayEqual(edgeObj.points.map(function (ptObj) {\n            return ptObj.x;\n          }), connector.points.map(function (pt) {\n            return ModelUtils_1.ModelUtils.getlUnitValue(units, pt.x);\n          })) || !Data_1.Data.ArrayEqual(edgeObj.points.map(function (ptObj) {\n            return ptObj.y;\n          }), connector.points.map(function (pt) {\n            return ModelUtils_1.ModelUtils.getlUnitValue(units, pt.y);\n          }))) || this.edgeDataImporter.setText && !this.compareStrings(edgeObj.text, connector.getText()) || this.edgeDataImporter.setLineOption && edgeObj.lineOption !== connector.properties.lineOption || this.edgeDataImporter.setStartLineEnding && edgeObj.startLineEnding !== connector.properties.startLineEnding || this.edgeDataImporter.setEndLineEnding && edgeObj.endLineEnding !== connector.properties.endLineEnding;\n        };\n\n        DocumentDataSource.prototype.updateEdgeObjectProperties = function (connector, edgeObj, units) {\n          this.updateItemObjectProperties(edgeObj, connector, this.edgeDataImporter);\n\n          if (this.edgeDataImporter.setFrom) {\n            var fromObj = this.findNode(connector.beginItem && connector.beginItem.dataKey);\n            edgeObj.from = fromObj && fromObj.key;\n            if (edgeObj.dataObj) this.edgeDataImporter.setFrom(edgeObj.dataObj, fromObj && fromObj.dataObj && this.nodeDataImporter.getKey(fromObj.dataObj));\n          }\n\n          if (this.edgeDataImporter.setTo) {\n            var toObj = this.findNode(connector.endItem && connector.endItem.dataKey);\n            edgeObj.to = toObj && toObj.key;\n            if (edgeObj.dataObj) this.edgeDataImporter.setTo(edgeObj.dataObj, toObj && toObj.dataObj && this.nodeDataImporter.getKey(toObj.dataObj));\n          }\n\n          if (this.edgeDataImporter.setFromPointIndex) {\n            edgeObj.fromPointIndex = connector.beginConnectionPointIndex;\n            if (edgeObj.dataObj) this.edgeDataImporter.setFromPointIndex(edgeObj.dataObj, connector.beginConnectionPointIndex);\n          }\n\n          if (this.edgeDataImporter.setToPointIndex) {\n            edgeObj.toPointIndex = connector.endConnectionPointIndex;\n            if (edgeObj.dataObj) this.edgeDataImporter.setToPointIndex(edgeObj.dataObj, connector.endConnectionPointIndex);\n          }\n\n          if (this.edgeDataImporter.setPoints) {\n            var points = connector.points.map(function (pt) {\n              return {\n                x: ModelUtils_1.ModelUtils.getlUnitValue(units, pt.x),\n                y: ModelUtils_1.ModelUtils.getlUnitValue(units, pt.y)\n              };\n            });\n            edgeObj.points = points;\n            if (edgeObj.dataObj) this.edgeDataImporter.setPoints(edgeObj.dataObj, points);\n          }\n\n          if (this.edgeDataImporter.setText) {\n            var text = connector.getText();\n            edgeObj.text = text;\n            if (edgeObj.dataObj) this.edgeDataImporter.setText(edgeObj.dataObj, text);\n          }\n\n          if (this.edgeDataImporter.setLineOption) {\n            edgeObj.lineOption = connector.properties.lineOption;\n            if (edgeObj.dataObj) this.edgeDataImporter.setLineOption(edgeObj.dataObj, connector.properties.lineOption);\n          }\n\n          if (this.edgeDataImporter.setStartLineEnding) {\n            edgeObj.startLineEnding = connector.properties.startLineEnding;\n            if (edgeObj.dataObj) this.edgeDataImporter.setStartLineEnding(edgeObj.dataObj, connector.properties.startLineEnding);\n          }\n\n          if (this.edgeDataImporter.setEndLineEnding) {\n            edgeObj.endLineEnding = connector.properties.endLineEnding;\n            if (edgeObj.dataObj) this.edgeDataImporter.setEndLineEnding(edgeObj.dataObj, connector.properties.endLineEnding);\n          }\n        };\n\n        DocumentDataSource.prototype.updateEdgeObjectKey = function (connector, edgeObj, dataObj) {\n          var key = dataObj && this.edgeDataImporter.getKey(dataObj);\n\n          if (key !== undefined && key !== null && key !== edgeObj.key) {\n            edgeObj.key = key;\n            delete this.edgeKeyMap[edgeObj.key];\n            this.edgeKeyMap[key] = edgeObj.key;\n          }\n\n          connector.dataKey = edgeObj.key;\n\n          if (edgeObj.dataObj !== dataObj) {\n            var parentArray = this.edgeDataSource;\n            var index = parentArray.indexOf(edgeObj.dataObj);\n            parentArray.splice(index, 1, dataObj);\n            edgeObj.dataObj = dataObj;\n          }\n        };\n\n        DocumentDataSource.prototype.deleteEdges = function (model) {\n          var _this = this;\n\n          this.deleteItems(this.edges, function (key) {\n            return model.findConnectorByDataKey(key);\n          }, function (item) {\n            return _this.edgeDataSource;\n          }, function (item, dataModified) {\n            var key = item.dataObj && _this.edgeDataImporter.getKey(item.dataObj) || item.key;\n            var dataKey = _this.edgeKeyMap[key];\n            if (dataKey) delete _this.edgeKeyMap[key];\n\n            var edgeObj = _this.findEdge(dataKey);\n\n            if (edgeObj) _this.edges.splice(_this.edges.indexOf(edgeObj), 1);\n\n            if (dataModified) {\n              _this.beginChangesNotification();\n\n              _this.changesListener.notifyEdgeRemoved.call(_this.changesListener, key, item.dataObj, function (key, data) {\n                _this.endChangesNotification();\n              }, function (error) {\n                _this.endChangesNotification();\n              });\n            }\n          });\n        };\n\n        DocumentDataSource.prototype.compareStrings = function (str1, str2) {\n          if (typeof str1 === \"string\" && typeof str2 === \"string\") return str1 === str2;\n          return this.isEmptyString(str1) && this.isEmptyString(str2);\n        };\n\n        DocumentDataSource.prototype.isEmptyString = function (str) {\n          return str === \"\" || str === null || str === undefined;\n        };\n\n        DocumentDataSource.prototype.beginChangesNotification = function () {\n          this.updateLockCount++;\n        };\n\n        DocumentDataSource.prototype.endChangesNotification = function () {\n          this.updateLockCount--;\n\n          if (!this.isUpdateLocked()) {\n            setTimeout(function () {\n              this.changesListener.processDataChanges.call(this.changesListener, false);\n            }.bind(this), 0);\n          }\n        };\n\n        DocumentDataSource.prototype.isUpdateLocked = function () {\n          return this.updateLockCount > 0;\n        };\n\n        return DocumentDataSource;\n      }(DataSource_1.DataSource);\n\n      exports.DocumentDataSource = DocumentDataSource;\n      /***/\n    },\n    /* 297 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ShapeTypes_1 = __webpack_require__(1);\n\n      var ModelUtils_1 = __webpack_require__(6);\n\n      var DataImporter_1 = __webpack_require__(298);\n\n      var DataSourceItems_1 = __webpack_require__(299);\n\n      var Connector_1 = __webpack_require__(5);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var AddShapeHistoryItem_1 = __webpack_require__(51);\n\n      var AddConnectorHistoryItem_1 = __webpack_require__(52);\n\n      var AddConnectionHistoryItem_1 = __webpack_require__(37);\n\n      var SetSelectionHistoryItem_1 = __webpack_require__(44);\n\n      var ChangeShapeImageHistoryItem_1 = __webpack_require__(117);\n\n      var ChangeZindexHistoryItem_1 = __webpack_require__(76);\n\n      var ChangeStyleHistoryItem_1 = __webpack_require__(46);\n\n      var ChangeStyleTextHistoryItem_1 = __webpack_require__(36);\n\n      var ChangeConnectorPropertyHistoryItem_1 = __webpack_require__(55);\n\n      var ChangeConnectorTextHistoryItem_1 = __webpack_require__(54);\n\n      var ChangeLockedHistoryItem_1 = __webpack_require__(104);\n\n      var Color_1 = __webpack_require__(38);\n\n      var Svg_1 = __webpack_require__(79);\n\n      var DataSource =\n      /** @class */\n      function () {\n        function DataSource(key, nodeDataSource, edgeDataSource, nodeDataImporter, edgeDataImporter) {\n          this.key = key;\n          this.nodes = [];\n          this.edges = [];\n          this.nodeKeyMap = {};\n          this.edgeKeyMap = {};\n          this.useNodeParentId = false;\n          this.useNodeContainerId = false;\n          this.useNodeChildren = false;\n          this.useNodeItems = false;\n          this.containers = null;\n          if (key === undefined || key === null) throw new Error(\"DataSource key must be specified\");\n          this.key = key.toString();\n          this.nodeDataImporter = this.createNodeDataImporter(nodeDataImporter);\n          this.edgeDataImporter = this.createEdgeDataImporter(edgeDataImporter);\n          this.nodeDataSource = nodeDataSource || [];\n          this.edgeDataSource = edgeDataSource || [];\n          this.fetchData();\n        }\n\n        DataSource.prototype.createNodeDataImporter = function (source) {\n          var result = new DataImporter_1.DataSourceNodeDataImporter();\n          if (source) this.assignNodeDataImporterProperties(source, result);\n          return result;\n        };\n\n        DataSource.prototype.createEdgeDataImporter = function (source) {\n          var result = new DataImporter_1.DataSourceEdgeDataImporter();\n          if (source) this.assignEdgeDataImporterProperties(source, result);\n          return result;\n        };\n\n        DataSource.prototype.assignItemDataImporterProperties = function (source, importer) {\n          if (source.getKey) importer.getKey = source.getKey;\n          if (source.setKey) importer.setKey = source.setKey;\n          if (source.getLocked) importer.getLocked = source.getLocked;\n          if (source.setLocked) importer.setLocked = source.setLocked;\n          if (source.getStyle) importer.getStyle = source.getStyle;\n          if (source.setStyle) importer.setStyle = source.setStyle;\n          if (source.getStyleText) importer.getStyleText = source.getStyleText;\n          if (source.setStyleText) importer.setStyleText = source.setStyleText;\n          if (source.getZIndex) importer.getZIndex = source.getZIndex;\n          if (source.setZIndex) importer.setZIndex = source.setZIndex;\n        };\n\n        DataSource.prototype.assignNodeDataImporterProperties = function (source, importer) {\n          this.assignItemDataImporterProperties(source, importer);\n          if (source.getType) importer.getType = source.getType;\n          if (source.setType) importer.setType = source.setType;\n          if (source.getImage) importer.getImage = source.getImage;\n          if (source.setImage) importer.setImage = source.setImage;\n          if (source.getText) importer.getText = source.getText;\n          if (source.setText) importer.setText = source.setText;\n          if (source.getLeft) importer.getLeft = source.getLeft;\n          if (source.setLeft) importer.setLeft = source.setLeft;\n          if (source.getTop) importer.getTop = source.getTop;\n          if (source.setTop) importer.setTop = source.setTop;\n          if (source.getWidth) importer.getWidth = source.getWidth;\n          if (source.setWidth) importer.setWidth = source.setWidth;\n          if (source.getHeight) importer.getHeight = source.getHeight;\n          if (source.setHeight) importer.setHeight = source.setHeight;\n          if (source.getChildren) importer.getChildren = source.getChildren;\n          if (source.setChildren) importer.setChildren = source.setChildren;\n          if (source.getParentKey) importer.getParentKey = source.getParentKey;\n          if (source.setParentKey) importer.setParentKey = source.setParentKey;\n          if (source.getItems) importer.getItems = source.getItems;\n          if (source.setItems) importer.setItems = source.setItems;\n          if (source.getContainerKey) importer.getContainerKey = source.getContainerKey;\n          if (source.setContainerKey) importer.setContainerKey = source.setContainerKey;\n        };\n\n        DataSource.prototype.assignEdgeDataImporterProperties = function (source, importer) {\n          this.assignItemDataImporterProperties(source, importer);\n          if (source.getFrom) importer.getFrom = source.getFrom;\n          if (source.setFrom) importer.setFrom = source.setFrom;\n          if (source.getFromPointIndex) importer.getFromPointIndex = source.getFromPointIndex;\n          if (source.setFromPointIndex) importer.setFromPointIndex = source.setFromPointIndex;\n          if (source.getTo) importer.getTo = source.getTo;\n          if (source.setTo) importer.setTo = source.setTo;\n          if (source.getToPointIndex) importer.getToPointIndex = source.getToPointIndex;\n          if (source.setToPointIndex) importer.setToPointIndex = source.setToPointIndex;\n          if (source.getPoints) importer.getPoints = source.getPoints;\n          if (source.setPoints) importer.setPoints = source.setPoints;\n          if (source.getText) importer.getText = source.getText;\n          if (source.setText) importer.setText = source.setText;\n          if (source.getLineOption) importer.getLineOption = source.getLineOption;\n          if (source.setLineOption) importer.setLineOption = source.setLineOption;\n          if (source.getStartLineEnding) importer.getStartLineEnding = source.getStartLineEnding;\n          if (source.setStartLineEnding) importer.setStartLineEnding = source.setStartLineEnding;\n          if (source.getEndLineEnding) importer.getEndLineEnding = source.getEndLineEnding;\n          if (source.setEndLineEnding) importer.setEndLineEnding = source.setEndLineEnding;\n        };\n\n        DataSource.prototype.fetchData = function () {\n          var _this = this;\n\n          this.useNodeParentId = this.nodeDataImporter.getParentKey !== undefined;\n          this.useNodeContainerId = this.nodeDataImporter.getContainerKey !== undefined;\n          this.useNodeItems = this.nodeDataImporter.getItems !== undefined;\n          this.useNodeChildren = this.nodeDataImporter.getChildren !== undefined;\n          if (this.useEdgesArray() && this.useNodeParentId) throw new Error(\"You cannot use edges array and parentKey simultaneously.\");\n          if (this.useEdgesArray() && this.useNodeItems) throw new Error(\"You cannot use edges array and items array simultaneously.\");\n          if (this.useNodeParentId && this.useNodeItems) throw new Error(\"You cannot use parentKey and items array simultaneously.\");\n          if (this.useNodeContainerId && this.useNodeChildren) throw new Error(\"You cannot use containerKey and children array simultaneously.\");\n          this.nodeDataSource.forEach(function (nodeDataObj) {\n            _this.addNode(nodeDataObj);\n          });\n\n          if (this.useEdgesArray()) {\n            this.edgeDataSource.forEach(function (edgeDataObj) {\n              _this.addEdge(edgeDataObj);\n            });\n          } else {\n            this.nodes.forEach(function (node) {\n              _this.addNodeEdgesByParentId(node);\n            });\n          }\n        };\n\n        DataSource.prototype.isContainer = function (itemKey) {\n          var _this = this;\n\n          if (!this.containers && this.useNodeContainerId) {\n            this.containers = this.nodeDataSource.map(function (i) {\n              return _this.nodeDataImporter.getContainerKey(i);\n            }).filter(function (i) {\n              return i !== undefined && i !== null;\n            }).reduce(function (map, i) {\n              map[i] = true;\n              return map;\n            }, {});\n          }\n\n          return this.containers && this.containers[itemKey];\n        };\n\n        DataSource.prototype.useEdgesArray = function () {\n          return Array.isArray(this.edgeDataSource) && (this.edgeDataSource.length || !(this.useNodeParentId || this.useNodeItems));\n        };\n\n        DataSource.prototype.addNode = function (nodeDataObj, parentNodeDataObj, containerKey, containerNodeDataObj) {\n          var _this = this;\n\n          var childNodeDataObjs = this.nodeDataImporter.getChildren && this.nodeDataImporter.getChildren(nodeDataObj);\n          var hasChildren = childNodeDataObjs && Array.isArray(childNodeDataObjs) && childNodeDataObjs.length;\n          var isContainer = hasChildren || this.isContainer(this.nodeDataImporter.getKey(nodeDataObj));\n          var type = this.nodeDataImporter.getType && this.nodeDataImporter.getType(nodeDataObj) || isContainer && ShapeTypes_1.ShapeTypes.VerticalContainer || ShapeTypes_1.ShapeTypes.Rectangle;\n          var text = this.nodeDataImporter.getText && (this.nodeDataImporter.getText(nodeDataObj) || \"\");\n          var node = this.addNodeInternal(nodeDataObj, type, text, parentNodeDataObj, containerKey, containerNodeDataObj);\n          this.assignNodeProperties(node, nodeDataObj);\n\n          if (hasChildren) {\n            childNodeDataObjs.forEach(function (childNodeDataObj) {\n              _this.addNode(childNodeDataObj, undefined, node.key, nodeDataObj);\n            });\n          }\n\n          if (this.useNodeItems) {\n            var itemDataObjs = this.nodeDataImporter.getItems(nodeDataObj);\n\n            if (Array.isArray(itemDataObjs) && itemDataObjs.length) {\n              itemDataObjs.forEach(function (itemDataObj) {\n                var itemNode = _this.addNode(itemDataObj, nodeDataObj, containerKey, containerNodeDataObj);\n\n                _this.addEdgeInternal(undefined, node.key, itemNode.key);\n              });\n            }\n          }\n\n          return node;\n        };\n\n        DataSource.prototype.addNodeEdgesByParentId = function (node) {\n          if (this.useNodeParentId) {\n            var parentKey = this.nodeDataImporter.getParentKey(node.dataObj);\n\n            if (parentKey !== undefined && parentKey !== null) {\n              this.addEdgeInternal(undefined, this.getNodeKey(node.dataObj, this.nodeDataImporter.getParentKey), this.getNodeKey(node.dataObj, this.nodeDataImporter.getKey));\n            }\n          }\n        };\n\n        DataSource.prototype.addNodeInternal = function (nodeDataObj, type, text, parentNodeDataObj, containerKey, containerNodeDataObj) {\n          var externalKey = this.nodeDataImporter.getKey(nodeDataObj);\n          var key = externalKey !== undefined && externalKey !== null ? externalKey : ModelUtils_1.ModelUtils.getGuidItemKey();\n          var node = new DataSourceItems_1.DataSourceNodeItem(this.key, key, nodeDataObj, type, text, parentNodeDataObj, containerKey, containerNodeDataObj);\n          this.nodes.push(node);\n\n          if (externalKey === undefined || externalKey === null) {\n            externalKey = key;\n            this.nodeDataImporter.setKey(nodeDataObj, key);\n          }\n\n          if (externalKey !== undefined && externalKey !== null) this.nodeKeyMap[externalKey] = key;\n          return node;\n        };\n\n        DataSource.prototype.addEdge = function (edgeDataObj) {\n          var edge = this.addEdgeInternal(edgeDataObj, this.getNodeKey(edgeDataObj, this.edgeDataImporter.getFrom), this.getNodeKey(edgeDataObj, this.edgeDataImporter.getTo));\n          this.assignEdgeProperties(edge, edgeDataObj);\n          return edge;\n        };\n\n        DataSource.prototype.addEdgeInternal = function (edgeDataObj, from, to) {\n          var externalKey = edgeDataObj && this.edgeDataImporter.getKey(edgeDataObj);\n          var key = externalKey !== undefined && externalKey !== null ? externalKey : ModelUtils_1.ModelUtils.getGuidItemKey();\n          var edge = new DataSourceItems_1.DataSourceEdgeItem(this.key, key, edgeDataObj, from, to);\n          this.edges.push(edge);\n\n          if (externalKey === undefined || externalKey === null) {\n            externalKey = key;\n            if (edgeDataObj) this.edgeDataImporter.setKey(edgeDataObj, key);\n          }\n\n          if (externalKey !== undefined && externalKey !== null) this.edgeKeyMap[externalKey] = key;\n          return edge;\n        };\n\n        DataSource.prototype.assignItemProperties = function (item, dataObj, importer) {\n          if (importer.getLocked) item.locked = importer.getLocked(dataObj);\n          if (importer.getStyle) item.style = importer.getStyle(dataObj);\n          if (importer.getStyleText) item.styleText = importer.getStyleText(dataObj);\n          if (importer.getZIndex) item.zIndex = importer.getZIndex(dataObj);\n        };\n\n        DataSource.prototype.assignNodeProperties = function (item, dataObj) {\n          this.assignItemProperties(item, dataObj, this.nodeDataImporter);\n          if (this.nodeDataImporter.getImage) item.image = this.nodeDataImporter.getImage(dataObj);\n          if (this.nodeDataImporter.getLeft) item.left = this.nodeDataImporter.getLeft(dataObj);\n          if (this.nodeDataImporter.getTop) item.top = this.nodeDataImporter.getTop(dataObj);\n          if (this.nodeDataImporter.getWidth) item.width = this.nodeDataImporter.getWidth(dataObj);\n          if (this.nodeDataImporter.getHeight) item.height = this.nodeDataImporter.getHeight(dataObj);\n          if (this.nodeDataImporter.getContainerKey) item.containerKey = this.nodeDataImporter.getContainerKey(dataObj);\n        };\n\n        DataSource.prototype.assignEdgeProperties = function (item, dataObj) {\n          this.assignItemProperties(item, dataObj, this.edgeDataImporter);\n          if (this.edgeDataImporter.getFromPointIndex) item.fromPointIndex = this.edgeDataImporter.getFromPointIndex(dataObj);\n          if (this.edgeDataImporter.getToPointIndex) item.toPointIndex = this.edgeDataImporter.getToPointIndex(dataObj);\n          if (this.edgeDataImporter.getPoints) item.points = this.edgeDataImporter.getPoints(dataObj);\n          if (this.edgeDataImporter.getText) item.text = this.edgeDataImporter.getText(dataObj);\n          if (this.edgeDataImporter.getLineOption) item.lineOption = this.edgeDataImporter.getLineOption(dataObj);\n          if (this.edgeDataImporter.getStartLineEnding) item.startLineEnding = this.edgeDataImporter.getStartLineEnding(dataObj);\n          if (this.edgeDataImporter.getEndLineEnding) item.endLineEnding = this.edgeDataImporter.getEndLineEnding(dataObj);\n        };\n\n        DataSource.prototype.findNode = function (key) {\n          return this.nodes.filter(function (i) {\n            return key !== undefined && i.key === key;\n          })[0];\n        };\n\n        DataSource.prototype.findEdge = function (key) {\n          return this.edges.filter(function (i) {\n            return key !== undefined && i.key === key;\n          })[0];\n        };\n\n        DataSource.prototype.getNodeKey = function (nodeDataObj, getKey) {\n          return this.nodeKeyMap[getKey(nodeDataObj)];\n        };\n\n        DataSource.prototype.createModelItems = function (history, model, selection, layoutParameters, snapToGrid, gridSize) {\n          DataSource.createModelItems(history, model, selection, this, layoutParameters, false, true, snapToGrid, gridSize);\n        };\n\n        DataSource.createModelItems = function (history, model, selection, dataSource, layoutParameters, setDataKeys, selectItems, snapToGrid, gridSize) {\n          var DEFAULT_STEP = 2000;\n          var rowIndex = 0;\n          var colIndex = 0;\n          var externalToInnerMap = {};\n          var shapes = [];\n          var connectors = [];\n          history.beginTransaction();\n          dataSource.nodes.forEach(function (node) {\n            var point = new Utils_1.Point(colIndex++ * DEFAULT_STEP, rowIndex * DEFAULT_STEP);\n            var shape = DataSource.createShapeByNode(history, model, node, point, setDataKeys);\n            if (node.key !== undefined) externalToInnerMap[node.key] = shape.key;\n\n            if (colIndex > 4) {\n              colIndex = 0;\n              rowIndex++;\n            }\n\n            shapes.push(shape);\n          });\n          dataSource.nodes.forEach(function (node) {\n            if (node.containerKey !== undefined && node.containerKey !== null) {\n              var shapeKey = externalToInnerMap[node.key];\n              var shape = model.findShape(shapeKey);\n              var containerShapeKey = externalToInnerMap[node.containerKey];\n              var containerShape = model.findShape(containerShapeKey);\n              if (containerShape) ModelUtils_1.ModelUtils.insertToContainer(history, model, shape, containerShape);\n            }\n          });\n          dataSource.edges.forEach(function (edge) {\n            var toShape = model.findShape(externalToInnerMap[edge.to]);\n            var fromShape = model.findShape(externalToInnerMap[edge.from]);\n\n            if (toShape && fromShape !== undefined) {\n              var connector = DataSource.createConnectorByEdge(history, model, edge, toShape, fromShape, setDataKeys);\n              connectors.push(connector);\n              ModelUtils_1.ModelUtils.updateConnectorContainer(history, model, connector);\n            }\n          });\n\n          if (layoutParameters !== undefined) {\n            var graphInfo = ModelUtils_1.ModelUtils.getGraphInfoByItems(model, shapes, connectors);\n            graphInfo.forEach(function (info) {\n              var layout = layoutParameters.getLayoutBuilder(info.graph).build();\n              var nonGraphItems = ModelUtils_1.ModelUtils.getNonGraphItems(model, info.container, layout.nodeToLayout, shapes, connectors);\n              ModelUtils_1.ModelUtils.applyLayout(history, model, info.container, info.graph, layout, nonGraphItems, layoutParameters.layoutSettings, snapToGrid, gridSize);\n            });\n          }\n\n          if (selectItems) {\n            var items = connectors.map(function (c) {\n              return c.key;\n            }).concat(shapes.map(function (s) {\n              return s.key;\n            }));\n            history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(selection, items));\n          }\n\n          ModelUtils_1.ModelUtils.tryUpdateModelSize(history, model);\n          history.endTransaction();\n        };\n\n        DataSource.createShapeByNode = function (history, model, node, point, setDataKeys) {\n          var dataKey = setDataKeys ? node.key : undefined;\n          if (node.left !== undefined) point.x = ModelUtils_1.ModelUtils.getTwipsValue(model.units, node.left);\n          if (node.top !== undefined) point.y = ModelUtils_1.ModelUtils.getTwipsValue(model.units, node.top);\n          var insert = new AddShapeHistoryItem_1.AddShapeHistoryItem(node.type, point, node.text, dataKey);\n          history.addAndRedo(insert);\n          var shape = model.findShape(insert.shapeKey);\n          var size = shape.size.clone();\n          if (node.width !== undefined) size.width = ModelUtils_1.ModelUtils.getTwipsValue(model.units, node.width);\n          if (node.height !== undefined) size.height = ModelUtils_1.ModelUtils.getTwipsValue(model.units, node.height);\n          ModelUtils_1.ModelUtils.setShapeSize(history, model, shape, point, size);\n          if (node.image !== undefined) history.addAndRedo(new ChangeShapeImageHistoryItem_1.ChangeShapeImageHistoryItem(shape, node.image));\n          this.changeItemByDataItem(history, shape, node);\n          return shape;\n        };\n\n        DataSource.createConnectorByEdge = function (history, model, edge, toShape, fromShape, setDataKeys) {\n          var dataKey = setDataKeys ? edge.key : undefined;\n          var points = Array.isArray(edge.points) && edge.points.length > 1 ? edge.points.map(function (ptObj) {\n            if (ptObj.x !== undefined && ptObj.y !== undefined) return new Utils_1.Point(ModelUtils_1.ModelUtils.getTwipsValue(model.units, ptObj.x), ModelUtils_1.ModelUtils.getTwipsValue(model.units, ptObj.y));\n          }).filter(function (pt) {\n            return pt;\n          }) : [fromShape.position.clone(), toShape.position.clone()];\n          var insert = new AddConnectorHistoryItem_1.AddConnectorHistoryItem(points, dataKey);\n          history.addAndRedo(insert);\n          var connector = model.findConnector(insert.connectorKey);\n          var fromPointIndex = edge.fromPointIndex !== undefined ? edge.fromPointIndex : -1;\n          history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(connector, fromShape, fromPointIndex, Connector_1.ConnectorPosition.Begin));\n          var toPointIndex = edge.toPointIndex !== undefined ? edge.toPointIndex : -1;\n          history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(connector, toShape, toPointIndex, Connector_1.ConnectorPosition.End));\n          ModelUtils_1.ModelUtils.updateConnectorAttachedPoints(history, model, connector);\n          if (edge.text !== undefined) history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(connector, Connector_1.CONNECTOR_DEFAULT_TEXT_POSITION, edge.text));\n          if (edge.lineOption !== undefined) history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(connector.key, \"lineOption\", edge.lineOption));\n          if (edge.startLineEnding !== undefined) history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(connector.key, \"startLineEnding\", edge.startLineEnding));\n          if (edge.endLineEnding !== undefined) history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(connector.key, \"endLineEnding\", edge.endLineEnding));\n          this.changeItemByDataItem(history, connector, edge);\n          return connector;\n        };\n\n        DataSource.changeItemByDataItem = function (history, item, dataItem) {\n          if (dataItem.zIndex !== undefined) {\n            history.addAndRedo(new ChangeZindexHistoryItem_1.ChangeZindexHistoryItem(item, dataItem.zIndex));\n          }\n\n          if (dataItem.style !== undefined) {\n            for (var key in dataItem.style) {\n              if (!dataItem.style.hasOwnProperty(key)) continue;\n              var value = Svg_1.isColorProperty(key) ? Color_1.ColorHelper.stringToHash(dataItem.style[key]) : dataItem.style[key];\n              history.addAndRedo(new ChangeStyleHistoryItem_1.ChangeStyleHistoryItem(item.key, key, value));\n            }\n          }\n\n          if (dataItem.styleText !== undefined) {\n            for (var key in dataItem.styleText) {\n              if (!dataItem.styleText.hasOwnProperty(key)) continue;\n              var value = Svg_1.isColorProperty(key) ? Color_1.ColorHelper.stringToHash(dataItem.styleText[key]) : dataItem.styleText[key];\n              history.addAndRedo(new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(item.key, key, value));\n            }\n          }\n\n          if (dataItem.locked !== undefined) {\n            history.addAndRedo(new ChangeLockedHistoryItem_1.ChangeLockedHistoryItem(item, dataItem.locked));\n          }\n        };\n\n        return DataSource;\n      }();\n\n      exports.DataSource = DataSource;\n      /***/\n    },\n    /* 298 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics226 = function extendStatics(d, b) {\n          _extendStatics226 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics226(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics226(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DataSourceItemDataImporter =\n      /** @class */\n      function () {\n        function DataSourceItemDataImporter() {\n          this.getKey = function (obj) {\n            return obj[\"id\"];\n          };\n\n          this.setKey = function (obj, value) {\n            obj[\"id\"] = value;\n          };\n\n          this.getLocked = undefined;\n          this.setLocked = undefined;\n          this.getStyle = undefined;\n          this.setStyle = undefined;\n          this.getStyleText = undefined;\n          this.setStyleText = undefined;\n          this.getZIndex = undefined;\n          this.setZIndex = undefined;\n        }\n\n        return DataSourceItemDataImporter;\n      }();\n\n      exports.DataSourceItemDataImporter = DataSourceItemDataImporter;\n\n      var DataSourceNodeDataImporter =\n      /** @class */\n      function (_super) {\n        __extends(DataSourceNodeDataImporter, _super);\n\n        function DataSourceNodeDataImporter() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.getType = undefined;\n          _this.setType = undefined;\n          _this.getText = undefined;\n          _this.setText = undefined;\n          _this.getImage = undefined;\n          _this.setImage = undefined;\n          _this.getLeft = undefined;\n          _this.setLeft = undefined;\n          _this.getTop = undefined;\n          _this.setTop = undefined;\n          _this.getWidth = undefined;\n          _this.setWidth = undefined;\n          _this.getHeight = undefined;\n          _this.setHeight = undefined;\n          _this.getChildren = undefined;\n          _this.setChildren = undefined;\n          _this.getParentKey = undefined;\n          _this.setParentKey = undefined;\n          _this.getItems = undefined;\n          _this.setItems = undefined;\n          _this.getContainerKey = undefined;\n          _this.setContainerKey = undefined;\n          return _this;\n        }\n\n        return DataSourceNodeDataImporter;\n      }(DataSourceItemDataImporter);\n\n      exports.DataSourceNodeDataImporter = DataSourceNodeDataImporter;\n\n      var DataSourceEdgeDataImporter =\n      /** @class */\n      function (_super) {\n        __extends(DataSourceEdgeDataImporter, _super);\n\n        function DataSourceEdgeDataImporter() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.getFrom = function (obj) {\n            return obj[\"from\"];\n          };\n\n          _this.setFrom = function (obj, value) {\n            obj[\"from\"] = value;\n          };\n\n          _this.getFromPointIndex = undefined;\n          _this.setFromPointIndex = undefined;\n\n          _this.getTo = function (obj) {\n            return obj[\"to\"];\n          };\n\n          _this.setTo = function (obj, value) {\n            obj[\"to\"] = value;\n          };\n\n          _this.getToPointIndex = undefined;\n          _this.setToPointIndex = undefined;\n          _this.getPoints = undefined;\n          _this.setPoints = undefined;\n          _this.getText = undefined;\n          _this.setText = undefined;\n          _this.getLineOption = undefined;\n          _this.setLineOption = undefined;\n          _this.getStartLineEnding = undefined;\n          _this.setStartLineEnding = undefined;\n          _this.getEndLineEnding = undefined;\n          _this.setEndLineEnding = undefined;\n          return _this;\n        }\n\n        return DataSourceEdgeDataImporter;\n      }(DataSourceItemDataImporter);\n\n      exports.DataSourceEdgeDataImporter = DataSourceEdgeDataImporter;\n      /***/\n    },\n    /* 299 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics227 = function extendStatics(d, b) {\n          _extendStatics227 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics227(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics227(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var DataSourceItem =\n      /** @class */\n      function () {\n        function DataSourceItem(sourceKey, key, dataObj) {\n          this.sourceKey = sourceKey;\n          this.key = key;\n          this.dataObj = dataObj;\n        }\n\n        return DataSourceItem;\n      }();\n\n      exports.DataSourceItem = DataSourceItem;\n\n      var DataSourceNodeItem =\n      /** @class */\n      function (_super) {\n        __extends(DataSourceNodeItem, _super);\n\n        function DataSourceNodeItem(sourceKey, key, dataObj, type, text, parentDataObj, containerKey, containerDataObj) {\n          var _this = _super.call(this, sourceKey, key, dataObj) || this;\n\n          _this.type = type;\n          _this.text = text;\n          _this.parentDataObj = parentDataObj;\n          _this.containerKey = containerKey;\n          _this.containerDataObj = containerDataObj;\n          return _this;\n        }\n\n        return DataSourceNodeItem;\n      }(DataSourceItem);\n\n      exports.DataSourceNodeItem = DataSourceNodeItem;\n\n      var DataSourceEdgeItem =\n      /** @class */\n      function (_super) {\n        __extends(DataSourceEdgeItem, _super);\n\n        function DataSourceEdgeItem(sourceKey, key, dataObj, from, to) {\n          var _this = _super.call(this, sourceKey, key, dataObj) || this;\n\n          _this.sourceKey = sourceKey;\n          _this.from = from;\n          _this.to = to;\n          return _this;\n        }\n\n        return DataSourceEdgeItem;\n      }(DataSourceItem);\n\n      exports.DataSourceEdgeItem = DataSourceEdgeItem;\n      /***/\n    },\n    /* 300 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      var LOG_MIN_ZOOM = Math.log(0.05);\n      var LOG_MAX_ZOOM = Math.log(3);\n      var ZOOM_STEPS = 40;\n      var ZERO_STEP = getStepByZoom(1);\n\n      var ViewController =\n      /** @class */\n      function () {\n        function ViewController(settings) {\n          this.settings = settings;\n        }\n\n        ViewController.prototype.initialize = function (view) {\n          this.view = view;\n        };\n\n        ViewController.prototype.scrollTo = function (modelPoint, offsetPoint) {\n          if (this.view) this.view.setScrollTo(modelPoint, offsetPoint);\n        };\n\n        ViewController.prototype.scrollBy = function (offset) {\n          if (this.view && (offset.x !== 0 || offset.y !== 0)) return this.view.scrollBy(offset);\n          return offset;\n        };\n\n        ViewController.prototype.normalize = function () {\n          this.view.tryNormalizePaddings();\n        };\n\n        ViewController.prototype.getNextStepZoom = function (increase) {\n          var currentZoomStep = this.getNearestCurrentZoomStep();\n          var delta = increase ? 1 : -1;\n          var step = Math.min(ZOOM_STEPS - 1, Math.max(0, currentZoomStep + delta));\n\n          if (step !== ZERO_STEP) {\n            var logZoom = LOG_MIN_ZOOM + (LOG_MAX_ZOOM - LOG_MIN_ZOOM) * step / (ZOOM_STEPS - 1);\n            return Math.exp(logZoom);\n          }\n\n          return 1;\n        };\n\n        ViewController.prototype.getNearestCurrentZoomStep = function () {\n          var zoom = this.getZoom();\n          return getStepByZoom(zoom);\n        };\n\n        ViewController.prototype.getZoom = function () {\n          return this.view ? this.view.actualZoom : this.settings.zoomLevel;\n        };\n\n        ViewController.prototype.resetScroll = function () {\n          this.view.update({\n            horizontal: true,\n            vertical: true\n          });\n        };\n\n        return ViewController;\n      }();\n\n      exports.ViewController = ViewController;\n\n      function getStepByZoom(zoom) {\n        var logZoom = Math.log(zoom);\n        return Math.round((logZoom - LOG_MIN_ZOOM) * (ZOOM_STEPS - 1) / (LOG_MAX_ZOOM - LOG_MIN_ZOOM));\n      }\n      /***/\n\n    },\n    /* 301 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var TextToolbox_1 = __webpack_require__(302);\n\n      var IconToolbox_1 = __webpack_require__(303);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(25);\n\n      var ToolboxManager =\n      /** @class */\n      function () {\n        function ToolboxManager(readonly) {\n          this.toolboxes = [];\n          this.readonly = readonly;\n        }\n\n        ToolboxManager.prototype.create = function (parent, shapeIconSize, shapeIconSpacing, shapeIconAttributes, shapes, renderAsText) {\n          var shapeTypes = Array.isArray(shapes) ? shapes : ShapeDescriptionManager_1.ShapeDescriptionManager.getTypesByCategory(shapes);\n          var toolbox = renderAsText ? new TextToolbox_1.TextToolbox(parent, this.readonly, {\n            shapeTypes: shapeTypes\n          }) : new IconToolbox_1.IconToolbox(parent, this.readonly, {\n            shapeIconSize: shapeIconSize,\n            shapeIconSpacing: shapeIconSpacing,\n            shapeIconAttributes: shapeIconAttributes,\n            shapeTypes: shapeTypes\n          });\n          toolbox.render();\n          this.toolboxes.push(toolbox);\n          return toolbox;\n        };\n\n        ToolboxManager.prototype.dispose = function () {\n          for (var i = 0; i < this.toolboxes.length; i++) {\n            this.toolboxes[i].dispose();\n          }\n        };\n\n        ToolboxManager.prototype.applyFilter = function (str, filteringToolboxes) {\n          var _this = this;\n\n          return this.toolboxes.reduce(function (aggr, toolbox, index) {\n            (typeof filteringToolboxes !== \"number\" || index === filteringToolboxes) && toolbox.render(function (shapeType) {\n              return _this.searchFilter(shapeType, str, index);\n            }) && aggr.push(index);\n            return aggr;\n          }, []);\n        };\n\n        ToolboxManager.prototype.searchFilter = function (shapeType, str, toolboxIndex, filteringToolboxes) {\n          if (!str || filteringToolboxes && filteringToolboxes.indexOf(toolboxIndex) === -1) return true;\n          return shapeType.indexOf(str) > -1;\n        };\n\n        ToolboxManager.prototype.notifyReadOnlyChanged = function (readOnly) {\n          this.readonly = readOnly;\n        };\n\n        return ToolboxManager;\n      }();\n\n      exports.ToolboxManager = ToolboxManager;\n      /***/\n    },\n    /* 302 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics228 = function extendStatics(d, b) {\n          _extendStatics228 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics228(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics228(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Toolbox_1 = __webpack_require__(129);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(25);\n\n      var TextToolbox =\n      /** @class */\n      function (_super) {\n        __extends(TextToolbox, _super);\n\n        function TextToolbox() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        TextToolbox.prototype.createElements = function (element, shapeTypes) {\n          shapeTypes.forEach(function (shapeType) {\n            var description = ShapeDescriptionManager_1.ShapeDescriptionManager.get(shapeType);\n            var itemEl = document.createElement(\"div\");\n            itemEl.setAttribute(\"class\", \"toolbox-text-item\");\n            itemEl.setAttribute(\"data-tb-type\", shapeType);\n            itemEl.innerHTML = description.defaultText;\n            element.appendChild(itemEl);\n          });\n        };\n\n        TextToolbox.prototype.createDraggingElement = function (draggingObject) {\n          var element = document.createElement(\"DIV\");\n          element.setAttribute(\"class\", \"dxdi-toolbox-drag-text-item\");\n          var shapeDescription = ShapeDescriptionManager_1.ShapeDescriptionManager.get(draggingObject.evt.data);\n          element.innerHTML = shapeDescription.defaultText;\n          document.body.appendChild(element);\n          return element;\n        };\n\n        return TextToolbox;\n      }(Toolbox_1.Toolbox);\n\n      exports.TextToolbox = TextToolbox;\n      /***/\n    },\n    /* 303 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics229 = function extendStatics(d, b) {\n          _extendStatics229 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics229(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics229(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Toolbox_1 = __webpack_require__(129);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(25);\n\n      var RenderManager_1 = __webpack_require__(12);\n\n      var Shape_1 = __webpack_require__(11);\n\n      var UnitConverter_1 = __webpack_require__(13);\n\n      var Utils_1 = __webpack_require__(0);\n\n      var TextShapeDescription_1 = __webpack_require__(93);\n\n      var IconToolbox =\n      /** @class */\n      function (_super) {\n        __extends(IconToolbox, _super);\n\n        function IconToolbox() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        IconToolbox.prototype.createElements = function (element, shapeTypes) {\n          var svgElement = document.createElementNS(RenderManager_1.svgNS, \"svg\");\n          svgElement.className.baseVal = \"dxdi-canvas\";\n          element.appendChild(svgElement);\n          this.drawShapeIcons(svgElement, shapeTypes, svgElement.getBoundingClientRect().width);\n        };\n\n        IconToolbox.prototype.drawShapeIcons = function (parent, shapeTypes, svgWidth) {\n          var _this = this;\n\n          var lineWidth = UnitConverter_1.UnitConverter.twipsToPixels(Shape_1.Shape.lineWidth);\n          svgWidth -= 2 * lineWidth;\n          var iconCount = 1;\n          var width = this.options.shapeIconSize;\n\n          while (width < svgWidth) {\n            width += this.options.shapeIconSpacing + this.options.shapeIconSize;\n            if (width < svgWidth) iconCount++;\n          }\n\n          var shapeIconSpacing = iconCount > 1 ? (svgWidth - this.options.shapeIconSize * iconCount) / (iconCount - 1) : 0;\n          var xPos = lineWidth,\n              yPos = lineWidth;\n          shapeTypes.forEach(function (shapeType, index) {\n            if (index > 0 && index % iconCount === 0) {\n              xPos = lineWidth;\n              yPos += _this.options.shapeIconSize + shapeIconSpacing;\n            }\n\n            var shapeDescription = ShapeDescriptionManager_1.ShapeDescriptionManager.get(shapeType);\n\n            var shape = _this.createShape(shapeDescription, xPos, yPos);\n\n            _this.updateShapeIconBounds(shape);\n\n            _this.drawShape(parent, shape);\n\n            xPos += _this.options.shapeIconSize + shapeIconSpacing;\n          });\n          parent.style.height = yPos + this.options.shapeIconSize + lineWidth + \"px\";\n        };\n\n        IconToolbox.prototype.drawShape = function (parent, shape) {\n          var primitives = shape.description.createPrimitives(shape, true);\n          var gEl = document.createElementNS(RenderManager_1.svgNS, \"g\");\n          gEl.setAttribute(\"data-tb-type\", shape.description.key.toString());\n          gEl.setAttribute(\"class\", \"toolbox-item\");\n          gEl.setAttribute(\"title\", shape.description.title);\n\n          for (var key in this.options.shapeIconAttributes) {\n            if (this.options.shapeIconAttributes.hasOwnProperty(key)) gEl.setAttribute(key, this.options.shapeIconAttributes[key]);\n          }\n\n          parent.appendChild(gEl);\n          primitives.forEach(function (pr) {\n            var el = pr.createElement();\n            gEl.appendChild(el);\n            pr.applyElementProperties(el);\n          });\n        };\n\n        IconToolbox.prototype.createShape = function (shapeDescription, xPos, yPos) {\n          var xPosT = UnitConverter_1.UnitConverter.pixelsToTwips(xPos);\n          var yPosT = UnitConverter_1.UnitConverter.pixelsToTwips(yPos);\n          var shape = new Shape_1.Shape(shapeDescription, new Utils_1.Point(xPosT, yPosT));\n          if (!(shapeDescription instanceof TextShapeDescription_1.TextShapeDescription)) shape.text = \"\";\n          return shape;\n        };\n\n        IconToolbox.prototype.updateShapeIconBounds = function (shape) {\n          var shapeSizeT = UnitConverter_1.UnitConverter.pixelsToTwips(this.options.shapeIconSize);\n          shape.size.height = shape.size.width * shape.getToolboxHeightToWidthRatio();\n\n          if (shape.size.width > shape.size.height) {\n            var ratio = shape.size.height / shape.size.width;\n            shape.size.width = shapeSizeT;\n            shape.size.height = shapeSizeT * ratio;\n            shape.position.y = shape.position.y + (shapeSizeT - shape.size.height) / 2;\n            shape.parameters.forEach(function (p) {\n              p.value = p.value * shapeSizeT / shape.description.defaultSize.width;\n            });\n          } else if (shape.size.width < shape.size.height) {\n            var ratio = shape.size.width / shape.size.height;\n            shape.size.height = shapeSizeT;\n            shape.size.width = shapeSizeT * ratio;\n            shape.position.x = shape.position.x + (shapeSizeT - shape.size.width) / 2;\n            shape.parameters.forEach(function (p) {\n              p.value = p.value * shapeSizeT / shape.description.defaultSize.height;\n            });\n          } else {\n            shape.size.width = shapeSizeT;\n            shape.size.height = shapeSizeT;\n            shape.parameters.forEach(function (p) {\n              p.value = p.value * shapeSizeT / shape.description.defaultSize.width;\n            });\n          }\n        };\n\n        IconToolbox.prototype.createDraggingElement = function (draggingObject) {\n          var element = document.createElement(\"DIV\");\n          element.setAttribute(\"class\", \"dxdi-toolbox-drag-item\");\n          document.body.appendChild(element);\n          var svgElement = document.createElementNS(RenderManager_1.svgNS, \"svg\");\n          svgElement.className.baseVal = \"dxdi-canvas\";\n          element.appendChild(svgElement);\n          var shapeDescription = ShapeDescriptionManager_1.ShapeDescriptionManager.get(draggingObject.evt.data);\n          var shape = this.createShape(shapeDescription, UnitConverter_1.UnitConverter.twipsToPixels(Shape_1.Shape.lineWidth), UnitConverter_1.UnitConverter.twipsToPixels(Shape_1.Shape.lineWidth));\n          this.drawShape(svgElement, shape);\n          element.style.width = UnitConverter_1.UnitConverter.twipsToPixels(shape.size.width + 2 * Shape_1.Shape.lineWidth) + \"px\";\n          element.style.height = UnitConverter_1.UnitConverter.twipsToPixels(shape.size.height + 2 * Shape_1.Shape.lineWidth) + \"px\";\n          return element;\n        };\n\n        return IconToolbox;\n      }(Toolbox_1.Toolbox);\n\n      exports.IconToolbox = IconToolbox;\n      /***/\n    },\n    /* 304 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics230 = function extendStatics(d, b) {\n          _extendStatics230 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics230(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics230(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var BatchUpdatableObject_1 = __webpack_require__(128);\n\n      var ApiController =\n      /** @class */\n      function (_super) {\n        __extends(ApiController, _super);\n\n        function ApiController(events, selection, model) {\n          var _this = _super.call(this) || this;\n\n          _this.events = events;\n          _this.model = model;\n          _this.selection = selection;\n          return _this;\n        }\n\n        ApiController.prototype.onSelectionChanged = function () {\n          if (this.isUpdateLocked()) this.registerOccurredEvent(ApiControllerAction.SelectionChanged);else this.raiseSelectionChanged();\n        };\n\n        ApiController.prototype.onUpdateUnlocked = function (occurredEvents) {\n          if (occurredEvents & ApiControllerAction.SelectionChanged) this.raiseSelectionChanged();\n        };\n\n        ApiController.prototype.raiseSelectionChanged = function () {\n          var _this = this;\n\n          var items = this.selection.getKeys().map(function (key) {\n            return _this.model.findItem(key).toNative();\n          });\n          this.events.raise1(function (l) {\n            return l.notifySelectionChanged(items);\n          });\n        };\n\n        return ApiController;\n      }(BatchUpdatableObject_1.BatchUpdatableObject);\n\n      exports.ApiController = ApiController;\n      var ApiControllerAction;\n\n      (function (ApiControllerAction) {\n        ApiControllerAction[ApiControllerAction[\"SelectionChanged\"] = 1] = \"SelectionChanged\";\n      })(ApiControllerAction || (ApiControllerAction = {}));\n      /***/\n\n    },\n    /* 305 */\n\n    /***/\n    function (module, exports, __webpack_require__) {// extracted by mini-css-extract-plugin\n\n      /***/\n    }\n    /******/\n    ])\n  );\n});","map":null,"metadata":{},"sourceType":"script"}