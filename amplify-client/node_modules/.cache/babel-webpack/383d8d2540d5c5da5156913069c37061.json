{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.state_storing_core.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _storage = require(\"../../core/utils/storage\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DATE_REGEX = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/;\n\nvar parseDates = function parseDates(state) {\n  if (!state) {\n    return;\n  }\n\n  (0, _iterator.each)(state, function (key, value) {\n    var date;\n\n    if ((0, _type.isPlainObject)(value) || Array.isArray(value)) {\n      parseDates(value);\n    } else {\n      if (\"string\" === typeof value) {\n        date = DATE_REGEX.exec(value);\n\n        if (date) {\n          state[key] = new Date(Date.UTC(+date[1], +date[2] - 1, +date[3], +date[4], +date[5], +date[6]));\n        }\n      }\n    }\n  });\n};\n\nexports.StateStoringController = _uiGrid_core2.default.ViewController.inherit(function () {\n  var getStorage = function getStorage(options) {\n    var storage = \"sessionStorage\" === options.type ? (0, _storage.sessionStorage)() : (0, _window.getWindow)().localStorage;\n\n    if (!storage) {\n      if (\"file:\" === (0, _window.getWindow)().location.protocol && _browser2.default.msie) {\n        throw new Error(\"E1038\");\n      } else {\n        throw new Error(\"E1007\");\n      }\n    }\n\n    return storage;\n  };\n\n  var getUniqueStorageKey = function getUniqueStorageKey(options) {\n    return (0, _type.isDefined)(options.storageKey) ? options.storageKey : \"storage\";\n  };\n\n  return {\n    _loadState: function _loadState() {\n      var options = this.option(\"stateStoring\");\n\n      if (\"custom\" === options.type) {\n        return options.customLoad && options.customLoad();\n      }\n\n      try {\n        return JSON.parse(getStorage(options).getItem(getUniqueStorageKey(options)));\n      } catch (e) {\n        _ui2.default.log(e.message);\n      }\n    },\n    _saveState: function _saveState(state) {\n      var options = this.option(\"stateStoring\");\n\n      if (\"custom\" === options.type) {\n        options.customSave && options.customSave(state);\n        return;\n      }\n\n      try {\n        getStorage(options).setItem(getUniqueStorageKey(options), JSON.stringify(state));\n      } catch (e) {}\n    },\n    publicMethods: function publicMethods() {\n      return [\"state\"];\n    },\n    isEnabled: function isEnabled() {\n      return this.option(\"stateStoring.enabled\");\n    },\n    init: function init() {\n      var that = this;\n      that._state = {};\n      that._isLoaded = false;\n      that._isLoading = false;\n\n      that._windowUnloadHandler = function () {\n        if (void 0 !== that._savingTimeoutID) {\n          that._saveState(that.state());\n        }\n      };\n\n      _events_engine2.default.on((0, _window.getWindow)(), \"unload\", that._windowUnloadHandler);\n\n      return that;\n    },\n    isLoaded: function isLoaded() {\n      return this._isLoaded;\n    },\n    isLoading: function isLoading() {\n      return this._isLoading;\n    },\n    load: function load() {\n      var that = this;\n      var loadResult;\n      that._isLoading = true;\n      loadResult = (0, _deferred.fromPromise)(that._loadState());\n      loadResult.done(function (state) {\n        that._isLoaded = true;\n        that._isLoading = false;\n        that.state(state);\n      });\n      return loadResult;\n    },\n    state: function state(_state) {\n      var that = this;\n\n      if (!arguments.length) {\n        return (0, _extend.extend)(true, {}, that._state);\n      } else {\n        that._state = (0, _extend.extend)({}, _state);\n        parseDates(that._state);\n      }\n    },\n    save: function save() {\n      var that = this;\n      clearTimeout(that._savingTimeoutID);\n      that._savingTimeoutID = setTimeout(function () {\n        that._saveState(that.state());\n\n        that._savingTimeoutID = void 0;\n      }, that.option(\"stateStoring.savingTimeout\"));\n    },\n    optionChanged: function optionChanged(args) {\n      var that = this;\n\n      switch (args.name) {\n        case \"stateStoring\":\n          if (that.isEnabled() && !that.isLoading()) {\n            that.load();\n          }\n\n          args.handled = true;\n          break;\n\n        default:\n          that.callBase(args);\n      }\n    },\n    dispose: function dispose() {\n      clearTimeout(this._savingTimeoutID);\n\n      _events_engine2.default.off((0, _window.getWindow)(), \"unload\", this._windowUnloadHandler);\n    }\n  };\n}());","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.state_storing_core.js"],"names":["_events_engine","require","_events_engine2","_interopRequireDefault","_window","_uiGrid_core","_uiGrid_core2","_ui","_ui2","_browser","_browser2","_storage","_extend","_iterator","_type","_deferred","obj","__esModule","DATE_REGEX","parseDates","state","each","key","value","date","isPlainObject","Array","isArray","exec","Date","UTC","exports","StateStoringController","default","ViewController","inherit","getStorage","options","storage","type","sessionStorage","getWindow","localStorage","location","protocol","msie","Error","getUniqueStorageKey","isDefined","storageKey","_loadState","option","customLoad","JSON","parse","getItem","e","log","message","_saveState","customSave","setItem","stringify","publicMethods","isEnabled","init","that","_state","_isLoaded","_isLoading","_windowUnloadHandler","_savingTimeoutID","on","isLoaded","isLoading","load","loadResult","fromPromise","done","arguments","length","extend","save","clearTimeout","setTimeout","optionChanged","args","name","handled","callBase","dispose","off"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.state_storing_core.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _ui = require(\"../widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _storage = require(\"../../core/utils/storage\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DATE_REGEX = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/;\r\nvar parseDates = function parseDates(state) {\r\n    if (!state) {\r\n        return\r\n    }(0, _iterator.each)(state, function(key, value) {\r\n        var date;\r\n        if ((0, _type.isPlainObject)(value) || Array.isArray(value)) {\r\n            parseDates(value)\r\n        } else {\r\n            if (\"string\" === typeof value) {\r\n                date = DATE_REGEX.exec(value);\r\n                if (date) {\r\n                    state[key] = new Date(Date.UTC(+date[1], +date[2] - 1, +date[3], +date[4], +date[5], +date[6]))\r\n                }\r\n            }\r\n        }\r\n    })\r\n};\r\nexports.StateStoringController = _uiGrid_core2.default.ViewController.inherit(function() {\r\n    var getStorage = function(options) {\r\n        var storage = \"sessionStorage\" === options.type ? (0, _storage.sessionStorage)() : (0, _window.getWindow)().localStorage;\r\n        if (!storage) {\r\n            if (\"file:\" === (0, _window.getWindow)().location.protocol && _browser2.default.msie) {\r\n                throw new Error(\"E1038\")\r\n            } else {\r\n                throw new Error(\"E1007\")\r\n            }\r\n        }\r\n        return storage\r\n    };\r\n    var getUniqueStorageKey = function(options) {\r\n        return (0, _type.isDefined)(options.storageKey) ? options.storageKey : \"storage\"\r\n    };\r\n    return {\r\n        _loadState: function() {\r\n            var options = this.option(\"stateStoring\");\r\n            if (\"custom\" === options.type) {\r\n                return options.customLoad && options.customLoad()\r\n            }\r\n            try {\r\n                return JSON.parse(getStorage(options).getItem(getUniqueStorageKey(options)))\r\n            } catch (e) {\r\n                _ui2.default.log(e.message)\r\n            }\r\n        },\r\n        _saveState: function(state) {\r\n            var options = this.option(\"stateStoring\");\r\n            if (\"custom\" === options.type) {\r\n                options.customSave && options.customSave(state);\r\n                return\r\n            }\r\n            try {\r\n                getStorage(options).setItem(getUniqueStorageKey(options), JSON.stringify(state))\r\n            } catch (e) {}\r\n        },\r\n        publicMethods: function() {\r\n            return [\"state\"]\r\n        },\r\n        isEnabled: function() {\r\n            return this.option(\"stateStoring.enabled\")\r\n        },\r\n        init: function() {\r\n            var that = this;\r\n            that._state = {};\r\n            that._isLoaded = false;\r\n            that._isLoading = false;\r\n            that._windowUnloadHandler = function() {\r\n                if (void 0 !== that._savingTimeoutID) {\r\n                    that._saveState(that.state())\r\n                }\r\n            };\r\n            _events_engine2.default.on((0, _window.getWindow)(), \"unload\", that._windowUnloadHandler);\r\n            return that\r\n        },\r\n        isLoaded: function() {\r\n            return this._isLoaded\r\n        },\r\n        isLoading: function() {\r\n            return this._isLoading\r\n        },\r\n        load: function() {\r\n            var that = this;\r\n            var loadResult;\r\n            that._isLoading = true;\r\n            loadResult = (0, _deferred.fromPromise)(that._loadState());\r\n            loadResult.done(function(state) {\r\n                that._isLoaded = true;\r\n                that._isLoading = false;\r\n                that.state(state)\r\n            });\r\n            return loadResult\r\n        },\r\n        state: function(_state) {\r\n            var that = this;\r\n            if (!arguments.length) {\r\n                return (0, _extend.extend)(true, {}, that._state)\r\n            } else {\r\n                that._state = (0, _extend.extend)({}, _state);\r\n                parseDates(that._state)\r\n            }\r\n        },\r\n        save: function() {\r\n            var that = this;\r\n            clearTimeout(that._savingTimeoutID);\r\n            that._savingTimeoutID = setTimeout(function() {\r\n                that._saveState(that.state());\r\n                that._savingTimeoutID = void 0\r\n            }, that.option(\"stateStoring.savingTimeout\"))\r\n        },\r\n        optionChanged: function(args) {\r\n            var that = this;\r\n            switch (args.name) {\r\n                case \"stateStoring\":\r\n                    if (that.isEnabled() && !that.isLoading()) {\r\n                        that.load()\r\n                    }\r\n                    args.handled = true;\r\n                    break;\r\n                default:\r\n                    that.callBase(args)\r\n            }\r\n        },\r\n        dispose: function() {\r\n            clearTimeout(this._savingTimeoutID);\r\n            _events_engine2.default.off((0, _window.getWindow)(), \"unload\", this._windowUnloadHandler)\r\n        }\r\n    }\r\n}());\r\n"]},"metadata":{},"sourceType":"script"}