{"ast":null,"code":"/**\r\n * DevExtreme (ui/drop_down_box.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _ui = require(\"./drop_down_editor/ui.drop_down_editor\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _ui3 = require(\"./editor/ui.data_expression\");\n\nvar _ui4 = _interopRequireDefault(_ui3);\n\nvar _common = require(\"../core/utils/common\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _selectors = require(\"./widget/selectors\");\n\nvar _selectors2 = _interopRequireDefault(_selectors);\n\nvar _ui5 = require(\"./widget/ui.keyboard_processor\");\n\nvar _ui6 = _interopRequireDefault(_ui5);\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _renderer = require(\"../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _utils = require(\"../ui/overlay/utils\");\n\nvar _component_registrator = require(\"../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _utils2 = require(\"../events/utils\");\n\nvar _devices = require(\"../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _dom_adapter = require(\"../core/dom_adapter\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DROP_DOWN_BOX_CLASS = \"dx-dropdownbox\";\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\n\nvar realDevice = _devices2.default.real();\n\nvar DropDownBox = _ui2.default.inherit({\n  _supportedKeys: function _supportedKeys() {\n    return (0, _extend.extend)({}, this.callBase(), {\n      tab: function tab(e) {\n        if (!this.option(\"opened\")) {\n          return;\n        }\n\n        var $tabbableElements = this._getTabbableElements();\n\n        var $focusableElement = e.shiftKey ? $tabbableElements.last() : $tabbableElements.first();\n        $focusableElement && _events_engine2.default.trigger($focusableElement, \"focus\");\n        e.preventDefault();\n      }\n    });\n  },\n  _getTabbableElements: function _getTabbableElements() {\n    return this._getElements().filter(_selectors2.default.tabbable);\n  },\n  _getElements: function _getElements() {\n    return (0, _renderer2.default)(this.content()).find(\"*\");\n  },\n  _getAnonymousTemplateName: function _getAnonymousTemplateName() {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      acceptCustomValue: false,\n      contentTemplate: \"content\",\n      openOnFieldClick: true,\n      displayValueFormatter: function displayValueFormatter(value) {\n        return Array.isArray(value) ? value.join(\", \") : value;\n      },\n      useHiddenSubmitElement: true\n    });\n  },\n  _initMarkup: function _initMarkup() {\n    this._initDataExpressions();\n\n    this.$element().addClass(DROP_DOWN_BOX_CLASS);\n    this.callBase();\n  },\n  _setSubmitValue: function _setSubmitValue() {\n    var value = this.option(\"value\");\n    var submitValue = this._shouldUseDisplayValue(value) ? this._displayGetter(value) : value;\n\n    this._getSubmitElement().val(submitValue);\n  },\n  _shouldUseDisplayValue: function _shouldUseDisplayValue(value) {\n    return \"this\" === this.option(\"valueExpr\") && (0, _type.isObject)(value);\n  },\n  _renderInputValue: function _renderInputValue() {\n    var callBase = this.callBase.bind(this);\n    var values = [];\n\n    if (!this._dataSource) {\n      callBase(values);\n      return new _deferred.Deferred().resolve();\n    }\n\n    var currentValue = this._getCurrentValue();\n\n    var keys = (0, _common.ensureDefined)(currentValue, []);\n    keys = Array.isArray(keys) ? keys : [keys];\n    var itemLoadDeferreds = (0, _iterator.map)(keys, function (key) {\n      return this._loadItem(key).always(function (item) {\n        var displayValue = this._displayGetter(item);\n\n        values.push((0, _common.ensureDefined)(displayValue, key));\n      }.bind(this));\n    }.bind(this));\n    return _deferred.when.apply(this, itemLoadDeferreds).always(function () {\n      this.option(\"displayValue\", values);\n      callBase(values.length && values);\n    }.bind(this)).fail(callBase);\n  },\n  _loadItem: function _loadItem(value) {\n    var deferred = new _deferred.Deferred();\n    var that = this;\n    var selectedItem = (0, _common.grep)(this.option(\"items\") || [], function (item) {\n      return this._isValueEquals(this._valueGetter(item), value);\n    }.bind(this))[0];\n\n    if (void 0 !== selectedItem) {\n      deferred.resolve(selectedItem);\n    } else {\n      this._loadValue(value).done(function (item) {\n        deferred.resolve(item);\n      }).fail(function (args) {\n        if (that.option(\"acceptCustomValue\")) {\n          deferred.resolve(value);\n        } else {\n          deferred.reject();\n        }\n      });\n    }\n\n    return deferred.promise();\n  },\n  _updatePopupWidth: function _updatePopupWidth() {\n    this._setPopupOption(\"width\", this.$element().outerWidth());\n  },\n  _popupElementTabHandler: function _popupElementTabHandler(e) {\n    if (\"tab\" !== (0, _utils2.normalizeKeyName)(e)) {\n      return;\n    }\n\n    var $firstTabbable = this._getTabbableElements().first().get(0);\n\n    var $lastTabbable = this._getTabbableElements().last().get(0);\n\n    var $target = e.originalEvent.target;\n    var moveBackward = !!($target === $firstTabbable && e.shift);\n    var moveForward = !!($target === $lastTabbable && !e.shift);\n\n    if (moveBackward || moveForward) {\n      this.close();\n\n      _events_engine2.default.trigger(this._input(), \"focus\");\n\n      if (moveBackward) {\n        e.originalEvent.preventDefault();\n      }\n    }\n  },\n  _renderPopup: function _renderPopup(e) {\n    this.callBase();\n\n    if (this.option(\"focusStateEnabled\")) {\n      this._popup._keyboardProcessor.push(new _ui6.default({\n        element: this.content(),\n        handler: this._popupElementTabHandler,\n        context: this\n      }));\n    }\n  },\n  _renderPopupContent: function _renderPopupContent() {\n    if (this.option(\"contentTemplate\") === ANONYMOUS_TEMPLATE_NAME) {\n      return;\n    }\n\n    return this.callBase();\n  },\n  _canShowVirtualKeyboard: function _canShowVirtualKeyboard() {\n    return realDevice.mac;\n  },\n  _isNestedElementActive: function _isNestedElementActive() {\n    var activeElement = (0, _dom_adapter.getActiveElement)();\n    return activeElement && this._popup.$content().get(0).contains(activeElement);\n  },\n  _shouldCloseOnTargetScroll: function _shouldCloseOnTargetScroll() {\n    return \"desktop\" === realDevice.deviceType && this._canShowVirtualKeyboard() && this._isNestedElementActive();\n  },\n  _popupConfig: function _popupConfig() {\n    var _this = this;\n\n    var horizontalAlignment = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\n    return (0, _extend.extend)(this.callBase(), {\n      width: function () {\n        return this.$element().outerWidth();\n      }.bind(this),\n      height: \"auto\",\n      tabIndex: -1,\n      dragEnabled: false,\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      closeOnTargetScroll: this._shouldCloseOnTargetScroll.bind(this),\n      position: {\n        of: this.$element(),\n        collision: \"flipfit\",\n        my: \"top \" + horizontalAlignment,\n        at: \"bottom \" + horizontalAlignment,\n        offset: {\n          y: -1\n        }\n      },\n      onKeyboardHandled: function onKeyboardHandled(opts) {\n        return _this.option(\"focusStateEnabled\") && _this._popupElementTabHandler(opts);\n      },\n      maxHeight: function () {\n        return (0, _utils.getElementMaxHeightByWindow)(this.$element());\n      }.bind(this)\n    });\n  },\n  _popupShownHandler: function _popupShownHandler() {\n    this.callBase();\n\n    var $firstElement = this._getTabbableElements().first();\n\n    _events_engine2.default.trigger($firstElement, \"focus\");\n  },\n  _setCollectionWidgetOption: _common.noop,\n  _optionChanged: function _optionChanged(args) {\n    this._dataExpressionOptionChanged(args);\n\n    switch (args.name) {\n      case \"width\":\n        this.callBase(args);\n        this._popup && this._popup.repaint();\n        break;\n\n      case \"dataSource\":\n        this._renderInputValue();\n\n        break;\n\n      case \"displayValue\":\n        this.option(\"text\", args.value);\n        break;\n\n      case \"displayExpr\":\n        this._renderValue();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n}).include(_ui4.default);\n\n(0, _component_registrator2.default)(\"dxDropDownBox\", DropDownBox);\nmodule.exports = DropDownBox;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/drop_down_box.js"],"names":["_ui","require","_ui2","_interopRequireDefault","_ui3","_ui4","_common","_type","_iterator","_selectors","_selectors2","_ui5","_ui6","_deferred","_renderer","_renderer2","_events_engine","_events_engine2","_extend","_utils","_component_registrator","_component_registrator2","_utils2","_devices","_devices2","_dom_adapter","obj","__esModule","DROP_DOWN_BOX_CLASS","ANONYMOUS_TEMPLATE_NAME","realDevice","default","real","DropDownBox","inherit","_supportedKeys","extend","callBase","tab","e","option","$tabbableElements","_getTabbableElements","$focusableElement","shiftKey","last","first","trigger","preventDefault","_getElements","filter","tabbable","content","find","_getAnonymousTemplateName","_getDefaultOptions","acceptCustomValue","contentTemplate","openOnFieldClick","displayValueFormatter","value","Array","isArray","join","useHiddenSubmitElement","_initMarkup","_initDataExpressions","$element","addClass","_setSubmitValue","submitValue","_shouldUseDisplayValue","_displayGetter","_getSubmitElement","val","isObject","_renderInputValue","bind","values","_dataSource","Deferred","resolve","currentValue","_getCurrentValue","keys","ensureDefined","itemLoadDeferreds","map","key","_loadItem","always","item","displayValue","push","when","apply","length","fail","deferred","that","selectedItem","grep","_isValueEquals","_valueGetter","_loadValue","done","args","reject","promise","_updatePopupWidth","_setPopupOption","outerWidth","_popupElementTabHandler","normalizeKeyName","$firstTabbable","get","$lastTabbable","$target","originalEvent","target","moveBackward","shift","moveForward","close","_input","_renderPopup","_popup","_keyboardProcessor","element","handler","context","_renderPopupContent","_canShowVirtualKeyboard","mac","_isNestedElementActive","activeElement","getActiveElement","$content","contains","_shouldCloseOnTargetScroll","deviceType","_popupConfig","_this","horizontalAlignment","width","height","tabIndex","dragEnabled","focusStateEnabled","closeOnTargetScroll","position","of","collision","my","at","offset","y","onKeyboardHandled","opts","maxHeight","getElementMaxHeightByWindow","_popupShownHandler","$firstElement","_setCollectionWidgetOption","noop","_optionChanged","_dataExpressionOptionChanged","name","repaint","_renderValue","include","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/drop_down_box.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _ui = require(\"./drop_down_editor/ui.drop_down_editor\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _ui3 = require(\"./editor/ui.data_expression\");\r\nvar _ui4 = _interopRequireDefault(_ui3);\r\nvar _common = require(\"../core/utils/common\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _selectors = require(\"./widget/selectors\");\r\nvar _selectors2 = _interopRequireDefault(_selectors);\r\nvar _ui5 = require(\"./widget/ui.keyboard_processor\");\r\nvar _ui6 = _interopRequireDefault(_ui5);\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _renderer = require(\"../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _utils = require(\"../ui/overlay/utils\");\r\nvar _component_registrator = require(\"../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _utils2 = require(\"../events/utils\");\r\nvar _devices = require(\"../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _dom_adapter = require(\"../core/dom_adapter\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DROP_DOWN_BOX_CLASS = \"dx-dropdownbox\";\r\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\r\nvar realDevice = _devices2.default.real();\r\nvar DropDownBox = _ui2.default.inherit({\r\n    _supportedKeys: function() {\r\n        return (0, _extend.extend)({}, this.callBase(), {\r\n            tab: function(e) {\r\n                if (!this.option(\"opened\")) {\r\n                    return\r\n                }\r\n                var $tabbableElements = this._getTabbableElements();\r\n                var $focusableElement = e.shiftKey ? $tabbableElements.last() : $tabbableElements.first();\r\n                $focusableElement && _events_engine2.default.trigger($focusableElement, \"focus\");\r\n                e.preventDefault()\r\n            }\r\n        })\r\n    },\r\n    _getTabbableElements: function() {\r\n        return this._getElements().filter(_selectors2.default.tabbable)\r\n    },\r\n    _getElements: function() {\r\n        return (0, _renderer2.default)(this.content()).find(\"*\")\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            acceptCustomValue: false,\r\n            contentTemplate: \"content\",\r\n            openOnFieldClick: true,\r\n            displayValueFormatter: function(value) {\r\n                return Array.isArray(value) ? value.join(\", \") : value\r\n            },\r\n            useHiddenSubmitElement: true\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this._initDataExpressions();\r\n        this.$element().addClass(DROP_DOWN_BOX_CLASS);\r\n        this.callBase()\r\n    },\r\n    _setSubmitValue: function() {\r\n        var value = this.option(\"value\");\r\n        var submitValue = this._shouldUseDisplayValue(value) ? this._displayGetter(value) : value;\r\n        this._getSubmitElement().val(submitValue)\r\n    },\r\n    _shouldUseDisplayValue: function(value) {\r\n        return \"this\" === this.option(\"valueExpr\") && (0, _type.isObject)(value)\r\n    },\r\n    _renderInputValue: function() {\r\n        var callBase = this.callBase.bind(this);\r\n        var values = [];\r\n        if (!this._dataSource) {\r\n            callBase(values);\r\n            return (new _deferred.Deferred).resolve()\r\n        }\r\n        var currentValue = this._getCurrentValue();\r\n        var keys = (0, _common.ensureDefined)(currentValue, []);\r\n        keys = Array.isArray(keys) ? keys : [keys];\r\n        var itemLoadDeferreds = (0, _iterator.map)(keys, function(key) {\r\n            return this._loadItem(key).always(function(item) {\r\n                var displayValue = this._displayGetter(item);\r\n                values.push((0, _common.ensureDefined)(displayValue, key))\r\n            }.bind(this))\r\n        }.bind(this));\r\n        return _deferred.when.apply(this, itemLoadDeferreds).always(function() {\r\n            this.option(\"displayValue\", values);\r\n            callBase(values.length && values)\r\n        }.bind(this)).fail(callBase)\r\n    },\r\n    _loadItem: function(value) {\r\n        var deferred = new _deferred.Deferred;\r\n        var that = this;\r\n        var selectedItem = (0, _common.grep)(this.option(\"items\") || [], function(item) {\r\n            return this._isValueEquals(this._valueGetter(item), value)\r\n        }.bind(this))[0];\r\n        if (void 0 !== selectedItem) {\r\n            deferred.resolve(selectedItem)\r\n        } else {\r\n            this._loadValue(value).done(function(item) {\r\n                deferred.resolve(item)\r\n            }).fail(function(args) {\r\n                if (that.option(\"acceptCustomValue\")) {\r\n                    deferred.resolve(value)\r\n                } else {\r\n                    deferred.reject()\r\n                }\r\n            })\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _updatePopupWidth: function() {\r\n        this._setPopupOption(\"width\", this.$element().outerWidth())\r\n    },\r\n    _popupElementTabHandler: function(e) {\r\n        if (\"tab\" !== (0, _utils2.normalizeKeyName)(e)) {\r\n            return\r\n        }\r\n        var $firstTabbable = this._getTabbableElements().first().get(0);\r\n        var $lastTabbable = this._getTabbableElements().last().get(0);\r\n        var $target = e.originalEvent.target;\r\n        var moveBackward = !!($target === $firstTabbable && e.shift);\r\n        var moveForward = !!($target === $lastTabbable && !e.shift);\r\n        if (moveBackward || moveForward) {\r\n            this.close();\r\n            _events_engine2.default.trigger(this._input(), \"focus\");\r\n            if (moveBackward) {\r\n                e.originalEvent.preventDefault()\r\n            }\r\n        }\r\n    },\r\n    _renderPopup: function(e) {\r\n        this.callBase();\r\n        if (this.option(\"focusStateEnabled\")) {\r\n            this._popup._keyboardProcessor.push(new _ui6.default({\r\n                element: this.content(),\r\n                handler: this._popupElementTabHandler,\r\n                context: this\r\n            }))\r\n        }\r\n    },\r\n    _renderPopupContent: function() {\r\n        if (this.option(\"contentTemplate\") === ANONYMOUS_TEMPLATE_NAME) {\r\n            return\r\n        }\r\n        return this.callBase()\r\n    },\r\n    _canShowVirtualKeyboard: function() {\r\n        return realDevice.mac\r\n    },\r\n    _isNestedElementActive: function() {\r\n        var activeElement = (0, _dom_adapter.getActiveElement)();\r\n        return activeElement && this._popup.$content().get(0).contains(activeElement)\r\n    },\r\n    _shouldCloseOnTargetScroll: function() {\r\n        return \"desktop\" === realDevice.deviceType && this._canShowVirtualKeyboard() && this._isNestedElementActive()\r\n    },\r\n    _popupConfig: function() {\r\n        var _this = this;\r\n        var horizontalAlignment = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            width: function() {\r\n                return this.$element().outerWidth()\r\n            }.bind(this),\r\n            height: \"auto\",\r\n            tabIndex: -1,\r\n            dragEnabled: false,\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            closeOnTargetScroll: this._shouldCloseOnTargetScroll.bind(this),\r\n            position: {\r\n                of: this.$element(),\r\n                collision: \"flipfit\",\r\n                my: \"top \" + horizontalAlignment,\r\n                at: \"bottom \" + horizontalAlignment,\r\n                offset: {\r\n                    y: -1\r\n                }\r\n            },\r\n            onKeyboardHandled: function(opts) {\r\n                return _this.option(\"focusStateEnabled\") && _this._popupElementTabHandler(opts)\r\n            },\r\n            maxHeight: function() {\r\n                return (0, _utils.getElementMaxHeightByWindow)(this.$element())\r\n            }.bind(this)\r\n        })\r\n    },\r\n    _popupShownHandler: function() {\r\n        this.callBase();\r\n        var $firstElement = this._getTabbableElements().first();\r\n        _events_engine2.default.trigger($firstElement, \"focus\")\r\n    },\r\n    _setCollectionWidgetOption: _common.noop,\r\n    _optionChanged: function(args) {\r\n        this._dataExpressionOptionChanged(args);\r\n        switch (args.name) {\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._popup && this._popup.repaint();\r\n                break;\r\n            case \"dataSource\":\r\n                this._renderInputValue();\r\n                break;\r\n            case \"displayValue\":\r\n                this.option(\"text\", args.value);\r\n                break;\r\n            case \"displayExpr\":\r\n                this._renderValue();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n}).include(_ui4.default);\r\n(0, _component_registrator2.default)(\"dxDropDownBox\", DropDownBox);\r\nmodule.exports = DropDownBox;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}