{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.item_list.thumbnails.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _contextmenu = require(\"../../events/contextmenu\");\n\nvar _uiFile_managerUtils = require(\"./ui.file_manager.utils.js\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _uiFile_manager = require(\"./ui.file_manager.item_list\");\n\nvar _uiFile_manager2 = _interopRequireDefault(_uiFile_manager);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS = \"dx-filemanager-thumbnails\";\nvar FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS = \"dx-filemanager-thumbnails-view-port\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS = \"dx-filemanager-thumbnails-container\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_CLASS = \"dx-filemanager-thumbnails-item\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS = \"dx-filemanager-thumbnails-item-content\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS = \"dx-filemanager-thumbnails-item-thumbnail\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS = \"dx-filemanager-thumbnails-item-spacer\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS = \"dx-filemanager-thumbnails-item-name\";\nvar FILE_MANAGER_ITEM_SELECTED_CLASS = \"dx-filemanager-item-selected\";\nvar FILE_MANAGER_ITEM_FOCUSED_CLASS = \"dx-filemanager-item-focused\";\nvar FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE = \"dxFileManager_thumbnails\";\n\nvar FileManagerThumbnailsItemList = function (_FileManagerItemListB) {\n  _inherits(FileManagerThumbnailsItemList, _FileManagerItemListB);\n\n  function FileManagerThumbnailsItemList() {\n    _classCallCheck(this, FileManagerThumbnailsItemList);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FileManagerThumbnailsItemList).apply(this, arguments));\n  }\n\n  _createClass(FileManagerThumbnailsItemList, [{\n    key: \"_init\",\n    value: function value() {\n      this._items = [];\n      this._currentLoadOperationId = 0;\n\n      _get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_init\", this).call(this);\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function value() {\n      _get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_initMarkup\", this).call(this);\n\n      var multipleSelection = \"multiple\" === this.option(\"selectionMode\");\n      var controllerOptions = {\n        onSelectionChanged: this._raiseSelectionChanged.bind(this)\n      };\n      var controllerClass = multipleSelection ? MultipleSelectionController : SingleSelectionController;\n      this._selectionController = new controllerClass(controllerOptions);\n      this._$itemViewContainer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS);\n      this._$viewPort = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS);\n\n      this._$viewPort.append(this._$itemViewContainer);\n\n      this.$element().addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS);\n      this.$element().append(this._$viewPort);\n      var contextMenuEvent = (0, _utils.addNamespace)(_contextmenu.name, FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\n      var clickEvent = (0, _utils.addNamespace)(\"click\", FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\n\n      _events_engine2.default.on(this.$element(), contextMenuEvent, this._onContextMenu.bind(this));\n\n      _events_engine2.default.on(this.$element(), clickEvent, this._onClick.bind(this));\n\n      this._loadItems();\n    }\n  }, {\n    key: \"_supportedKeys\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_supportedKeys\", this).call(this), {\n        rightArrow: function rightArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(1, true, e);\n        },\n        leftArrow: function leftArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(-1, true, e);\n        },\n        upArrow: function upArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(-1, false, e);\n        },\n        downArrow: function downArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(1, false, e);\n        },\n        home: function home(e) {\n          this._beforeKeyProcessing(e);\n\n          this._selectItemByIndex(0, true, e);\n        },\n        end: function end(e) {\n          this._beforeKeyProcessing(e);\n\n          this._selectItemByIndex(this._items.length - 1, true, e);\n        },\n        pageUp: function pageUp(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processPageChange(true, e);\n        },\n        pageDown: function pageDown(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processPageChange(false, e);\n        },\n        space: function space(e) {\n          this._beforeKeyProcessing(e);\n\n          this._selectionController.invertFocusedItemSelection();\n        },\n        enter: function enter(e) {\n          this._beforeKeyProcessing(e);\n\n          this.tryOpen();\n        },\n        A: function A(e) {\n          this._beforeKeyProcessing(e);\n\n          if (e.ctrlKey) {\n            this._selectAll();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_beforeKeyProcessing\",\n    value: function value(e) {\n      e.preventDefault();\n\n      this._resetLayoutModel();\n    }\n  }, {\n    key: \"_processMoveArrow\",\n    value: function value(offset, horizontal, eventArgs) {\n      var item = this._getFocusedItem();\n\n      if (item) {\n        if (!horizontal) {\n          var layout = this._getLayoutModel();\n\n          if (!layout) {\n            return;\n          }\n\n          offset *= layout.itemPerRowCount;\n        }\n\n        var newItemIndex = item._state.index + offset;\n\n        this._selectItemByIndex(newItemIndex, true, eventArgs);\n      }\n    }\n  }, {\n    key: \"_processPageChange\",\n    value: function value(pageUp, eventArgs) {\n      var item = this._getFocusedItem();\n\n      if (!item) {\n        return;\n      }\n\n      var layout = this._getLayoutModel();\n\n      if (!layout) {\n        return;\n      }\n\n      var itemLayout = this._createItemLayoutModel(item._state.index);\n\n      var rowOffset = pageUp ? layout.rowPerPageRate : -layout.rowPerPageRate;\n      var newRowRate = itemLayout.itemRowIndex - rowOffset;\n      var roundFunc = pageUp ? Math.ceil : Math.floor;\n      var newRowIndex = roundFunc(newRowRate);\n      var newItemIndex = newRowIndex * layout.itemPerRowCount + itemLayout.itemColumnIndex;\n\n      if (newItemIndex < 0) {\n        newItemIndex = 0;\n      } else {\n        if (newItemIndex >= this._items.length) {\n          newItemIndex = this._items.length - 1;\n        }\n      }\n\n      this._selectItemByIndex(newItemIndex, true, eventArgs);\n    }\n  }, {\n    key: \"_onClick\",\n    value: function value(e) {\n      var $item = (0, _renderer2.default)(e.target).closest(this._getItemSelector());\n\n      if ($item.length > 0) {\n        this._selectItemByItemElement($item, e);\n      } else {\n        this.clearSelection();\n      }\n    }\n  }, {\n    key: \"_onContextMenu\",\n    value: function value(e) {\n      e.preventDefault();\n\n      this._onClick(e);\n\n      var items = this.getSelectedItems();\n\n      this._showContextMenu(items, e.target, e);\n    }\n  }, {\n    key: \"_selectItemByItemElement\",\n    value: function value($item, e) {\n      var index = $item.data(\"index\");\n\n      this._selectItemByIndex(index, false, e);\n    }\n  }, {\n    key: \"_getItemThumbnailCssClass\",\n    value: function value() {\n      return FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS;\n    }\n  }, {\n    key: \"_getItemSelector\",\n    value: function value() {\n      return \".\".concat(FILE_MANAGER_THUMBNAILS_ITEM_CLASS);\n    }\n  }, {\n    key: \"_onItemDblClick\",\n    value: function value(e) {\n      var $item = (0, _renderer2.default)(e.currentTarget);\n      var index = $item.data(\"index\");\n      var item = this._items[index];\n\n      this._raiseSelectedItemOpened(item);\n    }\n  }, {\n    key: \"_scrollToItem\",\n    value: function value(item) {\n      var layout = this._getLayoutModel();\n\n      if (!layout) {\n        return;\n      }\n\n      var itemRowIndex = Math.floor(item._state.index / layout.itemPerRowCount);\n      var itemTop = itemRowIndex * layout.itemHeight;\n      var itemBottom = itemTop + layout.itemHeight;\n      var newScrollTop = layout.viewPortScrollTop;\n\n      if (itemTop < layout.viewPortScrollTop) {\n        newScrollTop = itemTop;\n      } else {\n        if (itemBottom > layout.viewPortScrollBottom) {\n          newScrollTop = itemBottom - layout.viewPortHeight;\n        }\n      }\n\n      this._$viewPort.scrollTop(newScrollTop);\n    }\n  }, {\n    key: \"_resetLayoutModel\",\n    value: function value() {\n      this._layoutModel = null;\n    }\n  }, {\n    key: \"_getLayoutModel\",\n    value: function value() {\n      if (!this._layoutModel) {\n        this._layoutModel = this._createLayoutModel();\n      }\n\n      return this._layoutModel;\n    }\n  }, {\n    key: \"_createLayoutModel\",\n    value: function value() {\n      if (0 === this._items.length) {\n        return null;\n      }\n\n      var item = this._items[0];\n      var $item = item._state.$element;\n      var itemWidth = $item.outerWidth(true);\n\n      if (0 === itemWidth) {\n        return null;\n      }\n\n      var itemHeight = $item.outerHeight(true);\n\n      var viewPortWidth = this._$itemViewContainer.innerWidth();\n\n      var viewPortHeight = this._$viewPort.innerHeight();\n\n      var viewPortScrollTop = this._$viewPort.scrollTop();\n\n      var viewPortScrollBottom = viewPortScrollTop + viewPortHeight;\n      var itemPerRowCount = Math.floor(viewPortWidth / itemWidth);\n      var rowPerPageRate = viewPortHeight / itemHeight;\n      return {\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        viewPortWidth: viewPortWidth,\n        viewPortHeight: viewPortHeight,\n        viewPortScrollTop: viewPortScrollTop,\n        viewPortScrollBottom: viewPortScrollBottom,\n        itemPerRowCount: itemPerRowCount,\n        rowPerPageRate: rowPerPageRate\n      };\n    }\n  }, {\n    key: \"_createItemLayoutModel\",\n    value: function value(index) {\n      var layout = this._getLayoutModel();\n\n      if (!layout) {\n        return null;\n      }\n\n      var itemRowIndex = Math.floor(index / layout.itemPerRowCount);\n      var itemColumnIndex = index % layout.itemPerRowCount;\n      var itemTop = itemRowIndex * layout.itemHeight;\n      var itemBottom = itemTop + layout.itemHeight;\n      return {\n        itemRowIndex: itemRowIndex,\n        itemColumnIndex: itemColumnIndex,\n        itemTop: itemTop,\n        itemBottom: itemBottom\n      };\n    }\n  }, {\n    key: \"_selectAll\",\n    value: function value() {\n      this._selectionController.selectAll();\n    }\n  }, {\n    key: \"_selectItem\",\n    value: function value(item, scrollToItem, eventArgs) {\n      this._selectionController.selectItem(item, eventArgs);\n\n      if (scrollToItem) {\n        this._scrollToItem(item);\n      }\n    }\n  }, {\n    key: \"_selectItemByIndex\",\n    value: function value(index, scrollToItem, eventArgs) {\n      if (index >= 0 && index < this._items.length) {\n        var item = this._items[index];\n\n        this._selectItem(item, scrollToItem, eventArgs);\n      }\n    }\n  }, {\n    key: \"_getFocusedItem\",\n    value: function value() {\n      return this._selectionController.getFocusedItem();\n    }\n  }, {\n    key: \"_loadItems\",\n    value: function value() {\n      var _this = this;\n\n      var loadOperationId = this._getUniqueId();\n\n      this._currentLoadOperationId = loadOperationId;\n      (0, _deferred.when)(this._getItems()).then(function (items) {\n        if (_this._currentLoadOperationId === loadOperationId) {\n          _this._applyItems(items || []);\n        }\n      }, function (error) {\n        if (_this._currentLoadOperationId === loadOperationId) {\n          _this._raiseOnError(error);\n        }\n      });\n    }\n  }, {\n    key: \"_applyItems\",\n    value: function value(items) {\n      this._items = items;\n\n      this._selectionController.setItems(items);\n\n      this._renderItems(items);\n    }\n  }, {\n    key: \"_renderItems\",\n    value: function value(items) {\n      this._$itemViewContainer.empty();\n\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        item._state = {\n          index: i,\n          selected: false,\n          $element: null\n        };\n\n        this._renderItem(item);\n      }\n    }\n  }, {\n    key: \"_renderItem\",\n    value: function value(fileItemInfo) {\n      var $item = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_CLASS).attr(\"title\", this._getTooltipText(fileItemInfo)).data(\"index\", fileItemInfo._state.index);\n      var $itemContent = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS);\n\n      var $itemThumbnail = this._getItemThumbnailContainer(fileItemInfo);\n\n      _events_engine2.default.on($itemThumbnail, \"dragstart\", this._disableDragging);\n\n      var $itemSpacer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS);\n      var $itemName = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS).text(fileItemInfo.fileItem.name);\n      $item.append($itemContent);\n      $itemContent.append($itemThumbnail, $itemSpacer, $itemName);\n\n      this._$itemViewContainer.append($item);\n\n      fileItemInfo._state.$element = $item;\n    }\n  }, {\n    key: \"_getTooltipText\",\n    value: function value(fileItemInfo) {\n      var item = fileItemInfo.fileItem;\n\n      if (item.tooltipText) {\n        return item.tooltipText;\n      }\n\n      var text = \"\".concat(item.name, \"\\r\\n\");\n\n      if (!item.isDirectory) {\n        text += \"\".concat(_message2.default.format(\"dxFileManager-listThumbnailsTooltipTextSize\"), \": \").concat((0, _uiFile_managerUtils.getDisplayFileSize)(item.size), \"\\r\\n\");\n      }\n\n      text += \"\".concat(_message2.default.format(\"dxFileManager-listThumbnailsTooltipTextDateModified\"), \": \").concat(item.dateModified);\n      return text;\n    }\n  }, {\n    key: \"_getUniqueId\",\n    value: function value() {\n      return \"\".concat(Date.now(), \"_\").concat(Math.round(1e5 * Math.random()));\n    }\n  }, {\n    key: \"_disableDragging\",\n    value: function value() {\n      return false;\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_getDefaultOptions\", this).call(this), {\n        focusStateEnabled: true\n      });\n    }\n  }, {\n    key: \"refresh\",\n    value: function value() {\n      this.clearSelection();\n\n      this._loadItems();\n    }\n  }, {\n    key: \"tryOpen\",\n    value: function value() {\n      var item = this._getFocusedItem();\n\n      if (item) {\n        this._raiseSelectedItemOpened(item);\n      }\n    }\n  }, {\n    key: \"clearSelection\",\n    value: function value() {\n      this._selectionController.clearSelection();\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function value() {\n      return this._selectionController.getSelectedItems();\n    }\n  }]);\n\n  return FileManagerThumbnailsItemList;\n}(_uiFile_manager2.default);\n\nvar SingleSelectionController = function () {\n  function SingleSelectionController(options) {\n    _classCallCheck(this, SingleSelectionController);\n\n    this._items = [];\n    this._selectionChangedHandler = options.onSelectionChanged;\n    this._selectionChanged = false;\n  }\n\n  _createClass(SingleSelectionController, [{\n    key: \"selectAll\",\n    value: function value() {}\n  }, {\n    key: \"clearSelection\",\n    value: function value() {\n      this._beginUpdate();\n\n      this._setAllItemsSelectedState(false);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"selectItem\",\n    value: function value(item, eventArgs) {\n      this._beginUpdate();\n\n      this._setAllItemsSelectedState(false, [item]);\n\n      this._setItemSelectedState(item, true);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"invertFocusedItemSelection\",\n    value: function value(item) {}\n  }, {\n    key: \"getFocusedItem\",\n    value: function value() {\n      var selectedItems = this.getSelectedItems();\n      return selectedItems.length > 0 ? selectedItems[0] : null;\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function value() {\n      return this._items.filter(function (item) {\n        return item._state.selected;\n      });\n    }\n  }, {\n    key: \"setItems\",\n    value: function value(items) {\n      this._items = items;\n    }\n  }, {\n    key: \"_setItemSelectedState\",\n    value: function value(item, selected) {\n      if (item._state.selected === selected) {\n        return;\n      }\n\n      item._state.selected = selected;\n\n      item._state.$element.toggleClass(FILE_MANAGER_ITEM_SELECTED_CLASS, selected);\n\n      this._selectionChanged = true;\n    }\n  }, {\n    key: \"_setAllItemsSelectedState\",\n    value: function value(selected, exceptedItems) {\n      for (var i = 0; i < this._items.length; i++) {\n        var item = this._items[i];\n\n        if (exceptedItems && exceptedItems.indexOf(item) !== -1) {\n          continue;\n        }\n\n        this._setItemSelectedState(item, selected);\n      }\n    }\n  }, {\n    key: \"_beginUpdate\",\n    value: function value() {\n      this._selectionChanged = false;\n    }\n  }, {\n    key: \"_endUpdate\",\n    value: function value() {\n      if (this._selectionChanged) {\n        this._selectionChangedHandler();\n\n        this._selectionChanged = false;\n      }\n    }\n  }]);\n\n  return SingleSelectionController;\n}();\n\nvar MultipleSelectionController = function (_SingleSelectionContr) {\n  _inherits(MultipleSelectionController, _SingleSelectionContr);\n\n  function MultipleSelectionController(options) {\n    var _this2;\n\n    _classCallCheck(this, MultipleSelectionController);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(MultipleSelectionController).call(this, options));\n    _this2._focusedItem = null;\n    return _this2;\n  }\n\n  _createClass(MultipleSelectionController, [{\n    key: \"selectAll\",\n    value: function value() {\n      this._beginUpdate();\n\n      this._setAllItemsSelectedState(true);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"selectItem\",\n    value: function value(item, eventArgs) {\n      this._beginUpdate();\n\n      if (eventArgs.shiftKey) {\n        this._setItemsRangeSelectedState(this._focusedItem._state.index, item._state.index, eventArgs.ctrlKey, true);\n      } else {\n        if (eventArgs.ctrlKey) {\n          var needSelect = 1 === this._items.length && this._focusedItem === item || !item._state.selected;\n\n          this._setItemSelectedState(item, needSelect);\n        } else {\n          this._setAllItemsSelectedState(false, [item]);\n\n          this._setItemSelectedState(item, true);\n        }\n      }\n\n      this._setFocusedItem(item);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"_setItemsRangeSelectedState\",\n    value: function value(startIndex, endIndex, invert, selected) {\n      if (startIndex > endIndex) {\n        var temp = endIndex;\n        endIndex = startIndex;\n        startIndex = temp;\n      }\n\n      for (var i = startIndex; i <= endIndex; i++) {\n        var item = this._items[i];\n        var actualSelected = invert ? !item._state.selected : selected;\n\n        this._setItemSelectedState(item, actualSelected);\n      }\n    }\n  }, {\n    key: \"_setFocusedItem\",\n    value: function value(item) {\n      if (this._focusedItem === item) {\n        return;\n      }\n\n      if (this._focusedItem) {\n        this._focusedItem._state.$element.removeClass(FILE_MANAGER_ITEM_FOCUSED_CLASS);\n      }\n\n      item._state.$element.addClass(FILE_MANAGER_ITEM_FOCUSED_CLASS);\n\n      this._focusedItem = item;\n    }\n  }, {\n    key: \"invertFocusedItemSelection\",\n    value: function value() {\n      if (!this._focusedItem) {\n        return;\n      }\n\n      this._beginUpdate();\n\n      this._setItemSelectedState(this._focusedItem, !this._focusedItem._state.selected);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"getFocusedItem\",\n    value: function value() {\n      return this._focusedItem;\n    }\n  }, {\n    key: \"setItems\",\n    value: function value(items) {\n      _get(_getPrototypeOf(MultipleSelectionController.prototype), \"setItems\", this).call(this, items);\n\n      this._focusedItem = items.length > 0 ? items[0] : null;\n    }\n  }]);\n\n  return MultipleSelectionController;\n}(SingleSelectionController);\n\nmodule.exports = FileManagerThumbnailsItemList;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/file_manager/ui.file_manager.item_list.thumbnails.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_extend","_deferred","_events_engine","_events_engine2","_utils","_contextmenu","_uiFile_managerUtils","_message","_message2","_uiFile_manager","_uiFile_manager2","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","value","object","hasOwnProperty","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS","FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS","FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS","FILE_MANAGER_ITEM_SELECTED_CLASS","FILE_MANAGER_ITEM_FOCUSED_CLASS","FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE","FileManagerThumbnailsItemList","_FileManagerItemListB","apply","arguments","_items","_currentLoadOperationId","multipleSelection","option","controllerOptions","onSelectionChanged","_raiseSelectionChanged","bind","controllerClass","MultipleSelectionController","SingleSelectionController","_selectionController","_$itemViewContainer","default","addClass","_$viewPort","append","$element","contextMenuEvent","addNamespace","name","clickEvent","on","_onContextMenu","_onClick","_loadItems","extend","rightArrow","e","_beforeKeyProcessing","_processMoveArrow","leftArrow","upArrow","downArrow","home","_selectItemByIndex","end","pageUp","_processPageChange","pageDown","space","invertFocusedItemSelection","enter","tryOpen","A","ctrlKey","_selectAll","preventDefault","_resetLayoutModel","offset","horizontal","eventArgs","item","_getFocusedItem","layout","_getLayoutModel","itemPerRowCount","newItemIndex","_state","index","itemLayout","_createItemLayoutModel","rowOffset","rowPerPageRate","newRowRate","itemRowIndex","roundFunc","Math","ceil","floor","newRowIndex","itemColumnIndex","$item","closest","_getItemSelector","_selectItemByItemElement","clearSelection","items","getSelectedItems","_showContextMenu","data","concat","currentTarget","_raiseSelectedItemOpened","itemTop","itemHeight","itemBottom","newScrollTop","viewPortScrollTop","viewPortScrollBottom","viewPortHeight","scrollTop","_layoutModel","_createLayoutModel","itemWidth","outerWidth","outerHeight","viewPortWidth","innerWidth","innerHeight","selectAll","scrollToItem","selectItem","_scrollToItem","_selectItem","getFocusedItem","_this","loadOperationId","_getUniqueId","when","_getItems","then","_applyItems","error","_raiseOnError","setItems","_renderItems","empty","selected","_renderItem","fileItemInfo","attr","_getTooltipText","$itemContent","$itemThumbnail","_getItemThumbnailContainer","_disableDragging","$itemSpacer","$itemName","text","fileItem","tooltipText","isDirectory","format","getDisplayFileSize","size","dateModified","Date","now","round","random","focusStateEnabled","options","_selectionChangedHandler","_selectionChanged","_beginUpdate","_setAllItemsSelectedState","_endUpdate","_setItemSelectedState","selectedItems","filter","toggleClass","exceptedItems","indexOf","_SingleSelectionContr","_this2","_focusedItem","shiftKey","_setItemsRangeSelectedState","needSelect","_setFocusedItem","startIndex","endIndex","invert","temp","actualSelected","removeClass","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.item_list.thumbnails.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _contextmenu = require(\"../../events/contextmenu\");\r\nvar _uiFile_managerUtils = require(\"./ui.file_manager.utils.js\");\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _uiFile_manager = require(\"./ui.file_manager.item_list\");\r\nvar _uiFile_manager2 = _interopRequireDefault(_uiFile_manager);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS = \"dx-filemanager-thumbnails\";\r\nvar FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS = \"dx-filemanager-thumbnails-view-port\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS = \"dx-filemanager-thumbnails-container\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_CLASS = \"dx-filemanager-thumbnails-item\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS = \"dx-filemanager-thumbnails-item-content\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS = \"dx-filemanager-thumbnails-item-thumbnail\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS = \"dx-filemanager-thumbnails-item-spacer\";\r\nvar FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS = \"dx-filemanager-thumbnails-item-name\";\r\nvar FILE_MANAGER_ITEM_SELECTED_CLASS = \"dx-filemanager-item-selected\";\r\nvar FILE_MANAGER_ITEM_FOCUSED_CLASS = \"dx-filemanager-item-focused\";\r\nvar FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE = \"dxFileManager_thumbnails\";\r\nvar FileManagerThumbnailsItemList = function(_FileManagerItemListB) {\r\n    _inherits(FileManagerThumbnailsItemList, _FileManagerItemListB);\r\n\r\n    function FileManagerThumbnailsItemList() {\r\n        _classCallCheck(this, FileManagerThumbnailsItemList);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(FileManagerThumbnailsItemList).apply(this, arguments))\r\n    }\r\n    _createClass(FileManagerThumbnailsItemList, [{\r\n        key: \"_init\",\r\n        value: function() {\r\n            this._items = [];\r\n            this._currentLoadOperationId = 0;\r\n            _get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_init\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_initMarkup\", this).call(this);\r\n            var multipleSelection = \"multiple\" === this.option(\"selectionMode\");\r\n            var controllerOptions = {\r\n                onSelectionChanged: this._raiseSelectionChanged.bind(this)\r\n            };\r\n            var controllerClass = multipleSelection ? MultipleSelectionController : SingleSelectionController;\r\n            this._selectionController = new controllerClass(controllerOptions);\r\n            this._$itemViewContainer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS);\r\n            this._$viewPort = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS);\r\n            this._$viewPort.append(this._$itemViewContainer);\r\n            this.$element().addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS);\r\n            this.$element().append(this._$viewPort);\r\n            var contextMenuEvent = (0, _utils.addNamespace)(_contextmenu.name, FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\r\n            var clickEvent = (0, _utils.addNamespace)(\"click\", FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\r\n            _events_engine2.default.on(this.$element(), contextMenuEvent, this._onContextMenu.bind(this));\r\n            _events_engine2.default.on(this.$element(), clickEvent, this._onClick.bind(this));\r\n            this._loadItems()\r\n        }\r\n    }, {\r\n        key: \"_supportedKeys\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_supportedKeys\", this).call(this), {\r\n                rightArrow: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processMoveArrow(1, true, e)\r\n                },\r\n                leftArrow: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processMoveArrow(-1, true, e)\r\n                },\r\n                upArrow: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processMoveArrow(-1, false, e)\r\n                },\r\n                downArrow: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processMoveArrow(1, false, e)\r\n                },\r\n                home: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._selectItemByIndex(0, true, e)\r\n                },\r\n                end: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._selectItemByIndex(this._items.length - 1, true, e)\r\n                },\r\n                pageUp: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processPageChange(true, e)\r\n                },\r\n                pageDown: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._processPageChange(false, e)\r\n                },\r\n                space: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this._selectionController.invertFocusedItemSelection()\r\n                },\r\n                enter: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    this.tryOpen()\r\n                },\r\n                A: function(e) {\r\n                    this._beforeKeyProcessing(e);\r\n                    if (e.ctrlKey) {\r\n                        this._selectAll()\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_beforeKeyProcessing\",\r\n        value: function(e) {\r\n            e.preventDefault();\r\n            this._resetLayoutModel()\r\n        }\r\n    }, {\r\n        key: \"_processMoveArrow\",\r\n        value: function(offset, horizontal, eventArgs) {\r\n            var item = this._getFocusedItem();\r\n            if (item) {\r\n                if (!horizontal) {\r\n                    var layout = this._getLayoutModel();\r\n                    if (!layout) {\r\n                        return\r\n                    }\r\n                    offset *= layout.itemPerRowCount\r\n                }\r\n                var newItemIndex = item._state.index + offset;\r\n                this._selectItemByIndex(newItemIndex, true, eventArgs)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_processPageChange\",\r\n        value: function(pageUp, eventArgs) {\r\n            var item = this._getFocusedItem();\r\n            if (!item) {\r\n                return\r\n            }\r\n            var layout = this._getLayoutModel();\r\n            if (!layout) {\r\n                return\r\n            }\r\n            var itemLayout = this._createItemLayoutModel(item._state.index);\r\n            var rowOffset = pageUp ? layout.rowPerPageRate : -layout.rowPerPageRate;\r\n            var newRowRate = itemLayout.itemRowIndex - rowOffset;\r\n            var roundFunc = pageUp ? Math.ceil : Math.floor;\r\n            var newRowIndex = roundFunc(newRowRate);\r\n            var newItemIndex = newRowIndex * layout.itemPerRowCount + itemLayout.itemColumnIndex;\r\n            if (newItemIndex < 0) {\r\n                newItemIndex = 0\r\n            } else {\r\n                if (newItemIndex >= this._items.length) {\r\n                    newItemIndex = this._items.length - 1\r\n                }\r\n            }\r\n            this._selectItemByIndex(newItemIndex, true, eventArgs)\r\n        }\r\n    }, {\r\n        key: \"_onClick\",\r\n        value: function(e) {\r\n            var $item = (0, _renderer2.default)(e.target).closest(this._getItemSelector());\r\n            if ($item.length > 0) {\r\n                this._selectItemByItemElement($item, e)\r\n            } else {\r\n                this.clearSelection()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onContextMenu\",\r\n        value: function(e) {\r\n            e.preventDefault();\r\n            this._onClick(e);\r\n            var items = this.getSelectedItems();\r\n            this._showContextMenu(items, e.target, e)\r\n        }\r\n    }, {\r\n        key: \"_selectItemByItemElement\",\r\n        value: function($item, e) {\r\n            var index = $item.data(\"index\");\r\n            this._selectItemByIndex(index, false, e)\r\n        }\r\n    }, {\r\n        key: \"_getItemThumbnailCssClass\",\r\n        value: function() {\r\n            return FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS\r\n        }\r\n    }, {\r\n        key: \"_getItemSelector\",\r\n        value: function() {\r\n            return \".\".concat(FILE_MANAGER_THUMBNAILS_ITEM_CLASS)\r\n        }\r\n    }, {\r\n        key: \"_onItemDblClick\",\r\n        value: function(e) {\r\n            var $item = (0, _renderer2.default)(e.currentTarget);\r\n            var index = $item.data(\"index\");\r\n            var item = this._items[index];\r\n            this._raiseSelectedItemOpened(item)\r\n        }\r\n    }, {\r\n        key: \"_scrollToItem\",\r\n        value: function(item) {\r\n            var layout = this._getLayoutModel();\r\n            if (!layout) {\r\n                return\r\n            }\r\n            var itemRowIndex = Math.floor(item._state.index / layout.itemPerRowCount);\r\n            var itemTop = itemRowIndex * layout.itemHeight;\r\n            var itemBottom = itemTop + layout.itemHeight;\r\n            var newScrollTop = layout.viewPortScrollTop;\r\n            if (itemTop < layout.viewPortScrollTop) {\r\n                newScrollTop = itemTop\r\n            } else {\r\n                if (itemBottom > layout.viewPortScrollBottom) {\r\n                    newScrollTop = itemBottom - layout.viewPortHeight\r\n                }\r\n            }\r\n            this._$viewPort.scrollTop(newScrollTop)\r\n        }\r\n    }, {\r\n        key: \"_resetLayoutModel\",\r\n        value: function() {\r\n            this._layoutModel = null\r\n        }\r\n    }, {\r\n        key: \"_getLayoutModel\",\r\n        value: function() {\r\n            if (!this._layoutModel) {\r\n                this._layoutModel = this._createLayoutModel()\r\n            }\r\n            return this._layoutModel\r\n        }\r\n    }, {\r\n        key: \"_createLayoutModel\",\r\n        value: function() {\r\n            if (0 === this._items.length) {\r\n                return null\r\n            }\r\n            var item = this._items[0];\r\n            var $item = item._state.$element;\r\n            var itemWidth = $item.outerWidth(true);\r\n            if (0 === itemWidth) {\r\n                return null\r\n            }\r\n            var itemHeight = $item.outerHeight(true);\r\n            var viewPortWidth = this._$itemViewContainer.innerWidth();\r\n            var viewPortHeight = this._$viewPort.innerHeight();\r\n            var viewPortScrollTop = this._$viewPort.scrollTop();\r\n            var viewPortScrollBottom = viewPortScrollTop + viewPortHeight;\r\n            var itemPerRowCount = Math.floor(viewPortWidth / itemWidth);\r\n            var rowPerPageRate = viewPortHeight / itemHeight;\r\n            return {\r\n                itemWidth: itemWidth,\r\n                itemHeight: itemHeight,\r\n                viewPortWidth: viewPortWidth,\r\n                viewPortHeight: viewPortHeight,\r\n                viewPortScrollTop: viewPortScrollTop,\r\n                viewPortScrollBottom: viewPortScrollBottom,\r\n                itemPerRowCount: itemPerRowCount,\r\n                rowPerPageRate: rowPerPageRate\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createItemLayoutModel\",\r\n        value: function(index) {\r\n            var layout = this._getLayoutModel();\r\n            if (!layout) {\r\n                return null\r\n            }\r\n            var itemRowIndex = Math.floor(index / layout.itemPerRowCount);\r\n            var itemColumnIndex = index % layout.itemPerRowCount;\r\n            var itemTop = itemRowIndex * layout.itemHeight;\r\n            var itemBottom = itemTop + layout.itemHeight;\r\n            return {\r\n                itemRowIndex: itemRowIndex,\r\n                itemColumnIndex: itemColumnIndex,\r\n                itemTop: itemTop,\r\n                itemBottom: itemBottom\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_selectAll\",\r\n        value: function() {\r\n            this._selectionController.selectAll()\r\n        }\r\n    }, {\r\n        key: \"_selectItem\",\r\n        value: function(item, scrollToItem, eventArgs) {\r\n            this._selectionController.selectItem(item, eventArgs);\r\n            if (scrollToItem) {\r\n                this._scrollToItem(item)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_selectItemByIndex\",\r\n        value: function(index, scrollToItem, eventArgs) {\r\n            if (index >= 0 && index < this._items.length) {\r\n                var item = this._items[index];\r\n                this._selectItem(item, scrollToItem, eventArgs)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getFocusedItem\",\r\n        value: function() {\r\n            return this._selectionController.getFocusedItem()\r\n        }\r\n    }, {\r\n        key: \"_loadItems\",\r\n        value: function() {\r\n            var _this = this;\r\n            var loadOperationId = this._getUniqueId();\r\n            this._currentLoadOperationId = loadOperationId;\r\n            (0, _deferred.when)(this._getItems()).then(function(items) {\r\n                if (_this._currentLoadOperationId === loadOperationId) {\r\n                    _this._applyItems(items || [])\r\n                }\r\n            }, function(error) {\r\n                if (_this._currentLoadOperationId === loadOperationId) {\r\n                    _this._raiseOnError(error)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_applyItems\",\r\n        value: function(items) {\r\n            this._items = items;\r\n            this._selectionController.setItems(items);\r\n            this._renderItems(items)\r\n        }\r\n    }, {\r\n        key: \"_renderItems\",\r\n        value: function(items) {\r\n            this._$itemViewContainer.empty();\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = items[i];\r\n                item._state = {\r\n                    index: i,\r\n                    selected: false,\r\n                    $element: null\r\n                };\r\n                this._renderItem(item)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderItem\",\r\n        value: function(fileItemInfo) {\r\n            var $item = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_CLASS).attr(\"title\", this._getTooltipText(fileItemInfo)).data(\"index\", fileItemInfo._state.index);\r\n            var $itemContent = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS);\r\n            var $itemThumbnail = this._getItemThumbnailContainer(fileItemInfo);\r\n            _events_engine2.default.on($itemThumbnail, \"dragstart\", this._disableDragging);\r\n            var $itemSpacer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS);\r\n            var $itemName = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS).text(fileItemInfo.fileItem.name);\r\n            $item.append($itemContent);\r\n            $itemContent.append($itemThumbnail, $itemSpacer, $itemName);\r\n            this._$itemViewContainer.append($item);\r\n            fileItemInfo._state.$element = $item\r\n        }\r\n    }, {\r\n        key: \"_getTooltipText\",\r\n        value: function(fileItemInfo) {\r\n            var item = fileItemInfo.fileItem;\r\n            if (item.tooltipText) {\r\n                return item.tooltipText\r\n            }\r\n            var text = \"\".concat(item.name, \"\\r\\n\");\r\n            if (!item.isDirectory) {\r\n                text += \"\".concat(_message2.default.format(\"dxFileManager-listThumbnailsTooltipTextSize\"), \": \").concat((0, _uiFile_managerUtils.getDisplayFileSize)(item.size), \"\\r\\n\")\r\n            }\r\n            text += \"\".concat(_message2.default.format(\"dxFileManager-listThumbnailsTooltipTextDateModified\"), \": \").concat(item.dateModified);\r\n            return text\r\n        }\r\n    }, {\r\n        key: \"_getUniqueId\",\r\n        value: function() {\r\n            return \"\".concat(Date.now(), \"_\").concat(Math.round(1e5 * Math.random()))\r\n        }\r\n    }, {\r\n        key: \"_disableDragging\",\r\n        value: function() {\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                focusStateEnabled: true\r\n            })\r\n        }\r\n    }, {\r\n        key: \"refresh\",\r\n        value: function() {\r\n            this.clearSelection();\r\n            this._loadItems()\r\n        }\r\n    }, {\r\n        key: \"tryOpen\",\r\n        value: function() {\r\n            var item = this._getFocusedItem();\r\n            if (item) {\r\n                this._raiseSelectedItemOpened(item)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"clearSelection\",\r\n        value: function() {\r\n            this._selectionController.clearSelection()\r\n        }\r\n    }, {\r\n        key: \"getSelectedItems\",\r\n        value: function() {\r\n            return this._selectionController.getSelectedItems()\r\n        }\r\n    }]);\r\n    return FileManagerThumbnailsItemList\r\n}(_uiFile_manager2.default);\r\nvar SingleSelectionController = function() {\r\n    function SingleSelectionController(options) {\r\n        _classCallCheck(this, SingleSelectionController);\r\n        this._items = [];\r\n        this._selectionChangedHandler = options.onSelectionChanged;\r\n        this._selectionChanged = false\r\n    }\r\n    _createClass(SingleSelectionController, [{\r\n        key: \"selectAll\",\r\n        value: function() {}\r\n    }, {\r\n        key: \"clearSelection\",\r\n        value: function() {\r\n            this._beginUpdate();\r\n            this._setAllItemsSelectedState(false);\r\n            this._endUpdate()\r\n        }\r\n    }, {\r\n        key: \"selectItem\",\r\n        value: function(item, eventArgs) {\r\n            this._beginUpdate();\r\n            this._setAllItemsSelectedState(false, [item]);\r\n            this._setItemSelectedState(item, true);\r\n            this._endUpdate()\r\n        }\r\n    }, {\r\n        key: \"invertFocusedItemSelection\",\r\n        value: function(item) {}\r\n    }, {\r\n        key: \"getFocusedItem\",\r\n        value: function() {\r\n            var selectedItems = this.getSelectedItems();\r\n            return selectedItems.length > 0 ? selectedItems[0] : null\r\n        }\r\n    }, {\r\n        key: \"getSelectedItems\",\r\n        value: function() {\r\n            return this._items.filter(function(item) {\r\n                return item._state.selected\r\n            })\r\n        }\r\n    }, {\r\n        key: \"setItems\",\r\n        value: function(items) {\r\n            this._items = items\r\n        }\r\n    }, {\r\n        key: \"_setItemSelectedState\",\r\n        value: function(item, selected) {\r\n            if (item._state.selected === selected) {\r\n                return\r\n            }\r\n            item._state.selected = selected;\r\n            item._state.$element.toggleClass(FILE_MANAGER_ITEM_SELECTED_CLASS, selected);\r\n            this._selectionChanged = true\r\n        }\r\n    }, {\r\n        key: \"_setAllItemsSelectedState\",\r\n        value: function(selected, exceptedItems) {\r\n            for (var i = 0; i < this._items.length; i++) {\r\n                var item = this._items[i];\r\n                if (exceptedItems && exceptedItems.indexOf(item) !== -1) {\r\n                    continue\r\n                }\r\n                this._setItemSelectedState(item, selected)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_beginUpdate\",\r\n        value: function() {\r\n            this._selectionChanged = false\r\n        }\r\n    }, {\r\n        key: \"_endUpdate\",\r\n        value: function() {\r\n            if (this._selectionChanged) {\r\n                this._selectionChangedHandler();\r\n                this._selectionChanged = false\r\n            }\r\n        }\r\n    }]);\r\n    return SingleSelectionController\r\n}();\r\nvar MultipleSelectionController = function(_SingleSelectionContr) {\r\n    _inherits(MultipleSelectionController, _SingleSelectionContr);\r\n\r\n    function MultipleSelectionController(options) {\r\n        var _this2;\r\n        _classCallCheck(this, MultipleSelectionController);\r\n        _this2 = _possibleConstructorReturn(this, _getPrototypeOf(MultipleSelectionController).call(this, options));\r\n        _this2._focusedItem = null;\r\n        return _this2\r\n    }\r\n    _createClass(MultipleSelectionController, [{\r\n        key: \"selectAll\",\r\n        value: function() {\r\n            this._beginUpdate();\r\n            this._setAllItemsSelectedState(true);\r\n            this._endUpdate()\r\n        }\r\n    }, {\r\n        key: \"selectItem\",\r\n        value: function(item, eventArgs) {\r\n            this._beginUpdate();\r\n            if (eventArgs.shiftKey) {\r\n                this._setItemsRangeSelectedState(this._focusedItem._state.index, item._state.index, eventArgs.ctrlKey, true)\r\n            } else {\r\n                if (eventArgs.ctrlKey) {\r\n                    var needSelect = 1 === this._items.length && this._focusedItem === item || !item._state.selected;\r\n                    this._setItemSelectedState(item, needSelect)\r\n                } else {\r\n                    this._setAllItemsSelectedState(false, [item]);\r\n                    this._setItemSelectedState(item, true)\r\n                }\r\n            }\r\n            this._setFocusedItem(item);\r\n            this._endUpdate()\r\n        }\r\n    }, {\r\n        key: \"_setItemsRangeSelectedState\",\r\n        value: function(startIndex, endIndex, invert, selected) {\r\n            if (startIndex > endIndex) {\r\n                var temp = endIndex;\r\n                endIndex = startIndex;\r\n                startIndex = temp\r\n            }\r\n            for (var i = startIndex; i <= endIndex; i++) {\r\n                var item = this._items[i];\r\n                var actualSelected = invert ? !item._state.selected : selected;\r\n                this._setItemSelectedState(item, actualSelected)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setFocusedItem\",\r\n        value: function(item) {\r\n            if (this._focusedItem === item) {\r\n                return\r\n            }\r\n            if (this._focusedItem) {\r\n                this._focusedItem._state.$element.removeClass(FILE_MANAGER_ITEM_FOCUSED_CLASS)\r\n            }\r\n            item._state.$element.addClass(FILE_MANAGER_ITEM_FOCUSED_CLASS);\r\n            this._focusedItem = item\r\n        }\r\n    }, {\r\n        key: \"invertFocusedItemSelection\",\r\n        value: function() {\r\n            if (!this._focusedItem) {\r\n                return\r\n            }\r\n            this._beginUpdate();\r\n            this._setItemSelectedState(this._focusedItem, !this._focusedItem._state.selected);\r\n            this._endUpdate()\r\n        }\r\n    }, {\r\n        key: \"getFocusedItem\",\r\n        value: function() {\r\n            return this._focusedItem\r\n        }\r\n    }, {\r\n        key: \"setItems\",\r\n        value: function(items) {\r\n            _get(_getPrototypeOf(MultipleSelectionController.prototype), \"setItems\", this).call(this, items);\r\n            this._focusedItem = items.length > 0 ? items[0] : null\r\n        }\r\n    }]);\r\n    return MultipleSelectionController\r\n}(SingleSelectionController);\r\nmodule.exports = FileManagerThumbnailsItemList;\r\n"]},"metadata":{},"sourceType":"script"}