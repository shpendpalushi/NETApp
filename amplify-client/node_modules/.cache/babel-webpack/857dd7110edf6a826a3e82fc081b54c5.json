{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.columns_resizing_reordering.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _callbacks = require(\"../../core/utils/callbacks\");\n\nvar _callbacks2 = _interopRequireDefault(_callbacks);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _utils = require(\"../../events/utils\");\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _drag = require(\"../../events/drag\");\n\nvar _drag2 = _interopRequireDefault(_drag);\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\n\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\n\nvar _fx = require(\"../../animation/fx\");\n\nvar _fx2 = _interopRequireDefault(_fx);\n\nvar _swatch_container = require(\"../widget/swatch_container\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar COLUMNS_SEPARATOR_CLASS = \"columns-separator\";\nvar COLUMNS_SEPARATOR_TRANSPARENT = \"columns-separator-transparent\";\nvar DRAGGING_HEADER_CLASS = \"drag-header\";\nvar CELL_CONTENT_CLASS = \"text-content\";\nvar HEADERS_DRAG_ACTION_CLASS = \"drag-action\";\nvar TRACKER_CLASS = \"tracker\";\nvar HEADERS_DROP_HIGHLIGHT_CLASS = \"drop-highlight\";\nvar BLOCK_SEPARATOR_CLASS = \"dx-block-separator\";\nvar HEADER_ROW_CLASS = \"dx-header-row\";\nvar WIDGET_CLASS = \"dx-widget\";\nvar DRAGGING_COMMAND_CELL_CLASS = \"dx-drag-command-cell\";\nvar MODULE_NAMESPACE = \"dxDataGridResizingReordering\";\nvar COLUMNS_SEPARATOR_TOUCH_TRACKER_WIDTH = 10;\nvar DRAGGING_DELTA = 5;\nvar COLUMN_OPACITY = .5;\n\nvar allowResizing = function allowResizing(that) {\n  return that.option(\"allowColumnResizing\") || that.getController(\"columns\").isColumnOptionUsed(\"allowResizing\");\n};\n\nvar allowReordering = function allowReordering(that) {\n  return that.option(\"allowColumnReordering\") || that.getController(\"columns\").isColumnOptionUsed(\"allowReordering\");\n};\n\nvar TrackerView = _uiGrid_core2.default.View.inherit({\n  _renderCore: function _renderCore() {\n    this.callBase();\n    this.element().addClass(this.addWidgetPrefix(TRACKER_CLASS));\n    this.hide();\n  },\n  _unsubscribeFromCallback: function _unsubscribeFromCallback() {\n    if (this._positionChanged) {\n      this._tablePositionController.positionChanged.remove(this._positionChanged);\n    }\n  },\n  _subscribeToCallback: function _subscribeToCallback() {\n    var that = this;\n\n    that._positionChanged = function (position) {\n      var $element = that.element();\n\n      if ($element && $element.hasClass(that.addWidgetPrefix(TRACKER_CLASS))) {\n        $element.css({\n          top: position.top\n        });\n        $element.height(position.height);\n      }\n    };\n\n    this._tablePositionController.positionChanged.add(that._positionChanged);\n  },\n  optionChanged: function optionChanged(args) {\n    if (\"allowColumnResizing\" === args.name) {\n      this._unsubscribeFromCallback();\n\n      if (args.value) {\n        this._subscribeToCallback();\n\n        this._invalidate();\n      }\n    }\n\n    this.callBase(args);\n  },\n  init: function init() {\n    this.callBase();\n    this._tablePositionController = this.getController(\"tablePosition\");\n\n    this._subscribeToCallback();\n  },\n  isVisible: function isVisible() {\n    return allowResizing(this);\n  },\n  show: function show() {\n    this.element().show();\n  },\n  hide: function hide() {\n    this.element() && this.element().hide();\n  },\n  setHeight: function setHeight(value) {\n    this.element().height(value);\n  },\n  dispose: function dispose() {\n    this._unsubscribeFromCallback();\n\n    this.callBase();\n  }\n});\n\nvar SeparatorView = _uiGrid_core2.default.View.inherit({\n  _renderSeparator: function _renderSeparator() {},\n  _renderCore: function _renderCore(options) {\n    this.callBase(options);\n    this._isShown = true;\n\n    this._renderSeparator();\n\n    this.hide();\n  },\n  show: function show() {\n    this._isShown = true;\n  },\n  hide: function hide() {\n    this._isShown = false;\n  },\n  height: function height(value) {\n    var $element = this.element();\n\n    if ($element) {\n      if (_type2.default.isDefined(value)) {\n        $element.height(value);\n      } else {\n        return $element.height();\n      }\n    }\n  },\n  width: function width(value) {\n    var $element = this.element();\n\n    if ($element) {\n      if (_type2.default.isDefined(value)) {\n        $element.width(value);\n      } else {\n        return $element.width();\n      }\n    }\n  }\n});\n\nvar ColumnsSeparatorView = SeparatorView.inherit({\n  _renderSeparator: function _renderSeparator() {\n    this.callBase();\n    var $element = this.element();\n    $element.addClass(this.addWidgetPrefix(COLUMNS_SEPARATOR_CLASS));\n  },\n  _subscribeToCallback: function _subscribeToCallback() {\n    var that = this;\n    var $element;\n\n    that._positionChanged = function (position) {\n      $element = that.element();\n\n      if ($element) {\n        $element.css({\n          top: position.top\n        });\n        $element.height(position.height);\n      }\n    };\n\n    that._tablePositionController.positionChanged.add(that._positionChanged);\n  },\n  _unsubscribeFromCallback: function _unsubscribeFromCallback() {\n    this._positionChanged && this._tablePositionController.positionChanged.remove(this._positionChanged);\n  },\n  _init: function _init() {\n    this._isTransparent = allowResizing(this);\n\n    if (this.isVisible()) {\n      this._subscribeToCallback();\n    }\n  },\n  isVisible: function isVisible() {\n    return this.option(\"showColumnHeaders\") && (allowReordering(this) || allowResizing(this));\n  },\n  optionChanged: function optionChanged(args) {\n    if (\"allowColumnResizing\" === args.name) {\n      if (args.value) {\n        this._init();\n\n        this._invalidate();\n\n        this.hide(true);\n      } else {\n        this._unsubscribeFromCallback();\n\n        this._isTransparent = allowResizing(this);\n        this.hide(true);\n      }\n    }\n\n    this.callBase(args);\n  },\n  init: function init() {\n    this.callBase();\n    this._tablePositionController = this.getController(\"tablePosition\");\n\n    this._init();\n  },\n  show: function show() {\n    var that = this;\n    var $element = this.element();\n\n    if ($element && !that._isShown) {\n      if (that._isTransparent) {\n        $element.removeClass(that.addWidgetPrefix(COLUMNS_SEPARATOR_TRANSPARENT));\n      } else {\n        $element.show();\n      }\n    }\n\n    this.callBase();\n  },\n  hide: function hide(force) {\n    var $element = this.element();\n    var columnsSeparatorTransparent = this.addWidgetPrefix(COLUMNS_SEPARATOR_TRANSPARENT);\n\n    if ($element && (this._isShown || force)) {\n      if (this._isTransparent) {\n        $element.addClass(columnsSeparatorTransparent);\n        $element.css(\"left\", \"\");\n        $element.show();\n      } else {\n        if ($element.hasClass(columnsSeparatorTransparent)) {\n          $element.removeClass(columnsSeparatorTransparent);\n        }\n\n        $element.hide();\n      }\n    }\n\n    this.callBase();\n  },\n  moveByX: function moveByX(outerX) {\n    var $element = this.element();\n\n    if ($element) {\n      $element.css(\"left\", outerX - this._parentElement().offset().left);\n    }\n  },\n  changeCursor: function changeCursor(cursorName) {\n    cursorName = _type2.default.isDefined(cursorName) ? cursorName : \"\";\n    var $element = this.element();\n\n    if ($element) {\n      $element.css(\"cursor\", cursorName);\n    }\n  },\n  dispose: function dispose() {\n    this._unsubscribeFromCallback();\n\n    this.callBase();\n  }\n});\nvar BlockSeparatorView = SeparatorView.inherit({\n  init: function init() {\n    var that = this;\n    this.callBase();\n    this.getController(\"data\").loadingChanged.add(function (isLoading) {\n      if (!isLoading) {\n        that.hide();\n      }\n    });\n  },\n  _renderSeparator: function _renderSeparator() {\n    this.callBase();\n    this.element().addClass(BLOCK_SEPARATOR_CLASS).html(\"&nbsp;\");\n  },\n  hide: function hide() {\n    var that = this;\n\n    var $parent = this._parentElement();\n\n    var $element = this.element();\n\n    if ($element && this._isShown) {\n      $element.css(\"display\", \"none\");\n    }\n\n    if ($parent && !$parent.children(\".\" + BLOCK_SEPARATOR_CLASS).length) {\n      $parent.prepend(that.element());\n    }\n\n    that.callBase();\n  },\n  isVisible: function isVisible() {\n    var groupPanelOptions = this.option(\"groupPanel\");\n    var columnChooserOptions = this.option(\"columnChooser\");\n    return groupPanelOptions && groupPanelOptions.visible || columnChooserOptions && columnChooserOptions.enabled;\n  },\n  show: function show(targetLocation) {\n    var that = this;\n    var $element = this.element();\n\n    var startAnimate = function startAnimate(toOptions) {\n      _fx2.default.stop($element, true);\n\n      _fx2.default.animate($element, {\n        type: \"slide\",\n        from: {\n          width: 0,\n          display: toOptions.display\n        },\n        to: toOptions,\n        duration: 300,\n        easing: \"swing\"\n      });\n    };\n\n    if ($element && !that._isShown) {\n      switch (targetLocation) {\n        case \"group\":\n          startAnimate({\n            width: \"50px\",\n            display: \"inline-block\"\n          });\n          break;\n\n        case \"columnChooser\":\n          startAnimate({\n            width: \"100%\",\n            display: \"block\"\n          });\n          break;\n\n        default:\n          $element.css(\"display\", \"\");\n      }\n    }\n\n    that.callBase();\n  }\n});\n\nvar DraggingHeaderView = _uiGrid_core2.default.View.inherit({\n  _isDragging: false,\n  _getDraggingPanelByPos: function _getDraggingPanelByPos(pos) {\n    var that = this;\n    var result;\n    (0, _iterator.each)(that._dragOptions.draggingPanels, function (index, draggingPanel) {\n      if (draggingPanel) {\n        var boundingRect = draggingPanel.getBoundingRect();\n\n        if (boundingRect && (void 0 === boundingRect.bottom || pos.y < boundingRect.bottom) && (void 0 === boundingRect.top || pos.y > boundingRect.top) && (void 0 === boundingRect.left || pos.x > boundingRect.left) && (void 0 === boundingRect.right || pos.x < boundingRect.right)) {\n          result = draggingPanel;\n          return false;\n        }\n      }\n    });\n    return result;\n  },\n  _renderCore: function _renderCore() {\n    this.element().addClass(this.addWidgetPrefix(DRAGGING_HEADER_CLASS) + \" \" + this.addWidgetPrefix(CELL_CONTENT_CLASS) + \" \" + WIDGET_CLASS).hide();\n  },\n  _resetTargetColumnOptions: function _resetTargetColumnOptions() {\n    var params = this._dropOptions;\n    params.targetColumnIndex = -1;\n    delete params.targetColumnElement;\n    delete params.isLast;\n    delete params.posX;\n    delete params.posY;\n  },\n  _getVisibleIndexObject: function _getVisibleIndexObject(rowIndex, visibleIndex) {\n    if (_type2.default.isDefined(rowIndex)) {\n      return {\n        columnIndex: visibleIndex,\n        rowIndex: rowIndex\n      };\n    }\n\n    return visibleIndex;\n  },\n  dispose: function dispose() {\n    var element = this.element();\n    this._dragOptions = null;\n    element && element.parent().find(\".\" + this.addWidgetPrefix(DRAGGING_HEADER_CLASS)).remove();\n  },\n  isVisible: function isVisible() {\n    var columnsController = this.getController(\"columns\");\n    var commonColumnSettings = columnsController.getCommonSettings();\n    return this.option(\"showColumnHeaders\") && (allowReordering(this) || commonColumnSettings.allowGrouping || commonColumnSettings.allowHiding);\n  },\n  init: function init() {\n    var that = this;\n    this.callBase();\n    this._controller = this.getController(\"draggingHeader\");\n    this._columnsResizerViewController = this.getController(\"columnsResizer\");\n    this.getController(\"data\").loadingChanged.add(function (isLoading) {\n      var element = that.element();\n\n      if (!isLoading && element) {\n        element.hide();\n      }\n    });\n  },\n  dragHeader: function dragHeader(options) {\n    var that = this;\n    var columnElement = options.columnElement;\n    var isCommandColumn = !!options.sourceColumn.type;\n    that._isDragging = true;\n    that._dragOptions = options;\n    that._dropOptions = {\n      sourceIndex: options.index,\n      sourceColumnIndex: that._getVisibleIndexObject(options.rowIndex, options.columnIndex),\n      sourceColumnElement: options.columnElement,\n      sourceLocation: options.sourceLocation\n    };\n\n    var document = _dom_adapter2.default.getDocument();\n\n    that._onSelectStart = document.onselectstart;\n\n    document.onselectstart = function () {\n      return false;\n    };\n\n    that._controller.drag(that._dropOptions);\n\n    that.element().css({\n      textAlign: columnElement && columnElement.css(\"textAlign\"),\n      height: columnElement && (isCommandColumn && columnElement.get(0).clientHeight || columnElement.height()),\n      width: columnElement && (isCommandColumn && columnElement.get(0).clientWidth || columnElement.width()),\n      whiteSpace: columnElement && columnElement.css(\"whiteSpace\")\n    }).addClass(that.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS)).toggleClass(DRAGGING_COMMAND_CELL_CLASS, isCommandColumn).text(isCommandColumn ? \"\" : options.sourceColumn.caption);\n    that.element().appendTo((0, _swatch_container.getSwatchContainer)(columnElement));\n  },\n  moveHeader: function moveHeader(args) {\n    var e = args.event;\n    var that = e.data.that;\n    var newLeft;\n    var newTop;\n    var moveDeltaX;\n    var moveDeltaY;\n    var eventData = (0, _utils.eventData)(e);\n    var isResizing = that._columnsResizerViewController ? that._columnsResizerViewController.isResizing() : false;\n    var dragOptions = that._dragOptions;\n\n    if (that._isDragging && !isResizing) {\n      var $element = that.element();\n      moveDeltaX = Math.abs(eventData.x - dragOptions.columnElement.offset().left - dragOptions.deltaX);\n      moveDeltaY = Math.abs(eventData.y - dragOptions.columnElement.offset().top - dragOptions.deltaY);\n\n      if ($element.is(\":visible\") || moveDeltaX > DRAGGING_DELTA || moveDeltaY > DRAGGING_DELTA) {\n        $element.show();\n        newLeft = eventData.x - dragOptions.deltaX;\n        newTop = eventData.y - dragOptions.deltaY;\n        $element.css({\n          left: newLeft,\n          top: newTop\n        });\n        that.dockHeader(eventData);\n      }\n\n      e.preventDefault();\n    }\n  },\n  dockHeader: function dockHeader(eventData) {\n    var that = this;\n\n    var targetDraggingPanel = that._getDraggingPanelByPos(eventData);\n\n    var controller = that._controller;\n    var i;\n    var params = that._dropOptions;\n    var dragOptions = that._dragOptions;\n    var centerPosition;\n\n    if (targetDraggingPanel) {\n      var rtlEnabled = that.option(\"rtlEnabled\");\n      var isVerticalOrientation = \"columnChooser\" === targetDraggingPanel.getName();\n      var axisName = isVerticalOrientation ? \"y\" : \"x\";\n      var targetLocation = targetDraggingPanel.getName();\n      var rowIndex = \"headers\" === targetLocation ? dragOptions.rowIndex : void 0;\n      var sourceColumn = dragOptions.sourceColumn;\n      var columnElements = targetDraggingPanel.getColumnElements(rowIndex, sourceColumn && sourceColumn.ownerBand) || [];\n      var pointsByTarget = dragOptions.pointsByTarget = dragOptions.pointsByTarget || {};\n      var pointsByColumns = \"columnChooser\" === targetLocation ? [] : pointsByTarget[targetLocation] || controller._generatePointsByColumns((0, _extend.extend)({}, dragOptions, {\n        targetDraggingPanel: targetDraggingPanel,\n        columns: targetDraggingPanel.getColumns(rowIndex),\n        columnElements: columnElements,\n        isVerticalOrientation: isVerticalOrientation,\n        startColumnIndex: \"headers\" === targetLocation && (0, _renderer2.default)(columnElements[0]).index()\n      }));\n      pointsByTarget[targetLocation] = pointsByColumns;\n      params.targetLocation = targetLocation;\n\n      if (pointsByColumns.length > 0) {\n        for (i = 0; i < pointsByColumns.length; i++) {\n          centerPosition = pointsByColumns[i + 1] && (pointsByColumns[i][axisName] + pointsByColumns[i + 1][axisName]) / 2;\n\n          if (void 0 === centerPosition || (rtlEnabled && \"x\" === axisName ? eventData[axisName] > centerPosition : eventData[axisName] < centerPosition)) {\n            params.targetColumnIndex = that._getVisibleIndexObject(rowIndex, pointsByColumns[i].columnIndex);\n\n            if (columnElements[i]) {\n              params.targetColumnElement = columnElements.eq(i);\n              params.isLast = false;\n            } else {\n              params.targetColumnElement = columnElements.last();\n              params.isLast = true;\n            }\n\n            params.posX = pointsByColumns[i].x;\n            params.posY = pointsByColumns[i].y;\n            controller.dock(params);\n            break;\n          }\n        }\n      } else {\n        that._resetTargetColumnOptions();\n\n        controller.dock(params);\n      }\n    }\n  },\n  dropHeader: function dropHeader(args) {\n    var e = args.event;\n    var that = e.data.that;\n    var controller = that._controller;\n    that.element().hide();\n\n    if (controller && that._isDragging) {\n      controller.drop(that._dropOptions);\n    }\n\n    that.element().appendTo(that._parentElement());\n    that._dragOptions = null;\n    that._dropOptions = null;\n    that._isDragging = false;\n    _dom_adapter2.default.getDocument().onselectstart = that._onSelectStart || null;\n  }\n});\n\nvar isNextColumnResizingMode = function isNextColumnResizingMode(that) {\n  return \"widget\" !== that.option(\"columnResizingMode\");\n};\n\nvar ColumnsResizerViewController = _uiGrid_core2.default.ViewController.inherit({\n  _isHeadersRowArea: function _isHeadersRowArea(posY) {\n    if (this._columnHeadersView) {\n      var element = this._columnHeadersView.element();\n\n      var headersRowHeight;\n      var offsetTop;\n\n      if (element) {\n        offsetTop = element.offset().top;\n        headersRowHeight = this._columnHeadersView.getHeadersRowHeight();\n        return posY >= offsetTop && posY <= offsetTop + headersRowHeight;\n      }\n    }\n\n    return false;\n  },\n  _pointCreated: function _pointCreated(point, cellsLength, columns) {\n    var currentColumn;\n    var isNextColumnMode = isNextColumnResizingMode(this);\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    var firstPointColumnIndex = !isNextColumnMode && rtlEnabled ? 0 : 1;\n    var nextColumn;\n\n    if (point.index >= firstPointColumnIndex && point.index < cellsLength + (!isNextColumnMode && !rtlEnabled ? 1 : 0)) {\n      point.columnIndex -= firstPointColumnIndex;\n      currentColumn = columns[point.columnIndex] || {};\n      nextColumn = columns[point.columnIndex + 1] || {};\n      return !(isNextColumnMode ? currentColumn.allowResizing && nextColumn.allowResizing : currentColumn.allowResizing);\n    }\n\n    return true;\n  },\n  _getTargetPoint: function _getTargetPoint(pointsByColumns, currentX, deltaX) {\n    if (pointsByColumns) {\n      for (var i = 0; i < pointsByColumns.length; i++) {\n        if (pointsByColumns[i].x === pointsByColumns[0].x && pointsByColumns[i + 1] && pointsByColumns[i].x === pointsByColumns[i + 1].x) {\n          continue;\n        }\n\n        if (pointsByColumns[i].x - deltaX <= currentX && currentX <= pointsByColumns[i].x + deltaX) {\n          return pointsByColumns[i];\n        }\n      }\n    }\n\n    return null;\n  },\n  _moveSeparator: function _moveSeparator(args) {\n    var e = args.event;\n    var that = e.data;\n\n    var columnsSeparatorWidth = that._columnsSeparatorView.width();\n\n    var isNextColumnMode = isNextColumnResizingMode(that);\n    var deltaX = columnsSeparatorWidth / 2;\n\n    var parentOffset = that._$parentContainer.offset();\n\n    var parentOffsetLeft = parentOffset.left;\n    var eventData = (0, _utils.eventData)(e);\n\n    if (that._isResizing && that._resizingInfo) {\n      if (parentOffsetLeft <= eventData.x && (!isNextColumnMode || eventData.x <= parentOffsetLeft + that._$parentContainer.width())) {\n        if (that._updateColumnsWidthIfNeeded(eventData.x)) {\n          var $cell = that._columnHeadersView.getColumnElements().eq(that._resizingInfo.currentColumnIndex);\n\n          that._columnsSeparatorView.moveByX($cell.offset().left + (isNextColumnMode && that.option(\"rtlEnabled\") ? 0 : $cell.outerWidth()));\n\n          that._tablePositionController.update(that._targetPoint.y);\n\n          e.preventDefault();\n        }\n      }\n    } else {\n      if (that._isHeadersRowArea(eventData.y)) {\n        if (that._previousParentOffset) {\n          if (that._previousParentOffset.left !== parentOffset.left || that._previousParentOffset.top !== parentOffset.top) {\n            that.pointsByColumns(null);\n          }\n        }\n\n        that._targetPoint = that._getTargetPoint(that.pointsByColumns(), eventData.x, columnsSeparatorWidth);\n        that._previousParentOffset = parentOffset;\n        that._isReadyResizing = false;\n\n        if (that._targetPoint) {\n          that._columnsSeparatorView.changeCursor(\"col-resize\");\n\n          that._columnsSeparatorView.moveByX(that._targetPoint.x - deltaX);\n\n          that._tablePositionController.update(that._targetPoint.y);\n\n          that._isReadyResizing = true;\n          e.preventDefault();\n        } else {\n          that._columnsSeparatorView.changeCursor();\n        }\n      } else {\n        that.pointsByColumns(null);\n        that._isReadyResizing = false;\n\n        that._columnsSeparatorView.changeCursor();\n      }\n    }\n  },\n  _endResizing: function _endResizing(args) {\n    var e = args.event;\n    var that = e.data;\n\n    if (that._isResizing) {\n      that.pointsByColumns(null);\n      that._resizingInfo = null;\n\n      that._columnsSeparatorView.hide();\n\n      that._columnsSeparatorView.changeCursor();\n\n      that._trackerView.hide();\n\n      if (!isNextColumnResizingMode(that)) {\n        var pageIndex = that.component.pageIndex();\n        that.component.updateDimensions();\n\n        if (that.option(\"wordWrapEnabled\") && \"virtual\" === that.option(\"scrolling.mode\")) {\n          var dataSource = that.component.getDataSource();\n          dataSource && dataSource.load().done(function () {\n            that._rowsView.scrollToPage(pageIndex);\n          });\n        }\n      }\n\n      that._isReadyResizing = false;\n      that._isResizing = false;\n    }\n  },\n  _getNextColumnIndex: function _getNextColumnIndex(currentColumnIndex) {\n    return currentColumnIndex + 1;\n  },\n  _setupResizingInfo: function _setupResizingInfo(posX) {\n    var that = this;\n    var currentColumnIndex = that._targetPoint.columnIndex;\n\n    var nextColumnIndex = that._getNextColumnIndex(currentColumnIndex);\n\n    var currentHeader = that._columnHeadersView.getHeaderElement(currentColumnIndex);\n\n    var nextHeader = that._columnHeadersView.getHeaderElement(nextColumnIndex);\n\n    that._resizingInfo = {\n      startPosX: posX,\n      currentColumnIndex: currentColumnIndex,\n      currentColumnWidth: currentHeader && currentHeader.length > 0 ? currentHeader[0].getBoundingClientRect().width : 0,\n      nextColumnIndex: nextColumnIndex,\n      nextColumnWidth: nextHeader && nextHeader.length > 0 ? nextHeader[0].getBoundingClientRect().width : 0\n    };\n  },\n  _startResizing: function _startResizing(args) {\n    var e = args.event;\n    var that = e.data;\n    var eventData = (0, _utils.eventData)(e);\n    var editingController = that.getController(\"editing\");\n    var editingMode = that.option(\"editing.mode\");\n    var isCellEditing = editingController.isEditing() && (\"batch\" === editingMode || \"cell\" === editingMode);\n\n    if ((0, _utils.isTouchEvent)(e)) {\n      if (that._isHeadersRowArea(eventData.y)) {\n        that._targetPoint = that._getTargetPoint(that.pointsByColumns(), eventData.x, COLUMNS_SEPARATOR_TOUCH_TRACKER_WIDTH);\n\n        if (that._targetPoint) {\n          that._columnsSeparatorView.moveByX(that._targetPoint.x - that._columnsSeparatorView.width() / 2);\n\n          that._isReadyResizing = true;\n        }\n      } else {\n        that._isReadyResizing = false;\n      }\n    }\n\n    if (that._isReadyResizing && !isCellEditing) {\n      that._setupResizingInfo(eventData.x);\n\n      that._isResizing = true;\n\n      that._tablePositionController.update(that._targetPoint.y);\n\n      that._columnsSeparatorView.show();\n\n      that._trackerView.show();\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  },\n  _generatePointsByColumns: function _generatePointsByColumns() {\n    var that = this;\n    var columns = that._columnsController ? that._columnsController.getVisibleColumns() : [];\n\n    var cells = that._columnHeadersView.getColumnElements();\n\n    var pointsByColumns = [];\n\n    if (cells && cells.length > 0) {\n      pointsByColumns = _uiGrid_core4.default.getPointsByColumns(cells, function (point) {\n        return that._pointCreated(point, cells.length, columns);\n      });\n    }\n\n    that._pointsByColumns = pointsByColumns;\n  },\n  _unsubscribeFromEvents: function _unsubscribeFromEvents() {\n    this._moveSeparatorHandler && _events_engine2.default.off(_dom_adapter2.default.getDocument(), (0, _utils.addNamespace)(_pointer2.default.move, MODULE_NAMESPACE), this._moveSeparatorHandler);\n    this._startResizingHandler && _events_engine2.default.off(this._$parentContainer, (0, _utils.addNamespace)(_pointer2.default.down, MODULE_NAMESPACE), this._startResizingHandler);\n\n    if (this._endResizingHandler) {\n      _events_engine2.default.off(this._columnsSeparatorView.element(), (0, _utils.addNamespace)(_pointer2.default.up, MODULE_NAMESPACE), this._endResizingHandler);\n\n      _events_engine2.default.off(_dom_adapter2.default.getDocument(), (0, _utils.addNamespace)(_pointer2.default.up, MODULE_NAMESPACE), this._endResizingHandler);\n    }\n  },\n  _subscribeToEvents: function _subscribeToEvents() {\n    this._moveSeparatorHandler = this.createAction(this._moveSeparator);\n    this._startResizingHandler = this.createAction(this._startResizing);\n    this._endResizingHandler = this.createAction(this._endResizing);\n\n    _events_engine2.default.on(_dom_adapter2.default.getDocument(), (0, _utils.addNamespace)(_pointer2.default.move, MODULE_NAMESPACE), this, this._moveSeparatorHandler);\n\n    _events_engine2.default.on(this._$parentContainer, (0, _utils.addNamespace)(_pointer2.default.down, MODULE_NAMESPACE), this, this._startResizingHandler);\n\n    _events_engine2.default.on(this._columnsSeparatorView.element(), (0, _utils.addNamespace)(_pointer2.default.up, MODULE_NAMESPACE), this, this._endResizingHandler);\n\n    _events_engine2.default.on(_dom_adapter2.default.getDocument(), (0, _utils.addNamespace)(_pointer2.default.up, MODULE_NAMESPACE), this, this._endResizingHandler);\n  },\n  _updateColumnsWidthIfNeeded: function _updateColumnsWidthIfNeeded(posX) {\n    var deltaX;\n    var needUpdate = false;\n    var nextCellWidth;\n    var resizingInfo = this._resizingInfo;\n    var columnsController = this._columnsController;\n    var visibleColumns = columnsController.getVisibleColumns();\n\n    var columnsSeparatorWidth = this._columnsSeparatorView.width();\n\n    var contentWidth = this._rowsView.contentWidth();\n\n    var isNextColumnMode = isNextColumnResizingMode(this);\n    var adaptColumnWidthByRatio = isNextColumnMode && this.option(\"adaptColumnWidthByRatio\") && !this.option(\"columnAutoWidth\");\n    var column;\n    var minWidth;\n    var nextColumn;\n    var cellWidth;\n\n    function isPercentWidth(width) {\n      return _type2.default.isString(width) && \"%\" === width.slice(-1);\n    }\n\n    function setColumnWidth(column, columnWidth, contentWidth, adaptColumnWidthByRatio) {\n      if (column) {\n        var oldColumnWidth = column.width;\n\n        if (oldColumnWidth) {\n          adaptColumnWidthByRatio = isPercentWidth(oldColumnWidth);\n        }\n\n        if (adaptColumnWidthByRatio) {\n          column && columnsController.columnOption(column.index, \"visibleWidth\", columnWidth);\n          column && columnsController.columnOption(column.index, \"width\", (columnWidth / contentWidth * 100).toFixed(3) + \"%\");\n        } else {\n          column && columnsController.columnOption(column.index, \"visibleWidth\", null);\n          column && columnsController.columnOption(column.index, \"width\", columnWidth);\n        }\n      }\n    }\n\n    function correctContentWidth(contentWidth, visibleColumns) {\n      var allColumnsHaveWidth = visibleColumns.every(function (column) {\n        return column.width;\n      });\n      var totalPercent;\n\n      if (allColumnsHaveWidth) {\n        totalPercent = visibleColumns.reduce(function (sum, column) {\n          if (isPercentWidth(column.width)) {\n            sum += parseFloat(column.width);\n          }\n\n          return sum;\n        }, 0);\n\n        if (totalPercent > 100) {\n          contentWidth = contentWidth / totalPercent * 100;\n        }\n      }\n\n      return contentWidth;\n    }\n\n    deltaX = posX - resizingInfo.startPosX;\n\n    if (isNextColumnMode && this.option(\"rtlEnabled\")) {\n      deltaX = -deltaX;\n    }\n\n    cellWidth = resizingInfo.currentColumnWidth + deltaX;\n    column = visibleColumns[resizingInfo.currentColumnIndex];\n    minWidth = column && column.minWidth || columnsSeparatorWidth;\n    needUpdate = cellWidth >= minWidth;\n\n    if (isNextColumnMode) {\n      nextCellWidth = resizingInfo.nextColumnWidth - deltaX;\n      nextColumn = visibleColumns[resizingInfo.nextColumnIndex];\n      minWidth = nextColumn && nextColumn.minWidth || columnsSeparatorWidth;\n      needUpdate = needUpdate && nextCellWidth >= minWidth;\n    }\n\n    if (needUpdate) {\n      columnsController.beginUpdate();\n      cellWidth = Math.floor(cellWidth);\n      contentWidth = correctContentWidth(contentWidth, visibleColumns);\n      setColumnWidth(column, cellWidth, contentWidth, adaptColumnWidthByRatio);\n\n      if (isNextColumnMode) {\n        nextCellWidth = Math.floor(nextCellWidth);\n        setColumnWidth(nextColumn, nextCellWidth, contentWidth, adaptColumnWidthByRatio);\n      } else {\n        var columnWidths = this._columnHeadersView.getColumnWidths();\n\n        columnWidths[resizingInfo.currentColumnIndex] = cellWidth;\n\n        var hasScroll = columnWidths.reduce(function (totalWidth, width) {\n          return totalWidth + width;\n        }, 0) > this._rowsView.contentWidth();\n\n        if (!hasScroll) {\n          var lastColumnIndex = _uiGrid_core4.default.getLastResizableColumnIndex(visibleColumns);\n\n          if (lastColumnIndex >= 0) {\n            columnsController.columnOption(visibleColumns[lastColumnIndex].index, \"visibleWidth\", \"auto\");\n          }\n        }\n\n        for (var i = 0; i < columnWidths.length; i++) {\n          if (visibleColumns[i] && visibleColumns[i] !== column && void 0 === visibleColumns[i].width) {\n            columnsController.columnOption(visibleColumns[i].index, \"width\", columnWidths[i]);\n          }\n        }\n      }\n\n      columnsController.endUpdate();\n    }\n\n    return needUpdate;\n  },\n  _subscribeToCallback: function _subscribeToCallback(callback, handler) {\n    callback.add(handler);\n\n    this._subscribesToCallbacks.push({\n      callback: callback,\n      handler: handler\n    });\n  },\n  _unsubscribeFromCallbacks: function _unsubscribeFromCallbacks() {\n    var i;\n    var subscribe;\n\n    for (i = 0; i < this._subscribesToCallbacks.length; i++) {\n      subscribe = this._subscribesToCallbacks[i];\n      subscribe.callback.remove(subscribe.handler);\n    }\n\n    this._subscribesToCallbacks = [];\n  },\n  _unsubscribes: function _unsubscribes() {\n    this._unsubscribeFromEvents();\n\n    this._unsubscribeFromCallbacks();\n  },\n  _init: function _init() {\n    var that = this;\n\n    var generatePointsByColumnsHandler = function generatePointsByColumnsHandler() {\n      if (!that._isResizing) {\n        that.pointsByColumns(null);\n      }\n    };\n\n    var generatePointsByColumnsScrollHandler = function generatePointsByColumnsScrollHandler(offset) {\n      if (that._scrollLeft !== offset.left) {\n        that._scrollLeft = offset.left;\n        that.pointsByColumns(null);\n      }\n    };\n\n    that._columnsSeparatorView = that.getView(\"columnsSeparatorView\");\n    that._columnHeadersView = that.getView(\"columnHeadersView\");\n    that._trackerView = that.getView(\"trackerView\");\n    that._rowsView = that.getView(\"rowsView\");\n    that._columnsController = that.getController(\"columns\");\n    that._tablePositionController = that.getController(\"tablePosition\");\n    that._$parentContainer = that._columnsSeparatorView.component.$element();\n\n    that._subscribeToCallback(that._columnHeadersView.renderCompleted, generatePointsByColumnsHandler);\n\n    that._subscribeToCallback(that._columnHeadersView.resizeCompleted, generatePointsByColumnsHandler);\n\n    that._subscribeToCallback(that._columnsSeparatorView.renderCompleted, function () {\n      that._unsubscribeFromEvents();\n\n      that._subscribeToEvents();\n    });\n\n    that._subscribeToCallback(that._rowsView.renderCompleted, function () {\n      that._rowsView.scrollChanged.remove(generatePointsByColumnsScrollHandler);\n\n      that._rowsView.scrollChanged.add(generatePointsByColumnsScrollHandler);\n    });\n\n    var previousScrollbarVisibility = 0 !== that._rowsView.getScrollbarWidth();\n\n    var previousTableHeight = 0;\n\n    that._subscribeToCallback(that.getController(\"tablePosition\").positionChanged, function (e) {\n      if (that._isResizing && !that._rowsView.isResizing) {\n        var scrollbarVisibility = 0 !== that._rowsView.getScrollbarWidth();\n\n        if (previousScrollbarVisibility !== scrollbarVisibility || previousTableHeight && previousTableHeight !== e.height) {\n          previousScrollbarVisibility = scrollbarVisibility;\n          previousTableHeight = e.height;\n          that.component.updateDimensions();\n        } else {\n          that._rowsView.updateFreeSpaceRowHeight();\n        }\n      }\n\n      previousTableHeight = e.height;\n    });\n  },\n  optionChanged: function optionChanged(args) {\n    this.callBase(args);\n\n    if (\"allowColumnResizing\" === args.name) {\n      if (args.value) {\n        this._init();\n\n        this._subscribeToEvents();\n      } else {\n        this._unsubscribes();\n      }\n    }\n  },\n  isResizing: function isResizing() {\n    return this._isResizing;\n  },\n  init: function init() {\n    this._subscribesToCallbacks = [];\n\n    if (allowResizing(this)) {\n      this._init();\n    }\n  },\n  pointsByColumns: function pointsByColumns(value) {\n    if (void 0 !== value) {\n      this._pointsByColumns = value;\n    } else {\n      if (!this._pointsByColumns) {\n        this._generatePointsByColumns();\n      }\n\n      return this._pointsByColumns;\n    }\n  },\n  dispose: function dispose() {\n    this._unsubscribes();\n\n    this.callBase();\n  }\n});\n\nvar TablePositionViewController = _uiGrid_core2.default.ViewController.inherit({\n  update: function update(top) {\n    var that = this;\n    var params = {};\n\n    var $element = that._columnHeadersView.element();\n\n    var offset = $element && $element.offset();\n    var offsetTop = offset && offset.top || 0;\n    var diffOffsetTop = _type2.default.isDefined(top) ? Math.abs(top - offsetTop) : 0;\n    var columnsHeadersHeight = that._columnHeadersView ? that._columnHeadersView.getHeight() : 0;\n\n    var scrollBarWidth = that._rowsView.getScrollbarWidth(true);\n\n    var rowsHeight = that._rowsView ? that._rowsView.height() - scrollBarWidth : 0;\n    var columnsResizerController = that.component.getController(\"columnsResizer\");\n    params.height = columnsHeadersHeight;\n\n    if (false !== columnsResizerController.isResizing()) {\n      params.height += rowsHeight - diffOffsetTop;\n    }\n\n    if (null !== top && $element && $element.length) {\n      params.top = $element[0].offsetTop + diffOffsetTop;\n    }\n\n    that.positionChanged.fire(params);\n  },\n  init: function init() {\n    var that = this;\n    that.callBase();\n    that._columnHeadersView = this.getView(\"columnHeadersView\");\n    that._rowsView = this.getView(\"rowsView\");\n    that._pagerView = this.getView(\"pagerView\");\n\n    that._rowsView.resizeCompleted.add(function () {\n      if (that.option(\"allowColumnResizing\")) {\n        that.update(null);\n      }\n    });\n  },\n  ctor: function ctor(component) {\n    this.callBase(component);\n    this.positionChanged = (0, _callbacks2.default)();\n  }\n});\n\nvar DraggingHeaderViewController = _uiGrid_core2.default.ViewController.inherit({\n  _generatePointsByColumns: function _generatePointsByColumns(options) {\n    var that = this;\n    return _uiGrid_core4.default.getPointsByColumns(options.columnElements, function (point) {\n      return that._pointCreated(point, options.columns, options.targetDraggingPanel.getName(), options.sourceColumn);\n    }, options.isVerticalOrientation, options.startColumnIndex);\n  },\n  _pointCreated: function _pointCreated(point, columns, location, sourceColumn) {\n    var targetColumn = columns[point.columnIndex];\n    var prevColumn = columns[point.columnIndex - 1];\n\n    switch (location) {\n      case \"columnChooser\":\n        return true;\n\n      case \"headers\":\n        return sourceColumn && !sourceColumn.allowReordering || (!targetColumn || !targetColumn.allowReordering) && (!prevColumn || !prevColumn.allowReordering);\n\n      default:\n        return 0 === columns.length;\n    }\n  },\n  _subscribeToEvents: function _subscribeToEvents(draggingHeader, draggingPanels) {\n    var that = this;\n    (0, _iterator.each)(draggingPanels, function (_, draggingPanel) {\n      if (draggingPanel) {\n        var i;\n        var columns;\n        var columnElements;\n        var rowCount = draggingPanel.getRowCount ? draggingPanel.getRowCount() : 1;\n        var nameDraggingPanel = draggingPanel.getName();\n\n        var subscribeToEvents = function subscribeToEvents(index, columnElement) {\n          if (!columnElement) {\n            return;\n          }\n\n          var $columnElement = (0, _renderer2.default)(columnElement);\n          var column = columns[index];\n\n          if (draggingPanel.allowDragging(column, nameDraggingPanel, draggingPanels)) {\n            $columnElement.addClass(that.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS));\n\n            _events_engine2.default.on($columnElement, (0, _utils.addNamespace)(_drag2.default.start, MODULE_NAMESPACE), that.createAction(function (args) {\n              var e = args.event;\n              var eventData = (0, _utils.eventData)(e);\n              draggingHeader.dragHeader({\n                deltaX: eventData.x - (0, _renderer2.default)(e.currentTarget).offset().left,\n                deltaY: eventData.y - (0, _renderer2.default)(e.currentTarget).offset().top,\n                sourceColumn: column,\n                index: column.index,\n                columnIndex: index,\n                columnElement: $columnElement,\n                sourceLocation: nameDraggingPanel,\n                draggingPanels: draggingPanels,\n                rowIndex: that._columnsController.getRowIndex(column.index, true)\n              });\n            }));\n\n            _events_engine2.default.on($columnElement, (0, _utils.addNamespace)(_drag2.default.move, MODULE_NAMESPACE), {\n              that: draggingHeader\n            }, that.createAction(draggingHeader.moveHeader));\n\n            _events_engine2.default.on($columnElement, (0, _utils.addNamespace)(_drag2.default.end, MODULE_NAMESPACE), {\n              that: draggingHeader\n            }, that.createAction(draggingHeader.dropHeader));\n          }\n        };\n\n        for (i = 0; i < rowCount; i++) {\n          columnElements = draggingPanel.getColumnElements(i) || [];\n\n          if (columnElements.length) {\n            columns = draggingPanel.getColumns(i) || [];\n            (0, _iterator.each)(columnElements, subscribeToEvents);\n          }\n        }\n      }\n    });\n  },\n  _unsubscribeFromEvents: function _unsubscribeFromEvents(draggingHeader, draggingPanels) {\n    var that = this;\n    (0, _iterator.each)(draggingPanels, function (_, draggingPanel) {\n      if (draggingPanel) {\n        var columnElements = draggingPanel.getColumnElements() || [];\n        (0, _iterator.each)(columnElements, function (index, columnElement) {\n          var $columnElement = (0, _renderer2.default)(columnElement);\n\n          _events_engine2.default.off($columnElement, (0, _utils.addNamespace)(_drag2.default.start, MODULE_NAMESPACE));\n\n          _events_engine2.default.off($columnElement, (0, _utils.addNamespace)(_drag2.default.move, MODULE_NAMESPACE));\n\n          _events_engine2.default.off($columnElement, (0, _utils.addNamespace)(_drag2.default.end, MODULE_NAMESPACE));\n\n          $columnElement.removeClass(that.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS));\n        });\n      }\n    });\n  },\n  _getSeparator: function _getSeparator(targetLocation) {\n    return \"headers\" === targetLocation ? this._columnsSeparatorView : this._blockSeparatorView;\n  },\n  hideSeparators: function hideSeparators(type) {\n    var blockSeparator = this._blockSeparatorView;\n    var columnsSeparator = this._columnsSeparatorView;\n    this._animationColumnIndex = null;\n    blockSeparator && blockSeparator.hide();\n    \"block\" !== type && columnsSeparator && columnsSeparator.hide();\n  },\n  init: function init() {\n    var that = this;\n    var subscribeToEvents;\n    that.callBase();\n    that._columnsController = that.getController(\"columns\");\n    that._columnHeadersView = that.getView(\"columnHeadersView\");\n    that._columnsSeparatorView = that.getView(\"columnsSeparatorView\");\n    that._draggingHeaderView = that.getView(\"draggingHeaderView\");\n    that._rowsView = that.getView(\"rowsView\");\n    that._blockSeparatorView = that.getView(\"blockSeparatorView\");\n    that._headerPanelView = that.getView(\"headerPanel\");\n    that._columnChooserView = that.getView(\"columnChooserView\");\n\n    subscribeToEvents = function subscribeToEvents() {\n      if (that._draggingHeaderView) {\n        var draggingPanels = [that._columnChooserView, that._columnHeadersView, that._headerPanelView];\n\n        that._unsubscribeFromEvents(that._draggingHeaderView, draggingPanels);\n\n        that._subscribeToEvents(that._draggingHeaderView, draggingPanels);\n      }\n    };\n\n    that._columnHeadersView.renderCompleted.add(subscribeToEvents);\n\n    that._headerPanelView && that._headerPanelView.renderCompleted.add(subscribeToEvents);\n    that._columnChooserView && that._columnChooserView.renderCompleted.add(subscribeToEvents);\n  },\n  allowDrop: function allowDrop(parameters) {\n    return this._columnsController.allowMoveColumn(parameters.sourceColumnIndex, parameters.targetColumnIndex, parameters.sourceLocation, parameters.targetLocation);\n  },\n  drag: function drag(parameters) {\n    var sourceIndex = parameters.sourceIndex;\n    var sourceLocation = parameters.sourceLocation;\n    var sourceColumnElement = parameters.sourceColumnElement;\n    var headersView = this._columnHeadersView;\n    var rowsView = this._rowsView;\n\n    if (sourceColumnElement) {\n      sourceColumnElement.css({\n        opacity: COLUMN_OPACITY\n      });\n\n      if (\"headers\" === sourceLocation) {\n        headersView && headersView.setRowsOpacity(sourceIndex, COLUMN_OPACITY);\n        rowsView && rowsView.setRowsOpacity(sourceIndex, COLUMN_OPACITY);\n      }\n    }\n  },\n  dock: function dock(parameters) {\n    var that = this;\n    var targetColumnIndex = _type2.default.isObject(parameters.targetColumnIndex) ? parameters.targetColumnIndex.columnIndex : parameters.targetColumnIndex;\n    var sourceLocation = parameters.sourceLocation;\n    var targetLocation = parameters.targetLocation;\n\n    var separator = that._getSeparator(targetLocation);\n\n    var hasTargetVisibleIndex = targetColumnIndex >= 0;\n\n    var showSeparator = function showSeparator() {\n      if (that._animationColumnIndex !== targetColumnIndex) {\n        that.hideSeparators();\n        separator.element()[parameters.isLast ? \"insertAfter\" : \"insertBefore\"](parameters.targetColumnElement);\n        that._animationColumnIndex = targetColumnIndex;\n        separator.show(targetLocation);\n      }\n    };\n\n    that._columnHeadersView.element().find(\".\" + HEADER_ROW_CLASS).toggleClass(that.addWidgetPrefix(HEADERS_DROP_HIGHLIGHT_CLASS), \"headers\" !== sourceLocation && \"headers\" === targetLocation && !hasTargetVisibleIndex);\n\n    if (separator) {\n      if (that.allowDrop(parameters) && hasTargetVisibleIndex) {\n        if (\"group\" === targetLocation || \"columnChooser\" === targetLocation) {\n          showSeparator();\n        } else {\n          that.hideSeparators(\"block\");\n          that.getController(\"tablePosition\").update(parameters.posY);\n          separator.moveByX(parameters.posX - separator.width());\n          separator.show();\n        }\n      } else {\n        that.hideSeparators();\n      }\n    }\n  },\n  drop: function drop(parameters) {\n    var sourceColumnElement = parameters.sourceColumnElement;\n\n    if (sourceColumnElement) {\n      sourceColumnElement.css({\n        opacity: \"\"\n      });\n\n      this._columnHeadersView.setRowsOpacity(parameters.sourceIndex, \"\");\n\n      this._rowsView.setRowsOpacity(parameters.sourceIndex, \"\");\n\n      this._columnHeadersView.element().find(\".\" + HEADER_ROW_CLASS).removeClass(this.addWidgetPrefix(HEADERS_DROP_HIGHLIGHT_CLASS));\n    }\n\n    if (this.allowDrop(parameters)) {\n      var separator = this._getSeparator(parameters.targetLocation);\n\n      if (separator) {\n        separator.hide();\n      }\n\n      this._columnsController.moveColumn(parameters.sourceColumnIndex, parameters.targetColumnIndex, parameters.sourceLocation, parameters.targetLocation);\n    }\n  },\n  dispose: function dispose() {\n    if (this._draggingHeaderView) {\n      this._unsubscribeFromEvents(this._draggingHeaderView, [this._columnChooserView, this._columnHeadersView, this._headerPanelView]);\n    }\n  }\n});\n\nmodule.exports = {\n  views: {\n    columnsSeparatorView: ColumnsSeparatorView,\n    blockSeparatorView: BlockSeparatorView,\n    draggingHeaderView: DraggingHeaderView,\n    trackerView: TrackerView\n  },\n  controllers: {\n    draggingHeader: DraggingHeaderViewController,\n    tablePosition: TablePositionViewController,\n    columnsResizer: ColumnsResizerViewController\n  },\n  extenders: {\n    views: {\n      rowsView: {\n        _needUpdateRowHeight: function _needUpdateRowHeight(itemCount) {\n          var wordWrapEnabled = this.option(\"wordWrapEnabled\");\n          var columnsResizerController = this.getController(\"columnsResizer\");\n          var isResizing = columnsResizerController.isResizing();\n          return this.callBase.apply(this, arguments) || itemCount > 0 && wordWrapEnabled && isResizing;\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/grid_core/ui.grid_core.columns_resizing_reordering.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_dom_adapter","_dom_adapter2","_events_engine","_events_engine2","_callbacks","_callbacks2","_type","_type2","_iterator","_extend","_utils","_pointer","_pointer2","_drag","_drag2","_uiGrid_core","_uiGrid_core2","_uiGrid_core3","_uiGrid_core4","_fx","_fx2","_swatch_container","obj","__esModule","COLUMNS_SEPARATOR_CLASS","COLUMNS_SEPARATOR_TRANSPARENT","DRAGGING_HEADER_CLASS","CELL_CONTENT_CLASS","HEADERS_DRAG_ACTION_CLASS","TRACKER_CLASS","HEADERS_DROP_HIGHLIGHT_CLASS","BLOCK_SEPARATOR_CLASS","HEADER_ROW_CLASS","WIDGET_CLASS","DRAGGING_COMMAND_CELL_CLASS","MODULE_NAMESPACE","COLUMNS_SEPARATOR_TOUCH_TRACKER_WIDTH","DRAGGING_DELTA","COLUMN_OPACITY","allowResizing","that","option","getController","isColumnOptionUsed","allowReordering","TrackerView","default","View","inherit","_renderCore","callBase","element","addClass","addWidgetPrefix","hide","_unsubscribeFromCallback","_positionChanged","_tablePositionController","positionChanged","remove","_subscribeToCallback","position","$element","hasClass","css","top","height","add","optionChanged","args","name","value","_invalidate","init","isVisible","show","setHeight","dispose","SeparatorView","_renderSeparator","options","_isShown","isDefined","width","ColumnsSeparatorView","_init","_isTransparent","removeClass","force","columnsSeparatorTransparent","moveByX","outerX","_parentElement","offset","left","changeCursor","cursorName","BlockSeparatorView","loadingChanged","isLoading","html","$parent","children","length","prepend","groupPanelOptions","columnChooserOptions","visible","enabled","targetLocation","startAnimate","toOptions","stop","animate","type","from","display","to","duration","easing","DraggingHeaderView","_isDragging","_getDraggingPanelByPos","pos","result","each","_dragOptions","draggingPanels","index","draggingPanel","boundingRect","getBoundingRect","bottom","y","x","right","_resetTargetColumnOptions","params","_dropOptions","targetColumnIndex","targetColumnElement","isLast","posX","posY","_getVisibleIndexObject","rowIndex","visibleIndex","columnIndex","parent","find","columnsController","commonColumnSettings","getCommonSettings","allowGrouping","allowHiding","_controller","_columnsResizerViewController","dragHeader","columnElement","isCommandColumn","sourceColumn","sourceIndex","sourceColumnIndex","sourceColumnElement","sourceLocation","document","getDocument","_onSelectStart","onselectstart","drag","textAlign","get","clientHeight","clientWidth","whiteSpace","toggleClass","text","caption","appendTo","getSwatchContainer","moveHeader","e","event","data","newLeft","newTop","moveDeltaX","moveDeltaY","eventData","isResizing","dragOptions","Math","abs","deltaX","deltaY","is","dockHeader","preventDefault","targetDraggingPanel","controller","i","centerPosition","rtlEnabled","isVerticalOrientation","getName","axisName","columnElements","getColumnElements","ownerBand","pointsByTarget","pointsByColumns","_generatePointsByColumns","extend","columns","getColumns","startColumnIndex","eq","last","dock","dropHeader","drop","isNextColumnResizingMode","ColumnsResizerViewController","ViewController","_isHeadersRowArea","_columnHeadersView","headersRowHeight","offsetTop","getHeadersRowHeight","_pointCreated","point","cellsLength","currentColumn","isNextColumnMode","firstPointColumnIndex","nextColumn","_getTargetPoint","currentX","_moveSeparator","columnsSeparatorWidth","_columnsSeparatorView","parentOffset","_$parentContainer","parentOffsetLeft","_isResizing","_resizingInfo","_updateColumnsWidthIfNeeded","$cell","currentColumnIndex","outerWidth","update","_targetPoint","_previousParentOffset","_isReadyResizing","_endResizing","_trackerView","pageIndex","component","updateDimensions","dataSource","getDataSource","load","done","_rowsView","scrollToPage","_getNextColumnIndex","_setupResizingInfo","nextColumnIndex","currentHeader","getHeaderElement","nextHeader","startPosX","currentColumnWidth","getBoundingClientRect","nextColumnWidth","_startResizing","editingController","editingMode","isCellEditing","isEditing","isTouchEvent","stopPropagation","_columnsController","getVisibleColumns","cells","getPointsByColumns","_pointsByColumns","_unsubscribeFromEvents","_moveSeparatorHandler","off","addNamespace","move","_startResizingHandler","down","_endResizingHandler","up","_subscribeToEvents","createAction","on","needUpdate","nextCellWidth","resizingInfo","visibleColumns","contentWidth","adaptColumnWidthByRatio","column","minWidth","cellWidth","isPercentWidth","isString","slice","setColumnWidth","columnWidth","oldColumnWidth","columnOption","toFixed","correctContentWidth","allColumnsHaveWidth","every","totalPercent","reduce","sum","parseFloat","beginUpdate","floor","columnWidths","getColumnWidths","hasScroll","totalWidth","lastColumnIndex","getLastResizableColumnIndex","endUpdate","callback","handler","_subscribesToCallbacks","push","_unsubscribeFromCallbacks","subscribe","_unsubscribes","generatePointsByColumnsHandler","generatePointsByColumnsScrollHandler","_scrollLeft","getView","renderCompleted","resizeCompleted","scrollChanged","previousScrollbarVisibility","getScrollbarWidth","previousTableHeight","scrollbarVisibility","updateFreeSpaceRowHeight","TablePositionViewController","diffOffsetTop","columnsHeadersHeight","getHeight","scrollBarWidth","rowsHeight","columnsResizerController","fire","_pagerView","ctor","DraggingHeaderViewController","location","targetColumn","prevColumn","draggingHeader","_","rowCount","getRowCount","nameDraggingPanel","subscribeToEvents","$columnElement","allowDragging","start","currentTarget","getRowIndex","end","_getSeparator","_blockSeparatorView","hideSeparators","blockSeparator","columnsSeparator","_animationColumnIndex","_draggingHeaderView","_headerPanelView","_columnChooserView","allowDrop","parameters","allowMoveColumn","headersView","rowsView","opacity","setRowsOpacity","isObject","separator","hasTargetVisibleIndex","showSeparator","moveColumn","module","exports","views","columnsSeparatorView","blockSeparatorView","draggingHeaderView","trackerView","controllers","tablePosition","columnsResizer","extenders","_needUpdateRowHeight","itemCount","wordWrapEnabled","apply","arguments"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.columns_resizing_reordering.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _callbacks = require(\"../../core/utils/callbacks\");\r\nvar _callbacks2 = _interopRequireDefault(_callbacks);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _utils = require(\"../../events/utils\");\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _drag = require(\"../../events/drag\");\r\nvar _drag2 = _interopRequireDefault(_drag);\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\r\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\r\nvar _fx = require(\"../../animation/fx\");\r\nvar _fx2 = _interopRequireDefault(_fx);\r\nvar _swatch_container = require(\"../widget/swatch_container\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar COLUMNS_SEPARATOR_CLASS = \"columns-separator\";\r\nvar COLUMNS_SEPARATOR_TRANSPARENT = \"columns-separator-transparent\";\r\nvar DRAGGING_HEADER_CLASS = \"drag-header\";\r\nvar CELL_CONTENT_CLASS = \"text-content\";\r\nvar HEADERS_DRAG_ACTION_CLASS = \"drag-action\";\r\nvar TRACKER_CLASS = \"tracker\";\r\nvar HEADERS_DROP_HIGHLIGHT_CLASS = \"drop-highlight\";\r\nvar BLOCK_SEPARATOR_CLASS = \"dx-block-separator\";\r\nvar HEADER_ROW_CLASS = \"dx-header-row\";\r\nvar WIDGET_CLASS = \"dx-widget\";\r\nvar DRAGGING_COMMAND_CELL_CLASS = \"dx-drag-command-cell\";\r\nvar MODULE_NAMESPACE = \"dxDataGridResizingReordering\";\r\nvar COLUMNS_SEPARATOR_TOUCH_TRACKER_WIDTH = 10;\r\nvar DRAGGING_DELTA = 5;\r\nvar COLUMN_OPACITY = .5;\r\nvar allowResizing = function(that) {\r\n    return that.option(\"allowColumnResizing\") || that.getController(\"columns\").isColumnOptionUsed(\"allowResizing\")\r\n};\r\nvar allowReordering = function(that) {\r\n    return that.option(\"allowColumnReordering\") || that.getController(\"columns\").isColumnOptionUsed(\"allowReordering\")\r\n};\r\nvar TrackerView = _uiGrid_core2.default.View.inherit({\r\n    _renderCore: function() {\r\n        this.callBase();\r\n        this.element().addClass(this.addWidgetPrefix(TRACKER_CLASS));\r\n        this.hide()\r\n    },\r\n    _unsubscribeFromCallback: function() {\r\n        if (this._positionChanged) {\r\n            this._tablePositionController.positionChanged.remove(this._positionChanged)\r\n        }\r\n    },\r\n    _subscribeToCallback: function() {\r\n        var that = this;\r\n        that._positionChanged = function(position) {\r\n            var $element = that.element();\r\n            if ($element && $element.hasClass(that.addWidgetPrefix(TRACKER_CLASS))) {\r\n                $element.css({\r\n                    top: position.top\r\n                });\r\n                $element.height(position.height)\r\n            }\r\n        };\r\n        this._tablePositionController.positionChanged.add(that._positionChanged)\r\n    },\r\n    optionChanged: function(args) {\r\n        if (\"allowColumnResizing\" === args.name) {\r\n            this._unsubscribeFromCallback();\r\n            if (args.value) {\r\n                this._subscribeToCallback();\r\n                this._invalidate()\r\n            }\r\n        }\r\n        this.callBase(args)\r\n    },\r\n    init: function() {\r\n        this.callBase();\r\n        this._tablePositionController = this.getController(\"tablePosition\");\r\n        this._subscribeToCallback()\r\n    },\r\n    isVisible: function() {\r\n        return allowResizing(this)\r\n    },\r\n    show: function() {\r\n        this.element().show()\r\n    },\r\n    hide: function() {\r\n        this.element() && this.element().hide()\r\n    },\r\n    setHeight: function(value) {\r\n        this.element().height(value)\r\n    },\r\n    dispose: function() {\r\n        this._unsubscribeFromCallback();\r\n        this.callBase()\r\n    }\r\n});\r\nvar SeparatorView = _uiGrid_core2.default.View.inherit({\r\n    _renderSeparator: function() {},\r\n    _renderCore: function(options) {\r\n        this.callBase(options);\r\n        this._isShown = true;\r\n        this._renderSeparator();\r\n        this.hide()\r\n    },\r\n    show: function() {\r\n        this._isShown = true\r\n    },\r\n    hide: function() {\r\n        this._isShown = false\r\n    },\r\n    height: function(value) {\r\n        var $element = this.element();\r\n        if ($element) {\r\n            if (_type2.default.isDefined(value)) {\r\n                $element.height(value)\r\n            } else {\r\n                return $element.height()\r\n            }\r\n        }\r\n    },\r\n    width: function(value) {\r\n        var $element = this.element();\r\n        if ($element) {\r\n            if (_type2.default.isDefined(value)) {\r\n                $element.width(value)\r\n            } else {\r\n                return $element.width()\r\n            }\r\n        }\r\n    }\r\n});\r\nvar ColumnsSeparatorView = SeparatorView.inherit({\r\n    _renderSeparator: function() {\r\n        this.callBase();\r\n        var $element = this.element();\r\n        $element.addClass(this.addWidgetPrefix(COLUMNS_SEPARATOR_CLASS))\r\n    },\r\n    _subscribeToCallback: function() {\r\n        var that = this;\r\n        var $element;\r\n        that._positionChanged = function(position) {\r\n            $element = that.element();\r\n            if ($element) {\r\n                $element.css({\r\n                    top: position.top\r\n                });\r\n                $element.height(position.height)\r\n            }\r\n        };\r\n        that._tablePositionController.positionChanged.add(that._positionChanged)\r\n    },\r\n    _unsubscribeFromCallback: function() {\r\n        this._positionChanged && this._tablePositionController.positionChanged.remove(this._positionChanged)\r\n    },\r\n    _init: function() {\r\n        this._isTransparent = allowResizing(this);\r\n        if (this.isVisible()) {\r\n            this._subscribeToCallback()\r\n        }\r\n    },\r\n    isVisible: function() {\r\n        return this.option(\"showColumnHeaders\") && (allowReordering(this) || allowResizing(this))\r\n    },\r\n    optionChanged: function(args) {\r\n        if (\"allowColumnResizing\" === args.name) {\r\n            if (args.value) {\r\n                this._init();\r\n                this._invalidate();\r\n                this.hide(true)\r\n            } else {\r\n                this._unsubscribeFromCallback();\r\n                this._isTransparent = allowResizing(this);\r\n                this.hide(true)\r\n            }\r\n        }\r\n        this.callBase(args)\r\n    },\r\n    init: function() {\r\n        this.callBase();\r\n        this._tablePositionController = this.getController(\"tablePosition\");\r\n        this._init()\r\n    },\r\n    show: function() {\r\n        var that = this;\r\n        var $element = this.element();\r\n        if ($element && !that._isShown) {\r\n            if (that._isTransparent) {\r\n                $element.removeClass(that.addWidgetPrefix(COLUMNS_SEPARATOR_TRANSPARENT))\r\n            } else {\r\n                $element.show()\r\n            }\r\n        }\r\n        this.callBase()\r\n    },\r\n    hide: function(force) {\r\n        var $element = this.element();\r\n        var columnsSeparatorTransparent = this.addWidgetPrefix(COLUMNS_SEPARATOR_TRANSPARENT);\r\n        if ($element && (this._isShown || force)) {\r\n            if (this._isTransparent) {\r\n                $element.addClass(columnsSeparatorTransparent);\r\n                $element.css(\"left\", \"\");\r\n                $element.show()\r\n            } else {\r\n                if ($element.hasClass(columnsSeparatorTransparent)) {\r\n                    $element.removeClass(columnsSeparatorTransparent)\r\n                }\r\n                $element.hide()\r\n            }\r\n        }\r\n        this.callBase()\r\n    },\r\n    moveByX: function(outerX) {\r\n        var $element = this.element();\r\n        if ($element) {\r\n            $element.css(\"left\", outerX - this._parentElement().offset().left)\r\n        }\r\n    },\r\n    changeCursor: function(cursorName) {\r\n        cursorName = _type2.default.isDefined(cursorName) ? cursorName : \"\";\r\n        var $element = this.element();\r\n        if ($element) {\r\n            $element.css(\"cursor\", cursorName)\r\n        }\r\n    },\r\n    dispose: function() {\r\n        this._unsubscribeFromCallback();\r\n        this.callBase()\r\n    }\r\n});\r\nvar BlockSeparatorView = SeparatorView.inherit({\r\n    init: function() {\r\n        var that = this;\r\n        this.callBase();\r\n        this.getController(\"data\").loadingChanged.add(function(isLoading) {\r\n            if (!isLoading) {\r\n                that.hide()\r\n            }\r\n        })\r\n    },\r\n    _renderSeparator: function() {\r\n        this.callBase();\r\n        this.element().addClass(BLOCK_SEPARATOR_CLASS).html(\"&nbsp;\")\r\n    },\r\n    hide: function() {\r\n        var that = this;\r\n        var $parent = this._parentElement();\r\n        var $element = this.element();\r\n        if ($element && this._isShown) {\r\n            $element.css(\"display\", \"none\")\r\n        }\r\n        if ($parent && !$parent.children(\".\" + BLOCK_SEPARATOR_CLASS).length) {\r\n            $parent.prepend(that.element())\r\n        }\r\n        that.callBase()\r\n    },\r\n    isVisible: function() {\r\n        var groupPanelOptions = this.option(\"groupPanel\");\r\n        var columnChooserOptions = this.option(\"columnChooser\");\r\n        return groupPanelOptions && groupPanelOptions.visible || columnChooserOptions && columnChooserOptions.enabled\r\n    },\r\n    show: function(targetLocation) {\r\n        var that = this;\r\n        var $element = this.element();\r\n        var startAnimate = function(toOptions) {\r\n            _fx2.default.stop($element, true);\r\n            _fx2.default.animate($element, {\r\n                type: \"slide\",\r\n                from: {\r\n                    width: 0,\r\n                    display: toOptions.display\r\n                },\r\n                to: toOptions,\r\n                duration: 300,\r\n                easing: \"swing\"\r\n            })\r\n        };\r\n        if ($element && !that._isShown) {\r\n            switch (targetLocation) {\r\n                case \"group\":\r\n                    startAnimate({\r\n                        width: \"50px\",\r\n                        display: \"inline-block\"\r\n                    });\r\n                    break;\r\n                case \"columnChooser\":\r\n                    startAnimate({\r\n                        width: \"100%\",\r\n                        display: \"block\"\r\n                    });\r\n                    break;\r\n                default:\r\n                    $element.css(\"display\", \"\")\r\n            }\r\n        }\r\n        that.callBase()\r\n    }\r\n});\r\nvar DraggingHeaderView = _uiGrid_core2.default.View.inherit({\r\n    _isDragging: false,\r\n    _getDraggingPanelByPos: function(pos) {\r\n        var that = this;\r\n        var result;\r\n        (0, _iterator.each)(that._dragOptions.draggingPanels, function(index, draggingPanel) {\r\n            if (draggingPanel) {\r\n                var boundingRect = draggingPanel.getBoundingRect();\r\n                if (boundingRect && (void 0 === boundingRect.bottom || pos.y < boundingRect.bottom) && (void 0 === boundingRect.top || pos.y > boundingRect.top) && (void 0 === boundingRect.left || pos.x > boundingRect.left) && (void 0 === boundingRect.right || pos.x < boundingRect.right)) {\r\n                    result = draggingPanel;\r\n                    return false\r\n                }\r\n            }\r\n        });\r\n        return result\r\n    },\r\n    _renderCore: function() {\r\n        this.element().addClass(this.addWidgetPrefix(DRAGGING_HEADER_CLASS) + \" \" + this.addWidgetPrefix(CELL_CONTENT_CLASS) + \" \" + WIDGET_CLASS).hide()\r\n    },\r\n    _resetTargetColumnOptions: function() {\r\n        var params = this._dropOptions;\r\n        params.targetColumnIndex = -1;\r\n        delete params.targetColumnElement;\r\n        delete params.isLast;\r\n        delete params.posX;\r\n        delete params.posY\r\n    },\r\n    _getVisibleIndexObject: function(rowIndex, visibleIndex) {\r\n        if (_type2.default.isDefined(rowIndex)) {\r\n            return {\r\n                columnIndex: visibleIndex,\r\n                rowIndex: rowIndex\r\n            }\r\n        }\r\n        return visibleIndex\r\n    },\r\n    dispose: function() {\r\n        var element = this.element();\r\n        this._dragOptions = null;\r\n        element && element.parent().find(\".\" + this.addWidgetPrefix(DRAGGING_HEADER_CLASS)).remove()\r\n    },\r\n    isVisible: function() {\r\n        var columnsController = this.getController(\"columns\");\r\n        var commonColumnSettings = columnsController.getCommonSettings();\r\n        return this.option(\"showColumnHeaders\") && (allowReordering(this) || commonColumnSettings.allowGrouping || commonColumnSettings.allowHiding)\r\n    },\r\n    init: function() {\r\n        var that = this;\r\n        this.callBase();\r\n        this._controller = this.getController(\"draggingHeader\");\r\n        this._columnsResizerViewController = this.getController(\"columnsResizer\");\r\n        this.getController(\"data\").loadingChanged.add(function(isLoading) {\r\n            var element = that.element();\r\n            if (!isLoading && element) {\r\n                element.hide()\r\n            }\r\n        })\r\n    },\r\n    dragHeader: function(options) {\r\n        var that = this;\r\n        var columnElement = options.columnElement;\r\n        var isCommandColumn = !!options.sourceColumn.type;\r\n        that._isDragging = true;\r\n        that._dragOptions = options;\r\n        that._dropOptions = {\r\n            sourceIndex: options.index,\r\n            sourceColumnIndex: that._getVisibleIndexObject(options.rowIndex, options.columnIndex),\r\n            sourceColumnElement: options.columnElement,\r\n            sourceLocation: options.sourceLocation\r\n        };\r\n        var document = _dom_adapter2.default.getDocument();\r\n        that._onSelectStart = document.onselectstart;\r\n        document.onselectstart = function() {\r\n            return false\r\n        };\r\n        that._controller.drag(that._dropOptions);\r\n        that.element().css({\r\n            textAlign: columnElement && columnElement.css(\"textAlign\"),\r\n            height: columnElement && (isCommandColumn && columnElement.get(0).clientHeight || columnElement.height()),\r\n            width: columnElement && (isCommandColumn && columnElement.get(0).clientWidth || columnElement.width()),\r\n            whiteSpace: columnElement && columnElement.css(\"whiteSpace\")\r\n        }).addClass(that.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS)).toggleClass(DRAGGING_COMMAND_CELL_CLASS, isCommandColumn).text(isCommandColumn ? \"\" : options.sourceColumn.caption);\r\n        that.element().appendTo((0, _swatch_container.getSwatchContainer)(columnElement))\r\n    },\r\n    moveHeader: function(args) {\r\n        var e = args.event;\r\n        var that = e.data.that;\r\n        var newLeft;\r\n        var newTop;\r\n        var moveDeltaX;\r\n        var moveDeltaY;\r\n        var eventData = (0, _utils.eventData)(e);\r\n        var isResizing = that._columnsResizerViewController ? that._columnsResizerViewController.isResizing() : false;\r\n        var dragOptions = that._dragOptions;\r\n        if (that._isDragging && !isResizing) {\r\n            var $element = that.element();\r\n            moveDeltaX = Math.abs(eventData.x - dragOptions.columnElement.offset().left - dragOptions.deltaX);\r\n            moveDeltaY = Math.abs(eventData.y - dragOptions.columnElement.offset().top - dragOptions.deltaY);\r\n            if ($element.is(\":visible\") || moveDeltaX > DRAGGING_DELTA || moveDeltaY > DRAGGING_DELTA) {\r\n                $element.show();\r\n                newLeft = eventData.x - dragOptions.deltaX;\r\n                newTop = eventData.y - dragOptions.deltaY;\r\n                $element.css({\r\n                    left: newLeft,\r\n                    top: newTop\r\n                });\r\n                that.dockHeader(eventData)\r\n            }\r\n            e.preventDefault()\r\n        }\r\n    },\r\n    dockHeader: function(eventData) {\r\n        var that = this;\r\n        var targetDraggingPanel = that._getDraggingPanelByPos(eventData);\r\n        var controller = that._controller;\r\n        var i;\r\n        var params = that._dropOptions;\r\n        var dragOptions = that._dragOptions;\r\n        var centerPosition;\r\n        if (targetDraggingPanel) {\r\n            var rtlEnabled = that.option(\"rtlEnabled\");\r\n            var isVerticalOrientation = \"columnChooser\" === targetDraggingPanel.getName();\r\n            var axisName = isVerticalOrientation ? \"y\" : \"x\";\r\n            var targetLocation = targetDraggingPanel.getName();\r\n            var rowIndex = \"headers\" === targetLocation ? dragOptions.rowIndex : void 0;\r\n            var sourceColumn = dragOptions.sourceColumn;\r\n            var columnElements = targetDraggingPanel.getColumnElements(rowIndex, sourceColumn && sourceColumn.ownerBand) || [];\r\n            var pointsByTarget = dragOptions.pointsByTarget = dragOptions.pointsByTarget || {};\r\n            var pointsByColumns = \"columnChooser\" === targetLocation ? [] : pointsByTarget[targetLocation] || controller._generatePointsByColumns((0, _extend.extend)({}, dragOptions, {\r\n                targetDraggingPanel: targetDraggingPanel,\r\n                columns: targetDraggingPanel.getColumns(rowIndex),\r\n                columnElements: columnElements,\r\n                isVerticalOrientation: isVerticalOrientation,\r\n                startColumnIndex: \"headers\" === targetLocation && (0, _renderer2.default)(columnElements[0]).index()\r\n            }));\r\n            pointsByTarget[targetLocation] = pointsByColumns;\r\n            params.targetLocation = targetLocation;\r\n            if (pointsByColumns.length > 0) {\r\n                for (i = 0; i < pointsByColumns.length; i++) {\r\n                    centerPosition = pointsByColumns[i + 1] && (pointsByColumns[i][axisName] + pointsByColumns[i + 1][axisName]) / 2;\r\n                    if (void 0 === centerPosition || (rtlEnabled && \"x\" === axisName ? eventData[axisName] > centerPosition : eventData[axisName] < centerPosition)) {\r\n                        params.targetColumnIndex = that._getVisibleIndexObject(rowIndex, pointsByColumns[i].columnIndex);\r\n                        if (columnElements[i]) {\r\n                            params.targetColumnElement = columnElements.eq(i);\r\n                            params.isLast = false\r\n                        } else {\r\n                            params.targetColumnElement = columnElements.last();\r\n                            params.isLast = true\r\n                        }\r\n                        params.posX = pointsByColumns[i].x;\r\n                        params.posY = pointsByColumns[i].y;\r\n                        controller.dock(params);\r\n                        break\r\n                    }\r\n                }\r\n            } else {\r\n                that._resetTargetColumnOptions();\r\n                controller.dock(params)\r\n            }\r\n        }\r\n    },\r\n    dropHeader: function(args) {\r\n        var e = args.event;\r\n        var that = e.data.that;\r\n        var controller = that._controller;\r\n        that.element().hide();\r\n        if (controller && that._isDragging) {\r\n            controller.drop(that._dropOptions)\r\n        }\r\n        that.element().appendTo(that._parentElement());\r\n        that._dragOptions = null;\r\n        that._dropOptions = null;\r\n        that._isDragging = false;\r\n        _dom_adapter2.default.getDocument().onselectstart = that._onSelectStart || null\r\n    }\r\n});\r\nvar isNextColumnResizingMode = function(that) {\r\n    return \"widget\" !== that.option(\"columnResizingMode\")\r\n};\r\nvar ColumnsResizerViewController = _uiGrid_core2.default.ViewController.inherit({\r\n    _isHeadersRowArea: function(posY) {\r\n        if (this._columnHeadersView) {\r\n            var element = this._columnHeadersView.element();\r\n            var headersRowHeight;\r\n            var offsetTop;\r\n            if (element) {\r\n                offsetTop = element.offset().top;\r\n                headersRowHeight = this._columnHeadersView.getHeadersRowHeight();\r\n                return posY >= offsetTop && posY <= offsetTop + headersRowHeight\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _pointCreated: function(point, cellsLength, columns) {\r\n        var currentColumn;\r\n        var isNextColumnMode = isNextColumnResizingMode(this);\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        var firstPointColumnIndex = !isNextColumnMode && rtlEnabled ? 0 : 1;\r\n        var nextColumn;\r\n        if (point.index >= firstPointColumnIndex && point.index < cellsLength + (!isNextColumnMode && !rtlEnabled ? 1 : 0)) {\r\n            point.columnIndex -= firstPointColumnIndex;\r\n            currentColumn = columns[point.columnIndex] || {};\r\n            nextColumn = columns[point.columnIndex + 1] || {};\r\n            return !(isNextColumnMode ? currentColumn.allowResizing && nextColumn.allowResizing : currentColumn.allowResizing)\r\n        }\r\n        return true\r\n    },\r\n    _getTargetPoint: function(pointsByColumns, currentX, deltaX) {\r\n        if (pointsByColumns) {\r\n            for (var i = 0; i < pointsByColumns.length; i++) {\r\n                if (pointsByColumns[i].x === pointsByColumns[0].x && pointsByColumns[i + 1] && pointsByColumns[i].x === pointsByColumns[i + 1].x) {\r\n                    continue\r\n                }\r\n                if (pointsByColumns[i].x - deltaX <= currentX && currentX <= pointsByColumns[i].x + deltaX) {\r\n                    return pointsByColumns[i]\r\n                }\r\n            }\r\n        }\r\n        return null\r\n    },\r\n    _moveSeparator: function(args) {\r\n        var e = args.event;\r\n        var that = e.data;\r\n        var columnsSeparatorWidth = that._columnsSeparatorView.width();\r\n        var isNextColumnMode = isNextColumnResizingMode(that);\r\n        var deltaX = columnsSeparatorWidth / 2;\r\n        var parentOffset = that._$parentContainer.offset();\r\n        var parentOffsetLeft = parentOffset.left;\r\n        var eventData = (0, _utils.eventData)(e);\r\n        if (that._isResizing && that._resizingInfo) {\r\n            if (parentOffsetLeft <= eventData.x && (!isNextColumnMode || eventData.x <= parentOffsetLeft + that._$parentContainer.width())) {\r\n                if (that._updateColumnsWidthIfNeeded(eventData.x)) {\r\n                    var $cell = that._columnHeadersView.getColumnElements().eq(that._resizingInfo.currentColumnIndex);\r\n                    that._columnsSeparatorView.moveByX($cell.offset().left + (isNextColumnMode && that.option(\"rtlEnabled\") ? 0 : $cell.outerWidth()));\r\n                    that._tablePositionController.update(that._targetPoint.y);\r\n                    e.preventDefault()\r\n                }\r\n            }\r\n        } else {\r\n            if (that._isHeadersRowArea(eventData.y)) {\r\n                if (that._previousParentOffset) {\r\n                    if (that._previousParentOffset.left !== parentOffset.left || that._previousParentOffset.top !== parentOffset.top) {\r\n                        that.pointsByColumns(null)\r\n                    }\r\n                }\r\n                that._targetPoint = that._getTargetPoint(that.pointsByColumns(), eventData.x, columnsSeparatorWidth);\r\n                that._previousParentOffset = parentOffset;\r\n                that._isReadyResizing = false;\r\n                if (that._targetPoint) {\r\n                    that._columnsSeparatorView.changeCursor(\"col-resize\");\r\n                    that._columnsSeparatorView.moveByX(that._targetPoint.x - deltaX);\r\n                    that._tablePositionController.update(that._targetPoint.y);\r\n                    that._isReadyResizing = true;\r\n                    e.preventDefault()\r\n                } else {\r\n                    that._columnsSeparatorView.changeCursor()\r\n                }\r\n            } else {\r\n                that.pointsByColumns(null);\r\n                that._isReadyResizing = false;\r\n                that._columnsSeparatorView.changeCursor()\r\n            }\r\n        }\r\n    },\r\n    _endResizing: function(args) {\r\n        var e = args.event;\r\n        var that = e.data;\r\n        if (that._isResizing) {\r\n            that.pointsByColumns(null);\r\n            that._resizingInfo = null;\r\n            that._columnsSeparatorView.hide();\r\n            that._columnsSeparatorView.changeCursor();\r\n            that._trackerView.hide();\r\n            if (!isNextColumnResizingMode(that)) {\r\n                var pageIndex = that.component.pageIndex();\r\n                that.component.updateDimensions();\r\n                if (that.option(\"wordWrapEnabled\") && \"virtual\" === that.option(\"scrolling.mode\")) {\r\n                    var dataSource = that.component.getDataSource();\r\n                    dataSource && dataSource.load().done(function() {\r\n                        that._rowsView.scrollToPage(pageIndex)\r\n                    })\r\n                }\r\n            }\r\n            that._isReadyResizing = false;\r\n            that._isResizing = false\r\n        }\r\n    },\r\n    _getNextColumnIndex: function(currentColumnIndex) {\r\n        return currentColumnIndex + 1\r\n    },\r\n    _setupResizingInfo: function(posX) {\r\n        var that = this;\r\n        var currentColumnIndex = that._targetPoint.columnIndex;\r\n        var nextColumnIndex = that._getNextColumnIndex(currentColumnIndex);\r\n        var currentHeader = that._columnHeadersView.getHeaderElement(currentColumnIndex);\r\n        var nextHeader = that._columnHeadersView.getHeaderElement(nextColumnIndex);\r\n        that._resizingInfo = {\r\n            startPosX: posX,\r\n            currentColumnIndex: currentColumnIndex,\r\n            currentColumnWidth: currentHeader && currentHeader.length > 0 ? currentHeader[0].getBoundingClientRect().width : 0,\r\n            nextColumnIndex: nextColumnIndex,\r\n            nextColumnWidth: nextHeader && nextHeader.length > 0 ? nextHeader[0].getBoundingClientRect().width : 0\r\n        }\r\n    },\r\n    _startResizing: function(args) {\r\n        var e = args.event;\r\n        var that = e.data;\r\n        var eventData = (0, _utils.eventData)(e);\r\n        var editingController = that.getController(\"editing\");\r\n        var editingMode = that.option(\"editing.mode\");\r\n        var isCellEditing = editingController.isEditing() && (\"batch\" === editingMode || \"cell\" === editingMode);\r\n        if ((0, _utils.isTouchEvent)(e)) {\r\n            if (that._isHeadersRowArea(eventData.y)) {\r\n                that._targetPoint = that._getTargetPoint(that.pointsByColumns(), eventData.x, COLUMNS_SEPARATOR_TOUCH_TRACKER_WIDTH);\r\n                if (that._targetPoint) {\r\n                    that._columnsSeparatorView.moveByX(that._targetPoint.x - that._columnsSeparatorView.width() / 2);\r\n                    that._isReadyResizing = true\r\n                }\r\n            } else {\r\n                that._isReadyResizing = false\r\n            }\r\n        }\r\n        if (that._isReadyResizing && !isCellEditing) {\r\n            that._setupResizingInfo(eventData.x);\r\n            that._isResizing = true;\r\n            that._tablePositionController.update(that._targetPoint.y);\r\n            that._columnsSeparatorView.show();\r\n            that._trackerView.show();\r\n            e.preventDefault();\r\n            e.stopPropagation()\r\n        }\r\n    },\r\n    _generatePointsByColumns: function() {\r\n        var that = this;\r\n        var columns = that._columnsController ? that._columnsController.getVisibleColumns() : [];\r\n        var cells = that._columnHeadersView.getColumnElements();\r\n        var pointsByColumns = [];\r\n        if (cells && cells.length > 0) {\r\n            pointsByColumns = _uiGrid_core4.default.getPointsByColumns(cells, function(point) {\r\n                return that._pointCreated(point, cells.length, columns)\r\n            })\r\n        }\r\n        that._pointsByColumns = pointsByColumns\r\n    },\r\n    _unsubscribeFromEvents: function() {\r\n        this._moveSeparatorHandler && _events_engine2.default.off(_dom_adapter2.default.getDocument(), (0, _utils.addNamespace)(_pointer2.default.move, MODULE_NAMESPACE), this._moveSeparatorHandler);\r\n        this._startResizingHandler && _events_engine2.default.off(this._$parentContainer, (0, _utils.addNamespace)(_pointer2.default.down, MODULE_NAMESPACE), this._startResizingHandler);\r\n        if (this._endResizingHandler) {\r\n            _events_engine2.default.off(this._columnsSeparatorView.element(), (0, _utils.addNamespace)(_pointer2.default.up, MODULE_NAMESPACE), this._endResizingHandler);\r\n            _events_engine2.default.off(_dom_adapter2.default.getDocument(), (0, _utils.addNamespace)(_pointer2.default.up, MODULE_NAMESPACE), this._endResizingHandler)\r\n        }\r\n    },\r\n    _subscribeToEvents: function() {\r\n        this._moveSeparatorHandler = this.createAction(this._moveSeparator);\r\n        this._startResizingHandler = this.createAction(this._startResizing);\r\n        this._endResizingHandler = this.createAction(this._endResizing);\r\n        _events_engine2.default.on(_dom_adapter2.default.getDocument(), (0, _utils.addNamespace)(_pointer2.default.move, MODULE_NAMESPACE), this, this._moveSeparatorHandler);\r\n        _events_engine2.default.on(this._$parentContainer, (0, _utils.addNamespace)(_pointer2.default.down, MODULE_NAMESPACE), this, this._startResizingHandler);\r\n        _events_engine2.default.on(this._columnsSeparatorView.element(), (0, _utils.addNamespace)(_pointer2.default.up, MODULE_NAMESPACE), this, this._endResizingHandler);\r\n        _events_engine2.default.on(_dom_adapter2.default.getDocument(), (0, _utils.addNamespace)(_pointer2.default.up, MODULE_NAMESPACE), this, this._endResizingHandler)\r\n    },\r\n    _updateColumnsWidthIfNeeded: function(posX) {\r\n        var deltaX;\r\n        var needUpdate = false;\r\n        var nextCellWidth;\r\n        var resizingInfo = this._resizingInfo;\r\n        var columnsController = this._columnsController;\r\n        var visibleColumns = columnsController.getVisibleColumns();\r\n        var columnsSeparatorWidth = this._columnsSeparatorView.width();\r\n        var contentWidth = this._rowsView.contentWidth();\r\n        var isNextColumnMode = isNextColumnResizingMode(this);\r\n        var adaptColumnWidthByRatio = isNextColumnMode && this.option(\"adaptColumnWidthByRatio\") && !this.option(\"columnAutoWidth\");\r\n        var column;\r\n        var minWidth;\r\n        var nextColumn;\r\n        var cellWidth;\r\n\r\n        function isPercentWidth(width) {\r\n            return _type2.default.isString(width) && \"%\" === width.slice(-1)\r\n        }\r\n\r\n        function setColumnWidth(column, columnWidth, contentWidth, adaptColumnWidthByRatio) {\r\n            if (column) {\r\n                var oldColumnWidth = column.width;\r\n                if (oldColumnWidth) {\r\n                    adaptColumnWidthByRatio = isPercentWidth(oldColumnWidth)\r\n                }\r\n                if (adaptColumnWidthByRatio) {\r\n                    column && columnsController.columnOption(column.index, \"visibleWidth\", columnWidth);\r\n                    column && columnsController.columnOption(column.index, \"width\", (columnWidth / contentWidth * 100).toFixed(3) + \"%\")\r\n                } else {\r\n                    column && columnsController.columnOption(column.index, \"visibleWidth\", null);\r\n                    column && columnsController.columnOption(column.index, \"width\", columnWidth)\r\n                }\r\n            }\r\n        }\r\n\r\n        function correctContentWidth(contentWidth, visibleColumns) {\r\n            var allColumnsHaveWidth = visibleColumns.every(function(column) {\r\n                return column.width\r\n            });\r\n            var totalPercent;\r\n            if (allColumnsHaveWidth) {\r\n                totalPercent = visibleColumns.reduce(function(sum, column) {\r\n                    if (isPercentWidth(column.width)) {\r\n                        sum += parseFloat(column.width)\r\n                    }\r\n                    return sum\r\n                }, 0);\r\n                if (totalPercent > 100) {\r\n                    contentWidth = contentWidth / totalPercent * 100\r\n                }\r\n            }\r\n            return contentWidth\r\n        }\r\n        deltaX = posX - resizingInfo.startPosX;\r\n        if (isNextColumnMode && this.option(\"rtlEnabled\")) {\r\n            deltaX = -deltaX\r\n        }\r\n        cellWidth = resizingInfo.currentColumnWidth + deltaX;\r\n        column = visibleColumns[resizingInfo.currentColumnIndex];\r\n        minWidth = column && column.minWidth || columnsSeparatorWidth;\r\n        needUpdate = cellWidth >= minWidth;\r\n        if (isNextColumnMode) {\r\n            nextCellWidth = resizingInfo.nextColumnWidth - deltaX;\r\n            nextColumn = visibleColumns[resizingInfo.nextColumnIndex];\r\n            minWidth = nextColumn && nextColumn.minWidth || columnsSeparatorWidth;\r\n            needUpdate = needUpdate && nextCellWidth >= minWidth\r\n        }\r\n        if (needUpdate) {\r\n            columnsController.beginUpdate();\r\n            cellWidth = Math.floor(cellWidth);\r\n            contentWidth = correctContentWidth(contentWidth, visibleColumns);\r\n            setColumnWidth(column, cellWidth, contentWidth, adaptColumnWidthByRatio);\r\n            if (isNextColumnMode) {\r\n                nextCellWidth = Math.floor(nextCellWidth);\r\n                setColumnWidth(nextColumn, nextCellWidth, contentWidth, adaptColumnWidthByRatio)\r\n            } else {\r\n                var columnWidths = this._columnHeadersView.getColumnWidths();\r\n                columnWidths[resizingInfo.currentColumnIndex] = cellWidth;\r\n                var hasScroll = columnWidths.reduce(function(totalWidth, width) {\r\n                    return totalWidth + width\r\n                }, 0) > this._rowsView.contentWidth();\r\n                if (!hasScroll) {\r\n                    var lastColumnIndex = _uiGrid_core4.default.getLastResizableColumnIndex(visibleColumns);\r\n                    if (lastColumnIndex >= 0) {\r\n                        columnsController.columnOption(visibleColumns[lastColumnIndex].index, \"visibleWidth\", \"auto\")\r\n                    }\r\n                }\r\n                for (var i = 0; i < columnWidths.length; i++) {\r\n                    if (visibleColumns[i] && visibleColumns[i] !== column && void 0 === visibleColumns[i].width) {\r\n                        columnsController.columnOption(visibleColumns[i].index, \"width\", columnWidths[i])\r\n                    }\r\n                }\r\n            }\r\n            columnsController.endUpdate()\r\n        }\r\n        return needUpdate\r\n    },\r\n    _subscribeToCallback: function(callback, handler) {\r\n        callback.add(handler);\r\n        this._subscribesToCallbacks.push({\r\n            callback: callback,\r\n            handler: handler\r\n        })\r\n    },\r\n    _unsubscribeFromCallbacks: function() {\r\n        var i;\r\n        var subscribe;\r\n        for (i = 0; i < this._subscribesToCallbacks.length; i++) {\r\n            subscribe = this._subscribesToCallbacks[i];\r\n            subscribe.callback.remove(subscribe.handler)\r\n        }\r\n        this._subscribesToCallbacks = []\r\n    },\r\n    _unsubscribes: function() {\r\n        this._unsubscribeFromEvents();\r\n        this._unsubscribeFromCallbacks()\r\n    },\r\n    _init: function() {\r\n        var that = this;\r\n        var generatePointsByColumnsHandler = function() {\r\n            if (!that._isResizing) {\r\n                that.pointsByColumns(null)\r\n            }\r\n        };\r\n        var generatePointsByColumnsScrollHandler = function(offset) {\r\n            if (that._scrollLeft !== offset.left) {\r\n                that._scrollLeft = offset.left;\r\n                that.pointsByColumns(null)\r\n            }\r\n        };\r\n        that._columnsSeparatorView = that.getView(\"columnsSeparatorView\");\r\n        that._columnHeadersView = that.getView(\"columnHeadersView\");\r\n        that._trackerView = that.getView(\"trackerView\");\r\n        that._rowsView = that.getView(\"rowsView\");\r\n        that._columnsController = that.getController(\"columns\");\r\n        that._tablePositionController = that.getController(\"tablePosition\");\r\n        that._$parentContainer = that._columnsSeparatorView.component.$element();\r\n        that._subscribeToCallback(that._columnHeadersView.renderCompleted, generatePointsByColumnsHandler);\r\n        that._subscribeToCallback(that._columnHeadersView.resizeCompleted, generatePointsByColumnsHandler);\r\n        that._subscribeToCallback(that._columnsSeparatorView.renderCompleted, function() {\r\n            that._unsubscribeFromEvents();\r\n            that._subscribeToEvents()\r\n        });\r\n        that._subscribeToCallback(that._rowsView.renderCompleted, function() {\r\n            that._rowsView.scrollChanged.remove(generatePointsByColumnsScrollHandler);\r\n            that._rowsView.scrollChanged.add(generatePointsByColumnsScrollHandler)\r\n        });\r\n        var previousScrollbarVisibility = 0 !== that._rowsView.getScrollbarWidth();\r\n        var previousTableHeight = 0;\r\n        that._subscribeToCallback(that.getController(\"tablePosition\").positionChanged, function(e) {\r\n            if (that._isResizing && !that._rowsView.isResizing) {\r\n                var scrollbarVisibility = 0 !== that._rowsView.getScrollbarWidth();\r\n                if (previousScrollbarVisibility !== scrollbarVisibility || previousTableHeight && previousTableHeight !== e.height) {\r\n                    previousScrollbarVisibility = scrollbarVisibility;\r\n                    previousTableHeight = e.height;\r\n                    that.component.updateDimensions()\r\n                } else {\r\n                    that._rowsView.updateFreeSpaceRowHeight()\r\n                }\r\n            }\r\n            previousTableHeight = e.height\r\n        })\r\n    },\r\n    optionChanged: function(args) {\r\n        this.callBase(args);\r\n        if (\"allowColumnResizing\" === args.name) {\r\n            if (args.value) {\r\n                this._init();\r\n                this._subscribeToEvents()\r\n            } else {\r\n                this._unsubscribes()\r\n            }\r\n        }\r\n    },\r\n    isResizing: function() {\r\n        return this._isResizing\r\n    },\r\n    init: function() {\r\n        this._subscribesToCallbacks = [];\r\n        if (allowResizing(this)) {\r\n            this._init()\r\n        }\r\n    },\r\n    pointsByColumns: function(value) {\r\n        if (void 0 !== value) {\r\n            this._pointsByColumns = value\r\n        } else {\r\n            if (!this._pointsByColumns) {\r\n                this._generatePointsByColumns()\r\n            }\r\n            return this._pointsByColumns\r\n        }\r\n    },\r\n    dispose: function() {\r\n        this._unsubscribes();\r\n        this.callBase()\r\n    }\r\n});\r\nvar TablePositionViewController = _uiGrid_core2.default.ViewController.inherit({\r\n    update: function(top) {\r\n        var that = this;\r\n        var params = {};\r\n        var $element = that._columnHeadersView.element();\r\n        var offset = $element && $element.offset();\r\n        var offsetTop = offset && offset.top || 0;\r\n        var diffOffsetTop = _type2.default.isDefined(top) ? Math.abs(top - offsetTop) : 0;\r\n        var columnsHeadersHeight = that._columnHeadersView ? that._columnHeadersView.getHeight() : 0;\r\n        var scrollBarWidth = that._rowsView.getScrollbarWidth(true);\r\n        var rowsHeight = that._rowsView ? that._rowsView.height() - scrollBarWidth : 0;\r\n        var columnsResizerController = that.component.getController(\"columnsResizer\");\r\n        params.height = columnsHeadersHeight;\r\n        if (false !== columnsResizerController.isResizing()) {\r\n            params.height += rowsHeight - diffOffsetTop\r\n        }\r\n        if (null !== top && $element && $element.length) {\r\n            params.top = $element[0].offsetTop + diffOffsetTop\r\n        }\r\n        that.positionChanged.fire(params)\r\n    },\r\n    init: function() {\r\n        var that = this;\r\n        that.callBase();\r\n        that._columnHeadersView = this.getView(\"columnHeadersView\");\r\n        that._rowsView = this.getView(\"rowsView\");\r\n        that._pagerView = this.getView(\"pagerView\");\r\n        that._rowsView.resizeCompleted.add(function() {\r\n            if (that.option(\"allowColumnResizing\")) {\r\n                that.update(null)\r\n            }\r\n        })\r\n    },\r\n    ctor: function(component) {\r\n        this.callBase(component);\r\n        this.positionChanged = (0, _callbacks2.default)()\r\n    }\r\n});\r\nvar DraggingHeaderViewController = _uiGrid_core2.default.ViewController.inherit({\r\n    _generatePointsByColumns: function(options) {\r\n        var that = this;\r\n        return _uiGrid_core4.default.getPointsByColumns(options.columnElements, function(point) {\r\n            return that._pointCreated(point, options.columns, options.targetDraggingPanel.getName(), options.sourceColumn)\r\n        }, options.isVerticalOrientation, options.startColumnIndex)\r\n    },\r\n    _pointCreated: function(point, columns, location, sourceColumn) {\r\n        var targetColumn = columns[point.columnIndex];\r\n        var prevColumn = columns[point.columnIndex - 1];\r\n        switch (location) {\r\n            case \"columnChooser\":\r\n                return true;\r\n            case \"headers\":\r\n                return sourceColumn && !sourceColumn.allowReordering || (!targetColumn || !targetColumn.allowReordering) && (!prevColumn || !prevColumn.allowReordering);\r\n            default:\r\n                return 0 === columns.length\r\n        }\r\n    },\r\n    _subscribeToEvents: function(draggingHeader, draggingPanels) {\r\n        var that = this;\r\n        (0, _iterator.each)(draggingPanels, function(_, draggingPanel) {\r\n            if (draggingPanel) {\r\n                var i;\r\n                var columns;\r\n                var columnElements;\r\n                var rowCount = draggingPanel.getRowCount ? draggingPanel.getRowCount() : 1;\r\n                var nameDraggingPanel = draggingPanel.getName();\r\n                var subscribeToEvents = function(index, columnElement) {\r\n                    if (!columnElement) {\r\n                        return\r\n                    }\r\n                    var $columnElement = (0, _renderer2.default)(columnElement);\r\n                    var column = columns[index];\r\n                    if (draggingPanel.allowDragging(column, nameDraggingPanel, draggingPanels)) {\r\n                        $columnElement.addClass(that.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS));\r\n                        _events_engine2.default.on($columnElement, (0, _utils.addNamespace)(_drag2.default.start, MODULE_NAMESPACE), that.createAction(function(args) {\r\n                            var e = args.event;\r\n                            var eventData = (0, _utils.eventData)(e);\r\n                            draggingHeader.dragHeader({\r\n                                deltaX: eventData.x - (0, _renderer2.default)(e.currentTarget).offset().left,\r\n                                deltaY: eventData.y - (0, _renderer2.default)(e.currentTarget).offset().top,\r\n                                sourceColumn: column,\r\n                                index: column.index,\r\n                                columnIndex: index,\r\n                                columnElement: $columnElement,\r\n                                sourceLocation: nameDraggingPanel,\r\n                                draggingPanels: draggingPanels,\r\n                                rowIndex: that._columnsController.getRowIndex(column.index, true)\r\n                            })\r\n                        }));\r\n                        _events_engine2.default.on($columnElement, (0, _utils.addNamespace)(_drag2.default.move, MODULE_NAMESPACE), {\r\n                            that: draggingHeader\r\n                        }, that.createAction(draggingHeader.moveHeader));\r\n                        _events_engine2.default.on($columnElement, (0, _utils.addNamespace)(_drag2.default.end, MODULE_NAMESPACE), {\r\n                            that: draggingHeader\r\n                        }, that.createAction(draggingHeader.dropHeader))\r\n                    }\r\n                };\r\n                for (i = 0; i < rowCount; i++) {\r\n                    columnElements = draggingPanel.getColumnElements(i) || [];\r\n                    if (columnElements.length) {\r\n                        columns = draggingPanel.getColumns(i) || [];\r\n                        (0, _iterator.each)(columnElements, subscribeToEvents)\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _unsubscribeFromEvents: function(draggingHeader, draggingPanels) {\r\n        var that = this;\r\n        (0, _iterator.each)(draggingPanels, function(_, draggingPanel) {\r\n            if (draggingPanel) {\r\n                var columnElements = draggingPanel.getColumnElements() || [];\r\n                (0, _iterator.each)(columnElements, function(index, columnElement) {\r\n                    var $columnElement = (0, _renderer2.default)(columnElement);\r\n                    _events_engine2.default.off($columnElement, (0, _utils.addNamespace)(_drag2.default.start, MODULE_NAMESPACE));\r\n                    _events_engine2.default.off($columnElement, (0, _utils.addNamespace)(_drag2.default.move, MODULE_NAMESPACE));\r\n                    _events_engine2.default.off($columnElement, (0, _utils.addNamespace)(_drag2.default.end, MODULE_NAMESPACE));\r\n                    $columnElement.removeClass(that.addWidgetPrefix(HEADERS_DRAG_ACTION_CLASS))\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _getSeparator: function(targetLocation) {\r\n        return \"headers\" === targetLocation ? this._columnsSeparatorView : this._blockSeparatorView\r\n    },\r\n    hideSeparators: function(type) {\r\n        var blockSeparator = this._blockSeparatorView;\r\n        var columnsSeparator = this._columnsSeparatorView;\r\n        this._animationColumnIndex = null;\r\n        blockSeparator && blockSeparator.hide();\r\n        \"block\" !== type && columnsSeparator && columnsSeparator.hide()\r\n    },\r\n    init: function() {\r\n        var that = this;\r\n        var subscribeToEvents;\r\n        that.callBase();\r\n        that._columnsController = that.getController(\"columns\");\r\n        that._columnHeadersView = that.getView(\"columnHeadersView\");\r\n        that._columnsSeparatorView = that.getView(\"columnsSeparatorView\");\r\n        that._draggingHeaderView = that.getView(\"draggingHeaderView\");\r\n        that._rowsView = that.getView(\"rowsView\");\r\n        that._blockSeparatorView = that.getView(\"blockSeparatorView\");\r\n        that._headerPanelView = that.getView(\"headerPanel\");\r\n        that._columnChooserView = that.getView(\"columnChooserView\");\r\n        subscribeToEvents = function() {\r\n            if (that._draggingHeaderView) {\r\n                var draggingPanels = [that._columnChooserView, that._columnHeadersView, that._headerPanelView];\r\n                that._unsubscribeFromEvents(that._draggingHeaderView, draggingPanels);\r\n                that._subscribeToEvents(that._draggingHeaderView, draggingPanels)\r\n            }\r\n        };\r\n        that._columnHeadersView.renderCompleted.add(subscribeToEvents);\r\n        that._headerPanelView && that._headerPanelView.renderCompleted.add(subscribeToEvents);\r\n        that._columnChooserView && that._columnChooserView.renderCompleted.add(subscribeToEvents)\r\n    },\r\n    allowDrop: function(parameters) {\r\n        return this._columnsController.allowMoveColumn(parameters.sourceColumnIndex, parameters.targetColumnIndex, parameters.sourceLocation, parameters.targetLocation)\r\n    },\r\n    drag: function(parameters) {\r\n        var sourceIndex = parameters.sourceIndex;\r\n        var sourceLocation = parameters.sourceLocation;\r\n        var sourceColumnElement = parameters.sourceColumnElement;\r\n        var headersView = this._columnHeadersView;\r\n        var rowsView = this._rowsView;\r\n        if (sourceColumnElement) {\r\n            sourceColumnElement.css({\r\n                opacity: COLUMN_OPACITY\r\n            });\r\n            if (\"headers\" === sourceLocation) {\r\n                headersView && headersView.setRowsOpacity(sourceIndex, COLUMN_OPACITY);\r\n                rowsView && rowsView.setRowsOpacity(sourceIndex, COLUMN_OPACITY)\r\n            }\r\n        }\r\n    },\r\n    dock: function(parameters) {\r\n        var that = this;\r\n        var targetColumnIndex = _type2.default.isObject(parameters.targetColumnIndex) ? parameters.targetColumnIndex.columnIndex : parameters.targetColumnIndex;\r\n        var sourceLocation = parameters.sourceLocation;\r\n        var targetLocation = parameters.targetLocation;\r\n        var separator = that._getSeparator(targetLocation);\r\n        var hasTargetVisibleIndex = targetColumnIndex >= 0;\r\n        var showSeparator = function() {\r\n            if (that._animationColumnIndex !== targetColumnIndex) {\r\n                that.hideSeparators();\r\n                separator.element()[parameters.isLast ? \"insertAfter\" : \"insertBefore\"](parameters.targetColumnElement);\r\n                that._animationColumnIndex = targetColumnIndex;\r\n                separator.show(targetLocation)\r\n            }\r\n        };\r\n        that._columnHeadersView.element().find(\".\" + HEADER_ROW_CLASS).toggleClass(that.addWidgetPrefix(HEADERS_DROP_HIGHLIGHT_CLASS), \"headers\" !== sourceLocation && \"headers\" === targetLocation && !hasTargetVisibleIndex);\r\n        if (separator) {\r\n            if (that.allowDrop(parameters) && hasTargetVisibleIndex) {\r\n                if (\"group\" === targetLocation || \"columnChooser\" === targetLocation) {\r\n                    showSeparator()\r\n                } else {\r\n                    that.hideSeparators(\"block\");\r\n                    that.getController(\"tablePosition\").update(parameters.posY);\r\n                    separator.moveByX(parameters.posX - separator.width());\r\n                    separator.show()\r\n                }\r\n            } else {\r\n                that.hideSeparators()\r\n            }\r\n        }\r\n    },\r\n    drop: function(parameters) {\r\n        var sourceColumnElement = parameters.sourceColumnElement;\r\n        if (sourceColumnElement) {\r\n            sourceColumnElement.css({\r\n                opacity: \"\"\r\n            });\r\n            this._columnHeadersView.setRowsOpacity(parameters.sourceIndex, \"\");\r\n            this._rowsView.setRowsOpacity(parameters.sourceIndex, \"\");\r\n            this._columnHeadersView.element().find(\".\" + HEADER_ROW_CLASS).removeClass(this.addWidgetPrefix(HEADERS_DROP_HIGHLIGHT_CLASS))\r\n        }\r\n        if (this.allowDrop(parameters)) {\r\n            var separator = this._getSeparator(parameters.targetLocation);\r\n            if (separator) {\r\n                separator.hide()\r\n            }\r\n            this._columnsController.moveColumn(parameters.sourceColumnIndex, parameters.targetColumnIndex, parameters.sourceLocation, parameters.targetLocation)\r\n        }\r\n    },\r\n    dispose: function() {\r\n        if (this._draggingHeaderView) {\r\n            this._unsubscribeFromEvents(this._draggingHeaderView, [this._columnChooserView, this._columnHeadersView, this._headerPanelView])\r\n        }\r\n    }\r\n});\r\nmodule.exports = {\r\n    views: {\r\n        columnsSeparatorView: ColumnsSeparatorView,\r\n        blockSeparatorView: BlockSeparatorView,\r\n        draggingHeaderView: DraggingHeaderView,\r\n        trackerView: TrackerView\r\n    },\r\n    controllers: {\r\n        draggingHeader: DraggingHeaderViewController,\r\n        tablePosition: TablePositionViewController,\r\n        columnsResizer: ColumnsResizerViewController\r\n    },\r\n    extenders: {\r\n        views: {\r\n            rowsView: {\r\n                _needUpdateRowHeight: function(itemCount) {\r\n                    var wordWrapEnabled = this.option(\"wordWrapEnabled\");\r\n                    var columnsResizerController = this.getController(\"columnsResizer\");\r\n                    var isResizing = columnsResizerController.isResizing();\r\n                    return this.callBase.apply(this, arguments) || itemCount > 0 && wordWrapEnabled && isResizing\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}