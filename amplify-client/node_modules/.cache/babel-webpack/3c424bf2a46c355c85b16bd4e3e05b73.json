{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.editor_factory.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _click = require(\"../../events/click\");\n\nvar _click2 = _interopRequireDefault(_click);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _position = require(\"../../animation/position\");\n\nvar _position2 = _interopRequireDefault(_position);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _ui = require(\"../shared/ui.editor_factory_mixin\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar EDITOR_INLINE_BLOCK = \"dx-editor-inline-block\";\nvar CELL_FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\nvar FOCUS_OVERLAY_CLASS = \"focus-overlay\";\nvar CONTENT_CLASS = \"content\";\nvar FOCUSED_ELEMENT_CLASS = \"dx-focused\";\nvar ROW_CLASS = \"dx-row\";\nvar MODULE_NAMESPACE = \"dxDataGridEditorFactory\";\nvar UPDATE_FOCUS_EVENTS = (0, _utils.addNamespace)([_pointer2.default.down, \"focusin\", _click2.default.name].join(\" \"), MODULE_NAMESPACE);\nvar POINTER_EVENTS_TARGET_CLASS = \"dx-pointer-events-target\";\nvar POINTER_EVENTS_NONE_CLASS = \"dx-pointer-events-none\";\nvar DX_HIDDEN = \"dx-hidden\";\n\nvar EditorFactory = _uiGrid_core2.default.ViewController.inherit({\n  _getFocusedElement: function _getFocusedElement($dataGridElement) {\n    var rowSelector = this.option(\"focusedRowEnabled\") ? \"tr[tabindex]:focus\" : \"tr[tabindex]:not(.dx-data-row):focus\";\n    var focusedElementSelector = \"td[tabindex]:focus, \".concat(rowSelector, \", input:focus, textarea:focus, .dx-lookup-field:focus, .dx-checkbox:focus\");\n    return $dataGridElement.find(focusedElementSelector);\n  },\n  _getFocusCellSelector: function _getFocusCellSelector() {\n    return \".dx-row > td\";\n  },\n  _updateFocusCore: function _updateFocusCore() {\n    var $focus = this._$focusedElement;\n    var $dataGridElement = this.component && this.component.$element();\n    var $focusCell;\n    var hideBorders;\n\n    if ($dataGridElement) {\n      $focus = this._getFocusedElement($dataGridElement);\n\n      if ($focus.length) {\n        if (!$focus.hasClass(CELL_FOCUS_DISABLED_CLASS) && !$focus.hasClass(ROW_CLASS)) {\n          $focusCell = $focus.closest(this._getFocusCellSelector() + \", .\" + CELL_FOCUS_DISABLED_CLASS);\n          hideBorders = $focusCell.get(0) !== $focus.get(0) && $focusCell.hasClass(EDITOR_INLINE_BLOCK);\n          $focus = $focusCell;\n        }\n\n        if ($focus.length && !$focus.hasClass(CELL_FOCUS_DISABLED_CLASS)) {\n          this.focus($focus, hideBorders);\n          return;\n        }\n      }\n    }\n\n    this.loseFocus();\n  },\n  _updateFocus: function _updateFocus(e) {\n    var that = this;\n    var isFocusOverlay = e && e.event && (0, _renderer2.default)(e.event.target).hasClass(that.addWidgetPrefix(FOCUS_OVERLAY_CLASS));\n    that._isFocusOverlay = that._isFocusOverlay || isFocusOverlay;\n    clearTimeout(that._updateFocusTimeoutID);\n    that._updateFocusTimeoutID = setTimeout(function () {\n      delete that._updateFocusTimeoutID;\n\n      if (!that._isFocusOverlay) {\n        that._updateFocusCore();\n      }\n\n      that._isFocusOverlay = false;\n    });\n  },\n  _updateFocusOverlaySize: function _updateFocusOverlaySize($element, position) {\n    $element.hide();\n\n    var location = _position2.default.calculate($element, (0, _extend.extend)({\n      collision: \"fit\"\n    }, position));\n\n    if (location.h.oversize > 0) {\n      $element.outerWidth($element.outerWidth() - location.h.oversize);\n    }\n\n    if (location.v.oversize > 0) {\n      $element.outerHeight($element.outerHeight() - location.v.oversize);\n    }\n\n    $element.show();\n  },\n  callbackNames: function callbackNames() {\n    return [\"focused\"];\n  },\n  focus: function focus($element, hideBorder) {\n    var that = this;\n\n    if (void 0 === $element) {\n      return that._$focusedElement;\n    } else {\n      if ($element) {\n        if (!$element.is(that._$focusedElement)) {\n          that._$focusedElement && that._$focusedElement.removeClass(FOCUSED_ELEMENT_CLASS);\n        }\n\n        that._$focusedElement = $element;\n        clearTimeout(that._focusTimeoutID);\n        that._focusTimeoutID = setTimeout(function () {\n          delete that._focusTimeoutID;\n          that.renderFocusOverlay($element, hideBorder);\n          $element.addClass(FOCUSED_ELEMENT_CLASS);\n          that.focused.fire($element);\n        });\n      }\n    }\n  },\n  renderFocusOverlay: function renderFocusOverlay($element, hideBorder) {\n    var that = this;\n    var focusOverlayPosition;\n\n    if (!(0, _uiGrid_core3.isElementInCurrentGrid)(this, $element)) {\n      return;\n    }\n\n    if (!that._$focusOverlay) {\n      that._$focusOverlay = (0, _renderer2.default)(\"<div>\").addClass(that.addWidgetPrefix(FOCUS_OVERLAY_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS);\n    }\n\n    if (hideBorder) {\n      that._$focusOverlay.addClass(DX_HIDDEN);\n    } else {\n      if ($element.length) {\n        var align = _browser2.default.msie ? \"left bottom\" : _browser2.default.mozilla ? \"right bottom\" : \"left top\";\n        var $content = $element.closest(\".\" + that.addWidgetPrefix(CONTENT_CLASS));\n        var elemCoord = $element[0].getBoundingClientRect();\n\n        that._$focusOverlay.removeClass(DX_HIDDEN).appendTo($content).outerWidth(elemCoord.right - elemCoord.left + 1).outerHeight(elemCoord.bottom - elemCoord.top + 1);\n\n        focusOverlayPosition = {\n          precise: true,\n          my: align,\n          at: align,\n          of: $element,\n          boundary: $content.length && $content\n        };\n\n        that._updateFocusOverlaySize(that._$focusOverlay, focusOverlayPosition);\n\n        _position2.default.setup(that._$focusOverlay, focusOverlayPosition);\n\n        that._$focusOverlay.css(\"visibility\", \"visible\");\n      }\n    }\n  },\n  resize: function resize() {\n    var $focusedElement = this._$focusedElement;\n\n    if ($focusedElement) {\n      this.focus($focusedElement);\n    }\n  },\n  loseFocus: function loseFocus() {\n    this._$focusedElement && this._$focusedElement.removeClass(FOCUSED_ELEMENT_CLASS);\n    this._$focusedElement = null;\n    this._$focusOverlay && this._$focusOverlay.addClass(DX_HIDDEN);\n  },\n  init: function init() {\n    this.createAction(\"onEditorPreparing\", {\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n    this.createAction(\"onEditorPrepared\", {\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n    this._updateFocusHandler = this._updateFocusHandler || this.createAction(this._updateFocus.bind(this));\n\n    _events_engine2.default.on(_dom_adapter2.default.getDocument(), UPDATE_FOCUS_EVENTS, this._updateFocusHandler);\n\n    this._attachContainerEventHandlers();\n  },\n  _attachContainerEventHandlers: function _attachContainerEventHandlers() {\n    var that = this;\n    var $container = that.component && that.component.$element();\n\n    if ($container) {\n      _events_engine2.default.on($container, (0, _utils.addNamespace)(\"keydown\", MODULE_NAMESPACE), function (e) {\n        if (\"tab\" === (0, _utils.normalizeKeyName)(e)) {\n          that._updateFocusHandler(e);\n        }\n      });\n    }\n  },\n  _focusOverlayEventProxy: function _focusOverlayEventProxy(e) {\n    var $target = (0, _renderer2.default)(e.target);\n    var $currentTarget = (0, _renderer2.default)(e.currentTarget);\n    var element;\n    var needProxy = $target.hasClass(POINTER_EVENTS_TARGET_CLASS) || $target.hasClass(POINTER_EVENTS_NONE_CLASS);\n\n    if (!needProxy || $currentTarget.hasClass(DX_HIDDEN)) {\n      return;\n    }\n\n    $currentTarget.addClass(DX_HIDDEN);\n    element = $target.get(0).ownerDocument.elementFromPoint(e.clientX, e.clientY);\n    (0, _utils.fireEvent)({\n      originalEvent: e,\n      target: element\n    });\n    e.stopPropagation();\n    $currentTarget.removeClass(DX_HIDDEN);\n\n    if (e.type === _click2.default.name && \"INPUT\" === element.tagName) {\n      _events_engine2.default.trigger((0, _renderer2.default)(element), \"focus\");\n    }\n  },\n  dispose: function dispose() {\n    clearTimeout(this._focusTimeoutID);\n    clearTimeout(this._updateFocusTimeoutID);\n\n    _events_engine2.default.off(_dom_adapter2.default.getDocument(), UPDATE_FOCUS_EVENTS, this._updateFocusHandler);\n  }\n}).include(_ui2.default);\n\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {};\n  },\n  controllers: {\n    editorFactory: EditorFactory\n  },\n  extenders: {\n    controllers: {\n      columnsResizer: {\n        _startResizing: function _startResizing(args) {\n          this.callBase(args);\n\n          if (this.isResizing()) {\n            this.getController(\"editorFactory\").loseFocus();\n          }\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/grid_core/ui.grid_core.editor_factory.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_dom_adapter","_dom_adapter2","_events_engine","_events_engine2","_uiGrid_core","_uiGrid_core2","_click","_click2","_pointer","_pointer2","_position","_position2","_utils","_browser","_browser2","_extend","_ui","_ui2","_uiGrid_core3","obj","__esModule","EDITOR_INLINE_BLOCK","CELL_FOCUS_DISABLED_CLASS","FOCUS_OVERLAY_CLASS","CONTENT_CLASS","FOCUSED_ELEMENT_CLASS","ROW_CLASS","MODULE_NAMESPACE","UPDATE_FOCUS_EVENTS","addNamespace","default","down","name","join","POINTER_EVENTS_TARGET_CLASS","POINTER_EVENTS_NONE_CLASS","DX_HIDDEN","EditorFactory","ViewController","inherit","_getFocusedElement","$dataGridElement","rowSelector","option","focusedElementSelector","concat","find","_getFocusCellSelector","_updateFocusCore","$focus","_$focusedElement","component","$element","$focusCell","hideBorders","length","hasClass","closest","get","focus","loseFocus","_updateFocus","e","that","isFocusOverlay","event","target","addWidgetPrefix","_isFocusOverlay","clearTimeout","_updateFocusTimeoutID","setTimeout","_updateFocusOverlaySize","position","hide","location","calculate","extend","collision","h","oversize","outerWidth","v","outerHeight","show","callbackNames","hideBorder","is","removeClass","_focusTimeoutID","renderFocusOverlay","addClass","focused","fire","focusOverlayPosition","isElementInCurrentGrid","_$focusOverlay","align","msie","mozilla","$content","elemCoord","getBoundingClientRect","appendTo","right","left","bottom","top","precise","my","at","of","boundary","setup","css","resize","$focusedElement","init","createAction","excludeValidators","category","_updateFocusHandler","bind","on","getDocument","_attachContainerEventHandlers","$container","normalizeKeyName","_focusOverlayEventProxy","$target","$currentTarget","currentTarget","element","needProxy","ownerDocument","elementFromPoint","clientX","clientY","fireEvent","originalEvent","stopPropagation","type","tagName","trigger","dispose","off","include","module","exports","defaultOptions","controllers","editorFactory","extenders","columnsResizer","_startResizing","args","callBase","isResizing","getController"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.editor_factory.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _click = require(\"../../events/click\");\r\nvar _click2 = _interopRequireDefault(_click);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _position = require(\"../../animation/position\");\r\nvar _position2 = _interopRequireDefault(_position);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _ui = require(\"../shared/ui.editor_factory_mixin\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar EDITOR_INLINE_BLOCK = \"dx-editor-inline-block\";\r\nvar CELL_FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\r\nvar FOCUS_OVERLAY_CLASS = \"focus-overlay\";\r\nvar CONTENT_CLASS = \"content\";\r\nvar FOCUSED_ELEMENT_CLASS = \"dx-focused\";\r\nvar ROW_CLASS = \"dx-row\";\r\nvar MODULE_NAMESPACE = \"dxDataGridEditorFactory\";\r\nvar UPDATE_FOCUS_EVENTS = (0, _utils.addNamespace)([_pointer2.default.down, \"focusin\", _click2.default.name].join(\" \"), MODULE_NAMESPACE);\r\nvar POINTER_EVENTS_TARGET_CLASS = \"dx-pointer-events-target\";\r\nvar POINTER_EVENTS_NONE_CLASS = \"dx-pointer-events-none\";\r\nvar DX_HIDDEN = \"dx-hidden\";\r\nvar EditorFactory = _uiGrid_core2.default.ViewController.inherit({\r\n    _getFocusedElement: function($dataGridElement) {\r\n        var rowSelector = this.option(\"focusedRowEnabled\") ? \"tr[tabindex]:focus\" : \"tr[tabindex]:not(.dx-data-row):focus\";\r\n        var focusedElementSelector = \"td[tabindex]:focus, \".concat(rowSelector, \", input:focus, textarea:focus, .dx-lookup-field:focus, .dx-checkbox:focus\");\r\n        return $dataGridElement.find(focusedElementSelector)\r\n    },\r\n    _getFocusCellSelector: function() {\r\n        return \".dx-row > td\"\r\n    },\r\n    _updateFocusCore: function() {\r\n        var $focus = this._$focusedElement;\r\n        var $dataGridElement = this.component && this.component.$element();\r\n        var $focusCell;\r\n        var hideBorders;\r\n        if ($dataGridElement) {\r\n            $focus = this._getFocusedElement($dataGridElement);\r\n            if ($focus.length) {\r\n                if (!$focus.hasClass(CELL_FOCUS_DISABLED_CLASS) && !$focus.hasClass(ROW_CLASS)) {\r\n                    $focusCell = $focus.closest(this._getFocusCellSelector() + \", .\" + CELL_FOCUS_DISABLED_CLASS);\r\n                    hideBorders = $focusCell.get(0) !== $focus.get(0) && $focusCell.hasClass(EDITOR_INLINE_BLOCK);\r\n                    $focus = $focusCell\r\n                }\r\n                if ($focus.length && !$focus.hasClass(CELL_FOCUS_DISABLED_CLASS)) {\r\n                    this.focus($focus, hideBorders);\r\n                    return\r\n                }\r\n            }\r\n        }\r\n        this.loseFocus()\r\n    },\r\n    _updateFocus: function(e) {\r\n        var that = this;\r\n        var isFocusOverlay = e && e.event && (0, _renderer2.default)(e.event.target).hasClass(that.addWidgetPrefix(FOCUS_OVERLAY_CLASS));\r\n        that._isFocusOverlay = that._isFocusOverlay || isFocusOverlay;\r\n        clearTimeout(that._updateFocusTimeoutID);\r\n        that._updateFocusTimeoutID = setTimeout(function() {\r\n            delete that._updateFocusTimeoutID;\r\n            if (!that._isFocusOverlay) {\r\n                that._updateFocusCore()\r\n            }\r\n            that._isFocusOverlay = false\r\n        })\r\n    },\r\n    _updateFocusOverlaySize: function($element, position) {\r\n        $element.hide();\r\n        var location = _position2.default.calculate($element, (0, _extend.extend)({\r\n            collision: \"fit\"\r\n        }, position));\r\n        if (location.h.oversize > 0) {\r\n            $element.outerWidth($element.outerWidth() - location.h.oversize)\r\n        }\r\n        if (location.v.oversize > 0) {\r\n            $element.outerHeight($element.outerHeight() - location.v.oversize)\r\n        }\r\n        $element.show()\r\n    },\r\n    callbackNames: function() {\r\n        return [\"focused\"]\r\n    },\r\n    focus: function($element, hideBorder) {\r\n        var that = this;\r\n        if (void 0 === $element) {\r\n            return that._$focusedElement\r\n        } else {\r\n            if ($element) {\r\n                if (!$element.is(that._$focusedElement)) {\r\n                    that._$focusedElement && that._$focusedElement.removeClass(FOCUSED_ELEMENT_CLASS)\r\n                }\r\n                that._$focusedElement = $element;\r\n                clearTimeout(that._focusTimeoutID);\r\n                that._focusTimeoutID = setTimeout(function() {\r\n                    delete that._focusTimeoutID;\r\n                    that.renderFocusOverlay($element, hideBorder);\r\n                    $element.addClass(FOCUSED_ELEMENT_CLASS);\r\n                    that.focused.fire($element)\r\n                })\r\n            }\r\n        }\r\n    },\r\n    renderFocusOverlay: function($element, hideBorder) {\r\n        var that = this;\r\n        var focusOverlayPosition;\r\n        if (!(0, _uiGrid_core3.isElementInCurrentGrid)(this, $element)) {\r\n            return\r\n        }\r\n        if (!that._$focusOverlay) {\r\n            that._$focusOverlay = (0, _renderer2.default)(\"<div>\").addClass(that.addWidgetPrefix(FOCUS_OVERLAY_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS)\r\n        }\r\n        if (hideBorder) {\r\n            that._$focusOverlay.addClass(DX_HIDDEN)\r\n        } else {\r\n            if ($element.length) {\r\n                var align = _browser2.default.msie ? \"left bottom\" : _browser2.default.mozilla ? \"right bottom\" : \"left top\";\r\n                var $content = $element.closest(\".\" + that.addWidgetPrefix(CONTENT_CLASS));\r\n                var elemCoord = $element[0].getBoundingClientRect();\r\n                that._$focusOverlay.removeClass(DX_HIDDEN).appendTo($content).outerWidth(elemCoord.right - elemCoord.left + 1).outerHeight(elemCoord.bottom - elemCoord.top + 1);\r\n                focusOverlayPosition = {\r\n                    precise: true,\r\n                    my: align,\r\n                    at: align,\r\n                    of: $element,\r\n                    boundary: $content.length && $content\r\n                };\r\n                that._updateFocusOverlaySize(that._$focusOverlay, focusOverlayPosition);\r\n                _position2.default.setup(that._$focusOverlay, focusOverlayPosition);\r\n                that._$focusOverlay.css(\"visibility\", \"visible\")\r\n            }\r\n        }\r\n    },\r\n    resize: function() {\r\n        var $focusedElement = this._$focusedElement;\r\n        if ($focusedElement) {\r\n            this.focus($focusedElement)\r\n        }\r\n    },\r\n    loseFocus: function() {\r\n        this._$focusedElement && this._$focusedElement.removeClass(FOCUSED_ELEMENT_CLASS);\r\n        this._$focusedElement = null;\r\n        this._$focusOverlay && this._$focusOverlay.addClass(DX_HIDDEN)\r\n    },\r\n    init: function() {\r\n        this.createAction(\"onEditorPreparing\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        });\r\n        this.createAction(\"onEditorPrepared\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        });\r\n        this._updateFocusHandler = this._updateFocusHandler || this.createAction(this._updateFocus.bind(this));\r\n        _events_engine2.default.on(_dom_adapter2.default.getDocument(), UPDATE_FOCUS_EVENTS, this._updateFocusHandler);\r\n        this._attachContainerEventHandlers()\r\n    },\r\n    _attachContainerEventHandlers: function() {\r\n        var that = this;\r\n        var $container = that.component && that.component.$element();\r\n        if ($container) {\r\n            _events_engine2.default.on($container, (0, _utils.addNamespace)(\"keydown\", MODULE_NAMESPACE), function(e) {\r\n                if (\"tab\" === (0, _utils.normalizeKeyName)(e)) {\r\n                    that._updateFocusHandler(e)\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _focusOverlayEventProxy: function(e) {\r\n        var $target = (0, _renderer2.default)(e.target);\r\n        var $currentTarget = (0, _renderer2.default)(e.currentTarget);\r\n        var element;\r\n        var needProxy = $target.hasClass(POINTER_EVENTS_TARGET_CLASS) || $target.hasClass(POINTER_EVENTS_NONE_CLASS);\r\n        if (!needProxy || $currentTarget.hasClass(DX_HIDDEN)) {\r\n            return\r\n        }\r\n        $currentTarget.addClass(DX_HIDDEN);\r\n        element = $target.get(0).ownerDocument.elementFromPoint(e.clientX, e.clientY);\r\n        (0, _utils.fireEvent)({\r\n            originalEvent: e,\r\n            target: element\r\n        });\r\n        e.stopPropagation();\r\n        $currentTarget.removeClass(DX_HIDDEN);\r\n        if (e.type === _click2.default.name && \"INPUT\" === element.tagName) {\r\n            _events_engine2.default.trigger((0, _renderer2.default)(element), \"focus\")\r\n        }\r\n    },\r\n    dispose: function() {\r\n        clearTimeout(this._focusTimeoutID);\r\n        clearTimeout(this._updateFocusTimeoutID);\r\n        _events_engine2.default.off(_dom_adapter2.default.getDocument(), UPDATE_FOCUS_EVENTS, this._updateFocusHandler)\r\n    }\r\n}).include(_ui2.default);\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {}\r\n    },\r\n    controllers: {\r\n        editorFactory: EditorFactory\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            columnsResizer: {\r\n                _startResizing: function(args) {\r\n                    this.callBase(args);\r\n                    if (this.isResizing()) {\r\n                        this.getController(\"editorFactory\").loseFocus()\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}