{"ast":null,"code":"/**\r\n * DevExtreme (viz/chart.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _common = require(\"../core/utils/common\");\n\nvar _extend2 = require(\"../core/utils/extend\");\n\nvar _array = require(\"../core/utils/array\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _component_registrator = require(\"../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _utils = require(\"./core/utils\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _math = require(\"../core/utils/math\");\n\nvar _base_chart = require(\"./chart_components/base_chart\");\n\nvar _layout_manager = require(\"./chart_components/layout_manager\");\n\nvar _layout_manager2 = _interopRequireDefault(_layout_manager);\n\nvar _multi_axes_synchronizer = require(\"./chart_components/multi_axes_synchronizer\");\n\nvar _multi_axes_synchronizer2 = _interopRequireDefault(_multi_axes_synchronizer);\n\nvar _advanced_chart = require(\"./chart_components/advanced_chart\");\n\nvar _scroll_bar = require(\"./chart_components/scroll_bar\");\n\nvar _scroll_bar2 = _interopRequireDefault(_scroll_bar);\n\nvar _crosshair = require(\"./chart_components/crosshair\");\n\nvar _crosshair2 = _interopRequireDefault(_crosshair);\n\nvar _range_data_calculator = require(\"./series/helpers/range_data_calculator\");\n\nvar _range_data_calculator2 = _interopRequireDefault(_range_data_calculator);\n\nvar _range = require(\"./translators/range\");\n\nvar _range2 = _interopRequireDefault(_range);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DEFAULT_PANE_NAME = \"default\";\nvar VISUAL_RANGE = \"VISUAL_RANGE\";\nvar DEFAULT_PANES = [{\n  name: DEFAULT_PANE_NAME,\n  border: {}\n}];\nvar _isArray = Array.isArray;\n\nfunction getFirstAxisNameForPane(axes, paneName, defaultPane) {\n  var result;\n\n  for (var i = 0; i < axes.length; i++) {\n    if (axes[i].pane === paneName || void 0 === axes[i].pane && paneName === defaultPane) {\n      result = axes[i].name;\n      break;\n    }\n  }\n\n  if (!result) {\n    result = axes[0].name;\n  }\n\n  return result;\n}\n\nfunction changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility) {\n  var gridOpt = axis.getOptions().grid;\n  var minorGridOpt = axis.getOptions().minorGrid;\n  gridOpt.visible = gridVisibility;\n  minorGridOpt && (minorGridOpt.visible = minorGridVisibility);\n}\n\nfunction hideGridsOnNonFirstValueAxisForPane(axesForPane) {\n  var axisShown = false;\n  var hiddenStubAxis = [];\n  var minorGridVisibility = axesForPane.some(function (axis) {\n    var minorGridOptions = axis.getOptions().minorGrid;\n    return minorGridOptions && minorGridOptions.visible;\n  });\n  var gridVisibility = axesForPane.some(function (axis) {\n    var gridOptions = axis.getOptions().grid;\n    return gridOptions && gridOptions.visible;\n  });\n\n  if (axesForPane.length > 1) {\n    axesForPane.forEach(function (axis) {\n      var gridOpt = axis.getOptions().grid;\n\n      if (axisShown) {\n        changeVisibilityAxisGrids(axis, false, false);\n      } else {\n        if (gridOpt && gridOpt.visible) {\n          if (axis.getTranslator().getBusinessRange().isEmpty()) {\n            changeVisibilityAxisGrids(axis, false, false);\n            hiddenStubAxis.push(axis);\n          } else {\n            axisShown = true;\n            changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility);\n          }\n        }\n      }\n    });\n    !axisShown && hiddenStubAxis.length && changeVisibilityAxisGrids(hiddenStubAxis[0], gridVisibility, minorGridVisibility);\n  }\n}\n\nfunction findAxisOptions(valueAxes, valueAxesOptions, axisName) {\n  var result;\n  var axInd;\n\n  for (axInd = 0; axInd < valueAxesOptions.length; axInd++) {\n    if (valueAxesOptions[axInd].name === axisName) {\n      result = valueAxesOptions[axInd];\n      result.priority = axInd;\n      break;\n    }\n  }\n\n  if (!result) {\n    for (axInd = 0; axInd < valueAxes.length; axInd++) {\n      if (valueAxes[axInd].name === axisName) {\n        result = valueAxes[axInd].getOptions();\n        result.priority = valueAxes[axInd].priority;\n        break;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction findAxis(paneName, axisName, axes) {\n  var axis;\n  var i;\n\n  for (i = 0; i < axes.length; i++) {\n    axis = axes[i];\n\n    if (axis.name === axisName && axis.pane === paneName) {\n      return axis;\n    }\n  }\n\n  if (paneName) {\n    return findAxis(void 0, axisName, axes);\n  }\n}\n\nfunction compareAxes(a, b) {\n  return a.priority - b.priority;\n}\n\nfunction doesPaneExist(panes, paneName) {\n  var found = false;\n  (0, _iterator.each)(panes, function (_, pane) {\n    if (pane.name === paneName) {\n      found = true;\n      return false;\n    }\n  });\n  return found;\n}\n\nvar prepareSegmentRectPoints = function prepareSegmentRectPoints(left, top, width, height, borderOptions) {\n  var maxSW = ~~((width < height ? width : height) / 2);\n  var sw = borderOptions.width || 0;\n  var newSW = sw < maxSW ? sw : maxSW;\n  left += newSW / 2;\n  top += newSW / 2;\n  width -= newSW;\n  height -= newSW;\n  var right = left + width;\n  var bottom = top + height;\n  var points = [];\n  var segments = [];\n  var segmentSequence;\n  var visiblyOpt = 0;\n  var prevSegmentVisibility = 0;\n  var allSegment = {\n    top: [[left, top], [right, top]],\n    right: [[right, top], [right, bottom]],\n    bottom: [[right, bottom], [left, bottom]],\n    left: [[left, bottom], [left, top]]\n  };\n  (0, _iterator.each)(allSegment, function (seg) {\n    var visibility = !!borderOptions[seg];\n    visiblyOpt = 2 * visiblyOpt + ~~visibility;\n  });\n\n  switch (visiblyOpt) {\n    case 13:\n    case 9:\n      segmentSequence = [\"left\", \"top\", \"right\", \"bottom\"];\n      break;\n\n    case 11:\n      segmentSequence = [\"bottom\", \"left\", \"top\", \"right\"];\n      break;\n\n    default:\n      segmentSequence = [\"top\", \"right\", \"bottom\", \"left\"];\n  }\n\n  (0, _iterator.each)(segmentSequence, function (_, seg) {\n    var segmentVisibility = !!borderOptions[seg];\n\n    if (!prevSegmentVisibility && segments.length) {\n      points.push(segments);\n      segments = [];\n    }\n\n    if (segmentVisibility) {\n      (0, _iterator.each)(allSegment[seg].slice(prevSegmentVisibility), function (_, segment) {\n        segments = segments.concat(segment);\n      });\n    }\n\n    prevSegmentVisibility = ~~segmentVisibility;\n  });\n  segments.length && points.push(segments);\n  1 === points.length && (points = points[0]);\n  return {\n    points: points,\n    pathType: 15 === visiblyOpt ? \"area\" : \"line\"\n  };\n};\n\nfunction accumulate(field, src1, src2, auxSpacing) {\n  var val1 = src1[field] || 0;\n  var val2 = src2[field] || 0;\n  return val1 + val2 + (val1 && val2 ? auxSpacing : 0);\n}\n\nfunction pickMax(field, src1, src2) {\n  return pickMaxValue(src1[field], src2[field]);\n}\n\nfunction pickMaxValue(val1, val2) {\n  return Math.max(val1 || 0, val2 || 0);\n}\n\nfunction getAxisMargins(axis) {\n  return axis.getMargins();\n}\n\nfunction getHorizontalAxesMargins(axes, getMarginsFunc) {\n  return axes.reduce(function (margins, axis) {\n    var axisMargins = getMarginsFunc(axis);\n    var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\n    var spacing = axis.getMultipleAxesSpacing();\n    paneMargins.top = accumulate(\"top\", paneMargins, axisMargins, spacing);\n    paneMargins.bottom = accumulate(\"bottom\", paneMargins, axisMargins, spacing);\n    paneMargins.left = pickMax(\"left\", paneMargins, axisMargins);\n    paneMargins.right = pickMax(\"right\", paneMargins, axisMargins);\n    margins.top = pickMax(\"top\", paneMargins, margins);\n    margins.bottom = pickMax(\"bottom\", paneMargins, margins);\n    margins.left = pickMax(\"left\", paneMargins, margins);\n    margins.right = pickMax(\"right\", paneMargins, margins);\n    return margins;\n  }, {\n    panes: {}\n  });\n}\n\nfunction getVerticalAxesMargins(axes) {\n  return axes.reduce(function (margins, axis) {\n    var axisMargins = axis.getMargins();\n    var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\n    var spacing = axis.getMultipleAxesSpacing();\n    paneMargins.top = pickMax(\"top\", paneMargins, axisMargins);\n    paneMargins.bottom = pickMax(\"bottom\", paneMargins, axisMargins);\n    paneMargins.left = accumulate(\"left\", paneMargins, axisMargins, spacing);\n    paneMargins.right = accumulate(\"right\", paneMargins, axisMargins, spacing);\n    margins.top = pickMax(\"top\", paneMargins, margins);\n    margins.bottom = pickMax(\"bottom\", paneMargins, margins);\n    margins.left = pickMax(\"left\", paneMargins, margins);\n    margins.right = pickMax(\"right\", paneMargins, margins);\n    return margins;\n  }, {\n    panes: {}\n  });\n}\n\nfunction performActionOnAxes(axes, action, actionArgument1, actionArgument2, actionArgument3) {\n  axes.forEach(function (axis) {\n    axis[action](actionArgument1 && actionArgument1[axis.pane], actionArgument2 && actionArgument2[axis.pane] || actionArgument2, actionArgument3);\n  });\n}\n\nfunction shrinkCanvases(isRotated, canvases, sizes, verticalMargins, horizontalMargins) {\n  function getMargin(side, margins, pane) {\n    var m = (isRotated ? [\"left\", \"right\"] : [\"top\", \"bottom\"]).indexOf(side) === -1 ? margins : margins.panes[pane] || {};\n    return m[side];\n  }\n\n  function getMaxMargin(side, margins1, margins2, pane) {\n    return pickMaxValue(getMargin(side, margins1, pane), getMargin(side, margins2, pane));\n  }\n\n  var getOriginalField = function getOriginalField(field) {\n    return \"original\".concat(field[0].toUpperCase()).concat(field.slice(1));\n  };\n\n  function shrink(canvases, paneNames, sizeField, startMargin, endMargin, oppositeMargins) {\n    paneNames = paneNames.sort(function (p1, p2) {\n      return canvases[p2][startMargin] - canvases[p1][startMargin];\n    });\n    paneNames.forEach(function (pane) {\n      var canvas = canvases[pane];\n      oppositeMargins.forEach(function (margin) {\n        canvas[margin] = canvas[getOriginalField(margin)] + getMaxMargin(margin, verticalMargins, horizontalMargins, pane);\n      });\n    });\n    var firstPane = canvases[paneNames[0]];\n    var emptySpace = paneNames.reduce(function (space, paneName) {\n      space -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, paneName) + getMaxMargin(endMargin, verticalMargins, horizontalMargins, paneName);\n      return space;\n    }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - canvases[paneNames[paneNames.length - 1]][getOriginalField(startMargin)]) - _utils.PANE_PADDING * (paneNames.length - 1);\n    var totalCustomSpace = Object.keys(sizes).reduce(function (prev, key) {\n      return prev + (sizes[key].unit ? sizes[key].height : 0);\n    }, 0);\n    emptySpace -= totalCustomSpace;\n    paneNames.reduce(function (offset, pane) {\n      var canvas = canvases[pane];\n      var paneSize = sizes[pane];\n      offset -= getMaxMargin(endMargin, verticalMargins, horizontalMargins, pane);\n      canvas[endMargin] = firstPane[sizeField] - offset;\n      offset -= paneSize.unit ? paneSize.height : Math.floor(emptySpace * paneSize.height);\n      canvas[startMargin] = offset;\n      offset -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, pane) + _utils.PANE_PADDING;\n      return offset;\n    }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - (emptySpace < 0 ? emptySpace : 0));\n  }\n\n  var paneNames = Object.keys(canvases);\n\n  if (!isRotated) {\n    shrink(canvases, paneNames, \"height\", \"top\", \"bottom\", [\"left\", \"right\"]);\n  } else {\n    shrink(canvases, paneNames, \"width\", \"left\", \"right\", [\"top\", \"bottom\"]);\n  }\n\n  return canvases;\n}\n\nfunction drawAxesWithTicks(axes, condition, canvases, panesBorderOptions) {\n  if (condition) {\n    performActionOnAxes(axes, \"createTicks\", canvases);\n\n    _multi_axes_synchronizer2.default.synchronize(axes);\n  }\n\n  performActionOnAxes(axes, \"draw\", !condition && canvases, panesBorderOptions);\n}\n\nfunction shiftAxis(side1, side2) {\n  var shifts = {};\n  return function (axis) {\n    var shift = shifts[axis.pane] = shifts[axis.pane] || {\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0\n    };\n    var spacing = axis.getMultipleAxesSpacing();\n    var margins = axis.getMargins();\n    axis.shift(shift);\n    shift[side1] = accumulate(side1, shift, margins, spacing);\n    shift[side2] = accumulate(side2, shift, margins, spacing);\n  };\n}\n\nfunction getCommonSize(side, margins) {\n  var size = 0;\n  var pane;\n  var paneMargins;\n\n  for (pane in margins.panes) {\n    paneMargins = margins.panes[pane];\n    size += \"height\" === side ? paneMargins.top + paneMargins.bottom : paneMargins.left + paneMargins.right;\n  }\n\n  return size;\n}\n\nfunction checkUsedSpace(sizeShortage, side, axes, getMarginFunc) {\n  var size = 0;\n\n  if (sizeShortage[side] > 0) {\n    size = getCommonSize(side, getMarginFunc(axes, getAxisMargins));\n    performActionOnAxes(axes, \"hideTitle\");\n    sizeShortage[side] -= size - getCommonSize(side, getMarginFunc(axes, getAxisMargins));\n  }\n\n  if (sizeShortage[side] > 0) {\n    performActionOnAxes(axes, \"hideOuterElements\");\n  }\n}\n\nfunction axisAnimationEnabled(drawOptions, series) {\n  var pointsCount = series.reduce(function (sum, s) {\n    return sum += s.getPoints().length;\n  }, 0) / series.length;\n  return drawOptions.animate && pointsCount <= drawOptions.animationPointsLimit;\n}\n\nvar dxChart = _advanced_chart.AdvancedChart.inherit({\n  _themeSection: \"chart\",\n  _fontFields: [\"crosshair.label.font\"],\n  _setDeprecatedOptions: function _setDeprecatedOptions() {\n    this.callBase.apply(this, arguments);\n    (0, _extend2.extend)(this._deprecatedOptions, {\n      useAggregation: {\n        since: \"18.1\",\n        message: \"Use the 'commonSeriesSettings.aggregation.enabled' or 'series.aggregation.enabled' option instead\"\n      },\n      \"argumentAxis.min\": {\n        since: \"18.2\",\n        message: \"Use the 'argumentAxis.visualRange' option instead\"\n      },\n      \"argumentAxis.max\": {\n        since: \"18.2\",\n        message: \"Use the 'argumentAxis.visualRange' option instead\"\n      },\n      \"valueAxis.min\": {\n        since: \"18.2\",\n        message: \"Use the 'valueAxis.visualRange' option instead\"\n      },\n      \"valueAxis.max\": {\n        since: \"18.2\",\n        message: \"Use the 'valueAxis.visualRange' option instead\"\n      },\n      zoomingMode: {\n        since: \"18.2\",\n        message: \"Use the 'zoomAndPan' option instead\"\n      },\n      scrollingMode: {\n        since: \"18.2\",\n        message: \"Use the 'zoomAndPan' option instead\"\n      }\n    });\n  },\n  _initCore: function _initCore() {\n    this.paneAxis = {};\n    this.callBase();\n  },\n  _correctAxes: function _correctAxes() {\n    this._correctValueAxes(true);\n  },\n  _getExtraOptions: _common.noop,\n  _createPanes: function _createPanes() {\n    var that = this;\n    var panes = that.option(\"panes\");\n    var panesNameCounter = 0;\n    var defaultPane;\n\n    if (!panes || _isArray(panes) && !panes.length) {\n      panes = DEFAULT_PANES;\n    }\n\n    that.callBase();\n    defaultPane = that.option(\"defaultPane\");\n    panes = (0, _extend2.extend)(true, [], _isArray(panes) ? panes : [panes]);\n    (0, _iterator.each)(panes, function (_, pane) {\n      pane.name = !(0, _type.isDefined)(pane.name) ? DEFAULT_PANE_NAME + panesNameCounter++ : pane.name;\n    });\n\n    if ((0, _type.isDefined)(defaultPane)) {\n      if (!doesPaneExist(panes, defaultPane)) {\n        that._incidentOccurred(\"W2101\", [defaultPane]);\n\n        defaultPane = panes[panes.length - 1].name;\n      }\n    } else {\n      defaultPane = panes[panes.length - 1].name;\n    }\n\n    that.defaultPane = defaultPane;\n    panes = that._isRotated() ? panes.reverse() : panes;\n    return panes;\n  },\n  _getAxisRenderingOptions: function _getAxisRenderingOptions() {\n    return {\n      axisType: \"xyAxes\",\n      drawingType: \"linear\"\n    };\n  },\n  _prepareAxisOptions: function _prepareAxisOptions(typeSelector, userOptions, rotated) {\n    return {\n      isHorizontal: \"argumentAxis\" === typeSelector !== rotated,\n      containerColor: this._themeManager.getOptions(\"containerBackgroundColor\")\n    };\n  },\n  _checkPaneName: function _checkPaneName(seriesTheme) {\n    var paneList = (0, _utils.map)(this.panes, function (pane) {\n      return pane.name;\n    });\n    seriesTheme.pane = seriesTheme.pane || this.defaultPane;\n    return (0, _array.inArray)(seriesTheme.pane, paneList) !== -1;\n  },\n  _getValueAxis: function _getValueAxis(paneName, axisName) {\n    var that = this;\n    var valueAxes = that._valueAxes;\n    var valueAxisOptions = that.option(\"valueAxis\") || {};\n    var valueAxesOptions = _isArray(valueAxisOptions) ? valueAxisOptions : [valueAxisOptions];\n\n    var rotated = that._isRotated();\n\n    var crosshairMargins = that._getCrosshairMargins();\n\n    var axisOptions;\n    var axis;\n    axisName = axisName || getFirstAxisNameForPane(valueAxes, paneName, that.defaultPane);\n    axis = findAxis(paneName, axisName, valueAxes);\n\n    if (!axis) {\n      axisOptions = findAxisOptions(valueAxes, valueAxesOptions, axisName);\n\n      if (!axisOptions) {\n        that._incidentOccurred(\"W2102\", [axisName]);\n\n        axisOptions = {\n          name: axisName,\n          priority: valueAxes.length\n        };\n      }\n\n      axis = that._createAxis(false, that._populateAxesOptions(\"valueAxis\", axisOptions, {\n        pane: paneName,\n        name: axisName,\n        optionPath: _isArray(valueAxisOptions) ? \"valueAxis[\".concat(axisOptions.priority, \"]\") : \"valueAxis\",\n        crosshairMargin: rotated ? crosshairMargins.y : crosshairMargins.x\n      }, rotated));\n      axis.applyVisualRangeSetter(that._getVisualRangeSetter());\n      valueAxes.push(axis);\n    }\n\n    axis.setPane(paneName);\n    return axis;\n  },\n  _correctValueAxes: function _correctValueAxes(needHideGrids) {\n    var that = this;\n\n    var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\n\n    var valueAxes = that._valueAxes;\n    var paneWithAxis = {};\n    that.series.forEach(function (series) {\n      var axis = series.getValueAxis();\n      paneWithAxis[axis.pane] = true;\n    });\n    that.panes.forEach(function (pane) {\n      var paneName = pane.name;\n\n      if (!paneWithAxis[paneName]) {\n        that._getValueAxis(paneName);\n      }\n\n      if (needHideGrids && synchronizeMultiAxes) {\n        hideGridsOnNonFirstValueAxisForPane(valueAxes.filter(function (axis) {\n          return axis.pane === paneName;\n        }));\n      }\n    });\n    that._valueAxes = valueAxes.filter(function (axis) {\n      if (!axis.pane) {\n        axis.setPane(that.defaultPane);\n      }\n\n      return doesPaneExist(that.panes, axis.pane);\n    }).sort(compareAxes);\n    var defaultAxis = this.getValueAxis();\n\n    that._valueAxes.forEach(function (axis) {\n      var optionPath = axis.getOptions().optionPath;\n\n      if (optionPath) {\n        var axesWithSamePath = that._valueAxes.filter(function (a) {\n          return a.getOptions().optionPath === optionPath;\n        });\n\n        if (axesWithSamePath.length > 1) {\n          if (axesWithSamePath.some(function (a) {\n            return a === defaultAxis;\n          })) {\n            axesWithSamePath.forEach(function (a) {\n              if (a !== defaultAxis) {\n                a.getOptions().optionPath = null;\n              }\n            });\n          } else {\n            axesWithSamePath.forEach(function (a, i) {\n              if (0 !== i) {\n                a.getOptions().optionPath = null;\n              }\n            });\n          }\n        }\n      }\n    });\n  },\n  _getSeriesForPane: function _getSeriesForPane(paneName) {\n    var paneSeries = [];\n    (0, _iterator.each)(this.series, function (_, oneSeries) {\n      if (oneSeries.pane === paneName) {\n        paneSeries.push(oneSeries);\n      }\n    });\n    return paneSeries;\n  },\n  _createPanesBorderOptions: function _createPanesBorderOptions() {\n    var commonBorderOptions = this._themeManager.getOptions(\"commonPaneSettings\").border;\n\n    var panesBorderOptions = {};\n    this.panes.forEach(function (pane) {\n      return panesBorderOptions[pane.name] = (0, _extend2.extend)(true, {}, commonBorderOptions, pane.border);\n    });\n    return panesBorderOptions;\n  },\n  _createScrollBar: function _createScrollBar() {\n    var that = this;\n    var scrollBarOptions = that._themeManager.getOptions(\"scrollBar\") || {};\n    var scrollBarGroup = that._scrollBarGroup;\n\n    if (scrollBarOptions.visible) {\n      scrollBarOptions.rotated = that._isRotated();\n      that._scrollBar = (that._scrollBar || new _scroll_bar2.default.ScrollBar(that._renderer, scrollBarGroup)).update(scrollBarOptions);\n    } else {\n      scrollBarGroup.linkRemove();\n      that._scrollBar && that._scrollBar.dispose();\n      that._scrollBar = null;\n    }\n  },\n  _prepareToRender: function _prepareToRender(drawOptions) {\n    var panesBorderOptions = this._createPanesBorderOptions();\n\n    this._createPanesBackground();\n\n    this._appendAxesGroups();\n\n    this._adjustViewport();\n\n    return panesBorderOptions;\n  },\n  _adjustViewport: function _adjustViewport() {\n    var that = this;\n\n    var series = that._getVisibleSeries();\n\n    var argumentAxis = that.getArgumentAxis();\n    var useAggregation = series.some(function (s) {\n      return s.useAggregation();\n    });\n\n    var adjustOnZoom = that._themeManager.getOptions(\"adjustOnZoom\");\n\n    var alignToBounds = !argumentAxis.dataVisualRangeIsReduced();\n\n    if (!useAggregation && !adjustOnZoom) {\n      return;\n    }\n\n    that._valueAxes.forEach(function (axis) {\n      return axis.adjust(alignToBounds);\n    });\n  },\n  _recreateSizeDependentObjects: function _recreateSizeDependentObjects(isCanvasChanged) {\n    var that = this;\n\n    var series = that._getVisibleSeries();\n\n    var useAggregation = series.some(function (s) {\n      return s.useAggregation();\n    });\n\n    var zoomChanged = that._isZooming();\n\n    if (!useAggregation) {\n      return;\n    }\n\n    that._argumentAxes.forEach(function (axis) {\n      axis.updateCanvas(that._canvas);\n    });\n\n    series.forEach(function (series) {\n      if (series.useAggregation() && (isCanvasChanged || zoomChanged || !series._useAllAggregatedPoints)) {\n        series.createPoints();\n      }\n    });\n\n    that._processSeriesFamilies();\n  },\n  _isZooming: function _isZooming() {\n    var that = this;\n    var argumentAxis = that.getArgumentAxis();\n\n    if (!argumentAxis || !argumentAxis.getTranslator()) {\n      return false;\n    }\n\n    var businessRange = argumentAxis.getTranslator().getBusinessRange();\n    var zoomRange = argumentAxis.getViewport();\n    var min = zoomRange ? zoomRange.min : 0;\n    var max = zoomRange ? zoomRange.max : 0;\n\n    if (\"logarithmic\" === businessRange.axisType) {\n      min = (0, _utils.getLog)(min, businessRange.base);\n      max = (0, _utils.getLog)(max, businessRange.base);\n    }\n\n    var viewportDistance = \"discrete\" === businessRange.axisType ? (0, _utils.getCategoriesInfo)(businessRange.categories, min, max).categories.length : Math.abs(max - min);\n    var precision = (0, _math.getPrecision)(viewportDistance);\n    precision = precision > 1 ? Math.pow(10, precision - 2) : 1;\n    var zoomChanged = Math.round((that._zoomLength - viewportDistance) * precision) / precision !== 0;\n    that._zoomLength = viewportDistance;\n    return zoomChanged;\n  },\n  _handleSeriesDataUpdated: function _handleSeriesDataUpdated() {\n    var that = this;\n    var viewport = new _range2.default.Range();\n    that.series.forEach(function (s) {\n      viewport.addRange(s.getArgumentRange());\n    });\n\n    that._argumentAxes.forEach(function (axis) {\n      axis.updateCanvas(that._canvas);\n      axis.setBusinessRange(viewport, that._axesReinitialized);\n    });\n\n    that.callBase();\n  },\n  _isLegendInside: function _isLegendInside() {\n    return this._legend && \"inside\" === this._legend.getPosition();\n  },\n  _isRotated: function _isRotated() {\n    return this._themeManager.getOptions(\"rotated\");\n  },\n  _getLayoutTargets: function _getLayoutTargets() {\n    return this.panes;\n  },\n  _applyClipRects: function _applyClipRects(panesBorderOptions) {\n    var that = this;\n\n    var canvasClipRectID = that._getCanvasClipRectID();\n\n    var i;\n\n    that._drawPanesBorders(panesBorderOptions);\n\n    that._createClipRectsForPanes();\n\n    for (i = 0; i < that._argumentAxes.length; i++) {\n      that._argumentAxes[i].applyClipRects(that._getElementsClipRectID(that._argumentAxes[i].pane), canvasClipRectID);\n    }\n\n    for (i = 0; i < that._valueAxes.length; i++) {\n      that._valueAxes[i].applyClipRects(that._getElementsClipRectID(that._valueAxes[i].pane), canvasClipRectID);\n    }\n\n    that._fillPanesBackground();\n  },\n  _updateLegendPosition: function _updateLegendPosition(drawOptions, legendHasInsidePosition) {\n    var that = this;\n\n    if (drawOptions.drawLegend && that._legend && legendHasInsidePosition) {\n      var panes = that.panes;\n      var newCanvas = (0, _extend2.extend)({}, panes[0].canvas);\n      var layoutManager = new _layout_manager2.default.LayoutManager();\n      newCanvas.right = panes[panes.length - 1].canvas.right;\n      newCanvas.bottom = panes[panes.length - 1].canvas.bottom;\n      layoutManager.setOptions({\n        width: 0,\n        height: 0\n      });\n      layoutManager.layoutElements([that._legend], newCanvas, _common.noop, [{\n        canvas: newCanvas\n      }], void 0);\n    }\n  },\n  _allowLegendInsidePosition: function _allowLegendInsidePosition() {\n    return true;\n  },\n  _applyExtraSettings: function _applyExtraSettings(series) {\n    var that = this;\n\n    var paneIndex = that._getPaneIndex(series.pane);\n\n    var panesClipRects = that._panesClipRects;\n    var wideClipRect = panesClipRects.wide[paneIndex];\n    series.setClippingParams(panesClipRects.base[paneIndex].id, wideClipRect && wideClipRect.id, that._getPaneBorderVisibility(paneIndex));\n  },\n  _updatePanesCanvases: function _updatePanesCanvases(drawOptions) {\n    if (!drawOptions.recreateCanvas) {\n      return;\n    }\n\n    (0, _utils.updatePanesCanvases)(this.panes, this._canvas, this._isRotated());\n  },\n  _normalizePanesHeight: function _normalizePanesHeight() {\n    (0, _utils.normalizePanesHeight)(this.panes);\n  },\n  _renderScaleBreaks: function _renderScaleBreaks() {\n    this._valueAxes.concat(this._argumentAxes).forEach(function (axis) {\n      axis.drawScaleBreaks();\n    });\n  },\n  _applyPointMarkersAutoHiding: function _applyPointMarkersAutoHiding() {\n    var that = this;\n\n    if (!that._themeManager.getOptions(\"autoHidePointMarkers\")) {\n      that.series.forEach(function (s) {\n        return s.autoHidePointMarkers = false;\n      });\n      return;\n    }\n\n    that.panes.forEach(function (pane) {\n      var series = that.series.filter(function (s) {\n        return s.pane === pane.name && s.usePointsToDefineAutoHiding();\n      });\n      var argAxis = that.getArgumentAxis();\n      var argVisualRange = argAxis.visualRange();\n      var argTranslator = argAxis.getTranslator();\n      var argAxisType = argAxis.getOptions().type;\n\n      var argViewPortFilter = _range_data_calculator2.default.getViewPortFilter(argVisualRange || {});\n\n      var points = [];\n      var overloadedSeries = {};\n      series.forEach(function (s) {\n        var valAxis = s.getValueAxis();\n        var valVisualRange = valAxis.visualRange();\n        var valTranslator = valAxis.getTranslator();\n        var seriesIndex = that.series.indexOf(s);\n\n        var valViewPortFilter = _range_data_calculator2.default.getViewPortFilter(valVisualRange || {});\n\n        overloadedSeries[seriesIndex] = {};\n        series.forEach(function (sr) {\n          return overloadedSeries[seriesIndex][that.series.indexOf(sr)] = 0;\n        });\n        var seriesPoints = [];\n        s.getPoints().filter(function (p) {\n          return p.getOptions().visible && argViewPortFilter(p.argument) && (valViewPortFilter(p.getMinValue(true)) || valViewPortFilter(p.getMaxValue(true)));\n        }).forEach(function (p) {\n          var tp = {\n            seriesIndex: seriesIndex,\n            argument: p.argument,\n            value: p.getMaxValue(true),\n            size: p.bubbleSize || p.getOptions().size\n          };\n\n          if (p.getMinValue(true) !== p.getMaxValue(true)) {\n            var mp = (0, _extend2.extend)({}, tp);\n            mp.value = p.getMinValue(true);\n            mp.x = argTranslator.to(mp.argument, 1);\n            mp.y = valTranslator.to(mp.value, 1);\n            seriesPoints.push(mp);\n          }\n\n          tp.x = argTranslator.to(tp.argument, 1);\n          tp.y = valTranslator.to(tp.value, 1);\n          seriesPoints.push(tp);\n        });\n        overloadedSeries[seriesIndex].pointsCount = seriesPoints.length;\n        overloadedSeries[seriesIndex].total = 0;\n        overloadedSeries[seriesIndex].continuousSeries = 0;\n        points = points.concat(seriesPoints);\n      });\n      var sortingCallback = \"discrete\" === argAxisType ? function (p1, p2) {\n        return argVisualRange.categories.indexOf(p1.argument) - argVisualRange.categories.indexOf(p2.argument);\n      } : function (p1, p2) {\n        return p1.argument - p2.argument;\n      };\n      points.sort(sortingCallback);\n      var isContinuousSeries = false;\n\n      for (var i = 0; i < points.length - 1; i++) {\n        var curPoint = points[i];\n        var size = curPoint.size;\n\n        if ((0, _type.isDefined)(curPoint.x) && (0, _type.isDefined)(curPoint.y)) {\n          for (var j = i + 1; j < points.length; j++) {\n            var nextPoint = points[j];\n            var next_x = (0, _type.isDefined)(nextPoint) ? nextPoint.x : null;\n            var next_y = (0, _type.isDefined)(nextPoint) ? nextPoint.y : null;\n\n            if (!(0, _type.isDefined)(next_x) || Math.abs(curPoint.x - next_x) >= size) {\n              isContinuousSeries &= j !== i + 1;\n              break;\n            } else {\n              var distance = (0, _type.isDefined)(next_x) && (0, _type.isDefined)(next_y) && Math.sqrt(Math.pow(curPoint.x - next_x, 2) + Math.pow(curPoint.y - next_y, 2));\n\n              if (distance && distance < size) {\n                overloadedSeries[curPoint.seriesIndex][nextPoint.seriesIndex]++;\n                overloadedSeries[curPoint.seriesIndex].total++;\n\n                if (!isContinuousSeries) {\n                  overloadedSeries[curPoint.seriesIndex].continuousSeries++;\n                  isContinuousSeries = true;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      series.forEach(function (s) {\n        var seriesIndex = that.series.indexOf(s);\n        s.autoHidePointMarkers = false;\n        var tickCount = argAxis.getTicksValues().majorTicksValues.length;\n\n        if (s.autoHidePointMarkersEnabled() && (\"discrete\" === argAxisType || overloadedSeries[seriesIndex].pointsCount > tickCount)) {\n          for (var index in overloadedSeries[seriesIndex]) {\n            var _i = parseInt(index);\n\n            if (isNaN(_i) || overloadedSeries[seriesIndex].total / overloadedSeries[seriesIndex].continuousSeries < 3) {\n              continue;\n            }\n\n            if (_i === seriesIndex) {\n              if (2 * overloadedSeries[_i][_i] >= overloadedSeries[_i].pointsCount) {\n                s.autoHidePointMarkers = true;\n                break;\n              }\n            } else {\n              if (overloadedSeries[seriesIndex].total >= overloadedSeries[seriesIndex].pointsCount) {\n                s.autoHidePointMarkers = true;\n                break;\n              }\n            }\n          }\n        }\n      });\n    });\n  },\n  _renderAxes: function _renderAxes(drawOptions, panesBorderOptions) {\n    function calculateTitlesWidth(axes) {\n      return axes.map(function (axis) {\n        if (!axis.getTitle) {\n          return 0;\n        }\n\n        var title = axis.getTitle();\n        return title ? title.bBox.width : 0;\n      });\n    }\n\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\n\n    var extendedArgAxes = (that._scrollBar ? [that._scrollBar] : []).concat(that._argumentAxes);\n    var verticalAxes = rotated ? extendedArgAxes : that._valueAxes;\n    var horizontalAxes = rotated ? that._valueAxes : extendedArgAxes;\n    var allAxes = verticalAxes.concat(horizontalAxes);\n\n    that._normalizePanesHeight();\n\n    that._updatePanesCanvases(drawOptions);\n\n    var panesCanvases = that.panes.reduce(function (canvases, pane) {\n      canvases[pane.name] = (0, _extend2.extend)({}, pane.canvas);\n      return canvases;\n    }, {});\n    var paneSizes = that.panes.reduce(function (sizes, pane) {\n      sizes[pane.name] = {\n        height: pane.height,\n        unit: pane.unit\n      };\n      return sizes;\n    }, {});\n    var cleanPanesCanvases = (0, _extend2.extend)(true, {}, panesCanvases);\n\n    if (!drawOptions.adjustAxes) {\n      drawAxesWithTicks(verticalAxes, !rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\n      drawAxesWithTicks(horizontalAxes, rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\n      performActionOnAxes(allAxes, \"prepareAnimation\");\n\n      that._renderScaleBreaks();\n\n      return false;\n    }\n\n    if (that._scrollBar) {\n      that._scrollBar.setPane(that.panes);\n    }\n\n    var vAxesMargins = {\n      panes: {}\n    };\n    var hAxesMargins = getHorizontalAxesMargins(horizontalAxes, function (axis) {\n      return axis.estimateMargins(panesCanvases[axis.pane]);\n    });\n    panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n    drawAxesWithTicks(verticalAxes, !rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\n    vAxesMargins = getVerticalAxesMargins(verticalAxes);\n    panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n    drawAxesWithTicks(horizontalAxes, rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\n    hAxesMargins = getHorizontalAxesMargins(horizontalAxes, getAxisMargins);\n    panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n    var oldTitlesWidth = calculateTitlesWidth(verticalAxes);\n    performActionOnAxes(allAxes, \"updateSize\", panesCanvases, axisAnimationEnabled(drawOptions, that._getVisibleSeries()));\n    horizontalAxes.forEach(shiftAxis(\"top\", \"bottom\"));\n    verticalAxes.forEach(shiftAxis(\"left\", \"right\"));\n\n    that._renderScaleBreaks();\n\n    that.panes.forEach(function (pane) {\n      (0, _extend2.extend)(pane.canvas, panesCanvases[pane.name]);\n    });\n\n    that._valueAxes.forEach(function (axis) {\n      axis.setInitRange();\n    });\n\n    verticalAxes.forEach(function (axis, i) {\n      if (axis.hasWrap && axis.hasWrap()) {\n        var title = axis.getTitle();\n        var newTitleWidth = title ? title.bBox.width : 0;\n        var offset = newTitleWidth - oldTitlesWidth[i];\n\n        if (\"right\" === axis.getOptions().position) {\n          vAxesMargins.right += offset;\n        } else {\n          vAxesMargins.left += offset;\n          that.panes.forEach(function (_ref) {\n            var name = _ref.name;\n            return vAxesMargins.panes[name].left += offset;\n          });\n        }\n\n        panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n        performActionOnAxes(allAxes, \"updateSize\", panesCanvases, false, false);\n        oldTitlesWidth = calculateTitlesWidth(verticalAxes);\n      }\n    });\n    return cleanPanesCanvases;\n  },\n  checkForMoreSpaceForPanesCanvas: function checkForMoreSpaceForPanesCanvas() {\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    var panesAreCustomSized = that.panes.filter(function (p) {\n      return p.unit;\n    }).length === that.panes.length;\n    var needSpace = false;\n\n    if (panesAreCustomSized) {\n      var needHorizontalSpace = 0;\n      var needVerticalSpace = 0;\n\n      if (rotated) {\n        var argAxisRightMargin = that.getArgumentAxis().getMargins().right;\n        var rightPanesIndent = Math.min.apply(Math, that.panes.map(function (p) {\n          return p.canvas.right;\n        }));\n        needHorizontalSpace = that._canvas.right + argAxisRightMargin - rightPanesIndent;\n      } else {\n        var argAxisBottomMargin = that.getArgumentAxis().getMargins().bottom;\n        var bottomPanesIndent = Math.min.apply(Math, that.panes.map(function (p) {\n          return p.canvas.bottom;\n        }));\n        needVerticalSpace = that._canvas.bottom + argAxisBottomMargin - bottomPanesIndent;\n      }\n\n      needSpace = needHorizontalSpace > 0 || needVerticalSpace > 0 ? {\n        width: needHorizontalSpace,\n        height: needVerticalSpace\n      } : false;\n\n      if (0 !== needVerticalSpace) {\n        var realSize = that.getSize();\n        var customSize = that.option(\"size\");\n        var container = that._$element[0];\n        var containerHasStyledHeight = !!container.style.height || (0, _utils.checkElementHasPropertyFromStyleSheet)(container, \"height\");\n\n        if (!rotated && !(customSize && customSize.height) && !containerHasStyledHeight) {\n          that._forceResize(realSize.width, realSize.height + needVerticalSpace);\n\n          needSpace = false;\n        }\n      }\n    } else {\n      needSpace = that.layoutManager.needMoreSpaceForPanesCanvas(that._getLayoutTargets(), rotated, function (pane) {\n        return {\n          width: rotated && !!pane.unit,\n          height: !rotated && !!pane.unit\n        };\n      });\n    }\n\n    return needSpace;\n  },\n  _forceResize: function _forceResize(width, height) {\n    this._renderer.resize(width, height);\n\n    this._updateSize();\n\n    this._setContentSize();\n\n    this._preserveOriginalCanvas();\n\n    this._updateCanvasClipRect(this._canvas);\n  },\n  _shrinkAxes: function _shrinkAxes(sizeShortage, panesCanvases) {\n    if (!sizeShortage || !panesCanvases) {\n      return;\n    }\n\n    this._renderer.stopAllAnimations(true);\n\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    var extendedArgAxes = (that._scrollBar ? [that._scrollBar] : []).concat(that._argumentAxes);\n    var verticalAxes = rotated ? extendedArgAxes : that._valueAxes;\n    var horizontalAxes = rotated ? that._valueAxes : extendedArgAxes;\n    var allAxes = verticalAxes.concat(horizontalAxes);\n\n    if (sizeShortage.width || sizeShortage.height) {\n      checkUsedSpace(sizeShortage, \"height\", horizontalAxes, getHorizontalAxesMargins);\n      checkUsedSpace(sizeShortage, \"width\", verticalAxes, getVerticalAxesMargins);\n      performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\n      var paneSizes = that.panes.reduce(function (sizes, pane) {\n        sizes[pane.name] = {\n          height: pane.height,\n          unit: pane.unit\n        };\n        return sizes;\n      }, {});\n      panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, getVerticalAxesMargins(verticalAxes), getHorizontalAxesMargins(horizontalAxes, getAxisMargins));\n      performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\n      horizontalAxes.forEach(shiftAxis(\"top\", \"bottom\"));\n      verticalAxes.forEach(shiftAxis(\"left\", \"right\"));\n      that.panes.forEach(function (pane) {\n        return (0, _extend2.extend)(pane.canvas, panesCanvases[pane.name]);\n      });\n    }\n  },\n  _getPanesParameters: function _getPanesParameters() {\n    var that = this;\n    var panes = that.panes;\n    var i;\n    var params = [];\n\n    for (i = 0; i < panes.length; i++) {\n      if (that._getPaneBorderVisibility(i)) {\n        params.push({\n          coords: panes[i].borderCoords,\n          clipRect: that._panesClipRects.fixed[i]\n        });\n      }\n    }\n\n    return params;\n  },\n  _createCrosshairCursor: function _createCrosshairCursor() {\n    var that = this;\n    var options = that._themeManager.getOptions(\"crosshair\") || {};\n    var argumentAxis = that.getArgumentAxis();\n    var axes = !that._isRotated() ? [[argumentAxis], that._valueAxes] : [that._valueAxes, [argumentAxis]];\n    var parameters = {\n      canvas: that._getCommonCanvas(),\n      panes: that._getPanesParameters(),\n      axes: axes\n    };\n\n    if (!options || !options.enabled) {\n      return;\n    }\n\n    if (!that._crosshair) {\n      that._crosshair = new _crosshair2.default.Crosshair(that._renderer, options, parameters, that._crosshairCursorGroup);\n    } else {\n      that._crosshair.update(options, parameters);\n    }\n\n    that._crosshair.render();\n  },\n  _getCommonCanvas: function _getCommonCanvas() {\n    var i;\n    var canvas;\n    var commonCanvas;\n    var panes = this.panes;\n\n    for (i = 0; i < panes.length; i++) {\n      canvas = panes[i].canvas;\n\n      if (!commonCanvas) {\n        commonCanvas = (0, _extend2.extend)({}, canvas);\n      } else {\n        commonCanvas.right = canvas.right;\n        commonCanvas.bottom = canvas.bottom;\n      }\n    }\n\n    return commonCanvas;\n  },\n  _createPanesBackground: function _createPanesBackground() {\n    var that = this;\n\n    var defaultBackgroundColor = that._themeManager.getOptions(\"commonPaneSettings\").backgroundColor;\n\n    var backgroundColor;\n    var renderer = that._renderer;\n    var rect;\n    var i;\n    var rects = [];\n\n    that._panesBackgroundGroup.clear();\n\n    for (i = 0; i < that.panes.length; i++) {\n      backgroundColor = that.panes[i].backgroundColor || defaultBackgroundColor;\n\n      if (!backgroundColor || \"none\" === backgroundColor) {\n        rects.push(null);\n        continue;\n      }\n\n      rect = renderer.rect(0, 0, 0, 0).attr({\n        fill: backgroundColor,\n        \"stroke-width\": 0\n      }).append(that._panesBackgroundGroup);\n      rects.push(rect);\n    }\n\n    that.panesBackground = rects;\n  },\n  _fillPanesBackground: function _fillPanesBackground() {\n    var that = this;\n    var bc;\n    (0, _iterator.each)(that.panes, function (i, pane) {\n      bc = pane.borderCoords;\n\n      if (null !== that.panesBackground[i]) {\n        that.panesBackground[i].attr({\n          x: bc.left,\n          y: bc.top,\n          width: bc.width,\n          height: bc.height\n        });\n      }\n    });\n  },\n  _calcPaneBorderCoords: function _calcPaneBorderCoords(pane) {\n    var canvas = pane.canvas;\n    var bc = pane.borderCoords = pane.borderCoords || {};\n    bc.left = canvas.left;\n    bc.top = canvas.top;\n    bc.right = canvas.width - canvas.right;\n    bc.bottom = canvas.height - canvas.bottom;\n    bc.width = Math.max(bc.right - bc.left, 0);\n    bc.height = Math.max(bc.bottom - bc.top, 0);\n  },\n  _drawPanesBorders: function _drawPanesBorders(panesBorderOptions) {\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    that._panesBorderGroup.linkRemove().clear();\n\n    (0, _iterator.each)(that.panes, function (i, pane) {\n      var bc;\n      var borderOptions = panesBorderOptions[pane.name];\n      var segmentRectParams;\n      var attr = {\n        fill: \"none\",\n        stroke: borderOptions.color,\n        \"stroke-opacity\": borderOptions.opacity,\n        \"stroke-width\": borderOptions.width,\n        dashStyle: borderOptions.dashStyle,\n        \"stroke-linecap\": \"square\"\n      };\n\n      that._calcPaneBorderCoords(pane, rotated);\n\n      if (!borderOptions.visible) {\n        return;\n      }\n\n      bc = pane.borderCoords;\n      segmentRectParams = prepareSegmentRectPoints(bc.left, bc.top, bc.width, bc.height, borderOptions);\n\n      that._renderer.path(segmentRectParams.points, segmentRectParams.pathType).attr(attr).append(that._panesBorderGroup);\n    });\n\n    that._panesBorderGroup.linkAppend();\n  },\n  _createClipRect: function _createClipRect(clipArray, index, left, top, width, height) {\n    var that = this;\n    var clipRect = clipArray[index];\n\n    if (!clipRect) {\n      clipRect = that._renderer.clipRect(left, top, width, height);\n      clipArray[index] = clipRect;\n    } else {\n      clipRect.attr({\n        x: left,\n        y: top,\n        width: width,\n        height: height\n      });\n    }\n  },\n  _createClipRectsForPanes: function _createClipRectsForPanes() {\n    var that = this;\n    var canvas = that._canvas;\n    (0, _iterator.each)(that.panes, function (i, pane) {\n      var needWideClipRect = false;\n      var bc = pane.borderCoords;\n      var left = bc.left;\n      var top = bc.top;\n      var width = bc.width;\n      var height = bc.height;\n      var panesClipRects = that._panesClipRects;\n\n      that._createClipRect(panesClipRects.fixed, i, left, top, width, height);\n\n      that._createClipRect(panesClipRects.base, i, left, top, width, height);\n\n      (0, _iterator.each)(that.series, function (_, series) {\n        if (series.pane === pane.name && (series.isFinancialSeries() || series.areErrorBarsVisible())) {\n          needWideClipRect = true;\n        }\n      });\n\n      if (needWideClipRect) {\n        if (that._isRotated()) {\n          top = 0;\n          height = canvas.height;\n        } else {\n          left = 0;\n          width = canvas.width;\n        }\n\n        that._createClipRect(panesClipRects.wide, i, left, top, width, height);\n      } else {\n        panesClipRects.wide[i] = null;\n      }\n    });\n  },\n  _getPaneBorderVisibility: function _getPaneBorderVisibility(paneIndex) {\n    var commonPaneBorderVisible = this._themeManager.getOptions(\"commonPaneSettings\").border.visible;\n\n    var pane = this.panes[paneIndex] || {};\n    var paneBorder = pane.border || {};\n    return \"visible\" in paneBorder ? paneBorder.visible : commonPaneBorderVisible;\n  },\n  _getCanvasForPane: function _getCanvasForPane(paneName) {\n    var panes = this.panes;\n    var panesNumber = panes.length;\n    var i;\n\n    for (i = 0; i < panesNumber; i++) {\n      if (panes[i].name === paneName) {\n        return panes[i].canvas;\n      }\n    }\n  },\n  _getTrackerSettings: function _getTrackerSettings() {\n    var that = this;\n    var themeManager = that._themeManager;\n    return (0, _extend2.extend)(this.callBase(), {\n      chart: that,\n      rotated: that._isRotated(),\n      crosshair: that._getCrosshairOptions().enabled ? that._crosshair : null,\n      stickyHovering: themeManager.getOptions(\"stickyHovering\")\n    });\n  },\n  _resolveLabelOverlappingStack: function _resolveLabelOverlappingStack() {\n    var that = this;\n\n    var isRotated = that._isRotated();\n\n    var shiftDirection = isRotated ? function (box, length) {\n      return {\n        x: box.x - length,\n        y: box.y\n      };\n    } : function (box, length) {\n      return {\n        x: box.x,\n        y: box.y - length\n      };\n    };\n    (0, _iterator.each)(that._getStackPoints(), function (_, stacks) {\n      (0, _iterator.each)(stacks, function (_, points) {\n        _base_chart.overlapping.resolveLabelOverlappingInOneDirection(points, that._getCommonCanvas(), isRotated, shiftDirection, function (a, b) {\n          var coordPosition = isRotated ? 1 : 0;\n          var figureCenter1 = a.labels[0].getFigureCenter()[coordPosition];\n          var figureCenter12 = b.labels[0].getFigureCenter()[coordPosition];\n\n          if (figureCenter1 - figureCenter12 === 0) {\n            return (a.value() - b.value()) * (a.labels[0].getPoint().series.getValueAxis().getTranslator().isInverted() ? -1 : 1);\n          }\n\n          return 0;\n        });\n      });\n    });\n  },\n  _getStackPoints: function _getStackPoints() {\n    var stackPoints = {};\n\n    var visibleSeries = this._getVisibleSeries();\n\n    (0, _iterator.each)(visibleSeries, function (_, singleSeries) {\n      var points = singleSeries.getPoints();\n      var stackName = singleSeries.getStackName() || null;\n      (0, _iterator.each)(points, function (_, point) {\n        var argument = point.argument;\n\n        if (!stackPoints[argument]) {\n          stackPoints[argument] = {};\n        }\n\n        if (!stackPoints[argument][stackName]) {\n          stackPoints[argument][stackName] = [];\n        }\n\n        stackPoints[argument][stackName].push(point);\n      });\n    });\n    return stackPoints;\n  },\n  _getCrosshairOptions: function _getCrosshairOptions() {\n    return this._getOption(\"crosshair\");\n  },\n  zoomArgument: function zoomArgument(min, max) {\n    var that = this;\n\n    if (!that._initialized || !(0, _type.isDefined)(min) && !(0, _type.isDefined)(max)) {\n      return;\n    }\n\n    that.getArgumentAxis().visualRange([min, max]);\n  },\n  resetVisualRange: function resetVisualRange() {\n    var that = this;\n    var axes = that._argumentAxes;\n    var nonVirtualArgumentAxis = that.getArgumentAxis();\n    axes.forEach(function (axis) {\n      axis.resetVisualRange(nonVirtualArgumentAxis !== axis);\n\n      that._applyCustomVisualRangeOption(axis);\n    });\n    that.callBase();\n  },\n  getVisibleArgumentBounds: function getVisibleArgumentBounds() {\n    var translator = this._argumentAxes[0].getTranslator();\n\n    var range = translator.getBusinessRange();\n    var isDiscrete = \"discrete\" === range.axisType;\n    var categories = range.categories;\n    return {\n      minVisible: isDiscrete ? range.minVisible || categories[0] : range.minVisible,\n      maxVisible: isDiscrete ? range.maxVisible || categories[categories.length - 1] : range.maxVisible\n    };\n  },\n  _change_FULL_RENDER: function _change_FULL_RENDER() {\n    this.callBase();\n\n    if (this._changes.has(VISUAL_RANGE)) {\n      this._raiseZoomEndHandlers();\n    }\n  },\n  _getAxesForScaling: function _getAxesForScaling() {\n    return [this.getArgumentAxis()].concat(this._valueAxes);\n  },\n  _applyVisualRangeByVirtualAxes: function _applyVisualRangeByVirtualAxes(axis, range) {\n    var that = this;\n\n    if (axis.isArgumentAxis) {\n      if (axis !== that.getArgumentAxis()) {\n        return true;\n      }\n\n      that._argumentAxes.filter(function (a) {\n        return a !== axis;\n      }).forEach(function (a) {\n        return a.visualRange(range, {\n          start: true,\n          end: true\n        });\n      });\n    }\n\n    return false;\n  },\n  _raiseZoomEndHandlers: function _raiseZoomEndHandlers() {\n    this._argumentAxes.forEach(function (axis) {\n      return axis.handleZoomEnd();\n    });\n\n    this.callBase();\n  },\n  _setOptionsByReference: function _setOptionsByReference() {\n    this.callBase();\n    (0, _extend2.extend)(this._optionsByReference, {\n      \"argumentAxis.visualRange\": true\n    });\n  },\n  option: function option() {\n    var option = this.callBase.apply(this, arguments);\n\n    if (\"array\" === (0, _type.type)(this._options.valueAxis)) {\n      for (var i = 0; i < this._options.valueAxis.length; i++) {\n        var optionPath = \"valueAxis[\".concat(i, \"].visualRange\");\n        this._optionsByReference[optionPath] = true;\n      }\n    }\n\n    return option;\n  },\n  _notifyVisualRange: function _notifyVisualRange() {\n    var that = this;\n    var argAxis = that._argumentAxes[0];\n    var argumentVisualRange = (0, _utils.convertVisualRangeObject)(argAxis.visualRange(), !_isArray(that.option(\"argumentAxis.visualRange\")));\n\n    if (!argAxis.skipEventRising || !(0, _utils.rangesAreEqual)(argumentVisualRange, that.option(\"argumentAxis.visualRange\"))) {\n      that.option(\"argumentAxis.visualRange\", argumentVisualRange);\n    } else {\n      argAxis.skipEventRising = null;\n    }\n\n    that.callBase();\n  }\n});\n\ndxChart.addPlugin(require(\"./chart_components/shutter_zoom\"));\ndxChart.addPlugin(require(\"./chart_components/zoom_and_pan\"));\ndxChart.addPlugin(require(\"./core/annotations\").plugins.core);\ndxChart.addPlugin(require(\"./core/annotations\").plugins.chart);\n(0, _component_registrator2.default)(\"dxChart\", dxChart);\nmodule.exports = dxChart;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/viz/chart.js"],"names":["_common","require","_extend2","_array","_iterator","_component_registrator","_component_registrator2","_interopRequireDefault","_utils","_type","_math","_base_chart","_layout_manager","_layout_manager2","_multi_axes_synchronizer","_multi_axes_synchronizer2","_advanced_chart","_scroll_bar","_scroll_bar2","_crosshair","_crosshair2","_range_data_calculator","_range_data_calculator2","_range","_range2","obj","__esModule","DEFAULT_PANE_NAME","VISUAL_RANGE","DEFAULT_PANES","name","border","_isArray","Array","isArray","getFirstAxisNameForPane","axes","paneName","defaultPane","result","i","length","pane","changeVisibilityAxisGrids","axis","gridVisibility","minorGridVisibility","gridOpt","getOptions","grid","minorGridOpt","minorGrid","visible","hideGridsOnNonFirstValueAxisForPane","axesForPane","axisShown","hiddenStubAxis","some","minorGridOptions","gridOptions","forEach","getTranslator","getBusinessRange","isEmpty","push","findAxisOptions","valueAxes","valueAxesOptions","axisName","axInd","priority","findAxis","compareAxes","a","b","doesPaneExist","panes","found","each","_","prepareSegmentRectPoints","left","top","width","height","borderOptions","maxSW","sw","newSW","right","bottom","points","segments","segmentSequence","visiblyOpt","prevSegmentVisibility","allSegment","seg","visibility","segmentVisibility","slice","segment","concat","pathType","accumulate","field","src1","src2","auxSpacing","val1","val2","pickMax","pickMaxValue","Math","max","getAxisMargins","getMargins","getHorizontalAxesMargins","getMarginsFunc","reduce","margins","axisMargins","paneMargins","spacing","getMultipleAxesSpacing","getVerticalAxesMargins","performActionOnAxes","action","actionArgument1","actionArgument2","actionArgument3","shrinkCanvases","isRotated","canvases","sizes","verticalMargins","horizontalMargins","getMargin","side","m","indexOf","getMaxMargin","margins1","margins2","getOriginalField","toUpperCase","shrink","paneNames","sizeField","startMargin","endMargin","oppositeMargins","sort","p1","p2","canvas","margin","firstPane","emptySpace","space","PANE_PADDING","totalCustomSpace","Object","keys","prev","key","unit","offset","paneSize","floor","drawAxesWithTicks","condition","panesBorderOptions","default","synchronize","shiftAxis","side1","side2","shifts","shift","getCommonSize","size","checkUsedSpace","sizeShortage","getMarginFunc","axisAnimationEnabled","drawOptions","series","pointsCount","sum","s","getPoints","animate","animationPointsLimit","dxChart","AdvancedChart","inherit","_themeSection","_fontFields","_setDeprecatedOptions","callBase","apply","arguments","extend","_deprecatedOptions","useAggregation","since","message","zoomingMode","scrollingMode","_initCore","paneAxis","_correctAxes","_correctValueAxes","_getExtraOptions","noop","_createPanes","that","option","panesNameCounter","isDefined","_incidentOccurred","_isRotated","reverse","_getAxisRenderingOptions","axisType","drawingType","_prepareAxisOptions","typeSelector","userOptions","rotated","isHorizontal","containerColor","_themeManager","_checkPaneName","seriesTheme","paneList","map","inArray","_getValueAxis","_valueAxes","valueAxisOptions","crosshairMargins","_getCrosshairMargins","axisOptions","_createAxis","_populateAxesOptions","optionPath","crosshairMargin","y","x","applyVisualRangeSetter","_getVisualRangeSetter","setPane","needHideGrids","synchronizeMultiAxes","paneWithAxis","getValueAxis","filter","defaultAxis","axesWithSamePath","_getSeriesForPane","paneSeries","oneSeries","_createPanesBorderOptions","commonBorderOptions","_createScrollBar","scrollBarOptions","scrollBarGroup","_scrollBarGroup","_scrollBar","ScrollBar","_renderer","update","linkRemove","dispose","_prepareToRender","_createPanesBackground","_appendAxesGroups","_adjustViewport","_getVisibleSeries","argumentAxis","getArgumentAxis","adjustOnZoom","alignToBounds","dataVisualRangeIsReduced","adjust","_recreateSizeDependentObjects","isCanvasChanged","zoomChanged","_isZooming","_argumentAxes","updateCanvas","_canvas","_useAllAggregatedPoints","createPoints","_processSeriesFamilies","businessRange","zoomRange","getViewport","min","getLog","base","viewportDistance","getCategoriesInfo","categories","abs","precision","getPrecision","pow","round","_zoomLength","_handleSeriesDataUpdated","viewport","Range","addRange","getArgumentRange","setBusinessRange","_axesReinitialized","_isLegendInside","_legend","getPosition","_getLayoutTargets","_applyClipRects","canvasClipRectID","_getCanvasClipRectID","_drawPanesBorders","_createClipRectsForPanes","applyClipRects","_getElementsClipRectID","_fillPanesBackground","_updateLegendPosition","legendHasInsidePosition","drawLegend","newCanvas","layoutManager","LayoutManager","setOptions","layoutElements","_allowLegendInsidePosition","_applyExtraSettings","paneIndex","_getPaneIndex","panesClipRects","_panesClipRects","wideClipRect","wide","setClippingParams","id","_getPaneBorderVisibility","_updatePanesCanvases","recreateCanvas","updatePanesCanvases","_normalizePanesHeight","normalizePanesHeight","_renderScaleBreaks","drawScaleBreaks","_applyPointMarkersAutoHiding","autoHidePointMarkers","usePointsToDefineAutoHiding","argAxis","argVisualRange","visualRange","argTranslator","argAxisType","type","argViewPortFilter","getViewPortFilter","overloadedSeries","valAxis","valVisualRange","valTranslator","seriesIndex","valViewPortFilter","sr","seriesPoints","p","argument","getMinValue","getMaxValue","tp","value","bubbleSize","mp","to","total","continuousSeries","sortingCallback","isContinuousSeries","curPoint","j","nextPoint","next_x","next_y","distance","sqrt","tickCount","getTicksValues","majorTicksValues","autoHidePointMarkersEnabled","index","_i","parseInt","isNaN","_renderAxes","calculateTitlesWidth","getTitle","title","bBox","extendedArgAxes","verticalAxes","horizontalAxes","allAxes","panesCanvases","paneSizes","cleanPanesCanvases","adjustAxes","vAxesMargins","hAxesMargins","estimateMargins","oldTitlesWidth","setInitRange","hasWrap","newTitleWidth","position","_ref","checkForMoreSpaceForPanesCanvas","panesAreCustomSized","needSpace","needHorizontalSpace","needVerticalSpace","argAxisRightMargin","rightPanesIndent","argAxisBottomMargin","bottomPanesIndent","realSize","getSize","customSize","container","_$element","containerHasStyledHeight","style","checkElementHasPropertyFromStyleSheet","_forceResize","needMoreSpaceForPanesCanvas","resize","_updateSize","_setContentSize","_preserveOriginalCanvas","_updateCanvasClipRect","_shrinkAxes","stopAllAnimations","_getPanesParameters","params","coords","borderCoords","clipRect","fixed","_createCrosshairCursor","options","parameters","_getCommonCanvas","enabled","Crosshair","_crosshairCursorGroup","render","commonCanvas","defaultBackgroundColor","backgroundColor","renderer","rect","rects","_panesBackgroundGroup","clear","attr","fill","append","panesBackground","bc","_calcPaneBorderCoords","_panesBorderGroup","segmentRectParams","stroke","color","opacity","dashStyle","path","linkAppend","_createClipRect","clipArray","needWideClipRect","isFinancialSeries","areErrorBarsVisible","commonPaneBorderVisible","paneBorder","_getCanvasForPane","panesNumber","_getTrackerSettings","themeManager","chart","crosshair","_getCrosshairOptions","stickyHovering","_resolveLabelOverlappingStack","shiftDirection","box","_getStackPoints","stacks","overlapping","resolveLabelOverlappingInOneDirection","coordPosition","figureCenter1","labels","getFigureCenter","figureCenter12","getPoint","isInverted","stackPoints","visibleSeries","singleSeries","stackName","getStackName","point","_getOption","zoomArgument","_initialized","resetVisualRange","nonVirtualArgumentAxis","_applyCustomVisualRangeOption","getVisibleArgumentBounds","translator","range","isDiscrete","minVisible","maxVisible","_change_FULL_RENDER","_changes","has","_raiseZoomEndHandlers","_getAxesForScaling","_applyVisualRangeByVirtualAxes","isArgumentAxis","start","end","handleZoomEnd","_setOptionsByReference","_optionsByReference","_options","valueAxis","_notifyVisualRange","argumentVisualRange","convertVisualRangeObject","skipEventRising","rangesAreEqual","addPlugin","plugins","core","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/chart.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _common = require(\"../core/utils/common\");\r\nvar _extend2 = require(\"../core/utils/extend\");\r\nvar _array = require(\"../core/utils/array\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _component_registrator = require(\"../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _utils = require(\"./core/utils\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _math = require(\"../core/utils/math\");\r\nvar _base_chart = require(\"./chart_components/base_chart\");\r\nvar _layout_manager = require(\"./chart_components/layout_manager\");\r\nvar _layout_manager2 = _interopRequireDefault(_layout_manager);\r\nvar _multi_axes_synchronizer = require(\"./chart_components/multi_axes_synchronizer\");\r\nvar _multi_axes_synchronizer2 = _interopRequireDefault(_multi_axes_synchronizer);\r\nvar _advanced_chart = require(\"./chart_components/advanced_chart\");\r\nvar _scroll_bar = require(\"./chart_components/scroll_bar\");\r\nvar _scroll_bar2 = _interopRequireDefault(_scroll_bar);\r\nvar _crosshair = require(\"./chart_components/crosshair\");\r\nvar _crosshair2 = _interopRequireDefault(_crosshair);\r\nvar _range_data_calculator = require(\"./series/helpers/range_data_calculator\");\r\nvar _range_data_calculator2 = _interopRequireDefault(_range_data_calculator);\r\nvar _range = require(\"./translators/range\");\r\nvar _range2 = _interopRequireDefault(_range);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DEFAULT_PANE_NAME = \"default\";\r\nvar VISUAL_RANGE = \"VISUAL_RANGE\";\r\nvar DEFAULT_PANES = [{\r\n    name: DEFAULT_PANE_NAME,\r\n    border: {}\r\n}];\r\nvar _isArray = Array.isArray;\r\n\r\nfunction getFirstAxisNameForPane(axes, paneName, defaultPane) {\r\n    var result;\r\n    for (var i = 0; i < axes.length; i++) {\r\n        if (axes[i].pane === paneName || void 0 === axes[i].pane && paneName === defaultPane) {\r\n            result = axes[i].name;\r\n            break\r\n        }\r\n    }\r\n    if (!result) {\r\n        result = axes[0].name\r\n    }\r\n    return result\r\n}\r\n\r\nfunction changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility) {\r\n    var gridOpt = axis.getOptions().grid;\r\n    var minorGridOpt = axis.getOptions().minorGrid;\r\n    gridOpt.visible = gridVisibility;\r\n    minorGridOpt && (minorGridOpt.visible = minorGridVisibility)\r\n}\r\n\r\nfunction hideGridsOnNonFirstValueAxisForPane(axesForPane) {\r\n    var axisShown = false;\r\n    var hiddenStubAxis = [];\r\n    var minorGridVisibility = axesForPane.some(function(axis) {\r\n        var minorGridOptions = axis.getOptions().minorGrid;\r\n        return minorGridOptions && minorGridOptions.visible\r\n    });\r\n    var gridVisibility = axesForPane.some(function(axis) {\r\n        var gridOptions = axis.getOptions().grid;\r\n        return gridOptions && gridOptions.visible\r\n    });\r\n    if (axesForPane.length > 1) {\r\n        axesForPane.forEach(function(axis) {\r\n            var gridOpt = axis.getOptions().grid;\r\n            if (axisShown) {\r\n                changeVisibilityAxisGrids(axis, false, false)\r\n            } else {\r\n                if (gridOpt && gridOpt.visible) {\r\n                    if (axis.getTranslator().getBusinessRange().isEmpty()) {\r\n                        changeVisibilityAxisGrids(axis, false, false);\r\n                        hiddenStubAxis.push(axis)\r\n                    } else {\r\n                        axisShown = true;\r\n                        changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility)\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        !axisShown && hiddenStubAxis.length && changeVisibilityAxisGrids(hiddenStubAxis[0], gridVisibility, minorGridVisibility)\r\n    }\r\n}\r\n\r\nfunction findAxisOptions(valueAxes, valueAxesOptions, axisName) {\r\n    var result;\r\n    var axInd;\r\n    for (axInd = 0; axInd < valueAxesOptions.length; axInd++) {\r\n        if (valueAxesOptions[axInd].name === axisName) {\r\n            result = valueAxesOptions[axInd];\r\n            result.priority = axInd;\r\n            break\r\n        }\r\n    }\r\n    if (!result) {\r\n        for (axInd = 0; axInd < valueAxes.length; axInd++) {\r\n            if (valueAxes[axInd].name === axisName) {\r\n                result = valueAxes[axInd].getOptions();\r\n                result.priority = valueAxes[axInd].priority;\r\n                break\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction findAxis(paneName, axisName, axes) {\r\n    var axis;\r\n    var i;\r\n    for (i = 0; i < axes.length; i++) {\r\n        axis = axes[i];\r\n        if (axis.name === axisName && axis.pane === paneName) {\r\n            return axis\r\n        }\r\n    }\r\n    if (paneName) {\r\n        return findAxis(void 0, axisName, axes)\r\n    }\r\n}\r\n\r\nfunction compareAxes(a, b) {\r\n    return a.priority - b.priority\r\n}\r\n\r\nfunction doesPaneExist(panes, paneName) {\r\n    var found = false;\r\n    (0, _iterator.each)(panes, function(_, pane) {\r\n        if (pane.name === paneName) {\r\n            found = true;\r\n            return false\r\n        }\r\n    });\r\n    return found\r\n}\r\nvar prepareSegmentRectPoints = function(left, top, width, height, borderOptions) {\r\n    var maxSW = ~~((width < height ? width : height) / 2);\r\n    var sw = borderOptions.width || 0;\r\n    var newSW = sw < maxSW ? sw : maxSW;\r\n    left += newSW / 2;\r\n    top += newSW / 2;\r\n    width -= newSW;\r\n    height -= newSW;\r\n    var right = left + width;\r\n    var bottom = top + height;\r\n    var points = [];\r\n    var segments = [];\r\n    var segmentSequence;\r\n    var visiblyOpt = 0;\r\n    var prevSegmentVisibility = 0;\r\n    var allSegment = {\r\n        top: [\r\n            [left, top],\r\n            [right, top]\r\n        ],\r\n        right: [\r\n            [right, top],\r\n            [right, bottom]\r\n        ],\r\n        bottom: [\r\n            [right, bottom],\r\n            [left, bottom]\r\n        ],\r\n        left: [\r\n            [left, bottom],\r\n            [left, top]\r\n        ]\r\n    };\r\n    (0, _iterator.each)(allSegment, function(seg) {\r\n        var visibility = !!borderOptions[seg];\r\n        visiblyOpt = 2 * visiblyOpt + ~~visibility\r\n    });\r\n    switch (visiblyOpt) {\r\n        case 13:\r\n        case 9:\r\n            segmentSequence = [\"left\", \"top\", \"right\", \"bottom\"];\r\n            break;\r\n        case 11:\r\n            segmentSequence = [\"bottom\", \"left\", \"top\", \"right\"];\r\n            break;\r\n        default:\r\n            segmentSequence = [\"top\", \"right\", \"bottom\", \"left\"]\r\n    }(0, _iterator.each)(segmentSequence, function(_, seg) {\r\n        var segmentVisibility = !!borderOptions[seg];\r\n        if (!prevSegmentVisibility && segments.length) {\r\n            points.push(segments);\r\n            segments = []\r\n        }\r\n        if (segmentVisibility) {\r\n            (0, _iterator.each)(allSegment[seg].slice(prevSegmentVisibility), function(_, segment) {\r\n                segments = segments.concat(segment)\r\n            })\r\n        }\r\n        prevSegmentVisibility = ~~segmentVisibility\r\n    });\r\n    segments.length && points.push(segments);\r\n    1 === points.length && (points = points[0]);\r\n    return {\r\n        points: points,\r\n        pathType: 15 === visiblyOpt ? \"area\" : \"line\"\r\n    }\r\n};\r\n\r\nfunction accumulate(field, src1, src2, auxSpacing) {\r\n    var val1 = src1[field] || 0;\r\n    var val2 = src2[field] || 0;\r\n    return val1 + val2 + (val1 && val2 ? auxSpacing : 0)\r\n}\r\n\r\nfunction pickMax(field, src1, src2) {\r\n    return pickMaxValue(src1[field], src2[field])\r\n}\r\n\r\nfunction pickMaxValue(val1, val2) {\r\n    return Math.max(val1 || 0, val2 || 0)\r\n}\r\n\r\nfunction getAxisMargins(axis) {\r\n    return axis.getMargins()\r\n}\r\n\r\nfunction getHorizontalAxesMargins(axes, getMarginsFunc) {\r\n    return axes.reduce(function(margins, axis) {\r\n        var axisMargins = getMarginsFunc(axis);\r\n        var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\r\n        var spacing = axis.getMultipleAxesSpacing();\r\n        paneMargins.top = accumulate(\"top\", paneMargins, axisMargins, spacing);\r\n        paneMargins.bottom = accumulate(\"bottom\", paneMargins, axisMargins, spacing);\r\n        paneMargins.left = pickMax(\"left\", paneMargins, axisMargins);\r\n        paneMargins.right = pickMax(\"right\", paneMargins, axisMargins);\r\n        margins.top = pickMax(\"top\", paneMargins, margins);\r\n        margins.bottom = pickMax(\"bottom\", paneMargins, margins);\r\n        margins.left = pickMax(\"left\", paneMargins, margins);\r\n        margins.right = pickMax(\"right\", paneMargins, margins);\r\n        return margins\r\n    }, {\r\n        panes: {}\r\n    })\r\n}\r\n\r\nfunction getVerticalAxesMargins(axes) {\r\n    return axes.reduce(function(margins, axis) {\r\n        var axisMargins = axis.getMargins();\r\n        var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\r\n        var spacing = axis.getMultipleAxesSpacing();\r\n        paneMargins.top = pickMax(\"top\", paneMargins, axisMargins);\r\n        paneMargins.bottom = pickMax(\"bottom\", paneMargins, axisMargins);\r\n        paneMargins.left = accumulate(\"left\", paneMargins, axisMargins, spacing);\r\n        paneMargins.right = accumulate(\"right\", paneMargins, axisMargins, spacing);\r\n        margins.top = pickMax(\"top\", paneMargins, margins);\r\n        margins.bottom = pickMax(\"bottom\", paneMargins, margins);\r\n        margins.left = pickMax(\"left\", paneMargins, margins);\r\n        margins.right = pickMax(\"right\", paneMargins, margins);\r\n        return margins\r\n    }, {\r\n        panes: {}\r\n    })\r\n}\r\n\r\nfunction performActionOnAxes(axes, action, actionArgument1, actionArgument2, actionArgument3) {\r\n    axes.forEach(function(axis) {\r\n        axis[action](actionArgument1 && actionArgument1[axis.pane], actionArgument2 && actionArgument2[axis.pane] || actionArgument2, actionArgument3)\r\n    })\r\n}\r\n\r\nfunction shrinkCanvases(isRotated, canvases, sizes, verticalMargins, horizontalMargins) {\r\n    function getMargin(side, margins, pane) {\r\n        var m = (isRotated ? [\"left\", \"right\"] : [\"top\", \"bottom\"]).indexOf(side) === -1 ? margins : margins.panes[pane] || {};\r\n        return m[side]\r\n    }\r\n\r\n    function getMaxMargin(side, margins1, margins2, pane) {\r\n        return pickMaxValue(getMargin(side, margins1, pane), getMargin(side, margins2, pane))\r\n    }\r\n    var getOriginalField = function(field) {\r\n        return \"original\".concat(field[0].toUpperCase()).concat(field.slice(1))\r\n    };\r\n\r\n    function shrink(canvases, paneNames, sizeField, startMargin, endMargin, oppositeMargins) {\r\n        paneNames = paneNames.sort(function(p1, p2) {\r\n            return canvases[p2][startMargin] - canvases[p1][startMargin]\r\n        });\r\n        paneNames.forEach(function(pane) {\r\n            var canvas = canvases[pane];\r\n            oppositeMargins.forEach(function(margin) {\r\n                canvas[margin] = canvas[getOriginalField(margin)] + getMaxMargin(margin, verticalMargins, horizontalMargins, pane)\r\n            })\r\n        });\r\n        var firstPane = canvases[paneNames[0]];\r\n        var emptySpace = paneNames.reduce(function(space, paneName) {\r\n            space -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, paneName) + getMaxMargin(endMargin, verticalMargins, horizontalMargins, paneName);\r\n            return space\r\n        }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - canvases[paneNames[paneNames.length - 1]][getOriginalField(startMargin)]) - _utils.PANE_PADDING * (paneNames.length - 1);\r\n        var totalCustomSpace = Object.keys(sizes).reduce(function(prev, key) {\r\n            return prev + (sizes[key].unit ? sizes[key].height : 0)\r\n        }, 0);\r\n        emptySpace -= totalCustomSpace;\r\n        paneNames.reduce(function(offset, pane) {\r\n            var canvas = canvases[pane];\r\n            var paneSize = sizes[pane];\r\n            offset -= getMaxMargin(endMargin, verticalMargins, horizontalMargins, pane);\r\n            canvas[endMargin] = firstPane[sizeField] - offset;\r\n            offset -= paneSize.unit ? paneSize.height : Math.floor(emptySpace * paneSize.height);\r\n            canvas[startMargin] = offset;\r\n            offset -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, pane) + _utils.PANE_PADDING;\r\n            return offset\r\n        }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - (emptySpace < 0 ? emptySpace : 0))\r\n    }\r\n    var paneNames = Object.keys(canvases);\r\n    if (!isRotated) {\r\n        shrink(canvases, paneNames, \"height\", \"top\", \"bottom\", [\"left\", \"right\"])\r\n    } else {\r\n        shrink(canvases, paneNames, \"width\", \"left\", \"right\", [\"top\", \"bottom\"])\r\n    }\r\n    return canvases\r\n}\r\n\r\nfunction drawAxesWithTicks(axes, condition, canvases, panesBorderOptions) {\r\n    if (condition) {\r\n        performActionOnAxes(axes, \"createTicks\", canvases);\r\n        _multi_axes_synchronizer2.default.synchronize(axes)\r\n    }\r\n    performActionOnAxes(axes, \"draw\", !condition && canvases, panesBorderOptions)\r\n}\r\n\r\nfunction shiftAxis(side1, side2) {\r\n    var shifts = {};\r\n    return function(axis) {\r\n        var shift = shifts[axis.pane] = shifts[axis.pane] || {\r\n            top: 0,\r\n            left: 0,\r\n            bottom: 0,\r\n            right: 0\r\n        };\r\n        var spacing = axis.getMultipleAxesSpacing();\r\n        var margins = axis.getMargins();\r\n        axis.shift(shift);\r\n        shift[side1] = accumulate(side1, shift, margins, spacing);\r\n        shift[side2] = accumulate(side2, shift, margins, spacing)\r\n    }\r\n}\r\n\r\nfunction getCommonSize(side, margins) {\r\n    var size = 0;\r\n    var pane;\r\n    var paneMargins;\r\n    for (pane in margins.panes) {\r\n        paneMargins = margins.panes[pane];\r\n        size += \"height\" === side ? paneMargins.top + paneMargins.bottom : paneMargins.left + paneMargins.right\r\n    }\r\n    return size\r\n}\r\n\r\nfunction checkUsedSpace(sizeShortage, side, axes, getMarginFunc) {\r\n    var size = 0;\r\n    if (sizeShortage[side] > 0) {\r\n        size = getCommonSize(side, getMarginFunc(axes, getAxisMargins));\r\n        performActionOnAxes(axes, \"hideTitle\");\r\n        sizeShortage[side] -= size - getCommonSize(side, getMarginFunc(axes, getAxisMargins))\r\n    }\r\n    if (sizeShortage[side] > 0) {\r\n        performActionOnAxes(axes, \"hideOuterElements\")\r\n    }\r\n}\r\n\r\nfunction axisAnimationEnabled(drawOptions, series) {\r\n    var pointsCount = series.reduce(function(sum, s) {\r\n        return sum += s.getPoints().length\r\n    }, 0) / series.length;\r\n    return drawOptions.animate && pointsCount <= drawOptions.animationPointsLimit\r\n}\r\nvar dxChart = _advanced_chart.AdvancedChart.inherit({\r\n    _themeSection: \"chart\",\r\n    _fontFields: [\"crosshair.label.font\"],\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase.apply(this, arguments);\r\n        (0, _extend2.extend)(this._deprecatedOptions, {\r\n            useAggregation: {\r\n                since: \"18.1\",\r\n                message: \"Use the 'commonSeriesSettings.aggregation.enabled' or 'series.aggregation.enabled' option instead\"\r\n            },\r\n            \"argumentAxis.min\": {\r\n                since: \"18.2\",\r\n                message: \"Use the 'argumentAxis.visualRange' option instead\"\r\n            },\r\n            \"argumentAxis.max\": {\r\n                since: \"18.2\",\r\n                message: \"Use the 'argumentAxis.visualRange' option instead\"\r\n            },\r\n            \"valueAxis.min\": {\r\n                since: \"18.2\",\r\n                message: \"Use the 'valueAxis.visualRange' option instead\"\r\n            },\r\n            \"valueAxis.max\": {\r\n                since: \"18.2\",\r\n                message: \"Use the 'valueAxis.visualRange' option instead\"\r\n            },\r\n            zoomingMode: {\r\n                since: \"18.2\",\r\n                message: \"Use the 'zoomAndPan' option instead\"\r\n            },\r\n            scrollingMode: {\r\n                since: \"18.2\",\r\n                message: \"Use the 'zoomAndPan' option instead\"\r\n            }\r\n        })\r\n    },\r\n    _initCore: function() {\r\n        this.paneAxis = {};\r\n        this.callBase()\r\n    },\r\n    _correctAxes: function() {\r\n        this._correctValueAxes(true)\r\n    },\r\n    _getExtraOptions: _common.noop,\r\n    _createPanes: function() {\r\n        var that = this;\r\n        var panes = that.option(\"panes\");\r\n        var panesNameCounter = 0;\r\n        var defaultPane;\r\n        if (!panes || _isArray(panes) && !panes.length) {\r\n            panes = DEFAULT_PANES\r\n        }\r\n        that.callBase();\r\n        defaultPane = that.option(\"defaultPane\");\r\n        panes = (0, _extend2.extend)(true, [], _isArray(panes) ? panes : [panes]);\r\n        (0, _iterator.each)(panes, function(_, pane) {\r\n            pane.name = !(0, _type.isDefined)(pane.name) ? DEFAULT_PANE_NAME + panesNameCounter++ : pane.name\r\n        });\r\n        if ((0, _type.isDefined)(defaultPane)) {\r\n            if (!doesPaneExist(panes, defaultPane)) {\r\n                that._incidentOccurred(\"W2101\", [defaultPane]);\r\n                defaultPane = panes[panes.length - 1].name\r\n            }\r\n        } else {\r\n            defaultPane = panes[panes.length - 1].name\r\n        }\r\n        that.defaultPane = defaultPane;\r\n        panes = that._isRotated() ? panes.reverse() : panes;\r\n        return panes\r\n    },\r\n    _getAxisRenderingOptions: function() {\r\n        return {\r\n            axisType: \"xyAxes\",\r\n            drawingType: \"linear\"\r\n        }\r\n    },\r\n    _prepareAxisOptions: function(typeSelector, userOptions, rotated) {\r\n        return {\r\n            isHorizontal: \"argumentAxis\" === typeSelector !== rotated,\r\n            containerColor: this._themeManager.getOptions(\"containerBackgroundColor\")\r\n        }\r\n    },\r\n    _checkPaneName: function(seriesTheme) {\r\n        var paneList = (0, _utils.map)(this.panes, function(pane) {\r\n            return pane.name\r\n        });\r\n        seriesTheme.pane = seriesTheme.pane || this.defaultPane;\r\n        return (0, _array.inArray)(seriesTheme.pane, paneList) !== -1\r\n    },\r\n    _getValueAxis: function(paneName, axisName) {\r\n        var that = this;\r\n        var valueAxes = that._valueAxes;\r\n        var valueAxisOptions = that.option(\"valueAxis\") || {};\r\n        var valueAxesOptions = _isArray(valueAxisOptions) ? valueAxisOptions : [valueAxisOptions];\r\n        var rotated = that._isRotated();\r\n        var crosshairMargins = that._getCrosshairMargins();\r\n        var axisOptions;\r\n        var axis;\r\n        axisName = axisName || getFirstAxisNameForPane(valueAxes, paneName, that.defaultPane);\r\n        axis = findAxis(paneName, axisName, valueAxes);\r\n        if (!axis) {\r\n            axisOptions = findAxisOptions(valueAxes, valueAxesOptions, axisName);\r\n            if (!axisOptions) {\r\n                that._incidentOccurred(\"W2102\", [axisName]);\r\n                axisOptions = {\r\n                    name: axisName,\r\n                    priority: valueAxes.length\r\n                }\r\n            }\r\n            axis = that._createAxis(false, that._populateAxesOptions(\"valueAxis\", axisOptions, {\r\n                pane: paneName,\r\n                name: axisName,\r\n                optionPath: _isArray(valueAxisOptions) ? \"valueAxis[\".concat(axisOptions.priority, \"]\") : \"valueAxis\",\r\n                crosshairMargin: rotated ? crosshairMargins.y : crosshairMargins.x\r\n            }, rotated));\r\n            axis.applyVisualRangeSetter(that._getVisualRangeSetter());\r\n            valueAxes.push(axis)\r\n        }\r\n        axis.setPane(paneName);\r\n        return axis\r\n    },\r\n    _correctValueAxes: function(needHideGrids) {\r\n        var that = this;\r\n        var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\r\n        var valueAxes = that._valueAxes;\r\n        var paneWithAxis = {};\r\n        that.series.forEach(function(series) {\r\n            var axis = series.getValueAxis();\r\n            paneWithAxis[axis.pane] = true\r\n        });\r\n        that.panes.forEach(function(pane) {\r\n            var paneName = pane.name;\r\n            if (!paneWithAxis[paneName]) {\r\n                that._getValueAxis(paneName)\r\n            }\r\n            if (needHideGrids && synchronizeMultiAxes) {\r\n                hideGridsOnNonFirstValueAxisForPane(valueAxes.filter(function(axis) {\r\n                    return axis.pane === paneName\r\n                }))\r\n            }\r\n        });\r\n        that._valueAxes = valueAxes.filter(function(axis) {\r\n            if (!axis.pane) {\r\n                axis.setPane(that.defaultPane)\r\n            }\r\n            return doesPaneExist(that.panes, axis.pane)\r\n        }).sort(compareAxes);\r\n        var defaultAxis = this.getValueAxis();\r\n        that._valueAxes.forEach(function(axis) {\r\n            var optionPath = axis.getOptions().optionPath;\r\n            if (optionPath) {\r\n                var axesWithSamePath = that._valueAxes.filter(function(a) {\r\n                    return a.getOptions().optionPath === optionPath\r\n                });\r\n                if (axesWithSamePath.length > 1) {\r\n                    if (axesWithSamePath.some(function(a) {\r\n                            return a === defaultAxis\r\n                        })) {\r\n                        axesWithSamePath.forEach(function(a) {\r\n                            if (a !== defaultAxis) {\r\n                                a.getOptions().optionPath = null\r\n                            }\r\n                        })\r\n                    } else {\r\n                        axesWithSamePath.forEach(function(a, i) {\r\n                            if (0 !== i) {\r\n                                a.getOptions().optionPath = null\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getSeriesForPane: function(paneName) {\r\n        var paneSeries = [];\r\n        (0, _iterator.each)(this.series, function(_, oneSeries) {\r\n            if (oneSeries.pane === paneName) {\r\n                paneSeries.push(oneSeries)\r\n            }\r\n        });\r\n        return paneSeries\r\n    },\r\n    _createPanesBorderOptions: function() {\r\n        var commonBorderOptions = this._themeManager.getOptions(\"commonPaneSettings\").border;\r\n        var panesBorderOptions = {};\r\n        this.panes.forEach(function(pane) {\r\n            return panesBorderOptions[pane.name] = (0, _extend2.extend)(true, {}, commonBorderOptions, pane.border)\r\n        });\r\n        return panesBorderOptions\r\n    },\r\n    _createScrollBar: function() {\r\n        var that = this;\r\n        var scrollBarOptions = that._themeManager.getOptions(\"scrollBar\") || {};\r\n        var scrollBarGroup = that._scrollBarGroup;\r\n        if (scrollBarOptions.visible) {\r\n            scrollBarOptions.rotated = that._isRotated();\r\n            that._scrollBar = (that._scrollBar || new _scroll_bar2.default.ScrollBar(that._renderer, scrollBarGroup)).update(scrollBarOptions)\r\n        } else {\r\n            scrollBarGroup.linkRemove();\r\n            that._scrollBar && that._scrollBar.dispose();\r\n            that._scrollBar = null\r\n        }\r\n    },\r\n    _prepareToRender: function(drawOptions) {\r\n        var panesBorderOptions = this._createPanesBorderOptions();\r\n        this._createPanesBackground();\r\n        this._appendAxesGroups();\r\n        this._adjustViewport();\r\n        return panesBorderOptions\r\n    },\r\n    _adjustViewport: function() {\r\n        var that = this;\r\n        var series = that._getVisibleSeries();\r\n        var argumentAxis = that.getArgumentAxis();\r\n        var useAggregation = series.some(function(s) {\r\n            return s.useAggregation()\r\n        });\r\n        var adjustOnZoom = that._themeManager.getOptions(\"adjustOnZoom\");\r\n        var alignToBounds = !argumentAxis.dataVisualRangeIsReduced();\r\n        if (!useAggregation && !adjustOnZoom) {\r\n            return\r\n        }\r\n        that._valueAxes.forEach(function(axis) {\r\n            return axis.adjust(alignToBounds)\r\n        })\r\n    },\r\n    _recreateSizeDependentObjects: function(isCanvasChanged) {\r\n        var that = this;\r\n        var series = that._getVisibleSeries();\r\n        var useAggregation = series.some(function(s) {\r\n            return s.useAggregation()\r\n        });\r\n        var zoomChanged = that._isZooming();\r\n        if (!useAggregation) {\r\n            return\r\n        }\r\n        that._argumentAxes.forEach(function(axis) {\r\n            axis.updateCanvas(that._canvas)\r\n        });\r\n        series.forEach(function(series) {\r\n            if (series.useAggregation() && (isCanvasChanged || zoomChanged || !series._useAllAggregatedPoints)) {\r\n                series.createPoints()\r\n            }\r\n        });\r\n        that._processSeriesFamilies()\r\n    },\r\n    _isZooming: function() {\r\n        var that = this;\r\n        var argumentAxis = that.getArgumentAxis();\r\n        if (!argumentAxis || !argumentAxis.getTranslator()) {\r\n            return false\r\n        }\r\n        var businessRange = argumentAxis.getTranslator().getBusinessRange();\r\n        var zoomRange = argumentAxis.getViewport();\r\n        var min = zoomRange ? zoomRange.min : 0;\r\n        var max = zoomRange ? zoomRange.max : 0;\r\n        if (\"logarithmic\" === businessRange.axisType) {\r\n            min = (0, _utils.getLog)(min, businessRange.base);\r\n            max = (0, _utils.getLog)(max, businessRange.base)\r\n        }\r\n        var viewportDistance = \"discrete\" === businessRange.axisType ? (0, _utils.getCategoriesInfo)(businessRange.categories, min, max).categories.length : Math.abs(max - min);\r\n        var precision = (0, _math.getPrecision)(viewportDistance);\r\n        precision = precision > 1 ? Math.pow(10, precision - 2) : 1;\r\n        var zoomChanged = Math.round((that._zoomLength - viewportDistance) * precision) / precision !== 0;\r\n        that._zoomLength = viewportDistance;\r\n        return zoomChanged\r\n    },\r\n    _handleSeriesDataUpdated: function() {\r\n        var that = this;\r\n        var viewport = new _range2.default.Range;\r\n        that.series.forEach(function(s) {\r\n            viewport.addRange(s.getArgumentRange())\r\n        });\r\n        that._argumentAxes.forEach(function(axis) {\r\n            axis.updateCanvas(that._canvas);\r\n            axis.setBusinessRange(viewport, that._axesReinitialized)\r\n        });\r\n        that.callBase()\r\n    },\r\n    _isLegendInside: function() {\r\n        return this._legend && \"inside\" === this._legend.getPosition()\r\n    },\r\n    _isRotated: function() {\r\n        return this._themeManager.getOptions(\"rotated\")\r\n    },\r\n    _getLayoutTargets: function() {\r\n        return this.panes\r\n    },\r\n    _applyClipRects: function(panesBorderOptions) {\r\n        var that = this;\r\n        var canvasClipRectID = that._getCanvasClipRectID();\r\n        var i;\r\n        that._drawPanesBorders(panesBorderOptions);\r\n        that._createClipRectsForPanes();\r\n        for (i = 0; i < that._argumentAxes.length; i++) {\r\n            that._argumentAxes[i].applyClipRects(that._getElementsClipRectID(that._argumentAxes[i].pane), canvasClipRectID)\r\n        }\r\n        for (i = 0; i < that._valueAxes.length; i++) {\r\n            that._valueAxes[i].applyClipRects(that._getElementsClipRectID(that._valueAxes[i].pane), canvasClipRectID)\r\n        }\r\n        that._fillPanesBackground()\r\n    },\r\n    _updateLegendPosition: function(drawOptions, legendHasInsidePosition) {\r\n        var that = this;\r\n        if (drawOptions.drawLegend && that._legend && legendHasInsidePosition) {\r\n            var panes = that.panes;\r\n            var newCanvas = (0, _extend2.extend)({}, panes[0].canvas);\r\n            var layoutManager = new _layout_manager2.default.LayoutManager;\r\n            newCanvas.right = panes[panes.length - 1].canvas.right;\r\n            newCanvas.bottom = panes[panes.length - 1].canvas.bottom;\r\n            layoutManager.setOptions({\r\n                width: 0,\r\n                height: 0\r\n            });\r\n            layoutManager.layoutElements([that._legend], newCanvas, _common.noop, [{\r\n                canvas: newCanvas\r\n            }], void 0)\r\n        }\r\n    },\r\n    _allowLegendInsidePosition: function() {\r\n        return true\r\n    },\r\n    _applyExtraSettings: function(series) {\r\n        var that = this;\r\n        var paneIndex = that._getPaneIndex(series.pane);\r\n        var panesClipRects = that._panesClipRects;\r\n        var wideClipRect = panesClipRects.wide[paneIndex];\r\n        series.setClippingParams(panesClipRects.base[paneIndex].id, wideClipRect && wideClipRect.id, that._getPaneBorderVisibility(paneIndex))\r\n    },\r\n    _updatePanesCanvases: function(drawOptions) {\r\n        if (!drawOptions.recreateCanvas) {\r\n            return\r\n        }(0, _utils.updatePanesCanvases)(this.panes, this._canvas, this._isRotated())\r\n    },\r\n    _normalizePanesHeight: function() {\r\n        (0, _utils.normalizePanesHeight)(this.panes)\r\n    },\r\n    _renderScaleBreaks: function() {\r\n        this._valueAxes.concat(this._argumentAxes).forEach(function(axis) {\r\n            axis.drawScaleBreaks()\r\n        })\r\n    },\r\n    _applyPointMarkersAutoHiding: function() {\r\n        var that = this;\r\n        if (!that._themeManager.getOptions(\"autoHidePointMarkers\")) {\r\n            that.series.forEach(function(s) {\r\n                return s.autoHidePointMarkers = false\r\n            });\r\n            return\r\n        }\r\n        that.panes.forEach(function(pane) {\r\n            var series = that.series.filter(function(s) {\r\n                return s.pane === pane.name && s.usePointsToDefineAutoHiding()\r\n            });\r\n            var argAxis = that.getArgumentAxis();\r\n            var argVisualRange = argAxis.visualRange();\r\n            var argTranslator = argAxis.getTranslator();\r\n            var argAxisType = argAxis.getOptions().type;\r\n            var argViewPortFilter = _range_data_calculator2.default.getViewPortFilter(argVisualRange || {});\r\n            var points = [];\r\n            var overloadedSeries = {};\r\n            series.forEach(function(s) {\r\n                var valAxis = s.getValueAxis();\r\n                var valVisualRange = valAxis.visualRange();\r\n                var valTranslator = valAxis.getTranslator();\r\n                var seriesIndex = that.series.indexOf(s);\r\n                var valViewPortFilter = _range_data_calculator2.default.getViewPortFilter(valVisualRange || {});\r\n                overloadedSeries[seriesIndex] = {};\r\n                series.forEach(function(sr) {\r\n                    return overloadedSeries[seriesIndex][that.series.indexOf(sr)] = 0\r\n                });\r\n                var seriesPoints = [];\r\n                s.getPoints().filter(function(p) {\r\n                    return p.getOptions().visible && argViewPortFilter(p.argument) && (valViewPortFilter(p.getMinValue(true)) || valViewPortFilter(p.getMaxValue(true)))\r\n                }).forEach(function(p) {\r\n                    var tp = {\r\n                        seriesIndex: seriesIndex,\r\n                        argument: p.argument,\r\n                        value: p.getMaxValue(true),\r\n                        size: p.bubbleSize || p.getOptions().size\r\n                    };\r\n                    if (p.getMinValue(true) !== p.getMaxValue(true)) {\r\n                        var mp = (0, _extend2.extend)({}, tp);\r\n                        mp.value = p.getMinValue(true);\r\n                        mp.x = argTranslator.to(mp.argument, 1);\r\n                        mp.y = valTranslator.to(mp.value, 1);\r\n                        seriesPoints.push(mp)\r\n                    }\r\n                    tp.x = argTranslator.to(tp.argument, 1);\r\n                    tp.y = valTranslator.to(tp.value, 1);\r\n                    seriesPoints.push(tp)\r\n                });\r\n                overloadedSeries[seriesIndex].pointsCount = seriesPoints.length;\r\n                overloadedSeries[seriesIndex].total = 0;\r\n                overloadedSeries[seriesIndex].continuousSeries = 0;\r\n                points = points.concat(seriesPoints)\r\n            });\r\n            var sortingCallback = \"discrete\" === argAxisType ? function(p1, p2) {\r\n                return argVisualRange.categories.indexOf(p1.argument) - argVisualRange.categories.indexOf(p2.argument)\r\n            } : function(p1, p2) {\r\n                return p1.argument - p2.argument\r\n            };\r\n            points.sort(sortingCallback);\r\n            var isContinuousSeries = false;\r\n            for (var i = 0; i < points.length - 1; i++) {\r\n                var curPoint = points[i];\r\n                var size = curPoint.size;\r\n                if ((0, _type.isDefined)(curPoint.x) && (0, _type.isDefined)(curPoint.y)) {\r\n                    for (var j = i + 1; j < points.length; j++) {\r\n                        var nextPoint = points[j];\r\n                        var next_x = (0, _type.isDefined)(nextPoint) ? nextPoint.x : null;\r\n                        var next_y = (0, _type.isDefined)(nextPoint) ? nextPoint.y : null;\r\n                        if (!(0, _type.isDefined)(next_x) || Math.abs(curPoint.x - next_x) >= size) {\r\n                            isContinuousSeries &= j !== i + 1;\r\n                            break\r\n                        } else {\r\n                            var distance = (0, _type.isDefined)(next_x) && (0, _type.isDefined)(next_y) && Math.sqrt(Math.pow(curPoint.x - next_x, 2) + Math.pow(curPoint.y - next_y, 2));\r\n                            if (distance && distance < size) {\r\n                                overloadedSeries[curPoint.seriesIndex][nextPoint.seriesIndex]++;\r\n                                overloadedSeries[curPoint.seriesIndex].total++;\r\n                                if (!isContinuousSeries) {\r\n                                    overloadedSeries[curPoint.seriesIndex].continuousSeries++;\r\n                                    isContinuousSeries = true\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            series.forEach(function(s) {\r\n                var seriesIndex = that.series.indexOf(s);\r\n                s.autoHidePointMarkers = false;\r\n                var tickCount = argAxis.getTicksValues().majorTicksValues.length;\r\n                if (s.autoHidePointMarkersEnabled() && (\"discrete\" === argAxisType || overloadedSeries[seriesIndex].pointsCount > tickCount)) {\r\n                    for (var index in overloadedSeries[seriesIndex]) {\r\n                        var _i = parseInt(index);\r\n                        if (isNaN(_i) || overloadedSeries[seriesIndex].total / overloadedSeries[seriesIndex].continuousSeries < 3) {\r\n                            continue\r\n                        }\r\n                        if (_i === seriesIndex) {\r\n                            if (2 * overloadedSeries[_i][_i] >= overloadedSeries[_i].pointsCount) {\r\n                                s.autoHidePointMarkers = true;\r\n                                break\r\n                            }\r\n                        } else {\r\n                            if (overloadedSeries[seriesIndex].total >= overloadedSeries[seriesIndex].pointsCount) {\r\n                                s.autoHidePointMarkers = true;\r\n                                break\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        })\r\n    },\r\n    _renderAxes: function(drawOptions, panesBorderOptions) {\r\n        function calculateTitlesWidth(axes) {\r\n            return axes.map(function(axis) {\r\n                if (!axis.getTitle) {\r\n                    return 0\r\n                }\r\n                var title = axis.getTitle();\r\n                return title ? title.bBox.width : 0\r\n            })\r\n        }\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\r\n        var extendedArgAxes = (that._scrollBar ? [that._scrollBar] : []).concat(that._argumentAxes);\r\n        var verticalAxes = rotated ? extendedArgAxes : that._valueAxes;\r\n        var horizontalAxes = rotated ? that._valueAxes : extendedArgAxes;\r\n        var allAxes = verticalAxes.concat(horizontalAxes);\r\n        that._normalizePanesHeight();\r\n        that._updatePanesCanvases(drawOptions);\r\n        var panesCanvases = that.panes.reduce(function(canvases, pane) {\r\n            canvases[pane.name] = (0, _extend2.extend)({}, pane.canvas);\r\n            return canvases\r\n        }, {});\r\n        var paneSizes = that.panes.reduce(function(sizes, pane) {\r\n            sizes[pane.name] = {\r\n                height: pane.height,\r\n                unit: pane.unit\r\n            };\r\n            return sizes\r\n        }, {});\r\n        var cleanPanesCanvases = (0, _extend2.extend)(true, {}, panesCanvases);\r\n        if (!drawOptions.adjustAxes) {\r\n            drawAxesWithTicks(verticalAxes, !rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\r\n            drawAxesWithTicks(horizontalAxes, rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\r\n            performActionOnAxes(allAxes, \"prepareAnimation\");\r\n            that._renderScaleBreaks();\r\n            return false\r\n        }\r\n        if (that._scrollBar) {\r\n            that._scrollBar.setPane(that.panes)\r\n        }\r\n        var vAxesMargins = {\r\n            panes: {}\r\n        };\r\n        var hAxesMargins = getHorizontalAxesMargins(horizontalAxes, function(axis) {\r\n            return axis.estimateMargins(panesCanvases[axis.pane])\r\n        });\r\n        panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\r\n        drawAxesWithTicks(verticalAxes, !rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\r\n        vAxesMargins = getVerticalAxesMargins(verticalAxes);\r\n        panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\r\n        drawAxesWithTicks(horizontalAxes, rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\r\n        hAxesMargins = getHorizontalAxesMargins(horizontalAxes, getAxisMargins);\r\n        panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\r\n        var oldTitlesWidth = calculateTitlesWidth(verticalAxes);\r\n        performActionOnAxes(allAxes, \"updateSize\", panesCanvases, axisAnimationEnabled(drawOptions, that._getVisibleSeries()));\r\n        horizontalAxes.forEach(shiftAxis(\"top\", \"bottom\"));\r\n        verticalAxes.forEach(shiftAxis(\"left\", \"right\"));\r\n        that._renderScaleBreaks();\r\n        that.panes.forEach(function(pane) {\r\n            (0, _extend2.extend)(pane.canvas, panesCanvases[pane.name])\r\n        });\r\n        that._valueAxes.forEach(function(axis) {\r\n            axis.setInitRange()\r\n        });\r\n        verticalAxes.forEach(function(axis, i) {\r\n            if (axis.hasWrap && axis.hasWrap()) {\r\n                var title = axis.getTitle();\r\n                var newTitleWidth = title ? title.bBox.width : 0;\r\n                var offset = newTitleWidth - oldTitlesWidth[i];\r\n                if (\"right\" === axis.getOptions().position) {\r\n                    vAxesMargins.right += offset\r\n                } else {\r\n                    vAxesMargins.left += offset;\r\n                    that.panes.forEach(function(_ref) {\r\n                        var name = _ref.name;\r\n                        return vAxesMargins.panes[name].left += offset\r\n                    })\r\n                }\r\n                panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\r\n                performActionOnAxes(allAxes, \"updateSize\", panesCanvases, false, false);\r\n                oldTitlesWidth = calculateTitlesWidth(verticalAxes)\r\n            }\r\n        });\r\n        return cleanPanesCanvases\r\n    },\r\n    checkForMoreSpaceForPanesCanvas: function() {\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        var panesAreCustomSized = that.panes.filter(function(p) {\r\n            return p.unit\r\n        }).length === that.panes.length;\r\n        var needSpace = false;\r\n        if (panesAreCustomSized) {\r\n            var needHorizontalSpace = 0;\r\n            var needVerticalSpace = 0;\r\n            if (rotated) {\r\n                var argAxisRightMargin = that.getArgumentAxis().getMargins().right;\r\n                var rightPanesIndent = Math.min.apply(Math, that.panes.map(function(p) {\r\n                    return p.canvas.right\r\n                }));\r\n                needHorizontalSpace = that._canvas.right + argAxisRightMargin - rightPanesIndent\r\n            } else {\r\n                var argAxisBottomMargin = that.getArgumentAxis().getMargins().bottom;\r\n                var bottomPanesIndent = Math.min.apply(Math, that.panes.map(function(p) {\r\n                    return p.canvas.bottom\r\n                }));\r\n                needVerticalSpace = that._canvas.bottom + argAxisBottomMargin - bottomPanesIndent\r\n            }\r\n            needSpace = needHorizontalSpace > 0 || needVerticalSpace > 0 ? {\r\n                width: needHorizontalSpace,\r\n                height: needVerticalSpace\r\n            } : false;\r\n            if (0 !== needVerticalSpace) {\r\n                var realSize = that.getSize();\r\n                var customSize = that.option(\"size\");\r\n                var container = that._$element[0];\r\n                var containerHasStyledHeight = !!container.style.height || (0, _utils.checkElementHasPropertyFromStyleSheet)(container, \"height\");\r\n                if (!rotated && !(customSize && customSize.height) && !containerHasStyledHeight) {\r\n                    that._forceResize(realSize.width, realSize.height + needVerticalSpace);\r\n                    needSpace = false\r\n                }\r\n            }\r\n        } else {\r\n            needSpace = that.layoutManager.needMoreSpaceForPanesCanvas(that._getLayoutTargets(), rotated, function(pane) {\r\n                return {\r\n                    width: rotated && !!pane.unit,\r\n                    height: !rotated && !!pane.unit\r\n                }\r\n            })\r\n        }\r\n        return needSpace\r\n    },\r\n    _forceResize: function(width, height) {\r\n        this._renderer.resize(width, height);\r\n        this._updateSize();\r\n        this._setContentSize();\r\n        this._preserveOriginalCanvas();\r\n        this._updateCanvasClipRect(this._canvas)\r\n    },\r\n    _shrinkAxes: function(sizeShortage, panesCanvases) {\r\n        if (!sizeShortage || !panesCanvases) {\r\n            return\r\n        }\r\n        this._renderer.stopAllAnimations(true);\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        var extendedArgAxes = (that._scrollBar ? [that._scrollBar] : []).concat(that._argumentAxes);\r\n        var verticalAxes = rotated ? extendedArgAxes : that._valueAxes;\r\n        var horizontalAxes = rotated ? that._valueAxes : extendedArgAxes;\r\n        var allAxes = verticalAxes.concat(horizontalAxes);\r\n        if (sizeShortage.width || sizeShortage.height) {\r\n            checkUsedSpace(sizeShortage, \"height\", horizontalAxes, getHorizontalAxesMargins);\r\n            checkUsedSpace(sizeShortage, \"width\", verticalAxes, getVerticalAxesMargins);\r\n            performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\r\n            var paneSizes = that.panes.reduce(function(sizes, pane) {\r\n                sizes[pane.name] = {\r\n                    height: pane.height,\r\n                    unit: pane.unit\r\n                };\r\n                return sizes\r\n            }, {});\r\n            panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, getVerticalAxesMargins(verticalAxes), getHorizontalAxesMargins(horizontalAxes, getAxisMargins));\r\n            performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\r\n            horizontalAxes.forEach(shiftAxis(\"top\", \"bottom\"));\r\n            verticalAxes.forEach(shiftAxis(\"left\", \"right\"));\r\n            that.panes.forEach(function(pane) {\r\n                return (0, _extend2.extend)(pane.canvas, panesCanvases[pane.name])\r\n            })\r\n        }\r\n    },\r\n    _getPanesParameters: function() {\r\n        var that = this;\r\n        var panes = that.panes;\r\n        var i;\r\n        var params = [];\r\n        for (i = 0; i < panes.length; i++) {\r\n            if (that._getPaneBorderVisibility(i)) {\r\n                params.push({\r\n                    coords: panes[i].borderCoords,\r\n                    clipRect: that._panesClipRects.fixed[i]\r\n                })\r\n            }\r\n        }\r\n        return params\r\n    },\r\n    _createCrosshairCursor: function() {\r\n        var that = this;\r\n        var options = that._themeManager.getOptions(\"crosshair\") || {};\r\n        var argumentAxis = that.getArgumentAxis();\r\n        var axes = !that._isRotated() ? [\r\n            [argumentAxis], that._valueAxes\r\n        ] : [that._valueAxes, [argumentAxis]];\r\n        var parameters = {\r\n            canvas: that._getCommonCanvas(),\r\n            panes: that._getPanesParameters(),\r\n            axes: axes\r\n        };\r\n        if (!options || !options.enabled) {\r\n            return\r\n        }\r\n        if (!that._crosshair) {\r\n            that._crosshair = new _crosshair2.default.Crosshair(that._renderer, options, parameters, that._crosshairCursorGroup)\r\n        } else {\r\n            that._crosshair.update(options, parameters)\r\n        }\r\n        that._crosshair.render()\r\n    },\r\n    _getCommonCanvas: function() {\r\n        var i;\r\n        var canvas;\r\n        var commonCanvas;\r\n        var panes = this.panes;\r\n        for (i = 0; i < panes.length; i++) {\r\n            canvas = panes[i].canvas;\r\n            if (!commonCanvas) {\r\n                commonCanvas = (0, _extend2.extend)({}, canvas)\r\n            } else {\r\n                commonCanvas.right = canvas.right;\r\n                commonCanvas.bottom = canvas.bottom\r\n            }\r\n        }\r\n        return commonCanvas\r\n    },\r\n    _createPanesBackground: function() {\r\n        var that = this;\r\n        var defaultBackgroundColor = that._themeManager.getOptions(\"commonPaneSettings\").backgroundColor;\r\n        var backgroundColor;\r\n        var renderer = that._renderer;\r\n        var rect;\r\n        var i;\r\n        var rects = [];\r\n        that._panesBackgroundGroup.clear();\r\n        for (i = 0; i < that.panes.length; i++) {\r\n            backgroundColor = that.panes[i].backgroundColor || defaultBackgroundColor;\r\n            if (!backgroundColor || \"none\" === backgroundColor) {\r\n                rects.push(null);\r\n                continue\r\n            }\r\n            rect = renderer.rect(0, 0, 0, 0).attr({\r\n                fill: backgroundColor,\r\n                \"stroke-width\": 0\r\n            }).append(that._panesBackgroundGroup);\r\n            rects.push(rect)\r\n        }\r\n        that.panesBackground = rects\r\n    },\r\n    _fillPanesBackground: function() {\r\n        var that = this;\r\n        var bc;\r\n        (0, _iterator.each)(that.panes, function(i, pane) {\r\n            bc = pane.borderCoords;\r\n            if (null !== that.panesBackground[i]) {\r\n                that.panesBackground[i].attr({\r\n                    x: bc.left,\r\n                    y: bc.top,\r\n                    width: bc.width,\r\n                    height: bc.height\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _calcPaneBorderCoords: function(pane) {\r\n        var canvas = pane.canvas;\r\n        var bc = pane.borderCoords = pane.borderCoords || {};\r\n        bc.left = canvas.left;\r\n        bc.top = canvas.top;\r\n        bc.right = canvas.width - canvas.right;\r\n        bc.bottom = canvas.height - canvas.bottom;\r\n        bc.width = Math.max(bc.right - bc.left, 0);\r\n        bc.height = Math.max(bc.bottom - bc.top, 0)\r\n    },\r\n    _drawPanesBorders: function(panesBorderOptions) {\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        that._panesBorderGroup.linkRemove().clear();\r\n        (0, _iterator.each)(that.panes, function(i, pane) {\r\n            var bc;\r\n            var borderOptions = panesBorderOptions[pane.name];\r\n            var segmentRectParams;\r\n            var attr = {\r\n                fill: \"none\",\r\n                stroke: borderOptions.color,\r\n                \"stroke-opacity\": borderOptions.opacity,\r\n                \"stroke-width\": borderOptions.width,\r\n                dashStyle: borderOptions.dashStyle,\r\n                \"stroke-linecap\": \"square\"\r\n            };\r\n            that._calcPaneBorderCoords(pane, rotated);\r\n            if (!borderOptions.visible) {\r\n                return\r\n            }\r\n            bc = pane.borderCoords;\r\n            segmentRectParams = prepareSegmentRectPoints(bc.left, bc.top, bc.width, bc.height, borderOptions);\r\n            that._renderer.path(segmentRectParams.points, segmentRectParams.pathType).attr(attr).append(that._panesBorderGroup)\r\n        });\r\n        that._panesBorderGroup.linkAppend()\r\n    },\r\n    _createClipRect: function(clipArray, index, left, top, width, height) {\r\n        var that = this;\r\n        var clipRect = clipArray[index];\r\n        if (!clipRect) {\r\n            clipRect = that._renderer.clipRect(left, top, width, height);\r\n            clipArray[index] = clipRect\r\n        } else {\r\n            clipRect.attr({\r\n                x: left,\r\n                y: top,\r\n                width: width,\r\n                height: height\r\n            })\r\n        }\r\n    },\r\n    _createClipRectsForPanes: function() {\r\n        var that = this;\r\n        var canvas = that._canvas;\r\n        (0, _iterator.each)(that.panes, function(i, pane) {\r\n            var needWideClipRect = false;\r\n            var bc = pane.borderCoords;\r\n            var left = bc.left;\r\n            var top = bc.top;\r\n            var width = bc.width;\r\n            var height = bc.height;\r\n            var panesClipRects = that._panesClipRects;\r\n            that._createClipRect(panesClipRects.fixed, i, left, top, width, height);\r\n            that._createClipRect(panesClipRects.base, i, left, top, width, height);\r\n            (0, _iterator.each)(that.series, function(_, series) {\r\n                if (series.pane === pane.name && (series.isFinancialSeries() || series.areErrorBarsVisible())) {\r\n                    needWideClipRect = true\r\n                }\r\n            });\r\n            if (needWideClipRect) {\r\n                if (that._isRotated()) {\r\n                    top = 0;\r\n                    height = canvas.height\r\n                } else {\r\n                    left = 0;\r\n                    width = canvas.width\r\n                }\r\n                that._createClipRect(panesClipRects.wide, i, left, top, width, height)\r\n            } else {\r\n                panesClipRects.wide[i] = null\r\n            }\r\n        })\r\n    },\r\n    _getPaneBorderVisibility: function(paneIndex) {\r\n        var commonPaneBorderVisible = this._themeManager.getOptions(\"commonPaneSettings\").border.visible;\r\n        var pane = this.panes[paneIndex] || {};\r\n        var paneBorder = pane.border || {};\r\n        return \"visible\" in paneBorder ? paneBorder.visible : commonPaneBorderVisible\r\n    },\r\n    _getCanvasForPane: function(paneName) {\r\n        var panes = this.panes;\r\n        var panesNumber = panes.length;\r\n        var i;\r\n        for (i = 0; i < panesNumber; i++) {\r\n            if (panes[i].name === paneName) {\r\n                return panes[i].canvas\r\n            }\r\n        }\r\n    },\r\n    _getTrackerSettings: function() {\r\n        var that = this;\r\n        var themeManager = that._themeManager;\r\n        return (0, _extend2.extend)(this.callBase(), {\r\n            chart: that,\r\n            rotated: that._isRotated(),\r\n            crosshair: that._getCrosshairOptions().enabled ? that._crosshair : null,\r\n            stickyHovering: themeManager.getOptions(\"stickyHovering\")\r\n        })\r\n    },\r\n    _resolveLabelOverlappingStack: function() {\r\n        var that = this;\r\n        var isRotated = that._isRotated();\r\n        var shiftDirection = isRotated ? function(box, length) {\r\n            return {\r\n                x: box.x - length,\r\n                y: box.y\r\n            }\r\n        } : function(box, length) {\r\n            return {\r\n                x: box.x,\r\n                y: box.y - length\r\n            }\r\n        };\r\n        (0, _iterator.each)(that._getStackPoints(), function(_, stacks) {\r\n            (0, _iterator.each)(stacks, function(_, points) {\r\n                _base_chart.overlapping.resolveLabelOverlappingInOneDirection(points, that._getCommonCanvas(), isRotated, shiftDirection, function(a, b) {\r\n                    var coordPosition = isRotated ? 1 : 0;\r\n                    var figureCenter1 = a.labels[0].getFigureCenter()[coordPosition];\r\n                    var figureCenter12 = b.labels[0].getFigureCenter()[coordPosition];\r\n                    if (figureCenter1 - figureCenter12 === 0) {\r\n                        return (a.value() - b.value()) * (a.labels[0].getPoint().series.getValueAxis().getTranslator().isInverted() ? -1 : 1)\r\n                    }\r\n                    return 0\r\n                })\r\n            })\r\n        })\r\n    },\r\n    _getStackPoints: function() {\r\n        var stackPoints = {};\r\n        var visibleSeries = this._getVisibleSeries();\r\n        (0, _iterator.each)(visibleSeries, function(_, singleSeries) {\r\n            var points = singleSeries.getPoints();\r\n            var stackName = singleSeries.getStackName() || null;\r\n            (0, _iterator.each)(points, function(_, point) {\r\n                var argument = point.argument;\r\n                if (!stackPoints[argument]) {\r\n                    stackPoints[argument] = {}\r\n                }\r\n                if (!stackPoints[argument][stackName]) {\r\n                    stackPoints[argument][stackName] = []\r\n                }\r\n                stackPoints[argument][stackName].push(point)\r\n            })\r\n        });\r\n        return stackPoints\r\n    },\r\n    _getCrosshairOptions: function() {\r\n        return this._getOption(\"crosshair\")\r\n    },\r\n    zoomArgument: function(min, max) {\r\n        var that = this;\r\n        if (!that._initialized || !(0, _type.isDefined)(min) && !(0, _type.isDefined)(max)) {\r\n            return\r\n        }\r\n        that.getArgumentAxis().visualRange([min, max])\r\n    },\r\n    resetVisualRange: function() {\r\n        var that = this;\r\n        var axes = that._argumentAxes;\r\n        var nonVirtualArgumentAxis = that.getArgumentAxis();\r\n        axes.forEach(function(axis) {\r\n            axis.resetVisualRange(nonVirtualArgumentAxis !== axis);\r\n            that._applyCustomVisualRangeOption(axis)\r\n        });\r\n        that.callBase()\r\n    },\r\n    getVisibleArgumentBounds: function() {\r\n        var translator = this._argumentAxes[0].getTranslator();\r\n        var range = translator.getBusinessRange();\r\n        var isDiscrete = \"discrete\" === range.axisType;\r\n        var categories = range.categories;\r\n        return {\r\n            minVisible: isDiscrete ? range.minVisible || categories[0] : range.minVisible,\r\n            maxVisible: isDiscrete ? range.maxVisible || categories[categories.length - 1] : range.maxVisible\r\n        }\r\n    },\r\n    _change_FULL_RENDER: function() {\r\n        this.callBase();\r\n        if (this._changes.has(VISUAL_RANGE)) {\r\n            this._raiseZoomEndHandlers()\r\n        }\r\n    },\r\n    _getAxesForScaling: function() {\r\n        return [this.getArgumentAxis()].concat(this._valueAxes)\r\n    },\r\n    _applyVisualRangeByVirtualAxes: function(axis, range) {\r\n        var that = this;\r\n        if (axis.isArgumentAxis) {\r\n            if (axis !== that.getArgumentAxis()) {\r\n                return true\r\n            }\r\n            that._argumentAxes.filter(function(a) {\r\n                return a !== axis\r\n            }).forEach(function(a) {\r\n                return a.visualRange(range, {\r\n                    start: true,\r\n                    end: true\r\n                })\r\n            })\r\n        }\r\n        return false\r\n    },\r\n    _raiseZoomEndHandlers: function() {\r\n        this._argumentAxes.forEach(function(axis) {\r\n            return axis.handleZoomEnd()\r\n        });\r\n        this.callBase()\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        (0, _extend2.extend)(this._optionsByReference, {\r\n            \"argumentAxis.visualRange\": true\r\n        })\r\n    },\r\n    option: function option() {\r\n        var option = this.callBase.apply(this, arguments);\r\n        if (\"array\" === (0, _type.type)(this._options.valueAxis)) {\r\n            for (var i = 0; i < this._options.valueAxis.length; i++) {\r\n                var optionPath = \"valueAxis[\".concat(i, \"].visualRange\");\r\n                this._optionsByReference[optionPath] = true\r\n            }\r\n        }\r\n        return option\r\n    },\r\n    _notifyVisualRange: function() {\r\n        var that = this;\r\n        var argAxis = that._argumentAxes[0];\r\n        var argumentVisualRange = (0, _utils.convertVisualRangeObject)(argAxis.visualRange(), !_isArray(that.option(\"argumentAxis.visualRange\")));\r\n        if (!argAxis.skipEventRising || !(0, _utils.rangesAreEqual)(argumentVisualRange, that.option(\"argumentAxis.visualRange\"))) {\r\n            that.option(\"argumentAxis.visualRange\", argumentVisualRange)\r\n        } else {\r\n            argAxis.skipEventRising = null\r\n        }\r\n        that.callBase()\r\n    }\r\n});\r\ndxChart.addPlugin(require(\"./chart_components/shutter_zoom\"));\r\ndxChart.addPlugin(require(\"./chart_components/zoom_and_pan\"));\r\ndxChart.addPlugin(require(\"./core/annotations\").plugins.core);\r\ndxChart.addPlugin(require(\"./core/annotations\").plugins.chart);\r\n(0, _component_registrator2.default)(\"dxChart\", dxChart);\r\nmodule.exports = dxChart;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}