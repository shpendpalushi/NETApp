{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.rows.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _style = require(\"../../core/utils/style\");\n\nvar _style2 = _interopRequireDefault(_style);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _string = require(\"../../core/utils/string\");\n\nvar _position = require(\"../../core/utils/position\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _uiGrid_core = require(\"./ui.grid_core.utils\");\n\nvar _uiGrid_core2 = require(\"./ui.grid_core.columns_view\");\n\nvar _uiGrid_core3 = _interopRequireDefault(_uiGrid_core2);\n\nvar _ui = require(\"../scroll_view/ui.scrollable\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _remove_event = require(\"../../core/remove_event\");\n\nvar _remove_event2 = _interopRequireDefault(_remove_event);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar ROWS_VIEW_CLASS = \"rowsview\";\nvar CONTENT_CLASS = \"content\";\nvar NOWRAP_CLASS = \"nowrap\";\nvar GROUP_ROW_CLASS = \"dx-group-row\";\nvar GROUP_CELL_CLASS = \"dx-group-cell\";\nvar DATA_ROW_CLASS = \"dx-data-row\";\nvar FREE_SPACE_CLASS = \"dx-freespace-row\";\nvar ROW_LINES_CLASS = \"dx-row-lines\";\nvar COLUMN_LINES_CLASS = \"dx-column-lines\";\nvar ROW_ALTERNATION_CLASS = \"dx-row-alt\";\nvar LAST_ROW_BORDER = \"dx-last-row-border\";\nvar EMPTY_CLASS = \"dx-empty\";\nvar ROW_INSERTED_ANIMATION_CLASS = \"row-inserted-animation\";\nvar LOADPANEL_HIDE_TIMEOUT = 200;\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      hoverStateEnabled: false,\n      scrolling: {\n        useNative: \"auto\"\n      },\n      loadPanel: {\n        enabled: \"auto\",\n        text: _message2.default.format(\"Loading\"),\n        width: 200,\n        height: 90,\n        showIndicator: true,\n        indicatorSrc: \"\",\n        showPane: true\n      },\n      rowTemplate: null,\n      columnAutoWidth: false,\n      noDataText: _message2.default.format(\"dxDataGrid-noDataText\"),\n      wordWrapEnabled: false,\n      showColumnLines: true,\n      showRowLines: false,\n      rowAlternationEnabled: false,\n      activeStateEnabled: false,\n      twoWayBindingEnabled: true\n    };\n  },\n  views: {\n    rowsView: _uiGrid_core3.default.ColumnsView.inherit(function () {\n      var defaultCellTemplate = function defaultCellTemplate($container, options) {\n        var isDataTextEmpty = (0, _string.isEmpty)(options.text) && \"data\" === options.rowType;\n        var text = options.text;\n        var container = $container.get(0);\n\n        if (isDataTextEmpty) {\n          (0, _uiGrid_core.setEmptyText)($container);\n        } else {\n          if (options.column.encodeHtml) {\n            container.textContent = text;\n          } else {\n            container.innerHTML = text;\n          }\n        }\n      };\n\n      var getScrollableBottomPadding = function getScrollableBottomPadding(that) {\n        var scrollable = that.getScrollable();\n        return scrollable ? Math.ceil(parseFloat(scrollable.$content().css(\"paddingBottom\"))) : 0;\n      };\n\n      return {\n        _getDefaultTemplate: function _getDefaultTemplate(column) {\n          switch (column.command) {\n            case \"empty\":\n              return function (container) {\n                container.html(\"&nbsp;\");\n              };\n\n            default:\n              return defaultCellTemplate;\n          }\n        },\n        _getDefaultGroupTemplate: function _getDefaultGroupTemplate(column) {\n          var that = this;\n          var summaryTexts = that.option(\"summary.texts\");\n          return function ($container, options) {\n            var data = options.data;\n            var text = options.column.caption + \": \" + options.text;\n            var container = $container.get(0);\n\n            if (options.summaryItems && options.summaryItems.length) {\n              text += \" \" + (0, _uiGrid_core.getGroupRowSummaryText)(options.summaryItems, summaryTexts);\n            }\n\n            if (data) {\n              if (options.groupContinuedMessage && options.groupContinuesMessage) {\n                text += \" (\" + options.groupContinuedMessage + \". \" + options.groupContinuesMessage + \")\";\n              } else {\n                if (options.groupContinuesMessage) {\n                  text += \" (\" + options.groupContinuesMessage + \")\";\n                } else {\n                  if (options.groupContinuedMessage) {\n                    text += \" (\" + options.groupContinuedMessage + \")\";\n                  }\n                }\n              }\n            }\n\n            $container.addClass(GROUP_CELL_CLASS);\n\n            if (column.encodeHtml) {\n              container.textContent = text;\n            } else {\n              container.innerHTML = text;\n            }\n          };\n        },\n        _update: function _update() {},\n        _getCellTemplate: function _getCellTemplate(options) {\n          var that = this;\n          var column = options.column;\n          var template;\n\n          if (\"group\" === options.rowType && (0, _type.isDefined)(column.groupIndex) && !column.showWhenGrouped && !column.command) {\n            template = column.groupCellTemplate || {\n              allowRenderToDetachedContainer: true,\n              render: that._getDefaultGroupTemplate(column)\n            };\n          } else {\n            if ((\"data\" === options.rowType || column.command) && column.cellTemplate) {\n              template = column.cellTemplate;\n            } else {\n              template = {\n                allowRenderToDetachedContainer: true,\n                render: that._getDefaultTemplate(column)\n              };\n            }\n          }\n\n          return template;\n        },\n        _createRow: function _createRow(row) {\n          var $row = this.callBase(row);\n          var isGroup;\n          var isDataRow;\n          var isRowExpanded;\n\n          if (row) {\n            isGroup = \"group\" === row.rowType;\n            isDataRow = \"data\" === row.rowType;\n            isDataRow && $row.addClass(DATA_ROW_CLASS);\n            isDataRow && this.option(\"showRowLines\") && $row.addClass(ROW_LINES_CLASS);\n            this.option(\"showColumnLines\") && $row.addClass(COLUMN_LINES_CLASS);\n\n            if (false === row.visible) {\n              $row.hide();\n            }\n\n            if (isGroup) {\n              $row.addClass(GROUP_ROW_CLASS);\n              isRowExpanded = row.isExpanded;\n              this.setAria(\"role\", \"row\", $row);\n              this.setAria(\"expanded\", (0, _type.isDefined)(isRowExpanded) && isRowExpanded.toString(), $row);\n            }\n          }\n\n          return $row;\n        },\n        _rowPrepared: function _rowPrepared($row, rowOptions, row) {\n          var _this = this;\n\n          if (\"data\" === rowOptions.rowType) {\n            if (this.option(\"rowAlternationEnabled\")) {\n              var getRowAlt = function getRowAlt() {\n                return row.dataIndex % 2 === 1;\n              };\n\n              getRowAlt() && $row.addClass(ROW_ALTERNATION_CLASS);\n              rowOptions.watch && rowOptions.watch(getRowAlt, function (value) {\n                $row.toggleClass(ROW_ALTERNATION_CLASS, value);\n              });\n            }\n\n            this._setAriaRowIndex(rowOptions, $row);\n\n            rowOptions.watch && rowOptions.watch(function () {\n              return rowOptions.rowIndex;\n            }, function () {\n              return _this._setAriaRowIndex(rowOptions, $row);\n            });\n          }\n\n          this.callBase.apply(this, arguments);\n        },\n        _setAriaRowIndex: function _setAriaRowIndex(row, $row) {\n          var component = this.component;\n          var isPagerMode = \"standard\" === component.option(\"scrolling.mode\") && \"virtual\" !== component.option(\"scrolling.rowRenderingMode\");\n          var rowIndex = row.rowIndex + 1;\n\n          if (isPagerMode) {\n            rowIndex = component.pageIndex() * component.pageSize() + rowIndex;\n          } else {\n            rowIndex += this._dataController.getRowIndexOffset();\n          }\n\n          this.setAria(\"rowindex\", rowIndex, $row);\n        },\n        _afterRowPrepared: function _afterRowPrepared(e) {\n          var _this2 = this;\n\n          var arg = e.args[0];\n          var dataController = this._dataController;\n          var row = dataController.getVisibleRows()[arg.rowIndex];\n          var watch = this.option(\"integrationOptions.watchMethod\");\n\n          if (!arg.data || \"data\" !== arg.rowType || arg.isNewRow || !this.option(\"twoWayBindingEnabled\") || !watch || !row) {\n            return;\n          }\n\n          var dispose = watch(function () {\n            return dataController.generateDataValues(arg.data, arg.columns);\n          }, function () {\n            dataController.repaintRows([row.rowIndex], _this2.option(\"repaintChangesOnly\"));\n          }, {\n            deep: true,\n            skipImmediate: true\n          });\n\n          _events_engine2.default.on(arg.rowElement, _remove_event2.default, dispose);\n        },\n        _renderScrollable: function _renderScrollable(force) {\n          var that = this;\n          var $element = that.element();\n\n          if (!$element.children().length) {\n            $element.append(\"<div>\");\n          }\n\n          if (force || !that._loadPanel) {\n            that._renderLoadPanel($element, $element.parent(), that._dataController.isLocalStore());\n          }\n\n          if ((force || !that.getScrollable()) && that._dataController.isLoaded()) {\n            var columns = that.getColumns();\n            var allColumnsHasWidth = true;\n\n            for (var i = 0; i < columns.length; i++) {\n              if (!columns[i].width && !columns[i].minWidth) {\n                allColumnsHasWidth = false;\n                break;\n              }\n            }\n\n            if (that.option(\"columnAutoWidth\") || that._hasHeight || allColumnsHasWidth || that._columnsController._isColumnFixing()) {\n              that._renderScrollableCore($element);\n            }\n          }\n        },\n        _handleScroll: function _handleScroll(e) {\n          var that = this;\n          that._isScrollByEvent = !!e.event;\n          that._scrollTop = e.scrollOffset.top;\n          that._scrollLeft = e.scrollOffset.left;\n          that.scrollChanged.fire(e.scrollOffset, that.name);\n        },\n        _renderScrollableCore: function _renderScrollableCore($element) {\n          var that = this;\n\n          var dxScrollableOptions = that._createScrollableOptions();\n\n          var scrollHandler = that._handleScroll.bind(that);\n\n          dxScrollableOptions.onScroll = scrollHandler;\n          dxScrollableOptions.onStop = scrollHandler;\n          that._scrollable = that._createComponent($element, _ui2.default, dxScrollableOptions);\n          that._scrollableContainer = that._scrollable && that._scrollable._$container;\n        },\n        _renderLoadPanel: _uiGrid_core.renderLoadPanel,\n        _renderContent: function _renderContent(contentElement, tableElement) {\n          contentElement.replaceWith((0, _renderer2.default)(\"<div>\").addClass(this.addWidgetPrefix(CONTENT_CLASS)).append(tableElement));\n          return this._findContentElement();\n        },\n        _updateContent: function _updateContent(newTableElement, change) {\n          var that = this;\n\n          var tableElement = that._getTableElement();\n\n          var contentElement = that._findContentElement();\n\n          var changeType = change && change.changeType;\n          var executors = [];\n          var highlightChanges = this.option(\"highlightChanges\");\n          var rowInsertedClass = this.addWidgetPrefix(ROW_INSERTED_ANIMATION_CLASS);\n\n          switch (changeType) {\n            case \"update\":\n              (0, _iterator.each)(change.rowIndices, function (index, rowIndex) {\n                var $newRowElement = that._getRowElements(newTableElement).eq(index);\n\n                var changeType = change.changeTypes && change.changeTypes[index];\n                var item = change.items && change.items[index];\n                executors.push(function () {\n                  var $rowsElement = that._getRowElements();\n\n                  var $rowElement = $rowsElement.eq(rowIndex);\n\n                  switch (changeType) {\n                    case \"update\":\n                      if (item) {\n                        var columnIndices = change.columnIndices && change.columnIndices[index];\n\n                        if ((0, _type.isDefined)(item.visible) && item.visible !== $rowElement.is(\":visible\")) {\n                          $rowElement.toggle(item.visible);\n                        } else {\n                          if (columnIndices) {\n                            that._updateCells($rowElement, $newRowElement, columnIndices);\n                          } else {\n                            $rowElement.replaceWith($newRowElement);\n                          }\n                        }\n                      }\n\n                      break;\n\n                    case \"insert\":\n                      if (!$rowsElement.length) {\n                        $newRowElement.prependTo(tableElement.children(\"tbody\"));\n                      } else {\n                        if ($rowElement.length) {\n                          $newRowElement.insertBefore($rowElement);\n                        } else {\n                          $newRowElement.insertAfter($rowsElement.last());\n                        }\n                      }\n\n                      if (highlightChanges && change.isLiveUpdate) {\n                        $newRowElement.addClass(rowInsertedClass);\n                      }\n\n                      break;\n\n                    case \"remove\":\n                      $rowElement.remove();\n                  }\n                });\n              });\n              (0, _iterator.each)(executors, function () {\n                this();\n              });\n              newTableElement.remove();\n              break;\n\n            default:\n              that._setTableElement(newTableElement);\n\n              contentElement.addClass(that.addWidgetPrefix(CONTENT_CLASS));\n\n              that._renderContent(contentElement, newTableElement);\n\n          }\n        },\n        _createEmptyRow: function _createEmptyRow(className, isFixed, height) {\n          var that = this;\n          var i;\n          var $cell;\n\n          var $row = that._createRow();\n\n          var columns = isFixed ? this.getFixedColumns() : this.getColumns();\n          $row.addClass(className).toggleClass(COLUMN_LINES_CLASS, that.option(\"showColumnLines\"));\n\n          for (i = 0; i < columns.length; i++) {\n            $cell = that._createCell({\n              column: columns[i],\n              rowType: \"freeSpace\",\n              columnIndex: i,\n              columns: columns\n            });\n            (0, _type.isNumeric)(height) && $cell.css(\"height\", height);\n            $row.append($cell);\n          }\n\n          that.setAria(\"role\", \"presentation\", $row);\n          return $row;\n        },\n        _appendEmptyRow: function _appendEmptyRow($table, $emptyRow, location) {\n          var $tBodies = this._getBodies($table);\n\n          var $container = $tBodies.length && !$emptyRow.is(\"tbody\") ? $tBodies : $table;\n\n          if (\"top\" === location) {\n            $container.first().prepend($emptyRow);\n          } else {\n            $container.last().append($emptyRow);\n          }\n        },\n        _renderFreeSpaceRow: function _renderFreeSpaceRow($tableElement) {\n          var $freeSpaceRowElement = this._createEmptyRow(FREE_SPACE_CLASS);\n\n          $freeSpaceRowElement = this._wrapRowIfNeed($tableElement, $freeSpaceRowElement);\n\n          this._appendEmptyRow($tableElement, $freeSpaceRowElement);\n        },\n        _checkRowKeys: function _checkRowKeys(options) {\n          var that = this;\n\n          var rows = that._getRows(options);\n\n          var keyExpr = that._dataController.store() && that._dataController.store().key();\n\n          keyExpr && rows.some(function (row) {\n            if (\"data\" === row.rowType && void 0 === row.key) {\n              that._dataController.fireError(\"E1046\", keyExpr);\n\n              return true;\n            }\n          });\n        },\n        _needUpdateRowHeight: function _needUpdateRowHeight(itemsCount) {\n          return itemsCount > 0 && !this._rowHeight;\n        },\n        _getRowsHeight: function _getRowsHeight($tableElement) {\n          var $rowElements = $tableElement.children(\"tbody\").children().not(\".dx-virtual-row\").not(\".\" + FREE_SPACE_CLASS);\n          return $rowElements.toArray().reduce(function (sum, row) {\n            return sum + row.getBoundingClientRect().height;\n          }, 0);\n        },\n        _updateRowHeight: function _updateRowHeight() {\n          var that = this;\n          var rowsHeight;\n\n          var $tableElement = that._getTableElement();\n\n          var itemsCount = that._dataController.items().length;\n\n          if ($tableElement && that._needUpdateRowHeight(itemsCount)) {\n            rowsHeight = that._getRowsHeight($tableElement);\n            that._rowHeight = rowsHeight / itemsCount;\n          }\n        },\n        _findContentElement: function _findContentElement() {\n          var $content = this.element();\n          var scrollable = this.getScrollable();\n\n          if ($content) {\n            if (scrollable) {\n              $content = scrollable.$content();\n            }\n\n            return $content.children().first();\n          }\n        },\n        _getRowElements: function _getRowElements(tableElement) {\n          var $rows = this.callBase(tableElement);\n          return $rows && $rows.not(\".\" + FREE_SPACE_CLASS);\n        },\n        _getFreeSpaceRowElements: function _getFreeSpaceRowElements($table) {\n          var tableElements = $table || this.getTableElements();\n          return tableElements && tableElements.children(\"tbody\").children(\".\" + FREE_SPACE_CLASS);\n        },\n        _getNoDataText: function _getNoDataText() {\n          return this.option(\"noDataText\");\n        },\n        _rowClick: function _rowClick(e) {\n          var item = this._dataController.items()[e.rowIndex] || {};\n          this.executeAction(\"onRowClick\", (0, _extend.extend)({\n            evaluate: function evaluate(expr) {\n              var getter = (0, _data.compileGetter)(expr);\n              return getter(item.data);\n            }\n          }, e, item));\n        },\n        _rowDblClick: function _rowDblClick(e) {\n          var item = this._dataController.items()[e.rowIndex] || {};\n          this.executeAction(\"onRowDblClick\", (0, _extend.extend)({}, e, item));\n        },\n        _getColumnsCountBeforeGroups: function _getColumnsCountBeforeGroups(columns) {\n          for (var i = 0; i < columns.length; i++) {\n            if (\"groupExpand\" === columns[i].type) {\n              return i;\n            }\n          }\n\n          return 0;\n        },\n        _getGroupCellOptions: function _getGroupCellOptions(options) {\n          var columnsCountBeforeGroups = this._getColumnsCountBeforeGroups(options.columns);\n\n          var columnIndex = (options.row.groupIndex || 0) + columnsCountBeforeGroups;\n          return {\n            columnIndex: columnIndex,\n            colspan: options.columns.length - columnIndex - 1\n          };\n        },\n        _renderCells: function _renderCells($row, options) {\n          if (\"group\" === options.row.rowType) {\n            this._renderGroupedCells($row, options);\n          } else {\n            if (options.row.values) {\n              this.callBase($row, options);\n            }\n          }\n        },\n        _renderGroupedCells: function _renderGroupedCells($row, options) {\n          var row = options.row;\n          var i;\n          var expandColumn;\n          var columns = options.columns;\n          var rowIndex = row.rowIndex;\n          var isExpanded;\n          var groupColumn;\n          var groupColumnAlignment;\n\n          var groupCellOptions = this._getGroupCellOptions(options);\n\n          for (i = 0; i <= groupCellOptions.columnIndex; i++) {\n            if (i === groupCellOptions.columnIndex && columns[i].allowCollapsing && \"infinite\" !== options.scrollingMode) {\n              isExpanded = !!row.isExpanded;\n              expandColumn = columns[i];\n            } else {\n              isExpanded = null;\n              expandColumn = {\n                command: \"expand\",\n                cssClass: columns[i].cssClass\n              };\n            }\n\n            this._renderCell($row, {\n              value: isExpanded,\n              row: row,\n              rowIndex: rowIndex,\n              column: expandColumn,\n              columnIndex: i\n            });\n          }\n\n          groupColumnAlignment = (0, _position.getDefaultAlignment)(this.option(\"rtlEnabled\"));\n          groupColumn = (0, _extend.extend)({}, columns[groupCellOptions.columnIndex], {\n            command: null,\n            cssClass: null,\n            width: null,\n            showWhenGrouped: false,\n            alignment: groupColumnAlignment\n          });\n\n          if (groupCellOptions.colspan > 1) {\n            groupColumn.colspan = groupCellOptions.colspan;\n          }\n\n          this._renderCell($row, {\n            value: row.values[row.groupIndex],\n            row: row,\n            rowIndex: rowIndex,\n            column: groupColumn,\n            columnIndex: groupCellOptions.columnIndex\n          });\n        },\n        _renderRows: function _renderRows($table, options) {\n          var that = this;\n          var scrollingMode = that.option(\"scrolling.mode\");\n          that.callBase($table, (0, _extend.extend)({\n            scrollingMode: scrollingMode\n          }, options));\n\n          that._checkRowKeys(options.change);\n\n          that._renderFreeSpaceRow($table);\n\n          if (!that._hasHeight) {\n            that.updateFreeSpaceRowHeight($table);\n          }\n        },\n        _renderRow: function _renderRow($table, options) {\n          var that = this;\n          var row = options.row;\n          var rowTemplate = that.option(\"rowTemplate\");\n\n          if ((\"data\" === row.rowType || \"group\" === row.rowType) && !(0, _type.isDefined)(row.groupIndex) && rowTemplate) {\n            that.renderTemplate($table, rowTemplate, (0, _extend.extend)({\n              columns: options.columns\n            }, row), true);\n          } else {\n            that.callBase($table, options);\n          }\n        },\n        _renderTable: function _renderTable(options) {\n          var that = this;\n          var $table = that.callBase(options);\n\n          var resizeCompletedHandler = function resizeCompletedHandler() {\n            var scrollableInstance = that.getScrollable();\n\n            if (scrollableInstance && that.element().closest((0, _window.getWindow)().document).length) {\n              that.resizeCompleted.remove(resizeCompletedHandler);\n\n              scrollableInstance._visibilityChanged(true);\n            }\n          };\n\n          if (!(0, _type.isDefined)(that._getTableElement())) {\n            that._setTableElement($table);\n\n            that._renderScrollable(true);\n\n            that.resizeCompleted.add(resizeCompletedHandler);\n          } else {\n            that._renderScrollable();\n          }\n\n          return $table;\n        },\n        _createTable: function _createTable() {\n          var $table = this.callBase.apply(this, arguments);\n\n          if (this.option(\"rowTemplate\")) {\n            $table.appendTo(this.component.$element());\n          }\n\n          return $table;\n        },\n        _renderCore: function _renderCore(change) {\n          var that = this;\n          var $table;\n          var $element = that.element();\n          $element.addClass(that.addWidgetPrefix(ROWS_VIEW_CLASS)).toggleClass(that.addWidgetPrefix(NOWRAP_CLASS), !that.option(\"wordWrapEnabled\"));\n          $element.toggleClass(EMPTY_CLASS, 0 === that._dataController.items().length);\n          that.setAria(\"role\", \"presentation\", $element);\n          $table = that._renderTable({\n            change: change\n          });\n\n          that._updateContent($table, change);\n\n          that.callBase(change);\n          that._lastColumnWidths = null;\n        },\n        _getRows: function _getRows(change) {\n          return change && change.items || this._dataController.items();\n        },\n        _getCellOptions: function _getCellOptions(options) {\n          var that = this;\n          var parameters;\n          var column = options.column;\n          var row = options.row;\n          var data = row.data;\n          var summaryCells = row && row.summaryCells;\n          var value = options.value;\n          var displayValue = (0, _uiGrid_core.getDisplayValue)(column, value, data, row.rowType);\n          var groupingTextsOptions;\n          var scrollingMode;\n          parameters = this.callBase(options);\n          parameters.value = value;\n          parameters.oldValue = options.oldValue;\n          parameters.displayValue = displayValue;\n          parameters.row = row;\n          parameters.key = row.key;\n          parameters.data = data;\n          parameters.rowType = row.rowType;\n          parameters.values = row.values;\n          parameters.text = !column.command ? (0, _uiGrid_core.formatValue)(displayValue, column) : \"\";\n          parameters.rowIndex = row.rowIndex;\n          parameters.summaryItems = summaryCells && summaryCells[options.columnIndex];\n          parameters.resized = column.resizedCallbacks;\n\n          if ((0, _type.isDefined)(column.groupIndex) && !column.command) {\n            groupingTextsOptions = that.option(\"grouping.texts\");\n            scrollingMode = that.option(\"scrolling.mode\");\n\n            if (\"virtual\" !== scrollingMode && \"infinite\" !== scrollingMode) {\n              parameters.groupContinuesMessage = data && data.isContinuationOnNextPage && groupingTextsOptions && groupingTextsOptions.groupContinuesMessage;\n              parameters.groupContinuedMessage = data && data.isContinuation && groupingTextsOptions && groupingTextsOptions.groupContinuedMessage;\n            }\n          }\n\n          return parameters;\n        },\n        _setRowsOpacityCore: function _setRowsOpacityCore($rows, visibleColumns, columnIndex, value) {\n          var columnsController = this._columnsController;\n          var columns = columnsController.getColumns();\n          var column = columns && columns[columnIndex];\n          var columnID = column && column.isBand && column.index;\n          (0, _iterator.each)($rows, function (rowIndex, row) {\n            if (!(0, _renderer2.default)(row).hasClass(GROUP_ROW_CLASS)) {\n              for (var i = 0; i < visibleColumns.length; i++) {\n                if ((0, _type.isNumeric)(columnID) && columnsController.isParentBandColumn(visibleColumns[i].index, columnID) || visibleColumns[i].index === columnIndex) {\n                  $rows.eq(rowIndex).children().eq(i).css({\n                    opacity: value\n                  });\n\n                  if (!(0, _type.isNumeric)(columnID)) {\n                    break;\n                  }\n                }\n              }\n            }\n          });\n        },\n        _getDevicePixelRatio: function _getDevicePixelRatio() {\n          return (0, _window.getWindow)().devicePixelRatio;\n        },\n        renderNoDataText: _uiGrid_core.renderNoDataText,\n        getCellOptions: function getCellOptions(rowIndex, columnIdentifier) {\n          var rowOptions = this._dataController.items()[rowIndex];\n\n          var cellOptions;\n          var column;\n\n          if (rowOptions) {\n            if ((0, _type.isString)(columnIdentifier)) {\n              column = this._columnsController.columnOption(columnIdentifier);\n            } else {\n              column = this._columnsController.getVisibleColumns()[columnIdentifier];\n            }\n\n            if (column) {\n              cellOptions = this._getCellOptions({\n                value: column.calculateCellValue(rowOptions.data),\n                rowIndex: rowOptions.rowIndex,\n                row: rowOptions,\n                column: column\n              });\n            }\n          }\n\n          return cellOptions;\n        },\n        getRow: function getRow(index) {\n          if (index >= 0) {\n            var rows = this._getRowElements();\n\n            if (rows.length > index) {\n              return (0, _renderer2.default)(rows[index]);\n            }\n          }\n        },\n        updateFreeSpaceRowHeight: function updateFreeSpaceRowHeight($table) {\n          var that = this;\n          var dataController = that._dataController;\n          var itemCount = dataController.items(true).length;\n\n          var contentElement = that._findContentElement();\n\n          var freeSpaceRowElements = that._getFreeSpaceRowElements($table);\n\n          var freeSpaceRowCount;\n          var scrollingMode;\n\n          if (freeSpaceRowElements && contentElement && dataController.totalCount() >= 0) {\n            var isFreeSpaceRowVisible = false;\n\n            if (itemCount > 0) {\n              if (!that._hasHeight) {\n                freeSpaceRowCount = dataController.pageSize() - itemCount;\n                scrollingMode = that.option(\"scrolling.mode\");\n\n                if (freeSpaceRowCount > 0 && dataController.pageCount() > 1 && \"virtual\" !== scrollingMode && \"infinite\" !== scrollingMode) {\n                  _style2.default.setHeight(freeSpaceRowElements, freeSpaceRowCount * that._rowHeight);\n\n                  isFreeSpaceRowVisible = true;\n                }\n\n                if (!isFreeSpaceRowVisible && $table) {\n                  _style2.default.setHeight(freeSpaceRowElements, 0);\n                } else {\n                  freeSpaceRowElements.toggle(isFreeSpaceRowVisible);\n                }\n\n                that._updateLastRowBorder(isFreeSpaceRowVisible);\n              } else {\n                freeSpaceRowElements.hide();\n                (0, _common.deferUpdate)(function () {\n                  var scrollablePadding = getScrollableBottomPadding(that);\n                  var scrollbarWidth = that.getScrollbarWidth(true);\n                  var elementHeightWithoutScrollbar = that.element().height() - scrollbarWidth - scrollablePadding;\n                  var contentHeight = contentElement.outerHeight();\n                  var showFreeSpaceRow = elementHeightWithoutScrollbar - contentHeight > 0;\n\n                  var rowsHeight = that._getRowsHeight(contentElement.children().first());\n\n                  var $tableElement = $table || that.getTableElements();\n                  var borderTopWidth = Math.ceil(parseFloat($tableElement.css(\"borderTopWidth\")));\n                  var heightCorrection = _browser2.default.webkit && that._getDevicePixelRatio() >= 2 ? 1 : 0;\n                  var resultHeight = elementHeightWithoutScrollbar - rowsHeight - borderTopWidth - heightCorrection;\n\n                  if (showFreeSpaceRow) {\n                    (0, _common.deferRender)(function () {\n                      freeSpaceRowElements.css(\"height\", resultHeight);\n                      isFreeSpaceRowVisible = true;\n                      freeSpaceRowElements.show();\n                    });\n                  }\n\n                  (0, _common.deferRender)(function () {\n                    that._updateLastRowBorder(isFreeSpaceRowVisible);\n                  });\n                });\n              }\n            } else {\n              freeSpaceRowElements.css(\"height\", 0);\n              freeSpaceRowElements.show();\n\n              that._updateLastRowBorder(true);\n            }\n          }\n        },\n        _columnOptionChanged: function _columnOptionChanged(e) {\n          var optionNames = e.optionNames;\n\n          if (e.changeTypes.grouping) {\n            return;\n          }\n\n          if (optionNames.width || optionNames.visibleWidth) {\n            this.callBase(e);\n\n            this._fireColumnResizedCallbacks();\n          }\n        },\n        getScrollable: function getScrollable() {\n          return this._scrollable;\n        },\n        init: function init() {\n          var that = this;\n          var dataController = that.getController(\"data\");\n          that.callBase();\n          that._editorFactoryController = that.getController(\"editorFactory\");\n          that._rowHeight = 0;\n          that._scrollTop = 0;\n          that._scrollLeft = -1;\n          that._hasHeight = false;\n          dataController.loadingChanged.add(function (isLoading, messageText) {\n            that.setLoading(isLoading, messageText);\n          });\n          dataController.dataSourceChanged.add(function () {\n            if (that._scrollLeft >= 0) {\n              that._handleScroll({\n                scrollOffset: {\n                  top: that._scrollTop,\n                  left: that._scrollLeft\n                }\n              });\n            }\n          });\n        },\n        _handleDataChanged: function _handleDataChanged(change) {\n          var that = this;\n\n          switch (change.changeType) {\n            case \"refresh\":\n            case \"prepend\":\n            case \"append\":\n            case \"update\":\n              that.render(null, change);\n              break;\n\n            default:\n              that._update(change);\n\n          }\n        },\n        publicMethods: function publicMethods() {\n          return [\"isScrollbarVisible\", \"getTopVisibleRowData\", \"getScrollbarWidth\", \"getCellElement\", \"getRowElement\", \"getScrollable\"];\n        },\n        contentWidth: function contentWidth() {\n          return this.element().width() - this.getScrollbarWidth();\n        },\n        getScrollbarWidth: function getScrollbarWidth(isHorizontal) {\n          var scrollableContainer = this._scrollableContainer && this._scrollableContainer.get(0);\n\n          var scrollbarWidth = 0;\n\n          if (scrollableContainer) {\n            if (!isHorizontal) {\n              scrollbarWidth = scrollableContainer.clientWidth ? scrollableContainer.offsetWidth - scrollableContainer.clientWidth : 0;\n            } else {\n              scrollbarWidth = scrollableContainer.clientHeight ? scrollableContainer.offsetHeight - scrollableContainer.clientHeight : 0;\n              scrollbarWidth += getScrollableBottomPadding(this);\n            }\n          }\n\n          return scrollbarWidth > 0 ? scrollbarWidth : 0;\n        },\n        _fireColumnResizedCallbacks: function _fireColumnResizedCallbacks() {\n          var that = this;\n          var lastColumnWidths = that._lastColumnWidths || [];\n          var columnWidths = [];\n          var columns = that.getColumns();\n          var i;\n\n          for (i = 0; i < columns.length; i++) {\n            columnWidths[i] = columns[i].visibleWidth;\n\n            if (columns[i].resizedCallbacks && !(0, _type.isDefined)(columns[i].groupIndex) && lastColumnWidths[i] !== columnWidths[i]) {\n              columns[i].resizedCallbacks.fire(columnWidths[i]);\n            }\n          }\n\n          that._lastColumnWidths = columnWidths;\n        },\n        _updateLastRowBorder: function _updateLastRowBorder(isFreeSpaceRowVisible) {\n          if (this.option(\"showBorders\") && this.option(\"showRowLines\") && !isFreeSpaceRowVisible) {\n            this.element().addClass(LAST_ROW_BORDER);\n          } else {\n            this.element().removeClass(LAST_ROW_BORDER);\n          }\n        },\n        _updateScrollable: function _updateScrollable() {\n          var dxScrollable = _ui2.default.getInstance(this.element());\n\n          if (dxScrollable) {\n            dxScrollable.update();\n\n            this._updateHorizontalScrollPosition();\n          }\n        },\n        _updateHorizontalScrollPosition: function _updateHorizontalScrollPosition() {\n          var scrollable = this.getScrollable();\n          var scrollLeft = scrollable && scrollable.scrollOffset().left;\n\n          if (this._scrollLeft >= 0 && scrollLeft !== this._scrollLeft) {\n            scrollable.scrollTo({\n              x: this._scrollLeft\n            });\n          }\n        },\n        _resizeCore: function _resizeCore() {\n          var that = this;\n\n          that._fireColumnResizedCallbacks();\n\n          that._updateRowHeight();\n\n          (0, _common.deferRender)(function () {\n            that._renderScrollable();\n\n            that.renderNoDataText();\n            that.updateFreeSpaceRowHeight();\n            (0, _common.deferUpdate)(function () {\n              that._updateScrollable();\n            });\n          });\n        },\n        scrollTo: function scrollTo(location) {\n          var $element = this.element();\n\n          var dxScrollable = $element && _ui2.default.getInstance($element);\n\n          if (dxScrollable) {\n            dxScrollable.scrollTo(location);\n          }\n        },\n        height: function height(_height, hasHeight) {\n          var that = this;\n          var $element = this.element();\n\n          if (0 === arguments.length) {\n            return $element ? $element.outerHeight(true) : 0;\n          }\n\n          that._hasHeight = void 0 === hasHeight ? \"auto\" !== _height : hasHeight;\n\n          if ((0, _type.isDefined)(_height) && $element) {\n            _style2.default.setHeight($element, _height);\n          }\n        },\n        setLoading: function setLoading(isLoading, messageText) {\n          var that = this;\n          var loadPanel = that._loadPanel;\n          var dataController = that._dataController;\n          var loadPanelOptions = that.option(\"loadPanel\") || {};\n          var animation = dataController.isLoaded() ? loadPanelOptions.animation : null;\n          var $element = that.element();\n          var visibilityOptions;\n\n          if (!(0, _window.hasWindow)()) {\n            return;\n          }\n\n          if (!loadPanel && void 0 !== messageText && dataController.isLocalStore() && \"auto\" === loadPanelOptions.enabled && $element) {\n            that._renderLoadPanel($element, $element.parent());\n\n            loadPanel = that._loadPanel;\n          }\n\n          if (loadPanel) {\n            visibilityOptions = {\n              message: messageText || loadPanelOptions.text,\n              animation: animation,\n              visible: isLoading\n            };\n            clearTimeout(that._hideLoadingTimeoutID);\n\n            if (loadPanel.option(\"visible\") && !isLoading) {\n              that._hideLoadingTimeoutID = setTimeout(function () {\n                loadPanel.option(visibilityOptions);\n              }, LOADPANEL_HIDE_TIMEOUT);\n            } else {\n              loadPanel.option(visibilityOptions);\n            }\n          }\n        },\n        setRowsOpacity: function setRowsOpacity(columnIndex, value) {\n          var $rows = this._getRowElements().not(\".\" + GROUP_ROW_CLASS) || [];\n\n          this._setRowsOpacityCore($rows, this.getColumns(), columnIndex, value);\n        },\n        _getCellElementsCore: function _getCellElementsCore(rowIndex) {\n          var $cells = this.callBase(rowIndex);\n          var groupCellIndex;\n\n          if ($cells) {\n            groupCellIndex = $cells.filter(\".\" + GROUP_CELL_CLASS).index();\n\n            if (groupCellIndex >= 0 && $cells.length > groupCellIndex + 1) {\n              return $cells.slice(0, groupCellIndex + 1);\n            }\n          }\n\n          return $cells;\n        },\n        getTopVisibleItemIndex: function getTopVisibleItemIndex(isFloor) {\n          var that = this;\n          var itemIndex = 0;\n          var prevOffsetTop = 0;\n          var offsetTop = 0;\n          var rowElements;\n          var rowElement;\n          var scrollPosition = that._scrollTop;\n\n          var $contentElement = that._findContentElement();\n\n          var contentElementOffsetTop = $contentElement && $contentElement.offset().top;\n\n          var items = that._dataController.items();\n\n          var tableElement = that._getTableElement();\n\n          if (items.length && tableElement) {\n            rowElements = that._getRowElements(tableElement).filter(\":visible\");\n\n            for (itemIndex = 0; itemIndex < items.length; itemIndex++) {\n              prevOffsetTop = offsetTop;\n              rowElement = rowElements.eq(itemIndex);\n\n              if (rowElement.length) {\n                offsetTop = rowElement.offset().top - contentElementOffsetTop;\n\n                if (offsetTop > scrollPosition) {\n                  if (itemIndex) {\n                    if (isFloor || 2 * scrollPosition < Math.round(offsetTop + prevOffsetTop)) {\n                      itemIndex--;\n                    }\n                  }\n\n                  break;\n                }\n              }\n            }\n\n            if (itemIndex && itemIndex === items.length) {\n              itemIndex--;\n            }\n          }\n\n          return itemIndex;\n        },\n        getTopVisibleRowData: function getTopVisibleRowData() {\n          var itemIndex = this.getTopVisibleItemIndex();\n\n          var items = this._dataController.items();\n\n          if (items[itemIndex]) {\n            return items[itemIndex].data;\n          }\n        },\n        _scrollToElement: function _scrollToElement($element, offset) {\n          var scrollable = this.getScrollable();\n          scrollable && scrollable.scrollToElement($element, offset);\n        },\n        optionChanged: function optionChanged(args) {\n          var that = this;\n          that.callBase(args);\n\n          switch (args.name) {\n            case \"wordWrapEnabled\":\n            case \"showColumnLines\":\n            case \"showRowLines\":\n            case \"rowAlternationEnabled\":\n            case \"rowTemplate\":\n            case \"twoWayBindingEnabled\":\n              that._invalidate(true, true);\n\n              args.handled = true;\n              break;\n\n            case \"scrolling\":\n              that._rowHeight = null;\n              that._tableElement = null;\n              args.handled = true;\n              break;\n\n            case \"rtlEnabled\":\n              that._rowHeight = null;\n              that._tableElement = null;\n              break;\n\n            case \"loadPanel\":\n              that._tableElement = null;\n\n              that._invalidate(true, \"loadPanel.enabled\" !== args.fullName);\n\n              args.handled = true;\n              break;\n\n            case \"noDataText\":\n              that.renderNoDataText();\n              args.handled = true;\n          }\n        },\n        dispose: function dispose() {\n          clearTimeout(this._hideLoadingTimeoutID);\n          this._scrollable && this._scrollable.dispose();\n        },\n        setScrollerSpacing: function setScrollerSpacing() {}\n      };\n    }())\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/grid_core/ui.grid_core.rows.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_window","_events_engine","_events_engine2","_common","_style","_style2","_type","_iterator","_extend","_string","_position","_data","_uiGrid_core","_uiGrid_core2","_uiGrid_core3","_ui","_ui2","_remove_event","_remove_event2","_message","_message2","_browser","_browser2","obj","__esModule","ROWS_VIEW_CLASS","CONTENT_CLASS","NOWRAP_CLASS","GROUP_ROW_CLASS","GROUP_CELL_CLASS","DATA_ROW_CLASS","FREE_SPACE_CLASS","ROW_LINES_CLASS","COLUMN_LINES_CLASS","ROW_ALTERNATION_CLASS","LAST_ROW_BORDER","EMPTY_CLASS","ROW_INSERTED_ANIMATION_CLASS","LOADPANEL_HIDE_TIMEOUT","module","exports","defaultOptions","hoverStateEnabled","scrolling","useNative","loadPanel","enabled","text","default","format","width","height","showIndicator","indicatorSrc","showPane","rowTemplate","columnAutoWidth","noDataText","wordWrapEnabled","showColumnLines","showRowLines","rowAlternationEnabled","activeStateEnabled","twoWayBindingEnabled","views","rowsView","ColumnsView","inherit","defaultCellTemplate","$container","options","isDataTextEmpty","isEmpty","rowType","container","get","setEmptyText","column","encodeHtml","textContent","innerHTML","getScrollableBottomPadding","that","scrollable","getScrollable","Math","ceil","parseFloat","$content","css","_getDefaultTemplate","command","html","_getDefaultGroupTemplate","summaryTexts","option","data","caption","summaryItems","length","getGroupRowSummaryText","groupContinuedMessage","groupContinuesMessage","addClass","_update","_getCellTemplate","template","isDefined","groupIndex","showWhenGrouped","groupCellTemplate","allowRenderToDetachedContainer","render","cellTemplate","_createRow","row","$row","callBase","isGroup","isDataRow","isRowExpanded","visible","hide","isExpanded","setAria","toString","_rowPrepared","rowOptions","_this","getRowAlt","dataIndex","watch","value","toggleClass","_setAriaRowIndex","rowIndex","apply","arguments","component","isPagerMode","pageIndex","pageSize","_dataController","getRowIndexOffset","_afterRowPrepared","e","_this2","arg","args","dataController","getVisibleRows","isNewRow","dispose","generateDataValues","columns","repaintRows","deep","skipImmediate","on","rowElement","_renderScrollable","force","$element","element","children","append","_loadPanel","_renderLoadPanel","parent","isLocalStore","isLoaded","getColumns","allColumnsHasWidth","i","minWidth","_hasHeight","_columnsController","_isColumnFixing","_renderScrollableCore","_handleScroll","_isScrollByEvent","event","_scrollTop","scrollOffset","top","_scrollLeft","left","scrollChanged","fire","name","dxScrollableOptions","_createScrollableOptions","scrollHandler","bind","onScroll","onStop","_scrollable","_createComponent","_scrollableContainer","_$container","renderLoadPanel","_renderContent","contentElement","tableElement","replaceWith","addWidgetPrefix","_findContentElement","_updateContent","newTableElement","change","_getTableElement","changeType","executors","highlightChanges","rowInsertedClass","each","rowIndices","index","$newRowElement","_getRowElements","eq","changeTypes","item","items","push","$rowsElement","$rowElement","columnIndices","is","toggle","_updateCells","prependTo","insertBefore","insertAfter","last","isLiveUpdate","remove","_setTableElement","_createEmptyRow","className","isFixed","$cell","getFixedColumns","_createCell","columnIndex","isNumeric","_appendEmptyRow","$table","$emptyRow","location","$tBodies","_getBodies","first","prepend","_renderFreeSpaceRow","$tableElement","$freeSpaceRowElement","_wrapRowIfNeed","_checkRowKeys","rows","_getRows","keyExpr","store","key","some","fireError","_needUpdateRowHeight","itemsCount","_rowHeight","_getRowsHeight","$rowElements","not","toArray","reduce","sum","getBoundingClientRect","_updateRowHeight","rowsHeight","$rows","_getFreeSpaceRowElements","tableElements","getTableElements","_getNoDataText","_rowClick","executeAction","extend","evaluate","expr","getter","compileGetter","_rowDblClick","_getColumnsCountBeforeGroups","type","_getGroupCellOptions","columnsCountBeforeGroups","colspan","_renderCells","_renderGroupedCells","values","expandColumn","groupColumn","groupColumnAlignment","groupCellOptions","allowCollapsing","scrollingMode","cssClass","_renderCell","getDefaultAlignment","alignment","_renderRows","updateFreeSpaceRowHeight","_renderRow","renderTemplate","_renderTable","resizeCompletedHandler","scrollableInstance","closest","getWindow","document","resizeCompleted","_visibilityChanged","add","_createTable","appendTo","_renderCore","_lastColumnWidths","_getCellOptions","parameters","summaryCells","displayValue","getDisplayValue","groupingTextsOptions","oldValue","formatValue","resized","resizedCallbacks","isContinuationOnNextPage","isContinuation","_setRowsOpacityCore","visibleColumns","columnsController","columnID","isBand","hasClass","isParentBandColumn","opacity","_getDevicePixelRatio","devicePixelRatio","renderNoDataText","getCellOptions","columnIdentifier","cellOptions","isString","columnOption","getVisibleColumns","calculateCellValue","getRow","itemCount","freeSpaceRowElements","freeSpaceRowCount","totalCount","isFreeSpaceRowVisible","pageCount","setHeight","_updateLastRowBorder","deferUpdate","scrollablePadding","scrollbarWidth","getScrollbarWidth","elementHeightWithoutScrollbar","contentHeight","outerHeight","showFreeSpaceRow","borderTopWidth","heightCorrection","webkit","resultHeight","deferRender","show","_columnOptionChanged","optionNames","grouping","visibleWidth","_fireColumnResizedCallbacks","init","getController","_editorFactoryController","loadingChanged","isLoading","messageText","setLoading","dataSourceChanged","_handleDataChanged","publicMethods","contentWidth","isHorizontal","scrollableContainer","clientWidth","offsetWidth","clientHeight","offsetHeight","lastColumnWidths","columnWidths","removeClass","_updateScrollable","dxScrollable","getInstance","update","_updateHorizontalScrollPosition","scrollLeft","scrollTo","x","_resizeCore","_height","hasHeight","loadPanelOptions","animation","visibilityOptions","hasWindow","message","clearTimeout","_hideLoadingTimeoutID","setTimeout","setRowsOpacity","_getCellElementsCore","$cells","groupCellIndex","filter","slice","getTopVisibleItemIndex","isFloor","itemIndex","prevOffsetTop","offsetTop","rowElements","scrollPosition","$contentElement","contentElementOffsetTop","offset","round","getTopVisibleRowData","_scrollToElement","scrollToElement","optionChanged","_invalidate","handled","_tableElement","fullName","setScrollerSpacing"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.rows.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _style = require(\"../../core/utils/style\");\r\nvar _style2 = _interopRequireDefault(_style);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _string = require(\"../../core/utils/string\");\r\nvar _position = require(\"../../core/utils/position\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _uiGrid_core = require(\"./ui.grid_core.utils\");\r\nvar _uiGrid_core2 = require(\"./ui.grid_core.columns_view\");\r\nvar _uiGrid_core3 = _interopRequireDefault(_uiGrid_core2);\r\nvar _ui = require(\"../scroll_view/ui.scrollable\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _remove_event = require(\"../../core/remove_event\");\r\nvar _remove_event2 = _interopRequireDefault(_remove_event);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar ROWS_VIEW_CLASS = \"rowsview\";\r\nvar CONTENT_CLASS = \"content\";\r\nvar NOWRAP_CLASS = \"nowrap\";\r\nvar GROUP_ROW_CLASS = \"dx-group-row\";\r\nvar GROUP_CELL_CLASS = \"dx-group-cell\";\r\nvar DATA_ROW_CLASS = \"dx-data-row\";\r\nvar FREE_SPACE_CLASS = \"dx-freespace-row\";\r\nvar ROW_LINES_CLASS = \"dx-row-lines\";\r\nvar COLUMN_LINES_CLASS = \"dx-column-lines\";\r\nvar ROW_ALTERNATION_CLASS = \"dx-row-alt\";\r\nvar LAST_ROW_BORDER = \"dx-last-row-border\";\r\nvar EMPTY_CLASS = \"dx-empty\";\r\nvar ROW_INSERTED_ANIMATION_CLASS = \"row-inserted-animation\";\r\nvar LOADPANEL_HIDE_TIMEOUT = 200;\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            hoverStateEnabled: false,\r\n            scrolling: {\r\n                useNative: \"auto\"\r\n            },\r\n            loadPanel: {\r\n                enabled: \"auto\",\r\n                text: _message2.default.format(\"Loading\"),\r\n                width: 200,\r\n                height: 90,\r\n                showIndicator: true,\r\n                indicatorSrc: \"\",\r\n                showPane: true\r\n            },\r\n            rowTemplate: null,\r\n            columnAutoWidth: false,\r\n            noDataText: _message2.default.format(\"dxDataGrid-noDataText\"),\r\n            wordWrapEnabled: false,\r\n            showColumnLines: true,\r\n            showRowLines: false,\r\n            rowAlternationEnabled: false,\r\n            activeStateEnabled: false,\r\n            twoWayBindingEnabled: true\r\n        }\r\n    },\r\n    views: {\r\n        rowsView: _uiGrid_core3.default.ColumnsView.inherit(function() {\r\n            var defaultCellTemplate = function($container, options) {\r\n                var isDataTextEmpty = (0, _string.isEmpty)(options.text) && \"data\" === options.rowType;\r\n                var text = options.text;\r\n                var container = $container.get(0);\r\n                if (isDataTextEmpty) {\r\n                    (0, _uiGrid_core.setEmptyText)($container)\r\n                } else {\r\n                    if (options.column.encodeHtml) {\r\n                        container.textContent = text\r\n                    } else {\r\n                        container.innerHTML = text\r\n                    }\r\n                }\r\n            };\r\n            var getScrollableBottomPadding = function(that) {\r\n                var scrollable = that.getScrollable();\r\n                return scrollable ? Math.ceil(parseFloat(scrollable.$content().css(\"paddingBottom\"))) : 0\r\n            };\r\n            return {\r\n                _getDefaultTemplate: function(column) {\r\n                    switch (column.command) {\r\n                        case \"empty\":\r\n                            return function(container) {\r\n                                container.html(\"&nbsp;\")\r\n                            };\r\n                        default:\r\n                            return defaultCellTemplate\r\n                    }\r\n                },\r\n                _getDefaultGroupTemplate: function(column) {\r\n                    var that = this;\r\n                    var summaryTexts = that.option(\"summary.texts\");\r\n                    return function($container, options) {\r\n                        var data = options.data;\r\n                        var text = options.column.caption + \": \" + options.text;\r\n                        var container = $container.get(0);\r\n                        if (options.summaryItems && options.summaryItems.length) {\r\n                            text += \" \" + (0, _uiGrid_core.getGroupRowSummaryText)(options.summaryItems, summaryTexts)\r\n                        }\r\n                        if (data) {\r\n                            if (options.groupContinuedMessage && options.groupContinuesMessage) {\r\n                                text += \" (\" + options.groupContinuedMessage + \". \" + options.groupContinuesMessage + \")\"\r\n                            } else {\r\n                                if (options.groupContinuesMessage) {\r\n                                    text += \" (\" + options.groupContinuesMessage + \")\"\r\n                                } else {\r\n                                    if (options.groupContinuedMessage) {\r\n                                        text += \" (\" + options.groupContinuedMessage + \")\"\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        $container.addClass(GROUP_CELL_CLASS);\r\n                        if (column.encodeHtml) {\r\n                            container.textContent = text\r\n                        } else {\r\n                            container.innerHTML = text\r\n                        }\r\n                    }\r\n                },\r\n                _update: function() {},\r\n                _getCellTemplate: function(options) {\r\n                    var that = this;\r\n                    var column = options.column;\r\n                    var template;\r\n                    if (\"group\" === options.rowType && (0, _type.isDefined)(column.groupIndex) && !column.showWhenGrouped && !column.command) {\r\n                        template = column.groupCellTemplate || {\r\n                            allowRenderToDetachedContainer: true,\r\n                            render: that._getDefaultGroupTemplate(column)\r\n                        }\r\n                    } else {\r\n                        if ((\"data\" === options.rowType || column.command) && column.cellTemplate) {\r\n                            template = column.cellTemplate\r\n                        } else {\r\n                            template = {\r\n                                allowRenderToDetachedContainer: true,\r\n                                render: that._getDefaultTemplate(column)\r\n                            }\r\n                        }\r\n                    }\r\n                    return template\r\n                },\r\n                _createRow: function(row) {\r\n                    var $row = this.callBase(row);\r\n                    var isGroup;\r\n                    var isDataRow;\r\n                    var isRowExpanded;\r\n                    if (row) {\r\n                        isGroup = \"group\" === row.rowType;\r\n                        isDataRow = \"data\" === row.rowType;\r\n                        isDataRow && $row.addClass(DATA_ROW_CLASS);\r\n                        isDataRow && this.option(\"showRowLines\") && $row.addClass(ROW_LINES_CLASS);\r\n                        this.option(\"showColumnLines\") && $row.addClass(COLUMN_LINES_CLASS);\r\n                        if (false === row.visible) {\r\n                            $row.hide()\r\n                        }\r\n                        if (isGroup) {\r\n                            $row.addClass(GROUP_ROW_CLASS);\r\n                            isRowExpanded = row.isExpanded;\r\n                            this.setAria(\"role\", \"row\", $row);\r\n                            this.setAria(\"expanded\", (0, _type.isDefined)(isRowExpanded) && isRowExpanded.toString(), $row)\r\n                        }\r\n                    }\r\n                    return $row\r\n                },\r\n                _rowPrepared: function($row, rowOptions, row) {\r\n                    var _this = this;\r\n                    if (\"data\" === rowOptions.rowType) {\r\n                        if (this.option(\"rowAlternationEnabled\")) {\r\n                            var getRowAlt = function() {\r\n                                return row.dataIndex % 2 === 1\r\n                            };\r\n                            getRowAlt() && $row.addClass(ROW_ALTERNATION_CLASS);\r\n                            rowOptions.watch && rowOptions.watch(getRowAlt, function(value) {\r\n                                $row.toggleClass(ROW_ALTERNATION_CLASS, value)\r\n                            })\r\n                        }\r\n                        this._setAriaRowIndex(rowOptions, $row);\r\n                        rowOptions.watch && rowOptions.watch(function() {\r\n                            return rowOptions.rowIndex\r\n                        }, function() {\r\n                            return _this._setAriaRowIndex(rowOptions, $row)\r\n                        })\r\n                    }\r\n                    this.callBase.apply(this, arguments)\r\n                },\r\n                _setAriaRowIndex: function(row, $row) {\r\n                    var component = this.component;\r\n                    var isPagerMode = \"standard\" === component.option(\"scrolling.mode\") && \"virtual\" !== component.option(\"scrolling.rowRenderingMode\");\r\n                    var rowIndex = row.rowIndex + 1;\r\n                    if (isPagerMode) {\r\n                        rowIndex = component.pageIndex() * component.pageSize() + rowIndex\r\n                    } else {\r\n                        rowIndex += this._dataController.getRowIndexOffset()\r\n                    }\r\n                    this.setAria(\"rowindex\", rowIndex, $row)\r\n                },\r\n                _afterRowPrepared: function(e) {\r\n                    var _this2 = this;\r\n                    var arg = e.args[0];\r\n                    var dataController = this._dataController;\r\n                    var row = dataController.getVisibleRows()[arg.rowIndex];\r\n                    var watch = this.option(\"integrationOptions.watchMethod\");\r\n                    if (!arg.data || \"data\" !== arg.rowType || arg.isNewRow || !this.option(\"twoWayBindingEnabled\") || !watch || !row) {\r\n                        return\r\n                    }\r\n                    var dispose = watch(function() {\r\n                        return dataController.generateDataValues(arg.data, arg.columns)\r\n                    }, function() {\r\n                        dataController.repaintRows([row.rowIndex], _this2.option(\"repaintChangesOnly\"))\r\n                    }, {\r\n                        deep: true,\r\n                        skipImmediate: true\r\n                    });\r\n                    _events_engine2.default.on(arg.rowElement, _remove_event2.default, dispose)\r\n                },\r\n                _renderScrollable: function(force) {\r\n                    var that = this;\r\n                    var $element = that.element();\r\n                    if (!$element.children().length) {\r\n                        $element.append(\"<div>\")\r\n                    }\r\n                    if (force || !that._loadPanel) {\r\n                        that._renderLoadPanel($element, $element.parent(), that._dataController.isLocalStore())\r\n                    }\r\n                    if ((force || !that.getScrollable()) && that._dataController.isLoaded()) {\r\n                        var columns = that.getColumns();\r\n                        var allColumnsHasWidth = true;\r\n                        for (var i = 0; i < columns.length; i++) {\r\n                            if (!columns[i].width && !columns[i].minWidth) {\r\n                                allColumnsHasWidth = false;\r\n                                break\r\n                            }\r\n                        }\r\n                        if (that.option(\"columnAutoWidth\") || that._hasHeight || allColumnsHasWidth || that._columnsController._isColumnFixing()) {\r\n                            that._renderScrollableCore($element)\r\n                        }\r\n                    }\r\n                },\r\n                _handleScroll: function(e) {\r\n                    var that = this;\r\n                    that._isScrollByEvent = !!e.event;\r\n                    that._scrollTop = e.scrollOffset.top;\r\n                    that._scrollLeft = e.scrollOffset.left;\r\n                    that.scrollChanged.fire(e.scrollOffset, that.name)\r\n                },\r\n                _renderScrollableCore: function($element) {\r\n                    var that = this;\r\n                    var dxScrollableOptions = that._createScrollableOptions();\r\n                    var scrollHandler = that._handleScroll.bind(that);\r\n                    dxScrollableOptions.onScroll = scrollHandler;\r\n                    dxScrollableOptions.onStop = scrollHandler;\r\n                    that._scrollable = that._createComponent($element, _ui2.default, dxScrollableOptions);\r\n                    that._scrollableContainer = that._scrollable && that._scrollable._$container\r\n                },\r\n                _renderLoadPanel: _uiGrid_core.renderLoadPanel,\r\n                _renderContent: function(contentElement, tableElement) {\r\n                    contentElement.replaceWith((0, _renderer2.default)(\"<div>\").addClass(this.addWidgetPrefix(CONTENT_CLASS)).append(tableElement));\r\n                    return this._findContentElement()\r\n                },\r\n                _updateContent: function(newTableElement, change) {\r\n                    var that = this;\r\n                    var tableElement = that._getTableElement();\r\n                    var contentElement = that._findContentElement();\r\n                    var changeType = change && change.changeType;\r\n                    var executors = [];\r\n                    var highlightChanges = this.option(\"highlightChanges\");\r\n                    var rowInsertedClass = this.addWidgetPrefix(ROW_INSERTED_ANIMATION_CLASS);\r\n                    switch (changeType) {\r\n                        case \"update\":\r\n                            (0, _iterator.each)(change.rowIndices, function(index, rowIndex) {\r\n                                var $newRowElement = that._getRowElements(newTableElement).eq(index);\r\n                                var changeType = change.changeTypes && change.changeTypes[index];\r\n                                var item = change.items && change.items[index];\r\n                                executors.push(function() {\r\n                                    var $rowsElement = that._getRowElements();\r\n                                    var $rowElement = $rowsElement.eq(rowIndex);\r\n                                    switch (changeType) {\r\n                                        case \"update\":\r\n                                            if (item) {\r\n                                                var columnIndices = change.columnIndices && change.columnIndices[index];\r\n                                                if ((0, _type.isDefined)(item.visible) && item.visible !== $rowElement.is(\":visible\")) {\r\n                                                    $rowElement.toggle(item.visible)\r\n                                                } else {\r\n                                                    if (columnIndices) {\r\n                                                        that._updateCells($rowElement, $newRowElement, columnIndices)\r\n                                                    } else {\r\n                                                        $rowElement.replaceWith($newRowElement)\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            break;\r\n                                        case \"insert\":\r\n                                            if (!$rowsElement.length) {\r\n                                                $newRowElement.prependTo(tableElement.children(\"tbody\"))\r\n                                            } else {\r\n                                                if ($rowElement.length) {\r\n                                                    $newRowElement.insertBefore($rowElement)\r\n                                                } else {\r\n                                                    $newRowElement.insertAfter($rowsElement.last())\r\n                                                }\r\n                                            }\r\n                                            if (highlightChanges && change.isLiveUpdate) {\r\n                                                $newRowElement.addClass(rowInsertedClass)\r\n                                            }\r\n                                            break;\r\n                                        case \"remove\":\r\n                                            $rowElement.remove()\r\n                                    }\r\n                                })\r\n                            });\r\n                            (0, _iterator.each)(executors, function() {\r\n                                this()\r\n                            });\r\n                            newTableElement.remove();\r\n                            break;\r\n                        default:\r\n                            that._setTableElement(newTableElement);\r\n                            contentElement.addClass(that.addWidgetPrefix(CONTENT_CLASS));\r\n                            that._renderContent(contentElement, newTableElement)\r\n                    }\r\n                },\r\n                _createEmptyRow: function(className, isFixed, height) {\r\n                    var that = this;\r\n                    var i;\r\n                    var $cell;\r\n                    var $row = that._createRow();\r\n                    var columns = isFixed ? this.getFixedColumns() : this.getColumns();\r\n                    $row.addClass(className).toggleClass(COLUMN_LINES_CLASS, that.option(\"showColumnLines\"));\r\n                    for (i = 0; i < columns.length; i++) {\r\n                        $cell = that._createCell({\r\n                            column: columns[i],\r\n                            rowType: \"freeSpace\",\r\n                            columnIndex: i,\r\n                            columns: columns\r\n                        });\r\n                        (0, _type.isNumeric)(height) && $cell.css(\"height\", height);\r\n                        $row.append($cell)\r\n                    }\r\n                    that.setAria(\"role\", \"presentation\", $row);\r\n                    return $row\r\n                },\r\n                _appendEmptyRow: function($table, $emptyRow, location) {\r\n                    var $tBodies = this._getBodies($table);\r\n                    var $container = $tBodies.length && !$emptyRow.is(\"tbody\") ? $tBodies : $table;\r\n                    if (\"top\" === location) {\r\n                        $container.first().prepend($emptyRow)\r\n                    } else {\r\n                        $container.last().append($emptyRow)\r\n                    }\r\n                },\r\n                _renderFreeSpaceRow: function($tableElement) {\r\n                    var $freeSpaceRowElement = this._createEmptyRow(FREE_SPACE_CLASS);\r\n                    $freeSpaceRowElement = this._wrapRowIfNeed($tableElement, $freeSpaceRowElement);\r\n                    this._appendEmptyRow($tableElement, $freeSpaceRowElement)\r\n                },\r\n                _checkRowKeys: function(options) {\r\n                    var that = this;\r\n                    var rows = that._getRows(options);\r\n                    var keyExpr = that._dataController.store() && that._dataController.store().key();\r\n                    keyExpr && rows.some(function(row) {\r\n                        if (\"data\" === row.rowType && void 0 === row.key) {\r\n                            that._dataController.fireError(\"E1046\", keyExpr);\r\n                            return true\r\n                        }\r\n                    })\r\n                },\r\n                _needUpdateRowHeight: function(itemsCount) {\r\n                    return itemsCount > 0 && !this._rowHeight\r\n                },\r\n                _getRowsHeight: function($tableElement) {\r\n                    var $rowElements = $tableElement.children(\"tbody\").children().not(\".dx-virtual-row\").not(\".\" + FREE_SPACE_CLASS);\r\n                    return $rowElements.toArray().reduce(function(sum, row) {\r\n                        return sum + row.getBoundingClientRect().height\r\n                    }, 0)\r\n                },\r\n                _updateRowHeight: function() {\r\n                    var that = this;\r\n                    var rowsHeight;\r\n                    var $tableElement = that._getTableElement();\r\n                    var itemsCount = that._dataController.items().length;\r\n                    if ($tableElement && that._needUpdateRowHeight(itemsCount)) {\r\n                        rowsHeight = that._getRowsHeight($tableElement);\r\n                        that._rowHeight = rowsHeight / itemsCount\r\n                    }\r\n                },\r\n                _findContentElement: function() {\r\n                    var $content = this.element();\r\n                    var scrollable = this.getScrollable();\r\n                    if ($content) {\r\n                        if (scrollable) {\r\n                            $content = scrollable.$content()\r\n                        }\r\n                        return $content.children().first()\r\n                    }\r\n                },\r\n                _getRowElements: function(tableElement) {\r\n                    var $rows = this.callBase(tableElement);\r\n                    return $rows && $rows.not(\".\" + FREE_SPACE_CLASS)\r\n                },\r\n                _getFreeSpaceRowElements: function($table) {\r\n                    var tableElements = $table || this.getTableElements();\r\n                    return tableElements && tableElements.children(\"tbody\").children(\".\" + FREE_SPACE_CLASS)\r\n                },\r\n                _getNoDataText: function() {\r\n                    return this.option(\"noDataText\")\r\n                },\r\n                _rowClick: function(e) {\r\n                    var item = this._dataController.items()[e.rowIndex] || {};\r\n                    this.executeAction(\"onRowClick\", (0, _extend.extend)({\r\n                        evaluate: function(expr) {\r\n                            var getter = (0, _data.compileGetter)(expr);\r\n                            return getter(item.data)\r\n                        }\r\n                    }, e, item))\r\n                },\r\n                _rowDblClick: function(e) {\r\n                    var item = this._dataController.items()[e.rowIndex] || {};\r\n                    this.executeAction(\"onRowDblClick\", (0, _extend.extend)({}, e, item))\r\n                },\r\n                _getColumnsCountBeforeGroups: function(columns) {\r\n                    for (var i = 0; i < columns.length; i++) {\r\n                        if (\"groupExpand\" === columns[i].type) {\r\n                            return i\r\n                        }\r\n                    }\r\n                    return 0\r\n                },\r\n                _getGroupCellOptions: function(options) {\r\n                    var columnsCountBeforeGroups = this._getColumnsCountBeforeGroups(options.columns);\r\n                    var columnIndex = (options.row.groupIndex || 0) + columnsCountBeforeGroups;\r\n                    return {\r\n                        columnIndex: columnIndex,\r\n                        colspan: options.columns.length - columnIndex - 1\r\n                    }\r\n                },\r\n                _renderCells: function($row, options) {\r\n                    if (\"group\" === options.row.rowType) {\r\n                        this._renderGroupedCells($row, options)\r\n                    } else {\r\n                        if (options.row.values) {\r\n                            this.callBase($row, options)\r\n                        }\r\n                    }\r\n                },\r\n                _renderGroupedCells: function($row, options) {\r\n                    var row = options.row;\r\n                    var i;\r\n                    var expandColumn;\r\n                    var columns = options.columns;\r\n                    var rowIndex = row.rowIndex;\r\n                    var isExpanded;\r\n                    var groupColumn;\r\n                    var groupColumnAlignment;\r\n                    var groupCellOptions = this._getGroupCellOptions(options);\r\n                    for (i = 0; i <= groupCellOptions.columnIndex; i++) {\r\n                        if (i === groupCellOptions.columnIndex && columns[i].allowCollapsing && \"infinite\" !== options.scrollingMode) {\r\n                            isExpanded = !!row.isExpanded;\r\n                            expandColumn = columns[i]\r\n                        } else {\r\n                            isExpanded = null;\r\n                            expandColumn = {\r\n                                command: \"expand\",\r\n                                cssClass: columns[i].cssClass\r\n                            }\r\n                        }\r\n                        this._renderCell($row, {\r\n                            value: isExpanded,\r\n                            row: row,\r\n                            rowIndex: rowIndex,\r\n                            column: expandColumn,\r\n                            columnIndex: i\r\n                        })\r\n                    }\r\n                    groupColumnAlignment = (0, _position.getDefaultAlignment)(this.option(\"rtlEnabled\"));\r\n                    groupColumn = (0, _extend.extend)({}, columns[groupCellOptions.columnIndex], {\r\n                        command: null,\r\n                        cssClass: null,\r\n                        width: null,\r\n                        showWhenGrouped: false,\r\n                        alignment: groupColumnAlignment\r\n                    });\r\n                    if (groupCellOptions.colspan > 1) {\r\n                        groupColumn.colspan = groupCellOptions.colspan\r\n                    }\r\n                    this._renderCell($row, {\r\n                        value: row.values[row.groupIndex],\r\n                        row: row,\r\n                        rowIndex: rowIndex,\r\n                        column: groupColumn,\r\n                        columnIndex: groupCellOptions.columnIndex\r\n                    })\r\n                },\r\n                _renderRows: function($table, options) {\r\n                    var that = this;\r\n                    var scrollingMode = that.option(\"scrolling.mode\");\r\n                    that.callBase($table, (0, _extend.extend)({\r\n                        scrollingMode: scrollingMode\r\n                    }, options));\r\n                    that._checkRowKeys(options.change);\r\n                    that._renderFreeSpaceRow($table);\r\n                    if (!that._hasHeight) {\r\n                        that.updateFreeSpaceRowHeight($table)\r\n                    }\r\n                },\r\n                _renderRow: function($table, options) {\r\n                    var that = this;\r\n                    var row = options.row;\r\n                    var rowTemplate = that.option(\"rowTemplate\");\r\n                    if ((\"data\" === row.rowType || \"group\" === row.rowType) && !(0, _type.isDefined)(row.groupIndex) && rowTemplate) {\r\n                        that.renderTemplate($table, rowTemplate, (0, _extend.extend)({\r\n                            columns: options.columns\r\n                        }, row), true)\r\n                    } else {\r\n                        that.callBase($table, options)\r\n                    }\r\n                },\r\n                _renderTable: function(options) {\r\n                    var that = this;\r\n                    var $table = that.callBase(options);\r\n                    var resizeCompletedHandler = function resizeCompletedHandler() {\r\n                        var scrollableInstance = that.getScrollable();\r\n                        if (scrollableInstance && that.element().closest((0, _window.getWindow)().document).length) {\r\n                            that.resizeCompleted.remove(resizeCompletedHandler);\r\n                            scrollableInstance._visibilityChanged(true)\r\n                        }\r\n                    };\r\n                    if (!(0, _type.isDefined)(that._getTableElement())) {\r\n                        that._setTableElement($table);\r\n                        that._renderScrollable(true);\r\n                        that.resizeCompleted.add(resizeCompletedHandler)\r\n                    } else {\r\n                        that._renderScrollable()\r\n                    }\r\n                    return $table\r\n                },\r\n                _createTable: function() {\r\n                    var $table = this.callBase.apply(this, arguments);\r\n                    if (this.option(\"rowTemplate\")) {\r\n                        $table.appendTo(this.component.$element())\r\n                    }\r\n                    return $table\r\n                },\r\n                _renderCore: function(change) {\r\n                    var that = this;\r\n                    var $table;\r\n                    var $element = that.element();\r\n                    $element.addClass(that.addWidgetPrefix(ROWS_VIEW_CLASS)).toggleClass(that.addWidgetPrefix(NOWRAP_CLASS), !that.option(\"wordWrapEnabled\"));\r\n                    $element.toggleClass(EMPTY_CLASS, 0 === that._dataController.items().length);\r\n                    that.setAria(\"role\", \"presentation\", $element);\r\n                    $table = that._renderTable({\r\n                        change: change\r\n                    });\r\n                    that._updateContent($table, change);\r\n                    that.callBase(change);\r\n                    that._lastColumnWidths = null\r\n                },\r\n                _getRows: function(change) {\r\n                    return change && change.items || this._dataController.items()\r\n                },\r\n                _getCellOptions: function(options) {\r\n                    var that = this;\r\n                    var parameters;\r\n                    var column = options.column;\r\n                    var row = options.row;\r\n                    var data = row.data;\r\n                    var summaryCells = row && row.summaryCells;\r\n                    var value = options.value;\r\n                    var displayValue = (0, _uiGrid_core.getDisplayValue)(column, value, data, row.rowType);\r\n                    var groupingTextsOptions;\r\n                    var scrollingMode;\r\n                    parameters = this.callBase(options);\r\n                    parameters.value = value;\r\n                    parameters.oldValue = options.oldValue;\r\n                    parameters.displayValue = displayValue;\r\n                    parameters.row = row;\r\n                    parameters.key = row.key;\r\n                    parameters.data = data;\r\n                    parameters.rowType = row.rowType;\r\n                    parameters.values = row.values;\r\n                    parameters.text = !column.command ? (0, _uiGrid_core.formatValue)(displayValue, column) : \"\";\r\n                    parameters.rowIndex = row.rowIndex;\r\n                    parameters.summaryItems = summaryCells && summaryCells[options.columnIndex];\r\n                    parameters.resized = column.resizedCallbacks;\r\n                    if ((0, _type.isDefined)(column.groupIndex) && !column.command) {\r\n                        groupingTextsOptions = that.option(\"grouping.texts\");\r\n                        scrollingMode = that.option(\"scrolling.mode\");\r\n                        if (\"virtual\" !== scrollingMode && \"infinite\" !== scrollingMode) {\r\n                            parameters.groupContinuesMessage = data && data.isContinuationOnNextPage && groupingTextsOptions && groupingTextsOptions.groupContinuesMessage;\r\n                            parameters.groupContinuedMessage = data && data.isContinuation && groupingTextsOptions && groupingTextsOptions.groupContinuedMessage\r\n                        }\r\n                    }\r\n                    return parameters\r\n                },\r\n                _setRowsOpacityCore: function($rows, visibleColumns, columnIndex, value) {\r\n                    var columnsController = this._columnsController;\r\n                    var columns = columnsController.getColumns();\r\n                    var column = columns && columns[columnIndex];\r\n                    var columnID = column && column.isBand && column.index;\r\n                    (0, _iterator.each)($rows, function(rowIndex, row) {\r\n                        if (!(0, _renderer2.default)(row).hasClass(GROUP_ROW_CLASS)) {\r\n                            for (var i = 0; i < visibleColumns.length; i++) {\r\n                                if ((0, _type.isNumeric)(columnID) && columnsController.isParentBandColumn(visibleColumns[i].index, columnID) || visibleColumns[i].index === columnIndex) {\r\n                                    $rows.eq(rowIndex).children().eq(i).css({\r\n                                        opacity: value\r\n                                    });\r\n                                    if (!(0, _type.isNumeric)(columnID)) {\r\n                                        break\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                },\r\n                _getDevicePixelRatio: function() {\r\n                    return (0, _window.getWindow)().devicePixelRatio\r\n                },\r\n                renderNoDataText: _uiGrid_core.renderNoDataText,\r\n                getCellOptions: function(rowIndex, columnIdentifier) {\r\n                    var rowOptions = this._dataController.items()[rowIndex];\r\n                    var cellOptions;\r\n                    var column;\r\n                    if (rowOptions) {\r\n                        if ((0, _type.isString)(columnIdentifier)) {\r\n                            column = this._columnsController.columnOption(columnIdentifier)\r\n                        } else {\r\n                            column = this._columnsController.getVisibleColumns()[columnIdentifier]\r\n                        }\r\n                        if (column) {\r\n                            cellOptions = this._getCellOptions({\r\n                                value: column.calculateCellValue(rowOptions.data),\r\n                                rowIndex: rowOptions.rowIndex,\r\n                                row: rowOptions,\r\n                                column: column\r\n                            })\r\n                        }\r\n                    }\r\n                    return cellOptions\r\n                },\r\n                getRow: function(index) {\r\n                    if (index >= 0) {\r\n                        var rows = this._getRowElements();\r\n                        if (rows.length > index) {\r\n                            return (0, _renderer2.default)(rows[index])\r\n                        }\r\n                    }\r\n                },\r\n                updateFreeSpaceRowHeight: function($table) {\r\n                    var that = this;\r\n                    var dataController = that._dataController;\r\n                    var itemCount = dataController.items(true).length;\r\n                    var contentElement = that._findContentElement();\r\n                    var freeSpaceRowElements = that._getFreeSpaceRowElements($table);\r\n                    var freeSpaceRowCount;\r\n                    var scrollingMode;\r\n                    if (freeSpaceRowElements && contentElement && dataController.totalCount() >= 0) {\r\n                        var isFreeSpaceRowVisible = false;\r\n                        if (itemCount > 0) {\r\n                            if (!that._hasHeight) {\r\n                                freeSpaceRowCount = dataController.pageSize() - itemCount;\r\n                                scrollingMode = that.option(\"scrolling.mode\");\r\n                                if (freeSpaceRowCount > 0 && dataController.pageCount() > 1 && \"virtual\" !== scrollingMode && \"infinite\" !== scrollingMode) {\r\n                                    _style2.default.setHeight(freeSpaceRowElements, freeSpaceRowCount * that._rowHeight);\r\n                                    isFreeSpaceRowVisible = true\r\n                                }\r\n                                if (!isFreeSpaceRowVisible && $table) {\r\n                                    _style2.default.setHeight(freeSpaceRowElements, 0)\r\n                                } else {\r\n                                    freeSpaceRowElements.toggle(isFreeSpaceRowVisible)\r\n                                }\r\n                                that._updateLastRowBorder(isFreeSpaceRowVisible)\r\n                            } else {\r\n                                freeSpaceRowElements.hide();\r\n                                (0, _common.deferUpdate)(function() {\r\n                                    var scrollablePadding = getScrollableBottomPadding(that);\r\n                                    var scrollbarWidth = that.getScrollbarWidth(true);\r\n                                    var elementHeightWithoutScrollbar = that.element().height() - scrollbarWidth - scrollablePadding;\r\n                                    var contentHeight = contentElement.outerHeight();\r\n                                    var showFreeSpaceRow = elementHeightWithoutScrollbar - contentHeight > 0;\r\n                                    var rowsHeight = that._getRowsHeight(contentElement.children().first());\r\n                                    var $tableElement = $table || that.getTableElements();\r\n                                    var borderTopWidth = Math.ceil(parseFloat($tableElement.css(\"borderTopWidth\")));\r\n                                    var heightCorrection = _browser2.default.webkit && that._getDevicePixelRatio() >= 2 ? 1 : 0;\r\n                                    var resultHeight = elementHeightWithoutScrollbar - rowsHeight - borderTopWidth - heightCorrection;\r\n                                    if (showFreeSpaceRow) {\r\n                                        (0, _common.deferRender)(function() {\r\n                                            freeSpaceRowElements.css(\"height\", resultHeight);\r\n                                            isFreeSpaceRowVisible = true;\r\n                                            freeSpaceRowElements.show()\r\n                                        })\r\n                                    }(0, _common.deferRender)(function() {\r\n                                        that._updateLastRowBorder(isFreeSpaceRowVisible)\r\n                                    })\r\n                                })\r\n                            }\r\n                        } else {\r\n                            freeSpaceRowElements.css(\"height\", 0);\r\n                            freeSpaceRowElements.show();\r\n                            that._updateLastRowBorder(true)\r\n                        }\r\n                    }\r\n                },\r\n                _columnOptionChanged: function(e) {\r\n                    var optionNames = e.optionNames;\r\n                    if (e.changeTypes.grouping) {\r\n                        return\r\n                    }\r\n                    if (optionNames.width || optionNames.visibleWidth) {\r\n                        this.callBase(e);\r\n                        this._fireColumnResizedCallbacks()\r\n                    }\r\n                },\r\n                getScrollable: function() {\r\n                    return this._scrollable\r\n                },\r\n                init: function() {\r\n                    var that = this;\r\n                    var dataController = that.getController(\"data\");\r\n                    that.callBase();\r\n                    that._editorFactoryController = that.getController(\"editorFactory\");\r\n                    that._rowHeight = 0;\r\n                    that._scrollTop = 0;\r\n                    that._scrollLeft = -1;\r\n                    that._hasHeight = false;\r\n                    dataController.loadingChanged.add(function(isLoading, messageText) {\r\n                        that.setLoading(isLoading, messageText)\r\n                    });\r\n                    dataController.dataSourceChanged.add(function() {\r\n                        if (that._scrollLeft >= 0) {\r\n                            that._handleScroll({\r\n                                scrollOffset: {\r\n                                    top: that._scrollTop,\r\n                                    left: that._scrollLeft\r\n                                }\r\n                            })\r\n                        }\r\n                    })\r\n                },\r\n                _handleDataChanged: function(change) {\r\n                    var that = this;\r\n                    switch (change.changeType) {\r\n                        case \"refresh\":\r\n                        case \"prepend\":\r\n                        case \"append\":\r\n                        case \"update\":\r\n                            that.render(null, change);\r\n                            break;\r\n                        default:\r\n                            that._update(change)\r\n                    }\r\n                },\r\n                publicMethods: function() {\r\n                    return [\"isScrollbarVisible\", \"getTopVisibleRowData\", \"getScrollbarWidth\", \"getCellElement\", \"getRowElement\", \"getScrollable\"]\r\n                },\r\n                contentWidth: function() {\r\n                    return this.element().width() - this.getScrollbarWidth()\r\n                },\r\n                getScrollbarWidth: function(isHorizontal) {\r\n                    var scrollableContainer = this._scrollableContainer && this._scrollableContainer.get(0);\r\n                    var scrollbarWidth = 0;\r\n                    if (scrollableContainer) {\r\n                        if (!isHorizontal) {\r\n                            scrollbarWidth = scrollableContainer.clientWidth ? scrollableContainer.offsetWidth - scrollableContainer.clientWidth : 0\r\n                        } else {\r\n                            scrollbarWidth = scrollableContainer.clientHeight ? scrollableContainer.offsetHeight - scrollableContainer.clientHeight : 0;\r\n                            scrollbarWidth += getScrollableBottomPadding(this)\r\n                        }\r\n                    }\r\n                    return scrollbarWidth > 0 ? scrollbarWidth : 0\r\n                },\r\n                _fireColumnResizedCallbacks: function() {\r\n                    var that = this;\r\n                    var lastColumnWidths = that._lastColumnWidths || [];\r\n                    var columnWidths = [];\r\n                    var columns = that.getColumns();\r\n                    var i;\r\n                    for (i = 0; i < columns.length; i++) {\r\n                        columnWidths[i] = columns[i].visibleWidth;\r\n                        if (columns[i].resizedCallbacks && !(0, _type.isDefined)(columns[i].groupIndex) && lastColumnWidths[i] !== columnWidths[i]) {\r\n                            columns[i].resizedCallbacks.fire(columnWidths[i])\r\n                        }\r\n                    }\r\n                    that._lastColumnWidths = columnWidths\r\n                },\r\n                _updateLastRowBorder: function(isFreeSpaceRowVisible) {\r\n                    if (this.option(\"showBorders\") && this.option(\"showRowLines\") && !isFreeSpaceRowVisible) {\r\n                        this.element().addClass(LAST_ROW_BORDER)\r\n                    } else {\r\n                        this.element().removeClass(LAST_ROW_BORDER)\r\n                    }\r\n                },\r\n                _updateScrollable: function() {\r\n                    var dxScrollable = _ui2.default.getInstance(this.element());\r\n                    if (dxScrollable) {\r\n                        dxScrollable.update();\r\n                        this._updateHorizontalScrollPosition()\r\n                    }\r\n                },\r\n                _updateHorizontalScrollPosition: function() {\r\n                    var scrollable = this.getScrollable();\r\n                    var scrollLeft = scrollable && scrollable.scrollOffset().left;\r\n                    if (this._scrollLeft >= 0 && scrollLeft !== this._scrollLeft) {\r\n                        scrollable.scrollTo({\r\n                            x: this._scrollLeft\r\n                        })\r\n                    }\r\n                },\r\n                _resizeCore: function() {\r\n                    var that = this;\r\n                    that._fireColumnResizedCallbacks();\r\n                    that._updateRowHeight();\r\n                    (0, _common.deferRender)(function() {\r\n                        that._renderScrollable();\r\n                        that.renderNoDataText();\r\n                        that.updateFreeSpaceRowHeight();\r\n                        (0, _common.deferUpdate)(function() {\r\n                            that._updateScrollable()\r\n                        })\r\n                    })\r\n                },\r\n                scrollTo: function(location) {\r\n                    var $element = this.element();\r\n                    var dxScrollable = $element && _ui2.default.getInstance($element);\r\n                    if (dxScrollable) {\r\n                        dxScrollable.scrollTo(location)\r\n                    }\r\n                },\r\n                height: function(_height, hasHeight) {\r\n                    var that = this;\r\n                    var $element = this.element();\r\n                    if (0 === arguments.length) {\r\n                        return $element ? $element.outerHeight(true) : 0\r\n                    }\r\n                    that._hasHeight = void 0 === hasHeight ? \"auto\" !== _height : hasHeight;\r\n                    if ((0, _type.isDefined)(_height) && $element) {\r\n                        _style2.default.setHeight($element, _height)\r\n                    }\r\n                },\r\n                setLoading: function(isLoading, messageText) {\r\n                    var that = this;\r\n                    var loadPanel = that._loadPanel;\r\n                    var dataController = that._dataController;\r\n                    var loadPanelOptions = that.option(\"loadPanel\") || {};\r\n                    var animation = dataController.isLoaded() ? loadPanelOptions.animation : null;\r\n                    var $element = that.element();\r\n                    var visibilityOptions;\r\n                    if (!(0, _window.hasWindow)()) {\r\n                        return\r\n                    }\r\n                    if (!loadPanel && void 0 !== messageText && dataController.isLocalStore() && \"auto\" === loadPanelOptions.enabled && $element) {\r\n                        that._renderLoadPanel($element, $element.parent());\r\n                        loadPanel = that._loadPanel\r\n                    }\r\n                    if (loadPanel) {\r\n                        visibilityOptions = {\r\n                            message: messageText || loadPanelOptions.text,\r\n                            animation: animation,\r\n                            visible: isLoading\r\n                        };\r\n                        clearTimeout(that._hideLoadingTimeoutID);\r\n                        if (loadPanel.option(\"visible\") && !isLoading) {\r\n                            that._hideLoadingTimeoutID = setTimeout(function() {\r\n                                loadPanel.option(visibilityOptions)\r\n                            }, LOADPANEL_HIDE_TIMEOUT)\r\n                        } else {\r\n                            loadPanel.option(visibilityOptions)\r\n                        }\r\n                    }\r\n                },\r\n                setRowsOpacity: function(columnIndex, value) {\r\n                    var $rows = this._getRowElements().not(\".\" + GROUP_ROW_CLASS) || [];\r\n                    this._setRowsOpacityCore($rows, this.getColumns(), columnIndex, value)\r\n                },\r\n                _getCellElementsCore: function(rowIndex) {\r\n                    var $cells = this.callBase(rowIndex);\r\n                    var groupCellIndex;\r\n                    if ($cells) {\r\n                        groupCellIndex = $cells.filter(\".\" + GROUP_CELL_CLASS).index();\r\n                        if (groupCellIndex >= 0 && $cells.length > groupCellIndex + 1) {\r\n                            return $cells.slice(0, groupCellIndex + 1)\r\n                        }\r\n                    }\r\n                    return $cells\r\n                },\r\n                getTopVisibleItemIndex: function(isFloor) {\r\n                    var that = this;\r\n                    var itemIndex = 0;\r\n                    var prevOffsetTop = 0;\r\n                    var offsetTop = 0;\r\n                    var rowElements;\r\n                    var rowElement;\r\n                    var scrollPosition = that._scrollTop;\r\n                    var $contentElement = that._findContentElement();\r\n                    var contentElementOffsetTop = $contentElement && $contentElement.offset().top;\r\n                    var items = that._dataController.items();\r\n                    var tableElement = that._getTableElement();\r\n                    if (items.length && tableElement) {\r\n                        rowElements = that._getRowElements(tableElement).filter(\":visible\");\r\n                        for (itemIndex = 0; itemIndex < items.length; itemIndex++) {\r\n                            prevOffsetTop = offsetTop;\r\n                            rowElement = rowElements.eq(itemIndex);\r\n                            if (rowElement.length) {\r\n                                offsetTop = rowElement.offset().top - contentElementOffsetTop;\r\n                                if (offsetTop > scrollPosition) {\r\n                                    if (itemIndex) {\r\n                                        if (isFloor || 2 * scrollPosition < Math.round(offsetTop + prevOffsetTop)) {\r\n                                            itemIndex--\r\n                                        }\r\n                                    }\r\n                                    break\r\n                                }\r\n                            }\r\n                        }\r\n                        if (itemIndex && itemIndex === items.length) {\r\n                            itemIndex--\r\n                        }\r\n                    }\r\n                    return itemIndex\r\n                },\r\n                getTopVisibleRowData: function() {\r\n                    var itemIndex = this.getTopVisibleItemIndex();\r\n                    var items = this._dataController.items();\r\n                    if (items[itemIndex]) {\r\n                        return items[itemIndex].data\r\n                    }\r\n                },\r\n                _scrollToElement: function($element, offset) {\r\n                    var scrollable = this.getScrollable();\r\n                    scrollable && scrollable.scrollToElement($element, offset)\r\n                },\r\n                optionChanged: function(args) {\r\n                    var that = this;\r\n                    that.callBase(args);\r\n                    switch (args.name) {\r\n                        case \"wordWrapEnabled\":\r\n                        case \"showColumnLines\":\r\n                        case \"showRowLines\":\r\n                        case \"rowAlternationEnabled\":\r\n                        case \"rowTemplate\":\r\n                        case \"twoWayBindingEnabled\":\r\n                            that._invalidate(true, true);\r\n                            args.handled = true;\r\n                            break;\r\n                        case \"scrolling\":\r\n                            that._rowHeight = null;\r\n                            that._tableElement = null;\r\n                            args.handled = true;\r\n                            break;\r\n                        case \"rtlEnabled\":\r\n                            that._rowHeight = null;\r\n                            that._tableElement = null;\r\n                            break;\r\n                        case \"loadPanel\":\r\n                            that._tableElement = null;\r\n                            that._invalidate(true, \"loadPanel.enabled\" !== args.fullName);\r\n                            args.handled = true;\r\n                            break;\r\n                        case \"noDataText\":\r\n                            that.renderNoDataText();\r\n                            args.handled = true\r\n                    }\r\n                },\r\n                dispose: function() {\r\n                    clearTimeout(this._hideLoadingTimeoutID);\r\n                    this._scrollable && this._scrollable.dispose()\r\n                },\r\n                setScrollerSpacing: function() {}\r\n            }\r\n        }())\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}