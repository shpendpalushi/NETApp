{"ast":null,"code":"/**\r\n * DevExtreme (ui/pivot_grid/ui.sortable.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _utils = require(\"../../events/utils\");\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _dom_component = require(\"../../core/dom_component\");\n\nvar _dom_component2 = _interopRequireDefault(_dom_component);\n\nvar _drag = require(\"../../events/drag\");\n\nvar _drag2 = _interopRequireDefault(_drag);\n\nvar _swatch_container = require(\"../widget/swatch_container\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar SORTABLE_NAMESPACE = \"dxSortable\";\nvar SORTABLE_CLASS = \"dx-sortable-old\";\nvar SCROLL_STEP = 2;\nvar START_SCROLL_OFFSET = 20;\nvar SCROLL_TIMEOUT = 10;\n\nfunction elementHasPoint(element, x, y) {\n  var $item = (0, _renderer2.default)(element);\n  var offset = $item.offset();\n\n  if (x >= offset.left && x <= offset.left + $item.outerWidth(true)) {\n    if (y >= offset.top && y <= offset.top + $item.outerHeight(true)) {\n      return true;\n    }\n  }\n}\n\nfunction checkHorizontalPosition(position, itemOffset, rtl) {\n  if ((0, _type.isDefined)(itemOffset.posHorizontal)) {\n    return rtl ? position > itemOffset.posHorizontal : position < itemOffset.posHorizontal;\n  } else {\n    return true;\n  }\n}\n\nfunction getIndex($items, $item) {\n  var index = -1;\n  var itemElement = $item.get(0);\n  (0, _iterator.each)($items, function (elementIndex, element) {\n    var $element = (0, _renderer2.default)(element);\n\n    if (!($element.attr(\"item-group\") && $element.attr(\"item-group\") === $items.eq(elementIndex - 1).attr(\"item-group\"))) {\n      index++;\n    }\n\n    if (element === itemElement) {\n      return false;\n    }\n  });\n  return index === $items.length ? -1 : index;\n}\n\nfunction getTargetGroup(e, $groups) {\n  var result;\n  (0, _iterator.each)($groups, function () {\n    if (elementHasPoint(this, e.pageX, e.pageY)) {\n      result = (0, _renderer2.default)(this);\n    }\n  });\n  return result;\n}\n\nfunction getItemsOffset($elements, isVertical, $itemsContainer) {\n  var result = [];\n  var $item = [];\n\n  for (var i = 0; i < $elements.length; i += $item.length) {\n    $item = $elements.eq(i);\n\n    if ($item.attr(\"item-group\")) {\n      $item = $itemsContainer.find(\"[item-group='\" + $item.attr(\"item-group\") + \"']\");\n    }\n\n    if ($item.is(\":visible\")) {\n      var offset = {\n        item: $item,\n        index: result.length,\n        posHorizontal: isVertical ? void 0 : ($item.last().outerWidth(true) + $item.last().offset().left + $item.offset().left) / 2\n      };\n\n      if (isVertical) {\n        offset.posVertical = ($item.last().offset().top + $item.offset().top + $item.last().outerHeight(true)) / 2;\n      } else {\n        offset.posVertical = $item.last().outerHeight(true) + $item.last().offset().top;\n      }\n\n      result.push(offset);\n    }\n  }\n\n  return result;\n}\n\nfunction getScrollWrapper(scrollable) {\n  var timeout = null;\n  var scrollTop = scrollable.scrollTop();\n  var $element = scrollable.$element();\n  var top = $element.offset().top;\n  var height = $element.height();\n  var delta = 0;\n\n  function onScroll(e) {\n    scrollTop = e.scrollOffset.top;\n  }\n\n  scrollable.on(\"scroll\", onScroll);\n\n  function move() {\n    stop();\n    scrollable.scrollTo(scrollTop += delta);\n    timeout = setTimeout(move, SCROLL_TIMEOUT);\n  }\n\n  function stop() {\n    clearTimeout(timeout);\n  }\n\n  function moveIfNeed(event) {\n    if (event.pageY <= top + START_SCROLL_OFFSET) {\n      delta = -SCROLL_STEP;\n    } else {\n      if (event.pageY >= top + height - START_SCROLL_OFFSET) {\n        delta = SCROLL_STEP;\n      } else {\n        delta = 0;\n        stop();\n        return;\n      }\n    }\n\n    move();\n  }\n\n  return {\n    moveIfNeed: moveIfNeed,\n    element: function element() {\n      return $element;\n    },\n    dispose: function dispose() {\n      stop();\n      scrollable.off(\"scroll\", onScroll);\n    }\n  };\n}\n\nvar Sortable = _dom_component2.default.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      onChanged: null,\n      onDragging: null,\n      itemRender: null,\n      groupSelector: null,\n      itemSelector: \".dx-sort-item\",\n      itemContainerSelector: \".dx-sortable-old\",\n      sourceClass: \"dx-drag-source\",\n      dragClass: \"dx-drag\",\n      targetClass: \"dx-drag-target\",\n      direction: \"vertical\",\n      allowDragging: true,\n      groupFilter: null,\n      useIndicator: false\n    });\n  },\n  _renderItem: function _renderItem($sourceItem, target) {\n    var itemRender = this.option(\"itemRender\");\n    var $item;\n\n    if (itemRender) {\n      $item = itemRender($sourceItem, target);\n    } else {\n      $item = $sourceItem.clone();\n      $item.css({\n        width: $sourceItem.width(),\n        height: $sourceItem.height()\n      });\n    }\n\n    return $item;\n  },\n  _renderIndicator: function _renderIndicator($item, isVertical, $targetGroup, isLast) {\n    var height = $item.outerHeight(true);\n    var width = $item.outerWidth(true);\n    var top = $item.offset().top - $targetGroup.offset().top;\n    var left = $item.offset().left - $targetGroup.offset().left;\n\n    this._indicator.css({\n      position: \"absolute\",\n      top: isLast && isVertical ? top + height : top,\n      left: isLast && !isVertical ? left + width : left\n    }).toggleClass(\"dx-position-indicator-horizontal\", !isVertical).toggleClass(\"dx-position-indicator-vertical\", !!isVertical).toggleClass(\"dx-position-indicator-last\", !!isLast).height(\"\").width(\"\").appendTo($targetGroup);\n\n    isVertical ? this._indicator.width(width) : this._indicator.height(height);\n  },\n  _renderDraggable: function _renderDraggable($sourceItem) {\n    this._$draggable && this._$draggable.remove();\n    this._$draggable = this._renderItem($sourceItem, \"drag\").addClass(this.option(\"dragClass\")).appendTo((0, _swatch_container.getSwatchContainer)($sourceItem)).css({\n      zIndex: 1e6,\n      position: \"absolute\"\n    });\n  },\n  _detachEventHandlers: function _detachEventHandlers() {\n    var dragEventsString = [_drag2.default.move, _drag2.default.start, _drag2.default.end, _drag2.default.enter, _drag2.default.leave, _drag2.default.drop].join(\" \");\n\n    _events_engine2.default.off(this._getEventListener(), (0, _utils.addNamespace)(dragEventsString, SORTABLE_NAMESPACE));\n  },\n  _getItemOffset: function _getItemOffset(isVertical, itemsOffset, e) {\n    for (var i = 0; i < itemsOffset.length; i++) {\n      var shouldInsert;\n      var sameLine = e.pageY < itemsOffset[i].posVertical;\n\n      if (isVertical) {\n        shouldInsert = sameLine;\n      } else {\n        if (sameLine) {\n          shouldInsert = checkHorizontalPosition(e.pageX, itemsOffset[i], this.option(\"rtlEnabled\"));\n\n          if (!shouldInsert && itemsOffset[i + 1] && itemsOffset[i + 1].posVertical > itemsOffset[i].posVertical) {\n            shouldInsert = true;\n          }\n        }\n      }\n\n      if (shouldInsert) {\n        return itemsOffset[i];\n      }\n    }\n  },\n  _getEventListener: function _getEventListener() {\n    var groupSelector = this.option(\"groupSelector\");\n    var element = this.$element();\n    return groupSelector ? element.find(groupSelector) : element;\n  },\n  _attachEventHandlers: function _attachEventHandlers() {\n    var that = this;\n    var itemSelector = that.option(\"itemSelector\");\n    var itemContainerSelector = that.option(\"itemContainerSelector\");\n    var groupSelector = that.option(\"groupSelector\");\n    var sourceClass = that.option(\"sourceClass\");\n    var targetClass = that.option(\"targetClass\");\n    var onDragging = that.option(\"onDragging\");\n    var groupFilter = that.option(\"groupFilter\");\n    var $sourceItem;\n    var sourceIndex;\n    var $targetItem;\n    var $targetGroup;\n    var startPositions;\n    var sourceGroup;\n    var element = that.$element();\n    var $groups;\n    var scrollWrapper = null;\n    var targetIndex = -1;\n\n    var setStartPositions = function setStartPositions() {\n      startPositions = [];\n      (0, _iterator.each)($sourceItem, function (_, item) {\n        startPositions.push((0, _renderer2.default)(item).offset());\n      });\n    };\n\n    var createGroups = function createGroups() {\n      if (!groupSelector) {\n        return element;\n      } else {\n        return groupFilter ? (0, _renderer2.default)(groupSelector).filter(groupFilter) : element.find(groupSelector);\n      }\n    };\n\n    var disposeScrollWrapper = function disposeScrollWrapper() {\n      scrollWrapper && scrollWrapper.dispose();\n      scrollWrapper = null;\n    };\n\n    var invokeOnDraggingEvent = function invokeOnDraggingEvent() {\n      var draggingArgs = {\n        sourceGroup: sourceGroup,\n        sourceIndex: sourceIndex,\n        sourceElement: $sourceItem,\n        targetGroup: $targetGroup.attr(\"group\"),\n        targetIndex: $targetGroup.find(itemSelector).index($targetItem)\n      };\n      onDragging && onDragging(draggingArgs);\n\n      if (draggingArgs.cancel) {\n        $targetGroup = void 0;\n      }\n    };\n\n    that._detachEventHandlers();\n\n    if (that.option(\"allowDragging\")) {\n      var $eventListener = that._getEventListener();\n\n      _events_engine2.default.on($eventListener, (0, _utils.addNamespace)(_drag2.default.start, SORTABLE_NAMESPACE), itemSelector, function (e) {\n        $sourceItem = (0, _renderer2.default)(e.currentTarget);\n        var $sourceGroup = $sourceItem.closest(groupSelector);\n        sourceGroup = $sourceGroup.attr(\"group\");\n        sourceIndex = getIndex((groupSelector ? $sourceGroup : element).find(itemSelector), $sourceItem);\n\n        if ($sourceItem.attr(\"item-group\")) {\n          $sourceItem = $sourceGroup.find(\"[item-group='\" + $sourceItem.attr(\"item-group\") + \"']\");\n        }\n\n        that._renderDraggable($sourceItem);\n\n        $targetItem = that._renderItem($sourceItem, \"target\").addClass(targetClass);\n        $sourceItem.addClass(sourceClass);\n        setStartPositions();\n        $groups = createGroups();\n        that._indicator = (0, _renderer2.default)(\"<div>\").addClass(\"dx-position-indicator\");\n      });\n\n      _events_engine2.default.on($eventListener, (0, _utils.addNamespace)(_drag2.default.move, SORTABLE_NAMESPACE), function (e) {\n        var $item;\n        var $lastItem;\n        var $prevItem;\n\n        if (!$sourceItem) {\n          return;\n        }\n\n        targetIndex = -1;\n\n        that._indicator.detach();\n\n        (0, _iterator.each)(that._$draggable, function (index, draggableElement) {\n          (0, _renderer2.default)(draggableElement).css({\n            top: startPositions[index].top + e.offset.y,\n            left: startPositions[index].left + e.offset.x\n          });\n        });\n        $targetGroup && $targetGroup.removeClass(targetClass);\n        $targetGroup = getTargetGroup(e, $groups);\n        $targetGroup && invokeOnDraggingEvent();\n\n        if ($targetGroup && scrollWrapper && $targetGroup.get(0) !== scrollWrapper.element().get(0)) {\n          disposeScrollWrapper();\n        }\n\n        scrollWrapper && scrollWrapper.moveIfNeed(e);\n\n        if (!$targetGroup) {\n          $targetItem.detach();\n          return;\n        }\n\n        if (!scrollWrapper && $targetGroup.attr(\"allow-scrolling\")) {\n          scrollWrapper = getScrollWrapper($targetGroup.dxScrollable(\"instance\"));\n        }\n\n        $targetGroup.addClass(targetClass);\n        var $itemContainer = $targetGroup.find(itemContainerSelector);\n        var $items = $itemContainer.find(itemSelector);\n        var targetSortable = $targetGroup.closest(\".\" + SORTABLE_CLASS).data(\"dxSortableOld\");\n        var useIndicator = targetSortable.option(\"useIndicator\");\n        var isVertical = \"vertical\" === (targetSortable || that).option(\"direction\");\n        var itemsOffset = getItemsOffset($items, isVertical, $itemContainer);\n\n        var itemOffset = that._getItemOffset(isVertical, itemsOffset, e);\n\n        if (itemOffset) {\n          $item = itemOffset.item;\n          $prevItem = itemsOffset[itemOffset.index - 1] && itemsOffset[itemOffset.index - 1].item;\n\n          if ($item.hasClass(sourceClass) || $prevItem && $prevItem.hasClass(sourceClass) && $prevItem.is(\":visible\")) {\n            $targetItem.detach();\n            return;\n          }\n\n          targetIndex = itemOffset.index;\n\n          if (!useIndicator) {\n            $targetItem.insertBefore($item);\n            return;\n          }\n\n          var isAnotherGroup = $targetGroup.attr(\"group\") !== sourceGroup;\n          var isSameIndex = targetIndex === sourceIndex;\n          var isNextIndex = targetIndex === sourceIndex + 1;\n\n          if (isAnotherGroup) {\n            that._renderIndicator($item, isVertical, $targetGroup, that.option(\"rtlEnabled\") && !isVertical);\n\n            return;\n          }\n\n          if (!isSameIndex && !isNextIndex) {\n            that._renderIndicator($item, isVertical, $targetGroup, that.option(\"rtlEnabled\") && !isVertical);\n          }\n        } else {\n          $lastItem = $items.last();\n\n          if ($lastItem.is(\":visible\") && $lastItem.hasClass(sourceClass)) {\n            return;\n          }\n\n          if ($itemContainer.length) {\n            targetIndex = itemsOffset.length ? itemsOffset[itemsOffset.length - 1].index + 1 : 0;\n          }\n\n          if (useIndicator) {\n            $items.length && that._renderIndicator($lastItem, isVertical, $targetGroup, !that.option(\"rtlEnabled\") || isVertical);\n          } else {\n            $targetItem.appendTo($itemContainer);\n          }\n        }\n      });\n\n      _events_engine2.default.on($eventListener, (0, _utils.addNamespace)(_drag2.default.end, SORTABLE_NAMESPACE), function () {\n        disposeScrollWrapper();\n\n        if (!$sourceItem) {\n          return;\n        }\n\n        var onChanged = that.option(\"onChanged\");\n        var changedArgs = {\n          sourceIndex: sourceIndex,\n          sourceElement: $sourceItem,\n          sourceGroup: sourceGroup,\n          targetIndex: targetIndex,\n          removeSourceElement: true,\n          removeTargetElement: false,\n          removeSourceClass: true\n        };\n\n        if ($targetGroup) {\n          $targetGroup.removeClass(targetClass);\n          changedArgs.targetGroup = $targetGroup.attr(\"group\");\n\n          if (sourceGroup !== changedArgs.targetGroup || targetIndex > -1) {\n            onChanged && onChanged(changedArgs);\n            changedArgs.removeSourceElement && $sourceItem.remove();\n          }\n        }\n\n        that._indicator.detach();\n\n        changedArgs.removeSourceClass && $sourceItem.removeClass(sourceClass);\n        $sourceItem = null;\n\n        that._$draggable.remove();\n\n        that._$draggable = null;\n        changedArgs.removeTargetElement && $targetItem.remove();\n        $targetItem.removeClass(targetClass);\n        $targetItem = null;\n      });\n    }\n  },\n  _init: function _init() {\n    this.callBase();\n\n    this._attachEventHandlers();\n  },\n  _render: function _render() {\n    this.callBase();\n    this.$element().addClass(SORTABLE_CLASS);\n  },\n  _dispose: function _dispose() {\n    var that = this;\n    that.callBase.apply(that, arguments);\n    that._$draggable && that._$draggable.detach();\n    that._indicator && that._indicator.detach();\n  },\n  _optionChanged: function _optionChanged(args) {\n    var that = this;\n\n    switch (args.name) {\n      case \"onDragging\":\n      case \"onChanged\":\n      case \"itemRender\":\n      case \"groupSelector\":\n      case \"itemSelector\":\n      case \"itemContainerSelector\":\n      case \"sourceClass\":\n      case \"targetClass\":\n      case \"dragClass\":\n      case \"allowDragging\":\n      case \"groupFilter\":\n      case \"useIndicator\":\n        that._attachEventHandlers();\n\n        break;\n\n      case \"direction\":\n        break;\n\n      default:\n        that.callBase(args);\n    }\n  }\n});\n\n(0, _component_registrator2.default)(\"dxSortableOld\", Sortable);\nmodule.exports = Sortable;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/pivot_grid/ui.sortable.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_type","_extend","_iterator","_utils","_component_registrator","_component_registrator2","_dom_component","_dom_component2","_drag","_drag2","_swatch_container","obj","__esModule","SORTABLE_NAMESPACE","SORTABLE_CLASS","SCROLL_STEP","START_SCROLL_OFFSET","SCROLL_TIMEOUT","elementHasPoint","element","x","y","$item","default","offset","left","outerWidth","top","outerHeight","checkHorizontalPosition","position","itemOffset","rtl","isDefined","posHorizontal","getIndex","$items","index","itemElement","get","each","elementIndex","$element","attr","eq","length","getTargetGroup","e","$groups","result","pageX","pageY","getItemsOffset","$elements","isVertical","$itemsContainer","i","find","is","item","last","posVertical","push","getScrollWrapper","scrollable","timeout","scrollTop","height","delta","onScroll","scrollOffset","on","move","stop","scrollTo","setTimeout","clearTimeout","moveIfNeed","event","dispose","off","Sortable","inherit","_getDefaultOptions","extend","callBase","onChanged","onDragging","itemRender","groupSelector","itemSelector","itemContainerSelector","sourceClass","dragClass","targetClass","direction","allowDragging","groupFilter","useIndicator","_renderItem","$sourceItem","target","option","clone","css","width","_renderIndicator","$targetGroup","isLast","_indicator","toggleClass","appendTo","_renderDraggable","_$draggable","remove","addClass","getSwatchContainer","zIndex","_detachEventHandlers","dragEventsString","start","end","enter","leave","drop","join","_getEventListener","addNamespace","_getItemOffset","itemsOffset","shouldInsert","sameLine","_attachEventHandlers","that","sourceIndex","$targetItem","startPositions","sourceGroup","scrollWrapper","targetIndex","setStartPositions","_","createGroups","filter","disposeScrollWrapper","invokeOnDraggingEvent","draggingArgs","sourceElement","targetGroup","cancel","$eventListener","currentTarget","$sourceGroup","closest","$lastItem","$prevItem","detach","draggableElement","removeClass","dxScrollable","$itemContainer","targetSortable","data","hasClass","insertBefore","isAnotherGroup","isSameIndex","isNextIndex","changedArgs","removeSourceElement","removeTargetElement","removeSourceClass","_init","_render","_dispose","apply","arguments","_optionChanged","args","name","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,SAAS,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;AACA,IAAIC,UAAU,GAAGC,sBAAsB,CAACH,SAAD,CAAvC;;AACA,IAAII,cAAc,GAAGH,OAAO,CAAC,iCAAD,CAA5B;;AACA,IAAII,eAAe,GAAGF,sBAAsB,CAACC,cAAD,CAA5C;;AACA,IAAIE,KAAK,GAAGL,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIM,OAAO,GAAGN,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIO,SAAS,GAAGP,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIQ,MAAM,GAAGR,OAAO,CAAC,oBAAD,CAApB;;AACA,IAAIS,sBAAsB,GAAGT,OAAO,CAAC,kCAAD,CAApC;;AACA,IAAIU,uBAAuB,GAAGR,sBAAsB,CAACO,sBAAD,CAApD;;AACA,IAAIE,cAAc,GAAGX,OAAO,CAAC,0BAAD,CAA5B;;AACA,IAAIY,eAAe,GAAGV,sBAAsB,CAACS,cAAD,CAA5C;;AACA,IAAIE,KAAK,GAAGb,OAAO,CAAC,mBAAD,CAAnB;;AACA,IAAIc,MAAM,GAAGZ,sBAAsB,CAACW,KAAD,CAAnC;;AACA,IAAIE,iBAAiB,GAAGf,OAAO,CAAC,4BAAD,CAA/B;;AAEA,SAASE,sBAAT,CAAgCc,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AACD,IAAIE,kBAAkB,GAAG,YAAzB;AACA,IAAIC,cAAc,GAAG,iBAArB;AACA,IAAIC,WAAW,GAAG,CAAlB;AACA,IAAIC,mBAAmB,GAAG,EAA1B;AACA,IAAIC,cAAc,GAAG,EAArB;;AAEA,SAASC,eAAT,CAAyBC,OAAzB,EAAkCC,CAAlC,EAAqCC,CAArC,EAAwC;AACpC,MAAIC,KAAK,GAAG,CAAC,GAAG1B,UAAU,CAAC2B,OAAf,EAAwBJ,OAAxB,CAAZ;AACA,MAAIK,MAAM,GAAGF,KAAK,CAACE,MAAN,EAAb;;AACA,MAAIJ,CAAC,IAAII,MAAM,CAACC,IAAZ,IAAoBL,CAAC,IAAII,MAAM,CAACC,IAAP,GAAcH,KAAK,CAACI,UAAN,CAAiB,IAAjB,CAA3C,EAAmE;AAC/D,QAAIL,CAAC,IAAIG,MAAM,CAACG,GAAZ,IAAmBN,CAAC,IAAIG,MAAM,CAACG,GAAP,GAAaL,KAAK,CAACM,WAAN,CAAkB,IAAlB,CAAzC,EAAkE;AAC9D,aAAO,IAAP;AACH;AACJ;AACJ;;AAED,SAASC,uBAAT,CAAiCC,QAAjC,EAA2CC,UAA3C,EAAuDC,GAAvD,EAA4D;AACxD,MAAI,CAAC,GAAGhC,KAAK,CAACiC,SAAV,EAAqBF,UAAU,CAACG,aAAhC,CAAJ,EAAoD;AAChD,WAAOF,GAAG,GAAGF,QAAQ,GAAGC,UAAU,CAACG,aAAzB,GAAyCJ,QAAQ,GAAGC,UAAU,CAACG,aAAzE;AACH,GAFD,MAEO;AACH,WAAO,IAAP;AACH;AACJ;;AAED,SAASC,QAAT,CAAkBC,MAAlB,EAA0Bd,KAA1B,EAAiC;AAC7B,MAAIe,KAAK,GAAG,CAAC,CAAb;AACA,MAAIC,WAAW,GAAGhB,KAAK,CAACiB,GAAN,CAAU,CAAV,CAAlB;AACA,GAAC,GAAGrC,SAAS,CAACsC,IAAd,EAAoBJ,MAApB,EAA4B,UAASK,YAAT,EAAuBtB,OAAvB,EAAgC;AACxD,QAAIuB,QAAQ,GAAG,CAAC,GAAG9C,UAAU,CAAC2B,OAAf,EAAwBJ,OAAxB,CAAf;;AACA,QAAI,EAAEuB,QAAQ,CAACC,IAAT,CAAc,YAAd,KAA+BD,QAAQ,CAACC,IAAT,CAAc,YAAd,MAAgCP,MAAM,CAACQ,EAAP,CAAUH,YAAY,GAAG,CAAzB,EAA4BE,IAA5B,CAAiC,YAAjC,CAAjE,CAAJ,EAAsH;AAClHN,MAAAA,KAAK;AACR;;AACD,QAAIlB,OAAO,KAAKmB,WAAhB,EAA6B;AACzB,aAAO,KAAP;AACH;AACJ,GARD;AASA,SAAOD,KAAK,KAAKD,MAAM,CAACS,MAAjB,GAA0B,CAAC,CAA3B,GAA+BR,KAAtC;AACH;;AAED,SAASS,cAAT,CAAwBC,CAAxB,EAA2BC,OAA3B,EAAoC;AAChC,MAAIC,MAAJ;AACA,GAAC,GAAG/C,SAAS,CAACsC,IAAd,EAAoBQ,OAApB,EAA6B,YAAW;AACpC,QAAI9B,eAAe,CAAC,IAAD,EAAO6B,CAAC,CAACG,KAAT,EAAgBH,CAAC,CAACI,KAAlB,CAAnB,EAA6C;AACzCF,MAAAA,MAAM,GAAG,CAAC,GAAGrD,UAAU,CAAC2B,OAAf,EAAwB,IAAxB,CAAT;AACH;AACJ,GAJD;AAKA,SAAO0B,MAAP;AACH;;AAED,SAASG,cAAT,CAAwBC,SAAxB,EAAmCC,UAAnC,EAA+CC,eAA/C,EAAgE;AAC5D,MAAIN,MAAM,GAAG,EAAb;AACA,MAAI3B,KAAK,GAAG,EAAZ;;AACA,OAAK,IAAIkC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,SAAS,CAACR,MAA9B,EAAsCW,CAAC,IAAIlC,KAAK,CAACuB,MAAjD,EAAyD;AACrDvB,IAAAA,KAAK,GAAG+B,SAAS,CAACT,EAAV,CAAaY,CAAb,CAAR;;AACA,QAAIlC,KAAK,CAACqB,IAAN,CAAW,YAAX,CAAJ,EAA8B;AAC1BrB,MAAAA,KAAK,GAAGiC,eAAe,CAACE,IAAhB,CAAqB,kBAAkBnC,KAAK,CAACqB,IAAN,CAAW,YAAX,CAAlB,GAA6C,IAAlE,CAAR;AACH;;AACD,QAAIrB,KAAK,CAACoC,EAAN,CAAS,UAAT,CAAJ,EAA0B;AACtB,UAAIlC,MAAM,GAAG;AACTmC,QAAAA,IAAI,EAAErC,KADG;AAETe,QAAAA,KAAK,EAAEY,MAAM,CAACJ,MAFL;AAGTX,QAAAA,aAAa,EAAEoB,UAAU,GAAG,KAAK,CAAR,GAAY,CAAChC,KAAK,CAACsC,IAAN,GAAalC,UAAb,CAAwB,IAAxB,IAAgCJ,KAAK,CAACsC,IAAN,GAAapC,MAAb,GAAsBC,IAAtD,GAA6DH,KAAK,CAACE,MAAN,GAAeC,IAA7E,IAAqF;AAHjH,OAAb;;AAKA,UAAI6B,UAAJ,EAAgB;AACZ9B,QAAAA,MAAM,CAACqC,WAAP,GAAqB,CAACvC,KAAK,CAACsC,IAAN,GAAapC,MAAb,GAAsBG,GAAtB,GAA4BL,KAAK,CAACE,MAAN,GAAeG,GAA3C,GAAiDL,KAAK,CAACsC,IAAN,GAAahC,WAAb,CAAyB,IAAzB,CAAlD,IAAoF,CAAzG;AACH,OAFD,MAEO;AACHJ,QAAAA,MAAM,CAACqC,WAAP,GAAqBvC,KAAK,CAACsC,IAAN,GAAahC,WAAb,CAAyB,IAAzB,IAAiCN,KAAK,CAACsC,IAAN,GAAapC,MAAb,GAAsBG,GAA5E;AACH;;AACDsB,MAAAA,MAAM,CAACa,IAAP,CAAYtC,MAAZ;AACH;AACJ;;AACD,SAAOyB,MAAP;AACH;;AAED,SAASc,gBAAT,CAA0BC,UAA1B,EAAsC;AAClC,MAAIC,OAAO,GAAG,IAAd;AACA,MAAIC,SAAS,GAAGF,UAAU,CAACE,SAAX,EAAhB;AACA,MAAIxB,QAAQ,GAAGsB,UAAU,CAACtB,QAAX,EAAf;AACA,MAAIf,GAAG,GAAGe,QAAQ,CAAClB,MAAT,GAAkBG,GAA5B;AACA,MAAIwC,MAAM,GAAGzB,QAAQ,CAACyB,MAAT,EAAb;AACA,MAAIC,KAAK,GAAG,CAAZ;;AAEA,WAASC,QAAT,CAAkBtB,CAAlB,EAAqB;AACjBmB,IAAAA,SAAS,GAAGnB,CAAC,CAACuB,YAAF,CAAe3C,GAA3B;AACH;;AACDqC,EAAAA,UAAU,CAACO,EAAX,CAAc,QAAd,EAAwBF,QAAxB;;AAEA,WAASG,IAAT,GAAgB;AACZC,IAAAA,IAAI;AACJT,IAAAA,UAAU,CAACU,QAAX,CAAoBR,SAAS,IAAIE,KAAjC;AACAH,IAAAA,OAAO,GAAGU,UAAU,CAACH,IAAD,EAAOvD,cAAP,CAApB;AACH;;AAED,WAASwD,IAAT,GAAgB;AACZG,IAAAA,YAAY,CAACX,OAAD,CAAZ;AACH;;AAED,WAASY,UAAT,CAAoBC,KAApB,EAA2B;AACvB,QAAIA,KAAK,CAAC3B,KAAN,IAAexB,GAAG,GAAGX,mBAAzB,EAA8C;AAC1CoD,MAAAA,KAAK,GAAG,CAACrD,WAAT;AACH,KAFD,MAEO;AACH,UAAI+D,KAAK,CAAC3B,KAAN,IAAexB,GAAG,GAAGwC,MAAN,GAAenD,mBAAlC,EAAuD;AACnDoD,QAAAA,KAAK,GAAGrD,WAAR;AACH,OAFD,MAEO;AACHqD,QAAAA,KAAK,GAAG,CAAR;AACAK,QAAAA,IAAI;AACJ;AACH;AACJ;;AACDD,IAAAA,IAAI;AACP;;AACD,SAAO;AACHK,IAAAA,UAAU,EAAEA,UADT;AAEH1D,IAAAA,OAAO,EAAE,mBAAW;AAChB,aAAOuB,QAAP;AACH,KAJE;AAKHqC,IAAAA,OAAO,EAAE,mBAAW;AAChBN,MAAAA,IAAI;AACJT,MAAAA,UAAU,CAACgB,GAAX,CAAe,QAAf,EAAyBX,QAAzB;AACH;AARE,GAAP;AAUH;;AACD,IAAIY,QAAQ,GAAG1E,eAAe,CAACgB,OAAhB,CAAwB2D,OAAxB,CAAgC;AAC3CC,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,WAAO,CAAC,GAAGlF,OAAO,CAACmF,MAAZ,EAAoB,KAAKC,QAAL,EAApB,EAAqC;AACxCC,MAAAA,SAAS,EAAE,IAD6B;AAExCC,MAAAA,UAAU,EAAE,IAF4B;AAGxCC,MAAAA,UAAU,EAAE,IAH4B;AAIxCC,MAAAA,aAAa,EAAE,IAJyB;AAKxCC,MAAAA,YAAY,EAAE,eAL0B;AAMxCC,MAAAA,qBAAqB,EAAE,kBANiB;AAOxCC,MAAAA,WAAW,EAAE,gBAP2B;AAQxCC,MAAAA,SAAS,EAAE,SAR6B;AASxCC,MAAAA,WAAW,EAAE,gBAT2B;AAUxCC,MAAAA,SAAS,EAAE,UAV6B;AAWxCC,MAAAA,aAAa,EAAE,IAXyB;AAYxCC,MAAAA,WAAW,EAAE,IAZ2B;AAaxCC,MAAAA,YAAY,EAAE;AAb0B,KAArC,CAAP;AAeH,GAjB0C;AAkB3CC,EAAAA,WAAW,EAAE,qBAASC,WAAT,EAAsBC,MAAtB,EAA8B;AACvC,QAAIb,UAAU,GAAG,KAAKc,MAAL,CAAY,YAAZ,CAAjB;AACA,QAAIhF,KAAJ;;AACA,QAAIkE,UAAJ,EAAgB;AACZlE,MAAAA,KAAK,GAAGkE,UAAU,CAACY,WAAD,EAAcC,MAAd,CAAlB;AACH,KAFD,MAEO;AACH/E,MAAAA,KAAK,GAAG8E,WAAW,CAACG,KAAZ,EAAR;AACAjF,MAAAA,KAAK,CAACkF,GAAN,CAAU;AACNC,QAAAA,KAAK,EAAEL,WAAW,CAACK,KAAZ,EADD;AAENtC,QAAAA,MAAM,EAAEiC,WAAW,CAACjC,MAAZ;AAFF,OAAV;AAIH;;AACD,WAAO7C,KAAP;AACH,GA/B0C;AAgC3CoF,EAAAA,gBAAgB,EAAE,0BAASpF,KAAT,EAAgBgC,UAAhB,EAA4BqD,YAA5B,EAA0CC,MAA1C,EAAkD;AAChE,QAAIzC,MAAM,GAAG7C,KAAK,CAACM,WAAN,CAAkB,IAAlB,CAAb;AACA,QAAI6E,KAAK,GAAGnF,KAAK,CAACI,UAAN,CAAiB,IAAjB,CAAZ;AACA,QAAIC,GAAG,GAAGL,KAAK,CAACE,MAAN,GAAeG,GAAf,GAAqBgF,YAAY,CAACnF,MAAb,GAAsBG,GAArD;AACA,QAAIF,IAAI,GAAGH,KAAK,CAACE,MAAN,GAAeC,IAAf,GAAsBkF,YAAY,CAACnF,MAAb,GAAsBC,IAAvD;;AACA,SAAKoF,UAAL,CAAgBL,GAAhB,CAAoB;AAChB1E,MAAAA,QAAQ,EAAE,UADM;AAEhBH,MAAAA,GAAG,EAAEiF,MAAM,IAAItD,UAAV,GAAuB3B,GAAG,GAAGwC,MAA7B,GAAsCxC,GAF3B;AAGhBF,MAAAA,IAAI,EAAEmF,MAAM,IAAI,CAACtD,UAAX,GAAwB7B,IAAI,GAAGgF,KAA/B,GAAuChF;AAH7B,KAApB,EAIGqF,WAJH,CAIe,kCAJf,EAImD,CAACxD,UAJpD,EAIgEwD,WAJhE,CAI4E,gCAJ5E,EAI8G,CAAC,CAACxD,UAJhH,EAI4HwD,WAJ5H,CAIwI,4BAJxI,EAIsK,CAAC,CAACF,MAJxK,EAIgLzC,MAJhL,CAIuL,EAJvL,EAI2LsC,KAJ3L,CAIiM,EAJjM,EAIqMM,QAJrM,CAI8MJ,YAJ9M;;AAKArD,IAAAA,UAAU,GAAG,KAAKuD,UAAL,CAAgBJ,KAAhB,CAAsBA,KAAtB,CAAH,GAAkC,KAAKI,UAAL,CAAgB1C,MAAhB,CAAuBA,MAAvB,CAA5C;AACH,GA3C0C;AA4C3C6C,EAAAA,gBAAgB,EAAE,0BAASZ,WAAT,EAAsB;AACpC,SAAKa,WAAL,IAAoB,KAAKA,WAAL,CAAiBC,MAAjB,EAApB;AACA,SAAKD,WAAL,GAAmB,KAAKd,WAAL,CAAiBC,WAAjB,EAA8B,MAA9B,EAAsCe,QAAtC,CAA+C,KAAKb,MAAL,CAAY,WAAZ,CAA/C,EAAyES,QAAzE,CAAkF,CAAC,GAAGrG,iBAAiB,CAAC0G,kBAAtB,EAA0ChB,WAA1C,CAAlF,EAA0II,GAA1I,CAA8I;AAC7Ja,MAAAA,MAAM,EAAE,GADqJ;AAE7JvF,MAAAA,QAAQ,EAAE;AAFmJ,KAA9I,CAAnB;AAIH,GAlD0C;AAmD3CwF,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,QAAIC,gBAAgB,GAAG,CAAC9G,MAAM,CAACc,OAAP,CAAeiD,IAAhB,EAAsB/D,MAAM,CAACc,OAAP,CAAeiG,KAArC,EAA4C/G,MAAM,CAACc,OAAP,CAAekG,GAA3D,EAAgEhH,MAAM,CAACc,OAAP,CAAemG,KAA/E,EAAsFjH,MAAM,CAACc,OAAP,CAAeoG,KAArG,EAA4GlH,MAAM,CAACc,OAAP,CAAeqG,IAA3H,EAAiIC,IAAjI,CAAsI,GAAtI,CAAvB;;AACA9H,IAAAA,eAAe,CAACwB,OAAhB,CAAwByD,GAAxB,CAA4B,KAAK8C,iBAAL,EAA5B,EAAsD,CAAC,GAAG3H,MAAM,CAAC4H,YAAX,EAAyBR,gBAAzB,EAA2C1G,kBAA3C,CAAtD;AACH,GAtD0C;AAuD3CmH,EAAAA,cAAc,EAAE,wBAAS1E,UAAT,EAAqB2E,WAArB,EAAkClF,CAAlC,EAAqC;AACjD,SAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyE,WAAW,CAACpF,MAAhC,EAAwCW,CAAC,EAAzC,EAA6C;AACzC,UAAI0E,YAAJ;AACA,UAAIC,QAAQ,GAAGpF,CAAC,CAACI,KAAF,GAAU8E,WAAW,CAACzE,CAAD,CAAX,CAAeK,WAAxC;;AACA,UAAIP,UAAJ,EAAgB;AACZ4E,QAAAA,YAAY,GAAGC,QAAf;AACH,OAFD,MAEO;AACH,YAAIA,QAAJ,EAAc;AACVD,UAAAA,YAAY,GAAGrG,uBAAuB,CAACkB,CAAC,CAACG,KAAH,EAAU+E,WAAW,CAACzE,CAAD,CAArB,EAA0B,KAAK8C,MAAL,CAAY,YAAZ,CAA1B,CAAtC;;AACA,cAAI,CAAC4B,YAAD,IAAiBD,WAAW,CAACzE,CAAC,GAAG,CAAL,CAA5B,IAAuCyE,WAAW,CAACzE,CAAC,GAAG,CAAL,CAAX,CAAmBK,WAAnB,GAAiCoE,WAAW,CAACzE,CAAD,CAAX,CAAeK,WAA3F,EAAwG;AACpGqE,YAAAA,YAAY,GAAG,IAAf;AACH;AACJ;AACJ;;AACD,UAAIA,YAAJ,EAAkB;AACd,eAAOD,WAAW,CAACzE,CAAD,CAAlB;AACH;AACJ;AACJ,GAzE0C;AA0E3CsE,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAIrC,aAAa,GAAG,KAAKa,MAAL,CAAY,eAAZ,CAApB;AACA,QAAInF,OAAO,GAAG,KAAKuB,QAAL,EAAd;AACA,WAAO+C,aAAa,GAAGtE,OAAO,CAACsC,IAAR,CAAagC,aAAb,CAAH,GAAiCtE,OAArD;AACH,GA9E0C;AA+E3CiH,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,QAAIC,IAAI,GAAG,IAAX;AACA,QAAI3C,YAAY,GAAG2C,IAAI,CAAC/B,MAAL,CAAY,cAAZ,CAAnB;AACA,QAAIX,qBAAqB,GAAG0C,IAAI,CAAC/B,MAAL,CAAY,uBAAZ,CAA5B;AACA,QAAIb,aAAa,GAAG4C,IAAI,CAAC/B,MAAL,CAAY,eAAZ,CAApB;AACA,QAAIV,WAAW,GAAGyC,IAAI,CAAC/B,MAAL,CAAY,aAAZ,CAAlB;AACA,QAAIR,WAAW,GAAGuC,IAAI,CAAC/B,MAAL,CAAY,aAAZ,CAAlB;AACA,QAAIf,UAAU,GAAG8C,IAAI,CAAC/B,MAAL,CAAY,YAAZ,CAAjB;AACA,QAAIL,WAAW,GAAGoC,IAAI,CAAC/B,MAAL,CAAY,aAAZ,CAAlB;AACA,QAAIF,WAAJ;AACA,QAAIkC,WAAJ;AACA,QAAIC,WAAJ;AACA,QAAI5B,YAAJ;AACA,QAAI6B,cAAJ;AACA,QAAIC,WAAJ;AACA,QAAItH,OAAO,GAAGkH,IAAI,CAAC3F,QAAL,EAAd;AACA,QAAIM,OAAJ;AACA,QAAI0F,aAAa,GAAG,IAApB;AACA,QAAIC,WAAW,GAAG,CAAC,CAAnB;;AACA,QAAIC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAW;AAC/BJ,MAAAA,cAAc,GAAG,EAAjB;AACA,OAAC,GAAGtI,SAAS,CAACsC,IAAd,EAAoB4D,WAApB,EAAiC,UAASyC,CAAT,EAAYlF,IAAZ,EAAkB;AAC/C6E,QAAAA,cAAc,CAAC1E,IAAf,CAAoB,CAAC,GAAGlE,UAAU,CAAC2B,OAAf,EAAwBoC,IAAxB,EAA8BnC,MAA9B,EAApB;AACH,OAFD;AAGH,KALD;;AAMA,QAAIsH,YAAY,GAAG,SAAfA,YAAe,GAAW;AAC1B,UAAI,CAACrD,aAAL,EAAoB;AAChB,eAAOtE,OAAP;AACH,OAFD,MAEO;AACH,eAAO8E,WAAW,GAAG,CAAC,GAAGrG,UAAU,CAAC2B,OAAf,EAAwBkE,aAAxB,EAAuCsD,MAAvC,CAA8C9C,WAA9C,CAAH,GAAgE9E,OAAO,CAACsC,IAAR,CAAagC,aAAb,CAAlF;AACH;AACJ,KAND;;AAOA,QAAIuD,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAW;AAClCN,MAAAA,aAAa,IAAIA,aAAa,CAAC3D,OAAd,EAAjB;AACA2D,MAAAA,aAAa,GAAG,IAAhB;AACH,KAHD;;AAIA,QAAIO,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAW;AACnC,UAAIC,YAAY,GAAG;AACfT,QAAAA,WAAW,EAAEA,WADE;AAEfH,QAAAA,WAAW,EAAEA,WAFE;AAGfa,QAAAA,aAAa,EAAE/C,WAHA;AAIfgD,QAAAA,WAAW,EAAEzC,YAAY,CAAChE,IAAb,CAAkB,OAAlB,CAJE;AAKfgG,QAAAA,WAAW,EAAEhC,YAAY,CAAClD,IAAb,CAAkBiC,YAAlB,EAAgCrD,KAAhC,CAAsCkG,WAAtC;AALE,OAAnB;AAOAhD,MAAAA,UAAU,IAAIA,UAAU,CAAC2D,YAAD,CAAxB;;AACA,UAAIA,YAAY,CAACG,MAAjB,EAAyB;AACrB1C,QAAAA,YAAY,GAAG,KAAK,CAApB;AACH;AACJ,KAZD;;AAaA0B,IAAAA,IAAI,CAACf,oBAAL;;AACA,QAAIe,IAAI,CAAC/B,MAAL,CAAY,eAAZ,CAAJ,EAAkC;AAC9B,UAAIgD,cAAc,GAAGjB,IAAI,CAACP,iBAAL,EAArB;;AACA/H,MAAAA,eAAe,CAACwB,OAAhB,CAAwBgD,EAAxB,CAA2B+E,cAA3B,EAA2C,CAAC,GAAGnJ,MAAM,CAAC4H,YAAX,EAAyBtH,MAAM,CAACc,OAAP,CAAeiG,KAAxC,EAA+C3G,kBAA/C,CAA3C,EAA+G6E,YAA/G,EAA6H,UAAS3C,CAAT,EAAY;AACrIqD,QAAAA,WAAW,GAAG,CAAC,GAAGxG,UAAU,CAAC2B,OAAf,EAAwBwB,CAAC,CAACwG,aAA1B,CAAd;AACA,YAAIC,YAAY,GAAGpD,WAAW,CAACqD,OAAZ,CAAoBhE,aAApB,CAAnB;AACAgD,QAAAA,WAAW,GAAGe,YAAY,CAAC7G,IAAb,CAAkB,OAAlB,CAAd;AACA2F,QAAAA,WAAW,GAAGnG,QAAQ,CAAC,CAACsD,aAAa,GAAG+D,YAAH,GAAkBrI,OAAhC,EAAyCsC,IAAzC,CAA8CiC,YAA9C,CAAD,EAA8DU,WAA9D,CAAtB;;AACA,YAAIA,WAAW,CAACzD,IAAZ,CAAiB,YAAjB,CAAJ,EAAoC;AAChCyD,UAAAA,WAAW,GAAGoD,YAAY,CAAC/F,IAAb,CAAkB,kBAAkB2C,WAAW,CAACzD,IAAZ,CAAiB,YAAjB,CAAlB,GAAmD,IAArE,CAAd;AACH;;AACD0F,QAAAA,IAAI,CAACrB,gBAAL,CAAsBZ,WAAtB;;AACAmC,QAAAA,WAAW,GAAGF,IAAI,CAAClC,WAAL,CAAiBC,WAAjB,EAA8B,QAA9B,EAAwCe,QAAxC,CAAiDrB,WAAjD,CAAd;AACAM,QAAAA,WAAW,CAACe,QAAZ,CAAqBvB,WAArB;AACAgD,QAAAA,iBAAiB;AACjB5F,QAAAA,OAAO,GAAG8F,YAAY,EAAtB;AACAT,QAAAA,IAAI,CAACxB,UAAL,GAAkB,CAAC,GAAGjH,UAAU,CAAC2B,OAAf,EAAwB,OAAxB,EAAiC4F,QAAjC,CAA0C,uBAA1C,CAAlB;AACH,OAdD;;AAeApH,MAAAA,eAAe,CAACwB,OAAhB,CAAwBgD,EAAxB,CAA2B+E,cAA3B,EAA2C,CAAC,GAAGnJ,MAAM,CAAC4H,YAAX,EAAyBtH,MAAM,CAACc,OAAP,CAAeiD,IAAxC,EAA8C3D,kBAA9C,CAA3C,EAA8G,UAASkC,CAAT,EAAY;AACtH,YAAIzB,KAAJ;AACA,YAAIoI,SAAJ;AACA,YAAIC,SAAJ;;AACA,YAAI,CAACvD,WAAL,EAAkB;AACd;AACH;;AACDuC,QAAAA,WAAW,GAAG,CAAC,CAAf;;AACAN,QAAAA,IAAI,CAACxB,UAAL,CAAgB+C,MAAhB;;AACA,SAAC,GAAG1J,SAAS,CAACsC,IAAd,EAAoB6F,IAAI,CAACpB,WAAzB,EAAsC,UAAS5E,KAAT,EAAgBwH,gBAAhB,EAAkC;AACpE,WAAC,GAAGjK,UAAU,CAAC2B,OAAf,EAAwBsI,gBAAxB,EAA0CrD,GAA1C,CAA8C;AAC1C7E,YAAAA,GAAG,EAAE6G,cAAc,CAACnG,KAAD,CAAd,CAAsBV,GAAtB,GAA4BoB,CAAC,CAACvB,MAAF,CAASH,CADA;AAE1CI,YAAAA,IAAI,EAAE+G,cAAc,CAACnG,KAAD,CAAd,CAAsBZ,IAAtB,GAA6BsB,CAAC,CAACvB,MAAF,CAASJ;AAFF,WAA9C;AAIH,SALD;AAMAuF,QAAAA,YAAY,IAAIA,YAAY,CAACmD,WAAb,CAAyBhE,WAAzB,CAAhB;AACAa,QAAAA,YAAY,GAAG7D,cAAc,CAACC,CAAD,EAAIC,OAAJ,CAA7B;AACA2D,QAAAA,YAAY,IAAIsC,qBAAqB,EAArC;;AACA,YAAItC,YAAY,IAAI+B,aAAhB,IAAiC/B,YAAY,CAACpE,GAAb,CAAiB,CAAjB,MAAwBmG,aAAa,CAACvH,OAAd,GAAwBoB,GAAxB,CAA4B,CAA5B,CAA7D,EAA6F;AACzFyG,UAAAA,oBAAoB;AACvB;;AACDN,QAAAA,aAAa,IAAIA,aAAa,CAAC7D,UAAd,CAAyB9B,CAAzB,CAAjB;;AACA,YAAI,CAAC4D,YAAL,EAAmB;AACf4B,UAAAA,WAAW,CAACqB,MAAZ;AACA;AACH;;AACD,YAAI,CAAClB,aAAD,IAAkB/B,YAAY,CAAChE,IAAb,CAAkB,iBAAlB,CAAtB,EAA4D;AACxD+F,UAAAA,aAAa,GAAG3E,gBAAgB,CAAC4C,YAAY,CAACoD,YAAb,CAA0B,UAA1B,CAAD,CAAhC;AACH;;AACDpD,QAAAA,YAAY,CAACQ,QAAb,CAAsBrB,WAAtB;AACA,YAAIkE,cAAc,GAAGrD,YAAY,CAAClD,IAAb,CAAkBkC,qBAAlB,CAArB;AACA,YAAIvD,MAAM,GAAG4H,cAAc,CAACvG,IAAf,CAAoBiC,YAApB,CAAb;AACA,YAAIuE,cAAc,GAAGtD,YAAY,CAAC8C,OAAb,CAAqB,MAAM3I,cAA3B,EAA2CoJ,IAA3C,CAAgD,eAAhD,CAArB;AACA,YAAIhE,YAAY,GAAG+D,cAAc,CAAC3D,MAAf,CAAsB,cAAtB,CAAnB;AACA,YAAIhD,UAAU,GAAG,eAAe,CAAC2G,cAAc,IAAI5B,IAAnB,EAAyB/B,MAAzB,CAAgC,WAAhC,CAAhC;AACA,YAAI2B,WAAW,GAAG7E,cAAc,CAAChB,MAAD,EAASkB,UAAT,EAAqB0G,cAArB,CAAhC;;AACA,YAAIjI,UAAU,GAAGsG,IAAI,CAACL,cAAL,CAAoB1E,UAApB,EAAgC2E,WAAhC,EAA6ClF,CAA7C,CAAjB;;AACA,YAAIhB,UAAJ,EAAgB;AACZT,UAAAA,KAAK,GAAGS,UAAU,CAAC4B,IAAnB;AACAgG,UAAAA,SAAS,GAAG1B,WAAW,CAAClG,UAAU,CAACM,KAAX,GAAmB,CAApB,CAAX,IAAqC4F,WAAW,CAAClG,UAAU,CAACM,KAAX,GAAmB,CAApB,CAAX,CAAkCsB,IAAnF;;AACA,cAAIrC,KAAK,CAAC6I,QAAN,CAAevE,WAAf,KAA+B+D,SAAS,IAAIA,SAAS,CAACQ,QAAV,CAAmBvE,WAAnB,CAAb,IAAgD+D,SAAS,CAACjG,EAAV,CAAa,UAAb,CAAnF,EAA6G;AACzG6E,YAAAA,WAAW,CAACqB,MAAZ;AACA;AACH;;AACDjB,UAAAA,WAAW,GAAG5G,UAAU,CAACM,KAAzB;;AACA,cAAI,CAAC6D,YAAL,EAAmB;AACfqC,YAAAA,WAAW,CAAC6B,YAAZ,CAAyB9I,KAAzB;AACA;AACH;;AACD,cAAI+I,cAAc,GAAG1D,YAAY,CAAChE,IAAb,CAAkB,OAAlB,MAA+B8F,WAApD;AACA,cAAI6B,WAAW,GAAG3B,WAAW,KAAKL,WAAlC;AACA,cAAIiC,WAAW,GAAG5B,WAAW,KAAKL,WAAW,GAAG,CAAhD;;AACA,cAAI+B,cAAJ,EAAoB;AAChBhC,YAAAA,IAAI,CAAC3B,gBAAL,CAAsBpF,KAAtB,EAA6BgC,UAA7B,EAAyCqD,YAAzC,EAAuD0B,IAAI,CAAC/B,MAAL,CAAY,YAAZ,KAA6B,CAAChD,UAArF;;AACA;AACH;;AACD,cAAI,CAACgH,WAAD,IAAgB,CAACC,WAArB,EAAkC;AAC9BlC,YAAAA,IAAI,CAAC3B,gBAAL,CAAsBpF,KAAtB,EAA6BgC,UAA7B,EAAyCqD,YAAzC,EAAuD0B,IAAI,CAAC/B,MAAL,CAAY,YAAZ,KAA6B,CAAChD,UAArF;AACH;AACJ,SAtBD,MAsBO;AACHoG,UAAAA,SAAS,GAAGtH,MAAM,CAACwB,IAAP,EAAZ;;AACA,cAAI8F,SAAS,CAAChG,EAAV,CAAa,UAAb,KAA4BgG,SAAS,CAACS,QAAV,CAAmBvE,WAAnB,CAAhC,EAAiE;AAC7D;AACH;;AACD,cAAIoE,cAAc,CAACnH,MAAnB,EAA2B;AACvB8F,YAAAA,WAAW,GAAGV,WAAW,CAACpF,MAAZ,GAAqBoF,WAAW,CAACA,WAAW,CAACpF,MAAZ,GAAqB,CAAtB,CAAX,CAAoCR,KAApC,GAA4C,CAAjE,GAAqE,CAAnF;AACH;;AACD,cAAI6D,YAAJ,EAAkB;AACd9D,YAAAA,MAAM,CAACS,MAAP,IAAiBwF,IAAI,CAAC3B,gBAAL,CAAsBgD,SAAtB,EAAiCpG,UAAjC,EAA6CqD,YAA7C,EAA2D,CAAC0B,IAAI,CAAC/B,MAAL,CAAY,YAAZ,CAAD,IAA8BhD,UAAzF,CAAjB;AACH,WAFD,MAEO;AACHiF,YAAAA,WAAW,CAACxB,QAAZ,CAAqBiD,cAArB;AACH;AACJ;AACJ,OAzED;;AA0EAjK,MAAAA,eAAe,CAACwB,OAAhB,CAAwBgD,EAAxB,CAA2B+E,cAA3B,EAA2C,CAAC,GAAGnJ,MAAM,CAAC4H,YAAX,EAAyBtH,MAAM,CAACc,OAAP,CAAekG,GAAxC,EAA6C5G,kBAA7C,CAA3C,EAA6G,YAAW;AACpHmI,QAAAA,oBAAoB;;AACpB,YAAI,CAAC5C,WAAL,EAAkB;AACd;AACH;;AACD,YAAId,SAAS,GAAG+C,IAAI,CAAC/B,MAAL,CAAY,WAAZ,CAAhB;AACA,YAAIkE,WAAW,GAAG;AACdlC,UAAAA,WAAW,EAAEA,WADC;AAEda,UAAAA,aAAa,EAAE/C,WAFD;AAGdqC,UAAAA,WAAW,EAAEA,WAHC;AAIdE,UAAAA,WAAW,EAAEA,WAJC;AAKd8B,UAAAA,mBAAmB,EAAE,IALP;AAMdC,UAAAA,mBAAmB,EAAE,KANP;AAOdC,UAAAA,iBAAiB,EAAE;AAPL,SAAlB;;AASA,YAAIhE,YAAJ,EAAkB;AACdA,UAAAA,YAAY,CAACmD,WAAb,CAAyBhE,WAAzB;AACA0E,UAAAA,WAAW,CAACpB,WAAZ,GAA0BzC,YAAY,CAAChE,IAAb,CAAkB,OAAlB,CAA1B;;AACA,cAAI8F,WAAW,KAAK+B,WAAW,CAACpB,WAA5B,IAA2CT,WAAW,GAAG,CAAC,CAA9D,EAAiE;AAC7DrD,YAAAA,SAAS,IAAIA,SAAS,CAACkF,WAAD,CAAtB;AACAA,YAAAA,WAAW,CAACC,mBAAZ,IAAmCrE,WAAW,CAACc,MAAZ,EAAnC;AACH;AACJ;;AACDmB,QAAAA,IAAI,CAACxB,UAAL,CAAgB+C,MAAhB;;AACAY,QAAAA,WAAW,CAACG,iBAAZ,IAAiCvE,WAAW,CAAC0D,WAAZ,CAAwBlE,WAAxB,CAAjC;AACAQ,QAAAA,WAAW,GAAG,IAAd;;AACAiC,QAAAA,IAAI,CAACpB,WAAL,CAAiBC,MAAjB;;AACAmB,QAAAA,IAAI,CAACpB,WAAL,GAAmB,IAAnB;AACAuD,QAAAA,WAAW,CAACE,mBAAZ,IAAmCnC,WAAW,CAACrB,MAAZ,EAAnC;AACAqB,QAAAA,WAAW,CAACuB,WAAZ,CAAwBhE,WAAxB;AACAyC,QAAAA,WAAW,GAAG,IAAd;AACH,OA/BD;AAgCH;AACJ,GA7P0C;AA8P3CqC,EAAAA,KAAK,EAAE,iBAAW;AACd,SAAKvF,QAAL;;AACA,SAAK+C,oBAAL;AACH,GAjQ0C;AAkQ3CyC,EAAAA,OAAO,EAAE,mBAAW;AAChB,SAAKxF,QAAL;AACA,SAAK3C,QAAL,GAAgByE,QAAhB,CAAyBrG,cAAzB;AACH,GArQ0C;AAsQ3CgK,EAAAA,QAAQ,EAAE,oBAAW;AACjB,QAAIzC,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAChD,QAAL,CAAc0F,KAAd,CAAoB1C,IAApB,EAA0B2C,SAA1B;AACA3C,IAAAA,IAAI,CAACpB,WAAL,IAAoBoB,IAAI,CAACpB,WAAL,CAAiB2C,MAAjB,EAApB;AACAvB,IAAAA,IAAI,CAACxB,UAAL,IAAmBwB,IAAI,CAACxB,UAAL,CAAgB+C,MAAhB,EAAnB;AACH,GA3Q0C;AA4Q3CqB,EAAAA,cAAc,EAAE,wBAASC,IAAT,EAAe;AAC3B,QAAI7C,IAAI,GAAG,IAAX;;AACA,YAAQ6C,IAAI,CAACC,IAAb;AACI,WAAK,YAAL;AACA,WAAK,WAAL;AACA,WAAK,YAAL;AACA,WAAK,eAAL;AACA,WAAK,cAAL;AACA,WAAK,uBAAL;AACA,WAAK,aAAL;AACA,WAAK,aAAL;AACA,WAAK,WAAL;AACA,WAAK,eAAL;AACA,WAAK,aAAL;AACA,WAAK,cAAL;AACI9C,QAAAA,IAAI,CAACD,oBAAL;;AACA;;AACJ,WAAK,WAAL;AACI;;AACJ;AACIC,QAAAA,IAAI,CAAChD,QAAL,CAAc6F,IAAd;AAlBR;AAoBH;AAlS0C,CAAhC,CAAf;;AAoSA,CAAC,GAAG7K,uBAAuB,CAACkB,OAA5B,EAAqC,eAArC,EAAsD0D,QAAtD;AACAmG,MAAM,CAACC,OAAP,GAAiBpG,QAAjB","sourcesContent":["/**\r\n * DevExtreme (ui/pivot_grid/ui.sortable.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _utils = require(\"../../events/utils\");\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _dom_component = require(\"../../core/dom_component\");\r\nvar _dom_component2 = _interopRequireDefault(_dom_component);\r\nvar _drag = require(\"../../events/drag\");\r\nvar _drag2 = _interopRequireDefault(_drag);\r\nvar _swatch_container = require(\"../widget/swatch_container\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar SORTABLE_NAMESPACE = \"dxSortable\";\r\nvar SORTABLE_CLASS = \"dx-sortable-old\";\r\nvar SCROLL_STEP = 2;\r\nvar START_SCROLL_OFFSET = 20;\r\nvar SCROLL_TIMEOUT = 10;\r\n\r\nfunction elementHasPoint(element, x, y) {\r\n    var $item = (0, _renderer2.default)(element);\r\n    var offset = $item.offset();\r\n    if (x >= offset.left && x <= offset.left + $item.outerWidth(true)) {\r\n        if (y >= offset.top && y <= offset.top + $item.outerHeight(true)) {\r\n            return true\r\n        }\r\n    }\r\n}\r\n\r\nfunction checkHorizontalPosition(position, itemOffset, rtl) {\r\n    if ((0, _type.isDefined)(itemOffset.posHorizontal)) {\r\n        return rtl ? position > itemOffset.posHorizontal : position < itemOffset.posHorizontal\r\n    } else {\r\n        return true\r\n    }\r\n}\r\n\r\nfunction getIndex($items, $item) {\r\n    var index = -1;\r\n    var itemElement = $item.get(0);\r\n    (0, _iterator.each)($items, function(elementIndex, element) {\r\n        var $element = (0, _renderer2.default)(element);\r\n        if (!($element.attr(\"item-group\") && $element.attr(\"item-group\") === $items.eq(elementIndex - 1).attr(\"item-group\"))) {\r\n            index++\r\n        }\r\n        if (element === itemElement) {\r\n            return false\r\n        }\r\n    });\r\n    return index === $items.length ? -1 : index\r\n}\r\n\r\nfunction getTargetGroup(e, $groups) {\r\n    var result;\r\n    (0, _iterator.each)($groups, function() {\r\n        if (elementHasPoint(this, e.pageX, e.pageY)) {\r\n            result = (0, _renderer2.default)(this)\r\n        }\r\n    });\r\n    return result\r\n}\r\n\r\nfunction getItemsOffset($elements, isVertical, $itemsContainer) {\r\n    var result = [];\r\n    var $item = [];\r\n    for (var i = 0; i < $elements.length; i += $item.length) {\r\n        $item = $elements.eq(i);\r\n        if ($item.attr(\"item-group\")) {\r\n            $item = $itemsContainer.find(\"[item-group='\" + $item.attr(\"item-group\") + \"']\")\r\n        }\r\n        if ($item.is(\":visible\")) {\r\n            var offset = {\r\n                item: $item,\r\n                index: result.length,\r\n                posHorizontal: isVertical ? void 0 : ($item.last().outerWidth(true) + $item.last().offset().left + $item.offset().left) / 2\r\n            };\r\n            if (isVertical) {\r\n                offset.posVertical = ($item.last().offset().top + $item.offset().top + $item.last().outerHeight(true)) / 2\r\n            } else {\r\n                offset.posVertical = $item.last().outerHeight(true) + $item.last().offset().top\r\n            }\r\n            result.push(offset)\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction getScrollWrapper(scrollable) {\r\n    var timeout = null;\r\n    var scrollTop = scrollable.scrollTop();\r\n    var $element = scrollable.$element();\r\n    var top = $element.offset().top;\r\n    var height = $element.height();\r\n    var delta = 0;\r\n\r\n    function onScroll(e) {\r\n        scrollTop = e.scrollOffset.top\r\n    }\r\n    scrollable.on(\"scroll\", onScroll);\r\n\r\n    function move() {\r\n        stop();\r\n        scrollable.scrollTo(scrollTop += delta);\r\n        timeout = setTimeout(move, SCROLL_TIMEOUT)\r\n    }\r\n\r\n    function stop() {\r\n        clearTimeout(timeout)\r\n    }\r\n\r\n    function moveIfNeed(event) {\r\n        if (event.pageY <= top + START_SCROLL_OFFSET) {\r\n            delta = -SCROLL_STEP\r\n        } else {\r\n            if (event.pageY >= top + height - START_SCROLL_OFFSET) {\r\n                delta = SCROLL_STEP\r\n            } else {\r\n                delta = 0;\r\n                stop();\r\n                return\r\n            }\r\n        }\r\n        move()\r\n    }\r\n    return {\r\n        moveIfNeed: moveIfNeed,\r\n        element: function() {\r\n            return $element\r\n        },\r\n        dispose: function() {\r\n            stop();\r\n            scrollable.off(\"scroll\", onScroll)\r\n        }\r\n    }\r\n}\r\nvar Sortable = _dom_component2.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            onChanged: null,\r\n            onDragging: null,\r\n            itemRender: null,\r\n            groupSelector: null,\r\n            itemSelector: \".dx-sort-item\",\r\n            itemContainerSelector: \".dx-sortable-old\",\r\n            sourceClass: \"dx-drag-source\",\r\n            dragClass: \"dx-drag\",\r\n            targetClass: \"dx-drag-target\",\r\n            direction: \"vertical\",\r\n            allowDragging: true,\r\n            groupFilter: null,\r\n            useIndicator: false\r\n        })\r\n    },\r\n    _renderItem: function($sourceItem, target) {\r\n        var itemRender = this.option(\"itemRender\");\r\n        var $item;\r\n        if (itemRender) {\r\n            $item = itemRender($sourceItem, target)\r\n        } else {\r\n            $item = $sourceItem.clone();\r\n            $item.css({\r\n                width: $sourceItem.width(),\r\n                height: $sourceItem.height()\r\n            })\r\n        }\r\n        return $item\r\n    },\r\n    _renderIndicator: function($item, isVertical, $targetGroup, isLast) {\r\n        var height = $item.outerHeight(true);\r\n        var width = $item.outerWidth(true);\r\n        var top = $item.offset().top - $targetGroup.offset().top;\r\n        var left = $item.offset().left - $targetGroup.offset().left;\r\n        this._indicator.css({\r\n            position: \"absolute\",\r\n            top: isLast && isVertical ? top + height : top,\r\n            left: isLast && !isVertical ? left + width : left\r\n        }).toggleClass(\"dx-position-indicator-horizontal\", !isVertical).toggleClass(\"dx-position-indicator-vertical\", !!isVertical).toggleClass(\"dx-position-indicator-last\", !!isLast).height(\"\").width(\"\").appendTo($targetGroup);\r\n        isVertical ? this._indicator.width(width) : this._indicator.height(height)\r\n    },\r\n    _renderDraggable: function($sourceItem) {\r\n        this._$draggable && this._$draggable.remove();\r\n        this._$draggable = this._renderItem($sourceItem, \"drag\").addClass(this.option(\"dragClass\")).appendTo((0, _swatch_container.getSwatchContainer)($sourceItem)).css({\r\n            zIndex: 1e6,\r\n            position: \"absolute\"\r\n        })\r\n    },\r\n    _detachEventHandlers: function() {\r\n        var dragEventsString = [_drag2.default.move, _drag2.default.start, _drag2.default.end, _drag2.default.enter, _drag2.default.leave, _drag2.default.drop].join(\" \");\r\n        _events_engine2.default.off(this._getEventListener(), (0, _utils.addNamespace)(dragEventsString, SORTABLE_NAMESPACE))\r\n    },\r\n    _getItemOffset: function(isVertical, itemsOffset, e) {\r\n        for (var i = 0; i < itemsOffset.length; i++) {\r\n            var shouldInsert;\r\n            var sameLine = e.pageY < itemsOffset[i].posVertical;\r\n            if (isVertical) {\r\n                shouldInsert = sameLine\r\n            } else {\r\n                if (sameLine) {\r\n                    shouldInsert = checkHorizontalPosition(e.pageX, itemsOffset[i], this.option(\"rtlEnabled\"));\r\n                    if (!shouldInsert && itemsOffset[i + 1] && itemsOffset[i + 1].posVertical > itemsOffset[i].posVertical) {\r\n                        shouldInsert = true\r\n                    }\r\n                }\r\n            }\r\n            if (shouldInsert) {\r\n                return itemsOffset[i]\r\n            }\r\n        }\r\n    },\r\n    _getEventListener: function() {\r\n        var groupSelector = this.option(\"groupSelector\");\r\n        var element = this.$element();\r\n        return groupSelector ? element.find(groupSelector) : element\r\n    },\r\n    _attachEventHandlers: function() {\r\n        var that = this;\r\n        var itemSelector = that.option(\"itemSelector\");\r\n        var itemContainerSelector = that.option(\"itemContainerSelector\");\r\n        var groupSelector = that.option(\"groupSelector\");\r\n        var sourceClass = that.option(\"sourceClass\");\r\n        var targetClass = that.option(\"targetClass\");\r\n        var onDragging = that.option(\"onDragging\");\r\n        var groupFilter = that.option(\"groupFilter\");\r\n        var $sourceItem;\r\n        var sourceIndex;\r\n        var $targetItem;\r\n        var $targetGroup;\r\n        var startPositions;\r\n        var sourceGroup;\r\n        var element = that.$element();\r\n        var $groups;\r\n        var scrollWrapper = null;\r\n        var targetIndex = -1;\r\n        var setStartPositions = function() {\r\n            startPositions = [];\r\n            (0, _iterator.each)($sourceItem, function(_, item) {\r\n                startPositions.push((0, _renderer2.default)(item).offset())\r\n            })\r\n        };\r\n        var createGroups = function() {\r\n            if (!groupSelector) {\r\n                return element\r\n            } else {\r\n                return groupFilter ? (0, _renderer2.default)(groupSelector).filter(groupFilter) : element.find(groupSelector)\r\n            }\r\n        };\r\n        var disposeScrollWrapper = function() {\r\n            scrollWrapper && scrollWrapper.dispose();\r\n            scrollWrapper = null\r\n        };\r\n        var invokeOnDraggingEvent = function() {\r\n            var draggingArgs = {\r\n                sourceGroup: sourceGroup,\r\n                sourceIndex: sourceIndex,\r\n                sourceElement: $sourceItem,\r\n                targetGroup: $targetGroup.attr(\"group\"),\r\n                targetIndex: $targetGroup.find(itemSelector).index($targetItem)\r\n            };\r\n            onDragging && onDragging(draggingArgs);\r\n            if (draggingArgs.cancel) {\r\n                $targetGroup = void 0\r\n            }\r\n        };\r\n        that._detachEventHandlers();\r\n        if (that.option(\"allowDragging\")) {\r\n            var $eventListener = that._getEventListener();\r\n            _events_engine2.default.on($eventListener, (0, _utils.addNamespace)(_drag2.default.start, SORTABLE_NAMESPACE), itemSelector, function(e) {\r\n                $sourceItem = (0, _renderer2.default)(e.currentTarget);\r\n                var $sourceGroup = $sourceItem.closest(groupSelector);\r\n                sourceGroup = $sourceGroup.attr(\"group\");\r\n                sourceIndex = getIndex((groupSelector ? $sourceGroup : element).find(itemSelector), $sourceItem);\r\n                if ($sourceItem.attr(\"item-group\")) {\r\n                    $sourceItem = $sourceGroup.find(\"[item-group='\" + $sourceItem.attr(\"item-group\") + \"']\")\r\n                }\r\n                that._renderDraggable($sourceItem);\r\n                $targetItem = that._renderItem($sourceItem, \"target\").addClass(targetClass);\r\n                $sourceItem.addClass(sourceClass);\r\n                setStartPositions();\r\n                $groups = createGroups();\r\n                that._indicator = (0, _renderer2.default)(\"<div>\").addClass(\"dx-position-indicator\")\r\n            });\r\n            _events_engine2.default.on($eventListener, (0, _utils.addNamespace)(_drag2.default.move, SORTABLE_NAMESPACE), function(e) {\r\n                var $item;\r\n                var $lastItem;\r\n                var $prevItem;\r\n                if (!$sourceItem) {\r\n                    return\r\n                }\r\n                targetIndex = -1;\r\n                that._indicator.detach();\r\n                (0, _iterator.each)(that._$draggable, function(index, draggableElement) {\r\n                    (0, _renderer2.default)(draggableElement).css({\r\n                        top: startPositions[index].top + e.offset.y,\r\n                        left: startPositions[index].left + e.offset.x\r\n                    })\r\n                });\r\n                $targetGroup && $targetGroup.removeClass(targetClass);\r\n                $targetGroup = getTargetGroup(e, $groups);\r\n                $targetGroup && invokeOnDraggingEvent();\r\n                if ($targetGroup && scrollWrapper && $targetGroup.get(0) !== scrollWrapper.element().get(0)) {\r\n                    disposeScrollWrapper()\r\n                }\r\n                scrollWrapper && scrollWrapper.moveIfNeed(e);\r\n                if (!$targetGroup) {\r\n                    $targetItem.detach();\r\n                    return\r\n                }\r\n                if (!scrollWrapper && $targetGroup.attr(\"allow-scrolling\")) {\r\n                    scrollWrapper = getScrollWrapper($targetGroup.dxScrollable(\"instance\"))\r\n                }\r\n                $targetGroup.addClass(targetClass);\r\n                var $itemContainer = $targetGroup.find(itemContainerSelector);\r\n                var $items = $itemContainer.find(itemSelector);\r\n                var targetSortable = $targetGroup.closest(\".\" + SORTABLE_CLASS).data(\"dxSortableOld\");\r\n                var useIndicator = targetSortable.option(\"useIndicator\");\r\n                var isVertical = \"vertical\" === (targetSortable || that).option(\"direction\");\r\n                var itemsOffset = getItemsOffset($items, isVertical, $itemContainer);\r\n                var itemOffset = that._getItemOffset(isVertical, itemsOffset, e);\r\n                if (itemOffset) {\r\n                    $item = itemOffset.item;\r\n                    $prevItem = itemsOffset[itemOffset.index - 1] && itemsOffset[itemOffset.index - 1].item;\r\n                    if ($item.hasClass(sourceClass) || $prevItem && $prevItem.hasClass(sourceClass) && $prevItem.is(\":visible\")) {\r\n                        $targetItem.detach();\r\n                        return\r\n                    }\r\n                    targetIndex = itemOffset.index;\r\n                    if (!useIndicator) {\r\n                        $targetItem.insertBefore($item);\r\n                        return\r\n                    }\r\n                    var isAnotherGroup = $targetGroup.attr(\"group\") !== sourceGroup;\r\n                    var isSameIndex = targetIndex === sourceIndex;\r\n                    var isNextIndex = targetIndex === sourceIndex + 1;\r\n                    if (isAnotherGroup) {\r\n                        that._renderIndicator($item, isVertical, $targetGroup, that.option(\"rtlEnabled\") && !isVertical);\r\n                        return\r\n                    }\r\n                    if (!isSameIndex && !isNextIndex) {\r\n                        that._renderIndicator($item, isVertical, $targetGroup, that.option(\"rtlEnabled\") && !isVertical)\r\n                    }\r\n                } else {\r\n                    $lastItem = $items.last();\r\n                    if ($lastItem.is(\":visible\") && $lastItem.hasClass(sourceClass)) {\r\n                        return\r\n                    }\r\n                    if ($itemContainer.length) {\r\n                        targetIndex = itemsOffset.length ? itemsOffset[itemsOffset.length - 1].index + 1 : 0\r\n                    }\r\n                    if (useIndicator) {\r\n                        $items.length && that._renderIndicator($lastItem, isVertical, $targetGroup, !that.option(\"rtlEnabled\") || isVertical)\r\n                    } else {\r\n                        $targetItem.appendTo($itemContainer)\r\n                    }\r\n                }\r\n            });\r\n            _events_engine2.default.on($eventListener, (0, _utils.addNamespace)(_drag2.default.end, SORTABLE_NAMESPACE), function() {\r\n                disposeScrollWrapper();\r\n                if (!$sourceItem) {\r\n                    return\r\n                }\r\n                var onChanged = that.option(\"onChanged\");\r\n                var changedArgs = {\r\n                    sourceIndex: sourceIndex,\r\n                    sourceElement: $sourceItem,\r\n                    sourceGroup: sourceGroup,\r\n                    targetIndex: targetIndex,\r\n                    removeSourceElement: true,\r\n                    removeTargetElement: false,\r\n                    removeSourceClass: true\r\n                };\r\n                if ($targetGroup) {\r\n                    $targetGroup.removeClass(targetClass);\r\n                    changedArgs.targetGroup = $targetGroup.attr(\"group\");\r\n                    if (sourceGroup !== changedArgs.targetGroup || targetIndex > -1) {\r\n                        onChanged && onChanged(changedArgs);\r\n                        changedArgs.removeSourceElement && $sourceItem.remove()\r\n                    }\r\n                }\r\n                that._indicator.detach();\r\n                changedArgs.removeSourceClass && $sourceItem.removeClass(sourceClass);\r\n                $sourceItem = null;\r\n                that._$draggable.remove();\r\n                that._$draggable = null;\r\n                changedArgs.removeTargetElement && $targetItem.remove();\r\n                $targetItem.removeClass(targetClass);\r\n                $targetItem = null\r\n            })\r\n        }\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._attachEventHandlers()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this.$element().addClass(SORTABLE_CLASS)\r\n    },\r\n    _dispose: function() {\r\n        var that = this;\r\n        that.callBase.apply(that, arguments);\r\n        that._$draggable && that._$draggable.detach();\r\n        that._indicator && that._indicator.detach()\r\n    },\r\n    _optionChanged: function(args) {\r\n        var that = this;\r\n        switch (args.name) {\r\n            case \"onDragging\":\r\n            case \"onChanged\":\r\n            case \"itemRender\":\r\n            case \"groupSelector\":\r\n            case \"itemSelector\":\r\n            case \"itemContainerSelector\":\r\n            case \"sourceClass\":\r\n            case \"targetClass\":\r\n            case \"dragClass\":\r\n            case \"allowDragging\":\r\n            case \"groupFilter\":\r\n            case \"useIndicator\":\r\n                that._attachEventHandlers();\r\n                break;\r\n            case \"direction\":\r\n                break;\r\n            default:\r\n                that.callBase(args)\r\n        }\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxSortableOld\", Sortable);\r\nmodule.exports = Sortable;\r\n"]},"metadata":{},"sourceType":"script"}