{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _ui = require(\"../widget/ui.widget\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _notify = require(\"../notify\");\n\nvar _notify2 = _interopRequireDefault(_notify);\n\nvar _file_items_controller = require(\"./file_items_controller\");\n\nvar _file_items_controller2 = _interopRequireDefault(_file_items_controller);\n\nvar _uiFile_manager = require(\"./ui.file_manager.command_manager\");\n\nvar _uiFile_manager2 = require(\"./ui.file_manager.context_menu\");\n\nvar _uiFile_manager3 = _interopRequireDefault(_uiFile_manager2);\n\nvar _uiFile_manager4 = require(\"./ui.file_manager.files_tree_view\");\n\nvar _uiFile_manager5 = _interopRequireDefault(_uiFile_manager4);\n\nvar _uiFile_managerItem_list = require(\"./ui.file_manager.item_list.details\");\n\nvar _uiFile_managerItem_list2 = _interopRequireDefault(_uiFile_managerItem_list);\n\nvar _uiFile_managerItem_list3 = require(\"./ui.file_manager.item_list.thumbnails\");\n\nvar _uiFile_managerItem_list4 = _interopRequireDefault(_uiFile_managerItem_list3);\n\nvar _uiFile_manager6 = require(\"./ui.file_manager.toolbar\");\n\nvar _uiFile_manager7 = _interopRequireDefault(_uiFile_manager6);\n\nvar _uiFile_manager8 = require(\"./ui.file_manager.notification\");\n\nvar _uiFile_manager9 = _interopRequireDefault(_uiFile_manager8);\n\nvar _uiFile_manager10 = require(\"./ui.file_manager.editing\");\n\nvar _uiFile_manager11 = _interopRequireDefault(_uiFile_manager10);\n\nvar _uiFile_manager12 = require(\"./ui.file_manager.breadcrumbs\");\n\nvar _uiFile_manager13 = _interopRequireDefault(_uiFile_manager12);\n\nvar _uiFile_manager14 = require(\"./ui.file_manager.adaptivity\");\n\nvar _uiFile_manager15 = _interopRequireDefault(_uiFile_manager14);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || \"[object Arguments]\" === Object.prototype.toString.call(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar FILE_MANAGER_CLASS = \"dx-filemanager\";\nvar FILE_MANAGER_WRAPPER_CLASS = FILE_MANAGER_CLASS + \"-wrapper\";\nvar FILE_MANAGER_CONTAINER_CLASS = FILE_MANAGER_CLASS + \"-container\";\nvar FILE_MANAGER_DIRS_PANEL_CLASS = FILE_MANAGER_CLASS + \"-dirs-panel\";\nvar FILE_MANAGER_INACTIVE_AREA_CLASS = FILE_MANAGER_CLASS + \"-inactive-area\";\nvar FILE_MANAGER_EDITING_CONTAINER_CLASS = FILE_MANAGER_CLASS + \"-editing-container\";\nvar FILE_MANAGER_ITEMS_PANEL_CLASS = FILE_MANAGER_CLASS + \"-items-panel\";\nvar FILE_MANAGER_ITEM_CUSTOM_THUMBNAIL_CLASS = FILE_MANAGER_CLASS + \"-item-custom-thumbnail\";\n\nvar FileManager = function (_Widget) {\n  _inherits(FileManager, _Widget);\n\n  function FileManager() {\n    _classCallCheck(this, FileManager);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FileManager).apply(this, arguments));\n  }\n\n  _createClass(FileManager, [{\n    key: \"_initTemplates\",\n    value: function value() {}\n  }, {\n    key: \"_initMarkup\",\n    value: function value() {\n      _get(_getPrototypeOf(FileManager.prototype), \"_initMarkup\", this).call(this);\n\n      this._onCurrentDirectoryChangedAction = this._createActionByOption(\"onCurrentDirectoryChanged\");\n      this._onSelectedFileOpenedAction = this._createActionByOption(\"onSelectedFileOpened\");\n      this._controller = new _file_items_controller2.default({\n        currentPath: this.option(\"currentPath\"),\n        rootText: this.option(\"rootFolderName\"),\n        fileProvider: this.option(\"fileProvider\"),\n        allowedFileExtensions: this.option(\"allowedFileExtensions\"),\n        maxUploadFileSize: this.option(\"upload\").maxFileSize,\n        onSelectedDirectoryChanged: this._onSelectedDirectoryChanged.bind(this)\n      });\n      this._commandManager = new _uiFile_manager.FileManagerCommandManager(this.option(\"permissions\"));\n      this.$element().addClass(FILE_MANAGER_CLASS);\n\n      this._createNotificationControl();\n\n      this._initCommandManager();\n\n      this._setItemsViewAreaActive(false);\n    }\n  }, {\n    key: \"_createNotificationControl\",\n    value: function value() {\n      var _this = this;\n\n      var $notificationControl = (0, _renderer2.default)(\"<div>\").addClass(\"dx-filemanager-notification-container\").appendTo(this.$element());\n      this._notificationControl = this._createComponent($notificationControl, _uiFile_manager9.default, {\n        progressPanelContainer: this.$element(),\n        contentTemplate: function contentTemplate(container) {\n          return _this._createWrapper(container);\n        },\n        onActionProgress: function onActionProgress(e) {\n          return _this._onActionProgress(e);\n        }\n      });\n\n      this._editing.option(\"notificationControl\", this._notificationControl);\n    }\n  }, {\n    key: \"_createWrapper\",\n    value: function value(container) {\n      this._$wrapper = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_WRAPPER_CLASS).appendTo(container);\n\n      this._createEditing();\n\n      var $toolbar = (0, _renderer2.default)(\"<div>\").appendTo(this._$wrapper);\n      this._toolbar = this._createComponent($toolbar, _uiFile_manager7.default, {\n        commandManager: this._commandManager,\n        generalItems: this.option(\"toolbar.items\"),\n        fileItems: this.option(\"toolbar.fileSelectionItems\"),\n        itemViewMode: this.option(\"itemView\").mode\n      });\n\n      this._createAdaptivityControl();\n    }\n  }, {\n    key: \"_createAdaptivityControl\",\n    value: function value() {\n      var _this2 = this;\n\n      var $container = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_CONTAINER_CLASS).appendTo(this._$wrapper);\n      this._adaptivityControl = this._createComponent($container, _uiFile_manager15.default, {\n        drawerTemplate: function drawerTemplate(container) {\n          return _this2._createFilesTreeView(container);\n        },\n        contentTemplate: function contentTemplate(container) {\n          return _this2._createItemsPanel(container);\n        },\n        onAdaptiveStateChanged: function onAdaptiveStateChanged(e) {\n          return _this2._onAdaptiveStateChanged(e);\n        }\n      });\n    }\n  }, {\n    key: \"_createEditing\",\n    value: function value() {\n      var _this3 = this;\n\n      var $editingContainer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_EDITING_CONTAINER_CLASS).appendTo(this.$element());\n      this._editing = this._createComponent($editingContainer, _uiFile_manager11.default, {\n        controller: this._controller,\n        model: {\n          getMultipleSelectedItems: this._getMultipleSelectedItems.bind(this)\n        },\n        getItemThumbnail: this._getItemThumbnailInfo.bind(this),\n        onSuccess: function onSuccess(_ref) {\n          var updatedOnlyFiles = _ref.updatedOnlyFiles;\n          return _this3._redrawComponent(updatedOnlyFiles);\n        },\n        onCreating: function onCreating() {\n          return _this3._setItemsViewAreaActive(false);\n        }\n      });\n    }\n  }, {\n    key: \"_createItemsPanel\",\n    value: function value($container) {\n      this._$itemsPanel = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_ITEMS_PANEL_CLASS).appendTo($container);\n\n      this._createBreadcrumbs(this._$itemsPanel);\n\n      this._createItemView(this._$itemsPanel);\n    }\n  }, {\n    key: \"_createFilesTreeView\",\n    value: function value(container) {\n      var _this4 = this;\n\n      var $filesTreeView = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_DIRS_PANEL_CLASS).appendTo(container);\n      this._filesTreeView = this._createComponent($filesTreeView, _uiFile_manager5.default, {\n        storeExpandedState: true,\n        contextMenu: this._createContextMenu(),\n        getDirectories: this.getDirectories.bind(this),\n        getCurrentDirectory: this._getCurrentDirectory.bind(this),\n        onDirectoryClick: this._onFilesTreeViewDirectoryClick.bind(this),\n        onClick: function onClick() {\n          return _this4._setItemsViewAreaActive(false);\n        }\n      });\n    }\n  }, {\n    key: \"_createItemView\",\n    value: function value($container, viewMode) {\n      var _this5 = this;\n\n      var itemViewOptions = this.option(\"itemView\");\n      var options = {\n        selectionMode: this.option(\"selectionMode\"),\n        contextMenu: this._createContextMenu(true),\n        getItems: this._getItemViewItems.bind(this),\n        onError: function onError(_ref2) {\n          var error = _ref2.error;\n          return _this5._showError(error);\n        },\n        onSelectionChanged: this._onItemViewSelectionChanged.bind(this),\n        onSelectedItemOpened: this._onSelectedItemOpened.bind(this),\n        getItemThumbnail: this._getItemThumbnailInfo.bind(this),\n        customizeDetailColumns: this.option(\"customizeDetailColumns\")\n      };\n      var $itemView = (0, _renderer2.default)(\"<div>\").appendTo($container);\n      viewMode = viewMode || itemViewOptions.mode;\n      var widgetClass = \"thumbnails\" === viewMode ? _uiFile_managerItem_list4.default : _uiFile_managerItem_list2.default;\n      this._itemView = this._createComponent($itemView, widgetClass, options);\n\n      _events_engine2.default.on($itemView, \"click\", this._onItemViewClick.bind(this));\n    }\n  }, {\n    key: \"_createBreadcrumbs\",\n    value: function value($container) {\n      var _this6 = this;\n\n      var $breadcrumbs = (0, _renderer2.default)(\"<div>\").appendTo($container);\n      this._breadcrumbs = this._createComponent($breadcrumbs, _uiFile_manager13.default, {\n        rootFolderDisplayName: this.option(\"rootFolderName\"),\n        onCurrentDirectoryChanging: function onCurrentDirectoryChanging(_ref3) {\n          var currentDirectory = _ref3.currentDirectory;\n          return _this6._setCurrentDirectory(currentDirectory);\n        },\n        onOutsideClick: function onOutsideClick() {\n          return _this6._clearSelection();\n        }\n      });\n\n      this._breadcrumbs.setCurrentDirectory(this._getCurrentDirectory());\n    }\n  }, {\n    key: \"_createContextMenu\",\n    value: function value(isolateCreationItemCommands) {\n      var $contextMenu = (0, _renderer2.default)(\"<div>\").appendTo(this._$wrapper);\n      return this._createComponent($contextMenu, _uiFile_manager3.default, {\n        commandManager: this._commandManager,\n        items: this.option(\"contextMenu.items\"),\n        isolateCreationItemCommands: isolateCreationItemCommands\n      });\n    }\n  }, {\n    key: \"_initCommandManager\",\n    value: function value() {\n      var _this7 = this;\n\n      var actions = (0, _extend.extend)(this._editing.getCommandActions(), {\n        refresh: function refresh() {\n          return _this7._refreshAndShowProgress();\n        },\n        thumbnails: function thumbnails() {\n          return _this7.option(\"itemView.mode\", \"thumbnails\");\n        },\n        details: function details() {\n          return _this7.option(\"itemView.mode\", \"details\");\n        },\n        clear: function clear() {\n          return _this7._clearSelection();\n        },\n        showNavPane: function showNavPane() {\n          return _this7._adaptivityControl.toggleDrawer();\n        }\n      });\n\n      this._commandManager.registerActions(actions);\n    }\n  }, {\n    key: \"_onFilesTreeViewDirectoryClick\",\n    value: function value(_ref4) {\n      var itemData = _ref4.itemData;\n\n      this._setCurrentDirectory(itemData);\n\n      this._setItemsViewAreaActive(false);\n    }\n  }, {\n    key: \"_onItemViewSelectionChanged\",\n    value: function value() {\n      this._updateToolbar();\n    }\n  }, {\n    key: \"_onAdaptiveStateChanged\",\n    value: function value(_ref5) {\n      var enabled = _ref5.enabled;\n\n      this._commandManager.setCommandEnabled(\"showNavPane\", enabled);\n\n      this._updateToolbar();\n    }\n  }, {\n    key: \"_onActionProgress\",\n    value: function value(_ref6) {\n      var message = _ref6.message,\n          status = _ref6.status;\n\n      this._toolbar.updateRefreshItem(message, status);\n\n      this._updateToolbar();\n    }\n  }, {\n    key: \"_refreshAndShowProgress\",\n    value: function value() {\n      var _this8 = this;\n\n      this._notificationControl.tryShowProgressPanel();\n\n      return this._controller.refresh().then(function () {\n        return _this8._redrawComponent();\n      });\n    }\n  }, {\n    key: \"_updateToolbar\",\n    value: function value() {\n      var items = this._getSelectedItemInfos();\n\n      this._toolbar.update(items);\n    }\n  }, {\n    key: \"_setItemsViewAreaActive\",\n    value: function value(active) {\n      if (this._itemsViewAreaActive === active) {\n        return;\n      }\n\n      this._itemsViewAreaActive = active;\n      var $activeArea = null;\n      var $inactiveArea = null;\n\n      if (active) {\n        $activeArea = this._itemView.$element();\n        $inactiveArea = this._filesTreeView.$element();\n      } else {\n        $activeArea = this._filesTreeView.$element();\n        $inactiveArea = this._itemView.$element();\n      }\n\n      $activeArea.removeClass(FILE_MANAGER_INACTIVE_AREA_CLASS);\n      $inactiveArea.addClass(FILE_MANAGER_INACTIVE_AREA_CLASS);\n\n      if (!active) {\n        this._clearSelection();\n      }\n    }\n  }, {\n    key: \"_switchView\",\n    value: function value(viewMode) {\n      this._disposeWidget(this._itemView.option(\"contextMenu\"));\n\n      this._disposeWidget(this._itemView);\n\n      this._createItemView(this._$itemsPanel, viewMode);\n\n      this._toolbar.option({\n        itemViewMode: viewMode\n      });\n    }\n  }, {\n    key: \"_disposeWidget\",\n    value: function value(widget) {\n      widget.dispose();\n      widget.$element().remove();\n    }\n  }, {\n    key: \"_clearSelection\",\n    value: function value() {\n      this._itemView.clearSelection();\n    }\n  }, {\n    key: \"_getMultipleSelectedItems\",\n    value: function value() {\n      return this._itemsViewAreaActive ? this._getSelectedItemInfos() : [this._getCurrentDirectory()];\n    }\n  }, {\n    key: \"_showError\",\n    value: function value(message) {\n      this._showNotification(message, false);\n    }\n  }, {\n    key: \"_showNotification\",\n    value: function value(message, isSuccess) {\n      (0, _notify2.default)({\n        message: message,\n        width: 450\n      }, isSuccess ? \"success\" : \"error\", 5e3);\n    }\n  }, {\n    key: \"_redrawComponent\",\n    value: function value(onlyFileItemsView) {\n      !onlyFileItemsView && this._filesTreeView.refresh();\n\n      this._itemView.refresh();\n    }\n  }, {\n    key: \"_getItemViewItems\",\n    value: function value() {\n      var selectedDir = this._getCurrentDirectory();\n\n      if (!selectedDir) {\n        return new _deferred.Deferred().resolve([]).promise();\n      }\n\n      var itemInfos = this.option(\"itemView\").showFolders ? this._controller.getDirectoryContents(selectedDir) : this._controller.getFiles(selectedDir);\n\n      if (this.option(\"itemView.showParentFolder\") && !selectedDir.fileItem.isRoot) {\n        var parentDirItem = selectedDir.fileItem.createClone();\n        parentDirItem.isParentFolder = true;\n        parentDirItem.name = \"..\";\n        parentDirItem.relativeName = \"..\";\n        itemInfos = (0, _deferred.when)(itemInfos).then(function (items) {\n          var itemInfosCopy = _toConsumableArray(items);\n\n          itemInfosCopy.unshift({\n            fileItem: parentDirItem,\n            icon: \"folder\"\n          });\n          return itemInfosCopy;\n        });\n      }\n\n      return itemInfos;\n    }\n  }, {\n    key: \"_onItemViewClick\",\n    value: function value() {\n      this._setItemsViewAreaActive(true);\n    }\n  }, {\n    key: \"_getItemThumbnailInfo\",\n    value: function value(fileInfo) {\n      var func = this.option(\"customizeThumbnail\");\n      var thumbnail = _type2.default.isFunction(func) ? func(fileInfo.fileItem) : fileInfo.fileItem.thumbnail;\n\n      if (thumbnail) {\n        return {\n          thumbnail: thumbnail,\n          cssClass: FILE_MANAGER_ITEM_CUSTOM_THUMBNAIL_CLASS\n        };\n      }\n\n      return {\n        thumbnail: fileInfo.icon\n      };\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManager.prototype), \"_getDefaultOptions\", this).call(this), {\n        fileProvider: null,\n        currentPath: \"\",\n        rootFolderName: _message2.default.format(\"dxFileManager-rootDirectoryName\"),\n        selectionMode: \"multiple\",\n        toolbar: {\n          items: [\"showNavPane\", \"create\", \"upload\", \"refresh\", {\n            name: \"separator\",\n            location: \"after\"\n          }, \"viewSwitcher\"],\n          fileSelectionItems: [\"download\", \"separator\", \"move\", \"copy\", \"rename\", \"separator\", \"delete\", \"refresh\", \"clear\"]\n        },\n        contextMenu: {\n          items: [\"create\", \"upload\", \"rename\", \"move\", \"copy\", \"delete\", \"refresh\", \"download\"]\n        },\n        itemView: {\n          mode: \"details\",\n          showFolders: true,\n          showParentFolder: true\n        },\n        customizeThumbnail: null,\n        customizeDetailColumns: null,\n        onCurrentDirectoryChanged: null,\n        onSelectedFileOpened: null,\n        allowedFileExtensions: [\".txt\", \".rtf\", \".doc\", \".docx\", \".odt\", \".xls\", \".xlsx\", \".ods\", \".ppt\", \".pptx\", \".odp\", \".pdf\", \".xml\", \".png\", \".svg\", \".gif\", \".jpg\", \".jpeg\", \".ico\", \".bmp\", \".avi\", \".mpeg\", \".mkv\", \"\"],\n        upload: {\n          maxFileSize: 0\n        },\n        permissions: {\n          create: false,\n          copy: false,\n          move: false,\n          remove: false,\n          rename: false,\n          upload: false,\n          download: false\n        }\n      });\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function value(args) {\n      var name = args.name;\n\n      switch (name) {\n        case \"currentPath\":\n          this._setCurrentPath(args.value);\n\n          break;\n\n        case \"fileProvider\":\n        case \"selectionMode\":\n        case \"customizeThumbnail\":\n        case \"customizeDetailColumns\":\n        case \"rootFolderName\":\n        case \"allowedFileExtensions\":\n        case \"permissions\":\n        case \"upload\":\n          this.repaint();\n          break;\n\n        case \"itemView\":\n          if (\"itemView.mode\" === args.fullName) {\n            this._switchView(args.value);\n          } else {\n            this.repaint();\n          }\n\n          break;\n\n        case \"toolbar\":\n          this._toolbar.option((0, _extend.extend)(true, args.value.items ? {\n            generalItems: args.value.items\n          } : {}, args.value.fileSelectionItems ? {\n            fileItems: args.value.fileSelectionItems\n          } : {}));\n\n          break;\n\n        case \"contextMenu\":\n          this._itemView.option(\"contextMenu\", this._createContextMenu(true));\n\n          this._filesTreeView.option(\"contextMenu\", this._createContextMenu());\n\n          break;\n\n        case \"onCurrentDirectoryChanged\":\n          this._onCurrentDirectoryChangedAction = this._createActionByOption(\"onCurrentDirectoryChanged\");\n          break;\n\n        case \"onSelectedFileOpened\":\n          this._onSelectedFileOpenedAction = this._createActionByOption(\"onSelectedFileOpened\");\n          break;\n\n        default:\n          _get(_getPrototypeOf(FileManager.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"executeCommand\",\n    value: function value(commandName) {\n      return this._commandManager.executeCommand(commandName);\n    }\n  }, {\n    key: \"_setCurrentDirectory\",\n    value: function value(directoryInfo) {\n      this._controller.setCurrentDirectory(directoryInfo);\n    }\n  }, {\n    key: \"_getCurrentDirectory\",\n    value: function value() {\n      return this._controller.getCurrentDirectory();\n    }\n  }, {\n    key: \"_onSelectedDirectoryChanged\",\n    value: function value() {\n      var currentPath = this._controller.getCurrentPath();\n\n      this._filesTreeView.updateCurrentDirectory();\n\n      this._itemView.refresh();\n\n      this._breadcrumbs.setCurrentDirectory(this._getCurrentDirectory());\n\n      this.option(\"currentPath\", currentPath);\n\n      this._onCurrentDirectoryChangedAction();\n    }\n  }, {\n    key: \"getDirectories\",\n    value: function value(parentDirectoryInfo) {\n      return this._controller.getDirectories(parentDirectoryInfo);\n    }\n  }, {\n    key: \"_getSelectedItemInfos\",\n    value: function value() {\n      return this._itemView.getSelectedItems();\n    }\n  }, {\n    key: \"refresh\",\n    value: function value() {\n      return this.executeCommand(\"refresh\");\n    }\n  }, {\n    key: \"getCurrentDirectory\",\n    value: function value() {\n      var directoryInfo = this._getCurrentDirectory();\n\n      return directoryInfo && directoryInfo.fileItem || null;\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function value() {\n      return this._getSelectedItemInfos().map(function (itemInfo) {\n        return itemInfo.fileItem;\n      });\n    }\n  }, {\n    key: \"_onSelectedItemOpened\",\n    value: function value(_ref7) {\n      var fileItemInfo = _ref7.fileItemInfo;\n      var fileItem = fileItemInfo.fileItem;\n\n      if (!fileItem.isDirectory) {\n        this._onSelectedFileOpenedAction({\n          fileItem: fileItem\n        });\n\n        return;\n      }\n\n      var newCurrentDirectory = fileItem.isParentFolder ? this._getCurrentDirectory().parentDirectory : fileItemInfo;\n\n      this._setCurrentDirectory(newCurrentDirectory);\n\n      if (newCurrentDirectory) {\n        this._filesTreeView.expandDirectory(newCurrentDirectory.parentDirectory);\n      }\n    }\n  }, {\n    key: \"_setCurrentPath\",\n    value: function value(path) {\n      this._controller.setCurrentPath(path);\n    }\n  }]);\n\n  return FileManager;\n}(_ui2.default);\n\n(0, _component_registrator2.default)(\"dxFileManager\", FileManager);\nmodule.exports = FileManager;","map":null,"metadata":{},"sourceType":"script"}