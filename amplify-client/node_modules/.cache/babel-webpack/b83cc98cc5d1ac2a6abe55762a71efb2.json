{"ast":null,"code":"/**\r\n * DevExtreme (viz/chart_components/scroll_bar.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _translator2d = require(\"../translators/translator2d\");\n\nvar _translator2d2 = _interopRequireDefault(_translator2d);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _drag = require(\"../../events/drag\");\n\nvar _drag2 = _interopRequireDefault(_drag);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar _min = Math.min;\nvar _max = Math.max;\nvar MIN_SCROLL_BAR_SIZE = 2;\n\nvar ScrollBar = function ScrollBar(renderer, group) {\n  this._translator = new _translator2d2.default.Translator2D({}, {}, {});\n  this._scroll = renderer.rect().append(group);\n\n  this._addEvents();\n};\n\nfunction _getXCoord(canvas, pos, offset, width) {\n  var x = 0;\n\n  if (\"right\" === pos) {\n    x = canvas.width - canvas.right + offset;\n  } else {\n    if (\"left\" === pos) {\n      x = canvas.left - offset - width;\n    }\n  }\n\n  return x;\n}\n\nfunction _getYCoord(canvas, pos, offset, width) {\n  var y = 0;\n\n  if (\"top\" === pos) {\n    y = canvas.top - offset;\n  } else {\n    if (\"bottom\" === pos) {\n      y = canvas.height - canvas.bottom + width + offset;\n    }\n  }\n\n  return y;\n}\n\nScrollBar.prototype = {\n  _addEvents: function _addEvents() {\n    var _this = this;\n\n    var scrollElement = this._scroll.element;\n\n    _events_engine2.default.on(scrollElement, _drag2.default.start, function (e) {\n      _utils2.default.fireEvent({\n        type: \"dxc-scroll-start\",\n        originalEvent: e,\n        target: scrollElement\n      });\n    });\n\n    _events_engine2.default.on(scrollElement, _drag2.default.move, function (e) {\n      var dX = -e.offset.x * _this._scale;\n      var dY = -e.offset.y * _this._scale;\n      var lx = _this._offset - (_this._layoutOptions.vertical ? dY : dX) / _this._scale;\n\n      _this._applyPosition(lx, lx + _this._translator.canvasLength / _this._scale);\n\n      _utils2.default.fireEvent({\n        type: \"dxc-scroll-move\",\n        originalEvent: e,\n        target: scrollElement,\n        offset: {\n          x: dX,\n          y: dY\n        }\n      });\n    });\n\n    _events_engine2.default.on(scrollElement, _drag2.default.end, function (e) {\n      _utils2.default.fireEvent({\n        type: \"dxc-scroll-end\",\n        originalEvent: e,\n        target: scrollElement,\n        offset: {\n          x: -e.offset.x * _this._scale,\n          y: -e.offset.y * _this._scale\n        }\n      });\n    });\n  },\n  update: function update(options) {\n    var that = this;\n    var position = options.position;\n    var isVertical = options.rotated;\n    var defaultPosition = isVertical ? \"right\" : \"top\";\n    var secondaryPosition = isVertical ? \"left\" : \"bottom\";\n\n    if (position !== defaultPosition && position !== secondaryPosition) {\n      position = defaultPosition;\n    }\n\n    that._scroll.attr({\n      rotate: !options.rotated ? -90 : 0,\n      rotateX: 0,\n      rotateY: 0,\n      fill: options.color,\n      width: options.width,\n      opacity: options.opacity\n    });\n\n    that._layoutOptions = {\n      width: options.width,\n      offset: options.offset,\n      vertical: isVertical,\n      position: position\n    };\n    return that;\n  },\n  init: function init(range, stick) {\n    var that = this;\n    var isDiscrete = \"discrete\" === range.axisType;\n    that._translateWithOffset = isDiscrete && !stick && 1 || 0;\n\n    that._translator.update((0, _extend.extend)({}, range, {\n      minVisible: null,\n      maxVisible: null,\n      visibleCategories: null\n    }, isDiscrete && {\n      min: null,\n      max: null\n    } || {}), that._canvas, {\n      isHorizontal: !that._layoutOptions.vertical,\n      stick: stick\n    });\n\n    return that;\n  },\n  getOptions: function getOptions() {\n    return this._layoutOptions;\n  },\n  setPane: function setPane(panes) {\n    var position = this._layoutOptions.position;\n    var pane;\n\n    if (\"left\" === position || \"top\" === position) {\n      pane = panes[0];\n    } else {\n      pane = panes[panes.length - 1];\n    }\n\n    this.pane = pane.name;\n    return this;\n  },\n  updateSize: function updateSize(canvas) {\n    this._canvas = (0, _extend.extend)({}, canvas);\n    var options = this._layoutOptions;\n    var pos = options.position;\n    var offset = options.offset;\n    var width = options.width;\n\n    this._scroll.attr({\n      translateX: _getXCoord(canvas, pos, offset, width),\n      translateY: _getYCoord(canvas, pos, offset, width)\n    });\n  },\n  getMultipleAxesSpacing: function getMultipleAxesSpacing() {\n    return 0;\n  },\n  estimateMargins: function estimateMargins() {\n    return this.getMargins();\n  },\n  getMargins: function getMargins() {\n    var options = this._layoutOptions;\n    var margins = {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0\n    };\n    margins[options.position] = options.width + options.offset;\n    return margins;\n  },\n  draw: _common.noop,\n  shift: _common.noop,\n  hideTitle: _common.noop,\n  hideOuterElements: _common.noop,\n  prepareAnimation: _common.noop,\n  setPosition: function setPosition(min, max) {\n    var that = this;\n    var translator = that._translator;\n    var minPoint = (0, _type.isDefined)(min) ? translator.translate(min, -that._translateWithOffset) : translator.translate(\"canvas_position_start\");\n    var maxPoint = (0, _type.isDefined)(max) ? translator.translate(max, that._translateWithOffset) : translator.translate(\"canvas_position_end\");\n    that._offset = _min(minPoint, maxPoint);\n    that._scale = translator.getScale(min, max);\n\n    that._applyPosition(_min(minPoint, maxPoint), _max(minPoint, maxPoint));\n  },\n  dispose: function dispose() {\n    this._scroll.dispose();\n\n    this._scroll = this._translator = null;\n  },\n  _applyPosition: function _applyPosition(x1, x2) {\n    var that = this;\n\n    var visibleArea = that._translator.getCanvasVisibleArea();\n\n    var height;\n    x1 = _max(x1, visibleArea.min);\n    x1 = _min(x1, visibleArea.max);\n    x2 = _min(x2, visibleArea.max);\n    x2 = _max(x2, visibleArea.min);\n    height = Math.abs(x2 - x1);\n\n    that._scroll.attr({\n      y: x1,\n      height: height < MIN_SCROLL_BAR_SIZE ? MIN_SCROLL_BAR_SIZE : height\n    });\n  }\n};\nexports.ScrollBar = ScrollBar;","map":null,"metadata":{},"sourceType":"script"}