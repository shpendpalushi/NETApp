{"ast":null,"code":"/**\r\n * DevExtreme (ui/gallery.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar commonUtils = require(\"../core/utils/common\");\n\nvar typeUtils = require(\"../core/utils/type\");\n\nvar windowUtils = require(\"../core/utils/window\");\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar getPublicElement = require(\"../core/utils/dom\").getPublicElement;\n\nvar fx = require(\"../animation/fx\");\n\nvar clickEvent = require(\"../events/click\");\n\nvar translator = require(\"../animation/translator\");\n\nvar devices = require(\"../core/devices\");\n\nvar Widget = require(\"./widget/ui.widget\");\n\nvar eventUtils = require(\"../events/utils\");\n\nvar CollectionWidget = require(\"./collection/ui.collection_widget.edit\");\n\nvar Swipeable = require(\"../events/gesture/swipeable\");\n\nvar BindableTemplate = require(\"../core/templates/bindable_template\").BindableTemplate;\n\nvar Deferred = require(\"../core/utils/deferred\").Deferred;\n\nvar GALLERY_CLASS = \"dx-gallery\";\nvar GALLERY_WRAPPER_CLASS = GALLERY_CLASS + \"-wrapper\";\nvar GALLERY_LOOP_CLASS = \"dx-gallery-loop\";\nvar GALLERY_ITEM_CONTAINER_CLASS = GALLERY_CLASS + \"-container\";\nvar GALLERY_ACTIVE_CLASS = GALLERY_CLASS + \"-active\";\nvar GALLERY_ITEM_CLASS = GALLERY_CLASS + \"-item\";\nvar GALLERY_INVISIBLE_ITEM_CLASS = GALLERY_CLASS + \"-item-invisible\";\nvar GALLERY_LOOP_ITEM_CLASS = GALLERY_ITEM_CLASS + \"-loop\";\nvar GALLERY_ITEM_SELECTOR = \".\" + GALLERY_ITEM_CLASS;\nvar GALLERY_ITEM_SELECTED_CLASS = GALLERY_ITEM_CLASS + \"-selected\";\nvar GALLERY_INDICATOR_CLASS = GALLERY_CLASS + \"-indicator\";\nvar GALLERY_INDICATOR_ITEM_CLASS = GALLERY_INDICATOR_CLASS + \"-item\";\nvar GALLERY_INDICATOR_ITEM_SELECTOR = \".\" + GALLERY_INDICATOR_ITEM_CLASS;\nvar GALLERY_INDICATOR_ITEM_SELECTED_CLASS = GALLERY_INDICATOR_ITEM_CLASS + \"-selected\";\nvar GALLERY_IMAGE_CLASS = \"dx-gallery-item-image\";\nvar GALLERY_ITEM_DATA_KEY = \"dxGalleryItemData\";\nvar MAX_CALC_ERROR = 1;\nvar GalleryNavButton = Widget.inherit({\n  _supportedKeys: function _supportedKeys() {\n    return extend(this.callBase(), {\n      pageUp: commonUtils.noop,\n      pageDown: commonUtils.noop\n    });\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      direction: \"next\",\n      onClick: null,\n      hoverStateEnabled: true,\n      activeStateEnabled: true\n    });\n  },\n  _render: function _render() {\n    this.callBase();\n    var that = this;\n    var $element = this.$element();\n    var eventName = eventUtils.addNamespace(clickEvent.name, this.NAME);\n    $element.addClass(GALLERY_CLASS + \"-nav-button-\" + this.option(\"direction\"));\n    eventsEngine.off($element, eventName);\n    eventsEngine.on($element, eventName, function (e) {\n      that._createActionByOption(\"onClick\")({\n        event: e\n      });\n    });\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"onClick\":\n      case \"direction\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\nvar Gallery = CollectionWidget.inherit({\n  _activeStateUnit: GALLERY_ITEM_SELECTOR,\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      activeStateEnabled: false,\n      animationDuration: 400,\n      animationEnabled: true,\n      loop: false,\n      swipeEnabled: true,\n      indicatorEnabled: true,\n      showIndicator: true,\n      selectedIndex: 0,\n      slideshowDelay: 0,\n      showNavButtons: false,\n      wrapAround: false,\n      initialItemWidth: void 0,\n      stretchImages: false,\n      _itemAttributes: {\n        role: \"option\"\n      },\n      loopItemFocus: false,\n      selectOnFocus: true,\n      selectionMode: \"single\",\n      selectionRequired: true,\n      selectionByClick: false\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _init: function _init() {\n    this.callBase();\n    this.option(\"loopItemFocus\", this.option(\"loop\"));\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates.item = new BindableTemplate(function ($container, data) {\n      var $img = $(\"<img>\").addClass(GALLERY_IMAGE_CLASS);\n\n      if (typeUtils.isPlainObject(data)) {\n        this._prepareDefaultItemTemplate(data, $container);\n\n        $img.attr({\n          src: data.imageSrc,\n          alt: data.imageAlt\n        }).appendTo($container);\n      } else {\n        $img.attr(\"src\", String(data)).appendTo($container);\n      }\n    }.bind(this), [\"imageSrc\", \"imageAlt\", \"text\", \"html\"], this.option(\"integrationOptions.watchMethod\"));\n  },\n  _dataSourceOptions: function _dataSourceOptions() {\n    return {\n      paginate: false\n    };\n  },\n  _itemContainer: function _itemContainer() {\n    return this._$container;\n  },\n  _itemClass: function _itemClass() {\n    return GALLERY_ITEM_CLASS;\n  },\n  _itemDataKey: function _itemDataKey() {\n    return GALLERY_ITEM_DATA_KEY;\n  },\n  _actualItemWidth: function _actualItemWidth() {\n    var isWrapAround = this.option(\"wrapAround\");\n\n    if (this.option(\"stretchImages\")) {\n      var itemPerPage = isWrapAround ? this._itemsPerPage() + 1 : this._itemsPerPage();\n      return 1 / itemPerPage;\n    }\n\n    if (isWrapAround) {\n      return this._itemPercentWidth() * this._itemsPerPage() / (this._itemsPerPage() + 1);\n    }\n\n    return this._itemPercentWidth();\n  },\n  _itemPercentWidth: function _itemPercentWidth() {\n    var percentWidth;\n    var elementWidth = this.$element().outerWidth();\n    var initialItemWidth = this.option(\"initialItemWidth\");\n\n    if (initialItemWidth && initialItemWidth <= elementWidth) {\n      percentWidth = initialItemWidth / elementWidth;\n    } else {\n      percentWidth = 1;\n    }\n\n    return percentWidth;\n  },\n  _itemsPerPage: function _itemsPerPage() {\n    var itemsPerPage = windowUtils.hasWindow() ? Math.floor(1 / this._itemPercentWidth()) : 1;\n    return Math.min(itemsPerPage, this._itemsCount());\n  },\n  _pagesCount: function _pagesCount() {\n    return Math.ceil(this._itemsCount() / this._itemsPerPage());\n  },\n  _itemsCount: function _itemsCount() {\n    return (this.option(\"items\") || []).length;\n  },\n  _offsetDirection: function _offsetDirection() {\n    return this.option(\"rtlEnabled\") ? -1 : 1;\n  },\n  _initMarkup: function _initMarkup() {\n    this._renderWrapper();\n\n    this._renderItemsContainer();\n\n    this.$element().addClass(GALLERY_CLASS);\n    this.$element().toggleClass(GALLERY_LOOP_CLASS, this.option(\"loop\"));\n    this.callBase();\n    this.setAria({\n      role: \"listbox\",\n      label: \"gallery\"\n    });\n  },\n  _render: function _render() {\n    this._renderDragHandler();\n\n    this._renderContainerPosition();\n\n    this._renderItemSizes();\n\n    this._renderItemPositions();\n\n    this._renderNavButtons();\n\n    this._renderIndicator();\n\n    this._renderSelectedItem();\n\n    this._renderItemVisibility();\n\n    this._renderUserInteraction();\n\n    this._setupSlideShow();\n\n    this._reviseDimensions();\n\n    this.callBase();\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    var selectedIndex = this.option(\"selectedIndex\") || 0;\n\n    this._stopItemAnimations();\n\n    this._clearCacheWidth();\n\n    this._cloneDuplicateItems();\n\n    this._renderItemSizes();\n\n    this._renderItemPositions();\n\n    this._renderIndicator();\n\n    this._renderContainerPosition(this._calculateIndexOffset(selectedIndex), true);\n\n    this._renderItemVisibility();\n  },\n  _renderDragHandler: function _renderDragHandler() {\n    var eventName = eventUtils.addNamespace(\"dragstart\", this.NAME);\n    eventsEngine.off(this.$element(), eventName);\n    eventsEngine.on(this.$element(), eventName, \"img\", function () {\n      return false;\n    });\n  },\n  _renderWrapper: function _renderWrapper() {\n    if (this._$wrapper) {\n      return;\n    }\n\n    this._$wrapper = $(\"<div>\").addClass(GALLERY_WRAPPER_CLASS).appendTo(this.$element());\n  },\n  _renderItems: function _renderItems(items) {\n    if (!windowUtils.hasWindow()) {\n      var selectedIndex = this.option(\"selectedIndex\");\n      items = items.length > selectedIndex ? items.slice(selectedIndex, selectedIndex + 1) : items.slice(0, 1);\n    }\n\n    this.callBase(items);\n\n    this._loadNextPageIfNeeded();\n  },\n  _renderItemsContainer: function _renderItemsContainer() {\n    if (this._$container) {\n      return;\n    }\n\n    this._$container = $(\"<div>\").addClass(GALLERY_ITEM_CONTAINER_CLASS).appendTo(this._$wrapper);\n  },\n  _cloneDuplicateItems: function _cloneDuplicateItems() {\n    if (!this.option(\"loop\")) {\n      return;\n    }\n\n    var items = this.option(\"items\") || [];\n    var itemsCount = items.length;\n    var lastItemIndex = itemsCount - 1;\n    var i;\n\n    if (!itemsCount) {\n      return;\n    }\n\n    this._getLoopedItems().remove();\n\n    var duplicateCount = Math.min(this._itemsPerPage(), itemsCount);\n\n    var $items = this._getRealItems();\n\n    var $container = this._itemContainer();\n\n    for (i = 0; i < duplicateCount; i++) {\n      this._cloneItemForDuplicate($items[i], $container);\n    }\n\n    for (i = 0; i < duplicateCount; i++) {\n      this._cloneItemForDuplicate($items[lastItemIndex - i], $container);\n    }\n  },\n  _cloneItemForDuplicate: function _cloneItemForDuplicate(item, $container) {\n    if (item) {\n      $(item).clone(true).addClass(GALLERY_LOOP_ITEM_CLASS).css(\"margin\", 0).appendTo($container);\n    }\n  },\n  _getRealItems: function _getRealItems() {\n    var selector = \".\" + GALLERY_ITEM_CLASS + \":not(.\" + GALLERY_LOOP_ITEM_CLASS + \")\";\n    return this.$element().find(selector);\n  },\n  _getLoopedItems: function _getLoopedItems() {\n    return this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS);\n  },\n  _emptyMessageContainer: function _emptyMessageContainer() {\n    return this._$wrapper;\n  },\n  _renderItemSizes: function _renderItemSizes(startIndex) {\n    var $items = this._itemElements();\n\n    var itemWidth = this._actualItemWidth();\n\n    if (void 0 !== startIndex) {\n      $items = $items.slice(startIndex);\n    }\n\n    $items.each(function (index) {\n      $($items[index]).outerWidth(100 * itemWidth + \"%\");\n    });\n  },\n  _renderItemPositions: function _renderItemPositions() {\n    var itemWidth = this._actualItemWidth();\n\n    var itemsCount = this._itemsCount();\n\n    var itemsPerPage = this._itemsPerPage();\n\n    var loopItemsCount = this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS).length;\n    var lastItemDuplicateIndex = itemsCount + loopItemsCount - 1;\n    var offsetRatio = this.option(\"wrapAround\") ? .5 : 0;\n\n    var freeSpace = this._itemFreeSpace();\n\n    var isGapBetweenImages = !!freeSpace;\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    var selectedIndex = this.option(\"selectedIndex\");\n    var side = rtlEnabled ? \"Right\" : \"Left\";\n\n    this._itemElements().each(function (index) {\n      var realIndex = index;\n      var isLoopItem = $(this).hasClass(GALLERY_LOOP_ITEM_CLASS);\n\n      if (index > itemsCount + itemsPerPage - 1) {\n        realIndex = lastItemDuplicateIndex - realIndex - itemsPerPage;\n      }\n\n      if (!isLoopItem && 0 !== realIndex) {\n        if (isGapBetweenImages) {\n          $(this).css(\"margin\" + side, 100 * freeSpace + \"%\");\n        }\n\n        return;\n      }\n\n      var itemPosition = itemWidth * (realIndex + offsetRatio) + freeSpace * (realIndex + 1 - offsetRatio);\n      var property = isLoopItem ? side.toLowerCase() : \"margin\" + side;\n      $(this).css(property, 100 * itemPosition + \"%\");\n    });\n\n    this._relocateItems(selectedIndex, selectedIndex, true);\n  },\n  _itemFreeSpace: function _itemFreeSpace() {\n    var itemsPerPage = this._itemsPerPage();\n\n    if (this.option(\"wrapAround\")) {\n      itemsPerPage += 1;\n    }\n\n    return (1 - this._actualItemWidth() * itemsPerPage) / (itemsPerPage + 1);\n  },\n  _renderContainerPosition: function _renderContainerPosition(offset, hideItems, animate) {\n    this._releaseInvisibleItems();\n\n    offset = offset || 0;\n    var that = this;\n\n    var itemWidth = this._actualItemWidth();\n\n    var targetIndex = offset;\n\n    var targetPosition = this._offsetDirection() * targetIndex * (itemWidth + this._itemFreeSpace());\n\n    var positionReady;\n\n    if (typeUtils.isDefined(this._animationOverride)) {\n      animate = this._animationOverride;\n      delete this._animationOverride;\n    }\n\n    if (animate) {\n      that._startSwipe();\n\n      positionReady = that._animate(targetPosition).done(that._endSwipe.bind(that));\n    } else {\n      translator.move(this._$container, {\n        left: targetPosition * this._elementWidth(),\n        top: 0\n      });\n      positionReady = new Deferred().resolveWith(that);\n    }\n\n    positionReady.done(function () {\n      this._deferredAnimate && that._deferredAnimate.resolveWith(that);\n      hideItems && this._renderItemVisibility();\n    });\n    return positionReady.promise();\n  },\n  _startSwipe: function _startSwipe() {\n    this.$element().addClass(GALLERY_ACTIVE_CLASS);\n  },\n  _endSwipe: function _endSwipe() {\n    this.$element().removeClass(GALLERY_ACTIVE_CLASS);\n  },\n  _animate: function _animate(targetPosition, extraConfig) {\n    var that = this;\n    var $container = this._$container;\n    var animationComplete = new Deferred();\n    fx.animate(this._$container, extend({\n      type: \"slide\",\n      to: {\n        left: targetPosition * this._elementWidth()\n      },\n      duration: that.option(\"animationDuration\"),\n      complete: function complete() {\n        if (that._needMoveContainerForward()) {\n          translator.move($container, {\n            left: 0,\n            top: 0\n          });\n        }\n\n        if (that._needMoveContainerBack()) {\n          translator.move($container, {\n            left: that._maxContainerOffset() * that._elementWidth(),\n            top: 0\n          });\n        }\n\n        animationComplete.resolveWith(that);\n      }\n    }, extraConfig || {}));\n    return animationComplete;\n  },\n  _needMoveContainerForward: function _needMoveContainerForward() {\n    var expectedPosition = this._$container.position().left * this._offsetDirection();\n\n    var actualPosition = -this._maxItemWidth() * this._elementWidth() * this._itemsCount();\n\n    return expectedPosition <= actualPosition + MAX_CALC_ERROR;\n  },\n  _needMoveContainerBack: function _needMoveContainerBack() {\n    var expectedPosition = this._$container.position().left * this._offsetDirection();\n\n    var actualPosition = this._actualItemWidth() * this._elementWidth();\n\n    return expectedPosition >= actualPosition - MAX_CALC_ERROR;\n  },\n  _maxContainerOffset: function _maxContainerOffset() {\n    return -this._maxItemWidth() * (this._itemsCount() - this._itemsPerPage()) * this._offsetDirection();\n  },\n  _maxItemWidth: function _maxItemWidth() {\n    return this._actualItemWidth() + this._itemFreeSpace();\n  },\n  _reviseDimensions: function _reviseDimensions() {\n    var that = this;\n\n    var $firstItem = that._itemElements().first().find(\".dx-item-content\");\n\n    if (!$firstItem || $firstItem.is(\":hidden\")) {\n      return;\n    }\n\n    if (!that.option(\"height\")) {\n      that.option(\"height\", $firstItem.outerHeight());\n    }\n\n    if (!that.option(\"width\")) {\n      that.option(\"width\", $firstItem.outerWidth());\n    }\n\n    this._dimensionChanged();\n  },\n  _renderIndicator: function _renderIndicator() {\n    this._cleanIndicators();\n\n    if (!this.option(\"showIndicator\")) {\n      return;\n    }\n\n    var indicator = this._$indicator = $(\"<div>\").addClass(GALLERY_INDICATOR_CLASS).appendTo(this._$wrapper);\n\n    for (var i = 0; i < this._pagesCount(); i++) {\n      $(\"<div>\").addClass(GALLERY_INDICATOR_ITEM_CLASS).appendTo(indicator);\n    }\n\n    this._renderSelectedPageIndicator();\n  },\n  _cleanIndicators: function _cleanIndicators() {\n    if (this._$indicator) {\n      this._$indicator.remove();\n    }\n  },\n  _renderSelectedItem: function _renderSelectedItem() {\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    this._itemElements().removeClass(GALLERY_ITEM_SELECTED_CLASS).eq(selectedIndex).addClass(GALLERY_ITEM_SELECTED_CLASS);\n  },\n  _renderItemVisibility: function _renderItemVisibility() {\n    if (this.option(\"initialItemWidth\") || this.option(\"wrapAround\")) {\n      this._releaseInvisibleItems();\n\n      return;\n    }\n\n    this._itemElements().each(function (index, item) {\n      if (this.option(\"selectedIndex\") === index) {\n        $(item).removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\n      } else {\n        $(item).addClass(GALLERY_INVISIBLE_ITEM_CLASS);\n      }\n    }.bind(this));\n\n    this._getLoopedItems().addClass(GALLERY_INVISIBLE_ITEM_CLASS);\n  },\n  _releaseInvisibleItems: function _releaseInvisibleItems() {\n    this._itemElements().removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\n\n    this._getLoopedItems().removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\n  },\n  _renderSelectedPageIndicator: function _renderSelectedPageIndicator() {\n    if (!this._$indicator) {\n      return;\n    }\n\n    var itemIndex = this.option(\"selectedIndex\");\n    var lastIndex = this._pagesCount() - 1;\n    var pageIndex = Math.ceil(itemIndex / this._itemsPerPage());\n    pageIndex = Math.min(lastIndex, pageIndex);\n\n    this._$indicator.find(GALLERY_INDICATOR_ITEM_SELECTOR).removeClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS).eq(pageIndex).addClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS);\n  },\n  _renderUserInteraction: function _renderUserInteraction() {\n    var rootElement = this.$element();\n    var swipeEnabled = this.option(\"swipeEnabled\") && this._itemsCount() > 1;\n\n    this._createComponent(rootElement, Swipeable, {\n      disabled: this.option(\"disabled\") || !swipeEnabled,\n      onStart: this._swipeStartHandler.bind(this),\n      onUpdated: this._swipeUpdateHandler.bind(this),\n      onEnd: this._swipeEndHandler.bind(this),\n      itemSizeFunc: this._elementWidth.bind(this)\n    });\n\n    var indicatorSelectAction = this._createAction(this._indicatorSelectHandler);\n\n    eventsEngine.off(rootElement, eventUtils.addNamespace(clickEvent.name, this.NAME), GALLERY_INDICATOR_ITEM_SELECTOR);\n    eventsEngine.on(rootElement, eventUtils.addNamespace(clickEvent.name, this.NAME), GALLERY_INDICATOR_ITEM_SELECTOR, function (e) {\n      indicatorSelectAction({\n        event: e\n      });\n    });\n  },\n  _indicatorSelectHandler: function _indicatorSelectHandler(args) {\n    var e = args.event;\n    var instance = args.component;\n\n    if (!instance.option(\"indicatorEnabled\")) {\n      return;\n    }\n\n    var indicatorIndex = $(e.target).index();\n\n    var itemIndex = instance._fitPaginatedIndex(indicatorIndex * instance._itemsPerPage());\n\n    instance._needLongMove = true;\n    instance.option(\"selectedIndex\", itemIndex);\n\n    instance._loadNextPageIfNeeded(itemIndex);\n  },\n  _renderNavButtons: function _renderNavButtons() {\n    var that = this;\n\n    if (!that.option(\"showNavButtons\")) {\n      that._cleanNavButtons();\n\n      return;\n    }\n\n    that._prevNavButton = $(\"<div>\").appendTo(this._$wrapper);\n\n    that._createComponent(that._prevNavButton, GalleryNavButton, {\n      direction: \"prev\",\n      onClick: function onClick() {\n        that._prevPage();\n      }\n    });\n\n    that._nextNavButton = $(\"<div>\").appendTo(this._$wrapper);\n\n    that._createComponent(that._nextNavButton, GalleryNavButton, {\n      direction: \"next\",\n      onClick: function onClick() {\n        that._nextPage();\n      }\n    });\n\n    this._renderNavButtonsVisibility();\n  },\n  _prevPage: function _prevPage() {\n    var visiblePageSize = this._itemsPerPage();\n\n    var newSelectedIndex = this.option(\"selectedIndex\") - visiblePageSize;\n\n    if (newSelectedIndex === -visiblePageSize && visiblePageSize === this._itemsCount()) {\n      return this._relocateItems(newSelectedIndex, 0);\n    } else {\n      return this.goToItem(this._fitPaginatedIndex(newSelectedIndex));\n    }\n  },\n  _nextPage: function _nextPage() {\n    var visiblePageSize = this._itemsPerPage();\n\n    var newSelectedIndex = this.option(\"selectedIndex\") + visiblePageSize;\n\n    if (newSelectedIndex === visiblePageSize && visiblePageSize === this._itemsCount()) {\n      return this._relocateItems(newSelectedIndex, 0);\n    } else {\n      return this.goToItem(this._fitPaginatedIndex(newSelectedIndex)).done(this._loadNextPageIfNeeded);\n    }\n  },\n  _loadNextPageIfNeeded: function _loadNextPageIfNeeded(selectedIndex) {\n    selectedIndex = void 0 === selectedIndex ? this.option(\"selectedIndex\") : selectedIndex;\n\n    if (this._dataSource && this._dataSource.paginate() && this._shouldLoadNextPage(selectedIndex) && !this._isDataSourceLoading() && !this._isLastPage()) {\n      this._loadNextPage().done(function () {\n        this._renderIndicator();\n\n        this._renderItemPositions();\n\n        this._renderNavButtonsVisibility();\n\n        this._renderItemSizes(selectedIndex);\n      }.bind(this));\n    }\n  },\n  _shouldLoadNextPage: function _shouldLoadNextPage(selectedIndex) {\n    var visiblePageSize = this._itemsPerPage();\n\n    return selectedIndex + 2 * visiblePageSize > this.option(\"items\").length;\n  },\n  _allowDynamicItemsAppend: function _allowDynamicItemsAppend() {\n    return true;\n  },\n  _fitPaginatedIndex: function _fitPaginatedIndex(itemIndex) {\n    var itemsPerPage = this._itemsPerPage();\n\n    var restItemsCount = itemIndex < 0 ? itemsPerPage + itemIndex : this._itemsCount() - itemIndex;\n\n    if (itemIndex > this._itemsCount() - 1) {\n      itemIndex = 0;\n      this._goToGhostItem = true;\n    } else {\n      if (restItemsCount < itemsPerPage && restItemsCount > 0) {\n        if (itemIndex > 0) {\n          itemIndex -= itemsPerPage - restItemsCount;\n        } else {\n          itemIndex += itemsPerPage - restItemsCount;\n        }\n      }\n    }\n\n    return itemIndex;\n  },\n  _cleanNavButtons: function _cleanNavButtons() {\n    if (this._prevNavButton) {\n      this._prevNavButton.remove();\n\n      delete this._prevNavButton;\n    }\n\n    if (this._nextNavButton) {\n      this._nextNavButton.remove();\n\n      delete this._nextNavButton;\n    }\n  },\n  _renderNavButtonsVisibility: function _renderNavButtonsVisibility() {\n    if (!this.option(\"showNavButtons\") || !this._prevNavButton || !this._nextNavButton) {\n      return;\n    }\n\n    var selectedIndex = this.option(\"selectedIndex\");\n    var loop = this.option(\"loop\");\n\n    var itemsCount = this._itemsCount();\n\n    this._prevNavButton.show();\n\n    this._nextNavButton.show();\n\n    if (0 === itemsCount) {\n      this._prevNavButton.hide();\n\n      this._nextNavButton.hide();\n    }\n\n    if (loop) {\n      return;\n    }\n\n    var nextHidden = selectedIndex === itemsCount - this._itemsPerPage();\n\n    var prevHidden = itemsCount < 2 || 0 === selectedIndex;\n\n    if (this._dataSource && this._dataSource.paginate()) {\n      nextHidden = nextHidden && this._isLastPage();\n    } else {\n      nextHidden = nextHidden || itemsCount < 2;\n    }\n\n    if (prevHidden) {\n      this._prevNavButton.hide();\n    }\n\n    if (nextHidden) {\n      this._nextNavButton.hide();\n    }\n  },\n  _setupSlideShow: function _setupSlideShow() {\n    var that = this;\n    var slideshowDelay = that.option(\"slideshowDelay\");\n    clearTimeout(that._slideshowTimer);\n\n    if (!slideshowDelay) {\n      return;\n    }\n\n    that._slideshowTimer = setTimeout(function () {\n      if (that._userInteraction) {\n        that._setupSlideShow();\n\n        return;\n      }\n\n      that.nextItem(true).done(that._setupSlideShow);\n    }, slideshowDelay);\n  },\n  _elementWidth: function _elementWidth() {\n    if (!this._cacheElementWidth) {\n      this._cacheElementWidth = this.$element().width();\n    }\n\n    return this._cacheElementWidth;\n  },\n  _clearCacheWidth: function _clearCacheWidth() {\n    delete this._cacheElementWidth;\n  },\n  _swipeStartHandler: function _swipeStartHandler(e) {\n    this._releaseInvisibleItems();\n\n    this._clearCacheWidth();\n\n    this._elementWidth();\n\n    var itemsCount = this._itemsCount();\n\n    if (!itemsCount) {\n      e.event.cancel = true;\n      return;\n    }\n\n    this._stopItemAnimations();\n\n    this._startSwipe();\n\n    this._userInteraction = true;\n\n    if (!this.option(\"loop\")) {\n      var selectedIndex = this.option(\"selectedIndex\");\n\n      var startOffset = itemsCount - selectedIndex - this._itemsPerPage();\n\n      var endOffset = selectedIndex;\n      var rtlEnabled = this.option(\"rtlEnabled\");\n      e.event.maxLeftOffset = rtlEnabled ? endOffset : startOffset;\n      e.event.maxRightOffset = rtlEnabled ? startOffset : endOffset;\n    }\n  },\n  _stopItemAnimations: function _stopItemAnimations() {\n    fx.stop(this._$container, true);\n  },\n  _swipeUpdateHandler: function _swipeUpdateHandler(e) {\n    var wrapAroundRatio = this.option(\"wrapAround\") ? 1 : 0;\n    var offset = this._offsetDirection() * e.event.offset * (this._itemsPerPage() + wrapAroundRatio) - this.option(\"selectedIndex\");\n\n    if (offset < 0) {\n      this._loadNextPageIfNeeded(Math.ceil(Math.abs(offset)));\n    }\n\n    this._renderContainerPosition(offset);\n  },\n  _swipeEndHandler: function _swipeEndHandler(e) {\n    var targetOffset = e.event.targetOffset * this._offsetDirection() * this._itemsPerPage();\n\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    var newIndex = this._fitIndex(selectedIndex - targetOffset);\n\n    var paginatedIndex = this._fitPaginatedIndex(newIndex);\n\n    if (Math.abs(targetOffset) < this._itemsPerPage()) {\n      this._relocateItems(selectedIndex);\n\n      return;\n    }\n\n    if (this._itemsPerPage() === this._itemsCount()) {\n      if (targetOffset > 0) {\n        this._relocateItems(-targetOffset);\n      } else {\n        this._relocateItems(0);\n      }\n\n      return;\n    }\n\n    this.option(\"selectedIndex\", paginatedIndex);\n  },\n  _setFocusOnSelect: function _setFocusOnSelect() {\n    this._userInteraction = true;\n    var selectedItem = this.itemElements().filter(\".\" + GALLERY_ITEM_SELECTED_CLASS);\n    this.option(\"focusedElement\", getPublicElement(selectedItem));\n    this._userInteraction = false;\n  },\n  _flipIndex: function _flipIndex(index) {\n    var itemsCount = this._itemsCount();\n\n    index %= itemsCount;\n\n    if (index > (itemsCount + 1) / 2) {\n      index -= itemsCount;\n    }\n\n    if (index < -(itemsCount - 1) / 2) {\n      index += itemsCount;\n    }\n\n    return index;\n  },\n  _fitIndex: function _fitIndex(index) {\n    if (!this.option(\"loop\")) {\n      return index;\n    }\n\n    var itemsCount = this._itemsCount();\n\n    if (index >= itemsCount || index < 0) {\n      this._goToGhostItem = true;\n    }\n\n    if (index >= itemsCount) {\n      index = itemsCount - index;\n    }\n\n    index %= itemsCount;\n\n    if (index < 0) {\n      index += itemsCount;\n    }\n\n    return index;\n  },\n  _clean: function _clean() {\n    this.callBase();\n\n    this._cleanIndicators();\n\n    this._cleanNavButtons();\n  },\n  _dispose: function _dispose() {\n    clearTimeout(this._slideshowTimer);\n    this.callBase();\n  },\n  _updateSelection: function _updateSelection(addedSelection, removedSelection) {\n    this._stopItemAnimations();\n\n    this._renderNavButtonsVisibility();\n\n    this._renderSelectedItem();\n\n    this._relocateItems(addedSelection[0], removedSelection[0]);\n\n    this._renderSelectedPageIndicator();\n  },\n  _relocateItems: function _relocateItems(newIndex, prevIndex, withoutAnimation) {\n    if (void 0 === prevIndex) {\n      prevIndex = newIndex;\n    }\n\n    var indexOffset = this._calculateIndexOffset(newIndex, prevIndex);\n\n    this._renderContainerPosition(indexOffset, true, this.option(\"animationEnabled\") && !withoutAnimation).done(function () {\n      this._setFocusOnSelect();\n\n      this._userInteraction = false;\n\n      this._setupSlideShow();\n    });\n  },\n  _focusInHandler: function _focusInHandler() {\n    if (fx.isAnimating(this._$container) || this._userInteraction) {\n      return;\n    }\n\n    this.callBase.apply(this, arguments);\n  },\n  _focusOutHandler: function _focusOutHandler() {\n    if (fx.isAnimating(this._$container) || this._userInteraction) {\n      return;\n    }\n\n    this.callBase.apply(this, arguments);\n  },\n  _selectFocusedItem: commonUtils.noop,\n  _moveFocus: function _moveFocus() {\n    this._stopItemAnimations();\n\n    this.callBase.apply(this, arguments);\n    var index = this.itemElements().index($(this.option(\"focusedElement\")));\n    this.goToItem(index, this.option(\"animationEnabled\"));\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible) {\n      this._reviseDimensions();\n    }\n  },\n  _calculateIndexOffset: function _calculateIndexOffset(newIndex, lastIndex) {\n    if (void 0 === lastIndex) {\n      lastIndex = newIndex;\n    }\n\n    var indexOffset = lastIndex - newIndex;\n\n    if (this.option(\"loop\") && !this._needLongMove && this._goToGhostItem) {\n      if (this._isItemOnFirstPage(newIndex) && this._isItemOnLastPage(lastIndex)) {\n        indexOffset = -this._itemsPerPage();\n      } else {\n        if (this._isItemOnLastPage(newIndex) && this._isItemOnFirstPage(lastIndex)) {\n          indexOffset = this._itemsPerPage();\n        }\n      }\n\n      this._goToGhostItem = false;\n    }\n\n    this._needLongMove = false;\n    indexOffset -= lastIndex;\n    return indexOffset;\n  },\n  _isItemOnLastPage: function _isItemOnLastPage(itemIndex) {\n    return itemIndex >= this._itemsCount() - this._itemsPerPage();\n  },\n  _isItemOnFirstPage: function _isItemOnFirstPage(itemIndex) {\n    return itemIndex <= this._itemsPerPage();\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"width\":\n      case \"initialItemWidth\":\n        this.callBase.apply(this, arguments);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"animationDuration\":\n        this._renderNavButtonsVisibility();\n\n        break;\n\n      case \"animationEnabled\":\n        break;\n\n      case \"loop\":\n        this.$element().toggleClass(GALLERY_LOOP_CLASS, args.value);\n        this.option(\"loopItemFocus\", args.value);\n\n        if (windowUtils.hasWindow()) {\n          this._cloneDuplicateItems();\n\n          this._renderItemPositions();\n\n          this._renderNavButtonsVisibility();\n        }\n\n        break;\n\n      case \"showIndicator\":\n        this._renderIndicator();\n\n        break;\n\n      case \"showNavButtons\":\n        this._renderNavButtons();\n\n        break;\n\n      case \"slideshowDelay\":\n        this._setupSlideShow();\n\n        break;\n\n      case \"wrapAround\":\n      case \"stretchImages\":\n        if (windowUtils.hasWindow()) {\n          this._renderItemSizes();\n\n          this._renderItemPositions();\n\n          this._renderItemVisibility();\n        }\n\n        break;\n\n      case \"swipeEnabled\":\n      case \"indicatorEnabled\":\n        this._renderUserInteraction();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  goToItem: function goToItem(itemIndex, animation) {\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    var itemsCount = this._itemsCount();\n\n    if (void 0 !== animation) {\n      this._animationOverride = animation;\n    }\n\n    itemIndex = this._fitIndex(itemIndex);\n    this._deferredAnimate = new Deferred();\n\n    if (itemIndex > itemsCount - 1 || itemIndex < 0 || selectedIndex === itemIndex) {\n      return this._deferredAnimate.resolveWith(this).promise();\n    }\n\n    this.option(\"selectedIndex\", itemIndex);\n    return this._deferredAnimate.promise();\n  },\n  prevItem: function prevItem(animation) {\n    return this.goToItem(this.option(\"selectedIndex\") - 1, animation);\n  },\n  nextItem: function nextItem(animation) {\n    return this.goToItem(this.option(\"selectedIndex\") + 1, animation);\n  }\n});\nregisterComponent(\"dxGallery\", Gallery);\nmodule.exports = Gallery;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/gallery.js"],"names":["$","require","eventsEngine","registerComponent","commonUtils","typeUtils","windowUtils","extend","getPublicElement","fx","clickEvent","translator","devices","Widget","eventUtils","CollectionWidget","Swipeable","BindableTemplate","Deferred","GALLERY_CLASS","GALLERY_WRAPPER_CLASS","GALLERY_LOOP_CLASS","GALLERY_ITEM_CONTAINER_CLASS","GALLERY_ACTIVE_CLASS","GALLERY_ITEM_CLASS","GALLERY_INVISIBLE_ITEM_CLASS","GALLERY_LOOP_ITEM_CLASS","GALLERY_ITEM_SELECTOR","GALLERY_ITEM_SELECTED_CLASS","GALLERY_INDICATOR_CLASS","GALLERY_INDICATOR_ITEM_CLASS","GALLERY_INDICATOR_ITEM_SELECTOR","GALLERY_INDICATOR_ITEM_SELECTED_CLASS","GALLERY_IMAGE_CLASS","GALLERY_ITEM_DATA_KEY","MAX_CALC_ERROR","GalleryNavButton","inherit","_supportedKeys","callBase","pageUp","noop","pageDown","_getDefaultOptions","direction","onClick","hoverStateEnabled","activeStateEnabled","_render","that","$element","eventName","addNamespace","name","NAME","addClass","option","off","on","e","_createActionByOption","event","_optionChanged","args","_invalidate","Gallery","_activeStateUnit","animationDuration","animationEnabled","loop","swipeEnabled","indicatorEnabled","showIndicator","selectedIndex","slideshowDelay","showNavButtons","wrapAround","initialItemWidth","stretchImages","_itemAttributes","role","loopItemFocus","selectOnFocus","selectionMode","selectionRequired","selectionByClick","_defaultOptionsRules","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","_init","_initTemplates","_defaultTemplates","item","$container","data","$img","isPlainObject","_prepareDefaultItemTemplate","attr","src","imageSrc","alt","imageAlt","appendTo","String","bind","_dataSourceOptions","paginate","_itemContainer","_$container","_itemClass","_itemDataKey","_actualItemWidth","isWrapAround","itemPerPage","_itemsPerPage","_itemPercentWidth","percentWidth","elementWidth","outerWidth","itemsPerPage","hasWindow","Math","floor","min","_itemsCount","_pagesCount","ceil","length","_offsetDirection","_initMarkup","_renderWrapper","_renderItemsContainer","toggleClass","setAria","label","_renderDragHandler","_renderContainerPosition","_renderItemSizes","_renderItemPositions","_renderNavButtons","_renderIndicator","_renderSelectedItem","_renderItemVisibility","_renderUserInteraction","_setupSlideShow","_reviseDimensions","_dimensionChanged","_stopItemAnimations","_clearCacheWidth","_cloneDuplicateItems","_calculateIndexOffset","_$wrapper","_renderItems","items","slice","_loadNextPageIfNeeded","itemsCount","lastItemIndex","i","_getLoopedItems","remove","duplicateCount","$items","_getRealItems","_cloneItemForDuplicate","clone","css","selector","find","_emptyMessageContainer","startIndex","_itemElements","itemWidth","each","index","loopItemsCount","lastItemDuplicateIndex","offsetRatio","freeSpace","_itemFreeSpace","isGapBetweenImages","rtlEnabled","side","realIndex","isLoopItem","hasClass","itemPosition","property","toLowerCase","_relocateItems","offset","hideItems","animate","_releaseInvisibleItems","targetIndex","targetPosition","positionReady","isDefined","_animationOverride","_startSwipe","_animate","done","_endSwipe","move","left","_elementWidth","top","resolveWith","_deferredAnimate","promise","removeClass","extraConfig","animationComplete","type","to","duration","complete","_needMoveContainerForward","_needMoveContainerBack","_maxContainerOffset","expectedPosition","position","actualPosition","_maxItemWidth","$firstItem","first","is","outerHeight","_cleanIndicators","indicator","_$indicator","_renderSelectedPageIndicator","eq","itemIndex","lastIndex","pageIndex","rootElement","_createComponent","disabled","onStart","_swipeStartHandler","onUpdated","_swipeUpdateHandler","onEnd","_swipeEndHandler","itemSizeFunc","indicatorSelectAction","_createAction","_indicatorSelectHandler","instance","component","indicatorIndex","target","_fitPaginatedIndex","_needLongMove","_cleanNavButtons","_prevNavButton","_prevPage","_nextNavButton","_nextPage","_renderNavButtonsVisibility","visiblePageSize","newSelectedIndex","goToItem","_dataSource","_shouldLoadNextPage","_isDataSourceLoading","_isLastPage","_loadNextPage","_allowDynamicItemsAppend","restItemsCount","_goToGhostItem","show","hide","nextHidden","prevHidden","clearTimeout","_slideshowTimer","setTimeout","_userInteraction","nextItem","_cacheElementWidth","width","cancel","startOffset","endOffset","maxLeftOffset","maxRightOffset","stop","wrapAroundRatio","abs","targetOffset","newIndex","_fitIndex","paginatedIndex","_setFocusOnSelect","selectedItem","itemElements","filter","_flipIndex","_clean","_dispose","_updateSelection","addedSelection","removedSelection","prevIndex","withoutAnimation","indexOffset","_focusInHandler","isAnimating","apply","arguments","_focusOutHandler","_selectFocusedItem","_moveFocus","_visibilityChanged","visible","_isItemOnFirstPage","_isItemOnLastPage","value","animation","prevItem","module","exports","default"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,CAAC,GAAGC,OAAO,CAAC,kBAAD,CAAf;;AACA,IAAIC,YAAY,GAAGD,OAAO,CAAC,8BAAD,CAA1B;;AACA,IAAIE,iBAAiB,GAAGF,OAAO,CAAC,+BAAD,CAA/B;;AACA,IAAIG,WAAW,GAAGH,OAAO,CAAC,sBAAD,CAAzB;;AACA,IAAII,SAAS,GAAGJ,OAAO,CAAC,oBAAD,CAAvB;;AACA,IAAIK,WAAW,GAAGL,OAAO,CAAC,sBAAD,CAAzB;;AACA,IAAIM,MAAM,GAAGN,OAAO,CAAC,sBAAD,CAAP,CAAgCM,MAA7C;;AACA,IAAIC,gBAAgB,GAAGP,OAAO,CAAC,mBAAD,CAAP,CAA6BO,gBAApD;;AACA,IAAIC,EAAE,GAAGR,OAAO,CAAC,iBAAD,CAAhB;;AACA,IAAIS,UAAU,GAAGT,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAIU,UAAU,GAAGV,OAAO,CAAC,yBAAD,CAAxB;;AACA,IAAIW,OAAO,GAAGX,OAAO,CAAC,iBAAD,CAArB;;AACA,IAAIY,MAAM,GAAGZ,OAAO,CAAC,oBAAD,CAApB;;AACA,IAAIa,UAAU,GAAGb,OAAO,CAAC,iBAAD,CAAxB;;AACA,IAAIc,gBAAgB,GAAGd,OAAO,CAAC,wCAAD,CAA9B;;AACA,IAAIe,SAAS,GAAGf,OAAO,CAAC,6BAAD,CAAvB;;AACA,IAAIgB,gBAAgB,GAAGhB,OAAO,CAAC,qCAAD,CAAP,CAA+CgB,gBAAtE;;AACA,IAAIC,QAAQ,GAAGjB,OAAO,CAAC,wBAAD,CAAP,CAAkCiB,QAAjD;;AACA,IAAIC,aAAa,GAAG,YAApB;AACA,IAAIC,qBAAqB,GAAGD,aAAa,GAAG,UAA5C;AACA,IAAIE,kBAAkB,GAAG,iBAAzB;AACA,IAAIC,4BAA4B,GAAGH,aAAa,GAAG,YAAnD;AACA,IAAII,oBAAoB,GAAGJ,aAAa,GAAG,SAA3C;AACA,IAAIK,kBAAkB,GAAGL,aAAa,GAAG,OAAzC;AACA,IAAIM,4BAA4B,GAAGN,aAAa,GAAG,iBAAnD;AACA,IAAIO,uBAAuB,GAAGF,kBAAkB,GAAG,OAAnD;AACA,IAAIG,qBAAqB,GAAG,MAAMH,kBAAlC;AACA,IAAII,2BAA2B,GAAGJ,kBAAkB,GAAG,WAAvD;AACA,IAAIK,uBAAuB,GAAGV,aAAa,GAAG,YAA9C;AACA,IAAIW,4BAA4B,GAAGD,uBAAuB,GAAG,OAA7D;AACA,IAAIE,+BAA+B,GAAG,MAAMD,4BAA5C;AACA,IAAIE,qCAAqC,GAAGF,4BAA4B,GAAG,WAA3E;AACA,IAAIG,mBAAmB,GAAG,uBAA1B;AACA,IAAIC,qBAAqB,GAAG,mBAA5B;AACA,IAAIC,cAAc,GAAG,CAArB;AACA,IAAIC,gBAAgB,GAAGvB,MAAM,CAACwB,OAAP,CAAe;AAClCC,EAAAA,cAAc,EAAE,0BAAW;AACvB,WAAO/B,MAAM,CAAC,KAAKgC,QAAL,EAAD,EAAkB;AAC3BC,MAAAA,MAAM,EAAEpC,WAAW,CAACqC,IADO;AAE3BC,MAAAA,QAAQ,EAAEtC,WAAW,CAACqC;AAFK,KAAlB,CAAb;AAIH,GANiC;AAOlCE,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,WAAOpC,MAAM,CAAC,KAAKgC,QAAL,EAAD,EAAkB;AAC3BK,MAAAA,SAAS,EAAE,MADgB;AAE3BC,MAAAA,OAAO,EAAE,IAFkB;AAG3BC,MAAAA,iBAAiB,EAAE,IAHQ;AAI3BC,MAAAA,kBAAkB,EAAE;AAJO,KAAlB,CAAb;AAMH,GAdiC;AAelCC,EAAAA,OAAO,EAAE,mBAAW;AAChB,SAAKT,QAAL;AACA,QAAIU,IAAI,GAAG,IAAX;AACA,QAAIC,QAAQ,GAAG,KAAKA,QAAL,EAAf;AACA,QAAIC,SAAS,GAAGrC,UAAU,CAACsC,YAAX,CAAwB1C,UAAU,CAAC2C,IAAnC,EAAyC,KAAKC,IAA9C,CAAhB;AACAJ,IAAAA,QAAQ,CAACK,QAAT,CAAkBpC,aAAa,GAAG,cAAhB,GAAiC,KAAKqC,MAAL,CAAY,WAAZ,CAAnD;AACAtD,IAAAA,YAAY,CAACuD,GAAb,CAAiBP,QAAjB,EAA2BC,SAA3B;AACAjD,IAAAA,YAAY,CAACwD,EAAb,CAAgBR,QAAhB,EAA0BC,SAA1B,EAAqC,UAASQ,CAAT,EAAY;AAC7CV,MAAAA,IAAI,CAACW,qBAAL,CAA2B,SAA3B,EAAsC;AAClCC,QAAAA,KAAK,EAAEF;AAD2B,OAAtC;AAGH,KAJD;AAKH,GA3BiC;AA4BlCG,EAAAA,cAAc,EAAE,wBAASC,IAAT,EAAe;AAC3B,YAAQA,IAAI,CAACV,IAAb;AACI,WAAK,SAAL;AACA,WAAK,WAAL;AACI,aAAKW,WAAL;;AACA;;AACJ;AACI,aAAKzB,QAAL,CAAcwB,IAAd;AANR;AAQH;AArCiC,CAAf,CAAvB;AAuCA,IAAIE,OAAO,GAAGlD,gBAAgB,CAACsB,OAAjB,CAAyB;AACnC6B,EAAAA,gBAAgB,EAAEvC,qBADiB;AAEnCgB,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,WAAOpC,MAAM,CAAC,KAAKgC,QAAL,EAAD,EAAkB;AAC3BQ,MAAAA,kBAAkB,EAAE,KADO;AAE3BoB,MAAAA,iBAAiB,EAAE,GAFQ;AAG3BC,MAAAA,gBAAgB,EAAE,IAHS;AAI3BC,MAAAA,IAAI,EAAE,KAJqB;AAK3BC,MAAAA,YAAY,EAAE,IALa;AAM3BC,MAAAA,gBAAgB,EAAE,IANS;AAO3BC,MAAAA,aAAa,EAAE,IAPY;AAQ3BC,MAAAA,aAAa,EAAE,CARY;AAS3BC,MAAAA,cAAc,EAAE,CATW;AAU3BC,MAAAA,cAAc,EAAE,KAVW;AAW3BC,MAAAA,UAAU,EAAE,KAXe;AAY3BC,MAAAA,gBAAgB,EAAE,KAAK,CAZI;AAa3BC,MAAAA,aAAa,EAAE,KAbY;AAc3BC,MAAAA,eAAe,EAAE;AACbC,QAAAA,IAAI,EAAE;AADO,OAdU;AAiB3BC,MAAAA,aAAa,EAAE,KAjBY;AAkB3BC,MAAAA,aAAa,EAAE,IAlBY;AAmB3BC,MAAAA,aAAa,EAAE,QAnBY;AAoB3BC,MAAAA,iBAAiB,EAAE,IApBQ;AAqB3BC,MAAAA,gBAAgB,EAAE;AArBS,KAAlB,CAAb;AAuBH,GA1BkC;AA2BnCC,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,WAAO,KAAK/C,QAAL,GAAgBgD,MAAhB,CAAuB,CAAC;AAC3BC,MAAAA,MAAM,EAAE,kBAAW;AACf,eAAO,cAAc5E,OAAO,CAAC6E,IAAR,GAAeC,UAA7B,IAA2C,CAAC9E,OAAO,CAAC+E,WAAR,EAAnD;AACH,OAH0B;AAI3BC,MAAAA,OAAO,EAAE;AACLC,QAAAA,iBAAiB,EAAE;AADd;AAJkB,KAAD,CAAvB,CAAP;AAQH,GApCkC;AAqCnCC,EAAAA,KAAK,EAAE,iBAAW;AACd,SAAKvD,QAAL;AACA,SAAKiB,MAAL,CAAY,eAAZ,EAA6B,KAAKA,MAAL,CAAY,MAAZ,CAA7B;AACH,GAxCkC;AAyCnCuC,EAAAA,cAAc,EAAE,0BAAW;AACvB,SAAKxD,QAAL;AACA,SAAKyD,iBAAL,CAAuBC,IAAvB,GAA8B,IAAIhF,gBAAJ,CAAqB,UAASiF,UAAT,EAAqBC,IAArB,EAA2B;AAC1E,UAAIC,IAAI,GAAGpG,CAAC,CAAC,OAAD,CAAD,CAAWuD,QAAX,CAAoBtB,mBAApB,CAAX;;AACA,UAAI5B,SAAS,CAACgG,aAAV,CAAwBF,IAAxB,CAAJ,EAAmC;AAC/B,aAAKG,2BAAL,CAAiCH,IAAjC,EAAuCD,UAAvC;;AACAE,QAAAA,IAAI,CAACG,IAAL,CAAU;AACNC,UAAAA,GAAG,EAAEL,IAAI,CAACM,QADJ;AAENC,UAAAA,GAAG,EAAEP,IAAI,CAACQ;AAFJ,SAAV,EAGGC,QAHH,CAGYV,UAHZ;AAIH,OAND,MAMO;AACHE,QAAAA,IAAI,CAACG,IAAL,CAAU,KAAV,EAAiBM,MAAM,CAACV,IAAD,CAAvB,EAA+BS,QAA/B,CAAwCV,UAAxC;AACH;AACJ,KAXkD,CAWjDY,IAXiD,CAW5C,IAX4C,CAArB,EAWhB,CAAC,UAAD,EAAa,UAAb,EAAyB,MAAzB,EAAiC,MAAjC,CAXgB,EAW0B,KAAKtD,MAAL,CAAY,gCAAZ,CAX1B,CAA9B;AAYH,GAvDkC;AAwDnCuD,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,WAAO;AACHC,MAAAA,QAAQ,EAAE;AADP,KAAP;AAGH,GA5DkC;AA6DnCC,EAAAA,cAAc,EAAE,0BAAW;AACvB,WAAO,KAAKC,WAAZ;AACH,GA/DkC;AAgEnCC,EAAAA,UAAU,EAAE,sBAAW;AACnB,WAAO3F,kBAAP;AACH,GAlEkC;AAmEnC4F,EAAAA,YAAY,EAAE,wBAAW;AACrB,WAAOlF,qBAAP;AACH,GArEkC;AAsEnCmF,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,QAAIC,YAAY,GAAG,KAAK9D,MAAL,CAAY,YAAZ,CAAnB;;AACA,QAAI,KAAKA,MAAL,CAAY,eAAZ,CAAJ,EAAkC;AAC9B,UAAI+D,WAAW,GAAGD,YAAY,GAAG,KAAKE,aAAL,KAAuB,CAA1B,GAA8B,KAAKA,aAAL,EAA5D;AACA,aAAO,IAAID,WAAX;AACH;;AACD,QAAID,YAAJ,EAAkB;AACd,aAAO,KAAKG,iBAAL,KAA2B,KAAKD,aAAL,EAA3B,IAAmD,KAAKA,aAAL,KAAuB,CAA1E,CAAP;AACH;;AACD,WAAO,KAAKC,iBAAL,EAAP;AACH,GAhFkC;AAiFnCA,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAIC,YAAJ;AACA,QAAIC,YAAY,GAAG,KAAKzE,QAAL,GAAgB0E,UAAhB,EAAnB;AACA,QAAI/C,gBAAgB,GAAG,KAAKrB,MAAL,CAAY,kBAAZ,CAAvB;;AACA,QAAIqB,gBAAgB,IAAIA,gBAAgB,IAAI8C,YAA5C,EAA0D;AACtDD,MAAAA,YAAY,GAAG7C,gBAAgB,GAAG8C,YAAlC;AACH,KAFD,MAEO;AACHD,MAAAA,YAAY,GAAG,CAAf;AACH;;AACD,WAAOA,YAAP;AACH,GA3FkC;AA4FnCF,EAAAA,aAAa,EAAE,yBAAW;AACtB,QAAIK,YAAY,GAAGvH,WAAW,CAACwH,SAAZ,KAA0BC,IAAI,CAACC,KAAL,CAAW,IAAI,KAAKP,iBAAL,EAAf,CAA1B,GAAqE,CAAxF;AACA,WAAOM,IAAI,CAACE,GAAL,CAASJ,YAAT,EAAuB,KAAKK,WAAL,EAAvB,CAAP;AACH,GA/FkC;AAgGnCC,EAAAA,WAAW,EAAE,uBAAW;AACpB,WAAOJ,IAAI,CAACK,IAAL,CAAU,KAAKF,WAAL,KAAqB,KAAKV,aAAL,EAA/B,CAAP;AACH,GAlGkC;AAmGnCU,EAAAA,WAAW,EAAE,uBAAW;AACpB,WAAO,CAAC,KAAK1E,MAAL,CAAY,OAAZ,KAAwB,EAAzB,EAA6B6E,MAApC;AACH,GArGkC;AAsGnCC,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,WAAO,KAAK9E,MAAL,CAAY,YAAZ,IAA4B,CAAC,CAA7B,GAAiC,CAAxC;AACH,GAxGkC;AAyGnC+E,EAAAA,WAAW,EAAE,uBAAW;AACpB,SAAKC,cAAL;;AACA,SAAKC,qBAAL;;AACA,SAAKvF,QAAL,GAAgBK,QAAhB,CAAyBpC,aAAzB;AACA,SAAK+B,QAAL,GAAgBwF,WAAhB,CAA4BrH,kBAA5B,EAAgD,KAAKmC,MAAL,CAAY,MAAZ,CAAhD;AACA,SAAKjB,QAAL;AACA,SAAKoG,OAAL,CAAa;AACT3D,MAAAA,IAAI,EAAE,SADG;AAET4D,MAAAA,KAAK,EAAE;AAFE,KAAb;AAIH,GAnHkC;AAoHnC5F,EAAAA,OAAO,EAAE,mBAAW;AAChB,SAAK6F,kBAAL;;AACA,SAAKC,wBAAL;;AACA,SAAKC,gBAAL;;AACA,SAAKC,oBAAL;;AACA,SAAKC,iBAAL;;AACA,SAAKC,gBAAL;;AACA,SAAKC,mBAAL;;AACA,SAAKC,qBAAL;;AACA,SAAKC,sBAAL;;AACA,SAAKC,eAAL;;AACA,SAAKC,iBAAL;;AACA,SAAKhH,QAAL;AACH,GAjIkC;AAkInCiH,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAI/E,aAAa,GAAG,KAAKjB,MAAL,CAAY,eAAZ,KAAgC,CAApD;;AACA,SAAKiG,mBAAL;;AACA,SAAKC,gBAAL;;AACA,SAAKC,oBAAL;;AACA,SAAKZ,gBAAL;;AACA,SAAKC,oBAAL;;AACA,SAAKE,gBAAL;;AACA,SAAKJ,wBAAL,CAA8B,KAAKc,qBAAL,CAA2BnF,aAA3B,CAA9B,EAAyE,IAAzE;;AACA,SAAK2E,qBAAL;AACH,GA5IkC;AA6InCP,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,QAAI1F,SAAS,GAAGrC,UAAU,CAACsC,YAAX,CAAwB,WAAxB,EAAqC,KAAKE,IAA1C,CAAhB;AACApD,IAAAA,YAAY,CAACuD,GAAb,CAAiB,KAAKP,QAAL,EAAjB,EAAkCC,SAAlC;AACAjD,IAAAA,YAAY,CAACwD,EAAb,CAAgB,KAAKR,QAAL,EAAhB,EAAiCC,SAAjC,EAA4C,KAA5C,EAAmD,YAAW;AAC1D,aAAO,KAAP;AACH,KAFD;AAGH,GAnJkC;AAoJnCqF,EAAAA,cAAc,EAAE,0BAAW;AACvB,QAAI,KAAKqB,SAAT,EAAoB;AAChB;AACH;;AACD,SAAKA,SAAL,GAAiB7J,CAAC,CAAC,OAAD,CAAD,CAAWuD,QAAX,CAAoBnC,qBAApB,EAA2CwF,QAA3C,CAAoD,KAAK1D,QAAL,EAApD,CAAjB;AACH,GAzJkC;AA0JnC4G,EAAAA,YAAY,EAAE,sBAASC,KAAT,EAAgB;AAC1B,QAAI,CAACzJ,WAAW,CAACwH,SAAZ,EAAL,EAA8B;AAC1B,UAAIrD,aAAa,GAAG,KAAKjB,MAAL,CAAY,eAAZ,CAApB;AACAuG,MAAAA,KAAK,GAAGA,KAAK,CAAC1B,MAAN,GAAe5D,aAAf,GAA+BsF,KAAK,CAACC,KAAN,CAAYvF,aAAZ,EAA2BA,aAAa,GAAG,CAA3C,CAA/B,GAA+EsF,KAAK,CAACC,KAAN,CAAY,CAAZ,EAAe,CAAf,CAAvF;AACH;;AACD,SAAKzH,QAAL,CAAcwH,KAAd;;AACA,SAAKE,qBAAL;AACH,GAjKkC;AAkKnCxB,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,QAAI,KAAKvB,WAAT,EAAsB;AAClB;AACH;;AACD,SAAKA,WAAL,GAAmBlH,CAAC,CAAC,OAAD,CAAD,CAAWuD,QAAX,CAAoBjC,4BAApB,EAAkDsF,QAAlD,CAA2D,KAAKiD,SAAhE,CAAnB;AACH,GAvKkC;AAwKnCF,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,QAAI,CAAC,KAAKnG,MAAL,CAAY,MAAZ,CAAL,EAA0B;AACtB;AACH;;AACD,QAAIuG,KAAK,GAAG,KAAKvG,MAAL,CAAY,OAAZ,KAAwB,EAApC;AACA,QAAI0G,UAAU,GAAGH,KAAK,CAAC1B,MAAvB;AACA,QAAI8B,aAAa,GAAGD,UAAU,GAAG,CAAjC;AACA,QAAIE,CAAJ;;AACA,QAAI,CAACF,UAAL,EAAiB;AACb;AACH;;AACD,SAAKG,eAAL,GAAuBC,MAAvB;;AACA,QAAIC,cAAc,GAAGxC,IAAI,CAACE,GAAL,CAAS,KAAKT,aAAL,EAAT,EAA+B0C,UAA/B,CAArB;;AACA,QAAIM,MAAM,GAAG,KAAKC,aAAL,EAAb;;AACA,QAAIvE,UAAU,GAAG,KAAKe,cAAL,EAAjB;;AACA,SAAKmD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGG,cAAhB,EAAgCH,CAAC,EAAjC,EAAqC;AACjC,WAAKM,sBAAL,CAA4BF,MAAM,CAACJ,CAAD,CAAlC,EAAuClE,UAAvC;AACH;;AACD,SAAKkE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGG,cAAhB,EAAgCH,CAAC,EAAjC,EAAqC;AACjC,WAAKM,sBAAL,CAA4BF,MAAM,CAACL,aAAa,GAAGC,CAAjB,CAAlC,EAAuDlE,UAAvD;AACH;AACJ,GA7LkC;AA8LnCwE,EAAAA,sBAAsB,EAAE,gCAASzE,IAAT,EAAeC,UAAf,EAA2B;AAC/C,QAAID,IAAJ,EAAU;AACNjG,MAAAA,CAAC,CAACiG,IAAD,CAAD,CAAQ0E,KAAR,CAAc,IAAd,EAAoBpH,QAApB,CAA6B7B,uBAA7B,EAAsDkJ,GAAtD,CAA0D,QAA1D,EAAoE,CAApE,EAAuEhE,QAAvE,CAAgFV,UAAhF;AACH;AACJ,GAlMkC;AAmMnCuE,EAAAA,aAAa,EAAE,yBAAW;AACtB,QAAII,QAAQ,GAAG,MAAMrJ,kBAAN,GAA2B,QAA3B,GAAsCE,uBAAtC,GAAgE,GAA/E;AACA,WAAO,KAAKwB,QAAL,GAAgB4H,IAAhB,CAAqBD,QAArB,CAAP;AACH,GAtMkC;AAuMnCR,EAAAA,eAAe,EAAE,2BAAW;AACxB,WAAO,KAAKnH,QAAL,GAAgB4H,IAAhB,CAAqB,MAAMpJ,uBAA3B,CAAP;AACH,GAzMkC;AA0MnCqJ,EAAAA,sBAAsB,EAAE,kCAAW;AAC/B,WAAO,KAAKlB,SAAZ;AACH,GA5MkC;AA6MnCd,EAAAA,gBAAgB,EAAE,0BAASiC,UAAT,EAAqB;AACnC,QAAIR,MAAM,GAAG,KAAKS,aAAL,EAAb;;AACA,QAAIC,SAAS,GAAG,KAAK7D,gBAAL,EAAhB;;AACA,QAAI,KAAK,CAAL,KAAW2D,UAAf,EAA2B;AACvBR,MAAAA,MAAM,GAAGA,MAAM,CAACR,KAAP,CAAagB,UAAb,CAAT;AACH;;AACDR,IAAAA,MAAM,CAACW,IAAP,CAAY,UAASC,KAAT,EAAgB;AACxBpL,MAAAA,CAAC,CAACwK,MAAM,CAACY,KAAD,CAAP,CAAD,CAAiBxD,UAAjB,CAA4B,MAAMsD,SAAN,GAAkB,GAA9C;AACH,KAFD;AAGH,GAtNkC;AAuNnClC,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,QAAIkC,SAAS,GAAG,KAAK7D,gBAAL,EAAhB;;AACA,QAAI6C,UAAU,GAAG,KAAKhC,WAAL,EAAjB;;AACA,QAAIL,YAAY,GAAG,KAAKL,aAAL,EAAnB;;AACA,QAAI6D,cAAc,GAAG,KAAKnI,QAAL,GAAgB4H,IAAhB,CAAqB,MAAMpJ,uBAA3B,EAAoD2G,MAAzE;AACA,QAAIiD,sBAAsB,GAAGpB,UAAU,GAAGmB,cAAb,GAA8B,CAA3D;AACA,QAAIE,WAAW,GAAG,KAAK/H,MAAL,CAAY,YAAZ,IAA4B,EAA5B,GAAiC,CAAnD;;AACA,QAAIgI,SAAS,GAAG,KAAKC,cAAL,EAAhB;;AACA,QAAIC,kBAAkB,GAAG,CAAC,CAACF,SAA3B;AACA,QAAIG,UAAU,GAAG,KAAKnI,MAAL,CAAY,YAAZ,CAAjB;AACA,QAAIiB,aAAa,GAAG,KAAKjB,MAAL,CAAY,eAAZ,CAApB;AACA,QAAIoI,IAAI,GAAGD,UAAU,GAAG,OAAH,GAAa,MAAlC;;AACA,SAAKV,aAAL,GAAqBE,IAArB,CAA0B,UAASC,KAAT,EAAgB;AACtC,UAAIS,SAAS,GAAGT,KAAhB;AACA,UAAIU,UAAU,GAAG9L,CAAC,CAAC,IAAD,CAAD,CAAQ+L,QAAR,CAAiBrK,uBAAjB,CAAjB;;AACA,UAAI0J,KAAK,GAAGlB,UAAU,GAAGrC,YAAb,GAA4B,CAAxC,EAA2C;AACvCgE,QAAAA,SAAS,GAAGP,sBAAsB,GAAGO,SAAzB,GAAqChE,YAAjD;AACH;;AACD,UAAI,CAACiE,UAAD,IAAe,MAAMD,SAAzB,EAAoC;AAChC,YAAIH,kBAAJ,EAAwB;AACpB1L,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ4K,GAAR,CAAY,WAAWgB,IAAvB,EAA6B,MAAMJ,SAAN,GAAkB,GAA/C;AACH;;AACD;AACH;;AACD,UAAIQ,YAAY,GAAGd,SAAS,IAAIW,SAAS,GAAGN,WAAhB,CAAT,GAAwCC,SAAS,IAAIK,SAAS,GAAG,CAAZ,GAAgBN,WAApB,CAApE;AACA,UAAIU,QAAQ,GAAGH,UAAU,GAAGF,IAAI,CAACM,WAAL,EAAH,GAAwB,WAAWN,IAA5D;AACA5L,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ4K,GAAR,CAAYqB,QAAZ,EAAsB,MAAMD,YAAN,GAAqB,GAA3C;AACH,KAfD;;AAgBA,SAAKG,cAAL,CAAoB1H,aAApB,EAAmCA,aAAnC,EAAkD,IAAlD;AACH,GApPkC;AAqPnCgH,EAAAA,cAAc,EAAE,0BAAW;AACvB,QAAI5D,YAAY,GAAG,KAAKL,aAAL,EAAnB;;AACA,QAAI,KAAKhE,MAAL,CAAY,YAAZ,CAAJ,EAA+B;AAC3BqE,MAAAA,YAAY,IAAI,CAAhB;AACH;;AACD,WAAO,CAAC,IAAI,KAAKR,gBAAL,KAA0BQ,YAA/B,KAAgDA,YAAY,GAAG,CAA/D,CAAP;AACH,GA3PkC;AA4PnCiB,EAAAA,wBAAwB,EAAE,kCAASsD,MAAT,EAAiBC,SAAjB,EAA4BC,OAA5B,EAAqC;AAC3D,SAAKC,sBAAL;;AACAH,IAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;AACA,QAAInJ,IAAI,GAAG,IAAX;;AACA,QAAIiI,SAAS,GAAG,KAAK7D,gBAAL,EAAhB;;AACA,QAAImF,WAAW,GAAGJ,MAAlB;;AACA,QAAIK,cAAc,GAAG,KAAKnE,gBAAL,KAA0BkE,WAA1B,IAAyCtB,SAAS,GAAG,KAAKO,cAAL,EAArD,CAArB;;AACA,QAAIiB,aAAJ;;AACA,QAAIrM,SAAS,CAACsM,SAAV,CAAoB,KAAKC,kBAAzB,CAAJ,EAAkD;AAC9CN,MAAAA,OAAO,GAAG,KAAKM,kBAAf;AACA,aAAO,KAAKA,kBAAZ;AACH;;AACD,QAAIN,OAAJ,EAAa;AACTrJ,MAAAA,IAAI,CAAC4J,WAAL;;AACAH,MAAAA,aAAa,GAAGzJ,IAAI,CAAC6J,QAAL,CAAcL,cAAd,EAA8BM,IAA9B,CAAmC9J,IAAI,CAAC+J,SAAL,CAAelG,IAAf,CAAoB7D,IAApB,CAAnC,CAAhB;AACH,KAHD,MAGO;AACHtC,MAAAA,UAAU,CAACsM,IAAX,CAAgB,KAAK/F,WAArB,EAAkC;AAC9BgG,QAAAA,IAAI,EAAET,cAAc,GAAG,KAAKU,aAAL,EADO;AAE9BC,QAAAA,GAAG,EAAE;AAFyB,OAAlC;AAIAV,MAAAA,aAAa,GAAI,IAAIxL,QAAJ,EAAD,CAAemM,WAAf,CAA2BpK,IAA3B,CAAhB;AACH;;AACDyJ,IAAAA,aAAa,CAACK,IAAd,CAAmB,YAAW;AAC1B,WAAKO,gBAAL,IAAyBrK,IAAI,CAACqK,gBAAL,CAAsBD,WAAtB,CAAkCpK,IAAlC,CAAzB;AACAoJ,MAAAA,SAAS,IAAI,KAAKjD,qBAAL,EAAb;AACH,KAHD;AAIA,WAAOsD,aAAa,CAACa,OAAd,EAAP;AACH,GAvRkC;AAwRnCV,EAAAA,WAAW,EAAE,uBAAW;AACpB,SAAK3J,QAAL,GAAgBK,QAAhB,CAAyBhC,oBAAzB;AACH,GA1RkC;AA2RnCyL,EAAAA,SAAS,EAAE,qBAAW;AAClB,SAAK9J,QAAL,GAAgBsK,WAAhB,CAA4BjM,oBAA5B;AACH,GA7RkC;AA8RnCuL,EAAAA,QAAQ,EAAE,kBAASL,cAAT,EAAyBgB,WAAzB,EAAsC;AAC5C,QAAIxK,IAAI,GAAG,IAAX;AACA,QAAIiD,UAAU,GAAG,KAAKgB,WAAtB;AACA,QAAIwG,iBAAiB,GAAG,IAAIxM,QAAJ,EAAxB;AACAT,IAAAA,EAAE,CAAC6L,OAAH,CAAW,KAAKpF,WAAhB,EAA6B3G,MAAM,CAAC;AAChCoN,MAAAA,IAAI,EAAE,OAD0B;AAEhCC,MAAAA,EAAE,EAAE;AACAV,QAAAA,IAAI,EAAET,cAAc,GAAG,KAAKU,aAAL;AADvB,OAF4B;AAKhCU,MAAAA,QAAQ,EAAE5K,IAAI,CAACO,MAAL,CAAY,mBAAZ,CALsB;AAMhCsK,MAAAA,QAAQ,EAAE,oBAAW;AACjB,YAAI7K,IAAI,CAAC8K,yBAAL,EAAJ,EAAsC;AAClCpN,UAAAA,UAAU,CAACsM,IAAX,CAAgB/G,UAAhB,EAA4B;AACxBgH,YAAAA,IAAI,EAAE,CADkB;AAExBE,YAAAA,GAAG,EAAE;AAFmB,WAA5B;AAIH;;AACD,YAAInK,IAAI,CAAC+K,sBAAL,EAAJ,EAAmC;AAC/BrN,UAAAA,UAAU,CAACsM,IAAX,CAAgB/G,UAAhB,EAA4B;AACxBgH,YAAAA,IAAI,EAAEjK,IAAI,CAACgL,mBAAL,KAA6BhL,IAAI,CAACkK,aAAL,EADX;AAExBC,YAAAA,GAAG,EAAE;AAFmB,WAA5B;AAIH;;AACDM,QAAAA,iBAAiB,CAACL,WAAlB,CAA8BpK,IAA9B;AACH;AApB+B,KAAD,EAqBhCwK,WAAW,IAAI,EArBiB,CAAnC;AAsBA,WAAOC,iBAAP;AACH,GAzTkC;AA0TnCK,EAAAA,yBAAyB,EAAE,qCAAW;AAClC,QAAIG,gBAAgB,GAAG,KAAKhH,WAAL,CAAiBiH,QAAjB,GAA4BjB,IAA5B,GAAmC,KAAK5E,gBAAL,EAA1D;;AACA,QAAI8F,cAAc,GAAG,CAAC,KAAKC,aAAL,EAAD,GAAwB,KAAKlB,aAAL,EAAxB,GAA+C,KAAKjF,WAAL,EAApE;;AACA,WAAOgG,gBAAgB,IAAIE,cAAc,GAAGjM,cAA5C;AACH,GA9TkC;AA+TnC6L,EAAAA,sBAAsB,EAAE,kCAAW;AAC/B,QAAIE,gBAAgB,GAAG,KAAKhH,WAAL,CAAiBiH,QAAjB,GAA4BjB,IAA5B,GAAmC,KAAK5E,gBAAL,EAA1D;;AACA,QAAI8F,cAAc,GAAG,KAAK/G,gBAAL,KAA0B,KAAK8F,aAAL,EAA/C;;AACA,WAAOe,gBAAgB,IAAIE,cAAc,GAAGjM,cAA5C;AACH,GAnUkC;AAoUnC8L,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,WAAO,CAAC,KAAKI,aAAL,EAAD,IAAyB,KAAKnG,WAAL,KAAqB,KAAKV,aAAL,EAA9C,IAAsE,KAAKc,gBAAL,EAA7E;AACH,GAtUkC;AAuUnC+F,EAAAA,aAAa,EAAE,yBAAW;AACtB,WAAO,KAAKhH,gBAAL,KAA0B,KAAKoE,cAAL,EAAjC;AACH,GAzUkC;AA0UnClC,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAItG,IAAI,GAAG,IAAX;;AACA,QAAIqL,UAAU,GAAGrL,IAAI,CAACgI,aAAL,GAAqBsD,KAArB,GAA6BzD,IAA7B,CAAkC,kBAAlC,CAAjB;;AACA,QAAI,CAACwD,UAAD,IAAeA,UAAU,CAACE,EAAX,CAAc,SAAd,CAAnB,EAA6C;AACzC;AACH;;AACD,QAAI,CAACvL,IAAI,CAACO,MAAL,CAAY,QAAZ,CAAL,EAA4B;AACxBP,MAAAA,IAAI,CAACO,MAAL,CAAY,QAAZ,EAAsB8K,UAAU,CAACG,WAAX,EAAtB;AACH;;AACD,QAAI,CAACxL,IAAI,CAACO,MAAL,CAAY,OAAZ,CAAL,EAA2B;AACvBP,MAAAA,IAAI,CAACO,MAAL,CAAY,OAAZ,EAAqB8K,UAAU,CAAC1G,UAAX,EAArB;AACH;;AACD,SAAK4B,iBAAL;AACH,GAvVkC;AAwVnCN,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,SAAKwF,gBAAL;;AACA,QAAI,CAAC,KAAKlL,MAAL,CAAY,eAAZ,CAAL,EAAmC;AAC/B;AACH;;AACD,QAAImL,SAAS,GAAG,KAAKC,WAAL,GAAmB5O,CAAC,CAAC,OAAD,CAAD,CAAWuD,QAAX,CAAoB1B,uBAApB,EAA6C+E,QAA7C,CAAsD,KAAKiD,SAA3D,CAAnC;;AACA,SAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKjC,WAAL,EAApB,EAAwCiC,CAAC,EAAzC,EAA6C;AACzCpK,MAAAA,CAAC,CAAC,OAAD,CAAD,CAAWuD,QAAX,CAAoBzB,4BAApB,EAAkD8E,QAAlD,CAA2D+H,SAA3D;AACH;;AACD,SAAKE,4BAAL;AACH,GAlWkC;AAmWnCH,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,QAAI,KAAKE,WAAT,EAAsB;AAClB,WAAKA,WAAL,CAAiBtE,MAAjB;AACH;AACJ,GAvWkC;AAwWnCnB,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,QAAI1E,aAAa,GAAG,KAAKjB,MAAL,CAAY,eAAZ,CAApB;;AACA,SAAKyH,aAAL,GAAqBuC,WAArB,CAAiC5L,2BAAjC,EAA8DkN,EAA9D,CAAiErK,aAAjE,EAAgFlB,QAAhF,CAAyF3B,2BAAzF;AACH,GA3WkC;AA4WnCwH,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,QAAI,KAAK5F,MAAL,CAAY,kBAAZ,KAAmC,KAAKA,MAAL,CAAY,YAAZ,CAAvC,EAAkE;AAC9D,WAAK+I,sBAAL;;AACA;AACH;;AACD,SAAKtB,aAAL,GAAqBE,IAArB,CAA0B,UAASC,KAAT,EAAgBnF,IAAhB,EAAsB;AAC5C,UAAI,KAAKzC,MAAL,CAAY,eAAZ,MAAiC4H,KAArC,EAA4C;AACxCpL,QAAAA,CAAC,CAACiG,IAAD,CAAD,CAAQuH,WAAR,CAAoB/L,4BAApB;AACH,OAFD,MAEO;AACHzB,QAAAA,CAAC,CAACiG,IAAD,CAAD,CAAQ1C,QAAR,CAAiB9B,4BAAjB;AACH;AACJ,KANyB,CAMxBqF,IANwB,CAMnB,IANmB,CAA1B;;AAOA,SAAKuD,eAAL,GAAuB9G,QAAvB,CAAgC9B,4BAAhC;AACH,GAzXkC;AA0XnC8K,EAAAA,sBAAsB,EAAE,kCAAW;AAC/B,SAAKtB,aAAL,GAAqBuC,WAArB,CAAiC/L,4BAAjC;;AACA,SAAK4I,eAAL,GAAuBmD,WAAvB,CAAmC/L,4BAAnC;AACH,GA7XkC;AA8XnCoN,EAAAA,4BAA4B,EAAE,wCAAW;AACrC,QAAI,CAAC,KAAKD,WAAV,EAAuB;AACnB;AACH;;AACD,QAAIG,SAAS,GAAG,KAAKvL,MAAL,CAAY,eAAZ,CAAhB;AACA,QAAIwL,SAAS,GAAG,KAAK7G,WAAL,KAAqB,CAArC;AACA,QAAI8G,SAAS,GAAGlH,IAAI,CAACK,IAAL,CAAU2G,SAAS,GAAG,KAAKvH,aAAL,EAAtB,CAAhB;AACAyH,IAAAA,SAAS,GAAGlH,IAAI,CAACE,GAAL,CAAS+G,SAAT,EAAoBC,SAApB,CAAZ;;AACA,SAAKL,WAAL,CAAiB9D,IAAjB,CAAsB/I,+BAAtB,EAAuDyL,WAAvD,CAAmExL,qCAAnE,EAA0G8M,EAA1G,CAA6GG,SAA7G,EAAwH1L,QAAxH,CAAiIvB,qCAAjI;AACH,GAvYkC;AAwYnCqH,EAAAA,sBAAsB,EAAE,kCAAW;AAC/B,QAAI6F,WAAW,GAAG,KAAKhM,QAAL,EAAlB;AACA,QAAIoB,YAAY,GAAG,KAAKd,MAAL,CAAY,cAAZ,KAA+B,KAAK0E,WAAL,KAAqB,CAAvE;;AACA,SAAKiH,gBAAL,CAAsBD,WAAtB,EAAmClO,SAAnC,EAA8C;AAC1CoO,MAAAA,QAAQ,EAAE,KAAK5L,MAAL,CAAY,UAAZ,KAA2B,CAACc,YADI;AAE1C+K,MAAAA,OAAO,EAAE,KAAKC,kBAAL,CAAwBxI,IAAxB,CAA6B,IAA7B,CAFiC;AAG1CyI,MAAAA,SAAS,EAAE,KAAKC,mBAAL,CAAyB1I,IAAzB,CAA8B,IAA9B,CAH+B;AAI1C2I,MAAAA,KAAK,EAAE,KAAKC,gBAAL,CAAsB5I,IAAtB,CAA2B,IAA3B,CAJmC;AAK1C6I,MAAAA,YAAY,EAAE,KAAKxC,aAAL,CAAmBrG,IAAnB,CAAwB,IAAxB;AAL4B,KAA9C;;AAOA,QAAI8I,qBAAqB,GAAG,KAAKC,aAAL,CAAmB,KAAKC,uBAAxB,CAA5B;;AACA5P,IAAAA,YAAY,CAACuD,GAAb,CAAiByL,WAAjB,EAA8BpO,UAAU,CAACsC,YAAX,CAAwB1C,UAAU,CAAC2C,IAAnC,EAAyC,KAAKC,IAA9C,CAA9B,EAAmFvB,+BAAnF;AACA7B,IAAAA,YAAY,CAACwD,EAAb,CAAgBwL,WAAhB,EAA6BpO,UAAU,CAACsC,YAAX,CAAwB1C,UAAU,CAAC2C,IAAnC,EAAyC,KAAKC,IAA9C,CAA7B,EAAkFvB,+BAAlF,EAAmH,UAAS4B,CAAT,EAAY;AAC3HiM,MAAAA,qBAAqB,CAAC;AAClB/L,QAAAA,KAAK,EAAEF;AADW,OAAD,CAArB;AAGH,KAJD;AAKH,GAzZkC;AA0ZnCmM,EAAAA,uBAAuB,EAAE,iCAAS/L,IAAT,EAAe;AACpC,QAAIJ,CAAC,GAAGI,IAAI,CAACF,KAAb;AACA,QAAIkM,QAAQ,GAAGhM,IAAI,CAACiM,SAApB;;AACA,QAAI,CAACD,QAAQ,CAACvM,MAAT,CAAgB,kBAAhB,CAAL,EAA0C;AACtC;AACH;;AACD,QAAIyM,cAAc,GAAGjQ,CAAC,CAAC2D,CAAC,CAACuM,MAAH,CAAD,CAAY9E,KAAZ,EAArB;;AACA,QAAI2D,SAAS,GAAGgB,QAAQ,CAACI,kBAAT,CAA4BF,cAAc,GAAGF,QAAQ,CAACvI,aAAT,EAA7C,CAAhB;;AACAuI,IAAAA,QAAQ,CAACK,aAAT,GAAyB,IAAzB;AACAL,IAAAA,QAAQ,CAACvM,MAAT,CAAgB,eAAhB,EAAiCuL,SAAjC;;AACAgB,IAAAA,QAAQ,CAAC9F,qBAAT,CAA+B8E,SAA/B;AACH,GArakC;AAsanC9F,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAIhG,IAAI,GAAG,IAAX;;AACA,QAAI,CAACA,IAAI,CAACO,MAAL,CAAY,gBAAZ,CAAL,EAAoC;AAChCP,MAAAA,IAAI,CAACoN,gBAAL;;AACA;AACH;;AACDpN,IAAAA,IAAI,CAACqN,cAAL,GAAsBtQ,CAAC,CAAC,OAAD,CAAD,CAAW4G,QAAX,CAAoB,KAAKiD,SAAzB,CAAtB;;AACA5G,IAAAA,IAAI,CAACkM,gBAAL,CAAsBlM,IAAI,CAACqN,cAA3B,EAA2ClO,gBAA3C,EAA6D;AACzDQ,MAAAA,SAAS,EAAE,MAD8C;AAEzDC,MAAAA,OAAO,EAAE,mBAAW;AAChBI,QAAAA,IAAI,CAACsN,SAAL;AACH;AAJwD,KAA7D;;AAMAtN,IAAAA,IAAI,CAACuN,cAAL,GAAsBxQ,CAAC,CAAC,OAAD,CAAD,CAAW4G,QAAX,CAAoB,KAAKiD,SAAzB,CAAtB;;AACA5G,IAAAA,IAAI,CAACkM,gBAAL,CAAsBlM,IAAI,CAACuN,cAA3B,EAA2CpO,gBAA3C,EAA6D;AACzDQ,MAAAA,SAAS,EAAE,MAD8C;AAEzDC,MAAAA,OAAO,EAAE,mBAAW;AAChBI,QAAAA,IAAI,CAACwN,SAAL;AACH;AAJwD,KAA7D;;AAMA,SAAKC,2BAAL;AACH,GA3bkC;AA4bnCH,EAAAA,SAAS,EAAE,qBAAW;AAClB,QAAII,eAAe,GAAG,KAAKnJ,aAAL,EAAtB;;AACA,QAAIoJ,gBAAgB,GAAG,KAAKpN,MAAL,CAAY,eAAZ,IAA+BmN,eAAtD;;AACA,QAAIC,gBAAgB,KAAK,CAACD,eAAtB,IAAyCA,eAAe,KAAK,KAAKzI,WAAL,EAAjE,EAAqF;AACjF,aAAO,KAAKiE,cAAL,CAAoByE,gBAApB,EAAsC,CAAtC,CAAP;AACH,KAFD,MAEO;AACH,aAAO,KAAKC,QAAL,CAAc,KAAKV,kBAAL,CAAwBS,gBAAxB,CAAd,CAAP;AACH;AACJ,GApckC;AAqcnCH,EAAAA,SAAS,EAAE,qBAAW;AAClB,QAAIE,eAAe,GAAG,KAAKnJ,aAAL,EAAtB;;AACA,QAAIoJ,gBAAgB,GAAG,KAAKpN,MAAL,CAAY,eAAZ,IAA+BmN,eAAtD;;AACA,QAAIC,gBAAgB,KAAKD,eAArB,IAAwCA,eAAe,KAAK,KAAKzI,WAAL,EAAhE,EAAoF;AAChF,aAAO,KAAKiE,cAAL,CAAoByE,gBAApB,EAAsC,CAAtC,CAAP;AACH,KAFD,MAEO;AACH,aAAO,KAAKC,QAAL,CAAc,KAAKV,kBAAL,CAAwBS,gBAAxB,CAAd,EAAyD7D,IAAzD,CAA8D,KAAK9C,qBAAnE,CAAP;AACH;AACJ,GA7ckC;AA8cnCA,EAAAA,qBAAqB,EAAE,+BAASxF,aAAT,EAAwB;AAC3CA,IAAAA,aAAa,GAAG,KAAK,CAAL,KAAWA,aAAX,GAA2B,KAAKjB,MAAL,CAAY,eAAZ,CAA3B,GAA0DiB,aAA1E;;AACA,QAAI,KAAKqM,WAAL,IAAoB,KAAKA,WAAL,CAAiB9J,QAAjB,EAApB,IAAmD,KAAK+J,mBAAL,CAAyBtM,aAAzB,CAAnD,IAA8F,CAAC,KAAKuM,oBAAL,EAA/F,IAA8H,CAAC,KAAKC,WAAL,EAAnI,EAAuJ;AACnJ,WAAKC,aAAL,GAAqBnE,IAArB,CAA0B,YAAW;AACjC,aAAK7D,gBAAL;;AACA,aAAKF,oBAAL;;AACA,aAAK0H,2BAAL;;AACA,aAAK3H,gBAAL,CAAsBtE,aAAtB;AACH,OALyB,CAKxBqC,IALwB,CAKnB,IALmB,CAA1B;AAMH;AACJ,GAxdkC;AAydnCiK,EAAAA,mBAAmB,EAAE,6BAAStM,aAAT,EAAwB;AACzC,QAAIkM,eAAe,GAAG,KAAKnJ,aAAL,EAAtB;;AACA,WAAO/C,aAAa,GAAG,IAAIkM,eAApB,GAAsC,KAAKnN,MAAL,CAAY,OAAZ,EAAqB6E,MAAlE;AACH,GA5dkC;AA6dnC8I,EAAAA,wBAAwB,EAAE,oCAAW;AACjC,WAAO,IAAP;AACH,GA/dkC;AAgenChB,EAAAA,kBAAkB,EAAE,4BAASpB,SAAT,EAAoB;AACpC,QAAIlH,YAAY,GAAG,KAAKL,aAAL,EAAnB;;AACA,QAAI4J,cAAc,GAAGrC,SAAS,GAAG,CAAZ,GAAgBlH,YAAY,GAAGkH,SAA/B,GAA2C,KAAK7G,WAAL,KAAqB6G,SAArF;;AACA,QAAIA,SAAS,GAAG,KAAK7G,WAAL,KAAqB,CAArC,EAAwC;AACpC6G,MAAAA,SAAS,GAAG,CAAZ;AACA,WAAKsC,cAAL,GAAsB,IAAtB;AACH,KAHD,MAGO;AACH,UAAID,cAAc,GAAGvJ,YAAjB,IAAiCuJ,cAAc,GAAG,CAAtD,EAAyD;AACrD,YAAIrC,SAAS,GAAG,CAAhB,EAAmB;AACfA,UAAAA,SAAS,IAAIlH,YAAY,GAAGuJ,cAA5B;AACH,SAFD,MAEO;AACHrC,UAAAA,SAAS,IAAIlH,YAAY,GAAGuJ,cAA5B;AACH;AACJ;AACJ;;AACD,WAAOrC,SAAP;AACH,GAhfkC;AAifnCsB,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,QAAI,KAAKC,cAAT,EAAyB;AACrB,WAAKA,cAAL,CAAoBhG,MAApB;;AACA,aAAO,KAAKgG,cAAZ;AACH;;AACD,QAAI,KAAKE,cAAT,EAAyB;AACrB,WAAKA,cAAL,CAAoBlG,MAApB;;AACA,aAAO,KAAKkG,cAAZ;AACH;AACJ,GA1fkC;AA2fnCE,EAAAA,2BAA2B,EAAE,uCAAW;AACpC,QAAI,CAAC,KAAKlN,MAAL,CAAY,gBAAZ,CAAD,IAAkC,CAAC,KAAK8M,cAAxC,IAA0D,CAAC,KAAKE,cAApE,EAAoF;AAChF;AACH;;AACD,QAAI/L,aAAa,GAAG,KAAKjB,MAAL,CAAY,eAAZ,CAApB;AACA,QAAIa,IAAI,GAAG,KAAKb,MAAL,CAAY,MAAZ,CAAX;;AACA,QAAI0G,UAAU,GAAG,KAAKhC,WAAL,EAAjB;;AACA,SAAKoI,cAAL,CAAoBgB,IAApB;;AACA,SAAKd,cAAL,CAAoBc,IAApB;;AACA,QAAI,MAAMpH,UAAV,EAAsB;AAClB,WAAKoG,cAAL,CAAoBiB,IAApB;;AACA,WAAKf,cAAL,CAAoBe,IAApB;AACH;;AACD,QAAIlN,IAAJ,EAAU;AACN;AACH;;AACD,QAAImN,UAAU,GAAG/M,aAAa,KAAKyF,UAAU,GAAG,KAAK1C,aAAL,EAAhD;;AACA,QAAIiK,UAAU,GAAGvH,UAAU,GAAG,CAAb,IAAkB,MAAMzF,aAAzC;;AACA,QAAI,KAAKqM,WAAL,IAAoB,KAAKA,WAAL,CAAiB9J,QAAjB,EAAxB,EAAqD;AACjDwK,MAAAA,UAAU,GAAGA,UAAU,IAAI,KAAKP,WAAL,EAA3B;AACH,KAFD,MAEO;AACHO,MAAAA,UAAU,GAAGA,UAAU,IAAItH,UAAU,GAAG,CAAxC;AACH;;AACD,QAAIuH,UAAJ,EAAgB;AACZ,WAAKnB,cAAL,CAAoBiB,IAApB;AACH;;AACD,QAAIC,UAAJ,EAAgB;AACZ,WAAKhB,cAAL,CAAoBe,IAApB;AACH;AACJ,GAxhBkC;AAyhBnCjI,EAAAA,eAAe,EAAE,2BAAW;AACxB,QAAIrG,IAAI,GAAG,IAAX;AACA,QAAIyB,cAAc,GAAGzB,IAAI,CAACO,MAAL,CAAY,gBAAZ,CAArB;AACAkO,IAAAA,YAAY,CAACzO,IAAI,CAAC0O,eAAN,CAAZ;;AACA,QAAI,CAACjN,cAAL,EAAqB;AACjB;AACH;;AACDzB,IAAAA,IAAI,CAAC0O,eAAL,GAAuBC,UAAU,CAAC,YAAW;AACzC,UAAI3O,IAAI,CAAC4O,gBAAT,EAA2B;AACvB5O,QAAAA,IAAI,CAACqG,eAAL;;AACA;AACH;;AACDrG,MAAAA,IAAI,CAAC6O,QAAL,CAAc,IAAd,EAAoB/E,IAApB,CAAyB9J,IAAI,CAACqG,eAA9B;AACH,KANgC,EAM9B5E,cAN8B,CAAjC;AAOH,GAviBkC;AAwiBnCyI,EAAAA,aAAa,EAAE,yBAAW;AACtB,QAAI,CAAC,KAAK4E,kBAAV,EAA8B;AAC1B,WAAKA,kBAAL,GAA0B,KAAK7O,QAAL,GAAgB8O,KAAhB,EAA1B;AACH;;AACD,WAAO,KAAKD,kBAAZ;AACH,GA7iBkC;AA8iBnCrI,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,WAAO,KAAKqI,kBAAZ;AACH,GAhjBkC;AAijBnCzC,EAAAA,kBAAkB,EAAE,4BAAS3L,CAAT,EAAY;AAC5B,SAAK4I,sBAAL;;AACA,SAAK7C,gBAAL;;AACA,SAAKyD,aAAL;;AACA,QAAIjD,UAAU,GAAG,KAAKhC,WAAL,EAAjB;;AACA,QAAI,CAACgC,UAAL,EAAiB;AACbvG,MAAAA,CAAC,CAACE,KAAF,CAAQoO,MAAR,GAAiB,IAAjB;AACA;AACH;;AACD,SAAKxI,mBAAL;;AACA,SAAKoD,WAAL;;AACA,SAAKgF,gBAAL,GAAwB,IAAxB;;AACA,QAAI,CAAC,KAAKrO,MAAL,CAAY,MAAZ,CAAL,EAA0B;AACtB,UAAIiB,aAAa,GAAG,KAAKjB,MAAL,CAAY,eAAZ,CAApB;;AACA,UAAI0O,WAAW,GAAGhI,UAAU,GAAGzF,aAAb,GAA6B,KAAK+C,aAAL,EAA/C;;AACA,UAAI2K,SAAS,GAAG1N,aAAhB;AACA,UAAIkH,UAAU,GAAG,KAAKnI,MAAL,CAAY,YAAZ,CAAjB;AACAG,MAAAA,CAAC,CAACE,KAAF,CAAQuO,aAAR,GAAwBzG,UAAU,GAAGwG,SAAH,GAAeD,WAAjD;AACAvO,MAAAA,CAAC,CAACE,KAAF,CAAQwO,cAAR,GAAyB1G,UAAU,GAAGuG,WAAH,GAAiBC,SAApD;AACH;AACJ,GArkBkC;AAskBnC1I,EAAAA,mBAAmB,EAAE,+BAAW;AAC5BhJ,IAAAA,EAAE,CAAC6R,IAAH,CAAQ,KAAKpL,WAAb,EAA0B,IAA1B;AACH,GAxkBkC;AAykBnCsI,EAAAA,mBAAmB,EAAE,6BAAS7L,CAAT,EAAY;AAC7B,QAAI4O,eAAe,GAAG,KAAK/O,MAAL,CAAY,YAAZ,IAA4B,CAA5B,GAAgC,CAAtD;AACA,QAAI4I,MAAM,GAAG,KAAK9D,gBAAL,KAA0B3E,CAAC,CAACE,KAAF,CAAQuI,MAAlC,IAA4C,KAAK5E,aAAL,KAAuB+K,eAAnE,IAAsF,KAAK/O,MAAL,CAAY,eAAZ,CAAnG;;AACA,QAAI4I,MAAM,GAAG,CAAb,EAAgB;AACZ,WAAKnC,qBAAL,CAA2BlC,IAAI,CAACK,IAAL,CAAUL,IAAI,CAACyK,GAAL,CAASpG,MAAT,CAAV,CAA3B;AACH;;AACD,SAAKtD,wBAAL,CAA8BsD,MAA9B;AACH,GAhlBkC;AAilBnCsD,EAAAA,gBAAgB,EAAE,0BAAS/L,CAAT,EAAY;AAC1B,QAAI8O,YAAY,GAAG9O,CAAC,CAACE,KAAF,CAAQ4O,YAAR,GAAuB,KAAKnK,gBAAL,EAAvB,GAAiD,KAAKd,aAAL,EAApE;;AACA,QAAI/C,aAAa,GAAG,KAAKjB,MAAL,CAAY,eAAZ,CAApB;;AACA,QAAIkP,QAAQ,GAAG,KAAKC,SAAL,CAAelO,aAAa,GAAGgO,YAA/B,CAAf;;AACA,QAAIG,cAAc,GAAG,KAAKzC,kBAAL,CAAwBuC,QAAxB,CAArB;;AACA,QAAI3K,IAAI,CAACyK,GAAL,CAASC,YAAT,IAAyB,KAAKjL,aAAL,EAA7B,EAAmD;AAC/C,WAAK2E,cAAL,CAAoB1H,aAApB;;AACA;AACH;;AACD,QAAI,KAAK+C,aAAL,OAAyB,KAAKU,WAAL,EAA7B,EAAiD;AAC7C,UAAIuK,YAAY,GAAG,CAAnB,EAAsB;AAClB,aAAKtG,cAAL,CAAoB,CAACsG,YAArB;AACH,OAFD,MAEO;AACH,aAAKtG,cAAL,CAAoB,CAApB;AACH;;AACD;AACH;;AACD,SAAK3I,MAAL,CAAY,eAAZ,EAA6BoP,cAA7B;AACH,GAnmBkC;AAomBnCC,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,SAAKhB,gBAAL,GAAwB,IAAxB;AACA,QAAIiB,YAAY,GAAG,KAAKC,YAAL,GAAoBC,MAApB,CAA2B,MAAMpR,2BAAjC,CAAnB;AACA,SAAK4B,MAAL,CAAY,gBAAZ,EAA8BhD,gBAAgB,CAACsS,YAAD,CAA9C;AACA,SAAKjB,gBAAL,GAAwB,KAAxB;AACH,GAzmBkC;AA0mBnCoB,EAAAA,UAAU,EAAE,oBAAS7H,KAAT,EAAgB;AACxB,QAAIlB,UAAU,GAAG,KAAKhC,WAAL,EAAjB;;AACAkD,IAAAA,KAAK,IAAIlB,UAAT;;AACA,QAAIkB,KAAK,GAAG,CAAClB,UAAU,GAAG,CAAd,IAAmB,CAA/B,EAAkC;AAC9BkB,MAAAA,KAAK,IAAIlB,UAAT;AACH;;AACD,QAAIkB,KAAK,GAAG,EAAElB,UAAU,GAAG,CAAf,IAAoB,CAAhC,EAAmC;AAC/BkB,MAAAA,KAAK,IAAIlB,UAAT;AACH;;AACD,WAAOkB,KAAP;AACH,GApnBkC;AAqnBnCuH,EAAAA,SAAS,EAAE,mBAASvH,KAAT,EAAgB;AACvB,QAAI,CAAC,KAAK5H,MAAL,CAAY,MAAZ,CAAL,EAA0B;AACtB,aAAO4H,KAAP;AACH;;AACD,QAAIlB,UAAU,GAAG,KAAKhC,WAAL,EAAjB;;AACA,QAAIkD,KAAK,IAAIlB,UAAT,IAAuBkB,KAAK,GAAG,CAAnC,EAAsC;AAClC,WAAKiG,cAAL,GAAsB,IAAtB;AACH;;AACD,QAAIjG,KAAK,IAAIlB,UAAb,EAAyB;AACrBkB,MAAAA,KAAK,GAAGlB,UAAU,GAAGkB,KAArB;AACH;;AACDA,IAAAA,KAAK,IAAIlB,UAAT;;AACA,QAAIkB,KAAK,GAAG,CAAZ,EAAe;AACXA,MAAAA,KAAK,IAAIlB,UAAT;AACH;;AACD,WAAOkB,KAAP;AACH,GAroBkC;AAsoBnC8H,EAAAA,MAAM,EAAE,kBAAW;AACf,SAAK3Q,QAAL;;AACA,SAAKmM,gBAAL;;AACA,SAAK2B,gBAAL;AACH,GA1oBkC;AA2oBnC8C,EAAAA,QAAQ,EAAE,oBAAW;AACjBzB,IAAAA,YAAY,CAAC,KAAKC,eAAN,CAAZ;AACA,SAAKpP,QAAL;AACH,GA9oBkC;AA+oBnC6Q,EAAAA,gBAAgB,EAAE,0BAASC,cAAT,EAAyBC,gBAAzB,EAA2C;AACzD,SAAK7J,mBAAL;;AACA,SAAKiH,2BAAL;;AACA,SAAKvH,mBAAL;;AACA,SAAKgD,cAAL,CAAoBkH,cAAc,CAAC,CAAD,CAAlC,EAAuCC,gBAAgB,CAAC,CAAD,CAAvD;;AACA,SAAKzE,4BAAL;AACH,GArpBkC;AAspBnC1C,EAAAA,cAAc,EAAE,wBAASuG,QAAT,EAAmBa,SAAnB,EAA8BC,gBAA9B,EAAgD;AAC5D,QAAI,KAAK,CAAL,KAAWD,SAAf,EAA0B;AACtBA,MAAAA,SAAS,GAAGb,QAAZ;AACH;;AACD,QAAIe,WAAW,GAAG,KAAK7J,qBAAL,CAA2B8I,QAA3B,EAAqCa,SAArC,CAAlB;;AACA,SAAKzK,wBAAL,CAA8B2K,WAA9B,EAA2C,IAA3C,EAAiD,KAAKjQ,MAAL,CAAY,kBAAZ,KAAmC,CAACgQ,gBAArF,EAAuGzG,IAAvG,CAA4G,YAAW;AACnH,WAAK8F,iBAAL;;AACA,WAAKhB,gBAAL,GAAwB,KAAxB;;AACA,WAAKvI,eAAL;AACH,KAJD;AAKH,GAhqBkC;AAiqBnCoK,EAAAA,eAAe,EAAE,2BAAW;AACxB,QAAIjT,EAAE,CAACkT,WAAH,CAAe,KAAKzM,WAApB,KAAoC,KAAK2K,gBAA7C,EAA+D;AAC3D;AACH;;AACD,SAAKtP,QAAL,CAAcqR,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;AACH,GAtqBkC;AAuqBnCC,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,QAAIrT,EAAE,CAACkT,WAAH,CAAe,KAAKzM,WAApB,KAAoC,KAAK2K,gBAA7C,EAA+D;AAC3D;AACH;;AACD,SAAKtP,QAAL,CAAcqR,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;AACH,GA5qBkC;AA6qBnCE,EAAAA,kBAAkB,EAAE3T,WAAW,CAACqC,IA7qBG;AA8qBnCuR,EAAAA,UAAU,EAAE,sBAAW;AACnB,SAAKvK,mBAAL;;AACA,SAAKlH,QAAL,CAAcqR,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;AACA,QAAIzI,KAAK,GAAG,KAAK2H,YAAL,GAAoB3H,KAApB,CAA0BpL,CAAC,CAAC,KAAKwD,MAAL,CAAY,gBAAZ,CAAD,CAA3B,CAAZ;AACA,SAAKqN,QAAL,CAAczF,KAAd,EAAqB,KAAK5H,MAAL,CAAY,kBAAZ,CAArB;AACH,GAnrBkC;AAorBnCyQ,EAAAA,kBAAkB,EAAE,4BAASC,OAAT,EAAkB;AAClC,QAAIA,OAAJ,EAAa;AACT,WAAK3K,iBAAL;AACH;AACJ,GAxrBkC;AAyrBnCK,EAAAA,qBAAqB,EAAE,+BAAS8I,QAAT,EAAmB1D,SAAnB,EAA8B;AACjD,QAAI,KAAK,CAAL,KAAWA,SAAf,EAA0B;AACtBA,MAAAA,SAAS,GAAG0D,QAAZ;AACH;;AACD,QAAIe,WAAW,GAAGzE,SAAS,GAAG0D,QAA9B;;AACA,QAAI,KAAKlP,MAAL,CAAY,MAAZ,KAAuB,CAAC,KAAK4M,aAA7B,IAA8C,KAAKiB,cAAvD,EAAuE;AACnE,UAAI,KAAK8C,kBAAL,CAAwBzB,QAAxB,KAAqC,KAAK0B,iBAAL,CAAuBpF,SAAvB,CAAzC,EAA4E;AACxEyE,QAAAA,WAAW,GAAG,CAAC,KAAKjM,aAAL,EAAf;AACH,OAFD,MAEO;AACH,YAAI,KAAK4M,iBAAL,CAAuB1B,QAAvB,KAAoC,KAAKyB,kBAAL,CAAwBnF,SAAxB,CAAxC,EAA4E;AACxEyE,UAAAA,WAAW,GAAG,KAAKjM,aAAL,EAAd;AACH;AACJ;;AACD,WAAK6J,cAAL,GAAsB,KAAtB;AACH;;AACD,SAAKjB,aAAL,GAAqB,KAArB;AACAqD,IAAAA,WAAW,IAAIzE,SAAf;AACA,WAAOyE,WAAP;AACH,GA3sBkC;AA4sBnCW,EAAAA,iBAAiB,EAAE,2BAASrF,SAAT,EAAoB;AACnC,WAAOA,SAAS,IAAI,KAAK7G,WAAL,KAAqB,KAAKV,aAAL,EAAzC;AACH,GA9sBkC;AA+sBnC2M,EAAAA,kBAAkB,EAAE,4BAASpF,SAAT,EAAoB;AACpC,WAAOA,SAAS,IAAI,KAAKvH,aAAL,EAApB;AACH,GAjtBkC;AAktBnC1D,EAAAA,cAAc,EAAE,wBAASC,IAAT,EAAe;AAC3B,YAAQA,IAAI,CAACV,IAAb;AACI,WAAK,OAAL;AACA,WAAK,kBAAL;AACI,aAAKd,QAAL,CAAcqR,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;;AACA,aAAKrK,iBAAL;;AACA;;AACJ,WAAK,mBAAL;AACI,aAAKkH,2BAAL;;AACA;;AACJ,WAAK,kBAAL;AACI;;AACJ,WAAK,MAAL;AACI,aAAKxN,QAAL,GAAgBwF,WAAhB,CAA4BrH,kBAA5B,EAAgD0C,IAAI,CAACsQ,KAArD;AACA,aAAK7Q,MAAL,CAAY,eAAZ,EAA6BO,IAAI,CAACsQ,KAAlC;;AACA,YAAI/T,WAAW,CAACwH,SAAZ,EAAJ,EAA6B;AACzB,eAAK6B,oBAAL;;AACA,eAAKX,oBAAL;;AACA,eAAK0H,2BAAL;AACH;;AACD;;AACJ,WAAK,eAAL;AACI,aAAKxH,gBAAL;;AACA;;AACJ,WAAK,gBAAL;AACI,aAAKD,iBAAL;;AACA;;AACJ,WAAK,gBAAL;AACI,aAAKK,eAAL;;AACA;;AACJ,WAAK,YAAL;AACA,WAAK,eAAL;AACI,YAAIhJ,WAAW,CAACwH,SAAZ,EAAJ,EAA6B;AACzB,eAAKiB,gBAAL;;AACA,eAAKC,oBAAL;;AACA,eAAKI,qBAAL;AACH;;AACD;;AACJ,WAAK,cAAL;AACA,WAAK,kBAAL;AACI,aAAKC,sBAAL;;AACA;;AACJ;AACI,aAAK9G,QAAL,CAAcwB,IAAd;AA1CR;AA4CH,GA/vBkC;AAgwBnC8M,EAAAA,QAAQ,EAAE,kBAAS9B,SAAT,EAAoBuF,SAApB,EAA+B;AACrC,QAAI7P,aAAa,GAAG,KAAKjB,MAAL,CAAY,eAAZ,CAApB;;AACA,QAAI0G,UAAU,GAAG,KAAKhC,WAAL,EAAjB;;AACA,QAAI,KAAK,CAAL,KAAWoM,SAAf,EAA0B;AACtB,WAAK1H,kBAAL,GAA0B0H,SAA1B;AACH;;AACDvF,IAAAA,SAAS,GAAG,KAAK4D,SAAL,CAAe5D,SAAf,CAAZ;AACA,SAAKzB,gBAAL,GAAwB,IAAIpM,QAAJ,EAAxB;;AACA,QAAI6N,SAAS,GAAG7E,UAAU,GAAG,CAAzB,IAA8B6E,SAAS,GAAG,CAA1C,IAA+CtK,aAAa,KAAKsK,SAArE,EAAgF;AAC5E,aAAO,KAAKzB,gBAAL,CAAsBD,WAAtB,CAAkC,IAAlC,EAAwCE,OAAxC,EAAP;AACH;;AACD,SAAK/J,MAAL,CAAY,eAAZ,EAA6BuL,SAA7B;AACA,WAAO,KAAKzB,gBAAL,CAAsBC,OAAtB,EAAP;AACH,GA7wBkC;AA8wBnCgH,EAAAA,QAAQ,EAAE,kBAASD,SAAT,EAAoB;AAC1B,WAAO,KAAKzD,QAAL,CAAc,KAAKrN,MAAL,CAAY,eAAZ,IAA+B,CAA7C,EAAgD8Q,SAAhD,CAAP;AACH,GAhxBkC;AAixBnCxC,EAAAA,QAAQ,EAAE,kBAASwC,SAAT,EAAoB;AAC1B,WAAO,KAAKzD,QAAL,CAAc,KAAKrN,MAAL,CAAY,eAAZ,IAA+B,CAA7C,EAAgD8Q,SAAhD,CAAP;AACH;AAnxBkC,CAAzB,CAAd;AAqxBAnU,iBAAiB,CAAC,WAAD,EAAc8D,OAAd,CAAjB;AACAuQ,MAAM,CAACC,OAAP,GAAiBxQ,OAAjB;AACAuQ,MAAM,CAACC,OAAP,CAAeC,OAAf,GAAyBF,MAAM,CAACC,OAAhC","sourcesContent":["/**\r\n * DevExtreme (ui/gallery.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../core/renderer\");\r\nvar eventsEngine = require(\"../events/core/events_engine\");\r\nvar registerComponent = require(\"../core/component_registrator\");\r\nvar commonUtils = require(\"../core/utils/common\");\r\nvar typeUtils = require(\"../core/utils/type\");\r\nvar windowUtils = require(\"../core/utils/window\");\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar getPublicElement = require(\"../core/utils/dom\").getPublicElement;\r\nvar fx = require(\"../animation/fx\");\r\nvar clickEvent = require(\"../events/click\");\r\nvar translator = require(\"../animation/translator\");\r\nvar devices = require(\"../core/devices\");\r\nvar Widget = require(\"./widget/ui.widget\");\r\nvar eventUtils = require(\"../events/utils\");\r\nvar CollectionWidget = require(\"./collection/ui.collection_widget.edit\");\r\nvar Swipeable = require(\"../events/gesture/swipeable\");\r\nvar BindableTemplate = require(\"../core/templates/bindable_template\").BindableTemplate;\r\nvar Deferred = require(\"../core/utils/deferred\").Deferred;\r\nvar GALLERY_CLASS = \"dx-gallery\";\r\nvar GALLERY_WRAPPER_CLASS = GALLERY_CLASS + \"-wrapper\";\r\nvar GALLERY_LOOP_CLASS = \"dx-gallery-loop\";\r\nvar GALLERY_ITEM_CONTAINER_CLASS = GALLERY_CLASS + \"-container\";\r\nvar GALLERY_ACTIVE_CLASS = GALLERY_CLASS + \"-active\";\r\nvar GALLERY_ITEM_CLASS = GALLERY_CLASS + \"-item\";\r\nvar GALLERY_INVISIBLE_ITEM_CLASS = GALLERY_CLASS + \"-item-invisible\";\r\nvar GALLERY_LOOP_ITEM_CLASS = GALLERY_ITEM_CLASS + \"-loop\";\r\nvar GALLERY_ITEM_SELECTOR = \".\" + GALLERY_ITEM_CLASS;\r\nvar GALLERY_ITEM_SELECTED_CLASS = GALLERY_ITEM_CLASS + \"-selected\";\r\nvar GALLERY_INDICATOR_CLASS = GALLERY_CLASS + \"-indicator\";\r\nvar GALLERY_INDICATOR_ITEM_CLASS = GALLERY_INDICATOR_CLASS + \"-item\";\r\nvar GALLERY_INDICATOR_ITEM_SELECTOR = \".\" + GALLERY_INDICATOR_ITEM_CLASS;\r\nvar GALLERY_INDICATOR_ITEM_SELECTED_CLASS = GALLERY_INDICATOR_ITEM_CLASS + \"-selected\";\r\nvar GALLERY_IMAGE_CLASS = \"dx-gallery-item-image\";\r\nvar GALLERY_ITEM_DATA_KEY = \"dxGalleryItemData\";\r\nvar MAX_CALC_ERROR = 1;\r\nvar GalleryNavButton = Widget.inherit({\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), {\r\n            pageUp: commonUtils.noop,\r\n            pageDown: commonUtils.noop\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            direction: \"next\",\r\n            onClick: null,\r\n            hoverStateEnabled: true,\r\n            activeStateEnabled: true\r\n        })\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        var that = this;\r\n        var $element = this.$element();\r\n        var eventName = eventUtils.addNamespace(clickEvent.name, this.NAME);\r\n        $element.addClass(GALLERY_CLASS + \"-nav-button-\" + this.option(\"direction\"));\r\n        eventsEngine.off($element, eventName);\r\n        eventsEngine.on($element, eventName, function(e) {\r\n            that._createActionByOption(\"onClick\")({\r\n                event: e\r\n            })\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"onClick\":\r\n            case \"direction\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nvar Gallery = CollectionWidget.inherit({\r\n    _activeStateUnit: GALLERY_ITEM_SELECTOR,\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            activeStateEnabled: false,\r\n            animationDuration: 400,\r\n            animationEnabled: true,\r\n            loop: false,\r\n            swipeEnabled: true,\r\n            indicatorEnabled: true,\r\n            showIndicator: true,\r\n            selectedIndex: 0,\r\n            slideshowDelay: 0,\r\n            showNavButtons: false,\r\n            wrapAround: false,\r\n            initialItemWidth: void 0,\r\n            stretchImages: false,\r\n            _itemAttributes: {\r\n                role: \"option\"\r\n            },\r\n            loopItemFocus: false,\r\n            selectOnFocus: true,\r\n            selectionMode: \"single\",\r\n            selectionRequired: true,\r\n            selectionByClick: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.option(\"loopItemFocus\", this.option(\"loop\"))\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._defaultTemplates.item = new BindableTemplate(function($container, data) {\r\n            var $img = $(\"<img>\").addClass(GALLERY_IMAGE_CLASS);\r\n            if (typeUtils.isPlainObject(data)) {\r\n                this._prepareDefaultItemTemplate(data, $container);\r\n                $img.attr({\r\n                    src: data.imageSrc,\r\n                    alt: data.imageAlt\r\n                }).appendTo($container)\r\n            } else {\r\n                $img.attr(\"src\", String(data)).appendTo($container)\r\n            }\r\n        }.bind(this), [\"imageSrc\", \"imageAlt\", \"text\", \"html\"], this.option(\"integrationOptions.watchMethod\"))\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _itemContainer: function() {\r\n        return this._$container\r\n    },\r\n    _itemClass: function() {\r\n        return GALLERY_ITEM_CLASS\r\n    },\r\n    _itemDataKey: function() {\r\n        return GALLERY_ITEM_DATA_KEY\r\n    },\r\n    _actualItemWidth: function() {\r\n        var isWrapAround = this.option(\"wrapAround\");\r\n        if (this.option(\"stretchImages\")) {\r\n            var itemPerPage = isWrapAround ? this._itemsPerPage() + 1 : this._itemsPerPage();\r\n            return 1 / itemPerPage\r\n        }\r\n        if (isWrapAround) {\r\n            return this._itemPercentWidth() * this._itemsPerPage() / (this._itemsPerPage() + 1)\r\n        }\r\n        return this._itemPercentWidth()\r\n    },\r\n    _itemPercentWidth: function() {\r\n        var percentWidth;\r\n        var elementWidth = this.$element().outerWidth();\r\n        var initialItemWidth = this.option(\"initialItemWidth\");\r\n        if (initialItemWidth && initialItemWidth <= elementWidth) {\r\n            percentWidth = initialItemWidth / elementWidth\r\n        } else {\r\n            percentWidth = 1\r\n        }\r\n        return percentWidth\r\n    },\r\n    _itemsPerPage: function() {\r\n        var itemsPerPage = windowUtils.hasWindow() ? Math.floor(1 / this._itemPercentWidth()) : 1;\r\n        return Math.min(itemsPerPage, this._itemsCount())\r\n    },\r\n    _pagesCount: function() {\r\n        return Math.ceil(this._itemsCount() / this._itemsPerPage())\r\n    },\r\n    _itemsCount: function() {\r\n        return (this.option(\"items\") || []).length\r\n    },\r\n    _offsetDirection: function() {\r\n        return this.option(\"rtlEnabled\") ? -1 : 1\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderWrapper();\r\n        this._renderItemsContainer();\r\n        this.$element().addClass(GALLERY_CLASS);\r\n        this.$element().toggleClass(GALLERY_LOOP_CLASS, this.option(\"loop\"));\r\n        this.callBase();\r\n        this.setAria({\r\n            role: \"listbox\",\r\n            label: \"gallery\"\r\n        })\r\n    },\r\n    _render: function() {\r\n        this._renderDragHandler();\r\n        this._renderContainerPosition();\r\n        this._renderItemSizes();\r\n        this._renderItemPositions();\r\n        this._renderNavButtons();\r\n        this._renderIndicator();\r\n        this._renderSelectedItem();\r\n        this._renderItemVisibility();\r\n        this._renderUserInteraction();\r\n        this._setupSlideShow();\r\n        this._reviseDimensions();\r\n        this.callBase()\r\n    },\r\n    _dimensionChanged: function() {\r\n        var selectedIndex = this.option(\"selectedIndex\") || 0;\r\n        this._stopItemAnimations();\r\n        this._clearCacheWidth();\r\n        this._cloneDuplicateItems();\r\n        this._renderItemSizes();\r\n        this._renderItemPositions();\r\n        this._renderIndicator();\r\n        this._renderContainerPosition(this._calculateIndexOffset(selectedIndex), true);\r\n        this._renderItemVisibility()\r\n    },\r\n    _renderDragHandler: function() {\r\n        var eventName = eventUtils.addNamespace(\"dragstart\", this.NAME);\r\n        eventsEngine.off(this.$element(), eventName);\r\n        eventsEngine.on(this.$element(), eventName, \"img\", function() {\r\n            return false\r\n        })\r\n    },\r\n    _renderWrapper: function() {\r\n        if (this._$wrapper) {\r\n            return\r\n        }\r\n        this._$wrapper = $(\"<div>\").addClass(GALLERY_WRAPPER_CLASS).appendTo(this.$element())\r\n    },\r\n    _renderItems: function(items) {\r\n        if (!windowUtils.hasWindow()) {\r\n            var selectedIndex = this.option(\"selectedIndex\");\r\n            items = items.length > selectedIndex ? items.slice(selectedIndex, selectedIndex + 1) : items.slice(0, 1)\r\n        }\r\n        this.callBase(items);\r\n        this._loadNextPageIfNeeded()\r\n    },\r\n    _renderItemsContainer: function() {\r\n        if (this._$container) {\r\n            return\r\n        }\r\n        this._$container = $(\"<div>\").addClass(GALLERY_ITEM_CONTAINER_CLASS).appendTo(this._$wrapper)\r\n    },\r\n    _cloneDuplicateItems: function() {\r\n        if (!this.option(\"loop\")) {\r\n            return\r\n        }\r\n        var items = this.option(\"items\") || [];\r\n        var itemsCount = items.length;\r\n        var lastItemIndex = itemsCount - 1;\r\n        var i;\r\n        if (!itemsCount) {\r\n            return\r\n        }\r\n        this._getLoopedItems().remove();\r\n        var duplicateCount = Math.min(this._itemsPerPage(), itemsCount);\r\n        var $items = this._getRealItems();\r\n        var $container = this._itemContainer();\r\n        for (i = 0; i < duplicateCount; i++) {\r\n            this._cloneItemForDuplicate($items[i], $container)\r\n        }\r\n        for (i = 0; i < duplicateCount; i++) {\r\n            this._cloneItemForDuplicate($items[lastItemIndex - i], $container)\r\n        }\r\n    },\r\n    _cloneItemForDuplicate: function(item, $container) {\r\n        if (item) {\r\n            $(item).clone(true).addClass(GALLERY_LOOP_ITEM_CLASS).css(\"margin\", 0).appendTo($container)\r\n        }\r\n    },\r\n    _getRealItems: function() {\r\n        var selector = \".\" + GALLERY_ITEM_CLASS + \":not(.\" + GALLERY_LOOP_ITEM_CLASS + \")\";\r\n        return this.$element().find(selector)\r\n    },\r\n    _getLoopedItems: function() {\r\n        return this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS)\r\n    },\r\n    _emptyMessageContainer: function() {\r\n        return this._$wrapper\r\n    },\r\n    _renderItemSizes: function(startIndex) {\r\n        var $items = this._itemElements();\r\n        var itemWidth = this._actualItemWidth();\r\n        if (void 0 !== startIndex) {\r\n            $items = $items.slice(startIndex)\r\n        }\r\n        $items.each(function(index) {\r\n            $($items[index]).outerWidth(100 * itemWidth + \"%\")\r\n        })\r\n    },\r\n    _renderItemPositions: function() {\r\n        var itemWidth = this._actualItemWidth();\r\n        var itemsCount = this._itemsCount();\r\n        var itemsPerPage = this._itemsPerPage();\r\n        var loopItemsCount = this.$element().find(\".\" + GALLERY_LOOP_ITEM_CLASS).length;\r\n        var lastItemDuplicateIndex = itemsCount + loopItemsCount - 1;\r\n        var offsetRatio = this.option(\"wrapAround\") ? .5 : 0;\r\n        var freeSpace = this._itemFreeSpace();\r\n        var isGapBetweenImages = !!freeSpace;\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var side = rtlEnabled ? \"Right\" : \"Left\";\r\n        this._itemElements().each(function(index) {\r\n            var realIndex = index;\r\n            var isLoopItem = $(this).hasClass(GALLERY_LOOP_ITEM_CLASS);\r\n            if (index > itemsCount + itemsPerPage - 1) {\r\n                realIndex = lastItemDuplicateIndex - realIndex - itemsPerPage\r\n            }\r\n            if (!isLoopItem && 0 !== realIndex) {\r\n                if (isGapBetweenImages) {\r\n                    $(this).css(\"margin\" + side, 100 * freeSpace + \"%\")\r\n                }\r\n                return\r\n            }\r\n            var itemPosition = itemWidth * (realIndex + offsetRatio) + freeSpace * (realIndex + 1 - offsetRatio);\r\n            var property = isLoopItem ? side.toLowerCase() : \"margin\" + side;\r\n            $(this).css(property, 100 * itemPosition + \"%\")\r\n        });\r\n        this._relocateItems(selectedIndex, selectedIndex, true)\r\n    },\r\n    _itemFreeSpace: function() {\r\n        var itemsPerPage = this._itemsPerPage();\r\n        if (this.option(\"wrapAround\")) {\r\n            itemsPerPage += 1\r\n        }\r\n        return (1 - this._actualItemWidth() * itemsPerPage) / (itemsPerPage + 1)\r\n    },\r\n    _renderContainerPosition: function(offset, hideItems, animate) {\r\n        this._releaseInvisibleItems();\r\n        offset = offset || 0;\r\n        var that = this;\r\n        var itemWidth = this._actualItemWidth();\r\n        var targetIndex = offset;\r\n        var targetPosition = this._offsetDirection() * targetIndex * (itemWidth + this._itemFreeSpace());\r\n        var positionReady;\r\n        if (typeUtils.isDefined(this._animationOverride)) {\r\n            animate = this._animationOverride;\r\n            delete this._animationOverride\r\n        }\r\n        if (animate) {\r\n            that._startSwipe();\r\n            positionReady = that._animate(targetPosition).done(that._endSwipe.bind(that))\r\n        } else {\r\n            translator.move(this._$container, {\r\n                left: targetPosition * this._elementWidth(),\r\n                top: 0\r\n            });\r\n            positionReady = (new Deferred).resolveWith(that)\r\n        }\r\n        positionReady.done(function() {\r\n            this._deferredAnimate && that._deferredAnimate.resolveWith(that);\r\n            hideItems && this._renderItemVisibility()\r\n        });\r\n        return positionReady.promise()\r\n    },\r\n    _startSwipe: function() {\r\n        this.$element().addClass(GALLERY_ACTIVE_CLASS)\r\n    },\r\n    _endSwipe: function() {\r\n        this.$element().removeClass(GALLERY_ACTIVE_CLASS)\r\n    },\r\n    _animate: function(targetPosition, extraConfig) {\r\n        var that = this;\r\n        var $container = this._$container;\r\n        var animationComplete = new Deferred;\r\n        fx.animate(this._$container, extend({\r\n            type: \"slide\",\r\n            to: {\r\n                left: targetPosition * this._elementWidth()\r\n            },\r\n            duration: that.option(\"animationDuration\"),\r\n            complete: function() {\r\n                if (that._needMoveContainerForward()) {\r\n                    translator.move($container, {\r\n                        left: 0,\r\n                        top: 0\r\n                    })\r\n                }\r\n                if (that._needMoveContainerBack()) {\r\n                    translator.move($container, {\r\n                        left: that._maxContainerOffset() * that._elementWidth(),\r\n                        top: 0\r\n                    })\r\n                }\r\n                animationComplete.resolveWith(that)\r\n            }\r\n        }, extraConfig || {}));\r\n        return animationComplete\r\n    },\r\n    _needMoveContainerForward: function() {\r\n        var expectedPosition = this._$container.position().left * this._offsetDirection();\r\n        var actualPosition = -this._maxItemWidth() * this._elementWidth() * this._itemsCount();\r\n        return expectedPosition <= actualPosition + MAX_CALC_ERROR\r\n    },\r\n    _needMoveContainerBack: function() {\r\n        var expectedPosition = this._$container.position().left * this._offsetDirection();\r\n        var actualPosition = this._actualItemWidth() * this._elementWidth();\r\n        return expectedPosition >= actualPosition - MAX_CALC_ERROR\r\n    },\r\n    _maxContainerOffset: function() {\r\n        return -this._maxItemWidth() * (this._itemsCount() - this._itemsPerPage()) * this._offsetDirection()\r\n    },\r\n    _maxItemWidth: function() {\r\n        return this._actualItemWidth() + this._itemFreeSpace()\r\n    },\r\n    _reviseDimensions: function() {\r\n        var that = this;\r\n        var $firstItem = that._itemElements().first().find(\".dx-item-content\");\r\n        if (!$firstItem || $firstItem.is(\":hidden\")) {\r\n            return\r\n        }\r\n        if (!that.option(\"height\")) {\r\n            that.option(\"height\", $firstItem.outerHeight())\r\n        }\r\n        if (!that.option(\"width\")) {\r\n            that.option(\"width\", $firstItem.outerWidth())\r\n        }\r\n        this._dimensionChanged()\r\n    },\r\n    _renderIndicator: function() {\r\n        this._cleanIndicators();\r\n        if (!this.option(\"showIndicator\")) {\r\n            return\r\n        }\r\n        var indicator = this._$indicator = $(\"<div>\").addClass(GALLERY_INDICATOR_CLASS).appendTo(this._$wrapper);\r\n        for (var i = 0; i < this._pagesCount(); i++) {\r\n            $(\"<div>\").addClass(GALLERY_INDICATOR_ITEM_CLASS).appendTo(indicator)\r\n        }\r\n        this._renderSelectedPageIndicator()\r\n    },\r\n    _cleanIndicators: function() {\r\n        if (this._$indicator) {\r\n            this._$indicator.remove()\r\n        }\r\n    },\r\n    _renderSelectedItem: function() {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        this._itemElements().removeClass(GALLERY_ITEM_SELECTED_CLASS).eq(selectedIndex).addClass(GALLERY_ITEM_SELECTED_CLASS)\r\n    },\r\n    _renderItemVisibility: function() {\r\n        if (this.option(\"initialItemWidth\") || this.option(\"wrapAround\")) {\r\n            this._releaseInvisibleItems();\r\n            return\r\n        }\r\n        this._itemElements().each(function(index, item) {\r\n            if (this.option(\"selectedIndex\") === index) {\r\n                $(item).removeClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n            } else {\r\n                $(item).addClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n            }\r\n        }.bind(this));\r\n        this._getLoopedItems().addClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n    },\r\n    _releaseInvisibleItems: function() {\r\n        this._itemElements().removeClass(GALLERY_INVISIBLE_ITEM_CLASS);\r\n        this._getLoopedItems().removeClass(GALLERY_INVISIBLE_ITEM_CLASS)\r\n    },\r\n    _renderSelectedPageIndicator: function() {\r\n        if (!this._$indicator) {\r\n            return\r\n        }\r\n        var itemIndex = this.option(\"selectedIndex\");\r\n        var lastIndex = this._pagesCount() - 1;\r\n        var pageIndex = Math.ceil(itemIndex / this._itemsPerPage());\r\n        pageIndex = Math.min(lastIndex, pageIndex);\r\n        this._$indicator.find(GALLERY_INDICATOR_ITEM_SELECTOR).removeClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS).eq(pageIndex).addClass(GALLERY_INDICATOR_ITEM_SELECTED_CLASS)\r\n    },\r\n    _renderUserInteraction: function() {\r\n        var rootElement = this.$element();\r\n        var swipeEnabled = this.option(\"swipeEnabled\") && this._itemsCount() > 1;\r\n        this._createComponent(rootElement, Swipeable, {\r\n            disabled: this.option(\"disabled\") || !swipeEnabled,\r\n            onStart: this._swipeStartHandler.bind(this),\r\n            onUpdated: this._swipeUpdateHandler.bind(this),\r\n            onEnd: this._swipeEndHandler.bind(this),\r\n            itemSizeFunc: this._elementWidth.bind(this)\r\n        });\r\n        var indicatorSelectAction = this._createAction(this._indicatorSelectHandler);\r\n        eventsEngine.off(rootElement, eventUtils.addNamespace(clickEvent.name, this.NAME), GALLERY_INDICATOR_ITEM_SELECTOR);\r\n        eventsEngine.on(rootElement, eventUtils.addNamespace(clickEvent.name, this.NAME), GALLERY_INDICATOR_ITEM_SELECTOR, function(e) {\r\n            indicatorSelectAction({\r\n                event: e\r\n            })\r\n        })\r\n    },\r\n    _indicatorSelectHandler: function(args) {\r\n        var e = args.event;\r\n        var instance = args.component;\r\n        if (!instance.option(\"indicatorEnabled\")) {\r\n            return\r\n        }\r\n        var indicatorIndex = $(e.target).index();\r\n        var itemIndex = instance._fitPaginatedIndex(indicatorIndex * instance._itemsPerPage());\r\n        instance._needLongMove = true;\r\n        instance.option(\"selectedIndex\", itemIndex);\r\n        instance._loadNextPageIfNeeded(itemIndex)\r\n    },\r\n    _renderNavButtons: function() {\r\n        var that = this;\r\n        if (!that.option(\"showNavButtons\")) {\r\n            that._cleanNavButtons();\r\n            return\r\n        }\r\n        that._prevNavButton = $(\"<div>\").appendTo(this._$wrapper);\r\n        that._createComponent(that._prevNavButton, GalleryNavButton, {\r\n            direction: \"prev\",\r\n            onClick: function() {\r\n                that._prevPage()\r\n            }\r\n        });\r\n        that._nextNavButton = $(\"<div>\").appendTo(this._$wrapper);\r\n        that._createComponent(that._nextNavButton, GalleryNavButton, {\r\n            direction: \"next\",\r\n            onClick: function() {\r\n                that._nextPage()\r\n            }\r\n        });\r\n        this._renderNavButtonsVisibility()\r\n    },\r\n    _prevPage: function() {\r\n        var visiblePageSize = this._itemsPerPage();\r\n        var newSelectedIndex = this.option(\"selectedIndex\") - visiblePageSize;\r\n        if (newSelectedIndex === -visiblePageSize && visiblePageSize === this._itemsCount()) {\r\n            return this._relocateItems(newSelectedIndex, 0)\r\n        } else {\r\n            return this.goToItem(this._fitPaginatedIndex(newSelectedIndex))\r\n        }\r\n    },\r\n    _nextPage: function() {\r\n        var visiblePageSize = this._itemsPerPage();\r\n        var newSelectedIndex = this.option(\"selectedIndex\") + visiblePageSize;\r\n        if (newSelectedIndex === visiblePageSize && visiblePageSize === this._itemsCount()) {\r\n            return this._relocateItems(newSelectedIndex, 0)\r\n        } else {\r\n            return this.goToItem(this._fitPaginatedIndex(newSelectedIndex)).done(this._loadNextPageIfNeeded)\r\n        }\r\n    },\r\n    _loadNextPageIfNeeded: function(selectedIndex) {\r\n        selectedIndex = void 0 === selectedIndex ? this.option(\"selectedIndex\") : selectedIndex;\r\n        if (this._dataSource && this._dataSource.paginate() && this._shouldLoadNextPage(selectedIndex) && !this._isDataSourceLoading() && !this._isLastPage()) {\r\n            this._loadNextPage().done(function() {\r\n                this._renderIndicator();\r\n                this._renderItemPositions();\r\n                this._renderNavButtonsVisibility();\r\n                this._renderItemSizes(selectedIndex)\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _shouldLoadNextPage: function(selectedIndex) {\r\n        var visiblePageSize = this._itemsPerPage();\r\n        return selectedIndex + 2 * visiblePageSize > this.option(\"items\").length\r\n    },\r\n    _allowDynamicItemsAppend: function() {\r\n        return true\r\n    },\r\n    _fitPaginatedIndex: function(itemIndex) {\r\n        var itemsPerPage = this._itemsPerPage();\r\n        var restItemsCount = itemIndex < 0 ? itemsPerPage + itemIndex : this._itemsCount() - itemIndex;\r\n        if (itemIndex > this._itemsCount() - 1) {\r\n            itemIndex = 0;\r\n            this._goToGhostItem = true\r\n        } else {\r\n            if (restItemsCount < itemsPerPage && restItemsCount > 0) {\r\n                if (itemIndex > 0) {\r\n                    itemIndex -= itemsPerPage - restItemsCount\r\n                } else {\r\n                    itemIndex += itemsPerPage - restItemsCount\r\n                }\r\n            }\r\n        }\r\n        return itemIndex\r\n    },\r\n    _cleanNavButtons: function() {\r\n        if (this._prevNavButton) {\r\n            this._prevNavButton.remove();\r\n            delete this._prevNavButton\r\n        }\r\n        if (this._nextNavButton) {\r\n            this._nextNavButton.remove();\r\n            delete this._nextNavButton\r\n        }\r\n    },\r\n    _renderNavButtonsVisibility: function() {\r\n        if (!this.option(\"showNavButtons\") || !this._prevNavButton || !this._nextNavButton) {\r\n            return\r\n        }\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var loop = this.option(\"loop\");\r\n        var itemsCount = this._itemsCount();\r\n        this._prevNavButton.show();\r\n        this._nextNavButton.show();\r\n        if (0 === itemsCount) {\r\n            this._prevNavButton.hide();\r\n            this._nextNavButton.hide()\r\n        }\r\n        if (loop) {\r\n            return\r\n        }\r\n        var nextHidden = selectedIndex === itemsCount - this._itemsPerPage();\r\n        var prevHidden = itemsCount < 2 || 0 === selectedIndex;\r\n        if (this._dataSource && this._dataSource.paginate()) {\r\n            nextHidden = nextHidden && this._isLastPage()\r\n        } else {\r\n            nextHidden = nextHidden || itemsCount < 2\r\n        }\r\n        if (prevHidden) {\r\n            this._prevNavButton.hide()\r\n        }\r\n        if (nextHidden) {\r\n            this._nextNavButton.hide()\r\n        }\r\n    },\r\n    _setupSlideShow: function() {\r\n        var that = this;\r\n        var slideshowDelay = that.option(\"slideshowDelay\");\r\n        clearTimeout(that._slideshowTimer);\r\n        if (!slideshowDelay) {\r\n            return\r\n        }\r\n        that._slideshowTimer = setTimeout(function() {\r\n            if (that._userInteraction) {\r\n                that._setupSlideShow();\r\n                return\r\n            }\r\n            that.nextItem(true).done(that._setupSlideShow)\r\n        }, slideshowDelay)\r\n    },\r\n    _elementWidth: function() {\r\n        if (!this._cacheElementWidth) {\r\n            this._cacheElementWidth = this.$element().width()\r\n        }\r\n        return this._cacheElementWidth\r\n    },\r\n    _clearCacheWidth: function() {\r\n        delete this._cacheElementWidth\r\n    },\r\n    _swipeStartHandler: function(e) {\r\n        this._releaseInvisibleItems();\r\n        this._clearCacheWidth();\r\n        this._elementWidth();\r\n        var itemsCount = this._itemsCount();\r\n        if (!itemsCount) {\r\n            e.event.cancel = true;\r\n            return\r\n        }\r\n        this._stopItemAnimations();\r\n        this._startSwipe();\r\n        this._userInteraction = true;\r\n        if (!this.option(\"loop\")) {\r\n            var selectedIndex = this.option(\"selectedIndex\");\r\n            var startOffset = itemsCount - selectedIndex - this._itemsPerPage();\r\n            var endOffset = selectedIndex;\r\n            var rtlEnabled = this.option(\"rtlEnabled\");\r\n            e.event.maxLeftOffset = rtlEnabled ? endOffset : startOffset;\r\n            e.event.maxRightOffset = rtlEnabled ? startOffset : endOffset\r\n        }\r\n    },\r\n    _stopItemAnimations: function() {\r\n        fx.stop(this._$container, true)\r\n    },\r\n    _swipeUpdateHandler: function(e) {\r\n        var wrapAroundRatio = this.option(\"wrapAround\") ? 1 : 0;\r\n        var offset = this._offsetDirection() * e.event.offset * (this._itemsPerPage() + wrapAroundRatio) - this.option(\"selectedIndex\");\r\n        if (offset < 0) {\r\n            this._loadNextPageIfNeeded(Math.ceil(Math.abs(offset)))\r\n        }\r\n        this._renderContainerPosition(offset)\r\n    },\r\n    _swipeEndHandler: function(e) {\r\n        var targetOffset = e.event.targetOffset * this._offsetDirection() * this._itemsPerPage();\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var newIndex = this._fitIndex(selectedIndex - targetOffset);\r\n        var paginatedIndex = this._fitPaginatedIndex(newIndex);\r\n        if (Math.abs(targetOffset) < this._itemsPerPage()) {\r\n            this._relocateItems(selectedIndex);\r\n            return\r\n        }\r\n        if (this._itemsPerPage() === this._itemsCount()) {\r\n            if (targetOffset > 0) {\r\n                this._relocateItems(-targetOffset)\r\n            } else {\r\n                this._relocateItems(0)\r\n            }\r\n            return\r\n        }\r\n        this.option(\"selectedIndex\", paginatedIndex)\r\n    },\r\n    _setFocusOnSelect: function() {\r\n        this._userInteraction = true;\r\n        var selectedItem = this.itemElements().filter(\".\" + GALLERY_ITEM_SELECTED_CLASS);\r\n        this.option(\"focusedElement\", getPublicElement(selectedItem));\r\n        this._userInteraction = false\r\n    },\r\n    _flipIndex: function(index) {\r\n        var itemsCount = this._itemsCount();\r\n        index %= itemsCount;\r\n        if (index > (itemsCount + 1) / 2) {\r\n            index -= itemsCount\r\n        }\r\n        if (index < -(itemsCount - 1) / 2) {\r\n            index += itemsCount\r\n        }\r\n        return index\r\n    },\r\n    _fitIndex: function(index) {\r\n        if (!this.option(\"loop\")) {\r\n            return index\r\n        }\r\n        var itemsCount = this._itemsCount();\r\n        if (index >= itemsCount || index < 0) {\r\n            this._goToGhostItem = true\r\n        }\r\n        if (index >= itemsCount) {\r\n            index = itemsCount - index\r\n        }\r\n        index %= itemsCount;\r\n        if (index < 0) {\r\n            index += itemsCount\r\n        }\r\n        return index\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._cleanIndicators();\r\n        this._cleanNavButtons()\r\n    },\r\n    _dispose: function() {\r\n        clearTimeout(this._slideshowTimer);\r\n        this.callBase()\r\n    },\r\n    _updateSelection: function(addedSelection, removedSelection) {\r\n        this._stopItemAnimations();\r\n        this._renderNavButtonsVisibility();\r\n        this._renderSelectedItem();\r\n        this._relocateItems(addedSelection[0], removedSelection[0]);\r\n        this._renderSelectedPageIndicator()\r\n    },\r\n    _relocateItems: function(newIndex, prevIndex, withoutAnimation) {\r\n        if (void 0 === prevIndex) {\r\n            prevIndex = newIndex\r\n        }\r\n        var indexOffset = this._calculateIndexOffset(newIndex, prevIndex);\r\n        this._renderContainerPosition(indexOffset, true, this.option(\"animationEnabled\") && !withoutAnimation).done(function() {\r\n            this._setFocusOnSelect();\r\n            this._userInteraction = false;\r\n            this._setupSlideShow()\r\n        })\r\n    },\r\n    _focusInHandler: function() {\r\n        if (fx.isAnimating(this._$container) || this._userInteraction) {\r\n            return\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _focusOutHandler: function() {\r\n        if (fx.isAnimating(this._$container) || this._userInteraction) {\r\n            return\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _selectFocusedItem: commonUtils.noop,\r\n    _moveFocus: function() {\r\n        this._stopItemAnimations();\r\n        this.callBase.apply(this, arguments);\r\n        var index = this.itemElements().index($(this.option(\"focusedElement\")));\r\n        this.goToItem(index, this.option(\"animationEnabled\"))\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._reviseDimensions()\r\n        }\r\n    },\r\n    _calculateIndexOffset: function(newIndex, lastIndex) {\r\n        if (void 0 === lastIndex) {\r\n            lastIndex = newIndex\r\n        }\r\n        var indexOffset = lastIndex - newIndex;\r\n        if (this.option(\"loop\") && !this._needLongMove && this._goToGhostItem) {\r\n            if (this._isItemOnFirstPage(newIndex) && this._isItemOnLastPage(lastIndex)) {\r\n                indexOffset = -this._itemsPerPage()\r\n            } else {\r\n                if (this._isItemOnLastPage(newIndex) && this._isItemOnFirstPage(lastIndex)) {\r\n                    indexOffset = this._itemsPerPage()\r\n                }\r\n            }\r\n            this._goToGhostItem = false\r\n        }\r\n        this._needLongMove = false;\r\n        indexOffset -= lastIndex;\r\n        return indexOffset\r\n    },\r\n    _isItemOnLastPage: function(itemIndex) {\r\n        return itemIndex >= this._itemsCount() - this._itemsPerPage()\r\n    },\r\n    _isItemOnFirstPage: function(itemIndex) {\r\n        return itemIndex <= this._itemsPerPage()\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"width\":\r\n            case \"initialItemWidth\":\r\n                this.callBase.apply(this, arguments);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"animationDuration\":\r\n                this._renderNavButtonsVisibility();\r\n                break;\r\n            case \"animationEnabled\":\r\n                break;\r\n            case \"loop\":\r\n                this.$element().toggleClass(GALLERY_LOOP_CLASS, args.value);\r\n                this.option(\"loopItemFocus\", args.value);\r\n                if (windowUtils.hasWindow()) {\r\n                    this._cloneDuplicateItems();\r\n                    this._renderItemPositions();\r\n                    this._renderNavButtonsVisibility()\r\n                }\r\n                break;\r\n            case \"showIndicator\":\r\n                this._renderIndicator();\r\n                break;\r\n            case \"showNavButtons\":\r\n                this._renderNavButtons();\r\n                break;\r\n            case \"slideshowDelay\":\r\n                this._setupSlideShow();\r\n                break;\r\n            case \"wrapAround\":\r\n            case \"stretchImages\":\r\n                if (windowUtils.hasWindow()) {\r\n                    this._renderItemSizes();\r\n                    this._renderItemPositions();\r\n                    this._renderItemVisibility()\r\n                }\r\n                break;\r\n            case \"swipeEnabled\":\r\n            case \"indicatorEnabled\":\r\n                this._renderUserInteraction();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    goToItem: function(itemIndex, animation) {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        var itemsCount = this._itemsCount();\r\n        if (void 0 !== animation) {\r\n            this._animationOverride = animation\r\n        }\r\n        itemIndex = this._fitIndex(itemIndex);\r\n        this._deferredAnimate = new Deferred;\r\n        if (itemIndex > itemsCount - 1 || itemIndex < 0 || selectedIndex === itemIndex) {\r\n            return this._deferredAnimate.resolveWith(this).promise()\r\n        }\r\n        this.option(\"selectedIndex\", itemIndex);\r\n        return this._deferredAnimate.promise()\r\n    },\r\n    prevItem: function(animation) {\r\n        return this.goToItem(this.option(\"selectedIndex\") - 1, animation)\r\n    },\r\n    nextItem: function(animation) {\r\n        return this.goToItem(this.option(\"selectedIndex\") + 1, animation)\r\n    }\r\n});\r\nregisterComponent(\"dxGallery\", Gallery);\r\nmodule.exports = Gallery;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}