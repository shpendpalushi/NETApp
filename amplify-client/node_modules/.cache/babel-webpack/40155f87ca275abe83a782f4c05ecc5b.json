{"ast":null,"code":"/**\r\n * DevExtreme (viz/tree_map/api.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar proto = require(\"./tree_map.base\").prototype;\n\nvar nodeProto = require(\"./node\").prototype;\n\nvar _extend = require(\"../../core/utils/extend\").extend;\n\nproto._eventsMap.onNodesInitialized = {\n  name: \"nodesInitialized\"\n};\nproto._eventsMap.onNodesRendering = {\n  name: \"nodesRendering\"\n};\n\nproto._createProxyType = function () {\n  var that = this;\n  var nodes;\n  Proxy.prototype = {\n    constructor: Proxy,\n    getParent: function getParent() {\n      return nodes[this._id].parent.proxy || null;\n    },\n    getChild: function getChild(index) {\n      var _nodes = nodes[this._id].nodes;\n      return _nodes ? _nodes[index].proxy : null;\n    },\n    getChildrenCount: function getChildrenCount() {\n      var _nodes = nodes[this._id].nodes;\n      return _nodes ? _nodes.length : 0;\n    },\n    getAllChildren: function getAllChildren() {\n      var _nodes = nodes[this._id].nodes;\n      var i;\n      var ii = _nodes && _nodes.length;\n      var list = [];\n\n      for (i = 0; i < ii; ++i) {\n        list.push(_nodes[i].proxy);\n      }\n\n      return list;\n    },\n    getAllNodes: function getAllNodes() {\n      var list = [];\n      collectNodes(nodes[this._id], list);\n      return list;\n    },\n    isLeaf: function isLeaf() {\n      return !nodes[this._id].isNode();\n    },\n    isActive: function isActive() {\n      return nodes[this._id].isActive();\n    },\n    value: function value(arg) {\n      var node = nodes[this._id];\n      var result;\n\n      if (void 0 !== arg) {\n        updateValue(node, arg > 0 ? Number(arg) : 0);\n        change(node, [\"TILING\"]);\n        result = this;\n      } else {\n        result = node.value;\n      }\n\n      return result;\n    },\n    label: function label(arg) {\n      var node = nodes[this._id];\n      var result;\n\n      if (void 0 !== arg) {\n        node.customLabel = arg ? String(arg) : null;\n        change(node, [\"LABELS\"]);\n        result = this;\n      } else {\n        result = node.customLabel || node.label;\n      }\n\n      return result;\n    },\n    customize: function customize(settings) {\n      var node = nodes[this._id];\n\n      if (settings) {\n        node._custom = node._custom || {};\n\n        _extend(true, node._custom, settings);\n\n        node._partialState = node._partialLabelState = null;\n      }\n\n      change(node, [\"TILES\", \"LABELS\"]);\n      return this;\n    },\n    resetCustomization: function resetCustomization() {\n      var node = nodes[this._id];\n      node._custom = node._partialState = node._partialLabelState = null;\n      change(node, [\"TILES\", \"LABELS\"]);\n      return this;\n    }\n  };\n\n  that._extendProxyType(Proxy.prototype);\n\n  function Proxy(node) {\n    var that = this;\n    node.proxy = that;\n    that._id = node._id;\n    that.level = node.level;\n    that.index = node.index;\n    that.data = node.data;\n  }\n\n  that._handlers.beginBuildNodes = function () {\n    nodes = that._nodes;\n    new Proxy(that._root);\n  };\n\n  that._handlers.buildNode = function (node) {\n    new Proxy(node);\n  };\n\n  that._handlers.endBuildNodes = function () {\n    that._eventTrigger(\"nodesInitialized\", {\n      root: that._root.proxy\n    });\n  };\n};\n\nfunction change(node, codes) {\n  var ctx = node.ctx;\n  ctx.suspend();\n  ctx.change(codes);\n  ctx.resume();\n}\n\nfunction collectNodes(node, list) {\n  var nodes = node.nodes;\n  var i;\n  var ii = nodes && nodes.length;\n\n  for (i = 0; i < ii; ++i) {\n    list.push(nodes[i].proxy);\n    collectNodes(nodes[i], list);\n  }\n}\n\nfunction updateValue(node, value) {\n  var delta = value - node.value;\n\n  while (node) {\n    node.value += delta;\n    node = node.parent;\n  }\n}\n\nproto._extendProxyType = require(\"../../core/utils/common\").noop;\nvar _resetNodes = proto._resetNodes;\n\nproto._resetNodes = function () {\n  _resetNodes.call(this);\n\n  this._eventTrigger(\"nodesRendering\", {\n    node: this._topNode.proxy\n  });\n};\n\nvar _updateStyles = nodeProto.updateStyles;\n\nnodeProto.updateStyles = function () {\n  var that = this;\n\n  _updateStyles.call(that);\n\n  if (that._custom) {\n    that._partialState = !that.ctx.forceReset && that._partialState || that.ctx.calculateState(that._custom);\n\n    _extend(true, that.state, that._partialState);\n  }\n};\n\nvar _updateLabelStyle = nodeProto.updateLabelStyle;\n\nnodeProto.updateLabelStyle = function () {\n  var that = this;\n  var custom = that._custom;\n\n  _updateLabelStyle.call(that);\n\n  if (custom && custom.label) {\n    that._partialLabelState = !that.ctx.forceReset && that._partialLabelState || calculatePartialLabelState(that, custom.label);\n    that.labelState = _extend(true, {}, that.labelState, that._partialLabelState);\n  }\n};\n\nfunction calculatePartialLabelState(node, settings) {\n  var state = node.ctx.calculateLabelState(settings);\n\n  if (\"visible\" in settings) {\n    state.visible = !!settings.visible;\n  }\n\n  return state;\n}\n\nproto.getRootNode = function () {\n  return this._root.proxy;\n};\n\nproto.resetNodes = function () {\n  var context = this._context;\n  context.suspend();\n  context.change([\"NODES_CREATE\"]);\n  context.resume();\n  return this;\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/viz/tree_map/api.js"],"names":["proto","require","prototype","nodeProto","_extend","extend","_eventsMap","onNodesInitialized","name","onNodesRendering","_createProxyType","that","nodes","Proxy","constructor","getParent","_id","parent","proxy","getChild","index","_nodes","getChildrenCount","length","getAllChildren","i","ii","list","push","getAllNodes","collectNodes","isLeaf","isNode","isActive","value","arg","node","result","updateValue","Number","change","label","customLabel","String","customize","settings","_custom","_partialState","_partialLabelState","resetCustomization","_extendProxyType","level","data","_handlers","beginBuildNodes","_root","buildNode","endBuildNodes","_eventTrigger","root","codes","ctx","suspend","resume","delta","noop","_resetNodes","call","_topNode","_updateStyles","updateStyles","forceReset","calculateState","state","_updateLabelStyle","updateLabelStyle","custom","calculatePartialLabelState","labelState","calculateLabelState","visible","getRootNode","resetNodes","context","_context"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/tree_map/api.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar proto = require(\"./tree_map.base\").prototype;\r\nvar nodeProto = require(\"./node\").prototype;\r\nvar _extend = require(\"../../core/utils/extend\").extend;\r\nproto._eventsMap.onNodesInitialized = {\r\n    name: \"nodesInitialized\"\r\n};\r\nproto._eventsMap.onNodesRendering = {\r\n    name: \"nodesRendering\"\r\n};\r\nproto._createProxyType = function() {\r\n    var that = this;\r\n    var nodes;\r\n    Proxy.prototype = {\r\n        constructor: Proxy,\r\n        getParent: function() {\r\n            return nodes[this._id].parent.proxy || null\r\n        },\r\n        getChild: function(index) {\r\n            var _nodes = nodes[this._id].nodes;\r\n            return _nodes ? _nodes[index].proxy : null\r\n        },\r\n        getChildrenCount: function() {\r\n            var _nodes = nodes[this._id].nodes;\r\n            return _nodes ? _nodes.length : 0\r\n        },\r\n        getAllChildren: function() {\r\n            var _nodes = nodes[this._id].nodes;\r\n            var i;\r\n            var ii = _nodes && _nodes.length;\r\n            var list = [];\r\n            for (i = 0; i < ii; ++i) {\r\n                list.push(_nodes[i].proxy)\r\n            }\r\n            return list\r\n        },\r\n        getAllNodes: function() {\r\n            var list = [];\r\n            collectNodes(nodes[this._id], list);\r\n            return list\r\n        },\r\n        isLeaf: function() {\r\n            return !nodes[this._id].isNode()\r\n        },\r\n        isActive: function() {\r\n            return nodes[this._id].isActive()\r\n        },\r\n        value: function(arg) {\r\n            var node = nodes[this._id];\r\n            var result;\r\n            if (void 0 !== arg) {\r\n                updateValue(node, arg > 0 ? Number(arg) : 0);\r\n                change(node, [\"TILING\"]);\r\n                result = this\r\n            } else {\r\n                result = node.value\r\n            }\r\n            return result\r\n        },\r\n        label: function(arg) {\r\n            var node = nodes[this._id];\r\n            var result;\r\n            if (void 0 !== arg) {\r\n                node.customLabel = arg ? String(arg) : null;\r\n                change(node, [\"LABELS\"]);\r\n                result = this\r\n            } else {\r\n                result = node.customLabel || node.label\r\n            }\r\n            return result\r\n        },\r\n        customize: function(settings) {\r\n            var node = nodes[this._id];\r\n            if (settings) {\r\n                node._custom = node._custom || {};\r\n                _extend(true, node._custom, settings);\r\n                node._partialState = node._partialLabelState = null\r\n            }\r\n            change(node, [\"TILES\", \"LABELS\"]);\r\n            return this\r\n        },\r\n        resetCustomization: function() {\r\n            var node = nodes[this._id];\r\n            node._custom = node._partialState = node._partialLabelState = null;\r\n            change(node, [\"TILES\", \"LABELS\"]);\r\n            return this\r\n        }\r\n    };\r\n    that._extendProxyType(Proxy.prototype);\r\n\r\n    function Proxy(node) {\r\n        var that = this;\r\n        node.proxy = that;\r\n        that._id = node._id;\r\n        that.level = node.level;\r\n        that.index = node.index;\r\n        that.data = node.data\r\n    }\r\n    that._handlers.beginBuildNodes = function() {\r\n        nodes = that._nodes;\r\n        new Proxy(that._root)\r\n    };\r\n    that._handlers.buildNode = function(node) {\r\n        new Proxy(node)\r\n    };\r\n    that._handlers.endBuildNodes = function() {\r\n        that._eventTrigger(\"nodesInitialized\", {\r\n            root: that._root.proxy\r\n        })\r\n    }\r\n};\r\n\r\nfunction change(node, codes) {\r\n    var ctx = node.ctx;\r\n    ctx.suspend();\r\n    ctx.change(codes);\r\n    ctx.resume()\r\n}\r\n\r\nfunction collectNodes(node, list) {\r\n    var nodes = node.nodes;\r\n    var i;\r\n    var ii = nodes && nodes.length;\r\n    for (i = 0; i < ii; ++i) {\r\n        list.push(nodes[i].proxy);\r\n        collectNodes(nodes[i], list)\r\n    }\r\n}\r\n\r\nfunction updateValue(node, value) {\r\n    var delta = value - node.value;\r\n    while (node) {\r\n        node.value += delta;\r\n        node = node.parent\r\n    }\r\n}\r\nproto._extendProxyType = require(\"../../core/utils/common\").noop;\r\nvar _resetNodes = proto._resetNodes;\r\nproto._resetNodes = function() {\r\n    _resetNodes.call(this);\r\n    this._eventTrigger(\"nodesRendering\", {\r\n        node: this._topNode.proxy\r\n    })\r\n};\r\nvar _updateStyles = nodeProto.updateStyles;\r\nnodeProto.updateStyles = function() {\r\n    var that = this;\r\n    _updateStyles.call(that);\r\n    if (that._custom) {\r\n        that._partialState = !that.ctx.forceReset && that._partialState || that.ctx.calculateState(that._custom);\r\n        _extend(true, that.state, that._partialState)\r\n    }\r\n};\r\nvar _updateLabelStyle = nodeProto.updateLabelStyle;\r\nnodeProto.updateLabelStyle = function() {\r\n    var that = this;\r\n    var custom = that._custom;\r\n    _updateLabelStyle.call(that);\r\n    if (custom && custom.label) {\r\n        that._partialLabelState = !that.ctx.forceReset && that._partialLabelState || calculatePartialLabelState(that, custom.label);\r\n        that.labelState = _extend(true, {}, that.labelState, that._partialLabelState)\r\n    }\r\n};\r\n\r\nfunction calculatePartialLabelState(node, settings) {\r\n    var state = node.ctx.calculateLabelState(settings);\r\n    if (\"visible\" in settings) {\r\n        state.visible = !!settings.visible\r\n    }\r\n    return state\r\n}\r\nproto.getRootNode = function() {\r\n    return this._root.proxy\r\n};\r\nproto.resetNodes = function() {\r\n    var context = this._context;\r\n    context.suspend();\r\n    context.change([\"NODES_CREATE\"]);\r\n    context.resume();\r\n    return this\r\n};\r\n"]},"metadata":{},"sourceType":"script"}