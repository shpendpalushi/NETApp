{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/file_provider/remote.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _ajax = require(\"../../../core/utils/ajax\");\n\nvar _ajax2 = _interopRequireDefault(_ajax);\n\nvar _common = require(\"../../../core/utils/common\");\n\nvar _guid = require(\"../../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _window = require(\"../../../core/utils/window\");\n\nvar _iterator = require(\"../../../core/utils/iterator\");\n\nvar _deferred = require(\"../../../core/utils/deferred\");\n\nvar _events_engine = require(\"../../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _file_provider = require(\"./file_provider\");\n\nvar _data = require(\"../../../core/utils/data\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar window = (0, _window.getWindow)();\nvar FILE_CHUNK_BLOB_NAME = \"chunk\";\n\nvar RemoteFileProvider = function (_FileProvider) {\n  _inherits(RemoteFileProvider, _FileProvider);\n\n  function RemoteFileProvider(options) {\n    var _this;\n\n    _classCallCheck(this, RemoteFileProvider);\n\n    options = (0, _common.ensureDefined)(options, {});\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RemoteFileProvider).call(this, options));\n    _this._endpointUrl = options.endpointUrl;\n    _this._hasSubDirsGetter = (0, _data.compileGetter)(options.hasSubDirectoriesExpr || \"hasSubDirectories\");\n    return _this;\n  }\n\n  _createClass(RemoteFileProvider, [{\n    key: \"getItems\",\n    value: function value(pathInfo) {\n      var _this2 = this;\n\n      return this._getEntriesByPath(pathInfo).then(function (result) {\n        return _this2._convertDataObjectsToFileItems(result.result, pathInfo);\n      });\n    }\n  }, {\n    key: \"renameItem\",\n    value: function value(item, name) {\n      return this._executeRequest(\"Rename\", {\n        pathInfo: item.getFullPathInfo(),\n        name: name\n      });\n    }\n  }, {\n    key: \"createFolder\",\n    value: function value(parentDir, name) {\n      return this._executeRequest(\"CreateDir\", {\n        pathInfo: parentDir.getFullPathInfo(),\n        name: name\n      }).done(function () {\n        if (parentDir && !parentDir.isRoot) {\n          parentDir.hasSubDirs = true;\n        }\n      });\n    }\n  }, {\n    key: \"deleteItems\",\n    value: function value(items) {\n      var _this3 = this;\n\n      return items.map(function (item) {\n        return _this3._executeRequest(\"Remove\", {\n          pathInfo: item.getFullPathInfo()\n        });\n      });\n    }\n  }, {\n    key: \"moveItems\",\n    value: function value(items, destinationDirectory) {\n      var _this4 = this;\n\n      return items.map(function (item) {\n        return _this4._executeRequest(\"Move\", {\n          sourcePathInfo: item.getFullPathInfo(),\n          destinationPathInfo: destinationDirectory.getFullPathInfo()\n        });\n      });\n    }\n  }, {\n    key: \"copyItems\",\n    value: function value(items, destinationFolder) {\n      var _this5 = this;\n\n      return items.map(function (item) {\n        return _this5._executeRequest(\"Copy\", {\n          sourcePathInfo: item.getFullPathInfo(),\n          destinationPathInfo: destinationFolder.getFullPathInfo()\n        });\n      });\n    }\n  }, {\n    key: \"uploadFileChunk\",\n    value: function value(fileData, chunksInfo, destinationDirectory) {\n      if (0 === chunksInfo.chunkIndex) {\n        chunksInfo.customData.uploadId = new _guid2.default();\n      }\n\n      var args = {\n        destinationId: destinationDirectory.relativeName,\n        chunkMetadata: JSON.stringify({\n          UploadId: chunksInfo.customData.uploadId,\n          FileName: fileData.name,\n          Index: chunksInfo.chunkIndex,\n          TotalCount: chunksInfo.chunkCount,\n          FileSize: fileData.size\n        })\n      };\n      var formData = new window.FormData();\n      formData.append(FILE_CHUNK_BLOB_NAME, chunksInfo.chunkBlob);\n      formData.append(\"arguments\", JSON.stringify(args));\n      formData.append(\"command\", \"UploadChunk\");\n      var deferred = new _deferred.Deferred();\n\n      _ajax2.default.sendRequest({\n        url: this._endpointUrl,\n        method: \"POST\",\n        dataType: \"json\",\n        data: formData,\n        upload: {\n          onprogress: _common.noop,\n          onloadstart: _common.noop,\n          onabort: _common.noop\n        },\n        cache: false\n      }).done(function (result) {\n        !result.success && deferred.reject(result) || deferred.resolve();\n      }).fail(deferred.reject);\n\n      return deferred.promise();\n    }\n  }, {\n    key: \"abortFileUpload\",\n    value: function value(fileData, chunksInfo, destinationDirectory) {\n      return this._executeRequest(\"AbortUpload\", {\n        uploadId: chunksInfo.customData.uploadId\n      });\n    }\n  }, {\n    key: \"downloadItems\",\n    value: function value(items) {\n      var args = this._getDownloadArgs(items);\n\n      var $form = (0, _renderer2.default)(\"<form>\").css({\n        display: \"none\"\n      }).attr({\n        method: \"post\",\n        action: args.url\n      });\n      [\"command\", \"arguments\"].forEach(function (name) {\n        (0, _renderer2.default)(\"<input>\").attr({\n          type: \"hidden\",\n          name: name,\n          value: args[name]\n        }).appendTo($form);\n      });\n      $form.appendTo(\"body\");\n\n      _events_engine2.default.trigger($form, \"submit\");\n\n      setTimeout(function () {\n        return $form.remove();\n      });\n    }\n  }, {\n    key: \"getItemContent\",\n    value: function value(items) {\n      var args = this._getDownloadArgs(items);\n\n      var formData = new window.FormData();\n      formData.append(\"command\", args.command);\n      formData.append(\"arguments\", args.arguments);\n      return _ajax2.default.sendRequest({\n        url: args.url,\n        method: \"POST\",\n        responseType: \"arraybuffer\",\n        data: formData,\n        upload: {\n          onprogress: _common.noop,\n          onloadstart: _common.noop,\n          onabort: _common.noop\n        },\n        cache: false\n      });\n    }\n  }, {\n    key: \"_getDownloadArgs\",\n    value: function value(items) {\n      var pathInfoList = items.map(function (item) {\n        return item.getFullPathInfo();\n      });\n      var args = {\n        pathInfoList: pathInfoList\n      };\n      var argsStr = JSON.stringify(args);\n      return {\n        url: this._endpointUrl,\n        arguments: argsStr,\n        command: \"Download\"\n      };\n    }\n  }, {\n    key: \"_getItemsIds\",\n    value: function value(items) {\n      return items.map(function (it) {\n        return it.relativeName;\n      });\n    }\n  }, {\n    key: \"_getEntriesByPath\",\n    value: function value(pathInfo) {\n      return this._executeRequest(\"GetDirContents\", {\n        pathInfo: pathInfo\n      });\n    }\n  }, {\n    key: \"_executeRequest\",\n    value: function value(command, args) {\n      var method = \"GetDirContents\" === command ? \"GET\" : \"POST\";\n      var deferred = new _deferred.Deferred();\n\n      _ajax2.default.sendRequest({\n        url: this._getEndpointUrl(command, args),\n        method: method,\n        dataType: \"json\",\n        cache: false\n      }).then(function (result) {\n        !result.success && deferred.reject(result) || deferred.resolve(result);\n      }, function (e) {\n        return deferred.reject(e);\n      });\n\n      return deferred.promise();\n    }\n  }, {\n    key: \"_getEndpointUrl\",\n    value: function value(command, args) {\n      var queryString = this._getQueryString({\n        command: command,\n        arguments: JSON.stringify(args)\n      });\n\n      var separator = this._endpointUrl && this._endpointUrl.indexOf(\"?\") > 0 ? \"&\" : \"?\";\n      return this._endpointUrl + separator + queryString;\n    }\n  }, {\n    key: \"_getQueryString\",\n    value: function value(params) {\n      var pairs = [];\n      var keys = Object.keys(params);\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        var value = params[key];\n\n        if (void 0 === value) {\n          continue;\n        }\n\n        if (null === value) {\n          value = \"\";\n        }\n\n        if (Array.isArray(value)) {\n          this._processQueryStringArrayParam(key, value, pairs);\n        } else {\n          var pair = this._getQueryStringPair(key, value);\n\n          pairs.push(pair);\n        }\n      }\n\n      return pairs.join(\"&\");\n    }\n  }, {\n    key: \"_processQueryStringArrayParam\",\n    value: function value(key, array, pairs) {\n      var _this6 = this;\n\n      (0, _iterator.each)(array, function (_, item) {\n        var pair = _this6._getQueryStringPair(key, item);\n\n        pairs.push(pair);\n      });\n    }\n  }, {\n    key: \"_getQueryStringPair\",\n    value: function value(key, _value) {\n      return encodeURIComponent(key) + \"=\" + encodeURIComponent(_value);\n    }\n  }, {\n    key: \"_hasSubDirs\",\n    value: function value(dataObj) {\n      var hasSubDirs = this._hasSubDirsGetter(dataObj);\n\n      return \"boolean\" === typeof hasSubDirs ? hasSubDirs : true;\n    }\n  }, {\n    key: \"_getKeyExpr\",\n    value: function value(options) {\n      return options.keyExpr || \"key\";\n    }\n  }]);\n\n  return RemoteFileProvider;\n}(_file_provider.FileProvider);\n\nmodule.exports = RemoteFileProvider;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/file_manager/file_provider/remote.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_ajax","_ajax2","_common","_guid","_guid2","_window","_iterator","_deferred","_events_engine","_events_engine2","_file_provider","_data","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","window","getWindow","FILE_CHUNK_BLOB_NAME","RemoteFileProvider","_FileProvider","options","_this","ensureDefined","_endpointUrl","endpointUrl","_hasSubDirsGetter","compileGetter","hasSubDirectoriesExpr","pathInfo","_this2","_getEntriesByPath","then","result","_convertDataObjectsToFileItems","item","name","_executeRequest","getFullPathInfo","parentDir","done","isRoot","hasSubDirs","items","_this3","map","destinationDirectory","_this4","sourcePathInfo","destinationPathInfo","destinationFolder","_this5","fileData","chunksInfo","chunkIndex","customData","uploadId","default","args","destinationId","relativeName","chunkMetadata","JSON","stringify","UploadId","FileName","Index","TotalCount","chunkCount","FileSize","size","formData","FormData","append","chunkBlob","deferred","Deferred","sendRequest","url","method","dataType","data","upload","onprogress","noop","onloadstart","onabort","cache","success","reject","resolve","fail","promise","_getDownloadArgs","$form","css","display","attr","action","forEach","type","appendTo","trigger","setTimeout","remove","command","arguments","responseType","pathInfoList","argsStr","it","_getEndpointUrl","e","queryString","_getQueryString","separator","indexOf","params","pairs","keys","Array","isArray","_processQueryStringArrayParam","pair","_getQueryStringPair","push","join","array","_this6","each","_","encodeURIComponent","dataObj","keyExpr","FileProvider","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_manager/file_provider/remote.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _ajax = require(\"../../../core/utils/ajax\");\r\nvar _ajax2 = _interopRequireDefault(_ajax);\r\nvar _common = require(\"../../../core/utils/common\");\r\nvar _guid = require(\"../../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _window = require(\"../../../core/utils/window\");\r\nvar _iterator = require(\"../../../core/utils/iterator\");\r\nvar _deferred = require(\"../../../core/utils/deferred\");\r\nvar _events_engine = require(\"../../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _file_provider = require(\"./file_provider\");\r\nvar _data = require(\"../../../core/utils/data\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar window = (0, _window.getWindow)();\r\nvar FILE_CHUNK_BLOB_NAME = \"chunk\";\r\nvar RemoteFileProvider = function(_FileProvider) {\r\n    _inherits(RemoteFileProvider, _FileProvider);\r\n\r\n    function RemoteFileProvider(options) {\r\n        var _this;\r\n        _classCallCheck(this, RemoteFileProvider);\r\n        options = (0, _common.ensureDefined)(options, {});\r\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(RemoteFileProvider).call(this, options));\r\n        _this._endpointUrl = options.endpointUrl;\r\n        _this._hasSubDirsGetter = (0, _data.compileGetter)(options.hasSubDirectoriesExpr || \"hasSubDirectories\");\r\n        return _this\r\n    }\r\n    _createClass(RemoteFileProvider, [{\r\n        key: \"getItems\",\r\n        value: function(pathInfo) {\r\n            var _this2 = this;\r\n            return this._getEntriesByPath(pathInfo).then(function(result) {\r\n                return _this2._convertDataObjectsToFileItems(result.result, pathInfo)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"renameItem\",\r\n        value: function(item, name) {\r\n            return this._executeRequest(\"Rename\", {\r\n                pathInfo: item.getFullPathInfo(),\r\n                name: name\r\n            })\r\n        }\r\n    }, {\r\n        key: \"createFolder\",\r\n        value: function(parentDir, name) {\r\n            return this._executeRequest(\"CreateDir\", {\r\n                pathInfo: parentDir.getFullPathInfo(),\r\n                name: name\r\n            }).done(function() {\r\n                if (parentDir && !parentDir.isRoot) {\r\n                    parentDir.hasSubDirs = true\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"deleteItems\",\r\n        value: function(items) {\r\n            var _this3 = this;\r\n            return items.map(function(item) {\r\n                return _this3._executeRequest(\"Remove\", {\r\n                    pathInfo: item.getFullPathInfo()\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"moveItems\",\r\n        value: function(items, destinationDirectory) {\r\n            var _this4 = this;\r\n            return items.map(function(item) {\r\n                return _this4._executeRequest(\"Move\", {\r\n                    sourcePathInfo: item.getFullPathInfo(),\r\n                    destinationPathInfo: destinationDirectory.getFullPathInfo()\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"copyItems\",\r\n        value: function(items, destinationFolder) {\r\n            var _this5 = this;\r\n            return items.map(function(item) {\r\n                return _this5._executeRequest(\"Copy\", {\r\n                    sourcePathInfo: item.getFullPathInfo(),\r\n                    destinationPathInfo: destinationFolder.getFullPathInfo()\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"uploadFileChunk\",\r\n        value: function(fileData, chunksInfo, destinationDirectory) {\r\n            if (0 === chunksInfo.chunkIndex) {\r\n                chunksInfo.customData.uploadId = new _guid2.default\r\n            }\r\n            var args = {\r\n                destinationId: destinationDirectory.relativeName,\r\n                chunkMetadata: JSON.stringify({\r\n                    UploadId: chunksInfo.customData.uploadId,\r\n                    FileName: fileData.name,\r\n                    Index: chunksInfo.chunkIndex,\r\n                    TotalCount: chunksInfo.chunkCount,\r\n                    FileSize: fileData.size\r\n                })\r\n            };\r\n            var formData = new window.FormData;\r\n            formData.append(FILE_CHUNK_BLOB_NAME, chunksInfo.chunkBlob);\r\n            formData.append(\"arguments\", JSON.stringify(args));\r\n            formData.append(\"command\", \"UploadChunk\");\r\n            var deferred = new _deferred.Deferred;\r\n            _ajax2.default.sendRequest({\r\n                url: this._endpointUrl,\r\n                method: \"POST\",\r\n                dataType: \"json\",\r\n                data: formData,\r\n                upload: {\r\n                    onprogress: _common.noop,\r\n                    onloadstart: _common.noop,\r\n                    onabort: _common.noop\r\n                },\r\n                cache: false\r\n            }).done(function(result) {\r\n                !result.success && deferred.reject(result) || deferred.resolve()\r\n            }).fail(deferred.reject);\r\n            return deferred.promise()\r\n        }\r\n    }, {\r\n        key: \"abortFileUpload\",\r\n        value: function(fileData, chunksInfo, destinationDirectory) {\r\n            return this._executeRequest(\"AbortUpload\", {\r\n                uploadId: chunksInfo.customData.uploadId\r\n            })\r\n        }\r\n    }, {\r\n        key: \"downloadItems\",\r\n        value: function(items) {\r\n            var args = this._getDownloadArgs(items);\r\n            var $form = (0, _renderer2.default)(\"<form>\").css({\r\n                display: \"none\"\r\n            }).attr({\r\n                method: \"post\",\r\n                action: args.url\r\n            });\r\n            [\"command\", \"arguments\"].forEach(function(name) {\r\n                (0, _renderer2.default)(\"<input>\").attr({\r\n                    type: \"hidden\",\r\n                    name: name,\r\n                    value: args[name]\r\n                }).appendTo($form)\r\n            });\r\n            $form.appendTo(\"body\");\r\n            _events_engine2.default.trigger($form, \"submit\");\r\n            setTimeout(function() {\r\n                return $form.remove()\r\n            })\r\n        }\r\n    }, {\r\n        key: \"getItemContent\",\r\n        value: function(items) {\r\n            var args = this._getDownloadArgs(items);\r\n            var formData = new window.FormData;\r\n            formData.append(\"command\", args.command);\r\n            formData.append(\"arguments\", args.arguments);\r\n            return _ajax2.default.sendRequest({\r\n                url: args.url,\r\n                method: \"POST\",\r\n                responseType: \"arraybuffer\",\r\n                data: formData,\r\n                upload: {\r\n                    onprogress: _common.noop,\r\n                    onloadstart: _common.noop,\r\n                    onabort: _common.noop\r\n                },\r\n                cache: false\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getDownloadArgs\",\r\n        value: function(items) {\r\n            var pathInfoList = items.map(function(item) {\r\n                return item.getFullPathInfo()\r\n            });\r\n            var args = {\r\n                pathInfoList: pathInfoList\r\n            };\r\n            var argsStr = JSON.stringify(args);\r\n            return {\r\n                url: this._endpointUrl,\r\n                arguments: argsStr,\r\n                command: \"Download\"\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getItemsIds\",\r\n        value: function(items) {\r\n            return items.map(function(it) {\r\n                return it.relativeName\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getEntriesByPath\",\r\n        value: function(pathInfo) {\r\n            return this._executeRequest(\"GetDirContents\", {\r\n                pathInfo: pathInfo\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_executeRequest\",\r\n        value: function(command, args) {\r\n            var method = \"GetDirContents\" === command ? \"GET\" : \"POST\";\r\n            var deferred = new _deferred.Deferred;\r\n            _ajax2.default.sendRequest({\r\n                url: this._getEndpointUrl(command, args),\r\n                method: method,\r\n                dataType: \"json\",\r\n                cache: false\r\n            }).then(function(result) {\r\n                !result.success && deferred.reject(result) || deferred.resolve(result)\r\n            }, function(e) {\r\n                return deferred.reject(e)\r\n            });\r\n            return deferred.promise()\r\n        }\r\n    }, {\r\n        key: \"_getEndpointUrl\",\r\n        value: function(command, args) {\r\n            var queryString = this._getQueryString({\r\n                command: command,\r\n                arguments: JSON.stringify(args)\r\n            });\r\n            var separator = this._endpointUrl && this._endpointUrl.indexOf(\"?\") > 0 ? \"&\" : \"?\";\r\n            return this._endpointUrl + separator + queryString\r\n        }\r\n    }, {\r\n        key: \"_getQueryString\",\r\n        value: function(params) {\r\n            var pairs = [];\r\n            var keys = Object.keys(params);\r\n            for (var i = 0; i < keys.length; i++) {\r\n                var key = keys[i];\r\n                var value = params[key];\r\n                if (void 0 === value) {\r\n                    continue\r\n                }\r\n                if (null === value) {\r\n                    value = \"\"\r\n                }\r\n                if (Array.isArray(value)) {\r\n                    this._processQueryStringArrayParam(key, value, pairs)\r\n                } else {\r\n                    var pair = this._getQueryStringPair(key, value);\r\n                    pairs.push(pair)\r\n                }\r\n            }\r\n            return pairs.join(\"&\")\r\n        }\r\n    }, {\r\n        key: \"_processQueryStringArrayParam\",\r\n        value: function(key, array, pairs) {\r\n            var _this6 = this;\r\n            (0, _iterator.each)(array, function(_, item) {\r\n                var pair = _this6._getQueryStringPair(key, item);\r\n                pairs.push(pair)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getQueryStringPair\",\r\n        value: function(key, value) {\r\n            return encodeURIComponent(key) + \"=\" + encodeURIComponent(value)\r\n        }\r\n    }, {\r\n        key: \"_hasSubDirs\",\r\n        value: function(dataObj) {\r\n            var hasSubDirs = this._hasSubDirsGetter(dataObj);\r\n            return \"boolean\" === typeof hasSubDirs ? hasSubDirs : true\r\n        }\r\n    }, {\r\n        key: \"_getKeyExpr\",\r\n        value: function(options) {\r\n            return options.keyExpr || \"key\"\r\n        }\r\n    }]);\r\n    return RemoteFileProvider\r\n}(_file_provider.FileProvider);\r\nmodule.exports = RemoteFileProvider;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}