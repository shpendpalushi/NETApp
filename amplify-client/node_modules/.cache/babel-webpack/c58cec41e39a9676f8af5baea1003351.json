{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/file_provider/file_provider.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _data = require(\"../../../core/utils/data\");\n\nvar _uiFile_manager = require(\"../ui.file_manager.utils\");\n\nvar _common = require(\"../../../core/utils/common\");\n\nvar _date_serialization = require(\"../../../core/utils/date_serialization\");\n\nvar _iterator = require(\"../../../core/utils/iterator\");\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || \"[object Arguments]\" === Object.prototype.toString.call(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar DEFAULT_FILE_UPLOAD_CHUNK_SIZE = 2e5;\n\nvar FileProvider = function () {\n  function FileProvider(options) {\n    _classCallCheck(this, FileProvider);\n\n    options = (0, _common.ensureDefined)(options, {});\n    this._keyGetter = (0, _data.compileGetter)(this._getKeyExpr(options));\n    this._nameGetter = (0, _data.compileGetter)(this._getNameExpr(options));\n    this._isDirGetter = (0, _data.compileGetter)(this._getIsDirExpr(options));\n    this._sizeGetter = (0, _data.compileGetter)(options.sizeExpr || \"size\");\n    this._dateModifiedGetter = (0, _data.compileGetter)(options.dateModifiedExpr || \"dateModified\");\n    this._thumbnailGetter = (0, _data.compileGetter)(options.thumbnailExpr || \"thumbnail\");\n  }\n\n  _createClass(FileProvider, [{\n    key: \"getItems\",\n    value: function value(pathInfo) {\n      return [];\n    }\n  }, {\n    key: \"renameItem\",\n    value: function value(item, name) {}\n  }, {\n    key: \"createFolder\",\n    value: function value(parentFolder, name) {}\n  }, {\n    key: \"deleteItems\",\n    value: function value(items) {}\n  }, {\n    key: \"moveItems\",\n    value: function value(items, destinationFolder) {}\n  }, {\n    key: \"copyItems\",\n    value: function value(items, destinationFolder) {}\n  }, {\n    key: \"uploadFileChunk\",\n    value: function value(fileData, chunksInfo, destinationDirectory) {}\n  }, {\n    key: \"abortFileUpload\",\n    value: function value(fileData, chunksInfo, destinationDirectory) {}\n  }, {\n    key: \"downloadItems\",\n    value: function value(items) {}\n  }, {\n    key: \"getItemContent\",\n    value: function value(items) {}\n  }, {\n    key: \"getFileUploadChunkSize\",\n    value: function value() {\n      return DEFAULT_FILE_UPLOAD_CHUNK_SIZE;\n    }\n  }, {\n    key: \"_getItemsByType\",\n    value: function value(path, folders) {\n      return this.getItems(path).filter(function (item) {\n        return item.isDirectory === folders;\n      });\n    }\n  }, {\n    key: \"_convertDataObjectsToFileItems\",\n    value: function value(entries, pathInfo) {\n      var _this = this;\n\n      var result = [];\n      (0, _iterator.each)(entries, function (_, entry) {\n        var fileItem = _this._createFileItem(entry, pathInfo);\n\n        result.push(fileItem);\n      });\n      return result;\n    }\n  }, {\n    key: \"_createFileItem\",\n    value: function value(dataObj, pathInfo) {\n      var fileItem = new FileManagerItem(pathInfo, this._nameGetter(dataObj), !!this._isDirGetter(dataObj));\n      fileItem.size = this._sizeGetter(dataObj);\n\n      if (void 0 === fileItem.size) {\n        fileItem.size = 0;\n      }\n\n      fileItem.dateModified = (0, _date_serialization.deserializeDate)(this._dateModifiedGetter(dataObj));\n\n      if (void 0 === fileItem.dateModified) {\n        fileItem.dateModified = new Date();\n      }\n\n      if (fileItem.isDirectory) {\n        fileItem.hasSubDirs = this._hasSubDirs(dataObj);\n      }\n\n      fileItem.key = this._keyGetter(dataObj);\n\n      if (!fileItem.key) {\n        fileItem.key = fileItem.relativeName;\n      }\n\n      fileItem.thumbnail = this._thumbnailGetter(dataObj) || \"\";\n      fileItem.dataItem = dataObj;\n      return fileItem;\n    }\n  }, {\n    key: \"_hasSubDirs\",\n    value: function value(dataObj) {\n      return true;\n    }\n  }, {\n    key: \"_getKeyExpr\",\n    value: function value(options) {\n      return options.keyExpr || this._defaultKeyExpr;\n    }\n  }, {\n    key: \"_defaultKeyExpr\",\n    value: function value(fileItem) {\n      if (2 === arguments.length) {\n        fileItem.__KEY__ = arguments[1];\n        return;\n      }\n\n      return Object.prototype.hasOwnProperty.call(fileItem, \"__KEY__\") ? fileItem.__KEY__ : null;\n    }\n  }, {\n    key: \"_getNameExpr\",\n    value: function value(options) {\n      return options.nameExpr || \"name\";\n    }\n  }, {\n    key: \"_getIsDirExpr\",\n    value: function value(options) {\n      return options.isDirectoryExpr || \"isDirectory\";\n    }\n  }]);\n\n  return FileProvider;\n}();\n\nvar FileManagerItem = function () {\n  function FileManagerItem(pathInfo, name, isDirectory) {\n    _classCallCheck(this, FileManagerItem);\n\n    this.name = name;\n    this.pathInfo = pathInfo && _toConsumableArray(pathInfo) || [];\n    this.parentPath = this._getPathByPathInfo(this.pathInfo);\n    this.key = this.relativeName = (0, _uiFile_manager.pathCombine)(this.parentPath, name);\n    this.isDirectory = isDirectory || false;\n    this.isRoot = false;\n    this.size = 0;\n    this.dateModified = new Date();\n    this.thumbnail = \"\";\n    this.tooltipText = \"\";\n  }\n\n  _createClass(FileManagerItem, [{\n    key: \"getFullPathInfo\",\n    value: function value() {\n      var pathInfo = _toConsumableArray(this.pathInfo);\n\n      !this.isRoot && pathInfo.push({\n        key: this.key,\n        name: this.name\n      });\n      return pathInfo;\n    }\n  }, {\n    key: \"getExtension\",\n    value: function value() {\n      return this.isDirectory ? \"\" : (0, _uiFile_manager.getFileExtension)(this.name);\n    }\n  }, {\n    key: \"equals\",\n    value: function value(item) {\n      return item && this.key === item.key;\n    }\n  }, {\n    key: \"createClone\",\n    value: function value() {\n      var result = new FileManagerItem(this.pathInfo, this.name, this.isDirectory);\n      result.key = this.key;\n      result.size = this.size;\n      result.dateModified = this.dateModified;\n      result.thumbnail = this.thumbnail;\n      result.tooltipText = this.tooltipText;\n      result.hasSubDirs = this.hasSubDirs;\n      result.dataItem = this.dataItem;\n      return result;\n    }\n  }, {\n    key: \"_getPathByPathInfo\",\n    value: function value(pathInfo) {\n      return pathInfo.map(function (info) {\n        return info.name;\n      }).join(_uiFile_manager.PATH_SEPARATOR);\n    }\n  }]);\n\n  return FileManagerItem;\n}();\n\nvar FileManagerRootItem = function (_FileManagerItem) {\n  _inherits(FileManagerRootItem, _FileManagerItem);\n\n  function FileManagerRootItem() {\n    var _this2;\n\n    _classCallCheck(this, FileManagerRootItem);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(FileManagerRootItem).call(this, null, \"Files\", true));\n    _this2.key = \"__dxfmroot_394CED1B-58CF-4925-A5F8-042BC0822B31_51558CB8-C170-4655-A9E0-C454ED8EA2C1\";\n    _this2.relativeName = \"\";\n    _this2.isRoot = true;\n    return _this2;\n  }\n\n  return FileManagerRootItem;\n}(FileManagerItem);\n\nmodule.exports.FileProvider = FileProvider;\nmodule.exports.FileManagerItem = FileManagerItem;\nmodule.exports.FileManagerRootItem = FileManagerRootItem;","map":null,"metadata":{},"sourceType":"script"}