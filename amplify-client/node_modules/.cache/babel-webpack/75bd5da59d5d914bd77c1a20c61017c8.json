{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.editing.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _string = require(\"../../core/utils/string\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _ui = require(\"../widget/ui.widget\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _uiFile_managerDialog = require(\"./ui.file_manager.dialog.name_editor\");\n\nvar _uiFile_managerDialog2 = _interopRequireDefault(_uiFile_managerDialog);\n\nvar _uiFile_managerDialog3 = require(\"./ui.file_manager.dialog.folder_chooser\");\n\nvar _uiFile_managerDialog4 = _interopRequireDefault(_uiFile_managerDialog3);\n\nvar _uiFile_manager = require(\"./ui.file_manager.file_uploader\");\n\nvar _uiFile_manager2 = _interopRequireDefault(_uiFile_manager);\n\nvar _uiFile_manager3 = require(\"./ui.file_manager.messages\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || \"[object Arguments]\" === Object.prototype.toString.call(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar FileManagerEditingControl = function (_Widget) {\n  _inherits(FileManagerEditingControl, _Widget);\n\n  function FileManagerEditingControl() {\n    _classCallCheck(this, FileManagerEditingControl);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FileManagerEditingControl).apply(this, arguments));\n  }\n\n  _createClass(FileManagerEditingControl, [{\n    key: \"_initMarkup\",\n    value: function value() {\n      _get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_initMarkup\", this).call(this);\n\n      this._initActions();\n\n      this._controller = this.option(\"controller\");\n\n      this._controller.on(\"EditActionStarting\", this._onEditActionStarting.bind(this));\n\n      this._controller.on(\"EditActionResultAcquired\", this._onEditActionResultAcquired.bind(this));\n\n      this._controller.on(\"EditActionItemError\", this._onEditActionItemError.bind(this));\n\n      this._controller.on(\"EditActionError\", this._onEditActionError.bind(this));\n\n      this._controller.on(\"CompleteEditActionItem\", this._onCompleteEditActionItem.bind(this));\n\n      this._controller.on(\"CompleteEditAction\", this._onCompleteEditAction.bind(this));\n\n      this._model = this.option(\"model\");\n      this._uploadOperationInfoMap = {};\n      this._renameItemDialog = this._createEnterNameDialog(_message2.default.format(\"dxFileManager-dialogRenameItemTitle\"), _message2.default.format(\"dxFileManager-dialogRenameItemButtonText\"));\n      this._createFolderDialog = this._createEnterNameDialog(_message2.default.format(\"dxFileManager-dialogCreateDirectoryTitle\"), _message2.default.format(\"dxFileManager-dialogCreateDirectoryButtonText\"));\n      var $chooseFolderDialog = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n      this._chooseFolderDialog = this._createComponent($chooseFolderDialog, _uiFile_managerDialog4.default, {\n        provider: this._controller._fileProvider,\n        getDirectories: this._controller.getDirectories.bind(this._controller),\n        getCurrentDirectory: this._controller.getCurrentDirectory.bind(this._controller),\n        onClosed: this._onDialogClosed.bind(this)\n      });\n      this._confirmationDialog = this._createConfirmationDialog();\n      this._fileUploader = this._createFileUploader();\n\n      this._createMetadataMap();\n    }\n  }, {\n    key: \"_initNotificationControl\",\n    value: function value(notificationControl) {\n      var _this = this;\n\n      this._notificationControl = notificationControl;\n\n      this._notificationControl.option({\n        onOperationCanceled: function onOperationCanceled(_ref) {\n          var info = _ref.info;\n          return _this._onCancelUploadSession(info);\n        },\n        onOperationItemCanceled: function onOperationItemCanceled(_ref2) {\n          var item = _ref2.item,\n              itemIndex = _ref2.itemIndex;\n          return _this._onCancelFileUpload(item, itemIndex);\n        }\n      });\n    }\n  }, {\n    key: \"_getFileUploaderComponent\",\n    value: function value() {\n      return _uiFile_manager2.default;\n    }\n  }, {\n    key: \"_createFileUploader\",\n    value: function value() {\n      var _this2 = this;\n\n      var $fileUploader = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n      return this._createComponent($fileUploader, this._getFileUploaderComponent(), {\n        getController: this._getFileUploaderController.bind(this),\n        onUploadSessionStarted: function onUploadSessionStarted(e) {\n          return _this2._onUploadSessionStarted(e);\n        },\n        onUploadProgress: function onUploadProgress(e) {\n          return _this2._onUploadProgress(e);\n        }\n      });\n    }\n  }, {\n    key: \"_getFileUploaderController\",\n    value: function value() {\n      var _this3 = this;\n\n      var uploadDirectory = this._uploadDirectoryInfo && this._uploadDirectoryInfo.fileItem;\n      return {\n        chunkSize: this._controller.getFileUploadChunkSize(),\n        uploadFileChunk: function uploadFileChunk(fileData, chunksInfo) {\n          return _this3._controller.uploadFileChunk(fileData, chunksInfo, uploadDirectory);\n        },\n        abortFileUpload: function abortFileUpload(fileData, chunksInfo) {\n          return _this3._controller.abortFileUpload(fileData, chunksInfo, uploadDirectory);\n        }\n      };\n    }\n  }, {\n    key: \"_createEnterNameDialog\",\n    value: function value(title, buttonText) {\n      var $dialog = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n      return this._createComponent($dialog, _uiFile_managerDialog2.default, {\n        title: title,\n        buttonText: buttonText,\n        onClosed: this._onDialogClosed.bind(this)\n      });\n    }\n  }, {\n    key: \"_createConfirmationDialog\",\n    value: function value() {\n      var _this4 = this;\n\n      return {\n        show: function show() {\n          setTimeout(function () {\n            _this4._onDialogClosed({\n              dialogResult: {}\n            });\n          });\n        }\n      };\n    }\n  }, {\n    key: \"_createMetadataMap\",\n    value: function value() {\n      var _this5 = this;\n\n      this._metadataMap = {\n        create: {\n          action: function action(arg) {\n            return _this5._tryCreate(arg);\n          },\n          affectsAllItems: true,\n          singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingCreateSingleItemProcessingMessage\"),\n          singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingCreateSingleItemSuccessMessage\"),\n          singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingCreateSingleItemErrorMessage\"),\n          commonErrorMessage: _message2.default.format(\"dxFileManager-editingCreateCommonErrorMessage\")\n        },\n        rename: {\n          action: function action(arg) {\n            return _this5._tryRename(arg);\n          },\n          singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingRenameSingleItemProcessingMessage\"),\n          singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingRenameSingleItemSuccessMessage\"),\n          singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingRenameSingleItemErrorMessage\"),\n          commonErrorMessage: _message2.default.format(\"dxFileManager-editingRenameCommonErrorMessage\")\n        },\n        \"delete\": {\n          action: function action(arg) {\n            return _this5._tryDelete(arg);\n          },\n          singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingDeleteSingleItemProcessingMessage\"),\n          multipleItemsProcessingMessage: _message2.default.format(\"dxFileManager-editingDeleteMultipleItemsProcessingMessage\"),\n          singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingDeleteSingleItemSuccessMessage\"),\n          multipleItemsSuccessMessage: _message2.default.format(\"dxFileManager-editingDeleteMultipleItemsSuccessMessage\"),\n          singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingDeleteSingleItemErrorMessage\"),\n          multipleItemsErrorMessage: _message2.default.format(\"dxFileManager-editingDeleteMultipleItemsErrorMessage\"),\n          commonErrorMessage: _message2.default.format(\"dxFileManager-editingDeleteCommonErrorMessage\")\n        },\n        move: {\n          action: function action(arg) {\n            return _this5._tryMove(arg);\n          },\n          singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingMoveSingleItemProcessingMessage\"),\n          multipleItemsProcessingMessage: _message2.default.format(\"dxFileManager-editingMoveMultipleItemsProcessingMessage\"),\n          singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingMoveSingleItemSuccessMessage\"),\n          multipleItemsSuccessMessage: _message2.default.format(\"dxFileManager-editingMoveMultipleItemsSuccessMessage\"),\n          singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingMoveSingleItemErrorMessage\"),\n          multipleItemsErrorMessage: _message2.default.format(\"dxFileManager-editingMoveMultipleItemsErrorMessage\"),\n          commonErrorMessage: _message2.default.format(\"dxFileManager-editingMoveCommonErrorMessage\")\n        },\n        copy: {\n          action: function action(arg) {\n            return _this5._tryCopy(arg);\n          },\n          singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingCopySingleItemProcessingMessage\"),\n          multipleItemsProcessingMessage: _message2.default.format(\"dxFileManager-editingCopyMultipleItemsProcessingMessage\"),\n          singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingCopySingleItemSuccessMessage\"),\n          multipleItemsSuccessMessage: _message2.default.format(\"dxFileManager-editingCopyMultipleItemsSuccessMessage\"),\n          singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingCopySingleItemErrorMessage\"),\n          multipleItemsErrorMessage: _message2.default.format(\"dxFileManager-editingCopyMultipleItemsErrorMessage\"),\n          commonErrorMessage: _message2.default.format(\"dxFileManager-editingCopyCommonErrorMessage\")\n        },\n        upload: {\n          action: function action(arg) {\n            return _this5._tryUpload(arg);\n          },\n          allowCancel: true,\n          allowItemProgress: true,\n          singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingUploadSingleItemProcessingMessage\"),\n          multipleItemsProcessingMessage: _message2.default.format(\"dxFileManager-editingUploadMultipleItemsProcessingMessage\"),\n          singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingUploadSingleItemSuccessMessage\"),\n          multipleItemsSuccessMessage: _message2.default.format(\"dxFileManager-editingUploadMultipleItemsSuccessMessage\"),\n          singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingUploadSingleItemErrorMessage\"),\n          multipleItemsErrorMessage: _message2.default.format(\"dxFileManager-editingUploadMultipleItemsErrorMessage\"),\n          canceledMessage: _message2.default.format(\"dxFileManager-editingUploadCanceledMessage\")\n        },\n        download: {\n          action: function action(arg) {\n            return _this5._download(arg);\n          }\n        },\n        getItemContent: {\n          action: function action(arg) {\n            return _this5._getItemContent(arg);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"getCommandActions\",\n    value: function value() {\n      var _this6 = this;\n\n      var result = {};\n      (0, _iterator.each)(this._metadataMap, function (name) {\n        if (Object.prototype.hasOwnProperty.call(_this6._metadataMap, name)) {\n          result[name] = function (arg) {\n            return _this6._executeAction(name, arg);\n          };\n        }\n      });\n      return result;\n    }\n  }, {\n    key: \"_executeAction\",\n    value: function value(actionName, arg) {\n      var actionMetadata = this._metadataMap[actionName];\n      return actionMetadata ? actionMetadata.action(arg) : null;\n    }\n  }, {\n    key: \"_onCancelUploadSession\",\n    value: function value(info) {\n      this._fileUploader.cancelUpload(info.uploadSessionId);\n    }\n  }, {\n    key: \"_onCancelFileUpload\",\n    value: function value(item, itemIndex) {\n      this._fileUploader.cancelFileUpload(item.info.uploadSessionId, itemIndex);\n    }\n  }, {\n    key: \"_onUploadProgress\",\n    value: function value(_ref3) {\n      var sessionId = _ref3.sessionId,\n          fileIndex = _ref3.fileIndex,\n          commonValue = _ref3.commonValue,\n          fileValue = _ref3.fileValue;\n      var operationInfo = this._uploadOperationInfoMap[sessionId];\n\n      this._notificationControl.updateOperationItemProgress(operationInfo, fileIndex, 100 * fileValue, 100 * commonValue);\n    }\n  }, {\n    key: \"_onUploadSessionStarted\",\n    value: function value(_ref4) {\n      var sessionInfo = _ref4.sessionInfo;\n\n      this._controller.processUploadSession(sessionInfo, this._uploadDirectoryInfo);\n    }\n  }, {\n    key: \"_onEditActionStarting\",\n    value: function value(actionInfo) {\n      var actionMetadata = this._metadataMap[actionInfo.name];\n      var context = new FileManagerActionContext(actionMetadata, actionInfo.itemInfos, actionInfo.directory);\n\n      var operationInfo = this._notificationControl.addOperation(context.processingMessage, actionMetadata.allowCancel, !actionMetadata.allowItemProgress);\n\n      (0, _extend.extend)(actionInfo.customData, {\n        context: context,\n        operationInfo: operationInfo\n      });\n\n      if (\"upload\" === actionInfo.name) {\n        var sessionId = actionInfo.customData.sessionInfo.sessionId;\n        operationInfo.uploadSessionId = sessionId;\n        this._uploadOperationInfoMap[sessionId] = operationInfo;\n      }\n    }\n  }, {\n    key: \"_onEditActionResultAcquired\",\n    value: function value(actionInfo) {\n      var _this7 = this;\n\n      var _actionInfo$customDat = actionInfo.customData,\n          context = _actionInfo$customDat.context,\n          operationInfo = _actionInfo$customDat.operationInfo;\n      context.singleRequest = actionInfo.singleRequest;\n\n      if (!context.singleRequest) {\n        var details = context.itemInfos.map(function (itemInfo) {\n          return _this7._getItemProgressDisplayInfo(itemInfo);\n        });\n\n        this._notificationControl.addOperationDetails(operationInfo, details, context.actionMetadata.allowCancel);\n      }\n    }\n  }, {\n    key: \"_onEditActionError\",\n    value: function value(actionInfo, error) {\n      var _actionInfo$customDat2 = actionInfo.customData,\n          context = _actionInfo$customDat2.context,\n          operationInfo = _actionInfo$customDat2.operationInfo;\n      context.singleRequest = actionInfo.singleRequest;\n\n      this._handleActionError(operationInfo, context, error);\n\n      this._completeAction(operationInfo, context);\n    }\n  }, {\n    key: \"_onEditActionItemError\",\n    value: function value(actionInfo, info) {\n      var _actionInfo$customDat3 = actionInfo.customData,\n          context = _actionInfo$customDat3.context,\n          operationInfo = _actionInfo$customDat3.operationInfo;\n\n      this._handleActionError(operationInfo, context, info);\n    }\n  }, {\n    key: \"_onCompleteEditActionItem\",\n    value: function value(actionInfo, info) {\n      var _actionInfo$customDat4 = actionInfo.customData,\n          context = _actionInfo$customDat4.context,\n          operationInfo = _actionInfo$customDat4.operationInfo;\n\n      if (!info.result || !info.result.canceled) {\n        context.completeOperationItem(info.index);\n\n        if (!context.singleRequest) {\n          this._notificationControl.completeOperationItem(operationInfo, info.index, context.commonProgress);\n        }\n      }\n    }\n  }, {\n    key: \"_onCompleteEditAction\",\n    value: function value(actionInfo) {\n      var _actionInfo$customDat5 = actionInfo.customData,\n          context = _actionInfo$customDat5.context,\n          operationInfo = _actionInfo$customDat5.operationInfo;\n\n      this._completeAction(operationInfo, context);\n\n      if (\"upload\" === actionInfo.name) {\n        delete this._uploadOperationInfoMap[actionInfo.customData.sessionInfo.sessionId];\n      }\n    }\n  }, {\n    key: \"_tryCreate\",\n    value: function value(parentDirectories) {\n      var _this8 = this;\n\n      var parentDirectoryInfo = parentDirectories && parentDirectories[0] || this._getCurrentDirectory();\n\n      var newDirName = _message2.default.format(\"dxFileManager-newDirectoryName\");\n\n      return this._showDialog(this._createFolderDialog, newDirName).then(function (_ref5) {\n        var name = _ref5.name;\n        return _this8._controller.createDirectory(parentDirectoryInfo, name);\n      });\n    }\n  }, {\n    key: \"_tryRename\",\n    value: function value(itemInfos) {\n      var _this9 = this;\n\n      var itemInfo = itemInfos && itemInfos[0] || this._model.getMultipleSelectedItems()[0];\n\n      return this._showDialog(this._renameItemDialog, itemInfo.fileItem.name).then(function (_ref6) {\n        var name = _ref6.name;\n        return _this9._controller.renameItem(itemInfo, name);\n      });\n    }\n  }, {\n    key: \"_tryDelete\",\n    value: function value(itemInfos) {\n      var _this10 = this;\n\n      itemInfos = itemInfos || this._model.getMultipleSelectedItems();\n      return this._showDialog(this._confirmationDialog).then(function () {\n        return _this10._controller.deleteItems(itemInfos);\n      });\n    }\n  }, {\n    key: \"_tryMove\",\n    value: function value(itemInfos) {\n      var _this11 = this;\n\n      itemInfos = itemInfos || this._model.getMultipleSelectedItems();\n      return this._showDialog(this._chooseFolderDialog).then(function (_ref7) {\n        var folder = _ref7.folder;\n        return _this11._controller.moveItems(itemInfos, folder);\n      });\n    }\n  }, {\n    key: \"_tryCopy\",\n    value: function value(itemInfos) {\n      var _this12 = this;\n\n      itemInfos = itemInfos || this._model.getMultipleSelectedItems();\n      return this._showDialog(this._chooseFolderDialog).then(function (_ref8) {\n        var folder = _ref8.folder;\n        return _this12._controller.copyItems(itemInfos, folder);\n      });\n    }\n  }, {\n    key: \"_tryUpload\",\n    value: function value(destinationFolder) {\n      this._uploadDirectoryInfo = destinationFolder && destinationFolder[0] || this._getCurrentDirectory();\n\n      this._fileUploader.tryUpload();\n    }\n  }, {\n    key: \"_download\",\n    value: function value(itemInfos) {\n      itemInfos = itemInfos || this._model.getMultipleSelectedItems();\n      return this._controller.downloadItems(itemInfos);\n    }\n  }, {\n    key: \"_getItemContent\",\n    value: function value(itemInfos) {\n      itemInfos = itemInfos || this._model.getMultipleSelectedItems();\n      return this._controller.getItemContent(itemInfos);\n    }\n  }, {\n    key: \"_completeAction\",\n    value: function value(operationInfo, context) {\n      this._notificationControl.completeOperation(operationInfo, context.completionMessage, !context.success, context.statusText);\n\n      if (context.hasModifiedItems()) {\n        this._raiseOnSuccess(context.onlyFiles);\n      }\n    }\n  }, {\n    key: \"_handleActionError\",\n    value: function value(operationInfo, context, errorInfo) {\n      operationInfo.hasError = true;\n\n      if (context.singleRequest) {\n        this._handleSingleRequestActionError(operationInfo, context, errorInfo);\n      } else {\n        this._handleMultipleRequestActionError(operationInfo, context, errorInfo);\n      }\n    }\n  }, {\n    key: \"_handleSingleRequestActionError\",\n    value: function value(operationInfo, context, errorInfo) {\n      var itemInfo = context.getItemForSingleRequestError();\n\n      var errorText = this._getErrorText(errorInfo, itemInfo);\n\n      context.processSingleRequestError(errorText);\n\n      var operationErrorInfo = this._getOperationErrorInfo(context);\n\n      this._notificationControl.completeSingleOperationWithError(operationInfo, operationErrorInfo);\n\n      if (context.multipleItems) {\n        this._raiseOnSuccess(context.onlyFiles);\n      }\n    }\n  }, {\n    key: \"_handleMultipleRequestActionError\",\n    value: function value(operationInfo, context, errorInfo) {\n      var itemInfo = context.getItemForMultipleRequestError(errorInfo.index);\n\n      var errorText = this._getErrorText(errorInfo, itemInfo);\n\n      context.processMultipleRequestError(errorInfo.index, errorText);\n\n      var operationErrorInfo = this._getOperationErrorInfo(context);\n\n      this._notificationControl.addOperationDetailsError(operationInfo, operationErrorInfo);\n    }\n  }, {\n    key: \"_getOperationErrorInfo\",\n    value: function value(context) {\n      var detailError = context.errorState.currentDetailError;\n      return {\n        commonErrorText: context.errorState.commonErrorText,\n        item: detailError.itemInfo ? this._getItemProgressDisplayInfo(detailError.itemInfo) : null,\n        itemIndex: detailError.itemIndex,\n        detailErrorText: detailError.errorText\n      };\n    }\n  }, {\n    key: \"_getErrorText\",\n    value: function value(errorInfo, itemInfo) {\n      var itemName = itemInfo ? itemInfo.fileItem.name : null;\n      return _uiFile_manager3.FileManagerMessages.get(errorInfo.errorId, itemName);\n    }\n  }, {\n    key: \"_getItemProgressDisplayInfo\",\n    value: function value(itemInfo) {\n      return {\n        commonText: itemInfo.fileItem.name,\n        imageUrl: this._getItemThumbnail(itemInfo)\n      };\n    }\n  }, {\n    key: \"_showDialog\",\n    value: function value(dialog, dialogArgument) {\n      this._dialogDeferred = new _deferred.Deferred();\n      dialog.show(dialogArgument);\n      return this._dialogDeferred.promise();\n    }\n  }, {\n    key: \"_onDialogClosed\",\n    value: function value(e) {\n      var result = e.dialogResult;\n\n      if (result) {\n        this._dialogDeferred.resolve(result);\n      } else {\n        this._dialogDeferred.reject();\n      }\n    }\n  }, {\n    key: \"_getItemThumbnail\",\n    value: function value(item) {\n      var itemThumbnailGetter = this.option(\"getItemThumbnail\");\n\n      if (!itemThumbnailGetter) {\n        return null;\n      }\n\n      var info = itemThumbnailGetter(item);\n      return info ? info.thumbnail : null;\n    }\n  }, {\n    key: \"_initActions\",\n    value: function value() {\n      this._actions = {\n        onSuccess: this._createActionByOption(\"onSuccess\"),\n        onError: this._createActionByOption(\"onError\"),\n        onCreating: this._createActionByOption(\"onCreating\")\n      };\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_getDefaultOptions\", this).call(this), {\n        model: {\n          getMultipleSelectedItems: null\n        },\n        notificationControl: null,\n        getItemThumbnail: null,\n        onSuccess: null,\n        onError: null,\n        onCreating: null\n      });\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function value(args) {\n      var name = args.name;\n\n      switch (name) {\n        case \"model\":\n          this.repaint();\n          break;\n\n        case \"notificationControl\":\n          this._initNotificationControl(args.value);\n\n          break;\n\n        case \"getItemThumbnail\":\n          break;\n\n        case \"onSuccess\":\n        case \"onError\":\n        case \"onCreating\":\n          this._actions[name] = this._createActionByOption(name);\n          break;\n\n        default:\n          _get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_raiseOnSuccess\",\n    value: function value(updatedOnlyFiles) {\n      this._actions.onSuccess({\n        updatedOnlyFiles: updatedOnlyFiles\n      });\n    }\n  }, {\n    key: \"_raiseOnError\",\n    value: function value(errorId, fileItem) {\n      var fileItemName = fileItem ? fileItem.name : null;\n\n      var message = _uiFile_manager3.FileManagerMessages.get(errorId, fileItemName);\n\n      this._actions.onError({\n        message: message\n      });\n    }\n  }, {\n    key: \"_getCurrentDirectory\",\n    value: function value() {\n      return this._controller.getCurrentDirectory();\n    }\n  }]);\n\n  return FileManagerEditingControl;\n}(_ui2.default);\n\nvar FileManagerActionContext = function () {\n  function FileManagerActionContext(actionMetadata, itemInfos, directoryInfo) {\n    _classCallCheck(this, FileManagerActionContext);\n\n    this._actionMetadata = actionMetadata;\n    this._itemInfos = itemInfos;\n    this._onlyFiles = !this._actionMetadata.affectsAllItems && this._itemInfos.every(function (info) {\n      return !info.fileItem.isDirectory;\n    });\n    this._items = this._itemInfos.map(function (itemInfo) {\n      return itemInfo.fileItem;\n    });\n    this._multipleItems = this._items.length > 1;\n    this._location = directoryInfo.fileItem.name;\n    this._singleRequest = true;\n    this._completedItems = [];\n    this._commonProgress = 0;\n    this._errorState = {\n      failedCount: 0\n    };\n  }\n\n  _createClass(FileManagerActionContext, [{\n    key: \"completeOperationItem\",\n    value: function value(itemIndex) {\n      if (this._singleRequest) {\n        this._completedItems = _toConsumableArray(this._items);\n      } else {\n        var item = this._items[itemIndex];\n\n        this._completedItems.push(item);\n      }\n\n      if (!this._actionMetadata.allowItemProgress) {\n        this._commonProgress = this._completedItems.length / this._items.length * 100;\n      }\n    }\n  }, {\n    key: \"processSingleRequestError\",\n    value: function value(errorText) {\n      this._errorState.failedCount = 1;\n      this._errorState.commonErrorText = this._multipleItems ? this._actionMetadata.commonErrorMessage : this._actionMetadata.singleItemErrorMessage;\n      var itemIndex = this._multipleItems ? -1 : 1;\n      var itemInfo = this.getItemForSingleRequestError();\n\n      this._setCurrentDetailError(itemIndex, itemInfo, errorText);\n    }\n  }, {\n    key: \"processMultipleRequestError\",\n    value: function value(itemIndex, errorText) {\n      this._errorState.failedCount++;\n      this._errorState.commonErrorText = this._errorState.failedCount > 1 ? (0, _string.format)(this._actionMetadata.multipleItemsErrorMessage, this._errorState.failedCount) : this._actionMetadata.singleItemErrorMessage;\n      var itemInfo = this.getItemForMultipleRequestError(itemIndex);\n\n      this._setCurrentDetailError(itemIndex, itemInfo, errorText);\n    }\n  }, {\n    key: \"hasModifiedItems\",\n    value: function value() {\n      return this._hasCompletedItems() || this._singleRequest && !this.success && this._multipleItems;\n    }\n  }, {\n    key: \"getItemForSingleRequestError\",\n    value: function value() {\n      return this._multipleItems ? null : this._itemInfos[0];\n    }\n  }, {\n    key: \"getItemForMultipleRequestError\",\n    value: function value(itemIndex) {\n      return this._itemInfos[itemIndex];\n    }\n  }, {\n    key: \"_setCurrentDetailError\",\n    value: function value(itemIndex, itemInfo, errorText) {\n      this._errorState.currentDetailError = {\n        itemIndex: itemIndex,\n        itemInfo: itemInfo,\n        errorText: errorText\n      };\n    }\n  }, {\n    key: \"_hasCompletedItems\",\n    value: function value() {\n      return this._completedItems.length > 0;\n    }\n  }, {\n    key: \"actionMetadata\",\n    get: function get() {\n      return this._actionMetadata;\n    }\n  }, {\n    key: \"itemInfos\",\n    get: function get() {\n      return this._itemInfos;\n    }\n  }, {\n    key: \"errorState\",\n    get: function get() {\n      return this._errorState;\n    }\n  }, {\n    key: \"singleRequest\",\n    get: function get() {\n      return this._singleRequest;\n    },\n    set: function set(value) {\n      this._singleRequest = value;\n    }\n  }, {\n    key: \"multipleItems\",\n    get: function get() {\n      return this._multipleItems;\n    }\n  }, {\n    key: \"onlyFiles\",\n    get: function get() {\n      return this._onlyFiles;\n    }\n  }, {\n    key: \"processingMessage\",\n    get: function get() {\n      return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsProcessingMessage, this._items.length, this._location) : (0, _string.format)(this._actionMetadata.singleItemProcessingMessage, this._location);\n    }\n  }, {\n    key: \"successMessage\",\n    get: function get() {\n      if (this._hasCompletedItems()) {\n        return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsSuccessMessage, this._completedItems.length, this._location) : (0, _string.format)(this._actionMetadata.singleItemSuccessMessage, this._location);\n      } else {\n        return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsErrorMessage, this._items.length) : this._actionMetadata.singleItemErrorMessage;\n      }\n    }\n  }, {\n    key: \"completionMessage\",\n    get: function get() {\n      return this.success ? this.successMessage : this.errorState.commonErrorText;\n    }\n  }, {\n    key: \"statusText\",\n    get: function get() {\n      return this.success && !this._hasCompletedItems() ? this._actionMetadata.canceledMessage : void 0;\n    }\n  }, {\n    key: \"commonProgress\",\n    get: function get() {\n      return this._commonProgress;\n    }\n  }, {\n    key: \"success\",\n    get: function get() {\n      return !this._errorState.failedCount;\n    }\n  }]);\n\n  return FileManagerActionContext;\n}();\n\nmodule.exports = FileManagerEditingControl;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/file_manager/ui.file_manager.editing.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_extend","_deferred","_iterator","_string","_message","_message2","_ui","_ui2","_uiFile_managerDialog","_uiFile_managerDialog2","_uiFile_managerDialog3","_uiFile_managerDialog4","_uiFile_manager","_uiFile_manager2","_uiFile_manager3","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","_typeof","constructor","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","value","object","hasOwnProperty","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","FileManagerEditingControl","_Widget","apply","arguments","_initActions","_controller","option","on","_onEditActionStarting","bind","_onEditActionResultAcquired","_onEditActionItemError","_onEditActionError","_onCompleteEditActionItem","_onCompleteEditAction","_model","_uploadOperationInfoMap","_renameItemDialog","_createEnterNameDialog","default","format","_createFolderDialog","$chooseFolderDialog","appendTo","$element","_chooseFolderDialog","_createComponent","provider","_fileProvider","getDirectories","getCurrentDirectory","onClosed","_onDialogClosed","_confirmationDialog","_createConfirmationDialog","_fileUploader","_createFileUploader","_createMetadataMap","notificationControl","_this","_notificationControl","onOperationCanceled","_ref","info","_onCancelUploadSession","onOperationItemCanceled","_ref2","item","itemIndex","_onCancelFileUpload","_this2","$fileUploader","_getFileUploaderComponent","getController","_getFileUploaderController","onUploadSessionStarted","e","_onUploadSessionStarted","onUploadProgress","_onUploadProgress","_this3","uploadDirectory","_uploadDirectoryInfo","fileItem","chunkSize","getFileUploadChunkSize","uploadFileChunk","fileData","chunksInfo","abortFileUpload","title","buttonText","$dialog","_this4","show","setTimeout","dialogResult","_this5","_metadataMap","action","arg","_tryCreate","affectsAllItems","singleItemProcessingMessage","singleItemSuccessMessage","singleItemErrorMessage","commonErrorMessage","rename","_tryRename","_tryDelete","multipleItemsProcessingMessage","multipleItemsSuccessMessage","multipleItemsErrorMessage","move","_tryMove","copy","_tryCopy","upload","_tryUpload","allowCancel","allowItemProgress","canceledMessage","download","_download","getItemContent","_getItemContent","_this6","result","each","name","_executeAction","actionName","actionMetadata","cancelUpload","uploadSessionId","cancelFileUpload","_ref3","sessionId","fileIndex","commonValue","fileValue","operationInfo","updateOperationItemProgress","_ref4","sessionInfo","processUploadSession","actionInfo","context","FileManagerActionContext","itemInfos","directory","addOperation","processingMessage","extend","customData","_this7","_actionInfo$customDat","singleRequest","details","map","itemInfo","_getItemProgressDisplayInfo","addOperationDetails","error","_actionInfo$customDat2","_handleActionError","_completeAction","_actionInfo$customDat3","_actionInfo$customDat4","canceled","completeOperationItem","index","commonProgress","_actionInfo$customDat5","parentDirectories","_this8","parentDirectoryInfo","_getCurrentDirectory","newDirName","_showDialog","then","_ref5","createDirectory","_this9","getMultipleSelectedItems","_ref6","renameItem","_this10","deleteItems","_this11","_ref7","folder","moveItems","_this12","_ref8","copyItems","destinationFolder","tryUpload","downloadItems","completeOperation","completionMessage","success","statusText","hasModifiedItems","_raiseOnSuccess","onlyFiles","errorInfo","hasError","_handleSingleRequestActionError","_handleMultipleRequestActionError","getItemForSingleRequestError","errorText","_getErrorText","processSingleRequestError","operationErrorInfo","_getOperationErrorInfo","completeSingleOperationWithError","multipleItems","getItemForMultipleRequestError","processMultipleRequestError","addOperationDetailsError","detailError","errorState","currentDetailError","commonErrorText","detailErrorText","itemName","FileManagerMessages","errorId","commonText","imageUrl","_getItemThumbnail","dialog","dialogArgument","_dialogDeferred","Deferred","promise","resolve","reject","itemThumbnailGetter","thumbnail","_actions","onSuccess","_createActionByOption","onError","onCreating","model","getItemThumbnail","args","repaint","_initNotificationControl","updatedOnlyFiles","fileItemName","message","directoryInfo","_actionMetadata","_itemInfos","_onlyFiles","every","isDirectory","_items","_multipleItems","_location","_singleRequest","_completedItems","_commonProgress","_errorState","failedCount","push","_setCurrentDetailError","_hasCompletedItems","set","successMessage","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.editing.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _string = require(\"../../core/utils/string\");\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _ui = require(\"../widget/ui.widget\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _uiFile_managerDialog = require(\"./ui.file_manager.dialog.name_editor\");\r\nvar _uiFile_managerDialog2 = _interopRequireDefault(_uiFile_managerDialog);\r\nvar _uiFile_managerDialog3 = require(\"./ui.file_manager.dialog.folder_chooser\");\r\nvar _uiFile_managerDialog4 = _interopRequireDefault(_uiFile_managerDialog3);\r\nvar _uiFile_manager = require(\"./ui.file_manager.file_uploader\");\r\nvar _uiFile_manager2 = _interopRequireDefault(_uiFile_manager);\r\nvar _uiFile_manager3 = require(\"./ui.file_manager.messages\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\")\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (Symbol.iterator in Object(iter) || \"[object Arguments]\" === Object.prototype.toString.call(iter)) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\r\n            arr2[i] = arr[i]\r\n        }\r\n        return arr2\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar FileManagerEditingControl = function(_Widget) {\r\n    _inherits(FileManagerEditingControl, _Widget);\r\n\r\n    function FileManagerEditingControl() {\r\n        _classCallCheck(this, FileManagerEditingControl);\r\n        return _possibleConstructorReturn(this, _getPrototypeOf(FileManagerEditingControl).apply(this, arguments))\r\n    }\r\n    _createClass(FileManagerEditingControl, [{\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_initMarkup\", this).call(this);\r\n            this._initActions();\r\n            this._controller = this.option(\"controller\");\r\n            this._controller.on(\"EditActionStarting\", this._onEditActionStarting.bind(this));\r\n            this._controller.on(\"EditActionResultAcquired\", this._onEditActionResultAcquired.bind(this));\r\n            this._controller.on(\"EditActionItemError\", this._onEditActionItemError.bind(this));\r\n            this._controller.on(\"EditActionError\", this._onEditActionError.bind(this));\r\n            this._controller.on(\"CompleteEditActionItem\", this._onCompleteEditActionItem.bind(this));\r\n            this._controller.on(\"CompleteEditAction\", this._onCompleteEditAction.bind(this));\r\n            this._model = this.option(\"model\");\r\n            this._uploadOperationInfoMap = {};\r\n            this._renameItemDialog = this._createEnterNameDialog(_message2.default.format(\"dxFileManager-dialogRenameItemTitle\"), _message2.default.format(\"dxFileManager-dialogRenameItemButtonText\"));\r\n            this._createFolderDialog = this._createEnterNameDialog(_message2.default.format(\"dxFileManager-dialogCreateDirectoryTitle\"), _message2.default.format(\"dxFileManager-dialogCreateDirectoryButtonText\"));\r\n            var $chooseFolderDialog = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\r\n            this._chooseFolderDialog = this._createComponent($chooseFolderDialog, _uiFile_managerDialog4.default, {\r\n                provider: this._controller._fileProvider,\r\n                getDirectories: this._controller.getDirectories.bind(this._controller),\r\n                getCurrentDirectory: this._controller.getCurrentDirectory.bind(this._controller),\r\n                onClosed: this._onDialogClosed.bind(this)\r\n            });\r\n            this._confirmationDialog = this._createConfirmationDialog();\r\n            this._fileUploader = this._createFileUploader();\r\n            this._createMetadataMap()\r\n        }\r\n    }, {\r\n        key: \"_initNotificationControl\",\r\n        value: function(notificationControl) {\r\n            var _this = this;\r\n            this._notificationControl = notificationControl;\r\n            this._notificationControl.option({\r\n                onOperationCanceled: function(_ref) {\r\n                    var info = _ref.info;\r\n                    return _this._onCancelUploadSession(info)\r\n                },\r\n                onOperationItemCanceled: function(_ref2) {\r\n                    var item = _ref2.item,\r\n                        itemIndex = _ref2.itemIndex;\r\n                    return _this._onCancelFileUpload(item, itemIndex)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getFileUploaderComponent\",\r\n        value: function() {\r\n            return _uiFile_manager2.default\r\n        }\r\n    }, {\r\n        key: \"_createFileUploader\",\r\n        value: function() {\r\n            var _this2 = this;\r\n            var $fileUploader = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\r\n            return this._createComponent($fileUploader, this._getFileUploaderComponent(), {\r\n                getController: this._getFileUploaderController.bind(this),\r\n                onUploadSessionStarted: function(e) {\r\n                    return _this2._onUploadSessionStarted(e)\r\n                },\r\n                onUploadProgress: function(e) {\r\n                    return _this2._onUploadProgress(e)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getFileUploaderController\",\r\n        value: function() {\r\n            var _this3 = this;\r\n            var uploadDirectory = this._uploadDirectoryInfo && this._uploadDirectoryInfo.fileItem;\r\n            return {\r\n                chunkSize: this._controller.getFileUploadChunkSize(),\r\n                uploadFileChunk: function(fileData, chunksInfo) {\r\n                    return _this3._controller.uploadFileChunk(fileData, chunksInfo, uploadDirectory)\r\n                },\r\n                abortFileUpload: function(fileData, chunksInfo) {\r\n                    return _this3._controller.abortFileUpload(fileData, chunksInfo, uploadDirectory)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createEnterNameDialog\",\r\n        value: function(title, buttonText) {\r\n            var $dialog = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\r\n            return this._createComponent($dialog, _uiFile_managerDialog2.default, {\r\n                title: title,\r\n                buttonText: buttonText,\r\n                onClosed: this._onDialogClosed.bind(this)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createConfirmationDialog\",\r\n        value: function() {\r\n            var _this4 = this;\r\n            return {\r\n                show: function() {\r\n                    setTimeout(function() {\r\n                        _this4._onDialogClosed({\r\n                            dialogResult: {}\r\n                        })\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createMetadataMap\",\r\n        value: function() {\r\n            var _this5 = this;\r\n            this._metadataMap = {\r\n                create: {\r\n                    action: function(arg) {\r\n                        return _this5._tryCreate(arg)\r\n                    },\r\n                    affectsAllItems: true,\r\n                    singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingCreateSingleItemProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingCreateSingleItemSuccessMessage\"),\r\n                    singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingCreateSingleItemErrorMessage\"),\r\n                    commonErrorMessage: _message2.default.format(\"dxFileManager-editingCreateCommonErrorMessage\")\r\n                },\r\n                rename: {\r\n                    action: function(arg) {\r\n                        return _this5._tryRename(arg)\r\n                    },\r\n                    singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingRenameSingleItemProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingRenameSingleItemSuccessMessage\"),\r\n                    singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingRenameSingleItemErrorMessage\"),\r\n                    commonErrorMessage: _message2.default.format(\"dxFileManager-editingRenameCommonErrorMessage\")\r\n                },\r\n                \"delete\": {\r\n                    action: function(arg) {\r\n                        return _this5._tryDelete(arg)\r\n                    },\r\n                    singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingDeleteSingleItemProcessingMessage\"),\r\n                    multipleItemsProcessingMessage: _message2.default.format(\"dxFileManager-editingDeleteMultipleItemsProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingDeleteSingleItemSuccessMessage\"),\r\n                    multipleItemsSuccessMessage: _message2.default.format(\"dxFileManager-editingDeleteMultipleItemsSuccessMessage\"),\r\n                    singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingDeleteSingleItemErrorMessage\"),\r\n                    multipleItemsErrorMessage: _message2.default.format(\"dxFileManager-editingDeleteMultipleItemsErrorMessage\"),\r\n                    commonErrorMessage: _message2.default.format(\"dxFileManager-editingDeleteCommonErrorMessage\")\r\n                },\r\n                move: {\r\n                    action: function(arg) {\r\n                        return _this5._tryMove(arg)\r\n                    },\r\n                    singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingMoveSingleItemProcessingMessage\"),\r\n                    multipleItemsProcessingMessage: _message2.default.format(\"dxFileManager-editingMoveMultipleItemsProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingMoveSingleItemSuccessMessage\"),\r\n                    multipleItemsSuccessMessage: _message2.default.format(\"dxFileManager-editingMoveMultipleItemsSuccessMessage\"),\r\n                    singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingMoveSingleItemErrorMessage\"),\r\n                    multipleItemsErrorMessage: _message2.default.format(\"dxFileManager-editingMoveMultipleItemsErrorMessage\"),\r\n                    commonErrorMessage: _message2.default.format(\"dxFileManager-editingMoveCommonErrorMessage\")\r\n                },\r\n                copy: {\r\n                    action: function(arg) {\r\n                        return _this5._tryCopy(arg)\r\n                    },\r\n                    singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingCopySingleItemProcessingMessage\"),\r\n                    multipleItemsProcessingMessage: _message2.default.format(\"dxFileManager-editingCopyMultipleItemsProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingCopySingleItemSuccessMessage\"),\r\n                    multipleItemsSuccessMessage: _message2.default.format(\"dxFileManager-editingCopyMultipleItemsSuccessMessage\"),\r\n                    singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingCopySingleItemErrorMessage\"),\r\n                    multipleItemsErrorMessage: _message2.default.format(\"dxFileManager-editingCopyMultipleItemsErrorMessage\"),\r\n                    commonErrorMessage: _message2.default.format(\"dxFileManager-editingCopyCommonErrorMessage\")\r\n                },\r\n                upload: {\r\n                    action: function(arg) {\r\n                        return _this5._tryUpload(arg)\r\n                    },\r\n                    allowCancel: true,\r\n                    allowItemProgress: true,\r\n                    singleItemProcessingMessage: _message2.default.format(\"dxFileManager-editingUploadSingleItemProcessingMessage\"),\r\n                    multipleItemsProcessingMessage: _message2.default.format(\"dxFileManager-editingUploadMultipleItemsProcessingMessage\"),\r\n                    singleItemSuccessMessage: _message2.default.format(\"dxFileManager-editingUploadSingleItemSuccessMessage\"),\r\n                    multipleItemsSuccessMessage: _message2.default.format(\"dxFileManager-editingUploadMultipleItemsSuccessMessage\"),\r\n                    singleItemErrorMessage: _message2.default.format(\"dxFileManager-editingUploadSingleItemErrorMessage\"),\r\n                    multipleItemsErrorMessage: _message2.default.format(\"dxFileManager-editingUploadMultipleItemsErrorMessage\"),\r\n                    canceledMessage: _message2.default.format(\"dxFileManager-editingUploadCanceledMessage\")\r\n                },\r\n                download: {\r\n                    action: function(arg) {\r\n                        return _this5._download(arg)\r\n                    }\r\n                },\r\n                getItemContent: {\r\n                    action: function(arg) {\r\n                        return _this5._getItemContent(arg)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"getCommandActions\",\r\n        value: function() {\r\n            var _this6 = this;\r\n            var result = {};\r\n            (0, _iterator.each)(this._metadataMap, function(name) {\r\n                if (Object.prototype.hasOwnProperty.call(_this6._metadataMap, name)) {\r\n                    result[name] = function(arg) {\r\n                        return _this6._executeAction(name, arg)\r\n                    }\r\n                }\r\n            });\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_executeAction\",\r\n        value: function(actionName, arg) {\r\n            var actionMetadata = this._metadataMap[actionName];\r\n            return actionMetadata ? actionMetadata.action(arg) : null\r\n        }\r\n    }, {\r\n        key: \"_onCancelUploadSession\",\r\n        value: function(info) {\r\n            this._fileUploader.cancelUpload(info.uploadSessionId)\r\n        }\r\n    }, {\r\n        key: \"_onCancelFileUpload\",\r\n        value: function(item, itemIndex) {\r\n            this._fileUploader.cancelFileUpload(item.info.uploadSessionId, itemIndex)\r\n        }\r\n    }, {\r\n        key: \"_onUploadProgress\",\r\n        value: function(_ref3) {\r\n            var sessionId = _ref3.sessionId,\r\n                fileIndex = _ref3.fileIndex,\r\n                commonValue = _ref3.commonValue,\r\n                fileValue = _ref3.fileValue;\r\n            var operationInfo = this._uploadOperationInfoMap[sessionId];\r\n            this._notificationControl.updateOperationItemProgress(operationInfo, fileIndex, 100 * fileValue, 100 * commonValue)\r\n        }\r\n    }, {\r\n        key: \"_onUploadSessionStarted\",\r\n        value: function(_ref4) {\r\n            var sessionInfo = _ref4.sessionInfo;\r\n            this._controller.processUploadSession(sessionInfo, this._uploadDirectoryInfo)\r\n        }\r\n    }, {\r\n        key: \"_onEditActionStarting\",\r\n        value: function(actionInfo) {\r\n            var actionMetadata = this._metadataMap[actionInfo.name];\r\n            var context = new FileManagerActionContext(actionMetadata, actionInfo.itemInfos, actionInfo.directory);\r\n            var operationInfo = this._notificationControl.addOperation(context.processingMessage, actionMetadata.allowCancel, !actionMetadata.allowItemProgress);\r\n            (0, _extend.extend)(actionInfo.customData, {\r\n                context: context,\r\n                operationInfo: operationInfo\r\n            });\r\n            if (\"upload\" === actionInfo.name) {\r\n                var sessionId = actionInfo.customData.sessionInfo.sessionId;\r\n                operationInfo.uploadSessionId = sessionId;\r\n                this._uploadOperationInfoMap[sessionId] = operationInfo\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onEditActionResultAcquired\",\r\n        value: function(actionInfo) {\r\n            var _this7 = this;\r\n            var _actionInfo$customDat = actionInfo.customData,\r\n                context = _actionInfo$customDat.context,\r\n                operationInfo = _actionInfo$customDat.operationInfo;\r\n            context.singleRequest = actionInfo.singleRequest;\r\n            if (!context.singleRequest) {\r\n                var details = context.itemInfos.map(function(itemInfo) {\r\n                    return _this7._getItemProgressDisplayInfo(itemInfo)\r\n                });\r\n                this._notificationControl.addOperationDetails(operationInfo, details, context.actionMetadata.allowCancel)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onEditActionError\",\r\n        value: function(actionInfo, error) {\r\n            var _actionInfo$customDat2 = actionInfo.customData,\r\n                context = _actionInfo$customDat2.context,\r\n                operationInfo = _actionInfo$customDat2.operationInfo;\r\n            context.singleRequest = actionInfo.singleRequest;\r\n            this._handleActionError(operationInfo, context, error);\r\n            this._completeAction(operationInfo, context)\r\n        }\r\n    }, {\r\n        key: \"_onEditActionItemError\",\r\n        value: function(actionInfo, info) {\r\n            var _actionInfo$customDat3 = actionInfo.customData,\r\n                context = _actionInfo$customDat3.context,\r\n                operationInfo = _actionInfo$customDat3.operationInfo;\r\n            this._handleActionError(operationInfo, context, info)\r\n        }\r\n    }, {\r\n        key: \"_onCompleteEditActionItem\",\r\n        value: function(actionInfo, info) {\r\n            var _actionInfo$customDat4 = actionInfo.customData,\r\n                context = _actionInfo$customDat4.context,\r\n                operationInfo = _actionInfo$customDat4.operationInfo;\r\n            if (!info.result || !info.result.canceled) {\r\n                context.completeOperationItem(info.index);\r\n                if (!context.singleRequest) {\r\n                    this._notificationControl.completeOperationItem(operationInfo, info.index, context.commonProgress)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onCompleteEditAction\",\r\n        value: function(actionInfo) {\r\n            var _actionInfo$customDat5 = actionInfo.customData,\r\n                context = _actionInfo$customDat5.context,\r\n                operationInfo = _actionInfo$customDat5.operationInfo;\r\n            this._completeAction(operationInfo, context);\r\n            if (\"upload\" === actionInfo.name) {\r\n                delete this._uploadOperationInfoMap[actionInfo.customData.sessionInfo.sessionId]\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_tryCreate\",\r\n        value: function(parentDirectories) {\r\n            var _this8 = this;\r\n            var parentDirectoryInfo = parentDirectories && parentDirectories[0] || this._getCurrentDirectory();\r\n            var newDirName = _message2.default.format(\"dxFileManager-newDirectoryName\");\r\n            return this._showDialog(this._createFolderDialog, newDirName).then(function(_ref5) {\r\n                var name = _ref5.name;\r\n                return _this8._controller.createDirectory(parentDirectoryInfo, name)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_tryRename\",\r\n        value: function(itemInfos) {\r\n            var _this9 = this;\r\n            var itemInfo = itemInfos && itemInfos[0] || this._model.getMultipleSelectedItems()[0];\r\n            return this._showDialog(this._renameItemDialog, itemInfo.fileItem.name).then(function(_ref6) {\r\n                var name = _ref6.name;\r\n                return _this9._controller.renameItem(itemInfo, name)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_tryDelete\",\r\n        value: function(itemInfos) {\r\n            var _this10 = this;\r\n            itemInfos = itemInfos || this._model.getMultipleSelectedItems();\r\n            return this._showDialog(this._confirmationDialog).then(function() {\r\n                return _this10._controller.deleteItems(itemInfos)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_tryMove\",\r\n        value: function(itemInfos) {\r\n            var _this11 = this;\r\n            itemInfos = itemInfos || this._model.getMultipleSelectedItems();\r\n            return this._showDialog(this._chooseFolderDialog).then(function(_ref7) {\r\n                var folder = _ref7.folder;\r\n                return _this11._controller.moveItems(itemInfos, folder)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_tryCopy\",\r\n        value: function(itemInfos) {\r\n            var _this12 = this;\r\n            itemInfos = itemInfos || this._model.getMultipleSelectedItems();\r\n            return this._showDialog(this._chooseFolderDialog).then(function(_ref8) {\r\n                var folder = _ref8.folder;\r\n                return _this12._controller.copyItems(itemInfos, folder)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_tryUpload\",\r\n        value: function(destinationFolder) {\r\n            this._uploadDirectoryInfo = destinationFolder && destinationFolder[0] || this._getCurrentDirectory();\r\n            this._fileUploader.tryUpload()\r\n        }\r\n    }, {\r\n        key: \"_download\",\r\n        value: function(itemInfos) {\r\n            itemInfos = itemInfos || this._model.getMultipleSelectedItems();\r\n            return this._controller.downloadItems(itemInfos)\r\n        }\r\n    }, {\r\n        key: \"_getItemContent\",\r\n        value: function(itemInfos) {\r\n            itemInfos = itemInfos || this._model.getMultipleSelectedItems();\r\n            return this._controller.getItemContent(itemInfos)\r\n        }\r\n    }, {\r\n        key: \"_completeAction\",\r\n        value: function(operationInfo, context) {\r\n            this._notificationControl.completeOperation(operationInfo, context.completionMessage, !context.success, context.statusText);\r\n            if (context.hasModifiedItems()) {\r\n                this._raiseOnSuccess(context.onlyFiles)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_handleActionError\",\r\n        value: function(operationInfo, context, errorInfo) {\r\n            operationInfo.hasError = true;\r\n            if (context.singleRequest) {\r\n                this._handleSingleRequestActionError(operationInfo, context, errorInfo)\r\n            } else {\r\n                this._handleMultipleRequestActionError(operationInfo, context, errorInfo)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_handleSingleRequestActionError\",\r\n        value: function(operationInfo, context, errorInfo) {\r\n            var itemInfo = context.getItemForSingleRequestError();\r\n            var errorText = this._getErrorText(errorInfo, itemInfo);\r\n            context.processSingleRequestError(errorText);\r\n            var operationErrorInfo = this._getOperationErrorInfo(context);\r\n            this._notificationControl.completeSingleOperationWithError(operationInfo, operationErrorInfo);\r\n            if (context.multipleItems) {\r\n                this._raiseOnSuccess(context.onlyFiles)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_handleMultipleRequestActionError\",\r\n        value: function(operationInfo, context, errorInfo) {\r\n            var itemInfo = context.getItemForMultipleRequestError(errorInfo.index);\r\n            var errorText = this._getErrorText(errorInfo, itemInfo);\r\n            context.processMultipleRequestError(errorInfo.index, errorText);\r\n            var operationErrorInfo = this._getOperationErrorInfo(context);\r\n            this._notificationControl.addOperationDetailsError(operationInfo, operationErrorInfo)\r\n        }\r\n    }, {\r\n        key: \"_getOperationErrorInfo\",\r\n        value: function(context) {\r\n            var detailError = context.errorState.currentDetailError;\r\n            return {\r\n                commonErrorText: context.errorState.commonErrorText,\r\n                item: detailError.itemInfo ? this._getItemProgressDisplayInfo(detailError.itemInfo) : null,\r\n                itemIndex: detailError.itemIndex,\r\n                detailErrorText: detailError.errorText\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getErrorText\",\r\n        value: function(errorInfo, itemInfo) {\r\n            var itemName = itemInfo ? itemInfo.fileItem.name : null;\r\n            return _uiFile_manager3.FileManagerMessages.get(errorInfo.errorId, itemName)\r\n        }\r\n    }, {\r\n        key: \"_getItemProgressDisplayInfo\",\r\n        value: function(itemInfo) {\r\n            return {\r\n                commonText: itemInfo.fileItem.name,\r\n                imageUrl: this._getItemThumbnail(itemInfo)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_showDialog\",\r\n        value: function(dialog, dialogArgument) {\r\n            this._dialogDeferred = new _deferred.Deferred;\r\n            dialog.show(dialogArgument);\r\n            return this._dialogDeferred.promise()\r\n        }\r\n    }, {\r\n        key: \"_onDialogClosed\",\r\n        value: function(e) {\r\n            var result = e.dialogResult;\r\n            if (result) {\r\n                this._dialogDeferred.resolve(result)\r\n            } else {\r\n                this._dialogDeferred.reject()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getItemThumbnail\",\r\n        value: function(item) {\r\n            var itemThumbnailGetter = this.option(\"getItemThumbnail\");\r\n            if (!itemThumbnailGetter) {\r\n                return null\r\n            }\r\n            var info = itemThumbnailGetter(item);\r\n            return info ? info.thumbnail : null\r\n        }\r\n    }, {\r\n        key: \"_initActions\",\r\n        value: function() {\r\n            this._actions = {\r\n                onSuccess: this._createActionByOption(\"onSuccess\"),\r\n                onError: this._createActionByOption(\"onError\"),\r\n                onCreating: this._createActionByOption(\"onCreating\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                model: {\r\n                    getMultipleSelectedItems: null\r\n                },\r\n                notificationControl: null,\r\n                getItemThumbnail: null,\r\n                onSuccess: null,\r\n                onError: null,\r\n                onCreating: null\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            var name = args.name;\r\n            switch (name) {\r\n                case \"model\":\r\n                    this.repaint();\r\n                    break;\r\n                case \"notificationControl\":\r\n                    this._initNotificationControl(args.value);\r\n                    break;\r\n                case \"getItemThumbnail\":\r\n                    break;\r\n                case \"onSuccess\":\r\n                case \"onError\":\r\n                case \"onCreating\":\r\n                    this._actions[name] = this._createActionByOption(name);\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(FileManagerEditingControl.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseOnSuccess\",\r\n        value: function(updatedOnlyFiles) {\r\n            this._actions.onSuccess({\r\n                updatedOnlyFiles: updatedOnlyFiles\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_raiseOnError\",\r\n        value: function(errorId, fileItem) {\r\n            var fileItemName = fileItem ? fileItem.name : null;\r\n            var message = _uiFile_manager3.FileManagerMessages.get(errorId, fileItemName);\r\n            this._actions.onError({\r\n                message: message\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getCurrentDirectory\",\r\n        value: function() {\r\n            return this._controller.getCurrentDirectory()\r\n        }\r\n    }]);\r\n    return FileManagerEditingControl\r\n}(_ui2.default);\r\nvar FileManagerActionContext = function() {\r\n    function FileManagerActionContext(actionMetadata, itemInfos, directoryInfo) {\r\n        _classCallCheck(this, FileManagerActionContext);\r\n        this._actionMetadata = actionMetadata;\r\n        this._itemInfos = itemInfos;\r\n        this._onlyFiles = !this._actionMetadata.affectsAllItems && this._itemInfos.every(function(info) {\r\n            return !info.fileItem.isDirectory\r\n        });\r\n        this._items = this._itemInfos.map(function(itemInfo) {\r\n            return itemInfo.fileItem\r\n        });\r\n        this._multipleItems = this._items.length > 1;\r\n        this._location = directoryInfo.fileItem.name;\r\n        this._singleRequest = true;\r\n        this._completedItems = [];\r\n        this._commonProgress = 0;\r\n        this._errorState = {\r\n            failedCount: 0\r\n        }\r\n    }\r\n    _createClass(FileManagerActionContext, [{\r\n        key: \"completeOperationItem\",\r\n        value: function(itemIndex) {\r\n            if (this._singleRequest) {\r\n                this._completedItems = _toConsumableArray(this._items)\r\n            } else {\r\n                var item = this._items[itemIndex];\r\n                this._completedItems.push(item)\r\n            }\r\n            if (!this._actionMetadata.allowItemProgress) {\r\n                this._commonProgress = this._completedItems.length / this._items.length * 100\r\n            }\r\n        }\r\n    }, {\r\n        key: \"processSingleRequestError\",\r\n        value: function(errorText) {\r\n            this._errorState.failedCount = 1;\r\n            this._errorState.commonErrorText = this._multipleItems ? this._actionMetadata.commonErrorMessage : this._actionMetadata.singleItemErrorMessage;\r\n            var itemIndex = this._multipleItems ? -1 : 1;\r\n            var itemInfo = this.getItemForSingleRequestError();\r\n            this._setCurrentDetailError(itemIndex, itemInfo, errorText)\r\n        }\r\n    }, {\r\n        key: \"processMultipleRequestError\",\r\n        value: function(itemIndex, errorText) {\r\n            this._errorState.failedCount++;\r\n            this._errorState.commonErrorText = this._errorState.failedCount > 1 ? (0, _string.format)(this._actionMetadata.multipleItemsErrorMessage, this._errorState.failedCount) : this._actionMetadata.singleItemErrorMessage;\r\n            var itemInfo = this.getItemForMultipleRequestError(itemIndex);\r\n            this._setCurrentDetailError(itemIndex, itemInfo, errorText)\r\n        }\r\n    }, {\r\n        key: \"hasModifiedItems\",\r\n        value: function() {\r\n            return this._hasCompletedItems() || this._singleRequest && !this.success && this._multipleItems\r\n        }\r\n    }, {\r\n        key: \"getItemForSingleRequestError\",\r\n        value: function() {\r\n            return this._multipleItems ? null : this._itemInfos[0]\r\n        }\r\n    }, {\r\n        key: \"getItemForMultipleRequestError\",\r\n        value: function(itemIndex) {\r\n            return this._itemInfos[itemIndex]\r\n        }\r\n    }, {\r\n        key: \"_setCurrentDetailError\",\r\n        value: function(itemIndex, itemInfo, errorText) {\r\n            this._errorState.currentDetailError = {\r\n                itemIndex: itemIndex,\r\n                itemInfo: itemInfo,\r\n                errorText: errorText\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_hasCompletedItems\",\r\n        value: function() {\r\n            return this._completedItems.length > 0\r\n        }\r\n    }, {\r\n        key: \"actionMetadata\",\r\n        get: function() {\r\n            return this._actionMetadata\r\n        }\r\n    }, {\r\n        key: \"itemInfos\",\r\n        get: function() {\r\n            return this._itemInfos\r\n        }\r\n    }, {\r\n        key: \"errorState\",\r\n        get: function() {\r\n            return this._errorState\r\n        }\r\n    }, {\r\n        key: \"singleRequest\",\r\n        get: function() {\r\n            return this._singleRequest\r\n        },\r\n        set: function(value) {\r\n            this._singleRequest = value\r\n        }\r\n    }, {\r\n        key: \"multipleItems\",\r\n        get: function() {\r\n            return this._multipleItems\r\n        }\r\n    }, {\r\n        key: \"onlyFiles\",\r\n        get: function() {\r\n            return this._onlyFiles\r\n        }\r\n    }, {\r\n        key: \"processingMessage\",\r\n        get: function() {\r\n            return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsProcessingMessage, this._items.length, this._location) : (0, _string.format)(this._actionMetadata.singleItemProcessingMessage, this._location)\r\n        }\r\n    }, {\r\n        key: \"successMessage\",\r\n        get: function() {\r\n            if (this._hasCompletedItems()) {\r\n                return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsSuccessMessage, this._completedItems.length, this._location) : (0, _string.format)(this._actionMetadata.singleItemSuccessMessage, this._location)\r\n            } else {\r\n                return this._multipleItems ? (0, _string.format)(this._actionMetadata.multipleItemsErrorMessage, this._items.length) : this._actionMetadata.singleItemErrorMessage\r\n            }\r\n        }\r\n    }, {\r\n        key: \"completionMessage\",\r\n        get: function() {\r\n            return this.success ? this.successMessage : this.errorState.commonErrorText\r\n        }\r\n    }, {\r\n        key: \"statusText\",\r\n        get: function() {\r\n            return this.success && !this._hasCompletedItems() ? this._actionMetadata.canceledMessage : void 0\r\n        }\r\n    }, {\r\n        key: \"commonProgress\",\r\n        get: function() {\r\n            return this._commonProgress\r\n        }\r\n    }, {\r\n        key: \"success\",\r\n        get: function() {\r\n            return !this._errorState.failedCount\r\n        }\r\n    }]);\r\n    return FileManagerActionContext\r\n}();\r\nmodule.exports = FileManagerEditingControl;\r\n"]},"metadata":{},"sourceType":"script"}