{"ast":null,"code":"import { style, animate, AnimationBuilder } from '@angular/animations';\nimport { Directive, ElementRef, Renderer2, Output, HostBinding, Input, EventEmitter, NgModule } from '@angular/core';\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\n/** @type {?} */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/animations';\nvar COLLAPSE_ANIMATION_TIMING = '400ms cubic-bezier(0.4,0.0,0.2,1)';\n/** @type {?} */\n\nvar expandAnimation = [style({\n  height: 0,\n  visibility: 'hidden'\n}), animate(COLLAPSE_ANIMATION_TIMING, style({\n  height: '*',\n  visibility: 'visible'\n}))];\n/** @type {?} */\n\nvar collapseAnimation = [style({\n  height: '*',\n  visibility: 'visible'\n}), animate(COLLAPSE_ANIMATION_TIMING, style({\n  height: 0,\n  visibility: 'hidden'\n}))];\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\nvar CollapseDirective =\n/** @class */\nfunction () {\n  function CollapseDirective(_el, _renderer, _builder) {\n    this._el = _el;\n    this._renderer = _renderer;\n    /**\r\n     * This event fires as soon as content collapses\r\n     */\n\n    this.collapsed = new EventEmitter();\n    /**\r\n     * This event fires when collapsing is started\r\n     */\n\n    this.collapses = new EventEmitter();\n    /**\r\n     * This event fires as soon as content becomes visible\r\n     */\n\n    this.expanded = new EventEmitter();\n    /**\r\n     * This event fires when expansion is started\r\n     */\n\n    this.expands = new EventEmitter(); // shown\n\n    this.isExpanded = true; // hidden\n\n    this.isCollapsed = false; // stale state\n\n    this.isCollapse = true; // animation state\n\n    this.isCollapsing = false;\n    /**\r\n     * turn on/off animation\r\n     */\n\n    this.isAnimated = false;\n    this._display = 'block';\n    this._stylesLoaded = false;\n    this._COLLAPSE_ACTION_NAME = 'collapse';\n    this._EXPAND_ACTION_NAME = 'expand';\n    this._factoryCollapseAnimation = _builder.build(collapseAnimation);\n    this._factoryExpandAnimation = _builder.build(expandAnimation);\n  }\n\n  Object.defineProperty(CollapseDirective.prototype, \"display\", {\n    set:\n    /**\r\n    * @param {?} value\r\n    * @return {?}\r\n    */\n    function set(value) {\n      if (!this.isAnimated) {\n        this._renderer.setStyle(this._el.nativeElement, 'display', value);\n\n        return;\n      }\n\n      this._display = value;\n\n      if (value === 'none') {\n        this.hide();\n        return;\n      }\n\n      this.show();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CollapseDirective.prototype, \"collapse\", {\n    get:\n    /**\r\n    * @return {?}\r\n    */\n    function get() {\n      return this.isExpanded;\n    },\n\n    /** A flag indicating visibility of content (shown or hidden) */\n    set:\n    /**\r\n    * A flag indicating visibility of content (shown or hidden)\r\n    * @param {?} value\r\n    * @return {?}\r\n    */\n    function set(value) {\n      if (!this._player || this._isAnimationDone) {\n        this.isExpanded = value;\n        this.toggle();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * @return {?}\r\n   */\n\n  CollapseDirective.prototype.ngAfterViewChecked =\n  /**\r\n  * @return {?}\r\n  */\n  function () {\n    this._stylesLoaded = true;\n\n    if (!this._player || !this._isAnimationDone) {\n      return;\n    }\n\n    this._player.reset();\n\n    this._renderer.setStyle(this._el.nativeElement, 'height', '*');\n  };\n  /** allows to manually toggle content visibility */\n\n  /**\r\n   * allows to manually toggle content visibility\r\n   * @return {?}\r\n   */\n\n\n  CollapseDirective.prototype.toggle =\n  /**\r\n  * allows to manually toggle content visibility\r\n  * @return {?}\r\n  */\n  function () {\n    if (this.isExpanded) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n  /** allows to manually hide content */\n\n  /**\r\n   * allows to manually hide content\r\n   * @return {?}\r\n   */\n\n\n  CollapseDirective.prototype.hide =\n  /**\r\n  * allows to manually hide content\r\n  * @return {?}\r\n  */\n  function () {\n    var _this = this;\n\n    this.isCollapsing = true;\n    this.isExpanded = false;\n    this.isCollapsed = true;\n    this.isCollapsing = false;\n    this.collapses.emit(this);\n    this._isAnimationDone = false;\n    this.animationRun(this.isAnimated, this._COLLAPSE_ACTION_NAME)(\n    /**\r\n    * @return {?}\r\n    */\n    function () {\n      _this._isAnimationDone = true;\n\n      _this.collapsed.emit(_this);\n\n      _this._renderer.setStyle(_this._el.nativeElement, 'display', 'none');\n    });\n  };\n  /** allows to manually show collapsed content */\n\n  /**\r\n   * allows to manually show collapsed content\r\n   * @return {?}\r\n   */\n\n\n  CollapseDirective.prototype.show =\n  /**\r\n  * allows to manually show collapsed content\r\n  * @return {?}\r\n  */\n  function () {\n    var _this = this;\n\n    this._renderer.setStyle(this._el.nativeElement, 'display', this._display);\n\n    this.isCollapsing = true;\n    this.isExpanded = true;\n    this.isCollapsed = false;\n    this.isCollapsing = false;\n    this.expands.emit(this);\n    this._isAnimationDone = false;\n    this.animationRun(this.isAnimated, this._EXPAND_ACTION_NAME)(\n    /**\r\n    * @return {?}\r\n    */\n    function () {\n      _this._isAnimationDone = true;\n\n      _this.expanded.emit(_this);\n    });\n  };\n  /**\r\n   * @param {?} isAnimated\r\n   * @param {?} action\r\n   * @return {?}\r\n   */\n\n\n  CollapseDirective.prototype.animationRun =\n  /**\r\n  * @param {?} isAnimated\r\n  * @param {?} action\r\n  * @return {?}\r\n  */\n  function (isAnimated, action) {\n    var _this = this;\n\n    if (!isAnimated || !this._stylesLoaded) {\n      return (\n        /**\r\n        * @param {?} callback\r\n        * @return {?}\r\n        */\n        function (callback) {\n          return callback();\n        }\n      );\n    }\n\n    this._renderer.setStyle(this._el.nativeElement, 'overflow', 'hidden');\n\n    this._renderer.addClass(this._el.nativeElement, 'collapse');\n    /** @type {?} */\n\n\n    var factoryAnimation = action === this._EXPAND_ACTION_NAME ? this._factoryExpandAnimation : this._factoryCollapseAnimation;\n\n    if (this._player) {\n      this._player.destroy();\n    }\n\n    this._player = factoryAnimation.create(this._el.nativeElement);\n\n    this._player.play();\n\n    return (\n      /**\r\n      * @param {?} callback\r\n      * @return {?}\r\n      */\n      function (callback) {\n        return _this._player.onDone(callback);\n      }\n    );\n  };\n  /** @nocollapse */\n\n\n  CollapseDirective.ctorParameters = function () {\n    return [{\n      type: ElementRef\n    }, {\n      type: Renderer2\n    }, {\n      type: AnimationBuilder\n    }];\n  };\n\n  CollapseDirective.propDecorators = {\n    collapsed: [{\n      type: Output\n    }],\n    collapses: [{\n      type: Output\n    }],\n    expanded: [{\n      type: Output\n    }],\n    expands: [{\n      type: Output\n    }],\n    isExpanded: [{\n      type: HostBinding,\n      args: ['class.in']\n    }, {\n      type: HostBinding,\n      args: ['class.show']\n    }, {\n      type: HostBinding,\n      args: ['attr.aria-expanded']\n    }],\n    isCollapsed: [{\n      type: HostBinding,\n      args: ['attr.aria-hidden']\n    }],\n    isCollapse: [{\n      type: HostBinding,\n      args: ['class.collapse']\n    }],\n    isCollapsing: [{\n      type: HostBinding,\n      args: ['class.collapsing']\n    }],\n    display: [{\n      type: Input\n    }],\n    isAnimated: [{\n      type: Input\n    }],\n    collapse: [{\n      type: Input\n    }]\n  };\n\n  CollapseDirective.ɵfac = function CollapseDirective_Factory(t) {\n    return new (t || CollapseDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.AnimationBuilder));\n  };\n\n  CollapseDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({\n    type: CollapseDirective,\n    selectors: [[\"\", \"collapse\", \"\"]],\n    hostVars: 10,\n    hostBindings: function CollapseDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-expanded\", ctx.isExpanded)(\"aria-hidden\", ctx.isCollapsed);\n        ɵngcc0.ɵɵclassProp(\"collapse\", ctx.isCollapse)(\"in\", ctx.isExpanded)(\"show\", ctx.isExpanded)(\"collapsing\", ctx.isCollapsing);\n      }\n    },\n    inputs: {\n      isAnimated: \"isAnimated\",\n      display: \"display\",\n      collapse: \"collapse\"\n    },\n    outputs: {\n      collapsed: \"collapsed\",\n      collapses: \"collapses\",\n      expanded: \"expanded\",\n      expands: \"expands\"\n    },\n    exportAs: [\"bs-collapse\"]\n  });\n  /*@__PURE__*/\n\n  (function () {\n    ɵngcc0.ɵsetClassMetadata(CollapseDirective, [{\n      type: Directive,\n      args: [{\n        selector: '[collapse]',\n        exportAs: 'bs-collapse',\n        host: {\n          '[class.collapse]': 'true'\n        }\n      }]\n    }], function () {\n      return [{\n        type: ɵngcc0.ElementRef\n      }, {\n        type: ɵngcc0.Renderer2\n      }, {\n        type: ɵngcc1.AnimationBuilder\n      }];\n    }, {\n      collapsed: [{\n        type: Output\n      }],\n      collapses: [{\n        type: Output\n      }],\n      expanded: [{\n        type: Output\n      }],\n      expands: [{\n        type: Output\n      }],\n      isExpanded: [{\n        type: HostBinding,\n        args: ['class.in']\n      }, {\n        type: HostBinding,\n        args: ['class.show']\n      }, {\n        type: HostBinding,\n        args: ['attr.aria-expanded']\n      }],\n      isCollapsed: [{\n        type: HostBinding,\n        args: ['attr.aria-hidden']\n      }],\n      isCollapse: [{\n        type: HostBinding,\n        args: ['class.collapse']\n      }],\n      isCollapsing: [{\n        type: HostBinding,\n        args: ['class.collapsing']\n      }],\n      isAnimated: [{\n        type: Input\n      }],\n      display: [{\n        type: Input\n      }],\n      collapse: [{\n        type: Input\n      }]\n    });\n  })();\n\n  return CollapseDirective;\n}();\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\n\nvar CollapseModule =\n/** @class */\nfunction () {\n  function CollapseModule() {}\n  /**\r\n   * @return {?}\r\n   */\n\n\n  CollapseModule.forRoot =\n  /**\r\n  * @return {?}\r\n  */\n  function () {\n    return {\n      ngModule: CollapseModule,\n      providers: []\n    };\n  };\n\n  CollapseModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({\n    type: CollapseModule\n  });\n  CollapseModule.ɵinj = ɵngcc0.ɵɵdefineInjector({\n    factory: function CollapseModule_Factory(t) {\n      return new (t || CollapseModule)();\n    }\n  });\n\n  (function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(CollapseModule, {\n      declarations: [CollapseDirective],\n      exports: [CollapseDirective]\n    });\n  })();\n  /*@__PURE__*/\n\n\n  (function () {\n    ɵngcc0.ɵsetClassMetadata(CollapseModule, [{\n      type: NgModule,\n      args: [{\n        declarations: [CollapseDirective],\n        exports: [CollapseDirective]\n      }]\n    }], function () {\n      return [];\n    }, null);\n  })();\n\n  return CollapseModule;\n}();\n\nexport { CollapseDirective, CollapseModule };","map":null,"metadata":{},"sourceType":"module"}