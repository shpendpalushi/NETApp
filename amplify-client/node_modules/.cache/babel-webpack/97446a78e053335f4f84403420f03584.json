{"ast":null,"code":"/**\r\n * DevExtreme (ui/lookup.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar window = require(\"../core/utils/window\").getWindow();\n\nvar support = require(\"../core/utils/support\");\n\nvar commonUtils = require(\"../core/utils/common\");\n\nvar domUtils = require(\"../core/utils/dom\");\n\nvar each = require(\"../core/utils/iterator\").each;\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar inkRipple = require(\"./widget/utils.ink_ripple\");\n\nvar messageLocalization = require(\"../localization/message\");\n\nvar devices = require(\"../core/devices\");\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar eventUtils = require(\"../events/utils\");\n\nvar DropDownList = require(\"./drop_down_editor/ui.drop_down_list\");\n\nvar themes = require(\"./themes\");\n\nvar clickEvent = require(\"../events/click\");\n\nvar Popover = require(\"./popover\");\n\nvar TextBox = require(\"./text_box\");\n\nvar ChildDefaultTemplate = require(\"../core/templates/child_default_template\").ChildDefaultTemplate;\n\nvar translator = require(\"../animation/translator\");\n\nvar LOOKUP_CLASS = \"dx-lookup\";\nvar LOOKUP_SEARCH_CLASS = \"dx-lookup-search\";\nvar LOOKUP_SEARCH_WRAPPER_CLASS = \"dx-lookup-search-wrapper\";\nvar LOOKUP_FIELD_CLASS = \"dx-lookup-field\";\nvar LOOKUP_ARROW_CLASS = \"dx-lookup-arrow\";\nvar LOOKUP_FIELD_WRAPPER_CLASS = \"dx-lookup-field-wrapper\";\nvar LOOKUP_POPUP_CLASS = \"dx-lookup-popup\";\nvar LOOKUP_POPUP_WRAPPER_CLASS = \"dx-lookup-popup-wrapper\";\nvar LOOKUP_POPUP_SEARCH_CLASS = \"dx-lookup-popup-search\";\nvar LOOKUP_POPOVER_MODE = \"dx-lookup-popover-mode\";\nvar LOOKUP_EMPTY_CLASS = \"dx-lookup-empty\";\nvar LOOKUP_POPOVER_FLIP_VERTICAL_CLASS = \"dx-popover-flipped-vertical\";\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\nvar POPUP_OPTION_MAP = {\n  popupWidth: \"width\",\n  popupHeight: \"height\"\n};\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\nvar MATERIAL_LOOKUP_LIST_ITEMS_COUNT = 4;\nvar MATERIAL_LOOKUP_LIST_PADDING = 8;\nvar Lookup = DropDownList.inherit({\n  _supportedKeys: function _supportedKeys() {\n    return extend(this.callBase(), {\n      space: function space(e) {\n        e.preventDefault();\n\n        this._validatedOpening();\n      },\n      enter: function enter() {\n        this._validatedOpening();\n      }\n    });\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      title: \"\",\n      titleTemplate: \"title\",\n      onTitleRendered: null,\n      placeholder: messageLocalization.format(\"Select\"),\n      searchPlaceholder: messageLocalization.format(\"Search\"),\n      searchEnabled: true,\n      cleanSearchOnOpening: true,\n      fullScreen: false,\n      showCancelButton: true,\n      showClearButton: false,\n      clearButtonText: messageLocalization.format(\"Clear\"),\n      applyButtonText: messageLocalization.format(\"OK\"),\n      popupWidth: function popupWidth() {\n        return .8 * $(window).width();\n      },\n      popupHeight: function popupHeight() {\n        return .8 * $(window).height();\n      },\n      shading: true,\n      closeOnOutsideClick: false,\n      position: void 0,\n      animation: {},\n      pullRefreshEnabled: false,\n      useNativeScrolling: true,\n      pullingDownText: messageLocalization.format(\"dxList-pullingDownText\"),\n      pulledDownText: messageLocalization.format(\"dxList-pulledDownText\"),\n      refreshingText: messageLocalization.format(\"dxList-refreshingText\"),\n      pageLoadingText: messageLocalization.format(\"dxList-pageLoadingText\"),\n      onScroll: null,\n      onPullRefresh: null,\n      onPageLoading: null,\n      pageLoadMode: \"scrollBottom\",\n      nextButtonText: messageLocalization.format(\"dxList-nextButtonText\"),\n      grouped: false,\n      groupTemplate: \"group\",\n      usePopover: false,\n      showDropDownButton: false,\n      showPopupTitle: true,\n      focusStateEnabled: false,\n      _scrollToSelectedItemEnabled: false,\n      useHiddenSubmitElement: true\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    var themeName = themes.current();\n    return this.callBase().concat([{\n      device: function device() {\n        return !support.nativeScrolling;\n      },\n      options: {\n        useNativeScrolling: false\n      }\n    }, {\n      device: function device(_device) {\n        return !devices.isSimulator() && \"desktop\" === devices.real().deviceType && \"generic\" === _device.platform;\n      },\n      options: {\n        usePopover: true,\n        popupHeight: \"auto\"\n      }\n    }, {\n      device: {\n        platform: \"ios\",\n        phone: true\n      },\n      options: {\n        fullScreen: true\n      }\n    }, {\n      device: {\n        platform: \"ios\",\n        tablet: true\n      },\n      options: {\n        popupWidth: function popupWidth() {\n          return .4 * Math.min($(window).width(), $(window).height());\n        },\n        popupHeight: \"auto\",\n        usePopover: true,\n        useInkRipple: false\n      }\n    }, {\n      device: function device() {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }, {\n      device: function device() {\n        return themes.isMaterial(themeName);\n      },\n      options: {\n        usePopover: false,\n        closeOnOutsideClick: true,\n        popupWidth: function () {\n          return $(this.element()).outerWidth();\n        }.bind(this),\n        popupHeight: function () {\n          return this._getPopupHeight(MATERIAL_LOOKUP_LIST_ITEMS_COUNT);\n        }.bind(this),\n        searchEnabled: false,\n        showCancelButton: false,\n        showPopupTitle: false,\n        position: {\n          my: \"left top\",\n          at: \"left top\",\n          of: this.element()\n        },\n        _scrollToSelectedItemEnabled: true\n      }\n    }]);\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates.group = new ChildDefaultTemplate(\"group\");\n    this._defaultTemplates.title = new ChildDefaultTemplate(\"title\");\n  },\n  _initMarkup: function _initMarkup() {\n    this.$element().addClass(LOOKUP_CLASS).toggleClass(LOOKUP_POPOVER_MODE, this.option(\"usePopover\"));\n    this.callBase();\n  },\n  _inputWrapper: function _inputWrapper() {\n    return this.$element().find(\".\" + LOOKUP_FIELD_WRAPPER_CLASS);\n  },\n  _dataSourceOptions: function _dataSourceOptions() {\n    return extend(this.callBase(), {\n      paginate: true\n    });\n  },\n  _fireContentReadyAction: commonUtils.noop,\n  _popupWrapperClass: function _popupWrapperClass() {\n    return \"\";\n  },\n  _renderInput: function _renderInput() {\n    var fieldClickAction = this._createAction(function () {\n      this._toggleOpenState();\n    }.bind(this));\n\n    this._$field = $(\"<div>\").addClass(LOOKUP_FIELD_CLASS);\n    eventsEngine.on(this._$field, eventUtils.addNamespace(clickEvent.name, this.NAME), function (e) {\n      fieldClickAction({\n        event: e\n      });\n    });\n    var $arrow = $(\"<div>\").addClass(LOOKUP_ARROW_CLASS);\n    this._$fieldWrapper = $(\"<div>\").addClass(LOOKUP_FIELD_WRAPPER_CLASS).append(this._$field).append($arrow).appendTo(this.$element());\n    this.option(\"useInkRipple\") && this._renderInkRipple();\n  },\n  _getInputContainer: function _getInputContainer() {\n    return this._$fieldWrapper;\n  },\n  _renderInkRipple: function _renderInkRipple() {\n    this._inkRipple = inkRipple.render();\n  },\n  _toggleOpenState: function _toggleOpenState() {\n    this.callBase();\n\n    if (!this.option(\"fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\n      this._setPopupPosition();\n    }\n  },\n  _toggleActiveState: function _toggleActiveState($element, value, e) {\n    this.callBase.apply(this, arguments);\n\n    if (!this._inkRipple) {\n      return;\n    }\n\n    var config = {\n      element: this._inputWrapper(),\n      event: e\n    };\n\n    if (value) {\n      this._inkRipple.showWave(config);\n    } else {\n      this._inkRipple.hideWave(config);\n    }\n  },\n  _renderField: function _renderField() {\n    var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\n\n    if (fieldTemplate && this.option(\"fieldTemplate\")) {\n      this._renderFieldTemplate(fieldTemplate);\n\n      return;\n    }\n\n    this._updateField(this.option(\"displayValue\") || this.option(\"placeholder\"));\n\n    this.$element().toggleClass(LOOKUP_EMPTY_CLASS, !this.option(\"selectedItem\"));\n  },\n  _renderDisplayText: function _renderDisplayText(text) {\n    if (this._input().length) {\n      this.callBase(text);\n    } else {\n      this._updateField(text);\n    }\n  },\n  _updateField: function _updateField(text) {\n    this._$field.text(text);\n  },\n  _renderFieldTemplate: function _renderFieldTemplate(template) {\n    this._$field.empty();\n\n    var data = this._fieldRenderData();\n\n    template.render({\n      model: data,\n      container: domUtils.getPublicElement(this._$field)\n    });\n  },\n  _fieldRenderData: function _fieldRenderData() {\n    return this.option(\"selectedItem\");\n  },\n  _popupShowingHandler: function _popupShowingHandler() {\n    this.callBase.apply(this, arguments);\n\n    if (this.option(\"cleanSearchOnOpening\")) {\n      if (this.option(\"searchEnabled\") && this._searchBox.option(\"value\")) {\n        this._searchBox.option(\"value\", \"\");\n\n        this._searchCanceled();\n      }\n\n      this._list && this._list.option(\"focusedElement\", null);\n    }\n\n    if (this.option(\"fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\n      this._popup.option(\"position\").of = $(window);\n    }\n  },\n  _scrollToSelectedItem: function _scrollToSelectedItem() {\n    var selectedIndex = this._list.option(\"selectedIndex\");\n\n    var listItems = this._list.option(\"items\");\n\n    var itemsCount = listItems.length;\n\n    if (0 !== itemsCount) {\n      if (this._list.option(\"grouped\")) {\n        this._list.scrollToItem({\n          group: itemsCount - 1,\n          item: listItems[itemsCount - 1].items.length - 1\n        });\n      } else {\n        this._list.scrollToItem(itemsCount - 1);\n      }\n\n      this._list.scrollToItem(selectedIndex);\n    }\n  },\n  _setPopupPosition: function _setPopupPosition() {\n    var selectedIndex = this._list.option(\"selectedIndex\");\n\n    var flipped = this._popup._$wrapper.hasClass(LOOKUP_POPOVER_FLIP_VERTICAL_CLASS);\n\n    if (selectedIndex === -1 || flipped) {\n      return;\n    }\n\n    var selectedListItem = $(this._list.element()).find(\".\" + LIST_ITEM_SELECTED_CLASS);\n\n    if (selectedListItem.offset().top < 0 || this._list.scrollTop() !== selectedListItem.position().top) {\n      this._scrollToSelectedItem();\n    }\n\n    var differenceOfHeights = (selectedListItem.height() - $(this.element()).height()) / 2;\n    var popupContentParent = $(this._popup.content()).parent();\n    var differenceOfOffsets = selectedListItem.offset().top - popupContentParent.offset().top;\n    var lookupTop = $(this.element()).offset().top;\n    var popupOffsetY = differenceOfHeights;\n\n    if (lookupTop > differenceOfOffsets) {\n      popupOffsetY += differenceOfOffsets;\n    } else {\n      this._scrollToSelectedItem();\n    }\n\n    var position = translator.locate(popupContentParent);\n    translator.move(popupContentParent, {\n      top: position.top - popupOffsetY\n    });\n  },\n  _getPopupHeight: function _getPopupHeight(listItemsCount) {\n    return this._list && this._list.itemElements() ? this._list.itemElements().height() * listItemsCount + 2 * MATERIAL_LOOKUP_LIST_PADDING + (this._$searchWrapper ? this._$searchWrapper.outerHeight() : 0) + (this._popup._$bottom ? this._popup._$bottom.outerHeight() : 0) + (this._popup._$title ? this._popup._$title.outerHeight() : 0) : \"auto\";\n  },\n  _renderPopup: function _renderPopup() {\n    if (this.option(\"usePopover\") && !this.option(\"fullScreen\")) {\n      this._renderPopover();\n    } else {\n      this.callBase();\n    }\n\n    this._$popup.addClass(LOOKUP_POPUP_CLASS);\n\n    this._popup._wrapper().addClass(LOOKUP_POPUP_WRAPPER_CLASS);\n  },\n  _popupOptionMap: function _popupOptionMap(optionName) {\n    return POPUP_OPTION_MAP[optionName] || optionName;\n  },\n  _renderPopover: function _renderPopover() {\n    this._popup = this._createComponent(this._$popup, Popover, extend(this._popupConfig(), {\n      showEvent: null,\n      hideEvent: null,\n      target: this.$element(),\n      fullScreen: false,\n      shading: false,\n      closeOnTargetScroll: true,\n      width: this._isInitialOptionValue(\"popupWidth\") ? function () {\n        return this.$element().outerWidth();\n      }.bind(this) : this._popupConfig().width\n    }));\n\n    this._popup.on({\n      showing: this._popupShowingHandler.bind(this),\n      shown: this._popupShownHandler.bind(this),\n      hiding: this._popupHidingHandler.bind(this),\n      hidden: this._popupHiddenHandler.bind(this)\n    });\n\n    this._setPopupContentId(this._popup.$content());\n\n    this._popup.option(\"onContentReady\", this._contentReadyHandler.bind(this));\n\n    this._contentReadyHandler();\n  },\n  _popupHidingHandler: function _popupHidingHandler() {\n    this.callBase();\n    this.option(\"focusStateEnabled\") && this.focus();\n  },\n  _popupHiddenHandler: function _popupHiddenHandler() {\n    this.callBase();\n\n    if (this.option(\"_scrollToSelectedItemEnabled\")) {\n      translator.resetPosition($(this._popup.content()).parent());\n    }\n  },\n  _preventFocusOnPopup: commonUtils.noop,\n  _popupConfig: function _popupConfig() {\n    var result = extend(this.callBase(), {\n      showTitle: this.option(\"showPopupTitle\"),\n      title: this.option(\"title\"),\n      titleTemplate: this._getTemplateByOption(\"titleTemplate\"),\n      onTitleRendered: this.option(\"onTitleRendered\"),\n      toolbarItems: this._getPopupToolbarItems(),\n      fullScreen: this.option(\"fullScreen\"),\n      shading: this.option(\"shading\"),\n      closeOnTargetScroll: false,\n      closeOnOutsideClick: this.option(\"closeOnOutsideClick\"),\n      onPositioned: null\n    });\n    delete result.animation;\n    delete result.position;\n\n    result.maxHeight = function () {\n      return $(window).height();\n    };\n\n    each([\"position\", \"animation\", \"popupWidth\", \"popupHeight\"], function (_, optionName) {\n      if (void 0 !== this.option(optionName)) {\n        result[this._popupOptionMap(optionName)] = this.option(optionName);\n      }\n    }.bind(this));\n    return result;\n  },\n  _getPopupToolbarItems: function _getPopupToolbarItems() {\n    var buttonsConfig = \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : [];\n\n    var cancelButton = this._getCancelButtonConfig();\n\n    if (cancelButton) {\n      buttonsConfig.push(cancelButton);\n    }\n\n    var clearButton = this._getClearButtonConfig();\n\n    if (clearButton) {\n      buttonsConfig.push(clearButton);\n    }\n\n    return this._applyButtonsLocation(buttonsConfig);\n  },\n  _popupToolbarItemsConfig: function _popupToolbarItemsConfig() {\n    return [{\n      shortcut: \"done\",\n      options: {\n        onClick: this._applyButtonHandler.bind(this),\n        text: this.option(\"applyButtonText\")\n      }\n    }];\n  },\n  _getCancelButtonConfig: function _getCancelButtonConfig() {\n    return this.option(\"showCancelButton\") ? {\n      shortcut: \"cancel\",\n      onClick: this._cancelButtonHandler.bind(this),\n      options: {\n        onInitialized: function (e) {\n          e.component.registerKeyHandler(\"escape\", this.close.bind(this));\n        }.bind(this),\n        text: this.option(\"cancelButtonText\")\n      }\n    } : null;\n  },\n  _getClearButtonConfig: function _getClearButtonConfig() {\n    return this.option(\"showClearButton\") ? {\n      shortcut: \"clear\",\n      onClick: this._resetValue.bind(this),\n      options: {\n        text: this.option(\"clearButtonText\")\n      }\n    } : null;\n  },\n  _applyButtonHandler: function _applyButtonHandler() {\n    this.option(\"value\", this._valueGetter(this._currentSelectedItem()));\n    this.callBase();\n  },\n  _cancelButtonHandler: function _cancelButtonHandler() {\n    this._refreshSelected();\n\n    this.callBase();\n  },\n  _refreshPopupVisibility: function _refreshPopupVisibility() {\n    if (this.option(\"opened\")) {\n      this._updatePopupHeight();\n    }\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    if (this.option(\"usePopover\") && !this.option(\"popupWidth\")) {\n      this.option(\"popupWidth\", this.$element().width());\n    }\n\n    this.callBase();\n  },\n  _updatePopupDimensions: function _updatePopupDimensions() {\n    this._updatePopupHeight();\n  },\n  _input: function _input() {\n    return this._$searchBox || this.callBase();\n  },\n  _renderPopupContent: function _renderPopupContent() {\n    this.callBase();\n\n    this._renderSearch();\n  },\n  _attachSearchChildProcessor: function _attachSearchChildProcessor(searchComponent) {\n    this._listKeyboardProcessor = this._listKeyboardProcessor || searchComponent._keyboardProcessor.attachChildProcessor();\n\n    this._setListOption(\"_keyboardProcessor\", this._listKeyboardProcessor);\n  },\n  _detachSearchChildProcessor: function _detachSearchChildProcessor() {\n    this._setListOption(\"_keyboardProcessor\", null);\n  },\n  _renderSearch: function _renderSearch() {\n    var isSearchEnabled = this.option(\"searchEnabled\");\n\n    this._toggleSearchClass(isSearchEnabled);\n\n    if (isSearchEnabled) {\n      var $searchWrapper = this._$searchWrapper = $(\"<div>\").addClass(LOOKUP_SEARCH_WRAPPER_CLASS);\n      var $searchBox = this._$searchBox = $(\"<div>\").addClass(LOOKUP_SEARCH_CLASS).appendTo($searchWrapper);\n      var currentDevice = devices.current();\n      var searchMode = currentDevice.android && currentDevice.version[0] >= 5 ? \"text\" : \"search\";\n      this._searchBox = this._createComponent($searchBox, TextBox, {\n        onDisposing: function () {\n          this._detachSearchChildProcessor();\n        }.bind(this),\n        onFocusIn: this._searchFocusHandler.bind(this),\n        onFocusOut: this._searchBlurHandler.bind(this),\n        mode: searchMode,\n        showClearButton: true,\n        valueChangeEvent: this.option(\"valueChangeEvent\"),\n        onValueChanged: this._searchHandler.bind(this)\n      });\n\n      this._registerSearchKeyHandlers();\n\n      $searchWrapper.insertBefore(this._$list);\n\n      this._setSearchPlaceholder();\n    }\n  },\n  _searchFocusHandler: function _searchFocusHandler(e) {\n    this._attachSearchChildProcessor(e.component);\n  },\n  _searchBlurHandler: function _searchBlurHandler() {\n    this._detachSearchChildProcessor();\n  },\n  _removeSearch: function _removeSearch() {\n    this._$searchWrapper && this._$searchWrapper.remove();\n    delete this._$searchWrapper;\n    this._$searchBox && this._$searchBox.remove();\n    delete this._$searchBox;\n    delete this._searchBox;\n  },\n  _selectListItemHandler: function _selectListItemHandler(e) {\n    var $itemElement = $(this._list.option(\"focusedElement\"));\n\n    if (!$itemElement.length) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this._selectListItem(e.itemData, $itemElement);\n  },\n  _registerSearchKeyHandlers: function _registerSearchKeyHandlers() {\n    this._searchBox.registerKeyHandler(\"escape\", this.close.bind(this));\n\n    this._searchBox.registerKeyHandler(\"enter\", this._selectListItemHandler.bind(this));\n\n    this._searchBox.registerKeyHandler(\"space\", this._selectListItemHandler.bind(this));\n\n    this._searchBox.registerKeyHandler(\"end\", commonUtils.noop);\n\n    this._searchBox.registerKeyHandler(\"home\", commonUtils.noop);\n  },\n  _toggleSearchClass: function _toggleSearchClass(isSearchEnabled) {\n    if (this._popup) {\n      this._popup._wrapper().toggleClass(LOOKUP_POPUP_SEARCH_CLASS, isSearchEnabled);\n    }\n  },\n  _setSearchPlaceholder: function _setSearchPlaceholder() {\n    if (!this._$searchBox) {\n      return;\n    }\n\n    var minSearchLength = this.option(\"minSearchLength\");\n    var placeholder = this.option(\"searchPlaceholder\");\n\n    if (minSearchLength && placeholder === messageLocalization.format(\"Search\")) {\n      placeholder = messageLocalization.getFormatter(\"dxLookup-searchPlaceholder\")(minSearchLength);\n    }\n\n    this._searchBox.option(\"placeholder\", placeholder);\n  },\n  _setAriaTargetForList: commonUtils.noop,\n  _renderList: function _renderList() {\n    this.callBase();\n\n    this._list.registerKeyHandler(\"escape\", function () {\n      this.close();\n    }.bind(this));\n  },\n  _listConfig: function _listConfig() {\n    return extend(this.callBase(), {\n      tabIndex: 0,\n      grouped: this.option(\"grouped\"),\n      groupTemplate: this._getTemplateByOption(\"groupTemplate\"),\n      pullRefreshEnabled: this.option(\"pullRefreshEnabled\"),\n      useNativeScrolling: this.option(\"useNativeScrolling\"),\n      pullingDownText: this.option(\"pullingDownText\"),\n      pulledDownText: this.option(\"pulledDownText\"),\n      refreshingText: this.option(\"refreshingText\"),\n      pageLoadingText: this.option(\"pageLoadingText\"),\n      onScroll: this.option(\"onScroll\"),\n      onPullRefresh: this.option(\"onPullRefresh\"),\n      onPageLoading: this.option(\"onPageLoading\"),\n      pageLoadMode: this.option(\"pageLoadMode\"),\n      nextButtonText: this.option(\"nextButtonText\"),\n      _keyboardProcessor: this._listKeyboardProcessor,\n      indicateLoading: this.option(\"searchEnabled\"),\n      onSelectionChanged: this._getSelectionChangedHandler()\n    });\n  },\n  _getSelectionChangedHandler: function _getSelectionChangedHandler() {\n    return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : commonUtils.noop;\n  },\n  _listContentReadyHandler: function _listContentReadyHandler() {\n    this.callBase.apply(this, arguments);\n\n    this._refreshSelected();\n  },\n  _setFocusPolicy: function _setFocusPolicy() {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n\n    if (this.option(\"searchEnabled\")) {\n      this._searchBox.focus();\n    } else {\n      eventsEngine.trigger(this._$list, \"focus\");\n    }\n  },\n  _attachChildKeyboardEvents: commonUtils.noop,\n  _focusTarget: function _focusTarget() {\n    return this._$field;\n  },\n  _keyboardEventBindingTarget: function _keyboardEventBindingTarget() {\n    return this._$field;\n  },\n  _listItemClickHandler: function _listItemClickHandler(e) {\n    this._saveValueChangeEvent(e.event);\n\n    this._selectListItem(e.itemData, e.event.currentTarget);\n  },\n  _selectListItem: function _selectListItem(itemData, target) {\n    this._list.selectItem(target);\n\n    if (\"instantly\" === this.option(\"applyValueMode\")) {\n      this._applyButtonHandler();\n    }\n  },\n  _currentSelectedItem: function _currentSelectedItem() {\n    return this.option(\"grouped\") ? this._list.option(\"selectedItems[0]\").items[0] : this._list.option(\"selectedItems[0]\");\n  },\n  _resetValue: function _resetValue(e) {\n    this._saveValueChangeEvent(e.event);\n\n    this.option(\"value\", null);\n    this.option(\"opened\", false);\n  },\n  _searchValue: function _searchValue() {\n    return this.option(\"searchEnabled\") && this._searchBox ? this._searchBox.option(\"value\") : \"\";\n  },\n  _renderInputValue: function _renderInputValue() {\n    return this.callBase().always(function () {\n      this._refreshSelected();\n    }.bind(this));\n  },\n  _renderPlaceholder: function _renderPlaceholder() {\n    if (0 === this.$element().find(\".\" + TEXTEDITOR_INPUT_CLASS).length) {\n      return;\n    }\n\n    this.callBase();\n  },\n  _clean: function _clean() {\n    this._$fieldWrapper.remove();\n\n    this._$searchBox = null;\n    delete this._inkRipple;\n    this.callBase();\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name;\n    var value = args.value;\n\n    switch (name) {\n      case \"dataSource\":\n        this.callBase.apply(this, arguments);\n\n        this._renderField();\n\n        break;\n\n      case \"searchEnabled\":\n        if (this._popup) {\n          this._removeSearch();\n\n          this._renderSearch();\n        }\n\n        break;\n\n      case \"searchPlaceholder\":\n        this._setSearchPlaceholder();\n\n        break;\n\n      case \"minSearchLength\":\n        this._setSearchPlaceholder();\n\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"title\":\n      case \"titleTemplate\":\n      case \"onTitleRendered\":\n      case \"shading\":\n      case \"animation\":\n      case \"position\":\n      case \"closeOnOutsideClick\":\n        this._setPopupOption(name);\n\n        break;\n\n      case \"fullScreen\":\n      case \"usePopover\":\n      case \"placeholder\":\n        this._invalidate();\n\n        break;\n\n      case \"clearButtonText\":\n      case \"showClearButton\":\n      case \"showCancelButton\":\n        this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\n\n        break;\n\n      case \"applyValueMode\":\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"popupWidth\":\n        this._setPopupOption(\"popupWidth\", \"auto\" === value ? this.initialOption(\"popupWidth\") : value);\n\n        break;\n\n      case \"popupHeight\":\n        this._setPopupOption(\"popupHeight\", \"auto\" === value ? this.initialOption(\"popupHeight\") : value);\n\n        break;\n\n      case \"pullRefreshEnabled\":\n      case \"useNativeScrolling\":\n      case \"pullingDownText\":\n      case \"pulledDownText\":\n      case \"refreshingText\":\n      case \"pageLoadingText\":\n      case \"onScroll\":\n      case \"onPullRefresh\":\n      case \"onPageLoading\":\n      case \"nextButtonText\":\n      case \"grouped\":\n      case \"groupTemplate\":\n        this._setListOption(name);\n\n        break;\n\n      case \"pageLoadMode\":\n        this._setListOption(\"pageLoadMode\", this.option(\"pageLoadMode\"));\n\n        break;\n\n      case \"cleanSearchOnOpening\":\n      case \"_scrollToSelectedItemEnabled\":\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  focus: function focus() {\n    this.option(\"opened\") ? this._setFocusPolicy() : eventsEngine.trigger(this._focusTarget(), \"focus\");\n  },\n  field: function field() {\n    return this._$field;\n  }\n});\nregisterComponent(\"dxLookup\", Lookup);\nmodule.exports = Lookup;\nmodule.exports.default = module.exports;","map":null,"metadata":{},"sourceType":"script"}