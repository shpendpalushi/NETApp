{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_manager/ui.file_manager.item_list.thumbnails.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _contextmenu = require(\"../../events/contextmenu\");\n\nvar _uiFile_managerUtils = require(\"./ui.file_manager.utils.js\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _uiFile_manager = require(\"./ui.file_manager.item_list\");\n\nvar _uiFile_manager2 = _interopRequireDefault(_uiFile_manager);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS = \"dx-filemanager-thumbnails\";\nvar FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS = \"dx-filemanager-thumbnails-view-port\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS = \"dx-filemanager-thumbnails-container\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_CLASS = \"dx-filemanager-thumbnails-item\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS = \"dx-filemanager-thumbnails-item-content\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS = \"dx-filemanager-thumbnails-item-thumbnail\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS = \"dx-filemanager-thumbnails-item-spacer\";\nvar FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS = \"dx-filemanager-thumbnails-item-name\";\nvar FILE_MANAGER_ITEM_SELECTED_CLASS = \"dx-filemanager-item-selected\";\nvar FILE_MANAGER_ITEM_FOCUSED_CLASS = \"dx-filemanager-item-focused\";\nvar FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE = \"dxFileManager_thumbnails\";\n\nvar FileManagerThumbnailsItemList = function (_FileManagerItemListB) {\n  _inherits(FileManagerThumbnailsItemList, _FileManagerItemListB);\n\n  function FileManagerThumbnailsItemList() {\n    _classCallCheck(this, FileManagerThumbnailsItemList);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FileManagerThumbnailsItemList).apply(this, arguments));\n  }\n\n  _createClass(FileManagerThumbnailsItemList, [{\n    key: \"_init\",\n    value: function value() {\n      this._items = [];\n      this._currentLoadOperationId = 0;\n\n      _get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_init\", this).call(this);\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function value() {\n      _get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_initMarkup\", this).call(this);\n\n      var multipleSelection = \"multiple\" === this.option(\"selectionMode\");\n      var controllerOptions = {\n        onSelectionChanged: this._raiseSelectionChanged.bind(this)\n      };\n      var controllerClass = multipleSelection ? MultipleSelectionController : SingleSelectionController;\n      this._selectionController = new controllerClass(controllerOptions);\n      this._$itemViewContainer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CONTAINER_CLASS);\n      this._$viewPort = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_VIEW_PORT_CLASS);\n\n      this._$viewPort.append(this._$itemViewContainer);\n\n      this.$element().addClass(FILE_MANAGER_THUMBNAILS_ITEM_LIST_CLASS);\n      this.$element().append(this._$viewPort);\n      var contextMenuEvent = (0, _utils.addNamespace)(_contextmenu.name, FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\n      var clickEvent = (0, _utils.addNamespace)(\"click\", FILE_MANAGER_THUMBNAILS_EVENT_NAMESPACE);\n\n      _events_engine2.default.on(this.$element(), contextMenuEvent, this._onContextMenu.bind(this));\n\n      _events_engine2.default.on(this.$element(), clickEvent, this._onClick.bind(this));\n\n      this._loadItems();\n    }\n  }, {\n    key: \"_supportedKeys\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_supportedKeys\", this).call(this), {\n        rightArrow: function rightArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(1, true, e);\n        },\n        leftArrow: function leftArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(-1, true, e);\n        },\n        upArrow: function upArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(-1, false, e);\n        },\n        downArrow: function downArrow(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processMoveArrow(1, false, e);\n        },\n        home: function home(e) {\n          this._beforeKeyProcessing(e);\n\n          this._selectItemByIndex(0, true, e);\n        },\n        end: function end(e) {\n          this._beforeKeyProcessing(e);\n\n          this._selectItemByIndex(this._items.length - 1, true, e);\n        },\n        pageUp: function pageUp(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processPageChange(true, e);\n        },\n        pageDown: function pageDown(e) {\n          this._beforeKeyProcessing(e);\n\n          this._processPageChange(false, e);\n        },\n        space: function space(e) {\n          this._beforeKeyProcessing(e);\n\n          this._selectionController.invertFocusedItemSelection();\n        },\n        enter: function enter(e) {\n          this._beforeKeyProcessing(e);\n\n          this.tryOpen();\n        },\n        A: function A(e) {\n          this._beforeKeyProcessing(e);\n\n          if (e.ctrlKey) {\n            this._selectAll();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_beforeKeyProcessing\",\n    value: function value(e) {\n      e.preventDefault();\n\n      this._resetLayoutModel();\n    }\n  }, {\n    key: \"_processMoveArrow\",\n    value: function value(offset, horizontal, eventArgs) {\n      var item = this._getFocusedItem();\n\n      if (item) {\n        if (!horizontal) {\n          var layout = this._getLayoutModel();\n\n          if (!layout) {\n            return;\n          }\n\n          offset *= layout.itemPerRowCount;\n        }\n\n        var newItemIndex = item._state.index + offset;\n\n        this._selectItemByIndex(newItemIndex, true, eventArgs);\n      }\n    }\n  }, {\n    key: \"_processPageChange\",\n    value: function value(pageUp, eventArgs) {\n      var item = this._getFocusedItem();\n\n      if (!item) {\n        return;\n      }\n\n      var layout = this._getLayoutModel();\n\n      if (!layout) {\n        return;\n      }\n\n      var itemLayout = this._createItemLayoutModel(item._state.index);\n\n      var rowOffset = pageUp ? layout.rowPerPageRate : -layout.rowPerPageRate;\n      var newRowRate = itemLayout.itemRowIndex - rowOffset;\n      var roundFunc = pageUp ? Math.ceil : Math.floor;\n      var newRowIndex = roundFunc(newRowRate);\n      var newItemIndex = newRowIndex * layout.itemPerRowCount + itemLayout.itemColumnIndex;\n\n      if (newItemIndex < 0) {\n        newItemIndex = 0;\n      } else {\n        if (newItemIndex >= this._items.length) {\n          newItemIndex = this._items.length - 1;\n        }\n      }\n\n      this._selectItemByIndex(newItemIndex, true, eventArgs);\n    }\n  }, {\n    key: \"_onClick\",\n    value: function value(e) {\n      var $item = (0, _renderer2.default)(e.target).closest(this._getItemSelector());\n\n      if ($item.length > 0) {\n        this._selectItemByItemElement($item, e);\n      } else {\n        this.clearSelection();\n      }\n    }\n  }, {\n    key: \"_onContextMenu\",\n    value: function value(e) {\n      e.preventDefault();\n\n      this._onClick(e);\n\n      var items = this.getSelectedItems();\n\n      this._showContextMenu(items, e.target, e);\n    }\n  }, {\n    key: \"_selectItemByItemElement\",\n    value: function value($item, e) {\n      var index = $item.data(\"index\");\n\n      this._selectItemByIndex(index, false, e);\n    }\n  }, {\n    key: \"_getItemThumbnailCssClass\",\n    value: function value() {\n      return FILE_MANAGER_THUMBNAILS_ITEM_THUMBNAIL_CLASS;\n    }\n  }, {\n    key: \"_getItemSelector\",\n    value: function value() {\n      return \".\".concat(FILE_MANAGER_THUMBNAILS_ITEM_CLASS);\n    }\n  }, {\n    key: \"_onItemDblClick\",\n    value: function value(e) {\n      var $item = (0, _renderer2.default)(e.currentTarget);\n      var index = $item.data(\"index\");\n      var item = this._items[index];\n\n      this._raiseSelectedItemOpened(item);\n    }\n  }, {\n    key: \"_scrollToItem\",\n    value: function value(item) {\n      var layout = this._getLayoutModel();\n\n      if (!layout) {\n        return;\n      }\n\n      var itemRowIndex = Math.floor(item._state.index / layout.itemPerRowCount);\n      var itemTop = itemRowIndex * layout.itemHeight;\n      var itemBottom = itemTop + layout.itemHeight;\n      var newScrollTop = layout.viewPortScrollTop;\n\n      if (itemTop < layout.viewPortScrollTop) {\n        newScrollTop = itemTop;\n      } else {\n        if (itemBottom > layout.viewPortScrollBottom) {\n          newScrollTop = itemBottom - layout.viewPortHeight;\n        }\n      }\n\n      this._$viewPort.scrollTop(newScrollTop);\n    }\n  }, {\n    key: \"_resetLayoutModel\",\n    value: function value() {\n      this._layoutModel = null;\n    }\n  }, {\n    key: \"_getLayoutModel\",\n    value: function value() {\n      if (!this._layoutModel) {\n        this._layoutModel = this._createLayoutModel();\n      }\n\n      return this._layoutModel;\n    }\n  }, {\n    key: \"_createLayoutModel\",\n    value: function value() {\n      if (0 === this._items.length) {\n        return null;\n      }\n\n      var item = this._items[0];\n      var $item = item._state.$element;\n      var itemWidth = $item.outerWidth(true);\n\n      if (0 === itemWidth) {\n        return null;\n      }\n\n      var itemHeight = $item.outerHeight(true);\n\n      var viewPortWidth = this._$itemViewContainer.innerWidth();\n\n      var viewPortHeight = this._$viewPort.innerHeight();\n\n      var viewPortScrollTop = this._$viewPort.scrollTop();\n\n      var viewPortScrollBottom = viewPortScrollTop + viewPortHeight;\n      var itemPerRowCount = Math.floor(viewPortWidth / itemWidth);\n      var rowPerPageRate = viewPortHeight / itemHeight;\n      return {\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        viewPortWidth: viewPortWidth,\n        viewPortHeight: viewPortHeight,\n        viewPortScrollTop: viewPortScrollTop,\n        viewPortScrollBottom: viewPortScrollBottom,\n        itemPerRowCount: itemPerRowCount,\n        rowPerPageRate: rowPerPageRate\n      };\n    }\n  }, {\n    key: \"_createItemLayoutModel\",\n    value: function value(index) {\n      var layout = this._getLayoutModel();\n\n      if (!layout) {\n        return null;\n      }\n\n      var itemRowIndex = Math.floor(index / layout.itemPerRowCount);\n      var itemColumnIndex = index % layout.itemPerRowCount;\n      var itemTop = itemRowIndex * layout.itemHeight;\n      var itemBottom = itemTop + layout.itemHeight;\n      return {\n        itemRowIndex: itemRowIndex,\n        itemColumnIndex: itemColumnIndex,\n        itemTop: itemTop,\n        itemBottom: itemBottom\n      };\n    }\n  }, {\n    key: \"_selectAll\",\n    value: function value() {\n      this._selectionController.selectAll();\n    }\n  }, {\n    key: \"_selectItem\",\n    value: function value(item, scrollToItem, eventArgs) {\n      this._selectionController.selectItem(item, eventArgs);\n\n      if (scrollToItem) {\n        this._scrollToItem(item);\n      }\n    }\n  }, {\n    key: \"_selectItemByIndex\",\n    value: function value(index, scrollToItem, eventArgs) {\n      if (index >= 0 && index < this._items.length) {\n        var item = this._items[index];\n\n        this._selectItem(item, scrollToItem, eventArgs);\n      }\n    }\n  }, {\n    key: \"_getFocusedItem\",\n    value: function value() {\n      return this._selectionController.getFocusedItem();\n    }\n  }, {\n    key: \"_loadItems\",\n    value: function value() {\n      var _this = this;\n\n      var loadOperationId = this._getUniqueId();\n\n      this._currentLoadOperationId = loadOperationId;\n      (0, _deferred.when)(this._getItems()).then(function (items) {\n        if (_this._currentLoadOperationId === loadOperationId) {\n          _this._applyItems(items || []);\n        }\n      }, function (error) {\n        if (_this._currentLoadOperationId === loadOperationId) {\n          _this._raiseOnError(error);\n        }\n      });\n    }\n  }, {\n    key: \"_applyItems\",\n    value: function value(items) {\n      this._items = items;\n\n      this._selectionController.setItems(items);\n\n      this._renderItems(items);\n    }\n  }, {\n    key: \"_renderItems\",\n    value: function value(items) {\n      this._$itemViewContainer.empty();\n\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        item._state = {\n          index: i,\n          selected: false,\n          $element: null\n        };\n\n        this._renderItem(item);\n      }\n    }\n  }, {\n    key: \"_renderItem\",\n    value: function value(fileItemInfo) {\n      var $item = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_CLASS).attr(\"title\", this._getTooltipText(fileItemInfo)).data(\"index\", fileItemInfo._state.index);\n      var $itemContent = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_CONTENT_CLASS);\n\n      var $itemThumbnail = this._getItemThumbnailContainer(fileItemInfo);\n\n      _events_engine2.default.on($itemThumbnail, \"dragstart\", this._disableDragging);\n\n      var $itemSpacer = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_SPACER_CLASS);\n      var $itemName = (0, _renderer2.default)(\"<div>\").addClass(FILE_MANAGER_THUMBNAILS_ITEM_NAME_CLASS).text(fileItemInfo.fileItem.name);\n      $item.append($itemContent);\n      $itemContent.append($itemThumbnail, $itemSpacer, $itemName);\n\n      this._$itemViewContainer.append($item);\n\n      fileItemInfo._state.$element = $item;\n    }\n  }, {\n    key: \"_getTooltipText\",\n    value: function value(fileItemInfo) {\n      var item = fileItemInfo.fileItem;\n\n      if (item.tooltipText) {\n        return item.tooltipText;\n      }\n\n      var text = \"\".concat(item.name, \"\\r\\n\");\n\n      if (!item.isDirectory) {\n        text += \"\".concat(_message2.default.format(\"dxFileManager-listThumbnailsTooltipTextSize\"), \": \").concat((0, _uiFile_managerUtils.getDisplayFileSize)(item.size), \"\\r\\n\");\n      }\n\n      text += \"\".concat(_message2.default.format(\"dxFileManager-listThumbnailsTooltipTextDateModified\"), \": \").concat(item.dateModified);\n      return text;\n    }\n  }, {\n    key: \"_getUniqueId\",\n    value: function value() {\n      return \"\".concat(Date.now(), \"_\").concat(Math.round(1e5 * Math.random()));\n    }\n  }, {\n    key: \"_disableDragging\",\n    value: function value() {\n      return false;\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileManagerThumbnailsItemList.prototype), \"_getDefaultOptions\", this).call(this), {\n        focusStateEnabled: true\n      });\n    }\n  }, {\n    key: \"refresh\",\n    value: function value() {\n      this.clearSelection();\n\n      this._loadItems();\n    }\n  }, {\n    key: \"tryOpen\",\n    value: function value() {\n      var item = this._getFocusedItem();\n\n      if (item) {\n        this._raiseSelectedItemOpened(item);\n      }\n    }\n  }, {\n    key: \"clearSelection\",\n    value: function value() {\n      this._selectionController.clearSelection();\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function value() {\n      return this._selectionController.getSelectedItems();\n    }\n  }]);\n\n  return FileManagerThumbnailsItemList;\n}(_uiFile_manager2.default);\n\nvar SingleSelectionController = function () {\n  function SingleSelectionController(options) {\n    _classCallCheck(this, SingleSelectionController);\n\n    this._items = [];\n    this._selectionChangedHandler = options.onSelectionChanged;\n    this._selectionChanged = false;\n  }\n\n  _createClass(SingleSelectionController, [{\n    key: \"selectAll\",\n    value: function value() {}\n  }, {\n    key: \"clearSelection\",\n    value: function value() {\n      this._beginUpdate();\n\n      this._setAllItemsSelectedState(false);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"selectItem\",\n    value: function value(item, eventArgs) {\n      this._beginUpdate();\n\n      this._setAllItemsSelectedState(false, [item]);\n\n      this._setItemSelectedState(item, true);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"invertFocusedItemSelection\",\n    value: function value(item) {}\n  }, {\n    key: \"getFocusedItem\",\n    value: function value() {\n      var selectedItems = this.getSelectedItems();\n      return selectedItems.length > 0 ? selectedItems[0] : null;\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function value() {\n      return this._items.filter(function (item) {\n        return item._state.selected;\n      });\n    }\n  }, {\n    key: \"setItems\",\n    value: function value(items) {\n      this._items = items;\n    }\n  }, {\n    key: \"_setItemSelectedState\",\n    value: function value(item, selected) {\n      if (item._state.selected === selected) {\n        return;\n      }\n\n      item._state.selected = selected;\n\n      item._state.$element.toggleClass(FILE_MANAGER_ITEM_SELECTED_CLASS, selected);\n\n      this._selectionChanged = true;\n    }\n  }, {\n    key: \"_setAllItemsSelectedState\",\n    value: function value(selected, exceptedItems) {\n      for (var i = 0; i < this._items.length; i++) {\n        var item = this._items[i];\n\n        if (exceptedItems && exceptedItems.indexOf(item) !== -1) {\n          continue;\n        }\n\n        this._setItemSelectedState(item, selected);\n      }\n    }\n  }, {\n    key: \"_beginUpdate\",\n    value: function value() {\n      this._selectionChanged = false;\n    }\n  }, {\n    key: \"_endUpdate\",\n    value: function value() {\n      if (this._selectionChanged) {\n        this._selectionChangedHandler();\n\n        this._selectionChanged = false;\n      }\n    }\n  }]);\n\n  return SingleSelectionController;\n}();\n\nvar MultipleSelectionController = function (_SingleSelectionContr) {\n  _inherits(MultipleSelectionController, _SingleSelectionContr);\n\n  function MultipleSelectionController(options) {\n    var _this2;\n\n    _classCallCheck(this, MultipleSelectionController);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(MultipleSelectionController).call(this, options));\n    _this2._focusedItem = null;\n    return _this2;\n  }\n\n  _createClass(MultipleSelectionController, [{\n    key: \"selectAll\",\n    value: function value() {\n      this._beginUpdate();\n\n      this._setAllItemsSelectedState(true);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"selectItem\",\n    value: function value(item, eventArgs) {\n      this._beginUpdate();\n\n      if (eventArgs.shiftKey) {\n        this._setItemsRangeSelectedState(this._focusedItem._state.index, item._state.index, eventArgs.ctrlKey, true);\n      } else {\n        if (eventArgs.ctrlKey) {\n          var needSelect = 1 === this._items.length && this._focusedItem === item || !item._state.selected;\n\n          this._setItemSelectedState(item, needSelect);\n        } else {\n          this._setAllItemsSelectedState(false, [item]);\n\n          this._setItemSelectedState(item, true);\n        }\n      }\n\n      this._setFocusedItem(item);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"_setItemsRangeSelectedState\",\n    value: function value(startIndex, endIndex, invert, selected) {\n      if (startIndex > endIndex) {\n        var temp = endIndex;\n        endIndex = startIndex;\n        startIndex = temp;\n      }\n\n      for (var i = startIndex; i <= endIndex; i++) {\n        var item = this._items[i];\n        var actualSelected = invert ? !item._state.selected : selected;\n\n        this._setItemSelectedState(item, actualSelected);\n      }\n    }\n  }, {\n    key: \"_setFocusedItem\",\n    value: function value(item) {\n      if (this._focusedItem === item) {\n        return;\n      }\n\n      if (this._focusedItem) {\n        this._focusedItem._state.$element.removeClass(FILE_MANAGER_ITEM_FOCUSED_CLASS);\n      }\n\n      item._state.$element.addClass(FILE_MANAGER_ITEM_FOCUSED_CLASS);\n\n      this._focusedItem = item;\n    }\n  }, {\n    key: \"invertFocusedItemSelection\",\n    value: function value() {\n      if (!this._focusedItem) {\n        return;\n      }\n\n      this._beginUpdate();\n\n      this._setItemSelectedState(this._focusedItem, !this._focusedItem._state.selected);\n\n      this._endUpdate();\n    }\n  }, {\n    key: \"getFocusedItem\",\n    value: function value() {\n      return this._focusedItem;\n    }\n  }, {\n    key: \"setItems\",\n    value: function value(items) {\n      _get(_getPrototypeOf(MultipleSelectionController.prototype), \"setItems\", this).call(this, items);\n\n      this._focusedItem = items.length > 0 ? items[0] : null;\n    }\n  }]);\n\n  return MultipleSelectionController;\n}(SingleSelectionController);\n\nmodule.exports = FileManagerThumbnailsItemList;","map":null,"metadata":{},"sourceType":"script"}