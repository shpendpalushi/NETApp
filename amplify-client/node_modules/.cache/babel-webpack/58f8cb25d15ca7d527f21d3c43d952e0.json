{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.column_fixing.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _wheel = require(\"../../events/core/wheel\");\n\nvar _wheel2 = _interopRequireDefault(_wheel);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _uiGrid_core = require(\"../grid_core/ui.grid_core.utils\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _translator2 = _interopRequireDefault(_translator);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar CONTENT_CLASS = \"content\";\nvar CONTENT_FIXED_CLASS = \"content-fixed\";\nvar MASTER_DETAIL_CELL_CLASS = \"dx-master-detail-cell\";\nvar FIRST_CELL_CLASS = \"dx-first-cell\";\nvar LAST_CELL_CLASS = \"dx-last-cell\";\nvar HOVER_STATE_CLASS = \"dx-state-hover\";\nvar FIXED_COL_CLASS = \"dx-col-fixed\";\nvar FIXED_COLUMNS_CLASS = \"dx-fixed-columns\";\nvar POINTER_EVENTS_TARGET_CLASS = \"dx-pointer-events-target\";\nvar POINTER_EVENTS_NONE_CLASS = \"dx-pointer-events-none\";\nvar COMMAND_TRANSPARENT = \"transparent\";\nvar GROUP_ROW_CLASS = \"dx-group-row\";\n\nvar getTransparentColumnIndex = function getTransparentColumnIndex(fixedColumns) {\n  var transparentColumnIndex = -1;\n  (0, _iterator.each)(fixedColumns, function (index, column) {\n    if (column.command === COMMAND_TRANSPARENT) {\n      transparentColumnIndex = index;\n      return false;\n    }\n  });\n  return transparentColumnIndex;\n};\n\nvar normalizeColumnWidths = function normalizeColumnWidths(fixedColumns, widths, fixedWidths) {\n  var i;\n  var fixedColumnIndex = 0;\n\n  if (fixedColumns && widths && fixedWidths) {\n    for (i = 0; i < fixedColumns.length; i++) {\n      if (fixedColumns[i].command === COMMAND_TRANSPARENT) {\n        fixedColumnIndex += fixedColumns[i].colspan;\n      } else {\n        if (widths[fixedColumnIndex] < fixedWidths[i]) {\n          widths[fixedColumnIndex] = fixedWidths[i];\n        }\n\n        fixedColumnIndex++;\n      }\n    }\n  }\n\n  return widths;\n};\n\nvar baseFixedColumns = {\n  init: function init() {\n    this.callBase();\n    this._isFixedTableRendering = false;\n    this._isFixedColumns = false;\n  },\n  _createCol: function _createCol(column) {\n    return this.callBase(column).toggleClass(FIXED_COL_CLASS, !!(this._isFixedTableRendering && (column.fixed || column.command && column.command !== COMMAND_TRANSPARENT)));\n  },\n  _correctColumnIndicesForFixedColumns: function _correctColumnIndicesForFixedColumns(fixedColumns, change) {\n    var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\n    var transparentColspan = fixedColumns[transparentColumnIndex].colspan;\n    var columnIndices = change && change.columnIndices;\n\n    if (columnIndices) {\n      change.columnIndices = columnIndices.map(function (columnIndices) {\n        if (columnIndices) {\n          return columnIndices.map(function (columnIndex) {\n            if (columnIndex < transparentColumnIndex) {\n              return columnIndex;\n            } else {\n              if (columnIndex >= transparentColumnIndex + transparentColspan) {\n                return columnIndex - transparentColspan + 1;\n              }\n            }\n\n            return -1;\n          }).filter(function (columnIndex) {\n            return columnIndex >= 0;\n          });\n        }\n      });\n    }\n  },\n  _renderTable: function _renderTable(options) {\n    var that = this;\n    var $fixedTable;\n    var $table;\n    var fixedColumns = that.getFixedColumns();\n    that._isFixedColumns = !!fixedColumns.length;\n    $table = that.callBase(options);\n\n    if (that._isFixedColumns) {\n      that._isFixedTableRendering = true;\n      var change = options && options.change;\n      var columnIndices = change && change.columnIndices;\n\n      that._correctColumnIndicesForFixedColumns(fixedColumns, change);\n\n      $fixedTable = that._createTable(fixedColumns);\n\n      that._renderRows($fixedTable, (0, _extend.extend)({}, options, {\n        columns: fixedColumns\n      }));\n\n      that._updateContent($fixedTable, change);\n\n      if (columnIndices) {\n        change.columnIndices = columnIndices;\n      }\n\n      that._isFixedTableRendering = false;\n    } else {\n      that._fixedTableElement && that._fixedTableElement.parent().remove();\n      that._fixedTableElement = null;\n    }\n\n    return $table;\n  },\n  _renderRow: function _renderRow($table, options) {\n    var fixedCells;\n    var fixedCorrection;\n    var cells = options.row.cells;\n    this.callBase.apply(this, arguments);\n\n    if (this._isFixedTableRendering && cells && cells.length) {\n      fixedCorrection = 0;\n      fixedCells = options.row.cells || [];\n      cells = cells.slice();\n      options.row.cells = cells;\n\n      for (var i = 0; i < fixedCells.length; i++) {\n        if (fixedCells[i].column && fixedCells[i].column.command === COMMAND_TRANSPARENT) {\n          fixedCorrection = (fixedCells[i].column.colspan || 1) - 1;\n          continue;\n        }\n\n        cells[i + fixedCorrection] = fixedCells[i];\n      }\n    }\n  },\n  _createCell: function _createCell(options) {\n    var that = this;\n    var column = options.column;\n    var columnCommand = column && column.command;\n    var rowType = options.rowType;\n    var $cell = that.callBase.apply(that, arguments);\n    var fixedColumns;\n    var prevFixedColumn;\n    var transparentColumnIndex;\n\n    if (that._isFixedTableRendering || \"filter\" === rowType) {\n      fixedColumns = that.getFixedColumns();\n      transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\n      prevFixedColumn = fixedColumns[transparentColumnIndex - 1];\n    }\n\n    if (that._isFixedTableRendering) {\n      if (columnCommand === COMMAND_TRANSPARENT) {\n        $cell.addClass(POINTER_EVENTS_NONE_CLASS).toggleClass(FIRST_CELL_CLASS, 0 === transparentColumnIndex || prevFixedColumn && \"expand\" === prevFixedColumn.command).toggleClass(LAST_CELL_CLASS, fixedColumns.length && transparentColumnIndex === fixedColumns.length - 1);\n\n        if (\"freeSpace\" !== rowType) {\n          _uiGrid_core2.default.setEmptyText($cell);\n        }\n      }\n    } else {\n      if (\"filter\" === rowType) {\n        $cell.toggleClass(FIRST_CELL_CLASS, options.columnIndex === transparentColumnIndex);\n      }\n    }\n\n    return $cell;\n  },\n  _wrapTableInScrollContainer: function _wrapTableInScrollContainer() {\n    var $scrollContainer = this.callBase.apply(this, arguments);\n\n    if (this._isFixedTableRendering) {\n      $scrollContainer.addClass(this.addWidgetPrefix(CONTENT_FIXED_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS);\n    }\n\n    return $scrollContainer;\n  },\n  _renderCellContent: function _renderCellContent($cell, options) {\n    var that = this;\n    var columns;\n    var isEmptyCell;\n    var transparentColumnIndex;\n    var alignByFixedColumnCellCount;\n    var column = options.column;\n    var isFixedTableRendering = that._isFixedTableRendering;\n    var isGroupCell = \"group\" === options.rowType && (0, _type.isDefined)(column.groupIndex);\n\n    if (isFixedTableRendering && isGroupCell && !column.command && !column.groupCellTemplate) {\n      $cell.css(\"pointerEvents\", \"none\");\n    }\n\n    if (!isFixedTableRendering && that._isFixedColumns) {\n      isEmptyCell = column.fixed || column.command && false !== column.fixed;\n\n      if (isGroupCell) {\n        isEmptyCell = false;\n\n        if (options.row.summaryCells && options.row.summaryCells.length) {\n          columns = that._columnsController.getVisibleColumns();\n          alignByFixedColumnCellCount = that._getAlignByColumnCellCount ? that._getAlignByColumnCellCount(column.colspan, {\n            columns: columns,\n            row: options.row,\n            isFixed: true\n          }) : 0;\n\n          if (alignByFixedColumnCellCount > 0) {\n            transparentColumnIndex = getTransparentColumnIndex(that._columnsController.getFixedColumns());\n            isEmptyCell = columns.length - alignByFixedColumnCellCount < transparentColumnIndex;\n          }\n        }\n      }\n\n      if (isEmptyCell) {\n        if (that.option(\"legacyRendering\") || column.command && \"buttons\" !== column.type || \"group\" === options.rowType) {\n          $cell.html(\"&nbsp;\").addClass(column.cssClass);\n          return;\n        } else {\n          $cell.addClass(\"dx-hidden-cell\");\n        }\n      }\n    }\n\n    if (column.command !== COMMAND_TRANSPARENT) {\n      that.callBase($cell, options);\n    }\n  },\n  _getCellElementsCore: function _getCellElementsCore(rowIndex) {\n    var that = this;\n    var fixedColumn;\n    var fixedColumns;\n    var fixedColumnIndex;\n    var fixedCellElements;\n    var cellElements = that.callBase(rowIndex);\n    var isGroupRow = cellElements.parent().hasClass(GROUP_ROW_CLASS);\n    var index = \"columnHeadersView\" === that.name ? rowIndex : void 0;\n\n    if (that._fixedTableElement && cellElements) {\n      fixedColumns = that.getFixedColumns(index);\n      fixedCellElements = that._getRowElements(that._fixedTableElement).eq(rowIndex).children(\"td\");\n      (0, _iterator.each)(fixedCellElements, function (columnIndex, cell) {\n        if (isGroupRow) {\n          if (cellElements[columnIndex] && \"hidden\" !== cell.style.visibility) {\n            cellElements[columnIndex] = cell;\n          }\n        } else {\n          fixedColumn = fixedColumns[columnIndex];\n\n          if (fixedColumn) {\n            if (fixedColumn.command === COMMAND_TRANSPARENT) {\n              if (fixedCellElements.eq(columnIndex).hasClass(MASTER_DETAIL_CELL_CLASS)) {\n                cellElements[columnIndex] = cell || cellElements[columnIndex];\n              }\n            } else {\n              fixedColumnIndex = that._columnsController.getVisibleIndex(fixedColumn.index, index);\n              cellElements[fixedColumnIndex] = cell || cellElements[fixedColumnIndex];\n            }\n          }\n        }\n      });\n    }\n\n    return cellElements;\n  },\n  getColumnWidths: function getColumnWidths() {\n    var that = this;\n    var fixedWidths;\n    var result = that.callBase();\n    var fixedColumns = that.getFixedColumns();\n\n    if (that._fixedTableElement && result.length) {\n      fixedWidths = that.callBase(that._fixedTableElement);\n    }\n\n    return normalizeColumnWidths(fixedColumns, result, fixedWidths);\n  },\n  _getTableElement: function _getTableElement() {\n    var tableElement = this._isFixedTableRendering ? this._fixedTableElement : this.callBase();\n    return tableElement;\n  },\n  _setTableElement: function _setTableElement(tableElement) {\n    if (this._isFixedTableRendering) {\n      this._fixedTableElement = tableElement.addClass(POINTER_EVENTS_NONE_CLASS);\n    } else {\n      this.callBase(tableElement);\n    }\n  },\n  getColumns: function getColumns(rowIndex, $tableElement) {\n    $tableElement = $tableElement || this._getTableElement();\n\n    if (this._isFixedTableRendering || $tableElement && $tableElement.closest(\"table\").parent(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS)).length) {\n      return this.getFixedColumns(rowIndex);\n    }\n\n    return this.callBase(rowIndex, $tableElement);\n  },\n  getRowIndex: function getRowIndex($row) {\n    var $fixedTable = this._fixedTableElement;\n\n    if ($fixedTable && $fixedTable.find($row).length) {\n      return this._getRowElements($fixedTable).index($row);\n    }\n\n    return this.callBase($row);\n  },\n  getTableElements: function getTableElements() {\n    var result = this.callBase.apply(this, arguments);\n\n    if (this._fixedTableElement) {\n      result = (0, _renderer2.default)([result.get(0), this._fixedTableElement.get(0)]);\n    }\n\n    return result;\n  },\n  getFixedColumns: function getFixedColumns(rowIndex) {\n    return this._columnsController.getFixedColumns(rowIndex);\n  },\n  getFixedColumnsOffset: function getFixedColumnsOffset() {\n    var offset = {\n      left: 0,\n      right: 0\n    };\n    var $transparentColumn;\n    var positionTransparentColumn;\n\n    if (this._fixedTableElement) {\n      $transparentColumn = this.getTransparentColumnElement();\n      positionTransparentColumn = $transparentColumn.position();\n      offset = {\n        left: positionTransparentColumn.left,\n        right: this.element().outerWidth(true) - ($transparentColumn.outerWidth(true) + positionTransparentColumn.left)\n      };\n    }\n\n    return offset;\n  },\n  getTransparentColumnElement: function getTransparentColumnElement() {\n    return this._fixedTableElement && this._fixedTableElement.find(\".\" + POINTER_EVENTS_NONE_CLASS).first();\n  },\n  getFixedTableElement: function getFixedTableElement() {\n    return this._fixedTableElement;\n  },\n  isFixedColumns: function isFixedColumns() {\n    return this._isFixedColumns;\n  },\n  _resizeCore: function _resizeCore() {\n    this.callBase();\n    this.synchronizeRows();\n  },\n  setColumnWidths: function setColumnWidths(options) {\n    var columns;\n\n    var visibleColumns = this._columnsController.getVisibleColumns();\n\n    var widths = options.widths;\n    var isWidthsSynchronized = widths && widths.length && (0, _type.isDefined)(visibleColumns[0].visibleWidth);\n    var optionNames = options.optionNames;\n    var isColumnWidthChanged = optionNames && optionNames.width;\n    var useVisibleColumns = false;\n    this.callBase.apply(this, arguments);\n\n    if (this._fixedTableElement) {\n      if (this.option(\"legacyRendering\")) {\n        useVisibleColumns = widths && widths.length && !this.isScrollbarVisible(true);\n      } else {\n        var hasAutoWidth = widths && widths.some(function (width) {\n          return \"auto\" === width;\n        });\n        useVisibleColumns = hasAutoWidth && (!isWidthsSynchronized || !this.isScrollbarVisible(true));\n      }\n\n      if (useVisibleColumns) {\n        columns = visibleColumns;\n      }\n\n      this.callBase((0, _extend.extend)({}, options, {\n        $tableElement: this._fixedTableElement,\n        columns: columns,\n        fixed: true\n      }));\n    }\n\n    if (isWidthsSynchronized || isColumnWidthChanged && this.option(\"wordWrapEnabled\")) {\n      this.synchronizeRows();\n    }\n  },\n  _createColGroup: function _createColGroup(columns) {\n    if (!this.option(\"legacyRendering\") && this._isFixedTableRendering && !this.option(\"columnAutoWidth\")) {\n      var visibleColumns = this._columnsController.getVisibleColumns();\n\n      var useVisibleColumns = visibleColumns.filter(function (column) {\n        return !column.width;\n      }).length;\n\n      if (useVisibleColumns) {\n        columns = visibleColumns;\n      }\n    }\n\n    return this.callBase(columns);\n  },\n  _getClientHeight: function _getClientHeight(element) {\n    var boundingClientRectElement = element.getBoundingClientRect && element.getBoundingClientRect();\n    return boundingClientRectElement && boundingClientRectElement.height ? boundingClientRectElement.height : element.clientHeight;\n  },\n  synchronizeRows: function synchronizeRows() {\n    var that = this;\n    var rowHeight;\n    var fixedRowHeight;\n    var rowHeights = [];\n    var fixedRowHeights = [];\n    var rowIndex;\n    var heightTable;\n    var heightFixedTable;\n    var $rowElements;\n    var $fixedRowElements;\n    var $contentElement;\n\n    if (that._isFixedColumns && that._tableElement && that._fixedTableElement) {\n      heightTable = that._getClientHeight(that._tableElement.get(0));\n      heightFixedTable = that._getClientHeight(that._fixedTableElement.get(0));\n      $rowElements = that._getRowElements(that._tableElement);\n      $fixedRowElements = that._getRowElements(that._fixedTableElement);\n      $contentElement = that._findContentElement();\n\n      if (heightTable !== heightFixedTable) {\n        $contentElement && $contentElement.css(\"height\", heightTable);\n        $rowElements.css(\"height\", \"\");\n        $fixedRowElements.css(\"height\", \"\");\n\n        for (rowIndex = 0; rowIndex < $rowElements.length; rowIndex++) {\n          rowHeights.push(that._getClientHeight($rowElements.get(rowIndex)));\n          fixedRowHeights.push(that._getClientHeight($fixedRowElements.get(rowIndex)));\n        }\n\n        for (rowIndex = 0; rowIndex < $rowElements.length; rowIndex++) {\n          rowHeight = rowHeights[rowIndex];\n          fixedRowHeight = fixedRowHeights[rowIndex];\n\n          if (rowHeight > fixedRowHeight) {\n            $fixedRowElements.eq(rowIndex).css(\"height\", rowHeight);\n          } else {\n            if (rowHeight < fixedRowHeight) {\n              $rowElements.eq(rowIndex).css(\"height\", fixedRowHeight);\n            }\n          }\n        }\n\n        $contentElement && $contentElement.css(\"height\", \"\");\n      }\n    }\n  },\n  setScrollerSpacing: function setScrollerSpacing(width) {\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    this.callBase(width);\n    this.element().children(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS)).css({\n      paddingLeft: rtlEnabled ? width : \"\",\n      paddingRight: !rtlEnabled ? width : \"\"\n    });\n  }\n};\nvar ColumnHeadersViewFixedColumnsExtender = (0, _extend.extend)({}, baseFixedColumns, {\n  _getRowVisibleColumns: function _getRowVisibleColumns(rowIndex) {\n    if (this._isFixedTableRendering) {\n      return this.getFixedColumns(rowIndex);\n    }\n\n    return this.callBase(rowIndex);\n  },\n  getContextMenuItems: function getContextMenuItems(options) {\n    var that = this;\n    var column = options.column;\n    var onItemClick;\n    var columnFixingOptions = that.option(\"columnFixing\");\n    var items = that.callBase(options);\n\n    if (options.row && \"header\" === options.row.rowType) {\n      if (column && column.allowFixing) {\n        onItemClick = function onItemClick(params) {\n          switch (params.itemData.value) {\n            case \"none\":\n              that._columnsController.columnOption(column.index, \"fixed\", false);\n\n              break;\n\n            case \"left\":\n              that._columnsController.columnOption(column.index, {\n                fixed: true,\n                fixedPosition: \"left\"\n              });\n\n              break;\n\n            case \"right\":\n              that._columnsController.columnOption(column.index, {\n                fixed: true,\n                fixedPosition: \"right\"\n              });\n\n          }\n        };\n\n        items = items || [];\n        items.push({\n          text: columnFixingOptions.texts.fix,\n          beginGroup: true,\n          items: [{\n            text: columnFixingOptions.texts.leftPosition,\n            value: \"left\",\n            disabled: column.fixed && (!column.fixedPosition || \"left\" === column.fixedPosition),\n            onItemClick: onItemClick\n          }, {\n            text: columnFixingOptions.texts.rightPosition,\n            value: \"right\",\n            disabled: column.fixed && \"right\" === column.fixedPosition,\n            onItemClick: onItemClick\n          }]\n        }, {\n          text: columnFixingOptions.texts.unfix,\n          value: \"none\",\n          disabled: !column.fixed,\n          onItemClick: onItemClick\n        });\n      }\n    }\n\n    return items;\n  },\n  getFixedColumnElements: function getFixedColumnElements(rowIndex) {\n    var that = this;\n    var columnElements;\n    var transparentColumnIndex;\n    var $transparentColumnElement;\n\n    if ((0, _type.isDefined)(rowIndex)) {\n      return this._fixedTableElement && this._getRowElements(this._fixedTableElement).eq(rowIndex).children();\n    }\n\n    columnElements = that.getColumnElements();\n    $transparentColumnElement = that.getTransparentColumnElement();\n\n    if (columnElements && $transparentColumnElement && $transparentColumnElement.length) {\n      transparentColumnIndex = getTransparentColumnIndex(that.getFixedColumns());\n      columnElements.splice(transparentColumnIndex, $transparentColumnElement.get(0).colSpan, $transparentColumnElement.get(0));\n    }\n\n    return columnElements;\n  },\n  getColumnWidths: function getColumnWidths() {\n    var that = this;\n    var fixedWidths;\n    var result = that.callBase();\n    var $fixedColumnElements = that.getFixedColumnElements();\n    var fixedColumns = that.getFixedColumns();\n\n    if (that._fixedTableElement) {\n      if ($fixedColumnElements && $fixedColumnElements.length) {\n        fixedWidths = that._getWidths($fixedColumnElements);\n      } else {\n        fixedWidths = that.callBase(that._fixedTableElement);\n      }\n    }\n\n    return normalizeColumnWidths(fixedColumns, result, fixedWidths);\n  }\n});\nvar RowsViewFixedColumnsExtender = (0, _extend.extend)({}, baseFixedColumns, {\n  _detachHoverEvents: function _detachHoverEvents() {\n    this._fixedTableElement && _events_engine2.default.off(this._fixedTableElement, \"mouseover mouseout\", \".dx-data-row\");\n    this._tableElement && _events_engine2.default.off(this._tableElement, \"mouseover mouseout\", \".dx-data-row\");\n  },\n  _attachHoverEvents: function _attachHoverEvents() {\n    var that = this;\n\n    var attachHoverEvent = function attachHoverEvent($table) {\n      _events_engine2.default.on($table, \"mouseover mouseout\", \".dx-data-row\", that.createAction(function (args) {\n        var event = args.event;\n        var rowIndex = that.getRowIndex((0, _renderer2.default)(event.target).closest(\".dx-row\"));\n        var isHover = \"mouseover\" === event.type;\n\n        if (rowIndex >= 0) {\n          that._tableElement && that._getRowElements(that._tableElement).eq(rowIndex).toggleClass(HOVER_STATE_CLASS, isHover);\n          that._fixedTableElement && that._getRowElements(that._fixedTableElement).eq(rowIndex).toggleClass(HOVER_STATE_CLASS, isHover);\n        }\n      }));\n    };\n\n    if (that._fixedTableElement && that._tableElement) {\n      attachHoverEvent(that._fixedTableElement);\n      attachHoverEvent(that._tableElement);\n    }\n  },\n  _findContentElement: function _findContentElement() {\n    var that = this;\n    var $content;\n    var scrollable;\n    var scrollTop;\n    var contentClass = that.addWidgetPrefix(CONTENT_CLASS);\n    var element = that.element();\n    var scrollDelay = _browser2.default.mozilla ? 60 : 0;\n\n    if (element && that._isFixedTableRendering) {\n      $content = element.children(\".\" + contentClass);\n      scrollable = that.getScrollable();\n\n      if (!$content.length && scrollable) {\n        $content = (0, _renderer2.default)(\"<div>\").addClass(contentClass);\n\n        _events_engine2.default.on($content, \"scroll\", function (e) {\n          clearTimeout(that._fixedScrollTimeout);\n          that._fixedScrollTimeout = setTimeout(function () {\n            scrollTop = (0, _renderer2.default)(e.target).scrollTop();\n            scrollable.scrollTo({\n              y: scrollTop\n            });\n          }, scrollDelay);\n        });\n\n        _events_engine2.default.on($content, _wheel2.default.name, function (e) {\n          if (scrollable) {\n            scrollTop = scrollable.scrollTop();\n            scrollable.scrollTo({\n              y: scrollTop - e.delta\n            });\n\n            if (scrollable.scrollTop() > 0 && scrollable.scrollTop() + scrollable.clientHeight() < scrollable.scrollHeight() + that.getScrollbarWidth()) {\n              return false;\n            }\n          }\n        });\n\n        $content.appendTo(element);\n      }\n\n      return $content;\n    }\n\n    return that.callBase();\n  },\n  _updateScrollable: function _updateScrollable() {\n    this.callBase();\n    var scrollable = this.getScrollable();\n    var scrollTop = scrollable && scrollable.scrollOffset().top;\n\n    this._updateFixedTablePosition(scrollTop);\n  },\n  _renderContent: function _renderContent(contentElement, tableElement) {\n    if (this._isFixedTableRendering) {\n      return contentElement.empty().addClass(this.addWidgetPrefix(CONTENT_CLASS) + \" \" + this.addWidgetPrefix(CONTENT_FIXED_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS).append(tableElement);\n    }\n\n    return this.callBase(contentElement, tableElement);\n  },\n  _getGroupCellOptions: function _getGroupCellOptions(options) {\n    if (this._isFixedTableRendering) {\n      return this.callBase((0, _extend.extend)({}, options, {\n        columns: this._columnsController.getVisibleColumns()\n      }));\n    }\n\n    return this.callBase(options);\n  },\n  _renderGroupedCells: function _renderGroupedCells($row, options) {\n    return this.callBase($row, (0, _extend.extend)({}, options, {\n      columns: this._columnsController.getVisibleColumns()\n    }));\n  },\n  _renderGroupSummaryCells: function _renderGroupSummaryCells($row, options) {\n    if (this._isFixedTableRendering) {\n      this.callBase($row, (0, _extend.extend)({}, options, {\n        columns: this._columnsController.getVisibleColumns()\n      }));\n    } else {\n      this.callBase($row, options);\n    }\n  },\n  _hasAlignByColumnSummaryItems: function _hasAlignByColumnSummaryItems(columnIndex, options) {\n    var result = this.callBase.apply(this, arguments);\n    var column = options.columns[columnIndex];\n\n    if (options.isFixed) {\n      return column.fixed && (result || \"right\" === column.fixedPosition);\n    }\n\n    return result && !column.fixed;\n  },\n  _renderGroupSummaryCellsCore: function _renderGroupSummaryCellsCore($groupCell, options, groupCellColSpan, alignByColumnCellCount) {\n    var startColumnIndex;\n    var transparentColumnIndex;\n    var alignByFixedColumnCellCount;\n\n    if (this._isFixedTableRendering) {\n      options.isFixed = true;\n      alignByFixedColumnCellCount = this._getAlignByColumnCellCount(groupCellColSpan, options);\n      options.isFixed = false;\n      startColumnIndex = options.columns.length - alignByFixedColumnCellCount;\n      options = (0, _extend.extend)({}, options, {\n        columns: this.getFixedColumns()\n      });\n      transparentColumnIndex = getTransparentColumnIndex(options.columns);\n\n      if (startColumnIndex < transparentColumnIndex) {\n        alignByFixedColumnCellCount -= options.columns[transparentColumnIndex].colspan - 1 || 0;\n        groupCellColSpan -= options.columns[transparentColumnIndex].colspan - 1 || 0;\n      } else {\n        if (alignByColumnCellCount > 0) {\n          $groupCell.css(\"visibility\", \"hidden\");\n        }\n      }\n\n      alignByColumnCellCount = alignByFixedColumnCellCount;\n    }\n\n    this.callBase($groupCell, options, groupCellColSpan, alignByColumnCellCount);\n  },\n  _getSummaryCellIndex: function _getSummaryCellIndex(columnIndex, columns) {\n    var transparentColumnIndex;\n\n    if (this._isFixedTableRendering) {\n      transparentColumnIndex = getTransparentColumnIndex(columns);\n\n      if (columnIndex > transparentColumnIndex) {\n        columnIndex += columns[transparentColumnIndex].colspan - 1;\n      }\n\n      return columnIndex;\n    }\n\n    return this.callBase.apply(this, arguments);\n  },\n  _renderCore: function _renderCore(change) {\n    this._detachHoverEvents();\n\n    this.callBase(change);\n    var isFixedColumns = this._isFixedColumns;\n    this.element().toggleClass(FIXED_COLUMNS_CLASS, isFixedColumns);\n\n    if (this.option(\"hoverStateEnabled\") && isFixedColumns) {\n      this._attachHoverEvents();\n    }\n  },\n  setRowsOpacity: function setRowsOpacity(columnIndex, value) {\n    this.callBase(columnIndex, value);\n\n    var $rows = this._getRowElements(this._fixedTableElement);\n\n    this._setRowsOpacityCore($rows, this.getFixedColumns(), columnIndex, value);\n  },\n  optionChanged: function optionChanged(args) {\n    var that = this;\n    that.callBase(args);\n\n    if (\"hoverStateEnabled\" === args.name && that._isFixedColumns) {\n      args.value ? this._attachHoverEvents() : this._detachHoverEvents();\n    }\n  },\n  getCellIndex: function getCellIndex($cell) {\n    var $fixedTable = this._fixedTableElement;\n    var columns;\n    var cellIndex = 0;\n\n    if ($fixedTable && $cell.is(\"td\") && $cell.closest($fixedTable).length) {\n      columns = this.getFixedColumns();\n      (0, _iterator.each)(columns, function (index, column) {\n        if (index === $cell[0].cellIndex) {\n          return false;\n        }\n\n        if (column.colspan) {\n          cellIndex += column.colspan;\n          return;\n        }\n\n        cellIndex++;\n      });\n      return cellIndex;\n    }\n\n    return this.callBase.apply(this, arguments);\n  },\n  _updateFixedTablePosition: function _updateFixedTablePosition(scrollTop, needFocus) {\n    if (this._fixedTableElement && this._tableElement) {\n      var $focusedElement;\n      var editorFactory = this.getController(\"editorFactory\");\n\n      this._fixedTableElement.parent().scrollTop(scrollTop);\n\n      if (needFocus) {\n        $focusedElement = editorFactory.focus();\n        $focusedElement && editorFactory.focus($focusedElement);\n      }\n    }\n  },\n  setScrollerSpacing: function setScrollerSpacing(vWidth, hWidth) {\n    var that = this;\n    var useNativeScrolling;\n    var styles = {\n      marginBottom: 0\n    };\n    var $fixedContent = that.element().children(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS));\n\n    if ($fixedContent.length && that._fixedTableElement) {\n      $fixedContent.css(styles);\n\n      that._fixedTableElement.css(styles);\n\n      styles[that.option(\"rtlEnabled\") ? \"marginLeft\" : \"marginRight\"] = vWidth;\n      styles.marginBottom = hWidth;\n      useNativeScrolling = that._scrollable && that._scrollable.option(\"useNative\");\n      (useNativeScrolling ? $fixedContent : that._fixedTableElement).css(styles);\n    }\n  },\n  _getElasticScrollTop: function _getElasticScrollTop(e) {\n    var maxScrollTop;\n    var scrollableContent;\n    var scrollableContainer;\n    var elasticScrollTop = 0;\n    var scrollbarWidth = this.getScrollbarWidth(true);\n\n    if (e.scrollOffset.top < 0) {\n      elasticScrollTop = -e.scrollOffset.top;\n    } else {\n      if (e.reachedBottom) {\n        scrollableContent = this._findContentElement();\n        scrollableContainer = e.component._container();\n        maxScrollTop = Math.max(scrollableContent.height() + scrollbarWidth - scrollableContainer.height(), 0);\n        elasticScrollTop = maxScrollTop - e.scrollOffset.top;\n      }\n    }\n\n    return elasticScrollTop;\n  },\n  _applyElasticScrolling: function _applyElasticScrolling(e) {\n    if (this._fixedTableElement) {\n      var elasticScrollTop = this._getElasticScrollTop(e);\n\n      if (0 !== Math.ceil(elasticScrollTop)) {\n        _translator2.default.move(this._fixedTableElement, {\n          top: elasticScrollTop\n        });\n      } else {\n        this._fixedTableElement.css(\"transform\", \"\");\n      }\n    }\n  },\n  _handleScroll: function _handleScroll(e) {\n    this._updateFixedTablePosition(e.scrollOffset.top, true);\n\n    this._applyElasticScrolling(e);\n\n    this.callBase(e);\n  },\n  _updateContentPosition: function _updateContentPosition(isRender) {\n    this.callBase.apply(this, arguments);\n\n    if (!isRender) {\n      this._updateFixedTablePosition(this._scrollTop);\n    }\n  },\n  _afterRowPrepared: function _afterRowPrepared(e) {\n    if (this._isFixedTableRendering) {\n      return;\n    }\n\n    this.callBase(e);\n  },\n  _scrollToElement: function _scrollToElement($element) {\n    this.callBase($element, this.getFixedColumnsOffset());\n  },\n  dispose: function dispose() {\n    this.callBase.apply(this, arguments);\n    clearTimeout(this._fixedScrollTimeout);\n  }\n});\nvar FooterViewFixedColumnsExtender = baseFixedColumns;\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      columnFixing: {\n        enabled: false,\n        texts: {\n          fix: _message2.default.format(\"dxDataGrid-columnFixingFix\"),\n          unfix: _message2.default.format(\"dxDataGrid-columnFixingUnfix\"),\n          leftPosition: _message2.default.format(\"dxDataGrid-columnFixingLeftPosition\"),\n          rightPosition: _message2.default.format(\"dxDataGrid-columnFixingRightPosition\")\n        }\n      }\n    };\n  },\n  extenders: {\n    views: {\n      columnHeadersView: ColumnHeadersViewFixedColumnsExtender,\n      rowsView: RowsViewFixedColumnsExtender,\n      footerView: FooterViewFixedColumnsExtender\n    },\n    controllers: function () {\n      var normalizeColumnIndicesByPoints = function normalizeColumnIndicesByPoints(columns, fixedColumns, pointsByColumns) {\n        var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\n        var correctIndex = columns.length - fixedColumns.length;\n        (0, _iterator.each)(pointsByColumns, function (_, point) {\n          if (point.index > transparentColumnIndex) {\n            point.columnIndex += correctIndex;\n            point.index += correctIndex;\n          }\n        });\n        return pointsByColumns;\n      };\n\n      return {\n        draggingHeader: {\n          _generatePointsByColumns: function _generatePointsByColumns(options) {\n            var pointsByColumns;\n            var visibleColumns = options.columns;\n            var targetDraggingPanel = options.targetDraggingPanel;\n\n            if (targetDraggingPanel && \"headers\" === targetDraggingPanel.getName() && targetDraggingPanel.isFixedColumns()) {\n              if (options.sourceColumn.fixed) {\n                if (!options.rowIndex) {\n                  options.columnElements = targetDraggingPanel.getFixedColumnElements(0);\n                }\n\n                options.columns = targetDraggingPanel.getFixedColumns(options.rowIndex);\n                pointsByColumns = this.callBase(options);\n                normalizeColumnIndicesByPoints(visibleColumns, options.columns, pointsByColumns);\n                return pointsByColumns;\n              }\n            }\n\n            return this.callBase(options);\n          },\n          _pointCreated: function _pointCreated(point, columns, location, sourceColumn) {\n            var result = this.callBase.apply(this, arguments);\n\n            var $transparentColumn = this._columnHeadersView.getTransparentColumnElement();\n\n            var boundingRect;\n\n            if (!result && \"headers\" === location && $transparentColumn && $transparentColumn.length) {\n              boundingRect = $transparentColumn.get(0).getBoundingClientRect();\n\n              if (sourceColumn && sourceColumn.fixed) {\n                return \"right\" === sourceColumn.fixedPosition ? point.x < boundingRect.right : point.x > boundingRect.left;\n              } else {\n                return point.x < boundingRect.left || point.x > boundingRect.right;\n              }\n            }\n\n            return result;\n          }\n        },\n        columnsResizer: {\n          _generatePointsByColumns: function _generatePointsByColumns() {\n            var that = this;\n            var columnsController = that._columnsController;\n\n            var columns = columnsController && that._columnsController.getVisibleColumns();\n\n            var fixedColumns = columnsController && that._columnsController.getFixedColumns();\n\n            var cells = that._columnHeadersView.getFixedColumnElements();\n\n            var pointsByFixedColumns = [];\n            that.callBase();\n\n            if (cells && cells.length > 0) {\n              pointsByFixedColumns = _uiGrid_core2.default.getPointsByColumns(cells, function (point) {\n                return that._pointCreated(point, cells.length, fixedColumns);\n              });\n              that._pointsByFixedColumns = normalizeColumnIndicesByPoints(columns, fixedColumns, pointsByFixedColumns);\n            }\n          },\n          _pointCreated: function _pointCreated(point, cellsLength, columns) {\n            var currentColumn;\n            var nextColumn;\n            var isWidgetResizingMode = \"widget\" === this.option(\"columnResizingMode\");\n\n            if (point.index > 0 && point.index < cellsLength) {\n              currentColumn = columns[point.columnIndex - 1] || {};\n              nextColumn = columns[point.columnIndex] || {};\n\n              if (currentColumn.fixed || nextColumn.fixed) {\n                point.columnIndex -= 1;\n                return !((currentColumn.allowResizing || currentColumn.command === COMMAND_TRANSPARENT) && (isWidgetResizingMode || nextColumn.allowResizing || nextColumn.command === COMMAND_TRANSPARENT));\n              }\n            }\n\n            return this.callBase.apply(this, arguments);\n          },\n          _getTargetPoint: function _getTargetPoint(pointsByColumns, currentX, deltaX) {\n            var $transparentColumn = this._columnHeadersView.getTransparentColumnElement();\n\n            var boundingRect;\n\n            if ($transparentColumn && $transparentColumn.length) {\n              boundingRect = $transparentColumn.get(0).getBoundingClientRect();\n\n              if (currentX <= boundingRect.left || currentX >= boundingRect.right) {\n                return this.callBase(this._pointsByFixedColumns, currentX, deltaX);\n              }\n            }\n\n            return this.callBase(pointsByColumns, currentX, deltaX);\n          }\n        }\n      };\n    }()\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/grid_core/ui.grid_core.column_fixing.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_wheel","_wheel2","_message","_message2","_uiGrid_core","_uiGrid_core2","_type","_extend","_iterator","_browser","_browser2","_translator","_translator2","obj","__esModule","CONTENT_CLASS","CONTENT_FIXED_CLASS","MASTER_DETAIL_CELL_CLASS","FIRST_CELL_CLASS","LAST_CELL_CLASS","HOVER_STATE_CLASS","FIXED_COL_CLASS","FIXED_COLUMNS_CLASS","POINTER_EVENTS_TARGET_CLASS","POINTER_EVENTS_NONE_CLASS","COMMAND_TRANSPARENT","GROUP_ROW_CLASS","getTransparentColumnIndex","fixedColumns","transparentColumnIndex","each","index","column","command","normalizeColumnWidths","widths","fixedWidths","i","fixedColumnIndex","length","colspan","baseFixedColumns","init","callBase","_isFixedTableRendering","_isFixedColumns","_createCol","toggleClass","fixed","_correctColumnIndicesForFixedColumns","change","transparentColspan","columnIndices","map","columnIndex","filter","_renderTable","options","that","$fixedTable","$table","getFixedColumns","_createTable","_renderRows","extend","columns","_updateContent","_fixedTableElement","parent","remove","_renderRow","fixedCells","fixedCorrection","cells","row","apply","arguments","slice","_createCell","columnCommand","rowType","$cell","prevFixedColumn","addClass","default","setEmptyText","_wrapTableInScrollContainer","$scrollContainer","addWidgetPrefix","_renderCellContent","isEmptyCell","alignByFixedColumnCellCount","isFixedTableRendering","isGroupCell","isDefined","groupIndex","groupCellTemplate","css","summaryCells","_columnsController","getVisibleColumns","_getAlignByColumnCellCount","isFixed","option","type","html","cssClass","_getCellElementsCore","rowIndex","fixedColumn","fixedCellElements","cellElements","isGroupRow","hasClass","name","_getRowElements","eq","children","cell","style","visibility","getVisibleIndex","getColumnWidths","result","_getTableElement","tableElement","_setTableElement","getColumns","$tableElement","closest","getRowIndex","$row","find","getTableElements","get","getFixedColumnsOffset","offset","left","right","$transparentColumn","positionTransparentColumn","getTransparentColumnElement","position","element","outerWidth","first","getFixedTableElement","isFixedColumns","_resizeCore","synchronizeRows","setColumnWidths","visibleColumns","isWidthsSynchronized","visibleWidth","optionNames","isColumnWidthChanged","width","useVisibleColumns","isScrollbarVisible","hasAutoWidth","some","_createColGroup","_getClientHeight","boundingClientRectElement","getBoundingClientRect","height","clientHeight","rowHeight","fixedRowHeight","rowHeights","fixedRowHeights","heightTable","heightFixedTable","$rowElements","$fixedRowElements","$contentElement","_tableElement","_findContentElement","push","setScrollerSpacing","rtlEnabled","paddingLeft","paddingRight","ColumnHeadersViewFixedColumnsExtender","_getRowVisibleColumns","getContextMenuItems","onItemClick","columnFixingOptions","items","allowFixing","params","itemData","value","columnOption","fixedPosition","text","texts","fix","beginGroup","leftPosition","disabled","rightPosition","unfix","getFixedColumnElements","columnElements","$transparentColumnElement","getColumnElements","splice","colSpan","$fixedColumnElements","_getWidths","RowsViewFixedColumnsExtender","_detachHoverEvents","off","_attachHoverEvents","attachHoverEvent","on","createAction","args","event","target","isHover","$content","scrollable","scrollTop","contentClass","scrollDelay","mozilla","getScrollable","e","clearTimeout","_fixedScrollTimeout","setTimeout","scrollTo","y","delta","scrollHeight","getScrollbarWidth","appendTo","_updateScrollable","scrollOffset","top","_updateFixedTablePosition","_renderContent","contentElement","empty","append","_getGroupCellOptions","_renderGroupedCells","_renderGroupSummaryCells","_hasAlignByColumnSummaryItems","_renderGroupSummaryCellsCore","$groupCell","groupCellColSpan","alignByColumnCellCount","startColumnIndex","_getSummaryCellIndex","_renderCore","setRowsOpacity","$rows","_setRowsOpacityCore","optionChanged","getCellIndex","cellIndex","is","needFocus","$focusedElement","editorFactory","getController","focus","vWidth","hWidth","useNativeScrolling","styles","marginBottom","$fixedContent","_scrollable","_getElasticScrollTop","maxScrollTop","scrollableContent","scrollableContainer","elasticScrollTop","scrollbarWidth","reachedBottom","component","_container","Math","max","_applyElasticScrolling","ceil","move","_handleScroll","_updateContentPosition","isRender","_scrollTop","_afterRowPrepared","_scrollToElement","$element","dispose","FooterViewFixedColumnsExtender","module","exports","defaultOptions","columnFixing","enabled","format","extenders","views","columnHeadersView","rowsView","footerView","controllers","normalizeColumnIndicesByPoints","pointsByColumns","correctIndex","_","point","draggingHeader","_generatePointsByColumns","targetDraggingPanel","getName","sourceColumn","_pointCreated","location","_columnHeadersView","boundingRect","x","columnsResizer","columnsController","pointsByFixedColumns","getPointsByColumns","_pointsByFixedColumns","cellsLength","currentColumn","nextColumn","isWidgetResizingMode","allowResizing","_getTargetPoint","currentX","deltaX"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,SAAS,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;AACA,IAAIC,UAAU,GAAGC,sBAAsB,CAACH,SAAD,CAAvC;;AACA,IAAII,cAAc,GAAGH,OAAO,CAAC,iCAAD,CAA5B;;AACA,IAAII,eAAe,GAAGF,sBAAsB,CAACC,cAAD,CAA5C;;AACA,IAAIE,MAAM,GAAGL,OAAO,CAAC,yBAAD,CAApB;;AACA,IAAIM,OAAO,GAAGJ,sBAAsB,CAACG,MAAD,CAApC;;AACA,IAAIE,QAAQ,GAAGP,OAAO,CAAC,4BAAD,CAAtB;;AACA,IAAIQ,SAAS,GAAGN,sBAAsB,CAACK,QAAD,CAAtC;;AACA,IAAIE,YAAY,GAAGT,OAAO,CAAC,iCAAD,CAA1B;;AACA,IAAIU,aAAa,GAAGR,sBAAsB,CAACO,YAAD,CAA1C;;AACA,IAAIE,KAAK,GAAGX,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIY,OAAO,GAAGZ,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIa,SAAS,GAAGb,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIc,QAAQ,GAAGd,OAAO,CAAC,0BAAD,CAAtB;;AACA,IAAIe,SAAS,GAAGb,sBAAsB,CAACY,QAAD,CAAtC;;AACA,IAAIE,WAAW,GAAGhB,OAAO,CAAC,4BAAD,CAAzB;;AACA,IAAIiB,YAAY,GAAGf,sBAAsB,CAACc,WAAD,CAAzC;;AAEA,SAASd,sBAAT,CAAgCgB,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AACD,IAAIE,aAAa,GAAG,SAApB;AACA,IAAIC,mBAAmB,GAAG,eAA1B;AACA,IAAIC,wBAAwB,GAAG,uBAA/B;AACA,IAAIC,gBAAgB,GAAG,eAAvB;AACA,IAAIC,eAAe,GAAG,cAAtB;AACA,IAAIC,iBAAiB,GAAG,gBAAxB;AACA,IAAIC,eAAe,GAAG,cAAtB;AACA,IAAIC,mBAAmB,GAAG,kBAA1B;AACA,IAAIC,2BAA2B,GAAG,0BAAlC;AACA,IAAIC,yBAAyB,GAAG,wBAAhC;AACA,IAAIC,mBAAmB,GAAG,aAA1B;AACA,IAAIC,eAAe,GAAG,cAAtB;;AACA,IAAIC,yBAAyB,GAAG,SAA5BA,yBAA4B,CAASC,YAAT,EAAuB;AACnD,MAAIC,sBAAsB,GAAG,CAAC,CAA9B;AACA,GAAC,GAAGrB,SAAS,CAACsB,IAAd,EAAoBF,YAApB,EAAkC,UAASG,KAAT,EAAgBC,MAAhB,EAAwB;AACtD,QAAIA,MAAM,CAACC,OAAP,KAAmBR,mBAAvB,EAA4C;AACxCI,MAAAA,sBAAsB,GAAGE,KAAzB;AACA,aAAO,KAAP;AACH;AACJ,GALD;AAMA,SAAOF,sBAAP;AACH,CATD;;AAUA,IAAIK,qBAAqB,GAAG,SAAxBA,qBAAwB,CAASN,YAAT,EAAuBO,MAAvB,EAA+BC,WAA/B,EAA4C;AACpE,MAAIC,CAAJ;AACA,MAAIC,gBAAgB,GAAG,CAAvB;;AACA,MAAIV,YAAY,IAAIO,MAAhB,IAA0BC,WAA9B,EAA2C;AACvC,SAAKC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGT,YAAY,CAACW,MAA7B,EAAqCF,CAAC,EAAtC,EAA0C;AACtC,UAAIT,YAAY,CAACS,CAAD,CAAZ,CAAgBJ,OAAhB,KAA4BR,mBAAhC,EAAqD;AACjDa,QAAAA,gBAAgB,IAAIV,YAAY,CAACS,CAAD,CAAZ,CAAgBG,OAApC;AACH,OAFD,MAEO;AACH,YAAIL,MAAM,CAACG,gBAAD,CAAN,GAA2BF,WAAW,CAACC,CAAD,CAA1C,EAA+C;AAC3CF,UAAAA,MAAM,CAACG,gBAAD,CAAN,GAA2BF,WAAW,CAACC,CAAD,CAAtC;AACH;;AACDC,QAAAA,gBAAgB;AACnB;AACJ;AACJ;;AACD,SAAOH,MAAP;AACH,CAhBD;;AAiBA,IAAIM,gBAAgB,GAAG;AACnBC,EAAAA,IAAI,EAAE,gBAAW;AACb,SAAKC,QAAL;AACA,SAAKC,sBAAL,GAA8B,KAA9B;AACA,SAAKC,eAAL,GAAuB,KAAvB;AACH,GALkB;AAMnBC,EAAAA,UAAU,EAAE,oBAASd,MAAT,EAAiB;AACzB,WAAO,KAAKW,QAAL,CAAcX,MAAd,EAAsBe,WAAtB,CAAkC1B,eAAlC,EAAmD,CAAC,EAAE,KAAKuB,sBAAL,KAAgCZ,MAAM,CAACgB,KAAP,IAAgBhB,MAAM,CAACC,OAAP,IAAkBD,MAAM,CAACC,OAAP,KAAmBR,mBAArF,CAAF,CAApD,CAAP;AACH,GARkB;AASnBwB,EAAAA,oCAAoC,EAAE,8CAASrB,YAAT,EAAuBsB,MAAvB,EAA+B;AACjE,QAAIrB,sBAAsB,GAAGF,yBAAyB,CAACC,YAAD,CAAtD;AACA,QAAIuB,kBAAkB,GAAGvB,YAAY,CAACC,sBAAD,CAAZ,CAAqCW,OAA9D;AACA,QAAIY,aAAa,GAAGF,MAAM,IAAIA,MAAM,CAACE,aAArC;;AACA,QAAIA,aAAJ,EAAmB;AACfF,MAAAA,MAAM,CAACE,aAAP,GAAuBA,aAAa,CAACC,GAAd,CAAkB,UAASD,aAAT,EAAwB;AAC7D,YAAIA,aAAJ,EAAmB;AACf,iBAAOA,aAAa,CAACC,GAAd,CAAkB,UAASC,WAAT,EAAsB;AAC3C,gBAAIA,WAAW,GAAGzB,sBAAlB,EAA0C;AACtC,qBAAOyB,WAAP;AACH,aAFD,MAEO;AACH,kBAAIA,WAAW,IAAIzB,sBAAsB,GAAGsB,kBAA5C,EAAgE;AAC5D,uBAAOG,WAAW,GAAGH,kBAAd,GAAmC,CAA1C;AACH;AACJ;;AACD,mBAAO,CAAC,CAAR;AACH,WATM,EASJI,MATI,CASG,UAASD,WAAT,EAAsB;AAC5B,mBAAOA,WAAW,IAAI,CAAtB;AACH,WAXM,CAAP;AAYH;AACJ,OAfsB,CAAvB;AAgBH;AACJ,GA/BkB;AAgCnBE,EAAAA,YAAY,EAAE,sBAASC,OAAT,EAAkB;AAC5B,QAAIC,IAAI,GAAG,IAAX;AACA,QAAIC,WAAJ;AACA,QAAIC,MAAJ;AACA,QAAIhC,YAAY,GAAG8B,IAAI,CAACG,eAAL,EAAnB;AACAH,IAAAA,IAAI,CAACb,eAAL,GAAuB,CAAC,CAACjB,YAAY,CAACW,MAAtC;AACAqB,IAAAA,MAAM,GAAGF,IAAI,CAACf,QAAL,CAAcc,OAAd,CAAT;;AACA,QAAIC,IAAI,CAACb,eAAT,EAA0B;AACtBa,MAAAA,IAAI,CAACd,sBAAL,GAA8B,IAA9B;AACA,UAAIM,MAAM,GAAGO,OAAO,IAAIA,OAAO,CAACP,MAAhC;AACA,UAAIE,aAAa,GAAGF,MAAM,IAAIA,MAAM,CAACE,aAArC;;AACAM,MAAAA,IAAI,CAACT,oCAAL,CAA0CrB,YAA1C,EAAwDsB,MAAxD;;AACAS,MAAAA,WAAW,GAAGD,IAAI,CAACI,YAAL,CAAkBlC,YAAlB,CAAd;;AACA8B,MAAAA,IAAI,CAACK,WAAL,CAAiBJ,WAAjB,EAA8B,CAAC,GAAGpD,OAAO,CAACyD,MAAZ,EAAoB,EAApB,EAAwBP,OAAxB,EAAiC;AAC3DQ,QAAAA,OAAO,EAAErC;AADkD,OAAjC,CAA9B;;AAGA8B,MAAAA,IAAI,CAACQ,cAAL,CAAoBP,WAApB,EAAiCT,MAAjC;;AACA,UAAIE,aAAJ,EAAmB;AACfF,QAAAA,MAAM,CAACE,aAAP,GAAuBA,aAAvB;AACH;;AACDM,MAAAA,IAAI,CAACd,sBAAL,GAA8B,KAA9B;AACH,KAdD,MAcO;AACHc,MAAAA,IAAI,CAACS,kBAAL,IAA2BT,IAAI,CAACS,kBAAL,CAAwBC,MAAxB,GAAiCC,MAAjC,EAA3B;AACAX,MAAAA,IAAI,CAACS,kBAAL,GAA0B,IAA1B;AACH;;AACD,WAAOP,MAAP;AACH,GA1DkB;AA2DnBU,EAAAA,UAAU,EAAE,oBAASV,MAAT,EAAiBH,OAAjB,EAA0B;AAClC,QAAIc,UAAJ;AACA,QAAIC,eAAJ;AACA,QAAIC,KAAK,GAAGhB,OAAO,CAACiB,GAAR,CAAYD,KAAxB;AACA,SAAK9B,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;;AACA,QAAI,KAAKhC,sBAAL,IAA+B6B,KAA/B,IAAwCA,KAAK,CAAClC,MAAlD,EAA0D;AACtDiC,MAAAA,eAAe,GAAG,CAAlB;AACAD,MAAAA,UAAU,GAAGd,OAAO,CAACiB,GAAR,CAAYD,KAAZ,IAAqB,EAAlC;AACAA,MAAAA,KAAK,GAAGA,KAAK,CAACI,KAAN,EAAR;AACApB,MAAAA,OAAO,CAACiB,GAAR,CAAYD,KAAZ,GAAoBA,KAApB;;AACA,WAAK,IAAIpC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkC,UAAU,CAAChC,MAA/B,EAAuCF,CAAC,EAAxC,EAA4C;AACxC,YAAIkC,UAAU,CAAClC,CAAD,CAAV,CAAcL,MAAd,IAAwBuC,UAAU,CAAClC,CAAD,CAAV,CAAcL,MAAd,CAAqBC,OAArB,KAAiCR,mBAA7D,EAAkF;AAC9E+C,UAAAA,eAAe,GAAG,CAACD,UAAU,CAAClC,CAAD,CAAV,CAAcL,MAAd,CAAqBQ,OAArB,IAAgC,CAAjC,IAAsC,CAAxD;AACA;AACH;;AACDiC,QAAAA,KAAK,CAACpC,CAAC,GAAGmC,eAAL,CAAL,GAA6BD,UAAU,CAAClC,CAAD,CAAvC;AACH;AACJ;AACJ,GA7EkB;AA8EnByC,EAAAA,WAAW,EAAE,qBAASrB,OAAT,EAAkB;AAC3B,QAAIC,IAAI,GAAG,IAAX;AACA,QAAI1B,MAAM,GAAGyB,OAAO,CAACzB,MAArB;AACA,QAAI+C,aAAa,GAAG/C,MAAM,IAAIA,MAAM,CAACC,OAArC;AACA,QAAI+C,OAAO,GAAGvB,OAAO,CAACuB,OAAtB;AACA,QAAIC,KAAK,GAAGvB,IAAI,CAACf,QAAL,CAAcgC,KAAd,CAAoBjB,IAApB,EAA0BkB,SAA1B,CAAZ;AACA,QAAIhD,YAAJ;AACA,QAAIsD,eAAJ;AACA,QAAIrD,sBAAJ;;AACA,QAAI6B,IAAI,CAACd,sBAAL,IAA+B,aAAaoC,OAAhD,EAAyD;AACrDpD,MAAAA,YAAY,GAAG8B,IAAI,CAACG,eAAL,EAAf;AACAhC,MAAAA,sBAAsB,GAAGF,yBAAyB,CAACC,YAAD,CAAlD;AACAsD,MAAAA,eAAe,GAAGtD,YAAY,CAACC,sBAAsB,GAAG,CAA1B,CAA9B;AACH;;AACD,QAAI6B,IAAI,CAACd,sBAAT,EAAiC;AAC7B,UAAImC,aAAa,KAAKtD,mBAAtB,EAA2C;AACvCwD,QAAAA,KAAK,CAACE,QAAN,CAAe3D,yBAAf,EAA0CuB,WAA1C,CAAsD7B,gBAAtD,EAAwE,MAAMW,sBAAN,IAAgCqD,eAAe,IAAI,aAAaA,eAAe,CAACjD,OAAxJ,EAAiKc,WAAjK,CAA6K5B,eAA7K,EAA8LS,YAAY,CAACW,MAAb,IAAuBV,sBAAsB,KAAKD,YAAY,CAACW,MAAb,GAAsB,CAAtQ;;AACA,YAAI,gBAAgByC,OAApB,EAA6B;AACzB3E,UAAAA,aAAa,CAAC+E,OAAd,CAAsBC,YAAtB,CAAmCJ,KAAnC;AACH;AACJ;AACJ,KAPD,MAOO;AACH,UAAI,aAAaD,OAAjB,EAA0B;AACtBC,QAAAA,KAAK,CAAClC,WAAN,CAAkB7B,gBAAlB,EAAoCuC,OAAO,CAACH,WAAR,KAAwBzB,sBAA5D;AACH;AACJ;;AACD,WAAOoD,KAAP;AACH,GAzGkB;AA0GnBK,EAAAA,2BAA2B,EAAE,uCAAW;AACpC,QAAIC,gBAAgB,GAAG,KAAK5C,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B,CAAvB;;AACA,QAAI,KAAKhC,sBAAT,EAAiC;AAC7B2C,MAAAA,gBAAgB,CAACJ,QAAjB,CAA0B,KAAKK,eAAL,CAAqBxE,mBAArB,IAA4C,GAA5C,GAAkDO,2BAA5E;AACH;;AACD,WAAOgE,gBAAP;AACH,GAhHkB;AAiHnBE,EAAAA,kBAAkB,EAAE,4BAASR,KAAT,EAAgBxB,OAAhB,EAAyB;AACzC,QAAIC,IAAI,GAAG,IAAX;AACA,QAAIO,OAAJ;AACA,QAAIyB,WAAJ;AACA,QAAI7D,sBAAJ;AACA,QAAI8D,2BAAJ;AACA,QAAI3D,MAAM,GAAGyB,OAAO,CAACzB,MAArB;AACA,QAAI4D,qBAAqB,GAAGlC,IAAI,CAACd,sBAAjC;AACA,QAAIiD,WAAW,GAAG,YAAYpC,OAAO,CAACuB,OAApB,IAA+B,CAAC,GAAG1E,KAAK,CAACwF,SAAV,EAAqB9D,MAAM,CAAC+D,UAA5B,CAAjD;;AACA,QAAIH,qBAAqB,IAAIC,WAAzB,IAAwC,CAAC7D,MAAM,CAACC,OAAhD,IAA2D,CAACD,MAAM,CAACgE,iBAAvE,EAA0F;AACtFf,MAAAA,KAAK,CAACgB,GAAN,CAAU,eAAV,EAA2B,MAA3B;AACH;;AACD,QAAI,CAACL,qBAAD,IAA0BlC,IAAI,CAACb,eAAnC,EAAoD;AAChD6C,MAAAA,WAAW,GAAG1D,MAAM,CAACgB,KAAP,IAAgBhB,MAAM,CAACC,OAAP,IAAkB,UAAUD,MAAM,CAACgB,KAAjE;;AACA,UAAI6C,WAAJ,EAAiB;AACbH,QAAAA,WAAW,GAAG,KAAd;;AACA,YAAIjC,OAAO,CAACiB,GAAR,CAAYwB,YAAZ,IAA4BzC,OAAO,CAACiB,GAAR,CAAYwB,YAAZ,CAAyB3D,MAAzD,EAAiE;AAC7D0B,UAAAA,OAAO,GAAGP,IAAI,CAACyC,kBAAL,CAAwBC,iBAAxB,EAAV;AACAT,UAAAA,2BAA2B,GAAGjC,IAAI,CAAC2C,0BAAL,GAAkC3C,IAAI,CAAC2C,0BAAL,CAAgCrE,MAAM,CAACQ,OAAvC,EAAgD;AAC5GyB,YAAAA,OAAO,EAAEA,OADmG;AAE5GS,YAAAA,GAAG,EAAEjB,OAAO,CAACiB,GAF+F;AAG5G4B,YAAAA,OAAO,EAAE;AAHmG,WAAhD,CAAlC,GAIzB,CAJL;;AAKA,cAAIX,2BAA2B,GAAG,CAAlC,EAAqC;AACjC9D,YAAAA,sBAAsB,GAAGF,yBAAyB,CAAC+B,IAAI,CAACyC,kBAAL,CAAwBtC,eAAxB,EAAD,CAAlD;AACA6B,YAAAA,WAAW,GAAGzB,OAAO,CAAC1B,MAAR,GAAiBoD,2BAAjB,GAA+C9D,sBAA7D;AACH;AACJ;AACJ;;AACD,UAAI6D,WAAJ,EAAiB;AACb,YAAIhC,IAAI,CAAC6C,MAAL,CAAY,iBAAZ,KAAkCvE,MAAM,CAACC,OAAP,IAAkB,cAAcD,MAAM,CAACwE,IAAzE,IAAiF,YAAY/C,OAAO,CAACuB,OAAzG,EAAkH;AAC9GC,UAAAA,KAAK,CAACwB,IAAN,CAAW,QAAX,EAAqBtB,QAArB,CAA8BnD,MAAM,CAAC0E,QAArC;AACA;AACH,SAHD,MAGO;AACHzB,UAAAA,KAAK,CAACE,QAAN,CAAe,gBAAf;AACH;AACJ;AACJ;;AACD,QAAInD,MAAM,CAACC,OAAP,KAAmBR,mBAAvB,EAA4C;AACxCiC,MAAAA,IAAI,CAACf,QAAL,CAAcsC,KAAd,EAAqBxB,OAArB;AACH;AACJ,GA1JkB;AA2JnBkD,EAAAA,oBAAoB,EAAE,8BAASC,QAAT,EAAmB;AACrC,QAAIlD,IAAI,GAAG,IAAX;AACA,QAAImD,WAAJ;AACA,QAAIjF,YAAJ;AACA,QAAIU,gBAAJ;AACA,QAAIwE,iBAAJ;AACA,QAAIC,YAAY,GAAGrD,IAAI,CAACf,QAAL,CAAciE,QAAd,CAAnB;AACA,QAAII,UAAU,GAAGD,YAAY,CAAC3C,MAAb,GAAsB6C,QAAtB,CAA+BvF,eAA/B,CAAjB;AACA,QAAIK,KAAK,GAAG,wBAAwB2B,IAAI,CAACwD,IAA7B,GAAoCN,QAApC,GAA+C,KAAK,CAAhE;;AACA,QAAIlD,IAAI,CAACS,kBAAL,IAA2B4C,YAA/B,EAA6C;AACzCnF,MAAAA,YAAY,GAAG8B,IAAI,CAACG,eAAL,CAAqB9B,KAArB,CAAf;AACA+E,MAAAA,iBAAiB,GAAGpD,IAAI,CAACyD,eAAL,CAAqBzD,IAAI,CAACS,kBAA1B,EAA8CiD,EAA9C,CAAiDR,QAAjD,EAA2DS,QAA3D,CAAoE,IAApE,CAApB;AACA,OAAC,GAAG7G,SAAS,CAACsB,IAAd,EAAoBgF,iBAApB,EAAuC,UAASxD,WAAT,EAAsBgE,IAAtB,EAA4B;AAC/D,YAAIN,UAAJ,EAAgB;AACZ,cAAID,YAAY,CAACzD,WAAD,CAAZ,IAA6B,aAAagE,IAAI,CAACC,KAAL,CAAWC,UAAzD,EAAqE;AACjET,YAAAA,YAAY,CAACzD,WAAD,CAAZ,GAA4BgE,IAA5B;AACH;AACJ,SAJD,MAIO;AACHT,UAAAA,WAAW,GAAGjF,YAAY,CAAC0B,WAAD,CAA1B;;AACA,cAAIuD,WAAJ,EAAiB;AACb,gBAAIA,WAAW,CAAC5E,OAAZ,KAAwBR,mBAA5B,EAAiD;AAC7C,kBAAIqF,iBAAiB,CAACM,EAAlB,CAAqB9D,WAArB,EAAkC2D,QAAlC,CAA2ChG,wBAA3C,CAAJ,EAA0E;AACtE8F,gBAAAA,YAAY,CAACzD,WAAD,CAAZ,GAA4BgE,IAAI,IAAIP,YAAY,CAACzD,WAAD,CAAhD;AACH;AACJ,aAJD,MAIO;AACHhB,cAAAA,gBAAgB,GAAGoB,IAAI,CAACyC,kBAAL,CAAwBsB,eAAxB,CAAwCZ,WAAW,CAAC9E,KAApD,EAA2DA,KAA3D,CAAnB;AACAgF,cAAAA,YAAY,CAACzE,gBAAD,CAAZ,GAAiCgF,IAAI,IAAIP,YAAY,CAACzE,gBAAD,CAArD;AACH;AACJ;AACJ;AACJ,OAlBD;AAmBH;;AACD,WAAOyE,YAAP;AACH,GA5LkB;AA6LnBW,EAAAA,eAAe,EAAE,2BAAW;AACxB,QAAIhE,IAAI,GAAG,IAAX;AACA,QAAItB,WAAJ;AACA,QAAIuF,MAAM,GAAGjE,IAAI,CAACf,QAAL,EAAb;AACA,QAAIf,YAAY,GAAG8B,IAAI,CAACG,eAAL,EAAnB;;AACA,QAAIH,IAAI,CAACS,kBAAL,IAA2BwD,MAAM,CAACpF,MAAtC,EAA8C;AAC1CH,MAAAA,WAAW,GAAGsB,IAAI,CAACf,QAAL,CAAce,IAAI,CAACS,kBAAnB,CAAd;AACH;;AACD,WAAOjC,qBAAqB,CAACN,YAAD,EAAe+F,MAAf,EAAuBvF,WAAvB,CAA5B;AACH,GAtMkB;AAuMnBwF,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,QAAIC,YAAY,GAAG,KAAKjF,sBAAL,GAA8B,KAAKuB,kBAAnC,GAAwD,KAAKxB,QAAL,EAA3E;AACA,WAAOkF,YAAP;AACH,GA1MkB;AA2MnBC,EAAAA,gBAAgB,EAAE,0BAASD,YAAT,EAAuB;AACrC,QAAI,KAAKjF,sBAAT,EAAiC;AAC7B,WAAKuB,kBAAL,GAA0B0D,YAAY,CAAC1C,QAAb,CAAsB3D,yBAAtB,CAA1B;AACH,KAFD,MAEO;AACH,WAAKmB,QAAL,CAAckF,YAAd;AACH;AACJ,GAjNkB;AAkNnBE,EAAAA,UAAU,EAAE,oBAASnB,QAAT,EAAmBoB,aAAnB,EAAkC;AAC1CA,IAAAA,aAAa,GAAGA,aAAa,IAAI,KAAKJ,gBAAL,EAAjC;;AACA,QAAI,KAAKhF,sBAAL,IAA+BoF,aAAa,IAAIA,aAAa,CAACC,OAAd,CAAsB,OAAtB,EAA+B7D,MAA/B,CAAsC,MAAM,KAAKoB,eAAL,CAAqBxE,mBAArB,CAA5C,EAAuFuB,MAA3I,EAAmJ;AAC/I,aAAO,KAAKsB,eAAL,CAAqB+C,QAArB,CAAP;AACH;;AACD,WAAO,KAAKjE,QAAL,CAAciE,QAAd,EAAwBoB,aAAxB,CAAP;AACH,GAxNkB;AAyNnBE,EAAAA,WAAW,EAAE,qBAASC,IAAT,EAAe;AACxB,QAAIxE,WAAW,GAAG,KAAKQ,kBAAvB;;AACA,QAAIR,WAAW,IAAIA,WAAW,CAACyE,IAAZ,CAAiBD,IAAjB,EAAuB5F,MAA1C,EAAkD;AAC9C,aAAO,KAAK4E,eAAL,CAAqBxD,WAArB,EAAkC5B,KAAlC,CAAwCoG,IAAxC,CAAP;AACH;;AACD,WAAO,KAAKxF,QAAL,CAAcwF,IAAd,CAAP;AACH,GA/NkB;AAgOnBE,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,QAAIV,MAAM,GAAG,KAAKhF,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B,CAAb;;AACA,QAAI,KAAKT,kBAAT,EAA6B;AACzBwD,MAAAA,MAAM,GAAG,CAAC,GAAG/H,UAAU,CAACwF,OAAf,EAAwB,CAACuC,MAAM,CAACW,GAAP,CAAW,CAAX,CAAD,EAAgB,KAAKnE,kBAAL,CAAwBmE,GAAxB,CAA4B,CAA5B,CAAhB,CAAxB,CAAT;AACH;;AACD,WAAOX,MAAP;AACH,GAtOkB;AAuOnB9D,EAAAA,eAAe,EAAE,yBAAS+C,QAAT,EAAmB;AAChC,WAAO,KAAKT,kBAAL,CAAwBtC,eAAxB,CAAwC+C,QAAxC,CAAP;AACH,GAzOkB;AA0OnB2B,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,QAAIC,MAAM,GAAG;AACTC,MAAAA,IAAI,EAAE,CADG;AAETC,MAAAA,KAAK,EAAE;AAFE,KAAb;AAIA,QAAIC,kBAAJ;AACA,QAAIC,yBAAJ;;AACA,QAAI,KAAKzE,kBAAT,EAA6B;AACzBwE,MAAAA,kBAAkB,GAAG,KAAKE,2BAAL,EAArB;AACAD,MAAAA,yBAAyB,GAAGD,kBAAkB,CAACG,QAAnB,EAA5B;AACAN,MAAAA,MAAM,GAAG;AACLC,QAAAA,IAAI,EAAEG,yBAAyB,CAACH,IAD3B;AAELC,QAAAA,KAAK,EAAE,KAAKK,OAAL,GAAeC,UAAf,CAA0B,IAA1B,KAAmCL,kBAAkB,CAACK,UAAnB,CAA8B,IAA9B,IAAsCJ,yBAAyB,CAACH,IAAnG;AAFF,OAAT;AAIH;;AACD,WAAOD,MAAP;AACH,GA1PkB;AA2PnBK,EAAAA,2BAA2B,EAAE,uCAAW;AACpC,WAAO,KAAK1E,kBAAL,IAA2B,KAAKA,kBAAL,CAAwBiE,IAAxB,CAA6B,MAAM5G,yBAAnC,EAA8DyH,KAA9D,EAAlC;AACH,GA7PkB;AA8PnBC,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,WAAO,KAAK/E,kBAAZ;AACH,GAhQkB;AAiQnBgF,EAAAA,cAAc,EAAE,0BAAW;AACvB,WAAO,KAAKtG,eAAZ;AACH,GAnQkB;AAoQnBuG,EAAAA,WAAW,EAAE,uBAAW;AACpB,SAAKzG,QAAL;AACA,SAAK0G,eAAL;AACH,GAvQkB;AAwQnBC,EAAAA,eAAe,EAAE,yBAAS7F,OAAT,EAAkB;AAC/B,QAAIQ,OAAJ;;AACA,QAAIsF,cAAc,GAAG,KAAKpD,kBAAL,CAAwBC,iBAAxB,EAArB;;AACA,QAAIjE,MAAM,GAAGsB,OAAO,CAACtB,MAArB;AACA,QAAIqH,oBAAoB,GAAGrH,MAAM,IAAIA,MAAM,CAACI,MAAjB,IAA2B,CAAC,GAAGjC,KAAK,CAACwF,SAAV,EAAqByD,cAAc,CAAC,CAAD,CAAd,CAAkBE,YAAvC,CAAtD;AACA,QAAIC,WAAW,GAAGjG,OAAO,CAACiG,WAA1B;AACA,QAAIC,oBAAoB,GAAGD,WAAW,IAAIA,WAAW,CAACE,KAAtD;AACA,QAAIC,iBAAiB,GAAG,KAAxB;AACA,SAAKlH,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;;AACA,QAAI,KAAKT,kBAAT,EAA6B;AACzB,UAAI,KAAKoC,MAAL,CAAY,iBAAZ,CAAJ,EAAoC;AAChCsD,QAAAA,iBAAiB,GAAG1H,MAAM,IAAIA,MAAM,CAACI,MAAjB,IAA2B,CAAC,KAAKuH,kBAAL,CAAwB,IAAxB,CAAhD;AACH,OAFD,MAEO;AACH,YAAIC,YAAY,GAAG5H,MAAM,IAAIA,MAAM,CAAC6H,IAAP,CAAY,UAASJ,KAAT,EAAgB;AACrD,iBAAO,WAAWA,KAAlB;AACH,SAF4B,CAA7B;AAGAC,QAAAA,iBAAiB,GAAGE,YAAY,KAAK,CAACP,oBAAD,IAAyB,CAAC,KAAKM,kBAAL,CAAwB,IAAxB,CAA/B,CAAhC;AACH;;AACD,UAAID,iBAAJ,EAAuB;AACnB5F,QAAAA,OAAO,GAAGsF,cAAV;AACH;;AACD,WAAK5G,QAAL,CAAc,CAAC,GAAGpC,OAAO,CAACyD,MAAZ,EAAoB,EAApB,EAAwBP,OAAxB,EAAiC;AAC3CuE,QAAAA,aAAa,EAAE,KAAK7D,kBADuB;AAE3CF,QAAAA,OAAO,EAAEA,OAFkC;AAG3CjB,QAAAA,KAAK,EAAE;AAHoC,OAAjC,CAAd;AAKH;;AACD,QAAIwG,oBAAoB,IAAIG,oBAAoB,IAAI,KAAKpD,MAAL,CAAY,iBAAZ,CAApD,EAAoF;AAChF,WAAK8C,eAAL;AACH;AACJ,GAtSkB;AAuSnBY,EAAAA,eAAe,EAAE,yBAAShG,OAAT,EAAkB;AAC/B,QAAI,CAAC,KAAKsC,MAAL,CAAY,iBAAZ,CAAD,IAAmC,KAAK3D,sBAAxC,IAAkE,CAAC,KAAK2D,MAAL,CAAY,iBAAZ,CAAvE,EAAuG;AACnG,UAAIgD,cAAc,GAAG,KAAKpD,kBAAL,CAAwBC,iBAAxB,EAArB;;AACA,UAAIyD,iBAAiB,GAAGN,cAAc,CAAChG,MAAf,CAAsB,UAASvB,MAAT,EAAiB;AAC3D,eAAO,CAACA,MAAM,CAAC4H,KAAf;AACH,OAFuB,EAErBrH,MAFH;;AAGA,UAAIsH,iBAAJ,EAAuB;AACnB5F,QAAAA,OAAO,GAAGsF,cAAV;AACH;AACJ;;AACD,WAAO,KAAK5G,QAAL,CAAcsB,OAAd,CAAP;AACH,GAlTkB;AAmTnBiG,EAAAA,gBAAgB,EAAE,0BAASnB,OAAT,EAAkB;AAChC,QAAIoB,yBAAyB,GAAGpB,OAAO,CAACqB,qBAAR,IAAiCrB,OAAO,CAACqB,qBAAR,EAAjE;AACA,WAAOD,yBAAyB,IAAIA,yBAAyB,CAACE,MAAvD,GAAgEF,yBAAyB,CAACE,MAA1F,GAAmGtB,OAAO,CAACuB,YAAlH;AACH,GAtTkB;AAuTnBjB,EAAAA,eAAe,EAAE,2BAAW;AACxB,QAAI3F,IAAI,GAAG,IAAX;AACA,QAAI6G,SAAJ;AACA,QAAIC,cAAJ;AACA,QAAIC,UAAU,GAAG,EAAjB;AACA,QAAIC,eAAe,GAAG,EAAtB;AACA,QAAI9D,QAAJ;AACA,QAAI+D,WAAJ;AACA,QAAIC,gBAAJ;AACA,QAAIC,YAAJ;AACA,QAAIC,iBAAJ;AACA,QAAIC,eAAJ;;AACA,QAAIrH,IAAI,CAACb,eAAL,IAAwBa,IAAI,CAACsH,aAA7B,IAA8CtH,IAAI,CAACS,kBAAvD,EAA2E;AACvEwG,MAAAA,WAAW,GAAGjH,IAAI,CAACwG,gBAAL,CAAsBxG,IAAI,CAACsH,aAAL,CAAmB1C,GAAnB,CAAuB,CAAvB,CAAtB,CAAd;AACAsC,MAAAA,gBAAgB,GAAGlH,IAAI,CAACwG,gBAAL,CAAsBxG,IAAI,CAACS,kBAAL,CAAwBmE,GAAxB,CAA4B,CAA5B,CAAtB,CAAnB;AACAuC,MAAAA,YAAY,GAAGnH,IAAI,CAACyD,eAAL,CAAqBzD,IAAI,CAACsH,aAA1B,CAAf;AACAF,MAAAA,iBAAiB,GAAGpH,IAAI,CAACyD,eAAL,CAAqBzD,IAAI,CAACS,kBAA1B,CAApB;AACA4G,MAAAA,eAAe,GAAGrH,IAAI,CAACuH,mBAAL,EAAlB;;AACA,UAAIN,WAAW,KAAKC,gBAApB,EAAsC;AAClCG,QAAAA,eAAe,IAAIA,eAAe,CAAC9E,GAAhB,CAAoB,QAApB,EAA8B0E,WAA9B,CAAnB;AACAE,QAAAA,YAAY,CAAC5E,GAAb,CAAiB,QAAjB,EAA2B,EAA3B;AACA6E,QAAAA,iBAAiB,CAAC7E,GAAlB,CAAsB,QAAtB,EAAgC,EAAhC;;AACA,aAAKW,QAAQ,GAAG,CAAhB,EAAmBA,QAAQ,GAAGiE,YAAY,CAACtI,MAA3C,EAAmDqE,QAAQ,EAA3D,EAA+D;AAC3D6D,UAAAA,UAAU,CAACS,IAAX,CAAgBxH,IAAI,CAACwG,gBAAL,CAAsBW,YAAY,CAACvC,GAAb,CAAiB1B,QAAjB,CAAtB,CAAhB;AACA8D,UAAAA,eAAe,CAACQ,IAAhB,CAAqBxH,IAAI,CAACwG,gBAAL,CAAsBY,iBAAiB,CAACxC,GAAlB,CAAsB1B,QAAtB,CAAtB,CAArB;AACH;;AACD,aAAKA,QAAQ,GAAG,CAAhB,EAAmBA,QAAQ,GAAGiE,YAAY,CAACtI,MAA3C,EAAmDqE,QAAQ,EAA3D,EAA+D;AAC3D2D,UAAAA,SAAS,GAAGE,UAAU,CAAC7D,QAAD,CAAtB;AACA4D,UAAAA,cAAc,GAAGE,eAAe,CAAC9D,QAAD,CAAhC;;AACA,cAAI2D,SAAS,GAAGC,cAAhB,EAAgC;AAC5BM,YAAAA,iBAAiB,CAAC1D,EAAlB,CAAqBR,QAArB,EAA+BX,GAA/B,CAAmC,QAAnC,EAA6CsE,SAA7C;AACH,WAFD,MAEO;AACH,gBAAIA,SAAS,GAAGC,cAAhB,EAAgC;AAC5BK,cAAAA,YAAY,CAACzD,EAAb,CAAgBR,QAAhB,EAA0BX,GAA1B,CAA8B,QAA9B,EAAwCuE,cAAxC;AACH;AACJ;AACJ;;AACDO,QAAAA,eAAe,IAAIA,eAAe,CAAC9E,GAAhB,CAAoB,QAApB,EAA8B,EAA9B,CAAnB;AACH;AACJ;AACJ,GA/VkB;AAgWnBkF,EAAAA,kBAAkB,EAAE,4BAASvB,KAAT,EAAgB;AAChC,QAAIwB,UAAU,GAAG,KAAK7E,MAAL,CAAY,YAAZ,CAAjB;AACA,SAAK5D,QAAL,CAAciH,KAAd;AACA,SAAKb,OAAL,GAAe1B,QAAf,CAAwB,MAAM,KAAK7B,eAAL,CAAqBxE,mBAArB,CAA9B,EAAyEiF,GAAzE,CAA6E;AACzEoF,MAAAA,WAAW,EAAED,UAAU,GAAGxB,KAAH,GAAW,EADuC;AAEzE0B,MAAAA,YAAY,EAAE,CAACF,UAAD,GAAcxB,KAAd,GAAsB;AAFqC,KAA7E;AAIH;AAvWkB,CAAvB;AAyWA,IAAI2B,qCAAqC,GAAG,CAAC,GAAGhL,OAAO,CAACyD,MAAZ,EAAoB,EAApB,EAAwBvB,gBAAxB,EAA0C;AAClF+I,EAAAA,qBAAqB,EAAE,+BAAS5E,QAAT,EAAmB;AACtC,QAAI,KAAKhE,sBAAT,EAAiC;AAC7B,aAAO,KAAKiB,eAAL,CAAqB+C,QAArB,CAAP;AACH;;AACD,WAAO,KAAKjE,QAAL,CAAciE,QAAd,CAAP;AACH,GANiF;AAOlF6E,EAAAA,mBAAmB,EAAE,6BAAShI,OAAT,EAAkB;AACnC,QAAIC,IAAI,GAAG,IAAX;AACA,QAAI1B,MAAM,GAAGyB,OAAO,CAACzB,MAArB;AACA,QAAI0J,WAAJ;AACA,QAAIC,mBAAmB,GAAGjI,IAAI,CAAC6C,MAAL,CAAY,cAAZ,CAA1B;AACA,QAAIqF,KAAK,GAAGlI,IAAI,CAACf,QAAL,CAAcc,OAAd,CAAZ;;AACA,QAAIA,OAAO,CAACiB,GAAR,IAAe,aAAajB,OAAO,CAACiB,GAAR,CAAYM,OAA5C,EAAqD;AACjD,UAAIhD,MAAM,IAAIA,MAAM,CAAC6J,WAArB,EAAkC;AAC9BH,QAAAA,WAAW,GAAG,qBAASI,MAAT,EAAiB;AAC3B,kBAAQA,MAAM,CAACC,QAAP,CAAgBC,KAAxB;AACI,iBAAK,MAAL;AACItI,cAAAA,IAAI,CAACyC,kBAAL,CAAwB8F,YAAxB,CAAqCjK,MAAM,CAACD,KAA5C,EAAmD,OAAnD,EAA4D,KAA5D;;AACA;;AACJ,iBAAK,MAAL;AACI2B,cAAAA,IAAI,CAACyC,kBAAL,CAAwB8F,YAAxB,CAAqCjK,MAAM,CAACD,KAA5C,EAAmD;AAC/CiB,gBAAAA,KAAK,EAAE,IADwC;AAE/CkJ,gBAAAA,aAAa,EAAE;AAFgC,eAAnD;;AAIA;;AACJ,iBAAK,OAAL;AACIxI,cAAAA,IAAI,CAACyC,kBAAL,CAAwB8F,YAAxB,CAAqCjK,MAAM,CAACD,KAA5C,EAAmD;AAC/CiB,gBAAAA,KAAK,EAAE,IADwC;AAE/CkJ,gBAAAA,aAAa,EAAE;AAFgC,eAAnD;;AAXR;AAgBH,SAjBD;;AAkBAN,QAAAA,KAAK,GAAGA,KAAK,IAAI,EAAjB;AACAA,QAAAA,KAAK,CAACV,IAAN,CAAW;AACPiB,UAAAA,IAAI,EAAER,mBAAmB,CAACS,KAApB,CAA0BC,GADzB;AAEPC,UAAAA,UAAU,EAAE,IAFL;AAGPV,UAAAA,KAAK,EAAE,CAAC;AACJO,YAAAA,IAAI,EAAER,mBAAmB,CAACS,KAApB,CAA0BG,YAD5B;AAEJP,YAAAA,KAAK,EAAE,MAFH;AAGJQ,YAAAA,QAAQ,EAAExK,MAAM,CAACgB,KAAP,KAAiB,CAAChB,MAAM,CAACkK,aAAR,IAAyB,WAAWlK,MAAM,CAACkK,aAA5D,CAHN;AAIJR,YAAAA,WAAW,EAAEA;AAJT,WAAD,EAKJ;AACCS,YAAAA,IAAI,EAAER,mBAAmB,CAACS,KAApB,CAA0BK,aADjC;AAECT,YAAAA,KAAK,EAAE,OAFR;AAGCQ,YAAAA,QAAQ,EAAExK,MAAM,CAACgB,KAAP,IAAgB,YAAYhB,MAAM,CAACkK,aAH9C;AAICR,YAAAA,WAAW,EAAEA;AAJd,WALI;AAHA,SAAX,EAcG;AACCS,UAAAA,IAAI,EAAER,mBAAmB,CAACS,KAApB,CAA0BM,KADjC;AAECV,UAAAA,KAAK,EAAE,MAFR;AAGCQ,UAAAA,QAAQ,EAAE,CAACxK,MAAM,CAACgB,KAHnB;AAIC0I,UAAAA,WAAW,EAAEA;AAJd,SAdH;AAoBH;AACJ;;AACD,WAAOE,KAAP;AACH,GAzDiF;AA0DlFe,EAAAA,sBAAsB,EAAE,gCAAS/F,QAAT,EAAmB;AACvC,QAAIlD,IAAI,GAAG,IAAX;AACA,QAAIkJ,cAAJ;AACA,QAAI/K,sBAAJ;AACA,QAAIgL,yBAAJ;;AACA,QAAI,CAAC,GAAGvM,KAAK,CAACwF,SAAV,EAAqBc,QAArB,CAAJ,EAAoC;AAChC,aAAO,KAAKzC,kBAAL,IAA2B,KAAKgD,eAAL,CAAqB,KAAKhD,kBAA1B,EAA8CiD,EAA9C,CAAiDR,QAAjD,EAA2DS,QAA3D,EAAlC;AACH;;AACDuF,IAAAA,cAAc,GAAGlJ,IAAI,CAACoJ,iBAAL,EAAjB;AACAD,IAAAA,yBAAyB,GAAGnJ,IAAI,CAACmF,2BAAL,EAA5B;;AACA,QAAI+D,cAAc,IAAIC,yBAAlB,IAA+CA,yBAAyB,CAACtK,MAA7E,EAAqF;AACjFV,MAAAA,sBAAsB,GAAGF,yBAAyB,CAAC+B,IAAI,CAACG,eAAL,EAAD,CAAlD;AACA+I,MAAAA,cAAc,CAACG,MAAf,CAAsBlL,sBAAtB,EAA8CgL,yBAAyB,CAACvE,GAA1B,CAA8B,CAA9B,EAAiC0E,OAA/E,EAAwFH,yBAAyB,CAACvE,GAA1B,CAA8B,CAA9B,CAAxF;AACH;;AACD,WAAOsE,cAAP;AACH,GAzEiF;AA0ElFlF,EAAAA,eAAe,EAAE,2BAAW;AACxB,QAAIhE,IAAI,GAAG,IAAX;AACA,QAAItB,WAAJ;AACA,QAAIuF,MAAM,GAAGjE,IAAI,CAACf,QAAL,EAAb;AACA,QAAIsK,oBAAoB,GAAGvJ,IAAI,CAACiJ,sBAAL,EAA3B;AACA,QAAI/K,YAAY,GAAG8B,IAAI,CAACG,eAAL,EAAnB;;AACA,QAAIH,IAAI,CAACS,kBAAT,EAA6B;AACzB,UAAI8I,oBAAoB,IAAIA,oBAAoB,CAAC1K,MAAjD,EAAyD;AACrDH,QAAAA,WAAW,GAAGsB,IAAI,CAACwJ,UAAL,CAAgBD,oBAAhB,CAAd;AACH,OAFD,MAEO;AACH7K,QAAAA,WAAW,GAAGsB,IAAI,CAACf,QAAL,CAAce,IAAI,CAACS,kBAAnB,CAAd;AACH;AACJ;;AACD,WAAOjC,qBAAqB,CAACN,YAAD,EAAe+F,MAAf,EAAuBvF,WAAvB,CAA5B;AACH;AAxFiF,CAA1C,CAA5C;AA0FA,IAAI+K,4BAA4B,GAAG,CAAC,GAAG5M,OAAO,CAACyD,MAAZ,EAAoB,EAApB,EAAwBvB,gBAAxB,EAA0C;AACzE2K,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,SAAKjJ,kBAAL,IAA2BpE,eAAe,CAACqF,OAAhB,CAAwBiI,GAAxB,CAA4B,KAAKlJ,kBAAjC,EAAqD,oBAArD,EAA2E,cAA3E,CAA3B;AACA,SAAK6G,aAAL,IAAsBjL,eAAe,CAACqF,OAAhB,CAAwBiI,GAAxB,CAA4B,KAAKrC,aAAjC,EAAgD,oBAAhD,EAAsE,cAAtE,CAAtB;AACH,GAJwE;AAKzEsC,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,QAAI5J,IAAI,GAAG,IAAX;;AACA,QAAI6J,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAS3J,MAAT,EAAiB;AACpC7D,MAAAA,eAAe,CAACqF,OAAhB,CAAwBoI,EAAxB,CAA2B5J,MAA3B,EAAmC,oBAAnC,EAAyD,cAAzD,EAAyEF,IAAI,CAAC+J,YAAL,CAAkB,UAASC,IAAT,EAAe;AACtG,YAAIC,KAAK,GAAGD,IAAI,CAACC,KAAjB;AACA,YAAI/G,QAAQ,GAAGlD,IAAI,CAACwE,WAAL,CAAiB,CAAC,GAAGtI,UAAU,CAACwF,OAAf,EAAwBuI,KAAK,CAACC,MAA9B,EAAsC3F,OAAtC,CAA8C,SAA9C,CAAjB,CAAf;AACA,YAAI4F,OAAO,GAAG,gBAAgBF,KAAK,CAACnH,IAApC;;AACA,YAAII,QAAQ,IAAI,CAAhB,EAAmB;AACflD,UAAAA,IAAI,CAACsH,aAAL,IAAsBtH,IAAI,CAACyD,eAAL,CAAqBzD,IAAI,CAACsH,aAA1B,EAAyC5D,EAAzC,CAA4CR,QAA5C,EAAsD7D,WAAtD,CAAkE3B,iBAAlE,EAAqFyM,OAArF,CAAtB;AACAnK,UAAAA,IAAI,CAACS,kBAAL,IAA2BT,IAAI,CAACyD,eAAL,CAAqBzD,IAAI,CAACS,kBAA1B,EAA8CiD,EAA9C,CAAiDR,QAAjD,EAA2D7D,WAA3D,CAAuE3B,iBAAvE,EAA0FyM,OAA1F,CAA3B;AACH;AACJ,OARwE,CAAzE;AASH,KAVD;;AAWA,QAAInK,IAAI,CAACS,kBAAL,IAA2BT,IAAI,CAACsH,aAApC,EAAmD;AAC/CuC,MAAAA,gBAAgB,CAAC7J,IAAI,CAACS,kBAAN,CAAhB;AACAoJ,MAAAA,gBAAgB,CAAC7J,IAAI,CAACsH,aAAN,CAAhB;AACH;AACJ,GAtBwE;AAuBzEC,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,QAAIvH,IAAI,GAAG,IAAX;AACA,QAAIoK,QAAJ;AACA,QAAIC,UAAJ;AACA,QAAIC,SAAJ;AACA,QAAIC,YAAY,GAAGvK,IAAI,CAAC8B,eAAL,CAAqBzE,aAArB,CAAnB;AACA,QAAIgI,OAAO,GAAGrF,IAAI,CAACqF,OAAL,EAAd;AACA,QAAImF,WAAW,GAAGxN,SAAS,CAAC0E,OAAV,CAAkB+I,OAAlB,GAA4B,EAA5B,GAAiC,CAAnD;;AACA,QAAIpF,OAAO,IAAIrF,IAAI,CAACd,sBAApB,EAA4C;AACxCkL,MAAAA,QAAQ,GAAG/E,OAAO,CAAC1B,QAAR,CAAiB,MAAM4G,YAAvB,CAAX;AACAF,MAAAA,UAAU,GAAGrK,IAAI,CAAC0K,aAAL,EAAb;;AACA,UAAI,CAACN,QAAQ,CAACvL,MAAV,IAAoBwL,UAAxB,EAAoC;AAChCD,QAAAA,QAAQ,GAAG,CAAC,GAAGlO,UAAU,CAACwF,OAAf,EAAwB,OAAxB,EAAiCD,QAAjC,CAA0C8I,YAA1C,CAAX;;AACAlO,QAAAA,eAAe,CAACqF,OAAhB,CAAwBoI,EAAxB,CAA2BM,QAA3B,EAAqC,QAArC,EAA+C,UAASO,CAAT,EAAY;AACvDC,UAAAA,YAAY,CAAC5K,IAAI,CAAC6K,mBAAN,CAAZ;AACA7K,UAAAA,IAAI,CAAC6K,mBAAL,GAA2BC,UAAU,CAAC,YAAW;AAC7CR,YAAAA,SAAS,GAAG,CAAC,GAAGpO,UAAU,CAACwF,OAAf,EAAwBiJ,CAAC,CAACT,MAA1B,EAAkCI,SAAlC,EAAZ;AACAD,YAAAA,UAAU,CAACU,QAAX,CAAoB;AAChBC,cAAAA,CAAC,EAAEV;AADa,aAApB;AAGH,WALoC,EAKlCE,WALkC,CAArC;AAMH,SARD;;AASAnO,QAAAA,eAAe,CAACqF,OAAhB,CAAwBoI,EAAxB,CAA2BM,QAA3B,EAAqC7N,OAAO,CAACmF,OAAR,CAAgB8B,IAArD,EAA2D,UAASmH,CAAT,EAAY;AACnE,cAAIN,UAAJ,EAAgB;AACZC,YAAAA,SAAS,GAAGD,UAAU,CAACC,SAAX,EAAZ;AACAD,YAAAA,UAAU,CAACU,QAAX,CAAoB;AAChBC,cAAAA,CAAC,EAAEV,SAAS,GAAGK,CAAC,CAACM;AADD,aAApB;;AAGA,gBAAIZ,UAAU,CAACC,SAAX,KAAyB,CAAzB,IAA8BD,UAAU,CAACC,SAAX,KAAyBD,UAAU,CAACzD,YAAX,EAAzB,GAAqDyD,UAAU,CAACa,YAAX,KAA4BlL,IAAI,CAACmL,iBAAL,EAAnH,EAA6I;AACzI,qBAAO,KAAP;AACH;AACJ;AACJ,SAVD;;AAWAf,QAAAA,QAAQ,CAACgB,QAAT,CAAkB/F,OAAlB;AACH;;AACD,aAAO+E,QAAP;AACH;;AACD,WAAOpK,IAAI,CAACf,QAAL,EAAP;AACH,GA7DwE;AA8DzEoM,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,SAAKpM,QAAL;AACA,QAAIoL,UAAU,GAAG,KAAKK,aAAL,EAAjB;AACA,QAAIJ,SAAS,GAAGD,UAAU,IAAIA,UAAU,CAACiB,YAAX,GAA0BC,GAAxD;;AACA,SAAKC,yBAAL,CAA+BlB,SAA/B;AACH,GAnEwE;AAoEzEmB,EAAAA,cAAc,EAAE,wBAASC,cAAT,EAAyBvH,YAAzB,EAAuC;AACnD,QAAI,KAAKjF,sBAAT,EAAiC;AAC7B,aAAOwM,cAAc,CAACC,KAAf,GAAuBlK,QAAvB,CAAgC,KAAKK,eAAL,CAAqBzE,aAArB,IAAsC,GAAtC,GAA4C,KAAKyE,eAAL,CAAqBxE,mBAArB,CAA5C,GAAwF,GAAxF,GAA8FO,2BAA9H,EAA2J+N,MAA3J,CAAkKzH,YAAlK,CAAP;AACH;;AACD,WAAO,KAAKlF,QAAL,CAAcyM,cAAd,EAA8BvH,YAA9B,CAAP;AACH,GAzEwE;AA0EzE0H,EAAAA,oBAAoB,EAAE,8BAAS9L,OAAT,EAAkB;AACpC,QAAI,KAAKb,sBAAT,EAAiC;AAC7B,aAAO,KAAKD,QAAL,CAAc,CAAC,GAAGpC,OAAO,CAACyD,MAAZ,EAAoB,EAApB,EAAwBP,OAAxB,EAAiC;AAClDQ,QAAAA,OAAO,EAAE,KAAKkC,kBAAL,CAAwBC,iBAAxB;AADyC,OAAjC,CAAd,CAAP;AAGH;;AACD,WAAO,KAAKzD,QAAL,CAAcc,OAAd,CAAP;AACH,GAjFwE;AAkFzE+L,EAAAA,mBAAmB,EAAE,6BAASrH,IAAT,EAAe1E,OAAf,EAAwB;AACzC,WAAO,KAAKd,QAAL,CAAcwF,IAAd,EAAoB,CAAC,GAAG5H,OAAO,CAACyD,MAAZ,EAAoB,EAApB,EAAwBP,OAAxB,EAAiC;AACxDQ,MAAAA,OAAO,EAAE,KAAKkC,kBAAL,CAAwBC,iBAAxB;AAD+C,KAAjC,CAApB,CAAP;AAGH,GAtFwE;AAuFzEqJ,EAAAA,wBAAwB,EAAE,kCAAStH,IAAT,EAAe1E,OAAf,EAAwB;AAC9C,QAAI,KAAKb,sBAAT,EAAiC;AAC7B,WAAKD,QAAL,CAAcwF,IAAd,EAAoB,CAAC,GAAG5H,OAAO,CAACyD,MAAZ,EAAoB,EAApB,EAAwBP,OAAxB,EAAiC;AACjDQ,QAAAA,OAAO,EAAE,KAAKkC,kBAAL,CAAwBC,iBAAxB;AADwC,OAAjC,CAApB;AAGH,KAJD,MAIO;AACH,WAAKzD,QAAL,CAAcwF,IAAd,EAAoB1E,OAApB;AACH;AACJ,GA/FwE;AAgGzEiM,EAAAA,6BAA6B,EAAE,uCAASpM,WAAT,EAAsBG,OAAtB,EAA+B;AAC1D,QAAIkE,MAAM,GAAG,KAAKhF,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B,CAAb;AACA,QAAI5C,MAAM,GAAGyB,OAAO,CAACQ,OAAR,CAAgBX,WAAhB,CAAb;;AACA,QAAIG,OAAO,CAAC6C,OAAZ,EAAqB;AACjB,aAAOtE,MAAM,CAACgB,KAAP,KAAiB2E,MAAM,IAAI,YAAY3F,MAAM,CAACkK,aAA9C,CAAP;AACH;;AACD,WAAOvE,MAAM,IAAI,CAAC3F,MAAM,CAACgB,KAAzB;AACH,GAvGwE;AAwGzE2M,EAAAA,4BAA4B,EAAE,sCAASC,UAAT,EAAqBnM,OAArB,EAA8BoM,gBAA9B,EAAgDC,sBAAhD,EAAwE;AAClG,QAAIC,gBAAJ;AACA,QAAIlO,sBAAJ;AACA,QAAI8D,2BAAJ;;AACA,QAAI,KAAK/C,sBAAT,EAAiC;AAC7Ba,MAAAA,OAAO,CAAC6C,OAAR,GAAkB,IAAlB;AACAX,MAAAA,2BAA2B,GAAG,KAAKU,0BAAL,CAAgCwJ,gBAAhC,EAAkDpM,OAAlD,CAA9B;AACAA,MAAAA,OAAO,CAAC6C,OAAR,GAAkB,KAAlB;AACAyJ,MAAAA,gBAAgB,GAAGtM,OAAO,CAACQ,OAAR,CAAgB1B,MAAhB,GAAyBoD,2BAA5C;AACAlC,MAAAA,OAAO,GAAG,CAAC,GAAGlD,OAAO,CAACyD,MAAZ,EAAoB,EAApB,EAAwBP,OAAxB,EAAiC;AACvCQ,QAAAA,OAAO,EAAE,KAAKJ,eAAL;AAD8B,OAAjC,CAAV;AAGAhC,MAAAA,sBAAsB,GAAGF,yBAAyB,CAAC8B,OAAO,CAACQ,OAAT,CAAlD;;AACA,UAAI8L,gBAAgB,GAAGlO,sBAAvB,EAA+C;AAC3C8D,QAAAA,2BAA2B,IAAIlC,OAAO,CAACQ,OAAR,CAAgBpC,sBAAhB,EAAwCW,OAAxC,GAAkD,CAAlD,IAAuD,CAAtF;AACAqN,QAAAA,gBAAgB,IAAIpM,OAAO,CAACQ,OAAR,CAAgBpC,sBAAhB,EAAwCW,OAAxC,GAAkD,CAAlD,IAAuD,CAA3E;AACH,OAHD,MAGO;AACH,YAAIsN,sBAAsB,GAAG,CAA7B,EAAgC;AAC5BF,UAAAA,UAAU,CAAC3J,GAAX,CAAe,YAAf,EAA6B,QAA7B;AACH;AACJ;;AACD6J,MAAAA,sBAAsB,GAAGnK,2BAAzB;AACH;;AACD,SAAKhD,QAAL,CAAciN,UAAd,EAA0BnM,OAA1B,EAAmCoM,gBAAnC,EAAqDC,sBAArD;AACH,GAhIwE;AAiIzEE,EAAAA,oBAAoB,EAAE,8BAAS1M,WAAT,EAAsBW,OAAtB,EAA+B;AACjD,QAAIpC,sBAAJ;;AACA,QAAI,KAAKe,sBAAT,EAAiC;AAC7Bf,MAAAA,sBAAsB,GAAGF,yBAAyB,CAACsC,OAAD,CAAlD;;AACA,UAAIX,WAAW,GAAGzB,sBAAlB,EAA0C;AACtCyB,QAAAA,WAAW,IAAIW,OAAO,CAACpC,sBAAD,CAAP,CAAgCW,OAAhC,GAA0C,CAAzD;AACH;;AACD,aAAOc,WAAP;AACH;;AACD,WAAO,KAAKX,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B,CAAP;AACH,GA3IwE;AA4IzEqL,EAAAA,WAAW,EAAE,qBAAS/M,MAAT,EAAiB;AAC1B,SAAKkK,kBAAL;;AACA,SAAKzK,QAAL,CAAcO,MAAd;AACA,QAAIiG,cAAc,GAAG,KAAKtG,eAA1B;AACA,SAAKkG,OAAL,GAAehG,WAAf,CAA2BzB,mBAA3B,EAAgD6H,cAAhD;;AACA,QAAI,KAAK5C,MAAL,CAAY,mBAAZ,KAAoC4C,cAAxC,EAAwD;AACpD,WAAKmE,kBAAL;AACH;AACJ,GApJwE;AAqJzE4C,EAAAA,cAAc,EAAE,wBAAS5M,WAAT,EAAsB0I,KAAtB,EAA6B;AACzC,SAAKrJ,QAAL,CAAcW,WAAd,EAA2B0I,KAA3B;;AACA,QAAImE,KAAK,GAAG,KAAKhJ,eAAL,CAAqB,KAAKhD,kBAA1B,CAAZ;;AACA,SAAKiM,mBAAL,CAAyBD,KAAzB,EAAgC,KAAKtM,eAAL,EAAhC,EAAwDP,WAAxD,EAAqE0I,KAArE;AACH,GAzJwE;AA0JzEqE,EAAAA,aAAa,EAAE,uBAAS3C,IAAT,EAAe;AAC1B,QAAIhK,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACf,QAAL,CAAc+K,IAAd;;AACA,QAAI,wBAAwBA,IAAI,CAACxG,IAA7B,IAAqCxD,IAAI,CAACb,eAA9C,EAA+D;AAC3D6K,MAAAA,IAAI,CAAC1B,KAAL,GAAa,KAAKsB,kBAAL,EAAb,GAAyC,KAAKF,kBAAL,EAAzC;AACH;AACJ,GAhKwE;AAiKzEkD,EAAAA,YAAY,EAAE,sBAASrL,KAAT,EAAgB;AAC1B,QAAItB,WAAW,GAAG,KAAKQ,kBAAvB;AACA,QAAIF,OAAJ;AACA,QAAIsM,SAAS,GAAG,CAAhB;;AACA,QAAI5M,WAAW,IAAIsB,KAAK,CAACuL,EAAN,CAAS,IAAT,CAAf,IAAiCvL,KAAK,CAACgD,OAAN,CAActE,WAAd,EAA2BpB,MAAhE,EAAwE;AACpE0B,MAAAA,OAAO,GAAG,KAAKJ,eAAL,EAAV;AACA,OAAC,GAAGrD,SAAS,CAACsB,IAAd,EAAoBmC,OAApB,EAA6B,UAASlC,KAAT,EAAgBC,MAAhB,EAAwB;AACjD,YAAID,KAAK,KAAKkD,KAAK,CAAC,CAAD,CAAL,CAASsL,SAAvB,EAAkC;AAC9B,iBAAO,KAAP;AACH;;AACD,YAAIvO,MAAM,CAACQ,OAAX,EAAoB;AAChB+N,UAAAA,SAAS,IAAIvO,MAAM,CAACQ,OAApB;AACA;AACH;;AACD+N,QAAAA,SAAS;AACZ,OATD;AAUA,aAAOA,SAAP;AACH;;AACD,WAAO,KAAK5N,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B,CAAP;AACH,GApLwE;AAqLzEsK,EAAAA,yBAAyB,EAAE,mCAASlB,SAAT,EAAoByC,SAApB,EAA+B;AACtD,QAAI,KAAKtM,kBAAL,IAA2B,KAAK6G,aAApC,EAAmD;AAC/C,UAAI0F,eAAJ;AACA,UAAIC,aAAa,GAAG,KAAKC,aAAL,CAAmB,eAAnB,CAApB;;AACA,WAAKzM,kBAAL,CAAwBC,MAAxB,GAAiC4J,SAAjC,CAA2CA,SAA3C;;AACA,UAAIyC,SAAJ,EAAe;AACXC,QAAAA,eAAe,GAAGC,aAAa,CAACE,KAAd,EAAlB;AACAH,QAAAA,eAAe,IAAIC,aAAa,CAACE,KAAd,CAAoBH,eAApB,CAAnB;AACH;AACJ;AACJ,GA/LwE;AAgMzEvF,EAAAA,kBAAkB,EAAE,4BAAS2F,MAAT,EAAiBC,MAAjB,EAAyB;AACzC,QAAIrN,IAAI,GAAG,IAAX;AACA,QAAIsN,kBAAJ;AACA,QAAIC,MAAM,GAAG;AACTC,MAAAA,YAAY,EAAE;AADL,KAAb;AAGA,QAAIC,aAAa,GAAGzN,IAAI,CAACqF,OAAL,GAAe1B,QAAf,CAAwB,MAAM,KAAK7B,eAAL,CAAqBxE,mBAArB,CAA9B,CAApB;;AACA,QAAImQ,aAAa,CAAC5O,MAAd,IAAwBmB,IAAI,CAACS,kBAAjC,EAAqD;AACjDgN,MAAAA,aAAa,CAAClL,GAAd,CAAkBgL,MAAlB;;AACAvN,MAAAA,IAAI,CAACS,kBAAL,CAAwB8B,GAAxB,CAA4BgL,MAA5B;;AACAA,MAAAA,MAAM,CAACvN,IAAI,CAAC6C,MAAL,CAAY,YAAZ,IAA4B,YAA5B,GAA2C,aAA5C,CAAN,GAAmEuK,MAAnE;AACAG,MAAAA,MAAM,CAACC,YAAP,GAAsBH,MAAtB;AACAC,MAAAA,kBAAkB,GAAGtN,IAAI,CAAC0N,WAAL,IAAoB1N,IAAI,CAAC0N,WAAL,CAAiB7K,MAAjB,CAAwB,WAAxB,CAAzC;AACA,OAACyK,kBAAkB,GAAGG,aAAH,GAAmBzN,IAAI,CAACS,kBAA3C,EAA+D8B,GAA/D,CAAmEgL,MAAnE;AACH;AACJ,GA/MwE;AAgNzEI,EAAAA,oBAAoB,EAAE,8BAAShD,CAAT,EAAY;AAC9B,QAAIiD,YAAJ;AACA,QAAIC,iBAAJ;AACA,QAAIC,mBAAJ;AACA,QAAIC,gBAAgB,GAAG,CAAvB;AACA,QAAIC,cAAc,GAAG,KAAK7C,iBAAL,CAAuB,IAAvB,CAArB;;AACA,QAAIR,CAAC,CAACW,YAAF,CAAeC,GAAf,GAAqB,CAAzB,EAA4B;AACxBwC,MAAAA,gBAAgB,GAAG,CAACpD,CAAC,CAACW,YAAF,CAAeC,GAAnC;AACH,KAFD,MAEO;AACH,UAAIZ,CAAC,CAACsD,aAAN,EAAqB;AACjBJ,QAAAA,iBAAiB,GAAG,KAAKtG,mBAAL,EAApB;AACAuG,QAAAA,mBAAmB,GAAGnD,CAAC,CAACuD,SAAF,CAAYC,UAAZ,EAAtB;AACAP,QAAAA,YAAY,GAAGQ,IAAI,CAACC,GAAL,CAASR,iBAAiB,CAAClH,MAAlB,KAA6BqH,cAA7B,GAA8CF,mBAAmB,CAACnH,MAApB,EAAvD,EAAqF,CAArF,CAAf;AACAoH,QAAAA,gBAAgB,GAAGH,YAAY,GAAGjD,CAAC,CAACW,YAAF,CAAeC,GAAjD;AACH;AACJ;;AACD,WAAOwC,gBAAP;AACH,GAjOwE;AAkOzEO,EAAAA,sBAAsB,EAAE,gCAAS3D,CAAT,EAAY;AAChC,QAAI,KAAKlK,kBAAT,EAA6B;AACzB,UAAIsN,gBAAgB,GAAG,KAAKJ,oBAAL,CAA0BhD,CAA1B,CAAvB;;AACA,UAAI,MAAMyD,IAAI,CAACG,IAAL,CAAUR,gBAAV,CAAV,EAAuC;AACnC7Q,QAAAA,YAAY,CAACwE,OAAb,CAAqB8M,IAArB,CAA0B,KAAK/N,kBAA/B,EAAmD;AAC/C8K,UAAAA,GAAG,EAAEwC;AAD0C,SAAnD;AAGH,OAJD,MAIO;AACH,aAAKtN,kBAAL,CAAwB8B,GAAxB,CAA4B,WAA5B,EAAyC,EAAzC;AACH;AACJ;AACJ,GA7OwE;AA8OzEkM,EAAAA,aAAa,EAAE,uBAAS9D,CAAT,EAAY;AACvB,SAAKa,yBAAL,CAA+Bb,CAAC,CAACW,YAAF,CAAeC,GAA9C,EAAmD,IAAnD;;AACA,SAAK+C,sBAAL,CAA4B3D,CAA5B;;AACA,SAAK1L,QAAL,CAAc0L,CAAd;AACH,GAlPwE;AAmPzE+D,EAAAA,sBAAsB,EAAE,gCAASC,QAAT,EAAmB;AACvC,SAAK1P,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;;AACA,QAAI,CAACyN,QAAL,EAAe;AACX,WAAKnD,yBAAL,CAA+B,KAAKoD,UAApC;AACH;AACJ,GAxPwE;AAyPzEC,EAAAA,iBAAiB,EAAE,2BAASlE,CAAT,EAAY;AAC3B,QAAI,KAAKzL,sBAAT,EAAiC;AAC7B;AACH;;AACD,SAAKD,QAAL,CAAc0L,CAAd;AACH,GA9PwE;AA+PzEmE,EAAAA,gBAAgB,EAAE,0BAASC,QAAT,EAAmB;AACjC,SAAK9P,QAAL,CAAc8P,QAAd,EAAwB,KAAKlK,qBAAL,EAAxB;AACH,GAjQwE;AAkQzEmK,EAAAA,OAAO,EAAE,mBAAW;AAChB,SAAK/P,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;AACA0J,IAAAA,YAAY,CAAC,KAAKC,mBAAN,CAAZ;AACH;AArQwE,CAA1C,CAAnC;AAuQA,IAAIoE,8BAA8B,GAAGlQ,gBAArC;AACAmQ,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,cAAc,EAAE,0BAAW;AACvB,WAAO;AACHC,MAAAA,YAAY,EAAE;AACVC,QAAAA,OAAO,EAAE,KADC;AAEV5G,QAAAA,KAAK,EAAE;AACHC,UAAAA,GAAG,EAAElM,SAAS,CAACiF,OAAV,CAAkB6N,MAAlB,CAAyB,4BAAzB,CADF;AAEHvG,UAAAA,KAAK,EAAEvM,SAAS,CAACiF,OAAV,CAAkB6N,MAAlB,CAAyB,8BAAzB,CAFJ;AAGH1G,UAAAA,YAAY,EAAEpM,SAAS,CAACiF,OAAV,CAAkB6N,MAAlB,CAAyB,qCAAzB,CAHX;AAIHxG,UAAAA,aAAa,EAAEtM,SAAS,CAACiF,OAAV,CAAkB6N,MAAlB,CAAyB,sCAAzB;AAJZ;AAFG;AADX,KAAP;AAWH,GAbY;AAcbC,EAAAA,SAAS,EAAE;AACPC,IAAAA,KAAK,EAAE;AACHC,MAAAA,iBAAiB,EAAE7H,qCADhB;AAEH8H,MAAAA,QAAQ,EAAElG,4BAFP;AAGHmG,MAAAA,UAAU,EAAEX;AAHT,KADA;AAMPY,IAAAA,WAAW,EAAE,YAAW;AACpB,UAAIC,8BAA8B,GAAG,SAAjCA,8BAAiC,CAASvP,OAAT,EAAkBrC,YAAlB,EAAgC6R,eAAhC,EAAiD;AAClF,YAAI5R,sBAAsB,GAAGF,yBAAyB,CAACC,YAAD,CAAtD;AACA,YAAI8R,YAAY,GAAGzP,OAAO,CAAC1B,MAAR,GAAiBX,YAAY,CAACW,MAAjD;AACA,SAAC,GAAG/B,SAAS,CAACsB,IAAd,EAAoB2R,eAApB,EAAqC,UAASE,CAAT,EAAYC,KAAZ,EAAmB;AACpD,cAAIA,KAAK,CAAC7R,KAAN,GAAcF,sBAAlB,EAA0C;AACtC+R,YAAAA,KAAK,CAACtQ,WAAN,IAAqBoQ,YAArB;AACAE,YAAAA,KAAK,CAAC7R,KAAN,IAAe2R,YAAf;AACH;AACJ,SALD;AAMA,eAAOD,eAAP;AACH,OAVD;;AAWA,aAAO;AACHI,QAAAA,cAAc,EAAE;AACZC,UAAAA,wBAAwB,EAAE,kCAASrQ,OAAT,EAAkB;AACxC,gBAAIgQ,eAAJ;AACA,gBAAIlK,cAAc,GAAG9F,OAAO,CAACQ,OAA7B;AACA,gBAAI8P,mBAAmB,GAAGtQ,OAAO,CAACsQ,mBAAlC;;AACA,gBAAIA,mBAAmB,IAAI,cAAcA,mBAAmB,CAACC,OAApB,EAArC,IAAsED,mBAAmB,CAAC5K,cAApB,EAA1E,EAAgH;AAC5G,kBAAI1F,OAAO,CAACwQ,YAAR,CAAqBjR,KAAzB,EAAgC;AAC5B,oBAAI,CAACS,OAAO,CAACmD,QAAb,EAAuB;AACnBnD,kBAAAA,OAAO,CAACmJ,cAAR,GAAyBmH,mBAAmB,CAACpH,sBAApB,CAA2C,CAA3C,CAAzB;AACH;;AACDlJ,gBAAAA,OAAO,CAACQ,OAAR,GAAkB8P,mBAAmB,CAAClQ,eAApB,CAAoCJ,OAAO,CAACmD,QAA5C,CAAlB;AACA6M,gBAAAA,eAAe,GAAG,KAAK9Q,QAAL,CAAcc,OAAd,CAAlB;AACA+P,gBAAAA,8BAA8B,CAACjK,cAAD,EAAiB9F,OAAO,CAACQ,OAAzB,EAAkCwP,eAAlC,CAA9B;AACA,uBAAOA,eAAP;AACH;AACJ;;AACD,mBAAO,KAAK9Q,QAAL,CAAcc,OAAd,CAAP;AACH,WAjBW;AAkBZyQ,UAAAA,aAAa,EAAE,uBAASN,KAAT,EAAgB3P,OAAhB,EAAyBkQ,QAAzB,EAAmCF,YAAnC,EAAiD;AAC5D,gBAAItM,MAAM,GAAG,KAAKhF,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B,CAAb;;AACA,gBAAI+D,kBAAkB,GAAG,KAAKyL,kBAAL,CAAwBvL,2BAAxB,EAAzB;;AACA,gBAAIwL,YAAJ;;AACA,gBAAI,CAAC1M,MAAD,IAAW,cAAcwM,QAAzB,IAAqCxL,kBAArC,IAA2DA,kBAAkB,CAACpG,MAAlF,EAA0F;AACtF8R,cAAAA,YAAY,GAAG1L,kBAAkB,CAACL,GAAnB,CAAuB,CAAvB,EAA0B8B,qBAA1B,EAAf;;AACA,kBAAI6J,YAAY,IAAIA,YAAY,CAACjR,KAAjC,EAAwC;AACpC,uBAAO,YAAYiR,YAAY,CAAC/H,aAAzB,GAAyC0H,KAAK,CAACU,CAAN,GAAUD,YAAY,CAAC3L,KAAhE,GAAwEkL,KAAK,CAACU,CAAN,GAAUD,YAAY,CAAC5L,IAAtG;AACH,eAFD,MAEO;AACH,uBAAOmL,KAAK,CAACU,CAAN,GAAUD,YAAY,CAAC5L,IAAvB,IAA+BmL,KAAK,CAACU,CAAN,GAAUD,YAAY,CAAC3L,KAA7D;AACH;AACJ;;AACD,mBAAOf,MAAP;AACH;AA/BW,SADb;AAkCH4M,QAAAA,cAAc,EAAE;AACZT,UAAAA,wBAAwB,EAAE,oCAAW;AACjC,gBAAIpQ,IAAI,GAAG,IAAX;AACA,gBAAI8Q,iBAAiB,GAAG9Q,IAAI,CAACyC,kBAA7B;;AACA,gBAAIlC,OAAO,GAAGuQ,iBAAiB,IAAI9Q,IAAI,CAACyC,kBAAL,CAAwBC,iBAAxB,EAAnC;;AACA,gBAAIxE,YAAY,GAAG4S,iBAAiB,IAAI9Q,IAAI,CAACyC,kBAAL,CAAwBtC,eAAxB,EAAxC;;AACA,gBAAIY,KAAK,GAAGf,IAAI,CAAC0Q,kBAAL,CAAwBzH,sBAAxB,EAAZ;;AACA,gBAAI8H,oBAAoB,GAAG,EAA3B;AACA/Q,YAAAA,IAAI,CAACf,QAAL;;AACA,gBAAI8B,KAAK,IAAIA,KAAK,CAAClC,MAAN,GAAe,CAA5B,EAA+B;AAC3BkS,cAAAA,oBAAoB,GAAGpU,aAAa,CAAC+E,OAAd,CAAsBsP,kBAAtB,CAAyCjQ,KAAzC,EAAgD,UAASmP,KAAT,EAAgB;AACnF,uBAAOlQ,IAAI,CAACwQ,aAAL,CAAmBN,KAAnB,EAA0BnP,KAAK,CAAClC,MAAhC,EAAwCX,YAAxC,CAAP;AACH,eAFsB,CAAvB;AAGA8B,cAAAA,IAAI,CAACiR,qBAAL,GAA6BnB,8BAA8B,CAACvP,OAAD,EAAUrC,YAAV,EAAwB6S,oBAAxB,CAA3D;AACH;AACJ,WAfW;AAgBZP,UAAAA,aAAa,EAAE,uBAASN,KAAT,EAAgBgB,WAAhB,EAA6B3Q,OAA7B,EAAsC;AACjD,gBAAI4Q,aAAJ;AACA,gBAAIC,UAAJ;AACA,gBAAIC,oBAAoB,GAAG,aAAa,KAAKxO,MAAL,CAAY,oBAAZ,CAAxC;;AACA,gBAAIqN,KAAK,CAAC7R,KAAN,GAAc,CAAd,IAAmB6R,KAAK,CAAC7R,KAAN,GAAc6S,WAArC,EAAkD;AAC9CC,cAAAA,aAAa,GAAG5Q,OAAO,CAAC2P,KAAK,CAACtQ,WAAN,GAAoB,CAArB,CAAP,IAAkC,EAAlD;AACAwR,cAAAA,UAAU,GAAG7Q,OAAO,CAAC2P,KAAK,CAACtQ,WAAP,CAAP,IAA8B,EAA3C;;AACA,kBAAIuR,aAAa,CAAC7R,KAAd,IAAuB8R,UAAU,CAAC9R,KAAtC,EAA6C;AACzC4Q,gBAAAA,KAAK,CAACtQ,WAAN,IAAqB,CAArB;AACA,uBAAO,EAAE,CAACuR,aAAa,CAACG,aAAd,IAA+BH,aAAa,CAAC5S,OAAd,KAA0BR,mBAA1D,MAAmFsT,oBAAoB,IAAID,UAAU,CAACE,aAAnC,IAAoDF,UAAU,CAAC7S,OAAX,KAAuBR,mBAA9J,CAAF,CAAP;AACH;AACJ;;AACD,mBAAO,KAAKkB,QAAL,CAAcgC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B,CAAP;AACH,WA7BW;AA8BZqQ,UAAAA,eAAe,EAAE,yBAASxB,eAAT,EAA0ByB,QAA1B,EAAoCC,MAApC,EAA4C;AACzD,gBAAIxM,kBAAkB,GAAG,KAAKyL,kBAAL,CAAwBvL,2BAAxB,EAAzB;;AACA,gBAAIwL,YAAJ;;AACA,gBAAI1L,kBAAkB,IAAIA,kBAAkB,CAACpG,MAA7C,EAAqD;AACjD8R,cAAAA,YAAY,GAAG1L,kBAAkB,CAACL,GAAnB,CAAuB,CAAvB,EAA0B8B,qBAA1B,EAAf;;AACA,kBAAI8K,QAAQ,IAAIb,YAAY,CAAC5L,IAAzB,IAAiCyM,QAAQ,IAAIb,YAAY,CAAC3L,KAA9D,EAAqE;AACjE,uBAAO,KAAK/F,QAAL,CAAc,KAAKgS,qBAAnB,EAA0CO,QAA1C,EAAoDC,MAApD,CAAP;AACH;AACJ;;AACD,mBAAO,KAAKxS,QAAL,CAAc8Q,eAAd,EAA+ByB,QAA/B,EAAyCC,MAAzC,CAAP;AACH;AAxCW;AAlCb,OAAP;AA6EH,KAzFY;AANN;AAdE,CAAjB","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.column_fixing.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _wheel = require(\"../../events/core/wheel\");\r\nvar _wheel2 = _interopRequireDefault(_wheel);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _uiGrid_core = require(\"../grid_core/ui.grid_core.utils\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _translator2 = _interopRequireDefault(_translator);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar CONTENT_CLASS = \"content\";\r\nvar CONTENT_FIXED_CLASS = \"content-fixed\";\r\nvar MASTER_DETAIL_CELL_CLASS = \"dx-master-detail-cell\";\r\nvar FIRST_CELL_CLASS = \"dx-first-cell\";\r\nvar LAST_CELL_CLASS = \"dx-last-cell\";\r\nvar HOVER_STATE_CLASS = \"dx-state-hover\";\r\nvar FIXED_COL_CLASS = \"dx-col-fixed\";\r\nvar FIXED_COLUMNS_CLASS = \"dx-fixed-columns\";\r\nvar POINTER_EVENTS_TARGET_CLASS = \"dx-pointer-events-target\";\r\nvar POINTER_EVENTS_NONE_CLASS = \"dx-pointer-events-none\";\r\nvar COMMAND_TRANSPARENT = \"transparent\";\r\nvar GROUP_ROW_CLASS = \"dx-group-row\";\r\nvar getTransparentColumnIndex = function(fixedColumns) {\r\n    var transparentColumnIndex = -1;\r\n    (0, _iterator.each)(fixedColumns, function(index, column) {\r\n        if (column.command === COMMAND_TRANSPARENT) {\r\n            transparentColumnIndex = index;\r\n            return false\r\n        }\r\n    });\r\n    return transparentColumnIndex\r\n};\r\nvar normalizeColumnWidths = function(fixedColumns, widths, fixedWidths) {\r\n    var i;\r\n    var fixedColumnIndex = 0;\r\n    if (fixedColumns && widths && fixedWidths) {\r\n        for (i = 0; i < fixedColumns.length; i++) {\r\n            if (fixedColumns[i].command === COMMAND_TRANSPARENT) {\r\n                fixedColumnIndex += fixedColumns[i].colspan\r\n            } else {\r\n                if (widths[fixedColumnIndex] < fixedWidths[i]) {\r\n                    widths[fixedColumnIndex] = fixedWidths[i]\r\n                }\r\n                fixedColumnIndex++\r\n            }\r\n        }\r\n    }\r\n    return widths\r\n};\r\nvar baseFixedColumns = {\r\n    init: function() {\r\n        this.callBase();\r\n        this._isFixedTableRendering = false;\r\n        this._isFixedColumns = false\r\n    },\r\n    _createCol: function(column) {\r\n        return this.callBase(column).toggleClass(FIXED_COL_CLASS, !!(this._isFixedTableRendering && (column.fixed || column.command && column.command !== COMMAND_TRANSPARENT)))\r\n    },\r\n    _correctColumnIndicesForFixedColumns: function(fixedColumns, change) {\r\n        var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\r\n        var transparentColspan = fixedColumns[transparentColumnIndex].colspan;\r\n        var columnIndices = change && change.columnIndices;\r\n        if (columnIndices) {\r\n            change.columnIndices = columnIndices.map(function(columnIndices) {\r\n                if (columnIndices) {\r\n                    return columnIndices.map(function(columnIndex) {\r\n                        if (columnIndex < transparentColumnIndex) {\r\n                            return columnIndex\r\n                        } else {\r\n                            if (columnIndex >= transparentColumnIndex + transparentColspan) {\r\n                                return columnIndex - transparentColspan + 1\r\n                            }\r\n                        }\r\n                        return -1\r\n                    }).filter(function(columnIndex) {\r\n                        return columnIndex >= 0\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _renderTable: function(options) {\r\n        var that = this;\r\n        var $fixedTable;\r\n        var $table;\r\n        var fixedColumns = that.getFixedColumns();\r\n        that._isFixedColumns = !!fixedColumns.length;\r\n        $table = that.callBase(options);\r\n        if (that._isFixedColumns) {\r\n            that._isFixedTableRendering = true;\r\n            var change = options && options.change;\r\n            var columnIndices = change && change.columnIndices;\r\n            that._correctColumnIndicesForFixedColumns(fixedColumns, change);\r\n            $fixedTable = that._createTable(fixedColumns);\r\n            that._renderRows($fixedTable, (0, _extend.extend)({}, options, {\r\n                columns: fixedColumns\r\n            }));\r\n            that._updateContent($fixedTable, change);\r\n            if (columnIndices) {\r\n                change.columnIndices = columnIndices\r\n            }\r\n            that._isFixedTableRendering = false\r\n        } else {\r\n            that._fixedTableElement && that._fixedTableElement.parent().remove();\r\n            that._fixedTableElement = null\r\n        }\r\n        return $table\r\n    },\r\n    _renderRow: function($table, options) {\r\n        var fixedCells;\r\n        var fixedCorrection;\r\n        var cells = options.row.cells;\r\n        this.callBase.apply(this, arguments);\r\n        if (this._isFixedTableRendering && cells && cells.length) {\r\n            fixedCorrection = 0;\r\n            fixedCells = options.row.cells || [];\r\n            cells = cells.slice();\r\n            options.row.cells = cells;\r\n            for (var i = 0; i < fixedCells.length; i++) {\r\n                if (fixedCells[i].column && fixedCells[i].column.command === COMMAND_TRANSPARENT) {\r\n                    fixedCorrection = (fixedCells[i].column.colspan || 1) - 1;\r\n                    continue\r\n                }\r\n                cells[i + fixedCorrection] = fixedCells[i]\r\n            }\r\n        }\r\n    },\r\n    _createCell: function(options) {\r\n        var that = this;\r\n        var column = options.column;\r\n        var columnCommand = column && column.command;\r\n        var rowType = options.rowType;\r\n        var $cell = that.callBase.apply(that, arguments);\r\n        var fixedColumns;\r\n        var prevFixedColumn;\r\n        var transparentColumnIndex;\r\n        if (that._isFixedTableRendering || \"filter\" === rowType) {\r\n            fixedColumns = that.getFixedColumns();\r\n            transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\r\n            prevFixedColumn = fixedColumns[transparentColumnIndex - 1]\r\n        }\r\n        if (that._isFixedTableRendering) {\r\n            if (columnCommand === COMMAND_TRANSPARENT) {\r\n                $cell.addClass(POINTER_EVENTS_NONE_CLASS).toggleClass(FIRST_CELL_CLASS, 0 === transparentColumnIndex || prevFixedColumn && \"expand\" === prevFixedColumn.command).toggleClass(LAST_CELL_CLASS, fixedColumns.length && transparentColumnIndex === fixedColumns.length - 1);\r\n                if (\"freeSpace\" !== rowType) {\r\n                    _uiGrid_core2.default.setEmptyText($cell)\r\n                }\r\n            }\r\n        } else {\r\n            if (\"filter\" === rowType) {\r\n                $cell.toggleClass(FIRST_CELL_CLASS, options.columnIndex === transparentColumnIndex)\r\n            }\r\n        }\r\n        return $cell\r\n    },\r\n    _wrapTableInScrollContainer: function() {\r\n        var $scrollContainer = this.callBase.apply(this, arguments);\r\n        if (this._isFixedTableRendering) {\r\n            $scrollContainer.addClass(this.addWidgetPrefix(CONTENT_FIXED_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS)\r\n        }\r\n        return $scrollContainer\r\n    },\r\n    _renderCellContent: function($cell, options) {\r\n        var that = this;\r\n        var columns;\r\n        var isEmptyCell;\r\n        var transparentColumnIndex;\r\n        var alignByFixedColumnCellCount;\r\n        var column = options.column;\r\n        var isFixedTableRendering = that._isFixedTableRendering;\r\n        var isGroupCell = \"group\" === options.rowType && (0, _type.isDefined)(column.groupIndex);\r\n        if (isFixedTableRendering && isGroupCell && !column.command && !column.groupCellTemplate) {\r\n            $cell.css(\"pointerEvents\", \"none\")\r\n        }\r\n        if (!isFixedTableRendering && that._isFixedColumns) {\r\n            isEmptyCell = column.fixed || column.command && false !== column.fixed;\r\n            if (isGroupCell) {\r\n                isEmptyCell = false;\r\n                if (options.row.summaryCells && options.row.summaryCells.length) {\r\n                    columns = that._columnsController.getVisibleColumns();\r\n                    alignByFixedColumnCellCount = that._getAlignByColumnCellCount ? that._getAlignByColumnCellCount(column.colspan, {\r\n                        columns: columns,\r\n                        row: options.row,\r\n                        isFixed: true\r\n                    }) : 0;\r\n                    if (alignByFixedColumnCellCount > 0) {\r\n                        transparentColumnIndex = getTransparentColumnIndex(that._columnsController.getFixedColumns());\r\n                        isEmptyCell = columns.length - alignByFixedColumnCellCount < transparentColumnIndex\r\n                    }\r\n                }\r\n            }\r\n            if (isEmptyCell) {\r\n                if (that.option(\"legacyRendering\") || column.command && \"buttons\" !== column.type || \"group\" === options.rowType) {\r\n                    $cell.html(\"&nbsp;\").addClass(column.cssClass);\r\n                    return\r\n                } else {\r\n                    $cell.addClass(\"dx-hidden-cell\")\r\n                }\r\n            }\r\n        }\r\n        if (column.command !== COMMAND_TRANSPARENT) {\r\n            that.callBase($cell, options)\r\n        }\r\n    },\r\n    _getCellElementsCore: function(rowIndex) {\r\n        var that = this;\r\n        var fixedColumn;\r\n        var fixedColumns;\r\n        var fixedColumnIndex;\r\n        var fixedCellElements;\r\n        var cellElements = that.callBase(rowIndex);\r\n        var isGroupRow = cellElements.parent().hasClass(GROUP_ROW_CLASS);\r\n        var index = \"columnHeadersView\" === that.name ? rowIndex : void 0;\r\n        if (that._fixedTableElement && cellElements) {\r\n            fixedColumns = that.getFixedColumns(index);\r\n            fixedCellElements = that._getRowElements(that._fixedTableElement).eq(rowIndex).children(\"td\");\r\n            (0, _iterator.each)(fixedCellElements, function(columnIndex, cell) {\r\n                if (isGroupRow) {\r\n                    if (cellElements[columnIndex] && \"hidden\" !== cell.style.visibility) {\r\n                        cellElements[columnIndex] = cell\r\n                    }\r\n                } else {\r\n                    fixedColumn = fixedColumns[columnIndex];\r\n                    if (fixedColumn) {\r\n                        if (fixedColumn.command === COMMAND_TRANSPARENT) {\r\n                            if (fixedCellElements.eq(columnIndex).hasClass(MASTER_DETAIL_CELL_CLASS)) {\r\n                                cellElements[columnIndex] = cell || cellElements[columnIndex]\r\n                            }\r\n                        } else {\r\n                            fixedColumnIndex = that._columnsController.getVisibleIndex(fixedColumn.index, index);\r\n                            cellElements[fixedColumnIndex] = cell || cellElements[fixedColumnIndex]\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        return cellElements\r\n    },\r\n    getColumnWidths: function() {\r\n        var that = this;\r\n        var fixedWidths;\r\n        var result = that.callBase();\r\n        var fixedColumns = that.getFixedColumns();\r\n        if (that._fixedTableElement && result.length) {\r\n            fixedWidths = that.callBase(that._fixedTableElement)\r\n        }\r\n        return normalizeColumnWidths(fixedColumns, result, fixedWidths)\r\n    },\r\n    _getTableElement: function() {\r\n        var tableElement = this._isFixedTableRendering ? this._fixedTableElement : this.callBase();\r\n        return tableElement\r\n    },\r\n    _setTableElement: function(tableElement) {\r\n        if (this._isFixedTableRendering) {\r\n            this._fixedTableElement = tableElement.addClass(POINTER_EVENTS_NONE_CLASS)\r\n        } else {\r\n            this.callBase(tableElement)\r\n        }\r\n    },\r\n    getColumns: function(rowIndex, $tableElement) {\r\n        $tableElement = $tableElement || this._getTableElement();\r\n        if (this._isFixedTableRendering || $tableElement && $tableElement.closest(\"table\").parent(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS)).length) {\r\n            return this.getFixedColumns(rowIndex)\r\n        }\r\n        return this.callBase(rowIndex, $tableElement)\r\n    },\r\n    getRowIndex: function($row) {\r\n        var $fixedTable = this._fixedTableElement;\r\n        if ($fixedTable && $fixedTable.find($row).length) {\r\n            return this._getRowElements($fixedTable).index($row)\r\n        }\r\n        return this.callBase($row)\r\n    },\r\n    getTableElements: function() {\r\n        var result = this.callBase.apply(this, arguments);\r\n        if (this._fixedTableElement) {\r\n            result = (0, _renderer2.default)([result.get(0), this._fixedTableElement.get(0)])\r\n        }\r\n        return result\r\n    },\r\n    getFixedColumns: function(rowIndex) {\r\n        return this._columnsController.getFixedColumns(rowIndex)\r\n    },\r\n    getFixedColumnsOffset: function() {\r\n        var offset = {\r\n            left: 0,\r\n            right: 0\r\n        };\r\n        var $transparentColumn;\r\n        var positionTransparentColumn;\r\n        if (this._fixedTableElement) {\r\n            $transparentColumn = this.getTransparentColumnElement();\r\n            positionTransparentColumn = $transparentColumn.position();\r\n            offset = {\r\n                left: positionTransparentColumn.left,\r\n                right: this.element().outerWidth(true) - ($transparentColumn.outerWidth(true) + positionTransparentColumn.left)\r\n            }\r\n        }\r\n        return offset\r\n    },\r\n    getTransparentColumnElement: function() {\r\n        return this._fixedTableElement && this._fixedTableElement.find(\".\" + POINTER_EVENTS_NONE_CLASS).first()\r\n    },\r\n    getFixedTableElement: function() {\r\n        return this._fixedTableElement\r\n    },\r\n    isFixedColumns: function() {\r\n        return this._isFixedColumns\r\n    },\r\n    _resizeCore: function() {\r\n        this.callBase();\r\n        this.synchronizeRows()\r\n    },\r\n    setColumnWidths: function(options) {\r\n        var columns;\r\n        var visibleColumns = this._columnsController.getVisibleColumns();\r\n        var widths = options.widths;\r\n        var isWidthsSynchronized = widths && widths.length && (0, _type.isDefined)(visibleColumns[0].visibleWidth);\r\n        var optionNames = options.optionNames;\r\n        var isColumnWidthChanged = optionNames && optionNames.width;\r\n        var useVisibleColumns = false;\r\n        this.callBase.apply(this, arguments);\r\n        if (this._fixedTableElement) {\r\n            if (this.option(\"legacyRendering\")) {\r\n                useVisibleColumns = widths && widths.length && !this.isScrollbarVisible(true)\r\n            } else {\r\n                var hasAutoWidth = widths && widths.some(function(width) {\r\n                    return \"auto\" === width\r\n                });\r\n                useVisibleColumns = hasAutoWidth && (!isWidthsSynchronized || !this.isScrollbarVisible(true))\r\n            }\r\n            if (useVisibleColumns) {\r\n                columns = visibleColumns\r\n            }\r\n            this.callBase((0, _extend.extend)({}, options, {\r\n                $tableElement: this._fixedTableElement,\r\n                columns: columns,\r\n                fixed: true\r\n            }))\r\n        }\r\n        if (isWidthsSynchronized || isColumnWidthChanged && this.option(\"wordWrapEnabled\")) {\r\n            this.synchronizeRows()\r\n        }\r\n    },\r\n    _createColGroup: function(columns) {\r\n        if (!this.option(\"legacyRendering\") && this._isFixedTableRendering && !this.option(\"columnAutoWidth\")) {\r\n            var visibleColumns = this._columnsController.getVisibleColumns();\r\n            var useVisibleColumns = visibleColumns.filter(function(column) {\r\n                return !column.width\r\n            }).length;\r\n            if (useVisibleColumns) {\r\n                columns = visibleColumns\r\n            }\r\n        }\r\n        return this.callBase(columns)\r\n    },\r\n    _getClientHeight: function(element) {\r\n        var boundingClientRectElement = element.getBoundingClientRect && element.getBoundingClientRect();\r\n        return boundingClientRectElement && boundingClientRectElement.height ? boundingClientRectElement.height : element.clientHeight\r\n    },\r\n    synchronizeRows: function() {\r\n        var that = this;\r\n        var rowHeight;\r\n        var fixedRowHeight;\r\n        var rowHeights = [];\r\n        var fixedRowHeights = [];\r\n        var rowIndex;\r\n        var heightTable;\r\n        var heightFixedTable;\r\n        var $rowElements;\r\n        var $fixedRowElements;\r\n        var $contentElement;\r\n        if (that._isFixedColumns && that._tableElement && that._fixedTableElement) {\r\n            heightTable = that._getClientHeight(that._tableElement.get(0));\r\n            heightFixedTable = that._getClientHeight(that._fixedTableElement.get(0));\r\n            $rowElements = that._getRowElements(that._tableElement);\r\n            $fixedRowElements = that._getRowElements(that._fixedTableElement);\r\n            $contentElement = that._findContentElement();\r\n            if (heightTable !== heightFixedTable) {\r\n                $contentElement && $contentElement.css(\"height\", heightTable);\r\n                $rowElements.css(\"height\", \"\");\r\n                $fixedRowElements.css(\"height\", \"\");\r\n                for (rowIndex = 0; rowIndex < $rowElements.length; rowIndex++) {\r\n                    rowHeights.push(that._getClientHeight($rowElements.get(rowIndex)));\r\n                    fixedRowHeights.push(that._getClientHeight($fixedRowElements.get(rowIndex)))\r\n                }\r\n                for (rowIndex = 0; rowIndex < $rowElements.length; rowIndex++) {\r\n                    rowHeight = rowHeights[rowIndex];\r\n                    fixedRowHeight = fixedRowHeights[rowIndex];\r\n                    if (rowHeight > fixedRowHeight) {\r\n                        $fixedRowElements.eq(rowIndex).css(\"height\", rowHeight)\r\n                    } else {\r\n                        if (rowHeight < fixedRowHeight) {\r\n                            $rowElements.eq(rowIndex).css(\"height\", fixedRowHeight)\r\n                        }\r\n                    }\r\n                }\r\n                $contentElement && $contentElement.css(\"height\", \"\")\r\n            }\r\n        }\r\n    },\r\n    setScrollerSpacing: function(width) {\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        this.callBase(width);\r\n        this.element().children(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS)).css({\r\n            paddingLeft: rtlEnabled ? width : \"\",\r\n            paddingRight: !rtlEnabled ? width : \"\"\r\n        })\r\n    }\r\n};\r\nvar ColumnHeadersViewFixedColumnsExtender = (0, _extend.extend)({}, baseFixedColumns, {\r\n    _getRowVisibleColumns: function(rowIndex) {\r\n        if (this._isFixedTableRendering) {\r\n            return this.getFixedColumns(rowIndex)\r\n        }\r\n        return this.callBase(rowIndex)\r\n    },\r\n    getContextMenuItems: function(options) {\r\n        var that = this;\r\n        var column = options.column;\r\n        var onItemClick;\r\n        var columnFixingOptions = that.option(\"columnFixing\");\r\n        var items = that.callBase(options);\r\n        if (options.row && \"header\" === options.row.rowType) {\r\n            if (column && column.allowFixing) {\r\n                onItemClick = function(params) {\r\n                    switch (params.itemData.value) {\r\n                        case \"none\":\r\n                            that._columnsController.columnOption(column.index, \"fixed\", false);\r\n                            break;\r\n                        case \"left\":\r\n                            that._columnsController.columnOption(column.index, {\r\n                                fixed: true,\r\n                                fixedPosition: \"left\"\r\n                            });\r\n                            break;\r\n                        case \"right\":\r\n                            that._columnsController.columnOption(column.index, {\r\n                                fixed: true,\r\n                                fixedPosition: \"right\"\r\n                            })\r\n                    }\r\n                };\r\n                items = items || [];\r\n                items.push({\r\n                    text: columnFixingOptions.texts.fix,\r\n                    beginGroup: true,\r\n                    items: [{\r\n                        text: columnFixingOptions.texts.leftPosition,\r\n                        value: \"left\",\r\n                        disabled: column.fixed && (!column.fixedPosition || \"left\" === column.fixedPosition),\r\n                        onItemClick: onItemClick\r\n                    }, {\r\n                        text: columnFixingOptions.texts.rightPosition,\r\n                        value: \"right\",\r\n                        disabled: column.fixed && \"right\" === column.fixedPosition,\r\n                        onItemClick: onItemClick\r\n                    }]\r\n                }, {\r\n                    text: columnFixingOptions.texts.unfix,\r\n                    value: \"none\",\r\n                    disabled: !column.fixed,\r\n                    onItemClick: onItemClick\r\n                })\r\n            }\r\n        }\r\n        return items\r\n    },\r\n    getFixedColumnElements: function(rowIndex) {\r\n        var that = this;\r\n        var columnElements;\r\n        var transparentColumnIndex;\r\n        var $transparentColumnElement;\r\n        if ((0, _type.isDefined)(rowIndex)) {\r\n            return this._fixedTableElement && this._getRowElements(this._fixedTableElement).eq(rowIndex).children()\r\n        }\r\n        columnElements = that.getColumnElements();\r\n        $transparentColumnElement = that.getTransparentColumnElement();\r\n        if (columnElements && $transparentColumnElement && $transparentColumnElement.length) {\r\n            transparentColumnIndex = getTransparentColumnIndex(that.getFixedColumns());\r\n            columnElements.splice(transparentColumnIndex, $transparentColumnElement.get(0).colSpan, $transparentColumnElement.get(0))\r\n        }\r\n        return columnElements\r\n    },\r\n    getColumnWidths: function() {\r\n        var that = this;\r\n        var fixedWidths;\r\n        var result = that.callBase();\r\n        var $fixedColumnElements = that.getFixedColumnElements();\r\n        var fixedColumns = that.getFixedColumns();\r\n        if (that._fixedTableElement) {\r\n            if ($fixedColumnElements && $fixedColumnElements.length) {\r\n                fixedWidths = that._getWidths($fixedColumnElements)\r\n            } else {\r\n                fixedWidths = that.callBase(that._fixedTableElement)\r\n            }\r\n        }\r\n        return normalizeColumnWidths(fixedColumns, result, fixedWidths)\r\n    }\r\n});\r\nvar RowsViewFixedColumnsExtender = (0, _extend.extend)({}, baseFixedColumns, {\r\n    _detachHoverEvents: function() {\r\n        this._fixedTableElement && _events_engine2.default.off(this._fixedTableElement, \"mouseover mouseout\", \".dx-data-row\");\r\n        this._tableElement && _events_engine2.default.off(this._tableElement, \"mouseover mouseout\", \".dx-data-row\")\r\n    },\r\n    _attachHoverEvents: function() {\r\n        var that = this;\r\n        var attachHoverEvent = function($table) {\r\n            _events_engine2.default.on($table, \"mouseover mouseout\", \".dx-data-row\", that.createAction(function(args) {\r\n                var event = args.event;\r\n                var rowIndex = that.getRowIndex((0, _renderer2.default)(event.target).closest(\".dx-row\"));\r\n                var isHover = \"mouseover\" === event.type;\r\n                if (rowIndex >= 0) {\r\n                    that._tableElement && that._getRowElements(that._tableElement).eq(rowIndex).toggleClass(HOVER_STATE_CLASS, isHover);\r\n                    that._fixedTableElement && that._getRowElements(that._fixedTableElement).eq(rowIndex).toggleClass(HOVER_STATE_CLASS, isHover)\r\n                }\r\n            }))\r\n        };\r\n        if (that._fixedTableElement && that._tableElement) {\r\n            attachHoverEvent(that._fixedTableElement);\r\n            attachHoverEvent(that._tableElement)\r\n        }\r\n    },\r\n    _findContentElement: function() {\r\n        var that = this;\r\n        var $content;\r\n        var scrollable;\r\n        var scrollTop;\r\n        var contentClass = that.addWidgetPrefix(CONTENT_CLASS);\r\n        var element = that.element();\r\n        var scrollDelay = _browser2.default.mozilla ? 60 : 0;\r\n        if (element && that._isFixedTableRendering) {\r\n            $content = element.children(\".\" + contentClass);\r\n            scrollable = that.getScrollable();\r\n            if (!$content.length && scrollable) {\r\n                $content = (0, _renderer2.default)(\"<div>\").addClass(contentClass);\r\n                _events_engine2.default.on($content, \"scroll\", function(e) {\r\n                    clearTimeout(that._fixedScrollTimeout);\r\n                    that._fixedScrollTimeout = setTimeout(function() {\r\n                        scrollTop = (0, _renderer2.default)(e.target).scrollTop();\r\n                        scrollable.scrollTo({\r\n                            y: scrollTop\r\n                        })\r\n                    }, scrollDelay)\r\n                });\r\n                _events_engine2.default.on($content, _wheel2.default.name, function(e) {\r\n                    if (scrollable) {\r\n                        scrollTop = scrollable.scrollTop();\r\n                        scrollable.scrollTo({\r\n                            y: scrollTop - e.delta\r\n                        });\r\n                        if (scrollable.scrollTop() > 0 && scrollable.scrollTop() + scrollable.clientHeight() < scrollable.scrollHeight() + that.getScrollbarWidth()) {\r\n                            return false\r\n                        }\r\n                    }\r\n                });\r\n                $content.appendTo(element)\r\n            }\r\n            return $content\r\n        }\r\n        return that.callBase()\r\n    },\r\n    _updateScrollable: function() {\r\n        this.callBase();\r\n        var scrollable = this.getScrollable();\r\n        var scrollTop = scrollable && scrollable.scrollOffset().top;\r\n        this._updateFixedTablePosition(scrollTop)\r\n    },\r\n    _renderContent: function(contentElement, tableElement) {\r\n        if (this._isFixedTableRendering) {\r\n            return contentElement.empty().addClass(this.addWidgetPrefix(CONTENT_CLASS) + \" \" + this.addWidgetPrefix(CONTENT_FIXED_CLASS) + \" \" + POINTER_EVENTS_TARGET_CLASS).append(tableElement)\r\n        }\r\n        return this.callBase(contentElement, tableElement)\r\n    },\r\n    _getGroupCellOptions: function(options) {\r\n        if (this._isFixedTableRendering) {\r\n            return this.callBase((0, _extend.extend)({}, options, {\r\n                columns: this._columnsController.getVisibleColumns()\r\n            }))\r\n        }\r\n        return this.callBase(options)\r\n    },\r\n    _renderGroupedCells: function($row, options) {\r\n        return this.callBase($row, (0, _extend.extend)({}, options, {\r\n            columns: this._columnsController.getVisibleColumns()\r\n        }))\r\n    },\r\n    _renderGroupSummaryCells: function($row, options) {\r\n        if (this._isFixedTableRendering) {\r\n            this.callBase($row, (0, _extend.extend)({}, options, {\r\n                columns: this._columnsController.getVisibleColumns()\r\n            }))\r\n        } else {\r\n            this.callBase($row, options)\r\n        }\r\n    },\r\n    _hasAlignByColumnSummaryItems: function(columnIndex, options) {\r\n        var result = this.callBase.apply(this, arguments);\r\n        var column = options.columns[columnIndex];\r\n        if (options.isFixed) {\r\n            return column.fixed && (result || \"right\" === column.fixedPosition)\r\n        }\r\n        return result && !column.fixed\r\n    },\r\n    _renderGroupSummaryCellsCore: function($groupCell, options, groupCellColSpan, alignByColumnCellCount) {\r\n        var startColumnIndex;\r\n        var transparentColumnIndex;\r\n        var alignByFixedColumnCellCount;\r\n        if (this._isFixedTableRendering) {\r\n            options.isFixed = true;\r\n            alignByFixedColumnCellCount = this._getAlignByColumnCellCount(groupCellColSpan, options);\r\n            options.isFixed = false;\r\n            startColumnIndex = options.columns.length - alignByFixedColumnCellCount;\r\n            options = (0, _extend.extend)({}, options, {\r\n                columns: this.getFixedColumns()\r\n            });\r\n            transparentColumnIndex = getTransparentColumnIndex(options.columns);\r\n            if (startColumnIndex < transparentColumnIndex) {\r\n                alignByFixedColumnCellCount -= options.columns[transparentColumnIndex].colspan - 1 || 0;\r\n                groupCellColSpan -= options.columns[transparentColumnIndex].colspan - 1 || 0\r\n            } else {\r\n                if (alignByColumnCellCount > 0) {\r\n                    $groupCell.css(\"visibility\", \"hidden\")\r\n                }\r\n            }\r\n            alignByColumnCellCount = alignByFixedColumnCellCount\r\n        }\r\n        this.callBase($groupCell, options, groupCellColSpan, alignByColumnCellCount)\r\n    },\r\n    _getSummaryCellIndex: function(columnIndex, columns) {\r\n        var transparentColumnIndex;\r\n        if (this._isFixedTableRendering) {\r\n            transparentColumnIndex = getTransparentColumnIndex(columns);\r\n            if (columnIndex > transparentColumnIndex) {\r\n                columnIndex += columns[transparentColumnIndex].colspan - 1\r\n            }\r\n            return columnIndex\r\n        }\r\n        return this.callBase.apply(this, arguments)\r\n    },\r\n    _renderCore: function(change) {\r\n        this._detachHoverEvents();\r\n        this.callBase(change);\r\n        var isFixedColumns = this._isFixedColumns;\r\n        this.element().toggleClass(FIXED_COLUMNS_CLASS, isFixedColumns);\r\n        if (this.option(\"hoverStateEnabled\") && isFixedColumns) {\r\n            this._attachHoverEvents()\r\n        }\r\n    },\r\n    setRowsOpacity: function(columnIndex, value) {\r\n        this.callBase(columnIndex, value);\r\n        var $rows = this._getRowElements(this._fixedTableElement);\r\n        this._setRowsOpacityCore($rows, this.getFixedColumns(), columnIndex, value)\r\n    },\r\n    optionChanged: function(args) {\r\n        var that = this;\r\n        that.callBase(args);\r\n        if (\"hoverStateEnabled\" === args.name && that._isFixedColumns) {\r\n            args.value ? this._attachHoverEvents() : this._detachHoverEvents()\r\n        }\r\n    },\r\n    getCellIndex: function($cell) {\r\n        var $fixedTable = this._fixedTableElement;\r\n        var columns;\r\n        var cellIndex = 0;\r\n        if ($fixedTable && $cell.is(\"td\") && $cell.closest($fixedTable).length) {\r\n            columns = this.getFixedColumns();\r\n            (0, _iterator.each)(columns, function(index, column) {\r\n                if (index === $cell[0].cellIndex) {\r\n                    return false\r\n                }\r\n                if (column.colspan) {\r\n                    cellIndex += column.colspan;\r\n                    return\r\n                }\r\n                cellIndex++\r\n            });\r\n            return cellIndex\r\n        }\r\n        return this.callBase.apply(this, arguments)\r\n    },\r\n    _updateFixedTablePosition: function(scrollTop, needFocus) {\r\n        if (this._fixedTableElement && this._tableElement) {\r\n            var $focusedElement;\r\n            var editorFactory = this.getController(\"editorFactory\");\r\n            this._fixedTableElement.parent().scrollTop(scrollTop);\r\n            if (needFocus) {\r\n                $focusedElement = editorFactory.focus();\r\n                $focusedElement && editorFactory.focus($focusedElement)\r\n            }\r\n        }\r\n    },\r\n    setScrollerSpacing: function(vWidth, hWidth) {\r\n        var that = this;\r\n        var useNativeScrolling;\r\n        var styles = {\r\n            marginBottom: 0\r\n        };\r\n        var $fixedContent = that.element().children(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS));\r\n        if ($fixedContent.length && that._fixedTableElement) {\r\n            $fixedContent.css(styles);\r\n            that._fixedTableElement.css(styles);\r\n            styles[that.option(\"rtlEnabled\") ? \"marginLeft\" : \"marginRight\"] = vWidth;\r\n            styles.marginBottom = hWidth;\r\n            useNativeScrolling = that._scrollable && that._scrollable.option(\"useNative\");\r\n            (useNativeScrolling ? $fixedContent : that._fixedTableElement).css(styles)\r\n        }\r\n    },\r\n    _getElasticScrollTop: function(e) {\r\n        var maxScrollTop;\r\n        var scrollableContent;\r\n        var scrollableContainer;\r\n        var elasticScrollTop = 0;\r\n        var scrollbarWidth = this.getScrollbarWidth(true);\r\n        if (e.scrollOffset.top < 0) {\r\n            elasticScrollTop = -e.scrollOffset.top\r\n        } else {\r\n            if (e.reachedBottom) {\r\n                scrollableContent = this._findContentElement();\r\n                scrollableContainer = e.component._container();\r\n                maxScrollTop = Math.max(scrollableContent.height() + scrollbarWidth - scrollableContainer.height(), 0);\r\n                elasticScrollTop = maxScrollTop - e.scrollOffset.top\r\n            }\r\n        }\r\n        return elasticScrollTop\r\n    },\r\n    _applyElasticScrolling: function(e) {\r\n        if (this._fixedTableElement) {\r\n            var elasticScrollTop = this._getElasticScrollTop(e);\r\n            if (0 !== Math.ceil(elasticScrollTop)) {\r\n                _translator2.default.move(this._fixedTableElement, {\r\n                    top: elasticScrollTop\r\n                })\r\n            } else {\r\n                this._fixedTableElement.css(\"transform\", \"\")\r\n            }\r\n        }\r\n    },\r\n    _handleScroll: function(e) {\r\n        this._updateFixedTablePosition(e.scrollOffset.top, true);\r\n        this._applyElasticScrolling(e);\r\n        this.callBase(e)\r\n    },\r\n    _updateContentPosition: function(isRender) {\r\n        this.callBase.apply(this, arguments);\r\n        if (!isRender) {\r\n            this._updateFixedTablePosition(this._scrollTop)\r\n        }\r\n    },\r\n    _afterRowPrepared: function(e) {\r\n        if (this._isFixedTableRendering) {\r\n            return\r\n        }\r\n        this.callBase(e)\r\n    },\r\n    _scrollToElement: function($element) {\r\n        this.callBase($element, this.getFixedColumnsOffset())\r\n    },\r\n    dispose: function() {\r\n        this.callBase.apply(this, arguments);\r\n        clearTimeout(this._fixedScrollTimeout)\r\n    }\r\n});\r\nvar FooterViewFixedColumnsExtender = baseFixedColumns;\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            columnFixing: {\r\n                enabled: false,\r\n                texts: {\r\n                    fix: _message2.default.format(\"dxDataGrid-columnFixingFix\"),\r\n                    unfix: _message2.default.format(\"dxDataGrid-columnFixingUnfix\"),\r\n                    leftPosition: _message2.default.format(\"dxDataGrid-columnFixingLeftPosition\"),\r\n                    rightPosition: _message2.default.format(\"dxDataGrid-columnFixingRightPosition\")\r\n                }\r\n            }\r\n        }\r\n    },\r\n    extenders: {\r\n        views: {\r\n            columnHeadersView: ColumnHeadersViewFixedColumnsExtender,\r\n            rowsView: RowsViewFixedColumnsExtender,\r\n            footerView: FooterViewFixedColumnsExtender\r\n        },\r\n        controllers: function() {\r\n            var normalizeColumnIndicesByPoints = function(columns, fixedColumns, pointsByColumns) {\r\n                var transparentColumnIndex = getTransparentColumnIndex(fixedColumns);\r\n                var correctIndex = columns.length - fixedColumns.length;\r\n                (0, _iterator.each)(pointsByColumns, function(_, point) {\r\n                    if (point.index > transparentColumnIndex) {\r\n                        point.columnIndex += correctIndex;\r\n                        point.index += correctIndex\r\n                    }\r\n                });\r\n                return pointsByColumns\r\n            };\r\n            return {\r\n                draggingHeader: {\r\n                    _generatePointsByColumns: function(options) {\r\n                        var pointsByColumns;\r\n                        var visibleColumns = options.columns;\r\n                        var targetDraggingPanel = options.targetDraggingPanel;\r\n                        if (targetDraggingPanel && \"headers\" === targetDraggingPanel.getName() && targetDraggingPanel.isFixedColumns()) {\r\n                            if (options.sourceColumn.fixed) {\r\n                                if (!options.rowIndex) {\r\n                                    options.columnElements = targetDraggingPanel.getFixedColumnElements(0)\r\n                                }\r\n                                options.columns = targetDraggingPanel.getFixedColumns(options.rowIndex);\r\n                                pointsByColumns = this.callBase(options);\r\n                                normalizeColumnIndicesByPoints(visibleColumns, options.columns, pointsByColumns);\r\n                                return pointsByColumns\r\n                            }\r\n                        }\r\n                        return this.callBase(options)\r\n                    },\r\n                    _pointCreated: function(point, columns, location, sourceColumn) {\r\n                        var result = this.callBase.apply(this, arguments);\r\n                        var $transparentColumn = this._columnHeadersView.getTransparentColumnElement();\r\n                        var boundingRect;\r\n                        if (!result && \"headers\" === location && $transparentColumn && $transparentColumn.length) {\r\n                            boundingRect = $transparentColumn.get(0).getBoundingClientRect();\r\n                            if (sourceColumn && sourceColumn.fixed) {\r\n                                return \"right\" === sourceColumn.fixedPosition ? point.x < boundingRect.right : point.x > boundingRect.left\r\n                            } else {\r\n                                return point.x < boundingRect.left || point.x > boundingRect.right\r\n                            }\r\n                        }\r\n                        return result\r\n                    }\r\n                },\r\n                columnsResizer: {\r\n                    _generatePointsByColumns: function() {\r\n                        var that = this;\r\n                        var columnsController = that._columnsController;\r\n                        var columns = columnsController && that._columnsController.getVisibleColumns();\r\n                        var fixedColumns = columnsController && that._columnsController.getFixedColumns();\r\n                        var cells = that._columnHeadersView.getFixedColumnElements();\r\n                        var pointsByFixedColumns = [];\r\n                        that.callBase();\r\n                        if (cells && cells.length > 0) {\r\n                            pointsByFixedColumns = _uiGrid_core2.default.getPointsByColumns(cells, function(point) {\r\n                                return that._pointCreated(point, cells.length, fixedColumns)\r\n                            });\r\n                            that._pointsByFixedColumns = normalizeColumnIndicesByPoints(columns, fixedColumns, pointsByFixedColumns)\r\n                        }\r\n                    },\r\n                    _pointCreated: function(point, cellsLength, columns) {\r\n                        var currentColumn;\r\n                        var nextColumn;\r\n                        var isWidgetResizingMode = \"widget\" === this.option(\"columnResizingMode\");\r\n                        if (point.index > 0 && point.index < cellsLength) {\r\n                            currentColumn = columns[point.columnIndex - 1] || {};\r\n                            nextColumn = columns[point.columnIndex] || {};\r\n                            if (currentColumn.fixed || nextColumn.fixed) {\r\n                                point.columnIndex -= 1;\r\n                                return !((currentColumn.allowResizing || currentColumn.command === COMMAND_TRANSPARENT) && (isWidgetResizingMode || nextColumn.allowResizing || nextColumn.command === COMMAND_TRANSPARENT))\r\n                            }\r\n                        }\r\n                        return this.callBase.apply(this, arguments)\r\n                    },\r\n                    _getTargetPoint: function(pointsByColumns, currentX, deltaX) {\r\n                        var $transparentColumn = this._columnHeadersView.getTransparentColumnElement();\r\n                        var boundingRect;\r\n                        if ($transparentColumn && $transparentColumn.length) {\r\n                            boundingRect = $transparentColumn.get(0).getBoundingClientRect();\r\n                            if (currentX <= boundingRect.left || currentX >= boundingRect.right) {\r\n                                return this.callBase(this._pointsByFixedColumns, currentX, deltaX)\r\n                            }\r\n                        }\r\n                        return this.callBase(pointsByColumns, currentX, deltaX)\r\n                    }\r\n                }\r\n            }\r\n        }()\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}