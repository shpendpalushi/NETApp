{"ast":null,"code":"/**\r\n * DevExtreme (viz/core/tooltip.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _inflector = require(\"../../core/utils/inflector\");\n\nvar _inflector2 = _interopRequireDefault(_inflector);\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _renderer3 = require(\"./renderers/renderer\");\n\nvar _renderer4 = _interopRequireDefault(_renderer3);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _utils = require(\"./utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _format_helper = require(\"../../format_helper\");\n\nvar _plaque = require(\"./plaque\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar mathCeil = Math.ceil;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\n\nvar window = _window2.default.getWindow();\n\nvar DEFAULT_HTML_GROUP_WIDTH = 3e3;\n\nfunction hideElement($element) {\n  $element.css({\n    left: \"-9999px\"\n  }).detach();\n}\n\nfunction getSpecialFormatOptions(options, specialFormat) {\n  var result = options;\n\n  switch (specialFormat) {\n    case \"argument\":\n      result = {\n        format: options.argumentFormat\n      };\n      break;\n\n    case \"percent\":\n      result = {\n        format: {\n          type: \"percent\",\n          precision: options.format && options.format.percentPrecision\n        }\n      };\n  }\n\n  return result;\n}\n\nfunction Tooltip(params) {\n  var that = this;\n  var renderer;\n  var root;\n  that._eventTrigger = params.eventTrigger;\n  that._widgetRoot = params.widgetRoot;\n  that._widget = params.widget;\n  that._wrapper = (0, _renderer2.default)(\"<div>\").css({\n    position: \"absolute\",\n    overflow: \"hidden\",\n    pointerEvents: \"none\"\n  }).addClass(params.cssClass);\n  that._renderer = renderer = new _renderer4.default.Renderer({\n    pathModified: params.pathModified,\n    container: that._wrapper[0]\n  });\n  root = renderer.root;\n  root.attr({\n    \"pointer-events\": \"none\"\n  });\n  that._text = renderer.text(void 0, 0, 0);\n  that._textGroupHtml = (0, _renderer2.default)(\"<div>\").css({\n    position: \"absolute\",\n    padding: 0,\n    margin: 0,\n    border: \"0px solid transparent\"\n  }).appendTo(that._wrapper);\n  that._textHtml = (0, _renderer2.default)(\"<div>\").css({\n    position: \"relative\",\n    display: \"inline-block\",\n    padding: 0,\n    margin: 0,\n    border: \"0px solid transparent\"\n  }).appendTo(that._textGroupHtml);\n}\n\nTooltip.prototype = {\n  constructor: Tooltip,\n  dispose: function dispose() {\n    this._wrapper.remove();\n\n    this._renderer.dispose();\n\n    this._options = this._widgetRoot = null;\n  },\n  _getContainer: function _getContainer() {\n    var options = this._options;\n    var container = (0, _renderer2.default)(this._widgetRoot).closest(options.container);\n\n    if (0 === container.length) {\n      container = (0, _renderer2.default)(options.container);\n    }\n\n    return (container.length ? container : (0, _renderer2.default)(\"body\")).get(0);\n  },\n  setTemplate: function setTemplate(contentTemplate) {\n    var that = this;\n    that._template = contentTemplate ? that._widget._getTemplate(contentTemplate) : null;\n  },\n  setOptions: function setOptions(options) {\n    var _this = this;\n\n    options = options || {};\n    var that = this;\n    that._options = options;\n    that._textFontStyles = _utils2.default.patchFontOptions(options.font);\n    that._textFontStyles.color = options.font.color;\n\n    that._wrapper.css({\n      zIndex: options.zIndex\n    });\n\n    that._customizeTooltip = options.customizeTooltip;\n    var textGroupHtml = that._textGroupHtml;\n    var textHtml = that._textHtml;\n\n    if (this.plaque) {\n      this.plaque.clear();\n    }\n\n    this.setTemplate(options.contentTemplate);\n\n    var drawTooltip = function drawTooltip(tooltip, group) {\n      var state = tooltip._state;\n      var template = tooltip._template;\n      var useTemplate = template && !state.formatObject.skipTemplate;\n\n      if (state.html || useTemplate) {\n        if (!state.isRendered) {\n          if (useTemplate) {\n            template.render({\n              model: state.formatObject,\n              container: textHtml\n            });\n            state.html = textHtml.html();\n\n            if (!state.html) {\n              _this.plaque.clear();\n\n              return;\n            }\n          } else {\n            that._text.attr({\n              text: \"\"\n            });\n\n            textHtml.html(state.html);\n          }\n\n          textGroupHtml.css({\n            color: state.textColor,\n            width: DEFAULT_HTML_GROUP_WIDTH\n          });\n          state.isRendered = true;\n        }\n      } else {\n        that._text.css({\n          fill: state.textColor\n        }).attr({\n          text: state.text,\n          \"class\": options.cssClass\n        }).append(group.attr({\n          align: options.textAlignment\n        }));\n      }\n\n      tooltip.plaque.customizeCloud({\n        fill: state.color,\n        stroke: state.borderColor\n      });\n    };\n\n    this.plaque = new _plaque.Plaque({\n      opacity: that._options.opacity,\n      color: that._options.color,\n      border: that._options.border,\n      paddingLeftRight: that._options.paddingLeftRight,\n      paddingTopBottom: that._options.paddingTopBottom,\n      arrowLength: that._options.arrowLength,\n      arrowWidth: 20,\n      shadow: that._options.shadow,\n      cornerRadius: that._options.cornerRadius\n    }, that, that._renderer.root, drawTooltip, true, function (tooltip, g) {\n      var state = tooltip._state;\n\n      if (state.html) {\n        var bBox;\n        var getComputedStyle = window.getComputedStyle;\n\n        if (getComputedStyle) {\n          bBox = getComputedStyle(textHtml.get(0));\n          bBox = {\n            x: 0,\n            y: 0,\n            width: mathCeil(parseFloat(bBox.width)),\n            height: mathCeil(parseFloat(bBox.height))\n          };\n        } else {\n          bBox = textHtml.get(0).getBoundingClientRect();\n          bBox = {\n            x: 0,\n            y: 0,\n            width: mathCeil(bBox.width ? bBox.width : bBox.right - bBox.left),\n            height: mathCeil(bBox.height ? bBox.height : bBox.bottom - bBox.top)\n          };\n        }\n\n        return bBox;\n      }\n\n      return g.getBBox();\n    }, function (tooltip, g, x, y) {\n      var state = tooltip._state;\n\n      if (state.html) {\n        that._textGroupHtml.css({\n          left: x,\n          top: y\n        });\n      } else {\n        g.move(x, y);\n      }\n    });\n    return that;\n  },\n  setRendererOptions: function setRendererOptions(options) {\n    this._renderer.setOptions(options);\n\n    this._textGroupHtml.css({\n      direction: options.rtl ? \"rtl\" : \"ltr\"\n    });\n\n    return this;\n  },\n  render: function render() {\n    var that = this;\n    hideElement(that._wrapper);\n    var normalizedCSS = {};\n\n    for (var name in that._textFontStyles) {\n      normalizedCSS[_inflector2.default.camelize(name)] = that._textFontStyles[name];\n    }\n\n    that._textGroupHtml.css(normalizedCSS);\n\n    that._text.css(that._textFontStyles);\n\n    that._eventData = null;\n    return that;\n  },\n  update: function update(options) {\n    return this.setOptions(options).render();\n  },\n  _prepare: function _prepare(formatObject, state) {\n    var customizeTooltip = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this._customizeTooltip;\n    var options = this._options;\n    var customize = {};\n\n    if (_type2.default.isFunction(customizeTooltip)) {\n      customize = customizeTooltip.call(formatObject, formatObject);\n      customize = _type2.default.isPlainObject(customize) ? customize : {};\n\n      if (\"text\" in customize) {\n        state.text = _type2.default.isDefined(customize.text) ? String(customize.text) : \"\";\n      }\n\n      if (\"html\" in customize) {\n        state.html = _type2.default.isDefined(customize.html) ? String(customize.html) : \"\";\n      }\n    }\n\n    if (!(\"text\" in state) && !(\"html\" in state)) {\n      state.text = formatObject.valueText || formatObject.description || \"\";\n    }\n\n    state.color = customize.color || options.color;\n    state.borderColor = customize.borderColor || (options.border || {}).color;\n    state.textColor = customize.fontColor || (options.font || {}).color;\n    return !!state.text || !!state.html || !!this._template;\n  },\n  show: function show(formatObject, params, eventData, customizeTooltip) {\n    var that = this;\n    var state = {\n      formatObject: formatObject\n    };\n\n    if (!that._prepare(formatObject, state, customizeTooltip)) {\n      return false;\n    }\n\n    that._state = state;\n\n    that._wrapper.appendTo(that._getContainer());\n\n    that._clear();\n\n    this.plaque.clear().draw((0, _extend.extend)({}, that._options, {\n      canvas: that._getCanvas()\n    }, state, {\n      x: params.x,\n      y: params.y,\n      offset: params.offset\n    }));\n    that.moveWrapper();\n    that._eventData && that._eventTrigger(\"tooltipHidden\", that._eventData);\n    that._eventData = eventData;\n\n    that._eventTrigger(\"tooltipShown\", that._eventData);\n\n    return true;\n  },\n  hide: function hide() {\n    var that = this;\n    hideElement(that._wrapper);\n\n    if (that._eventData) {\n      that._eventTrigger(\"tooltipHidden\", that._eventData);\n\n      that._clear();\n\n      that._eventData = null;\n    }\n  },\n  _clear: function _clear() {\n    this._textHtml.empty();\n  },\n  move: function move(x, y, offset) {\n    this.plaque.draw({\n      x: x,\n      y: y,\n      offset: offset,\n      canvas: this._getCanvas()\n    });\n    this.moveWrapper();\n  },\n  moveWrapper: function moveWrapper() {\n    var that = this;\n    var plaqueBBox = this.plaque.getBBox();\n\n    that._renderer.resize(plaqueBBox.width, plaqueBBox.height);\n\n    var offset = that._wrapper.css({\n      left: 0,\n      top: 0\n    }).offset();\n\n    var left = plaqueBBox.x;\n    var top = plaqueBBox.y;\n\n    that._wrapper.css({\n      left: left - offset.left,\n      top: top - offset.top\n    });\n\n    this.plaque.moveRoot(-left, -top);\n\n    if (this._state.html) {\n      that._textHtml.css({\n        left: -left,\n        top: -top\n      });\n\n      that._textGroupHtml.css({\n        width: plaqueBBox.width\n      });\n    }\n  },\n  formatValue: function formatValue(value, _specialFormat) {\n    var options = _specialFormat ? getSpecialFormatOptions(this._options, _specialFormat) : this._options;\n    return (0, _format_helper.format)(value, options.format);\n  },\n  getLocation: function getLocation() {\n    return _utils2.default.normalizeEnum(this._options.location);\n  },\n  isEnabled: function isEnabled() {\n    return !!this._options.enabled;\n  },\n  isShared: function isShared() {\n    return !!this._options.shared;\n  },\n  _getCanvas: function _getCanvas() {\n    var container = this._getContainer();\n\n    var containerBox = container.getBoundingClientRect();\n\n    var html = _dom_adapter2.default.getDocumentElement();\n\n    var document = _dom_adapter2.default.getDocument();\n\n    var left = window.pageXOffset || html.scrollLeft || 0;\n    var top = window.pageYOffset || html.scrollTop || 0;\n    var box = {\n      left: left,\n      top: top,\n      width: html.clientWidth + left || 0,\n      height: mathMax(document.body.scrollHeight, html.scrollHeight, document.body.offsetHeight, html.offsetHeight, document.body.clientHeight, html.clientHeight) || 0,\n      right: 0,\n      bottom: 0\n    };\n\n    if (container !== _dom_adapter2.default.getBody()) {\n      left = mathMax(box.left, box.left + containerBox.left);\n      top = mathMax(box.top, box.top + containerBox.top);\n      box.width = mathMin(containerBox.width, box.width) + left + box.left;\n      box.height = mathMin(containerBox.height, box.height) + top + box.top;\n      box.left = left;\n      box.top = top;\n    }\n\n    return box;\n  }\n};\nexports.Tooltip = Tooltip;\nexports.plugin = {\n  name: \"tooltip\",\n  init: function init() {\n    this._initTooltip();\n  },\n  dispose: function dispose() {\n    this._disposeTooltip();\n  },\n  members: {\n    _initTooltip: function _initTooltip() {\n      this._tooltip = new exports.Tooltip({\n        cssClass: this._rootClassPrefix + \"-tooltip\",\n        eventTrigger: this._eventTrigger,\n        pathModified: this.option(\"pathModified\"),\n        widgetRoot: this.element(),\n        widget: this\n      });\n    },\n    _disposeTooltip: function _disposeTooltip() {\n      this._tooltip.dispose();\n\n      this._tooltip = null;\n    },\n    _setTooltipRendererOptions: function _setTooltipRendererOptions() {\n      this._tooltip.setRendererOptions(this._getRendererOptions());\n    },\n    _setTooltipOptions: function _setTooltipOptions() {\n      this._tooltip.update(this._getOption(\"tooltip\"));\n    }\n  },\n  extenders: {\n    _stopCurrentHandling: function _stopCurrentHandling() {\n      this._tooltip && this._tooltip.hide();\n    }\n  },\n  customize: function customize(constructor) {\n    var proto = constructor.prototype;\n    proto._eventsMap.onTooltipShown = {\n      name: \"tooltipShown\"\n    };\n    proto._eventsMap.onTooltipHidden = {\n      name: \"tooltipHidden\"\n    };\n    constructor.addChange({\n      code: \"TOOLTIP_RENDERER\",\n      handler: function handler() {\n        this._setTooltipRendererOptions();\n      },\n      isThemeDependent: true,\n      isOptionChange: true\n    });\n    constructor.addChange({\n      code: \"TOOLTIP\",\n      handler: function handler() {\n        this._setTooltipOptions();\n      },\n      isThemeDependent: true,\n      isOptionChange: true,\n      option: \"tooltip\"\n    });\n  },\n  fontFields: [\"tooltip.font\"]\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/viz/core/tooltip.js"],"names":["_dom_adapter","require","_dom_adapter2","_interopRequireDefault","_window","_window2","_inflector","_inflector2","_renderer","_renderer2","_renderer3","_renderer4","_type","_type2","_extend","_utils","_utils2","_format_helper","_plaque","obj","__esModule","mathCeil","Math","ceil","mathMax","max","mathMin","min","window","default","getWindow","DEFAULT_HTML_GROUP_WIDTH","hideElement","$element","css","left","detach","getSpecialFormatOptions","options","specialFormat","result","format","argumentFormat","type","precision","percentPrecision","Tooltip","params","that","renderer","root","_eventTrigger","eventTrigger","_widgetRoot","widgetRoot","_widget","widget","_wrapper","position","overflow","pointerEvents","addClass","cssClass","Renderer","pathModified","container","attr","_text","text","_textGroupHtml","padding","margin","border","appendTo","_textHtml","display","prototype","constructor","dispose","remove","_options","_getContainer","closest","length","get","setTemplate","contentTemplate","_template","_getTemplate","setOptions","_this","_textFontStyles","patchFontOptions","font","color","zIndex","_customizeTooltip","customizeTooltip","textGroupHtml","textHtml","plaque","clear","drawTooltip","tooltip","group","state","_state","template","useTemplate","formatObject","skipTemplate","html","isRendered","render","model","textColor","width","fill","append","align","textAlignment","customizeCloud","stroke","borderColor","Plaque","opacity","paddingLeftRight","paddingTopBottom","arrowLength","arrowWidth","shadow","cornerRadius","g","bBox","getComputedStyle","x","y","parseFloat","height","getBoundingClientRect","right","bottom","top","getBBox","move","setRendererOptions","direction","rtl","normalizedCSS","name","camelize","_eventData","update","_prepare","arguments","customize","isFunction","call","isPlainObject","isDefined","String","valueText","description","fontColor","show","eventData","_clear","draw","extend","canvas","_getCanvas","offset","moveWrapper","hide","empty","plaqueBBox","resize","moveRoot","formatValue","value","_specialFormat","getLocation","normalizeEnum","location","isEnabled","enabled","isShared","shared","containerBox","getDocumentElement","document","getDocument","pageXOffset","scrollLeft","pageYOffset","scrollTop","box","clientWidth","body","scrollHeight","offsetHeight","clientHeight","getBody","exports","plugin","init","_initTooltip","_disposeTooltip","members","_tooltip","_rootClassPrefix","option","element","_setTooltipRendererOptions","_getRendererOptions","_setTooltipOptions","_getOption","extenders","_stopCurrentHandling","proto","_eventsMap","onTooltipShown","onTooltipHidden","addChange","code","handler","isThemeDependent","isOptionChange","fontFields"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/core/tooltip.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _window2 = _interopRequireDefault(_window);\r\nvar _inflector = require(\"../../core/utils/inflector\");\r\nvar _inflector2 = _interopRequireDefault(_inflector);\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _renderer3 = require(\"./renderers/renderer\");\r\nvar _renderer4 = _interopRequireDefault(_renderer3);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _utils = require(\"./utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _format_helper = require(\"../../format_helper\");\r\nvar _plaque = require(\"./plaque\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar mathCeil = Math.ceil;\r\nvar mathMax = Math.max;\r\nvar mathMin = Math.min;\r\nvar window = _window2.default.getWindow();\r\nvar DEFAULT_HTML_GROUP_WIDTH = 3e3;\r\n\r\nfunction hideElement($element) {\r\n    $element.css({\r\n        left: \"-9999px\"\r\n    }).detach()\r\n}\r\n\r\nfunction getSpecialFormatOptions(options, specialFormat) {\r\n    var result = options;\r\n    switch (specialFormat) {\r\n        case \"argument\":\r\n            result = {\r\n                format: options.argumentFormat\r\n            };\r\n            break;\r\n        case \"percent\":\r\n            result = {\r\n                format: {\r\n                    type: \"percent\",\r\n                    precision: options.format && options.format.percentPrecision\r\n                }\r\n            }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction Tooltip(params) {\r\n    var that = this;\r\n    var renderer;\r\n    var root;\r\n    that._eventTrigger = params.eventTrigger;\r\n    that._widgetRoot = params.widgetRoot;\r\n    that._widget = params.widget;\r\n    that._wrapper = (0, _renderer2.default)(\"<div>\").css({\r\n        position: \"absolute\",\r\n        overflow: \"hidden\",\r\n        pointerEvents: \"none\"\r\n    }).addClass(params.cssClass);\r\n    that._renderer = renderer = new _renderer4.default.Renderer({\r\n        pathModified: params.pathModified,\r\n        container: that._wrapper[0]\r\n    });\r\n    root = renderer.root;\r\n    root.attr({\r\n        \"pointer-events\": \"none\"\r\n    });\r\n    that._text = renderer.text(void 0, 0, 0);\r\n    that._textGroupHtml = (0, _renderer2.default)(\"<div>\").css({\r\n        position: \"absolute\",\r\n        padding: 0,\r\n        margin: 0,\r\n        border: \"0px solid transparent\"\r\n    }).appendTo(that._wrapper);\r\n    that._textHtml = (0, _renderer2.default)(\"<div>\").css({\r\n        position: \"relative\",\r\n        display: \"inline-block\",\r\n        padding: 0,\r\n        margin: 0,\r\n        border: \"0px solid transparent\"\r\n    }).appendTo(that._textGroupHtml)\r\n}\r\nTooltip.prototype = {\r\n    constructor: Tooltip,\r\n    dispose: function() {\r\n        this._wrapper.remove();\r\n        this._renderer.dispose();\r\n        this._options = this._widgetRoot = null\r\n    },\r\n    _getContainer: function() {\r\n        var options = this._options;\r\n        var container = (0, _renderer2.default)(this._widgetRoot).closest(options.container);\r\n        if (0 === container.length) {\r\n            container = (0, _renderer2.default)(options.container)\r\n        }\r\n        return (container.length ? container : (0, _renderer2.default)(\"body\")).get(0)\r\n    },\r\n    setTemplate: function(contentTemplate) {\r\n        var that = this;\r\n        that._template = contentTemplate ? that._widget._getTemplate(contentTemplate) : null\r\n    },\r\n    setOptions: function(options) {\r\n        var _this = this;\r\n        options = options || {};\r\n        var that = this;\r\n        that._options = options;\r\n        that._textFontStyles = _utils2.default.patchFontOptions(options.font);\r\n        that._textFontStyles.color = options.font.color;\r\n        that._wrapper.css({\r\n            zIndex: options.zIndex\r\n        });\r\n        that._customizeTooltip = options.customizeTooltip;\r\n        var textGroupHtml = that._textGroupHtml;\r\n        var textHtml = that._textHtml;\r\n        if (this.plaque) {\r\n            this.plaque.clear()\r\n        }\r\n        this.setTemplate(options.contentTemplate);\r\n        var drawTooltip = function(tooltip, group) {\r\n            var state = tooltip._state;\r\n            var template = tooltip._template;\r\n            var useTemplate = template && !state.formatObject.skipTemplate;\r\n            if (state.html || useTemplate) {\r\n                if (!state.isRendered) {\r\n                    if (useTemplate) {\r\n                        template.render({\r\n                            model: state.formatObject,\r\n                            container: textHtml\r\n                        });\r\n                        state.html = textHtml.html();\r\n                        if (!state.html) {\r\n                            _this.plaque.clear();\r\n                            return\r\n                        }\r\n                    } else {\r\n                        that._text.attr({\r\n                            text: \"\"\r\n                        });\r\n                        textHtml.html(state.html)\r\n                    }\r\n                    textGroupHtml.css({\r\n                        color: state.textColor,\r\n                        width: DEFAULT_HTML_GROUP_WIDTH\r\n                    });\r\n                    state.isRendered = true\r\n                }\r\n            } else {\r\n                that._text.css({\r\n                    fill: state.textColor\r\n                }).attr({\r\n                    text: state.text,\r\n                    \"class\": options.cssClass\r\n                }).append(group.attr({\r\n                    align: options.textAlignment\r\n                }))\r\n            }\r\n            tooltip.plaque.customizeCloud({\r\n                fill: state.color,\r\n                stroke: state.borderColor\r\n            })\r\n        };\r\n        this.plaque = new _plaque.Plaque({\r\n            opacity: that._options.opacity,\r\n            color: that._options.color,\r\n            border: that._options.border,\r\n            paddingLeftRight: that._options.paddingLeftRight,\r\n            paddingTopBottom: that._options.paddingTopBottom,\r\n            arrowLength: that._options.arrowLength,\r\n            arrowWidth: 20,\r\n            shadow: that._options.shadow,\r\n            cornerRadius: that._options.cornerRadius\r\n        }, that, that._renderer.root, drawTooltip, true, function(tooltip, g) {\r\n            var state = tooltip._state;\r\n            if (state.html) {\r\n                var bBox;\r\n                var getComputedStyle = window.getComputedStyle;\r\n                if (getComputedStyle) {\r\n                    bBox = getComputedStyle(textHtml.get(0));\r\n                    bBox = {\r\n                        x: 0,\r\n                        y: 0,\r\n                        width: mathCeil(parseFloat(bBox.width)),\r\n                        height: mathCeil(parseFloat(bBox.height))\r\n                    }\r\n                } else {\r\n                    bBox = textHtml.get(0).getBoundingClientRect();\r\n                    bBox = {\r\n                        x: 0,\r\n                        y: 0,\r\n                        width: mathCeil(bBox.width ? bBox.width : bBox.right - bBox.left),\r\n                        height: mathCeil(bBox.height ? bBox.height : bBox.bottom - bBox.top)\r\n                    }\r\n                }\r\n                return bBox\r\n            }\r\n            return g.getBBox()\r\n        }, function(tooltip, g, x, y) {\r\n            var state = tooltip._state;\r\n            if (state.html) {\r\n                that._textGroupHtml.css({\r\n                    left: x,\r\n                    top: y\r\n                })\r\n            } else {\r\n                g.move(x, y)\r\n            }\r\n        });\r\n        return that\r\n    },\r\n    setRendererOptions: function(options) {\r\n        this._renderer.setOptions(options);\r\n        this._textGroupHtml.css({\r\n            direction: options.rtl ? \"rtl\" : \"ltr\"\r\n        });\r\n        return this\r\n    },\r\n    render: function() {\r\n        var that = this;\r\n        hideElement(that._wrapper);\r\n        var normalizedCSS = {};\r\n        for (var name in that._textFontStyles) {\r\n            normalizedCSS[_inflector2.default.camelize(name)] = that._textFontStyles[name]\r\n        }\r\n        that._textGroupHtml.css(normalizedCSS);\r\n        that._text.css(that._textFontStyles);\r\n        that._eventData = null;\r\n        return that\r\n    },\r\n    update: function(options) {\r\n        return this.setOptions(options).render()\r\n    },\r\n    _prepare: function(formatObject, state) {\r\n        var customizeTooltip = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this._customizeTooltip;\r\n        var options = this._options;\r\n        var customize = {};\r\n        if (_type2.default.isFunction(customizeTooltip)) {\r\n            customize = customizeTooltip.call(formatObject, formatObject);\r\n            customize = _type2.default.isPlainObject(customize) ? customize : {};\r\n            if (\"text\" in customize) {\r\n                state.text = _type2.default.isDefined(customize.text) ? String(customize.text) : \"\"\r\n            }\r\n            if (\"html\" in customize) {\r\n                state.html = _type2.default.isDefined(customize.html) ? String(customize.html) : \"\"\r\n            }\r\n        }\r\n        if (!(\"text\" in state) && !(\"html\" in state)) {\r\n            state.text = formatObject.valueText || formatObject.description || \"\"\r\n        }\r\n        state.color = customize.color || options.color;\r\n        state.borderColor = customize.borderColor || (options.border || {}).color;\r\n        state.textColor = customize.fontColor || (options.font || {}).color;\r\n        return !!state.text || !!state.html || !!this._template\r\n    },\r\n    show: function(formatObject, params, eventData, customizeTooltip) {\r\n        var that = this;\r\n        var state = {\r\n            formatObject: formatObject\r\n        };\r\n        if (!that._prepare(formatObject, state, customizeTooltip)) {\r\n            return false\r\n        }\r\n        that._state = state;\r\n        that._wrapper.appendTo(that._getContainer());\r\n        that._clear();\r\n        this.plaque.clear().draw((0, _extend.extend)({}, that._options, {\r\n            canvas: that._getCanvas()\r\n        }, state, {\r\n            x: params.x,\r\n            y: params.y,\r\n            offset: params.offset\r\n        }));\r\n        that.moveWrapper();\r\n        that._eventData && that._eventTrigger(\"tooltipHidden\", that._eventData);\r\n        that._eventData = eventData;\r\n        that._eventTrigger(\"tooltipShown\", that._eventData);\r\n        return true\r\n    },\r\n    hide: function() {\r\n        var that = this;\r\n        hideElement(that._wrapper);\r\n        if (that._eventData) {\r\n            that._eventTrigger(\"tooltipHidden\", that._eventData);\r\n            that._clear();\r\n            that._eventData = null\r\n        }\r\n    },\r\n    _clear: function() {\r\n        this._textHtml.empty()\r\n    },\r\n    move: function(x, y, offset) {\r\n        this.plaque.draw({\r\n            x: x,\r\n            y: y,\r\n            offset: offset,\r\n            canvas: this._getCanvas()\r\n        });\r\n        this.moveWrapper()\r\n    },\r\n    moveWrapper: function() {\r\n        var that = this;\r\n        var plaqueBBox = this.plaque.getBBox();\r\n        that._renderer.resize(plaqueBBox.width, plaqueBBox.height);\r\n        var offset = that._wrapper.css({\r\n            left: 0,\r\n            top: 0\r\n        }).offset();\r\n        var left = plaqueBBox.x;\r\n        var top = plaqueBBox.y;\r\n        that._wrapper.css({\r\n            left: left - offset.left,\r\n            top: top - offset.top\r\n        });\r\n        this.plaque.moveRoot(-left, -top);\r\n        if (this._state.html) {\r\n            that._textHtml.css({\r\n                left: -left,\r\n                top: -top\r\n            });\r\n            that._textGroupHtml.css({\r\n                width: plaqueBBox.width\r\n            })\r\n        }\r\n    },\r\n    formatValue: function(value, _specialFormat) {\r\n        var options = _specialFormat ? getSpecialFormatOptions(this._options, _specialFormat) : this._options;\r\n        return (0, _format_helper.format)(value, options.format)\r\n    },\r\n    getLocation: function() {\r\n        return _utils2.default.normalizeEnum(this._options.location)\r\n    },\r\n    isEnabled: function() {\r\n        return !!this._options.enabled\r\n    },\r\n    isShared: function() {\r\n        return !!this._options.shared\r\n    },\r\n    _getCanvas: function() {\r\n        var container = this._getContainer();\r\n        var containerBox = container.getBoundingClientRect();\r\n        var html = _dom_adapter2.default.getDocumentElement();\r\n        var document = _dom_adapter2.default.getDocument();\r\n        var left = window.pageXOffset || html.scrollLeft || 0;\r\n        var top = window.pageYOffset || html.scrollTop || 0;\r\n        var box = {\r\n            left: left,\r\n            top: top,\r\n            width: html.clientWidth + left || 0,\r\n            height: mathMax(document.body.scrollHeight, html.scrollHeight, document.body.offsetHeight, html.offsetHeight, document.body.clientHeight, html.clientHeight) || 0,\r\n            right: 0,\r\n            bottom: 0\r\n        };\r\n        if (container !== _dom_adapter2.default.getBody()) {\r\n            left = mathMax(box.left, box.left + containerBox.left);\r\n            top = mathMax(box.top, box.top + containerBox.top);\r\n            box.width = mathMin(containerBox.width, box.width) + left + box.left;\r\n            box.height = mathMin(containerBox.height, box.height) + top + box.top;\r\n            box.left = left;\r\n            box.top = top\r\n        }\r\n        return box\r\n    }\r\n};\r\nexports.Tooltip = Tooltip;\r\nexports.plugin = {\r\n    name: \"tooltip\",\r\n    init: function() {\r\n        this._initTooltip()\r\n    },\r\n    dispose: function() {\r\n        this._disposeTooltip()\r\n    },\r\n    members: {\r\n        _initTooltip: function() {\r\n            this._tooltip = new exports.Tooltip({\r\n                cssClass: this._rootClassPrefix + \"-tooltip\",\r\n                eventTrigger: this._eventTrigger,\r\n                pathModified: this.option(\"pathModified\"),\r\n                widgetRoot: this.element(),\r\n                widget: this\r\n            })\r\n        },\r\n        _disposeTooltip: function() {\r\n            this._tooltip.dispose();\r\n            this._tooltip = null\r\n        },\r\n        _setTooltipRendererOptions: function() {\r\n            this._tooltip.setRendererOptions(this._getRendererOptions())\r\n        },\r\n        _setTooltipOptions: function() {\r\n            this._tooltip.update(this._getOption(\"tooltip\"))\r\n        }\r\n    },\r\n    extenders: {\r\n        _stopCurrentHandling: function() {\r\n            this._tooltip && this._tooltip.hide()\r\n        }\r\n    },\r\n    customize: function(constructor) {\r\n        var proto = constructor.prototype;\r\n        proto._eventsMap.onTooltipShown = {\r\n            name: \"tooltipShown\"\r\n        };\r\n        proto._eventsMap.onTooltipHidden = {\r\n            name: \"tooltipHidden\"\r\n        };\r\n        constructor.addChange({\r\n            code: \"TOOLTIP_RENDERER\",\r\n            handler: function() {\r\n                this._setTooltipRendererOptions()\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true\r\n        });\r\n        constructor.addChange({\r\n            code: \"TOOLTIP\",\r\n            handler: function() {\r\n                this._setTooltipOptions()\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true,\r\n            option: \"tooltip\"\r\n        })\r\n    },\r\n    fontFields: [\"tooltip.font\"]\r\n};\r\n"]},"metadata":{},"sourceType":"script"}