{"ast":null,"code":"/**\r\n * DevExtreme (ui/form/ui.form.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _guid = require(\"../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _string = require(\"../../core/utils/string\");\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _ui = require(\"../widget/ui.widget\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _editor = require(\"../editor/editor\");\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _validation_engine = require(\"../validation_engine\");\n\nvar _validation_engine2 = _interopRequireDefault(_validation_engine);\n\nvar _uiForm = require(\"./ui.form.layout_manager\");\n\nvar _uiForm2 = _interopRequireDefault(_uiForm);\n\nvar _uiForm3 = require(\"./ui.form.items_runtime_info\");\n\nvar _uiForm4 = _interopRequireDefault(_uiForm3);\n\nvar _tab_panel = require(\"../tab_panel\");\n\nvar _tab_panel2 = _interopRequireDefault(_tab_panel);\n\nvar _ui3 = require(\"../scroll_view/ui.scrollable\");\n\nvar _ui4 = _interopRequireDefault(_ui3);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _uiForm5 = require(\"./ui.form.item_options_actions\");\n\nvar _uiForm6 = _interopRequireDefault(_uiForm5);\n\nvar _uiForm7 = require(\"./ui.form.utils\");\n\nrequire(\"../validation_summary\");\n\nrequire(\"../validation_group\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || \"[object Arguments]\" === Object.prototype.toString.call(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar FORM_CLASS = \"dx-form\";\nvar FIELD_ITEM_CLASS = \"dx-field-item\";\nvar FIELD_ITEM_LABEL_TEXT_CLASS = \"dx-field-item-label-text\";\nvar FORM_GROUP_CLASS = \"dx-form-group\";\nvar FORM_GROUP_CONTENT_CLASS = \"dx-form-group-content\";\nvar FORM_GROUP_WITH_CAPTION_CLASS = \"dx-form-group-with-caption\";\nvar FORM_GROUP_CAPTION_CLASS = \"dx-form-group-caption\";\nvar HIDDEN_LABEL_CLASS = \"dx-layout-manager-hidden-label\";\nvar FIELD_ITEM_LABEL_CLASS = \"dx-field-item-label\";\nvar FIELD_ITEM_LABEL_CONTENT_CLASS = \"dx-field-item-label-content\";\nvar FIELD_ITEM_TAB_CLASS = \"dx-field-item-tab\";\nvar FORM_FIELD_ITEM_COL_CLASS = \"dx-col-\";\nvar GROUP_COL_COUNT_CLASS = \"dx-group-colcount-\";\nvar FIELD_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\nvar FORM_VALIDATION_SUMMARY = \"dx-form-validation-summary\";\nvar WIDGET_CLASS = \"dx-widget\";\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\nvar ITEM_OPTIONS_FOR_VALIDATION_UPDATING = [\"items\", \"isRequired\", \"validationRules\", \"visible\"];\n\nvar Form = _ui2.default.inherit({\n  _init: function _init() {\n    this.callBase();\n    this._cachedColCountOptions = [];\n    this._itemsRunTimeInfo = new _uiForm4.default();\n    this._groupsColCount = [];\n\n    this._attachSyncSubscriptions();\n  },\n  _initOptions: function _initOptions(options) {\n    if (!(\"screenByWidth\" in options)) {\n      options.screenByWidth = _window.defaultScreenFactorFunc;\n    }\n\n    this.callBase(options);\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      formID: \"dx-\" + new _guid2.default(),\n      formData: {},\n      colCount: 1,\n      screenByWidth: null,\n      colCountByScreen: void 0,\n      labelLocation: \"left\",\n      readOnly: false,\n      onFieldDataChanged: null,\n      customizeItem: null,\n      onEditorEnterKey: null,\n      minColWidth: 200,\n      alignItemLabels: true,\n      alignItemLabelsInAllGroups: true,\n      showColonAfterLabel: true,\n      showRequiredMark: true,\n      showOptionalMark: false,\n      requiredMark: \"*\",\n      optionalMark: _message2.default.format(\"dxForm-optionalMark\"),\n      requiredMessage: _message2.default.getFormatter(\"dxForm-requiredMessage\"),\n      showValidationSummary: false,\n      items: void 0,\n      scrollingEnabled: false,\n      validationGroup: void 0,\n      stylingMode: void 0\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return _themes2.default.isMaterial();\n      },\n      options: {\n        showColonAfterLabel: false,\n        labelLocation: \"top\"\n      }\n    }]);\n  },\n  _setOptionsByReference: function _setOptionsByReference() {\n    this.callBase();\n    (0, _extend.extend)(this._optionsByReference, {\n      formData: true,\n      validationGroup: true\n    });\n  },\n  _getColCount: function _getColCount($element) {\n    var index = 0;\n    var isColsExist = true;\n    var $cols;\n\n    while (isColsExist) {\n      $cols = $element.find(\".\" + FORM_FIELD_ITEM_COL_CLASS + index);\n\n      if (!$cols.length) {\n        isColsExist = false;\n      } else {\n        index++;\n      }\n    }\n\n    return index;\n  },\n  _createHiddenElement: function _createHiddenElement(rootLayoutManager) {\n    this._$hiddenElement = (0, _renderer2.default)(\"<div>\").addClass(WIDGET_CLASS).addClass(HIDDEN_LABEL_CLASS).appendTo(\"body\");\n\n    var $hiddenLabel = rootLayoutManager._renderLabel({\n      text: \" \",\n      location: this._labelLocation()\n    }).appendTo(this._$hiddenElement);\n\n    this._hiddenLabelText = $hiddenLabel.find(\".\" + FIELD_ITEM_LABEL_TEXT_CLASS)[0];\n  },\n  _removeHiddenElement: function _removeHiddenElement() {\n    this._$hiddenElement.remove();\n\n    this._hiddenLabelText = null;\n  },\n  _getLabelWidthByText: function _getLabelWidthByText(text) {\n    this._hiddenLabelText.innerHTML = text;\n    return this._hiddenLabelText.offsetWidth;\n  },\n  _getLabelsSelectorByCol: function _getLabelsSelectorByCol(index, options) {\n    options = options || {};\n    var fieldItemClass = options.inOneColumn ? FIELD_ITEM_CLASS : FORM_FIELD_ITEM_COL_CLASS + index;\n    var cssExcludeTabbedSelector = options.excludeTabbed ? \":not(.\" + FIELD_ITEM_TAB_CLASS + \")\" : \"\";\n    var childLabelContentSelector = \"> .\" + FIELD_ITEM_LABEL_CLASS + \" > .\" + FIELD_ITEM_LABEL_CONTENT_CLASS;\n    return \".\" + fieldItemClass + cssExcludeTabbedSelector + childLabelContentSelector;\n  },\n  _getLabelText: function _getLabelText(labelText) {\n    var length = labelText.children.length;\n    var child;\n    var result = \"\";\n    var i;\n\n    for (i = 0; i < length; i++) {\n      child = labelText.children[i];\n      result += !(0, _string.isEmpty)(child.innerText) ? child.innerText : child.innerHTML;\n    }\n\n    return result;\n  },\n  _applyLabelsWidthByCol: function _applyLabelsWidthByCol($container, index, options) {\n    var $labelTexts = $container.find(this._getLabelsSelectorByCol(index, options));\n    var $labelTextsLength = $labelTexts.length;\n    var labelWidth;\n    var i;\n    var maxWidth = 0;\n\n    for (i = 0; i < $labelTextsLength; i++) {\n      labelWidth = this._getLabelWidthByText(this._getLabelText($labelTexts[i]));\n\n      if (labelWidth > maxWidth) {\n        maxWidth = labelWidth;\n      }\n    }\n\n    for (i = 0; i < $labelTextsLength; i++) {\n      $labelTexts[i].style.width = maxWidth + \"px\";\n    }\n  },\n  _applyLabelsWidth: function _applyLabelsWidth($container, excludeTabbed, inOneColumn, colCount) {\n    colCount = inOneColumn ? 1 : colCount || this._getColCount($container);\n    var applyLabelsOptions = {\n      excludeTabbed: excludeTabbed,\n      inOneColumn: inOneColumn\n    };\n    var i;\n\n    for (i = 0; i < colCount; i++) {\n      this._applyLabelsWidthByCol($container, i, applyLabelsOptions);\n    }\n  },\n  _getGroupElementsInColumn: function _getGroupElementsInColumn($container, columnIndex, colCount) {\n    var cssColCountSelector = (0, _type.isDefined)(colCount) ? \".\" + GROUP_COL_COUNT_CLASS + colCount : \"\";\n    var groupSelector = \".\" + FORM_FIELD_ITEM_COL_CLASS + columnIndex + \" > .\" + FIELD_ITEM_CONTENT_CLASS + \" > .\" + FORM_GROUP_CLASS + cssColCountSelector;\n    return $container.find(groupSelector);\n  },\n  _applyLabelsWidthWithGroups: function _applyLabelsWidthWithGroups($container, colCount, excludeTabbed) {\n    var alignItemLabelsInAllGroups = this.option(\"alignItemLabelsInAllGroups\");\n\n    if (alignItemLabelsInAllGroups) {\n      this._applyLabelsWidthWithNestedGroups($container, colCount, excludeTabbed);\n    } else {\n      var $groups = this.$element().find(\".\" + FORM_GROUP_CLASS);\n      var i;\n\n      for (i = 0; i < $groups.length; i++) {\n        this._applyLabelsWidth($groups.eq(i), excludeTabbed);\n      }\n    }\n  },\n  _applyLabelsWidthWithNestedGroups: function _applyLabelsWidthWithNestedGroups($container, colCount, excludeTabbed) {\n    var applyLabelsOptions = {\n      excludeTabbed: excludeTabbed\n    };\n    var colIndex;\n    var groupsColIndex;\n    var groupColIndex;\n    var $groupsByCol;\n\n    for (colIndex = 0; colIndex < colCount; colIndex++) {\n      $groupsByCol = this._getGroupElementsInColumn($container, colIndex);\n\n      this._applyLabelsWidthByCol($groupsByCol, 0, applyLabelsOptions);\n\n      for (groupsColIndex = 0; groupsColIndex < this._groupsColCount.length; groupsColIndex++) {\n        $groupsByCol = this._getGroupElementsInColumn($container, colIndex, this._groupsColCount[groupsColIndex]);\n\n        var groupColCount = this._getColCount($groupsByCol);\n\n        for (groupColIndex = 1; groupColIndex < groupColCount; groupColIndex++) {\n          this._applyLabelsWidthByCol($groupsByCol, groupColIndex, applyLabelsOptions);\n        }\n      }\n    }\n  },\n  _labelLocation: function _labelLocation() {\n    return this.option(\"labelLocation\");\n  },\n  _alignLabelsInColumn: function _alignLabelsInColumn(_ref) {\n    var layoutManager = _ref.layoutManager,\n        inOneColumn = _ref.inOneColumn,\n        $container = _ref.$container,\n        excludeTabbed = _ref.excludeTabbed,\n        items = _ref.items;\n\n    if (!(0, _window.hasWindow)() || \"top\" === this._labelLocation()) {\n      return;\n    }\n\n    this._createHiddenElement(layoutManager);\n\n    if (inOneColumn) {\n      this._applyLabelsWidth($container, excludeTabbed, true);\n    } else {\n      if (this._checkGrouping(items)) {\n        this._applyLabelsWidthWithGroups($container, layoutManager._getColCount(), excludeTabbed);\n      } else {\n        this._applyLabelsWidth($container, excludeTabbed, false, layoutManager._getColCount());\n      }\n    }\n\n    this._removeHiddenElement();\n  },\n  _prepareFormData: function _prepareFormData() {\n    if (!(0, _type.isDefined)(this.option(\"formData\"))) {\n      this.option(\"formData\", {});\n    }\n  },\n  _initMarkup: function _initMarkup() {\n    _validation_engine2.default.addGroup(this._getValidationGroup());\n\n    this._clearCachedInstances();\n\n    this._prepareFormData();\n\n    this.$element().addClass(FORM_CLASS);\n    this.callBase();\n    this.setAria(\"role\", \"form\", this.$element());\n\n    if (this.option(\"scrollingEnabled\")) {\n      this._renderScrollable();\n    }\n\n    this._renderLayout();\n\n    this._renderValidationSummary();\n\n    this._lastMarkupScreenFactor = this._targetScreenFactor || this._getCurrentScreenFactor();\n  },\n  _getCurrentScreenFactor: function _getCurrentScreenFactor() {\n    return (0, _window.hasWindow)() ? (0, _window.getCurrentScreenFactor)(this.option(\"screenByWidth\")) : \"lg\";\n  },\n  _clearCachedInstances: function _clearCachedInstances() {\n    this._itemsRunTimeInfo.clear();\n\n    this._cachedLayoutManagers = [];\n  },\n  _alignLabels: function _alignLabels(layoutManager, inOneColumn) {\n    this._alignLabelsInColumn({\n      $container: this.$element(),\n      layoutManager: layoutManager,\n      excludeTabbed: true,\n      items: this.option(\"items\"),\n      inOneColumn: inOneColumn\n    });\n  },\n  _clean: function _clean() {\n    this.callBase();\n    this._groupsColCount = [];\n    this._cachedColCountOptions = [];\n    this._lastMarkupScreenFactor = void 0;\n  },\n  _renderScrollable: function _renderScrollable() {\n    var useNativeScrolling = this.option(\"useNativeScrolling\");\n    this._scrollable = new _ui4.default(this.$element(), {\n      useNative: !!useNativeScrolling,\n      useSimulatedScrollbar: !useNativeScrolling,\n      useKeyboard: false,\n      direction: \"both\",\n      bounceEnabled: false\n    });\n  },\n  _getContent: function _getContent() {\n    return this.option(\"scrollingEnabled\") ? this._scrollable.$content() : this.$element();\n  },\n  _renderValidationSummary: function _renderValidationSummary() {\n    var $validationSummary = this.$element().find(\".\" + FORM_VALIDATION_SUMMARY);\n\n    if ($validationSummary.length > 0) {\n      $validationSummary.remove();\n    }\n\n    if (this.option(\"showValidationSummary\")) {\n      var _$validationSummary = (0, _renderer2.default)(\"<div>\").addClass(FORM_VALIDATION_SUMMARY).appendTo(this._getContent());\n\n      this._validationSummary = _$validationSummary.dxValidationSummary({\n        validationGroup: this._getValidationGroup()\n      }).dxValidationSummary(\"instance\");\n    }\n  },\n  _prepareItems: function _prepareItems(items, parentIsTabbedItem, currentPath, isTabs) {\n    if (items) {\n      var result = [];\n\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        var path = (0, _uiForm7.concatPaths)(currentPath, (0, _uiForm7.createItemPathByIndex)(i, isTabs));\n\n        var guid = this._itemsRunTimeInfo.add({\n          item: item,\n          itemIndex: i,\n          path: path\n        });\n\n        if ((0, _type.isString)(item)) {\n          item = {\n            dataField: item\n          };\n        }\n\n        if ((0, _type.isObject)(item)) {\n          var itemCopy = (0, _extend.extend)({}, item);\n          itemCopy.guid = guid;\n\n          this._tryPrepareGroupItem(itemCopy);\n\n          this._tryPrepareTabbedItem(itemCopy, path);\n\n          this._tryPrepareItemTemplate(itemCopy);\n\n          if (parentIsTabbedItem) {\n            itemCopy.cssItemClass = FIELD_ITEM_TAB_CLASS;\n          }\n\n          if (itemCopy.items) {\n            itemCopy.items = this._prepareItems(itemCopy.items, parentIsTabbedItem, path);\n          }\n\n          result.push(itemCopy);\n        } else {\n          result.push(item);\n        }\n      }\n\n      return result;\n    }\n  },\n  _tryPrepareGroupItem: function _tryPrepareGroupItem(item) {\n    if (\"group\" === item.itemType) {\n      item.alignItemLabels = (0, _common.ensureDefined)(item.alignItemLabels, true);\n\n      if (item.template) {\n        item.groupContentTemplate = this._getTemplate(item.template);\n      }\n\n      item.template = this._itemGroupTemplate.bind(this, item);\n    }\n  },\n  _tryPrepareTabbedItem: function _tryPrepareTabbedItem(item, path) {\n    if (\"tabbed\" === item.itemType) {\n      item.template = this._itemTabbedTemplate.bind(this, item);\n      item.tabs = this._prepareItems(item.tabs, true, path, true);\n    }\n  },\n  _tryPrepareItemTemplate: function _tryPrepareItemTemplate(item) {\n    if (item.template) {\n      item.template = this._getTemplate(item.template);\n    }\n  },\n  _checkGrouping: function _checkGrouping(items) {\n    if (items) {\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n\n        if (\"group\" === item.itemType) {\n          return true;\n        }\n      }\n    }\n  },\n  _renderLayout: function _renderLayout() {\n    var that = this;\n    var items = that.option(\"items\");\n\n    var $content = that._getContent();\n\n    items = that._prepareItems(items);\n    that._rootLayoutManager = that._renderLayoutManager(items, $content, {\n      colCount: that.option(\"colCount\"),\n      alignItemLabels: that.option(\"alignItemLabels\"),\n      screenByWidth: this.option(\"screenByWidth\"),\n      colCountByScreen: this.option(\"colCountByScreen\"),\n      onLayoutChanged: function onLayoutChanged(inOneColumn) {\n        that._alignLabels.bind(that)(that._rootLayoutManager, inOneColumn);\n      },\n      onContentReady: function onContentReady(e) {\n        that._alignLabels(e.component, e.component.isSingleColumnMode());\n      }\n    });\n  },\n  _tryGetItemsForTemplate: function _tryGetItemsForTemplate(item) {\n    return item.items || [];\n  },\n  _itemTabbedTemplate: function _itemTabbedTemplate(item, e, $container) {\n    var _this = this;\n\n    var $tabPanel = (0, _renderer2.default)(\"<div>\").appendTo($container);\n    var tabPanelOptions = (0, _extend.extend)({}, item.tabPanelOptions, {\n      dataSource: item.tabs,\n      onItemRendered: function onItemRendered(args) {\n        return (0, _dom.triggerShownEvent)(args.itemElement);\n      },\n      itemTemplate: function itemTemplate(itemData, e, container) {\n        var $container = (0, _renderer2.default)(container);\n        var alignItemLabels = (0, _common.ensureDefined)(itemData.alignItemLabels, true);\n\n        var layoutManager = _this._renderLayoutManager(_this._tryGetItemsForTemplate(itemData), $container, {\n          colCount: itemData.colCount,\n          alignItemLabels: alignItemLabels,\n          screenByWidth: _this.option(\"screenByWidth\"),\n          colCountByScreen: itemData.colCountByScreen,\n          cssItemClass: itemData.cssItemClass,\n          onLayoutChanged: function onLayoutChanged(inOneColumn) {\n            _this._alignLabelsInColumn({\n              $container: $container,\n              layoutManager: layoutManager,\n              items: itemData.items,\n              inOneColumn: inOneColumn\n            });\n          }\n        });\n\n        if (_this._itemsRunTimeInfo) {\n          _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(itemData.guid, {\n            layoutManager: layoutManager\n          });\n        }\n\n        if (alignItemLabels) {\n          _this._alignLabelsInColumn({\n            $container: $container,\n            layoutManager: layoutManager,\n            items: itemData.items,\n            inOneColumn: layoutManager.isSingleColumnMode()\n          });\n        }\n      }\n    });\n\n    var tryUpdateTabPanelInstance = function tryUpdateTabPanelInstance(items, instance) {\n      if (Array.isArray(items)) {\n        items.forEach(function (item) {\n          return _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\n            widgetInstance: instance\n          });\n        });\n      }\n    };\n\n    var tabPanel = this._createComponent($tabPanel, _tab_panel2.default, tabPanelOptions);\n\n    tabPanel.on(\"optionChanged\", function (e) {\n      if (\"dataSource\" === e.fullName) {\n        tryUpdateTabPanelInstance(e.value, e.component);\n      }\n    });\n    tryUpdateTabPanelInstance([{\n      guid: item.guid\n    }].concat(_toConsumableArray(item.tabs)), tabPanel);\n  },\n  _itemGroupTemplate: function _itemGroupTemplate(item, e, $container) {\n    var $group = (0, _renderer2.default)(\"<div>\").toggleClass(FORM_GROUP_WITH_CAPTION_CLASS, (0, _type.isDefined)(item.caption) && item.caption.length).addClass(FORM_GROUP_CLASS).appendTo($container);\n    var $groupContent;\n    var colCount;\n    var layoutManager;\n\n    if (item.caption) {\n      (0, _renderer2.default)(\"<span>\").addClass(FORM_GROUP_CAPTION_CLASS).text(item.caption).appendTo($group);\n    }\n\n    $groupContent = (0, _renderer2.default)(\"<div>\").addClass(FORM_GROUP_CONTENT_CLASS).appendTo($group);\n\n    if (item.groupContentTemplate) {\n      var data = {\n        formData: this.option(\"formData\"),\n        component: this\n      };\n      item.groupContentTemplate.render({\n        model: data,\n        container: (0, _dom.getPublicElement)($groupContent)\n      });\n    } else {\n      layoutManager = this._renderLayoutManager(this._tryGetItemsForTemplate(item), $groupContent, {\n        colCount: item.colCount,\n        colCountByScreen: item.colCountByScreen,\n        alignItemLabels: item.alignItemLabels,\n        cssItemClass: item.cssItemClass\n      });\n      this._itemsRunTimeInfo && this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\n        layoutManager: layoutManager\n      });\n      colCount = layoutManager._getColCount();\n\n      if ((0, _array.inArray)(colCount, this._groupsColCount) === -1) {\n        this._groupsColCount.push(colCount);\n      }\n\n      $group.addClass(GROUP_COL_COUNT_CLASS + colCount);\n    }\n  },\n  _renderLayoutManager: function _renderLayoutManager(items, $rootElement, options) {\n    var $element = (0, _renderer2.default)(\"<div>\");\n    var that = this;\n    var instance;\n\n    var config = that._getLayoutManagerConfig(items, options);\n\n    var baseColCountByScreen = {\n      lg: options.colCount,\n      md: options.colCount,\n      sm: options.colCount,\n      xs: 1\n    };\n\n    that._cachedColCountOptions.push({\n      colCountByScreen: (0, _extend.extend)(baseColCountByScreen, options.colCountByScreen)\n    });\n\n    $element.appendTo($rootElement);\n    instance = that._createComponent($element, \"dxLayoutManager\", config);\n    instance.on(\"autoColCountChanged\", function () {\n      that._refresh();\n    });\n\n    that._cachedLayoutManagers.push(instance);\n\n    return instance;\n  },\n  _getValidationGroup: function _getValidationGroup() {\n    return this.option(\"validationGroup\") || this;\n  },\n  _getLayoutManagerConfig: function _getLayoutManagerConfig(items, options) {\n    var _this2 = this;\n\n    var baseConfig = {\n      form: this,\n      validationGroup: this._getValidationGroup(),\n      showRequiredMark: this.option(\"showRequiredMark\"),\n      showOptionalMark: this.option(\"showOptionalMark\"),\n      requiredMark: this.option(\"requiredMark\"),\n      optionalMark: this.option(\"optionalMark\"),\n      requiredMessage: this.option(\"requiredMessage\"),\n      screenByWidth: this.option(\"screenByWidth\"),\n      layoutData: this.option(\"formData\"),\n      labelLocation: this.option(\"labelLocation\"),\n      customizeItem: this.option(\"customizeItem\"),\n      minColWidth: this.option(\"minColWidth\"),\n      showColonAfterLabel: this.option(\"showColonAfterLabel\"),\n      onEditorEnterKey: this.option(\"onEditorEnterKey\"),\n      onFieldDataChanged: function onFieldDataChanged(args) {\n        if (!_this2._isDataUpdating) {\n          _this2._triggerOnFieldDataChanged(args);\n        }\n      },\n      validationBoundary: this.option(\"scrollingEnabled\") ? this.$element() : void 0\n    };\n    return (0, _extend.extend)(baseConfig, {\n      items: items,\n      onContentReady: function onContentReady(args) {\n        _this2._itemsRunTimeInfo.addItemsOrExtendFrom(args.component._itemsRunTimeInfo);\n\n        options.onContentReady && options.onContentReady(args);\n      },\n      onDisposing: function onDisposing(_ref2) {\n        var component = _ref2.component;\n        var nestedItemsRunTimeInfo = component.getItemsRunTimeInfo();\n\n        _this2._itemsRunTimeInfo.removeItemsByItems(nestedItemsRunTimeInfo);\n      },\n      colCount: options.colCount,\n      alignItemLabels: options.alignItemLabels,\n      cssItemClass: options.cssItemClass,\n      colCountByScreen: options.colCountByScreen,\n      onLayoutChanged: options.onLayoutChanged,\n      width: options.width\n    });\n  },\n  _createComponent: function _createComponent($element, type, config) {\n    var that = this;\n    config = config || {};\n\n    that._extendConfig(config, {\n      readOnly: that.option(\"readOnly\")\n    });\n\n    return that.callBase($element, type, config);\n  },\n  _attachSyncSubscriptions: function _attachSyncSubscriptions() {\n    var that = this;\n    that.on(\"optionChanged\", function (args) {\n      var optionFullName = args.fullName;\n\n      if (\"formData\" === optionFullName) {\n        if (!(0, _type.isDefined)(args.value)) {\n          that._options.formData = args.value = {};\n        }\n\n        that._triggerOnFieldDataChangedByDataSet(args.value);\n      }\n\n      if (that._cachedLayoutManagers.length) {\n        (0, _iterator.each)(that._cachedLayoutManagers, function (index, layoutManager) {\n          if (\"formData\" === optionFullName) {\n            that._isDataUpdating = true;\n            layoutManager.option(\"layoutData\", args.value);\n            that._isDataUpdating = false;\n          }\n\n          if (\"readOnly\" === args.name || \"disabled\" === args.name) {\n            layoutManager.option(optionFullName, args.value);\n          }\n        });\n      }\n    });\n  },\n  _optionChanged: function _optionChanged(args) {\n    var rootNameOfComplexOption = this._getRootLevelOfExpectedComplexOption(args.fullName, [\"formData\", \"items\"]);\n\n    if (rootNameOfComplexOption) {\n      this._customHandlerOfComplexOption(args, rootNameOfComplexOption);\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"formData\":\n        if (!this.option(\"items\")) {\n          this._invalidate();\n        } else {\n          if ((0, _type.isEmptyObject)(args.value)) {\n            this._resetValues();\n          }\n        }\n\n        break;\n\n      case \"items\":\n      case \"colCount\":\n      case \"onFieldDataChanged\":\n      case \"onEditorEnterKey\":\n      case \"labelLocation\":\n      case \"alignItemLabels\":\n      case \"showColonAfterLabel\":\n      case \"customizeItem\":\n      case \"alignItemLabelsInAllGroups\":\n      case \"showRequiredMark\":\n      case \"showOptionalMark\":\n      case \"requiredMark\":\n      case \"optionalMark\":\n      case \"requiredMessage\":\n      case \"scrollingEnabled\":\n      case \"formID\":\n      case \"colCountByScreen\":\n      case \"screenByWidth\":\n      case \"stylingMode\":\n        this._invalidate();\n\n        break;\n\n      case \"showValidationSummary\":\n        this._renderValidationSummary();\n\n        break;\n\n      case \"minColWidth\":\n        if (\"auto\" === this.option(\"colCount\")) {\n          this._invalidate();\n        }\n\n        break;\n\n      case \"readOnly\":\n        break;\n\n      case \"width\":\n        this.callBase(args);\n\n        this._rootLayoutManager.option(args.name, args.value);\n\n        this._alignLabels(this._rootLayoutManager, this._rootLayoutManager.isSingleColumnMode());\n\n        break;\n\n      case \"visible\":\n        this.callBase(args);\n\n        if (args.value) {\n          (0, _dom.triggerShownEvent)(this.$element());\n        }\n\n        break;\n\n      case \"validationGroup\":\n        _validation_engine2.default.removeGroup(args.previousValue || this);\n\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _getRootLevelOfExpectedComplexOption: function _getRootLevelOfExpectedComplexOption(fullOptionName, expectedRootNames) {\n    var splitFullName = fullOptionName.split(\".\");\n    var result;\n\n    if (splitFullName.length > 1) {\n      var i;\n      var rootOptionName = splitFullName[0];\n\n      for (i = 0; i < expectedRootNames.length; i++) {\n        if (rootOptionName.search(expectedRootNames[i]) !== -1) {\n          result = expectedRootNames[i];\n        }\n      }\n    }\n\n    return result;\n  },\n  _tryCreateItemOptionAction: function _tryCreateItemOptionAction(optionName, item, value, previousValue, itemPath) {\n    if (\"tabs\" === optionName) {\n      this._itemsRunTimeInfo.removeItemsByPathStartWith(\"\".concat(itemPath, \".tabs\"));\n\n      value = this._prepareItems(value, true, itemPath, true);\n    }\n\n    return (0, _uiForm6.default)(optionName, {\n      item: item,\n      value: value,\n      previousValue: previousValue,\n      itemsRunTimeInfo: this._itemsRunTimeInfo\n    });\n  },\n  _tryExecuteItemOptionAction: function _tryExecuteItemOptionAction(action) {\n    return action && action.tryExecute();\n  },\n  _updateValidationGroupAndSummaryIfNeeded: function _updateValidationGroupAndSummaryIfNeeded(fullName) {\n    var optionName = (0, _uiForm7.getOptionNameFromFullName)(fullName);\n\n    if (ITEM_OPTIONS_FOR_VALIDATION_UPDATING.indexOf(optionName) > -1) {\n      _validation_engine2.default.addGroup(this._getValidationGroup());\n\n      if (this.option(\"showValidationSummary\")) {\n        this._validationSummary && this._validationSummary._initGroupRegistration();\n      }\n    }\n  },\n  _setLayoutManagerItemOption: function _setLayoutManagerItemOption(layoutManager, optionName, value, path) {\n    var _this3 = this;\n\n    if (this._updateLockCount > 0) {\n      !layoutManager._updateLockCount && layoutManager.beginUpdate();\n\n      var key = this._itemsRunTimeInfo.getKeyByPath(path);\n\n      this.postponedOperations.add(key, function () {\n        layoutManager.endUpdate();\n        return new _deferred.Deferred().resolve();\n      });\n    }\n\n    var contentReadyHandler = function contentReadyHandler(e) {\n      e.component.off(\"contentReady\", contentReadyHandler);\n\n      if ((0, _uiForm7.isFullPathContainsTabs)(path)) {\n        var tabPath = (0, _uiForm7.tryGetTabPath)(path);\n\n        var tabLayoutManager = _this3._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(tabPath);\n\n        _this3._alignLabelsInColumn({\n          items: tabLayoutManager.option(\"items\"),\n          layoutManager: tabLayoutManager,\n          $container: tabLayoutManager.$element(),\n          inOneColumn: tabLayoutManager.isSingleColumnMode()\n        });\n      } else {\n        _this3._alignLabels(_this3._rootLayoutManager, _this3._rootLayoutManager.isSingleColumnMode());\n      }\n    };\n\n    layoutManager.on(\"contentReady\", contentReadyHandler);\n    layoutManager.option(optionName, value);\n\n    this._updateValidationGroupAndSummaryIfNeeded(optionName);\n  },\n  _tryChangeLayoutManagerItemOption: function _tryChangeLayoutManagerItemOption(fullName, value) {\n    var nameParts = fullName.split(\".\");\n    var optionName = (0, _uiForm7.getOptionNameFromFullName)(fullName);\n\n    if (\"items\" === optionName && nameParts.length > 1) {\n      var itemPath = this._getItemPath(nameParts);\n\n      var layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(itemPath);\n\n      if (layoutManager) {\n        this._itemsRunTimeInfo.removeItemsByItems(layoutManager.getItemsRunTimeInfo());\n\n        var items = this._prepareItems(value, false, itemPath);\n\n        this._setLayoutManagerItemOption(layoutManager, optionName, items, itemPath);\n\n        return true;\n      }\n    } else {\n      if (nameParts.length > 2) {\n        var endPartIndex = nameParts.length - 2;\n\n        var _itemPath = this._getItemPath(nameParts.slice(0, endPartIndex));\n\n        var _layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(_itemPath);\n\n        if (_layoutManager) {\n          var fullOptionName = (0, _uiForm7.getFullOptionName)(nameParts[endPartIndex], optionName);\n\n          this._setLayoutManagerItemOption(_layoutManager, fullOptionName, value, _itemPath);\n\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n  _tryChangeLayoutManagerItemOptions: function _tryChangeLayoutManagerItemOptions(itemPath, options) {\n    var _this4 = this;\n\n    var result;\n    this.beginUpdate();\n    (0, _iterator.each)(options, function (optionName, optionValue) {\n      result = _this4._tryChangeLayoutManagerItemOption((0, _uiForm7.getFullOptionName)(itemPath, optionName), optionValue);\n\n      if (!result) {\n        return false;\n      }\n    });\n    this.endUpdate();\n    return result;\n  },\n  _customHandlerOfComplexOption: function _customHandlerOfComplexOption(args, rootOptionName) {\n    var nameParts = args.fullName.split(\".\");\n    var value = args.value;\n\n    if (\"items\" === rootOptionName) {\n      var itemPath = this._getItemPath(nameParts);\n\n      var item = this.option(itemPath);\n      var optionNameWithoutPath = args.fullName.replace(itemPath + \".\", \"\");\n      var simpleOptionName = optionNameWithoutPath.split(\".\")[0].replace(/\\[\\d+]/, \"\");\n\n      var itemAction = this._tryCreateItemOptionAction(simpleOptionName, item, item[simpleOptionName], args.previousValue, itemPath);\n\n      if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(args.fullName, value)) {\n        if (item) {\n          this._changeItemOption(item, optionNameWithoutPath, value);\n\n          var items = this._generateItemsFromData(this.option(\"items\"));\n\n          this.option(\"items\", items);\n        }\n      }\n    }\n\n    if (\"formData\" === rootOptionName) {\n      var dataField = nameParts.slice(1).join(\".\");\n      var editor = this.getEditor(dataField);\n\n      if (editor) {\n        editor.option(\"value\", value);\n      } else {\n        this._triggerOnFieldDataChanged({\n          dataField: dataField,\n          value: value\n        });\n      }\n    }\n  },\n  _getItemPath: function _getItemPath(nameParts) {\n    var itemPath = nameParts[0];\n    var i;\n\n    for (i = 1; i < nameParts.length; i++) {\n      if (nameParts[i].search(/items\\[\\d+]|tabs\\[\\d+]/) !== -1) {\n        itemPath += \".\" + nameParts[i];\n      } else {\n        break;\n      }\n    }\n\n    return itemPath;\n  },\n  _triggerOnFieldDataChanged: function _triggerOnFieldDataChanged(args) {\n    this._createActionByOption(\"onFieldDataChanged\")(args);\n  },\n  _triggerOnFieldDataChangedByDataSet: function _triggerOnFieldDataChangedByDataSet(data) {\n    var that = this;\n\n    if (data && (0, _type.isObject)(data)) {\n      (0, _iterator.each)(data, function (dataField, value) {\n        that._triggerOnFieldDataChanged({\n          dataField: dataField,\n          value: value\n        });\n      });\n    }\n  },\n  _updateFieldValue: function _updateFieldValue(dataField, value) {\n    if ((0, _type.isDefined)(this.option(\"formData\"))) {\n      var editor = this.getEditor(dataField);\n      this.option(\"formData.\" + dataField, value);\n\n      if (editor) {\n        var editorValue = editor.option(\"value\");\n\n        if (editorValue !== value) {\n          editor.option(\"value\", value);\n        }\n      }\n    }\n  },\n  _generateItemsFromData: function _generateItemsFromData(items) {\n    var formData = this.option(\"formData\");\n    var result = [];\n\n    if (!items && (0, _type.isDefined)(formData)) {\n      (0, _iterator.each)(formData, function (dataField) {\n        result.push({\n          dataField: dataField\n        });\n      });\n    }\n\n    if (items) {\n      (0, _iterator.each)(items, function (index, item) {\n        if ((0, _type.isObject)(item)) {\n          result.push(item);\n        } else {\n          result.push({\n            dataField: item\n          });\n        }\n      });\n    }\n\n    return result;\n  },\n  _getItemByField: function _getItemByField(field, items) {\n    var that = this;\n    var fieldParts = (0, _type.isObject)(field) ? field : that._getFieldParts(field);\n    var fieldName = fieldParts.fieldName;\n    var fieldPath = fieldParts.fieldPath;\n    var resultItem;\n\n    if (items.length) {\n      (0, _iterator.each)(items, function (index, item) {\n        var itemType = item.itemType;\n\n        if (fieldPath.length) {\n          var path = fieldPath.slice();\n          item = that._getItemByFieldPath(path, fieldName, item);\n        } else {\n          if (\"group\" === itemType && !(item.caption || item.name) || \"tabbed\" === itemType && !item.name) {\n            var subItemsField = that._getSubItemField(itemType);\n\n            item.items = that._generateItemsFromData(item.items);\n            item = that._getItemByField({\n              fieldName: fieldName,\n              fieldPath: fieldPath\n            }, item[subItemsField]);\n          }\n        }\n\n        if ((0, _uiForm7.isExpectedItem)(item, fieldName)) {\n          resultItem = item;\n          return false;\n        }\n      });\n    }\n\n    return resultItem;\n  },\n  _getFieldParts: function _getFieldParts(field) {\n    var fieldSeparator = \".\";\n    var fieldName = field;\n    var separatorIndex = fieldName.indexOf(fieldSeparator);\n    var resultPath = [];\n\n    while (separatorIndex !== -1) {\n      resultPath.push(fieldName.substr(0, separatorIndex));\n      fieldName = fieldName.substr(separatorIndex + 1);\n      separatorIndex = fieldName.indexOf(fieldSeparator);\n    }\n\n    return {\n      fieldName: fieldName,\n      fieldPath: resultPath.reverse()\n    };\n  },\n  _getItemByFieldPath: function _getItemByFieldPath(path, fieldName, item) {\n    var that = this;\n    var itemType = item.itemType;\n\n    var subItemsField = that._getSubItemField(itemType);\n\n    var isItemWithSubItems = \"group\" === itemType || \"tabbed\" === itemType || item.title;\n    var result;\n\n    do {\n      if (isItemWithSubItems) {\n        var name = item.name || item.caption || item.title;\n        var isGroupWithName = (0, _type.isDefined)(name);\n        var nameWithoutSpaces = (0, _uiForm7.getTextWithoutSpaces)(name);\n        var pathNode;\n        item[subItemsField] = that._generateItemsFromData(item[subItemsField]);\n\n        if (isGroupWithName) {\n          pathNode = path.pop();\n        }\n\n        if (!path.length) {\n          result = that._getItemByField(fieldName, item[subItemsField]);\n\n          if (result) {\n            break;\n          }\n        }\n\n        if (!isGroupWithName || isGroupWithName && nameWithoutSpaces === pathNode) {\n          if (path.length) {\n            result = that._searchItemInEverySubItem(path, fieldName, item[subItemsField]);\n          }\n        }\n      } else {\n        break;\n      }\n    } while (path.length && !(0, _type.isDefined)(result));\n\n    return result;\n  },\n  _getSubItemField: function _getSubItemField(itemType) {\n    return \"tabbed\" === itemType ? \"tabs\" : \"items\";\n  },\n  _searchItemInEverySubItem: function _searchItemInEverySubItem(path, fieldName, items) {\n    var that = this;\n    var result;\n    (0, _iterator.each)(items, function (index, groupItem) {\n      result = that._getItemByFieldPath(path.slice(), fieldName, groupItem);\n\n      if (result) {\n        return false;\n      }\n    });\n\n    if (!result) {\n      result = false;\n    }\n\n    return result;\n  },\n  _changeItemOption: function _changeItemOption(item, option, value) {\n    if ((0, _type.isObject)(item)) {\n      item[option] = value;\n    }\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    var currentScreenFactor = this._getCurrentScreenFactor();\n\n    if (this._lastMarkupScreenFactor !== currentScreenFactor) {\n      if (this._isColCountChanged(this._lastMarkupScreenFactor, currentScreenFactor)) {\n        this._targetScreenFactor = currentScreenFactor;\n\n        this._refresh();\n\n        this._targetScreenFactor = void 0;\n      }\n\n      this._lastMarkupScreenFactor = currentScreenFactor;\n    }\n  },\n  _isColCountChanged: function _isColCountChanged(oldScreenSize, newScreenSize) {\n    var isChanged = false;\n    (0, _iterator.each)(this._cachedColCountOptions, function (index, item) {\n      if (item.colCountByScreen[oldScreenSize] !== item.colCountByScreen[newScreenSize]) {\n        isChanged = true;\n        return false;\n      }\n    });\n    return isChanged;\n  },\n  _refresh: function _refresh() {\n    var editorSelector = \".\" + FOCUSED_STATE_CLASS + \" input, .\" + FOCUSED_STATE_CLASS + \" textarea\";\n\n    _events_engine2.default.trigger(this.$element().find(editorSelector), \"change\");\n\n    this.callBase();\n  },\n  _resetValues: function _resetValues() {\n    this._itemsRunTimeInfo.each(function (_, itemRunTimeInfo) {\n      if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance) && itemRunTimeInfo.widgetInstance instanceof _editor2.default) {\n        itemRunTimeInfo.widgetInstance.reset();\n        itemRunTimeInfo.widgetInstance.option(\"isValid\", true);\n      }\n    });\n\n    _validation_engine2.default.resetGroup(this._getValidationGroup());\n  },\n  _updateData: function _updateData(data, value, isComplexData) {\n    var that = this;\n\n    var _data = isComplexData ? value : data;\n\n    if ((0, _type.isObject)(_data)) {\n      (0, _iterator.each)(_data, function (dataField, fieldValue) {\n        that._updateData(isComplexData ? data + \".\" + dataField : dataField, fieldValue, (0, _type.isObject)(fieldValue));\n      });\n    } else {\n      if ((0, _type.isString)(data)) {\n        that._updateFieldValue(data, value);\n      }\n    }\n  },\n  registerKeyHandler: function registerKeyHandler(key, handler) {\n    this.callBase(key, handler);\n\n    this._itemsRunTimeInfo.each(function (_, itemRunTimeInfo) {\n      if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance)) {\n        itemRunTimeInfo.widgetInstance.registerKeyHandler(key, handler);\n      }\n    });\n  },\n  _focusTarget: function _focusTarget() {\n    return this.$element().find(\".\" + FIELD_ITEM_CONTENT_CLASS + \" [tabindex]\").first();\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible && _browser2.default.msie) {\n      this._refresh();\n    }\n  },\n  _dispose: function _dispose() {\n    _validation_engine2.default.removeGroup(this._getValidationGroup());\n\n    this.callBase();\n  },\n  resetValues: function resetValues() {\n    this._resetValues();\n  },\n  updateData: function updateData(data, value) {\n    this._updateData(data, value);\n  },\n  getEditor: function getEditor(dataField) {\n    return this._itemsRunTimeInfo.findWidgetInstanceByDataField(dataField) || this._itemsRunTimeInfo.findWidgetInstanceByName(dataField);\n  },\n  getButton: function getButton(name) {\n    return this._itemsRunTimeInfo.findWidgetInstanceByName(name);\n  },\n  updateDimensions: function updateDimensions() {\n    var that = this;\n    var deferred = new _deferred.Deferred();\n\n    if (that._scrollable) {\n      that._scrollable.update().done(function () {\n        deferred.resolveWith(that);\n      });\n    } else {\n      deferred.resolveWith(that);\n    }\n\n    return deferred.promise();\n  },\n  itemOption: function itemOption(id, option, value) {\n    var _this5 = this;\n\n    var items = this._generateItemsFromData(this.option(\"items\"));\n\n    var item = this._getItemByField(id, items);\n\n    var path = this._itemsRunTimeInfo.getPathFromItem(item);\n\n    if (!item) {\n      return;\n    }\n\n    switch (arguments.length) {\n      case 1:\n        return item;\n\n      case 3:\n        var itemAction = this._tryCreateItemOptionAction(option, item, value, item[option], path);\n\n        this._changeItemOption(item, option, value);\n\n        var fullName = (0, _uiForm7.getFullOptionName)(path, option);\n\n        if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(fullName, value)) {\n          this.option(\"items\", items);\n        }\n\n        break;\n\n      default:\n        if ((0, _type.isObject)(option)) {\n          if (!this._tryChangeLayoutManagerItemOptions(path, option)) {\n            var allowUpdateItems;\n            (0, _iterator.each)(option, function (optionName, optionValue) {\n              var itemAction = _this5._tryCreateItemOptionAction(optionName, item, optionValue, item[optionName], path);\n\n              _this5._changeItemOption(item, optionName, optionValue);\n\n              if (!allowUpdateItems && !_this5._tryExecuteItemOptionAction(itemAction)) {\n                allowUpdateItems = true;\n              }\n            });\n            allowUpdateItems && this.option(\"items\", items);\n          }\n        }\n\n    }\n  },\n  validate: function validate() {\n    return _validation_engine2.default.validateGroup(this._getValidationGroup());\n  },\n  getItemID: function getItemID(name) {\n    return \"dx_\" + this.option(\"formID\") + \"_\" + (name || new _guid2.default());\n  },\n  getTargetScreenFactor: function getTargetScreenFactor() {\n    return this._targetScreenFactor;\n  }\n});\n\n(0, _component_registrator2.default)(\"dxForm\", Form);\nmodule.exports = Form;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/form/ui.form.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_component_registrator","_component_registrator2","_guid","_guid2","_common","_type","_iterator","_array","_extend","_string","_browser","_browser2","_dom","_message","_message2","_ui","_ui2","_editor","_editor2","_window","_validation_engine","_validation_engine2","_uiForm","_uiForm2","_uiForm3","_uiForm4","_tab_panel","_tab_panel2","_ui3","_ui4","_deferred","_themes","_themes2","_uiForm5","_uiForm6","_uiForm7","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","FORM_CLASS","FIELD_ITEM_CLASS","FIELD_ITEM_LABEL_TEXT_CLASS","FORM_GROUP_CLASS","FORM_GROUP_CONTENT_CLASS","FORM_GROUP_WITH_CAPTION_CLASS","FORM_GROUP_CAPTION_CLASS","HIDDEN_LABEL_CLASS","FIELD_ITEM_LABEL_CLASS","FIELD_ITEM_LABEL_CONTENT_CLASS","FIELD_ITEM_TAB_CLASS","FORM_FIELD_ITEM_COL_CLASS","GROUP_COL_COUNT_CLASS","FIELD_ITEM_CONTENT_CLASS","FORM_VALIDATION_SUMMARY","WIDGET_CLASS","FOCUSED_STATE_CLASS","ITEM_OPTIONS_FOR_VALIDATION_UPDATING","Form","default","inherit","_init","callBase","_cachedColCountOptions","_itemsRunTimeInfo","_groupsColCount","_attachSyncSubscriptions","_initOptions","options","screenByWidth","defaultScreenFactorFunc","_getDefaultOptions","extend","formID","formData","colCount","colCountByScreen","labelLocation","readOnly","onFieldDataChanged","customizeItem","onEditorEnterKey","minColWidth","alignItemLabels","alignItemLabelsInAllGroups","showColonAfterLabel","showRequiredMark","showOptionalMark","requiredMark","optionalMark","format","requiredMessage","getFormatter","showValidationSummary","items","scrollingEnabled","validationGroup","stylingMode","_defaultOptionsRules","concat","device","isMaterial","_setOptionsByReference","_optionsByReference","_getColCount","$element","index","isColsExist","$cols","find","_createHiddenElement","rootLayoutManager","_$hiddenElement","addClass","appendTo","$hiddenLabel","_renderLabel","text","location","_labelLocation","_hiddenLabelText","_removeHiddenElement","remove","_getLabelWidthByText","innerHTML","offsetWidth","_getLabelsSelectorByCol","fieldItemClass","inOneColumn","cssExcludeTabbedSelector","excludeTabbed","childLabelContentSelector","_getLabelText","labelText","children","child","result","isEmpty","innerText","_applyLabelsWidthByCol","$container","$labelTexts","$labelTextsLength","labelWidth","maxWidth","style","width","_applyLabelsWidth","applyLabelsOptions","_getGroupElementsInColumn","columnIndex","cssColCountSelector","isDefined","groupSelector","_applyLabelsWidthWithGroups","option","_applyLabelsWidthWithNestedGroups","$groups","eq","colIndex","groupsColIndex","groupColIndex","$groupsByCol","groupColCount","_alignLabelsInColumn","_ref","layoutManager","hasWindow","_checkGrouping","_prepareFormData","_initMarkup","addGroup","_getValidationGroup","_clearCachedInstances","setAria","_renderScrollable","_renderLayout","_renderValidationSummary","_lastMarkupScreenFactor","_targetScreenFactor","_getCurrentScreenFactor","getCurrentScreenFactor","clear","_cachedLayoutManagers","_alignLabels","_clean","useNativeScrolling","_scrollable","useNative","useSimulatedScrollbar","useKeyboard","direction","bounceEnabled","_getContent","$content","$validationSummary","_$validationSummary","_validationSummary","dxValidationSummary","_prepareItems","parentIsTabbedItem","currentPath","isTabs","item","path","concatPaths","createItemPathByIndex","guid","add","itemIndex","isString","dataField","isObject","itemCopy","_tryPrepareGroupItem","_tryPrepareTabbedItem","_tryPrepareItemTemplate","cssItemClass","push","itemType","ensureDefined","template","groupContentTemplate","_getTemplate","_itemGroupTemplate","bind","_itemTabbedTemplate","tabs","that","_rootLayoutManager","_renderLayoutManager","onLayoutChanged","onContentReady","e","component","isSingleColumnMode","_tryGetItemsForTemplate","_this","$tabPanel","tabPanelOptions","dataSource","onItemRendered","args","triggerShownEvent","itemElement","itemTemplate","itemData","container","extendRunTimeItemInfoByKey","tryUpdateTabPanelInstance","instance","forEach","widgetInstance","tabPanel","_createComponent","on","fullName","value","$group","toggleClass","caption","$groupContent","data","render","model","getPublicElement","inArray","$rootElement","config","_getLayoutManagerConfig","baseColCountByScreen","lg","md","sm","xs","_refresh","_this2","baseConfig","form","layoutData","_isDataUpdating","_triggerOnFieldDataChanged","validationBoundary","addItemsOrExtendFrom","onDisposing","_ref2","nestedItemsRunTimeInfo","getItemsRunTimeInfo","removeItemsByItems","type","_extendConfig","optionFullName","_options","_triggerOnFieldDataChangedByDataSet","each","name","_optionChanged","rootNameOfComplexOption","_getRootLevelOfExpectedComplexOption","_customHandlerOfComplexOption","_invalidate","isEmptyObject","_resetValues","removeGroup","previousValue","fullOptionName","expectedRootNames","splitFullName","split","rootOptionName","search","_tryCreateItemOptionAction","optionName","itemPath","removeItemsByPathStartWith","itemsRunTimeInfo","_tryExecuteItemOptionAction","action","tryExecute","_updateValidationGroupAndSummaryIfNeeded","getOptionNameFromFullName","indexOf","_initGroupRegistration","_setLayoutManagerItemOption","_this3","_updateLockCount","beginUpdate","key","getKeyByPath","postponedOperations","endUpdate","Deferred","resolve","contentReadyHandler","off","isFullPathContainsTabs","tabPath","tryGetTabPath","tabLayoutManager","getGroupOrTabLayoutManagerByPath","_tryChangeLayoutManagerItemOption","nameParts","_getItemPath","endPartIndex","_itemPath","slice","_layoutManager","getFullOptionName","_tryChangeLayoutManagerItemOptions","_this4","optionValue","optionNameWithoutPath","replace","simpleOptionName","itemAction","_changeItemOption","_generateItemsFromData","join","editor","getEditor","_createActionByOption","_updateFieldValue","editorValue","_getItemByField","field","fieldParts","_getFieldParts","fieldName","fieldPath","resultItem","_getItemByFieldPath","subItemsField","_getSubItemField","isExpectedItem","fieldSeparator","separatorIndex","resultPath","substr","reverse","isItemWithSubItems","title","isGroupWithName","nameWithoutSpaces","getTextWithoutSpaces","pathNode","pop","_searchItemInEverySubItem","groupItem","_dimensionChanged","currentScreenFactor","_isColCountChanged","oldScreenSize","newScreenSize","isChanged","editorSelector","trigger","_","itemRunTimeInfo","reset","resetGroup","_updateData","isComplexData","_data","fieldValue","registerKeyHandler","handler","_focusTarget","first","_visibilityChanged","visible","msie","_dispose","resetValues","updateData","findWidgetInstanceByDataField","findWidgetInstanceByName","getButton","updateDimensions","deferred","update","done","resolveWith","promise","itemOption","id","_this5","getPathFromItem","arguments","allowUpdateItems","validate","validateGroup","getItemID","getTargetScreenFactor","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,SAAS,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;AACA,IAAIC,UAAU,GAAGC,sBAAsB,CAACH,SAAD,CAAvC;;AACA,IAAII,cAAc,GAAGH,OAAO,CAAC,iCAAD,CAA5B;;AACA,IAAII,eAAe,GAAGF,sBAAsB,CAACC,cAAD,CAA5C;;AACA,IAAIE,sBAAsB,GAAGL,OAAO,CAAC,kCAAD,CAApC;;AACA,IAAIM,uBAAuB,GAAGJ,sBAAsB,CAACG,sBAAD,CAApD;;AACA,IAAIE,KAAK,GAAGP,OAAO,CAAC,iBAAD,CAAnB;;AACA,IAAIQ,MAAM,GAAGN,sBAAsB,CAACK,KAAD,CAAnC;;AACA,IAAIE,OAAO,GAAGT,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIU,KAAK,GAAGV,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIW,SAAS,GAAGX,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIY,MAAM,GAAGZ,OAAO,CAAC,wBAAD,CAApB;;AACA,IAAIa,OAAO,GAAGb,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIc,OAAO,GAAGd,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIe,QAAQ,GAAGf,OAAO,CAAC,0BAAD,CAAtB;;AACA,IAAIgB,SAAS,GAAGd,sBAAsB,CAACa,QAAD,CAAtC;;AACA,IAAIE,IAAI,GAAGjB,OAAO,CAAC,sBAAD,CAAlB;;AACA,IAAIkB,QAAQ,GAAGlB,OAAO,CAAC,4BAAD,CAAtB;;AACA,IAAImB,SAAS,GAAGjB,sBAAsB,CAACgB,QAAD,CAAtC;;AACA,IAAIE,GAAG,GAAGpB,OAAO,CAAC,qBAAD,CAAjB;;AACA,IAAIqB,IAAI,GAAGnB,sBAAsB,CAACkB,GAAD,CAAjC;;AACA,IAAIE,OAAO,GAAGtB,OAAO,CAAC,kBAAD,CAArB;;AACA,IAAIuB,QAAQ,GAAGrB,sBAAsB,CAACoB,OAAD,CAArC;;AACA,IAAIE,OAAO,GAAGxB,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIyB,kBAAkB,GAAGzB,OAAO,CAAC,sBAAD,CAAhC;;AACA,IAAI0B,mBAAmB,GAAGxB,sBAAsB,CAACuB,kBAAD,CAAhD;;AACA,IAAIE,OAAO,GAAG3B,OAAO,CAAC,0BAAD,CAArB;;AACA,IAAI4B,QAAQ,GAAG1B,sBAAsB,CAACyB,OAAD,CAArC;;AACA,IAAIE,QAAQ,GAAG7B,OAAO,CAAC,8BAAD,CAAtB;;AACA,IAAI8B,QAAQ,GAAG5B,sBAAsB,CAAC2B,QAAD,CAArC;;AACA,IAAIE,UAAU,GAAG/B,OAAO,CAAC,cAAD,CAAxB;;AACA,IAAIgC,WAAW,GAAG9B,sBAAsB,CAAC6B,UAAD,CAAxC;;AACA,IAAIE,IAAI,GAAGjC,OAAO,CAAC,8BAAD,CAAlB;;AACA,IAAIkC,IAAI,GAAGhC,sBAAsB,CAAC+B,IAAD,CAAjC;;AACA,IAAIE,SAAS,GAAGnC,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIoC,OAAO,GAAGpC,OAAO,CAAC,WAAD,CAArB;;AACA,IAAIqC,QAAQ,GAAGnC,sBAAsB,CAACkC,OAAD,CAArC;;AACA,IAAIE,QAAQ,GAAGtC,OAAO,CAAC,gCAAD,CAAtB;;AACA,IAAIuC,QAAQ,GAAGrC,sBAAsB,CAACoC,QAAD,CAArC;;AACA,IAAIE,QAAQ,GAAGxC,OAAO,CAAC,iBAAD,CAAtB;;AACAA,OAAO,CAAC,uBAAD,CAAP;;AACAA,OAAO,CAAC,qBAAD,CAAP;;AAEA,SAASE,sBAAT,CAAgCuC,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AAED,SAASE,kBAAT,CAA4BC,GAA5B,EAAiC;AAC7B,SAAOC,kBAAkB,CAACD,GAAD,CAAlB,IAA2BE,gBAAgB,CAACF,GAAD,CAA3C,IAAoDG,kBAAkB,EAA7E;AACH;;AAED,SAASA,kBAAT,GAA8B;AAC1B,QAAM,IAAIC,SAAJ,CAAc,iDAAd,CAAN;AACH;;AAED,SAASF,gBAAT,CAA0BG,IAA1B,EAAgC;AAC5B,MAAIC,MAAM,CAACC,QAAP,IAAmBC,MAAM,CAACH,IAAD,CAAzB,IAAmC,yBAAyBG,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BN,IAA/B,CAAhE,EAAsG;AAClG,WAAOO,KAAK,CAACC,IAAN,CAAWR,IAAX,CAAP;AACH;AACJ;;AAED,SAASJ,kBAAT,CAA4BD,GAA5B,EAAiC;AAC7B,MAAIY,KAAK,CAACE,OAAN,CAAcd,GAAd,CAAJ,EAAwB;AACpB,SAAK,IAAIe,CAAC,GAAG,CAAR,EAAWC,IAAI,GAAG,IAAIJ,KAAJ,CAAUZ,GAAG,CAACiB,MAAd,CAAvB,EAA8CF,CAAC,GAAGf,GAAG,CAACiB,MAAtD,EAA8DF,CAAC,EAA/D,EAAmE;AAC/DC,MAAAA,IAAI,CAACD,CAAD,CAAJ,GAAUf,GAAG,CAACe,CAAD,CAAb;AACH;;AACD,WAAOC,IAAP;AACH;AACJ;;AACD,IAAIE,UAAU,GAAG,SAAjB;AACA,IAAIC,gBAAgB,GAAG,eAAvB;AACA,IAAIC,2BAA2B,GAAG,0BAAlC;AACA,IAAIC,gBAAgB,GAAG,eAAvB;AACA,IAAIC,wBAAwB,GAAG,uBAA/B;AACA,IAAIC,6BAA6B,GAAG,4BAApC;AACA,IAAIC,wBAAwB,GAAG,uBAA/B;AACA,IAAIC,kBAAkB,GAAG,gCAAzB;AACA,IAAIC,sBAAsB,GAAG,qBAA7B;AACA,IAAIC,8BAA8B,GAAG,6BAArC;AACA,IAAIC,oBAAoB,GAAG,mBAA3B;AACA,IAAIC,yBAAyB,GAAG,SAAhC;AACA,IAAIC,qBAAqB,GAAG,oBAA5B;AACA,IAAIC,wBAAwB,GAAG,uBAA/B;AACA,IAAIC,uBAAuB,GAAG,4BAA9B;AACA,IAAIC,YAAY,GAAG,WAAnB;AACA,IAAIC,mBAAmB,GAAG,kBAA1B;AACA,IAAIC,oCAAoC,GAAG,CAAC,OAAD,EAAU,YAAV,EAAwB,iBAAxB,EAA2C,SAA3C,CAA3C;;AACA,IAAIC,IAAI,GAAG3D,IAAI,CAAC4D,OAAL,CAAaC,OAAb,CAAqB;AAC5BC,EAAAA,KAAK,EAAE,iBAAW;AACd,SAAKC,QAAL;AACA,SAAKC,sBAAL,GAA8B,EAA9B;AACA,SAAKC,iBAAL,GAAyB,IAAIxD,QAAQ,CAACmD,OAAb,EAAzB;AACA,SAAKM,eAAL,GAAuB,EAAvB;;AACA,SAAKC,wBAAL;AACH,GAP2B;AAQ5BC,EAAAA,YAAY,EAAE,sBAASC,OAAT,EAAkB;AAC5B,QAAI,EAAE,mBAAmBA,OAArB,CAAJ,EAAmC;AAC/BA,MAAAA,OAAO,CAACC,aAAR,GAAwBnE,OAAO,CAACoE,uBAAhC;AACH;;AACD,SAAKR,QAAL,CAAcM,OAAd;AACH,GAb2B;AAc5BG,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,WAAO,CAAC,GAAGhF,OAAO,CAACiF,MAAZ,EAAoB,KAAKV,QAAL,EAApB,EAAqC;AACxCW,MAAAA,MAAM,EAAE,QAAQ,IAAIvF,MAAM,CAACyE,OAAX,EADwB;AAExCe,MAAAA,QAAQ,EAAE,EAF8B;AAGxCC,MAAAA,QAAQ,EAAE,CAH8B;AAIxCN,MAAAA,aAAa,EAAE,IAJyB;AAKxCO,MAAAA,gBAAgB,EAAE,KAAK,CALiB;AAMxCC,MAAAA,aAAa,EAAE,MANyB;AAOxCC,MAAAA,QAAQ,EAAE,KAP8B;AAQxCC,MAAAA,kBAAkB,EAAE,IARoB;AASxCC,MAAAA,aAAa,EAAE,IATyB;AAUxCC,MAAAA,gBAAgB,EAAE,IAVsB;AAWxCC,MAAAA,WAAW,EAAE,GAX2B;AAYxCC,MAAAA,eAAe,EAAE,IAZuB;AAaxCC,MAAAA,0BAA0B,EAAE,IAbY;AAcxCC,MAAAA,mBAAmB,EAAE,IAdmB;AAexCC,MAAAA,gBAAgB,EAAE,IAfsB;AAgBxCC,MAAAA,gBAAgB,EAAE,KAhBsB;AAiBxCC,MAAAA,YAAY,EAAE,GAjB0B;AAkBxCC,MAAAA,YAAY,EAAE5F,SAAS,CAAC8D,OAAV,CAAkB+B,MAAlB,CAAyB,qBAAzB,CAlB0B;AAmBxCC,MAAAA,eAAe,EAAE9F,SAAS,CAAC8D,OAAV,CAAkBiC,YAAlB,CAA+B,wBAA/B,CAnBuB;AAoBxCC,MAAAA,qBAAqB,EAAE,KApBiB;AAqBxCC,MAAAA,KAAK,EAAE,KAAK,CArB4B;AAsBxCC,MAAAA,gBAAgB,EAAE,KAtBsB;AAuBxCC,MAAAA,eAAe,EAAE,KAAK,CAvBkB;AAwBxCC,MAAAA,WAAW,EAAE,KAAK;AAxBsB,KAArC,CAAP;AA0BH,GAzC2B;AA0C5BC,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,WAAO,KAAKpC,QAAL,GAAgBqC,MAAhB,CAAuB,CAAC;AAC3BC,MAAAA,MAAM,EAAE,kBAAW;AACf,eAAOrF,QAAQ,CAAC4C,OAAT,CAAiB0C,UAAjB,EAAP;AACH,OAH0B;AAI3BjC,MAAAA,OAAO,EAAE;AACLiB,QAAAA,mBAAmB,EAAE,KADhB;AAELR,QAAAA,aAAa,EAAE;AAFV;AAJkB,KAAD,CAAvB,CAAP;AASH,GApD2B;AAqD5ByB,EAAAA,sBAAsB,EAAE,kCAAW;AAC/B,SAAKxC,QAAL;AACA,KAAC,GAAGvE,OAAO,CAACiF,MAAZ,EAAoB,KAAK+B,mBAAzB,EAA8C;AAC1C7B,MAAAA,QAAQ,EAAE,IADgC;AAE1CsB,MAAAA,eAAe,EAAE;AAFyB,KAA9C;AAIH,GA3D2B;AA4D5BQ,EAAAA,YAAY,EAAE,sBAASC,QAAT,EAAmB;AAC7B,QAAIC,KAAK,GAAG,CAAZ;AACA,QAAIC,WAAW,GAAG,IAAlB;AACA,QAAIC,KAAJ;;AACA,WAAOD,WAAP,EAAoB;AAChBC,MAAAA,KAAK,GAAGH,QAAQ,CAACI,IAAT,CAAc,MAAM1D,yBAAN,GAAkCuD,KAAhD,CAAR;;AACA,UAAI,CAACE,KAAK,CAACrE,MAAX,EAAmB;AACfoE,QAAAA,WAAW,GAAG,KAAd;AACH,OAFD,MAEO;AACHD,QAAAA,KAAK;AACR;AACJ;;AACD,WAAOA,KAAP;AACH,GAzE2B;AA0E5BI,EAAAA,oBAAoB,EAAE,8BAASC,iBAAT,EAA4B;AAC9C,SAAKC,eAAL,GAAuB,CAAC,GAAGrI,UAAU,CAACgF,OAAf,EAAwB,OAAxB,EAAiCsD,QAAjC,CAA0C1D,YAA1C,EAAwD0D,QAAxD,CAAiElE,kBAAjE,EAAqFmE,QAArF,CAA8F,MAA9F,CAAvB;;AACA,QAAIC,YAAY,GAAGJ,iBAAiB,CAACK,YAAlB,CAA+B;AAC9CC,MAAAA,IAAI,EAAE,GADwC;AAE9CC,MAAAA,QAAQ,EAAE,KAAKC,cAAL;AAFoC,KAA/B,EAGhBL,QAHgB,CAGP,KAAKF,eAHE,CAAnB;;AAIA,SAAKQ,gBAAL,GAAwBL,YAAY,CAACN,IAAb,CAAkB,MAAMnE,2BAAxB,EAAqD,CAArD,CAAxB;AACH,GAjF2B;AAkF5B+E,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,SAAKT,eAAL,CAAqBU,MAArB;;AACA,SAAKF,gBAAL,GAAwB,IAAxB;AACH,GArF2B;AAsF5BG,EAAAA,oBAAoB,EAAE,8BAASN,IAAT,EAAe;AACjC,SAAKG,gBAAL,CAAsBI,SAAtB,GAAkCP,IAAlC;AACA,WAAO,KAAKG,gBAAL,CAAsBK,WAA7B;AACH,GAzF2B;AA0F5BC,EAAAA,uBAAuB,EAAE,iCAASpB,KAAT,EAAgBtC,OAAhB,EAAyB;AAC9CA,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,QAAI2D,cAAc,GAAG3D,OAAO,CAAC4D,WAAR,GAAsBvF,gBAAtB,GAAyCU,yBAAyB,GAAGuD,KAA1F;AACA,QAAIuB,wBAAwB,GAAG7D,OAAO,CAAC8D,aAAR,GAAwB,WAAWhF,oBAAX,GAAkC,GAA1D,GAAgE,EAA/F;AACA,QAAIiF,yBAAyB,GAAG,QAAQnF,sBAAR,GAAiC,MAAjC,GAA0CC,8BAA1E;AACA,WAAO,MAAM8E,cAAN,GAAuBE,wBAAvB,GAAkDE,yBAAzD;AACH,GAhG2B;AAiG5BC,EAAAA,aAAa,EAAE,uBAASC,SAAT,EAAoB;AAC/B,QAAI9F,MAAM,GAAG8F,SAAS,CAACC,QAAV,CAAmB/F,MAAhC;AACA,QAAIgG,KAAJ;AACA,QAAIC,MAAM,GAAG,EAAb;AACA,QAAInG,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGE,MAAhB,EAAwBF,CAAC,EAAzB,EAA6B;AACzBkG,MAAAA,KAAK,GAAGF,SAAS,CAACC,QAAV,CAAmBjG,CAAnB,CAAR;AACAmG,MAAAA,MAAM,IAAI,CAAC,CAAC,GAAGhJ,OAAO,CAACiJ,OAAZ,EAAqBF,KAAK,CAACG,SAA3B,CAAD,GAAyCH,KAAK,CAACG,SAA/C,GAA2DH,KAAK,CAACX,SAA3E;AACH;;AACD,WAAOY,MAAP;AACH,GA3G2B;AA4G5BG,EAAAA,sBAAsB,EAAE,gCAASC,UAAT,EAAqBlC,KAArB,EAA4BtC,OAA5B,EAAqC;AACzD,QAAIyE,WAAW,GAAGD,UAAU,CAAC/B,IAAX,CAAgB,KAAKiB,uBAAL,CAA6BpB,KAA7B,EAAoCtC,OAApC,CAAhB,CAAlB;AACA,QAAI0E,iBAAiB,GAAGD,WAAW,CAACtG,MAApC;AACA,QAAIwG,UAAJ;AACA,QAAI1G,CAAJ;AACA,QAAI2G,QAAQ,GAAG,CAAf;;AACA,SAAK3G,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGyG,iBAAhB,EAAmCzG,CAAC,EAApC,EAAwC;AACpC0G,MAAAA,UAAU,GAAG,KAAKpB,oBAAL,CAA0B,KAAKS,aAAL,CAAmBS,WAAW,CAACxG,CAAD,CAA9B,CAA1B,CAAb;;AACA,UAAI0G,UAAU,GAAGC,QAAjB,EAA2B;AACvBA,QAAAA,QAAQ,GAAGD,UAAX;AACH;AACJ;;AACD,SAAK1G,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGyG,iBAAhB,EAAmCzG,CAAC,EAApC,EAAwC;AACpCwG,MAAAA,WAAW,CAACxG,CAAD,CAAX,CAAe4G,KAAf,CAAqBC,KAArB,GAA6BF,QAAQ,GAAG,IAAxC;AACH;AACJ,GA3H2B;AA4H5BG,EAAAA,iBAAiB,EAAE,2BAASP,UAAT,EAAqBV,aAArB,EAAoCF,WAApC,EAAiDrD,QAAjD,EAA2D;AAC1EA,IAAAA,QAAQ,GAAGqD,WAAW,GAAG,CAAH,GAAOrD,QAAQ,IAAI,KAAK6B,YAAL,CAAkBoC,UAAlB,CAAzC;AACA,QAAIQ,kBAAkB,GAAG;AACrBlB,MAAAA,aAAa,EAAEA,aADM;AAErBF,MAAAA,WAAW,EAAEA;AAFQ,KAAzB;AAIA,QAAI3F,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGsC,QAAhB,EAA0BtC,CAAC,EAA3B,EAA+B;AAC3B,WAAKsG,sBAAL,CAA4BC,UAA5B,EAAwCvG,CAAxC,EAA2C+G,kBAA3C;AACH;AACJ,GAtI2B;AAuI5BC,EAAAA,yBAAyB,EAAE,mCAAST,UAAT,EAAqBU,WAArB,EAAkC3E,QAAlC,EAA4C;AACnE,QAAI4E,mBAAmB,GAAG,CAAC,GAAGnK,KAAK,CAACoK,SAAV,EAAqB7E,QAArB,IAAiC,MAAMvB,qBAAN,GAA8BuB,QAA/D,GAA0E,EAApG;AACA,QAAI8E,aAAa,GAAG,MAAMtG,yBAAN,GAAkCmG,WAAlC,GAAgD,MAAhD,GAAyDjG,wBAAzD,GAAoF,MAApF,GAA6FV,gBAA7F,GAAgH4G,mBAApI;AACA,WAAOX,UAAU,CAAC/B,IAAX,CAAgB4C,aAAhB,CAAP;AACH,GA3I2B;AA4I5BC,EAAAA,2BAA2B,EAAE,qCAASd,UAAT,EAAqBjE,QAArB,EAA+BuD,aAA/B,EAA8C;AACvE,QAAI9C,0BAA0B,GAAG,KAAKuE,MAAL,CAAY,4BAAZ,CAAjC;;AACA,QAAIvE,0BAAJ,EAAgC;AAC5B,WAAKwE,iCAAL,CAAuChB,UAAvC,EAAmDjE,QAAnD,EAA6DuD,aAA7D;AACH,KAFD,MAEO;AACH,UAAI2B,OAAO,GAAG,KAAKpD,QAAL,GAAgBI,IAAhB,CAAqB,MAAMlE,gBAA3B,CAAd;AACA,UAAIN,CAAJ;;AACA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwH,OAAO,CAACtH,MAAxB,EAAgCF,CAAC,EAAjC,EAAqC;AACjC,aAAK8G,iBAAL,CAAuBU,OAAO,CAACC,EAAR,CAAWzH,CAAX,CAAvB,EAAsC6F,aAAtC;AACH;AACJ;AACJ,GAvJ2B;AAwJ5B0B,EAAAA,iCAAiC,EAAE,2CAAShB,UAAT,EAAqBjE,QAArB,EAA+BuD,aAA/B,EAA8C;AAC7E,QAAIkB,kBAAkB,GAAG;AACrBlB,MAAAA,aAAa,EAAEA;AADM,KAAzB;AAGA,QAAI6B,QAAJ;AACA,QAAIC,cAAJ;AACA,QAAIC,aAAJ;AACA,QAAIC,YAAJ;;AACA,SAAKH,QAAQ,GAAG,CAAhB,EAAmBA,QAAQ,GAAGpF,QAA9B,EAAwCoF,QAAQ,EAAhD,EAAoD;AAChDG,MAAAA,YAAY,GAAG,KAAKb,yBAAL,CAA+BT,UAA/B,EAA2CmB,QAA3C,CAAf;;AACA,WAAKpB,sBAAL,CAA4BuB,YAA5B,EAA0C,CAA1C,EAA6Cd,kBAA7C;;AACA,WAAKY,cAAc,GAAG,CAAtB,EAAyBA,cAAc,GAAG,KAAK/F,eAAL,CAAqB1B,MAA/D,EAAuEyH,cAAc,EAArF,EAAyF;AACrFE,QAAAA,YAAY,GAAG,KAAKb,yBAAL,CAA+BT,UAA/B,EAA2CmB,QAA3C,EAAqD,KAAK9F,eAAL,CAAqB+F,cAArB,CAArD,CAAf;;AACA,YAAIG,aAAa,GAAG,KAAK3D,YAAL,CAAkB0D,YAAlB,CAApB;;AACA,aAAKD,aAAa,GAAG,CAArB,EAAwBA,aAAa,GAAGE,aAAxC,EAAuDF,aAAa,EAApE,EAAwE;AACpE,eAAKtB,sBAAL,CAA4BuB,YAA5B,EAA0CD,aAA1C,EAAyDb,kBAAzD;AACH;AACJ;AACJ;AACJ,GA3K2B;AA4K5B7B,EAAAA,cAAc,EAAE,0BAAW;AACvB,WAAO,KAAKoC,MAAL,CAAY,eAAZ,CAAP;AACH,GA9K2B;AA+K5BS,EAAAA,oBAAoB,EAAE,8BAASC,IAAT,EAAe;AACjC,QAAIC,aAAa,GAAGD,IAAI,CAACC,aAAzB;AAAA,QACItC,WAAW,GAAGqC,IAAI,CAACrC,WADvB;AAAA,QAEIY,UAAU,GAAGyB,IAAI,CAACzB,UAFtB;AAAA,QAGIV,aAAa,GAAGmC,IAAI,CAACnC,aAHzB;AAAA,QAIIpC,KAAK,GAAGuE,IAAI,CAACvE,KAJjB;;AAKA,QAAI,CAAC,CAAC,GAAG5F,OAAO,CAACqK,SAAZ,GAAD,IAA6B,UAAU,KAAKhD,cAAL,EAA3C,EAAkE;AAC9D;AACH;;AACD,SAAKT,oBAAL,CAA0BwD,aAA1B;;AACA,QAAItC,WAAJ,EAAiB;AACb,WAAKmB,iBAAL,CAAuBP,UAAvB,EAAmCV,aAAnC,EAAkD,IAAlD;AACH,KAFD,MAEO;AACH,UAAI,KAAKsC,cAAL,CAAoB1E,KAApB,CAAJ,EAAgC;AAC5B,aAAK4D,2BAAL,CAAiCd,UAAjC,EAA6C0B,aAAa,CAAC9D,YAAd,EAA7C,EAA2E0B,aAA3E;AACH,OAFD,MAEO;AACH,aAAKiB,iBAAL,CAAuBP,UAAvB,EAAmCV,aAAnC,EAAkD,KAAlD,EAAyDoC,aAAa,CAAC9D,YAAd,EAAzD;AACH;AACJ;;AACD,SAAKiB,oBAAL;AACH,GAnM2B;AAoM5BgD,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,QAAI,CAAC,CAAC,GAAGrL,KAAK,CAACoK,SAAV,EAAqB,KAAKG,MAAL,CAAY,UAAZ,CAArB,CAAL,EAAoD;AAChD,WAAKA,MAAL,CAAY,UAAZ,EAAwB,EAAxB;AACH;AACJ,GAxM2B;AAyM5Be,EAAAA,WAAW,EAAE,uBAAW;AACpBtK,IAAAA,mBAAmB,CAACuD,OAApB,CAA4BgH,QAA5B,CAAqC,KAAKC,mBAAL,EAArC;;AACA,SAAKC,qBAAL;;AACA,SAAKJ,gBAAL;;AACA,SAAKhE,QAAL,GAAgBQ,QAAhB,CAAyBzE,UAAzB;AACA,SAAKsB,QAAL;AACA,SAAKgH,OAAL,CAAa,MAAb,EAAqB,MAArB,EAA6B,KAAKrE,QAAL,EAA7B;;AACA,QAAI,KAAKkD,MAAL,CAAY,kBAAZ,CAAJ,EAAqC;AACjC,WAAKoB,iBAAL;AACH;;AACD,SAAKC,aAAL;;AACA,SAAKC,wBAAL;;AACA,SAAKC,uBAAL,GAA+B,KAAKC,mBAAL,IAA4B,KAAKC,uBAAL,EAA3D;AACH,GAtN2B;AAuN5BA,EAAAA,uBAAuB,EAAE,mCAAW;AAChC,WAAO,CAAC,GAAGlL,OAAO,CAACqK,SAAZ,MAA2B,CAAC,GAAGrK,OAAO,CAACmL,sBAAZ,EAAoC,KAAK1B,MAAL,CAAY,eAAZ,CAApC,CAA3B,GAA+F,IAAtG;AACH,GAzN2B;AA0N5BkB,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,SAAK7G,iBAAL,CAAuBsH,KAAvB;;AACA,SAAKC,qBAAL,GAA6B,EAA7B;AACH,GA7N2B;AA8N5BC,EAAAA,YAAY,EAAE,sBAASlB,aAAT,EAAwBtC,WAAxB,EAAqC;AAC/C,SAAKoC,oBAAL,CAA0B;AACtBxB,MAAAA,UAAU,EAAE,KAAKnC,QAAL,EADU;AAEtB6D,MAAAA,aAAa,EAAEA,aAFO;AAGtBpC,MAAAA,aAAa,EAAE,IAHO;AAItBpC,MAAAA,KAAK,EAAE,KAAK6D,MAAL,CAAY,OAAZ,CAJe;AAKtB3B,MAAAA,WAAW,EAAEA;AALS,KAA1B;AAOH,GAtO2B;AAuO5ByD,EAAAA,MAAM,EAAE,kBAAW;AACf,SAAK3H,QAAL;AACA,SAAKG,eAAL,GAAuB,EAAvB;AACA,SAAKF,sBAAL,GAA8B,EAA9B;AACA,SAAKmH,uBAAL,GAA+B,KAAK,CAApC;AACH,GA5O2B;AA6O5BH,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAIW,kBAAkB,GAAG,KAAK/B,MAAL,CAAY,oBAAZ,CAAzB;AACA,SAAKgC,WAAL,GAAmB,IAAI/K,IAAI,CAAC+C,OAAT,CAAiB,KAAK8C,QAAL,EAAjB,EAAkC;AACjDmF,MAAAA,SAAS,EAAE,CAAC,CAACF,kBADoC;AAEjDG,MAAAA,qBAAqB,EAAE,CAACH,kBAFyB;AAGjDI,MAAAA,WAAW,EAAE,KAHoC;AAIjDC,MAAAA,SAAS,EAAE,MAJsC;AAKjDC,MAAAA,aAAa,EAAE;AALkC,KAAlC,CAAnB;AAOH,GAtP2B;AAuP5BC,EAAAA,WAAW,EAAE,uBAAW;AACpB,WAAO,KAAKtC,MAAL,CAAY,kBAAZ,IAAkC,KAAKgC,WAAL,CAAiBO,QAAjB,EAAlC,GAAgE,KAAKzF,QAAL,EAAvE;AACH,GAzP2B;AA0P5BwE,EAAAA,wBAAwB,EAAE,oCAAW;AACjC,QAAIkB,kBAAkB,GAAG,KAAK1F,QAAL,GAAgBI,IAAhB,CAAqB,MAAMvD,uBAA3B,CAAzB;;AACA,QAAI6I,kBAAkB,CAAC5J,MAAnB,GAA4B,CAAhC,EAAmC;AAC/B4J,MAAAA,kBAAkB,CAACzE,MAAnB;AACH;;AACD,QAAI,KAAKiC,MAAL,CAAY,uBAAZ,CAAJ,EAA0C;AACtC,UAAIyC,mBAAmB,GAAG,CAAC,GAAGzN,UAAU,CAACgF,OAAf,EAAwB,OAAxB,EAAiCsD,QAAjC,CAA0C3D,uBAA1C,EAAmE4D,QAAnE,CAA4E,KAAK+E,WAAL,EAA5E,CAA1B;;AACA,WAAKI,kBAAL,GAA0BD,mBAAmB,CAACE,mBAApB,CAAwC;AAC9DtG,QAAAA,eAAe,EAAE,KAAK4E,mBAAL;AAD6C,OAAxC,EAEvB0B,mBAFuB,CAEH,UAFG,CAA1B;AAGH;AACJ,GArQ2B;AAsQ5BC,EAAAA,aAAa,EAAE,uBAASzG,KAAT,EAAgB0G,kBAAhB,EAAoCC,WAApC,EAAiDC,MAAjD,EAAyD;AACpE,QAAI5G,KAAJ,EAAW;AACP,UAAI0C,MAAM,GAAG,EAAb;;AACA,WAAK,IAAInG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyD,KAAK,CAACvD,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;AACnC,YAAIsK,IAAI,GAAG7G,KAAK,CAACzD,CAAD,CAAhB;AACA,YAAIuK,IAAI,GAAG,CAAC,GAAG1L,QAAQ,CAAC2L,WAAb,EAA0BJ,WAA1B,EAAuC,CAAC,GAAGvL,QAAQ,CAAC4L,qBAAb,EAAoCzK,CAApC,EAAuCqK,MAAvC,CAAvC,CAAX;;AACA,YAAIK,IAAI,GAAG,KAAK/I,iBAAL,CAAuBgJ,GAAvB,CAA2B;AAClCL,UAAAA,IAAI,EAAEA,IAD4B;AAElCM,UAAAA,SAAS,EAAE5K,CAFuB;AAGlCuK,UAAAA,IAAI,EAAEA;AAH4B,SAA3B,CAAX;;AAKA,YAAI,CAAC,GAAGxN,KAAK,CAAC8N,QAAV,EAAoBP,IAApB,CAAJ,EAA+B;AAC3BA,UAAAA,IAAI,GAAG;AACHQ,YAAAA,SAAS,EAAER;AADR,WAAP;AAGH;;AACD,YAAI,CAAC,GAAGvN,KAAK,CAACgO,QAAV,EAAoBT,IAApB,CAAJ,EAA+B;AAC3B,cAAIU,QAAQ,GAAG,CAAC,GAAG9N,OAAO,CAACiF,MAAZ,EAAoB,EAApB,EAAwBmI,IAAxB,CAAf;AACAU,UAAAA,QAAQ,CAACN,IAAT,GAAgBA,IAAhB;;AACA,eAAKO,oBAAL,CAA0BD,QAA1B;;AACA,eAAKE,qBAAL,CAA2BF,QAA3B,EAAqCT,IAArC;;AACA,eAAKY,uBAAL,CAA6BH,QAA7B;;AACA,cAAIb,kBAAJ,EAAwB;AACpBa,YAAAA,QAAQ,CAACI,YAAT,GAAwBvK,oBAAxB;AACH;;AACD,cAAImK,QAAQ,CAACvH,KAAb,EAAoB;AAChBuH,YAAAA,QAAQ,CAACvH,KAAT,GAAiB,KAAKyG,aAAL,CAAmBc,QAAQ,CAACvH,KAA5B,EAAmC0G,kBAAnC,EAAuDI,IAAvD,CAAjB;AACH;;AACDpE,UAAAA,MAAM,CAACkF,IAAP,CAAYL,QAAZ;AACH,SAbD,MAaO;AACH7E,UAAAA,MAAM,CAACkF,IAAP,CAAYf,IAAZ;AACH;AACJ;;AACD,aAAOnE,MAAP;AACH;AACJ,GAzS2B;AA0S5B8E,EAAAA,oBAAoB,EAAE,8BAASX,IAAT,EAAe;AACjC,QAAI,YAAYA,IAAI,CAACgB,QAArB,EAA+B;AAC3BhB,MAAAA,IAAI,CAACxH,eAAL,GAAuB,CAAC,GAAGhG,OAAO,CAACyO,aAAZ,EAA2BjB,IAAI,CAACxH,eAAhC,EAAiD,IAAjD,CAAvB;;AACA,UAAIwH,IAAI,CAACkB,QAAT,EAAmB;AACflB,QAAAA,IAAI,CAACmB,oBAAL,GAA4B,KAAKC,YAAL,CAAkBpB,IAAI,CAACkB,QAAvB,CAA5B;AACH;;AACDlB,MAAAA,IAAI,CAACkB,QAAL,GAAgB,KAAKG,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,EAAmCtB,IAAnC,CAAhB;AACH;AACJ,GAlT2B;AAmT5BY,EAAAA,qBAAqB,EAAE,+BAASZ,IAAT,EAAeC,IAAf,EAAqB;AACxC,QAAI,aAAaD,IAAI,CAACgB,QAAtB,EAAgC;AAC5BhB,MAAAA,IAAI,CAACkB,QAAL,GAAgB,KAAKK,mBAAL,CAAyBD,IAAzB,CAA8B,IAA9B,EAAoCtB,IAApC,CAAhB;AACAA,MAAAA,IAAI,CAACwB,IAAL,GAAY,KAAK5B,aAAL,CAAmBI,IAAI,CAACwB,IAAxB,EAA8B,IAA9B,EAAoCvB,IAApC,EAA0C,IAA1C,CAAZ;AACH;AACJ,GAxT2B;AAyT5BY,EAAAA,uBAAuB,EAAE,iCAASb,IAAT,EAAe;AACpC,QAAIA,IAAI,CAACkB,QAAT,EAAmB;AACflB,MAAAA,IAAI,CAACkB,QAAL,GAAgB,KAAKE,YAAL,CAAkBpB,IAAI,CAACkB,QAAvB,CAAhB;AACH;AACJ,GA7T2B;AA8T5BrD,EAAAA,cAAc,EAAE,wBAAS1E,KAAT,EAAgB;AAC5B,QAAIA,KAAJ,EAAW;AACP,WAAK,IAAIzD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyD,KAAK,CAACvD,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;AACnC,YAAIsK,IAAI,GAAG7G,KAAK,CAACzD,CAAD,CAAhB;;AACA,YAAI,YAAYsK,IAAI,CAACgB,QAArB,EAA+B;AAC3B,iBAAO,IAAP;AACH;AACJ;AACJ;AACJ,GAvU2B;AAwU5B3C,EAAAA,aAAa,EAAE,yBAAW;AACtB,QAAIoD,IAAI,GAAG,IAAX;AACA,QAAItI,KAAK,GAAGsI,IAAI,CAACzE,MAAL,CAAY,OAAZ,CAAZ;;AACA,QAAIuC,QAAQ,GAAGkC,IAAI,CAACnC,WAAL,EAAf;;AACAnG,IAAAA,KAAK,GAAGsI,IAAI,CAAC7B,aAAL,CAAmBzG,KAAnB,CAAR;AACAsI,IAAAA,IAAI,CAACC,kBAAL,GAA0BD,IAAI,CAACE,oBAAL,CAA0BxI,KAA1B,EAAiCoG,QAAjC,EAA2C;AACjEvH,MAAAA,QAAQ,EAAEyJ,IAAI,CAACzE,MAAL,CAAY,UAAZ,CADuD;AAEjExE,MAAAA,eAAe,EAAEiJ,IAAI,CAACzE,MAAL,CAAY,iBAAZ,CAFgD;AAGjEtF,MAAAA,aAAa,EAAE,KAAKsF,MAAL,CAAY,eAAZ,CAHkD;AAIjE/E,MAAAA,gBAAgB,EAAE,KAAK+E,MAAL,CAAY,kBAAZ,CAJ+C;AAKjE4E,MAAAA,eAAe,EAAE,yBAASvG,WAAT,EAAsB;AACnCoG,QAAAA,IAAI,CAAC5C,YAAL,CAAkByC,IAAlB,CAAuBG,IAAvB,EAA6BA,IAAI,CAACC,kBAAlC,EAAsDrG,WAAtD;AACH,OAPgE;AAQjEwG,MAAAA,cAAc,EAAE,wBAASC,CAAT,EAAY;AACxBL,QAAAA,IAAI,CAAC5C,YAAL,CAAkBiD,CAAC,CAACC,SAApB,EAA+BD,CAAC,CAACC,SAAF,CAAYC,kBAAZ,EAA/B;AACH;AAVgE,KAA3C,CAA1B;AAYH,GAzV2B;AA0V5BC,EAAAA,uBAAuB,EAAE,iCAASjC,IAAT,EAAe;AACpC,WAAOA,IAAI,CAAC7G,KAAL,IAAc,EAArB;AACH,GA5V2B;AA6V5BoI,EAAAA,mBAAmB,EAAE,6BAASvB,IAAT,EAAe8B,CAAf,EAAkB7F,UAAlB,EAA8B;AAC/C,QAAIiG,KAAK,GAAG,IAAZ;;AACA,QAAIC,SAAS,GAAG,CAAC,GAAGnQ,UAAU,CAACgF,OAAf,EAAwB,OAAxB,EAAiCuD,QAAjC,CAA0C0B,UAA1C,CAAhB;AACA,QAAImG,eAAe,GAAG,CAAC,GAAGxP,OAAO,CAACiF,MAAZ,EAAoB,EAApB,EAAwBmI,IAAI,CAACoC,eAA7B,EAA8C;AAChEC,MAAAA,UAAU,EAAErC,IAAI,CAACwB,IAD+C;AAEhEc,MAAAA,cAAc,EAAE,wBAASC,IAAT,EAAe;AAC3B,eAAO,CAAC,GAAGvP,IAAI,CAACwP,iBAAT,EAA4BD,IAAI,CAACE,WAAjC,CAAP;AACH,OAJ+D;AAKhEC,MAAAA,YAAY,EAAE,sBAASC,QAAT,EAAmBb,CAAnB,EAAsBc,SAAtB,EAAiC;AAC3C,YAAI3G,UAAU,GAAG,CAAC,GAAGjK,UAAU,CAACgF,OAAf,EAAwB4L,SAAxB,CAAjB;AACA,YAAIpK,eAAe,GAAG,CAAC,GAAGhG,OAAO,CAACyO,aAAZ,EAA2B0B,QAAQ,CAACnK,eAApC,EAAqD,IAArD,CAAtB;;AACA,YAAImF,aAAa,GAAGuE,KAAK,CAACP,oBAAN,CAA2BO,KAAK,CAACD,uBAAN,CAA8BU,QAA9B,CAA3B,EAAoE1G,UAApE,EAAgF;AAChGjE,UAAAA,QAAQ,EAAE2K,QAAQ,CAAC3K,QAD6E;AAEhGQ,UAAAA,eAAe,EAAEA,eAF+E;AAGhGd,UAAAA,aAAa,EAAEwK,KAAK,CAAClF,MAAN,CAAa,eAAb,CAHiF;AAIhG/E,UAAAA,gBAAgB,EAAE0K,QAAQ,CAAC1K,gBAJqE;AAKhG6I,UAAAA,YAAY,EAAE6B,QAAQ,CAAC7B,YALyE;AAMhGc,UAAAA,eAAe,EAAE,yBAASvG,WAAT,EAAsB;AACnC6G,YAAAA,KAAK,CAACzE,oBAAN,CAA2B;AACvBxB,cAAAA,UAAU,EAAEA,UADW;AAEvB0B,cAAAA,aAAa,EAAEA,aAFQ;AAGvBxE,cAAAA,KAAK,EAAEwJ,QAAQ,CAACxJ,KAHO;AAIvBkC,cAAAA,WAAW,EAAEA;AAJU,aAA3B;AAMH;AAb+F,SAAhF,CAApB;;AAeA,YAAI6G,KAAK,CAAC7K,iBAAV,EAA6B;AACzB6K,UAAAA,KAAK,CAAC7K,iBAAN,CAAwBwL,0BAAxB,CAAmDF,QAAQ,CAACvC,IAA5D,EAAkE;AAC9DzC,YAAAA,aAAa,EAAEA;AAD+C,WAAlE;AAGH;;AACD,YAAInF,eAAJ,EAAqB;AACjB0J,UAAAA,KAAK,CAACzE,oBAAN,CAA2B;AACvBxB,YAAAA,UAAU,EAAEA,UADW;AAEvB0B,YAAAA,aAAa,EAAEA,aAFQ;AAGvBxE,YAAAA,KAAK,EAAEwJ,QAAQ,CAACxJ,KAHO;AAIvBkC,YAAAA,WAAW,EAAEsC,aAAa,CAACqE,kBAAd;AAJU,WAA3B;AAMH;AACJ;AApC+D,KAA9C,CAAtB;;AAsCA,QAAIc,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAS3J,KAAT,EAAgB4J,QAAhB,EAA0B;AACtD,UAAIxN,KAAK,CAACE,OAAN,CAAc0D,KAAd,CAAJ,EAA0B;AACtBA,QAAAA,KAAK,CAAC6J,OAAN,CAAc,UAAShD,IAAT,EAAe;AACzB,iBAAOkC,KAAK,CAAC7K,iBAAN,CAAwBwL,0BAAxB,CAAmD7C,IAAI,CAACI,IAAxD,EAA8D;AACjE6C,YAAAA,cAAc,EAAEF;AADiD,WAA9D,CAAP;AAGH,SAJD;AAKH;AACJ,KARD;;AASA,QAAIG,QAAQ,GAAG,KAAKC,gBAAL,CAAsBhB,SAAtB,EAAiCpO,WAAW,CAACiD,OAA7C,EAAsDoL,eAAtD,CAAf;;AACAc,IAAAA,QAAQ,CAACE,EAAT,CAAY,eAAZ,EAA6B,UAAStB,CAAT,EAAY;AACrC,UAAI,iBAAiBA,CAAC,CAACuB,QAAvB,EAAiC;AAC7BP,QAAAA,yBAAyB,CAAChB,CAAC,CAACwB,KAAH,EAAUxB,CAAC,CAACC,SAAZ,CAAzB;AACH;AACJ,KAJD;AAKAe,IAAAA,yBAAyB,CAAC,CAAC;AACvB1C,MAAAA,IAAI,EAAEJ,IAAI,CAACI;AADY,KAAD,EAEvB5G,MAFuB,CAEhB9E,kBAAkB,CAACsL,IAAI,CAACwB,IAAN,CAFF,CAAD,EAEiB0B,QAFjB,CAAzB;AAGH,GAxZ2B;AAyZ5B7B,EAAAA,kBAAkB,EAAE,4BAASrB,IAAT,EAAe8B,CAAf,EAAkB7F,UAAlB,EAA8B;AAC9C,QAAIsH,MAAM,GAAG,CAAC,GAAGvR,UAAU,CAACgF,OAAf,EAAwB,OAAxB,EAAiCwM,WAAjC,CAA6CtN,6BAA7C,EAA4E,CAAC,GAAGzD,KAAK,CAACoK,SAAV,EAAqBmD,IAAI,CAACyD,OAA1B,KAAsCzD,IAAI,CAACyD,OAAL,CAAa7N,MAA/H,EAAuI0E,QAAvI,CAAgJtE,gBAAhJ,EAAkKuE,QAAlK,CAA2K0B,UAA3K,CAAb;AACA,QAAIyH,aAAJ;AACA,QAAI1L,QAAJ;AACA,QAAI2F,aAAJ;;AACA,QAAIqC,IAAI,CAACyD,OAAT,EAAkB;AACd,OAAC,GAAGzR,UAAU,CAACgF,OAAf,EAAwB,QAAxB,EAAkCsD,QAAlC,CAA2CnE,wBAA3C,EAAqEuE,IAArE,CAA0EsF,IAAI,CAACyD,OAA/E,EAAwFlJ,QAAxF,CAAiGgJ,MAAjG;AACH;;AACDG,IAAAA,aAAa,GAAG,CAAC,GAAG1R,UAAU,CAACgF,OAAf,EAAwB,OAAxB,EAAiCsD,QAAjC,CAA0CrE,wBAA1C,EAAoEsE,QAApE,CAA6EgJ,MAA7E,CAAhB;;AACA,QAAIvD,IAAI,CAACmB,oBAAT,EAA+B;AAC3B,UAAIwC,IAAI,GAAG;AACP5L,QAAAA,QAAQ,EAAE,KAAKiF,MAAL,CAAY,UAAZ,CADH;AAEP+E,QAAAA,SAAS,EAAE;AAFJ,OAAX;AAIA/B,MAAAA,IAAI,CAACmB,oBAAL,CAA0ByC,MAA1B,CAAiC;AAC7BC,QAAAA,KAAK,EAAEF,IADsB;AAE7Bf,QAAAA,SAAS,EAAE,CAAC,GAAG5P,IAAI,CAAC8Q,gBAAT,EAA2BJ,aAA3B;AAFkB,OAAjC;AAIH,KATD,MASO;AACH/F,MAAAA,aAAa,GAAG,KAAKgE,oBAAL,CAA0B,KAAKM,uBAAL,CAA6BjC,IAA7B,CAA1B,EAA8D0D,aAA9D,EAA6E;AACzF1L,QAAAA,QAAQ,EAAEgI,IAAI,CAAChI,QAD0E;AAEzFC,QAAAA,gBAAgB,EAAE+H,IAAI,CAAC/H,gBAFkE;AAGzFO,QAAAA,eAAe,EAAEwH,IAAI,CAACxH,eAHmE;AAIzFsI,QAAAA,YAAY,EAAEd,IAAI,CAACc;AAJsE,OAA7E,CAAhB;AAMA,WAAKzJ,iBAAL,IAA0B,KAAKA,iBAAL,CAAuBwL,0BAAvB,CAAkD7C,IAAI,CAACI,IAAvD,EAA6D;AACnFzC,QAAAA,aAAa,EAAEA;AADoE,OAA7D,CAA1B;AAGA3F,MAAAA,QAAQ,GAAG2F,aAAa,CAAC9D,YAAd,EAAX;;AACA,UAAI,CAAC,GAAGlH,MAAM,CAACoR,OAAX,EAAoB/L,QAApB,EAA8B,KAAKV,eAAnC,MAAwD,CAAC,CAA7D,EAAgE;AAC5D,aAAKA,eAAL,CAAqByJ,IAArB,CAA0B/I,QAA1B;AACH;;AACDuL,MAAAA,MAAM,CAACjJ,QAAP,CAAgB7D,qBAAqB,GAAGuB,QAAxC;AACH;AACJ,GA3b2B;AA4b5B2J,EAAAA,oBAAoB,EAAE,8BAASxI,KAAT,EAAgB6K,YAAhB,EAA8BvM,OAA9B,EAAuC;AACzD,QAAIqC,QAAQ,GAAG,CAAC,GAAG9H,UAAU,CAACgF,OAAf,EAAwB,OAAxB,CAAf;AACA,QAAIyK,IAAI,GAAG,IAAX;AACA,QAAIsB,QAAJ;;AACA,QAAIkB,MAAM,GAAGxC,IAAI,CAACyC,uBAAL,CAA6B/K,KAA7B,EAAoC1B,OAApC,CAAb;;AACA,QAAI0M,oBAAoB,GAAG;AACvBC,MAAAA,EAAE,EAAE3M,OAAO,CAACO,QADW;AAEvBqM,MAAAA,EAAE,EAAE5M,OAAO,CAACO,QAFW;AAGvBsM,MAAAA,EAAE,EAAE7M,OAAO,CAACO,QAHW;AAIvBuM,MAAAA,EAAE,EAAE;AAJmB,KAA3B;;AAMA9C,IAAAA,IAAI,CAACrK,sBAAL,CAA4B2J,IAA5B,CAAiC;AAC7B9I,MAAAA,gBAAgB,EAAE,CAAC,GAAGrF,OAAO,CAACiF,MAAZ,EAAoBsM,oBAApB,EAA0C1M,OAAO,CAACQ,gBAAlD;AADW,KAAjC;;AAGA6B,IAAAA,QAAQ,CAACS,QAAT,CAAkByJ,YAAlB;AACAjB,IAAAA,QAAQ,GAAGtB,IAAI,CAAC0B,gBAAL,CAAsBrJ,QAAtB,EAAgC,iBAAhC,EAAmDmK,MAAnD,CAAX;AACAlB,IAAAA,QAAQ,CAACK,EAAT,CAAY,qBAAZ,EAAmC,YAAW;AAC1C3B,MAAAA,IAAI,CAAC+C,QAAL;AACH,KAFD;;AAGA/C,IAAAA,IAAI,CAAC7C,qBAAL,CAA2BmC,IAA3B,CAAgCgC,QAAhC;;AACA,WAAOA,QAAP;AACH,GAjd2B;AAkd5B9E,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,WAAO,KAAKjB,MAAL,CAAY,iBAAZ,KAAkC,IAAzC;AACH,GApd2B;AAqd5BkH,EAAAA,uBAAuB,EAAE,iCAAS/K,KAAT,EAAgB1B,OAAhB,EAAyB;AAC9C,QAAIgN,MAAM,GAAG,IAAb;;AACA,QAAIC,UAAU,GAAG;AACbC,MAAAA,IAAI,EAAE,IADO;AAEbtL,MAAAA,eAAe,EAAE,KAAK4E,mBAAL,EAFJ;AAGbtF,MAAAA,gBAAgB,EAAE,KAAKqE,MAAL,CAAY,kBAAZ,CAHL;AAIbpE,MAAAA,gBAAgB,EAAE,KAAKoE,MAAL,CAAY,kBAAZ,CAJL;AAKbnE,MAAAA,YAAY,EAAE,KAAKmE,MAAL,CAAY,cAAZ,CALD;AAMblE,MAAAA,YAAY,EAAE,KAAKkE,MAAL,CAAY,cAAZ,CAND;AAObhE,MAAAA,eAAe,EAAE,KAAKgE,MAAL,CAAY,iBAAZ,CAPJ;AAQbtF,MAAAA,aAAa,EAAE,KAAKsF,MAAL,CAAY,eAAZ,CARF;AASb4H,MAAAA,UAAU,EAAE,KAAK5H,MAAL,CAAY,UAAZ,CATC;AAUb9E,MAAAA,aAAa,EAAE,KAAK8E,MAAL,CAAY,eAAZ,CAVF;AAWb3E,MAAAA,aAAa,EAAE,KAAK2E,MAAL,CAAY,eAAZ,CAXF;AAYbzE,MAAAA,WAAW,EAAE,KAAKyE,MAAL,CAAY,aAAZ,CAZA;AAabtE,MAAAA,mBAAmB,EAAE,KAAKsE,MAAL,CAAY,qBAAZ,CAbR;AAcb1E,MAAAA,gBAAgB,EAAE,KAAK0E,MAAL,CAAY,kBAAZ,CAdL;AAeb5E,MAAAA,kBAAkB,EAAE,4BAASmK,IAAT,EAAe;AAC/B,YAAI,CAACkC,MAAM,CAACI,eAAZ,EAA6B;AACzBJ,UAAAA,MAAM,CAACK,0BAAP,CAAkCvC,IAAlC;AACH;AACJ,OAnBY;AAoBbwC,MAAAA,kBAAkB,EAAE,KAAK/H,MAAL,CAAY,kBAAZ,IAAkC,KAAKlD,QAAL,EAAlC,GAAoD,KAAK;AApBhE,KAAjB;AAsBA,WAAO,CAAC,GAAGlH,OAAO,CAACiF,MAAZ,EAAoB6M,UAApB,EAAgC;AACnCvL,MAAAA,KAAK,EAAEA,KAD4B;AAEnC0I,MAAAA,cAAc,EAAE,wBAASU,IAAT,EAAe;AAC3BkC,QAAAA,MAAM,CAACpN,iBAAP,CAAyB2N,oBAAzB,CAA8CzC,IAAI,CAACR,SAAL,CAAe1K,iBAA7D;;AACAI,QAAAA,OAAO,CAACoK,cAAR,IAA0BpK,OAAO,CAACoK,cAAR,CAAuBU,IAAvB,CAA1B;AACH,OALkC;AAMnC0C,MAAAA,WAAW,EAAE,qBAASC,KAAT,EAAgB;AACzB,YAAInD,SAAS,GAAGmD,KAAK,CAACnD,SAAtB;AACA,YAAIoD,sBAAsB,GAAGpD,SAAS,CAACqD,mBAAV,EAA7B;;AACAX,QAAAA,MAAM,CAACpN,iBAAP,CAAyBgO,kBAAzB,CAA4CF,sBAA5C;AACH,OAVkC;AAWnCnN,MAAAA,QAAQ,EAAEP,OAAO,CAACO,QAXiB;AAYnCQ,MAAAA,eAAe,EAAEf,OAAO,CAACe,eAZU;AAanCsI,MAAAA,YAAY,EAAErJ,OAAO,CAACqJ,YAba;AAcnC7I,MAAAA,gBAAgB,EAAER,OAAO,CAACQ,gBAdS;AAenC2J,MAAAA,eAAe,EAAEnK,OAAO,CAACmK,eAfU;AAgBnCrF,MAAAA,KAAK,EAAE9E,OAAO,CAAC8E;AAhBoB,KAAhC,CAAP;AAkBH,GA/f2B;AAggB5B4G,EAAAA,gBAAgB,EAAE,0BAASrJ,QAAT,EAAmBwL,IAAnB,EAAyBrB,MAAzB,EAAiC;AAC/C,QAAIxC,IAAI,GAAG,IAAX;AACAwC,IAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;;AACAxC,IAAAA,IAAI,CAAC8D,aAAL,CAAmBtB,MAAnB,EAA2B;AACvB9L,MAAAA,QAAQ,EAAEsJ,IAAI,CAACzE,MAAL,CAAY,UAAZ;AADa,KAA3B;;AAGA,WAAOyE,IAAI,CAACtK,QAAL,CAAc2C,QAAd,EAAwBwL,IAAxB,EAA8BrB,MAA9B,CAAP;AACH,GAvgB2B;AAwgB5B1M,EAAAA,wBAAwB,EAAE,oCAAW;AACjC,QAAIkK,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC2B,EAAL,CAAQ,eAAR,EAAyB,UAASb,IAAT,EAAe;AACpC,UAAIiD,cAAc,GAAGjD,IAAI,CAACc,QAA1B;;AACA,UAAI,eAAemC,cAAnB,EAAmC;AAC/B,YAAI,CAAC,CAAC,GAAG/S,KAAK,CAACoK,SAAV,EAAqB0F,IAAI,CAACe,KAA1B,CAAL,EAAuC;AACnC7B,UAAAA,IAAI,CAACgE,QAAL,CAAc1N,QAAd,GAAyBwK,IAAI,CAACe,KAAL,GAAa,EAAtC;AACH;;AACD7B,QAAAA,IAAI,CAACiE,mCAAL,CAAyCnD,IAAI,CAACe,KAA9C;AACH;;AACD,UAAI7B,IAAI,CAAC7C,qBAAL,CAA2BhJ,MAA/B,EAAuC;AACnC,SAAC,GAAGlD,SAAS,CAACiT,IAAd,EAAoBlE,IAAI,CAAC7C,qBAAzB,EAAgD,UAAS7E,KAAT,EAAgB4D,aAAhB,EAA+B;AAC3E,cAAI,eAAe6H,cAAnB,EAAmC;AAC/B/D,YAAAA,IAAI,CAACoD,eAAL,GAAuB,IAAvB;AACAlH,YAAAA,aAAa,CAACX,MAAd,CAAqB,YAArB,EAAmCuF,IAAI,CAACe,KAAxC;AACA7B,YAAAA,IAAI,CAACoD,eAAL,GAAuB,KAAvB;AACH;;AACD,cAAI,eAAetC,IAAI,CAACqD,IAApB,IAA4B,eAAerD,IAAI,CAACqD,IAApD,EAA0D;AACtDjI,YAAAA,aAAa,CAACX,MAAd,CAAqBwI,cAArB,EAAqCjD,IAAI,CAACe,KAA1C;AACH;AACJ,SATD;AAUH;AACJ,KApBD;AAqBH,GA/hB2B;AAgiB5BuC,EAAAA,cAAc,EAAE,wBAAStD,IAAT,EAAe;AAC3B,QAAIuD,uBAAuB,GAAG,KAAKC,oCAAL,CAA0CxD,IAAI,CAACc,QAA/C,EAAyD,CAAC,UAAD,EAAa,OAAb,CAAzD,CAA9B;;AACA,QAAIyC,uBAAJ,EAA6B;AACzB,WAAKE,6BAAL,CAAmCzD,IAAnC,EAAyCuD,uBAAzC;;AACA;AACH;;AACD,YAAQvD,IAAI,CAACqD,IAAb;AACI,WAAK,UAAL;AACI,YAAI,CAAC,KAAK5I,MAAL,CAAY,OAAZ,CAAL,EAA2B;AACvB,eAAKiJ,WAAL;AACH,SAFD,MAEO;AACH,cAAI,CAAC,GAAGxT,KAAK,CAACyT,aAAV,EAAyB3D,IAAI,CAACe,KAA9B,CAAJ,EAA0C;AACtC,iBAAK6C,YAAL;AACH;AACJ;;AACD;;AACJ,WAAK,OAAL;AACA,WAAK,UAAL;AACA,WAAK,oBAAL;AACA,WAAK,kBAAL;AACA,WAAK,eAAL;AACA,WAAK,iBAAL;AACA,WAAK,qBAAL;AACA,WAAK,eAAL;AACA,WAAK,4BAAL;AACA,WAAK,kBAAL;AACA,WAAK,kBAAL;AACA,WAAK,cAAL;AACA,WAAK,cAAL;AACA,WAAK,iBAAL;AACA,WAAK,kBAAL;AACA,WAAK,QAAL;AACA,WAAK,kBAAL;AACA,WAAK,eAAL;AACA,WAAK,aAAL;AACI,aAAKF,WAAL;;AACA;;AACJ,WAAK,uBAAL;AACI,aAAK3H,wBAAL;;AACA;;AACJ,WAAK,aAAL;AACI,YAAI,WAAW,KAAKtB,MAAL,CAAY,UAAZ,CAAf,EAAwC;AACpC,eAAKiJ,WAAL;AACH;;AACD;;AACJ,WAAK,UAAL;AACI;;AACJ,WAAK,OAAL;AACI,aAAK9O,QAAL,CAAcoL,IAAd;;AACA,aAAKb,kBAAL,CAAwB1E,MAAxB,CAA+BuF,IAAI,CAACqD,IAApC,EAA0CrD,IAAI,CAACe,KAA/C;;AACA,aAAKzE,YAAL,CAAkB,KAAK6C,kBAAvB,EAA2C,KAAKA,kBAAL,CAAwBM,kBAAxB,EAA3C;;AACA;;AACJ,WAAK,SAAL;AACI,aAAK7K,QAAL,CAAcoL,IAAd;;AACA,YAAIA,IAAI,CAACe,KAAT,EAAgB;AACZ,WAAC,GAAGtQ,IAAI,CAACwP,iBAAT,EAA4B,KAAK1I,QAAL,EAA5B;AACH;;AACD;;AACJ,WAAK,iBAAL;AACIrG,QAAAA,mBAAmB,CAACuD,OAApB,CAA4BoP,WAA5B,CAAwC7D,IAAI,CAAC8D,aAAL,IAAsB,IAA9D;;AACA,aAAKJ,WAAL;;AACA;;AACJ;AACI,aAAK9O,QAAL,CAAcoL,IAAd;AAzDR;AA2DH,GAjmB2B;AAkmB5BwD,EAAAA,oCAAoC,EAAE,8CAASO,cAAT,EAAyBC,iBAAzB,EAA4C;AAC9E,QAAIC,aAAa,GAAGF,cAAc,CAACG,KAAf,CAAqB,GAArB,CAApB;AACA,QAAI5K,MAAJ;;AACA,QAAI2K,aAAa,CAAC5Q,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,UAAIF,CAAJ;AACA,UAAIgR,cAAc,GAAGF,aAAa,CAAC,CAAD,CAAlC;;AACA,WAAK9Q,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6Q,iBAAiB,CAAC3Q,MAAlC,EAA0CF,CAAC,EAA3C,EAA+C;AAC3C,YAAIgR,cAAc,CAACC,MAAf,CAAsBJ,iBAAiB,CAAC7Q,CAAD,CAAvC,MAAgD,CAAC,CAArD,EAAwD;AACpDmG,UAAAA,MAAM,GAAG0K,iBAAiB,CAAC7Q,CAAD,CAA1B;AACH;AACJ;AACJ;;AACD,WAAOmG,MAAP;AACH,GA/mB2B;AAgnB5B+K,EAAAA,0BAA0B,EAAE,oCAASC,UAAT,EAAqB7G,IAArB,EAA2BsD,KAA3B,EAAkC+C,aAAlC,EAAiDS,QAAjD,EAA2D;AACnF,QAAI,WAAWD,UAAf,EAA2B;AACvB,WAAKxP,iBAAL,CAAuB0P,0BAAvB,CAAkD,GAAGvN,MAAH,CAAUsN,QAAV,EAAoB,OAApB,CAAlD;;AACAxD,MAAAA,KAAK,GAAG,KAAK1D,aAAL,CAAmB0D,KAAnB,EAA0B,IAA1B,EAAgCwD,QAAhC,EAA0C,IAA1C,CAAR;AACH;;AACD,WAAO,CAAC,GAAGxS,QAAQ,CAAC0C,OAAb,EAAsB6P,UAAtB,EAAkC;AACrC7G,MAAAA,IAAI,EAAEA,IAD+B;AAErCsD,MAAAA,KAAK,EAAEA,KAF8B;AAGrC+C,MAAAA,aAAa,EAAEA,aAHsB;AAIrCW,MAAAA,gBAAgB,EAAE,KAAK3P;AAJc,KAAlC,CAAP;AAMH,GA3nB2B;AA4nB5B4P,EAAAA,2BAA2B,EAAE,qCAASC,MAAT,EAAiB;AAC1C,WAAOA,MAAM,IAAIA,MAAM,CAACC,UAAP,EAAjB;AACH,GA9nB2B;AA+nB5BC,EAAAA,wCAAwC,EAAE,kDAAS/D,QAAT,EAAmB;AACzD,QAAIwD,UAAU,GAAG,CAAC,GAAGtS,QAAQ,CAAC8S,yBAAb,EAAwChE,QAAxC,CAAjB;;AACA,QAAIvM,oCAAoC,CAACwQ,OAArC,CAA6CT,UAA7C,IAA2D,CAAC,CAAhE,EAAmE;AAC/DpT,MAAAA,mBAAmB,CAACuD,OAApB,CAA4BgH,QAA5B,CAAqC,KAAKC,mBAAL,EAArC;;AACA,UAAI,KAAKjB,MAAL,CAAY,uBAAZ,CAAJ,EAA0C;AACtC,aAAK0C,kBAAL,IAA2B,KAAKA,kBAAL,CAAwB6H,sBAAxB,EAA3B;AACH;AACJ;AACJ,GAvoB2B;AAwoB5BC,EAAAA,2BAA2B,EAAE,qCAAS7J,aAAT,EAAwBkJ,UAAxB,EAAoCvD,KAApC,EAA2CrD,IAA3C,EAAiD;AAC1E,QAAIwH,MAAM,GAAG,IAAb;;AACA,QAAI,KAAKC,gBAAL,GAAwB,CAA5B,EAA+B;AAC3B,OAAC/J,aAAa,CAAC+J,gBAAf,IAAmC/J,aAAa,CAACgK,WAAd,EAAnC;;AACA,UAAIC,GAAG,GAAG,KAAKvQ,iBAAL,CAAuBwQ,YAAvB,CAAoC5H,IAApC,CAAV;;AACA,WAAK6H,mBAAL,CAAyBzH,GAAzB,CAA6BuH,GAA7B,EAAkC,YAAW;AACzCjK,QAAAA,aAAa,CAACoK,SAAd;AACA,eAAQ,IAAI7T,SAAS,CAAC8T,QAAd,EAAD,CAAyBC,OAAzB,EAAP;AACH,OAHD;AAIH;;AACD,QAAIC,mBAAmB,GAAG,SAASA,mBAAT,CAA6BpG,CAA7B,EAAgC;AACtDA,MAAAA,CAAC,CAACC,SAAF,CAAYoG,GAAZ,CAAgB,cAAhB,EAAgCD,mBAAhC;;AACA,UAAI,CAAC,GAAG3T,QAAQ,CAAC6T,sBAAb,EAAqCnI,IAArC,CAAJ,EAAgD;AAC5C,YAAIoI,OAAO,GAAG,CAAC,GAAG9T,QAAQ,CAAC+T,aAAb,EAA4BrI,IAA5B,CAAd;;AACA,YAAIsI,gBAAgB,GAAGd,MAAM,CAACpQ,iBAAP,CAAyBmR,gCAAzB,CAA0DH,OAA1D,CAAvB;;AACAZ,QAAAA,MAAM,CAAChK,oBAAP,CAA4B;AACxBtE,UAAAA,KAAK,EAAEoP,gBAAgB,CAACvL,MAAjB,CAAwB,OAAxB,CADiB;AAExBW,UAAAA,aAAa,EAAE4K,gBAFS;AAGxBtM,UAAAA,UAAU,EAAEsM,gBAAgB,CAACzO,QAAjB,EAHY;AAIxBuB,UAAAA,WAAW,EAAEkN,gBAAgB,CAACvG,kBAAjB;AAJW,SAA5B;AAMH,OATD,MASO;AACHyF,QAAAA,MAAM,CAAC5I,YAAP,CAAoB4I,MAAM,CAAC/F,kBAA3B,EAA+C+F,MAAM,CAAC/F,kBAAP,CAA0BM,kBAA1B,EAA/C;AACH;AACJ,KAdD;;AAeArE,IAAAA,aAAa,CAACyF,EAAd,CAAiB,cAAjB,EAAiC8E,mBAAjC;AACAvK,IAAAA,aAAa,CAACX,MAAd,CAAqB6J,UAArB,EAAiCvD,KAAjC;;AACA,SAAK8D,wCAAL,CAA8CP,UAA9C;AACH,GApqB2B;AAqqB5B4B,EAAAA,iCAAiC,EAAE,2CAASpF,QAAT,EAAmBC,KAAnB,EAA0B;AACzD,QAAIoF,SAAS,GAAGrF,QAAQ,CAACoD,KAAT,CAAe,GAAf,CAAhB;AACA,QAAII,UAAU,GAAG,CAAC,GAAGtS,QAAQ,CAAC8S,yBAAb,EAAwChE,QAAxC,CAAjB;;AACA,QAAI,YAAYwD,UAAZ,IAA0B6B,SAAS,CAAC9S,MAAV,GAAmB,CAAjD,EAAoD;AAChD,UAAIkR,QAAQ,GAAG,KAAK6B,YAAL,CAAkBD,SAAlB,CAAf;;AACA,UAAI/K,aAAa,GAAG,KAAKtG,iBAAL,CAAuBmR,gCAAvB,CAAwD1B,QAAxD,CAApB;;AACA,UAAInJ,aAAJ,EAAmB;AACf,aAAKtG,iBAAL,CAAuBgO,kBAAvB,CAA0C1H,aAAa,CAACyH,mBAAd,EAA1C;;AACA,YAAIjM,KAAK,GAAG,KAAKyG,aAAL,CAAmB0D,KAAnB,EAA0B,KAA1B,EAAiCwD,QAAjC,CAAZ;;AACA,aAAKU,2BAAL,CAAiC7J,aAAjC,EAAgDkJ,UAAhD,EAA4D1N,KAA5D,EAAmE2N,QAAnE;;AACA,eAAO,IAAP;AACH;AACJ,KATD,MASO;AACH,UAAI4B,SAAS,CAAC9S,MAAV,GAAmB,CAAvB,EAA0B;AACtB,YAAIgT,YAAY,GAAGF,SAAS,CAAC9S,MAAV,GAAmB,CAAtC;;AACA,YAAIiT,SAAS,GAAG,KAAKF,YAAL,CAAkBD,SAAS,CAACI,KAAV,CAAgB,CAAhB,EAAmBF,YAAnB,CAAlB,CAAhB;;AACA,YAAIG,cAAc,GAAG,KAAK1R,iBAAL,CAAuBmR,gCAAvB,CAAwDK,SAAxD,CAArB;;AACA,YAAIE,cAAJ,EAAoB;AAChB,cAAIzC,cAAc,GAAG,CAAC,GAAG/R,QAAQ,CAACyU,iBAAb,EAAgCN,SAAS,CAACE,YAAD,CAAzC,EAAyD/B,UAAzD,CAArB;;AACA,eAAKW,2BAAL,CAAiCuB,cAAjC,EAAiDzC,cAAjD,EAAiEhD,KAAjE,EAAwEuF,SAAxE;;AACA,iBAAO,IAAP;AACH;AACJ;AACJ;;AACD,WAAO,KAAP;AACH,GA9rB2B;AA+rB5BI,EAAAA,kCAAkC,EAAE,4CAASnC,QAAT,EAAmBrP,OAAnB,EAA4B;AAC5D,QAAIyR,MAAM,GAAG,IAAb;;AACA,QAAIrN,MAAJ;AACA,SAAK8L,WAAL;AACA,KAAC,GAAGjV,SAAS,CAACiT,IAAd,EAAoBlO,OAApB,EAA6B,UAASoP,UAAT,EAAqBsC,WAArB,EAAkC;AAC3DtN,MAAAA,MAAM,GAAGqN,MAAM,CAACT,iCAAP,CAAyC,CAAC,GAAGlU,QAAQ,CAACyU,iBAAb,EAAgClC,QAAhC,EAA0CD,UAA1C,CAAzC,EAAgGsC,WAAhG,CAAT;;AACA,UAAI,CAACtN,MAAL,EAAa;AACT,eAAO,KAAP;AACH;AACJ,KALD;AAMA,SAAKkM,SAAL;AACA,WAAOlM,MAAP;AACH,GA3sB2B;AA4sB5BmK,EAAAA,6BAA6B,EAAE,uCAASzD,IAAT,EAAemE,cAAf,EAA+B;AAC1D,QAAIgC,SAAS,GAAGnG,IAAI,CAACc,QAAL,CAAcoD,KAAd,CAAoB,GAApB,CAAhB;AACA,QAAInD,KAAK,GAAGf,IAAI,CAACe,KAAjB;;AACA,QAAI,YAAYoD,cAAhB,EAAgC;AAC5B,UAAII,QAAQ,GAAG,KAAK6B,YAAL,CAAkBD,SAAlB,CAAf;;AACA,UAAI1I,IAAI,GAAG,KAAKhD,MAAL,CAAY8J,QAAZ,CAAX;AACA,UAAIsC,qBAAqB,GAAG7G,IAAI,CAACc,QAAL,CAAcgG,OAAd,CAAsBvC,QAAQ,GAAG,GAAjC,EAAsC,EAAtC,CAA5B;AACA,UAAIwC,gBAAgB,GAAGF,qBAAqB,CAAC3C,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,EAAoC4C,OAApC,CAA4C,QAA5C,EAAsD,EAAtD,CAAvB;;AACA,UAAIE,UAAU,GAAG,KAAK3C,0BAAL,CAAgC0C,gBAAhC,EAAkDtJ,IAAlD,EAAwDA,IAAI,CAACsJ,gBAAD,CAA5D,EAAgF/G,IAAI,CAAC8D,aAArF,EAAoGS,QAApG,CAAjB;;AACA,UAAI,CAAC,KAAKG,2BAAL,CAAiCsC,UAAjC,CAAD,IAAiD,CAAC,KAAKd,iCAAL,CAAuClG,IAAI,CAACc,QAA5C,EAAsDC,KAAtD,CAAtD,EAAoH;AAChH,YAAItD,IAAJ,EAAU;AACN,eAAKwJ,iBAAL,CAAuBxJ,IAAvB,EAA6BoJ,qBAA7B,EAAoD9F,KAApD;;AACA,cAAInK,KAAK,GAAG,KAAKsQ,sBAAL,CAA4B,KAAKzM,MAAL,CAAY,OAAZ,CAA5B,CAAZ;;AACA,eAAKA,MAAL,CAAY,OAAZ,EAAqB7D,KAArB;AACH;AACJ;AACJ;;AACD,QAAI,eAAeuN,cAAnB,EAAmC;AAC/B,UAAIlG,SAAS,GAAGkI,SAAS,CAACI,KAAV,CAAgB,CAAhB,EAAmBY,IAAnB,CAAwB,GAAxB,CAAhB;AACA,UAAIC,MAAM,GAAG,KAAKC,SAAL,CAAepJ,SAAf,CAAb;;AACA,UAAImJ,MAAJ,EAAY;AACRA,QAAAA,MAAM,CAAC3M,MAAP,CAAc,OAAd,EAAuBsG,KAAvB;AACH,OAFD,MAEO;AACH,aAAKwB,0BAAL,CAAgC;AAC5BtE,UAAAA,SAAS,EAAEA,SADiB;AAE5B8C,UAAAA,KAAK,EAAEA;AAFqB,SAAhC;AAIH;AACJ;AACJ,GAzuB2B;AA0uB5BqF,EAAAA,YAAY,EAAE,sBAASD,SAAT,EAAoB;AAC9B,QAAI5B,QAAQ,GAAG4B,SAAS,CAAC,CAAD,CAAxB;AACA,QAAIhT,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgT,SAAS,CAAC9S,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;AACnC,UAAIgT,SAAS,CAAChT,CAAD,CAAT,CAAaiR,MAAb,CAAoB,wBAApB,MAAkD,CAAC,CAAvD,EAA0D;AACtDG,QAAAA,QAAQ,IAAI,MAAM4B,SAAS,CAAChT,CAAD,CAA3B;AACH,OAFD,MAEO;AACH;AACH;AACJ;;AACD,WAAOoR,QAAP;AACH,GArvB2B;AAsvB5BhC,EAAAA,0BAA0B,EAAE,oCAASvC,IAAT,EAAe;AACvC,SAAKsH,qBAAL,CAA2B,oBAA3B,EAAiDtH,IAAjD;AACH,GAxvB2B;AAyvB5BmD,EAAAA,mCAAmC,EAAE,6CAAS/B,IAAT,EAAe;AAChD,QAAIlC,IAAI,GAAG,IAAX;;AACA,QAAIkC,IAAI,IAAI,CAAC,GAAGlR,KAAK,CAACgO,QAAV,EAAoBkD,IAApB,CAAZ,EAAuC;AACnC,OAAC,GAAGjR,SAAS,CAACiT,IAAd,EAAoBhC,IAApB,EAA0B,UAASnD,SAAT,EAAoB8C,KAApB,EAA2B;AACjD7B,QAAAA,IAAI,CAACqD,0BAAL,CAAgC;AAC5BtE,UAAAA,SAAS,EAAEA,SADiB;AAE5B8C,UAAAA,KAAK,EAAEA;AAFqB,SAAhC;AAIH,OALD;AAMH;AACJ,GAnwB2B;AAowB5BwG,EAAAA,iBAAiB,EAAE,2BAAStJ,SAAT,EAAoB8C,KAApB,EAA2B;AAC1C,QAAI,CAAC,GAAG7Q,KAAK,CAACoK,SAAV,EAAqB,KAAKG,MAAL,CAAY,UAAZ,CAArB,CAAJ,EAAmD;AAC/C,UAAI2M,MAAM,GAAG,KAAKC,SAAL,CAAepJ,SAAf,CAAb;AACA,WAAKxD,MAAL,CAAY,cAAcwD,SAA1B,EAAqC8C,KAArC;;AACA,UAAIqG,MAAJ,EAAY;AACR,YAAII,WAAW,GAAGJ,MAAM,CAAC3M,MAAP,CAAc,OAAd,CAAlB;;AACA,YAAI+M,WAAW,KAAKzG,KAApB,EAA2B;AACvBqG,UAAAA,MAAM,CAAC3M,MAAP,CAAc,OAAd,EAAuBsG,KAAvB;AACH;AACJ;AACJ;AACJ,GA/wB2B;AAgxB5BmG,EAAAA,sBAAsB,EAAE,gCAAStQ,KAAT,EAAgB;AACpC,QAAIpB,QAAQ,GAAG,KAAKiF,MAAL,CAAY,UAAZ,CAAf;AACA,QAAInB,MAAM,GAAG,EAAb;;AACA,QAAI,CAAC1C,KAAD,IAAU,CAAC,GAAG1G,KAAK,CAACoK,SAAV,EAAqB9E,QAArB,CAAd,EAA8C;AAC1C,OAAC,GAAGrF,SAAS,CAACiT,IAAd,EAAoB5N,QAApB,EAA8B,UAASyI,SAAT,EAAoB;AAC9C3E,QAAAA,MAAM,CAACkF,IAAP,CAAY;AACRP,UAAAA,SAAS,EAAEA;AADH,SAAZ;AAGH,OAJD;AAKH;;AACD,QAAIrH,KAAJ,EAAW;AACP,OAAC,GAAGzG,SAAS,CAACiT,IAAd,EAAoBxM,KAApB,EAA2B,UAASY,KAAT,EAAgBiG,IAAhB,EAAsB;AAC7C,YAAI,CAAC,GAAGvN,KAAK,CAACgO,QAAV,EAAoBT,IAApB,CAAJ,EAA+B;AAC3BnE,UAAAA,MAAM,CAACkF,IAAP,CAAYf,IAAZ;AACH,SAFD,MAEO;AACHnE,UAAAA,MAAM,CAACkF,IAAP,CAAY;AACRP,YAAAA,SAAS,EAAER;AADH,WAAZ;AAGH;AACJ,OARD;AASH;;AACD,WAAOnE,MAAP;AACH,GAtyB2B;AAuyB5BmO,EAAAA,eAAe,EAAE,yBAASC,KAAT,EAAgB9Q,KAAhB,EAAuB;AACpC,QAAIsI,IAAI,GAAG,IAAX;AACA,QAAIyI,UAAU,GAAG,CAAC,GAAGzX,KAAK,CAACgO,QAAV,EAAoBwJ,KAApB,IAA6BA,KAA7B,GAAqCxI,IAAI,CAAC0I,cAAL,CAAoBF,KAApB,CAAtD;AACA,QAAIG,SAAS,GAAGF,UAAU,CAACE,SAA3B;AACA,QAAIC,SAAS,GAAGH,UAAU,CAACG,SAA3B;AACA,QAAIC,UAAJ;;AACA,QAAInR,KAAK,CAACvD,MAAV,EAAkB;AACd,OAAC,GAAGlD,SAAS,CAACiT,IAAd,EAAoBxM,KAApB,EAA2B,UAASY,KAAT,EAAgBiG,IAAhB,EAAsB;AAC7C,YAAIgB,QAAQ,GAAGhB,IAAI,CAACgB,QAApB;;AACA,YAAIqJ,SAAS,CAACzU,MAAd,EAAsB;AAClB,cAAIqK,IAAI,GAAGoK,SAAS,CAACvB,KAAV,EAAX;AACA9I,UAAAA,IAAI,GAAGyB,IAAI,CAAC8I,mBAAL,CAAyBtK,IAAzB,EAA+BmK,SAA/B,EAA0CpK,IAA1C,CAAP;AACH,SAHD,MAGO;AACH,cAAI,YAAYgB,QAAZ,IAAwB,EAAEhB,IAAI,CAACyD,OAAL,IAAgBzD,IAAI,CAAC4F,IAAvB,CAAxB,IAAwD,aAAa5E,QAAb,IAAyB,CAAChB,IAAI,CAAC4F,IAA3F,EAAiG;AAC7F,gBAAI4E,aAAa,GAAG/I,IAAI,CAACgJ,gBAAL,CAAsBzJ,QAAtB,CAApB;;AACAhB,YAAAA,IAAI,CAAC7G,KAAL,GAAasI,IAAI,CAACgI,sBAAL,CAA4BzJ,IAAI,CAAC7G,KAAjC,CAAb;AACA6G,YAAAA,IAAI,GAAGyB,IAAI,CAACuI,eAAL,CAAqB;AACxBI,cAAAA,SAAS,EAAEA,SADa;AAExBC,cAAAA,SAAS,EAAEA;AAFa,aAArB,EAGJrK,IAAI,CAACwK,aAAD,CAHA,CAAP;AAIH;AACJ;;AACD,YAAI,CAAC,GAAGjW,QAAQ,CAACmW,cAAb,EAA6B1K,IAA7B,EAAmCoK,SAAnC,CAAJ,EAAmD;AAC/CE,UAAAA,UAAU,GAAGtK,IAAb;AACA,iBAAO,KAAP;AACH;AACJ,OAnBD;AAoBH;;AACD,WAAOsK,UAAP;AACH,GAp0B2B;AAq0B5BH,EAAAA,cAAc,EAAE,wBAASF,KAAT,EAAgB;AAC5B,QAAIU,cAAc,GAAG,GAArB;AACA,QAAIP,SAAS,GAAGH,KAAhB;AACA,QAAIW,cAAc,GAAGR,SAAS,CAAC9C,OAAV,CAAkBqD,cAAlB,CAArB;AACA,QAAIE,UAAU,GAAG,EAAjB;;AACA,WAAOD,cAAc,KAAK,CAAC,CAA3B,EAA8B;AAC1BC,MAAAA,UAAU,CAAC9J,IAAX,CAAgBqJ,SAAS,CAACU,MAAV,CAAiB,CAAjB,EAAoBF,cAApB,CAAhB;AACAR,MAAAA,SAAS,GAAGA,SAAS,CAACU,MAAV,CAAiBF,cAAc,GAAG,CAAlC,CAAZ;AACAA,MAAAA,cAAc,GAAGR,SAAS,CAAC9C,OAAV,CAAkBqD,cAAlB,CAAjB;AACH;;AACD,WAAO;AACHP,MAAAA,SAAS,EAAEA,SADR;AAEHC,MAAAA,SAAS,EAAEQ,UAAU,CAACE,OAAX;AAFR,KAAP;AAIH,GAn1B2B;AAo1B5BR,EAAAA,mBAAmB,EAAE,6BAAStK,IAAT,EAAemK,SAAf,EAA0BpK,IAA1B,EAAgC;AACjD,QAAIyB,IAAI,GAAG,IAAX;AACA,QAAIT,QAAQ,GAAGhB,IAAI,CAACgB,QAApB;;AACA,QAAIwJ,aAAa,GAAG/I,IAAI,CAACgJ,gBAAL,CAAsBzJ,QAAtB,CAApB;;AACA,QAAIgK,kBAAkB,GAAG,YAAYhK,QAAZ,IAAwB,aAAaA,QAArC,IAAiDhB,IAAI,CAACiL,KAA/E;AACA,QAAIpP,MAAJ;;AACA,OAAG;AACC,UAAImP,kBAAJ,EAAwB;AACpB,YAAIpF,IAAI,GAAG5F,IAAI,CAAC4F,IAAL,IAAa5F,IAAI,CAACyD,OAAlB,IAA6BzD,IAAI,CAACiL,KAA7C;AACA,YAAIC,eAAe,GAAG,CAAC,GAAGzY,KAAK,CAACoK,SAAV,EAAqB+I,IAArB,CAAtB;AACA,YAAIuF,iBAAiB,GAAG,CAAC,GAAG5W,QAAQ,CAAC6W,oBAAb,EAAmCxF,IAAnC,CAAxB;AACA,YAAIyF,QAAJ;AACArL,QAAAA,IAAI,CAACwK,aAAD,CAAJ,GAAsB/I,IAAI,CAACgI,sBAAL,CAA4BzJ,IAAI,CAACwK,aAAD,CAAhC,CAAtB;;AACA,YAAIU,eAAJ,EAAqB;AACjBG,UAAAA,QAAQ,GAAGpL,IAAI,CAACqL,GAAL,EAAX;AACH;;AACD,YAAI,CAACrL,IAAI,CAACrK,MAAV,EAAkB;AACdiG,UAAAA,MAAM,GAAG4F,IAAI,CAACuI,eAAL,CAAqBI,SAArB,EAAgCpK,IAAI,CAACwK,aAAD,CAApC,CAAT;;AACA,cAAI3O,MAAJ,EAAY;AACR;AACH;AACJ;;AACD,YAAI,CAACqP,eAAD,IAAoBA,eAAe,IAAIC,iBAAiB,KAAKE,QAAjE,EAA2E;AACvE,cAAIpL,IAAI,CAACrK,MAAT,EAAiB;AACbiG,YAAAA,MAAM,GAAG4F,IAAI,CAAC8J,yBAAL,CAA+BtL,IAA/B,EAAqCmK,SAArC,EAAgDpK,IAAI,CAACwK,aAAD,CAApD,CAAT;AACH;AACJ;AACJ,OApBD,MAoBO;AACH;AACH;AACJ,KAxBD,QAwBSvK,IAAI,CAACrK,MAAL,IAAe,CAAC,CAAC,GAAGnD,KAAK,CAACoK,SAAV,EAAqBhB,MAArB,CAxBzB;;AAyBA,WAAOA,MAAP;AACH,GAp3B2B;AAq3B5B4O,EAAAA,gBAAgB,EAAE,0BAASzJ,QAAT,EAAmB;AACjC,WAAO,aAAaA,QAAb,GAAwB,MAAxB,GAAiC,OAAxC;AACH,GAv3B2B;AAw3B5BuK,EAAAA,yBAAyB,EAAE,mCAAStL,IAAT,EAAemK,SAAf,EAA0BjR,KAA1B,EAAiC;AACxD,QAAIsI,IAAI,GAAG,IAAX;AACA,QAAI5F,MAAJ;AACA,KAAC,GAAGnJ,SAAS,CAACiT,IAAd,EAAoBxM,KAApB,EAA2B,UAASY,KAAT,EAAgByR,SAAhB,EAA2B;AAClD3P,MAAAA,MAAM,GAAG4F,IAAI,CAAC8I,mBAAL,CAAyBtK,IAAI,CAAC6I,KAAL,EAAzB,EAAuCsB,SAAvC,EAAkDoB,SAAlD,CAAT;;AACA,UAAI3P,MAAJ,EAAY;AACR,eAAO,KAAP;AACH;AACJ,KALD;;AAMA,QAAI,CAACA,MAAL,EAAa;AACTA,MAAAA,MAAM,GAAG,KAAT;AACH;;AACD,WAAOA,MAAP;AACH,GAr4B2B;AAs4B5B2N,EAAAA,iBAAiB,EAAE,2BAASxJ,IAAT,EAAehD,MAAf,EAAuBsG,KAAvB,EAA8B;AAC7C,QAAI,CAAC,GAAG7Q,KAAK,CAACgO,QAAV,EAAoBT,IAApB,CAAJ,EAA+B;AAC3BA,MAAAA,IAAI,CAAChD,MAAD,CAAJ,GAAesG,KAAf;AACH;AACJ,GA14B2B;AA24B5BmI,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAIC,mBAAmB,GAAG,KAAKjN,uBAAL,EAA1B;;AACA,QAAI,KAAKF,uBAAL,KAAiCmN,mBAArC,EAA0D;AACtD,UAAI,KAAKC,kBAAL,CAAwB,KAAKpN,uBAA7B,EAAsDmN,mBAAtD,CAAJ,EAAgF;AAC5E,aAAKlN,mBAAL,GAA2BkN,mBAA3B;;AACA,aAAKlH,QAAL;;AACA,aAAKhG,mBAAL,GAA2B,KAAK,CAAhC;AACH;;AACD,WAAKD,uBAAL,GAA+BmN,mBAA/B;AACH;AACJ,GAr5B2B;AAs5B5BC,EAAAA,kBAAkB,EAAE,4BAASC,aAAT,EAAwBC,aAAxB,EAAuC;AACvD,QAAIC,SAAS,GAAG,KAAhB;AACA,KAAC,GAAGpZ,SAAS,CAACiT,IAAd,EAAoB,KAAKvO,sBAAzB,EAAiD,UAAS2C,KAAT,EAAgBiG,IAAhB,EAAsB;AACnE,UAAIA,IAAI,CAAC/H,gBAAL,CAAsB2T,aAAtB,MAAyC5L,IAAI,CAAC/H,gBAAL,CAAsB4T,aAAtB,CAA7C,EAAmF;AAC/EC,QAAAA,SAAS,GAAG,IAAZ;AACA,eAAO,KAAP;AACH;AACJ,KALD;AAMA,WAAOA,SAAP;AACH,GA/5B2B;AAg6B5BtH,EAAAA,QAAQ,EAAE,oBAAW;AACjB,QAAIuH,cAAc,GAAG,MAAMlV,mBAAN,GAA4B,WAA5B,GAA0CA,mBAA1C,GAAgE,WAArF;;AACA1E,IAAAA,eAAe,CAAC6E,OAAhB,CAAwBgV,OAAxB,CAAgC,KAAKlS,QAAL,GAAgBI,IAAhB,CAAqB6R,cAArB,CAAhC,EAAsE,QAAtE;;AACA,SAAK5U,QAAL;AACH,GAp6B2B;AAq6B5BgP,EAAAA,YAAY,EAAE,wBAAW;AACrB,SAAK9O,iBAAL,CAAuBsO,IAAvB,CAA4B,UAASsG,CAAT,EAAYC,eAAZ,EAA6B;AACrD,UAAI,CAAC,GAAGzZ,KAAK,CAACoK,SAAV,EAAqBqP,eAAe,CAACjJ,cAArC,KAAwDiJ,eAAe,CAACjJ,cAAhB,YAA0C3P,QAAQ,CAAC0D,OAA/G,EAAwH;AACpHkV,QAAAA,eAAe,CAACjJ,cAAhB,CAA+BkJ,KAA/B;AACAD,QAAAA,eAAe,CAACjJ,cAAhB,CAA+BjG,MAA/B,CAAsC,SAAtC,EAAiD,IAAjD;AACH;AACJ,KALD;;AAMAvJ,IAAAA,mBAAmB,CAACuD,OAApB,CAA4BoV,UAA5B,CAAuC,KAAKnO,mBAAL,EAAvC;AACH,GA76B2B;AA86B5BoO,EAAAA,WAAW,EAAE,qBAAS1I,IAAT,EAAeL,KAAf,EAAsBgJ,aAAtB,EAAqC;AAC9C,QAAI7K,IAAI,GAAG,IAAX;;AACA,QAAI8K,KAAK,GAAGD,aAAa,GAAGhJ,KAAH,GAAWK,IAApC;;AACA,QAAI,CAAC,GAAGlR,KAAK,CAACgO,QAAV,EAAoB8L,KAApB,CAAJ,EAAgC;AAC5B,OAAC,GAAG7Z,SAAS,CAACiT,IAAd,EAAoB4G,KAApB,EAA2B,UAAS/L,SAAT,EAAoBgM,UAApB,EAAgC;AACvD/K,QAAAA,IAAI,CAAC4K,WAAL,CAAiBC,aAAa,GAAG3I,IAAI,GAAG,GAAP,GAAanD,SAAhB,GAA4BA,SAA1D,EAAqEgM,UAArE,EAAiF,CAAC,GAAG/Z,KAAK,CAACgO,QAAV,EAAoB+L,UAApB,CAAjF;AACH,OAFD;AAGH,KAJD,MAIO;AACH,UAAI,CAAC,GAAG/Z,KAAK,CAAC8N,QAAV,EAAoBoD,IAApB,CAAJ,EAA+B;AAC3BlC,QAAAA,IAAI,CAACqI,iBAAL,CAAuBnG,IAAvB,EAA6BL,KAA7B;AACH;AACJ;AACJ,GA17B2B;AA27B5BmJ,EAAAA,kBAAkB,EAAE,4BAAS7E,GAAT,EAAc8E,OAAd,EAAuB;AACvC,SAAKvV,QAAL,CAAcyQ,GAAd,EAAmB8E,OAAnB;;AACA,SAAKrV,iBAAL,CAAuBsO,IAAvB,CAA4B,UAASsG,CAAT,EAAYC,eAAZ,EAA6B;AACrD,UAAI,CAAC,GAAGzZ,KAAK,CAACoK,SAAV,EAAqBqP,eAAe,CAACjJ,cAArC,CAAJ,EAA0D;AACtDiJ,QAAAA,eAAe,CAACjJ,cAAhB,CAA+BwJ,kBAA/B,CAAkD7E,GAAlD,EAAuD8E,OAAvD;AACH;AACJ,KAJD;AAKH,GAl8B2B;AAm8B5BC,EAAAA,YAAY,EAAE,wBAAW;AACrB,WAAO,KAAK7S,QAAL,GAAgBI,IAAhB,CAAqB,MAAMxD,wBAAN,GAAiC,aAAtD,EAAqEkW,KAArE,EAAP;AACH,GAr8B2B;AAs8B5BC,EAAAA,kBAAkB,EAAE,4BAASC,OAAT,EAAkB;AAClC,QAAIA,OAAO,IAAI/Z,SAAS,CAACiE,OAAV,CAAkB+V,IAAjC,EAAuC;AACnC,WAAKvI,QAAL;AACH;AACJ,GA18B2B;AA28B5BwI,EAAAA,QAAQ,EAAE,oBAAW;AACjBvZ,IAAAA,mBAAmB,CAACuD,OAApB,CAA4BoP,WAA5B,CAAwC,KAAKnI,mBAAL,EAAxC;;AACA,SAAK9G,QAAL;AACH,GA98B2B;AA+8B5B8V,EAAAA,WAAW,EAAE,uBAAW;AACpB,SAAK9G,YAAL;AACH,GAj9B2B;AAk9B5B+G,EAAAA,UAAU,EAAE,oBAASvJ,IAAT,EAAeL,KAAf,EAAsB;AAC9B,SAAK+I,WAAL,CAAiB1I,IAAjB,EAAuBL,KAAvB;AACH,GAp9B2B;AAq9B5BsG,EAAAA,SAAS,EAAE,mBAASpJ,SAAT,EAAoB;AAC3B,WAAO,KAAKnJ,iBAAL,CAAuB8V,6BAAvB,CAAqD3M,SAArD,KAAmE,KAAKnJ,iBAAL,CAAuB+V,wBAAvB,CAAgD5M,SAAhD,CAA1E;AACH,GAv9B2B;AAw9B5B6M,EAAAA,SAAS,EAAE,mBAASzH,IAAT,EAAe;AACtB,WAAO,KAAKvO,iBAAL,CAAuB+V,wBAAvB,CAAgDxH,IAAhD,CAAP;AACH,GA19B2B;AA29B5B0H,EAAAA,gBAAgB,EAAE,4BAAW;AACzB,QAAI7L,IAAI,GAAG,IAAX;AACA,QAAI8L,QAAQ,GAAG,IAAIrZ,SAAS,CAAC8T,QAAd,EAAf;;AACA,QAAIvG,IAAI,CAACzC,WAAT,EAAsB;AAClByC,MAAAA,IAAI,CAACzC,WAAL,CAAiBwO,MAAjB,GAA0BC,IAA1B,CAA+B,YAAW;AACtCF,QAAAA,QAAQ,CAACG,WAAT,CAAqBjM,IAArB;AACH,OAFD;AAGH,KAJD,MAIO;AACH8L,MAAAA,QAAQ,CAACG,WAAT,CAAqBjM,IAArB;AACH;;AACD,WAAO8L,QAAQ,CAACI,OAAT,EAAP;AACH,GAt+B2B;AAu+B5BC,EAAAA,UAAU,EAAE,oBAASC,EAAT,EAAa7Q,MAAb,EAAqBsG,KAArB,EAA4B;AACpC,QAAIwK,MAAM,GAAG,IAAb;;AACA,QAAI3U,KAAK,GAAG,KAAKsQ,sBAAL,CAA4B,KAAKzM,MAAL,CAAY,OAAZ,CAA5B,CAAZ;;AACA,QAAIgD,IAAI,GAAG,KAAKgK,eAAL,CAAqB6D,EAArB,EAAyB1U,KAAzB,CAAX;;AACA,QAAI8G,IAAI,GAAG,KAAK5I,iBAAL,CAAuB0W,eAAvB,CAAuC/N,IAAvC,CAAX;;AACA,QAAI,CAACA,IAAL,EAAW;AACP;AACH;;AACD,YAAQgO,SAAS,CAACpY,MAAlB;AACI,WAAK,CAAL;AACI,eAAOoK,IAAP;;AACJ,WAAK,CAAL;AACI,YAAIuJ,UAAU,GAAG,KAAK3C,0BAAL,CAAgC5J,MAAhC,EAAwCgD,IAAxC,EAA8CsD,KAA9C,EAAqDtD,IAAI,CAAChD,MAAD,CAAzD,EAAmEiD,IAAnE,CAAjB;;AACA,aAAKuJ,iBAAL,CAAuBxJ,IAAvB,EAA6BhD,MAA7B,EAAqCsG,KAArC;;AACA,YAAID,QAAQ,GAAG,CAAC,GAAG9O,QAAQ,CAACyU,iBAAb,EAAgC/I,IAAhC,EAAsCjD,MAAtC,CAAf;;AACA,YAAI,CAAC,KAAKiK,2BAAL,CAAiCsC,UAAjC,CAAD,IAAiD,CAAC,KAAKd,iCAAL,CAAuCpF,QAAvC,EAAiDC,KAAjD,CAAtD,EAA+G;AAC3G,eAAKtG,MAAL,CAAY,OAAZ,EAAqB7D,KAArB;AACH;;AACD;;AACJ;AACI,YAAI,CAAC,GAAG1G,KAAK,CAACgO,QAAV,EAAoBzD,MAApB,CAAJ,EAAiC;AAC7B,cAAI,CAAC,KAAKiM,kCAAL,CAAwChJ,IAAxC,EAA8CjD,MAA9C,CAAL,EAA4D;AACxD,gBAAIiR,gBAAJ;AACA,aAAC,GAAGvb,SAAS,CAACiT,IAAd,EAAoB3I,MAApB,EAA4B,UAAS6J,UAAT,EAAqBsC,WAArB,EAAkC;AAC1D,kBAAII,UAAU,GAAGuE,MAAM,CAAClH,0BAAP,CAAkCC,UAAlC,EAA8C7G,IAA9C,EAAoDmJ,WAApD,EAAiEnJ,IAAI,CAAC6G,UAAD,CAArE,EAAmF5G,IAAnF,CAAjB;;AACA6N,cAAAA,MAAM,CAACtE,iBAAP,CAAyBxJ,IAAzB,EAA+B6G,UAA/B,EAA2CsC,WAA3C;;AACA,kBAAI,CAAC8E,gBAAD,IAAqB,CAACH,MAAM,CAAC7G,2BAAP,CAAmCsC,UAAnC,CAA1B,EAA0E;AACtE0E,gBAAAA,gBAAgB,GAAG,IAAnB;AACH;AACJ,aAND;AAOAA,YAAAA,gBAAgB,IAAI,KAAKjR,MAAL,CAAY,OAAZ,EAAqB7D,KAArB,CAApB;AACH;AACJ;;AAxBT;AA0BH,GAzgC2B;AA0gC5B+U,EAAAA,QAAQ,EAAE,oBAAW;AACjB,WAAOza,mBAAmB,CAACuD,OAApB,CAA4BmX,aAA5B,CAA0C,KAAKlQ,mBAAL,EAA1C,CAAP;AACH,GA5gC2B;AA6gC5BmQ,EAAAA,SAAS,EAAE,mBAASxI,IAAT,EAAe;AACtB,WAAO,QAAQ,KAAK5I,MAAL,CAAY,QAAZ,CAAR,GAAgC,GAAhC,IAAuC4I,IAAI,IAAI,IAAIrT,MAAM,CAACyE,OAAX,EAA/C,CAAP;AACH,GA/gC2B;AAghC5BqX,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,WAAO,KAAK7P,mBAAZ;AACH;AAlhC2B,CAArB,CAAX;;AAohCA,CAAC,GAAGnM,uBAAuB,CAAC2E,OAA5B,EAAqC,QAArC,EAA+CD,IAA/C;AACAuX,MAAM,CAACC,OAAP,GAAiBxX,IAAjB","sourcesContent":["/**\r\n * DevExtreme (ui/form/ui.form.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _guid = require(\"../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _string = require(\"../../core/utils/string\");\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _ui = require(\"../widget/ui.widget\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _editor = require(\"../editor/editor\");\r\nvar _editor2 = _interopRequireDefault(_editor);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _validation_engine = require(\"../validation_engine\");\r\nvar _validation_engine2 = _interopRequireDefault(_validation_engine);\r\nvar _uiForm = require(\"./ui.form.layout_manager\");\r\nvar _uiForm2 = _interopRequireDefault(_uiForm);\r\nvar _uiForm3 = require(\"./ui.form.items_runtime_info\");\r\nvar _uiForm4 = _interopRequireDefault(_uiForm3);\r\nvar _tab_panel = require(\"../tab_panel\");\r\nvar _tab_panel2 = _interopRequireDefault(_tab_panel);\r\nvar _ui3 = require(\"../scroll_view/ui.scrollable\");\r\nvar _ui4 = _interopRequireDefault(_ui3);\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nvar _uiForm5 = require(\"./ui.form.item_options_actions\");\r\nvar _uiForm6 = _interopRequireDefault(_uiForm5);\r\nvar _uiForm7 = require(\"./ui.form.utils\");\r\nrequire(\"../validation_summary\");\r\nrequire(\"../validation_group\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\")\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (Symbol.iterator in Object(iter) || \"[object Arguments]\" === Object.prototype.toString.call(iter)) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\r\n            arr2[i] = arr[i]\r\n        }\r\n        return arr2\r\n    }\r\n}\r\nvar FORM_CLASS = \"dx-form\";\r\nvar FIELD_ITEM_CLASS = \"dx-field-item\";\r\nvar FIELD_ITEM_LABEL_TEXT_CLASS = \"dx-field-item-label-text\";\r\nvar FORM_GROUP_CLASS = \"dx-form-group\";\r\nvar FORM_GROUP_CONTENT_CLASS = \"dx-form-group-content\";\r\nvar FORM_GROUP_WITH_CAPTION_CLASS = \"dx-form-group-with-caption\";\r\nvar FORM_GROUP_CAPTION_CLASS = \"dx-form-group-caption\";\r\nvar HIDDEN_LABEL_CLASS = \"dx-layout-manager-hidden-label\";\r\nvar FIELD_ITEM_LABEL_CLASS = \"dx-field-item-label\";\r\nvar FIELD_ITEM_LABEL_CONTENT_CLASS = \"dx-field-item-label-content\";\r\nvar FIELD_ITEM_TAB_CLASS = \"dx-field-item-tab\";\r\nvar FORM_FIELD_ITEM_COL_CLASS = \"dx-col-\";\r\nvar GROUP_COL_COUNT_CLASS = \"dx-group-colcount-\";\r\nvar FIELD_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\r\nvar FORM_VALIDATION_SUMMARY = \"dx-form-validation-summary\";\r\nvar WIDGET_CLASS = \"dx-widget\";\r\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\r\nvar ITEM_OPTIONS_FOR_VALIDATION_UPDATING = [\"items\", \"isRequired\", \"validationRules\", \"visible\"];\r\nvar Form = _ui2.default.inherit({\r\n    _init: function() {\r\n        this.callBase();\r\n        this._cachedColCountOptions = [];\r\n        this._itemsRunTimeInfo = new _uiForm4.default;\r\n        this._groupsColCount = [];\r\n        this._attachSyncSubscriptions()\r\n    },\r\n    _initOptions: function(options) {\r\n        if (!(\"screenByWidth\" in options)) {\r\n            options.screenByWidth = _window.defaultScreenFactorFunc\r\n        }\r\n        this.callBase(options)\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            formID: \"dx-\" + new _guid2.default,\r\n            formData: {},\r\n            colCount: 1,\r\n            screenByWidth: null,\r\n            colCountByScreen: void 0,\r\n            labelLocation: \"left\",\r\n            readOnly: false,\r\n            onFieldDataChanged: null,\r\n            customizeItem: null,\r\n            onEditorEnterKey: null,\r\n            minColWidth: 200,\r\n            alignItemLabels: true,\r\n            alignItemLabelsInAllGroups: true,\r\n            showColonAfterLabel: true,\r\n            showRequiredMark: true,\r\n            showOptionalMark: false,\r\n            requiredMark: \"*\",\r\n            optionalMark: _message2.default.format(\"dxForm-optionalMark\"),\r\n            requiredMessage: _message2.default.getFormatter(\"dxForm-requiredMessage\"),\r\n            showValidationSummary: false,\r\n            items: void 0,\r\n            scrollingEnabled: false,\r\n            validationGroup: void 0,\r\n            stylingMode: void 0\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return _themes2.default.isMaterial()\r\n            },\r\n            options: {\r\n                showColonAfterLabel: false,\r\n                labelLocation: \"top\"\r\n            }\r\n        }])\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._optionsByReference, {\r\n            formData: true,\r\n            validationGroup: true\r\n        })\r\n    },\r\n    _getColCount: function($element) {\r\n        var index = 0;\r\n        var isColsExist = true;\r\n        var $cols;\r\n        while (isColsExist) {\r\n            $cols = $element.find(\".\" + FORM_FIELD_ITEM_COL_CLASS + index);\r\n            if (!$cols.length) {\r\n                isColsExist = false\r\n            } else {\r\n                index++\r\n            }\r\n        }\r\n        return index\r\n    },\r\n    _createHiddenElement: function(rootLayoutManager) {\r\n        this._$hiddenElement = (0, _renderer2.default)(\"<div>\").addClass(WIDGET_CLASS).addClass(HIDDEN_LABEL_CLASS).appendTo(\"body\");\r\n        var $hiddenLabel = rootLayoutManager._renderLabel({\r\n            text: \" \",\r\n            location: this._labelLocation()\r\n        }).appendTo(this._$hiddenElement);\r\n        this._hiddenLabelText = $hiddenLabel.find(\".\" + FIELD_ITEM_LABEL_TEXT_CLASS)[0]\r\n    },\r\n    _removeHiddenElement: function() {\r\n        this._$hiddenElement.remove();\r\n        this._hiddenLabelText = null\r\n    },\r\n    _getLabelWidthByText: function(text) {\r\n        this._hiddenLabelText.innerHTML = text;\r\n        return this._hiddenLabelText.offsetWidth\r\n    },\r\n    _getLabelsSelectorByCol: function(index, options) {\r\n        options = options || {};\r\n        var fieldItemClass = options.inOneColumn ? FIELD_ITEM_CLASS : FORM_FIELD_ITEM_COL_CLASS + index;\r\n        var cssExcludeTabbedSelector = options.excludeTabbed ? \":not(.\" + FIELD_ITEM_TAB_CLASS + \")\" : \"\";\r\n        var childLabelContentSelector = \"> .\" + FIELD_ITEM_LABEL_CLASS + \" > .\" + FIELD_ITEM_LABEL_CONTENT_CLASS;\r\n        return \".\" + fieldItemClass + cssExcludeTabbedSelector + childLabelContentSelector\r\n    },\r\n    _getLabelText: function(labelText) {\r\n        var length = labelText.children.length;\r\n        var child;\r\n        var result = \"\";\r\n        var i;\r\n        for (i = 0; i < length; i++) {\r\n            child = labelText.children[i];\r\n            result += !(0, _string.isEmpty)(child.innerText) ? child.innerText : child.innerHTML\r\n        }\r\n        return result\r\n    },\r\n    _applyLabelsWidthByCol: function($container, index, options) {\r\n        var $labelTexts = $container.find(this._getLabelsSelectorByCol(index, options));\r\n        var $labelTextsLength = $labelTexts.length;\r\n        var labelWidth;\r\n        var i;\r\n        var maxWidth = 0;\r\n        for (i = 0; i < $labelTextsLength; i++) {\r\n            labelWidth = this._getLabelWidthByText(this._getLabelText($labelTexts[i]));\r\n            if (labelWidth > maxWidth) {\r\n                maxWidth = labelWidth\r\n            }\r\n        }\r\n        for (i = 0; i < $labelTextsLength; i++) {\r\n            $labelTexts[i].style.width = maxWidth + \"px\"\r\n        }\r\n    },\r\n    _applyLabelsWidth: function($container, excludeTabbed, inOneColumn, colCount) {\r\n        colCount = inOneColumn ? 1 : colCount || this._getColCount($container);\r\n        var applyLabelsOptions = {\r\n            excludeTabbed: excludeTabbed,\r\n            inOneColumn: inOneColumn\r\n        };\r\n        var i;\r\n        for (i = 0; i < colCount; i++) {\r\n            this._applyLabelsWidthByCol($container, i, applyLabelsOptions)\r\n        }\r\n    },\r\n    _getGroupElementsInColumn: function($container, columnIndex, colCount) {\r\n        var cssColCountSelector = (0, _type.isDefined)(colCount) ? \".\" + GROUP_COL_COUNT_CLASS + colCount : \"\";\r\n        var groupSelector = \".\" + FORM_FIELD_ITEM_COL_CLASS + columnIndex + \" > .\" + FIELD_ITEM_CONTENT_CLASS + \" > .\" + FORM_GROUP_CLASS + cssColCountSelector;\r\n        return $container.find(groupSelector)\r\n    },\r\n    _applyLabelsWidthWithGroups: function($container, colCount, excludeTabbed) {\r\n        var alignItemLabelsInAllGroups = this.option(\"alignItemLabelsInAllGroups\");\r\n        if (alignItemLabelsInAllGroups) {\r\n            this._applyLabelsWidthWithNestedGroups($container, colCount, excludeTabbed)\r\n        } else {\r\n            var $groups = this.$element().find(\".\" + FORM_GROUP_CLASS);\r\n            var i;\r\n            for (i = 0; i < $groups.length; i++) {\r\n                this._applyLabelsWidth($groups.eq(i), excludeTabbed)\r\n            }\r\n        }\r\n    },\r\n    _applyLabelsWidthWithNestedGroups: function($container, colCount, excludeTabbed) {\r\n        var applyLabelsOptions = {\r\n            excludeTabbed: excludeTabbed\r\n        };\r\n        var colIndex;\r\n        var groupsColIndex;\r\n        var groupColIndex;\r\n        var $groupsByCol;\r\n        for (colIndex = 0; colIndex < colCount; colIndex++) {\r\n            $groupsByCol = this._getGroupElementsInColumn($container, colIndex);\r\n            this._applyLabelsWidthByCol($groupsByCol, 0, applyLabelsOptions);\r\n            for (groupsColIndex = 0; groupsColIndex < this._groupsColCount.length; groupsColIndex++) {\r\n                $groupsByCol = this._getGroupElementsInColumn($container, colIndex, this._groupsColCount[groupsColIndex]);\r\n                var groupColCount = this._getColCount($groupsByCol);\r\n                for (groupColIndex = 1; groupColIndex < groupColCount; groupColIndex++) {\r\n                    this._applyLabelsWidthByCol($groupsByCol, groupColIndex, applyLabelsOptions)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _labelLocation: function() {\r\n        return this.option(\"labelLocation\")\r\n    },\r\n    _alignLabelsInColumn: function(_ref) {\r\n        var layoutManager = _ref.layoutManager,\r\n            inOneColumn = _ref.inOneColumn,\r\n            $container = _ref.$container,\r\n            excludeTabbed = _ref.excludeTabbed,\r\n            items = _ref.items;\r\n        if (!(0, _window.hasWindow)() || \"top\" === this._labelLocation()) {\r\n            return\r\n        }\r\n        this._createHiddenElement(layoutManager);\r\n        if (inOneColumn) {\r\n            this._applyLabelsWidth($container, excludeTabbed, true)\r\n        } else {\r\n            if (this._checkGrouping(items)) {\r\n                this._applyLabelsWidthWithGroups($container, layoutManager._getColCount(), excludeTabbed)\r\n            } else {\r\n                this._applyLabelsWidth($container, excludeTabbed, false, layoutManager._getColCount())\r\n            }\r\n        }\r\n        this._removeHiddenElement()\r\n    },\r\n    _prepareFormData: function() {\r\n        if (!(0, _type.isDefined)(this.option(\"formData\"))) {\r\n            this.option(\"formData\", {})\r\n        }\r\n    },\r\n    _initMarkup: function() {\r\n        _validation_engine2.default.addGroup(this._getValidationGroup());\r\n        this._clearCachedInstances();\r\n        this._prepareFormData();\r\n        this.$element().addClass(FORM_CLASS);\r\n        this.callBase();\r\n        this.setAria(\"role\", \"form\", this.$element());\r\n        if (this.option(\"scrollingEnabled\")) {\r\n            this._renderScrollable()\r\n        }\r\n        this._renderLayout();\r\n        this._renderValidationSummary();\r\n        this._lastMarkupScreenFactor = this._targetScreenFactor || this._getCurrentScreenFactor()\r\n    },\r\n    _getCurrentScreenFactor: function() {\r\n        return (0, _window.hasWindow)() ? (0, _window.getCurrentScreenFactor)(this.option(\"screenByWidth\")) : \"lg\"\r\n    },\r\n    _clearCachedInstances: function() {\r\n        this._itemsRunTimeInfo.clear();\r\n        this._cachedLayoutManagers = []\r\n    },\r\n    _alignLabels: function(layoutManager, inOneColumn) {\r\n        this._alignLabelsInColumn({\r\n            $container: this.$element(),\r\n            layoutManager: layoutManager,\r\n            excludeTabbed: true,\r\n            items: this.option(\"items\"),\r\n            inOneColumn: inOneColumn\r\n        })\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._groupsColCount = [];\r\n        this._cachedColCountOptions = [];\r\n        this._lastMarkupScreenFactor = void 0\r\n    },\r\n    _renderScrollable: function() {\r\n        var useNativeScrolling = this.option(\"useNativeScrolling\");\r\n        this._scrollable = new _ui4.default(this.$element(), {\r\n            useNative: !!useNativeScrolling,\r\n            useSimulatedScrollbar: !useNativeScrolling,\r\n            useKeyboard: false,\r\n            direction: \"both\",\r\n            bounceEnabled: false\r\n        })\r\n    },\r\n    _getContent: function() {\r\n        return this.option(\"scrollingEnabled\") ? this._scrollable.$content() : this.$element()\r\n    },\r\n    _renderValidationSummary: function() {\r\n        var $validationSummary = this.$element().find(\".\" + FORM_VALIDATION_SUMMARY);\r\n        if ($validationSummary.length > 0) {\r\n            $validationSummary.remove()\r\n        }\r\n        if (this.option(\"showValidationSummary\")) {\r\n            var _$validationSummary = (0, _renderer2.default)(\"<div>\").addClass(FORM_VALIDATION_SUMMARY).appendTo(this._getContent());\r\n            this._validationSummary = _$validationSummary.dxValidationSummary({\r\n                validationGroup: this._getValidationGroup()\r\n            }).dxValidationSummary(\"instance\")\r\n        }\r\n    },\r\n    _prepareItems: function(items, parentIsTabbedItem, currentPath, isTabs) {\r\n        if (items) {\r\n            var result = [];\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = items[i];\r\n                var path = (0, _uiForm7.concatPaths)(currentPath, (0, _uiForm7.createItemPathByIndex)(i, isTabs));\r\n                var guid = this._itemsRunTimeInfo.add({\r\n                    item: item,\r\n                    itemIndex: i,\r\n                    path: path\r\n                });\r\n                if ((0, _type.isString)(item)) {\r\n                    item = {\r\n                        dataField: item\r\n                    }\r\n                }\r\n                if ((0, _type.isObject)(item)) {\r\n                    var itemCopy = (0, _extend.extend)({}, item);\r\n                    itemCopy.guid = guid;\r\n                    this._tryPrepareGroupItem(itemCopy);\r\n                    this._tryPrepareTabbedItem(itemCopy, path);\r\n                    this._tryPrepareItemTemplate(itemCopy);\r\n                    if (parentIsTabbedItem) {\r\n                        itemCopy.cssItemClass = FIELD_ITEM_TAB_CLASS\r\n                    }\r\n                    if (itemCopy.items) {\r\n                        itemCopy.items = this._prepareItems(itemCopy.items, parentIsTabbedItem, path)\r\n                    }\r\n                    result.push(itemCopy)\r\n                } else {\r\n                    result.push(item)\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    },\r\n    _tryPrepareGroupItem: function(item) {\r\n        if (\"group\" === item.itemType) {\r\n            item.alignItemLabels = (0, _common.ensureDefined)(item.alignItemLabels, true);\r\n            if (item.template) {\r\n                item.groupContentTemplate = this._getTemplate(item.template)\r\n            }\r\n            item.template = this._itemGroupTemplate.bind(this, item)\r\n        }\r\n    },\r\n    _tryPrepareTabbedItem: function(item, path) {\r\n        if (\"tabbed\" === item.itemType) {\r\n            item.template = this._itemTabbedTemplate.bind(this, item);\r\n            item.tabs = this._prepareItems(item.tabs, true, path, true)\r\n        }\r\n    },\r\n    _tryPrepareItemTemplate: function(item) {\r\n        if (item.template) {\r\n            item.template = this._getTemplate(item.template)\r\n        }\r\n    },\r\n    _checkGrouping: function(items) {\r\n        if (items) {\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = items[i];\r\n                if (\"group\" === item.itemType) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _renderLayout: function() {\r\n        var that = this;\r\n        var items = that.option(\"items\");\r\n        var $content = that._getContent();\r\n        items = that._prepareItems(items);\r\n        that._rootLayoutManager = that._renderLayoutManager(items, $content, {\r\n            colCount: that.option(\"colCount\"),\r\n            alignItemLabels: that.option(\"alignItemLabels\"),\r\n            screenByWidth: this.option(\"screenByWidth\"),\r\n            colCountByScreen: this.option(\"colCountByScreen\"),\r\n            onLayoutChanged: function(inOneColumn) {\r\n                that._alignLabels.bind(that)(that._rootLayoutManager, inOneColumn)\r\n            },\r\n            onContentReady: function(e) {\r\n                that._alignLabels(e.component, e.component.isSingleColumnMode())\r\n            }\r\n        })\r\n    },\r\n    _tryGetItemsForTemplate: function(item) {\r\n        return item.items || []\r\n    },\r\n    _itemTabbedTemplate: function(item, e, $container) {\r\n        var _this = this;\r\n        var $tabPanel = (0, _renderer2.default)(\"<div>\").appendTo($container);\r\n        var tabPanelOptions = (0, _extend.extend)({}, item.tabPanelOptions, {\r\n            dataSource: item.tabs,\r\n            onItemRendered: function(args) {\r\n                return (0, _dom.triggerShownEvent)(args.itemElement)\r\n            },\r\n            itemTemplate: function(itemData, e, container) {\r\n                var $container = (0, _renderer2.default)(container);\r\n                var alignItemLabels = (0, _common.ensureDefined)(itemData.alignItemLabels, true);\r\n                var layoutManager = _this._renderLayoutManager(_this._tryGetItemsForTemplate(itemData), $container, {\r\n                    colCount: itemData.colCount,\r\n                    alignItemLabels: alignItemLabels,\r\n                    screenByWidth: _this.option(\"screenByWidth\"),\r\n                    colCountByScreen: itemData.colCountByScreen,\r\n                    cssItemClass: itemData.cssItemClass,\r\n                    onLayoutChanged: function(inOneColumn) {\r\n                        _this._alignLabelsInColumn({\r\n                            $container: $container,\r\n                            layoutManager: layoutManager,\r\n                            items: itemData.items,\r\n                            inOneColumn: inOneColumn\r\n                        })\r\n                    }\r\n                });\r\n                if (_this._itemsRunTimeInfo) {\r\n                    _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(itemData.guid, {\r\n                        layoutManager: layoutManager\r\n                    })\r\n                }\r\n                if (alignItemLabels) {\r\n                    _this._alignLabelsInColumn({\r\n                        $container: $container,\r\n                        layoutManager: layoutManager,\r\n                        items: itemData.items,\r\n                        inOneColumn: layoutManager.isSingleColumnMode()\r\n                    })\r\n                }\r\n            }\r\n        });\r\n        var tryUpdateTabPanelInstance = function(items, instance) {\r\n            if (Array.isArray(items)) {\r\n                items.forEach(function(item) {\r\n                    return _this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\r\n                        widgetInstance: instance\r\n                    })\r\n                })\r\n            }\r\n        };\r\n        var tabPanel = this._createComponent($tabPanel, _tab_panel2.default, tabPanelOptions);\r\n        tabPanel.on(\"optionChanged\", function(e) {\r\n            if (\"dataSource\" === e.fullName) {\r\n                tryUpdateTabPanelInstance(e.value, e.component)\r\n            }\r\n        });\r\n        tryUpdateTabPanelInstance([{\r\n            guid: item.guid\r\n        }].concat(_toConsumableArray(item.tabs)), tabPanel)\r\n    },\r\n    _itemGroupTemplate: function(item, e, $container) {\r\n        var $group = (0, _renderer2.default)(\"<div>\").toggleClass(FORM_GROUP_WITH_CAPTION_CLASS, (0, _type.isDefined)(item.caption) && item.caption.length).addClass(FORM_GROUP_CLASS).appendTo($container);\r\n        var $groupContent;\r\n        var colCount;\r\n        var layoutManager;\r\n        if (item.caption) {\r\n            (0, _renderer2.default)(\"<span>\").addClass(FORM_GROUP_CAPTION_CLASS).text(item.caption).appendTo($group)\r\n        }\r\n        $groupContent = (0, _renderer2.default)(\"<div>\").addClass(FORM_GROUP_CONTENT_CLASS).appendTo($group);\r\n        if (item.groupContentTemplate) {\r\n            var data = {\r\n                formData: this.option(\"formData\"),\r\n                component: this\r\n            };\r\n            item.groupContentTemplate.render({\r\n                model: data,\r\n                container: (0, _dom.getPublicElement)($groupContent)\r\n            })\r\n        } else {\r\n            layoutManager = this._renderLayoutManager(this._tryGetItemsForTemplate(item), $groupContent, {\r\n                colCount: item.colCount,\r\n                colCountByScreen: item.colCountByScreen,\r\n                alignItemLabels: item.alignItemLabels,\r\n                cssItemClass: item.cssItemClass\r\n            });\r\n            this._itemsRunTimeInfo && this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(item.guid, {\r\n                layoutManager: layoutManager\r\n            });\r\n            colCount = layoutManager._getColCount();\r\n            if ((0, _array.inArray)(colCount, this._groupsColCount) === -1) {\r\n                this._groupsColCount.push(colCount)\r\n            }\r\n            $group.addClass(GROUP_COL_COUNT_CLASS + colCount)\r\n        }\r\n    },\r\n    _renderLayoutManager: function(items, $rootElement, options) {\r\n        var $element = (0, _renderer2.default)(\"<div>\");\r\n        var that = this;\r\n        var instance;\r\n        var config = that._getLayoutManagerConfig(items, options);\r\n        var baseColCountByScreen = {\r\n            lg: options.colCount,\r\n            md: options.colCount,\r\n            sm: options.colCount,\r\n            xs: 1\r\n        };\r\n        that._cachedColCountOptions.push({\r\n            colCountByScreen: (0, _extend.extend)(baseColCountByScreen, options.colCountByScreen)\r\n        });\r\n        $element.appendTo($rootElement);\r\n        instance = that._createComponent($element, \"dxLayoutManager\", config);\r\n        instance.on(\"autoColCountChanged\", function() {\r\n            that._refresh()\r\n        });\r\n        that._cachedLayoutManagers.push(instance);\r\n        return instance\r\n    },\r\n    _getValidationGroup: function() {\r\n        return this.option(\"validationGroup\") || this\r\n    },\r\n    _getLayoutManagerConfig: function(items, options) {\r\n        var _this2 = this;\r\n        var baseConfig = {\r\n            form: this,\r\n            validationGroup: this._getValidationGroup(),\r\n            showRequiredMark: this.option(\"showRequiredMark\"),\r\n            showOptionalMark: this.option(\"showOptionalMark\"),\r\n            requiredMark: this.option(\"requiredMark\"),\r\n            optionalMark: this.option(\"optionalMark\"),\r\n            requiredMessage: this.option(\"requiredMessage\"),\r\n            screenByWidth: this.option(\"screenByWidth\"),\r\n            layoutData: this.option(\"formData\"),\r\n            labelLocation: this.option(\"labelLocation\"),\r\n            customizeItem: this.option(\"customizeItem\"),\r\n            minColWidth: this.option(\"minColWidth\"),\r\n            showColonAfterLabel: this.option(\"showColonAfterLabel\"),\r\n            onEditorEnterKey: this.option(\"onEditorEnterKey\"),\r\n            onFieldDataChanged: function(args) {\r\n                if (!_this2._isDataUpdating) {\r\n                    _this2._triggerOnFieldDataChanged(args)\r\n                }\r\n            },\r\n            validationBoundary: this.option(\"scrollingEnabled\") ? this.$element() : void 0\r\n        };\r\n        return (0, _extend.extend)(baseConfig, {\r\n            items: items,\r\n            onContentReady: function(args) {\r\n                _this2._itemsRunTimeInfo.addItemsOrExtendFrom(args.component._itemsRunTimeInfo);\r\n                options.onContentReady && options.onContentReady(args)\r\n            },\r\n            onDisposing: function(_ref2) {\r\n                var component = _ref2.component;\r\n                var nestedItemsRunTimeInfo = component.getItemsRunTimeInfo();\r\n                _this2._itemsRunTimeInfo.removeItemsByItems(nestedItemsRunTimeInfo)\r\n            },\r\n            colCount: options.colCount,\r\n            alignItemLabels: options.alignItemLabels,\r\n            cssItemClass: options.cssItemClass,\r\n            colCountByScreen: options.colCountByScreen,\r\n            onLayoutChanged: options.onLayoutChanged,\r\n            width: options.width\r\n        })\r\n    },\r\n    _createComponent: function($element, type, config) {\r\n        var that = this;\r\n        config = config || {};\r\n        that._extendConfig(config, {\r\n            readOnly: that.option(\"readOnly\")\r\n        });\r\n        return that.callBase($element, type, config)\r\n    },\r\n    _attachSyncSubscriptions: function() {\r\n        var that = this;\r\n        that.on(\"optionChanged\", function(args) {\r\n            var optionFullName = args.fullName;\r\n            if (\"formData\" === optionFullName) {\r\n                if (!(0, _type.isDefined)(args.value)) {\r\n                    that._options.formData = args.value = {}\r\n                }\r\n                that._triggerOnFieldDataChangedByDataSet(args.value)\r\n            }\r\n            if (that._cachedLayoutManagers.length) {\r\n                (0, _iterator.each)(that._cachedLayoutManagers, function(index, layoutManager) {\r\n                    if (\"formData\" === optionFullName) {\r\n                        that._isDataUpdating = true;\r\n                        layoutManager.option(\"layoutData\", args.value);\r\n                        that._isDataUpdating = false\r\n                    }\r\n                    if (\"readOnly\" === args.name || \"disabled\" === args.name) {\r\n                        layoutManager.option(optionFullName, args.value)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        var rootNameOfComplexOption = this._getRootLevelOfExpectedComplexOption(args.fullName, [\"formData\", \"items\"]);\r\n        if (rootNameOfComplexOption) {\r\n            this._customHandlerOfComplexOption(args, rootNameOfComplexOption);\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"formData\":\r\n                if (!this.option(\"items\")) {\r\n                    this._invalidate()\r\n                } else {\r\n                    if ((0, _type.isEmptyObject)(args.value)) {\r\n                        this._resetValues()\r\n                    }\r\n                }\r\n                break;\r\n            case \"items\":\r\n            case \"colCount\":\r\n            case \"onFieldDataChanged\":\r\n            case \"onEditorEnterKey\":\r\n            case \"labelLocation\":\r\n            case \"alignItemLabels\":\r\n            case \"showColonAfterLabel\":\r\n            case \"customizeItem\":\r\n            case \"alignItemLabelsInAllGroups\":\r\n            case \"showRequiredMark\":\r\n            case \"showOptionalMark\":\r\n            case \"requiredMark\":\r\n            case \"optionalMark\":\r\n            case \"requiredMessage\":\r\n            case \"scrollingEnabled\":\r\n            case \"formID\":\r\n            case \"colCountByScreen\":\r\n            case \"screenByWidth\":\r\n            case \"stylingMode\":\r\n                this._invalidate();\r\n                break;\r\n            case \"showValidationSummary\":\r\n                this._renderValidationSummary();\r\n                break;\r\n            case \"minColWidth\":\r\n                if (\"auto\" === this.option(\"colCount\")) {\r\n                    this._invalidate()\r\n                }\r\n                break;\r\n            case \"readOnly\":\r\n                break;\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._rootLayoutManager.option(args.name, args.value);\r\n                this._alignLabels(this._rootLayoutManager, this._rootLayoutManager.isSingleColumnMode());\r\n                break;\r\n            case \"visible\":\r\n                this.callBase(args);\r\n                if (args.value) {\r\n                    (0, _dom.triggerShownEvent)(this.$element())\r\n                }\r\n                break;\r\n            case \"validationGroup\":\r\n                _validation_engine2.default.removeGroup(args.previousValue || this);\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _getRootLevelOfExpectedComplexOption: function(fullOptionName, expectedRootNames) {\r\n        var splitFullName = fullOptionName.split(\".\");\r\n        var result;\r\n        if (splitFullName.length > 1) {\r\n            var i;\r\n            var rootOptionName = splitFullName[0];\r\n            for (i = 0; i < expectedRootNames.length; i++) {\r\n                if (rootOptionName.search(expectedRootNames[i]) !== -1) {\r\n                    result = expectedRootNames[i]\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _tryCreateItemOptionAction: function(optionName, item, value, previousValue, itemPath) {\r\n        if (\"tabs\" === optionName) {\r\n            this._itemsRunTimeInfo.removeItemsByPathStartWith(\"\".concat(itemPath, \".tabs\"));\r\n            value = this._prepareItems(value, true, itemPath, true)\r\n        }\r\n        return (0, _uiForm6.default)(optionName, {\r\n            item: item,\r\n            value: value,\r\n            previousValue: previousValue,\r\n            itemsRunTimeInfo: this._itemsRunTimeInfo\r\n        })\r\n    },\r\n    _tryExecuteItemOptionAction: function(action) {\r\n        return action && action.tryExecute()\r\n    },\r\n    _updateValidationGroupAndSummaryIfNeeded: function(fullName) {\r\n        var optionName = (0, _uiForm7.getOptionNameFromFullName)(fullName);\r\n        if (ITEM_OPTIONS_FOR_VALIDATION_UPDATING.indexOf(optionName) > -1) {\r\n            _validation_engine2.default.addGroup(this._getValidationGroup());\r\n            if (this.option(\"showValidationSummary\")) {\r\n                this._validationSummary && this._validationSummary._initGroupRegistration()\r\n            }\r\n        }\r\n    },\r\n    _setLayoutManagerItemOption: function(layoutManager, optionName, value, path) {\r\n        var _this3 = this;\r\n        if (this._updateLockCount > 0) {\r\n            !layoutManager._updateLockCount && layoutManager.beginUpdate();\r\n            var key = this._itemsRunTimeInfo.getKeyByPath(path);\r\n            this.postponedOperations.add(key, function() {\r\n                layoutManager.endUpdate();\r\n                return (new _deferred.Deferred).resolve()\r\n            })\r\n        }\r\n        var contentReadyHandler = function contentReadyHandler(e) {\r\n            e.component.off(\"contentReady\", contentReadyHandler);\r\n            if ((0, _uiForm7.isFullPathContainsTabs)(path)) {\r\n                var tabPath = (0, _uiForm7.tryGetTabPath)(path);\r\n                var tabLayoutManager = _this3._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(tabPath);\r\n                _this3._alignLabelsInColumn({\r\n                    items: tabLayoutManager.option(\"items\"),\r\n                    layoutManager: tabLayoutManager,\r\n                    $container: tabLayoutManager.$element(),\r\n                    inOneColumn: tabLayoutManager.isSingleColumnMode()\r\n                })\r\n            } else {\r\n                _this3._alignLabels(_this3._rootLayoutManager, _this3._rootLayoutManager.isSingleColumnMode())\r\n            }\r\n        };\r\n        layoutManager.on(\"contentReady\", contentReadyHandler);\r\n        layoutManager.option(optionName, value);\r\n        this._updateValidationGroupAndSummaryIfNeeded(optionName)\r\n    },\r\n    _tryChangeLayoutManagerItemOption: function(fullName, value) {\r\n        var nameParts = fullName.split(\".\");\r\n        var optionName = (0, _uiForm7.getOptionNameFromFullName)(fullName);\r\n        if (\"items\" === optionName && nameParts.length > 1) {\r\n            var itemPath = this._getItemPath(nameParts);\r\n            var layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(itemPath);\r\n            if (layoutManager) {\r\n                this._itemsRunTimeInfo.removeItemsByItems(layoutManager.getItemsRunTimeInfo());\r\n                var items = this._prepareItems(value, false, itemPath);\r\n                this._setLayoutManagerItemOption(layoutManager, optionName, items, itemPath);\r\n                return true\r\n            }\r\n        } else {\r\n            if (nameParts.length > 2) {\r\n                var endPartIndex = nameParts.length - 2;\r\n                var _itemPath = this._getItemPath(nameParts.slice(0, endPartIndex));\r\n                var _layoutManager = this._itemsRunTimeInfo.getGroupOrTabLayoutManagerByPath(_itemPath);\r\n                if (_layoutManager) {\r\n                    var fullOptionName = (0, _uiForm7.getFullOptionName)(nameParts[endPartIndex], optionName);\r\n                    this._setLayoutManagerItemOption(_layoutManager, fullOptionName, value, _itemPath);\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _tryChangeLayoutManagerItemOptions: function(itemPath, options) {\r\n        var _this4 = this;\r\n        var result;\r\n        this.beginUpdate();\r\n        (0, _iterator.each)(options, function(optionName, optionValue) {\r\n            result = _this4._tryChangeLayoutManagerItemOption((0, _uiForm7.getFullOptionName)(itemPath, optionName), optionValue);\r\n            if (!result) {\r\n                return false\r\n            }\r\n        });\r\n        this.endUpdate();\r\n        return result\r\n    },\r\n    _customHandlerOfComplexOption: function(args, rootOptionName) {\r\n        var nameParts = args.fullName.split(\".\");\r\n        var value = args.value;\r\n        if (\"items\" === rootOptionName) {\r\n            var itemPath = this._getItemPath(nameParts);\r\n            var item = this.option(itemPath);\r\n            var optionNameWithoutPath = args.fullName.replace(itemPath + \".\", \"\");\r\n            var simpleOptionName = optionNameWithoutPath.split(\".\")[0].replace(/\\[\\d+]/, \"\");\r\n            var itemAction = this._tryCreateItemOptionAction(simpleOptionName, item, item[simpleOptionName], args.previousValue, itemPath);\r\n            if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(args.fullName, value)) {\r\n                if (item) {\r\n                    this._changeItemOption(item, optionNameWithoutPath, value);\r\n                    var items = this._generateItemsFromData(this.option(\"items\"));\r\n                    this.option(\"items\", items)\r\n                }\r\n            }\r\n        }\r\n        if (\"formData\" === rootOptionName) {\r\n            var dataField = nameParts.slice(1).join(\".\");\r\n            var editor = this.getEditor(dataField);\r\n            if (editor) {\r\n                editor.option(\"value\", value)\r\n            } else {\r\n                this._triggerOnFieldDataChanged({\r\n                    dataField: dataField,\r\n                    value: value\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _getItemPath: function(nameParts) {\r\n        var itemPath = nameParts[0];\r\n        var i;\r\n        for (i = 1; i < nameParts.length; i++) {\r\n            if (nameParts[i].search(/items\\[\\d+]|tabs\\[\\d+]/) !== -1) {\r\n                itemPath += \".\" + nameParts[i]\r\n            } else {\r\n                break\r\n            }\r\n        }\r\n        return itemPath\r\n    },\r\n    _triggerOnFieldDataChanged: function(args) {\r\n        this._createActionByOption(\"onFieldDataChanged\")(args)\r\n    },\r\n    _triggerOnFieldDataChangedByDataSet: function(data) {\r\n        var that = this;\r\n        if (data && (0, _type.isObject)(data)) {\r\n            (0, _iterator.each)(data, function(dataField, value) {\r\n                that._triggerOnFieldDataChanged({\r\n                    dataField: dataField,\r\n                    value: value\r\n                })\r\n            })\r\n        }\r\n    },\r\n    _updateFieldValue: function(dataField, value) {\r\n        if ((0, _type.isDefined)(this.option(\"formData\"))) {\r\n            var editor = this.getEditor(dataField);\r\n            this.option(\"formData.\" + dataField, value);\r\n            if (editor) {\r\n                var editorValue = editor.option(\"value\");\r\n                if (editorValue !== value) {\r\n                    editor.option(\"value\", value)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _generateItemsFromData: function(items) {\r\n        var formData = this.option(\"formData\");\r\n        var result = [];\r\n        if (!items && (0, _type.isDefined)(formData)) {\r\n            (0, _iterator.each)(formData, function(dataField) {\r\n                result.push({\r\n                    dataField: dataField\r\n                })\r\n            })\r\n        }\r\n        if (items) {\r\n            (0, _iterator.each)(items, function(index, item) {\r\n                if ((0, _type.isObject)(item)) {\r\n                    result.push(item)\r\n                } else {\r\n                    result.push({\r\n                        dataField: item\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    _getItemByField: function(field, items) {\r\n        var that = this;\r\n        var fieldParts = (0, _type.isObject)(field) ? field : that._getFieldParts(field);\r\n        var fieldName = fieldParts.fieldName;\r\n        var fieldPath = fieldParts.fieldPath;\r\n        var resultItem;\r\n        if (items.length) {\r\n            (0, _iterator.each)(items, function(index, item) {\r\n                var itemType = item.itemType;\r\n                if (fieldPath.length) {\r\n                    var path = fieldPath.slice();\r\n                    item = that._getItemByFieldPath(path, fieldName, item)\r\n                } else {\r\n                    if (\"group\" === itemType && !(item.caption || item.name) || \"tabbed\" === itemType && !item.name) {\r\n                        var subItemsField = that._getSubItemField(itemType);\r\n                        item.items = that._generateItemsFromData(item.items);\r\n                        item = that._getItemByField({\r\n                            fieldName: fieldName,\r\n                            fieldPath: fieldPath\r\n                        }, item[subItemsField])\r\n                    }\r\n                }\r\n                if ((0, _uiForm7.isExpectedItem)(item, fieldName)) {\r\n                    resultItem = item;\r\n                    return false\r\n                }\r\n            })\r\n        }\r\n        return resultItem\r\n    },\r\n    _getFieldParts: function(field) {\r\n        var fieldSeparator = \".\";\r\n        var fieldName = field;\r\n        var separatorIndex = fieldName.indexOf(fieldSeparator);\r\n        var resultPath = [];\r\n        while (separatorIndex !== -1) {\r\n            resultPath.push(fieldName.substr(0, separatorIndex));\r\n            fieldName = fieldName.substr(separatorIndex + 1);\r\n            separatorIndex = fieldName.indexOf(fieldSeparator)\r\n        }\r\n        return {\r\n            fieldName: fieldName,\r\n            fieldPath: resultPath.reverse()\r\n        }\r\n    },\r\n    _getItemByFieldPath: function(path, fieldName, item) {\r\n        var that = this;\r\n        var itemType = item.itemType;\r\n        var subItemsField = that._getSubItemField(itemType);\r\n        var isItemWithSubItems = \"group\" === itemType || \"tabbed\" === itemType || item.title;\r\n        var result;\r\n        do {\r\n            if (isItemWithSubItems) {\r\n                var name = item.name || item.caption || item.title;\r\n                var isGroupWithName = (0, _type.isDefined)(name);\r\n                var nameWithoutSpaces = (0, _uiForm7.getTextWithoutSpaces)(name);\r\n                var pathNode;\r\n                item[subItemsField] = that._generateItemsFromData(item[subItemsField]);\r\n                if (isGroupWithName) {\r\n                    pathNode = path.pop()\r\n                }\r\n                if (!path.length) {\r\n                    result = that._getItemByField(fieldName, item[subItemsField]);\r\n                    if (result) {\r\n                        break\r\n                    }\r\n                }\r\n                if (!isGroupWithName || isGroupWithName && nameWithoutSpaces === pathNode) {\r\n                    if (path.length) {\r\n                        result = that._searchItemInEverySubItem(path, fieldName, item[subItemsField])\r\n                    }\r\n                }\r\n            } else {\r\n                break\r\n            }\r\n        } while (path.length && !(0, _type.isDefined)(result));\r\n        return result\r\n    },\r\n    _getSubItemField: function(itemType) {\r\n        return \"tabbed\" === itemType ? \"tabs\" : \"items\"\r\n    },\r\n    _searchItemInEverySubItem: function(path, fieldName, items) {\r\n        var that = this;\r\n        var result;\r\n        (0, _iterator.each)(items, function(index, groupItem) {\r\n            result = that._getItemByFieldPath(path.slice(), fieldName, groupItem);\r\n            if (result) {\r\n                return false\r\n            }\r\n        });\r\n        if (!result) {\r\n            result = false\r\n        }\r\n        return result\r\n    },\r\n    _changeItemOption: function(item, option, value) {\r\n        if ((0, _type.isObject)(item)) {\r\n            item[option] = value\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        var currentScreenFactor = this._getCurrentScreenFactor();\r\n        if (this._lastMarkupScreenFactor !== currentScreenFactor) {\r\n            if (this._isColCountChanged(this._lastMarkupScreenFactor, currentScreenFactor)) {\r\n                this._targetScreenFactor = currentScreenFactor;\r\n                this._refresh();\r\n                this._targetScreenFactor = void 0\r\n            }\r\n            this._lastMarkupScreenFactor = currentScreenFactor\r\n        }\r\n    },\r\n    _isColCountChanged: function(oldScreenSize, newScreenSize) {\r\n        var isChanged = false;\r\n        (0, _iterator.each)(this._cachedColCountOptions, function(index, item) {\r\n            if (item.colCountByScreen[oldScreenSize] !== item.colCountByScreen[newScreenSize]) {\r\n                isChanged = true;\r\n                return false\r\n            }\r\n        });\r\n        return isChanged\r\n    },\r\n    _refresh: function() {\r\n        var editorSelector = \".\" + FOCUSED_STATE_CLASS + \" input, .\" + FOCUSED_STATE_CLASS + \" textarea\";\r\n        _events_engine2.default.trigger(this.$element().find(editorSelector), \"change\");\r\n        this.callBase()\r\n    },\r\n    _resetValues: function() {\r\n        this._itemsRunTimeInfo.each(function(_, itemRunTimeInfo) {\r\n            if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance) && itemRunTimeInfo.widgetInstance instanceof _editor2.default) {\r\n                itemRunTimeInfo.widgetInstance.reset();\r\n                itemRunTimeInfo.widgetInstance.option(\"isValid\", true)\r\n            }\r\n        });\r\n        _validation_engine2.default.resetGroup(this._getValidationGroup())\r\n    },\r\n    _updateData: function(data, value, isComplexData) {\r\n        var that = this;\r\n        var _data = isComplexData ? value : data;\r\n        if ((0, _type.isObject)(_data)) {\r\n            (0, _iterator.each)(_data, function(dataField, fieldValue) {\r\n                that._updateData(isComplexData ? data + \".\" + dataField : dataField, fieldValue, (0, _type.isObject)(fieldValue))\r\n            })\r\n        } else {\r\n            if ((0, _type.isString)(data)) {\r\n                that._updateFieldValue(data, value)\r\n            }\r\n        }\r\n    },\r\n    registerKeyHandler: function(key, handler) {\r\n        this.callBase(key, handler);\r\n        this._itemsRunTimeInfo.each(function(_, itemRunTimeInfo) {\r\n            if ((0, _type.isDefined)(itemRunTimeInfo.widgetInstance)) {\r\n                itemRunTimeInfo.widgetInstance.registerKeyHandler(key, handler)\r\n            }\r\n        })\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element().find(\".\" + FIELD_ITEM_CONTENT_CLASS + \" [tabindex]\").first()\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible && _browser2.default.msie) {\r\n            this._refresh()\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        _validation_engine2.default.removeGroup(this._getValidationGroup());\r\n        this.callBase()\r\n    },\r\n    resetValues: function() {\r\n        this._resetValues()\r\n    },\r\n    updateData: function(data, value) {\r\n        this._updateData(data, value)\r\n    },\r\n    getEditor: function(dataField) {\r\n        return this._itemsRunTimeInfo.findWidgetInstanceByDataField(dataField) || this._itemsRunTimeInfo.findWidgetInstanceByName(dataField)\r\n    },\r\n    getButton: function(name) {\r\n        return this._itemsRunTimeInfo.findWidgetInstanceByName(name)\r\n    },\r\n    updateDimensions: function() {\r\n        var that = this;\r\n        var deferred = new _deferred.Deferred;\r\n        if (that._scrollable) {\r\n            that._scrollable.update().done(function() {\r\n                deferred.resolveWith(that)\r\n            })\r\n        } else {\r\n            deferred.resolveWith(that)\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    itemOption: function(id, option, value) {\r\n        var _this5 = this;\r\n        var items = this._generateItemsFromData(this.option(\"items\"));\r\n        var item = this._getItemByField(id, items);\r\n        var path = this._itemsRunTimeInfo.getPathFromItem(item);\r\n        if (!item) {\r\n            return\r\n        }\r\n        switch (arguments.length) {\r\n            case 1:\r\n                return item;\r\n            case 3:\r\n                var itemAction = this._tryCreateItemOptionAction(option, item, value, item[option], path);\r\n                this._changeItemOption(item, option, value);\r\n                var fullName = (0, _uiForm7.getFullOptionName)(path, option);\r\n                if (!this._tryExecuteItemOptionAction(itemAction) && !this._tryChangeLayoutManagerItemOption(fullName, value)) {\r\n                    this.option(\"items\", items)\r\n                }\r\n                break;\r\n            default:\r\n                if ((0, _type.isObject)(option)) {\r\n                    if (!this._tryChangeLayoutManagerItemOptions(path, option)) {\r\n                        var allowUpdateItems;\r\n                        (0, _iterator.each)(option, function(optionName, optionValue) {\r\n                            var itemAction = _this5._tryCreateItemOptionAction(optionName, item, optionValue, item[optionName], path);\r\n                            _this5._changeItemOption(item, optionName, optionValue);\r\n                            if (!allowUpdateItems && !_this5._tryExecuteItemOptionAction(itemAction)) {\r\n                                allowUpdateItems = true\r\n                            }\r\n                        });\r\n                        allowUpdateItems && this.option(\"items\", items)\r\n                    }\r\n                }\r\n        }\r\n    },\r\n    validate: function() {\r\n        return _validation_engine2.default.validateGroup(this._getValidationGroup())\r\n    },\r\n    getItemID: function(name) {\r\n        return \"dx_\" + this.option(\"formID\") + \"_\" + (name || new _guid2.default)\r\n    },\r\n    getTargetScreenFactor: function() {\r\n        return this._targetScreenFactor\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxForm\", Form);\r\nmodule.exports = Form;\r\n"]},"metadata":{},"sourceType":"script"}