{"ast":null,"code":"/**\r\n * DevExtreme (ui/diagram/ui.diagram.commands.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _diagram_importer = require(\"./diagram_importer\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _file_saver = require(\"../../exporter/file_saver\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar SEPARATOR = {\n  widget: \"separator\"\n};\nvar CSS_CLASSES = {\n  SMALL_SELECT: \"dx-diagram-select-sm\",\n  BUTTON_SELECT: \"dx-diagram-select-b\",\n  BUTTON_COLOR: \"dx-diagram-color-b\"\n};\nvar DiagramCommands = {\n  getAllToolbarCommands: function getAllToolbarCommands() {\n    var _this = this;\n\n    var _getDiagram = (0, _diagram_importer.getDiagram)(),\n        DiagramCommand = _getDiagram.DiagramCommand;\n\n    return this.toolbarCommands || (this.toolbarCommands = {\n      separator: SEPARATOR,\n      \"export\": {\n        widget: \"dxButton\",\n        icon: \"export\",\n        text: _message2.default.format(\"dxDiagram-commandExport\"),\n        hint: _message2.default.format(\"dxDiagram-commandExport\"),\n        items: [{\n          command: DiagramCommand.ExportSvg,\n          text: _message2.default.format(\"dxDiagram-commandExportToSvg\"),\n          getParameter: function getParameter(widget) {\n            return function (dataURI) {\n              return _this._exportTo(widget, dataURI, \"SVG\", \"image/svg+xml\");\n            };\n          }\n        }, {\n          command: DiagramCommand.ExportPng,\n          text: _message2.default.format(\"dxDiagram-commandExportToPng\"),\n          getParameter: function getParameter(widget) {\n            return function (dataURI) {\n              return _this._exportTo(widget, dataURI, \"PNG\", \"image/png\");\n            };\n          }\n        }, {\n          command: DiagramCommand.ExportJpg,\n          text: _message2.default.format(\"dxDiagram-commandExportToJpg\"),\n          getParameter: function getParameter(widget) {\n            return function (dataURI) {\n              return _this._exportTo(widget, dataURI, \"JPEG\", \"image/jpeg\");\n            };\n          }\n        }]\n      },\n      undo: {\n        command: DiagramCommand.Undo,\n        hint: _message2.default.format(\"dxDiagram-commandUndo\"),\n        text: _message2.default.format(\"dxDiagram-commandUndo\"),\n        icon: \"undo\"\n      },\n      redo: {\n        command: DiagramCommand.Redo,\n        hint: _message2.default.format(\"dxDiagram-commandRedo\"),\n        text: _message2.default.format(\"dxDiagram-commandRedo\"),\n        icon: \"redo\"\n      },\n      cut: {\n        command: DiagramCommand.Cut,\n        hint: _message2.default.format(\"dxDiagram-commandCut\"),\n        text: _message2.default.format(\"dxDiagram-commandCut\"),\n        icon: \"cut\"\n      },\n      copy: {\n        command: DiagramCommand.Copy,\n        hint: _message2.default.format(\"dxDiagram-commandCopy\"),\n        text: _message2.default.format(\"dxDiagram-commandCopy\"),\n        icon: \"copy\"\n      },\n      paste: {\n        command: DiagramCommand.PasteInPosition,\n        hint: _message2.default.format(\"dxDiagram-commandPaste\"),\n        text: _message2.default.format(\"dxDiagram-commandPaste\"),\n        icon: \"paste\",\n        getParameter: function getParameter(diagramContextMenu) {\n          return diagramContextMenu.clickPosition;\n        }\n      },\n      selectAll: {\n        command: DiagramCommand.SelectAll,\n        hint: _message2.default.format(\"dxDiagram-commandSelectAll\"),\n        text: _message2.default.format(\"dxDiagram-commandSelectAll\"),\n        icon: \"dx-diagram-i-button-select-all dx-diagram-i\"\n      },\n      \"delete\": {\n        command: DiagramCommand.Delete,\n        hint: _message2.default.format(\"dxDiagram-commandDelete\"),\n        text: _message2.default.format(\"dxDiagram-commandDelete\"),\n        icon: \"remove\"\n      },\n      fontName: {\n        command: DiagramCommand.FontName,\n        hint: _message2.default.format(\"dxDiagram-commandFontName\"),\n        widget: \"dxSelectBox\",\n        items: [\"Arial\", \"Arial Black\", \"Helvetica\", \"Times New Roman\", \"Courier New\", \"Courier\", \"Verdana\", \"Georgia\", \"Comic Sans MS\", \"Trebuchet MS\"]\n      },\n      fontSize: {\n        command: DiagramCommand.FontSize,\n        hint: _message2.default.format(\"dxDiagram-commandFontSize\"),\n        widget: \"dxSelectBox\",\n        items: [\"8pt\", \"9pt\", \"10pt\", \"11pt\", \"12pt\", \"14pt\", \"16pt\", \"18pt\", \"20pt\", \"22pt\", \"24pt\", \"26pt\", \"28pt\", \"36pt\", \"48pt\", \"72pt\"],\n        cssClass: CSS_CLASSES.SMALL_SELECT\n      },\n      bold: {\n        command: DiagramCommand.Bold,\n        hint: _message2.default.format(\"dxDiagram-commandBold\"),\n        text: _message2.default.format(\"dxDiagram-commandBold\"),\n        icon: \"bold\"\n      },\n      italic: {\n        command: DiagramCommand.Italic,\n        hint: _message2.default.format(\"dxDiagram-commandItalic\"),\n        text: _message2.default.format(\"dxDiagram-commandItalic\"),\n        icon: \"italic\"\n      },\n      underline: {\n        command: DiagramCommand.Underline,\n        hint: _message2.default.format(\"dxDiagram-commandUnderline\"),\n        text: _message2.default.format(\"dxDiagram-commandUnderline\"),\n        icon: \"underline\"\n      },\n      fontColor: {\n        command: DiagramCommand.FontColor,\n        text: _message2.default.format(\"dxDiagram-commandTextColor\"),\n        hint: _message2.default.format(\"dxDiagram-commandTextColor\"),\n        widget: \"dxColorBox\",\n        icon: \"dx-icon dx-icon-color\",\n        cssClass: CSS_CLASSES.BUTTON_COLOR\n      },\n      lineColor: {\n        command: DiagramCommand.StrokeColor,\n        text: _message2.default.format(\"dxDiagram-commandLineColor\"),\n        hint: _message2.default.format(\"dxDiagram-commandLineColor\"),\n        widget: \"dxColorBox\",\n        icon: \"dx-icon dx-icon-background\",\n        cssClass: CSS_CLASSES.BUTTON_COLOR\n      },\n      fillColor: {\n        command: DiagramCommand.FillColor,\n        text: _message2.default.format(\"dxDiagram-commandFillColor\"),\n        hint: _message2.default.format(\"dxDiagram-commandFillColor\"),\n        widget: \"dxColorBox\",\n        icon: \"dx-diagram-i dx-diagram-i-button-fill\",\n        cssClass: CSS_CLASSES.BUTTON_COLOR\n      },\n      textAlignLeft: {\n        command: DiagramCommand.TextLeftAlign,\n        hint: _message2.default.format(\"dxDiagram-commandAlignLeft\"),\n        text: _message2.default.format(\"dxDiagram-commandAlignLeft\"),\n        icon: \"alignleft\"\n      },\n      textAlignCenter: {\n        command: DiagramCommand.TextCenterAlign,\n        hint: _message2.default.format(\"dxDiagram-commandAlignCenter\"),\n        text: _message2.default.format(\"dxDiagram-commandAlignCenter\"),\n        icon: \"aligncenter\"\n      },\n      textAlignRight: {\n        command: DiagramCommand.TextRightAlign,\n        hint: _message2.default.format(\"dxDiagram-commandAlignRight\"),\n        text: _message2.default.format(\"dxDiagram-commandAlignRight\"),\n        icon: \"alignright\"\n      },\n      lock: {\n        command: DiagramCommand.Lock,\n        hint: _message2.default.format(\"dxDiagram-commandLock\"),\n        text: _message2.default.format(\"dxDiagram-commandLock\"),\n        icon: \"dx-diagram-i-button-lock dx-diagram-i\"\n      },\n      unlock: {\n        command: DiagramCommand.Unlock,\n        hint: _message2.default.format(\"dxDiagram-commandUnlock\"),\n        text: _message2.default.format(\"dxDiagram-commandUnlock\"),\n        icon: \"dx-diagram-i-button-unlock dx-diagram-i\"\n      },\n      bringToFront: {\n        command: DiagramCommand.BringToFront,\n        hint: _message2.default.format(\"dxDiagram-commandBringToFront\"),\n        text: _message2.default.format(\"dxDiagram-commandBringToFront\"),\n        icon: \"dx-diagram-i-button-bring-to-front dx-diagram-i\"\n      },\n      sendToBack: {\n        command: DiagramCommand.SendToBack,\n        hint: _message2.default.format(\"dxDiagram-commandSendToBack\"),\n        text: _message2.default.format(\"dxDiagram-commandSendToBack\"),\n        icon: \"dx-diagram-i-button-send-to-back dx-diagram-i\"\n      },\n      insertShapeImage: {\n        command: DiagramCommand.InsertShapeImage,\n        text: _message2.default.format(\"dxDiagram-commandInsertShapeImage\"),\n        icon: \"dx-diagram-i-button-image-insert dx-diagram-i\"\n      },\n      editShapeImage: {\n        command: DiagramCommand.EditShapeImage,\n        text: _message2.default.format(\"dxDiagram-commandEditShapeImage\"),\n        icon: \"dx-diagram-i-button-image-edit dx-diagram-i\"\n      },\n      deleteShapeImage: {\n        command: DiagramCommand.DeleteShapeImage,\n        text: _message2.default.format(\"dxDiagram-commandDeleteShapeImage\"),\n        icon: \"dx-diagram-i-button-image-delete dx-diagram-i\"\n      },\n      connectorLineType: {\n        command: DiagramCommand.ConnectorLineOption,\n        widget: \"dxSelectBox\",\n        hint: _message2.default.format(\"dxDiagram-commandConnectorLineType\"),\n        items: [{\n          value: 0,\n          icon: \"dx-diagram-i-connector-straight dx-diagram-i\",\n          hint: _message2.default.format(\"dxDiagram-commandConnectorLineStraight\")\n        }, {\n          value: 1,\n          icon: \"dx-diagram-i-connector-orthogonal dx-diagram-i\",\n          hint: _message2.default.format(\"dxDiagram-commandConnectorLineOrthogonal\")\n        }],\n        displayExpr: \"name\",\n        valueExpr: \"value\",\n        cssClass: CSS_CLASSES.BUTTON_SELECT\n      },\n      connectorLineStart: {\n        command: DiagramCommand.ConnectorStartLineEnding,\n        widget: \"dxSelectBox\",\n        items: [{\n          value: 0,\n          icon: \"dx-diagram-i-connector-begin-none dx-diagram-i\",\n          hint: _message2.default.format(\"dxDiagram-commandConnectorLineNone\")\n        }, {\n          value: 1,\n          icon: \"dx-diagram-i-connector-begin-arrow dx-diagram-i\",\n          hint: _message2.default.format(\"dxDiagram-commandConnectorLineArrow\")\n        }],\n        displayExpr: \"name\",\n        valueExpr: \"value\",\n        hint: _message2.default.format(\"dxDiagram-commandConnectorLineStart\"),\n        cssClass: CSS_CLASSES.BUTTON_SELECT\n      },\n      connectorLineEnd: {\n        command: DiagramCommand.ConnectorEndLineEnding,\n        widget: \"dxSelectBox\",\n        items: [{\n          value: 0,\n          icon: \"dx-diagram-i-connector-begin-none dx-diagram-i\",\n          hint: _message2.default.format(\"dxDiagram-commandConnectorLineNone\")\n        }, {\n          value: 1,\n          icon: \"dx-diagram-i-connector-begin-arrow dx-diagram-i\",\n          hint: _message2.default.format(\"dxDiagram-commandConnectorLineArrow\")\n        }],\n        displayExpr: \"name\",\n        valueExpr: \"value\",\n        hint: _message2.default.format(\"dxDiagram-commandConnectorLineEnd\"),\n        cssClass: CSS_CLASSES.BUTTON_SELECT\n      },\n      autoLayout: {\n        widget: \"dxButton\",\n        text: _message2.default.format(\"dxDiagram-commandAutoLayout\"),\n        showText: \"always\",\n        items: [{\n          text: _message2.default.format(\"dxDiagram-commandAutoLayoutTree\"),\n          items: [{\n            command: DiagramCommand.AutoLayoutTreeVertical,\n            text: _message2.default.format(\"dxDiagram-commandAutoLayoutVertical\")\n          }, {\n            command: DiagramCommand.AutoLayoutTreeHorizontal,\n            text: _message2.default.format(\"dxDiagram-commandAutoLayoutHorizontal\")\n          }]\n        }, {\n          text: _message2.default.format(\"dxDiagram-commandAutoLayoutLayered\"),\n          items: [{\n            command: DiagramCommand.AutoLayoutLayeredVertical,\n            text: _message2.default.format(\"dxDiagram-commandAutoLayoutVertical\")\n          }, {\n            command: DiagramCommand.AutoLayoutLayeredHorizontal,\n            text: _message2.default.format(\"dxDiagram-commandAutoLayoutHorizontal\")\n          }]\n        }]\n      },\n      fullScreen: {\n        command: DiagramCommand.Fullscreen,\n        hint: _message2.default.format(\"dxDiagram-commandFullscreen\"),\n        text: _message2.default.format(\"dxDiagram-commandFullscreen\"),\n        icon: \"dx-diagram-i dx-diagram-i-button-fullscreen\",\n        cssClass: CSS_CLASSES.BUTTON_COLOR\n      }\n    });\n  },\n  getToolbarCommands: function getToolbarCommands(commandNames) {\n    var commands = this.getAllToolbarCommands();\n\n    if (commandNames) {\n      return commandNames.map(function (cn) {\n        return commands[cn];\n      }).filter(function (c) {\n        return c;\n      });\n    }\n\n    return [commands.export, commands.separator, commands.undo, commands.redo, commands.separator, commands.fontName, commands.fontSize, commands.separator, commands.bold, commands.italic, commands.underline, commands.separator, commands.fontColor, commands.lineColor, commands.fillColor, commands.separator, commands.textAlignLeft, commands.textAlignCenter, commands.textAlignRight, commands.separator, commands.connectorLineType, commands.connectorLineStart, commands.connectorLineEnd, commands.separator, commands.autoLayout, commands.separator, commands.fullScreen];\n  },\n  getAllPropertyPanelCommands: function getAllPropertyPanelCommands() {\n    var _getDiagram2 = (0, _diagram_importer.getDiagram)(),\n        DiagramCommand = _getDiagram2.DiagramCommand;\n\n    return this.propertyPanelCommands || (this.propertyPanelCommands = {\n      units: {\n        command: DiagramCommand.ViewUnits,\n        text: _message2.default.format(\"dxDiagram-commandUnits\"),\n        widget: \"dxSelectBox\"\n      },\n      pageSize: {\n        command: DiagramCommand.PageSize,\n        text: _message2.default.format(\"dxDiagram-commandPageSize\"),\n        widget: \"dxSelectBox\",\n        getValue: function getValue(v) {\n          return JSON.parse(v);\n        },\n        setValue: function setValue(v) {\n          return JSON.stringify(v);\n        }\n      },\n      pageOrientation: {\n        command: DiagramCommand.PageLandscape,\n        text: _message2.default.format(\"dxDiagram-commandPageOrientation\"),\n        widget: \"dxSelectBox\",\n        items: [{\n          value: true,\n          title: _message2.default.format(\"dxDiagram-commandPageOrientationLandscape\")\n        }, {\n          value: false,\n          title: _message2.default.format(\"dxDiagram-commandPageOrientationPortrait\")\n        }]\n      },\n      pageColor: {\n        command: DiagramCommand.PageColor,\n        text: _message2.default.format(\"dxDiagram-commandPageColor\"),\n        widget: \"dxColorBox\"\n      },\n      showGrid: {\n        command: DiagramCommand.ShowGrid,\n        text: _message2.default.format(\"dxDiagram-commandShowGrid\"),\n        widget: \"dxCheckBox\"\n      },\n      snapToGrid: {\n        command: DiagramCommand.SnapToGrid,\n        text: _message2.default.format(\"dxDiagram-commandSnapToGrid\"),\n        widget: \"dxCheckBox\"\n      },\n      gridSize: {\n        command: DiagramCommand.GridSize,\n        text: _message2.default.format(\"dxDiagram-commandGridSize\"),\n        widget: \"dxSelectBox\"\n      },\n      zoomLevel: {\n        command: DiagramCommand.ZoomLevel,\n        text: _message2.default.format(\"dxDiagram-commandZoomLevel\"),\n        widget: \"dxSelectBox\"\n      },\n      autoZoom: {\n        command: DiagramCommand.ToggleAutoZoom,\n        text: _message2.default.format(\"dxDiagram-commandAutoZoom\"),\n        widget: \"dxCheckBox\"\n      },\n      simpleView: {\n        command: DiagramCommand.ToggleSimpleView,\n        text: _message2.default.format(\"dxDiagram-commandSimpleView\"),\n        widget: \"dxCheckBox\"\n      }\n    });\n  },\n  getDefaultPropertyPanelCommandGroups: function getDefaultPropertyPanelCommandGroups() {\n    return [{\n      commands: [\"units\"]\n    }, {\n      commands: [\"pageSize\", \"pageOrientation\", \"pageColor\"]\n    }, {\n      commands: [\"showGrid\", \"snapToGrid\", \"gridSize\"]\n    }, {\n      commands: [\"zoomLevel\", \"autoZoom\", \"simpleView\"]\n    }];\n  },\n  getPropertyPanelCommandsByGroups: function getPropertyPanelCommandsByGroups(groups) {\n    var commands = DiagramCommands.getAllPropertyPanelCommands();\n    var result = [];\n    groups.forEach(function (g, gi) {\n      g.commands.forEach(function (cn, ci) {\n        result.push((0, _extend.extend)(commands[cn], {\n          beginGroup: gi > 0 && 0 === ci\n        }));\n      });\n    });\n    return result;\n  },\n  getPropertyPanelCommands: function getPropertyPanelCommands(commandGroups) {\n    commandGroups = commandGroups || DiagramCommands.getDefaultPropertyPanelCommandGroups();\n    return DiagramCommands.getPropertyPanelCommandsByGroups(commandGroups);\n  },\n  getAllContextMenuCommands: function getAllContextMenuCommands() {\n    var _getDiagram3 = (0, _diagram_importer.getDiagram)(),\n        DiagramCommand = _getDiagram3.DiagramCommand;\n\n    return this.contextMenuCommands || (this.contextMenuCommands = {\n      separator: SEPARATOR,\n      cut: {\n        command: DiagramCommand.Cut,\n        text: _message2.default.format(\"dxDiagram-commandCut\"),\n        icon: \"cut\"\n      },\n      copy: {\n        command: DiagramCommand.Copy,\n        text: _message2.default.format(\"dxDiagram-commandCopy\"),\n        icon: \"copy\"\n      },\n      paste: {\n        command: DiagramCommand.PasteInPosition,\n        text: _message2.default.format(\"dxDiagram-commandPaste\"),\n        getParameter: function getParameter(diagramContextMenu) {\n          return diagramContextMenu.clickPosition;\n        },\n        icon: \"paste\"\n      },\n      selectAll: {\n        command: DiagramCommand.SelectAll,\n        text: _message2.default.format(\"dxDiagram-commandSelectAll\"),\n        icon: \"dx-diagram-i-menu-select-all dx-diagram-i\"\n      },\n      \"delete\": {\n        command: DiagramCommand.Delete,\n        text: _message2.default.format(\"dxDiagram-commandDelete\"),\n        icon: \"remove\"\n      },\n      bringToFront: {\n        command: DiagramCommand.BringToFront,\n        text: _message2.default.format(\"dxDiagram-commandBringToFront\"),\n        icon: \"dx-diagram-i-menu-bring-to-front dx-diagram-i\"\n      },\n      sendToBack: {\n        command: DiagramCommand.SendToBack,\n        text: _message2.default.format(\"dxDiagram-commandSendToBack\"),\n        icon: \"dx-diagram-i-menu-send-to-back dx-diagram-i\"\n      },\n      lock: {\n        command: DiagramCommand.Lock,\n        text: _message2.default.format(\"dxDiagram-commandLock\"),\n        icon: \"dx-diagram-i-menu-lock dx-diagram-i\"\n      },\n      unlock: {\n        command: DiagramCommand.Unlock,\n        text: _message2.default.format(\"dxDiagram-commandUnlock\"),\n        icon: \"dx-diagram-i-menu-unlock dx-diagram-i\"\n      },\n      insertShapeImage: {\n        command: DiagramCommand.InsertShapeImage,\n        text: _message2.default.format(\"dxDiagram-commandInsertShapeImage\"),\n        icon: \"dx-diagram-i-menu-image-insert dx-diagram-i\"\n      },\n      editShapeImage: {\n        command: DiagramCommand.EditShapeImage,\n        text: _message2.default.format(\"dxDiagram-commandEditShapeImage\"),\n        icon: \"dx-diagram-i-menu-image-edit dx-diagram-i\"\n      },\n      deleteShapeImage: {\n        command: DiagramCommand.DeleteShapeImage,\n        text: _message2.default.format(\"dxDiagram-commandDeleteShapeImage\"),\n        icon: \"dx-diagram-i-menu-image-delete dx-diagram-i\"\n      }\n    });\n  },\n  getContextMenuCommands: function getContextMenuCommands(commandNames) {\n    var commands = this.getAllContextMenuCommands();\n\n    if (commandNames) {\n      return commandNames.map(function (cn) {\n        return commands[cn];\n      }).filter(function (c) {\n        return c;\n      });\n    }\n\n    return [commands.cut, commands.copy, commands.paste, commands.delete, commands.separator, commands.selectAll, commands.separator, commands.bringToFront, commands.sendToBack, commands.separator, commands.lock, commands.unlock, commands.separator, commands.insertShapeImage, commands.editShapeImage, commands.deleteShapeImage];\n  },\n  _exportTo: function _exportTo(widget, dataURI, format, mimeString) {\n    var window = (0, _window.getWindow)();\n\n    if (window && window.atob && (0, _type.isFunction)(window.Blob)) {\n      var blob = this._getBlobByDataURI(window, dataURI, mimeString);\n\n      var options = widget.option(\"export\");\n\n      _file_saver.fileSaver.saveAs(options.fileName || \"foo\", format, blob, options.proxyURL);\n    }\n  },\n  _getBlobByDataURI: function _getBlobByDataURI(window, dataURI, mimeString) {\n    var byteString = window.atob(dataURI.split(\",\")[1]);\n    var ia = new Uint8Array(byteString.length);\n\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n\n    return new window.Blob([ia.buffer], {\n      type: mimeString\n    });\n  }\n};\nmodule.exports = DiagramCommands;","map":null,"metadata":{},"sourceType":"script"}