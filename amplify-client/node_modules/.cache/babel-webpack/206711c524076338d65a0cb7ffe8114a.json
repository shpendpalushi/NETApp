{"ast":null,"code":"/**\r\n * DevExtreme (viz/sparklines/sparkline.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar BaseSparkline = require(\"./base_sparkline\");\n\nvar dataValidatorModule = require(\"../components/data_validator\");\n\nvar seriesModule = require(\"../series/base_series\");\n\nvar MIN_BAR_WIDTH = 1;\nvar MAX_BAR_WIDTH = 50;\nvar DEFAULT_BAR_INTERVAL = 4;\nvar DEFAULT_CANVAS_WIDTH = 250;\nvar DEFAULT_CANVAS_HEIGHT = 30;\nvar DEFAULT_POINT_BORDER = 2;\nvar ALLOWED_TYPES = {\n  line: true,\n  spline: true,\n  stepline: true,\n  area: true,\n  steparea: true,\n  splinearea: true,\n  bar: true,\n  winloss: true\n};\nvar _math = Math;\nvar _abs = _math.abs;\nvar _round = _math.round;\nvar _max = _math.max;\nvar _min = _math.min;\nvar _isFinite = isFinite;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar _map = vizUtils.map;\nvar _normalizeEnum = vizUtils.normalizeEnum;\n\nvar _isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar _Number = Number;\nvar _String = String;\n\nfunction findMinMax(data, valField) {\n  var firstItem = data[0] || {};\n  var firstValue = firstItem[valField] || 0;\n  var min = firstValue;\n  var max = firstValue;\n  var minIndexes = [0];\n  var maxIndexes = [0];\n  var dataLength = data.length;\n  var value;\n  var i;\n\n  for (i = 1; i < dataLength; i++) {\n    value = data[i][valField];\n\n    if (value < min) {\n      min = value;\n      minIndexes = [i];\n    } else {\n      if (value === min) {\n        minIndexes.push(i);\n      }\n    }\n\n    if (value > max) {\n      max = value;\n      maxIndexes = [i];\n    } else {\n      if (value === max) {\n        maxIndexes.push(i);\n      }\n    }\n  }\n\n  if (max === min) {\n    minIndexes = maxIndexes = [];\n  }\n\n  return {\n    minIndexes: minIndexes,\n    maxIndexes: maxIndexes\n  };\n}\n\nfunction parseNumericDataSource(data, argField, valField, ignoreEmptyPoints) {\n  return _map(data, function (dataItem, index) {\n    var item = null;\n    var isDataNumber;\n    var value;\n\n    if (void 0 !== dataItem) {\n      item = {};\n      isDataNumber = _isFinite(dataItem);\n      item[argField] = isDataNumber ? _String(index) : dataItem[argField];\n      value = isDataNumber ? dataItem : dataItem[valField];\n      item[valField] = null === value ? ignoreEmptyPoints ? void 0 : value : _Number(value);\n      item = void 0 !== item[argField] && void 0 !== item[valField] ? item : null;\n    }\n\n    return item;\n  });\n}\n\nfunction parseWinlossDataSource(data, argField, valField, target) {\n  var lowBarValue = -1;\n  var zeroBarValue = 0;\n  var highBarValue = 1;\n  var delta = 1e-4;\n  return _map(data, function (dataItem) {\n    var item = {};\n    item[argField] = dataItem[argField];\n\n    if (_abs(dataItem[valField] - target) < delta) {\n      item[valField] = zeroBarValue;\n    } else {\n      if (dataItem[valField] > target) {\n        item[valField] = highBarValue;\n      } else {\n        item[valField] = lowBarValue;\n      }\n    }\n\n    return item;\n  });\n}\n\nfunction selectPointColor(color, options, index, pointIndexes) {\n  if (index === pointIndexes.first || index === pointIndexes.last) {\n    color = options.firstLastColor;\n  }\n\n  if ((pointIndexes.min || []).indexOf(index) >= 0) {\n    color = options.minColor;\n  }\n\n  if ((pointIndexes.max || []).indexOf(index) >= 0) {\n    color = options.maxColor;\n  }\n\n  return color;\n}\n\nfunction createLineCustomizeFunction(pointIndexes, options) {\n  return function () {\n    var color = selectPointColor(void 0, options, this.index, pointIndexes);\n    return color ? {\n      visible: true,\n      border: {\n        color: color\n      }\n    } : {};\n  };\n}\n\nfunction createBarCustomizeFunction(pointIndexes, options, winlossData) {\n  return function () {\n    var index = this.index;\n    var isWinloss = \"winloss\" === options.type;\n    var target = isWinloss ? options.winlossThreshold : 0;\n    var value = isWinloss ? winlossData[index][options.valueField] : this.value;\n    var positiveColor = isWinloss ? options.winColor : options.barPositiveColor;\n    var negativeColor = isWinloss ? options.lossColor : options.barNegativeColor;\n    return {\n      color: selectPointColor(value >= target ? positiveColor : negativeColor, options, index, pointIndexes)\n    };\n  };\n}\n\nvar dxSparkline = BaseSparkline.inherit({\n  _rootClassPrefix: \"dxsl\",\n  _rootClass: \"dxsl-sparkline\",\n  _themeSection: \"sparkline\",\n  _defaultSize: {\n    width: DEFAULT_CANVAS_WIDTH,\n    height: DEFAULT_CANVAS_HEIGHT\n  },\n  _initCore: function _initCore() {\n    this.callBase();\n\n    this._createSeries();\n  },\n  _initialChanges: [\"DATA_SOURCE\"],\n  _dataSourceChangedHandler: function _dataSourceChangedHandler() {\n    this._requestChange([\"UPDATE\"]);\n  },\n  _updateWidgetElements: function _updateWidgetElements() {\n    this._updateSeries();\n\n    this.callBase();\n  },\n  _disposeWidgetElements: function _disposeWidgetElements() {\n    var that = this;\n    that._series && that._series.dispose();\n    that._series = that._seriesGroup = that._seriesLabelGroup = null;\n  },\n  _cleanWidgetElements: function _cleanWidgetElements() {\n    this._seriesGroup.remove();\n\n    this._seriesLabelGroup.remove();\n\n    this._seriesGroup.clear();\n\n    this._seriesLabelGroup.clear();\n  },\n  _drawWidgetElements: function _drawWidgetElements() {\n    if (this._dataIsLoaded()) {\n      this._drawSeries();\n\n      this._drawn();\n    }\n  },\n  _getCorrectCanvas: function _getCorrectCanvas() {\n    var options = this._allOptions;\n    var canvas = this._canvas;\n    var halfPointSize = options.pointSize && Math.ceil(options.pointSize / 2) + DEFAULT_POINT_BORDER;\n    var type = options.type;\n\n    if (\"bar\" !== type && \"winloss\" !== type && (options.showFirstLast || options.showMinMax)) {\n      return {\n        width: canvas.width,\n        height: canvas.height,\n        left: canvas.left + halfPointSize,\n        right: canvas.right + halfPointSize,\n        top: canvas.top + halfPointSize,\n        bottom: canvas.bottom + halfPointSize\n      };\n    }\n\n    return canvas;\n  },\n  _prepareOptions: function _prepareOptions() {\n    var that = this;\n    that._allOptions = that.callBase();\n    that._allOptions.type = _normalizeEnum(that._allOptions.type);\n\n    if (!ALLOWED_TYPES[that._allOptions.type]) {\n      that._allOptions.type = \"line\";\n    }\n  },\n  _createHtmlElements: function _createHtmlElements() {\n    this._seriesGroup = this._renderer.g().attr({\n      \"class\": \"dxsl-series\"\n    });\n    this._seriesLabelGroup = this._renderer.g().attr({\n      \"class\": \"dxsl-series-labels\"\n    });\n  },\n  _createSeries: function _createSeries() {\n    this._series = new seriesModule.Series({\n      renderer: this._renderer,\n      seriesGroup: this._seriesGroup,\n      labelsGroup: this._seriesLabelGroup,\n      argumentAxis: this._argumentAxis,\n      valueAxis: this._valueAxis\n    }, {\n      widgetType: \"chart\",\n      type: \"line\"\n    });\n  },\n  _updateSeries: function _updateSeries() {\n    var that = this;\n    var groupsData;\n    var seriesOptions;\n    var singleSeries = that._series;\n\n    that._prepareDataSource();\n\n    seriesOptions = that._prepareSeriesOptions();\n    singleSeries.updateOptions(seriesOptions);\n    groupsData = {\n      groups: [{\n        series: [singleSeries]\n      }]\n    };\n    groupsData.argumentOptions = {\n      type: \"bar\" === seriesOptions.type ? \"discrete\" : void 0\n    };\n    that._simpleDataSource = dataValidatorModule.validateData(that._simpleDataSource, groupsData, that._incidentOccurred, {\n      checkTypeForAllData: false,\n      convertToAxisDataType: true,\n      sortingMethod: true\n    })[singleSeries.getArgumentField()];\n    seriesOptions.customizePoint = that._getCustomizeFunction();\n    singleSeries.updateData(that._simpleDataSource);\n    singleSeries.createPoints();\n    that._groupsDataCategories = groupsData.categories;\n  },\n  _optionChangesMap: {\n    dataSource: \"DATA_SOURCE\"\n  },\n  _optionChangesOrder: [\"DATA_SOURCE\"],\n  _change_DATA_SOURCE: function _change_DATA_SOURCE() {\n    this._updateDataSource();\n  },\n  _prepareDataSource: function _prepareDataSource() {\n    var that = this;\n    var options = that._allOptions;\n    var argField = options.argumentField;\n    var valField = options.valueField;\n    var dataSource = that._dataSourceItems() || [];\n    var data = parseNumericDataSource(dataSource, argField, valField, that.option(\"ignoreEmptyPoints\"));\n\n    if (\"winloss\" === options.type) {\n      that._winlossDataSource = data;\n      that._simpleDataSource = parseWinlossDataSource(data, argField, valField, options.winlossThreshold);\n    } else {\n      that._simpleDataSource = data;\n    }\n  },\n  _prepareSeriesOptions: function _prepareSeriesOptions() {\n    var that = this;\n    var options = that._allOptions;\n    var type = \"winloss\" === options.type ? \"bar\" : options.type;\n    return {\n      visible: true,\n      argumentField: options.argumentField,\n      valueField: options.valueField,\n      color: options.lineColor,\n      width: options.lineWidth,\n      widgetType: \"chart\",\n      type: type,\n      opacity: type.indexOf(\"area\") !== -1 ? that._allOptions.areaOpacity : void 0,\n      point: {\n        size: options.pointSize,\n        symbol: options.pointSymbol,\n        border: {\n          visible: true,\n          width: DEFAULT_POINT_BORDER\n        },\n        color: options.pointColor,\n        visible: false,\n        hoverStyle: {\n          border: {}\n        },\n        selectionStyle: {\n          border: {}\n        }\n      },\n      border: {\n        color: options.lineColor,\n        width: options.lineWidth,\n        visible: \"bar\" !== type\n      }\n    };\n  },\n  _getCustomizeFunction: function _getCustomizeFunction() {\n    var that = this;\n    var options = that._allOptions;\n    var dataSource = that._winlossDataSource || that._simpleDataSource;\n\n    var drawnPointIndexes = that._getExtremumPointsIndexes(dataSource);\n\n    var customizeFunction;\n\n    if (\"winloss\" === options.type || \"bar\" === options.type) {\n      customizeFunction = createBarCustomizeFunction(drawnPointIndexes, options, that._winlossDataSource);\n    } else {\n      customizeFunction = createLineCustomizeFunction(drawnPointIndexes, options);\n    }\n\n    return customizeFunction;\n  },\n  _getExtremumPointsIndexes: function _getExtremumPointsIndexes(data) {\n    var that = this;\n    var options = that._allOptions;\n    var lastIndex = data.length - 1;\n    var indexes = {};\n    that._minMaxIndexes = findMinMax(data, options.valueField);\n\n    if (options.showFirstLast) {\n      indexes.first = 0;\n      indexes.last = lastIndex;\n    }\n\n    if (options.showMinMax) {\n      indexes.min = that._minMaxIndexes.minIndexes;\n      indexes.max = that._minMaxIndexes.maxIndexes;\n    }\n\n    return indexes;\n  },\n  _getStick: function _getStick() {\n    return {\n      stick: \"bar\" !== this._series.type\n    };\n  },\n  _updateRange: function _updateRange() {\n    var that = this;\n    var series = that._series;\n    var type = series.type;\n    var isBarType = \"bar\" === type;\n    var isWinlossType = \"winloss\" === type;\n    var DEFAULT_VALUE_RANGE_MARGIN = .15;\n    var DEFAULT_ARGUMENT_RANGE_MARGIN = .1;\n    var WINLOSS_MAX_RANGE = 1;\n    var WINLOSS_MIN_RANGE = -1;\n    var rangeData = series.getRangeData();\n    var minValue = that._allOptions.minValue;\n\n    var hasMinY = _isDefined(minValue) && _isFinite(minValue);\n\n    var maxValue = that._allOptions.maxValue;\n\n    var hasMaxY = _isDefined(maxValue) && _isFinite(maxValue);\n\n    var valCoef;\n    var argCoef;\n    valCoef = (rangeData.val.max - rangeData.val.min) * DEFAULT_VALUE_RANGE_MARGIN;\n\n    if (isBarType || isWinlossType || \"area\" === type) {\n      if (0 !== rangeData.val.min) {\n        rangeData.val.min -= valCoef;\n      }\n\n      if (0 !== rangeData.val.max) {\n        rangeData.val.max += valCoef;\n      }\n    } else {\n      rangeData.val.min -= valCoef;\n      rangeData.val.max += valCoef;\n    }\n\n    if (hasMinY || hasMaxY) {\n      if (hasMinY && hasMaxY) {\n        rangeData.val.minVisible = _min(minValue, maxValue);\n        rangeData.val.maxVisible = _max(minValue, maxValue);\n      } else {\n        rangeData.val.minVisible = hasMinY ? _Number(minValue) : void 0;\n        rangeData.val.maxVisible = hasMaxY ? _Number(maxValue) : void 0;\n      }\n\n      if (isWinlossType) {\n        rangeData.val.minVisible = hasMinY ? _max(rangeData.val.minVisible, WINLOSS_MIN_RANGE) : void 0;\n        rangeData.val.maxVisible = hasMaxY ? _min(rangeData.val.maxVisible, WINLOSS_MAX_RANGE) : void 0;\n      }\n    }\n\n    if (series.getPoints().length > 1) {\n      if (isBarType) {\n        argCoef = (rangeData.arg.max - rangeData.arg.min) * DEFAULT_ARGUMENT_RANGE_MARGIN;\n        rangeData.arg.min = rangeData.arg.min - argCoef;\n        rangeData.arg.max = rangeData.arg.max + argCoef;\n      }\n    }\n\n    rangeData.arg.categories = that._groupsDataCategories;\n    that._ranges = rangeData;\n  },\n  _getBarWidth: function _getBarWidth(pointsCount) {\n    var that = this;\n    var canvas = that._canvas;\n    var intervalWidth = pointsCount * DEFAULT_BAR_INTERVAL;\n    var rangeWidth = canvas.width - canvas.left - canvas.right - intervalWidth;\n\n    var width = _round(rangeWidth / pointsCount);\n\n    if (width < MIN_BAR_WIDTH) {\n      width = MIN_BAR_WIDTH;\n    }\n\n    if (width > MAX_BAR_WIDTH) {\n      width = MAX_BAR_WIDTH;\n    }\n\n    return width;\n  },\n  _correctPoints: function _correctPoints() {\n    var that = this;\n    var seriesType = that._allOptions.type;\n\n    var seriesPoints = that._series.getPoints();\n\n    var pointsLength = seriesPoints.length;\n    var barWidth;\n    var i;\n\n    if (\"bar\" === seriesType || \"winloss\" === seriesType) {\n      barWidth = that._getBarWidth(pointsLength);\n\n      for (i = 0; i < pointsLength; i++) {\n        seriesPoints[i].correctCoordinates({\n          width: barWidth,\n          offset: 0\n        });\n      }\n    }\n  },\n  _drawSeries: function _drawSeries() {\n    var that = this;\n\n    if (that._simpleDataSource.length > 0) {\n      that._correctPoints();\n\n      that._series.draw();\n\n      that._seriesGroup.append(that._renderer.root);\n    }\n  },\n  _isTooltipEnabled: function _isTooltipEnabled() {\n    return !!this._simpleDataSource.length;\n  },\n  _getTooltipData: function _getTooltipData() {\n    var that = this;\n    var options = that._allOptions;\n    var dataSource = that._winlossDataSource || that._simpleDataSource;\n    var tooltip = that._tooltip;\n\n    if (0 === dataSource.length) {\n      return {};\n    }\n\n    var minMax = that._minMaxIndexes;\n    var valueField = options.valueField;\n    var first = dataSource[0][valueField];\n    var last = dataSource[dataSource.length - 1][valueField];\n    var min = _isDefined(minMax.minIndexes[0]) ? dataSource[minMax.minIndexes[0]][valueField] : first;\n    var max = _isDefined(minMax.maxIndexes[0]) ? dataSource[minMax.maxIndexes[0]][valueField] : first;\n    var formattedFirst = tooltip.formatValue(first);\n    var formattedLast = tooltip.formatValue(last);\n    var formattedMin = tooltip.formatValue(min);\n    var formattedMax = tooltip.formatValue(max);\n    var customizeObject = {\n      firstValue: formattedFirst,\n      lastValue: formattedLast,\n      minValue: formattedMin,\n      maxValue: formattedMax,\n      originalFirstValue: first,\n      originalLastValue: last,\n      originalMinValue: min,\n      originalMaxValue: max,\n      valueText: [\"Start:\", formattedFirst, \"End:\", formattedLast, \"Min:\", formattedMin, \"Max:\", formattedMax]\n    };\n\n    if (\"winloss\" === options.type) {\n      customizeObject.originalThresholdValue = options.winlossThreshold;\n      customizeObject.thresholdValue = tooltip.formatValue(options.winlossThreshold);\n    }\n\n    return customizeObject;\n  }\n});\n\n_map([\"lineColor\", \"lineWidth\", \"areaOpacity\", \"minColor\", \"maxColor\", \"barPositiveColor\", \"barNegativeColor\", \"winColor\", \"lessColor\", \"firstLastColor\", \"pointSymbol\", \"pointColor\", \"pointSize\", \"type\", \"argumentField\", \"valueField\", \"winlossThreshold\", \"showFirstLast\", \"showMinMax\", \"ignoreEmptyPoints\", \"minValue\", \"maxValue\"], function (name) {\n  dxSparkline.prototype._optionChangesMap[name] = \"OPTIONS\";\n});\n\nrequire(\"../../core/component_registrator\")(\"dxSparkline\", dxSparkline);\n\nmodule.exports = dxSparkline;\ndxSparkline.addPlugin(require(\"../core/data_source\").plugin);","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/sparklines/sparkline.js"],"names":["BaseSparkline","require","dataValidatorModule","seriesModule","MIN_BAR_WIDTH","MAX_BAR_WIDTH","DEFAULT_BAR_INTERVAL","DEFAULT_CANVAS_WIDTH","DEFAULT_CANVAS_HEIGHT","DEFAULT_POINT_BORDER","ALLOWED_TYPES","line","spline","stepline","area","steparea","splinearea","bar","winloss","_math","Math","_abs","abs","_round","round","_max","max","_min","min","_isFinite","isFinite","vizUtils","_map","map","_normalizeEnum","normalizeEnum","_isDefined","isDefined","_Number","Number","_String","String","findMinMax","data","valField","firstItem","firstValue","minIndexes","maxIndexes","dataLength","length","value","i","push","parseNumericDataSource","argField","ignoreEmptyPoints","dataItem","index","item","isDataNumber","parseWinlossDataSource","target","lowBarValue","zeroBarValue","highBarValue","delta","selectPointColor","color","options","pointIndexes","first","last","firstLastColor","indexOf","minColor","maxColor","createLineCustomizeFunction","visible","border","createBarCustomizeFunction","winlossData","isWinloss","type","winlossThreshold","valueField","positiveColor","winColor","barPositiveColor","negativeColor","lossColor","barNegativeColor","dxSparkline","inherit","_rootClassPrefix","_rootClass","_themeSection","_defaultSize","width","height","_initCore","callBase","_createSeries","_initialChanges","_dataSourceChangedHandler","_requestChange","_updateWidgetElements","_updateSeries","_disposeWidgetElements","that","_series","dispose","_seriesGroup","_seriesLabelGroup","_cleanWidgetElements","remove","clear","_drawWidgetElements","_dataIsLoaded","_drawSeries","_drawn","_getCorrectCanvas","_allOptions","canvas","_canvas","halfPointSize","pointSize","ceil","showFirstLast","showMinMax","left","right","top","bottom","_prepareOptions","_createHtmlElements","_renderer","g","attr","Series","renderer","seriesGroup","labelsGroup","argumentAxis","_argumentAxis","valueAxis","_valueAxis","widgetType","groupsData","seriesOptions","singleSeries","_prepareDataSource","_prepareSeriesOptions","updateOptions","groups","series","argumentOptions","_simpleDataSource","validateData","_incidentOccurred","checkTypeForAllData","convertToAxisDataType","sortingMethod","getArgumentField","customizePoint","_getCustomizeFunction","updateData","createPoints","_groupsDataCategories","categories","_optionChangesMap","dataSource","_optionChangesOrder","_change_DATA_SOURCE","_updateDataSource","argumentField","_dataSourceItems","option","_winlossDataSource","lineColor","lineWidth","opacity","areaOpacity","point","size","symbol","pointSymbol","pointColor","hoverStyle","selectionStyle","drawnPointIndexes","_getExtremumPointsIndexes","customizeFunction","lastIndex","indexes","_minMaxIndexes","_getStick","stick","_updateRange","isBarType","isWinlossType","DEFAULT_VALUE_RANGE_MARGIN","DEFAULT_ARGUMENT_RANGE_MARGIN","WINLOSS_MAX_RANGE","WINLOSS_MIN_RANGE","rangeData","getRangeData","minValue","hasMinY","maxValue","hasMaxY","valCoef","argCoef","val","minVisible","maxVisible","getPoints","arg","_ranges","_getBarWidth","pointsCount","intervalWidth","rangeWidth","_correctPoints","seriesType","seriesPoints","pointsLength","barWidth","correctCoordinates","offset","draw","append","root","_isTooltipEnabled","_getTooltipData","tooltip","_tooltip","minMax","formattedFirst","formatValue","formattedLast","formattedMin","formattedMax","customizeObject","lastValue","originalFirstValue","originalLastValue","originalMinValue","originalMaxValue","valueText","originalThresholdValue","thresholdValue","name","prototype","module","exports","addPlugin","plugin"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,aAAa,GAAGC,OAAO,CAAC,kBAAD,CAA3B;;AACA,IAAIC,mBAAmB,GAAGD,OAAO,CAAC,8BAAD,CAAjC;;AACA,IAAIE,YAAY,GAAGF,OAAO,CAAC,uBAAD,CAA1B;;AACA,IAAIG,aAAa,GAAG,CAApB;AACA,IAAIC,aAAa,GAAG,EAApB;AACA,IAAIC,oBAAoB,GAAG,CAA3B;AACA,IAAIC,oBAAoB,GAAG,GAA3B;AACA,IAAIC,qBAAqB,GAAG,EAA5B;AACA,IAAIC,oBAAoB,GAAG,CAA3B;AACA,IAAIC,aAAa,GAAG;AAChBC,EAAAA,IAAI,EAAE,IADU;AAEhBC,EAAAA,MAAM,EAAE,IAFQ;AAGhBC,EAAAA,QAAQ,EAAE,IAHM;AAIhBC,EAAAA,IAAI,EAAE,IAJU;AAKhBC,EAAAA,QAAQ,EAAE,IALM;AAMhBC,EAAAA,UAAU,EAAE,IANI;AAOhBC,EAAAA,GAAG,EAAE,IAPW;AAQhBC,EAAAA,OAAO,EAAE;AARO,CAApB;AAUA,IAAIC,KAAK,GAAGC,IAAZ;AACA,IAAIC,IAAI,GAAGF,KAAK,CAACG,GAAjB;AACA,IAAIC,MAAM,GAAGJ,KAAK,CAACK,KAAnB;AACA,IAAIC,IAAI,GAAGN,KAAK,CAACO,GAAjB;AACA,IAAIC,IAAI,GAAGR,KAAK,CAACS,GAAjB;AACA,IAAIC,SAAS,GAAGC,QAAhB;;AACA,IAAIC,QAAQ,GAAG9B,OAAO,CAAC,eAAD,CAAtB;;AACA,IAAI+B,IAAI,GAAGD,QAAQ,CAACE,GAApB;AACA,IAAIC,cAAc,GAAGH,QAAQ,CAACI,aAA9B;;AACA,IAAIC,UAAU,GAAGnC,OAAO,CAAC,uBAAD,CAAP,CAAiCoC,SAAlD;;AACA,IAAIC,OAAO,GAAGC,MAAd;AACA,IAAIC,OAAO,GAAGC,MAAd;;AAEA,SAASC,UAAT,CAAoBC,IAApB,EAA0BC,QAA1B,EAAoC;AAChC,MAAIC,SAAS,GAAGF,IAAI,CAAC,CAAD,CAAJ,IAAW,EAA3B;AACA,MAAIG,UAAU,GAAGD,SAAS,CAACD,QAAD,CAAT,IAAuB,CAAxC;AACA,MAAIhB,GAAG,GAAGkB,UAAV;AACA,MAAIpB,GAAG,GAAGoB,UAAV;AACA,MAAIC,UAAU,GAAG,CAAC,CAAD,CAAjB;AACA,MAAIC,UAAU,GAAG,CAAC,CAAD,CAAjB;AACA,MAAIC,UAAU,GAAGN,IAAI,CAACO,MAAtB;AACA,MAAIC,KAAJ;AACA,MAAIC,CAAJ;;AACA,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGH,UAAhB,EAA4BG,CAAC,EAA7B,EAAiC;AAC7BD,IAAAA,KAAK,GAAGR,IAAI,CAACS,CAAD,CAAJ,CAAQR,QAAR,CAAR;;AACA,QAAIO,KAAK,GAAGvB,GAAZ,EAAiB;AACbA,MAAAA,GAAG,GAAGuB,KAAN;AACAJ,MAAAA,UAAU,GAAG,CAACK,CAAD,CAAb;AACH,KAHD,MAGO;AACH,UAAID,KAAK,KAAKvB,GAAd,EAAmB;AACfmB,QAAAA,UAAU,CAACM,IAAX,CAAgBD,CAAhB;AACH;AACJ;;AACD,QAAID,KAAK,GAAGzB,GAAZ,EAAiB;AACbA,MAAAA,GAAG,GAAGyB,KAAN;AACAH,MAAAA,UAAU,GAAG,CAACI,CAAD,CAAb;AACH,KAHD,MAGO;AACH,UAAID,KAAK,KAAKzB,GAAd,EAAmB;AACfsB,QAAAA,UAAU,CAACK,IAAX,CAAgBD,CAAhB;AACH;AACJ;AACJ;;AACD,MAAI1B,GAAG,KAAKE,GAAZ,EAAiB;AACbmB,IAAAA,UAAU,GAAGC,UAAU,GAAG,EAA1B;AACH;;AACD,SAAO;AACHD,IAAAA,UAAU,EAAEA,UADT;AAEHC,IAAAA,UAAU,EAAEA;AAFT,GAAP;AAIH;;AAED,SAASM,sBAAT,CAAgCX,IAAhC,EAAsCY,QAAtC,EAAgDX,QAAhD,EAA0DY,iBAA1D,EAA6E;AACzE,SAAOxB,IAAI,CAACW,IAAD,EAAO,UAASc,QAAT,EAAmBC,KAAnB,EAA0B;AACxC,QAAIC,IAAI,GAAG,IAAX;AACA,QAAIC,YAAJ;AACA,QAAIT,KAAJ;;AACA,QAAI,KAAK,CAAL,KAAWM,QAAf,EAAyB;AACrBE,MAAAA,IAAI,GAAG,EAAP;AACAC,MAAAA,YAAY,GAAG/B,SAAS,CAAC4B,QAAD,CAAxB;AACAE,MAAAA,IAAI,CAACJ,QAAD,CAAJ,GAAiBK,YAAY,GAAGpB,OAAO,CAACkB,KAAD,CAAV,GAAoBD,QAAQ,CAACF,QAAD,CAAzD;AACAJ,MAAAA,KAAK,GAAGS,YAAY,GAAGH,QAAH,GAAcA,QAAQ,CAACb,QAAD,CAA1C;AACAe,MAAAA,IAAI,CAACf,QAAD,CAAJ,GAAiB,SAASO,KAAT,GAAiBK,iBAAiB,GAAG,KAAK,CAAR,GAAYL,KAA9C,GAAsDb,OAAO,CAACa,KAAD,CAA9E;AACAQ,MAAAA,IAAI,GAAG,KAAK,CAAL,KAAWA,IAAI,CAACJ,QAAD,CAAf,IAA6B,KAAK,CAAL,KAAWI,IAAI,CAACf,QAAD,CAA5C,GAAyDe,IAAzD,GAAgE,IAAvE;AACH;;AACD,WAAOA,IAAP;AACH,GAbU,CAAX;AAcH;;AAED,SAASE,sBAAT,CAAgClB,IAAhC,EAAsCY,QAAtC,EAAgDX,QAAhD,EAA0DkB,MAA1D,EAAkE;AAC9D,MAAIC,WAAW,GAAG,CAAC,CAAnB;AACA,MAAIC,YAAY,GAAG,CAAnB;AACA,MAAIC,YAAY,GAAG,CAAnB;AACA,MAAIC,KAAK,GAAG,IAAZ;AACA,SAAOlC,IAAI,CAACW,IAAD,EAAO,UAASc,QAAT,EAAmB;AACjC,QAAIE,IAAI,GAAG,EAAX;AACAA,IAAAA,IAAI,CAACJ,QAAD,CAAJ,GAAiBE,QAAQ,CAACF,QAAD,CAAzB;;AACA,QAAIlC,IAAI,CAACoC,QAAQ,CAACb,QAAD,CAAR,GAAqBkB,MAAtB,CAAJ,GAAoCI,KAAxC,EAA+C;AAC3CP,MAAAA,IAAI,CAACf,QAAD,CAAJ,GAAiBoB,YAAjB;AACH,KAFD,MAEO;AACH,UAAIP,QAAQ,CAACb,QAAD,CAAR,GAAqBkB,MAAzB,EAAiC;AAC7BH,QAAAA,IAAI,CAACf,QAAD,CAAJ,GAAiBqB,YAAjB;AACH,OAFD,MAEO;AACHN,QAAAA,IAAI,CAACf,QAAD,CAAJ,GAAiBmB,WAAjB;AACH;AACJ;;AACD,WAAOJ,IAAP;AACH,GAbU,CAAX;AAcH;;AAED,SAASQ,gBAAT,CAA0BC,KAA1B,EAAiCC,OAAjC,EAA0CX,KAA1C,EAAiDY,YAAjD,EAA+D;AAC3D,MAAIZ,KAAK,KAAKY,YAAY,CAACC,KAAvB,IAAgCb,KAAK,KAAKY,YAAY,CAACE,IAA3D,EAAiE;AAC7DJ,IAAAA,KAAK,GAAGC,OAAO,CAACI,cAAhB;AACH;;AACD,MAAI,CAACH,YAAY,CAAC1C,GAAb,IAAoB,EAArB,EAAyB8C,OAAzB,CAAiChB,KAAjC,KAA2C,CAA/C,EAAkD;AAC9CU,IAAAA,KAAK,GAAGC,OAAO,CAACM,QAAhB;AACH;;AACD,MAAI,CAACL,YAAY,CAAC5C,GAAb,IAAoB,EAArB,EAAyBgD,OAAzB,CAAiChB,KAAjC,KAA2C,CAA/C,EAAkD;AAC9CU,IAAAA,KAAK,GAAGC,OAAO,CAACO,QAAhB;AACH;;AACD,SAAOR,KAAP;AACH;;AAED,SAASS,2BAAT,CAAqCP,YAArC,EAAmDD,OAAnD,EAA4D;AACxD,SAAO,YAAW;AACd,QAAID,KAAK,GAAGD,gBAAgB,CAAC,KAAK,CAAN,EAASE,OAAT,EAAkB,KAAKX,KAAvB,EAA8BY,YAA9B,CAA5B;AACA,WAAOF,KAAK,GAAG;AACXU,MAAAA,OAAO,EAAE,IADE;AAEXC,MAAAA,MAAM,EAAE;AACJX,QAAAA,KAAK,EAAEA;AADH;AAFG,KAAH,GAKR,EALJ;AAMH,GARD;AASH;;AAED,SAASY,0BAAT,CAAoCV,YAApC,EAAkDD,OAAlD,EAA2DY,WAA3D,EAAwE;AACpE,SAAO,YAAW;AACd,QAAIvB,KAAK,GAAG,KAAKA,KAAjB;AACA,QAAIwB,SAAS,GAAG,cAAcb,OAAO,CAACc,IAAtC;AACA,QAAIrB,MAAM,GAAGoB,SAAS,GAAGb,OAAO,CAACe,gBAAX,GAA8B,CAApD;AACA,QAAIjC,KAAK,GAAG+B,SAAS,GAAGD,WAAW,CAACvB,KAAD,CAAX,CAAmBW,OAAO,CAACgB,UAA3B,CAAH,GAA4C,KAAKlC,KAAtE;AACA,QAAImC,aAAa,GAAGJ,SAAS,GAAGb,OAAO,CAACkB,QAAX,GAAsBlB,OAAO,CAACmB,gBAA3D;AACA,QAAIC,aAAa,GAAGP,SAAS,GAAGb,OAAO,CAACqB,SAAX,GAAuBrB,OAAO,CAACsB,gBAA5D;AACA,WAAO;AACHvB,MAAAA,KAAK,EAAED,gBAAgB,CAAChB,KAAK,IAAIW,MAAT,GAAkBwB,aAAlB,GAAkCG,aAAnC,EAAkDpB,OAAlD,EAA2DX,KAA3D,EAAkEY,YAAlE;AADpB,KAAP;AAGH,GAVD;AAWH;;AACD,IAAIsB,WAAW,GAAG5F,aAAa,CAAC6F,OAAd,CAAsB;AACpCC,EAAAA,gBAAgB,EAAE,MADkB;AAEpCC,EAAAA,UAAU,EAAE,gBAFwB;AAGpCC,EAAAA,aAAa,EAAE,WAHqB;AAIpCC,EAAAA,YAAY,EAAE;AACVC,IAAAA,KAAK,EAAE3F,oBADG;AAEV4F,IAAAA,MAAM,EAAE3F;AAFE,GAJsB;AAQpC4F,EAAAA,SAAS,EAAE,qBAAW;AAClB,SAAKC,QAAL;;AACA,SAAKC,aAAL;AACH,GAXmC;AAYpCC,EAAAA,eAAe,EAAE,CAAC,aAAD,CAZmB;AAapCC,EAAAA,yBAAyB,EAAE,qCAAW;AAClC,SAAKC,cAAL,CAAoB,CAAC,QAAD,CAApB;AACH,GAfmC;AAgBpCC,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,SAAKC,aAAL;;AACA,SAAKN,QAAL;AACH,GAnBmC;AAoBpCO,EAAAA,sBAAsB,EAAE,kCAAW;AAC/B,QAAIC,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACC,OAAL,IAAgBD,IAAI,CAACC,OAAL,CAAaC,OAAb,EAAhB;AACAF,IAAAA,IAAI,CAACC,OAAL,GAAeD,IAAI,CAACG,YAAL,GAAoBH,IAAI,CAACI,iBAAL,GAAyB,IAA5D;AACH,GAxBmC;AAyBpCC,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,SAAKF,YAAL,CAAkBG,MAAlB;;AACA,SAAKF,iBAAL,CAAuBE,MAAvB;;AACA,SAAKH,YAAL,CAAkBI,KAAlB;;AACA,SAAKH,iBAAL,CAAuBG,KAAvB;AACH,GA9BmC;AA+BpCC,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,QAAI,KAAKC,aAAL,EAAJ,EAA0B;AACtB,WAAKC,WAAL;;AACA,WAAKC,MAAL;AACH;AACJ,GApCmC;AAqCpCC,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAIpD,OAAO,GAAG,KAAKqD,WAAnB;AACA,QAAIC,MAAM,GAAG,KAAKC,OAAlB;AACA,QAAIC,aAAa,GAAGxD,OAAO,CAACyD,SAAR,IAAqB1G,IAAI,CAAC2G,IAAL,CAAU1D,OAAO,CAACyD,SAAR,GAAoB,CAA9B,IAAmCrH,oBAA5E;AACA,QAAI0E,IAAI,GAAGd,OAAO,CAACc,IAAnB;;AACA,QAAI,UAAUA,IAAV,IAAkB,cAAcA,IAAhC,KAAyCd,OAAO,CAAC2D,aAAR,IAAyB3D,OAAO,CAAC4D,UAA1E,CAAJ,EAA2F;AACvF,aAAO;AACH/B,QAAAA,KAAK,EAAEyB,MAAM,CAACzB,KADX;AAEHC,QAAAA,MAAM,EAAEwB,MAAM,CAACxB,MAFZ;AAGH+B,QAAAA,IAAI,EAAEP,MAAM,CAACO,IAAP,GAAcL,aAHjB;AAIHM,QAAAA,KAAK,EAAER,MAAM,CAACQ,KAAP,GAAeN,aAJnB;AAKHO,QAAAA,GAAG,EAAET,MAAM,CAACS,GAAP,GAAaP,aALf;AAMHQ,QAAAA,MAAM,EAAEV,MAAM,CAACU,MAAP,GAAgBR;AANrB,OAAP;AAQH;;AACD,WAAOF,MAAP;AACH,GArDmC;AAsDpCW,EAAAA,eAAe,EAAE,2BAAW;AACxB,QAAIzB,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACa,WAAL,GAAmBb,IAAI,CAACR,QAAL,EAAnB;AACAQ,IAAAA,IAAI,CAACa,WAAL,CAAiBvC,IAAjB,GAAwBjD,cAAc,CAAC2E,IAAI,CAACa,WAAL,CAAiBvC,IAAlB,CAAtC;;AACA,QAAI,CAACzE,aAAa,CAACmG,IAAI,CAACa,WAAL,CAAiBvC,IAAlB,CAAlB,EAA2C;AACvC0B,MAAAA,IAAI,CAACa,WAAL,CAAiBvC,IAAjB,GAAwB,MAAxB;AACH;AACJ,GA7DmC;AA8DpCoD,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,SAAKvB,YAAL,GAAoB,KAAKwB,SAAL,CAAeC,CAAf,GAAmBC,IAAnB,CAAwB;AACxC,eAAS;AAD+B,KAAxB,CAApB;AAGA,SAAKzB,iBAAL,GAAyB,KAAKuB,SAAL,CAAeC,CAAf,GAAmBC,IAAnB,CAAwB;AAC7C,eAAS;AADoC,KAAxB,CAAzB;AAGH,GArEmC;AAsEpCpC,EAAAA,aAAa,EAAE,yBAAW;AACtB,SAAKQ,OAAL,GAAe,IAAI3G,YAAY,CAACwI,MAAjB,CAAwB;AACnCC,MAAAA,QAAQ,EAAE,KAAKJ,SADoB;AAEnCK,MAAAA,WAAW,EAAE,KAAK7B,YAFiB;AAGnC8B,MAAAA,WAAW,EAAE,KAAK7B,iBAHiB;AAInC8B,MAAAA,YAAY,EAAE,KAAKC,aAJgB;AAKnCC,MAAAA,SAAS,EAAE,KAAKC;AALmB,KAAxB,EAMZ;AACCC,MAAAA,UAAU,EAAE,OADb;AAEChE,MAAAA,IAAI,EAAE;AAFP,KANY,CAAf;AAUH,GAjFmC;AAkFpCwB,EAAAA,aAAa,EAAE,yBAAW;AACtB,QAAIE,IAAI,GAAG,IAAX;AACA,QAAIuC,UAAJ;AACA,QAAIC,aAAJ;AACA,QAAIC,YAAY,GAAGzC,IAAI,CAACC,OAAxB;;AACAD,IAAAA,IAAI,CAAC0C,kBAAL;;AACAF,IAAAA,aAAa,GAAGxC,IAAI,CAAC2C,qBAAL,EAAhB;AACAF,IAAAA,YAAY,CAACG,aAAb,CAA2BJ,aAA3B;AACAD,IAAAA,UAAU,GAAG;AACTM,MAAAA,MAAM,EAAE,CAAC;AACLC,QAAAA,MAAM,EAAE,CAACL,YAAD;AADH,OAAD;AADC,KAAb;AAKAF,IAAAA,UAAU,CAACQ,eAAX,GAA6B;AACzBzE,MAAAA,IAAI,EAAE,UAAUkE,aAAa,CAAClE,IAAxB,GAA+B,UAA/B,GAA4C,KAAK;AAD9B,KAA7B;AAGA0B,IAAAA,IAAI,CAACgD,iBAAL,GAAyB3J,mBAAmB,CAAC4J,YAApB,CAAiCjD,IAAI,CAACgD,iBAAtC,EAAyDT,UAAzD,EAAqEvC,IAAI,CAACkD,iBAA1E,EAA6F;AAClHC,MAAAA,mBAAmB,EAAE,KAD6F;AAElHC,MAAAA,qBAAqB,EAAE,IAF2F;AAGlHC,MAAAA,aAAa,EAAE;AAHmG,KAA7F,EAItBZ,YAAY,CAACa,gBAAb,EAJsB,CAAzB;AAKAd,IAAAA,aAAa,CAACe,cAAd,GAA+BvD,IAAI,CAACwD,qBAAL,EAA/B;AACAf,IAAAA,YAAY,CAACgB,UAAb,CAAwBzD,IAAI,CAACgD,iBAA7B;AACAP,IAAAA,YAAY,CAACiB,YAAb;AACA1D,IAAAA,IAAI,CAAC2D,qBAAL,GAA6BpB,UAAU,CAACqB,UAAxC;AACH,GA3GmC;AA4GpCC,EAAAA,iBAAiB,EAAE;AACfC,IAAAA,UAAU,EAAE;AADG,GA5GiB;AA+GpCC,EAAAA,mBAAmB,EAAE,CAAC,aAAD,CA/Ge;AAgHpCC,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,SAAKC,iBAAL;AACH,GAlHmC;AAmHpCvB,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,QAAI1C,IAAI,GAAG,IAAX;AACA,QAAIxC,OAAO,GAAGwC,IAAI,CAACa,WAAnB;AACA,QAAInE,QAAQ,GAAGc,OAAO,CAAC0G,aAAvB;AACA,QAAInI,QAAQ,GAAGyB,OAAO,CAACgB,UAAvB;AACA,QAAIsF,UAAU,GAAG9D,IAAI,CAACmE,gBAAL,MAA2B,EAA5C;AACA,QAAIrI,IAAI,GAAGW,sBAAsB,CAACqH,UAAD,EAAapH,QAAb,EAAuBX,QAAvB,EAAiCiE,IAAI,CAACoE,MAAL,CAAY,mBAAZ,CAAjC,CAAjC;;AACA,QAAI,cAAc5G,OAAO,CAACc,IAA1B,EAAgC;AAC5B0B,MAAAA,IAAI,CAACqE,kBAAL,GAA0BvI,IAA1B;AACAkE,MAAAA,IAAI,CAACgD,iBAAL,GAAyBhG,sBAAsB,CAAClB,IAAD,EAAOY,QAAP,EAAiBX,QAAjB,EAA2ByB,OAAO,CAACe,gBAAnC,CAA/C;AACH,KAHD,MAGO;AACHyB,MAAAA,IAAI,CAACgD,iBAAL,GAAyBlH,IAAzB;AACH;AACJ,GAhImC;AAiIpC6G,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,QAAI3C,IAAI,GAAG,IAAX;AACA,QAAIxC,OAAO,GAAGwC,IAAI,CAACa,WAAnB;AACA,QAAIvC,IAAI,GAAG,cAAcd,OAAO,CAACc,IAAtB,GAA6B,KAA7B,GAAqCd,OAAO,CAACc,IAAxD;AACA,WAAO;AACHL,MAAAA,OAAO,EAAE,IADN;AAEHiG,MAAAA,aAAa,EAAE1G,OAAO,CAAC0G,aAFpB;AAGH1F,MAAAA,UAAU,EAAEhB,OAAO,CAACgB,UAHjB;AAIHjB,MAAAA,KAAK,EAAEC,OAAO,CAAC8G,SAJZ;AAKHjF,MAAAA,KAAK,EAAE7B,OAAO,CAAC+G,SALZ;AAMHjC,MAAAA,UAAU,EAAE,OANT;AAOHhE,MAAAA,IAAI,EAAEA,IAPH;AAQHkG,MAAAA,OAAO,EAAElG,IAAI,CAACT,OAAL,CAAa,MAAb,MAAyB,CAAC,CAA1B,GAA8BmC,IAAI,CAACa,WAAL,CAAiB4D,WAA/C,GAA6D,KAAK,CARxE;AASHC,MAAAA,KAAK,EAAE;AACHC,QAAAA,IAAI,EAAEnH,OAAO,CAACyD,SADX;AAEH2D,QAAAA,MAAM,EAAEpH,OAAO,CAACqH,WAFb;AAGH3G,QAAAA,MAAM,EAAE;AACJD,UAAAA,OAAO,EAAE,IADL;AAEJoB,UAAAA,KAAK,EAAEzF;AAFH,SAHL;AAOH2D,QAAAA,KAAK,EAAEC,OAAO,CAACsH,UAPZ;AAQH7G,QAAAA,OAAO,EAAE,KARN;AASH8G,QAAAA,UAAU,EAAE;AACR7G,UAAAA,MAAM,EAAE;AADA,SATT;AAYH8G,QAAAA,cAAc,EAAE;AACZ9G,UAAAA,MAAM,EAAE;AADI;AAZb,OATJ;AAyBHA,MAAAA,MAAM,EAAE;AACJX,QAAAA,KAAK,EAAEC,OAAO,CAAC8G,SADX;AAEJjF,QAAAA,KAAK,EAAE7B,OAAO,CAAC+G,SAFX;AAGJtG,QAAAA,OAAO,EAAE,UAAUK;AAHf;AAzBL,KAAP;AA+BH,GApKmC;AAqKpCkF,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,QAAIxD,IAAI,GAAG,IAAX;AACA,QAAIxC,OAAO,GAAGwC,IAAI,CAACa,WAAnB;AACA,QAAIiD,UAAU,GAAG9D,IAAI,CAACqE,kBAAL,IAA2BrE,IAAI,CAACgD,iBAAjD;;AACA,QAAIiC,iBAAiB,GAAGjF,IAAI,CAACkF,yBAAL,CAA+BpB,UAA/B,CAAxB;;AACA,QAAIqB,iBAAJ;;AACA,QAAI,cAAc3H,OAAO,CAACc,IAAtB,IAA8B,UAAUd,OAAO,CAACc,IAApD,EAA0D;AACtD6G,MAAAA,iBAAiB,GAAGhH,0BAA0B,CAAC8G,iBAAD,EAAoBzH,OAApB,EAA6BwC,IAAI,CAACqE,kBAAlC,CAA9C;AACH,KAFD,MAEO;AACHc,MAAAA,iBAAiB,GAAGnH,2BAA2B,CAACiH,iBAAD,EAAoBzH,OAApB,CAA/C;AACH;;AACD,WAAO2H,iBAAP;AACH,GAjLmC;AAkLpCD,EAAAA,yBAAyB,EAAE,mCAASpJ,IAAT,EAAe;AACtC,QAAIkE,IAAI,GAAG,IAAX;AACA,QAAIxC,OAAO,GAAGwC,IAAI,CAACa,WAAnB;AACA,QAAIuE,SAAS,GAAGtJ,IAAI,CAACO,MAAL,GAAc,CAA9B;AACA,QAAIgJ,OAAO,GAAG,EAAd;AACArF,IAAAA,IAAI,CAACsF,cAAL,GAAsBzJ,UAAU,CAACC,IAAD,EAAO0B,OAAO,CAACgB,UAAf,CAAhC;;AACA,QAAIhB,OAAO,CAAC2D,aAAZ,EAA2B;AACvBkE,MAAAA,OAAO,CAAC3H,KAAR,GAAgB,CAAhB;AACA2H,MAAAA,OAAO,CAAC1H,IAAR,GAAeyH,SAAf;AACH;;AACD,QAAI5H,OAAO,CAAC4D,UAAZ,EAAwB;AACpBiE,MAAAA,OAAO,CAACtK,GAAR,GAAciF,IAAI,CAACsF,cAAL,CAAoBpJ,UAAlC;AACAmJ,MAAAA,OAAO,CAACxK,GAAR,GAAcmF,IAAI,CAACsF,cAAL,CAAoBnJ,UAAlC;AACH;;AACD,WAAOkJ,OAAP;AACH,GAjMmC;AAkMpCE,EAAAA,SAAS,EAAE,qBAAW;AAClB,WAAO;AACHC,MAAAA,KAAK,EAAE,UAAU,KAAKvF,OAAL,CAAa3B;AAD3B,KAAP;AAGH,GAtMmC;AAuMpCmH,EAAAA,YAAY,EAAE,wBAAW;AACrB,QAAIzF,IAAI,GAAG,IAAX;AACA,QAAI8C,MAAM,GAAG9C,IAAI,CAACC,OAAlB;AACA,QAAI3B,IAAI,GAAGwE,MAAM,CAACxE,IAAlB;AACA,QAAIoH,SAAS,GAAG,UAAUpH,IAA1B;AACA,QAAIqH,aAAa,GAAG,cAAcrH,IAAlC;AACA,QAAIsH,0BAA0B,GAAG,GAAjC;AACA,QAAIC,6BAA6B,GAAG,EAApC;AACA,QAAIC,iBAAiB,GAAG,CAAxB;AACA,QAAIC,iBAAiB,GAAG,CAAC,CAAzB;AACA,QAAIC,SAAS,GAAGlD,MAAM,CAACmD,YAAP,EAAhB;AACA,QAAIC,QAAQ,GAAGlG,IAAI,CAACa,WAAL,CAAiBqF,QAAhC;;AACA,QAAIC,OAAO,GAAG5K,UAAU,CAAC2K,QAAD,CAAV,IAAwBlL,SAAS,CAACkL,QAAD,CAA/C;;AACA,QAAIE,QAAQ,GAAGpG,IAAI,CAACa,WAAL,CAAiBuF,QAAhC;;AACA,QAAIC,OAAO,GAAG9K,UAAU,CAAC6K,QAAD,CAAV,IAAwBpL,SAAS,CAACoL,QAAD,CAA/C;;AACA,QAAIE,OAAJ;AACA,QAAIC,OAAJ;AACAD,IAAAA,OAAO,GAAG,CAACN,SAAS,CAACQ,GAAV,CAAc3L,GAAd,GAAoBmL,SAAS,CAACQ,GAAV,CAAczL,GAAnC,IAA0C6K,0BAApD;;AACA,QAAIF,SAAS,IAAIC,aAAb,IAA8B,WAAWrH,IAA7C,EAAmD;AAC/C,UAAI,MAAM0H,SAAS,CAACQ,GAAV,CAAczL,GAAxB,EAA6B;AACzBiL,QAAAA,SAAS,CAACQ,GAAV,CAAczL,GAAd,IAAqBuL,OAArB;AACH;;AACD,UAAI,MAAMN,SAAS,CAACQ,GAAV,CAAc3L,GAAxB,EAA6B;AACzBmL,QAAAA,SAAS,CAACQ,GAAV,CAAc3L,GAAd,IAAqByL,OAArB;AACH;AACJ,KAPD,MAOO;AACHN,MAAAA,SAAS,CAACQ,GAAV,CAAczL,GAAd,IAAqBuL,OAArB;AACAN,MAAAA,SAAS,CAACQ,GAAV,CAAc3L,GAAd,IAAqByL,OAArB;AACH;;AACD,QAAIH,OAAO,IAAIE,OAAf,EAAwB;AACpB,UAAIF,OAAO,IAAIE,OAAf,EAAwB;AACpBL,QAAAA,SAAS,CAACQ,GAAV,CAAcC,UAAd,GAA2B3L,IAAI,CAACoL,QAAD,EAAWE,QAAX,CAA/B;AACAJ,QAAAA,SAAS,CAACQ,GAAV,CAAcE,UAAd,GAA2B9L,IAAI,CAACsL,QAAD,EAAWE,QAAX,CAA/B;AACH,OAHD,MAGO;AACHJ,QAAAA,SAAS,CAACQ,GAAV,CAAcC,UAAd,GAA2BN,OAAO,GAAG1K,OAAO,CAACyK,QAAD,CAAV,GAAuB,KAAK,CAA9D;AACAF,QAAAA,SAAS,CAACQ,GAAV,CAAcE,UAAd,GAA2BL,OAAO,GAAG5K,OAAO,CAAC2K,QAAD,CAAV,GAAuB,KAAK,CAA9D;AACH;;AACD,UAAIT,aAAJ,EAAmB;AACfK,QAAAA,SAAS,CAACQ,GAAV,CAAcC,UAAd,GAA2BN,OAAO,GAAGvL,IAAI,CAACoL,SAAS,CAACQ,GAAV,CAAcC,UAAf,EAA2BV,iBAA3B,CAAP,GAAuD,KAAK,CAA9F;AACAC,QAAAA,SAAS,CAACQ,GAAV,CAAcE,UAAd,GAA2BL,OAAO,GAAGvL,IAAI,CAACkL,SAAS,CAACQ,GAAV,CAAcE,UAAf,EAA2BZ,iBAA3B,CAAP,GAAuD,KAAK,CAA9F;AACH;AACJ;;AACD,QAAIhD,MAAM,CAAC6D,SAAP,GAAmBtK,MAAnB,GAA4B,CAAhC,EAAmC;AAC/B,UAAIqJ,SAAJ,EAAe;AACXa,QAAAA,OAAO,GAAG,CAACP,SAAS,CAACY,GAAV,CAAc/L,GAAd,GAAoBmL,SAAS,CAACY,GAAV,CAAc7L,GAAnC,IAA0C8K,6BAApD;AACAG,QAAAA,SAAS,CAACY,GAAV,CAAc7L,GAAd,GAAoBiL,SAAS,CAACY,GAAV,CAAc7L,GAAd,GAAoBwL,OAAxC;AACAP,QAAAA,SAAS,CAACY,GAAV,CAAc/L,GAAd,GAAoBmL,SAAS,CAACY,GAAV,CAAc/L,GAAd,GAAoB0L,OAAxC;AACH;AACJ;;AACDP,IAAAA,SAAS,CAACY,GAAV,CAAchD,UAAd,GAA2B5D,IAAI,CAAC2D,qBAAhC;AACA3D,IAAAA,IAAI,CAAC6G,OAAL,GAAeb,SAAf;AACH,GA1PmC;AA2PpCc,EAAAA,YAAY,EAAE,sBAASC,WAAT,EAAsB;AAChC,QAAI/G,IAAI,GAAG,IAAX;AACA,QAAIc,MAAM,GAAGd,IAAI,CAACe,OAAlB;AACA,QAAIiG,aAAa,GAAGD,WAAW,GAAGtN,oBAAlC;AACA,QAAIwN,UAAU,GAAGnG,MAAM,CAACzB,KAAP,GAAeyB,MAAM,CAACO,IAAtB,GAA6BP,MAAM,CAACQ,KAApC,GAA4C0F,aAA7D;;AACA,QAAI3H,KAAK,GAAG3E,MAAM,CAACuM,UAAU,GAAGF,WAAd,CAAlB;;AACA,QAAI1H,KAAK,GAAG9F,aAAZ,EAA2B;AACvB8F,MAAAA,KAAK,GAAG9F,aAAR;AACH;;AACD,QAAI8F,KAAK,GAAG7F,aAAZ,EAA2B;AACvB6F,MAAAA,KAAK,GAAG7F,aAAR;AACH;;AACD,WAAO6F,KAAP;AACH,GAxQmC;AAyQpC6H,EAAAA,cAAc,EAAE,0BAAW;AACvB,QAAIlH,IAAI,GAAG,IAAX;AACA,QAAImH,UAAU,GAAGnH,IAAI,CAACa,WAAL,CAAiBvC,IAAlC;;AACA,QAAI8I,YAAY,GAAGpH,IAAI,CAACC,OAAL,CAAa0G,SAAb,EAAnB;;AACA,QAAIU,YAAY,GAAGD,YAAY,CAAC/K,MAAhC;AACA,QAAIiL,QAAJ;AACA,QAAI/K,CAAJ;;AACA,QAAI,UAAU4K,UAAV,IAAwB,cAAcA,UAA1C,EAAsD;AAClDG,MAAAA,QAAQ,GAAGtH,IAAI,CAAC8G,YAAL,CAAkBO,YAAlB,CAAX;;AACA,WAAK9K,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8K,YAAhB,EAA8B9K,CAAC,EAA/B,EAAmC;AAC/B6K,QAAAA,YAAY,CAAC7K,CAAD,CAAZ,CAAgBgL,kBAAhB,CAAmC;AAC/BlI,UAAAA,KAAK,EAAEiI,QADwB;AAE/BE,UAAAA,MAAM,EAAE;AAFuB,SAAnC;AAIH;AACJ;AACJ,GAzRmC;AA0RpC9G,EAAAA,WAAW,EAAE,uBAAW;AACpB,QAAIV,IAAI,GAAG,IAAX;;AACA,QAAIA,IAAI,CAACgD,iBAAL,CAAuB3G,MAAvB,GAAgC,CAApC,EAAuC;AACnC2D,MAAAA,IAAI,CAACkH,cAAL;;AACAlH,MAAAA,IAAI,CAACC,OAAL,CAAawH,IAAb;;AACAzH,MAAAA,IAAI,CAACG,YAAL,CAAkBuH,MAAlB,CAAyB1H,IAAI,CAAC2B,SAAL,CAAegG,IAAxC;AACH;AACJ,GAjSmC;AAkSpCC,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,WAAO,CAAC,CAAC,KAAK5E,iBAAL,CAAuB3G,MAAhC;AACH,GApSmC;AAqSpCwL,EAAAA,eAAe,EAAE,2BAAW;AACxB,QAAI7H,IAAI,GAAG,IAAX;AACA,QAAIxC,OAAO,GAAGwC,IAAI,CAACa,WAAnB;AACA,QAAIiD,UAAU,GAAG9D,IAAI,CAACqE,kBAAL,IAA2BrE,IAAI,CAACgD,iBAAjD;AACA,QAAI8E,OAAO,GAAG9H,IAAI,CAAC+H,QAAnB;;AACA,QAAI,MAAMjE,UAAU,CAACzH,MAArB,EAA6B;AACzB,aAAO,EAAP;AACH;;AACD,QAAI2L,MAAM,GAAGhI,IAAI,CAACsF,cAAlB;AACA,QAAI9G,UAAU,GAAGhB,OAAO,CAACgB,UAAzB;AACA,QAAId,KAAK,GAAGoG,UAAU,CAAC,CAAD,CAAV,CAActF,UAAd,CAAZ;AACA,QAAIb,IAAI,GAAGmG,UAAU,CAACA,UAAU,CAACzH,MAAX,GAAoB,CAArB,CAAV,CAAkCmC,UAAlC,CAAX;AACA,QAAIzD,GAAG,GAAGQ,UAAU,CAACyM,MAAM,CAAC9L,UAAP,CAAkB,CAAlB,CAAD,CAAV,GAAmC4H,UAAU,CAACkE,MAAM,CAAC9L,UAAP,CAAkB,CAAlB,CAAD,CAAV,CAAiCsC,UAAjC,CAAnC,GAAkFd,KAA5F;AACA,QAAI7C,GAAG,GAAGU,UAAU,CAACyM,MAAM,CAAC7L,UAAP,CAAkB,CAAlB,CAAD,CAAV,GAAmC2H,UAAU,CAACkE,MAAM,CAAC7L,UAAP,CAAkB,CAAlB,CAAD,CAAV,CAAiCqC,UAAjC,CAAnC,GAAkFd,KAA5F;AACA,QAAIuK,cAAc,GAAGH,OAAO,CAACI,WAAR,CAAoBxK,KAApB,CAArB;AACA,QAAIyK,aAAa,GAAGL,OAAO,CAACI,WAAR,CAAoBvK,IAApB,CAApB;AACA,QAAIyK,YAAY,GAAGN,OAAO,CAACI,WAAR,CAAoBnN,GAApB,CAAnB;AACA,QAAIsN,YAAY,GAAGP,OAAO,CAACI,WAAR,CAAoBrN,GAApB,CAAnB;AACA,QAAIyN,eAAe,GAAG;AAClBrM,MAAAA,UAAU,EAAEgM,cADM;AAElBM,MAAAA,SAAS,EAAEJ,aAFO;AAGlBjC,MAAAA,QAAQ,EAAEkC,YAHQ;AAIlBhC,MAAAA,QAAQ,EAAEiC,YAJQ;AAKlBG,MAAAA,kBAAkB,EAAE9K,KALF;AAMlB+K,MAAAA,iBAAiB,EAAE9K,IAND;AAOlB+K,MAAAA,gBAAgB,EAAE3N,GAPA;AAQlB4N,MAAAA,gBAAgB,EAAE9N,GARA;AASlB+N,MAAAA,SAAS,EAAE,CAAC,QAAD,EAAWX,cAAX,EAA2B,MAA3B,EAAmCE,aAAnC,EAAkD,MAAlD,EAA0DC,YAA1D,EAAwE,MAAxE,EAAgFC,YAAhF;AATO,KAAtB;;AAWA,QAAI,cAAc7K,OAAO,CAACc,IAA1B,EAAgC;AAC5BgK,MAAAA,eAAe,CAACO,sBAAhB,GAAyCrL,OAAO,CAACe,gBAAjD;AACA+J,MAAAA,eAAe,CAACQ,cAAhB,GAAiChB,OAAO,CAACI,WAAR,CAAoB1K,OAAO,CAACe,gBAA5B,CAAjC;AACH;;AACD,WAAO+J,eAAP;AACH;AAvUmC,CAAtB,CAAlB;;AAyUAnN,IAAI,CAAC,CAAC,WAAD,EAAc,WAAd,EAA2B,aAA3B,EAA0C,UAA1C,EAAsD,UAAtD,EAAkE,kBAAlE,EAAsF,kBAAtF,EAA0G,UAA1G,EAAsH,WAAtH,EAAmI,gBAAnI,EAAqJ,aAArJ,EAAoK,YAApK,EAAkL,WAAlL,EAA+L,MAA/L,EAAuM,eAAvM,EAAwN,YAAxN,EAAsO,kBAAtO,EAA0P,eAA1P,EAA2Q,YAA3Q,EAAyR,mBAAzR,EAA8S,UAA9S,EAA0T,UAA1T,CAAD,EAAwU,UAAS4N,IAAT,EAAe;AACvVhK,EAAAA,WAAW,CAACiK,SAAZ,CAAsBnF,iBAAtB,CAAwCkF,IAAxC,IAAgD,SAAhD;AACH,CAFG,CAAJ;;AAGA3P,OAAO,CAAC,kCAAD,CAAP,CAA4C,aAA5C,EAA2D2F,WAA3D;;AACAkK,MAAM,CAACC,OAAP,GAAiBnK,WAAjB;AACAA,WAAW,CAACoK,SAAZ,CAAsB/P,OAAO,CAAC,qBAAD,CAAP,CAA+BgQ,MAArD","sourcesContent":["/**\r\n * DevExtreme (viz/sparklines/sparkline.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar BaseSparkline = require(\"./base_sparkline\");\r\nvar dataValidatorModule = require(\"../components/data_validator\");\r\nvar seriesModule = require(\"../series/base_series\");\r\nvar MIN_BAR_WIDTH = 1;\r\nvar MAX_BAR_WIDTH = 50;\r\nvar DEFAULT_BAR_INTERVAL = 4;\r\nvar DEFAULT_CANVAS_WIDTH = 250;\r\nvar DEFAULT_CANVAS_HEIGHT = 30;\r\nvar DEFAULT_POINT_BORDER = 2;\r\nvar ALLOWED_TYPES = {\r\n    line: true,\r\n    spline: true,\r\n    stepline: true,\r\n    area: true,\r\n    steparea: true,\r\n    splinearea: true,\r\n    bar: true,\r\n    winloss: true\r\n};\r\nvar _math = Math;\r\nvar _abs = _math.abs;\r\nvar _round = _math.round;\r\nvar _max = _math.max;\r\nvar _min = _math.min;\r\nvar _isFinite = isFinite;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar _map = vizUtils.map;\r\nvar _normalizeEnum = vizUtils.normalizeEnum;\r\nvar _isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar _Number = Number;\r\nvar _String = String;\r\n\r\nfunction findMinMax(data, valField) {\r\n    var firstItem = data[0] || {};\r\n    var firstValue = firstItem[valField] || 0;\r\n    var min = firstValue;\r\n    var max = firstValue;\r\n    var minIndexes = [0];\r\n    var maxIndexes = [0];\r\n    var dataLength = data.length;\r\n    var value;\r\n    var i;\r\n    for (i = 1; i < dataLength; i++) {\r\n        value = data[i][valField];\r\n        if (value < min) {\r\n            min = value;\r\n            minIndexes = [i]\r\n        } else {\r\n            if (value === min) {\r\n                minIndexes.push(i)\r\n            }\r\n        }\r\n        if (value > max) {\r\n            max = value;\r\n            maxIndexes = [i]\r\n        } else {\r\n            if (value === max) {\r\n                maxIndexes.push(i)\r\n            }\r\n        }\r\n    }\r\n    if (max === min) {\r\n        minIndexes = maxIndexes = []\r\n    }\r\n    return {\r\n        minIndexes: minIndexes,\r\n        maxIndexes: maxIndexes\r\n    }\r\n}\r\n\r\nfunction parseNumericDataSource(data, argField, valField, ignoreEmptyPoints) {\r\n    return _map(data, function(dataItem, index) {\r\n        var item = null;\r\n        var isDataNumber;\r\n        var value;\r\n        if (void 0 !== dataItem) {\r\n            item = {};\r\n            isDataNumber = _isFinite(dataItem);\r\n            item[argField] = isDataNumber ? _String(index) : dataItem[argField];\r\n            value = isDataNumber ? dataItem : dataItem[valField];\r\n            item[valField] = null === value ? ignoreEmptyPoints ? void 0 : value : _Number(value);\r\n            item = void 0 !== item[argField] && void 0 !== item[valField] ? item : null\r\n        }\r\n        return item\r\n    })\r\n}\r\n\r\nfunction parseWinlossDataSource(data, argField, valField, target) {\r\n    var lowBarValue = -1;\r\n    var zeroBarValue = 0;\r\n    var highBarValue = 1;\r\n    var delta = 1e-4;\r\n    return _map(data, function(dataItem) {\r\n        var item = {};\r\n        item[argField] = dataItem[argField];\r\n        if (_abs(dataItem[valField] - target) < delta) {\r\n            item[valField] = zeroBarValue\r\n        } else {\r\n            if (dataItem[valField] > target) {\r\n                item[valField] = highBarValue\r\n            } else {\r\n                item[valField] = lowBarValue\r\n            }\r\n        }\r\n        return item\r\n    })\r\n}\r\n\r\nfunction selectPointColor(color, options, index, pointIndexes) {\r\n    if (index === pointIndexes.first || index === pointIndexes.last) {\r\n        color = options.firstLastColor\r\n    }\r\n    if ((pointIndexes.min || []).indexOf(index) >= 0) {\r\n        color = options.minColor\r\n    }\r\n    if ((pointIndexes.max || []).indexOf(index) >= 0) {\r\n        color = options.maxColor\r\n    }\r\n    return color\r\n}\r\n\r\nfunction createLineCustomizeFunction(pointIndexes, options) {\r\n    return function() {\r\n        var color = selectPointColor(void 0, options, this.index, pointIndexes);\r\n        return color ? {\r\n            visible: true,\r\n            border: {\r\n                color: color\r\n            }\r\n        } : {}\r\n    }\r\n}\r\n\r\nfunction createBarCustomizeFunction(pointIndexes, options, winlossData) {\r\n    return function() {\r\n        var index = this.index;\r\n        var isWinloss = \"winloss\" === options.type;\r\n        var target = isWinloss ? options.winlossThreshold : 0;\r\n        var value = isWinloss ? winlossData[index][options.valueField] : this.value;\r\n        var positiveColor = isWinloss ? options.winColor : options.barPositiveColor;\r\n        var negativeColor = isWinloss ? options.lossColor : options.barNegativeColor;\r\n        return {\r\n            color: selectPointColor(value >= target ? positiveColor : negativeColor, options, index, pointIndexes)\r\n        }\r\n    }\r\n}\r\nvar dxSparkline = BaseSparkline.inherit({\r\n    _rootClassPrefix: \"dxsl\",\r\n    _rootClass: \"dxsl-sparkline\",\r\n    _themeSection: \"sparkline\",\r\n    _defaultSize: {\r\n        width: DEFAULT_CANVAS_WIDTH,\r\n        height: DEFAULT_CANVAS_HEIGHT\r\n    },\r\n    _initCore: function() {\r\n        this.callBase();\r\n        this._createSeries()\r\n    },\r\n    _initialChanges: [\"DATA_SOURCE\"],\r\n    _dataSourceChangedHandler: function() {\r\n        this._requestChange([\"UPDATE\"])\r\n    },\r\n    _updateWidgetElements: function() {\r\n        this._updateSeries();\r\n        this.callBase()\r\n    },\r\n    _disposeWidgetElements: function() {\r\n        var that = this;\r\n        that._series && that._series.dispose();\r\n        that._series = that._seriesGroup = that._seriesLabelGroup = null\r\n    },\r\n    _cleanWidgetElements: function() {\r\n        this._seriesGroup.remove();\r\n        this._seriesLabelGroup.remove();\r\n        this._seriesGroup.clear();\r\n        this._seriesLabelGroup.clear()\r\n    },\r\n    _drawWidgetElements: function() {\r\n        if (this._dataIsLoaded()) {\r\n            this._drawSeries();\r\n            this._drawn()\r\n        }\r\n    },\r\n    _getCorrectCanvas: function() {\r\n        var options = this._allOptions;\r\n        var canvas = this._canvas;\r\n        var halfPointSize = options.pointSize && Math.ceil(options.pointSize / 2) + DEFAULT_POINT_BORDER;\r\n        var type = options.type;\r\n        if (\"bar\" !== type && \"winloss\" !== type && (options.showFirstLast || options.showMinMax)) {\r\n            return {\r\n                width: canvas.width,\r\n                height: canvas.height,\r\n                left: canvas.left + halfPointSize,\r\n                right: canvas.right + halfPointSize,\r\n                top: canvas.top + halfPointSize,\r\n                bottom: canvas.bottom + halfPointSize\r\n            }\r\n        }\r\n        return canvas\r\n    },\r\n    _prepareOptions: function() {\r\n        var that = this;\r\n        that._allOptions = that.callBase();\r\n        that._allOptions.type = _normalizeEnum(that._allOptions.type);\r\n        if (!ALLOWED_TYPES[that._allOptions.type]) {\r\n            that._allOptions.type = \"line\"\r\n        }\r\n    },\r\n    _createHtmlElements: function() {\r\n        this._seriesGroup = this._renderer.g().attr({\r\n            \"class\": \"dxsl-series\"\r\n        });\r\n        this._seriesLabelGroup = this._renderer.g().attr({\r\n            \"class\": \"dxsl-series-labels\"\r\n        })\r\n    },\r\n    _createSeries: function() {\r\n        this._series = new seriesModule.Series({\r\n            renderer: this._renderer,\r\n            seriesGroup: this._seriesGroup,\r\n            labelsGroup: this._seriesLabelGroup,\r\n            argumentAxis: this._argumentAxis,\r\n            valueAxis: this._valueAxis\r\n        }, {\r\n            widgetType: \"chart\",\r\n            type: \"line\"\r\n        })\r\n    },\r\n    _updateSeries: function() {\r\n        var that = this;\r\n        var groupsData;\r\n        var seriesOptions;\r\n        var singleSeries = that._series;\r\n        that._prepareDataSource();\r\n        seriesOptions = that._prepareSeriesOptions();\r\n        singleSeries.updateOptions(seriesOptions);\r\n        groupsData = {\r\n            groups: [{\r\n                series: [singleSeries]\r\n            }]\r\n        };\r\n        groupsData.argumentOptions = {\r\n            type: \"bar\" === seriesOptions.type ? \"discrete\" : void 0\r\n        };\r\n        that._simpleDataSource = dataValidatorModule.validateData(that._simpleDataSource, groupsData, that._incidentOccurred, {\r\n            checkTypeForAllData: false,\r\n            convertToAxisDataType: true,\r\n            sortingMethod: true\r\n        })[singleSeries.getArgumentField()];\r\n        seriesOptions.customizePoint = that._getCustomizeFunction();\r\n        singleSeries.updateData(that._simpleDataSource);\r\n        singleSeries.createPoints();\r\n        that._groupsDataCategories = groupsData.categories\r\n    },\r\n    _optionChangesMap: {\r\n        dataSource: \"DATA_SOURCE\"\r\n    },\r\n    _optionChangesOrder: [\"DATA_SOURCE\"],\r\n    _change_DATA_SOURCE: function() {\r\n        this._updateDataSource()\r\n    },\r\n    _prepareDataSource: function() {\r\n        var that = this;\r\n        var options = that._allOptions;\r\n        var argField = options.argumentField;\r\n        var valField = options.valueField;\r\n        var dataSource = that._dataSourceItems() || [];\r\n        var data = parseNumericDataSource(dataSource, argField, valField, that.option(\"ignoreEmptyPoints\"));\r\n        if (\"winloss\" === options.type) {\r\n            that._winlossDataSource = data;\r\n            that._simpleDataSource = parseWinlossDataSource(data, argField, valField, options.winlossThreshold)\r\n        } else {\r\n            that._simpleDataSource = data\r\n        }\r\n    },\r\n    _prepareSeriesOptions: function() {\r\n        var that = this;\r\n        var options = that._allOptions;\r\n        var type = \"winloss\" === options.type ? \"bar\" : options.type;\r\n        return {\r\n            visible: true,\r\n            argumentField: options.argumentField,\r\n            valueField: options.valueField,\r\n            color: options.lineColor,\r\n            width: options.lineWidth,\r\n            widgetType: \"chart\",\r\n            type: type,\r\n            opacity: type.indexOf(\"area\") !== -1 ? that._allOptions.areaOpacity : void 0,\r\n            point: {\r\n                size: options.pointSize,\r\n                symbol: options.pointSymbol,\r\n                border: {\r\n                    visible: true,\r\n                    width: DEFAULT_POINT_BORDER\r\n                },\r\n                color: options.pointColor,\r\n                visible: false,\r\n                hoverStyle: {\r\n                    border: {}\r\n                },\r\n                selectionStyle: {\r\n                    border: {}\r\n                }\r\n            },\r\n            border: {\r\n                color: options.lineColor,\r\n                width: options.lineWidth,\r\n                visible: \"bar\" !== type\r\n            }\r\n        }\r\n    },\r\n    _getCustomizeFunction: function() {\r\n        var that = this;\r\n        var options = that._allOptions;\r\n        var dataSource = that._winlossDataSource || that._simpleDataSource;\r\n        var drawnPointIndexes = that._getExtremumPointsIndexes(dataSource);\r\n        var customizeFunction;\r\n        if (\"winloss\" === options.type || \"bar\" === options.type) {\r\n            customizeFunction = createBarCustomizeFunction(drawnPointIndexes, options, that._winlossDataSource)\r\n        } else {\r\n            customizeFunction = createLineCustomizeFunction(drawnPointIndexes, options)\r\n        }\r\n        return customizeFunction\r\n    },\r\n    _getExtremumPointsIndexes: function(data) {\r\n        var that = this;\r\n        var options = that._allOptions;\r\n        var lastIndex = data.length - 1;\r\n        var indexes = {};\r\n        that._minMaxIndexes = findMinMax(data, options.valueField);\r\n        if (options.showFirstLast) {\r\n            indexes.first = 0;\r\n            indexes.last = lastIndex\r\n        }\r\n        if (options.showMinMax) {\r\n            indexes.min = that._minMaxIndexes.minIndexes;\r\n            indexes.max = that._minMaxIndexes.maxIndexes\r\n        }\r\n        return indexes\r\n    },\r\n    _getStick: function() {\r\n        return {\r\n            stick: \"bar\" !== this._series.type\r\n        }\r\n    },\r\n    _updateRange: function() {\r\n        var that = this;\r\n        var series = that._series;\r\n        var type = series.type;\r\n        var isBarType = \"bar\" === type;\r\n        var isWinlossType = \"winloss\" === type;\r\n        var DEFAULT_VALUE_RANGE_MARGIN = .15;\r\n        var DEFAULT_ARGUMENT_RANGE_MARGIN = .1;\r\n        var WINLOSS_MAX_RANGE = 1;\r\n        var WINLOSS_MIN_RANGE = -1;\r\n        var rangeData = series.getRangeData();\r\n        var minValue = that._allOptions.minValue;\r\n        var hasMinY = _isDefined(minValue) && _isFinite(minValue);\r\n        var maxValue = that._allOptions.maxValue;\r\n        var hasMaxY = _isDefined(maxValue) && _isFinite(maxValue);\r\n        var valCoef;\r\n        var argCoef;\r\n        valCoef = (rangeData.val.max - rangeData.val.min) * DEFAULT_VALUE_RANGE_MARGIN;\r\n        if (isBarType || isWinlossType || \"area\" === type) {\r\n            if (0 !== rangeData.val.min) {\r\n                rangeData.val.min -= valCoef\r\n            }\r\n            if (0 !== rangeData.val.max) {\r\n                rangeData.val.max += valCoef\r\n            }\r\n        } else {\r\n            rangeData.val.min -= valCoef;\r\n            rangeData.val.max += valCoef\r\n        }\r\n        if (hasMinY || hasMaxY) {\r\n            if (hasMinY && hasMaxY) {\r\n                rangeData.val.minVisible = _min(minValue, maxValue);\r\n                rangeData.val.maxVisible = _max(minValue, maxValue)\r\n            } else {\r\n                rangeData.val.minVisible = hasMinY ? _Number(minValue) : void 0;\r\n                rangeData.val.maxVisible = hasMaxY ? _Number(maxValue) : void 0\r\n            }\r\n            if (isWinlossType) {\r\n                rangeData.val.minVisible = hasMinY ? _max(rangeData.val.minVisible, WINLOSS_MIN_RANGE) : void 0;\r\n                rangeData.val.maxVisible = hasMaxY ? _min(rangeData.val.maxVisible, WINLOSS_MAX_RANGE) : void 0\r\n            }\r\n        }\r\n        if (series.getPoints().length > 1) {\r\n            if (isBarType) {\r\n                argCoef = (rangeData.arg.max - rangeData.arg.min) * DEFAULT_ARGUMENT_RANGE_MARGIN;\r\n                rangeData.arg.min = rangeData.arg.min - argCoef;\r\n                rangeData.arg.max = rangeData.arg.max + argCoef\r\n            }\r\n        }\r\n        rangeData.arg.categories = that._groupsDataCategories;\r\n        that._ranges = rangeData\r\n    },\r\n    _getBarWidth: function(pointsCount) {\r\n        var that = this;\r\n        var canvas = that._canvas;\r\n        var intervalWidth = pointsCount * DEFAULT_BAR_INTERVAL;\r\n        var rangeWidth = canvas.width - canvas.left - canvas.right - intervalWidth;\r\n        var width = _round(rangeWidth / pointsCount);\r\n        if (width < MIN_BAR_WIDTH) {\r\n            width = MIN_BAR_WIDTH\r\n        }\r\n        if (width > MAX_BAR_WIDTH) {\r\n            width = MAX_BAR_WIDTH\r\n        }\r\n        return width\r\n    },\r\n    _correctPoints: function() {\r\n        var that = this;\r\n        var seriesType = that._allOptions.type;\r\n        var seriesPoints = that._series.getPoints();\r\n        var pointsLength = seriesPoints.length;\r\n        var barWidth;\r\n        var i;\r\n        if (\"bar\" === seriesType || \"winloss\" === seriesType) {\r\n            barWidth = that._getBarWidth(pointsLength);\r\n            for (i = 0; i < pointsLength; i++) {\r\n                seriesPoints[i].correctCoordinates({\r\n                    width: barWidth,\r\n                    offset: 0\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _drawSeries: function() {\r\n        var that = this;\r\n        if (that._simpleDataSource.length > 0) {\r\n            that._correctPoints();\r\n            that._series.draw();\r\n            that._seriesGroup.append(that._renderer.root)\r\n        }\r\n    },\r\n    _isTooltipEnabled: function() {\r\n        return !!this._simpleDataSource.length\r\n    },\r\n    _getTooltipData: function() {\r\n        var that = this;\r\n        var options = that._allOptions;\r\n        var dataSource = that._winlossDataSource || that._simpleDataSource;\r\n        var tooltip = that._tooltip;\r\n        if (0 === dataSource.length) {\r\n            return {}\r\n        }\r\n        var minMax = that._minMaxIndexes;\r\n        var valueField = options.valueField;\r\n        var first = dataSource[0][valueField];\r\n        var last = dataSource[dataSource.length - 1][valueField];\r\n        var min = _isDefined(minMax.minIndexes[0]) ? dataSource[minMax.minIndexes[0]][valueField] : first;\r\n        var max = _isDefined(minMax.maxIndexes[0]) ? dataSource[minMax.maxIndexes[0]][valueField] : first;\r\n        var formattedFirst = tooltip.formatValue(first);\r\n        var formattedLast = tooltip.formatValue(last);\r\n        var formattedMin = tooltip.formatValue(min);\r\n        var formattedMax = tooltip.formatValue(max);\r\n        var customizeObject = {\r\n            firstValue: formattedFirst,\r\n            lastValue: formattedLast,\r\n            minValue: formattedMin,\r\n            maxValue: formattedMax,\r\n            originalFirstValue: first,\r\n            originalLastValue: last,\r\n            originalMinValue: min,\r\n            originalMaxValue: max,\r\n            valueText: [\"Start:\", formattedFirst, \"End:\", formattedLast, \"Min:\", formattedMin, \"Max:\", formattedMax]\r\n        };\r\n        if (\"winloss\" === options.type) {\r\n            customizeObject.originalThresholdValue = options.winlossThreshold;\r\n            customizeObject.thresholdValue = tooltip.formatValue(options.winlossThreshold)\r\n        }\r\n        return customizeObject\r\n    }\r\n});\r\n_map([\"lineColor\", \"lineWidth\", \"areaOpacity\", \"minColor\", \"maxColor\", \"barPositiveColor\", \"barNegativeColor\", \"winColor\", \"lessColor\", \"firstLastColor\", \"pointSymbol\", \"pointColor\", \"pointSize\", \"type\", \"argumentField\", \"valueField\", \"winlossThreshold\", \"showFirstLast\", \"showMinMax\", \"ignoreEmptyPoints\", \"minValue\", \"maxValue\"], function(name) {\r\n    dxSparkline.prototype._optionChangesMap[name] = \"OPTIONS\"\r\n});\r\nrequire(\"../../core/component_registrator\")(\"dxSparkline\", dxSparkline);\r\nmodule.exports = dxSparkline;\r\ndxSparkline.addPlugin(require(\"../core/data_source\").plugin);\r\n"]},"metadata":{},"sourceType":"script"}