{"ast":null,"code":"/**\r\n * DevExtreme (ui/html_editor/modules/dropImage.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _quill_importer = require(\"../quill_importer\");\n\nvar _events_engine = require(\"../../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../../events/utils\");\n\nvar _iterator = require(\"../../../core/utils/iterator\");\n\nvar _browser = require(\"../../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _window = require(\"../../../core/utils/window\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar BaseModule = (0, _quill_importer.getQuill)().import(\"core/module\");\n\nvar DropImageModule = function (_BaseModule) {\n  _inherits(DropImageModule, _BaseModule);\n\n  function DropImageModule(quill, options) {\n    var _this;\n\n    _classCallCheck(this, DropImageModule);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DropImageModule).call(this, quill, options));\n    _this.editorInstance = options.editorInstance;\n    var widgetName = _this.editorInstance.NAME;\n\n    _events_engine2.default.on(_this.quill.root, (0, _utils.addNamespace)(\"dragover\", widgetName), _this._dragOverHandler.bind(_assertThisInitialized(_this)));\n\n    _events_engine2.default.on(_this.quill.root, (0, _utils.addNamespace)(\"drop\", widgetName), _this._dropHandler.bind(_assertThisInitialized(_this)));\n\n    _events_engine2.default.on(_this.quill.root, (0, _utils.addNamespace)(\"paste\", widgetName), _this._pasteHandler.bind(_assertThisInitialized(_this)));\n\n    return _this;\n  }\n\n  _createClass(DropImageModule, [{\n    key: \"_dragOverHandler\",\n    value: function value(e) {\n      if (_browser2.default.msie) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"_dropHandler\",\n    value: function value(e) {\n      var dataTransfer = e.originalEvent.dataTransfer;\n      var hasFiles = dataTransfer && dataTransfer.files && dataTransfer.files.length;\n      e.preventDefault();\n\n      if (hasFiles) {\n        this._getImage(dataTransfer.files, this._addImage.bind(this));\n      }\n    }\n  }, {\n    key: \"_pasteHandler\",\n    value: function value(_ref) {\n      var _this2 = this;\n\n      var originalEvent = _ref.originalEvent;\n      var clipboardData = originalEvent.clipboardData;\n\n      if (!clipboardData) {\n        return;\n      }\n\n      var hasDataItems = clipboardData.items && clipboardData.items.length;\n      var isHtmlData = clipboardData.getData(\"text/html\");\n\n      if (!isHtmlData && hasDataItems) {\n        this._getImage(clipboardData.items, function (imageData) {\n          if (_browser2.default.mozilla) {\n            return;\n          }\n\n          if (_browser2.default.msie) {\n            setTimeout(function () {\n              _this2._addImage(imageData);\n            });\n          } else {\n            _this2._addImage(imageData);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_isImage\",\n    value: function value(file) {\n      return !!file.type.match(/^image\\/(a?png|bmp|gif|p?jpe?g|svg|vnd\\.microsoft\\.icon|webp)/i);\n    }\n  }, {\n    key: \"_getImage\",\n    value: function value(files, callback) {\n      var _this3 = this;\n\n      var window = (0, _window.getWindow)();\n      (0, _iterator.each)(files, function (index, file) {\n        if (!_this3._isImage(file)) {\n          return;\n        }\n\n        var reader = new window.FileReader();\n\n        reader.onload = function (_ref2) {\n          var target = _ref2.target;\n          callback(target.result);\n        };\n\n        var readableFile = file.getAsFile ? file.getAsFile() : file;\n\n        if (readableFile instanceof window.Blob) {\n          reader.readAsDataURL(readableFile);\n        }\n      });\n    }\n  }, {\n    key: \"_addImage\",\n    value: function value(data) {\n      var selection = this.quill.getSelection();\n      var pasteIndex = selection ? selection.index : this.quill.getLength();\n      this.quill.insertEmbed(pasteIndex, \"extendedImage\", data, \"user\");\n    }\n  }]);\n\n  return DropImageModule;\n}(BaseModule);\n\nexports.default = DropImageModule;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/html_editor/modules/dropImage.js"],"names":["Object","defineProperty","exports","value","_quill_importer","require","_events_engine","_events_engine2","_interopRequireDefault","_utils","_iterator","_browser","_browser2","_window","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","call","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","_setPrototypeOf","p","BaseModule","getQuill","import","DropImageModule","_BaseModule","quill","options","_this","editorInstance","widgetName","NAME","default","on","root","addNamespace","_dragOverHandler","bind","_dropHandler","_pasteHandler","e","msie","preventDefault","dataTransfer","originalEvent","hasFiles","files","_getImage","_addImage","_ref","_this2","clipboardData","hasDataItems","items","isHtmlData","getData","imageData","mozilla","setTimeout","file","type","match","callback","_this3","window","getWindow","each","index","_isImage","reader","FileReader","onload","_ref2","result","readableFile","getAsFile","Blob","readAsDataURL","data","selection","getSelection","pasteIndex","getLength","insertEmbed"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,EAAAA,KAAK,EAAE;AADkC,CAA7C;;AAGA,IAAIC,eAAe,GAAGC,OAAO,CAAC,mBAAD,CAA7B;;AACA,IAAIC,cAAc,GAAGD,OAAO,CAAC,oCAAD,CAA5B;;AACA,IAAIE,eAAe,GAAGC,sBAAsB,CAACF,cAAD,CAA5C;;AACA,IAAIG,MAAM,GAAGJ,OAAO,CAAC,uBAAD,CAApB;;AACA,IAAIK,SAAS,GAAGL,OAAO,CAAC,8BAAD,CAAvB;;AACA,IAAIM,QAAQ,GAAGN,OAAO,CAAC,6BAAD,CAAtB;;AACA,IAAIO,SAAS,GAAGJ,sBAAsB,CAACG,QAAD,CAAtC;;AACA,IAAIE,OAAO,GAAGR,OAAO,CAAC,4BAAD,CAArB;;AAEA,SAASG,sBAAT,CAAgCM,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AAED,SAASE,OAAT,CAAiBF,GAAjB,EAAsB;AAClB,MAAI,eAAe,OAAOG,MAAtB,IAAgC,aAAa,OAAOA,MAAM,CAACC,QAA/D,EAAyE;AACrEF,IAAAA,OAAO,GAAG,iBAASF,GAAT,EAAc;AACpB,aAAO,OAAOA,GAAd;AACH,KAFD;AAGH,GAJD,MAIO;AACHE,IAAAA,OAAO,GAAG,iBAASF,GAAT,EAAc;AACpB,aAAOA,GAAG,IAAI,eAAe,OAAOG,MAA7B,IAAuCH,GAAG,CAACK,WAAJ,KAAoBF,MAA3D,IAAqEH,GAAG,KAAKG,MAAM,CAACG,SAApF,GAAgG,QAAhG,GAA2G,OAAON,GAAzH;AACH,KAFD;AAGH;;AACD,SAAOE,OAAO,CAACF,GAAD,CAAd;AACH;;AAED,SAASO,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAC5C,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AACpC,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AACH;AACJ;;AAED,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;AACtC,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACnC,QAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AACAE,IAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AACAD,IAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;;AACA,QAAI,WAAWF,UAAf,EAA2B;AACvBA,MAAAA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AACH;;AACDjC,IAAAA,MAAM,CAACC,cAAP,CAAsByB,MAAtB,EAA8BI,UAAU,CAACI,GAAzC,EAA8CJ,UAA9C;AACH;AACJ;;AAED,SAASK,YAAT,CAAsBZ,WAAtB,EAAmCa,UAAnC,EAA+CC,WAA/C,EAA4D;AACxD,MAAID,UAAJ,EAAgB;AACZX,IAAAA,iBAAiB,CAACF,WAAW,CAACH,SAAb,EAAwBgB,UAAxB,CAAjB;AACH;;AACD,MAAIC,WAAJ,EAAiB;AACbZ,IAAAA,iBAAiB,CAACF,WAAD,EAAcc,WAAd,CAAjB;AACH;;AACD,SAAOd,WAAP;AACH;;AAED,SAASe,0BAAT,CAAoCC,IAApC,EAA0CC,IAA1C,EAAgD;AAC5C,MAAIA,IAAI,KAAK,aAAaxB,OAAO,CAACwB,IAAD,CAApB,IAA8B,eAAe,OAAOA,IAAzD,CAAR,EAAwE;AACpE,WAAOA,IAAP;AACH;;AACD,SAAOC,sBAAsB,CAACF,IAAD,CAA7B;AACH;;AAED,SAASG,eAAT,CAAyBC,CAAzB,EAA4B;AACxBD,EAAAA,eAAe,GAAG1C,MAAM,CAAC4C,cAAP,GAAwB5C,MAAM,CAAC6C,cAA/B,GAAgD,UAASF,CAAT,EAAY;AAC1E,WAAOA,CAAC,CAACG,SAAF,IAAe9C,MAAM,CAAC6C,cAAP,CAAsBF,CAAtB,CAAtB;AACH,GAFD;AAGA,SAAOD,eAAe,CAACC,CAAD,CAAtB;AACH;;AAED,SAASF,sBAAT,CAAgCF,IAAhC,EAAsC;AAClC,MAAI,KAAK,CAAL,KAAWA,IAAf,EAAqB;AACjB,UAAM,IAAIQ,cAAJ,CAAmB,2DAAnB,CAAN;AACH;;AACD,SAAOR,IAAP;AACH;;AAED,SAASS,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AACrC,MAAI,eAAe,OAAOA,UAAtB,IAAoC,SAASA,UAAjD,EAA6D;AACzD,UAAM,IAAI1B,SAAJ,CAAc,oDAAd,CAAN;AACH;;AACDyB,EAAAA,QAAQ,CAAC7B,SAAT,GAAqBpB,MAAM,CAACmD,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAAC9B,SAAvC,EAAkD;AACnED,IAAAA,WAAW,EAAE;AACThB,MAAAA,KAAK,EAAE8C,QADE;AAEThB,MAAAA,QAAQ,EAAE,IAFD;AAGTD,MAAAA,YAAY,EAAE;AAHL;AADsD,GAAlD,CAArB;;AAOA,MAAIkB,UAAJ,EAAgB;AACZE,IAAAA,eAAe,CAACH,QAAD,EAAWC,UAAX,CAAf;AACH;AACJ;;AAED,SAASE,eAAT,CAAyBT,CAAzB,EAA4BU,CAA5B,EAA+B;AAC3BD,EAAAA,eAAe,GAAGpD,MAAM,CAAC4C,cAAP,IAAyB,UAASD,CAAT,EAAYU,CAAZ,EAAe;AACtDV,IAAAA,CAAC,CAACG,SAAF,GAAcO,CAAd;AACA,WAAOV,CAAP;AACH,GAHD;;AAIA,SAAOS,eAAe,CAACT,CAAD,EAAIU,CAAJ,CAAtB;AACH;;AACD,IAAIC,UAAU,GAAG,CAAC,GAAGlD,eAAe,CAACmD,QAApB,IAAgCC,MAAhC,CAAuC,aAAvC,CAAjB;;AACA,IAAIC,eAAe,GAAG,UAASC,WAAT,EAAsB;AACxCV,EAAAA,SAAS,CAACS,eAAD,EAAkBC,WAAlB,CAAT;;AAEA,WAASD,eAAT,CAAyBE,KAAzB,EAAgCC,OAAhC,EAAyC;AACrC,QAAIC,KAAJ;;AACAxC,IAAAA,eAAe,CAAC,IAAD,EAAOoC,eAAP,CAAf;;AACAI,IAAAA,KAAK,GAAGvB,0BAA0B,CAAC,IAAD,EAAOI,eAAe,CAACe,eAAD,CAAf,CAAiCjB,IAAjC,CAAsC,IAAtC,EAA4CmB,KAA5C,EAAmDC,OAAnD,CAAP,CAAlC;AACAC,IAAAA,KAAK,CAACC,cAAN,GAAuBF,OAAO,CAACE,cAA/B;AACA,QAAIC,UAAU,GAAGF,KAAK,CAACC,cAAN,CAAqBE,IAAtC;;AACAzD,IAAAA,eAAe,CAAC0D,OAAhB,CAAwBC,EAAxB,CAA2BL,KAAK,CAACF,KAAN,CAAYQ,IAAvC,EAA6C,CAAC,GAAG1D,MAAM,CAAC2D,YAAX,EAAyB,UAAzB,EAAqCL,UAArC,CAA7C,EAA+FF,KAAK,CAACQ,gBAAN,CAAuBC,IAAvB,CAA4B7B,sBAAsB,CAACoB,KAAD,CAAlD,CAA/F;;AACAtD,IAAAA,eAAe,CAAC0D,OAAhB,CAAwBC,EAAxB,CAA2BL,KAAK,CAACF,KAAN,CAAYQ,IAAvC,EAA6C,CAAC,GAAG1D,MAAM,CAAC2D,YAAX,EAAyB,MAAzB,EAAiCL,UAAjC,CAA7C,EAA2FF,KAAK,CAACU,YAAN,CAAmBD,IAAnB,CAAwB7B,sBAAsB,CAACoB,KAAD,CAA9C,CAA3F;;AACAtD,IAAAA,eAAe,CAAC0D,OAAhB,CAAwBC,EAAxB,CAA2BL,KAAK,CAACF,KAAN,CAAYQ,IAAvC,EAA6C,CAAC,GAAG1D,MAAM,CAAC2D,YAAX,EAAyB,OAAzB,EAAkCL,UAAlC,CAA7C,EAA4FF,KAAK,CAACW,aAAN,CAAoBF,IAApB,CAAyB7B,sBAAsB,CAACoB,KAAD,CAA/C,CAA5F;;AACA,WAAOA,KAAP;AACH;;AACD1B,EAAAA,YAAY,CAACsB,eAAD,EAAkB,CAAC;AAC3BvB,IAAAA,GAAG,EAAE,kBADsB;AAE3B/B,IAAAA,KAAK,EAAE,eAASsE,CAAT,EAAY;AACf,UAAI7D,SAAS,CAACqD,OAAV,CAAkBS,IAAtB,EAA4B;AACxBD,QAAAA,CAAC,CAACE,cAAF;AACH;AACJ;AAN0B,GAAD,EAO3B;AACCzC,IAAAA,GAAG,EAAE,cADN;AAEC/B,IAAAA,KAAK,EAAE,eAASsE,CAAT,EAAY;AACf,UAAIG,YAAY,GAAGH,CAAC,CAACI,aAAF,CAAgBD,YAAnC;AACA,UAAIE,QAAQ,GAAGF,YAAY,IAAIA,YAAY,CAACG,KAA7B,IAAsCH,YAAY,CAACG,KAAb,CAAmBlD,MAAxE;AACA4C,MAAAA,CAAC,CAACE,cAAF;;AACA,UAAIG,QAAJ,EAAc;AACV,aAAKE,SAAL,CAAeJ,YAAY,CAACG,KAA5B,EAAmC,KAAKE,SAAL,CAAeX,IAAf,CAAoB,IAApB,CAAnC;AACH;AACJ;AATF,GAP2B,EAiB3B;AACCpC,IAAAA,GAAG,EAAE,eADN;AAEC/B,IAAAA,KAAK,EAAE,eAAS+E,IAAT,EAAe;AAClB,UAAIC,MAAM,GAAG,IAAb;;AACA,UAAIN,aAAa,GAAGK,IAAI,CAACL,aAAzB;AACA,UAAIO,aAAa,GAAGP,aAAa,CAACO,aAAlC;;AACA,UAAI,CAACA,aAAL,EAAoB;AAChB;AACH;;AACD,UAAIC,YAAY,GAAGD,aAAa,CAACE,KAAd,IAAuBF,aAAa,CAACE,KAAd,CAAoBzD,MAA9D;AACA,UAAI0D,UAAU,GAAGH,aAAa,CAACI,OAAd,CAAsB,WAAtB,CAAjB;;AACA,UAAI,CAACD,UAAD,IAAeF,YAAnB,EAAiC;AAC7B,aAAKL,SAAL,CAAeI,aAAa,CAACE,KAA7B,EAAoC,UAASG,SAAT,EAAoB;AACpD,cAAI7E,SAAS,CAACqD,OAAV,CAAkByB,OAAtB,EAA+B;AAC3B;AACH;;AACD,cAAI9E,SAAS,CAACqD,OAAV,CAAkBS,IAAtB,EAA4B;AACxBiB,YAAAA,UAAU,CAAC,YAAW;AAClBR,cAAAA,MAAM,CAACF,SAAP,CAAiBQ,SAAjB;AACH,aAFS,CAAV;AAGH,WAJD,MAIO;AACHN,YAAAA,MAAM,CAACF,SAAP,CAAiBQ,SAAjB;AACH;AACJ,SAXD;AAYH;AACJ;AAzBF,GAjB2B,EA2C3B;AACCvD,IAAAA,GAAG,EAAE,UADN;AAEC/B,IAAAA,KAAK,EAAE,eAASyF,IAAT,EAAe;AAClB,aAAO,CAAC,CAACA,IAAI,CAACC,IAAL,CAAUC,KAAV,CAAgB,gEAAhB,CAAT;AACH;AAJF,GA3C2B,EAgD3B;AACC5D,IAAAA,GAAG,EAAE,WADN;AAEC/B,IAAAA,KAAK,EAAE,eAAS4E,KAAT,EAAgBgB,QAAhB,EAA0B;AAC7B,UAAIC,MAAM,GAAG,IAAb;;AACA,UAAIC,MAAM,GAAG,CAAC,GAAGpF,OAAO,CAACqF,SAAZ,GAAb;AACA,OAAC,GAAGxF,SAAS,CAACyF,IAAd,EAAoBpB,KAApB,EAA2B,UAASqB,KAAT,EAAgBR,IAAhB,EAAsB;AAC7C,YAAI,CAACI,MAAM,CAACK,QAAP,CAAgBT,IAAhB,CAAL,EAA4B;AACxB;AACH;;AACD,YAAIU,MAAM,GAAG,IAAIL,MAAM,CAACM,UAAX,EAAb;;AACAD,QAAAA,MAAM,CAACE,MAAP,GAAgB,UAASC,KAAT,EAAgB;AAC5B,cAAI/E,MAAM,GAAG+E,KAAK,CAAC/E,MAAnB;AACAqE,UAAAA,QAAQ,CAACrE,MAAM,CAACgF,MAAR,CAAR;AACH,SAHD;;AAIA,YAAIC,YAAY,GAAGf,IAAI,CAACgB,SAAL,GAAiBhB,IAAI,CAACgB,SAAL,EAAjB,GAAoChB,IAAvD;;AACA,YAAIe,YAAY,YAAYV,MAAM,CAACY,IAAnC,EAAyC;AACrCP,UAAAA,MAAM,CAACQ,aAAP,CAAqBH,YAArB;AACH;AACJ,OAbD;AAcH;AAnBF,GAhD2B,EAoE3B;AACCzE,IAAAA,GAAG,EAAE,WADN;AAEC/B,IAAAA,KAAK,EAAE,eAAS4G,IAAT,EAAe;AAClB,UAAIC,SAAS,GAAG,KAAKrD,KAAL,CAAWsD,YAAX,EAAhB;AACA,UAAIC,UAAU,GAAGF,SAAS,GAAGA,SAAS,CAACZ,KAAb,GAAqB,KAAKzC,KAAL,CAAWwD,SAAX,EAA/C;AACA,WAAKxD,KAAL,CAAWyD,WAAX,CAAuBF,UAAvB,EAAmC,eAAnC,EAAoDH,IAApD,EAA0D,MAA1D;AACH;AANF,GApE2B,CAAlB,CAAZ;;AA4EA,SAAOtD,eAAP;AACH,CA3FqB,CA2FpBH,UA3FoB,CAAtB;;AA4FApD,OAAO,CAAC+D,OAAR,GAAkBR,eAAlB","sourcesContent":["/**\r\n * DevExtreme (ui/html_editor/modules/dropImage.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nvar _quill_importer = require(\"../quill_importer\");\r\nvar _events_engine = require(\"../../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _utils = require(\"../../../events/utils\");\r\nvar _iterator = require(\"../../../core/utils/iterator\");\r\nvar _browser = require(\"../../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _window = require(\"../../../core/utils/window\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar BaseModule = (0, _quill_importer.getQuill)().import(\"core/module\");\r\nvar DropImageModule = function(_BaseModule) {\r\n    _inherits(DropImageModule, _BaseModule);\r\n\r\n    function DropImageModule(quill, options) {\r\n        var _this;\r\n        _classCallCheck(this, DropImageModule);\r\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(DropImageModule).call(this, quill, options));\r\n        _this.editorInstance = options.editorInstance;\r\n        var widgetName = _this.editorInstance.NAME;\r\n        _events_engine2.default.on(_this.quill.root, (0, _utils.addNamespace)(\"dragover\", widgetName), _this._dragOverHandler.bind(_assertThisInitialized(_this)));\r\n        _events_engine2.default.on(_this.quill.root, (0, _utils.addNamespace)(\"drop\", widgetName), _this._dropHandler.bind(_assertThisInitialized(_this)));\r\n        _events_engine2.default.on(_this.quill.root, (0, _utils.addNamespace)(\"paste\", widgetName), _this._pasteHandler.bind(_assertThisInitialized(_this)));\r\n        return _this\r\n    }\r\n    _createClass(DropImageModule, [{\r\n        key: \"_dragOverHandler\",\r\n        value: function(e) {\r\n            if (_browser2.default.msie) {\r\n                e.preventDefault()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_dropHandler\",\r\n        value: function(e) {\r\n            var dataTransfer = e.originalEvent.dataTransfer;\r\n            var hasFiles = dataTransfer && dataTransfer.files && dataTransfer.files.length;\r\n            e.preventDefault();\r\n            if (hasFiles) {\r\n                this._getImage(dataTransfer.files, this._addImage.bind(this))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_pasteHandler\",\r\n        value: function(_ref) {\r\n            var _this2 = this;\r\n            var originalEvent = _ref.originalEvent;\r\n            var clipboardData = originalEvent.clipboardData;\r\n            if (!clipboardData) {\r\n                return\r\n            }\r\n            var hasDataItems = clipboardData.items && clipboardData.items.length;\r\n            var isHtmlData = clipboardData.getData(\"text/html\");\r\n            if (!isHtmlData && hasDataItems) {\r\n                this._getImage(clipboardData.items, function(imageData) {\r\n                    if (_browser2.default.mozilla) {\r\n                        return\r\n                    }\r\n                    if (_browser2.default.msie) {\r\n                        setTimeout(function() {\r\n                            _this2._addImage(imageData)\r\n                        })\r\n                    } else {\r\n                        _this2._addImage(imageData)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isImage\",\r\n        value: function(file) {\r\n            return !!file.type.match(/^image\\/(a?png|bmp|gif|p?jpe?g|svg|vnd\\.microsoft\\.icon|webp)/i)\r\n        }\r\n    }, {\r\n        key: \"_getImage\",\r\n        value: function(files, callback) {\r\n            var _this3 = this;\r\n            var window = (0, _window.getWindow)();\r\n            (0, _iterator.each)(files, function(index, file) {\r\n                if (!_this3._isImage(file)) {\r\n                    return\r\n                }\r\n                var reader = new window.FileReader;\r\n                reader.onload = function(_ref2) {\r\n                    var target = _ref2.target;\r\n                    callback(target.result)\r\n                };\r\n                var readableFile = file.getAsFile ? file.getAsFile() : file;\r\n                if (readableFile instanceof window.Blob) {\r\n                    reader.readAsDataURL(readableFile)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_addImage\",\r\n        value: function(data) {\r\n            var selection = this.quill.getSelection();\r\n            var pasteIndex = selection ? selection.index : this.quill.getLength();\r\n            this.quill.insertEmbed(pasteIndex, \"extendedImage\", data, \"user\")\r\n        }\r\n    }]);\r\n    return DropImageModule\r\n}(BaseModule);\r\nexports.default = DropImageModule;\r\n"]},"metadata":{},"sourceType":"script"}