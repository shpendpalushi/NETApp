{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.filter_row.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _utils = require(\"../../events/utils\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\n\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _editor = require(\"../editor/editor\");\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _overlay = require(\"../overlay\");\n\nvar _overlay2 = _interopRequireDefault(_overlay);\n\nvar _menu = require(\"../menu\");\n\nvar _menu2 = _interopRequireDefault(_menu);\n\nvar _accessibility = require(\"../shared/accessibility\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar OPERATION_ICONS = {\n  \"=\": \"filter-operation-equals\",\n  \"<>\": \"filter-operation-not-equals\",\n  \"<\": \"filter-operation-less\",\n  \"<=\": \"filter-operation-less-equal\",\n  \">\": \"filter-operation-greater\",\n  \">=\": \"filter-operation-greater-equal\",\n  \"default\": \"filter-operation-default\",\n  notcontains: \"filter-operation-not-contains\",\n  contains: \"filter-operation-contains\",\n  startswith: \"filter-operation-starts-with\",\n  endswith: \"filter-operation-ends-with\",\n  between: \"filter-operation-between\"\n};\nvar OPERATION_DESCRIPTORS = {\n  \"=\": \"equal\",\n  \"<>\": \"notEqual\",\n  \"<\": \"lessThan\",\n  \"<=\": \"lessThanOrEqual\",\n  \">\": \"greaterThan\",\n  \">=\": \"greaterThanOrEqual\",\n  startswith: \"startsWith\",\n  contains: \"contains\",\n  notcontains: \"notContains\",\n  endswith: \"endsWith\",\n  between: \"between\"\n};\nvar FILTERING_TIMEOUT = 700;\nvar CORRECT_FILTER_RANGE_OVERLAY_WIDTH = 1;\nvar FILTER_ROW_CLASS = \"filter-row\";\nvar FILTER_RANGE_OVERLAY_CLASS = \"filter-range-overlay\";\nvar FILTER_RANGE_START_CLASS = \"filter-range-start\";\nvar FILTER_RANGE_END_CLASS = \"filter-range-end\";\nvar MENU_CLASS = \"dx-menu\";\nvar EDITOR_WITH_MENU_CLASS = \"dx-editor-with-menu\";\nvar EDITOR_CONTAINER_CLASS = \"dx-editor-container\";\nvar EDITOR_CELL_CLASS = \"dx-editor-cell\";\nvar FILTER_MENU = \"dx-filter-menu\";\nvar APPLY_BUTTON_CLASS = \"dx-apply-button\";\nvar HIGHLIGHT_OUTLINE_CLASS = \"dx-highlight-outline\";\nvar FOCUSED_CLASS = \"dx-focused\";\nvar CELL_FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\nvar FILTER_RANGE_CONTENT_CLASS = \"dx-filter-range-content\";\nvar FILTER_MODIFIED_CLASS = \"dx-filter-modified\";\nvar EDITORS_INPUT_SELECTOR = \"input:not([type='hidden'])\";\nvar BETWEEN_OPERATION_DATA_TYPES = [\"date\", \"datetime\", \"number\"];\n\nfunction isOnClickApplyFilterMode(that) {\n  return \"onClick\" === that.option(\"filterRow.applyFilter\");\n}\n\nvar ColumnHeadersViewFilterRowExtender = function () {\n  var getEditorInstance = function getEditorInstance($editorContainer) {\n    var $editor = $editorContainer && $editorContainer.children();\n    var componentNames = $editor && $editor.data(\"dxComponents\");\n    var editor = componentNames && componentNames.length && $editor.data(componentNames[0]);\n\n    if (editor instanceof _editor2.default) {\n      return editor;\n    }\n  };\n\n  var getRangeTextByFilterValue = function getRangeTextByFilterValue(that, column) {\n    var result = \"\";\n    var rangeEnd = \"\";\n    var filterValue = getColumnFilterValue(that, column);\n\n    var formatOptions = _uiGrid_core4.default.getFormatOptionsByColumn(column, \"filterRow\");\n\n    if (Array.isArray(filterValue)) {\n      result = _uiGrid_core4.default.formatValue(filterValue[0], formatOptions);\n      rangeEnd = _uiGrid_core4.default.formatValue(filterValue[1], formatOptions);\n\n      if (\"\" !== rangeEnd) {\n        result += \" - \" + rangeEnd;\n      }\n    } else {\n      if ((0, _type.isDefined)(filterValue)) {\n        result = _uiGrid_core4.default.formatValue(filterValue, formatOptions);\n      }\n    }\n\n    return result;\n  };\n\n  var getColumnFilterValue = function getColumnFilterValue(that, column) {\n    if (column) {\n      return isOnClickApplyFilterMode(that) && void 0 !== column.bufferedFilterValue ? column.bufferedFilterValue : column.filterValue;\n    }\n  };\n\n  var getColumnSelectedFilterOperation = function getColumnSelectedFilterOperation(that, column) {\n    if (column) {\n      return isOnClickApplyFilterMode(that) && void 0 !== column.bufferedSelectedFilterOperation ? column.bufferedSelectedFilterOperation : column.selectedFilterOperation;\n    }\n  };\n\n  var isValidFilterValue = function isValidFilterValue(filterValue, column) {\n    if (column && BETWEEN_OPERATION_DATA_TYPES.indexOf(column.dataType) >= 0 && Array.isArray(filterValue)) {\n      return false;\n    }\n\n    return void 0 !== filterValue;\n  };\n\n  var getFilterValue = function getFilterValue(that, columnIndex, $editorContainer) {\n    var column = that._columnsController.columnOption(columnIndex);\n\n    var filterValue = getColumnFilterValue(that, column);\n    var isFilterRange = $editorContainer.closest(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).length;\n    var isRangeStart = $editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS));\n\n    if (filterValue && Array.isArray(filterValue) && \"between\" === getColumnSelectedFilterOperation(that, column)) {\n      if (isRangeStart) {\n        return filterValue[0];\n      } else {\n        return filterValue[1];\n      }\n    }\n\n    return !isFilterRange && isValidFilterValue(filterValue, column) ? filterValue : null;\n  };\n\n  var normalizeFilterValue = function normalizeFilterValue(that, filterValue, column, $editorContainer) {\n    if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\n      var columnFilterValue = getColumnFilterValue(that, column);\n\n      if ($editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))) {\n        return [filterValue, Array.isArray(columnFilterValue) ? columnFilterValue[1] : void 0];\n      } else {\n        return [Array.isArray(columnFilterValue) ? columnFilterValue[0] : columnFilterValue, filterValue];\n      }\n    }\n\n    return filterValue;\n  };\n\n  var updateFilterValue = function updateFilterValue(that, options) {\n    var value = \"\" === options.value ? null : options.value;\n    var $editorContainer = options.container;\n\n    var column = that._columnsController.columnOption(options.column.index);\n\n    var filterValue = getFilterValue(that, column.index, $editorContainer);\n\n    if (!(0, _type.isDefined)(filterValue) && !(0, _type.isDefined)(value)) {\n      return;\n    }\n\n    that._applyFilterViewController.setHighLight($editorContainer, filterValue !== value);\n\n    that._columnsController.columnOption(column.index, isOnClickApplyFilterMode(that) ? \"bufferedFilterValue\" : \"filterValue\", normalizeFilterValue(that, value, column, $editorContainer), options.notFireEvent);\n  };\n\n  return {\n    _updateEditorValue: function _updateEditorValue(column, $editorContainer) {\n      var that = this;\n      var editor = getEditorInstance($editorContainer);\n      editor && editor.option(\"value\", getFilterValue(that, column.index, $editorContainer));\n    },\n    _columnOptionChanged: function _columnOptionChanged(e) {\n      var that = this;\n      var optionNames = e.optionNames;\n      var overlayInstance;\n      var visibleIndex;\n      var column;\n      var $cell;\n      var $editorContainer;\n      var $editorRangeElements;\n      var $menu;\n\n      if (_uiGrid_core4.default.checkChanges(optionNames, [\"filterValue\", \"bufferedFilterValue\", \"selectedFilterOperation\", \"bufferedSelectedFilterOperation\"]) && void 0 !== e.columnIndex) {\n        visibleIndex = that._columnsController.getVisibleIndex(e.columnIndex);\n        column = that._columnsController.columnOption(e.columnIndex);\n        $cell = that._getCellElement(that.element().find(\".\" + that.addWidgetPrefix(FILTER_ROW_CLASS)).index(), visibleIndex) || (0, _renderer2.default)();\n        $editorContainer = $cell.find(\".\" + EDITOR_CONTAINER_CLASS).first();\n\n        if (optionNames.filterValue || optionNames.bufferedFilterValue) {\n          that._updateEditorValue(column, $editorContainer);\n\n          overlayInstance = $cell.find(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).data(\"dxOverlay\");\n\n          if (overlayInstance) {\n            $editorRangeElements = overlayInstance.$content().find(\".\" + EDITOR_CONTAINER_CLASS);\n\n            that._updateEditorValue(column, $editorRangeElements.first());\n\n            that._updateEditorValue(column, $editorRangeElements.last());\n          }\n\n          if (!overlayInstance || !overlayInstance.option(\"visible\")) {\n            that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column));\n          }\n        }\n\n        if (optionNames.selectedFilterOperation || optionNames.bufferedSelectedFilterOperation) {\n          if (visibleIndex >= 0 && column) {\n            $menu = $cell.find(\".\" + MENU_CLASS);\n\n            if ($menu.length) {\n              that._updateFilterOperationChooser($menu, column, $editorContainer);\n\n              if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\n                that._renderFilterRangeContent($cell, column);\n              } else {\n                if ($editorContainer.find(\".\" + FILTER_RANGE_CONTENT_CLASS).length) {\n                  that._renderEditor($editorContainer, that._getEditorOptions($editorContainer, column));\n\n                  that._hideFilterRange();\n                }\n              }\n            }\n          }\n        }\n\n        return;\n      }\n\n      that.callBase(e);\n    },\n    _renderCore: function _renderCore() {\n      this._filterRangeOverlayInstance = null;\n      this.callBase.apply(this, arguments);\n    },\n    _resizeCore: function _resizeCore() {\n      this.callBase.apply(this, arguments);\n      this._filterRangeOverlayInstance && this._filterRangeOverlayInstance.repaint();\n    },\n    isFilterRowVisible: function isFilterRowVisible() {\n      return this._isElementVisible(this.option(\"filterRow\"));\n    },\n    isVisible: function isVisible() {\n      return this.callBase() || this.isFilterRowVisible();\n    },\n    init: function init() {\n      this.callBase();\n      this._applyFilterViewController = this.getController(\"applyFilter\");\n    },\n    _initFilterRangeOverlay: function _initFilterRangeOverlay($cell, column) {\n      var that = this;\n      var sharedData = {};\n      var $editorContainer = $cell.find(\".dx-editor-container\");\n      var $overlay = (0, _renderer2.default)(\"<div>\").addClass(that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).appendTo($cell);\n      return that._createComponent($overlay, _overlay2.default, {\n        height: \"auto\",\n        shading: false,\n        showTitle: false,\n        focusStateEnabled: false,\n        closeOnTargetScroll: false,\n        closeOnOutsideClick: true,\n        animation: false,\n        position: {\n          my: \"top\",\n          at: \"top\",\n          of: $editorContainer.length && $editorContainer || $cell,\n          offset: \"0 -1\"\n        },\n        contentTemplate: function contentTemplate(contentElement) {\n          var editorOptions;\n          var $editor = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS + \" \" + that.addWidgetPrefix(FILTER_RANGE_START_CLASS)).appendTo(contentElement);\n          column = that._columnsController.columnOption(column.index);\n          editorOptions = that._getEditorOptions($editor, column);\n          editorOptions.sharedData = sharedData;\n\n          that._renderEditor($editor, editorOptions);\n\n          _events_engine2.default.on($editor.find(EDITORS_INPUT_SELECTOR), \"keydown\", function (e) {\n            var $prevElement = $cell.find(\"[tabindex]\").not(e.target).first();\n\n            if (\"tab\" === (0, _utils.normalizeKeyName)(e) && e.shiftKey) {\n              e.preventDefault();\n\n              that._hideFilterRange();\n\n              if (!$prevElement.length) {\n                $prevElement = $cell.prev().find(\"[tabindex]\").last();\n              }\n\n              _events_engine2.default.trigger($prevElement, \"focus\");\n            }\n          });\n\n          $editor = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS + \" \" + that.addWidgetPrefix(FILTER_RANGE_END_CLASS)).appendTo(contentElement);\n          editorOptions = that._getEditorOptions($editor, column);\n          editorOptions.sharedData = sharedData;\n\n          that._renderEditor($editor, editorOptions);\n\n          _events_engine2.default.on($editor.find(EDITORS_INPUT_SELECTOR), \"keydown\", function (e) {\n            if (\"tab\" === (0, _utils.normalizeKeyName)(e) && !e.shiftKey) {\n              e.preventDefault();\n\n              that._hideFilterRange();\n\n              _events_engine2.default.trigger($cell.next().find(\"[tabindex]\").first(), \"focus\");\n            }\n          });\n\n          return (0, _renderer2.default)(contentElement).addClass(that.getWidgetContainerClass());\n        },\n        onShown: function onShown(e) {\n          var $editor = e.component.$content().find(\".\" + EDITOR_CONTAINER_CLASS).first();\n\n          _events_engine2.default.trigger($editor.find(EDITORS_INPUT_SELECTOR), \"focus\");\n        },\n        onHidden: function onHidden() {\n          column = that._columnsController.columnOption(column.index);\n          $cell.find(\".\" + MENU_CLASS).parent().addClass(EDITOR_WITH_MENU_CLASS);\n\n          if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\n            that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column));\n\n            that.component.updateDimensions();\n          }\n        }\n      });\n    },\n    _updateFilterRangeOverlay: function _updateFilterRangeOverlay(options) {\n      var overlayInstance = this._filterRangeOverlayInstance;\n      overlayInstance && overlayInstance.option(options);\n    },\n    _showFilterRange: function _showFilterRange($cell, column) {\n      var that = this;\n      var $overlay = $cell.children(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS));\n      var overlayInstance = $overlay.length && $overlay.data(\"dxOverlay\");\n\n      if (!overlayInstance && column) {\n        overlayInstance = that._initFilterRangeOverlay($cell, column);\n      }\n\n      if (!overlayInstance.option(\"visible\")) {\n        that._filterRangeOverlayInstance && that._filterRangeOverlayInstance.hide();\n        that._filterRangeOverlayInstance = overlayInstance;\n\n        that._updateFilterRangeOverlay({\n          width: $cell.outerWidth(true) + CORRECT_FILTER_RANGE_OVERLAY_WIDTH\n        });\n\n        that._filterRangeOverlayInstance && that._filterRangeOverlayInstance.show();\n      }\n    },\n    _hideFilterRange: function _hideFilterRange() {\n      var overlayInstance = this._filterRangeOverlayInstance;\n      overlayInstance && overlayInstance.hide();\n    },\n    getFilterRangeOverlayInstance: function getFilterRangeOverlayInstance() {\n      return this._filterRangeOverlayInstance;\n    },\n    _createRow: function _createRow(row) {\n      var _this = this;\n\n      var $row = this.callBase(row);\n\n      if (\"filter\" === row.rowType) {\n        $row.addClass(this.addWidgetPrefix(FILTER_ROW_CLASS));\n\n        if (!this.option(\"useLegacyKeyboardNavigation\")) {\n          _events_engine2.default.on($row, \"keydown\", function (event) {\n            return (0, _accessibility.selectView)(\"filterRow\", _this, event);\n          });\n        }\n      }\n\n      return $row;\n    },\n    _getRows: function _getRows() {\n      var result = this.callBase();\n\n      if (this.isFilterRowVisible()) {\n        result.push({\n          rowType: \"filter\"\n        });\n      }\n\n      return result;\n    },\n    _renderFilterCell: function _renderFilterCell(cell, options) {\n      var that = this;\n      var column = options.column;\n      var $cell = (0, _renderer2.default)(cell);\n      var $container;\n      var $editorContainer;\n\n      if (that.component.option(\"showColumnHeaders\")) {\n        that.setAria(\"describedby\", column.headerId, $cell);\n      }\n\n      that.setAria(\"label\", _message2.default.format(\"dxDataGrid-ariaFilterCell\"), $cell);\n      $cell.addClass(EDITOR_CELL_CLASS);\n      $container = (0, _renderer2.default)(\"<div>\").appendTo($cell);\n      $editorContainer = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS).appendTo($container);\n\n      if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\n        that._renderFilterRangeContent($cell, column);\n      } else {\n        var editorOptions = that._getEditorOptions($editorContainer, column);\n\n        that._renderEditor($editorContainer, editorOptions);\n      }\n\n      if (column.alignment) {\n        $cell.find(EDITORS_INPUT_SELECTOR).first().css(\"textAlign\", column.alignment);\n      }\n\n      if (column.filterOperations && column.filterOperations.length) {\n        that._renderFilterOperationChooser($container, column, $editorContainer);\n      }\n    },\n    _renderCellContent: function _renderCellContent($cell, options) {\n      var that = this;\n      var column = options.column;\n\n      if (\"filter\" === options.rowType) {\n        if (column.command) {\n          $cell.html(\"&nbsp;\");\n        } else {\n          if (column.allowFiltering) {\n            that.renderTemplate($cell, that._renderFilterCell.bind(that), options);\n            return;\n          }\n        }\n      }\n\n      that.callBase($cell, options);\n    },\n    _getEditorOptions: function _getEditorOptions($editorContainer, column) {\n      var that = this;\n      var accessibilityOptions = {\n        editorOptions: {\n          inputAttr: that._getFilterInputAccessibilityAttributes(column)\n        }\n      };\n      var result = (0, _extend.extend)(accessibilityOptions, column, {\n        value: getFilterValue(that, column.index, $editorContainer),\n        parentType: \"filterRow\",\n        showAllText: that.option(\"filterRow.showAllText\"),\n        updateValueTimeout: \"onClick\" === that.option(\"filterRow.applyFilter\") ? 0 : FILTERING_TIMEOUT,\n        width: null,\n        setValue: function setValue(value, notFireEvent) {\n          updateFilterValue(that, {\n            column: column,\n            value: value,\n            container: $editorContainer,\n            notFireEvent: notFireEvent\n          });\n        }\n      });\n\n      if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\n        if ($editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))) {\n          result.placeholder = that.option(\"filterRow.betweenStartText\");\n        } else {\n          result.placeholder = that.option(\"filterRow.betweenEndText\");\n        }\n      }\n\n      return result;\n    },\n    _getFilterInputAccessibilityAttributes: function _getFilterInputAccessibilityAttributes(column) {\n      var columnAriaLabel = _message2.default.format(\"dxDataGrid-ariaFilterCell\");\n\n      if (this.component.option(\"showColumnHeaders\")) {\n        return {\n          \"aria-label\": columnAriaLabel,\n          \"aria-describedby\": column.headerId\n        };\n      }\n\n      return {\n        \"aria-label\": columnAriaLabel\n      };\n    },\n    _renderEditor: function _renderEditor($editorContainer, options) {\n      $editorContainer.empty();\n      return this.getController(\"editorFactory\").createEditor((0, _renderer2.default)(\"<div>\").appendTo($editorContainer), options);\n    },\n    _renderFilterRangeContent: function _renderFilterRangeContent($cell, column) {\n      var that = this;\n      var $editorContainer = $cell.find(\".\" + EDITOR_CONTAINER_CLASS).first();\n      $editorContainer.empty();\n      var $filterRangeContent = (0, _renderer2.default)(\"<div>\").addClass(FILTER_RANGE_CONTENT_CLASS).attr(\"tabindex\", this.option(\"tabIndex\"));\n\n      _events_engine2.default.on($filterRangeContent, \"focusin\", function () {\n        that._showFilterRange($cell, column);\n      });\n\n      $filterRangeContent.appendTo($editorContainer);\n\n      that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column));\n    },\n    _updateFilterRangeContent: function _updateFilterRangeContent($cell, value) {\n      var $filterRangeContent = $cell.find(\".\" + FILTER_RANGE_CONTENT_CLASS);\n\n      if ($filterRangeContent.length) {\n        if (\"\" === value) {\n          $filterRangeContent.html(\"&nbsp;\");\n        } else {\n          $filterRangeContent.text(value);\n        }\n      }\n    },\n    _updateFilterOperationChooser: function _updateFilterOperationChooser($menu, column, $editorContainer) {\n      var that = this;\n      var isCellWasFocused;\n\n      var restoreFocus = function restoreFocus() {\n        var menu = _menu2.default.getInstance($menu);\n\n        menu && menu.option(\"focusedElement\", null);\n        isCellWasFocused && that._focusEditor($editorContainer);\n      };\n\n      that._createComponent($menu, _menu2.default, {\n        integrationOptions: {},\n        activeStateEnabled: false,\n        selectionMode: \"single\",\n        cssClass: that.getWidgetContainerClass() + \" \" + CELL_FOCUS_DISABLED_CLASS + \" \" + FILTER_MENU,\n        showFirstSubmenuMode: \"onHover\",\n        hideSubmenuOnMouseLeave: true,\n        items: [{\n          disabled: column.filterOperations && column.filterOperations.length ? false : true,\n          icon: OPERATION_ICONS[getColumnSelectedFilterOperation(that, column) || \"default\"],\n          selectable: false,\n          items: that._getFilterOperationMenuItems(column)\n        }],\n        onItemClick: function onItemClick(properties) {\n          var selectedFilterOperation = properties.itemData.name;\n          var columnSelectedFilterOperation = getColumnSelectedFilterOperation(that, column);\n          var notFocusEditor = false;\n          var isOnClickMode = isOnClickApplyFilterMode(that);\n          var options = {};\n\n          if (properties.itemData.items || selectedFilterOperation && selectedFilterOperation === columnSelectedFilterOperation) {\n            return;\n          }\n\n          if (selectedFilterOperation) {\n            options[isOnClickMode ? \"bufferedSelectedFilterOperation\" : \"selectedFilterOperation\"] = selectedFilterOperation;\n\n            if (\"between\" === selectedFilterOperation || \"between\" === columnSelectedFilterOperation) {\n              notFocusEditor = \"between\" === selectedFilterOperation;\n              options[isOnClickMode ? \"bufferedFilterValue\" : \"filterValue\"] = null;\n            }\n          } else {\n            options[isOnClickMode ? \"bufferedFilterValue\" : \"filterValue\"] = null;\n            options[isOnClickMode ? \"bufferedSelectedFilterOperation\" : \"selectedFilterOperation\"] = column.defaultSelectedFilterOperation || null;\n          }\n\n          that._columnsController.columnOption(column.index, options);\n\n          that._applyFilterViewController.setHighLight($editorContainer, true);\n\n          if (!selectedFilterOperation) {\n            var editor = getEditorInstance($editorContainer);\n\n            if (editor && \"dxDateBox\" === editor.NAME && !editor.option(\"isValid\")) {\n              editor.reset();\n              editor.option(\"isValid\", true);\n            }\n          }\n\n          if (!notFocusEditor) {\n            that._focusEditor($editorContainer);\n          } else {\n            that._showFilterRange($editorContainer.closest(\".\" + EDITOR_CELL_CLASS), column);\n          }\n        },\n        onSubmenuShown: function onSubmenuShown() {\n          isCellWasFocused = that._isEditorFocused($editorContainer);\n          that.getController(\"editorFactory\").loseFocus();\n        },\n        onSubmenuHiding: function onSubmenuHiding() {\n          _events_engine2.default.trigger($menu, \"blur\");\n\n          restoreFocus();\n        },\n        onContentReady: function onContentReady(e) {\n          _events_engine2.default.on($menu, \"blur\", function () {\n            var menu = e.component;\n\n            menu._hideSubmenu(menu._visibleSubmenu);\n\n            restoreFocus();\n          });\n        },\n        rtlEnabled: that.option(\"rtlEnabled\")\n      });\n    },\n    _isEditorFocused: function _isEditorFocused($container) {\n      return $container.hasClass(FOCUSED_CLASS) || $container.parents(\".\" + FOCUSED_CLASS).length;\n    },\n    _focusEditor: function _focusEditor($container) {\n      this.getController(\"editorFactory\").focus($container);\n\n      _events_engine2.default.trigger($container.find(EDITORS_INPUT_SELECTOR), \"focus\");\n    },\n    _renderFilterOperationChooser: function _renderFilterOperationChooser($container, column, $editorContainer) {\n      var that = this;\n      var $menu;\n\n      if (that.option(\"filterRow.showOperationChooser\")) {\n        $container.addClass(EDITOR_WITH_MENU_CLASS);\n        $menu = (0, _renderer2.default)(\"<div>\").prependTo($container);\n\n        that._updateFilterOperationChooser($menu, column, $editorContainer);\n      }\n    },\n    _getFilterOperationMenuItems: function _getFilterOperationMenuItems(column) {\n      var that = this;\n      var result = [{}];\n      var filterRowOptions = that.option(\"filterRow\");\n      var operationDescriptions = filterRowOptions && filterRowOptions.operationDescriptions || {};\n\n      if (column.filterOperations && column.filterOperations.length) {\n        var availableFilterOperations = column.filterOperations.filter(function (value) {\n          return (0, _type.isDefined)(OPERATION_DESCRIPTORS[value]);\n        });\n        result = _iterator2.default.map(availableFilterOperations, function (value) {\n          var descriptionName = OPERATION_DESCRIPTORS[value];\n          return {\n            name: value,\n            selected: (getColumnSelectedFilterOperation(that, column) || column.defaultFilterOperation) === value,\n            text: operationDescriptions[descriptionName],\n            icon: OPERATION_ICONS[value]\n          };\n        });\n        result.push({\n          name: null,\n          text: filterRowOptions && filterRowOptions.resetOperationText,\n          icon: OPERATION_ICONS.default\n        });\n      }\n\n      return result;\n    },\n    optionChanged: function optionChanged(args) {\n      var that = this;\n\n      switch (args.name) {\n        case \"filterRow\":\n        case \"showColumnLines\":\n          this._invalidate(true, true);\n\n          args.handled = true;\n          break;\n\n        default:\n          that.callBase(args);\n      }\n    }\n  };\n}();\n\nvar DataControllerFilterRowExtender = {\n  skipCalculateColumnFilters: function skipCalculateColumnFilters() {\n    return false;\n  },\n  _calculateAdditionalFilter: function _calculateAdditionalFilter() {\n    if (this.skipCalculateColumnFilters()) {\n      return this.callBase();\n    }\n\n    var filters = [this.callBase()];\n\n    var columns = this._columnsController.getVisibleColumns(null, true);\n\n    _iterator2.default.each(columns, function () {\n      var filter;\n\n      if (this.allowFiltering && this.calculateFilterExpression && (0, _type.isDefined)(this.filterValue)) {\n        filter = this.createFilterExpression(this.filterValue, this.selectedFilterOperation || this.defaultFilterOperation, \"filterRow\");\n        filters.push(filter);\n      }\n    });\n\n    return _uiGrid_core4.default.combineFilters(filters);\n  }\n};\nexports.ApplyFilterViewController = _uiGrid_core2.default.ViewController.inherit({\n  _getHeaderPanel: function _getHeaderPanel() {\n    if (!this._headerPanel) {\n      this._headerPanel = this.getView(\"headerPanel\");\n    }\n\n    return this._headerPanel;\n  },\n  setHighLight: function setHighLight($element, value) {\n    if (isOnClickApplyFilterMode(this)) {\n      $element && $element.toggleClass(HIGHLIGHT_OUTLINE_CLASS, value) && $element.closest(\".\" + EDITOR_CELL_CLASS).toggleClass(FILTER_MODIFIED_CLASS, value);\n\n      this._getHeaderPanel().enableApplyButton(value);\n    }\n  },\n  applyFilter: function applyFilter() {\n    var columnsController = this.getController(\"columns\");\n    var columns = columnsController.getColumns();\n    columnsController.beginUpdate();\n\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[i];\n\n      if (void 0 !== column.bufferedFilterValue) {\n        columnsController.columnOption(i, \"filterValue\", column.bufferedFilterValue);\n        column.bufferedFilterValue = void 0;\n      }\n\n      if (void 0 !== column.bufferedSelectedFilterOperation) {\n        columnsController.columnOption(i, \"selectedFilterOperation\", column.bufferedSelectedFilterOperation);\n        column.bufferedSelectedFilterOperation = void 0;\n      }\n    }\n\n    columnsController.endUpdate();\n    this.removeHighLights();\n  },\n  removeHighLights: function removeHighLights() {\n    if (isOnClickApplyFilterMode(this)) {\n      var columnHeadersViewElement = this.getView(\"columnHeadersView\").element();\n      columnHeadersViewElement.find(\".\" + this.addWidgetPrefix(FILTER_ROW_CLASS) + \" .\" + HIGHLIGHT_OUTLINE_CLASS).removeClass(HIGHLIGHT_OUTLINE_CLASS);\n      columnHeadersViewElement.find(\".\" + this.addWidgetPrefix(FILTER_ROW_CLASS) + \" .\" + FILTER_MODIFIED_CLASS).removeClass(FILTER_MODIFIED_CLASS);\n\n      this._getHeaderPanel().enableApplyButton(false);\n    }\n  }\n});\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      filterRow: {\n        visible: false,\n        showOperationChooser: true,\n        showAllText: _message2.default.format(\"dxDataGrid-filterRowShowAllText\"),\n        resetOperationText: _message2.default.format(\"dxDataGrid-filterRowResetOperationText\"),\n        applyFilter: \"auto\",\n        applyFilterText: _message2.default.format(\"dxDataGrid-applyFilterText\"),\n        operationDescriptions: {\n          equal: _message2.default.format(\"dxDataGrid-filterRowOperationEquals\"),\n          notEqual: _message2.default.format(\"dxDataGrid-filterRowOperationNotEquals\"),\n          lessThan: _message2.default.format(\"dxDataGrid-filterRowOperationLess\"),\n          lessThanOrEqual: _message2.default.format(\"dxDataGrid-filterRowOperationLessOrEquals\"),\n          greaterThan: _message2.default.format(\"dxDataGrid-filterRowOperationGreater\"),\n          greaterThanOrEqual: _message2.default.format(\"dxDataGrid-filterRowOperationGreaterOrEquals\"),\n          startsWith: _message2.default.format(\"dxDataGrid-filterRowOperationStartsWith\"),\n          contains: _message2.default.format(\"dxDataGrid-filterRowOperationContains\"),\n          notContains: _message2.default.format(\"dxDataGrid-filterRowOperationNotContains\"),\n          endsWith: _message2.default.format(\"dxDataGrid-filterRowOperationEndsWith\"),\n          between: _message2.default.format(\"dxDataGrid-filterRowOperationBetween\"),\n          isBlank: _message2.default.format(\"dxFilterBuilder-filterOperationIsBlank\"),\n          isNotBlank: _message2.default.format(\"dxFilterBuilder-filterOperationIsNotBlank\")\n        },\n        betweenStartText: _message2.default.format(\"dxDataGrid-filterRowOperationBetweenStartText\"),\n        betweenEndText: _message2.default.format(\"dxDataGrid-filterRowOperationBetweenEndText\")\n      }\n    };\n  },\n  controllers: {\n    applyFilter: exports.ApplyFilterViewController\n  },\n  extenders: {\n    controllers: {\n      data: DataControllerFilterRowExtender,\n      columnsResizer: {\n        _startResizing: function _startResizing() {\n          var that = this;\n          var cellIndex;\n          var overlayInstance;\n          that.callBase.apply(that, arguments);\n\n          if (that.isResizing()) {\n            overlayInstance = that._columnHeadersView.getFilterRangeOverlayInstance();\n\n            if (overlayInstance) {\n              cellIndex = overlayInstance.$element().closest(\"td\").index();\n\n              if (cellIndex === that._targetPoint.columnIndex || cellIndex === that._targetPoint.columnIndex + 1) {\n                overlayInstance.$content().hide();\n              }\n            }\n          }\n        },\n        _endResizing: function _endResizing() {\n          var that = this;\n          var $cell;\n          var overlayInstance;\n\n          if (that.isResizing()) {\n            overlayInstance = that._columnHeadersView.getFilterRangeOverlayInstance();\n\n            if (overlayInstance) {\n              $cell = overlayInstance.$element().closest(\"td\");\n\n              that._columnHeadersView._updateFilterRangeOverlay({\n                width: $cell.outerWidth(true) + CORRECT_FILTER_RANGE_OVERLAY_WIDTH\n              });\n\n              overlayInstance.$content().show();\n            }\n          }\n\n          that.callBase.apply(that, arguments);\n        }\n      }\n    },\n    views: {\n      columnHeadersView: ColumnHeadersViewFilterRowExtender,\n      headerPanel: {\n        _getToolbarItems: function _getToolbarItems() {\n          var items = this.callBase();\n\n          var filterItem = this._prepareFilterItem(items);\n\n          return filterItem.concat(items);\n        },\n        _prepareFilterItem: function _prepareFilterItem() {\n          var that = this;\n          var filterItem = [];\n\n          if (that._isShowApplyFilterButton()) {\n            var hintText = that.option(\"filterRow.applyFilterText\");\n\n            var columns = that._columnsController.getColumns();\n\n            var disabled = !columns.filter(function (column) {\n              return void 0 !== column.bufferedFilterValue;\n            }).length;\n\n            var onInitialized = function onInitialized(e) {\n              (0, _renderer2.default)(e.element).addClass(that._getToolbarButtonClass(APPLY_BUTTON_CLASS));\n            };\n\n            var onClickHandler = function onClickHandler() {\n              that._applyFilterViewController.applyFilter();\n            };\n\n            var toolbarItem = {\n              widget: \"dxButton\",\n              options: {\n                icon: \"apply-filter\",\n                disabled: disabled,\n                onClick: onClickHandler,\n                hint: hintText,\n                text: hintText,\n                onInitialized: onInitialized\n              },\n              showText: \"inMenu\",\n              name: \"applyFilterButton\",\n              location: \"after\",\n              locateInMenu: \"auto\",\n              sortIndex: 10\n            };\n            filterItem.push(toolbarItem);\n          }\n\n          return filterItem;\n        },\n        _isShowApplyFilterButton: function _isShowApplyFilterButton() {\n          var filterRowOptions = this.option(\"filterRow\");\n          return filterRowOptions && filterRowOptions.visible && \"onClick\" === filterRowOptions.applyFilter;\n        },\n        init: function init() {\n          this.callBase();\n          this._dataController = this.getController(\"data\");\n          this._applyFilterViewController = this.getController(\"applyFilter\");\n        },\n        enableApplyButton: function enableApplyButton(value) {\n          this.setToolbarItemDisabled(\"applyFilterButton\", !value);\n        },\n        isVisible: function isVisible() {\n          return this.callBase() || this._isShowApplyFilterButton();\n        },\n        optionChanged: function optionChanged(args) {\n          if (\"filterRow\" === args.name) {\n            this._invalidate();\n\n            args.handled = true;\n          } else {\n            this.callBase(args);\n          }\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/grid_core/ui.grid_core.filter_row.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_type","_extend","_utils","_iterator","_iterator2","_uiGrid_core","_uiGrid_core2","_uiGrid_core3","_uiGrid_core4","_message","_message2","_editor","_editor2","_overlay","_overlay2","_menu","_menu2","_accessibility","obj","__esModule","OPERATION_ICONS","notcontains","contains","startswith","endswith","between","OPERATION_DESCRIPTORS","FILTERING_TIMEOUT","CORRECT_FILTER_RANGE_OVERLAY_WIDTH","FILTER_ROW_CLASS","FILTER_RANGE_OVERLAY_CLASS","FILTER_RANGE_START_CLASS","FILTER_RANGE_END_CLASS","MENU_CLASS","EDITOR_WITH_MENU_CLASS","EDITOR_CONTAINER_CLASS","EDITOR_CELL_CLASS","FILTER_MENU","APPLY_BUTTON_CLASS","HIGHLIGHT_OUTLINE_CLASS","FOCUSED_CLASS","CELL_FOCUS_DISABLED_CLASS","FILTER_RANGE_CONTENT_CLASS","FILTER_MODIFIED_CLASS","EDITORS_INPUT_SELECTOR","BETWEEN_OPERATION_DATA_TYPES","isOnClickApplyFilterMode","that","option","ColumnHeadersViewFilterRowExtender","getEditorInstance","$editorContainer","$editor","children","componentNames","data","editor","length","default","getRangeTextByFilterValue","column","result","rangeEnd","filterValue","getColumnFilterValue","formatOptions","getFormatOptionsByColumn","Array","isArray","formatValue","isDefined","bufferedFilterValue","getColumnSelectedFilterOperation","bufferedSelectedFilterOperation","selectedFilterOperation","isValidFilterValue","indexOf","dataType","getFilterValue","columnIndex","_columnsController","columnOption","isFilterRange","closest","addWidgetPrefix","isRangeStart","hasClass","normalizeFilterValue","columnFilterValue","updateFilterValue","options","value","container","index","_applyFilterViewController","setHighLight","notFireEvent","_updateEditorValue","_columnOptionChanged","e","optionNames","overlayInstance","visibleIndex","$cell","$editorRangeElements","$menu","checkChanges","getVisibleIndex","_getCellElement","element","find","first","$content","last","_updateFilterRangeContent","_updateFilterOperationChooser","_renderFilterRangeContent","_renderEditor","_getEditorOptions","_hideFilterRange","callBase","_renderCore","_filterRangeOverlayInstance","apply","arguments","_resizeCore","repaint","isFilterRowVisible","_isElementVisible","isVisible","init","getController","_initFilterRangeOverlay","sharedData","$overlay","addClass","appendTo","_createComponent","height","shading","showTitle","focusStateEnabled","closeOnTargetScroll","closeOnOutsideClick","animation","position","my","at","of","offset","contentTemplate","contentElement","editorOptions","on","$prevElement","not","target","normalizeKeyName","shiftKey","preventDefault","prev","trigger","next","getWidgetContainerClass","onShown","component","onHidden","parent","updateDimensions","_updateFilterRangeOverlay","_showFilterRange","hide","width","outerWidth","show","getFilterRangeOverlayInstance","_createRow","row","_this","$row","rowType","event","selectView","_getRows","push","_renderFilterCell","cell","$container","setAria","headerId","format","alignment","css","filterOperations","_renderFilterOperationChooser","_renderCellContent","command","html","allowFiltering","renderTemplate","bind","accessibilityOptions","inputAttr","_getFilterInputAccessibilityAttributes","extend","parentType","showAllText","updateValueTimeout","setValue","placeholder","columnAriaLabel","empty","createEditor","$filterRangeContent","attr","text","isCellWasFocused","restoreFocus","menu","getInstance","_focusEditor","integrationOptions","activeStateEnabled","selectionMode","cssClass","showFirstSubmenuMode","hideSubmenuOnMouseLeave","items","disabled","icon","selectable","_getFilterOperationMenuItems","onItemClick","properties","itemData","name","columnSelectedFilterOperation","notFocusEditor","isOnClickMode","defaultSelectedFilterOperation","NAME","reset","onSubmenuShown","_isEditorFocused","loseFocus","onSubmenuHiding","onContentReady","_hideSubmenu","_visibleSubmenu","rtlEnabled","parents","focus","prependTo","filterRowOptions","operationDescriptions","availableFilterOperations","filter","map","descriptionName","selected","defaultFilterOperation","resetOperationText","optionChanged","args","_invalidate","handled","DataControllerFilterRowExtender","skipCalculateColumnFilters","_calculateAdditionalFilter","filters","columns","getVisibleColumns","each","calculateFilterExpression","createFilterExpression","combineFilters","exports","ApplyFilterViewController","ViewController","inherit","_getHeaderPanel","_headerPanel","getView","$element","toggleClass","enableApplyButton","applyFilter","columnsController","getColumns","beginUpdate","i","endUpdate","removeHighLights","columnHeadersViewElement","removeClass","module","defaultOptions","filterRow","visible","showOperationChooser","applyFilterText","equal","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","startsWith","notContains","endsWith","isBlank","isNotBlank","betweenStartText","betweenEndText","controllers","extenders","columnsResizer","_startResizing","cellIndex","isResizing","_columnHeadersView","_targetPoint","_endResizing","views","columnHeadersView","headerPanel","_getToolbarItems","filterItem","_prepareFilterItem","concat","_isShowApplyFilterButton","hintText","onInitialized","_getToolbarButtonClass","onClickHandler","toolbarItem","widget","onClick","hint","showText","location","locateInMenu","sortIndex","_dataController","setToolbarItemDisabled"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.filter_row.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _utils = require(\"../../events/utils\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _iterator2 = _interopRequireDefault(_iterator);\r\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _uiGrid_core3 = require(\"./ui.grid_core.utils\");\r\nvar _uiGrid_core4 = _interopRequireDefault(_uiGrid_core3);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _editor = require(\"../editor/editor\");\r\nvar _editor2 = _interopRequireDefault(_editor);\r\nvar _overlay = require(\"../overlay\");\r\nvar _overlay2 = _interopRequireDefault(_overlay);\r\nvar _menu = require(\"../menu\");\r\nvar _menu2 = _interopRequireDefault(_menu);\r\nvar _accessibility = require(\"../shared/accessibility\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar OPERATION_ICONS = {\r\n    \"=\": \"filter-operation-equals\",\r\n    \"<>\": \"filter-operation-not-equals\",\r\n    \"<\": \"filter-operation-less\",\r\n    \"<=\": \"filter-operation-less-equal\",\r\n    \">\": \"filter-operation-greater\",\r\n    \">=\": \"filter-operation-greater-equal\",\r\n    \"default\": \"filter-operation-default\",\r\n    notcontains: \"filter-operation-not-contains\",\r\n    contains: \"filter-operation-contains\",\r\n    startswith: \"filter-operation-starts-with\",\r\n    endswith: \"filter-operation-ends-with\",\r\n    between: \"filter-operation-between\"\r\n};\r\nvar OPERATION_DESCRIPTORS = {\r\n    \"=\": \"equal\",\r\n    \"<>\": \"notEqual\",\r\n    \"<\": \"lessThan\",\r\n    \"<=\": \"lessThanOrEqual\",\r\n    \">\": \"greaterThan\",\r\n    \">=\": \"greaterThanOrEqual\",\r\n    startswith: \"startsWith\",\r\n    contains: \"contains\",\r\n    notcontains: \"notContains\",\r\n    endswith: \"endsWith\",\r\n    between: \"between\"\r\n};\r\nvar FILTERING_TIMEOUT = 700;\r\nvar CORRECT_FILTER_RANGE_OVERLAY_WIDTH = 1;\r\nvar FILTER_ROW_CLASS = \"filter-row\";\r\nvar FILTER_RANGE_OVERLAY_CLASS = \"filter-range-overlay\";\r\nvar FILTER_RANGE_START_CLASS = \"filter-range-start\";\r\nvar FILTER_RANGE_END_CLASS = \"filter-range-end\";\r\nvar MENU_CLASS = \"dx-menu\";\r\nvar EDITOR_WITH_MENU_CLASS = \"dx-editor-with-menu\";\r\nvar EDITOR_CONTAINER_CLASS = \"dx-editor-container\";\r\nvar EDITOR_CELL_CLASS = \"dx-editor-cell\";\r\nvar FILTER_MENU = \"dx-filter-menu\";\r\nvar APPLY_BUTTON_CLASS = \"dx-apply-button\";\r\nvar HIGHLIGHT_OUTLINE_CLASS = \"dx-highlight-outline\";\r\nvar FOCUSED_CLASS = \"dx-focused\";\r\nvar CELL_FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\r\nvar FILTER_RANGE_CONTENT_CLASS = \"dx-filter-range-content\";\r\nvar FILTER_MODIFIED_CLASS = \"dx-filter-modified\";\r\nvar EDITORS_INPUT_SELECTOR = \"input:not([type='hidden'])\";\r\nvar BETWEEN_OPERATION_DATA_TYPES = [\"date\", \"datetime\", \"number\"];\r\n\r\nfunction isOnClickApplyFilterMode(that) {\r\n    return \"onClick\" === that.option(\"filterRow.applyFilter\")\r\n}\r\nvar ColumnHeadersViewFilterRowExtender = function() {\r\n    var getEditorInstance = function($editorContainer) {\r\n        var $editor = $editorContainer && $editorContainer.children();\r\n        var componentNames = $editor && $editor.data(\"dxComponents\");\r\n        var editor = componentNames && componentNames.length && $editor.data(componentNames[0]);\r\n        if (editor instanceof _editor2.default) {\r\n            return editor\r\n        }\r\n    };\r\n    var getRangeTextByFilterValue = function(that, column) {\r\n        var result = \"\";\r\n        var rangeEnd = \"\";\r\n        var filterValue = getColumnFilterValue(that, column);\r\n        var formatOptions = _uiGrid_core4.default.getFormatOptionsByColumn(column, \"filterRow\");\r\n        if (Array.isArray(filterValue)) {\r\n            result = _uiGrid_core4.default.formatValue(filterValue[0], formatOptions);\r\n            rangeEnd = _uiGrid_core4.default.formatValue(filterValue[1], formatOptions);\r\n            if (\"\" !== rangeEnd) {\r\n                result += \" - \" + rangeEnd\r\n            }\r\n        } else {\r\n            if ((0, _type.isDefined)(filterValue)) {\r\n                result = _uiGrid_core4.default.formatValue(filterValue, formatOptions)\r\n            }\r\n        }\r\n        return result\r\n    };\r\n    var getColumnFilterValue = function(that, column) {\r\n        if (column) {\r\n            return isOnClickApplyFilterMode(that) && void 0 !== column.bufferedFilterValue ? column.bufferedFilterValue : column.filterValue\r\n        }\r\n    };\r\n    var getColumnSelectedFilterOperation = function(that, column) {\r\n        if (column) {\r\n            return isOnClickApplyFilterMode(that) && void 0 !== column.bufferedSelectedFilterOperation ? column.bufferedSelectedFilterOperation : column.selectedFilterOperation\r\n        }\r\n    };\r\n    var isValidFilterValue = function(filterValue, column) {\r\n        if (column && BETWEEN_OPERATION_DATA_TYPES.indexOf(column.dataType) >= 0 && Array.isArray(filterValue)) {\r\n            return false\r\n        }\r\n        return void 0 !== filterValue\r\n    };\r\n    var getFilterValue = function(that, columnIndex, $editorContainer) {\r\n        var column = that._columnsController.columnOption(columnIndex);\r\n        var filterValue = getColumnFilterValue(that, column);\r\n        var isFilterRange = $editorContainer.closest(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).length;\r\n        var isRangeStart = $editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS));\r\n        if (filterValue && Array.isArray(filterValue) && \"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n            if (isRangeStart) {\r\n                return filterValue[0]\r\n            } else {\r\n                return filterValue[1]\r\n            }\r\n        }\r\n        return !isFilterRange && isValidFilterValue(filterValue, column) ? filterValue : null\r\n    };\r\n    var normalizeFilterValue = function(that, filterValue, column, $editorContainer) {\r\n        if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n            var columnFilterValue = getColumnFilterValue(that, column);\r\n            if ($editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))) {\r\n                return [filterValue, Array.isArray(columnFilterValue) ? columnFilterValue[1] : void 0]\r\n            } else {\r\n                return [Array.isArray(columnFilterValue) ? columnFilterValue[0] : columnFilterValue, filterValue]\r\n            }\r\n        }\r\n        return filterValue\r\n    };\r\n    var updateFilterValue = function(that, options) {\r\n        var value = \"\" === options.value ? null : options.value;\r\n        var $editorContainer = options.container;\r\n        var column = that._columnsController.columnOption(options.column.index);\r\n        var filterValue = getFilterValue(that, column.index, $editorContainer);\r\n        if (!(0, _type.isDefined)(filterValue) && !(0, _type.isDefined)(value)) {\r\n            return\r\n        }\r\n        that._applyFilterViewController.setHighLight($editorContainer, filterValue !== value);\r\n        that._columnsController.columnOption(column.index, isOnClickApplyFilterMode(that) ? \"bufferedFilterValue\" : \"filterValue\", normalizeFilterValue(that, value, column, $editorContainer), options.notFireEvent)\r\n    };\r\n    return {\r\n        _updateEditorValue: function(column, $editorContainer) {\r\n            var that = this;\r\n            var editor = getEditorInstance($editorContainer);\r\n            editor && editor.option(\"value\", getFilterValue(that, column.index, $editorContainer))\r\n        },\r\n        _columnOptionChanged: function(e) {\r\n            var that = this;\r\n            var optionNames = e.optionNames;\r\n            var overlayInstance;\r\n            var visibleIndex;\r\n            var column;\r\n            var $cell;\r\n            var $editorContainer;\r\n            var $editorRangeElements;\r\n            var $menu;\r\n            if (_uiGrid_core4.default.checkChanges(optionNames, [\"filterValue\", \"bufferedFilterValue\", \"selectedFilterOperation\", \"bufferedSelectedFilterOperation\"]) && void 0 !== e.columnIndex) {\r\n                visibleIndex = that._columnsController.getVisibleIndex(e.columnIndex);\r\n                column = that._columnsController.columnOption(e.columnIndex);\r\n                $cell = that._getCellElement(that.element().find(\".\" + that.addWidgetPrefix(FILTER_ROW_CLASS)).index(), visibleIndex) || (0, _renderer2.default)();\r\n                $editorContainer = $cell.find(\".\" + EDITOR_CONTAINER_CLASS).first();\r\n                if (optionNames.filterValue || optionNames.bufferedFilterValue) {\r\n                    that._updateEditorValue(column, $editorContainer);\r\n                    overlayInstance = $cell.find(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).data(\"dxOverlay\");\r\n                    if (overlayInstance) {\r\n                        $editorRangeElements = overlayInstance.$content().find(\".\" + EDITOR_CONTAINER_CLASS);\r\n                        that._updateEditorValue(column, $editorRangeElements.first());\r\n                        that._updateEditorValue(column, $editorRangeElements.last())\r\n                    }\r\n                    if (!overlayInstance || !overlayInstance.option(\"visible\")) {\r\n                        that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column))\r\n                    }\r\n                }\r\n                if (optionNames.selectedFilterOperation || optionNames.bufferedSelectedFilterOperation) {\r\n                    if (visibleIndex >= 0 && column) {\r\n                        $menu = $cell.find(\".\" + MENU_CLASS);\r\n                        if ($menu.length) {\r\n                            that._updateFilterOperationChooser($menu, column, $editorContainer);\r\n                            if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n                                that._renderFilterRangeContent($cell, column)\r\n                            } else {\r\n                                if ($editorContainer.find(\".\" + FILTER_RANGE_CONTENT_CLASS).length) {\r\n                                    that._renderEditor($editorContainer, that._getEditorOptions($editorContainer, column));\r\n                                    that._hideFilterRange()\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return\r\n            }\r\n            that.callBase(e)\r\n        },\r\n        _renderCore: function() {\r\n            this._filterRangeOverlayInstance = null;\r\n            this.callBase.apply(this, arguments)\r\n        },\r\n        _resizeCore: function() {\r\n            this.callBase.apply(this, arguments);\r\n            this._filterRangeOverlayInstance && this._filterRangeOverlayInstance.repaint()\r\n        },\r\n        isFilterRowVisible: function() {\r\n            return this._isElementVisible(this.option(\"filterRow\"))\r\n        },\r\n        isVisible: function() {\r\n            return this.callBase() || this.isFilterRowVisible()\r\n        },\r\n        init: function() {\r\n            this.callBase();\r\n            this._applyFilterViewController = this.getController(\"applyFilter\")\r\n        },\r\n        _initFilterRangeOverlay: function($cell, column) {\r\n            var that = this;\r\n            var sharedData = {};\r\n            var $editorContainer = $cell.find(\".dx-editor-container\");\r\n            var $overlay = (0, _renderer2.default)(\"<div>\").addClass(that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS)).appendTo($cell);\r\n            return that._createComponent($overlay, _overlay2.default, {\r\n                height: \"auto\",\r\n                shading: false,\r\n                showTitle: false,\r\n                focusStateEnabled: false,\r\n                closeOnTargetScroll: false,\r\n                closeOnOutsideClick: true,\r\n                animation: false,\r\n                position: {\r\n                    my: \"top\",\r\n                    at: \"top\",\r\n                    of: $editorContainer.length && $editorContainer || $cell,\r\n                    offset: \"0 -1\"\r\n                },\r\n                contentTemplate: function(contentElement) {\r\n                    var editorOptions;\r\n                    var $editor = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS + \" \" + that.addWidgetPrefix(FILTER_RANGE_START_CLASS)).appendTo(contentElement);\r\n                    column = that._columnsController.columnOption(column.index);\r\n                    editorOptions = that._getEditorOptions($editor, column);\r\n                    editorOptions.sharedData = sharedData;\r\n                    that._renderEditor($editor, editorOptions);\r\n                    _events_engine2.default.on($editor.find(EDITORS_INPUT_SELECTOR), \"keydown\", function(e) {\r\n                        var $prevElement = $cell.find(\"[tabindex]\").not(e.target).first();\r\n                        if (\"tab\" === (0, _utils.normalizeKeyName)(e) && e.shiftKey) {\r\n                            e.preventDefault();\r\n                            that._hideFilterRange();\r\n                            if (!$prevElement.length) {\r\n                                $prevElement = $cell.prev().find(\"[tabindex]\").last()\r\n                            }\r\n                            _events_engine2.default.trigger($prevElement, \"focus\")\r\n                        }\r\n                    });\r\n                    $editor = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS + \" \" + that.addWidgetPrefix(FILTER_RANGE_END_CLASS)).appendTo(contentElement);\r\n                    editorOptions = that._getEditorOptions($editor, column);\r\n                    editorOptions.sharedData = sharedData;\r\n                    that._renderEditor($editor, editorOptions);\r\n                    _events_engine2.default.on($editor.find(EDITORS_INPUT_SELECTOR), \"keydown\", function(e) {\r\n                        if (\"tab\" === (0, _utils.normalizeKeyName)(e) && !e.shiftKey) {\r\n                            e.preventDefault();\r\n                            that._hideFilterRange();\r\n                            _events_engine2.default.trigger($cell.next().find(\"[tabindex]\").first(), \"focus\")\r\n                        }\r\n                    });\r\n                    return (0, _renderer2.default)(contentElement).addClass(that.getWidgetContainerClass())\r\n                },\r\n                onShown: function(e) {\r\n                    var $editor = e.component.$content().find(\".\" + EDITOR_CONTAINER_CLASS).first();\r\n                    _events_engine2.default.trigger($editor.find(EDITORS_INPUT_SELECTOR), \"focus\")\r\n                },\r\n                onHidden: function() {\r\n                    column = that._columnsController.columnOption(column.index);\r\n                    $cell.find(\".\" + MENU_CLASS).parent().addClass(EDITOR_WITH_MENU_CLASS);\r\n                    if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n                        that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column));\r\n                        that.component.updateDimensions()\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        _updateFilterRangeOverlay: function(options) {\r\n            var overlayInstance = this._filterRangeOverlayInstance;\r\n            overlayInstance && overlayInstance.option(options)\r\n        },\r\n        _showFilterRange: function($cell, column) {\r\n            var that = this;\r\n            var $overlay = $cell.children(\".\" + that.addWidgetPrefix(FILTER_RANGE_OVERLAY_CLASS));\r\n            var overlayInstance = $overlay.length && $overlay.data(\"dxOverlay\");\r\n            if (!overlayInstance && column) {\r\n                overlayInstance = that._initFilterRangeOverlay($cell, column)\r\n            }\r\n            if (!overlayInstance.option(\"visible\")) {\r\n                that._filterRangeOverlayInstance && that._filterRangeOverlayInstance.hide();\r\n                that._filterRangeOverlayInstance = overlayInstance;\r\n                that._updateFilterRangeOverlay({\r\n                    width: $cell.outerWidth(true) + CORRECT_FILTER_RANGE_OVERLAY_WIDTH\r\n                });\r\n                that._filterRangeOverlayInstance && that._filterRangeOverlayInstance.show()\r\n            }\r\n        },\r\n        _hideFilterRange: function() {\r\n            var overlayInstance = this._filterRangeOverlayInstance;\r\n            overlayInstance && overlayInstance.hide()\r\n        },\r\n        getFilterRangeOverlayInstance: function() {\r\n            return this._filterRangeOverlayInstance\r\n        },\r\n        _createRow: function(row) {\r\n            var _this = this;\r\n            var $row = this.callBase(row);\r\n            if (\"filter\" === row.rowType) {\r\n                $row.addClass(this.addWidgetPrefix(FILTER_ROW_CLASS));\r\n                if (!this.option(\"useLegacyKeyboardNavigation\")) {\r\n                    _events_engine2.default.on($row, \"keydown\", function(event) {\r\n                        return (0, _accessibility.selectView)(\"filterRow\", _this, event)\r\n                    })\r\n                }\r\n            }\r\n            return $row\r\n        },\r\n        _getRows: function() {\r\n            var result = this.callBase();\r\n            if (this.isFilterRowVisible()) {\r\n                result.push({\r\n                    rowType: \"filter\"\r\n                })\r\n            }\r\n            return result\r\n        },\r\n        _renderFilterCell: function(cell, options) {\r\n            var that = this;\r\n            var column = options.column;\r\n            var $cell = (0, _renderer2.default)(cell);\r\n            var $container;\r\n            var $editorContainer;\r\n            if (that.component.option(\"showColumnHeaders\")) {\r\n                that.setAria(\"describedby\", column.headerId, $cell)\r\n            }\r\n            that.setAria(\"label\", _message2.default.format(\"dxDataGrid-ariaFilterCell\"), $cell);\r\n            $cell.addClass(EDITOR_CELL_CLASS);\r\n            $container = (0, _renderer2.default)(\"<div>\").appendTo($cell);\r\n            $editorContainer = (0, _renderer2.default)(\"<div>\").addClass(EDITOR_CONTAINER_CLASS).appendTo($container);\r\n            if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n                that._renderFilterRangeContent($cell, column)\r\n            } else {\r\n                var editorOptions = that._getEditorOptions($editorContainer, column);\r\n                that._renderEditor($editorContainer, editorOptions)\r\n            }\r\n            if (column.alignment) {\r\n                $cell.find(EDITORS_INPUT_SELECTOR).first().css(\"textAlign\", column.alignment)\r\n            }\r\n            if (column.filterOperations && column.filterOperations.length) {\r\n                that._renderFilterOperationChooser($container, column, $editorContainer)\r\n            }\r\n        },\r\n        _renderCellContent: function($cell, options) {\r\n            var that = this;\r\n            var column = options.column;\r\n            if (\"filter\" === options.rowType) {\r\n                if (column.command) {\r\n                    $cell.html(\"&nbsp;\")\r\n                } else {\r\n                    if (column.allowFiltering) {\r\n                        that.renderTemplate($cell, that._renderFilterCell.bind(that), options);\r\n                        return\r\n                    }\r\n                }\r\n            }\r\n            that.callBase($cell, options)\r\n        },\r\n        _getEditorOptions: function($editorContainer, column) {\r\n            var that = this;\r\n            var accessibilityOptions = {\r\n                editorOptions: {\r\n                    inputAttr: that._getFilterInputAccessibilityAttributes(column)\r\n                }\r\n            };\r\n            var result = (0, _extend.extend)(accessibilityOptions, column, {\r\n                value: getFilterValue(that, column.index, $editorContainer),\r\n                parentType: \"filterRow\",\r\n                showAllText: that.option(\"filterRow.showAllText\"),\r\n                updateValueTimeout: \"onClick\" === that.option(\"filterRow.applyFilter\") ? 0 : FILTERING_TIMEOUT,\r\n                width: null,\r\n                setValue: function(value, notFireEvent) {\r\n                    updateFilterValue(that, {\r\n                        column: column,\r\n                        value: value,\r\n                        container: $editorContainer,\r\n                        notFireEvent: notFireEvent\r\n                    })\r\n                }\r\n            });\r\n            if (\"between\" === getColumnSelectedFilterOperation(that, column)) {\r\n                if ($editorContainer.hasClass(that.addWidgetPrefix(FILTER_RANGE_START_CLASS))) {\r\n                    result.placeholder = that.option(\"filterRow.betweenStartText\")\r\n                } else {\r\n                    result.placeholder = that.option(\"filterRow.betweenEndText\")\r\n                }\r\n            }\r\n            return result\r\n        },\r\n        _getFilterInputAccessibilityAttributes: function(column) {\r\n            var columnAriaLabel = _message2.default.format(\"dxDataGrid-ariaFilterCell\");\r\n            if (this.component.option(\"showColumnHeaders\")) {\r\n                return {\r\n                    \"aria-label\": columnAriaLabel,\r\n                    \"aria-describedby\": column.headerId\r\n                }\r\n            }\r\n            return {\r\n                \"aria-label\": columnAriaLabel\r\n            }\r\n        },\r\n        _renderEditor: function($editorContainer, options) {\r\n            $editorContainer.empty();\r\n            return this.getController(\"editorFactory\").createEditor((0, _renderer2.default)(\"<div>\").appendTo($editorContainer), options)\r\n        },\r\n        _renderFilterRangeContent: function($cell, column) {\r\n            var that = this;\r\n            var $editorContainer = $cell.find(\".\" + EDITOR_CONTAINER_CLASS).first();\r\n            $editorContainer.empty();\r\n            var $filterRangeContent = (0, _renderer2.default)(\"<div>\").addClass(FILTER_RANGE_CONTENT_CLASS).attr(\"tabindex\", this.option(\"tabIndex\"));\r\n            _events_engine2.default.on($filterRangeContent, \"focusin\", function() {\r\n                that._showFilterRange($cell, column)\r\n            });\r\n            $filterRangeContent.appendTo($editorContainer);\r\n            that._updateFilterRangeContent($cell, getRangeTextByFilterValue(that, column))\r\n        },\r\n        _updateFilterRangeContent: function($cell, value) {\r\n            var $filterRangeContent = $cell.find(\".\" + FILTER_RANGE_CONTENT_CLASS);\r\n            if ($filterRangeContent.length) {\r\n                if (\"\" === value) {\r\n                    $filterRangeContent.html(\"&nbsp;\")\r\n                } else {\r\n                    $filterRangeContent.text(value)\r\n                }\r\n            }\r\n        },\r\n        _updateFilterOperationChooser: function($menu, column, $editorContainer) {\r\n            var that = this;\r\n            var isCellWasFocused;\r\n            var restoreFocus = function() {\r\n                var menu = _menu2.default.getInstance($menu);\r\n                menu && menu.option(\"focusedElement\", null);\r\n                isCellWasFocused && that._focusEditor($editorContainer)\r\n            };\r\n            that._createComponent($menu, _menu2.default, {\r\n                integrationOptions: {},\r\n                activeStateEnabled: false,\r\n                selectionMode: \"single\",\r\n                cssClass: that.getWidgetContainerClass() + \" \" + CELL_FOCUS_DISABLED_CLASS + \" \" + FILTER_MENU,\r\n                showFirstSubmenuMode: \"onHover\",\r\n                hideSubmenuOnMouseLeave: true,\r\n                items: [{\r\n                    disabled: column.filterOperations && column.filterOperations.length ? false : true,\r\n                    icon: OPERATION_ICONS[getColumnSelectedFilterOperation(that, column) || \"default\"],\r\n                    selectable: false,\r\n                    items: that._getFilterOperationMenuItems(column)\r\n                }],\r\n                onItemClick: function(properties) {\r\n                    var selectedFilterOperation = properties.itemData.name;\r\n                    var columnSelectedFilterOperation = getColumnSelectedFilterOperation(that, column);\r\n                    var notFocusEditor = false;\r\n                    var isOnClickMode = isOnClickApplyFilterMode(that);\r\n                    var options = {};\r\n                    if (properties.itemData.items || selectedFilterOperation && selectedFilterOperation === columnSelectedFilterOperation) {\r\n                        return\r\n                    }\r\n                    if (selectedFilterOperation) {\r\n                        options[isOnClickMode ? \"bufferedSelectedFilterOperation\" : \"selectedFilterOperation\"] = selectedFilterOperation;\r\n                        if (\"between\" === selectedFilterOperation || \"between\" === columnSelectedFilterOperation) {\r\n                            notFocusEditor = \"between\" === selectedFilterOperation;\r\n                            options[isOnClickMode ? \"bufferedFilterValue\" : \"filterValue\"] = null\r\n                        }\r\n                    } else {\r\n                        options[isOnClickMode ? \"bufferedFilterValue\" : \"filterValue\"] = null;\r\n                        options[isOnClickMode ? \"bufferedSelectedFilterOperation\" : \"selectedFilterOperation\"] = column.defaultSelectedFilterOperation || null\r\n                    }\r\n                    that._columnsController.columnOption(column.index, options);\r\n                    that._applyFilterViewController.setHighLight($editorContainer, true);\r\n                    if (!selectedFilterOperation) {\r\n                        var editor = getEditorInstance($editorContainer);\r\n                        if (editor && \"dxDateBox\" === editor.NAME && !editor.option(\"isValid\")) {\r\n                            editor.reset();\r\n                            editor.option(\"isValid\", true)\r\n                        }\r\n                    }\r\n                    if (!notFocusEditor) {\r\n                        that._focusEditor($editorContainer)\r\n                    } else {\r\n                        that._showFilterRange($editorContainer.closest(\".\" + EDITOR_CELL_CLASS), column)\r\n                    }\r\n                },\r\n                onSubmenuShown: function() {\r\n                    isCellWasFocused = that._isEditorFocused($editorContainer);\r\n                    that.getController(\"editorFactory\").loseFocus()\r\n                },\r\n                onSubmenuHiding: function() {\r\n                    _events_engine2.default.trigger($menu, \"blur\");\r\n                    restoreFocus()\r\n                },\r\n                onContentReady: function(e) {\r\n                    _events_engine2.default.on($menu, \"blur\", function() {\r\n                        var menu = e.component;\r\n                        menu._hideSubmenu(menu._visibleSubmenu);\r\n                        restoreFocus()\r\n                    })\r\n                },\r\n                rtlEnabled: that.option(\"rtlEnabled\")\r\n            })\r\n        },\r\n        _isEditorFocused: function($container) {\r\n            return $container.hasClass(FOCUSED_CLASS) || $container.parents(\".\" + FOCUSED_CLASS).length\r\n        },\r\n        _focusEditor: function($container) {\r\n            this.getController(\"editorFactory\").focus($container);\r\n            _events_engine2.default.trigger($container.find(EDITORS_INPUT_SELECTOR), \"focus\")\r\n        },\r\n        _renderFilterOperationChooser: function($container, column, $editorContainer) {\r\n            var that = this;\r\n            var $menu;\r\n            if (that.option(\"filterRow.showOperationChooser\")) {\r\n                $container.addClass(EDITOR_WITH_MENU_CLASS);\r\n                $menu = (0, _renderer2.default)(\"<div>\").prependTo($container);\r\n                that._updateFilterOperationChooser($menu, column, $editorContainer)\r\n            }\r\n        },\r\n        _getFilterOperationMenuItems: function(column) {\r\n            var that = this;\r\n            var result = [{}];\r\n            var filterRowOptions = that.option(\"filterRow\");\r\n            var operationDescriptions = filterRowOptions && filterRowOptions.operationDescriptions || {};\r\n            if (column.filterOperations && column.filterOperations.length) {\r\n                var availableFilterOperations = column.filterOperations.filter(function(value) {\r\n                    return (0, _type.isDefined)(OPERATION_DESCRIPTORS[value])\r\n                });\r\n                result = _iterator2.default.map(availableFilterOperations, function(value) {\r\n                    var descriptionName = OPERATION_DESCRIPTORS[value];\r\n                    return {\r\n                        name: value,\r\n                        selected: (getColumnSelectedFilterOperation(that, column) || column.defaultFilterOperation) === value,\r\n                        text: operationDescriptions[descriptionName],\r\n                        icon: OPERATION_ICONS[value]\r\n                    }\r\n                });\r\n                result.push({\r\n                    name: null,\r\n                    text: filterRowOptions && filterRowOptions.resetOperationText,\r\n                    icon: OPERATION_ICONS.default\r\n                })\r\n            }\r\n            return result\r\n        },\r\n        optionChanged: function(args) {\r\n            var that = this;\r\n            switch (args.name) {\r\n                case \"filterRow\":\r\n                case \"showColumnLines\":\r\n                    this._invalidate(true, true);\r\n                    args.handled = true;\r\n                    break;\r\n                default:\r\n                    that.callBase(args)\r\n            }\r\n        }\r\n    }\r\n}();\r\nvar DataControllerFilterRowExtender = {\r\n    skipCalculateColumnFilters: function() {\r\n        return false\r\n    },\r\n    _calculateAdditionalFilter: function() {\r\n        if (this.skipCalculateColumnFilters()) {\r\n            return this.callBase()\r\n        }\r\n        var filters = [this.callBase()];\r\n        var columns = this._columnsController.getVisibleColumns(null, true);\r\n        _iterator2.default.each(columns, function() {\r\n            var filter;\r\n            if (this.allowFiltering && this.calculateFilterExpression && (0, _type.isDefined)(this.filterValue)) {\r\n                filter = this.createFilterExpression(this.filterValue, this.selectedFilterOperation || this.defaultFilterOperation, \"filterRow\");\r\n                filters.push(filter)\r\n            }\r\n        });\r\n        return _uiGrid_core4.default.combineFilters(filters)\r\n    }\r\n};\r\nexports.ApplyFilterViewController = _uiGrid_core2.default.ViewController.inherit({\r\n    _getHeaderPanel: function() {\r\n        if (!this._headerPanel) {\r\n            this._headerPanel = this.getView(\"headerPanel\")\r\n        }\r\n        return this._headerPanel\r\n    },\r\n    setHighLight: function($element, value) {\r\n        if (isOnClickApplyFilterMode(this)) {\r\n            $element && $element.toggleClass(HIGHLIGHT_OUTLINE_CLASS, value) && $element.closest(\".\" + EDITOR_CELL_CLASS).toggleClass(FILTER_MODIFIED_CLASS, value);\r\n            this._getHeaderPanel().enableApplyButton(value)\r\n        }\r\n    },\r\n    applyFilter: function() {\r\n        var columnsController = this.getController(\"columns\");\r\n        var columns = columnsController.getColumns();\r\n        columnsController.beginUpdate();\r\n        for (var i = 0; i < columns.length; i++) {\r\n            var column = columns[i];\r\n            if (void 0 !== column.bufferedFilterValue) {\r\n                columnsController.columnOption(i, \"filterValue\", column.bufferedFilterValue);\r\n                column.bufferedFilterValue = void 0\r\n            }\r\n            if (void 0 !== column.bufferedSelectedFilterOperation) {\r\n                columnsController.columnOption(i, \"selectedFilterOperation\", column.bufferedSelectedFilterOperation);\r\n                column.bufferedSelectedFilterOperation = void 0\r\n            }\r\n        }\r\n        columnsController.endUpdate();\r\n        this.removeHighLights()\r\n    },\r\n    removeHighLights: function() {\r\n        if (isOnClickApplyFilterMode(this)) {\r\n            var columnHeadersViewElement = this.getView(\"columnHeadersView\").element();\r\n            columnHeadersViewElement.find(\".\" + this.addWidgetPrefix(FILTER_ROW_CLASS) + \" .\" + HIGHLIGHT_OUTLINE_CLASS).removeClass(HIGHLIGHT_OUTLINE_CLASS);\r\n            columnHeadersViewElement.find(\".\" + this.addWidgetPrefix(FILTER_ROW_CLASS) + \" .\" + FILTER_MODIFIED_CLASS).removeClass(FILTER_MODIFIED_CLASS);\r\n            this._getHeaderPanel().enableApplyButton(false)\r\n        }\r\n    }\r\n});\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            filterRow: {\r\n                visible: false,\r\n                showOperationChooser: true,\r\n                showAllText: _message2.default.format(\"dxDataGrid-filterRowShowAllText\"),\r\n                resetOperationText: _message2.default.format(\"dxDataGrid-filterRowResetOperationText\"),\r\n                applyFilter: \"auto\",\r\n                applyFilterText: _message2.default.format(\"dxDataGrid-applyFilterText\"),\r\n                operationDescriptions: {\r\n                    equal: _message2.default.format(\"dxDataGrid-filterRowOperationEquals\"),\r\n                    notEqual: _message2.default.format(\"dxDataGrid-filterRowOperationNotEquals\"),\r\n                    lessThan: _message2.default.format(\"dxDataGrid-filterRowOperationLess\"),\r\n                    lessThanOrEqual: _message2.default.format(\"dxDataGrid-filterRowOperationLessOrEquals\"),\r\n                    greaterThan: _message2.default.format(\"dxDataGrid-filterRowOperationGreater\"),\r\n                    greaterThanOrEqual: _message2.default.format(\"dxDataGrid-filterRowOperationGreaterOrEquals\"),\r\n                    startsWith: _message2.default.format(\"dxDataGrid-filterRowOperationStartsWith\"),\r\n                    contains: _message2.default.format(\"dxDataGrid-filterRowOperationContains\"),\r\n                    notContains: _message2.default.format(\"dxDataGrid-filterRowOperationNotContains\"),\r\n                    endsWith: _message2.default.format(\"dxDataGrid-filterRowOperationEndsWith\"),\r\n                    between: _message2.default.format(\"dxDataGrid-filterRowOperationBetween\"),\r\n                    isBlank: _message2.default.format(\"dxFilterBuilder-filterOperationIsBlank\"),\r\n                    isNotBlank: _message2.default.format(\"dxFilterBuilder-filterOperationIsNotBlank\")\r\n                },\r\n                betweenStartText: _message2.default.format(\"dxDataGrid-filterRowOperationBetweenStartText\"),\r\n                betweenEndText: _message2.default.format(\"dxDataGrid-filterRowOperationBetweenEndText\")\r\n            }\r\n        }\r\n    },\r\n    controllers: {\r\n        applyFilter: exports.ApplyFilterViewController\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            data: DataControllerFilterRowExtender,\r\n            columnsResizer: {\r\n                _startResizing: function() {\r\n                    var that = this;\r\n                    var cellIndex;\r\n                    var overlayInstance;\r\n                    that.callBase.apply(that, arguments);\r\n                    if (that.isResizing()) {\r\n                        overlayInstance = that._columnHeadersView.getFilterRangeOverlayInstance();\r\n                        if (overlayInstance) {\r\n                            cellIndex = overlayInstance.$element().closest(\"td\").index();\r\n                            if (cellIndex === that._targetPoint.columnIndex || cellIndex === that._targetPoint.columnIndex + 1) {\r\n                                overlayInstance.$content().hide()\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                _endResizing: function() {\r\n                    var that = this;\r\n                    var $cell;\r\n                    var overlayInstance;\r\n                    if (that.isResizing()) {\r\n                        overlayInstance = that._columnHeadersView.getFilterRangeOverlayInstance();\r\n                        if (overlayInstance) {\r\n                            $cell = overlayInstance.$element().closest(\"td\");\r\n                            that._columnHeadersView._updateFilterRangeOverlay({\r\n                                width: $cell.outerWidth(true) + CORRECT_FILTER_RANGE_OVERLAY_WIDTH\r\n                            });\r\n                            overlayInstance.$content().show()\r\n                        }\r\n                    }\r\n                    that.callBase.apply(that, arguments)\r\n                }\r\n            }\r\n        },\r\n        views: {\r\n            columnHeadersView: ColumnHeadersViewFilterRowExtender,\r\n            headerPanel: {\r\n                _getToolbarItems: function() {\r\n                    var items = this.callBase();\r\n                    var filterItem = this._prepareFilterItem(items);\r\n                    return filterItem.concat(items)\r\n                },\r\n                _prepareFilterItem: function() {\r\n                    var that = this;\r\n                    var filterItem = [];\r\n                    if (that._isShowApplyFilterButton()) {\r\n                        var hintText = that.option(\"filterRow.applyFilterText\");\r\n                        var columns = that._columnsController.getColumns();\r\n                        var disabled = !columns.filter(function(column) {\r\n                            return void 0 !== column.bufferedFilterValue\r\n                        }).length;\r\n                        var onInitialized = function(e) {\r\n                            (0, _renderer2.default)(e.element).addClass(that._getToolbarButtonClass(APPLY_BUTTON_CLASS))\r\n                        };\r\n                        var onClickHandler = function() {\r\n                            that._applyFilterViewController.applyFilter()\r\n                        };\r\n                        var toolbarItem = {\r\n                            widget: \"dxButton\",\r\n                            options: {\r\n                                icon: \"apply-filter\",\r\n                                disabled: disabled,\r\n                                onClick: onClickHandler,\r\n                                hint: hintText,\r\n                                text: hintText,\r\n                                onInitialized: onInitialized\r\n                            },\r\n                            showText: \"inMenu\",\r\n                            name: \"applyFilterButton\",\r\n                            location: \"after\",\r\n                            locateInMenu: \"auto\",\r\n                            sortIndex: 10\r\n                        };\r\n                        filterItem.push(toolbarItem)\r\n                    }\r\n                    return filterItem\r\n                },\r\n                _isShowApplyFilterButton: function() {\r\n                    var filterRowOptions = this.option(\"filterRow\");\r\n                    return filterRowOptions && filterRowOptions.visible && \"onClick\" === filterRowOptions.applyFilter\r\n                },\r\n                init: function() {\r\n                    this.callBase();\r\n                    this._dataController = this.getController(\"data\");\r\n                    this._applyFilterViewController = this.getController(\"applyFilter\")\r\n                },\r\n                enableApplyButton: function(value) {\r\n                    this.setToolbarItemDisabled(\"applyFilterButton\", !value)\r\n                },\r\n                isVisible: function() {\r\n                    return this.callBase() || this._isShowApplyFilterButton()\r\n                },\r\n                optionChanged: function(args) {\r\n                    if (\"filterRow\" === args.name) {\r\n                        this._invalidate();\r\n                        args.handled = true\r\n                    } else {\r\n                        this.callBase(args)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}