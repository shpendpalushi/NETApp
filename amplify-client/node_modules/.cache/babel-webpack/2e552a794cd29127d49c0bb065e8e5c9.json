{"ast":null,"code":"/**\r\n * DevExtreme (ui/html_editor/modules/resizing.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _renderer = require(\"../../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _click = require(\"../../../events/click\");\n\nvar _utils = require(\"../../../events/utils\");\n\nvar _translator = require(\"../../../animation/translator\");\n\nvar _devices = require(\"../../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _resizable = require(\"../../resizable\");\n\nvar _resizable2 = _interopRequireDefault(_resizable);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar DX_RESIZE_FRAME_CLASS = \"dx-resize-frame\";\nvar DX_TOUCH_DEVICE_CLASS = \"dx-touch-device\";\nvar MODULE_NAMESPACE = \"dxHtmlResizingModule\";\nvar KEYDOWN_EVENT = (0, _utils.addNamespace)(\"keydown\", MODULE_NAMESPACE);\nvar SCROLL_EVENT = (0, _utils.addNamespace)(\"scroll\", MODULE_NAMESPACE);\nvar FRAME_PADDING = 1;\n\nvar ResizingModule = function () {\n  function ResizingModule(quill, options) {\n    _classCallCheck(this, ResizingModule);\n\n    this.quill = quill;\n    this.editorInstance = options.editorInstance;\n    this.allowedTargets = options.allowedTargets || [\"image\"];\n    this.enabled = !!options.enabled;\n\n    if (this.enabled) {\n      this._attachEvents();\n\n      this._createResizeFrame();\n    }\n  }\n\n  _createClass(ResizingModule, [{\n    key: \"_attachEvents\",\n    value: function value() {\n      _events_engine2.default.on(this.quill.root, (0, _utils.addNamespace)(_click.name, MODULE_NAMESPACE), this._clickHandler.bind(this));\n\n      _events_engine2.default.on(this.quill.root, SCROLL_EVENT, this._scrollHandler.bind(this));\n    }\n  }, {\n    key: \"_detachEvents\",\n    value: function value() {\n      _events_engine2.default.off(this.quill.root, MODULE_NAMESPACE);\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function value(e) {\n      if (this._isAllowedTarget(e.target)) {\n        if (this._$target === e.target) {\n          return;\n        }\n\n        this._$target = e.target;\n        this.updateFramePosition();\n        this.showFrame();\n      } else {\n        if (this._$target) {\n          this.hideFrame();\n        }\n      }\n    }\n  }, {\n    key: \"_scrollHandler\",\n    value: function value(e) {\n      if (this._$target) {\n        this.updateFramePosition();\n      }\n    }\n  }, {\n    key: \"_isAllowedTarget\",\n    value: function value(targetElement) {\n      return this._isImage(targetElement);\n    }\n  }, {\n    key: \"_isImage\",\n    value: function value(targetElement) {\n      return this.allowedTargets.indexOf(\"image\") !== -1 && \"IMG\" === targetElement.tagName.toUpperCase();\n    }\n  }, {\n    key: \"showFrame\",\n    value: function value() {\n      this._$resizeFrame.show();\n\n      _events_engine2.default.on(this.quill.root, KEYDOWN_EVENT, this.hideFrame.bind(this));\n    }\n  }, {\n    key: \"hideFrame\",\n    value: function value() {\n      this._$target = null;\n\n      this._$resizeFrame.hide();\n\n      _events_engine2.default.off(this.quill.root, KEYDOWN_EVENT);\n    }\n  }, {\n    key: \"updateFramePosition\",\n    value: function value() {\n      var _this$_$target = this._$target,\n          height = _this$_$target.height,\n          width = _this$_$target.width,\n          offsetTop = _this$_$target.offsetTop,\n          offsetLeft = _this$_$target.offsetLeft;\n      var _this$quill$root = this.quill.root,\n          scrollTop = _this$quill$root.scrollTop,\n          scrollLeft = _this$quill$root.scrollLeft;\n\n      var borderWidth = this._getBorderWidth();\n\n      this._$resizeFrame.css({\n        height: height,\n        width: width,\n        padding: FRAME_PADDING,\n        top: offsetTop - borderWidth - scrollTop - FRAME_PADDING,\n        left: offsetLeft - borderWidth - scrollLeft - FRAME_PADDING\n      });\n\n      (0, _translator.move)(this._$resizeFrame, {\n        left: 0,\n        top: 0\n      });\n    }\n  }, {\n    key: \"_getBorderWidth\",\n    value: function value() {\n      return parseInt(this._$resizeFrame.css(\"borderTopWidth\"));\n    }\n  }, {\n    key: \"_createResizeFrame\",\n    value: function value() {\n      var _this = this;\n\n      if (this._$resizeFrame) {\n        return;\n      }\n\n      var _devices$current = _devices2.default.current(),\n          deviceType = _devices$current.deviceType;\n\n      this._$resizeFrame = (0, _renderer2.default)(\"<div>\").addClass(DX_RESIZE_FRAME_CLASS).toggleClass(DX_TOUCH_DEVICE_CLASS, \"desktop\" !== deviceType).appendTo(this.editorInstance._getQuillContainer()).hide();\n\n      this.editorInstance._createComponent(this._$resizeFrame, _resizable2.default, {\n        onResize: function onResize(e) {\n          if (!_this._$target) {\n            return;\n          }\n\n          var correction = 2 * (FRAME_PADDING + _this._getBorderWidth());\n\n          (0, _renderer2.default)(_this._$target).attr({\n            height: e.height - correction,\n            width: e.width - correction\n          });\n\n          _this.updateFramePosition();\n        }\n      });\n    }\n  }, {\n    key: \"option\",\n    value: function value(_option, _value) {\n      var _this2 = this;\n\n      if (\"mediaResizing\" === _option) {\n        Object.keys(_value).forEach(function (optionName) {\n          return _this2.option(optionName, _value[optionName]);\n        });\n        return;\n      }\n\n      if (\"enabled\" === _option) {\n        this.enabled = _value;\n        _value ? this._attachEvents() : this._detachEvents();\n      } else {\n        if (\"allowedTargets\" === _option && Array.isArray(_value)) {\n          this.allowedTargets = _value;\n        }\n      }\n    }\n  }, {\n    key: \"clean\",\n    value: function value() {\n      this._detachEvents();\n\n      this._$resizeFrame.remove();\n\n      this._$resizeFrame = void 0;\n    }\n  }]);\n\n  return ResizingModule;\n}();\n\nexports.default = ResizingModule;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/ui/html_editor/modules/resizing.js"],"names":["Object","defineProperty","exports","value","_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_click","_utils","_translator","_devices","_devices2","_resizable","_resizable2","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","DX_RESIZE_FRAME_CLASS","DX_TOUCH_DEVICE_CLASS","MODULE_NAMESPACE","KEYDOWN_EVENT","addNamespace","SCROLL_EVENT","FRAME_PADDING","ResizingModule","quill","options","editorInstance","allowedTargets","enabled","_attachEvents","_createResizeFrame","default","on","root","name","_clickHandler","bind","_scrollHandler","off","e","_isAllowedTarget","_$target","updateFramePosition","showFrame","hideFrame","targetElement","_isImage","indexOf","tagName","toUpperCase","_$resizeFrame","show","hide","_this$_$target","height","width","offsetTop","offsetLeft","_this$quill$root","scrollTop","scrollLeft","borderWidth","_getBorderWidth","css","padding","top","left","move","parseInt","_this","_devices$current","current","deviceType","addClass","toggleClass","appendTo","_getQuillContainer","_createComponent","onResize","correction","attr","_option","_this2","keys","forEach","optionName","option","_detachEvents","Array","isArray","remove"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/html_editor/modules/resizing.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nvar _renderer = require(\"../../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _click = require(\"../../../events/click\");\r\nvar _utils = require(\"../../../events/utils\");\r\nvar _translator = require(\"../../../animation/translator\");\r\nvar _devices = require(\"../../../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _resizable = require(\"../../resizable\");\r\nvar _resizable2 = _interopRequireDefault(_resizable);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar DX_RESIZE_FRAME_CLASS = \"dx-resize-frame\";\r\nvar DX_TOUCH_DEVICE_CLASS = \"dx-touch-device\";\r\nvar MODULE_NAMESPACE = \"dxHtmlResizingModule\";\r\nvar KEYDOWN_EVENT = (0, _utils.addNamespace)(\"keydown\", MODULE_NAMESPACE);\r\nvar SCROLL_EVENT = (0, _utils.addNamespace)(\"scroll\", MODULE_NAMESPACE);\r\nvar FRAME_PADDING = 1;\r\nvar ResizingModule = function() {\r\n    function ResizingModule(quill, options) {\r\n        _classCallCheck(this, ResizingModule);\r\n        this.quill = quill;\r\n        this.editorInstance = options.editorInstance;\r\n        this.allowedTargets = options.allowedTargets || [\"image\"];\r\n        this.enabled = !!options.enabled;\r\n        if (this.enabled) {\r\n            this._attachEvents();\r\n            this._createResizeFrame()\r\n        }\r\n    }\r\n    _createClass(ResizingModule, [{\r\n        key: \"_attachEvents\",\r\n        value: function() {\r\n            _events_engine2.default.on(this.quill.root, (0, _utils.addNamespace)(_click.name, MODULE_NAMESPACE), this._clickHandler.bind(this));\r\n            _events_engine2.default.on(this.quill.root, SCROLL_EVENT, this._scrollHandler.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_detachEvents\",\r\n        value: function() {\r\n            _events_engine2.default.off(this.quill.root, MODULE_NAMESPACE)\r\n        }\r\n    }, {\r\n        key: \"_clickHandler\",\r\n        value: function(e) {\r\n            if (this._isAllowedTarget(e.target)) {\r\n                if (this._$target === e.target) {\r\n                    return\r\n                }\r\n                this._$target = e.target;\r\n                this.updateFramePosition();\r\n                this.showFrame()\r\n            } else {\r\n                if (this._$target) {\r\n                    this.hideFrame()\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_scrollHandler\",\r\n        value: function(e) {\r\n            if (this._$target) {\r\n                this.updateFramePosition()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isAllowedTarget\",\r\n        value: function(targetElement) {\r\n            return this._isImage(targetElement)\r\n        }\r\n    }, {\r\n        key: \"_isImage\",\r\n        value: function(targetElement) {\r\n            return this.allowedTargets.indexOf(\"image\") !== -1 && \"IMG\" === targetElement.tagName.toUpperCase()\r\n        }\r\n    }, {\r\n        key: \"showFrame\",\r\n        value: function() {\r\n            this._$resizeFrame.show();\r\n            _events_engine2.default.on(this.quill.root, KEYDOWN_EVENT, this.hideFrame.bind(this))\r\n        }\r\n    }, {\r\n        key: \"hideFrame\",\r\n        value: function() {\r\n            this._$target = null;\r\n            this._$resizeFrame.hide();\r\n            _events_engine2.default.off(this.quill.root, KEYDOWN_EVENT)\r\n        }\r\n    }, {\r\n        key: \"updateFramePosition\",\r\n        value: function() {\r\n            var _this$_$target = this._$target,\r\n                height = _this$_$target.height,\r\n                width = _this$_$target.width,\r\n                offsetTop = _this$_$target.offsetTop,\r\n                offsetLeft = _this$_$target.offsetLeft;\r\n            var _this$quill$root = this.quill.root,\r\n                scrollTop = _this$quill$root.scrollTop,\r\n                scrollLeft = _this$quill$root.scrollLeft;\r\n            var borderWidth = this._getBorderWidth();\r\n            this._$resizeFrame.css({\r\n                height: height,\r\n                width: width,\r\n                padding: FRAME_PADDING,\r\n                top: offsetTop - borderWidth - scrollTop - FRAME_PADDING,\r\n                left: offsetLeft - borderWidth - scrollLeft - FRAME_PADDING\r\n            });\r\n            (0, _translator.move)(this._$resizeFrame, {\r\n                left: 0,\r\n                top: 0\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getBorderWidth\",\r\n        value: function() {\r\n            return parseInt(this._$resizeFrame.css(\"borderTopWidth\"))\r\n        }\r\n    }, {\r\n        key: \"_createResizeFrame\",\r\n        value: function() {\r\n            var _this = this;\r\n            if (this._$resizeFrame) {\r\n                return\r\n            }\r\n            var _devices$current = _devices2.default.current(),\r\n                deviceType = _devices$current.deviceType;\r\n            this._$resizeFrame = (0, _renderer2.default)(\"<div>\").addClass(DX_RESIZE_FRAME_CLASS).toggleClass(DX_TOUCH_DEVICE_CLASS, \"desktop\" !== deviceType).appendTo(this.editorInstance._getQuillContainer()).hide();\r\n            this.editorInstance._createComponent(this._$resizeFrame, _resizable2.default, {\r\n                onResize: function(e) {\r\n                    if (!_this._$target) {\r\n                        return\r\n                    }\r\n                    var correction = 2 * (FRAME_PADDING + _this._getBorderWidth());\r\n                    (0, _renderer2.default)(_this._$target).attr({\r\n                        height: e.height - correction,\r\n                        width: e.width - correction\r\n                    });\r\n                    _this.updateFramePosition()\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"option\",\r\n        value: function(_option, value) {\r\n            var _this2 = this;\r\n            if (\"mediaResizing\" === _option) {\r\n                Object.keys(value).forEach(function(optionName) {\r\n                    return _this2.option(optionName, value[optionName])\r\n                });\r\n                return\r\n            }\r\n            if (\"enabled\" === _option) {\r\n                this.enabled = value;\r\n                value ? this._attachEvents() : this._detachEvents()\r\n            } else {\r\n                if (\"allowedTargets\" === _option && Array.isArray(value)) {\r\n                    this.allowedTargets = value\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"clean\",\r\n        value: function() {\r\n            this._detachEvents();\r\n            this._$resizeFrame.remove();\r\n            this._$resizeFrame = void 0\r\n        }\r\n    }]);\r\n    return ResizingModule\r\n}();\r\nexports.default = ResizingModule;\r\n"]},"metadata":{},"sourceType":"script"}