{"ast":null,"code":"/**\r\n * DevExtreme (viz/translators/interval_translator.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar isNumber = typeUtils.isNumeric;\nvar isDefined = typeUtils.isDefined;\n\nvar dateUtils = require(\"../../core/utils/date\");\n\nvar addInterval = dateUtils.addInterval;\nvar dateToMilliseconds = dateUtils.dateToMilliseconds;\nvar floor = Math.floor;\n\nvar adjust = require(\"../../core/utils/math\").adjust;\n\nmodule.exports = {\n  _intervalize: function _intervalize(value, interval) {\n    if (!isDefined(value)) {\n      return;\n    }\n\n    if (\"datetime\" === this._businessRange.dataType) {\n      if (isNumber(value)) {\n        value = new Date(value);\n      } else {\n        value = new Date(value.getTime());\n      }\n\n      value = dateUtils.correctDateWithUnitBeginning(value, interval);\n    } else {\n      value = adjust(floor(adjust(value / interval)) * interval, interval);\n    }\n\n    return value;\n  },\n  translate: function translate(bp, direction, interval) {\n    var that = this;\n    var specialValue = that.translateSpecialCase(bp);\n\n    if (isDefined(specialValue)) {\n      return Math.round(specialValue);\n    }\n\n    interval = interval || that._options.interval;\n\n    if (!that.isValid(bp, interval)) {\n      return null;\n    }\n\n    return that.to(bp, direction, interval);\n  },\n  getInterval: function getInterval() {\n    return Math.round(this._canvasOptions.ratioOfCanvasRange * (this._businessRange.interval || Math.abs(this._canvasOptions.rangeMax - this._canvasOptions.rangeMin)));\n  },\n  zoom: function zoom() {},\n  getMinScale: function getMinScale() {},\n  getScale: function getScale() {},\n  _parse: function _parse(value) {\n    return \"datetime\" === this._businessRange.dataType ? new Date(value) : Number(value);\n  },\n  _fromValue: function _fromValue(value) {\n    return this._parse(value);\n  },\n  _toValue: function _toValue(value) {\n    return this._parse(value);\n  },\n  isValid: function isValid(value, interval) {\n    var that = this;\n    var co = that._canvasOptions;\n    var rangeMin = co.rangeMin;\n    var rangeMax = co.rangeMax;\n    interval = interval || that._options.interval;\n\n    if (null === value || isNaN(value)) {\n      return false;\n    }\n\n    value = \"datetime\" === that._businessRange.dataType && isNumber(value) ? new Date(value) : value;\n\n    if (interval !== that._options.interval) {\n      rangeMin = that._intervalize(rangeMin, interval);\n      rangeMax = that._intervalize(rangeMax, interval);\n    }\n\n    if (value.valueOf() < rangeMin || value.valueOf() >= addInterval(rangeMax, interval)) {\n      return false;\n    }\n\n    return true;\n  },\n  to: function to(bp, direction, interval) {\n    var that = this;\n    interval = interval || that._options.interval;\n\n    var v1 = that._intervalize(bp, interval);\n\n    var v2 = addInterval(v1, interval);\n\n    var res = that._to(v1);\n\n    var p2 = that._to(v2);\n\n    if (!direction) {\n      res = floor((res + p2) / 2);\n    } else {\n      if (direction > 0) {\n        res = p2;\n      }\n    }\n\n    return res;\n  },\n  _to: function _to(value) {\n    var co = this._canvasOptions;\n    var rMin = co.rangeMinVisible;\n    var rMax = co.rangeMaxVisible;\n    var offset = value - rMin;\n\n    if (value < rMin) {\n      offset = 0;\n    } else {\n      if (value > rMax) {\n        offset = addInterval(rMax, this._options.interval) - rMin;\n      }\n    }\n\n    return this._conversionValue(this._calculateProjection(offset * this._canvasOptions.ratioOfCanvasRange));\n  },\n  from: function from(position, direction) {\n    var that = this;\n    var origInterval = that._options.interval;\n    var interval = origInterval;\n    var co = that._canvasOptions;\n    var rMin = co.rangeMinVisible;\n    var rMax = co.rangeMaxVisible;\n    var value;\n\n    if (\"datetime\" === that._businessRange.dataType) {\n      interval = dateToMilliseconds(origInterval);\n    }\n\n    value = that._calculateUnProjection((position - that._canvasOptions.startPoint) / that._canvasOptions.ratioOfCanvasRange);\n    value = that._intervalize(addInterval(value, interval / 2, direction > 0), origInterval);\n\n    if (value < rMin) {\n      value = rMin;\n    } else {\n      if (value > rMax) {\n        value = rMax;\n      }\n    }\n\n    return value;\n  },\n  _add: function _add() {\n    return NaN;\n  },\n  isValueProlonged: true\n};","map":null,"metadata":{},"sourceType":"script"}