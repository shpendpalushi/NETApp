{"ast":null,"code":"/**\r\n * DevExtreme (viz/vector_map/vector_map.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _utils = require(\"../core/utils\");\n\nvar _projection = require(\"./projection.main\");\n\nvar _control_bar = require(\"./control_bar\");\n\nvar _control_bar2 = _interopRequireDefault(_control_bar);\n\nvar _gesture_handler = require(\"./gesture_handler\");\n\nvar _gesture_handler2 = _interopRequireDefault(_gesture_handler);\n\nvar _tracker = require(\"./tracker\");\n\nvar _tracker2 = _interopRequireDefault(_tracker);\n\nvar _data_exchanger = require(\"./data_exchanger\");\n\nvar _data_exchanger2 = _interopRequireDefault(_data_exchanger);\n\nvar _legend = require(\"./legend\");\n\nvar _legend2 = _interopRequireDefault(_legend);\n\nvar _layout = require(\"./layout\");\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nvar _map_layer = require(\"./map_layer\");\n\nvar _tooltip_viewer = require(\"./tooltip_viewer\");\n\nvar _tooltip_viewer2 = _interopRequireDefault(_tooltip_viewer);\n\nrequire(\"./projection\");\n\nvar _base_widget = require(\"../core/base_widget\");\n\nvar _base_widget2 = _interopRequireDefault(_base_widget);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _export = require(\"../core/export\");\n\nvar _title = require(\"../core/title\");\n\nvar _tooltip = require(\"../core/tooltip\");\n\nvar _loading_indicator = require(\"../core/loading_indicator\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DEFAULT_WIDTH = 800;\nvar DEFAULT_HEIGHT = 400;\nvar RE_STARTS_LAYERS = /^layers/;\nvar RE_ENDS_DATA_SOURCE = /\\.dataSource$/;\nvar nextDataKey = 1;\n\nfunction generateDataKey() {\n  return \"vectormap-data-\" + nextDataKey++;\n}\n\nfunction mergeBounds(sumBounds, dataBounds) {\n  return dataBounds ? [Math.min(dataBounds[0], dataBounds[2], sumBounds[0]), Math.min(dataBounds[1], dataBounds[3], sumBounds[3]), Math.max(dataBounds[0], dataBounds[2], sumBounds[2]), Math.max(dataBounds[1], dataBounds[3], sumBounds[1])] : sumBounds;\n}\n\nvar dxVectorMap = _base_widget2.default.inherit({\n  _eventsMap: {\n    onClick: {\n      name: \"click\"\n    },\n    onCenterChanged: {\n      name: \"centerChanged\"\n    },\n    onZoomFactorChanged: {\n      name: \"zoomFactorChanged\"\n    },\n    onHoverChanged: {\n      name: \"hoverChanged\"\n    },\n    onSelectionChanged: {\n      name: \"selectionChanged\"\n    }\n  },\n  _rootClassPrefix: \"dxm\",\n  _rootClass: \"dxm-vector-map\",\n  _themeSection: \"map\",\n  _fontFields: [\"layer:area.label.font\", \"layer:marker:dot.label.font\", \"layer:marker:bubble.label.font\", \"layer:marker:pie.label.font\", \"layer:marker:image.label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\n  _initLayerCollection: function _initLayerCollection(dataKey) {\n    var that = this;\n    that._layerCollection = new _map_layer.MapLayerCollection({\n      renderer: that._renderer,\n      projection: that._projection,\n      themeManager: that._themeManager,\n      tracker: that._tracker,\n      dataKey: dataKey,\n      eventTrigger: that._eventTrigger,\n      dataExchanger: that._dataExchanger,\n      tooltip: that._tooltip,\n      notifyDirty: that._notifyDirty,\n      notifyReady: that._notifyReady,\n      dataReady: function dataReady() {\n        var bounds;\n\n        if (that.option(\"getBoundsFromData\") && !that.option(\"bounds\")) {\n          that._preventProjectionEvents();\n\n          bounds = that._getBoundsFromData();\n\n          that._projection.setBounds(bounds);\n\n          that._allowProjectionEvents();\n        }\n\n        if (!that.option(\"projection\")) {\n          bounds = bounds || that._getBoundsFromData();\n\n          if (Math.ceil(bounds[0]) < -180 || Math.ceil(bounds[3]) < -90 || Math.floor(bounds[2]) > 180 || Math.floor(bounds[1]) > 90) {\n            var longitudeLength = bounds[2] - bounds[0];\n            var latitudeLength = bounds[1] - bounds[3];\n\n            that._projection.setEngine({\n              to: function to(coordinates) {\n                return [2 * (coordinates[0] - bounds[0]) / longitudeLength - 1, 2 * (coordinates[1] - bounds[3]) / latitudeLength - 1];\n              },\n              from: function from(coordinates) {\n                return [(coordinates[0] + 1) * longitudeLength / 2 + bounds[0], (coordinates[1] + 1) * latitudeLength / 2 + bounds[3]];\n              }\n            });\n          }\n        }\n      }\n    });\n  },\n  _getBoundsFromData: function _getBoundsFromData() {\n    var bounds = this._getBoundingBoxFromDataSource();\n\n    if (!bounds) {\n      var boundsByData = (0, _map_layer.getMaxBound)(this.getLayers().map(function (l) {\n        return l.getBounds();\n      }));\n\n      if (boundsByData) {\n        bounds = boundsByData;\n      }\n    }\n\n    bounds = bounds || [];\n    bounds = [bounds[0], bounds[3], bounds[2], bounds[1]];\n    return bounds;\n  },\n  _initLegendsControl: function _initLegendsControl() {\n    var that = this;\n    that._legendsControl = new _legend2.default.LegendsControl({\n      renderer: that._renderer,\n      container: that._root,\n      widget: that,\n      layoutControl: that._layoutControl,\n      themeManager: that._themeManager,\n      dataExchanger: that._dataExchanger,\n      notifyDirty: that._notifyDirty,\n      notifyReady: that._notifyReady\n    });\n  },\n  _initControlBar: function _initControlBar(dataKey) {\n    var that = this;\n    that._controlBar = new _control_bar2.default.ControlBar({\n      renderer: that._renderer,\n      container: that._root,\n      layoutControl: that._layoutControl,\n      projection: that._projection,\n      tracker: that._tracker,\n      dataKey: dataKey\n    });\n  },\n  _initElements: function _initElements() {\n    var that = this;\n    var dataKey = generateDataKey();\n    var notifyCounter = 0;\n    var preventProjectionEvents;\n\n    that._preventProjectionEvents = function () {\n      preventProjectionEvents = true;\n    };\n\n    that._allowProjectionEvents = function () {\n      preventProjectionEvents = false;\n    };\n\n    that._notifyDirty = function () {\n      that._resetIsReady();\n\n      ++notifyCounter;\n    };\n\n    that._notifyReady = function () {\n      that._allowProjectionEvents();\n\n      if (0 === --notifyCounter) {\n        that._drawn();\n      }\n    };\n\n    that._preventProjectionEvents();\n\n    that._dataExchanger = new _data_exchanger2.default.DataExchanger();\n    that._projection = new _projection.Projection({\n      centerChanged: function centerChanged(value) {\n        if (!preventProjectionEvents) {\n          that._eventTrigger(\"centerChanged\", {\n            center: value\n          });\n        }\n      },\n      zoomChanged: function zoomChanged(value) {\n        if (!preventProjectionEvents) {\n          that._eventTrigger(\"zoomFactorChanged\", {\n            zoomFactor: value\n          });\n        }\n      }\n    });\n    that._tracker = new _tracker2.default.Tracker({\n      root: that._root,\n      projection: that._projection,\n      dataKey: dataKey\n    });\n    that._gestureHandler = new _gesture_handler2.default.GestureHandler({\n      projection: that._projection,\n      renderer: that._renderer,\n      tracker: that._tracker\n    });\n    that._layoutControl = new _layout2.default.LayoutControl();\n\n    that._layoutControl.suspend();\n\n    that._initLayerCollection(dataKey);\n\n    that._initControlBar(dataKey);\n\n    that._initLegendsControl();\n\n    that._tooltipViewer = new _tooltip_viewer2.default.TooltipViewer({\n      tracker: that._tracker,\n      tooltip: that._tooltip,\n      layerCollection: that._layerCollection\n    });\n  },\n  _change_RESUME_LAYOUT: function _change_RESUME_LAYOUT() {\n    this._layoutControl.resume();\n  },\n  _initialChanges: [\"PROJECTION\", \"RESUME_LAYOUT\", \"LAYOUT_INIT\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\"],\n  _layoutChangesOrder: [\"RESUME_LAYOUT\", \"LAYERS\"],\n  _initCore: function _initCore() {\n    this._root = this._renderer.root.attr({\n      align: \"center\",\n      cursor: \"default\"\n    });\n\n    this._initElements();\n  },\n  _disposeCore: function _disposeCore() {\n    var that = this;\n\n    that._controlBar.dispose();\n\n    that._gestureHandler.dispose();\n\n    that._tracker.dispose();\n\n    that._legendsControl.dispose();\n\n    that._layerCollection.dispose();\n\n    that._layoutControl.dispose();\n\n    that._tooltipViewer.dispose();\n\n    that._dataExchanger.dispose();\n\n    that._projection.dispose();\n\n    that._dataExchanger = that._gestureHandler = that._projection = that._tracker = that._layoutControl = that._root = that._layerCollection = that._controlBar = that._legendsControl = null;\n  },\n  _setupInteraction: function _setupInteraction() {\n    var options = {\n      centeringEnabled: !!(0, _utils.parseScalar)(this._getOption(\"panningEnabled\", true), true),\n      zoomingEnabled: !!(0, _utils.parseScalar)(this._getOption(\"zoomingEnabled\", true), true)\n    };\n\n    this._gestureHandler.setInteraction(options);\n\n    this._controlBar.setInteraction(options);\n  },\n  _getDefaultSize: function _getDefaultSize() {\n    return {\n      width: DEFAULT_WIDTH,\n      height: DEFAULT_HEIGHT\n    };\n  },\n  _applySize: function _applySize(rect) {\n    var layout = {\n      left: rect[0],\n      top: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1],\n      right: 0,\n      bottom: 0\n    };\n\n    this._projection.setSize(layout);\n\n    this._layoutControl.setSize(layout);\n\n    this._layerCollection.setRect([layout.left, layout.top, layout.width, layout.height]);\n  },\n  _optionChanging: function _optionChanging(name, currentValue, nextValue) {\n    if (currentValue && nextValue) {\n      if (RE_STARTS_LAYERS.test(name)) {\n        if (currentValue.dataSource && nextValue.dataSource && currentValue !== nextValue) {\n          currentValue.dataSource = null;\n        } else {\n          if (RE_ENDS_DATA_SOURCE.test(name)) {\n            this.option(name, null);\n          }\n        }\n      }\n    }\n  },\n  _applyChanges: function _applyChanges() {\n    this._notifyDirty();\n\n    this.callBase.apply(this, arguments);\n\n    this._notifyReady();\n  },\n  _optionChangesMap: {\n    background: \"BACKGROUND\",\n    layers: \"LAYERS\",\n    controlBar: \"CONTROL_BAR\",\n    legends: \"LEGENDS\",\n    touchEnabled: \"TRACKER\",\n    wheelEnabled: \"TRACKER\",\n    panningEnabled: \"INTERACTION\",\n    zoomingEnabled: \"INTERACTION\",\n    projection: \"PROJECTION\",\n    bounds: \"BOUNDS\",\n    maxZoomFactor: \"MAX_ZOOM_FACTOR\",\n    zoomFactor: \"ZOOM_FACTOR\",\n    center: \"CENTER\"\n  },\n  _optionChangesOrder: [\"PROJECTION\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\", \"BACKGROUND\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\n  _change_PROJECTION: function _change_PROJECTION() {\n    this._setProjection();\n  },\n  _change_BOUNDS: function _change_BOUNDS() {\n    this._setBounds();\n  },\n  _change_MAX_ZOOM_FACTOR: function _change_MAX_ZOOM_FACTOR() {\n    this._setMaxZoom();\n  },\n  _change_ZOOM_FACTOR: function _change_ZOOM_FACTOR() {\n    this._setZoom();\n  },\n  _change_CENTER: function _change_CENTER() {\n    this._setCenter();\n  },\n  _change_BACKGROUND: function _change_BACKGROUND() {\n    this._setBackgroundOptions();\n  },\n  _change_LAYERS: function _change_LAYERS() {\n    this._setLayerCollectionOptions();\n  },\n  _change_CONTROL_BAR: function _change_CONTROL_BAR() {\n    this._setControlBarOptions();\n  },\n  _change_LEGENDS: function _change_LEGENDS() {\n    this._setLegendsOptions();\n  },\n  _change_TRACKER: function _change_TRACKER() {\n    this._setTrackerOptions();\n  },\n  _change_INTERACTION: function _change_INTERACTION() {\n    this._setupInteraction();\n  },\n  _themeDependentChanges: [\"BACKGROUND\", \"LAYERS\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\n  _setProjection: function _setProjection() {\n    this._projection.setEngine(this.option(\"projection\"));\n  },\n  _setBounds: function _setBounds() {\n    this._projection.setBounds(this.option(\"bounds\"));\n  },\n  _setMaxZoom: function _setMaxZoom() {\n    this._projection.setMaxZoom(this.option(\"maxZoomFactor\"));\n  },\n  _setZoom: function _setZoom() {\n    this._projection.setZoom(this.option(\"zoomFactor\"));\n  },\n  _setCenter: function _setCenter() {\n    this._projection.setCenter(this.option(\"center\"));\n  },\n  _setBackgroundOptions: function _setBackgroundOptions() {\n    this._layerCollection.setBackgroundOptions(this._getOption(\"background\"));\n  },\n  _setLayerCollectionOptions: function _setLayerCollectionOptions() {\n    this._layerCollection.setOptions(this.option(\"layers\"));\n  },\n  _getBoundingBoxFromDataSource: function _getBoundingBoxFromDataSource() {\n    var that = this;\n\n    var layers = that._layerCollection.items();\n\n    var infinityBounds = [1 / 0, -(1 / 0), -(1 / 0), 1 / 0];\n    var resultBBox = layers && layers.length ? layers.reduce(function (sumBBox, l) {\n      var layerData = l.getData();\n      var itemCount = layerData.count();\n\n      if (itemCount > 0) {\n        var rootBBox = layerData.getBBox();\n\n        if (rootBBox) {\n          sumBBox = mergeBounds(sumBBox, rootBBox);\n        } else {\n          for (var i = 0; i < itemCount; i++) {\n            sumBBox = mergeBounds(sumBBox, layerData.getBBox(i));\n          }\n        }\n      }\n\n      return sumBBox;\n    }, infinityBounds) : void 0;\n    return resultBBox === infinityBounds ? void 0 : resultBBox;\n  },\n  _setControlBarOptions: function _setControlBarOptions() {\n    this._controlBar.setOptions(this._getOption(\"controlBar\"));\n  },\n  _setLegendsOptions: function _setLegendsOptions() {\n    this._legendsControl.setOptions(this.option(\"legends\"));\n  },\n  _setTrackerOptions: function _setTrackerOptions() {\n    this._tracker.setOptions({\n      touchEnabled: this._getOption(\"touchEnabled\", true),\n      wheelEnabled: this._getOption(\"wheelEnabled\", true)\n    });\n  },\n  getLayers: function getLayers() {\n    return this._layerCollection.items().map(function (l) {\n      return l.proxy;\n    });\n  },\n  getLayerByIndex: function getLayerByIndex(index) {\n    var layer = this._layerCollection.byIndex(index);\n\n    return layer ? layer.proxy : null;\n  },\n  getLayerByName: function getLayerByName(name) {\n    var layer = this._layerCollection.byName(name);\n\n    return layer ? layer.proxy : null;\n  },\n  clearSelection: function clearSelection(_noEvent) {\n    var layers = this._layerCollection.items();\n\n    var i;\n    var ii = layers.length;\n\n    for (i = 0; i < ii; ++i) {\n      layers[i].clearSelection(_noEvent);\n    }\n\n    return this;\n  },\n  center: function center(value) {\n    var that = this;\n\n    if (void 0 === value) {\n      return that._projection.getCenter();\n    } else {\n      that._projection.setCenter(value);\n\n      return that;\n    }\n  },\n  zoomFactor: function zoomFactor(value) {\n    var that = this;\n\n    if (void 0 === value) {\n      return that._projection.getZoom();\n    } else {\n      that._projection.setZoom(value);\n\n      return that;\n    }\n  },\n  viewport: function viewport(value) {\n    var that = this;\n\n    if (void 0 === value) {\n      return that._projection.getViewport();\n    } else {\n      that._projection.setViewport(value);\n\n      return that;\n    }\n  },\n  convertCoordinates: function convertCoordinates(coordinates) {\n    coordinates = coordinates && coordinates.length ? coordinates : [arguments[0], arguments[1]];\n    return this.convertToGeo(coordinates[0], coordinates[1]);\n  },\n  convertToGeo: function convertToGeo(x, y) {\n    return this._projection.fromScreenPoint([x, y]);\n  },\n  convertToXY: function convertToXY(longitude, latitude) {\n    return this._projection.toScreenPoint([longitude, latitude]);\n  }\n});\n\n(0, _component_registrator2.default)(\"dxVectorMap\", dxVectorMap);\nmodule.exports = dxVectorMap;\ndxVectorMap.addPlugin(_export.plugin);\ndxVectorMap.addPlugin(_title.plugin);\ndxVectorMap.addPlugin(_tooltip.plugin);\ndxVectorMap.addPlugin(_loading_indicator.plugin);","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/viz/vector_map/vector_map.js"],"names":["_utils","require","_projection","_control_bar","_control_bar2","_interopRequireDefault","_gesture_handler","_gesture_handler2","_tracker","_tracker2","_data_exchanger","_data_exchanger2","_legend","_legend2","_layout","_layout2","_map_layer","_tooltip_viewer","_tooltip_viewer2","_base_widget","_base_widget2","_component_registrator","_component_registrator2","_export","_title","_tooltip","_loading_indicator","obj","__esModule","DEFAULT_WIDTH","DEFAULT_HEIGHT","RE_STARTS_LAYERS","RE_ENDS_DATA_SOURCE","nextDataKey","generateDataKey","mergeBounds","sumBounds","dataBounds","Math","min","max","dxVectorMap","default","inherit","_eventsMap","onClick","name","onCenterChanged","onZoomFactorChanged","onHoverChanged","onSelectionChanged","_rootClassPrefix","_rootClass","_themeSection","_fontFields","_initLayerCollection","dataKey","that","_layerCollection","MapLayerCollection","renderer","_renderer","projection","themeManager","_themeManager","tracker","eventTrigger","_eventTrigger","dataExchanger","_dataExchanger","tooltip","notifyDirty","_notifyDirty","notifyReady","_notifyReady","dataReady","bounds","option","_preventProjectionEvents","_getBoundsFromData","setBounds","_allowProjectionEvents","ceil","floor","longitudeLength","latitudeLength","setEngine","to","coordinates","from","_getBoundingBoxFromDataSource","boundsByData","getMaxBound","getLayers","map","l","getBounds","_initLegendsControl","_legendsControl","LegendsControl","container","_root","widget","layoutControl","_layoutControl","_initControlBar","_controlBar","ControlBar","_initElements","notifyCounter","preventProjectionEvents","_resetIsReady","_drawn","DataExchanger","Projection","centerChanged","value","center","zoomChanged","zoomFactor","Tracker","root","_gestureHandler","GestureHandler","LayoutControl","suspend","_tooltipViewer","TooltipViewer","layerCollection","_change_RESUME_LAYOUT","resume","_initialChanges","_layoutChangesOrder","_initCore","attr","align","cursor","_disposeCore","dispose","_setupInteraction","options","centeringEnabled","parseScalar","_getOption","zoomingEnabled","setInteraction","_getDefaultSize","width","height","_applySize","rect","layout","left","top","right","bottom","setSize","setRect","_optionChanging","currentValue","nextValue","test","dataSource","_applyChanges","callBase","apply","arguments","_optionChangesMap","background","layers","controlBar","legends","touchEnabled","wheelEnabled","panningEnabled","maxZoomFactor","_optionChangesOrder","_change_PROJECTION","_setProjection","_change_BOUNDS","_setBounds","_change_MAX_ZOOM_FACTOR","_setMaxZoom","_change_ZOOM_FACTOR","_setZoom","_change_CENTER","_setCenter","_change_BACKGROUND","_setBackgroundOptions","_change_LAYERS","_setLayerCollectionOptions","_change_CONTROL_BAR","_setControlBarOptions","_change_LEGENDS","_setLegendsOptions","_change_TRACKER","_setTrackerOptions","_change_INTERACTION","_themeDependentChanges","setMaxZoom","setZoom","setCenter","setBackgroundOptions","setOptions","items","infinityBounds","resultBBox","length","reduce","sumBBox","layerData","getData","itemCount","count","rootBBox","getBBox","i","proxy","getLayerByIndex","index","layer","byIndex","getLayerByName","byName","clearSelection","_noEvent","ii","getCenter","getZoom","viewport","getViewport","setViewport","convertCoordinates","convertToGeo","x","y","fromScreenPoint","convertToXY","longitude","latitude","toScreenPoint","module","exports","addPlugin","plugin"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,MAAM,GAAGC,OAAO,CAAC,eAAD,CAApB;;AACA,IAAIC,WAAW,GAAGD,OAAO,CAAC,mBAAD,CAAzB;;AACA,IAAIE,YAAY,GAAGF,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIG,aAAa,GAAGC,sBAAsB,CAACF,YAAD,CAA1C;;AACA,IAAIG,gBAAgB,GAAGL,OAAO,CAAC,mBAAD,CAA9B;;AACA,IAAIM,iBAAiB,GAAGF,sBAAsB,CAACC,gBAAD,CAA9C;;AACA,IAAIE,QAAQ,GAAGP,OAAO,CAAC,WAAD,CAAtB;;AACA,IAAIQ,SAAS,GAAGJ,sBAAsB,CAACG,QAAD,CAAtC;;AACA,IAAIE,eAAe,GAAGT,OAAO,CAAC,kBAAD,CAA7B;;AACA,IAAIU,gBAAgB,GAAGN,sBAAsB,CAACK,eAAD,CAA7C;;AACA,IAAIE,OAAO,GAAGX,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIY,QAAQ,GAAGR,sBAAsB,CAACO,OAAD,CAArC;;AACA,IAAIE,OAAO,GAAGb,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIc,QAAQ,GAAGV,sBAAsB,CAACS,OAAD,CAArC;;AACA,IAAIE,UAAU,GAAGf,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAIgB,eAAe,GAAGhB,OAAO,CAAC,kBAAD,CAA7B;;AACA,IAAIiB,gBAAgB,GAAGb,sBAAsB,CAACY,eAAD,CAA7C;;AACAhB,OAAO,CAAC,cAAD,CAAP;;AACA,IAAIkB,YAAY,GAAGlB,OAAO,CAAC,qBAAD,CAA1B;;AACA,IAAImB,aAAa,GAAGf,sBAAsB,CAACc,YAAD,CAA1C;;AACA,IAAIE,sBAAsB,GAAGpB,OAAO,CAAC,kCAAD,CAApC;;AACA,IAAIqB,uBAAuB,GAAGjB,sBAAsB,CAACgB,sBAAD,CAApD;;AACA,IAAIE,OAAO,GAAGtB,OAAO,CAAC,gBAAD,CAArB;;AACA,IAAIuB,MAAM,GAAGvB,OAAO,CAAC,eAAD,CAApB;;AACA,IAAIwB,QAAQ,GAAGxB,OAAO,CAAC,iBAAD,CAAtB;;AACA,IAAIyB,kBAAkB,GAAGzB,OAAO,CAAC,2BAAD,CAAhC;;AAEA,SAASI,sBAAT,CAAgCsB,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AACD,IAAIE,aAAa,GAAG,GAApB;AACA,IAAIC,cAAc,GAAG,GAArB;AACA,IAAIC,gBAAgB,GAAG,SAAvB;AACA,IAAIC,mBAAmB,GAAG,eAA1B;AACA,IAAIC,WAAW,GAAG,CAAlB;;AAEA,SAASC,eAAT,GAA2B;AACvB,SAAO,oBAAoBD,WAAW,EAAtC;AACH;;AAED,SAASE,WAAT,CAAqBC,SAArB,EAAgCC,UAAhC,EAA4C;AACxC,SAAOA,UAAU,GAAG,CAACC,IAAI,CAACC,GAAL,CAASF,UAAU,CAAC,CAAD,CAAnB,EAAwBA,UAAU,CAAC,CAAD,CAAlC,EAAuCD,SAAS,CAAC,CAAD,CAAhD,CAAD,EAAuDE,IAAI,CAACC,GAAL,CAASF,UAAU,CAAC,CAAD,CAAnB,EAAwBA,UAAU,CAAC,CAAD,CAAlC,EAAuCD,SAAS,CAAC,CAAD,CAAhD,CAAvD,EAA6GE,IAAI,CAACE,GAAL,CAASH,UAAU,CAAC,CAAD,CAAnB,EAAwBA,UAAU,CAAC,CAAD,CAAlC,EAAuCD,SAAS,CAAC,CAAD,CAAhD,CAA7G,EAAmKE,IAAI,CAACE,GAAL,CAASH,UAAU,CAAC,CAAD,CAAnB,EAAwBA,UAAU,CAAC,CAAD,CAAlC,EAAuCD,SAAS,CAAC,CAAD,CAAhD,CAAnK,CAAH,GAA8NA,SAA/O;AACH;;AACD,IAAIK,WAAW,GAAGrB,aAAa,CAACsB,OAAd,CAAsBC,OAAtB,CAA8B;AAC5CC,EAAAA,UAAU,EAAE;AACRC,IAAAA,OAAO,EAAE;AACLC,MAAAA,IAAI,EAAE;AADD,KADD;AAIRC,IAAAA,eAAe,EAAE;AACbD,MAAAA,IAAI,EAAE;AADO,KAJT;AAORE,IAAAA,mBAAmB,EAAE;AACjBF,MAAAA,IAAI,EAAE;AADW,KAPb;AAURG,IAAAA,cAAc,EAAE;AACZH,MAAAA,IAAI,EAAE;AADM,KAVR;AAaRI,IAAAA,kBAAkB,EAAE;AAChBJ,MAAAA,IAAI,EAAE;AADU;AAbZ,GADgC;AAkB5CK,EAAAA,gBAAgB,EAAE,KAlB0B;AAmB5CC,EAAAA,UAAU,EAAE,gBAnBgC;AAoB5CC,EAAAA,aAAa,EAAE,KApB6B;AAqB5CC,EAAAA,WAAW,EAAE,CAAC,uBAAD,EAA0B,6BAA1B,EAAyD,gCAAzD,EAA2F,6BAA3F,EAA0H,+BAA1H,EAA2J,aAA3J,EAA0K,mBAA1K,EAA+L,4BAA/L,CArB+B;AAsB5CC,EAAAA,oBAAoB,EAAE,8BAASC,OAAT,EAAkB;AACpC,QAAIC,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACC,gBAAL,GAAwB,IAAI1C,UAAU,CAAC2C,kBAAf,CAAkC;AACtDC,MAAAA,QAAQ,EAAEH,IAAI,CAACI,SADuC;AAEtDC,MAAAA,UAAU,EAAEL,IAAI,CAACvD,WAFqC;AAGtD6D,MAAAA,YAAY,EAAEN,IAAI,CAACO,aAHmC;AAItDC,MAAAA,OAAO,EAAER,IAAI,CAACjD,QAJwC;AAKtDgD,MAAAA,OAAO,EAAEA,OAL6C;AAMtDU,MAAAA,YAAY,EAAET,IAAI,CAACU,aANmC;AAOtDC,MAAAA,aAAa,EAAEX,IAAI,CAACY,cAPkC;AAQtDC,MAAAA,OAAO,EAAEb,IAAI,CAAChC,QARwC;AAStD8C,MAAAA,WAAW,EAAEd,IAAI,CAACe,YAToC;AAUtDC,MAAAA,WAAW,EAAEhB,IAAI,CAACiB,YAVoC;AAWtDC,MAAAA,SAAS,EAAE,qBAAW;AAClB,YAAIC,MAAJ;;AACA,YAAInB,IAAI,CAACoB,MAAL,CAAY,mBAAZ,KAAoC,CAACpB,IAAI,CAACoB,MAAL,CAAY,QAAZ,CAAzC,EAAgE;AAC5DpB,UAAAA,IAAI,CAACqB,wBAAL;;AACAF,UAAAA,MAAM,GAAGnB,IAAI,CAACsB,kBAAL,EAAT;;AACAtB,UAAAA,IAAI,CAACvD,WAAL,CAAiB8E,SAAjB,CAA2BJ,MAA3B;;AACAnB,UAAAA,IAAI,CAACwB,sBAAL;AACH;;AACD,YAAI,CAACxB,IAAI,CAACoB,MAAL,CAAY,YAAZ,CAAL,EAAgC;AAC5BD,UAAAA,MAAM,GAAGA,MAAM,IAAInB,IAAI,CAACsB,kBAAL,EAAnB;;AACA,cAAIzC,IAAI,CAAC4C,IAAL,CAAUN,MAAM,CAAC,CAAD,CAAhB,IAAuB,CAAC,GAAxB,IAA+BtC,IAAI,CAAC4C,IAAL,CAAUN,MAAM,CAAC,CAAD,CAAhB,IAAuB,CAAC,EAAvD,IAA6DtC,IAAI,CAAC6C,KAAL,CAAWP,MAAM,CAAC,CAAD,CAAjB,IAAwB,GAArF,IAA4FtC,IAAI,CAAC6C,KAAL,CAAWP,MAAM,CAAC,CAAD,CAAjB,IAAwB,EAAxH,EAA4H;AACxH,gBAAIQ,eAAe,GAAGR,MAAM,CAAC,CAAD,CAAN,GAAYA,MAAM,CAAC,CAAD,CAAxC;AACA,gBAAIS,cAAc,GAAGT,MAAM,CAAC,CAAD,CAAN,GAAYA,MAAM,CAAC,CAAD,CAAvC;;AACAnB,YAAAA,IAAI,CAACvD,WAAL,CAAiBoF,SAAjB,CAA2B;AACvBC,cAAAA,EAAE,EAAE,YAASC,WAAT,EAAsB;AACtB,uBAAO,CAAC,KAAKA,WAAW,CAAC,CAAD,CAAX,GAAiBZ,MAAM,CAAC,CAAD,CAA5B,IAAmCQ,eAAnC,GAAqD,CAAtD,EAAyD,KAAKI,WAAW,CAAC,CAAD,CAAX,GAAiBZ,MAAM,CAAC,CAAD,CAA5B,IAAmCS,cAAnC,GAAoD,CAA7G,CAAP;AACH,eAHsB;AAIvBI,cAAAA,IAAI,EAAE,cAASD,WAAT,EAAsB;AACxB,uBAAO,CAAC,CAACA,WAAW,CAAC,CAAD,CAAX,GAAiB,CAAlB,IAAuBJ,eAAvB,GAAyC,CAAzC,GAA6CR,MAAM,CAAC,CAAD,CAApD,EAAyD,CAACY,WAAW,CAAC,CAAD,CAAX,GAAiB,CAAlB,IAAuBH,cAAvB,GAAwC,CAAxC,GAA4CT,MAAM,CAAC,CAAD,CAA3G,CAAP;AACH;AANsB,aAA3B;AAQH;AACJ;AACJ;AAlCqD,KAAlC,CAAxB;AAoCH,GA5D2C;AA6D5CG,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,QAAIH,MAAM,GAAG,KAAKc,6BAAL,EAAb;;AACA,QAAI,CAACd,MAAL,EAAa;AACT,UAAIe,YAAY,GAAG,CAAC,GAAG3E,UAAU,CAAC4E,WAAf,EAA4B,KAAKC,SAAL,GAAiBC,GAAjB,CAAqB,UAASC,CAAT,EAAY;AAC5E,eAAOA,CAAC,CAACC,SAAF,EAAP;AACH,OAF8C,CAA5B,CAAnB;;AAGA,UAAIL,YAAJ,EAAkB;AACdf,QAAAA,MAAM,GAAGe,YAAT;AACH;AACJ;;AACDf,IAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AACAA,IAAAA,MAAM,GAAG,CAACA,MAAM,CAAC,CAAD,CAAP,EAAYA,MAAM,CAAC,CAAD,CAAlB,EAAuBA,MAAM,CAAC,CAAD,CAA7B,EAAkCA,MAAM,CAAC,CAAD,CAAxC,CAAT;AACA,WAAOA,MAAP;AACH,GA1E2C;AA2E5CqB,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,QAAIxC,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACyC,eAAL,GAAuB,IAAIrF,QAAQ,CAAC6B,OAAT,CAAiByD,cAArB,CAAoC;AACvDvC,MAAAA,QAAQ,EAAEH,IAAI,CAACI,SADwC;AAEvDuC,MAAAA,SAAS,EAAE3C,IAAI,CAAC4C,KAFuC;AAGvDC,MAAAA,MAAM,EAAE7C,IAH+C;AAIvD8C,MAAAA,aAAa,EAAE9C,IAAI,CAAC+C,cAJmC;AAKvDzC,MAAAA,YAAY,EAAEN,IAAI,CAACO,aALoC;AAMvDI,MAAAA,aAAa,EAAEX,IAAI,CAACY,cANmC;AAOvDE,MAAAA,WAAW,EAAEd,IAAI,CAACe,YAPqC;AAQvDC,MAAAA,WAAW,EAAEhB,IAAI,CAACiB;AARqC,KAApC,CAAvB;AAUH,GAvF2C;AAwF5C+B,EAAAA,eAAe,EAAE,yBAASjD,OAAT,EAAkB;AAC/B,QAAIC,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACiD,WAAL,GAAmB,IAAItG,aAAa,CAACsC,OAAd,CAAsBiE,UAA1B,CAAqC;AACpD/C,MAAAA,QAAQ,EAAEH,IAAI,CAACI,SADqC;AAEpDuC,MAAAA,SAAS,EAAE3C,IAAI,CAAC4C,KAFoC;AAGpDE,MAAAA,aAAa,EAAE9C,IAAI,CAAC+C,cAHgC;AAIpD1C,MAAAA,UAAU,EAAEL,IAAI,CAACvD,WAJmC;AAKpD+D,MAAAA,OAAO,EAAER,IAAI,CAACjD,QALsC;AAMpDgD,MAAAA,OAAO,EAAEA;AAN2C,KAArC,CAAnB;AAQH,GAlG2C;AAmG5CoD,EAAAA,aAAa,EAAE,yBAAW;AACtB,QAAInD,IAAI,GAAG,IAAX;AACA,QAAID,OAAO,GAAGtB,eAAe,EAA7B;AACA,QAAI2E,aAAa,GAAG,CAApB;AACA,QAAIC,uBAAJ;;AACArD,IAAAA,IAAI,CAACqB,wBAAL,GAAgC,YAAW;AACvCgC,MAAAA,uBAAuB,GAAG,IAA1B;AACH,KAFD;;AAGArD,IAAAA,IAAI,CAACwB,sBAAL,GAA8B,YAAW;AACrC6B,MAAAA,uBAAuB,GAAG,KAA1B;AACH,KAFD;;AAGArD,IAAAA,IAAI,CAACe,YAAL,GAAoB,YAAW;AAC3Bf,MAAAA,IAAI,CAACsD,aAAL;;AACA,QAAEF,aAAF;AACH,KAHD;;AAIApD,IAAAA,IAAI,CAACiB,YAAL,GAAoB,YAAW;AAC3BjB,MAAAA,IAAI,CAACwB,sBAAL;;AACA,UAAI,MAAM,EAAE4B,aAAZ,EAA2B;AACvBpD,QAAAA,IAAI,CAACuD,MAAL;AACH;AACJ,KALD;;AAMAvD,IAAAA,IAAI,CAACqB,wBAAL;;AACArB,IAAAA,IAAI,CAACY,cAAL,GAAsB,IAAI1D,gBAAgB,CAAC+B,OAAjB,CAAyBuE,aAA7B,EAAtB;AACAxD,IAAAA,IAAI,CAACvD,WAAL,GAAmB,IAAIA,WAAW,CAACgH,UAAhB,CAA2B;AAC1CC,MAAAA,aAAa,EAAE,uBAASC,KAAT,EAAgB;AAC3B,YAAI,CAACN,uBAAL,EAA8B;AAC1BrD,UAAAA,IAAI,CAACU,aAAL,CAAmB,eAAnB,EAAoC;AAChCkD,YAAAA,MAAM,EAAED;AADwB,WAApC;AAGH;AACJ,OAPyC;AAQ1CE,MAAAA,WAAW,EAAE,qBAASF,KAAT,EAAgB;AACzB,YAAI,CAACN,uBAAL,EAA8B;AAC1BrD,UAAAA,IAAI,CAACU,aAAL,CAAmB,mBAAnB,EAAwC;AACpCoD,YAAAA,UAAU,EAAEH;AADwB,WAAxC;AAGH;AACJ;AAdyC,KAA3B,CAAnB;AAgBA3D,IAAAA,IAAI,CAACjD,QAAL,GAAgB,IAAIC,SAAS,CAACiC,OAAV,CAAkB8E,OAAtB,CAA8B;AAC1CC,MAAAA,IAAI,EAAEhE,IAAI,CAAC4C,KAD+B;AAE1CvC,MAAAA,UAAU,EAAEL,IAAI,CAACvD,WAFyB;AAG1CsD,MAAAA,OAAO,EAAEA;AAHiC,KAA9B,CAAhB;AAKAC,IAAAA,IAAI,CAACiE,eAAL,GAAuB,IAAInH,iBAAiB,CAACmC,OAAlB,CAA0BiF,cAA9B,CAA6C;AAChE7D,MAAAA,UAAU,EAAEL,IAAI,CAACvD,WAD+C;AAEhE0D,MAAAA,QAAQ,EAAEH,IAAI,CAACI,SAFiD;AAGhEI,MAAAA,OAAO,EAAER,IAAI,CAACjD;AAHkD,KAA7C,CAAvB;AAKAiD,IAAAA,IAAI,CAAC+C,cAAL,GAAsB,IAAIzF,QAAQ,CAAC2B,OAAT,CAAiBkF,aAArB,EAAtB;;AACAnE,IAAAA,IAAI,CAAC+C,cAAL,CAAoBqB,OAApB;;AACApE,IAAAA,IAAI,CAACF,oBAAL,CAA0BC,OAA1B;;AACAC,IAAAA,IAAI,CAACgD,eAAL,CAAqBjD,OAArB;;AACAC,IAAAA,IAAI,CAACwC,mBAAL;;AACAxC,IAAAA,IAAI,CAACqE,cAAL,GAAsB,IAAI5G,gBAAgB,CAACwB,OAAjB,CAAyBqF,aAA7B,CAA2C;AAC7D9D,MAAAA,OAAO,EAAER,IAAI,CAACjD,QAD+C;AAE7D8D,MAAAA,OAAO,EAAEb,IAAI,CAAChC,QAF+C;AAG7DuG,MAAAA,eAAe,EAAEvE,IAAI,CAACC;AAHuC,KAA3C,CAAtB;AAKH,GA9J2C;AA+J5CuE,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,SAAKzB,cAAL,CAAoB0B,MAApB;AACH,GAjK2C;AAkK5CC,EAAAA,eAAe,EAAE,CAAC,YAAD,EAAe,eAAf,EAAgC,aAAhC,EAA+C,QAA/C,EAAyD,iBAAzD,EAA4E,aAA5E,EAA2F,QAA3F,CAlK2B;AAmK5CC,EAAAA,mBAAmB,EAAE,CAAC,eAAD,EAAkB,QAAlB,CAnKuB;AAoK5CC,EAAAA,SAAS,EAAE,qBAAW;AAClB,SAAKhC,KAAL,GAAa,KAAKxC,SAAL,CAAe4D,IAAf,CAAoBa,IAApB,CAAyB;AAClCC,MAAAA,KAAK,EAAE,QAD2B;AAElCC,MAAAA,MAAM,EAAE;AAF0B,KAAzB,CAAb;;AAIA,SAAK5B,aAAL;AACH,GA1K2C;AA2K5C6B,EAAAA,YAAY,EAAE,wBAAW;AACrB,QAAIhF,IAAI,GAAG,IAAX;;AACAA,IAAAA,IAAI,CAACiD,WAAL,CAAiBgC,OAAjB;;AACAjF,IAAAA,IAAI,CAACiE,eAAL,CAAqBgB,OAArB;;AACAjF,IAAAA,IAAI,CAACjD,QAAL,CAAckI,OAAd;;AACAjF,IAAAA,IAAI,CAACyC,eAAL,CAAqBwC,OAArB;;AACAjF,IAAAA,IAAI,CAACC,gBAAL,CAAsBgF,OAAtB;;AACAjF,IAAAA,IAAI,CAAC+C,cAAL,CAAoBkC,OAApB;;AACAjF,IAAAA,IAAI,CAACqE,cAAL,CAAoBY,OAApB;;AACAjF,IAAAA,IAAI,CAACY,cAAL,CAAoBqE,OAApB;;AACAjF,IAAAA,IAAI,CAACvD,WAAL,CAAiBwI,OAAjB;;AACAjF,IAAAA,IAAI,CAACY,cAAL,GAAsBZ,IAAI,CAACiE,eAAL,GAAuBjE,IAAI,CAACvD,WAAL,GAAmBuD,IAAI,CAACjD,QAAL,GAAgBiD,IAAI,CAAC+C,cAAL,GAAsB/C,IAAI,CAAC4C,KAAL,GAAa5C,IAAI,CAACC,gBAAL,GAAwBD,IAAI,CAACiD,WAAL,GAAmBjD,IAAI,CAACyC,eAAL,GAAuB,IAArL;AACH,GAvL2C;AAwL5CyC,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAIC,OAAO,GAAG;AACVC,MAAAA,gBAAgB,EAAE,CAAC,CAAC,CAAC,GAAG7I,MAAM,CAAC8I,WAAX,EAAwB,KAAKC,UAAL,CAAgB,gBAAhB,EAAkC,IAAlC,CAAxB,EAAiE,IAAjE,CADV;AAEVC,MAAAA,cAAc,EAAE,CAAC,CAAC,CAAC,GAAGhJ,MAAM,CAAC8I,WAAX,EAAwB,KAAKC,UAAL,CAAgB,gBAAhB,EAAkC,IAAlC,CAAxB,EAAiE,IAAjE;AAFR,KAAd;;AAIA,SAAKrB,eAAL,CAAqBuB,cAArB,CAAoCL,OAApC;;AACA,SAAKlC,WAAL,CAAiBuC,cAAjB,CAAgCL,OAAhC;AACH,GA/L2C;AAgM5CM,EAAAA,eAAe,EAAE,2BAAW;AACxB,WAAO;AACHC,MAAAA,KAAK,EAAEtH,aADJ;AAEHuH,MAAAA,MAAM,EAAEtH;AAFL,KAAP;AAIH,GArM2C;AAsM5CuH,EAAAA,UAAU,EAAE,oBAASC,IAAT,EAAe;AACvB,QAAIC,MAAM,GAAG;AACTC,MAAAA,IAAI,EAAEF,IAAI,CAAC,CAAD,CADD;AAETG,MAAAA,GAAG,EAAEH,IAAI,CAAC,CAAD,CAFA;AAGTH,MAAAA,KAAK,EAAEG,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAHZ;AAITF,MAAAA,MAAM,EAAEE,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAJb;AAKTI,MAAAA,KAAK,EAAE,CALE;AAMTC,MAAAA,MAAM,EAAE;AANC,KAAb;;AAQA,SAAKzJ,WAAL,CAAiB0J,OAAjB,CAAyBL,MAAzB;;AACA,SAAK/C,cAAL,CAAoBoD,OAApB,CAA4BL,MAA5B;;AACA,SAAK7F,gBAAL,CAAsBmG,OAAtB,CAA8B,CAACN,MAAM,CAACC,IAAR,EAAcD,MAAM,CAACE,GAArB,EAA0BF,MAAM,CAACJ,KAAjC,EAAwCI,MAAM,CAACH,MAA/C,CAA9B;AACH,GAlN2C;AAmN5CU,EAAAA,eAAe,EAAE,yBAAShH,IAAT,EAAeiH,YAAf,EAA6BC,SAA7B,EAAwC;AACrD,QAAID,YAAY,IAAIC,SAApB,EAA+B;AAC3B,UAAIjI,gBAAgB,CAACkI,IAAjB,CAAsBnH,IAAtB,CAAJ,EAAiC;AAC7B,YAAIiH,YAAY,CAACG,UAAb,IAA2BF,SAAS,CAACE,UAArC,IAAmDH,YAAY,KAAKC,SAAxE,EAAmF;AAC/ED,UAAAA,YAAY,CAACG,UAAb,GAA0B,IAA1B;AACH,SAFD,MAEO;AACH,cAAIlI,mBAAmB,CAACiI,IAApB,CAAyBnH,IAAzB,CAAJ,EAAoC;AAChC,iBAAK+B,MAAL,CAAY/B,IAAZ,EAAkB,IAAlB;AACH;AACJ;AACJ;AACJ;AACJ,GA/N2C;AAgO5CqH,EAAAA,aAAa,EAAE,yBAAW;AACtB,SAAK3F,YAAL;;AACA,SAAK4F,QAAL,CAAcC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;;AACA,SAAK5F,YAAL;AACH,GApO2C;AAqO5C6F,EAAAA,iBAAiB,EAAE;AACfC,IAAAA,UAAU,EAAE,YADG;AAEfC,IAAAA,MAAM,EAAE,QAFO;AAGfC,IAAAA,UAAU,EAAE,aAHG;AAIfC,IAAAA,OAAO,EAAE,SAJM;AAKfC,IAAAA,YAAY,EAAE,SALC;AAMfC,IAAAA,YAAY,EAAE,SANC;AAOfC,IAAAA,cAAc,EAAE,aAPD;AAQf9B,IAAAA,cAAc,EAAE,aARD;AASflF,IAAAA,UAAU,EAAE,YATG;AAUfc,IAAAA,MAAM,EAAE,QAVO;AAWfmG,IAAAA,aAAa,EAAE,iBAXA;AAYfxD,IAAAA,UAAU,EAAE,aAZG;AAafF,IAAAA,MAAM,EAAE;AAbO,GArOyB;AAoP5C2D,EAAAA,mBAAmB,EAAE,CAAC,YAAD,EAAe,QAAf,EAAyB,iBAAzB,EAA4C,aAA5C,EAA2D,QAA3D,EAAqE,YAArE,EAAmF,aAAnF,EAAkG,SAAlG,EAA6G,SAA7G,EAAwH,aAAxH,CApPuB;AAqP5CC,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,SAAKC,cAAL;AACH,GAvP2C;AAwP5CC,EAAAA,cAAc,EAAE,0BAAW;AACvB,SAAKC,UAAL;AACH,GA1P2C;AA2P5CC,EAAAA,uBAAuB,EAAE,mCAAW;AAChC,SAAKC,WAAL;AACH,GA7P2C;AA8P5CC,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,SAAKC,QAAL;AACH,GAhQ2C;AAiQ5CC,EAAAA,cAAc,EAAE,0BAAW;AACvB,SAAKC,UAAL;AACH,GAnQ2C;AAoQ5CC,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,SAAKC,qBAAL;AACH,GAtQ2C;AAuQ5CC,EAAAA,cAAc,EAAE,0BAAW;AACvB,SAAKC,0BAAL;AACH,GAzQ2C;AA0Q5CC,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,SAAKC,qBAAL;AACH,GA5Q2C;AA6Q5CC,EAAAA,eAAe,EAAE,2BAAW;AACxB,SAAKC,kBAAL;AACH,GA/Q2C;AAgR5CC,EAAAA,eAAe,EAAE,2BAAW;AACxB,SAAKC,kBAAL;AACH,GAlR2C;AAmR5CC,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,SAAK1D,iBAAL;AACH,GArR2C;AAsR5C2D,EAAAA,sBAAsB,EAAE,CAAC,YAAD,EAAe,QAAf,EAAyB,aAAzB,EAAwC,SAAxC,EAAmD,SAAnD,EAA8D,aAA9D,CAtRoB;AAuR5CpB,EAAAA,cAAc,EAAE,0BAAW;AACvB,SAAKhL,WAAL,CAAiBoF,SAAjB,CAA2B,KAAKT,MAAL,CAAY,YAAZ,CAA3B;AACH,GAzR2C;AA0R5CuG,EAAAA,UAAU,EAAE,sBAAW;AACnB,SAAKlL,WAAL,CAAiB8E,SAAjB,CAA2B,KAAKH,MAAL,CAAY,QAAZ,CAA3B;AACH,GA5R2C;AA6R5CyG,EAAAA,WAAW,EAAE,uBAAW;AACpB,SAAKpL,WAAL,CAAiBqM,UAAjB,CAA4B,KAAK1H,MAAL,CAAY,eAAZ,CAA5B;AACH,GA/R2C;AAgS5C2G,EAAAA,QAAQ,EAAE,oBAAW;AACjB,SAAKtL,WAAL,CAAiBsM,OAAjB,CAAyB,KAAK3H,MAAL,CAAY,YAAZ,CAAzB;AACH,GAlS2C;AAmS5C6G,EAAAA,UAAU,EAAE,sBAAW;AACnB,SAAKxL,WAAL,CAAiBuM,SAAjB,CAA2B,KAAK5H,MAAL,CAAY,QAAZ,CAA3B;AACH,GArS2C;AAsS5C+G,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,SAAKlI,gBAAL,CAAsBgJ,oBAAtB,CAA2C,KAAK3D,UAAL,CAAgB,YAAhB,CAA3C;AACH,GAxS2C;AAyS5C+C,EAAAA,0BAA0B,EAAE,sCAAW;AACnC,SAAKpI,gBAAL,CAAsBiJ,UAAtB,CAAiC,KAAK9H,MAAL,CAAY,QAAZ,CAAjC;AACH,GA3S2C;AA4S5Ca,EAAAA,6BAA6B,EAAE,yCAAW;AACtC,QAAIjC,IAAI,GAAG,IAAX;;AACA,QAAIgH,MAAM,GAAGhH,IAAI,CAACC,gBAAL,CAAsBkJ,KAAtB,EAAb;;AACA,QAAIC,cAAc,GAAG,CAAC,IAAI,CAAL,EAAQ,EAAE,IAAI,CAAN,CAAR,EAAkB,EAAE,IAAI,CAAN,CAAlB,EAA4B,IAAI,CAAhC,CAArB;AACA,QAAIC,UAAU,GAAGrC,MAAM,IAAIA,MAAM,CAACsC,MAAjB,GAA0BtC,MAAM,CAACuC,MAAP,CAAc,UAASC,OAAT,EAAkBlH,CAAlB,EAAqB;AAC1E,UAAImH,SAAS,GAAGnH,CAAC,CAACoH,OAAF,EAAhB;AACA,UAAIC,SAAS,GAAGF,SAAS,CAACG,KAAV,EAAhB;;AACA,UAAID,SAAS,GAAG,CAAhB,EAAmB;AACf,YAAIE,QAAQ,GAAGJ,SAAS,CAACK,OAAV,EAAf;;AACA,YAAID,QAAJ,EAAc;AACVL,UAAAA,OAAO,GAAG9K,WAAW,CAAC8K,OAAD,EAAUK,QAAV,CAArB;AACH,SAFD,MAEO;AACH,eAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,SAApB,EAA+BI,CAAC,EAAhC,EAAoC;AAChCP,YAAAA,OAAO,GAAG9K,WAAW,CAAC8K,OAAD,EAAUC,SAAS,CAACK,OAAV,CAAkBC,CAAlB,CAAV,CAArB;AACH;AACJ;AACJ;;AACD,aAAOP,OAAP;AACH,KAd0C,EAcxCJ,cAdwC,CAA1B,GAcI,KAAK,CAd1B;AAeA,WAAOC,UAAU,KAAKD,cAAf,GAAgC,KAAK,CAArC,GAAyCC,UAAhD;AACH,GAhU2C;AAiU5Cd,EAAAA,qBAAqB,EAAE,iCAAW;AAC9B,SAAKtF,WAAL,CAAiBiG,UAAjB,CAA4B,KAAK5D,UAAL,CAAgB,YAAhB,CAA5B;AACH,GAnU2C;AAoU5CmD,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,SAAKhG,eAAL,CAAqByG,UAArB,CAAgC,KAAK9H,MAAL,CAAY,SAAZ,CAAhC;AACH,GAtU2C;AAuU5CuH,EAAAA,kBAAkB,EAAE,8BAAW;AAC3B,SAAK5L,QAAL,CAAcmM,UAAd,CAAyB;AACrB/B,MAAAA,YAAY,EAAE,KAAK7B,UAAL,CAAgB,cAAhB,EAAgC,IAAhC,CADO;AAErB8B,MAAAA,YAAY,EAAE,KAAK9B,UAAL,CAAgB,cAAhB,EAAgC,IAAhC;AAFO,KAAzB;AAIH,GA5U2C;AA6U5ClD,EAAAA,SAAS,EAAE,qBAAW;AAClB,WAAO,KAAKnC,gBAAL,CAAsBkJ,KAAtB,GAA8B9G,GAA9B,CAAkC,UAASC,CAAT,EAAY;AACjD,aAAOA,CAAC,CAAC0H,KAAT;AACH,KAFM,CAAP;AAGH,GAjV2C;AAkV5CC,EAAAA,eAAe,EAAE,yBAASC,KAAT,EAAgB;AAC7B,QAAIC,KAAK,GAAG,KAAKlK,gBAAL,CAAsBmK,OAAtB,CAA8BF,KAA9B,CAAZ;;AACA,WAAOC,KAAK,GAAGA,KAAK,CAACH,KAAT,GAAiB,IAA7B;AACH,GArV2C;AAsV5CK,EAAAA,cAAc,EAAE,wBAAShL,IAAT,EAAe;AAC3B,QAAI8K,KAAK,GAAG,KAAKlK,gBAAL,CAAsBqK,MAAtB,CAA6BjL,IAA7B,CAAZ;;AACA,WAAO8K,KAAK,GAAGA,KAAK,CAACH,KAAT,GAAiB,IAA7B;AACH,GAzV2C;AA0V5CO,EAAAA,cAAc,EAAE,wBAASC,QAAT,EAAmB;AAC/B,QAAIxD,MAAM,GAAG,KAAK/G,gBAAL,CAAsBkJ,KAAtB,EAAb;;AACA,QAAIY,CAAJ;AACA,QAAIU,EAAE,GAAGzD,MAAM,CAACsC,MAAhB;;AACA,SAAKS,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGU,EAAhB,EAAoB,EAAEV,CAAtB,EAAyB;AACrB/C,MAAAA,MAAM,CAAC+C,CAAD,CAAN,CAAUQ,cAAV,CAAyBC,QAAzB;AACH;;AACD,WAAO,IAAP;AACH,GAlW2C;AAmW5C5G,EAAAA,MAAM,EAAE,gBAASD,KAAT,EAAgB;AACpB,QAAI3D,IAAI,GAAG,IAAX;;AACA,QAAI,KAAK,CAAL,KAAW2D,KAAf,EAAsB;AAClB,aAAO3D,IAAI,CAACvD,WAAL,CAAiBiO,SAAjB,EAAP;AACH,KAFD,MAEO;AACH1K,MAAAA,IAAI,CAACvD,WAAL,CAAiBuM,SAAjB,CAA2BrF,KAA3B;;AACA,aAAO3D,IAAP;AACH;AACJ,GA3W2C;AA4W5C8D,EAAAA,UAAU,EAAE,oBAASH,KAAT,EAAgB;AACxB,QAAI3D,IAAI,GAAG,IAAX;;AACA,QAAI,KAAK,CAAL,KAAW2D,KAAf,EAAsB;AAClB,aAAO3D,IAAI,CAACvD,WAAL,CAAiBkO,OAAjB,EAAP;AACH,KAFD,MAEO;AACH3K,MAAAA,IAAI,CAACvD,WAAL,CAAiBsM,OAAjB,CAAyBpF,KAAzB;;AACA,aAAO3D,IAAP;AACH;AACJ,GApX2C;AAqX5C4K,EAAAA,QAAQ,EAAE,kBAASjH,KAAT,EAAgB;AACtB,QAAI3D,IAAI,GAAG,IAAX;;AACA,QAAI,KAAK,CAAL,KAAW2D,KAAf,EAAsB;AAClB,aAAO3D,IAAI,CAACvD,WAAL,CAAiBoO,WAAjB,EAAP;AACH,KAFD,MAEO;AACH7K,MAAAA,IAAI,CAACvD,WAAL,CAAiBqO,WAAjB,CAA6BnH,KAA7B;;AACA,aAAO3D,IAAP;AACH;AACJ,GA7X2C;AA8X5C+K,EAAAA,kBAAkB,EAAE,4BAAShJ,WAAT,EAAsB;AACtCA,IAAAA,WAAW,GAAGA,WAAW,IAAIA,WAAW,CAACuH,MAA3B,GAAoCvH,WAApC,GAAkD,CAAC8E,SAAS,CAAC,CAAD,CAAV,EAAeA,SAAS,CAAC,CAAD,CAAxB,CAAhE;AACA,WAAO,KAAKmE,YAAL,CAAkBjJ,WAAW,CAAC,CAAD,CAA7B,EAAkCA,WAAW,CAAC,CAAD,CAA7C,CAAP;AACH,GAjY2C;AAkY5CiJ,EAAAA,YAAY,EAAE,sBAASC,CAAT,EAAYC,CAAZ,EAAe;AACzB,WAAO,KAAKzO,WAAL,CAAiB0O,eAAjB,CAAiC,CAACF,CAAD,EAAIC,CAAJ,CAAjC,CAAP;AACH,GApY2C;AAqY5CE,EAAAA,WAAW,EAAE,qBAASC,SAAT,EAAoBC,QAApB,EAA8B;AACvC,WAAO,KAAK7O,WAAL,CAAiB8O,aAAjB,CAA+B,CAACF,SAAD,EAAYC,QAAZ,CAA/B,CAAP;AACH;AAvY2C,CAA9B,CAAlB;;AAyYA,CAAC,GAAGzN,uBAAuB,CAACoB,OAA5B,EAAqC,aAArC,EAAoDD,WAApD;AACAwM,MAAM,CAACC,OAAP,GAAiBzM,WAAjB;AACAA,WAAW,CAAC0M,SAAZ,CAAsB5N,OAAO,CAAC6N,MAA9B;AACA3M,WAAW,CAAC0M,SAAZ,CAAsB3N,MAAM,CAAC4N,MAA7B;AACA3M,WAAW,CAAC0M,SAAZ,CAAsB1N,QAAQ,CAAC2N,MAA/B;AACA3M,WAAW,CAAC0M,SAAZ,CAAsBzN,kBAAkB,CAAC0N,MAAzC","sourcesContent":["/**\r\n * DevExtreme (viz/vector_map/vector_map.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _utils = require(\"../core/utils\");\r\nvar _projection = require(\"./projection.main\");\r\nvar _control_bar = require(\"./control_bar\");\r\nvar _control_bar2 = _interopRequireDefault(_control_bar);\r\nvar _gesture_handler = require(\"./gesture_handler\");\r\nvar _gesture_handler2 = _interopRequireDefault(_gesture_handler);\r\nvar _tracker = require(\"./tracker\");\r\nvar _tracker2 = _interopRequireDefault(_tracker);\r\nvar _data_exchanger = require(\"./data_exchanger\");\r\nvar _data_exchanger2 = _interopRequireDefault(_data_exchanger);\r\nvar _legend = require(\"./legend\");\r\nvar _legend2 = _interopRequireDefault(_legend);\r\nvar _layout = require(\"./layout\");\r\nvar _layout2 = _interopRequireDefault(_layout);\r\nvar _map_layer = require(\"./map_layer\");\r\nvar _tooltip_viewer = require(\"./tooltip_viewer\");\r\nvar _tooltip_viewer2 = _interopRequireDefault(_tooltip_viewer);\r\nrequire(\"./projection\");\r\nvar _base_widget = require(\"../core/base_widget\");\r\nvar _base_widget2 = _interopRequireDefault(_base_widget);\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _export = require(\"../core/export\");\r\nvar _title = require(\"../core/title\");\r\nvar _tooltip = require(\"../core/tooltip\");\r\nvar _loading_indicator = require(\"../core/loading_indicator\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DEFAULT_WIDTH = 800;\r\nvar DEFAULT_HEIGHT = 400;\r\nvar RE_STARTS_LAYERS = /^layers/;\r\nvar RE_ENDS_DATA_SOURCE = /\\.dataSource$/;\r\nvar nextDataKey = 1;\r\n\r\nfunction generateDataKey() {\r\n    return \"vectormap-data-\" + nextDataKey++\r\n}\r\n\r\nfunction mergeBounds(sumBounds, dataBounds) {\r\n    return dataBounds ? [Math.min(dataBounds[0], dataBounds[2], sumBounds[0]), Math.min(dataBounds[1], dataBounds[3], sumBounds[3]), Math.max(dataBounds[0], dataBounds[2], sumBounds[2]), Math.max(dataBounds[1], dataBounds[3], sumBounds[1])] : sumBounds\r\n}\r\nvar dxVectorMap = _base_widget2.default.inherit({\r\n    _eventsMap: {\r\n        onClick: {\r\n            name: \"click\"\r\n        },\r\n        onCenterChanged: {\r\n            name: \"centerChanged\"\r\n        },\r\n        onZoomFactorChanged: {\r\n            name: \"zoomFactorChanged\"\r\n        },\r\n        onHoverChanged: {\r\n            name: \"hoverChanged\"\r\n        },\r\n        onSelectionChanged: {\r\n            name: \"selectionChanged\"\r\n        }\r\n    },\r\n    _rootClassPrefix: \"dxm\",\r\n    _rootClass: \"dxm-vector-map\",\r\n    _themeSection: \"map\",\r\n    _fontFields: [\"layer:area.label.font\", \"layer:marker:dot.label.font\", \"layer:marker:bubble.label.font\", \"layer:marker:pie.label.font\", \"layer:marker:image.label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\r\n    _initLayerCollection: function(dataKey) {\r\n        var that = this;\r\n        that._layerCollection = new _map_layer.MapLayerCollection({\r\n            renderer: that._renderer,\r\n            projection: that._projection,\r\n            themeManager: that._themeManager,\r\n            tracker: that._tracker,\r\n            dataKey: dataKey,\r\n            eventTrigger: that._eventTrigger,\r\n            dataExchanger: that._dataExchanger,\r\n            tooltip: that._tooltip,\r\n            notifyDirty: that._notifyDirty,\r\n            notifyReady: that._notifyReady,\r\n            dataReady: function() {\r\n                var bounds;\r\n                if (that.option(\"getBoundsFromData\") && !that.option(\"bounds\")) {\r\n                    that._preventProjectionEvents();\r\n                    bounds = that._getBoundsFromData();\r\n                    that._projection.setBounds(bounds);\r\n                    that._allowProjectionEvents()\r\n                }\r\n                if (!that.option(\"projection\")) {\r\n                    bounds = bounds || that._getBoundsFromData();\r\n                    if (Math.ceil(bounds[0]) < -180 || Math.ceil(bounds[3]) < -90 || Math.floor(bounds[2]) > 180 || Math.floor(bounds[1]) > 90) {\r\n                        var longitudeLength = bounds[2] - bounds[0];\r\n                        var latitudeLength = bounds[1] - bounds[3];\r\n                        that._projection.setEngine({\r\n                            to: function(coordinates) {\r\n                                return [2 * (coordinates[0] - bounds[0]) / longitudeLength - 1, 2 * (coordinates[1] - bounds[3]) / latitudeLength - 1]\r\n                            },\r\n                            from: function(coordinates) {\r\n                                return [(coordinates[0] + 1) * longitudeLength / 2 + bounds[0], (coordinates[1] + 1) * latitudeLength / 2 + bounds[3]]\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getBoundsFromData: function() {\r\n        var bounds = this._getBoundingBoxFromDataSource();\r\n        if (!bounds) {\r\n            var boundsByData = (0, _map_layer.getMaxBound)(this.getLayers().map(function(l) {\r\n                return l.getBounds()\r\n            }));\r\n            if (boundsByData) {\r\n                bounds = boundsByData\r\n            }\r\n        }\r\n        bounds = bounds || [];\r\n        bounds = [bounds[0], bounds[3], bounds[2], bounds[1]];\r\n        return bounds\r\n    },\r\n    _initLegendsControl: function() {\r\n        var that = this;\r\n        that._legendsControl = new _legend2.default.LegendsControl({\r\n            renderer: that._renderer,\r\n            container: that._root,\r\n            widget: that,\r\n            layoutControl: that._layoutControl,\r\n            themeManager: that._themeManager,\r\n            dataExchanger: that._dataExchanger,\r\n            notifyDirty: that._notifyDirty,\r\n            notifyReady: that._notifyReady\r\n        })\r\n    },\r\n    _initControlBar: function(dataKey) {\r\n        var that = this;\r\n        that._controlBar = new _control_bar2.default.ControlBar({\r\n            renderer: that._renderer,\r\n            container: that._root,\r\n            layoutControl: that._layoutControl,\r\n            projection: that._projection,\r\n            tracker: that._tracker,\r\n            dataKey: dataKey\r\n        })\r\n    },\r\n    _initElements: function() {\r\n        var that = this;\r\n        var dataKey = generateDataKey();\r\n        var notifyCounter = 0;\r\n        var preventProjectionEvents;\r\n        that._preventProjectionEvents = function() {\r\n            preventProjectionEvents = true\r\n        };\r\n        that._allowProjectionEvents = function() {\r\n            preventProjectionEvents = false\r\n        };\r\n        that._notifyDirty = function() {\r\n            that._resetIsReady();\r\n            ++notifyCounter\r\n        };\r\n        that._notifyReady = function() {\r\n            that._allowProjectionEvents();\r\n            if (0 === --notifyCounter) {\r\n                that._drawn()\r\n            }\r\n        };\r\n        that._preventProjectionEvents();\r\n        that._dataExchanger = new _data_exchanger2.default.DataExchanger;\r\n        that._projection = new _projection.Projection({\r\n            centerChanged: function(value) {\r\n                if (!preventProjectionEvents) {\r\n                    that._eventTrigger(\"centerChanged\", {\r\n                        center: value\r\n                    })\r\n                }\r\n            },\r\n            zoomChanged: function(value) {\r\n                if (!preventProjectionEvents) {\r\n                    that._eventTrigger(\"zoomFactorChanged\", {\r\n                        zoomFactor: value\r\n                    })\r\n                }\r\n            }\r\n        });\r\n        that._tracker = new _tracker2.default.Tracker({\r\n            root: that._root,\r\n            projection: that._projection,\r\n            dataKey: dataKey\r\n        });\r\n        that._gestureHandler = new _gesture_handler2.default.GestureHandler({\r\n            projection: that._projection,\r\n            renderer: that._renderer,\r\n            tracker: that._tracker\r\n        });\r\n        that._layoutControl = new _layout2.default.LayoutControl;\r\n        that._layoutControl.suspend();\r\n        that._initLayerCollection(dataKey);\r\n        that._initControlBar(dataKey);\r\n        that._initLegendsControl();\r\n        that._tooltipViewer = new _tooltip_viewer2.default.TooltipViewer({\r\n            tracker: that._tracker,\r\n            tooltip: that._tooltip,\r\n            layerCollection: that._layerCollection\r\n        })\r\n    },\r\n    _change_RESUME_LAYOUT: function() {\r\n        this._layoutControl.resume()\r\n    },\r\n    _initialChanges: [\"PROJECTION\", \"RESUME_LAYOUT\", \"LAYOUT_INIT\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\"],\r\n    _layoutChangesOrder: [\"RESUME_LAYOUT\", \"LAYERS\"],\r\n    _initCore: function() {\r\n        this._root = this._renderer.root.attr({\r\n            align: \"center\",\r\n            cursor: \"default\"\r\n        });\r\n        this._initElements()\r\n    },\r\n    _disposeCore: function() {\r\n        var that = this;\r\n        that._controlBar.dispose();\r\n        that._gestureHandler.dispose();\r\n        that._tracker.dispose();\r\n        that._legendsControl.dispose();\r\n        that._layerCollection.dispose();\r\n        that._layoutControl.dispose();\r\n        that._tooltipViewer.dispose();\r\n        that._dataExchanger.dispose();\r\n        that._projection.dispose();\r\n        that._dataExchanger = that._gestureHandler = that._projection = that._tracker = that._layoutControl = that._root = that._layerCollection = that._controlBar = that._legendsControl = null\r\n    },\r\n    _setupInteraction: function() {\r\n        var options = {\r\n            centeringEnabled: !!(0, _utils.parseScalar)(this._getOption(\"panningEnabled\", true), true),\r\n            zoomingEnabled: !!(0, _utils.parseScalar)(this._getOption(\"zoomingEnabled\", true), true)\r\n        };\r\n        this._gestureHandler.setInteraction(options);\r\n        this._controlBar.setInteraction(options)\r\n    },\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: DEFAULT_WIDTH,\r\n            height: DEFAULT_HEIGHT\r\n        }\r\n    },\r\n    _applySize: function(rect) {\r\n        var layout = {\r\n            left: rect[0],\r\n            top: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1],\r\n            right: 0,\r\n            bottom: 0\r\n        };\r\n        this._projection.setSize(layout);\r\n        this._layoutControl.setSize(layout);\r\n        this._layerCollection.setRect([layout.left, layout.top, layout.width, layout.height])\r\n    },\r\n    _optionChanging: function(name, currentValue, nextValue) {\r\n        if (currentValue && nextValue) {\r\n            if (RE_STARTS_LAYERS.test(name)) {\r\n                if (currentValue.dataSource && nextValue.dataSource && currentValue !== nextValue) {\r\n                    currentValue.dataSource = null\r\n                } else {\r\n                    if (RE_ENDS_DATA_SOURCE.test(name)) {\r\n                        this.option(name, null)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _applyChanges: function() {\r\n        this._notifyDirty();\r\n        this.callBase.apply(this, arguments);\r\n        this._notifyReady()\r\n    },\r\n    _optionChangesMap: {\r\n        background: \"BACKGROUND\",\r\n        layers: \"LAYERS\",\r\n        controlBar: \"CONTROL_BAR\",\r\n        legends: \"LEGENDS\",\r\n        touchEnabled: \"TRACKER\",\r\n        wheelEnabled: \"TRACKER\",\r\n        panningEnabled: \"INTERACTION\",\r\n        zoomingEnabled: \"INTERACTION\",\r\n        projection: \"PROJECTION\",\r\n        bounds: \"BOUNDS\",\r\n        maxZoomFactor: \"MAX_ZOOM_FACTOR\",\r\n        zoomFactor: \"ZOOM_FACTOR\",\r\n        center: \"CENTER\"\r\n    },\r\n    _optionChangesOrder: [\"PROJECTION\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\", \"BACKGROUND\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\r\n    _change_PROJECTION: function() {\r\n        this._setProjection()\r\n    },\r\n    _change_BOUNDS: function() {\r\n        this._setBounds()\r\n    },\r\n    _change_MAX_ZOOM_FACTOR: function() {\r\n        this._setMaxZoom()\r\n    },\r\n    _change_ZOOM_FACTOR: function() {\r\n        this._setZoom()\r\n    },\r\n    _change_CENTER: function() {\r\n        this._setCenter()\r\n    },\r\n    _change_BACKGROUND: function() {\r\n        this._setBackgroundOptions()\r\n    },\r\n    _change_LAYERS: function() {\r\n        this._setLayerCollectionOptions()\r\n    },\r\n    _change_CONTROL_BAR: function() {\r\n        this._setControlBarOptions()\r\n    },\r\n    _change_LEGENDS: function() {\r\n        this._setLegendsOptions()\r\n    },\r\n    _change_TRACKER: function() {\r\n        this._setTrackerOptions()\r\n    },\r\n    _change_INTERACTION: function() {\r\n        this._setupInteraction()\r\n    },\r\n    _themeDependentChanges: [\"BACKGROUND\", \"LAYERS\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\r\n    _setProjection: function() {\r\n        this._projection.setEngine(this.option(\"projection\"))\r\n    },\r\n    _setBounds: function() {\r\n        this._projection.setBounds(this.option(\"bounds\"))\r\n    },\r\n    _setMaxZoom: function() {\r\n        this._projection.setMaxZoom(this.option(\"maxZoomFactor\"))\r\n    },\r\n    _setZoom: function() {\r\n        this._projection.setZoom(this.option(\"zoomFactor\"))\r\n    },\r\n    _setCenter: function() {\r\n        this._projection.setCenter(this.option(\"center\"))\r\n    },\r\n    _setBackgroundOptions: function() {\r\n        this._layerCollection.setBackgroundOptions(this._getOption(\"background\"))\r\n    },\r\n    _setLayerCollectionOptions: function() {\r\n        this._layerCollection.setOptions(this.option(\"layers\"))\r\n    },\r\n    _getBoundingBoxFromDataSource: function() {\r\n        var that = this;\r\n        var layers = that._layerCollection.items();\r\n        var infinityBounds = [1 / 0, -(1 / 0), -(1 / 0), 1 / 0];\r\n        var resultBBox = layers && layers.length ? layers.reduce(function(sumBBox, l) {\r\n            var layerData = l.getData();\r\n            var itemCount = layerData.count();\r\n            if (itemCount > 0) {\r\n                var rootBBox = layerData.getBBox();\r\n                if (rootBBox) {\r\n                    sumBBox = mergeBounds(sumBBox, rootBBox)\r\n                } else {\r\n                    for (var i = 0; i < itemCount; i++) {\r\n                        sumBBox = mergeBounds(sumBBox, layerData.getBBox(i))\r\n                    }\r\n                }\r\n            }\r\n            return sumBBox\r\n        }, infinityBounds) : void 0;\r\n        return resultBBox === infinityBounds ? void 0 : resultBBox\r\n    },\r\n    _setControlBarOptions: function() {\r\n        this._controlBar.setOptions(this._getOption(\"controlBar\"))\r\n    },\r\n    _setLegendsOptions: function() {\r\n        this._legendsControl.setOptions(this.option(\"legends\"))\r\n    },\r\n    _setTrackerOptions: function() {\r\n        this._tracker.setOptions({\r\n            touchEnabled: this._getOption(\"touchEnabled\", true),\r\n            wheelEnabled: this._getOption(\"wheelEnabled\", true)\r\n        })\r\n    },\r\n    getLayers: function() {\r\n        return this._layerCollection.items().map(function(l) {\r\n            return l.proxy\r\n        })\r\n    },\r\n    getLayerByIndex: function(index) {\r\n        var layer = this._layerCollection.byIndex(index);\r\n        return layer ? layer.proxy : null\r\n    },\r\n    getLayerByName: function(name) {\r\n        var layer = this._layerCollection.byName(name);\r\n        return layer ? layer.proxy : null\r\n    },\r\n    clearSelection: function(_noEvent) {\r\n        var layers = this._layerCollection.items();\r\n        var i;\r\n        var ii = layers.length;\r\n        for (i = 0; i < ii; ++i) {\r\n            layers[i].clearSelection(_noEvent)\r\n        }\r\n        return this\r\n    },\r\n    center: function(value) {\r\n        var that = this;\r\n        if (void 0 === value) {\r\n            return that._projection.getCenter()\r\n        } else {\r\n            that._projection.setCenter(value);\r\n            return that\r\n        }\r\n    },\r\n    zoomFactor: function(value) {\r\n        var that = this;\r\n        if (void 0 === value) {\r\n            return that._projection.getZoom()\r\n        } else {\r\n            that._projection.setZoom(value);\r\n            return that\r\n        }\r\n    },\r\n    viewport: function(value) {\r\n        var that = this;\r\n        if (void 0 === value) {\r\n            return that._projection.getViewport()\r\n        } else {\r\n            that._projection.setViewport(value);\r\n            return that\r\n        }\r\n    },\r\n    convertCoordinates: function(coordinates) {\r\n        coordinates = coordinates && coordinates.length ? coordinates : [arguments[0], arguments[1]];\r\n        return this.convertToGeo(coordinates[0], coordinates[1])\r\n    },\r\n    convertToGeo: function(x, y) {\r\n        return this._projection.fromScreenPoint([x, y])\r\n    },\r\n    convertToXY: function(longitude, latitude) {\r\n        return this._projection.toScreenPoint([longitude, latitude])\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxVectorMap\", dxVectorMap);\r\nmodule.exports = dxVectorMap;\r\ndxVectorMap.addPlugin(_export.plugin);\r\ndxVectorMap.addPlugin(_title.plugin);\r\ndxVectorMap.addPlugin(_tooltip.plugin);\r\ndxVectorMap.addPlugin(_loading_indicator.plugin);\r\n"]},"metadata":{},"sourceType":"script"}