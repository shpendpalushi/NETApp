{"ast":null,"code":"/**\r\n * DevExtreme (ui/html_editor/ui.html_editor.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _empty_template = require(\"../../core/templates/empty_template\");\n\nvar _editor = require(\"../editor/editor\");\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _callbacks = require(\"../../core/utils/callbacks\");\n\nvar _callbacks2 = _interopRequireDefault(_callbacks);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _uiEventsEmitterGesture = require(\"../scroll_view/ui.events.emitter.gesture.scroll\");\n\nvar _uiEventsEmitterGesture2 = _interopRequireDefault(_uiEventsEmitterGesture);\n\nvar _utils2 = require(\"../text_box/utils.scroll\");\n\nvar _quill_registrator = require(\"./quill_registrator\");\n\nvar _quill_registrator2 = _interopRequireDefault(_quill_registrator);\n\nrequire(\"./converters/delta\");\n\nvar _converterController = require(\"./converterController\");\n\nvar _converterController2 = _interopRequireDefault(_converterController);\n\nvar _wordLists = require(\"./matchers/wordLists\");\n\nvar _wordLists2 = _interopRequireDefault(_wordLists);\n\nvar _textDecoration = require(\"./matchers/textDecoration\");\n\nvar _textDecoration2 = _interopRequireDefault(_textDecoration);\n\nvar _formDialog = require(\"./ui/formDialog\");\n\nvar _formDialog2 = _interopRequireDefault(_formDialog);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar HTML_EDITOR_CLASS = \"dx-htmleditor\";\nvar QUILL_CONTAINER_CLASS = \"dx-quill-container\";\nvar QUILL_CLIPBOARD_CLASS = \"ql-clipboard\";\nvar HTML_EDITOR_SUBMIT_ELEMENT_CLASS = \"dx-htmleditor-submit-element\";\nvar HTML_EDITOR_CONTENT_CLASS = \"dx-htmleditor-content\";\nvar MARKDOWN_VALUE_TYPE = \"markdown\";\nvar ANONYMOUS_TEMPLATE_NAME = \"htmlContent\";\nvar ELEMENT_NODE = 1;\n\nvar HtmlEditor = _editor2.default.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      focusStateEnabled: true,\n      valueType: \"html\",\n      placeholder: \"\",\n      toolbar: null,\n      variables: null,\n      mediaResizing: null,\n      mentions: null,\n      customizeModules: null,\n      formDialogOptions: null\n    });\n  },\n  _init: function _init() {\n    this.callBase();\n    this._cleanCallback = (0, _callbacks2.default)();\n    this._contentInitializedCallback = (0, _callbacks2.default)();\n  },\n  _getAnonymousTemplateName: function _getAnonymousTemplateName() {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates[ANONYMOUS_TEMPLATE_NAME] = new _empty_template.EmptyTemplate();\n  },\n  _focusTarget: function _focusTarget() {\n    return this._getContent();\n  },\n  _getContent: function _getContent() {\n    return this.$element().find(\".\".concat(HTML_EDITOR_CONTENT_CLASS));\n  },\n  _focusInHandler: function _focusInHandler(_ref) {\n    var relatedTarget = _ref.relatedTarget;\n\n    if (this._shouldSkipFocusEvent(relatedTarget)) {\n      return;\n    }\n\n    this._toggleFocusClass(true, this.$element());\n\n    this.callBase.apply(this, arguments);\n  },\n  _focusOutHandler: function _focusOutHandler(_ref2) {\n    var relatedTarget = _ref2.relatedTarget;\n\n    if (this._shouldSkipFocusEvent(relatedTarget)) {\n      return;\n    }\n\n    this._toggleFocusClass(false, this.$element());\n\n    this.callBase.apply(this, arguments);\n  },\n  _shouldSkipFocusEvent: function _shouldSkipFocusEvent(relatedTarget) {\n    return (0, _renderer2.default)(relatedTarget).hasClass(QUILL_CLIPBOARD_CLASS);\n  },\n  _initMarkup: function _initMarkup() {\n    this._$htmlContainer = (0, _renderer2.default)(\"<div>\").addClass(QUILL_CONTAINER_CLASS);\n    this.$element().addClass(HTML_EDITOR_CLASS).wrapInner(this._$htmlContainer);\n\n    var template = this._getTemplate(ANONYMOUS_TEMPLATE_NAME);\n\n    var transclude = true;\n    this._$templateResult = template && template.render({\n      container: (0, _dom.getPublicElement)(this._$htmlContainer),\n      noModel: true,\n      transclude: transclude\n    });\n\n    this._renderSubmitElement();\n\n    this.callBase();\n\n    this._updateContainerMarkup();\n  },\n  _renderSubmitElement: function _renderSubmitElement() {\n    this._$submitElement = (0, _renderer2.default)(\"<textarea>\").addClass(HTML_EDITOR_SUBMIT_ELEMENT_CLASS).attr(\"hidden\", true).appendTo(this.$element());\n\n    this._setSubmitValue(this.option(\"value\"));\n  },\n  _setSubmitValue: function _setSubmitValue(value) {\n    this._getSubmitElement().val(value);\n  },\n  _getSubmitElement: function _getSubmitElement() {\n    return this._$submitElement;\n  },\n  _updateContainerMarkup: function _updateContainerMarkup() {\n    var markup = this.option(\"value\");\n\n    if (this._isMarkdownValue()) {\n      this._prepareMarkdownConverter();\n\n      markup = this._markdownConverter.toHtml(markup);\n    }\n\n    if (markup) {\n      this._$htmlContainer.html(markup);\n    }\n  },\n  _prepareMarkdownConverter: function _prepareMarkdownConverter() {\n    var MarkdownConverter = _converterController2.default.getConverter(\"markdown\");\n\n    if (MarkdownConverter) {\n      this._markdownConverter = new MarkdownConverter();\n    } else {\n      throw _ui2.default.Error(\"E1051\", \"markdown\");\n    }\n  },\n  _render: function _render() {\n    this._prepareConverters();\n\n    this.callBase();\n  },\n  _prepareQuillRegistrator: function _prepareQuillRegistrator() {\n    if (!this._quillRegistrator) {\n      this._quillRegistrator = new _quill_registrator2.default();\n    }\n  },\n  _getRegistrator: function _getRegistrator() {\n    this._prepareQuillRegistrator();\n\n    return this._quillRegistrator;\n  },\n  _prepareConverters: function _prepareConverters() {\n    if (!this._deltaConverter) {\n      var DeltaConverter = _converterController2.default.getConverter(\"delta\");\n\n      if (DeltaConverter) {\n        this._deltaConverter = new DeltaConverter();\n      }\n    }\n\n    if (this.option(\"valueType\") === MARKDOWN_VALUE_TYPE && !this._markdownConverter) {\n      this._prepareMarkdownConverter();\n    }\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    this._contentRenderedDeferred = new _deferred.Deferred();\n\n    var renderContentPromise = this._contentRenderedDeferred.promise();\n\n    this.callBase();\n\n    this._renderHtmlEditor();\n\n    this._renderFormDialog();\n\n    return renderContentPromise;\n  },\n  _renderHtmlEditor: function _renderHtmlEditor() {\n    var _this = this;\n\n    var customizeModules = this.option(\"customizeModules\");\n\n    var modulesConfig = this._getModulesConfig();\n\n    if ((0, _type.isFunction)(customizeModules)) {\n      customizeModules(modulesConfig);\n    }\n\n    this._quillInstance = this._getRegistrator().createEditor(this._$htmlContainer[0], {\n      placeholder: this.option(\"placeholder\"),\n      readOnly: this.option(\"readOnly\") || this.option(\"disabled\"),\n      modules: modulesConfig,\n      theme: \"basic\"\n    });\n\n    this._deltaConverter.setQuillInstance(this._quillInstance);\n\n    this._textChangeHandlerWithContext = this._textChangeHandler.bind(this);\n\n    this._quillInstance.on(\"text-change\", this._textChangeHandlerWithContext);\n\n    this._renderScrollHandler();\n\n    if (this._hasTranscludedContent()) {\n      this._updateContentTask = (0, _common.executeAsync)(function () {\n        _this._applyTranscludedContent();\n      });\n    } else {\n      this._finalizeContentRendering();\n    }\n  },\n  _renderScrollHandler: function _renderScrollHandler() {\n    var $scrollContainer = this._getContent();\n\n    var initScrollData = {\n      validate: function validate(e) {\n        if ((0, _utils.isDxMouseWheelEvent)(e)) {\n          if ((0, _utils2.allowScroll)($scrollContainer, -e.delta, e.shiftKey)) {\n            e._needSkipEvent = true;\n            return true;\n          }\n\n          return false;\n        }\n      }\n    };\n\n    _events_engine2.default.on($scrollContainer, (0, _utils.addNamespace)(_uiEventsEmitterGesture2.default.init, this.NAME), initScrollData, _common.noop);\n  },\n  _applyTranscludedContent: function _applyTranscludedContent() {\n    var markup = this._deltaConverter.toHtml();\n\n    var newDelta = this._quillInstance.clipboard.convert(markup);\n\n    if (newDelta.ops.length) {\n      this._quillInstance.setContents(newDelta);\n    } else {\n      this._finalizeContentRendering();\n    }\n  },\n  _hasTranscludedContent: function _hasTranscludedContent() {\n    return this._$templateResult && this._$templateResult.length;\n  },\n  _getModulesConfig: function _getModulesConfig() {\n    var quill = this._getRegistrator().getQuill();\n\n    var wordListMatcher = (0, _wordLists2.default)(quill);\n    var modulesConfig = (0, _extend.extend)({\n      toolbar: this._getModuleConfigByOption(\"toolbar\"),\n      variables: this._getModuleConfigByOption(\"variables\"),\n      dropImage: this._getBaseModuleConfig(),\n      resizing: this._getModuleConfigByOption(\"mediaResizing\"),\n      mentions: this._getModuleConfigByOption(\"mentions\"),\n      clipboard: {\n        matchVisual: false,\n        matchers: [[\"p.MsoListParagraphCxSpFirst\", wordListMatcher], [\"p.MsoListParagraphCxSpMiddle\", wordListMatcher], [\"p.MsoListParagraphCxSpLast\", wordListMatcher], [ELEMENT_NODE, (0, _textDecoration2.default)(quill)]]\n      }\n    }, this._getCustomModules());\n    return modulesConfig;\n  },\n  _getModuleConfigByOption: function _getModuleConfigByOption(userOptionName) {\n    var optionValue = this.option(userOptionName);\n    var config = {};\n\n    if (!(0, _type.isDefined)(optionValue)) {\n      return;\n    }\n\n    if (Array.isArray(optionValue)) {\n      config[userOptionName] = optionValue;\n    } else {\n      config = optionValue;\n    }\n\n    return (0, _extend.extend)(this._getBaseModuleConfig(), config);\n  },\n  _getBaseModuleConfig: function _getBaseModuleConfig() {\n    return {\n      editorInstance: this\n    };\n  },\n  _getCustomModules: function _getCustomModules() {\n    var _this2 = this;\n\n    var modules = {};\n\n    var moduleNames = this._getRegistrator().getRegisteredModuleNames();\n\n    moduleNames.forEach(function (modulePath) {\n      modules[modulePath] = _this2._getBaseModuleConfig();\n    });\n    return modules;\n  },\n  _textChangeHandler: function _textChangeHandler(newDelta, oldDelta, source) {\n    var htmlMarkup = this._deltaConverter.toHtml();\n\n    var value = this._isMarkdownValue() ? this._updateValueByType(MARKDOWN_VALUE_TYPE, htmlMarkup) : htmlMarkup;\n\n    if (this.option(\"value\") !== value) {\n      this._isEditorUpdating = true;\n      this.option(\"value\", value);\n    }\n\n    this._finalizeContentRendering();\n  },\n  _finalizeContentRendering: function _finalizeContentRendering() {\n    if (this._contentRenderedDeferred) {\n      this.clearHistory();\n\n      this._contentInitializedCallback.fire();\n\n      this._contentRenderedDeferred.resolve();\n\n      this._contentRenderedDeferred = void 0;\n    }\n  },\n  _updateValueByType: function _updateValueByType(valueType, value) {\n    var converter = this._markdownConverter;\n\n    if (!(0, _type.isDefined)(converter)) {\n      return;\n    }\n\n    var currentValue = value || this.option(\"value\");\n    return valueType === MARKDOWN_VALUE_TYPE ? converter.toMarkdown(currentValue) : converter.toHtml(currentValue);\n  },\n  _isMarkdownValue: function _isMarkdownValue() {\n    return this.option(\"valueType\") === MARKDOWN_VALUE_TYPE;\n  },\n  _resetEnabledState: function _resetEnabledState() {\n    if (this._quillInstance) {\n      var isEnabled = !(this.option(\"readOnly\") || this.option(\"disabled\"));\n\n      this._quillInstance.enable(isEnabled);\n    }\n  },\n  _renderFormDialog: function _renderFormDialog() {\n    var userOptions = (0, _extend.extend)(true, {\n      width: \"auto\",\n      height: \"auto\",\n      closeOnOutsideClick: true\n    }, this.option(\"formDialogOptions\"));\n    this._formDialog = new _formDialog2.default(this, userOptions);\n  },\n  _getQuillContainer: function _getQuillContainer() {\n    return this._$htmlContainer;\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"value\":\n        if (this._quillInstance) {\n          if (this._isEditorUpdating) {\n            this._isEditorUpdating = false;\n          } else {\n            var updatedValue = this._isMarkdownValue() ? this._updateValueByType(\"HTML\", args.value) : args.value;\n\n            this._updateHtmlContent(updatedValue);\n          }\n        } else {\n          this._$htmlContainer.html(args.value);\n        }\n\n        this._setSubmitValue(args.value);\n\n        this.callBase(args);\n        break;\n\n      case \"placeholder\":\n      case \"variables\":\n      case \"toolbar\":\n      case \"mentions\":\n      case \"customizeModules\":\n        this._invalidate();\n\n        break;\n\n      case \"valueType\":\n        this._prepareConverters();\n\n        var newValue = this._updateValueByType(args.value);\n\n        if (\"html\" === args.value && this._quillInstance) {\n          this._updateHtmlContent(newValue);\n        } else {\n          this.option(\"value\", newValue);\n        }\n\n        break;\n\n      case \"readOnly\":\n      case \"disabled\":\n        this.callBase(args);\n\n        this._resetEnabledState();\n\n        break;\n\n      case \"formDialogOptions\":\n        this._renderFormDialog();\n\n        break;\n\n      case \"mediaResizing\":\n        if (!args.previousValue || !args.value) {\n          this._invalidate();\n        } else {\n          this._quillInstance.getModule(\"resizing\").option(args.name, args.value);\n        }\n\n        break;\n\n      case \"width\":\n        this.callBase(args);\n\n        this._repaintToolbar();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _repaintToolbar: function _repaintToolbar() {\n    var toolbar = this._quillInstance.getModule(\"toolbar\");\n\n    toolbar && toolbar.repaint();\n  },\n  _updateHtmlContent: function _updateHtmlContent(newMarkup) {\n    var newDelta = this._quillInstance.clipboard.convert(newMarkup);\n\n    this._quillInstance.setContents(newDelta);\n  },\n  _clean: function _clean() {\n    if (this._quillInstance) {\n      _events_engine2.default.off(this._getContent(), \".\".concat(this.NAME));\n\n      this._quillInstance.off(\"text-change\", this._textChangeHandlerWithContext);\n\n      this._cleanCallback.fire();\n    }\n\n    this._abortUpdateContentTask();\n\n    this._cleanCallback.empty();\n\n    this._contentInitializedCallback.empty();\n\n    this.callBase();\n  },\n  _abortUpdateContentTask: function _abortUpdateContentTask() {\n    if (this._updateContentTask) {\n      this._updateContentTask.abort();\n\n      this._updateContentTask = void 0;\n    }\n  },\n  _applyQuillMethod: function _applyQuillMethod(methodName, args) {\n    if (this._quillInstance) {\n      return this._quillInstance[methodName].apply(this._quillInstance, args);\n    }\n  },\n  _applyQuillHistoryMethod: function _applyQuillHistoryMethod(methodName) {\n    if (this._quillInstance && this._quillInstance.history) {\n      this._quillInstance.history[methodName]();\n    }\n  },\n  addCleanCallback: function addCleanCallback(callback) {\n    this._cleanCallback.add(callback);\n  },\n  addContentInitializedCallback: function addContentInitializedCallback(callback) {\n    this._contentInitializedCallback.add(callback);\n  },\n  register: function register(components) {\n    this._getRegistrator().registerModules(components);\n\n    if (this._quillInstance) {\n      this.repaint();\n    }\n  },\n  get: function get(modulePath) {\n    return this._getRegistrator().getQuill().import(modulePath);\n  },\n  getQuillInstance: function getQuillInstance() {\n    return this._quillInstance;\n  },\n  getSelection: function getSelection() {\n    return this._applyQuillMethod(\"getSelection\");\n  },\n  setSelection: function setSelection(index, length) {\n    this._applyQuillMethod(\"setSelection\", arguments);\n  },\n  format: function format(formatName, formatValue) {\n    this._applyQuillMethod(\"format\", arguments);\n  },\n  formatText: function formatText(index, length, formatName, formatValue) {\n    this._applyQuillMethod(\"formatText\", arguments);\n  },\n  formatLine: function formatLine(index, length, formatName, formatValue) {\n    this._applyQuillMethod(\"formatLine\", arguments);\n  },\n  getFormat: function getFormat(index, length) {\n    return this._applyQuillMethod(\"getFormat\", arguments);\n  },\n  removeFormat: function removeFormat(index, length) {\n    return this._applyQuillMethod(\"removeFormat\", arguments);\n  },\n  clearHistory: function clearHistory() {\n    this._applyQuillHistoryMethod(\"clear\");\n  },\n  undo: function undo() {\n    this._applyQuillHistoryMethod(\"undo\");\n  },\n  redo: function redo() {\n    this._applyQuillHistoryMethod(\"redo\");\n  },\n  getLength: function getLength() {\n    return this._applyQuillMethod(\"getLength\");\n  },\n  \"delete\": function _delete(index, length) {\n    this._applyQuillMethod(\"deleteText\", arguments);\n  },\n  insertText: function insertText(index, text, formats) {\n    this._applyQuillMethod(\"insertText\", arguments);\n  },\n  insertEmbed: function insertEmbed(index, type, config) {\n    this._applyQuillMethod(\"insertEmbed\", arguments);\n  },\n  showFormDialog: function showFormDialog(formConfig) {\n    return this._formDialog.show(formConfig);\n  },\n  formDialogOption: function formDialogOption(optionName, optionValue) {\n    return this._formDialog.popupOption.apply(this._formDialog, arguments);\n  },\n  focus: function focus() {\n    this.callBase();\n\n    this._applyQuillMethod(\"focus\");\n  }\n});\n\n(0, _component_registrator2.default)(\"dxHtmlEditor\", HtmlEditor);\nmodule.exports = HtmlEditor;","map":{"version":3,"sources":["C:/Users/User/Documents/Personals/Creation/NETApp/amplify-client/node_modules/devextreme/ui/html_editor/ui.html_editor.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_extend","_type","_dom","_common","_component_registrator","_component_registrator2","_empty_template","_editor","_editor2","_ui","_ui2","_callbacks","_callbacks2","_deferred","_events_engine","_events_engine2","_utils","_uiEventsEmitterGesture","_uiEventsEmitterGesture2","_utils2","_quill_registrator","_quill_registrator2","_converterController","_converterController2","_wordLists","_wordLists2","_textDecoration","_textDecoration2","_formDialog","_formDialog2","obj","__esModule","HTML_EDITOR_CLASS","QUILL_CONTAINER_CLASS","QUILL_CLIPBOARD_CLASS","HTML_EDITOR_SUBMIT_ELEMENT_CLASS","HTML_EDITOR_CONTENT_CLASS","MARKDOWN_VALUE_TYPE","ANONYMOUS_TEMPLATE_NAME","ELEMENT_NODE","HtmlEditor","default","inherit","_getDefaultOptions","extend","callBase","focusStateEnabled","valueType","placeholder","toolbar","variables","mediaResizing","mentions","customizeModules","formDialogOptions","_init","_cleanCallback","_contentInitializedCallback","_getAnonymousTemplateName","_initTemplates","_defaultTemplates","EmptyTemplate","_focusTarget","_getContent","$element","find","concat","_focusInHandler","_ref","relatedTarget","_shouldSkipFocusEvent","_toggleFocusClass","apply","arguments","_focusOutHandler","_ref2","hasClass","_initMarkup","_$htmlContainer","addClass","wrapInner","template","_getTemplate","transclude","_$templateResult","render","container","getPublicElement","noModel","_renderSubmitElement","_updateContainerMarkup","_$submitElement","attr","appendTo","_setSubmitValue","option","value","_getSubmitElement","val","markup","_isMarkdownValue","_prepareMarkdownConverter","_markdownConverter","toHtml","html","MarkdownConverter","getConverter","Error","_render","_prepareConverters","_prepareQuillRegistrator","_quillRegistrator","_getRegistrator","_deltaConverter","DeltaConverter","_renderContentImpl","_contentRenderedDeferred","Deferred","renderContentPromise","promise","_renderHtmlEditor","_renderFormDialog","_this","modulesConfig","_getModulesConfig","isFunction","_quillInstance","createEditor","readOnly","modules","theme","setQuillInstance","_textChangeHandlerWithContext","_textChangeHandler","bind","on","_renderScrollHandler","_hasTranscludedContent","_updateContentTask","executeAsync","_applyTranscludedContent","_finalizeContentRendering","$scrollContainer","initScrollData","validate","e","isDxMouseWheelEvent","allowScroll","delta","shiftKey","_needSkipEvent","addNamespace","init","NAME","noop","newDelta","clipboard","convert","ops","length","setContents","quill","getQuill","wordListMatcher","_getModuleConfigByOption","dropImage","_getBaseModuleConfig","resizing","matchVisual","matchers","_getCustomModules","userOptionName","optionValue","config","isDefined","Array","isArray","editorInstance","_this2","moduleNames","getRegisteredModuleNames","forEach","modulePath","oldDelta","source","htmlMarkup","_updateValueByType","_isEditorUpdating","clearHistory","fire","resolve","converter","currentValue","toMarkdown","_resetEnabledState","isEnabled","enable","userOptions","width","height","closeOnOutsideClick","_getQuillContainer","_optionChanged","args","name","updatedValue","_updateHtmlContent","_invalidate","newValue","previousValue","getModule","_repaintToolbar","repaint","newMarkup","_clean","off","_abortUpdateContentTask","empty","abort","_applyQuillMethod","methodName","_applyQuillHistoryMethod","history","addCleanCallback","callback","add","addContentInitializedCallback","register","components","registerModules","get","import","getQuillInstance","getSelection","setSelection","index","format","formatName","formatValue","formatText","formatLine","getFormat","removeFormat","undo","redo","getLength","insertText","text","formats","insertEmbed","type","showFormDialog","formConfig","show","formDialogOption","optionName","popupOption","focus","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/html_editor/ui.html_editor.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _empty_template = require(\"../../core/templates/empty_template\");\r\nvar _editor = require(\"../editor/editor\");\r\nvar _editor2 = _interopRequireDefault(_editor);\r\nvar _ui = require(\"../widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _callbacks = require(\"../../core/utils/callbacks\");\r\nvar _callbacks2 = _interopRequireDefault(_callbacks);\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _uiEventsEmitterGesture = require(\"../scroll_view/ui.events.emitter.gesture.scroll\");\r\nvar _uiEventsEmitterGesture2 = _interopRequireDefault(_uiEventsEmitterGesture);\r\nvar _utils2 = require(\"../text_box/utils.scroll\");\r\nvar _quill_registrator = require(\"./quill_registrator\");\r\nvar _quill_registrator2 = _interopRequireDefault(_quill_registrator);\r\nrequire(\"./converters/delta\");\r\nvar _converterController = require(\"./converterController\");\r\nvar _converterController2 = _interopRequireDefault(_converterController);\r\nvar _wordLists = require(\"./matchers/wordLists\");\r\nvar _wordLists2 = _interopRequireDefault(_wordLists);\r\nvar _textDecoration = require(\"./matchers/textDecoration\");\r\nvar _textDecoration2 = _interopRequireDefault(_textDecoration);\r\nvar _formDialog = require(\"./ui/formDialog\");\r\nvar _formDialog2 = _interopRequireDefault(_formDialog);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar HTML_EDITOR_CLASS = \"dx-htmleditor\";\r\nvar QUILL_CONTAINER_CLASS = \"dx-quill-container\";\r\nvar QUILL_CLIPBOARD_CLASS = \"ql-clipboard\";\r\nvar HTML_EDITOR_SUBMIT_ELEMENT_CLASS = \"dx-htmleditor-submit-element\";\r\nvar HTML_EDITOR_CONTENT_CLASS = \"dx-htmleditor-content\";\r\nvar MARKDOWN_VALUE_TYPE = \"markdown\";\r\nvar ANONYMOUS_TEMPLATE_NAME = \"htmlContent\";\r\nvar ELEMENT_NODE = 1;\r\nvar HtmlEditor = _editor2.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            focusStateEnabled: true,\r\n            valueType: \"html\",\r\n            placeholder: \"\",\r\n            toolbar: null,\r\n            variables: null,\r\n            mediaResizing: null,\r\n            mentions: null,\r\n            customizeModules: null,\r\n            formDialogOptions: null\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._cleanCallback = (0, _callbacks2.default)();\r\n        this._contentInitializedCallback = (0, _callbacks2.default)()\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._defaultTemplates[ANONYMOUS_TEMPLATE_NAME] = new _empty_template.EmptyTemplate\r\n    },\r\n    _focusTarget: function() {\r\n        return this._getContent()\r\n    },\r\n    _getContent: function() {\r\n        return this.$element().find(\".\".concat(HTML_EDITOR_CONTENT_CLASS))\r\n    },\r\n    _focusInHandler: function(_ref) {\r\n        var relatedTarget = _ref.relatedTarget;\r\n        if (this._shouldSkipFocusEvent(relatedTarget)) {\r\n            return\r\n        }\r\n        this._toggleFocusClass(true, this.$element());\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _focusOutHandler: function(_ref2) {\r\n        var relatedTarget = _ref2.relatedTarget;\r\n        if (this._shouldSkipFocusEvent(relatedTarget)) {\r\n            return\r\n        }\r\n        this._toggleFocusClass(false, this.$element());\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _shouldSkipFocusEvent: function(relatedTarget) {\r\n        return (0, _renderer2.default)(relatedTarget).hasClass(QUILL_CLIPBOARD_CLASS)\r\n    },\r\n    _initMarkup: function() {\r\n        this._$htmlContainer = (0, _renderer2.default)(\"<div>\").addClass(QUILL_CONTAINER_CLASS);\r\n        this.$element().addClass(HTML_EDITOR_CLASS).wrapInner(this._$htmlContainer);\r\n        var template = this._getTemplate(ANONYMOUS_TEMPLATE_NAME);\r\n        var transclude = true;\r\n        this._$templateResult = template && template.render({\r\n            container: (0, _dom.getPublicElement)(this._$htmlContainer),\r\n            noModel: true,\r\n            transclude: transclude\r\n        });\r\n        this._renderSubmitElement();\r\n        this.callBase();\r\n        this._updateContainerMarkup()\r\n    },\r\n    _renderSubmitElement: function() {\r\n        this._$submitElement = (0, _renderer2.default)(\"<textarea>\").addClass(HTML_EDITOR_SUBMIT_ELEMENT_CLASS).attr(\"hidden\", true).appendTo(this.$element());\r\n        this._setSubmitValue(this.option(\"value\"))\r\n    },\r\n    _setSubmitValue: function(value) {\r\n        this._getSubmitElement().val(value)\r\n    },\r\n    _getSubmitElement: function() {\r\n        return this._$submitElement\r\n    },\r\n    _updateContainerMarkup: function() {\r\n        var markup = this.option(\"value\");\r\n        if (this._isMarkdownValue()) {\r\n            this._prepareMarkdownConverter();\r\n            markup = this._markdownConverter.toHtml(markup)\r\n        }\r\n        if (markup) {\r\n            this._$htmlContainer.html(markup)\r\n        }\r\n    },\r\n    _prepareMarkdownConverter: function() {\r\n        var MarkdownConverter = _converterController2.default.getConverter(\"markdown\");\r\n        if (MarkdownConverter) {\r\n            this._markdownConverter = new MarkdownConverter\r\n        } else {\r\n            throw _ui2.default.Error(\"E1051\", \"markdown\")\r\n        }\r\n    },\r\n    _render: function() {\r\n        this._prepareConverters();\r\n        this.callBase()\r\n    },\r\n    _prepareQuillRegistrator: function() {\r\n        if (!this._quillRegistrator) {\r\n            this._quillRegistrator = new _quill_registrator2.default\r\n        }\r\n    },\r\n    _getRegistrator: function() {\r\n        this._prepareQuillRegistrator();\r\n        return this._quillRegistrator\r\n    },\r\n    _prepareConverters: function() {\r\n        if (!this._deltaConverter) {\r\n            var DeltaConverter = _converterController2.default.getConverter(\"delta\");\r\n            if (DeltaConverter) {\r\n                this._deltaConverter = new DeltaConverter\r\n            }\r\n        }\r\n        if (this.option(\"valueType\") === MARKDOWN_VALUE_TYPE && !this._markdownConverter) {\r\n            this._prepareMarkdownConverter()\r\n        }\r\n    },\r\n    _renderContentImpl: function() {\r\n        this._contentRenderedDeferred = new _deferred.Deferred;\r\n        var renderContentPromise = this._contentRenderedDeferred.promise();\r\n        this.callBase();\r\n        this._renderHtmlEditor();\r\n        this._renderFormDialog();\r\n        return renderContentPromise\r\n    },\r\n    _renderHtmlEditor: function() {\r\n        var _this = this;\r\n        var customizeModules = this.option(\"customizeModules\");\r\n        var modulesConfig = this._getModulesConfig();\r\n        if ((0, _type.isFunction)(customizeModules)) {\r\n            customizeModules(modulesConfig)\r\n        }\r\n        this._quillInstance = this._getRegistrator().createEditor(this._$htmlContainer[0], {\r\n            placeholder: this.option(\"placeholder\"),\r\n            readOnly: this.option(\"readOnly\") || this.option(\"disabled\"),\r\n            modules: modulesConfig,\r\n            theme: \"basic\"\r\n        });\r\n        this._deltaConverter.setQuillInstance(this._quillInstance);\r\n        this._textChangeHandlerWithContext = this._textChangeHandler.bind(this);\r\n        this._quillInstance.on(\"text-change\", this._textChangeHandlerWithContext);\r\n        this._renderScrollHandler();\r\n        if (this._hasTranscludedContent()) {\r\n            this._updateContentTask = (0, _common.executeAsync)(function() {\r\n                _this._applyTranscludedContent()\r\n            })\r\n        } else {\r\n            this._finalizeContentRendering()\r\n        }\r\n    },\r\n    _renderScrollHandler: function() {\r\n        var $scrollContainer = this._getContent();\r\n        var initScrollData = {\r\n            validate: function(e) {\r\n                if ((0, _utils.isDxMouseWheelEvent)(e)) {\r\n                    if ((0, _utils2.allowScroll)($scrollContainer, -e.delta, e.shiftKey)) {\r\n                        e._needSkipEvent = true;\r\n                        return true\r\n                    }\r\n                    return false\r\n                }\r\n            }\r\n        };\r\n        _events_engine2.default.on($scrollContainer, (0, _utils.addNamespace)(_uiEventsEmitterGesture2.default.init, this.NAME), initScrollData, _common.noop)\r\n    },\r\n    _applyTranscludedContent: function() {\r\n        var markup = this._deltaConverter.toHtml();\r\n        var newDelta = this._quillInstance.clipboard.convert(markup);\r\n        if (newDelta.ops.length) {\r\n            this._quillInstance.setContents(newDelta)\r\n        } else {\r\n            this._finalizeContentRendering()\r\n        }\r\n    },\r\n    _hasTranscludedContent: function() {\r\n        return this._$templateResult && this._$templateResult.length\r\n    },\r\n    _getModulesConfig: function() {\r\n        var quill = this._getRegistrator().getQuill();\r\n        var wordListMatcher = (0, _wordLists2.default)(quill);\r\n        var modulesConfig = (0, _extend.extend)({\r\n            toolbar: this._getModuleConfigByOption(\"toolbar\"),\r\n            variables: this._getModuleConfigByOption(\"variables\"),\r\n            dropImage: this._getBaseModuleConfig(),\r\n            resizing: this._getModuleConfigByOption(\"mediaResizing\"),\r\n            mentions: this._getModuleConfigByOption(\"mentions\"),\r\n            clipboard: {\r\n                matchVisual: false,\r\n                matchers: [\r\n                    [\"p.MsoListParagraphCxSpFirst\", wordListMatcher],\r\n                    [\"p.MsoListParagraphCxSpMiddle\", wordListMatcher],\r\n                    [\"p.MsoListParagraphCxSpLast\", wordListMatcher],\r\n                    [ELEMENT_NODE, (0, _textDecoration2.default)(quill)]\r\n                ]\r\n            }\r\n        }, this._getCustomModules());\r\n        return modulesConfig\r\n    },\r\n    _getModuleConfigByOption: function(userOptionName) {\r\n        var optionValue = this.option(userOptionName);\r\n        var config = {};\r\n        if (!(0, _type.isDefined)(optionValue)) {\r\n            return\r\n        }\r\n        if (Array.isArray(optionValue)) {\r\n            config[userOptionName] = optionValue\r\n        } else {\r\n            config = optionValue\r\n        }\r\n        return (0, _extend.extend)(this._getBaseModuleConfig(), config)\r\n    },\r\n    _getBaseModuleConfig: function() {\r\n        return {\r\n            editorInstance: this\r\n        }\r\n    },\r\n    _getCustomModules: function() {\r\n        var _this2 = this;\r\n        var modules = {};\r\n        var moduleNames = this._getRegistrator().getRegisteredModuleNames();\r\n        moduleNames.forEach(function(modulePath) {\r\n            modules[modulePath] = _this2._getBaseModuleConfig()\r\n        });\r\n        return modules\r\n    },\r\n    _textChangeHandler: function(newDelta, oldDelta, source) {\r\n        var htmlMarkup = this._deltaConverter.toHtml();\r\n        var value = this._isMarkdownValue() ? this._updateValueByType(MARKDOWN_VALUE_TYPE, htmlMarkup) : htmlMarkup;\r\n        if (this.option(\"value\") !== value) {\r\n            this._isEditorUpdating = true;\r\n            this.option(\"value\", value)\r\n        }\r\n        this._finalizeContentRendering()\r\n    },\r\n    _finalizeContentRendering: function() {\r\n        if (this._contentRenderedDeferred) {\r\n            this.clearHistory();\r\n            this._contentInitializedCallback.fire();\r\n            this._contentRenderedDeferred.resolve();\r\n            this._contentRenderedDeferred = void 0\r\n        }\r\n    },\r\n    _updateValueByType: function(valueType, value) {\r\n        var converter = this._markdownConverter;\r\n        if (!(0, _type.isDefined)(converter)) {\r\n            return\r\n        }\r\n        var currentValue = value || this.option(\"value\");\r\n        return valueType === MARKDOWN_VALUE_TYPE ? converter.toMarkdown(currentValue) : converter.toHtml(currentValue)\r\n    },\r\n    _isMarkdownValue: function() {\r\n        return this.option(\"valueType\") === MARKDOWN_VALUE_TYPE\r\n    },\r\n    _resetEnabledState: function() {\r\n        if (this._quillInstance) {\r\n            var isEnabled = !(this.option(\"readOnly\") || this.option(\"disabled\"));\r\n            this._quillInstance.enable(isEnabled)\r\n        }\r\n    },\r\n    _renderFormDialog: function() {\r\n        var userOptions = (0, _extend.extend)(true, {\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            closeOnOutsideClick: true\r\n        }, this.option(\"formDialogOptions\"));\r\n        this._formDialog = new _formDialog2.default(this, userOptions)\r\n    },\r\n    _getQuillContainer: function() {\r\n        return this._$htmlContainer\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"value\":\r\n                if (this._quillInstance) {\r\n                    if (this._isEditorUpdating) {\r\n                        this._isEditorUpdating = false\r\n                    } else {\r\n                        var updatedValue = this._isMarkdownValue() ? this._updateValueByType(\"HTML\", args.value) : args.value;\r\n                        this._updateHtmlContent(updatedValue)\r\n                    }\r\n                } else {\r\n                    this._$htmlContainer.html(args.value)\r\n                }\r\n                this._setSubmitValue(args.value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"placeholder\":\r\n            case \"variables\":\r\n            case \"toolbar\":\r\n            case \"mentions\":\r\n            case \"customizeModules\":\r\n                this._invalidate();\r\n                break;\r\n            case \"valueType\":\r\n                this._prepareConverters();\r\n                var newValue = this._updateValueByType(args.value);\r\n                if (\"html\" === args.value && this._quillInstance) {\r\n                    this._updateHtmlContent(newValue)\r\n                } else {\r\n                    this.option(\"value\", newValue)\r\n                }\r\n                break;\r\n            case \"readOnly\":\r\n            case \"disabled\":\r\n                this.callBase(args);\r\n                this._resetEnabledState();\r\n                break;\r\n            case \"formDialogOptions\":\r\n                this._renderFormDialog();\r\n                break;\r\n            case \"mediaResizing\":\r\n                if (!args.previousValue || !args.value) {\r\n                    this._invalidate()\r\n                } else {\r\n                    this._quillInstance.getModule(\"resizing\").option(args.name, args.value)\r\n                }\r\n                break;\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._repaintToolbar();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _repaintToolbar: function() {\r\n        var toolbar = this._quillInstance.getModule(\"toolbar\");\r\n        toolbar && toolbar.repaint()\r\n    },\r\n    _updateHtmlContent: function(newMarkup) {\r\n        var newDelta = this._quillInstance.clipboard.convert(newMarkup);\r\n        this._quillInstance.setContents(newDelta)\r\n    },\r\n    _clean: function() {\r\n        if (this._quillInstance) {\r\n            _events_engine2.default.off(this._getContent(), \".\".concat(this.NAME));\r\n            this._quillInstance.off(\"text-change\", this._textChangeHandlerWithContext);\r\n            this._cleanCallback.fire()\r\n        }\r\n        this._abortUpdateContentTask();\r\n        this._cleanCallback.empty();\r\n        this._contentInitializedCallback.empty();\r\n        this.callBase()\r\n    },\r\n    _abortUpdateContentTask: function() {\r\n        if (this._updateContentTask) {\r\n            this._updateContentTask.abort();\r\n            this._updateContentTask = void 0\r\n        }\r\n    },\r\n    _applyQuillMethod: function(methodName, args) {\r\n        if (this._quillInstance) {\r\n            return this._quillInstance[methodName].apply(this._quillInstance, args)\r\n        }\r\n    },\r\n    _applyQuillHistoryMethod: function(methodName) {\r\n        if (this._quillInstance && this._quillInstance.history) {\r\n            this._quillInstance.history[methodName]()\r\n        }\r\n    },\r\n    addCleanCallback: function(callback) {\r\n        this._cleanCallback.add(callback)\r\n    },\r\n    addContentInitializedCallback: function(callback) {\r\n        this._contentInitializedCallback.add(callback)\r\n    },\r\n    register: function(components) {\r\n        this._getRegistrator().registerModules(components);\r\n        if (this._quillInstance) {\r\n            this.repaint()\r\n        }\r\n    },\r\n    get: function(modulePath) {\r\n        return this._getRegistrator().getQuill().import(modulePath)\r\n    },\r\n    getQuillInstance: function() {\r\n        return this._quillInstance\r\n    },\r\n    getSelection: function() {\r\n        return this._applyQuillMethod(\"getSelection\")\r\n    },\r\n    setSelection: function(index, length) {\r\n        this._applyQuillMethod(\"setSelection\", arguments)\r\n    },\r\n    format: function(formatName, formatValue) {\r\n        this._applyQuillMethod(\"format\", arguments)\r\n    },\r\n    formatText: function(index, length, formatName, formatValue) {\r\n        this._applyQuillMethod(\"formatText\", arguments)\r\n    },\r\n    formatLine: function(index, length, formatName, formatValue) {\r\n        this._applyQuillMethod(\"formatLine\", arguments)\r\n    },\r\n    getFormat: function(index, length) {\r\n        return this._applyQuillMethod(\"getFormat\", arguments)\r\n    },\r\n    removeFormat: function(index, length) {\r\n        return this._applyQuillMethod(\"removeFormat\", arguments)\r\n    },\r\n    clearHistory: function() {\r\n        this._applyQuillHistoryMethod(\"clear\")\r\n    },\r\n    undo: function() {\r\n        this._applyQuillHistoryMethod(\"undo\")\r\n    },\r\n    redo: function() {\r\n        this._applyQuillHistoryMethod(\"redo\")\r\n    },\r\n    getLength: function() {\r\n        return this._applyQuillMethod(\"getLength\")\r\n    },\r\n    \"delete\": function(index, length) {\r\n        this._applyQuillMethod(\"deleteText\", arguments)\r\n    },\r\n    insertText: function(index, text, formats) {\r\n        this._applyQuillMethod(\"insertText\", arguments)\r\n    },\r\n    insertEmbed: function(index, type, config) {\r\n        this._applyQuillMethod(\"insertEmbed\", arguments)\r\n    },\r\n    showFormDialog: function(formConfig) {\r\n        return this._formDialog.show(formConfig)\r\n    },\r\n    formDialogOption: function(optionName, optionValue) {\r\n        return this._formDialog.popupOption.apply(this._formDialog, arguments)\r\n    },\r\n    focus: function() {\r\n        this.callBase();\r\n        this._applyQuillMethod(\"focus\")\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxHtmlEditor\", HtmlEditor);\r\nmodule.exports = HtmlEditor;\r\n"]},"metadata":{},"sourceType":"script"}