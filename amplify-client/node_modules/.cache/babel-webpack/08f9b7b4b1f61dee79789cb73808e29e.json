{"ast":null,"code":"/**\r\n * DevExtreme (viz/gauges/linear_gauge.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _each = require(\"../../core/utils/iterator\").each;\n\nvar _max = Math.max;\nvar _min = Math.min;\nvar _round = Math.round;\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar objectUtils = require(\"../../core/utils/object\");\n\nvar dxBaseGauge = require(\"./base_gauge\").dxBaseGauge;\n\nvar dxGauge = require(\"./common\").dxGauge;\n\nvar _normalizeEnum = require(\"../core/utils\").normalizeEnum;\n\nvar linearIndicatorsModule = require(\"./linear_indicators\");\n\nvar createIndicatorCreator = require(\"./common\").createIndicatorCreator;\n\nvar LinearRangeContainer = require(\"./linear_range_container\");\n\nvar dxLinearGauge = dxGauge.inherit({\n  _rootClass: \"dxg-linear-gauge\",\n  _factoryMethods: {\n    rangeContainer: \"createLinearRangeContainer\",\n    indicator: \"createLinearIndicator\"\n  },\n  _gridSpacingFactor: 25,\n  _scaleTypes: {\n    type: \"xyAxes\",\n    drawingType: \"linear\"\n  },\n  _getTicksOrientation: function _getTicksOrientation(scaleOptions) {\n    return scaleOptions.isHorizontal ? scaleOptions.verticalOrientation : scaleOptions.horizontalOrientation;\n  },\n  _getThemeManagerOptions: function _getThemeManagerOptions() {\n    var options = this.callBase.apply(this, arguments);\n    options.subTheme = \"_linear\";\n    return options;\n  },\n  _updateScaleTickIndent: function _updateScaleTickIndent(scaleOptions) {\n    var indentFromTick = scaleOptions.label.indentFromTick;\n    var length = scaleOptions.tick.length;\n\n    var textParams = this._scale.measureLabels(extend({}, this._canvas));\n\n    var verticalTextCorrection = scaleOptions.isHorizontal ? textParams.height + textParams.y : 0;\n    var isIndentPositive = indentFromTick > 0;\n    var orientation;\n    var textCorrection;\n    var tickCorrection;\n\n    if (scaleOptions.isHorizontal) {\n      orientation = isIndentPositive ? {\n        center: .5,\n        top: 0,\n        bottom: 1\n      } : {\n        center: .5,\n        top: 1,\n        bottom: 0\n      };\n      tickCorrection = length * orientation[scaleOptions.verticalOrientation];\n      textCorrection = textParams.y;\n    } else {\n      orientation = isIndentPositive ? {\n        center: .5,\n        left: 0,\n        right: 1\n      } : {\n        center: .5,\n        left: 1,\n        right: 0\n      };\n      tickCorrection = length * orientation[scaleOptions.horizontalOrientation];\n      textCorrection = -textParams.width;\n    }\n\n    scaleOptions.label.indentFromAxis = -indentFromTick + (isIndentPositive ? -tickCorrection + textCorrection : tickCorrection - verticalTextCorrection);\n\n    this._scale.updateOptions(scaleOptions);\n  },\n  _shiftScale: function _shiftScale(layout, scaleOptions) {\n    var that = this;\n    var canvas = extend({}, that._canvas);\n    var isHorizontal = scaleOptions.isHorizontal;\n    var scale = that._scale;\n    canvas[isHorizontal ? \"left\" : \"top\"] = that._area[isHorizontal ? \"startCoord\" : \"endCoord\"];\n    canvas[isHorizontal ? \"right\" : \"bottom\"] = canvas[isHorizontal ? \"width\" : \"height\"] - that._area[isHorizontal ? \"endCoord\" : \"startCoord\"];\n    scale.draw(canvas);\n    scale.shift({\n      left: -layout.x,\n      top: -layout.y\n    });\n  },\n  _setupCodomain: function _setupCodomain() {\n    var that = this;\n    var geometry = that.option(\"geometry\") || {};\n\n    var vertical = \"vertical\" === _normalizeEnum(geometry.orientation);\n\n    var initialStartCoord = -100;\n    var initialEndCoord = 100;\n    that._area = {\n      vertical: vertical,\n      x: 0,\n      y: 0,\n      startCoord: initialStartCoord,\n      endCoord: initialEndCoord\n    };\n    that._rangeContainer.vertical = vertical;\n\n    that._translator.setCodomain(initialStartCoord, initialEndCoord);\n  },\n  _getScaleLayoutValue: function _getScaleLayoutValue() {\n    return this._area[this._area.vertical ? \"x\" : \"y\"];\n  },\n  _getTicksCoefficients: function _getTicksCoefficients(options) {\n    var coefs = {\n      inner: 0,\n      outer: 1\n    };\n\n    if (this._area.vertical) {\n      if (\"left\" === options.horizontalOrientation) {\n        coefs.inner = 1;\n        coefs.outer = 0;\n      } else {\n        if (\"center\" === options.horizontalOrientation) {\n          coefs.inner = coefs.outer = .5;\n        }\n      }\n    } else {\n      if (\"top\" === options.verticalOrientation) {\n        coefs.inner = 1;\n        coefs.outer = 0;\n      } else {\n        if (\"center\" === options.verticalOrientation) {\n          coefs.inner = coefs.outer = .5;\n        }\n      }\n    }\n\n    return coefs;\n  },\n  _correctScaleIndents: function _correctScaleIndents(result, indentFromTick, textParams) {\n    var vertical = this._area.vertical;\n\n    if (indentFromTick >= 0) {\n      result.max += indentFromTick + textParams[vertical ? \"width\" : \"height\"];\n    } else {\n      result.min -= -indentFromTick + textParams[vertical ? \"width\" : \"height\"];\n    }\n\n    result.indent = textParams[vertical ? \"height\" : \"width\"] / 2;\n  },\n  _measureMainElements: function _measureMainElements(elements, scaleMeasurement) {\n    var that = this;\n    var x = that._area.x;\n    var y = that._area.y;\n    var minBound = 1e3;\n    var maxBound = 0;\n    var indent = 0;\n    var scale = that._scale;\n\n    _each(elements.concat(scale), function (_, element) {\n      var bounds = element.measure ? element.measure({\n        x: x + element.getOffset(),\n        y: y + element.getOffset()\n      }) : scaleMeasurement;\n      void 0 !== bounds.max && (maxBound = _max(maxBound, bounds.max));\n      void 0 !== bounds.min && (minBound = _min(minBound, bounds.min));\n      bounds.indent > 0 && (indent = _max(indent, bounds.indent));\n    });\n\n    return {\n      minBound: minBound,\n      maxBound: maxBound,\n      indent: indent\n    };\n  },\n  _applyMainLayout: function _applyMainLayout(elements, scaleMeasurement) {\n    var that = this;\n\n    var measurements = that._measureMainElements(elements, scaleMeasurement);\n\n    var area = that._area;\n    var rect;\n    var offset;\n\n    if (area.vertical) {\n      rect = selectRectBySizes(that._innerRect, {\n        width: measurements.maxBound - measurements.minBound\n      });\n      offset = (rect.left + rect.right) / 2 - (measurements.minBound + measurements.maxBound) / 2;\n      area.startCoord = rect.bottom - measurements.indent;\n      area.endCoord = rect.top + measurements.indent;\n      area.x = _round(area.x + offset);\n    } else {\n      rect = selectRectBySizes(that._innerRect, {\n        height: measurements.maxBound - measurements.minBound\n      });\n      offset = (rect.top + rect.bottom) / 2 - (measurements.minBound + measurements.maxBound) / 2;\n      area.startCoord = rect.left + measurements.indent;\n      area.endCoord = rect.right - measurements.indent;\n      area.y = _round(area.y + offset);\n    }\n\n    that._translator.setCodomain(area.startCoord, area.endCoord);\n\n    that._innerRect = rect;\n  },\n  _getElementLayout: function _getElementLayout(offset) {\n    return {\n      x: _round(this._area.x + offset),\n      y: _round(this._area.y + offset)\n    };\n  },\n  _getApproximateScreenRange: function _getApproximateScreenRange() {\n    var that = this;\n    var area = that._area;\n    var s = area.vertical ? that._canvas.height : that._canvas.width;\n    s > area.totalSize && (s = area.totalSize);\n    s = .8 * s;\n    return s;\n  },\n  _getDefaultSize: function _getDefaultSize() {\n    var geometry = this.option(\"geometry\") || {};\n\n    if (\"vertical\" === geometry.orientation) {\n      return {\n        width: 100,\n        height: 300\n      };\n    } else {\n      return {\n        width: 300,\n        height: 100\n      };\n    }\n  },\n  _factory: objectUtils.clone(dxBaseGauge.prototype._factory)\n});\n\nfunction selectRectBySizes(srcRect, sizes, margins) {\n  var rect = extend({}, srcRect);\n  var step;\n  margins = margins || {};\n\n  if (sizes) {\n    rect.left += margins.left || 0;\n    rect.right -= margins.right || 0;\n    rect.top += margins.top || 0;\n    rect.bottom -= margins.bottom || 0;\n\n    if (sizes.width > 0) {\n      step = (rect.right - rect.left - sizes.width) / 2;\n\n      if (step > 0) {\n        rect.left += step;\n        rect.right -= step;\n      }\n    }\n\n    if (sizes.height > 0) {\n      step = (rect.bottom - rect.top - sizes.height) / 2;\n\n      if (step > 0) {\n        rect.top += step;\n        rect.bottom -= step;\n      }\n    }\n  }\n\n  return rect;\n}\n\nvar indicators = dxLinearGauge.prototype._factory.indicators = {};\ndxLinearGauge.prototype._factory.createIndicator = createIndicatorCreator(indicators);\nindicators._default = linearIndicatorsModule._default;\nindicators.rectangle = linearIndicatorsModule.rectangle;\nindicators.rhombus = linearIndicatorsModule.rhombus;\nindicators.circle = linearIndicatorsModule.circle;\nindicators.trianglemarker = linearIndicatorsModule.trianglemarker;\nindicators.textcloud = linearIndicatorsModule.textcloud;\nindicators.rangebar = linearIndicatorsModule.rangebar;\ndxLinearGauge.prototype._factory.RangeContainer = LinearRangeContainer;\nregisterComponent(\"dxLinearGauge\", dxLinearGauge);\nmodule.exports = dxLinearGauge;","map":{"version":3,"sources":["C:/Users/User/Documents/Templates/Angular/black-dashboard-pro-angular-v1.1.1/black-dashboard-pro-angular-v1.1.1/node_modules/devextreme/viz/gauges/linear_gauge.js"],"names":["_each","require","each","_max","Math","max","_min","min","_round","round","registerComponent","extend","objectUtils","dxBaseGauge","dxGauge","_normalizeEnum","normalizeEnum","linearIndicatorsModule","createIndicatorCreator","LinearRangeContainer","dxLinearGauge","inherit","_rootClass","_factoryMethods","rangeContainer","indicator","_gridSpacingFactor","_scaleTypes","type","drawingType","_getTicksOrientation","scaleOptions","isHorizontal","verticalOrientation","horizontalOrientation","_getThemeManagerOptions","options","callBase","apply","arguments","subTheme","_updateScaleTickIndent","indentFromTick","label","length","tick","textParams","_scale","measureLabels","_canvas","verticalTextCorrection","height","y","isIndentPositive","orientation","textCorrection","tickCorrection","center","top","bottom","left","right","width","indentFromAxis","updateOptions","_shiftScale","layout","that","canvas","scale","_area","draw","shift","x","_setupCodomain","geometry","option","vertical","initialStartCoord","initialEndCoord","startCoord","endCoord","_rangeContainer","_translator","setCodomain","_getScaleLayoutValue","_getTicksCoefficients","coefs","inner","outer","_correctScaleIndents","result","indent","_measureMainElements","elements","scaleMeasurement","minBound","maxBound","concat","_","element","bounds","measure","getOffset","_applyMainLayout","measurements","area","rect","offset","selectRectBySizes","_innerRect","_getElementLayout","_getApproximateScreenRange","s","totalSize","_getDefaultSize","_factory","clone","prototype","srcRect","sizes","margins","step","indicators","createIndicator","_default","rectangle","rhombus","circle","trianglemarker","textcloud","rangebar","RangeContainer","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/gauges/linear_gauge.js)\r\n * Version: 19.2.6\r\n * Build date: Thu Jan 30 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _each = require(\"../../core/utils/iterator\").each;\r\nvar _max = Math.max;\r\nvar _min = Math.min;\r\nvar _round = Math.round;\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar objectUtils = require(\"../../core/utils/object\");\r\nvar dxBaseGauge = require(\"./base_gauge\").dxBaseGauge;\r\nvar dxGauge = require(\"./common\").dxGauge;\r\nvar _normalizeEnum = require(\"../core/utils\").normalizeEnum;\r\nvar linearIndicatorsModule = require(\"./linear_indicators\");\r\nvar createIndicatorCreator = require(\"./common\").createIndicatorCreator;\r\nvar LinearRangeContainer = require(\"./linear_range_container\");\r\nvar dxLinearGauge = dxGauge.inherit({\r\n    _rootClass: \"dxg-linear-gauge\",\r\n    _factoryMethods: {\r\n        rangeContainer: \"createLinearRangeContainer\",\r\n        indicator: \"createLinearIndicator\"\r\n    },\r\n    _gridSpacingFactor: 25,\r\n    _scaleTypes: {\r\n        type: \"xyAxes\",\r\n        drawingType: \"linear\"\r\n    },\r\n    _getTicksOrientation: function(scaleOptions) {\r\n        return scaleOptions.isHorizontal ? scaleOptions.verticalOrientation : scaleOptions.horizontalOrientation\r\n    },\r\n    _getThemeManagerOptions: function() {\r\n        var options = this.callBase.apply(this, arguments);\r\n        options.subTheme = \"_linear\";\r\n        return options\r\n    },\r\n    _updateScaleTickIndent: function(scaleOptions) {\r\n        var indentFromTick = scaleOptions.label.indentFromTick;\r\n        var length = scaleOptions.tick.length;\r\n        var textParams = this._scale.measureLabels(extend({}, this._canvas));\r\n        var verticalTextCorrection = scaleOptions.isHorizontal ? textParams.height + textParams.y : 0;\r\n        var isIndentPositive = indentFromTick > 0;\r\n        var orientation;\r\n        var textCorrection;\r\n        var tickCorrection;\r\n        if (scaleOptions.isHorizontal) {\r\n            orientation = isIndentPositive ? {\r\n                center: .5,\r\n                top: 0,\r\n                bottom: 1\r\n            } : {\r\n                center: .5,\r\n                top: 1,\r\n                bottom: 0\r\n            };\r\n            tickCorrection = length * orientation[scaleOptions.verticalOrientation];\r\n            textCorrection = textParams.y\r\n        } else {\r\n            orientation = isIndentPositive ? {\r\n                center: .5,\r\n                left: 0,\r\n                right: 1\r\n            } : {\r\n                center: .5,\r\n                left: 1,\r\n                right: 0\r\n            };\r\n            tickCorrection = length * orientation[scaleOptions.horizontalOrientation];\r\n            textCorrection = -textParams.width\r\n        }\r\n        scaleOptions.label.indentFromAxis = -indentFromTick + (isIndentPositive ? -tickCorrection + textCorrection : tickCorrection - verticalTextCorrection);\r\n        this._scale.updateOptions(scaleOptions)\r\n    },\r\n    _shiftScale: function(layout, scaleOptions) {\r\n        var that = this;\r\n        var canvas = extend({}, that._canvas);\r\n        var isHorizontal = scaleOptions.isHorizontal;\r\n        var scale = that._scale;\r\n        canvas[isHorizontal ? \"left\" : \"top\"] = that._area[isHorizontal ? \"startCoord\" : \"endCoord\"];\r\n        canvas[isHorizontal ? \"right\" : \"bottom\"] = canvas[isHorizontal ? \"width\" : \"height\"] - that._area[isHorizontal ? \"endCoord\" : \"startCoord\"];\r\n        scale.draw(canvas);\r\n        scale.shift({\r\n            left: -layout.x,\r\n            top: -layout.y\r\n        })\r\n    },\r\n    _setupCodomain: function() {\r\n        var that = this;\r\n        var geometry = that.option(\"geometry\") || {};\r\n        var vertical = \"vertical\" === _normalizeEnum(geometry.orientation);\r\n        var initialStartCoord = -100;\r\n        var initialEndCoord = 100;\r\n        that._area = {\r\n            vertical: vertical,\r\n            x: 0,\r\n            y: 0,\r\n            startCoord: initialStartCoord,\r\n            endCoord: initialEndCoord\r\n        };\r\n        that._rangeContainer.vertical = vertical;\r\n        that._translator.setCodomain(initialStartCoord, initialEndCoord)\r\n    },\r\n    _getScaleLayoutValue: function() {\r\n        return this._area[this._area.vertical ? \"x\" : \"y\"]\r\n    },\r\n    _getTicksCoefficients: function(options) {\r\n        var coefs = {\r\n            inner: 0,\r\n            outer: 1\r\n        };\r\n        if (this._area.vertical) {\r\n            if (\"left\" === options.horizontalOrientation) {\r\n                coefs.inner = 1;\r\n                coefs.outer = 0\r\n            } else {\r\n                if (\"center\" === options.horizontalOrientation) {\r\n                    coefs.inner = coefs.outer = .5\r\n                }\r\n            }\r\n        } else {\r\n            if (\"top\" === options.verticalOrientation) {\r\n                coefs.inner = 1;\r\n                coefs.outer = 0\r\n            } else {\r\n                if (\"center\" === options.verticalOrientation) {\r\n                    coefs.inner = coefs.outer = .5\r\n                }\r\n            }\r\n        }\r\n        return coefs\r\n    },\r\n    _correctScaleIndents: function(result, indentFromTick, textParams) {\r\n        var vertical = this._area.vertical;\r\n        if (indentFromTick >= 0) {\r\n            result.max += indentFromTick + textParams[vertical ? \"width\" : \"height\"]\r\n        } else {\r\n            result.min -= -indentFromTick + textParams[vertical ? \"width\" : \"height\"]\r\n        }\r\n        result.indent = textParams[vertical ? \"height\" : \"width\"] / 2\r\n    },\r\n    _measureMainElements: function(elements, scaleMeasurement) {\r\n        var that = this;\r\n        var x = that._area.x;\r\n        var y = that._area.y;\r\n        var minBound = 1e3;\r\n        var maxBound = 0;\r\n        var indent = 0;\r\n        var scale = that._scale;\r\n        _each(elements.concat(scale), function(_, element) {\r\n            var bounds = element.measure ? element.measure({\r\n                x: x + element.getOffset(),\r\n                y: y + element.getOffset()\r\n            }) : scaleMeasurement;\r\n            void 0 !== bounds.max && (maxBound = _max(maxBound, bounds.max));\r\n            void 0 !== bounds.min && (minBound = _min(minBound, bounds.min));\r\n            bounds.indent > 0 && (indent = _max(indent, bounds.indent))\r\n        });\r\n        return {\r\n            minBound: minBound,\r\n            maxBound: maxBound,\r\n            indent: indent\r\n        }\r\n    },\r\n    _applyMainLayout: function(elements, scaleMeasurement) {\r\n        var that = this;\r\n        var measurements = that._measureMainElements(elements, scaleMeasurement);\r\n        var area = that._area;\r\n        var rect;\r\n        var offset;\r\n        if (area.vertical) {\r\n            rect = selectRectBySizes(that._innerRect, {\r\n                width: measurements.maxBound - measurements.minBound\r\n            });\r\n            offset = (rect.left + rect.right) / 2 - (measurements.minBound + measurements.maxBound) / 2;\r\n            area.startCoord = rect.bottom - measurements.indent;\r\n            area.endCoord = rect.top + measurements.indent;\r\n            area.x = _round(area.x + offset)\r\n        } else {\r\n            rect = selectRectBySizes(that._innerRect, {\r\n                height: measurements.maxBound - measurements.minBound\r\n            });\r\n            offset = (rect.top + rect.bottom) / 2 - (measurements.minBound + measurements.maxBound) / 2;\r\n            area.startCoord = rect.left + measurements.indent;\r\n            area.endCoord = rect.right - measurements.indent;\r\n            area.y = _round(area.y + offset)\r\n        }\r\n        that._translator.setCodomain(area.startCoord, area.endCoord);\r\n        that._innerRect = rect\r\n    },\r\n    _getElementLayout: function(offset) {\r\n        return {\r\n            x: _round(this._area.x + offset),\r\n            y: _round(this._area.y + offset)\r\n        }\r\n    },\r\n    _getApproximateScreenRange: function() {\r\n        var that = this;\r\n        var area = that._area;\r\n        var s = area.vertical ? that._canvas.height : that._canvas.width;\r\n        s > area.totalSize && (s = area.totalSize);\r\n        s = .8 * s;\r\n        return s\r\n    },\r\n    _getDefaultSize: function() {\r\n        var geometry = this.option(\"geometry\") || {};\r\n        if (\"vertical\" === geometry.orientation) {\r\n            return {\r\n                width: 100,\r\n                height: 300\r\n            }\r\n        } else {\r\n            return {\r\n                width: 300,\r\n                height: 100\r\n            }\r\n        }\r\n    },\r\n    _factory: objectUtils.clone(dxBaseGauge.prototype._factory)\r\n});\r\n\r\nfunction selectRectBySizes(srcRect, sizes, margins) {\r\n    var rect = extend({}, srcRect);\r\n    var step;\r\n    margins = margins || {};\r\n    if (sizes) {\r\n        rect.left += margins.left || 0;\r\n        rect.right -= margins.right || 0;\r\n        rect.top += margins.top || 0;\r\n        rect.bottom -= margins.bottom || 0;\r\n        if (sizes.width > 0) {\r\n            step = (rect.right - rect.left - sizes.width) / 2;\r\n            if (step > 0) {\r\n                rect.left += step;\r\n                rect.right -= step\r\n            }\r\n        }\r\n        if (sizes.height > 0) {\r\n            step = (rect.bottom - rect.top - sizes.height) / 2;\r\n            if (step > 0) {\r\n                rect.top += step;\r\n                rect.bottom -= step\r\n            }\r\n        }\r\n    }\r\n    return rect\r\n}\r\nvar indicators = dxLinearGauge.prototype._factory.indicators = {};\r\ndxLinearGauge.prototype._factory.createIndicator = createIndicatorCreator(indicators);\r\nindicators._default = linearIndicatorsModule._default;\r\nindicators.rectangle = linearIndicatorsModule.rectangle;\r\nindicators.rhombus = linearIndicatorsModule.rhombus;\r\nindicators.circle = linearIndicatorsModule.circle;\r\nindicators.trianglemarker = linearIndicatorsModule.trianglemarker;\r\nindicators.textcloud = linearIndicatorsModule.textcloud;\r\nindicators.rangebar = linearIndicatorsModule.rangebar;\r\ndxLinearGauge.prototype._factory.RangeContainer = LinearRangeContainer;\r\nregisterComponent(\"dxLinearGauge\", dxLinearGauge);\r\nmodule.exports = dxLinearGauge;\r\n"]},"metadata":{},"sourceType":"script"}