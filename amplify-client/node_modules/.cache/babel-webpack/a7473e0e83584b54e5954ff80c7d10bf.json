{"ast":null,"code":"import { Injectable, Component, Input, HostBinding, ElementRef, Host, Renderer2, NgModule } from '@angular/core';\nimport { isBs3 } from 'ngx-bootstrap/utils';\nimport { CommonModule } from '@angular/common';\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\n\nfunction ProgressbarComponent_bar_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"bar\", 2);\n    ɵngcc0.ɵɵprojection(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"type\", ctx_r0.type)(\"value\", ctx_r0._value);\n  }\n}\n\nfunction ProgressbarComponent_ng_template_1_bar_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"bar\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var item_r3 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"type\", item_r3.type)(\"value\", item_r3.value);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(item_r3.label);\n  }\n}\n\nfunction ProgressbarComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProgressbarComponent_ng_template_1_bar_0_Template, 2, 3, \"bar\", 3);\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1._value);\n  }\n}\n\nvar _c0 = [\"*\"];\n\nvar ProgressbarConfig =\n/** @class */\nfunction () {\n  function ProgressbarConfig() {\n    /**\r\n     * if `true` changing value of progress bar will be animated\r\n     */\n    this.animate = false;\n    /**\r\n     * maximum total value of progress element\r\n     */\n\n    this.max = 100;\n  }\n\n  ProgressbarConfig.ɵfac = function ProgressbarConfig_Factory(t) {\n    return new (t || ProgressbarConfig)();\n  };\n\n  ProgressbarConfig.ɵprov = ɵngcc0.ɵɵdefineInjectable({\n    token: ProgressbarConfig,\n    factory: function factory(t) {\n      return ProgressbarConfig.ɵfac(t);\n    }\n  });\n  /*@__PURE__*/\n\n  (function () {\n    ɵngcc0.ɵsetClassMetadata(ProgressbarConfig, [{\n      type: Injectable\n    }], function () {\n      return [];\n    }, null);\n  })();\n\n  return ProgressbarConfig;\n}();\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\n\nvar ProgressbarComponent =\n/** @class */\nfunction () {\n  function ProgressbarComponent(config) {\n    this.isStacked = false;\n    this.addClass = true;\n    /* tslint:disable-next-line:no-any */\n\n    this.bars = [];\n    this._max = 100;\n    Object.assign(this, config);\n  }\n\n  Object.defineProperty(ProgressbarComponent.prototype, \"animate\", {\n    /** if `true` changing value of progress bar will be animated */\n    set:\n    /**\r\n    * if `true` changing value of progress bar will be animated\r\n    * @param {?} value\r\n    * @return {?}\r\n    */\n    function set(value) {\n      this._animate = value;\n      this.bars.forEach(\n      /**\r\n      * @param {?} b\r\n      * @return {?}\r\n      */\n      function (b) {\n        b.animate = value;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ProgressbarComponent.prototype, \"striped\", {\n    /** If `true`, striped classes are applied */\n    set:\n    /**\r\n    * If `true`, striped classes are applied\r\n    * @param {?} value\r\n    * @return {?}\r\n    */\n    function set(value) {\n      this._striped = value;\n      this.bars.forEach(\n      /**\r\n      * @param {?} b\r\n      * @return {?}\r\n      */\n      function (b) {\n        b.striped = value;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ProgressbarComponent.prototype, \"value\", {\n    /** current value of progress bar. Could be a number or array of objects\r\n     * like {\"value\":15,\"type\":\"info\",\"label\":\"15 %\"}\r\n     */\n    set:\n    /**\r\n    * current value of progress bar. Could be a number or array of objects\r\n    * like {\"value\":15,\"type\":\"info\",\"label\":\"15 %\"}\r\n    * @param {?} value\r\n    * @return {?}\r\n    */\n    function set(value) {\n      this.isStacked = Array.isArray(value);\n      this._value = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ProgressbarComponent.prototype, \"isBs3\", {\n    get:\n    /**\r\n    * @return {?}\r\n    */\n    function get() {\n      return isBs3();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ProgressbarComponent.prototype, \"max\", {\n    /** maximum total value of progress element */\n    get:\n    /**\r\n    * maximum total value of progress element\r\n    * @return {?}\r\n    */\n    function get() {\n      return this._max;\n    },\n    set:\n    /**\r\n    * @param {?} v\r\n    * @return {?}\r\n    */\n    function set(v) {\n      this._max = v;\n      this.bars.forEach(\n      /**\r\n      * @param {?} bar\r\n      * @return {?}\r\n      */\n      function (bar) {\n        bar.recalculatePercentage();\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * @param {?} bar\r\n   * @return {?}\r\n   */\n\n  ProgressbarComponent.prototype.addBar =\n  /**\r\n  * @param {?} bar\r\n  * @return {?}\r\n  */\n  function (bar) {\n    bar.animate = this._animate;\n    bar.striped = this._striped;\n    this.bars.push(bar);\n  };\n  /**\r\n   * @param {?} bar\r\n   * @return {?}\r\n   */\n\n\n  ProgressbarComponent.prototype.removeBar =\n  /**\r\n  * @param {?} bar\r\n  * @return {?}\r\n  */\n  function (bar) {\n    this.bars.splice(this.bars.indexOf(bar), 1);\n  };\n  /** @nocollapse */\n\n\n  ProgressbarComponent.ctorParameters = function () {\n    return [{\n      type: ProgressbarConfig\n    }];\n  };\n\n  ProgressbarComponent.propDecorators = {\n    animate: [{\n      type: Input\n    }],\n    striped: [{\n      type: Input\n    }],\n    type: [{\n      type: Input\n    }],\n    value: [{\n      type: Input\n    }],\n    max: [{\n      type: HostBinding,\n      args: ['attr.max']\n    }, {\n      type: Input\n    }],\n    addClass: [{\n      type: HostBinding,\n      args: ['class.progress']\n    }]\n  };\n\n  ProgressbarComponent.ɵfac = function ProgressbarComponent_Factory(t) {\n    return new (t || ProgressbarComponent)(ɵngcc0.ɵɵdirectiveInject(ProgressbarConfig));\n  };\n\n  ProgressbarComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n    type: ProgressbarComponent,\n    selectors: [[\"progressbar\"]],\n    hostVars: 3,\n    hostBindings: function ProgressbarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"max\", ctx.max);\n        ɵngcc0.ɵɵclassProp(\"progress\", ctx.addClass);\n      }\n    },\n    inputs: {\n      animate: \"animate\",\n      striped: \"striped\",\n      value: \"value\",\n      max: \"max\",\n      type: \"type\"\n    },\n    ngContentSelectors: _c0,\n    decls: 2,\n    vars: 2,\n    consts: [[3, \"type\", \"value\", 4, \"ngIf\"], [3, \"ngIf\"], [3, \"type\", \"value\"], [3, \"type\", \"value\", 4, \"ngFor\", \"ngForOf\"]],\n    template: function ProgressbarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, ProgressbarComponent_bar_0_Template, 2, 2, \"bar\", 0);\n        ɵngcc0.ɵɵtemplate(1, ProgressbarComponent_ng_template_1_Template, 1, 1, \"ng-template\", 1);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.isStacked);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isStacked);\n      }\n    },\n    directives: function directives() {\n      return [ɵngcc1.NgIf, BarComponent, ɵngcc1.NgForOf];\n    },\n    styles: [\"[_nghost-%COMP%] {\\n      width: 100%;\\n      display: flex;\\n    }\"]\n  });\n  /*@__PURE__*/\n\n  (function () {\n    ɵngcc0.ɵsetClassMetadata(ProgressbarComponent, [{\n      type: Component,\n      args: [{\n        selector: 'progressbar',\n        template: \"<bar [type]=\\\"type\\\" [value]=\\\"_value\\\" *ngIf=\\\"!isStacked\\\">\\n  <ng-content></ng-content>\\n</bar>\\n<ng-template [ngIf]=\\\"isStacked\\\">\\n  <bar *ngFor=\\\"let item of _value\\\" [type]=\\\"item.type\\\" [value]=\\\"item.value\\\">{{ item.label }}</bar>\\n</ng-template>\\n\",\n        styles: [\"\\n    :host {\\n      width: 100%;\\n      display: flex;\\n    }\\n  \"]\n      }]\n    }], function () {\n      return [{\n        type: ProgressbarConfig\n      }];\n    }, {\n      addClass: [{\n        type: HostBinding,\n        args: ['class.progress']\n      }],\n      animate: [{\n        type: Input\n      }],\n      striped: [{\n        type: Input\n      }],\n      value: [{\n        type: Input\n      }],\n      max: [{\n        type: HostBinding,\n        args: ['attr.max']\n      }, {\n        type: Input\n      }],\n      type: [{\n        type: Input\n      }]\n    });\n  })();\n\n  return ProgressbarComponent;\n}();\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n// todo: number pipe\n// todo: use query from progress?\n\n\nvar BarComponent =\n/** @class */\nfunction () {\n  function BarComponent(el, progress, renderer) {\n    this.el = el;\n    this.renderer = renderer;\n    this.addClass = true;\n    this.percent = 0;\n    this.progress = progress;\n  }\n\n  Object.defineProperty(BarComponent.prototype, \"type\", {\n    /** provide one of the four supported contextual classes: `success`, `info`, `warning`, `danger` */\n    get:\n    /**\r\n    * provide one of the four supported contextual classes: `success`, `info`, `warning`, `danger`\r\n    * @return {?}\r\n    */\n    function get() {\n      return this._type;\n    },\n    set:\n    /**\r\n    * @param {?} v\r\n    * @return {?}\r\n    */\n    function set(v) {\n      this._type = v;\n      this.applyTypeClasses();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarComponent.prototype, \"value\", {\n    /** current value of progress bar */\n    get:\n    /**\r\n    * current value of progress bar\r\n    * @return {?}\r\n    */\n    function get() {\n      return this._value;\n    },\n    set:\n    /**\r\n    * @param {?} v\r\n    * @return {?}\r\n    */\n    function set(v) {\n      if (!v && v !== 0) {\n        return;\n      }\n\n      this._value = v;\n      this.recalculatePercentage();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarComponent.prototype, \"setBarWidth\", {\n    get:\n    /**\r\n    * @return {?}\r\n    */\n    function get() {\n      this.recalculatePercentage();\n      return this.percent;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BarComponent.prototype, \"isBs3\", {\n    get:\n    /**\r\n    * @return {?}\r\n    */\n    function get() {\n      return isBs3();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * @return {?}\r\n   */\n\n  BarComponent.prototype.ngOnInit =\n  /**\r\n  * @return {?}\r\n  */\n  function () {\n    this.progress.addBar(this);\n  };\n  /**\r\n   * @return {?}\r\n   */\n\n\n  BarComponent.prototype.ngOnDestroy =\n  /**\r\n  * @return {?}\r\n  */\n  function () {\n    this.progress.removeBar(this);\n  };\n  /**\r\n   * @return {?}\r\n   */\n\n\n  BarComponent.prototype.recalculatePercentage =\n  /**\r\n  * @return {?}\r\n  */\n  function () {\n    this.percent = +(this.value / this.progress.max * 100).toFixed(2);\n    /** @type {?} */\n\n    var totalPercentage = this.progress.bars.reduce(\n    /**\r\n    * @param {?} total\r\n    * @param {?} bar\r\n    * @return {?}\r\n    */\n    function (total, bar) {\n      return total + bar.percent;\n    }, 0);\n\n    if (totalPercentage > 100) {\n      this.percent -= totalPercentage - 100;\n    }\n  };\n  /**\r\n   * @private\r\n   * @return {?}\r\n   */\n\n\n  BarComponent.prototype.applyTypeClasses =\n  /**\r\n  * @private\r\n  * @return {?}\r\n  */\n  function () {\n    if (this._prevType) {\n      /** @type {?} */\n      var barTypeClass = \"progress-bar-\" + this._prevType;\n      /** @type {?} */\n\n      var bgClass = \"bg-\" + this._prevType;\n      this.renderer.removeClass(this.el.nativeElement, barTypeClass);\n      this.renderer.removeClass(this.el.nativeElement, bgClass);\n      this._prevType = null;\n    }\n\n    if (this._type) {\n      /** @type {?} */\n      var barTypeClass = \"progress-bar-\" + this._type;\n      /** @type {?} */\n\n      var bgClass = \"bg-\" + this._type;\n      this.renderer.addClass(this.el.nativeElement, barTypeClass);\n      this.renderer.addClass(this.el.nativeElement, bgClass);\n      this._prevType = this._type;\n    }\n  };\n  /** @nocollapse */\n\n\n  BarComponent.ctorParameters = function () {\n    return [{\n      type: ElementRef\n    }, {\n      type: ProgressbarComponent,\n      decorators: [{\n        type: Host\n      }]\n    }, {\n      type: Renderer2\n    }];\n  };\n\n  BarComponent.propDecorators = {\n    type: [{\n      type: Input\n    }],\n    value: [{\n      type: Input\n    }],\n    setBarWidth: [{\n      type: HostBinding,\n      args: ['style.width.%']\n    }],\n    addClass: [{\n      type: HostBinding,\n      args: ['class.progress-bar']\n    }]\n  };\n\n  BarComponent.ɵfac = function BarComponent_Factory(t) {\n    return new (t || BarComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ProgressbarComponent, 1), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  BarComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n    type: BarComponent,\n    selectors: [[\"bar\"]],\n    hostAttrs: [\"role\", \"progressbar\", \"aria-valuemin\", \"0\"],\n    hostVars: 15,\n    hostBindings: function BarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-valuenow\", ctx.value)(\"aria-valuetext\", ctx.percent ? ctx.percent.toFixed(0) + \"%\" : \"\")(\"aria-valuemax\", ctx.max);\n        ɵngcc0.ɵɵstyleProp(\"height\", \"100\", \"%\")(\"width\", ctx.setBarWidth, \"%\");\n        ɵngcc0.ɵɵclassProp(\"progress-bar-animated\", !ctx.isBs3 && ctx.animate)(\"progress-bar-striped\", ctx.striped)(\"active\", ctx.isBs3 && ctx.animate)(\"progress-bar\", ctx.addClass);\n      }\n    },\n    inputs: {\n      type: \"type\",\n      value: \"value\"\n    },\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function BarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  /*@__PURE__*/\n\n  (function () {\n    ɵngcc0.ɵsetClassMetadata(BarComponent, [{\n      type: Component,\n      args: [{\n        selector: 'bar',\n        template: \"<ng-content></ng-content>\\n\",\n        host: {\n          role: 'progressbar',\n          'aria-valuemin': '0',\n          '[class.progress-bar-animated]': '!isBs3 && animate',\n          '[class.progress-bar-striped]': 'striped',\n          '[class.active]': 'isBs3 && animate',\n          '[attr.aria-valuenow]': 'value',\n          '[attr.aria-valuetext]': 'percent ? percent.toFixed(0) + \"%\" : \"\"',\n          '[attr.aria-valuemax]': 'max',\n          '[style.height.%]': '\"100\"'\n        }\n      }]\n    }], function () {\n      return [{\n        type: ɵngcc0.ElementRef\n      }, {\n        type: ProgressbarComponent,\n        decorators: [{\n          type: Host\n        }]\n      }, {\n        type: ɵngcc0.Renderer2\n      }];\n    }, {\n      addClass: [{\n        type: HostBinding,\n        args: ['class.progress-bar']\n      }],\n      type: [{\n        type: Input\n      }],\n      value: [{\n        type: Input\n      }],\n      setBarWidth: [{\n        type: HostBinding,\n        args: ['style.width.%']\n      }]\n    });\n  })();\n\n  return BarComponent;\n}();\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\n\nvar ProgressbarModule =\n/** @class */\nfunction () {\n  function ProgressbarModule() {}\n  /**\r\n   * @return {?}\r\n   */\n\n\n  ProgressbarModule.forRoot =\n  /**\r\n  * @return {?}\r\n  */\n  function () {\n    return {\n      ngModule: ProgressbarModule,\n      providers: [ProgressbarConfig]\n    };\n  };\n\n  ProgressbarModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({\n    type: ProgressbarModule\n  });\n  ProgressbarModule.ɵinj = ɵngcc0.ɵɵdefineInjector({\n    factory: function ProgressbarModule_Factory(t) {\n      return new (t || ProgressbarModule)();\n    },\n    imports: [[CommonModule]]\n  });\n\n  (function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ProgressbarModule, {\n      declarations: function declarations() {\n        return [BarComponent, ProgressbarComponent];\n      },\n      imports: function imports() {\n        return [CommonModule];\n      },\n      exports: function exports() {\n        return [BarComponent, ProgressbarComponent];\n      }\n    });\n  })();\n  /*@__PURE__*/\n\n\n  (function () {\n    ɵngcc0.ɵsetClassMetadata(ProgressbarModule, [{\n      type: NgModule,\n      args: [{\n        imports: [CommonModule],\n        declarations: [BarComponent, ProgressbarComponent],\n        exports: [BarComponent, ProgressbarComponent]\n      }]\n    }], function () {\n      return [];\n    }, null);\n  })();\n\n  return ProgressbarModule;\n}();\n\nexport { BarComponent, ProgressbarComponent, ProgressbarConfig, ProgressbarModule };","map":null,"metadata":{},"sourceType":"module"}