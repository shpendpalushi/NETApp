{"version":3,"file":"ngx-bootstrap-rating.umd.js","sources":["ngx-bootstrap/rating/rating.component.ts","ngx-bootstrap/rating/rating.module.ts"],"names":["NG_VALUE_ACCESSOR","forwardRef","EventEmitter","Component","ChangeDetectionStrategy","ChangeDetectorRef","Input","Output","HostListener","NgModule","CommonModule"],"mappings":"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","sourcesContent":["import {\n  Component,\n  EventEmitter,\n  HostListener,\n  Input,\n  OnInit,\n  Output,\n  forwardRef, TemplateRef, ChangeDetectionStrategy, ChangeDetectorRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { AccessorContent, RatingResults } from './models';\n\nexport const RATING_CONTROL_VALUE_ACCESSOR: AccessorContent = {\n  provide: NG_VALUE_ACCESSOR,\n  /* tslint:disable-next-line: no-use-before-declare */\n  useExisting: forwardRef(() => RatingComponent),\n  multi: true\n};\n\n@Component({\n  selector: 'rating',\n  templateUrl: './rating.component.html',\n  providers: [RATING_CONTROL_VALUE_ACCESSOR],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RatingComponent implements ControlValueAccessor, OnInit {\n  /** number of icons */\n  @Input() max = 5;\n  /** if true will not react on any user events */\n  @Input() readonly: boolean;\n  /** array of icons titles, default: ([\"one\", \"two\", \"three\", \"four\", \"five\"]) */\n  @Input() titles: string[];\n  /** custom template for icons */\n  // tslint:disable-next-line:no-any\n  @Input() customTemplate: TemplateRef<any>;\n  /** fired when icon selected, $event:number equals to selected rating */\n  @Output() onHover: EventEmitter<number> = new EventEmitter();\n  /** fired when icon selected, $event:number equals to previous rating value */\n  @Output() onLeave: EventEmitter<number> = new EventEmitter();\n\n  // tslint:disable-next-line:no-any\n  onChange: any = Function.prototype;\n  // tslint:disable-next-line:no-any\n  onTouched: any = Function.prototype;\n\n  range: RatingResults[];\n  value: number;\n  protected preValue: number;\n\n  constructor(private changeDetection: ChangeDetectorRef) {}\n\n  @HostListener('keydown', ['$event'])\n  onKeydown(event: KeyboardEvent): void {\n    /* tslint:disable-next-line: deprecation */\n    if ([37, 38, 39, 40].indexOf(event.which) === -1) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n    /* tslint:disable-next-line: deprecation */\n    const sign = event.which === 38 || event.which === 39 ? 1 : -1;\n    this.rate(this.value + sign);\n  }\n\n  ngOnInit(): void {\n    this.max = typeof this.max !== 'undefined' ? this.max : 5;\n    this.titles =\n      typeof this.titles !== 'undefined' && this.titles.length > 0\n        ? this.titles\n        : [];\n    this.range = this.buildTemplateObjects(this.max);\n  }\n\n  // model -> view\n  writeValue(value: number): void {\n    if (value % 1 !== value) {\n      this.value = Math.round(value);\n      this.preValue = value;\n      this.changeDetection.markForCheck();\n\n      return;\n    }\n\n    this.preValue = value;\n    this.value = value;\n    this.changeDetection.markForCheck();\n  }\n\n  enter(value: number): void {\n    if (!this.readonly) {\n      this.value = value;\n      this.changeDetection.markForCheck();\n      this.onHover.emit(value);\n    }\n  }\n\n  reset(): void {\n    this.value = this.preValue;\n    this.changeDetection.markForCheck();\n    this.onLeave.emit(this.value);\n  }\n\n  registerOnChange(fn: (_: number) => {}): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => {}): void {\n    this.onTouched = fn;\n  }\n\n  rate(value: number): void {\n    if (!this.readonly && value >= 0 && value <= this.range.length) {\n      this.writeValue(value);\n      this.onChange(value);\n    }\n  }\n\n  protected buildTemplateObjects(max: number): RatingResults[] {\n    const result: RatingResults[] = [];\n    for (let i = 0; i < max; i++) {\n      result.push({\n          index: i,\n          title: this.titles[i] || i + 1\n        });\n    }\n\n    return result;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule, ModuleWithProviders } from '@angular/core';\nimport { RatingComponent } from './rating.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [RatingComponent],\n  exports: [RatingComponent]\n})\nexport class RatingModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: RatingModule,\n      providers: []\n    };\n  }\n}\n"]}